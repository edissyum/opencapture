!function(){"use strict";var gt=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},jt=function(t){return{eq:t}},Ht=jt(function(t,e){return t===e}),It=function(t){return jt(function(e,n){if(e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t.eq(e[o],n[o]))return!1;return!0})},re=function(t){return jt(function(e,n){var l,u,f,r=Object.keys(e),o=Object.keys(n);if(!(l=Ht,u=It(l),f=function(u){return Array.prototype.slice.call(u).sort(void 0)},jt(function(h,b){return u.eq(f(h),f(b))})).eq(r,o))return!1;for(var s=r.length,a=0;a<s;a++){var i=r[a];if(!t.eq(e[i],n[i]))return!1}return!0})},Ie=jt(function(t,e){if(t===e)return!0;var n=gt(t);return n===gt(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?It(Ie).eq(t,e):"object"===n&&re(Ie).eq(t,e))});const yn=Object.getPrototypeOf,Ke=(t,e,n)=>{var r;return!!n(t,e.prototype)||(null===(r=t.constructor)||void 0===r?void 0:r.name)===e.name},In=t=>e=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&Ke(n,String,(o,s)=>s.isPrototypeOf(o))?"string":r})(e)===t,gr=t=>e=>typeof e===t,Cn=t=>e=>t===e,hr=(t,e)=>Ut(t)&&Ke(t,e,(n,r)=>yn(n)===r),Rt=In("string"),Ut=In("object"),Dt=t=>hr(t,Object),it=In("array"),Zt=Cn(null),_n=gr("boolean"),Be=Cn(void 0),be=t=>null==t,pt=t=>!be(t),pe=gr("function"),x=gr("number"),An=(t,e)=>{if(it(t)){for(let n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}return!1},Et=()=>{},Zn=(t,e)=>(...n)=>t(e.apply(null,n)),Os=(t,e)=>n=>t(e(n)),ft=t=>()=>t,de=t=>t,fo=(t,e)=>t===e;function yt(t,...e){return(...n)=>{const r=e.concat(n);return t.apply(null,r)}}const Lo=t=>e=>!t(e),sr=t=>()=>{throw new Error(t)},mo=t=>t(),Fn=t=>{t()},Ce=ft(!1),Ae=ft(!0);class N{constructor(e,n){this.tag=e,this.value=n}static some(e){return new N(!0,e)}static none(){return N.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?N.some(e(this.value)):N.none()}bind(e){return this.tag?e(this.value):N.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:N.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return pt(e)?N.some(e):N.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}N.singletonNone=new N(!1);const po=Array.prototype.slice,wt=Array.prototype.indexOf,te=Array.prototype.push,ie=(t,e)=>wt.call(t,e),Tt=(t,e)=>ie(t,e)>-1,ke=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},oe=(t,e)=>{const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e(t[o],o);return r},st=(t,e)=>{for(let n=0,r=t.length;n<r;n++)e(t[n],n)},go=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Wr=(t,e)=>{const n=[],r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];(e(a,o)?n:r).push(a)}return{pass:n,fail:r}},qt=(t,e)=>{const n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];e(s,r)&&n.push(s)}return n},Po=(t,e,n)=>(go(t,(r,o)=>{n=e(n,r,o)}),n),gn=(t,e,n)=>(st(t,(r,o)=>{n=e(n,r,o)}),n),Br=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++){const s=t[r];if(e(s,r))return N.some(s);if(n(s,r))break}return N.none()},Ue=(t,e)=>Br(t,e,Ce),Ds=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return N.some(n);return N.none()},Pl=t=>{const e=[];for(let n=0,r=t.length;n<r;++n){if(!it(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);te.apply(e,t[n])}return e},en=(t,e)=>Pl(oe(t,e)),ar=(t,e)=>{for(let n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0},Vr=t=>{const e=po.call(t,0);return e.reverse(),e},Wt=(t,e)=>qt(t,n=>!Tt(e,n)),xn=(t,e)=>{const n={};for(let r=0,o=t.length;r<o;r++){const s=t[r];n[String(s)]=e(s,r)}return n},Mo=(t,e)=>{const n=po.call(t,0);return n.sort(e),n},wa=(t,e)=>e>=0&&e<t.length?N.some(t[e]):N.none(),wn=t=>wa(t,0),ho=t=>wa(t,t.length-1),an=pe(Array.from)?Array.from:t=>po.call(t),jn=(t,e)=>{for(let n=0;n<t.length;n++){const r=e(t[n],n);if(r.isSome())return r}return N.none()},Ye=Object.keys,ts=Object.hasOwnProperty,we=(t,e)=>{const n=Ye(t);for(let r=0,o=n.length;r<o;r++){const s=n[r];e(t[s],s)}},Io=(t,e)=>Ml(t,(n,r)=>({k:r,v:e(n,r)})),Ml=(t,e)=>{const n={};return we(t,(r,o)=>{const s=e(r,o);n[s.k]=s.v}),n},Sa=t=>(e,n)=>{t[n]=e},Fo=(t,e,n,r)=>{we(t,(o,s)=>{(e(o,s)?n:r)(o,s)})},br=(t,e)=>{const n={};return Fo(t,e,Sa(n),Et),n},es=(t,e)=>{const n=[];return we(t,(r,o)=>{n.push(e(r,o))}),n},jo=t=>es(t,de),Se=(t,e)=>ee(t,e)?N.from(t[e]):N.none(),ee=(t,e)=>ts.call(t,e),hn=(t,e)=>ee(t,e)&&null!=t[e],Rn=t=>{const e={};return st(t,n=>{e[n]={}}),Ye(e)},ka=t=>void 0!==t.length,fi=Array.isArray,Bs=(t,e,n)=>{if(!t)return!1;if(n=n||t,ka(t)){for(let r=0,o=t.length;r<o;r++)if(!1===e.call(n,t[r],r,t))return!1}else for(const r in t)if(ee(t,r)&&!1===e.call(n,t[r],r,t))return!1;return!0},Ea=(t,e)=>{const n=[];return Bs(t,(r,o)=>{n.push(e(r,o,t))}),n},Lr=(t,e)=>{const n=[];return Bs(t,(r,o)=>{e&&!e(r,o,t)||n.push(r)}),n},Kr=(t,e,n,r)=>{let o=Be(n)?t[0]:n;for(let s=0;s<t.length;s++)o=e.call(r,o,t[s],s);return o},Na=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t))return r;return-1},Pr=t=>t[t.length-1],zo=t=>{let e,n=!1;return(...r)=>(n||(n=!0,e=t.apply(null,r)),e)},Il=()=>mi(0,0),mi=(t,e)=>({major:t,minor:e}),ns={nu:mi,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Il():((r,o)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const u=i[c];if(u.test(l))return u}})(r,o);if(!s)return{major:0,minor:0};const a=i=>Number(o.replace(s,"$"+i));return mi(a(1),a(2))})(t,n)},unknown:Il},Fl=(t,e)=>{const n=String(e).toLowerCase();return Ue(t,r=>r.search(n))},jl=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,pi=(t,e)=>Qe(t,e)?t.substring(e.length):t,Fe=(t,e,n=0,r)=>{const o=t.indexOf(e,n);return-1!==o&&(!!Be(r)||o+e.length<=r)},Qe=(t,e)=>jl(t,e,0),_a=(t,e)=>jl(t,e,t.length-e.length),Ls=t=>e=>e.replace(t,""),Xr=Ls(/^\s+|\s+$/g),zl=Ls(/^\s+/g),Hl=Ls(/\s+$/g),zn=t=>t.length>0,rs=t=>!zn(t),Ps=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?N.none():N.some(n)},Aa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Mr=t=>e=>Fe(e,t),gi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Fe(t,"edge/")&&Fe(t,"chrome")&&Fe(t,"safari")&&Fe(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Aa],search:t=>Fe(t,"chrome")&&!Fe(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Fe(t,"msie")||Fe(t,"trident")},{name:"Opera",versionRegexes:[Aa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Mr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Mr("firefox")},{name:"Safari",versionRegexes:[Aa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Fe(t,"safari")||Fe(t,"mobile/"))&&Fe(t,"applewebkit")}],Gd=[{name:"Windows",search:Mr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Fe(t,"iphone")||Fe(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Mr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Mr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Mr("linux"),versionRegexes:[]},{name:"Solaris",search:Mr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Mr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Mr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ul={browsers:ft(gi),oses:ft(Gd)},bi="Chromium",vi="Firefox",Ho=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isEdge:r("Edge"),isChromium:r(bi),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(vi),isSafari:r("Safari")}},Ta=()=>Ho({current:void 0,version:ns.unknown()}),os=Ho,yi=(ft("Edge"),ft(bi),ft("IE"),ft("Opera"),ft(vi),ft("Safari"),"Windows"),ql="Android",Ci="Solaris",Ms="FreeBSD",xi="ChromeOS",lr=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isWindows:r(yi),isiOS:r("iOS"),isAndroid:r(ql),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(Ci),isFreeBSD:r(Ms),isChromeOS:r(xi)}},Wl=()=>lr({current:void 0,version:ns.unknown()}),Is=lr,Yd=(ft(yi),ft("iOS"),ft(ql),ft("Linux"),ft("macOS"),ft(Ci),ft(Ms),ft(xi),t=>window.matchMedia(t).matches);let Qd=zo(()=>((t,e,n)=>{const r=Ul.browsers(),o=Ul.oses(),s=e.bind(l=>{return c=r,jn(l.brands,f=>{const h=f.brand.toLowerCase();return Ue(c,b=>{var g;return h===(null===(g=b.brand)||void 0===g?void 0:g.toLowerCase())}).map(b=>({current:b.name,version:ns.nu(parseInt(f.version,10),0)}))});var c}).orThunk(()=>{return Fl(r,c=t).map(u=>{const f=ns.detect(u.versionRegexes,c);return{current:u.name,version:f}});var c}).fold(Ta,os),a=(l=o,c=t,Fl(l,c).map(u=>{const f=ns.detect(u.versionRegexes,c);return{current:u.name,version:f}})).fold(Wl,Is),i=((l,c,u,f)=>{const h=l.isiOS()&&!0===/ipad/i.test(u),b=l.isiOS()&&!h,g=l.isiOS()||l.isAndroid(),v=g||f("(pointer:coarse)"),p=h||!b&&g&&f("(min-device-width:768px)"),C=b||g&&!p,w=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(u),k=!C&&!p&&!w;return{isiPad:ft(h),isiPhone:ft(b),isTablet:ft(p),isPhone:ft(C),isTouch:ft(v),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ft(w),isDesktop:ft(k)}})(a,s,t,n);var l,c;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,N.from(navigator.userAgentData),Yd));const Hn=()=>Qd(),Uo=navigator.userAgent,Fs=Hn(),Ir=Fs.browser,Un=Fs.os,bo=Fs.deviceType,wi=-1!==Uo.indexOf("Windows Phone"),me={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ir.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ir.isIE(),windowsPhone:wi,browser:{current:Ir.current,version:Ir.version,isChromium:Ir.isChromium,isEdge:Ir.isEdge,isFirefox:Ir.isFirefox,isIE:Ir.isIE,isOpera:Ir.isOpera,isSafari:Ir.isSafari},os:{current:Un.current,version:Un.version,isAndroid:Un.isAndroid,isChromeOS:Un.isChromeOS,isFreeBSD:Un.isFreeBSD,isiOS:Un.isiOS,isLinux:Un.isLinux,isMacOS:Un.isMacOS,isSolaris:Un.isSolaris,isWindows:Un.isWindows},deviceType:{isDesktop:bo.isDesktop,isiPad:bo.isiPad,isiPhone:bo.isiPhone,isPhone:bo.isPhone,isTablet:bo.isTablet,isTouch:bo.isTouch,isWebView:bo.isWebView}},Vl=/^\s*|\s*$/g,Kl=t=>be(t)?"":(""+t).replace(Vl,""),Si=function(t,e,n,r){r=r||this,t&&(n&&(t=t[n]),Bs(t,(o,s)=>!1!==e.call(r,o,s,n)&&(Si(o,e,n,r),!0)))},ct={trim:Kl,isArray:fi,is:(t,e)=>e?!("array"!==e||!fi(t))||typeof t===e:void 0!==t,toArray:t=>{if(fi(t))return t;{const e=[];for(let n=0,r=t.length;n<r;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const r=Rt(t)?t.split(e||","):t||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:Bs,map:Ea,grep:Lr,inArray:(t,e)=>{if(t)for(let n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},hasOwn:ee,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(ee(r,o)){const s=r[o];void 0!==s&&(t[o]=s)}}return t},walk:Si,resolve:(t,e=window)=>{const n=t.split(".");for(let r=0,o=n.length;r<o&&(e=e[n[r]]);r++);return e},explode:(t,e)=>it(t)?t:""===t?[]:Ea(t.split(e||","),Kl),_addCacheSuffix:t=>{const e=me.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},ss=(t,e,n=fo)=>t.exists(r=>n(r,e)),ln=(t,e,n)=>t.isSome()&&e.isSome()?N.some(n(t.getOrDie(),e.getOrDie())):N.none(),js=(t,e)=>t?N.some(e):N.none(),Jd=typeof window<"u"?window:Function("return this;")(),Xl=(t,e)=>((n,r)=>{let o=r??Jd;for(let s=0;s<n.length&&null!=o;++s)o=o[n[s]];return o})(t.split("."),e),Zd=Object.getPrototypeOf,Ee=t=>t.dom.nodeName.toLowerCase(),ki=t=>t.dom.nodeType,as=t=>e=>ki(e)===t,Sn=as(1),Tn=as(3),Gl=as(9),Yl=as(11),zs=t=>e=>Sn(e)&&Ee(e)===t,Ql=(t,e,n)=>{if(!(Rt(n)||_n(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Le=(t,e,n)=>{Ql(t.dom,e,n)},Gr=(t,e)=>{const n=t.dom;we(e,(r,o)=>{Ql(n,o,r)})},qn=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},vr=(t,e)=>N.from(qn(t,e)),Da=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},nn=(t,e)=>{t.dom.removeAttribute(e)},Jl=t=>gn(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),d=(t,e)=>{const n=qn(t,e);return void 0===n||""===n?[]:n.split(" ")},m=t=>void 0!==t.dom.classList,y=t=>d(t,"class"),S=(t,e)=>((n,r,o)=>{const s=d(n,r).concat([o]);return Le(n,r,s.join(" ")),!0})(t,"class",e),E=(t,e)=>((n,r,o)=>{const s=qt(d(n,r),a=>a!==o);return s.length>0?Le(n,r,s.join(" ")):nn(n,r),!1})(t,"class",e),_=(t,e)=>{m(t)?t.dom.classList.add(e):S(t,e)},D=t=>{0===(m(t)?t.dom.classList:y(t)).length&&nn(t,"class")},z=(t,e)=>{m(t)?t.dom.classList.remove(e):E(t,e),D(t)},F=(t,e)=>m(t)&&t.dom.classList.contains(e),K=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Z=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,t),new Error(r)}return K(n.childNodes[0])},ot=(t,e)=>{const n=(e||document).createElement(t);return K(n)},Y=(t,e)=>{const n=(e||document).createTextNode(t);return K(n)},R=K,ce=(t,e)=>{const n=[],r=s=>(n.push(s),e(s));let o=e(t);do{o=o.bind(r)}while(o.isSome());return n},Qt=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},qe=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,ne=(t,e)=>t.dom===e.dom,cn=(t,e)=>{const n=t.dom,r=e.dom;return n!==r&&n.contains(r)},yr=t=>R(t.dom.ownerDocument),ue=t=>Gl(t)?t:yr(t),Cr=t=>R(ue(t).dom.defaultView),fe=t=>N.from(t.dom.parentNode).map(R),Pe=t=>N.from(t.dom.parentElement).map(R),is=(t,e)=>{const n=pe(e)?e:Ce;let r=t.dom;const o=[];for(;null!=r.parentNode;){const s=r.parentNode,a=R(s);if(o.push(a),!0===n(a))break;r=s}return o},Yr=t=>N.from(t.dom.previousSibling).map(R),$n=t=>N.from(t.dom.nextSibling).map(R),ls=t=>Vr(ce(t,Yr)),Fr=t=>ce(t,$n),Re=t=>oe(t.dom.childNodes,R),Qr=(t,e)=>N.from(t.dom.childNodes[e]).map(R),Wn=t=>Qr(t,0),Je=t=>Qr(t,t.dom.childNodes.length-1),Xe=t=>t.dom.childNodes.length,bn=t=>Yl(t)&&pt(t.dom.host),Jr=pe(Element.prototype.attachShadow)&&pe(Node.prototype.getRootNode),On=ft(Jr),Vt=Jr?t=>R(t.dom.getRootNode()):ue,je=t=>bn(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return R(n)})(ue(t)),Ge=t=>R(t.dom.host),Te=t=>{if(On()&&pt(t.target)){const e=R(t.target);if(Sn(e)&&jr(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return wn(n)}}return N.from(t.target)},jr=t=>pt(t.dom.shadowRoot),xr=t=>{const e=Tn(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(r=>{const o=Vt(r);return bn(o)?N.some(o):N.none()})(R(e)).fold(()=>n.body.contains(e),Os(xr,Ge))};var Hs=(t,e,n,r,o)=>t(n,r)?N.some(n):pe(o)&&o(n)?N.none():e(n,r,o);const Dn=(t,e,n)=>{let r=t.dom;const o=pe(n)?n:Ce;for(;r.parentNode;){r=r.parentNode;const s=R(r);if(e(s))return N.some(s);if(o(s))break}return N.none()},Zr=(t,e,n)=>Hs((r,o)=>o(r),Dn,t,e,n),cr=(t,e,n)=>Dn(t,r=>Qt(r,e),n),cs=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return qe(o)?N.none():N.from(o.querySelector(n)).map(R)})(e,t),zr=(t,e,n)=>Hs((r,o)=>Qt(r,o),cr,t,e,n),qo=(t,e=!1)=>{return xr(t)?t.dom.isContentEditable:(n=t,zr(n,"[contenteditable]")).fold(ft(e),r=>"true"===Ba(r));var n},Ba=t=>t.dom.contentEditable,$o=t=>void 0!==t.style&&pe(t.style.getPropertyValue),Us=(t,e,n)=>{if(!Rt(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);$o(t)&&t.style.setProperty(e,n)},La=(t,e,n)=>{Us(t.dom,e,n)},ds=(t,e)=>{const n=t.dom;we(e,(r,o)=>{Us(n,o,r)})},dr=(t,e)=>{const n=t.dom,r=window.getComputedStyle(n).getPropertyValue(e);return""!==r||xr(t)?r:Ei(n,e)},Ei=(t,e)=>$o(t)?t.style.getPropertyValue(e):"",B=(t,e)=>{const r=Ei(t.dom,e);return N.from(r).filter(o=>o.length>0)},V=t=>{const e={},n=t.dom;if($o(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);e[o]=n.style[o]}return e},tt=(t,e)=>{var n,r;r=e,$o(n=t.dom)&&n.style.removeProperty(r),ss(vr(t,"style").map(Xr),"")&&nn(t,"style")},nt=(t,e)=>{fe(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},lt=(t,e)=>{$n(t).fold(()=>{fe(t).each(n=>{Ct(n,e)})},n=>{nt(n,e)})},Pt=(t,e)=>{Wn(t).fold(()=>{Ct(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Ct=(t,e)=>{t.dom.appendChild(e.dom)},$t=(t,e)=>{nt(t,e),Ct(e,t)},Ot=(t,e)=>{st(e,n=>{Ct(t,n)})},ge=t=>{t.dom.textContent="",st(Re(t),e=>{Bt(e)})},Bt=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},se=t=>{const e=Re(t);var n,r;e.length>0&&(n=t,st(r=e,(o,s)=>{lt(0===s?n:r[s-1],o)})),Bt(t)},ve=t=>oe(t,R),le=t=>t.dom.innerHTML,$e=(t,e)=>{const n=yr(t).dom,r=R(n.createDocumentFragment()),o=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,Re(R(i))})(e,n);Ot(r,o),ge(t),Ct(t,r)},dn=(t,e,n,r)=>{t.dom.removeEventListener(e,n,r)},Bn=(t,e)=>({left:t,top:e,translate:(n,r)=>Bn(t+n,e+r)}),un=Bn,Vn=(t,e)=>void 0!==t?t:void 0!==e?e:0,_e=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?un(n.offsetLeft,n.offsetTop):xr(t)?(r=>{const o=r.getBoundingClientRect();return un(o.left,o.top)})(e):un(0,0)},to=t=>{const e=void 0!==t?t.dom:document;return un(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},ur=(t,e)=>{Hn().browser.isSafari()&&pe(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},qs=(t,e,n,r)=>({x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}),Ni=t=>{const e=void 0===t?window:t,r=to(R(e.document));return(o=>{const s=void 0===o?window:o;return Hn().browser.isFirefox()?N.none():N.from(s.visualViewport)})(e).fold(()=>{const o=e.document.documentElement;return qs(r.left,r.top,o.clientWidth,o.clientHeight)},o=>qs(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},_i=(t,e)=>{let n=[];return st(Re(t),r=>{e(r)&&(n=n.concat([r])),n=n.concat(_i(r,e))}),n},fn=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return qe(o)?[]:oe(o.querySelectorAll(n),R)})(e,t),Yp=(t,e,n)=>cr(t,e,n).isSome();class Ze{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,r,o){if(e){if(!o&&e[n])return e[n];if(e!==this.rootNode){let s=e[r];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[r],s)return s}}}findPreviousNode(e,n){if(e){const r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let s=r.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return r}const o=e.parentNode;if(o&&o!==this.rootNode)return o}}}const $s=t=>e=>!!e&&e.nodeType===t,Zl=t=>!!t&&!Object.getPrototypeOf(t),vt=$s(1),eu=t=>{const e=t.toLowerCase();return n=>pt(n)&&n.nodeName.toLowerCase()===e},eo=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return Tt(e,r)}return!1}},tc=(t,e)=>{const n=e.toLowerCase().split(" ");return r=>{if(vt(r)){const o=r.ownerDocument.defaultView;if(o)for(let s=0;s<n.length;s++){const a=o.getComputedStyle(r,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},Qp=t=>e=>vt(e)&&e.hasAttribute(t),Ws=t=>vt(t)&&t.hasAttribute("data-mce-bogus"),Wo=t=>vt(t)&&"TABLE"===t.tagName,Jp=t=>e=>!(!vt(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),nu=eo(["textarea","input"]),at=$s(3),sS=$s(4),aS=$s(7),us=$s(8),Ai=$s(9),ru=$s(11),ze=eu("br"),Zp=eu("img"),no=Jp("true"),Ne=Jp("false"),ec=eo(["td","th"]),iS=eo(["td","th","caption"]),vo=eo(["video","audio","object","embed"]),lS=eu("li"),mn="\xa0",tg=t=>"\ufeff"===t,ou=((t,e)=>{const n=r=>t(r)?N.from(r.dom.nodeValue):N.none();return{get:r=>{if(!t(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!t(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(Tn),nc=t=>ou.get(t),eg=t=>ou.getOption(t),cS=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),fs=t=>{let e;return n=>(e=e||xn(t,Ae),ee(e,Ee(n)))},wr=fs(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),rc=t=>Sn(t)&&!wr(t),Vs=t=>Sn(t)&&"br"===Ee(t),ng=fs(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),su=fs(["ul","ol","dl"]),Ti=fs(["li","dd","dt"]),dS=fs(["thead","tbody","tfoot"]),Oi=fs(["td","th"]),oc=fs(["pre","script","textarea","style"]),uS=fs(cS),fS=t=>uS(t)||rc(t),sc=()=>{const t=ot("br");return Le(t,"data-mce-bogus","1"),t},Ks=t=>{ge(t),Ct(t,sc())},mS=t=>{Je(t).each(e=>{Yr(e).each(n=>{wr(t)&&Vs(e)&&wr(n)&&Bt(e)})})},En="\ufeff",ac=tg,Vo=t=>t.replace(/\uFEFF/g,""),pS=vt,Pa=at,Ma=t=>(Pa(t)&&(t=t.parentNode),pS(t)&&t.hasAttribute("data-mce-caret")),ms=t=>Pa(t)&&ac(t.data),Sr=t=>Ma(t)||ms(t),rg=t=>t.firstChild!==t.lastChild||!ze(t.firstChild),au=t=>{const e=t.container();return!!at(e)&&(e.data.charAt(t.offset())===En||t.isAtStart()&&ms(e.previousSibling))},iu=t=>{const e=t.container();return!!at(e)&&(e.data.charAt(t.offset()-1)===En||t.isAtEnd()&&ms(e.nextSibling))},ic=t=>Pa(t)&&t.data[0]===En,lc=t=>Pa(t)&&t.data[t.data.length-1]===En,lu=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const r=e.getElementsByTagName("br"),o=r[r.length-1];Ws(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,og=t=>Ma(t.startContainer),sg=no,gS=Ne,hS=ze,bS=at,vS=eo(["script","style","textarea"]),ag=eo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),yS=eo(["table"]),CS=Sr,Hr=t=>!CS(t)&&(bS(t)?!vS(t.parentNode):ag(t)||hS(t)||yS(t)||cu(t)),cu=t=>{return!(vt(e=t)&&"true"===e.getAttribute("unselectable"))&&gS(t);var e},ig=(t,e)=>Hr(t)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(cu(o))return!1;if(sg(o))return!0}return!0})(t,e),xS=/^[ \t\r\n]*$/,Xs=t=>xS.test(t),lg=t=>"\n"===t||"\r"===t,cg=(t,e=4,n=!0,r=!0)=>{const o=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,o);var l;return gn(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===mn?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&r||(u=i.str.length+1)<(c=s).length&&u>=0&&lg(c[u])?{pcIsSpace:!1,str:i.str+mn}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:lg(l),str:i.str+l};var c,u},{pcIsSpace:!1,str:""}).str},cc=(t,e)=>{return Hr(t)&&(r=e,!(at(n=t)&&Xs(n.data)&&!((o,s)=>{const a=R(s),i=R(o);return Yp(i,"pre,code",yt(ne,a))})(n,r)))||(n=>vt(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||wS(t);var n,r},wS=Qp("data-mce-bookmark"),SS=Qp("data-mce-bogus"),kS=t=>vt(t)&&"all"===t.getAttribute("data-mce-bogus"),We=(t,e=!0)=>((n,r)=>{let o=0;if(cc(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const a=new Ze(s,n);do{if(r){if(kS(s)){s=a.next(!0);continue}if(SS(s)){s=a.next();continue}}if(ze(s))o++,s=a.next();else{if(cc(s,n))return!1;s=a.next()}}while(s);return o<=1}})(t.dom,e),Di="data-mce-block",du=t=>{return(e=t,qt(Ye(e),n=>!/[A-Z]/.test(n))).join(",");var e},dg=(t,e)=>pt(e.querySelector(t))?(e.setAttribute(Di,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(Di),!1),ug=(t,e)=>{const n=du(t.getTransparentElements()),r=du(t.getBlockElements());return qt(e.querySelectorAll(n),o=>dg(r,o))},fg=(t,e)=>{var n;const r=e?"lastChild":"firstChild";for(let o=t[r];o;o=o[r])if(We(R(o)))return void(null===(n=o.parentNode)||void 0===n||n.removeChild(o))},uu=(t,e)=>{const n=ug(t,e);var r,o,s;((t,e,n)=>{const r=t.getBlockElements(),o=R(e),s=i=>Ee(i)in r,a=i=>ne(i,o);st(ve(n),i=>{Dn(i,s,a).each(l=>{const c=qt(Re(i),h=>s(h)&&!t.isValidChild(Ee(l),Ee(h)));if(c.length>0){const u=Pe(l);st(c,f=>{Dn(f,s,a).each(h=>{((b,g)=>{const v=document.createRange(),p=b.parentNode;if(p){v.setStartBefore(b),v.setEndBefore(g);const C=v.extractContents();fg(C,!0),v.setStartAfter(g),v.setEndAfter(b);const w=v.extractContents();fg(w,!1),We(R(C))||p.insertBefore(C,b),We(R(g))||p.insertBefore(g,b),We(R(w))||p.insertBefore(w,b),p.removeChild(b)}})(h.dom,f.dom)})}),u.each(f=>ug(t,f.dom))}})})})(t,e,n),r=t,o=e,s=n,st([...s,...Gs(r,o)?[o]:[]],a=>st(fn(R(a),a.nodeName.toLowerCase()),i=>{_S(r,i.dom)&&se(i)}))},NS=(t,e)=>{if(mu(t,e)){const n=du(t.getBlockElements());dg(n,e)}},fu=t=>t.hasAttribute(Di),dc=(t,e)=>ee(t.getTransparentElements(),e),mu=(t,e)=>vt(e)&&dc(t,e.nodeName),Gs=(t,e)=>mu(t,e)&&fu(e),_S=(t,e)=>mu(t,e)&&!fu(e),mg=(t,e)=>1===e.type&&dc(t,e.name)&&Be(e.attr(Di)),AS=Hn().browser,pg=t=>Ue(t,Sn),gg=(t,e)=>t.children&&Tt(t.children,e),hg=(t,e={})=>{let n=0;const r={},o=R(t),s=ue(o),a=l=>new Promise((c,u)=>{let f;const h=ct._addCacheSuffix(l),b=Se(r,h).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));r[h]=b,b.count++;const g=(k,A)=>{st(k,Fn),b.status=A,b.passed=[],b.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},v=()=>g(b.passed,2),p=()=>g(b.failed,3);if(c&&b.passed.push(c),u&&b.failed.push(u),1===b.status)return;if(2===b.status)return void v();if(3===b.status)return void p();b.status=1;const C=ot("link",s.dom);var w;Gr(C,{rel:"stylesheet",type:"text/css",id:b.id}),e.contentCssCors&&Le(C,"crossOrigin","anonymous"),e.referrerPolicy&&Le(C,"referrerpolicy",e.referrerPolicy),f=C.dom,f.onload=v,f.onerror=p,w=C,Ct(je(o),w),Le(C,"href",h)}),i=l=>{const c=ct._addCacheSuffix(l);Se(r,c).each(u=>{0==--u.count&&(delete r[c],(f=>{const h=je(o);cs(h,"#"+f).each(Bt)})(u.id))})};return{load:a,loadAll:l=>Promise.allSettled(oe(l,c=>a(c).then(ft(c)))).then(c=>{const u=Wr(c,f=>"fulfilled"===f.status);return u.fail.length>0?Promise.reject(oe(u.fail,f=>f.reason)):oe(u.pass,f=>f.value)}),unload:i,unloadAll:l=>{st(l,c=>{i(c)})},_setReferrerPolicy:l=>{e.referrerPolicy=l},_setContentCssCors:l=>{e.contentCssCors=l}}},bg=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const r=Vt(e).dom;return N.from(t.get(r)).getOrThunk(()=>{const o=hg(r,n);return t.set(r,o),o})}}})(),vg=(t,e)=>pt(t)&&(cc(t,e)||rc(R(t))),yg=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),pu=(t,e,n)=>{var r;const o=n||e;if(vt(e)&&yg(e))return e;const s=e.childNodes;for(let a=s.length-1;a>=0;a--)pu(t,s[a],o);if(vt(e)){const a=e.childNodes;1===a.length&&yg(a[0])&&(null===(r=e.parentNode)||void 0===r||r.insertBefore(a[0],e))}return ru(a=e)||Ai(a)||cc(e,o)||(a=>!!vt(a)&&a.childNodes.length>0)(e)||((a,i)=>at(a)&&a.data.length>0&&((l,c)=>{const u=new Ze(l,c).prev(!1),f=new Ze(l,c).next(!1),h=Be(u)||vg(u,c),b=Be(f)||vg(f,c);return h&&b})(a,i))(e,o)||t.remove(e),e;var a},RS=ct.makeMap,uc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,TS=/[<>&\"\']/g,OS=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,DS={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Ys={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},BS={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Cg=(t,e)=>{const n={};if(t){const r=t.split(",");e=e||10;for(let o=0;o<r.length;o+=2){const s=String.fromCharCode(parseInt(r[o],e));if(!Ys[s]){const a="&"+r[o+1]+";";n[s]=a,n[a]=s}}return n}},gu=Cg("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),xg=(t,e)=>t.replace(e?uc:fc,n=>Ys[n]||n),wg=(t,e)=>t.replace(e?uc:fc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Ys[n]||"&#"+n.charCodeAt(0)+";"),hu=(t,e,n)=>{const r=n||gu;return t.replace(e?uc:fc,o=>Ys[o]||r[o]||o)},ps={encodeRaw:xg,encodeAllRaw:t=>(""+t).replace(TS,e=>Ys[e]||e),encodeNumeric:wg,encodeNamed:hu,getEncodeFunc:(t,e)=>{const n=Cg(e)||gu,r=RS(t.replace(/\+/g,","));return r.named&&r.numeric?(o,s)=>o.replace(s?uc:fc,a=>void 0!==Ys[a]?Ys[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):r.named?e?(o,s)=>hu(o,s,n):hu:r.numeric?wg:xg},decode:t=>t.replace(OS,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):DS[n]||String.fromCharCode(n):BS[e]||gu[e]||(r=>{const o=ot("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(e))},mc={},pc={},LS={},Ia=ct.makeMap,Nn=ct.each,bu=ct.extend,Sg=ct.explode,PS=ct.inArray,vn=(t,e)=>(t=ct.trim(t))?t.split(e||" "):[],kg=(t,e={})=>{const n=Ia(t," ",Ia(t.toUpperCase()," "));return bu(n,e)},Eg=t=>kg("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),vu=(t,e)=>{if(t){const n={};return Rt(t)&&(t={"*":t}),Nn(t,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===e?Ia(r,/[, ]/):Sg(r,/[, ]/)}),n}},gs=(t={})=>{var e;const n={},r={};let o=[];const s={},a={},i=(rt,dt,bt)=>{const Nt=t[rt];if(Nt)return Ia(Nt,/[, ]/,Ia(Nt.toUpperCase(),/[, ]/));{let Ft=pc[rt];return Ft||(Ft=kg(dt,bt),pc[rt]=Ft),Ft}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(rt=>{const dt={};let bt,Nt,Ft,zt;const ht=(Ve,Oe="",Qn="")=>{const Jn=vn(Qn),co=vn(Ve);let $r=co.length;for(;$r--;){const pn=vn([bt,Oe].join(" "));dt[co[$r]]={attributes:xn(pn,()=>({})),attributesOrder:pn,children:xn(Jn,ft(LS))}}},Yt=(Ve,Oe)=>{const Qn=vn(Ve),Jn=vn(Oe);let co=Qn.length;for(;co--;){const $r=dt[Qn[co]];for(let pn=0,rr=Jn.length;pn<rr;pn++)$r.attributes[Jn[pn]]={},$r.attributesOrder.push(Jn[pn])}};if(mc[rt])return mc[rt];if(bt="id accesskey class dir lang style tabindex title role",Nt="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",Ft="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==rt&&(bt+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",Nt+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",Ft+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==rt){bt+=" xml:lang";const Ve="acronym applet basefont big font strike tt";Ft=[Ft,Ve].join(" "),Nn(vn(Ve),Qn=>{ht(Qn,"",Ft)});const Oe="center dir isindex noframes";Nt=[Nt,Oe].join(" "),zt=[Nt,Ft].join(" "),Nn(vn(Oe),Qn=>{ht(Qn,"",zt)})}return zt=zt||[Nt,Ft].join(" "),ht("html","manifest","head body"),ht("head","","base command link meta noscript script style title"),ht("title hr noscript br"),ht("base","href target"),ht("link","href rel media hreflang type sizes hreflang"),ht("meta","name http-equiv content charset"),ht("style","media type scoped"),ht("script","src async defer type charset"),ht("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",zt),ht("address dt dd div caption","",zt),ht("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",Ft),ht("blockquote","cite",zt),ht("ol","reversed start type","li"),ht("ul","","li"),ht("li","value",zt),ht("dl","","dt dd"),ht("a","href target rel media hreflang type",zt),ht("q","cite",Ft),ht("ins del","cite datetime",zt),ht("img","src sizes srcset alt usemap ismap width height"),ht("iframe","src name width height",zt),ht("embed","src type width height"),ht("object","data type typemustmatch name usemap form width height",[zt,"param"].join(" ")),ht("param","name value"),ht("map","name",[zt,"area"].join(" ")),ht("area","alt coords shape href target rel media hreflang type"),ht("table","border","caption colgroup thead tfoot tbody tr"+("html4"===rt?" col":"")),ht("colgroup","span","col"),ht("col","span"),ht("tbody thead tfoot","","tr"),ht("tr","","td th"),ht("td","colspan rowspan headers",zt),ht("th","colspan rowspan headers scope abbr",zt),ht("form","accept-charset action autocomplete enctype method name novalidate target",zt),ht("fieldset","disabled form name",[zt,"legend"].join(" ")),ht("label","form for",Ft),ht("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ht("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===rt?zt:Ft),ht("select","disabled form multiple name required size","option optgroup"),ht("optgroup","disabled label","option"),ht("option","disabled label selected value"),ht("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ht("menu","type label",[zt,"li"].join(" ")),ht("noscript","",zt),"html4"!==rt&&(ht("wbr"),ht("ruby","",[Ft,"rt rp"].join(" ")),ht("figcaption","",zt),ht("mark rt rp summary bdi","",Ft),ht("canvas","width height",zt),ht("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[zt,"track source"].join(" ")),ht("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[zt,"track source"].join(" ")),ht("picture","","img source"),ht("source","src srcset type media sizes"),ht("track","kind src srclang label default"),ht("datalist","",[Ft,"option"].join(" ")),ht("article section nav aside main header footer","",zt),ht("hgroup","","h1 h2 h3 h4 h5 h6"),ht("figure","",[zt,"figcaption"].join(" ")),ht("time","datetime",Ft),ht("dialog","open",zt),ht("command","type label icon disabled checked radiogroup command"),ht("output","for form name",Ft),ht("progress","value max",Ft),ht("meter","value min max low high optimum",Ft),ht("details","open",[zt,"summary"].join(" ")),ht("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==rt&&(Yt("script","language xml:space"),Yt("style","xml:space"),Yt("object","declare classid code codebase codetype archive standby align border hspace vspace"),Yt("embed","align name hspace vspace"),Yt("param","valuetype type"),Yt("a","charset name rev shape coords"),Yt("br","clear"),Yt("applet","codebase archive code object alt name width height align hspace vspace"),Yt("img","name longdesc align border hspace vspace"),Yt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Yt("font basefont","size color face"),Yt("input","usemap align"),Yt("select"),Yt("textarea"),Yt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Yt("ul","type compact"),Yt("li","type"),Yt("ol dl menu dir","compact"),Yt("pre","width xml:space"),Yt("hr","align noshade size width"),Yt("isindex","prompt"),Yt("table","summary width frame rules cellspacing cellpadding align bgcolor"),Yt("col","width align char charoff valign"),Yt("colgroup","width align char charoff valign"),Yt("thead","align char charoff valign"),Yt("tr","align char charoff valign bgcolor"),Yt("th","axis align char charoff valign nowrap bgcolor width height"),Yt("form","accept"),Yt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Yt("tfoot","align char charoff valign"),Yt("tbody","align char charoff valign"),Yt("area","nohref"),Yt("body","background bgcolor text link vlink alink")),"html4"!==rt&&(Yt("input button select textarea","autofocus"),Yt("input textarea","placeholder"),Yt("a","download"),Yt("link script img","crossorigin"),Yt("img","loading"),Yt("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==rt&&st([dt.video,dt.audio],Ve=>{delete Ve.children.audio,delete Ve.children.video}),Nn(vn("a form meter progress dfn"),Ve=>{dt[Ve]&&delete dt[Ve].children[Ve]}),delete dt.caption.children.table,delete dt.script,mc[rt]=dt,dt})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const u=vu(t.valid_styles),f=vu(t.invalid_styles,"map"),h=vu(t.valid_classes,"map"),b=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),C="td th iframe video audio object script code",w=i("non_empty_elements",C+" pre",v),k=i("move_caret_before_on_enter_elements",C+" table",v),A=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),O=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",A),T=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),P=i("transparent_elements","a ins del canvas map");Nn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),rt=>{a[rt]=new RegExp("</"+rt+"[^>]*>","gi")});const L=rt=>new RegExp("^"+rt.replace(/([?+*])/g,".$1")+"$"),M=rt=>{const dt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,bt=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Nt=/[*?+]/;if(rt){const Ft=vn(rt,",");let zt,ht;n["@"]&&(zt=n["@"].attributes,ht=n["@"].attributesOrder);for(let Yt=0,Ve=Ft.length;Yt<Ve;Yt++){let Oe=dt.exec(Ft[Yt]);if(Oe){const Qn=Oe[1],Jn=Oe[2],co=Oe[3],$r=Oe[5],pn={},rr=[],Me={attributes:pn,attributesOrder:rr};if("#"===Qn&&(Me.paddEmpty=!0),"-"===Qn&&(Me.removeEmpty=!0),"!"===Oe[4]&&(Me.removeEmptyAttrs=!0),zt&&(we(zt,(Oo,Rs)=>{pn[Rs]=Oo}),ht&&rr.push(...ht)),$r){const Oo=vn($r,"|");for(let Rs=0,Vd=Oo.length;Rs<Vd;Rs++)if(Oe=bt.exec(Oo[Rs]),Oe){const Do={},Dl=Oe[1],mr=Oe[2].replace(/[\\:]:/g,":"),Ts=Oe[3],pr=Oe[4];if("!"===Dl&&(Me.attributesRequired=Me.attributesRequired||[],Me.attributesRequired.push(mr),Do.required=!0),"-"===Dl){delete pn[mr],rr.splice(PS(rr,mr),1);continue}if(Ts&&("="===Ts&&(Me.attributesDefault=Me.attributesDefault||[],Me.attributesDefault.push({name:mr,value:pr}),Do.defaultValue=pr),"~"===Ts&&(Me.attributesForced=Me.attributesForced||[],Me.attributesForced.push({name:mr,value:pr}),Do.forcedValue=pr),"<"===Ts&&(Do.validValues=Ia(pr,"?"))),Nt.test(mr)){const xa=Do;Me.attributePatterns=Me.attributePatterns||[],xa.pattern=L(mr),Me.attributePatterns.push(xa)}else pn[mr]||rr.push(mr),pn[mr]=Do}}if(zt||"@"!==Jn||(zt=pn,ht=rr),co&&(Me.outputName=Jn,n[co]=Me),Nt.test(Jn)){const Oo=Me;Oo.pattern=L(Jn),o.push(Oo)}else n[Jn]=Me}}}},$=rt=>{o=[],st(Ye(n),dt=>{delete n[dt]}),M(rt),Nn(c,(dt,bt)=>{r[bt]=dt.children})},U=rt=>{const dt=/^(~)?(.+)$/;rt&&(delete pc.text_block_elements,delete pc.block_elements,Nn(vn(rt,","),bt=>{const Nt=dt.exec(bt);if(Nt){const Ft="~"===Nt[1],zt=Ft?"span":"div",ht=Nt[2];if(r[ht]=r[zt],s[ht]=zt,w[ht.toUpperCase()]={},w[ht]={},Ft||(O[ht.toUpperCase()]={},O[ht]={}),!n[ht]){let Yt=n[zt];Yt=bu({},Yt),delete Yt.removeEmptyAttrs,delete Yt.removeEmpty,n[ht]=Yt}Nn(r,(Yt,Ve)=>{Yt[zt]&&(r[Ve]=Yt=bu({},r[Ve]),Yt[ht]=Yt[zt])})}}))},W=rt=>{const dt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete mc[l],rt&&Nn(vn(rt,","),bt=>{const Nt=dt.exec(bt);if(Nt){const Ft=Nt[1];let zt;zt=Ft?r[Nt[2]]:r[Nt[2]]={"#comment":{}},zt=r[Nt[2]],Nn(vn(Nt[3],"|"),ht=>{"-"===Ft?delete zt[ht]:zt[ht]={}})}})},H=rt=>{const dt=n[rt];if(dt)return dt;let bt=o.length;for(;bt--;){const Nt=o[bt];if(Nt.pattern.test(rt))return Nt}};t.valid_elements?$(t.valid_elements):(Nn(c,(rt,dt)=>{n[dt]={attributes:rt.attributes,attributesOrder:rt.attributesOrder},r[dt]=rt.children}),Nn(vn("strong/b em/i"),rt=>{const dt=vn(rt,"/");n[dt[1]].outputName=dt[0]}),Nn(T,(rt,dt)=>{n[dt]&&(t.padd_empty_block_inline_children&&(n[dt].paddInEmptyBlock=!0),n[dt].removeEmpty=!0)}),Nn(vn("ol ul blockquote a table tbody"),rt=>{n[rt]&&(n[rt].removeEmpty=!0)}),Nn(vn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),rt=>{n[rt].paddEmpty=!0}),Nn(vn("span"),rt=>{n[rt].removeEmptyAttrs=!0})),U(t.custom_elements),W(t.valid_children),M(t.extended_valid_elements),W("+ol[ul|ol],+ul[ul|ol]"),Nn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(rt,dt)=>{n[dt]&&(n[dt].parentsRequired=vn(rt))}),t.invalid_elements&&Nn(Sg(t.invalid_elements),rt=>{n[rt]&&delete n[rt]}),H("span")||M("span[!data-mce-type|*]");const J=ft(u),ut=ft(f),mt=ft(h),_t=ft(p),Lt=ft(O),ae=ft(A),ye=ft(T),kt=ft(Object.seal(v)),Xt=ft(g),Gt=ft(w),I=ft(k),j=ft(b),G=ft(P),et=ft(Object.seal(a)),Q=ft(s);return{type:l,children:r,elements:n,getValidStyles:J,getValidClasses:mt,getBlockElements:Lt,getInvalidStyles:ut,getVoidElements:kt,getTextBlockElements:ae,getTextInlineElements:ye,getBoolAttrs:_t,getElementRule:H,getSelfClosingElements:Xt,getNonEmptyElements:Gt,getMoveCaretBeforeOnEnterElements:I,getWhitespaceElements:j,getTransparentElements:G,getSpecialElements:et,isValidChild:(rt,dt)=>{const bt=r[rt.toLowerCase()];return!(!bt||!bt[dt.toLowerCase()])},isValid:(rt,dt)=>{const bt=H(rt);if(bt){if(!dt)return!0;{if(bt.attributes[dt])return!0;const Nt=bt.attributePatterns;if(Nt){let Ft=Nt.length;for(;Ft--;)if(Nt[Ft].pattern.test(dt))return!0}}}return!1},getCustomElements:Q,addValidElements:M,setValidElements:$,addCustomElements:U,addValidChildren:W}},yu=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const l="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let u=0;u<l.length;u++)s[l[u]]="\ufeff"+u,s["\ufeff"+u]=l[u];const c={parse:u=>{const f={};let h=!1;const b=t.url_converter,g=t.url_converter_scope||c,v=(M,$,U)=>{const W=f[M+"-top"+$];if(!W)return;const H=f[M+"-right"+$];if(!H)return;const J=f[M+"-bottom"+$];if(!J)return;const ut=f[M+"-left"+$];if(!ut)return;const mt=[W,H,J,ut];let _t=mt.length-1;for(;_t--&&mt[_t]===mt[_t+1];);_t>-1&&U||(f[M+$]=-1===_t?mt[0]:mt.join(" "),delete f[M+"-top"+$],delete f[M+"-right"+$],delete f[M+"-bottom"+$],delete f[M+"-left"+$])},p=M=>{const $=f[M];if(!$)return;const U=$.split(" ");let W=U.length;for(;W--;)if(U[W]!==U[0])return!1;return f[M]=U[0],!0},C=M=>(h=!0,s[M]),w=(M,$)=>(h&&(M=M.replace(/\uFEFF[0-9]/g,U=>s[U])),$||(M=M.replace(/\\([\'\";:])/g,"$1")),M),k=M=>String.fromCharCode(parseInt(M.slice(1),16)),A=M=>M.replace(/\\[0-9a-f]+/gi,k),O=(M,$,U,W,H,J)=>{if(H=H||J)return"'"+(H=w(H)).replace(/\'/g,"\\'")+"'";if($=w($||U||W||""),!t.allow_script_urls){const ut=$.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(ut)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(ut))return""}return b&&($=b.call(g,$,"style")),"url('"+$.replace(/\'/g,"\\'")+"')"};if(u){let M;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,C).replace(/\"[^\"]+\"|\'[^\']+\'/g,$=>$.replace(/[;:]/g,C));M=r.exec(u);){r.lastIndex=M.index+M[0].length;let $=M[1].replace(o,"").toLowerCase(),U=M[2].replace(o,"");if($&&U){if($=A($),U=A(U),-1!==$.indexOf("\ufeff")||-1!==$.indexOf('"')||!t.allow_script_urls&&("behavior"===$||/expression\s*\(|\/\*|\*\//.test(U)))continue;"font-weight"===$&&"700"===U?U="bold":"color"!==$&&"background-color"!==$||(U=U.toLowerCase()),U=U.replace(n,O),f[$]=h?w(U,!0):U}}v("border","",!0),v("border","-width"),v("border","-color"),v("border","-style"),v("padding",""),v("margin",""),P="border-style",L="border-color",p(T="border-width")&&p(P)&&p(L)&&(f.border=f[T]+" "+f[P]+" "+f[L],delete f[T],delete f[P],delete f[L]),"medium none"===f.border&&delete f.border,"none"===f["border-image"]&&delete f["border-image"]}var T,P,L;return f},serialize:(u,f)=>{let h="";const b=(g,v)=>{const p=v[g];if(p)for(let C=0,w=p.length;C<w;C++){const k=p[C],A=u[k];A&&(h+=(h.length>0?" ":"")+k+": "+A+";")}};return f&&a?(b("*",a),b(f,a)):we(u,(g,v)=>{g&&((p,C)=>{if(!i||!C)return!0;let w=i["*"];return!(w&&w[p]||(w=i[C],w&&w[p]))})(v,f)&&(h+=(h.length>0?" ":"")+v+": "+g+";")}),h}};return c},MS={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Ng=(t,e)=>{const n=e??{};for(const r in t)ee(MS,r)||(n[r]=t[r]);return pt(t.composedPath)&&(n.composedPath=()=>t.composedPath()),n},Cu=(t,e,n,r)=>{var o;const s=Ng(e,r);return s.type=t,be(s.target)&&(s.target=null!==(o=s.srcElement)&&void 0!==o?o:n),(be((a=e).preventDefault)||(i=a)instanceof Event||pe(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Ae,pe(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Ae,pe(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Ae,s.stopPropagation()},(a=>a.isDefaultPrevented===Ae||a.isDefaultPrevented===Ce)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Ae:Ce,s.isPropagationStopped=!0===s.cancelBubble?Ae:Ce,s.isImmediatePropagationStopped=Ce)),s;var a,i},IS=/^(?:mouse|contextmenu)|click/,xu=(t,e,n,r)=>{t.addEventListener(e,n,r||!1)},gc=(t,e,n,r)=>{t.removeEventListener(e,n,r||!1)},Bi=(t,e)=>{const n=Cu(t.type,t,document,e);if(pt(r=t)&&IS.test(r.type)&&Be(t.pageX)&&!Be(t.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,s=r.body,a=n;a.pageX=t.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}var r;return n},FS=(t,e,n)=>{const r=t.document,o={type:"ready"};if(n.domLoaded)return void e(o);const s=()=>{gc(t,"DOMContentLoaded",s),gc(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(o)),t=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?s():xu(t,"DOMContentLoaded",s),n.domLoaded||xu(t,"load",s)};class Qs{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,r,o){const s=this;let a;const i=window,l=h=>{s.executeHandlers(Bi(h||i.event),c)};if(!e||at(e)||us(e))return r;let c;e[s.expando]?c=e[s.expando]:(c=s.count++,e[s.expando]=c,s.events[c]={}),o=o||e;const u=n.split(" ");let f=u.length;for(;f--;){let h=u[f],b=l,g=!1,v=!1;"DOMContentLoaded"===h&&(h="ready"),s.domLoaded&&"ready"===h&&"complete"===e.readyState?r.call(o,Bi({type:h})):(s.hasFocusIn||"focusin"!==h&&"focusout"!==h||(g=!0,v="focusin"===h?"focus":"blur",b=p=>{const C=Bi(p||i.event);C.type="focus"===C.type?"focusin":"focusout",s.executeHandlers(C,c)}),a=s.events[c][h],a?"ready"===h&&s.domLoaded?r(Bi({type:h})):a.push({func:r,scope:o}):(s.events[c][h]=a=[{func:r,scope:o}],a.fakeName=v,a.capture=g,a.nativeHandler=b,"ready"===h?FS(e,b,s):xu(e,v||h,b,g)))}return e=a=null,r}unbind(e,n,r){if(!e||at(e)||us(e))return this;const o=e[this.expando];if(o){let s=this.events[o];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(r){let u=c.length;for(;u--;)if(c[u].func===r){const f=c.nativeHandler,h=c.fakeName,b=c.capture,g=c.slice(0,u).concat(c.slice(u+1));g.nativeHandler=f,g.fakeName=h,g.capture=b,s[l]=g}}r&&0!==c.length||(delete s[l],gc(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else we(s,(a,i)=>{gc(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(ee(s,a))return this;delete this.events[o];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,r){return this.dispatch(e,n,r)}dispatch(e,n,r){if(!e||at(e)||us(e))return this;const o=Bi({type:n,target:e},r);do{const s=e[this.expando];s&&this.executeHandlers(o,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}clean(e){if(!e||at(e)||us(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let r=n.length;for(;r--;)(e=n[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const r=this.events[n],o=r&&r[e.type];if(o)for(let s=0,a=o.length;s<a;s++){const i=o[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Qs.Event=new Qs;const wu=ct.each,jS=ct.grep,Su="data-mce-style",zS=ct.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Li=(t,e,n)=>{be(n)||""===n?nn(t,e):Le(t,e,n)},_g=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Fa=(t,e)=>{let n=0;if(t)for(let r=t.nodeType,o=t.previousSibling;o;o=o.previousSibling){const s=o.nodeType;(!e||!at(o)||s!==r&&o.data.length)&&(n++,r=s)}return n},Ag=(t,e)=>{const n=qn(e,"style"),r=t.serialize(t.parse(n),Ee(e));Li(e,Su,r)},Rg=(t,e,n)=>{const r=_g(e);var o,s;be(n)||""===n?tt(t,r):La(t,r,(s=r,x(o=n)?ee(zS,s)?o+"":o+"px":o))},xe=(t,e={})=>{const n={},r=window,o={};let s=0;const a=bg.forElement(R(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:gs({}),c=yu({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),u=e.ownEvents?new Qs:Qs.Event,f=l.getBlockElements(),h=I=>I&&t&&Rt(I)?t.getElementById(I):I,b=I=>{const j=h(I);return pt(j)?R(j):null},g=(I,j,G="")=>{let et;const Q=b(I);if(pt(Q)&&Sn(Q)){const rt=Gt[j];et=rt&&rt.get?rt.get(Q.dom,j):qn(Q,j)}return pt(et)?et:G},v=I=>{const j=h(I);return be(j)?[]:j.attributes},p=(I,j,G)=>{L(I,et=>{if(vt(et)){const Q=R(et),rt=""===G?null:G,dt=qn(Q,j),bt=Gt[j];bt&&bt.set?bt.set(Q.dom,rt,j):Li(Q,j,rt),dt!==rt&&e.onSetAttrib&&e.onSetAttrib({attrElm:Q.dom,attrName:j,attrValue:rt})}})},C=()=>e.root_element||t.body,w=(I,j)=>((G,et,Q)=>{let rt=0,dt=0;const bt=G.ownerDocument;if(Q=Q||G,et){if(Q===G&&et.getBoundingClientRect&&"static"===dr(R(G),"position")){const Ft=et.getBoundingClientRect();return rt=Ft.left+(bt.documentElement.scrollLeft||G.scrollLeft)-bt.documentElement.clientLeft,dt=Ft.top+(bt.documentElement.scrollTop||G.scrollTop)-bt.documentElement.clientTop,{x:rt,y:dt}}let Nt=et;for(;Nt&&Nt!==Q&&Nt.nodeType&&!gg(Nt,Q);)rt+=Nt.offsetLeft||0,dt+=Nt.offsetTop||0,Nt=Nt.offsetParent;for(Nt=et.parentNode;Nt&&Nt!==Q&&Nt.nodeType&&!gg(Nt,Q);)rt-=Nt.scrollLeft||0,dt-=Nt.scrollTop||0,Nt=Nt.parentNode;dt+=(Ft=R(et),AS.isFirefox()&&"table"===Ee(Ft)?pg(Re(Ft)).filter(zt=>"caption"===Ee(zt)).bind(zt=>pg(Fr(zt)).map(ht=>ht.dom.offsetTop<=zt.dom.offsetTop?-zt.dom.offsetHeight:0)).getOr(0):0)}var Ft;return{x:rt,y:dt}})(t.body,h(I),j),k=(I,j,G)=>{const et=h(I);if(!be(et)&&vt(et))return G?dr(R(et),_g(j)):("float"===(j=j.replace(/-(\D)/g,(Q,rt)=>rt.toUpperCase()))&&(j="cssFloat"),et.style?et.style[j]:void 0)},A=I=>{const j=h(I);if(!j)return{w:0,h:0};let G=k(j,"width"),et=k(j,"height");return G&&-1!==G.indexOf("px")||(G="0"),et&&-1!==et.indexOf("px")||(et="0"),{w:parseInt(G,10)||j.offsetWidth||j.clientWidth,h:parseInt(et,10)||j.offsetHeight||j.clientHeight}},O=(I,j)=>{if(!I)return!1;const G=it(I)?I:[I];return ke(G,et=>Qt(R(et),j))},T=(I,j,G,et)=>{const Q=[];let rt=h(I);et=void 0===et;const dt=G||("BODY"!==C().nodeName?C().parentNode:null);if(Rt(j))if("*"===j)j=vt;else{const bt=j;j=Nt=>O(Nt,bt)}for(;rt&&!(rt===dt||be(rt.nodeType)||Ai(rt)||ru(rt));){if(!j||j(rt)){if(!et)return[rt];Q.push(rt)}rt=rt.parentNode}return et?Q:null},P=(I,j,G)=>{let et=j;if(I){Rt(j)&&(et=Q=>O(Q,j));for(let Q=I[G];Q;Q=Q[G])if(pe(et)&&et(Q))return Q}return null},L=function(I,j,G){const et=G??this;if(it(I)){const Q=[];return wu(I,(rt,dt)=>{const bt=h(rt);bt&&Q.push(j.call(et,bt,dt))}),Q}{const Q=h(I);return!!Q&&j.call(et,Q)}},M=(I,j)=>{L(I,G=>{we(j,(et,Q)=>{p(G,Q,et)})})},$=(I,j)=>{L(I,G=>{const et=R(G);$e(et,j)})},U=(I,j,G,et,Q)=>L(I,rt=>{const dt=Rt(j)?t.createElement(j):j;return pt(G)&&M(dt,G),et&&(!Rt(et)&&et.nodeType?dt.appendChild(et):Rt(et)&&$(dt,et)),Q?dt:rt.appendChild(dt)}),W=(I,j,G)=>U(t.createElement(I),I,j,G,!0),H=ps.encodeAllRaw,J=(I,j)=>L(I,G=>{const et=R(G);return j&&st(Re(et),Q=>{Tn(Q)&&0===Q.dom.length?Bt(Q):nt(et,Q)}),Bt(et),et.dom}),ut=(I,j,G)=>{L(I,et=>{if(vt(et)){const Q=R(et),rt=j.split(" ");st(rt,dt=>{var bt,Nt,zt,ht;pt(G)?(G?_:z)(Q,dt):(Nt=dt,m(bt=Q)?bt.dom.classList.toggle(Nt):(ht=Nt,Tt(y(zt=bt),ht)?E(zt,ht):S(zt,ht)),D(bt))})}})},mt=(I,j,G)=>L(j,et=>{var Q;const rt=it(j)?I.cloneNode(!0):I;return G&&wu(jS(et.childNodes),dt=>{rt.appendChild(dt)}),null===(Q=et.parentNode)||void 0===Q||Q.replaceChild(rt,et),et}),_t=I=>{if(vt(I)){const j="a"===I.nodeName.toLowerCase()&&!g(I,"href")&&g(I,"id");if(g(I,"name")||g(I,"data-mce-bookmark")||j)return!0}return!1},Lt=()=>t.createRange(),ae=(I,j,G,et)=>{if(it(I)){let Q=I.length;const rt=[];for(;Q--;)rt[Q]=ae(I[Q],j,G,et);return rt}return!e.collect||I!==t&&I!==r||i.push([I,j,G,et]),u.bind(I,j,G,et||Xt)},ye=(I,j,G)=>{if(it(I)){let et=I.length;const Q=[];for(;et--;)Q[et]=ye(I[et],j,G);return Q}if(i.length>0&&(I===t||I===r)){let et=i.length;for(;et--;){const[Q,rt,dt]=i[et];I!==Q||j&&j!==rt||G&&G!==dt||u.unbind(Q,rt,dt)}}return u.unbind(I,j,G)},kt=I=>{if(I&&vt(I)){const j=I.getAttribute("data-mce-contenteditable");return j&&"inherit"!==j?j:"inherit"!==I.contentEditable?I.contentEditable:null}return null},Xt={doc:t,settings:e,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:u,isBlock:I=>Rt(I)?ee(f,I):vt(I)&&(ee(f,I.nodeName)||Gs(l,I)),root:null,clone:(I,j)=>I.cloneNode(j),getRoot:C,getViewPort:I=>{const j=Ni(I);return{x:j.x,y:j.y,w:j.width,h:j.height}},getRect:I=>{const j=h(I),G=w(j),et=A(j);return{x:G.x,y:G.y,w:et.w,h:et.h}},getSize:A,getParent:(I,j,G)=>{const et=T(I,j,G,!1);return et&&et.length>0?et[0]:null},getParents:T,get:h,getNext:(I,j)=>P(I,j,"nextSibling"),getPrev:(I,j)=>P(I,j,"previousSibling"),select:(I,j)=>{var G,et;const Q=null!==(et=null!==(G=h(j))&&void 0!==G?G:e.root_element)&&void 0!==et?et:t;return pe(Q.querySelectorAll)?an(Q.querySelectorAll(I)):[]},is:O,add:U,create:W,createHTML:(I,j,G="")=>{let et="<"+I;for(const Q in j)hn(j,Q)&&(et+=" "+Q+'="'+H(j[Q])+'"');return rs(G)&&ee(l.getVoidElements(),I)?et+" />":et+">"+G+"</"+I+">"},createFragment:I=>{const j=t.createElement("div"),G=t.createDocumentFragment();let et;for(G.appendChild(j),I&&(j.innerHTML=I);et=j.firstChild;)G.appendChild(et);return G.removeChild(j),G},remove:J,setStyle:(I,j,G)=>{L(I,et=>{const Q=R(et);Rg(Q,j,G),e.update_styles&&Ag(c,Q)})},getStyle:k,setStyles:(I,j)=>{L(I,G=>{const et=R(G);we(j,(Q,rt)=>{Rg(et,rt,Q)}),e.update_styles&&Ag(c,et)})},removeAllAttribs:I=>L(I,j=>{const G=j.attributes;for(let et=G.length-1;et>=0;et--)j.removeAttributeNode(G.item(et))}),setAttrib:p,setAttribs:M,getAttrib:g,getPos:w,parseStyle:I=>c.parse(I),serializeStyle:(I,j)=>c.serialize(I,j),addStyle:I=>{if(Xt!==xe.DOM&&t===document){if(n[I])return;n[I]=!0}let j=t.getElementById("mceDefaultStyles");if(!j){j=t.createElement("style"),j.id="mceDefaultStyles",j.type="text/css";const G=t.head;G.firstChild?G.insertBefore(j,G.firstChild):G.appendChild(j)}j.styleSheet?j.styleSheet.cssText+=I:j.appendChild(t.createTextNode(I))},loadCSS:I=>{I||(I=""),st(I.split(","),j=>{o[j]=!0,a.load(j).catch(Et)})},addClass:(I,j)=>{ut(I,j,!0)},removeClass:(I,j)=>{ut(I,j,!1)},hasClass:(I,j)=>{const G=b(I),et=j.split(" ");return pt(G)&&ar(et,Q=>F(G,Q))},toggleClass:ut,show:I=>{L(I,j=>tt(R(j),"display"))},hide:I=>{L(I,j=>La(R(j),"display","none"))},isHidden:I=>{const j=b(I);return pt(j)&&ss(B(j,"display"),"none")},uniqueId:I=>(I||"mce_")+s++,setHTML:$,getOuterHTML:I=>{const j=b(I);return pt(j)?vt(j.dom)?j.dom.outerHTML:(G=>{const et=ot("div"),Q=R(G.dom.cloneNode(!0));return Ct(et,Q),le(et)})(j):""},setOuterHTML:(I,j)=>{L(I,G=>{vt(G)&&(G.outerHTML=j)})},decode:ps.decode,encode:H,insertAfter:(I,j)=>{const G=h(j);return L(I,et=>{const Q=G?.parentNode,rt=G?.nextSibling;return Q&&(rt?Q.insertBefore(et,rt):Q.appendChild(et)),et})},replace:mt,rename:(I,j)=>{if(I.nodeName!==j.toUpperCase()){const G=W(j);return wu(v(I),et=>{p(G,et.nodeName,g(I,et.nodeName))}),mt(G,I,!0),G}return I},findCommonAncestor:(I,j)=>{let G=I;for(;G;){let et=j;for(;et&&G!==et;)et=et.parentNode;if(G===et)break;G=G.parentNode}return!G&&I.ownerDocument?I.ownerDocument.documentElement:G},run:L,getAttribs:v,isEmpty:(I,j)=>{let G=0;if(_t(I))return!1;const et=I.firstChild;if(et){const Q=new Ze(et,I),rt=l?l.getWhitespaceElements():{},dt=j||(l?l.getNonEmptyElements():null);let bt=et;do{if(vt(bt)){const Nt=bt.getAttribute("data-mce-bogus");if(Nt){bt=Q.next("all"===Nt);continue}const Ft=bt.nodeName.toLowerCase();if(dt&&dt[Ft]){if("br"===Ft){G++,bt=Q.next();continue}return!1}if(_t(bt))return!1}if(us(bt)||at(bt)&&!Xs(bt.data)||at(bt)&&bt.parentNode&&rt[bt.parentNode.nodeName]&&Xs(bt.data))return!1;bt=Q.next()}while(bt)}return G<=1},createRng:Lt,nodeIndex:Fa,split:(I,j,G)=>{let et,Q,rt=Lt();if(I&&j&&I.parentNode&&j.parentNode){const dt=I.parentNode;return rt.setStart(dt,Fa(I)),rt.setEnd(j.parentNode,Fa(j)),et=rt.extractContents(),rt=Lt(),rt.setStart(j.parentNode,Fa(j)+1),rt.setEnd(dt,Fa(I)+1),Q=rt.extractContents(),dt.insertBefore(pu(Xt,et),I),dt.insertBefore(G||j,I),dt.insertBefore(pu(Xt,Q),I),J(I),G||j}},bind:ae,unbind:ye,fire:(I,j,G)=>u.dispatch(I,j,G),dispatch:(I,j,G)=>u.dispatch(I,j,G),getContentEditable:kt,getContentEditableParent:I=>{const j=C();let G=null;for(let et=I;et&&et!==j&&(G=kt(et),null===G);et=et.parentNode);return G},isEditable:I=>{if(pt(I)){const j=vt(I)?I:I.parentElement,G="true"===kt(C());return pt(j)&&qo(R(j),G)}return!1},destroy:()=>{if(i.length>0){let I=i.length;for(;I--;){const[j,G,et]=i[I];u.unbind(j,G,et)}}we(o,(I,j)=>{a.unload(j),delete o[j]})},isChildOf:(I,j)=>I===j||j.contains(I),dumpRng:I=>"startContainer: "+I.startContainer.nodeName+", startOffset: "+I.startOffset+", endContainer: "+I.endContainer.nodeName+", endOffset: "+I.endOffset},Gt=((I,j,G)=>{const et=j.keep_values,rt={style:{set:(dt,bt)=>{const Nt=R(dt);et&&Li(Nt,Su,bt),nn(Nt,"style"),Rt(bt)&&ds(Nt,I.parse(bt))},get:dt=>{const bt=R(dt),Nt=qn(bt,Su)||qn(bt,"style");return I.serialize(I.parse(Nt),Ee(bt))}}};return et&&(rt.href=rt.src={set:(dt,bt,Nt)=>{const Ft=R(dt);pe(j.url_converter)&&pt(bt)&&(bt=j.url_converter.call(j.url_converter_scope||G(),String(bt),Nt,dt)),Li(Ft,"data-mce-"+Nt,bt),Li(Ft,Nt,bt)},get:(dt,bt)=>{const Nt=R(dt);return qn(Nt,"data-mce-"+bt)||qn(Nt,bt)}}),rt})(c,e,ft(Xt));return Xt};xe.DOM=xe(document),xe.nodeIndex=Fa;const HS=xe.DOM;class Ko{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,r)=>{const o=HS;let s;const a=()=>{o.remove(i),s&&(s.onerror=s.onload=s=null)},i=o.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=ct._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:r,reject:o})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(l,c)=>{Se(n.scriptLoadedCallbacks,c).each(u=>{st(u,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},o=l=>{const c=qt(l,u=>"rejected"===u.status);return c.length>0?Promise.reject(en(c,({reason:u})=>it(u)?u:[u])):Promise.resolve()},s=l=>Promise.allSettled(oe(l,c=>2===n.states[c]?(r("resolve",c),Promise.resolve()):3===n.states[c]?(r("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,r("resolve",c);const u=n.queue;return u.length>0?(n.queue=[],s(u).then(o)):Promise.resolve()},()=>(n.states[c]=3,r("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return N.from(u).each(Fn),o(c)})),i=Rn(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>a(i).then(l,c))}):a(i)}}Ko.ScriptLoader=new Ko;const rn=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},Pi={},ku=rn("en"),Tg=()=>Se(Pi,ku.get()),ro={getData:()=>Io(Pi,t=>({...t})),setCode:t=>{t&&ku.set(t)},getCode:()=>ku.get(),add:(t,e)=>{let n=Pi[t];n||(Pi[t]=n={}),we(e,(r,o)=>{n[o.toLowerCase()]=r})},translate:t=>{const e=Tg().getOr({}),n=i=>pe(i)?Object.prototype.toString.call(i):r(i)?"":""+i,r=i=>""===i||null==i,o=i=>{const l=n(i);return Se(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(r(t))return"";if(Ut(a=t)&&ee(a,"raw"))return n(t.raw);var a,i;if(it(i=t)&&i.length>1){const i=t.slice(1);return s(o(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>ee(i,c)?n(i[c]):l))}return s(o(t))},isRtl:()=>Tg().bind(t=>Se(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>ee(Pi,t)},Ln=()=>{const t=[],e={},n={},r=[],o=(l,c)=>{const u=qt(r,f=>f.name===l&&f.state===c);st(u,f=>f.resolve())},s=l=>ee(e,l),a=(l,c)=>{const u=ro.getCode();!u||c&&-1===(","+(c||"")+",").indexOf(","+u+",")||Ko.ScriptLoader.add(e[l]+"/langs/"+u+".js")},i=(l,c="added")=>"added"===c&&ee(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(u=>{r.push({name:l,state:c,resolve:u})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==Ln.languageLoad&&(s(l)?a(l,c):i(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},o(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>Rt(c)?Rt(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let u=Rt(c)?c:c.prefix+c.resource+c.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=Ln.baseURL+"/"+u),e[l]=u.substring(0,u.lastIndexOf("/"));const f=()=>(o(l,"loaded"),Promise.resolve());return n[l]?f():Ko.ScriptLoader.add(u).then(f)},waitFor:i}};Ln.languageLoad=!0,Ln.baseURL="",Ln.PluginManager=Ln(),Ln.ThemeManager=Ln(),Ln.ModelManager=Ln();const US=t=>{const e=rn(N.none()),n=()=>e.get().each(r=>clearInterval(r));return{clear:()=>{n(),e.set(N.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:r=>{n(),e.set(N.some(setInterval(r,t)))}}},hs=()=>{const t=(e=>{const n=rn(N.none()),r=()=>n.get().each(e);return{clear:()=>{r(),n.set(N.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(N.some(o))}}})(Et);return{...t,on:e=>t.get().each(e)}},hc=(t,e)=>{let n=null;return{cancel:()=>{Zt(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Zt(n)&&(n=setTimeout(()=>{n=null,t.apply(null,r)},e))}}},Eu=(t,e)=>{let n=null;const r=()=>{Zt(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,t.apply(null,o)},e)}}},Mi=ft("mce-annotation"),Js=ft("data-mce-annotation"),ja=ft("data-mce-annotation-uid"),Ii=ft("data-mce-annotation-active"),Fi=ft("data-mce-annotation-classes"),ji=ft("data-mce-annotation-attrs"),Og=t=>e=>ne(e,t),Dg=(t,e)=>{const n=t.selection.getRng(),r=R(n.startContainer),o=R(t.getBody()),s=e.fold(()=>"."+Mi(),i=>`[${Js()}="${i}"]`),a=Qr(r,n.startOffset).getOr(r);return zr(a,s,Og(o)).bind(i=>vr(i,`${ja()}`).bind(l=>vr(i,`${Js()}`).map(c=>{const u=Lg(t,l);return{uid:l,name:c,elements:u}})))},Bg=(t,e)=>Da(t,"data-mce-bogus")||Yp(t,'[data-mce-bogus="all"]',Og(e)),Lg=(t,e)=>{const n=R(t.getBody()),r=fn(n,`[${ja()}="${e}"]`);return qt(r,o=>!Bg(o,n))},Pg=(t,e)=>{const n=R(t.getBody()),r=fn(n,`[${Js()}="${e}"]`),o={};return st(r,s=>{if(!Bg(s,n)){const a=qn(s,ja()),i=Se(o,a).getOr([]);o[a]=i.concat([s])}}),o};let Mg=0;const Ig=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Mg++,t+"_"+n+Mg+String(e)},Fg=(t,e)=>R(t.dom.cloneNode(e)),Zs=t=>Fg(t,!1),jg=t=>Fg(t,!0),zg=(t,e,n=Ce)=>{const r=new Ze(t,e),o=s=>{let a;do{a=r[s]()}while(a&&!at(a)&&!n(a));return N.from(a).filter(at)};return{current:()=>N.from(r.current()).filter(at),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},ta=(t,e)=>{const n=e||(o=>t.isBlock(o)||ze(o)||Ne(o)),r=(o,s,a,i)=>{if(at(o)){const l=i(o,s,o.data);if(-1!==l)return N.some({container:o,offset:l})}return a().bind(l=>r(l.container,l.offset,a,i))};return{backwards:(o,s,a,i)=>{const l=zg(o,i??t.getRoot(),n);return r(o,s,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(o,s,a,i)=>{const l=zg(o,i??t.getRoot(),n);return r(o,s,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},za=Math.round,ea=t=>t?{left:za(t.left),top:za(t.top),bottom:za(t.bottom),right:za(t.right),width:za(t.width),height:za(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Hg=(t,e)=>(t=ea(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Ug=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,zi=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Ug(e.top-t.bottom,t,e)},Hi=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&Ug(e.bottom-t.top,t,e),qg=(t,e,n)=>{const r=Math.max(Math.min(e,t.left+t.width),t.left),o=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-r)*(e-r)+(n-o)*(n-o))},bc=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},bs=(t,e)=>{if(vt(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},qS=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),$g=t=>Rt(t)&&t.charCodeAt(0)>=768&&qS.test(t),Wg=vt,$S=Hr,Vg=tc("display","block table"),WS=tc("float","left right"),Ui=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Wg,$S,Lo(WS)),VS=Lo(tc("white-space","pre pre-line pre-wrap")),qi=at,Nu=ze,Kg=xe.nodeIndex,vc=(t,e)=>e<0&&vt(t)&&t.hasChildNodes()?void 0:bs(t,e),_u=t=>t?t.createRange():xe.DOM.createRng(),Au=t=>Rt(t)&&/[\r\n\t ]/.test(t),Xg=t=>!!t.setStart&&!!t.setEnd,Ru=t=>{const e=t.startContainer,n=t.startOffset;if(Au(t.toString())&&VS(e.parentNode)&&at(e)){const r=e.data;if(Au(r[n-1])||Au(r[n+1]))return!0}return!1},Gg=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,vs=t=>{var e;let n;const r=t.getClientRects();return n=ea(r.length>0?r[0]:t.getBoundingClientRect()),!Xg(t)&&Nu(t)&&Gg(n)?(o=>{const s=o.ownerDocument,a=_u(s),i=s.createTextNode(mn),l=o.parentNode;l.insertBefore(i,o),a.setStart(i,0),a.setEnd(i,1);const c=ea(a.getBoundingClientRect());return l.removeChild(i),c})(t):Gg(n)&&Xg(t)&&null!==(e=(o=>{const a=o.endContainer,i=o.startOffset,l=o.endOffset;if(o.startContainer===a&&at(a)&&0===i&&1===l){const c=o.cloneRange();return c.setEndAfter(a),vs(c)}return null})(t))&&void 0!==e?e:n},na=(t,e)=>{const n=Hg(t,e);return n.width=1,n.right=n.left+1,n},X=(t,e,n)=>{const r=()=>(n||(n=(o=>{const s=[],a=u=>{var f,h;0!==u.height&&(s.length>0&&(f=u).left===(h=s[s.length-1]).left&&f.top===h.top&&f.bottom===h.bottom&&f.right===h.right||s.push(u))},i=(u,f)=>{const h=_u(u.ownerDocument);if(f<u.data.length){if($g(u.data[f]))return;if($g(u.data[f-1])&&(h.setStart(u,f),h.setEnd(u,f+1),!Ru(h)))return void a(na(vs(h),!1))}f>0&&(h.setStart(u,f-1),h.setEnd(u,f),Ru(h)||a(na(vs(h),!1))),f<u.data.length&&(h.setStart(u,f),h.setEnd(u,f+1),Ru(h)||a(na(vs(h),!0)))},l=o.container(),c=o.offset();if(qi(l))return i(l,c),s;if(Wg(l))if(o.isAtEnd()){const u=vc(l,c);qi(u)&&i(u,u.data.length),Ui(u)&&!Nu(u)&&a(na(vs(u),!1))}else{const u=vc(l,c);if(qi(u)&&i(u,0),Ui(u)&&o.isAtEnd())return a(na(vs(u),!1)),s;const f=vc(o.container(),o.offset()-1);Ui(f)&&!Nu(f)&&(Vg(f)||Vg(u)||!Ui(u))&&a(na(vs(f),!1)),Ui(u)&&a(na(vs(u),!0))}return s})(X(t,e))),n);return{container:ft(t),offset:ft(e),toRange:()=>{const o=_u(t.ownerDocument);return o.setStart(t,e),o.setEnd(t,e),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(qi(t),0===e),isAtEnd:()=>qi(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:o=>o&&t===o.container()&&e===o.offset(),getNode:o=>vc(t,o?e-1:e)}};X.fromRangeStart=t=>X(t.startContainer,t.startOffset),X.fromRangeEnd=t=>X(t.endContainer,t.endOffset),X.after=t=>X(t.parentNode,Kg(t)+1),X.before=t=>X(t.parentNode,Kg(t)),X.isAbove=(t,e)=>ln(wn(e.getClientRects()),ho(t.getClientRects()),zi).getOr(!1),X.isBelow=(t,e)=>ln(ho(e.getClientRects()),wn(t.getClientRects()),Hi).getOr(!1),X.isAtStart=t=>!!t&&t.isAtStart(),X.isAtEnd=t=>!!t&&t.isAtEnd(),X.isTextPosition=t=>!!t&&at(t.container()),X.isElementPosition=t=>!X.isTextPosition(t);const yc=(t,e)=>{at(e)&&0===e.data.length&&t.remove(e)},Tu=(t,e,n)=>{var r,s;ru(n)?((r,o,s)=>{const a=N.from(s.firstChild),i=N.from(s.lastChild);o.insertNode(s),a.each(l=>yc(r,l.previousSibling)),i.each(l=>yc(r,l.nextSibling))})(t,e,n):(r=t,e.insertNode(s=n),yc(r,s.previousSibling),yc(r,s.nextSibling))},oo=at,Yg=Ws,Qg=xe.nodeIndex,Jg=t=>{const e=t.parentNode;return Yg(e)?Jg(e):e},Ou=t=>t?Kr(t.childNodes,(e,n)=>(Yg(n)&&"BR"!==n.nodeName?e=e.concat(Ou(n)):e.push(n),e),[]):[],Zg=t=>e=>t===e,th=t=>(oo(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,r;n=Ou(Jg(e)),r=Na(n,Zg(e),e),n=n.slice(0,r+1);const o=Kr(n,(s,a,i)=>(oo(a)&&oo(n[i-1])&&s++,s),0);return n=Lr(n,eo([e.nodeName])),r=Na(n,Zg(e),e),r-o})(t)+"]",eh=(t,e)=>{let n,r=[],o=e.container(),s=e.offset();if(oo(o))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&oo(c);)l+=c.data.length;return l})(o,s);else{const i=o.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",o=i[s]}r.push(th(o));let a=((i,l,c)=>{const u=[];for(let f=l.parentNode;f&&f!==i;f=f.parentNode)u.push(f);return u})(t,o);return a=Lr(a,Lo(Ws)),r=r.concat(Ea(a,i=>th(i))),r.reverse().join("/")+","+n},nh=(t,e)=>{if(!e)return null;const n=e.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",s=Kr(r,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((c,u,f)=>{let h=Ou(c);return h=Lr(h,(b,g)=>!oo(b)||!oo(h[g-1])),h=Lr(h,eo([u])),h[f]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!oo(s)&&s.parentNode){let a;return a="after"===o?Qg(s)+1:Qg(s),X(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;oo(l);){const u=l.data.length;if(i>=c&&i<=c+u){a=l,i-=c;break}if(!oo(l.nextSibling)){a=l,i=u;break}c+=u,l=l.nextSibling}return oo(a)&&i>a.data.length&&(i=a.data.length),X(a,i)})(s,parseInt(o,10))},Cc=Ne,rh=(t,e,n,r,o)=>{const s=o?r.startContainer:r.endContainer;let a=o?r.startOffset:r.endOffset;const i=[],l=t.getRoot();if(at(s))i.push(n?((c,u,f)=>{let h=c(u.data.slice(0,f)).length;for(let b=u.previousSibling;b&&at(b);b=b.previousSibling)h+=c(b.data).length;return h})(e,s,a):a);else{let c=0;const u=s.childNodes;a>=u.length&&u.length&&(c=1,a=Math.max(0,u.length-1)),i.push(t.nodeIndex(u[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(t.nodeIndex(c,n));return i},Du=(t,e,n)=>{let r=0;return ct.each(t.select(e),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},oh=(t,e)=>{let n=e?t.startContainer:t.endContainer,r=e?t.startOffset:t.endOffset;if(vt(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(e?r:r-1,o.length-1)],n&&(r=e?0:n.childNodes.length,e?t.setStart(n,r):t.setEnd(n,r))}},sh=t=>(oh(t,!0),oh(t,!1),t),ah=(t,e)=>{if(vt(t)&&(t=bs(t,e),Cc(t)))return t;if(Sr(t)){at(t)&&Ma(t)&&(t=t.parentNode);let n=t.previousSibling;if(Cc(n)||(n=t.nextSibling,Cc(n)))return n}},ih=(t,e,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Cc(r)){const a=r.nodeName;return{name:a,index:Du(n.dom,a,r)}}const s=ah((a=o).startContainer,a.startOffset)||ah(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:Du(n.dom,a,s)}}return((a,i,l,c)=>{const u=i.dom,f=rh(u,a,l,c,!0),h=i.isForward(),b=og(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:f,forward:h,...b}:{start:f,end:rh(u,a,l,c,!1),forward:h,...b}})(t,n,e,o)},lh=(t,e,n)=>{const r={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",r,"&#xFEFF;"):t.create("span",r)},ch=(t,e)=>{const n=t.dom;let r=t.getRng();const o=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:Du(n,i,a)};const c=sh(r.cloneRange());if(!s){c.collapse(!1);const f=lh(n,o+"_end",e);Tu(n,c,f)}r=sh(r),r.collapse(!0);const u=lh(n,o+"_start",e);return Tu(n,r,u),t.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},Bu=yt(ih,de,!0),dh=t=>{const e=s=>s(t),n=ft(t),r=()=>o,o={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:Ae,isError:Ce,map:s=>Kn.value(s(t)),mapError:r,bind:e,exists:e,forall:e,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:s=>{s(t)},toOptional:()=>N.some(t)};return o},uh=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,o)=>r(t),isValue:Ce,isError:Ae,map:e,mapError:r=>Kn.error(r(t)),bind:e,exists:Ce,forall:Ae,getOr:de,or:de,getOrThunk:mo,orThunk:mo,getOrDie:sr(String(t)),each:Et,toOptional:N.none};return n},Kn={value:dh,error:uh,fromOption:(t,e)=>t.fold(()=>uh(e),dh)},yo=t=>{if(!it(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return st(t,(r,o)=>{const s=Ye(r);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!it(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...u)=>{if(u.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+u.length);return u[o].apply(null,l)},match:u=>{const f=Ye(u);if(e.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+f.join(","));if(!ar(e,h=>Tt(f,h)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+"\nRequired: "+e.join(", "));return u[a].apply(null,l)},log:u=>{console.log(u,{constructors:e,constructor:a,params:l})}}}}),n};yo([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const KS=t=>"inline-command"===t.type||"inline-format"===t.type,XS=t=>"block-command"===t.type||"block-format"===t.type,GS=t=>{const e=r=>Kn.error({message:r,pattern:t}),n=(r,o,s)=>{if(void 0!==t.format){let a;if(it(t.format)){if(!ar(t.format,Rt))return e(r+" pattern has non-string items in the `format` array");a=t.format}else{if(!Rt(t.format))return e(r+" pattern has non-string `format` parameter");a=[t.format]}return Kn.value(o(a))}return void 0!==t.cmd?Rt(t.cmd)?Kn.value(s(t.cmd,t.value)):e(r+" pattern has non-string `cmd` parameter"):e(r+" pattern is missing both `format` and `cmd` parameters")};if(!Ut(t))return e("Raw pattern is not an object");if(!Rt(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!Rt(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let r=t.start,o=t.end;return 0===o.length&&(o=r,r=""),n("Inline",s=>({type:"inline-format",start:r,end:o,format:s}),(s,a)=>({type:"inline-command",start:r,end:o,cmd:s,value:a}))}return void 0!==t.replacement?Rt(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):Kn.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:t.start,format:r[0]}),(r,o)=>({type:"block-command",start:t.start,cmd:r,value:o}))},fh=t=>qt(t,XS),mh=t=>qt(t,KS),ph=t=>{const e=(n=>{const r=[],o=[];return st(n,s=>{s.fold(a=>{r.push(a)},a=>{o.push(a)})}),{errors:r,values:o}})(oe(t,GS));return st(e.errors,n=>console.error(n.message,n.pattern)),e.values},Lu=Hn().deviceType,YS=Lu.isTouch(),QS=xe.DOM,gh=t=>hr(t,RegExp),xt=t=>e=>e.options.get(t),Pu=t=>Rt(t)||Ut(t),hh=(t,e="")=>n=>{const r=Rt(n);if(r){if(-1!==n.indexOf("=")){const o=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return gn(a,(i,l)=>{const c=l.split("="),u=c[0],f=c.length>1?c[1]:u;return i[Xr(u)]=Xr(f),i},{})})(n);return{value:Se(o,t.id).getOr(e),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},JS=xt("iframe_attrs"),ZS=xt("doctype"),bh=xt("document_base_url"),tk=xt("body_id"),ek=xt("body_class"),vh=xt("content_security_policy"),nk=xt("br_in_pre"),fr=xt("forced_root_block"),$i=xt("forced_root_block_attrs"),rk=xt("newline_behavior"),ok=xt("br_newline_selector"),sk=xt("no_newline_selector"),ak=xt("keep_styles"),ik=xt("end_container_on_empty_block"),yh=xt("automatic_uploads"),Ch=xt("images_reuse_filename"),lk=xt("images_replace_blob_uris"),xh=xt("icons"),ck=xt("icons_url"),dk=xt("images_upload_url"),uk=xt("images_upload_base_path"),fk=xt("images_upload_credentials"),mk=xt("images_upload_handler"),pk=xt("content_css_cors"),Mu=xt("referrer_policy"),wh=xt("language"),gk=xt("language_url"),Sh=xt("indent_use_margin"),hk=xt("indentation"),bk=xt("content_css"),vk=xt("content_style"),kh=xt("font_css"),yk=xt("directionality"),Ck=xt("inline_boundaries_selector"),Eh=xt("object_resizing"),xk=xt("resize_img_proportional"),wk=xt("placeholder"),Nh=xt("event_root"),Sk=xt("service_message"),Ha=xt("theme"),kk=xt("theme_url"),Iu=xt("model"),Ek=xt("model_url"),Wi=xt("inline_boundaries"),Nk=xt("formats"),_k=xt("preview_styles"),Ak=xt("format_empty_lines"),Rk=xt("format_noneditable_selector"),Tk=xt("custom_ui_selector"),Fu=xt("inline"),Ok=xt("hidden_input"),Dk=xt("submit_patch"),Bk=xt("add_form_submit_trigger"),Lk=xt("add_unload_trigger"),Pk=xt("custom_undo_redo_levels"),Mk=xt("disable_nodechange"),_h=xt("readonly"),Ah=xt("content_css_cors"),xc=xt("plugins"),Ik=xt("external_plugins"),Fk=xt("block_unsupported_drop"),jk=xt("visual"),zk=xt("visual_table_class"),Rh=xt("visual_anchor_class"),Hk=xt("iframe_aria_text"),Uk=xt("setup"),qk=xt("init_instance_callback"),$k=xt("urlconverter_callback"),Wk=xt("auto_focus"),Vk=xt("browser_spellcheck"),Kk=xt("protect"),Xk=xt("paste_block_drop"),wc=xt("paste_data_images"),Gk=xt("paste_preprocess"),Yk=xt("paste_postprocess"),Qk=xt("paste_webkit_styles"),Jk=xt("paste_remove_styles_if_webkit"),Zk=xt("paste_merge_formats"),tE=xt("smart_paste"),eE=xt("paste_as_text"),nE=xt("paste_tab_spaces"),rE=xt("allow_html_data_urls"),oE=xt("text_patterns"),sE=xt("text_patterns_lookup"),Th=xt("noneditable_class"),aE=xt("editable_class"),iE=xt("noneditable_regexp"),lE=xt("preserve_cdata"),cE=xt("highlight_on_focus"),ju=xt("xss_sanitization"),Oh=t=>ct.explode(t.options.get("images_file_types")),dE=xt("table_tab_navigation"),uE=vt,Dh=at,Bh=t=>{const e=t.parentNode;e&&e.removeChild(t)},Lh=t=>{const e=Vo(t);return{count:t.length-e.length,text:e}},Ph=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(En));)t.deleteData(e,1)},Mh=(t,e)=>(ra(t),e),ra=t=>{uE(t)&&Sr(t)&&(rg(t)?t.removeAttribute("data-mce-caret"):Bh(t)),Dh(t)&&(Ph(t),0===t.data.length&&Bh(t))},mE=Ne,pE=vo,gE=ec,Ih=(t,e,n)=>{const r=Hg(e.getBoundingClientRect(),n);let o,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;o=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();o=t.scrollLeft-i.left,s=t.scrollTop-i.top}r.left+=o,r.right+=o,r.top+=s,r.bottom+=s,r.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),r.left+=a,r.right+=a),r},Fh=()=>me.browser.isFirefox(),Vi=t=>mE(t)||pE(t),Ki=t=>(Vi(t)||Wo(t)&&Fh())&&Pe(R(t)).exists(qo),bE=no,zu=Ne,vE=vo,jh=tc("display","block table table-cell table-caption list-item"),zh=Sr,Hh=Ma,yE=vt,CE=at,xE=Hr,Ua=t=>t>0,oa=t=>t<0,Sc=(t,e)=>{let n;for(;n=t(e);)if(!Hh(n))return n;return null},Xi=(t,e,n,r,o)=>{const s=new Ze(t,r),a=zu(t)||Hh(t);let i;if(oa(e)){if(a&&(i=Sc(s.prev.bind(s),!0),n(i)))return i;for(;i=Sc(s.prev.bind(s),o);)if(n(i))return i}if(Ua(e)){if(a&&(i=Sc(s.next.bind(s),!0),n(i)))return i;for(;i=Sc(s.next.bind(s),o);)if(n(i))return i}return null},ys=(t,e)=>{for(;t&&t!==e;){if(jh(t))return t;t=t.parentNode}return null},Co=(t,e,n)=>ys(t.container(),n)===ys(e.container(),n),Hu=(t,e)=>{if(!e)return N.none();const n=e.container(),r=e.offset();return yE(n)?N.from(n.childNodes[r+t]):N.none()},Uh=(t,e)=>{var n;const r=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),r},wE=(t,e,n)=>ys(e,t)===ys(n,t),qh=(t,e,n)=>{const r=t?"previousSibling":"nextSibling";let o=n;for(;o&&o!==e;){let s=o[r];if(s&&zh(s)&&(s=s[r]),zu(s)||vE(s)){if(wE(e,s,o))return s;break}if(xE(s))break;o=o.parentNode}return null},Gi=yt(Uh,!0),Yi=yt(Uh,!1),Uu=(t,e,n)=>{let r;const o=yt(qh,!0,e),s=yt(qh,!1,e),a=n.startContainer,i=n.startOffset;if(Ma(a)){const l=CE(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if("before"===c&&(r=l.nextSibling,Ki(r)))return Gi(r);if("after"===c&&(r=l.previousSibling,Ki(r)))return Yi(r)}if(!n.collapsed)return n;if(at(a)){if(zh(a)){if(1===t){if(r=s(a),r)return Gi(r);if(r=o(a),r)return Yi(r)}if(-1===t){if(r=o(a),r)return Yi(r);if(r=s(a),r)return Gi(r)}return n}if(lc(a)&&i>=a.data.length-1)return 1===t&&(r=s(a),r)?Gi(r):n;if(ic(a)&&i<=1)return-1===t&&(r=o(a),r)?Yi(r):n;if(i===a.data.length)return r=s(a),r?Gi(r):n;if(0===i)return r=o(a),r?Yi(r):n}return n},$h=(t,e)=>Hu(t?0:-1,e).filter(zu),Qi=(t,e,n)=>{const r=Uu(t,e,n);return-1===t?X.fromRangeStart(r):X.fromRangeEnd(r)},kc=t=>N.from(t.getNode()).map(R),qu=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},Ec=(t,e)=>{const n=Co(t,e);return!(n||!ze(t.getNode()))||n};var on,t;(t=on||(on={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const SE=Ne,xo=at,Wh=vt,$u=ze,qa=Hr,Vh=t=>{return ag(t)||!!cu(e=t)&&!gn(an(e.getElementsByTagName("*")),(n,r)=>n||sg(r),!1);var e},Nc=ig,Kh=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,Xh=(t,e)=>{if(Ua(t)){if(qa(e.previousSibling)&&!xo(e.previousSibling))return X.before(e);if(xo(e))return X(e,0)}if(oa(t)){if(qa(e.nextSibling)&&!xo(e.nextSibling))return X.after(e);if(xo(e))return X(e,e.data.length)}return oa(t)?$u(e)?X.before(e):X.after(e):X.before(e)},Wu=(t,e,n)=>{let r,o,s,a;if(!Wh(n)||!e)return null;if(e.isEqual(X.after(n))&&n.lastChild){if(a=X.after(n.lastChild),oa(t)&&qa(n.lastChild)&&Wh(n.lastChild))return $u(n.lastChild)?X.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(xo(i)){if(oa(t)&&l>0)return X(i,--l);if(Ua(t)&&l<i.length)return X(i,++l);r=i}else{if(oa(t)&&l>0&&(o=Kh(i,l-1),qa(o)))return!Vh(o)&&(s=Xi(o,t,Nc,o),s)?xo(s)?X(s,s.data.length):X.after(s):xo(o)?X(o,o.data.length):X.before(o);if(Ua(t)&&l<i.childNodes.length&&(o=Kh(i,l),qa(o)))return $u(o)?((u,f)=>{const h=f.nextSibling;return h&&qa(h)?xo(h)?X(h,0):X.before(h):Wu(on.Forwards,X.after(f),u)})(n,o):!Vh(o)&&(s=Xi(o,t,Nc,o),s)?xo(s)?X(s,0):X.before(s):xo(o)?X(o,0):X.after(o);r=o||a.getNode()}if(r&&(Ua(t)&&a.isAtEnd()||oa(t)&&a.isAtStart())&&(r=Xi(r,t,Ae,n,!0),Nc(r,n)))return Xh(t,r);o=r&&Xi(r,t,Nc,n);const c=Pr(qt(((u,f)=>{const h=[];let b=u;for(;b&&b!==f;)h.push(b),b=b.parentNode;return h})(i,n),SE));return!c||o&&c.contains(o)?o?Xh(t,o):null:(a=Ua(t)?X.after(c):X.before(c),a)},wo=t=>({next:e=>Wu(on.Forwards,e,t),prev:e=>Wu(on.Backwards,e,t)}),Gh=t=>X.isTextPosition(t)?0===t.offset():Hr(t.getNode()),Yh=t=>{if(X.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return Hr(t.getNode(!0))},Qh=(t,e)=>!X.isTextPosition(t)&&!X.isTextPosition(e)&&t.getNode()===e.getNode(!0),kr=(t,e,n)=>{const r=wo(e);return N.from(t?r.next(n):r.prev(n))},_c=(t,e,n)=>kr(t,e,n).bind(r=>{return Co(n,r,e)&&(s=n,a=r,t?!Qh(s,a)&&(X.isTextPosition(i=s)||!ze(i.getNode()))&&Yh(s)&&Gh(a):!Qh(a,s)&&Gh(s)&&Yh(a))?kr(t,e,r):N.some(r);var s,a,i}),Jh=(t,e,n,r)=>_c(t,e,n).bind(o=>r(o)?Jh(t,e,o,r):N.some(o)),$a=(t,e)=>{const n=t?e.firstChild:e.lastChild;return at(n)?N.some(X(n,t?0:n.data.length)):n?Hr(n)?N.some(t?X.before(n):ze(r=n)?X.before(r):X.after(r)):((o,s,a)=>{const i=o?X.before(a):X.after(a);return kr(o,s,i)})(t,e,n):N.none();var r},tr=yt(kr,!0),Er=yt(kr,!1),Xn=yt($a,!0),So=yt($a,!1),Vu="_mce_caret",Ur=t=>vt(t)&&t.id===Vu,sa=(t,e)=>{let n=e;for(;n&&n!==t;){if(Ur(n))return n;n=n.parentNode}return null},Zh=t=>ee(t,"name"),tb=t=>ct.isArray(t.start),Ac=t=>!(!Zh(t)&&_n(t.forward))||t.forward,eb=(t,e)=>(vt(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),kE=(t,e)=>So(t).fold(Ce,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),nb=(t,e,n)=>!(e.hasChildNodes()||!sa(t,e)||(((r,o)=>{var s;const a=(null!==(s=r.ownerDocument)&&void 0!==s?s:document).createTextNode(En);r.appendChild(a),o.setStart(a,0),o.setEnd(a,0)})(e,n),0)),rb=(t,e,n,r)=>{const o=n[e?"start":"end"],s=t.getRoot();if(o){let a=s,i=o[0];for(let l=o.length-1;a&&l>=1;l--){const c=a.childNodes;if(nb(s,a,r))return!0;if(o[l]>c.length-1)return!!nb(s,a,r)||kE(a,r);a=c[o[l]]}at(a)&&(i=Math.min(o[0],a.data.length)),vt(a)&&(i=Math.min(o[0],a.childNodes.length)),e?r.setStart(a,i):r.setEnd(a,i)}return!0},Ku=t=>at(t)&&t.data.length>0,ob=(t,e,n)=>{const r=t.get(n.id+"_"+e),o=r?.parentNode,s=n.keep;if(r&&o){let a,i;if("start"===e?s?r.hasChildNodes()?(a=r.firstChild,i=1):Ku(r.nextSibling)?(a=r.nextSibling,i=0):Ku(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)+1):(a=o,i=t.nodeIndex(r)):s?r.hasChildNodes()?(a=r.firstChild,i=1):Ku(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)):(a=o,i=t.nodeIndex(r)),!s){const l=r.previousSibling,c=r.nextSibling;let u;for(ct.each(ct.grep(r.childNodes),f=>{at(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});u=t.get(n.id+"_"+e);)t.remove(u,!0);if(at(c)&&at(l)&&!me.browser.isOpera()){const f=l.data.length;l.appendData(c.data),t.remove(c),a=l,i=f}}return N.some(X(a,i))}return N.none()},EE=(t,e,n)=>((r,o,s=!1)=>{return 2===o?ih(Vo,s,r):3===o?(a=>{const i=a.getRng();return{start:eh(a.dom.getRoot(),X.fromRangeStart(i)),end:eh(a.dom.getRoot(),X.fromRangeEnd(i)),forward:a.isForward()}})(r):o?{rng:(a=r).getRng(),forward:a.isForward()}:ch(r,!1);var a})(t,e,n),NE=(t,e)=>{((n,r)=>{const o=n.dom;if(r){if(tb(r))return((s,a)=>{const i=s.createRng();return rb(s,!0,a,i)&&rb(s,!1,a,i)?N.some({range:i,forward:Ac(a)}):N.none()})(o,r);if(Rt(r.start))return((s,a)=>{const i=N.from(nh(s.getRoot(),a.start)),l=N.from(nh(s.getRoot(),a.end));return ln(i,l,(c,u)=>{const f=s.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Ac(a)}})})(o,r);if(ee(r,"id"))return((s,a)=>{const i=ob(s,"start",a),l=ob(s,"end",a);return ln(i,l.or(i),(c,u)=>{const f=s.createRng();return f.setStart(eb(s,c.container()),c.offset()),f.setEnd(eb(s,u.container()),u.offset()),{range:f,forward:Ac(a)}})})(o,r);if(Zh(r))return((s,a)=>N.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(o,r);if((s=>ee(s,"rng"))(r))return N.some({range:r.rng,forward:Ac(r)})}return N.none()})(t,e).each(({range:n,forward:r})=>{t.setRng(n,r)})},Nr=t=>vt(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Rc=t=>"\xa0"===t,Wa=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),Xu=t=>!Wa(t)&&!Rc(t)&&!tg(t),Gu=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},_E=t=>{return{value:(n=Gu(t.red)+Gu(t.green)+Gu(t.blue),pi(n,"#").toUpperCase())};var n},AE=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,RE=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,sb=(t,e,n,r)=>({red:t,green:e,blue:n,alpha:r}),ab=(t,e,n,r)=>{const o=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(r);return sb(o,s,a,i)},Tc=t=>(e=>{if("transparent"===e)return N.some(sb(0,0,0,0));const n=AE.exec(e);if(null!==n)return N.some(ab(n[1],n[2],n[3],"1"));const r=RE.exec(e);return null!==r?N.some(ab(r[1],r[2],r[3],r[4])):N.none()})(t).map(_E).map(e=>"#"+e.value).getOr(t),Yu=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},ib=(t,e)=>{const n=fn(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:qt(en(t,s=>{const a=bc(s);return a?[R(a)]:[]}),Oi)},Va=t=>ib(Yu(t.selection.getSel()),R(t.getBody())),Ji=(t,e)=>cr(t,"table",e),lb=t=>Wn(t).fold(ft([t]),e=>[t].concat(lb(e))),Qu=t=>Je(t).fold(ft([t]),e=>"br"===Ee(e)?Yr(e).map(n=>[t].concat(Qu(n))).getOr([]):[t].concat(Qu(e))),Ju=(t,e)=>ln((n=>{const r=n.startContainer,o=n.startOffset;return at(r)?0===o?N.some(R(r)):N.none():N.from(r.childNodes[o]).map(R)})(e),(n=>{const r=n.endContainer,o=n.endOffset;return at(r)?o===r.data.length?N.some(R(r)):N.none():N.from(r.childNodes[o-1]).map(R)})(e),(n,r)=>{const o=Ue(lb(t),yt(ne,n)),s=Ue(Qu(t),yt(ne,r));return o.isSome()&&s.isSome()}).getOr(!1),Zu=(t,e,n,r)=>{const o=n,s=new Ze(n,o),a=br(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Tt(["td","th","table"],c.toLowerCase()));let i=n;do{if(at(i)&&0!==ct.trim(i.data).length)return void(r?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(r?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=r?s.next():s.prev());"BODY"===o.nodeName&&(r?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},Oc=t=>{const e=t.selection.getSel();return pt(e)&&e.rangeCount>0},tf=(t,e)=>{const n=Va(t);n.length>0?st(n,r=>{const o=r.dom,s=t.dom.createRng();s.setStartBefore(o),s.setEndAfter(o),e(s,!0)}):e(t.selection.getRng(),!1)},cb=(t,e,n)=>{const r=ch(t,e);n(r),t.moveToBookmark(r)},Dc=t=>x(t?.nodeType),ef=t=>vt(t)&&!Nr(t)&&!Ur(t)&&!Ws(t),aa=t=>!0===t.isContentEditable,db=(t,e,n)=>{const{selection:r,dom:o}=t,s=r.getNode(),a=Ne(s);cb(r,!0,()=>{e()}),a&&Ne(s)&&o.isChildOf(s,t.getBody())?t.selection.select(s):n(r.getStart())&&TE(o,r)},TE=(t,e)=>{var n,r;const o=e.getRng(),{startContainer:s,startOffset:a}=o;if(!((i,l)=>{if(ef(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),u=parseInt(c,10);return!isNaN(u)&&u>0}return!1})(t,e.getNode())&&vt(s)){const i=s.childNodes,l=t.getRoot();let c;if(a<i.length){const u=i[a];c=new Ze(u,null!==(n=t.getParent(u,t.isBlock))&&void 0!==n?n:l)}else{const u=i[i.length-1];c=new Ze(u,null!==(r=t.getParent(u,t.isBlock))&&void 0!==r?r:l),c.next(!0)}for(let u=c.current();u;u=c.next()){if("false"===t.getContentEditable(u))return;if(at(u)&&!rf(u))return o.setStart(u,0),void e.setRng(o)}}},ub=(t,e,n)=>{if(t){const r=e?"nextSibling":"previousSibling";for(t=n?t:t[r];t;t=t[r])if(vt(t)||!rf(t))return t}},nf=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Gs(t,e),Ka=(t,e,n)=>t.schema.isValidChild(e,n),rf=(t,e=!1)=>{if(pt(t)&&at(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return Xs(n)}return!1},fb=(t,e)=>{const n=t.dom;return ef(e)&&"false"===n.getContentEditable(e)&&((r,o)=>{const s="[data-mce-cef-wrappable]",a=Rk(r),i=rs(a)?s:`${s},${a}`;return Qt(R(o),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},Cs=(t,e)=>pe(t)?t(e):(pt(e)&&(t=t.replace(/%(\w+)/g,(n,r)=>e[r]||n)),t),of=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),sf=(t,e)=>{if(be(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=Tc(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Bc=(t,e,n)=>{const r=t.getStyle(e,n);return sf(r,n)},mb=(t,e)=>{let n;return t.getParent(e,r=>!!vt(r)&&(n=t.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},Lc=(t,e,n)=>t.getParents(e,n,t.getRoot()),af=(t,e,n)=>{const r=t.formatter.get(e);return pt(r)&&ke(r,n)},ko=t=>hn(t,"block"),_r=t=>hn(t,"selector"),tn=t=>hn(t,"inline"),lf=t=>_r(t)&&!1!==t.expand&&!tn(t),Xa=Nr,pb=Lc,gb=rf,OE=nf,hb=(t,e)=>{let n=e;for(;n;){if(vt(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},bb=(t,e,n,r)=>{const o=e.data;if(t){for(let s=n;s>0;s--)if(r(o.charAt(s-1)))return s}else for(let s=n;s<o.length;s++)if(r(o.charAt(s)))return s;return-1},DE=(t,e,n)=>bb(t,e,n,r=>Rc(r)||Wa(r)),BE=(t,e,n)=>bb(t,e,n,Xu),vb=(t,e,n,r,o,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(c,u,f)=>{const h=ta(t);return N.from((o?h.backwards:h.forwards)(c,u,(g,v)=>Xa(g.parentNode)?-1:(a=g,f(o,g,v)),i))};return l(n,r,DE).bind(c=>s?l(c.container,c.offset+(o?-1:0),BE):N.some(c)).orThunk(()=>a?N.some({container:a,offset:o?0:a.length}):N.none())},yb=(t,e,n,r,o)=>{const s=r[o];at(r)&&rs(r.data)&&s&&(r=s);const a=pb(t,r);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const c=e[l];if((!pt(c.collapsed)||c.collapsed===n.collapsed)&&_r(c)&&t.is(a[i],c.selector))return a[i]}return r},Cb=(t,e,n,r)=>{var o;let s=n;const a=t.getRoot(),i=e[0];if(ko(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(o=t.getParent(n,"LI,TD,TH"))&&void 0!==o?o:a;s=t.getParent(at(n)?n.parentNode:n,c=>c!==a&&OE(t.schema,c),l)}if(s&&ko(i)&&i.wrapper&&(s=pb(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[r]&&!t.isBlock(s[r])&&(s=s[r],!of(s,"br")););return s||n},xb=(t,e,n,r)=>{const o=n.parentNode;return!pt(n[r])&&(!(o!==e&&!be(o)&&!t.isBlock(o))||xb(t,e,o,r))},Pc=(t,e,n,r,o)=>{let s=n;const a=o?"previousSibling":"nextSibling",i=t.getRoot();if(at(n)&&!gb(n)&&(o?r>0:r<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let c=s[a];c;c=c[a]){const u=at(c)&&!xb(t,i,c,a);if(!Xa(c)&&(!ze(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!gb(c,u))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},wb=t=>Xa(t.parentNode)||Xa(t),ia=(t,e,n,r=!1)=>{let{startContainer:o,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return vt(o)&&o.hasChildNodes()&&(o=bs(o,s),at(o)&&(s=0)),vt(a)&&a.hasChildNodes()&&(a=bs(a,e.collapsed?i:i-1),at(a)&&(i=a.data.length)),o=hb(t,o),a=hb(t,a),wb(o)&&(o=Xa(o)?o:o.parentNode,o=e.collapsed?o.previousSibling||o:o.nextSibling||o,at(o)&&(s=e.collapsed?o.length:0)),wb(a)&&(a=Xa(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,at(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(vb(t,t.getRoot(),o,s,!0,r).each(({container:c,offset:u})=>{o=c,s=u}),vb(t,t.getRoot(),a,i,!1,r).each(({container:c,offset:u})=>{a=c,i=u})),(tn(l)||l.block_expand)&&(tn(l)&&at(o)&&0!==s||(o=Pc(t,n,o,s,!0)),tn(l)&&at(a)&&i!==a.data.length||(a=Pc(t,n,a,i,!1))),lf(l)&&(o=yb(t,n,e,o,"previousSibling"),a=yb(t,n,e,a,"nextSibling")),(ko(l)||_r(l))&&(o=Cb(t,n,o,"previousSibling"),a=Cb(t,n,a,"nextSibling"),ko(l)&&(t.isBlock(o)||(o=Pc(t,n,o,s,!0)),t.isBlock(a)||(a=Pc(t,n,a,i,!1)))),vt(o)&&o.parentNode&&(s=t.nodeIndex(o),o=o.parentNode),vt(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:s,endContainer:a,endOffset:i}},Zi=(t,e,n)=>{var r;const o=e.startOffset,s=bs(e.startContainer,o),a=e.endOffset,i=bs(e.endContainer,a-1),l=p=>{const C=p[0];at(C)&&C===s&&o>=C.data.length&&p.splice(0,1);const w=p[p.length-1];return 0===a&&p.length>0&&w===i&&at(w)&&p.splice(p.length-1,1),p},c=(p,C,w)=>{const k=[];for(;p&&p!==w;p=p[C])k.push(p);return k},u=(p,C)=>t.getParent(p,w=>w.parentNode===C,C),f=(p,C,w)=>{const k=w?"nextSibling":"previousSibling";for(let A=p,O=A.parentNode;A&&A!==C;A=O){O=A.parentNode;const T=c(A===p?A:A[k],k);T.length&&(w||T.reverse(),n(l(T)))}};if(s===i)return n(l([s]));const h=null!==(r=t.findCommonAncestor(s,i))&&void 0!==r?r:t.getRoot();if(t.isChildOf(s,i))return f(s,h,!0);if(t.isChildOf(i,s))return f(i,h);const b=u(s,h)||s,g=u(i,h)||i;f(s,b,!0);const v=c(b===s?b:b.nextSibling,"nextSibling",g===i?g.nextSibling:g);v.length&&n(l(v)),f(i,g)},LE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Sb=(t,e,n,r,o,s)=>{const{uid:a=e,...i}=n;_(t,Mi()),Le(t,`${ja()}`,a),Le(t,`${Js()}`,r);const{attributes:l={},classes:c=[]}=o(a,i);if(Gr(t,l),u=t,st(c,h=>{_(u,h)}),s){c.length>0&&Le(t,`${Fi()}`,c.join(","));const u=Ye(l);u.length>0&&Le(t,`${ji()}`,u.join(","))}var u},kb=(t,e,n,r,o)=>{const s=ot("span",t);return Sb(s,e,n,r,o,!1),s},Eb=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Se(s,a).map(i=>i.settings),getNames:()=>Ye(s)}})();((s,a)=>{const i=Js(),l=u=>N.from(u.attr(i)).bind(a.lookup),c=u=>{var f,h;u.attr(ja(),null),u.attr(Js(),null),u.attr(Ii(),null);const b=N.from(u.attr(ji())).map(C=>C.split(",")).getOr([]),g=N.from(u.attr(Fi())).map(C=>C.split(",")).getOr([]);st(b,C=>u.attr(C,null));const v=null!==(h=null===(f=u.attr("class"))||void 0===f?void 0:f.split(" "))&&void 0!==h?h:[],p=Wt(v,[Mi()].concat(g));u.attr("class",p.length>0?p.join(" "):null),u.attr(Fi(),null),u.attr(ji(),null)};s.serializer.addTempAttr(Ii()),s.serializer.addAttributeFilter(i,u=>{for(const f of u)l(f).each(h=>{!1===h.persistent&&("span"===f.name?f.unwrap():c(f))})})})(t,e);const n=((s,a)=>{const i=rn({}),l=()=>({listeners:[],previous:hs()}),c=(b,g)=>{u(b,v=>(g(v),v))},u=(b,g)=>{const v=i.get(),p=g(Se(v,b).getOrThunk(l));v[b]=p,i.set(v)},f=(b,g)=>{st(Lg(s,b),v=>{g?Le(v,Ii(),"true"):nn(v,Ii())})},h=Eu(()=>{const b=Mo(a.getNames());st(b,g=>{u(g,v=>{const p=v.previous.get();return Dg(s,N.some(g)).fold(()=>{p.each(C=>{var w;c(w=g,k=>{st(k.listeners,A=>A(!1,w))}),v.previous.clear(),f(C,!1)})},({uid:C,name:w,elements:k})=>{var A,O,T;ss(p,C)||(p.each(A=>f(A,!1)),O=C,T=k,c(A=w,P=>{st(P.listeners,L=>L(!0,A,{uid:O,nodes:oe(T,M=>M.dom)}))}),v.previous.set(C),f(C,!0))}),{previous:v.previous,listeners:v.listeners}})})},30);return s.on("remove",()=>{h.cancel()}),s.on("NodeChange",()=>{h.throttle()}),{addListener:(b,g)=>{u(b,v=>({previous:v.previous,listeners:v.listeners.concat([g])}))}}})(t,e),r=zs("span"),o=s=>{st(s,a=>{r(a)?se(a):(i=>{z(i,Mi()),nn(i,`${ja()}`),nn(i,`${Js()}`),nn(i,`${Ii()}`);const l=vr(i,`${ji()}`).map(f=>f.split(",")).getOr([]),c=vr(i,`${Fi()}`).map(f=>f.split(",")).getOr([]);var u;st(l,f=>nn(i,f)),u=i,st(c,f=>{z(u,f)}),nn(i,`${Fi()}`),nn(i,`${ji()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,c,u,f;c=s,u=i,f=a,(l=t).undoManager.transact(()=>{const h=l.selection,b=h.getRng(),g=Va(l).length>0,v=Ig("mce-annotation");if(b.collapsed&&!g&&((p,C)=>{const w=ia(p.dom,C,[{inline:"span"}]);C.setStart(w.startContainer,w.startOffset),C.setEnd(w.endContainer,w.endOffset),p.selection.setRng(C)})(l,b),h.getRng().collapsed&&!g){const p=kb(l.getDoc(),v,f,c,u.decorate);$e(p,mn),h.getRng().insertNode(p.dom),h.select(p.dom)}else cb(h,!1,()=>{tf(l,p=>{((t,e,n,r,o,s)=>{const a=[],i=kb(t.getDoc(),n,s,r,o),l=hs(),c=()=>{l.clear()},u=h=>{st(h,f)},f=h=>{switch(b=t,g=h,v="span",p=Ee(h),fe(g).fold(()=>"skipping",C=>{return"br"===p||Tn(w=g)&&nc(w)===En?"valid":(w=>Sn(w)&&F(w,Mi()))(g)?"existing":Ur(g.dom)?"caret":ke(LE,w=>Qt(g,w))?"valid-block":Ka(b,v,p)&&Ka(b,Ee(C),v)?"valid":"invalid-child";var w})){case"invalid-child":{c();const b=Re(h);u(b),c();break}case"valid-block":c(),Sb(h,n,s,r,o,!0);break;case"valid":{const b=l.get().getOrThunk(()=>{const g=Zs(i);return a.push(g),l.set(g),g});$t(h,b);break}}var b,g,v,p};Zi(t.dom,e,h=>{c(),(b=>{const g=oe(b,R);u(g)})(h)})})(l,p,v,c,u.decorate,f)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{Dg(t,N.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();o(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();we(Pg(t,s),(i,l)=>{o(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=Pg(t,s);return Io(a,i=>oe(i,l=>l.dom))}}},tl=t=>({getBookmark:yt(EE,t),moveToBookmark:yt(NE,t)});tl.isBookmarkNode=Nr;const Nb=(t,e,n)=>!n.collapsed&&ke(n.getClientRects(),r=>{return a=e,(s=t)>=(o=r).left&&s<=o.right&&a>=o.top&&a<=o.bottom;var o,s,a}),_b=(t,e,n)=>{t.dispatch(e,n)},Ab=(t,e,n,r)=>{t.dispatch("FormatApply",{format:e,node:n,vars:r})},Rb=(t,e,n,r)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:r})},Tb=(t,e)=>t.dispatch("SetContent",e),Ob=(t,e)=>t.dispatch("GetContent",e),Db=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),St={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||St.metaKeyPressed(t),metaKeyPressed:t=>me.os.isMacOS()||me.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},el="data-mce-selected",Bb=Math.abs,Mc=Math.round,cf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Lb=(t,e)=>{const n=e.dom,r=e.getDoc(),o=document,s=e.getBody();let a,i,l,c,u,f,h,b,g,v,p,C,w,k,A;const O=kt=>pt(kt)&&(Zp(kt)||n.is(kt,"figure.image")),T=kt=>vo(kt)||n.hasClass(kt,"mce-preview-object"),P=kt=>{const Xt=kt.target;((Gt,I)=>{if("longpress"===(j=Gt).type||0===j.type.indexOf("touch")){const j=Gt.touches[0];return O(Gt.target)&&!Nb(j.clientX,j.clientY,I)}var j;return O(Gt.target)&&!Nb(Gt.clientX,Gt.clientY,I)})(kt,e.selection.getRng())&&!kt.isDefaultPrevented()&&e.selection.select(Xt)},L=kt=>n.hasClass(kt,"mce-preview-object")&&pt(kt.firstElementChild)?[kt,kt.firstElementChild]:n.is(kt,"figure.image")?[kt.querySelector("img")]:[kt],M=kt=>{const Xt=Eh(e);return!!Xt&&"false"!==kt.getAttribute("data-mce-resize")&&kt!==e.getBody()&&(n.hasClass(kt,"mce-preview-object")&&pt(kt.firstElementChild)?Qt(R(kt.firstElementChild),Xt):Qt(R(kt),Xt))},$=(kt,Xt,Gt)=>{if(pt(Gt)){const I=L(kt);st(I,j=>{j.style[Xt]||!e.schema.isValid(j.nodeName.toLowerCase(),Xt)?n.setStyle(j,Xt,Gt):n.setAttrib(j,Xt,""+Gt)})}},U=(kt,Xt,Gt)=>{$(kt,"width",Xt),$(kt,"height",Gt)},W=kt=>{let Xt,Gt,I,j,G;Xt=kt.screenX-f,Gt=kt.screenY-h,C=Xt*c[2]+b,w=Gt*c[3]+g,C=C<5?5:C,w=w<5?5:w,I=(O(a)||T(a))&&!1!==xk(e)?!St.modifierPressed(kt):St.modifierPressed(kt),I&&(Bb(Xt)>Bb(Gt)?(w=Mc(C*v),C=Mc(w/v)):(C=Mc(w/v),w=Mc(C*v))),U(i,C,w),j=c.startPos.x+Xt,G=c.startPos.y+Gt,j=j>0?j:0,G=G>0?G:0,n.setStyles(l,{left:j,top:G,display:"block"}),l.innerHTML=C+" &times; "+w,c[2]<0&&i.clientWidth<=C&&n.setStyle(i,"left",void 0+(b-C)),c[3]<0&&i.clientHeight<=w&&n.setStyle(i,"top",void 0+(g-w)),Xt=s.scrollWidth-k,Gt=s.scrollHeight-A,Xt+Gt!==0&&n.setStyles(l,{left:j-Xt,top:G-Gt}),p||(e.dispatch("ObjectResizeStart",{target:a,width:b,height:g,origin:"corner-"+c.name}),p=!0)},H=()=>{const kt=p;p=!1,kt&&($(a,"width",C),$(a,"height",w)),n.unbind(r,"mousemove",W),n.unbind(r,"mouseup",H),o!==r&&(n.unbind(o,"mousemove",W),n.unbind(o,"mouseup",H)),n.remove(i),n.remove(l),n.remove(u),J(a),kt&&(e.dispatch("ObjectResized",{target:a,width:C,height:w,origin:"corner-"+c.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},J=kt=>{ae();const Xt=n.getPos(kt,s),Gt=Xt.x,I=Xt.y,j=kt.getBoundingClientRect(),G=j.width||j.right-j.left,et=j.height||j.bottom-j.top;a!==kt&&(mt(),a=kt,C=w=0);const Q=e.dispatch("ObjectSelected",{target:kt});M(kt)&&!Q.isDefaultPrevented()?we(cf,(rt,dt)=>{let bt=n.get("mceResizeHandle"+dt);bt&&n.remove(bt),bt=n.add(s,"div",{id:"mceResizeHandle"+dt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+dt+"-resize; margin:0; padding:0"}),n.bind(bt,"mousedown",Nt=>{Nt.stopImmediatePropagation(),Nt.preventDefault(),(Ft=>{const zt=L(a)[0];var ht;f=Ft.screenX,h=Ft.screenY,b=zt.clientWidth,g=zt.clientHeight,v=g/b,c=rt,c.name=dt,c.startPos={x:G*rt[0]+Gt,y:et*rt[1]+I},k=s.scrollWidth,A=s.scrollHeight,u=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=T(ht=a)?n.create("img",{src:me.transparentSrc}):ht.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:Gt,top:I,margin:0}),U(i,G,et),i.removeAttribute(el),s.appendChild(i),n.bind(r,"mousemove",W),n.bind(r,"mouseup",H),o!==r&&(n.bind(o,"mousemove",W),n.bind(o,"mouseup",H)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},b+" &times; "+g)})(Nt)}),rt.elm=bt,n.setStyles(bt,{left:G*rt[0]+Gt-bt.offsetWidth/2,top:et*rt[1]+I-bt.offsetHeight/2})}):mt(!1)},ut=hc(J,0),mt=(kt=!0)=>{ut.cancel(),ae(),a&&kt&&a.removeAttribute(el),we(cf,(Xt,Gt)=>{const I=n.get("mceResizeHandle"+Gt);I&&(n.unbind(I),n.remove(I))})},_t=(kt,Xt)=>n.isChildOf(kt,Xt),Lt=kt=>{if(p||e.removed||e.composing)return;const Xt="mousedown"===kt.type?kt.target:t.getNode(),Gt=zr(R(Xt),"table,img,figure.image,hr,video,span.mce-preview-object").map(j=>j.dom).filter(j=>n.isEditable(j.parentElement)).getOrUndefined(),I=pt(Gt)?n.getAttrib(Gt,el,"1"):"1";if(st(n.select("img[data-mce-selected],hr[data-mce-selected]"),j=>{j.removeAttribute(el)}),pt(Gt)&&_t(Gt,s)){ye();const j=t.getStart(!0);if(_t(j,Gt)&&_t(t.getEnd(!0),Gt))return n.setAttrib(Gt,el,I),void ut.throttle(Gt)}mt()},ae=()=>{we(cf,kt=>{kt.elm&&(n.unbind(kt.elm),delete kt.elm)})},ye=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{ye(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Lt),e.on("keyup compositionend",kt=>{a&&"TABLE"===a.nodeName&&Lt(kt)}),e.on("hide blur",mt),e.on("contextmenu longpress",P,!0)}),e.on("remove",ae),{isResizable:M,showResizeRect:J,hideResizeRect:mt,updateResizeRect:Lt,destroy:()=>{ut.cancel(),a=i=u=null}}},Pb=(t,e,n)=>{const r=t.document.createRange();var o,s;return o=r,e.fold(s=>{o.setStartBefore(s.dom)},(s,a)=>{o.setStart(s.dom,a)},s=>{o.setStartAfter(s.dom)}),s=r,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),r},df=(t,e,n,r,o)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(r.dom,o),s},nl=yo([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Mb=(t,e,n)=>e(R(n.startContainer),n.startOffset,R(n.endContainer),n.endOffset),Ib=(t,e,n,r)=>({start:t,soffset:e,finish:n,foffset:r}),ME=document.caretPositionFromPoint?(t,e,n)=>{var r,o;return N.from(null===(o=(r=t.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,n)).bind(s=>{if(null===s.offsetNode)return N.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),N.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var r,o;return N.from(null===(o=(r=t.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,e,n))}:N.none,uf=yo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Xo={before:uf.before,on:uf.on,after:uf.after,cata:(t,e,n,r)=>t.fold(e,n,r),getStart:t=>t.fold(de,de,de)},Ic=yo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ga={domRange:Ic.domRange,relative:Ic.relative,exact:Ic.exact,exactFromRange:t=>Ic.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:r=>R(r.startContainer),relative:(r,o)=>Xo.getStart(r),exact:(r,o,s,a)=>r});return Cr(e)},range:Ib},Fc=(t,e)=>{const n=Ee(t);return"input"===n?Xo.after(t):Tt(["br","img"],n)?0===e?Xo.before(t):Xo.after(t):Xo.on(t,e)},IE=(t,e)=>{const n=t.fold(Xo.before,Fc,Xo.after),r=e.fold(Xo.before,Fc,Xo.after);return Ga.relative(n,r)},Fb=(t,e,n,r)=>{const o=Fc(t,e),s=Fc(n,r);return Ga.relative(o,s)},ff=(t,e)=>{const n=(e||document).createDocumentFragment();return st(t,r=>{n.appendChild(r.dom)}),R(n)},jb=(t,e,n)=>{return(r=Cr(R(n)).dom,o=t,s=e,((a,i,l)=>{const c=R(a.document);return ME(c,i,l).map(u=>Ib(R(u.startContainer),u.startOffset,R(u.endContainer),u.endOffset))})(r,o,s)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,s},mf=(t,e)=>pt(t)&&pt(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,zb=(t,e,n)=>null!==((r,o,s)=>{let a=r;for(;a&&a!==o;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),jE=(t,e,n)=>zb(t,e,r=>r.nodeName===n),zE=(t,e)=>Sr(t)&&!zb(t,e,Ur),Hb=(t,e,n)=>{const r=e.parentNode;if(r){const o=new Ze(e,t.getParent(r,t.isBlock)||t.getRoot());let s;for(;s=o[n?"prev":"next"]();)if(ze(s))return!0}return!1},pf=(t,e,n,r,o)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=o.parentNode;let l,c;if(!i)return N.none();const u=t.getParent(i,t.isBlock)||s;if(r&&ze(o)&&e&&t.isEmpty(u))return N.some(X(i,t.nodeIndex(o)));const f=new Ze(o,u);for(;c=f[r?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||zE(c,s))return N.none();if(at(c)&&c.data.length>0)return jE(c,s,"A")?N.none():N.some(X(c,r?c.data.length:0));if(t.isBlock(c)||a[c.nodeName.toLowerCase()])return N.none();l=c}return us(l)?N.none():n&&l?N.some(X(l,0)):N.none()},Ub=(t,e,n,r)=>{const o=t.getRoot();let s,a=!1,i=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const c=vt(i)&&l===i.childNodes.length,u=t.schema.getNonEmptyElements();let f=n;if(Sr(i))return N.none();if(vt(i)&&l>i.childNodes.length-1&&(f=!1),Ai(i)&&(i=o,l=0),i===o){if(f&&(s=i.childNodes[l>0?l-1:0],s)&&(Sr(s)||u[s.nodeName]||Wo(s)))return N.none();if(i.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=at(i)&&c?i.data.length:0,!e&&i===o.lastChild&&Wo(i)||((h,b)=>{let g=b;for(;g&&g!==h;){if(Ne(g))return!0;g=g.parentNode}return!1})(o,i)||Sr(i))return N.none();if(i.hasChildNodes()&&!Wo(i)){s=i;const h=new Ze(i,o);do{if(Ne(s)||Sr(s)){a=!1;break}if(at(s)&&s.data.length>0){l=f?0:s.data.length,i=s,a=!0;break}if(u[s.nodeName.toLowerCase()]&&!iS(s)){l=t.nodeIndex(s),i=s.parentNode,f||l++,a=!0;break}}while(s=f?h.next():h.prev())}}}return e&&(at(i)&&0===l&&pf(t,c,e,!0,i).each(h=>{i=h.container(),l=h.offset(),a=!0}),vt(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!ze(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||Hb(t,s,!1)||Hb(t,s,!0)||pf(t,c,e,!0,s).each(h=>{i=h.container(),l=h.offset(),a=!0}))),f&&!e&&at(i)&&l===i.data.length&&pf(t,c,e,!1,i).each(h=>{i=h.container(),l=h.offset(),a=!0}),a&&i?N.some(X(i,l)):N.none();var g},jc=(t,e)=>{const n=e.collapsed,r=e.cloneRange(),o=X.fromRangeStart(e);return Ub(t,n,!0,r).each(s=>{n&&X.isAbove(o,s)||r.setStart(s.container(),s.offset())}),n||Ub(t,n,!1,r).each(s=>{r.setEnd(s.container(),s.offset())}),n&&r.collapse(!0),mf(e,r)?N.none():N.some(r)},zc=(t,e)=>t.splitText(e),Hc=t=>{let e=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset;if(e===r&&at(e)){if(n>0&&n<e.data.length)if(r=zc(e,n),e=r.previousSibling,o>n){o-=n;const s=zc(r,o).previousSibling;e=r=s,o=s.data.length,n=0}else o=0}else if(at(e)&&n>0&&n<e.data.length&&(e=zc(e,n),n=0),at(r)&&o>0&&o<r.data.length){const s=zc(r,o).previousSibling;r=s,o=s.data.length}return{startContainer:e,startOffset:n,endContainer:r,endOffset:o}},la=t=>({walk:(e,n)=>Zi(t,e,n),split:Hc,expand:(e,n={type:"word"})=>{if("word"===n.type){const r=ia(t,e,[{inline:"span"}]),o=t.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return e},normalize:e=>jc(t,e).fold(Ce,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});la.compareRanges=mf,la.getCaretRangeFromPoint=jb,la.getSelectedNode=bc,la.getNode=bs;const HE=((t,e)=>{const n=o=>{const s=(a=>{const i=a.dom;return xr(a)?i.getBoundingClientRect().height:i.offsetHeight})(o);if(s<=0||null===s){const a=dr(o,t);return parseFloat(a)||0}return s},r=(o,s)=>gn(s,(a,i)=>{const l=dr(o,i),c=void 0===l?0:parseInt(l,10);return isNaN(c)?a:a+c},0);return{set:(o,s)=>{if(!x(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=o.dom;$o(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:r,max:(o,s,a)=>{const i=r(o,a);return s>i?s-i:0}}})("height"),qb=()=>R(document),$b=(t,e)=>t.view(e).fold(ft([]),n=>{const r=t.owner(n),o=$b(t,r);return[n].concat(o)});var UE=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?N.none():N.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(R)},owner:t=>ue(t)});const gf=t=>"textarea"===Ee(t),Wb=(t,e)=>{const n=(o=>{const s=o.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===o.dom)return un(a.offsetLeft,a.offsetTop);const c=Vn(i?.pageYOffset,l.scrollTop),u=Vn(i?.pageXOffset,l.scrollLeft),f=Vn(l.clientTop,a.clientTop),h=Vn(l.clientLeft,a.clientLeft);return _e(o).translate(u-h,c-f)})(t),r=HE.get(t);return{element:t,bottom:n.top+r,height:r,pos:n,cleanup:e}},Vb=(t,e,n,r)=>{$E(t,(o,s)=>qE(t,e,n,r),n)},Kb=(t,e,n,r,o)=>{const s={elm:r.element.dom,alignToTop:o};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(e,to(e).top,r,o),t.dispatch("AfterScrollIntoView",s))},qE=(t,e,n,r)=>{R(t.getBody());const s=R(t.getDoc()),a=((i,l)=>{const c=((f,h)=>{const b=Re(f);if(0===b.length||gf(f))return{element:f,offset:h};if(h<b.length&&!gf(b[h]))return{element:b[h],offset:0};{const g=b[b.length-1];return gf(g)?{element:f,offset:h}:"img"===Ee(g)?{element:g,offset:1}:Tn(g)?{element:g,offset:nc(g).length}:{element:g,offset:Re(g).length}}})(i,l),u=Z('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return nt(c.element,u),Wb(u,()=>Bt(u))})(R(n.startContainer),n.startOffset);Kb(t,s,e,a,r),a.cleanup()},Xb=(t,e,n,r)=>{const o=R(t.getDoc());Kb(t,o,n,Wb(R(e),Et),r)},$E=(t,e,n)=>{const r=n.startContainer,o=n.startOffset,s=n.endContainer,a=n.endOffset;e(R(r),R(s));const i=t.dom.createRng();i.setStart(r,o),i.setEnd(s,a),t.selection.setRng(n)},hf=(t,e)=>t.element.dom.scrollIntoView({block:e?"start":"end"}),Gb=(t,e,n,r)=>{const o=e+t,s=n.pos.top,a=n.bottom,i=a-s>=e;s<t?hf(n,!1!==r):s>o?hf(n,i?!1!==r:!0===r):a>o&&!i&&hf(n,!0===r)},Yb=(t,e,n,r)=>{const o=Cr(t).dom.innerHeight;Gb(e,o,n,r)},Qb=(t,e,n,r)=>{const o=Cr(t).dom.innerHeight;Gb(e,o,n,r);const s=(i=>{const l=qb(),c=to(l),u=((b,g)=>{const v=g.owner(b);return $b(g,v)})(i,UE),f=_e(i),h=Po(u,(b,g)=>{const v=_e(g);return{left:b.left+v.left,top:b.top+v.top}},{left:0,top:0});return un(h.left+f.left+c.left,h.top+f.top+c.top)})(n.element),a=Ni(window);s.top<a.y?ur(n.element,!1!==r):s.top>a.bottom&&ur(n.element,!0===r)},WE=(t,e,n)=>Vb(t,Yb,e,n),VE=(t,e,n)=>Xb(t,e,Yb,n),KE=(t,e,n)=>Vb(t,Qb,e,n),XE=(t,e,n)=>Xb(t,e,Qb,n),rl=(t,e,n)=>{(t.inline?WE:KE)(t,e,n)},Jb=t=>t.dom.focus(),Zb=t=>{const e=Vt(t).dom;return t.dom===e.activeElement},bf=(t=qb())=>N.from(t.dom.activeElement).map(R),t0=(t,e)=>{const n=Tn(e)?nc(e).length:Re(e).length+1;return t>n?n:t<0?0:t},GE=t=>Ga.range(t.start,t0(t.soffset,t.start),t.finish,t0(t.foffset,t.finish)),e0=(t,e)=>!Zl(e.dom)&&(cn(t,e)||ne(t,e)),n0=t=>e=>e0(t,e.start)&&e0(t,e.finish),YE=t=>Ga.range(R(t.startContainer),t.startOffset,R(t.endContainer),t.endOffset),QE=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),N.some(e)}catch{return N.none()}},vf=t=>{const e=t.inline||me.browser.isFirefox()?(n=R(t.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?N.from(o.getRangeAt(0)):N.none()).map(YE)})(Cr(n).dom).filter(n0(n))):N.none();var n;t.bookmark=e.isSome()?e:t.bookmark},yf=t=>(t.bookmark?t.bookmark:N.none()).bind(e=>{return n=R(t.getBody()),N.from(e).filter(n0(n)).map(GE);var n}).bind(QE),r0={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Ar={setEditorTimeout:(t,e,n)=>{return x(o=n)||(o=0),setTimeout(()=>{t.removed||e()},o);var o},setEditorInterval:(t,e,n)=>{const r=(x(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(r):e()},s));var s;return r}};let Ya;const Cf=xe.DOM,xf=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Uc=(t,e)=>{const n=Tk(t);return null!==Cf.getParent(e,o=>{return vt(s=o)&&r0.isEditorUIElement(s)||!!n&&t.dom.is(o,n);var s})},wf=t=>{try{const e=Vt(R(t.getElement()));return bf(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},JE=(t,e)=>{const n=e.editor;(o=>{const s=hc(()=>{vf(o)},0);o.on("init",()=>{var a,c;o.inline&&((a,i)=>{const l=()=>{i.throttle()};xe.DOM.bind(document,"mouseup",l),a.on("remove",()=>{xe.DOM.unbind(document,"mouseup",l)})})(o,s),c=s,(a=o).on("mouseup touchend",u=>{c.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||vf(a)})}),o.on("remove",()=>{s.cancel()})})(n);const r=(o,s)=>{cE(o)&&!0!==o.inline&&s(R(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=t.focusedEditor;xf(wf(n))&&r(n,_),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Ar.setEditorTimeout(n,()=>{const o=t.focusedEditor;xf(wf(n))&&o===n||r(n,z),Uc(n,wf(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Ya||(Ya=o=>{const s=t.activeEditor;s&&Te(o).each(a=>{a.ownerDocument===document&&(a===document.body||Uc(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Cf.bind(document,"focusin",Ya))},ZE=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&Ya&&(Cf.unbind(document,"focusin",Ya),Ya=null)},o0=(t,e)=>{var n,r,o;(n=R(t.getBody()),r=e,(o=r,o.collapsed?N.from(bs(o.startContainer,o.startOffset)).map(R):N.none()).bind(o=>dS(o)?N.some(o):cn(n,o)?N.none():N.some(n))).bind(n=>Xn(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Sf=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},ca=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(r=R(n),Zb(r)||(o=r,bf(Vt(o)).filter(s=>o.dom.contains(s.dom))).isSome());var r,o})(t):pt((e=t).iframeElement)&&Zb(R(e.iframeElement));var e},kf=t=>t.editorManager.setActive(t),s0=(t,e,n,r,o)=>{const a=n?e.startOffset:e.endOffset;return N.from(n?e.startContainer:e.endContainer).map(R).map(i=>r&&e.collapsed?i:Qr(i,o(i,a)).getOr(i)).bind(i=>Sn(i)?N.some(i):fe(i).filter(Sn)).map(i=>i.dom).getOr(t)},a0=(t,e,n=!1)=>s0(t,e,!0,n,(r,o)=>Math.min(Xe(r),o)),i0=(t,e,n=!1)=>s0(t,e,!1,n,(r,o)=>o>0?o-1:o),l0=(t,e)=>{const n=t;for(;t&&at(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Ef=(t,e)=>oe(e,n=>{const r=t.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),tN=["img","br"],c0=t=>{return eg(t).filter(n=>0!==n.trim().length||n.indexOf(mn)>-1).isSome()||Tt(tN,Ee(t))||Sn(r=n=t)&&(t=>{const e=Xl("ownerDocument.defaultView",t);return Ut(t)&&((n=e,((r,o)=>{const s=Xl(r,o);if(null==s)throw new Error(r+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Zd(t).constructor.name));var n})(r.dom)&&"false"===qn(n,"contenteditable");var n,r},d0="[data-mce-autocompleter]",u0=t=>cs(t,d0),nN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},qc=(t,e,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(t[r])return t[r];if(t!==e){let s=t[o];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[o],s)return s}},rN=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Xs(n))return!1;const r=t.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},f0=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Gn{constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}static create(e,n){const r=new Gn(e,nN[e]||1);return n&&we(n,(o,s)=>{r.attr(s,o)}),r}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const r=this;if(!Rt(e))return pt(e)&&we(e,(s,a)=>{r.attr(a,s)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(e in o.map){delete o.map[e];let s=o.length;for(;s--;)if(o[s].name===e)return o.splice(s,1),r}return r}if(e in o.map){let s=o.length;for(;s--;)if(o[s].name===e){o[s].value=n;break}}else o.push({name:e,value:n});return o.map[e]=n,r}return o.map[e]}}clone(){const e=this,n=new Gn(e.name,e.type),r=e.attributes;if(r){const o=[];o.map={};for(let s=0,a=r.length;s<a;s++){const i=r[s];"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const r=n.next;e.insert(n,e,!0),n=r}e.remove()}remove(){const e=this,n=e.parent,r=e.next,o=e.prev;return n&&(n.firstChild===e?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===e?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const r=n.lastChild;return r?(r.next=e,e.prev=r,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,r){e.parent&&e.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===o.lastChild?o.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=o,e}getAll(e){const n=this,r=[];for(let o=n.firstChild;o;o=qc(o,n))o.name===e&&r.push(o);return r}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let o=e.firstChild;o;o=qc(o,e))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},r){var o;const s=this;let a=s.firstChild;if(f0(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||f0(a))return!1}if(8===a.type||3===a.type&&!rN(a)||3===a.type&&a.parent&&n[a.parent.name]&&Xs(null!==(o=a.value)&&void 0!==o?o:"")||r&&r(a))return!1}while(a=qc(a,s));return!0}walk(e){return qc(this,null,e)}}const m0=(t,e,n=0)=>{const r=t.toLowerCase();if(-1!==r.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(r.substr(n))){const o=r.indexOf("[endif]",n);return r.indexOf(">",o)}if(e){const o=r.indexOf(">",n);return-1!==o?o:r.length}{const o=/--!?>/g;o.lastIndex=n;const s=o.exec(t);return s?s.index+s[0].length:r.length}},oN=(t,e,n)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,s=t.getVoidElements();let a=1,i=n;for(;0!==a;)for(r.lastIndex=i;;){const l=r.exec(e);if(null===l)return i;if("!"===l[1]){i=Qe(l[2],"--")?m0(e,!1,l.index+3):m0(e,!0,l.index+1);break}{o.lastIndex=r.lastIndex;const c=o.exec(e);if(Zt(c)||c.index!==r.lastIndex)continue;"/"===l[1]?a-=1:ee(s,l[2])||(a+=1),i=r.lastIndex+c[0].length;break}}return i},p0=(t,e)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=t.schema;let o=((i,l)=>{const c=new RegExp(["\\s?("+i.join("|")+')="[^"]+"'].join("|"),"gi");return l.replace(c,"")})(t.getTempAttrs(),e);const s=r.getVoidElements();let a;for(;a=n.exec(o);){const i=n.lastIndex,l=a[0].length;let c;c=s[a[1]]?i:oN(r,o,i),o=o.substring(0,i-l)+o.substring(c),n.lastIndex=i-l}return Vo(o)},sN=p0,g0=t=>{const e=fn(t,"[data-mce-bogus]");st(e,n=>{"all"===qn(n,"data-mce-bogus")?Bt(n):Vs(n)?(nt(n,Y("\ufeff")),Bt(n)):se(n)})},h0=t=>{const e=fn(t,"input");st(e,n=>{nn(n,"name")})},b0=ct.makeMap,v0=t=>{const e=[],n=(t=t||{}).indent,r=b0(t.indent_before||""),o=b0(t.indent_after||""),s=ps.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,c)=>{if(n&&r[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}if(e.push("<",i),l)for(let u=0,f=l.length;u<f;u++){const h=l[u];e.push(" ",h.name,'="',s(h.value,!0),'"')}if(e[e.length]=!c||a?">":" />",c&&n&&o[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&o[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},xs=(t={},e=gs())=>{const n=v0(t);return t.validate=!("validate"in t)||t.validate,{serialize:r=>{const o=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const u=i.name,f=u in e.getVoidElements();let h=i.attributes;if(o&&h&&h.length>1){const b=[];b.map={};const g=e.getElementRule(i.name);if(g){for(let v=0,p=g.attributesOrder.length;v<p;v++){const C=g.attributesOrder[v];if(C in h.map){const w=h.map[C];b.map[C]=w,b.push({name:C,value:w})}}for(let v=0,p=h.length;v<p;v++){const C=h[v].name;if(!(C in b.map)){const w=h.map[C];b.map[C]=w,b.push({name:C,value:w})}}h=b}}if(n.start(u,h,f),!f){let b=i.firstChild;if(b){"pre"!==u&&"textarea"!==u||3!==b.type||"\n"!==(null===(l=b.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(b)}while(b=b.next)}n.end(u)}}};return 1!==r.type||t.inner?3===r.type?s[3](r):s[11](r):a(r),n.getContent()}}},y0=new Set;st(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{y0.add(t)});const C0=["font","text-decoration","text-emphasis"],Nf=(t,e)=>Ye(t.parseStyle(t.getAttrib(e,"style"))),iN=(t,e,n)=>{const r=Nf(t,e),o=Nf(t,n),s=a=>{var i,l;const c=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",u=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return zn(c)&&zn(u)&&c!==u};return ke(r,a=>{const i=l=>ke(l,c=>c===a);if(!i(o)&&i(C0)){const l=qt(o,c=>ke(C0,u=>Qe(c,u)));return ke(l,s)}return s(a)})},x0=(t,e,n)=>N.from(n.container()).filter(at).exists(r=>{const o=t?0:-1;return e(r.data.charAt(n.offset()+o))}),_f=yt(x0,!0,Wa),Af=yt(x0,!1,Wa),lN=t=>{const e=t.container();return at(e)&&(0===e.data.length||ac(e.data)&&tl.isBookmarkNode(e.parentNode))},ws=(t,e)=>n=>Hu(t?0:-1,n).filter(e).isSome(),w0=t=>Zp(t)&&"block"===dr(R(t),"display"),S0=t=>{return Ne(t)&&!(vt(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},cN=ws(!0,w0),dN=ws(!1,w0),ol=ws(!0,vo),sl=ws(!1,vo),k0=ws(!0,Wo),E0=ws(!1,Wo),Ss=ws(!0,S0),ks=ws(!1,S0),N0=(t,e)=>{return o=Ce,cn(r=e,n=t)?is(n,s=>o(s)||ne(s,r)).slice(0,-1):[];var n,r,o},Go=(t,e)=>[t].concat(N0(t,e)),Rf=(t,e,n)=>Jh(t,e,n,lN),_0=(t,e)=>Ue(Go(R(e.container()),t),wr),A0=(t,e,n)=>Rf(t,e.dom,n).forall(r=>_0(e,n).fold(()=>!Co(r,n,e.dom),o=>!Co(r,n,e.dom)&&cn(o,R(r.container())))),R0=(t,e,n)=>_0(e,n).fold(()=>Rf(t,e.dom,n).forall(r=>!Co(r,n,e.dom)),r=>Rf(t,r.dom,n).isNone()),Tf=yt(R0,!1),T0=yt(R0,!0),uN=yt(A0,!1),fN=yt(A0,!0),mN=t=>kc(t).exists(Vs),$c=(t,e,n)=>{const r=qt(Go(R(n.container()),e),wr),o=wn(r).getOr(e);return kr(t,o.dom,n).filter(mN)},Of=(t,e)=>kc(e).exists(Vs)||$c(!0,t,e).isSome(),Df=(t,e)=>{return(n=e,N.from(n.getNode(!0)).map(R)).exists(Vs)||$c(!1,t,e).isSome();var n},pN=yt($c,!1),gN=yt($c,!0),O0=t=>X.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),D0=(t,e)=>{const n=qt(Go(R(e.container()),t),wr);return wn(n).getOr(t)},B0=(t,e)=>O0(e)?Af(e):Af(e)||Er(D0(t,e).dom,e).exists(Af),L0=(t,e)=>O0(e)?_f(e):_f(e)||tr(D0(t,e).dom,e).exists(_f),Bf=t=>kc(t).bind(e=>Zr(e,Sn)).exists(e=>{return n=dr(e,"white-space"),Tt(["pre","pre-wrap"],n);var n}),P0=(t,e)=>n=>{return r=new Ze(n,t)[e](),pt(r)&&Ne(r)&&jh(r);var r},al=(t,e)=>!Bf(e)&&(Tf(t,e)||uN(t,e)||Df(t,e)||B0(t,e)||((n,r)=>{const o=Er(n.dom,r).getOr(r),s=P0(n.dom,"prev");return r.isAtStart()&&(s(r.container())||s(o.container()))})(t,e)),il=(t,e)=>!Bf(e)&&(T0(t,e)||fN(t,e)||Of(t,e)||L0(t,e)||((n,r)=>{const o=tr(n.dom,r).getOr(r),s=P0(n.dom,"next");return r.isAtEnd()&&(s(r.container())||s(o.container()))})(t,e)),Lf=(t,e)=>al(t,e)||il(t,(n=>{const r=n.container(),o=n.offset();return at(r)&&o<r.data.length?X(r,o+1):n})(e)),M0=(t,e)=>Rc(t.charAt(e)),I0=(t,e)=>Wa(t.charAt(e)),F0=(t,e,n)=>{const r=e.data,o=X(e,0);return n||!M0(r,0)||Lf(t,o)?!!(n&&I0(r,0)&&al(t,o))&&(e.data=mn+r.slice(1),!0):(e.data=" "+r.slice(1),!0)},j0=(t,e,n)=>{const r=e.data,o=X(e,r.length-1);return n||!M0(r,r.length-1)||Lf(t,o)?!!(n&&I0(r,r.length-1)&&il(t,o))&&(e.data=r.slice(0,-1)+mn,!0):(e.data=r.slice(0,-1)+" ",!0)},z0=(t,e,n)=>{if(0===n)return;const r=R(t),o=Dn(r,wr).getOr(r),s=t.data.slice(e,e+n),a=e+n>=t.data.length&&il(o,X(t,t.data.length)),i=0===e&&al(o,X(t,0));t.replaceData(e,n,cg(s,4,i,a))},Wc=(t,e)=>{const n=t.data.slice(e),r=n.length-zl(n).length;z0(t,e,r)},Pf=(t,e)=>{const n=t.data.slice(0,e),r=n.length-Hl(n).length;z0(t,e-r,r)},Mf=(t,e,n,r=!0)=>{const o=Hl(t.data).length,s=r?t:e,a=r?e:t;return r?s.appendData(a.data):s.insertData(0,a.data),Bt(R(a)),n&&Wc(s,o),s},bN=(t,e)=>((n,r)=>{const o=n.container(),s=n.offset();return!X.isTextPosition(n)&&o===r.parentNode&&s>X.before(r).offset()})(e,t)?X(e.container(),e.offset()-1):e,H0=t=>{return Hr(t.previousSibling)?N.some(at(e=t.previousSibling)?X(e,e.data.length):X.after(e)):t.previousSibling?So(t.previousSibling):N.none();var e},U0=t=>{return Hr(t.nextSibling)?N.some(at(e=t.nextSibling)?X(e,0):X.before(e)):t.nextSibling?Xn(t.nextSibling):N.none();var e},q0=(t,e,n)=>{n.fold(()=>{t.focus()},r=>{t.selection.setRng(r.toRange(),e)})},yN=(t,e)=>e&&ee(t.schema.getBlockElements(),Ee(e)),CN=t=>{if(We(t)){const e=Z('<br data-mce-bogus="1">');return ge(t),Ct(t,e),N.some(X.before(e.dom))}return N.none()},da=(t,e,n,r=!0)=>{const o=((t,e,n)=>{return(r=t,o=e,s=n,r?(a=o,U0(i=s).orThunk(()=>H0(i)).orThunk(()=>{return tr(l=a,X.after(c=i)).orThunk(()=>Er(l,X.before(c)));var l,c})):((a,i)=>H0(i).orThunk(()=>U0(i)).orThunk(()=>{return l=a,N.from((c=i).previousSibling?c.previousSibling:c.parentNode).bind(u=>Er(l,X.before(u))).orThunk(()=>tr(l,X.after(c)));var l,c}))(o,s)).map(yt(bN,n));var r,o,s,a,i})(e,t.getBody(),n.dom),s=Dn(n,yt(yN,t),(a=t.getBody(),l=>l.dom===a));var a;const i=((l,c,u)=>{const f=Yr(l).filter(Tn),h=$n(l).filter(Tn);return Bt(l),(b=f,g=h,v=c,p=(C,w,k)=>{const A=C.dom,O=w.dom,T=A.data.length;return Mf(A,O,u),k.container()===O?X(A,T):k},b.isSome()&&g.isSome()&&v.isSome()?N.some(p(b.getOrDie(),g.getOrDie(),v.getOrDie())):N.none()).orThunk(()=>(u&&(f.each(C=>Pf(C.dom,C.dom.length)),h.each(C=>Wc(C.dom,0))),c));var b,g,v,p})(n,o,(c=n,ee(t.schema.getTextInlineElements(),Ee(c))));var c;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(CN).fold(()=>{r&&q0(t,e,i)},l=>{r&&q0(t,e,N.some(l))})},xN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ua=(t,e)=>Qt(R(e),Ck(t))&&!Gs(t.schema,e)&&t.dom.isEditable(e),Es=(t,e,n)=>{const r=(o=t,s=e,qt(xe.DOM.getParents(n.container(),"*",s),o));var o,s;return N.from(r[r.length-1])},Rr=(t,e)=>{const n=e.container(),r=e.offset();return t?ms(n)?at(n.nextSibling)?X(n.nextSibling,0):X.after(n):au(e)?X(n,r+1):e:ms(n)?at(n.previousSibling)?X(n.previousSibling,n.previousSibling.data.length):X.before(n):iu(e)?X(n,r-1):e},$0=yt(Rr,!0),W0=yt(Rr,!1),V0=(t,e)=>{const n=r=>r.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},If=t=>V0(t,"Delete"),wN=t=>ng(t)||Ti(t),Vc=(t,e)=>{return cn(t,e)?Zr(e,wN,(n=t,r=>ss(fe(r),n,ne))):N.none();var n},Ff=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},K0=t=>{var e;return(8===ki(e=t)||"#comment"===Ee(e)?Yr(t):Je(t)).bind(K0).orThunk(()=>N.some(t))},X0=(t,e,n,r=!0)=>{var o;e.deleteContents();const s=K0(n).getOr(n),a=R(null!==(o=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==o?o:n.dom);if(a.dom===t.getBody()?Ff(t,r):We(a)&&(Ks(a),r&&t.selection.setCursorLocation(a.dom,0)),!ne(n,a)){const l=ss(fe(a),n)?[]:fe(i=a).map(Re).map(c=>qt(c,u=>!ne(i,u))).getOr([]);st(l.concat(Re(n)),c=>{ne(c,a)||cn(c,a)||!We(c)||Bt(c)})}var i},jf=t=>fn(t,"td,th"),zf=(t,e)=>({start:t,end:e}),ll=yo([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Kc=(t,e)=>zr(R(t),"td,th",e),G0=t=>!ne(t.start,t.end),Y0=(t,e)=>Ji(t.start,e).bind(n=>Ji(t.end,e).bind(r=>js(ne(n,r),n))),Hf=t=>e=>Y0(e,t).map(n=>({rng:e,table:n,cells:jf(n)})),Q0=(t,e,n,r)=>{if(n.collapsed||!t.forall(G0))return N.none();if(e.isSameTable){const o=t.bind(Hf(r));return N.some({start:o,end:o})}{const o=Kc(n.startContainer,r),s=Kc(n.endContainer,r),a=o.bind((l=r,c=>Ji(c,l).bind(u=>ho(jf(u)).map(f=>zf(c,f))))).bind(Hf(r)),i=s.bind((l=>c=>Ji(c,l).bind(u=>wn(jf(u)).map(f=>zf(f,c))))(r)).bind(Hf(r));return N.some({start:a,end:i})}var l},J0=(t,e)=>Ds(t,n=>ne(n,e)),Uf=t=>ln(J0(t.cells,t.rng.start),J0(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),Z0=(t,e)=>{const{startTable:n,endTable:r}=e,o=t.cloneRange();return n.each(s=>o.setStartAfter(s.dom)),r.each(s=>o.setEndBefore(s.dom)),o},tv=t=>st(t,e=>{nn(e,"contenteditable"),Ks(e)}),qf=(t,e,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(e.dom.lastChild)):(o.setStartBefore(e.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),$f(t,o,e,!1).each(s=>s())},ev=t=>{const e=Va(t),n=R(t.selection.getNode());ec(n.dom)&&We(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&ke(e,r=>ne(r,n))&&Le(n,"data-mce-selected","1")},nv=(t,e,n)=>N.some(()=>{const r=t.selection.getRng(),o=n.bind(({rng:s,isStartInTable:a})=>{const i=N.from((c=t).dom.getParent(a?s.endContainer:s.startContainer,c.dom.isBlock)).map(R);var c;s.deleteContents(),((c,u,f)=>{f.each(h=>{u?Bt(h):(Ks(h),c.selection.setCursorLocation(h.dom,0))})})(t,a,i.filter(We));const l=a?e[0]:e[e.length-1];return qf(t,l,r,a),We(l)?N.none():N.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);tv(o),ev(t)}),kN=(t,e,n,r)=>N.some(()=>{const o=t.selection.getRng(),s=e[0],a=n[n.length-1];qf(t,s,o,!0),qf(t,a,o,!1);const i=We(s)?e:e.slice(1),l=We(a)?n:n.slice(0,-1);tv(i.concat(l)),r.deleteContents(),ev(t)}),$f=(t,e,n,r=!0)=>N.some(()=>{X0(t,e,n,r)}),EN=(t,e)=>N.some(()=>da(t,!1,e)),rv=(t,e)=>Ue(Go(e,t),Oi),Wf=(t,e)=>Ue(Go(e,t),zs("caption")),Xc=(t,e)=>N.some(()=>{Ks(e),t.selection.setCursorLocation(e.dom,0)}),ov=(t,e)=>t?k0(e):E0(e),Vf=(t,e)=>{const n=R(t.selection.getStart(!0)),r=Va(t);return t.selection.isCollapsed()&&0===r.length?((t,e,n)=>{const r=R(t.getBody());return Wf(r,n).fold(()=>((o,s,a,i)=>{const l=X.fromRangeStart(o.selection.getRng());return rv(a,i).bind(c=>{return We(c)?Xc(o,c):(f=a,b=c,g=l,_c(s,o.getBody(),g).bind(v=>rv(f,R(v.getNode())).bind(p=>ne(p,b)?N.none():N.some(Et))));var f,b,g})})(t,e,r,n).orThunk(()=>js(((o,s)=>{const a=X.fromRangeStart(o.selection.getRng());return ov(s,a)||kr(s,o.getBody(),a).exists(i=>ov(s,i))})(t,e),Et)),o=>((s,a,i,l)=>{const c=X.fromRangeStart(s.selection.getRng());return We(l)?Xc(s,l):(f=i,b=l,g=c,_c(h=a,(u=s).getBody(),g).fold(()=>N.some(Et),v=>{return C=h,w=g,k=v,Xn((p=b).dom).bind(A=>So(p.dom).map(O=>C?w.isEqual(A)&&k.isEqual(O):w.isEqual(O)&&k.isEqual(A))).getOr(!0)?((p,C)=>Xc(p,C))(u,b):((p,C,w)=>Wf(p,R(w.getNode())).fold(()=>N.some(Et),k=>js(!ne(k,C),Et)))(f,b,v);var p,C,w,k}));var u,f,h,b,g})(t,e,r,o))})(t,e,n):((o,s,a)=>{const i=R(o.getBody()),l=o.selection.getRng();return 0!==a.length?nv(o,a,N.none()):(c=o,f=l,Wf(u=i,s).fold(()=>{return b=c,((t,e)=>{const n=(s=t,a=>ne(s,a)),r=((s,a)=>{const i=Kc(s.startContainer,a),l=Kc(s.endContainer,a);return ln(i,l,zf)})(e,n),o=((s,a)=>{const i=b=>Ji(R(b),a),l=i(s.startContainer),c=i(s.endContainer),u=l.isSome(),f=c.isSome(),h=ln(l,c,ne).getOr(!1);return{startTable:l,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:h,isMultiTable:!h&&u&&f}})(e,n);var s;return((s,a,i)=>s.exists(l=>{return u=i,!G0(c=l)&&Y0(c,u).exists(f=>{const h=f.dom.rows;return 1===h.length&&1===h[0].cells.length})&&Ju(l.start,a);var c,u}))(r,e,n)?r.map(s=>ll.singleCellTable(e,s.start)):o.isMultiTable?((s,a,i,l)=>Q0(s,a,i,l).bind(({start:c,end:u})=>{const f=c.bind(Uf).getOr([]),h=u.bind(Uf).getOr([]);if(f.length>0&&h.length>0){const b=Z0(i,a);return N.some(ll.multiTable(f,h,b))}return N.none()}))(r,o,e,n):((s,a,i,l)=>Q0(s,a,i,l).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=a,f=Uf(c).getOr([]);if(u&&c.cells.length===f.length)return N.some(ll.fullTable(c.table));if(f.length>0){if(u)return N.some(ll.partialTable(f,N.none()));{const h=Z0(i,a);return N.some(ll.partialTable(f,N.some({...a,rng:h})))}}return N.none()}))(r,o,e,n)})(u,f).bind(p=>p.fold(yt($f,b),yt(EN,b),yt(nv,b),yt(kN,b)));var b},b=>Xc(c,b)));var c,u,f})(t,n,r)},fa=(t,e)=>{let n=e;for(;n&&n!==t;){if(no(n)||Ne(n))return n;n=n.parentNode}return null},_N=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],AN=ct.each,Kf=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),r=o=>ke(_N,s=>Qe(o,s))||n.has(o);return{compare:(o,s)=>{if(o.nodeName!==s.nodeName||o.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return AN(e.getAttribs(l),u=>{const f=u.nodeName.toLowerCase();"style"===f||r(f)||(c[f]=e.getAttrib(l,f))}),c},i=(l,c)=>{for(const u in l)if(ee(l,u)){const f=c[u];if(Be(f)||l[u]!==f)return!1;delete c[u]}for(const u in c)if(ee(c,u))return!1;return!0};return!(vt(o)&&vt(s)&&(!i(a(o),a(s))||!i(e.parseStyle(e.getAttrib(o,"style")),e.parseStyle(e.getAttrib(s,"style"))))||Nr(o)||Nr(s))},isAttributeInternal:r}},sv=(t,e,n,r)=>{const o=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const c=r.attributes[l];c?c.nodes.push(n):r.attributes[l]={filter:i,nodes:[n]}}}},av=(t,e)=>{const n=(r,o)=>{we(r,s=>{const a=an(s.nodes);st(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(o?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!be(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},iv=(t,e,n,r={})=>{const o=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((c,u)=>{let f=c;for(;f=f.walk();)sv(s,a,f,l)})(i),l})(t,e,n);av(o,r)},Xf=(t,e,n)=>{if(t.insert&&e(n)){const r=new Gn("br",1);r.attr("data-mce-bogus","1"),n.empty().append(r)}else n.empty().append(new Gn("#text",3)).value=mn},lv=(t,e)=>{const n=t?.firstChild;return pt(n)&&n===t.lastChild&&n.name===e},cl=(t,e,n,r)=>r.isEmpty(e,n,o=>((s,a)=>{const i=s.getElementRule(a.name);return!0===i?.paddEmpty})(t,o)),RN=t=>{let e;for(let n=t;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(e=n)}return N.from(e)},Gf=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const r=t.children();for(const o of r)n&&!e.isValidChild(n.name,o.name)&&Gf(o,e,n);t.unwrap()}},Yf=(t,e,n,r=Et)=>{const o=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=ct.makeMap("tr,td,th,tbody,thead,tfoot,table"),l=new Set,c=u=>u!==n&&!i[u.name];for(let u=0;u<t.length;u++){const f=t[u];let h,b,g;if(!f.parent||l.has(f))continue;if(o[f.name]&&"li"===f.parent.name){let p=f.next;for(;p&&o[p.name];)p.name="li",l.add(p),f.parent.insert(p,f.parent),p=p.next;f.unwrap();continue}const v=[f];for(h=f.parent;h&&!e.isValidChild(h.name,f.name)&&c(h);h=h.parent)v.push(h);if(h&&v.length>1)if(e.isValidChild(h.name,f.name)){v.reverse(),b=v[0].clone(),r(b);let p=b;for(let C=0;C<v.length-1;C++){e.isValidChild(p.name,v[C].name)&&C>0?(g=v[C].clone(),r(g),p.append(g)):g=p;for(let w=v[C].firstChild;w&&w!==v[C+1];){const k=w.next;g.append(w),w=k}p=g}cl(e,s,a,b)?h.insert(f,v[0],!0):(h.insert(b,v[0],!0),h.insert(f,b)),h=v[0],(cl(e,s,a,h)||lv(h,"br"))&&h.empty().remove()}else Gf(f,e);else if(f.parent){if("li"===f.name){let p=f.prev;if(p&&("ul"===p.name||"ol"===p.name)){p.append(f);continue}if(p=f.next,p&&("ul"===p.name||"ol"===p.name)&&p.firstChild){p.insert(f,p.firstChild,!0);continue}const C=new Gn("ul",1);r(C),f.wrap(C);continue}if(e.isValidChild(f.parent.name,"div")&&e.isValidChild("div",f.name)){const p=new Gn("div",1);r(p),f.wrap(p)}else Gf(f,e)}}},cv=(t,e,n=e.parent)=>!(!n||!t.children[e.name]||t.isValidChild(n.name,e.name))||!(!n||"a"!==e.name||!((r,o)=>{let s=r;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n)),Qf=t=>t.collapsed?t:(e=>{const n=X.fromRangeStart(e),r=X.fromRangeEnd(e),o=e.commonAncestorContainer;return kr(!1,o,r).map(s=>!Co(n,r,o)&&Co(n,s,o)?((a,i,l,c)=>{const u=document.createRange();return u.setStart(a,i),u.setEnd(l,c),u})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),Jf=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},dv=(t,e)=>{const n=X.after(t),r=wo(e).prev(n);return r?r.toRange():null},BN=["pre"],Zf=ec,LN=(t,e,n)=>{var r,o;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,c=xs({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u);let f=s.getRng();const h=f.startContainer,b=t.getBody();var k,A;h===b&&s.isCollapsed()&&a.isBlock(b.firstChild)&&(k=t,pt(A=b.firstChild)&&!k.schema.getVoidElements()[A.nodeName])&&a.isEmpty(b.firstChild)&&(f=a.createRng(),f.setStart(b.firstChild,0),f.setEnd(b.firstChild,0),s.setRng(f)),s.isCollapsed()||(k=>{const A=k.dom,O=Qf(k.selection.getRng());k.selection.setRng(O);const T=A.getParent(O.startContainer,Zf);var P,L,M;P=A,L=O,pt(M=T)&&M===P.getParent(L.endContainer,Zf)&&Ju(R(M),L)?$f(k,O,R(T)):O.startContainer===O.endContainer&&O.endOffset-O.startOffset==1&&at(O.startContainer.childNodes[O.startOffset])?O.deleteContents():k.getDoc().execCommand("Delete",!1)})(t);const g=s.getNode(),v={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},p=i.parse(e,v);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,r=e.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,s)=>{const a=o.getNonEmptyElements();return pt(s)&&(s.isEmpty(a)||(l=s,o.getBlockElements()[l.name]&&pt((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===mn)(l.firstChild)));var l,c})(t,r)&&(r=r?.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(t.schema,p)&&((k,A)=>!!Jf(k,A))(a,g))return f=((t,e,n,r)=>{const o=((f,h,b)=>{const g=h.serialize(b);return(v=>{var p,C;const w=v.firstChild,k=v.lastChild;return w&&"META"===w.nodeName&&(null===(p=w.parentNode)||void 0===p||p.removeChild(w)),k&&"mce_marker"===k.id&&(null===(C=k.parentNode)||void 0===C||C.removeChild(k)),v})(f.createFragment(g))})(e,t,r),s=Jf(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||pt(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((r=e.firstChild).data===mn||ze(r)))?t.slice(0,-1):t;var r,e,n})((i=o.firstChild,qt(null!==(l=i?.childNodes)&&void 0!==l?l:[],f=>"LI"===f.nodeName)));var i,l;const c=e.getRoot(),u=f=>{const h=X.fromRangeStart(n),b=wo(e.getRoot()),g=1===f?b.prev(h):b.next(h),v=g?.getNode();return!v||Jf(e,v)!==s};return s?u(1)?((f,h,b)=>{const g=f.parentNode;return g&&ct.each(h,v=>{g.insertBefore(v,f)}),((v,p)=>{const C=X.before(v),w=wo(p).next(C);return w?w.toRange():null})(f,b)})(s,a,c):u(2)?(f=s,b=c,e.insertAfter((h=a).reverse(),f),dv(h[0],b)):((f,h,b,g)=>{const v=((C,w)=>{const k=w.cloneRange(),A=w.cloneRange();return k.setStartBefore(C),A.setEndAfter(C),[k.cloneContents(),A.cloneContents()]})(f,g),p=f.parentNode;return p&&(p.insertBefore(v[0],f),ct.each(h,C=>{p.insertBefore(C,f)}),p.insertBefore(v[1],f),p.removeChild(f)),dv(h[h.length-1],b)})(s,a,c,n):null;var f,h,b})(c,a,s.getRng(),p),f&&s.setRng(f),e;!0===n.paste&&((k,A,O,T)=>{var P;const L=A.firstChild,M=A.lastChild,$=L===("bookmark"===M.attr("data-mce-type")?M.prev:M),U=Tt(BN,L.name);if($&&U){const W="false"!==L.attr("contenteditable"),H=(null===(P=k.getParent(O,k.isBlock))||void 0===P?void 0:P.nodeName.toLowerCase())===L.name,J=N.from(fa(T,O)).forall(no);return W&&H&&J}return!1})(a,p,g,t.getBody())&&(null===(r=p.firstChild)||void 0===r||r.unwrap()),(k=>{let A=k;for(;A=A.walk();)1===A.type&&A.attr("data-mce-fragment","1")})(p);let C=p.lastChild;if(C&&"mce_marker"===C.attr("id")){const k=C;for(C=C.prev;C;C=C.walk(!0))if(3===C.type||!a.isBlock(C.name)){C.parent&&t.schema.isValidChild(C.parent.name,"span")&&C.parent.insert(k,C,"br"===C.name);break}}if(t._selectionOverrides.showBlockCaretContainer(g),v.invalid){t.selection.setContent(u);let k,A=s.getNode();const O=t.getBody();for(Ai(A)?A=k=O:k=A;k&&k!==O;)A=k,k=k.parentNode;e=A===O?O.innerHTML:a.getOuterHTML(A);const T=i.parse(e),P=(W=>{for(let H=W;H;H=H.walk())if("mce_marker"===H.attr("id"))return N.some(H);return N.none()})(T),L=P.bind(RN).getOr(T);P.each(W=>W.replace(p));const M=p.children(),$=null!==(o=p.parent)&&void 0!==o?o:T;p.unwrap();const U=qt(M,W=>cv(t.schema,W,$));Yf(U,t.schema,L),iv(i.getNodeFilters(),i.getAttributeFilters(),T),e=c.serialize(T),A===O?a.setHTML(O,e):a.setOuterHTML(A,e)}else e=c.serialize(p),((k,A,O)=>{var T;if("all"===O.getAttribute("data-mce-bogus"))null===(T=O.parentNode)||void 0===T||T.insertBefore(k.dom.createFragment(A),O);else{const P=O.firstChild;!P||P===O.lastChild&&"BR"===P.nodeName?k.dom.setHTML(O,A):k.selection.setContent(A,{no_events:!0})}})(t,e,g);var w;return((k,A)=>{const O=k.schema.getTextInlineElements(),T=k.dom;if(A){const P=k.getBody(),L=Kf(k);ct.each(T.select("*[data-mce-fragment]"),M=>{if(pt(O[M.nodeName.toLowerCase()])&&ar(Nf(T,M),W=>!y0.has(W)))for(let $=M.parentElement;pt($)&&$!==P&&!iN(T,M,$);$=$.parentElement)if(L.compare($,M)){T.remove(M,!0);break}})}})(t,l),((k,A)=>{var O,T,P;let L;const M=k.dom,$=k.selection;if(!A)return;$.scrollIntoView(A);const U=fa(k.getBody(),A);if(U&&"false"===M.getContentEditable(U))return M.remove(A),void $.select(U);let W=M.createRng();const H=A.previousSibling;if(at(H)){W.setStart(H,null!==(T=null===(O=H.nodeValue)||void 0===O?void 0:O.length)&&void 0!==T?T:0);const ut=A.nextSibling;at(ut)&&(H.appendData(ut.data),null===(P=ut.parentNode)||void 0===P||P.removeChild(ut))}else W.setStartBefore(A),W.setEndBefore(A);const J=M.getParent(A,M.isBlock);M.remove(A),J&&M.isEmpty(J)&&(ge(R(J)),W.setStart(J,0),W.setEnd(J,0),Zf(J)||J.getAttribute("data-mce-fragment")||!(L=(ut=>{let mt=X.fromRangeStart(ut);return mt=wo(k.getBody()).next(mt),mt?.toRange()})(W))?M.add(J,M.create("br",{"data-mce-bogus":"1"})):(W=L,M.remove(J))),$.setRng(W)})(t,a.get("mce_marker")),w=t.getBody(),ct.each(w.getElementsByTagName("*"),k=>{k.removeAttribute("data-mce-fragment")}),((k,A)=>{N.from(k.getParent(A,"td,th")).map(R).each(mS)})(a,s.getStart()),((k,A,O)=>{const T=is(R(O),P=>ne(P,R(A)));wa(T,T.length-2).filter(Sn).fold(()=>uu(k,A),P=>uu(k,P.dom))})(t.schema,t.getBody(),s.getStart()),e},Gc=t=>t instanceof Gn,tm=(t,e,n)=>{var r;t.dom.setHTML(t.getBody(),e),!0!==n&&ca(r=t)&&Xn(r.getBody()).each(o=>{const s=o.getNode(),a=Wo(s)?Xn(s).getOr(o):o;r.selection.setRng(a.toRange())})},uv=t=>pe(t)?t:Ce,em=(t,e,n)=>{const r=e(t),o=uv(n);return r.orThunk(()=>o(t)?N.none():((s,a,i)=>{let l=s.dom;const c=uv(i);for(;l.parentNode;){l=l.parentNode;const u=R(l),f=a(u);if(f.isSome())return f;if(c(u))break}return N.none()})(t,e,o))},nm=of,fv=(t,e,n)=>{const r=t.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const s=r[o];if(_r(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},rm=(t,e,n,r,o)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!fv(t,i,n)||i.parentNode===s||!!Eo(t,i,n,r,!0));return!!Eo(t,a,n,r,o)},Yc=(t,e,n)=>!(!tn(n)||!nm(e,n.inline))||!(!ko(n)||!nm(e,n.block))||!!_r(n)&&vt(e)&&t.is(e,n.selector),mv=(t,e,n,r,o,s)=>{const a=n[r],i="attributes"===r;if(pe(n.onmatch))return n.onmatch(e,n,r);if(a)if(ka(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):Bc(t,e,a[l]))return!0}else for(const l in a)if(ee(a,l)){const c=i?t.getAttrib(e,l):Bc(t,e,l),u=Cs(a[l],s),f=be(c)||rs(c);if(f&&be(u))continue;if(o&&f&&!n.exact||(!o||n.exact)&&!nm(c,sf(u,l)))return!1}return!0},Eo=(t,e,n,r,o)=>{const s=t.formatter.get(n),a=t.dom;if(s&&vt(e))for(let i=0;i<s.length;i++){const l=s[i];if(Yc(t.dom,e,l)&&mv(a,e,l,"attributes",o,r)&&mv(a,e,l,"styles",o,r)){const c=l.classes;if(c)for(let u=0;u<c.length;u++)if(!t.dom.hasClass(e,Cs(c[u],r)))return;return l}}},om=(t,e,n,r,o)=>{if(r)return rm(t,r,e,n,o);if(r=t.selection.getNode(),rm(t,r,e,n,o))return!0;const s=t.selection.getStart();return!(s===r||!rm(t,s,e,n,o))},Qa=En,pv=t=>(e=>{const n=[];let r=e;for(;r;){if(at(r)&&r.data!==Qa||r.childNodes.length>1)return[];vt(r)&&n.push(r),r=r.firstChild}return n})(t).length>0,gv=t=>{if(t){const e=new Ze(t,t);for(let n=e.current();n;n=e.next())if(at(n))return n}return null},sm=t=>{const e=ot("span");return Gr(e,{id:Vu,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Ct(e,Y(Qa)),e},am=(t,e,n=!0)=>{const r=t.dom,o=t.selection;if(pv(e))da(t,!1,R(e),n);else{const s=o.getRng(),a=r.getParent(e,r.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,u=s.endOffset,f=(h=>{const b=gv(h);return b&&b.data.charAt(0)===Qa&&b.deleteData(0,1),b})(e);r.remove(e,!0),i===f&&l>0&&s.setStart(f,l-1),c===f&&u>0&&s.setEnd(f,u-1),a&&r.isEmpty(a)&&Ks(R(a)),o.setRng(s)}},im=(t,e,n=!0)=>{const r=t.dom,o=t.selection;if(e)am(t,e,n);else if(!(e=sa(t.getBody(),o.getStart())))for(;e=r.get(Vu);)am(t,e,!1)},hv=(t,e)=>(t.appendChild(e),e),bv=(t,e)=>{var n;const r=Po(t,(s,a)=>hv(s,a.cloneNode(!1)),e),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return hv(r,o.createTextNode(Qa))},vv=t=>{const e=sm(!1),n=bv(t,e.dom);return{caretContainer:e,caretPosition:X(n,0)}},yv=(t,e)=>{const{caretContainer:n,caretPosition:r}=vv(e);return nt(R(t),n),Bt(R(t)),r},Cv=(t,e)=>{const n=t.schema.getTextInlineElements();return ee(n,Ee(e))&&!Ur(e.dom)&&!Ws(e.dom)},xv=t=>Ur(t.dom)&&pv(t.dom),dl={},wv=eo(["pre"]);dl.pre||(dl.pre=[]),dl.pre.push(t=>{if(!t.selection.getRng().collapsed){const e=t.selection.getSelectedBlocks(),n=qt(qt(e,wv),(r=e,o=>{const s=o.previousSibling;return wv(s)&&Tt(r,s)}));st(n,r=>{((o,s)=>{const a=R(s),i=ue(a).dom;Bt(a),Ot(R(o),[ot("br",i),ot("br",i),...Re(a)])})(r.previousSibling,r)})}var r});const Sv=["fontWeight","fontStyle","color","fontSize","fontFamily"],kv=(t,e)=>{const n=t.get(e);return it(n)?Ue(n,r=>{return tn(r)&&"span"===r.inline&&Ut((o=r).styles)&&ke(Ye(o.styles),s=>Tt(Sv,s));var o}):N.none()},Ev=(t,e)=>Er(e,X.fromRangeStart(t)).isNone(),Nv=(t,e)=>!1===tr(e,X.fromRangeEnd(t)).exists(n=>!ze(n.getNode())||tr(e,n).isSome()),_v=t=>e=>lS(e)&&t.isEditable(e),Av=t=>qt(t.getSelectedBlocks(),_v(t.dom)),lm=ct.each,cm=t=>vt(t)&&!Nr(t)&&!Ur(t)&&!Ws(t),Rv=(t,e)=>{for(let n=t;n;n=n[e]){if(at(n)&&zn(n.data))return t;if(vt(n)&&!Nr(n))return n}return t},Tv=(t,e,n)=>{const r=Kf(t),o=vt(e)&&aa(e),s=vt(n)&&aa(n);if(o&&s){const a=Rv(e,"previousSibling"),i=Rv(n,"nextSibling");if(r.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return t.dom.remove(i),ct.each(ct.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},Ov=(t,e,n,r)=>{var o;if(r&&!1!==e.merge_siblings){const s=null!==(o=Tv(t,ub(r),r))&&void 0!==o?o:r;Tv(t,s,ub(s,!0))}},dm=(t,e,n)=>{lm(t.childNodes,r=>{cm(r)&&(e(r)&&n(r),r.hasChildNodes()&&dm(r,e,n))})},Dv=(t,e)=>n=>!(!n||!Bc(t,n,e)),Bv=(t,e,n)=>r=>{var o,s;t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=t,"SPAN"===(s=r).nodeName&&0===o.getAttribs(s).length&&o.remove(s,!0)},ma=yo([{keep:[]},{rename:["name"]},{removed:[]}]),IN=/^(src|href|style)$/,um=ct.each,Qc=of,Lv=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),Pv=(t,e,n)=>{let r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(vt(r)){const s=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>s?s:o]}return at(r)&&n&&o>=r.data.length&&(r=new Ze(r,t.getBody()).next()||r),at(r)&&!n&&0===o&&(r=new Ze(r,t.getBody()).prev()||r),r},Mv=(t,e)=>{const n=e?"firstChild":"lastChild",r=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&r?"TR"===t.nodeName&&r[n]||r:t},fm=(t,e,n,r)=>{var o;const s=t.create(n,r);return null===(o=e.parentNode)||void 0===o||o.insertBefore(s,e),s.appendChild(e),s},Iv=(t,e,n,r,o)=>{const s=R(e),a=R(t.create(r,o)),i=n?Fr(s):ls(s);return Ot(a,i),n?(nt(s,a),Pt(a,s)):(lt(s,a),Ct(a,s)),a.dom},Fv=(t,e,n)=>{const r=e.parentNode;let o;const s=t.dom,a=fr(t);var i;ko(n)&&r===s.getRoot()&&(n.list_block&&Qc(e,n.list_block)||st(an(e.childNodes),i=>{Ka(t,a,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=fm(s,i,a),s.setAttribs(o,$i(t))):o=null})),_r(i=n)&&tn(i)&&ss(Se(i,"mixed"),!0)&&!Qc(n.inline,e)||s.remove(e,!0)},jv=(t,e,n)=>x(t)?{name:e,value:null}:{name:t,value:Cs(e,n)},zv=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},Hv=(t,e,n,r,o)=>{let s=!1;um(n.styles,(a,i)=>{const{name:l,value:c}=jv(i,a,r),u=sf(c,l);(n.remove_similar||Zt(c)||!vt(o)||Qc(Bc(t,o,l),u))&&t.setStyle(e,l,""),s=!0}),s&&zv(t,e)},Uv=(t,e,n,r,o)=>{const s=t.dom,a=Kf(t),i=t.schema;if(tn(e)&&dc(i,e.inline)&&Gs(i,r)&&r.parentElement===t.getBody())return Fv(t,r,e),ma.removed();if(!e.ceFalseOverride&&r&&"false"===s.getContentEditableParent(r)||r&&!Yc(s,r,e)&&(!e.links||"A"!==r.nodeName))return ma.keep();const l=r,c=e.preserve_attributes;if(tn(e)&&"all"===e.remove&&it(c)){const u=qt(s.getAttribs(l),f=>Tt(c,f.name.toLowerCase()));if(s.removeAllAttribs(l),st(u,f=>s.setAttrib(l,f.name,f.value)),u.length>0)return ma.rename("span")}if("all"!==e.remove){Hv(s,l,e,n,o),um(e.attributes,(f,h)=>{const{name:b,value:g}=jv(h,f,n);if(e.remove_similar||Zt(g)||!vt(o)||Qc(s.getAttrib(o,b),g)){if("class"===b){const v=s.getAttrib(l,b);if(v){let p="";if(st(v.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(p+=(p?" ":"")+C)}),p)return void s.setAttrib(l,b,p)}}if(IN.test(b)&&l.removeAttribute("data-mce-"+b),"style"===b&&eo(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(b),void s.setStyle(l,"list-style-type","none");"class"===b&&l.removeAttribute("className"),l.removeAttribute(b)}}),um(e.classes,f=>{f=Cs(f,n),vt(o)&&!s.hasClass(o,f)||s.removeClass(l,f)});const u=s.getAttribs(l);for(let f=0;f<u.length;f++)if(!a.isAttributeInternal(u[f].nodeName))return ma.keep()}return"none"!==e.remove?(Fv(t,l,e),ma.removed()):ma.keep()},ul=(t,e,n,r,o)=>Uv(t,e,n,r,o).fold(Ce,s=>(t.dom.rename(r,s),!0),Ae),FN=(t,e,n,r)=>Uv(t,e,n,r,r).fold(ft(r),o=>(t.dom.createFragment().appendChild(r),t.dom.rename(r,o)),ft(null)),qv=(t,e,n,r,o)=>{const s=t.formatter.get(e),a=s[0],i=t.dom,l=t.selection,c=g=>{const v=((p,C,w,k,A)=>{let O;return C.parentNode&&st(Lc(p.dom,C.parentNode).reverse(),T=>{if(!O&&vt(T)&&"_start"!==T.id&&"_end"!==T.id){const P=Eo(p,T,w,k,A);P&&!1!==P.split&&(O=T)}}),O})(t,g,e,n,o);return((p,C,w,k,A,O,T,P)=>{var L,M;let $,U;const W=p.dom;if(w){const H=w.parentNode;for(let J=k.parentNode;J&&J!==H;J=J.parentNode){let ut=W.clone(J,!1);for(let mt=0;mt<C.length&&(ut=FN(p,C[mt],P,ut),null!==ut);mt++);ut&&($&&ut.appendChild($),U||(U=ut),$=ut)}T.mixed&&W.isBlock(w)||(k=null!==(L=W.split(w,k))&&void 0!==L?L:k),$&&U&&(null===(M=A.parentNode)||void 0===M||M.insertBefore($,A),U.appendChild(A),tn(T)&&Ov(p,T,0,$))}return k})(t,s,v,g,g,0,a,n)},u=g=>ke(s,v=>ul(t,v,n,g,g)),f=g=>{const v=an(g.childNodes),p=u(g)||ke(s,w=>Yc(i,g,w)),C=g.parentNode;if(!p&&pt(C)&&lf(a)&&u(C),a.deep&&v.length)for(let w=0;w<v.length;w++)f(v[w]);st(["underline","line-through","overline"],w=>{vt(g)&&t.dom.getStyle(g,"text-decoration")===w&&g.parentNode&&mb(i,g.parentNode)===w&&ul(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:w}},void 0,g)})},h=g=>{const v=i.get(g?"_start":"_end");if(v){let p=v[g?"firstChild":"lastChild"];return Nr(C=p)&&vt(C)&&("_start"===C.id||"_end"===C.id)&&(p=p[g?"firstChild":"lastChild"]),at(p)&&0===p.data.length&&(p=g?v.previousSibling||v.nextSibling:v.nextSibling||v.previousSibling),i.remove(v,!0),p}var C;return null},b=g=>{let v,p,C=ia(i,g,s,g.collapsed);if(a.split){if(C=Hc(C),v=Pv(t,C,!0),p=Pv(t,C),v!==p){if(v=Mv(v,!0),p=Mv(p,!1),Lv(i,v,p)){const k=N.from(v.firstChild).getOr(v);return c(Iv(i,k,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void h(!0)}if(Lv(i,p,v)){const k=N.from(p.lastChild).getOr(p);return c(Iv(i,k,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void h(!1)}v=fm(i,v,"span",{id:"_start","data-mce-type":"bookmark"}),p=fm(i,p,"span",{id:"_end","data-mce-type":"bookmark"});const w=i.createRng();w.setStartAfter(v),w.setEndBefore(p),Zi(i,w,k=>{st(k,A=>{Nr(A)||Nr(A.parentNode)||c(A)})}),c(v),c(p),v=h(!0),p=h()}else v=p=c(v);C.startContainer=v.parentNode?v.parentNode:v,C.startOffset=i.nodeIndex(v),C.endContainer=p.parentNode?p.parentNode:p,C.endOffset=i.nodeIndex(p)+1}Zi(i,C,w=>{st(w,f)})};if(r){if(Dc(r)){const g=i.createRng();g.setStartBefore(r),g.setEndAfter(r),b(g)}else b(r);Rb(t,e,r,n)}else l.isCollapsed()&&tn(a)&&!Va(t).length?((t,e,n,r)=>{const o=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),c=l.startContainer,u=l.startOffset;let f=c;at(c)&&(u!==c.data.length&&(a=!0),f=f.parentNode);const h=[];let b;for(;f;){if(Eo(t,f,e,n,r)){b=f;break}f.nextSibling&&(a=!0),h.push(f),f=f.parentNode}if(b)if(a){const g=s.getBookmark();l.collapse(!0);let v=ia(o,l,i,!0);v=Hc(v),t.formatter.remove(e,n,v,r),s.moveToBookmark(g)}else{const g=sa(t.getBody(),b),v=sm(!1).dom;((w,k,A)=>{var O,T;const P=w.dom,L=P.getParent(A,yt(nf,w.schema));L&&P.isEmpty(L)?null===(O=A.parentNode)||void 0===O||O.replaceChild(k,A):((M=>{const $=fn(M,"br"),U=qt((W=>{const H=[];let J=W.dom;for(;J;)H.push(R(J)),J=J.lastChild;return H})(M).slice(-1),Vs);$.length===U.length&&st(U,Bt)})(R(A)),P.isEmpty(A)?null===(T=A.parentNode)||void 0===T||T.replaceChild(k,A):P.insertAfter(k,A))})(t,v,g??b);const p=((w,k,A,O,T,P)=>{const L=w.formatter,M=w.dom,$=qt(Ye(L.get()),W=>W!==O&&!Fe(W,"removeformat")),U=(W=w,H=A,gn($,(ut,mt)=>{const _t=af(W,mt,ye=>{const kt=Xt=>pe(Xt)||Xt.length>1&&"%"===Xt.charAt(0);return ke(["styles","attributes"],Xt=>Se(ye,Xt).exists(Gt=>{const I=it(Gt)?Gt:jo(Gt);return ke(I,kt)}))});return W.formatter.matchNode(H,mt,{},_t)?ut.concat([mt]):ut},[]));var W,H;if(qt(U,W=>!((H,J,ut)=>{const mt=["inline","block","selector","attributes","styles","classes"],_t=Lt=>br(Lt,(ae,ye)=>ke(mt,kt=>kt===ye));return af(H,J,Lt=>{const ae=_t(Lt);return af(H,ut,ye=>{const kt=_t(ye);return((Xt,Gt,I=Ie)=>re(I).eq(Xt,Gt))(ae,kt)})})})(w,W,O)).length>0){const W=A.cloneNode(!1);return M.add(k,W),L.remove(O,T,W,P),M.remove(W),N.some(W)}return N.none()})(t,v,b,e,n,r),C=bv(h.concat(p.toArray()),v);g&&am(t,g,!1),s.setCursorLocation(C,1),o.isEmpty(b)&&o.remove(b)}})(t,e,n,o):(db(t,()=>tf(t,b),g=>tn(a)&&om(t,e,n,g)),t.nodeChanged()),g=t,p=n,"removeformat"===(v=e)?st(Av(g.selection),C=>{st(Sv,w=>g.dom.setStyle(C,w,"")),zv(g.dom,C)}):kv(g.formatter,v).each(C=>{st(Av(g.selection),w=>Hv(g.dom,w,C,p,null))}),Rb(t,e,r,n);var g,v,p},$v=ct.each,Jc=ct.each,Wv=(t,e,n,r)=>{if(Jc(n.styles,(o,s)=>{t.setStyle(e,s,Cs(o,r))}),n.styles){const o=t.getAttrib(e,"style");o&&t.setAttrib(e,"data-mce-style",o)}},Vv=(t,e,n,r)=>{const o=t.formatter.get(e),s=o[0],a=!r&&t.selection.isCollapsed(),i=t.dom,l=t.selection,c=(g,v=s)=>{pe(v.onformat)&&v.onformat(g,v,n,r),Wv(i,g,v,n),Jc(v.attributes,(p,C)=>{i.setAttrib(g,C,Cs(p,n))}),Jc(v.classes,p=>{const C=Cs(p,n);i.hasClass(g,C)||i.addClass(g,C)})},u=(g,v)=>{let p=!1;return Jc(g,C=>!(!_r(C)||("false"!==i.getContentEditable(v)||C.ceFalseOverride)&&(!pt(C.collapsed)||C.collapsed===a)&&i.is(v,C.selector)&&!Ur(v)&&(c(v,C),p=!0,1))),p},h=(g,v,p)=>{const C=[];let w=!0;const k=s.inline||s.block,A=(g=>{if(Rt(g)){const v=i.create(g);return c(v),v}return null})(k);Zi(g,v,O=>{let T;const P=L=>{let M=!1,$=w,U=!1;const W=L.parentNode,H=W.nodeName.toLowerCase(),J=g.getContentEditable(L);pt(J)&&($=w,w="true"===J,M=!0,U=fb(t,L));const ut=w&&!M;if(ze(L)&&!((mt,_t,Lt,ae)=>{if(Ak(mt)&&tn(_t)&&Lt.parentNode){const ye=Eg(mt.schema),kt=((t,e)=>((n,r)=>{const o=n.dom;return o.parentNode?(s=R(o.parentNode),Ue(s.dom.childNodes,i=>(s=>!ne(n,s)&&r(s))(R(i))).map(R)):N.none();var s})(t,e).isSome())(R(Lt),Xt=>Ur(Xt.dom));return hn(ye,ae)&&We(R(Lt.parentNode),!1)&&!kt}return!1})(t,s,L,H))return T=null,void(ko(s)&&g.remove(L));if(mt=L,ko(_t=s)&&!0===_t.wrapper&&Eo(t,mt,e,n))T=null;else{if(((mt,_t,Lt)=>{const ae=ko(ye=s)&&!0!==ye.wrapper&&nf(t.schema,mt)&&Ka(t,_t,k);var ye;return Lt&&ae})(L,H,ut)){const mt=g.rename(L,k);return c(mt),C.push(mt),void(T=null)}if(_r(s)){let mt=u(o,L);if(!mt&&pt(W)&&lf(s)&&(mt=u(o,W)),!tn(s)||mt)return void(T=null)}pt(A)&&((mt,_t,Lt,ae)=>{const ye=mt.nodeName.toLowerCase(),kt=Ka(t,k,ye)&&Ka(t,_t,k),Xt=!p&&at(mt)&&ac(mt.data),Gt=Ur(mt),I=!tn(s)||!g.isBlock(mt);return(Lt||ae)&&kt&&!Xt&&!Gt&&I})(L,H,ut,U)?(T||(T=g.clone(A,!1),W.insertBefore(T,L),C.push(T)),U&&M&&(w=$),T.appendChild(L)):(T=null,st(an(L.childNodes),P),M&&(w=$),T=null)}var mt,_t};st(O,P)}),!0===s.links&&st(C,O=>{const T=P=>{"A"===P.nodeName&&c(P,s),st(an(P.childNodes),T)};T(O)}),st(C,O=>{const T=(P=>{let L=0;return st(P.childNodes,M=>{var $;pt($=M)&&at($)&&0===$.length||Nr(M)||L++}),L})(O);var P;!(C.length>1)&&g.isBlock(O)||0!==T?(tn(s)||ko(s)&&s.wrapper)&&(s.exact||1!==T||(O=Ue((P=O).childNodes,ef).filter(M=>"false"!==g.getContentEditable(M)&&Yc(g,M,s)).map(M=>{const $=g.clone(M,!1);return c($),g.replace($,P,!0),g.remove(M,!0),$}).getOr(P)),((P,L,M,$)=>{$v(L,U=>{var W,H,J;tn(U)&&$v(P.dom.select(U.inline,$),W=>{cm(W)&&ul(P,U,M,W,U.exact?W:null)}),W=P.dom,J=$,(H=U).clear_child_styles&&lm(W.select(H.links?"*:not(a)":"*",J),mt=>{cm(mt)&&aa(mt)&&lm(H.styles,(_t,Lt)=>{W.setStyle(mt,Lt,"")})})})})(t,o,n,O),((P,L,M,$,U)=>{const W=U.parentNode;Eo(P,W,M,$)&&ul(P,L,$,U)||L.merge_with_parents&&W&&P.dom.getParent(W,H=>!!Eo(P,H,M,$)&&(ul(P,L,$,U),!0))})(t,s,e,n,O),((P,L,M,$)=>{if(L.styles&&L.styles.backgroundColor){const U=Dv(P,"fontSize");dm($,W=>U(W)&&aa(W),Bv(P,"backgroundColor",Cs(L.styles.backgroundColor,M)))}})(g,s,n,O),((P,L,M,$)=>{const U=W=>{if(vt(W)&&vt(W.parentNode)&&aa(W)){const H=mb(P,W.parentNode);P.getStyle(W,"color")&&H?P.setStyle(W,"text-decoration",H):P.getStyle(W,"text-decoration")===H&&P.setStyle(W,"text-decoration",null)}};L.styles&&(L.styles.color||L.styles.textDecoration)&&(ct.walk($,U,"childNodes"),U($))})(g,s,0,O),((P,L,M,$)=>{if(tn(L)&&("sub"===L.inline||"sup"===L.inline)){const U=Dv(P,"fontSize");dm($,H=>U(H)&&aa(H),Bv(P,"fontSize",""));const W=qt(P.select("sup"===L.inline?"sub":"sup",$),aa);P.remove(W,!0)}})(g,s,0,O),Ov(t,s,0,O)):g.remove(O,!0)})},b=Dc(r)?r:l.getNode();if("false"===i.getContentEditable(b)&&!fb(t,b))return u(o,r=b),void Ab(t,e,r,n);if(s){if(r)if(Dc(r)){if(!u(o,r)){const g=i.createRng();g.setStartBefore(r),g.setEndAfter(r),h(i,ia(i,g,o),!0)}}else h(i,r,!0);else a&&tn(s)&&!Va(t).length?((g,v,p)=>{let C;const w=g.selection,k=g.formatter.get(v);if(!k)return;const A=w.getRng();let O=A.startOffset;const T=A.startContainer.nodeValue;C=sa(g.getBody(),w.getStart());const P=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(T&&O>0&&O<T.length&&P.test(T.charAt(O))&&P.test(T.charAt(O-1))){const $=w.getBookmark();A.collapse(!0);let U=ia(g.dom,A,k);U=Hc(U),g.formatter.apply(v,p,U),w.moveToBookmark($)}else{let $=C?gv(C):null;C&&$?.data===Qa||(L=g.getDoc(),M=sm(!0).dom,C=L.importNode(M,!0),$=C.firstChild,A.insertNode(C),O=1),g.formatter.apply(v,p,C),w.setCursorLocation($,O)}var L,M})(t,e,n):(l.setRng(Qf(l.getRng())),db(t,()=>{tf(t,(g,v)=>{const p=v?g:ia(i,g,o);h(i,p,!1)})},Ae),t.nodeChanged()),kv(t.formatter,e).each(g=>{var v;st(qt((p=>{const C=p.getSelectedBlocks(),w=p.getRng();if(p.isCollapsed())return[];if(1===C.length)return Ev(w,C[0])&&Nv(w,C[0])?C:[];{const k=wn(C).filter(T=>Ev(w,T)).toArray(),A=ho(C).filter(T=>Nv(w,T)).toArray(),O=C.slice(1,-1);return k.concat(O).concat(A)}})(v=t.selection),_v(v.dom)),v=>Wv(i,v,g,n))});v=t,ee(dl,g=e)&&st(dl[g],p=>{p(v)})}var g,v;Ab(t,e,r,n)},Kv=t=>ee(t,"vars"),Xv=t=>t.selection.getStart(),Gv=(t,e,n,r,o)=>Br(e,s=>{const a=t.formatter.matchNode(s,n,o??{},r);return!Be(a)},s=>!!fv(t,s,n)||!r&&pt(t.formatter.matchNode(s,n,o,!0))),Yv=(t,e)=>{const n=e??Xv(t);return qt(Lc(t.dom,n),r=>vt(r)&&!Ws(r))},Qv=(t,e,n)=>{const r=Yv(t,e);we(n,(o,s)=>{const a=i=>{const l=Gv(t,r,s,i.similar,Kv(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const u=l.getOr(e);Kv(i)?i.callback(c,{node:u,format:s,parents:r}):st(i.callbacks,f=>f(c,{node:u,format:s,parents:r}))}};st([o.withSimilar,o.withoutSimilar],a),st(o.withVars,a)})},Jv=ct.explode,Zv=()=>{const t={};return{addFilter:(e,n)=>{st(Jv(e),r=>{ee(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>jo(t),removeFilter:(e,n)=>{st(Jv(e),r=>{if(ee(t,r))if(pt(n)){const o=t[r],s=qt(o.callbacks,a=>a!==n);s.length>0?o.callbacks=s:delete t[r]}else delete t[r]})}}},mm=t=>{const[e,...n]=t.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(o){const s=";base64"===o[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(r):decodeURIComponent(r);return N.some({type:o[1],data:a,base64Encoded:s})}return N.none()},ty=(t,e,n=!0)=>{let r=e;if(n)try{r=atob(e)}catch{return N.none()}const o=new Uint8Array(r.length);for(let s=0;s<o.length;s++)o[s]=r.charCodeAt(s);return N.some(new Blob([o],{type:t}))},ey=t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(t)});let zN=0;const ny=(t,e,n)=>mm(t).bind(({data:r,type:o,base64Encoded:s})=>{if(e&&!s)return N.none();{const a=s?r:btoa(r);return n(a,o)}}),ry=(t,e,n)=>{const r=t.create("blobid"+zN++,e,n);return t.add(r),r},oy=(t,e,n=!1)=>ny(e,n,(r,o)=>N.from(t.getByData(r,o)).orThunk(()=>ty(o,r).map(s=>ry(t,s,r))));function pa(t){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function pm(t,e){return(pm=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(t,e)}function gm(t,e,n){return(gm=function HN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(r,o,s){var a=[null];a.push.apply(a,o);var i=new(Function.bind.apply(r,a));return s&&pm(i,s.prototype),i}).apply(null,arguments)}function so(t){return function(e){if(Array.isArray(e))return hm(e)}(t)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return hm(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hm(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var UN=Object.hasOwnProperty,sy=Object.setPrototypeOf,qN=Object.isFrozen,$N=Object.getPrototypeOf,WN=Object.getOwnPropertyDescriptor,er=Object.freeze,No=Object.seal,VN=Object.create,ay=typeof Reflect<"u"&&Reflect,Zc=ay.apply,bm=ay.construct;Zc||(Zc=function(t,e,n){return t.apply(e,n)}),er||(er=function(t){return t}),No||(No=function(t){return t}),bm||(bm=function(t,e){return gm(t,so(e))});var iy,KN=ao(Array.prototype.forEach),XN=ao(Array.prototype.pop),fl=ao(Array.prototype.push),td=ao(String.prototype.toLowerCase),GN=ao(String.prototype.match),Ns=ao(String.prototype.replace),YN=ao(String.prototype.indexOf),QN=ao(String.prototype.trim),nr=ao(RegExp.prototype.test),vm=(iy=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return bm(iy,e)});function ao(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Zc(t,e,r)}}function he(t,e){sy&&sy(t,null);for(var n=e.length;n--;){var r=e[n];if("string"==typeof r){var o=td(r);o!==r&&(qN(e)||(e[n]=o),r=o)}t[r]=!0}return t}function ga(t){var e,n=VN(null);for(e in t)Zc(UN,t,[e])&&(n[e]=t[e]);return n}function ed(t,e){for(;null!==t;){var n=WN(t,e);if(n){if(n.get)return ao(n.get);if("function"==typeof n.value)return ao(n.value)}t=$N(t)}return function(r){return console.warn("fallback value for",r),null}}var ly=er(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ym=er(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Cm=er(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),JN=er(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),xm=er(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ZN=er(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cy=er(["#text"]),dy=er(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),wm=er(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),uy=er(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),nd=er(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),t_=No(/\{\{[\w\W]*|[\w\W]*\}\}/gm),e_=No(/<%[\w\W]*|[\w\W]*%>/gm),n_=No(/^data-[\-\w.\u00B7-\uFFFF]/),r_=No(/^aria-[\-\w]+$/),o_=No(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),s_=No(/^(?:\w+script|data):/i),a_=No(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),i_=No(/^html$/i),d_=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window,n=function(q){return t(q)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var r=e.document,o=e.document,s=e.DocumentFragment,a=e.HTMLTemplateElement,i=e.Node,l=e.Element,c=e.NodeFilter,u=e.NamedNodeMap,f=void 0===u?e.NamedNodeMap||e.MozNamedAttrMap:u,h=e.HTMLFormElement,b=e.DOMParser,g=e.trustedTypes,v=l.prototype,p=ed(v,"cloneNode"),C=ed(v,"nextSibling"),w=ed(v,"childNodes"),k=ed(v,"parentNode");if("function"==typeof a){var A=o.createElement("template");A.content&&A.content.ownerDocument&&(o=A.content.ownerDocument)}var O=function(t,e){if("object"!==pa(t)||"function"!=typeof t.createPolicy)return null;var n=null,r="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(r)&&(n=e.currentScript.getAttribute(r));var o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML:function(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(g,r),T=O?O.createHTML(""):"",L=o.implementation,M=o.createNodeIterator,$=o.createDocumentFragment,U=o.getElementsByTagName,W=r.importNode,H={};try{H=ga(o).documentMode?o.documentMode:{}}catch{}var J={};n.isSupported="function"==typeof k&&L&&void 0!==L.createHTMLDocument&&9!==H;var ut,mt,_t=t_,Lt=e_,ae=n_,ye=r_,kt=s_,Xt=a_,Gt=o_,I=null,j=he({},[].concat(so(ly),so(ym),so(Cm),so(xm),so(cy))),G=null,et=he({},[].concat(so(dy),so(wm),so(uy),so(nd))),Q=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),rt=null,dt=null,bt=!0,Nt=!0,Ft=!1,zt=!1,ht=!1,Yt=!1,Ve=!1,Oe=!1,Qn=!1,Jn=!1,co=!0,$r=!0,pn=!1,rr={},Me=null,Oo=he({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Rs=null,Vd=he({},["audio","video","img","source","image","track"]),Do=null,Dl=he({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),mr="http://www.w3.org/1998/Math/MathML",Ts="http://www.w3.org/2000/svg",pr="http://www.w3.org/1999/xhtml",xa=pr,Gw=!1,zT=["application/xhtml+xml","text/html"],ui=null,UT=o.createElement("form"),Yw=function(q){return q instanceof RegExp||q instanceof Function},Xp=function(q){ui&&ui===q||(q&&"object"===pa(q)||(q={}),q=ga(q),I="ALLOWED_TAGS"in q?he({},q.ALLOWED_TAGS):j,G="ALLOWED_ATTR"in q?he({},q.ALLOWED_ATTR):et,Do="ADD_URI_SAFE_ATTR"in q?he(ga(Dl),q.ADD_URI_SAFE_ATTR):Dl,Rs="ADD_DATA_URI_TAGS"in q?he(ga(Vd),q.ADD_DATA_URI_TAGS):Vd,Me="FORBID_CONTENTS"in q?he({},q.FORBID_CONTENTS):Oo,rt="FORBID_TAGS"in q?he({},q.FORBID_TAGS):{},dt="FORBID_ATTR"in q?he({},q.FORBID_ATTR):{},rr="USE_PROFILES"in q&&q.USE_PROFILES,bt=!1!==q.ALLOW_ARIA_ATTR,Nt=!1!==q.ALLOW_DATA_ATTR,Ft=q.ALLOW_UNKNOWN_PROTOCOLS||!1,zt=q.SAFE_FOR_TEMPLATES||!1,ht=q.WHOLE_DOCUMENT||!1,Oe=q.RETURN_DOM||!1,Qn=q.RETURN_DOM_FRAGMENT||!1,Jn=q.RETURN_TRUSTED_TYPE||!1,Ve=q.FORCE_BODY||!1,co=!1!==q.SANITIZE_DOM,$r=!1!==q.KEEP_CONTENT,pn=q.IN_PLACE||!1,Gt=q.ALLOWED_URI_REGEXP||Gt,xa=q.NAMESPACE||pr,q.CUSTOM_ELEMENT_HANDLING&&Yw(q.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Q.tagNameCheck=q.CUSTOM_ELEMENT_HANDLING.tagNameCheck),q.CUSTOM_ELEMENT_HANDLING&&Yw(q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Q.attributeNameCheck=q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),q.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Q.allowCustomizedBuiltInElements=q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ut=ut=-1===zT.indexOf(q.PARSER_MEDIA_TYPE)?"text/html":q.PARSER_MEDIA_TYPE,mt="application/xhtml+xml"===ut?function(Mt){return Mt}:td,zt&&(Nt=!1),Qn&&(Oe=!0),rr&&(I=he({},so(cy)),G=[],!0===rr.html&&(he(I,ly),he(G,dy)),!0===rr.svg&&(he(I,ym),he(G,wm),he(G,nd)),!0===rr.svgFilters&&(he(I,Cm),he(G,wm),he(G,nd)),!0===rr.mathMl&&(he(I,xm),he(G,uy),he(G,nd))),q.ADD_TAGS&&(I===j&&(I=ga(I)),he(I,q.ADD_TAGS)),q.ADD_ATTR&&(G===et&&(G=ga(G)),he(G,q.ADD_ATTR)),q.ADD_URI_SAFE_ATTR&&he(Do,q.ADD_URI_SAFE_ATTR),q.FORBID_CONTENTS&&(Me===Oo&&(Me=ga(Me)),he(Me,q.FORBID_CONTENTS)),$r&&(I["#text"]=!0),ht&&he(I,["html","head","body"]),I.table&&(he(I,["tbody"]),delete rt.tbody),er&&er(q),ui=q)},Qw=he({},["mi","mo","mn","ms","mtext"]),Jw=he({},["foreignobject","desc","title","annotation-xml"]),qT=he({},["title","style","font","a","script"]),Kd=he({},ym);he(Kd,Cm),he(Kd,JN);var Gp=he({},xm);he(Gp,ZN);var Jo=function(q){fl(n.removed,{element:q});try{q.parentNode.removeChild(q)}catch{try{q.outerHTML=T}catch{q.remove()}}},Xd=function(q,Mt){try{fl(n.removed,{attribute:Mt.getAttributeNode(q),from:Mt})}catch{fl(n.removed,{attribute:null,from:Mt})}if(Mt.removeAttribute(q),"is"===q&&!G[q])if(Oe||Qn)try{Jo(Mt)}catch{}else try{Mt.setAttribute(q,"")}catch{}},Zw=function(q){var Mt,At;if(Ve)q="<remove></remove>"+q;else{var De=GN(q,/^[\r\n\t ]+/);At=De&&De[0]}"application/xhtml+xml"===ut&&(q='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+q+"</body></html>");var sn=O?O.createHTML(q):q;if(xa===pr)try{Mt=(new b).parseFromString(sn,ut)}catch{}if(!Mt||!Mt.documentElement){Mt=L.createDocument(xa,"template",null);try{Mt.documentElement.innerHTML=Gw?"":sn}catch{}}var or=Mt.body||Mt.documentElement;return q&&At&&or.insertBefore(o.createTextNode(At),or.childNodes[0]||null),xa===pr?U.call(Mt,ht?"html":"body")[0]:ht?Mt.documentElement:or},tS=function(q){return M.call(q.ownerDocument||q,q,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Bl=function(q){return"object"===pa(i)?q instanceof i:q&&"object"===pa(q)&&"number"==typeof q.nodeType&&"string"==typeof q.nodeName},Zo=function(q,Mt,At){J[q]&&KN(J[q],function(De){De.call(n,Mt,At,ui)})},eS=function(q){var Mt;if(Zo("beforeSanitizeElements",q,null),function(q){return q instanceof h&&("string"!=typeof q.nodeName||"string"!=typeof q.textContent||"function"!=typeof q.removeChild||!(q.attributes instanceof f)||"function"!=typeof q.removeAttribute||"function"!=typeof q.setAttribute||"string"!=typeof q.namespaceURI||"function"!=typeof q.insertBefore)}(q)||nr(/[\u0080-\uFFFF]/,q.nodeName))return Jo(q),!0;var At=mt(q.nodeName);if(Zo("uponSanitizeElement",q,{tagName:At,allowedTags:I}),q.hasChildNodes()&&!Bl(q.firstElementChild)&&(!Bl(q.content)||!Bl(q.content.firstElementChild))&&nr(/<[/\w]/g,q.innerHTML)&&nr(/<[/\w]/g,q.textContent)||"select"===At&&nr(/<template/i,q.innerHTML))return Jo(q),!0;if(!I[At]||rt[At]){if(!rt[At]&&rS(At)&&(Q.tagNameCheck instanceof RegExp&&nr(Q.tagNameCheck,At)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(At)))return!1;if($r&&!Me[At]){var De=k(q)||q.parentNode,sn=w(q)||q.childNodes;if(sn&&De)for(var or=sn.length-1;or>=0;--or)De.insertBefore(p(sn[or],!0),C(q))}return Jo(q),!0}return q instanceof l&&!function(q){var Mt=k(q);Mt&&Mt.tagName||(Mt={namespaceURI:pr,tagName:"template"});var At=td(q.tagName),De=td(Mt.tagName);return q.namespaceURI===Ts?Mt.namespaceURI===pr?"svg"===At:Mt.namespaceURI===mr?"svg"===At&&("annotation-xml"===De||Qw[De]):!!Kd[At]:q.namespaceURI===mr?Mt.namespaceURI===pr?"math"===At:Mt.namespaceURI===Ts?"math"===At&&Jw[De]:!!Gp[At]:q.namespaceURI===pr&&!(Mt.namespaceURI===Ts&&!Jw[De])&&!(Mt.namespaceURI===mr&&!Qw[De])&&!Gp[At]&&(qT[At]||!Kd[At])}(q)?(Jo(q),!0):"noscript"!==At&&"noembed"!==At||!nr(/<\/no(script|embed)/i,q.innerHTML)?(zt&&3===q.nodeType&&(Mt=Ns(Mt=q.textContent,_t," "),Mt=Ns(Mt,Lt," "),q.textContent!==Mt&&(fl(n.removed,{element:q.cloneNode()}),q.textContent=Mt)),Zo("afterSanitizeElements",q,null),!1):(Jo(q),!0)},nS=function(q,Mt,At){if(co&&("id"===Mt||"name"===Mt)&&(At in o||At in UT))return!1;if((!Nt||dt[Mt]||!nr(ae,Mt))&&(!bt||!nr(ye,Mt)))if(!G[Mt]||dt[Mt]){if(!(rS(q)&&(Q.tagNameCheck instanceof RegExp&&nr(Q.tagNameCheck,q)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(q))&&(Q.attributeNameCheck instanceof RegExp&&nr(Q.attributeNameCheck,Mt)||Q.attributeNameCheck instanceof Function&&Q.attributeNameCheck(Mt))||"is"===Mt&&Q.allowCustomizedBuiltInElements&&(Q.tagNameCheck instanceof RegExp&&nr(Q.tagNameCheck,At)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(At))))return!1}else if(!Do[Mt]&&!nr(Gt,Ns(At,Xt,""))&&("src"!==Mt&&"xlink:href"!==Mt&&"href"!==Mt||"script"===q||0!==YN(At,"data:")||!Rs[q])&&(!Ft||nr(kt,Ns(At,Xt,"")))&&At)return!1;return!0},rS=function(q){return q.indexOf("-")>0},oS=function(q){var Mt,At,De,sn;Zo("beforeSanitizeAttributes",q,null);var or=q.attributes;if(or){var Mn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:G};for(sn=or.length;sn--;){var Ll=Mt=or[sn],Bo=Ll.name,uo=Ll.namespaceURI;At="value"===Bo?Mt.value:QN(Mt.value),De=mt(Bo);var KT=At;if(Mn.attrName=De,Mn.attrValue=At,Mn.keepAttr=!0,Mn.forceKeepAttr=void 0,Zo("uponSanitizeAttribute",q,Mn),At=Mn.attrValue,!Mn.forceKeepAttr)if(Mn.keepAttr)if(nr(/\/>/i,At))Xd(Bo,q);else{zt&&(At=Ns(At,_t," "),At=Ns(At,Lt," "));var XT=mt(q.nodeName);if(nS(XT,De,At)){if(At!==KT)try{uo?q.setAttributeNS(uo,Bo,At):q.setAttribute(Bo,At)}catch{Xd(Bo,q)}}else Xd(Bo,q)}else Xd(Bo,q)}Zo("afterSanitizeAttributes",q,null)}},VT=function q(Mt){var At,De=tS(Mt);for(Zo("beforeSanitizeShadowDOM",Mt,null);At=De.nextNode();)Zo("uponSanitizeShadowNode",At,null),eS(At)||(At.content instanceof s&&q(At.content),oS(At));Zo("afterSanitizeShadowDOM",Mt,null)};return n.sanitize=function(q,Mt){var At,De,sn,or,Mn;if((Gw=!q)&&(q="\x3c!--\x3e"),"string"!=typeof q&&!Bl(q)){if("function"!=typeof q.toString)throw vm("toString is not a function");if("string"!=typeof(q=q.toString()))throw vm("dirty is not a string, aborting")}if(!n.isSupported){if("object"===pa(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof q)return e.toStaticHTML(q);if(Bl(q))return e.toStaticHTML(q.outerHTML)}return q}if(Yt||Xp(Mt),n.removed=[],"string"==typeof q&&(pn=!1),pn){if(q.nodeName){var Ll=mt(q.nodeName);if(!I[Ll]||rt[Ll])throw vm("root node is forbidden and cannot be sanitized in-place")}}else if(q instanceof i)1===(De=(At=Zw("\x3c!----\x3e")).ownerDocument.importNode(q,!0)).nodeType&&"BODY"===De.nodeName||"HTML"===De.nodeName?At=De:At.appendChild(De);else{if(!Oe&&!zt&&!ht&&-1===q.indexOf("<"))return O&&Jn?O.createHTML(q):q;if(!(At=Zw(q)))return Oe?null:Jn?T:""}At&&Ve&&Jo(At.firstChild);for(var Bo=tS(pn?q:At);sn=Bo.nextNode();)3===sn.nodeType&&sn===or||eS(sn)||(sn.content instanceof s&&VT(sn.content),oS(sn),or=sn);if(or=null,pn)return q;if(Oe){if(Qn)for(Mn=$.call(At.ownerDocument);At.firstChild;)Mn.appendChild(At.firstChild);else Mn=At;return G.shadowroot&&(Mn=W.call(r,Mn,!0)),Mn}var uo=ht?At.outerHTML:At.innerHTML;return ht&&I["!doctype"]&&At.ownerDocument&&At.ownerDocument.doctype&&At.ownerDocument.doctype.name&&nr(i_,At.ownerDocument.doctype.name)&&(uo="<!DOCTYPE "+At.ownerDocument.doctype.name+">\n"+uo),zt&&(uo=Ns(uo,_t," "),uo=Ns(uo,Lt," ")),O&&Jn?O.createHTML(uo):uo},n.setConfig=function(q){Xp(q),Yt=!0},n.clearConfig=function(){ui=null,Yt=!1},n.isValidAttribute=function(q,Mt,At){ui||Xp({});var De=mt(q),sn=mt(Mt);return nS(De,sn,At)},n.addHook=function(q,Mt){"function"==typeof Mt&&(J[q]=J[q]||[],fl(J[q],Mt))},n.removeHook=function(q){if(J[q])return XN(J[q])},n.removeHooks=function(q){J[q]&&(J[q]=[])},n.removeAllHooks=function(){J={}},n}();const fy=ct.each,u_=ct.trim,f_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],m_={ftp:21,http:80,https:443,mailto:25},p_=["img","video"],my=(t,e,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!t.allow_html_data_urls&&(/^data:image\//i.test(r)?(s=n,(pt(o=t.allow_svg_data_urls)?!o:!pt(s)||!Tt(p_,s))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,s};class io{constructor(e,n={}){this.path="",this.directory="",e=u_(e),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=r?r.path:new io(document.location.href).directory;if(""===r?.protocol)e="//mce_host"+o.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&fy(f_,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),o[i]=c}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),s&&(o.protocol="")}static parseDataUri(e){let n;const r=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(e,n,r={}){if(r.allow_script_urls)return!0;{const o=ps.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!my(r,o,n)}}static getDocumentBaseUrl(e){var n;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new io(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const r=new io(e,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?m_[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let r,o,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(r=0,o=i.length;r<o;r++)if(r>=l.length||i[r]!==l[r]){s=r+1;break}if(i.length<l.length)for(r=0,o=l.length;r<o;r++)if(r>=i.length||i[r]!==l[r]){s=r+1;break}if(1===s)return n;for(r=0,o=i.length-(s-1);r<o;r++)a+="../";for(r=s-1,o=l.length;r<o;r++)a+=r!==s-1?"/"+l[r]:l[r];return a}toAbsPath(e,n){let r=0;const o=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];fy(s,f=>{f&&i.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)0!==a[f].length&&"."!==a[f]&&(".."!==a[f]?r>0?r--:l.push(a[f]):r++);const c=i.length-r;let u;return u=c<=0?Vr(l).join("/"):i.slice(0,c).join("/")+"/"+Vr(l).join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const g_=ct.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Sm="data-mce-type";let py=0;const gy=(t,e,n,r)=>{var o,s,a,i;const l=e.validate,c=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(o=t.nodeValue)&&void 0!==o?o:"")&&(t.nodeValue=" "+t.nodeValue);const u=null!==(s=r?.tagName)&&void 0!==s?s:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===u)return;const f=R(t),h=Da(f,Sm),b=qn(f,"data-mce-bogus");if(!h&&Rt(b))return void("all"===b?Bt(f):se(f));const g=n.getElementRule(u);if(!l||g){if(pt(r)&&(r.allowedTags[u]=!0),l&&g&&!h){if(st(null!==(a=g.attributesForced)&&void 0!==a?a:[],v=>{Le(f,v.name,"{$uid}"===v.value?"mce_"+py++:v.value)}),st(null!==(i=g.attributesDefault)&&void 0!==i?i:[],v=>{Da(f,v.name)||Le(f,v.name,"{$uid}"===v.value?"mce_"+py++:v.value)}),g.attributesRequired&&!ke(g.attributesRequired,v=>Da(f,v))||g.removeEmptyAttrs&&(v=>{const p=v.dom.attributes;return null==p||0===p.length})(f))return void se(f);g.outputName&&g.outputName!==u&&((v,p)=>{const C=((k,A)=>{const O=ot(A),T=Jl(k);return Gr(O,T),O})(v,p);lt(v,C);const w=Re(v);Ot(C,w),Bt(v)})(f,g.outputName)}}else ee(c,u)?Bt(f):se(f)},hy=(t,e,n,r,o)=>!(r in g_&&my(t,o,n))&&(!t.validate||e.isValid(n,r)||Qe(r,"data-")||Qe(r,"aria-")),by=(t,e)=>t.hasAttribute(Sm)&&("id"===e||"class"===e||"style"===e),vy=(t,e)=>t in e.getBoolAttrs(),h_=(t,e,n)=>{const{attributes:r}=t;for(let o=r.length-1;o>=0;o--){const s=r[o],a=s.name,i=s.value;hy(e,n,t.tagName.toLowerCase(),a,i)||by(t,a)?vy(a,n)&&t.setAttribute(a,a):t.removeAttribute(a)}},yy=ct.makeMap,Cy=ct.extend,xy=(t,e,n)=>{const r=t.name,o=r in n&&"title"!==r&&"textarea"!==r,s=e.childNodes;for(let a=0,i=s.length;a<i;a++){const l=s[a],c=new Gn(l.nodeName.toLowerCase(),l.nodeType);if(vt(l)){const u=l.attributes;for(let f=0,h=u.length;f<h;f++){const b=u[f];c.attr(b.name,b.value)}}else at(l)?(c.value=l.data,o&&(c.raw=!0)):(us(l)||sS(l)||aS(l))&&(c.value=l.data);xy(c,l,n),t.append(c)}},Ja=(t={},e=gs())=>{const n=Zv(),r=Zv(),o={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((v,p)=>{if(v.sanitize){const C=((t,e)=>{const n=d_();return n.addHook("uponSanitizeElement",(r,o)=>{gy(r,t,e,o)}),n.addHook("uponSanitizeAttribute",(r,o)=>{const s=r.tagName.toLowerCase(),{attrName:a,attrValue:i}=o;o.keepAttr=hy(t,e,s,a,i),o.keepAttr?(o.allowedAttributes[a]=!0,vy(a,e)&&(o.attrValue=a),t.allow_svg_data_urls&&Qe(i,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):by(r,a)&&(o.forceKeepAttr=!0)}),n})(v,p);return(w,k)=>{C.sanitize(w,((A,O)=>{const T={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return T.PARSER_MEDIA_TYPE=O,A.allow_script_urls?T.ALLOWED_URI_REGEXP=/.*/:A.allow_html_data_urls&&(T.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),T})(v,k)),C.removed=[]}}return(C,w)=>{const k=document.createNodeIterator(C,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let A;for(;A=k.nextNode();)gy(A,v,p),vt(A)&&h_(A,v,p)}})(o,e),l=n.getFilters,f=r.getFilters,b=(v,p)=>{const C=Rt(p.attr(Sm)),w=!(1!==p.type||ee(v,p.name)||(k=e,A=p,1===A.type&&dc(k,A.name)&&Rt(A.attr(Di))));var k,A;return 3===p.type||w&&!C},g={schema:e,addAttributeFilter:r.addFilter,getAttributeFilters:f,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(v,p={})=>{var C;const w=o.validate,k=null!==(C=p.context)&&void 0!==C?C:o.root_name,A=((H,J,ut="html")=>{const mt="xhtml"===ut?"application/xhtml+xml":"text/html",_t=ee(e.getSpecialElements(),J.toLowerCase()),Lt=_t?`<${J}>${H}</${J}>`:H,ye=s.parseFromString("xhtml"===ut?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Lt}</body></html>`:`<body>${Lt}</body>`,mt).body;return a(ye,mt),_t?ye.firstChild:ye})(v,k,p.format);uu(e,A);const O=new Gn(k,11);xy(O,A,e.getSpecialElements()),A.innerHTML="";const[T,P]=((H,J,ut,mt)=>{const _t=ut.validate,Lt=J.getNonEmptyElements(),ae=J.getWhitespaceElements(),ye=Cy(yy("script,style,head,html,body,title,meta,param"),J.getBlockElements()),kt=Eg(J),Xt=/[ \t\r\n]+/g,Gt=/^[ \t\r\n]+/,I=/[ \t\r\n]+$/,j=Q=>{let rt=Q.parent;for(;pt(rt);){if(rt.name in ae)return!0;rt=rt.parent}return!1},G=Q=>Q.name in ye&&!mg(J,Q),et=(Q,rt)=>!pt(rt?Q.prev:Q.next)&&!be(Q.parent)&&G(Q.parent)&&(Q.parent!==H||!0===mt.isRootContent);return[Q=>{var rt,bt,Nt;if(3===Q.type&&!j(Q)){let dt=null!==(rt=Q.value)&&void 0!==rt?rt:"";dt=dt.replace(Xt," "),Nt=G,(pt(bt=Q.prev)&&(Nt(bt)||"br"===bt.name)||et(Q,!0))&&(dt=dt.replace(Gt,"")),0===dt.length?Q.remove():Q.value=dt}},Q=>{var rt,Nt,Ft;if(1===Q.type){const dt=J.getElementRule(Q.name);if(_t&&dt){const bt=cl(J,Lt,ae,Q);dt.paddInEmptyBlock&&bt&&(Nt=>{let Ft=Nt;for(;pt(Ft);){if(Ft.name in kt)return cl(J,Lt,ae,Ft);Ft=Ft.parent}return!1})(Q)?Xf(mt,G,Q):dt.removeEmpty&&bt?G(Q)?Q.remove():Q.unwrap():dt.paddEmpty&&(bt||lv(Nt=Q,"#text")&&(null===(Ft=Nt?.firstChild)||void 0===Ft?void 0:Ft.value)===mn)&&Xf(mt,G,Q)}}else if(3===Q.type&&!j(Q)){let dt=null!==(rt=Q.value)&&void 0!==rt?rt:"";(Q.next&&G(Q.next)||et(Q,!1))&&(dt=dt.replace(I,"")),0===dt.length?Q.remove():Q.value=dt}}]})(O,e,o,p),L=[],$={nodes:{},attributes:{}},U=H=>sv(l(),f(),H,$);if(((H,J,ut)=>{const mt=[];for(let _t=H,Lt=_t;_t;Lt=_t,_t=_t.walk()){const ae=_t;st(J,ye=>ye(ae)),be(ae.parent)&&ae!==H?_t=Lt:mt.push(ae)}for(let _t=mt.length-1;_t>=0;_t--){const Lt=mt[_t];st(ut,ae=>ae(Lt))}})(O,[T,U],[P,w?H=>{return ut=L,void(cv(e,J=H)&&ut.push(J));var J,ut}:Et]),L.reverse(),w&&L.length>0)if(p.context){const{pass:H,fail:J}=Wr(L,ut=>ut.parent===O);Yf(J,e,O,U),p.invalid=H.length>0}else Yf(L,e,O,U);const W=((H,J)=>{var ut;const mt=null!==(ut=J.forced_root_block)&&void 0!==ut?ut:H.forced_root_block;return!1===mt?"":!0===mt?"p":mt})(o,p);return W&&("body"===O.name||p.isRootContent)&&((H,J)=>{const ut=Cy(yy("script,style,head,html,body,title,meta,param"),e.getBlockElements()),mt=/^[ \t\r\n]+/,_t=/[ \t\r\n]+$/;let Lt=H.firstChild,ae=null;const ye=kt=>{var Xt,Gt;kt&&(Lt=kt.firstChild,Lt&&3===Lt.type&&(Lt.value=null===(Xt=Lt.value)||void 0===Xt?void 0:Xt.replace(mt,"")),Lt=kt.lastChild,Lt&&3===Lt.type&&(Lt.value=null===(Gt=Lt.value)||void 0===Gt?void 0:Gt.replace(_t,"")))};if(e.isValidChild(H.name,J.toLowerCase())){for(;Lt;){const kt=Lt.next;b(ut,Lt)?(ae||(ae=new Gn(J,1),ae.attr(o.forced_root_block_attrs),H.insert(ae,Lt)),ae.append(Lt)):(ye(ae),ae=null),Lt=kt}ye(ae)}})(O,W),p.invalid||av($,p),O}};return((v,p)=>{const C=v.schema;p.remove_trailing_brs&&v.addNodeFilter("br",(k,A,O)=>{const T=ct.extend({},C.getBlockElements()),P=C.getNonEmptyElements(),L=C.getWhitespaceElements();T.body=1;const M=$=>$.name in T&&mg(C,$);for(let $=0,U=k.length;$<U;$++){let W=k[$],H=W.parent;if(H&&T[H.name]&&W===H.lastChild){let J=W.prev;for(;J;){const ut=J.name;if("span"!==ut||"bookmark"!==J.attr("data-mce-type")){"br"===ut&&(W=null);break}J=J.prev}if(W&&(W.remove(),cl(C,P,L,H))){const ut=C.getElementRule(H.name);ut&&(ut.removeEmpty?H.remove():ut.paddEmpty&&Xf(O,M,H))}}else{let J=W;for(;H&&H.firstChild===J&&H.lastChild===J&&(J=H,!T[H.name]);)H=H.parent;if(J===H){const ut=new Gn("#text",3);ut.value=mn,W.replace(ut)}}}}),v.addAttributeFilter("href",k=>{let A=k.length;const O=T=>{const P=T?ct.trim(T):"";return/\b(noopener)\b/g.test(P)?P:P.split(" ").filter(M=>M.length>0).concat(["noopener"]).sort().join(" ")};if(!p.allow_unsafe_link_target)for(;A--;){const T=k[A];"a"===T.name&&"_blank"===T.attr("target")&&T.attr("rel",O(T.attr("rel")))}}),p.allow_html_in_named_anchor||v.addAttributeFilter("id,name",k=>{let A,O,T,P,L=k.length;for(;L--;)if(P=k[L],"a"===P.name&&P.firstChild&&!P.attr("href"))for(T=P.parent,A=P.lastChild;A&&T;)O=A.prev,T.insert(A,P),A=O}),p.fix_list_elements&&v.addNodeFilter("ul,ol",k=>{let A,O,T=k.length;for(;T--;)if(A=k[T],O=A.parent,O&&("ul"===O.name||"ol"===O.name))if(A.prev&&"li"===A.prev.name)A.prev.append(A);else{const P=new Gn("li",1);P.attr("style","list-style-type: none"),A.wrap(P)}});const w=C.getValidClasses();p.validate&&w&&v.addAttributeFilter("class",k=>{var A;let O=k.length;for(;O--;){const T=k[O],P=null!==(A=T.attr("class"))&&void 0!==A?A:"",L=ct.explode(P," ");let M="";for(let $=0;$<L.length;$++){const U=L[$];let W=!1,H=w["*"];H&&H[U]&&(W=!0),H=w[T.name],!W&&H&&H[U]&&(W=!0),W&&(M&&(M+=" "),M+=U)}M.length||(M=null),T.attr("class",M)}}),((k,A)=>{const{blob_cache:O}=A;if(O){const T=P=>{const L=P.attr("src");var M;(M=P).attr("src")===me.transparentSrc||pt(M.attr("data-mce-placeholder"))||(M=>pt(M.attr("data-mce-bogus")))(P)||be(L)||oy(O,L,!0).each(M=>{P.attr("src",M.blobUri())})};k.addAttributeFilter("src",P=>st(P,T))}})(v,p)})(g,o),(p=o).inline_styles&&((t,e,n)=>{var r;const o=yu();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=o,i=ct.explode(null!==(r=e.font_size_legacy_values)&&void 0!==r?r:""),s.addNodeFilter("font",l=>{st(l,c=>{const u=a.parse(c.attr("style")),f=c.attr("color"),h=c.attr("face"),b=c.attr("size");var g;f&&(u.color=f),h&&(u["font-family"]=h),b&&Ps(b).each(g=>{u["font-size"]=i[g-1]}),c.name="span",c.attr("style",a.serialize(u)),g=c,st(["color","face","size"],p=>{g.attr(p,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const c="html4"!==a.type;st(l,u=>{if(c)u.name="s";else{const f=i.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",i.serialize(f))}})})})(t,n,o)})(g,p,e),g;var p},wy=(t,e,n)=>{const r=Gc(s=t)?xs({validate:!1}).serialize(s):s,o=e(r);var s;if(o.isDefaultPrevented())return o;if(Gc(t)){if(o.content!==r){const s=Ja({validate:!1,forced_root_block:!1,sanitize:n}).parse(o.content,{context:t.name});return{...o,content:s}}return{...o,content:t}}return o},Sy=(t,e)=>{if(e.no_events)return Kn.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?Kn.error(Ob(t,{content:"",...n}).content):Kn.value(n)}},ky=(t,e,n)=>n.no_events?e:wy(e,o=>Ob(t,{...n,content:o}),ju(t)).content,km=(t,e)=>{if(e.no_events)return Kn.value(e);{const n=wy(e.content,r=>{return o=t,s={...e,content:r},o.dispatch("BeforeSetContent",s);var o,s},ju(t));return n.isDefaultPrevented()?(Tb(t,n),Kn.error(void 0)):Kn.value(n)}},Em=(t,e,n)=>{n.no_events||Tb(t,{...n,content:e})},Nm=(t,e,n)=>({element:t,width:e,rows:n}),Ey=(t,e)=>({element:t,cells:e}),v_=(t,e)=>({x:t,y:e}),Ny=(t,e)=>vr(t,e).bind(Ps).getOr(1),y_=(t,e,n)=>{const r=t.rows;return!!(r[n]?r[n].cells:[])[e]},_y=t=>gn(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),Ay=(t,e)=>{const n=t.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let s=0;s<o.length;s++)if(ne(o[s],e))return N.some(v_(s,r))}return N.none()},Ry=(t,e,n,r,o)=>{const s=[],a=t.rows;for(let i=n;i<=o;i++){const l=a[i].cells,c=e<r?l.slice(e,r+1):l.slice(r,e+1);s.push(Ey(a[i].element,c))}return s},C_=t=>((e,n)=>{const r=Zs(e.element),o=ot("tbody");return Ot(o,n),Ct(r,o),r})(t,oe(t.rows,n=>{const r=oe(n.cells,s=>{const a=jg(s);return nn(a,"colspan"),nn(a,"rowspan"),a}),o=Zs(n.element);return Ot(o,r),o})),Ty=()=>ff([]),rd=(t,e)=>e>=0&&e<t.length&&Wa(t.charAt(e)),Oy=t=>Vo(t.innerText),Dy=t=>vt(t)?t.outerHTML:at(t)?ps.encodeRaw(t.data,!1):us(t)?"\x3c!--"+t.data+"--\x3e":"",E_=zo(()=>document.implementation.createHTMLDocument("undo")),od=t=>{const e=(n=t.getBody(),qt(oe(an(n.childNodes),Dy),s=>s.length>0));var n;const r=en(e,s=>{const a=p0(t.serializer,s);return a.length>0?[a]:[]}),o=r.join("");return-1!==o.indexOf("</iframe>")?{type:"fragmented",fragments:r,content:"",bookmark:null,beforeBookmark:null}:(s=>({type:"complete",fragments:null,content:s,bookmark:null,beforeBookmark:null}))(o)},_m=(t,e,n)=>{const r=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,r)=>{let o=0;st(n,s=>{var a,i;0===s[0]?o++:1===s[0]?(((a,i,l)=>{const c=(u=>{let f;const h=document.createElement("div"),b=document.createDocumentFragment();for(u&&(h.innerHTML=u);f=h.firstChild;)b.appendChild(f);return b})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(c,a.childNodes[l]):a.appendChild(c)})(r,s[1],o),o++):2===s[0]&&(i=o,(a=r).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,r)=>{const o=n.length+r.length+2,s=new Array(o),a=new Array(o),i=(f,h,b,g,v)=>{const p=c(f,h,b,g);if(null===p||p.start===h&&p.diag===h-g||p.end===f&&p.diag===f-b){let C=f,w=b;for(;C<h||w<g;)C<h&&w<g&&n[C]===r[w]?(v.push([0,n[C]]),++C,++w):h-f>g-b?(v.push([2,n[C]]),++C):(v.push([1,r[w]]),++w)}else{i(f,p.start,b,p.start-p.diag,v);for(let C=p.start;C<p.end;++C)v.push([0,n[C]]);i(p.end,h,p.end-p.diag,g,v)}},l=(f,h,b,g)=>{let v=f;for(;v-h<g&&v<b&&n[v]===r[v-h];)++v;return{start:f,end:v,diag:h}},c=(f,h,b,g)=>{const v=h-f,p=g-b;if(0===v||0===p)return null;const C=v-p,w=p+v,k=(w%2==0?w:w+1)/2;let A,O,T,P,L;for(s[1+k]=f,a[1+k]=h+1,A=0;A<=k;++A){for(O=-A;O<=A;O+=2){for(T=O+k,s[T]=O===-A||O!==A&&s[T-1]<s[T+1]?s[T+1]:s[T-1]+1,P=s[T],L=P-f+b-O;P<h&&L<g&&n[P]===r[L];)s[T]=++P,++L;if(C%2!=0&&C-A<=O&&O<=C+A&&a[T-C]<=s[T])return l(a[T-C],O+f-b,h,g)}for(O=C-A;O<=C+A;O+=2){for(T=O+k-C,a[T]=O===C-A||O!==C+A&&a[T+1]<=a[T-1]?a[T+1]-1:a[T-1],P=a[T]-1,L=P-f+b-O;P>=f&&L>=b&&n[P]===r[L];)a[T]=P--,L--;if(C%2==0&&-A<=O&&O<=A&&a[T]<=s[T+C])return l(a[T],O+f-b,h,g)}}return null},u=[];return i(0,n.length,0,r.length,u),u})(oe(an(e.childNodes),Dy),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!pt(r)||!tb(r)||!r.isFakeCaret}),r&&(t.selection.moveToBookmark(r),t.selection.scrollIntoView())},Am=t=>"fragmented"===t.type?t.fragments.join(""):t.content,By=t=>{const e=ot("body",E_());return $e(e,Am(t)),st(fn(e,"*[data-mce-bogus]"),se),le(e)},Rm=(t,e)=>{return!(!t||!e)&&(r=e,!(Am(t)!==Am(r))||((n,r)=>By(n)===By(r))(t,e));var r},Tm=t=>0===t.get(),sd=(t,e,n)=>{Tm(n)&&(t.typing=e)},Ly=(t,e)=>{t.typing&&(sd(t,!1,e),t.add())},Py=t=>({init:{bindEvents:Et},undoManager:{beforeChange:(e,n)=>{return r=t,s=n,void(Tm(e)&&s.set(Bu(r.selection)));var r,s},add:(e,n,r,o,s,a)=>((i,l,c,u,f,h,b)=>{const g=od(i),v=ct.extend(h||{},g);if(!Tm(u)||i.removed)return null;const p=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:v,lastLevel:p,originalEvent:b}).isDefaultPrevented()||p&&Rm(p,v))return null;l.data[c.get()]&&f.get().each(k=>{l.data[c.get()].beforeBookmark=k});const C=Pk(i);if(C&&l.data.length>C){for(let k=0;k<l.data.length-1;k++)l.data[k]=l.data[k+1];l.data.length--,c.set(l.data.length)}v.bookmark=Bu(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(v),c.set(l.data.length-1);const w={level:v,lastLevel:p,originalEvent:b};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",w),i.dispatch("change",w)):i.dispatch("AddUndo",w),v})(t,e,n,r,o,s,a),undo:(e,n,r)=>((o,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,sd(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],_m(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(t,e,n,r),redo:(e,n)=>((r,o,s)=>{let a;return o.get()<s.length-1&&(o.set(o.get()+1),a=s[o.get()],_m(r,a,!1),r.setDirty(!0),r.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return r=t,s=n,(o=e).data=[],s.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return r=t,o=e,n.get()>0||o.typing&&o.data[0]&&!Rm(od(r),o.data[0]);var r,o},hasRedo:(e,n)=>{return r=e,n.get()<r.data.length-1&&!r.typing;var r},transact:(e,n,r)=>{return a=r,Ly(o=e,n),o.beforeChange(),o.ignore(a),o.add();var o,a},ignore:(e,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(e,n),extra:(e,n,r,o)=>((s,a,i,l,c)=>{if(a.transact(l)){const u=a.data[i.get()].bookmark,f=a.data[i.get()-1];_m(s,f,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=u)}})(t,e,n,r,o)},formatter:{match:(e,n,r,o)=>om(t,e,n,r,o),matchAll:(e,n)=>((r,o,s)=>{const a=[],i={},l=r.selection.getStart();return r.dom.getParent(l,c=>{for(let u=0;u<o.length;u++){const f=o[u];!i[f]&&Eo(r,c,f,s)&&(i[f]=!0,a.push(f))}},r.dom.getRoot()),a})(t,e,n),matchNode:(e,n,r,o)=>Eo(t,e,n,r,o),canApply:e=>((n,r)=>{const o=n.formatter.get(r),s=n.dom;if(o){const a=n.selection.getStart(),i=Lc(s,a);for(let l=o.length-1;l>=0;l--){const c=o[l];if(!_r(c))return!0;for(let u=i.length-1;u>=0;u--)if(s.is(i[u],c.selector))return!0}}return!1})(t,e),closest:e=>((n,r)=>{const o=s=>ne(s,R(n.getBody()));return N.from(n.selection.getStart(!0)).bind(s=>em(R(s),a=>jn(r,i=>{return Eo(n,a.dom,c=i)?N.some(c):N.none();var c}),o)).getOrNull()})(t,e),apply:(e,n,r)=>Vv(t,e,n,r),remove:(e,n,r,o)=>qv(t,e,n,r,o),toggle:(e,n,r)=>((o,s,a,i)=>{const l=o.formatter.get(s);l&&(!om(o,s,a,i)||"toggle"in l[0]&&!l[0].toggle?Vv(o,s,a,i):qv(o,s,a,i))})(t,e,n,r),formatChanged:(e,n,r,o,s)=>{return((h,b,g,v,p,C)=>{const w=b.get();st(g.split(","),k=>{const A=Se(w,k).getOrThunk(()=>{const T={withSimilar:{state:rn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:rn(!1),similar:!1,callbacks:[]},withVars:[]};return w[k]=T,T}),O=()=>{const T=Yv(h);return Gv(h,T,k,p,C).isSome()};if(Be(C)){const T=p?A.withSimilar:A.withoutSimilar;T.callbacks.push(v),1===T.callbacks.length&&T.state.set(O())}else A.withVars.push({state:rn(O()),similar:p,vars:C,callback:v})}),b.set(w)})(t,i=e,l=n,c=r,o,s),{unbind:()=>((h,b,g)=>{const v=h.get();st(b.split(","),p=>Se(v,p).each(C=>{v[p]={withSimilar:{...C.withSimilar,callbacks:qt(C.withSimilar.callbacks,w=>w!==g)},withoutSimilar:{...C.withoutSimilar,callbacks:qt(C.withoutSimilar.callbacks,w=>w!==g)},withVars:qt(C.withVars,w=>w.callback!==g)}})),h.set(v)})(i,l,c)};var i,l,c}},editor:{getContent:e=>{return r=e,N.from((n=t).getBody()).fold(ft("tree"===r.format?new Gn("body",11):""),o=>((t,e,n)=>{let r;return r="raw"===e.format?ct.trim(sN(t.serializer,n.innerHTML)):"text"===e.format?((o,s)=>{const a=o.getDoc(),i=Vt(R(o.getBody())),l=ot("div",a);Le(l,"data-mce-bogus","all"),ds(l,{position:"fixed",left:"-9999999px",top:"0"}),$e(l,s.innerHTML),g0(l),h0(l);const c=bn(f=i)?f:R(ue(f).dom.body);var f;Ct(c,l);const u=Vo(l.dom.innerText);return Bt(l),u})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((o,s)=>{const a=fr(o),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!oc(R(n))&&Rt(r)?ct.trim(r):r})(n,r,o));var n,r},setContent:(e,n)=>{return o=e,s=n,N.from((r=t).getBody()).map(a=>Gc(o)?((i,l,c,u)=>{iv(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const f=xs({validate:!1},i.schema).serialize(c),h=oc(R(l))?f:ct.trim(f);return tm(i,h,u.no_selection),{content:c,html:h}})(r,a,o,s):((i,l,c,u)=>{if(0===c.length||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const h=fr(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),h.toLowerCase())?(c=f,c=i.dom.createHTML(h,$i(i),c)):c||(c=f),tm(i,c,u.no_selection),{content:c,html:c}}{"raw"!==u.format&&(c=xs({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const f=oc(R(l))?c:ct.trim(c);return tm(i,f,u.no_selection),{content:f,html:f}}})(r,a,o,s)).getOr({content:o,html:Gc(s.content)?"":s.content});var r,o,s},insertContent:(e,n)=>LN(t,e,n),addVisual:e=>((n,r)=>{const o=n.dom,s=pt(r)?r:n.getBody();st(o.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=zk(n),l=o.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?o.removeClass(a,i):o.addClass(a,i);break;case"A":if(!o.getAttrib(a,"href")){const c=o.getAttrib(a,"name")||a.id,u=Rh(n);c&&n.hasVisual?o.addClass(a,u):o.removeClass(a,u)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((r,o,s={})=>{const a=(i=s,l=o,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return Sy(r,a).fold(de,i=>{const l=((c,u)=>{if("text"===u.format)return N.from((f=c).selection.getRng()).map(h=>{var b;const g=N.from(f.dom.getParent(h.commonAncestorContainer,f.dom.isBlock)),v=f.getBody(),p=g.map(T=>T.nodeName).getOr("div").toLowerCase(),C=R(h.cloneContents());g0(C),h0(C);const w=f.dom.add(v,p,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},C.dom),k=Oy(w),A=Vo(null!==(b=w.textContent)&&void 0!==b?b:"");if(f.dom.remove(w),rd(A,0)||rd(A,A.length-1)){const O=g.getOr(v),T=Oy(O),P=T.indexOf(k);return-1===P?k:(rd(T,P-1)?" ":"")+k+(rd(T,P+k.length)?" ":"")}return k}).getOr("");var f;{const f=((h,b)=>{const g=h.selection.getRng(),v=h.dom.create("body"),p=h.selection.getSel(),C=Ef(h,Yu(p)),w=b.contextual?((t,e)=>{const n=ib(e,t);return n.length>0?((t,e)=>{return(n=t,r=e[0],cr(r,"table",yt(ne,n))).bind(n=>{const r=e[0],o=e[e.length-1],s=(a=>{const i=Nm(Zs(a),0,[]);return st(fn(a,"tr"),(l,c)=>{st(fn(l,"td,th"),(u,f)=>{((h,b,g,v,p)=>{const C=Ny(p,"rowspan"),w=Ny(p,"colspan"),k=h.rows;for(let A=g;A<g+C;A++){k[A]||(k[A]=Ey(jg(v),[]));for(let O=b;O<b+w;O++)k[A].cells[O]=A===g&&O===b?p:Zs(p)}})(i,((h,b,g)=>{for(;y_(h,b,g);)b++;return b})(i,f,c),c,l,u)})}),Nm(i.element,_y(i.rows),i.rows)})(n);return(a=s,i=r,l=o,Ay(a,i).bind(c=>Ay(a,l).map(u=>((f,h,b)=>{const g=h.x,v=h.y,p=b.x,C=b.y,w=v<C?Ry(f,g,v,p,C):Ry(f,g,C,p,v);return Nm(f.element,_y(w),w)})(a,c,u)))).map(a=>ff([C_(a)]));var a,i,l}).getOrThunk(Ty);var n,r})(t,n):(r=t,(o=e).length>0&&o[0].collapsed?Ty():(s=r,((i,l)=>{const c=gn(l,(u,f)=>(Ct(f,u),f),i);return l.length>0?ff([c]):c})(R((a=o[0]).cloneContents()),((t,e)=>{const n=R(e.commonAncestorContainer),r=Go(n,t),o=qt(r,fS),s=(l=e,Ue(i=r,c=>"li"===Ee(c)&&Ju(c,l)).fold(ft([]),c=>{return(u=i,Ue(u,f=>"ul"===Ee(f)||"ol"===Ee(f))).map(u=>{const f=ot(Ee(u)),h=br(V(u),(b,g)=>Qe(g,"list-style"));return ds(f,h),[ot("li"),f]}).getOr([]);var u})),a=o.concat(s.length?s:(i=>Ti(i)?fe(i).filter(su).fold(ft([]),l=>[i,l]):su(i)?[i]:[])(n));var i,l;return oe(a,Zs)})(s,a))));var r,o,s,a})(R(h.getBody()),C).dom:g.cloneContents();return w&&v.appendChild(w),h.selection.serializer.serialize(v,b)})(c,u);return"tree"===u.format?f:c.selection.isCollapsed()?"":f}})(r,i);return ky(r,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(u0(R(t.getBody())).isNone()){const r=Z('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());Ct(r,R(e.extractContents())),e.insertNode(r.dom),fe(r).each(o=>o.dom.normalize()),(n=r,((o,s)=>{const a=i=>{const l=Re(i);for(let c=l.length-1;c>=0;c--){const u=l[c];if(s(u))return N.some(u);const f=a(u);if(f.isSome())return f}return N.none()};return a(o)})(n,c0)).map(o=>{var s;t.selection.setCursorLocation(o.dom,"img"===Ee(s=o)?1:eg(s).fold(()=>Re(s).length,a=>a.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=R(t.getBody()),u0(n).each(r=>{const o=e.selection.getBookmark();se(r),e.selection.moveToBookmark(o)});var e,n}},raw:{getModel:()=>N.none()}}),_o=t=>ee(t.plugins,"rtc"),Om=t=>t.rtcInstance?t.rtcInstance:Py(t),He=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},My=t=>He(t).init.bindEvents(),Iy=t=>0===t.dom.length?(Bt(t),N.none()):N.some(t),Fy=(t,e,n,r)=>{t.bind(o=>((r?Pf:Wc)(o.dom,r?o.dom.length:0),e.filter(Tn).map(s=>((a,i,l,c)=>{const u=a.dom,f=i.dom,h=c?u.length:f.length;c?(Mf(u,f,!1,!c),l.setStart(f,h)):(Mf(f,u,!1,!c),l.setEnd(f,h))})(o,s,n,r)))).orThunk(()=>{return(s=e,a=r,s.filter(i=>tl.isBookmarkNode(i.dom)).bind(a?$n:Yr)).or(e).filter(Tn).map(s=>((a,i)=>{fe(a).each(l=>{const c=a.dom;i&&al(l,X(c,0))?Wc(c,0):!i&&il(l,X(c,c.length))&&Pf(c,c.length)})})(s,r));var s,a})},jy=(t,e,n)=>{if(ee(t,e)){const r=qt(t[e],o=>o!==n);0===r.length?delete t[e]:t[e]=r}},zy=t=>!(!t||!t.ownerDocument)&&cn(R(t.ownerDocument),R(t)),Hy=(t,e,n,r)=>{let o,s;const{selectorChangedWithUnbind:a}=((p,C)=>{let w,k;const A=(T,P)=>Ue(P,L=>p.is(L,T)),O=T=>p.getParents(T,void 0,p.getRoot());return{selectorChangedWithUnbind:(T,P)=>(w||(w={},k={},C.on("NodeChange",L=>{const M=L.element,$=O(M),U={};we(w,(W,H)=>{A(H,$).each(J=>{k[H]||(st(W,ut=>{ut(!0,{node:J,selector:H,parents:$})}),k[H]=W),U[H]=W})}),we(k,(W,H)=>{U[H]||(delete k[H],st(W,J=>{J(!1,{node:M,selector:H,parents:$})}))})})),w[T]||(w[T]=[]),w[T].push(P),A(T,O(C.selection.getStart())).each(()=>{k[T]=w[T]}),{unbind:()=>{jy(w,T,P),jy(k,T,P)}})}})(t,r),i=(p,C)=>((w,k,A={})=>{const O=(T=A,P=k,{format:"html",...T,set:!0,selection:!0,content:P});var T,P;km(w,O).each(T=>{const P=((M,$)=>{if("raw"!==$.format){const U=M.selection.getRng(),W=M.dom.getParent(U.commonAncestorContainer,M.dom.isBlock),H=W?{context:W.nodeName.toLowerCase()}:{},J=M.parser.parse($.content,{forced_root_block:!1,...H,...$});return xs({validate:!1},M.schema).serialize(J)}return $.content})(w,T),L=w.selection.getRng();((M,$)=>{const U=N.from($.firstChild).map(R),W=N.from($.lastChild).map(R);M.deleteContents(),M.insertNode($);const H=U.bind(Yr).filter(Tn).bind(Iy),J=W.bind($n).filter(Tn).bind(Iy);Fy(H,U,M,!0),Fy(J,W,M,!1),M.collapse(!1)})(L,L.createContextualFragment(P)),w.selection.setRng(L),rl(w,L),Em(w,P,T)})})(r,p,C),l=p=>{const C=u();C.collapse(!!p),f(C)},c=()=>e.getSelection?e.getSelection():e.document.selection,u=()=>{let p;const C=(k,A,O)=>{try{return A.compareBoundaryPoints(k,O)}catch{return-1}},w=e.document;if(pt(r.bookmark)&&!ca(r)){const k=yf(r);if(k.isSome())return k.map(A=>Ef(r,[A])[0]).getOr(w.createRange())}try{const k=c();k&&!Zl(k.anchorNode)&&(p=k.rangeCount>0?k.getRangeAt(0):w.createRange(),p=Ef(r,[p])[0])}catch{}if(p||(p=w.createRange()),Ai(p.startContainer)&&p.collapsed){const k=t.getRoot();p.setStart(k,0),p.setEnd(k,0)}return o&&s&&(0===C(p.START_TO_START,p,o)&&0===C(p.END_TO_END,p,o)?p=s:(o=null,s=null)),p},f=(p,C)=>{if(!((k=p)&&zy(k.startContainer)&&zy(k.endContainer)))return;var k;const w=c();if(p=r.dispatch("SetSelectionRange",{range:p,forward:C}).range,w){s=p;try{w.removeAllRanges(),w.addRange(p)}catch{}!1===C&&w.extend&&(w.collapse(p.endContainer,p.endOffset),w.extend(p.startContainer,p.startOffset)),o=w.rangeCount>0?w.getRangeAt(0):null}if(!p.collapsed&&p.startContainer===p.endContainer&&w?.setBaseAndExtent&&p.endOffset-p.startOffset<2&&p.startContainer.hasChildNodes()){const k=p.startContainer.childNodes[p.startOffset];k&&"IMG"===k.nodeName&&(w.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset),w.anchorNode===p.startContainer&&w.focusNode===p.endContainer||w.setBaseAndExtent(k,0,k,1))}r.dispatch("AfterSetSelectionRange",{range:p,forward:C})},h=()=>{const p=c(),C=p?.anchorNode,w=p?.focusNode;if(!p||!C||!w||Zl(C)||Zl(w))return!0;const k=t.createRng(),A=t.createRng();try{k.setStart(C,p.anchorOffset),k.collapse(!0),A.setStart(w,p.focusOffset),A.collapse(!0)}catch{return!0}return k.compareBoundaryPoints(k.START_TO_START,A)<=0},b={dom:t,win:e,serializer:n,editor:r,expand:(p={type:"word"})=>f(la(t).expand(u(),p)),collapse:l,setCursorLocation:(p,C)=>{const w=t.createRng();pt(p)&&pt(C)?(w.setStart(p,C),w.setEnd(p,C),f(w),l(!1)):(Zu(t,w,r.getBody(),!0),f(w))},getContent:p=>((C,w={})=>{return A=w.format?w.format:"html",O=w,He(C).selection.getContent(A,O);var A,O})(r,p),setContent:i,getBookmark:(p,C)=>g.getBookmark(p,C),moveToBookmark:p=>g.moveToBookmark(p),select:(p,C)=>{return(w=t,k=p,A=C,N.from(k).bind(O=>N.from(O.parentNode).map(T=>{const P=w.nodeIndex(O),L=w.createRng();return L.setStart(T,P),L.setEnd(T,P+1),A&&(Zu(w,L,O,!0),Zu(w,L,O,!1)),L}))).each(f),p;var w,k,A},isCollapsed:()=>{const p=u(),C=c();return!(!p||p.item)&&(p.compareEndPoints?0===p.compareEndPoints("StartToEnd",p):!C||p.collapsed)},isEditable:()=>{const p=u(),C=r.getBody().querySelectorAll('[data-mce-selected="1"]');return C.length>0?ar(C,w=>t.isEditable(w.parentElement)):p.startContainer===p.endContainer?t.isEditable(p.startContainer):t.isEditable(p.startContainer)&&t.isEditable(p.endContainer)},isForward:h,setNode:p=>(i(t.getOuterHTML(p)),p),getNode:()=>((p,C)=>{if(!C)return p;let w=C.startContainer,k=C.endContainer;const A=C.startOffset,O=C.endOffset;let T=C.commonAncestorContainer;C.collapsed||(w===k&&O-A<2&&w.hasChildNodes()&&(T=w.childNodes[A]),at(w)&&at(k)&&(w=w.length===A?l0(w.nextSibling,!0):w.parentNode,k=0===O?l0(k.previousSibling,!1):k.parentNode,w&&w===k&&(T=w)));const P=at(T)?T.parentNode:T;return vt(P)?P:p})(r.getBody(),u()),getSel:c,setRng:f,getRng:u,getStart:p=>a0(r.getBody(),u(),p),getEnd:p=>i0(r.getBody(),u(),p),getSelectedBlocks:(p,C)=>((w,k,A,O)=>{const T=[],P=w.getRoot(),L=w.getParent(A||a0(P,k,k.collapsed),w.isBlock),M=w.getParent(O||i0(P,k,k.collapsed),w.isBlock);if(L&&L!==P&&T.push(L),L&&M&&L!==M){let $;const U=new Ze(L,P);for(;($=U.next())&&$!==M;)w.isBlock($)&&T.push($)}return M&&L!==M&&M!==P&&T.push(M),T})(t,u(),p,C),normalize:()=>{const p=u(),C=c();if(!(Yu(C).length>1)&&Oc(r)){const w=jc(t,p);return w.each(k=>{f(k,h())}),w.getOr(p)}return p},selectorChanged:(p,C)=>(a(p,C),b),selectorChangedWithUnbind:a,getScrollContainer:()=>{let p,C=t.getRoot();for(;C&&"BODY"!==C.nodeName;){if(C.scrollHeight>C.clientHeight){p=C;break}C=C.parentNode}return p},scrollIntoView:(p,C)=>{var w;pt(p)?((w=r).inline?VE:XE)(w,p,C):rl(r,u(),C)},placeCaretAt:(p,C)=>f(jb(p,C,r.getDoc())),getBoundingClientRect:()=>{const p=u();return p.collapsed?X.fromRangeStart(p).getClientRects()[0]:p.getBoundingClientRect()},destroy:()=>{e=o=s=null,v.destroy()}},g=tl(b),v=Lb(b,r);return b.bookmarkManager=g,b.controlSelection=v,b},N_=(t,e,n)=>{-1===ct.inArray(e,n)&&(t.addAttributeFilter(n,(r,o)=>{let s=r.length;for(;s--;)r[s].attr(o,null)}),e.push(n))},Uy=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],r=e&&e.dom?e.dom:xe.DOM,o=e&&e.schema?e.schema:gs(t);t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs;const s=Ja(t,o);return i=t,l=r,(a=s).addAttributeFilter("data-mce-tabindex",(c,u)=>{let f=c.length;for(;f--;){const h=c[f];h.attr("tabindex",h.attr("data-mce-tabindex")),h.attr(u,null)}}),a.addAttributeFilter("src,href,style",(c,u)=>{const f="data-mce-"+u,h=i.url_converter,b=i.url_converter_scope;let g=c.length;for(;g--;){const v=c[g];let p=v.attr(f);void 0!==p?(v.attr(u,p.length>0?p:null),v.attr(f,null)):(p=v.attr(u),"style"===u?p=l.serializeStyle(l.parseStyle(p),v.name):h&&(p=h.call(b,p,u,v.name)),v.attr(u,p.length>0?p:null))}}),a.addAttributeFilter("class",c=>{let u=c.length;for(;u--;){const f=c[u];let h=f.attr("class");h&&(h=h.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",h.length>0?h:null))}}),a.addAttributeFilter("data-mce-type",(c,u,f)=>{let h=c.length;for(;h--;){const b=c[h];"bookmark"===b.attr("data-mce-type")&&!f.cleanup&&(N.from(b.firstChild).exists(v=>{var p;return!ac(null!==(p=v.value)&&void 0!==p?p:"")})?b.unwrap():b.remove())}}),a.addNodeFilter("noscript",c=>{var u;let f=c.length;for(;f--;){const h=c[f].firstChild;h&&(h.value=ps.decode(null!==(u=h.value)&&void 0!==u?u:""))}}),a.addNodeFilter("script,style",(c,u)=>{var f;const h=g=>g.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=c.length;for(;b--;){const g=c[b],v=g.firstChild,p=null!==(f=v?.value)&&void 0!==f?f:"";if("script"===u){const C=g.attr("type");C&&g.attr("type","mce-no/type"===C?null:C.replace(/^mce\-/,"")),"xhtml"===i.element_format&&v&&p.length>0&&(v.value="// <![CDATA[\n"+h(p)+"\n// ]]>")}else"xhtml"===i.element_format&&v&&p.length>0&&(v.value="\x3c!--\n"+h(p)+"\n--\x3e")}}),a.addNodeFilter("#comment",c=>{let u=c.length;for(;u--;){const f=c[u],h=f.value;i.preserve_cdata&&0===h?.indexOf("[CDATA[")?(f.name="#cdata",f.type=4,f.value=l.decode(h.replace(/^\[CDATA\[|\]\]$/g,""))):0===h?.indexOf("mce:protected ")&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(h).substr(14))}}),a.addNodeFilter("xml:namespace,input",(c,u)=>{let f=c.length;for(;f--;){const h=c[f];7===h.type?h.remove():1===h.type&&("input"!==u||h.attr("type")||h.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",c=>{st(c,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(a.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(c,u)=>{let f=c.length;for(;f--;)c[f].attr(u,null)}),{schema:o,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(a,i={})=>{const l={format:"html",...i},c=(b=a,p=g=l,pt(v=h=e)&&v.hasEventListeners("PreProcess")&&!p.no_events?((v,p,C)=>{let w;const k=v.dom;let A=p.cloneNode(!0);const O=document.implementation;if(O.createHTMLDocument){const T=O.createHTMLDocument("");ct.each("BODY"===A.nodeName?A.childNodes:[A],P=>{T.body.appendChild(T.importNode(P,!0))}),A="BODY"!==A.nodeName?T.body.firstChild:T.body,w=k.doc,k.doc=T}return P={...C,node:A},v.dispatch("PreProcess",P),w&&(k.doc=w),A;var P})(h,b,g):b),u=((h,b,g)=>{const v=Vo(g.getInner?b.innerHTML:h.getOuterHTML(b));return g.selection||oc(R(b))?v:ct.trim(v)})(r,c,l),f=((h,b,g)=>{const v=g.selection?{forced_root_block:!1,...g}:g,p=h.parse(b,v);return(C=>{const w=A=>"br"===A?.name,k=C.lastChild;if(w(k)){const A=k.prev;w(A)&&(k.remove(),A.remove())}})(p),p})(s,u,l);var h,b,g,v,p;return"tree"===l.format?f:((h,b,g,v,p)=>{var A;return((w,k,A)=>{return!k.no_events&&w?(T=w,P={...k,content:A},T.dispatch("PostProcess",P)).content:A;var T,P})(h,p,(A=v,xs(b,g).serialize(A)))})(e,t,o,f,l)},addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:yt(N_,s,n),getTempAttrs:ft(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter};var a,i,l})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Dm=(t,e,n={})=>{const r=(o=n,s=e,{format:"html",...o,set:!0,content:s});var o,s;return km(t,r).map(o=>{const s=(i=o.content,l=o,Om(t).editor.setContent(i,l));var i,l;return Em(t,s.html,o),s.content}).getOr(e)},A_="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),R_="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),T_="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),qy=[{name:"template",replacedWith:"Advanced Template"}],$y=(t,e)=>{const n=qt(e,r=>ee(t,r));return Mo(n)},Wy=(t,e)=>{const n=ct.makeMap(t.plugins," "),r=qt(e,o=>ee(n,o));return Mo(r)},P_=t=>Ue(qy,e=>e.name===t).fold(()=>t,e=>`${t}, replaced by ${e.replacedWith}`),ad=xe.DOM,id=t=>N.from(t).each(e=>e.destroy()),ld=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>ee(t,e)}})(),Za=Ln.ModelManager,Vy=(t,e)=>e.dom[t],Ky=(t,e)=>parseInt(dr(e,t),10),M_=yt(Vy,"clientWidth"),I_=yt(Vy,"clientHeight"),F_=yt(Ky,"margin-top"),j_=yt(Ky,"margin-left"),Xy=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},r=()=>N.from(e[0]),o=()=>{st(e,l=>{l.reposition()})},s=l=>{Ds(e,c=>c===l).each(c=>{e.splice(c,1)})},a=(l,c=!0)=>{return t.removed||!(f=(u=t).inline?u.getBody():u.getContentAreaContainer(),N.from(f).map(R)).map(xr).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),Ue(e,u=>{return!((f=n().getArgs(u)).type!==(h=l).type||f.text!==h.text||f.progressBar||f.timeout||h.progressBar||h.timeout);var f,h}).getOrThunk(()=>{t.editorManager.setActive(t);const u=n().open(l,()=>{s(u),o(),r().fold(()=>t.focus(),f=>Jb(R(f.getEl())))});return(f=>{e.push(f)})(u),o(),t.dispatch("OpenNotification",{notification:{...u}}),u}));var u,f},i=ft(e);return(l=t).on("SkinLoaded",()=>{const c=Sk(l);c&&a({text:c,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{st(e.slice(),c=>{n().close(c)})}),{open:a,close:()=>{r().each(l=>{n().close(l),s(l),o()})},getNotifications:i};var l},ti=Ln.PluginManager,ha=Ln.ThemeManager,Gy=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},r=(a,i)=>(...l)=>i?i.apply(a,l):void 0,o=a=>{t.dispatch("CloseWindow",{dialog:a}),e=qt(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),vf(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{st(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,o)),openUrl:a=>s(()=>n().openUrl(a,o)),alert:(a,i,l)=>{const c=n();c.alert(a,r(l||c,i))},confirm:(a,i,l)=>{const c=n();c.confirm(a,r(l||c,i))},close:()=>{N.from(e[e.length-1]).each(a=>{n().close(a),o(a)})}}},Yy=(t,e)=>{t.notificationManager.open({type:"error",text:e})},cd=(t,e)=>{t._skinLoaded?Yy(t,e):t.on("SkinLoaded",()=>{Yy(t,e)})},ml=(t,e,n)=>{_b(t,e,{message:n}),console.error(n)},pl=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,dd=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},Qy=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",r=`content${t.editorManager.suffix}.css`;return oe(e,o=>/^[a-z0-9\-]+$/i.test(o)&&!t.inline?`${n}/${o}/${r}`:t.documentBaseURI.toAbsolute(o))},Jy=()=>{let t={};const e=(r,o)=>({status:r,resultUri:o}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{const o=t[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:r=>{t[r]=e(1,null)},markUploaded:(r,o)=>{t[r]=e(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}};let H_=0;const Zy=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),t1=(t,e)=>((t,e)=>{const n={},r=(l,c)=>new Promise((u,f)=>{const h=new XMLHttpRequest;h.open("POST",e.url),h.withCredentials=e.credentials,h.upload.onprogress=g=>{c(g.loaded/g.total*100)},h.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+h.status)},h.onload=()=>{if(h.status<200||h.status>=300)return void f("HTTP Error: "+h.status);const g=JSON.parse(h.responseText);var v,p;g&&Rt(g.location)?u((p=g.location,(v=e.basePath)?v.replace(/\/$/,"")+"/"+p.replace(/^\//,""):p)):f("Invalid JSON: "+h.responseText)};const b=new FormData;b.append("file",l.blob(),l.filename()),h.send(b)}),o=pe(e.handler)?e.handler:r,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{ct.each(n[l],u=>{u(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||o!==r?(f=c,u=ct.grep(u=l,h=>!t.isUploaded(h.blobUri())),Promise.all(ct.map(u,h=>{return t.isPending(h.blobUri())?(b=>{const g=b.blobUri();return new Promise(v=>{n[g]=n[g]||[],n[g].push(v)})})(h):(g=o,v=f,t.markPending((b=h).blobUri()),new Promise(p=>{let C,w;try{const k=()=>{C&&(C.close(),w=Et)},A=T=>{k(),t.markUploaded(b.blobUri(),T),i(b.blobUri(),s(b,T)),p(s(b,T))},O=T=>{k(),t.removeFailed(b.blobUri()),i(b.blobUri(),a(b,T)),p(a(b,T))};w=T=>{T<0||T>100||N.from(C).orThunk(()=>N.from(v).map(mo)).each(P=>{C=P,P.progressBar.value(T)})},g(b,w).then(A,T=>{O(Rt(T)?{message:T}:T)})}catch(k){p(a(b,k))}}));var b,g,v}))):new Promise(u=>{u([])});var u,f}}})(e,{url:dk(t),basePath:uk(t),credentials:fk(t),handler:mk(t)}),e1={remove_similar:!0,inherit:!1},ei={selector:"td,th",...e1},$_={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ei},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ei},tablecellbordercolor:{styles:{borderColor:"%value"},...ei},tablecellclass:{classes:["%value"],...ei},tableclass:{selector:"table",classes:["%value"],...e1},tablecellborderstyle:{styles:{borderStyle:"%value"},...ei},tablecellborderwidth:{styles:{borderWidth:"%value"},...ei}},W_=ft($_),ud=ct.each,Tr=xe.DOM,Bm=t=>pt(t)&&Ut(t),n1=(t,e)=>{const n=e&&e.schema||gs({}),r=a=>{const i=Rt(a)?{name:a,classes:[],attrs:{}}:a,l=Tr.create(i.name);return c=l,(u=i).classes.length>0&&Tr.addClass(c,u.classes.join(" ")),Tr.setAttribs(c,u.attrs),l;var c,u},o=(a,i,l)=>{let c;const u=i[0],f=Bm(u)?u.name:void 0,h=((v,p)=>{const C=n.getElementRule(v.nodeName.toLowerCase()),w=C?.parentsRequired;return!(!w||!w.length)&&(p&&Tt(w,p)?p:w[0])})(a,f);if(h)f===h?(c=u,i=i.slice(1)):c=h;else if(u)c=u,i=i.slice(1);else if(!l)return a;const b=c?r(c):Tr.create("div");b.appendChild(a),l&&ct.each(l,v=>{const p=r(v);b.insertBefore(p,a)});const g=Bm(c)?c.siblings:void 0;return o(b,i,g)},s=Tr.create("div");if(t.length>0){const a=t[0],i=r(a),l=Bm(a)?a.siblings:void 0;s.appendChild(o(i,t.slice(1),l))}return s},V_=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=ct.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,s,a,i)=>{switch(o){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==ct.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},K_=(t,e)=>{let n="",r=_k(t);if(""===r)return"";const o=b=>Rt(b)?b.replace(/%(\w+)/g,""):"",s=(b,g)=>Tr.getStyle(g??t.getBody(),b,!0);if(Rt(e)){const b=t.formatter.get(e);if(!b)return"";e=b[0]}if("preview"in e){const b=e.preview;if(!1===b)return"";r=b||r}let a,i=e.block||e.inline||"span";const l=Rt(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ct.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),b=>{const g=ct.map(b.split(/(?:~\+|~|\+)/),V_),v=g.pop();return g.length&&(v.siblings=g),v}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=n1(l,t)):a=n1([i],t);const u=Tr.select(i,a)[0]||a.firstChild;ud(e.styles,(b,g)=>{const v=o(b);v&&Tr.setStyle(u,g,v)}),ud(e.attributes,(b,g)=>{const v=o(b);v&&Tr.setAttrib(u,g,v)}),ud(e.classes,b=>{const g=o(b);Tr.hasClass(u,g)||Tr.addClass(u,g)}),t.dispatch("PreviewFormats"),Tr.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const f=s("fontSize"),h=/px$/.test(f)?parseInt(f,10):0;return ud(r.split(" "),b=>{let g=s(b,u);if(!("background-color"===b&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(b),"#ffffff"===Tc(g).toLowerCase())||"color"===b&&"#000000"===Tc(g).toLowerCase())){if("font-size"===b&&/em|%$/.test(g)){if(0===h)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*h+"px"}"border"===b&&g&&(n+="padding:0 2px;"),n+=b+":"+g+";"}}),t.dispatch("AfterPreviewFormats"),Tr.remove(a),n},r1=t=>{const e=(r=>{const o={},s=(a,i)=>{a&&(Rt(a)?(it(i)||(i=[i]),st(i,l=>{Be(l.deep)&&(l.deep=!_r(l)),Be(l.split)&&(l.split=!_r(l)||tn(l)),Be(l.remove)&&_r(l)&&!tn(l)&&(l.remove="none"),_r(l)&&tn(l)&&(l.mixed=!0,l.block_expand=!0),Rt(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[a]=i):we(a,(l,c)=>{s(c,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},h={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[h,u,f]:[u,h,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,h)=>vt(u)&&u.hasAttribute("href"),onformat:(u,f,h)=>{ct.each(h,(b,g)=>{i.setAttrib(u,g,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return null!==(f=u?.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ct.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{c[u]={block:u,remove:"all"}}),c})(r)),s(W_()),s(Nk(r)),{get:a=>pt(a)?o[a]:o,has:a=>ee(o,a),register:s,unregister:a=>(a&&o[a]&&delete o[a],o)}})(t),n=rn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(r=t).on("mouseup keydown",o=>{((s,a)=>{const i=s.selection,l=s.getBody();im(s,null,!1),8!==a&&46!==a||!i.isCollapsed()||i.getStart().innerHTML!==Qa||im(s,sa(l,i.getStart())),37!==a&&39!==a||im(s,sa(l,i.getStart()))})(r,o.keyCode)}),_o(t)||((r,o)=>{r.set({}),o.on("NodeChange",s=>{Qv(o,s.element,r.get())}),o.on("FormatApply FormatRemove",s=>{const a=N.from(s.node).map(i=>Dc(i)?i:i.startContainer).bind(i=>vt(i)?N.some(i):N.from(i.parentElement)).getOrThunk(()=>Xv(o));Qv(o,a,r.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,He(t).formatter.apply(i,l,c)},remove:(r,o,s,a)=>{var l,c,u,f;l=r,c=o,u=s,f=a,He(t).formatter.remove(l,c,u,f)},toggle:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,He(t).formatter.toggle(i,l,c)},match:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,He(t).formatter.match(l,c,u,f);var l,c,u,f},closest:r=>{return s=r,He(t).formatter.closest(s);var s},matchAll:(r,o)=>{return a=r,i=o,He(t).formatter.matchAll(a,i);var a,i},matchNode:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,He(t).formatter.matchNode(l,c,u,f);var l,c,u,f},canApply:r=>{return s=r,He(t).formatter.canApply(s);var s},formatChanged:(r,o,s,a)=>{return l=n,c=r,u=o,f=s,h=a,He(t).formatter.formatChanged(l,c,u,f,h);var l,c,u,f,h},getCssText:yt(K_,t)};var r},o1=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},s1=t=>{const e=hs(),n=rn(0),r=rn(0),o={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,He(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=o,c=r,u=n,f=e,h=s,b=a,He(t).undoManager.add(l,c,u,f,h,b);var l,c,u,f,h,b},dispatchChange:()=>{t.setDirty(!0);const s=od(t);s.bookmark=Bu(t.selection),t.dispatch("change",{level:s,lastLevel:wa(o.data,r.get()).getOrUndefined()})},undo:()=>{return a=o,i=n,l=r,He(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=r,i=o.data,He(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=o,i=r,He(t).undoManager.clear(a,i)},reset:()=>{var a;a=o,He(t).undoManager.reset(a)},hasUndo:()=>{return a=o,i=r,He(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=o,i=r,He(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=o,l=n,c=s,He(t).undoManager.transact(i,l,c);var i,l,c},ignore:s=>{var i,l;i=n,l=s,He(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,c,u,f;l=o,c=r,u=s,f=a,He(t).undoManager.extra(l,c,u,f)}};return _o(t)||((s,a,i)=>{const l=rn(!1),c=u=>{sd(a,!1,i),a.add({},u)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",u=>{o1(u.command)||(Ly(a,i),a.beforeChange())}),s.on("ExecCommand",u=>{o1(u.command)||c(u)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",u=>{const f=u.keyCode;u.isDefaultPrevented()||((f>=33&&f<=36||f>=37&&f<=40||45===f||u.ctrlKey)&&(c(),s.nodeChanged()),46!==f&&8!==f||s.nodeChanged(),l.get()&&a.typing&&!Rm(od(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged()))}),s.on("keydown",u=>{const f=u.keyCode;u.isDefaultPrevented()||(f>=33&&f<=36||f>=37&&f<=40||45===f?a.typing&&c(u):!(f<16||f>20)||224===f||91===f||a.typing||u.ctrlKey&&!u.altKey||u.metaKey||(a.beforeChange(),sd(a,!0,i),a.add({},u),l.set(!0)))}),s.on("mousedown",u=>{a.typing&&c(u)}),s.on("input",u=>{var f,h;u.inputType&&("insertReplacementText"===u.inputType||"insertText"===(f=u).inputType&&null===f.data||"insertFromPaste"===(h=u).inputType||"insertFromDrop"===h.inputType)&&c(u)}),s.on("AddUndo Undo Redo ClearUndos",u=>{u.isDefaultPrevented()||s.nodeChanged()})})(t,o,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),o;var s},X_=[9,27,St.HOME,St.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,St.DOWN,St.UP,St.LEFT,St.RIGHT].concat(me.browser.isFirefox()?[224]:[]),a1="data-mce-placeholder",i1=t=>"keydown"===t.type||"keyup"===t.type,l1=t=>{const e=t.keyCode;return e===St.BACKSPACE||e===St.DELETE},G_=(t,e)=>({from:t,to:e}),Lm=(t,e)=>{const n=R(t),r=R(e.container());return Vc(n,r).map(o=>({block:o,position:e}))},c1=(t,e)=>Zr(e,n=>Oi(n)||no(n.dom),n=>ne(n,t)).filter(Sn).getOr(t),d1=t=>{const e=(n=>{const r=Re(n);return Ds(r,wr).fold(ft(r),o=>r.slice(0,o))})(t);return st(e,Bt),e},u1=(t,e)=>{const n=Go(e,t);return Ue(n.reverse(),r=>We(r)).each(Bt)},Y_=(t,e,n,r)=>{if(We(n))return Ks(n),Xn(n.dom);0===qt(ls(r),s=>!We(s)).length&&We(e)&&nt(r,ot("br"));const o=Er(n.dom,X.before(r.dom));return st(d1(e),s=>{nt(r,s)}),u1(t,e),o},Q_=(t,e,n)=>{if(We(n)){if(We(e)){const s=Po((a=>{const i=(l,c)=>Wn(l).fold(()=>c,u=>rc(u)?i(u,c.concat(Zs(u))):c);return i(a,[])})(n),(a,i)=>($t(a,i),i),sc());ge(e),Ct(e,s)}return Bt(n),Xn(e.dom)}const r=So(n.dom);return st(d1(e),o=>{Ct(n,o)}),u1(t,e),r},f1=(t,e)=>{$a(t,e.dom).bind(n=>N.from(n.getNode())).map(R).filter(Vs).each(Bt)},m1=(t,e,n)=>{return f1(!0,e),f1(!1,n),(r=e,o=n,cn(o,r)?((s,a)=>{const i=Go(a,s);return N.from(i[i.length-1])})(o,r):N.none()).fold(yt(Q_,t,e,n),yt(Y_,t,e,n));var r,o},p1=(t,e,n,r)=>e?m1(t,r,n):m1(t,n,r),Pm=(t,e)=>{const n=R(t.getBody());return(o=n.dom,s=e,a=t.selection.getRng(),a.collapsed?((i,l,c)=>{const u=Lm(i,X.fromRangeStart(c)),f=u.bind(h=>kr(l,i,h.position).bind(b=>Lm(i,b).map(g=>{return v=i,p=l,ze((C=g).position.getNode())&&!We(C.block)?$a(!1,C.block.dom).bind(w=>w.isEqual(C.position)?kr(p,v,w).bind(k=>Lm(v,k)):N.some(C)).getOr(C):C;var v,p,C})));return ln(u,f,G_).filter(h=>{return!ne((b=h).from.block,b.to.block)&&((b,g)=>{const v=R(b);return ne(c1(v,g.from.block),c1(v,g.to.block))})(i,h)&&(b=>!1===Ne(b.from.block.dom)&&!1===Ne(b.to.block.dom))(h)&&(b=>{const g=v=>ng(v)||fu(v.dom);return g(b.from.block)&&g(b.to.block)})(h);var b})})(o,s,a):N.none()).map(o=>()=>{p1(n,e,o.from.block,o.to.block).each(s=>{t.selection.setRng(s.toRange())})});var o,s,a},g1=(t,e)=>{const n=R(e),r=yt(ne,t);return Dn(n,Oi,r).isSome()},Mm=(t,e)=>t.selection.isCollapsed()?N.none():(t=>{const e=R(t.getBody());return((n,r)=>{const o=Er(n.dom,X.fromRangeStart(r)).isNone(),s=tr(n.dom,X.fromRangeEnd(r)).isNone();return!(g1(a=n,(i=r).startContainer)||g1(a,i.endContainer))&&o&&s;var a,i})(e,t.selection.getRng())?(n=t,N.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r)=>{const o=r.getRng();return ln(Vc(n,R(o.startContainer)),Vc(n,R(o.endContainer)),(s,a)=>ne(s,a)?N.none():N.some(()=>{o.deleteContents(),p1(n,!0,s,a).each(i=>{r.setRng(i.toRange())})})).getOr(N.none())})(e,t.selection);var n})(t),Yo=(t,e,n,r,o)=>N.from(e._selectionOverrides.showCaret(t,n,r,o)),gl=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?N.none():N.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(e)),Im=(t,e,n)=>e.collapsed?((r,o,s)=>{const a=Uu(1,r.getBody(),o),i=X.fromRangeStart(a),l=i.getNode();if(Vi(l))return Yo(1,r,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(Vi(c))return Yo(1,r,c,!1,!1);const u=fa(r.dom.getRoot(),i.getNode());return Vi(u)?Yo(1,r,u,!1,s):N.none()})(t,e,n).getOr(e):e,Z_=t=>Ss(t)||ol(t),tA=t=>ks(t)||sl(t),h1=(t,e,n,r,o,s)=>{var a,i;Yo(r,t,s.getNode(!o),o,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();o?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,at(i=n)&&0===i.data.length&&a.remove(i)},Fm=(t,e)=>((n,r)=>{const o=n.selection.getRng();if(!at(o.commonAncestorContainer))return N.none();const s=r?on.Forwards:on.Backwards,a=wo(n.getBody()),i=yt(qu,r?a.next:a.prev),l=r?Z_:tA,c=Qi(s,n.getBody(),o),u=i(c),f=u&&Rr(r,u);if(!f||!Ec(c,f))return N.none();if(l(f))return N.some(()=>h1(n,o,c.getNode(),s,r,f));const h=i(f);return h&&l(h)&&Ec(f,h)?N.some(()=>h1(n,o,c.getNode(),s,r,h)):N.none()})(t,e),jm=(t,e)=>{const n=t.getBody();return e?Xn(n).filter(Ss):So(n).filter(ks)},zm=t=>{const e=t.selection.getRng();return!e.collapsed&&(jm(t,!0).exists(n=>n.isEqual(X.fromRangeStart(e)))||jm(t,!1).exists(n=>n.isEqual(X.fromRangeEnd(e))))},Or=yo([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),b1=(t,e,n)=>kr(e,t,n).bind(r=>{return o=r.getNode(),pt(o)&&(Oi(R(o))||Ti(R(o)))||((s,a,i,l)=>{const c=u=>rc(R(u))&&!Co(i,l,s);return $h(!a,i).fold(()=>$h(a,l).fold(Ce,c),c)})(t,e,n,r)?N.none():e&&Ne(r.getNode())||!e&&Ne(r.getNode(!0))?((s,a,i,l)=>{const c=l.getNode(!a);return Vc(R(s),R(i.getNode())).map(u=>We(u)?Or.remove(u.dom):Or.moveToElement(c)).orThunk(()=>N.some(Or.moveToElement(c)))})(t,e,n,r):e&&ks(n)||!e&&Ss(n)?N.some(Or.moveToPosition(r)):N.none();var o}),v1=(t,e)=>N.from(fa(t.getBody(),e)),y1=t=>{const e=t.dom,n=t.selection,r=fa(t.getBody(),n.getNode());if(no(r)&&e.isBlock(r)&&e.isEmpty(r)){const o=e.create("br",{"data-mce-bogus":"1"});e.setHTML(r,""),r.appendChild(o),n.setRng(X.before(o).toRange())}return!0},Hm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return v1(t,n).filter(Ne).fold(()=>((r,o,s)=>{const a=Uu(o?1:-1,r,s),i=X.fromRangeStart(a),l=R(r);return!o&&ks(i)?N.some(Or.remove(i.getNode(!0))):o&&Ss(i)?N.some(Or.remove(i.getNode())):!o&&Ss(i)&&Df(l,i)?pN(l,i).map(c=>Or.remove(c.getNode())):o&&ks(i)&&Of(l,i)?gN(l,i).map(c=>Or.remove(c.getNode())):(c=r,((h,b)=>{const g=b.getNode(!h),v=h?"after":"before";return vt(g)&&g.getAttribute("data-mce-caret")===v})(u=o,f=i)?(h=u,b=f.getNode(!u),be(b)?N.none():h&&Ne(b.nextSibling)?N.some(Or.moveToElement(b.nextSibling)):!h&&Ne(b.previousSibling)?N.some(Or.moveToElement(b.previousSibling)):N.none()).orThunk(()=>b1(c,u,f)):b1(c,u,f).bind(h=>((b,g,v)=>v.fold(p=>N.some(Or.remove(p)),p=>N.some(Or.moveToElement(p)),p=>Co(g,p,b)?N.none():N.some(Or.moveToPosition(p))))(c,f,h)));var c,u,f,h,b})(t.getBody(),e,t.selection.getRng()).map(r=>()=>{return r.fold((o=t,s=e,a=>(o._selectionOverrides.hideFakeCaret(),da(o,s,R(a)),!0)),((o,s)=>a=>{const i=s?X.before(a):X.after(a);return o.selection.setRng(i.toRange()),!0})(t,e),(o=>s=>(o.selection.setRng(s.toRange()),!0))(t));var o,s}),()=>N.some(Et))})(t,e):((n,r)=>{const o=n.selection.getNode();return Ne(o)&&!ec(o)?v1(n,o.parentNode).filter(Ne).fold(()=>N.some(()=>{var s;s=R(n.getBody()),st(fn(s,".mce-offscreen-selection"),Bt),da(n,r,R(n.selection.getNode())),Ff(n)}),()=>N.some(Et)):zm(n)?N.some(()=>{X0(n,n.selection.getRng(),R(n.getBody()))}):N.none()})(t,e),Um=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=X.fromRangeStart(n.selection.getRng());return kr(r,n.getBody(),o).filter(s=>r?cN(s):dN(s)).bind(s=>Hu(r?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):N.none(),ni=at,C1=t=>ni(t)&&t.data[0]===En,x1=t=>ni(t)&&t.data[t.data.length-1]===En,w1=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(En)},fd=(t,e)=>t?(n=>{var r;if(ni(n.previousSibling))return x1(n.previousSibling)||n.previousSibling.appendData(En),n.previousSibling;if(ni(n))return C1(n)||n.insertData(0,En),n;{const o=w1(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(e):(n=>{var r,o;if(ni(n.nextSibling))return C1(n.nextSibling)||n.nextSibling.insertData(0,En),n.nextSibling;if(ni(n))return x1(n)||n.appendData(En),n;{const s=w1(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(s,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(s),s}})(e),nA=yt(fd,!0),rA=yt(fd,!1),S1=(t,e)=>at(t.container())?fd(e,t.container()):fd(e,t.getNode()),k1=(t,e)=>{const n=e.get();return n&&t.container()===n&&ms(n)},qm=(t,e)=>e.fold(n=>{ra(t.get());const r=nA(n);return t.set(r),N.some(X(r,r.length-1))},n=>Xn(n).map(r=>{if(k1(r,t)){const o=t.get();return X(o,1)}{ra(t.get());const o=S1(r,!0);return t.set(o),X(o,1)}}),n=>So(n).map(r=>{if(k1(r,t)){const o=t.get();return X(o,o.length-1)}{ra(t.get());const o=S1(r,!1);return t.set(o),X(o,o.length-1)}}),n=>{ra(t.get());const r=rA(n);return t.set(r),N.some(X(r,1))}),E1=(t,e)=>{for(let n=0;n<t.length;n++){const r=t[n].apply(null,e);if(r.isSome())return r}return N.none()},Pn=yo([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),N1=(t,e)=>ys(e,t)||t,oA=(t,e,n)=>{const r=$0(n),o=N1(e,r.container());return Es(t,o,r).fold(()=>tr(o,r).bind(yt(Es,t,o)).map(s=>Pn.before(s)),N.none)},sA=(t,e)=>null===sa(t,e),_1=(t,e,n)=>Es(t,e,n).filter(yt(sA,e)),aA=(t,e,n)=>{const r=W0(n);return _1(t,e,r).bind(o=>Er(o,r).isNone()?N.some(Pn.start(o)):N.none())},iA=(t,e,n)=>{const r=$0(n);return _1(t,e,r).bind(o=>tr(o,r).isNone()?N.some(Pn.end(o)):N.none())},lA=(t,e,n)=>{const r=W0(n),o=N1(e,r.container());return Es(t,o,r).fold(()=>Er(o,r).bind(yt(Es,t,o)).map(s=>Pn.after(s)),N.none)},A1=t=>{return e=$m(t),!("rtl"===xe.DOM.getStyle(e,"direction",!0)||(r=null!==(n=e.textContent)&&void 0!==n?n:"",xN.test(r)));var r,e,n},Ao=(t,e,n)=>E1([oA,aA,iA,lA],[t,e,n]).filter(A1),$m=t=>t.fold(de,de,de,de),R1=t=>t.fold(ft("before"),ft("start"),ft("end"),ft("after")),md=t=>t.fold(Pn.before,Pn.before,Pn.after,Pn.after),Wm=t=>t.fold(Pn.start,Pn.start,Pn.end,Pn.end),cA=(t,e,n,r,o,s)=>ln(Es(e,n,r),Es(e,n,o),(a,i)=>a!==i&&((l,c,u)=>{const f=ys(c,l),h=ys(u,l);return pt(f)&&f===h})(n,a,i)?Pn.after(t?a:i):s).getOr(s),dA=(t,e)=>t.fold(Ae,n=>{return o=e,!(R1(r=n)===R1(o)&&$m(r)===$m(o));var r,o}),uA=(t,e)=>t?e.fold(Zn(N.some,Pn.start),N.none,Zn(N.some,Pn.after),N.none):e.fold(N.none,Zn(N.some,Pn.before),N.none,Zn(N.some,Pn.end)),T1=(t,e,n)=>{const r=t?1:-1;return e.setRng(X(n.container(),n.offset()+r).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Ro;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Ro||(Ro={}));const pd=(t,e)=>t===on.Backwards?Vr(e):e,fA=(t,e,n)=>t===on.Forwards?e.next(n):e.prev(n),mA=(t,e,n,r)=>ze(r.getNode(e===on.Forwards))?Ro.Br:!1===Co(n,r)?Ro.Block:Ro.Wrap,O1=(t,e,n,r)=>{const o=wo(n);let s=r;const a=[];for(;s;){const i=fA(e,o,s);if(!i)break;if(ze(i.getNode(!1)))return e===on.Forwards?{positions:pd(e,a).concat([i]),breakType:Ro.Br,breakAt:N.some(i)}:{positions:pd(e,a),breakType:Ro.Br,breakAt:N.some(i)};if(i.isVisible()){if(t(s,i)){const l=mA(0,e,s,i);return{positions:pd(e,a),breakType:l,breakAt:N.some(i)}}a.push(i),s=i}else s=i}return{positions:pd(e,a),breakType:Ro.Eol,breakAt:N.none()}},D1=(t,e,n,r)=>e(n,r).breakAt.map(o=>{const s=e(n,o).positions;return t===on.Backwards?s.concat(o):[o].concat(s)}).getOr([]),Vm=(t,e)=>gn(t,(n,r)=>n.fold(()=>N.some(r),o=>ln(wn(o.getClientRects()),wn(r.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?r:o}).or(n)),N.none()),gd=(t,e)=>wn(e.getClientRects()).bind(n=>Vm(t,n.left)),hl=yt(O1,X.isAbove,-1),bl=yt(O1,X.isBelow,1),B1=yt(D1,-1,hl),L1=yt(D1,1,bl),pA=(t,e)=>gd(B1(t,e),e),gA=(t,e)=>gd(L1(t,e),e),hA=Ne,P1=(t,e)=>Math.abs(t.left-e),M1=(t,e)=>Math.abs(t.right-e),I1=(t,e)=>Kr(t,(n,r)=>{const o=Math.min(P1(n,e),M1(n,e)),s=Math.min(P1(r,e),M1(r,e));return s===o&&hn(r,"node")&&hA(r.node)||s<o?r:n}),bA=t=>{const e=n=>oe(n,r=>{const o=ea(r);return o.node=t,o});if(vt(t))return e(t.getClientRects());if(at(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},F1=t=>en(t,bA);var vl;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(vl||(vl={}));const j1=(t,e,n,r,o,s)=>{let a=0;const i=[],l=f=>{let h=F1([f]);-1===t&&(h=h.reverse());for(let b=0;b<h.length;b++){const g=h[b];if(!n(g,c)){if(i.length>0&&e(g,Pr(i))&&a++,g.line=a,o(g))return!0;i.push(g)}}return!1},c=Pr(s.getClientRects());if(!c)return i;const u=s.getNode();return u&&(l(u),((f,h,b,g)=>{let v=g;for(;v=Xi(v,f,ig,h);)if(b(v))return})(t,r,l,u)),i},vA=yt(j1,vl.Up,zi,Hi),yA=yt(j1,vl.Down,Hi,zi),z1=t=>Pr(t.getClientRects()),H1=t=>e=>e.line>t,Km=t=>e=>e.line===t,Qo=(t,e)=>{t.selection.setRng(e),rl(t,t.selection.getRng())},Xm=(t,e,n)=>N.some(Im(t,e,n)),U1=(t,e,n,r,o,s)=>{const a=e===on.Forwards,i=wo(t.getBody()),l=yt(qu,a?i.next:i.prev),c=a?r:o;if(!n.collapsed){const g=bc(n);if(s(g))return Yo(e,t,g,e===on.Backwards,!1);if(zm(t)){const v=n.cloneRange();return v.collapse(e===on.Backwards),N.from(v)}}const u=Qi(e,t.getBody(),n);if(c(u))return gl(t,u.getNode(!a));let f=l(u);const h=og(n);if(!f)return h?N.some(n):N.none();if(f=Rr(a,f),c(f))return Yo(e,t,f.getNode(!a),a,!1);const b=l(f);return b&&c(b)&&Ec(f,b)?Yo(e,t,b.getNode(!a),a,!1):h?Xm(t,f.toRange(),!1):N.none()},q1=(t,e,n,r,o,s)=>{const a=Qi(e,t.getBody(),n),i=Pr(a.getClientRects()),l=e===vl.Down,c=t.getBody();if(!i)return N.none();if(zm(t)){const v=l?X.fromRangeEnd(n):X.fromRangeStart(n);return(l?gA:pA)(c,v).orThunk(()=>N.from(v)).map(p=>p.toRange())}const u=(l?yA:vA)(c,H1(1),a),f=qt(u,Km(1)),h=i.left,b=I1(f,h);if(b&&s(b.node)){const v=Math.abs(h-b.left),p=Math.abs(h-b.right);return Yo(e,t,b.node,v<p,!1)}let g;if(g=r(a)?a.getNode():o(a)?a.getNode(!0):bc(n),g){const v=((C,w,k,A)=>{const O=wo(w);let T,P,L,M;const $=[];let U=0;1===C?(T=O.next,P=Hi,L=zi,M=X.after(A)):(T=O.prev,P=zi,L=Hi,M=X.before(A));const W=z1(M);do{if(!M.isVisible())continue;const H=z1(M);if(L(H,W))continue;$.length>0&&P(H,Pr($))&&U++;const J=ea(H);if(J.position=M,J.line=U,k(J))return $;$.push(J)}while(M=T(M));return $})(e,c,H1(1),g);let p=I1(qt(v,Km(1)),h);if(p||(p=Pr(qt(v,Km(0))),p))return Xm(t,p.position.toRange(),!1)}return 0===f.length?Gm(t,l).filter(l?o:r).map(v=>Im(t,v.toRange(),!1)):N.none()},Gm=(t,e)=>{const n=t.selection.getRng(),r=e?X.fromRangeEnd(n):X.fromRangeStart(n),o=(s=r.container(),a=t.getBody(),Dn(R(s),i=>bE(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=bl(o,r);return ho(i.positions)}{const i=hl(o,r);return wn(i.positions)}},$1=(t,e,n)=>Gm(t,e).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),hd=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},W1=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},V1=(t,e,n)=>qm(e,n).map(r=>(hd(t,r),n)),K1=(t,e,n)=>!!Wi(t)&&((t,e,n)=>{const r=t.getBody(),o=((s,a,i)=>{const l=X.fromRangeStart(s);if(s.collapsed)return l;{const c=X.fromRangeEnd(s);return i?Er(a,c).getOr(c):tr(a,l).getOr(l)}})(t.selection.getRng(),r,n);return((s,a,i,l)=>{const c=Rr(s,l),u=Ao(a,i,c);return Ao(a,i,c).bind(yt(uA,s)).orThunk(()=>((f,h,b,g,v)=>{const p=Rr(f,v);return kr(f,b,p).map(yt(Rr,f)).fold(()=>g.map(md),C=>Ao(h,b,C).map(yt(cA,f,h,b,p,C)).filter(yt(dA,g))).filter(A1)})(s,a,i,u,l))})(n,yt(ua,t),r,o).bind(s=>V1(t,e,s))})(t,e,n).isSome(),X1=(t,e,n)=>!!Wi(e)&&((r,o)=>{const s=o.selection.getRng(),a=r?X.fromRangeEnd(s):X.fromRangeStart(s);return!!pe(o.selection.getSel().modify)&&(r&&au(a)?T1(!0,o.selection,a):!(r||!iu(a))&&T1(!1,o.selection,a))})(t,e),wA=yt(X1,!0),SA=yt(X1,!1),bd=(t,e,n)=>{if(Wi(t)){const r=Gm(t,e).getOrThunk(()=>{const o=t.selection.getRng();return e?X.fromRangeEnd(o):X.fromRangeStart(o)});return Ao(yt(ua,t),t.getBody(),r).exists(o=>{const s=md(o);return qm(n,s).exists(a=>(hd(t,a),!0))})}return!1},G1=(t,e)=>n=>qm(e,n).map(r=>()=>hd(t,r)),Y1=(t,e,n,r)=>{const o=t.getBody(),s=yt(ua,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,r)),If(t),Ao(s,o,X.fromRangeStart(t.selection.getRng())).map(Wm).bind(G1(t,e)).each(Fn)}),t.nodeChanged()},Ym=(t,e,n)=>{if(t.selection.isCollapsed()&&Wi(t)){const r=X.fromRangeStart(t.selection.getRng());return((o,s,a,i)=>{const l=(f=o.getBody(),h=i.container(),ys(h,f)||f),c=yt(ua,o),u=Ao(c,l,i);var f,h;return u.bind(f=>a?f.fold(ft(N.some(Wm(f))),N.none,ft(N.some(md(f))),N.none):f.fold(N.none,ft(N.some(md(f))),N.none,ft(N.some(Wm(f))))).map(G1(o,s)).getOrThunk(()=>{const f=_c(a,l,i),h=f.bind(b=>Ao(c,l,b));return ln(u,h,()=>Es(c,l,i).bind(b=>{return ln(Xn(g=b),So(g),(v,p)=>{const C=Rr(!0,v),w=Rr(!1,p);return tr(g,C).forall(k=>k.isEqual(w))}).getOr(!0)?N.some(()=>{da(o,a,R(b))}):N.none();var g})).getOrThunk(()=>h.bind(()=>f.map(b=>()=>{a?Y1(o,s,i,b):Y1(o,s,b,i)})))})})(t,e,n,r)}return N.none()},Q1=(t,e)=>{const n=R(t.getBody()),r=R(t.selection.getStart()),o=Go(r,n);return Ds(o,e).fold(ft(o),s=>o.slice(0,s))},J1=(t,e)=>{const n=yt(Cv,t);return en(e,r=>n(r)?[r.dom]:[])},Z1=t=>{const e=Q1(t,wr);return J1(t,e)},tC=(t,e)=>{const n=t.selection.getStart(),r=((o,s)=>{const a=s.parentElement;return ze(s)&&!Zt(a)&&o.dom.isEmpty(a)})(t,n)||xv(R(n))?yv(n,e):((o,s)=>{const{caretContainer:a,caretPosition:i}=vv(s);return o.selection.getRng().insertNode(a.dom),i})(t,e);t.selection.setRng(r.toRange())},eC=t=>at(t.startContainer),Qm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=Q1(t,o=>wr(o)||Xe(o)>1);return ho(n).bind(r=>{const o=X.fromRangeStart(t.selection.getRng());return s=e,a=o,ln(Xn(i=r.dom),So(i),(l,c)=>{const u=Rr(!0,l),f=Rr(!1,c),h=Rr(!1,a);return s?tr(i,h).exists(b=>b.isEqual(f)&&a.isEqual(u)):Er(i,h).exists(b=>b.isEqual(u)&&a.isEqual(f))}).getOr(!0)&&!xv(r)?N.some(()=>((s,a,i,l)=>{const c=J1(a,l);if(0===c.length)da(a,s,i);else{const u=yv(i.dom,c);a.selection.setRng(u.toRange())}})(e,t,r,n)):N.none();var s,a,i})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&eC(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!Zt(o)&&Cv(n,R(o))})(t,e)&&(n=>{return(o=>{const s=o.startContainer.parentNode,a=o.endContainer.parentNode;return!Zt(s)&&!Zt(a)&&s.isEqualNode(a)})(r=n)&&(o=>{const s=o.endContainer;return o.endOffset===(at(s)?s.length:s.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(e);var n})(n)){const r=Z1(n);return N.some(()=>{If(n),((o,s)=>{const a=Wt(s,Z1(o));a.length>0&&tC(o,a)})(n,r)})}return N.none()})(t),yl=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(eC(n)||e.dom.isEmpty(n.startContainer))&&!(t=>Dn(t,o=>Ur(o.dom),wr).isSome())(R(e.selection.getStart()))})(t)&&tC(t,[]),!0),Jm=(t,e,n)=>pt(n)?N.some(()=>{t._selectionOverrides.hideFakeCaret(),da(t,e,R(n))}):N.none(),Zm=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=r?ol:sl,a=Qi(r?on.Forwards:on.Backwards,n.getBody(),n.selection.getRng());return o(a)?Jm(n,r,a.getNode(!r)):N.from(Rr(r,a)).filter(i=>o(i)&&Ec(a,i)).bind(i=>Jm(n,r,i.getNode(!r)))})(t,e):((n,r)=>{const o=n.selection.getNode();return vo(o)?Jm(n,r,o):N.none()})(t,e),tp=t=>Ps(t??"").getOr(0),nC=(t,e)=>(t||"table"===Ee(e)?"margin":"padding")+("rtl"===dr(e,"direction")?"-right":"-left"),rC=t=>{const e=sC(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,ar(e,o=>{const s=nC(Sh(n),o),a=B(o,s).map(tp).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&a>0})));var n},oC=t=>su(t)||Ti(t),sC=t=>qt(ve(t.selection.getSelectedBlocks()),e=>!oC(e)&&!fe(e).exists(oC)&&Zr(e,n=>no(n.dom)||Ne(n.dom)).exists(n=>no(n.dom))),aC=(t,e)=>{var n,r;const{dom:o}=t,s=hk(t),a=null!==(r=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",i=tp(s),l=Sh(t);st(sC(t),c=>{((u,f,h,b,g,v)=>{const p=nC(h,R(v)),C=tp(u.getStyle(v,p));if("outdent"===f){const w=Math.max(0,C-b);u.setStyle(v,p,w?w+g:"")}else u.setStyle(v,p,C+b+g)})(o,e,l,i,a,c.dom)})},iC=t=>aC(t,"outdent"),lC=t=>{if(t.selection.isCollapsed()&&rC(t)){const e=t.dom,n=t.selection.getRng(),r=X.fromRangeStart(n),o=e.getParent(n.startContainer,e.isBlock);if(null!==o&&Tf(R(o),r))return N.some(()=>iC(t))}return N.none()},cC=(t,e,n)=>jn([lC,Hm,Fm,(r,o)=>Ym(r,e,o),Pm,Vf,Um,Zm,Mm,Qm],r=>r(t,n)).filter(r=>t.selection.isEditable()),dC=t=>void 0===t.touches||1!==t.touches.length?N.none():N.some(t.touches[0]),ep=(t,e)=>ee(t,e.nodeName),AA=(t,e)=>!!at(e)||!!vt(e)&&!ep(t.getBlockElements(),e)&&!Nr(e)&&!Gs(t,e),RA=(t,e)=>!(!at(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!ep(t,e.nextSibling))),uC=t=>t.dom.create(fr(t),$i(t)),TA=t=>{const e=t.dom,n=t.selection,r=t.schema,o=r.getBlockElements(),s=n.getStart(),a=t.getBody();let i,l,c=!1;const u=fr(t);if(!s||!vt(s))return;const f=a.nodeName.toLowerCase();if(!r.isValidChild(f,u.toLowerCase())||(k=o,A=a,ke(N0(R(s),R(A)),T=>ep(k,T.dom))))return;var k,A;const h=n.getRng(),{startContainer:b,startOffset:g,endContainer:v,endOffset:p}=h,C=ca(t);let w=a.firstChild;for(;w;)if(vt(w)&&NS(r,w),AA(r,w)){if(RA(o,w)){l=w,w=w.nextSibling,e.remove(l);continue}i||(i=uC(t),a.insertBefore(i,w),c=!0),l=w,w=w.nextSibling,i.appendChild(l)}else i=null,w=w.nextSibling;c&&C&&(h.setStart(b,g),h.setEnd(v,p),n.setRng(h),t.nodeChanged())},fC=(t,e,n)=>{const r=R(uC(t)),o=sc();Ct(r,o),n(e,r);const s=document.createRange();return s.setStartBefore(o.dom),s.setEndBefore(o.dom),s},mC=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),OA=(t,e,n)=>function(r){const o=arguments,s=o[o.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return r;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(o[0])+'">'+t.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},pC=(t,e)=>{e.hasAttribute("data-mce-caret")&&(lu(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},DA=(t,e)=>{const n=cs(R(t.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void pC(t,n)):void(rg(n)&&(pC(t,n),t.undoManager.add()))},gC=Ne,hC=(t,e,n)=>{const r=wo(t.getBody()),o=yt(qu,1===e?r.next:r.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!o(X.fromRangeStart(n))){const a=R((i=>{const l=i.dom.create(fr(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?lt(R(s),a):nt(R(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},bC=(t,e)=>((n,r)=>{const o=r?on.Forwards:on.Backwards,s=n.selection.getRng();return(a=o,i=n,l=s,U1(i,a,l,Ss,ks,gC)).orThunk(()=>(hC(n,o,s),N.none()));var a,i,l})(t,e).exists(n=>(Qo(t,n),!0)),vC=(t,e)=>((n,r)=>{const o=r?1:-1,s=n.selection.getRng();return(a=o,i=n,l=s,q1(i,a,l,c=>Ss(c)||k0(c),c=>ks(c)||E0(c),gC)).orThunk(()=>(hC(n,o,s),N.none()));var a,i,l})(t,e).exists(n=>(Qo(t,n),!0)),yC=(t,e)=>$1(t,e,e?ks:Ss),vd=(t,e)=>jm(t,!e).map(n=>{const r=n.toRange(),o=t.selection.getRng();return e?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(Qo(t,n),!0)),BA=t=>Tt(["figcaption"],Ee(t)),CC=(t,e)=>!!t.selection.isCollapsed()&&((t,e)=>{const n=R(t.getBody()),r=X.fromRangeStart(t.selection.getRng());return((o,s)=>{const a=yt(ne,s);return Zr(R(o.container()),wr,a).filter(BA)})(r,n).exists(()=>{if(o=n,a=r,e?bl(o.dom,a).breakAt.isNone():hl(o.dom,a).breakAt.isNone()){const o=fC(t,n,e?Ct:Pt);return t.selection.setRng(o),!0}var o,a;return!1})})(t,e),xC={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},wC=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,Jt=(t,...e)=>()=>t.apply(null,e),Cl=(t,e)=>{return Ue((r=e,en(oe(t,s=>({...xC,...s})),o=>wC(o,r)?[o]:[])),n=>n.action());var r},SC=(t,e)=>{return jn((r=e,en(oe(t,s=>({...xC,...s})),o=>wC(o,r)?[o]:[])),n=>n.action());var r},kC=(t,e)=>{const n=e?on.Forwards:on.Backwards,r=t.selection.getRng();return U1(t,n,r,ol,sl,vo).exists(o=>(Qo(t,o),!0))},EC=(t,e)=>{const n=e?1:-1,r=t.selection.getRng();return q1(t,n,r,ol,sl,vo).exists(o=>(Qo(t,o),!0))},NC=(t,e)=>$1(t,e,e?sl:ol),_C=yo([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),xl={..._C,none:t=>_C.none(t)},AC=(t,e,n)=>en(Re(t),r=>Qt(r,e)?n(r)?[r]:[]:AC(r,e,n)),RC=(t,e)=>zr(t,"table",e),np=(t,e,n,r,o=Ae)=>{const s=1===r;if(!s&&n<=0)return xl.first(t[0]);if(s&&n>=t.length-1)return xl.last(t[t.length-1]);{const a=n+r,i=t[a];return o(i)?xl.middle(e,i):np(t,e,a,r,o)}},TC=(t,e)=>RC(t,e).bind(n=>{const r=AC(n,"th,td",Ae);return Ds(r,o=>ne(t,o)).map(o=>({index:o,all:r}))}),OC=(t,e,n,r,o)=>{const s=fn(R(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,c)=>gn(i,(u,f)=>u.fold(()=>N.some(f),h=>{const b=Math.sqrt(Math.abs(h.x-l)+Math.abs(h.y-c)),g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return N.some(g<b?f:h)}),N.none()))(qt((i=t,en(s,c=>{const u={left:(f=ea(c.getBoundingClientRect())).left- -1,top:f.top- -1,right:f.right+-2,bottom:f.bottom+-2,width:f.width+-1,height:f.height+-1};var f;return[{x:u.left,y:i(u),cell:c},{x:u.right,y:i(u),cell:c}]})),i=>e(i,o)),r,o).map(i=>i.cell)},PA=yt(OC,t=>t.bottom,(t,e)=>t.y<e),MA=yt(OC,t=>t.top,(t,e)=>t.y>e),DC=(t,e,n)=>{const r=t(e,n);return(o=r).breakType===Ro.Wrap&&0===o.positions.length||!ze(n.getNode())&&(o=>o.breakType===Ro.Br&&1===o.positions.length)(r)?!((o,s,a)=>a.breakAt.exists(i=>o(s,i).breakAt.isSome()))(t,e,r):r.breakAt.isNone();var o},IA=yt(DC,hl),FA=yt(DC,bl),jA=(t,e,n,r)=>{const o=t.selection.getRng(),s=e?1:-1;return!(!Fh()||!((a,i,l)=>{const c=X.fromRangeStart(i);return $a(!a,l).exists(u=>u.isEqual(c))})(e,o,n)||(Yo(s,t,n,!e,!1).each(a=>{Qo(t,a)}),0))},BC=(t,e,n)=>{const r=((s,a)=>{const i=a.getNode(s);return Wo(i)?N.some(i):N.none()})(!!e,n),o=!1===e;r.fold(()=>Qo(t,n.toRange()),s=>$a(o,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>Qo(t,n.toRange()),a=>{return i=e,c=s,void(l=t).undoManager.transact(()=>{const u=i?lt:nt,f=fC(l,R(c),u);Qo(l,f)});var i,l,c}))},zA=(t,e,n,r)=>{const o=t.selection.getRng(),s=X.fromRangeStart(o),a=t.getBody();if(!e&&IA(r,s)){const i=(l=a,(f=c=n,h=u=s,wn(h.getClientRects()).bind(b=>PA(f,b.left,b.top)).bind(b=>{return gd(So(g=b).map(v=>hl(g,v).positions.concat(v)).getOr([]),h);var g})).orThunk(()=>wn(u.getClientRects()).bind(f=>Vm(B1(l,X.before(c)),f.left))).getOr(X.before(c)));return BC(t,e,i),!0}var l,c,u,f,h;if(e&&FA(r,s)){const i=((l,c,u)=>((f,h)=>ho(h.getClientRects()).bind(b=>MA(f,b.left,b.top)).bind(b=>{return gd(Xn(g=b).map(v=>[v].concat(bl(g,v).positions)).getOr([]),h);var g}))(c,u).orThunk(()=>wn(u.getClientRects()).bind(f=>Vm(L1(l,X.after(c)),f.left))).getOr(X.after(c)))(a,n,s);return BC(t,e,i),!0}return!1},LC=(t,e,n)=>N.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(r=>N.from(t.dom.getParent(r,"table")).map(o=>n(t,e,o,r))).getOr(!1),PC=(t,e)=>LC(t,e,jA),MC=(t,e)=>LC(t,e,zA),IC=(t,e,n)=>n.fold(N.none,N.none,(r,o)=>{return(s=o,((a,i)=>{const l=c=>{for(let u=0;u<c.childNodes.length;u++){const f=R(c.childNodes[u]);if(i(f))return N.some(f);const h=l(c.childNodes[u]);if(h.isSome())return h}return N.none()};return l(a.dom)})(s,c0)).map(a=>{return(t=>{const e=Ga.getWin(t).dom,n=(o,s,a,i)=>df(e,o,s,a,i),r=t.match({domRange:s=>{const a=R(s.startContainer),i=R(s.endContainer);return Fb(a,s.startOffset,i,s.endOffset)},relative:IE,exact:Fb});return((o,s)=>{var i;return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(u=>!1===u.collapsed).map(u=>nl.rtl(R(u.endContainer),u.endOffset,R(u.startContainer),u.startOffset)).getOrThunk(()=>Mb(0,nl.ltr,c)):Mb(0,nl.ltr,c)})(0,(i=o,s.match({domRange:c=>({ltr:ft(c),rtl:N.none}),relative:(c,u)=>({ltr:zo(()=>Pb(i,c,u)),rtl:zo(()=>N.some(Pb(i,u,c)))}),exact:(c,u,f,h)=>({ltr:zo(()=>df(i,c,u,f,h)),rtl:zo(()=>N.some(df(i,f,h,c,u)))})})))})(e,r).match({ltr:n,rtl:n})})(Ga.exact(i=a,0,i,0));var i});var s},r=>(t.execCommand("mceTableInsertRowAfter"),FC(t,e,r))),FC=(t,e,n)=>{return IC(t,e,(o=qo,TC(r=n,void 0).fold(()=>xl.none(r),s=>np(s.all,r,s.index,1,o))));var r,o},HA=(t,e,n)=>{return IC(t,e,(o=qo,TC(r=n,void 0).fold(()=>xl.none(),s=>np(s.all,r,s.index,-1,o))));var r,o},jC=(t,e)=>{const n=["table","li","dl"],r=R(t.getBody()),o=a=>{const i=Ee(a);return ne(a,r)||Tt(n,i)},s=t.selection.getRng();return(a=R(e?s.endContainer:s.startContainer),i=o,((l,c,u=Ce)=>u(c)?N.none():Tt(l,Ee(c))?N.some(c):cr(c,l.join(","),f=>Qt(f,"table")||u(f)))(["td","th"],a,i)).map(a=>(RC(a,o).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?FC:HA)(t,o,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},lo=(t,e)=>({container:t,offset:e}),yd=xe.DOM,Cd=t=>e=>t===e?-1:0,rp=(t,e,n)=>{if(at(t)&&e>=0)return N.some(lo(t,e));{const r=ta(yd);return N.from(r.backwards(t,e,Cd(t),n)).map(o=>lo(o.container,o.container.data.length))}},op=(t,e,n)=>{if(!at(t))return N.none();if(e>=0&&e<=t.data.length)return N.some(lo(t,e));{const o=ta(yd);return N.from(o.backwards(t,e,Cd(t),n)).bind(s=>op(s.container,e+s.container.data.length,n))}},zC=(t,e,n)=>{if(!at(t))return N.none();const r=t.data;if(e<=r.length)return N.some(lo(t,e));{const o=ta(yd);return N.from(o.forwards(t,e,Cd(t),n)).bind(s=>zC(s.container,e-r.length,n))}},sp=(t,e,n,r,o)=>{const s=ta(t,(a=t,i=>a.isBlock(i)||Tt(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i)));var a;return N.from(s.backwards(e,n,r,o))},HC=t=>Vo(t.toString().replace(/\u00A0/g," ")),UC=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),ap=(t,e)=>t.substring(e.length),qC=(t,e,n,r=0)=>{return(o=R(e.startContainer),zr(o,d0)).fold(()=>((s,a,i,l=0)=>{if(!(c=a).collapsed||!at(c.startContainer))return N.none();var c;const u={text:"",offset:0},f=s.getParent(a.startContainer,s.isBlock)||s.getRoot();return sp(s,a.startContainer,a.startOffset,(h,b,g)=>(u.text=g+u.text,u.offset+=b,((v,p,C)=>{let w;const k=C.charAt(0);for(w=p-1;w>=0;w--){const A=v.charAt(w);if(UC(A))return N.none();if(k===A&&Fe(v,C,w,p))break}return N.some(w)})(u.text,u.offset,i).getOr(b)),f).bind(h=>{const b=a.cloneRange();if(b.setStart(h.container,h.offset),b.setEnd(a.endContainer,a.endOffset),b.collapsed)return N.none();const g=HC(b);return 0!==g.lastIndexOf(i)||ap(g,i).length<l?N.none():N.some({text:ap(g,i),range:b,trigger:i})})})(t,e,n,r),s=>{const a=t.createRng();a.selectNode(s.dom);const i=HC(a);return N.some({range:a,text:ap(i,n),trigger:n})});var o},$C=t=>{if(3===t.nodeType)return lo(t,t.data.length);{const e=t.childNodes;return e.length>0?$C(e[e.length-1]):lo(t,e.length)}},WC=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?WC(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?$C(n[n.length-1]):lo(t,e)},VC=(t,e,n,r={})=>{var o;const s=e(),a=null!==(o=t.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=qt(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>{return u=t.dom,f=>{const h=WC(f.startContainer,f.startOffset);return!((b,g)=>{var v;const p=null!==(v=b.getParent(g.container,b.isBlock))&&void 0!==v?v:b.getRoot();return sp(b,g.container,g.offset,(C,w)=>0===w?-1:w,p).filter(C=>{const w=C.container.data.charAt(C.offset-1);return!UC(w)}).isSome()})(u,h)};var u})(n.range,a,n.text));if(0===i.length)return N.none();const l=Promise.all(oe(i,c=>c.fetch(n.text,c.maxResults,r).then(u=>({matchText:n.text,items:u,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return N.some({lookupData:l,context:n})};var To;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(To||(To={}));const ip=(t,e,n)=>t.stype===To.Error?e(t.serror):n(t.svalue),ri=t=>({stype:To.Value,svalue:t}),wl=t=>({stype:To.Error,serror:t}),UA=ip,lp=t=>Ut(t)&&Ye(t).length>100?" removed due to size":JSON.stringify(t,null,2),xd=(t,e)=>wl([{path:t,getErrorInfo:e}]),KC=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const s in o)ee(o,s)&&(n[s]=t(n[s],o[s]))}return n},cp=KC((t,e)=>Dt(t)&&Dt(e)?cp(t,e):e),XC=(KC((t,e)=>e),t=>({tag:"defaultedThunk",process:ft(t)})),GC=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},dp=t=>({extract:(e,n)=>{return(r=t(n)).stype===To.Error?xd(e,ft(r.serror)):r;var r},toString:ft("val")}),WA=dp(ri),YC=(t,e,n,r)=>r(Se(t,e).getOrThunk(()=>n(t))),VA=(t,e,n,r,o)=>{const s=i=>o.extract(e.concat([r]),i),a=i=>i.fold(()=>ri(N.none()),l=>{return(u=o.extract(e.concat([r]),l)).stype===To.Value?{stype:To.Value,svalue:(0,N.some)(u.svalue)}:u;var u});switch(t.tag){case"required":return i=e,u=s,Se(l=n,c=r).fold(()=>{return h=c,b=l,xd(i,()=>'Could not find valid *required* value for "'+h+'" in '+lp(b));var h,b},u);case"defaultedThunk":return YC(n,r,t.process,s);case"option":return((i,l,c)=>c(Se(i,l)))(n,r,a);case"defaultedOptionThunk":return((i,l,c,u)=>u(Se(i,l).map(f=>!0===f?c(i):f)))(n,r,t.process,a);case"mergeWithThunk":return YC(n,r,ft({}),i=>{const l=cp(t.process(n),i);return s(l)})}var i,l,c,u},up=t=>({extract:(e,n)=>((r,o,s)=>{const a={},i=[];for(const l of s)GC(l,(c,u,f,h)=>{const b=VA(f,r,o,c,h);UA(b,g=>{i.push(...g)},g=>{a[u]=g})},(c,u)=>{a[c]=u(o)});return i.length>0?wl(i):ri(a)})(e,n,t),toString:()=>"obj{\n"+oe(t,n=>GC(n,(r,o,s,a)=>r+" -> "+a.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),QC=t=>({extract:(e,n)=>(t=>{const e=(r=>{const o=[],s=[];return st(r,a=>{ip(a,i=>s.push(i),i=>o.push(i))}),{values:o,errors:s}})(t);return e.errors.length>0?(n=e.errors,Zn(wl,Pl)(n)):ri(e.values);var n})(oe(n,(o,s)=>t.extract(e.concat(["["+s+"]"]),o))),toString:()=>"array("+t.toString()+")"}),JC=(t,e)=>((t,e)=>({extract:(n,r)=>Se(r,t).fold(()=>{return s=t,xd(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},o=>{return s=n,a=r,Se(i=e,l=o).fold(()=>{return u=i,f=l,xd(s,()=>'The chosen schema: "'+f+'" did not exist in branches: '+lp(u));var u,f},c=>c.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Ye(e)}))(t,Io(e,up)),XA=ft(WA),wd=(t,e)=>dp(n=>{const r=typeof n;return t(n)?ri(n):wl(`Expected type: ${e} but got: ${r}`)}),GA=wd(x,"number"),Sd=wd(Rt,"string"),YA=wd(_n,"boolean"),fp=wd(pe,"function"),Sl=(t,e,n,r)=>({tag:"field",key:t,newKey:e,presence:n,prop:r}),ZC=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),tx=(t,e)=>Sl(t,t,{tag:"required",process:{}},e),ex=t=>tx(t,Sd),nx=t=>tx(t,fp),mp=(t,e)=>Sl(t,t,{tag:"option",process:{}},e),kd=t=>mp(t,Sd),oi=(t,e,n)=>Sl(t,t,XC(e),n),rx=(t,e)=>oi(t,e,GA),ox=(t,e,n)=>{return oi(t,e,(r=n,o=s=>Tt(r,s)?Kn.value(s):Kn.error(`Unsupported value: "${s}", choose one of "${r.join(", ")}".`),dp(s=>o(s).fold(wl,ri))));var r,o},pp=(t,e)=>oi(t,e,YA),gp=(t,e)=>oi(t,e,fp),QA=ex("type"),JA=nx("fetch"),hp=nx("onAction"),ZA=gp("onSetup",()=>Et),tR=kd("text"),eR=kd("icon"),nR=kd("tooltip"),rR=kd("label"),oR=pp("active",!1),sR=pp("enabled",!0),sx=pp("primary",!1),kl=t=>oi("type",t,Sd),aR=up([QA,ex("trigger"),rx("minChars",1),((t,e)=>Sl(t,t,XC(1),XA()))("columns"),rx("maxResults",10),mp("matches",fp),JA,hp,(ax=Sd,oi("highlightOn",[],QC(ax)))]);var ax;const bp=[sR,nR,eR,tR,ZA],ix=[oR].concat(bp),iR=[gp("predicate",Ce),ox("scope","node",["node","editor"]),ox("position","selection",["node","selection","line"])],lR=bp.concat([kl("contextformbutton"),sx,hp,ZC("original",de)]),cR=ix.concat([kl("contextformbutton"),sx,hp,ZC("original",de)]),dR=bp.concat([kl("contextformbutton")]),uR=ix.concat([kl("contextformtogglebutton")]),fR=JC("type",{contextformbutton:lR,contextformtogglebutton:cR});up([kl("contextform"),gp("initValue",ft("")),rR,((t,e)=>Sl(t,t,{tag:"required",process:{}},QC(e)))("commands",fR),mp("launch",JC("type",{contextformbutton:dR,contextformtogglebutton:uR}))].concat(iR));const pR=t=>{const e=hs(),n=rn(!1),r=e.isSet,o=()=>{r()&&(He(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=zo(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Io(e,s=>{return(a=s,((t,e,n)=>{return r=(i=e.extract([t],a=n)).stype===To.Error?{stype:To.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,ip(r,Kn.error,Kn.value);var a,i,r})("Autocompleter",aR,{trigger:a.ch,...a})).fold(i=>{throw new Error("Errors: \n"+(c=>{const u=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:ft("... (only showing first ten failures)")}]):c;return oe(u,f=>"Failed path: ("+f.path.join(" > ")+")\n"+f.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+lp(l.input));var l},de);var a}),r=Rn(es(n,s=>s.trigger)),o=jo(n);return{dataset:n,triggers:r,lookupByTrigger:s=>qt(o,a=>a.trigger===s)}})(t)),a=i=>{var l;(l=i,e.get().map(c=>qC(t.dom,t.selection.getRng(),c.trigger).bind(u=>VC(t,s,u,l))).getOrThunk(()=>((c,u)=>{const f=u(),h=c.selection.getRng();return(b=c.dom,g=h,v=f,jn(v.triggers,p=>qC(b,g,p))).bind(b=>VC(c,u,b));var b,g,v})(t,s))).fold(o,l=>{var c,f;c=l.context,r()||(f=c.range,He(t).autocompleter.addDecoration(f),e.set({trigger:c.trigger,matchLength:c.text.length})),l.lookupData.then(c=>{e.get().map(u=>{const f=l.context;u.trigger===f.trigger&&(f.text.length-u.matchLength>=10?o():(e.set({...u,matchLength:f.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:c}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:c}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const c=Ut(l)?l.fetchOptions:{};a(c)}),t.addCommand("mceAutocompleterClose",o),((i,l)=>{const c=Eu(l.load,50);i.on("keypress compositionend",u=>{27!==u.which&&c.throttle()}),i.on("keydown",u=>{const f=u.which;8===f?c.throttle():27===f&&l.cancelIfNecessary()}),i.on("remove",c.cancel)})(t,{cancelIfNecessary:o,load:a})},lx=t=>(e,n,r={})=>{const o=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Et,inputType:n},a=Ng(new InputEvent(t));return e.dispatch(t,{...a,...s,...r})},vp=lx("input"),yp=lx("beforeinput"),El=(t,e)=>{const n=t.dom,r=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(vt(a)||at(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(mn),e.firstChild)}const o=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new Ze(e,e);let a,i=e;for(;a=s.current();){if(at(a)){o.setStart(a,0),o.setEnd(a,0);break}if(r[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}i=a,a=s.next()}a||(o.setStart(i,0),o.setEnd(i,0))}else ze(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)):(o.setStart(e,0),o.setEnd(e,0));t.selection.setRng(o),rl(t,o)},Ed=(t,e)=>{const n=t.getRoot();let r,o=e;for(;o!==n&&o&&"false"!==t.getContentEditable(o);)"true"===t.getContentEditable(o)&&(r=o),o=o.parentNode;return o!==n?r:n},Cp=t=>N.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),cx=(t,e)=>{const n=t?.parentNode;return pt(n)&&n.nodeName===e},dx=t=>pt(t)&&/^(OL|UL|LI)$/.test(t.nodeName),Nd=t=>{const e=t.parentNode;return pt(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},_d=(t,e,n)=>{let r=t[n?"firstChild":"lastChild"];for(;r&&!vt(r);)r=r[n?"nextSibling":"previousSibling"];return r===e},gR=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),xp=t=>{t.innerHTML='<br data-mce-bogus="1">'},wp=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Sp=(t,e)=>pt(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),kp=(t,e,n)=>at(e)?t?1===n&&e.data.charAt(n-1)===En?0:n:n===e.data.length-1&&e.data.charAt(n)===En?e.data.length:n:n,Nl=(t,e)=>{fr(t).toLowerCase()===e.tagName.toLowerCase()&&((n,r,o)=>{const s=n.dom;N.from(o.style).map(s.parseStyle).each(u=>{const f={...V(R(r)),...u};s.setStyles(r,f)});const a=N.from(o.class).map(u=>u.split(/\s+/)),i=N.from(r.className).map(u=>qt(u.split(/\s+/),f=>""!==f));ln(a,i,(u,f)=>{const h=qt(f,g=>!Tt(u,g)),b=[...u,...h];s.setAttrib(r,"class",b.join(" "))});const l=["style","class"],c=br(o,(u,f)=>!Tt(l,f));s.setAttribs(r,c)})(t,e,$i(t))},ux={insert:(t,e)=>{let n,r,o,s,a=!1;const i=t.dom,l=t.schema,c=l.getNonEmptyElements(),u=t.selection.getRng(),f=fr(t),h=T=>{let P=n;const L=l.getTextInlineElements();let M;M=T||"TABLE"===o||"HR"===o?i.create(T||f):w.cloneNode(!1);let $=M;if(!1===ak(t))i.setAttrib(M,"style",null),i.setAttrib(M,"class",null);else do{if(L[P.nodeName]){if(Ur(P)||Nr(P))continue;const U=P.cloneNode(!1);i.setAttrib(U,"id",""),M.hasChildNodes()?(U.appendChild(M.firstChild),M.appendChild(U)):($=U,M.appendChild(U))}}while((P=P.parentNode)&&P!==C);return Nl(t,M),xp($),M},b=T=>{const P=kp(T,n,r);if(at(n)&&(T?P>0:P<n.data.length))return!1;if(n.parentNode===w&&a&&!T||T&&vt(n)&&n===w.firstChild)return!0;if(wp(n,"TABLE")||wp(n,"HR"))return a&&!T||!a&&T;const L=new Ze(n,w);let M;for(at(n)&&(T&&0===P?L.prev():T||P!==n.data.length||L.next());M=L.current();){if(vt(M)){if(!M.getAttribute("data-mce-bogus")){const $=M.nodeName.toLowerCase();if(c[$]&&"br"!==$)return!1}}else if(at(M)&&!Xs(M.data))return!1;T?L.prev():L.next()}return!0},g=()=>{let T;return T=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==k?h(f):h(),((P,L)=>{const M=ik(P);return!be(L)&&(Rt(M)?Tt(ct.explode(M),L.nodeName.toLowerCase()):M)})(t,s)&&Sp(i,s)&&i.isEmpty(w)?T=i.split(s,w):i.insertAfter(T,w),El(t,T),T};jc(i,u).each(T=>{u.setStart(T.startContainer,T.startOffset),u.setEnd(T.endContainer,T.endOffset)}),n=u.startContainer,r=u.startOffset;const v=!(!e||!e.shiftKey),p=!(!e||!e.ctrlKey);vt(n)&&n.hasChildNodes()&&(a=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=a&&at(n)?n.data.length:0);const C=Ed(i,n);if(!C||((T,P)=>{const L=T.dom.getParent(P,"ol,ul,dl");return null!==L&&"false"===T.dom.getContentEditableParent(L)})(t,n))return;v||(n=((T,P,L,M,$)=>{var U,W;const H=T.dom,J=null!==(U=Ed(H,M))&&void 0!==U?U:H.getRoot();let ut=H.getParent(M,H.isBlock);if(!ut||!Sp(H,ut)){if(ut=ut||J,!ut.hasChildNodes()){const ae=H.create(P);return Nl(T,ae),ut.appendChild(ae),L.setStart(ae,0),L.setEnd(ae,0),ae}let mt,_t=M;for(;_t&&_t.parentNode!==ut;)_t=_t.parentNode;for(;_t&&!H.isBlock(_t);)mt=_t,_t=_t.previousSibling;const Lt=null===(W=mt?.parentElement)||void 0===W?void 0:W.nodeName;if(mt&&Lt&&T.schema.isValidChild(Lt,P.toLowerCase())){const ae=mt.parentNode,ye=H.create(P);for(Nl(T,ye),ae.insertBefore(ye,mt),_t=mt;_t&&!H.isBlock(_t);){const kt=_t.nextSibling;ye.appendChild(_t),_t=kt}L.setStart(M,$),L.setEnd(M,$)}}return M})(t,f,u,n,r));let w=i.getParent(n,i.isBlock)||i.getRoot();s=pt(w?.parentNode)?i.getParent(w.parentNode,i.isBlock):null,o=w?w.nodeName.toUpperCase():"";const k=s?s.nodeName.toUpperCase():"";if("LI"!==k||p||(w=s,s=s.parentNode,o=k),/^(LI|DT|DD)$/.test(o)&&vt(s)&&i.isEmpty(w))return void((T,P,L,M,$)=>{const U=T.dom,W=T.selection.getRng(),H=L.parentNode;if(L===T.getBody()||!H)return;var J;dx(J=L)&&dx(J.parentNode)&&($="LI");let ut=P($);if(_d(L,M,!0)&&_d(L,M,!1))if(cx(L,"LI")){const mt=Nd(L);U.insertAfter(ut,mt),(null===(Lt=(_t=L).parentNode)||void 0===Lt?void 0:Lt.firstChild)===_t?U.remove(mt):U.remove(L)}else U.replace(ut,L);else if(_d(L,M,!0))cx(L,"LI")?(U.insertAfter(ut,Nd(L)),ut.appendChild(U.doc.createTextNode(" ")),ut.appendChild(L)):H.insertBefore(ut,L),U.remove(M);else if(_d(L,M,!1))U.insertAfter(ut,Nd(L)),U.remove(M);else{L=Nd(L);const mt=W.cloneRange();mt.setStartAfter(M),mt.setEndAfter(L);const _t=mt.extractContents();"LI"===$&&((Lt,ae)=>Lt.firstChild&&"LI"===Lt.firstChild.nodeName)(_t)?(ut=_t.firstChild,U.insertAfter(_t,L)):(U.insertAfter(_t,L),U.insertAfter(ut,L)),U.remove(M)}var _t,Lt;El(T,ut)})(t,h,s,w,f);if(w===t.getBody()||!Sp(i,w))return;const A=w.parentNode;let O;if(Ma(w))O=lu(w),i.isEmpty(w)&&xp(w),Nl(t,O),El(t,O);else if(b(!1))O=g();else if(b(!0)&&A)O=A.insertBefore(h(),w),El(t,wp(w,"HR")?O:w);else{const T=(L=>{const M=L.cloneRange();return M.setStart(L.startContainer,kp(!0,L.startContainer,L.startOffset)),M.setEnd(L.endContainer,kp(!1,L.endContainer,L.endOffset)),M})(u).cloneRange();T.setEndAfter(w);const P=T.extractContents();st(_i(R(P),Tn),M=>{const $=M.dom;$.nodeValue=Vo($.data)}),(L=>{let M=L;do{at(M)&&(M.data=M.data.replace(/^[\r\n]+/,"")),M=M.firstChild}while(M)})(P),O=P.firstChild,i.insertAfter(P,w),((L,M,$)=>{var U;const W=[];if(!$)return;let H=$;for(;H=H.firstChild;){if(L.isBlock(H))return;vt(H)&&!M[H.nodeName.toLowerCase()]&&W.push(H)}let J=W.length;for(;J--;)H=W[J],(!H.hasChildNodes()||H.firstChild===H.lastChild&&""===(null===(U=H.firstChild)||void 0===U?void 0:U.nodeValue)||gR(L,H))&&L.remove(H)})(i,c,O),((L,M)=>{M.normalize();const $=M.lastChild;(!$||vt($)&&/^(left|right)$/gi.test(L.getStyle($,"float",!0)))&&L.add(M,"br")})(i,w),i.isEmpty(w)&&xp(w),O.normalize(),i.isEmpty(O)?(i.remove(O),g()):(Nl(t,O),El(t,O))}i.setAttrib(O,"id",""),t.dispatch("NewBlock",{newBlock:O})},fakeEventName:"insertParagraph"},fx=(t,e,n)=>{const r=t.dom.createRng();n?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),t.selection.setRng(r),rl(t,r)},hR=(t,e)=>{const n=ot("br");nt(R(e),n),t.undoManager.add()},bR=(t,e)=>{vR(t.getBody(),e)||lt(R(e),ot("br"));const n=ot("br");lt(R(e),n),fx(t,n.dom,!1),t.undoManager.add()},vR=(t,e)=>{return n=X.after(e),!!ze(n.getNode())||tr(t,X.after(e)).map(r=>ze(r.getNode())).getOr(!1);var n},mx=t=>t&&"A"===t.nodeName&&"href"in t,yR=t=>t.fold(Ce,mx,mx,Ce),CR=(t,e)=>{e.fold(Et,yt(hR,t),yt(bR,t),Et)},px={insert:(t,e)=>{const n=(r=>{const o=yt(ua,r),s=X.fromRangeStart(r.selection.getRng());return Ao(o,r.getBody(),s).filter(yR)})(t);n.isSome()?n.each(yt(CR,t)):((r,o)=>{const a=r.dom,i=r.selection.getRng();let l,c=!1;jc(a,i).each(p=>{i.setStart(p.startContainer,p.startOffset),i.setEnd(p.endContainer,p.endOffset)});let u=i.startOffset,f=i.startContainer;if(vt(f)&&f.hasChildNodes()){const p=u>f.childNodes.length-1;f=f.childNodes[Math.min(u,f.childNodes.length-1)]||f,u=p&&at(f)?f.data.length:0}let h=a.getParent(f,a.isBlock);const b=h&&h.parentNode?a.getParent(h.parentNode,a.isBlock):null;"LI"!==(b?b.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(h=b),at(f)&&u>=f.data.length&&(((p,C,w)=>{const k=new Ze(C,w);let A;const O=p.getNonEmptyElements();for(;A=k.next();)if(O[A.nodeName.toLowerCase()]||at(A)&&A.length>0)return!0;return!1})(r.schema,f,h||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),Tu(a,i,l),fx(r,l,c),r.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},gx=(t,e)=>Cp(t).filter(n=>e.length>0&&Qt(R(n),e)).isSome(),Dr=yo([{br:[]},{block:[]},{none:[]}]),xR=(t,e)=>{return gx(n=t,sk(n));var n},hx=t=>(e,n)=>Cp(e).filter(o=>Ti(R(o))).isSome()===t,bx=(t,e)=>(n,r)=>Cp(n).fold(ft(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,wR=t=>{const e=Ed(t.dom,t.selection.getStart());return be(e)},_l=t=>bx("pre",t),Ad=t=>(e,n)=>nk(e)===t,SR=(t,e)=>{return gx(n=t,ok(n));var n},Rd=(t,e)=>e,kR=t=>{const e=fr(t),n=Ed(t.dom,t.selection.getStart());return pt(n)&&t.schema.isValidChild(n.nodeName,e)},qr=(t,e)=>(n,r)=>gn(t,(o,s)=>o&&s(n,r),!0)?N.some(e):N.none(),Td=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),pt(n)&&yp(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),pt(n)&&vp(e,t.fakeEventName))},vx=(t,e)=>{const n=()=>Td(px,t,e),r=()=>Td(ux,t,e),o=(s=t,a=e,E1([qr([xR],Dr.none()),qr([_l(!0),wR],Dr.none()),qr([bx("summary",!0)],Dr.br()),qr([_l(!0),Ad(!1),Rd],Dr.br()),qr([_l(!0),Ad(!1)],Dr.block()),qr([_l(!0),Ad(!0),Rd],Dr.block()),qr([_l(!0),Ad(!0)],Dr.br()),qr([hx(!0),Rd],Dr.br()),qr([hx(!0)],Dr.block()),qr([SR],Dr.br()),qr([Rd],Dr.br()),qr([kR],Dr.block())],[s,!(!a||!a.shiftKey)]).getOr(Dr.none()));var s,a;switch(rk(t)){case"linebreak":o.fold(n,n,Et);break;case"block":o.fold(r,r,Et);break;case"invert":o.fold(r,n,Et);break;default:o.fold(n,r,Et)}},ER=Hn(),yx=t=>t.stopImmediatePropagation(),Cx=t=>t.keyCode===St.PAGE_UP||t.keyCode===St.PAGE_DOWN,xx=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",yx,!0):!n&&t.get()&&e.off("NodeChange",yx),t.set(n)},wx=(t,e)=>{const n=e.container(),r=e.offset();return at(n)?(n.insertData(r,t),N.some(X(n,r+t.length))):kc(e).map(o=>{const s=Y(t);return e.isAtEnd()?lt(o,s):nt(o,s),X(s.dom,t.length)})},NR=yt(wx,mn),_R=yt(wx," "),RR=t=>{const e=X.fromRangeStart(t.selection.getRng()),n=R(t.getBody());if(t.selection.isCollapsed()){const r=yt(ua,t),o=X.fromRangeStart(t.selection.getRng());return Ao(r,t.getBody(),o).bind((s=n,a=>a.fold(i=>Er(s.dom,X.before(i)),i=>Xn(i),i=>So(i),i=>tr(s.dom,X.after(i))))).map(s=>()=>{return((t,e)=>n=>{return r=t,!Bf(o=n)&&(Er((s=r).dom,a=o).isNone()||tr(s.dom,a).isNone()||Tf(s,a)||T0(s,a)||Df(s,a)||Of(s,a)||B0(r,o)||L0(r,o))?NR(e):_R(e);var r,o,s,a})(n,e)(s).each((a=t,i=>(a.selection.setRng(i.toRange()),a.nodeChanged(),!0)));var a})}var s;return N.none()},TR=t=>dE(t)?[{keyCode:St.TAB,action:Jt(jC,t,!0)},{keyCode:St.TAB,shiftKey:!0,action:Jt(jC,t,!1)}]:[],OR=t=>{if(t.addShortcut("Meta+P","","mcePrint"),pR(t),_o(t))return rn(null);{const e=(t=>{const e=rn(null),n=yt(ua,t);return t.on("NodeChange",r=>{Wi(t)&&(((o,s,a)=>{const i=oe(fn(R(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),u=>u.dom),l=qt(i,o),c=qt(a,o);st(Wt(l,c),yt(W1,!1)),st(Wt(c,l),yt(W1,!0))})(n,t.dom,r.parents),((o,s)=>{const a=s.get();if(o.selection.isCollapsed()&&!o.composing&&a){const i=X.fromRangeStart(o.selection.getRng());X.isTextPosition(i)&&!au(l=i)&&!iu(l)&&(hd(o,((t,e)=>{return X.isTextPosition(e)?(r=e,Dh(n=t)&&r.container()===n?((o,s)=>{const a=Lh(o.data.substr(0,s.offset())),i=Lh(o.data.substr(s.offset()));return(a.text+i.text).length>0?(Ph(o),X(o,s.offset()-a.count)):s})(n,r):Mh(n,r)):((n,r)=>r.container()===n.parentNode?((o,s)=>{const a=s.container(),i=((l,c)=>{const u=ie(l,c);return-1===u?N.none():N.some(u)})(an(a.childNodes),o).map(l=>l<s.offset()?X(a,s.offset()-1):s).getOr(s);return ra(o),i})(n,r):Mh(n,r))(t,e);var n,r})(a,i)),s.set(null))}var l})(t,e),((o,s,a,i)=>{if(s.selection.isCollapsed()){const l=qt(i,o);st(l,c=>{const u=X.fromRangeStart(s.selection.getRng());Ao(o,s.getBody(),u).bind(f=>V1(s,a,f))})}})(n,t,e,r.parents))}),e})(t);return(n=t).on("keyup compositionstart",yt(DA,n)),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=me.os.isMacOS()||me.os.isiOS();Cl([{keyCode:St.RIGHT,action:Jt(bC,s,!0)},{keyCode:St.LEFT,action:Jt(bC,s,!1)},{keyCode:St.UP,action:Jt(vC,s,!1)},{keyCode:St.DOWN,action:Jt(vC,s,!0)},...l?[{keyCode:St.UP,action:Jt(vd,s,!1),metaKey:!0,shiftKey:!0},{keyCode:St.DOWN,action:Jt(vd,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:St.RIGHT,action:Jt(PC,s,!0)},{keyCode:St.LEFT,action:Jt(PC,s,!1)},{keyCode:St.UP,action:Jt(MC,s,!1)},{keyCode:St.DOWN,action:Jt(MC,s,!0)},{keyCode:St.RIGHT,action:Jt(kC,s,!0)},{keyCode:St.LEFT,action:Jt(kC,s,!1)},{keyCode:St.UP,action:Jt(EC,s,!1)},{keyCode:St.DOWN,action:Jt(EC,s,!0)},{keyCode:St.RIGHT,action:Jt(K1,s,a,!0)},{keyCode:St.LEFT,action:Jt(K1,s,a,!1)},{keyCode:St.RIGHT,ctrlKey:!l,altKey:l,action:Jt(wA,s,a)},{keyCode:St.LEFT,ctrlKey:!l,altKey:l,action:Jt(SA,s,a)},{keyCode:St.UP,action:Jt(CC,s,!1)},{keyCode:St.DOWN,action:Jt(CC,s,!0)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{let o=!1;n.on("keydown",s=>{o=s.keyCode===St.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===St.BACKSPACE?"deleteContentBackward":"deleteContentForward";SC([{keyCode:St.BACKSPACE,action:Jt(lC,a)},{keyCode:St.BACKSPACE,action:Jt(Hm,a,!1)},{keyCode:St.DELETE,action:Jt(Hm,a,!0)},{keyCode:St.BACKSPACE,action:Jt(Fm,a,!1)},{keyCode:St.DELETE,action:Jt(Fm,a,!0)},{keyCode:St.BACKSPACE,action:Jt(Ym,a,i,!1)},{keyCode:St.DELETE,action:Jt(Ym,a,i,!0)},{keyCode:St.BACKSPACE,action:Jt(Vf,a,!1)},{keyCode:St.DELETE,action:Jt(Vf,a,!0)},{keyCode:St.BACKSPACE,action:Jt(Um,a,!1)},{keyCode:St.DELETE,action:Jt(Um,a,!0)},{keyCode:St.BACKSPACE,action:Jt(Zm,a,!1)},{keyCode:St.DELETE,action:Jt(Zm,a,!0)},{keyCode:St.BACKSPACE,action:Jt(Mm,a,!1)},{keyCode:St.DELETE,action:Jt(Mm,a,!0)},{keyCode:St.BACKSPACE,action:Jt(Pm,a,!1)},{keyCode:St.DELETE,action:Jt(Pm,a,!0)},{keyCode:St.BACKSPACE,action:Jt(Qm,a,!1)},{keyCode:St.DELETE,action:Jt(Qm,a,!0)}],l).filter(u=>a.selection.isEditable()).each(u=>{l.preventDefault(),yp(a,c).isDefaultPrevented()||(u(),vp(a,c))})})(n,r,s)}),n.on("keyup",s=>{s.isDefaultPrevented()||((a,i,l)=>{const c=Hn(),u=c.os,f=c.browser,h=u.isMacOS()?[{keyCode:St.BACKSPACE,altKey:!0,action:Jt(yl,a)},{keyCode:St.DELETE,altKey:!0,action:Jt(yl,a)}]:[{keyCode:St.BACKSPACE,ctrlKey:!0,action:Jt(yl,a)},{keyCode:St.DELETE,ctrlKey:!0,action:Jt(yl,a)}];u.isMacOS()&&l&&h.push({keyCode:f.isFirefox()?224:91,action:Jt(yl,a)}),Cl([{keyCode:St.BACKSPACE,action:Jt(y1,a)},{keyCode:St.DELETE,action:Jt(y1,a)},...h],i)})(n,s,o),o=!1})})(t,e),(n=>{n.on("keydown",r=>{var o,s,a;r.keyCode===St.ENTER&&(o=n,(s=r).isDefaultPrevented()||(s.preventDefault(),(a=o.undoManager).typing&&(a.typing=!1,a.add()),o.undoManager.transact(()=>{vx(o,s)})))})})(t),(n=>{n.on("keydown",r=>{var o,s;r.isDefaultPrevented()||(s=r,SC([{keyCode:St.SPACEBAR,action:Jt(RR,o=n)}],s).each(a=>{s.preventDefault(),yp(o,"insertText",{data:" "}).isDefaultPrevented()||(a(),vp(o,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",r=>{r.isComposing||(o=>{const s=R(o.getBody());o.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!at(n))return N.none();if((r=>{const o=r.container();return at(o)&&Fe(o.data,mn)})(e)){const r=F0(t,n,!1)||(o=>{const s=o.data,a=(i=>{const l=i.split("");return oe(l,(c,u)=>Rc(c)&&u>0&&u<l.length-1&&Xu(l[u-1])&&Xu(l[u+1])?" ":c).join("")})(s);return a!==s&&(o.data=a,!0)})(n)||j0(t,n,!1);return js(r,e)}if(Lf(t,e)){const r=F0(t,n,!0)||j0(t,n,!0);return js(r,e)}return N.none()})(s,X.fromRangeStart(o.selection.getRng())).each(a=>{o.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",r=>{var s;r.isDefaultPrevented()||(s=r,Cl([...TR(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=me.os.isMacOS()||me.os.isiOS();Cl([{keyCode:St.END,action:Jt(yC,s,!0)},{keyCode:St.HOME,action:Jt(yC,s,!1)},...l?[]:[{keyCode:St.HOME,action:Jt(vd,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:St.END,action:Jt(vd,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:St.END,action:Jt(NC,s,!0)},{keyCode:St.HOME,action:Jt(NC,s,!1)},{keyCode:St.END,action:Jt(bd,s,!0,a)},{keyCode:St.HOME,action:Jt(bd,s,!1,a)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{if(ER.os.isMacOS())return;const o=rn(!1);n.on("keydown",s=>{Cx(s)&&xx(o,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,Cl([{keyCode:St.PAGE_UP,action:Jt(bd,a=n,!1,i=r)},{keyCode:St.PAGE_DOWN,action:Jt(bd,a,!0,i)}],l)),Cx(s)&&o.get()&&(xx(o,n,!1),n.nodeChanged())})})(t,e),e}var n};class DR{constructor(e){let n;this.lastPath=[],this.editor=e;const r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",o=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==o.type&&mf(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const o=e.selection.getStart(!0);o&&Oc(e)&&!r.isSameElementPath(o)&&e.dom.isChildOf(o,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",o=>{!o.isDefaultPrevented()&&Oc(e)&&("IMG"===e.selection.getNode().nodeName?Ar.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!Mk(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const s=[];this.editor.dom.getParent(r,a=>a===o||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:s})}}isSameElementPath(e){let n;const r=this.editor,o=Vr(r.dom.getParents(e,Ae,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const Od=ft("x-tinymce/html"),Ep="\x3c!-- x-tinymce/html --\x3e",BR=t=>Ep+t,Sx=t=>-1!==t.indexOf(Ep),kx="%MCEPASTEBIN%",Np=t=>t.dom.get("mcepastebin"),LR=t=>pt(t)&&"mcepastebin"===t.id,Ex=t=>t===kx,Nx=(t,e)=>(ct.each(e,n=>{t=hr(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),_x=t=>Nx(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,r)=>n||r?mn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Ax=(t,e)=>({content:t,cancelled:e}),_p=(t,e)=>(t.insertContent(e,{merge:Zk(t),paste:!0}),!0),Ap=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),PR=(t,e,n)=>{return!(t.selection.isCollapsed()||!Ap(e)||(r=t,o=e,s=n,r.undoManager.extra(()=>{s(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,s},MR=(t,e,n)=>{return r=t,!(!Ap(o=e)||!ke(Oh(r),s=>_a(o.toLowerCase(),`.${s.toLowerCase()}`)))&&((r,o,s)=>(r.undoManager.extra(()=>{s(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(t,e,n);var r,o},IR=(t=>{let e=0;return()=>"mceclip"+e++})(),Rx=(t,e,n,r)=>{const o=((l,c,u)=>{const f=l.dispatch("PastePreProcess",{content:c,internal:u}),h=((b,g)=>{const v=Ja({sanitize:ju(b)},b.schema);v.addNodeFilter("meta",C=>{ct.each(C,w=>{w.remove()})});const p=v.parse(g,{forced_root_block:!1,isRootContent:!0});return xs({validate:!0},b.schema).serialize(p)})(l,f.content);return l.hasEventListeners("PastePostProcess")&&!f.isDefaultPrevented()?((b,g,v)=>{const p=b.dom.create("div",{style:"display:none"},g),C=b.dispatch("PastePostProcess",{node:p,internal:v});return Ax(C.node.innerHTML,C.isDefaultPrevented())})(l,h,u):Ax(h,f.isDefaultPrevented())})(t,e,n);var s,a,l,c;o.cancelled||(s=t,a=o.content,r||!tE(s)?_p(s,a):(l=s,c=a,ct.each([PR,MR,_p],u=>!u(l,c,_p))))},Dd=(t,e,n)=>{const r=n||Sx(e);Rx(t,e.replace(Ep,""),r,!1)},Rp=(t,e)=>{const n=t.dom.encode(e).replace(/\r\n/g,"\n"),r=((o,s,a)=>{const i=o.split(/\n\n/),l=((f,h)=>{let b="<"+f;const g=es(h,(v,p)=>p+'="'+ps.encodeAllRaw(v)+'"');return g.length&&(b+=" "+g.join(" ")),b+">"})(s,a),c="</"+s+">",u=oe(i,f=>f.split(/\n/).join("<br />"));return 1===u.length?u[0]:oe(u,f=>l+f+c).join("")})(cg(n,nE(t)),fr(t),$i(t));Rx(t,r,!1,!0)},Tx=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const r=t.types[n];try{e[r]=t.getData(r)}catch{e[r]=""}}return e},_s=(t,e)=>e in t&&t[e].length>0,Ox=t=>_s(t,"text/html")||_s(t,"text/plain"),Dx=(t,e,n)=>{const r="paste"===e.type?e.clipboardData:e.dataTransfer;var o;if(wc(t)&&r){const s=((a,i)=>{const l=i.items?en(an(i.items),u=>"file"===u.kind?[u.getAsFile()]:[]):[],c=i.files?an(i.files):[];return qt(l.length>0?l:c,(u=>{const f=Oh(u);return h=>Qe(h.type,"image/")&&ke(f,b=>(g=>{const v=g.toLowerCase(),p={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return ct.hasOwn(p,v)?"image/"+p[v]:"image/"+v})(b)===h.type)})(a))})(t,r);if(s.length>0)return e.preventDefault(),(o=s,Promise.all(oe(o,a=>ey(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),st(a,i=>{var l,c;l=t,mm((c=i).uri).each(({data:u,type:f,base64Encoded:h})=>{const b=h?u:btoa(u),g=c.file,v=l.editorUpload.blobCache,C=v.getByData(b,f)??((w,k,A,O)=>{const T=IR(),P=Ch(w)&&pt(A.name),L=P?((U,W)=>{const H=W.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return pt(H)?U.dom.encode(H[1]):void 0})(w,A.name):T,$=k.create(T,A,O,L,P?A.name:void 0);return k.add($),$})(l,v,g,b);Dd(l,`<img src="${C.blobUri()}">`,!1)})})}),!0}return!1},Tp=(t,e,n,r)=>{let o=_x(n);const s=_s(e,Od())||Sx(n),a=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(o),i=Ap(o);(Ex(o)||!o.length||a&&!i)&&(r=!0),(r||i)&&(o=_s(e,"text/plain")&&a?e["text/plain"]:(l=>{const c=gs(),u=Ja({},c);let f="";const h=c.getVoidElements(),b=ct.makeMap("script noscript style textarea video audio iframe object"," "),g=c.getBlockElements(),v=p=>{const C=p.name,w=p;if("br"!==C){if("wbr"!==C)if(h[C]&&(f+=" "),b[C])f+=" ";else{if(3===p.type&&(f+=p.value),!(p.name in c.getVoidElements())){let k=p.firstChild;if(k)do{v(k)}while(k=k.next)}g[C]&&w.next&&(f+="\n","p"===C&&(f+="\n"))}}else f+="\n"};return l=Nx(l,[/<!\[[^\]]+\]>/g]),v(u.parse(l)),f})(o)),Ex(o)||(r?Rp(t,o):Dd(t,o,s))},Bx=(t,e,n,r)=>{((o,s,a)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",s),o.setData("text/plain",a),o.setData(Od(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),r()):n(e.html,r)},Lx=t=>(e,n)=>{const{dom:r,selection:o}=t,s=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},e);r.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),r.add(t.getBody(),s);const i=o.getRng();a.focus();const l=r.createRng();l.selectNodeContents(a),o.setRng(l),Ar.setEditorTimeout(t,()=>{o.setRng(i),r.remove(s),n()},0)},Px=t=>({html:BR(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),Mx=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},Ix=(t,e)=>{var n,r;return la.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(r=e.clientY)&&void 0!==r?r:0,t.getDoc())},Fx=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},jR=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,jx=t=>ct.trim(t).replace(jR,Tc).toLowerCase(),zR=(t,e,n)=>{const r=Qk(t);if(n||"all"===r||!Jk(t))return e;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,u)=>{const f=s.parseStyle(s.decode(c)),h={};for(let g=0;g<o.length;g++){const v=f[o[g]];let p=v,C=s.getStyle(a,o[g],!0);/color/.test(o[g])&&(p=jx(p),C=jx(C)),C!==p&&(h[o[g]]=v)}const b=s.serializeStyle(h,"span");return b?l+' style="'+b+'"'+u:l+u})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},UR=ze,zx=at,qR=t=>Ne(t.dom),Hx=t=>e=>ne(R(t),e),Ux=(t,e)=>Zr(R(t),qR,Hx(e)),qx=(t,e,n)=>{const r=new Ze(t,e),o=n?r.next.bind(r):r.prev.bind(r);let s=t;for(let a=n?t:o();a&&!UR(a);a=o())Hr(a)&&(s=a);return s};var si;!function(t){t.Before="before",t.After="after"}(si||(si={}));const WR=(t,e)=>Math.abs(t.left-e),VR=(t,e)=>Math.abs(t.right-e),XR=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),Op=(t,e,n)=>{const r=c=>Hr(c.node)?N.some(c):vt(c.node)?Op(an(c.node.childNodes),e,n):N.none(),o=(c,u)=>{const f=Mo(c,(h,b)=>u(h,e,n)-u(b,e,n));return((h,b)=>{if(h.length>=2){const g=r(h[0]).getOr(h[0]),v=r(h[1]).getOr(h[1]);if(Math.abs(b(g,e,n)-b(v,e,n))<2){if(at(g.node))return N.some(g);if(at(v.node))return N.some(v)}}return N.none()})(f,u).orThunk(()=>jn(f,r))},[s,a]=((t,e)=>{return(n=qt(t,n=>{return(r=e)>=(o=n).top&&r<=o.bottom;var r,o}),gn(n,(r,o)=>r.fold(()=>N.some(o),s=>{const a=Math.min(o.left,s.left),i=Math.min(o.top,s.top),l=Math.max(o.right,s.right),c=Math.max(o.bottom,s.bottom);return N.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}),N.none())).fold(()=>[[],t],n=>{const{pass:r,fail:o}=Wr(t,s=>((a,i)=>{const l=(c=a,u=i,Math.max(0,Math.min(c.bottom,u.bottom)-Math.max(c.top,u.top))/Math.min(a.height,i.height));var c,u;return((c,u)=>c.top<u.bottom&&c.bottom>u.top)(a,i)&&l>.5})(s,n));return[r,o]});var n})(F1(t),n),{pass:i,fail:l}=Wr(a,c=>c.top<n);return o(s,XR).orThunk(()=>o(l,qg)).orThunk(()=>o(i,qg))},$x=(t,e,n)=>((r,o,s)=>{const a=R(r),l=((t,e,n)=>N.from(t.dom.elementFromPoint(e,n)).map(K))(ue(a),o,s).filter(c=>cn(a,c)).getOr(a);return((c,u,f,h)=>{const b=(g,v)=>{const p=qt(g.dom.childNodes,Lo(C=>vt(C)&&C.classList.contains("mce-drag-container")));return v.fold(()=>Op(p,f,h),C=>{const w=qt(p,k=>k!==C.dom);return Op(w,f,h)}).orThunk(()=>(ne(g,c)?N.none():Pe(g)).bind(C=>b(C,N.some(g))))};return b(u,N.none())})(a,l,o,s)})(t,e,n).filter(r=>Ki(r.node)).map(r=>{return{node:(o=r).node,position:WR(o,s=e)<VR(o,s)?si.Before:si.After};var o,s}),Wx=t=>{var e,n;const r=t.getBoundingClientRect(),o=t.ownerDocument,s=o.documentElement,a=o.defaultView;return{top:r.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:r.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},Vx=t=>({target:t,srcElement:t}),Dp=t=>(e,n)=>{return r=t,o=e,s=Vx(n),{...o,dataTransfer:null,type:r,...s};var r,o,s},GR=Dp("dragstart"),YR=Dp("drop"),Kx=Dp("dragend"),Xx=Ne,JR=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(Xx,no),ZR=(t,e,n,r)=>{const o=t.dom,s=e.cloneNode(!0);o.setStyles(s,{width:n,height:r}),o.setAttrib(s,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},Bd=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},Gx=Bd("left",-32),Yx=Bd("left",32),Qx=Bd("top",-32),Jx=Bd("top",32),Zx=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},tw=(t,e,n)=>{t.on(r=>{if(r.intervalId.clear(),r.dragging){const o=n.fold(()=>(t=>((e,n)=>{const r=sr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,srcElement:null,target:null,timeStamp:0,type:"dragend",composedPath:r,initEvent:r,preventDefault:Et,stopImmediatePropagation:Et,stopPropagation:Et,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:null,...n}})(0,Vx(t)))(r.element),s=>Kx(s,r.element));e.dispatch("dragend",o)}}),ew(t)},ew=t=>{t.on(e=>{e.intervalId.clear(),Zx(e.ghost)}),t.clear()},Al=Ne,nw=(t,e)=>fa(t.getBody(),e),nT=t=>{const e=t.selection,n=t.dom,r=t.getBody(),o=((t,e,n,r)=>{const o=hs();let s,a;const i=fr(t),l=t.dom,c=()=>{(u=>{var f,h;const b=fn(R(u),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<b.length;g++){const v=b[g].dom;let p=v.previousSibling;if(lc(p)){const C=p.data;1===C.length?null===(f=p.parentNode)||void 0===f||f.removeChild(p):p.deleteData(C.length-1,1)}p=v.nextSibling,ic(p)&&(1===p.data.length?null===(h=p.parentNode)||void 0===h||h.removeChild(p):p.deleteData(0,1))}})(e),a&&(ra(a),a=null),o.on(u=>{l.remove(u.caret),o.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(u,f)=>{let h;if(c(),gE(f))return null;if(!n(f))return a=((b,g)=>{var v;const p=(null!==(v=b.ownerDocument)&&void 0!==v?v:document).createTextNode(En),C=b.parentNode;if(g){const w=b.previousSibling;if(Pa(w)){if(Sr(w))return w;if(lc(w))return w.splitText(w.data.length-1)}C?.insertBefore(p,b)}else{const w=b.nextSibling;if(Pa(w)){if(Sr(w))return w;if(ic(w))return w.splitText(1),w}b.nextSibling?C?.insertBefore(p,b.nextSibling):C?.appendChild(p)}return p})(f,u),h=f.ownerDocument.createRange(),Vi(a.nextSibling)?(h.setStart(a,0),h.setEnd(a,0)):(h.setStart(a,1),h.setEnd(a,1)),h;{const b=((p,C,w)=>{var k;const A=(null!==(k=C.ownerDocument)&&void 0!==k?k:document).createElement(p);A.setAttribute("data-mce-caret",w?"before":"after"),A.setAttribute("data-mce-bogus","all"),A.appendChild(sc().dom);const O=C.parentNode;return w?O?.insertBefore(A,C):C.nextSibling?O?.insertBefore(A,C.nextSibling):O?.appendChild(A),A})(i,f,u),g=Ih(e,f,u);l.setStyle(b,"top",g.top),a=b;const v=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(v,{...g}),l.add(e,v),o.set({caret:v,element:f,before:u}),u&&l.addClass(v,"mce-visual-caret-before"),s=setInterval(()=>{o.on(p=>{r()?l.toggleClass(p.caret,"mce-visual-caret-hidden"):l.addClass(p.caret,"mce-visual-caret-hidden")})},500),h=f.ownerDocument.createRange(),h.setStart(b,0),h.setEnd(b,0)}return h},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(u=>{const f=Ih(e,u.element,u.before);l.setStyles(u.caret,{...f})})},destroy:()=>clearInterval(s)}})(t,r,n.isBlock,()=>ca(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=p=>p!==r&&(Al(p)||vo(p))&&n.isChildOf(p,r)&&n.isEditable(p.parentNode),c=(p,C,w,k=!0)=>t.dispatch("ShowCaret",{target:C,direction:p,before:w}).isDefaultPrevented()?null:(k&&e.scrollIntoView(C,-1===p),o.show(w,C)),u=p=>Sr(p)||ic(p)||lc(p),f=p=>u(p.startContainer)||u(p.endContainer),b=(p,C)=>{if(!p)return null;if(p.collapsed){if(!f(p)){const O=C?1:-1,T=Qi(O,r,p),P=T.getNode(!C);if(pt(P)){if(Ki(P))return c(O,P,!!C&&!T.isAtEnd(),!1);if(ms(P)&&Ne(P.nextSibling)){const M=n.createRng();return M.setStart(P,0),M.setEnd(P,0),M}}const L=T.getNode(C);if(pt(L)){if(Ki(L))return c(O,L,!C&&!T.isAtEnd(),!1);if(ms(L)&&Ne(L.previousSibling)){const M=n.createRng();return M.setStart(L,1),M.setEnd(L,1),M}}}return null}let w=p.startContainer,k=p.startOffset;const A=p.endOffset;if(at(w)&&0===k&&Al(w.parentNode)&&(w=w.parentNode,k=n.nodeIndex(w),w=w.parentNode),!vt(w))return null;if(A===k+1&&w===p.endContainer){const O=w.childNodes[k];if(l(O))return(T=>{const P=T.cloneNode(!0),L=t.dispatch("ObjectSelected",{target:T,targetClone:P});if(L.isDefaultPrevented())return null;const M=((U,W)=>{const H=R(t.getBody()),J=t.getDoc(),ut=cs(H,"#"+s).getOrThunk(()=>{const Lt=Z('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',J);return Le(Lt,"id",s),Ct(H,Lt),Lt}),mt=n.createRng();ge(ut),Ot(ut,[Y(mn,J),R(W),Y(mn,J)]),mt.setStart(ut.dom.firstChild,1),mt.setEnd(ut.dom.lastChild,0),ds(ut,{top:n.getPos(U,t.getBody()).y+"px"}),Jb(ut);const _t=e.getSel();return _t&&(_t.removeAllRanges(),_t.addRange(mt)),mt})(T,L.targetClone),$=R(T);return st(fn(R(t.getBody()),"*[data-mce-selected]"),U=>{ne($,U)||nn(U,a)}),n.getAttrib(T,a)||T.setAttribute(a,"1"),i=T,v(),M})(O)}return null},g=()=>{i&&i.removeAttribute(a),cs(R(t.getBody()),"#"+s).each(Bt),i=null},v=()=>{o.hide()};return _o(t)||(t.on("click",p=>{n.isEditable(p.target)||(p.preventDefault(),t.focus())}),t.on("blur NewBlock",g),t.on("ResizeWindow FullscreenStateChanged",o.reposition),t.on("tap",p=>{const C=p.target,w=nw(t,C);Al(w)?(p.preventDefault(),gl(t,w).each(b)):l(C)&&gl(t,C).each(b)},!0),t.on("mousedown",p=>{const C=p.target;if(C!==r&&"HTML"!==C.nodeName&&!n.isChildOf(C,r)||!((k,A,O)=>{const T=R(k.getBody()),P=k.inline?T:R(ue(T).dom.documentElement),L=((M,$,U,W)=>{const H=$.dom.getBoundingClientRect();return{x:U-(M?H.left+$.dom.clientLeft+j_($):0),y:W-(M?H.top+$.dom.clientTop+F_($):0)}})(k.inline,P,A,O);return((M,$,U)=>{const W=M_(M),H=I_(M);return $>=0&&U>=0&&$<=W&&U<=H})(P,L.x,L.y)})(t,p.clientX,p.clientY))return;g(),v();const w=nw(t,C);Al(w)?(p.preventDefault(),gl(t,w).each(b)):$x(r,p.clientX,p.clientY).each(k=>{var A;p.preventDefault(),(A=c(1,k.node,k.position===si.Before,!1))&&e.setRng(A),vt(w)?w.focus():t.getBody().focus()})}),t.on("keypress",p=>{St.modifierPressed(p)||Al(e.getNode())&&p.preventDefault()}),t.on("GetSelectionRange",p=>{let C=p.range;if(i){if(!i.parentNode)return void(i=null);C=C.cloneRange(),C.selectNode(i),p.range=C}}),t.on("SetSelectionRange",p=>{p.range=(p=>{const C=t.schema.getVoidElements(),w=n.createRng(),k=p.startContainer,A=p.startOffset,O=p.endContainer,T=p.endOffset;return ee(C,k.nodeName.toLowerCase())?0===A?w.setStartBefore(k):w.setStartAfter(k):w.setStart(k,A),ee(C,O.nodeName.toLowerCase())?0===T?w.setEndBefore(O):w.setEndAfter(O):w.setEnd(O,T),w})(p.range);const C=b(p.range,p.forward);C&&(p.range=C)}),t.on("AfterSetSelectionRange",p=>{const C=p.range,w=C.startContainer.parentElement;var k,A;f(C)||vt(k=w)&&"mcepastebin"===k.id||v(),pt(A=w)&&n.hasClass(A,"mce-offscreen-selection")||g()}),(t=>{const e=hs(),n=xe.DOM,r=document,o=(l=e,c=t,u=>{if(0===u.button){const f=Ue(c.dom.getParents(u.target),JR).getOr(null);if(pt(f)&&(h=c.dom,b=c.getBody(),Xx(g=f)&&g!==b&&h.isEditable(g.parentElement))){const h=c.dom.getPos(f),b=c.getBody(),g=c.getDoc().documentElement;l.set({element:f,dragging:!1,screenX:u.screenX,screenY:u.screenY,maxX:(c.inline?b.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?b.scrollHeight:g.offsetHeight)-2,relX:u.pageX-h.x,relY:u.pageY-h.y,width:f.offsetWidth,height:f.offsetHeight,ghost:ZR(c,f,f.offsetWidth,f.offsetHeight),intervalId:US(100)})}}var h,b,g}),s=((t,e)=>{const n=hc((o,s)=>{return i=o,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void $x(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),c=>{const u=a._selectionOverrides.showCaret(1,c.node,c.position===si.Before,!1);u?a.selection.setRng(u):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const r=t;return o=>t.on(s=>{const a=Math.max(Math.abs(o.screenX-s.screenX),Math.abs(o.screenY-s.screenY));if(!s.dragging&&a>10){if(e.dispatch("dragstart",GR(o,s.element)).isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const c=o.currentTarget===e.getDoc().documentElement,u=((f,h)=>({pageX:h.pageX-f.relX,pageY:h.pageY+5}))(s,(h=o,b=(p=f=e).inline?Wx(p.getBody()):{left:0,top:0},g=(p=>{const C=p.getBody();return p.inline?{left:C.scrollLeft,top:C.scrollTop}:{left:0,top:0}})(f),v=((p,C)=>{if(C.target.ownerDocument!==p.getDoc()){const w=Wx(p.getContentAreaContainer()),k=(A=>{const O=A.getBody(),T=A.getDoc().documentElement;return A.inline?{left:O.scrollLeft,top:O.scrollTop}:{left:O.scrollLeft||T.scrollLeft,top:O.scrollTop||T.scrollTop}})(p);return{left:C.pageX-w.left+k.left,top:C.pageY-w.top+k.top}}return{left:C.pageX,top:C.pageY}})(f,h),{pageX:v.left-b.left+g.left,pageY:v.top-b.top+g.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((f,h,b,g,v,p,C,w,k,A,O,T)=>{let P=0,L=0;f.style.left=h.pageX+"px",f.style.top=h.pageY+"px",h.pageX+b>v&&(P=h.pageX+b-v),h.pageY+g>p&&(L=h.pageY+g-p),f.style.width=b-P+"px",f.style.height=g-L+"px";const M=k.clientHeight,$=k.clientWidth,U=C+k.getBoundingClientRect().top,W=w+k.getBoundingClientRect().left;O.on(H=>{H.intervalId.clear(),H.dragging&&T&&(C+8>=M?H.intervalId.set(Jx(A)):C-8<=0?H.intervalId.set(Qx(A)):w+8>=$?H.intervalId.set(Yx(A)):w-8<=0?H.intervalId.set(Gx(A)):U+16>=window.innerHeight?H.intervalId.set(Jx(window)):U-16<=0?H.intervalId.set(Qx(window)):W+16>=window.innerWidth?H.intervalId.set(Yx(window)):W-16<=0&&H.intervalId.set(Gx(window)))})})(s.ghost,u,s.width,s.height,s.maxX,s.maxY,o.clientY,o.clientX,e.getContentAreaContainer(),e.getWin(),r,c),n.throttle(o.clientX,o.clientY)}var f,h,p,b,g,v,i,l})})(e,t),a=((l,c)=>u=>{l.on(f=>{var h,b,g,v;if(f.intervalId.clear(),f.dragging){if(b=c,g=(b=>{const g=b.getSel();if(pt(g)){const v=g.getRangeAt(0).startContainer;return at(v)?v.parentNode:v}return null})(c.selection),v=f.element,!be(g)&&g!==v&&!b.dom.isChildOf(g,v)&&b.dom.isEditable(g)){const b=(v=>{const p=v.cloneNode(!0);return p.removeAttribute("data-mce-selected"),p})(f.element),g=null!==(h=c.getDoc().elementFromPoint(u.clientX,u.clientY))&&void 0!==h?h:c.getBody();c.dispatch("drop",YR(u,g)).isDefaultPrevented()||c.undoManager.transact(()=>{((v,p)=>{const C=v.getParent(p.parentNode,v.isBlock);Zx(p),C&&C!==v.getRoot()&&v.isEmpty(C)&&Ks(R(C))})(c.dom,f.element),c.insertContent(c.dom.getOuterHTML(b)),c._selectionOverrides.hideFakeCaret()})}c.dispatch("dragend",Kx(u,c.getBody()))}}),ew(l)})(e,t),i=((l,c)=>u=>tw(l,c,N.some(u)))(e,t);var l,c;t.on("mousedown",o),t.on("mousemove",s),t.on("mouseup",a),n.bind(r,"mousemove",s),n.bind(r,"mouseup",i),t.on("remove",()=>{n.unbind(r,"mousemove",s),n.unbind(r,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===St.ESC&&tw(e,t,N.none())})})(p=t),Fk(p)&&(C=>{const w=O=>{if(!O.isDefaultPrevented()){const T=O.dataTransfer;T&&(Tt(T.types,"Files")||T.files.length>0)&&(O.preventDefault(),"drop"===O.type&&cd(C,"Dropped file type is not supported"))}},k=O=>{Uc(C,O.target)&&w(O)},A=()=>{const O=xe.DOM,T=C.dom,P=document,L=C.inline?C.getBody():C.getDoc(),M=["drop","dragover"];st(M,$=>{O.bind(P,$,k),T.bind(L,$,w)}),C.on("remove",()=>{st(M,$=>{O.unbind(P,$,k),T.unbind(L,$,w)})})};C.on("init",()=>{Ar.setEditorTimeout(C,A,0)})})(p),(p=>{const C=hc(()=>{if(!p.removed&&p.getBody().contains(document.activeElement)){const w=p.selection.getRng();if(w.collapsed){const k=Im(p,w,!1);p.selection.setRng(k)}}},0);p.on("focus",()=>{C.throttle()}),p.on("blur",()=>{C.cancel()})})(t),(p=>{p.on("init",()=>{p.on("focusin",C=>{const w=C.target;if(vo(w)){const k=fa(p.getBody(),w),A=Ne(k)?k:w;p.selection.getNode()!==A&&gl(p,A).each(O=>p.selection.setRng(O))}})})})(t)),{showCaret:c,showBlockCaretContainer:p=>{p.hasAttribute("data-mce-caret")&&(lu(p),e.scrollIntoView(p))},hideFakeCaret:v,destroy:()=>{o.destroy(),i=null}};var p},rT=(t,e)=>{let n=e;for(let r=t.previousSibling;at(r);r=r.previousSibling)n+=r.data.length;return n},rw=(t,e,n,r,o)=>{if(at(n)&&(r<0||r>n.data.length))return[];const s=o&&at(n)?[rT(n,r)]:[r];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,o)),a=a.parentNode;return a===e?s.reverse():[]},Bp=(t,e,n,r,o,s,a=!1)=>({start:rw(t,e,n,r,a),end:rw(t,e,o,s,a)}),ow=(t,e)=>{const n=e.slice(),r=n.pop();return x(r)?gn(n,(o,s)=>o.bind(a=>N.from(a.childNodes[s])),N.some(t)).bind(o=>at(o)&&(r<0||r>o.data.length)?N.none():N.some({node:o,offset:r})):N.none()},sw=(t,e)=>ow(t,e.start).bind(({node:n,offset:r})=>ow(t,e.end).map(({node:o,offset:s})=>{const a=document.createRange();return a.setStart(n,r),a.setEnd(o,s),a})),ai=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const r=e.parentNode;t.remove(e),ai(t,r,n)}},Ld=(t,e,n,r=!0)=>{const o=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),r&&!n(e.startContainer)&&(at(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),at(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),ai(t,o,n),o!==s&&ai(t,s,n))},Lp=(t,e)=>N.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),aw=(t,e,n)=>{const r=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:fh(r).concat(t.blockPatterns),inlinePatterns:mh(r).concat(t.inlinePatterns)}},iw=(t,e,n,r)=>{const o=t.createRng();return o.setStart(e,0),o.setEnd(n,r),o.toString()},lw=(t,e,n)=>{((r,o,s)=>{if(at(r)&&0>=r.length)return N.some(lo(r,0));{const a=ta(yd);return N.from(a.forwards(r,0,Cd(r),s)).map(i=>lo(i.container,0))}})(e,0,e).each(r=>{const o=r.container;zC(o,n.start.length,e).each(i=>{const l=t.createRng();l.setStart(o,0),l.setEnd(i.container,i.offset),Ld(t,l,c=>c===e)});const s=R(o),a=nc(s);var i,l;/^\s[^\s]/.test(a)&&(i=s,l=a.slice(1),ou.set(i,l))})},cw=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),Pd=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},dw=(t,e,n)=>{const r=sw(t.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,s=r.endContainer,a=0===r.endOffset?s:s.splitText(r.endOffset),i=0===r.startOffset?o:o.splitText(r.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(cw(t,e+"-end"),a),start:l.insertBefore(cw(t,e+"-start"),i)}},uw=(t,e,n)=>{ai(t,t.get(e.prefix+"-end"),n),ai(t,t.get(e.prefix+"-start"),n)},Pp=t=>0===t.start.length,fw=(t,e,n,r)=>{const o=e.start;var s;return sp(t,r.container,r.offset,(s=o,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),u=l.lastIndexOf(s);return-1!==u?u+s.length:-1!==c?c+1:-1}),n).bind(a=>{var i,l;const c=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(o))&&void 0!==l?l:-1;if(-1!==c&&a.offset>=c+o.length){const u=t.createRng();return u.setStart(a.container,a.offset-o.length),u.setEnd(a.container,a.offset),N.some(u)}return op(a.container,a.offset-o.length,n).map(f=>{const h=t.createRng();return h.setStart(f.container,f.offset),h.setEnd(a.container,a.offset),h}).filter(f=>f.toString()===o).orThunk(()=>fw(t,e,n,lo(a.container,0)))})},oT=(t,e,n,r)=>{const o=t.dom,s=o.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return op(i,l-n.pattern.end.length,e).bind(c=>{const u=Bp(o,s,c.container,c.offset,i,l,r);if(Pp(a))return N.some({matches:[{pattern:a,startRng:u,endRng:u}],position:c});{const f=Md(t,n.remainingPatterns,c.container,c.offset,e,r),h=f.getOr({matches:[],position:c}),b=h.position;return((v,p,C,w,k,A=!1)=>{if(0===p.start.length&&!A){const O=v.createRng();return O.setStart(C,w),O.setEnd(C,w),N.some(O)}return rp(C,w,k).bind(O=>fw(v,p,k,O).bind(T=>{var P;return A&&(T.endContainer===O.container&&T.endOffset===O.offset||0===O.offset&&(null===(P=T.endContainer.textContent)||void 0===P?void 0:P.length)===T.endOffset)?N.none():N.some(T)}))})(o,a,b.container,b.offset,e,f.isNone()).map(v=>{const p=((C,w,k,A=!1)=>Bp(C,w,k.startContainer,k.startOffset,k.endContainer,k.endOffset,A))(o,s,v,r);return{matches:h.matches.concat([{pattern:a,startRng:p,endRng:u}]),position:lo(v.startContainer,v.startOffset)}})}})},Md=(t,e,n,r,o,s)=>{const a=t.dom;return rp(n,r,a.getRoot()).bind(i=>{const l=iw(a,o,n,r);for(let c=0;c<e.length;c++){const u=e[c];if(!_a(l,u.end))continue;const f=e.slice();f.splice(c,1);const h=oT(t,o,{pattern:u,remainingPatterns:f,position:i},s);if(h.isNone()&&r>0)return Md(t,e,n,r-1,o,s);if(h.isSome())return h}return N.none()})},mw=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?st(e.format,r=>{t.formatter.apply(r)}):t.execCommand(e.cmd,!1,e.value)},pw=(t,e,n,r,o,s)=>{var a;return((i,l)=>{const c=ar(i,u=>ke(l,f=>u.pattern.start===f.pattern.start&&u.pattern.end===f.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(Md(t,o.inlinePatterns,n,r,e,s).fold(()=>[],i=>i.matches),Md(t,(a=o.inlinePatterns,Mo(a,(i,l)=>l.end.length-i.end.length)),n,r,e,s).fold(()=>[],i=>i.matches))},gw=(t,e)=>{if(0===e.length)return;const n=t.dom,r=t.selection.getBookmark(),o=((s,a)=>{const i=Ig("mce_textpattern"),l=Po(a,(c,u)=>{const f=dw(s,i+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Po(l,(c,u)=>{const f=l.length-c.length-1,h=Pp(u.pattern)?u.endMarker:dw(s,i+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:h}])},[])})(n,e);st(o,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;Pp(s.pattern)?((l,c,u,f)=>{const h=Pd(l.dom,u);Ld(l.dom,h,f),mw(l,c,h)})(t,s.pattern,s.endMarker,i):((l,c,u,f,h)=>{const b=l.dom,g=Pd(b,f),v=Pd(b,u);Ld(b,v,h),Ld(b,g,h);const C=Pd(b,{prefix:u.prefix,start:u.end,end:f.start});mw(l,c,C)})(t,s.pattern,s.startMarker,s.endMarker,i),uw(n,s.endMarker,i),uw(n,s.startMarker,i)}),t.selection.moveToBookmark(r)},hw=(t,e,n)=>{for(let r=0;r<t.length;r++)if(n(t[r],e))return!0;return!1},Mp=xe.DOM,iT=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,Ip=t=>br(t,e=>!1===Be(e)),bw=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return Ip({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),remove_trailing_brs:e("remove_trailing_brs"),inline_styles:e("inline_styles"),root_name:iT(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},vw=t=>{const e=t.options.get;return Ip({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},yw=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,Cw=t=>{const e=yw(t),n=kh(t),r=t.contentCSS,o=()=>{e.unloadAll(r),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?o():t.on("remove",o)};if(t.contentStyles.length>0){let l="";ct.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,c,u)=>{const f=[yw(l).loadAll(c)];return l.inline?f:f.concat([l.ui.styleSheetLoader.loadAll(u)])})(t,r,n)).then(s).catch(s),i=vk(t);return i&&((l,c)=>{const u=R(l.getBody()),f=je(Vt(u)),h=ot("style");Le(h,"type","text/css"),Ct(h,Y(c)),Ct(f,h),l.on("remove",()=>{Bt(h)})})(t,i),a},Fp=t=>{var e;!0!==t.removed&&(_o(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||Oc(r)&&r.selection.getStart(!0)!==o||Xn(o).each(s=>{const a=s.getNode(),i=Wo(a)?Xn(a).getOr(s):s;r.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=qk(e);pe(n)&&n.call(e,e),(r=>{const o=Wk(r);o&&Ar.setEditorTimeout(r,()=>{let s;s=!0===o?r:r.editorManager.get(o),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},xw=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(Mp.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const r=t.getBody();var a,i;r.disabled=!0,t.readonly=_h(t),t.readonly||(t.inline&&"static"===Mp.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let v=[];const p=k=>{if(!k.blob||!k.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const A=k.id||"blobid"+H_+++(()=>{const L=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+L()+L()+L()})(),O=k.name||A,T=k.blob;var P;return{id:ft(A),name:ft(O),filename:ft(k.filename||O+"."+(P=T.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[P.toLowerCase()]||"dat")),blob:ft(T),base64:ft(k.base64),blobUri:ft(k.blobUri||URL.createObjectURL(T)),uri:ft(k.uri)}},C=k=>Ue(v,k).getOrUndefined(),w=k=>C(A=>A.id()===k);return{create:(k,A,O,T,P)=>{if(Rt(k))return p({id:k,name:T,filename:P,blob:A,base64:O});if(Ut(k))return p(k);throw new Error("Unknown input type")},add:k=>{w(k.id())||v.push(k)},get:w,getByUri:k=>C(A=>A.blobUri()===k),getByData:(k,A)=>C(O=>O.base64()===k&&O.blob().type===A),findFirst:C,removeByUri:k=>{v=qt(v,A=>A.blobUri()!==k||(URL.revokeObjectURL(A.blobUri()),!1))},destroy:()=>{st(v,k=>{URL.revokeObjectURL(k.blobUri())}),v=[]}}})();let n,r;const o=Jy(),s=[],a=v=>p=>t.selection?v(p):[],i=(v,p,C)=>{let w=0;do{w=v.indexOf(p,w),-1!==w&&(v=v.substring(0,w)+C+v.substr(w+p.length),w+=C.length-p.length+1)}while(-1!==w);return v},l=(v,p,C)=>(v=i(v,`src="${p}"`,`src="${C}"${C===me.transparentSrc?' data-mce-placeholder="1"':""}`),i(v,'data-mce-src="'+p+'"','data-mce-src="'+C+'"')),c=(v,p)=>{st(t.undoManager.data,C=>{"fragmented"===C.type?C.fragments=oe(C.fragments,w=>l(w,v,p)):C.content=l(C.content,v,p)})},u=()=>(n||(n=t1(t,o)),b().then(a(v=>{const p=oe(v,C=>C.blobInfo);return n.upload(p,Zy(t)).then(a(C=>{const w=[];let k=!1;const A=oe(C,(O,T)=>{const{blobInfo:P,image:L}=v[T];let M=!1;return O.status&&lk(t)?(O.url&&!Fe(L.src,O.url)&&(k=!0),e.removeByUri(L.src),_o(t)||(($,U)=>{const W=t.convertURL(U,"src");var H;c($.src,U),Gr(R($),{src:Ch(t)?(H=U,H+(-1===H.indexOf("?")?"?":"&")+(new Date).getTime()):U,"data-mce-src":W})})(L,O.url)):O.error&&(O.error.remove&&(c(L.src,me.transparentSrc),w.push(L),M=!0),cd(t,ro.translate(["Failed to upload image: {0}",O.error.message]))),{element:L,status:O.status,uploadUri:O.url,blobInfo:P,removed:M}});return w.length>0&&!_o(t)?t.undoManager.transact(()=>{st(w,O=>{t.dom.remove(O),e.removeByUri(O.src)})}):k&&t.undoManager.dispatchChange(),A}))}))),f=()=>yh(t)?u():Promise.resolve([]),h=v=>ar(s,p=>p(v)),b=()=>(r||(r=((t,e)=>{const n={};return{findAll:(r,o=Ae)=>{const s=qt((i=r)?an(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===me.transparentSrc)&&(Qe(l,"blob:")?!t.isUploaded(l)&&o(i):!!Qe(l,"data:")&&o(i))}),a=oe(s,i=>{const l=i.src;if(ee(n,l))return n[l].then(c=>Rt(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((u,f)=>{const h=()=>Promise.reject("Invalid data URI");if(Qe(f,"blob:")){const v=u.getByUri(f);return pt(v)?Promise.resolve(v):(b=f,Qe(b,"blob:")?(p=b,fetch(p).then(C=>C.ok?C.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${p} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Qe(b,"data:")?(g=b,new Promise((p,C)=>{mm(g).bind(({type:w,data:k,base64Encoded:A})=>ty(w,k,A)).fold(()=>C("Invalid data URI"),p)})):Promise.reject("Unknown URI format")).then(p=>ey(p).then(C=>ny(C,!1,w=>N.some(ry(u,p,w))).getOrThunk(h)))}var p,b,g;return Qe(f,"data:")?oy(u,f).fold(h,v=>Promise.resolve(v)):Promise.reject("Unknown image data format")})(e,l).then(u=>(delete n[l],{image:i,blobInfo:u})).catch(u=>(delete n[l],u));return n[l]=c,c}});var i;return Promise.all(a)}}})(o,e)),r.findAll(t.getBody(),h).then(a(v=>{const p=qt(v,C=>Rt(C)?(cd(t,C),!1):"blob"!==C.uriType);return _o(t)||st(p,C=>{c(C.image.src,C.blobInfo.blobUri()),C.image.src=C.blobInfo.blobUri(),C.image.removeAttribute("data-mce-src")}),p}))),g=v=>v.replace(/src="(blob:[^"]+)"/g,(p,C)=>{const w=o.getResultUri(C);if(w)return'src="'+w+'"';let k=e.getByUri(C);return k||(k=gn(t.editorManager.get(),(A,O)=>A||O.editorUpload&&O.editorUpload.blobCache.getByUri(C),void 0)),k?'src="data:'+k.blob().type+";base64,"+k.base64()+'"':p});return t.on("SetContent",()=>{yh(t)?f():b()}),t.on("RawSaveContent",v=>{v.content=g(v.content)}),t.on("GetContent",v=>{v.source_view||"raw"===v.format||"tree"===v.format||(v.content=g(v.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",v=>{st(v,p=>{const C=p.attr("src");if(!C||e.getByUri(C))return;const w=o.getResultUri(C);w&&p.attr("src",w)})})}),{blobCache:e,addFilter:v=>{s.push(v)},uploadImages:u,uploadImagesAuto:f,scanForImages:b,destroy:()=>{e.destroy(),o.destroy(),r=n=null}}})(t),t.schema=gs(vw(t)),t.dom=xe(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:pk(t),referrerPolicy:Mu(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=Ja(bw(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const u=a.dom,f="data-mce-"+c;let h=l.length;for(;h--;){const b=l[h];let g=b.attr(c);if(g&&!b.attr(f)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===c?(g=u.serializeStyle(u.parseStyle(g),b.name),g.length||(g=null),b.attr(f,g),b.attr(c,g)):"tabindex"===c?(b.attr(f,g),b.attr(c,null)):b.attr(f,a.convertURL(g,c,b.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const u=l[c],f=u.attr("type")||"no/type";0!==f.indexOf("mce-")&&u.attr("type","mce-"+f)}}),lE(a)&&i.addNodeFilter("#cdata",l=>{var c;let u=l.length;for(;u--;){const f=l[u];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode(null!==(c=f.value)&&void 0!==c?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const u=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(u)&&0===f.getAll("br").length&&f.append(new Gn("br",1))}}),i})(t),t.serializer=Uy((a=>{const i=a.options.get;return{...bw(a),...vw(a),...Ip({url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=Hy(t.dom,t.getWin(),t.serializer,t),t.annotator=Eb(t),t.formatter=r1(t),t.undoManager=s1(t),t._nodeChangeDispatcher=new DR(t),t._selectionOverrides=nT(t),(a=>{const i=hs(),l=rn(!1),c=Eu(u=>{a.dispatch("longpress",{...u,type:"longpress"}),l.set(!0)},400);a.on("touchstart",u=>{dC(u).each(f=>{c.cancel();const h={x:f.clientX,y:f.clientY,target:u.target};c.throttle(u),l.set(!1),i.set(h)})},!0),a.on("touchmove",u=>{c.cancel(),dC(u).each(f=>{i.on(h=>{((b,g)=>{const v=Math.abs(b.clientX-g.x),p=Math.abs(b.clientY-g.y);return v>5||p>5})(f,h)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",u=>{c.cancel(),"touchcancel"!==u.type&&i.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{l.get()?u.preventDefault():a.dispatch("tap",{...u,type:"tap"})})},!0)})(t),(i=a=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{st(l,c=>{c.attr("data-mce-open",c.attr("open")),c.attr("open","open")})}),i.serializer.addNodeFilter("details",l=>{st(l,c=>{const u=c.attr("data-mce-open");c.attr("open",Rt(u)?u:null),c.attr("data-mce-open",null)})})})(a),(a=>{const i="contenteditable",l=" "+ct.trim(aE(a))+" ",c=" "+ct.trim(Th(a))+" ",u=mC(l),f=mC(c),h=iE(a);h.length>0&&a.on("BeforeSetContent",b=>{((g,v,p)=>{let C=v.length,w=p.content;if("raw"!==p.format){for(;C--;)w=w.replace(v[C],OA(g,w,Th(g)));p.content=w}})(a,h,b)}),a.parser.addAttributeFilter("class",b=>{let g=b.length;for(;g--;){const v=b[g];u(v)?v.attr(i,"true"):f(v)&&v.attr(i,"false")}}),a.serializer.addAttributeFilter(i,b=>{let g=b.length;for(;g--;){const v=b[g];(u(v)||f(v))&&(h.length>0&&v.attr("data-mce-content")?(v.name="#text",v.type=3,v.raw=!0,v.value=v.attr("data-mce-content")):v.attr(i,null))}})})(t),_o(t)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,r)=>{const o=X.fromRangeStart(n).getNode(),s=(u=r,Zr(R(o),f=>no(f.dom)||wr(f),Hx(u)).getOr(R(u)).dom),a=qx(o,s,!1),i=qx(o,s,!0),l=document.createRange();var u;return Ux(a,s).fold(()=>{zx(a)?l.setStart(a,0):l.setStartBefore(a)},c=>l.setStartBefore(c.dom)),Ux(i,s).fold(()=>{zx(i)?l.setEnd(i,i.data.length):l.setEndAfter(i)},c=>l.setEndAfter(c.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(Qf(e))})(a))})})(t),(a=>{(i=>{const l=[",",".",";",":","!","?"],c=[32],u=()=>{return b=oE(i),g=sE(i),{inlinePatterns:mh(b),blockPatterns:fh(b),dynamicPatternsLookup:g};var b,g},f=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",b=>{if(13===b.keyCode&&!St.modifierPressed(b)&&i.selection.isCollapsed()){const g=u();(g.inlinePatterns.length>0||g.blockPatterns.length>0||f())&&((t,e)=>{const n=t.selection.getRng();return Lp(t,n).map(r=>{var o;const s=Math.max(0,n.startOffset),a=aw(e,r,null!==(o=r.textContent)&&void 0!==o?o:""),i=pw(t,r,n.startContainer,s,a,!0),l=((c,u,f,h)=>{var b;const g=c.dom,v=fr(c);if(!g.is(u,v))return[];const p=null!==(b=u.textContent)&&void 0!==b?b:"";return((C,w)=>{const k=Mo(C,(T,P)=>P.start.length-T.start.length),A=w.replace(mn," ");return Ue(k,O=>0===w.indexOf(O.start)||0===A.indexOf(O.start))})(f.blockPatterns,p).map(C=>ct.trim(p).length===C.start.length?[]:[{pattern:C,range:Bp(g,g.getRoot(),u,0,u,0,!0)}]).getOr([])})(t,r,a);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),gw(t,i),((f,h)=>{if(0===h.length)return;const b=f.selection.getBookmark();st(h,g=>((v,p)=>{const w=p.pattern,k=sw(v.dom.getRoot(),p.range).getOrDie("Unable to resolve path range");return Lp(v,k).each(A=>{"block-format"===w.type?((O,T)=>{const P=T.get(O);return it(P)&&wn(P).exists(L=>ee(L,"block"))})(w.format,v.formatter)&&v.undoManager.transact(()=>{lw(v.dom,A,w),v.formatter.apply(w.format)}):"block-command"===w.type&&v.undoManager.transact(()=>{lw(v.dom,A,w),v.execCommand(w.cmd,!1,w.value)})}),!0})(f,g)),f.selection.moveToBookmark(b)})(t,l);const c=t.selection.getRng(),u=rp(c.startContainer,c.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),u.each(f=>{const h=f.container;"\ufeff"===h.data.charAt(f.offset-1)&&(h.deleteData(f.offset-1,1),ai(t.dom,h.parentNode,b=>b===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,g)&&b.preventDefault()}},!0);const h=()=>{if(i.selection.isCollapsed()){const b=u();(b.inlinePatterns.length>0||f())&&((g,v)=>{const p=g.selection.getRng();Lp(g,p).map(C=>{const w=Math.max(0,p.startOffset-1),k=iw(g.dom,C,p.startContainer,w),A=aw(v,C,k),O=pw(g,C,p.startContainer,w,A,!1);O.length>0&&g.undoManager.transact(()=>{gw(g,O)})})})(i,b)}};i.on("keyup",b=>{hw(c,b,(g,v)=>g===v.keyCode&&!St.modifierPressed(v))&&h()}),i.on("keypress",b=>{hw(l,b,(g,v)=>g.charCodeAt(0)===v.charCode)&&Ar.setEditorTimeout(i,h)})})(a)})(t));const o=OR(t);((t,e)=>{t.addCommand("delete",()=>{var n;cC(n=t,e,!1).fold(()=>{If(n),Ff(n)},Fn)}),t.addCommand("forwardDelete",()=>{var n;cC(n=t,e,!0).fold(()=>V0(n,"ForwardDelete"),Fn)})})(t,o),(a=>{a.on("NodeChange",yt(TA,a))})(t),(a=>{var i;const l=a.dom,c=fr(a),u=null!==(i=wk(a))&&void 0!==i?i:"",f=(h,b)=>{if((p=>{if(i1(p)){const C=p.keyCode;return!l1(p)&&(St.metaKeyPressed(p)||p.altKey||C>=112&&C<=123||Tt(X_,C))}return!1})(h))return;const g=a.getBody(),v=!(i1(p=h)&&!(l1(p)||"keyup"===p.type&&229===p.keyCode))&&((p,C,w)=>{if(We(R(C),!1)){const k=C.firstElementChild;return!k||!p.getStyle(C.firstElementChild,"padding-left")&&!p.getStyle(C.firstElementChild,"padding-right")&&w===k.nodeName.toLowerCase()}return!1})(l,g,c);var p;(""!==l.getAttrib(g,a1)!==v||b)&&(l.setAttrib(g,a1,v?u:null),l.setAttrib(g,"aria-placeholder",v?u:null),((p,C)=>{p.dispatch("PlaceholderToggle",{state:C})})(a,v),a.on(v?"keydown":"keyup",f),a.off(v?"keyup":"keydown",f))};zn(u)&&a.on("init",h=>{f(h,!0),a.on("change SetContent ExecCommand",f),a.on("paste",b=>Ar.setEditorTimeout(a,()=>f(b)))})})(t),(t=>{const e=rn(!1),n=rn(eE(t)?"text":"html"),r=(o=>{const s=rn(null);return{create:()=>((a,i)=>{const{dom:l,selection:c}=a,u=a.getBody();i.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},kx);me.browser.isFirefox()&&l.setStyle(f,"left","rtl"===l.getStyle(u,"direction",!0)?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",h=>{h.stopPropagation()}),f.focus(),c.select(f,!0)})(o,s),remove:()=>((a,i)=>{const l=a.dom;if(Np(a)){let c;const u=i.get();for(;c=Np(a);)l.remove(c),l.unbind(c);u&&a.selection.setRng(u)}i.set(null)})(o,s),getEl:()=>Np(o),getHtml:()=>(a=>{const i=a.dom,l=(h,b)=>{h.appendChild(b),i.remove(b,!0)},[c,...u]=qt(a.getBody().childNodes,LR);st(u,h=>{l(c,h)});const f=i.select("div[id=mcepastebin]",c);for(let h=f.length-1;h>=0;h--){const b=i.create("div");c.insertBefore(b,f[h]),l(b,f[h])}return c?c.innerHTML:""})(o),getLastRng:s.get}})(t);var o,s,a;o=t,(me.browser.isChromium()||me.browser.isSafari())&&(a=zR,(s=o).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((o,s)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),Db(a,!1)):(i.set("text"),Db(a,!0)),a.focus()})(o,s)}),o.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Dd(o,i.html,i.internal),i.text&&Rp(o,i.text)})})(t,n),(o=>{const s=l=>c=>{l(o,c)},a=Gk(o);pe(a)&&o.on("PastePreProcess",s(a));const i=Yk(o);pe(i)&&o.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(o=>{o.on("cut",(s=>a=>{!a.isDefaultPrevented()&&Mx(s)&&Bx(a,Px(s),Lx(s),()=>{if(me.browser.isChromium()||me.browser.isFirefox()){const i=s.selection.getRng();Ar.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(o)),o.on("copy",(s=>a=>{!a.isDefaultPrevented()&&Mx(s)&&Bx(a,Px(s),Lx(s),Et)})(o))})(t),((o,s)=>{Xk(o)&&o.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),wc(o)||o.on("drop",a=>{const i=a.dataTransfer;i&&ke(i.files,c=>/^image\//.test(c.type))&&a.preventDefault()}),o.on("drop",a=>{if(a.isDefaultPrevented())return;const i=Ix(o,a);if(be(i))return;const l=Tx(a.dataTransfer),c=_s(l,Od());if((!Ox(l)||(b=>{const g=b["text/plain"];return!!g&&0===g.indexOf("file://")})(l))&&Dx(o,a,i))return;const u=l[Od()],f=u||l["text/html"]||l["text/plain"],h=((b,g,v,p)=>{const C=b.getParent(v,w=>Gs(g,w));if(C&&ee(p,"text/html")){const w=(new DOMParser).parseFromString(p["text/html"],"text/html").body;return!Zt(w.querySelector(C.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,i.startContainer,l);s.get()&&!h||f&&(a.preventDefault(),Ar.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{u&&o.execCommand("Delete"),Fx(o,i);const b=_x(f);l["text/html"]?Dd(o,b,c):Rp(o,b)})}))}),o.on("dragstart",a=>{s.set(!0)}),o.on("dragover dragend",a=>{wc(o)&&!s.get()&&(a.preventDefault(),Fx(o,Ix(o,a))),"dragend"===a.type&&s.set(!1)})})(t,e),((t,e,n)=>{((r,o,s)=>{let a;r.on("keydown",i=>{var l;(St.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),r.on("paste",i=>{if(i.isDefaultPrevented()||(u=i,me.os.isAndroid()&&0===(null===(h=null===(f=u.clipboardData)||void 0===f?void 0:f.items)||void 0===h?void 0:h.length)))return;var u,f,h;const l="text"===s.get()||a;a=!1;const c=Tx(i.clipboardData);!Ox(c)&&Dx(r,i,o.getLastRng()||r.selection.getRng())||(_s(c,"text/html")?(i.preventDefault(),Tp(r,c,c["text/html"],l)):_s(c,"text/plain")&&_s(c,"text/uri-list")?(i.preventDefault(),Tp(r,c,c["text/plain"],l)):(o.create(),Ar.setEditorTimeout(r,()=>{const u=o.getHtml();o.remove(),Tp(r,c,u,l)},0)))})})(t,e,n),(r=>{const o=a=>Qe(a,"webkit-fake-url"),s=a=>Qe(a,"data:");r.parser.addNodeFilter("img",(a,i,l)=>{if(!wc(r)&&!0===(null===(u=l.data)||void 0===u?void 0:u.paste))for(const c of a){const u=c.attr("src");Rt(u)&&!c.attr("data-mce-object")&&u!==me.transparentSrc&&(o(u)||!rE(r)&&s(u))&&c.remove()}var u})})(t)})(t,r,n)})})(t);const s=(a=>{const i=a;return(l=a,Se(l.plugins,"rtc").bind(c=>N.from(c.setup))).fold(()=>(i.rtcInstance=Py(a),N.none()),l=>(i.rtcInstance=(()=>{const c=ft(null),u=ft("");return{init:{bindEvents:Et},undoManager:{beforeChange:Et,add:c,undo:c,redo:c,clear:Et,reset:Et,hasUndo:Ce,hasRedo:Ce,transact:c,ignore:Et,extra:Et},formatter:{match:Ce,matchAll:ft([]),matchNode:ft(void 0),canApply:Ce,closest:u,apply:Et,remove:Et,toggle:Et,formatChanged:ft({unbind:Et})},editor:{getContent:u,setContent:ft({content:"",html:""}),insertContent:ft(""),addVisual:Et},selection:{getContent:u},autocompleter:{addDecoration:Et,removeDecoration:Et},raw:{getModel:ft(N.none())}}})(),N.some(()=>l().then(c=>(i.rtcInstance=(u=>{const f=k=>Ut(k)?k:{},{init:h,undoManager:b,formatter:g,editor:v,selection:p,autocompleter:C,raw:w}=u;return{init:{bindEvents:h.bindEvents},undoManager:{beforeChange:b.beforeChange,add:b.add,undo:b.undo,redo:b.redo,clear:b.clear,reset:b.reset,hasUndo:b.hasUndo,hasRedo:b.hasRedo,transact:(k,A,O)=>b.transact(O),ignore:(k,A)=>b.ignore(A),extra:(k,A,O,T)=>b.extra(O,T)},formatter:{match:(k,A,O,T)=>g.match(k,f(A),T),matchAll:g.matchAll,matchNode:g.matchNode,canApply:k=>g.canApply(k),closest:k=>g.closest(k),apply:(k,A,O)=>g.apply(k,f(A)),remove:(k,A,O,T)=>g.remove(k,f(A)),toggle:(k,A,O)=>g.toggle(k,f(A)),formatChanged:(k,A,O,T,P)=>g.formatChanged(A,O,T,P)},editor:{getContent:k=>v.getContent(k),setContent:(k,A)=>({content:v.setContent(k,A),html:""}),insertContent:(k,A)=>(v.insertContent(k),""),addVisual:v.addVisual},selection:{getContent:(k,A)=>p.getContent(A)},autocompleter:{addDecoration:C.addDecoration,removeDecoration:C.removeDecoration},raw:{getModel:()=>N.some(w.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),Vk(a)||(i.body.spellcheck=!1,Mp.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=ct.each,n=St.BACKSPACE,r=St.DELETE,o=t.dom,s=t.selection,a=t.parser,i=me.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),u=me.deviceType.isiPhone()||me.deviceType.isiPad(),f=me.os.isMacOS()||me.os.isiOS(),h=(U,W)=>{try{t.getDoc().execCommand(U,!1,String(W))}catch{}},b=U=>U.isDefaultPrevented(),g=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},v=()=>{t.inline||o.bind(t.getDoc(),"mousedown mouseup",U=>{let W;if(U.target===t.getDoc().documentElement)if(W=s.getRng(),t.getBody().focus(),"mousedown"===U.type){if(Sr(W.startContainer))return;s.placeCaretAt(U.clientX,U.clientY)}else s.setRng(W)})},p=()=>{Range.prototype.getClientRects||t.on("mousedown",U=>{if(!b(U)&&"HTML"===U.target.nodeName){const W=t.getBody();W.blur(),Ar.setEditorTimeout(t,()=>{W.focus()})}})},C=()=>{const U=Rh(t);t.on("click",W=>{const H=W.target;/^(IMG|HR)$/.test(H.nodeName)&&o.isEditable(H.parentNode)&&(W.preventDefault(),t.selection.select(H),t.nodeChanged()),"A"===H.nodeName&&o.hasClass(H,U)&&0===H.childNodes.length&&o.isEditable(H.parentNode)&&(W.preventDefault(),s.select(H))})},w=()=>{t.on("keydown",U=>{if(!b(U)&&U.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const W=s.getNode().previousSibling;if(W&&W.nodeName&&"table"===W.nodeName.toLowerCase())return U.preventDefault(),!1}return!0})},k=()=>{_h(t)||t.on("BeforeExecCommand mousedown",()=>{h("StyleWithCSS",!1),h("enableInlineTableEditing",!1),Eh(t)||h("enableObjectResizing",!1)})},A=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},O=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},T=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",U=>{let W;"HTML"===U.target.nodeName&&(W=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(W),t.selection.normalize(),t.nodeChanged())}))},P=()=>{f&&t.on("keydown",U=>{!St.metaKeyPressed(U)||U.shiftKey||37!==U.keyCode&&39!==U.keyCode||(U.preventDefault(),t.selection.getSel().modify("move",37===U.keyCode?"backward":"forward","lineboundary"))})},L=()=>{t.on("click",U=>{let W=U.target;do{if("A"===W.tagName)return void U.preventDefault()}while(W=W.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},M=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",U=>{U.preventDefault()})})},$=Et;return _o(t)?(c&&(v(),C(),M(),g(),u&&(O(),T(),L())),l&&(p(),k(),A(),P())):(t.on("keydown",U=>{if(b(U)||U.keyCode!==St.BACKSPACE)return;let W=s.getRng();const H=W.startContainer,J=W.startOffset,ut=o.getRoot();let mt=H;if(W.collapsed&&0===J){for(;mt.parentNode&&mt.parentNode.firstChild===mt&&mt.parentNode!==ut;)mt=mt.parentNode;"BLOCKQUOTE"===mt.nodeName&&(t.formatter.toggle("blockquote",void 0,mt),W=o.createRng(),W.setStart(H,0),W.setEnd(H,0),s.setRng(W))}}),(()=>{const U=W=>{const H=o.create("body"),J=W.cloneContents();return H.appendChild(J),s.serializer.serialize(H,{format:"html"})};t.on("keydown",W=>{const H=W.keyCode;if(!b(W)&&(H===r||H===n)&&t.selection.isEditable()){const J=t.selection.isCollapsed(),ut=t.getBody();if(J&&!o.isEmpty(ut)||!J&&!(mt=>{const _t=U(mt),Lt=o.createRng();return Lt.selectNode(t.getBody()),_t===U(Lt)})(t.selection.getRng()))return;W.preventDefault(),t.setContent(""),ut.firstChild&&o.isBlock(ut.firstChild)?t.selection.setCursorLocation(ut.firstChild,0):t.selection.setCursorLocation(ut,0),t.nodeChanged()}})})(),me.windowsPhone||t.on("keyup focusin mouseup",U=>{St.modifierPressed(U)||(W=>{const H=W.getBody(),J=W.selection.getRng();return J.startContainer===J.endContainer&&J.startContainer===H&&0===J.startOffset&&J.endOffset===H.childNodes.length})(t)||s.normalize()},!0),c&&(v(),C(),t.on("init",()=>{h("DefaultParagraphSeparator",fr(t))}),M(),w(),a.addNodeFilter("br",U=>{let W=U.length;for(;W--;)"Apple-interchange-newline"===U[W].attr("class")&&U[W].remove()}),u?(O(),T(),L()):g()),l&&(t.on("keydown",U=>{if(!b(U)&&U.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const W=s.getNode(),H=W.previousSibling;if("HR"===W.nodeName)return o.remove(W),void U.preventDefault();H&&H.nodeName&&"hr"===H.nodeName.toLowerCase()&&(o.remove(H),U.preventDefault())}}}),p(),(()=>{const U=()=>{const H=o.getAttribs(s.getStart().cloneNode(!1));return()=>{const J=s.getStart();J!==t.getBody()&&(o.setAttrib(J,"style",null),e(H,ut=>{J.setAttributeNode(ut.cloneNode(!0))}))}},W=()=>!s.isCollapsed()&&o.getParent(s.getStart(),o.isBlock)!==o.getParent(s.getEnd(),o.isBlock);t.on("keypress",H=>{let J;return!(!(b(H)||8!==H.keyCode&&46!==H.keyCode)&&W()&&(J=U(),t.getDoc().execCommand("delete",!1),J(),H.preventDefault(),1))}),o.bind(t.getDoc(),"cut",H=>{if(!b(H)&&W()){const J=U();Ar.setEditorTimeout(t,()=>{J()})}})})(),k(),t.on("SetContent ExecCommand",U=>{"setcontent"!==U.type&&"mceInsertLink"!==U.command||e(o.select("a:not([data-mce-block])"),W=>{var H;let J=W.parentNode;const ut=o.getRoot();if(J?.lastChild===W){for(;J&&!o.isBlock(J);){if((null===(H=J.parentNode)||void 0===H?void 0:H.lastChild)!==J||J===ut)return;J=J.parentNode}o.add(J,"br",{"data-mce-bogus":1})}})}),A(),P(),w())),{refreshContentEditable:$,isHidden:()=>{if(!l||t.removed)return!1;const U=t.selection.getSel();return!U||!U.rangeCount||0===U.rangeCount}}})(a),a.dispatch("PostRender");const c=yk(a);void 0!==c&&(l.dir=c);const u=Kk(a);u&&a.on("BeforeSetContent",f=>{ct.each(u,h=>{f.content=f.content.replace(h,b=>"\x3c!--mce:protected "+escape(b)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing="compositionstart"===f.type})})(t),s.fold(()=>{Cw(t).then(()=>Fp(t))},a=>{t.setProgressState(!0),Cw(t).then(()=>{a().then(i=>{t.setProgressState(!1),Fp(t),My(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),Fp(t),My(t)})})})},lT=Ae,jp=xe.DOM,ww=xe.DOM,Sw=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),kw=t=>{const e=t.getElement();return t.inline?Sw(null):(n=>{const r=ww.create("div");return ww.insertAfter(r,n),Sw(r,r)})(e)},cT=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const r=ct.trim(xh(n)),o=n.ui.registry.getAll().icons,s={...ld.get("default").icons,...ld.get(r).icons};we(s,(a,i)=>{ee(o,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const r=Ha(n);if(Rt(r)){const o=ha.get(r);n.theme=o(n,ha.urls[r])||{},pe(n.theme.init)&&n.theme.init(n,ha.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const r=Iu(n),o=Za.get(r);n.model=o(n,Za.urls[r])})(t),(n=>{const r=[];st(xc(n),o=>{((s,a,i)=>{const l=ti.get(i),c=ti.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=ct.trim(i),l&&-1===ct.inArray(a,i)){if(s.plugins[i])return;try{const u=l(s,c)||{};s.plugins[i]=u,pe(u.init)&&(u.init(s,c),a.push(i))}catch(u){((f,h,b)=>{const g=ro.translate(["Failed to initialize plugin: {0}",h]);_b(f,"PluginLoadError",{message:g}),dd(g,b),cd(f,g)})(s,i,u)}}})(n,r,o.replace(/^\-/,""))})})(t);const e=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,Rt(Ha(n))?(o=>{const s=o.theme.renderUI;return s?s():kw(o)})(n):pe(Ha(n))?(o=>{const s=o.getElement(),a=Ha(o)(o,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||o.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||o.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):kw(n)})(t);var n,r;((n,r)=>{const o={show:N.from(r.show).getOr(Et),hide:N.from(r.hide).getOr(Et),isEnabled:N.from(r.isEnabled).getOr(Ae),setEnabled:s=>{n.mode.isReadOnly()||N.from(r.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...o}})(t,N.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(Qy(r=n,bk(r)),(r=>Qy(r,kh(r)))(n)),t.inline?xw(t):((n,r)=>{((o,s)=>{const a=o.translate("Rich Text Area"),i=vr(R(o.getElement()),"tabindex").bind(Ps),l=((c,u,f,h)=>{const b=ot("iframe");return h.each(g=>Le(b,"tabindex",g)),Gr(b,f),Gr(b,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:u}),_(b,"tox-edit-area__iframe"),b})(o.id,a,JS(o),i).dom;l.onload=()=>{l.onload=null,o.dispatch("load")},o.contentAreaContainer=s.iframeContainer,o.iframeElement=l,o.iframeHTML=(c=>{let u=ZS(c)+"<html><head>";bh(c)!==c.documentBaseUrl&&(u+='<base href="'+c.documentBaseURI.getURI()+'" />'),u+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const f=tk(c),h=ek(c),b=c.translate(Hk(c));return vh(c)&&(u+='<meta http-equiv="Content-Security-Policy" content="'+vh(c)+'" />'),u+=`</head><body id="${f}" class="mce-content-body ${h}" data-id="${c.id}" aria-label="${b}"><br></body></html>`,u})(o),jp.add(s.iframeContainer,l)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=jp.isHidden(r.editorContainer)),n.getElement().style.display="none",jp.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const s=o.iframeElement,a=((t,e,n,r)=>((o,s,a,i,l)=>{const c=(u=a,f=i,h=>{u(h)&&f((b=>{const g=R(Te(b).getOr(b.target)),v=()=>b.stopPropagation(),p=()=>b.preventDefault(),C=Zn(p,v);return{target:g,x:b.clientX,y:b.clientY,stop:v,prevent:p,kill:C,raw:b}})(h))});var u,f;return o.dom.addEventListener(s,c,!1),{unbind:yt(dn,o,s,c,!1)}})(t,"load",n,()=>{a.unbind(),o.contentDocument=s.contentDocument,xw(o)}))(R(s),0,lT);if(me.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close()}else s.srcdoc=o.iframeHTML})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},ba=xe.DOM,Ew=t=>"-"===t.charAt(0),Nw=(t,e,n)=>N.from(e).filter(r=>zn(r)&&!ld.has(r)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:N.some(r)})),_w=Hn().deviceType,Aw=_w.isPhone(),uT=_w.isTablet(),Rl=t=>{if(be(t))return[];{const e=it(t)?t:t.split(/[ ,]/),n=oe(e,Xr);return qt(n,zn)}},zp=(t,e)=>ee(t.sections(),e),mT=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Se(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),pT=(t,e)=>{var n;const r=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?ct.extend({},t.external_plugins,r):r},bT=(t,e)=>{const n=t.selection,r=t.dom;return/^ | $/.test(e)?((o,s,a)=>{const i=R(o.getRoot());return a=al(i,X.fromRangeStart(s))?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),il(i,X.fromRangeEnd(s))?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),e):e},Id=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const s=ct.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:s}}return{content:o,details:{}}})(e);km(t,{...r,content:bT(t,n),format:"html",set:!1,selection:!0}).each(o=>{const s=(i=o.content,l=r,Om(t).editor.insertContent(i,l));var i,l;Em(t,s,o),t.addVisual()})}},vT={"font-size":"size","font-family":"face"},yT=zs("font"),Rw=t=>(e,n)=>N.from(n).map(R).filter(Sn).bind(r=>{return(o=t,s=e,a=r.dom,em(R(a),i=>{return B(l=i,o).orThunk(()=>yT(l)?Se(vT,o).bind(c=>vr(l,c)):N.none());var l},i=>ne(R(s),i))).or(((o,s)=>N.from(xe.DOM.getStyle(s,o,!0)))(t,r.dom));var o,s,a}).getOr(""),CT=Rw("font-size"),xT=Zn(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Rw("font-family")),wT=t=>Xn(t.getBody()).bind(e=>{const n=e.container();return N.from(at(n)?n.parentNode:n)}),Hp=(t,e)=>{return n=t,r=Os(N.some,e),(o=n,N.from(o.selection.getRng()).bind(s=>{const a=o.getBody();return s.startContainer===a&&0===s.startOffset?N.none():N.from(o.selection.getStart(!0))})).orThunk(yt(wT,n)).map(R).filter(Sn).bind(r);var n,r,o},Tw=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const r=ct.explode(t.options.get("font_size_style_values")),o=ct.explode(t.options.get("font_size_classes"));return o.length>0?o[n-1]||e:r[n-1]||e}return e}return e},ST=t=>{const e=t.split(/\s*,\s*/);return oe(e,n=>-1===n.indexOf(" ")||Qe(n,'"')||Qe(n,"'")?n:`'${n}'`).join(",")},ET=["toggleview"],Ow=t=>Tt(ET,t.toLowerCase());class Dw{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,r,o){const s=this.editor,a=e.toLowerCase(),i=o?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?yf(c=s).each(u=>c.selection.setRng(u)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:r}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[a];return!!pe(l)&&(l(a,n,r),s.dispatch("ExecCommand",{command:e,ui:n,value:r}),!0)}queryCommandState(e){if(!Ow(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),r=this.commands.state[n];return!!pe(r)&&r(n)}queryCommandValue(e){if(!Ow(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),r=this.commands.value[n];return pe(r)?r(n):""}addCommands(e,n="exec"){const r=this.commands;we(e,(o,s)=>{st(s.toLowerCase().split(","),a=>{r[n][a]=o})})}addCommand(e,n,r){const o=e.toLowerCase();this.commands.exec[o]=(s,a,i)=>n.call(r??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,r){this.commands.state[e.toLowerCase()]=()=>n.call(r??this.editor)}addQueryValueHandler(e,n,r){this.commands.value[e.toLowerCase()]=()=>n.call(r??this.editor)}}const ii="data-mce-contenteditable",Up=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Fd=(t,e)=>{t.dom.contentEditable=e?"true":"false"},va=t=>t.readonly,Bw=t=>{t.parser.addAttributeFilter("contenteditable",e=>{va(t)&&st(e,n=>{n.attr(ii,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(ii,e=>{va(t)&&st(e,n=>{n.attr("contenteditable",n.attr(ii))})}),t.serializer.addTempAttr(ii)},_T=["copy"],AT=ct.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class qp{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ce}static isNative(e){return!!AT[e.toLowerCase()]}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const r=e.toLowerCase(),o=Cu(r,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const s=this.bindings[r];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(!1===l.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(e,n,r,o){if(!1===n&&(n=Ce),n){const s={func:n,removed:!1};o&&ct.extend(s,o);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=r?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(e,n){if(e){const r=e.toLowerCase().split(" ");let o=r.length;for(;o--;){const s=r[o];let a=this.bindings[s];if(!s)return we(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=Wr(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,st(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else we(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(e,n,r){return this.on(e,n,r,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const Tl=t=>(t._eventDispatcher||(t._eventDispatcher=new qp({scope:t,toggleEvent:(e,n)=>{qp.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),$p={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const r=this;if(r.removed&&"remove"!==t&&"detach"!==t)return Cu(t.toLowerCase(),e??{},r);const o=Tl(r).dispatch(t,e);if(!1!==n&&r.parent){let s=r.parent();for(;s&&!o.isPropagationStopped();)s.dispatch(t,o,!1),s=s.parent?s.parent():void 0}return o},on(t,e,n){return Tl(this).on(t,e,n)},off(t,e){return Tl(this).off(t,e)},once(t,e){return Tl(this).once(t,e)},hasEventListeners(t){return Tl(this).has(t)}},jd=xe.DOM;let ya;const zd=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=Nh(t);return n?(t.eventRoot||(t.eventRoot=jd.select(n)[0]),t.eventRoot):t.getBody()},Lw=(t,e,n)=>{var r;(r=t).hidden||va(r)?va(t)&&((r,o)=>{if("click"!==o.type||St.metaKeyPressed(o))Tt(_T,o.type)&&r.dispatch(o.type,o);else{const s=R(o.target);(a=r,i=s,zr(i,"a",l=>ne(l,R(a.getBody()))).bind(l=>vr(l,"href"))).each(a=>{if(o.preventDefault(),/^#/.test(a)){const i=r.dom.select(`${a},[name="${pi(a,"#")}"]`);i.length&&r.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},Pw=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=zd(t,e);if(Nh(t)){if(ya||(ya={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||ya&&(we(ya,(o,s)=>{t.dom.unbind(zd(t,s))}),ya=null)})),ya[e])return;const r=o=>{const s=o.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||jd.isChildOf(s,l))&&Lw(a[i],e,o)}};ya[e]=r,jd.bind(n,e,r)}else{const r=o=>{Lw(t,e,o)};jd.bind(n,e,r),t.delegates[e]=r}},Mw={...$p,bindPendingEventDelegates(){const t=this;ct.each(t._pendingNativeEvents,e=>{Pw(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?Pw(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(zd(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(we(t.delegates,(r,o)=>{t.dom.unbind(zd(t,o),o,r)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},RT=t=>Rt(t)?{value:t.split(/[ ,]/),valid:!0}:An(t,Rt)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Iw=(t,e)=>t+(rs(e.message)?"":`. ${e.message}`),Fw=t=>t.valid,Wp=(t,e,n="")=>{const r=e(t);return _n(r)?r?{value:t,valid:!0}:{valid:!1,message:n}:r},TT=["design","readonly"],jw=(t,e,n,r)=>{const o=n[e.get()],s=n[r];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${r}:`,a)}var a;o.deactivate(),o.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=R(t.getBody());var r,o,s;s=e,F(r=n,o="mce-content-readonly")&&!s?z(r,o):s&&_(r,o),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(r=>{N.from(r.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,Fd(n,!1),st(fn(n,'*[contenteditable="true"]'),r=>{Le(r,ii,"true"),Fd(r,!1)})):(t.readonly=!1,Fd(n,!0),st(fn(n,'*[data-mce-contenteditable="true"]'),r=>{nn(r,ii),Fd(r,!0)}),Up(t,"StyleWithCSS",!1),Up(t,"enableInlineTableEditing",!1),Up(t,"enableObjectResizing",!1),(r=>ca(r)||(o=>{const s=Vt(R(o.getElement()));return bf(s).filter(a=>!xf(a.dom)&&Uc(o,a.dom)).isSome()})(r))(t)&&t.focus(),(r=>{r.selection.setRng(r.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(r),(a=t).dispatch("SwitchMode",{mode:r})},Vp=ct.each,Kp=ct.explode,OT={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},zw=ct.makeMap("alt,ctrl,shift,meta,access"),DT=t=>{const e={},n=me.os.isMacOS()||me.os.isiOS();Vp(Kp(t.toLowerCase(),"+"),s=>{s in zw?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=OT[s]||s.toUpperCase().charCodeAt(0))});const r=[e.keyCode];let o;for(o in zw)e[o]?r.push(o):e[o]=!1;return e.id=r.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class Hw{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(Vp(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,r,o){const s=this,a=s.normalizeCommandFunc(r);return Vp(Kp(ct.trim(e)),i=>{const l=s.createShortcut(i,n,a,o);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,r=e;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:ct.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,n,r,o){const s=ct.map(Kp(e,">"),DT);return s[s.length-1]=ct.extend(s[s.length-1],{func:r,scope:o||this.editor}),ct.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const BT=()=>{const t=(()=>{const e={},n={},r={},o={},s={},a={},i={},l={},c=(u,f)=>(h,b)=>{u[h.toLowerCase()]={...b,type:f}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(r,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(a,"contexttoolbar"),addContextForm:c(a,"contextform"),addSidebar:c(i,"sidebar"),addView:c(l,"views"),addIcon:(u,f)=>o[u.toLowerCase()]=f,getAll:()=>({buttons:e,menuItems:n,icons:o,popups:r,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Ca=xe.DOM,Uw=ct.extend,LT=ct.each;class Hd{constructor(e,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,Uw(this,Mw);const o=this;this.id=e,this.hidden=!1;const s=((t,e,n,r,o)=>{var s;const a=t?{mobile:mT(null!==(s=o.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return Fo(s,(c,u)=>Tt(t,u),Sa(i),Sa(l)),{t:i,f:l}})(e);return o=n.f,{sections:ft(n.t),options:ft(o)};var o})(["mobile"],cp(a,o)),l=ct.extend(n,r,i.options(),t&&zp(i,"mobile")?((c,u,f={})=>{const h=c.sections(),b=Se(h,u).getOr({});return ct.extend({},f,b)})(i,"mobile"):{},{external_plugins:pT(r,i.options())});return((c,u,f,h)=>{const b=Rl(f.forced_plugins),g=Rl(h.plugins),v=zp(w=u,"mobile")?w.sections().mobile:{},p=((w,k,A,O)=>w&&zp(k,"mobile")?O:A)(c,u,g,v.plugins?Rl(v.plugins):g),C=((w,k)=>[...Rl(w),...Rl(k)])(b,p);var w;return ct.extend(h,{forced_plugins:b,plugins:C})})(t,i,r,l)})(Aw||uT,Aw,g=n,r.defaultOptions,g);var g;this.options=((b,g)=>{const v={},p={},C=(k,A,O)=>{const T=Wp(A,O);return Fw(T)?(p[k]=T.value,!0):(console.warn(Iw(`Invalid value passed for the ${k} option`,T)),!1)},w=k=>ee(v,k);return{register:(k,A)=>{const O=Rt(A.processor)?(P=>{const L=(()=>{switch(P){case"array":return it;case"boolean":return _n;case"function":return pe;case"number":return x;case"object":return Ut;case"string":return Rt;case"string[]":return RT;case"object[]":return M=>An(M,Ut);case"regexp":return M=>hr(M,RegExp);default:return Ae}})();return M=>Wp(M,L,`The value must be a ${P}.`)})(A.processor):A.processor,T=((P,L,M)=>{if(!Be(L)){const $=Wp(L,M);if(Fw($))return $.value;console.error(Iw(`Invalid default value passed for the "${P}" option`,$))}})(k,A.default,O);v[k]={...A,default:T,processor:O},Se(p,k).orThunk(()=>Se(g,k)).each(P=>C(k,P,O))},isRegistered:w,get:k=>Se(p,k).orThunk(()=>Se(v,k).map(A=>A.default)).getOrUndefined(),set:(k,A)=>{if(w(k)){const O=v[k];return O.immutable?(console.error(`"${k}" is an immutable option and cannot be updated`),!1):C(k,A,O.processor)}return console.warn(`"${k}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:k=>{const A=w(k);return A&&delete p[k],A},isSet:k=>ee(p,k)}})(0,s),(b=>{const g=b.options.register;g("id",{processor:"string",default:b.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:b.documentBaseUrl}),g("body_id",{processor:hh(b,"tinymce"),default:"tinymce"}),g("body_class",{processor:hh(b),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:v=>{const p=Rt(v)&&zn(v);return p?{value:v,valid:p}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:v=>{const p=Tt(["block","linebreak","invert","default"],v);return p?{value:v,valid:p}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:v=>_n(v)||Rt(v)?{valid:!0,value:v}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:v=>{const p=!1===v||Rt(v)||An(v,Rt);return p?Rt(v)?{value:oe(v.split(","),Xr),valid:p}:it(v)?{value:v,valid:p}:!1===v?{value:[],valid:p}:{value:v,valid:p}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Fu(b)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:v=>{const p=Rt(v)||An(v,Rt);return p?{value:it(v)?v:oe(v.split(","),Xr),valid:p}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:v=>{const p=_n(v)||Rt(v);return p?!1===v||Lu.isiPhone()||Lu.isiPad()?{value:"",valid:p}:{value:!0===v?"table,img,figure.image,div,video,iframe":v,valid:p}:{valid:!1,message:"Must be boolean or a string"}},default:!YS}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"object"}),g("service_message",{processor:"string"}),g("theme",{processor:v=>!1===v||Rt(v)||pe(v),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:v=>{const p=!1===v||Rt(v);return p?{value:!1===v?"":v,valid:p}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:b.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:b.convertURL}),g("url_converter_scope",{processor:"object",default:b}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean"}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:"string"}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:Pu}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:Pu}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:Pu}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:v=>Rt(v)||!0===v}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:v=>An(v,Ut)||!1===v?{value:ph(!1===v?[]:v),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),g("text_patterns_lookup",{processor:v=>{return pe(v)?{value:(p=v,C=>{const w=p(C);return ph(w)}),valid:!0}:{valid:!1,message:"Must be a single function"};var p},default:v=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:v=>An(v,gh)?{value:v,valid:!0}:gh(v)?{value:[v],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!1}),g("xss_sanitization",{processor:"boolean",default:!0}),b.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:ro.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:QS.getAttrib(b.getElement(),"placeholder")})})})(o);const a=this.options.get;a("deprecation_warnings")&&((b,g)=>{((v,p)=>{const C=(t=>{const e=$y(t,A_),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),Mo(e)})(v),w=(t=>Wy(t,T_))(p),k=w.length>0,A=C.length>0,O="mobile"===p.theme;if(k||A||O){const T="\n- ",P=O?`\n\nThemes:${T}mobile`:"",L=k?`\n\nPlugins:${T}${w.join(T)}`:"",M=A?`\n\nOptions:${T}${C.join(T)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+P+L+M)}})(b,g),((v,p)=>{const C=(t=>$y(t,R_))(v),w=(t=>Wy(t,qy.map(e=>e.name)))(p),k=w.length>0,A=C.length>0;if(k||A){const O="\n- ",T=k?`\n\nPlugins:${O}${w.map(P_).join(O)}`:"",P=A?`\n\nOptions:${O}${C.join(O)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+T+P)}})(b,g)})(n,s);const i=a("suffix");i&&(r.suffix=i),this.suffix=r.suffix;const l=a("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const c=Mu(o);c&&(Ko.ScriptLoader._setReferrerPolicy(c),xe.DOM.styleSheetLoader._setReferrerPolicy(c));const u=Ah(o);pt(u)&&xe.DOM.styleSheetLoader._setContentCssCors(u),Ln.languageLoad=a("language_load"),Ln.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new io(bh(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Fu(o),this.hasVisual=jk(o),this.shortcuts=new Hw(this),this.editorCommands=new Dw(this),(t=>{var e;(t=>{(e=>{const n=r=>()=>{st("left,center,right,justify".split(","),o=>{r!==o&&e.formatter.remove("align"+o)}),"none"!==r&&(e.formatter.toggle("align"+r,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=r=>()=>{const o=e.selection,s=o.isCollapsed()?[e.dom.getParent(o.getNode(),e.dom.isBlock)]:o.getSelectedBlocks();return ke(s,a=>pt(e.formatter.matchNode(a,r)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=e.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(me.os.isMacOS()||me.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!vt(a)||s++!==o||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,r,o)=>{e.selection.select(o)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),no);if(n){const r=e.dom.createRng();r.selectNodeContents(n),e.selection.setRng(r)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{Id(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{Id(e,e.dom.encode(o))},insertHTML:(n,r,o)=>{Id(e,o)},mceInsertContent:(n,r,o)=>{Id(e,o)},mceSetContent:(n,r,o)=>{e.setContent(o)},mceReplaceContent:(n,r,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})})(t),(e=>{const n=(r,o,s)=>{const a=Rt(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");Ut(a)&&Rt(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const r=e.dom.getParent(e.selection.getStart(),"a");r&&e.dom.remove(r,!0)}else e.formatter.remove("link")},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{aC(e,"indent")},Outdent:()=>{iC(e)}}),e.editorCommands.addCommands({Outdent:()=>rC(e)},"state")})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Td(ux,e)},mceInsertNewLine:(n,r,o)=>{vx(e,o)},InsertLineBreak:(n,r,o)=>{Td(px,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{n.getDoc().execCommand(r);const o=n.dom.getParent(n.selection.getNode(),"ol,ul");if(o){const s=o.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=n.selection.getBookmark();n.dom.split(s,o),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{const o=n.dom.getParent(n.selection.getNode(),"ul,ol");return o&&("insertunorderedlist"===r&&"UL"===o.tagName||"insertorderedlist"===r&&"OL"===o.tagName)}},"state")})(e)})(t),(e=>{(n=>{const r=(o,s)=>{n.formatter.toggle(o,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,s,a)=>{r(o,{value:a})},BackColor:(o,s,a)=>{r("hilitecolor",{value:a})},FontName:(o,s,a)=>{((i,l)=>{const c=Tw(i,l);i.formatter.toggle("fontname",{value:ST(c)}),i.nodeChanged()})(n,a)},FontSize:(o,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:Tw(i,a)}),i.nodeChanged()},LineHeight:(o,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(o,s,a)=>{var i;r(o,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,s,a)=>{r(Rt(a)?a:"p")},mceToggleFormat:(o,s,a)=>{r(a)}})})(e),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return Hp(o=n,s=>xT(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return Hp(o=n,s=>CT(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return Hp(o=n,s=>{const a=R(o.getBody());return em(s,l=>B(l,"line-height"),yt(ne,a)).getOrThunk(()=>{const l=parseFloat(dr(s,"line-height")),c=parseFloat(dr(s,"font-size"));return String(l/c)})}).getOr("");var o})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const s=o??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,r,o)=>{var s;(s=e).removed||(!0===o?kf(s):(i=>{const l=i.selection,c=i.getBody();let u=l.getRng();i.quirks.refreshContentEditable(),pt(i.bookmark)&&!ca(i)&&yf(i).each(h=>{i.selection.setRng(h),u=h});const f=(h=i,b=l.getNode(),h.dom.getParent(b,g=>"true"===h.dom.getContentEditable(g)));var h,b;if(f&&i.dom.isChildOf(f,c))return Sf(f),o0(i,u),void kf(i);i.inline||(me.browser.isOpera()||Sf(c),i.getWin().focus()),(me.browser.isFirefox()||i.inline)&&(Sf(c),o0(i,u)),kf(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const f=a("cache_suffix");f&&(me.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:BT(),styleSheetLoader:void 0,show:Et,hide:Et,setEnabled:Et,isEnabled:Ae},this.mode=(b=>{const g=rn("design"),v=rn({design:{activate:Et,deactivate:Et,editorReadOnly:!1},readonly:{activate:Et,deactivate:Et,editorReadOnly:!0}});return(p=b).serializer?Bw(p):p.on("PreInit",()=>{Bw(p)}),(p=>{p.on("ShowCaret",C=>{va(p)&&C.preventDefault()}),p.on("ObjectSelected",C=>{va(p)&&C.preventDefault()})})(b),{isReadOnly:()=>va(b),set:p=>((C,w,k,A)=>{if(A!==k.get()){if(!ee(w,A))throw new Error(`Editor mode '${A}' is invalid`);C.initialized?jw(C,k,w,A):C.on("init",()=>jw(C,k,w,A))}})(b,v.get(),g,p),get:()=>g.get(),register:(p,C)=>{v.set(((w,k,A)=>{if(Tt(TT,k))throw new Error(`Cannot override default mode ${k}`);return{...w,[k]:{...A,deactivate:()=>{try{A.deactivate()}catch(O){console.error(`problem while deactivating editor mode ${k}:`,O)}}}}})(v.get(),p,C))}};var p})(o),r.dispatch("SetupEditor",{editor:this});const h=Uk(o);pe(h)&&h.call(o,o)}render(){(e=>{const n=e.id;ro.setCode(wh(e));const r=()=>{ba.unbind(window,"ready",r),e.render()};if(!Qs.Event.domLoaded)return void ba.bind(window,"ready",r);if(!e.getElement())return;const o=R(e.getElement()),s=Jl(o);var l;e.on("remove",()=>{go(o.dom.attributes,i=>nn(o,i.name)),Gr(o,s)}),e.ui.styleSheetLoader=bg.forElement(o,{contentCssCors:Ah(l=e),referrerPolicy:Mu(l)}),Fu(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||ba.getParent(n,"form");a&&(e.formElement=a,Ok(e)&&!nu(e.getElement())&&(ba.insertAfter(ba.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},ba.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!Dk(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=Gy(e),e.notificationManager=Xy(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=ba.encode(i.content))}),Bk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Lk(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Ko.ScriptLoader,r=()=>{!t.removed&&(o=>{const s=Ha(o);return!Rt(s)||pt(ha.get(s))})(t)&&(o=>{const s=Iu(o);return pt(Za.get(s))})(t)&&cT(t)};((o,s)=>{const a=Ha(o);if(Rt(a)&&!Ew(a)&&!ee(ha.urls,a)){const i=kk(o),l=i?o.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;ha.load(a,l).catch(()=>{ml(o,"ThemeLoadError",pl("theme",l,a))})}})(t,e),((o,s)=>{const a=Iu(o);if("plugin"!==a&&!ee(Za.urls,a)){const i=Ek(o),l=Rt(i)?o.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;Za.load(a,l).catch(()=>{ml(o,"ModelLoadError",pl("model",l,a))})}})(t,e),((o,s)=>{const a=wh(s),i=gk(s);if(!ro.hasCode(a)&&"en"!==a){const l=zn(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;o.add(l).catch(()=>{ml(s,"LanguageLoadError",pl("language",l,a))})}})(n,t),((o,s,a)=>{const i=Nw(s,"default",a),l=(c=s,N.from(ck(c)).filter(zn).map(u=>({url:u,name:N.none()}))).orThunk(()=>Nw(s,xh(s),""));var c;st((c=>{const u=[],f=h=>{u.push(h)};for(let h=0;h<c.length;h++)c[h].each(f);return u})([i,l]),c=>{o.add(c.url).catch(()=>{var u,f,h;u=s,f=c.url,h=c.name.getOrUndefined(),ml(u,"IconsLoadError",pl("icons",f,h))})})})(n,t,e),((o,s)=>{const a=(i,l)=>{ti.load(i,l).catch(()=>{ml(o,"PluginLoadError",pl("plugin",l,i))})};we(Ik(o),(i,l)=>{a(l,i),o.options.set("plugins",xc(o).concat(l))}),st(xc(o),i=>{!(i=ct.trim(i))||ti.urls[i]||Ew(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(r,r)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return ca(this)}translate(e){return ro.translate(e)}getParam(e,n,r){const o=this.options;return o.isRegistered(e)||(pt(r)?o.register(e,{processor:r,default:n}):o.register(e,{processor:Ae,default:n})),o.isSet(e)||Be(n)?o.get(e):n}hasPlugin(e,n){return!(!Tt(xc(this),e)||n&&void 0===ti.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,r){this.editorCommands.addCommand(e,n,r)}addQueryStateHandler(e,n,r){this.editorCommands.addQueryStateHandler(e,n,r)}addQueryValueHandler(e,n,r){this.editorCommands.addQueryValueHandler(e,n,r)}addShortcut(e,n,r,o){this.shortcuts.add(e,n,r,o)}execCommand(e,n,r,o){return this.editorCommands.execCommand(e,n,r,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(Ca.show(e.getContainer()),Ca.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Ca.hide(e.getContainer()),Ca.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...e,load:!0},s=nu(r)?r.value:r.innerHTML,a=n.setContent(s,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),a}return""}save(e={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...e,save:!0,element:r};let s=n.getContent(o);const a={...o,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,nu(r))r.value=s;else{!e.is_removing&&n.inline||(r.innerHTML=s);const i=Ca.getParent(n.id,"form");i&&LT(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=o.element=r=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return Dm(this,e,n)}getContent(e){return((n,r={})=>{const o=(s=r,a=r.format?r.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return Sy(n,o).fold(de,s=>{const a=(l=s,Om(n).editor.getContent(l));var l;return ky(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=Uw({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Dm(this,this.startContent,{format:"raw"}):Dm(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||Ca.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ca.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const r=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:r?.body)&&void 0!==n?n:null}convertURL(e,n,r){const o=this,s=o.options.get,a=$k(o);return pe(a)?a.call(o,e,r,!0,n):!s("convert_urls")||"link"===r||Ut(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,r)=>{var s;s=r,He(this).editor.addVisual(s)})(0,e)}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:r}=e,o=e.getBody(),s=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&pt(s?.nextSibling)&&ad.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&o&&ad.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),ad.remove(e.getContainer()),id(n),id(r),e.destroy()}var a})(this)}destroy(e){((n,r)=>{const{selection:o,dom:s}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),id(o),id(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),ad.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const li=xe.DOM,Ud=ct.each;let qd,qw=!1,Yn=[];const $d=t=>{const e=t.type;Ud(As.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},$w=t=>{if(t!==qw){const e=xe.DOM;t?(e.bind(window,"resize",$d),e.bind(window,"scroll",$d)):(e.unbind(window,"resize",$d),e.unbind(window,"scroll",$d)),qw=t}},Ww=t=>{const e=Yn;return Yn=qt(Yn,n=>t!==n),As.activeEditor===t&&(As.activeEditor=Yn.length>0?Yn[0]:null),As.focusedEditor===t&&(As.focusedEditor=null),e.length!==Yn.length},PT="CSS1Compat"!==document.compatMode,As={...$p,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"4.2",releaseDate:"2023-04-26",i18n:ro,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",r=io.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)e=o.base||o.baseURL,n=o.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new io(r).toAbsolute(e),t.documentBaseURL=r,t.baseURI=new io(t.baseURL),t.suffix=n,(s=t).on("AddEditor",yt(JE,s)),s.on("RemoveEditor",yt(ZE,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const r=t.plugin_base_urls;void 0!==r&&we(r,(o,s)=>{Ln.PluginManager.urls[s]=o})},init(t){const e=this;let n;const r=ct.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var c;li.unbind(window,"ready",s),(c=>{const u=t.onpageload;u&&u.apply(e,[])})(),l=((c,u)=>{const f=[],h=pe(u)?b=>ke(f,g=>u(g,b)):b=>Tt(f,b);for(let b=0,g=c.length;b<g;b++){const v=c[b];h(v)||f.push(v)}return f})((c=t,me.browser.isIE()||me.browser.isEdge()?(dd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):PT?(dd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Rt(c.selector)?li.select(c.selector):pt(c.target)?[c.target]:[])),ct.each(l,c=>{var u;(u=e.get(c.id))&&u.initialized&&!(u.getContainer()||u.getBody()).parentNode&&(Ww(u),u.unbindAllNativeEvents(),u.destroy(!0),u.removed=!0)}),l=ct.grep(l,c=>!e.get(c.id)),0===l.length?o([]):Ud(l,c=>{t.inline&&c.tagName.toLowerCase()in r?dd("Could not initialize inline editor on invalid inline target element",c):((u,f,h)=>{const b=new Hd(u,f,e);i.push(b),b.on("init",()=>{++a===l.length&&o(i)}),b.targetElm=b.targetElm||h,b.render()})((u=>{let f=u.id;return f||(f=Se(u,"name").filter(h=>!li.get(h)).getOrThunk(li.uniqueId),u.setAttribute("id",f)),f})(c),t,c)})};return li.bind(window,"ready",s),new Promise(a=>{n?a(n):o=i=>{a(i)}})},get(t){return 0===arguments.length?Yn.slice(0):Rt(t)?Ue(Yn,e=>e.id===t).getOr(null):x(t)&&Yn[t]?Yn[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&Yn.push(t),$w(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),qd||(qd=r=>{const o=e.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",qd))),t},createEditor(t,e){return this.add(new Hd(t,e,this))},remove(t){const e=this;let n;if(t){if(!Rt(t))return n=t,Zt(e.get(n.id))?null:(Ww(n)&&e.dispatch("RemoveEditor",{editor:n}),0===Yn.length&&window.removeEventListener("beforeunload",qd),n.remove(),$w(Yn.length>0),n);Ud(li.select(t),r=>{n=e.get(r.id),n&&e.remove(n)})}else for(let r=Yn.length-1;r>=0;r--)e.remove(Yn[r])},execCommand(t,e,n){var r;const o=this,s=Ut(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(t){case"mceAddEditor":return o.get(s)||new Hd(s,n.options,o).render(),!0;case"mceRemoveEditor":{const a=o.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Ud(Yn,t=>{t.save()})},addI18n:(t,e)=>{ro.add(t,e)},translate:t=>ro.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new io(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new io(this.baseURL)}};As.setup();const MT=(()=>{const t=hs();return{FakeClipboardItem:e=>({items:e,types:Ye(e),getType:n=>Se(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),Vw=Math.min,ci=Math.max,Wd=Math.round,Kw=(t,e,n)=>{let r=e.x,o=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(o+=l),"r"===c[1]&&(r+=i),"c"===c[0]&&(o+=Wd(l/2)),"c"===c[1]&&(r+=Wd(i/2)),"b"===c[3]&&(o-=a),"r"===c[4]&&(r-=s),"c"===c[3]&&(o-=Wd(a/2)),"c"===c[4]&&(r-=Wd(s/2)),di(r,o,s,a)},di=(t,e,n,r)=>({x:t,y:e,w:n,h:r}),IT={inflate:(t,e,n)=>di(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:Kw,findBestRelativePosition:(t,e,n,r)=>{for(let o=0;o<r.length;o++){const s=Kw(t,e,r[o]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return r[o]}return null},intersect:(t,e)=>{const n=ci(t.x,e.x),r=ci(t.y,e.y),o=Vw(t.x+t.w,e.x+e.w),s=Vw(t.y+t.h,e.y+e.h);return o-n<0||s-r<0?null:di(n,r,o-n,s-r)},clamp:(t,e,n)=>{let r=t.x,o=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,c=ci(0,e.x-r),u=ci(0,e.y-o),f=ci(0,s-i),h=ci(0,a-l);return r+=c,o+=u,n&&(s+=c,a+=u,r-=f,o-=h),s-=f,a-=h,di(r,o,s-r,a-o)},create:di,fromClientRect:t=>di(t.left,t.top,t.width,t.height)},FT=(()=>{const t={},e={};return{load:(n,r)=>{const o=`Script at URL "${r}" failed to load`,s=`Script at URL "${r}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const a=new Promise((i,l)=>{const c=((u,f,h=1e3)=>{let b=!1,g=null;const v=w=>(...k)=>{b||(b=!0,null!==g&&(clearTimeout(g),g=null),w.apply(null,k))},p=v(u),C=v(f);return{start:(...w)=>{b||null!==g||(g=setTimeout(()=>C.apply(null,w),h))},resolve:p,reject:C}})(i,l);e[n]=c.resolve,Ko.ScriptLoader.loadScript(r).then(()=>c.start(s),()=>c.reject(o))});return t[n]=a,a}},add:(n,r)=>{void 0!==e[n]&&(e[n](r),delete e[n]),t[n]=Promise.resolve(r)},unload:n=>{delete t[n]}}})();let Ol;try{const t="__storage_test__";Ol=window.localStorage,Ol.setItem(t,t),Ol.removeItem(t)}catch{Ol=(()=>{let e={},n=[];const r={getItem:o=>e[o]||null,setItem:(o,s)=>{n.push(o),e[o]=String(s)},key:o=>n[o],removeItem:o=>{n=n.filter(s=>s===o),delete e[o]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const jT={geom:{Rect:IT},util:{Delay:Ar,Tools:ct,VK:St,URI:io,EventDispatcher:qp,Observable:$p,I18n:ro,LocalStorage:Ol,ImageUploader:t=>{const e=Jy(),n=t1(t,e);return{upload:(r,o=!0)=>n.upload(r,o?Zy(t):void 0)}}},dom:{EventUtils:Qs,TreeWalker:Ze,TextSeeker:ta,DOMUtils:xe,ScriptLoader:Ko,RangeUtils:la,Serializer:Uy,StyleSheetLoader:hg,ControlSelection:Lb,BookmarkManager:tl,Selection:Hy,Event:Qs.Event},html:{Styles:yu,Entities:ps,Node:Gn,Schema:gs,DomParser:Ja,Writer:v0,Serializer:xs},Env:me,AddOnManager:Ln,Annotator:Eb,Formatter:r1,UndoManager:s1,EditorCommands:Dw,WindowManager:Gy,NotificationManager:Xy,EditorObservable:Mw,Shortcuts:Hw,Editor:Hd,FocusManager:r0,EditorManager:As,DOM:xe.DOM,ScriptLoader:Ko.ScriptLoader,PluginManager:ti,ThemeManager:ha,ModelManager:Za,IconManager:ld,Resource:FT,FakeClipboard:MT,trim:ct.trim,isArray:ct.isArray,is:ct.is,toArray:ct.toArray,makeMap:ct.makeMap,each:ct.each,map:ct.map,grep:ct.grep,inArray:ct.inArray,extend:ct.extend,walk:ct.walk,resolve:ct.resolve,explode:ct.explode,_addCacheSuffix:ct._addCacheSuffix},Xw=ct.extend(As,jT);(t=>{window.tinymce=t,window.tinyMCE=t})(Xw),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(Xw)}(),function(gt,jt){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=gt.document?jt(gt,!0):function(Ht){if(!Ht.document)throw new Error("jQuery requires a window with a document");return jt(Ht)}:jt(gt)}(typeof window<"u"?window:this,function(gt,jt){"use strict";var Ht=[],It=Object.getPrototypeOf,re=Ht.slice,Ie=Ht.flat?function(d){return Ht.flat.call(d)}:function(d){return Ht.concat.apply([],d)},yn=Ht.push,Ke=Ht.indexOf,In={},gr=In.toString,Cn=In.hasOwnProperty,hr=Cn.toString,Rt=hr.call(Object),Ut={},Dt=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},it=function(d){return null!=d&&d===d.window},Zt=gt.document,_n={type:!0,src:!0,nonce:!0,noModule:!0};function Be(d,m,y){var S,E,_=(y=y||Zt).createElement("script");if(_.text=d,m)for(S in _n)(E=m[S]||m.getAttribute&&m.getAttribute(S))&&_.setAttribute(S,E);y.head.appendChild(_).parentNode.removeChild(_)}function be(d){return null==d?d+"":"object"==typeof d||"function"==typeof d?In[gr.call(d)]||"object":typeof d}var pe=/HTML$/i,x=function(d,m){return new x.fn.init(d,m)};function An(d){var m=!!d&&"length"in d&&d.length,y=be(d);return!Dt(d)&&!it(d)&&("array"===y||0===m||"number"==typeof m&&0<m&&m-1 in d)}function Et(d,m){return d.nodeName&&d.nodeName.toLowerCase()===m.toLowerCase()}x.fn=x.prototype={jquery:"3.7.0",constructor:x,length:0,toArray:function(){return re.call(this)},get:function(d){return null==d?re.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var m=x.merge(this.constructor(),d);return m.prevObject=this,m},each:function(d){return x.each(this,d)},map:function(d){return this.pushStack(x.map(this,function(m,y){return d.call(m,y,m)}))},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(d,m){return(m+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(d,m){return m%2}))},eq:function(d){var m=this.length,y=+d+(d<0?m:0);return this.pushStack(0<=y&&y<m?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:yn,sort:Ht.sort,splice:Ht.splice},x.extend=x.fn.extend=function(){var d,m,y,S,E,_,D=arguments[0]||{},z=1,F=arguments.length,K=!1;for("boolean"==typeof D&&(K=D,D=arguments[z]||{},z++),"object"==typeof D||Dt(D)||(D={}),z===F&&(D=this,z--);z<F;z++)if(null!=(d=arguments[z]))for(m in d)S=d[m],"__proto__"!==m&&D!==S&&(K&&S&&(x.isPlainObject(S)||(E=Array.isArray(S)))?(y=D[m],_=E&&!Array.isArray(y)?[]:E||x.isPlainObject(y)?y:{},E=!1,D[m]=x.extend(K,_,S)):void 0!==S&&(D[m]=S));return D},x.extend({expando:"jQuery"+("3.7.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var m,y;return!(!d||"[object Object]"!==gr.call(d)||(m=It(d))&&("function"!=typeof(y=Cn.call(m,"constructor")&&m.constructor)||hr.call(y)!==Rt))},isEmptyObject:function(d){var m;for(m in d)return!1;return!0},globalEval:function(d,m,y){Be(d,{nonce:m&&m.nonce},y)},each:function(d,m){var y,S=0;if(An(d))for(y=d.length;S<y&&!1!==m.call(d[S],S,d[S]);S++);else for(S in d)if(!1===m.call(d[S],S,d[S]))break;return d},text:function(d){var m,y="",S=0,E=d.nodeType;if(E){if(1===E||9===E||11===E)return d.textContent;if(3===E||4===E)return d.nodeValue}else for(;m=d[S++];)y+=x.text(m);return y},makeArray:function(d,m){var y=m||[];return null!=d&&(An(Object(d))?x.merge(y,"string"==typeof d?[d]:d):yn.call(y,d)),y},inArray:function(d,m,y){return null==m?-1:Ke.call(m,d,y)},isXMLDoc:function(d){var y=d&&(d.ownerDocument||d).documentElement;return!pe.test(d&&d.namespaceURI||y&&y.nodeName||"HTML")},merge:function(d,m){for(var y=+m.length,S=0,E=d.length;S<y;S++)d[E++]=m[S];return d.length=E,d},grep:function(d,m,y){for(var S=[],E=0,_=d.length,D=!y;E<_;E++)!m(d[E],E)!==D&&S.push(d[E]);return S},map:function(d,m,y){var S,E,_=0,D=[];if(An(d))for(S=d.length;_<S;_++)null!=(E=m(d[_],_,y))&&D.push(E);else for(_ in d)null!=(E=m(d[_],_,y))&&D.push(E);return Ie(D)},guid:1,support:Ut}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=Ht[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,m){In["[object "+m+"]"]=m.toLowerCase()});var Zn=Ht.pop,Os=Ht.sort,ft=Ht.splice,de="[\\x20\\t\\r\\n\\f]",fo=new RegExp("^"+de+"+|((?:^|[^\\\\])(?:\\\\.)*)"+de+"+$","g");x.contains=function(d,m){var y=m&&m.parentNode;return d===y||!(!y||1!==y.nodeType||!(d.contains?d.contains(y):d.compareDocumentPosition&&16&d.compareDocumentPosition(y)))};var yt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Lo(d,m){return m?"\0"===d?"\ufffd":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}x.escapeSelector=function(d){return(d+"").replace(yt,Lo)};var sr=Zt,mo=yn;!function(){var d,m,y,S,E,_,D,z,F,K,Z=mo,ot=x.expando,Y=0,R=0,Kt=je(),ce=je(),Qt=je(),qe=je(),ne=function(B,V){return B===V&&(E=!0),0},cn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",yr="(?:\\\\[\\da-fA-F]{1,6}"+de+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ue="\\["+de+"*("+yr+")(?:"+de+"*([*^$|!~]?=)"+de+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+yr+"))|)"+de+"*\\]",Cr=":("+yr+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ue+")*)|.*)\\)|)",fe=new RegExp(de+"+","g"),Pe=new RegExp("^"+de+"*,"+de+"*"),is=new RegExp("^"+de+"*([>+~]|"+de+")"+de+"*"),Yr=new RegExp(de+"|>"),$n=new RegExp(Cr),ls=new RegExp("^"+yr+"$"),Fr={ID:new RegExp("^#("+yr+")"),CLASS:new RegExp("^\\.("+yr+")"),TAG:new RegExp("^("+yr+"|[*])"),ATTR:new RegExp("^"+ue),PSEUDO:new RegExp("^"+Cr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+de+"*(even|odd|(([+-]|)(\\d*)n|)"+de+"*(?:([+-]|)"+de+"*(\\d+)|))"+de+"*\\)|)","i"),bool:new RegExp("^(?:"+cn+")$","i"),needsContext:new RegExp("^"+de+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+de+"*((?:-\\d)?\\d*)"+de+"*\\)|)(?=[^-]|$)","i")},Re=/^(?:input|select|textarea|button)$/i,Qr=/^h\d$/i,Wn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Je=/[+~]/,Xe=new RegExp("\\\\[\\da-fA-F]{1,6}"+de+"?|\\\\([^\\r\\n\\f])","g"),bn=function(B,V){var tt="0x"+B.slice(1)-65536;return V||(tt<0?String.fromCharCode(tt+65536):String.fromCharCode(tt>>10|55296,1023&tt|56320))},Jr=function(){cr()},On=Ba(function(B){return!0===B.disabled&&Et(B,"fieldset")},{dir:"parentNode",next:"legend"});try{Z.apply(Ht=re.call(sr.childNodes),sr.childNodes)}catch{Z={apply:function(V,tt){mo.apply(V,re.call(tt))},call:function(V){mo.apply(V,re.call(arguments,1))}}}function Vt(B,V,tt,nt){var lt,Pt,Ct,$t,Ot,ge,Bt,se=V&&V.ownerDocument,ve=V?V.nodeType:9;if(tt=tt||[],"string"!=typeof B||!B||1!==ve&&9!==ve&&11!==ve)return tt;if(!nt&&(cr(V),V=V||_,z)){if(11!==ve&&(Ot=Wn.exec(B)))if(lt=Ot[1]){if(9===ve){if(!(Ct=V.getElementById(lt)))return tt;if(Ct.id===lt)return Z.call(tt,Ct),tt}else if(se&&(Ct=se.getElementById(lt))&&Vt.contains(V,Ct)&&Ct.id===lt)return Z.call(tt,Ct),tt}else{if(Ot[2])return Z.apply(tt,V.getElementsByTagName(B)),tt;if((lt=Ot[3])&&V.getElementsByClassName)return Z.apply(tt,V.getElementsByClassName(lt)),tt}if(!(qe[B+" "]||F&&F.test(B))){if(Bt=B,se=V,1===ve&&(Yr.test(B)||is.test(B))){for((se=Je.test(B)&&Zr(V.parentNode)||V)==V&&Ut.scope||(($t=V.getAttribute("id"))?$t=x.escapeSelector($t):V.setAttribute("id",$t=ot)),Pt=(ge=zr(B)).length;Pt--;)ge[Pt]=($t?"#"+$t:":scope")+" "+qo(ge[Pt]);Bt=ge.join(",")}try{return Z.apply(tt,se.querySelectorAll(Bt)),tt}catch{qe(B,!0)}finally{$t===ot&&V.removeAttribute("id")}}}return Ei(B.replace(fo,"$1"),V,tt,nt)}function je(){var B=[];return function V(tt,nt){return B.push(tt+" ")>m.cacheLength&&delete V[B.shift()],V[tt+" "]=nt}}function Ge(B){return B[ot]=!0,B}function Te(B){var V=_.createElement("fieldset");try{return!!B(V)}catch{return!1}finally{V.parentNode&&V.parentNode.removeChild(V),V=null}}function jr(B){return function(V){return Et(V,"input")&&V.type===B}}function xr(B){return function(V){return(Et(V,"input")||Et(V,"button"))&&V.type===B}}function Hs(B){return function(V){return"form"in V?V.parentNode&&!1===V.disabled?"label"in V?"label"in V.parentNode?V.parentNode.disabled===B:V.disabled===B:V.isDisabled===B||V.isDisabled!==!B&&On(V)===B:V.disabled===B:"label"in V&&V.disabled===B}}function Dn(B){return Ge(function(V){return V=+V,Ge(function(tt,nt){for(var lt,Pt=B([],tt.length,V),Ct=Pt.length;Ct--;)tt[lt=Pt[Ct]]&&(tt[lt]=!(nt[lt]=tt[lt]))})})}function Zr(B){return B&&typeof B.getElementsByTagName<"u"&&B}function cr(B){var V,tt=B?B.ownerDocument||B:sr;return tt!=_&&9===tt.nodeType&&tt.documentElement&&(D=(_=tt).documentElement,z=!x.isXMLDoc(_),K=D.matches||D.webkitMatchesSelector||D.msMatchesSelector,sr!=_&&(V=_.defaultView)&&V.top!==V&&V.addEventListener("unload",Jr),Ut.getById=Te(function(nt){return D.appendChild(nt).id=x.expando,!_.getElementsByName||!_.getElementsByName(x.expando).length}),Ut.disconnectedMatch=Te(function(nt){return K.call(nt,"*")}),Ut.scope=Te(function(){return _.querySelectorAll(":scope")}),Ut.cssHas=Te(function(){try{return _.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Ut.getById?(m.filter.ID=function(nt){var lt=nt.replace(Xe,bn);return function(Pt){return Pt.getAttribute("id")===lt}},m.find.ID=function(nt,lt){if(typeof lt.getElementById<"u"&&z){var Pt=lt.getElementById(nt);return Pt?[Pt]:[]}}):(m.filter.ID=function(nt){var lt=nt.replace(Xe,bn);return function(Pt){var Ct=typeof Pt.getAttributeNode<"u"&&Pt.getAttributeNode("id");return Ct&&Ct.value===lt}},m.find.ID=function(nt,lt){if(typeof lt.getElementById<"u"&&z){var Pt,Ct,$t,Ot=lt.getElementById(nt);if(Ot){if((Pt=Ot.getAttributeNode("id"))&&Pt.value===nt)return[Ot];for($t=lt.getElementsByName(nt),Ct=0;Ot=$t[Ct++];)if((Pt=Ot.getAttributeNode("id"))&&Pt.value===nt)return[Ot]}return[]}}),m.find.TAG=function(nt,lt){return typeof lt.getElementsByTagName<"u"?lt.getElementsByTagName(nt):lt.querySelectorAll(nt)},m.find.CLASS=function(nt,lt){if(typeof lt.getElementsByClassName<"u"&&z)return lt.getElementsByClassName(nt)},F=[],Te(function(nt){var lt;D.appendChild(nt).innerHTML="<a id='"+ot+"' href='' disabled='disabled'></a><select id='"+ot+"-\r\\' disabled='disabled'><option selected=''></option></select>",nt.querySelectorAll("[selected]").length||F.push("\\["+de+"*(?:value|"+cn+")"),nt.querySelectorAll("[id~="+ot+"-]").length||F.push("~="),nt.querySelectorAll("a#"+ot+"+*").length||F.push(".#.+[+~]"),nt.querySelectorAll(":checked").length||F.push(":checked"),(lt=_.createElement("input")).setAttribute("type","hidden"),nt.appendChild(lt).setAttribute("name","D"),D.appendChild(nt).disabled=!0,2!==nt.querySelectorAll(":disabled").length&&F.push(":enabled",":disabled"),(lt=_.createElement("input")).setAttribute("name",""),nt.appendChild(lt),nt.querySelectorAll("[name='']").length||F.push("\\["+de+"*name"+de+"*="+de+"*(?:''|\"\")")}),Ut.cssHas||F.push(":has"),F=F.length&&new RegExp(F.join("|")),ne=function(nt,lt){if(nt===lt)return E=!0,0;var Pt=!nt.compareDocumentPosition-!lt.compareDocumentPosition;return Pt||(1&(Pt=(nt.ownerDocument||nt)==(lt.ownerDocument||lt)?nt.compareDocumentPosition(lt):1)||!Ut.sortDetached&&lt.compareDocumentPosition(nt)===Pt?nt===_||nt.ownerDocument==sr&&Vt.contains(sr,nt)?-1:lt===_||lt.ownerDocument==sr&&Vt.contains(sr,lt)?1:S?Ke.call(S,nt)-Ke.call(S,lt):0:4&Pt?-1:1)}),_}for(d in Vt.matches=function(B,V){return Vt(B,null,null,V)},Vt.matchesSelector=function(B,V){if(cr(B),z&&!qe[V+" "]&&(!F||!F.test(V)))try{var tt=K.call(B,V);if(tt||Ut.disconnectedMatch||B.document&&11!==B.document.nodeType)return tt}catch{qe(V,!0)}return 0<Vt(V,_,null,[B]).length},Vt.contains=function(B,V){return(B.ownerDocument||B)!=_&&cr(B),x.contains(B,V)},Vt.attr=function(B,V){(B.ownerDocument||B)!=_&&cr(B);var tt=m.attrHandle[V.toLowerCase()],nt=tt&&Cn.call(m.attrHandle,V.toLowerCase())?tt(B,V,!z):void 0;return void 0!==nt?nt:B.getAttribute(V)},Vt.error=function(B){throw new Error("Syntax error, unrecognized expression: "+B)},x.uniqueSort=function(B){var V,tt=[],nt=0,lt=0;if(E=!Ut.sortStable,S=!Ut.sortStable&&re.call(B,0),Os.call(B,ne),E){for(;V=B[lt++];)V===B[lt]&&(nt=tt.push(lt));for(;nt--;)ft.call(B,tt[nt],1)}return S=null,B},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(re.apply(this)))},(m=x.expr={cacheLength:50,createPseudo:Ge,match:Fr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(B){return B[1]=B[1].replace(Xe,bn),B[3]=(B[3]||B[4]||B[5]||"").replace(Xe,bn),"~="===B[2]&&(B[3]=" "+B[3]+" "),B.slice(0,4)},CHILD:function(B){return B[1]=B[1].toLowerCase(),"nth"===B[1].slice(0,3)?(B[3]||Vt.error(B[0]),B[4]=+(B[4]?B[5]+(B[6]||1):2*("even"===B[3]||"odd"===B[3])),B[5]=+(B[7]+B[8]||"odd"===B[3])):B[3]&&Vt.error(B[0]),B},PSEUDO:function(B){var V,tt=!B[6]&&B[2];return Fr.CHILD.test(B[0])?null:(B[3]?B[2]=B[4]||B[5]||"":tt&&$n.test(tt)&&(V=zr(tt,!0))&&(V=tt.indexOf(")",tt.length-V)-tt.length)&&(B[0]=B[0].slice(0,V),B[2]=tt.slice(0,V)),B.slice(0,3))}},filter:{TAG:function(B){var V=B.replace(Xe,bn).toLowerCase();return"*"===B?function(){return!0}:function(tt){return Et(tt,V)}},CLASS:function(B){var V=Kt[B+" "];return V||(V=new RegExp("(^|"+de+")"+B+"("+de+"|$)"))&&Kt(B,function(tt){return V.test("string"==typeof tt.className&&tt.className||typeof tt.getAttribute<"u"&&tt.getAttribute("class")||"")})},ATTR:function(B,V,tt){return function(nt){var lt=Vt.attr(nt,B);return null==lt?"!="===V:!V||(lt+="","="===V?lt===tt:"!="===V?lt!==tt:"^="===V?tt&&0===lt.indexOf(tt):"*="===V?tt&&-1<lt.indexOf(tt):"$="===V?tt&&lt.slice(-tt.length)===tt:"~="===V?-1<(" "+lt.replace(fe," ")+" ").indexOf(tt):"|="===V&&(lt===tt||lt.slice(0,tt.length+1)===tt+"-"))}},CHILD:function(B,V,tt,nt,lt){var Pt="nth"!==B.slice(0,3),Ct="last"!==B.slice(-4),$t="of-type"===V;return 1===nt&&0===lt?function(Ot){return!!Ot.parentNode}:function(Ot,ge,Bt){var se,ve,le,$e,kn,dn=Pt!==Ct?"nextSibling":"previousSibling",Bn=Ot.parentNode,un=$t&&Ot.nodeName.toLowerCase(),Vn=!Bt&&!$t,_e=!1;if(Bn){if(Pt){for(;dn;){for(le=Ot;le=le[dn];)if($t?Et(le,un):1===le.nodeType)return!1;kn=dn="only"===B&&!kn&&"nextSibling"}return!0}if(kn=[Ct?Bn.firstChild:Bn.lastChild],Ct&&Vn){for(_e=($e=(se=(ve=Bn[ot]||(Bn[ot]={}))[B]||[])[0]===Y&&se[1])&&se[2],le=$e&&Bn.childNodes[$e];le=++$e&&le&&le[dn]||(_e=$e=0)||kn.pop();)if(1===le.nodeType&&++_e&&le===Ot){ve[B]=[Y,$e,_e];break}}else if(Vn&&(_e=$e=(se=(ve=Ot[ot]||(Ot[ot]={}))[B]||[])[0]===Y&&se[1]),!1===_e)for(;(le=++$e&&le&&le[dn]||(_e=$e=0)||kn.pop())&&(!($t?Et(le,un):1===le.nodeType)||!++_e||(Vn&&((ve=le[ot]||(le[ot]={}))[B]=[Y,_e]),le!==Ot)););return(_e-=lt)===nt||_e%nt==0&&0<=_e/nt}}},PSEUDO:function(B,V){var tt,nt=m.pseudos[B]||m.setFilters[B.toLowerCase()]||Vt.error("unsupported pseudo: "+B);return nt[ot]?nt(V):1<nt.length?(tt=[B,B,"",V],m.setFilters.hasOwnProperty(B.toLowerCase())?Ge(function(lt,Pt){for(var Ct,$t=nt(lt,V),Ot=$t.length;Ot--;)lt[Ct=Ke.call(lt,$t[Ot])]=!(Pt[Ct]=$t[Ot])}):function(lt){return nt(lt,0,tt)}):nt}},pseudos:{not:Ge(function(B){var V=[],tt=[],nt=dr(B.replace(fo,"$1"));return nt[ot]?Ge(function(lt,Pt,Ct,$t){for(var Ot,ge=nt(lt,null,$t,[]),Bt=lt.length;Bt--;)(Ot=ge[Bt])&&(lt[Bt]=!(Pt[Bt]=Ot))}):function(lt,Pt,Ct){return V[0]=lt,nt(V,null,Ct,tt),V[0]=null,!tt.pop()}}),has:Ge(function(B){return function(V){return 0<Vt(B,V).length}}),contains:Ge(function(B){return B=B.replace(Xe,bn),function(V){return-1<(V.textContent||x.text(V)).indexOf(B)}}),lang:Ge(function(B){return ls.test(B||"")||Vt.error("unsupported lang: "+B),B=B.replace(Xe,bn).toLowerCase(),function(V){var tt;do{if(tt=z?V.lang:V.getAttribute("xml:lang")||V.getAttribute("lang"))return(tt=tt.toLowerCase())===B||0===tt.indexOf(B+"-")}while((V=V.parentNode)&&1===V.nodeType);return!1}}),target:function(B){var V=gt.location&&gt.location.hash;return V&&V.slice(1)===B.id},root:function(B){return B===D},focus:function(B){return B===function(){try{return _.activeElement}catch{}}()&&_.hasFocus()&&!!(B.type||B.href||~B.tabIndex)},enabled:Hs(!1),disabled:Hs(!0),checked:function(B){return Et(B,"input")&&!!B.checked||Et(B,"option")&&!!B.selected},selected:function(B){return!0===B.selected},empty:function(B){for(B=B.firstChild;B;B=B.nextSibling)if(B.nodeType<6)return!1;return!0},parent:function(B){return!m.pseudos.empty(B)},header:function(B){return Qr.test(B.nodeName)},input:function(B){return Re.test(B.nodeName)},button:function(B){return Et(B,"input")&&"button"===B.type||Et(B,"button")},text:function(B){var V;return Et(B,"input")&&"text"===B.type&&(null==(V=B.getAttribute("type"))||"text"===V.toLowerCase())},first:Dn(function(){return[0]}),last:Dn(function(B,V){return[V-1]}),eq:Dn(function(B,V,tt){return[tt<0?tt+V:tt]}),even:Dn(function(B,V){for(var tt=0;tt<V;tt+=2)B.push(tt);return B}),odd:Dn(function(B,V){for(var tt=1;tt<V;tt+=2)B.push(tt);return B}),lt:Dn(function(B,V,tt){var nt;for(nt=tt<0?tt+V:V<tt?V:tt;0<=--nt;)B.push(nt);return B}),gt:Dn(function(B,V,tt){for(var nt=tt<0?tt+V:tt;++nt<V;)B.push(nt);return B})}}).pseudos.nth=m.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})m.pseudos[d]=jr(d);for(d in{submit:!0,reset:!0})m.pseudos[d]=xr(d);function cs(){}function zr(B,V){var tt,nt,lt,Pt,Ct,$t,Ot,ge=ce[B+" "];if(ge)return V?0:ge.slice(0);for(Ct=B,$t=[],Ot=m.preFilter;Ct;){for(Pt in tt&&!(nt=Pe.exec(Ct))||(nt&&(Ct=Ct.slice(nt[0].length)||Ct),$t.push(lt=[])),tt=!1,(nt=is.exec(Ct))&&(tt=nt.shift(),lt.push({value:tt,type:nt[0].replace(fo," ")}),Ct=Ct.slice(tt.length)),m.filter)!(nt=Fr[Pt].exec(Ct))||Ot[Pt]&&!(nt=Ot[Pt](nt))||(tt=nt.shift(),lt.push({value:tt,type:Pt,matches:nt}),Ct=Ct.slice(tt.length));if(!tt)break}return V?Ct.length:Ct?Vt.error(B):ce(B,$t).slice(0)}function qo(B){for(var V=0,tt=B.length,nt="";V<tt;V++)nt+=B[V].value;return nt}function Ba(B,V,tt){var nt=V.dir,lt=V.next,Pt=lt||nt,Ct=tt&&"parentNode"===Pt,$t=R++;return V.first?function(Ot,ge,Bt){for(;Ot=Ot[nt];)if(1===Ot.nodeType||Ct)return B(Ot,ge,Bt);return!1}:function(Ot,ge,Bt){var se,ve,le=[Y,$t];if(Bt){for(;Ot=Ot[nt];)if((1===Ot.nodeType||Ct)&&B(Ot,ge,Bt))return!0}else for(;Ot=Ot[nt];)if(1===Ot.nodeType||Ct)if(ve=Ot[ot]||(Ot[ot]={}),lt&&Et(Ot,lt))Ot=Ot[nt]||Ot;else{if((se=ve[Pt])&&se[0]===Y&&se[1]===$t)return le[2]=se[2];if((ve[Pt]=le)[2]=B(Ot,ge,Bt))return!0}return!1}}function $o(B){return 1<B.length?function(V,tt,nt){for(var lt=B.length;lt--;)if(!B[lt](V,tt,nt))return!1;return!0}:B[0]}function Us(B,V,tt,nt,lt){for(var Pt,Ct=[],$t=0,Ot=B.length,ge=null!=V;$t<Ot;$t++)(Pt=B[$t])&&(tt&&!tt(Pt,nt,lt)||(Ct.push(Pt),ge&&V.push($t)));return Ct}function La(B,V,tt,nt,lt,Pt){return nt&&!nt[ot]&&(nt=La(nt)),lt&&!lt[ot]&&(lt=La(lt,Pt)),Ge(function(Ct,$t,Ot,ge){var Bt,se,ve,le,$e=[],kn=[],dn=$t.length,Bn=Ct||function(Vn,_e,to){for(var ur=0,qs=_e.length;ur<qs;ur++)Vt(Vn,_e[ur],to);return to}(V||"*",Ot.nodeType?[Ot]:Ot,[]),un=!B||!Ct&&V?Bn:Us(Bn,$e,B,Ot,ge);if(tt?tt(un,le=lt||(Ct?B:dn||nt)?[]:$t,Ot,ge):le=un,nt)for(Bt=Us(le,kn),nt(Bt,[],Ot,ge),se=Bt.length;se--;)(ve=Bt[se])&&(le[kn[se]]=!(un[kn[se]]=ve));if(Ct){if(lt||B){if(lt){for(Bt=[],se=le.length;se--;)(ve=le[se])&&Bt.push(un[se]=ve);lt(null,le=[],Bt,ge)}for(se=le.length;se--;)(ve=le[se])&&-1<(Bt=lt?Ke.call(Ct,ve):$e[se])&&(Ct[Bt]=!($t[Bt]=ve))}}else le=Us(le===$t?le.splice(dn,le.length):le),lt?lt(null,$t,le,ge):Z.apply($t,le)})}function ds(B){for(var V,tt,nt,lt=B.length,Pt=m.relative[B[0].type],Ct=Pt||m.relative[" "],$t=Pt?1:0,Ot=Ba(function(se){return se===V},Ct,!0),ge=Ba(function(se){return-1<Ke.call(V,se)},Ct,!0),Bt=[function(se,ve,le){var $e=!Pt&&(le||ve!=y)||((V=ve).nodeType?Ot(se,ve,le):ge(se,ve,le));return V=null,$e}];$t<lt;$t++)if(tt=m.relative[B[$t].type])Bt=[Ba($o(Bt),tt)];else{if((tt=m.filter[B[$t].type].apply(null,B[$t].matches))[ot]){for(nt=++$t;nt<lt&&!m.relative[B[nt].type];nt++);return La(1<$t&&$o(Bt),1<$t&&qo(B.slice(0,$t-1).concat({value:" "===B[$t-2].type?"*":""})).replace(fo,"$1"),tt,$t<nt&&ds(B.slice($t,nt)),nt<lt&&ds(B=B.slice(nt)),nt<lt&&qo(B))}Bt.push(tt)}return $o(Bt)}function dr(B,V){var tt,nt,lt,Pt,Ct,$t,Ot=[],ge=[],Bt=Qt[B+" "];if(!Bt){for(V||(V=zr(B)),tt=V.length;tt--;)(Bt=ds(V[tt]))[ot]?Ot.push(Bt):ge.push(Bt);(Bt=Qt(B,(nt=ge,Pt=0<(lt=Ot).length,Ct=0<nt.length,$t=function(se,ve,le,$e,kn){var dn,Bn,un,Vn=0,_e="0",to=se&&[],ur=[],qs=y,Ni=se||Ct&&m.find.TAG("*",kn),_i=Y+=null==qs?1:Math.random()||.1,fn=Ni.length;for(kn&&(y=ve==_||ve||kn);_e!==fn&&null!=(dn=Ni[_e]);_e++){if(Ct&&dn){for(Bn=0,ve||dn.ownerDocument==_||(cr(dn),le=!z);un=nt[Bn++];)if(un(dn,ve||_,le)){Z.call($e,dn);break}kn&&(Y=_i)}Pt&&((dn=!un&&dn)&&Vn--,se&&to.push(dn))}if(Vn+=_e,Pt&&_e!==Vn){for(Bn=0;un=lt[Bn++];)un(to,ur,ve,le);if(se){if(0<Vn)for(;_e--;)to[_e]||ur[_e]||(ur[_e]=Zn.call($e));ur=Us(ur)}Z.apply($e,ur),kn&&!se&&0<ur.length&&1<Vn+lt.length&&x.uniqueSort($e)}return kn&&(Y=_i,y=qs),to},Pt?Ge($t):$t))).selector=B}return Bt}function Ei(B,V,tt,nt){var lt,Pt,Ct,$t,Ot,ge="function"==typeof B&&B,Bt=!nt&&zr(B=ge.selector||B);if(tt=tt||[],1===Bt.length){if(2<(Pt=Bt[0]=Bt[0].slice(0)).length&&"ID"===(Ct=Pt[0]).type&&9===V.nodeType&&z&&m.relative[Pt[1].type]){if(!(V=(m.find.ID(Ct.matches[0].replace(Xe,bn),V)||[])[0]))return tt;ge&&(V=V.parentNode),B=B.slice(Pt.shift().value.length)}for(lt=Fr.needsContext.test(B)?0:Pt.length;lt--&&!m.relative[$t=(Ct=Pt[lt]).type];)if((Ot=m.find[$t])&&(nt=Ot(Ct.matches[0].replace(Xe,bn),Je.test(Pt[0].type)&&Zr(V.parentNode)||V))){if(Pt.splice(lt,1),!(B=nt.length&&qo(Pt)))return Z.apply(tt,nt),tt;break}}return(ge||dr(B,Bt))(nt,V,!z,tt,!V||Je.test(B)&&Zr(V.parentNode)||V),tt}cs.prototype=m.filters=m.pseudos,m.setFilters=new cs,Ut.sortStable=ot.split("").sort(ne).join("")===ot,cr(),Ut.sortDetached=Te(function(B){return 1&B.compareDocumentPosition(_.createElement("fieldset"))}),x.find=Vt,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,Vt.compile=dr,Vt.select=Ei,Vt.setDocument=cr,Vt.escape=x.escapeSelector,Vt.getText=x.text,Vt.isXML=x.isXMLDoc,Vt.selectors=x.expr,Vt.support=x.support,Vt.uniqueSort=x.uniqueSort}();var Fn=function(d,m,y){for(var S=[],E=void 0!==y;(d=d[m])&&9!==d.nodeType;)if(1===d.nodeType){if(E&&x(d).is(y))break;S.push(d)}return S},Ce=function(d,m){for(var y=[];d;d=d.nextSibling)1===d.nodeType&&d!==m&&y.push(d);return y},Ae=x.expr.match.needsContext,N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function po(d,m,y){return Dt(m)?x.grep(d,function(S,E){return!!m.call(S,E,S)!==y}):m.nodeType?x.grep(d,function(S){return S===m!==y}):"string"!=typeof m?x.grep(d,function(S){return-1<Ke.call(m,S)!==y}):x.filter(m,d,y)}x.filter=function(d,m,y){var S=m[0];return y&&(d=":not("+d+")"),1===m.length&&1===S.nodeType?x.find.matchesSelector(S,d)?[S]:[]:x.find.matches(d,x.grep(m,function(E){return 1===E.nodeType}))},x.fn.extend({find:function(d){var m,y,S=this.length,E=this;if("string"!=typeof d)return this.pushStack(x(d).filter(function(){for(m=0;m<S;m++)if(x.contains(E[m],this))return!0}));for(y=this.pushStack([]),m=0;m<S;m++)x.find(d,E[m],y);return 1<S?x.uniqueSort(y):y},filter:function(d){return this.pushStack(po(this,d||[],!1))},not:function(d){return this.pushStack(po(this,d||[],!0))},is:function(d){return!!po(this,"string"==typeof d&&Ae.test(d)?x(d):d||[],!1).length}});var wt,te=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(d,m,y){var S,E;if(!d)return this;if(y=y||wt,"string"==typeof d){if(!(S="<"===d[0]&&">"===d[d.length-1]&&3<=d.length?[null,d,null]:te.exec(d))||!S[1]&&m)return!m||m.jquery?(m||y).find(d):this.constructor(m).find(d);if(S[1]){if(x.merge(this,x.parseHTML(S[1],(m=m instanceof x?m[0]:m)&&m.nodeType?m.ownerDocument||m:Zt,!0)),N.test(S[1])&&x.isPlainObject(m))for(S in m)Dt(this[S])?this[S](m[S]):this.attr(S,m[S]);return this}return(E=Zt.getElementById(S[2]))&&(this[0]=E,this.length=1),this}return d.nodeType?(this[0]=d,this.length=1,this):Dt(d)?void 0!==y.ready?y.ready(d):d(x):x.makeArray(d,this)}).prototype=x.fn,wt=x(Zt);var ie=/^(?:parents|prev(?:Until|All))/,Tt={children:!0,contents:!0,next:!0,prev:!0};function ke(d,m){for(;(d=d[m])&&1!==d.nodeType;);return d}x.fn.extend({has:function(d){var m=x(d,this),y=m.length;return this.filter(function(){for(var S=0;S<y;S++)if(x.contains(this,m[S]))return!0})},closest:function(d,m){var y,S=0,E=this.length,_=[],D="string"!=typeof d&&x(d);if(!Ae.test(d))for(;S<E;S++)for(y=this[S];y&&y!==m;y=y.parentNode)if(y.nodeType<11&&(D?-1<D.index(y):1===y.nodeType&&x.find.matchesSelector(y,d))){_.push(y);break}return this.pushStack(1<_.length?x.uniqueSort(_):_)},index:function(d){return d?"string"==typeof d?Ke.call(x(d),this[0]):Ke.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,m){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(d,m))))},addBack:function(d){return this.add(null==d?this.prevObject:this.prevObject.filter(d))}}),x.each({parent:function(d){var m=d.parentNode;return m&&11!==m.nodeType?m:null},parents:function(d){return Fn(d,"parentNode")},parentsUntil:function(d,m,y){return Fn(d,"parentNode",y)},next:function(d){return ke(d,"nextSibling")},prev:function(d){return ke(d,"previousSibling")},nextAll:function(d){return Fn(d,"nextSibling")},prevAll:function(d){return Fn(d,"previousSibling")},nextUntil:function(d,m,y){return Fn(d,"nextSibling",y)},prevUntil:function(d,m,y){return Fn(d,"previousSibling",y)},siblings:function(d){return Ce((d.parentNode||{}).firstChild,d)},children:function(d){return Ce(d.firstChild)},contents:function(d){return null!=d.contentDocument&&It(d.contentDocument)?d.contentDocument:(Et(d,"template")&&(d=d.content||d),x.merge([],d.childNodes))}},function(d,m){x.fn[d]=function(y,S){var E=x.map(this,m,y);return"Until"!==d.slice(-5)&&(S=y),S&&"string"==typeof S&&(E=x.filter(S,E)),1<this.length&&(Tt[d]||x.uniqueSort(E),ie.test(d)&&E.reverse()),this.pushStack(E)}});var oe=/[^\x20\t\r\n\f]+/g;function st(d){return d}function go(d){throw d}function Wr(d,m,y,S){var E;try{d&&Dt(E=d.promise)?E.call(d).done(m).fail(y):d&&Dt(E=d.then)?E.call(d,m,y):m.apply(void 0,[d].slice(S))}catch(_){y.apply(void 0,[_])}}x.Callbacks=function(d){var y;d="string"==typeof d?(y={},x.each(d.match(oe)||[],function(Y,R){y[R]=!0}),y):x.extend({},d);var S,E,_,D,z=[],F=[],K=-1,Z=function(){for(D=D||d.once,_=S=!0;F.length;K=-1)for(E=F.shift();++K<z.length;)!1===z[K].apply(E[0],E[1])&&d.stopOnFalse&&(K=z.length,E=!1);d.memory||(E=!1),S=!1,D&&(z=E?[]:"")},ot={add:function(){return z&&(E&&!S&&(K=z.length-1,F.push(E)),function Y(R){x.each(R,function(Kt,ce){Dt(ce)?d.unique&&ot.has(ce)||z.push(ce):ce&&ce.length&&"string"!==be(ce)&&Y(ce)})}(arguments),E&&!S&&Z()),this},remove:function(){return x.each(arguments,function(Y,R){for(var Kt;-1<(Kt=x.inArray(R,z,Kt));)z.splice(Kt,1),Kt<=K&&K--}),this},has:function(Y){return Y?-1<x.inArray(Y,z):0<z.length},empty:function(){return z&&(z=[]),this},disable:function(){return D=F=[],z=E="",this},disabled:function(){return!z},lock:function(){return D=F=[],E||S||(z=E=""),this},locked:function(){return!!D},fireWith:function(Y,R){return D||(R=[Y,(R=R||[]).slice?R.slice():R],F.push(R),S||Z()),this},fire:function(){return ot.fireWith(this,arguments),this},fired:function(){return!!_}};return ot},x.extend({Deferred:function(d){var m=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],y="pending",S={state:function(){return y},always:function(){return E.done(arguments).fail(arguments),this},catch:function(_){return S.then(null,_)},pipe:function(){var _=arguments;return x.Deferred(function(D){x.each(m,function(z,F){var K=Dt(_[F[4]])&&_[F[4]];E[F[1]](function(){var Z=K&&K.apply(this,arguments);Z&&Dt(Z.promise)?Z.promise().progress(D.notify).done(D.resolve).fail(D.reject):D[F[0]+"With"](this,K?[Z]:arguments)})}),_=null}).promise()},then:function(_,D,z){var F=0;function K(Z,ot,Y,R){return function(){var Kt=this,ce=arguments,Qt=function(){var ne,cn;if(!(Z<F)){if((ne=Y.apply(Kt,ce))===ot.promise())throw new TypeError("Thenable self-resolution");Dt(cn=ne&&("object"==typeof ne||"function"==typeof ne)&&ne.then)?R?cn.call(ne,K(F,ot,st,R),K(F,ot,go,R)):(F++,cn.call(ne,K(F,ot,st,R),K(F,ot,go,R),K(F,ot,st,ot.notifyWith))):(Y!==st&&(Kt=void 0,ce=[ne]),(R||ot.resolveWith)(Kt,ce))}},qe=R?Qt:function(){try{Qt()}catch(ne){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(ne,qe.error),F<=Z+1&&(Y!==go&&(Kt=void 0,ce=[ne]),ot.rejectWith(Kt,ce))}};Z?qe():(x.Deferred.getErrorHook?qe.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(qe.error=x.Deferred.getStackHook()),gt.setTimeout(qe))}}return x.Deferred(function(Z){m[0][3].add(K(0,Z,Dt(z)?z:st,Z.notifyWith)),m[1][3].add(K(0,Z,Dt(_)?_:st)),m[2][3].add(K(0,Z,Dt(D)?D:go))}).promise()},promise:function(_){return null!=_?x.extend(_,S):S}},E={};return x.each(m,function(_,D){var z=D[2],F=D[5];S[D[1]]=z.add,F&&z.add(function(){y=F},m[3-_][2].disable,m[3-_][3].disable,m[0][2].lock,m[0][3].lock),z.add(D[3].fire),E[D[0]]=function(){return E[D[0]+"With"](this===E?void 0:this,arguments),this},E[D[0]+"With"]=z.fireWith}),S.promise(E),d&&d.call(E,E),E},when:function(d){var m=arguments.length,y=m,S=Array(y),E=re.call(arguments),_=x.Deferred(),D=function(z){return function(F){S[z]=this,E[z]=1<arguments.length?re.call(arguments):F,--m||_.resolveWith(S,E)}};if(m<=1&&(Wr(d,_.done(D(y)).resolve,_.reject,!m),"pending"===_.state()||Dt(E[y]&&E[y].then)))return _.then();for(;y--;)Wr(E[y],D(y),_.reject);return _.promise()}});var qt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(d,m){gt.console&&gt.console.warn&&d&&qt.test(d.name)&&gt.console.warn("jQuery.Deferred exception: "+d.message,d.stack,m)},x.readyException=function(d){gt.setTimeout(function(){throw d})};var Po=x.Deferred();function gn(){Zt.removeEventListener("DOMContentLoaded",gn),gt.removeEventListener("load",gn),x.ready()}x.fn.ready=function(d){return Po.then(d).catch(function(m){x.readyException(m)}),this},x.extend({isReady:!1,readyWait:1,ready:function(d){(!0===d?--x.readyWait:x.isReady)||(x.isReady=!0)!==d&&0<--x.readyWait||Po.resolveWith(Zt,[x])}}),x.ready.then=Po.then,"complete"===Zt.readyState||"loading"!==Zt.readyState&&!Zt.documentElement.doScroll?gt.setTimeout(x.ready):(Zt.addEventListener("DOMContentLoaded",gn),gt.addEventListener("load",gn));var Br=function(d,m,y,S,E,_,D){var z=0,F=d.length,K=null==y;if("object"===be(y))for(z in E=!0,y)Br(d,m,z,y[z],!0,_,D);else if(void 0!==S&&(E=!0,Dt(S)||(D=!0),K&&(D?(m.call(d,S),m=null):(K=m,m=function(Z,ot,Y){return K.call(x(Z),Y)})),m))for(;z<F;z++)m(d[z],y,D?S:S.call(d[z],z,m(d[z],y)));return E?d:K?m.call(d):F?m(d[0],y):_},Ue=/^-ms-/,Ds=/-([a-z])/g;function Pl(d,m){return m.toUpperCase()}function en(d){return d.replace(Ue,"ms-").replace(Ds,Pl)}var ar=function(d){return 1===d.nodeType||9===d.nodeType||!+d.nodeType};function Vr(){this.expando=x.expando+Vr.uid++}Vr.uid=1,Vr.prototype={cache:function(d){var m=d[this.expando];return m||(m={},ar(d)&&(d.nodeType?d[this.expando]=m:Object.defineProperty(d,this.expando,{value:m,configurable:!0}))),m},set:function(d,m,y){var S,E=this.cache(d);if("string"==typeof m)E[en(m)]=y;else for(S in m)E[en(S)]=m[S];return E},get:function(d,m){return void 0===m?this.cache(d):d[this.expando]&&d[this.expando][en(m)]},access:function(d,m,y){return void 0===m||m&&"string"==typeof m&&void 0===y?this.get(d,m):(this.set(d,m,y),void 0!==y?y:m)},remove:function(d,m){var y,S=d[this.expando];if(void 0!==S){if(void 0!==m)for((y=(m=Array.isArray(m)?m.map(en):(m=en(m))in S?[m]:m.match(oe)||[]).length);y--;)delete S[m[y]];(void 0===m||x.isEmptyObject(S))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var m=d[this.expando];return void 0!==m&&!x.isEmptyObject(m)}};var Wt=new Vr,xn=new Vr,Mo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wa=/[A-Z]/g;function wn(d,m,y){var S,E;if(void 0===y&&1===d.nodeType)if(S="data-"+m.replace(wa,"-$&").toLowerCase(),"string"==typeof(y=d.getAttribute(S))){try{y="true"===(E=y)||"false"!==E&&("null"===E?null:E===+E+""?+E:Mo.test(E)?JSON.parse(E):E)}catch{}xn.set(d,m,y)}else y=void 0;return y}x.extend({hasData:function(d){return xn.hasData(d)||Wt.hasData(d)},data:function(d,m,y){return xn.access(d,m,y)},removeData:function(d,m){xn.remove(d,m)},_data:function(d,m,y){return Wt.access(d,m,y)},_removeData:function(d,m){Wt.remove(d,m)}}),x.fn.extend({data:function(d,m){var y,S,E,_=this[0],D=_&&_.attributes;if(void 0===d){if(this.length&&(E=xn.get(_),1===_.nodeType&&!Wt.get(_,"hasDataAttrs"))){for(y=D.length;y--;)D[y]&&0===(S=D[y].name).indexOf("data-")&&(S=en(S.slice(5)),wn(_,S,E[S]));Wt.set(_,"hasDataAttrs",!0)}return E}return"object"==typeof d?this.each(function(){xn.set(this,d)}):Br(this,function(z){var F;if(_&&void 0===z)return void 0!==(F=xn.get(_,d))||void 0!==(F=wn(_,d))?F:void 0;this.each(function(){xn.set(this,d,z)})},null,m,1<arguments.length,null,!0)},removeData:function(d){return this.each(function(){xn.remove(this,d)})}}),x.extend({queue:function(d,m,y){var S;if(d)return S=Wt.get(d,m=(m||"fx")+"queue"),y&&(!S||Array.isArray(y)?S=Wt.access(d,m,x.makeArray(y)):S.push(y)),S||[]},dequeue:function(d,m){var y=x.queue(d,m=m||"fx"),S=y.length,E=y.shift(),_=x._queueHooks(d,m);"inprogress"===E&&(E=y.shift(),S--),E&&("fx"===m&&y.unshift("inprogress"),delete _.stop,E.call(d,function(){x.dequeue(d,m)},_)),!S&&_&&_.empty.fire()},_queueHooks:function(d,m){var y=m+"queueHooks";return Wt.get(d,y)||Wt.access(d,y,{empty:x.Callbacks("once memory").add(function(){Wt.remove(d,[m+"queue",y])})})}}),x.fn.extend({queue:function(d,m){var y=2;return"string"!=typeof d&&(m=d,d="fx",y--),arguments.length<y?x.queue(this[0],d):void 0===m?this:this.each(function(){var S=x.queue(this,d,m);x._queueHooks(this,d),"fx"===d&&"inprogress"!==S[0]&&x.dequeue(this,d)})},dequeue:function(d){return this.each(function(){x.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,m){var y,S=1,E=x.Deferred(),_=this,D=this.length,z=function(){--S||E.resolveWith(_,[_])};for("string"!=typeof d&&(m=d,d=void 0),d=d||"fx";D--;)(y=Wt.get(_[D],d+"queueHooks"))&&y.empty&&(S++,y.empty.add(z));return z(),E.promise(m)}});var ho=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,an=new RegExp("^(?:([+-])=|)("+ho+")([a-z%]*)$","i"),jn=["Top","Right","Bottom","Left"],Ye=Zt.documentElement,ts=function(d){return x.contains(d.ownerDocument,d)},we={composed:!0};Ye.getRootNode&&(ts=function(d){return x.contains(d.ownerDocument,d)||d.getRootNode(we)===d.ownerDocument});var Io=function(d,m){return"none"===(d=m||d).style.display||""===d.style.display&&ts(d)&&"none"===x.css(d,"display")};function Ml(d,m,y,S){var E,_,D=20,z=S?function(){return S.cur()}:function(){return x.css(d,m,"")},F=z(),K=y&&y[3]||(x.cssNumber[m]?"":"px"),Z=d.nodeType&&(x.cssNumber[m]||"px"!==K&&+F)&&an.exec(x.css(d,m));if(Z&&Z[3]!==K){for(K=K||Z[3],Z=+(F/=2)||1;D--;)x.style(d,m,Z+K),(1-_)*(1-(_=z()/F||.5))<=0&&(D=0),Z/=_;x.style(d,m,(Z*=2)+K),y=y||[]}return y&&(Z=+Z||+F||0,E=y[1]?Z+(y[1]+1)*y[2]:+y[2],S&&(S.unit=K,S.start=Z,S.end=E)),E}var Sa={};function Fo(d,m){for(var y,S,E,_,D,z,F,K=[],Z=0,ot=d.length;Z<ot;Z++)(S=d[Z]).style&&(y=S.style.display,m?("none"===y&&(K[Z]=Wt.get(S,"display")||null,K[Z]||(S.style.display="")),""===S.style.display&&Io(S)&&(K[Z]=(F=D=_=void 0,D=(E=S).ownerDocument,(F=Sa[z=E.nodeName])||(_=D.body.appendChild(D.createElement(z)),F=x.css(_,"display"),_.parentNode.removeChild(_),"none"===F&&(F="block"),Sa[z]=F)))):"none"!==y&&(K[Z]="none",Wt.set(S,"display",y)));for(Z=0;Z<ot;Z++)null!=K[Z]&&(d[Z].style.display=K[Z]);return d}x.fn.extend({show:function(){return Fo(this,!0)},hide:function(){return Fo(this)},toggle:function(d){return"boolean"==typeof d?d?this.show():this.hide():this.each(function(){Io(this)?x(this).show():x(this).hide()})}});var br,es,jo=/^(?:checkbox|radio)$/i,Se=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ee=/^$|^module$|\/(?:java|ecma)script/i;br=Zt.createDocumentFragment().appendChild(Zt.createElement("div")),(es=Zt.createElement("input")).setAttribute("type","radio"),es.setAttribute("checked","checked"),es.setAttribute("name","t"),br.appendChild(es),Ut.checkClone=br.cloneNode(!0).cloneNode(!0).lastChild.checked,br.innerHTML="<textarea>x</textarea>",Ut.noCloneChecked=!!br.cloneNode(!0).lastChild.defaultValue,br.innerHTML="<option></option>",Ut.option=!!br.lastChild;var hn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Rn(d,m){var y;return y=typeof d.getElementsByTagName<"u"?d.getElementsByTagName(m||"*"):typeof d.querySelectorAll<"u"?d.querySelectorAll(m||"*"):[],void 0===m||m&&Et(d,m)?x.merge([d],y):y}function ka(d,m){for(var y=0,S=d.length;y<S;y++)Wt.set(d[y],"globalEval",!m||Wt.get(m[y],"globalEval"))}hn.tbody=hn.tfoot=hn.colgroup=hn.caption=hn.thead,hn.th=hn.td,Ut.option||(hn.optgroup=hn.option=[1,"<select multiple='multiple'>","</select>"]);var fi=/<|&#?\w+;/;function Bs(d,m,y,S,E){for(var _,D,z,F,K,Z,ot=m.createDocumentFragment(),Y=[],R=0,Kt=d.length;R<Kt;R++)if((_=d[R])||0===_)if("object"===be(_))x.merge(Y,_.nodeType?[_]:_);else if(fi.test(_)){for(D=D||ot.appendChild(m.createElement("div")),z=(Se.exec(_)||["",""])[1].toLowerCase(),D.innerHTML=(F=hn[z]||hn._default)[1]+x.htmlPrefilter(_)+F[2],Z=F[0];Z--;)D=D.lastChild;x.merge(Y,D.childNodes),(D=ot.firstChild).textContent=""}else Y.push(m.createTextNode(_));for(ot.textContent="",R=0;_=Y[R++];)if(S&&-1<x.inArray(_,S))E&&E.push(_);else if(K=ts(_),D=Rn(ot.appendChild(_),"script"),K&&ka(D),y)for(Z=0;_=D[Z++];)ee.test(_.type||"")&&y.push(_);return ot}var Ea=/^([^.]*)(?:\.(.+)|)/;function Lr(){return!0}function Kr(){return!1}function Na(d,m,y,S,E,_){var D,z;if("object"==typeof m){for(z in"string"!=typeof y&&(S=S||y,y=void 0),m)Na(d,z,y,S,m[z],_);return d}if(null==S&&null==E?(E=y,S=y=void 0):null==E&&("string"==typeof y?(E=S,S=void 0):(E=S,S=y,y=void 0)),!1===E)E=Kr;else if(!E)return d;return 1===_&&(D=E,(E=function(F){return x().off(F),D.apply(this,arguments)}).guid=D.guid||(D.guid=x.guid++)),d.each(function(){x.event.add(this,m,E,S,y)})}function Pr(d,m,y){y?(Wt.set(d,m,!1),x.event.add(d,m,{namespace:!1,handler:function(S){var E,_=Wt.get(this,m);if(1&S.isTrigger&&this[m]){if(_)(x.event.special[m]||{}).delegateType&&S.stopPropagation();else if(_=re.call(arguments),Wt.set(this,m,_),this[m](),E=Wt.get(this,m),Wt.set(this,m,!1),_!==E)return S.stopImmediatePropagation(),S.preventDefault(),E}else _&&(Wt.set(this,m,x.event.trigger(_[0],_.slice(1),this)),S.stopPropagation(),S.isImmediatePropagationStopped=Lr)}})):void 0===Wt.get(d,m)&&x.event.add(d,m,Lr)}x.event={global:{},add:function(d,m,y,S,E){var _,D,z,F,K,Z,ot,Y,R,Kt,ce,Qt=Wt.get(d);if(ar(d))for(y.handler&&(y=(_=y).handler,E=_.selector),E&&x.find.matchesSelector(Ye,E),y.guid||(y.guid=x.guid++),(F=Qt.events)||(F=Qt.events=Object.create(null)),(D=Qt.handle)||(D=Qt.handle=function(qe){return typeof x<"u"&&x.event.triggered!==qe.type?x.event.dispatch.apply(d,arguments):void 0}),K=(m=(m||"").match(oe)||[""]).length;K--;)R=ce=(z=Ea.exec(m[K])||[])[1],Kt=(z[2]||"").split(".").sort(),R&&(ot=x.event.special[R]||{},ot=x.event.special[R=(E?ot.delegateType:ot.bindType)||R]||{},Z=x.extend({type:R,origType:ce,data:S,handler:y,guid:y.guid,selector:E,needsContext:E&&x.expr.match.needsContext.test(E),namespace:Kt.join(".")},_),(Y=F[R])||((Y=F[R]=[]).delegateCount=0,ot.setup&&!1!==ot.setup.call(d,S,Kt,D)||d.addEventListener&&d.addEventListener(R,D)),ot.add&&(ot.add.call(d,Z),Z.handler.guid||(Z.handler.guid=y.guid)),E?Y.splice(Y.delegateCount++,0,Z):Y.push(Z),x.event.global[R]=!0)},remove:function(d,m,y,S,E){var _,D,z,F,K,Z,ot,Y,R,Kt,ce,Qt=Wt.hasData(d)&&Wt.get(d);if(Qt&&(F=Qt.events)){for(K=(m=(m||"").match(oe)||[""]).length;K--;)if(R=ce=(z=Ea.exec(m[K])||[])[1],Kt=(z[2]||"").split(".").sort(),R){for(ot=x.event.special[R]||{},Y=F[R=(S?ot.delegateType:ot.bindType)||R]||[],z=z[2]&&new RegExp("(^|\\.)"+Kt.join("\\.(?:.*\\.|)")+"(\\.|$)"),D=_=Y.length;_--;)Z=Y[_],!E&&ce!==Z.origType||y&&y.guid!==Z.guid||z&&!z.test(Z.namespace)||S&&S!==Z.selector&&("**"!==S||!Z.selector)||(Y.splice(_,1),Z.selector&&Y.delegateCount--,ot.remove&&ot.remove.call(d,Z));D&&!Y.length&&(ot.teardown&&!1!==ot.teardown.call(d,Kt,Qt.handle)||x.removeEvent(d,R,Qt.handle),delete F[R])}else for(R in F)x.event.remove(d,R+m[K],y,S,!0);x.isEmptyObject(F)&&Wt.remove(d,"handle events")}},dispatch:function(d){var m,y,S,E,_,D,z=new Array(arguments.length),F=x.event.fix(d),K=(Wt.get(this,"events")||Object.create(null))[F.type]||[],Z=x.event.special[F.type]||{};for(z[0]=F,m=1;m<arguments.length;m++)z[m]=arguments[m];if(F.delegateTarget=this,!Z.preDispatch||!1!==Z.preDispatch.call(this,F)){for(D=x.event.handlers.call(this,F,K),m=0;(E=D[m++])&&!F.isPropagationStopped();)for(F.currentTarget=E.elem,y=0;(_=E.handlers[y++])&&!F.isImmediatePropagationStopped();)F.rnamespace&&!1!==_.namespace&&!F.rnamespace.test(_.namespace)||(F.handleObj=_,F.data=_.data,void 0!==(S=((x.event.special[_.origType]||{}).handle||_.handler).apply(E.elem,z))&&!1===(F.result=S)&&(F.preventDefault(),F.stopPropagation()));return Z.postDispatch&&Z.postDispatch.call(this,F),F.result}},handlers:function(d,m){var y,S,E,_,D,z=[],F=m.delegateCount,K=d.target;if(F&&K.nodeType&&!("click"===d.type&&1<=d.button))for(;K!==this;K=K.parentNode||this)if(1===K.nodeType&&("click"!==d.type||!0!==K.disabled)){for(_=[],D={},y=0;y<F;y++)void 0===D[E=(S=m[y]).selector+" "]&&(D[E]=S.needsContext?-1<x(E,this).index(K):x.find(E,this,null,[K]).length),D[E]&&_.push(S);_.length&&z.push({elem:K,handlers:_})}return K=this,F<m.length&&z.push({elem:K,handlers:m.slice(F)}),z},addProp:function(d,m){Object.defineProperty(x.Event.prototype,d,{enumerable:!0,configurable:!0,get:Dt(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(y){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(d){return d[x.expando]?d:new x.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var m=this||d;return jo.test(m.type)&&m.click&&Et(m,"input")&&Pr(m,"click",!0),!1},trigger:function(d){var m=this||d;return jo.test(m.type)&&m.click&&Et(m,"input")&&Pr(m,"click"),!0},_default:function(d){var m=d.target;return jo.test(m.type)&&m.click&&Et(m,"input")&&Wt.get(m,"click")||Et(m,"a")}},beforeunload:{postDispatch:function(d){void 0!==d.result&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}},x.removeEvent=function(d,m,y){d.removeEventListener&&d.removeEventListener(m,y)},x.Event=function(d,m){if(!(this instanceof x.Event))return new x.Event(d,m);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||void 0===d.defaultPrevented&&!1===d.returnValue?Lr:Kr,this.target=d.target&&3===d.target.nodeType?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,m&&x.extend(this,m),this.timeStamp=d&&d.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Kr,isPropagationStopped:Kr,isImmediatePropagationStopped:Kr,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=Lr,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=Lr,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=Lr,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(d,m){function y(S){if(Zt.documentMode){var E=Wt.get(this,"handle"),_=x.event.fix(S);_.type="focusin"===S.type?"focus":"blur",_.isSimulated=!0,E(S),_.target===_.currentTarget&&E(_)}else x.event.simulate(m,S.target,x.event.fix(S))}x.event.special[d]={setup:function(){var S;if(Pr(this,d,!0),!Zt.documentMode)return!1;(S=Wt.get(this,m))||this.addEventListener(m,y),Wt.set(this,m,(S||0)+1)},trigger:function(){return Pr(this,d),!0},teardown:function(){var S;if(!Zt.documentMode)return!1;(S=Wt.get(this,m)-1)?Wt.set(this,m,S):(this.removeEventListener(m,y),Wt.remove(this,m))},_default:function(S){return Wt.get(S.target,d)},delegateType:m},x.event.special[m]={setup:function(){var S=this.ownerDocument||this.document||this,E=Zt.documentMode?this:S,_=Wt.get(E,m);_||(Zt.documentMode?this.addEventListener(m,y):S.addEventListener(d,y,!0)),Wt.set(E,m,(_||0)+1)},teardown:function(){var S=this.ownerDocument||this.document||this,E=Zt.documentMode?this:S,_=Wt.get(E,m)-1;_?Wt.set(E,m,_):(Zt.documentMode?this.removeEventListener(m,y):S.removeEventListener(d,y,!0),Wt.remove(E,m))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,m){x.event.special[d]={delegateType:m,bindType:m,handle:function(y){var S,E=y.relatedTarget,_=y.handleObj;return E&&(E===this||x.contains(this,E))||(y.type=_.origType,S=_.handler.apply(this,arguments),y.type=m),S}}}),x.fn.extend({on:function(d,m,y,S){return Na(this,d,m,y,S)},one:function(d,m,y,S){return Na(this,d,m,y,S,1)},off:function(d,m,y){var S,E;if(d&&d.preventDefault&&d.handleObj)return S=d.handleObj,x(d.delegateTarget).off(S.namespace?S.origType+"."+S.namespace:S.origType,S.selector,S.handler),this;if("object"==typeof d){for(E in d)this.off(E,m,d[E]);return this}return!1!==m&&"function"!=typeof m||(y=m,m=void 0),!1===y&&(y=Kr),this.each(function(){x.event.remove(this,d,y,m)})}});var zo=/<script|<style|<link/i,Il=/checked\s*(?:[^=]|=\s*.checked.)/i,mi=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ns(d,m){return Et(d,"table")&&Et(11!==m.nodeType?m:m.firstChild,"tr")&&x(d).children("tbody")[0]||d}function Fl(d){return d.type=(null!==d.getAttribute("type"))+"/"+d.type,d}function jl(d){return"true/"===(d.type||"").slice(0,5)?d.type=d.type.slice(5):d.removeAttribute("type"),d}function pi(d,m){var y,S,E,_,D,z;if(1===m.nodeType){if(Wt.hasData(d)&&(z=Wt.get(d).events))for(E in Wt.remove(m,"handle events"),z)for(y=0,S=z[E].length;y<S;y++)x.event.add(m,E,z[E][y]);xn.hasData(d)&&(_=xn.access(d),D=x.extend({},_),xn.set(m,D))}}function Fe(d,m,y,S){m=Ie(m);var E,_,D,z,F,K,Z=0,ot=d.length,Y=ot-1,R=m[0],Kt=Dt(R);if(Kt||1<ot&&"string"==typeof R&&!Ut.checkClone&&Il.test(R))return d.each(function(ce){var Qt=d.eq(ce);Kt&&(m[0]=R.call(this,ce,Qt.html())),Fe(Qt,m,y,S)});if(ot&&(_=(E=Bs(m,d[0].ownerDocument,!1,d,S)).firstChild,1===E.childNodes.length&&(E=_),_||S)){for(z=(D=x.map(Rn(E,"script"),Fl)).length;Z<ot;Z++)F=E,Z!==Y&&(F=x.clone(F,!0,!0),z&&x.merge(D,Rn(F,"script"))),y.call(d[Z],F,Z);if(z)for(K=D[D.length-1].ownerDocument,x.map(D,jl),Z=0;Z<z;Z++)ee.test((F=D[Z]).type||"")&&!Wt.access(F,"globalEval")&&x.contains(K,F)&&(F.src&&"module"!==(F.type||"").toLowerCase()?x._evalUrl&&!F.noModule&&x._evalUrl(F.src,{nonce:F.nonce||F.getAttribute("nonce")},K):Be(F.textContent.replace(mi,""),F,K))}return d}function Qe(d,m,y){for(var S,E=m?x.filter(m,d):d,_=0;null!=(S=E[_]);_++)y||1!==S.nodeType||x.cleanData(Rn(S)),S.parentNode&&(y&&ts(S)&&ka(Rn(S,"script")),S.parentNode.removeChild(S));return d}x.extend({htmlPrefilter:function(d){return d},clone:function(d,m,y){var S,E,_,D,z,F,K,Z=d.cloneNode(!0),ot=ts(d);if(!(Ut.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||x.isXMLDoc(d)))for(D=Rn(Z),S=0,E=(_=Rn(d)).length;S<E;S++)z=_[S],"input"===(K=(F=D[S]).nodeName.toLowerCase())&&jo.test(z.type)?F.checked=z.checked:"input"!==K&&"textarea"!==K||(F.defaultValue=z.defaultValue);if(m)if(y)for(_=_||Rn(d),D=D||Rn(Z),S=0,E=_.length;S<E;S++)pi(_[S],D[S]);else pi(d,Z);return 0<(D=Rn(Z,"script")).length&&ka(D,!ot&&Rn(d,"script")),Z},cleanData:function(d){for(var m,y,S,E=x.event.special,_=0;void 0!==(y=d[_]);_++)if(ar(y)){if(m=y[Wt.expando]){if(m.events)for(S in m.events)E[S]?x.event.remove(y,S):x.removeEvent(y,S,m.handle);y[Wt.expando]=void 0}y[xn.expando]&&(y[xn.expando]=void 0)}}}),x.fn.extend({detach:function(d){return Qe(this,d,!0)},remove:function(d){return Qe(this,d)},text:function(d){return Br(this,function(m){return void 0===m?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=m)})},null,d,arguments.length)},append:function(){return Fe(this,arguments,function(d){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ns(this,d).appendChild(d)})},prepend:function(){return Fe(this,arguments,function(d){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var m=ns(this,d);m.insertBefore(d,m.firstChild)}})},before:function(){return Fe(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return Fe(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,m=0;null!=(d=this[m]);m++)1===d.nodeType&&(x.cleanData(Rn(d,!1)),d.textContent="");return this},clone:function(d,m){return d=null!=d&&d,m=m??d,this.map(function(){return x.clone(this,d,m)})},html:function(d){return Br(this,function(m){var y=this[0]||{},S=0,E=this.length;if(void 0===m&&1===y.nodeType)return y.innerHTML;if("string"==typeof m&&!zo.test(m)&&!hn[(Se.exec(m)||["",""])[1].toLowerCase()]){m=x.htmlPrefilter(m);try{for(;S<E;S++)1===(y=this[S]||{}).nodeType&&(x.cleanData(Rn(y,!1)),y.innerHTML=m);y=0}catch{}}y&&this.empty().append(m)},null,d,arguments.length)},replaceWith:function(){var d=[];return Fe(this,arguments,function(m){var y=this.parentNode;x.inArray(this,d)<0&&(x.cleanData(Rn(this)),y&&y.replaceChild(m,this))},d)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,m){x.fn[d]=function(y){for(var S,E=[],_=x(y),D=_.length-1,z=0;z<=D;z++)S=z===D?this:this.clone(!0),x(_[z])[m](S),yn.apply(E,S.get());return this.pushStack(E)}});var _a=new RegExp("^("+ho+")(?!px)[a-z%]+$","i"),Ls=/^--/,Xr=function(d){var m=d.ownerDocument.defaultView;return m&&m.opener||(m=gt),m.getComputedStyle(d)},zl=function(d,m,y){var S,E,_={};for(E in m)_[E]=d.style[E],d.style[E]=m[E];for(E in S=y.call(d),m)d.style[E]=_[E];return S},Hl=new RegExp(jn.join("|"),"i");function zn(d,m,y){var S,E,_,D,z=Ls.test(m),F=d.style;return(y=y||Xr(d))&&(D=y.getPropertyValue(m)||y[m],z&&D&&(D=D.replace(fo,"$1")||void 0),""!==D||ts(d)||(D=x.style(d,m)),!Ut.pixelBoxStyles()&&_a.test(D)&&Hl.test(m)&&(S=F.width,E=F.minWidth,_=F.maxWidth,F.minWidth=F.maxWidth=F.width=D,D=y.width,F.width=S,F.minWidth=E,F.maxWidth=_)),void 0!==D?D+"":D}function rs(d,m){return{get:function(){if(!d())return(this.get=m).apply(this,arguments);delete this.get}}}!function(){function d(){if(K){F.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ye.appendChild(F).appendChild(K);var Z=gt.getComputedStyle(K);y="1%"!==Z.top,z=12===m(Z.marginLeft),K.style.right="60%",_=36===m(Z.right),S=36===m(Z.width),K.style.position="absolute",E=12===m(K.offsetWidth/3),Ye.removeChild(F),K=null}}function m(Z){return Math.round(parseFloat(Z))}var y,S,E,_,D,z,F=Zt.createElement("div"),K=Zt.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",Ut.clearCloneStyle="content-box"===K.style.backgroundClip,x.extend(Ut,{boxSizingReliable:function(){return d(),S},pixelBoxStyles:function(){return d(),_},pixelPosition:function(){return d(),y},reliableMarginLeft:function(){return d(),z},scrollboxSize:function(){return d(),E},reliableTrDimensions:function(){var Z,ot,Y,R;return null==D&&(Z=Zt.createElement("table"),ot=Zt.createElement("tr"),Y=Zt.createElement("div"),Z.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ot.style.cssText="border:1px solid",ot.style.height="1px",Y.style.height="9px",Y.style.display="block",Ye.appendChild(Z).appendChild(ot).appendChild(Y),R=gt.getComputedStyle(ot),D=parseInt(R.height,10)+parseInt(R.borderTopWidth,10)+parseInt(R.borderBottomWidth,10)===ot.offsetHeight,Ye.removeChild(Z)),D}}))}();var Ps=["Webkit","Moz","ms"],Aa=Zt.createElement("div").style,Mr={};function gi(d){return x.cssProps[d]||Mr[d]||(d in Aa?d:Mr[d]=function(y){for(var S=y[0].toUpperCase()+y.slice(1),E=Ps.length;E--;)if((y=Ps[E]+S)in Aa)return y}(d)||d)}var Gd=/^(none|table(?!-c[ea]).+)/,Ul={position:"absolute",visibility:"hidden",display:"block"},hi={letterSpacing:"0",fontWeight:"400"};function bi(d,m,y){var S=an.exec(m);return S?Math.max(0,S[2]-(y||0))+(S[3]||"px"):m}function Ra(d,m,y,S,E,_){var D="width"===m?1:0,z=0,F=0,K=0;if(y===(S?"border":"content"))return 0;for(;D<4;D+=2)"margin"===y&&(K+=x.css(d,y+jn[D],!0,E)),S?("content"===y&&(F-=x.css(d,"padding"+jn[D],!0,E)),"margin"!==y&&(F-=x.css(d,"border"+jn[D]+"Width",!0,E))):(F+=x.css(d,"padding"+jn[D],!0,E),"padding"!==y?F+=x.css(d,"border"+jn[D]+"Width",!0,E):z+=x.css(d,"border"+jn[D]+"Width",!0,E));return!S&&0<=_&&(F+=Math.max(0,Math.ceil(d["offset"+m[0].toUpperCase()+m.slice(1)]-_-F-z-.5))||0),F+K}function vi(d,m,y){var S=Xr(d),E=(!Ut.boxSizingReliable()||y)&&"border-box"===x.css(d,"boxSizing",!1,S),_=E,D=zn(d,m,S),z="offset"+m[0].toUpperCase()+m.slice(1);if(_a.test(D)){if(!y)return D;D="auto"}return(!Ut.boxSizingReliable()&&E||!Ut.reliableTrDimensions()&&Et(d,"tr")||"auto"===D||!parseFloat(D)&&"inline"===x.css(d,"display",!1,S))&&d.getClientRects().length&&(E="border-box"===x.css(d,"boxSizing",!1,S),(_=z in d)&&(D=d[z])),(D=parseFloat(D)||0)+Ra(d,m,y||(E?"border":"content"),_,S,D)+"px"}function ir(d,m,y,S,E){return new ir.prototype.init(d,m,y,S,E)}x.extend({cssHooks:{opacity:{get:function(d,m){if(m){var y=zn(d,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,m,y,S){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var E,_,D,z=en(m),F=Ls.test(m),K=d.style;if(F||(m=gi(z)),D=x.cssHooks[m]||x.cssHooks[z],void 0===y)return D&&"get"in D&&void 0!==(E=D.get(d,!1,S))?E:K[m];"string"==(_=typeof y)&&(E=an.exec(y))&&E[1]&&(y=Ml(d,m,E),_="number"),null!=y&&y==y&&("number"!==_||F||(y+=E&&E[3]||(x.cssNumber[z]?"":"px")),Ut.clearCloneStyle||""!==y||0!==m.indexOf("background")||(K[m]="inherit"),D&&"set"in D&&void 0===(y=D.set(d,y,S))||(F?K.setProperty(m,y):K[m]=y))}},css:function(d,m,y,S){var E,_,D,z=en(m);return Ls.test(m)||(m=gi(z)),(D=x.cssHooks[m]||x.cssHooks[z])&&"get"in D&&(E=D.get(d,!0,y)),void 0===E&&(E=zn(d,m,S)),"normal"===E&&m in hi&&(E=hi[m]),""===y||y?(_=parseFloat(E),!0===y||isFinite(_)?_||0:E):E}}),x.each(["height","width"],function(d,m){x.cssHooks[m]={get:function(y,S,E){if(S)return!Gd.test(x.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?vi(y,m,E):zl(y,Ul,function(){return vi(y,m,E)})},set:function(y,S,E){var _,D=Xr(y),z=!Ut.scrollboxSize()&&"absolute"===D.position,F=(z||E)&&"border-box"===x.css(y,"boxSizing",!1,D),K=E?Ra(y,m,E,F,D):0;return F&&z&&(K-=Math.ceil(y["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(D[m])-Ra(y,m,"border",!1,D)-.5)),K&&(_=an.exec(S))&&"px"!==(_[3]||"px")&&(y.style[m]=S,S=x.css(y,m)),bi(0,S,K)}}}),x.cssHooks.marginLeft=rs(Ut.reliableMarginLeft,function(d,m){if(m)return(parseFloat(zn(d,"marginLeft"))||d.getBoundingClientRect().left-zl(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(d,m){x.cssHooks[d+m]={expand:function(y){for(var S=0,E={},_="string"==typeof y?y.split(" "):[y];S<4;S++)E[d+jn[S]+m]=_[S]||_[S-2]||_[0];return E}},"margin"!==d&&(x.cssHooks[d+m].set=bi)}),x.fn.extend({css:function(d,m){return Br(this,function(y,S,E){var _,D,z={},F=0;if(Array.isArray(S)){for(_=Xr(y),D=S.length;F<D;F++)z[S[F]]=x.css(y,S[F],!1,_);return z}return void 0!==E?x.style(y,S,E):x.css(y,S)},d,m,1<arguments.length)}}),((x.Tween=ir).prototype={constructor:ir,init:function(d,m,y,S,E,_){this.elem=d,this.prop=y,this.easing=E||x.easing._default,this.options=m,this.start=this.now=this.cur(),this.end=S,this.unit=_||(x.cssNumber[y]?"":"px")},cur:function(){var d=ir.propHooks[this.prop];return d&&d.get?d.get(this):ir.propHooks._default.get(this)},run:function(d){var m,y=ir.propHooks[this.prop];return this.pos=m=this.options.duration?x.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):d,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):ir.propHooks._default.set(this),this}}).init.prototype=ir.prototype,(ir.propHooks={_default:{get:function(d){var m;return 1!==d.elem.nodeType||null!=d.elem[d.prop]&&null==d.elem.style[d.prop]?d.elem[d.prop]:(m=x.css(d.elem,d.prop,""))&&"auto"!==m?m:0},set:function(d){x.fx.step[d.prop]?x.fx.step[d.prop](d):1!==d.elem.nodeType||!x.cssHooks[d.prop]&&null==d.elem.style[gi(d.prop)]?d.elem[d.prop]=d.now:x.style(d.elem,d.prop,d.now+d.unit)}}}).scrollTop=ir.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},x.easing={linear:function(d){return d},swing:function(d){return.5-Math.cos(d*Math.PI)/2},_default:"swing"},x.fx=ir.prototype.init,x.fx.step={};var Ho,Ta,os,yi,ql=/^(?:toggle|show|hide)$/,$l=/queueHooks$/;function Oa(){Ta&&(!1===Zt.hidden&&gt.requestAnimationFrame?gt.requestAnimationFrame(Oa):gt.setTimeout(Oa,x.fx.interval),x.fx.tick())}function Ci(){return gt.setTimeout(function(){Ho=void 0}),Ho=Date.now()}function Ms(d,m){var y,S=0,E={height:d};for(m=m?1:0;S<4;S+=2-m)E["margin"+(y=jn[S])]=E["padding"+y]=d;return m&&(E.opacity=E.width=d),E}function xi(d,m,y){for(var S,E=(lr.tweeners[m]||[]).concat(lr.tweeners["*"]),_=0,D=E.length;_<D;_++)if(S=E[_].call(y,m,d))return S}function lr(d,m,y){var S,E,_=0,D=lr.prefilters.length,z=x.Deferred().always(function(){delete F.elem}),F=function(){if(E)return!1;for(var ot=Ho||Ci(),Y=Math.max(0,K.startTime+K.duration-ot),R=1-(Y/K.duration||0),Kt=0,ce=K.tweens.length;Kt<ce;Kt++)K.tweens[Kt].run(R);return z.notifyWith(d,[K,R,Y]),R<1&&ce?Y:(ce||z.notifyWith(d,[K,1,0]),z.resolveWith(d,[K]),!1)},K=z.promise({elem:d,props:x.extend({},m),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},y),originalProperties:m,originalOptions:y,startTime:Ho||Ci(),duration:y.duration,tweens:[],createTween:function(ot,Y){var R=x.Tween(d,K.opts,ot,Y,K.opts.specialEasing[ot]||K.opts.easing);return K.tweens.push(R),R},stop:function(ot){var Y=0,R=ot?K.tweens.length:0;if(E)return this;for(E=!0;Y<R;Y++)K.tweens[Y].run(1);return ot?(z.notifyWith(d,[K,1,0]),z.resolveWith(d,[K,ot])):z.rejectWith(d,[K,ot]),this}}),Z=K.props;for(function(ot,Y){var R,Kt,ce,Qt,qe;for(R in ot)if(ce=Y[Kt=en(R)],Qt=ot[R],Array.isArray(Qt)&&(ce=Qt[1],Qt=ot[R]=Qt[0]),R!==Kt&&(ot[Kt]=Qt,delete ot[R]),(qe=x.cssHooks[Kt])&&"expand"in qe)for(R in Qt=qe.expand(Qt),delete ot[Kt],Qt)R in ot||(ot[R]=Qt[R],Y[R]=ce);else Y[Kt]=ce}(Z,K.opts.specialEasing);_<D;_++)if(S=lr.prefilters[_].call(K,d,Z,K.opts))return Dt(S.stop)&&(x._queueHooks(K.elem,K.opts.queue).stop=S.stop.bind(S)),S;return x.map(Z,xi,K),Dt(K.opts.start)&&K.opts.start.call(d,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),x.fx.timer(x.extend(F,{elem:d,anim:K,queue:K.opts.queue})),K}x.Animation=x.extend(lr,{tweeners:{"*":[function(d,m){var y=this.createTween(d,m);return Ml(y.elem,d,an.exec(m),y),y}]},tweener:function(d,m){Dt(d)?(m=d,d=["*"]):d=d.match(oe);for(var y,S=0,E=d.length;S<E;S++)(lr.tweeners[y=d[S]]=lr.tweeners[y]||[]).unshift(m)},prefilters:[function(d,m,y){var S,E,_,D,z,F,K,Z,ot="width"in m||"height"in m,Y=this,R={},Kt=d.style,ce=d.nodeType&&Io(d),Qt=Wt.get(d,"fxshow");for(S in y.queue||(null==(D=x._queueHooks(d,"fx")).unqueued&&(D.unqueued=0,z=D.empty.fire,D.empty.fire=function(){D.unqueued||z()}),D.unqueued++,Y.always(function(){Y.always(function(){D.unqueued--,x.queue(d,"fx").length||D.empty.fire()})})),m)if(ql.test(E=m[S])){if(delete m[S],_=_||"toggle"===E,E===(ce?"hide":"show")){if("show"!==E||!Qt||void 0===Qt[S])continue;ce=!0}R[S]=Qt&&Qt[S]||x.style(d,S)}if((F=!x.isEmptyObject(m))||!x.isEmptyObject(R))for(S in ot&&1===d.nodeType&&(y.overflow=[Kt.overflow,Kt.overflowX,Kt.overflowY],null==(K=Qt&&Qt.display)&&(K=Wt.get(d,"display")),"none"===(Z=x.css(d,"display"))&&(K?Z=K:(Fo([d],!0),K=d.style.display||K,Z=x.css(d,"display"),Fo([d]))),("inline"===Z||"inline-block"===Z&&null!=K)&&"none"===x.css(d,"float")&&(F||(Y.done(function(){Kt.display=K}),null==K&&(K="none"===(Z=Kt.display)?"":Z)),Kt.display="inline-block")),y.overflow&&(Kt.overflow="hidden",Y.always(function(){Kt.overflow=y.overflow[0],Kt.overflowX=y.overflow[1],Kt.overflowY=y.overflow[2]})),F=!1,R)F||(Qt?"hidden"in Qt&&(ce=Qt.hidden):Qt=Wt.access(d,"fxshow",{display:K}),_&&(Qt.hidden=!ce),ce&&Fo([d],!0),Y.done(function(){for(S in ce||Fo([d]),Wt.remove(d,"fxshow"),R)x.style(d,S,R[S])})),F=xi(ce?Qt[S]:0,S,Y),S in Qt||(Qt[S]=F.start,ce&&(F.end=F.start,F.start=0))}],prefilter:function(d,m){m?lr.prefilters.unshift(d):lr.prefilters.push(d)}}),x.speed=function(d,m,y){var S=d&&"object"==typeof d?x.extend({},d):{complete:y||!y&&m||Dt(d)&&d,duration:d,easing:y&&m||m&&!Dt(m)&&m};return x.fx.off?S.duration=0:"number"!=typeof S.duration&&(S.duration=S.duration in x.fx.speeds?x.fx.speeds[S.duration]:x.fx.speeds._default),null!=S.queue&&!0!==S.queue||(S.queue="fx"),S.old=S.complete,S.complete=function(){Dt(S.old)&&S.old.call(this),S.queue&&x.dequeue(this,S.queue)},S},x.fn.extend({fadeTo:function(d,m,y,S){return this.filter(Io).css("opacity",0).show().end().animate({opacity:m},d,y,S)},animate:function(d,m,y,S){var E=x.isEmptyObject(d),_=x.speed(m,y,S),D=function(){var z=lr(this,x.extend({},d),_);(E||Wt.get(this,"finish"))&&z.stop(!0)};return D.finish=D,E||!1===_.queue?this.each(D):this.queue(_.queue,D)},stop:function(d,m,y){var S=function(E){var _=E.stop;delete E.stop,_(y)};return"string"!=typeof d&&(y=m,m=d,d=void 0),m&&this.queue(d||"fx",[]),this.each(function(){var E=!0,_=null!=d&&d+"queueHooks",D=x.timers,z=Wt.get(this);if(_)z[_]&&z[_].stop&&S(z[_]);else for(_ in z)z[_]&&z[_].stop&&$l.test(_)&&S(z[_]);for(_=D.length;_--;)D[_].elem!==this||null!=d&&D[_].queue!==d||(D[_].anim.stop(y),E=!1,D.splice(_,1));!E&&y||x.dequeue(this,d)})},finish:function(d){return!1!==d&&(d=d||"fx"),this.each(function(){var m,y=Wt.get(this),S=y[d+"queue"],E=y[d+"queueHooks"],_=x.timers,D=S?S.length:0;for(y.finish=!0,x.queue(this,d,[]),E&&E.stop&&E.stop.call(this,!0),m=_.length;m--;)_[m].elem===this&&_[m].queue===d&&(_[m].anim.stop(!0),_.splice(m,1));for(m=0;m<D;m++)S[m]&&S[m].finish&&S[m].finish.call(this);delete y.finish})}}),x.each(["toggle","show","hide"],function(d,m){var y=x.fn[m];x.fn[m]=function(S,E,_){return null==S||"boolean"==typeof S?y.apply(this,arguments):this.animate(Ms(m,!0),S,E,_)}}),x.each({slideDown:Ms("show"),slideUp:Ms("hide"),slideToggle:Ms("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,m){x.fn[d]=function(y,S,E){return this.animate(m,y,S,E)}}),x.timers=[],x.fx.tick=function(){var d,m=0,y=x.timers;for(Ho=Date.now();m<y.length;m++)(d=y[m])()||y[m]!==d||y.splice(m--,1);y.length||x.fx.stop(),Ho=void 0},x.fx.timer=function(d){x.timers.push(d),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Ta||(Ta=!0,Oa())},x.fx.stop=function(){Ta=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(d,m){return d=x.fx&&x.fx.speeds[d]||d,this.queue(m=m||"fx",function(y,S){var E=gt.setTimeout(y,d);S.stop=function(){gt.clearTimeout(E)}})},os=Zt.createElement("input"),yi=Zt.createElement("select").appendChild(Zt.createElement("option")),os.type="checkbox",Ut.checkOn=""!==os.value,Ut.optSelected=yi.selected,(os=Zt.createElement("input")).value="t",os.type="radio",Ut.radioValue="t"===os.value;var Wl,Is=x.expr.attrHandle;x.fn.extend({attr:function(d,m){return Br(this,x.attr,d,m,1<arguments.length)},removeAttr:function(d){return this.each(function(){x.removeAttr(this,d)})}}),x.extend({attr:function(d,m,y){var S,E,_=d.nodeType;if(3!==_&&8!==_&&2!==_)return typeof d.getAttribute>"u"?x.prop(d,m,y):(1===_&&x.isXMLDoc(d)||(E=x.attrHooks[m.toLowerCase()]||(x.expr.match.bool.test(m)?Wl:void 0)),void 0!==y?null===y?void x.removeAttr(d,m):E&&"set"in E&&void 0!==(S=E.set(d,y,m))?S:(d.setAttribute(m,y+""),y):E&&"get"in E&&null!==(S=E.get(d,m))?S:null==(S=x.find.attr(d,m))?void 0:S)},attrHooks:{type:{set:function(d,m){if(!Ut.radioValue&&"radio"===m&&Et(d,"input")){var y=d.value;return d.setAttribute("type",m),y&&(d.value=y),m}}}},removeAttr:function(d,m){var y,S=0,E=m&&m.match(oe);if(E&&1===d.nodeType)for(;y=E[S++];)d.removeAttribute(y)}}),Wl={set:function(d,m,y){return!1===m?x.removeAttr(d,y):d.setAttribute(y,y),y}},x.each(x.expr.match.bool.source.match(/\w+/g),function(d,m){var y=Is[m]||x.find.attr;Is[m]=function(S,E,_){var D,z,F=E.toLowerCase();return _||(z=Is[F],Is[F]=D,D=null!=y(S,E,_)?F:null,Is[F]=z),D}});var Yd=/^(?:input|select|textarea|button)$/i,Qd=/^(?:a|area)$/i;function Hn(d){return(d.match(oe)||[]).join(" ")}function Uo(d){return d.getAttribute&&d.getAttribute("class")||""}function Fs(d){return Array.isArray(d)?d:"string"==typeof d&&d.match(oe)||[]}x.fn.extend({prop:function(d,m){return Br(this,x.prop,d,m,1<arguments.length)},removeProp:function(d){return this.each(function(){delete this[x.propFix[d]||d]})}}),x.extend({prop:function(d,m,y){var S,E,_=d.nodeType;if(3!==_&&8!==_&&2!==_)return 1===_&&x.isXMLDoc(d)||(E=x.propHooks[m=x.propFix[m]||m]),void 0!==y?E&&"set"in E&&void 0!==(S=E.set(d,y,m))?S:d[m]=y:E&&"get"in E&&null!==(S=E.get(d,m))?S:d[m]},propHooks:{tabIndex:{get:function(d){var m=x.find.attr(d,"tabindex");return m?parseInt(m,10):Yd.test(d.nodeName)||Qd.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Ut.optSelected||(x.propHooks.selected={get:function(d){return null},set:function(d){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(d){var m,y,S,E,_,D;return Dt(d)?this.each(function(z){x(this).addClass(d.call(this,z,Uo(this)))}):(m=Fs(d)).length?this.each(function(){if(S=Uo(this),y=1===this.nodeType&&" "+Hn(S)+" "){for(_=0;_<m.length;_++)y.indexOf(" "+(E=m[_])+" ")<0&&(y+=E+" ");D=Hn(y),S!==D&&this.setAttribute("class",D)}}):this},removeClass:function(d){var m,y,S,E,_,D;return Dt(d)?this.each(function(z){x(this).removeClass(d.call(this,z,Uo(this)))}):arguments.length?(m=Fs(d)).length?this.each(function(){if(S=Uo(this),y=1===this.nodeType&&" "+Hn(S)+" "){for(_=0;_<m.length;_++)for(E=m[_];-1<y.indexOf(" "+E+" ");)y=y.replace(" "+E+" "," ");D=Hn(y),S!==D&&this.setAttribute("class",D)}}):this:this.attr("class","")},toggleClass:function(d,m){var y,S,E,_,D=typeof d,z="string"===D||Array.isArray(d);return Dt(d)?this.each(function(F){x(this).toggleClass(d.call(this,F,Uo(this),m),m)}):"boolean"==typeof m&&z?m?this.addClass(d):this.removeClass(d):(y=Fs(d),this.each(function(){if(z)for(_=x(this),E=0;E<y.length;E++)_.hasClass(S=y[E])?_.removeClass(S):_.addClass(S);else void 0!==d&&"boolean"!==D||((S=Uo(this))&&Wt.set(this,"__className__",S),this.setAttribute&&this.setAttribute("class",S||!1===d?"":Wt.get(this,"__className__")||""))}))},hasClass:function(d){var m,y,S=0;for(m=" "+d+" ";y=this[S++];)if(1===y.nodeType&&-1<(" "+Hn(Uo(y))+" ").indexOf(m))return!0;return!1}});var Ir=/\r/g;x.fn.extend({val:function(d){var m,y,S,E=this[0];return arguments.length?(S=Dt(d),this.each(function(_){var D;1===this.nodeType&&(null==(D=S?d.call(this,_,x(this).val()):d)?D="":"number"==typeof D?D+="":Array.isArray(D)&&(D=x.map(D,function(z){return null==z?"":z+""})),(m=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in m&&void 0!==m.set(this,D,"value")||(this.value=D))})):E?(m=x.valHooks[E.type]||x.valHooks[E.nodeName.toLowerCase()])&&"get"in m&&void 0!==(y=m.get(E,"value"))?y:"string"==typeof(y=E.value)?y.replace(Ir,""):y??"":void 0}}),x.extend({valHooks:{option:{get:function(d){return x.find.attr(d,"value")??Hn(x.text(d))}},select:{get:function(d){var m,y,S,E=d.options,_=d.selectedIndex,D="select-one"===d.type,z=D?null:[],F=D?_+1:E.length;for(S=_<0?F:D?_:0;S<F;S++)if(((y=E[S]).selected||S===_)&&!y.disabled&&(!y.parentNode.disabled||!Et(y.parentNode,"optgroup"))){if(m=x(y).val(),D)return m;z.push(m)}return z},set:function(d,m){for(var y,S,E=d.options,_=x.makeArray(m),D=E.length;D--;)((S=E[D]).selected=-1<x.inArray(x.valHooks.option.get(S),_))&&(y=!0);return y||(d.selectedIndex=-1),_}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(d,m){if(Array.isArray(m))return d.checked=-1<x.inArray(x(d).val(),m)}},Ut.checkOn||(x.valHooks[this].get=function(d){return null===d.getAttribute("value")?"on":d.value})});var Un=gt.location,bo={guid:Date.now()},wi=/\?/;x.parseXML=function(d){var m,y;if(!d||"string"!=typeof d)return null;try{m=(new gt.DOMParser).parseFromString(d,"text/xml")}catch{}return y=m&&m.getElementsByTagName("parsererror")[0],m&&!y||x.error("Invalid XML: "+(y?x.map(y.childNodes,function(S){return S.textContent}).join("\n"):d)),m};var me=/^(?:focusinfocus|focusoutblur)$/,Vl=function(d){d.stopPropagation()};x.extend(x.event,{trigger:function(d,m,y,S){var E,_,D,z,F,K,Z,ot,Y=[y||Zt],R=Cn.call(d,"type")?d.type:d,Kt=Cn.call(d,"namespace")?d.namespace.split("."):[];if(_=ot=D=y=y||Zt,3!==y.nodeType&&8!==y.nodeType&&!me.test(R+x.event.triggered)&&(-1<R.indexOf(".")&&(R=(Kt=R.split(".")).shift(),Kt.sort()),F=R.indexOf(":")<0&&"on"+R,(d=d[x.expando]?d:new x.Event(R,"object"==typeof d&&d)).isTrigger=S?2:3,d.namespace=Kt.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+Kt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=y),m=null==m?[d]:x.makeArray(m,[d]),Z=x.event.special[R]||{},S||!Z.trigger||!1!==Z.trigger.apply(y,m))){if(!S&&!Z.noBubble&&!it(y)){for(me.test((z=Z.delegateType||R)+R)||(_=_.parentNode);_;_=_.parentNode)Y.push(_),D=_;D===(y.ownerDocument||Zt)&&Y.push(D.defaultView||D.parentWindow||gt)}for(E=0;(_=Y[E++])&&!d.isPropagationStopped();)ot=_,d.type=1<E?z:Z.bindType||R,(K=(Wt.get(_,"events")||Object.create(null))[d.type]&&Wt.get(_,"handle"))&&K.apply(_,m),(K=F&&_[F])&&K.apply&&ar(_)&&(d.result=K.apply(_,m),!1===d.result&&d.preventDefault());return d.type=R,S||d.isDefaultPrevented()||Z._default&&!1!==Z._default.apply(Y.pop(),m)||!ar(y)||F&&Dt(y[R])&&!it(y)&&((D=y[F])&&(y[F]=null),x.event.triggered=R,d.isPropagationStopped()&&ot.addEventListener(R,Vl),y[R](),d.isPropagationStopped()&&ot.removeEventListener(R,Vl),x.event.triggered=void 0,D&&(y[F]=D)),d.result}},simulate:function(d,m,y){var S=x.extend(new x.Event,y,{type:d,isSimulated:!0});x.event.trigger(S,null,m)}}),x.fn.extend({trigger:function(d,m){return this.each(function(){x.event.trigger(d,m,this)})},triggerHandler:function(d,m){var y=this[0];if(y)return x.event.trigger(d,m,y,!0)}});var Kl=/\[\]$/,Si=/\r?\n/g,ct=/^(?:submit|button|image|reset|file)$/i,ss=/^(?:input|select|textarea|keygen)/i;function ln(d,m,y,S){var E;if(Array.isArray(m))x.each(m,function(_,D){y||Kl.test(d)?S(d,D):ln(d+"["+("object"==typeof D&&null!=D?_:"")+"]",D,y,S)});else if(y||"object"!==be(m))S(d,m);else for(E in m)ln(d+"["+E+"]",m[E],y,S)}x.param=function(d,m){var y,S=[],E=function(_,D){var z=Dt(D)?D():D;S[S.length]=encodeURIComponent(_)+"="+encodeURIComponent(z??"")};if(null==d)return"";if(Array.isArray(d)||d.jquery&&!x.isPlainObject(d))x.each(d,function(){E(this.name,this.value)});else for(y in d)ln(y,d[y],m,E);return S.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=x.prop(this,"elements");return d?x.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!x(this).is(":disabled")&&ss.test(this.nodeName)&&!ct.test(d)&&(this.checked||!jo.test(d))}).map(function(d,m){var y=x(this).val();return null==y?null:Array.isArray(y)?x.map(y,function(S){return{name:m.name,value:S.replace(Si,"\r\n")}}):{name:m.name,value:y.replace(Si,"\r\n")}}).get()}});var js=/%20/g,Jd=/#.*$/,Xl=/([?&])_=[^&]*/,Zd=/^(.*?):[ \t]*([^\r\n]*)$/gm,tu=/^(?:GET|HEAD)$/,Ee=/^\/\//,ki={},as={},Sn="*/".concat("*"),Tn=Zt.createElement("a");function Gl(d){return function(m,y){"string"!=typeof m&&(y=m,m="*");var S,E=0,_=m.toLowerCase().match(oe)||[];if(Dt(y))for(;S=_[E++];)"+"===S[0]?(S=S.slice(1)||"*",(d[S]=d[S]||[]).unshift(y)):(d[S]=d[S]||[]).push(y)}}function Yl(d,m,y,S){var E={},_=d===as;function D(z){var F;return E[z]=!0,x.each(d[z]||[],function(K,Z){var ot=Z(m,y,S);return"string"!=typeof ot||_||E[ot]?_?!(F=ot):void 0:(m.dataTypes.unshift(ot),D(ot),!1)}),F}return D(m.dataTypes[0])||!E["*"]&&D("*")}function zs(d,m){var y,S,E=x.ajaxSettings.flatOptions||{};for(y in m)void 0!==m[y]&&((E[y]?d:S||(S={}))[y]=m[y]);return S&&x.extend(!0,d,S),d}Tn.href=Un.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Un.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Un.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,m){return m?zs(zs(d,x.ajaxSettings),m):zs(x.ajaxSettings,d)},ajaxPrefilter:Gl(ki),ajaxTransport:Gl(as),ajax:function(d,m){"object"==typeof d&&(m=d,d=void 0);var y,S,E,_,D,z,F,K,Z,ot,Y=x.ajaxSetup({},m=m||{}),R=Y.context||Y,Kt=Y.context&&(R.nodeType||R.jquery)?x(R):x.event,ce=x.Deferred(),Qt=x.Callbacks("once memory"),qe=Y.statusCode||{},ne={},cn={},yr="canceled",ue={readyState:0,getResponseHeader:function(fe){var Pe;if(F){if(!_)for(_={};Pe=Zd.exec(E);)_[Pe[1].toLowerCase()+" "]=(_[Pe[1].toLowerCase()+" "]||[]).concat(Pe[2]);Pe=_[fe.toLowerCase()+" "]}return null==Pe?null:Pe.join(", ")},getAllResponseHeaders:function(){return F?E:null},setRequestHeader:function(fe,Pe){return null==F&&(fe=cn[fe.toLowerCase()]=cn[fe.toLowerCase()]||fe,ne[fe]=Pe),this},overrideMimeType:function(fe){return null==F&&(Y.mimeType=fe),this},statusCode:function(fe){var Pe;if(fe)if(F)ue.always(fe[ue.status]);else for(Pe in fe)qe[Pe]=[qe[Pe],fe[Pe]];return this},abort:function(fe){var Pe=fe||yr;return y&&y.abort(Pe),Cr(0,Pe),this}};if(ce.promise(ue),Y.url=((d||Y.url||Un.href)+"").replace(Ee,Un.protocol+"//"),Y.type=m.method||m.type||Y.method||Y.type,Y.dataTypes=(Y.dataType||"*").toLowerCase().match(oe)||[""],null==Y.crossDomain){z=Zt.createElement("a");try{z.href=Y.url,z.href=z.href,Y.crossDomain=Tn.protocol+"//"+Tn.host!=z.protocol+"//"+z.host}catch{Y.crossDomain=!0}}if(Y.data&&Y.processData&&"string"!=typeof Y.data&&(Y.data=x.param(Y.data,Y.traditional)),Yl(ki,Y,m,ue),F)return ue;for(Z in(K=x.event&&Y.global)&&0==x.active++&&x.event.trigger("ajaxStart"),Y.type=Y.type.toUpperCase(),Y.hasContent=!tu.test(Y.type),S=Y.url.replace(Jd,""),Y.hasContent?Y.data&&Y.processData&&0===(Y.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Y.data=Y.data.replace(js,"+")):(ot=Y.url.slice(S.length),Y.data&&(Y.processData||"string"==typeof Y.data)&&(S+=(wi.test(S)?"&":"?")+Y.data,delete Y.data),!1===Y.cache&&(S=S.replace(Xl,"$1"),ot=(wi.test(S)?"&":"?")+"_="+bo.guid+++ot),Y.url=S+ot),Y.ifModified&&(x.lastModified[S]&&ue.setRequestHeader("If-Modified-Since",x.lastModified[S]),x.etag[S]&&ue.setRequestHeader("If-None-Match",x.etag[S])),(Y.data&&Y.hasContent&&!1!==Y.contentType||m.contentType)&&ue.setRequestHeader("Content-Type",Y.contentType),ue.setRequestHeader("Accept",Y.dataTypes[0]&&Y.accepts[Y.dataTypes[0]]?Y.accepts[Y.dataTypes[0]]+("*"!==Y.dataTypes[0]?", "+Sn+"; q=0.01":""):Y.accepts["*"]),Y.headers)ue.setRequestHeader(Z,Y.headers[Z]);if(Y.beforeSend&&(!1===Y.beforeSend.call(R,ue,Y)||F))return ue.abort();if(yr="abort",Qt.add(Y.complete),ue.done(Y.success),ue.fail(Y.error),y=Yl(as,Y,m,ue)){if(ue.readyState=1,K&&Kt.trigger("ajaxSend",[ue,Y]),F)return ue;Y.async&&0<Y.timeout&&(D=gt.setTimeout(function(){ue.abort("timeout")},Y.timeout));try{F=!1,y.send(ne,Cr)}catch(fe){if(F)throw fe;Cr(-1,fe)}}else Cr(-1,"No Transport");function Cr(fe,Pe,is,Yr){var $n,ls,Fr,Re,Qr,Wn=Pe;F||(F=!0,D&&gt.clearTimeout(D),y=void 0,E=Yr||"",ue.readyState=0<fe?4:0,$n=200<=fe&&fe<300||304===fe,is&&(Re=function(Je,Xe,bn){for(var Jr,On,Vt,je,Ge=Je.contents,Te=Je.dataTypes;"*"===Te[0];)Te.shift(),void 0===Jr&&(Jr=Je.mimeType||Xe.getResponseHeader("Content-Type"));if(Jr)for(On in Ge)if(Ge[On]&&Ge[On].test(Jr)){Te.unshift(On);break}if(Te[0]in bn)Vt=Te[0];else{for(On in bn){if(!Te[0]||Je.converters[On+" "+Te[0]]){Vt=On;break}je||(je=On)}Vt=Vt||je}if(Vt)return Vt!==Te[0]&&Te.unshift(Vt),bn[Vt]}(Y,ue,is)),!$n&&-1<x.inArray("script",Y.dataTypes)&&x.inArray("json",Y.dataTypes)<0&&(Y.converters["text script"]=function(){}),Re=function(Je,Xe,bn,Jr){var On,Vt,je,Ge,Te,jr={},xr=Je.dataTypes.slice();if(xr[1])for(je in Je.converters)jr[je.toLowerCase()]=Je.converters[je];for(Vt=xr.shift();Vt;)if(Je.responseFields[Vt]&&(bn[Je.responseFields[Vt]]=Xe),!Te&&Jr&&Je.dataFilter&&(Xe=Je.dataFilter(Xe,Je.dataType)),Te=Vt,Vt=xr.shift())if("*"===Vt)Vt=Te;else if("*"!==Te&&Te!==Vt){if(!(je=jr[Te+" "+Vt]||jr["* "+Vt]))for(On in jr)if((Ge=On.split(" "))[1]===Vt&&(je=jr[Te+" "+Ge[0]]||jr["* "+Ge[0]])){!0===je?je=jr[On]:!0!==jr[On]&&(Vt=Ge[0],xr.unshift(Ge[1]));break}if(!0!==je)if(je&&Je.throws)Xe=je(Xe);else try{Xe=je(Xe)}catch(Hs){return{state:"parsererror",error:je?Hs:"No conversion from "+Te+" to "+Vt}}}return{state:"success",data:Xe}}(Y,Re,ue,$n),$n?(Y.ifModified&&((Qr=ue.getResponseHeader("Last-Modified"))&&(x.lastModified[S]=Qr),(Qr=ue.getResponseHeader("etag"))&&(x.etag[S]=Qr)),204===fe||"HEAD"===Y.type?Wn="nocontent":304===fe?Wn="notmodified":(Wn=Re.state,ls=Re.data,$n=!(Fr=Re.error))):(Fr=Wn,!fe&&Wn||(Wn="error",fe<0&&(fe=0))),ue.status=fe,ue.statusText=(Pe||Wn)+"",$n?ce.resolveWith(R,[ls,Wn,ue]):ce.rejectWith(R,[ue,Wn,Fr]),ue.statusCode(qe),qe=void 0,K&&Kt.trigger($n?"ajaxSuccess":"ajaxError",[ue,Y,$n?ls:Fr]),Qt.fireWith(R,[ue,Wn]),K&&(Kt.trigger("ajaxComplete",[ue,Y]),--x.active||x.event.trigger("ajaxStop")))}return ue},getJSON:function(d,m,y){return x.get(d,m,y,"json")},getScript:function(d,m){return x.get(d,void 0,m,"script")}}),x.each(["get","post"],function(d,m){x[m]=function(y,S,E,_){return Dt(S)&&(_=_||E,E=S,S=void 0),x.ajax(x.extend({url:y,type:m,dataType:_,data:S,success:E},x.isPlainObject(y)&&y))}}),x.ajaxPrefilter(function(d){var m;for(m in d.headers)"content-type"===m.toLowerCase()&&(d.contentType=d.headers[m]||"")}),x._evalUrl=function(d,m,y){return x.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(S){x.globalEval(S,m,y)}})},x.fn.extend({wrapAll:function(d){var m;return this[0]&&(Dt(d)&&(d=d.call(this[0])),m=x(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(d){return Dt(d)?this.each(function(m){x(this).wrapInner(d.call(this,m))}):this.each(function(){var m=x(this),y=m.contents();y.length?y.wrapAll(d):m.append(d)})},wrap:function(d){var m=Dt(d);return this.each(function(y){x(this).wrapAll(m?d.call(this,y):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(d){return!x.expr.pseudos.visible(d)},x.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new gt.XMLHttpRequest}catch{}};var Ql={0:200,1223:204},Le=x.ajaxSettings.xhr();Ut.cors=!!Le&&"withCredentials"in Le,Ut.ajax=Le=!!Le,x.ajaxTransport(function(d){var m,y;if(Ut.cors||Le&&!d.crossDomain)return{send:function(S,E){var _,D=d.xhr();if(D.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(_ in d.xhrFields)D[_]=d.xhrFields[_];for(_ in d.mimeType&&D.overrideMimeType&&D.overrideMimeType(d.mimeType),d.crossDomain||S["X-Requested-With"]||(S["X-Requested-With"]="XMLHttpRequest"),S)D.setRequestHeader(_,S[_]);m=function(z){return function(){m&&(m=y=D.onload=D.onerror=D.onabort=D.ontimeout=D.onreadystatechange=null,"abort"===z?D.abort():"error"===z?"number"!=typeof D.status?E(0,"error"):E(D.status,D.statusText):E(Ql[D.status]||D.status,D.statusText,"text"!==(D.responseType||"text")||"string"!=typeof D.responseText?{binary:D.response}:{text:D.responseText},D.getAllResponseHeaders()))}},D.onload=m(),y=D.onerror=D.ontimeout=m("error"),void 0!==D.onabort?D.onabort=y:D.onreadystatechange=function(){4===D.readyState&&gt.setTimeout(function(){m&&y()})},m=m("abort");try{D.send(d.hasContent&&d.data||null)}catch(z){if(m)throw z}},abort:function(){m&&m()}}}),x.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return x.globalEval(d),d}}}),x.ajaxPrefilter("script",function(d){void 0===d.cache&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),x.ajaxTransport("script",function(d){var m,y;if(d.crossDomain||d.scriptAttrs)return{send:function(S,E){m=x("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",y=function(_){m.remove(),y=null,_&&E("error"===_.type?404:200,_.type)}),Zt.head.appendChild(m[0])},abort:function(){y&&y()}}});var Gr,qn=[],vr=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=qn.pop()||x.expando+"_"+bo.guid++;return this[d]=!0,d}}),x.ajaxPrefilter("json jsonp",function(d,m,y){var S,E,_,D=!1!==d.jsonp&&(vr.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&vr.test(d.data)&&"data");if(D||"jsonp"===d.dataTypes[0])return S=d.jsonpCallback=Dt(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,D?d[D]=d[D].replace(vr,"$1"+S):!1!==d.jsonp&&(d.url+=(wi.test(d.url)?"&":"?")+d.jsonp+"="+S),d.converters["script json"]=function(){return _||x.error(S+" was not called"),_[0]},d.dataTypes[0]="json",E=gt[S],gt[S]=function(){_=arguments},y.always(function(){void 0===E?x(gt).removeProp(S):gt[S]=E,d[S]&&(d.jsonpCallback=m.jsonpCallback,qn.push(S)),_&&Dt(E)&&E(_[0]),_=E=void 0}),"script"}),Ut.createHTMLDocument=((Gr=Zt.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Gr.childNodes.length),x.parseHTML=function(d,m,y){return"string"!=typeof d?[]:("boolean"==typeof m&&(y=m,m=!1),m||(Ut.createHTMLDocument?((S=(m=Zt.implementation.createHTMLDocument("")).createElement("base")).href=Zt.location.href,m.head.appendChild(S)):m=Zt),_=!y&&[],(E=N.exec(d))?[m.createElement(E[1])]:(E=Bs([d],m,_),_&&_.length&&x(_).remove(),x.merge([],E.childNodes)));var S,E,_},x.fn.load=function(d,m,y){var S,E,_,D=this,z=d.indexOf(" ");return-1<z&&(S=Hn(d.slice(z)),d=d.slice(0,z)),Dt(m)?(y=m,m=void 0):m&&"object"==typeof m&&(E="POST"),0<D.length&&x.ajax({url:d,type:E||"GET",dataType:"html",data:m}).done(function(F){_=arguments,D.html(S?x("<div>").append(x.parseHTML(F)).find(S):F)}).always(y&&function(F,K){D.each(function(){y.apply(this,_||[F.responseText,K,F])})}),this},x.expr.pseudos.animated=function(d){return x.grep(x.timers,function(m){return d===m.elem}).length},x.offset={setOffset:function(d,m,y){var S,E,_,D,z,F,K=x.css(d,"position"),Z=x(d),ot={};"static"===K&&(d.style.position="relative"),z=Z.offset(),_=x.css(d,"top"),F=x.css(d,"left"),("absolute"===K||"fixed"===K)&&-1<(_+F).indexOf("auto")?(D=(S=Z.position()).top,E=S.left):(D=parseFloat(_)||0,E=parseFloat(F)||0),Dt(m)&&(m=m.call(d,y,x.extend({},z))),null!=m.top&&(ot.top=m.top-z.top+D),null!=m.left&&(ot.left=m.left-z.left+E),"using"in m?m.using.call(d,ot):Z.css(ot)}},x.fn.extend({offset:function(d){if(arguments.length)return void 0===d?this:this.each(function(E){x.offset.setOffset(this,d,E)});var m,y,S=this[0];return S?S.getClientRects().length?{top:(m=S.getBoundingClientRect()).top+(y=S.ownerDocument.defaultView).pageYOffset,left:m.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var d,m,y,S=this[0],E={top:0,left:0};if("fixed"===x.css(S,"position"))m=S.getBoundingClientRect();else{for(m=this.offset(),y=S.ownerDocument,d=S.offsetParent||y.documentElement;d&&(d===y.body||d===y.documentElement)&&"static"===x.css(d,"position");)d=d.parentNode;d&&d!==S&&1===d.nodeType&&((E=x(d).offset()).top+=x.css(d,"borderTopWidth",!0),E.left+=x.css(d,"borderLeftWidth",!0))}return{top:m.top-E.top-x.css(S,"marginTop",!0),left:m.left-E.left-x.css(S,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&"static"===x.css(d,"position");)d=d.offsetParent;return d||Ye})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,m){var y="pageYOffset"===m;x.fn[d]=function(S){return Br(this,function(E,_,D){var z;if(it(E)?z=E:9===E.nodeType&&(z=E.defaultView),void 0===D)return z?z[m]:E[_];z?z.scrollTo(y?z.pageXOffset:D,y?D:z.pageYOffset):E[_]=D},d,S,arguments.length)}}),x.each(["top","left"],function(d,m){x.cssHooks[m]=rs(Ut.pixelPosition,function(y,S){if(S)return S=zn(y,m),_a.test(S)?x(y).position()[m]+"px":S})}),x.each({Height:"height",Width:"width"},function(d,m){x.each({padding:"inner"+d,content:m,"":"outer"+d},function(y,S){x.fn[S]=function(E,_){var D=arguments.length&&(y||"boolean"!=typeof E),z=y||(!0===E||!0===_?"margin":"border");return Br(this,function(F,K,Z){var ot;return it(F)?0===S.indexOf("outer")?F["inner"+d]:F.document.documentElement["client"+d]:9===F.nodeType?(ot=F.documentElement,Math.max(F.body["scroll"+d],ot["scroll"+d],F.body["offset"+d],ot["offset"+d],ot["client"+d])):void 0===Z?x.css(F,K,z):x.style(F,K,Z,z)},m,D?E:void 0,D)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,m){x.fn[m]=function(y){return this.on(m,y)}}),x.fn.extend({bind:function(d,m,y){return this.on(d,null,m,y)},unbind:function(d,m){return this.off(d,null,m)},delegate:function(d,m,y,S){return this.on(m,d,y,S)},undelegate:function(d,m,y){return 1===arguments.length?this.off(d,"**"):this.off(m,d||"**",y)},hover:function(d,m){return this.mouseenter(d).mouseleave(m||d)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,m){x.fn[m]=function(y,S){return 0<arguments.length?this.on(m,null,y,S):this.trigger(m)}});var Da=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(d,m){var y,S,E;if("string"==typeof m&&(y=d[m],m=d,d=y),Dt(d))return S=re.call(arguments,2),(E=function(){return d.apply(m||this,S.concat(re.call(arguments)))}).guid=d.guid=d.guid||x.guid++,E},x.holdReady=function(d){d?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=Et,x.isFunction=Dt,x.isWindow=it,x.camelCase=en,x.type=be,x.now=Date.now,x.isNumeric=function(d){var m=x.type(d);return("number"===m||"string"===m)&&!isNaN(d-parseFloat(d))},x.trim=function(d){return null==d?"":(d+"").replace(Da,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var nn=gt.jQuery,Jl=gt.$;return x.noConflict=function(d){return gt.$===x&&(gt.$=Jl),d&&gt.jQuery===x&&(gt.jQuery=nn),x},typeof jt>"u"&&(gt.jQuery=gt.$=x),x}),function(gt){gt.imageArea=function(jt,Ht){var yn,Ke,In,Cn,It=jt.options,re=jt.$image,Ie=jt.$trigger,gr={},hr=!0,Rt=!0,Ut=[0,0],Dt=[0,0],it={id:Ht,x:0,y:0,z:0,height:0,width:0},_n=function(){jt.blurAll(),it.z=100,ft()},Be=function(){return it},be=function(wt){re.trigger(wt,[it.id,jt.areas()])},pt=function(wt){var te=wt||window.event||{};te.cancelBubble=!0,te.returnValue=!1,te.stopPropagation&&te.stopPropagation(),te.preventDefault&&te.preventDefault()},x=function(wt,te){var ie,Tt;switch(wt){case"start":ie="mousedown",Tt="touchstart";break;case"move":ie="mousemove",Tt="touchmove";break;case"stop":ie="mouseup",Tt="touchend";break;default:return}te&&jQuery.isFunction(te)?gt(window.document).on(ie,te).on(Tt,te):gt(window.document).off(ie).off(Tt)},An=function(){yn.css({cursor:"default",width:it.width,height:it.height,left:it.x,top:it.y}),Ke.css({backgroundPosition:-it.x-1+"px "+(-it.y-1)+"px",cursor:It.allowMove?"move":"default",width:it.width-2>0?it.width-2:0,height:it.height-2>0?it.height-2:0,left:it.x+1,top:it.y+1}),In.css({width:it.width-2>0?it.width-2:0,left:it.x+2,top:it.y+1})},Et=function(wt){It.allowResize&&(wt?gt.each(gr,function(te,ie){var Tt,ke,oe=Math.round(ie.width()/2),st=Math.round(ie.height()/2),go=te[0],Wr=te[te.length-1];Tt="n"===go?-st:"s"===go?it.height-st-1:Math.round(it.height/2)-st-1,ke="e"===Wr?it.width-oe-1:"w"===Wr?-oe:Math.round(it.width/2)-oe-1,ie.css({display:"block",left:it.x+ke,top:it.y+Tt})}):gt(".select-areas-resize-handler").each(function(){gt(this).css({display:"none"})}))},Zn=function(wt){Cn&&Cn.css({display:wt?"block":"none",left:it.x+it.width+1,top:it.y-Cn.outerHeight()-1})},Os=function(wt){yn.css({cursor:wt}),Ke.css({cursor:wt})},ft=function(wt){switch(wt){case"startSelection":jt._refresh(),An(),Et(),Zn(!0);break;case"pickSelection":case"pickResizeHandler":Et();break;case"resizeSelection":An(),Et(),Os("crosshair"),Zn(!0);break;case"moveSelection":An(),Et(),Os("move"),Zn(!0);break;case"blur":An(),Et(),Zn();break;default:An(),Et(!0),Zn(!0)}},fo=function(wt){pt(wt),_n(),x("move",sr),x("stop",Fn);var te=N(wt);Ut[0]=te[0]-it.x,Ut[1]=te[1]-it.y,ft("pickSelection")},yt=function(wt){pt(wt),_n();var te=wt.target.className.split(" ")[1];"w"===te[te.length-1]&&(Dt[0]+=it.width,it.x=Dt[0]-it.width),"n"===te[0]&&(Dt[1]+=it.height,it.y=Dt[1]-it.height),"n"===te||"s"===te?hr=!1:("e"===te||"w"===te)&&(Rt=!1),x("move",Lo),x("stop",Fn),ft("pickResizeHandler")},Lo=function(wt){pt(wt),_n();var te=N(wt),ie=te[1]-Dt[1],Tt=te[0]-Dt[0];Math.abs(Tt)<It.minSize[0]&&(Tt=Tt>=0?It.minSize[0]:-It.minSize[0]),Math.abs(ie)<It.minSize[1]&&(ie=ie>=0?It.minSize[1]:-It.minSize[1]),(Dt[0]+Tt<0||Dt[0]+Tt>re.width())&&(Tt=-Tt),(Dt[1]+ie<0||Dt[1]+ie>re.height())&&(ie=-ie),It.maxSize[0]>It.minSize[0]&&It.maxSize[1]>It.minSize[1]&&(Math.abs(Tt)>It.maxSize[0]&&(Tt=Tt>=0?It.maxSize[0]:-It.maxSize[0]),Math.abs(ie)>It.maxSize[1]&&(ie=ie>=0?It.maxSize[1]:-It.maxSize[1])),hr&&(it.width=Tt),Rt&&(it.height=ie),It.aspectRatio&&(Tt>0&&ie>0||Tt<0&&ie<0?hr?ie=Math.round(Tt/It.aspectRatio):Tt=Math.round(ie*It.aspectRatio):hr?ie=-Math.round(Tt/It.aspectRatio):Tt=-Math.round(ie*It.aspectRatio),Dt[0]+Tt>re.width()&&(Tt=re.width()-Dt[0],ie=ie>0?Math.round(Tt/It.aspectRatio):-Math.round(Tt/It.aspectRatio)),Dt[1]+ie<0&&(ie=-Dt[1],Tt=Tt>0?-Math.round(ie*It.aspectRatio):Math.round(ie*It.aspectRatio)),Dt[1]+ie>re.height()&&(ie=re.height()-Dt[1],Tt=Tt>0?Math.round(ie*It.aspectRatio):-Math.round(ie*It.aspectRatio)),it.width=Tt,it.height=ie),it.width<0?(it.width=Math.abs(it.width),it.x=Dt[0]-it.width):it.x=Dt[0],it.height<0?(it.height=Math.abs(it.height),it.y=Dt[1]-it.height):it.y=Dt[1],be("changing"),ft("resizeSelection")},sr=function(wt){if(pt(wt),It.allowMove){_n();var te=N(wt);mo({x:te[0]-Ut[0],y:te[1]-Ut[1]}),be("changing")}},mo=function(wt){it.x=wt.x>0?wt.x+it.width<re.width()?wt.x:re.width()-it.width:0,it.y=wt.y>0?wt.y+it.height<re.height()?wt.y:re.height()-it.height:0,ft("moveSelection")},Fn=function(wt,te){pt(wt),function(){gt.each(arguments,function(wt,te){x(te)})}("move","stop"),te&&(it.x=te.x,it.y=te.y,it.z=te.z,it.width=te.width,it.height=te.height,An()),Dt[0]=it.x,Dt[1]=it.y,hr=!0,Rt=!0,be("changed"),ft("releaseSelection")},Ce=function(wt){be("deleted"),pt(wt),Ke.remove(),yn.remove(),In.remove(),gt.each(gr,function(te,ie){ie.remove()}),Cn&&Cn.remove(),jt._remove(Ht)},N=function(wt){var te=function(wt){var te=gt(wt).offset();return[te.left,te.top]}(re);wt.pageX||(wt.originalEvent&&(wt=wt.originalEvent),wt.changedTouches&&(wt=wt.changedTouches[0]),wt.touches&&(wt=wt.touches[0]));var ie=wt.pageX-te[0],Tt=wt.pageY-te[1];return[ie=ie<0?0:ie>re.width()?re.width():ie,Tt=Tt<0?0:Tt>re.height()?re.height():Tt]};if(yn=gt("<div id='select-areas-outline_"+Be().id+'\'  class="select-areas-outline"/>').css({opacity:It.outlineOpacity,position:"absolute"}).insertAfter(Ie),Ke=gt("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+Be().id).css({position:"absolute"}).insertAfter(yn),In=gt("<div id='select-areas-label-container_"+Be().id+'\'  class="select-areas-label-container"/>').css({position:"absolute"}).insertAfter(Ie),It.allowResize&&gt.each(["nw","n","ne","e","se","s","sw","w"],function(wt,te){gr[te]=gt('<div class="select-areas-resize-handler '+te+" select-areas-resize-handler_"+Be().id+'"/>').css({opacity:.5,position:"absolute",cursor:te+"-resize"}).insertAfter(Ke).mousedown(yt).bind("touchstart",yt)}),It.allowDelete){var po=function(wt){return wt.click(Ce).bind("touchstart",Ce).bind("tap",Ce),wt};Cn=po(gt("<div id='select-areas-delete_"+Be().id+'\'  class="delete-area" />')).append(po(gt('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(Ke)}return It.allowMove&&Ke.mousedown(fo).bind("touchstart",fo),_n(),{getData:Be,startSelection:function(wt){pt(wt),it.width=It.minSize[0],it.height=It.minSize[1],_n(),x("move",Lo),x("stop",Fn),(Dt=N(wt))[0]+it.width>re.width()&&(Dt[0]=re.width()-it.width),Dt[1]+it.height>re.height()&&(Dt[1]=re.height()-it.height),it.x=Dt[0],it.y=Dt[1],ft("startSelection")},deleteSelection:Ce,options:It,blur:function(){it.z=0,ft("blur")},focus:_n,nudge:function(wt){wt.x=it.x,wt.y=it.y,wt.d&&(wt.y=it.y+wt.d),wt.u&&(wt.y=it.y-wt.u),wt.l&&(wt.x=it.x-wt.l),wt.r&&(wt.x=it.x+wt.r),mo(wt),be("changed")},set:function(wt,te){it=gt.extend(it,wt),Dt[0]=it.x,Dt[1]=it.y,te||be("changed")},contains:function(wt){return wt.x>=it.x&&wt.x<=it.x+it.width&&wt.y>=it.y&&wt.y<=it.y+it.height}}},gt.imageSelectAreas=function(){},gt.imageSelectAreas.prototype.init=function(jt,Ht){var It=this;this.options=gt.extend({allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null},Ht),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=gt(jt),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=gt("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=gt('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=gt("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),gt.each(this.options.areas,function(Ie,yn){It._add(yn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(gt.proxy(this.newArea,this)).on("touchstart",gt.proxy(this.newArea,this)),this.options.allowNudge&&gt("html").keydown(function(Ie){var In,Ke={37:"l",38:"u",39:"r",40:"d"}[Ie.which];if(Ke&&(It._eachArea(function(Cn){if(100===Cn.getData().z)return In=Cn,!1}),In)){var gr={};gr[Ke]=1,In.nudge(gr)}})},gt.imageSelectAreas.prototype._refresh=function(){var jt=this.areas().length;this.$overlay.css({display:jt?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},gt.imageSelectAreas.prototype._eachArea=function(jt){gt.each(this._areas,function(Ht,It){if(It)return jt(It,Ht)})},gt.imageSelectAreas.prototype._remove=function(jt){delete this._areas[jt],this._refresh()},gt.imageSelectAreas.prototype.remove=function(jt){this._areas[jt]&&this._areas[jt].deleteSelection()},gt.imageSelectAreas.prototype.newArea=function(jt){var Ht=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(It,re){Ht=Math.max(Ht,parseInt(re,10))}),this._areas[Ht+=1]=gt.imageArea(this,Ht),jt&&this._areas[Ht].startSelection(jt)),Ht},gt.imageSelectAreas.prototype.set=function(jt,Ht,It){this._areas[jt]&&(Ht.id=jt,this._areas[jt].set(Ht,It),this._areas[jt].focus())},gt.imageSelectAreas.prototype._add=function(jt,Ht){var It=this.newArea();this.set(It,jt,Ht)},gt.imageSelectAreas.prototype.add=function(jt){var Ht=this;this.blurAll(),gt.isArray(jt)?gt.each(jt,function(It,re){Ht._add(re)}):this._add(jt),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},gt.imageSelectAreas.prototype.reset=function(){var jt=this;this._eachArea(function(Ht,It){jt.remove(It)}),this._refresh()},gt.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},gt.imageSelectAreas.prototype.areas=function(){var jt=[];return this._eachArea(function(Ht){jt.push(Ht.getData())}),jt},gt.imageSelectAreas.prototype.relativeAreas=function(){for(var jt=this.areas(),Ht=[],It=this.ratio,re=function(yn){return Math.floor(yn/It)},Ie=0;Ie<jt.length;Ie++)Ht[Ie]=gt.extend({},jt[Ie]),Ht[Ie].x=re(Ht[Ie].x),Ht[Ie].y=re(Ht[Ie].y),Ht[Ie].width=re(Ht[Ie].width),Ht[Ie].height=re(Ht[Ie].height);return Ht},gt.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(jt){jt.blur()})},gt.imageSelectAreas.prototype.contains=function(jt){var Ht=!1;return this._eachArea(function(It){if(It.contains(jt))return Ht=!0,!1}),Ht},gt.selectAreas=function(jt,Ht){var It=gt(jt);if(!It.data("mainImageSelectAreas")){var re=new gt.imageSelectAreas;re.init(jt,Ht),It.data("mainImageSelectAreas",re),It.trigger("loaded")}return It.data("mainImageSelectAreas")},gt.fn.selectAreas=function(jt){if(gt.imageSelectAreas.prototype[jt]){var Ht=gt.imageSelectAreas.prototype[jt].apply(gt.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Ht>"u"?this:Ht}if("object"==typeof jt||!jt)return this.each(function(){var It=this,re=new Image;re.onload=function(){gt.selectAreas(It,jt)},re.src=It.src}),this;gt.error("Method "+jt+" does not exist on jQuery.selectAreas")}}(jQuery);
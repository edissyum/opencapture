!function(){"use strict";var pt=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},Kt=function(t){return{eq:t}},Yt=Kt(function(t,e){return t===e}),qt=function(t){return Kt(function(e,n){if(e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t.eq(e[o],n[o]))return!1;return!0})},ae=function(t){return Kt(function(e,n){var l,u,f,r=Object.keys(e),o=Object.keys(n);if(!(l=Yt,u=qt(l),f=function(u){return Array.prototype.slice.call(u).sort(void 0)},Kt(function(m,b){return u.eq(f(m),f(b))})).eq(r,o))return!1;for(var s=r.length,a=0;a<s;a++){var i=r[a];if(!t.eq(e[i],n[i]))return!1}return!0})},Xe=Kt(function(t,e){if(t===e)return!0;var n=pt(t);return n===pt(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?qt(Xe).eq(t,e):"object"===n&&ae(Xe).eq(t,e))});const Rn=Object.getPrototypeOf,nn=(t,e,n)=>{var r;return!!n(t,e.prototype)||(null===(r=t.constructor)||void 0===r?void 0:r.name)===e.name},Yn=t=>e=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&nn(n,String,(o,s)=>s.isPrototypeOf(o))?"string":r})(e)===t,vr=t=>e=>typeof e===t,On=t=>e=>t===e,yr=(t,e)=>Gt(t)&&nn(t,e,(n,r)=>Rn(n)===r),kt=Yn("string"),Gt=Yn("object"),Lt=t=>yr(t,Object),it=Yn("array"),Zt=On(null),Un=vr("boolean"),Me=On(void 0),Se=t=>null==t,dt=t=>!Se(t),Ce=vr("function"),x=vr("number"),Hn=(t,e)=>{if(it(t)){for(let n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}return!1},St=()=>{},Dn=(t,e)=>(...n)=>t(e.apply(null,n)),Ls=(t,e)=>n=>t(e(n)),ft=t=>()=>t,he=t=>t,no=(t,e)=>t===e;function vt(t,...e){return(...n)=>{const r=e.concat(n);return t.apply(null,r)}}const vo=t=>e=>!t(e),dr=t=>()=>{throw new Error(t)},yo=t=>t(),Gn=t=>{t()},ke=ft(!1),Ie=ft(!0);class k{constructor(e,n){this.tag=e,this.value=n}static some(e){return new k(!0,e)}static none(){return k.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?k.some(e(this.value)):k.none()}bind(e){return this.tag?e(this.value):k.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:k.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return dt(e)?k.some(e):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const Co=Array.prototype.slice,wt=Array.prototype.indexOf,ne=Array.prototype.push,de=(t,e)=>wt.call(t,e),At=(t,e)=>de(t,e)>-1,Ne=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},ee=(t,e)=>{const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e(t[o],o);return r},G=(t,e)=>{for(let n=0,r=t.length;n<r;n++)e(t[n],n)},xo=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Ur=(t,e)=>{const n=[],r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];(e(a,o)?n:r).push(a)}return{pass:n,fail:r}},Wt=(t,e)=>{const n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];e(s,r)&&n.push(s)}return n},zo=(t,e,n)=>(xo(t,(r,o)=>{n=e(n,r,o)}),n),yn=(t,e,n)=>(G(t,(r,o)=>{n=e(n,r,o)}),n),Hr=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++){const s=t[r];if(e(s,r))return k.some(s);if(n(s,r))break}return k.none()},Ze=(t,e)=>Hr(t,e,ke),Ms=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return k.some(n);return k.none()},Jl=t=>{const e=[];for(let n=0,r=t.length;n<r;++n){if(!it(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);ne.apply(e,t[n])}return e},rn=(t,e)=>Jl(ee(t,e)),ur=(t,e)=>{for(let n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0},ro=t=>{const e=Co.call(t,0);return e.reverse(),e},te=(t,e)=>Wt(t,n=>!At(e,n)),Bn=(t,e)=>{const n={};for(let r=0,o=t.length;r<o;r++){const s=t[r];n[String(s)]=e(s,r)}return n},Uo=(t,e)=>{const n=Co.call(t,0);return n.sort(e),n},_a=(t,e)=>e>=0&&e<t.length?k.some(t[e]):k.none(),Pn=t=>_a(t,0),wo=t=>_a(t,t.length-1),Cn=Ce(Array.from)?Array.from:t=>Co.call(t),Qn=(t,e)=>{for(let n=0;n<t.length;n++){const r=e(t[n],n);if(r.isSome())return r}return k.none()},on=Object.keys,is=Object.hasOwnProperty,Ae=(t,e)=>{const n=on(t);for(let r=0,o=n.length;r<o;r++){const s=n[r];e(t[s],s)}},Ho=(t,e)=>Zl(t,(n,r)=>({k:r,v:e(n,r)})),Zl=(t,e)=>{const n={};return Ae(t,(r,o)=>{const s=e(r,o);n[s.k]=s.v}),n},Na=t=>(e,n)=>{t[n]=e},qo=(t,e,n,r)=>{Ae(t,(o,s)=>{(e(o,s)?n:r)(o,s)})},Cr=(t,e)=>{const n={};return qo(t,e,Na(n),St),n},$o=(t,e)=>{const n=[];return Ae(t,(r,o)=>{n.push(e(r,o))}),n},Wo=t=>$o(t,he),Te=(t,e)=>Jt(t,e)?k.from(t[e]):k.none(),Jt=(t,e)=>is.call(t,e),En=(t,e)=>Jt(t,e)&&null!=t[e],qn=t=>{const e={};return G(t,n=>{e[n]={}}),on(e)},Aa=t=>void 0!==t.length,Ci=Array.isArray,Is=(t,e,n)=>{if(!t)return!1;if(n=n||t,Aa(t)){for(let r=0,o=t.length;r<o;r++)if(!1===e.call(n,t[r],r,t))return!1}else for(const r in t)if(Jt(t,r)&&!1===e.call(n,t[r],r,t))return!1;return!0},Ta=(t,e)=>{const n=[];return Is(t,(r,o)=>{n.push(e(r,o,t))}),n},qr=(t,e)=>{const n=[];return Is(t,(r,o)=>{e&&!e(r,o,t)||n.push(r)}),n},oo=(t,e,n,r)=>{let o=Me(n)?t[0]:n;for(let s=0;s<t.length;s++)o=e.call(r,o,t[s],s);return o},Ra=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t))return r;return-1},$r=t=>t[t.length-1],Vo=t=>{let e,n=!1;return(...r)=>(n||(n=!0,e=t.apply(null,r)),e)},tc=()=>xi(0,0),xi=(t,e)=>({major:t,minor:e}),ls={nu:xi,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?tc():((r,o)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const u=i[c];if(u.test(l))return u}})(r,o);if(!s)return{major:0,minor:0};const a=i=>Number(o.replace(s,"$"+i));return xi(a(1),a(2))})(t,n)},unknown:tc},ec=(t,e)=>{const n=String(e).toLowerCase();return Ze(t,r=>r.search(n))},nc=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,wi=(t,e)=>sn(t,e)?t.substring(e.length):t,Ye=(t,e,n=0,r)=>{const o=t.indexOf(e,n);return-1!==o&&(!!Me(r)||o+e.length<=r)},sn=(t,e)=>nc(t,e,0),Fs=(t,e)=>nc(t,e,t.length-e.length),js=t=>e=>e.replace(t,""),so=js(/^\s+|\s+$/g),rc=js(/^\s+/g),oc=js(/\s+$/g),Jn=t=>t.length>0,cs=t=>!Jn(t),zs=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?k.none():k.some(n)},Oa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Wr=t=>e=>Ye(e,t),Si=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Ye(t,"edge/")&&Ye(t,"chrome")&&Ye(t,"safari")&&Ye(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Oa],search:t=>Ye(t,"chrome")&&!Ye(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Ye(t,"msie")||Ye(t,"trident")},{name:"Opera",versionRegexes:[Oa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Wr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Wr("firefox")},{name:"Safari",versionRegexes:[Oa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Ye(t,"safari")||Ye(t,"mobile/"))&&Ye(t,"applewebkit")}],su=[{name:"Windows",search:Wr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Ye(t,"iphone")||Ye(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Wr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Wr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Wr("linux"),versionRegexes:[]},{name:"Solaris",search:Wr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Wr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Wr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],sc={browsers:ft(Si),oses:ft(su)},ki="Chromium",_i="Firefox",Ko=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isEdge:r("Edge"),isChromium:r(ki),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(_i),isSafari:r("Safari")}},Ba=()=>Ko({current:void 0,version:ls.unknown()}),ds=Ko,Ni=(ft("Edge"),ft(ki),ft("IE"),ft("Opera"),ft(_i),ft("Safari"),"Windows"),ac="Android",Ai="Solaris",Us="FreeBSD",Ti="ChromeOS",mr=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isWindows:r(Ni),isiOS:r("iOS"),isAndroid:r(ac),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(Ai),isFreeBSD:r(Us),isChromeOS:r(Ti)}},lc=()=>mr({current:void 0,version:ls.unknown()}),Hs=mr,au=(ft(Ni),ft("iOS"),ft(ac),ft("Linux"),ft("macOS"),ft(Ai),ft(Us),ft(Ti),t=>window.matchMedia(t).matches);let iu=Vo(()=>((t,e,n)=>{const r=sc.browsers(),o=sc.oses(),s=e.bind(l=>{return c=r,Qn(l.brands,f=>{const m=f.brand.toLowerCase();return Ze(c,b=>{var g;return m===(null===(g=b.brand)||void 0===g?void 0:g.toLowerCase())}).map(b=>({current:b.name,version:ls.nu(parseInt(f.version,10),0)}))});var c}).orThunk(()=>{return ec(r,c=t).map(u=>{const f=ls.detect(u.versionRegexes,c);return{current:u.name,version:f}});var c}).fold(Ba,ds),a=(l=o,c=t,ec(l,c).map(u=>{const f=ls.detect(u.versionRegexes,c);return{current:u.name,version:f}})).fold(lc,Hs),i=((l,c,u,f)=>{const m=l.isiOS()&&!0===/ipad/i.test(u),b=l.isiOS()&&!m,g=l.isiOS()||l.isAndroid(),v=g||f("(pointer:coarse)"),h=m||!b&&g&&f("(min-device-width:768px)"),C=b||g&&!h,S=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(u),E=!C&&!h&&!S;return{isiPad:ft(m),isiPhone:ft(b),isTablet:ft(h),isPhone:ft(C),isTouch:ft(v),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ft(S),isDesktop:ft(E)}})(a,s,t,n);var l,c;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,k.from(navigator.userAgentData),au));const Ln=()=>iu(),Xo=navigator.userAgent,qs=Ln(),Vr=qs.browser,Zn=qs.os,So=qs.deviceType,Ri=-1!==Xo.indexOf("Windows Phone"),be={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Vr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Vr.isIE(),windowsPhone:Ri,browser:{current:Vr.current,version:Vr.version,isChromium:Vr.isChromium,isEdge:Vr.isEdge,isFirefox:Vr.isFirefox,isIE:Vr.isIE,isOpera:Vr.isOpera,isSafari:Vr.isSafari},os:{current:Zn.current,version:Zn.version,isAndroid:Zn.isAndroid,isChromeOS:Zn.isChromeOS,isFreeBSD:Zn.isFreeBSD,isiOS:Zn.isiOS,isLinux:Zn.isLinux,isMacOS:Zn.isMacOS,isSolaris:Zn.isSolaris,isWindows:Zn.isWindows},deviceType:{isDesktop:So.isDesktop,isiPad:So.isiPad,isiPhone:So.isiPhone,isPhone:So.isPhone,isTablet:So.isTablet,isTouch:So.isTouch,isWebView:So.isWebView}},cc=/^\s*|\s*$/g,dc=t=>Se(t)?"":(""+t).replace(cc,""),Oi=function(t,e,n,r){r=r||this,t&&(n&&(t=t[n]),Is(t,(o,s)=>!1!==e.call(r,o,s,n)&&(Oi(o,e,n,r),!0)))},lt={trim:dc,isArray:Ci,is:(t,e)=>e?!("array"!==e||!Ci(t))||typeof t===e:void 0!==t,toArray:t=>{if(Ci(t))return t;{const e=[];for(let n=0,r=t.length;n<r;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const r=kt(t)?t.split(e||","):t||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:Is,map:Ta,grep:qr,inArray:(t,e)=>{if(t)for(let n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},hasOwn:Jt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(Jt(r,o)){const s=r[o];void 0!==s&&(t[o]=s)}}return t},walk:Oi,resolve:(t,e=window)=>{const n=t.split(".");for(let r=0,o=n.length;r<o&&(e=e[n[r]]);r++);return e},explode:(t,e)=>it(t)?t:""===t?[]:Ta(t.split(e||","),dc),_addCacheSuffix:t=>{const e=be.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},us=(t,e,n=no)=>t.exists(r=>n(r,e)),La=(t,e,n=no)=>xn(t,e,n).getOr(t.isNone()&&e.isNone()),xn=(t,e,n)=>t.isSome()&&e.isSome()?k.some(n(t.getOrDie(),e.getOrDie())):k.none(),fs=(t,e)=>t?k.some(e):k.none(),lu=typeof window<"u"?window:Function("return this;")(),uc=(t,e)=>((n,r)=>{let o=r??lu;for(let s=0;s<n.length&&null!=o;++s)o=o[n[s]];return o})(t.split("."),e),cu=Object.getPrototypeOf,pe=t=>t.dom.nodeName.toLowerCase(),Ma=t=>t.dom.nodeType,$s=t=>e=>Ma(e)===t,ms=t=>$n(t)&&(t=>{const e=uc("ownerDocument.defaultView",t);return Gt(t)&&((n=e,((r,o)=>{const s=uc(r,o);if(null==s)throw new Error(r+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(cu(t).constructor.name));var n})(t.dom),$n=$s(1),tr=$s(3),Di=$s(9),uu=$s(11),Eo=t=>e=>$n(e)&&pe(e)===t,Bi=(t,e,n)=>{if(!(kt(n)||Un(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},an=(t,e,n)=>{Bi(t.dom,e,n)},xr=(t,e)=>{const n=t.dom;Ae(e,(r,o)=>{Bi(n,o,r)})},er=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},ao=(t,e)=>k.from(er(t,e)),Ws=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},d=(t,e)=>{t.dom.removeAttribute(e)},p=t=>yn(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),y=(t,e)=>{const n=er(t,e);return void 0===n||""===n?[]:n.split(" ")},w=t=>void 0!==t.dom.classList,_=t=>y(t,"class"),T=(t,e)=>((n,r,o)=>{const s=y(n,r).concat([o]);return an(n,r,s.join(" ")),!0})(t,"class",e),R=(t,e)=>((n,r,o)=>{const s=Wt(y(n,r),a=>a!==o);return s.length>0?an(n,r,s.join(" ")):d(n,r),!1})(t,"class",e),U=(t,e)=>{w(t)?t.dom.classList.add(e):T(t,e)},z=t=>{0===(w(t)?t.dom.classList:_(t)).length&&d(t,"class")},K=(t,e)=>{w(t)?t.dom.classList.remove(e):R(t,e),z(t)},Z=(t,e)=>w(t)&&t.dom.classList.contains(e),st=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Y=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,t),new Error(r)}return st(n.childNodes[0])},ot=(t,e)=>{const n=(e||document).createElement(t);return st(n)},Xt=(t,e)=>{const n=(e||document).createTextNode(t);return st(n)},D=st,tn=(t,e)=>{const n=[],r=s=>(n.push(s),e(s));let o=e(t);do{o=o.bind(r)}while(o.isSome());return n},Be=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},wr=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,ue=(t,e)=>t.dom===e.dom,ve=(t,e)=>{const n=t.dom,r=e.dom;return n!==r&&n.contains(r)},ko=t=>D(t.dom.ownerDocument),ye=t=>Di(t)?t:ko(t),qe=t=>D(ye(t).dom.defaultView),Mn=t=>k.from(t.dom.parentNode).map(D),ps=t=>k.from(t.dom.parentElement).map(D),Sr=(t,e)=>{const n=Ce(e)?e:ke;let r=t.dom;const o=[];for(;null!=r.parentNode;){const s=r.parentNode,a=D(s);if(o.push(a),!0===n(a))break;r=s}return o},Er=t=>k.from(t.dom.previousSibling).map(D),ar=t=>k.from(t.dom.nextSibling).map(D),io=t=>ro(tn(t,Er)),Yo=t=>tn(t,ar),Oe=t=>ee(t.dom.childNodes,D),Ge=(t,e)=>k.from(t.dom.childNodes[e]).map(D),en=t=>Ge(t,0),kn=t=>Ge(t,t.dom.childNodes.length-1),Kr=t=>t.dom.childNodes.length,_n=t=>uu(t)&&dt(t.dom.host),oe=Ce(Element.prototype.attachShadow)&&Ce(Node.prototype.getRootNode),ln=ft(oe),Pe=oe?t=>D(t.dom.getRootNode()):ye,Fe=t=>_n(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return D(n)})(ye(t)),Xr=t=>D(t.dom.host),Go=t=>{if(ln()&&dt(t.target)){const e=D(t.target);if($n(e)&&Ia(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Pn(n)}}return k.from(t.target)},Ia=t=>dt(t.dom.shadowRoot),pr=t=>{const e=tr(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(r=>{const o=Pe(r);return _n(o)?k.some(o):k.none()})(D(e)).fold(()=>n.body.contains(e),Ls(pr,Xr))};var Fa=(t,e,n,r,o)=>t(n,r)?k.some(n):Ce(o)&&o(n)?k.none():e(n,r,o);const In=(t,e,n)=>{let r=t.dom;const o=Ce(n)?n:ke;for(;r.parentNode;){r=r.parentNode;const s=D(r);if(e(s))return k.some(s);if(o(s))break}return k.none()},_o=(t,e,n)=>Fa((r,o)=>o(r),In,t,e,n),gs=(t,e)=>{const n=r=>{for(let o=0;o<r.childNodes.length;o++){const s=D(r.childNodes[o]);if(e(s))return k.some(s);const a=n(r.childNodes[o]);if(a.isSome())return a}return k.none()};return n(t.dom)},No=(t,e,n)=>In(t,r=>Be(r,e),n),Ao=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return wr(o)?k.none():k.from(o.querySelector(n)).map(D)})(e,t),lo=(t,e,n)=>Fa((r,o)=>Be(r,o),No,t,e,n),Yr=(t,e=!1)=>{return pr(t)?t.dom.isContentEditable:(n=t,lo(n,"[contenteditable]")).fold(ft(e),r=>"true"===Pi(r));var n},Pi=t=>t.dom.contentEditable,Qo=t=>void 0!==t.style&&Ce(t.style.getPropertyValue),ja=(t,e,n)=>{if(!kt(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Qo(t)&&t.style.setProperty(e,n)},Li=(t,e,n)=>{ja(t.dom,e,n)},B=(t,e)=>{const n=t.dom;Ae(e,(r,o)=>{ja(n,o,r)})},$=(t,e)=>{const n=t.dom,r=window.getComputedStyle(n).getPropertyValue(e);return""!==r||pr(t)?r:tt(n,e)},tt=(t,e)=>Qo(t)?t.style.getPropertyValue(e):"",rt=(t,e)=>{const r=tt(t.dom,e);return k.from(r).filter(o=>o.length>0)},ut=t=>{const e={},n=t.dom;if(Qo(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);e[o]=n.style[o]}return e},jt=(t,e)=>{var n,r;r=e,Qo(n=t.dom)&&n.style.removeProperty(r),us(ao(t,"style").map(so),"")&&d(t,"style")},_t=(t,e)=>{Mn(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},zt=(t,e)=>{ar(t).fold(()=>{Mn(t).each(n=>{re(n,e)})},n=>{_t(n,e)})},It=(t,e)=>{en(t).fold(()=>{re(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},re=(t,e)=>{t.dom.appendChild(e.dom)},ge=(t,e)=>{_t(t,e),re(e,t)},fe=(t,e)=>{G(e,n=>{re(t,n)})},xe=t=>{t.dom.textContent="",G(Oe(t),e=>{Ot(e)})},Ot=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},je=t=>{const e=Oe(t);var n,r;e.length>0&&(n=t,G(r=e,(o,s)=>{zt(0===s?n:r[s-1],o)})),Ot(t)},wn=t=>ee(t,D),pn=t=>t.dom.innerHTML,Nn=(t,e)=>{const n=ko(t).dom,r=D(n.createDocumentFragment()),o=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,Oe(D(i))})(e,n);fe(r,o),xe(t),re(t,r)},kr=(t,e,n,r)=>{t.dom.removeEventListener(e,n,r)},$e=(t,e)=>({left:t,top:e,translate:(n,r)=>$e(t+n,e+r)}),gr=$e,nr=(t,e)=>void 0!==t?t:void 0!==e?e:0,hs=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?gr(n.offsetLeft,n.offsetTop):pr(t)?(r=>{const o=r.getBoundingClientRect();return gr(o.left,o.top)})(e):gr(0,0)},za=t=>{const e=void 0!==t?t.dom:document;return gr(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Mi=(t,e,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(t,e)},fc=(t,e)=>{Ln().browser.isSafari()&&Ce(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},vg=(t,e,n,r)=>({x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}),yg=t=>{const e=void 0===t?window:t,r=za(D(e.document));return(o=>{const s=void 0===o?window:o;return Ln().browser.isFirefox()?k.none():k.from(s.visualViewport)})(e).fold(()=>{const o=e.document.documentElement;return vg(r.left,r.top,o.clientWidth,o.clientHeight)},o=>vg(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},Cg=(t,e)=>{let n=[];return G(Oe(t),r=>{e(r)&&(n=n.concat([r])),n=n.concat(Cg(r,e))}),n},Fn=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return wr(o)?[]:ee(o.querySelectorAll(n),D)})(e,t),xg=(t,e,n)=>No(t,e,n).isSome();class un{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,r,o){if(e){if(!o&&e[n])return e[n];if(e!==this.rootNode){let s=e[r];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[r],s)return s}}}findPreviousNode(e,n){if(e){const r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let s=r.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return r}const o=e.parentNode;if(o&&o!==this.rootNode)return o}}}const Vs=t=>e=>!!e&&e.nodeType===t,mc=t=>!!t&&!Object.getPrototypeOf(t),xt=Vs(1),Jo=t=>xt(t)&&ms(D(t)),Ii=t=>{const e=t.toLowerCase();return n=>dt(n)&&n.nodeName.toLowerCase()===e},co=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return At(e,r)}return!1}},pc=(t,e)=>{const n=e.toLowerCase().split(" ");return r=>{if(xt(r)){const o=r.ownerDocument.defaultView;if(o)for(let s=0;s<n.length;s++){const a=o.getComputedStyle(r,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},wg=t=>e=>xt(e)&&e.hasAttribute(t),Ks=t=>xt(t)&&t.hasAttribute("data-mce-bogus"),Zo=t=>xt(t)&&"TABLE"===t.tagName,Sg=t=>e=>!(!Jo(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),fu=co(["textarea","input"]),at=Vs(3),hE=Vs(4),bE=Vs(7),bs=Vs(8),Fi=Vs(9),mu=Vs(11),Ve=Ii("br"),Eg=Ii("img"),Gr=Sg("true"),De=Sg("false"),gc=co(["td","th"]),vE=co(["td","th","caption"]),To=co(["video","audio","object","embed"]),yE=Ii("li"),pu=Ii("details"),CE=Ii("summary"),gn="\xa0",gu=t=>"\ufeff"===t,hu=((t,e)=>{const n=r=>t(r)?k.from(r.dom.nodeValue):k.none();return{get:r=>{if(!t(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!t(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(tr),hc=t=>hu.get(t),kg=t=>hu.getOption(t),Ua=t=>{let e;return n=>(e=e||Bn(t,Ie),Jt(e,pe(n)))},Xs=t=>$n(t)&&"br"===pe(t),_g=Ua(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),bu=Ua(["ul","ol","dl"]),zi=Ua(["li","dd","dt"]),xE=Ua(["thead","tbody","tfoot"]),Ui=Ua(["td","th"]),bc=Ua(["pre","script","textarea","style"]),Hi=()=>{const t=ot("br");return an(t,"data-mce-bogus","1"),t},vs=t=>{xe(t),re(t,Hi())},hn="\ufeff",vc=gu,hr=t=>t.replace(/\uFEFF/g,""),wE=xt,Ha=at,qa=t=>(Ha(t)&&(t=t.parentNode),wE(t)&&t.hasAttribute("data-mce-caret")),ys=t=>Ha(t)&&vc(t.data),_r=t=>qa(t)||ys(t),Ng=t=>t.firstChild!==t.lastChild||!Ve(t.firstChild),vu=t=>{const e=t.container();return!!at(e)&&(e.data.charAt(t.offset())===hn||t.isAtStart()&&ys(e.previousSibling))},yu=t=>{const e=t.container();return!!at(e)&&(e.data.charAt(t.offset()-1)===hn||t.isAtEnd()&&ys(e.nextSibling))},yc=t=>Ha(t)&&t.data[0]===hn,Cc=t=>Ha(t)&&t.data[t.data.length-1]===hn,Cu=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const r=e.getElementsByTagName("br"),o=r[r.length-1];Ks(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Ag=t=>qa(t.startContainer),Tg=Gr,SE=De,EE=Ve,kE=at,_E=co(["script","style","textarea"]),Rg=co(["img","input","textarea","hr","iframe","video","audio","object","embed"]),NE=co(["table"]),AE=_r,Qr=t=>!AE(t)&&(kE(t)?!_E(t.parentNode):Rg(t)||EE(t)||NE(t)||xu(t)),xu=t=>{return!(xt(e=t)&&"true"===e.getAttribute("unselectable"))&&SE(t);var e},Og=(t,e)=>Qr(t)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(xu(o))return!1;if(Tg(o))return!0}return!0})(t,e),TE=/^[ \t\r\n]*$/,Cs=t=>TE.test(t),RE=t=>{for(const e of t)if(!gu(e))return!1;return!0},Dg=t=>"\n"===t||"\r"===t,Bg=(t,e=4,n=!0,r=!0)=>{const o=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,o);var l;return yn(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===gn?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&r||(u=i.str.length+1)<(c=s).length&&u>=0&&Dg(c[u])?{pcIsSpace:!1,str:i.str+gn}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Dg(l),str:i.str+l};var c,u},{pcIsSpace:!1,str:""}).str},xc=(t,e)=>{return Qr(t)&&(r=e,!(at(n=t)&&Cs(n.data)&&!((o,s)=>{const a=D(s),i=D(o);return xg(i,"pre,code",vt(ue,a))})(n,r)))||(n=>xt(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||OE(t);var n,r},OE=wg("data-mce-bookmark"),DE=wg("data-mce-bogus"),BE=t=>xt(t)&&"all"===t.getAttribute("data-mce-bogus"),PE=t=>ps(D(t)).exists(e=>!Yr(e)),Qe=(t,e=!0)=>((n,r)=>{let o=0;if(xc(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const a=new un(s,n);do{if(r){if(BE(s)){s=a.next(!0);continue}if(DE(s)){s=a.next();continue}}if(Gr(s)&&PE(s))return!1;if(Ve(s))o++,s=a.next();else{if(xc(s,n))return!1;s=a.next()}}while(s);return o<=1}})(t.dom,e),Ys=t=>"svg"===t.toLowerCase(),wu=t=>Ys(t.nodeName),Pg=t=>"svg"===t?.nodeName?"svg":"html",LE=["svg"],wc="data-mce-block",Su=t=>{return ee((e=t,Wt(on(e),n=>!/[A-Z]/.test(n))),e=>`${e}:`+ee(LE,n=>`not(${n} ${e})`).join(":")).join(",");var e},Lg=(t,e)=>dt(e.querySelector(t))?(e.setAttribute(wc,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(wc),!1),Mg=(t,e)=>{const n=Su(t.getTransparentElements()),r=Su(t.getBlockElements());return Wt(e.querySelectorAll(n),o=>Lg(r,o))},Ig=(t,e)=>{var n;const r=e?"lastChild":"firstChild";for(let o=t[r];o;o=o[r])if(Qe(D(o)))return void(null===(n=o.parentNode)||void 0===n||n.removeChild(o))},Eu=(t,e)=>{const n=Mg(t,e);var r,o,s;((t,e,n)=>{const r=t.getBlockElements(),o=D(e),s=i=>pe(i)in r,a=i=>ue(i,o);G(wn(n),i=>{In(i,s,a).each(l=>{const c=Wt(Oe(i),m=>s(m)&&!t.isValidChild(pe(l),pe(m)));if(c.length>0){const u=ps(l);G(c,f=>{In(f,s,a).each(m=>{((b,g)=>{const v=document.createRange(),h=b.parentNode;if(h){v.setStartBefore(b),v.setEndBefore(g);const C=v.extractContents();Ig(C,!0),v.setStartAfter(g),v.setEndAfter(b);const S=v.extractContents();Ig(S,!1),Qe(D(C))||h.insertBefore(C,b),Qe(D(g))||h.insertBefore(g,b),Qe(D(S))||h.insertBefore(S,b),h.removeChild(b)}})(m.dom,f.dom)})}),u.each(f=>Mg(t,f.dom))}})})})(t,e,n),r=t,o=e,s=n,G([...s,...Gs(r,o)?[o]:[]],a=>G(Fn(D(a),a.nodeName.toLowerCase()),i=>{FE(r,i.dom)&&je(i)}))},IE=(t,e)=>{if(Nu(t,e)){const n=Su(t.getBlockElements());Lg(n,e)}},ku=t=>t.hasAttribute(wc),_u=(t,e)=>Jt(t.getTransparentElements(),e),Nu=(t,e)=>xt(e)&&_u(t,e.nodeName),Gs=(t,e)=>Nu(t,e)&&ku(e),FE=(t,e)=>Nu(t,e)&&!ku(e),Au=(t,e)=>1===e.type&&_u(t,e.name)&&kt(e.attr(wc)),jE=Ln().browser,Fg=t=>Ze(t,$n),jg=(t,e)=>t.children&&At(t.children,e),zg=(t,e={})=>{let n=0;const r={},o=D(t),s=ye(o),a=f=>{re(Fe(o),f)},i=f=>{const m=Fe(o);Ao(m,"#"+f).each(Ot)},l=f=>Te(r,f).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=f=>new Promise((m,b)=>{let g;const v=lt._addCacheSuffix(f),h=l(v);r[v]=h,h.count++;const C=(N,O)=>{G(N,Gn),h.status=O,h.passed=[],h.failed=[],g&&(g.onload=null,g.onerror=null,g=null)},S=()=>C(h.passed,2),E=()=>C(h.failed,3);if(m&&h.passed.push(m),b&&h.failed.push(b),1===h.status)return;if(2===h.status)return void S();if(3===h.status)return void E();h.status=1;const A=ot("link",s.dom);xr(A,{rel:"stylesheet",type:"text/css",id:h.id}),e.contentCssCors&&an(A,"crossOrigin","anonymous"),e.referrerPolicy&&an(A,"referrerpolicy",e.referrerPolicy),g=A.dom,g.onload=S,g.onerror=E,a(A),an(A,"href",v)}),u=f=>{const m=lt._addCacheSuffix(f);Te(r,m).each(b=>{0==--b.count&&(delete r[m],i(b.id))})};return{load:c,loadRawCss:(f,m)=>{const b=l(f);r[f]=b,b.count++;const g=ot("style",s.dom);xr(g,{rel:"stylesheet",type:"text/css",id:b.id}),g.dom.innerHTML=m,a(g)},loadAll:f=>Promise.allSettled(ee(f,m=>c(m).then(ft(m)))).then(m=>{const b=Ur(m,g=>"fulfilled"===g.status);return b.fail.length>0?Promise.reject(ee(b.fail,g=>g.reason)):ee(b.pass,g=>g.value)}),unload:u,unloadRawCss:f=>{Te(r,f).each(m=>{0==--m.count&&(delete r[f],i(m.id))})},unloadAll:f=>{G(f,m=>{u(m)})},_setReferrerPolicy:f=>{e.referrerPolicy=f},_setContentCssCors:f=>{e.contentCssCors=f}}},Ug=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const r=Pe(e).dom;return k.from(t.get(r)).getOrThunk(()=>{const o=zg(r,n);return t.set(r,o),o})}}})(),Hg=(t,e,n)=>dt(t)&&(xc(t,e)||n.isInline(t.nodeName.toLowerCase())),qg=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Tu=(t,e,n,r)=>{var o;const s=r||e;if(xt(e)&&qg(e))return e;const a=e.childNodes;for(let i=a.length-1;i>=0;i--)Tu(t,a[i],n,s);if(xt(e)){const i=e.childNodes;1===i.length&&qg(i[0])&&(null===(o=e.parentNode)||void 0===o||o.insertBefore(i[0],e))}return mu(i=e)||Fi(i)||xc(e,s)||(i=>!!xt(i)&&i.childNodes.length>0)(e)||((i,l,c)=>at(i)&&i.data.length>0&&((u,f,m)=>{const b=new un(u,f).prev(!1),g=new un(u,f).next(!1),v=Me(b)||Hg(b,f,m),h=Me(g)||Hg(g,f,m);return v&&h})(i,l,c))(e,s,n)||t.remove(e),e;var i},zE=lt.makeMap,Sc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ec=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,UE=/[<>&\"\']/g,HE=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,qE={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Qs={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},$E={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},$g=(t,e)=>{const n={};if(t){const r=t.split(",");e=e||10;for(let o=0;o<r.length;o+=2){const s=String.fromCharCode(parseInt(r[o],e));if(!Qs[s]){const a="&"+r[o+1]+";";n[s]=a,n[a]=s}}return n}},Ru=$g("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Wg=(t,e)=>t.replace(e?Sc:Ec,n=>Qs[n]||n),Vg=(t,e)=>t.replace(e?Sc:Ec,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Qs[n]||"&#"+n.charCodeAt(0)+";"),Ou=(t,e,n)=>{const r=n||Ru;return t.replace(e?Sc:Ec,o=>Qs[o]||r[o]||o)},xs={encodeRaw:Wg,encodeAllRaw:t=>(""+t).replace(UE,e=>Qs[e]||e),encodeNumeric:Vg,encodeNamed:Ou,getEncodeFunc:(t,e)=>{const n=$g(e)||Ru,r=zE(t.replace(/\+/g,","));return r.named&&r.numeric?(o,s)=>o.replace(s?Sc:Ec,a=>void 0!==Qs[a]?Qs[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):r.named?e?(o,s)=>Ou(o,s,n):Ou:r.numeric?Vg:Wg},decode:t=>t.replace(HE,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):qE[n]||String.fromCharCode(n):$E[e]||Ru[e]||(r=>{const o=ot("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(e))},An=(t,e)=>(t=lt.trim(t))?t.split(e||" "):[],Kg=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),kc={},qi=lt.makeMap,uo=lt.each,Du=lt.extend,Xg=lt.explode,Yg=(t,e={})=>{const n=qi(t," ",qi(t.toUpperCase()," "));return Du(n,e)},Gg=t=>Yg("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Bu=(t,e)=>{if(t){const n={};return kt(t)&&(t={"*":t}),uo(t,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===e?qi(r,/[, ]/):Xg(r,/[, ]/)}),n}},ws=(t={})=>{var e;const n={},r={};let o=[];const s={},a={},i=(Et,se,le)=>{const Qt=t[Et];if(Qt)return qi(Qt,/[, ]/,qi(Qt.toUpperCase(),/[, ]/));{let ce=kc[Et];return ce||(ce=Yg(se,le),kc[Et]=ce),ce}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(Et=>{const{globalAttributes:se,phrasingContent:le,flowContent:Qt}=(ze=>{let cn,Sn,Xn;cn="id accesskey class dir lang style tabindex title role",Sn="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",Xn="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==ze&&(cn+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",Sn+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",Xn+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==ze&&(cn+=" xml:lang",Xn=[Xn,"acronym applet basefont big font strike tt"].join(" "),Sn=[Sn,"center dir isindex noframes"].join(" "));const Ir=[Sn,Xn].join(" ");return{globalAttributes:cn,blockContent:Sn,phrasingContent:Xn,flowContent:Ir}})(Et),ce={},mn=(ze,cn,Sn)=>{ce[ze]={attributes:Bn(cn,ft({})),attributesOrder:cn,children:Bn(Sn,ft({}))}},Bt=(ze,cn="",Sn="")=>{const Xn=An(Sn),Ir=An(ze);let Tn=Ir.length;const Fr=An([se,cn].join(" "));for(;Tn--;)mn(Ir[Tn],Fr.slice(),Xn)},ie=(ze,cn)=>{const Sn=An(ze),Xn=An(cn);let Ir=Sn.length;for(;Ir--;){const Tn=ce[Sn[Ir]];for(let Fr=0,dn=Xn.length;Fr<dn;Fr++)Tn.attributes[Xn[Fr]]={},Tn.attributesOrder.push(Xn[Fr])}};return"html5-strict"!==Et&&(G(An("acronym applet basefont big font strike tt"),ze=>{Bt(ze,"",le)}),G(An("center dir isindex noframes"),ze=>{Bt(ze,"",Qt)})),Bt("html","manifest","head body"),Bt("head","","base command link meta noscript script style title"),Bt("title hr noscript br"),Bt("base","href target"),Bt("link","href rel media hreflang type sizes hreflang"),Bt("meta","name http-equiv content charset"),Bt("style","media type scoped"),Bt("script","src async defer type charset"),Bt("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Qt),Bt("dd div","",Qt),Bt("address dt caption","","html4"===Et?le:Qt),Bt("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",le),Bt("blockquote","cite",Qt),Bt("ol","reversed start type","li"),Bt("ul","","li"),Bt("li","value",Qt),Bt("dl","","dt dd"),Bt("a","href target rel media hreflang type","html4"===Et?le:Qt),Bt("q","cite",le),Bt("ins del","cite datetime",Qt),Bt("img","src sizes srcset alt usemap ismap width height"),Bt("iframe","src name width height",Qt),Bt("embed","src type width height"),Bt("object","data type typemustmatch name usemap form width height",[Qt,"param"].join(" ")),Bt("param","name value"),Bt("map","name",[Qt,"area"].join(" ")),Bt("area","alt coords shape href target rel media hreflang type"),Bt("table","border","caption colgroup thead tfoot tbody tr"+("html4"===Et?" col":"")),Bt("colgroup","span","col"),Bt("col","span"),Bt("tbody thead tfoot","","tr"),Bt("tr","","td th"),Bt("td","colspan rowspan headers",Qt),Bt("th","colspan rowspan headers scope abbr",Qt),Bt("form","accept-charset action autocomplete enctype method name novalidate target",Qt),Bt("fieldset","disabled form name",[Qt,"legend"].join(" ")),Bt("label","form for",le),Bt("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),Bt("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===Et?Qt:le),Bt("select","disabled form multiple name required size","option optgroup"),Bt("optgroup","disabled label","option"),Bt("option","disabled label selected value"),Bt("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),Bt("menu","type label",[Qt,"li"].join(" ")),Bt("noscript","",Qt),"html4"!==Et&&(Bt("wbr"),Bt("ruby","",[le,"rt rp"].join(" ")),Bt("figcaption","",Qt),Bt("mark rt rp bdi","",le),Bt("summary","",[le,"h1 h2 h3 h4 h5 h6"].join(" ")),Bt("canvas","width height",Qt),Bt("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Qt,"track source"].join(" ")),Bt("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Qt,"track source"].join(" ")),Bt("picture","","img source"),Bt("source","src srcset type media sizes"),Bt("track","kind src srclang label default"),Bt("datalist","",[le,"option"].join(" ")),Bt("article section nav aside main header footer","",Qt),Bt("hgroup","","h1 h2 h3 h4 h5 h6"),Bt("figure","",[Qt,"figcaption"].join(" ")),Bt("time","datetime",le),Bt("dialog","open",Qt),Bt("command","type label icon disabled checked radiogroup command"),Bt("output","for form name",le),Bt("progress","value max",le),Bt("meter","value min max low high optimum",le),Bt("details","open",[Qt,"summary"].join(" ")),Bt("keygen","autofocus challenge disabled form keytype name"),mn("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==Et&&(ie("script","language xml:space"),ie("style","xml:space"),ie("object","declare classid code codebase codetype archive standby align border hspace vspace"),ie("embed","align name hspace vspace"),ie("param","valuetype type"),ie("a","charset name rev shape coords"),ie("br","clear"),ie("applet","codebase archive code object alt name width height align hspace vspace"),ie("img","name longdesc align border hspace vspace"),ie("iframe","longdesc frameborder marginwidth marginheight scrolling align"),ie("font basefont","size color face"),ie("input","usemap align"),ie("select"),ie("textarea"),ie("h1 h2 h3 h4 h5 h6 div p legend caption","align"),ie("ul","type compact"),ie("li","type"),ie("ol dl menu dir","compact"),ie("pre","width xml:space"),ie("hr","align noshade size width"),ie("isindex","prompt"),ie("table","summary width frame rules cellspacing cellpadding align bgcolor"),ie("col","width align char charoff valign"),ie("colgroup","width align char charoff valign"),ie("thead","align char charoff valign"),ie("tr","align char charoff valign bgcolor"),ie("th","axis align char charoff valign nowrap bgcolor width height"),ie("form","accept"),ie("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),ie("tfoot","align char charoff valign"),ie("tbody","align char charoff valign"),ie("area","nohref"),ie("body","background bgcolor text link vlink alink")),"html4"!==Et&&(ie("input button select textarea","autofocus"),ie("input textarea","placeholder"),ie("a","download"),ie("link script img","crossorigin"),ie("img","loading"),ie("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==Et&&G([ce.video,ce.audio],ze=>{delete ze.children.audio,delete ze.children.video}),G(An("a form meter progress dfn"),ze=>{ce[ze]&&delete ce[ze].children[ze]}),delete ce.caption.children.table,delete ce.script,ce})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const u=Bu(t.valid_styles),f=Bu(t.invalid_styles,"map"),m=Bu(t.valid_classes,"map"),b=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),C="td th iframe video audio object script code",S=i("non_empty_elements",C+" pre svg",v),E=i("move_caret_before_on_enter_elements",C+" table",v),A="h1 h2 h3 h4 h5 h6",N=i("text_block_elements",A+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),O=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",N),M=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),j=i("transparent_elements","a ins del canvas map"),H=i("wrap_block_elements","pre "+A);uo("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Et=>{a[Et]=new RegExp("</"+Et+"[^>]*>","gi")});const W=Et=>{const se=k.from(n["@"]),le=/[*?+]/;G(((Qt,ce)=>{const mn=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return rn(An(ce,","),Bt=>{const ie=mn.exec(Bt);if(ie){const ze=ie[1],cn=ie[2],Sn=ie[3],Xn=ie[4],Ir=ie[5],Tn={attributes:{},attributesOrder:[]};if(Qt.each(Fr=>{return ss=Tn,Ae((dn=Fr).attributes,(jr,eo)=>{ss.attributes[eo]=jr}),void ss.attributesOrder.push(...dn.attributesOrder);var dn,ss}),"#"===ze?Tn.paddEmpty=!0:"-"===ze&&(Tn.removeEmpty=!0),"!"===Xn&&(Tn.removeEmptyAttrs=!0),Ir&&((Fr,dn)=>{const ss=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,jr=/[*?+]/,{attributes:eo,attributesOrder:wa}=dn;G(An(Fr,"|"),Yl=>{const Sa=ss.exec(Yl);if(Sa){const zr={},nu=Sa[1],Ue=Sa[2].replace(/[\\:]:/g,":"),bo=Sa[3],Ea=Sa[4];if("!"===nu&&(dn.attributesRequired=dn.attributesRequired||[],dn.attributesRequired.push(Ue),zr.required=!0),"-"===nu)return delete eo[Ue],void wa.splice(lt.inArray(wa,Ue),1);if(bo&&("="===bo?(dn.attributesDefault=dn.attributesDefault||[],dn.attributesDefault.push({name:Ue,value:Ea}),zr.defaultValue=Ea):"~"===bo?(dn.attributesForced=dn.attributesForced||[],dn.attributesForced.push({name:Ue,value:Ea}),zr.forcedValue=Ea):"<"===bo&&(zr.validValues=lt.makeMap(Ea,"?"))),jr.test(Ue)){const Gl=zr;dn.attributePatterns=dn.attributePatterns||[],Gl.pattern=Kg(Ue),dn.attributePatterns.push(Gl)}else eo[Ue]||wa.push(Ue),eo[Ue]=zr}})})(Ir,Tn),Sn&&(Tn.outputName=cn),"@"===cn){if(!Qt.isNone())return[];Qt=k.some(Tn)}return[Sn?{name:cn,element:Tn,aliasName:Sn}:{name:cn,element:Tn}]}return[]})})(se,Et??""),({name:Qt,element:ce,aliasName:mn})=>{if(mn&&(n[mn]=ce),le.test(Qt)){const Bt=ce;Bt.pattern=Kg(Qt),o.push(Bt)}else n[Qt]=ce})},P=Et=>{o=[],G(on(n),se=>{delete n[se]}),W(Et)},I=Et=>{delete kc.text_block_elements,delete kc.block_elements,G((se=>{const le=/^(~)?(.+)$/;return rn(An(se,","),Qt=>{const ce=le.exec(Qt);if(ce){const mn="~"===ce[1];return[{inline:mn,cloneName:mn?"span":"div",name:ce[2]}]}return[]})})(Et??""),({inline:se,name:le,cloneName:Qt})=>{if(r[le]=r[Qt],s[le]=Qt,S[le.toUpperCase()]={},S[le]={},se||(O[le.toUpperCase()]={},O[le]={}),!n[le]){let ce=n[Qt];ce=Du({},ce),delete ce.removeEmptyAttrs,delete ce.removeEmpty,n[le]=ce}Ae(r,(ce,mn)=>{ce[Qt]&&(r[mn]=ce=Du({},r[mn]),ce[le]=ce[Qt])})})},q=Et=>{G((se=>{const le=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return rn(An(se,","),Qt=>{const ce=le.exec(Qt);if(ce){const mn=ce[1];return[{operation:mn?(ie=>"-"===ie?"remove":"add")(mn):"replace",name:ce[2],validChildren:An(ce[3],"|")}]}return[]})})(Et??""),({operation:se,name:le,validChildren:Qt})=>{const ce="replace"===se?{"#comment":{}}:r[le];G(Qt,mn=>{"remove"===se?delete ce[mn]:ce[mn]={}}),r[le]=ce})},Q=Et=>{const se=n[Et];if(se)return se;let le=o.length;for(;le--;){const Qt=o[le];if(Qt.pattern.test(Et))return Qt}};t.valid_elements?(P(t.valid_elements),uo(c,(Et,se)=>{r[se]=Et.children})):(uo(c,(Et,se)=>{n[se]={attributes:Et.attributes,attributesOrder:Et.attributesOrder},r[se]=Et.children}),uo(An("strong/b em/i"),Et=>{const se=An(Et,"/");n[se[1]].outputName=se[0]}),uo(M,(Et,se)=>{n[se]&&(t.padd_empty_block_inline_children&&(n[se].paddInEmptyBlock=!0),n[se].removeEmpty=!0)}),uo(An("ol ul blockquote a table tbody"),Et=>{n[Et]&&(n[Et].removeEmpty=!0)}),uo(An("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Et=>{n[Et]&&(n[Et].paddEmpty=!0)}),uo(An("span"),Et=>{n[Et].removeEmptyAttrs=!0})),delete n.svg,I(t.custom_elements),q(t.valid_children),W(t.extended_valid_elements),q("+ol[ul|ol],+ul[ul|ol]"),uo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Et,se)=>{n[se]&&(n[se].parentsRequired=An(Et))}),t.invalid_elements&&uo(Xg(t.invalid_elements),Et=>{n[Et]&&delete n[Et]}),Q("span")||W("span[!data-mce-type|*]");const mt=ft(u),ct=ft(f),Rt=ft(m),Nt=ft(h),Mt=ft(O),Dt=ft(N),gt=ft(M),yt=ft(Object.seal(v)),$t=ft(g),L=ft(S),F=ft(E),J=ft(b),et=ft(j),nt=ft(H),Ct=ft(Object.seal(a)),Pt=(Et,se)=>{const le=Q(Et);if(le){if(!se)return!0;{if(le.attributes[se])return!0;const Qt=le.attributePatterns;if(Qt){let ce=Qt.length;for(;ce--;)if(Qt[ce].pattern.test(se))return!0}}}return!1},Vt=Et=>Jt(Mt(),Et),Ft=Et=>!sn(Et,"#")&&Pt(Et)&&!Vt(Et),_e=ft(s);return{type:l,children:r,elements:n,getValidStyles:mt,getValidClasses:Rt,getBlockElements:Mt,getInvalidStyles:ct,getVoidElements:yt,getTextBlockElements:Dt,getTextInlineElements:gt,getBoolAttrs:Nt,getElementRule:Q,getSelfClosingElements:$t,getNonEmptyElements:L,getMoveCaretBeforeOnEnterElements:F,getWhitespaceElements:J,getTransparentElements:et,getSpecialElements:Ct,isValidChild:(Et,se)=>{const le=r[Et.toLowerCase()];return!(!le||!le[se.toLowerCase()])},isValid:Pt,isBlock:Vt,isInline:Ft,isWrapper:Et=>Jt(nt(),Et)||Ft(Et),getCustomElements:_e,addValidElements:W,setValidElements:P,addCustomElements:I,addValidChildren:q}},Pu=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},WE=t=>{return{value:(n=Pu(t.red)+Pu(t.green)+Pu(t.blue),wi(n,"#").toUpperCase())};var n},VE=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,KE=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Qg=(t,e,n,r)=>({red:t,green:e,blue:n,alpha:r}),Jg=(t,e,n,r)=>{const o=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(r);return Qg(o,s,a,i)},Zg=t=>{if("transparent"===t)return k.some(Qg(0,0,0,0));const e=VE.exec(t);if(null!==e)return k.some(Jg(e[1],e[2],e[3],"1"));const n=KE.exec(t);return null!==n?k.some(Jg(n[1],n[2],n[3],n[4])):k.none()},XE=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,$i=t=>Zg(t).map(WE).map(e=>"#"+e.value).getOr(t),Lu=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let f=0;f<c.length;f++)s[c[f]]="\ufeff"+f,s["\ufeff"+f]=c[f];const u={parse:f=>{const m={};let b=!1;const g=t.url_converter,v=t.url_converter_scope||u,h=(W,P,I)=>{const q=m[W+"-top"+P];if(!q)return;const Q=m[W+"-right"+P];if(!Q)return;const mt=m[W+"-bottom"+P];if(!mt)return;const ct=m[W+"-left"+P];if(!ct)return;const Rt=[q,Q,mt,ct];let Nt=Rt.length-1;for(;Nt--&&Rt[Nt]===Rt[Nt+1];);Nt>-1&&I||(m[W+P]=-1===Nt?Rt[0]:Rt.join(" "),delete m[W+"-top"+P],delete m[W+"-right"+P],delete m[W+"-bottom"+P],delete m[W+"-left"+P])},C=W=>{const P=m[W];if(!P)return;const I=P.indexOf(",")>-1?[P]:P.split(" ");let q=I.length;for(;q--;)if(I[q]!==I[0])return!1;return m[W]=I[0],!0},S=W=>(b=!0,s[W]),E=(W,P)=>(b&&(W=W.replace(/\uFEFF[0-9]/g,I=>s[I])),P||(W=W.replace(/\\([\'\";:])/g,"$1")),W),A=W=>String.fromCharCode(parseInt(W.slice(1),16)),N=W=>W.replace(/\\[0-9a-f]+/gi,A),O=(W,P,I,q,Q,mt)=>{if(Q=Q||mt)return"'"+(Q=E(Q)).replace(/\'/g,"\\'")+"'";if(P=E(P||I||q||""),!t.allow_script_urls){const ct=P.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(ct)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(ct))return""}return g&&(P=g.call(v,P,"style")),"url('"+P.replace(/\'/g,"\\'")+"')"};if(f){let W;for(f=(f=f.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,S).replace(/\"[^\"]+\"|\'[^\']+\'/g,P=>P.replace(/[;:]/g,S));W=r.exec(f);){r.lastIndex=W.index+W[0].length;let P=W[1].replace(o,"").toLowerCase(),I=W[2].replace(o,"");if(P&&I){if(P=N(P),I=N(I),-1!==P.indexOf("\ufeff")||-1!==P.indexOf('"')||!t.allow_script_urls&&("behavior"===P||/expression\s*\(|\/\*|\*\//.test(I)))continue;"font-weight"===P&&"700"===I?I="bold":"color"!==P&&"background-color"!==P||(I=I.toLowerCase()),kt(t.force_hex_color)&&"off"!==t.force_hex_color&&Zg(I).each(q=>{"always"!==t.force_hex_color&&1!==q.alpha||(I=$i(XE(q)))}),I=I.replace(n,O),m[P]=b?E(I,!0):I}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),j="border-style",H="border-color",C(M="border-width")&&C(j)&&C(H)&&(m.border=m[M]+" "+m[j]+" "+m[H],delete m[M],delete m[j],delete m[H]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}var M,j,H;return m},serialize:(f,m)=>{let b="";const g=(v,h)=>{const C=h[v];if(C)for(let S=0,E=C.length;S<E;S++){const A=C[S],N=f[A];N&&(b+=(b.length>0?" ":"")+A+": "+N+";")}};return m&&a?(g("*",a),g(m,a)):Ae(f,(v,h)=>{v&&((C,S)=>{if(!i||!S)return!0;let E=i["*"];return!(E&&E[C]||(E=i[S],E&&E[C]))})(h,m)&&(b+=(b.length>0?" ":"")+h+": "+v+";")}),b}};return u},YE={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},th=(t,e)=>{const n=e??{};for(const r in t)Jt(YE,r)||(n[r]=t[r]);return dt(t.composedPath)&&(n.composedPath=()=>t.composedPath()),dt(t.getModifierState)&&(n.getModifierState=r=>t.getModifierState(r)),dt(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},Mu=(t,e,n,r)=>{var o;const s=th(e,r);return s.type=t,Se(s.target)&&(s.target=null!==(o=s.srcElement)&&void 0!==o?o:n),(Se((a=e).preventDefault)||(i=a)instanceof Event||Ce(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Ie,Ce(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Ie,Ce(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Ie,s.stopPropagation()},(a=>a.isDefaultPrevented===Ie||a.isDefaultPrevented===ke)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Ie:ke,s.isPropagationStopped=!0===s.cancelBubble?Ie:ke,s.isImmediatePropagationStopped=ke)),s;var a,i},GE=/^(?:mouse|contextmenu)|click/,Iu=(t,e,n,r)=>{t.addEventListener(e,n,r||!1)},_c=(t,e,n,r)=>{t.removeEventListener(e,n,r||!1)},Wi=(t,e)=>{const n=Mu(t.type,t,document,e);if(dt(r=t)&&GE.test(r.type)&&Me(t.pageX)&&!Me(t.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,s=r.body,a=n;a.pageX=t.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}var r;return n},QE=(t,e,n)=>{const r=t.document,o={type:"ready"};if(n.domLoaded)return void e(o);const s=()=>{_c(t,"DOMContentLoaded",s),_c(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(o)),t=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?s():Iu(t,"DOMContentLoaded",s),n.domLoaded||Iu(t,"load",s)};class Js{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,r,o){const s=this;let a;const i=window,l=m=>{s.executeHandlers(Wi(m||i.event),c)};if(!e||at(e)||bs(e))return r;let c;e[s.expando]?c=e[s.expando]:(c=s.count++,e[s.expando]=c,s.events[c]={}),o=o||e;const u=n.split(" ");let f=u.length;for(;f--;){let m=u[f],b=l,g=!1,v=!1;"DOMContentLoaded"===m&&(m="ready"),s.domLoaded&&"ready"===m&&"complete"===e.readyState?r.call(o,Wi({type:m})):(s.hasFocusIn||"focusin"!==m&&"focusout"!==m||(g=!0,v="focusin"===m?"focus":"blur",b=h=>{const C=Wi(h||i.event);C.type="focus"===C.type?"focusin":"focusout",s.executeHandlers(C,c)}),a=s.events[c][m],a?"ready"===m&&s.domLoaded?r(Wi({type:m})):a.push({func:r,scope:o}):(s.events[c][m]=a=[{func:r,scope:o}],a.fakeName=v,a.capture=g,a.nativeHandler=b,"ready"===m?QE(e,b,s):Iu(e,v||m,b,g)))}return e=a=null,r}unbind(e,n,r){if(!e||at(e)||bs(e))return this;const o=e[this.expando];if(o){let s=this.events[o];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(r){let u=c.length;for(;u--;)if(c[u].func===r){const f=c.nativeHandler,m=c.fakeName,b=c.capture,g=c.slice(0,u).concat(c.slice(u+1));g.nativeHandler=f,g.fakeName=m,g.capture=b,s[l]=g}}r&&0!==c.length||(delete s[l],_c(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else Ae(s,(a,i)=>{_c(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(Jt(s,a))return this;delete this.events[o];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,r){return this.dispatch(e,n,r)}dispatch(e,n,r){if(!e||at(e)||bs(e))return this;const o=Wi({type:n,target:e},r);do{const s=e[this.expando];s&&this.executeHandlers(o,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}clean(e){if(!e||at(e)||bs(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let r=n.length;for(;r--;)(e=n[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const r=this.events[n],o=r&&r[e.type];if(o)for(let s=0,a=o.length;s<a;s++){const i=o[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Js.Event=new Js;const Fu=lt.each,JE=lt.grep,ju="data-mce-style",ZE=lt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Vi=(t,e,n)=>{Se(n)||""===n?d(t,e):an(t,e,n)},eh=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),$a=(t,e)=>{let n=0;if(t)for(let r=t.nodeType,o=t.previousSibling;o;o=o.previousSibling){const s=o.nodeType;(!e||!at(o)||s!==r&&o.data.length)&&(n++,r=s)}return n},nh=(t,e)=>{const n=er(e,"style"),r=t.serialize(t.parse(n),pe(e));Vi(e,ju,r)},rh=(t,e,n)=>{const r=eh(e);var o,s;Se(n)||""===n?jt(t,r):Li(t,r,(s=r,x(o=n)?Jt(ZE,s)?o+"":o+"px":o))},Re=(t,e={})=>{const n={},r=window,o={};let s=0;const a=Ug.forElement(D(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:ws({}),c=Lu({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope,force_hex_color:e.force_hex_color},e.schema),u=e.ownEvents?new Js:Js.Event,f=l.getBlockElements(),m=L=>L&&t&&kt(L)?t.getElementById(L):L,b=L=>{const F=m(L);return dt(F)?D(F):null},g=(L,F,J="")=>{let et;const nt=b(L);if(dt(nt)&&$n(nt)){const Ct=$t[F];et=Ct&&Ct.get?Ct.get(nt.dom,F):er(nt,F)}return dt(et)?et:J},v=L=>{const F=m(L);return Se(F)?[]:F.attributes},h=(L,F,J)=>{j(L,et=>{if(xt(et)){const nt=D(et),Ct=""===J?null:J,Pt=er(nt,F),Vt=$t[F];Vt&&Vt.set?Vt.set(nt.dom,Ct,F):Vi(nt,F,Ct),Pt!==Ct&&e.onSetAttrib&&e.onSetAttrib({attrElm:nt.dom,attrName:F,attrValue:Ct})}})},C=()=>e.root_element||t.body,S=(L,F)=>((J,et,nt)=>{let Ct=0,Pt=0;const Vt=J.ownerDocument;if(nt=nt||J,et){if(nt===J&&et.getBoundingClientRect&&"static"===$(D(J),"position")){const _e=et.getBoundingClientRect();return Ct=_e.left+(Vt.documentElement.scrollLeft||J.scrollLeft)-Vt.documentElement.clientLeft,Pt=_e.top+(Vt.documentElement.scrollTop||J.scrollTop)-Vt.documentElement.clientTop,{x:Ct,y:Pt}}let Ft=et;for(;Ft&&Ft!==nt&&Ft.nodeType&&!jg(Ft,nt);)Ct+=Ft.offsetLeft||0,Pt+=Ft.offsetTop||0,Ft=Ft.offsetParent;for(Ft=et.parentNode;Ft&&Ft!==nt&&Ft.nodeType&&!jg(Ft,nt);)Ct-=Ft.scrollLeft||0,Pt-=Ft.scrollTop||0,Ft=Ft.parentNode;Pt+=(_e=D(et),jE.isFirefox()&&"table"===pe(_e)?Fg(Oe(_e)).filter(Et=>"caption"===pe(Et)).bind(Et=>Fg(Yo(Et)).map(se=>se.dom.offsetTop<=Et.dom.offsetTop?-Et.dom.offsetHeight:0)).getOr(0):0)}var _e;return{x:Ct,y:Pt}})(t.body,m(L),F),E=(L,F,J)=>{const et=m(L);var nt;if(!Se(et)&&(Jo(et)||xt(nt=et)&&"http://www.w3.org/2000/svg"===nt.namespaceURI))return J?$(D(et),eh(F)):("float"===(F=F.replace(/-(\D)/g,(Ct,Pt)=>Pt.toUpperCase()))&&(F="cssFloat"),et.style?et.style[F]:void 0)},A=L=>{const F=m(L);if(!F)return{w:0,h:0};let J=E(F,"width"),et=E(F,"height");return J&&-1!==J.indexOf("px")||(J="0"),et&&-1!==et.indexOf("px")||(et="0"),{w:parseInt(J,10)||F.offsetWidth||F.clientWidth,h:parseInt(et,10)||F.offsetHeight||F.clientHeight}},N=(L,F)=>{if(!L)return!1;const J=it(L)?L:[L];return Ne(J,et=>Be(D(et),F))},O=(L,F,J,et)=>{const nt=[];let Ct=m(L);et=void 0===et;const Pt=J||("BODY"!==C().nodeName?C().parentNode:null);if(kt(F))if("*"===F)F=xt;else{const Vt=F;F=Ft=>N(Ft,Vt)}for(;Ct&&!(Ct===Pt||Se(Ct.nodeType)||Fi(Ct)||mu(Ct));){if(!F||F(Ct)){if(!et)return[Ct];nt.push(Ct)}Ct=Ct.parentNode}return et?nt:null},M=(L,F,J)=>{let et=F;if(L){kt(F)&&(et=nt=>N(nt,F));for(let nt=L[J];nt;nt=nt[J])if(Ce(et)&&et(nt))return nt}return null},j=function(L,F,J){const et=J??this;if(it(L)){const nt=[];return Fu(L,(Ct,Pt)=>{const Vt=m(Ct);Vt&&nt.push(F.call(et,Vt,Pt))}),nt}{const nt=m(L);return!!nt&&F.call(et,nt)}},H=(L,F)=>{j(L,J=>{Ae(F,(et,nt)=>{h(J,nt,et)})})},W=(L,F)=>{j(L,J=>{const et=D(J);Nn(et,F)})},P=(L,F,J,et,nt)=>j(L,Ct=>{const Pt=kt(F)?t.createElement(F):F;return dt(J)&&H(Pt,J),et&&(!kt(et)&&et.nodeType?Pt.appendChild(et):kt(et)&&W(Pt,et)),nt?Pt:Ct.appendChild(Pt)}),I=(L,F,J)=>P(t.createElement(L),L,F,J,!0),q=xs.encodeAllRaw,Q=(L,F)=>j(L,J=>{const et=D(J);return F&&G(Oe(et),nt=>{tr(nt)&&0===nt.dom.length?Ot(nt):_t(et,nt)}),Ot(et),et.dom}),mt=(L,F,J)=>{j(L,et=>{if(xt(et)){const nt=D(et),Ct=F.split(" ");G(Ct,Pt=>{var Vt,Ft,Et,se;dt(J)?(J?U:K)(nt,Pt):(Ft=Pt,w(Vt=nt)?Vt.dom.classList.toggle(Ft):(se=Ft,At(_(Et=Vt),se)?R(Et,se):T(Et,se)),z(Vt))})}})},ct=(L,F,J)=>j(F,et=>{var nt;const Ct=it(F)?L.cloneNode(!0):L;return J&&Fu(JE(et.childNodes),Pt=>{Ct.appendChild(Pt)}),null===(nt=et.parentNode)||void 0===nt||nt.replaceChild(Ct,et),et}),Rt=L=>{if(xt(L)){const F="a"===L.nodeName.toLowerCase()&&!g(L,"href")&&g(L,"id");if(g(L,"name")||g(L,"data-mce-bookmark")||F)return!0}return!1},Nt=()=>t.createRange(),Mt=(L,F,J,et)=>{if(it(L)){let nt=L.length;const Ct=[];for(;nt--;)Ct[nt]=Mt(L[nt],F,J,et);return Ct}return!e.collect||L!==t&&L!==r||i.push([L,F,J,et]),u.bind(L,F,J,et||yt)},Dt=(L,F,J)=>{if(it(L)){let et=L.length;const nt=[];for(;et--;)nt[et]=Dt(L[et],F,J);return nt}if(i.length>0&&(L===t||L===r)){let et=i.length;for(;et--;){const[nt,Ct,Pt]=i[et];L!==nt||F&&F!==Ct||J&&J!==Pt||u.unbind(nt,Ct,Pt)}}return u.unbind(L,F,J)},gt=L=>{if(L&&Jo(L)){const F=L.getAttribute("data-mce-contenteditable");return F&&"inherit"!==F?F:"inherit"!==L.contentEditable?L.contentEditable:null}return null},yt={doc:t,settings:e,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:u,isBlock:L=>kt(L)?Jt(f,L):xt(L)&&(Jt(f,L.nodeName)||Gs(l,L)),root:null,clone:(L,F)=>L.cloneNode(F),getRoot:C,getViewPort:L=>{const F=yg(L);return{x:F.x,y:F.y,w:F.width,h:F.height}},getRect:L=>{const F=m(L),J=S(F),et=A(F);return{x:J.x,y:J.y,w:et.w,h:et.h}},getSize:A,getParent:(L,F,J)=>{const et=O(L,F,J,!1);return et&&et.length>0?et[0]:null},getParents:O,get:m,getNext:(L,F)=>M(L,F,"nextSibling"),getPrev:(L,F)=>M(L,F,"previousSibling"),select:(L,F)=>{var J,et;const nt=null!==(et=null!==(J=m(F))&&void 0!==J?J:e.root_element)&&void 0!==et?et:t;return Ce(nt.querySelectorAll)?Cn(nt.querySelectorAll(L)):[]},is:N,add:P,create:I,createHTML:(L,F,J="")=>{let et="<"+L;for(const nt in F)En(F,nt)&&(et+=" "+nt+'="'+q(F[nt])+'"');return cs(J)&&Jt(l.getVoidElements(),L)?et+" />":et+">"+J+"</"+L+">"},createFragment:L=>{const F=t.createElement("div"),J=t.createDocumentFragment();let et;for(J.appendChild(F),L&&(F.innerHTML=L);et=F.firstChild;)J.appendChild(et);return J.removeChild(F),J},remove:Q,setStyle:(L,F,J)=>{j(L,et=>{const nt=D(et);rh(nt,F,J),e.update_styles&&nh(c,nt)})},getStyle:E,setStyles:(L,F)=>{j(L,J=>{const et=D(J);Ae(F,(nt,Ct)=>{rh(et,Ct,nt)}),e.update_styles&&nh(c,et)})},removeAllAttribs:L=>j(L,F=>{const J=F.attributes;for(let et=J.length-1;et>=0;et--)F.removeAttributeNode(J.item(et))}),setAttrib:h,setAttribs:H,getAttrib:g,getPos:S,parseStyle:L=>c.parse(L),serializeStyle:(L,F)=>c.serialize(L,F),addStyle:L=>{if(yt!==Re.DOM&&t===document){if(n[L])return;n[L]=!0}let F=t.getElementById("mceDefaultStyles");if(!F){F=t.createElement("style"),F.id="mceDefaultStyles",F.type="text/css";const J=t.head;J.firstChild?J.insertBefore(F,J.firstChild):J.appendChild(F)}F.styleSheet?F.styleSheet.cssText+=L:F.appendChild(t.createTextNode(L))},loadCSS:L=>{L||(L=""),G(L.split(","),F=>{o[F]=!0,a.load(F).catch(St)})},addClass:(L,F)=>{mt(L,F,!0)},removeClass:(L,F)=>{mt(L,F,!1)},hasClass:(L,F)=>{const J=b(L),et=F.split(" ");return dt(J)&&ur(et,nt=>Z(J,nt))},toggleClass:mt,show:L=>{j(L,F=>jt(D(F),"display"))},hide:L=>{j(L,F=>Li(D(F),"display","none"))},isHidden:L=>{const F=b(L);return dt(F)&&us(rt(F,"display"),"none")},uniqueId:L=>(L||"mce_")+s++,setHTML:W,getOuterHTML:L=>{const F=b(L);return dt(F)?xt(F.dom)?F.dom.outerHTML:(J=>{const et=ot("div"),nt=D(J.dom.cloneNode(!0));return re(et,nt),pn(et)})(F):""},setOuterHTML:(L,F)=>{j(L,J=>{xt(J)&&(J.outerHTML=F)})},decode:xs.decode,encode:q,insertAfter:(L,F)=>{const J=m(F);return j(L,et=>{const nt=J?.parentNode,Ct=J?.nextSibling;return nt&&(Ct?nt.insertBefore(et,Ct):nt.appendChild(et)),et})},replace:ct,rename:(L,F)=>{if(L.nodeName!==F.toUpperCase()){const J=I(F);return Fu(v(L),et=>{h(J,et.nodeName,g(L,et.nodeName))}),ct(J,L,!0),J}return L},findCommonAncestor:(L,F)=>{let J=L;for(;J;){let et=F;for(;et&&J!==et;)et=et.parentNode;if(J===et)break;J=J.parentNode}return!J&&L.ownerDocument?L.ownerDocument.documentElement:J},run:j,getAttribs:v,isEmpty:(L,F,J)=>{let et=0;if(Rt(L))return!1;const nt=L.firstChild;if(nt){const Ct=new un(nt,L),Pt=l?l.getWhitespaceElements():{},Vt=F||(l?l.getNonEmptyElements():null);let Ft=nt;do{if(xt(Ft)){const _e=Ft.getAttribute("data-mce-bogus");if(_e){Ft=Ct.next("all"===_e);continue}const Et=Ft.nodeName.toLowerCase();if(Vt&&Vt[Et]){if("br"===Et){et++,Ft=Ct.next();continue}return!1}if(Rt(Ft))return!1}if(bs(Ft)||at(Ft)&&!Cs(Ft.data)&&(!J?.includeZwsp||!RE(Ft.data))||at(Ft)&&Ft.parentNode&&Pt[Ft.parentNode.nodeName]&&Cs(Ft.data))return!1;Ft=Ct.next()}while(Ft)}return et<=1},createRng:Nt,nodeIndex:$a,split:(L,F,J)=>{let et,nt,Ct=Nt();if(L&&F&&L.parentNode&&F.parentNode){const Pt=L.parentNode;return Ct.setStart(Pt,$a(L)),Ct.setEnd(F.parentNode,$a(F)),et=Ct.extractContents(),Ct=Nt(),Ct.setStart(F.parentNode,$a(F)+1),Ct.setEnd(Pt,$a(L)+1),nt=Ct.extractContents(),Pt.insertBefore(Tu(yt,et,l),L),Pt.insertBefore(J||F,L),Pt.insertBefore(Tu(yt,nt,l),L),Q(L),J||F}},bind:Mt,unbind:Dt,fire:(L,F,J)=>u.dispatch(L,F,J),dispatch:(L,F,J)=>u.dispatch(L,F,J),getContentEditable:gt,getContentEditableParent:L=>{const F=C();let J=null;for(let et=L;et&&et!==F&&(J=gt(et),null===J);et=et.parentNode);return J},isEditable:L=>{if(dt(L)){const F=xt(L)?L:L.parentElement;return dt(F)&&Jo(F)&&Yr(D(F))}return!1},destroy:()=>{if(i.length>0){let L=i.length;for(;L--;){const[F,J,et]=i[L];u.unbind(F,J,et)}}Ae(o,(L,F)=>{a.unload(F),delete o[F]})},isChildOf:(L,F)=>L===F||F.contains(L),dumpRng:L=>"startContainer: "+L.startContainer.nodeName+", startOffset: "+L.startOffset+", endContainer: "+L.endContainer.nodeName+", endOffset: "+L.endOffset},$t=((L,F,J)=>{const et=F.keep_values,Ct={style:{set:(Pt,Vt)=>{const Ft=D(Pt);et&&Vi(Ft,ju,Vt),d(Ft,"style"),kt(Vt)&&B(Ft,L.parse(Vt))},get:Pt=>{const Vt=D(Pt),Ft=er(Vt,ju)||er(Vt,"style");return L.serialize(L.parse(Ft),pe(Vt))}}};return et&&(Ct.href=Ct.src={set:(Pt,Vt,Ft)=>{const _e=D(Pt);Ce(F.url_converter)&&dt(Vt)&&(Vt=F.url_converter.call(F.url_converter_scope||J(),String(Vt),Ft,Pt)),Vi(_e,"data-mce-"+Ft,Vt),Vi(_e,Ft,Vt)},get:(Pt,Vt)=>{const Ft=D(Pt);return er(Ft,"data-mce-"+Vt)||er(Ft,Vt)}}),Ct})(c,e,ft(yt));return yt};Re.DOM=Re(document),Re.nodeIndex=$a;const tk=Re.DOM;class ts{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,r)=>{const o=tk;let s;const a=()=>{o.remove(i),s&&(s.onerror=s.onload=s=null)},i=o.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=lt._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:r,reject:o})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(l,c)=>{Te(n.scriptLoadedCallbacks,c).each(u=>{G(u,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},o=l=>{const c=Wt(l,u=>"rejected"===u.status);return c.length>0?Promise.reject(rn(c,({reason:u})=>it(u)?u:[u])):Promise.resolve()},s=l=>Promise.allSettled(ee(l,c=>2===n.states[c]?(r("resolve",c),Promise.resolve()):3===n.states[c]?(r("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,r("resolve",c);const u=n.queue;return u.length>0?(n.queue=[],s(u).then(o)):Promise.resolve()},()=>(n.states[c]=3,r("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return k.from(u).each(Gn),o(c)})),i=qn(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,c)})}):a(i)}}ts.ScriptLoader=new ts;const bn=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},Ki={},zu=bn("en"),oh=()=>Te(Ki,zu.get()),fo={getData:()=>Ho(Ki,t=>({...t})),setCode:t=>{t&&zu.set(t)},getCode:()=>zu.get(),add:(t,e)=>{let n=Ki[t];n||(Ki[t]=n={});const r=ee(on(e),o=>o.toLowerCase());Ae(e,(o,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const c=i.indexOf(l);return-1!==c&&i.indexOf(l,c+1)>c})(r,a)?(Jt(e,a)||(n[a]=o),n[s]=o):n[a]=o})},translate:t=>{const e=oh().getOr({}),n=i=>Ce(i)?Object.prototype.toString.call(i):r(i)?"":""+i,r=i=>""===i||null==i,o=i=>{const l=n(i);return Jt(e,l)?n(e[l]):Te(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(r(t))return"";if(Gt(a=t)&&Jt(a,"raw"))return n(t.raw);var a,i;if(it(i=t)&&i.length>1){const i=t.slice(1);return s(o(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>Jt(i,c)?n(i[c]):l))}return s(o(t))},isRtl:()=>oh().bind(t=>Te(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>Jt(Ki,t)},Wn=()=>{const t=[],e={},n={},r=[],o=(l,c)=>{const u=Wt(r,f=>f.name===l&&f.state===c);G(u,f=>f.resolve())},s=l=>Jt(e,l),a=(l,c)=>{const u=fo.getCode();!u||c&&-1===(","+(c||"")+",").indexOf(","+u+",")||ts.ScriptLoader.add(e[l]+"/langs/"+u+".js")},i=(l,c="added")=>"added"===c&&Jt(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(u=>{r.push({name:l,state:c,resolve:u})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==Wn.languageLoad&&(s(l)?a(l,c):i(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},o(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>kt(c)?kt(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let u=kt(c)?c:c.prefix+c.resource+c.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=Wn.baseURL+"/"+u),e[l]=u.substring(0,u.lastIndexOf("/"));const f=()=>(o(l,"loaded"),Promise.resolve());return n[l]?f():ts.ScriptLoader.add(u).then(f)},waitFor:i}};Wn.languageLoad=!0,Wn.baseURL="",Wn.PluginManager=Wn(),Wn.ThemeManager=Wn(),Wn.ModelManager=Wn();const ek=t=>{const e=bn(k.none()),n=()=>e.get().each(r=>clearInterval(r));return{clear:()=>{n(),e.set(k.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:r=>{n(),e.set(k.some(setInterval(r,t)))}}},Ss=()=>{const t=(e=>{const n=bn(k.none()),r=()=>n.get().each(e);return{clear:()=>{r(),n.set(k.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(k.some(o))}}})(St);return{...t,on:e=>t.get().each(e)}},Nc=(t,e)=>{let n=null;return{cancel:()=>{Zt(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Zt(n)&&(n=setTimeout(()=>{n=null,t.apply(null,r)},e))}}},Uu=(t,e)=>{let n=null;const r=()=>{Zt(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,t.apply(null,o)},e)}}},Xi=ft("mce-annotation"),Zs=ft("data-mce-annotation"),Wa=ft("data-mce-annotation-uid"),Yi=ft("data-mce-annotation-active"),Gi=ft("data-mce-annotation-classes"),Qi=ft("data-mce-annotation-attrs"),sh=t=>e=>ue(e,t),ah=(t,e)=>{const n=t.selection.getRng(),r=D(n.startContainer),o=D(t.getBody()),s=e.fold(()=>"."+Xi(),i=>`[${Zs()}="${i}"]`),a=Ge(r,n.startOffset).getOr(r);return lo(a,s,sh(o)).bind(i=>ao(i,`${Wa()}`).bind(l=>ao(i,`${Zs()}`).map(c=>{const u=lh(t,l);return{uid:l,name:c,elements:u}})))},ih=(t,e)=>Ws(t,"data-mce-bogus")||xg(t,'[data-mce-bogus="all"]',sh(e)),lh=(t,e)=>{const n=D(t.getBody()),r=Fn(n,`[${Wa()}="${e}"]`);return Wt(r,o=>!ih(o,n))},ch=(t,e)=>{const n=D(t.getBody()),r=Fn(n,`[${Zs()}="${e}"]`),o={};return G(r,s=>{if(!ih(s,n)){const a=er(s,Wa()),i=Te(o,a).getOr([]);o[a]=i.concat([s])}}),o};let dh=0;const Ji=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return dh++,t+"_"+n+dh+String(e)},uh=(t,e)=>D(t.dom.cloneNode(e)),ta=t=>uh(t,!1),fh=t=>uh(t,!0),mh=(t,e,n=ke)=>{const r=new un(t,e),o=s=>{let a;do{a=r[s]()}while(a&&!at(a)&&!n(a));return k.from(a).filter(at)};return{current:()=>k.from(r.current()).filter(at),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},ea=(t,e)=>{const n=e||(o=>t.isBlock(o)||Ve(o)||De(o)),r=(o,s,a,i)=>{if(at(o)){const l=i(o,s,o.data);if(-1!==l)return k.some({container:o,offset:l})}return a().bind(l=>r(l.container,l.offset,a,i))};return{backwards:(o,s,a,i)=>{const l=mh(o,i??t.getRoot(),n);return r(o,s,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(o,s,a,i)=>{const l=mh(o,i??t.getRoot(),n);return r(o,s,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},Va=Math.round,na=t=>t?{left:Va(t.left),top:Va(t.top),bottom:Va(t.bottom),right:Va(t.right),width:Va(t.width),height:Va(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},ph=(t,e)=>(t=na(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),gh=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,Zi=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&gh(e.top-t.bottom,t,e)},tl=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&gh(e.bottom-t.top,t,e),hh=(t,e,n)=>{const r=Math.max(Math.min(e,t.left+t.width),t.left),o=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-r)*(e-r)+(n-o)*(n-o))},Ac=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},Es=(t,e)=>{if(xt(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},nk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),bh=t=>kt(t)&&t.charCodeAt(0)>=768&&nk.test(t),vh=xt,rk=Qr,yh=pc("display","block table"),ok=pc("float","left right"),el=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(vh,rk,vo(ok)),sk=vo(pc("white-space","pre pre-line pre-wrap")),nl=at,Hu=Ve,Ch=Re.nodeIndex,Tc=(t,e)=>e<0&&xt(t)&&t.hasChildNodes()?void 0:Es(t,e),qu=t=>t?t.createRange():Re.DOM.createRng(),$u=t=>kt(t)&&/[\r\n\t ]/.test(t),xh=t=>!!t.setStart&&!!t.setEnd,Wu=t=>{const e=t.startContainer,n=t.startOffset;if($u(t.toString())&&sk(e.parentNode)&&at(e)){const r=e.data;if($u(r[n-1])||$u(r[n+1]))return!0}return!1},wh=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,ks=t=>{var e;let n;const r=t.getClientRects();return n=na(r.length>0?r[0]:t.getBoundingClientRect()),!xh(t)&&Hu(t)&&wh(n)?(o=>{const s=o.ownerDocument,a=qu(s),i=s.createTextNode(gn),l=o.parentNode;l.insertBefore(i,o),a.setStart(i,0),a.setEnd(i,1);const c=na(a.getBoundingClientRect());return l.removeChild(i),c})(t):wh(n)&&xh(t)&&null!==(e=(o=>{const a=o.endContainer,i=o.startOffset,l=o.endOffset;if(o.startContainer===a&&at(a)&&0===i&&1===l){const c=o.cloneRange();return c.setEndAfter(a),ks(c)}return null})(t))&&void 0!==e?e:n},ra=(t,e)=>{const n=ph(t,e);return n.width=1,n.right=n.left+1,n},X=(t,e,n)=>{const r=()=>(n||(n=(o=>{const s=[],a=u=>{var f,m;0!==u.height&&(s.length>0&&(f=u).left===(m=s[s.length-1]).left&&f.top===m.top&&f.bottom===m.bottom&&f.right===m.right||s.push(u))},i=(u,f)=>{const m=qu(u.ownerDocument);if(f<u.data.length){if(bh(u.data[f]))return;if(bh(u.data[f-1])&&(m.setStart(u,f),m.setEnd(u,f+1),!Wu(m)))return void a(ra(ks(m),!1))}f>0&&(m.setStart(u,f-1),m.setEnd(u,f),Wu(m)||a(ra(ks(m),!1))),f<u.data.length&&(m.setStart(u,f),m.setEnd(u,f+1),Wu(m)||a(ra(ks(m),!0)))},l=o.container(),c=o.offset();if(nl(l))return i(l,c),s;if(vh(l))if(o.isAtEnd()){const u=Tc(l,c);nl(u)&&i(u,u.data.length),el(u)&&!Hu(u)&&a(ra(ks(u),!1))}else{const u=Tc(l,c);if(nl(u)&&i(u,0),el(u)&&o.isAtEnd())return a(ra(ks(u),!1)),s;const f=Tc(o.container(),o.offset()-1);el(f)&&!Hu(f)&&(yh(f)||yh(u)||!el(u))&&a(ra(ks(f),!1)),el(u)&&a(ra(ks(u),!0))}return s})(X(t,e))),n);return{container:ft(t),offset:ft(e),toRange:()=>{const o=qu(t.ownerDocument);return o.setStart(t,e),o.setEnd(t,e),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(nl(t),0===e),isAtEnd:()=>nl(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:o=>o&&t===o.container()&&e===o.offset(),getNode:o=>Tc(t,o?e-1:e)}};X.fromRangeStart=t=>X(t.startContainer,t.startOffset),X.fromRangeEnd=t=>X(t.endContainer,t.endOffset),X.after=t=>X(t.parentNode,Ch(t)+1),X.before=t=>X(t.parentNode,Ch(t)),X.isAbove=(t,e)=>xn(Pn(e.getClientRects()),wo(t.getClientRects()),Zi).getOr(!1),X.isBelow=(t,e)=>xn(wo(e.getClientRects()),Pn(t.getClientRects()),tl).getOr(!1),X.isAtStart=t=>!!t&&t.isAtStart(),X.isAtEnd=t=>!!t&&t.isAtEnd(),X.isTextPosition=t=>!!t&&at(t.container()),X.isElementPosition=t=>!X.isTextPosition(t);const Rc=(t,e)=>{at(e)&&0===e.data.length&&t.remove(e)},Vu=(t,e,n)=>{var r,s;mu(n)?((r,o,s)=>{const a=k.from(s.firstChild),i=k.from(s.lastChild);o.insertNode(s),a.each(l=>Rc(r,l.previousSibling)),i.each(l=>Rc(r,l.nextSibling))})(t,e,n):(r=t,e.insertNode(s=n),Rc(r,s.previousSibling),Rc(r,s.nextSibling))},mo=at,Sh=Ks,Eh=Re.nodeIndex,kh=t=>{const e=t.parentNode;return Sh(e)?kh(e):e},Ku=t=>t?oo(t.childNodes,(e,n)=>(Sh(n)&&"BR"!==n.nodeName?e=e.concat(Ku(n)):e.push(n),e),[]):[],_h=t=>e=>t===e,Nh=t=>(mo(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,r;n=Ku(kh(e)),r=Ra(n,_h(e),e),n=n.slice(0,r+1);const o=oo(n,(s,a,i)=>(mo(a)&&mo(n[i-1])&&s++,s),0);return n=qr(n,co([e.nodeName])),r=Ra(n,_h(e),e),r-o})(t)+"]",Ah=(t,e)=>{let n,r=[],o=e.container(),s=e.offset();if(mo(o))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&mo(c);)l+=c.data.length;return l})(o,s);else{const i=o.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",o=i[s]}r.push(Nh(o));let a=((i,l,c)=>{const u=[];for(let f=l.parentNode;f&&f!==i;f=f.parentNode)u.push(f);return u})(t,o);return a=qr(a,vo(Ks)),r=r.concat(Ta(a,i=>Nh(i))),r.reverse().join("/")+","+n},Th=(t,e)=>{if(!e)return null;const n=e.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",s=oo(r,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((c,u,f)=>{let m=Ku(c);return m=qr(m,(b,g)=>!mo(b)||!mo(m[g-1])),m=qr(m,co([u])),m[f]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!mo(s)&&s.parentNode){let a;return a="after"===o?Eh(s)+1:Eh(s),X(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;mo(l);){const u=l.data.length;if(i>=c&&i<=c+u){a=l,i-=c;break}if(!mo(l.nextSibling)){a=l,i=u;break}c+=u,l=l.nextSibling}return mo(a)&&i>a.data.length&&(i=a.data.length),X(a,i)})(s,parseInt(o,10))},Oc=De,Rh=(t,e,n,r,o)=>{const s=o?r.startContainer:r.endContainer;let a=o?r.startOffset:r.endOffset;const i=[],l=t.getRoot();if(at(s))i.push(n?((c,u,f)=>{let m=c(u.data.slice(0,f)).length;for(let b=u.previousSibling;b&&at(b);b=b.previousSibling)m+=c(b.data).length;return m})(e,s,a):a);else{let c=0;const u=s.childNodes;a>=u.length&&u.length&&(c=1,a=Math.max(0,u.length-1)),i.push(t.nodeIndex(u[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(t.nodeIndex(c,n));return i},Xu=(t,e,n)=>{let r=0;return lt.each(t.select(e),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},Oh=(t,e)=>{let n=e?t.startContainer:t.endContainer,r=e?t.startOffset:t.endOffset;if(xt(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(e?r:r-1,o.length-1)],n&&(r=e?0:n.childNodes.length,e?t.setStart(n,r):t.setEnd(n,r))}},Dh=t=>(Oh(t,!0),Oh(t,!1),t),Bh=(t,e)=>{if(xt(t)&&(t=Es(t,e),Oc(t)))return t;if(_r(t)){at(t)&&qa(t)&&(t=t.parentNode);let n=t.previousSibling;if(Oc(n)||(n=t.nextSibling,Oc(n)))return n}},Ph=(t,e,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Oc(r)){const a=r.nodeName;return{name:a,index:Xu(n.dom,a,r)}}const s=Bh((a=o).startContainer,a.startOffset)||Bh(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:Xu(n.dom,a,s)}}return((a,i,l,c)=>{const u=i.dom,f=Rh(u,a,l,c,!0),m=i.isForward(),b=Ag(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:f,forward:m,...b}:{start:f,end:Rh(u,a,l,c,!1),forward:m,...b}})(t,n,e,o)},Lh=(t,e,n)=>{const r={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",r,"&#xFEFF;"):t.create("span",r)},Mh=(t,e)=>{const n=t.dom;let r=t.getRng();const o=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:Xu(n,i,a)};const c=Dh(r.cloneRange());if(!s){c.collapse(!1);const f=Lh(n,o+"_end",e);Vu(n,c,f)}r=Dh(r),r.collapse(!0);const u=Lh(n,o+"_start",e);return Vu(n,r,u),t.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},Yu=vt(Ph,he,!0),Ih=t=>{const e=s=>s(t),n=ft(t),r=()=>o,o={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:Ie,isError:ke,map:s=>rr.value(s(t)),mapError:r,bind:e,exists:e,forall:e,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:s=>{s(t)},toOptional:()=>k.some(t)};return o},Fh=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,o)=>r(t),isValue:ke,isError:Ie,map:e,mapError:r=>rr.error(r(t)),bind:e,exists:ke,forall:Ie,getOr:he,or:he,getOrThunk:yo,orThunk:yo,getOrDie:dr(String(t)),each:St,toOptional:k.none};return n},rr={value:Ih,error:Fh,fromOption:(t,e)=>t.fold(()=>Fh(e),Ih)},Ro=t=>{if(!it(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return G(t,(r,o)=>{const s=on(r);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!it(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...u)=>{if(u.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+u.length);return u[o].apply(null,l)},match:u=>{const f=on(u);if(e.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+f.join(","));if(!ur(e,m=>At(f,m)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+"\nRequired: "+e.join(", "));return u[a].apply(null,l)},log:u=>{console.log(u,{constructors:e,constructor:a,params:l})}}}}),n};Ro([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ak=t=>"inline-command"===t.type||"inline-format"===t.type,ik=t=>"block-command"===t.type||"block-format"===t.type,lk=t=>{const e=r=>rr.error({message:r,pattern:t}),n=(r,o,s)=>{if(void 0!==t.format){let a;if(it(t.format)){if(!ur(t.format,kt))return e(r+" pattern has non-string items in the `format` array");a=t.format}else{if(!kt(t.format))return e(r+" pattern has non-string `format` parameter");a=[t.format]}return rr.value(o(a))}return void 0!==t.cmd?kt(t.cmd)?rr.value(s(t.cmd,t.value)):e(r+" pattern has non-string `cmd` parameter"):e(r+" pattern is missing both `format` and `cmd` parameters")};if(!Gt(t))return e("Raw pattern is not an object");if(!kt(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!kt(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let r=t.start,o=t.end;return 0===o.length&&(o=r,r=""),n("Inline",s=>({type:"inline-format",start:r,end:o,format:s}),(s,a)=>({type:"inline-command",start:r,end:o,cmd:s,value:a}))}return void 0!==t.replacement?kt(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):rr.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:t.start,format:r[0]}),(r,o)=>({type:"block-command",start:t.start,cmd:r,value:o}))},jh=t=>Wt(t,ik),zh=t=>Wt(t,ak),Uh=t=>{const e=(n=>{const r=[],o=[];return G(n,s=>{s.fold(a=>{r.push(a)},a=>{o.push(a)})}),{errors:r,values:o}})(ee(t,lk));return G(e.errors,n=>console.error(n.message,n.pattern)),e.values},Gu=Ln().deviceType,ck=Gu.isTouch(),dk=Re.DOM,Hh=t=>yr(t,RegExp),bt=t=>e=>e.options.get(t),Qu=t=>kt(t)||Gt(t),qh=(t,e="")=>n=>{const r=kt(n);if(r){if(-1!==n.indexOf("=")){const o=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return yn(a,(i,l)=>{const c=l.split("="),u=c[0],f=c.length>1?c[1]:u;return i[so(u)]=so(f),i},{})})(n);return{value:Te(o,t.id).getOr(e),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},uk=bt("iframe_attrs"),fk=bt("doctype"),$h=bt("document_base_url"),mk=bt("body_id"),pk=bt("body_class"),Wh=bt("content_security_policy"),gk=bt("br_in_pre"),jn=bt("forced_root_block"),rl=bt("forced_root_block_attrs"),hk=bt("newline_behavior"),bk=bt("br_newline_selector"),vk=bt("no_newline_selector"),yk=bt("keep_styles"),Ck=bt("end_container_on_empty_block"),Vh=bt("automatic_uploads"),Kh=bt("images_reuse_filename"),xk=bt("images_replace_blob_uris"),Xh=bt("icons"),wk=bt("icons_url"),Sk=bt("images_upload_url"),Ek=bt("images_upload_base_path"),kk=bt("images_upload_credentials"),_k=bt("images_upload_handler"),Nk=bt("content_css_cors"),Ju=bt("referrer_policy"),Yh=bt("language"),Ak=bt("language_url"),Gh=bt("indent_use_margin"),Tk=bt("indentation"),Rk=bt("content_css"),Ok=bt("content_style"),Qh=bt("font_css"),Dk=bt("directionality"),Bk=bt("inline_boundaries_selector"),Jh=bt("object_resizing"),Pk=bt("resize_img_proportional"),Lk=bt("placeholder"),Zh=bt("event_root"),Mk=bt("service_message"),Ka=bt("theme"),Ik=bt("theme_url"),Zu=bt("model"),Fk=bt("model_url"),ol=bt("inline_boundaries"),jk=bt("formats"),zk=bt("preview_styles"),Uk=bt("format_empty_lines"),Hk=bt("format_noneditable_selector"),qk=bt("custom_ui_selector"),tf=bt("inline"),$k=bt("hidden_input"),Wk=bt("submit_patch"),Vk=bt("add_form_submit_trigger"),Kk=bt("add_unload_trigger"),Xk=bt("custom_undo_redo_levels"),Yk=bt("disable_nodechange"),tb=bt("readonly"),Gk=bt("editable_root"),eb=bt("content_css_cors"),Dc=bt("plugins"),Qk=bt("external_plugins"),Jk=bt("block_unsupported_drop"),Zk=bt("visual"),t_=bt("visual_table_class"),nb=bt("visual_anchor_class"),e_=bt("iframe_aria_text"),n_=bt("setup"),r_=bt("init_instance_callback"),o_=bt("urlconverter_callback"),s_=bt("auto_focus"),a_=bt("browser_spellcheck"),i_=bt("protect"),l_=bt("paste_block_drop"),Bc=bt("paste_data_images"),c_=bt("paste_preprocess"),d_=bt("paste_postprocess"),u_=bt("newdocument_content"),f_=bt("paste_webkit_styles"),m_=bt("paste_remove_styles_if_webkit"),p_=bt("paste_merge_formats"),g_=bt("smart_paste"),h_=bt("paste_as_text"),b_=bt("paste_tab_spaces"),v_=bt("allow_html_data_urls"),y_=bt("text_patterns"),C_=bt("text_patterns_lookup"),rb=bt("noneditable_class"),x_=bt("editable_class"),w_=bt("noneditable_regexp"),S_=bt("preserve_cdata"),E_=bt("highlight_on_focus"),ef=bt("xss_sanitization"),k_=bt("init_content_sync"),ob=t=>lt.explode(t.options.get("images_file_types")),__=bt("table_tab_navigation"),N_=bt("details_initial_state"),A_=bt("details_serialized_state"),T_=bt("force_hex_color"),nf=bt("sandbox_iframes"),R_=xt,sb=at,ab=t=>{const e=t.parentNode;e&&e.removeChild(t)},ib=t=>{const e=hr(t);return{count:t.length-e.length,text:e}},lb=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(hn));)t.deleteData(e,1)},cb=(t,e)=>(oa(t),e),oa=t=>{R_(t)&&_r(t)&&(Ng(t)?t.removeAttribute("data-mce-caret"):ab(t)),sb(t)&&(lb(t),0===t.data.length&&ab(t))},D_=De,B_=To,P_=gc,db=(t,e,n)=>{const r=ph(e.getBoundingClientRect(),n);let o,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;o=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();o=t.scrollLeft-i.left,s=t.scrollTop-i.top}r.left+=o,r.right+=o,r.top+=s,r.bottom+=s,r.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),r.left+=a,r.right+=a),r},ub=()=>be.browser.isFirefox(),sl=t=>D_(t)||B_(t),al=t=>(sl(t)||Zo(t)&&ub())&&ps(D(t)).exists(Yr),M_=Gr,rf=De,I_=To,fb=pc("display","block table table-cell table-caption list-item"),mb=_r,pb=qa,F_=xt,j_=at,z_=Qr,Xa=t=>t>0,sa=t=>t<0,Pc=(t,e)=>{let n;for(;n=t(e);)if(!pb(n))return n;return null},il=(t,e,n,r,o)=>{const s=new un(t,r),a=rf(t)||pb(t);let i;if(sa(e)){if(a&&(i=Pc(s.prev.bind(s),!0),n(i)))return i;for(;i=Pc(s.prev.bind(s),o);)if(n(i))return i}if(Xa(e)){if(a&&(i=Pc(s.next.bind(s),!0),n(i)))return i;for(;i=Pc(s.next.bind(s),o);)if(n(i))return i}return null},_s=(t,e)=>{for(;t&&t!==e;){if(fb(t))return t;t=t.parentNode}return null},Oo=(t,e,n)=>_s(t.container(),n)===_s(e.container(),n),of=(t,e)=>{if(!e)return k.none();const n=e.container(),r=e.offset();return F_(n)?k.from(n.childNodes[r+t]):k.none()},gb=(t,e)=>{var n;const r=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),r},U_=(t,e,n)=>_s(e,t)===_s(n,t),hb=(t,e,n)=>{const r=t?"previousSibling":"nextSibling";let o=n;for(;o&&o!==e;){let s=o[r];if(s&&mb(s)&&(s=s[r]),rf(s)||I_(s)){if(U_(e,s,o))return s;break}if(z_(s))break;o=o.parentNode}return null},ll=vt(gb,!0),cl=vt(gb,!1),sf=(t,e,n)=>{let r;const o=vt(hb,!0,e),s=vt(hb,!1,e),a=n.startContainer,i=n.startOffset;if(qa(a)){const l=j_(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if("before"===c&&(r=l.nextSibling,al(r)))return ll(r);if("after"===c&&(r=l.previousSibling,al(r)))return cl(r)}if(!n.collapsed)return n;if(at(a)){if(mb(a)){if(1===t){if(r=s(a),r)return ll(r);if(r=o(a),r)return cl(r)}if(-1===t){if(r=o(a),r)return cl(r);if(r=s(a),r)return ll(r)}return n}if(Cc(a)&&i>=a.data.length-1)return 1===t&&(r=s(a),r)?ll(r):n;if(yc(a)&&i<=1)return-1===t&&(r=o(a),r)?cl(r):n;if(i===a.data.length)return r=s(a),r?ll(r):n;if(0===i)return r=o(a),r?cl(r):n}return n},bb=(t,e)=>of(t?0:-1,e).filter(rf),dl=(t,e,n)=>{const r=sf(t,e,n);return-1===t?X.fromRangeStart(r):X.fromRangeEnd(r)},Lc=t=>k.from(t.getNode()).map(D),af=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},Mc=(t,e)=>{const n=Oo(t,e);return!(n||!Ve(t.getNode()))||n};var vn,t;(t=vn||(vn={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const H_=De,Do=at,vb=xt,lf=Ve,Ya=Qr,yb=t=>{return Rg(t)||!!xu(e=t)&&!yn(Cn(e.getElementsByTagName("*")),(n,r)=>n||Tg(r),!1);var e},Ic=Og,Cb=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,xb=(t,e)=>{if(Xa(t)){if(Ya(e.previousSibling)&&!Do(e.previousSibling))return X.before(e);if(Do(e))return X(e,0)}if(sa(t)){if(Ya(e.nextSibling)&&!Do(e.nextSibling))return X.after(e);if(Do(e))return X(e,e.data.length)}return sa(t)?lf(e)?X.before(e):X.after(e):X.before(e)},cf=(t,e,n)=>{let r,o,s,a;if(!vb(n)||!e)return null;if(e.isEqual(X.after(n))&&n.lastChild){if(a=X.after(n.lastChild),sa(t)&&Ya(n.lastChild)&&vb(n.lastChild))return lf(n.lastChild)?X.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(Do(i)){if(sa(t)&&l>0)return X(i,--l);if(Xa(t)&&l<i.length)return X(i,++l);r=i}else{if(sa(t)&&l>0&&(o=Cb(i,l-1),Ya(o)))return!yb(o)&&(s=il(o,t,Ic,o),s)?Do(s)?X(s,s.data.length):X.after(s):Do(o)?X(o,o.data.length):X.before(o);if(Xa(t)&&l<i.childNodes.length&&(o=Cb(i,l),Ya(o)))return lf(o)?((u,f)=>{const m=f.nextSibling;return m&&Ya(m)?Do(m)?X(m,0):X.before(m):cf(vn.Forwards,X.after(f),u)})(n,o):!yb(o)&&(s=il(o,t,Ic,o),s)?Do(s)?X(s,0):X.before(s):Do(o)?X(o,0):X.after(o);r=o||a.getNode()}if(r&&(Xa(t)&&a.isAtEnd()||sa(t)&&a.isAtStart())&&(r=il(r,t,Ie,n,!0),Ic(r,n)))return xb(t,r);o=r&&il(r,t,Ic,n);const c=$r(Wt(((u,f)=>{const m=[];let b=u;for(;b&&b!==f;)m.push(b),b=b.parentNode;return m})(i,n),H_));return!c||o&&c.contains(o)?o?xb(t,o):null:(a=Xa(t)?X.after(c):X.before(c),a)},Bo=t=>({next:e=>cf(vn.Forwards,e,t),prev:e=>cf(vn.Backwards,e,t)}),wb=t=>X.isTextPosition(t)?0===t.offset():Qr(t.getNode()),Sb=t=>{if(X.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return Qr(t.getNode(!0))},Eb=(t,e)=>!X.isTextPosition(t)&&!X.isTextPosition(e)&&t.getNode()===e.getNode(!0),Nr=(t,e,n)=>{const r=Bo(e);return k.from(t?r.next(n):r.prev(n))},Ga=(t,e,n)=>Nr(t,e,n).bind(r=>{return Oo(n,r,e)&&(s=n,a=r,t?!Eb(s,a)&&(X.isTextPosition(i=s)||!Ve(i.getNode()))&&Sb(s)&&wb(a):!Eb(a,s)&&wb(s)&&Sb(a))?Nr(t,e,r):k.some(r);var s,a,i}),kb=(t,e,n,r)=>Ga(t,e,n).bind(o=>r(o)?kb(t,e,o,r):k.some(o)),Qa=(t,e)=>{const n=t?e.firstChild:e.lastChild;return at(n)?k.some(X(n,t?0:n.data.length)):n?Qr(n)?k.some(t?X.before(n):Ve(r=n)?X.before(r):X.after(r)):((o,s,a)=>{const i=o?X.before(a):X.after(a);return Nr(o,s,i)})(t,e,n):k.none();var r},or=vt(Nr,!0),lr=vt(Nr,!1),zn=vt(Qa,!0),Jr=vt(Qa,!1),df="_mce_caret",Ar=t=>xt(t)&&t.id===df,aa=(t,e)=>{let n=e;for(;n&&n!==t;){if(Ar(n))return n;n=n.parentNode}return null},_b=t=>Jt(t,"name"),Nb=t=>lt.isArray(t.start),Fc=t=>!(!_b(t)&&Un(t.forward))||t.forward,Ab=(t,e)=>(xt(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),q_=(t,e)=>Jr(t).fold(ke,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),Tb=(t,e,n)=>!(e.hasChildNodes()||!aa(t,e)||(((r,o)=>{var s;const a=(null!==(s=r.ownerDocument)&&void 0!==s?s:document).createTextNode(hn);r.appendChild(a),o.setStart(a,0),o.setEnd(a,0)})(e,n),0)),Rb=(t,e,n,r)=>{const o=n[e?"start":"end"],s=t.getRoot();if(o){let a=s,i=o[0];for(let l=o.length-1;a&&l>=1;l--){const c=a.childNodes;if(Tb(s,a,r))return!0;if(o[l]>c.length-1)return!!Tb(s,a,r)||q_(a,r);a=c[o[l]]}at(a)&&(i=Math.min(o[0],a.data.length)),xt(a)&&(i=Math.min(o[0],a.childNodes.length)),e?r.setStart(a,i):r.setEnd(a,i)}return!0},uf=t=>at(t)&&t.data.length>0,Ob=(t,e,n)=>{const r=t.get(n.id+"_"+e),o=r?.parentNode,s=n.keep;if(r&&o){let a,i;if("start"===e?s?r.hasChildNodes()?(a=r.firstChild,i=1):uf(r.nextSibling)?(a=r.nextSibling,i=0):uf(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)+1):(a=o,i=t.nodeIndex(r)):s?r.hasChildNodes()?(a=r.firstChild,i=1):uf(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)):(a=o,i=t.nodeIndex(r)),!s){const l=r.previousSibling,c=r.nextSibling;let u;for(lt.each(lt.grep(r.childNodes),f=>{at(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});u=t.get(n.id+"_"+e);)t.remove(u,!0);if(at(c)&&at(l)&&!be.browser.isOpera()){const f=l.data.length;l.appendData(c.data),t.remove(c),a=l,i=f}}return k.some(X(a,i))}return k.none()},$_=(t,e,n)=>((r,o,s=!1)=>{return 2===o?Ph(hr,s,r):3===o?(a=>{const i=a.getRng();return{start:Ah(a.dom.getRoot(),X.fromRangeStart(i)),end:Ah(a.dom.getRoot(),X.fromRangeEnd(i)),forward:a.isForward()}})(r):o?{rng:(a=r).getRng(),forward:a.isForward()}:Mh(r,!1);var a})(t,e,n),W_=(t,e)=>{((n,r)=>{const o=n.dom;if(r){if(Nb(r))return((s,a)=>{const i=s.createRng();return Rb(s,!0,a,i)&&Rb(s,!1,a,i)?k.some({range:i,forward:Fc(a)}):k.none()})(o,r);if(kt(r.start))return((s,a)=>{const i=k.from(Th(s.getRoot(),a.start)),l=k.from(Th(s.getRoot(),a.end));return xn(i,l,(c,u)=>{const f=s.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Fc(a)}})})(o,r);if(Jt(r,"id"))return((s,a)=>{const i=Ob(s,"start",a),l=Ob(s,"end",a);return xn(i,l.or(i),(c,u)=>{const f=s.createRng();return f.setStart(Ab(s,c.container()),c.offset()),f.setEnd(Ab(s,u.container()),u.offset()),{range:f,forward:Fc(a)}})})(o,r);if(_b(r))return((s,a)=>k.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(o,r);if((s=>Jt(s,"rng"))(r))return k.some({range:r.rng,forward:Fc(r)})}return k.none()})(t,e).each(({range:n,forward:r})=>{t.setRng(n,r)})},Tr=t=>xt(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),jc=(Db=gn,t=>Db===t);var Db;const Ja=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),ff=t=>!Ja(t)&&!jc(t)&&!gu(t),mf=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},Bb=(t,e)=>{const n=Fn(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Wt(rn(t,s=>{const a=Ac(s);return a?[D(a)]:[]}),Ui)},Za=t=>Bb(mf(t.selection.getSel()),D(t.getBody())),ul=(t,e)=>No(t,"table",e),Pb=t=>en(t).fold(ft([t]),e=>[t].concat(Pb(e))),pf=t=>kn(t).fold(ft([t]),e=>"br"===pe(e)?Er(e).map(n=>[t].concat(pf(n))).getOr([]):[t].concat(pf(e))),gf=(t,e)=>xn((n=>{const r=n.startContainer,o=n.startOffset;return at(r)?0===o?k.some(D(r)):k.none():k.from(r.childNodes[o]).map(D)})(e),(n=>{const r=n.endContainer,o=n.endOffset;return at(r)?o===r.data.length?k.some(D(r)):k.none():k.from(r.childNodes[o-1]).map(D)})(e),(n,r)=>{const o=Ze(Pb(t),vt(ue,n)),s=Ze(pf(t),vt(ue,r));return o.isSome()&&s.isSome()}).getOr(!1),hf=(t,e,n,r)=>{const o=n,s=new un(n,o),a=Cr(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!At(["td","th","table"],c.toLowerCase()));let i=n;do{if(at(i)&&0!==lt.trim(i.data).length)return void(r?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(r?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=r?s.next():s.prev());"BODY"===o.nodeName&&(r?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},zc=t=>{const e=t.selection.getSel();return dt(e)&&e.rangeCount>0},bf=(t,e)=>{const n=Za(t);n.length>0?G(n,r=>{const o=r.dom,s=t.dom.createRng();s.setStartBefore(o),s.setEndAfter(o),e(s,!0)}):e(t.selection.getRng(),!1)},Lb=(t,e,n)=>{const r=Mh(t,e);n(r),t.moveToBookmark(r)},fl=t=>x(t?.nodeType),vf=t=>xt(t)&&!Tr(t)&&!Ar(t)&&!Ks(t),Mb=(t,e,n)=>{const{selection:r,dom:o}=t,s=r.getNode(),a=De(s);Lb(r,!0,()=>{e()}),a&&De(s)&&o.isChildOf(s,t.getBody())?t.selection.select(s):n(r.getStart())&&V_(o,r)},V_=(t,e)=>{var n,r;const o=e.getRng(),{startContainer:s,startOffset:a}=o;if(!((i,l)=>{if(vf(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),u=parseInt(c,10);return!isNaN(u)&&u>0}return!1})(t,e.getNode())&&xt(s)){const i=s.childNodes,l=t.getRoot();let c;if(a<i.length){const u=i[a];c=new un(u,null!==(n=t.getParent(u,t.isBlock))&&void 0!==n?n:l)}else{const u=i[i.length-1];c=new un(u,null!==(r=t.getParent(u,t.isBlock))&&void 0!==r?r:l),c.next(!0)}for(let u=c.current();u;u=c.next()){if("false"===t.getContentEditable(u))return;if(at(u)&&!Cf(u))return o.setStart(u,0),void e.setRng(o)}}},Ib=(t,e,n)=>{if(t){const r=e?"nextSibling":"previousSibling";for(t=n?t:t[r];t;t=t[r])if(xt(t)||!Cf(t))return t}},yf=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Gs(t,e),ti=(t,e,n)=>t.schema.isValidChild(e,n),Cf=(t,e=!1)=>{if(dt(t)&&at(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return Cs(n)}return!1},Fb=(t,e)=>{const n=t.dom;return vf(e)&&"false"===n.getContentEditable(e)&&((r,o)=>{const s="[data-mce-cef-wrappable]",a=Hk(r),i=cs(a)?s:`${s},${a}`;return Be(D(o),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},Ns=(t,e)=>Ce(t)?t(e):(dt(e)&&(t=t.replace(/%(\w+)/g,(n,r)=>e[r]||n)),t),xf=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),wf=(t,e)=>{if(Se(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=$i(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Uc=(t,e,n)=>{const r=t.getStyle(e,n);return wf(r,n)},jb=(t,e)=>{let n;return t.getParent(e,r=>!!xt(r)&&(n=t.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},Hc=(t,e,n)=>t.getParents(e,n,t.getRoot()),Sf=(t,e,n)=>{const r=t.formatter.get(e);return dt(r)&&Ne(r,n)},Po=t=>En(t,"block"),Rr=t=>En(t,"selector"),fn=t=>En(t,"inline"),Ef=t=>Rr(t)&&!1!==t.expand&&!fn(t),zb=t=>(e=>{const n=[];let r=e;for(;r;){if(at(r)&&r.data!==hn||r.childNodes.length>1)return[];xt(r)&&n.push(r),r=r.firstChild}return n})(t).length>0,kf=t=>Ar(t.dom)&&zb(t.dom),ei=Tr,Ub=Hc,Hb=Cf,K_=yf,qb=(t,e)=>{let n=e;for(;n;){if(xt(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},$b=(t,e,n,r)=>{const o=e.data;if(t){for(let s=n;s>0;s--)if(r(o.charAt(s-1)))return s}else for(let s=n;s<o.length;s++)if(r(o.charAt(s)))return s;return-1},X_=(t,e,n)=>$b(t,e,n,r=>jc(r)||Ja(r)),Y_=(t,e,n)=>$b(t,e,n,ff),Wb=(t,e,n,r,o,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(c,u,f)=>{const m=ea(t);return k.from((o?m.backwards:m.forwards)(c,u,(g,v)=>ei(g.parentNode)?-1:(a=g,f(o,g,v)),i))};return l(n,r,X_).bind(c=>s?l(c.container,c.offset+(o?-1:0),Y_):k.some(c)).orThunk(()=>a?k.some({container:a,offset:o?0:a.length}):k.none())},Vb=(t,e,n,r,o)=>{const s=r[o];at(r)&&cs(r.data)&&s&&(r=s);const a=Ub(t,r);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const c=e[l];if((!dt(c.collapsed)||c.collapsed===n.collapsed)&&Rr(c)&&t.is(a[i],c.selector))return a[i]}return r},Kb=(t,e,n,r)=>{var o;let s=n;const a=t.getRoot(),i=e[0];if(Po(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(o=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==o?o:a;s=t.getParent(at(n)?n.parentNode:n,c=>c!==a&&K_(t.schema,c),l)}if(s&&Po(i)&&i.wrapper&&(s=Ub(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[r]&&!t.isBlock(s[r])&&(s=s[r],!xf(s,"br")););return s||n},Xb=(t,e,n,r)=>{const o=n.parentNode;return!dt(n[r])&&(!(o!==e&&!Se(o)&&!t.isBlock(o))||Xb(t,e,o,r))},qc=(t,e,n,r,o)=>{let s=n;const a=o?"previousSibling":"nextSibling",i=t.getRoot();if(at(n)&&!Hb(n)&&(o?r>0:r<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let c=s[a];c;c=c[a]){const u=at(c)&&!Xb(t,i,c,a);if(!ei(c)&&(!Ve(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!Hb(c,u))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},Yb=t=>ei(t.parentNode)||ei(t),ia=(t,e,n,r=!1)=>{let{startContainer:o,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return xt(o)&&o.hasChildNodes()&&(o=Es(o,s),at(o)&&(s=0)),xt(a)&&a.hasChildNodes()&&(a=Es(a,e.collapsed?i:i-1),at(a)&&(i=a.data.length)),o=qb(t,o),a=qb(t,a),Yb(o)&&(o=ei(o)?o:o.parentNode,o=e.collapsed?o.previousSibling||o:o.nextSibling||o,at(o)&&(s=e.collapsed?o.length:0)),Yb(a)&&(a=ei(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,at(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(Wb(t,t.getRoot(),o,s,!0,r).each(({container:c,offset:u})=>{o=c,s=u}),Wb(t,t.getRoot(),a,i,!1,r).each(({container:c,offset:u})=>{a=c,i=u})),(fn(l)||l.block_expand)&&(fn(l)&&at(o)&&0!==s||(o=qc(t,n,o,s,!0)),fn(l)&&at(a)&&i!==a.data.length||(a=qc(t,n,a,i,!1))),Ef(l)&&(o=Vb(t,n,e,o,"previousSibling"),a=Vb(t,n,e,a,"nextSibling")),(Po(l)||Rr(l))&&(o=Kb(t,n,o,"previousSibling"),a=Kb(t,n,a,"nextSibling"),Po(l)&&(t.isBlock(o)||(o=qc(t,n,o,s,!0)),t.isBlock(a)||(a=qc(t,n,a,i,!1)))),xt(o)&&o.parentNode&&(s=t.nodeIndex(o),o=o.parentNode),xt(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:s,endContainer:a,endOffset:i}},ml=(t,e,n)=>{var r;const o=e.startOffset,s=Es(e.startContainer,o),a=e.endOffset,i=Es(e.endContainer,a-1),l=h=>{const C=h[0];at(C)&&C===s&&o>=C.data.length&&h.splice(0,1);const S=h[h.length-1];return 0===a&&h.length>0&&S===i&&at(S)&&h.splice(h.length-1,1),h},c=(h,C,S)=>{const E=[];for(;h&&h!==S;h=h[C])E.push(h);return E},u=(h,C)=>t.getParent(h,S=>S.parentNode===C,C),f=(h,C,S)=>{const E=S?"nextSibling":"previousSibling";for(let A=h,N=A.parentNode;A&&A!==C;A=N){N=A.parentNode;const O=c(A===h?A:A[E],E);O.length&&(S||O.reverse(),n(l(O)))}};if(s===i)return n(l([s]));const m=null!==(r=t.findCommonAncestor(s,i))&&void 0!==r?r:t.getRoot();if(t.isChildOf(s,i))return f(s,m,!0);if(t.isChildOf(i,s))return f(i,m);const b=u(s,m)||s,g=u(i,m)||i;f(s,b,!0);const v=c(b===s?b:b.nextSibling,"nextSibling",g===i?g.nextSibling:g);v.length&&n(l(v)),f(i,g)},G_=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Gb=(t,e,n,r,o,s)=>{const{uid:a=e,...i}=n;U(t,Xi()),an(t,`${Wa()}`,a),an(t,`${Zs()}`,r);const{attributes:l={},classes:c=[]}=o(a,i);if(xr(t,l),u=t,G(c,m=>{U(u,m)}),s){c.length>0&&an(t,`${Gi()}`,c.join(","));const u=on(l);u.length>0&&an(t,`${Qi()}`,u.join(","))}var u},Qb=(t,e,n,r,o)=>{const s=ot("span",t);return Gb(s,e,n,r,o,!1),s},Jb=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Te(s,a).map(i=>i.settings),getNames:()=>on(s)}})();((s,a)=>{const i=Zs(),l=u=>k.from(u.attr(i)).bind(a.lookup),c=u=>{var f,m;u.attr(Wa(),null),u.attr(Zs(),null),u.attr(Yi(),null);const b=k.from(u.attr(Qi())).map(C=>C.split(",")).getOr([]),g=k.from(u.attr(Gi())).map(C=>C.split(",")).getOr([]);G(b,C=>u.attr(C,null));const v=null!==(m=null===(f=u.attr("class"))||void 0===f?void 0:f.split(" "))&&void 0!==m?m:[],h=te(v,[Xi()].concat(g));u.attr("class",h.length>0?h.join(" "):null),u.attr(Gi(),null),u.attr(Qi(),null)};s.serializer.addTempAttr(Yi()),s.serializer.addAttributeFilter(i,u=>{for(const f of u)l(f).each(m=>{!1===m.persistent&&("span"===f.name?f.unwrap():c(f))})})})(t,e);const n=((s,a)=>{const i=bn({}),l=()=>({listeners:[],previous:Ss()}),c=(b,g)=>{u(b,v=>(g(v),v))},u=(b,g)=>{const v=i.get(),h=g(Te(v,b).getOrThunk(l));v[b]=h,i.set(v)},f=(b,g)=>{G(lh(s,b),v=>{g?an(v,Yi(),"true"):d(v,Yi())})},m=Uu(()=>{const b=Uo(a.getNames());G(b,g=>{u(g,v=>{const h=v.previous.get();return ah(s,k.some(g)).fold(()=>{h.each(C=>{var S;c(S=g,E=>{G(E.listeners,A=>A(!1,S))}),v.previous.clear(),f(C,!1)})},({uid:C,name:S,elements:E})=>{var A,N,O;us(h,C)||(h.each(A=>f(A,!1)),N=C,O=E,c(A=S,M=>{G(M.listeners,j=>j(!0,A,{uid:N,nodes:ee(O,H=>H.dom)}))}),v.previous.set(C),f(C,!0))}),{previous:v.previous,listeners:v.listeners}})})},30);return s.on("remove",()=>{m.cancel()}),s.on("NodeChange",()=>{m.throttle()}),{addListener:(b,g)=>{u(b,v=>({previous:v.previous,listeners:v.listeners.concat([g])}))}}})(t,e),r=Eo("span"),o=s=>{G(s,a=>{r(a)?je(a):(i=>{K(i,Xi()),d(i,`${Wa()}`),d(i,`${Zs()}`),d(i,`${Yi()}`);const l=ao(i,`${Qi()}`).map(f=>f.split(",")).getOr([]),c=ao(i,`${Gi()}`).map(f=>f.split(",")).getOr([]);var u;G(l,f=>d(i,f)),u=i,G(c,f=>{K(u,f)}),d(i,`${Gi()}`),d(i,`${Qi()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,c,u,f;c=s,u=i,f=a,(l=t).undoManager.transact(()=>{const m=l.selection,b=m.getRng(),g=Za(l).length>0,v=Ji("mce-annotation");if(b.collapsed&&!g&&((h,C)=>{const S=ia(h.dom,C,[{inline:"span"}]);C.setStart(S.startContainer,S.startOffset),C.setEnd(S.endContainer,S.endOffset),h.selection.setRng(C)})(l,b),m.getRng().collapsed&&!g){const h=Qb(l.getDoc(),v,f,c,u.decorate);Nn(h,gn),m.getRng().insertNode(h.dom),m.select(h.dom)}else Lb(m,!1,()=>{bf(l,h=>{((t,e,n,r,o,s)=>{const a=[],i=Qb(t.getDoc(),n,s,r,o),l=Ss(),c=()=>{l.clear()},u=m=>{G(m,f)},f=m=>{switch(b=t,g=m,v="span",h=pe(m),Mn(g).fold(()=>"skipping",C=>{return"br"===h||tr(S=g)&&hc(S)===hn?"valid":(S=>$n(S)&&Z(S,Xi()))(g)?"existing":Ar(g.dom)?"caret":Ne(G_,S=>Be(g,S))?"valid-block":ti(b,v,h)&&ti(b,pe(C),v)?"valid":"invalid-child";var S})){case"invalid-child":{c();const b=Oe(m);u(b),c();break}case"valid-block":c(),Gb(m,n,s,r,o,!0);break;case"valid":{const b=l.get().getOrThunk(()=>{const g=ta(i);return a.push(g),l.set(g),g});ge(m,b);break}}var b,g,v,h};ml(t.dom,e,m=>{c(),(b=>{const g=ee(b,D);u(g)})(m)})})(l,h,v,c,u.decorate,f)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{ah(t,k.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();o(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();Ae(ch(t,s),(i,l)=>{o(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=ch(t,s);return Ho(a,i=>ee(i,l=>l.dom))}}},pl=t=>({getBookmark:vt($_,t),moveToBookmark:vt(W_,t)});pl.isBookmarkNode=Tr;const Zb=(t,e,n)=>!n.collapsed&&Ne(n.getClientRects(),r=>{return a=e,(s=t)>=(o=r).left&&s<=o.right&&a>=o.top&&a<=o.bottom;var o,s,a}),t0=(t,e,n)=>{t.dispatch(e,n)},e0=(t,e,n,r)=>{t.dispatch("FormatApply",{format:e,node:n,vars:r})},n0=(t,e,n,r)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:r})},r0=(t,e)=>t.dispatch("SetContent",e),o0=(t,e)=>t.dispatch("GetContent",e),s0=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),ht={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||ht.metaKeyPressed(t),metaKeyPressed:t=>be.os.isMacOS()||be.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},la="data-mce-selected",a0=Math.abs,$c=Math.round,_f={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},i0=(t,e)=>{const n=e.dom,r=e.getDoc(),o=document,s=e.getBody();let a,i,l,c,u,f,m,b,g,v,h,C,S,E,A;const N=gt=>dt(gt)&&(Eg(gt)||n.is(gt,"figure.image")),O=gt=>To(gt)||n.hasClass(gt,"mce-preview-object"),M=gt=>{const yt=gt.target;(($t,L)=>{if("longpress"===(F=$t).type||0===F.type.indexOf("touch")){const F=$t.touches[0];return N($t.target)&&!Zb(F.clientX,F.clientY,L)}var F;return N($t.target)&&!Zb($t.clientX,$t.clientY,L)})(gt,e.selection.getRng())&&!gt.isDefaultPrevented()&&e.selection.select(yt)},j=gt=>n.hasClass(gt,"mce-preview-object")&&dt(gt.firstElementChild)?[gt,gt.firstElementChild]:n.is(gt,"figure.image")?[gt.querySelector("img")]:[gt],H=gt=>{const yt=Jh(e);return!!yt&&"false"!==gt.getAttribute("data-mce-resize")&&gt!==e.getBody()&&(n.hasClass(gt,"mce-preview-object")&&dt(gt.firstElementChild)?Be(D(gt.firstElementChild),yt):Be(D(gt),yt))},W=(gt,yt,$t)=>{if(dt($t)){const L=j(gt);G(L,F=>{F.style[yt]||!e.schema.isValid(F.nodeName.toLowerCase(),yt)?n.setStyle(F,yt,$t):n.setAttrib(F,yt,""+$t)})}},P=(gt,yt,$t)=>{W(gt,"width",yt),W(gt,"height",$t)},I=gt=>{let yt,$t,L,F,J;yt=gt.screenX-f,$t=gt.screenY-m,C=yt*c[2]+b,S=$t*c[3]+g,C=C<5?5:C,S=S<5?5:S,L=(N(a)||O(a))&&!1!==Pk(e)?!ht.modifierPressed(gt):ht.modifierPressed(gt),L&&(a0(yt)>a0($t)?(S=$c(C*v),C=$c(S/v)):(C=$c(S/v),S=$c(C*v))),P(i,C,S),F=c.startPos.x+yt,J=c.startPos.y+$t,F=F>0?F:0,J=J>0?J:0,n.setStyles(l,{left:F,top:J,display:"block"}),l.innerHTML=C+" &times; "+S,c[2]<0&&i.clientWidth<=C&&n.setStyle(i,"left",void 0+(b-C)),c[3]<0&&i.clientHeight<=S&&n.setStyle(i,"top",void 0+(g-S)),yt=s.scrollWidth-E,$t=s.scrollHeight-A,yt+$t!==0&&n.setStyles(l,{left:F-yt,top:J-$t}),h||(e.dispatch("ObjectResizeStart",{target:a,width:b,height:g,origin:"corner-"+c.name}),h=!0)},q=()=>{const gt=h;h=!1,gt&&(W(a,"width",C),W(a,"height",S)),n.unbind(r,"mousemove",I),n.unbind(r,"mouseup",q),o!==r&&(n.unbind(o,"mousemove",I),n.unbind(o,"mouseup",q)),n.remove(i),n.remove(l),n.remove(u),Q(a),gt&&(e.dispatch("ObjectResized",{target:a,width:C,height:S,origin:"corner-"+c.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},Q=gt=>{Mt();const yt=n.getPos(gt,s),$t=yt.x,L=yt.y,F=gt.getBoundingClientRect(),J=F.width||F.right-F.left,et=F.height||F.bottom-F.top;a!==gt&&(ct(),a=gt,C=S=0);const nt=e.dispatch("ObjectSelected",{target:gt});H(gt)&&!nt.isDefaultPrevented()?Ae(_f,(Ct,Pt)=>{let Vt=n.get("mceResizeHandle"+Pt);Vt&&n.remove(Vt),Vt=n.add(s,"div",{id:"mceResizeHandle"+Pt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Pt+"-resize; margin:0; padding:0"}),n.bind(Vt,"mousedown",Ft=>{Ft.stopImmediatePropagation(),Ft.preventDefault(),(_e=>{const Et=j(a)[0];var se;f=_e.screenX,m=_e.screenY,b=Et.clientWidth,g=Et.clientHeight,v=g/b,c=Ct,c.name=Pt,c.startPos={x:J*Ct[0]+$t,y:et*Ct[1]+L},E=s.scrollWidth,A=s.scrollHeight,u=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=O(se=a)?n.create("img",{src:be.transparentSrc}):se.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:$t,top:L,margin:0}),P(i,J,et),i.removeAttribute(la),s.appendChild(i),n.bind(r,"mousemove",I),n.bind(r,"mouseup",q),o!==r&&(n.bind(o,"mousemove",I),n.bind(o,"mouseup",q)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},b+" &times; "+g)})(Ft)}),Ct.elm=Vt,n.setStyles(Vt,{left:J*Ct[0]+$t-Vt.offsetWidth/2,top:et*Ct[1]+L-Vt.offsetHeight/2})}):ct(!1)},mt=Nc(Q,0),ct=(gt=!0)=>{mt.cancel(),Mt(),a&&gt&&a.removeAttribute(la),Ae(_f,(yt,$t)=>{const L=n.get("mceResizeHandle"+$t);L&&(n.unbind(L),n.remove(L))})},Rt=(gt,yt)=>n.isChildOf(gt,yt),Nt=gt=>{if(h||e.removed||e.composing)return;const yt="mousedown"===gt.type?gt.target:t.getNode(),$t=lo(D(yt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(F=>F.dom).filter(F=>n.isEditable(F.parentElement)||"IMG"===F.nodeName&&n.isEditable(F)).getOrUndefined(),L=dt($t)?n.getAttrib($t,la,"1"):"1";if(G(n.select(`img[${la}],hr[${la}]`),F=>{F.removeAttribute(la)}),dt($t)&&Rt($t,s)&&e.hasFocus()){Dt();const F=t.getStart(!0);if(Rt(F,$t)&&Rt(t.getEnd(!0),$t))return n.setAttrib($t,la,L),void mt.throttle($t)}ct()},Mt=()=>{Ae(_f,gt=>{gt.elm&&(n.unbind(gt.elm),delete gt.elm)})},Dt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{Dt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Nt),e.on("keyup compositionend",gt=>{a&&"TABLE"===a.nodeName&&Nt(gt)}),e.on("hide blur",ct),e.on("contextmenu longpress",M,!0)}),e.on("remove",Mt),{isResizable:H,showResizeRect:Q,hideResizeRect:ct,updateResizeRect:Nt,destroy:()=>{mt.cancel(),a=i=u=null}}},l0=(t,e,n)=>{const r=t.document.createRange();var o,s;return o=r,e.fold(s=>{o.setStartBefore(s.dom)},(s,a)=>{o.setStart(s.dom,a)},s=>{o.setStartAfter(s.dom)}),s=r,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),r},Nf=(t,e,n,r,o)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(r.dom,o),s},gl=Ro([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),c0=(t,e,n)=>e(D(n.startContainer),n.startOffset,D(n.endContainer),n.endOffset),d0=(t,e,n,r)=>({start:t,soffset:e,finish:n,foffset:r}),J_=document.caretPositionFromPoint?(t,e,n)=>{var r,o;return k.from(null===(o=(r=t.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,n)).bind(s=>{if(null===s.offsetNode)return k.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),k.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var r,o;return k.from(null===(o=(r=t.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,e,n))}:k.none,Af=Ro([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),es={before:Af.before,on:Af.on,after:Af.after,cata:(t,e,n,r)=>t.fold(e,n,r),getStart:t=>t.fold(he,he,he)},Wc=Ro([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ni={domRange:Wc.domRange,relative:Wc.relative,exact:Wc.exact,exactFromRange:t=>Wc.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:r=>D(r.startContainer),relative:(r,o)=>es.getStart(r),exact:(r,o,s,a)=>r});return qe(e)},range:d0},Vc=(t,e)=>{const n=pe(t);return"input"===n?es.after(t):At(["br","img"],n)?0===e?es.before(t):es.after(t):es.on(t,e)},Z_=(t,e)=>{const n=t.fold(es.before,Vc,es.after),r=e.fold(es.before,Vc,es.after);return ni.relative(n,r)},u0=(t,e,n,r)=>{const o=Vc(t,e),s=Vc(n,r);return ni.relative(o,s)},Tf=(t,e)=>{const n=(e||document).createDocumentFragment();return G(t,r=>{n.appendChild(r.dom)}),D(n)},f0=(t,e,n)=>{return(r=qe(D(n)).dom,o=t,s=e,((a,i,l)=>{const c=D(a.document);return J_(c,i,l).map(u=>d0(D(u.startContainer),u.startOffset,D(u.endContainer),u.endOffset))})(r,o,s)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,s},Rf=(t,e)=>dt(t)&&dt(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,m0=(t,e,n)=>null!==((r,o,s)=>{let a=r;for(;a&&a!==o;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),eN=(t,e,n)=>m0(t,e,r=>r.nodeName===n),nN=(t,e)=>_r(t)&&!m0(t,e,Ar),p0=(t,e,n)=>{const r=e.parentNode;if(r){const o=new un(e,t.getParent(r,t.isBlock)||t.getRoot());let s;for(;s=o[n?"prev":"next"]();)if(Ve(s))return!0}return!1},Of=(t,e,n,r,o)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=o.parentNode;let l,c;if(!i)return k.none();const u=t.getParent(i,t.isBlock)||s;if(r&&Ve(o)&&e&&t.isEmpty(u))return k.some(X(i,t.nodeIndex(o)));const f=new un(o,u);for(;c=f[r?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||nN(c,s))return k.none();if(at(c)&&c.data.length>0)return eN(c,s,"A")?k.none():k.some(X(c,r?c.data.length:0));if(t.isBlock(c)||a[c.nodeName.toLowerCase()])return k.none();l=c}return bs(l)?k.none():n&&l?k.some(X(l,0)):k.none()},g0=(t,e,n,r)=>{const o=t.getRoot();let s,a=!1,i=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const c=xt(i)&&l===i.childNodes.length,u=t.schema.getNonEmptyElements();let f=n;if(_r(i))return k.none();if(xt(i)&&l>i.childNodes.length-1&&(f=!1),Fi(i)&&(i=o,l=0),i===o){if(f&&(s=i.childNodes[l>0?l-1:0],s)&&(_r(s)||u[s.nodeName]||Zo(s)))return k.none();if(i.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=at(i)&&c?i.data.length:0,!e&&i===o.lastChild&&Zo(i)||((m,b)=>{let g=b;for(;g&&g!==m;){if(De(g))return!0;g=g.parentNode}return!1})(o,i)||_r(i)||pu(i))return k.none();if(i.hasChildNodes()&&!Zo(i)){s=i;const m=new un(i,o);do{if(De(s)||_r(s)){a=!1;break}if(at(s)&&s.data.length>0){l=f?0:s.data.length,i=s,a=!0;break}if(u[s.nodeName.toLowerCase()]&&!vE(s)){l=t.nodeIndex(s),i=s.parentNode,f||l++,a=!0;break}}while(s=f?m.next():m.prev())}}}return e&&(at(i)&&0===l&&Of(t,c,e,!0,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),xt(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Ve(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||p0(t,s,!1)||p0(t,s,!0)||Of(t,c,e,!0,s).each(m=>{i=m.container(),l=m.offset(),a=!0}))),f&&!e&&at(i)&&l===i.data.length&&Of(t,c,e,!1,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),a&&i?k.some(X(i,l)):k.none();var g},Kc=(t,e)=>{const n=e.collapsed,r=e.cloneRange(),o=X.fromRangeStart(e);return g0(t,n,!0,r).each(s=>{n&&X.isAbove(o,s)||r.setStart(s.container(),s.offset())}),n||g0(t,n,!1,r).each(s=>{r.setEnd(s.container(),s.offset())}),n&&r.collapse(!0),Rf(e,r)?k.none():k.some(r)},Xc=(t,e)=>t.splitText(e),Yc=t=>{let e=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset;if(e===r&&at(e)){if(n>0&&n<e.data.length)if(r=Xc(e,n),e=r.previousSibling,o>n){o-=n;const s=Xc(r,o).previousSibling;e=r=s,o=s.data.length,n=0}else o=0}else if(at(e)&&n>0&&n<e.data.length&&(e=Xc(e,n),n=0),at(r)&&o>0&&o<r.data.length){const s=Xc(r,o).previousSibling;r=s,o=s.data.length}return{startContainer:e,startOffset:n,endContainer:r,endOffset:o}},ca=t=>({walk:(e,n)=>ml(t,e,n),split:Yc,expand:(e,n={type:"word"})=>{if("word"===n.type){const r=ia(t,e,[{inline:"span"}]),o=t.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return e},normalize:e=>Kc(t,e).fold(ke,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});ca.compareRanges=Rf,ca.getCaretRangeFromPoint=f0,ca.getSelectedNode=Ac,ca.getNode=Es;const rN=((t,e)=>{const n=o=>{const s=(a=>{const i=a.dom;return pr(a)?i.getBoundingClientRect().height:i.offsetHeight})(o);if(s<=0||null===s){const a=$(o,t);return parseFloat(a)||0}return s},r=(o,s)=>yn(s,(a,i)=>{const l=$(o,i),c=void 0===l?0:parseInt(l,10);return isNaN(c)?a:a+c},0);return{set:(o,s)=>{if(!x(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=o.dom;Qo(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:r,max:(o,s,a)=>{const i=r(o,a);return s>i?s-i:0}}})("height"),h0=()=>D(document),b0=(t,e)=>t.view(e).fold(ft([]),n=>{const r=t.owner(n),o=b0(t,r);return[n].concat(o)});var oN=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?k.none():k.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(D)},owner:t=>ye(t)});const Df=t=>"textarea"===pe(t),v0=(t,e)=>{const n=(o=>{const s=o.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===o.dom)return gr(a.offsetLeft,a.offsetTop);const c=nr(i?.pageYOffset,l.scrollTop),u=nr(i?.pageXOffset,l.scrollLeft),f=nr(l.clientTop,a.clientTop),m=nr(l.clientLeft,a.clientLeft);return hs(o).translate(u-m,c-f)})(t),r=rN.get(t);return{element:t,bottom:n.top+r,height:r,pos:n,cleanup:e}},y0=(t,e,n,r)=>{aN(t,(o,s)=>sN(t,e,n,r),n)},C0=(t,e,n,r,o)=>{const s={elm:r.element.dom,alignToTop:o};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(t,e,za(e).top,r,o),t.dispatch("AfterScrollIntoView",s))},sN=(t,e,n,r)=>{D(t.getBody());const s=D(t.getDoc()),a=((i,l)=>{const c=((f,m)=>{const b=Oe(f);if(0===b.length||Df(f))return{element:f,offset:m};if(m<b.length&&!Df(b[m]))return{element:b[m],offset:0};{const g=b[b.length-1];return Df(g)?{element:f,offset:m}:"img"===pe(g)?{element:g,offset:1}:tr(g)?{element:g,offset:hc(g).length}:{element:g,offset:Oe(g).length}}})(i,l),u=Y('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return _t(c.element,u),v0(u,()=>Ot(u))})(D(n.startContainer),n.startOffset);C0(t,s,e,a,r),a.cleanup()},x0=(t,e,n,r)=>{const o=D(t.getDoc());C0(t,o,n,v0(D(e),St),r)},aN=(t,e,n)=>{const r=n.startContainer,o=n.startOffset,s=n.endContainer,a=n.endOffset;e(D(r),D(s));const i=t.dom.createRng();i.setStart(r,o),i.setEnd(s,a),t.selection.setRng(n)},Bf=(t,e,n,r,o)=>{const s=e.pos;if(r)Mi(s.left,s.top,o);else{const a=s.top-n+e.height;Mi(-t.getBody().getBoundingClientRect().left,a,o)}},w0=(t,e,n,r,o,s)=>{const a=r+n,i=o.pos.top,l=o.bottom,c=l-i>=r;i<n?Bf(t,o,r,!1!==s,e):i>a?Bf(t,o,r,c?!1!==s:!0===s,e):l>a&&!c&&Bf(t,o,r,!0===s,e)},S0=(t,e,n,r,o)=>{const s=qe(e).dom.innerHeight;w0(t,e,n,s,r,o)},E0=(t,e,n,r,o)=>{const s=qe(e).dom.innerHeight;w0(t,e,n,s,r,o);const a=(l=>{const c=h0(),u=za(c),f=((g,v)=>{const h=v.owner(g);return b0(v,h)})(l,oN),m=hs(l),b=zo(f,(g,v)=>{const h=hs(v);return{left:g.left+h.left,top:g.top+h.top}},{left:0,top:0});return gr(b.left+m.left+u.left,b.top+m.top+u.top)})(r.element),i=yg(window);a.top<i.y?fc(r.element,!1!==o):a.top>i.bottom&&fc(r.element,!0===o)},iN=(t,e,n)=>y0(t,S0,e,n),lN=(t,e,n)=>x0(t,e,S0,n),cN=(t,e,n)=>y0(t,E0,e,n),dN=(t,e,n)=>x0(t,e,E0,n),hl=(t,e,n)=>{(t.inline?iN:cN)(t,e,n)},k0=(t,e=!1)=>t.dom.focus({preventScroll:e}),_0=t=>{const e=Pe(t).dom;return t.dom===e.activeElement},Pf=(t=h0())=>k.from(t.dom.activeElement).map(D),N0=(t,e)=>{const n=tr(e)?hc(e).length:Oe(e).length+1;return t>n?n:t<0?0:t},uN=t=>ni.range(t.start,N0(t.soffset,t.start),t.finish,N0(t.foffset,t.finish)),A0=(t,e)=>!mc(e.dom)&&(ve(t,e)||ue(t,e)),T0=t=>e=>A0(t,e.start)&&A0(t,e.finish),fN=t=>ni.range(D(t.startContainer),t.startOffset,D(t.endContainer),t.endOffset),mN=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),k.some(e)}catch{return k.none()}},Lf=t=>{const e=t.inline||be.browser.isFirefox()?(n=D(t.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?k.from(o.getRangeAt(0)):k.none()).map(fN)})(qe(n).dom).filter(T0(n))):k.none();var n;t.bookmark=e.isSome()?e:t.bookmark},Mf=t=>(t.bookmark?t.bookmark:k.none()).bind(e=>{return n=D(t.getBody()),k.from(e).filter(T0(n)).map(uN);var n}).bind(mN),R0={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Or={setEditorTimeout:(t,e,n)=>{return x(o=n)||(o=0),setTimeout(()=>{t.removed||e()},o);var o},setEditorInterval:(t,e,n)=>{const r=(x(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(r):e()},s));var s;return r}};let ri;const If=Re.DOM,Ff=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Gc=(t,e)=>{const n=qk(t);return null!==If.getParent(e,o=>{return xt(s=o)&&R0.isEditorUIElement(s)||!!n&&t.dom.is(o,n);var s})},jf=t=>{try{const e=Pe(D(t.getElement()));return Pf(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},pN=(t,e)=>{const n=e.editor;(o=>{const s=Nc(()=>{Lf(o)},0);o.on("init",()=>{var a,c;o.inline&&((a,i)=>{const l=()=>{i.throttle()};Re.DOM.bind(document,"mouseup",l),a.on("remove",()=>{Re.DOM.unbind(document,"mouseup",l)})})(o,s),c=s,(a=o).on("mouseup touchend",u=>{c.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Lf(a)})}),o.on("remove",()=>{s.cancel()})})(n);const r=(o,s)=>{E_(o)&&!0!==o.inline&&s(D(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=t.focusedEditor;Ff(jf(n))&&r(n,U),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Or.setEditorTimeout(n,()=>{const o=t.focusedEditor;Ff(jf(n))&&o===n||r(n,K),Gc(n,jf(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),ri||(ri=o=>{const s=t.activeEditor;s&&Go(o).each(a=>{a.ownerDocument===document&&(a===document.body||Gc(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},If.bind(document,"focusin",ri))},gN=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&ri&&(If.unbind(document,"focusin",ri),ri=null)},O0=(t,e)=>{var n,r,o;(n=D(t.getBody()),r=e,(o=r,o.collapsed?k.from(Es(o.startContainer,o.startOffset)).map(D):k.none()).bind(o=>xE(o)?k.some(o):ve(n,o)?k.none():k.some(n))).bind(n=>zn(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},zf=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},da=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(r=D(n),_0(r)||(o=r,Pf(Pe(o)).filter(s=>o.dom.contains(s.dom))).isSome());var r,o})(t):dt((e=t).iframeElement)&&_0(D(e.iframeElement));var e},D0=t=>da(t)||(e=>{const n=Pe(D(e.getElement()));return Pf(n).filter(r=>!Ff(r.dom)&&Gc(e,r.dom)).isSome()})(t),Uf=t=>t.editorManager.setActive(t),B0=(t,e)=>e.collapsed?t.isEditable(e.startContainer):t.isEditable(e.startContainer)&&t.isEditable(e.endContainer),P0=(t,e,n,r,o)=>{const a=n?e.startOffset:e.endOffset;return k.from(n?e.startContainer:e.endContainer).map(D).map(i=>r&&e.collapsed?i:Ge(i,o(i,a)).getOr(i)).bind(i=>$n(i)?k.some(i):Mn(i).filter($n)).map(i=>i.dom).getOr(t)},L0=(t,e,n=!1)=>P0(t,e,!0,n,(r,o)=>Math.min(Kr(r),o)),M0=(t,e,n=!1)=>P0(t,e,!1,n,(r,o)=>o>0?o-1:o),I0=(t,e)=>{const n=t;for(;t&&at(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Hf=(t,e)=>ee(e,n=>{const r=t.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),hN=["img","br"],F0=t=>{return kg(t).filter(n=>0!==n.trim().length||n.indexOf(gn)>-1).isSome()||At(hN,pe(t))||ms(n=t)&&"false"===er(n,"contenteditable");var n},j0="[data-mce-autocompleter]",z0=t=>Ao(t,j0),vN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Qc=(t,e,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(t[r])return t[r];if(t!==e){let s=t[o];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[o],s)return s}},yN=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Cs(n))return!1;const r=t.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},U0=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Vn{static create(e,n){const r=new Vn(e,vN[e]||1);return n&&Ae(n,(o,s)=>{r.attr(s,o)}),r}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const r=this;if(!kt(e))return dt(e)&&Ae(e,(s,a)=>{r.attr(a,s)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(e in o.map){delete o.map[e];let s=o.length;for(;s--;)if(o[s].name===e)return o.splice(s,1),r}return r}if(e in o.map){let s=o.length;for(;s--;)if(o[s].name===e){o[s].value=n;break}}else o.push({name:e,value:n});return o.map[e]=n,r}return o.map[e]}}clone(){const e=this,n=new Vn(e.name,e.type),r=e.attributes;if(r){const o=[];o.map={};for(let s=0,a=r.length;s<a;s++){const i=r[s];"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const r=n.next;e.insert(n,e,!0),n=r}e.remove()}remove(){const e=this,n=e.parent,r=e.next,o=e.prev;return n&&(n.firstChild===e?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===e?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const r=n.lastChild;return r?(r.next=e,e.prev=r,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,r){e.parent&&e.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===o.lastChild?o.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=o,e}getAll(e){const n=this,r=[];for(let o=n.firstChild;o;o=Qc(o,n))o.name===e&&r.push(o);return r}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let o=e.firstChild;o;o=Qc(o,e))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},r){var o;const s=this;let a=s.firstChild;if(U0(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||U0(a))return!1}if(8===a.type||3===a.type&&!yN(a)||3===a.type&&a.parent&&n[a.parent.name]&&Cs(null!==(o=a.value)&&void 0!==o?o:"")||r&&r(a))return!1}while(a=Qc(a,s));return!0}walk(e){return Qc(this,null,e)}}const CN=lt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),H0=t=>kt(t.nodeValue)&&t.nodeValue.includes(hn),q0=t=>(0===t.length?"":`${ee(t,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',$0=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>H0(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),W0=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,e=>{if(H0(e)){const n=e.parentNode;return n&&Jt(CN,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),xN=t=>null!==$0(t).nextNode(),wN=t=>null!==W0(t).nextNode(),SN=(t,e)=>null!==e.querySelector(q0(t)),EN=(t,e)=>{G(e.querySelectorAll(q0(t)),n=>{const r=D(n);"all"===er(r,"data-mce-bogus")?Ot(r):G(t,o=>{Ws(r,o)&&d(r,o)})})},V0=t=>{let e=t.nextNode();for(;null!==e;)e.nodeValue=null,e=t.nextNode()},kN=Dn(V0,$0),_N=Dn(V0,W0),K0=(t,e)=>{const n=[{condition:vt(SN,e),action:vt(EN,e)},{condition:xN,action:kN},{condition:wN,action:_N}];let r=t,o=!1;return G(n,({condition:s,action:a})=>{s(r)&&(o||(r=t.cloneNode(!0),o=!0),a(r))}),r},X0=t=>{const e=Fn(t,"[data-mce-bogus]");G(e,n=>{"all"===er(n,"data-mce-bogus")?Ot(n):Xs(n)?(_t(n,Xt("\ufeff")),Ot(n)):je(n)})},Y0=t=>{const e=Fn(t,"input");G(e,n=>{d(n,"name")})},G0=lt.makeMap,Q0=t=>{const e=[],n=(t=t||{}).indent,r=G0(t.indent_before||""),o=G0(t.indent_after||""),s=xs.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,c)=>{if(n&&r[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}if(e.push("<",i),l)for(let u=0,f=l.length;u<f;u++){const m=l[u];e.push(" ",m.name,'="',s(m.value,!0),'"')}if(e[e.length]=!c||a?">":" />",c&&n&&o[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&o[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},As=(t={},e=ws())=>{const n=Q0(t);return t.validate=!("validate"in t)||t.validate,{serialize:r=>{const o=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const u=i.name,f=u in e.getVoidElements();let m=i.attributes;if(o&&m&&m.length>1){const b=[];b.map={};const g=e.getElementRule(i.name);if(g){for(let v=0,h=g.attributesOrder.length;v<h;v++){const C=g.attributesOrder[v];if(C in m.map){const S=m.map[C];b.map[C]=S,b.push({name:C,value:S})}}for(let v=0,h=m.length;v<h;v++){const C=m[v].name;if(!(C in b.map)){const S=m.map[C];b.map[C]=S,b.push({name:C,value:S})}}m=b}}if(n.start(u,m,f),Ys(u))kt(i.value)&&n.text(i.value,!0),n.end(u);else if(!f){let b=i.firstChild;if(b){"pre"!==u&&"textarea"!==u||3!==b.type||"\n"!==(null===(l=b.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(b)}while(b=b.next)}n.end(u)}}};return 1!==r.type||t.inner?3===r.type?s[3](r):s[11](r):a(r),n.getContent()}}},J0=new Set;G(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{J0.add(t)});const Z0=["font","text-decoration","text-emphasis"],qf=(t,e)=>on(t.parseStyle(t.getAttrib(e,"style"))),AN=(t,e,n)=>{const r=qf(t,e),o=qf(t,n),s=a=>{var i,l;const c=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",u=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return Jn(c)&&Jn(u)&&c!==u};return Ne(r,a=>{const i=l=>Ne(l,c=>c===a);if(!i(o)&&i(Z0)){const l=Wt(o,c=>Ne(Z0,u=>sn(c,u)));return Ne(l,s)}return s(a)})},tv=(t,e,n)=>k.from(n.container()).filter(at).exists(r=>{const o=t?0:-1;return e(r.data.charAt(n.offset()+o))}),$f=vt(tv,!0,Ja),Wf=vt(tv,!1,Ja),TN=t=>{const e=t.container();return at(e)&&(0===e.data.length||vc(e.data)&&pl.isBookmarkNode(e.parentNode))},Ts=(t,e)=>n=>of(t?0:-1,n).filter(e).isSome(),ev=t=>Eg(t)&&"block"===$(D(t),"display"),nv=t=>{return De(t)&&!(xt(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},RN=Ts(!0,ev),ON=Ts(!1,ev),bl=Ts(!0,To),vl=Ts(!1,To),rv=Ts(!0,Zo),ov=Ts(!1,Zo),Rs=Ts(!0,nv),Os=Ts(!1,nv),sv=(t,e)=>{return o=ke,ve(r=e,n=t)?Sr(n,s=>o(s)||ue(s,r)).slice(0,-1):[];var n,r,o},ns=(t,e)=>[t].concat(sv(t,e)),Vf=(t,e,n)=>kb(t,e,n,TN),av=(t,e,n)=>Ze(ns(D(e.container()),t),(r=>o=>r.isBlock(pe(o)))(n)),iv=(t,e,n,r)=>Vf(t,e.dom,n).forall(o=>av(e,n,r).fold(()=>!Oo(o,n,e.dom),s=>!Oo(o,n,e.dom)&&ve(s,D(o.container())))),lv=(t,e,n,r)=>av(e,n,r).fold(()=>Vf(t,e.dom,n).forall(o=>!Oo(o,n,e.dom)),o=>Vf(t,o.dom,n).isNone()),Kf=vt(lv,!1),cv=vt(lv,!0),DN=vt(iv,!1),BN=vt(iv,!0),PN=t=>Lc(t).exists(Xs),Jc=(t,e,n,r)=>{const o=Wt(ns(D(n.container()),e),a=>r.isBlock(pe(a))),s=Pn(o).getOr(e);return Nr(t,s.dom,n).filter(PN)},Xf=(t,e,n)=>Lc(e).exists(Xs)||Jc(!0,t,e,n).isSome(),Yf=(t,e,n)=>{return(r=e,k.from(r.getNode(!0)).map(D)).exists(Xs)||Jc(!1,t,e,n).isSome();var r},LN=vt(Jc,!1),MN=vt(Jc,!0),dv=t=>X.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),uv=(t,e,n)=>{const r=Wt(ns(D(e.container()),t),o=>n.isBlock(pe(o)));return Pn(r).getOr(t)},fv=(t,e,n)=>dv(e)?Wf(e):Wf(e)||lr(uv(t,e,n).dom,e).exists(Wf),mv=(t,e,n)=>dv(e)?$f(e):$f(e)||or(uv(t,e,n).dom,e).exists($f),Gf=t=>Lc(t).bind(e=>_o(e,$n)).exists(e=>{return n=$(e,"white-space"),At(["pre","pre-wrap"],n);var n}),pv=(t,e)=>n=>{return r=new un(n,t)[e](),dt(r)&&De(r)&&fb(r);var r},gv=(t,e,n)=>{return!Gf(e)&&(s=n,lr((r=t).dom,o=e).isNone()||or(r.dom,o).isNone()||Kf(r,o,s)||cv(r,o,s)||Yf(r,o,s)||Xf(r,o,s)||fv(t,e,n)||mv(t,e,n));var r,o,s},yl=(t,e,n)=>!Gf(e)&&(Kf(t,e,n)||DN(t,e,n)||Yf(t,e,n)||fv(t,e,n)||((r,o)=>{const s=lr(r.dom,o).getOr(o),a=pv(r.dom,"prev");return o.isAtStart()&&(a(o.container())||a(s.container()))})(t,e)),Cl=(t,e,n)=>!Gf(e)&&(cv(t,e,n)||BN(t,e,n)||Xf(t,e,n)||mv(t,e,n)||((r,o)=>{const s=or(r.dom,o).getOr(o),a=pv(r.dom,"next");return o.isAtEnd()&&(a(o.container())||a(s.container()))})(t,e)),Qf=(t,e,n)=>yl(t,e,n)||Cl(t,(r=>{const o=r.container(),s=r.offset();return at(o)&&s<o.data.length?X(o,s+1):r})(e),n),hv=(t,e)=>jc(t.charAt(e)),bv=(t,e)=>Ja(t.charAt(e)),vv=(t,e,n,r)=>{const o=e.data,s=X(e,0);return n||!hv(o,0)||Qf(t,s,r)?!!(n&&bv(o,0)&&yl(t,s,r))&&(e.data=gn+o.slice(1),!0):(e.data=" "+o.slice(1),!0)},yv=(t,e,n,r)=>{const o=e.data,s=X(e,o.length-1);return n||!hv(o,o.length-1)||Qf(t,s,r)?!!(n&&bv(o,o.length-1)&&Cl(t,s,r))&&(e.data=o.slice(0,-1)+gn,!0):(e.data=o.slice(0,-1)+" ",!0)},Cv=(t,e,n,r)=>{if(0===n)return;const o=D(t),s=In(o,c=>r.isBlock(pe(c))).getOr(o),a=t.data.slice(e,e+n),i=e+n>=t.data.length&&Cl(s,X(t,t.data.length),r),l=0===e&&yl(s,X(t,0),r);t.replaceData(e,n,Bg(a,4,l,i))},Zc=(t,e,n)=>{const r=t.data.slice(e),o=r.length-rc(r).length;Cv(t,e,o,n)},Jf=(t,e,n)=>{const r=t.data.slice(0,e),o=r.length-oc(r).length;Cv(t,e-o,o,n)},Zf=(t,e,n,r,o=!0)=>{const s=oc(t.data).length,a=o?t:e,i=o?e:t;return o?a.appendData(i.data):a.insertData(0,i.data),Ot(D(i)),r&&Zc(a,s,n),a},FN=(t,e)=>((n,r)=>{const o=n.container(),s=n.offset();return!X.isTextPosition(n)&&o===r.parentNode&&s>X.before(r).offset()})(e,t)?X(e.container(),e.offset()-1):e,xv=t=>{return Qr(t.previousSibling)?k.some(at(e=t.previousSibling)?X(e,e.data.length):X.after(e)):t.previousSibling?Jr(t.previousSibling):k.none();var e},wv=t=>{return Qr(t.nextSibling)?k.some(at(e=t.nextSibling)?X(e,0):X.before(e)):t.nextSibling?zn(t.nextSibling):k.none();var e},Sv=(t,e,n)=>{n.fold(()=>{t.focus()},r=>{t.selection.setRng(r.toRange(),e)})},zN=(t,e)=>e&&Jt(t.schema.getBlockElements(),pe(e)),ua=(t,e,n,r=!0,o=!1)=>{const s=((t,e,n)=>{return(r=t,o=e,s=n,r?(a=o,wv(i=s).orThunk(()=>xv(i)).orThunk(()=>{return or(l=a,X.after(c=i)).orThunk(()=>lr(l,X.before(c)));var l,c})):((a,i)=>xv(i).orThunk(()=>wv(i)).orThunk(()=>{return l=a,k.from((c=i).previousSibling?c.previousSibling:c.parentNode).bind(u=>lr(l,X.before(u))).orThunk(()=>or(l,X.after(c)));var l,c}))(o,s)).map(vt(FN,n));var r,o,s,a,i})(e,t.getBody(),n.dom),a=In(n,vt(zN,t),(i=t.getBody(),c=>c.dom===i));var i;const l=((c,u,f,m)=>{const b=Er(c).filter(tr),g=ar(c).filter(tr);return Ot(c),(v=b,h=g,C=u,S=(E,A,N)=>{const O=E.dom,M=A.dom,j=O.data.length;return Zf(O,M,f,m),N.container()===M?X(O,j):N},v.isSome()&&h.isSome()&&C.isSome()?k.some(S(v.getOrDie(),h.getOrDie(),C.getOrDie())):k.none()).orThunk(()=>(m&&(b.each(E=>Jf(E.dom,E.dom.length,f)),g.each(E=>Zc(E.dom,0,f))),u));var v,h,C,S})(n,s,t.schema,(u=n,Jt(t.schema.getTextInlineElements(),pe(u))));var u;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(c=>((u,f)=>{if(Qe(u)){const m=Y('<br data-mce-bogus="1">');return f?G(Oe(u),b=>{kf(b)||Ot(b)}):xe(u),re(u,m),k.some(X.before(m.dom))}return k.none()})(c,o)).fold(()=>{r&&Sv(t,e,l)},c=>{r&&Sv(t,e,k.some(c))})},UN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,fa=(t,e)=>Be(D(e),Bk(t))&&!Gs(t.schema,e)&&t.dom.isEditable(e),Ev=t=>{var e,n;return"rtl"===Re.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",UN.test(n))},Ds=(t,e,n)=>{const r=(o=t,s=e,Wt(Re.DOM.getParents(n.container(),"*",s),o));var o,s;return k.from(r[r.length-1])},Dr=(t,e)=>{const n=e.container(),r=e.offset();return t?ys(n)?at(n.nextSibling)?X(n.nextSibling,0):X.after(n):vu(e)?X(n,r+1):e:ys(n)?at(n.previousSibling)?X(n.previousSibling,n.previousSibling.data.length):X.before(n):yu(e)?X(n,r-1):e},kv=vt(Dr,!0),_v=vt(Dr,!1),Nv=(t,e)=>{const n=r=>r.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},tm=t=>Nv(t,"Delete"),HN=t=>_g(t)||zi(t),td=(t,e)=>ve(t,e)?_o(e,HN,(n=>r=>us(Mn(r),n,ue))(t)):k.none(),em=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},Av=(t,e,n)=>xn(zn(n),Jr(n),(r,o)=>{const s=Dr(!0,r),a=Dr(!1,o),i=Dr(!1,e);return t?or(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s)):lr(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a))}).getOr(!0),Tv=t=>{var e;return(8===Ma(e=t)||"#comment"===pe(e)?Er(t):kn(t)).bind(Tv).orThunk(()=>k.some(t))},Rv=(t,e,n,r=!0)=>{var o;e.deleteContents();const s=Tv(n).getOr(n),a=D(null!==(o=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==o?o:n.dom);if(a.dom===t.getBody()?em(t,r):Qe(a)&&(vs(a),r&&t.selection.setCursorLocation(a.dom,0)),!ue(n,a)){const l=us(Mn(a),n)?[]:Mn(i=a).map(Oe).map(c=>Wt(c,u=>!ue(i,u))).getOr([]);G(l.concat(Oe(n)),c=>{ue(c,a)||ve(c,a)||!Qe(c)||Ot(c)})}var i},Ov=(t,e)=>gs(t,e).isSome(),nm=t=>Fn(t,"td,th"),Dv=(t,e)=>ul(D(t),e),rm=(t,e)=>({start:t,end:e}),xl=Ro([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ed=(t,e)=>lo(D(t),"td,th",e),Bv=t=>!ue(t.start,t.end),Pv=(t,e)=>ul(t.start,e).bind(n=>ul(t.end,e).bind(r=>fs(ue(n,r),n))),om=t=>e=>Pv(e,t).map(n=>((r,o,s)=>({rng:r,table:o,cells:s}))(e,n,nm(n))),Lv=(t,e,n,r)=>{if(n.collapsed||!t.forall(Bv))return k.none();if(e.isSameTable){const o=t.bind(om(r));return k.some({start:o,end:o})}{const o=ed(n.startContainer,r),s=ed(n.endContainer,r),a=o.bind((l=>c=>ul(c,l).bind(u=>wo(nm(u)).map(f=>rm(c,f))))(r)).bind(om(r)),i=s.bind((l=>c=>ul(c,l).bind(u=>Pn(nm(u)).map(f=>rm(f,c))))(r)).bind(om(r));return k.some({start:a,end:i})}},Mv=(t,e)=>Ms(t,n=>ue(n,e)),sm=t=>xn(Mv(t.cells,t.rng.start),Mv(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),Iv=(t,e)=>{const{startTable:n,endTable:r}=e,o=t.cloneRange();return n.each(s=>o.setStartAfter(s.dom)),r.each(s=>o.setEndBefore(s.dom)),o},Fv=t=>G(t,e=>{d(e,"contenteditable"),vs(e)}),am=(t,e,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(e.dom.lastChild)):(o.setStartBefore(e.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),im(t,o,e,!1).each(s=>s())},jv=t=>{const e=Za(t),n=D(t.selection.getNode());gc(n.dom)&&Qe(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&Ne(e,r=>ue(r,n))&&an(n,"data-mce-selected","1")},zv=(t,e,n)=>k.some(()=>{const r=t.selection.getRng(),o=n.bind(({rng:s,isStartInTable:a})=>{const i=k.from((c=t).dom.getParent(a?s.endContainer:s.startContainer,c.dom.isBlock)).map(D);var c;s.deleteContents(),((c,u,f)=>{f.each(m=>{u?Ot(m):(vs(m),c.selection.setCursorLocation(m.dom,0))})})(t,a,i.filter(Qe));const l=a?e[0]:e[e.length-1];return am(t,l,r,a),Qe(l)?k.none():k.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);Fv(o),jv(t)}),WN=(t,e,n,r)=>k.some(()=>{const o=t.selection.getRng(),s=e[0],a=n[n.length-1];am(t,s,o,!0),am(t,a,o,!1);const i=Qe(s)?e:e.slice(1),l=Qe(a)?n:n.slice(0,-1);Fv(i.concat(l)),r.deleteContents(),jv(t)}),im=(t,e,n,r=!0)=>k.some(()=>{Rv(t,e,n,r)}),VN=(t,e)=>k.some(()=>ua(t,!1,e)),Uv=(t,e)=>Ze(ns(e,t),Ui),lm=(t,e)=>Ze(ns(e,t),Eo("caption")),nd=(t,e)=>k.some(()=>{vs(e),t.selection.setCursorLocation(e.dom,0)}),Hv=(t,e)=>t?rv(e):ov(e),cm=(t,e)=>{const n=D(t.selection.getStart(!0)),r=Za(t);return t.selection.isCollapsed()&&0===r.length?((t,e,n)=>{const r=D(t.getBody());return lm(r,n).fold(()=>((o,s,a,i)=>{const l=X.fromRangeStart(o.selection.getRng());return Uv(a,i).bind(c=>{return Qe(c)?nd(o,c):(f=a,b=c,g=l,Ga(s,o.getBody(),g).bind(v=>Uv(f,D(v.getNode())).bind(h=>ue(h,b)?k.none():k.some(St))));var f,b,g})})(t,e,r,n).orThunk(()=>fs(((o,s)=>{const a=X.fromRangeStart(o.selection.getRng());return Hv(s,a)||Nr(s,o.getBody(),a).exists(i=>Hv(s,i))})(t,e),St)),o=>((s,a,i,l)=>{const c=X.fromRangeStart(s.selection.getRng());return Qe(l)?nd(s,l):(f=i,b=l,g=c,Ga(m=a,(u=s).getBody(),g).fold(()=>k.some(St),v=>{return C=m,S=g,E=v,zn((h=b).dom).bind(A=>Jr(h.dom).map(N=>C?S.isEqual(A)&&E.isEqual(N):S.isEqual(N)&&E.isEqual(A))).getOr(!0)?((h,C)=>nd(h,C))(u,b):((h,C,S)=>lm(h,D(S.getNode())).fold(()=>k.some(St),E=>fs(!ue(E,C),St)))(f,b,v);var h,C,S,E}));var u,f,m,b,g})(t,e,r,o))})(t,e,n):((o,s,a)=>{const i=D(o.getBody()),l=o.selection.getRng();return 0!==a.length?zv(o,a,k.none()):(c=o,f=l,lm(u=i,s).fold(()=>{return b=c,((t,e)=>{const n=(s=>a=>ue(s,a))(t),r=((s,a)=>{const i=ed(s.startContainer,a),l=ed(s.endContainer,a);return xn(i,l,rm)})(e,n),o=((s,a)=>{const i=Dv(s.startContainer,a),l=Dv(s.endContainer,a),c=i.isSome(),u=l.isSome(),f=xn(i,l,ue).getOr(!1);return xn((m={startTable:i,endTable:l,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u}).startTable,m.endTable,(b,g)=>{const v=Ov(b,C=>ue(C,g)),h=Ov(g,C=>ue(C,b));return v||h?{...m,startTable:v?k.none():m.startTable,endTable:h?k.none():m.endTable,isSameTable:!1,isMultiTable:!1}:m}).getOr(m);var m})(e,n);return a=e,i=n,r.exists(l=>{return u=i,!Bv(c=l)&&Pv(c,u).exists(f=>{const m=f.dom.rows;return 1===m.length&&1===m[0].cells.length})&&gf(l.start,a);var c,u})?r.map(s=>xl.singleCellTable(e,s.start)):o.isMultiTable?((s,a,i,l)=>Lv(s,a,i,l).bind(({start:c,end:u})=>{const f=c.bind(sm).getOr([]),m=u.bind(sm).getOr([]);if(f.length>0&&m.length>0){const b=Iv(i,a);return k.some(xl.multiTable(f,m,b))}return k.none()}))(r,o,e,n):((s,a,i,l)=>Lv(s,a,i,l).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=a,f=sm(c).getOr([]);if(u&&c.cells.length===f.length)return k.some(xl.fullTable(c.table));if(f.length>0){if(u)return k.some(xl.partialTable(f,k.none()));{const m=Iv(i,a);return k.some(xl.partialTable(f,k.some({...a,rng:m})))}}return k.none()}))(r,o,e,n);var a,i})(u,f).bind(h=>h.fold(vt(im,b),vt(VN,b),vt(zv,b),vt(WN,b)));var b},b=>nd(c,b)));var c,u,f})(t,n,r)},ma=(t,e)=>{let n=e;for(;n&&n!==t;){if(Gr(n)||De(n))return n;n=n.parentNode}return null},XN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],YN=lt.each,dm=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),r=o=>Ne(XN,s=>sn(o,s))||n.has(o);return{compare:(o,s)=>{if(o.nodeName!==s.nodeName||o.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return YN(e.getAttribs(l),u=>{const f=u.nodeName.toLowerCase();"style"===f||r(f)||(c[f]=e.getAttrib(l,f))}),c},i=(l,c)=>{for(const u in l)if(Jt(l,u)){const f=c[u];if(Me(f)||l[u]!==f)return!1;delete c[u]}for(const u in c)if(Jt(c,u))return!1;return!0};return!(xt(o)&&xt(s)&&(!i(a(o),a(s))||!i(e.parseStyle(e.getAttrib(o,"style")),e.parseStyle(e.getAttrib(s,"style"))))||Tr(o)||Tr(s))},isAttributeInternal:r}},qv=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),$v=(t,e,n,r)=>{const o=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const c=r.attributes[l];c?c.nodes.push(n):r.attributes[l]={filter:i,nodes:[n]}}}},Wv=(t,e)=>{const n=(r,o)=>{Ae(r,s=>{const a=Cn(s.nodes);G(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(o?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!Se(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},Vv=(t,e,n,r={})=>{const o=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((c,u)=>{let f=c;for(;f=f.walk();)$v(s,a,f,l)})(i),l})(t,e,n);Wv(o,r)},um=(t,e,n,r)=>{if((t.pad_empty_with_br||e.insert)&&n(r)){const o=new Vn("br",1);e.insert&&o.attr("data-mce-bogus","1"),r.empty().append(o)}else r.empty().append(new Vn("#text",3)).value=gn},Kv=(t,e)=>{const n=t?.firstChild;return dt(n)&&n===t.lastChild&&n.name===e},wl=(t,e,n,r)=>r.isEmpty(e,n,o=>((s,a)=>{const i=s.getElementRule(a.name);return!0===i?.paddEmpty})(t,o)),GN=t=>{let e;for(let n=t;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(e=n)}return k.from(e)},fm=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const r=t.children();for(const o of r)n&&!e.isValidChild(n.name,o.name)&&fm(o,e,n);t.unwrap()}},mm=(t,e,n,r=St)=>{const o=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=lt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=u=>u!==n&&!i[u.name];for(let u=0;u<t.length;u++){const f=t[u];let m,b,g;if(!f.parent||l.has(f))continue;if(o[f.name]&&"li"===f.parent.name){let h=f.next;for(;h&&o[h.name];)h.name="li",l.add(h),f.parent.insert(h,f.parent),h=h.next;f.unwrap();continue}const v=[f];for(m=f.parent;m&&!e.isValidChild(m.name,f.name)&&c(m);m=m.parent)v.push(m);if(m&&v.length>1)if(pm(e,f,m))fm(f,e);else{v.reverse(),b=v[0].clone(),r(b);let h=b;for(let C=0;C<v.length-1;C++){e.isValidChild(h.name,v[C].name)&&C>0?(g=v[C].clone(),r(g),h.append(g)):g=h;for(let S=v[C].firstChild;S&&S!==v[C+1];){const E=S.next;g.append(S),S=E}h=g}wl(e,s,a,b)?m.insert(f,v[0],!0):(m.insert(b,v[0],!0),m.insert(f,b)),m=v[0],(wl(e,s,a,m)||Kv(m,"br"))&&m.empty().remove()}else if(f.parent){if("li"===f.name){let h=f.prev;if(h&&("ul"===h.name||"ol"===h.name)){h.append(f);continue}if(h=f.next,h&&("ul"===h.name||"ol"===h.name)&&h.firstChild){h.insert(f,h.firstChild,!0);continue}const C=new Vn("ul",1);r(C),f.wrap(C);continue}if(e.isValidChild(f.parent.name,"div")&&e.isValidChild("div",f.name)){const h=new Vn("div",1);r(h),f.wrap(h)}else fm(f,e)}}},pm=(t,e,n=e.parent)=>{return!(!n||(!t.children[e.name]||t.isValidChild(n.name,e.name))&&("a"!==e.name||!((r,o)=>{let s=r;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n))&&(r=n,"summary"!==r.name||!qv(e)||n?.firstChild===e&&n?.lastChild===e));var r},gm=t=>t.collapsed?t:(e=>{const n=X.fromRangeStart(e),r=X.fromRangeEnd(e),o=e.commonAncestorContainer;return Nr(!1,o,r).map(s=>!Oo(n,r,o)&&Oo(n,s,o)?((a,i,l,c)=>{const u=document.createRange();return u.setStart(a,i),u.setEnd(l,c),u})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),hm=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},Xv=(t,e)=>{const n=X.after(t),r=Bo(e).prev(n);return r?r.toRange():null},tA=["pre"],bm=gc,eA=(t,e,n)=>{var r,o;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,c=As({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=hr(e)),-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u);let f=s.getRng();const m=f.startContainer,b=t.getBody();var E,A;m===b&&s.isCollapsed()&&a.isBlock(b.firstChild)&&(E=t,dt(A=b.firstChild)&&!E.schema.getVoidElements()[A.nodeName])&&a.isEmpty(b.firstChild)&&(f=a.createRng(),f.setStart(b.firstChild,0),f.setEnd(b.firstChild,0),s.setRng(f)),s.isCollapsed()||(E=>{const A=E.dom,N=gm(E.selection.getRng());E.selection.setRng(N);const O=A.getParent(N.startContainer,bm);var M,j,H;M=A,j=N,dt(H=O)&&H===M.getParent(j.endContainer,bm)&&gf(D(H),j)?im(E,N,D(O)):N.startContainer===N.endContainer&&N.endOffset-N.startOffset==1&&at(N.startContainer.childNodes[N.startOffset])?N.deleteContents():E.getDoc().execCommand("Delete",!1)})(t);const g=s.getNode(),v={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},h=i.parse(e,v);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,r=e.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,s)=>{const a=o.getNonEmptyElements();return dt(s)&&(s.isEmpty(a)||(l=s,o.getBlockElements()[l.name]&&dt((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===gn)(l.firstChild)));var l,c})(t,r)&&(r=r?.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(t.schema,h)&&((E,A)=>!!hm(E,A))(a,g))return f=((t,e,n,r)=>{const o=((f,m,b)=>{const g=m.serialize(b);return(v=>{var h,C;const S=v.firstChild,E=v.lastChild;return S&&"META"===S.nodeName&&(null===(h=S.parentNode)||void 0===h||h.removeChild(S)),E&&"mce_marker"===E.id&&(null===(C=E.parentNode)||void 0===C||C.removeChild(E)),v})(f.createFragment(g))})(e,t,r),s=hm(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||dt(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((r=e.firstChild).data===gn||Ve(r)))?t.slice(0,-1):t;var r,e,n})((i=o.firstChild,Wt(null!==(l=i?.childNodes)&&void 0!==l?l:[],f=>"LI"===f.nodeName)));var i,l;const c=e.getRoot(),u=f=>{const m=X.fromRangeStart(n),b=Bo(e.getRoot()),g=1===f?b.prev(m):b.next(m),v=g?.getNode();return!v||hm(e,v)!==s};return s?u(1)?((f,m,b)=>{const g=f.parentNode;return g&&lt.each(m,v=>{g.insertBefore(v,f)}),((v,h)=>{const C=X.before(v),S=Bo(h).next(C);return S?S.toRange():null})(f,b)})(s,a,c):u(2)?(f=s,b=c,e.insertAfter((m=a).reverse(),f),Xv(m[0],b)):((f,m,b,g)=>{const v=((C,S)=>{const E=S.cloneRange(),A=S.cloneRange();return E.setStartBefore(C),A.setEndAfter(C),[E.cloneContents(),A.cloneContents()]})(f,g),h=f.parentNode;return h&&(h.insertBefore(v[0],f),lt.each(m,C=>{h.insertBefore(C,f)}),h.insertBefore(v[1],f),h.removeChild(f)),Xv(m[m.length-1],b)})(s,a,c,n):null;var f,m,b})(c,a,s.getRng(),h),f&&s.setRng(f),e;!0===n.paste&&((E,A,N,O)=>{var M;const j=A.firstChild,H=A.lastChild,W=j===("bookmark"===H.attr("data-mce-type")?H.prev:H),P=At(tA,j.name);if(W&&P){const I="false"!==j.attr("contenteditable"),q=(null===(M=E.getParent(N,E.isBlock))||void 0===M?void 0:M.nodeName.toLowerCase())===j.name,Q=k.from(ma(O,N)).forall(Gr);return I&&q&&Q}return!1})(a,h,g,t.getBody())&&(null===(r=h.firstChild)||void 0===r||r.unwrap()),(E=>{let A=E;for(;A=A.walk();)1===A.type&&A.attr("data-mce-fragment","1")})(h);let C=h.lastChild;if(C&&"mce_marker"===C.attr("id")){const E=C;for(C=C.prev;C;C=C.walk(!0))if(3===C.type||!a.isBlock(C.name)){C.parent&&t.schema.isValidChild(C.parent.name,"span")&&C.parent.insert(E,C,"br"===C.name);break}}if(t._selectionOverrides.showBlockCaretContainer(g),v.invalid||((E,A,N)=>{var O;return Ne(N.children(),qv)&&"SUMMARY"===(null===(O=E.getParent(A,E.isBlock))||void 0===O?void 0:O.nodeName)})(a,g,h)){t.selection.setContent(u);let E,A=s.getNode();const N=t.getBody();for(Fi(A)?A=E=N:E=A;E&&E!==N;)A=E,E=E.parentNode;e=A===N?N.innerHTML:a.getOuterHTML(A);const O=i.parse(e),M=(I=>{for(let q=I;q;q=q.walk())if("mce_marker"===q.attr("id"))return k.some(q);return k.none()})(O),j=M.bind(GN).getOr(O);M.each(I=>I.replace(h));const H=h.children(),W=null!==(o=h.parent)&&void 0!==o?o:O;h.unwrap();const P=Wt(H,I=>pm(t.schema,I,W));mm(P,t.schema,j),Vv(i.getNodeFilters(),i.getAttributeFilters(),O),e=c.serialize(O),A===N?a.setHTML(N,e):a.setOuterHTML(A,e)}else e=c.serialize(h),((E,A,N)=>{var O;if("all"===N.getAttribute("data-mce-bogus"))null===(O=N.parentNode)||void 0===O||O.insertBefore(E.dom.createFragment(A),N);else{const M=N.firstChild;!M||M===N.lastChild&&"BR"===M.nodeName?E.dom.setHTML(N,A):E.selection.setContent(A,{no_events:!0})}})(t,e,g);var S;return((E,A)=>{const N=E.schema.getTextInlineElements(),O=E.dom;if(A){const M=E.getBody(),j=dm(E);lt.each(O.select("*[data-mce-fragment]"),H=>{if(dt(N[H.nodeName.toLowerCase()])&&ur(qf(O,H),I=>!J0.has(I)))for(let W=H.parentElement;dt(W)&&W!==M&&!AN(O,H,W);W=W.parentElement)if(j.compare(W,H)){O.remove(H,!0);break}})}})(t,l),((E,A)=>{var N,O,M;let j;const H=E.dom,W=E.selection;if(!A)return;W.scrollIntoView(A);const P=ma(E.getBody(),A);if(P&&"false"===H.getContentEditable(P))return H.remove(A),void W.select(P);let I=H.createRng();const q=A.previousSibling;if(at(q)){I.setStart(q,null!==(O=null===(N=q.nodeValue)||void 0===N?void 0:N.length)&&void 0!==O?O:0);const mt=A.nextSibling;at(mt)&&(q.appendData(mt.data),null===(M=mt.parentNode)||void 0===M||M.removeChild(mt))}else I.setStartBefore(A),I.setEndBefore(A);const Q=H.getParent(A,H.isBlock);if(H.remove(A),Q&&H.isEmpty(Q)){const mt=bm(Q);xe(D(Q)),I.setStart(Q,0),I.setEnd(Q,0),mt||Q.getAttribute("data-mce-fragment")||!(j=(ct=>{let Rt=X.fromRangeStart(ct);return Rt=Bo(E.getBody()).next(Rt),Rt?.toRange()})(I))?H.add(Q,H.create("br",mt?{}:{"data-mce-bogus":"1"})):(I=j,H.remove(Q))}W.setRng(I)})(t,a.get("mce_marker")),S=t.getBody(),lt.each(S.getElementsByTagName("*"),E=>{E.removeAttribute("data-mce-fragment")}),((E,A,N)=>{k.from(E.getParent(A,"td,th")).map(D).each(O=>{return j=N,void kn(M=O).each(H=>{Er(H).each(W=>{j.isBlock(pe(M))&&Xs(H)&&j.isBlock(pe(W))&&Ot(H)})});var M,j})})(a,s.getStart(),t.schema),((E,A,N)=>{const O=Sr(D(N),M=>ue(M,D(A)));_a(O,O.length-2).filter($n).fold(()=>Eu(E,A),M=>Eu(E,M.dom))})(t.schema,t.getBody(),s.getStart()),e},rd=t=>t instanceof Vn,vm=(t,e,n)=>{var r;t.dom.setHTML(t.getBody(),e),!0!==n&&da(r=t)&&zn(r.getBody()).each(o=>{const s=o.getNode(),a=Zo(s)?zn(s).getOr(o):o;r.selection.setRng(a.toRange())})},Yv=t=>Ce(t)?t:ke,ym=(t,e,n)=>{const r=e(t),o=Yv(n);return r.orThunk(()=>o(t)?k.none():((s,a,i)=>{let l=s.dom;const c=Yv(i);for(;l.parentNode;){l=l.parentNode;const u=D(l),f=a(u);if(f.isSome())return f;if(c(u))break}return k.none()})(t,e,o))},Cm=xf,Gv=(t,e,n)=>{const r=t.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const s=r[o];if(Rr(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},xm=(t,e,n,r,o)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!Gv(t,i,n)||i.parentNode===s||!!Lo(t,i,n,r,!0));return!!Lo(t,a,n,r,o)},od=(t,e,n)=>!(!fn(n)||!Cm(e,n.inline))||!(!Po(n)||!Cm(e,n.block))||!!Rr(n)&&xt(e)&&t.is(e,n.selector),Qv=(t,e,n,r,o,s)=>{const a=n[r],i="attributes"===r;if(Ce(n.onmatch))return n.onmatch(e,n,r);if(a)if(Aa(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):Uc(t,e,a[l]))return!0}else for(const l in a)if(Jt(a,l)){const c=i?t.getAttrib(e,l):Uc(t,e,l),u=Ns(a[l],s),f=Se(c)||cs(c);if(f&&Se(u))continue;if(o&&f&&!n.exact||(!o||n.exact)&&!Cm(c,wf(u,l)))return!1}return!0},Lo=(t,e,n,r,o)=>{const s=t.formatter.get(n),a=t.dom;if(s&&xt(e))for(let i=0;i<s.length;i++){const l=s[i];if(od(t.dom,e,l)&&Qv(a,e,l,"attributes",o,r)&&Qv(a,e,l,"styles",o,r)){const c=l.classes;if(c)for(let u=0;u<c.length;u++)if(!t.dom.hasClass(e,Ns(c[u],r)))return;return l}}},wm=(t,e,n,r,o)=>{if(r)return xm(t,r,e,n,o);if(r=t.selection.getNode(),xm(t,r,e,n,o))return!0;const s=t.selection.getStart();return!(s===r||!xm(t,s,e,n,o))},Sl=hn,Jv=t=>{if(t){const e=new un(t,t);for(let n=e.current();n;n=e.next())if(at(n))return n}return null},Sm=t=>{const e=ot("span");return xr(e,{id:df,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&re(e,Xt(Sl)),e},Em=(t,e,n)=>{const r=t.dom,o=t.selection;if(zb(e))ua(t,!1,D(e),n,!0);else{const s=o.getRng(),a=r.getParent(e,r.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,u=s.endOffset,f=(m=>{const b=Jv(m);return b&&b.data.charAt(0)===Sl&&b.deleteData(0,1),b})(e);r.remove(e,!0),i===f&&l>0&&s.setStart(f,l-1),c===f&&u>0&&s.setEnd(f,u-1),a&&r.isEmpty(a)&&vs(D(a)),o.setRng(s)}},km=(t,e,n)=>{const r=t.dom,o=t.selection;if(e)Em(t,e,n);else if(!(e=aa(t.getBody(),o.getStart())))for(;e=r.get(df);)Em(t,e,n)},Zv=(t,e)=>(t.appendChild(e),e),ty=(t,e)=>{var n;const r=zo(t,(s,a)=>Zv(s,a.cloneNode(!1)),e),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return Zv(r,o.createTextNode(Sl))},ey=t=>{const e=Sm(!1),n=ty(t,e.dom);return{caretContainer:e,caretPosition:X(n,0)}},ny=(t,e)=>{const{caretContainer:n,caretPosition:r}=ey(e);return _t(D(t),n),Ot(D(t)),r},ry=(t,e)=>{if(Ar(e.dom))return!1;const n=t.schema.getTextInlineElements();return Jt(n,pe(e))&&!Ar(e.dom)&&!Ks(e.dom)},El={},oy=co(["pre"]);((t,e)=>{El[t]||(El[t]=[]),El[t].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=Wt(Wt(r,oy),(s=>a=>{const i=a.previousSibling;return oy(i)&&At(s,i)})(r));G(o,s=>{((a,i)=>{const l=D(i),c=ye(l).dom;Ot(l),fe(D(a),[ot("br",c),ot("br",c),...Oe(l)])})(s.previousSibling,s)})}})})("pre");const sy=["fontWeight","fontStyle","color","fontSize","fontFamily"],ay=(t,e)=>{const n=t.get(e);return it(n)?Ze(n,r=>{return fn(r)&&"span"===r.inline&&Gt((o=r).styles)&&Ne(on(o.styles),s=>At(sy,s));var o}):k.none()},iy=(t,e)=>lr(e,X.fromRangeStart(t)).isNone(),ly=(t,e)=>!1===or(e,X.fromRangeEnd(t)).exists(n=>!Ve(n.getNode())||or(e,n).isSome()),cy=t=>e=>yE(e)&&t.isEditable(e),dy=t=>Wt(t.getSelectedBlocks(),cy(t.dom)),_m=lt.each,Nm=t=>xt(t)&&!Tr(t)&&!Ar(t)&&!Ks(t),uy=(t,e)=>{for(let n=t;n;n=n[e]){if(at(n)&&Jn(n.data))return t;if(xt(n)&&!Tr(n))return n}return t},fy=(t,e,n)=>{const r=dm(t),o=Jo(e)&&t.dom.isEditable(e),s=Jo(n)&&t.dom.isEditable(n);if(o&&s){const a=uy(e,"previousSibling"),i=uy(n,"nextSibling");if(r.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return t.dom.remove(i),lt.each(lt.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},my=(t,e,n,r)=>{var o;if(r&&!1!==e.merge_siblings){const s=null!==(o=fy(t,Ib(r),r))&&void 0!==o?o:r;fy(t,s,Ib(s,!0))}},Am=(t,e,n)=>{_m(t.childNodes,r=>{Nm(r)&&(e(r)&&n(r),r.hasChildNodes()&&Am(r,e,n))})},py=(t,e)=>n=>!(!n||!Uc(t,n,e)),gy=(t,e,n)=>r=>{var o,s;t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=t,"SPAN"===(s=r).nodeName&&0===o.getAttribs(s).length&&o.remove(s,!0)},pa=Ro([{keep:[]},{rename:["name"]},{removed:[]}]),rA=/^(src|href|style)$/,Tm=lt.each,sd=xf,hy=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),by=(t,e,n)=>{let r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(xt(r)){const s=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>s?s:o]}return at(r)&&n&&o>=r.data.length&&(r=new un(r,t.getBody()).next()||r),at(r)&&!n&&0===o&&(r=new un(r,t.getBody()).prev()||r),r},vy=(t,e)=>{const n=e?"firstChild":"lastChild",r=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&r?"TR"===t.nodeName&&r[n]||r:t},Rm=(t,e,n,r)=>{var o;const s=t.create(n,r);return null===(o=e.parentNode)||void 0===o||o.insertBefore(s,e),s.appendChild(e),s},yy=(t,e,n,r,o)=>{const s=D(e),a=D(t.create(r,o)),i=n?Yo(s):io(s);return fe(a,i),n?(_t(s,a),It(a,s)):(zt(s,a),re(a,s)),a.dom},Cy=(t,e,n)=>{const r=e.parentNode;let o;const s=t.dom,a=jn(t);var i;Po(n)&&r===s.getRoot()&&(n.list_block&&sd(e,n.list_block)||G(Cn(e.childNodes),i=>{ti(t,a,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=Rm(s,i,a),s.setAttribs(o,rl(t))):o=null})),Rr(i=n)&&fn(i)&&us(Te(i,"mixed"),!0)&&!sd(n.inline,e)||s.remove(e,!0)},xy=(t,e,n)=>x(t)?{name:e,value:null}:{name:t,value:Ns(e,n)},wy=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},Sy=(t,e,n,r,o)=>{let s=!1;Tm(n.styles,(a,i)=>{const{name:l,value:c}=xy(i,a,r),u=wf(c,l);(n.remove_similar||Zt(c)||!xt(o)||sd(Uc(t,o,l),u))&&t.setStyle(e,l,""),s=!0}),s&&wy(t,e)},Ey=(t,e,n,r,o)=>{const s=t.dom,a=dm(t),i=t.schema;if(fn(e)&&_u(i,e.inline)&&Gs(i,r)&&r.parentElement===t.getBody())return Cy(t,r,e),pa.removed();if(!e.ceFalseOverride&&r&&"false"===s.getContentEditableParent(r)||r&&!od(s,r,e)&&(!e.links||"A"!==r.nodeName))return pa.keep();const l=r,c=e.preserve_attributes;if(fn(e)&&"all"===e.remove&&it(c)){const u=Wt(s.getAttribs(l),f=>At(c,f.name.toLowerCase()));if(s.removeAllAttribs(l),G(u,f=>s.setAttrib(l,f.name,f.value)),u.length>0)return pa.rename("span")}if("all"!==e.remove){Sy(s,l,e,n,o),Tm(e.attributes,(f,m)=>{const{name:b,value:g}=xy(m,f,n);if(e.remove_similar||Zt(g)||!xt(o)||sd(s.getAttrib(o,b),g)){if("class"===b){const v=s.getAttrib(l,b);if(v){let h="";if(G(v.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(h+=(h?" ":"")+C)}),h)return void s.setAttrib(l,b,h)}}if(rA.test(b)&&l.removeAttribute("data-mce-"+b),"style"===b&&co(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(b),void s.setStyle(l,"list-style-type","none");"class"===b&&l.removeAttribute("className"),l.removeAttribute(b)}}),Tm(e.classes,f=>{f=Ns(f,n),xt(o)&&!s.hasClass(o,f)||s.removeClass(l,f)});const u=s.getAttribs(l);for(let f=0;f<u.length;f++)if(!a.isAttributeInternal(u[f].nodeName))return pa.keep()}return"none"!==e.remove?(Cy(t,l,e),pa.removed()):pa.keep()},oA=(t,e,n,r)=>Ey(t,e,n,r,r).fold(ft(r),o=>(t.dom.createFragment().appendChild(r),t.dom.rename(r,o)),ft(null)),ky=(t,e,n,r,o)=>{(r||t.selection.isEditable())&&((s,a,i,l,c)=>{const u=s.formatter.get(a),f=u[0],m=s.dom,b=s.selection,g=E=>{const A=((N,O,M,j,H)=>{let W;return O.parentNode&&G(Hc(N.dom,O.parentNode).reverse(),P=>{if(!W&&xt(P)&&"_start"!==P.id&&"_end"!==P.id){const I=Lo(N,P,M,j,H);I&&!1!==I.split&&(W=P)}}),W})(s,E,a,i,c);return((N,O,M,j,H,W,P,I)=>{var q,Q;let mt,ct;const Rt=N.dom;if(M){const Nt=M.parentNode;for(let Mt=j.parentNode;Mt&&Mt!==Nt;Mt=Mt.parentNode){let Dt=Rt.clone(Mt,!1);for(let gt=0;gt<O.length&&(Dt=oA(N,O[gt],I,Dt),null!==Dt);gt++);Dt&&(mt&&Dt.appendChild(mt),ct||(ct=Dt),mt=Dt)}P.mixed&&Rt.isBlock(M)||(j=null!==(q=Rt.split(M,j))&&void 0!==q?q:j),mt&&ct&&(null===(Q=H.parentNode)||void 0===Q||Q.insertBefore(mt,H),ct.appendChild(H),fn(P)&&my(N,P,0,mt))}return j})(s,u,A,E,E,0,f,i)},v=E=>Ne(u,A=>kl(s,A,i,E,E)),h=E=>{const A=Cn(E.childNodes),N=v(E)||Ne(u,M=>od(m,E,M)),O=E.parentNode;if(!N&&dt(O)&&Ef(f)&&v(O),f.deep&&A.length)for(let M=0;M<A.length;M++)h(A[M]);G(["underline","line-through","overline"],M=>{xt(E)&&s.dom.getStyle(E,"text-decoration")===M&&E.parentNode&&jb(m,E.parentNode)===M&&kl(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:M}},void 0,E)})},C=E=>{const A=m.get(E?"_start":"_end");if(A){let N=A[E?"firstChild":"lastChild"];return Tr(O=N)&&xt(O)&&("_start"===O.id||"_end"===O.id)&&(N=N[E?"firstChild":"lastChild"]),at(N)&&0===N.data.length&&(N=E?A.previousSibling||A.nextSibling:A.nextSibling||A.previousSibling),m.remove(A,!0),N}var O;return null},S=E=>{let A,N,O=ia(m,E,u,E.collapsed);if(f.split){if(O=Yc(O),A=by(s,O,!0),N=by(s,O),A!==N){if(A=vy(A,!0),N=vy(N,!1),hy(m,A,N)){const j=k.from(A.firstChild).getOr(A);return g(yy(m,j,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void C(!0)}if(hy(m,N,A)){const j=k.from(N.lastChild).getOr(N);return g(yy(m,j,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void C(!1)}A=Rm(m,A,"span",{id:"_start","data-mce-type":"bookmark"}),N=Rm(m,N,"span",{id:"_end","data-mce-type":"bookmark"});const M=m.createRng();M.setStartAfter(A),M.setEndBefore(N),ml(m,M,j=>{G(j,H=>{Tr(H)||Tr(H.parentNode)||g(H)})}),g(A),g(N),A=C(!0),N=C()}else A=N=g(A);O.startContainer=A.parentNode?A.parentNode:A,O.startOffset=m.nodeIndex(A),O.endContainer=N.parentNode?N.parentNode:N,O.endOffset=m.nodeIndex(N)+1}ml(m,O,M=>{G(M,h)})};if(l){if(fl(l)){const E=m.createRng();E.setStartBefore(l),E.setEndAfter(l),S(E)}else S(l);n0(s,a,l,i)}else b.isCollapsed()&&fn(f)&&!Za(s).length?((t,e,n,r)=>{const o=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),c=l.startContainer,u=l.startOffset;let f=c;at(c)&&(u!==c.data.length&&(a=!0),f=f.parentNode);const m=[];let b;for(;f;){if(Lo(t,f,e,n,r)){b=f;break}f.nextSibling&&(a=!0),m.push(f),f=f.parentNode}if(b)if(a){const g=s.getBookmark();l.collapse(!0);let v=ia(o,l,i,!0);v=Yc(v),t.formatter.remove(e,n,v,r),s.moveToBookmark(g)}else{const g=aa(t.getBody(),b),v=dt(g)?o.getParents(b.parentNode,Ie,g):[],h=Sm(!1).dom;((E,A,N)=>{var O,M;const j=E.dom,H=j.getParent(N,vt(yf,E.schema));H&&j.isEmpty(H)?null===(O=N.parentNode)||void 0===O||O.replaceChild(A,N):((W=>{const P=Fn(W,"br"),I=Wt((q=>{const Q=[];let mt=q.dom;for(;mt;)Q.push(D(mt)),mt=mt.lastChild;return Q})(W).slice(-1),Xs);P.length===I.length&&G(I,Ot)})(D(N)),j.isEmpty(N)?null===(M=N.parentNode)||void 0===M||M.replaceChild(A,N):j.insertAfter(A,N))})(t,h,g??b);const C=((E,A,N,O,M,j)=>{const H=E.formatter,W=E.dom,P=Wt(on(H.get()),q=>q!==O&&!Ye(q,"removeformat")),I=(q=E,Q=N,yn(P,(ct,Rt)=>{const Nt=Sf(q,Rt,gt=>{const yt=$t=>Ce($t)||$t.length>1&&"%"===$t.charAt(0);return Ne(["styles","attributes"],$t=>Te(gt,$t).exists(L=>{const F=it(L)?L:Wo(L);return Ne(F,yt)}))});return q.formatter.matchNode(Q,Rt,{},Nt)?ct.concat([Rt]):ct},[]));var q,Q;if(Wt(I,q=>!((Q,mt,ct)=>{const Rt=["inline","block","selector","attributes","styles","classes"],Nt=Mt=>Cr(Mt,(Dt,gt)=>Ne(Rt,yt=>yt===gt));return Sf(Q,mt,Mt=>{const Dt=Nt(Mt);return Sf(Q,ct,gt=>{const yt=Nt(gt);return(($t,L,F=Xe)=>ae(F).eq($t,L))(Dt,yt)})})})(E,q,O)).length>0){const q=N.cloneNode(!1);return W.add(A,q),H.remove(O,M,q,j),W.remove(q),k.some(q)}return k.none()})(t,h,b,e,n,r),S=ty([...m,...C.toArray(),...v],h);g&&Em(t,g,dt(g)),s.setCursorLocation(S,1),o.isEmpty(b)&&o.remove(b)}})(s,a,i,c):(Mb(s,()=>bf(s,S),E=>fn(f)&&wm(s,a,i,E)),s.nodeChanged()),E=s,N=i,"removeformat"===(A=a)?G(dy(E.selection),O=>{G(sy,M=>E.dom.setStyle(O,M,"")),wy(E.dom,O)}):ay(E.formatter,A).each(O=>{G(dy(E.selection),M=>Sy(E.dom,M,O,N,null))}),n0(s,a,l,i);var E,A,N})(t,e,n,r,o)},kl=(t,e,n,r,o)=>Ey(t,e,n,r,o).fold(ke,s=>(t.dom.rename(r,s),!0),Ie),_y=lt.each,ad=lt.each,Ny=(t,e,n,r)=>{if(ad(n.styles,(o,s)=>{t.setStyle(e,s,Ns(o,r))}),n.styles){const o=t.getAttrib(e,"style");o&&t.setAttrib(e,"data-mce-style",o)}},sA=(t,e,n,r)=>{const o=t.formatter.get(e),s=o[0],a=!r&&t.selection.isCollapsed(),i=t.dom,l=t.selection,c=(g,v=s)=>{Ce(v.onformat)&&v.onformat(g,v,n,r),Ny(i,g,v,n),ad(v.attributes,(h,C)=>{i.setAttrib(g,C,Ns(h,n))}),ad(v.classes,h=>{const C=Ns(h,n);i.hasClass(g,C)||i.addClass(g,C)})},u=(g,v)=>{let h=!1;return ad(g,C=>!(!Rr(C)||("false"!==i.getContentEditable(v)||C.ceFalseOverride)&&(!dt(C.collapsed)||C.collapsed===a)&&i.is(v,C.selector)&&!Ar(v)&&(c(v,C),h=!0,1))),h},m=(g,v,h)=>{const C=[];let S=!0;const E=s.inline||s.block,A=(g=>{if(kt(g)){const v=i.create(g);return c(v),v}return null})(E);ml(g,v,N=>{let O;const M=j=>{let H=!1,W=S,P=!1;const I=j.parentNode,q=I.nodeName.toLowerCase(),Q=g.getContentEditable(j);dt(Q)&&(W=S,S="true"===Q,H=!0,P=Fb(t,j));const mt=S&&!H;if(Ve(j)&&!((ct,Rt,Nt,Mt)=>{if(Uk(ct)&&fn(Rt)&&Nt.parentNode){const Dt=Gg(ct.schema),gt=((t,e)=>((n,r)=>{const o=n.dom;return o.parentNode?(s=D(o.parentNode),Ze(s.dom.childNodes,i=>(s=>!ue(n,s)&&r(s))(D(i))).map(D)):k.none();var s})(t,e).isSome())(D(Nt),yt=>Ar(yt.dom));return En(Dt,Mt)&&Qe(D(Nt.parentNode),!1)&&!gt}return!1})(t,s,j,q))return O=null,void(Po(s)&&g.remove(j));if(ct=j,Po(Rt=s)&&!0===Rt.wrapper&&Lo(t,ct,e,n))O=null;else{if(((ct,Rt,Nt)=>{const Mt=Po(Dt=s)&&!0!==Dt.wrapper&&yf(t.schema,ct)&&ti(t,Rt,E);var Dt;return Nt&&Mt})(j,q,mt)){const ct=g.rename(j,E);return c(ct),C.push(ct),void(O=null)}if(Rr(s)){let ct=u(o,j);if(!ct&&dt(I)&&Ef(s)&&(ct=u(o,I)),!fn(s)||ct)return void(O=null)}dt(A)&&((ct,Rt,Nt,Mt)=>{const Dt=ct.nodeName.toLowerCase(),gt=ti(t,E,Dt)&&ti(t,Rt,E),yt=!h&&at(ct)&&vc(ct.data),$t=Ar(ct),L=!fn(s)||!g.isBlock(ct);return(Nt||Mt)&&gt&&!yt&&!$t&&L})(j,q,mt,P)?(O||(O=g.clone(A,!1),I.insertBefore(O,j),C.push(O)),P&&H&&(S=W),O.appendChild(j)):(O=null,G(Cn(j.childNodes),M),H&&(S=W),O=null)}var ct,Rt};G(N,M)}),!0===s.links&&G(C,N=>{const O=M=>{"A"===M.nodeName&&c(M,s),G(Cn(M.childNodes),O)};O(N)}),G(C,N=>{const O=(M=>{let j=0;return G(M.childNodes,H=>{var W;dt(W=H)&&at(W)&&0===W.length||Tr(H)||j++}),j})(N);var M;!(C.length>1)&&g.isBlock(N)||0!==O?(fn(s)||Po(s)&&s.wrapper)&&(s.exact||1!==O||(N=Ze((M=N).childNodes,vf).filter(H=>"false"!==g.getContentEditable(H)&&od(g,H,s)).map(H=>{const W=g.clone(H,!1);return c(W),g.replace(W,M,!0),g.remove(H,!0),W}).getOr(M)),((M,j,H,W)=>{_y(j,P=>{var I,q,Q;fn(P)&&_y(M.dom.select(P.inline,W),I=>{Nm(I)&&kl(M,P,H,I,P.exact?I:null)}),I=M.dom,Q=W,(q=P).clear_child_styles&&_m(I.select(q.links?"*:not(a)":"*",Q),ct=>{Nm(ct)&&I.isEditable(ct)&&_m(q.styles,(Rt,Nt)=>{I.setStyle(ct,Nt,"")})})})})(t,o,n,N),((M,j,H,W,P)=>{const I=P.parentNode;Lo(M,I,H,W)&&kl(M,j,W,P)||j.merge_with_parents&&I&&M.dom.getParent(I,q=>!!Lo(M,q,H,W)&&(kl(M,j,W,P),!0))})(t,s,e,n,N),((M,j,H,W)=>{if(j.styles&&j.styles.backgroundColor){const P=py(M,"fontSize");Am(W,I=>P(I)&&M.isEditable(I),gy(M,"backgroundColor",Ns(j.styles.backgroundColor,H)))}})(g,s,n,N),((M,j,H,W)=>{const P=I=>{if(Jo(I)&&xt(I.parentNode)&&M.isEditable(I)){const q=jb(M,I.parentNode);M.getStyle(I,"color")&&q?M.setStyle(I,"text-decoration",q):M.getStyle(I,"text-decoration")===q&&M.setStyle(I,"text-decoration",null)}};j.styles&&(j.styles.color||j.styles.textDecoration)&&(lt.walk(W,P,"childNodes"),P(W))})(g,s,0,N),((M,j,H,W)=>{if(fn(j)&&("sub"===j.inline||"sup"===j.inline)){const P=py(M,"fontSize");Am(W,q=>P(q)&&M.isEditable(q),gy(M,"fontSize",""));const I=Wt(M.select("sup"===j.inline?"sub":"sup",W),M.isEditable);M.remove(I,!0)}})(g,s,0,N),my(t,s,0,N)):g.remove(N,!0)})},b=fl(r)?r:l.getNode();if("false"===i.getContentEditable(b)&&!Fb(t,b))return u(o,r=b),void e0(t,e,r,n);if(s){if(r)if(fl(r)){if(!u(o,r)){const g=i.createRng();g.setStartBefore(r),g.setEndAfter(r),m(i,ia(i,g,o),!0)}}else m(i,r,!0);else a&&fn(s)&&!Za(t).length?((g,v,h)=>{let C;const S=g.selection,E=g.formatter.get(v);if(!E)return;const A=S.getRng();let N=A.startOffset;const O=A.startContainer.nodeValue;C=aa(g.getBody(),S.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(O&&N>0&&N<O.length&&M.test(O.charAt(N))&&M.test(O.charAt(N-1))){const W=S.getBookmark();A.collapse(!0);let P=ia(g.dom,A,E);P=Yc(P),g.formatter.apply(v,h,P),S.moveToBookmark(W)}else{let W=C?Jv(C):null;C&&W?.data===Sl||(j=g.getDoc(),H=Sm(!0).dom,C=j.importNode(H,!0),W=C.firstChild,A.insertNode(C),N=1),g.formatter.apply(v,h,C),S.setCursorLocation(W,N)}var j,H})(t,e,n):(l.setRng(gm(l.getRng())),Mb(t,()=>{bf(t,(g,v)=>{const h=v?g:ia(i,g,o);m(i,h,!1)})},Ie),t.nodeChanged()),ay(t.formatter,e).each(g=>{var v;G(Wt((h=>{const C=h.getSelectedBlocks(),S=h.getRng();if(h.isCollapsed())return[];if(1===C.length)return iy(S,C[0])&&ly(S,C[0])?C:[];{const E=Pn(C).filter(O=>iy(S,O)).toArray(),A=wo(C).filter(O=>ly(S,O)).toArray(),N=C.slice(1,-1);return E.concat(N).concat(A)}})(v=t.selection),cy(v.dom)),v=>Ny(i,v,g,n))});v=t,Jt(El,g=e)&&G(El[g],h=>{h(v)})}var g,v;e0(t,e,r,n)},Ay=(t,e,n,r)=>{(r||t.selection.isEditable())&&sA(t,e,n,r)},Ty=t=>Jt(t,"vars"),Ry=t=>t.selection.getStart(),Oy=(t,e,n,r,o)=>Hr(e,s=>{const a=t.formatter.matchNode(s,n,o??{},r);return!Me(a)},s=>!!Gv(t,s,n)||!r&&dt(t.formatter.matchNode(s,n,o,!0))),Dy=(t,e)=>{const n=e??Ry(t);return Wt(Hc(t.dom,n),r=>xt(r)&&!Ks(r))},By=(t,e,n)=>{const r=Dy(t,e);Ae(n,(o,s)=>{const a=i=>{const l=Oy(t,r,s,i.similar,Ty(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const u=l.getOr(e);Ty(i)?i.callback(c,{node:u,format:s,parents:r}):G(i.callbacks,f=>f(c,{node:u,format:s,parents:r}))}};G([o.withSimilar,o.withoutSimilar],a),G(o.withVars,a)})},Py=lt.explode,Ly=()=>{const t={};return{addFilter:(e,n)=>{G(Py(e),r=>{Jt(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>Wo(t),removeFilter:(e,n)=>{G(Py(e),r=>{if(Jt(t,r))if(dt(n)){const o=t[r],s=Wt(o.callbacks,a=>a!==n);s.length>0?o.callbacks=s:delete t[r]}else delete t[r]})}}},My=(t,e,n)=>{e.addNodeFilter("br",(r,o,s)=>{const a=lt.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),l=n.getWhitespaceElements();a.body=1;const c=u=>u.name in a||Au(n,u);for(let u=0,f=r.length;u<f;u++){let m=r[u],b=m.parent;if(b&&c(b)&&m===b.lastChild){let g=m.prev;for(;g;){const v=g.name;if("span"!==v||"bookmark"!==g.attr("data-mce-type")){"br"===v&&(m=null);break}g=g.prev}if(m&&(m.remove(),wl(n,i,l,b))){const v=n.getElementRule(b.name);v&&(v.removeEmpty?b.remove():v.paddEmpty&&um(t,s,c,b))}}else{let g=m;for(;b&&b.firstChild===g&&b.lastChild===g&&(g=b,!a[b.name]);)b=b.parent;if(g===b){const v=new Vn("#text",3);v.value=gn,m.replace(v)}}}})},Om=t=>{const[e,...n]=t.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(o){const s=";base64"===o[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(r):decodeURIComponent(r);return k.some({type:o[1],data:a,base64Encoded:s})}return k.none()},Iy=(t,e,n=!0)=>{let r=e;if(n)try{r=atob(e)}catch{return k.none()}const o=new Uint8Array(r.length);for(let s=0;s<o.length;s++)o[s]=r.charCodeAt(s);return k.some(new Blob([o],{type:t}))},Fy=t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(t)});let iA=0;const jy=(t,e,n)=>Om(t).bind(({data:r,type:o,base64Encoded:s})=>{if(e&&!s)return k.none();{const a=s?r:btoa(r);return n(a,o)}}),zy=(t,e,n)=>{const r=t.create("blobid"+iA++,e,n);return t.add(r),r},Uy=(t,e,n=!1)=>jy(e,n,(r,o)=>k.from(t.getByData(r,o)).orThunk(()=>Iy(o,r).map(s=>zy(t,s,r)))),Dm=(t,e)=>sn(t,`${e}/`),{entries:Hy,setPrototypeOf:qy,isFrozen:cA,getPrototypeOf:dA,getOwnPropertyDescriptor:uA}=Object;let{freeze:cr,seal:po,create:fA}=Object,{apply:Bm,construct:Pm}=typeof Reflect<"u"&&Reflect;Bm||(Bm=function(t,e,n){return t.apply(e,n)}),cr||(cr=function(t){return t}),po||(po=function(t){return t}),Pm||(Pm=function(t,e){return new t(...e)});const mA=Zr(Array.prototype.forEach),pA=Zr(Array.prototype.pop),_l=Zr(Array.prototype.push),id=Zr(String.prototype.toLowerCase),Lm=Zr(String.prototype.toString),gA=Zr(String.prototype.match),go=Zr(String.prototype.replace),hA=Zr(String.prototype.indexOf),bA=Zr(String.prototype.trim),Br=Zr(RegExp.prototype.test),Nl=($y=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Pm($y,e)});var $y;function Zr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Bm(t,e,r)}}function we(t,e,n){var r;n=null!==(r=n)&&void 0!==r?r:id,qy&&qy(t,null);let o=e.length;for(;o--;){let s=e[o];if("string"==typeof s){const a=n(s);a!==s&&(cA(e)||(e[o]=a),s=a)}t[s]=!0}return t}function oi(t){const e=fA(null);for(const[n,r]of Hy(t))e[n]=r;return e}function ld(t,e){for(;null!==t;){const n=uA(t,e);if(n){if(n.get)return Zr(n.get);if("function"==typeof n.value)return Zr(n.value)}t=dA(t)}return function(n){return console.warn("fallback value for",n),null}}const Wy=cr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Mm=cr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Im=cr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),vA=cr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Fm=cr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yA=cr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Vy=cr(["#text"]),Ky=cr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),jm=cr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Xy=cr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),cd=cr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),CA=po(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xA=po(/<%[\w\W]*|[\w\W]*%>/gm),wA=po(/\${[\w\W]*}/gm),SA=po(/^data-[\-\w.\u00B7-\uFFFF]/),EA=po(/^aria-[\-\w]+$/),Yy=po(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kA=po(/^(?:\w+script|data):/i),_A=po(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Gy=po(/^html$/i);var Qy=Object.freeze({__proto__:null,MUSTACHE_EXPR:CA,ERB_EXPR:xA,TMPLIT_EXPR:wA,DATA_ATTR:SA,ARIA_ATTR:EA,IS_ALLOWED_URI:Yy,IS_SCRIPT_OR_DATA:kA,ATTR_WHITESPACE:_A,DOCTYPE_NAME:Gy}),Jy=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=V=>t(V);if(n.version="3.0.5",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;const r=e.document,o=r.currentScript;let{document:s}=e;const{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:c,NodeFilter:u,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:m,DOMParser:b,trustedTypes:g}=e,v=c.prototype,h=ld(v,"cloneNode"),C=ld(v,"nextSibling"),S=ld(v,"childNodes"),E=ld(v,"parentNode");if("function"==typeof i){const V=s.createElement("template");V.content&&V.content.ownerDocument&&(s=V.content.ownerDocument)}let A,N="";const{implementation:O,createNodeIterator:M,createDocumentFragment:j,getElementsByTagName:H}=s,{importNode:W}=r;let P={};n.isSupported="function"==typeof Hy&&"function"==typeof E&&O&&void 0!==O.createHTMLDocument;const{MUSTACHE_EXPR:I,ERB_EXPR:q,TMPLIT_EXPR:Q,DATA_ATTR:mt,ARIA_ATTR:ct,IS_SCRIPT_OR_DATA:Rt,ATTR_WHITESPACE:Nt}=Qy;let{IS_ALLOWED_URI:Mt}=Qy,Dt=null;const gt=we({},[...Wy,...Mm,...Im,...Fm,...Vy]);let yt=null;const $t=we({},[...Ky,...jm,...Xy,...cd]);let L=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),F=null,J=null,et=!0,nt=!0,Ct=!1,Pt=!0,Vt=!1,Ft=!1,_e=!1,Et=!1,se=!1,le=!1,Qt=!1,ce=!0,mn=!1,Bt=!0,ie=!1,ze={},cn=null;const Sn=we({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Xn=null;const Ir=we({},["audio","video","img","source","image","track"]);let Tn=null;const Fr=we({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dn="http://www.w3.org/1998/Math/MathML",ss="http://www.w3.org/2000/svg",jr="http://www.w3.org/1999/xhtml";let eo=jr,wa=!1,Yl=null;const Sa=we({},[dn,ss,jr],Lm);let zr;const nu=["application/xhtml+xml","text/html"];let Ue,bo=null;const Ea=s.createElement("form"),Gl=function(V){return V instanceof RegExp||V instanceof Function},hg=function(V){if(!bo||bo!==V){if(V&&"object"==typeof V||(V={}),V=oi(V),zr=zr=-1===nu.indexOf(V.PARSER_MEDIA_TYPE)?"text/html":V.PARSER_MEDIA_TYPE,Ue="application/xhtml+xml"===zr?Lm:id,Dt="ALLOWED_TAGS"in V?we({},V.ALLOWED_TAGS,Ue):gt,yt="ALLOWED_ATTR"in V?we({},V.ALLOWED_ATTR,Ue):$t,Yl="ALLOWED_NAMESPACES"in V?we({},V.ALLOWED_NAMESPACES,Lm):Sa,Tn="ADD_URI_SAFE_ATTR"in V?we(oi(Fr),V.ADD_URI_SAFE_ATTR,Ue):Fr,Xn="ADD_DATA_URI_TAGS"in V?we(oi(Ir),V.ADD_DATA_URI_TAGS,Ue):Ir,cn="FORBID_CONTENTS"in V?we({},V.FORBID_CONTENTS,Ue):Sn,F="FORBID_TAGS"in V?we({},V.FORBID_TAGS,Ue):{},J="FORBID_ATTR"in V?we({},V.FORBID_ATTR,Ue):{},ze="USE_PROFILES"in V&&V.USE_PROFILES,et=!1!==V.ALLOW_ARIA_ATTR,nt=!1!==V.ALLOW_DATA_ATTR,Ct=V.ALLOW_UNKNOWN_PROTOCOLS||!1,Pt=!1!==V.ALLOW_SELF_CLOSE_IN_ATTR,Vt=V.SAFE_FOR_TEMPLATES||!1,Ft=V.WHOLE_DOCUMENT||!1,se=V.RETURN_DOM||!1,le=V.RETURN_DOM_FRAGMENT||!1,Qt=V.RETURN_TRUSTED_TYPE||!1,Et=V.FORCE_BODY||!1,ce=!1!==V.SANITIZE_DOM,mn=V.SANITIZE_NAMED_PROPS||!1,Bt=!1!==V.KEEP_CONTENT,ie=V.IN_PLACE||!1,Mt=V.ALLOWED_URI_REGEXP||Yy,eo=V.NAMESPACE||jr,L=V.CUSTOM_ELEMENT_HANDLING||{},V.CUSTOM_ELEMENT_HANDLING&&Gl(V.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(L.tagNameCheck=V.CUSTOM_ELEMENT_HANDLING.tagNameCheck),V.CUSTOM_ELEMENT_HANDLING&&Gl(V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(L.attributeNameCheck=V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),V.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(L.allowCustomizedBuiltInElements=V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Vt&&(nt=!1),le&&(se=!0),ze&&(Dt=we({},[...Vy]),yt=[],!0===ze.html&&(we(Dt,Wy),we(yt,Ky)),!0===ze.svg&&(we(Dt,Mm),we(yt,jm),we(yt,cd)),!0===ze.svgFilters&&(we(Dt,Im),we(yt,jm),we(yt,cd)),!0===ze.mathMl&&(we(Dt,Fm),we(yt,Xy),we(yt,cd))),V.ADD_TAGS&&(Dt===gt&&(Dt=oi(Dt)),we(Dt,V.ADD_TAGS,Ue)),V.ADD_ATTR&&(yt===$t&&(yt=oi(yt)),we(yt,V.ADD_ATTR,Ue)),V.ADD_URI_SAFE_ATTR&&we(Tn,V.ADD_URI_SAFE_ATTR,Ue),V.FORBID_CONTENTS&&(cn===Sn&&(cn=oi(cn)),we(cn,V.FORBID_CONTENTS,Ue)),Bt&&(Dt["#text"]=!0),Ft&&we(Dt,["html","head","body"]),Dt.table&&(we(Dt,["tbody"]),delete F.tbody),V.TRUSTED_TYPES_POLICY){if("function"!=typeof V.TRUSTED_TYPES_POLICY.createHTML)throw Nl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof V.TRUSTED_TYPES_POLICY.createScriptURL)throw Nl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=V.TRUSTED_TYPES_POLICY,N=A.createHTML("")}else void 0===A&&(A=function(Tt,Ht){if("object"!=typeof Tt||"function"!=typeof Tt.createPolicy)return null;let Ee=null;const Le="data-tt-policy-suffix";Ht&&Ht.hasAttribute(Le)&&(Ee=Ht.getAttribute(Le));const We="dompurify"+(Ee?"#"+Ee:"");try{return Tt.createPolicy(We,{createHTML:He=>He,createScriptURL:He=>He})}catch{return console.warn("TrustedTypes policy "+We+" could not be created."),null}}(g,o)),null!==A&&"string"==typeof N&&(N=A.createHTML(""));cr&&cr(V),bo=V}},iE=we({},["mi","mo","mn","ms","mtext"]),lE=we({},["foreignobject","desc","title","annotation-xml"]),uD=we({},["title","style","font","a","script"]),ru=we({},Mm);we(ru,Im),we(ru,vA);const bg=we({},Fm);we(bg,yA);const ka=function(V){_l(n.removed,{element:V});try{V.parentNode.removeChild(V)}catch{V.remove()}},Ql=function(V,Tt){try{_l(n.removed,{attribute:Tt.getAttributeNode(V),from:Tt})}catch{_l(n.removed,{attribute:null,from:Tt})}if(Tt.removeAttribute(V),"is"===V&&!yt[V])if(se||le)try{ka(Tt)}catch{}else try{Tt.setAttribute(V,"")}catch{}},cE=function(V){let Tt,Ht;if(Et)V="<remove></remove>"+V;else{const We=gA(V,/^[\r\n\t ]+/);Ht=We&&We[0]}"application/xhtml+xml"===zr&&eo===jr&&(V='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+V+"</body></html>");const Ee=A?A.createHTML(V):V;if(eo===jr)try{Tt=(new b).parseFromString(Ee,zr)}catch{}if(!Tt||!Tt.documentElement){Tt=O.createDocument(eo,"template",null);try{Tt.documentElement.innerHTML=wa?N:Ee}catch{}}const Le=Tt.body||Tt.documentElement;return V&&Ht&&Le.insertBefore(s.createTextNode(Ht),Le.childNodes[0]||null),eo===jr?H.call(Tt,Ft?"html":"body")[0]:Ft?Tt.documentElement:Le},dE=function(V){return M.call(V.ownerDocument||V,V,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},ou=function(V){return"object"==typeof l?V instanceof l:V&&"object"==typeof V&&"number"==typeof V.nodeType&&"string"==typeof V.nodeName},as=function(V,Tt,Ht){P[V]&&mA(P[V],Ee=>{Ee.call(n,Tt,Ht,bo)})},uE=function(V){let Tt;if(as("beforeSanitizeElements",V,null),(Ht=V)instanceof m&&("string"!=typeof Ht.nodeName||"string"!=typeof Ht.textContent||"function"!=typeof Ht.removeChild||!(Ht.attributes instanceof f)||"function"!=typeof Ht.removeAttribute||"function"!=typeof Ht.setAttribute||"string"!=typeof Ht.namespaceURI||"function"!=typeof Ht.insertBefore||"function"!=typeof Ht.hasChildNodes))return ka(V),!0;var Ht;const Ee=Ue(V.nodeName);if(as("uponSanitizeElement",V,{tagName:Ee,allowedTags:Dt}),V.hasChildNodes()&&!ou(V.firstElementChild)&&(!ou(V.content)||!ou(V.content.firstElementChild))&&Br(/<[/\w]/g,V.innerHTML)&&Br(/<[/\w]/g,V.textContent))return ka(V),!0;if(!Dt[Ee]||F[Ee]){if(!F[Ee]&&mE(Ee)&&(L.tagNameCheck instanceof RegExp&&Br(L.tagNameCheck,Ee)||L.tagNameCheck instanceof Function&&L.tagNameCheck(Ee)))return!1;if(Bt&&!cn[Ee]){const Le=E(V)||V.parentNode,We=S(V)||V.childNodes;if(We&&Le)for(let He=We.length-1;He>=0;--He)Le.insertBefore(h(We[He],!0),C(V))}return ka(V),!0}return V instanceof c&&!function(Le){let We=E(Le);We&&We.tagName||(We={namespaceURI:eo,tagName:"template"});const He=id(Le.tagName),Ke=id(We.tagName);return!!Yl[Le.namespaceURI]&&(Le.namespaceURI===ss?We.namespaceURI===jr?"svg"===He:We.namespaceURI===dn?"svg"===He&&("annotation-xml"===Ke||iE[Ke]):!!ru[He]:Le.namespaceURI===dn?We.namespaceURI===jr?"math"===He:We.namespaceURI===ss?"math"===He&&lE[Ke]:!!bg[He]:Le.namespaceURI===jr?!(We.namespaceURI===ss&&!lE[Ke])&&!(We.namespaceURI===dn&&!iE[Ke])&&!bg[He]&&(uD[He]||!ru[He]):!("application/xhtml+xml"!==zr||!Yl[Le.namespaceURI]))}(V)?(ka(V),!0):"noscript"!==Ee&&"noembed"!==Ee&&"noframes"!==Ee||!Br(/<\/no(script|embed|frames)/i,V.innerHTML)?(Vt&&3===V.nodeType&&(Tt=V.textContent,Tt=go(Tt,I," "),Tt=go(Tt,q," "),Tt=go(Tt,Q," "),V.textContent!==Tt&&(_l(n.removed,{element:V.cloneNode()}),V.textContent=Tt)),as("afterSanitizeElements",V,null),!1):(ka(V),!0)},fE=function(V,Tt,Ht){if(ce&&("id"===Tt||"name"===Tt)&&(Ht in s||Ht in Ea))return!1;if((!nt||J[Tt]||!Br(mt,Tt))&&(!et||!Br(ct,Tt)))if(!yt[Tt]||J[Tt]){if(!(mE(V)&&(L.tagNameCheck instanceof RegExp&&Br(L.tagNameCheck,V)||L.tagNameCheck instanceof Function&&L.tagNameCheck(V))&&(L.attributeNameCheck instanceof RegExp&&Br(L.attributeNameCheck,Tt)||L.attributeNameCheck instanceof Function&&L.attributeNameCheck(Tt))||"is"===Tt&&L.allowCustomizedBuiltInElements&&(L.tagNameCheck instanceof RegExp&&Br(L.tagNameCheck,Ht)||L.tagNameCheck instanceof Function&&L.tagNameCheck(Ht))))return!1}else if(!Tn[Tt]&&!Br(Mt,go(Ht,Nt,""))&&("src"!==Tt&&"xlink:href"!==Tt&&"href"!==Tt||"script"===V||0!==hA(Ht,"data:")||!Xn[V])&&(!Ct||Br(Rt,go(Ht,Nt,"")))&&Ht)return!1;return!0},mE=function(V){return V.indexOf("-")>0},pE=function(V){let Tt,Ht,Ee,Le;as("beforeSanitizeAttributes",V,null);const{attributes:We}=V;if(!We)return;const He={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:yt};for(Le=We.length;Le--;){Tt=We[Le];const{name:Ke,namespaceURI:yi}=Tt;Ht="value"===Ke?Tt.value:bA(Tt.value);const mD=Ht;if(Ee=Ue(Ke),He.attrName=Ee,He.attrValue=Ht,He.keepAttr=!0,He.forceKeepAttr=void 0,as("uponSanitizeAttribute",V,He),Ht=He.attrValue,He.forceKeepAttr)continue;if(!He.keepAttr){Ql(Ke,V);continue}if(!Pt&&Br(/\/>/i,Ht)){Ql(Ke,V);continue}Vt&&(Ht=go(Ht,I," "),Ht=go(Ht,q," "),Ht=go(Ht,Q," "));const gE=Ue(V.nodeName);if(fE(gE,Ee,Ht)){if(!mn||"id"!==Ee&&"name"!==Ee||(Ql(Ke,V),Ht="user-content-"+Ht),A&&"object"==typeof g&&"function"==typeof g.getAttributeType&&!yi)switch(g.getAttributeType(gE,Ee)){case"TrustedHTML":Ht=A.createHTML(Ht);break;case"TrustedScriptURL":Ht=A.createScriptURL(Ht)}if(Ht!==mD)try{yi?V.setAttributeNS(yi,Ke,Ht):V.setAttribute(Ke,Ht)}catch{Ql(Ke,V)}}else Ql(Ke,V)}as("afterSanitizeAttributes",V,null)},fD=function V(Tt){let Ht;const Ee=dE(Tt);for(as("beforeSanitizeShadowDOM",Tt,null);Ht=Ee.nextNode();)as("uponSanitizeShadowNode",Ht,null),uE(Ht)||(Ht.content instanceof a&&V(Ht.content),pE(Ht));as("afterSanitizeShadowDOM",Tt,null)};return n.sanitize=function(V){let Tt,Ht,Ee,Le,We=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(wa=!V,wa&&(V="\x3c!--\x3e"),"string"!=typeof V&&!ou(V)){if("function"!=typeof V.toString)throw Nl("toString is not a function");if("string"!=typeof(V=V.toString()))throw Nl("dirty is not a string, aborting")}if(!n.isSupported)return V;if(_e||hg(We),n.removed=[],"string"==typeof V&&(ie=!1),ie){if(V.nodeName){const yi=Ue(V.nodeName);if(!Dt[yi]||F[yi])throw Nl("root node is forbidden and cannot be sanitized in-place")}}else if(V instanceof l)Tt=cE("\x3c!----\x3e"),Ht=Tt.ownerDocument.importNode(V,!0),1===Ht.nodeType&&"BODY"===Ht.nodeName||"HTML"===Ht.nodeName?Tt=Ht:Tt.appendChild(Ht);else{if(!se&&!Vt&&!Ft&&-1===V.indexOf("<"))return A&&Qt?A.createHTML(V):V;if(Tt=cE(V),!Tt)return se?null:Qt?N:""}Tt&&Et&&ka(Tt.firstChild);const He=dE(ie?V:Tt);for(;Ee=He.nextNode();)uE(Ee)||(Ee.content instanceof a&&fD(Ee.content),pE(Ee));if(ie)return V;if(se){if(le)for(Le=j.call(Tt.ownerDocument);Tt.firstChild;)Le.appendChild(Tt.firstChild);else Le=Tt;return(yt.shadowroot||yt.shadowrootmode)&&(Le=W.call(r,Le,!0)),Le}let Ke=Ft?Tt.outerHTML:Tt.innerHTML;return Ft&&Dt["!doctype"]&&Tt.ownerDocument&&Tt.ownerDocument.doctype&&Tt.ownerDocument.doctype.name&&Br(Gy,Tt.ownerDocument.doctype.name)&&(Ke="<!DOCTYPE "+Tt.ownerDocument.doctype.name+">\n"+Ke),Vt&&(Ke=go(Ke,I," "),Ke=go(Ke,q," "),Ke=go(Ke,Q," ")),A&&Qt?A.createHTML(Ke):Ke},n.setConfig=function(V){hg(V),_e=!0},n.clearConfig=function(){bo=null,_e=!1},n.isValidAttribute=function(V,Tt,Ht){bo||hg({});const Ee=Ue(V),Le=Ue(Tt);return fE(Ee,Le,Ht)},n.addHook=function(V,Tt){"function"==typeof Tt&&(P[V]=P[V]||[],_l(P[V],Tt))},n.removeHook=function(V){if(P[V])return pA(P[V])},n.removeHooks=function(V){P[V]&&(P[V]=[])},n.removeAllHooks=function(){P={}},n}();const Zy=lt.each,AA=lt.trim,TA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],RA={ftp:21,http:80,https:443,mailto:25},OA=["img","video"],tC=(t,e,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!t.allow_html_data_urls&&(/^data:image\//i.test(r)?(s=n,(dt(o=t.allow_svg_data_urls)?!o:!dt(s)||!At(OA,s))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,s};class to{static parseDataUri(e){let n;const r=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(e,n,r={}){if(r.allow_script_urls)return!0;{const o=xs.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!tC(r,o,n)}}static getDocumentBaseUrl(e){var n;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,n={}){this.path="",this.directory="",e=AA(e),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=r?r.path:new to(document.location.href).directory;if(""===r?.protocol)e="//mce_host"+o.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&Zy(TA,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),o[i]=c}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),s&&(o.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new to(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const r=new to(e,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?RA[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let r,o,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(r=0,o=i.length;r<o;r++)if(r>=l.length||i[r]!==l[r]){s=r+1;break}if(i.length<l.length)for(r=0,o=l.length;r<o;r++)if(r>=i.length||i[r]!==l[r]){s=r+1;break}if(1===s)return n;for(r=0,o=i.length-(s-1);r<o;r++)a+="../";for(r=s-1,o=l.length;r<o;r++)a+=r!==s-1?"/"+l[r]:l[r];return a}toAbsPath(e,n){let r=0;const o=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];Zy(s,f=>{f&&i.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)0!==a[f].length&&"."!==a[f]&&(".."!==a[f]?r>0?r--:l.push(a[f]):r++);const c=i.length-r;let u;return u=c<=0?ro(l).join("/"):i.slice(0,c).join("/")+"/"+ro(l).join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const DA=lt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),zm="data-mce-type";let eC=0;const nC=(t,e,n,r,o)=>{var s,a,i,l;const c=e.validate,u=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(s=t.nodeValue)&&void 0!==s?s:"")&&(t.nodeValue=" "+t.nodeValue);const f=null!==(a=o?.tagName)&&void 0!==a?a:t.nodeName.toLowerCase();if("html"!==r&&n.isValid(r))return void(dt(o)&&(o.allowedTags[f]=!0));if(1!==t.nodeType||"body"===f)return;const m=D(t),b=Ws(m,zm),g=er(m,"data-mce-bogus");if(!b&&kt(g))return void("all"===g?Ot(m):je(m));const v=n.getElementRule(f);if(!c||v){if(dt(o)&&(o.allowedTags[f]=!0),c&&v&&!b){if(G(null!==(i=v.attributesForced)&&void 0!==i?i:[],h=>{an(m,h.name,"{$uid}"===h.value?"mce_"+eC++:h.value)}),G(null!==(l=v.attributesDefault)&&void 0!==l?l:[],h=>{Ws(m,h.name)||an(m,h.name,"{$uid}"===h.value?"mce_"+eC++:h.value)}),v.attributesRequired&&!Ne(v.attributesRequired,h=>Ws(m,h))||v.removeEmptyAttrs&&(h=>{const C=h.dom.attributes;return null==C||0===C.length})(m))return void je(m);v.outputName&&v.outputName!==f&&((h,C)=>{const S=((A,N)=>{const O=ot(N),M=p(A);return xr(O,M),O})(h,C);zt(h,S);const E=Oe(h);fe(S,E),Ot(h)})(m,v.outputName)}}else Jt(u,f)?Ot(m):je(m)},rC=(t,e,n,r,o,s)=>"html"!==n&&!Ys(r)||!(o in DA&&tC(t,s,r))&&(!t.validate||e.isValid(r,o)||sn(o,"data-")||sn(o,"aria-")),oC=(t,e)=>t.hasAttribute(zm)&&("id"===e||"class"===e||"style"===e),sC=(t,e)=>t in e.getBoolAttrs(),BA=(t,e,n,r)=>{const{attributes:o}=t;for(let s=o.length-1;s>=0;s--){const a=o[s],i=a.name,l=a.value;rC(e,n,r,t.tagName.toLowerCase(),i,l)||oC(t,i)?sC(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},LA=t=>{const n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`)};return Jy().sanitize(t,n),t.innerHTML},aC=lt.makeMap,iC=lt.extend,lC=(t,e,n,r)=>{const o=t.name,s=o in n&&"title"!==o&&"textarea"!==o,a=e.childNodes;for(let i=0,l=a.length;i<l;i++){const c=a[i],u=new Vn(c.nodeName.toLowerCase(),c.nodeType);if(xt(c)){const f=c.attributes;for(let m=0,b=f.length;m<b;m++){const g=f[m];u.attr(g.name,g.value)}Ys(u.name)&&(r(c),u.value=c.innerHTML)}else at(c)?(u.value=c.data,s&&(u.raw=!0)):(bs(c)||hE(c)||bE(c))&&(u.value=c.data);Ys(u.name)||lC(u,c,n,r),t.append(u)}},si=(t={},e=ws())=>{const n=Ly(),r=Ly(),o={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((v,h)=>{const C=(()=>{let S=[];const E=()=>S[S.length-1];return{track:A=>{wu(A)&&S.push(A);let N=E();return N&&!N.contains(A)&&(S.pop(),N=E()),Pg(N)},current:()=>Pg(E()),reset:()=>{S=[]}}})();if(v.sanitize){const S=((t,e,n)=>{const r=Jy();return r.addHook("uponSanitizeElement",(o,s)=>{nC(o,t,e,n.track(o),s)}),r.addHook("uponSanitizeAttribute",(o,s)=>{((a,i,l,c,u)=>{const f=a.tagName.toLowerCase(),{attrName:m,attrValue:b}=u;u.keepAttr=rC(i,l,c,f,m,b),u.keepAttr?(u.allowedAttributes[m]=!0,sC(m,l)&&(u.attrValue=m),i.allow_svg_data_urls&&sn(b,"data:image/svg+xml")&&(u.forceKeepAttr=!0)):oC(a,m)&&(u.forceKeepAttr=!0)})(o,t,e,n.current(),s)}),r})(v,h,C);return{sanitizeHtmlElement:(A,N)=>{S.sanitize(A,((O,M)=>{const j={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return j.PARSER_MEDIA_TYPE=M,O.allow_script_urls?j.ALLOWED_URI_REGEXP=/.*/:O.allow_html_data_urls&&(j.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),j})(v,N)),S.removed=[],C.reset()},sanitizeNamespaceElement:LA}}return{sanitizeHtmlElement:(S,E)=>{const A=document.createNodeIterator(S,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let N;for(;N=A.nextNode();){const O=C.track(N);nC(N,v,h,O),xt(N)&&BA(N,v,h,O)}C.reset()},sanitizeNamespaceElement:St}})(o,e),l=n.getFilters,f=r.getFilters,b=(v,h)=>{const C=kt(h.attr(zm)),S=1===h.type&&!Jt(v,h.name)&&!Au(e,h)&&!Ys(h.name);return 3===h.type||S&&!C},g={schema:e,addAttributeFilter:r.addFilter,getAttributeFilters:f,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(v,h={})=>{var C;const S=o.validate,E=null!==(C=h.context)&&void 0!==C?C:o.root_name,A=((q,Q,mt="html")=>{const ct="xhtml"===mt?"application/xhtml+xml":"text/html",Rt=Jt(e.getSpecialElements(),Q.toLowerCase()),Nt=Rt?`<${Q}>${q}</${Q}>`:q,Dt=s.parseFromString("xhtml"===mt?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Nt}</body></html>`:`<body>${Nt}</body>`,ct).body;return a.sanitizeHtmlElement(Dt,ct),Rt?Dt.firstChild:Dt})(v,E,h.format);Eu(e,A);const N=new Vn(E,11);lC(N,A,e.getSpecialElements(),a.sanitizeNamespaceElement),A.innerHTML="";const[O,M]=((q,Q,mt,ct)=>{const Rt=mt.validate,Nt=Q.getNonEmptyElements(),Mt=Q.getWhitespaceElements(),Dt=iC(aC("script,style,head,html,body,title,meta,param"),Q.getBlockElements()),gt=Gg(Q),yt=/[ \t\r\n]+/g,$t=/^[ \t\r\n]+/,L=/[ \t\r\n]+$/,F=nt=>{let Ct=nt.parent;for(;dt(Ct);){if(Ct.name in Mt)return!0;Ct=Ct.parent}return!1},J=nt=>nt.name in Dt||Au(Q,nt)||Ys(nt.name)&&nt.parent===q,et=(nt,Ct)=>!dt(Ct?nt.prev:nt.next)&&!Se(nt.parent)&&J(nt.parent)&&(nt.parent!==q||!0===ct.isRootContent);return[nt=>{var Ct,Vt,Ft;if(3===nt.type&&!F(nt)){let Pt=null!==(Ct=nt.value)&&void 0!==Ct?Ct:"";Pt=Pt.replace(yt," "),Ft=J,(dt(Vt=nt.prev)&&(Ft(Vt)||"br"===Vt.name)||et(nt,!0))&&(Pt=Pt.replace($t,"")),0===Pt.length?nt.remove():nt.value=Pt}},nt=>{var Ct,Ft,_e;if(1===nt.type){const Pt=Q.getElementRule(nt.name);if(Rt&&Pt){const Vt=wl(Q,Nt,Mt,nt);Pt.paddInEmptyBlock&&Vt&&(Ft=>{let _e=Ft;for(;dt(_e);){if(_e.name in gt)return wl(Q,Nt,Mt,_e);_e=_e.parent}return!1})(nt)?um(mt,ct,J,nt):Pt.removeEmpty&&Vt?J(nt)?nt.remove():nt.unwrap():Pt.paddEmpty&&(Vt||Kv(Ft=nt,"#text")&&(null===(_e=Ft?.firstChild)||void 0===_e?void 0:_e.value)===gn)&&um(mt,ct,J,nt)}}else if(3===nt.type&&!F(nt)){let Pt=null!==(Ct=nt.value)&&void 0!==Ct?Ct:"";(nt.next&&J(nt.next)||et(nt,!1))&&(Pt=Pt.replace(L,"")),0===Pt.length?nt.remove():nt.value=Pt}}]})(N,e,o,h),j=[],W={nodes:{},attributes:{}},P=q=>$v(l(),f(),q,W);if(((q,Q,mt)=>{const ct=[];for(let Rt=q,Nt=Rt;Rt;Nt=Rt,Rt=Rt.walk()){const Mt=Rt;G(Q,Dt=>Dt(Mt)),Se(Mt.parent)&&Mt!==q?Rt=Nt:ct.push(Mt)}for(let Rt=ct.length-1;Rt>=0;Rt--){const Nt=ct[Rt];G(mt,Mt=>Mt(Nt))}})(N,[O,P],[M,S?q=>{return mt=j,void(pm(e,Q=q)&&mt.push(Q));var Q,mt}:St]),j.reverse(),S&&j.length>0)if(h.context){const{pass:q,fail:Q}=Ur(j,mt=>mt.parent===N);mm(Q,e,N,P),h.invalid=q.length>0}else mm(j,e,N,P);const I=((q,Q)=>{var mt;const ct=null!==(mt=Q.forced_root_block)&&void 0!==mt?mt:q.forced_root_block;return!1===ct?"":!0===ct?"p":ct})(o,h);return I&&("body"===N.name||h.isRootContent)&&((q,Q)=>{const mt=iC(aC("script,style,head,html,body,title,meta,param"),e.getBlockElements()),ct=/^[ \t\r\n]+/,Rt=/[ \t\r\n]+$/;let Nt=q.firstChild,Mt=null;const Dt=gt=>{var yt,$t;gt&&(Nt=gt.firstChild,Nt&&3===Nt.type&&(Nt.value=null===(yt=Nt.value)||void 0===yt?void 0:yt.replace(ct,"")),Nt=gt.lastChild,Nt&&3===Nt.type&&(Nt.value=null===($t=Nt.value)||void 0===$t?void 0:$t.replace(Rt,"")))};if(e.isValidChild(q.name,Q.toLowerCase())){for(;Nt;){const gt=Nt.next;b(mt,Nt)?(Mt||(Mt=new Vn(Q,1),Mt.attr(o.forced_root_block_attrs),q.insert(Mt,Nt)),Mt.append(Nt)):(Dt(Mt),Mt=null),Nt=gt}Dt(Mt)}})(N,I),h.invalid||Wv(W,h),N}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&My(e,t,n),t.addAttributeFilter("href",o=>{let s=o.length;const a=i=>{const l=i?lt.trim(i):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(u=>u.length>0).concat(["noopener"]).sort().join(" ")};if(!e.allow_unsafe_link_target)for(;s--;){const i=o[s];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",a(i.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",o=>{let s,a,i,l,c=o.length;for(;c--;)if(l=o[c],"a"===l.name&&l.firstChild&&!l.attr("href"))for(i=l.parent,s=l.lastChild;s&&i;)a=s.prev,i.insert(s,l),s=a}),e.fix_list_elements&&t.addNodeFilter("ul,ol",o=>{let s,a,i=o.length;for(;i--;)if(s=o[i],a=s.parent,a&&("ul"===a.name||"ol"===a.name))if(s.prev&&"li"===s.prev.name)s.prev.append(s);else{const l=new Vn("li",1);l.attr("style","list-style-type: none"),s.wrap(l)}});const r=n.getValidClasses();e.validate&&r&&t.addAttributeFilter("class",o=>{var s;let a=o.length;for(;a--;){const i=o[a],l=null!==(s=i.attr("class"))&&void 0!==s?s:"",c=lt.explode(l," ");let u="";for(let f=0;f<c.length;f++){const m=c[f];let b=!1,g=r["*"];g&&g[m]&&(b=!0),g=r[i.name],!b&&g&&g[m]&&(b=!0),b&&(u&&(u+=" "),u+=m)}u.length||(u=null),i.attr("class",u)}}),((o,s)=>{const{blob_cache:a}=s;if(a){const i=l=>{const c=l.attr("src");var u;(u=l).attr("src")===be.transparentSrc||dt(u.attr("data-mce-placeholder"))||(u=>dt(u.attr("data-mce-bogus")))(l)||Se(c)||Uy(a,c,!0).each(u=>{l.attr("src",u.blobUri())})};o.addAttributeFilter("src",l=>G(l,i))}})(t,e),e.convert_unsafe_embeds&&t.addNodeFilter("object,embed",o=>G(o,s=>{s.replace(((a,i,l,c,u)=>{let f;f=Me(a)?"iframe":Dm(a,"image")?"img":Dm(a,"video")?"video":Dm(a,"audio")?"audio":"iframe";const m=new Vn(f,1);return m.attr("audio"===f?{src:i}:{src:i,width:l,height:c}),"audio"!==f&&"video"!==f||m.attr("controls",""),"iframe"===f&&u&&m.attr("sandbox",""),m})(s.attr("type"),s.attr("object"===s.name?"data":"src"),s.attr("width"),s.attr("height"),e.sandbox_iframes))})),e.sandbox_iframes&&t.addNodeFilter("iframe",o=>G(o,s=>s.attr("sandbox","")))})(g,o),(h=o).inline_styles&&((t,e,n)=>{var r;const o=Lu();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=o,i=lt.explode(null!==(r=e.font_size_legacy_values)&&void 0!==r?r:""),s.addNodeFilter("font",l=>{G(l,c=>{const u=a.parse(c.attr("style")),f=c.attr("color"),m=c.attr("face"),b=c.attr("size");var g;f&&(u.color=f),m&&(u["font-family"]=m),b&&zs(b).each(g=>{u["font-size"]=i[g-1]}),c.name="span",c.attr("style",a.serialize(u)),g=c,G(["color","face","size"],h=>{g.attr(h,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const c="html4"!==a.type;G(l,u=>{if(c)u.name="s";else{const f=i.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",i.serialize(f))}})})})(t,n,o)})(g,h,e),g;var h},cC=(t,e,n)=>{const r=rd(s=t)?As({validate:!1}).serialize(s):s,o=e(r);var s;if(o.isDefaultPrevented())return o;if(rd(t)){if(o.content!==r){const s=si({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:t.name});return{...o,content:s}}return{...o,content:t}}return o},dC=(t,e)=>{if(e.no_events)return rr.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?rr.error(o0(t,{content:"",...n}).content):rr.value(n)}},uC=(t,e,n)=>n.no_events?e:cC(e,o=>o0(t,{...n,content:o}),{sanitize:ef(t),sandbox_iframes:nf(t)}).content,Um=(t,e)=>{if(e.no_events)return rr.value(e);{const n=cC(e.content,r=>{return o=t,s={...e,content:r},o.dispatch("BeforeSetContent",s);var o,s},{sanitize:ef(t),sandbox_iframes:nf(t)});return n.isDefaultPrevented()?(r0(t,n),rr.error(void 0)):rr.value(n)}},Hm=(t,e,n)=>{n.no_events||r0(t,{...n,content:e})},qm=(t,e,n)=>({element:t,width:e,rows:n}),fC=(t,e)=>({element:t,cells:e}),MA=(t,e)=>({x:t,y:e}),mC=(t,e)=>ao(t,e).bind(zs).getOr(1),IA=(t,e,n)=>{const r=t.rows;return!!(r[n]?r[n].cells:[])[e]},pC=t=>yn(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),gC=(t,e)=>{const n=t.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let s=0;s<o.length;s++)if(ue(o[s],e))return k.some(MA(s,r))}return k.none()},hC=(t,e,n,r,o)=>{const s=[],a=t.rows;for(let i=n;i<=o;i++){const l=a[i].cells,c=e<r?l.slice(e,r+1):l.slice(r,e+1);s.push(fC(a[i].element,c))}return s},FA=t=>((e,n)=>{const r=ta(e.element),o=ot("tbody");return fe(o,n),re(r,o),r})(t,ee(t.rows,n=>{const r=ee(n.cells,s=>{const a=fh(s);return d(a,"colspan"),d(a,"rowspan"),a}),o=ta(n.element);return fe(o,r),o})),bC=()=>Tf([]),dd=(t,e)=>e>=0&&e<t.length&&Ja(t.charAt(e)),vC=t=>hr(t.innerText),yC=t=>xt(t)?t.outerHTML:at(t)?xs.encodeRaw(t.data,!1):bs(t)?"\x3c!--"+t.data+"--\x3e":"",qA=Vo(()=>document.implementation.createHTMLDocument("undo")),ud=t=>{const e=t.serializer.getTempAttrs(),n=K0(t.getBody(),e);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:Wt(ee(Cn(n.childNodes),Dn(hr,yC)),r=>r.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:hr(n.innerHTML),bookmark:null,beforeBookmark:null}},$m=(t,e,n)=>{const r=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,r)=>{let o=0;G(n,s=>{var a,i;0===s[0]?o++:1===s[0]?(((a,i,l)=>{const c=(u=>{let f;const m=document.createElement("div"),b=document.createDocumentFragment();for(u&&(m.innerHTML=u);f=m.firstChild;)b.appendChild(f);return b})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(c,a.childNodes[l]):a.appendChild(c)})(r,s[1],o),o++):2===s[0]&&(i=o,(a=r).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,r)=>{const o=n.length+r.length+2,s=new Array(o),a=new Array(o),i=(f,m,b,g,v)=>{const h=c(f,m,b,g);if(null===h||h.start===m&&h.diag===m-g||h.end===f&&h.diag===f-b){let C=f,S=b;for(;C<m||S<g;)C<m&&S<g&&n[C]===r[S]?(v.push([0,n[C]]),++C,++S):m-f>g-b?(v.push([2,n[C]]),++C):(v.push([1,r[S]]),++S)}else{i(f,h.start,b,h.start-h.diag,v);for(let C=h.start;C<h.end;++C)v.push([0,n[C]]);i(h.end,m,h.end-h.diag,g,v)}},l=(f,m,b,g)=>{let v=f;for(;v-m<g&&v<b&&n[v]===r[v-m];)++v;return((h,C,S)=>({start:h,end:C,diag:S}))(f,v,m)},c=(f,m,b,g)=>{const v=m-f,h=g-b;if(0===v||0===h)return null;const C=v-h,S=h+v,E=(S%2==0?S:S+1)/2;let A,N,O,M,j;for(s[1+E]=f,a[1+E]=m+1,A=0;A<=E;++A){for(N=-A;N<=A;N+=2){for(O=N+E,s[O]=N===-A||N!==A&&s[O-1]<s[O+1]?s[O+1]:s[O-1]+1,M=s[O],j=M-f+b-N;M<m&&j<g&&n[M]===r[j];)s[O]=++M,++j;if(C%2!=0&&C-A<=N&&N<=C+A&&a[O-C]<=s[O])return l(a[O-C],N+f-b,m,g)}for(N=C-A;N<=C+A;N+=2){for(O=N+E-C,a[O]=N===C-A||N!==C+A&&a[O+1]<=a[O-1]?a[O+1]-1:a[O-1],M=a[O]-1,j=M-f+b-N;M>=f&&j>=b&&n[M]===r[j];)a[O]=M--,j--;if(C%2==0&&-A<=N&&N<=A&&a[O]<=s[O+C])return l(a[O],N+f-b,m,g)}}return null},u=[];return i(0,n.length,0,r.length,u),u})(ee(Cn(e.childNodes),yC),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!dt(r)||!Nb(r)||!r.isFakeCaret}),r&&(t.selection.moveToBookmark(r),t.selection.scrollIntoView())},Wm=t=>"fragmented"===t.type?t.fragments.join(""):t.content,CC=t=>{const e=ot("body",qA());return Nn(e,Wm(t)),G(Fn(e,"*[data-mce-bogus]"),je),pn(e)},Vm=(t,e)=>{return!(!t||!e)&&(r=e,!(Wm(t)!==Wm(r))||((n,r)=>CC(n)===CC(r))(t,e));var r},Km=t=>0===t.get(),fd=(t,e,n)=>{Km(n)&&(t.typing=e)},xC=(t,e)=>{t.typing&&(fd(t,!1,e),t.add())},wC=t=>({init:{bindEvents:St},undoManager:{beforeChange:(e,n)=>{return r=t,s=n,void(Km(e)&&s.set(Yu(r.selection)));var r,s},add:(e,n,r,o,s,a)=>((i,l,c,u,f,m,b)=>{const g=ud(i),v=lt.extend(m||{},g);if(!Km(u)||i.removed)return null;const h=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:v,lastLevel:h,originalEvent:b}).isDefaultPrevented()||h&&Vm(h,v))return null;l.data[c.get()]&&f.get().each(E=>{l.data[c.get()].beforeBookmark=E});const C=Xk(i);if(C&&l.data.length>C){for(let E=0;E<l.data.length-1;E++)l.data[E]=l.data[E+1];l.data.length--,c.set(l.data.length)}v.bookmark=Yu(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(v),c.set(l.data.length-1);const S={level:v,lastLevel:h,originalEvent:b};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",S),i.dispatch("change",S)):i.dispatch("AddUndo",S),v})(t,e,n,r,o,s,a),undo:(e,n,r)=>((o,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,fd(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],$m(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(t,e,n,r),redo:(e,n)=>((r,o,s)=>{let a;return o.get()<s.length-1&&(o.set(o.get()+1),a=s[o.get()],$m(r,a,!1),r.setDirty(!0),r.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return r=t,s=n,(o=e).data=[],s.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return r=t,o=e,n.get()>0||o.typing&&o.data[0]&&!Vm(ud(r),o.data[0]);var r,o},hasRedo:(e,n)=>{return r=e,n.get()<r.data.length-1&&!r.typing;var r},transact:(e,n,r)=>{return a=r,xC(o=e,n),o.beforeChange(),o.ignore(a),o.add();var o,a},ignore:(e,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(e,n),extra:(e,n,r,o)=>((s,a,i,l,c)=>{if(a.transact(l)){const u=a.data[i.get()].bookmark,f=a.data[i.get()-1];$m(s,f,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=u)}})(t,e,n,r,o)},formatter:{match:(e,n,r,o)=>wm(t,e,n,r,o),matchAll:(e,n)=>((r,o,s)=>{const a=[],i={},l=r.selection.getStart();return r.dom.getParent(l,c=>{for(let u=0;u<o.length;u++){const f=o[u];!i[f]&&Lo(r,c,f,s)&&(i[f]=!0,a.push(f))}},r.dom.getRoot()),a})(t,e,n),matchNode:(e,n,r,o)=>Lo(t,e,n,r,o),canApply:e=>((n,r)=>{const o=n.formatter.get(r),s=n.dom;if(o&&n.selection.isEditable()){const a=n.selection.getStart(),i=Hc(s,a);for(let l=o.length-1;l>=0;l--){const c=o[l];if(!Rr(c))return!0;for(let u=i.length-1;u>=0;u--)if(s.is(i[u],c.selector))return!0}}return!1})(t,e),closest:e=>((n,r)=>{const o=s=>ue(s,D(n.getBody()));return k.from(n.selection.getStart(!0)).bind(s=>ym(D(s),a=>Qn(r,i=>{return Lo(n,a.dom,c=i)?k.some(c):k.none();var c}),o)).getOrNull()})(t,e),apply:(e,n,r)=>Ay(t,e,n,r),remove:(e,n,r,o)=>ky(t,e,n,r,o),toggle:(e,n,r)=>((o,s,a,i)=>{const l=o.formatter.get(s);l&&(!wm(o,s,a,i)||"toggle"in l[0]&&!l[0].toggle?Ay(o,s,a,i):ky(o,s,a,i))})(t,e,n,r),formatChanged:(e,n,r,o,s)=>{return((m,b,g,v,h,C)=>{const S=b.get();G(g.split(","),E=>{const A=Te(S,E).getOrThunk(()=>{const O={withSimilar:{state:bn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:bn(!1),similar:!1,callbacks:[]},withVars:[]};return S[E]=O,O}),N=()=>{const O=Dy(m);return Oy(m,O,E,h,C).isSome()};if(Me(C)){const O=h?A.withSimilar:A.withoutSimilar;O.callbacks.push(v),1===O.callbacks.length&&O.state.set(N())}else A.withVars.push({state:bn(N()),similar:h,vars:C,callback:v})}),b.set(S)})(t,i=e,l=n,c=r,o,s),{unbind:()=>((m,b,g)=>{const v=m.get();G(b.split(","),h=>Te(v,h).each(C=>{v[h]={withSimilar:{...C.withSimilar,callbacks:Wt(C.withSimilar.callbacks,S=>S!==g)},withoutSimilar:{...C.withoutSimilar,callbacks:Wt(C.withoutSimilar.callbacks,S=>S!==g)},withVars:Wt(C.withVars,S=>S.callback!==g)}})),m.set(v)})(i,l,c)};var i,l,c}},editor:{getContent:e=>{return r=e,k.from((n=t).getBody()).fold(ft("tree"===r.format?new Vn("body",11):""),o=>((t,e,n)=>{let r;return r="raw"===e.format?lt.trim(hr(K0(n,t.serializer.getTempAttrs()).innerHTML)):"text"===e.format?((o,s)=>{const a=o.getDoc(),i=Pe(D(o.getBody())),l=ot("div",a);an(l,"data-mce-bogus","all"),B(l,{position:"fixed",left:"-9999999px",top:"0"}),Nn(l,s.innerHTML),X0(l),Y0(l);const c=_n(f=i)?f:D(ye(f).dom.body);var f;re(c,l);const u=hr(l.dom.innerText);return Ot(l),u})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((o,s)=>{const a=jn(o),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!bc(D(n))&&kt(r)?lt.trim(r):r})(n,r,o));var n,r},setContent:(e,n)=>{return o=e,s=n,k.from((r=t).getBody()).map(a=>rd(o)?((i,l,c,u)=>{Vv(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const f=As({validate:!1},i.schema).serialize(c),m=hr(bc(D(l))?f:lt.trim(f));return vm(i,m,u.no_selection),{content:c,html:m}})(r,a,o,s):((i,l,c,u)=>{if(0===(c=hr(c)).length||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const m=jn(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),m.toLowerCase())?(c=f,c=i.dom.createHTML(m,rl(i),c)):c||(c=f),vm(i,c,u.no_selection),{content:c,html:c}}{"raw"!==u.format&&(c=As({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const f=bc(D(l))?c:lt.trim(c);return vm(i,f,u.no_selection),{content:f,html:f}}})(r,a,o,s)).getOr({content:o,html:rd(s.content)?"":s.content});var r,o,s},insertContent:(e,n)=>eA(t,e,n),addVisual:e=>((n,r)=>{const o=n.dom,s=dt(r)?r:n.getBody();G(o.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=t_(n),l=o.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?o.removeClass(a,i):o.addClass(a,i);break;case"A":if(!o.getAttrib(a,"href")){const c=o.getAttrib(a,"name")||a.id,u=nb(n);c&&n.hasVisual?o.addClass(a,u):o.removeClass(a,u)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((r,o,s={})=>{const a=(i=s,l=o,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return dC(r,a).fold(he,i=>{const l=((c,u)=>{if("text"===u.format)return k.from((f=c).selection.getRng()).map(m=>{var b;const g=k.from(f.dom.getParent(m.commonAncestorContainer,f.dom.isBlock)),v=f.getBody(),h=g.map(O=>O.nodeName).getOr("div").toLowerCase(),C=D(m.cloneContents());X0(C),Y0(C);const S=f.dom.add(v,h,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},C.dom),E=vC(S),A=hr(null!==(b=S.textContent)&&void 0!==b?b:"");if(f.dom.remove(S),dd(A,0)||dd(A,A.length-1)){const N=g.getOr(v),O=vC(N),M=O.indexOf(E);return-1===M?E:(dd(O,M-1)?" ":"")+E+(dd(O,M+E.length)?" ":"")}return E}).getOr("");var f;{const f=((m,b)=>{const g=m.selection.getRng(),v=m.dom.create("body"),h=m.selection.getSel(),C=Hf(m,mf(h)),S=b.contextual?((t,e,n)=>{const r=Bb(e,t);return r.length>0?((t,e)=>{return(n=t,r=e[0],No(r,"table",vt(ue,n))).bind(n=>{const r=e[0],o=e[e.length-1],s=(a=>{const i=qm(ta(a),0,[]);return G(Fn(a,"tr"),(l,c)=>{G(Fn(l,"td,th"),(u,f)=>{((m,b,g,v,h)=>{const C=mC(h,"rowspan"),S=mC(h,"colspan"),E=m.rows;for(let A=g;A<g+C;A++){E[A]||(E[A]=fC(fh(v),[]));for(let N=b;N<b+S;N++)E[A].cells[N]=A===g&&N===b?h:ta(h)}})(i,((m,b,g)=>{for(;IA(m,b,g);)b++;return b})(i,f,c),c,l,u)})}),qm(i.element,pC(i.rows),i.rows)})(n);return(a=s,i=r,l=o,gC(a,i).bind(c=>gC(a,l).map(u=>((f,m,b)=>{const g=m.x,v=m.y,h=b.x,C=b.y,S=v<C?hC(f,g,v,h,C):hC(f,g,C,h,v);return qm(f.element,pC(S),S)})(a,c,u)))).map(a=>Tf([FA(a)]));var a,i,l}).getOrThunk(bC);var n,r})(t,r):(o=t,a=n,(s=e).length>0&&s[0].collapsed?bC():(i=o,c=a,((u,f)=>{const m=yn(f,(b,g)=>(re(g,b),g),u);return f.length>0?Tf([m]):m})(D((l=s[0]).cloneContents()),((t,e,n)=>{const r=D(e.commonAncestorContainer),o=ns(r,t),s=Wt(o,l=>n.isWrapper(pe(l))),a=(c=e,Ze(l=o,u=>"li"===pe(u)&&gf(u,c)).fold(ft([]),u=>{return(f=l,Ze(f,m=>"ul"===pe(m)||"ol"===pe(m))).map(f=>{const m=ot(pe(f)),b=Cr(ut(f),(g,v)=>sn(v,"list-style"));return B(m,b),[ot("li"),m]}).getOr([]);var f})),i=s.concat(a.length?a:(l=>zi(l)?Mn(l).filter(bu).fold(ft([]),c=>[l,c]):bu(l)?[l]:[])(r));var l,c;return ee(i,ta)})(i,l,c))));var o,s,a,i,l,c})(D(m.getBody()),C,m.schema).dom:g.cloneContents();return S&&v.appendChild(S),m.selection.serializer.serialize(v,b)})(c,u);return"tree"===u.format?f:c.selection.isCollapsed()?"":f}})(r,i);return uC(r,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(z0(D(t.getBody())).isNone()){const r=Y('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());re(r,D(e.extractContents())),e.insertNode(r.dom),Mn(r).each(o=>o.dom.normalize()),(n=r,((o,s)=>{const a=i=>{const l=Oe(i);for(let c=l.length-1;c>=0;c--){const u=l[c];if(s(u))return k.some(u);const f=a(u);if(f.isSome())return f}return k.none()};return a(o)})(n,F0)).map(o=>{var s;t.selection.setCursorLocation(o.dom,"img"===pe(s=o)?1:kg(s).fold(()=>Oe(s).length,a=>a.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=D(t.getBody()),z0(n).each(r=>{const o=e.selection.getBookmark();je(r),e.selection.moveToBookmark(o)});var e,n}},raw:{getModel:()=>k.none()}}),Mo=t=>Jt(t.plugins,"rtc"),Xm=t=>t.rtcInstance?t.rtcInstance:wC(t),Je=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},SC=t=>Je(t).init.bindEvents(),EC=t=>0===t.dom.length?(Ot(t),k.none()):k.some(t),kC=(t,e,n,r,o)=>{t.bind(s=>((r?Jf:Zc)(s.dom,r?s.dom.length:0,o),e.filter(tr).map(a=>((i,l,c,u,f)=>{const m=i.dom,b=l.dom,g=u?m.length:b.length;u?(Zf(m,b,f,!1,!u),c.setStart(b,g)):(Zf(b,m,f,!1,!u),c.setEnd(b,g))})(s,a,n,r,o)))).orThunk(()=>{return(a=e,i=r,a.filter(l=>pl.isBookmarkNode(l.dom)).bind(i?ar:Er)).or(e).filter(tr).map(a=>((i,l,c)=>{Mn(i).each(u=>{const f=i.dom;l&&yl(u,X(f,0),c)?Zc(f,0,c):!l&&Cl(u,X(f,f.length),c)&&Jf(f,f.length,c)})})(a,r,o));var a,i})},_C=(t,e,n)=>{if(Jt(t,e)){const r=Wt(t[e],o=>o!==n);0===r.length?delete t[e]:t[e]=r}},NC=t=>!(!t||!t.ownerDocument)&&ve(D(t.ownerDocument),D(t)),AC=(t,e,n,r)=>{let o,s;const{selectorChangedWithUnbind:a}=((h,C)=>{let S,E;const A=(O,M)=>Ze(M,j=>h.is(j,O)),N=O=>h.getParents(O,void 0,h.getRoot());return{selectorChangedWithUnbind:(O,M)=>(S||(S={},E={},C.on("NodeChange",j=>{const H=j.element,W=N(H),P={};Ae(S,(I,q)=>{A(q,W).each(Q=>{E[q]||(G(I,mt=>{mt(!0,{node:Q,selector:q,parents:W})}),E[q]=I),P[q]=I})}),Ae(E,(I,q)=>{P[q]||(delete E[q],G(I,Q=>{Q(!1,{node:H,selector:q,parents:W})}))})})),S[O]||(S[O]=[]),S[O].push(M),A(O,N(C.selection.getStart())).each(()=>{E[O]=S[O]}),{unbind:()=>{_C(S,O,M),_C(E,O,M)}})}})(t,r),i=(h,C)=>((S,E,A={})=>{const N=(O=A,M=E,{format:"html",...O,set:!0,selection:!0,content:M});var O,M;Um(S,N).each(O=>{const M=((H,W)=>{if("raw"!==W.format){const P=H.selection.getRng(),I=H.dom.getParent(P.commonAncestorContainer,H.dom.isBlock),q=I?{context:I.nodeName.toLowerCase()}:{},Q=H.parser.parse(W.content,{forced_root_block:!1,...q,...W});return As({validate:!1},H.schema).serialize(Q)}return W.content})(S,O),j=S.selection.getRng();((H,W,P)=>{const I=k.from(W.firstChild).map(D),q=k.from(W.lastChild).map(D);H.deleteContents(),H.insertNode(W);const Q=I.bind(Er).filter(tr).bind(EC),mt=q.bind(ar).filter(tr).bind(EC);kC(Q,I,H,!0,P),kC(mt,q,H,!1,P),H.collapse(!1)})(j,j.createContextualFragment(M),S.schema),S.selection.setRng(j),hl(S,j),Hm(S,M,O)})})(r,h,C),l=h=>{const C=u();C.collapse(!!h),f(C)},c=()=>e.getSelection?e.getSelection():e.document.selection,u=()=>{let h;const C=(E,A,N)=>{try{return A.compareBoundaryPoints(E,N)}catch{return-1}},S=e.document;if(dt(r.bookmark)&&!da(r)){const E=Mf(r);if(E.isSome())return E.map(A=>Hf(r,[A])[0]).getOr(S.createRange())}try{const E=c();E&&!mc(E.anchorNode)&&(h=E.rangeCount>0?E.getRangeAt(0):S.createRange(),h=Hf(r,[h])[0])}catch{}if(h||(h=S.createRange()),Fi(h.startContainer)&&h.collapsed){const E=t.getRoot();h.setStart(E,0),h.setEnd(E,0)}return o&&s&&(0===C(h.START_TO_START,h,o)&&0===C(h.END_TO_END,h,o)?h=s:(o=null,s=null)),h},f=(h,C)=>{if(!((E=h)&&NC(E.startContainer)&&NC(E.endContainer)))return;var E;const S=c();if(h=r.dispatch("SetSelectionRange",{range:h,forward:C}).range,S){s=h;try{S.removeAllRanges(),S.addRange(h)}catch{}!1===C&&S.extend&&(S.collapse(h.endContainer,h.endOffset),S.extend(h.startContainer,h.startOffset)),o=S.rangeCount>0?S.getRangeAt(0):null}if(!h.collapsed&&h.startContainer===h.endContainer&&S?.setBaseAndExtent&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()){const E=h.startContainer.childNodes[h.startOffset];E&&"IMG"===E.nodeName&&(S.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),S.anchorNode===h.startContainer&&S.focusNode===h.endContainer||S.setBaseAndExtent(E,0,E,1))}r.dispatch("AfterSetSelectionRange",{range:h,forward:C})},m=()=>{const h=c(),C=h?.anchorNode,S=h?.focusNode;if(!h||!C||!S||mc(C)||mc(S))return!0;const E=t.createRng(),A=t.createRng();try{E.setStart(C,h.anchorOffset),E.collapse(!0),A.setStart(S,h.focusOffset),A.collapse(!0)}catch{return!0}return E.compareBoundaryPoints(E.START_TO_START,A)<=0},b={dom:t,win:e,serializer:n,editor:r,expand:(h={type:"word"})=>f(ca(t).expand(u(),h)),collapse:l,setCursorLocation:(h,C)=>{const S=t.createRng();dt(h)&&dt(C)?(S.setStart(h,C),S.setEnd(h,C),f(S),l(!1)):(hf(t,S,r.getBody(),!0),f(S))},getContent:h=>((C,S={})=>{return A=S.format?S.format:"html",N=S,Je(C).selection.getContent(A,N);var A,N})(r,h),setContent:i,getBookmark:(h,C)=>g.getBookmark(h,C),moveToBookmark:h=>g.moveToBookmark(h),select:(h,C)=>{return(S=t,E=h,A=C,k.from(E).bind(N=>k.from(N.parentNode).map(O=>{const M=S.nodeIndex(N),j=S.createRng();return j.setStart(O,M),j.setEnd(O,M+1),A&&(hf(S,j,N,!0),hf(S,j,N,!1)),j}))).each(f),h;var S,E,A},isCollapsed:()=>{const h=u(),C=c();return!(!h||h.item)&&(h.compareEndPoints?0===h.compareEndPoints("StartToEnd",h):!C||h.collapsed)},isEditable:()=>{const h=u(),C=r.getBody().querySelectorAll('[data-mce-selected="1"]');return C.length>0?ur(C,S=>t.isEditable(S.parentElement)):B0(t,h)},isForward:m,setNode:h=>(i(t.getOuterHTML(h)),h),getNode:()=>((h,C)=>{if(!C)return h;let S=C.startContainer,E=C.endContainer;const A=C.startOffset,N=C.endOffset;let O=C.commonAncestorContainer;C.collapsed||(S===E&&N-A<2&&S.hasChildNodes()&&(O=S.childNodes[A]),at(S)&&at(E)&&(S=S.length===A?I0(S.nextSibling,!0):S.parentNode,E=0===N?I0(E.previousSibling,!1):E.parentNode,S&&S===E&&(O=S)));const M=at(O)?O.parentNode:O;return Jo(M)?M:h})(r.getBody(),u()),getSel:c,setRng:f,getRng:u,getStart:h=>L0(r.getBody(),u(),h),getEnd:h=>M0(r.getBody(),u(),h),getSelectedBlocks:(h,C)=>((S,E,A,N)=>{const O=[],M=S.getRoot(),j=S.getParent(A||L0(M,E,E.collapsed),S.isBlock),H=S.getParent(N||M0(M,E,E.collapsed),S.isBlock);if(j&&j!==M&&O.push(j),j&&H&&j!==H){let W;const P=new un(j,M);for(;(W=P.next())&&W!==H;)S.isBlock(W)&&O.push(W)}return H&&j!==H&&H!==M&&O.push(H),O})(t,u(),h,C),normalize:()=>{const h=u(),C=c();if(!(mf(C).length>1)&&zc(r)){const S=Kc(t,h);return S.each(E=>{f(E,m())}),S.getOr(h)}return h},selectorChanged:(h,C)=>(a(h,C),b),selectorChangedWithUnbind:a,getScrollContainer:()=>{let h,C=t.getRoot();for(;C&&"BODY"!==C.nodeName;){if(C.scrollHeight>C.clientHeight){h=C;break}C=C.parentNode}return h},scrollIntoView:(h,C)=>{var S;dt(h)?((S=r).inline?lN:dN)(S,h,C):hl(r,u(),C)},placeCaretAt:(h,C)=>f(f0(h,C,r.getDoc())),getBoundingClientRect:()=>{const h=u();return h.collapsed?X.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:()=>{e=o=s=null,v.destroy()}},g=pl(b),v=i0(b,r);return b.bookmarkManager=g,b.controlSelection=v,b},$A=(t,e,n)=>{-1===lt.inArray(e,n)&&(t.addAttributeFilter(n,(r,o)=>{let s=r.length;for(;s--;)r[s].attr(o,null)}),e.push(n))},TC=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},o=e&&e.dom?e.dom:Re.DOM,s=e&&e.schema?e.schema:ws(r),a=si(r,s);return l=r,c=o,(i=a).addAttributeFilter("data-mce-tabindex",(u,f)=>{let m=u.length;for(;m--;){const b=u[m];b.attr("tabindex",b.attr("data-mce-tabindex")),b.attr(f,null)}}),i.addAttributeFilter("src,href,style",(u,f)=>{const m="data-mce-"+f,b=l.url_converter,g=l.url_converter_scope;let v=u.length;for(;v--;){const h=u[v];let C=h.attr(m);void 0!==C?(h.attr(f,C.length>0?C:null),h.attr(m,null)):(C=h.attr(f),"style"===f?C=c.serializeStyle(c.parseStyle(C),h.name):b&&(C=b.call(g,C,f,h.name)),h.attr(f,C.length>0?C:null))}}),i.addAttributeFilter("class",u=>{let f=u.length;for(;f--;){const m=u[f];let b=m.attr("class");b&&(b=b.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",b.length>0?b:null))}}),i.addAttributeFilter("data-mce-type",(u,f,m)=>{let b=u.length;for(;b--;){const g=u[b];"bookmark"===g.attr("data-mce-type")&&!m.cleanup&&(k.from(g.firstChild).exists(h=>{var C;return!vc(null!==(C=h.value)&&void 0!==C?C:"")})?g.unwrap():g.remove())}}),i.addNodeFilter("noscript",u=>{var f;let m=u.length;for(;m--;){const b=u[m].firstChild;b&&(b.value=xs.decode(null!==(f=b.value)&&void 0!==f?f:""))}}),i.addNodeFilter("script,style",(u,f)=>{var m;const b=v=>v.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=u.length;for(;g--;){const v=u[g],h=v.firstChild,C=null!==(m=h?.value)&&void 0!==m?m:"";if("script"===f){const S=v.attr("type");S&&v.attr("type","mce-no/type"===S?null:S.replace(/^mce\-/,"")),"xhtml"===l.element_format&&h&&C.length>0&&(h.value="// <![CDATA[\n"+b(C)+"\n// ]]>")}else"xhtml"===l.element_format&&h&&C.length>0&&(h.value="\x3c!--\n"+b(C)+"\n--\x3e")}}),i.addNodeFilter("#comment",u=>{let f=u.length;for(;f--;){const m=u[f],b=m.value;l.preserve_cdata&&0===b?.indexOf("[CDATA[")?(m.name="#cdata",m.type=4,m.value=c.decode(b.replace(/^\[CDATA\[|\]\]$/g,""))):0===b?.indexOf("mce:protected ")&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(b).substr(14))}}),i.addNodeFilter("xml:namespace,input",(u,f)=>{let m=u.length;for(;m--;){const b=u[m];7===b.type?b.remove():1===b.type&&("input"!==f||b.attr("type")||b.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",u=>{G(u,f=>{"format-caret"===f.attr("data-mce-type")&&(f.isEmpty(i.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(u,f)=>{let m=u.length;for(;m--;)u[m].attr(f,null)}),l.remove_trailing_brs&&My(l,i,i.schema),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},u=(g=i,C=v=c,dt(h=b=e)&&h.hasEventListeners("PreProcess")&&!C.no_events?((h,C,S)=>{let E;const A=h.dom;let N=C.cloneNode(!0);const O=document.implementation;if(O.createHTMLDocument){const M=O.createHTMLDocument("");lt.each("BODY"===N.nodeName?N.childNodes:[N],j=>{M.body.appendChild(M.importNode(j,!0))}),N="BODY"!==N.nodeName?M.body.firstChild:M.body,E=A.doc,A.doc=M}return j={...S,node:N},h.dispatch("PreProcess",j),E&&(A.doc=E),N;var j})(b,g,v):g),f=((b,g,v)=>{const h=hr(v.getInner?g.innerHTML:b.getOuterHTML(g));return v.selection||bc(D(g))?h:lt.trim(h)})(o,u,c),m=((b,g,v)=>{const h=v.selection?{forced_root_block:!1,...v}:v,C=b.parse(g,h);return(S=>{const E=N=>"br"===N?.name,A=S.lastChild;if(E(A)){const N=A.prev;E(N)&&(A.remove(),N.remove())}})(C),C})(a,f,c);var b,g,v,h,C;return"tree"===c.format?m:((b,g,v,h,C)=>{var N;return((E,A,N)=>{return!A.no_events&&E?(M=E,j={...A,content:N},M.dispatch("PostProcess",j)).content:N;var M,j})(b,C,(N=h,As(g,v).serialize(N)))})(e,r,s,m,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:vt($A,a,n),getTempAttrs:ft(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var i,l,c})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Ym=(t,e,n={})=>{const r=(o=n,s=e,{format:"html",...o,set:!0,content:s});var o,s;return Um(t,r).map(o=>{const s=(i=o.content,l=o,Xm(t).editor.setContent(i,l));var i,l;return Hm(t,s.html,o),s.content}).getOr(e)},VA="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),KA="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),XA="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),RC=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],OC=(t,e)=>{const n=Wt(e,r=>Jt(t,r));return Uo(n)},DC=(t,e)=>{const n=lt.makeMap(t.plugins," "),r=Wt(e,o=>Jt(n,o));return Uo(r)},ZA=t=>Ze(RC,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),md=Re.DOM,pd=t=>k.from(t).each(e=>e.destroy()),gd=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>Jt(t,e)}})(),ai=Wn.ModelManager,BC=(t,e)=>e.dom[t],PC=(t,e)=>parseInt($(e,t),10),tT=vt(BC,"clientWidth"),eT=vt(BC,"clientHeight"),nT=vt(PC,"margin-top"),rT=vt(PC,"margin-left"),LC=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},r=()=>k.from(e[0]),o=()=>{G(e,l=>{l.reposition()})},s=l=>{Ms(e,c=>c===l).each(c=>{e.splice(c,1)})},a=(l,c=!0)=>{return t.removed||!(f=(u=t).inline?u.getBody():u.getContentAreaContainer(),k.from(f).map(D)).map(pr).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),Ze(e,u=>{return!((f=n().getArgs(u)).type!==(m=l).type||f.text!==m.text||f.progressBar||f.timeout||m.progressBar||m.timeout);var f,m}).getOrThunk(()=>{t.editorManager.setActive(t);const u=n().open(l,()=>{s(u),o(),D0(t)&&r().fold(()=>t.focus(),f=>k0(D(f.getEl())))});return(f=>{e.push(f)})(u),o(),t.dispatch("OpenNotification",{notification:{...u}}),u}));var u,f},i=ft(e);return(l=t).on("SkinLoaded",()=>{const c=Mk(l);c&&a({text:c,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{G(e.slice(),c=>{n().close(c)})}),{open:a,close:()=>{r().each(l=>{n().close(l),s(l),o()})},getNotifications:i};var l},ii=Wn.PluginManager,ga=Wn.ThemeManager,MC=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},r=(a,i)=>(...l)=>i?i.apply(a,l):void 0,o=a=>{t.dispatch("CloseWindow",{dialog:a}),e=Wt(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),Lf(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{G(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,o)),openUrl:a=>s(()=>n().openUrl(a,o)),alert:(a,i,l)=>{const c=n();c.alert(a,r(l||c,i))},confirm:(a,i,l)=>{const c=n();c.confirm(a,r(l||c,i))},close:()=>{k.from(e[e.length-1]).each(a=>{n().close(a),o(a)})}}},IC=(t,e)=>{t.notificationManager.open({type:"error",text:e})},hd=(t,e)=>{t._skinLoaded?IC(t,e):t.on("SkinLoaded",()=>{IC(t,e)})},Al=(t,e,n)=>{t0(t,e,{message:n}),console.error(n)},Tl=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,bd=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},Gm=t=>"content/"+t+"/content.css",FC=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",r=`content${t.editorManager.suffix}.css`;return ee(e,o=>tinymce.Resource.has(Gm(o))?o:/^[a-z0-9\-]+$/i.test(o)&&!t.inline?`${n}/${o}/${r}`:t.documentBaseURI.toAbsolute(o))},jC=()=>{let t={};const e=(r,o)=>({status:r,resultUri:o}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{const o=t[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:r=>{t[r]=e(1,null)},markUploaded:(r,o)=>{t[r]=e(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}};let sT=0;const zC=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),UC=(t,e)=>((t,e)=>{const n={},r=(l,c)=>new Promise((u,f)=>{const m=new XMLHttpRequest;m.open("POST",e.url),m.withCredentials=e.credentials,m.upload.onprogress=g=>{c(g.loaded/g.total*100)},m.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+m.status)},m.onload=()=>{if(m.status<200||m.status>=300)return void f("HTTP Error: "+m.status);const g=JSON.parse(m.responseText);var v,h;g&&kt(g.location)?u((h=g.location,(v=e.basePath)?v.replace(/\/$/,"")+"/"+h.replace(/^\//,""):h)):f("Invalid JSON: "+m.responseText)};const b=new FormData;b.append("file",l.blob(),l.filename()),m.send(b)}),o=Ce(e.handler)?e.handler:r,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{lt.each(n[l],u=>{u(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||o!==r?(f=c,u=lt.grep(u=l,m=>!t.isUploaded(m.blobUri())),Promise.all(lt.map(u,m=>{return t.isPending(m.blobUri())?(b=>{const g=b.blobUri();return new Promise(v=>{n[g]=n[g]||[],n[g].push(v)})})(m):(g=o,v=f,t.markPending((b=m).blobUri()),new Promise(h=>{let C,S;try{const E=()=>{C&&(C.close(),S=St)},A=O=>{E(),t.markUploaded(b.blobUri(),O),i(b.blobUri(),s(b,O)),h(s(b,O))},N=O=>{E(),t.removeFailed(b.blobUri()),i(b.blobUri(),a(b,O)),h(a(b,O))};S=O=>{O<0||O>100||k.from(C).orThunk(()=>k.from(v).map(yo)).each(M=>{C=M,M.progressBar.value(O)})},g(b,S).then(A,O=>{N(kt(O)?{message:O}:O)})}catch(E){h(a(b,E))}}));var b,g,v}))):new Promise(u=>{u([])});var u,f}}})(e,{url:Sk(t),basePath:Ek(t),credentials:kk(t),handler:_k(t)}),HC={remove_similar:!0,inherit:!1},li={selector:"td,th",...HC},lT={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...li},tablecellverticalalign:{styles:{"vertical-align":"%value"},...li},tablecellbordercolor:{styles:{borderColor:"%value"},...li},tablecellclass:{classes:["%value"],...li},tableclass:{selector:"table",classes:["%value"],...HC},tablecellborderstyle:{styles:{borderStyle:"%value"},...li},tablecellborderwidth:{styles:{borderWidth:"%value"},...li}},cT=ft(lT),vd=lt.each,Pr=Re.DOM,Qm=t=>dt(t)&&Gt(t),qC=(t,e)=>{const n=e&&e.schema||ws({}),r=a=>{const i=kt(a)?{name:a,classes:[],attrs:{}}:a,l=Pr.create(i.name);return c=l,(u=i).classes.length>0&&Pr.addClass(c,u.classes.join(" ")),Pr.setAttribs(c,u.attrs),l;var c,u},o=(a,i,l)=>{let c;const u=i[0],f=Qm(u)?u.name:void 0,m=((v,h)=>{const C=n.getElementRule(v.nodeName.toLowerCase()),S=C?.parentsRequired;return!(!S||!S.length)&&(h&&At(S,h)?h:S[0])})(a,f);if(m)f===m?(c=u,i=i.slice(1)):c=m;else if(u)c=u,i=i.slice(1);else if(!l)return a;const b=c?r(c):Pr.create("div");b.appendChild(a),l&&lt.each(l,v=>{const h=r(v);b.insertBefore(h,a)});const g=Qm(c)?c.siblings:void 0;return o(b,i,g)},s=Pr.create("div");if(t.length>0){const a=t[0],i=r(a),l=Qm(a)?a.siblings:void 0;s.appendChild(o(i,t.slice(1),l))}return s},dT=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=lt.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,s,a,i)=>{switch(o){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==lt.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},uT=(t,e)=>{let n="",r=zk(t);if(""===r)return"";const o=b=>kt(b)?b.replace(/%(\w+)/g,""):"",s=(b,g)=>Pr.getStyle(g??t.getBody(),b,!0);if(kt(e)){const b=t.formatter.get(e);if(!b)return"";e=b[0]}if("preview"in e){const b=e.preview;if(!1===b)return"";r=b||r}let a,i=e.block||e.inline||"span";const l=kt(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),lt.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),b=>{const g=lt.map(b.split(/(?:~\+|~|\+)/),dT),v=g.pop();return g.length&&(v.siblings=g),v}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=qC(l,t)):a=qC([i],t);const u=Pr.select(i,a)[0]||a.firstChild;vd(e.styles,(b,g)=>{const v=o(b);v&&Pr.setStyle(u,g,v)}),vd(e.attributes,(b,g)=>{const v=o(b);v&&Pr.setAttrib(u,g,v)}),vd(e.classes,b=>{const g=o(b);Pr.hasClass(u,g)||Pr.addClass(u,g)}),t.dispatch("PreviewFormats"),Pr.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const f=s("fontSize"),m=/px$/.test(f)?parseInt(f,10):0;return vd(r.split(" "),b=>{let g=s(b,u);if(!("background-color"===b&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(b),"#ffffff"===$i(g).toLowerCase())||"color"===b&&"#000000"===$i(g).toLowerCase())){if("font-size"===b&&/em|%$/.test(g)){if(0===m)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*m+"px"}"border"===b&&g&&(n+="padding:0 2px;"),n+=b+":"+g+";"}}),t.dispatch("AfterPreviewFormats"),Pr.remove(a),n},$C=t=>{const e=(r=>{const o={},s=(a,i)=>{a&&(kt(a)?(it(i)||(i=[i]),G(i,l=>{Me(l.deep)&&(l.deep=!Rr(l)),Me(l.split)&&(l.split=!Rr(l)||fn(l)),Me(l.remove)&&Rr(l)&&!fn(l)&&(l.remove="none"),Rr(l)&&fn(l)&&(l.mixed=!0,l.block_expand=!0),kt(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[a]=i):Ae(a,(l,c)=>{s(c,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[m,u,f]:[u,m,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,m)=>xt(u)&&u.hasAttribute("href"),onformat:(u,f,m)=>{lt.each(m,(b,g)=>{i.setAttrib(u,g,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return null!==(f=u?.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return lt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{c[u]={block:u,remove:"all"}}),c})(r)),s(cT()),s(jk(r)),{get:a=>dt(a)?o[a]:o,has:a=>Jt(o,a),register:s,unregister:a=>(a&&o[a]&&delete o[a],o)}})(t),n=bn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(r=t).on("mouseup keydown",o=>{var s;((a,i,l)=>{const c=a.selection,u=a.getBody();km(a,null,l),8!==i&&46!==i||!c.isCollapsed()||c.getStart().innerHTML!==Sl||km(a,aa(u,c.getStart()),!0),37!==i&&39!==i||km(a,aa(u,c.getStart()),!0)})(r,o.keyCode,(s=r.selection.getRng().endContainer,at(s)&&Fs(s.data,gn)))}),Mo(t)||((r,o)=>{r.set({}),o.on("NodeChange",s=>{By(o,s.element,r.get())}),o.on("FormatApply FormatRemove",s=>{const a=k.from(s.node).map(i=>fl(i)?i:i.startContainer).bind(i=>xt(i)?k.some(i):k.from(i.parentElement)).getOrThunk(()=>Ry(o));By(o,a,r.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,Je(t).formatter.apply(i,l,c)},remove:(r,o,s,a)=>{var l,c,u,f;l=r,c=o,u=s,f=a,Je(t).formatter.remove(l,c,u,f)},toggle:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,Je(t).formatter.toggle(i,l,c)},match:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,Je(t).formatter.match(l,c,u,f);var l,c,u,f},closest:r=>{return s=r,Je(t).formatter.closest(s);var s},matchAll:(r,o)=>{return a=r,i=o,Je(t).formatter.matchAll(a,i);var a,i},matchNode:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,Je(t).formatter.matchNode(l,c,u,f);var l,c,u,f},canApply:r=>{return s=r,Je(t).formatter.canApply(s);var s},formatChanged:(r,o,s,a)=>{return l=n,c=r,u=o,f=s,m=a,Je(t).formatter.formatChanged(l,c,u,f,m);var l,c,u,f,m},getCssText:vt(uT,t)};var r},WC=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},VC=t=>{const e=Ss(),n=bn(0),r=bn(0),o={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,Je(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=o,c=r,u=n,f=e,m=s,b=a,Je(t).undoManager.add(l,c,u,f,m,b);var l,c,u,f,m,b},dispatchChange:()=>{t.setDirty(!0);const s=ud(t);s.bookmark=Yu(t.selection),t.dispatch("change",{level:s,lastLevel:_a(o.data,r.get()).getOrUndefined()})},undo:()=>{return a=o,i=n,l=r,Je(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=r,i=o.data,Je(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=o,i=r,Je(t).undoManager.clear(a,i)},reset:()=>{var a;a=o,Je(t).undoManager.reset(a)},hasUndo:()=>{return a=o,i=r,Je(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=o,i=r,Je(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=o,l=n,c=s,Je(t).undoManager.transact(i,l,c);var i,l,c},ignore:s=>{var i,l;i=n,l=s,Je(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,c,u,f;l=o,c=r,u=s,f=a,Je(t).undoManager.extra(l,c,u,f)}};return Mo(t)||((s,a,i)=>{const l=bn(!1),c=u=>{fd(a,!1,i),a.add({},u)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",u=>{WC(u.command)||(xC(a,i),a.beforeChange())}),s.on("ExecCommand",u=>{WC(u.command)||c(u)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",u=>{const f=u.keyCode;if(u.isDefaultPrevented())return;const m=be.os.isMacOS()&&"Meta"===u.key;(f>=33&&f<=36||f>=37&&f<=40||45===f||u.ctrlKey||m)&&(c(),s.nodeChanged()),46!==f&&8!==f||s.nodeChanged(),l.get()&&a.typing&&!Vm(ud(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",u=>{const f=u.keyCode;if(!u.isDefaultPrevented()){if(!(f>=33&&f<=36||f>=37&&f<=40||45===f))return!(f<16||f>20)||224===f||91===f||a.typing||u.ctrlKey&&!u.altKey||u.metaKey?void((be.os.isMacOS()?u.metaKey:u.ctrlKey&&!u.altKey)&&a.beforeChange()):(a.beforeChange(),fd(a,!0,i),a.add({},u),void l.set(!0));a.typing&&c(u)}}),s.on("mousedown",u=>{a.typing&&c(u)}),s.on("input",u=>{var f,m;u.inputType&&("insertReplacementText"===u.inputType||"insertText"===(f=u).inputType&&null===f.data||"insertFromPaste"===(m=u).inputType||"insertFromDrop"===m.inputType)&&c(u)}),s.on("AddUndo Undo Redo ClearUndos",u=>{u.isDefaultPrevented()||s.nodeChanged()})})(t,o,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),o;var s},fT=[9,27,ht.HOME,ht.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ht.DOWN,ht.UP,ht.LEFT,ht.RIGHT].concat(be.browser.isFirefox()?[224]:[]),KC="data-mce-placeholder",XC=t=>"keydown"===t.type||"keyup"===t.type,YC=t=>{const e=t.keyCode;return e===ht.BACKSPACE||e===ht.DELETE},mT=(t,e)=>({from:t,to:e}),Jm=(t,e)=>{const n=D(t),r=D(e.container());return td(n,r).map(o=>((s,a)=>({block:s,position:a}))(o,e))},GC=(t,e)=>_o(e,n=>Ui(n)||Gr(n.dom),n=>ue(n,t)).filter($n).getOr(t),QC=(t,e)=>{const n=((r,o)=>{const s=Oe(r);return Ms(s,a=>o.isBlock(pe(a))).fold(ft(s),a=>s.slice(0,a))})(t,e);return G(n,Ot),n},JC=(t,e)=>{const n=ns(e,t);return Ze(n.reverse(),r=>Qe(r)).each(Ot)},pT=(t,e,n,r,o)=>{if(Qe(n))return vs(n),zn(n.dom);0===Wt(io(o),a=>!Qe(a)).length&&Qe(e)&&_t(o,ot("br"));const s=lr(n.dom,X.before(o.dom));return G(QC(e,r),a=>{_t(o,a)}),JC(t,e),s},gT=(t,e,n,r)=>{if(Qe(n)){if(Qe(e)){const a=zo((i=>{const l=(c,u)=>en(c).fold(()=>u,f=>r.isInline(pe(f))?l(f,u.concat(ta(f))):u);return l(i,[])})(n),(i,l)=>(ge(i,l),l),Hi());xe(e),re(e,a)}return Ot(n),zn(e.dom)}const o=Jr(n.dom);return G(QC(e,r),s=>{re(n,s)}),JC(t,e),o},ZC=(t,e)=>{Qa(t,e.dom).bind(n=>k.from(n.getNode())).map(D).filter(Xs).each(Ot)},t1=(t,e,n,r)=>{return ZC(!0,e),ZC(!1,n),(o=e,s=n,ve(s,o)?((a,i)=>{const l=ns(i,a);return k.from(l[l.length-1])})(s,o):k.none()).fold(vt(gT,t,e,n,r),vt(pT,t,e,n,r));var o,s},e1=(t,e,n,r,o)=>e?t1(t,r,n,o):t1(t,n,r,o),Zm=(t,e)=>{const n=D(t.getBody());return(o=n.dom,s=e,a=t.selection.getRng(),a.collapsed?((i,l,c)=>{const u=Jm(i,X.fromRangeStart(c)),f=u.bind(m=>Nr(l,i,m.position).bind(b=>Jm(i,b).map(g=>{return v=i,h=l,Ve((C=g).position.getNode())&&!Qe(C.block)?Qa(!1,C.block.dom).bind(S=>S.isEqual(C.position)?Nr(h,v,S).bind(E=>Jm(v,E)):k.some(C)).getOr(C):C;var v,h,C})));return xn(u,f,mT).filter(m=>{return!ue((b=m).from.block,b.to.block)&&((b,g)=>{const v=D(b);return ue(GC(v,g.from.block),GC(v,g.to.block))})(i,m)&&(b=>!1===De(b.from.block.dom)&&!1===De(b.to.block.dom))(m)&&(b=>{const g=v=>_g(v)||ku(v.dom);return g(b.from.block)&&g(b.to.block)})(m);var b})})(o,s,a):k.none()).map(o=>()=>{e1(n,e,o.from.block,o.to.block,t.schema).each(s=>{t.selection.setRng(s.toRange())})});var o,s,a},n1=(t,e)=>{const n=D(e),r=vt(ue,t);return In(n,Ui,r).isSome()},tp=(t,e)=>t.selection.isCollapsed()?k.none():(t=>{const e=D(t.getBody());return((n,r)=>{const o=lr(n.dom,X.fromRangeStart(r)).isNone(),s=or(n.dom,X.fromRangeEnd(r)).isNone();return!(n1(a=n,(i=r).startContainer)||n1(a,i.endContainer))&&o&&s;var a,i})(e,t.selection.getRng())?(n=t,k.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r,o)=>{const s=r.getRng();return xn(td(n,D(s.startContainer)),td(n,D(s.endContainer)),(a,i)=>ue(a,i)?k.none():k.some(()=>{s.deleteContents(),e1(n,!0,a,i,o).each(l=>{r.setRng(l.toRange())})})).getOr(k.none())})(e,t.selection,t.schema);var n})(t),rs=(t,e,n,r,o)=>k.from(e._selectionOverrides.showCaret(t,n,r,o)),Rl=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?k.none():k.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(e)),ep=(t,e,n)=>e.collapsed?((r,o,s)=>{const a=sf(1,r.getBody(),o),i=X.fromRangeStart(a),l=i.getNode();if(sl(l))return rs(1,r,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(sl(c))return rs(1,r,c,!1,!1);const u=ma(r.dom.getRoot(),i.getNode());return sl(u)?rs(1,r,u,!1,s):k.none()})(t,e,n).getOr(e):e,bT=t=>Rs(t)||bl(t),vT=t=>Os(t)||vl(t),r1=(t,e,n,r,o,s)=>{var a,i;rs(r,t,s.getNode(!o),o,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();o?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,at(i=n)&&0===i.data.length&&a.remove(i)},np=(t,e)=>((n,r)=>{const o=n.selection.getRng();if(!at(o.commonAncestorContainer))return k.none();const s=r?vn.Forwards:vn.Backwards,a=Bo(n.getBody()),i=vt(af,r?a.next:a.prev),l=r?bT:vT,c=dl(s,n.getBody(),o),u=i(c),f=u&&Dr(r,u);if(!f||!Mc(c,f))return k.none();if(l(f))return k.some(()=>r1(n,o,c.getNode(),s,r,f));const m=i(f);return m&&l(m)&&Mc(f,m)?k.some(()=>r1(n,o,c.getNode(),s,r,m)):k.none()})(t,e),rp=(t,e)=>{const n=t.getBody();return e?zn(n).filter(Rs):Jr(n).filter(Os)},op=t=>{const e=t.selection.getRng();return!e.collapsed&&(rp(t,!0).exists(n=>n.isEqual(X.fromRangeStart(e)))||rp(t,!1).exists(n=>n.isEqual(X.fromRangeEnd(e))))},Lr=Ro([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),o1=(t,e,n,r)=>Nr(e,t,n).bind(o=>{return s=o.getNode(),dt(s)&&(Ui(D(s))||zi(D(s)))||((a,i,l,c,u)=>{const f=m=>u.isInline(m.nodeName.toLowerCase())&&!Oo(l,c,a);return bb(!i,l).fold(()=>bb(i,c).fold(ke,f),f)})(t,e,n,o,r)?k.none():e&&De(o.getNode())||!e&&De(o.getNode(!0))?((a,i,l,c)=>{const u=c.getNode(!i);return td(D(a),D(l.getNode())).map(f=>Qe(f)?Lr.remove(f.dom):Lr.moveToElement(u)).orThunk(()=>k.some(Lr.moveToElement(u)))})(t,e,n,o):e&&Os(n)||!e&&Rs(n)?k.some(Lr.moveToPosition(o)):k.none();var s}),s1=(t,e)=>k.from(ma(t.getBody(),e)),a1=t=>{const e=t.dom,n=t.selection,r=ma(t.getBody(),n.getNode());if(Gr(r)&&e.isBlock(r)&&e.isEmpty(r)){const o=e.create("br",{"data-mce-bogus":"1"});e.setHTML(r,""),r.appendChild(o),n.setRng(X.before(o).toRange())}return!0},sp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return s1(t,n).filter(De).fold(()=>((r,o,s,a)=>{const i=sf(o?1:-1,r,s),l=X.fromRangeStart(i),c=D(r);return!o&&Os(l)?k.some(Lr.remove(l.getNode(!0))):o&&Rs(l)?k.some(Lr.remove(l.getNode())):!o&&Rs(l)&&Yf(c,l,a)?LN(c,l,a).map(u=>Lr.remove(u.getNode())):o&&Os(l)&&Xf(c,l,a)?MN(c,l,a).map(u=>Lr.remove(u.getNode())):(u=r,b=a,((g,v)=>{const h=v.getNode(!g),C=g?"after":"before";return xt(h)&&h.getAttribute("data-mce-caret")===C})(f=o,m=l)?(g=f,v=m.getNode(!f),Se(v)?k.none():g&&De(v.nextSibling)?k.some(Lr.moveToElement(v.nextSibling)):!g&&De(v.previousSibling)?k.some(Lr.moveToElement(v.previousSibling)):k.none()).orThunk(()=>o1(u,f,m,b)):o1(u,f,m,b).bind(g=>((v,h,C)=>C.fold(S=>k.some(Lr.remove(S)),S=>k.some(Lr.moveToElement(S)),S=>Oo(h,S,v)?k.none():k.some(Lr.moveToPosition(S))))(u,m,g)));var u,f,m,b,g,v})(t.getBody(),e,t.selection.getRng(),t.schema).map(r=>()=>r.fold(((o,s)=>a=>(o._selectionOverrides.hideFakeCaret(),ua(o,s,D(a)),!0))(t,e),((o,s)=>a=>{const i=s?X.before(a):X.after(a);return o.selection.setRng(i.toRange()),!0})(t,e),(o=>s=>(o.selection.setRng(s.toRange()),!0))(t))),()=>k.some(St))})(t,e):((n,r)=>{const o=n.selection.getNode();return De(o)&&!gc(o)?s1(n,o.parentNode).filter(De).fold(()=>k.some(()=>{var s;s=D(n.getBody()),G(Fn(s,".mce-offscreen-selection"),Ot),ua(n,r,D(n.selection.getNode())),em(n)}),()=>k.some(St)):op(n)?k.some(()=>{Rv(n,n.selection.getRng(),D(n.getBody()))}):k.none()})(t,e),ap=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=X.fromRangeStart(n.selection.getRng());return Nr(r,n.getBody(),o).filter(s=>r?RN(s):ON(s)).bind(s=>of(r?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):k.none(),ci=at,i1=t=>ci(t)&&t.data[0]===hn,l1=t=>ci(t)&&t.data[t.data.length-1]===hn,c1=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(hn)},yd=(t,e)=>t?(n=>{var r;if(ci(n.previousSibling))return l1(n.previousSibling)||n.previousSibling.appendData(hn),n.previousSibling;if(ci(n))return i1(n)||n.insertData(0,hn),n;{const o=c1(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(e):(n=>{var r,o;if(ci(n.nextSibling))return i1(n.nextSibling)||n.nextSibling.insertData(0,hn),n.nextSibling;if(ci(n))return l1(n)||n.appendData(hn),n;{const s=c1(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(s,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(s),s}})(e),CT=vt(yd,!0),xT=vt(yd,!1),d1=(t,e)=>at(t.container())?yd(e,t.container()):yd(e,t.getNode()),u1=(t,e)=>{const n=e.get();return n&&t.container()===n&&ys(n)},ip=(t,e)=>e.fold(n=>{oa(t.get());const r=CT(n);return t.set(r),k.some(X(r,r.length-1))},n=>zn(n).map(r=>{if(u1(r,t)){const o=t.get();return X(o,1)}{oa(t.get());const o=d1(r,!0);return t.set(o),X(o,1)}}),n=>Jr(n).map(r=>{if(u1(r,t)){const o=t.get();return X(o,o.length-1)}{oa(t.get());const o=d1(r,!1);return t.set(o),X(o,o.length-1)}}),n=>{oa(t.get());const r=xT(n);return t.set(r),k.some(X(r,1))}),f1=(t,e)=>{for(let n=0;n<t.length;n++){const r=t[n].apply(null,e);if(r.isSome())return r}return k.none()},Kn=Ro([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),m1=(t,e)=>_s(e,t)||t,wT=(t,e,n)=>{const r=kv(n),o=m1(e,r.container());return Ds(t,o,r).fold(()=>or(o,r).bind(vt(Ds,t,o)).map(s=>Kn.before(s)),k.none)},ST=(t,e)=>null===aa(t,e),p1=(t,e,n)=>Ds(t,e,n).filter(vt(ST,e)),ET=(t,e,n)=>{const r=_v(n);return p1(t,e,r).bind(o=>lr(o,r).isNone()?k.some(Kn.start(o)):k.none())},kT=(t,e,n)=>{const r=kv(n);return p1(t,e,r).bind(o=>or(o,r).isNone()?k.some(Kn.end(o)):k.none())},_T=(t,e,n)=>{const r=_v(n),o=m1(e,r.container());return Ds(t,o,r).fold(()=>lr(o,r).bind(vt(Ds,t,o)).map(s=>Kn.after(s)),k.none)},g1=t=>!Ev(lp(t)),Io=(t,e,n)=>f1([wT,ET,kT,_T],[t,e,n]).filter(g1),lp=t=>t.fold(he,he,he,he),h1=t=>t.fold(ft("before"),ft("start"),ft("end"),ft("after")),Cd=t=>t.fold(Kn.before,Kn.before,Kn.after,Kn.after),cp=t=>t.fold(Kn.start,Kn.start,Kn.end,Kn.end),NT=(t,e,n,r,o,s)=>xn(Ds(e,n,r),Ds(e,n,o),(a,i)=>a!==i&&((l,c,u)=>{const f=_s(c,l),m=_s(u,l);return dt(f)&&f===m})(n,a,i)?Kn.after(t?a:i):s).getOr(s),AT=(t,e)=>t.fold(Ie,n=>{return o=e,!(h1(r=n)===h1(o)&&lp(r)===lp(o));var r,o}),TT=(t,e)=>t?e.fold(Dn(k.some,Kn.start),k.none,Dn(k.some,Kn.after),k.none):e.fold(k.none,Dn(k.some,Kn.before),k.none,Dn(k.some,Kn.end)),b1=(t,e,n)=>{const r=t?1:-1;return e.setRng(X(n.container(),n.offset()+r).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Fo;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Fo||(Fo={}));const xd=(t,e)=>t===vn.Backwards?ro(e):e,RT=(t,e,n)=>t===vn.Forwards?e.next(n):e.prev(n),OT=(t,e,n,r)=>Ve(r.getNode(e===vn.Forwards))?Fo.Br:!1===Oo(n,r)?Fo.Block:Fo.Wrap,v1=(t,e,n,r)=>{const o=Bo(n);let s=r;const a=[];for(;s;){const i=RT(e,o,s);if(!i)break;if(Ve(i.getNode(!1)))return e===vn.Forwards?{positions:xd(e,a).concat([i]),breakType:Fo.Br,breakAt:k.some(i)}:{positions:xd(e,a),breakType:Fo.Br,breakAt:k.some(i)};if(i.isVisible()){if(t(s,i)){const l=OT(0,e,s,i);return{positions:xd(e,a),breakType:l,breakAt:k.some(i)}}a.push(i),s=i}else s=i}return{positions:xd(e,a),breakType:Fo.Eol,breakAt:k.none()}},y1=(t,e,n,r)=>e(n,r).breakAt.map(o=>{const s=e(n,o).positions;return t===vn.Backwards?s.concat(o):[o].concat(s)}).getOr([]),dp=(t,e)=>yn(t,(n,r)=>n.fold(()=>k.some(r),o=>xn(Pn(o.getClientRects()),Pn(r.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?r:o}).or(n)),k.none()),wd=(t,e)=>Pn(e.getClientRects()).bind(n=>dp(t,n.left)),Ol=vt(v1,X.isAbove,-1),Dl=vt(v1,X.isBelow,1),C1=vt(y1,-1,Ol),x1=vt(y1,1,Dl),w1=(t,e)=>Ol(t,e).breakAt.isNone(),S1=(t,e)=>Dl(t,e).breakAt.isNone(),DT=(t,e)=>wd(C1(t,e),e),BT=(t,e)=>wd(x1(t,e),e),PT=De,E1=(t,e)=>Math.abs(t.left-e),k1=(t,e)=>Math.abs(t.right-e),_1=(t,e)=>oo(t,(n,r)=>{const o=Math.min(E1(n,e),k1(n,e)),s=Math.min(E1(r,e),k1(r,e));return s===o&&En(r,"node")&&PT(r.node)||s<o?r:n}),LT=t=>{const e=n=>ee(n,r=>{const o=na(r);return o.node=t,o});if(xt(t))return e(t.getClientRects());if(at(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},N1=t=>rn(t,LT);var Bl;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Bl||(Bl={}));const A1=(t,e,n,r,o,s)=>{let a=0;const i=[],l=f=>{let m=N1([f]);-1===t&&(m=m.reverse());for(let b=0;b<m.length;b++){const g=m[b];if(!n(g,c)){if(i.length>0&&e(g,$r(i))&&a++,g.line=a,o(g))return!0;i.push(g)}}return!1},c=$r(s.getClientRects());if(!c)return i;const u=s.getNode();return u&&(l(u),((f,m,b,g)=>{let v=g;for(;v=il(v,f,Og,m);)if(b(v))return})(t,r,l,u)),i},MT=vt(A1,Bl.Up,Zi,tl),IT=vt(A1,Bl.Down,tl,Zi),T1=t=>$r(t.getClientRects()),R1=t=>e=>e.line>t,up=t=>e=>e.line===t,os=(t,e)=>{t.selection.setRng(e),hl(t,t.selection.getRng())},fp=(t,e,n)=>k.some(ep(t,e,n)),O1=(t,e,n,r,o,s)=>{const a=e===vn.Forwards,i=Bo(t.getBody()),l=vt(af,a?i.next:i.prev),c=a?r:o;if(!n.collapsed){const g=Ac(n);if(s(g))return rs(e,t,g,e===vn.Backwards,!1);if(op(t)){const v=n.cloneRange();return v.collapse(e===vn.Backwards),k.from(v)}}const u=dl(e,t.getBody(),n);if(c(u))return Rl(t,u.getNode(!a));let f=l(u);const m=Ag(n);if(!f)return m?k.some(n):k.none();if(f=Dr(a,f),c(f))return rs(e,t,f.getNode(!a),a,!1);const b=l(f);return b&&c(b)&&Mc(f,b)?rs(e,t,b.getNode(!a),a,!1):m?fp(t,f.toRange(),!1):k.none()},D1=(t,e,n,r,o,s)=>{const a=dl(e,t.getBody(),n),i=$r(a.getClientRects()),l=e===Bl.Down,c=t.getBody();if(!i)return k.none();if(op(t)){const v=l?X.fromRangeEnd(n):X.fromRangeStart(n);return(l?BT:DT)(c,v).orThunk(()=>k.from(v)).map(h=>h.toRange())}const u=(l?IT:MT)(c,R1(1),a),f=Wt(u,up(1)),m=i.left,b=_1(f,m);if(b&&s(b.node)){const v=Math.abs(m-b.left),h=Math.abs(m-b.right);return rs(e,t,b.node,v<h,!1)}let g;if(g=r(a)?a.getNode():o(a)?a.getNode(!0):Ac(n),g){const v=((C,S,E,A)=>{const N=Bo(S);let O,M,j,H;const W=[];let P=0;1===C?(O=N.next,M=tl,j=Zi,H=X.after(A)):(O=N.prev,M=Zi,j=tl,H=X.before(A));const I=T1(H);do{if(!H.isVisible())continue;const q=T1(H);if(j(q,I))continue;W.length>0&&M(q,$r(W))&&P++;const Q=na(q);if(Q.position=H,Q.line=P,E(Q))return W;W.push(Q)}while(H=O(H));return W})(e,c,R1(1),g);let h=_1(Wt(v,up(1)),m);if(h||(h=$r(Wt(v,up(0))),h))return fp(t,h.position.toRange(),!1)}return 0===f.length?mp(t,l).filter(l?o:r).map(v=>ep(t,v.toRange(),!1)):k.none()},mp=(t,e)=>{const n=t.selection.getRng(),r=e?X.fromRangeEnd(n):X.fromRangeStart(n),o=(s=r.container(),a=t.getBody(),In(D(s),i=>M_(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=Dl(o,r);return wo(i.positions)}{const i=Ol(o,r);return Pn(i.positions)}},B1=(t,e,n)=>mp(t,e).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),Sd=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},P1=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},L1=(t,e,n)=>ip(e,n).map(r=>(Sd(t,r),n)),M1=(t,e,n)=>!!ol(t)&&((t,e,n)=>{const r=t.getBody(),o=((s,a,i)=>{const l=X.fromRangeStart(s);if(s.collapsed)return l;{const c=X.fromRangeEnd(s);return i?lr(a,c).getOr(c):or(a,l).getOr(l)}})(t.selection.getRng(),r,n);return((s,a,i,l)=>{const c=Dr(s,l),u=Io(a,i,c);return Io(a,i,c).bind(vt(TT,s)).orThunk(()=>((f,m,b,g,v)=>{const h=Dr(f,v);return Nr(f,b,h).map(vt(Dr,f)).fold(()=>g.map(Cd),C=>Io(m,b,C).map(vt(NT,f,m,b,h,C)).filter(vt(AT,g))).filter(g1)})(s,a,i,u,l))})(n,vt(fa,t),r,o).bind(s=>L1(t,e,s))})(t,e,n).isSome(),I1=(t,e,n)=>!!ol(e)&&((r,o)=>{const s=o.selection.getRng(),a=r?X.fromRangeEnd(s):X.fromRangeStart(s);return!!Ce(o.selection.getSel().modify)&&(r&&vu(a)?b1(!0,o.selection,a):!(r||!yu(a))&&b1(!1,o.selection,a))})(t,e),zT=vt(I1,!0),UT=vt(I1,!1),Ed=(t,e,n)=>{if(ol(t)){const r=mp(t,e).getOrThunk(()=>{const o=t.selection.getRng();return e?X.fromRangeEnd(o):X.fromRangeStart(o)});return Io(vt(fa,t),t.getBody(),r).exists(o=>{const s=Cd(o);return ip(n,s).exists(a=>(Sd(t,a),!0))})}return!1},F1=(t,e)=>n=>ip(e,n).map(r=>()=>Sd(t,r)),j1=(t,e,n,r)=>{const o=t.getBody(),s=vt(fa,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,r)),tm(t),Io(s,o,X.fromRangeStart(t.selection.getRng())).map(cp).bind(F1(t,e)).each(Gn)}),t.nodeChanged()},pp=(t,e,n)=>{if(t.selection.isCollapsed()&&ol(t)){const r=X.fromRangeStart(t.selection.getRng());return((o,s,a,i)=>{const l=(f=o.getBody(),m=i.container(),_s(m,f)||f),c=vt(fa,o),u=Io(c,l,i);var f,m;return u.bind(f=>a?f.fold(ft(k.some(cp(f))),k.none,ft(k.some(Cd(f))),k.none):f.fold(k.none,ft(k.some(Cd(f))),k.none,ft(k.some(cp(f))))).map(F1(o,s)).getOrThunk(()=>{const f=Ga(a,l,i),m=f.bind(b=>Io(c,l,b));return xn(u,m,()=>Ds(c,l,i).bind(b=>{return xn(zn(g=b),Jr(g),(v,h)=>{const C=Dr(!0,v),S=Dr(!1,h);return or(g,C).forall(E=>E.isEqual(S))}).getOr(!0)?k.some(()=>{ua(o,a,D(b))}):k.none();var g})).getOrThunk(()=>m.bind(()=>f.map(b=>()=>{a?j1(o,s,i,b):j1(o,s,b,i)})))})})(t,e,n,r)}return k.none()},z1=(t,e)=>{const n=D(t.getBody()),r=D(t.selection.getStart()),o=ns(r,n);return Ms(o,e).fold(ft(o),s=>o.slice(0,s))},HT=t=>1===Kr(t),U1=(t,e)=>{const n=vt(ry,t);return rn(e,r=>n(r)?[r.dom]:[])},H1=t=>{const e=z1(n=t,r=>n.schema.isBlock(pe(r)));var n;return U1(t,e)},q1=(t,e)=>{const n=t.selection.getStart(),r=((o,s)=>{const a=s.parentElement;return Ve(s)&&!Zt(a)&&o.dom.isEmpty(a)})(t,n)||kf(D(n))?ny(n,e):((o,s)=>{const{caretContainer:a,caretPosition:i}=ey(s);return o.insertNode(a.dom),i})(t.selection.getRng(),e);t.selection.setRng(r.toRange())},$1=t=>at(t.startContainer),gp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=Wt(z1(r=t,o=>r.schema.isBlock(pe(o))||Kr(o)>1),HT);var r;return wo(n).bind(r=>{const o=X.fromRangeStart(t.selection.getRng());return Av(e,o,r.dom)&&!kf(r)?k.some(()=>((s,a,i,l)=>{const c=U1(a,l);if(0===c.length)ua(a,s,i);else{const u=ny(i.dom,c);a.selection.setRng(u.toRange())}})(e,t,r,n)):k.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&$1(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!Zt(o)&&ry(n,D(o))})(t,e)&&(n=>{return(o=>{const s=o.startContainer.parentNode,a=o.endContainer.parentNode;return!Zt(s)&&!Zt(a)&&s.isEqualNode(a)})(r=n)&&(o=>{const s=o.endContainer;return o.endOffset===(at(s)?s.length:s.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(e);var n})(n)){const r=H1(n);return k.some(()=>{tm(n),((o,s)=>{const a=te(s,H1(o));a.length>0&&q1(o,a)})(n,r)})}return k.none()})(t),Pl=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&($1(n)||e.dom.isEmpty(n.startContainer))&&!((t,e)=>In(t,n=>Ar(n.dom),n=>e.isBlock(pe(n))).isSome())(D((r=e).selection.getStart()),r.schema);var r})(t)&&q1(t,[]),!0),hp=(t,e,n)=>dt(n)?k.some(()=>{t._selectionOverrides.hideFakeCaret(),ua(t,e,D(n))}):k.none(),bp=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=r?bl:vl,a=dl(r?vn.Forwards:vn.Backwards,n.getBody(),n.selection.getRng());return o(a)?hp(n,r,a.getNode(!r)):k.from(Dr(r,a)).filter(i=>o(i)&&Mc(a,i)).bind(i=>hp(n,r,i.getNode(!r)))})(t,e):((n,r)=>{const o=n.selection.getNode();return To(o)?hp(n,r,o):k.none()})(t,e),vp=t=>zs(t??"").getOr(0),W1=(t,e)=>(t||"table"===pe(e)?"margin":"padding")+("rtl"===$(e,"direction")?"-right":"-left"),V1=t=>{const e=X1(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,ur(e,o=>{const s=W1(Gh(n),o),a=rt(o,s).map(vp).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&a>0})));var n},K1=t=>bu(t)||zi(t),X1=t=>Wt(wn(t.selection.getSelectedBlocks()),e=>!K1(e)&&!Mn(e).exists(K1)&&_o(e,n=>Gr(n.dom)||De(n.dom)).exists(n=>Gr(n.dom))),Y1=(t,e)=>{var n,r;const{dom:o}=t,s=Tk(t),a=null!==(r=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",i=vp(s),l=Gh(t);G(X1(t),c=>{((u,f,m,b,g,v)=>{const h=W1(m,D(v)),C=vp(u.getStyle(v,h));if("outdent"===f){const S=Math.max(0,C-b);u.setStyle(v,h,S?S+g:"")}else u.setStyle(v,h,C+b+g)})(o,e,l,i,a,c.dom)})},G1=t=>Y1(t,"outdent"),Q1=t=>{if(t.selection.isCollapsed()&&V1(t)){const e=t.dom,n=t.selection.getRng(),r=X.fromRangeStart(n),o=e.getParent(n.startContainer,e.isBlock);if(null!==o&&Kf(D(o),r,t.schema))return k.some(()=>G1(t))}return k.none()},J1=(t,e,n)=>Qn([Q1,sp,np,(r,o)=>pp(r,e,o),Zm,cm,ap,bp,tp,gp],r=>r(t,n)).filter(r=>t.selection.isEditable()),Z1=t=>void 0===t.touches||1!==t.touches.length?k.none():k.some(t.touches[0]),yp=(t,e)=>Jt(t,e.nodeName),KT=(t,e)=>!!at(e)||!!xt(e)&&!(yp(t.getBlockElements(),e)||Tr(e)||Gs(t,e)||wu(e)),XT=(t,e)=>{if(at(e)){if(0===e.data.length)return!0;if(/^\s+$/.test(e.data))return!e.nextSibling||yp(t,e.nextSibling)||wu(e.nextSibling)}return!1},tx=t=>t.dom.create(jn(t),rl(t)),YT=t=>{const e=t.dom,n=t.selection,r=t.schema,o=r.getBlockElements(),s=n.getStart(),a=t.getBody();let i,l,c=!1;const u=jn(t);if(!s||!xt(s))return;const f=a.nodeName.toLowerCase();if(!r.isValidChild(f,u.toLowerCase())||(E=o,A=a,Ne(sv(D(s),D(A)),O=>yp(E,O.dom))))return;var E,A;const m=n.getRng(),{startContainer:b,startOffset:g,endContainer:v,endOffset:h}=m,C=da(t);let S=a.firstChild;for(;S;)if(xt(S)&&IE(r,S),KT(r,S)){if(XT(o,S)){l=S,S=S.nextSibling,e.remove(l);continue}i||(i=tx(t),a.insertBefore(i,S),c=!0),l=S,S=S.nextSibling,i.appendChild(l)}else i=null,S=S.nextSibling;c&&C&&(m.setStart(b,g),m.setEnd(v,h),n.setRng(m),t.nodeChanged())},ex=(t,e,n)=>{const r=D(tx(t)),o=Hi();re(r,o),n(e,r);const s=document.createRange();return s.setStartBefore(o.dom),s.setEndBefore(o.dom),s},nx=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),GT=(t,e,n)=>function(r){const o=arguments,s=o[o.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return r;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(o[0])+'">'+t.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},rx=(t,e)=>{e.hasAttribute("data-mce-caret")&&(Cu(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},QT=(t,e)=>{const n=Ao(D(t.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void rx(t,n)):void(Ng(n)&&(rx(t,n),t.undoManager.add()))},ox=De,sx=(t,e,n)=>{const r=Bo(t.getBody()),o=vt(af,1===e?r.next:r.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!o(X.fromRangeStart(n))){const a=D((i=>{const l=i.dom.create(jn(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?zt(D(s),a):_t(D(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},ax=(t,e)=>((n,r)=>{const o=r?vn.Forwards:vn.Backwards,s=n.selection.getRng();return(a=o,i=n,l=s,O1(i,a,l,Rs,Os,ox)).orThunk(()=>(sx(n,o,s),k.none()));var a,i,l})(t,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return Ev(o)?!r:r})(t.selection,e)).exists(n=>(os(t,n),!0)),ix=(t,e)=>((n,r)=>{const o=r?1:-1,s=n.selection.getRng();return(a=o,i=n,l=s,D1(i,a,l,c=>Rs(c)||rv(c),c=>Os(c)||ov(c),ox)).orThunk(()=>(sx(n,o,s),k.none()));var a,i,l})(t,e).exists(n=>(os(t,n),!0)),lx=(t,e)=>B1(t,e,e?Os:Rs),kd=(t,e)=>rp(t,!e).map(n=>{const r=n.toRange(),o=t.selection.getRng();return e?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(os(t,n),!0)),JT=t=>At(["figcaption"],pe(t)),cx=(t,e)=>!!t.selection.isCollapsed()&&((n,r)=>{const o=D(n.getBody()),s=X.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const c=vt(ue,i);return _o(D(a.container()),u=>l.isBlock(pe(u)),c).filter(JT)})(s,o,n.schema).exists(()=>{if(a=o,l=s,r?S1(a.dom,l):w1(a.dom,l)){const a=ex(n,o,r?re:It);return n.selection.setRng(a),!0}var a,l;return!1})})(t,e),dx=(t,e)=>{return n=t,e?k.from(n.dom.getParent(n.selection.getNode(),"details")).map(o=>((s,a)=>{const i=s.selection.getRng(),l=X.fromRangeStart(i);return!(s.getBody().lastChild!==a||!S1(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,o)).getOr(!1):k.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(o=>k.from(n.dom.getParent(o,"details")).map(s=>((a,i,l)=>{const c=a.selection.getRng(),u=X.fromRangeStart(c);return!(a.getBody().firstChild!==i||!w1(l,u)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,o))).getOr(!1);var n},ux={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},fx=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,Ut=(t,...e)=>()=>t.apply(null,e),Ll=(t,e)=>{return Ze((r=e,rn(ee(t,s=>({...ux,...s})),o=>fx(o,r)?[o]:[])),n=>n.action());var r},mx=(t,e)=>{return Qn((r=e,rn(ee(t,s=>({...ux,...s})),o=>fx(o,r)?[o]:[])),n=>n.action());var r},px=(t,e)=>{const n=e?vn.Forwards:vn.Backwards,r=t.selection.getRng();return O1(t,n,r,bl,vl,To).exists(o=>(os(t,o),!0))},gx=(t,e)=>{const n=e?1:-1,r=t.selection.getRng();return D1(t,n,r,bl,vl,To).exists(o=>(os(t,o),!0))},hx=(t,e)=>B1(t,e,e?vl:bl),bx=Ro([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ml={...bx,none:t=>bx.none(t)},vx=(t,e,n)=>rn(Oe(t),r=>Be(r,e)?n(r)?[r]:[]:vx(r,e,n)),yx=(t,e)=>lo(t,"table",e),Cp=(t,e,n,r,o=Ie)=>{const s=1===r;if(!s&&n<=0)return Ml.first(t[0]);if(s&&n>=t.length-1)return Ml.last(t[t.length-1]);{const a=n+r,i=t[a];return o(i)?Ml.middle(e,i):Cp(t,e,a,r,o)}},Cx=(t,e)=>yx(t,e).bind(n=>{const r=vx(n,"th,td",Ie);return Ms(r,o=>ue(t,o)).map(o=>({index:o,all:r}))}),xx=(t,e,n,r,o)=>{const s=Fn(D(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,c)=>yn(i,(u,f)=>u.fold(()=>k.some(f),m=>{const b=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-c)),g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return k.some(g<b?f:m)}),k.none()))(Wt((i=t,rn(s,c=>{const u={left:(f=na(c.getBoundingClientRect())).left- -1,top:f.top- -1,right:f.right+-2,bottom:f.bottom+-2,width:f.width+-1,height:f.height+-1};var f;return[{x:u.left,y:i(u),cell:c},{x:u.right,y:i(u),cell:c}]})),i=>e(i,o)),r,o).map(i=>i.cell)},ZT=vt(xx,t=>t.bottom,(t,e)=>t.y<e),tR=vt(xx,t=>t.top,(t,e)=>t.y>e),wx=(t,e,n)=>{const r=t(e,n);return(o=r).breakType===Fo.Wrap&&0===o.positions.length||!Ve(n.getNode())&&(o=>o.breakType===Fo.Br&&1===o.positions.length)(r)?!((o,s,a)=>a.breakAt.exists(i=>o(s,i).breakAt.isSome()))(t,e,r):r.breakAt.isNone();var o},eR=vt(wx,Ol),nR=vt(wx,Dl),rR=(t,e,n,r)=>{const o=t.selection.getRng(),s=e?1:-1;return!(!ub()||!((a,i,l)=>{const c=X.fromRangeStart(i);return Qa(!a,l).exists(u=>u.isEqual(c))})(e,o,n)||(rs(s,t,n,!e,!1).each(a=>{os(t,a)}),0))},Sx=(t,e,n)=>{const r=((s,a)=>{const i=a.getNode(s);return Zo(i)?k.some(i):k.none()})(!!e,n),o=!1===e;r.fold(()=>os(t,n.toRange()),s=>Qa(o,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>os(t,n.toRange()),a=>{return i=e,c=s,void(l=t).undoManager.transact(()=>{const u=i?zt:_t,f=ex(l,D(c),u);os(l,f)});var i,l,c}))},oR=(t,e,n,r)=>{const o=t.selection.getRng(),s=X.fromRangeStart(o),a=t.getBody();if(!e&&eR(r,s)){const i=(l=a,(f=c=n,m=u=s,Pn(m.getClientRects()).bind(b=>ZT(f,b.left,b.top)).bind(b=>{return wd(Jr(g=b).map(v=>Ol(g,v).positions.concat(v)).getOr([]),m);var g})).orThunk(()=>Pn(u.getClientRects()).bind(f=>dp(C1(l,X.before(c)),f.left))).getOr(X.before(c)));return Sx(t,e,i),!0}var l,c,u,f,m;if(e&&nR(r,s)){const i=((l,c,u)=>((f,m)=>wo(m.getClientRects()).bind(b=>tR(f,b.left,b.top)).bind(b=>{return wd(zn(g=b).map(v=>[v].concat(Dl(g,v).positions)).getOr([]),m);var g}))(c,u).orThunk(()=>Pn(u.getClientRects()).bind(f=>dp(x1(l,X.after(c)),f.left))).getOr(X.after(c)))(a,n,s);return Sx(t,e,i),!0}return!1},Ex=(t,e,n)=>k.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(r=>k.from(t.dom.getParent(r,"table")).map(o=>n(t,e,o,r))).getOr(!1),kx=(t,e)=>Ex(t,e,rR),xp=(t,e)=>Ex(t,e,oR),_x=(t,e,n)=>n.fold(k.none,k.none,(r,o)=>{return(s=o,gs(s,F0)).map(a=>{return(t=>{const e=ni.getWin(t).dom,n=(o,s,a,i)=>Nf(e,o,s,a,i),r=t.match({domRange:s=>{const a=D(s.startContainer),i=D(s.endContainer);return u0(a,s.startOffset,i,s.endOffset)},relative:Z_,exact:u0});return((o,s)=>{var i;return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(u=>!1===u.collapsed).map(u=>gl.rtl(D(u.endContainer),u.endOffset,D(u.startContainer),u.startOffset)).getOrThunk(()=>c0(0,gl.ltr,c)):c0(0,gl.ltr,c)})(0,(i=o,s.match({domRange:c=>({ltr:ft(c),rtl:k.none}),relative:(c,u)=>({ltr:Vo(()=>l0(i,c,u)),rtl:Vo(()=>k.some(l0(i,u,c)))}),exact:(c,u,f,m)=>({ltr:Vo(()=>Nf(i,c,u,f,m)),rtl:Vo(()=>k.some(Nf(i,f,m,c,u)))})})))})(e,r).match({ltr:n,rtl:n})})(ni.exact(i=a,0,i,0));var i});var s},r=>(t.execCommand("mceTableInsertRowAfter"),Nx(t,e,r))),Nx=(t,e,n)=>{return _x(t,e,(o=Yr,Cx(r=n,void 0).fold(()=>Ml.none(r),s=>Cp(s.all,r,s.index,1,o))));var r,o},sR=(t,e,n)=>{return _x(t,e,(o=Yr,Cx(r=n,void 0).fold(()=>Ml.none(),s=>Cp(s.all,r,s.index,-1,o))));var r,o},Ax=(t,e)=>{const n=["table","li","dl"],r=D(t.getBody()),o=a=>{const i=pe(a);return ue(a,r)||At(n,i)},s=t.selection.getRng();return(a=D(e?s.endContainer:s.startContainer),i=o,((l,c,u=ke)=>u(c)?k.none():At(l,pe(c))?k.some(c):No(c,l.join(","),f=>Be(f,"table")||u(f)))(["td","th"],a,i)).map(a=>(yx(a,o).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?Nx:sR)(t,o,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},ho=(t,e)=>({container:t,offset:e}),_d=Re.DOM,Nd=t=>e=>t===e?-1:0,wp=(t,e,n)=>{if(at(t)&&e>=0)return k.some(ho(t,e));{const r=ea(_d);return k.from(r.backwards(t,e,Nd(t),n)).map(o=>ho(o.container,o.container.data.length))}},Sp=(t,e,n)=>{if(!at(t))return k.none();if(e>=0&&e<=t.data.length)return k.some(ho(t,e));{const o=ea(_d);return k.from(o.backwards(t,e,Nd(t),n)).bind(s=>Sp(s.container,e+s.container.data.length,n))}},Tx=(t,e,n)=>{if(!at(t))return k.none();const r=t.data;if(e<=r.length)return k.some(ho(t,e));{const o=ea(_d);return k.from(o.forwards(t,e,Nd(t),n)).bind(s=>Tx(s.container,e-r.length,n))}},Ep=(t,e,n,r,o)=>{const s=ea(t,(a=>i=>a.isBlock(i)||At(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i))(t));return k.from(s.backwards(e,n,r,o))},Rx=t=>hr(t.toString().replace(/\u00A0/g," ")),Ox=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),kp=(t,e)=>t.substring(e.length),Dx=(t,e,n,r=0)=>{return(o=D(e.startContainer),lo(o,j0)).fold(()=>((s,a,i,l=0)=>{if(!(c=a).collapsed||!at(c.startContainer))return k.none();var c;const u={text:"",offset:0},f=s.getParent(a.startContainer,s.isBlock)||s.getRoot();return Ep(s,a.startContainer,a.startOffset,(m,b,g)=>(u.text=g+u.text,u.offset+=b,((v,h,C)=>{let S;const E=C.charAt(0);for(S=h-1;S>=0;S--){const A=v.charAt(S);if(Ox(A))return k.none();if(E===A&&Ye(v,C,S,h))break}return k.some(S)})(u.text,u.offset,i).getOr(b)),f).bind(m=>{const b=a.cloneRange();if(b.setStart(m.container,m.offset),b.setEnd(a.endContainer,a.endOffset),b.collapsed)return k.none();const g=Rx(b);return 0!==g.lastIndexOf(i)||kp(g,i).length<l?k.none():k.some({text:kp(g,i),range:b,trigger:i})})})(t,e,n,r),s=>{const a=t.createRng();a.selectNode(s.dom);const i=Rx(a);return k.some({range:a,text:kp(i,n),trigger:n})});var o},Bx=t=>{if(3===t.nodeType)return ho(t,t.data.length);{const e=t.childNodes;return e.length>0?Bx(e[e.length-1]):ho(t,e.length)}},Px=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?Px(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?Bx(n[n.length-1]):ho(t,e)},Lx=(t,e,n,r={})=>{var o;const s=e(),a=null!==(o=t.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=Wt(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>(u=>f=>{const m=Px(f.startContainer,f.startOffset);return!((b,g)=>{var v;const h=null!==(v=b.getParent(g.container,b.isBlock))&&void 0!==v?v:b.getRoot();return Ep(b,g.container,g.offset,(C,S)=>0===S?-1:S,h).filter(C=>{const S=C.container.data.charAt(C.offset-1);return!Ox(S)}).isSome()})(u,m)})(t.dom))(n.range,a,n.text));if(0===i.length)return k.none();const l=Promise.all(ee(i,c=>c.fetch(n.text,c.maxResults,r).then(u=>({matchText:n.text,items:u,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return k.some({lookupData:l,context:n})};var jo;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(jo||(jo={}));const _p=(t,e,n)=>t.stype===jo.Error?e(t.serror):n(t.svalue),di=t=>({stype:jo.Value,svalue:t}),Il=t=>({stype:jo.Error,serror:t}),aR=_p,Np=t=>Gt(t)&&on(t).length>100?" removed due to size":JSON.stringify(t,null,2),Ad=(t,e)=>Il([{path:t,getErrorInfo:e}]),Mx=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const s in o)Jt(o,s)&&(n[s]=t(n[s],o[s]))}return n},Ap=Mx((t,e)=>Lt(t)&&Lt(e)?Ap(t,e):e),Ix=(Mx((t,e)=>e),t=>({tag:"defaultedThunk",process:ft(t)})),Fx=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Tp=t=>({extract:(e,n)=>{return(r=t(n)).stype===jo.Error?Ad(e,ft(r.serror)):r;var r},toString:ft("val")}),cR=Tp(di),jx=(t,e,n,r)=>r(Te(t,e).getOrThunk(()=>n(t))),dR=(t,e,n,r,o)=>{const s=i=>o.extract(e.concat([r]),i),a=i=>i.fold(()=>di(k.none()),l=>{return(u=o.extract(e.concat([r]),l)).stype===jo.Value?{stype:jo.Value,svalue:(0,k.some)(u.svalue)}:u;var u});switch(t.tag){case"required":return i=e,u=s,Te(l=n,c=r).fold(()=>{return m=c,b=l,Ad(i,()=>'Could not find valid *required* value for "'+m+'" in '+Np(b));var m,b},u);case"defaultedThunk":return jx(n,r,t.process,s);case"option":return((i,l,c)=>c(Te(i,l)))(n,r,a);case"defaultedOptionThunk":return((i,l,c,u)=>u(Te(i,l).map(f=>!0===f?c(i):f)))(n,r,t.process,a);case"mergeWithThunk":return jx(n,r,ft({}),i=>{const l=Ap(t.process(n),i);return s(l)})}var i,l,c,u},Rp=t=>({extract:(e,n)=>((r,o,s)=>{const a={},i=[];for(const l of s)Fx(l,(c,u,f,m)=>{const b=dR(f,r,o,c,m);aR(b,g=>{i.push(...g)},g=>{a[u]=g})},(c,u)=>{a[c]=u(o)});return i.length>0?Il(i):di(a)})(e,n,t),toString:()=>"obj{\n"+ee(t,n=>Fx(n,(r,o,s,a)=>r+" -> "+a.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),zx=t=>({extract:(e,n)=>(t=>{const e=(r=>{const o=[],s=[];return G(r,a=>{_p(a,i=>s.push(i),i=>o.push(i))}),{values:o,errors:s}})(t);return e.errors.length>0?(n=e.errors,Dn(Il,Jl)(n)):di(e.values);var n})(ee(n,(o,s)=>t.extract(e.concat(["["+s+"]"]),o))),toString:()=>"array("+t.toString()+")"}),Ux=(t,e)=>((t,e)=>({extract:(n,r)=>Te(r,t).fold(()=>{return s=t,Ad(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},o=>{return s=n,a=r,Te(i=e,l=o).fold(()=>{return u=i,f=l,Ad(s,()=>'The chosen schema: "'+f+'" did not exist in branches: '+Np(u));var u,f},c=>c.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+on(e)}))(t,Ho(e,Rp)),fR=ft(cR),Td=(t,e)=>Tp(n=>{const r=typeof n;return t(n)?di(n):Il(`Expected type: ${e} but got: ${r}`)}),mR=Td(x,"number"),Rd=Td(kt,"string"),pR=Td(Un,"boolean"),Op=Td(Ce,"function"),Fl=(t,e,n,r)=>({tag:"field",key:t,newKey:e,presence:n,prop:r}),Hx=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),qx=(t,e)=>Fl(t,t,{tag:"required",process:{}},e),$x=t=>qx(t,Rd),Wx=t=>qx(t,Op),Dp=(t,e)=>Fl(t,t,{tag:"option",process:{}},e),Od=t=>Dp(t,Rd),ui=(t,e,n)=>Fl(t,t,Ix(e),n),Vx=(t,e)=>ui(t,e,mR),Kx=(t,e,n)=>{return ui(t,e,(r=n,o=s=>At(r,s)?rr.value(s):rr.error(`Unsupported value: "${s}", choose one of "${r.join(", ")}".`),Tp(s=>o(s).fold(Il,di))));var r,o},Bp=(t,e)=>ui(t,e,pR),Pp=(t,e)=>ui(t,e,Op),gR=$x("type"),hR=Wx("fetch"),Lp=Wx("onAction"),bR=Pp("onSetup",()=>St),vR=Od("text"),yR=Od("icon"),CR=Od("tooltip"),xR=Od("label"),wR=Bp("active",!1),SR=Bp("enabled",!0),Xx=Bp("primary",!1),jl=t=>ui("type",t,Rd),ER=Rp([gR,$x("trigger"),Vx("minChars",1),((t,e)=>Fl(t,t,Ix(1),fR()))("columns"),Vx("maxResults",10),Dp("matches",Op),hR,Lp,(Yx=Rd,ui("highlightOn",[],zx(Yx)))]);var Yx;const Mp=[SR,CR,yR,vR,bR],Gx=[wR].concat(Mp),kR=[Pp("predicate",ke),Kx("scope","node",["node","editor"]),Kx("position","selection",["node","selection","line"])],_R=Mp.concat([jl("contextformbutton"),Xx,Lp,Hx("original",he)]),NR=Gx.concat([jl("contextformbutton"),Xx,Lp,Hx("original",he)]),AR=Mp.concat([jl("contextformbutton")]),TR=Gx.concat([jl("contextformtogglebutton")]),RR=Ux("type",{contextformbutton:_R,contextformtogglebutton:NR});Rp([jl("contextform"),Pp("initValue",ft("")),xR,((t,e)=>Fl(t,t,{tag:"required",process:{}},zx(e)))("commands",RR),Dp("launch",Ux("type",{contextformbutton:AR,contextformtogglebutton:TR}))].concat(kR));const DR=t=>{const e=Ss(),n=bn(!1),r=e.isSet,o=()=>{r()&&(Je(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=Vo(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Ho(e,s=>{return(a=s,((t,e,n)=>{return r=(i=e.extract([t],a=n)).stype===jo.Error?{stype:jo.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,_p(r,rr.error,rr.value);var a,i,r})("Autocompleter",ER,{trigger:a.ch,...a})).fold(i=>{throw new Error("Errors: \n"+(c=>{const u=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:ft("... (only showing first ten failures)")}]):c;return ee(u,f=>"Failed path: ("+f.path.join(" > ")+")\n"+f.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+Np(l.input));var l},he);var a}),r=qn($o(n,s=>s.trigger)),o=Wo(n);return{dataset:n,triggers:r,lookupByTrigger:s=>Wt(o,a=>a.trigger===s)}})(t)),a=i=>{var l;(l=i,e.get().map(c=>Dx(t.dom,t.selection.getRng(),c.trigger).bind(u=>Lx(t,s,u,l))).getOrThunk(()=>((c,u)=>{const f=u(),m=c.selection.getRng();return(b=c.dom,g=m,v=f,Qn(v.triggers,h=>Dx(b,g,h))).bind(b=>Lx(c,u,b));var b,g,v})(t,s))).fold(o,l=>{var c,f;c=l.context,r()||(f=c.range,Je(t).autocompleter.addDecoration(f),e.set({trigger:c.trigger,matchLength:c.text.length})),l.lookupData.then(c=>{e.get().map(u=>{const f=l.context;u.trigger===f.trigger&&(f.text.length-u.matchLength>=10?o():(e.set({...u,matchLength:f.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:c}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:c}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const c=Gt(l)?l.fetchOptions:{};a(c)}),t.addCommand("mceAutocompleterClose",o),((i,l)=>{const c=Uu(l.load,50);i.on("keypress compositionend",u=>{27!==u.which&&c.throttle()}),i.on("keydown",u=>{const f=u.which;8===f?c.throttle():27===f&&l.cancelIfNecessary()}),i.on("remove",c.cancel)})(t,{cancelIfNecessary:o,load:a})},BR=Ln().browser.isSafari(),Qx=t=>vs(D(t)),Jx=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},Dd=(t,e)=>k.from(t.getParent(e.container(),"details")),Zx=(t,e)=>Dd(t,e).isSome(),tw=(t,e)=>{const n=e.getNode();Me(n)||t.selection.setCursorLocation(n,e.offset())},ew=(t,e,n)=>{const r=t.dom.getParent(e.container(),"details");if(r&&!r.open){const o=t.dom.select("summary",r)[0];o&&(n?zn(o):Jr(o)).each(s=>tw(t,s))}else tw(t,e)},nw=(t,e,n)=>{const{dom:r,selection:o}=t,s=t.getBody();if("character"===n){const a=X.fromRangeStart(o.getRng()),i=r.getParent(a.container(),r.isBlock),l=Dd(r,a),c=i&&r.isEmpty(i),u=Zt(i?.previousSibling),f=Zt(i?.nextSibling);return!!(c&&(e?f:u)&&Ga(!e,s,a).exists(m=>Zx(r,m)&&!La(l,Dd(r,m))))||Ga(e,s,a).fold(ke,m=>{const b=Dd(r,m);if(Zx(r,m)&&!La(l,b)){if(e||ew(t,m,!1),i&&c){if(e&&u||!e&&f)return!0;ew(t,m,e),t.dom.remove(i)}return!0}return!1})}return!1},ha=(t,e,n)=>{return o=e,s=n,((a,i)=>{const l=k.from(a.getParent(i.startContainer,"details")),c=k.from(a.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const u=l.bind(f=>k.from(a.select("summary",f)[0]));return k.some({startSummary:u,startDetails:l,endDetails:c})}return k.none()})((r=t).dom,r.selection.getRng()).fold(()=>nw(r,o,s),a=>((t,e,n,r)=>{const o=t.selection.getRng(),s=X.fromRangeStart(o),a=t.getBody();return"selection"===r?((i,l)=>{const c=l.startSummary.exists(m=>m.contains(i.startContainer)),u=l.startSummary.exists(m=>m.contains(i.endContainer)),f=l.startDetails.forall(m=>l.endDetails.forall(b=>m!==b));return(c||u)&&!(c&&u)||f})(o,e):n?(i=s,e.startSummary.exists(c=>{return u=i,Jr(f=c).exists(m=>Ve(m.getNode())&&lr(f,m).exists(b=>b.isEqual(u))||m.isEqual(u));var u,f})||((i,l,c)=>c.startDetails.exists(u=>or(i,l).forall(f=>!u.contains(f.container()))))(a,s,e)):((i,l)=>l.startSummary.exists(c=>{return u=i,zn(c).exists(m=>m.isEqual(u));var u}))(s,e)||((i,l)=>l.startDetails.exists(c=>lr(c,i).forall(u=>l.startSummary.exists(f=>!f.contains(i.container())&&f.contains(u.container())))))(s,e);var i})(r,a,o,s)||nw(r,o,s))||BR&&((r,o,s)=>{const a=r.selection,i=a.getNode(),l=a.getRng(),c=X.fromRangeStart(l);return!!CE(i)&&("selection"===s&&Jx(l,i)||Av(o,c,i)?Qx(i):r.undoManager.transact(()=>{const u=a.getSel();let{anchorNode:f,anchorOffset:m,focusNode:b,focusOffset:g}=u??{};const v=()=>{dt(f)&&dt(m)&&dt(b)&&dt(g)&&u?.setBaseAndExtent(f,m,b,g)},h=(S,E)=>{G(S.childNodes,A=>{fl(A)&&E.appendChild(A)})},C=r.dom.create("span",{"data-mce-bogus":"1"});h(i,C),i.appendChild(C),v(),"word"!==s&&"line"!==s||null==u||u.modify("extend",o?"right":"left",s),!a.isCollapsed()&&Jx(a.getRng(),C)?Qx(i):(r.execCommand(o?"ForwardDelete":"Delete"),f=u?.anchorNode,m=u?.anchorOffset,b=u?.focusNode,g=u?.focusOffset,h(C,i),v()),r.dom.remove(C)}),!0)})(t,e,n)?k.some(St):k.none();var r,o,s},rw=t=>(e,n,r={})=>{const o=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:St,inputType:n},a=th(new InputEvent(t));return e.dispatch(t,{...a,...s,...r})},zl=rw("input"),Bd=rw("beforeinput"),ow=Ln(),sw=ow.os,aw=sw.isMacOS()||sw.isiOS(),LR=ow.browser.isFirefox(),fi=(t,e)=>{const n=t.dom,r=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(xt(a)||at(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(gn),e.firstChild)}const o=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new un(e,e);let a,i=e;for(;a=s.current();){if(at(a)){o.setStart(a,0),o.setEnd(a,0);break}if(r[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}i=a,a=s.next()}a||(o.setStart(i,0),o.setEnd(i,0))}else Ve(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)):(o.setStart(e,0),o.setEnd(e,0));t.selection.setRng(o),hl(t,o)},Ul=(t,e)=>{const n=t.getRoot();let r,o=e;for(;o!==n&&o&&"false"!==t.getContentEditable(o);){if("true"===t.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},Ip=t=>k.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Fp=t=>{t.innerHTML='<br data-mce-bogus="1">'},Hl=(t,e)=>{jn(t).toLowerCase()===e.tagName.toLowerCase()&&((n,r,o)=>{const s=n.dom;k.from(o.style).map(s.parseStyle).each(u=>{const f={...ut(D(r)),...u};s.setStyles(r,f)});const a=k.from(o.class).map(u=>u.split(/\s+/)),i=k.from(r.className).map(u=>Wt(u.split(/\s+/),f=>""!==f));xn(a,i,(u,f)=>{const m=Wt(f,g=>!At(u,g)),b=[...u,...m];s.setAttrib(r,"class",b.join(" "))});const l=["style","class"],c=Cr(o,(u,f)=>!At(l,f));s.setAttribs(r,c)})(t,e,rl(t))},iw=(t,e,n,r,o=!0,s,a)=>{const i=t.dom,l=t.schema,c=jn(t),u=n?n.nodeName.toUpperCase():"";let f=e;const m=l.getTextInlineElements();let b;b=s||"TABLE"===u||"HR"===u?i.create(s||c,a||{}):n.cloneNode(!1);let g=b;if(o){do{if(m[f.nodeName]){if(Ar(f)||Tr(f))continue;const v=f.cloneNode(!1);i.setAttrib(v,"id",""),b.hasChildNodes()?(v.appendChild(b.firstChild),b.appendChild(v)):(g=v,b.appendChild(v))}}while((f=f.parentNode)&&f!==r)}else i.setAttrib(b,"style",null),i.setAttrib(b,"class",null);return Hl(t,b),Fp(g),b},lw=(t,e)=>{const n=t?.parentNode;return dt(n)&&n.nodeName===e},cw=t=>dt(t)&&/^(OL|UL|LI)$/.test(t.nodeName),jp=t=>dt(t)&&/^(LI|DT|DD)$/.test(t.nodeName),Pd=t=>{const e=t.parentNode;return jp(e)?e:t},Ld=(t,e,n)=>{let r=t[n?"firstChild":"lastChild"];for(;r&&!xt(r);)r=r[n?"nextSibling":"previousSibling"];return r===e},dw=t=>yn($o(ut(D(t)),(e,n)=>`${n}: ${e};`),(e,n)=>e+n,""),MR=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),zp=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Up=(t,e)=>dt(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Hp=(t,e,n)=>at(e)?t?1===n&&e.data.charAt(n-1)===hn?0:n:n===e.data.length-1&&e.data.charAt(n)===hn?e.data.length:n:n,uw={insert:(t,e)=>{let n,r,o,s,a=!1;const i=t.dom,l=t.schema.getNonEmptyElements(),c=t.selection.getRng(),u=jn(t),f=D(c.startContainer),m=Ge(f,c.startOffset),b=m.exists(H=>ms(H)&&!Yr(H)),g=c.collapsed&&b,v=(H,W)=>iw(t,n,N,A,yk(t),H,W),h=H=>{const W=Hp(H,n,r);if(at(n)&&(H?W>0:W<n.data.length))return!1;if(n.parentNode===N&&a&&!H||H&&xt(n)&&n===N.firstChild)return!0;if(zp(n,"TABLE")||zp(n,"HR"))return a&&!H||!a&&H;const P=new un(n,N);let I;for(at(n)&&(H&&0===W?P.prev():H||W!==n.data.length||P.next());I=P.current();){if(xt(I)){if(!I.getAttribute("data-mce-bogus")){const q=I.nodeName.toLowerCase();if(l[q]&&"br"!==q)return!1}}else if(at(I)&&!Cs(I.data))return!1;H?P.prev():P.next()}return!0},C=()=>{let H;return H=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==O?v(u):v(),((W,P)=>{const I=Ck(W);return!Se(P)&&(kt(I)?At(lt.explode(I),P.nodeName.toLowerCase()):I)})(t,s)&&Up(i,s)&&i.isEmpty(N,void 0,{includeZwsp:!0})?H=i.split(s,N):i.insertAfter(H,N),fi(t,H),H};Kc(i,c).each(H=>{c.setStart(H.startContainer,H.startOffset),c.setEnd(H.endContainer,H.endOffset)}),n=c.startContainer,r=c.startOffset;const S=!(!e||!e.shiftKey),E=!(!e||!e.ctrlKey);xt(n)&&n.hasChildNodes()&&!g&&(a=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=a&&at(n)?n.data.length:0);const A=Ul(i,n);if(!A||((H,W)=>{const P=H.dom.getParent(W,"ol,ul,dl");return null!==P&&"false"===H.dom.getContentEditableParent(P)})(t,n))return;S||(n=((H,W,P,I,q)=>{var Q,mt;const ct=H.dom,Rt=null!==(Q=Ul(ct,I))&&void 0!==Q?Q:ct.getRoot();let Nt=ct.getParent(I,ct.isBlock);if(!Nt||!Up(ct,Nt)){if(Nt=Nt||Rt,!Nt.hasChildNodes()){const yt=ct.create(W);return Hl(H,yt),Nt.appendChild(yt),P.setStart(yt,0),P.setEnd(yt,0),yt}let Mt,Dt=I;for(;Dt&&Dt.parentNode!==Nt;)Dt=Dt.parentNode;for(;Dt&&!ct.isBlock(Dt);)Mt=Dt,Dt=Dt.previousSibling;const gt=null===(mt=Mt?.parentElement)||void 0===mt?void 0:mt.nodeName;if(Mt&&gt&&H.schema.isValidChild(gt,W.toLowerCase())){const yt=Mt.parentNode,$t=ct.create(W);for(Hl(H,$t),yt.insertBefore($t,Mt),Dt=Mt;Dt&&!ct.isBlock(Dt);){const L=Dt.nextSibling;$t.appendChild(Dt),Dt=L}P.setStart(I,q),P.setEnd(I,q)}}return I})(t,u,c,n,r));let N=i.getParent(n,i.isBlock)||i.getRoot();s=dt(N?.parentNode)?i.getParent(N.parentNode,i.isBlock):null,o=N?N.nodeName.toUpperCase():"";const O=s?s.nodeName.toUpperCase():"";if("LI"!==O||E||(N=s,s=s.parentNode,o=O),xt(s)&&(H=t,P=N,!S&&P.nodeName.toLowerCase()===jn(H)&&H.dom.isEmpty(P)&&((I,q,Q)=>{let mt=q;for(;mt&&mt!==I&&Zt(mt.nextSibling);){const Rt=mt.parentElement;if(!Rt||(ct=Rt,!Jt(H.schema.getTextBlockElements(),ct.nodeName.toLowerCase())))return pu(Rt);mt=Rt}var ct;return!1})(H.getBody(),P)))return((H,W,P)=>{var I,q,Q;const mt=W(jn(H)),ct=H.dom.getParent(P,pu);ct&&(H.dom.insertAfter(mt,ct),fi(H,mt),(null!==(Q=null===(q=null===(I=P.parentElement)||void 0===I?void 0:I.childNodes)||void 0===q?void 0:q.length)&&void 0!==Q?Q:0)>1&&H.dom.remove(P))})(t,v,N);var H,P;if(/^(LI|DT|DD)$/.test(o)&&xt(s)&&i.isEmpty(N))return void((H,W,P,I,q)=>{const Q=H.dom,mt=H.selection.getRng(),ct=P.parentNode;if(P===H.getBody()||!ct)return;var Rt;cw(Rt=P)&&cw(Rt.parentNode)&&(q="LI");const Nt=jp(I)?dw(I):void 0;let Mt=jp(I)&&Nt?W(q,{style:dw(I)}):W(q);if(Ld(P,I,!0)&&Ld(P,I,!1))if(lw(P,"LI")){const Dt=Pd(P);Q.insertAfter(Mt,Dt),(null===(yt=(gt=P).parentNode)||void 0===yt?void 0:yt.firstChild)===gt?Q.remove(Dt):Q.remove(P)}else Q.replace(Mt,P);else if(Ld(P,I,!0))lw(P,"LI")?(Q.insertAfter(Mt,Pd(P)),Mt.appendChild(Q.doc.createTextNode(" ")),Mt.appendChild(P)):ct.insertBefore(Mt,P),Q.remove(I);else if(Ld(P,I,!1))Q.insertAfter(Mt,Pd(P)),Q.remove(I);else{P=Pd(P);const Dt=mt.cloneRange();Dt.setStartAfter(I),Dt.setEndAfter(P);const gt=Dt.extractContents();if("LI"===q&&((yt,$t)=>yt.firstChild&&"LI"===yt.firstChild.nodeName)(gt)){const yt=Wt(ee(Mt.children,D),vo(Eo("br")));Mt=gt.firstChild,Q.insertAfter(gt,P),G(yt,$t=>It(D(Mt),$t)),Nt&&Mt.setAttribute("style",Nt)}else Q.insertAfter(gt,P),Q.insertAfter(Mt,P);Q.remove(I)}var gt,yt;fi(H,Mt)})(t,v,s,N,u);if(!(g||N!==t.getBody()&&Up(i,N)))return;const M=N.parentNode;let j;if(g)j=v(u),m.fold(()=>{re(f,D(j))},H=>{_t(H,D(j))}),t.selection.setCursorLocation(j,0);else if(qa(N))j=Cu(N),i.isEmpty(N)&&Fp(N),Hl(t,j),fi(t,j);else if(h(!1))j=C();else if(h(!0)&&M){j=M.insertBefore(v(),N);const H=D(c.startContainer).dom.hasChildNodes()&&c.collapsed;fi(t,zp(N,"HR")||H?j:N)}else{const H=(P=>{const I=P.cloneRange();return I.setStart(P.startContainer,Hp(!0,P.startContainer,P.startOffset)),I.setEnd(P.endContainer,Hp(!1,P.endContainer,P.endOffset)),I})(c).cloneRange();H.setEndAfter(N);const W=H.extractContents();(P=>{G(Cg(D(P),tr),I=>{const q=I.dom;q.nodeValue=hr(q.data)})})(W),(P=>{let I=P;do{at(I)&&(I.data=I.data.replace(/^[\r\n]+/,"")),I=I.firstChild}while(I)})(W),j=W.firstChild,i.insertAfter(W,N),((P,I,q)=>{var Q;const mt=[];if(!q)return;let ct=q;for(;ct=ct.firstChild;){if(P.isBlock(ct))return;xt(ct)&&!I[ct.nodeName.toLowerCase()]&&mt.push(ct)}let Rt=mt.length;for(;Rt--;)ct=mt[Rt],(!ct.hasChildNodes()||ct.firstChild===ct.lastChild&&""===(null===(Q=ct.firstChild)||void 0===Q?void 0:Q.nodeValue)||MR(P,ct))&&P.remove(ct)})(i,l,j),((P,I)=>{I.normalize();const q=I.lastChild;(!q||xt(q)&&/^(left|right)$/gi.test(P.getStyle(q,"float",!0)))&&P.add(I,"br")})(i,N),i.isEmpty(N)&&Fp(N),j.normalize(),i.isEmpty(j)?(i.remove(j),C()):(Hl(t,j),fi(t,j))}i.setAttrib(j,"id",""),t.dispatch("NewBlock",{newBlock:j})},fakeEventName:"insertParagraph"},fw=(t,e,n)=>{const r=t.dom.createRng();n?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),t.selection.setRng(r),hl(t,r)},IR=(t,e)=>{const n=ot("br");_t(D(e),n),t.undoManager.add()},FR=(t,e)=>{jR(t.getBody(),e)||zt(D(e),ot("br"));const n=ot("br");zt(D(e),n),fw(t,n.dom,!1),t.undoManager.add()},jR=(t,e)=>{return n=X.after(e),!!Ve(n.getNode())||or(t,X.after(e)).map(r=>Ve(r.getNode())).getOr(!1);var n},mw=t=>t&&"A"===t.nodeName&&"href"in t,zR=t=>t.fold(ke,mw,mw,ke),UR=(t,e)=>{e.fold(St,vt(IR,t),vt(FR,t),St)},pw={insert:(t,e)=>{const n=(r=>{const o=vt(fa,r),s=X.fromRangeStart(r.selection.getRng());return Io(o,r.getBody(),s).filter(zR)})(t);n.isSome()?n.each(vt(UR,t)):((r,o)=>{const a=r.dom,i=r.selection.getRng();let l,c=!1;Kc(a,i).each(h=>{i.setStart(h.startContainer,h.startOffset),i.setEnd(h.endContainer,h.endOffset)});let u=i.startOffset,f=i.startContainer;if(xt(f)&&f.hasChildNodes()){const h=u>f.childNodes.length-1;f=f.childNodes[Math.min(u,f.childNodes.length-1)]||f,u=h&&at(f)?f.data.length:0}let m=a.getParent(f,a.isBlock);const b=m&&m.parentNode?a.getParent(m.parentNode,a.isBlock):null;"LI"!==(b?b.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(m=b),at(f)&&u>=f.data.length&&(((h,C,S)=>{const E=new un(C,S);let A;const N=h.getNonEmptyElements();for(;A=E.next();)if(N[A.nodeName.toLowerCase()]||at(A)&&A.length>0)return!0;return!1})(r.schema,f,m||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),Vu(a,i,l),fw(r,l,c),r.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},gw=(t,e)=>Ip(t).filter(n=>e.length>0&&Be(D(n),e)).isSome(),br=Ro([{br:[]},{block:[]},{none:[]}]),HR=(t,e)=>{return gw(n=t,vk(n));var n},hw=t=>(e,n)=>Ip(e).filter(o=>zi(D(o))).isSome()===t,bw=(t,e)=>(n,r)=>Ip(n).fold(ft(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,qR=t=>{const e=Ul(t.dom,t.selection.getStart());return Se(e)},ql=t=>bw("pre",t),Md=t=>(e,n)=>gk(e)===t,$R=(t,e)=>{return gw(n=t,bk(n));var n},Id=(t,e)=>e,WR=t=>{const e=jn(t),n=Ul(t.dom,t.selection.getStart());return dt(n)&&t.schema.isValidChild(n.nodeName,e)},VR=t=>{const e=t.selection.getRng(),n=D(e.startContainer),r=Ge(n,e.startOffset).map(o=>ms(o)&&!Yr(o));return e.collapsed&&r.getOr(!0)},Mr=(t,e)=>(n,r)=>yn(t,(o,s)=>o&&s(n,r),!0)?k.some(e):k.none(),Fd=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),dt(n)&&Bd(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),dt(n)&&zl(e,t.fakeEventName))},vw=(t,e)=>{const n=()=>Fd(pw,t,e),r=()=>Fd(uw,t,e),o=(s=t,a=e,f1([Mr([HR],br.none()),Mr([ql(!0),qR],br.none()),Mr([bw("summary",!0)],br.br()),Mr([ql(!0),Md(!1),Id],br.br()),Mr([ql(!0),Md(!1)],br.block()),Mr([ql(!0),Md(!0),Id],br.block()),Mr([ql(!0),Md(!0)],br.br()),Mr([hw(!0),Id],br.br()),Mr([hw(!0)],br.block()),Mr([$R],br.br()),Mr([Id],br.br()),Mr([WR],br.block()),Mr([VR],br.block())],[s,!(!a||!a.shiftKey)]).getOr(br.none()));var s,a;switch(hk(t)){case"linebreak":o.fold(n,n,St);break;case"block":o.fold(r,r,St);break;case"invert":o.fold(r,n,St);break;default:o.fold(n,r,St)}},yw=Ln(),KR=yw.os.isiOS()&&yw.browser.isSafari(),Cw=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{vw(t,e)}))},XR=Ln(),xw=t=>t.stopImmediatePropagation(),ww=t=>t.keyCode===ht.PAGE_UP||t.keyCode===ht.PAGE_DOWN,Sw=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",xw,!0):!n&&t.get()&&e.off("NodeChange",xw),t.set(n)},Ew=(t,e)=>{const n=e.container(),r=e.offset();return at(n)?(n.insertData(r,t),k.some(X(n,r+t.length))):Lc(e).map(o=>{const s=Xt(t);return e.isAtEnd()?zt(o,s):_t(o,s),X(s.dom,t.length)})},kw=vt(Ew,gn),_w=vt(Ew," "),Nw=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},YR=t=>{const e=X.fromRangeStart(t.selection.getRng()),n=D(t.getBody());if(t.selection.isCollapsed()){const r=vt(fa,t),o=X.fromRangeStart(t.selection.getRng());return Io(r,t.getBody(),o).bind((s=>a=>a.fold(i=>lr(s.dom,X.before(i)),i=>zn(i),i=>Jr(i),i=>or(s.dom,X.after(i))))(n)).map(s=>()=>((a,i,l)=>c=>gv(a,c,l)?kw(i):_w(i))(n,e,t.schema)(s).each(Nw(t)))}return k.none()},GR=t=>{return fs(be.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const r=D(t.getBody());var o,s,a;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(o=r,s=X.fromRangeStart(t.selection.getRng()),a=t.schema,gv(o,s,a)?kw(s):_w(s)).each(Nw(t))});var e,n},QR=t=>__(t)?[{keyCode:ht.TAB,action:Ut(Ax,t,!0)},{keyCode:ht.TAB,shiftKey:!0,action:Ut(Ax,t,!1)}]:[],JR=t=>{if(t.addShortcut("Meta+P","","mcePrint"),DR(t),Mo(t))return bn(null);{const e=(t=>{const e=bn(null),n=vt(fa,t);return t.on("NodeChange",r=>{ol(t)&&(((o,s,a)=>{const i=ee(Fn(D(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),u=>u.dom),l=Wt(i,o),c=Wt(a,o);G(te(l,c),vt(P1,!1)),G(te(c,l),vt(P1,!0))})(n,t.dom,r.parents),((o,s)=>{const a=s.get();if(o.selection.isCollapsed()&&!o.composing&&a){const i=X.fromRangeStart(o.selection.getRng());X.isTextPosition(i)&&!vu(l=i)&&!yu(l)&&(Sd(o,((t,e)=>{return X.isTextPosition(e)?(r=e,sb(n=t)&&r.container()===n?((o,s)=>{const a=ib(o.data.substr(0,s.offset())),i=ib(o.data.substr(s.offset()));return(a.text+i.text).length>0?(lb(o),X(o,s.offset()-a.count)):s})(n,r):cb(n,r)):((n,r)=>r.container()===n.parentNode?((o,s)=>{const a=s.container(),i=((l,c)=>{const u=de(l,c);return-1===u?k.none():k.some(u)})(Cn(a.childNodes),o).map(l=>l<s.offset()?X(a,s.offset()-1):s).getOr(s);return oa(o),i})(n,r):cb(n,r))(t,e);var n,r})(a,i)),s.set(null))}var l})(t,e),((o,s,a,i)=>{if(s.selection.isCollapsed()){const l=Wt(i,o);G(l,c=>{const u=X.fromRangeStart(s.selection.getRng());Io(o,s.getBody(),u).bind(f=>L1(s,a,f))})}})(n,t,e,r.parents))}),e})(t);return(n=t).on("beforeinput",r=>{n.selection.isEditable()&&!Ne(r.getTargetRanges(),o=>!B0(n.dom,o))||r.preventDefault()}),(n=>{n.on("keyup compositionstart",vt(QT,n))})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=be.os.isMacOS()||be.os.isiOS();Ll([{keyCode:ht.RIGHT,action:Ut(ax,s,!0)},{keyCode:ht.LEFT,action:Ut(ax,s,!1)},{keyCode:ht.UP,action:Ut(ix,s,!1)},{keyCode:ht.DOWN,action:Ut(ix,s,!0)},...l?[{keyCode:ht.UP,action:Ut(kd,s,!1),metaKey:!0,shiftKey:!0},{keyCode:ht.DOWN,action:Ut(kd,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ht.RIGHT,action:Ut(kx,s,!0)},{keyCode:ht.LEFT,action:Ut(kx,s,!1)},{keyCode:ht.UP,action:Ut(xp,s,!1)},{keyCode:ht.DOWN,action:Ut(xp,s,!0)},{keyCode:ht.UP,action:Ut(xp,s,!1)},{keyCode:ht.UP,action:Ut(dx,s,!1)},{keyCode:ht.DOWN,action:Ut(dx,s,!0)},{keyCode:ht.RIGHT,action:Ut(px,s,!0)},{keyCode:ht.LEFT,action:Ut(px,s,!1)},{keyCode:ht.UP,action:Ut(gx,s,!1)},{keyCode:ht.DOWN,action:Ut(gx,s,!0)},{keyCode:ht.RIGHT,action:Ut(M1,s,a,!0)},{keyCode:ht.LEFT,action:Ut(M1,s,a,!1)},{keyCode:ht.RIGHT,ctrlKey:!l,altKey:l,action:Ut(zT,s,a)},{keyCode:ht.LEFT,ctrlKey:!l,altKey:l,action:Ut(UT,s,a)},{keyCode:ht.UP,action:Ut(cx,s,!1)},{keyCode:ht.DOWN,action:Ut(cx,s,!0)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{let o=!1;n.on("keydown",s=>{o=s.keyCode===ht.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===ht.BACKSPACE?"deleteContentBackward":"deleteContentForward",u=a.selection.isCollapsed(),f=u?"character":"selection",m=b=>u?b?"word":"line":"selection";mx([{keyCode:ht.BACKSPACE,action:Ut(Q1,a)},{keyCode:ht.BACKSPACE,action:Ut(sp,a,!1)},{keyCode:ht.DELETE,action:Ut(sp,a,!0)},{keyCode:ht.BACKSPACE,action:Ut(np,a,!1)},{keyCode:ht.DELETE,action:Ut(np,a,!0)},{keyCode:ht.BACKSPACE,action:Ut(pp,a,i,!1)},{keyCode:ht.DELETE,action:Ut(pp,a,i,!0)},{keyCode:ht.BACKSPACE,action:Ut(cm,a,!1)},{keyCode:ht.DELETE,action:Ut(cm,a,!0)},{keyCode:ht.BACKSPACE,action:Ut(ha,a,!1,f)},{keyCode:ht.DELETE,action:Ut(ha,a,!0,f)},...aw?[{keyCode:ht.BACKSPACE,altKey:!0,action:Ut(ha,a,!1,m(!0))},{keyCode:ht.DELETE,altKey:!0,action:Ut(ha,a,!0,m(!0))},{keyCode:ht.BACKSPACE,metaKey:!0,action:Ut(ha,a,!1,m(!1))}]:[{keyCode:ht.BACKSPACE,ctrlKey:!0,action:Ut(ha,a,!1,m(!0))},{keyCode:ht.DELETE,ctrlKey:!0,action:Ut(ha,a,!0,m(!0))}],{keyCode:ht.BACKSPACE,action:Ut(ap,a,!1)},{keyCode:ht.DELETE,action:Ut(ap,a,!0)},{keyCode:ht.BACKSPACE,action:Ut(bp,a,!1)},{keyCode:ht.DELETE,action:Ut(bp,a,!0)},{keyCode:ht.BACKSPACE,action:Ut(tp,a,!1)},{keyCode:ht.DELETE,action:Ut(tp,a,!0)},{keyCode:ht.BACKSPACE,action:Ut(Zm,a,!1)},{keyCode:ht.DELETE,action:Ut(Zm,a,!0)},{keyCode:ht.BACKSPACE,action:Ut(gp,a,!1)},{keyCode:ht.DELETE,action:Ut(gp,a,!0)}],l).filter(b=>a.selection.isEditable()).each(b=>{l.preventDefault(),Bd(a,c).isDefaultPrevented()||(b(),zl(a,c))})})(n,r,s)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(i=s,l=o,Ll([{keyCode:ht.BACKSPACE,action:Ut(a1,a=n)},{keyCode:ht.DELETE,action:Ut(a1,a)},...aw?[{keyCode:ht.BACKSPACE,altKey:!0,action:Ut(Pl,a)},{keyCode:ht.DELETE,altKey:!0,action:Ut(Pl,a)},...l?[{keyCode:LR?224:91,action:Ut(Pl,a)}]:[]]:[{keyCode:ht.BACKSPACE,ctrlKey:!0,action:Ut(Pl,a)},{keyCode:ht.DELETE,ctrlKey:!0,action:Ut(Pl,a)}]],i)),o=!1})})(t,e),(n=>{let r=k.none();n.on("keydown",o=>{var s;o.keyCode===ht.ENTER&&(KR&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(at(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(r=k.some((s=n).selection.getBookmark()),s.undoManager.add()):Cw(n,o))}),n.on("keyup",o=>{o.keyCode===ht.ENTER&&r.each(()=>{return a=o,(s=n).undoManager.undo(),r.fold(St,i=>s.selection.moveToBookmark(i)),Cw(s,a),void(r=k.none());var s,a})})})(t),(n=>{n.on("keydown",r=>{var o,s;r.isDefaultPrevented()||(s=r,mx([{keyCode:ht.SPACEBAR,action:Ut(YR,o=n)},{keyCode:ht.SPACEBAR,action:Ut(GR,o)}],s).each(a=>{s.preventDefault(),Bd(o,"insertText",{data:" "}).isDefaultPrevented()||(a(),zl(o,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",r=>{r.isComposing||(o=>{const s=D(o.getBody());o.selection.isCollapsed()&&((t,e,n)=>{const r=e.container();if(!at(r))return k.none();if((o=>{const s=o.container();return at(s)&&Ye(s.data,gn)})(e)){const o=vv(t,r,!1,n)||(s=>{const a=s.data,i=(l=>{const c=l.split("");return ee(c,(u,f)=>jc(u)&&f>0&&f<c.length-1&&ff(c[f-1])&&ff(c[f+1])?" ":u).join("")})(a);return i!==a&&(s.data=i,!0)})(r)||yv(t,r,!1,n);return fs(o,e)}if(Qf(t,e,n)){const o=vv(t,r,!0,n)||yv(t,r,!0,n);return fs(o,e)}return k.none()})(s,X.fromRangeStart(o.selection.getRng()),o.schema).each(a=>{o.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",r=>{var s;r.isDefaultPrevented()||(s=r,Ll([...QR(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=be.os.isMacOS()||be.os.isiOS();Ll([{keyCode:ht.END,action:Ut(lx,s,!0)},{keyCode:ht.HOME,action:Ut(lx,s,!1)},...l?[]:[{keyCode:ht.HOME,action:Ut(kd,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ht.END,action:Ut(kd,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ht.END,action:Ut(hx,s,!0)},{keyCode:ht.HOME,action:Ut(hx,s,!1)},{keyCode:ht.END,action:Ut(Ed,s,!0,a)},{keyCode:ht.HOME,action:Ut(Ed,s,!1,a)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{if(XR.os.isMacOS())return;const o=bn(!1);n.on("keydown",s=>{ww(s)&&Sw(o,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,Ll([{keyCode:ht.PAGE_UP,action:Ut(Ed,a=n,!1,i=r)},{keyCode:ht.PAGE_DOWN,action:Ut(Ed,a,!0,i)}],l)),ww(s)&&o.get()&&(Sw(o,n,!1),n.nodeChanged())})})(t,e),e}var n};class ZR{constructor(e){let n;this.lastPath=[],this.editor=e;const r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",o=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==o.type&&Rf(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const o=e.selection.getStart(!0);o&&zc(e)&&!r.isSameElementPath(o)&&e.dom.isChildOf(o,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",o=>{!o.isDefaultPrevented()&&zc(e)&&("IMG"===e.selection.getNode().nodeName?Or.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!Yk(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const s=[];this.editor.dom.getParent(r,a=>a===o||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:s})}}isSameElementPath(e){let n;const r=this.editor,o=ro(r.dom.getParents(e,Ie,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const Aw=Ji("image"),qp=Ji("event"),jd=t=>e=>{e[qp]=t},Tw=jd(0),tO=jd(2),eO=jd(1),$p=Ji("mode"),zd=t=>e=>{e[$p]=t},Rw=(t,e)=>zd(e)(t),Ow=zd(0),Wp=zd(2),rO=zd(1),Dw=t=>e=>k.from(e[$p]).exists(r=>r===t),mi=Dw(0),Bw=Dw(1),oO=["none","copy","link","move"],sO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Vp=()=>{const t=new window.DataTransfer;let e="move",n="all";const r={get dropEffect(){return e},set dropEffect(o){At(oO,o)&&(e=o)},get effectAllowed(){return n},set effectAllowed(o){(t=>k.from(t[qp]).exists(n=>0===n))(r)&&At(sO,o)&&(n=o)},get items(){return o=r,s=t.items,{...s,get length(){return s.length},add:(a,i)=>{if(mi(o)){if(!kt(a))return s.add(a);if(!Me(i))return s.add(a,i)}return null},remove:a=>{mi(o)&&s.remove(a)},clear:()=>{mi(o)&&s.clear()}};var o,s},get files(){return Bw(r)?Object.freeze({length:0,item:o=>null}):t.files},get types(){return t.types},setDragImage:(o,s,a)=>{mi(r)&&(r[Aw]={image:o,x:s,y:a},t.setDragImage(o,s,a))},getData:o=>Bw(r)?"":t.getData(o),setData:(o,s)=>{mi(r)&&t.setData(o,s)},clearData:o=>{mi(r)&&t.clearData(o)}};return Ow(r),r},Pw=(t,e)=>t.setData("text/html",e),Lw="x-tinymce/html",Ud=ft(Lw),Kp="\x3c!-- "+Lw+" --\x3e",aO=t=>Kp+t,Mw=t=>-1!==t.indexOf(Kp),Iw="%MCEPASTEBIN%",Xp=t=>t.dom.get("mcepastebin"),iO=t=>dt(t)&&"mcepastebin"===t.id,Fw=t=>t===Iw,jw=(t,e)=>(lt.each(e,n=>{t=yr(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),zw=t=>jw(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,r)=>n||r?gn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Uw=(t,e)=>({content:t,cancelled:e}),Yp=(t,e)=>(t.insertContent(e,{merge:p_(t),paste:!0}),!0),Gp=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),lO=(t,e,n)=>{return!(t.selection.isCollapsed()||!Gp(e)||(r=t,o=e,s=n,r.undoManager.extra(()=>{s(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,s},cO=(t,e,n)=>{return r=t,!(!Gp(o=e)||!Ne(ob(r),s=>Fs(o.toLowerCase(),`.${s.toLowerCase()}`)))&&((r,o,s)=>(r.undoManager.extra(()=>{s(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(t,e,n);var r,o},dO=(t=>{let e=0;return()=>"mceclip"+e++})(),uO=t=>{const e=Vp();return Pw(e,t),Wp(e),e},Hw=(t,e,n,r,o)=>{const s=((c,u,f)=>{const m=c.dispatch("PastePreProcess",{content:u,internal:f}),b=((g,v)=>{const h=si({sanitize:ef(g),sandbox_iframes:nf(g)},g.schema);h.addNodeFilter("meta",S=>{lt.each(S,E=>{E.remove()})});const C=h.parse(v,{forced_root_block:!1,isRootContent:!0});return As({validate:!0},g.schema).serialize(C)})(c,m.content);return c.hasEventListeners("PastePostProcess")&&!m.isDefaultPrevented()?((g,v,h)=>{const C=g.dom.create("div",{style:"display:none"},v),S=g.dispatch("PastePostProcess",{node:C,internal:h});return Uw(S.node.innerHTML,S.isDefaultPrevented())})(c,b,f):Uw(b,m.isDefaultPrevented())})(t,e,n);if(!s.cancelled){const a=s.content,i=()=>{return l=t,c=a,void(r||!g_(l)?Yp(l,c):(f=l,m=c,lt.each([lO,cO,Yp],b=>!b(f,m,Yp))));var l,c,f,m};o?Bd(t,"insertFromPaste",{dataTransfer:uO(a)}).isDefaultPrevented()||(i(),zl(t,"insertFromPaste")):i()}},Hd=(t,e,n,r)=>{const o=n||Mw(e);Hw(t,e.replace(Kp,""),o,!1,r)},Qp=(t,e,n)=>{const r=t.dom.encode(e).replace(/\r\n/g,"\n"),o=((s,a,i)=>{const l=s.split(/\n\n/),c=((m,b)=>{let g="<"+m;const v=$o(b,(h,C)=>C+'="'+xs.encodeAllRaw(h)+'"');return v.length&&(g+=" "+v.join(" ")),g+">"})(a,i),u="</"+a+">",f=ee(l,m=>m.split(/\n/).join("<br />"));return 1===f.length?f[0]:ee(f,m=>c+m+u).join("")})(Bg(r,b_(t)),jn(t),rl(t));Hw(t,o,!1,!0,n)},qw=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const r=t.types[n];try{e[r]=t.getData(r)}catch{e[r]=""}}return e},Bs=(t,e)=>e in t&&t[e].length>0,$w=t=>Bs(t,"text/html")||Bs(t,"text/plain"),Ww=(t,e,n)=>{const r="paste"===e.type?e.clipboardData:e.dataTransfer;var o;if(Bc(t)&&r){const s=((a,i)=>{const l=i.items?rn(Cn(i.items),u=>"file"===u.kind?[u.getAsFile()]:[]):[],c=i.files?Cn(i.files):[];return Wt(l.length>0?l:c,(u=>{const f=ob(u);return m=>sn(m.type,"image/")&&Ne(f,b=>(g=>{const v=g.toLowerCase(),h={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return lt.hasOwn(h,v)?"image/"+h[v]:"image/"+v})(b)===m.type)})(a))})(t,r);if(s.length>0)return e.preventDefault(),(o=s,Promise.all(ee(o,a=>Fy(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),G(a,i=>{var l,c;l=t,Om((c=i).uri).each(({data:u,type:f,base64Encoded:m})=>{const b=m?u:btoa(u),g=c.file,v=l.editorUpload.blobCache,C=v.getByData(b,f)??((S,E,A,N)=>{const O=dO(),M=Kh(S)&&dt(A.name),j=M?((P,I)=>{const q=I.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return dt(q)?P.dom.encode(q[1]):void 0})(S,A.name):O,W=E.create(O,A,N,j,M?A.name:void 0);return E.add(W),W})(l,v,g,b);Hd(l,`<img src="${C.blobUri()}">`,!1,!0)})})}),!0}return!1},Jp=(t,e,n,r,o)=>{let s=zw(n);const a=Bs(e,Ud())||Mw(n),i=!a&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=Gp(s);(Fw(s)||!s.length||i&&!l)&&(r=!0),(r||l)&&(s=Bs(e,"text/plain")&&i?e["text/plain"]:(c=>{const u=ws(),f=si({},u);let m="";const b=u.getVoidElements(),g=lt.makeMap("script noscript style textarea video audio iframe object"," "),v=u.getBlockElements(),h=C=>{const S=C.name,E=C;if("br"!==S){if("wbr"!==S)if(b[S]&&(m+=" "),g[S])m+=" ";else{if(3===C.type&&(m+=C.value),!(C.name in u.getVoidElements())){let A=C.firstChild;if(A)do{h(A)}while(A=A.next)}v[S]&&E.next&&(m+="\n","p"===S&&(m+="\n"))}}else m+="\n"};return c=jw(c,[/<!\[[^\]]+\]>/g]),h(f.parse(c)),m})(s)),Fw(s)||(r?Qp(t,s,o):Hd(t,s,a,o))},Vw=(t,e,n,r)=>{((o,s,a)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",s),o.setData("text/plain",a),o.setData(Ud(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),r()):n(e.html,r)},Kw=t=>(e,n)=>{const{dom:r,selection:o}=t,s=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},e);r.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),r.add(t.getBody(),s);const i=o.getRng();a.focus();const l=r.createRng();l.selectNodeContents(a),o.setRng(l),Or.setEditorTimeout(t,()=>{o.setRng(i),r.remove(s),n()},0)},Xw=t=>({html:aO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),Yw=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},Gw=(t,e)=>{var n,r;return ca.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(r=e.clientY)&&void 0!==r?r:0,t.getDoc())},Qw=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},mO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Jw=t=>lt.trim(t).replace(mO,$i).toLowerCase(),pO=(t,e,n)=>{const r=f_(t);if(n||"all"===r||!m_(t))return e;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,u)=>{const f=s.parseStyle(s.decode(c)),m={};for(let g=0;g<o.length;g++){const v=f[o[g]];let h=v,C=s.getStyle(a,o[g],!0);/color/.test(o[g])&&(h=Jw(h),C=Jw(C)),C!==h&&(m[o[g]]=v)}const b=s.serializeStyle(m,"span");return b?l+' style="'+b+'"'+u:l+u})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},hO=Ve,Zw=at,bO=t=>De(t.dom),tS=t=>e=>ue(D(t),e),eS=(t,e)=>_o(D(t),bO,tS(e)),nS=(t,e,n)=>{const r=new un(t,e),o=n?r.next.bind(r):r.prev.bind(r);let s=t;for(let a=n?t:o();a&&!hO(a);a=o())Qr(a)&&(s=a);return s};var pi;!function(t){t.Before="before",t.After="after"}(pi||(pi={}));const yO=(t,e)=>Math.abs(t.left-e),CO=(t,e)=>Math.abs(t.right-e),wO=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),Zp=(t,e,n,r)=>{const o=u=>Qr(u.node)?k.some(u):xt(u.node)?Zp(Cn(u.node.childNodes),e,n,!1):k.none(),s=(u,f)=>{const m=Uo(u,(b,g)=>f(b,e,n)-f(g,e,n));return Qn(m,o).map(b=>{return r&&!at(b.node)&&m.length>1?(g=b,v=m[1],h=f,o(v).filter(C=>Math.abs(h(g,e,n)-h(C,e,n))<2&&at(C.node))).getOr(b):b;var g,v,h})},[a,i]=((t,e)=>{return(n=Wt(t,n=>{return(r=e)>=(o=n).top&&r<=o.bottom;var r,o}),yn(n,(r,o)=>r.fold(()=>k.some(o),s=>{const a=Math.min(o.left,s.left),i=Math.min(o.top,s.top),l=Math.max(o.right,s.right),c=Math.max(o.bottom,s.bottom);return k.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}),k.none())).fold(()=>[[],t],n=>{const{pass:r,fail:o}=Ur(t,s=>((a,i)=>{const l=(c=a,u=i,Math.max(0,Math.min(c.bottom,u.bottom)-Math.max(c.top,u.top))/Math.min(a.height,i.height));var c,u;return((c,u)=>c.top<u.bottom&&c.bottom>u.top)(a,i)&&l>.5})(s,n));return[r,o]});var n})(N1(t),n),{pass:l,fail:c}=Ur(i,u=>u.top<n);return s(a,wO).orThunk(()=>s(c,hh)).orThunk(()=>s(l,hh))},rS=(t,e,n)=>((r,o,s)=>{const a=D(r),l=((t,e,n)=>k.from(t.dom.elementFromPoint(e,n)).map(st))(ye(a),o,s).filter(c=>ve(a,c)).getOr(a);return((c,u,f,m)=>{const b=(g,v)=>{const h=Wt(g.dom.childNodes,vo(C=>xt(C)&&C.classList.contains("mce-drag-container")));return v.fold(()=>Zp(h,f,m,!0),C=>{const S=Wt(h,E=>E!==C.dom);return Zp(S,f,m,!0)}).orThunk(()=>(ue(g,c)?k.none():ps(g)).bind(C=>b(C,k.some(g))))};return b(u,k.none())})(a,l,o,s)})(t,e,n).filter(r=>al(r.node)).map(r=>{return{node:(o=r).node,position:yO(o,s=e)<CO(o,s)?pi.Before:pi.After};var o,s}),oS=t=>{var e,n;const r=t.getBoundingClientRect(),o=t.ownerDocument,s=o.documentElement,a=o.defaultView;return{top:r.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:r.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},sS=t=>({target:t,srcElement:t}),aS=De,EO=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(aS,Gr),kO=(t,e,n,r)=>{const o=t.dom,s=e.cloneNode(!0);o.setStyles(s,{width:n,height:r}),o.setAttrib(s,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},qd=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},iS=qd("left",-32),lS=qd("left",32),cS=qd("top",-32),dS=qd("top",32),uS=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},$l=(t,e,n,r,o)=>{"dragstart"===e&&Pw(r,t.dom.getOuterHTML(n));const s=((t,e,n,r)=>{const o=((s,a)=>{const i=(l=>{const c=Vp(),u=k.from(l[$p]);return Wp(l),Tw(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(f=l,k.from(f[Aw])).each(f=>c.setDragImage(f.image,f.x,f.y)),G(l.types,f=>{"Files"!==f&&c.setData(f,l.getData(f))}),G(l.files,f=>c.items.add(f)),(f=>k.from(f[qp]))(l).each(f=>{var m;m=c,jd(f)(m)}),u.each(f=>{Rw(l,f),Rw(c,f)}),c;var f})(s);return"dragstart"===a?(Tw(i),Ow(i)):"drop"===a?(tO(i),Wp(i)):(eO(i),rO(i)),i})(n,t);return Me(r)?((s,a,i)=>{const l=dr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:St,stopImmediatePropagation:St,stopPropagation:St,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...sS(a)}})(t,e,o):(s=t,a=r,i=e,l=o,{...a,dataTransfer:l,type:s,...sS(i)});var s,a,i,l})(e,n,r,o);return t.dispatch(e,s)},fS=(t,e,n)=>{t.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>$l(e,"dragend",r.element,r.dataTransfer),o=>$l(e,"dragend",r.element,r.dataTransfer,o))}),mS(t)},mS=t=>{t.on(e=>{e.intervalId.clear(),uS(e.ghost)}),t.clear()},Wl=De,pS=(t,e)=>ma(t.getBody(),e),AO=t=>{const e=t.selection,n=t.dom,r=t.getBody(),o=((t,e,n,r)=>{const o=Ss();let s,a;const i=jn(t),l=t.dom,c=()=>{(u=>{var f,m;const b=Fn(D(u),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<b.length;g++){const v=b[g].dom;let h=v.previousSibling;if(Cc(h)){const C=h.data;1===C.length?null===(f=h.parentNode)||void 0===f||f.removeChild(h):h.deleteData(C.length-1,1)}h=v.nextSibling,yc(h)&&(1===h.data.length?null===(m=h.parentNode)||void 0===m||m.removeChild(h):h.deleteData(0,1))}})(e),a&&(oa(a),a=null),o.on(u=>{l.remove(u.caret),o.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(u,f)=>{let m;if(c(),P_(f))return null;if(!n(f))return a=((b,g)=>{var v;const h=(null!==(v=b.ownerDocument)&&void 0!==v?v:document).createTextNode(hn),C=b.parentNode;if(g){const S=b.previousSibling;if(Ha(S)){if(_r(S))return S;if(Cc(S))return S.splitText(S.data.length-1)}C?.insertBefore(h,b)}else{const S=b.nextSibling;if(Ha(S)){if(_r(S))return S;if(yc(S))return S.splitText(1),S}b.nextSibling?C?.insertBefore(h,b.nextSibling):C?.appendChild(h)}return h})(f,u),m=f.ownerDocument.createRange(),sl(a.nextSibling)?(m.setStart(a,0),m.setEnd(a,0)):(m.setStart(a,1),m.setEnd(a,1)),m;{const b=((h,C,S)=>{var E;const A=(null!==(E=C.ownerDocument)&&void 0!==E?E:document).createElement(h);A.setAttribute("data-mce-caret",S?"before":"after"),A.setAttribute("data-mce-bogus","all"),A.appendChild(Hi().dom);const N=C.parentNode;return S?N?.insertBefore(A,C):C.nextSibling?N?.insertBefore(A,C.nextSibling):N?.appendChild(A),A})(i,f,u),g=db(e,f,u);l.setStyle(b,"top",g.top),a=b;const v=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(v,{...g}),l.add(e,v),o.set({caret:v,element:f,before:u}),u&&l.addClass(v,"mce-visual-caret-before"),s=setInterval(()=>{o.on(h=>{r()?l.toggleClass(h.caret,"mce-visual-caret-hidden"):l.addClass(h.caret,"mce-visual-caret-hidden")})},500),m=f.ownerDocument.createRange(),m.setStart(b,0),m.setEnd(b,0)}return m},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(u=>{const f=db(e,u.element,u.before);l.setStyles(u.caret,{...f})})},destroy:()=>clearInterval(s)}})(t,r,n.isBlock,()=>da(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=h=>h!==r&&(Wl(h)||To(h))&&n.isChildOf(h,r)&&n.isEditable(h.parentNode),c=(h,C,S,E=!0)=>t.dispatch("ShowCaret",{target:C,direction:h,before:S}).isDefaultPrevented()?null:(E&&e.scrollIntoView(C,-1===h),o.show(S,C)),u=h=>_r(h)||yc(h)||Cc(h),f=h=>u(h.startContainer)||u(h.endContainer),b=(h,C)=>{if(!h)return null;if(h.collapsed){if(!f(h)){const N=C?1:-1,O=dl(N,r,h),M=O.getNode(!C);if(dt(M)){if(al(M))return c(N,M,!!C&&!O.isAtEnd(),!1);if(ys(M)&&De(M.nextSibling)){const H=n.createRng();return H.setStart(M,0),H.setEnd(M,0),H}}const j=O.getNode(C);if(dt(j)){if(al(j))return c(N,j,!C&&!O.isAtEnd(),!1);if(ys(j)&&De(j.previousSibling)){const H=n.createRng();return H.setStart(j,1),H.setEnd(j,1),H}}}return null}let S=h.startContainer,E=h.startOffset;const A=h.endOffset;if(at(S)&&0===E&&Wl(S.parentNode)&&(S=S.parentNode,E=n.nodeIndex(S),S=S.parentNode),!xt(S))return null;if(A===E+1&&S===h.endContainer){const N=S.childNodes[E];if(l(N))return(O=>{const M=O.cloneNode(!0),j=t.dispatch("ObjectSelected",{target:O,targetClone:M});if(j.isDefaultPrevented())return null;const H=((P,I)=>{const q=D(t.getBody()),Q=t.getDoc(),mt=Ao(q,"#"+s).getOrThunk(()=>{const Nt=Y('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Q);return an(Nt,"id",s),re(q,Nt),Nt}),ct=n.createRng();xe(mt),fe(mt,[Xt(gn,Q),D(I),Xt(gn,Q)]),ct.setStart(mt.dom.firstChild,1),ct.setEnd(mt.dom.lastChild,0),B(mt,{top:n.getPos(P,t.getBody()).y+"px"}),k0(mt);const Rt=e.getSel();return Rt&&(Rt.removeAllRanges(),Rt.addRange(ct)),ct})(O,j.targetClone),W=D(O);return G(Fn(D(t.getBody()),`*[${a}]`),P=>{ue(W,P)||d(P,a)}),n.getAttrib(O,a)||O.setAttribute(a,"1"),i=O,v(),H})(N)}return null},g=()=>{i&&i.removeAttribute(a),Ao(D(t.getBody()),"#"+s).each(Ot),i=null},v=()=>{o.hide()};return Mo(t)||(t.on("click",h=>{n.isEditable(h.target)||(h.preventDefault(),t.focus())}),t.on("blur NewBlock",g),t.on("ResizeWindow FullscreenStateChanged",o.reposition),t.on("tap",h=>{const C=h.target,S=pS(t,C);Wl(S)?(h.preventDefault(),Rl(t,S).each(b)):l(C)&&Rl(t,C).each(b)},!0),t.on("mousedown",h=>{const C=h.target;if(C!==r&&"HTML"!==C.nodeName&&!n.isChildOf(C,r)||!((E,A,N)=>{const O=D(E.getBody()),M=E.inline?O:D(ye(O).dom.documentElement),j=((H,W,P,I)=>{const q=W.dom.getBoundingClientRect();return{x:P-(H?q.left+W.dom.clientLeft+rT(W):0),y:I-(H?q.top+W.dom.clientTop+nT(W):0)}})(E.inline,M,A,N);return((H,W,P)=>{const I=tT(H),q=eT(H);return W>=0&&P>=0&&W<=I&&P<=q})(M,j.x,j.y)})(t,h.clientX,h.clientY))return;g(),v();const S=pS(t,C);Wl(S)?(h.preventDefault(),Rl(t,S).each(b)):rS(r,h.clientX,h.clientY).each(E=>{var A;h.preventDefault(),(A=c(1,E.node,E.position===pi.Before,!1))&&e.setRng(A),Jo(S)?S.focus():t.getBody().focus()})}),t.on("keypress",h=>{ht.modifierPressed(h)||Wl(e.getNode())&&h.preventDefault()}),t.on("GetSelectionRange",h=>{let C=h.range;if(i){if(!i.parentNode)return void(i=null);C=C.cloneRange(),C.selectNode(i),h.range=C}}),t.on("SetSelectionRange",h=>{h.range=(h=>{const C=t.schema.getVoidElements(),S=n.createRng(),E=h.startContainer,A=h.startOffset,N=h.endContainer,O=h.endOffset;return Jt(C,E.nodeName.toLowerCase())?0===A?S.setStartBefore(E):S.setStartAfter(E):S.setStart(E,A),Jt(C,N.nodeName.toLowerCase())?0===O?S.setEndBefore(N):S.setEndAfter(N):S.setEnd(N,O),S})(h.range);const C=b(h.range,h.forward);C&&(h.range=C)}),t.on("AfterSetSelectionRange",h=>{const C=h.range,S=C.startContainer.parentElement;var E,A;f(C)||xt(E=S)&&"mcepastebin"===E.id||v(),dt(A=S)&&n.hasClass(A,"mce-offscreen-selection")||g()}),(t=>{const e=Ss(),n=Re.DOM,r=document,o=((l,c)=>u=>{if(0===u.button){const f=Ze(c.dom.getParents(u.target),EO).getOr(null);if(dt(f)&&(m=c.dom,b=c.getBody(),aS(g=f)&&g!==b&&m.isEditable(g.parentElement))){const m=c.dom.getPos(f),b=c.getBody(),g=c.getDoc().documentElement;l.set({element:f,dataTransfer:Vp(),dragging:!1,screenX:u.screenX,screenY:u.screenY,maxX:(c.inline?b.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?b.scrollHeight:g.offsetHeight)-2,relX:u.pageX-m.x,relY:u.pageY-m.y,width:f.offsetWidth,height:f.offsetHeight,ghost:kO(c,f,f.offsetWidth,f.offsetHeight),intervalId:ek(100)})}}var m,b,g})(e,t),s=((t,e)=>{const n=Nc((o,s)=>{return i=o,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void rS(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),c=>{const u=a._selectionOverrides.showCaret(1,c.node,c.position===pi.Before,!1);u?a.selection.setRng(u):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const r=t;return o=>t.on(s=>{const a=Math.max(Math.abs(o.screenX-s.screenX),Math.abs(o.screenY-s.screenY));if(!s.dragging&&a>10){const c=$l(e,"dragstart",s.element,s.dataTransfer,o);if(dt(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const c=o.currentTarget===e.getDoc().documentElement,u=((f,m)=>({pageX:m.pageX-f.relX,pageY:m.pageY+5}))(s,(m=o,b=(h=f=e).inline?oS(h.getBody()):{left:0,top:0},g=(h=>{const C=h.getBody();return h.inline?{left:C.scrollLeft,top:C.scrollTop}:{left:0,top:0}})(f),v=((h,C)=>{if(C.target.ownerDocument!==h.getDoc()){const S=oS(h.getContentAreaContainer()),E=(A=>{const N=A.getBody(),O=A.getDoc().documentElement;return A.inline?{left:N.scrollLeft,top:N.scrollTop}:{left:N.scrollLeft||O.scrollLeft,top:N.scrollTop||O.scrollTop}})(h);return{left:C.pageX-S.left+E.left,top:C.pageY-S.top+E.top}}return{left:C.pageX,top:C.pageY}})(f,m),{pageX:v.left-b.left+g.left,pageY:v.top-b.top+g.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((f,m,b,g,v,h,C,S,E,A,N,O)=>{let M=0,j=0;f.style.left=m.pageX+"px",f.style.top=m.pageY+"px",m.pageX+b>v&&(M=m.pageX+b-v),m.pageY+g>h&&(j=m.pageY+g-h),f.style.width=b-M+"px",f.style.height=g-j+"px";const H=E.clientHeight,W=E.clientWidth,P=C+E.getBoundingClientRect().top,I=S+E.getBoundingClientRect().left;N.on(q=>{q.intervalId.clear(),q.dragging&&O&&(C+8>=H?q.intervalId.set(dS(A)):C-8<=0?q.intervalId.set(cS(A)):S+8>=W?q.intervalId.set(lS(A)):S-8<=0?q.intervalId.set(iS(A)):P+16>=window.innerHeight?q.intervalId.set(dS(window)):P-16<=0?q.intervalId.set(cS(window)):I+16>=window.innerWidth?q.intervalId.set(lS(window)):I-16<=0&&q.intervalId.set(iS(window)))})})(s.ghost,u,s.width,s.height,s.maxX,s.maxY,o.clientY,o.clientX,e.getContentAreaContainer(),e.getWin(),r,c),n.throttle(o.clientX,o.clientY)}var f,m,h,b,g,v,i,l})})(e,t),a=((l,c)=>u=>{l.on(f=>{var m,b,g,v;if(f.intervalId.clear(),f.dragging){if(b=c,g=(b=>{const g=b.getSel();if(dt(g)){const v=g.getRangeAt(0).startContainer;return at(v)?v.parentNode:v}return null})(c.selection),v=f.element,!Se(g)&&g!==v&&!b.dom.isChildOf(g,v)&&b.dom.isEditable(g)){const b=null!==(m=c.getDoc().elementFromPoint(u.clientX,u.clientY))&&void 0!==m?m:c.getBody();$l(c,"drop",b,f.dataTransfer,u).isDefaultPrevented()||c.undoManager.transact(()=>{((g,v)=>{const h=g.getParent(v.parentNode,g.isBlock);uS(v),h&&h!==g.getRoot()&&g.isEmpty(h)&&vs(D(h))})(c.dom,f.element),(g=>{const v=g.getData("text/html");return""===v?k.none():k.some(v)})(f.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}$l(c,"dragend",c.getBody(),f.dataTransfer,u)}}),mS(l)})(e,t),i=((l,c)=>u=>fS(l,c,k.some(u)))(e,t);t.on("mousedown",o),t.on("mousemove",s),t.on("mouseup",a),n.bind(r,"mousemove",s),n.bind(r,"mouseup",i),t.on("remove",()=>{n.unbind(r,"mousemove",s),n.unbind(r,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===ht.ESC&&fS(e,t,k.none())})})(h=t),Jk(h)&&(C=>{const S=N=>{if(!N.isDefaultPrevented()){const O=N.dataTransfer;O&&(At(O.types,"Files")||O.files.length>0)&&(N.preventDefault(),"drop"===N.type&&hd(C,"Dropped file type is not supported"))}},E=N=>{Gc(C,N.target)&&S(N)},A=()=>{const N=Re.DOM,O=C.dom,M=document,j=C.inline?C.getBody():C.getDoc(),H=["drop","dragover"];G(H,W=>{N.bind(M,W,E),O.bind(j,W,S)}),C.on("remove",()=>{G(H,W=>{N.unbind(M,W,E),O.unbind(j,W,S)})})};C.on("init",()=>{Or.setEditorTimeout(C,A,0)})})(h),(h=>{const C=Nc(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const S=h.selection.getRng();if(S.collapsed){const E=ep(h,S,!1);h.selection.setRng(E)}}},0);h.on("focus",()=>{C.throttle()}),h.on("blur",()=>{C.cancel()})})(t),(h=>{h.on("init",()=>{h.on("focusin",C=>{const S=C.target;if(To(S)){const E=ma(h.getBody(),S),A=De(E)?E:S;h.selection.getNode()!==A&&Rl(h,A).each(N=>h.selection.setRng(N))}})})})(t)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&(Cu(h),e.scrollIntoView(h))},hideFakeCaret:v,destroy:()=>{o.destroy(),i=null}};var h},TO=(t,e)=>{let n=e;for(let r=t.previousSibling;at(r);r=r.previousSibling)n+=r.data.length;return n},gS=(t,e,n,r,o)=>{if(at(n)&&(r<0||r>n.data.length))return[];const s=o&&at(n)?[TO(n,r)]:[r];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,o)),a=a.parentNode;return a===e?s.reverse():[]},tg=(t,e,n,r,o,s,a=!1)=>({start:gS(t,e,n,r,a),end:gS(t,e,o,s,a)}),hS=(t,e)=>{const n=e.slice(),r=n.pop();return x(r)?yn(n,(o,s)=>o.bind(a=>k.from(a.childNodes[s])),k.some(t)).bind(o=>at(o)&&(r<0||r>o.data.length)?k.none():k.some({node:o,offset:r})):k.none()},bS=(t,e)=>hS(t,e.start).bind(({node:n,offset:r})=>hS(t,e.end).map(({node:o,offset:s})=>{const a=document.createRange();return a.setStart(n,r),a.setEnd(o,s),a})),gi=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const r=e.parentNode;t.remove(e,at(e.firstChild)&&Cs(e.firstChild.data)),gi(t,r,n)}},$d=(t,e,n,r=!0)=>{const o=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),r&&!n(e.startContainer)&&(at(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),at(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),gi(t,o,n),o!==s&&gi(t,s,n))},eg=(t,e)=>k.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),vS=(t,e,n)=>{const r=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:jh(r).concat(t.blockPatterns),inlinePatterns:zh(r).concat(t.inlinePatterns)}},yS=(t,e,n,r)=>{const o=t.createRng();return o.setStart(e,0),o.setEnd(n,r),o.toString()},CS=(t,e,n)=>{((r,o,s)=>{if(at(r)&&0>=r.length)return k.some(ho(r,0));{const a=ea(_d);return k.from(a.forwards(r,0,Nd(r),s)).map(i=>ho(i.container,0))}})(e,0,e).each(r=>{const o=r.container;Tx(o,n.start.length,e).each(i=>{const l=t.createRng();l.setStart(o,0),l.setEnd(i.container,i.offset),$d(t,l,c=>c===e)});const s=D(o),a=hc(s);var i,l;/^\s[^\s]/.test(a)&&(i=s,l=a.slice(1),hu.set(i,l))})},xS=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),Wd=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},wS=(t,e,n)=>{const r=bS(t.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,s=r.endContainer,a=0===r.endOffset?s:s.splitText(r.endOffset),i=0===r.startOffset?o:o.splitText(r.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(xS(t,e+"-end"),a),start:l.insertBefore(xS(t,e+"-start"),i)}},SS=(t,e,n)=>{gi(t,t.get(e.prefix+"-end"),n),gi(t,t.get(e.prefix+"-start"),n)},ng=t=>0===t.start.length,ES=(t,e,n,r)=>{const o=e.start;var s;return Ep(t,r.container,r.offset,(s=o,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),u=l.lastIndexOf(s);return-1!==u?u+s.length:-1!==c?c+1:-1}),n).bind(a=>{var i,l;const c=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(o))&&void 0!==l?l:-1;if(-1!==c&&a.offset>=c+o.length){const u=t.createRng();return u.setStart(a.container,a.offset-o.length),u.setEnd(a.container,a.offset),k.some(u)}return Sp(a.container,a.offset-o.length,n).map(f=>{const m=t.createRng();return m.setStart(f.container,f.offset),m.setEnd(a.container,a.offset),m}).filter(f=>f.toString()===o).orThunk(()=>ES(t,e,n,ho(a.container,0)))})},RO=(t,e,n,r)=>{const o=t.dom,s=o.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Sp(i,l-n.pattern.end.length,e).bind(c=>{const u=tg(o,s,c.container,c.offset,i,l,r);if(ng(a))return k.some({matches:[{pattern:a,startRng:u,endRng:u}],position:c});{const f=Vd(t,n.remainingPatterns,c.container,c.offset,e,r),m=f.getOr({matches:[],position:c}),b=m.position;return((v,h,C,S,E,A=!1)=>{if(0===h.start.length&&!A){const N=v.createRng();return N.setStart(C,S),N.setEnd(C,S),k.some(N)}return wp(C,S,E).bind(N=>ES(v,h,E,N).bind(O=>{var M;return A&&(O.endContainer===N.container&&O.endOffset===N.offset||0===N.offset&&(null===(M=O.endContainer.textContent)||void 0===M?void 0:M.length)===O.endOffset)?k.none():k.some(O)}))})(o,a,b.container,b.offset,e,f.isNone()).map(v=>{const h=((C,S,E,A=!1)=>tg(C,S,E.startContainer,E.startOffset,E.endContainer,E.endOffset,A))(o,s,v,r);return{matches:m.matches.concat([{pattern:a,startRng:h,endRng:u}]),position:ho(v.startContainer,v.startOffset)}})}})},Vd=(t,e,n,r,o,s)=>{const a=t.dom;return wp(n,r,a.getRoot()).bind(i=>{const l=yS(a,o,n,r);for(let c=0;c<e.length;c++){const u=e[c];if(!Fs(l,u.end))continue;const f=e.slice();f.splice(c,1);const m=RO(t,o,{pattern:u,remainingPatterns:f,position:i},s);if(m.isNone()&&r>0)return Vd(t,e,n,r-1,o,s);if(m.isSome())return m}return k.none()})},kS=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?G(e.format,r=>{t.formatter.apply(r)}):t.execCommand(e.cmd,!1,e.value)},_S=(t,e,n,r,o,s)=>{var a;return((i,l)=>{const c=ur(i,u=>Ne(l,f=>u.pattern.start===f.pattern.start&&u.pattern.end===f.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(Vd(t,o.inlinePatterns,n,r,e,s).fold(()=>[],i=>i.matches),Vd(t,(a=o.inlinePatterns,Uo(a,(i,l)=>l.end.length-i.end.length)),n,r,e,s).fold(()=>[],i=>i.matches))},NS=(t,e)=>{if(0===e.length)return;const n=t.dom,r=t.selection.getBookmark(),o=((s,a)=>{const i=Ji("mce_textpattern"),l=zo(a,(c,u)=>{const f=wS(s,i+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return zo(l,(c,u)=>{const f=l.length-c.length-1,m=ng(u.pattern)?u.endMarker:wS(s,i+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:m}])},[])})(n,e);G(o,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;ng(s.pattern)?((l,c,u,f)=>{const m=Wd(l.dom,u);$d(l.dom,m,f),kS(l,c,m)})(t,s.pattern,s.endMarker,i):((l,c,u,f,m)=>{const b=l.dom,g=Wd(b,f),v=Wd(b,u);$d(b,v,m),$d(b,g,m);const C=Wd(b,{prefix:u.prefix,start:u.end,end:f.start});kS(l,c,C)})(t,s.pattern,s.startMarker,s.endMarker,i),SS(n,s.endMarker,i),SS(n,s.startMarker,i)}),t.selection.moveToBookmark(r)},AS=(t,e,n)=>{for(let r=0;r<t.length;r++)if(n(t[r],e))return!0;return!1},rg=Re.DOM,BO=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,og=t=>Cr(t,e=>!1===Me(e)),TS=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return og({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_unsafe_embeds:e("convert_unsafe_embeds"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:BO(t),sandbox_iframes:e("sandbox_iframes"),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},RS=t=>{const e=t.options.get;return og({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},sg=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,OS=t=>{const e=sg(t),n=Qh(t),r=t.contentCSS,o=()=>{e.unloadAll(r),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?o():t.on("remove",o)};if(t.contentStyles.length>0){let l="";lt.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,c,u)=>{const{pass:f,fail:m}=Ur(c,v=>tinymce.Resource.has(Gm(v))),g=[...f.map(v=>{const h=tinymce.Resource.get(Gm(v));return kt(h)?Promise.resolve(sg(l).loadRawCss(v,h)):Promise.resolve()}),sg(l).loadAll(m)];return l.inline?g:g.concat([l.ui.styleSheetLoader.loadAll(u)])})(t,r,n)).then(s).catch(s),i=Ok(t);return i&&((l,c)=>{const u=D(l.getBody()),f=Fe(Pe(u)),m=ot("style");an(m,"type","text/css"),re(m,Xt(c)),re(f,m),l.on("remove",()=>{Ot(m)})})(t,i),a},ag=t=>{var e;!0!==t.removed&&(Mo(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||zc(r)&&r.selection.getStart(!0)!==o||zn(o).each(s=>{const a=s.getNode(),i=Zo(a)?zn(a).getOr(s):s;r.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=r_(e);Ce(n)&&n.call(e,e),(r=>{const o=s_(r);o&&Or.setEditorTimeout(r,()=>{let s;s=!0===o?r:r.editorManager.get(o),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},DS=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(rg.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const r=t.getBody();var a,i;r.disabled=!0,t.readonly=tb(t),t._editableRoot=Gk(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===rg.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let v=[];const h=E=>{if(!E.blob||!E.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const A=E.id||"blobid"+sT+++(()=>{const j=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+j()+j()+j()})(),N=E.name||A,O=E.blob;var M;return{id:ft(A),name:ft(N),filename:ft(E.filename||N+"."+(M=O.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[M.toLowerCase()]||"dat")),blob:ft(O),base64:ft(E.base64),blobUri:ft(E.blobUri||URL.createObjectURL(O)),uri:ft(E.uri)}},C=E=>Ze(v,E).getOrUndefined(),S=E=>C(A=>A.id()===E);return{create:(E,A,N,O,M)=>{if(kt(E))return h({id:E,name:O,filename:M,blob:A,base64:N});if(Gt(E))return h(E);throw new Error("Unknown input type")},add:E=>{S(E.id())||v.push(E)},get:S,getByUri:E=>C(A=>A.blobUri()===E),getByData:(E,A)=>C(N=>N.base64()===E&&N.blob().type===A),findFirst:C,removeByUri:E=>{v=Wt(v,A=>A.blobUri()!==E||(URL.revokeObjectURL(A.blobUri()),!1))},destroy:()=>{G(v,E=>{URL.revokeObjectURL(E.blobUri())}),v=[]}}})();let n,r;const o=jC(),s=[],a=v=>h=>t.selection?v(h):[],i=(v,h,C)=>{let S=0;do{S=v.indexOf(h,S),-1!==S&&(v=v.substring(0,S)+C+v.substr(S+h.length),S+=C.length-h.length+1)}while(-1!==S);return v},l=(v,h,C)=>(v=i(v,`src="${h}"`,`src="${C}"${C===be.transparentSrc?' data-mce-placeholder="1"':""}`),i(v,'data-mce-src="'+h+'"','data-mce-src="'+C+'"')),c=(v,h)=>{G(t.undoManager.data,C=>{"fragmented"===C.type?C.fragments=ee(C.fragments,S=>l(S,v,h)):C.content=l(C.content,v,h)})},u=()=>(n||(n=UC(t,o)),b().then(a(v=>{const h=ee(v,C=>C.blobInfo);return n.upload(h,zC(t)).then(a(C=>{const S=[];let E=!1;const A=ee(C,(N,O)=>{const{blobInfo:M,image:j}=v[O];let H=!1;return N.status&&xk(t)?(N.url&&!Ye(j.src,N.url)&&(E=!0),e.removeByUri(j.src),Mo(t)||((W,P)=>{const I=t.convertURL(P,"src");var q;c(W.src,P),xr(D(W),{src:Kh(t)?(q=P,q+(-1===q.indexOf("?")?"?":"&")+(new Date).getTime()):P,"data-mce-src":I})})(j,N.url)):N.error&&(N.error.remove&&(c(j.src,be.transparentSrc),S.push(j),H=!0),hd(t,fo.translate(["Failed to upload image: {0}",N.error.message]))),{element:j,status:N.status,uploadUri:N.url,blobInfo:M,removed:H}});return S.length>0&&!Mo(t)?t.undoManager.transact(()=>{G(wn(S),N=>{const O=Mn(N);Ot(N),O.each((M=>j=>{var H,W;(H=M).dom.isEmpty((W=j).dom)&&dt(H.schema.getTextBlockElements()[pe(W)])&&re(j,Y('<br data-mce-bogus="1" />'))})(t)),e.removeByUri(N.dom.src)})}):E&&t.undoManager.dispatchChange(),A}))}))),f=()=>Vh(t)?u():Promise.resolve([]),m=v=>ur(s,h=>h(v)),b=()=>(r||(r=((t,e)=>{const n={};return{findAll:(r,o=Ie)=>{const s=Wt((i=r)?Cn(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===be.transparentSrc)&&(sn(l,"blob:")?!t.isUploaded(l)&&o(i):!!sn(l,"data:")&&o(i))}),a=ee(s,i=>{const l=i.src;if(Jt(n,l))return n[l].then(c=>kt(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((u,f)=>{const m=()=>Promise.reject("Invalid data URI");if(sn(f,"blob:")){const v=u.getByUri(f);return dt(v)?Promise.resolve(v):(b=f,sn(b,"blob:")?(h=b,fetch(h).then(C=>C.ok?C.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${h} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):sn(b,"data:")?(g=b,new Promise((h,C)=>{Om(g).bind(({type:S,data:E,base64Encoded:A})=>Iy(S,E,A)).fold(()=>C("Invalid data URI"),h)})):Promise.reject("Unknown URI format")).then(h=>Fy(h).then(C=>jy(C,!1,S=>k.some(zy(u,h,S))).getOrThunk(m)))}var h,b,g;return sn(f,"data:")?Uy(u,f).fold(m,v=>Promise.resolve(v)):Promise.reject("Unknown image data format")})(e,l).then(u=>(delete n[l],{image:i,blobInfo:u})).catch(u=>(delete n[l],u));return n[l]=c,c}});var i;return Promise.all(a)}}})(o,e)),r.findAll(t.getBody(),m).then(a(v=>{const h=Wt(v,C=>kt(C)?(hd(t,C),!1):"blob"!==C.uriType);return Mo(t)||G(h,C=>{c(C.image.src,C.blobInfo.blobUri()),C.image.src=C.blobInfo.blobUri(),C.image.removeAttribute("data-mce-src")}),h}))),g=v=>v.replace(/src="(blob:[^"]+)"/g,(h,C)=>{const S=o.getResultUri(C);if(S)return'src="'+S+'"';let E=e.getByUri(C);return E||(E=yn(t.editorManager.get(),(A,N)=>A||N.editorUpload&&N.editorUpload.blobCache.getByUri(C),void 0)),E?'src="data:'+E.blob().type+";base64,"+E.base64()+'"':h});return t.on("SetContent",()=>{Vh(t)?f():b()}),t.on("RawSaveContent",v=>{v.content=g(v.content)}),t.on("GetContent",v=>{v.source_view||"raw"===v.format||"tree"===v.format||(v.content=g(v.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",v=>{G(v,h=>{const C=h.attr("src");if(!C||e.getByUri(C))return;const S=o.getResultUri(C);S&&h.attr("src",S)})})}),{blobCache:e,addFilter:v=>{s.push(v)},uploadImages:u,uploadImagesAuto:f,scanForImages:b,destroy:()=>{e.destroy(),o.destroy(),r=n=null}}})(t),t.schema=ws(RS(t)),t.dom=Re(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Nk(t),referrerPolicy:Ju(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)},force_hex_color:T_(t)}),t.parser=(a=>{const i=si(TS(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const u=a.dom,f="data-mce-"+c;let m=l.length;for(;m--;){const b=l[m];let g=b.attr(c);if(g&&!b.attr(f)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===c?(g=u.serializeStyle(u.parseStyle(g),b.name),g.length||(g=null),b.attr(f,g),b.attr(c,g)):"tabindex"===c?(b.attr(f,g),b.attr(c,null)):b.attr(f,a.convertURL(g,c,b.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const u=l[c],f=u.attr("type")||"no/type";0!==f.indexOf("mce-")&&u.attr("type","mce-"+f)}}),S_(a)&&i.addNodeFilter("#cdata",l=>{var c;let u=l.length;for(;u--;){const f=l[u];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode(null!==(c=f.value)&&void 0!==c?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const u=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(u)&&0===f.getAll("br").length&&f.append(new Vn("br",1))}}),i})(t),t.serializer=TC((a=>{const i=a.options.get;return{...TS(a),...RS(a),...og({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=AC(t.dom,t.getWin(),t.serializer,t),t.annotator=Jb(t),t.formatter=$C(t),t.undoManager=VC(t),t._nodeChangeDispatcher=new ZR(t),t._selectionOverrides=AO(t),(a=>{const i=Ss(),l=bn(!1),c=Uu(u=>{a.dispatch("longpress",{...u,type:"longpress"}),l.set(!0)},400);a.on("touchstart",u=>{Z1(u).each(f=>{c.cancel();const m={x:f.clientX,y:f.clientY,target:u.target};c.throttle(u),l.set(!1),i.set(m)})},!0),a.on("touchmove",u=>{c.cancel(),Z1(u).each(f=>{i.on(m=>{((b,g)=>{const v=Math.abs(b.clientX-g.x),h=Math.abs(b.clientY-g.y);return v>5||h>5})(f,m)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",u=>{c.cancel(),"touchcancel"!==u.type&&i.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{l.get()?u.preventDefault():a.dispatch("tap",{...u,type:"tap"})})},!0)})(t),(i=a=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{const c=N_(i);G(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const c=A_(i);G(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})})})(a),(a=>{const i="contenteditable",l=" "+lt.trim(x_(a))+" ",c=" "+lt.trim(rb(a))+" ",u=nx(l),f=nx(c),m=w_(a);m.length>0&&a.on("BeforeSetContent",b=>{((g,v,h)=>{let C=v.length,S=h.content;if("raw"!==h.format){for(;C--;)S=S.replace(v[C],GT(g,S,rb(g)));h.content=S}})(a,m,b)}),a.parser.addAttributeFilter("class",b=>{let g=b.length;for(;g--;){const v=b[g];u(v)?v.attr(i,"true"):f(v)&&v.attr(i,"false")}}),a.serializer.addAttributeFilter(i,b=>{let g=b.length;for(;g--;){const v=b[g];(u(v)||f(v))&&(m.length>0&&v.attr("data-mce-content")?(v.name="#text",v.type=3,v.raw=!0,v.value=v.attr("data-mce-content")):v.attr(i,null))}})})(t),Mo(t)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,r,o)=>{const s=X.fromRangeStart(n).getNode(),a=(f=r,m=o,_o(D(s),b=>Gr(b.dom)||m.isBlock(pe(b)),tS(f)).getOr(D(f)).dom),i=nS(s,a,!1),l=nS(s,a,!0),c=document.createRange();var f,m;return eS(i,a).fold(()=>{Zw(i)?c.setStart(i,0):c.setStartBefore(i)},u=>c.setStartBefore(u.dom)),eS(l,a).fold(()=>{Zw(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)},u=>c.setEndAfter(u.dom)),c})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(gm(e))})(a))})})(t),(a=>{(i=>{const l=[",",".",";",":","!","?"],c=[32],u=()=>{return b=y_(i),g=C_(i),{inlinePatterns:zh(b),blockPatterns:jh(b),dynamicPatternsLookup:g};var b,g},f=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",b=>{if(13===b.keyCode&&!ht.modifierPressed(b)&&i.selection.isCollapsed()){const g=u();(g.inlinePatterns.length>0||g.blockPatterns.length>0||f())&&((t,e)=>{const n=t.selection.getRng();return eg(t,n).map(r=>{var o;const s=Math.max(0,n.startOffset),a=vS(e,r,null!==(o=r.textContent)&&void 0!==o?o:""),i=_S(t,r,n.startContainer,s,a,!0),l=((c,u,f,m)=>{var b;const g=c.dom,v=jn(c);if(!g.is(u,v))return[];const h=null!==(b=u.textContent)&&void 0!==b?b:"";return((C,S)=>{const E=Uo(C,(O,M)=>M.start.length-O.start.length),A=S.replace(gn," ");return Ze(E,N=>0===S.indexOf(N.start)||0===A.indexOf(N.start))})(f.blockPatterns,h).map(C=>lt.trim(h).length===C.start.length?[]:[{pattern:C,range:tg(g,g.getRoot(),u,0,u,0,!0)}]).getOr([])})(t,r,a);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent(hn,{preserve_zwsp:!0}),NS(t,i),((f,m)=>{if(0===m.length)return;const b=f.selection.getBookmark();G(m,g=>((v,h)=>{const S=h.pattern,E=bS(v.dom.getRoot(),h.range).getOrDie("Unable to resolve path range");return eg(v,E).each(A=>{"block-format"===S.type?((N,O)=>{const M=O.get(N);return it(M)&&Pn(M).exists(j=>Jt(j,"block"))})(S.format,v.formatter)&&v.undoManager.transact(()=>{CS(v.dom,A,S),v.formatter.apply(S.format)}):"block-command"===S.type&&v.undoManager.transact(()=>{CS(v.dom,A,S),v.execCommand(S.cmd,!1,S.value)})}),!0})(f,g)),f.selection.moveToBookmark(b)})(t,l);const c=t.selection.getRng(),u=wp(c.startContainer,c.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),u.each(f=>{const m=f.container;"\ufeff"===m.data.charAt(f.offset-1)&&(m.deleteData(f.offset-1,1),gi(t.dom,m.parentNode,b=>b===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,g)&&b.preventDefault()}},!0);const m=()=>{if(i.selection.isCollapsed()){const b=u();(b.inlinePatterns.length>0||f())&&((g,v)=>{const h=g.selection.getRng();eg(g,h).map(C=>{const S=Math.max(0,h.startOffset-1),E=yS(g.dom,C,h.startContainer,S),A=vS(v,C,E),N=_S(g,C,h.startContainer,S,A,!1);N.length>0&&g.undoManager.transact(()=>{NS(g,N)})})})(i,b)}};i.on("keyup",b=>{AS(c,b,(g,v)=>g===v.keyCode&&!ht.modifierPressed(v))&&m()}),i.on("keypress",b=>{AS(l,b,(g,v)=>g.charCodeAt(0)===v.charCode)&&Or.setEditorTimeout(i,m)})})(a)})(t));const o=JR(t);((t,e)=>{t.addCommand("delete",()=>{var n;J1(n=t,e,!1).fold(()=>{n.selection.isEditable()&&(tm(n),em(n))},Gn)}),t.addCommand("forwardDelete",()=>{var n;J1(n=t,e,!0).fold(()=>{n.selection.isEditable()&&Nv(n,"ForwardDelete")},Gn)})})(t,o),(a=>{a.on("NodeChange",vt(YT,a))})(t),(a=>{var i;const l=a.dom,c=jn(a),u=null!==(i=Lk(a))&&void 0!==i?i:"",f=(m,b)=>{if((h=>{if(XC(h)){const C=h.keyCode;return!YC(h)&&(ht.metaKeyPressed(h)||h.altKey||C>=112&&C<=123||At(fT,C))}return!1})(m))return;const g=a.getBody(),v=!(XC(h=m)&&!(YC(h)||"keyup"===h.type&&229===h.keyCode))&&((h,C,S)=>{if(Qe(D(C),!1)){const E=C.firstElementChild;return!E||!h.getStyle(C.firstElementChild,"padding-left")&&!h.getStyle(C.firstElementChild,"padding-right")&&S===E.nodeName.toLowerCase()}return!1})(l,g,c);var h;(""!==l.getAttrib(g,KC)!==v||b)&&(l.setAttrib(g,KC,v?u:null),l.setAttrib(g,"aria-placeholder",v?u:null),((h,C)=>{h.dispatch("PlaceholderToggle",{state:C})})(a,v),a.on(v?"keydown":"keyup",f),a.off(v?"keyup":"keydown",f))};Jn(u)&&a.on("init",m=>{f(m,!0),a.on("change SetContent ExecCommand",f),a.on("paste",b=>Or.setEditorTimeout(a,()=>f(b)))})})(t),(t=>{const e=bn(!1),n=bn(h_(t)?"text":"html"),r=(o=>{const s=bn(null);return{create:()=>((a,i)=>{const{dom:l,selection:c}=a,u=a.getBody();i.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Iw);be.browser.isFirefox()&&l.setStyle(f,"left","rtl"===l.getStyle(u,"direction",!0)?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),f.focus(),c.select(f,!0)})(o,s),remove:()=>((a,i)=>{const l=a.dom;if(Xp(a)){let c;const u=i.get();for(;c=Xp(a);)l.remove(c),l.unbind(c);u&&a.selection.setRng(u)}i.set(null)})(o,s),getEl:()=>Xp(o),getHtml:()=>(a=>{const i=a.dom,l=(m,b)=>{m.appendChild(b),i.remove(b,!0)},[c,...u]=Wt(a.getBody().childNodes,iO);G(u,m=>{l(c,m)});const f=i.select("div[id=mcepastebin]",c);for(let m=f.length-1;m>=0;m--){const b=i.create("div");c.insertBefore(b,f[m]),l(b,f[m])}return c?c.innerHTML:""})(o),getLastRng:s.get}})(t);var o,s,a;o=t,(be.browser.isChromium()||be.browser.isSafari())&&(a=pO,(s=o).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((o,s)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),s0(a,!1)):(i.set("text"),s0(a,!0)),a.focus()})(o,s)}),o.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Hd(o,i.html,i.internal,!1),i.text&&Qp(o,i.text,!1)})})(t,n),(o=>{const s=l=>c=>{l(o,c)},a=c_(o);Ce(a)&&o.on("PastePreProcess",s(a));const i=d_(o);Ce(i)&&o.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(o=>{o.on("cut",(s=>a=>{!a.isDefaultPrevented()&&Yw(s)&&s.selection.isEditable()&&Vw(a,Xw(s),Kw(s),()=>{if(be.browser.isChromium()||be.browser.isFirefox()){const i=s.selection.getRng();Or.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(o)),o.on("copy",(s=>a=>{!a.isDefaultPrevented()&&Yw(s)&&Vw(a,Xw(s),Kw(s),St)})(o))})(t),((o,s)=>{l_(o)&&o.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Bc(o)||o.on("drop",a=>{const i=a.dataTransfer;i&&Ne(i.files,c=>/^image\//.test(c.type))&&a.preventDefault()}),o.on("drop",a=>{if(a.isDefaultPrevented())return;const i=Gw(o,a);if(Se(i))return;const l=qw(a.dataTransfer),c=Bs(l,Ud());if((!$w(l)||(g=>{const v=g["text/plain"];return!!v&&0===v.indexOf("file://")})(l))&&Ww(o,a,i))return;const u=l[Ud()],f=u||l["text/html"]||l["text/plain"],m=((g,v,h,C)=>{const S=g.getParent(h,E=>Gs(v,E));if(!Zt(g.getParent(h,"summary")))return!0;if(S&&Jt(C,"text/html")){const E=(new DOMParser).parseFromString(C["text/html"],"text/html").body;return!Zt(E.querySelector(S.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,i.startContainer,l),b=s.get();b&&!m||f&&(a.preventDefault(),Or.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{(u||b&&m)&&o.execCommand("Delete"),Qw(o,i);const g=zw(f);l["text/html"]?Hd(o,g,c,!0):Qp(o,g,!0)})}))}),o.on("dragstart",a=>{s.set(!0)}),o.on("dragover dragend",a=>{Bc(o)&&!s.get()&&(a.preventDefault(),Qw(o,Gw(o,a))),"dragend"===a.type&&s.set(!1)}),(a=>{a.on("input",i=>{const l=c=>Zt(c.querySelector("summary"));if("deleteByDrag"===i.inputType){const c=Wt(a.dom.select("details"),l);G(c,u=>{Ve(u.firstChild)&&u.firstChild.remove();const f=a.dom.create("summary");f.appendChild(Hi().dom),u.prepend(f)})}})})(o)})(t,e),((t,e,n)=>{((r,o,s)=>{let a;r.on("keydown",i=>{var l;(ht.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),r.on("paste",i=>{if(i.isDefaultPrevented()||(u=i,be.os.isAndroid()&&0===(null===(m=null===(f=u.clipboardData)||void 0===f?void 0:f.items)||void 0===m?void 0:m.length)))return;var u,f,m;const l="text"===s.get()||a;a=!1;const c=qw(i.clipboardData);!$w(c)&&Ww(r,i,o.getLastRng()||r.selection.getRng())||(Bs(c,"text/html")?(i.preventDefault(),Jp(r,c,c["text/html"],l,!0)):Bs(c,"text/plain")&&Bs(c,"text/uri-list")?(i.preventDefault(),Jp(r,c,c["text/plain"],l,!0)):(o.create(),Or.setEditorTimeout(r,()=>{const u=o.getHtml();o.remove(),Jp(r,c,u,l,!1)},0)))})})(t,e,n),(r=>{const o=a=>sn(a,"webkit-fake-url"),s=a=>sn(a,"data:");r.parser.addNodeFilter("img",(a,i,l)=>{if(!Bc(r)&&!0===(null===(u=l.data)||void 0===u?void 0:u.paste))for(const c of a){const u=c.attr("src");kt(u)&&!c.attr("data-mce-object")&&u!==be.transparentSrc&&(o(u)||!v_(r)&&s(u))&&c.remove()}var u})})(t)})(t,r,n)})})(t);const s=(a=>{const i=a;return(l=a,Te(l.plugins,"rtc").bind(c=>k.from(c.setup))).fold(()=>(i.rtcInstance=wC(a),k.none()),l=>(i.rtcInstance=(()=>{const c=ft(null),u=ft("");return{init:{bindEvents:St},undoManager:{beforeChange:St,add:c,undo:c,redo:c,clear:St,reset:St,hasUndo:ke,hasRedo:ke,transact:c,ignore:St,extra:St},formatter:{match:ke,matchAll:ft([]),matchNode:ft(void 0),canApply:ke,closest:u,apply:St,remove:St,toggle:St,formatChanged:ft({unbind:St})},editor:{getContent:u,setContent:ft({content:"",html:""}),insertContent:ft(""),addVisual:St},selection:{getContent:u},autocompleter:{addDecoration:St,removeDecoration:St},raw:{getModel:ft(k.none())}}})(),k.some(()=>l().then(c=>(i.rtcInstance=(u=>{const f=E=>Gt(E)?E:{},{init:m,undoManager:b,formatter:g,editor:v,selection:h,autocompleter:C,raw:S}=u;return{init:{bindEvents:m.bindEvents},undoManager:{beforeChange:b.beforeChange,add:b.add,undo:b.undo,redo:b.redo,clear:b.clear,reset:b.reset,hasUndo:b.hasUndo,hasRedo:b.hasRedo,transact:(E,A,N)=>b.transact(N),ignore:(E,A)=>b.ignore(A),extra:(E,A,N,O)=>b.extra(N,O)},formatter:{match:(E,A,N,O)=>g.match(E,f(A),O),matchAll:g.matchAll,matchNode:g.matchNode,canApply:E=>g.canApply(E),closest:E=>g.closest(E),apply:(E,A,N)=>g.apply(E,f(A)),remove:(E,A,N,O)=>g.remove(E,f(A)),toggle:(E,A,N)=>g.toggle(E,f(A)),formatChanged:(E,A,N,O,M)=>g.formatChanged(A,N,O,M)},editor:{getContent:E=>v.getContent(E),setContent:(E,A)=>({content:v.setContent(E,A),html:""}),insertContent:(E,A)=>(v.insertContent(E),""),addVisual:v.addVisual},selection:{getContent:(E,A)=>h.getContent(A)},autocompleter:{addDecoration:C.addDecoration,removeDecoration:C.removeDecoration},raw:{getModel:()=>k.some(S.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),a_(a)||(i.body.spellcheck=!1,rg.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=lt.each,n=ht.BACKSPACE,r=ht.DELETE,o=t.dom,s=t.selection,a=t.parser,i=be.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),u=be.deviceType.isiPhone()||be.deviceType.isiPad(),f=be.os.isMacOS()||be.os.isiOS(),m=(P,I)=>{try{t.getDoc().execCommand(P,!1,String(I))}catch{}},b=P=>P.isDefaultPrevented(),g=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},v=()=>{t.inline||o.bind(t.getDoc(),"mousedown mouseup",P=>{let I;if(P.target===t.getDoc().documentElement)if(I=s.getRng(),t.getBody().focus(),"mousedown"===P.type){if(_r(I.startContainer))return;s.placeCaretAt(P.clientX,P.clientY)}else s.setRng(I)})},h=()=>{Range.prototype.getClientRects||t.on("mousedown",P=>{if(!b(P)&&"HTML"===P.target.nodeName){const I=t.getBody();I.blur(),Or.setEditorTimeout(t,()=>{I.focus()})}})},C=()=>{const P=nb(t);t.on("click",I=>{const q=I.target;/^(IMG|HR)$/.test(q.nodeName)&&o.isEditable(q)&&(I.preventDefault(),t.selection.select(q),t.nodeChanged()),"A"===q.nodeName&&o.hasClass(q,P)&&0===q.childNodes.length&&o.isEditable(q.parentNode)&&(I.preventDefault(),s.select(q))})},S=()=>{t.on("keydown",P=>{if(!b(P)&&P.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const I=s.getNode().previousSibling;if(I&&I.nodeName&&"table"===I.nodeName.toLowerCase())return P.preventDefault(),!1}return!0})},E=()=>{tb(t)||t.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),Jh(t)||m("enableObjectResizing",!1)})},A=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},N=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},O=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",P=>{let I;"HTML"===P.target.nodeName&&(I=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(I),t.selection.normalize(),t.nodeChanged())}))},M=()=>{f&&t.on("keydown",P=>{!ht.metaKeyPressed(P)||P.shiftKey||37!==P.keyCode&&39!==P.keyCode||(P.preventDefault(),t.selection.getSel().modify("move",37===P.keyCode?"backward":"forward","lineboundary"))})},j=()=>{t.on("click",P=>{let I=P.target;do{if("A"===I.tagName)return void P.preventDefault()}while(I=I.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},H=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",P=>{P.preventDefault()})})},W=St;return Mo(t)?(c&&(v(),C(),H(),g(),u&&(N(),O(),j())),l&&(h(),E(),A(),M())):(t.on("keydown",P=>{if(b(P)||P.keyCode!==ht.BACKSPACE)return;let I=s.getRng();const q=I.startContainer,Q=I.startOffset,mt=o.getRoot();let ct=q;if(I.collapsed&&0===Q){for(;ct.parentNode&&ct.parentNode.firstChild===ct&&ct.parentNode!==mt;)ct=ct.parentNode;"BLOCKQUOTE"===ct.nodeName&&(t.formatter.toggle("blockquote",void 0,ct),I=o.createRng(),I.setStart(q,0),I.setEnd(q,0),s.setRng(I))}}),(()=>{const P=I=>{const q=o.create("body"),Q=I.cloneContents();return q.appendChild(Q),s.serializer.serialize(q,{format:"html"})};t.on("keydown",I=>{const q=I.keyCode;if(!b(I)&&(q===r||q===n)&&t.selection.isEditable()){const Q=t.selection.isCollapsed(),mt=t.getBody();if(Q&&!Qe(D(mt))||!Q&&!(ct=>{const Rt=P(ct),Nt=o.createRng();return Nt.selectNode(t.getBody()),Rt===P(Nt)})(t.selection.getRng()))return;I.preventDefault(),t.setContent(""),mt.firstChild&&o.isBlock(mt.firstChild)?t.selection.setCursorLocation(mt.firstChild,0):t.selection.setCursorLocation(mt,0),t.nodeChanged()}})})(),be.windowsPhone||t.on("keyup focusin mouseup",P=>{ht.modifierPressed(P)||(I=>{const q=I.getBody(),Q=I.selection.getRng();return Q.startContainer===Q.endContainer&&Q.startContainer===q&&0===Q.startOffset&&Q.endOffset===q.childNodes.length})(t)||s.normalize()},!0),c&&(v(),C(),t.on("init",()=>{m("DefaultParagraphSeparator",jn(t))}),H(),S(),a.addNodeFilter("br",P=>{let I=P.length;for(;I--;)"Apple-interchange-newline"===P[I].attr("class")&&P[I].remove()}),u?(N(),O(),j()):g()),l&&(t.on("keydown",P=>{if(!b(P)&&P.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const I=s.getNode(),q=I.previousSibling;if("HR"===I.nodeName)return o.remove(I),void P.preventDefault();q&&q.nodeName&&"hr"===q.nodeName.toLowerCase()&&(o.remove(q),P.preventDefault())}}}),h(),(()=>{const P=()=>{const q=o.getAttribs(s.getStart().cloneNode(!1));return()=>{const Q=s.getStart();Q!==t.getBody()&&(o.setAttrib(Q,"style",null),e(q,mt=>{Q.setAttributeNode(mt.cloneNode(!0))}))}},I=()=>!s.isCollapsed()&&o.getParent(s.getStart(),o.isBlock)!==o.getParent(s.getEnd(),o.isBlock);t.on("keypress",q=>{let Q;return!(!(b(q)||8!==q.keyCode&&46!==q.keyCode)&&I()&&(Q=P(),t.getDoc().execCommand("delete",!1),Q(),q.preventDefault(),1))}),o.bind(t.getDoc(),"cut",q=>{if(!b(q)&&I()){const Q=P();Or.setEditorTimeout(t,()=>{Q()})}})})(),E(),t.on("SetContent ExecCommand",P=>{"setcontent"!==P.type&&"mceInsertLink"!==P.command||e(o.select("a:not([data-mce-block])"),I=>{var q;let Q=I.parentNode;const mt=o.getRoot();if(Q?.lastChild===I){for(;Q&&!o.isBlock(Q);){if((null===(q=Q.parentNode)||void 0===q?void 0:q.lastChild)!==Q||Q===mt)return;Q=Q.parentNode}o.add(Q,"br",{"data-mce-bogus":1})}})}),A(),M(),S(),t.on("drop",P=>{var I;const q=null===(I=P.dataTransfer)||void 0===I?void 0:I.getData("text/html");kt(q)&&/^<img[^>]*>$/.test(q)&&t.dispatch("dragend",new window.DragEvent("dragend",P))}))),{refreshContentEditable:W,isHidden:()=>{if(!l||t.removed)return!1;const P=t.selection.getSel();return!P||!P.rangeCount||0===P.rangeCount}}})(a),a.dispatch("PostRender");const c=Dk(a);void 0!==c&&(l.dir=c);const u=i_(a);u&&a.on("BeforeSetContent",f=>{lt.each(u,m=>{f.content=f.content.replace(m,b=>"\x3c!--mce:protected "+escape(b)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing="compositionstart"===f.type})})(t),s.fold(()=>{const a=(i=>{let l=!1;const c=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(t);OS(t).then(()=>{ag(t),a()})},a=>{t.setProgressState(!0),OS(t).then(()=>{a().then(i=>{t.setProgressState(!1),ag(t),SC(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),ag(t),SC(t)})})})},PO=Ie,ig=Re.DOM,BS=Re.DOM,PS=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),LS=t=>{const e=t.getElement();return t.inline?PS(null):(n=>{const r=BS.create("div");return BS.insertAfter(r,n),PS(r,r)})(e)},LO=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const r=lt.trim(Xh(n)),o=n.ui.registry.getAll().icons,s={...gd.get("default").icons,...gd.get(r).icons};Ae(s,(a,i)=>{Jt(o,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const r=Ka(n);if(kt(r)){const o=ga.get(r);n.theme=o(n,ga.urls[r])||{},Ce(n.theme.init)&&n.theme.init(n,ga.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const r=Zu(n),o=ai.get(r);n.model=o(n,ai.urls[r])})(t),(n=>{const r=[];G(Dc(n),o=>{((s,a,i)=>{const l=ii.get(i),c=ii.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=lt.trim(i),l&&-1===lt.inArray(a,i)){if(s.plugins[i])return;try{const u=l(s,c)||{};s.plugins[i]=u,Ce(u.init)&&(u.init(s,c),a.push(i))}catch(u){((f,m,b)=>{const g=fo.translate(["Failed to initialize plugin: {0}",m]);t0(f,"PluginLoadError",{message:g}),bd(g,b),hd(f,g)})(s,i,u)}}})(n,r,o.replace(/^\-/,""))})})(t);const e=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,kt(Ka(n))?(o=>{const s=o.theme.renderUI;return s?s():LS(o)})(n):Ce(Ka(n))?(o=>{const s=o.getElement(),a=Ka(o)(o,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||o.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||o.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):LS(n)})(t);var n,r;((n,r)=>{const o={show:k.from(r.show).getOr(St),hide:k.from(r.hide).getOr(St),isEnabled:k.from(r.isEnabled).getOr(Ie),setEnabled:s=>{n.mode.isReadOnly()||k.from(r.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...o}})(t,k.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(FC(r=n,Rk(r)),(r=>FC(r,Qh(r)))(n)),t.inline?DS(t):((n,r)=>{((o,s)=>{const a=o.translate("Rich Text Area"),i=ao(D(o.getElement()),"tabindex").bind(zs),l=((c,u,f,m)=>{const b=ot("iframe");return m.each(g=>an(b,"tabindex",g)),xr(b,f),xr(b,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:u}),U(b,"tox-edit-area__iframe"),b})(o.id,a,uk(o),i).dom;l.onload=()=>{l.onload=null,o.dispatch("load")},o.contentAreaContainer=s.iframeContainer,o.iframeElement=l,o.iframeHTML=(c=>{let u=fk(c)+"<html><head>";$h(c)!==c.documentBaseUrl&&(u+='<base href="'+c.documentBaseURI.getURI()+'" />'),u+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const f=mk(c),m=pk(c),b=c.translate(e_(c));return Wh(c)&&(u+='<meta http-equiv="Content-Security-Policy" content="'+Wh(c)+'" />'),u+=`</head><body id="${f}" class="mce-content-body ${m}" data-id="${c.id}" aria-label="${b}"><br></body></html>`,u})(o),ig.add(s.iframeContainer,l)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=ig.isHidden(r.editorContainer)),n.getElement().style.display="none",ig.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const s=o.iframeElement,a=()=>{o.contentDocument=s.contentDocument,DS(o)};if(k_(o)||be.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close(),a()}else{const l=((t,e,n,r)=>((o,s,a,i,l)=>{const c=((u,f)=>m=>{u(m)&&f((b=>{const g=D(Go(b).getOr(b.target)),v=()=>b.stopPropagation(),h=()=>b.preventDefault(),C=Dn(h,v);return((S,E,A,N,O,M,j)=>({target:S,x:E,y:A,stop:N,prevent:O,kill:M,raw:j}))(g,b.clientX,b.clientY,v,h,C,b)})(m))})(a,i);return o.dom.addEventListener(s,c,!1),{unbind:vt(kr,o,s,c,!1)}})(t,"load",n,()=>{l.unbind(),a()}))(D(s),0,PO);s.srcdoc=o.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},ba=Re.DOM,MS=t=>"-"===t.charAt(0),IS=(t,e,n)=>k.from(e).filter(r=>Jn(r)&&!gd.has(r)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:k.some(r)})),FS=Ln().deviceType,jS=FS.isPhone(),IO=FS.isTablet(),Vl=t=>{if(Se(t))return[];{const e=it(t)?t:t.split(/[ ,]/),n=ee(e,so);return Wt(n,Jn)}},lg=(t,e)=>Jt(t.sections(),e),jO=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Te(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),zO=(t,e)=>{var n;const r=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?lt.extend({},t.external_plugins,r):r},qO=(t,e)=>{const n=t.selection,r=t.dom;return/^ | $/.test(e)?((o,s,a,i)=>{const l=D(o.getRoot());return a=yl(l,X.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Cl(l,X.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),e,t.schema):e},Kd=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const s=lt.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:s}}return{content:o,details:{}}})(e);Um(t,{...r,content:qO(t,n),format:"html",set:!1,selection:!0}).each(o=>{const s=(i=o.content,l=r,Xm(t).editor.insertContent(i,l));var i,l;Hm(t,s,o),t.addVisual()})}},$O={"font-size":"size","font-family":"face"},WO=Eo("font"),zS=t=>(e,n)=>k.from(n).map(D).filter($n).bind(r=>{return(o=t,s=e,a=r.dom,ym(D(a),i=>{return rt(l=i,o).orThunk(()=>WO(l)?Te($O,o).bind(c=>ao(l,c)):k.none());var l},i=>ue(D(s),i))).or(((o,s)=>k.from(Re.DOM.getStyle(s,o,!0)))(t,r.dom));var o,s,a}).getOr(""),VO=zS("font-size"),KO=Dn(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),zS("font-family")),XO=t=>zn(t.getBody()).bind(e=>{const n=e.container();return k.from(at(n)?n.parentNode:n)}),cg=(t,e)=>{return n=t,r=Ls(k.some,e),(o=n,k.from(o.selection.getRng()).bind(s=>{const a=o.getBody();return s.startContainer===a&&0===s.startOffset?k.none():k.from(o.selection.getStart(!0))})).orThunk(vt(XO,n)).map(D).filter($n).bind(r);var n,r,o},US=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const r=lt.explode(t.options.get("font_size_style_values")),o=lt.explode(t.options.get("font_size_classes"));return o.length>0?o[n-1]||e:r[n-1]||e}return e}return e},YO=t=>{const e=t.split(/\s*,\s*/);return ee(e,n=>-1===n.indexOf(" ")||sn(n,'"')||sn(n,"'")?n:`'${n}'`).join(",")},HS=(t,e)=>{const n=t.dom,r=t.selection.getRng(),o=e?t.selection.getStart():t.selection.getEnd(),s=e?r.startContainer:r.endContainer,a=Ul(n,s);if(!a||!a.isContentEditable)return;const i=e?_t:zt,l=jn(t);((c,u,f,m)=>{const b=c.dom,g=h=>b.isBlock(h)&&h.parentElement===f,v=g(u)?u:b.getParent(m,g,f);return k.from(v).map(D)})(t,o,a,s).each(c=>{const u=iw(t,s,c.dom,a,!1,l);i(c,D(u)),t.selection.setCursorLocation(u,0),t.dispatch("NewBlock",{newBlock:u}),zl(t,"insertParagraph")})},QO=["toggleview"],qS=t=>At(QO,t.toLowerCase());class $S{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,r,o){const s=this.editor,a=e.toLowerCase(),i=o?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?Mf(c=s).each(u=>c.selection.setRng(u)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:r}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[a];return!!Ce(l)&&(l(a,n,r),s.dispatch("ExecCommand",{command:e,ui:n,value:r}),!0)}queryCommandState(e){if(!qS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),r=this.commands.state[n];return!!Ce(r)&&r(n)}queryCommandValue(e){if(!qS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),r=this.commands.value[n];return Ce(r)?r(n):""}addCommands(e,n="exec"){const r=this.commands;Ae(e,(o,s)=>{G(s.toLowerCase().split(","),a=>{r[n][a]=o})})}addCommand(e,n,r){const o=e.toLowerCase();this.commands.exec[o]=(s,a,i)=>n.call(r??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,r){this.commands.state[e.toLowerCase()]=()=>n.call(r??this.editor)}addQueryValueHandler(e,n,r){this.commands.value[e.toLowerCase()]=()=>n.call(r??this.editor)}}const va="data-mce-contenteditable",dg=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Xd=(t,e)=>{t.dom.contentEditable=e?"true":"false"},ya=t=>t.readonly,WS=t=>{t.parser.addAttributeFilter("contenteditable",e=>{ya(t)&&G(e,n=>{n.attr(va,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(va,e=>{ya(t)&&G(e,n=>{n.attr("contenteditable",n.attr(va))})}),t.serializer.addTempAttr(va)},JO=["copy"],ZO=lt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class ug{static isNative(e){return!!ZO[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ke}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const r=e.toLowerCase(),o=Mu(r,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const s=this.bindings[r];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(!1===l.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(e,n,r,o){if(!1===n&&(n=ke),n){const s={func:n,removed:!1};o&&lt.extend(s,o);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=r?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(e,n){if(e){const r=e.toLowerCase().split(" ");let o=r.length;for(;o--;){const s=r[o];let a=this.bindings[s];if(!s)return Ae(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=Ur(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,G(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else Ae(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(e,n,r){return this.on(e,n,r,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const Kl=t=>(t._eventDispatcher||(t._eventDispatcher=new ug({scope:t,toggleEvent:(e,n)=>{ug.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),fg={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const r=this;if(r.removed&&"remove"!==t&&"detach"!==t)return Mu(t.toLowerCase(),e??{},r);const o=Kl(r).dispatch(t,e);if(!1!==n&&r.parent){let s=r.parent();for(;s&&!o.isPropagationStopped();)s.dispatch(t,o,!1),s=s.parent?s.parent():void 0}return o},on(t,e,n){return Kl(this).on(t,e,n)},off(t,e){return Kl(this).off(t,e)},once(t,e){return Kl(this).once(t,e)},hasEventListeners(t){return Kl(this).has(t)}},Yd=Re.DOM;let Ca;const Gd=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=Zh(t);return n?(t.eventRoot||(t.eventRoot=Yd.select(n)[0]),t.eventRoot):t.getBody()},VS=(t,e,n)=>{var r;(r=t).hidden||ya(r)?ya(t)&&((r,o)=>{if("click"!==o.type||ht.metaKeyPressed(o))At(JO,o.type)&&r.dispatch(o.type,o);else{const s=D(o.target);(a=r,i=s,lo(i,"a",l=>ue(l,D(a.getBody()))).bind(l=>ao(l,"href"))).each(a=>{if(o.preventDefault(),/^#/.test(a)){const i=r.dom.select(`${a},[name="${wi(a,"#")}"]`);i.length&&r.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},KS=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=Gd(t,e);if(Zh(t)){if(Ca||(Ca={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Ca&&(Ae(Ca,(o,s)=>{t.dom.unbind(Gd(t,s))}),Ca=null)})),Ca[e])return;const r=o=>{const s=o.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||Yd.isChildOf(s,l))&&VS(a[i],e,o)}};Ca[e]=r,Yd.bind(n,e,r)}else{const r=o=>{VS(t,e,o)};Yd.bind(n,e,r),t.delegates[e]=r}},XS={...fg,bindPendingEventDelegates(){const t=this;lt.each(t._pendingNativeEvents,e=>{KS(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?KS(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(Gd(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Ae(t.delegates,(r,o)=>{t.dom.unbind(Gd(t,o),o,r)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},tD=t=>kt(t)?{value:t.split(/[ ,]/),valid:!0}:Hn(t,kt)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},YS=(t,e)=>t+(cs(e.message)?"":`. ${e.message}`),GS=t=>t.valid,mg=(t,e,n="")=>{const r=e(t);return Un(r)?r?{value:t,valid:!0}:{valid:!1,message:n}:r},eD=["design","readonly"],QS=(t,e,n,r)=>{const o=n[e.get()],s=n[r];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${r}:`,a)}var a;o.deactivate(),o.editorReadOnly!==s.editorReadOnly&&((a,i)=>{const l=D(a.getBody());var c,u,f;f=i,Z(c=l,u="mce-content-readonly")&&!f?K(c,u):f&&U(c,u),i?(a.selection.controlSelection.hideResizeRect(),a._selectionOverrides.hideFakeCaret(),(c=>{k.from(c.selection.getNode()).each(u=>{u.removeAttribute("data-mce-selected")})})(a),a.readonly=!0,Xd(l,!1),G(Fn(l,'*[contenteditable="true"]'),c=>{an(c,va,"true"),Xd(c,!1)})):(a.readonly=!1,a.hasEditableRoot()&&Xd(l,!0),G(Fn(l,`*[${va}="true"]`),c=>{d(c,va),Xd(c,!0)}),dg(a,"StyleWithCSS",!1),dg(a,"enableInlineTableEditing",!1),dg(a,"enableObjectResizing",!1),D0(a)&&a.focus(),(c=>{c.selection.setRng(c.selection.getRng())})(a),a.nodeChanged())})(t,s.editorReadOnly),e.set(r),(a=t).dispatch("SwitchMode",{mode:r})},pg=lt.each,gg=lt.explode,nD={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},JS=lt.makeMap("alt,ctrl,shift,meta,access"),rD=t=>{const e={},n=be.os.isMacOS()||be.os.isiOS();pg(gg(t.toLowerCase(),"+"),s=>{s in JS?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=nD[s]||s.toUpperCase().charCodeAt(0))});const r=[e.keyCode];let o;for(o in JS)e[o]?r.push(o):e[o]=!1;return e.id=r.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class ZS{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(pg(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,r,o){const s=this,a=s.normalizeCommandFunc(r);return pg(gg(lt.trim(e)),i=>{const l=s.createShortcut(i,n,a,o);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,r=e;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:lt.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,n,r,o){const s=lt.map(gg(e,">"),rD);return s[s.length-1]=lt.extend(s[s.length-1],{func:r,scope:o||this.editor}),lt.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const oD=()=>{const t=(()=>{const e={},n={},r={},o={},s={},a={},i={},l={},c=(u,f)=>(m,b)=>{u[m.toLowerCase()]={...b,type:f}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(r,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(a,"contexttoolbar"),addContextForm:c(a,"contextform"),addSidebar:c(i,"sidebar"),addView:c(l,"views"),addIcon:(u,f)=>o[u.toLowerCase()]=f,getAll:()=>({buttons:e,menuItems:n,icons:o,popups:r,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},xa=Re.DOM,tE=lt.extend,sD=lt.each;class Qd{constructor(e,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,tE(this,XS);const o=this;this.id=e,this.hidden=!1;const s=((t,e,n,r,o)=>{var s;const a=t?{mobile:jO(null!==(s=o.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return qo(s,(c,u)=>At(t,u),Na(i),Na(l)),{t:i,f:l}})(e);return o=n.f,{sections:ft(n.t),options:ft(o)};var o})(["mobile"],Ap(a,o)),l=lt.extend(n,r,i.options(),t&&lg(i,"mobile")?((c,u,f={})=>{const m=c.sections(),b=Te(m,u).getOr({});return lt.extend({},f,b)})(i,"mobile"):{},{external_plugins:zO(r,i.options())});return((c,u,f,m)=>{const b=Vl(f.forced_plugins),g=Vl(m.plugins),v=lg(S=u,"mobile")?S.sections().mobile:{},h=((S,E,A,N)=>S&&lg(E,"mobile")?N:A)(c,u,g,v.plugins?Vl(v.plugins):g),C=((S,E)=>[...Vl(S),...Vl(E)])(b,h);var S;return lt.extend(m,{forced_plugins:b,plugins:C})})(t,i,r,l)})(jS||IO,jS,g=n,r.defaultOptions,g);var g;this.options=((b,g)=>{const v={},h={},C=(E,A,N)=>{const O=mg(A,N);return GS(O)?(h[E]=O.value,!0):(console.warn(YS(`Invalid value passed for the ${E} option`,O)),!1)},S=E=>Jt(v,E);return{register:(E,A)=>{const N=kt(A.processor)?(M=>{const j=(()=>{switch(M){case"array":return it;case"boolean":return Un;case"function":return Ce;case"number":return x;case"object":return Gt;case"string":return kt;case"string[]":return tD;case"object[]":return H=>Hn(H,Gt);case"regexp":return H=>yr(H,RegExp);default:return Ie}})();return H=>mg(H,j,`The value must be a ${M}.`)})(A.processor):A.processor,O=((M,j,H)=>{if(!Me(j)){const W=mg(j,H);if(GS(W))return W.value;console.error(YS(`Invalid default value passed for the "${M}" option`,W))}})(E,A.default,N);v[E]={...A,default:O,processor:N},Te(h,E).orThunk(()=>Te(g,E)).each(M=>C(E,M,N))},isRegistered:S,get:E=>Te(h,E).orThunk(()=>Te(v,E).map(A=>A.default)).getOrUndefined(),set:(E,A)=>{if(S(E)){const N=v[E];return N.immutable?(console.error(`"${E}" is an immutable option and cannot be updated`),!1):C(E,A,N.processor)}return console.warn(`"${E}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:E=>{const A=S(E);return A&&delete h[E],A},isSet:E=>Jt(h,E)}})(0,s),(b=>{const g=b.options.register;g("id",{processor:"string",default:b.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:b.documentBaseUrl}),g("body_id",{processor:qh(b,"tinymce"),default:"tinymce"}),g("body_class",{processor:qh(b),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:v=>{const h=kt(v)&&Jn(v);return h?{value:v,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:v=>{const h=At(["block","linebreak","invert","default"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:v=>Un(v)||kt(v)?{valid:!0,value:v}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:v=>{const h=!1===v||kt(v)||Hn(v,kt);return h?kt(v)?{value:ee(v.split(","),so),valid:h}:it(v)?{value:v,valid:h}:!1===v?{value:[],valid:h}:{value:v,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:tf(b)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:v=>{const h=kt(v)||Hn(v,kt);return h?{value:it(v)?v:ee(v.split(","),so),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:v=>{const h=Un(v)||kt(v);return h?!1===v||Gu.isiPhone()||Gu.isiPad()?{value:"",valid:h}:{value:!0===v?"table,img,figure.image,div,video,iframe":v,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!ck}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"object"}),g("service_message",{processor:"string"}),g("theme",{processor:v=>!1===v||kt(v)||Ce(v),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:v=>{const h=!1===v||kt(v);return h?{value:!1===v?"":v,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:b.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:b.convertURL}),g("url_converter_scope",{processor:"object",default:b}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:"string"}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:Qu}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:Qu}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:Qu}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:v=>kt(v)||!0===v}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:v=>Hn(v,Gt)||!1===v?{value:Uh(!1===v?[]:v),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),g("text_patterns_lookup",{processor:v=>{return Ce(v)?{value:(h=v,C=>{const S=h(C);return Uh(S)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:v=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:v=>Hn(v,Hh)?{value:v,valid:!0}:Hh(v)?{value:[v],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!1}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:v=>{const h=At(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:v=>{const h=At(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("force_hex_color",{processor:v=>{const h=["always","rgb_only","off"],C=At(h,v);return C?{value:v,valid:C}:{valid:!1,message:`Must be one of: ${h.join(", ")}.`}},default:"off"}),g("sandbox_iframes",{processor:"boolean",default:!1}),g("convert_unsafe_embeds",{processor:"boolean",default:!1}),b.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:fo.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:dk.getAttrib(b.getElement(),"placeholder")})})})(o);const a=this.options.get;a("deprecation_warnings")&&((b,g)=>{((v,h)=>{const C=(t=>{const e=OC(t,VA),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),Uo(e)})(v),S=(t=>DC(t,XA))(h),E=S.length>0,A=C.length>0,N="mobile"===h.theme;if(E||A||N){const O="\n- ",M=N?`\n\nThemes:${O}mobile`:"",j=E?`\n\nPlugins:${O}${S.join(O)}`:"",H=A?`\n\nOptions:${O}${C.join(O)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+M+j+H)}})(b,g),((v,h)=>{const C=(t=>OC(t,KA))(v),S=(t=>DC(t,RC.map(e=>e.name)))(h),E=S.length>0,A=C.length>0;if(E||A){const N="\n- ",O=E?`\n\nPlugins:${N}${S.map(ZA).join(N)}`:"",M=A?`\n\nOptions:${N}${C.join(N)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+O+M)}})(b,g)})(n,s);const i=a("suffix");i&&(r.suffix=i),this.suffix=r.suffix;const l=a("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const c=Ju(o);c&&(ts.ScriptLoader._setReferrerPolicy(c),Re.DOM.styleSheetLoader._setReferrerPolicy(c));const u=eb(o);dt(u)&&Re.DOM.styleSheetLoader._setContentCssCors(u),Wn.languageLoad=a("language_load"),Wn.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new to($h(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=tf(o),this.hasVisual=Zk(o),this.shortcuts=new ZS(this),this.editorCommands=new $S(this),(t=>{var e;(t=>{(e=>{const n=r=>()=>{G("left,center,right,justify".split(","),o=>{r!==o&&e.formatter.remove("align"+o)}),"none"!==r&&(e.formatter.toggle("align"+r,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=r=>()=>{const o=e.selection,s=o.isCollapsed()?[e.dom.getParent(o.getNode(),e.dom.isBlock)]:o.getSelectedBlocks();return Ne(s,a=>dt(e.formatter.matchNode(a,r)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=e.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(be.os.isMacOS()||be.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!xt(a)||s++!==o||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,r,o)=>{e.selection.select(o)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Gr);if(n){const r=e.dom.createRng();r.selectNodeContents(n),e.selection.setRng(r)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{Kd(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{Kd(e,e.dom.encode(o))},insertHTML:(n,r,o)=>{Kd(e,o)},mceInsertContent:(n,r,o)=>{Kd(e,o)},mceSetContent:(n,r,o)=>{e.setContent(o)},mceReplaceContent:(n,r,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(u_(e))}})})(t),(e=>{const n=(r,o,s)=>{const a=kt(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");Gt(a)&&kt(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const r=e.dom.getParent(e.selection.getStart(),"a");return void(r&&e.dom.remove(r,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{Y1(e,"indent")},Outdent:()=>{G1(e)}}),e.editorCommands.addCommands({Outdent:()=>V1(e)},"state")})(t),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{HS(e,!0)},InsertNewBlockAfter:()=>{HS(e,!1)}})})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Fd(uw,e)},mceInsertNewLine:(n,r,o)=>{vw(e,o)},InsertLineBreak:(n,r,o)=>{Fd(pw,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{n.getDoc().execCommand(r);const o=n.dom.getParent(n.selection.getNode(),"ol,ul");if(o){const s=o.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=n.selection.getBookmark();n.dom.split(s,o),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{const o=n.dom.getParent(n.selection.getNode(),"ul,ol");return o&&("insertunorderedlist"===r&&"UL"===o.tagName||"insertorderedlist"===r&&"OL"===o.tagName)}},"state")})(e)})(t),(e=>{(n=>{const r=(o,s)=>{n.formatter.toggle(o,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,s,a)=>{r(o,{value:a})},BackColor:(o,s,a)=>{r("hilitecolor",{value:a})},FontName:(o,s,a)=>{((i,l)=>{const c=US(i,l);i.formatter.toggle("fontname",{value:YO(c)}),i.nodeChanged()})(n,a)},FontSize:(o,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:US(i,a)}),i.nodeChanged()},LineHeight:(o,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(o,s,a)=>{var i;r(o,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,s,a)=>{r(kt(a)?a:"p")},mceToggleFormat:(o,s,a)=>{r(a)}})})(e),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return cg(o=n,s=>KO(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return cg(o=n,s=>VO(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return cg(o=n,s=>{const a=D(o.getBody());return ym(s,l=>rt(l,"line-height"),vt(ue,a)).getOrThunk(()=>{const l=parseFloat($(s,"line-height")),c=parseFloat($(s,"font-size"));return String(l/c)})}).getOr("");var o})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const s=o??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,r,o)=>{var s;(s=e).removed||(!0===o?Uf(s):(i=>{const l=i.selection,c=i.getBody();let u=l.getRng();i.quirks.refreshContentEditable(),dt(i.bookmark)&&!da(i)&&Mf(i).each(m=>{i.selection.setRng(m),u=m});const f=(m=i,b=l.getNode(),m.dom.getParent(b,g=>"true"===m.dom.getContentEditable(g)));var m,b;if(f&&i.dom.isChildOf(f,c))return zf(f),O0(i,u),void Uf(i);i.inline||(be.browser.isOpera()||zf(c),i.getWin().focus()),(be.browser.isFirefox()||i.inline)&&(zf(c),O0(i,u)),Uf(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const f=a("cache_suffix");f&&(be.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:oD(),styleSheetLoader:void 0,show:St,hide:St,setEnabled:St,isEnabled:Ie},this.mode=(b=>{const g=bn("design"),v=bn({design:{activate:St,deactivate:St,editorReadOnly:!1},readonly:{activate:St,deactivate:St,editorReadOnly:!0}});return(h=b).serializer?WS(h):h.on("PreInit",()=>{WS(h)}),(h=>{h.on("ShowCaret",C=>{ya(h)&&C.preventDefault()}),h.on("ObjectSelected",C=>{ya(h)&&C.preventDefault()})})(b),{isReadOnly:()=>ya(b),set:h=>((C,S,E,A)=>{if(A!==E.get()){if(!Jt(S,A))throw new Error(`Editor mode '${A}' is invalid`);C.initialized?QS(C,E,S,A):C.on("init",()=>QS(C,E,S,A))}})(b,v.get(),g,h),get:()=>g.get(),register:(h,C)=>{v.set(((S,E,A)=>{if(At(eD,E))throw new Error(`Cannot override default mode ${E}`);return{...S,[E]:{...A,deactivate:()=>{try{A.deactivate()}catch(N){console.error(`problem while deactivating editor mode ${E}:`,N)}}}}})(v.get(),h,C))}};var h})(o),r.dispatch("SetupEditor",{editor:this});const m=n_(o);Ce(m)&&m.call(o,o)}render(){(e=>{const n=e.id;fo.setCode(Yh(e));const r=()=>{ba.unbind(window,"ready",r),e.render()};if(!Js.Event.domLoaded)return void ba.bind(window,"ready",r);if(!e.getElement())return;const o=D(e.getElement()),s=p(o);var l;e.on("remove",()=>{xo(o.dom.attributes,i=>d(o,i.name)),xr(o,s)}),e.ui.styleSheetLoader=Ug.forElement(o,{contentCssCors:eb(l=e),referrerPolicy:Ju(l)}),tf(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||ba.getParent(n,"form");a&&(e.formElement=a,$k(e)&&!fu(e.getElement())&&(ba.insertAfter(ba.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},ba.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!Wk(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=MC(e),e.notificationManager=LC(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=ba.encode(i.content))}),Vk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Kk(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=ts.ScriptLoader,r=()=>{!t.removed&&(o=>{const s=Ka(o);return!kt(s)||dt(ga.get(s))})(t)&&(o=>{const s=Zu(o);return dt(ai.get(s))})(t)&&LO(t)};((o,s)=>{const a=Ka(o);if(kt(a)&&!MS(a)&&!Jt(ga.urls,a)){const i=Ik(o),l=i?o.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;ga.load(a,l).catch(()=>{Al(o,"ThemeLoadError",Tl("theme",l,a))})}})(t,e),((o,s)=>{const a=Zu(o);if("plugin"!==a&&!Jt(ai.urls,a)){const i=Fk(o),l=kt(i)?o.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;ai.load(a,l).catch(()=>{Al(o,"ModelLoadError",Tl("model",l,a))})}})(t,e),((o,s)=>{const a=Yh(s),i=Ak(s);if(!fo.hasCode(a)&&"en"!==a){const l=Jn(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;o.add(l).catch(()=>{Al(s,"LanguageLoadError",Tl("language",l,a))})}})(n,t),((o,s,a)=>{const i=IS(s,"default",a),l=(c=s,k.from(wk(c)).filter(Jn).map(u=>({url:u,name:k.none()}))).orThunk(()=>IS(s,Xh(s),""));var c;G((c=>{const u=[],f=m=>{u.push(m)};for(let m=0;m<c.length;m++)c[m].each(f);return u})([i,l]),c=>{o.add(c.url).catch(()=>{var u,f,m;u=s,f=c.url,m=c.name.getOrUndefined(),Al(u,"IconsLoadError",Tl("icons",f,m))})})})(n,t,e),((o,s)=>{const a=(i,l)=>{ii.load(i,l).catch(()=>{Al(o,"PluginLoadError",Tl("plugin",l,i))})};Ae(Qk(o),(i,l)=>{a(l,i),o.options.set("plugins",Dc(o).concat(l))}),G(Dc(o),i=>{!(i=lt.trim(i))||ii.urls[i]||MS(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(r,r)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return da(this)}translate(e){return fo.translate(e)}getParam(e,n,r){const o=this.options;return o.isRegistered(e)||(dt(r)?o.register(e,{processor:r,default:n}):o.register(e,{processor:Ie,default:n})),o.isSet(e)||Me(n)?o.get(e):n}hasPlugin(e,n){return!(!At(Dc(this),e)||n&&void 0===ii.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,r){this.editorCommands.addCommand(e,n,r)}addQueryStateHandler(e,n,r){this.editorCommands.addQueryStateHandler(e,n,r)}addQueryValueHandler(e,n,r){this.editorCommands.addQueryValueHandler(e,n,r)}addShortcut(e,n,r,o){this.shortcuts.add(e,n,r,o)}execCommand(e,n,r,o){return this.editorCommands.execCommand(e,n,r,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(xa.show(e.getContainer()),xa.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(xa.hide(e.getContainer()),xa.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...e,load:!0},s=fu(r)?r.value:r.innerHTML,a=n.setContent(s,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),a}return""}save(e={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...e,save:!0,element:r};let s=n.getContent(o);const a={...o,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,fu(r))r.value=s;else{!e.is_removing&&n.inline||(r.innerHTML=s);const i=xa.getParent(n.id,"form");i&&sD(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=o.element=r=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return Ym(this,e,n)}getContent(e){return((n,r={})=>{const o=(s=r,a=r.format?r.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return dC(n,o).fold(he,s=>{const a=(l=s,Xm(n).editor.getContent(l));var l;return uC(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=tE({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Ym(this,this.startContent,{format:"raw"}):Ym(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||xa.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=xa.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const r=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:r?.body)&&void 0!==n?n:null}convertURL(e,n,r){const o=this,s=o.options.get,a=o_(o);if(Ce(a))return a.call(o,e,r,!0,n);if(!s("convert_urls")||"link"===r||Gt(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length)return e;const i=new to(e);return"http"!==i.protocol&&"https"!==i.protocol&&""!==i.protocol?e:s("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,r)=>{var s;s=r,Je(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,r;(n=this)._editableRoot!==(r=e)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:r}=e,o=e.getBody(),s=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&dt(s?.nextSibling)&&md.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&o&&md.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),md.remove(e.getContainer()),pd(n),pd(r),e.destroy()}var a})(this)}destroy(e){((n,r)=>{const{selection:o,dom:s}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),pd(o),pd(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),md.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const hi=Re.DOM,Jd=lt.each;let Zd,eE=!1,sr=[];const tu=t=>{const e=t.type;Jd(Ps.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},nE=t=>{if(t!==eE){const e=Re.DOM;t?(e.bind(window,"resize",tu),e.bind(window,"scroll",tu)):(e.unbind(window,"resize",tu),e.unbind(window,"scroll",tu)),eE=t}},rE=t=>{const e=sr;return sr=Wt(sr,n=>t!==n),Ps.activeEditor===t&&(Ps.activeEditor=sr.length>0?sr[0]:null),Ps.focusedEditor===t&&(Ps.focusedEditor=null),e.length!==sr.length},aD="CSS1Compat"!==document.compatMode,Ps={...fg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.2",releaseDate:"2023-12-11",i18n:fo,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",r=to.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)e=o.base||o.baseURL,n=o.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new to(r).toAbsolute(e),t.documentBaseURL=r,t.baseURI=new to(t.baseURL),t.suffix=n,(s=t).on("AddEditor",vt(pN,s)),s.on("RemoveEditor",vt(gN,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const r=t.plugin_base_urls;void 0!==r&&Ae(r,(o,s)=>{Wn.PluginManager.urls[s]=o})},init(t){const e=this;let n;const r=lt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var c;hi.unbind(window,"ready",s),(c=>{const u=t.onpageload;u&&u.apply(e,[])})(),l=((c,u)=>{const f=[],m=Ce(u)?b=>Ne(f,g=>u(g,b)):b=>At(f,b);for(let b=0,g=c.length;b<g;b++){const v=c[b];m(v)||f.push(v)}return f})((c=t,be.browser.isIE()||be.browser.isEdge()?(bd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):aD?(bd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):kt(c.selector)?hi.select(c.selector):dt(c.target)?[c.target]:[])),lt.each(l,c=>{var u;(u=e.get(c.id))&&u.initialized&&!(u.getContainer()||u.getBody()).parentNode&&(rE(u),u.unbindAllNativeEvents(),u.destroy(!0),u.removed=!0)}),l=lt.grep(l,c=>!e.get(c.id)),0===l.length?o([]):Jd(l,c=>{t.inline&&c.tagName.toLowerCase()in r?bd("Could not initialize inline editor on invalid inline target element",c):((u,f,m)=>{const b=new Qd(u,f,e);i.push(b),b.on("init",()=>{++a===l.length&&o(i)}),b.targetElm=b.targetElm||m,b.render()})((u=>{let f=u.id;return f||(f=Te(u,"name").filter(m=>!hi.get(m)).getOrThunk(hi.uniqueId),u.setAttribute("id",f)),f})(c),t,c)})};return hi.bind(window,"ready",s),new Promise(a=>{n?a(n):o=i=>{a(i)}})},get(t){return 0===arguments.length?sr.slice(0):kt(t)?Ze(sr,e=>e.id===t).getOr(null):x(t)&&sr[t]?sr[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&sr.push(t),nE(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),Zd||(Zd=r=>{const o=e.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",Zd))),t},createEditor(t,e){return this.add(new Qd(t,e,this))},remove(t){const e=this;let n;if(t){if(!kt(t))return n=t,Zt(e.get(n.id))?null:(rE(n)&&e.dispatch("RemoveEditor",{editor:n}),0===sr.length&&window.removeEventListener("beforeunload",Zd),n.remove(),nE(sr.length>0),n);Jd(hi.select(t),r=>{n=e.get(r.id),n&&e.remove(n)})}else for(let r=sr.length-1;r>=0;r--)e.remove(sr[r])},execCommand(t,e,n){var r;const o=this,s=Gt(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(t){case"mceAddEditor":return o.get(s)||new Qd(s,n.options,o).render(),!0;case"mceRemoveEditor":{const a=o.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Jd(sr,t=>{t.save()})},addI18n:(t,e)=>{fo.add(t,e)},translate:t=>fo.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new to(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new to(this.baseURL)}};Ps.setup();const iD=(()=>{const t=Ss();return{FakeClipboardItem:e=>({items:e,types:on(e),getType:n=>Te(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),oE=Math.min,bi=Math.max,eu=Math.round,sE=(t,e,n)=>{let r=e.x,o=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(o+=l),"r"===c[1]&&(r+=i),"c"===c[0]&&(o+=eu(l/2)),"c"===c[1]&&(r+=eu(i/2)),"b"===c[3]&&(o-=a),"r"===c[4]&&(r-=s),"c"===c[3]&&(o-=eu(a/2)),"c"===c[4]&&(r-=eu(s/2)),vi(r,o,s,a)},vi=(t,e,n,r)=>({x:t,y:e,w:n,h:r}),lD={inflate:(t,e,n)=>vi(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:sE,findBestRelativePosition:(t,e,n,r)=>{for(let o=0;o<r.length;o++){const s=sE(t,e,r[o]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return r[o]}return null},intersect:(t,e)=>{const n=bi(t.x,e.x),r=bi(t.y,e.y),o=oE(t.x+t.w,e.x+e.w),s=oE(t.y+t.h,e.y+e.h);return o-n<0||s-r<0?null:vi(n,r,o-n,s-r)},clamp:(t,e,n)=>{let r=t.x,o=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,c=bi(0,e.x-r),u=bi(0,e.y-o),f=bi(0,s-i),m=bi(0,a-l);return r+=c,o+=u,n&&(s+=c,a+=u,r-=f,o-=m),s-=f,a-=m,vi(r,o,s-r,a-o)},create:vi,fromClientRect:t=>vi(t.left,t.top,t.width,t.height)},cD=(()=>{const t={},e={},n={};return{load:(r,o)=>{const s=`Script at URL "${o}" failed to load`,a=`Script at URL "${o}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(void 0!==t[r])return t[r];{const i=new Promise((l,c)=>{const u=((f,m,b=1e3)=>{let g=!1,v=null;const h=E=>(...A)=>{g||(g=!0,null!==v&&(clearTimeout(v),v=null),E.apply(null,A))},C=h(f),S=h(m);return{start:(...E)=>{g||null!==v||(v=setTimeout(()=>S.apply(null,E),b))},resolve:C,reject:S}})(l,c);e[r]=u.resolve,ts.ScriptLoader.loadScript(o).then(()=>u.start(a),()=>u.reject(s))});return t[r]=i,i}},add:(r,o)=>{void 0!==e[r]&&(e[r](o),delete e[r]),t[r]=Promise.resolve(o),n[r]=o},has:r=>r in n,get:r=>n[r],unload:r=>{delete t[r]}}})();let Xl;try{const t="__storage_test__";Xl=window.localStorage,Xl.setItem(t,t),Xl.removeItem(t)}catch{Xl=(()=>{let e={},n=[];const r={getItem:o=>e[o]||null,setItem:(o,s)=>{n.push(o),e[o]=String(s)},key:o=>n[o],removeItem:o=>{n=n.filter(s=>s===o),delete e[o]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const dD={geom:{Rect:lD},util:{Delay:Or,Tools:lt,VK:ht,URI:to,EventDispatcher:ug,Observable:fg,I18n:fo,LocalStorage:Xl,ImageUploader:t=>{const e=jC(),n=UC(t,e);return{upload:(r,o=!0)=>n.upload(r,o?zC(t):void 0)}}},dom:{EventUtils:Js,TreeWalker:un,TextSeeker:ea,DOMUtils:Re,ScriptLoader:ts,RangeUtils:ca,Serializer:TC,StyleSheetLoader:zg,ControlSelection:i0,BookmarkManager:pl,Selection:AC,Event:Js.Event},html:{Styles:Lu,Entities:xs,Node:Vn,Schema:ws,DomParser:si,Writer:Q0,Serializer:As},Env:be,AddOnManager:Wn,Annotator:Jb,Formatter:$C,UndoManager:VC,EditorCommands:$S,WindowManager:MC,NotificationManager:LC,EditorObservable:XS,Shortcuts:ZS,Editor:Qd,FocusManager:R0,EditorManager:Ps,DOM:Re.DOM,ScriptLoader:ts.ScriptLoader,PluginManager:ii,ThemeManager:ga,ModelManager:ai,IconManager:gd,Resource:cD,FakeClipboard:iD,trim:lt.trim,isArray:lt.isArray,is:lt.is,toArray:lt.toArray,makeMap:lt.makeMap,each:lt.each,map:lt.map,grep:lt.grep,inArray:lt.inArray,extend:lt.extend,walk:lt.walk,resolve:lt.resolve,explode:lt.explode,_addCacheSuffix:lt._addCacheSuffix},aE=lt.extend(Ps,dD);(t=>{window.tinymce=t,window.tinyMCE=t})(aE),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(aE)}(),function(pt,Kt){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=pt.document?Kt(pt,!0):function(Yt){if(!Yt.document)throw new Error("jQuery requires a window with a document");return Kt(Yt)}:Kt(pt)}(typeof window<"u"?window:this,function(pt,Kt){"use strict";var Yt=[],qt=Object.getPrototypeOf,ae=Yt.slice,Xe=Yt.flat?function(d){return Yt.flat.call(d)}:function(d){return Yt.concat.apply([],d)},Rn=Yt.push,nn=Yt.indexOf,Yn={},vr=Yn.toString,On=Yn.hasOwnProperty,yr=On.toString,kt=yr.call(Object),Gt={},Lt=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},it=function(d){return null!=d&&d===d.window},Zt=pt.document,Un={type:!0,src:!0,nonce:!0,noModule:!0};function Me(d,p,y){var w,_,T=(y=y||Zt).createElement("script");if(T.text=d,p)for(w in Un)(_=p[w]||p.getAttribute&&p.getAttribute(w))&&T.setAttribute(w,_);y.head.appendChild(T).parentNode.removeChild(T)}function Se(d){return null==d?d+"":"object"==typeof d||"function"==typeof d?Yn[vr.call(d)]||"object":typeof d}var Ce=/HTML$/i,x=function(d,p){return new x.fn.init(d,p)};function Hn(d){var p=!!d&&"length"in d&&d.length,y=Se(d);return!Lt(d)&&!it(d)&&("array"===y||0===p||"number"==typeof p&&0<p&&p-1 in d)}function St(d,p){return d.nodeName&&d.nodeName.toLowerCase()===p.toLowerCase()}x.fn=x.prototype={jquery:"3.7.1",constructor:x,length:0,toArray:function(){return ae.call(this)},get:function(d){return null==d?ae.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var p=x.merge(this.constructor(),d);return p.prevObject=this,p},each:function(d){return x.each(this,d)},map:function(d){return this.pushStack(x.map(this,function(p,y){return d.call(p,y,p)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(d,p){return(p+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(d,p){return p%2}))},eq:function(d){var p=this.length,y=+d+(d<0?p:0);return this.pushStack(0<=y&&y<p?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:Rn,sort:Yt.sort,splice:Yt.splice},x.extend=x.fn.extend=function(){var d,p,y,w,_,T,R=arguments[0]||{},U=1,z=arguments.length,K=!1;for("boolean"==typeof R&&(K=R,R=arguments[U]||{},U++),"object"==typeof R||Lt(R)||(R={}),U===z&&(R=this,U--);U<z;U++)if(null!=(d=arguments[U]))for(p in d)w=d[p],"__proto__"!==p&&R!==w&&(K&&w&&(x.isPlainObject(w)||(_=Array.isArray(w)))?(y=R[p],T=_&&!Array.isArray(y)?[]:_||x.isPlainObject(y)?y:{},_=!1,R[p]=x.extend(K,T,w)):void 0!==w&&(R[p]=w));return R},x.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var p,y;return!(!d||"[object Object]"!==vr.call(d)||(p=qt(d))&&("function"!=typeof(y=On.call(p,"constructor")&&p.constructor)||yr.call(y)!==kt))},isEmptyObject:function(d){var p;for(p in d)return!1;return!0},globalEval:function(d,p,y){Me(d,{nonce:p&&p.nonce},y)},each:function(d,p){var y,w=0;if(Hn(d))for(y=d.length;w<y&&!1!==p.call(d[w],w,d[w]);w++);else for(w in d)if(!1===p.call(d[w],w,d[w]))break;return d},text:function(d){var p,y="",w=0,_=d.nodeType;if(!_)for(;p=d[w++];)y+=x.text(p);return 1===_||11===_?d.textContent:9===_?d.documentElement.textContent:3===_||4===_?d.nodeValue:y},makeArray:function(d,p){var y=p||[];return null!=d&&(Hn(Object(d))?x.merge(y,"string"==typeof d?[d]:d):Rn.call(y,d)),y},inArray:function(d,p,y){return null==p?-1:nn.call(p,d,y)},isXMLDoc:function(d){var y=d&&(d.ownerDocument||d).documentElement;return!Ce.test(d&&d.namespaceURI||y&&y.nodeName||"HTML")},merge:function(d,p){for(var y=+p.length,w=0,_=d.length;w<y;w++)d[_++]=p[w];return d.length=_,d},grep:function(d,p,y){for(var w=[],_=0,T=d.length,R=!y;_<T;_++)!p(d[_],_)!==R&&w.push(d[_]);return w},map:function(d,p,y){var w,_,T=0,R=[];if(Hn(d))for(w=d.length;T<w;T++)null!=(_=p(d[T],T,y))&&R.push(_);else for(T in d)null!=(_=p(d[T],T,y))&&R.push(_);return Xe(R)},guid:1,support:Gt}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=Yt[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,p){Yn["[object "+p+"]"]=p.toLowerCase()});var Dn=Yt.pop,Ls=Yt.sort,ft=Yt.splice,he="[\\x20\\t\\r\\n\\f]",no=new RegExp("^"+he+"+|((?:^|[^\\\\])(?:\\\\.)*)"+he+"+$","g");x.contains=function(d,p){var y=p&&p.parentNode;return d===y||!(!y||1!==y.nodeType||!(d.contains?d.contains(y):d.compareDocumentPosition&&16&d.compareDocumentPosition(y)))};var vt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function vo(d,p){return p?"\0"===d?"\ufffd":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}x.escapeSelector=function(d){return(d+"").replace(vt,vo)};var dr=Zt,yo=Rn;!function(){var d,p,y,w,_,T,R,U,z,K,Z=yo,st=x.expando,Y=0,ot=0,Xt=ln(),D=ln(),me=ln(),tn=ln(),Be=function(B,$){return B===$&&(_=!0),0},wr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ue="(?:\\\\[\\da-fA-F]{1,6}"+he+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ve="\\["+he+"*("+ue+")(?:"+he+"*([*^$|!~]?=)"+he+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ue+"))|)"+he+"*\\]",ko=":("+ue+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ve+")*)|.*)\\)|)",ye=new RegExp(he+"+","g"),qe=new RegExp("^"+he+"*,"+he+"*"),Mn=new RegExp("^"+he+"*([>+~]|"+he+")"+he+"*"),ps=new RegExp(he+"|>"),Sr=new RegExp(ko),Er=new RegExp("^"+ue+"$"),ar={ID:new RegExp("^#("+ue+")"),CLASS:new RegExp("^\\.("+ue+")"),TAG:new RegExp("^("+ue+"|[*])"),ATTR:new RegExp("^"+ve),PSEUDO:new RegExp("^"+ko),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+he+"*(even|odd|(([+-]|)(\\d*)n|)"+he+"*(?:([+-]|)"+he+"*(\\d+)|))"+he+"*\\)|)","i"),bool:new RegExp("^(?:"+wr+")$","i"),needsContext:new RegExp("^"+he+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+he+"*((?:-\\d)?\\d*)"+he+"*\\)|)(?=[^-]|$)","i")},io=/^(?:input|select|textarea|button)$/i,Yo=/^h\d$/i,Oe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ge=/[+~]/,en=new RegExp("\\\\[\\da-fA-F]{1,6}"+he+"?|\\\\([^\\r\\n\\f])","g"),kn=function(B,$){var tt="0x"+B.slice(1)-65536;return $||(tt<0?String.fromCharCode(tt+65536):String.fromCharCode(tt>>10|55296,1023&tt|56320))},Kr=function(){In()},_n=Ao(function(B){return!0===B.disabled&&St(B,"fieldset")},{dir:"parentNode",next:"legend"});try{Z.apply(Yt=ae.call(dr.childNodes),dr.childNodes)}catch{Z={apply:function($,tt){yo.apply($,ae.call(tt))},call:function($){yo.apply($,ae.call(arguments,1))}}}function oe(B,$,tt,rt){var ut,jt,_t,zt,It,re,ge,fe=$&&$.ownerDocument,xe=$?$.nodeType:9;if(tt=tt||[],"string"!=typeof B||!B||1!==xe&&9!==xe&&11!==xe)return tt;if(!rt&&(In($),$=$||T,U)){if(11!==xe&&(It=Oe.exec(B)))if(ut=It[1]){if(9===xe){if(!(_t=$.getElementById(ut)))return tt;if(_t.id===ut)return Z.call(tt,_t),tt}else if(fe&&(_t=fe.getElementById(ut))&&oe.contains($,_t)&&_t.id===ut)return Z.call(tt,_t),tt}else{if(It[2])return Z.apply(tt,$.getElementsByTagName(B)),tt;if((ut=It[3])&&$.getElementsByClassName)return Z.apply(tt,$.getElementsByClassName(ut)),tt}if(!(tn[B+" "]||z&&z.test(B))){if(ge=B,fe=$,1===xe&&(ps.test(B)||Mn.test(B))){for((fe=Ge.test(B)&&Fa($.parentNode)||$)==$&&Gt.scope||((zt=$.getAttribute("id"))?zt=x.escapeSelector(zt):$.setAttribute("id",zt=st)),jt=(re=gs(B)).length;jt--;)re[jt]=(zt?"#"+zt:":scope")+" "+No(re[jt]);ge=re.join(",")}try{return Z.apply(tt,fe.querySelectorAll(ge)),tt}catch{tn(B,!0)}finally{zt===st&&$.removeAttribute("id")}}}return Li(B.replace(no,"$1"),$,tt,rt)}function ln(){var B=[];return function $(tt,rt){return B.push(tt+" ")>p.cacheLength&&delete $[B.shift()],$[tt+" "]=rt}}function Pe(B){return B[st]=!0,B}function Fe(B){var $=T.createElement("fieldset");try{return!!B($)}catch{return!1}finally{$.parentNode&&$.parentNode.removeChild($),$=null}}function Xr(B){return function($){return St($,"input")&&$.type===B}}function Go(B){return function($){return(St($,"input")||St($,"button"))&&$.type===B}}function Ia(B){return function($){return"form"in $?$.parentNode&&!1===$.disabled?"label"in $?"label"in $.parentNode?$.parentNode.disabled===B:$.disabled===B:$.isDisabled===B||$.isDisabled!==!B&&_n($)===B:$.disabled===B:"label"in $&&$.disabled===B}}function pr(B){return Pe(function($){return $=+$,Pe(function(tt,rt){for(var ut,jt=B([],tt.length,$),_t=jt.length;_t--;)tt[ut=jt[_t]]&&(tt[ut]=!(rt[ut]=tt[ut]))})})}function Fa(B){return B&&typeof B.getElementsByTagName<"u"&&B}function In(B){var $,tt=B?B.ownerDocument||B:dr;return tt!=T&&9===tt.nodeType&&tt.documentElement&&(R=(T=tt).documentElement,U=!x.isXMLDoc(T),K=R.matches||R.webkitMatchesSelector||R.msMatchesSelector,R.msMatchesSelector&&dr!=T&&($=T.defaultView)&&$.top!==$&&$.addEventListener("unload",Kr),Gt.getById=Fe(function(rt){return R.appendChild(rt).id=x.expando,!T.getElementsByName||!T.getElementsByName(x.expando).length}),Gt.disconnectedMatch=Fe(function(rt){return K.call(rt,"*")}),Gt.scope=Fe(function(){return T.querySelectorAll(":scope")}),Gt.cssHas=Fe(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Gt.getById?(p.filter.ID=function(rt){var ut=rt.replace(en,kn);return function(jt){return jt.getAttribute("id")===ut}},p.find.ID=function(rt,ut){if(typeof ut.getElementById<"u"&&U){var jt=ut.getElementById(rt);return jt?[jt]:[]}}):(p.filter.ID=function(rt){var ut=rt.replace(en,kn);return function(jt){var _t=typeof jt.getAttributeNode<"u"&&jt.getAttributeNode("id");return _t&&_t.value===ut}},p.find.ID=function(rt,ut){if(typeof ut.getElementById<"u"&&U){var jt,_t,zt,It=ut.getElementById(rt);if(It){if((jt=It.getAttributeNode("id"))&&jt.value===rt)return[It];for(zt=ut.getElementsByName(rt),_t=0;It=zt[_t++];)if((jt=It.getAttributeNode("id"))&&jt.value===rt)return[It]}return[]}}),p.find.TAG=function(rt,ut){return typeof ut.getElementsByTagName<"u"?ut.getElementsByTagName(rt):ut.querySelectorAll(rt)},p.find.CLASS=function(rt,ut){if(typeof ut.getElementsByClassName<"u"&&U)return ut.getElementsByClassName(rt)},z=[],Fe(function(rt){var ut;R.appendChild(rt).innerHTML="<a id='"+st+"' href='' disabled='disabled'></a><select id='"+st+"-\r\\' disabled='disabled'><option selected=''></option></select>",rt.querySelectorAll("[selected]").length||z.push("\\["+he+"*(?:value|"+wr+")"),rt.querySelectorAll("[id~="+st+"-]").length||z.push("~="),rt.querySelectorAll("a#"+st+"+*").length||z.push(".#.+[+~]"),rt.querySelectorAll(":checked").length||z.push(":checked"),(ut=T.createElement("input")).setAttribute("type","hidden"),rt.appendChild(ut).setAttribute("name","D"),R.appendChild(rt).disabled=!0,2!==rt.querySelectorAll(":disabled").length&&z.push(":enabled",":disabled"),(ut=T.createElement("input")).setAttribute("name",""),rt.appendChild(ut),rt.querySelectorAll("[name='']").length||z.push("\\["+he+"*name"+he+"*="+he+"*(?:''|\"\")")}),Gt.cssHas||z.push(":has"),z=z.length&&new RegExp(z.join("|")),Be=function(rt,ut){if(rt===ut)return _=!0,0;var jt=!rt.compareDocumentPosition-!ut.compareDocumentPosition;return jt||(1&(jt=(rt.ownerDocument||rt)==(ut.ownerDocument||ut)?rt.compareDocumentPosition(ut):1)||!Gt.sortDetached&&ut.compareDocumentPosition(rt)===jt?rt===T||rt.ownerDocument==dr&&oe.contains(dr,rt)?-1:ut===T||ut.ownerDocument==dr&&oe.contains(dr,ut)?1:w?nn.call(w,rt)-nn.call(w,ut):0:4&jt?-1:1)}),T}for(d in oe.matches=function(B,$){return oe(B,null,null,$)},oe.matchesSelector=function(B,$){if(In(B),U&&!tn[$+" "]&&(!z||!z.test($)))try{var tt=K.call(B,$);if(tt||Gt.disconnectedMatch||B.document&&11!==B.document.nodeType)return tt}catch{tn($,!0)}return 0<oe($,T,null,[B]).length},oe.contains=function(B,$){return(B.ownerDocument||B)!=T&&In(B),x.contains(B,$)},oe.attr=function(B,$){(B.ownerDocument||B)!=T&&In(B);var tt=p.attrHandle[$.toLowerCase()],rt=tt&&On.call(p.attrHandle,$.toLowerCase())?tt(B,$,!U):void 0;return void 0!==rt?rt:B.getAttribute($)},oe.error=function(B){throw new Error("Syntax error, unrecognized expression: "+B)},x.uniqueSort=function(B){var $,tt=[],rt=0,ut=0;if(_=!Gt.sortStable,w=!Gt.sortStable&&ae.call(B,0),Ls.call(B,Be),_){for(;$=B[ut++];)$===B[ut]&&(rt=tt.push(ut));for(;rt--;)ft.call(B,tt[rt],1)}return w=null,B},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(ae.apply(this)))},(p=x.expr={cacheLength:50,createPseudo:Pe,match:ar,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(B){return B[1]=B[1].replace(en,kn),B[3]=(B[3]||B[4]||B[5]||"").replace(en,kn),"~="===B[2]&&(B[3]=" "+B[3]+" "),B.slice(0,4)},CHILD:function(B){return B[1]=B[1].toLowerCase(),"nth"===B[1].slice(0,3)?(B[3]||oe.error(B[0]),B[4]=+(B[4]?B[5]+(B[6]||1):2*("even"===B[3]||"odd"===B[3])),B[5]=+(B[7]+B[8]||"odd"===B[3])):B[3]&&oe.error(B[0]),B},PSEUDO:function(B){var $,tt=!B[6]&&B[2];return ar.CHILD.test(B[0])?null:(B[3]?B[2]=B[4]||B[5]||"":tt&&Sr.test(tt)&&($=gs(tt,!0))&&($=tt.indexOf(")",tt.length-$)-tt.length)&&(B[0]=B[0].slice(0,$),B[2]=tt.slice(0,$)),B.slice(0,3))}},filter:{TAG:function(B){var $=B.replace(en,kn).toLowerCase();return"*"===B?function(){return!0}:function(tt){return St(tt,$)}},CLASS:function(B){var $=Xt[B+" "];return $||($=new RegExp("(^|"+he+")"+B+"("+he+"|$)"))&&Xt(B,function(tt){return $.test("string"==typeof tt.className&&tt.className||typeof tt.getAttribute<"u"&&tt.getAttribute("class")||"")})},ATTR:function(B,$,tt){return function(rt){var ut=oe.attr(rt,B);return null==ut?"!="===$:!$||(ut+="","="===$?ut===tt:"!="===$?ut!==tt:"^="===$?tt&&0===ut.indexOf(tt):"*="===$?tt&&-1<ut.indexOf(tt):"$="===$?tt&&ut.slice(-tt.length)===tt:"~="===$?-1<(" "+ut.replace(ye," ")+" ").indexOf(tt):"|="===$&&(ut===tt||ut.slice(0,tt.length+1)===tt+"-"))}},CHILD:function(B,$,tt,rt,ut){var jt="nth"!==B.slice(0,3),_t="last"!==B.slice(-4),zt="of-type"===$;return 1===rt&&0===ut?function(It){return!!It.parentNode}:function(It,re,ge){var fe,xe,Ot,je,wn,pn=jt!==_t?"nextSibling":"previousSibling",Nn=It.parentNode,ir=zt&&It.nodeName.toLowerCase(),kr=!ge&&!zt,$e=!1;if(Nn){if(jt){for(;pn;){for(Ot=It;Ot=Ot[pn];)if(zt?St(Ot,ir):1===Ot.nodeType)return!1;wn=pn="only"===B&&!wn&&"nextSibling"}return!0}if(wn=[_t?Nn.firstChild:Nn.lastChild],_t&&kr){for($e=(je=(fe=(xe=Nn[st]||(Nn[st]={}))[B]||[])[0]===Y&&fe[1])&&fe[2],Ot=je&&Nn.childNodes[je];Ot=++je&&Ot&&Ot[pn]||($e=je=0)||wn.pop();)if(1===Ot.nodeType&&++$e&&Ot===It){xe[B]=[Y,je,$e];break}}else if(kr&&($e=je=(fe=(xe=It[st]||(It[st]={}))[B]||[])[0]===Y&&fe[1]),!1===$e)for(;(Ot=++je&&Ot&&Ot[pn]||($e=je=0)||wn.pop())&&(!(zt?St(Ot,ir):1===Ot.nodeType)||!++$e||(kr&&((xe=Ot[st]||(Ot[st]={}))[B]=[Y,$e]),Ot!==It)););return($e-=ut)===rt||$e%rt==0&&0<=$e/rt}}},PSEUDO:function(B,$){var tt,rt=p.pseudos[B]||p.setFilters[B.toLowerCase()]||oe.error("unsupported pseudo: "+B);return rt[st]?rt($):1<rt.length?(tt=[B,B,"",$],p.setFilters.hasOwnProperty(B.toLowerCase())?Pe(function(ut,jt){for(var _t,zt=rt(ut,$),It=zt.length;It--;)ut[_t=nn.call(ut,zt[It])]=!(jt[_t]=zt[It])}):function(ut){return rt(ut,0,tt)}):rt}},pseudos:{not:Pe(function(B){var $=[],tt=[],rt=ja(B.replace(no,"$1"));return rt[st]?Pe(function(ut,jt,_t,zt){for(var It,re=rt(ut,null,zt,[]),ge=ut.length;ge--;)(It=re[ge])&&(ut[ge]=!(jt[ge]=It))}):function(ut,jt,_t){return $[0]=ut,rt($,null,_t,tt),$[0]=null,!tt.pop()}}),has:Pe(function(B){return function($){return 0<oe(B,$).length}}),contains:Pe(function(B){return B=B.replace(en,kn),function($){return-1<($.textContent||x.text($)).indexOf(B)}}),lang:Pe(function(B){return Er.test(B||"")||oe.error("unsupported lang: "+B),B=B.replace(en,kn).toLowerCase(),function($){var tt;do{if(tt=U?$.lang:$.getAttribute("xml:lang")||$.getAttribute("lang"))return(tt=tt.toLowerCase())===B||0===tt.indexOf(B+"-")}while(($=$.parentNode)&&1===$.nodeType);return!1}}),target:function(B){var $=pt.location&&pt.location.hash;return $&&$.slice(1)===B.id},root:function(B){return B===R},focus:function(B){return B===function(){try{return T.activeElement}catch{}}()&&T.hasFocus()&&!!(B.type||B.href||~B.tabIndex)},enabled:Ia(!1),disabled:Ia(!0),checked:function(B){return St(B,"input")&&!!B.checked||St(B,"option")&&!!B.selected},selected:function(B){return!0===B.selected},empty:function(B){for(B=B.firstChild;B;B=B.nextSibling)if(B.nodeType<6)return!1;return!0},parent:function(B){return!p.pseudos.empty(B)},header:function(B){return Yo.test(B.nodeName)},input:function(B){return io.test(B.nodeName)},button:function(B){return St(B,"input")&&"button"===B.type||St(B,"button")},text:function(B){var $;return St(B,"input")&&"text"===B.type&&(null==($=B.getAttribute("type"))||"text"===$.toLowerCase())},first:pr(function(){return[0]}),last:pr(function(B,$){return[$-1]}),eq:pr(function(B,$,tt){return[tt<0?tt+$:tt]}),even:pr(function(B,$){for(var tt=0;tt<$;tt+=2)B.push(tt);return B}),odd:pr(function(B,$){for(var tt=1;tt<$;tt+=2)B.push(tt);return B}),lt:pr(function(B,$,tt){var rt;for(rt=tt<0?tt+$:$<tt?$:tt;0<=--rt;)B.push(rt);return B}),gt:pr(function(B,$,tt){for(var rt=tt<0?tt+$:tt;++rt<$;)B.push(rt);return B})}}).pseudos.nth=p.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})p.pseudos[d]=Xr(d);for(d in{submit:!0,reset:!0})p.pseudos[d]=Go(d);function _o(){}function gs(B,$){var tt,rt,ut,jt,_t,zt,It,re=D[B+" "];if(re)return $?0:re.slice(0);for(_t=B,zt=[],It=p.preFilter;_t;){for(jt in tt&&!(rt=qe.exec(_t))||(rt&&(_t=_t.slice(rt[0].length)||_t),zt.push(ut=[])),tt=!1,(rt=Mn.exec(_t))&&(tt=rt.shift(),ut.push({value:tt,type:rt[0].replace(no," ")}),_t=_t.slice(tt.length)),p.filter)!(rt=ar[jt].exec(_t))||It[jt]&&!(rt=It[jt](rt))||(tt=rt.shift(),ut.push({value:tt,type:jt,matches:rt}),_t=_t.slice(tt.length));if(!tt)break}return $?_t.length:_t?oe.error(B):D(B,zt).slice(0)}function No(B){for(var $=0,tt=B.length,rt="";$<tt;$++)rt+=B[$].value;return rt}function Ao(B,$,tt){var rt=$.dir,ut=$.next,jt=ut||rt,_t=tt&&"parentNode"===jt,zt=ot++;return $.first?function(It,re,ge){for(;It=It[rt];)if(1===It.nodeType||_t)return B(It,re,ge);return!1}:function(It,re,ge){var fe,xe,Ot=[Y,zt];if(ge){for(;It=It[rt];)if((1===It.nodeType||_t)&&B(It,re,ge))return!0}else for(;It=It[rt];)if(1===It.nodeType||_t)if(xe=It[st]||(It[st]={}),ut&&St(It,ut))It=It[rt]||It;else{if((fe=xe[jt])&&fe[0]===Y&&fe[1]===zt)return Ot[2]=fe[2];if((xe[jt]=Ot)[2]=B(It,re,ge))return!0}return!1}}function lo(B){return 1<B.length?function($,tt,rt){for(var ut=B.length;ut--;)if(!B[ut]($,tt,rt))return!1;return!0}:B[0]}function Yr(B,$,tt,rt,ut){for(var jt,_t=[],zt=0,It=B.length,re=null!=$;zt<It;zt++)(jt=B[zt])&&(tt&&!tt(jt,rt,ut)||(_t.push(jt),re&&$.push(zt)));return _t}function Pi(B,$,tt,rt,ut,jt){return rt&&!rt[st]&&(rt=Pi(rt)),ut&&!ut[st]&&(ut=Pi(ut,jt)),Pe(function(_t,zt,It,re){var ge,fe,xe,Ot,je=[],wn=[],pn=zt.length,Nn=_t||function(kr,$e,gr){for(var nr=0,hs=$e.length;nr<hs;nr++)oe(kr,$e[nr],gr);return gr}($||"*",It.nodeType?[It]:It,[]),ir=!B||!_t&&$?Nn:Yr(Nn,je,B,It,re);if(tt?tt(ir,Ot=ut||(_t?B:pn||rt)?[]:zt,It,re):Ot=ir,rt)for(ge=Yr(Ot,wn),rt(ge,[],It,re),fe=ge.length;fe--;)(xe=ge[fe])&&(Ot[wn[fe]]=!(ir[wn[fe]]=xe));if(_t){if(ut||B){if(ut){for(ge=[],fe=Ot.length;fe--;)(xe=Ot[fe])&&ge.push(ir[fe]=xe);ut(null,Ot=[],ge,re)}for(fe=Ot.length;fe--;)(xe=Ot[fe])&&-1<(ge=ut?nn.call(_t,xe):je[fe])&&(_t[ge]=!(zt[ge]=xe))}}else Ot=Yr(Ot===zt?Ot.splice(pn,Ot.length):Ot),ut?ut(null,zt,Ot,re):Z.apply(zt,Ot)})}function Qo(B){for(var $,tt,rt,ut=B.length,jt=p.relative[B[0].type],_t=jt||p.relative[" "],zt=jt?1:0,It=Ao(function(fe){return fe===$},_t,!0),re=Ao(function(fe){return-1<nn.call($,fe)},_t,!0),ge=[function(fe,xe,Ot){var je=!jt&&(Ot||xe!=y)||(($=xe).nodeType?It(fe,xe,Ot):re(fe,xe,Ot));return $=null,je}];zt<ut;zt++)if(tt=p.relative[B[zt].type])ge=[Ao(lo(ge),tt)];else{if((tt=p.filter[B[zt].type].apply(null,B[zt].matches))[st]){for(rt=++zt;rt<ut&&!p.relative[B[rt].type];rt++);return Pi(1<zt&&lo(ge),1<zt&&No(B.slice(0,zt-1).concat({value:" "===B[zt-2].type?"*":""})).replace(no,"$1"),tt,zt<rt&&Qo(B.slice(zt,rt)),rt<ut&&Qo(B=B.slice(rt)),rt<ut&&No(B))}ge.push(tt)}return lo(ge)}function ja(B,$){var tt,rt,ut,jt,_t,zt,It=[],re=[],ge=me[B+" "];if(!ge){for($||($=gs(B)),tt=$.length;tt--;)(ge=Qo($[tt]))[st]?It.push(ge):re.push(ge);(ge=me(B,(rt=re,jt=0<(ut=It).length,_t=0<rt.length,zt=function(fe,xe,Ot,je,wn){var pn,Nn,ir,kr=0,$e="0",gr=fe&&[],nr=[],hs=y,za=fe||_t&&p.find.TAG("*",wn),Mi=Y+=null==hs?1:Math.random()||.1,fc=za.length;for(wn&&(y=xe==T||xe||wn);$e!==fc&&null!=(pn=za[$e]);$e++){if(_t&&pn){for(Nn=0,xe||pn.ownerDocument==T||(In(pn),Ot=!U);ir=rt[Nn++];)if(ir(pn,xe||T,Ot)){Z.call(je,pn);break}wn&&(Y=Mi)}jt&&((pn=!ir&&pn)&&kr--,fe&&gr.push(pn))}if(kr+=$e,jt&&$e!==kr){for(Nn=0;ir=ut[Nn++];)ir(gr,nr,xe,Ot);if(fe){if(0<kr)for(;$e--;)gr[$e]||nr[$e]||(nr[$e]=Dn.call(je));nr=Yr(nr)}Z.apply(je,nr),wn&&!fe&&0<nr.length&&1<kr+ut.length&&x.uniqueSort(je)}return wn&&(Y=Mi,y=hs),gr},jt?Pe(zt):zt))).selector=B}return ge}function Li(B,$,tt,rt){var ut,jt,_t,zt,It,re="function"==typeof B&&B,ge=!rt&&gs(B=re.selector||B);if(tt=tt||[],1===ge.length){if(2<(jt=ge[0]=ge[0].slice(0)).length&&"ID"===(_t=jt[0]).type&&9===$.nodeType&&U&&p.relative[jt[1].type]){if(!($=(p.find.ID(_t.matches[0].replace(en,kn),$)||[])[0]))return tt;re&&($=$.parentNode),B=B.slice(jt.shift().value.length)}for(ut=ar.needsContext.test(B)?0:jt.length;ut--&&!p.relative[zt=(_t=jt[ut]).type];)if((It=p.find[zt])&&(rt=It(_t.matches[0].replace(en,kn),Ge.test(jt[0].type)&&Fa($.parentNode)||$))){if(jt.splice(ut,1),!(B=rt.length&&No(jt)))return Z.apply(tt,rt),tt;break}}return(re||ja(B,ge))(rt,$,!U,tt,!$||Ge.test(B)&&Fa($.parentNode)||$),tt}_o.prototype=p.filters=p.pseudos,p.setFilters=new _o,Gt.sortStable=st.split("").sort(Be).join("")===st,In(),Gt.sortDetached=Fe(function(B){return 1&B.compareDocumentPosition(T.createElement("fieldset"))}),x.find=oe,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,oe.compile=ja,oe.select=Li,oe.setDocument=In,oe.tokenize=gs,oe.escape=x.escapeSelector,oe.getText=x.text,oe.isXML=x.isXMLDoc,oe.selectors=x.expr,oe.support=x.support,oe.uniqueSort=x.uniqueSort}();var Gn=function(d,p,y){for(var w=[],_=void 0!==y;(d=d[p])&&9!==d.nodeType;)if(1===d.nodeType){if(_&&x(d).is(y))break;w.push(d)}return w},ke=function(d,p){for(var y=[];d;d=d.nextSibling)1===d.nodeType&&d!==p&&y.push(d);return y},Ie=x.expr.match.needsContext,k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Co(d,p,y){return Lt(p)?x.grep(d,function(w,_){return!!p.call(w,_,w)!==y}):p.nodeType?x.grep(d,function(w){return w===p!==y}):"string"!=typeof p?x.grep(d,function(w){return-1<nn.call(p,w)!==y}):x.filter(p,d,y)}x.filter=function(d,p,y){var w=p[0];return y&&(d=":not("+d+")"),1===p.length&&1===w.nodeType?x.find.matchesSelector(w,d)?[w]:[]:x.find.matches(d,x.grep(p,function(_){return 1===_.nodeType}))},x.fn.extend({find:function(d){var p,y,w=this.length,_=this;if("string"!=typeof d)return this.pushStack(x(d).filter(function(){for(p=0;p<w;p++)if(x.contains(_[p],this))return!0}));for(y=this.pushStack([]),p=0;p<w;p++)x.find(d,_[p],y);return 1<w?x.uniqueSort(y):y},filter:function(d){return this.pushStack(Co(this,d||[],!1))},not:function(d){return this.pushStack(Co(this,d||[],!0))},is:function(d){return!!Co(this,"string"==typeof d&&Ie.test(d)?x(d):d||[],!1).length}});var wt,ne=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(d,p,y){var w,_;if(!d)return this;if(y=y||wt,"string"==typeof d){if(!(w="<"===d[0]&&">"===d[d.length-1]&&3<=d.length?[null,d,null]:ne.exec(d))||!w[1]&&p)return!p||p.jquery?(p||y).find(d):this.constructor(p).find(d);if(w[1]){if(x.merge(this,x.parseHTML(w[1],(p=p instanceof x?p[0]:p)&&p.nodeType?p.ownerDocument||p:Zt,!0)),k.test(w[1])&&x.isPlainObject(p))for(w in p)Lt(this[w])?this[w](p[w]):this.attr(w,p[w]);return this}return(_=Zt.getElementById(w[2]))&&(this[0]=_,this.length=1),this}return d.nodeType?(this[0]=d,this.length=1,this):Lt(d)?void 0!==y.ready?y.ready(d):d(x):x.makeArray(d,this)}).prototype=x.fn,wt=x(Zt);var de=/^(?:parents|prev(?:Until|All))/,At={children:!0,contents:!0,next:!0,prev:!0};function Ne(d,p){for(;(d=d[p])&&1!==d.nodeType;);return d}x.fn.extend({has:function(d){var p=x(d,this),y=p.length;return this.filter(function(){for(var w=0;w<y;w++)if(x.contains(this,p[w]))return!0})},closest:function(d,p){var y,w=0,_=this.length,T=[],R="string"!=typeof d&&x(d);if(!Ie.test(d))for(;w<_;w++)for(y=this[w];y&&y!==p;y=y.parentNode)if(y.nodeType<11&&(R?-1<R.index(y):1===y.nodeType&&x.find.matchesSelector(y,d))){T.push(y);break}return this.pushStack(1<T.length?x.uniqueSort(T):T)},index:function(d){return d?"string"==typeof d?nn.call(x(d),this[0]):nn.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,p){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(d,p))))},addBack:function(d){return this.add(null==d?this.prevObject:this.prevObject.filter(d))}}),x.each({parent:function(d){var p=d.parentNode;return p&&11!==p.nodeType?p:null},parents:function(d){return Gn(d,"parentNode")},parentsUntil:function(d,p,y){return Gn(d,"parentNode",y)},next:function(d){return Ne(d,"nextSibling")},prev:function(d){return Ne(d,"previousSibling")},nextAll:function(d){return Gn(d,"nextSibling")},prevAll:function(d){return Gn(d,"previousSibling")},nextUntil:function(d,p,y){return Gn(d,"nextSibling",y)},prevUntil:function(d,p,y){return Gn(d,"previousSibling",y)},siblings:function(d){return ke((d.parentNode||{}).firstChild,d)},children:function(d){return ke(d.firstChild)},contents:function(d){return null!=d.contentDocument&&qt(d.contentDocument)?d.contentDocument:(St(d,"template")&&(d=d.content||d),x.merge([],d.childNodes))}},function(d,p){x.fn[d]=function(y,w){var _=x.map(this,p,y);return"Until"!==d.slice(-5)&&(w=y),w&&"string"==typeof w&&(_=x.filter(w,_)),1<this.length&&(At[d]||x.uniqueSort(_),de.test(d)&&_.reverse()),this.pushStack(_)}});var ee=/[^\x20\t\r\n\f]+/g;function G(d){return d}function xo(d){throw d}function Ur(d,p,y,w){var _;try{d&&Lt(_=d.promise)?_.call(d).done(p).fail(y):d&&Lt(_=d.then)?_.call(d,p,y):p.apply(void 0,[d].slice(w))}catch(T){y.apply(void 0,[T])}}x.Callbacks=function(d){var y;d="string"==typeof d?(y={},x.each(d.match(ee)||[],function(Y,ot){y[ot]=!0}),y):x.extend({},d);var w,_,T,R,U=[],z=[],K=-1,Z=function(){for(R=R||d.once,T=w=!0;z.length;K=-1)for(_=z.shift();++K<U.length;)!1===U[K].apply(_[0],_[1])&&d.stopOnFalse&&(K=U.length,_=!1);d.memory||(_=!1),w=!1,R&&(U=_?[]:"")},st={add:function(){return U&&(_&&!w&&(K=U.length-1,z.push(_)),function Y(ot){x.each(ot,function(Xt,D){Lt(D)?d.unique&&st.has(D)||U.push(D):D&&D.length&&"string"!==Se(D)&&Y(D)})}(arguments),_&&!w&&Z()),this},remove:function(){return x.each(arguments,function(Y,ot){for(var Xt;-1<(Xt=x.inArray(ot,U,Xt));)U.splice(Xt,1),Xt<=K&&K--}),this},has:function(Y){return Y?-1<x.inArray(Y,U):0<U.length},empty:function(){return U&&(U=[]),this},disable:function(){return R=z=[],U=_="",this},disabled:function(){return!U},lock:function(){return R=z=[],_||w||(U=_=""),this},locked:function(){return!!R},fireWith:function(Y,ot){return R||(ot=[Y,(ot=ot||[]).slice?ot.slice():ot],z.push(ot),w||Z()),this},fire:function(){return st.fireWith(this,arguments),this},fired:function(){return!!T}};return st},x.extend({Deferred:function(d){var p=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],y="pending",w={state:function(){return y},always:function(){return _.done(arguments).fail(arguments),this},catch:function(T){return w.then(null,T)},pipe:function(){var T=arguments;return x.Deferred(function(R){x.each(p,function(U,z){var K=Lt(T[z[4]])&&T[z[4]];_[z[1]](function(){var Z=K&&K.apply(this,arguments);Z&&Lt(Z.promise)?Z.promise().progress(R.notify).done(R.resolve).fail(R.reject):R[z[0]+"With"](this,K?[Z]:arguments)})}),T=null}).promise()},then:function(T,R,U){var z=0;function K(Z,st,Y,ot){return function(){var Xt=this,D=arguments,me=function(){var Be,wr;if(!(Z<z)){if((Be=Y.apply(Xt,D))===st.promise())throw new TypeError("Thenable self-resolution");Lt(wr=Be&&("object"==typeof Be||"function"==typeof Be)&&Be.then)?ot?wr.call(Be,K(z,st,G,ot),K(z,st,xo,ot)):(z++,wr.call(Be,K(z,st,G,ot),K(z,st,xo,ot),K(z,st,G,st.notifyWith))):(Y!==G&&(Xt=void 0,D=[Be]),(ot||st.resolveWith)(Xt,D))}},tn=ot?me:function(){try{me()}catch(Be){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(Be,tn.error),z<=Z+1&&(Y!==xo&&(Xt=void 0,D=[Be]),st.rejectWith(Xt,D))}};Z?tn():(x.Deferred.getErrorHook?tn.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(tn.error=x.Deferred.getStackHook()),pt.setTimeout(tn))}}return x.Deferred(function(Z){p[0][3].add(K(0,Z,Lt(U)?U:G,Z.notifyWith)),p[1][3].add(K(0,Z,Lt(T)?T:G)),p[2][3].add(K(0,Z,Lt(R)?R:xo))}).promise()},promise:function(T){return null!=T?x.extend(T,w):w}},_={};return x.each(p,function(T,R){var U=R[2],z=R[5];w[R[1]]=U.add,z&&U.add(function(){y=z},p[3-T][2].disable,p[3-T][3].disable,p[0][2].lock,p[0][3].lock),U.add(R[3].fire),_[R[0]]=function(){return _[R[0]+"With"](this===_?void 0:this,arguments),this},_[R[0]+"With"]=U.fireWith}),w.promise(_),d&&d.call(_,_),_},when:function(d){var p=arguments.length,y=p,w=Array(y),_=ae.call(arguments),T=x.Deferred(),R=function(U){return function(z){w[U]=this,_[U]=1<arguments.length?ae.call(arguments):z,--p||T.resolveWith(w,_)}};if(p<=1&&(Ur(d,T.done(R(y)).resolve,T.reject,!p),"pending"===T.state()||Lt(_[y]&&_[y].then)))return T.then();for(;y--;)Ur(_[y],R(y),T.reject);return T.promise()}});var Wt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(d,p){pt.console&&pt.console.warn&&d&&Wt.test(d.name)&&pt.console.warn("jQuery.Deferred exception: "+d.message,d.stack,p)},x.readyException=function(d){pt.setTimeout(function(){throw d})};var zo=x.Deferred();function yn(){Zt.removeEventListener("DOMContentLoaded",yn),pt.removeEventListener("load",yn),x.ready()}x.fn.ready=function(d){return zo.then(d).catch(function(p){x.readyException(p)}),this},x.extend({isReady:!1,readyWait:1,ready:function(d){(!0===d?--x.readyWait:x.isReady)||(x.isReady=!0)!==d&&0<--x.readyWait||zo.resolveWith(Zt,[x])}}),x.ready.then=zo.then,"complete"===Zt.readyState||"loading"!==Zt.readyState&&!Zt.documentElement.doScroll?pt.setTimeout(x.ready):(Zt.addEventListener("DOMContentLoaded",yn),pt.addEventListener("load",yn));var Hr=function(d,p,y,w,_,T,R){var U=0,z=d.length,K=null==y;if("object"===Se(y))for(U in _=!0,y)Hr(d,p,U,y[U],!0,T,R);else if(void 0!==w&&(_=!0,Lt(w)||(R=!0),K&&(R?(p.call(d,w),p=null):(K=p,p=function(Z,st,Y){return K.call(x(Z),Y)})),p))for(;U<z;U++)p(d[U],y,R?w:w.call(d[U],U,p(d[U],y)));return _?d:K?p.call(d):z?p(d[0],y):T},Ze=/^-ms-/,Ms=/-([a-z])/g;function Jl(d,p){return p.toUpperCase()}function rn(d){return d.replace(Ze,"ms-").replace(Ms,Jl)}var ur=function(d){return 1===d.nodeType||9===d.nodeType||!+d.nodeType};function ro(){this.expando=x.expando+ro.uid++}ro.uid=1,ro.prototype={cache:function(d){var p=d[this.expando];return p||(p={},ur(d)&&(d.nodeType?d[this.expando]=p:Object.defineProperty(d,this.expando,{value:p,configurable:!0}))),p},set:function(d,p,y){var w,_=this.cache(d);if("string"==typeof p)_[rn(p)]=y;else for(w in p)_[rn(w)]=p[w];return _},get:function(d,p){return void 0===p?this.cache(d):d[this.expando]&&d[this.expando][rn(p)]},access:function(d,p,y){return void 0===p||p&&"string"==typeof p&&void 0===y?this.get(d,p):(this.set(d,p,y),void 0!==y?y:p)},remove:function(d,p){var y,w=d[this.expando];if(void 0!==w){if(void 0!==p)for((y=(p=Array.isArray(p)?p.map(rn):(p=rn(p))in w?[p]:p.match(ee)||[]).length);y--;)delete w[p[y]];(void 0===p||x.isEmptyObject(w))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var p=d[this.expando];return void 0!==p&&!x.isEmptyObject(p)}};var te=new ro,Bn=new ro,Uo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_a=/[A-Z]/g;function Pn(d,p,y){var w,_;if(void 0===y&&1===d.nodeType)if(w="data-"+p.replace(_a,"-$&").toLowerCase(),"string"==typeof(y=d.getAttribute(w))){try{y="true"===(_=y)||"false"!==_&&("null"===_?null:_===+_+""?+_:Uo.test(_)?JSON.parse(_):_)}catch{}Bn.set(d,p,y)}else y=void 0;return y}x.extend({hasData:function(d){return Bn.hasData(d)||te.hasData(d)},data:function(d,p,y){return Bn.access(d,p,y)},removeData:function(d,p){Bn.remove(d,p)},_data:function(d,p,y){return te.access(d,p,y)},_removeData:function(d,p){te.remove(d,p)}}),x.fn.extend({data:function(d,p){var y,w,_,T=this[0],R=T&&T.attributes;if(void 0===d){if(this.length&&(_=Bn.get(T),1===T.nodeType&&!te.get(T,"hasDataAttrs"))){for(y=R.length;y--;)R[y]&&0===(w=R[y].name).indexOf("data-")&&(w=rn(w.slice(5)),Pn(T,w,_[w]));te.set(T,"hasDataAttrs",!0)}return _}return"object"==typeof d?this.each(function(){Bn.set(this,d)}):Hr(this,function(U){var z;if(T&&void 0===U)return void 0!==(z=Bn.get(T,d))||void 0!==(z=Pn(T,d))?z:void 0;this.each(function(){Bn.set(this,d,U)})},null,p,1<arguments.length,null,!0)},removeData:function(d){return this.each(function(){Bn.remove(this,d)})}}),x.extend({queue:function(d,p,y){var w;if(d)return w=te.get(d,p=(p||"fx")+"queue"),y&&(!w||Array.isArray(y)?w=te.access(d,p,x.makeArray(y)):w.push(y)),w||[]},dequeue:function(d,p){var y=x.queue(d,p=p||"fx"),w=y.length,_=y.shift(),T=x._queueHooks(d,p);"inprogress"===_&&(_=y.shift(),w--),_&&("fx"===p&&y.unshift("inprogress"),delete T.stop,_.call(d,function(){x.dequeue(d,p)},T)),!w&&T&&T.empty.fire()},_queueHooks:function(d,p){var y=p+"queueHooks";return te.get(d,y)||te.access(d,y,{empty:x.Callbacks("once memory").add(function(){te.remove(d,[p+"queue",y])})})}}),x.fn.extend({queue:function(d,p){var y=2;return"string"!=typeof d&&(p=d,d="fx",y--),arguments.length<y?x.queue(this[0],d):void 0===p?this:this.each(function(){var w=x.queue(this,d,p);x._queueHooks(this,d),"fx"===d&&"inprogress"!==w[0]&&x.dequeue(this,d)})},dequeue:function(d){return this.each(function(){x.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,p){var y,w=1,_=x.Deferred(),T=this,R=this.length,U=function(){--w||_.resolveWith(T,[T])};for("string"!=typeof d&&(p=d,d=void 0),d=d||"fx";R--;)(y=te.get(T[R],d+"queueHooks"))&&y.empty&&(w++,y.empty.add(U));return U(),_.promise(p)}});var wo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Cn=new RegExp("^(?:([+-])=|)("+wo+")([a-z%]*)$","i"),Qn=["Top","Right","Bottom","Left"],on=Zt.documentElement,is=function(d){return x.contains(d.ownerDocument,d)},Ae={composed:!0};on.getRootNode&&(is=function(d){return x.contains(d.ownerDocument,d)||d.getRootNode(Ae)===d.ownerDocument});var Ho=function(d,p){return"none"===(d=p||d).style.display||""===d.style.display&&is(d)&&"none"===x.css(d,"display")};function Zl(d,p,y,w){var _,T,R=20,U=w?function(){return w.cur()}:function(){return x.css(d,p,"")},z=U(),K=y&&y[3]||(x.cssNumber[p]?"":"px"),Z=d.nodeType&&(x.cssNumber[p]||"px"!==K&&+z)&&Cn.exec(x.css(d,p));if(Z&&Z[3]!==K){for(K=K||Z[3],Z=+(z/=2)||1;R--;)x.style(d,p,Z+K),(1-T)*(1-(T=U()/z||.5))<=0&&(R=0),Z/=T;x.style(d,p,(Z*=2)+K),y=y||[]}return y&&(Z=+Z||+z||0,_=y[1]?Z+(y[1]+1)*y[2]:+y[2],w&&(w.unit=K,w.start=Z,w.end=_)),_}var Na={};function qo(d,p){for(var y,w,_,T,R,U,z,K=[],Z=0,st=d.length;Z<st;Z++)(w=d[Z]).style&&(y=w.style.display,p?("none"===y&&(K[Z]=te.get(w,"display")||null,K[Z]||(w.style.display="")),""===w.style.display&&Ho(w)&&(K[Z]=(z=R=T=void 0,R=(_=w).ownerDocument,(z=Na[U=_.nodeName])||(T=R.body.appendChild(R.createElement(U)),z=x.css(T,"display"),T.parentNode.removeChild(T),"none"===z&&(z="block"),Na[U]=z)))):"none"!==y&&(K[Z]="none",te.set(w,"display",y)));for(Z=0;Z<st;Z++)null!=K[Z]&&(d[Z].style.display=K[Z]);return d}x.fn.extend({show:function(){return qo(this,!0)},hide:function(){return qo(this)},toggle:function(d){return"boolean"==typeof d?d?this.show():this.hide():this.each(function(){Ho(this)?x(this).show():x(this).hide()})}});var Cr,$o,Wo=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Jt=/^$|^module$|\/(?:java|ecma)script/i;Cr=Zt.createDocumentFragment().appendChild(Zt.createElement("div")),($o=Zt.createElement("input")).setAttribute("type","radio"),$o.setAttribute("checked","checked"),$o.setAttribute("name","t"),Cr.appendChild($o),Gt.checkClone=Cr.cloneNode(!0).cloneNode(!0).lastChild.checked,Cr.innerHTML="<textarea>x</textarea>",Gt.noCloneChecked=!!Cr.cloneNode(!0).lastChild.defaultValue,Cr.innerHTML="<option></option>",Gt.option=!!Cr.lastChild;var En={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function qn(d,p){var y;return y=typeof d.getElementsByTagName<"u"?d.getElementsByTagName(p||"*"):typeof d.querySelectorAll<"u"?d.querySelectorAll(p||"*"):[],void 0===p||p&&St(d,p)?x.merge([d],y):y}function Aa(d,p){for(var y=0,w=d.length;y<w;y++)te.set(d[y],"globalEval",!p||te.get(p[y],"globalEval"))}En.tbody=En.tfoot=En.colgroup=En.caption=En.thead,En.th=En.td,Gt.option||(En.optgroup=En.option=[1,"<select multiple='multiple'>","</select>"]);var Ci=/<|&#?\w+;/;function Is(d,p,y,w,_){for(var T,R,U,z,K,Z,st=p.createDocumentFragment(),Y=[],ot=0,Xt=d.length;ot<Xt;ot++)if((T=d[ot])||0===T)if("object"===Se(T))x.merge(Y,T.nodeType?[T]:T);else if(Ci.test(T)){for(R=R||st.appendChild(p.createElement("div")),U=(Te.exec(T)||["",""])[1].toLowerCase(),R.innerHTML=(z=En[U]||En._default)[1]+x.htmlPrefilter(T)+z[2],Z=z[0];Z--;)R=R.lastChild;x.merge(Y,R.childNodes),(R=st.firstChild).textContent=""}else Y.push(p.createTextNode(T));for(st.textContent="",ot=0;T=Y[ot++];)if(w&&-1<x.inArray(T,w))_&&_.push(T);else if(K=is(T),R=qn(st.appendChild(T),"script"),K&&Aa(R),y)for(Z=0;T=R[Z++];)Jt.test(T.type||"")&&y.push(T);return st}var Ta=/^([^.]*)(?:\.(.+)|)/;function qr(){return!0}function oo(){return!1}function Ra(d,p,y,w,_,T){var R,U;if("object"==typeof p){for(U in"string"!=typeof y&&(w=w||y,y=void 0),p)Ra(d,U,y,w,p[U],T);return d}if(null==w&&null==_?(_=y,w=y=void 0):null==_&&("string"==typeof y?(_=w,w=void 0):(_=w,w=y,y=void 0)),!1===_)_=oo;else if(!_)return d;return 1===T&&(R=_,(_=function(z){return x().off(z),R.apply(this,arguments)}).guid=R.guid||(R.guid=x.guid++)),d.each(function(){x.event.add(this,p,_,w,y)})}function $r(d,p,y){y?(te.set(d,p,!1),x.event.add(d,p,{namespace:!1,handler:function(w){var _,T=te.get(this,p);if(1&w.isTrigger&&this[p]){if(T)(x.event.special[p]||{}).delegateType&&w.stopPropagation();else if(T=ae.call(arguments),te.set(this,p,T),this[p](),_=te.get(this,p),te.set(this,p,!1),T!==_)return w.stopImmediatePropagation(),w.preventDefault(),_}else T&&(te.set(this,p,x.event.trigger(T[0],T.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=qr)}})):void 0===te.get(d,p)&&x.event.add(d,p,qr)}x.event={global:{},add:function(d,p,y,w,_){var T,R,U,z,K,Z,st,Y,ot,Xt,D,me=te.get(d);if(ur(d))for(y.handler&&(y=(T=y).handler,_=T.selector),_&&x.find.matchesSelector(on,_),y.guid||(y.guid=x.guid++),(z=me.events)||(z=me.events=Object.create(null)),(R=me.handle)||(R=me.handle=function(tn){return typeof x<"u"&&x.event.triggered!==tn.type?x.event.dispatch.apply(d,arguments):void 0}),K=(p=(p||"").match(ee)||[""]).length;K--;)ot=D=(U=Ta.exec(p[K])||[])[1],Xt=(U[2]||"").split(".").sort(),ot&&(st=x.event.special[ot]||{},st=x.event.special[ot=(_?st.delegateType:st.bindType)||ot]||{},Z=x.extend({type:ot,origType:D,data:w,handler:y,guid:y.guid,selector:_,needsContext:_&&x.expr.match.needsContext.test(_),namespace:Xt.join(".")},T),(Y=z[ot])||((Y=z[ot]=[]).delegateCount=0,st.setup&&!1!==st.setup.call(d,w,Xt,R)||d.addEventListener&&d.addEventListener(ot,R)),st.add&&(st.add.call(d,Z),Z.handler.guid||(Z.handler.guid=y.guid)),_?Y.splice(Y.delegateCount++,0,Z):Y.push(Z),x.event.global[ot]=!0)},remove:function(d,p,y,w,_){var T,R,U,z,K,Z,st,Y,ot,Xt,D,me=te.hasData(d)&&te.get(d);if(me&&(z=me.events)){for(K=(p=(p||"").match(ee)||[""]).length;K--;)if(ot=D=(U=Ta.exec(p[K])||[])[1],Xt=(U[2]||"").split(".").sort(),ot){for(st=x.event.special[ot]||{},Y=z[ot=(w?st.delegateType:st.bindType)||ot]||[],U=U[2]&&new RegExp("(^|\\.)"+Xt.join("\\.(?:.*\\.|)")+"(\\.|$)"),R=T=Y.length;T--;)Z=Y[T],!_&&D!==Z.origType||y&&y.guid!==Z.guid||U&&!U.test(Z.namespace)||w&&w!==Z.selector&&("**"!==w||!Z.selector)||(Y.splice(T,1),Z.selector&&Y.delegateCount--,st.remove&&st.remove.call(d,Z));R&&!Y.length&&(st.teardown&&!1!==st.teardown.call(d,Xt,me.handle)||x.removeEvent(d,ot,me.handle),delete z[ot])}else for(ot in z)x.event.remove(d,ot+p[K],y,w,!0);x.isEmptyObject(z)&&te.remove(d,"handle events")}},dispatch:function(d){var p,y,w,_,T,R,U=new Array(arguments.length),z=x.event.fix(d),K=(te.get(this,"events")||Object.create(null))[z.type]||[],Z=x.event.special[z.type]||{};for(U[0]=z,p=1;p<arguments.length;p++)U[p]=arguments[p];if(z.delegateTarget=this,!Z.preDispatch||!1!==Z.preDispatch.call(this,z)){for(R=x.event.handlers.call(this,z,K),p=0;(_=R[p++])&&!z.isPropagationStopped();)for(z.currentTarget=_.elem,y=0;(T=_.handlers[y++])&&!z.isImmediatePropagationStopped();)z.rnamespace&&!1!==T.namespace&&!z.rnamespace.test(T.namespace)||(z.handleObj=T,z.data=T.data,void 0!==(w=((x.event.special[T.origType]||{}).handle||T.handler).apply(_.elem,U))&&!1===(z.result=w)&&(z.preventDefault(),z.stopPropagation()));return Z.postDispatch&&Z.postDispatch.call(this,z),z.result}},handlers:function(d,p){var y,w,_,T,R,U=[],z=p.delegateCount,K=d.target;if(z&&K.nodeType&&!("click"===d.type&&1<=d.button))for(;K!==this;K=K.parentNode||this)if(1===K.nodeType&&("click"!==d.type||!0!==K.disabled)){for(T=[],R={},y=0;y<z;y++)void 0===R[_=(w=p[y]).selector+" "]&&(R[_]=w.needsContext?-1<x(_,this).index(K):x.find(_,this,null,[K]).length),R[_]&&T.push(w);T.length&&U.push({elem:K,handlers:T})}return K=this,z<p.length&&U.push({elem:K,handlers:p.slice(z)}),U},addProp:function(d,p){Object.defineProperty(x.Event.prototype,d,{enumerable:!0,configurable:!0,get:Lt(p)?function(){if(this.originalEvent)return p(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(y){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(d){return d[x.expando]?d:new x.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var p=this||d;return Wo.test(p.type)&&p.click&&St(p,"input")&&$r(p,"click",!0),!1},trigger:function(d){var p=this||d;return Wo.test(p.type)&&p.click&&St(p,"input")&&$r(p,"click"),!0},_default:function(d){var p=d.target;return Wo.test(p.type)&&p.click&&St(p,"input")&&te.get(p,"click")||St(p,"a")}},beforeunload:{postDispatch:function(d){void 0!==d.result&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}},x.removeEvent=function(d,p,y){d.removeEventListener&&d.removeEventListener(p,y)},x.Event=function(d,p){if(!(this instanceof x.Event))return new x.Event(d,p);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||void 0===d.defaultPrevented&&!1===d.returnValue?qr:oo,this.target=d.target&&3===d.target.nodeType?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,p&&x.extend(this,p),this.timeStamp=d&&d.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:oo,isPropagationStopped:oo,isImmediatePropagationStopped:oo,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=qr,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=qr,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=qr,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(d,p){function y(w){if(Zt.documentMode){var _=te.get(this,"handle"),T=x.event.fix(w);T.type="focusin"===w.type?"focus":"blur",T.isSimulated=!0,_(w),T.target===T.currentTarget&&_(T)}else x.event.simulate(p,w.target,x.event.fix(w))}x.event.special[d]={setup:function(){var w;if($r(this,d,!0),!Zt.documentMode)return!1;(w=te.get(this,p))||this.addEventListener(p,y),te.set(this,p,(w||0)+1)},trigger:function(){return $r(this,d),!0},teardown:function(){var w;if(!Zt.documentMode)return!1;(w=te.get(this,p)-1)?te.set(this,p,w):(this.removeEventListener(p,y),te.remove(this,p))},_default:function(w){return te.get(w.target,d)},delegateType:p},x.event.special[p]={setup:function(){var w=this.ownerDocument||this.document||this,_=Zt.documentMode?this:w,T=te.get(_,p);T||(Zt.documentMode?this.addEventListener(p,y):w.addEventListener(d,y,!0)),te.set(_,p,(T||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,_=Zt.documentMode?this:w,T=te.get(_,p)-1;T?te.set(_,p,T):(Zt.documentMode?this.removeEventListener(p,y):w.removeEventListener(d,y,!0),te.remove(_,p))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,p){x.event.special[d]={delegateType:p,bindType:p,handle:function(y){var w,_=y.relatedTarget,T=y.handleObj;return _&&(_===this||x.contains(this,_))||(y.type=T.origType,w=T.handler.apply(this,arguments),y.type=p),w}}}),x.fn.extend({on:function(d,p,y,w){return Ra(this,d,p,y,w)},one:function(d,p,y,w){return Ra(this,d,p,y,w,1)},off:function(d,p,y){var w,_;if(d&&d.preventDefault&&d.handleObj)return w=d.handleObj,x(d.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof d){for(_ in d)this.off(_,p,d[_]);return this}return!1!==p&&"function"!=typeof p||(y=p,p=void 0),!1===y&&(y=oo),this.each(function(){x.event.remove(this,d,y,p)})}});var Vo=/<script|<style|<link/i,tc=/checked\s*(?:[^=]|=\s*.checked.)/i,xi=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ls(d,p){return St(d,"table")&&St(11!==p.nodeType?p:p.firstChild,"tr")&&x(d).children("tbody")[0]||d}function ec(d){return d.type=(null!==d.getAttribute("type"))+"/"+d.type,d}function nc(d){return"true/"===(d.type||"").slice(0,5)?d.type=d.type.slice(5):d.removeAttribute("type"),d}function wi(d,p){var y,w,_,T,R,U;if(1===p.nodeType){if(te.hasData(d)&&(U=te.get(d).events))for(_ in te.remove(p,"handle events"),U)for(y=0,w=U[_].length;y<w;y++)x.event.add(p,_,U[_][y]);Bn.hasData(d)&&(T=Bn.access(d),R=x.extend({},T),Bn.set(p,R))}}function Ye(d,p,y,w){p=Xe(p);var _,T,R,U,z,K,Z=0,st=d.length,Y=st-1,ot=p[0],Xt=Lt(ot);if(Xt||1<st&&"string"==typeof ot&&!Gt.checkClone&&tc.test(ot))return d.each(function(D){var me=d.eq(D);Xt&&(p[0]=ot.call(this,D,me.html())),Ye(me,p,y,w)});if(st&&(T=(_=Is(p,d[0].ownerDocument,!1,d,w)).firstChild,1===_.childNodes.length&&(_=T),T||w)){for(U=(R=x.map(qn(_,"script"),ec)).length;Z<st;Z++)z=_,Z!==Y&&(z=x.clone(z,!0,!0),U&&x.merge(R,qn(z,"script"))),y.call(d[Z],z,Z);if(U)for(K=R[R.length-1].ownerDocument,x.map(R,nc),Z=0;Z<U;Z++)Jt.test((z=R[Z]).type||"")&&!te.access(z,"globalEval")&&x.contains(K,z)&&(z.src&&"module"!==(z.type||"").toLowerCase()?x._evalUrl&&!z.noModule&&x._evalUrl(z.src,{nonce:z.nonce||z.getAttribute("nonce")},K):Me(z.textContent.replace(xi,""),z,K))}return d}function sn(d,p,y){for(var w,_=p?x.filter(p,d):d,T=0;null!=(w=_[T]);T++)y||1!==w.nodeType||x.cleanData(qn(w)),w.parentNode&&(y&&is(w)&&Aa(qn(w,"script")),w.parentNode.removeChild(w));return d}x.extend({htmlPrefilter:function(d){return d},clone:function(d,p,y){var w,_,T,R,U,z,K,Z=d.cloneNode(!0),st=is(d);if(!(Gt.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||x.isXMLDoc(d)))for(R=qn(Z),w=0,_=(T=qn(d)).length;w<_;w++)U=T[w],"input"===(K=(z=R[w]).nodeName.toLowerCase())&&Wo.test(U.type)?z.checked=U.checked:"input"!==K&&"textarea"!==K||(z.defaultValue=U.defaultValue);if(p)if(y)for(T=T||qn(d),R=R||qn(Z),w=0,_=T.length;w<_;w++)wi(T[w],R[w]);else wi(d,Z);return 0<(R=qn(Z,"script")).length&&Aa(R,!st&&qn(d,"script")),Z},cleanData:function(d){for(var p,y,w,_=x.event.special,T=0;void 0!==(y=d[T]);T++)if(ur(y)){if(p=y[te.expando]){if(p.events)for(w in p.events)_[w]?x.event.remove(y,w):x.removeEvent(y,w,p.handle);y[te.expando]=void 0}y[Bn.expando]&&(y[Bn.expando]=void 0)}}}),x.fn.extend({detach:function(d){return sn(this,d,!0)},remove:function(d){return sn(this,d)},text:function(d){return Hr(this,function(p){return void 0===p?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=p)})},null,d,arguments.length)},append:function(){return Ye(this,arguments,function(d){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ls(this,d).appendChild(d)})},prepend:function(){return Ye(this,arguments,function(d){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var p=ls(this,d);p.insertBefore(d,p.firstChild)}})},before:function(){return Ye(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return Ye(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,p=0;null!=(d=this[p]);p++)1===d.nodeType&&(x.cleanData(qn(d,!1)),d.textContent="");return this},clone:function(d,p){return d=null!=d&&d,p=p??d,this.map(function(){return x.clone(this,d,p)})},html:function(d){return Hr(this,function(p){var y=this[0]||{},w=0,_=this.length;if(void 0===p&&1===y.nodeType)return y.innerHTML;if("string"==typeof p&&!Vo.test(p)&&!En[(Te.exec(p)||["",""])[1].toLowerCase()]){p=x.htmlPrefilter(p);try{for(;w<_;w++)1===(y=this[w]||{}).nodeType&&(x.cleanData(qn(y,!1)),y.innerHTML=p);y=0}catch{}}y&&this.empty().append(p)},null,d,arguments.length)},replaceWith:function(){var d=[];return Ye(this,arguments,function(p){var y=this.parentNode;x.inArray(this,d)<0&&(x.cleanData(qn(this)),y&&y.replaceChild(p,this))},d)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,p){x.fn[d]=function(y){for(var w,_=[],T=x(y),R=T.length-1,U=0;U<=R;U++)w=U===R?this:this.clone(!0),x(T[U])[p](w),Rn.apply(_,w.get());return this.pushStack(_)}});var Fs=new RegExp("^("+wo+")(?!px)[a-z%]+$","i"),js=/^--/,so=function(d){var p=d.ownerDocument.defaultView;return p&&p.opener||(p=pt),p.getComputedStyle(d)},rc=function(d,p,y){var w,_,T={};for(_ in p)T[_]=d.style[_],d.style[_]=p[_];for(_ in w=y.call(d),p)d.style[_]=T[_];return w},oc=new RegExp(Qn.join("|"),"i");function Jn(d,p,y){var w,_,T,R,U=js.test(p),z=d.style;return(y=y||so(d))&&(R=y.getPropertyValue(p)||y[p],U&&R&&(R=R.replace(no,"$1")||void 0),""!==R||is(d)||(R=x.style(d,p)),!Gt.pixelBoxStyles()&&Fs.test(R)&&oc.test(p)&&(w=z.width,_=z.minWidth,T=z.maxWidth,z.minWidth=z.maxWidth=z.width=R,R=y.width,z.width=w,z.minWidth=_,z.maxWidth=T)),void 0!==R?R+"":R}function cs(d,p){return{get:function(){if(!d())return(this.get=p).apply(this,arguments);delete this.get}}}!function(){function d(){if(K){z.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",on.appendChild(z).appendChild(K);var Z=pt.getComputedStyle(K);y="1%"!==Z.top,U=12===p(Z.marginLeft),K.style.right="60%",T=36===p(Z.right),w=36===p(Z.width),K.style.position="absolute",_=12===p(K.offsetWidth/3),on.removeChild(z),K=null}}function p(Z){return Math.round(parseFloat(Z))}var y,w,_,T,R,U,z=Zt.createElement("div"),K=Zt.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",Gt.clearCloneStyle="content-box"===K.style.backgroundClip,x.extend(Gt,{boxSizingReliable:function(){return d(),w},pixelBoxStyles:function(){return d(),T},pixelPosition:function(){return d(),y},reliableMarginLeft:function(){return d(),U},scrollboxSize:function(){return d(),_},reliableTrDimensions:function(){var Z,st,Y,ot;return null==R&&(Z=Zt.createElement("table"),st=Zt.createElement("tr"),Y=Zt.createElement("div"),Z.style.cssText="position:absolute;left:-11111px;border-collapse:separate",st.style.cssText="box-sizing:content-box;border:1px solid",st.style.height="1px",Y.style.height="9px",Y.style.display="block",on.appendChild(Z).appendChild(st).appendChild(Y),ot=pt.getComputedStyle(st),R=parseInt(ot.height,10)+parseInt(ot.borderTopWidth,10)+parseInt(ot.borderBottomWidth,10)===st.offsetHeight,on.removeChild(Z)),R}}))}();var zs=["Webkit","Moz","ms"],Oa=Zt.createElement("div").style,Wr={};function Si(d){return x.cssProps[d]||Wr[d]||(d in Oa?d:Wr[d]=function(y){for(var w=y[0].toUpperCase()+y.slice(1),_=zs.length;_--;)if((y=zs[_]+w)in Oa)return y}(d)||d)}var su=/^(none|table(?!-c[ea]).+)/,sc={position:"absolute",visibility:"hidden",display:"block"},Ei={letterSpacing:"0",fontWeight:"400"};function ki(d,p,y){var w=Cn.exec(p);return w?Math.max(0,w[2]-(y||0))+(w[3]||"px"):p}function Da(d,p,y,w,_,T){var R="width"===p?1:0,U=0,z=0,K=0;if(y===(w?"border":"content"))return 0;for(;R<4;R+=2)"margin"===y&&(K+=x.css(d,y+Qn[R],!0,_)),w?("content"===y&&(z-=x.css(d,"padding"+Qn[R],!0,_)),"margin"!==y&&(z-=x.css(d,"border"+Qn[R]+"Width",!0,_))):(z+=x.css(d,"padding"+Qn[R],!0,_),"padding"!==y?z+=x.css(d,"border"+Qn[R]+"Width",!0,_):U+=x.css(d,"border"+Qn[R]+"Width",!0,_));return!w&&0<=T&&(z+=Math.max(0,Math.ceil(d["offset"+p[0].toUpperCase()+p.slice(1)]-T-z-U-.5))||0),z+K}function _i(d,p,y){var w=so(d),_=(!Gt.boxSizingReliable()||y)&&"border-box"===x.css(d,"boxSizing",!1,w),T=_,R=Jn(d,p,w),U="offset"+p[0].toUpperCase()+p.slice(1);if(Fs.test(R)){if(!y)return R;R="auto"}return(!Gt.boxSizingReliable()&&_||!Gt.reliableTrDimensions()&&St(d,"tr")||"auto"===R||!parseFloat(R)&&"inline"===x.css(d,"display",!1,w))&&d.getClientRects().length&&(_="border-box"===x.css(d,"boxSizing",!1,w),(T=U in d)&&(R=d[U])),(R=parseFloat(R)||0)+Da(d,p,y||(_?"border":"content"),T,w,R)+"px"}function fr(d,p,y,w,_){return new fr.prototype.init(d,p,y,w,_)}x.extend({cssHooks:{opacity:{get:function(d,p){if(p){var y=Jn(d,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,p,y,w){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var _,T,R,U=rn(p),z=js.test(p),K=d.style;if(z||(p=Si(U)),R=x.cssHooks[p]||x.cssHooks[U],void 0===y)return R&&"get"in R&&void 0!==(_=R.get(d,!1,w))?_:K[p];"string"==(T=typeof y)&&(_=Cn.exec(y))&&_[1]&&(y=Zl(d,p,_),T="number"),null!=y&&y==y&&("number"!==T||z||(y+=_&&_[3]||(x.cssNumber[U]?"":"px")),Gt.clearCloneStyle||""!==y||0!==p.indexOf("background")||(K[p]="inherit"),R&&"set"in R&&void 0===(y=R.set(d,y,w))||(z?K.setProperty(p,y):K[p]=y))}},css:function(d,p,y,w){var _,T,R,U=rn(p);return js.test(p)||(p=Si(U)),(R=x.cssHooks[p]||x.cssHooks[U])&&"get"in R&&(_=R.get(d,!0,y)),void 0===_&&(_=Jn(d,p,w)),"normal"===_&&p in Ei&&(_=Ei[p]),""===y||y?(T=parseFloat(_),!0===y||isFinite(T)?T||0:_):_}}),x.each(["height","width"],function(d,p){x.cssHooks[p]={get:function(y,w,_){if(w)return!su.test(x.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?_i(y,p,_):rc(y,sc,function(){return _i(y,p,_)})},set:function(y,w,_){var T,R=so(y),U=!Gt.scrollboxSize()&&"absolute"===R.position,z=(U||_)&&"border-box"===x.css(y,"boxSizing",!1,R),K=_?Da(y,p,_,z,R):0;return z&&U&&(K-=Math.ceil(y["offset"+p[0].toUpperCase()+p.slice(1)]-parseFloat(R[p])-Da(y,p,"border",!1,R)-.5)),K&&(T=Cn.exec(w))&&"px"!==(T[3]||"px")&&(y.style[p]=w,w=x.css(y,p)),ki(0,w,K)}}}),x.cssHooks.marginLeft=cs(Gt.reliableMarginLeft,function(d,p){if(p)return(parseFloat(Jn(d,"marginLeft"))||d.getBoundingClientRect().left-rc(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(d,p){x.cssHooks[d+p]={expand:function(y){for(var w=0,_={},T="string"==typeof y?y.split(" "):[y];w<4;w++)_[d+Qn[w]+p]=T[w]||T[w-2]||T[0];return _}},"margin"!==d&&(x.cssHooks[d+p].set=ki)}),x.fn.extend({css:function(d,p){return Hr(this,function(y,w,_){var T,R,U={},z=0;if(Array.isArray(w)){for(T=so(y),R=w.length;z<R;z++)U[w[z]]=x.css(y,w[z],!1,T);return U}return void 0!==_?x.style(y,w,_):x.css(y,w)},d,p,1<arguments.length)}}),((x.Tween=fr).prototype={constructor:fr,init:function(d,p,y,w,_,T){this.elem=d,this.prop=y,this.easing=_||x.easing._default,this.options=p,this.start=this.now=this.cur(),this.end=w,this.unit=T||(x.cssNumber[y]?"":"px")},cur:function(){var d=fr.propHooks[this.prop];return d&&d.get?d.get(this):fr.propHooks._default.get(this)},run:function(d){var p,y=fr.propHooks[this.prop];return this.pos=p=this.options.duration?x.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):d,this.now=(this.end-this.start)*p+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):fr.propHooks._default.set(this),this}}).init.prototype=fr.prototype,(fr.propHooks={_default:{get:function(d){var p;return 1!==d.elem.nodeType||null!=d.elem[d.prop]&&null==d.elem.style[d.prop]?d.elem[d.prop]:(p=x.css(d.elem,d.prop,""))&&"auto"!==p?p:0},set:function(d){x.fx.step[d.prop]?x.fx.step[d.prop](d):1!==d.elem.nodeType||!x.cssHooks[d.prop]&&null==d.elem.style[Si(d.prop)]?d.elem[d.prop]=d.now:x.style(d.elem,d.prop,d.now+d.unit)}}}).scrollTop=fr.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},x.easing={linear:function(d){return d},swing:function(d){return.5-Math.cos(d*Math.PI)/2},_default:"swing"},x.fx=fr.prototype.init,x.fx.step={};var Ko,Ba,ds,Ni,ac=/^(?:toggle|show|hide)$/,ic=/queueHooks$/;function Pa(){Ba&&(!1===Zt.hidden&&pt.requestAnimationFrame?pt.requestAnimationFrame(Pa):pt.setTimeout(Pa,x.fx.interval),x.fx.tick())}function Ai(){return pt.setTimeout(function(){Ko=void 0}),Ko=Date.now()}function Us(d,p){var y,w=0,_={height:d};for(p=p?1:0;w<4;w+=2-p)_["margin"+(y=Qn[w])]=_["padding"+y]=d;return p&&(_.opacity=_.width=d),_}function Ti(d,p,y){for(var w,_=(mr.tweeners[p]||[]).concat(mr.tweeners["*"]),T=0,R=_.length;T<R;T++)if(w=_[T].call(y,p,d))return w}function mr(d,p,y){var w,_,T=0,R=mr.prefilters.length,U=x.Deferred().always(function(){delete z.elem}),z=function(){if(_)return!1;for(var st=Ko||Ai(),Y=Math.max(0,K.startTime+K.duration-st),ot=1-(Y/K.duration||0),Xt=0,D=K.tweens.length;Xt<D;Xt++)K.tweens[Xt].run(ot);return U.notifyWith(d,[K,ot,Y]),ot<1&&D?Y:(D||U.notifyWith(d,[K,1,0]),U.resolveWith(d,[K]),!1)},K=U.promise({elem:d,props:x.extend({},p),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},y),originalProperties:p,originalOptions:y,startTime:Ko||Ai(),duration:y.duration,tweens:[],createTween:function(st,Y){var ot=x.Tween(d,K.opts,st,Y,K.opts.specialEasing[st]||K.opts.easing);return K.tweens.push(ot),ot},stop:function(st){var Y=0,ot=st?K.tweens.length:0;if(_)return this;for(_=!0;Y<ot;Y++)K.tweens[Y].run(1);return st?(U.notifyWith(d,[K,1,0]),U.resolveWith(d,[K,st])):U.rejectWith(d,[K,st]),this}}),Z=K.props;for(function(st,Y){var ot,Xt,D,me,tn;for(ot in st)if(D=Y[Xt=rn(ot)],me=st[ot],Array.isArray(me)&&(D=me[1],me=st[ot]=me[0]),ot!==Xt&&(st[Xt]=me,delete st[ot]),(tn=x.cssHooks[Xt])&&"expand"in tn)for(ot in me=tn.expand(me),delete st[Xt],me)ot in st||(st[ot]=me[ot],Y[ot]=D);else Y[Xt]=D}(Z,K.opts.specialEasing);T<R;T++)if(w=mr.prefilters[T].call(K,d,Z,K.opts))return Lt(w.stop)&&(x._queueHooks(K.elem,K.opts.queue).stop=w.stop.bind(w)),w;return x.map(Z,Ti,K),Lt(K.opts.start)&&K.opts.start.call(d,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),x.fx.timer(x.extend(z,{elem:d,anim:K,queue:K.opts.queue})),K}x.Animation=x.extend(mr,{tweeners:{"*":[function(d,p){var y=this.createTween(d,p);return Zl(y.elem,d,Cn.exec(p),y),y}]},tweener:function(d,p){Lt(d)?(p=d,d=["*"]):d=d.match(ee);for(var y,w=0,_=d.length;w<_;w++)(mr.tweeners[y=d[w]]=mr.tweeners[y]||[]).unshift(p)},prefilters:[function(d,p,y){var w,_,T,R,U,z,K,Z,st="width"in p||"height"in p,Y=this,ot={},Xt=d.style,D=d.nodeType&&Ho(d),me=te.get(d,"fxshow");for(w in y.queue||(null==(R=x._queueHooks(d,"fx")).unqueued&&(R.unqueued=0,U=R.empty.fire,R.empty.fire=function(){R.unqueued||U()}),R.unqueued++,Y.always(function(){Y.always(function(){R.unqueued--,x.queue(d,"fx").length||R.empty.fire()})})),p)if(ac.test(_=p[w])){if(delete p[w],T=T||"toggle"===_,_===(D?"hide":"show")){if("show"!==_||!me||void 0===me[w])continue;D=!0}ot[w]=me&&me[w]||x.style(d,w)}if((z=!x.isEmptyObject(p))||!x.isEmptyObject(ot))for(w in st&&1===d.nodeType&&(y.overflow=[Xt.overflow,Xt.overflowX,Xt.overflowY],null==(K=me&&me.display)&&(K=te.get(d,"display")),"none"===(Z=x.css(d,"display"))&&(K?Z=K:(qo([d],!0),K=d.style.display||K,Z=x.css(d,"display"),qo([d]))),("inline"===Z||"inline-block"===Z&&null!=K)&&"none"===x.css(d,"float")&&(z||(Y.done(function(){Xt.display=K}),null==K&&(K="none"===(Z=Xt.display)?"":Z)),Xt.display="inline-block")),y.overflow&&(Xt.overflow="hidden",Y.always(function(){Xt.overflow=y.overflow[0],Xt.overflowX=y.overflow[1],Xt.overflowY=y.overflow[2]})),z=!1,ot)z||(me?"hidden"in me&&(D=me.hidden):me=te.access(d,"fxshow",{display:K}),T&&(me.hidden=!D),D&&qo([d],!0),Y.done(function(){for(w in D||qo([d]),te.remove(d,"fxshow"),ot)x.style(d,w,ot[w])})),z=Ti(D?me[w]:0,w,Y),w in me||(me[w]=z.start,D&&(z.end=z.start,z.start=0))}],prefilter:function(d,p){p?mr.prefilters.unshift(d):mr.prefilters.push(d)}}),x.speed=function(d,p,y){var w=d&&"object"==typeof d?x.extend({},d):{complete:y||!y&&p||Lt(d)&&d,duration:d,easing:y&&p||p&&!Lt(p)&&p};return x.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in x.fx.speeds?x.fx.speeds[w.duration]:x.fx.speeds._default),null!=w.queue&&!0!==w.queue||(w.queue="fx"),w.old=w.complete,w.complete=function(){Lt(w.old)&&w.old.call(this),w.queue&&x.dequeue(this,w.queue)},w},x.fn.extend({fadeTo:function(d,p,y,w){return this.filter(Ho).css("opacity",0).show().end().animate({opacity:p},d,y,w)},animate:function(d,p,y,w){var _=x.isEmptyObject(d),T=x.speed(p,y,w),R=function(){var U=mr(this,x.extend({},d),T);(_||te.get(this,"finish"))&&U.stop(!0)};return R.finish=R,_||!1===T.queue?this.each(R):this.queue(T.queue,R)},stop:function(d,p,y){var w=function(_){var T=_.stop;delete _.stop,T(y)};return"string"!=typeof d&&(y=p,p=d,d=void 0),p&&this.queue(d||"fx",[]),this.each(function(){var _=!0,T=null!=d&&d+"queueHooks",R=x.timers,U=te.get(this);if(T)U[T]&&U[T].stop&&w(U[T]);else for(T in U)U[T]&&U[T].stop&&ic.test(T)&&w(U[T]);for(T=R.length;T--;)R[T].elem!==this||null!=d&&R[T].queue!==d||(R[T].anim.stop(y),_=!1,R.splice(T,1));!_&&y||x.dequeue(this,d)})},finish:function(d){return!1!==d&&(d=d||"fx"),this.each(function(){var p,y=te.get(this),w=y[d+"queue"],_=y[d+"queueHooks"],T=x.timers,R=w?w.length:0;for(y.finish=!0,x.queue(this,d,[]),_&&_.stop&&_.stop.call(this,!0),p=T.length;p--;)T[p].elem===this&&T[p].queue===d&&(T[p].anim.stop(!0),T.splice(p,1));for(p=0;p<R;p++)w[p]&&w[p].finish&&w[p].finish.call(this);delete y.finish})}}),x.each(["toggle","show","hide"],function(d,p){var y=x.fn[p];x.fn[p]=function(w,_,T){return null==w||"boolean"==typeof w?y.apply(this,arguments):this.animate(Us(p,!0),w,_,T)}}),x.each({slideDown:Us("show"),slideUp:Us("hide"),slideToggle:Us("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,p){x.fn[d]=function(y,w,_){return this.animate(p,y,w,_)}}),x.timers=[],x.fx.tick=function(){var d,p=0,y=x.timers;for(Ko=Date.now();p<y.length;p++)(d=y[p])()||y[p]!==d||y.splice(p--,1);y.length||x.fx.stop(),Ko=void 0},x.fx.timer=function(d){x.timers.push(d),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Ba||(Ba=!0,Pa())},x.fx.stop=function(){Ba=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(d,p){return d=x.fx&&x.fx.speeds[d]||d,this.queue(p=p||"fx",function(y,w){var _=pt.setTimeout(y,d);w.stop=function(){pt.clearTimeout(_)}})},ds=Zt.createElement("input"),Ni=Zt.createElement("select").appendChild(Zt.createElement("option")),ds.type="checkbox",Gt.checkOn=""!==ds.value,Gt.optSelected=Ni.selected,(ds=Zt.createElement("input")).value="t",ds.type="radio",Gt.radioValue="t"===ds.value;var lc,Hs=x.expr.attrHandle;x.fn.extend({attr:function(d,p){return Hr(this,x.attr,d,p,1<arguments.length)},removeAttr:function(d){return this.each(function(){x.removeAttr(this,d)})}}),x.extend({attr:function(d,p,y){var w,_,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return typeof d.getAttribute>"u"?x.prop(d,p,y):(1===T&&x.isXMLDoc(d)||(_=x.attrHooks[p.toLowerCase()]||(x.expr.match.bool.test(p)?lc:void 0)),void 0!==y?null===y?void x.removeAttr(d,p):_&&"set"in _&&void 0!==(w=_.set(d,y,p))?w:(d.setAttribute(p,y+""),y):_&&"get"in _&&null!==(w=_.get(d,p))?w:null==(w=x.find.attr(d,p))?void 0:w)},attrHooks:{type:{set:function(d,p){if(!Gt.radioValue&&"radio"===p&&St(d,"input")){var y=d.value;return d.setAttribute("type",p),y&&(d.value=y),p}}}},removeAttr:function(d,p){var y,w=0,_=p&&p.match(ee);if(_&&1===d.nodeType)for(;y=_[w++];)d.removeAttribute(y)}}),lc={set:function(d,p,y){return!1===p?x.removeAttr(d,y):d.setAttribute(y,y),y}},x.each(x.expr.match.bool.source.match(/\w+/g),function(d,p){var y=Hs[p]||x.find.attr;Hs[p]=function(w,_,T){var R,U,z=_.toLowerCase();return T||(U=Hs[z],Hs[z]=R,R=null!=y(w,_,T)?z:null,Hs[z]=U),R}});var au=/^(?:input|select|textarea|button)$/i,iu=/^(?:a|area)$/i;function Ln(d){return(d.match(ee)||[]).join(" ")}function Xo(d){return d.getAttribute&&d.getAttribute("class")||""}function qs(d){return Array.isArray(d)?d:"string"==typeof d&&d.match(ee)||[]}x.fn.extend({prop:function(d,p){return Hr(this,x.prop,d,p,1<arguments.length)},removeProp:function(d){return this.each(function(){delete this[x.propFix[d]||d]})}}),x.extend({prop:function(d,p,y){var w,_,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return 1===T&&x.isXMLDoc(d)||(_=x.propHooks[p=x.propFix[p]||p]),void 0!==y?_&&"set"in _&&void 0!==(w=_.set(d,y,p))?w:d[p]=y:_&&"get"in _&&null!==(w=_.get(d,p))?w:d[p]},propHooks:{tabIndex:{get:function(d){var p=x.find.attr(d,"tabindex");return p?parseInt(p,10):au.test(d.nodeName)||iu.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Gt.optSelected||(x.propHooks.selected={get:function(d){return null},set:function(d){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(d){var p,y,w,_,T,R;return Lt(d)?this.each(function(U){x(this).addClass(d.call(this,U,Xo(this)))}):(p=qs(d)).length?this.each(function(){if(w=Xo(this),y=1===this.nodeType&&" "+Ln(w)+" "){for(T=0;T<p.length;T++)y.indexOf(" "+(_=p[T])+" ")<0&&(y+=_+" ");R=Ln(y),w!==R&&this.setAttribute("class",R)}}):this},removeClass:function(d){var p,y,w,_,T,R;return Lt(d)?this.each(function(U){x(this).removeClass(d.call(this,U,Xo(this)))}):arguments.length?(p=qs(d)).length?this.each(function(){if(w=Xo(this),y=1===this.nodeType&&" "+Ln(w)+" "){for(T=0;T<p.length;T++)for(_=p[T];-1<y.indexOf(" "+_+" ");)y=y.replace(" "+_+" "," ");R=Ln(y),w!==R&&this.setAttribute("class",R)}}):this:this.attr("class","")},toggleClass:function(d,p){var y,w,_,T,R=typeof d,U="string"===R||Array.isArray(d);return Lt(d)?this.each(function(z){x(this).toggleClass(d.call(this,z,Xo(this),p),p)}):"boolean"==typeof p&&U?p?this.addClass(d):this.removeClass(d):(y=qs(d),this.each(function(){if(U)for(T=x(this),_=0;_<y.length;_++)T.hasClass(w=y[_])?T.removeClass(w):T.addClass(w);else void 0!==d&&"boolean"!==R||((w=Xo(this))&&te.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||!1===d?"":te.get(this,"__className__")||""))}))},hasClass:function(d){var p,y,w=0;for(p=" "+d+" ";y=this[w++];)if(1===y.nodeType&&-1<(" "+Ln(Xo(y))+" ").indexOf(p))return!0;return!1}});var Vr=/\r/g;x.fn.extend({val:function(d){var p,y,w,_=this[0];return arguments.length?(w=Lt(d),this.each(function(T){var R;1===this.nodeType&&(null==(R=w?d.call(this,T,x(this).val()):d)?R="":"number"==typeof R?R+="":Array.isArray(R)&&(R=x.map(R,function(U){return null==U?"":U+""})),(p=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in p&&void 0!==p.set(this,R,"value")||(this.value=R))})):_?(p=x.valHooks[_.type]||x.valHooks[_.nodeName.toLowerCase()])&&"get"in p&&void 0!==(y=p.get(_,"value"))?y:"string"==typeof(y=_.value)?y.replace(Vr,""):y??"":void 0}}),x.extend({valHooks:{option:{get:function(d){return x.find.attr(d,"value")??Ln(x.text(d))}},select:{get:function(d){var p,y,w,_=d.options,T=d.selectedIndex,R="select-one"===d.type,U=R?null:[],z=R?T+1:_.length;for(w=T<0?z:R?T:0;w<z;w++)if(((y=_[w]).selected||w===T)&&!y.disabled&&(!y.parentNode.disabled||!St(y.parentNode,"optgroup"))){if(p=x(y).val(),R)return p;U.push(p)}return U},set:function(d,p){for(var y,w,_=d.options,T=x.makeArray(p),R=_.length;R--;)((w=_[R]).selected=-1<x.inArray(x.valHooks.option.get(w),T))&&(y=!0);return y||(d.selectedIndex=-1),T}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(d,p){if(Array.isArray(p))return d.checked=-1<x.inArray(x(d).val(),p)}},Gt.checkOn||(x.valHooks[this].get=function(d){return null===d.getAttribute("value")?"on":d.value})});var Zn=pt.location,So={guid:Date.now()},Ri=/\?/;x.parseXML=function(d){var p,y;if(!d||"string"!=typeof d)return null;try{p=(new pt.DOMParser).parseFromString(d,"text/xml")}catch{}return y=p&&p.getElementsByTagName("parsererror")[0],p&&!y||x.error("Invalid XML: "+(y?x.map(y.childNodes,function(w){return w.textContent}).join("\n"):d)),p};var be=/^(?:focusinfocus|focusoutblur)$/,cc=function(d){d.stopPropagation()};x.extend(x.event,{trigger:function(d,p,y,w){var _,T,R,U,z,K,Z,st,Y=[y||Zt],ot=On.call(d,"type")?d.type:d,Xt=On.call(d,"namespace")?d.namespace.split("."):[];if(T=st=R=y=y||Zt,3!==y.nodeType&&8!==y.nodeType&&!be.test(ot+x.event.triggered)&&(-1<ot.indexOf(".")&&(ot=(Xt=ot.split(".")).shift(),Xt.sort()),z=ot.indexOf(":")<0&&"on"+ot,(d=d[x.expando]?d:new x.Event(ot,"object"==typeof d&&d)).isTrigger=w?2:3,d.namespace=Xt.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+Xt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=y),p=null==p?[d]:x.makeArray(p,[d]),Z=x.event.special[ot]||{},w||!Z.trigger||!1!==Z.trigger.apply(y,p))){if(!w&&!Z.noBubble&&!it(y)){for(be.test((U=Z.delegateType||ot)+ot)||(T=T.parentNode);T;T=T.parentNode)Y.push(T),R=T;R===(y.ownerDocument||Zt)&&Y.push(R.defaultView||R.parentWindow||pt)}for(_=0;(T=Y[_++])&&!d.isPropagationStopped();)st=T,d.type=1<_?U:Z.bindType||ot,(K=(te.get(T,"events")||Object.create(null))[d.type]&&te.get(T,"handle"))&&K.apply(T,p),(K=z&&T[z])&&K.apply&&ur(T)&&(d.result=K.apply(T,p),!1===d.result&&d.preventDefault());return d.type=ot,w||d.isDefaultPrevented()||Z._default&&!1!==Z._default.apply(Y.pop(),p)||!ur(y)||z&&Lt(y[ot])&&!it(y)&&((R=y[z])&&(y[z]=null),x.event.triggered=ot,d.isPropagationStopped()&&st.addEventListener(ot,cc),y[ot](),d.isPropagationStopped()&&st.removeEventListener(ot,cc),x.event.triggered=void 0,R&&(y[z]=R)),d.result}},simulate:function(d,p,y){var w=x.extend(new x.Event,y,{type:d,isSimulated:!0});x.event.trigger(w,null,p)}}),x.fn.extend({trigger:function(d,p){return this.each(function(){x.event.trigger(d,p,this)})},triggerHandler:function(d,p){var y=this[0];if(y)return x.event.trigger(d,p,y,!0)}});var dc=/\[\]$/,Oi=/\r?\n/g,lt=/^(?:submit|button|image|reset|file)$/i,us=/^(?:input|select|textarea|keygen)/i;function La(d,p,y,w){var _;if(Array.isArray(p))x.each(p,function(T,R){y||dc.test(d)?w(d,R):La(d+"["+("object"==typeof R&&null!=R?T:"")+"]",R,y,w)});else if(y||"object"!==Se(p))w(d,p);else for(_ in p)La(d+"["+_+"]",p[_],y,w)}x.param=function(d,p){var y,w=[],_=function(T,R){var U=Lt(R)?R():R;w[w.length]=encodeURIComponent(T)+"="+encodeURIComponent(U??"")};if(null==d)return"";if(Array.isArray(d)||d.jquery&&!x.isPlainObject(d))x.each(d,function(){_(this.name,this.value)});else for(y in d)La(y,d[y],p,_);return w.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=x.prop(this,"elements");return d?x.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!x(this).is(":disabled")&&us.test(this.nodeName)&&!lt.test(d)&&(this.checked||!Wo.test(d))}).map(function(d,p){var y=x(this).val();return null==y?null:Array.isArray(y)?x.map(y,function(w){return{name:p.name,value:w.replace(Oi,"\r\n")}}):{name:p.name,value:y.replace(Oi,"\r\n")}}).get()}});var xn=/%20/g,fs=/#.*$/,lu=/([?&])_=[^&]*/,uc=/^(.*?):[ \t]*([^\r\n]*)$/gm,cu=/^(?:GET|HEAD)$/,du=/^\/\//,pe={},Ma={},$s="*/".concat("*"),ms=Zt.createElement("a");function $n(d){return function(p,y){"string"!=typeof p&&(y=p,p="*");var w,_=0,T=p.toLowerCase().match(ee)||[];if(Lt(y))for(;w=T[_++];)"+"===w[0]?(w=w.slice(1)||"*",(d[w]=d[w]||[]).unshift(y)):(d[w]=d[w]||[]).push(y)}}function tr(d,p,y,w){var _={},T=d===Ma;function R(U){var z;return _[U]=!0,x.each(d[U]||[],function(K,Z){var st=Z(p,y,w);return"string"!=typeof st||T||_[st]?T?!(z=st):void 0:(p.dataTypes.unshift(st),R(st),!1)}),z}return R(p.dataTypes[0])||!_["*"]&&R("*")}function Di(d,p){var y,w,_=x.ajaxSettings.flatOptions||{};for(y in p)void 0!==p[y]&&((_[y]?d:w||(w={}))[y]=p[y]);return w&&x.extend(!0,d,w),d}ms.href=Zn.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Zn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Zn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$s,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,p){return p?Di(Di(d,x.ajaxSettings),p):Di(x.ajaxSettings,d)},ajaxPrefilter:$n(pe),ajaxTransport:$n(Ma),ajax:function(d,p){"object"==typeof d&&(p=d,d=void 0);var y,w,_,T,R,U,z,K,Z,st,Y=x.ajaxSetup({},p=p||{}),ot=Y.context||Y,Xt=Y.context&&(ot.nodeType||ot.jquery)?x(ot):x.event,D=x.Deferred(),me=x.Callbacks("once memory"),tn=Y.statusCode||{},Be={},wr={},ue="canceled",ve={readyState:0,getResponseHeader:function(ye){var qe;if(z){if(!T)for(T={};qe=uc.exec(_);)T[qe[1].toLowerCase()+" "]=(T[qe[1].toLowerCase()+" "]||[]).concat(qe[2]);qe=T[ye.toLowerCase()+" "]}return null==qe?null:qe.join(", ")},getAllResponseHeaders:function(){return z?_:null},setRequestHeader:function(ye,qe){return null==z&&(ye=wr[ye.toLowerCase()]=wr[ye.toLowerCase()]||ye,Be[ye]=qe),this},overrideMimeType:function(ye){return null==z&&(Y.mimeType=ye),this},statusCode:function(ye){var qe;if(ye)if(z)ve.always(ye[ve.status]);else for(qe in ye)tn[qe]=[tn[qe],ye[qe]];return this},abort:function(ye){var qe=ye||ue;return y&&y.abort(qe),ko(0,qe),this}};if(D.promise(ve),Y.url=((d||Y.url||Zn.href)+"").replace(du,Zn.protocol+"//"),Y.type=p.method||p.type||Y.method||Y.type,Y.dataTypes=(Y.dataType||"*").toLowerCase().match(ee)||[""],null==Y.crossDomain){U=Zt.createElement("a");try{U.href=Y.url,U.href=U.href,Y.crossDomain=ms.protocol+"//"+ms.host!=U.protocol+"//"+U.host}catch{Y.crossDomain=!0}}if(Y.data&&Y.processData&&"string"!=typeof Y.data&&(Y.data=x.param(Y.data,Y.traditional)),tr(pe,Y,p,ve),z)return ve;for(Z in(K=x.event&&Y.global)&&0==x.active++&&x.event.trigger("ajaxStart"),Y.type=Y.type.toUpperCase(),Y.hasContent=!cu.test(Y.type),w=Y.url.replace(fs,""),Y.hasContent?Y.data&&Y.processData&&0===(Y.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Y.data=Y.data.replace(xn,"+")):(st=Y.url.slice(w.length),Y.data&&(Y.processData||"string"==typeof Y.data)&&(w+=(Ri.test(w)?"&":"?")+Y.data,delete Y.data),!1===Y.cache&&(w=w.replace(lu,"$1"),st=(Ri.test(w)?"&":"?")+"_="+So.guid+++st),Y.url=w+st),Y.ifModified&&(x.lastModified[w]&&ve.setRequestHeader("If-Modified-Since",x.lastModified[w]),x.etag[w]&&ve.setRequestHeader("If-None-Match",x.etag[w])),(Y.data&&Y.hasContent&&!1!==Y.contentType||p.contentType)&&ve.setRequestHeader("Content-Type",Y.contentType),ve.setRequestHeader("Accept",Y.dataTypes[0]&&Y.accepts[Y.dataTypes[0]]?Y.accepts[Y.dataTypes[0]]+("*"!==Y.dataTypes[0]?", "+$s+"; q=0.01":""):Y.accepts["*"]),Y.headers)ve.setRequestHeader(Z,Y.headers[Z]);if(Y.beforeSend&&(!1===Y.beforeSend.call(ot,ve,Y)||z))return ve.abort();if(ue="abort",me.add(Y.complete),ve.done(Y.success),ve.fail(Y.error),y=tr(Ma,Y,p,ve)){if(ve.readyState=1,K&&Xt.trigger("ajaxSend",[ve,Y]),z)return ve;Y.async&&0<Y.timeout&&(R=pt.setTimeout(function(){ve.abort("timeout")},Y.timeout));try{z=!1,y.send(Be,ko)}catch(ye){if(z)throw ye;ko(-1,ye)}}else ko(-1,"No Transport");function ko(ye,qe,Mn,ps){var Sr,Er,ar,io,Yo,Oe=qe;z||(z=!0,R&&pt.clearTimeout(R),y=void 0,_=ps||"",ve.readyState=0<ye?4:0,Sr=200<=ye&&ye<300||304===ye,Mn&&(io=function(Ge,en,kn){for(var Kr,_n,oe,ln,Pe=Ge.contents,Fe=Ge.dataTypes;"*"===Fe[0];)Fe.shift(),void 0===Kr&&(Kr=Ge.mimeType||en.getResponseHeader("Content-Type"));if(Kr)for(_n in Pe)if(Pe[_n]&&Pe[_n].test(Kr)){Fe.unshift(_n);break}if(Fe[0]in kn)oe=Fe[0];else{for(_n in kn){if(!Fe[0]||Ge.converters[_n+" "+Fe[0]]){oe=_n;break}ln||(ln=_n)}oe=oe||ln}if(oe)return oe!==Fe[0]&&Fe.unshift(oe),kn[oe]}(Y,ve,Mn)),!Sr&&-1<x.inArray("script",Y.dataTypes)&&x.inArray("json",Y.dataTypes)<0&&(Y.converters["text script"]=function(){}),io=function(Ge,en,kn,Kr){var _n,oe,ln,Pe,Fe,Xr={},Go=Ge.dataTypes.slice();if(Go[1])for(ln in Ge.converters)Xr[ln.toLowerCase()]=Ge.converters[ln];for(oe=Go.shift();oe;)if(Ge.responseFields[oe]&&(kn[Ge.responseFields[oe]]=en),!Fe&&Kr&&Ge.dataFilter&&(en=Ge.dataFilter(en,Ge.dataType)),Fe=oe,oe=Go.shift())if("*"===oe)oe=Fe;else if("*"!==Fe&&Fe!==oe){if(!(ln=Xr[Fe+" "+oe]||Xr["* "+oe]))for(_n in Xr)if((Pe=_n.split(" "))[1]===oe&&(ln=Xr[Fe+" "+Pe[0]]||Xr["* "+Pe[0]])){!0===ln?ln=Xr[_n]:!0!==Xr[_n]&&(oe=Pe[0],Go.unshift(Pe[1]));break}if(!0!==ln)if(ln&&Ge.throws)en=ln(en);else try{en=ln(en)}catch(Ia){return{state:"parsererror",error:ln?Ia:"No conversion from "+Fe+" to "+oe}}}return{state:"success",data:en}}(Y,io,ve,Sr),Sr?(Y.ifModified&&((Yo=ve.getResponseHeader("Last-Modified"))&&(x.lastModified[w]=Yo),(Yo=ve.getResponseHeader("etag"))&&(x.etag[w]=Yo)),204===ye||"HEAD"===Y.type?Oe="nocontent":304===ye?Oe="notmodified":(Oe=io.state,Er=io.data,Sr=!(ar=io.error))):(ar=Oe,!ye&&Oe||(Oe="error",ye<0&&(ye=0))),ve.status=ye,ve.statusText=(qe||Oe)+"",Sr?D.resolveWith(ot,[Er,Oe,ve]):D.rejectWith(ot,[ve,Oe,ar]),ve.statusCode(tn),tn=void 0,K&&Xt.trigger(Sr?"ajaxSuccess":"ajaxError",[ve,Y,Sr?Er:ar]),me.fireWith(ot,[ve,Oe]),K&&(Xt.trigger("ajaxComplete",[ve,Y]),--x.active||x.event.trigger("ajaxStop")))}return ve},getJSON:function(d,p,y){return x.get(d,p,y,"json")},getScript:function(d,p){return x.get(d,void 0,p,"script")}}),x.each(["get","post"],function(d,p){x[p]=function(y,w,_,T){return Lt(w)&&(T=T||_,_=w,w=void 0),x.ajax(x.extend({url:y,type:p,dataType:T,data:w,success:_},x.isPlainObject(y)&&y))}}),x.ajaxPrefilter(function(d){var p;for(p in d.headers)"content-type"===p.toLowerCase()&&(d.contentType=d.headers[p]||"")}),x._evalUrl=function(d,p,y){return x.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){x.globalEval(w,p,y)}})},x.fn.extend({wrapAll:function(d){var p;return this[0]&&(Lt(d)&&(d=d.call(this[0])),p=x(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&p.insertBefore(this[0]),p.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(d){return Lt(d)?this.each(function(p){x(this).wrapInner(d.call(this,p))}):this.each(function(){var p=x(this),y=p.contents();y.length?y.wrapAll(d):p.append(d)})},wrap:function(d){var p=Lt(d);return this.each(function(y){x(this).wrapAll(p?d.call(this,y):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(d){return!x.expr.pseudos.visible(d)},x.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new pt.XMLHttpRequest}catch{}};var uu={0:200,1223:204},Eo=x.ajaxSettings.xhr();Gt.cors=!!Eo&&"withCredentials"in Eo,Gt.ajax=Eo=!!Eo,x.ajaxTransport(function(d){var p,y;if(Gt.cors||Eo&&!d.crossDomain)return{send:function(w,_){var T,R=d.xhr();if(R.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(T in d.xhrFields)R[T]=d.xhrFields[T];for(T in d.mimeType&&R.overrideMimeType&&R.overrideMimeType(d.mimeType),d.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)R.setRequestHeader(T,w[T]);p=function(U){return function(){p&&(p=y=R.onload=R.onerror=R.onabort=R.ontimeout=R.onreadystatechange=null,"abort"===U?R.abort():"error"===U?"number"!=typeof R.status?_(0,"error"):_(R.status,R.statusText):_(uu[R.status]||R.status,R.statusText,"text"!==(R.responseType||"text")||"string"!=typeof R.responseText?{binary:R.response}:{text:R.responseText},R.getAllResponseHeaders()))}},R.onload=p(),y=R.onerror=R.ontimeout=p("error"),void 0!==R.onabort?R.onabort=y:R.onreadystatechange=function(){4===R.readyState&&pt.setTimeout(function(){p&&y()})},p=p("abort");try{R.send(d.hasContent&&d.data||null)}catch(U){if(p)throw U}},abort:function(){p&&p()}}}),x.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return x.globalEval(d),d}}}),x.ajaxPrefilter("script",function(d){void 0===d.cache&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),x.ajaxTransport("script",function(d){var p,y;if(d.crossDomain||d.scriptAttrs)return{send:function(w,_){p=x("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",y=function(T){p.remove(),y=null,T&&_("error"===T.type?404:200,T.type)}),Zt.head.appendChild(p[0])},abort:function(){y&&y()}}});var Bi,an=[],xr=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=an.pop()||x.expando+"_"+So.guid++;return this[d]=!0,d}}),x.ajaxPrefilter("json jsonp",function(d,p,y){var w,_,T,R=!1!==d.jsonp&&(xr.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&xr.test(d.data)&&"data");if(R||"jsonp"===d.dataTypes[0])return w=d.jsonpCallback=Lt(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,R?d[R]=d[R].replace(xr,"$1"+w):!1!==d.jsonp&&(d.url+=(Ri.test(d.url)?"&":"?")+d.jsonp+"="+w),d.converters["script json"]=function(){return T||x.error(w+" was not called"),T[0]},d.dataTypes[0]="json",_=pt[w],pt[w]=function(){T=arguments},y.always(function(){void 0===_?x(pt).removeProp(w):pt[w]=_,d[w]&&(d.jsonpCallback=p.jsonpCallback,an.push(w)),T&&Lt(_)&&_(T[0]),T=_=void 0}),"script"}),Gt.createHTMLDocument=((Bi=Zt.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Bi.childNodes.length),x.parseHTML=function(d,p,y){return"string"!=typeof d?[]:("boolean"==typeof p&&(y=p,p=!1),p||(Gt.createHTMLDocument?((w=(p=Zt.implementation.createHTMLDocument("")).createElement("base")).href=Zt.location.href,p.head.appendChild(w)):p=Zt),T=!y&&[],(_=k.exec(d))?[p.createElement(_[1])]:(_=Is([d],p,T),T&&T.length&&x(T).remove(),x.merge([],_.childNodes)));var w,_,T},x.fn.load=function(d,p,y){var w,_,T,R=this,U=d.indexOf(" ");return-1<U&&(w=Ln(d.slice(U)),d=d.slice(0,U)),Lt(p)?(y=p,p=void 0):p&&"object"==typeof p&&(_="POST"),0<R.length&&x.ajax({url:d,type:_||"GET",dataType:"html",data:p}).done(function(z){T=arguments,R.html(w?x("<div>").append(x.parseHTML(z)).find(w):z)}).always(y&&function(z,K){R.each(function(){y.apply(this,T||[z.responseText,K,z])})}),this},x.expr.pseudos.animated=function(d){return x.grep(x.timers,function(p){return d===p.elem}).length},x.offset={setOffset:function(d,p,y){var w,_,T,R,U,z,K=x.css(d,"position"),Z=x(d),st={};"static"===K&&(d.style.position="relative"),U=Z.offset(),T=x.css(d,"top"),z=x.css(d,"left"),("absolute"===K||"fixed"===K)&&-1<(T+z).indexOf("auto")?(R=(w=Z.position()).top,_=w.left):(R=parseFloat(T)||0,_=parseFloat(z)||0),Lt(p)&&(p=p.call(d,y,x.extend({},U))),null!=p.top&&(st.top=p.top-U.top+R),null!=p.left&&(st.left=p.left-U.left+_),"using"in p?p.using.call(d,st):Z.css(st)}},x.fn.extend({offset:function(d){if(arguments.length)return void 0===d?this:this.each(function(_){x.offset.setOffset(this,d,_)});var p,y,w=this[0];return w?w.getClientRects().length?{top:(p=w.getBoundingClientRect()).top+(y=w.ownerDocument.defaultView).pageYOffset,left:p.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var d,p,y,w=this[0],_={top:0,left:0};if("fixed"===x.css(w,"position"))p=w.getBoundingClientRect();else{for(p=this.offset(),y=w.ownerDocument,d=w.offsetParent||y.documentElement;d&&(d===y.body||d===y.documentElement)&&"static"===x.css(d,"position");)d=d.parentNode;d&&d!==w&&1===d.nodeType&&((_=x(d).offset()).top+=x.css(d,"borderTopWidth",!0),_.left+=x.css(d,"borderLeftWidth",!0))}return{top:p.top-_.top-x.css(w,"marginTop",!0),left:p.left-_.left-x.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&"static"===x.css(d,"position");)d=d.offsetParent;return d||on})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,p){var y="pageYOffset"===p;x.fn[d]=function(w){return Hr(this,function(_,T,R){var U;if(it(_)?U=_:9===_.nodeType&&(U=_.defaultView),void 0===R)return U?U[p]:_[T];U?U.scrollTo(y?U.pageXOffset:R,y?R:U.pageYOffset):_[T]=R},d,w,arguments.length)}}),x.each(["top","left"],function(d,p){x.cssHooks[p]=cs(Gt.pixelPosition,function(y,w){if(w)return w=Jn(y,p),Fs.test(w)?x(y).position()[p]+"px":w})}),x.each({Height:"height",Width:"width"},function(d,p){x.each({padding:"inner"+d,content:p,"":"outer"+d},function(y,w){x.fn[w]=function(_,T){var R=arguments.length&&(y||"boolean"!=typeof _),U=y||(!0===_||!0===T?"margin":"border");return Hr(this,function(z,K,Z){var st;return it(z)?0===w.indexOf("outer")?z["inner"+d]:z.document.documentElement["client"+d]:9===z.nodeType?(st=z.documentElement,Math.max(z.body["scroll"+d],st["scroll"+d],z.body["offset"+d],st["offset"+d],st["client"+d])):void 0===Z?x.css(z,K,U):x.style(z,K,Z,U)},p,R?_:void 0,R)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,p){x.fn[p]=function(y){return this.on(p,y)}}),x.fn.extend({bind:function(d,p,y){return this.on(d,null,p,y)},unbind:function(d,p){return this.off(d,null,p)},delegate:function(d,p,y,w){return this.on(p,d,y,w)},undelegate:function(d,p,y){return 1===arguments.length?this.off(d,"**"):this.off(p,d||"**",y)},hover:function(d,p){return this.on("mouseenter",d).on("mouseleave",p||d)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,p){x.fn[p]=function(y,w){return 0<arguments.length?this.on(p,null,y,w):this.trigger(p)}});var er=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(d,p){var y,w,_;if("string"==typeof p&&(y=d[p],p=d,d=y),Lt(d))return w=ae.call(arguments,2),(_=function(){return d.apply(p||this,w.concat(ae.call(arguments)))}).guid=d.guid=d.guid||x.guid++,_},x.holdReady=function(d){d?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=St,x.isFunction=Lt,x.isWindow=it,x.camelCase=rn,x.type=Se,x.now=Date.now,x.isNumeric=function(d){var p=x.type(d);return("number"===p||"string"===p)&&!isNaN(d-parseFloat(d))},x.trim=function(d){return null==d?"":(d+"").replace(er,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var ao=pt.jQuery,Ws=pt.$;return x.noConflict=function(d){return pt.$===x&&(pt.$=Ws),d&&pt.jQuery===x&&(pt.jQuery=ao),x},typeof Kt>"u"&&(pt.jQuery=pt.$=x),x}),function(pt){pt.imageArea=function(Kt,Yt){var Rn,nn,Yn,On,qt=Kt.options,ae=Kt.$image,Xe=Kt.$trigger,vr={},yr=!0,kt=!0,Gt=[0,0],Lt=[0,0],it={id:Yt,x:0,y:0,z:0,height:0,width:0},Un=function(){Kt.blurAll(),it.z=100,ft()},Me=function(){return it},Se=function(wt){ae.trigger(wt,[it.id,Kt.areas()])},dt=function(wt){var ne=wt||window.event||{};ne.cancelBubble=!0,ne.returnValue=!1,ne.stopPropagation&&ne.stopPropagation(),ne.preventDefault&&ne.preventDefault()},x=function(wt,ne){var de,At;switch(wt){case"start":de="mousedown",At="touchstart";break;case"move":de="mousemove",At="touchmove";break;case"stop":de="mouseup",At="touchend";break;default:return}ne&&jQuery.isFunction(ne)?pt(window.document).on(de,ne).on(At,ne):pt(window.document).off(de).off(At)},Hn=function(){Rn.css({cursor:"default",width:it.width,height:it.height,left:it.x,top:it.y}),nn.css({backgroundPosition:-it.x-1+"px "+(-it.y-1)+"px",cursor:qt.allowMove?"move":"default",width:it.width-2>0?it.width-2:0,height:it.height-2>0?it.height-2:0,left:it.x+1,top:it.y+1}),Yn.css({width:it.width-2>0?it.width-2:0,left:it.x+2,top:it.y+1})},St=function(wt){qt.allowResize&&(wt?pt.each(vr,function(ne,de){var At,Ne,ee=Math.round(de.width()/2),G=Math.round(de.height()/2),xo=ne[0],Ur=ne[ne.length-1];At="n"===xo?-G:"s"===xo?it.height-G-1:Math.round(it.height/2)-G-1,Ne="e"===Ur?it.width-ee-1:"w"===Ur?-ee:Math.round(it.width/2)-ee-1,de.css({display:"block",left:it.x+Ne,top:it.y+At})}):pt(".select-areas-resize-handler").each(function(){pt(this).css({display:"none"})}))},Dn=function(wt){On&&On.css({display:wt?"block":"none",left:it.x+it.width+1,top:it.y-On.outerHeight()-1})},Ls=function(wt){Rn.css({cursor:wt}),nn.css({cursor:wt})},ft=function(wt){switch(wt){case"startSelection":Kt._refresh(),Hn(),St(),Dn(!0);break;case"pickSelection":case"pickResizeHandler":St();break;case"resizeSelection":Hn(),St(),Ls("crosshair"),Dn(!0);break;case"moveSelection":Hn(),St(),Ls("move"),Dn(!0);break;case"blur":Hn(),St(),Dn();break;default:Hn(),St(!0),Dn(!0)}},no=function(wt){dt(wt),Un(),x("move",dr),x("stop",Gn);var ne=k(wt);Gt[0]=ne[0]-it.x,Gt[1]=ne[1]-it.y,ft("pickSelection")},vt=function(wt){dt(wt),Un();var ne=wt.target.className.split(" ")[1];"w"===ne[ne.length-1]&&(Lt[0]+=it.width,it.x=Lt[0]-it.width),"n"===ne[0]&&(Lt[1]+=it.height,it.y=Lt[1]-it.height),"n"===ne||"s"===ne?yr=!1:("e"===ne||"w"===ne)&&(kt=!1),x("move",vo),x("stop",Gn),ft("pickResizeHandler")},vo=function(wt){dt(wt),Un();var ne=k(wt),de=ne[1]-Lt[1],At=ne[0]-Lt[0];Math.abs(At)<qt.minSize[0]&&(At=At>=0?qt.minSize[0]:-qt.minSize[0]),Math.abs(de)<qt.minSize[1]&&(de=de>=0?qt.minSize[1]:-qt.minSize[1]),(Lt[0]+At<0||Lt[0]+At>ae.width())&&(At=-At),(Lt[1]+de<0||Lt[1]+de>ae.height())&&(de=-de),qt.maxSize[0]>qt.minSize[0]&&qt.maxSize[1]>qt.minSize[1]&&(Math.abs(At)>qt.maxSize[0]&&(At=At>=0?qt.maxSize[0]:-qt.maxSize[0]),Math.abs(de)>qt.maxSize[1]&&(de=de>=0?qt.maxSize[1]:-qt.maxSize[1])),yr&&(it.width=At),kt&&(it.height=de),qt.aspectRatio&&(At>0&&de>0||At<0&&de<0?yr?de=Math.round(At/qt.aspectRatio):At=Math.round(de*qt.aspectRatio):yr?de=-Math.round(At/qt.aspectRatio):At=-Math.round(de*qt.aspectRatio),Lt[0]+At>ae.width()&&(At=ae.width()-Lt[0],de=de>0?Math.round(At/qt.aspectRatio):-Math.round(At/qt.aspectRatio)),Lt[1]+de<0&&(de=-Lt[1],At=At>0?-Math.round(de*qt.aspectRatio):Math.round(de*qt.aspectRatio)),Lt[1]+de>ae.height()&&(de=ae.height()-Lt[1],At=At>0?Math.round(de*qt.aspectRatio):-Math.round(de*qt.aspectRatio)),it.width=At,it.height=de),it.width<0?(it.width=Math.abs(it.width),it.x=Lt[0]-it.width):it.x=Lt[0],it.height<0?(it.height=Math.abs(it.height),it.y=Lt[1]-it.height):it.y=Lt[1],Se("changing"),ft("resizeSelection")},dr=function(wt){if(dt(wt),qt.allowMove){Un();var ne=k(wt);yo({x:ne[0]-Gt[0],y:ne[1]-Gt[1]}),Se("changing")}},yo=function(wt){it.x=wt.x>0?wt.x+it.width<ae.width()?wt.x:ae.width()-it.width:0,it.y=wt.y>0?wt.y+it.height<ae.height()?wt.y:ae.height()-it.height:0,ft("moveSelection")},Gn=function(wt,ne){dt(wt),function(){pt.each(arguments,function(wt,ne){x(ne)})}("move","stop"),ne&&(it.x=ne.x,it.y=ne.y,it.z=ne.z,it.width=ne.width,it.height=ne.height,Hn()),Lt[0]=it.x,Lt[1]=it.y,yr=!0,kt=!0,Se("changed"),ft("releaseSelection")},ke=function(wt){Se("deleted"),dt(wt),nn.remove(),Rn.remove(),Yn.remove(),pt.each(vr,function(ne,de){de.remove()}),On&&On.remove(),Kt._remove(Yt)},k=function(wt){var ne=function(wt){var ne=pt(wt).offset();return[ne.left,ne.top]}(ae);wt.pageX||(wt.originalEvent&&(wt=wt.originalEvent),wt.changedTouches&&(wt=wt.changedTouches[0]),wt.touches&&(wt=wt.touches[0]));var de=wt.pageX-ne[0],At=wt.pageY-ne[1];return[de=de<0?0:de>ae.width()?ae.width():de,At=At<0?0:At>ae.height()?ae.height():At]};if(Rn=pt("<div id='select-areas-outline_"+Me().id+'\'  class="select-areas-outline"/>').css({opacity:qt.outlineOpacity,position:"absolute"}).insertAfter(Xe),nn=pt("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+Me().id).css({position:"absolute"}).insertAfter(Rn),Yn=pt("<div id='select-areas-label-container_"+Me().id+'\'  class="select-areas-label-container"/>').css({position:"absolute"}).insertAfter(Xe),qt.allowResize&&pt.each(["nw","n","ne","e","se","s","sw","w"],function(wt,ne){vr[ne]=pt('<div class="select-areas-resize-handler '+ne+" select-areas-resize-handler_"+Me().id+'"/>').css({opacity:.5,position:"absolute",cursor:ne+"-resize"}).insertAfter(nn).mousedown(vt).bind("touchstart",vt)}),qt.allowDelete){var Co=function(wt){return wt.click(ke).bind("touchstart",ke).bind("tap",ke),wt};On=Co(pt("<div id='select-areas-delete_"+Me().id+'\'  class="delete-area" />')).append(Co(pt('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(nn)}return qt.allowMove&&nn.mousedown(no).bind("touchstart",no),Un(),{getData:Me,startSelection:function(wt){dt(wt),it.width=qt.minSize[0],it.height=qt.minSize[1],Un(),x("move",vo),x("stop",Gn),(Lt=k(wt))[0]+it.width>ae.width()&&(Lt[0]=ae.width()-it.width),Lt[1]+it.height>ae.height()&&(Lt[1]=ae.height()-it.height),it.x=Lt[0],it.y=Lt[1],ft("startSelection")},deleteSelection:ke,options:qt,blur:function(){it.z=0,ft("blur")},focus:Un,nudge:function(wt){wt.x=it.x,wt.y=it.y,wt.d&&(wt.y=it.y+wt.d),wt.u&&(wt.y=it.y-wt.u),wt.l&&(wt.x=it.x-wt.l),wt.r&&(wt.x=it.x+wt.r),yo(wt),Se("changed")},set:function(wt,ne){it=pt.extend(it,wt),Lt[0]=it.x,Lt[1]=it.y,ne||Se("changed")},contains:function(wt){return wt.x>=it.x&&wt.x<=it.x+it.width&&wt.y>=it.y&&wt.y<=it.y+it.height}}},pt.imageSelectAreas=function(){},pt.imageSelectAreas.prototype.init=function(Kt,Yt){var qt=this;this.options=pt.extend({allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null},Yt),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=pt(Kt),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=pt("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=pt('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=pt("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),pt.each(this.options.areas,function(Xe,Rn){qt._add(Rn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(pt.proxy(this.newArea,this)).on("touchstart",pt.proxy(this.newArea,this)),this.options.allowNudge&&pt("html").keydown(function(Xe){var Yn,nn={37:"l",38:"u",39:"r",40:"d"}[Xe.which];if(nn&&(qt._eachArea(function(On){if(100===On.getData().z)return Yn=On,!1}),Yn)){var vr={};vr[nn]=1,Yn.nudge(vr)}})},pt.imageSelectAreas.prototype._refresh=function(){var Kt=this.areas().length;this.$overlay.css({display:Kt?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},pt.imageSelectAreas.prototype._eachArea=function(Kt){pt.each(this._areas,function(Yt,qt){if(qt)return Kt(qt,Yt)})},pt.imageSelectAreas.prototype._remove=function(Kt){delete this._areas[Kt],this._refresh()},pt.imageSelectAreas.prototype.remove=function(Kt){this._areas[Kt]&&this._areas[Kt].deleteSelection()},pt.imageSelectAreas.prototype.newArea=function(Kt){var Yt=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(qt,ae){Yt=Math.max(Yt,parseInt(ae,10))}),this._areas[Yt+=1]=pt.imageArea(this,Yt),Kt&&this._areas[Yt].startSelection(Kt)),Yt},pt.imageSelectAreas.prototype.set=function(Kt,Yt,qt){this._areas[Kt]&&(Yt.id=Kt,this._areas[Kt].set(Yt,qt),this._areas[Kt].focus())},pt.imageSelectAreas.prototype._add=function(Kt,Yt){var qt=this.newArea();this.set(qt,Kt,Yt)},pt.imageSelectAreas.prototype.add=function(Kt){var Yt=this;this.blurAll(),pt.isArray(Kt)?pt.each(Kt,function(qt,ae){Yt._add(ae)}):this._add(Kt),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},pt.imageSelectAreas.prototype.reset=function(){var Kt=this;this._eachArea(function(Yt,qt){Kt.remove(qt)}),this._refresh()},pt.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},pt.imageSelectAreas.prototype.areas=function(){var Kt=[];return this._eachArea(function(Yt){Kt.push(Yt.getData())}),Kt},pt.imageSelectAreas.prototype.relativeAreas=function(){for(var Kt=this.areas(),Yt=[],qt=this.ratio,ae=function(Rn){return Math.floor(Rn/qt)},Xe=0;Xe<Kt.length;Xe++)Yt[Xe]=pt.extend({},Kt[Xe]),Yt[Xe].x=ae(Yt[Xe].x),Yt[Xe].y=ae(Yt[Xe].y),Yt[Xe].width=ae(Yt[Xe].width),Yt[Xe].height=ae(Yt[Xe].height);return Yt},pt.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(Kt){Kt.blur()})},pt.imageSelectAreas.prototype.contains=function(Kt){var Yt=!1;return this._eachArea(function(qt){if(qt.contains(Kt))return Yt=!0,!1}),Yt},pt.selectAreas=function(Kt,Yt){var qt=pt(Kt);if(!qt.data("mainImageSelectAreas")){var ae=new pt.imageSelectAreas;ae.init(Kt,Yt),qt.data("mainImageSelectAreas",ae),qt.trigger("loaded")}return qt.data("mainImageSelectAreas")},pt.fn.selectAreas=function(Kt){if(pt.imageSelectAreas.prototype[Kt]){var Yt=pt.imageSelectAreas.prototype[Kt].apply(pt.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Yt>"u"?this:Yt}if("object"==typeof Kt||!Kt)return this.each(function(){var qt=this,ae=new Image;ae.onload=function(){pt.selectAreas(qt,Kt)},ae.src=qt.src}),this;pt.error("Method "+Kt+" does not exist on jQuery.selectAreas")}}(jQuery);
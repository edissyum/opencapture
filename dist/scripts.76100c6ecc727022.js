!function(){"use strict";var be=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},Xe=function(e){return{eq:e}},Ge=Xe(function(e,t){return e===t}),$e=function(e){return Xe(function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e.eq(t[r],n[r]))return!1;return!0})},it=function(e){return Xe(function(t,n){var l,u,f,o=Object.keys(t),r=Object.keys(n);if(!(l=Ge,u=$e(l),f=function(u){return Array.prototype.slice.call(u).sort(undefined)},Xe(function(p,b){return u.eq(f(p),f(b))})).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!e.eq(t[i],n[i]))return!1}return!0})},Kt=Xe(function(e,t){if(e===t)return!0;var n=be(e);return n===be(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?e===t:"array"===n?$e(Kt).eq(e,t):"object"===n&&it(Kt).eq(e,t))});const Rn=Object.getPrototypeOf,Zt=(e,t,n)=>{var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},Vn=e=>t=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&Zt(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(t)===e,xo=e=>t=>typeof t===e,On=e=>t=>e===t,Eo=(e,t)=>Ve(e)&&Zt(e,t,(n,o)=>Rn(n)===o),Te=Vn("string"),Ve=Vn("object"),Me=e=>Eo(e,Object),ae=Vn("array"),Ze=On(null),xn=xo("boolean"),jt=On(void 0),wt=e=>null==e,ce=e=>!wt(e),bt=xo("function"),w=xo("number"),Bn=(e,t)=>{if(ae(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},ke=()=>{},Dn=(e,t)=>(...n)=>e(t.apply(null,n)),Hs=(e,t)=>n=>e(t(n)),me=e=>()=>e,pt=e=>e,Jo=(e,t)=>e===t;function xe(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const vr=e=>t=>!e(t),po=e=>()=>{throw new Error(e)},yr=e=>e(),Kn=e=>{e()},vt=me(!1),Ut=me(!0);class k{constructor(t,n){this.tag=t,this.value=n}static some(t){return new k(!0,t)}static none(){return k.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?k.some(t(this.value)):k.none()}bind(t){return this.tag?t(this.value):k.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:k.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return ce(t)?k.some(t):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const Cr=Array.prototype.slice,Ne=Array.prototype.indexOf,rt=Array.prototype.push,ut=(e,t)=>Ne.call(e,t),Re=(e,t)=>ut(e,t)>-1,St=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},nt=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=t(e[r],r);return o},J=(e,t)=>{for(let n=0,o=e.length;n<o;n++)t(e[n],n)},wr=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},qo=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];(t(a,r)?n:o).push(a)}return{pass:n,fail:o}},We=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const s=e[o];t(s,o)&&n.push(s)}return n},Vr=(e,t,n)=>(wr(e,(o,r)=>{n=t(n,o,r)}),n),bn=(e,t,n)=>(J(e,(o,r)=>{n=t(n,o,r)}),n),$o=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const s=e[o];if(t(s,o))return k.some(s);if(n(s,o))break}return k.none()},Yt=(e,t)=>$o(e,t,vt),qs=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return k.some(n);return k.none()},nc=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!ae(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);rt.apply(t,e[n])}return t},Gt=(e,t)=>nc(nt(e,t)),ro=(e,t)=>{for(let n=0,o=e.length;n<o;++n)if(!0!==t(e[n],n))return!1;return!0},er=e=>{const t=Cr.call(e,0);return t.reverse(),t},et=(e,t)=>We(e,n=>!Re(t,n)),Pn=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const s=e[o];n[String(s)]=t(s,o)}return n},Kr=(e,t)=>{const n=Cr.call(e,0);return n.sort(t),n},$s=(e,t)=>t>=0&&t<e.length?k.some(e[t]):k.none(),En=e=>$s(e,0),tr=e=>$s(e,e.length-1),vn=bt(Array.from)?Array.from:e=>Cr.call(e),Xn=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return k.none()},xr=(e,t)=>{const n=[],o=bt(t)?r=>St(n,s=>t(s,r)):r=>Re(n,r);for(let r=0,s=e.length;r<s;r++){const a=e[r];o(a)||n.push(a)}return n},rn=Object.keys,cu=Object.hasOwnProperty,yt=(e,t)=>{const n=rn(e);for(let o=0,r=n.length;o<r;o++){const s=n[o];t(e[s],s)}},ps=(e,t)=>oc(e,(n,o)=>({k:o,v:t(n,o)})),oc=(e,t)=>{const n={};return yt(e,(o,r)=>{const s=t(o,r);n[s.k]=s.v}),n},Er=e=>(t,n)=>{e[n]=t},Sr=(e,t,n,o)=>{yt(e,(r,s)=>{(t(r,s)?n:o)(r,s)})},kr=(e,t)=>{const n={};return Sr(e,t,Er(n),ke),n},_r=(e,t)=>{const n=[];return yt(e,(o,r)=>{n.push(t(o,r))}),n},Pa=e=>_r(e,pt),Ot=(e,t)=>je(e,t)?k.from(e[t]):k.none(),je=(e,t)=>cu.call(e,t),dn=(e,t)=>je(e,t)&&null!=e[t],La=e=>{const t={};return J(e,n=>{t[n]={}}),rn(t)},rc=e=>void 0!==e.length,Ma=Array.isArray,Ws=(e,t,n)=>{if(!e)return!1;if(n=n||e,rc(e)){for(let o=0,r=e.length;o<r;o++)if(!1===t.call(n,e[o],o,e))return!1}else for(const o in e)if(je(e,o)&&!1===t.call(n,e[o],o,e))return!1;return!0},Nr=(e,t)=>{const n=[];return Ws(e,(o,r)=>{n.push(t(o,r,e))}),n},Wo=(e,t)=>{const n=[];return Ws(e,(o,r)=>{t&&!t(o,r,e)||n.push(o)}),n},gs=(e,t,n,o)=>{let r=jt(n)?e[0]:n;for(let s=0;s<e.length;s++)r=t.call(o,r,e[s],s);return r},Vs=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},Xr=e=>e[e.length-1],Vo=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},sc=()=>Ia(0,0),Ia=(e,t)=>({major:e,minor:t}),Ks={nu:Ia,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?sc():((o,r)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const u=i[c];if(u.test(l))return u}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return Ia(a(1),a(2))})(e,n)},unknown:sc},ac=(e,t)=>{const n=String(t).toLowerCase();return Yt(e,o=>o.search(n))},Ai=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Yr=(e,t)=>Vt(e,t)?e.substring(t.length):e,un=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!jt(o)||r+t.length<=o)},Vt=(e,t)=>Ai(e,t,0),Xs=(e,t)=>Ai(e,t,e.length-t.length),hs=e=>t=>t.replace(e,""),Gr=hs(/^\s+|\s+$/g),du=hs(/^\s+/g),bs=hs(/\s+$/g),So=e=>e.length>0,vs=e=>!So(e),Ys=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?k.none():k.some(n)},Fa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ko=e=>t=>un(t,e),uu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>un(e,"edge/")&&un(e,"chrome")&&un(e,"safari")&&un(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fa],search:e=>un(e,"chrome")&&!un(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>un(e,"msie")||un(e,"trident")},{name:"Opera",versionRegexes:[Fa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ko("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ko("firefox")},{name:"Safari",versionRegexes:[Fa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(un(e,"safari")||un(e,"mobile/"))&&un(e,"applewebkit")}],fu=[{name:"Windows",search:ko("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>un(e,"iphone")||un(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ko("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ko("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ko("linux"),versionRegexes:[]},{name:"Solaris",search:ko("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ko("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ko("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ti={browsers:me(uu),oses:me(fu)},ja="Chromium",go="Firefox",Gs=e=>{const t=e.current,o=r=>()=>t===r;return{current:t,version:e.version,isEdge:o("Edge"),isChromium:o(ja),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(go),isSafari:o("Safari")}},ys=()=>Gs({current:void 0,version:Ks.unknown()}),ic=Gs,lc=(me("Edge"),me(ja),me("IE"),me("Opera"),me(go),me("Safari"),"Windows"),cc="Android",Qs="Solaris",Di="FreeBSD",ho="ChromeOS",Pi=e=>{const t=e.current,o=r=>()=>t===r;return{current:t,version:e.version,isWindows:o(lc),isiOS:o("iOS"),isAndroid:o(cc),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(Qs),isFreeBSD:o(Di),isChromeOS:o(ho)}},Zs=()=>Pi({current:void 0,version:Ks.unknown()}),mu=Pi,pu=(me(lc),me("iOS"),me(cc),me("Linux"),me("macOS"),me(Qs),me(Di),me(ho),e=>window.matchMedia(e).matches);let Zr=Vo(()=>((e,t,n)=>{const o=Ti.browsers(),r=Ti.oses(),s=t.bind(l=>{return c=o,Xn(l.brands,f=>{const p=f.brand.toLowerCase();return Yt(c,b=>{var g;return p===(null===(g=b.brand)||void 0===g?void 0:g.toLowerCase())}).map(b=>({current:b.name,version:Ks.nu(parseInt(f.version,10),0)}))});var c}).orThunk(()=>{return ac(o,c=e).map(u=>{const f=Ks.detect(u.versionRegexes,c);return{current:u.name,version:f}});var c}).fold(ys,ic),a=(l=r,c=e,ac(l,c).map(u=>{const f=Ks.detect(u.versionRegexes,c);return{current:u.name,version:f}})).fold(Zs,mu),i=((l,c,u,f)=>{const p=l.isiOS()&&!0===/ipad/i.test(u),b=l.isiOS()&&!p,g=l.isiOS()||l.isAndroid(),v=g||f("(pointer:coarse)"),h=p||!b&&g&&f("(min-device-width:768px)"),y=b||g&&!h,E=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(u),S=!y&&!h&&!E;return{isiPad:me(p),isiPhone:me(b),isTablet:me(h),isPhone:me(y),isTouch:me(v),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:me(E),isDesktop:me(S)}})(a,s,e,n);var l,c;return{browser:s,os:a,deviceType:i}})(window.navigator.userAgent,k.from(window.navigator.userAgentData),pu));const Ln=()=>Zr(),Li=window.navigator.userAgent,Mi=Ln(),Yn=Mi.browser,_o=Mi.os,nr=Mi.deviceType,dc=-1!==Li.indexOf("Windows Phone"),gt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Yn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Yn.isIE(),windowsPhone:dc,browser:{current:Yn.current,version:Yn.version,isChromium:Yn.isChromium,isEdge:Yn.isEdge,isFirefox:Yn.isFirefox,isIE:Yn.isIE,isOpera:Yn.isOpera,isSafari:Yn.isSafari},os:{current:_o.current,version:_o.version,isAndroid:_o.isAndroid,isChromeOS:_o.isChromeOS,isFreeBSD:_o.isFreeBSD,isiOS:_o.isiOS,isLinux:_o.isLinux,isMacOS:_o.isMacOS,isSolaris:_o.isSolaris,isWindows:_o.isWindows},deviceType:{isDesktop:nr.isDesktop,isiPad:nr.isiPad,isiPhone:nr.isiPhone,isPhone:nr.isPhone,isTablet:nr.isTablet,isTouch:nr.isTouch,isWebView:nr.isWebView}},gu=/^\s*|\s*$/g,Ii=e=>wt(e)?"":(""+e).replace(gu,""),uc=function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),Ws(e,(r,s)=>!1!==t.call(o,r,s,n)&&(uc(r,t,n,o),!0)))},le={trim:Ii,isArray:Ma,is:(e,t)=>t?!("array"!==t||!Ma(e))||typeof e===t:void 0!==e,toArray:e=>{if(Ma(e))return e;{const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const o=Te(e)?e.split(t||","):e||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:Ws,map:Nr,grep:Wo,inArray:(e,t)=>{if(e)for(let n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},hasOwn:je,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const o=t[n];for(const r in o)if(je(o,r)){const s=o[r];void 0!==s&&(e[r]=s)}}return e},walk:uc,resolve:(e,t=window)=>{const n=e.split(".");for(let o=0,r=n.length;o<r&&(t=t[n[o]]);o++);return t},explode:(e,t)=>ae(e)?e:""===e?[]:Nr(e.split(t||","),Ii),_addCacheSuffix:e=>{const t=gt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Ar=(e,t,n=Jo)=>e.exists(o=>n(o,t)),fc=(e,t,n=Jo)=>yn(e,t,n).getOr(e.isNone()&&t.isNone()),yn=(e,t,n)=>e.isSome()&&t.isSome()?k.some(n(e.getOrDie(),t.getOrDie())):k.none(),Cs=(e,t)=>e?k.some(t):k.none(),hu=typeof window<"u"?window:Function("return this;")(),mc=(e,t)=>((n,o)=>{let r=o??hu;for(let s=0;s<n.length&&null!=r;++s)r=r[n[s]];return r})(e.split("."),t),bu=Object.getPrototypeOf,mt=e=>e.dom.nodeName.toLowerCase(),Fi=e=>e.dom.nodeType,ws=e=>t=>Fi(t)===e,Js=e=>Un(e)&&(e=>{const t=mc("ownerDocument.defaultView",e);return Ve(e)&&((n=t,((o,r)=>{const s=mc(o,r);if(null==s)throw new Error(o+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(bu(e).constructor.name));var n})(e.dom),Un=ws(1),Cn=ws(3),vu=ws(9),ea=ws(11),ta=e=>t=>Un(t)&&mt(t)===e,ji=(e,t,n)=>{if(!(Te(n)||xn(n)||w(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Jt=(e,t,n)=>{ji(e.dom,t,n)},or=(e,t)=>{const n=e.dom;yt(t,(o,r)=>{ji(n,r,o)})},Gn=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},rr=(e,t)=>k.from(Gn(e,t)),d=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},m=(e,t)=>{e.dom.removeAttribute(t)},C=e=>bn(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),x=(e,t)=>{const n=Gn(e,t);return void 0===n||""===n?[]:n.split(" ")},_=e=>void 0!==e.dom.classList,T=e=>x(e,"class"),O=(e,t)=>((n,o,r)=>{const s=x(n,o).concat([r]);return Jt(n,o,s.join(" ")),!0})(e,"class",t),q=(e,t)=>((n,o,r)=>{const s=We(x(n,o),a=>a!==r);return s.length>0?Jt(n,o,s.join(" ")):m(n,o),!1})(e,"class",t),H=(e,t)=>{_(e)?e.dom.classList.add(t):O(e,t)},K=e=>{0===(_(e)?e.dom.classList:T(e)).length&&m(e,"class")},ee=(e,t)=>{_(e)?e.dom.classList.remove(t):q(e,t),K(e)},ie=(e,t)=>_(e)&&e.dom.classList.contains(t),Z=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},ue=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Z(n.childNodes[0])},Pe=(e,t)=>{const n=(t||document).createElement(e);return Z(n)},lt=(e,t)=>{const n=(t||document).createTextNode(e);return Z(n)},B=Z,fn=(e,t)=>{const n=[],o=s=>(n.push(s),t(s));let r=t(e);do{r=r.bind(o)}while(r.isSome());return n},sn=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},No=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Fe=(e,t)=>e.dom===t.dom,Sn=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},kt=e=>B(e.dom.ownerDocument),It=e=>vu(e)?e:kt(e),sr=e=>B(It(e).dom.defaultView),so=e=>k.from(e.dom.parentNode).map(B),ao=e=>k.from(e.dom.parentElement).map(B),xs=(e,t)=>{const n=bt(t)?t:vt;let o=e.dom;const r=[];for(;null!=o.parentNode;){const s=o.parentNode,a=B(s);if(r.push(a),!0===n(a))break;o=s}return r},Mn=e=>k.from(e.dom.previousSibling).map(B),bo=e=>k.from(e.dom.nextSibling).map(B),Jr=e=>er(fn(e,Mn)),io=e=>fn(e,bo),xt=e=>nt(e.dom.childNodes,B),qt=(e,t)=>k.from(e.dom.childNodes[t]).map(B),kn=e=>qt(e,0),Ko=e=>qt(e,e.dom.childNodes.length-1),_n=e=>e.dom.childNodes.length,st=e=>ea(e)&&ce(e.dom.host),zt=e=>B(e.dom.getRootNode()),Xt=e=>st(e)?e:(t=>{const n=t.dom.head;if(null==n)throw new Error("Head is not available yet");return B(n)})(It(e)),$t=e=>B(e.dom.host),Ao=e=>{if(ce(e.target)){const t=B(e.target);if(Un(t)&&Es(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return En(n)}}return k.from(e.target)},Es=e=>ce(e.dom.shadowRoot),ar=e=>{const t=Cn(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(o=>{const r=zt(o);return st(r)?k.some(r):k.none()})(B(t)).fold(()=>n.body.contains(t),Hs(ar,$t))};var Tr=(e,t,n,o,r)=>e(n,o)?k.some(n):bt(r)&&r(n)?k.none():t(n,o,r);const To=(e,t,n)=>{let o=e.dom;const r=bt(n)?n:vt;for(;o.parentNode;){o=o.parentNode;const s=B(o);if(t(s))return k.some(s);if(r(s))break}return k.none()},Qn=(e,t,n)=>Tr((o,r)=>r(o),To,e,t,n),Ua=(e,t)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const s=B(o.childNodes[r]);if(t(s))return k.some(s);const a=n(o.childNodes[r]);if(a.isSome())return a}return k.none()};return n(e.dom)},ir=(e,t,n)=>To(e,o=>sn(o,t),n),es=(e,t)=>((n,o)=>{const r=void 0===o?document:o.dom;return No(r)?k.none():k.from(r.querySelector(n)).map(B)})(t,e),lr=(e,t,n)=>Tr((o,r)=>sn(o,r),ir,e,t,n),cr=(e,t=!1)=>{return ar(e)?e.dom.isContentEditable:(n=e,lr(n,"[contenteditable]")).fold(me(t),o=>"true"===Ha(o));var n},Ha=e=>e.dom.contentEditable,ts=e=>void 0!==e.style&&bt(e.style.getPropertyValue),qa=(e,t,n)=>{if(!Te(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ts(e)&&e.style.setProperty(t,n)},$a=(e,t,n)=>{qa(e.dom,t,n)},na=(e,t)=>{const n=e.dom;yt(t,(o,r)=>{qa(n,r,o)})},L=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||ar(e)?o:V(n,t)},V=(e,t)=>ts(e)?e.style.getPropertyValue(t):"",te=(e,t)=>{const o=V(e.dom,t);return k.from(o).filter(r=>r.length>0)},ne=e=>{const t={},n=e.dom;if(ts(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);t[r]=n.style[r]}return t},fe=(e,t)=>{var n,o;o=t,ts(n=e.dom)&&n.style.removeProperty(o),Ar(rr(e,"style").map(Gr),"")&&m(e,"style")},Oe=(e,t)=>{so(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},Ie=(e,t)=>{bo(e).fold(()=>{so(e).each(n=>{Ee(n,t)})},n=>{Oe(n,t)})},Qe=(e,t)=>{kn(e).fold(()=>{Ee(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},Ee=(e,t)=>{e.dom.appendChild(t.dom)},At=(e,t)=>{Oe(e,t),Ee(t,e)},ct=(e,t)=>{J(t,n=>{Ee(e,n)})},ft=e=>{e.dom.textContent="",J(xt(e),t=>{Ye(t)})},Ye=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},at=e=>{const t=xt(e);var n,o;t.length>0&&(n=e,J(o=t,(r,s)=>{Ie(0===s?n:o[s-1],r)})),Ye(e)},tn=e=>nt(e,B),Nn=e=>e.dom.innerHTML,nn=(e,t)=>{const n=kt(e).dom,o=B(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,xt(B(i))})(t,n);ct(o,r),ft(e),Ee(e,o)},lo=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},vo=(e,t)=>({left:e,top:t,translate:(n,o)=>vo(e+n,t+o)}),Dt=vo,Xo=(e,t)=>void 0!==e?e:void 0!==t?t:0,co=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?Dt(n.offsetLeft,n.offsetTop):ar(e)?(o=>{const r=o.getBoundingClientRect();return Dt(r.left,r.top)})(t):Dt(0,0)},Ss=e=>{const t=void 0!==e?e.dom:document;return Dt(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},zi=(e,t,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Ui=(e,t)=>{Ln().browser.isSafari()&&bt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},gc=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),_g=e=>{const t=void 0===e?window:e,o=Ss(B(t.document));return(r=>{const s=void 0===r?window:r;return Ln().browser.isFirefox()?k.none():k.from(s.visualViewport)})(t).fold(()=>{const r=t.document.documentElement;return gc(o.left,o.top,r.clientWidth,r.clientHeight)},r=>gc(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},Ng=(e,t)=>{let n=[];return J(xt(e),o=>{t(o)&&(n=n.concat([o])),n=n.concat(Ng(o,t))}),n},Jn=(e,t)=>((n,o)=>{const r=void 0===o?document:o.dom;return No(r)?[]:nt(r.querySelectorAll(n),B)})(t,e),Ag=(e,t,n)=>To(e,t,n).isSome(),Tg=(e,t)=>Ua(e,t).isSome();class mn{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,o,r){if(t){if(!r&&t[n])return t[n];if(t!==this.rootNode){let s=t[o];if(s)return s;for(let a=t.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(t,n){if(t){const o=t.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return o}const r=t.parentNode;if(r&&r!==this.rootNode)return r}}}const an="\xa0",yu=e=>"\ufeff"===e,YS=/^[ \t\r\n]*$/,Wa=e=>YS.test(e),Rg=e=>"\n"===e||"\r"===e,Og=(e,t=4,n=!0,o=!0)=>{const r=(l=t)<=0?"":new Array(l+1).join(" "),s=e.replace(/\t/g,r);var l;return bn(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===an?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&o||(u=i.str.length+1)<(c=s).length&&u>=0&&Rg(c[u])?{pcIsSpace:!1,str:i.str+an}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Rg(l),str:i.str+l};var c,u},{pcIsSpace:!1,str:""}).str},oa=e=>t=>!!t&&t.nodeType===e,hc=e=>!!e&&!Object.getPrototypeOf(e),_e=oa(1),ns=e=>_e(e)&&Js(B(e)),qi=e=>{const t=e.toLowerCase();return n=>ce(n)&&n.nodeName.toLowerCase()===t},dr=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Re(t,o)}return!1}},bc=(e,t)=>{const n=t.toLowerCase().split(" ");return o=>{if(_e(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(e):null)===n[s])return!0}}return!1}},ra=e=>_e(e)&&e.hasAttribute("data-mce-bogus"),Rr=e=>_e(e)&&"TABLE"===e.tagName,Bg=e=>t=>!(!ns(t)||t.contentEditable!==e&&t.getAttribute("data-mce-contenteditable")!==e),Cu=dr(["textarea","input"]),se=oa(3),GS=oa(4),QS=oa(7),ks=oa(8),$i=oa(9),wu=oa(11),Ht=qi("br"),Dg=qi("img"),Yo=Bg("true"),Pt=Bg("false"),vc=dr(["td","th"]),ZS=dr(["td","th","caption"]),Or=dr(["video","audio","object","embed"]),JS=qi("li"),xu=qi("details"),ek=qi("summary"),Pg={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Eu=(e,t,n,o)=>{return bt(o.isContent)&&o.isContent(t)||(s=e,_e(r=t)&&je(s.getNonEmptyElements(),r.nodeName))||(e=>_e(e)&&e.hasAttribute("data-mce-bookmark"))(t)||(r=>_e(r)&&"A"===r.nodeName&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id")))(t)||((e,t,n,o)=>{return se(e)&&(s=t,a=n,!(Wa((r=e).data)&&!((i,l,c)=>{const u=B(l),f=B(i),p=c.getWhitespaceElements();return Ag(f,b=>je(p,mt(b)),xe(Fe,u))})(r,s,a)))&&(!o.includeZwsp||!(r=>{for(const s of r)if(!yu(s))return!1;return!0})(e.data));var r,s,a})(t,n,e,o)||Pt(t)||Yo(t)&&(r=>ao(B(r)).exists(s=>!cr(s)))(t);var r,s},os=(e,t,n)=>{const o={...Pg,...n};if(o.checkRootAsContent&&Eu(e,t,t,o))return!1;let r=t.firstChild,s=0;if(!r)return!0;const a=new mn(r,t);do{if(o.skipBogus&&_e(r)){const i=r.getAttribute("data-mce-bogus");if(i){r=a.next("all"===i);continue}}if(ks(r))r=a.next(!0);else if(Ht(r))s++,r=a.next();else{if(Eu(e,r,t,o))return!1;r=a.next()}}while(r);return s<=1},In=(e,t,n)=>os(e,t.dom,{checkRootAsContent:!0,...n}),Lg=(e,t,n)=>Eu(e,t,t,{includeZwsp:Pg.includeZwsp,...n}),pn=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},ok=e=>{const t=pn(k.none()),n=()=>t.get().each(o=>clearInterval(o));return{clear:()=>{n(),t.set(k.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:o=>{n(),t.set(k.some(setInterval(o,e)))}}},rs=()=>{const e=(t=>{const n=pn(k.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(k.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(k.some(r))}}})(ke);return{...e,on:t=>e.get().each(t)}},Mg=e=>{const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":"html"},sa=e=>"html"!==Mg(e),Su=e=>sa(e.nodeName),Ig=e=>Mg(e.nodeName),rk=["svg","math"],yc="data-mce-block",ku=e=>{return nt((t=e,We(rn(t),n=>!/[A-Z]/.test(n))),t=>{const n=CSS.escape(t);return`${n}:`+nt(rk,o=>`not(${o} ${n})`).join(":")}).join(",");var t},Fg=(e,t)=>ce(t.querySelector(e))?(t.setAttribute(yc,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(yc),!1),jg=(e,t)=>{const n=ku(e.getTransparentElements()),o=ku(e.getBlockElements());return We(t.querySelectorAll(n),r=>Fg(o,r))},zg=(e,t,n)=>{var o;const r=n?"lastChild":"firstChild";for(let s=t[r];s;s=s[r])if(os(e,s,{checkRootAsContent:!0}))return void(null===(o=s.parentNode)||void 0===o||o.removeChild(s))},_u=(e,t)=>{const n=jg(e,t);var o,r,s;((e,t,n)=>{const o=e.getBlockElements(),r=B(t),s=i=>mt(i)in o,a=i=>Fe(i,r);J(tn(n),i=>{To(i,s,a).each(l=>{const c=We(xt(i),p=>s(p)&&!e.isValidChild(mt(l),mt(p)));if(c.length>0){const u=ao(l);J(c,f=>{To(f,s,a).each(p=>{((b,g,v)=>{const h=document.createRange(),y=g.parentNode;if(y){h.setStartBefore(g),h.setEndBefore(v);const E=h.extractContents();zg(b,E,!0),h.setStartAfter(v),h.setEndAfter(g);const S=h.extractContents();zg(b,S,!1),os(b,E,{checkRootAsContent:!0})||y.insertBefore(E,g),os(b,v,{checkRootAsContent:!0})||y.insertBefore(v,g),os(b,S,{checkRootAsContent:!0})||y.insertBefore(S,g),y.removeChild(g)}})(e,p.dom,f.dom)})}),u.each(f=>jg(e,f.dom))}})})})(e,t,n),o=e,r=t,s=n,J([...s,...aa(o,r)?[r]:[]],a=>J(Jn(B(a),a.nodeName.toLowerCase()),i=>{ik(o,i.dom)&&at(i)}))},ak=(e,t)=>{if(Tu(e,t)){const n=ku(e.getBlockElements());Fg(n,t)}},Nu=e=>e.hasAttribute(yc),Au=(e,t)=>je(e.getTransparentElements(),t),Tu=(e,t)=>_e(t)&&Au(e,t.nodeName),aa=(e,t)=>Tu(e,t)&&Nu(t),ik=(e,t)=>Tu(e,t)&&!Nu(t),Ru=(e,t)=>1===t.type&&Au(e,t.name)&&Te(t.attr(yc)),lk=Ln().browser,Ug=e=>Yt(e,Un),Hg=(e,t)=>e.children&&Re(e.children,t),qg=(e,t={})=>{let n=0;const o={},r=B(e),s=It(r),a=f=>{Ee(Xt(r),f)},i=f=>{const p=Xt(r);es(p,"#"+f).each(Ye)},l=f=>Ot(o,f).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=f=>new Promise((p,b)=>{let g;const v=le._addCacheSuffix(f),h=l(v);o[v]=h,h.count++;const y=(N,R)=>{J(N,Kn),h.status=R,h.passed=[],h.failed=[],g&&(g.onload=null,g.onerror=null,g=null)},E=()=>y(h.passed,2),S=()=>y(h.failed,3);if(p&&h.passed.push(p),b&&h.failed.push(b),1===h.status)return;if(2===h.status)return void E();if(3===h.status)return void S();h.status=1;const A=Pe("link",s.dom);or(A,{rel:"stylesheet",type:"text/css",id:h.id}),t.contentCssCors&&Jt(A,"crossOrigin","anonymous"),t.referrerPolicy&&Jt(A,"referrerpolicy",t.referrerPolicy),g=A.dom,g.onload=E,g.onerror=S,a(A),Jt(A,"href",v)}),u=f=>{const p=le._addCacheSuffix(f);Ot(o,p).each(b=>{0==--b.count&&(delete o[p],i(b.id))})};return{load:c,loadRawCss:(f,p)=>{const b=l(f);o[f]=b,b.count++;const g=Pe("style",s.dom);or(g,{rel:"stylesheet",type:"text/css",id:b.id}),g.dom.innerHTML=p,a(g)},loadAll:f=>Promise.allSettled(nt(f,p=>c(p).then(me(p)))).then(p=>{const b=qo(p,g=>"fulfilled"===g.status);return b.fail.length>0?Promise.reject(nt(b.fail,g=>g.reason)):nt(b.pass,g=>g.value)}),unload:u,unloadRawCss:f=>{Ot(o,f).each(p=>{0==--p.count&&(delete o[f],i(p.id))})},unloadAll:f=>{J(f,p=>{u(p)})},_setReferrerPolicy:f=>{t.referrerPolicy=f},_setContentCssCors:f=>{t.contentCssCors=f}}},$g=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const o=zt(t).dom;return k.from(e.get(o)).getOrThunk(()=>{const r=qg(o,n);return e.set(o,r),r})}}})(),Wg=(e,t)=>ce(e)&&(Lg(t,e)||t.isInline(e.nodeName.toLowerCase())),Vg=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),Ou=(e,t,n,o)=>{var r;const s=o||t;if(_e(t)&&Vg(t))return t;const a=t.childNodes;for(let i=a.length-1;i>=0;i--)Ou(e,a[i],n,s);if(_e(t)){const i=t.childNodes;1===i.length&&Vg(i[0])&&(null===(r=t.parentNode)||void 0===r||r.insertBefore(i[0],t))}return wu(i=t)||$i(i)||Lg(n,t)||(i=>!!_e(i)&&i.childNodes.length>0)(t)||((i,l,c)=>se(i)&&i.data.length>0&&((u,f,p)=>{const b=new mn(u,f).prev(!1),g=new mn(u,f).next(!1),v=jt(b)||Wg(b,p),h=jt(g)||Wg(g,p);return v&&h})(i,l,c))(t,s,n)||e.remove(t),t;var i},ck=le.makeMap,Cc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dk=/[<>&\"\']/g,uk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,fk={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},ia={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},mk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Kg=(e,t)=>{const n={};if(e){const o=e.split(",");t=t||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],t));if(!ia[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},Bu=Kg("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Xg=(e,t)=>e.replace(t?Cc:wc,n=>ia[n]||n),Yg=(e,t)=>e.replace(t?Cc:wc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":ia[n]||"&#"+n.charCodeAt(0)+";"),Du=(e,t,n)=>{const o=n||Bu;return e.replace(t?Cc:wc,r=>ia[r]||o[r]||r)},la={encodeRaw:Xg,encodeAllRaw:e=>(""+e).replace(dk,t=>ia[t]||t),encodeNumeric:Yg,encodeNamed:Du,getEncodeFunc:(e,t)=>{const n=Kg(t)||Bu,o=ck(e.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?Cc:wc,a=>void 0!==ia[a]?ia[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):o.named?t?(r,s)=>Du(r,s,n):Du:o.numeric?Yg:Xg},decode:e=>e.replace(uk,(t,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):fk[n]||String.fromCharCode(n):mk[t]||Bu[t]||(o=>{const r=Pe("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(t))},An=(e,t)=>(e=le.trim(e))?e.split(t||" "):[],Gg=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Qg=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==e?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==e?["xml:lang"]:[]]),Zg=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==e&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const o=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:o}},Pu=e=>{const{blockContent:t,phrasingContent:n,flowContent:o}=Zg(e),r=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:r(t),phrasingContent:r(n),flowContent:r(o)})},pk={html4:Vo(()=>Pu("html4")),html5:Vo(()=>Pu("html5")),"html5-strict":Vo(()=>Pu("html5-strict"))},Jg=(e,t)=>{const{blockContent:n,phrasingContent:o,flowContent:r}=pk[e]();return"blocks"===t?k.some(n):"phrasing"===t?k.some(o):"flow"===t?k.some(r):k.none()},Lu=e=>k.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map(t=>({preset:"@"===t[1],name:t[2]})),xc={},Wi=le.makeMap,ur=le.each,eh=le.extend,th=le.explode,nh=(e,t={})=>{const n=Wi(e," ",Wi(e.toUpperCase()," "));return eh(n,t)},oh=e=>nh("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Mu=(e,t)=>{if(e){const n={};return Te(e)&&(e={"*":e}),ur(e,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===t?Wi(o,/[, ]/):th(o,/[, ]/)}),n}},_s=(e={})=>{var t;const n={},o={};let r=[];const s={},a={},i=(ve,tt,dt)=>{const Ke=e[ve];if(Ke)return Wi(Ke,/[, ]/,Wi(Ke.toUpperCase(),/[, ]/));{let ht=xc[ve];return ht||(ht=nh(tt,dt),xc[ve]=ht),ht}},l=null!==(t=e.schema)&&void 0!==t?t:"html5",c=(ve=>{const tt=Qg(ve),{phrasingContent:dt,flowContent:Ke}=Zg(ve),ht={},Tt=(_t,Nt,Wt)=>{ht[_t]={attributes:Pn(Nt,me({})),attributesOrder:Nt,children:Pn(Wt,me({}))}},he=(_t,Nt="",Wt="")=>{const wn=An(Wt),br=An(_t);let zn=br.length;const Uo=[...tt,...An(Nt)];for(;zn--;)Tt(br[zn],Uo.slice(),wn)},Ue=(_t,Nt)=>{const Wt=An(_t),wn=An(Nt);let br=Wt.length;for(;br--;){const zn=ht[Wt[br]];for(let Uo=0,cn=wn.length;Uo<cn;Uo++)zn.attributes[wn[Uo]]={},zn.attributesOrder.push(wn[Uo])}};return"html5-strict"!==ve&&(J(An("acronym applet basefont big font strike tt"),_t=>{he(_t,"",dt)}),J(An("center dir isindex noframes"),_t=>{he(_t,"",Ke)})),he("html","manifest","head body"),he("head","","base command link meta noscript script style title"),he("title hr noscript br"),he("base","href target"),he("link","href rel media hreflang type sizes hreflang"),he("meta","name http-equiv content charset"),he("style","media type scoped"),he("script","src async defer type charset"),he("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Ke),he("dd div","",Ke),he("address dt caption","","html4"===ve?dt:Ke),he("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",dt),he("blockquote","cite",Ke),he("ol","reversed start type","li"),he("ul","","li"),he("li","value",Ke),he("dl","","dt dd"),he("a","href target rel media hreflang type","html4"===ve?dt:Ke),he("q","cite",dt),he("ins del","cite datetime",Ke),he("img","src sizes srcset alt usemap ismap width height"),he("iframe","src name width height",Ke),he("embed","src type width height"),he("object","data type typemustmatch name usemap form width height",[Ke,"param"].join(" ")),he("param","name value"),he("map","name",[Ke,"area"].join(" ")),he("area","alt coords shape href target rel media hreflang type"),he("table","border","caption colgroup thead tfoot tbody tr"+("html4"===ve?" col":"")),he("colgroup","span","col"),he("col","span"),he("tbody thead tfoot","","tr"),he("tr","","td th"),he("td","colspan rowspan headers",Ke),he("th","colspan rowspan headers scope abbr",Ke),he("form","accept-charset action autocomplete enctype method name novalidate target",Ke),he("fieldset","disabled form name",[Ke,"legend"].join(" ")),he("label","form for",dt),he("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),he("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===ve?Ke:dt),he("select","disabled form multiple name required size","option optgroup"),he("optgroup","disabled label","option"),he("option","disabled label selected value"),he("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),he("menu","type label",[Ke,"li"].join(" ")),he("noscript","",Ke),"html4"!==ve&&(he("wbr"),he("ruby","",[dt,"rt rp"].join(" ")),he("figcaption","",Ke),he("mark rt rp bdi","",dt),he("summary","",[dt,"h1 h2 h3 h4 h5 h6"].join(" ")),he("canvas","width height",Ke),he("data","value",dt),he("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Ke,"track source"].join(" ")),he("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Ke,"track source"].join(" ")),he("picture","","img source"),he("source","src srcset type media sizes"),he("track","kind src srclang label default"),he("datalist","",[dt,"option"].join(" ")),he("article section nav aside main header footer","",Ke),he("hgroup","","h1 h2 h3 h4 h5 h6"),he("figure","",[Ke,"figcaption"].join(" ")),he("time","datetime",dt),he("dialog","open",Ke),he("command","type label icon disabled checked radiogroup command"),he("output","for form name",dt),he("progress","value max",dt),he("meter","value min max low high optimum",dt),he("details","open",[Ke,"summary"].join(" ")),he("keygen","autofocus challenge disabled form keytype name"),Tt("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==ve&&(Ue("script","language xml:space"),Ue("style","xml:space"),Ue("object","declare classid code codebase codetype archive standby align border hspace vspace"),Ue("embed","align name hspace vspace"),Ue("param","valuetype type"),Ue("a","charset name rev shape coords"),Ue("br","clear"),Ue("applet","codebase archive code object alt name width height align hspace vspace"),Ue("img","name longdesc align border hspace vspace"),Ue("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Ue("font basefont","size color face"),Ue("input","usemap align"),Ue("select"),Ue("textarea"),Ue("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Ue("ul","type compact"),Ue("li","type"),Ue("ol dl menu dir","compact"),Ue("pre","width xml:space"),Ue("hr","align noshade size width"),Ue("isindex","prompt"),Ue("table","summary width frame rules cellspacing cellpadding align bgcolor"),Ue("col","width align char charoff valign"),Ue("colgroup","width align char charoff valign"),Ue("thead","align char charoff valign"),Ue("tr","align char charoff valign bgcolor"),Ue("th","axis align char charoff valign nowrap bgcolor width height"),Ue("form","accept"),Ue("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Ue("tfoot","align char charoff valign"),Ue("tbody","align char charoff valign"),Ue("area","nohref"),Ue("body","background bgcolor text link vlink alink")),"html4"!==ve&&(Ue("input button select textarea","autofocus"),Ue("input textarea","placeholder"),Ue("a","download"),Ue("link script img","crossorigin"),Ue("img","loading"),Ue("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),"html4"!==ve&&J([ht.video,ht.audio],_t=>{delete _t.children.audio,delete _t.children.video}),J(An("a form meter progress dfn"),_t=>{ht[_t]&&delete ht[_t].children[_t]}),delete ht.caption.children.table,delete ht.script,ht})(l);!1===e.verify_html&&(e.valid_elements="*[*]");const u=Mu(e.valid_styles),f=Mu(e.invalid_styles,"map"),p=Mu(e.valid_classes,"map"),b=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),y="td th iframe video audio object script code",E=i("non_empty_elements",y+" pre svg textarea summary",v),S=i("move_caret_before_on_enter_elements",y+" table",v),A="h1 h2 h3 h4 h5 h6",N=i("text_block_elements",A+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),R=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",N),M=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),P=i("transparent_elements","a ins del canvas map"),z=i("wrap_block_elements","pre "+A);ur("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ve=>{a[ve]=new RegExp("</"+ve+"[^>]*>","gi")});const W=ve=>{const tt=k.from(n["@"]),dt=/[*?+]/;J(((Ke,ht)=>{const Tt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Gt(An(ht,","),he=>{const Ue=Tt.exec(he);if(Ue){const _t=Ue[1],Nt=Ue[2],Wt=Ue[3],wn=Ue[4],br=Ue[5],zn={attributes:{},attributesOrder:[]};if(Ke.each(Uo=>{return Da=zn,yt((cn=Uo).attributes,(zs,Hr)=>{Da.attributes[Hr]=zs}),void Da.attributesOrder.push(...cn.attributesOrder);var cn,Da}),"#"===_t?zn.paddEmpty=!0:"-"===_t&&(zn.removeEmpty=!0),"!"===wn&&(zn.removeEmptyAttrs=!0),br&&((Uo,cn)=>{const Da=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,zs=/[*?+]/,{attributes:Hr,attributesOrder:Ho}=cn;J(An(Uo,"|"),Us=>{const ds=Da.exec(Us);if(ds){const qr={},lu=ds[1],oo=ds[2].replace(/[\\:]:/g,":"),Ni=ds[3],Qt=ds[4];if("!"===lu&&(cn.attributesRequired=cn.attributesRequired||[],cn.attributesRequired.push(oo),qr.required=!0),"-"===lu)return delete Hr[oo],void Ho.splice(le.inArray(Ho,oo),1);if(Ni&&("="===Ni?(cn.attributesDefault=cn.attributesDefault||[],cn.attributesDefault.push({name:oo,value:Qt}),qr.defaultValue=Qt):"~"===Ni?(cn.attributesForced=cn.attributesForced||[],cn.attributesForced.push({name:oo,value:Qt}),qr.forcedValue=Qt):"<"===Ni&&(qr.validValues=le.makeMap(Qt,"?"))),zs.test(oo)){const us=qr;cn.attributePatterns=cn.attributePatterns||[],us.pattern=Gg(oo),cn.attributePatterns.push(us)}else Hr[oo]||Ho.push(oo),Hr[oo]=qr}})})(br,zn),Wt&&(zn.outputName=Nt),"@"===Nt){if(!Ke.isNone())return[];Ke=k.some(zn)}return[Wt?{name:Nt,element:zn,aliasName:Wt}:{name:Nt,element:zn}]}return[]})})(tt,ve??""),({name:Ke,element:ht,aliasName:Tt})=>{if(Tt&&(n[Tt]=ht),dt.test(Ke)){const he=ht;he.pattern=Gg(Ke),r.push(he)}else n[Ke]=ht})},D=ve=>{r=[],J(rn(n),tt=>{delete n[tt]}),W(ve)},I=(ve,tt)=>{var dt,Ke;delete xc.text_block_elements,delete xc.block_elements;const ht=!!tt.extends&&!Lt(tt.extends),Tt=tt.extends;if(o[ve]=Tt?o[Tt]:{},s[ve]=Tt??ve,E[ve.toUpperCase()]={},E[ve]={},ht||(R[ve.toUpperCase()]={},R[ve]={}),Tt&&!n[ve]&&n[Tt]){const he=(Ue=>{const _t=Nt=>{return ae(Nt)?nt(Nt,_t):Ve(Wt=Nt)&&Wt.source&&"[object RegExp]"===Object.prototype.toString.call(Wt)?new RegExp(Nt.source,Nt.flags):Ve(Nt)?ps(Nt,_t):Nt;var Wt};return _t(Ue)})(n[Tt]);delete he.removeEmptyAttrs,delete he.removeEmpty,n[ve]=he}else n[ve]={attributesOrder:[],attributes:{}};if(ae(tt.attributes)){const he=_t=>{Ue.attributesOrder.push(_t),Ue.attributes[_t]={}},Ue=null!==(dt=n[ve])&&void 0!==dt?dt:{};delete Ue.attributesDefault,delete Ue.attributesForced,delete Ue.attributePatterns,delete Ue.attributesRequired,Ue.attributesOrder=[],Ue.attributes={},J(tt.attributes,_t=>{const Nt=Qg(l);Lu(_t).each(({preset:Wt,name:wn})=>{Wt?"global"===wn&&J(Nt,he):he(wn)})}),n[ve]=Ue}if(xn(tt.padEmpty)){const he=null!==(Ke=n[ve])&&void 0!==Ke?Ke:{};he.paddEmpty=tt.padEmpty,n[ve]=he}if(ae(tt.children)){const he={},Ue=Nt=>{he[Nt]={}},_t=Nt=>{Jg(l,Nt).each(Wt=>{J(Wt,Ue)})};J(tt.children,Nt=>{Lu(Nt).each(({preset:Wt,name:wn})=>{Wt?_t(wn):Ue(wn)})}),o[ve]=he}Tt&&yt(o,(he,Ue)=>{he[Tt]&&(o[Ue]=he=eh({},o[Ue]),he[ve]=he[Tt])})},j=ve=>{Ve(ve)?yt(ve,(tt,dt)=>I(dt,tt)):Te(ve)&&J((dt=>{const Ke=/^(~)?(.+)$/;return Gt(An(dt,","),ht=>{const Tt=Ke.exec(ht);return Tt?[{cloneName:"~"===Tt[1]?"span":"div",name:Tt[2]}]:[]})})(ve??""),({name:dt,cloneName:Ke})=>{I(dt,{extends:Ke})})},Q=ve=>{J((tt=>{const dt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Gt(An(tt,","),Ke=>{const ht=dt.exec(Ke);if(ht){const Tt=ht[1];return[{operation:Tt?(Ue=>"-"===Ue?"remove":"add")(Tt):"replace",name:ht[2],validChildren:Gt(An(ht[3],"|"),Ue=>Lu(Ue).toArray())}]}return[]})})(ve??""),({operation:tt,name:dt,validChildren:Ke})=>{const ht="replace"===tt?{"#comment":{}}:o[dt],Tt=he=>{"remove"===tt?delete ht[he]:ht[he]={}};J(Ke,({preset:he,name:Ue})=>{he?Jg(l,Ue).each(Nt=>{J(Nt,Tt)}):Tt(Ue)}),o[dt]=ht})},re=ve=>{const tt=n[ve];if(tt)return tt;let dt=r.length;for(;dt--;){const Ke=r[dt];if(Ke.pattern.test(ve))return Ke}},oe=me(u),we=me(f),Ae=me(p),Be=me(h),Le=me(R),ge=me(N),Se=me(M),F=me(Object.seal(v)),U=me(g),Y=me(E),X=me(S),pe=me(b),de=me(P),De=me(z),ze=me(Object.seal(a)),Je=(ve,tt)=>{const dt=re(ve);if(dt){if(!tt)return!0;{if(dt.attributes[tt])return!0;const Ke=dt.attributePatterns;if(Ke){let ht=Ke.length;for(;ht--;)if(Ke[ht].pattern.test(tt))return!0}}}return!1},Lt=ve=>je(Le(),ve),Mt=ve=>!Vt(ve,"#")&&Je(ve)&&!Lt(ve),wo=me(s);return e.valid_elements?(D(e.valid_elements),ur(c,(ve,tt)=>{o[tt]=ve.children})):(ur(c,(ve,tt)=>{n[tt]={attributes:ve.attributes,attributesOrder:ve.attributesOrder},o[tt]=ve.children}),ur(An("strong/b em/i"),ve=>{const tt=An(ve,"/");n[tt[1]].outputName=tt[0]}),ur(M,(ve,tt)=>{n[tt]&&(e.padd_empty_block_inline_children&&(n[tt].paddInEmptyBlock=!0),n[tt].removeEmpty=!0)}),ur(An("ol ul blockquote a table tbody"),ve=>{n[ve]&&(n[ve].removeEmpty=!0)}),ur(An("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),ve=>{n[ve]&&(n[ve].paddEmpty=!0)}),ur(An("span"),ve=>{n[ve].removeEmptyAttrs=!0})),delete n.svg,j(e.custom_elements),Q(e.valid_children),W(e.extended_valid_elements),Q("+ol[ul|ol],+ul[ul|ol]"),ur({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ve,tt)=>{n[tt]&&(n[tt].parentsRequired=An(ve))}),e.invalid_elements&&ur(th(e.invalid_elements),ve=>{n[ve]&&delete n[ve]}),re("span")||W("span[!data-mce-type|*]"),{type:l,children:o,elements:n,getValidStyles:oe,getValidClasses:Ae,getBlockElements:Le,getInvalidStyles:we,getVoidElements:F,getTextBlockElements:ge,getTextInlineElements:Se,getBoolAttrs:Be,getElementRule:re,getSelfClosingElements:U,getNonEmptyElements:Y,getMoveCaretBeforeOnEnterElements:X,getWhitespaceElements:pe,getTransparentElements:de,getSpecialElements:ze,isValidChild:(ve,tt)=>{const dt=o[ve.toLowerCase()];return!(!dt||!dt[tt.toLowerCase()])},isValid:Je,isBlock:Lt,isInline:Mt,isWrapper:ve=>je(De(),ve)||Mt(ve),getCustomElements:wo,addValidElements:W,setValidElements:D,addCustomElements:j,addValidChildren:Q}},Iu=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},gk=e=>{return{value:(n=Iu(e.red)+Iu(e.green)+Iu(e.blue),Yr(n,"#").toUpperCase())};var n},rh=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,sh=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,ah=(e,t,n,o)=>((r,s,a,i)=>({red:r,green:s,blue:a,alpha:i}))(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(o)),ih=e=>{const t=rh.exec(e);if(null!==t)return k.some(ah(t[1],t[2],t[3],"1"));const n=sh.exec(e);return null!==n?k.some(ah(n[1],n[2],n[3],n[4])):k.none()},hk=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Vi=e=>ih(e).map(gk).map(t=>"#"+t.value).getOr(e),Fu=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;t&&(a=t.getValidStyles(),i=t.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let f=0;f<c.length;f++)s[c[f]]="\ufeff"+f,s["\ufeff"+f]=c[f];const u={parse:f=>{const p={};let b=!1;const g=e.url_converter,v=e.url_converter_scope||u,h=(D,I,j)=>{const Q=p[D+"-top"+I];if(!Q)return;const re=p[D+"-right"+I];if(!re)return;const oe=p[D+"-bottom"+I];if(!oe)return;const we=p[D+"-left"+I];if(!we)return;const Ae=[Q,re,oe,we];let Be=Ae.length-1;for(;Be--&&Ae[Be]===Ae[Be+1];);Be>-1&&j||(p[D+I]=-1===Be?Ae[0]:Ae.join(" "),delete p[D+"-top"+I],delete p[D+"-right"+I],delete p[D+"-bottom"+I],delete p[D+"-left"+I])},y=D=>{const I=p[D];if(!I)return;const j=I.indexOf(",")>-1?[I]:I.split(" ");let Q=j.length;for(;Q--;)if(j[Q]!==j[0])return!1;return p[D]=j[0],!0},E=D=>(b=!0,s[D]),S=(D,I)=>(b&&(D=D.replace(/\uFEFF[0-9]/g,j=>s[j])),I||(D=D.replace(/\\([\'\";:])/g,"$1")),D),A=D=>String.fromCharCode(parseInt(D.slice(1),16)),N=D=>D.replace(/\\[0-9a-f]+/gi,A),R=(D,I,j,Q,re,oe)=>{if(re=re||oe)return"'"+(re=S(re)).replace(/\'/g,"\\'")+"'";if(I=S(I||j||Q||""),!e.allow_script_urls){const we=I.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(we)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(we))return""}return g&&(I=g.call(v,I,"style")),"url('"+I.replace(/\'/g,"\\'")+"')"};if(f){let D;for(f=(f=f.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,E).replace(/\"[^\"]+\"|\'[^\']+\'/g,I=>I.replace(/[;:]/g,E));D=o.exec(f);){o.lastIndex=D.index+D[0].length;let I=D[1].replace(r,"").toLowerCase(),j=D[2].replace(r,"");if(I&&j){if(I=N(I),j=N(j),-1!==I.indexOf("\ufeff")||-1!==I.indexOf('"')||!e.allow_script_urls&&("behavior"===I||/expression\s*\(|\/\*|\*\//.test(j)))continue;"font-weight"===I&&"700"===j?j="bold":"color"!==I&&"background-color"!==I||(j=j.toLowerCase()),"rgb"==(rh.test(W=j)?"rgb":sh.test(W)?"rgba":"other")&&ih(j).each(Q=>{j=Vi(hk(Q)).toLowerCase()}),j=j.replace(n,R),p[I]=b?S(j,!0):j}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),P="border-style",z="border-color",y(M="border-width")&&y(P)&&y(z)&&(p.border=p[M]+" "+p[P]+" "+p[z],delete p[M],delete p[P],delete p[z]),"medium none"===p.border&&delete p.border,"none"===p["border-image"]&&delete p["border-image"]}var M,P,z,W;return p},serialize:(f,p)=>{let b="";const g=(v,h)=>{const y=h[v];if(y)for(let E=0,S=y.length;E<S;E++){const A=y[E],N=f[A];N&&(b+=(b.length>0?" ":"")+A+": "+N+";")}};return p&&a?(g("*",a),g(p,a)):yt(f,(v,h)=>{v&&((y,E)=>{if(!i||!E)return!0;let S=i["*"];return!(S&&S[y]||(S=i[E],S&&S[y]))})(h,p)&&(b+=(b.length>0?" ":"")+h+": "+v+";")}),b}};return u},bk={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},lh=(e,t)=>{const n=t??{};for(const o in e)je(bk,o)||(n[o]=e[o]);return ce(e.composedPath)&&(n.composedPath=()=>e.composedPath()),ce(e.getModifierState)&&(n.getModifierState=o=>e.getModifierState(o)),ce(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},ju=(e,t,n,o)=>{var r;const s=lh(t,o);return s.type=e,wt(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(wt((a=t).preventDefault)||(i=a)instanceof Event||bt(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Ut,bt(t.preventDefault)&&t.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Ut,bt(t.stopPropagation)&&t.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Ut,s.stopPropagation()},(a=>a.isDefaultPrevented===Ut||a.isDefaultPrevented===vt)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Ut:vt,s.isPropagationStopped=!0===s.cancelBubble?Ut:vt,s.isImmediatePropagationStopped=vt)),s;var a,i},vk=/^(?:mouse|contextmenu)|click/,zu=(e,t,n,o)=>{e.addEventListener(t,n,o||!1)},Ec=(e,t,n,o)=>{e.removeEventListener(t,n,o||!1)},Ki=(e,t)=>{const n=ju(e.type,e,document,t);if(ce(o=e)&&vk.test(o.type)&&jt(e.pageX)&&!jt(e.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=e.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=e.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}var o;return n},yk=(e,t,n)=>{const o=e.document,r={type:"ready"};if(n.domLoaded)return void t(r);const s=()=>{Ec(e,"DOMContentLoaded",s),Ec(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(r)),e=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():zu(e,"DOMContentLoaded",s),n.domLoaded||zu(e,"load",s)};class ca{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,o,r){const s=this;let a;const i=window,l=p=>{s.executeHandlers(Ki(p||i.event),c)};if(!t||se(t)||ks(t))return o;let c;t[s.expando]?c=t[s.expando]:(c=s.count++,t[s.expando]=c,s.events[c]={}),r=r||t;const u=n.split(" ");let f=u.length;for(;f--;){let p=u[f],b=l,g=!1,v=!1;"DOMContentLoaded"===p&&(p="ready"),s.domLoaded&&"ready"===p&&"complete"===t.readyState?o.call(r,Ki({type:p})):(s.hasFocusIn||"focusin"!==p&&"focusout"!==p||(g=!0,v="focusin"===p?"focus":"blur",b=h=>{const y=Ki(h||i.event);y.type="focus"===y.type?"focusin":"focusout",s.executeHandlers(y,c)}),a=s.events[c][p],a?"ready"===p&&s.domLoaded?o(Ki({type:p})):a.push({func:o,scope:r}):(s.events[c][p]=a=[{func:o,scope:r}],a.fakeName=v,a.capture=g,a.nativeHandler=b,"ready"===p?yk(t,b,s):zu(t,v||p,b,g)))}return t=a=null,o}unbind(t,n,o){if(!t||se(t)||ks(t))return this;const r=t[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(o){let u=c.length;for(;u--;)if(c[u].func===o){const f=c.nativeHandler,p=c.fakeName,b=c.capture,g=c.slice(0,u).concat(c.slice(u+1));g.nativeHandler=f,g.fakeName=p,g.capture=b,s[l]=g}}o&&0!==c.length||(delete s[l],Ec(t,c.fakeName||l,c.nativeHandler,c.capture))}}}else yt(s,(a,i)=>{Ec(t,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(je(s,a))return this;delete this.events[r];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,o){return this.dispatch(t,n,o)}dispatch(t,n,o){if(!t||se(t)||ks(t))return this;const r=Ki({type:n,target:t},o);do{const s=t[this.expando];s&&this.executeHandlers(r,s),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!r.isPropagationStopped());return this}clean(t){if(!t||se(t)||ks(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let o=n.length;for(;o--;)(t=n[o])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const o=this.events[n],r=o&&o[t.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&!1===i.func.call(i.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ca.Event=new ca;const Uu=le.each,Ck=le.grep,Hu="data-mce-style",wk=le.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Xi=(e,t,n)=>{wt(n)||""===n?m(e,t):Jt(e,t,n)},ch=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Va=(e,t)=>{let n=0;if(e)for(let o=e.nodeType,r=e.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!t||!se(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},dh=(e,t)=>{const n=Gn(t,"style"),o=e.serialize(e.parse(n),mt(t));Xi(t,Hu,o)},uh=(e,t,n)=>{const o=ch(t);var r,s;wt(n)||""===n?fe(e,o):$a(e,o,(s=o,w(r=n)?je(wk,s)?r+"":r+"px":r))},Bt=(e,t={})=>{const n={},o=window,r={};let s=0;const a=$g.forElement(B(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),i=[],l=t.schema?t.schema:_s({}),c=Fu({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),u=t.ownEvents?new ca:ca.Event,f=l.getBlockElements(),p=F=>F&&e&&Te(F)?e.getElementById(F):F,b=F=>{const U=p(F);return ce(U)?B(U):null},g=(F,U,Y="")=>{let X;const pe=b(F);if(ce(pe)&&Un(pe)){const de=Se[U];X=de&&de.get?de.get(pe.dom,U):Gn(pe,U)}return ce(X)?X:Y},v=F=>{const U=p(F);return wt(U)?[]:U.attributes},h=(F,U,Y)=>{P(F,X=>{if(_e(X)){const pe=B(X),de=""===Y?null:Y,De=Gn(pe,U),ze=Se[U];ze&&ze.set?ze.set(pe.dom,de,U):Xi(pe,U,de),De!==de&&t.onSetAttrib&&t.onSetAttrib({attrElm:pe.dom,attrName:U,attrValue:de})}})},y=()=>t.root_element||e.body,E=(F,U)=>((Y,X,pe)=>{let de=0,De=0;const ze=Y.ownerDocument;if(pe=pe||Y,X){if(pe===Y&&X.getBoundingClientRect&&"static"===L(B(Y),"position")){const Lt=X.getBoundingClientRect();return de=Lt.left+(ze.documentElement.scrollLeft||Y.scrollLeft)-ze.documentElement.clientLeft,De=Lt.top+(ze.documentElement.scrollTop||Y.scrollTop)-ze.documentElement.clientTop,{x:de,y:De}}let Je=X;for(;Je&&Je!==pe&&Je.nodeType&&!Hg(Je,pe);)de+=Je.offsetLeft||0,De+=Je.offsetTop||0,Je=Je.offsetParent;for(Je=X.parentNode;Je&&Je!==pe&&Je.nodeType&&!Hg(Je,pe);)de-=Je.scrollLeft||0,De-=Je.scrollTop||0,Je=Je.parentNode;De+=(Lt=B(X),lk.isFirefox()&&"table"===mt(Lt)?Ug(xt(Lt)).filter(Mt=>"caption"===mt(Mt)).bind(Mt=>Ug(io(Mt)).map(wo=>wo.dom.offsetTop<=Mt.dom.offsetTop?-Mt.dom.offsetHeight:0)).getOr(0):0)}var Lt;return{x:de,y:De}})(e.body,p(F),U),S=(F,U,Y)=>{const X=p(F);var pe;if(!wt(X)&&(ns(X)||_e(pe=X)&&"http://www.w3.org/2000/svg"===pe.namespaceURI))return Y?L(B(X),ch(U)):("float"===(U=U.replace(/-(\D)/g,(de,De)=>De.toUpperCase()))&&(U="cssFloat"),X.style?X.style[U]:void 0)},A=F=>{const U=p(F);if(!U)return{w:0,h:0};let Y=S(U,"width"),X=S(U,"height");return Y&&-1!==Y.indexOf("px")||(Y="0"),X&&-1!==X.indexOf("px")||(X="0"),{w:parseInt(Y,10)||U.offsetWidth||U.clientWidth,h:parseInt(X,10)||U.offsetHeight||U.clientHeight}},N=(F,U)=>{if(!F)return!1;const Y=ae(F)?F:[F];return St(Y,X=>sn(B(X),U))},R=(F,U,Y,X)=>{const pe=[];let de=p(F);X=void 0===X;const De=Y||("BODY"!==y().nodeName?y().parentNode:null);if(Te(U))if("*"===U)U=_e;else{const ze=U;U=Je=>N(Je,ze)}for(;de&&!(de===De||wt(de.nodeType)||$i(de)||wu(de));){if(!U||U(de)){if(!X)return[de];pe.push(de)}de=de.parentNode}return X?pe:null},M=(F,U,Y)=>{let X=U;if(F){Te(U)&&(X=pe=>N(pe,U));for(let pe=F[Y];pe;pe=pe[Y])if(bt(X)&&X(pe))return pe}return null},P=function(F,U,Y){const X=Y??this;if(ae(F)){const pe=[];return Uu(F,(de,De)=>{const ze=p(de);ze&&pe.push(U.call(X,ze,De))}),pe}{const pe=p(F);return!!pe&&U.call(X,pe)}},z=(F,U)=>{P(F,Y=>{yt(U,(X,pe)=>{h(Y,pe,X)})})},W=(F,U)=>{P(F,Y=>{const X=B(Y);nn(X,U)})},D=(F,U,Y,X,pe)=>P(F,de=>{const De=Te(U)?e.createElement(U):U;return ce(Y)&&z(De,Y),X&&(!Te(X)&&X.nodeType?De.appendChild(X):Te(X)&&W(De,X)),pe?De:de.appendChild(De)}),I=(F,U,Y)=>D(e.createElement(F),F,U,Y,!0),j=la.encodeAllRaw,Q=(F,U)=>P(F,Y=>{const X=B(Y);return U&&J(xt(X),pe=>{Cn(pe)&&0===pe.dom.length?Ye(pe):Oe(X,pe)}),Ye(X),X.dom}),re=(F,U,Y)=>{P(F,X=>{if(_e(X)){const pe=B(X),de=U.split(" ");J(de,De=>{var ze,Je,Mt,wo;ce(Y)?(Y?H:ee)(pe,De):(Je=De,_(ze=pe)?ze.dom.classList.toggle(Je):(wo=Je,Re(T(Mt=ze),wo)?q(Mt,wo):O(Mt,wo)),K(ze))})}})},oe=(F,U,Y)=>P(U,X=>{var pe;const de=ae(U)?F.cloneNode(!0):F;return Y&&Uu(Ck(X.childNodes),De=>{de.appendChild(De)}),null===(pe=X.parentNode)||void 0===pe||pe.replaceChild(de,X),X}),we=()=>e.createRange(),Ae=(F,U,Y,X)=>{if(ae(F)){let pe=F.length;const de=[];for(;pe--;)de[pe]=Ae(F[pe],U,Y,X);return de}return!t.collect||F!==e&&F!==o||i.push([F,U,Y,X]),u.bind(F,U,Y,X||ge)},Be=(F,U,Y)=>{if(ae(F)){let X=F.length;const pe=[];for(;X--;)pe[X]=Be(F[X],U,Y);return pe}if(i.length>0&&(F===e||F===o)){let X=i.length;for(;X--;){const[pe,de,De]=i[X];F!==pe||U&&U!==de||Y&&Y!==De||u.unbind(pe,de,De)}}return u.unbind(F,U,Y)},Le=F=>{if(F&&ns(F)){const U=F.getAttribute("data-mce-contenteditable");return U&&"inherit"!==U?U:"inherit"!==F.contentEditable?F.contentEditable:null}return null},ge={doc:e,settings:t,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:u,isBlock:F=>Te(F)?je(f,F):_e(F)&&(je(f,F.nodeName)||aa(l,F)),root:null,clone:(F,U)=>F.cloneNode(U),getRoot:y,getViewPort:F=>{const U=_g(F);return{x:U.x,y:U.y,w:U.width,h:U.height}},getRect:F=>{const U=p(F),Y=E(U),X=A(U);return{x:Y.x,y:Y.y,w:X.w,h:X.h}},getSize:A,getParent:(F,U,Y)=>{const X=R(F,U,Y,!1);return X&&X.length>0?X[0]:null},getParents:R,get:p,getNext:(F,U)=>M(F,U,"nextSibling"),getPrev:(F,U)=>M(F,U,"previousSibling"),select:(F,U)=>{var Y,X;const pe=null!==(X=null!==(Y=p(U))&&void 0!==Y?Y:t.root_element)&&void 0!==X?X:e;return bt(pe.querySelectorAll)?vn(pe.querySelectorAll(F)):[]},is:N,add:D,create:I,createHTML:(F,U,Y="")=>{let X="<"+F;for(const pe in U)dn(U,pe)&&(X+=" "+pe+'="'+j(U[pe])+'"');return vs(Y)&&je(l.getVoidElements(),F)?X+" />":X+">"+Y+"</"+F+">"},createFragment:F=>{const U=e.createElement("div"),Y=e.createDocumentFragment();let X;for(Y.appendChild(U),F&&(U.innerHTML=F);X=U.firstChild;)Y.appendChild(X);return Y.removeChild(U),Y},remove:Q,setStyle:(F,U,Y)=>{P(F,X=>{const pe=B(X);uh(pe,U,Y),t.update_styles&&dh(c,pe)})},getStyle:S,setStyles:(F,U)=>{P(F,Y=>{const X=B(Y);yt(U,(pe,de)=>{uh(X,de,pe)}),t.update_styles&&dh(c,X)})},removeAllAttribs:F=>P(F,U=>{const Y=U.attributes;for(let X=Y.length-1;X>=0;X--)U.removeAttributeNode(Y.item(X))}),setAttrib:h,setAttribs:z,getAttrib:g,getPos:E,parseStyle:F=>c.parse(F),serializeStyle:(F,U)=>c.serialize(F,U),addStyle:F=>{if(ge!==Bt.DOM&&e===document){if(n[F])return;n[F]=!0}let U=e.getElementById("mceDefaultStyles");if(!U){U=e.createElement("style"),U.id="mceDefaultStyles",U.type="text/css";const Y=e.head;Y.firstChild?Y.insertBefore(U,Y.firstChild):Y.appendChild(U)}U.styleSheet?U.styleSheet.cssText+=F:U.appendChild(e.createTextNode(F))},loadCSS:F=>{F||(F=""),J(F.split(","),U=>{r[U]=!0,a.load(U).catch(ke)})},addClass:(F,U)=>{re(F,U,!0)},removeClass:(F,U)=>{re(F,U,!1)},hasClass:(F,U)=>{const Y=b(F),X=U.split(" ");return ce(Y)&&ro(X,pe=>ie(Y,pe))},toggleClass:re,show:F=>{P(F,U=>fe(B(U),"display"))},hide:F=>{P(F,U=>$a(B(U),"display","none"))},isHidden:F=>{const U=b(F);return ce(U)&&Ar(te(U,"display"),"none")},uniqueId:F=>(F||"mce_")+s++,setHTML:W,getOuterHTML:F=>{const U=b(F);return ce(U)?_e(U.dom)?U.dom.outerHTML:(Y=>{const X=Pe("div"),pe=B(Y.dom.cloneNode(!0));return Ee(X,pe),Nn(X)})(U):""},setOuterHTML:(F,U)=>{P(F,Y=>{_e(Y)&&(Y.outerHTML=U)})},decode:la.decode,encode:j,insertAfter:(F,U)=>{const Y=p(U);return P(F,X=>{const pe=Y?.parentNode,de=Y?.nextSibling;return pe&&(de?pe.insertBefore(X,de):pe.appendChild(X)),X})},replace:oe,rename:(F,U)=>{if(F.nodeName!==U.toUpperCase()){const Y=I(U);return Uu(v(F),X=>{h(Y,X.nodeName,g(F,X.nodeName))}),oe(Y,F,!0),Y}return F},findCommonAncestor:(F,U)=>{let Y=F;for(;Y;){let X=U;for(;X&&Y!==X;)X=X.parentNode;if(Y===X)break;Y=Y.parentNode}return!Y&&F.ownerDocument?F.ownerDocument.documentElement:Y},run:P,getAttribs:v,isEmpty:(F,U,Y)=>Me(U)?os(l,F,{...Y,isContent:pe=>{const de=pe.nodeName.toLowerCase();return!!U[de]}}):os(l,F,Y),createRng:we,nodeIndex:Va,split:(F,U,Y)=>{let X,pe,de=we();if(F&&U&&F.parentNode&&U.parentNode){const De=F.parentNode;return de.setStart(De,Va(F)),de.setEnd(U.parentNode,Va(U)),X=de.extractContents(),de=we(),de.setStart(U.parentNode,Va(U)+1),de.setEnd(De,Va(F)+1),pe=de.extractContents(),De.insertBefore(Ou(ge,X,l),F),De.insertBefore(Y||U,F),De.insertBefore(Ou(ge,pe,l),F),Q(F),Y||U}},bind:Ae,unbind:Be,fire:(F,U,Y)=>u.dispatch(F,U,Y),dispatch:(F,U,Y)=>u.dispatch(F,U,Y),getContentEditable:Le,getContentEditableParent:F=>{const U=y();let Y=null;for(let X=F;X&&X!==U&&(Y=Le(X),null===Y);X=X.parentNode);return Y},isEditable:F=>{if(ce(F)){const U=_e(F)?F:F.parentElement;return ce(U)&&ns(U)&&cr(B(U))}return!1},destroy:()=>{if(i.length>0){let F=i.length;for(;F--;){const[U,Y,X]=i[F];u.unbind(U,Y,X)}}yt(r,(F,U)=>{a.unload(U),delete r[U]})},isChildOf:(F,U)=>F===U||U.contains(F),dumpRng:F=>"startContainer: "+F.startContainer.nodeName+", startOffset: "+F.startOffset+", endContainer: "+F.endContainer.nodeName+", endOffset: "+F.endOffset},Se=((F,U,Y)=>{const X=U.keep_values,de={style:{set:(De,ze)=>{const Je=B(De);X&&Xi(Je,Hu,ze),m(Je,"style"),Te(ze)&&na(Je,F.parse(ze))},get:De=>{const ze=B(De),Je=Gn(ze,Hu)||Gn(ze,"style");return F.serialize(F.parse(Je),mt(ze))}}};return X&&(de.href=de.src={set:(De,ze,Je)=>{const Lt=B(De);bt(U.url_converter)&&ce(ze)&&(ze=U.url_converter.call(U.url_converter_scope||Y(),String(ze),Je,De)),Xi(Lt,"data-mce-"+Je,ze),Xi(Lt,Je,ze)},get:(De,ze)=>{const Je=B(De);return Gn(Je,"data-mce-"+ze)||Gn(Je,ze)}}),de})(c,t,me(ge));return ge};Bt.DOM=Bt(document),Bt.nodeIndex=Va;const xk=Bt.DOM;class ss{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,o)=>{const r=xk;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=le._addCacheSuffix(t),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),void 0===n.states[t]&&(n.states[t]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,o=(l,c)=>{Ot(n.scriptLoadedCallbacks,c).each(u=>{J(u,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=We(l,u=>"rejected"===u.status);return c.length>0?Promise.reject(Gt(c,({reason:u})=>ae(u)?u:[u])):Promise.resolve()},s=l=>Promise.allSettled(nt(l,c=>2===n.states[c]?(o("resolve",c),Promise.resolve()):3===n.states[c]?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,o("resolve",c);const u=n.queue;return u.length>0?(n.queue=[],s(u).then(r)):Promise.resolve()},()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return k.from(u).each(Kn),r(c)})),i=La(t);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,c)})}):a(i)}}ss.ScriptLoader=new ss;const Yi={},qu=pn("en"),fh=()=>Ot(Yi,qu.get()),fr={getData:()=>ps(Yi,e=>({...e})),setCode:e=>{e&&qu.set(e)},getCode:()=>qu.get(),add:(e,t)=>{let n=Yi[e];n||(Yi[e]=n={});const o=nt(rn(t),r=>r.toLowerCase());yt(t,(r,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const c=i.indexOf(l);return-1!==c&&i.indexOf(l,c+1)>c})(o,a)?(je(t,a)||(n[a]=r),n[s]=r):n[a]=r})},translate:e=>{const t=fh().getOr({}),n=i=>bt(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>""===i||null==i,r=i=>{const l=n(i);return je(t,l)?n(t[l]):Ot(t,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(o(e))return"";if(Ve(a=e)&&je(a,"raw"))return n(e.raw);var a,i;if(ae(i=e)&&i.length>1){const i=e.slice(1);return s(r(e[0]).replace(/\{([0-9]+)\}/g,(l,c)=>je(i,c)?n(i[c]):l))}return s(r(e))},isRtl:()=>fh().bind(e=>Ot(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>je(Yi,e)},Hn=()=>{const e=[],t={},n={},o=[],r=(l,c)=>{const u=We(o,f=>f.name===l&&f.state===c);J(u,f=>f.resolve())},s=l=>je(t,l),a=(l,c)=>{const u=fr.getCode();!u||c&&-1===(","+(c||"")+",").indexOf(","+u+",")||ss.ScriptLoader.add(t[l]+"/langs/"+u+".js")},i=(l,c="added")=>"added"===c&&je(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(u=>{o.push({name:l,state:c,resolve:u})});return{items:e,urls:t,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==Hn.languageLoad&&(s(l)?a(l,c):i(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(e.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete t[l],delete n[l]},createUrl:(l,c)=>Te(c)?Te(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(t[l])return Promise.resolve();let u=Te(c)?c:c.prefix+c.resource+c.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=Hn.baseURL+"/"+u),t[l]=u.substring(0,u.lastIndexOf("/"));const f=()=>(r(l,"loaded"),Promise.resolve());return n[l]?f():ss.ScriptLoader.add(u).then(f)},waitFor:i}};Hn.languageLoad=!0,Hn.baseURL="",Hn.PluginManager=Hn(),Hn.ThemeManager=Hn(),Hn.ModelManager=Hn();const Sc=(e,t)=>{let n=null;return{cancel:()=>{Ze(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Ze(n)&&(n=setTimeout(()=>{n=null,e.apply(null,o)},t))}}},$u=(e,t)=>{let n=null;const o=()=>{Ze(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},Gi=me("mce-annotation"),da=me("data-mce-annotation"),Ka=me("data-mce-annotation-uid"),Qi=me("data-mce-annotation-active"),Zi=me("data-mce-annotation-classes"),Ji=me("data-mce-annotation-attrs"),mh=e=>t=>Fe(t,e),ph=(e,t)=>{const n=e.selection.getRng(),o=B(n.startContainer),r=B(e.getBody()),s=t.fold(()=>"."+Gi(),i=>`[${da()}="${i}"]`),a=qt(o,n.startOffset).getOr(o);return lr(a,s,mh(r)).bind(i=>rr(i,`${Ka()}`).bind(l=>rr(i,`${da()}`).map(c=>{const u=hh(e,l);return{uid:l,name:c,elements:u}})))},gh=(e,t)=>{return d(e,"data-mce-bogus")||(n=e,r=mh(t),ir(n,'[data-mce-bogus="all"]',r).isSome());var n,r},hh=(e,t)=>{const n=B(e.getBody()),o=Jn(n,`[${Ka()}="${t}"]`);return We(o,r=>!gh(r,n))},bh=(e,t)=>{const n=B(e.getBody()),o=Jn(n,`[${da()}="${t}"]`),r={};return J(o,s=>{if(!gh(s,n)){const a=Gn(s,Ka()),i=Ot(r,a).getOr([]);r[a]=i.concat([s])}}),r},vh=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let yh=0;const el=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*vh());return yh++,e+"_"+n+yh+String(t)},Ch=(e,t)=>B(e.dom.cloneNode(t)),ua=e=>Ch(e,!1),wh=e=>Ch(e,!0),xh=(e,t,n=vt)=>{const o=new mn(e,t),r=s=>{let a;do{a=o[s]()}while(a&&!se(a)&&!n(a));return k.from(a).filter(se)};return{current:()=>k.from(o.current()).filter(se),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},fa=(e,t)=>{const n=t||(r=>e.isBlock(r)||Ht(r)||Pt(r)),o=(r,s,a,i)=>{if(se(r)){const l=i(r,s,r.data);if(-1!==l)return k.some({container:r,offset:l})}return a().bind(l=>o(l.container,l.offset,a,i))};return{backwards:(r,s,a,i)=>{const l=xh(r,i??e.getRoot(),n);return o(r,s,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(r,s,a,i)=>{const l=xh(r,i??e.getRoot(),n);return o(r,s,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},Wu=(e=>{const n=o=>e(o)?k.from(o.dom.nodeValue):k.none();return{get:o=>{if(!e(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!e(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(Cn),tl=e=>Wu.get(e),Eh=(e,t)=>Wu.set(e,t),Xa=e=>{let t;return n=>(t=t||Pn(e,Ut),je(t,mt(n)))},ma=e=>Un(e)&&"br"===mt(e),Sh=Xa(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Vu=Xa(["ul","ol","dl"]),Ya=Xa(["li","dd","dt"]),Ek=Xa(["thead","tbody","tfoot"]),nl=Xa(["td","th"]),kc=Xa(["pre","script","textarea","style"]),Ga=()=>{const e=Pe("br");return Jt(e,"data-mce-bogus","1"),e},Ns=e=>{ft(e),Ee(e,Ga())},gn="\ufeff",_c=yu,yo=e=>e.replace(/\uFEFF/g,""),Sk=_e,Qa=se,Za=e=>(Qa(e)&&(e=e.parentNode),Sk(e)&&e.hasAttribute("data-mce-caret")),As=e=>Qa(e)&&_c(e.data),Ro=e=>Za(e)||As(e),kh=e=>e.firstChild!==e.lastChild||!Ht(e.firstChild),Ku=e=>{const t=e.container();return!!se(t)&&(t.data.charAt(e.offset())===gn||e.isAtStart()&&As(t.previousSibling))},Xu=e=>{const t=e.container();return!!se(t)&&(t.data.charAt(e.offset()-1)===gn||e.isAtEnd()&&As(t.nextSibling))},Nc=e=>Qa(e)&&e.data[0]===gn,Ac=e=>Qa(e)&&e.data[e.data.length-1]===gn,Yu=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const o=t.getElementsByTagName("br"),r=o[o.length-1];ra(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,_h=e=>Za(e.startContainer),Ja=Math.round,pa=e=>e?{left:Ja(e.left),top:Ja(e.top),bottom:Ja(e.bottom),right:Ja(e.right),width:Ja(e.width),height:Ja(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Nh=(e,t)=>(e=pa(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Ah=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,ol=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Ah(t.top-e.bottom,e,t)},rl=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Ah(t.bottom-e.top,e,t),Th=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left),r=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-r)*(n-r))},Tc=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ts=(e,t)=>{if(_e(e)&&e.hasChildNodes()){const n=e.childNodes;return n[(a=n.length-1,Math.min(Math.max(t,0),a))]}var a;return e},kk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Rh=e=>Te(e)&&e.charCodeAt(0)>=768&&kk.test(e),Oh=Yo,_k=Pt,Nk=Ht,Ak=se,Tk=dr(["script","style","textarea"]),Bh=dr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Rk=dr(["table"]),Ok=Ro,mr=e=>!Ok(e)&&(Ak(e)?!Tk(e.parentNode):Bh(e)||Nk(e)||Rk(e)||Gu(e)),Gu=e=>{return!(_e(t=e)&&"true"===t.getAttribute("unselectable"))&&_k(e);var t},Dh=(e,t)=>mr(e)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(Gu(r))return!1;if(Oh(r))return!0}return!0})(e,t),Ph=_e,Bk=mr,Lh=bc("display","block table"),Dk=bc("float","left right"),sl=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(Ph,Bk,vr(Dk)),Pk=vr(bc("white-space","pre pre-line pre-wrap")),al=se,Qu=Ht,Mh=Bt.nodeIndex,Rc=(e,t)=>t<0&&_e(e)&&e.hasChildNodes()?void 0:Ts(e,t),Zu=e=>e?e.createRange():Bt.DOM.createRng(),Ju=e=>Te(e)&&/[\r\n\t ]/.test(e),Ih=e=>!!e.setStart&&!!e.setEnd,ef=e=>{const t=e.startContainer,n=e.startOffset;if(Ju(e.toString())&&Pk(t.parentNode)&&se(t)){const o=t.data;if(Ju(o[n-1])||Ju(o[n+1]))return!0}return!1},Fh=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Rs=e=>{var t;let n;const o=e.getClientRects();return n=pa(o.length>0?o[0]:e.getBoundingClientRect()),!Ih(e)&&Qu(e)&&Fh(n)?(r=>{const s=r.ownerDocument,a=Zu(s),i=s.createTextNode(an),l=r.parentNode;l.insertBefore(i,r),a.setStart(i,0),a.setEnd(i,1);const c=pa(a.getBoundingClientRect());return l.removeChild(i),c})(e):Fh(n)&&Ih(e)&&null!==(t=(r=>{const a=r.endContainer,i=r.startOffset,l=r.endOffset;if(r.startContainer===a&&se(a)&&0===i&&1===l){const c=r.cloneRange();return c.setEndAfter(a),Rs(c)}return null})(e))&&void 0!==t?t:n},ga=(e,t)=>{const n=Nh(e,t);return n.width=1,n.right=n.left+1,n},G=(e,t,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=u=>{var f,p;0!==u.height&&(s.length>0&&(f=u).left===(p=s[s.length-1]).left&&f.top===p.top&&f.bottom===p.bottom&&f.right===p.right||s.push(u))},i=(u,f)=>{const p=Zu(u.ownerDocument);if(f<u.data.length){if(Rh(u.data[f]))return;if(Rh(u.data[f-1])&&(p.setStart(u,f),p.setEnd(u,f+1),!ef(p)))return void a(ga(Rs(p),!1))}f>0&&(p.setStart(u,f-1),p.setEnd(u,f),ef(p)||a(ga(Rs(p),!1))),f<u.data.length&&(p.setStart(u,f),p.setEnd(u,f+1),ef(p)||a(ga(Rs(p),!0)))},l=r.container(),c=r.offset();if(al(l))return i(l,c),s;if(Ph(l))if(r.isAtEnd()){const u=Rc(l,c);al(u)&&i(u,u.data.length),sl(u)&&!Qu(u)&&a(ga(Rs(u),!1))}else{const u=Rc(l,c);if(al(u)&&i(u,0),sl(u)&&r.isAtEnd())return a(ga(Rs(u),!1)),s;const f=Rc(r.container(),r.offset()-1);sl(f)&&!Qu(f)&&(Lh(f)||Lh(u)||!sl(u))&&a(ga(Rs(f),!1)),sl(u)&&a(ga(Rs(u),!0))}return s})(G(e,t))),n);return{container:me(e),offset:me(t),toRange:()=>{const r=Zu(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(al(e),0===t),isAtEnd:()=>al(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>Rc(e,r?t-1:t)}};G.fromRangeStart=e=>G(e.startContainer,e.startOffset),G.fromRangeEnd=e=>G(e.endContainer,e.endOffset),G.after=e=>G(e.parentNode,Mh(e)+1),G.before=e=>G(e.parentNode,Mh(e)),G.isAbove=(e,t)=>yn(En(t.getClientRects()),tr(e.getClientRects()),ol).getOr(!1),G.isBelow=(e,t)=>yn(tr(t.getClientRects()),En(e.getClientRects()),rl).getOr(!1),G.isAtStart=e=>!!e&&e.isAtStart(),G.isAtEnd=e=>!!e&&e.isAtEnd(),G.isTextPosition=e=>!!e&&se(e.container()),G.isElementPosition=e=>!G.isTextPosition(e);const Oc=(e,t)=>{se(t)&&0===t.data.length&&e.remove(t)},tf=(e,t,n)=>{var o,s;wu(n)?((o,r,s)=>{const a=k.from(s.firstChild),i=k.from(s.lastChild);r.insertNode(s),a.each(l=>Oc(o,l.previousSibling)),i.each(l=>Oc(o,l.nextSibling))})(e,t,n):(o=e,t.insertNode(s=n),Oc(o,s.previousSibling),Oc(o,s.nextSibling))},pr=se,jh=ra,zh=Bt.nodeIndex,Uh=e=>{const t=e.parentNode;return jh(t)?Uh(t):t},nf=e=>e?gs(e.childNodes,(t,n)=>(jh(n)&&"BR"!==n.nodeName?t=t.concat(nf(n)):t.push(n),t),[]):[],Hh=e=>t=>e===t,qh=e=>(pr(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,o;n=nf(Uh(t)),o=Vs(n,Hh(t),t),n=n.slice(0,o+1);const r=gs(n,(s,a,i)=>(pr(a)&&pr(n[i-1])&&s++,s),0);return n=Wo(n,dr([t.nodeName])),o=Vs(n,Hh(t),t),o-r})(e)+"]",$h=(e,t)=>{let n,o=[],r=t.container(),s=t.offset();if(pr(r))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&pr(c);)l+=c.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(qh(r));let a=((i,l)=>{const u=[];for(let f=l.parentNode;f&&f!==i;f=f.parentNode)u.push(f);return u})(e,r);return a=Wo(a,vr(ra)),o=o.concat(Nr(a,i=>qh(i))),o.reverse().join("/")+","+n},Wh=(e,t)=>{if(!t)return null;const n=t.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=gs(o,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((c,u,f)=>{let p=nf(c);return p=Wo(p,(b,g)=>!pr(b)||!pr(p[g-1])),p=Wo(p,dr([u])),p[f]})(a,l[1],parseInt(l[2],10))):null},e);if(!s)return null;if(!pr(s)&&s.parentNode){let a;return a="after"===r?zh(s)+1:zh(s),G(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;pr(l);){const u=l.data.length;if(i>=c&&i<=c+u){a=l,i-=c;break}if(!pr(l.nextSibling)){a=l,i=u;break}c+=u,l=l.nextSibling}return pr(a)&&i>a.data.length&&(i=a.data.length),G(a,i)})(s,parseInt(r,10))},Bc=Pt,Vh=(e,t,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=e.getRoot();if(se(s))i.push(n?((c,u,f)=>{let p=c(u.data.slice(0,f)).length;for(let b=u.previousSibling;b&&se(b);b=b.previousSibling)p+=c(b.data).length;return p})(t,s,a):a);else{let c=0;const u=s.childNodes;a>=u.length&&u.length&&(c=1,a=Math.max(0,u.length-1)),i.push(e.nodeIndex(u[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(e.nodeIndex(c,n));return i},of=(e,t,n)=>{let o=0;return le.each(e.select(t),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},Kh=(e,t)=>{let n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;if(_e(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))}},Xh=e=>(Kh(e,!0),Kh(e,!1),e),Yh=(e,t)=>{if(_e(e)&&(e=Ts(e,t),Bc(e)))return e;if(Ro(e)){se(e)&&Za(e)&&(e=e.parentNode);let n=e.previousSibling;if(Bc(n)||(n=e.nextSibling,Bc(n)))return n}},Gh=(e,t,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||Bc(o)){const a=o.nodeName;return{name:a,index:of(n.dom,a,o)}}const s=Yh((a=r).startContainer,a.startOffset)||Yh(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:of(n.dom,a,s)}}return((a,i,l,c)=>{const u=i.dom,f=Vh(u,a,l,c,!0),p=i.isForward(),b=_h(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:f,forward:p,...b}:{start:f,end:Vh(u,a,l,c,!1),forward:p,...b}})(e,n,t,r)},Qh=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},Zh=(e,t)=>{const n=e.dom;let o=e.getRng();const r=n.uniqueId(),s=e.isCollapsed(),a=e.getNode(),i=a.nodeName,l=e.isForward();if("IMG"===i)return{name:i,index:of(n,i,a)};const c=Xh(o.cloneRange());if(!s){c.collapse(!1);const f=Qh(n,r+"_end",t);tf(n,c,f)}o=Xh(o),o.collapse(!0);const u=Qh(n,r+"_start",t);return tf(n,o,u),e.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},rf=xe(Gh,pt,!0),Jh=e=>{const t=s=>s(e),n=me(e),o=()=>r,r={tag:!0,inner:e,fold:(s,a)=>a(e),isValue:Ut,isError:vt,map:s=>eo.value(s(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(e)},toOptional:()=>k.some(e)};return r},e0=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(o,r)=>o(e),isValue:vt,isError:Ut,map:t,mapError:o=>eo.error(o(e)),bind:t,exists:vt,forall:Ut,getOr:pt,or:pt,getOrThunk:yr,orThunk:yr,getOrDie:po(String(e)),each:ke,toOptional:k.none};return n},eo={value:Jh,error:e0,fromOption:(e,t)=>e.fold(()=>e0(t),Jh)},Br=e=>{if(!ae(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return J(e,(o,r)=>{const s=rn(o);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!ae(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...u)=>{if(u.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+u.length);return u[r].apply(null,l)},match:u=>{const f=rn(u);if(t.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+f.join(","));if(!ro(t,p=>Re(f,p)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+"\nRequired: "+t.join(", "));return u[a].apply(null,l)},log:u=>{console.log(u,{constructors:t,constructor:a,params:l})}}}}),n};Br([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Lk=e=>"inline-command"===e.type||"inline-format"===e.type,Mk=e=>"block-command"===e.type||"block-format"===e.type,Ik=e=>{var t;const n=r=>eo.error({message:r,pattern:e}),o=(r,s,a)=>{if(void 0!==e.format){let i;if(ae(e.format)){if(!ro(e.format,Te))return n(r+" pattern has non-string items in the `format` array");i=e.format}else{if(!Te(e.format))return n(r+" pattern has non-string `format` parameter");i=[e.format]}return eo.value(s(i))}return void 0!==e.cmd?Te(e.cmd)?eo.value(a(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Ve(e))return n("Raw pattern is not an object");if(!Te(e.start))return n("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!Te(e.end))return n("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,s=e.end;return 0===s.length&&(s=r,r=""),o("Inline",a=>({type:"inline-format",start:r,end:s,format:a}),(a,i)=>({type:"inline-command",start:r,end:s,cmd:a,value:i}))}if(void 0!==e.replacement)return Te(e.replacement)?0===e.start.length?n("Replacement pattern has empty `start` parameter"):eo.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const r=null!==(t=e.trigger)&&void 0!==t?t:"space";return 0===e.start.length?n("Block pattern has empty `start` parameter"):o("Block",s=>({type:"block-format",start:e.start,format:s[0],trigger:r}),(s,a)=>({type:"block-command",start:e.start,cmd:s,value:a,trigger:r}))}},t0=e=>We(e,Mk),n0=e=>We(e,Lk),sf=(e,t)=>({...e,blockPatterns:We(e.blockPatterns,n=>{return("block-command"===(o=n).type||"block-format"===o.type)&&o.trigger===t;var o})}),o0=e=>{const t=(n=>{const o=[],r=[];return J(n,s=>{s.fold(a=>{o.push(a)},a=>{r.push(a)})}),{errors:o,values:r}})(nt(e,Ik));return J(t.errors,n=>console.error(n.message,n.pattern)),t.values},af=Ln().deviceType,Fk=af.isTouch(),jk=Bt.DOM,r0=e=>Eo(e,RegExp),Ce=e=>t=>t.options.get(e),Dc=e=>Te(e)||Ve(e),s0=(e,t="")=>n=>{const o=Te(n);if(o){if(-1!==n.indexOf("=")){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return bn(a,(i,l)=>{const c=l.split("="),u=c[0],f=c.length>1?c[1]:u;return i[Gr(u)]=Gr(f),i},{})})(n);return{value:Ot(r,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},zk=Ce("iframe_attrs"),Uk=Ce("doctype"),a0=Ce("document_base_url"),Hk=Ce("body_id"),qk=Ce("body_class"),i0=Ce("content_security_policy"),$k=Ce("br_in_pre"),Fn=Ce("forced_root_block"),il=Ce("forced_root_block_attrs"),Wk=Ce("newline_behavior"),Vk=Ce("br_newline_selector"),Kk=Ce("no_newline_selector"),Xk=Ce("keep_styles"),Yk=Ce("end_container_on_empty_block"),l0=Ce("automatic_uploads"),c0=Ce("images_reuse_filename"),Gk=Ce("images_replace_blob_uris"),d0=Ce("icons"),Qk=Ce("icons_url"),Zk=Ce("images_upload_url"),Jk=Ce("images_upload_base_path"),e_=Ce("images_upload_credentials"),t_=Ce("images_upload_handler"),n_=Ce("content_css_cors"),lf=Ce("referrer_policy"),u0=Ce("language"),o_=Ce("language_url"),f0=Ce("indent_use_margin"),r_=Ce("indentation"),s_=Ce("content_css"),a_=Ce("content_style"),m0=Ce("font_css"),i_=Ce("directionality"),l_=Ce("inline_boundaries_selector"),p0=Ce("object_resizing"),c_=Ce("resize_img_proportional"),d_=Ce("placeholder"),g0=Ce("event_root"),u_=Ce("service_message"),ei=Ce("theme"),f_=Ce("theme_url"),cf=Ce("model"),m_=Ce("model_url"),ll=Ce("inline_boundaries"),p_=Ce("formats"),g_=Ce("preview_styles"),h_=Ce("format_empty_lines"),b_=Ce("format_noneditable_selector"),v_=Ce("custom_ui_selector"),df=Ce("inline"),y_=Ce("hidden_input"),C_=Ce("submit_patch"),w_=Ce("add_form_submit_trigger"),x_=Ce("add_unload_trigger"),E_=Ce("custom_undo_redo_levels"),S_=Ce("disable_nodechange"),h0=Ce("readonly"),k_=Ce("editable_root"),b0=Ce("content_css_cors"),Pc=Ce("plugins"),__=Ce("external_plugins"),N_=Ce("block_unsupported_drop"),A_=Ce("visual"),T_=Ce("visual_table_class"),v0=Ce("visual_anchor_class"),y0=Ce("iframe_aria_text"),R_=Ce("setup"),O_=Ce("init_instance_callback"),B_=Ce("urlconverter_callback"),D_=Ce("auto_focus"),P_=Ce("browser_spellcheck"),L_=Ce("protect"),M_=Ce("paste_block_drop"),Lc=Ce("paste_data_images"),I_=Ce("paste_preprocess"),F_=Ce("paste_postprocess"),j_=Ce("newdocument_content"),z_=Ce("paste_webkit_styles"),U_=Ce("paste_remove_styles_if_webkit"),H_=Ce("paste_merge_formats"),q_=Ce("smart_paste"),$_=Ce("paste_as_text"),W_=Ce("paste_tab_spaces"),V_=Ce("allow_html_data_urls"),K_=Ce("text_patterns"),X_=Ce("text_patterns_lookup"),C0=Ce("noneditable_class"),Y_=Ce("editable_class"),G_=Ce("noneditable_regexp"),Q_=Ce("preserve_cdata"),Z_=Ce("highlight_on_focus"),w0=Ce("xss_sanitization"),J_=Ce("init_content_sync"),x0=e=>le.explode(e.options.get("images_file_types")),eN=Ce("table_tab_navigation"),tN=Ce("details_initial_state"),nN=Ce("details_serialized_state"),E0=Ce("sandbox_iframes"),uf=e=>e.options.get("sandbox_iframes_exclusions"),oN=Ce("convert_unsafe_embeds"),rN=Ce("license_key"),sN=Ce("api_key"),aN=_e,S0=se,k0=e=>{const t=e.parentNode;t&&t.removeChild(e)},_0=e=>{const t=yo(e);return{count:e.length-t.length,text:t}},N0=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(gn));)e.deleteData(t,1)},A0=(e,t)=>(ha(e),t),ha=e=>{aN(e)&&Ro(e)&&(kh(e)?e.removeAttribute("data-mce-caret"):k0(e)),S0(e)&&(N0(e),0===e.data.length&&k0(e))},lN=Pt,cN=Or,dN=vc,T0=(e,t,n)=>{const o=Nh(t.getBoundingClientRect(),n);let r,s;if("BODY"===e.tagName){const i=e.ownerDocument.documentElement;r=e.scrollLeft||i.scrollLeft,s=e.scrollTop||i.scrollTop}else{const i=e.getBoundingClientRect();r=e.scrollLeft-i.left,s=e.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},R0=()=>gt.browser.isFirefox(),cl=e=>lN(e)||cN(e),dl=e=>(cl(e)||Rr(e)&&R0())&&ao(B(e)).exists(cr),fN=Yo,ff=Pt,mN=Or,O0=bc("display","block table table-cell table-row table-caption list-item"),B0=Ro,D0=Za,pN=_e,gN=se,hN=mr,ti=e=>e>0,ba=e=>e<0,Mc=(e,t)=>{let n;for(;n=e(t);)if(!D0(n))return n;return null},ul=(e,t,n,o,r)=>{const s=new mn(e,o),a=ff(e)||D0(e);let i;if(ba(t)){if(a&&(i=Mc(s.prev.bind(s),!0),n(i)))return i;for(;i=Mc(s.prev.bind(s),r);)if(n(i))return i}if(ti(t)){if(a&&(i=Mc(s.next.bind(s),!0),n(i)))return i;for(;i=Mc(s.next.bind(s),r);)if(n(i))return i}return null},Os=(e,t)=>{for(;e&&e!==t;){if(O0(e))return e;e=e.parentNode}return null},Dr=(e,t,n)=>Os(e.container(),n)===Os(t.container(),n),mf=(e,t)=>{if(!t)return k.none();const n=t.container(),o=t.offset();return pN(n)?k.from(n.childNodes[o+e]):k.none()},P0=(e,t)=>{var n;const o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},bN=(e,t,n)=>Os(t,e)===Os(n,e),L0=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let r=n;for(;r&&r!==t;){let s=r[o];if(s&&B0(s)&&(s=s[o]),ff(s)||mN(s)){if(bN(t,s,r))return s;break}if(hN(s))break;r=r.parentNode}return null},fl=xe(P0,!0),ml=xe(P0,!1),pf=(e,t,n)=>{let o;const r=xe(L0,!0,t),s=xe(L0,!1,t),a=n.startContainer,i=n.startOffset;if(Za(a)){const l=gN(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if("before"===c&&(o=l.nextSibling,dl(o)))return fl(o);if("after"===c&&(o=l.previousSibling,dl(o)))return ml(o)}if(!n.collapsed)return n;if(se(a)){if(B0(a)){if(1===e){if(o=s(a),o)return fl(o);if(o=r(a),o)return ml(o)}if(-1===e){if(o=r(a),o)return ml(o);if(o=s(a),o)return fl(o)}return n}if(Ac(a)&&i>=a.data.length-1)return 1===e&&(o=s(a),o)?fl(o):n;if(Nc(a)&&i<=1)return-1===e&&(o=r(a),o)?ml(o):n;if(i===a.data.length)return o=s(a),o?fl(o):n;if(0===i)return o=r(a),o?ml(o):n}return n},M0=(e,t)=>mf(e?0:-1,t).filter(ff),pl=(e,t,n)=>{const o=pf(e,t,n);return-1===e?G.fromRangeStart(o):G.fromRangeEnd(o)},Ic=e=>k.from(e.getNode()).map(B),gf=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Fc=(e,t)=>{const n=Dr(e,t);return!(n||!Ht(e.getNode()))||n};var hn,e;(e=hn||(hn={}))[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards";const vN=Pt,Pr=se,I0=_e,hf=Ht,ni=mr,F0=e=>{return Bh(e)||!!Gu(t=e)&&!bn(vn(t.getElementsByTagName("*")),(n,o)=>n||Oh(o),!1);var t},jc=Dh,j0=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,z0=(e,t)=>{if(ti(e)){if(ni(t.previousSibling)&&!Pr(t.previousSibling))return G.before(t);if(Pr(t))return G(t,0)}if(ba(e)){if(ni(t.nextSibling)&&!Pr(t.nextSibling))return G.after(t);if(Pr(t))return G(t,t.data.length)}return ba(e)?hf(t)?G.before(t):G.after(t):G.before(t)},bf=(e,t,n)=>{let o,r,s,a;if(!I0(n)||!t)return null;if(t.isEqual(G.after(n))&&n.lastChild){if(a=G.after(n.lastChild),ba(e)&&ni(n.lastChild)&&I0(n.lastChild))return hf(n.lastChild)?G.before(n.lastChild):a}else a=t;const i=a.container();let l=a.offset();if(Pr(i)){if(ba(e)&&l>0)return G(i,--l);if(ti(e)&&l<i.length)return G(i,++l);o=i}else{if(ba(e)&&l>0&&(r=j0(i,l-1),ni(r)))return!F0(r)&&(s=ul(r,e,jc,r),s)?Pr(s)?G(s,s.data.length):G.after(s):Pr(r)?G(r,r.data.length):G.before(r);if(ti(e)&&l<i.childNodes.length&&(r=j0(i,l),ni(r)))return hf(r)?((u,f)=>{const p=f.nextSibling;return p&&ni(p)?Pr(p)?G(p,0):G.before(p):bf(hn.Forwards,G.after(f),u)})(n,r):!F0(r)&&(s=ul(r,e,jc,r),s)?Pr(s)?G(s,0):G.before(s):Pr(r)?G(r,0):G.after(r);o=r||a.getNode()}if(o&&(ti(e)&&a.isAtEnd()||ba(e)&&a.isAtStart())&&(o=ul(o,e,Ut,n,!0),jc(o,n)))return z0(e,o);r=o&&ul(o,e,jc,n);const c=Xr(We(((u,f)=>{const p=[];let b=u;for(;b&&b!==f;)p.push(b),b=b.parentNode;return p})(i,n),vN));return!c||r&&c.contains(r)?r?z0(e,r):null:(a=ti(e)?G.after(c):G.before(c),a)},Lr=e=>({next:t=>bf(hn.Forwards,t,e),prev:t=>bf(hn.Backwards,t,e)}),U0=e=>G.isTextPosition(e)?0===e.offset():mr(e.getNode()),H0=e=>{if(G.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return mr(e.getNode(!0))},q0=(e,t)=>!G.isTextPosition(e)&&!G.isTextPosition(t)&&e.getNode()===t.getNode(!0),Oo=(e,t,n)=>{const o=Lr(t);return k.from(e?o.next(n):o.prev(n))},oi=(e,t,n)=>Oo(e,t,n).bind(o=>{return Dr(n,o,t)&&(s=n,a=o,e?!q0(s,a)&&(G.isTextPosition(i=s)||!Ht(i.getNode()))&&H0(s)&&U0(a):!q0(a,s)&&U0(s)&&H0(a))?Oo(e,t,o):k.some(o);var s,a,i}),$0=(e,t,n,o)=>oi(e,t,n).bind(r=>o(r)?$0(e,t,r,o):k.some(r)),ri=(e,t)=>{const n=e?t.firstChild:t.lastChild;return se(n)?k.some(G(n,e?0:n.data.length)):n?mr(n)?k.some(e?G.before(n):Ht(o=n)?G.before(o):G.after(o)):((r,s,a)=>{const i=r?G.before(a):G.after(a);return Oo(r,s,i)})(e,t,n):k.none();var o},to=xe(Oo,!0),uo=xe(Oo,!1),jn=xe(ri,!0),Go=xe(ri,!1),vf="_mce_caret",Bo=e=>_e(e)&&e.id===vf,va=(e,t)=>{let n=t;for(;n&&n!==e;){if(Bo(n))return n;n=n.parentNode}return null},W0=e=>je(e,"name"),V0=e=>le.isArray(e.start),zc=e=>!(!W0(e)&&xn(e.forward))||e.forward,K0=(e,t)=>(_e(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),yN=(e,t)=>Go(e).fold(vt,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),X0=(e,t,n)=>!(t.hasChildNodes()||!va(e,t)||(((o,r)=>{var s;const a=(null!==(s=o.ownerDocument)&&void 0!==s?s:document).createTextNode(gn);o.appendChild(a),r.setStart(a,0),r.setEnd(a,0)})(t,n),0)),Y0=(e,t,n,o)=>{const r=n[t?"start":"end"],s=e.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const c=a.childNodes;if(X0(s,a,o))return!0;if(r[l]>c.length-1)return!!X0(s,a,o)||yN(a,o);a=c[r[l]]}se(a)&&(i=Math.min(r[0],a.data.length)),_e(a)&&(i=Math.min(r[0],a.childNodes.length)),t?o.setStart(a,i):o.setEnd(a,i)}return!0},yf=e=>se(e)&&e.data.length>0,G0=(e,t,n)=>{const o=e.get(n.id+"_"+t),r=o?.parentNode,s=n.keep;if(o&&r){let a,i;if("start"===t?s?o.hasChildNodes()?(a=o.firstChild,i=1):yf(o.nextSibling)?(a=o.nextSibling,i=0):yf(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)+1):(a=r,i=e.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):yf(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)):(a=r,i=e.nodeIndex(o)),!s){const l=o.previousSibling,c=o.nextSibling;let u;for(le.each(le.grep(o.childNodes),f=>{se(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});u=e.get(n.id+"_"+t);)e.remove(u,!0);if(se(c)&&se(l)&&!gt.browser.isOpera()){const f=l.data.length;l.appendData(c.data),e.remove(c),a=l,i=f}}return k.some(G(a,i))}return k.none()},CN=(e,t,n)=>((o,r,s=!1)=>{return 2===r?Gh(yo,s,o):3===r?(a=>{const i=a.getRng();return{start:$h(a.dom.getRoot(),G.fromRangeStart(i)),end:$h(a.dom.getRoot(),G.fromRangeEnd(i)),forward:a.isForward()}})(o):r?{rng:(a=o).getRng(),forward:a.isForward()}:Zh(o,!1);var a})(e,t,n),wN=(e,t)=>{((n,o)=>{const r=n.dom;if(o){if(V0(o))return((s,a)=>{const i=s.createRng();return Y0(s,!0,a,i)&&Y0(s,!1,a,i)?k.some({range:i,forward:zc(a)}):k.none()})(r,o);if(Te(o.start))return((s,a)=>{const i=k.from(Wh(s.getRoot(),a.start)),l=k.from(Wh(s.getRoot(),a.end));return yn(i,l,(c,u)=>{const f=s.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:zc(a)}})})(r,o);if(je(o,"id"))return((s,a)=>{const i=G0(s,"start",a),l=G0(s,"end",a);return yn(i,l.or(i),(c,u)=>{const f=s.createRng();return f.setStart(K0(s,c.container()),c.offset()),f.setEnd(K0(s,u.container()),u.offset()),{range:f,forward:zc(a)}})})(r,o);if(W0(o))return((s,a)=>k.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(r,o);if((s=>je(s,"rng"))(o))return k.some({range:o.rng,forward:zc(o)})}return k.none()})(e,t).each(({range:n,forward:o})=>{e.setRng(n,o)})},Do=e=>_e(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),Uc=(Q0=an,e=>Q0===e);var Q0;const ya=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),Cf=e=>!ya(e)&&!Uc(e)&&!yu(e),wf=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Z0=(e,t)=>{const n=Jn(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:We(Gt(e,s=>{const a=Tc(s);return a?[B(a)]:[]}),nl)},si=e=>Z0(wf(e.selection.getSel()),B(e.getBody())),gl=(e,t)=>ir(e,"table",t),J0=e=>kn(e).fold(me([e]),t=>[e].concat(J0(t))),xf=e=>Ko(e).fold(me([e]),t=>"br"===mt(t)?Mn(t).map(n=>[e].concat(xf(n))).getOr([]):[e].concat(xf(t))),Ef=(e,t)=>yn((n=>{const o=n.startContainer,r=n.startOffset;return se(o)?0===r?k.some(B(o)):k.none():k.from(o.childNodes[r]).map(B)})(t),(n=>{const o=n.endContainer,r=n.endOffset;return se(o)?r===o.data.length?k.some(B(o)):k.none():k.from(o.childNodes[r-1]).map(B)})(t),(n,o)=>{const r=Yt(J0(e),xe(Fe,n)),s=Yt(xf(e),xe(Fe,o));return r.isSome()&&s.isSome()}).getOr(!1),Sf=(e,t,n,o)=>{const r=n,s=new mn(n,r),a=kr(e.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Re(["td","th","table"],c.toLowerCase()));let i=n;do{if(se(i)&&0!==le.trim(i.data).length)return void(o?t.setStart(i,0):t.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?t.setStartBefore(i):"BR"===i.nodeName?t.setEndBefore(i):t.setEndAfter(i))}while(i=o?s.next():s.prev());"BODY"===r.nodeName&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},Hc=e=>{const t=e.selection.getSel();return ce(t)&&t.rangeCount>0},kf=(e,t)=>{const n=si(e);n.length>0?J(n,o=>{const r=o.dom,s=e.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),t(s,!0)}):t(e.selection.getRng(),!1)},eb=(e,t,n)=>{const o=Zh(e,t);n(o),e.moveToBookmark(o)},hl=e=>w(e?.nodeType),_f=e=>_e(e)&&!Do(e)&&!Bo(e)&&!ra(e),tb=(e,t,n)=>{const{selection:o,dom:r}=e,s=o.getNode(),a=Pt(s);eb(o,!0,()=>{t()}),a&&Pt(s)&&r.isChildOf(s,e.getBody())?e.selection.select(s):n(o.getStart())&&xN(r,o)},xN=(e,t)=>{var n,o;const r=t.getRng(),{startContainer:s,startOffset:a}=r;if(!((i,l)=>{if(_f(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),u=parseInt(c,10);return!isNaN(u)&&u>0}return!1})(e,t.getNode())&&_e(s)){const i=s.childNodes,l=e.getRoot();let c;if(a<i.length){const u=i[a];c=new mn(u,null!==(n=e.getParent(u,e.isBlock))&&void 0!==n?n:l)}else{const u=i[i.length-1];c=new mn(u,null!==(o=e.getParent(u,e.isBlock))&&void 0!==o?o:l),c.next(!0)}for(let u=c.current();u;u=c.next()){if("false"===e.getContentEditable(u))return;if(se(u)&&!Af(u))return r.setStart(u,0),void t.setRng(r)}}},nb=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(_e(e)||!Af(e))return e}},Nf=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||aa(e,t),ai=(e,t,n)=>e.schema.isValidChild(t,n),Af=(e,t=!1)=>{if(ce(e)&&se(e)){const n=t?e.data.replace(/ /g,"\xa0"):e.data;return Wa(n)}return!1},ob=(e,t)=>{const n=e.dom;return _f(t)&&"false"===n.getContentEditable(t)&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=b_(o),i=vs(a)?s:`${s},${a}`;return sn(B(r),i)})(e,t)&&0===n.select('[contenteditable="true"]',t).length},Bs=(e,t)=>bt(e)?e(t):(ce(t)&&(e=e.replace(/%(\w+)/g,(n,o)=>t[o]||n)),e),Tf=(e,t)=>(e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()),Rf=(e,t)=>{if(wt(e))return null;{let n=String(e);return"color"!==t&&"backgroundColor"!==t||(n=Vi(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},qc=(e,t,n)=>{const o=e.getStyle(t,n);return Rf(o,n)},rb=(e,t)=>{let n;return e.getParent(t,o=>!!_e(o)&&(n=e.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},$c=(e,t,n)=>e.getParents(t,n,e.getRoot()),Of=(e,t,n)=>{const o=e.formatter.get(t);return ce(o)&&St(o,n)},Mr=e=>dn(e,"block"),Po=e=>dn(e,"selector"),ln=e=>dn(e,"inline"),Bf=e=>Po(e)&&!1!==e.expand&&!ln(e),sb=e=>(t=>{const n=[];let o=t;for(;o;){if(se(o)&&o.data!==gn||o.childNodes.length>1)return[];_e(o)&&n.push(o),o=o.firstChild}return n})(e).length>0,Df=e=>Bo(e.dom)&&sb(e.dom),ii=Do,ab=$c,ib=Af,EN=Nf,lb=(e,t)=>{let n=t;for(;n;){if(_e(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},cb=(e,t,n,o)=>{const r=t.data;if(e){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},SN=(e,t,n)=>cb(e,t,n,o=>Uc(o)||ya(o)),kN=(e,t,n)=>cb(e,t,n,Cf),db=(e,t,n,o,r,s)=>{let a;const i=e.getParent(n,e.isBlock)||t,l=(c,u,f)=>{const p=fa(e);return k.from((r?p.backwards:p.forwards)(c,u,(g,v)=>ii(g.parentNode)?-1:(a=g,f(r,g,v)),i))};return l(n,o,SN).bind(c=>s?l(c.container,c.offset+(r?-1:0),kN):k.some(c)).orThunk(()=>a?k.some({container:a,offset:r?0:a.length}):k.none())},ub=(e,t,n,o,r)=>{const s=o[r];se(o)&&vs(o.data)&&s&&(o=s);const a=ab(e,o);for(let i=0;i<a.length;i++)for(let l=0;l<t.length;l++){const c=t[l];if((!ce(c.collapsed)||c.collapsed===n.collapsed)&&Po(c)&&e.is(a[i],c.selector))return a[i]}return o},fb=(e,t,n,o)=>{var r;let s=n;const a=e.getRoot(),i=t[0];if(Mr(i)&&(s=i.wrapper?null:e.getParent(n,i.block,a)),!s){const l=null!==(r=e.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==r?r:a;s=e.getParent(se(n)?n.parentNode:n,c=>c!==a&&EN(e.schema,c),l)}if(s&&Mr(i)&&i.wrapper&&(s=ab(e,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!e.isBlock(s[o])&&(s=s[o],!Tf(s,"br")););return s||n},mb=(e,t,n,o)=>{const r=n.parentNode;return!ce(n[o])&&(!(r!==t&&!wt(r)&&!e.isBlock(r))||mb(e,t,r,o))},Wc=(e,t,n,o,r)=>{let s=n;const a=r?"previousSibling":"nextSibling",i=e.getRoot();if(se(n)&&!ib(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!t[0].block_expand&&e.isBlock(s))return s;for(let c=s[a];c;c=c[a]){const u=se(c)&&!mb(e,i,c,a);if(!ii(c)&&(!Ht(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!ib(c,u))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},pb=e=>ii(e.parentNode)||ii(e),Ca=(e,t,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:a,endOffset:i}=t;const l=n[0];return _e(r)&&r.hasChildNodes()&&(r=Ts(r,s),se(r)&&(s=0)),_e(a)&&a.hasChildNodes()&&(a=Ts(a,t.collapsed?i:i-1),se(a)&&(i=a.data.length)),r=lb(e,r),a=lb(e,a),pb(r)&&(r=ii(r)?r:r.parentNode,r=t.collapsed?r.previousSibling||r:r.nextSibling||r,se(r)&&(s=t.collapsed?r.length:0)),pb(a)&&(a=ii(a)?a:a.parentNode,a=t.collapsed?a.nextSibling||a:a.previousSibling||a,se(a)&&(i=t.collapsed?0:a.length)),t.collapsed&&(db(e,e.getRoot(),r,s,!0,o).each(({container:c,offset:u})=>{r=c,s=u}),db(e,e.getRoot(),a,i,!1,o).each(({container:c,offset:u})=>{a=c,i=u})),(ln(l)||l.block_expand)&&(ln(l)&&se(r)&&0!==s||(r=Wc(e,n,r,s,!0)),ln(l)&&se(a)&&i!==a.data.length||(a=Wc(e,n,a,i,!1))),Bf(l)&&(r=ub(e,n,t,r,"previousSibling"),a=ub(e,n,t,a,"nextSibling")),(Mr(l)||Po(l))&&(r=fb(e,n,r,"previousSibling"),a=fb(e,n,a,"nextSibling"),Mr(l)&&(e.isBlock(r)||(r=Wc(e,n,r,s,!0),se(r)&&(s=0)),e.isBlock(a)||(a=Wc(e,n,a,i,!1),se(a)&&(i=a.data.length)))),_e(r)&&r.parentNode&&(s=e.nodeIndex(r),r=r.parentNode),_e(a)&&a.parentNode&&(i=e.nodeIndex(a)+1,a=a.parentNode),{startContainer:r,startOffset:s,endContainer:a,endOffset:i}},bl=(e,t,n)=>{var o;const r=t.startOffset,s=Ts(t.startContainer,r),a=t.endOffset,i=Ts(t.endContainer,a-1),l=h=>{const y=h[0];se(y)&&y===s&&r>=y.data.length&&h.splice(0,1);const E=h[h.length-1];return 0===a&&h.length>0&&E===i&&se(E)&&h.splice(h.length-1,1),h},c=(h,y,E)=>{const S=[];for(;h&&h!==E;h=h[y])S.push(h);return S},u=(h,y)=>e.getParent(h,E=>E.parentNode===y,y),f=(h,y,E)=>{const S=E?"nextSibling":"previousSibling";for(let A=h,N=A.parentNode;A&&A!==y;A=N){N=A.parentNode;const R=c(A===h?A:A[S],S);R.length&&(E||R.reverse(),n(l(R)))}};if(s===i)return n(l([s]));const p=null!==(o=e.findCommonAncestor(s,i))&&void 0!==o?o:e.getRoot();if(e.isChildOf(s,i))return f(s,p,!0);if(e.isChildOf(i,s))return f(i,p);const b=u(s,p)||s,g=u(i,p)||i;f(s,b,!0);const v=c(b===s?b:b.nextSibling,"nextSibling",g===i?g.nextSibling:g);v.length&&n(l(v)),f(i,g)},_N=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],gb=(e,t,n,o,r,s)=>{const{uid:a=t,...i}=n;H(e,Gi()),Jt(e,`${Ka()}`,a),Jt(e,`${da()}`,o);const{attributes:l={},classes:c=[]}=r(a,i);if(or(e,l),u=e,J(c,p=>{H(u,p)}),s){c.length>0&&Jt(e,`${Zi()}`,c.join(","));const u=rn(l);u.length>0&&Jt(e,`${Ji()}`,u.join(","))}var u},hb=(e,t,n,o,r)=>{const s=Pe("span",e);return gb(s,t,n,o,r,!1),s},bb=e=>{const t=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Ot(s,a).map(i=>i.settings),getNames:()=>rn(s)}})();((s,a)=>{const i=da(),l=u=>k.from(u.attr(i)).bind(a.lookup),c=u=>{var f,p;u.attr(Ka(),null),u.attr(da(),null),u.attr(Qi(),null);const b=k.from(u.attr(Ji())).map(y=>y.split(",")).getOr([]),g=k.from(u.attr(Zi())).map(y=>y.split(",")).getOr([]);J(b,y=>u.attr(y,null));const v=null!==(p=null===(f=u.attr("class"))||void 0===f?void 0:f.split(" "))&&void 0!==p?p:[],h=et(v,[Gi()].concat(g));u.attr("class",h.length>0?h.join(" "):null),u.attr(Zi(),null),u.attr(Ji(),null)};s.serializer.addTempAttr(Qi()),s.serializer.addAttributeFilter(i,u=>{for(const f of u)l(f).each(p=>{!1===p.persistent&&("span"===f.name?f.unwrap():c(f))})})})(e,t);const n=((s,a)=>{const i=pn({}),l=()=>({listeners:[],previous:rs()}),c=(b,g)=>{u(b,v=>(g(v),v))},u=(b,g)=>{const v=i.get(),h=g(Ot(v,b).getOrThunk(l));v[b]=h,i.set(v)},f=(b,g)=>{J(hh(s,b),v=>{g?Jt(v,Qi(),"true"):m(v,Qi())})},p=$u(()=>{const b=Kr(a.getNames());J(b,g=>{u(g,v=>{const h=v.previous.get();return ph(s,k.some(g)).fold(()=>{h.each(y=>{var E;c(E=g,S=>{J(S.listeners,A=>A(!1,E))}),v.previous.clear(),f(y,!1)})},({uid:y,name:E,elements:S})=>{var A,N,R;Ar(h,y)||(h.each(A=>f(A,!1)),N=y,R=S,c(A=E,M=>{J(M.listeners,P=>P(!0,A,{uid:N,nodes:nt(R,z=>z.dom)}))}),v.previous.set(y),f(y,!0))}),{previous:v.previous,listeners:v.listeners}})})},30);return s.on("remove",()=>{p.cancel()}),s.on("NodeChange",()=>{p.throttle()}),{addListener:(b,g)=>{u(b,v=>({previous:v.previous,listeners:v.listeners.concat([g])}))}}})(e,t),o=ta("span"),r=s=>{J(s,a=>{o(a)?at(a):(i=>{ee(i,Gi()),m(i,`${Ka()}`),m(i,`${da()}`),m(i,`${Qi()}`);const l=rr(i,`${Ji()}`).map(f=>f.split(",")).getOr([]),c=rr(i,`${Zi()}`).map(f=>f.split(",")).getOr([]);var u;J(l,f=>m(i,f)),u=i,J(c,f=>{ee(u,f)}),m(i,`${Zi()}`),m(i,`${Ji()}`)})(a)})};return{register:(s,a)=>{t.register(s,a)},annotate:(s,a)=>{t.lookup(s).each(i=>{var l,c,u,f;c=s,u=i,f=a,(l=e).undoManager.transact(()=>{const p=l.selection,b=p.getRng(),g=si(l).length>0,v=el("mce-annotation");if(b.collapsed&&!g&&((h,y)=>{const E=Ca(h.dom,y,[{inline:"span"}]);y.setStart(E.startContainer,E.startOffset),y.setEnd(E.endContainer,E.endOffset),h.selection.setRng(y)})(l,b),p.getRng().collapsed&&!g){const h=hb(l.getDoc(),v,f,c,u.decorate);nn(h,an),p.getRng().insertNode(h.dom),p.select(h.dom)}else eb(p,!1,()=>{kf(l,h=>{((e,t,n,o,r,s)=>{const a=[],i=hb(e.getDoc(),n,s,o,r),l=rs(),c=()=>{l.clear()},u=p=>{J(p,f)},f=p=>{switch(b=e,g=p,v="span",h=mt(p),so(g).fold(()=>"skipping",y=>{return"br"===h||Cn(E=g)&&tl(E)===gn?"valid":(E=>Un(E)&&ie(E,Gi()))(g)?"existing":Bo(g.dom)?"caret":St(_N,E=>sn(g,E))?"valid-block":ai(b,v,h)&&ai(b,mt(y),v)?"valid":"invalid-child";var E})){case"invalid-child":{c();const b=xt(p);u(b),c();break}case"valid-block":c(),gb(p,n,s,o,r,!0);break;case"valid":{const b=l.get().getOrThunk(()=>{const g=ua(i);return a.push(g),l.set(g),g});At(p,b);break}}var b,g,v,h};bl(e.dom,t,p=>{c(),(b=>{const g=nt(b,B);u(g)})(p)})})(l,h,v,c,u.decorate,f)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{ph(e,k.some(s)).each(({elements:a})=>{const i=e.selection.getBookmark();r(a),e.selection.moveToBookmark(i)})},removeAll:s=>{const a=e.selection.getBookmark();yt(bh(e,s),(i,l)=>{r(i)}),e.selection.moveToBookmark(a)},getAll:s=>{const a=bh(e,s);return ps(a,i=>nt(i,l=>l.dom))}}},vl=e=>({getBookmark:xe(CN,e),moveToBookmark:xe(wN,e)});vl.isBookmarkNode=Do;const vb=(e,t,n)=>!n.collapsed&&St(n.getClientRects(),o=>{return a=t,(s=e)>=(r=o).left&&s<=r.right&&a>=r.top&&a<=r.bottom;var r,s,a}),yb=(e,t,n)=>{e.dispatch(t,n)},Cb=(e,t,n,o)=>{e.dispatch("FormatApply",{format:t,node:n,vars:o})},wb=(e,t,n,o)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:o})},xb=(e,t)=>e.dispatch("SetContent",t),Eb=(e,t)=>e.dispatch("GetContent",t),Pf=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},Sb=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),ye={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ye.metaKeyPressed(e),metaKeyPressed:e=>gt.os.isMacOS()||gt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},wa="data-mce-selected",kb=Math.abs,Vc=Math.round,Lf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},_b=(e,t)=>{const n=t.dom,o=t.getDoc(),r=document,s=t.getBody();let a,i,l,c,u,f,p,b,g,v,h,y,E,S,A;const N=ge=>ce(ge)&&(Dg(ge)||n.is(ge,"figure.image")),R=ge=>Or(ge)||n.hasClass(ge,"mce-preview-object"),M=ge=>{const Se=ge.target;((F,U)=>{if("longpress"===(Y=F).type||0===Y.type.indexOf("touch")){const Y=F.touches[0];return N(F.target)&&!vb(Y.clientX,Y.clientY,U)}var Y;return N(F.target)&&!vb(F.clientX,F.clientY,U)})(ge,t.selection.getRng())&&!ge.isDefaultPrevented()&&t.selection.select(Se)},P=ge=>n.hasClass(ge,"mce-preview-object")&&ce(ge.firstElementChild)?[ge,ge.firstElementChild]:n.is(ge,"figure.image")?[ge.querySelector("img")]:[ge],z=ge=>{const Se=p0(t);return!(!Se||t.mode.isReadOnly())&&"false"!==ge.getAttribute("data-mce-resize")&&ge!==t.getBody()&&(n.hasClass(ge,"mce-preview-object")&&ce(ge.firstElementChild)?sn(B(ge.firstElementChild),Se):sn(B(ge),Se))},W=(ge,Se,F)=>{if(ce(F)){const U=P(ge);J(U,Y=>{Y.style[Se]||!t.schema.isValid(Y.nodeName.toLowerCase(),Se)?n.setStyle(Y,Se,F):n.setAttrib(Y,Se,""+F)})}},D=(ge,Se,F)=>{W(ge,"width",Se),W(ge,"height",F)},I=ge=>{let Se,F,U,Y,X;Se=ge.screenX-f,F=ge.screenY-p,y=Se*c[2]+b,E=F*c[3]+g,y=y<5?5:y,E=E<5?5:E,U=(N(a)||R(a))&&!1!==c_(t)?!ye.modifierPressed(ge):ye.modifierPressed(ge),U&&(kb(Se)>kb(F)?(E=Vc(y*v),y=Vc(E/v)):(y=Vc(E/v),E=Vc(y*v))),D(i,y,E),Y=c.startPos.x+Se,X=c.startPos.y+F,Y=Y>0?Y:0,X=X>0?X:0,n.setStyles(l,{left:Y,top:X,display:"block"}),l.innerHTML=y+" &times; "+E,c[2]<0&&i.clientWidth<=y&&n.setStyle(i,"left",void 0+(b-y)),c[3]<0&&i.clientHeight<=E&&n.setStyle(i,"top",void 0+(g-E)),Se=s.scrollWidth-S,F=s.scrollHeight-A,Se+F!==0&&n.setStyles(l,{left:Y-Se,top:X-F}),h||(t.dispatch("ObjectResizeStart",{target:a,width:b,height:g,origin:"corner-"+c.name}),h=!0)},j=()=>{const ge=h;h=!1,ge&&(W(a,"width",y),W(a,"height",E)),n.unbind(o,"mousemove",I),n.unbind(o,"mouseup",j),r!==o&&(n.unbind(r,"mousemove",I),n.unbind(r,"mouseup",j)),n.remove(i),n.remove(l),n.remove(u),Q(a),ge&&(t.dispatch("ObjectResized",{target:a,width:y,height:E,origin:"corner-"+c.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},Q=ge=>{Be();const Se=n.getPos(ge,s),F=Se.x,U=Se.y,Y=ge.getBoundingClientRect(),X=Y.width||Y.right-Y.left,pe=Y.height||Y.bottom-Y.top;a!==ge&&(oe(),a=ge,y=E=0);const de=t.dispatch("ObjectSelected",{target:ge});z(ge)&&!de.isDefaultPrevented()?yt(Lf,(De,ze)=>{let Je=n.get("mceResizeHandle"+ze);Je&&n.remove(Je),Je=n.add(s,"div",{id:"mceResizeHandle"+ze,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ze+"-resize; margin:0; padding:0"}),n.bind(Je,"mousedown",Lt=>{Lt.stopImmediatePropagation(),Lt.preventDefault(),(Mt=>{const wo=P(a)[0];f=Mt.screenX,p=Mt.screenY,b=wo.clientWidth,g=wo.clientHeight,v=g/b,c=De,c.name=ze,c.startPos={x:X*De[0]+F,y:pe*De[1]+U},S=s.scrollWidth,A=s.scrollHeight,u=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=((ve,tt)=>{if(R(tt))return ve.create("img",{src:gt.transparentSrc});if(Rr(tt)){const dt=Vt(c.name,"n")?En:tr,Ke=tt.cloneNode(!0);return dt(ve.select("tr",Ke)).each(ht=>{const Tt=ve.select("td,th",ht);ve.setStyle(ht,"height",null),J(Tt,he=>ve.setStyle(he,"height",null))}),Ke}return tt.cloneNode(!0)})(n,a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:F,top:U,margin:0}),D(i,X,pe),i.removeAttribute(wa),s.appendChild(i),n.bind(o,"mousemove",I),n.bind(o,"mouseup",j),r!==o&&(n.bind(r,"mousemove",I),n.bind(r,"mouseup",j)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},b+" &times; "+g)})(Lt)}),De.elm=Je,n.setStyles(Je,{left:X*De[0]+F-Je.offsetWidth/2,top:pe*De[1]+U-Je.offsetHeight/2})}):oe(!1)},re=Sc(Q,0),oe=(ge=!0)=>{re.cancel(),Be(),a&&ge&&a.removeAttribute(wa),yt(Lf,(Se,F)=>{const U=n.get("mceResizeHandle"+F);U&&(n.unbind(U),n.remove(U))})},we=(ge,Se)=>n.isChildOf(ge,Se),Ae=ge=>{if(h||t.removed||t.composing)return;const Se="mousedown"===ge.type?ge.target:e.getNode(),F=lr(B(Se),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(Y=>Y.dom).filter(Y=>n.isEditable(Y.parentElement)||"IMG"===Y.nodeName&&n.isEditable(Y)).getOrUndefined(),U=ce(F)?n.getAttrib(F,wa,"1"):"1";if(J(n.select(`img[${wa}],hr[${wa}]`),Y=>{Y.removeAttribute(wa)}),ce(F)&&we(F,s)&&t.hasFocus()){Le();const Y=e.getStart(!0);if(we(Y,F)&&we(e.getEnd(!0),F))return n.setAttrib(F,wa,U),void re.throttle(F)}oe()},Be=()=>{yt(Lf,ge=>{ge.elm&&(n.unbind(ge.elm),delete ge.elm)})},Le=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Le(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Ae),t.on("keyup compositionend",ge=>{a&&"TABLE"===a.nodeName&&Ae(ge)}),t.on("hide blur",oe),t.on("contextmenu longpress",M,!0)}),t.on("remove",Be),{isResizable:z,showResizeRect:Q,hideResizeRect:oe,updateResizeRect:Ae,destroy:()=>{re.cancel(),a=i=u=null}}},Nb=(e,t,n)=>{const o=e.document.createRange();var r,s;return r=o,t.fold(s=>{r.setStartBefore(s.dom)},(s,a)=>{r.setStart(s.dom,a)},s=>{r.setStartAfter(s.dom)}),s=o,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),o},Mf=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},yl=Br([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ab=(e,t,n)=>t(B(n.startContainer),n.startOffset,B(n.endContainer),n.endOffset),Tb=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),If=Br([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),as={before:If.before,on:If.on,after:If.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(pt,pt,pt)},Kc=Br([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),li={domRange:Kc.domRange,relative:Kc.relative,exact:Kc.exact,exactFromRange:e=>Kc.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=e.match({domRange:o=>B(o.startContainer),relative:(o,r)=>as.getStart(o),exact:(o,r,s,a)=>o});return sr(t)},range:Tb},Xc=(e,t)=>{const n=mt(e);return"input"===n?as.after(e):Re(["br","img"],n)?0===t?as.before(e):as.after(e):as.on(e,t)},AN=(e,t)=>{const n=e.fold(as.before,Xc,as.after),o=t.fold(as.before,Xc,as.after);return li.relative(n,o)},Rb=(e,t,n,o)=>{const r=Xc(e,t),s=Xc(n,o);return li.relative(r,s)},Ff=(e,t)=>{const n=(t||document).createDocumentFragment();return J(e,o=>{n.appendChild(o.dom)}),B(n)},Ob=(e,t,n)=>((e,t,n)=>{return(a=e.document,i=t,l=n,a.caretPositionFromPoint?(u=i,f=l,k.from(null===(p=(c=a).caretPositionFromPoint)||void 0===p?void 0:p.call(c,u,f)).bind(b=>{if(null===b.offsetNode)return k.none();const g=c.createRange();return g.setStart(b.offsetNode,b.offset),g.collapse(),k.some(g)})):a.caretRangeFromPoint?((c,u,f)=>{var p;return k.from(null===(p=c.caretRangeFromPoint)||void 0===p?void 0:p.call(c,u,f))})(a,i,l):k.none()).map(a=>Tb(B(a.startContainer),a.startOffset,B(a.endContainer),a.endOffset));var a,i,l,c,u,f,p})(sr(B(n)).dom,e,t).map(r=>{const s=n.createRange();return s.setStart(r.start.dom,r.soffset),s.setEnd(r.finish.dom,r.foffset),s}).getOrUndefined(),jf=(e,t)=>ce(e)&&ce(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Bb=(e,t,n)=>null!==((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(e,t,n),ON=(e,t,n)=>Bb(e,t,o=>o.nodeName===n),BN=(e,t)=>Ro(e)&&!Bb(e,t,Bo),Db=(e,t,n)=>{const o=t.parentNode;if(o){const r=new mn(t,e.getParent(o,e.isBlock)||e.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(Ht(s))return!0}return!1},zf=(e,t,n,o,r)=>{const s=e.getRoot(),a=e.schema.getNonEmptyElements(),i=r.parentNode;let l,c;if(!i)return k.none();const u=e.getParent(i,e.isBlock)||s;if(o&&Ht(r)&&t&&e.isEmpty(u))return k.some(G(i,e.nodeIndex(r)));const f=new mn(r,u);for(;c=f[o?"prev":"next"]();){if("false"===e.getContentEditableParent(c)||BN(c,s))return k.none();if(se(c)&&c.data.length>0)return ON(c,s,"A")?k.none():k.some(G(c,o?c.data.length:0));if(e.isBlock(c)||a[c.nodeName.toLowerCase()])return k.none();l=c}return ks(l)?k.none():n&&l?k.some(G(l,0)):k.none()},Pb=(e,t,n,o)=>{const r=e.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=_e(i)&&l===i.childNodes.length,u=e.schema.getNonEmptyElements();let f=n;if(Ro(i))return k.none();if(_e(i)&&l>i.childNodes.length-1&&(f=!1),$i(i)&&(i=r,l=0),i===r){if(f&&(s=i.childNodes[l>0?l-1:0],s)&&(Ro(s)||u[s.nodeName]||Rr(s)))return k.none();if(i.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=se(i)&&c?i.data.length:0,!t&&i===r.lastChild&&Rr(i)||((p,b)=>{let g=b;for(;g&&g!==p;){if(Pt(g))return!0;g=g.parentNode}return!1})(r,i)||Ro(i)||xu(i))return k.none();if(i.hasChildNodes()&&!Rr(i)){s=i;const p=new mn(i,r);do{if(Pt(s)||Ro(s)){a=!1;break}if(se(s)&&s.data.length>0){l=f?0:s.data.length,i=s,a=!0;break}if(u[s.nodeName.toLowerCase()]&&!ZS(s)){l=e.nodeIndex(s),i=s.parentNode,f||l++,a=!0;break}}while(s=f?p.next():p.prev())}}}return t&&(se(i)&&0===l&&zf(e,c,t,!0,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),_e(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Ht(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||Db(e,s,!1)||Db(e,s,!0)||zf(e,c,t,!0,s).each(p=>{i=p.container(),l=p.offset(),a=!0}))),f&&!t&&se(i)&&l===i.data.length&&zf(e,c,t,!1,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),a&&i?k.some(G(i,l)):k.none();var g},Yc=(e,t)=>{const n=t.collapsed,o=t.cloneRange(),r=G.fromRangeStart(t);return Pb(e,n,!0,o).each(s=>{n&&G.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||Pb(e,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),jf(t,o)?k.none():k.some(o)},Gc=(e,t)=>e.splitText(t),Qc=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset;if(t===o&&se(t)){if(n>0&&n<t.data.length)if(o=Gc(t,n),t=o.previousSibling,r>n){r-=n;const s=Gc(o,r).previousSibling;t=o=s,r=s.data.length,n=0}else r=0}else if(se(t)&&n>0&&n<t.data.length&&(t=Gc(t,n),n=0),se(o)&&r>0&&r<o.data.length){const s=Gc(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:r}},xa=e=>({walk:(t,n)=>bl(e,t,n),split:Qc,expand:(t,n={type:"word"})=>{if("word"===n.type){const o=Ca(e,t,[{inline:"span"}]),r=e.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return t},normalize:t=>Yc(e,t).fold(vt,n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0))});xa.compareRanges=jf,xa.getCaretRangeFromPoint=Ob,xa.getSelectedNode=Tc,xa.getNode=Ts;const DN=(e=>{const n=r=>{const s=(a=>{const i=a.dom;return ar(a)?i.getBoundingClientRect().height:i.offsetHeight})(r);if(s<=0||null===s){const a=L(r,e);return parseFloat(a)||0}return s},o=(r,s)=>bn(s,(a,i)=>{const l=L(r,i),c=void 0===l?0:parseInt(l,10);return isNaN(c)?a:a+c},0);return{set:(r,s)=>{if(!w(s)&&!s.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+s);const a=r.dom;ts(a)&&(a.style[e]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,a)=>{const i=o(r,a);return s>i?s-i:0}}})("height"),Lb=()=>B(document),Mb=(e,t)=>e.view(t).fold(me([]),n=>{const o=e.owner(n),r=Mb(e,o);return[n].concat(r)});var PN=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?k.none():k.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(B)},owner:e=>It(e)});const Uf=e=>"textarea"===mt(e),Ib=(e,t)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return Dt(a.offsetLeft,a.offsetTop);const c=Xo(i?.pageYOffset,l.scrollTop),u=Xo(i?.pageXOffset,l.scrollLeft),f=Xo(l.clientTop,a.clientTop),p=Xo(l.clientLeft,a.clientLeft);return co(r).translate(u-p,c-f)})(e),o=DN.get(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},Fb=(e,t,n,o)=>{MN(e,(r,s)=>LN(e,t,n,o),n)},jb=(e,t,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};e.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(e,t,Ss(t).top,o,r),e.dispatch("AfterScrollIntoView",s))},LN=(e,t,n,o)=>{B(e.getBody());const s=B(e.getDoc()),a=((i,l)=>{const c=((f,p)=>{const b=xt(f);if(0===b.length||Uf(f))return{element:f,offset:p};if(p<b.length&&!Uf(b[p]))return{element:b[p],offset:0};{const g=b[b.length-1];return Uf(g)?{element:f,offset:p}:"img"===mt(g)?{element:g,offset:1}:Cn(g)?{element:g,offset:tl(g).length}:{element:g,offset:xt(g).length}}})(i,l),u=ue('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Oe(c.element,u),Ib(u,()=>Ye(u))})(B(n.startContainer),n.startOffset);jb(e,s,t,a,o),a.cleanup()},zb=(e,t,n,o)=>{const r=B(e.getDoc());jb(e,r,n,Ib(B(t),ke),o)},MN=(e,t,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;t(B(o),B(s));const i=e.dom.createRng();i.setStart(o,r),i.setEnd(s,a),e.selection.setRng(n)},Hf=(e,t,n,o,r)=>{const s=t.pos;if(o)zi(s.left,s.top,r);else{const a=s.top-n+t.height;zi(-e.getBody().getBoundingClientRect().left,a,r)}},Ub=(e,t,n,o,r,s)=>{const a=o+n,i=r.pos.top,l=r.bottom,c=l-i>=o;i<n?Hf(e,r,o,!1!==s,t):i>a?Hf(e,r,o,c?!1!==s:!0===s,t):l>a&&!c&&Hf(e,r,o,!0===s,t)},Hb=(e,t,n,o,r)=>{const s=sr(t).dom.innerHeight;Ub(e,t,n,s,o,r)},qb=(e,t,n,o,r)=>{const s=sr(t).dom.innerHeight;Ub(e,t,n,s,o,r);const a=(l=>{const c=Lb(),u=Ss(c),f=((g,v)=>{const h=v.owner(g);return Mb(v,h)})(l,PN),p=co(l),b=Vr(f,(g,v)=>{const h=co(v);return{left:g.left+h.left,top:g.top+h.top}},{left:0,top:0});return Dt(b.left+p.left+u.left,b.top+p.top+u.top)})(o.element),i=_g(window);a.top<i.y?Ui(o.element,!1!==r):a.top>i.bottom&&Ui(o.element,!0===r)},IN=(e,t,n)=>Fb(e,Hb,t,n),FN=(e,t,n)=>zb(e,t,Hb,n),jN=(e,t,n)=>Fb(e,qb,t,n),zN=(e,t,n)=>zb(e,t,qb,n),Cl=(e,t,n)=>{(e.inline?IN:jN)(e,t,n)},$b=(e,t=!1)=>e.dom.focus({preventScroll:t}),Wb=e=>{const t=zt(e).dom;return e.dom===t.activeElement},qf=(e=Lb())=>k.from(e.dom.activeElement).map(B),Vb=(e,t)=>{const n=Cn(t)?tl(t).length:xt(t).length+1;return e>n?n:e<0?0:e},UN=e=>li.range(e.start,Vb(e.soffset,e.start),e.finish,Vb(e.foffset,e.finish)),Kb=(e,t)=>!hc(t.dom)&&(Sn(e,t)||Fe(e,t)),Xb=e=>t=>Kb(e,t.start)&&Kb(e,t.finish),HN=e=>li.range(B(e.startContainer),e.startOffset,B(e.endContainer),e.endOffset),qN=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),k.some(t)}catch{return k.none()}},Zc=e=>{const t=e.inline||gt.browser.isFirefox()?(n=B(e.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?k.from(r.getRangeAt(0)):k.none()).map(HN)})(sr(n).dom).filter(Xb(n))):k.none();var n;e.bookmark=t.isSome()?t:e.bookmark},$f=e=>(e.bookmark?e.bookmark:k.none()).bind(t=>{return n=B(e.getBody()),k.from(t).filter(Xb(n)).map(UN);var n}).bind(qN),Yb={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},Lo={setEditorTimeout:(e,t,n)=>{return w(r=n)||(r=0),setTimeout(()=>{e.removed||t()},r);var r},setEditorInterval:(e,t,n)=>{const o=(w(s=n)||(s=0),setInterval(()=>{e.removed?clearInterval(o):t()},s));var s;return o}};let ci;const Wf=Bt.DOM,Vf=e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},Jc=(e,t)=>{const n=v_(e);return null!==Wf.getParent(t,r=>{return _e(s=r)&&Yb.isEditorUIElement(s)||!!n&&e.dom.is(r,n);var s})},Kf=e=>{try{const t=zt(B(e.getElement()));return qf(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},$N=(e,t)=>{const n=t.editor;(r=>{const s=Sc(()=>{Zc(r)},0);r.on("init",()=>{var a,c;r.inline&&((a,i)=>{const l=()=>{i.throttle()};Bt.DOM.bind(document,"mouseup",l),a.on("remove",()=>{Bt.DOM.unbind(document,"mouseup",l)})})(r,s),c=s,(a=r).on("mouseup touchend",u=>{c.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Zc(a)})}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{Z_(r)&&!0!==r.inline&&s(B(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=e.focusedEditor;Vf(Kf(n))&&o(n,H),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{Lo.setEditorTimeout(n,()=>{const r=e.focusedEditor;Vf(Kf(n))&&r===n||o(n,ee),Jc(n,Kf(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),ci||(ci=r=>{const s=e.activeEditor;s&&Ao(r).each(a=>{a.ownerDocument===document&&(a===document.body||Jc(s,a)||e.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},Wf.bind(document,"focusin",ci))},WN=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&ci&&(Wf.unbind(document,"focusin",ci),ci=null)},Gb=(e,t)=>{var n,o,r;(n=B(e.getBody()),o=t,(r=o,r.collapsed?k.from(Ts(r.startContainer,r.startOffset)).map(B):k.none()).bind(r=>Ek(r)?k.some(r):Sn(n,r)?k.none():k.some(n))).bind(n=>jn(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},ed=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},di=e=>{return e.inline?(t=>{const n=t.getBody();return n&&(o=B(n),Wb(o)||(r=o,qf(zt(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(e):ce((t=e).iframeElement)&&Wb(B(t.iframeElement));var t},Qb=e=>di(e)||(t=>{const n=zt(B(t.getElement()));return qf(n).filter(o=>!Vf(o.dom)&&Jc(t,o.dom)).isSome()})(e),Xf=e=>e.editorManager.setActive(e),Zb=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),Jb=(e,t,n,o,r)=>{const a=n?t.startOffset:t.endOffset;return k.from(n?t.startContainer:t.endContainer).map(B).map(i=>o&&t.collapsed?i:qt(i,r(i,a)).getOr(i)).bind(i=>Un(i)?k.some(i):so(i).filter(Un)).map(i=>i.dom).getOr(e)},ev=(e,t,n=!1)=>Jb(e,t,!0,n,(o,r)=>Math.min(_n(o),r)),tv=(e,t,n=!1)=>Jb(e,t,!1,n,(o,r)=>r>0?r-1:r),nv=(e,t)=>{const n=e;for(;e&&se(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Yf=(e,t)=>nt(t,n=>{const o=e.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),VN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},td=(e,t,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[o])return e[o];if(e!==t){let s=e[r];if(s)return s;for(let a=e.parent;a&&a!==t;a=a.parent)if(s=a[r],s)return s}},KN=e=>{var t;const n=null!==(t=e.value)&&void 0!==t?t:"";if(!Wa(n))return!1;const o=e.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},ov=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class qn{static create(t,n){const o=new qn(t,VN[t]||1);return n&&yt(n,(r,s)=>{o.attr(s,r)}),o}constructor(t,n){this.name=t,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const o=this;if(!Te(t))return ce(t)&&yt(t,(s,a)=>{o.attr(a,s)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(t in r.map){delete r.map[t];let s=r.length;for(;s--;)if(r[s].name===t)return r.splice(s,1),o}return o}if(t in r.map){let s=r.length;for(;s--;)if(r[s].name===t){r[s].value=n;break}}else r.push({name:t,value:n});return r.map[t]=n,o}return r.map[t]}}clone(){const t=this,n=new qn(t.name,t.type),o=t.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];"id"!==i.name&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const o=n.next;t.insert(n,t,!0),n=o}t.remove()}remove(){const t=this,n=t.parent,o=t.next,r=t.prev;return n&&(n.firstChild===t?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===t?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const o=n.lastChild;return o?(o.next=t,t.prev=o,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,o){t.parent&&t.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===r.lastChild?r.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=r,t}getAll(t){const n=this,o=[];for(let r=n.firstChild;r;r=td(r,n))r.name===t&&o.push(r);return o}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let r=t.firstChild;r;r=td(r,t))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},o){var r;const s=this;let a=s.firstChild;if(ov(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||ov(a))return!1}if(8===a.type||3===a.type&&!KN(a)||3===a.type&&a.parent&&n[a.parent.name]&&Wa(null!==(r=a.value)&&void 0!==r?r:"")||o&&o(a))return!1}while(a=td(a,s));return!0}walk(t){return td(this,null,t)}}const XN=le.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),rv=e=>Te(e.nodeValue)&&e.nodeValue.includes(gn),sv=e=>(0===e.length?"":`${nt(e,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',av=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>rv(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),iv=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(rv(t)){const n=t.parentNode;return n&&je(XN,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),YN=e=>null!==av(e).nextNode(),GN=e=>null!==iv(e).nextNode(),QN=(e,t)=>null!==t.querySelector(sv(e)),ZN=(e,t)=>{J(t.querySelectorAll(sv(e)),n=>{const o=B(n);"all"===Gn(o,"data-mce-bogus")?Ye(o):J(e,r=>{d(o,r)&&m(o,r)})})},lv=e=>{let t=e.nextNode();for(;null!==t;)t.nodeValue=null,t=e.nextNode()},JN=Dn(lv,av),eA=Dn(lv,iv),cv=(e,t)=>{const n=[{condition:xe(QN,t),action:xe(ZN,t)},{condition:YN,action:JN},{condition:GN,action:eA}];let o=e,r=!1;return J(n,({condition:s,action:a})=>{s(o)&&(r||(o=e.cloneNode(!0),r=!0),a(o))}),o},dv=e=>{const t=Jn(e,"[data-mce-bogus]");J(t,n=>{"all"===Gn(n,"data-mce-bogus")?Ye(n):ma(n)?(Oe(n,lt("\ufeff")),Ye(n)):at(n)})},uv=e=>{const t=Jn(e,"input");J(t,n=>{m(n,"name")})},fv=le.makeMap,mv=e=>{const t=[],n=(e=e||{}).indent,o=fv(e.indent_before||""),r=fv(e.indent_after||""),s=la.getEncodeFunc(e.entity_encoding||"raw",e.entities),a="xhtml"!==e.element_format;return{start:(i,l,c)=>{if(n&&o[i]&&t.length>0){const u=t[t.length-1];u.length>0&&"\n"!==u&&t.push("\n")}if(t.push("<",i),l)for(let u=0,f=l.length;u<f;u++){const p=l[u];t.push(" ",p.name,'="',s(p.value,!0),'"')}if(t[t.length]=!c||a?">":" />",c&&n&&r[i]&&t.length>0){const u=t[t.length-1];u.length>0&&"\n"!==u&&t.push("\n")}},end:i=>{let l;t.push("</",i,">"),n&&r[i]&&t.length>0&&(l=t[t.length-1],l.length>0&&"\n"!==l&&t.push("\n"))},text:(i,l)=>{i.length>0&&(t[t.length]=l?i:s(i))},cdata:i=>{t.push("<![CDATA[",i,"]]>")},comment:i=>{t.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?t.push("<?",i," ",s(l),"?>"):t.push("<?",i,"?>"),n&&t.push("\n")},doctype:i=>{t.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Ds=(e={},t=_s())=>{const n=mv(e);return e.validate=!("validate"in e)||e.validate,{serialize:o=>{const r=e.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const u=i.name,f=u in t.getVoidElements();let p=i.attributes;if(r&&p&&p.length>1){const b=[];b.map={};const g=t.getElementRule(i.name);if(g){for(let v=0,h=g.attributesOrder.length;v<h;v++){const y=g.attributesOrder[v];if(y in p.map){const E=p.map[y];b.map[y]=E,b.push({name:y,value:E})}}for(let v=0,h=p.length;v<h;v++){const y=p[v].name;if(!(y in b.map)){const E=p.map[y];b.map[y]=E,b.push({name:y,value:E})}}p=b}}if(n.start(u,p,f),sa(u))Te(i.value)&&n.text(i.value,!0),n.end(u);else if(!f){let b=i.firstChild;if(b){"pre"!==u&&"textarea"!==u||3!==b.type||"\n"!==(null===(l=b.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(b)}while(b=b.next)}n.end(u)}}};return 1!==o.type||e.inner?3===o.type?s[3](o):s[11](o):a(o),n.getContent()}}},pv=new Set;J(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{pv.add(e)});const gv=new Set;J(["background-color"],e=>{gv.add(e)});const hv=["font","text-decoration","text-emphasis"],ui=(e,t)=>{return rn((n=e).parseStyle(n.getAttrib(t,"style")));var n},bv=(e,t)=>St(ui(e,t),n=>pv.has(n)),vv=(e,t,n)=>k.from(n.container()).filter(se).exists(o=>{const r=e?0:-1;return t(o.data.charAt(n.offset()+r))}),Gf=xe(vv,!0,ya),Qf=xe(vv,!1,ya),nA=e=>{const t=e.container();return se(t)&&(0===t.data.length||_c(t.data)&&vl.isBookmarkNode(t.parentNode))},Ps=(e,t)=>n=>mf(e?0:-1,n).filter(t).isSome(),yv=e=>Dg(e)&&"block"===L(B(e),"display"),Cv=e=>{return Pt(e)&&!(_e(t=e)&&"all"===t.getAttribute("data-mce-bogus"));var t},oA=Ps(!0,yv),rA=Ps(!1,yv),wl=Ps(!0,Or),xl=Ps(!1,Or),wv=Ps(!0,Rr),Zf=Ps(!1,Rr),Ls=Ps(!0,Cv),Ms=Ps(!1,Cv),xv=(e,t)=>{return r=vt,Sn(o=t,n=e)?xs(n,s=>r(s)||Fe(s,o)).slice(0,-1):[];var n,o,r},is=(e,t)=>[e].concat(xv(e,t)),Jf=(e,t,n)=>$0(e,t,n,nA),Ev=(e,t,n)=>Yt(is(B(t.container()),e),(o=>r=>o.isBlock(mt(r)))(n)),Sv=(e,t,n,o)=>Jf(e,t.dom,n).forall(r=>Ev(t,n,o).fold(()=>!Dr(r,n,t.dom),s=>!Dr(r,n,t.dom)&&Sn(s,B(r.container())))),kv=(e,t,n,o)=>Ev(t,n,o).fold(()=>Jf(e,t.dom,n).forall(r=>!Dr(r,n,t.dom)),r=>Jf(e,r.dom,n).isNone()),em=xe(kv,!1),_v=xe(kv,!0),sA=xe(Sv,!1),aA=xe(Sv,!0),iA=e=>Ic(e).exists(ma),nd=(e,t,n,o)=>{const r=We(is(B(n.container()),t),a=>o.isBlock(mt(a))),s=En(r).getOr(t);return Oo(e,s.dom,n).filter(iA)},tm=(e,t,n)=>Ic(t).exists(ma)||nd(!0,e,t,n).isSome(),od=(e,t,n)=>{return(o=t,k.from(o.getNode(!0)).map(B)).exists(ma)||nd(!1,e,t,n).isSome();var o},Nv=xe(nd,!1),lA=xe(nd,!0),Av=e=>G.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Tv=(e,t,n)=>{const o=We(is(B(t.container()),e),r=>n.isBlock(mt(r)));return En(o).getOr(e)},Rv=(e,t,n)=>Av(t)?Qf(t):Qf(t)||uo(Tv(e,t,n).dom,t).exists(Qf),Ov=(e,t,n)=>Av(t)?Gf(t):Gf(t)||to(Tv(e,t,n).dom,t).exists(Gf),nm=e=>Ic(e).bind(t=>Qn(t,Un)).exists(t=>{return n=L(t,"white-space"),Re(["pre","pre-wrap"],n);var n}),Bv=(e,t)=>n=>{return o=new mn(n,e)[t](),ce(o)&&Pt(o)&&O0(o);var o},Dv=(e,t,n)=>{return!nm(t)&&(s=n,uo((o=e).dom,r=t).isNone()||to(o.dom,r).isNone()||em(o,r,s)||_v(o,r,s)||od(o,r,s)||tm(o,r,s)||Rv(e,t,n)||Ov(e,t,n));var o,r,s},El=(e,t,n)=>!nm(t)&&(em(e,t,n)||sA(e,t,n)||od(e,t,n)||Rv(e,t,n)||((o,r)=>{const s=uo(o.dom,r).getOr(r),a=Bv(o.dom,"prev");return r.isAtStart()&&(a(r.container())||a(s.container()))})(e,t)),Sl=(e,t,n)=>!nm(t)&&(_v(e,t,n)||aA(e,t,n)||tm(e,t,n)||Ov(e,t,n)||((o,r)=>{const s=to(o.dom,r).getOr(r),a=Bv(o.dom,"next");return r.isAtEnd()&&(a(r.container())||a(s.container()))})(e,t)),om=(e,t,n)=>El(e,t,n)||Sl(e,(o=>{const r=o.container(),s=o.offset();return se(r)&&s<r.data.length?G(r,s+1):o})(t),n),Pv=(e,t)=>Uc(e.charAt(t)),Lv=(e,t)=>ya(e.charAt(t)),Mv=(e,t,n,o)=>{const r=t.data,s=G(t,0);return n||!Pv(r,0)||om(e,s,o)?!!(n&&Lv(r,0)&&El(e,s,o))&&(t.data=an+r.slice(1),!0):(t.data=" "+r.slice(1),!0)},Iv=(e,t,n,o)=>{const r=t.data,s=G(t,r.length-1);return n||!Pv(r,r.length-1)||om(e,s,o)?!!(n&&Lv(r,r.length-1)&&Sl(e,s,o))&&(t.data=r.slice(0,-1)+an,!0):(t.data=r.slice(0,-1)+" ",!0)},Fv=(e,t,n,o)=>{if(0===n)return;const r=B(e),s=To(r,c=>o.isBlock(mt(c))).getOr(r),a=e.data.slice(t,t+n),i=t+n>=e.data.length&&Sl(s,G(e,e.data.length),o),l=0===t&&El(s,G(e,0),o);e.replaceData(t,n,Og(a,4,l,i))},rd=(e,t,n)=>{const o=e.data.slice(t),r=o.length-du(o).length;Fv(e,t,r,n)},rm=(e,t,n)=>{const o=e.data.slice(0,t),r=o.length-bs(o).length;Fv(e,t-r,r,n)},sm=(e,t,n,o,r=!0)=>{const s=bs(e.data).length,a=r?e:t,i=r?t:e;return r?a.appendData(i.data):a.insertData(0,i.data),Ye(B(i)),o&&rd(a,s,n),a},dA=(e,t)=>((n,o)=>{const r=n.container(),s=n.offset();return!G.isTextPosition(n)&&r===o.parentNode&&s>G.before(o).offset()})(t,e)?G(t.container(),t.offset()-1):t,jv=e=>{return mr(e.previousSibling)?k.some(se(t=e.previousSibling)?G(t,t.data.length):G.after(t)):e.previousSibling?Go(e.previousSibling):k.none();var t},zv=e=>{return mr(e.nextSibling)?k.some(se(t=e.nextSibling)?G(t,0):G.before(t)):e.nextSibling?jn(e.nextSibling):k.none();var t},Uv=(e,t,n)=>{n.fold(()=>{e.focus()},o=>{e.selection.setRng(o.toRange(),t)})},fA=(e,t)=>t&&je(e.schema.getBlockElements(),mt(t)),Ea=(e,t,n,o=!0,r=!1)=>{const s=((e,t,n)=>{return(o=e,r=t,s=n,o?(a=r,zv(i=s).orThunk(()=>jv(i)).orThunk(()=>{return to(l=a,G.after(c=i)).orThunk(()=>uo(l,G.before(c)));var l,c})):((a,i)=>jv(i).orThunk(()=>zv(i)).orThunk(()=>{return l=a,k.from((c=i).previousSibling?c.previousSibling:c.parentNode).bind(u=>uo(l,G.before(u))).orThunk(()=>to(l,G.after(c)));var l,c}))(r,s)).map(xe(dA,n));var o,r,s,a,i})(t,e.getBody(),n.dom),a=To(n,xe(fA,e),(i=e.getBody(),c=>c.dom===i));var i;const l=((c,u,f,p)=>{const b=Mn(c).filter(Cn),g=bo(c).filter(Cn);return Ye(c),(v=b,h=g,y=u,E=(S,A,N)=>{const R=S.dom,M=A.dom,P=R.data.length;return sm(R,M,f,p),N.container()===M?G(R,P):N},v.isSome()&&h.isSome()&&y.isSome()?k.some(E(v.getOrDie(),h.getOrDie(),y.getOrDie())):k.none()).orThunk(()=>(p&&(b.each(S=>rm(S.dom,S.dom.length,f)),g.each(S=>rd(S.dom,0,f))),u));var v,h,y,E})(n,s,e.schema,(u=n,je(e.schema.getTextInlineElements(),mt(u))));var u;e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind(c=>((u,f,p)=>{if(In(u,f)){const b=ue('<br data-mce-bogus="1">');return p?J(xt(f),g=>{Df(g)||Ye(g)}):ft(f),Ee(f,b),k.some(G.before(b.dom))}return k.none()})(e.schema,c,r)).fold(()=>{o&&Uv(e,t,l)},c=>{o&&Uv(e,t,k.some(c))})},mA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Sa=(e,t)=>sn(B(t),l_(e))&&!aa(e.schema,t)&&e.dom.isEditable(t),Hv=e=>{var t,n;return"rtl"===Bt.DOM.getStyle(e,"direction",!0)||(n=null!==(t=e.textContent)&&void 0!==t?t:"",mA.test(n))},Is=(e,t,n)=>{const o=(r=e,s=t,We(Bt.DOM.getParents(n.container(),"*",s),r));var r,s;return k.from(o[o.length-1])},Mo=(e,t)=>{const n=t.container(),o=t.offset();return e?As(n)?se(n.nextSibling)?G(n.nextSibling,0):G.after(n):Ku(t)?G(n,o+1):t:As(n)?se(n.previousSibling)?G(n.previousSibling,n.previousSibling.data.length):G.before(n):Xu(t)?G(n,o-1):t},qv=xe(Mo,!0),$v=xe(Mo,!1),Wv=(e,t)=>{const n=o=>o.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},sd=e=>Wv(e,"Delete"),Vv=e=>Wv(e,"ForwardDelete"),pA=e=>Sh(e)||Ya(e),ad=(e,t)=>Sn(e,t)?Qn(t,pA,(n=>o=>Ar(so(o),n,Fe))(e)):k.none(),am=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},Kv=(e,t,n)=>yn(jn(n),Go(n),(o,r)=>{const s=Mo(!0,o),a=Mo(!1,r),i=Mo(!1,t);return e?to(n,i).exists(l=>l.isEqual(a)&&t.isEqual(s)):uo(n,i).exists(l=>l.isEqual(s)&&t.isEqual(a))}).getOr(!0),Xv=e=>{var t;return(8===Fi(t=e)||"#comment"===mt(t)?Mn(e):Ko(e)).bind(Xv).orThunk(()=>k.some(e))},Yv=(e,t,n,o=!0)=>{var r;t.deleteContents();const s=Xv(n).getOr(n),a=B(null!==(r=e.dom.getParent(s.dom,e.dom.isBlock))&&void 0!==r?r:n.dom);if(a.dom===e.getBody()?am(e,o):In(e.schema,a,{checkRootAsContent:!1})&&(Ns(a),o&&e.selection.setCursorLocation(a.dom,0)),!Fe(n,a)){const l=Ar(so(a),n)?[]:so(i=a).map(xt).map(c=>We(c,u=>!Fe(i,u))).getOr([]);J(l.concat(xt(n)),c=>{Fe(c,a)||Sn(c,a)||!In(e.schema,c)||Ye(c)})}var i},im=e=>Jn(e,"td,th"),Gv=(e,t)=>gl(B(e),t),lm=(e,t)=>({start:e,end:t}),kl=Br([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),id=(e,t)=>lr(B(e),"td,th",t),Qv=e=>!Fe(e.start,e.end),Zv=(e,t)=>gl(e.start,t).bind(n=>gl(e.end,t).bind(o=>Cs(Fe(n,o),n))),cm=e=>t=>Zv(t,e).map(n=>((o,r,s)=>({rng:o,table:r,cells:s}))(t,n,im(n))),Jv=(e,t,n,o)=>{if(n.collapsed||!e.forall(Qv))return k.none();if(t.isSameTable){const r=e.bind(cm(o));return k.some({start:r,end:r})}{const r=id(n.startContainer,o),s=id(n.endContainer,o),a=r.bind((l=>c=>gl(c,l).bind(u=>tr(im(u)).map(f=>lm(c,f))))(o)).bind(cm(o)),i=s.bind((l=>c=>gl(c,l).bind(u=>En(im(u)).map(f=>lm(f,c))))(o)).bind(cm(o));return k.some({start:a,end:i})}},ey=(e,t)=>qs(e,n=>Fe(n,t)),dm=e=>yn(ey(e.cells,e.rng.start),ey(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),ty=(e,t)=>{const{startTable:n,endTable:o}=t,r=e.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},ny=e=>J(e,t=>{m(t,"contenteditable"),Ns(t)}),um=(e,t,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(t.dom.lastChild)):(r.setStartBefore(t.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),fm(e,r,t,!1).each(s=>s())},oy=e=>{const t=si(e),n=B(e.selection.getNode());vc(n.dom)&&In(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&St(t,o=>Fe(o,n))&&Jt(n,"data-mce-selected","1")},ry=(e,t,n)=>k.some(()=>{const o=e.selection.getRng(),r=n.bind(({rng:s,isStartInTable:a})=>{const i=k.from((c=e).dom.getParent(a?s.endContainer:s.startContainer,c.dom.isBlock)).map(B);var c;s.deleteContents(),((c,u,f)=>{f.each(p=>{u?Ye(p):(Ns(p),c.selection.setCursorLocation(p.dom,0))})})(e,a,i.filter(xe(In,e.schema)));const l=a?t[0]:t[t.length-1];return um(e,l,o,a),In(e.schema,l)?k.none():k.some(a?t.slice(1):t.slice(0,-1))}).getOr(t);ny(r),oy(e)}),hA=(e,t,n,o)=>k.some(()=>{const r=e.selection.getRng(),s=t[0],a=n[n.length-1];um(e,s,r,!0),um(e,a,r,!1);const i=In(e.schema,s)?t:t.slice(1),l=In(e.schema,a)?n:n.slice(0,-1);ny(i.concat(l)),o.deleteContents(),oy(e)}),fm=(e,t,n,o=!0)=>k.some(()=>{Yv(e,t,n,o)}),bA=(e,t)=>k.some(()=>Ea(e,!1,t)),sy=(e,t)=>Yt(is(t,e),nl),mm=(e,t)=>Yt(is(t,e),ta("caption")),ld=(e,t)=>k.some(()=>{Ns(t),e.selection.setCursorLocation(t.dom,0)}),ay=(e,t)=>e?wv(t):Zf(t),pm=(e,t)=>{const n=B(e.selection.getStart(!0)),o=si(e);return e.selection.isCollapsed()&&0===o.length?((e,t,n)=>{const o=B(e.getBody());return mm(o,n).fold(()=>((r,s,a,i)=>{const l=G.fromRangeStart(r.selection.getRng());return sy(a,i).bind(c=>{return In(r.schema,c,{checkRootAsContent:!1})?ld(r,c):(f=a,b=c,g=l,oi(s,r.getBody(),g).bind(v=>sy(f,B(v.getNode())).bind(h=>Fe(h,b)?k.none():k.some(ke))));var f,b,g})})(e,t,o,n).orThunk(()=>Cs(((r,s)=>{const a=G.fromRangeStart(r.selection.getRng());return ay(s,a)||Oo(s,r.getBody(),a).exists(i=>ay(s,i))})(e,t),ke)),r=>((s,a,i,l)=>{const c=G.fromRangeStart(s.selection.getRng());return In(s.schema,l)?ld(s,l):(f=i,b=l,g=c,oi(p=a,(u=s).getBody(),g).fold(()=>k.some(ke),v=>{return y=p,E=g,S=v,jn((h=b).dom).bind(A=>Go(h.dom).map(N=>y?E.isEqual(A)&&S.isEqual(N):E.isEqual(N)&&S.isEqual(A))).getOr(!0)?((h,y)=>ld(h,y))(u,b):((h,y,E)=>mm(h,B(E.getNode())).fold(()=>k.some(ke),S=>Cs(!Fe(S,y),ke)))(f,b,v);var h,y,E,S}));var u,f,p,b,g})(e,t,o,r))})(e,t,n):((r,s,a)=>{const i=B(r.getBody()),l=r.selection.getRng();return 0!==a.length?ry(r,a,k.none()):(c=r,f=l,mm(u=i,s).fold(()=>{return b=c,((e,t)=>{const n=(s=>a=>Fe(s,a))(e),o=((s,a)=>{const i=id(s.startContainer,a),l=id(s.endContainer,a);return yn(i,l,lm)})(t,n),r=((s,a)=>{const i=Gv(s.startContainer,a),l=Gv(s.endContainer,a),c=i.isSome(),u=l.isSome(),f=yn(i,l,Fe).getOr(!1);return yn((p={startTable:i,endTable:l,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u}).startTable,p.endTable,(b,g)=>{const v=Tg(b,y=>Fe(y,g)),h=Tg(g,y=>Fe(y,b));return v||h?{...p,startTable:v?k.none():p.startTable,endTable:h?k.none():p.endTable,isSameTable:!1,isMultiTable:!1}:p}).getOr(p);var p})(t,n);return a=t,i=n,o.exists(l=>{return u=i,!Qv(c=l)&&Zv(c,u).exists(f=>{const p=f.dom.rows;return 1===p.length&&1===p[0].cells.length})&&Ef(l.start,a);var c,u})?o.map(s=>kl.singleCellTable(t,s.start)):r.isMultiTable?((s,a,i,l)=>Jv(s,a,i,l).bind(({start:c,end:u})=>{const f=c.bind(dm).getOr([]),p=u.bind(dm).getOr([]);if(f.length>0&&p.length>0){const b=ty(i,a);return k.some(kl.multiTable(f,p,b))}return k.none()}))(o,r,t,n):((s,a,i,l)=>Jv(s,a,i,l).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=a,f=dm(c).getOr([]);if(u&&c.cells.length===f.length)return k.some(kl.fullTable(c.table));if(f.length>0){if(u)return k.some(kl.partialTable(f,k.none()));{const p=ty(i,a);return k.some(kl.partialTable(f,k.some({...a,rng:p})))}}return k.none()}))(o,r,t,n);var a,i})(u,f).bind(h=>h.fold(xe(fm,b),xe(bA,b),xe(ry,b),xe(hA,b)));var b},b=>ld(c,b)));var c,u,f})(e,n,o)},ka=(e,t)=>{let n=t;for(;n&&n!==e;){if(Yo(n)||Pt(n))return n;n=n.parentNode}return null},yA=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],CA=le.each,gm=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),o=r=>St(yA,s=>Vt(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return CA(t.getAttribs(l),u=>{const f=u.nodeName.toLowerCase();"style"===f||o(f)||(c[f]=t.getAttrib(l,f))}),c},i=(l,c)=>{for(const u in l)if(je(l,u)){const f=c[u];if(jt(f)||l[u]!==f)return!1;delete c[u]}for(const u in c)if(je(c,u))return!1;return!0};return!(_e(r)&&_e(s)&&(!i(a(r),a(s))||!i(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(s,"style"))))||Do(r)||Do(s))},isAttributeInternal:o}},iy=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),ly=(e,t,n,o)=>{const r=n.name;for(let s=0,a=e.length;s<a;s++){const i=e[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=t.length;s<a;s++){const i=t[s],l=i.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},cy=(e,t)=>{const n=(o,r)=>{yt(o,s=>{const a=vn(s.nodes);J(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(r?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!wt(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},dy=(e,t,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&(c=>{let f=c;for(;f=f.walk();)ly(s,a,f,l)})(i),l})(e,t,n);cy(r,o)},hm=(e,t,n,o)=>{if((e.pad_empty_with_br||t.insert)&&n(o)){const r=new qn("br",1);t.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new qn("#text",3)).value=an},uy=(e,t)=>{const n=e?.firstChild;return ce(n)&&n===e.lastChild&&n.name===t},_l=(e,t,n,o)=>o.isEmpty(t,n,r=>((s,a)=>{const i=s.getElementRule(a.name);return!0===i?.paddEmpty})(e,r)),wA=e=>{let t;for(let n=e;n;n=n.parent){const o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(t=n)}return k.from(t)},bm=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const o=e.children();for(const r of o)n&&!t.isValidChild(n.name,r.name)&&bm(r,t,n);e.unwrap()}},vm=(e,t,n,o=ke)=>{const r=t.getTextBlockElements(),s=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=le.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=u=>u!==n&&!i[u.name];for(let u=0;u<e.length;u++){const f=e[u];let p,b,g;if(!f.parent||l.has(f))continue;if(r[f.name]&&"li"===f.parent.name){let h=f.next;for(;h&&r[h.name];)h.name="li",l.add(h),f.parent.insert(h,f.parent),h=h.next;f.unwrap();continue}const v=[f];for(p=f.parent;p&&!t.isValidChild(p.name,f.name)&&c(p);p=p.parent)v.push(p);if(p&&v.length>1)if(ym(t,f,p))bm(f,t);else{v.reverse(),b=v[0].clone(),o(b);let h=b;for(let y=0;y<v.length-1;y++){t.isValidChild(h.name,v[y].name)&&y>0?(g=v[y].clone(),o(g),h.append(g)):g=h;for(let E=v[y].firstChild;E&&E!==v[y+1];){const S=E.next;g.append(E),E=S}h=g}_l(t,s,a,b)?p.insert(f,v[0],!0):(p.insert(b,v[0],!0),p.insert(f,b)),p=v[0],(_l(t,s,a,p)||uy(p,"br"))&&p.empty().remove()}else if(f.parent){if("li"===f.name){let h=f.prev;if(h&&("ul"===h.name||"ol"===h.name)){h.append(f);continue}if(h=f.next,h&&("ul"===h.name||"ol"===h.name)&&h.firstChild){h.insert(f,h.firstChild,!0);continue}const y=new qn("ul",1);o(y),f.wrap(y);continue}if(t.isValidChild(f.parent.name,"div")&&t.isValidChild("div",f.name)){const h=new qn("div",1);o(h),f.wrap(h)}else bm(f,t)}}},ym=(e,t,n=t.parent)=>{return!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&("a"!==t.name||!(o=>{let s=o;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n))&&(o=n,"summary"!==o.name||!iy(t)||n?.firstChild===t&&n?.lastChild===t));var o},Cm=e=>e.collapsed?e:(t=>{const n=G.fromRangeStart(t),o=G.fromRangeEnd(t),r=t.commonAncestorContainer;return Oo(!1,r,o).map(s=>!Dr(n,o,r)&&Dr(n,s,r)?((a,i,l,c)=>{const u=document.createRange();return u.setStart(a,i),u.setEnd(l,c),u})(n.container(),n.offset(),s.container(),s.offset()):t).getOr(t)})(e),wm=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},fy=(e,t)=>{const n=G.after(e),o=Lr(t).prev(n);return o?o.toRange():null},kA=["pre"],xm=vc,_A=(e,t,n)=>{var o,r;const s=e.selection,a=e.dom,i=e.parser,l=n.merge,c=Ds({validate:!0},e.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=yo(t)),-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,u);let f=s.getRng();const p=f.startContainer,b=e.getBody();var S,A;p===b&&s.isCollapsed()&&a.isBlock(b.firstChild)&&(S=e,ce(A=b.firstChild)&&!S.schema.getVoidElements()[A.nodeName])&&a.isEmpty(b.firstChild)&&(f=a.createRng(),f.setStart(b.firstChild,0),f.setEnd(b.firstChild,0),s.setRng(f)),s.isCollapsed()||(S=>{const A=S.dom,N=Cm(S.selection.getRng());S.selection.setRng(N);const R=A.getParent(N.startContainer,xm);var M,P,z;M=A,P=N,ce(z=R)&&z===M.getParent(P.endContainer,xm)&&Ef(B(z),P)?fm(S,N,B(R)):N.startContainer===N.endContainer&&N.endOffset-N.startOffset==1&&se(N.startContainer.childNodes[N.startOffset])?N.deleteContents():S.getDoc().execCommand("Delete",!1)})(e);const g=s.getNode(),v={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},h=i.parse(t,v);if(!0===n.paste&&((e,t)=>{let n=t.firstChild,o=t.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return ce(s)&&(s.isEmpty(a)||(l=s,r.getBlockElements()[l.name]&&ce((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===an)(l.firstChild)));var l,c})(e,o)&&(o=o?.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(e.schema,h)&&((S,A)=>!!wm(S,A))(a,g))return f=((e,t,n,o)=>{const r=((f,p,b)=>{const g=p.serialize(b);return(v=>{var h,y;const E=v.firstChild,S=v.lastChild;return E&&"META"===E.nodeName&&(null===(h=E.parentNode)||void 0===h||h.removeChild(E)),S&&"mce_marker"===S.id&&(null===(y=S.parentNode)||void 0===y||y.removeChild(S)),v})(f.createFragment(g))})(t,e,o),s=wm(t,n.startContainer),a=(e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||ce(null==(t=n)?void 0:t.firstChild)&&t.firstChild===t.lastChild&&((o=t.firstChild).data===an||Ht(o)))?e.slice(0,-1):e;var o,t,n})((i=r.firstChild,We(null!==(l=i?.childNodes)&&void 0!==l?l:[],f=>"LI"===f.nodeName)));var i,l;const c=t.getRoot(),u=f=>{const p=G.fromRangeStart(n),b=Lr(t.getRoot()),g=1===f?b.prev(p):b.next(p),v=g?.getNode();return!v||wm(t,v)!==s};return s?u(1)?((f,p,b)=>{const g=f.parentNode;return g&&le.each(p,v=>{g.insertBefore(v,f)}),((v,h)=>{const y=G.before(v),E=Lr(h).next(y);return E?E.toRange():null})(f,b)})(s,a,c):u(2)?(f=s,b=c,t.insertAfter((p=a).reverse(),f),fy(p[0],b)):((f,p,b,g)=>{const v=((y,E)=>{const S=E.cloneRange(),A=E.cloneRange();return S.setStartBefore(y),A.setEndAfter(y),[S.cloneContents(),A.cloneContents()]})(f,g),h=f.parentNode;return h&&(h.insertBefore(v[0],f),le.each(p,y=>{h.insertBefore(y,f)}),h.insertBefore(v[1],f),h.removeChild(f)),fy(p[p.length-1],b)})(s,a,c,n):null;var f,p,b})(c,a,s.getRng(),h),f&&s.setRng(f),t;!0===n.paste&&((S,A,N,R)=>{var M;const P=A.firstChild,z=A.lastChild,W=P===("bookmark"===z.attr("data-mce-type")?z.prev:z),D=Re(kA,P.name);if(W&&D){const I="false"!==P.attr("contenteditable"),j=(null===(M=S.getParent(N,S.isBlock))||void 0===M?void 0:M.nodeName.toLowerCase())===P.name,Q=k.from(ka(R,N)).forall(Yo);return I&&j&&Q}return!1})(a,h,g,e.getBody())&&(null===(o=h.firstChild)||void 0===o||o.unwrap()),(S=>{let A=S;for(;A=A.walk();)1===A.type&&A.attr("data-mce-fragment","1")})(h);let y=h.lastChild;if(y&&"mce_marker"===y.attr("id")){const S=y;for(y=y.prev;y&&"table"!==y.name;y=y.walk(!0))if(3===y.type||!a.isBlock(y.name)){y.parent&&e.schema.isValidChild(y.parent.name,"span")&&y.parent.insert(S,y,"br"===y.name);break}}if(e._selectionOverrides.showBlockCaretContainer(g),v.invalid||((S,A,N)=>{var R;return St(N.children(),iy)&&"SUMMARY"===(null===(R=S.getParent(A,S.isBlock))||void 0===R?void 0:R.nodeName)})(a,g,h)){e.selection.setContent(u);let S,A=s.getNode();const N=e.getBody();for($i(A)?A=S=N:S=A;S&&S!==N;)A=S,S=S.parentNode;t=A===N?N.innerHTML:a.getOuterHTML(A);const R=i.parse(t),M=(I=>{for(let j=I;j;j=j.walk())if("mce_marker"===j.attr("id"))return k.some(j);return k.none()})(R),P=M.bind(wA).getOr(R);M.each(I=>I.replace(h));const z=h.children(),W=null!==(r=h.parent)&&void 0!==r?r:R;h.unwrap();const D=We(z,I=>ym(e.schema,I,W));vm(D,e.schema,P),dy(i.getNodeFilters(),i.getAttributeFilters(),R),t=c.serialize(R),A===N?a.setHTML(N,t):a.setOuterHTML(A,t)}else t=c.serialize(h),((S,A,N)=>{var R;if("all"===N.getAttribute("data-mce-bogus"))null===(R=N.parentNode)||void 0===R||R.insertBefore(S.dom.createFragment(A),N);else{const M=N.firstChild;!M||M===N.lastChild&&"BR"===M.nodeName?S.dom.setHTML(N,A):S.selection.setContent(A,{no_events:!0})}})(e,t,g);var E;return((S,A)=>{const N=S.schema.getTextInlineElements(),R=S.dom;if(A){const M=S.getBody(),P=gm(S),z="*[data-mce-fragment]",W=R.select(z);le.each(W,D=>{const I=re=>ce(N[re.nodeName.toLowerCase()]),j=re=>1===re.childNodes.length;if(!bv(R,Q=D)&&(!bv(re=R,oe=Q)||!St(ui(re,oe),we=>gv.has(we)))&&I(D)&&j(D)){const re=ui(R,D),oe=(Le,ge)=>ro(Le,Se=>Re(ge,Se)),we=Le=>j(D)&&R.is(Le,z)&&I(Le)&&(Le.nodeName===D.nodeName&&oe(re,ui(R,Le))||we(Le.children[0])),Ae=Le=>ce(Le)&&Le!==M&&(P.compare(D,Le)||Ae(Le.parentElement)),Be=Le=>ce(Le)&&Le!==M&&R.is(Le,z)&&(((ge,Se,F)=>{const U=ui(ge,Se),Y=ui(ge,F),X=pe=>{var de,De;const ze=null!==(de=ge.getStyle(Se,pe))&&void 0!==de?de:"",Je=null!==(De=ge.getStyle(F,pe))&&void 0!==De?De:"";return So(ze)&&So(Je)&&ze!==Je};return St(U,pe=>{const de=De=>St(De,ze=>ze===pe);if(!de(Y)&&de(hv)){const De=We(Y,ze=>St(hv,Je=>Vt(ze,Je)));return St(De,X)}return X(pe)})})(R,D,Le)||Be(Le.parentElement));(we(D.children[0])||Ae(D.parentElement)&&!Be(D.parentElement))&&R.remove(D,!0)}var re,oe,Q})}})(e,l),((S,A)=>{var N,R,M;let P;const z=S.dom,W=S.selection;if(!A)return;W.scrollIntoView(A);const D=ka(S.getBody(),A);if(D&&"false"===z.getContentEditable(D))return z.remove(A),void W.select(D);let I=z.createRng();const j=A.previousSibling;if(se(j)){I.setStart(j,null!==(R=null===(N=j.nodeValue)||void 0===N?void 0:N.length)&&void 0!==R?R:0);const re=A.nextSibling;se(re)&&(j.appendData(re.data),null===(M=re.parentNode)||void 0===M||M.removeChild(re))}else I.setStartBefore(A),I.setEndBefore(A);const Q=z.getParent(A,z.isBlock);if(z.remove(A),Q&&z.isEmpty(Q)){const re=xm(Q);ft(B(Q)),I.setStart(Q,0),I.setEnd(Q,0),re||Q.getAttribute("data-mce-fragment")||!(P=(oe=>{let we=G.fromRangeStart(oe);return we=Lr(S.getBody()).next(we),we?.toRange()})(I))?z.add(Q,z.create("br",re?{}:{"data-mce-bogus":"1"})):(I=P,z.remove(Q))}W.setRng(I)})(e,a.get("mce_marker")),E=e.getBody(),le.each(E.getElementsByTagName("*"),S=>{S.removeAttribute("data-mce-fragment")}),((S,A,N)=>{k.from(S.getParent(A,"td,th")).map(B).each(R=>{return P=N,void Ko(M=R).each(z=>{Mn(z).each(W=>{P.isBlock(mt(M))&&ma(z)&&P.isBlock(mt(W))&&Ye(z)})});var M,P})})(a,s.getStart(),e.schema),((S,A,N)=>{const R=xs(B(N),M=>Fe(M,B(A)));$s(R,R.length-2).filter(Un).fold(()=>_u(S,A),M=>_u(S,M.dom))})(e.schema,e.getBody(),s.getStart()),t},cd=e=>e instanceof qn,Em=(e,t,n)=>{var o;e.dom.setHTML(e.getBody(),t),!0!==n&&di(o=e)&&jn(o.getBody()).each(r=>{const s=r.getNode(),a=Rr(s)?jn(s).getOr(r):r;o.selection.setRng(a.toRange())})},my=e=>bt(e)?e:vt,Sm=(e,t,n)=>{const o=t(e),r=my(n);return o.orThunk(()=>r(e)?k.none():((s,a,i)=>{let l=s.dom;const c=my(i);for(;l.parentNode;){l=l.parentNode;const u=B(l),f=a(u);if(f.isSome())return f;if(c(u))break}return k.none()})(e,t,r))},km=Tf,py=(e,t,n)=>{const o=e.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(Po(s)&&!1===s.inherit&&e.dom.is(t,s.selector))return!0}return!1},_m=(e,t,n,o,r)=>{const s=e.dom.getRoot();if(t===s)return!1;const a=e.dom.getParent(t,i=>!!py(e,i,n)||i.parentNode===s||!!Ir(e,i,n,o,!0));return!!Ir(e,a,n,o,r)},dd=(e,t,n)=>!(!ln(n)||!km(t,n.inline))||!(!Mr(n)||!km(t,n.block))||!!Po(n)&&_e(t)&&e.is(t,n.selector),gy=(e,t,n,o,r,s)=>{const a=n[o],i="attributes"===o;if(bt(n.onmatch))return n.onmatch(t,n,o);if(a)if(rc(a)){for(let l=0;l<a.length;l++)if(i?e.getAttrib(t,a[l]):qc(e,t,a[l]))return!0}else for(const l in a)if(je(a,l)){const c=i?e.getAttrib(t,l):qc(e,t,l),u=Bs(a[l],s),f=wt(c)||vs(c);if(f&&wt(u))continue;if(r&&f&&!n.exact||(!r||n.exact)&&!km(c,Rf(u,l)))return!1}return!0},Ir=(e,t,n,o,r)=>{const s=e.formatter.get(n),a=e.dom;if(s&&_e(t))for(let i=0;i<s.length;i++){const l=s[i];if(dd(e.dom,t,l)&&gy(a,t,l,"attributes",r,o)&&gy(a,t,l,"styles",r,o)){const c=l.classes;if(c)for(let u=0;u<c.length;u++)if(!e.dom.hasClass(t,Bs(c[u],o)))return;return l}}},Nm=(e,t,n,o,r)=>{if(o)return _m(e,o,t,n,r);if(o=e.selection.getNode(),_m(e,o,t,n,r))return!0;const s=e.selection.getStart();return!(s===o||!_m(e,s,t,n,r))},Nl=gn,hy=e=>{if(e){const t=new mn(e,e);for(let n=t.current();n;n=t.next())if(se(n))return n}return null},Am=e=>{const t=Pe("span");return or(t,{id:vf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ee(t,lt(Nl)),t},Tm=(e,t,n)=>{const o=e.dom,r=e.selection;if(sb(t))Ea(e,!1,B(t),n,!0);else{const s=r.getRng(),a=o.getParent(t,o.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,u=s.endOffset,f=(p=>{const b=hy(p);return b&&b.data.charAt(0)===Nl&&b.deleteData(0,1),b})(t);o.remove(t,!0),i===f&&l>0&&s.setStart(f,l-1),c===f&&u>0&&s.setEnd(f,u-1),a&&o.isEmpty(a)&&Ns(B(a)),r.setRng(s)}},Rm=(e,t,n)=>{const o=e.dom,r=e.selection;if(t)Tm(e,t,n);else if(!(t=va(e.getBody(),r.getStart())))for(;t=o.get(vf);)Tm(e,t,n)},by=(e,t)=>(e.appendChild(t),t),vy=(e,t)=>{var n;const o=Vr(e,(s,a)=>by(s,a.cloneNode(!1)),t),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return by(o,r.createTextNode(Nl))},yy=e=>Eh(e,tl(e).replace(new RegExp(`${an}$`)," ")),Cy=(e,t)=>{const n=()=>{null===t||e.dom.isEmpty(t)||Mn(B(t)).each(o=>{Cn(o)?yy(o):Ua(o,r=>Cn(r)).each(r=>{Cn(r)&&yy(r)})})};e.once("input",o=>{o.data&&!ya(o.data)&&(o.isComposing?e.once("compositionend",()=>{n()}):n())})},wy=e=>{const t=Am(!1),n=vy(e,t.dom);return{caretContainer:t,caretPosition:G(n,0)}},xy=(e,t)=>{const{caretContainer:n,caretPosition:o}=wy(t);return Oe(B(e),n),Ye(B(e)),o},Ey=(e,t)=>{if(Bo(t.dom))return!1;const n=e.schema.getTextInlineElements();return je(n,mt(t))&&!Bo(t.dom)&&!ra(t.dom)},Al={},Sy=dr(["pre"]);(e=>{Al[e]||(Al[e]=[]),Al[e].push(n=>{if(!n.selection.getRng().collapsed){const o=n.selection.getSelectedBlocks(),r=We(We(o,Sy),(s=>a=>{const i=a.previousSibling;return Sy(i)&&Re(s,i)})(o));J(r,s=>{((a,i)=>{const l=B(i),c=It(l).dom;Ye(l),ct(B(a),[Pe("br",c),Pe("br",c),...xt(l)])})(s.previousSibling,s)})}})})("pre");const ky=["fontWeight","fontStyle","color","fontSize","fontFamily"],_y=(e,t)=>{const n=e.get(t);return ae(n)?Yt(n,o=>{return ln(o)&&"span"===o.inline&&Ve((r=o).styles)&&St(rn(r.styles),s=>Re(ky,s));var r}):k.none()},Ny=(e,t)=>uo(t,G.fromRangeStart(e)).isNone(),Ay=(e,t)=>!1===to(t,G.fromRangeEnd(e)).exists(n=>!Ht(n.getNode())||to(t,n).isSome()),Ty=e=>t=>JS(t)&&e.isEditable(t),Ry=e=>We(e.getSelectedBlocks(),Ty(e.dom)),Om=le.each,Bm=e=>_e(e)&&!Do(e)&&!Bo(e)&&!ra(e),Oy=(e,t)=>{for(let n=e;n;n=n[t]){if(se(n)&&So(n.data))return e;if(_e(n)&&!Do(n))return n}return e},By=(e,t,n)=>{const o=gm(e),r=ns(t)&&e.dom.isEditable(t),s=ns(n)&&e.dom.isEditable(n);if(r&&s){const a=Oy(t,"previousSibling"),i=Oy(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return e.dom.remove(i),le.each(le.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},Dy=(e,t,n,o)=>{var r;if(o&&!1!==t.merge_siblings){const s=null!==(r=By(e,nb(o),o))&&void 0!==r?r:o;By(e,s,nb(s,!0))}},Dm=(e,t,n)=>{Om(e.childNodes,o=>{Bm(o)&&(t(o)&&n(o),o.hasChildNodes()&&Dm(o,t,n))})},Py=(e,t)=>n=>!(!n||!qc(e,n,t)),Ly=(e,t,n)=>o=>{var r,s;e.setStyle(o,t,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=e,"SPAN"===(s=o).nodeName&&0===r.getAttribs(s).length&&r.remove(s,!0)},_a=Br([{keep:[]},{rename:["name"]},{removed:[]}]),AA=/^(src|href|style)$/,Pm=le.each,ud=Tf,My=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),Iy=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"];if(_e(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return se(o)&&n&&r>=o.data.length&&(o=new mn(o,e.getBody()).next()||o),se(o)&&!n&&0===r&&(o=new mn(o,e.getBody()).prev()||o),o},Fy=(e,t)=>{const n=t?"firstChild":"lastChild",o=e[n];return/^(TR|TH|TD)$/.test(e.nodeName)&&o?"TR"===e.nodeName&&o[n]||o:e},Lm=(e,t,n,o)=>{var r;const s=e.create(n,o);return null===(r=t.parentNode)||void 0===r||r.insertBefore(s,t),s.appendChild(t),s},jy=(e,t,n,o,r)=>{const s=B(t),a=B(e.create(o,r)),i=n?io(s):Jr(s);return ct(a,i),n?(Oe(s,a),Qe(a,s)):(Ie(s,a),Ee(a,s)),a.dom},zy=(e,t,n)=>{const o=t.parentNode;let r;const s=e.dom,a=Fn(e);var i;Mr(n)&&o===s.getRoot()&&(n.list_block&&ud(t,n.list_block)||J(vn(t.childNodes),i=>{ai(e,a,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=Lm(s,i,a),s.setAttribs(r,il(e))):r=null})),Po(i=n)&&ln(i)&&Ar(Ot(i,"mixed"),!0)&&!ud(n.inline,t)||s.remove(t,!0)},Uy=(e,t,n)=>w(e)?{name:t,value:null}:{name:e,value:Bs(t,n)},Hy=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},qy=(e,t,n,o,r)=>{let s=!1;Pm(n.styles,(a,i)=>{const{name:l,value:c}=Uy(i,a,o),u=Rf(c,l);(n.remove_similar||Ze(c)||!_e(r)||ud(qc(e,r,l),u))&&e.setStyle(t,l,""),s=!0}),s&&Hy(e,t)},$y=(e,t,n,o,r)=>{const s=e.dom,a=gm(e),i=e.schema;if(ln(t)&&Au(i,t.inline)&&aa(i,o)&&o.parentElement===e.getBody())return zy(e,o,t),_a.removed();if(!t.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o)||o&&!dd(s,o,t)&&(!t.links||"A"!==o.nodeName))return _a.keep();const l=o,c=t.preserve_attributes;if(ln(t)&&"all"===t.remove&&ae(c)){const u=We(s.getAttribs(l),f=>Re(c,f.name.toLowerCase()));if(s.removeAllAttribs(l),J(u,f=>s.setAttrib(l,f.name,f.value)),u.length>0)return _a.rename("span")}if("all"!==t.remove){qy(s,l,t,n,r),Pm(t.attributes,(f,p)=>{const{name:b,value:g}=Uy(p,f,n);if(t.remove_similar||Ze(g)||!_e(r)||ud(s.getAttrib(r,b),g)){if("class"===b){const v=s.getAttrib(l,b);if(v){let h="";if(J(v.split(/\s+/),y=>{/mce\-\w+/.test(y)&&(h+=(h?" ":"")+y)}),h)return void s.setAttrib(l,b,h)}}if(AA.test(b)&&l.removeAttribute("data-mce-"+b),"style"===b&&dr(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(b),void s.setStyle(l,"list-style-type","none");"class"===b&&l.removeAttribute("className"),l.removeAttribute(b)}}),Pm(t.classes,f=>{f=Bs(f,n),_e(r)&&!s.hasClass(r,f)||s.removeClass(l,f)});const u=s.getAttribs(l);for(let f=0;f<u.length;f++)if(!a.isAttributeInternal(u[f].nodeName))return _a.keep()}return"none"!==t.remove?(zy(e,l,t),_a.removed()):_a.keep()},TA=(e,t,n,o)=>$y(e,t,n,o,o).fold(me(o),r=>(e.dom.createFragment().appendChild(o),e.dom.rename(o,r)),me(null)),Wy=(e,t,n,o,r)=>{(o||e.selection.isEditable())&&((s,a,i,l,c)=>{const u=s.formatter.get(a),f=u[0],p=s.dom,b=s.selection,g=S=>{const A=((N,R,M,P,z)=>{let W;return R.parentNode&&J($c(N.dom,R.parentNode).reverse(),D=>{if(!W&&_e(D)&&"_start"!==D.id&&"_end"!==D.id){const I=Ir(N,D,M,P,z);I&&!1!==I.split&&(W=D)}}),W})(s,S,a,i,c);return((N,R,M,P,z,W,D,I)=>{var j,Q;let re,oe;const we=N.dom;if(M){const Ae=M.parentNode;for(let Be=P.parentNode;Be&&Be!==Ae;Be=Be.parentNode){let Le=we.clone(Be,!1);for(let ge=0;ge<R.length&&(Le=TA(N,R[ge],I,Le),null!==Le);ge++);Le&&(re&&Le.appendChild(re),oe||(oe=Le),re=Le)}D.mixed&&we.isBlock(M)||(P=null!==(j=we.split(M,P))&&void 0!==j?j:P),re&&oe&&(null===(Q=z.parentNode)||void 0===Q||Q.insertBefore(re,z),oe.appendChild(z),ln(D)&&Dy(N,D,0,re))}return P})(s,u,A,S,S,0,f,i)},v=S=>St(u,A=>Tl(s,A,i,S,S)),h=S=>{const A=vn(S.childNodes),N=v(S)||St(u,M=>dd(p,S,M)),R=S.parentNode;if(!N&&ce(R)&&Bf(f)&&v(R),f.deep&&A.length)for(let M=0;M<A.length;M++)h(A[M]);J(["underline","line-through","overline"],M=>{_e(S)&&s.dom.getStyle(S,"text-decoration")===M&&S.parentNode&&rb(p,S.parentNode)===M&&Tl(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:M}},void 0,S)})},y=S=>{const A=p.get(S?"_start":"_end");if(A){let N=A[S?"firstChild":"lastChild"];return Do(R=N)&&_e(R)&&("_start"===R.id||"_end"===R.id)&&(N=N[S?"firstChild":"lastChild"]),se(N)&&0===N.data.length&&(N=S?A.previousSibling||A.nextSibling:A.nextSibling||A.previousSibling),p.remove(A,!0),N}var R;return null},E=S=>{let A,N,R=Ca(p,S,u,S.collapsed);if(f.split){if(R=Qc(R),A=Iy(s,R,!0),N=Iy(s,R),A!==N){if(A=Fy(A,!0),N=Fy(N,!1),My(p,A,N)){const P=k.from(A.firstChild).getOr(A);return g(jy(p,P,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void y(!0)}if(My(p,N,A)){const P=k.from(N.lastChild).getOr(N);return g(jy(p,P,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void y(!1)}A=Lm(p,A,"span",{id:"_start","data-mce-type":"bookmark"}),N=Lm(p,N,"span",{id:"_end","data-mce-type":"bookmark"});const M=p.createRng();M.setStartAfter(A),M.setEndBefore(N),bl(p,M,P=>{J(P,z=>{Do(z)||Do(z.parentNode)||g(z)})}),g(A),g(N),A=y(!0),N=y()}else A=N=g(A);R.startContainer=A.parentNode?A.parentNode:A,R.startOffset=p.nodeIndex(A),R.endContainer=N.parentNode?N.parentNode:N,R.endOffset=p.nodeIndex(N)+1}bl(p,R,M=>{J(M,h)})};if(l){if(hl(l)){const S=p.createRng();S.setStartBefore(l),S.setEndAfter(l),E(S)}else E(l);wb(s,a,l,i)}else b.isCollapsed()&&ln(f)&&!si(s).length?((e,t,n,o)=>{const r=e.dom,s=e.selection;let a=!1;const i=e.formatter.get(t);if(!i)return;const l=s.getRng(),c=l.startContainer,u=l.startOffset;let f=c;se(c)&&(u!==c.data.length&&(a=!0),f=f.parentNode);const p=[];let b;for(;f;){if(Ir(e,f,t,n,o)){b=f;break}f.nextSibling&&(a=!0),p.push(f),f=f.parentNode}if(b)if(a){const g=s.getBookmark();l.collapse(!0);let v=Ca(r,l,i,!0);v=Qc(v),e.formatter.remove(t,n,v,o),s.moveToBookmark(g)}else{const g=va(e.getBody(),b),v=ce(g)?r.getParents(b.parentNode,Ut,g):[],h=Am(!1).dom;((S,A,N)=>{var R,M;const P=S.dom,z=P.getParent(N,xe(Nf,S.schema));z&&P.isEmpty(z)?null===(R=N.parentNode)||void 0===R||R.replaceChild(A,N):((W=>{const D=Jn(W,"br"),I=We((j=>{const Q=[];let re=j.dom;for(;re;)Q.push(B(re)),re=re.lastChild;return Q})(W).slice(-1),ma);D.length===I.length&&J(I,Ye)})(B(N)),P.isEmpty(N)?null===(M=N.parentNode)||void 0===M||M.replaceChild(A,N):P.insertAfter(A,N))})(e,h,g??b);const y=((S,A,N,R,M,P)=>{const z=S.formatter,W=S.dom,D=We(rn(z.get()),j=>j!==R&&!un(j,"removeformat")),I=(j=S,Q=N,bn(D,(oe,we)=>{const Ae=Of(j,we,ge=>{const Se=F=>bt(F)||F.length>1&&"%"===F.charAt(0);return St(["styles","attributes"],F=>Ot(ge,F).exists(U=>{const Y=ae(U)?U:Pa(U);return St(Y,Se)}))});return j.formatter.matchNode(Q,we,{},Ae)?oe.concat([we]):oe},[]));var j,Q;if(We(I,j=>!((Q,re,oe)=>{const we=["inline","block","selector","attributes","styles","classes"],Ae=Be=>kr(Be,(Le,ge)=>St(we,Se=>Se===ge));return Of(Q,re,Be=>{const Le=Ae(Be);return Of(Q,oe,ge=>{const Se=Ae(ge);return((F,U,Y=Kt)=>it(Y).eq(F,U))(Le,Se)})})})(S,j,R)).length>0){const j=N.cloneNode(!1);return W.add(A,j),z.remove(R,M,j,P),W.remove(j),k.some(j)}return k.none()})(e,h,b,t,n,o),E=vy([...p,...y.toArray(),...v],h);g&&Tm(e,g,ce(g)),s.setCursorLocation(E,1),Cy(e,h),r.isEmpty(b)&&r.remove(b)}})(s,a,i,c):(tb(s,()=>kf(s,E),S=>ln(f)&&Nm(s,a,i,S)),s.nodeChanged()),S=s,N=i,"removeformat"===(A=a)?J(Ry(S.selection),R=>{J(ky,M=>S.dom.setStyle(R,M,"")),Hy(S.dom,R)}):_y(S.formatter,A).each(R=>{J(Ry(S.selection),M=>qy(S.dom,M,R,N,null))}),wb(s,a,l,i);var S,A,N})(e,t,n,o,r)},Tl=(e,t,n,o,r)=>$y(e,t,n,o,r).fold(vt,s=>(e.dom.rename(o,s),!0),Ut),Vy=le.each,fd=le.each,Ky=(e,t,n,o)=>{if(fd(n.styles,(r,s)=>{e.setStyle(t,s,Bs(r,o))}),n.styles){const r=e.getAttrib(t,"style");r&&e.setAttrib(t,"data-mce-style",r)}},RA=(e,t,n,o)=>{const r=e.formatter.get(t),s=r[0],a=!o&&e.selection.isCollapsed(),i=e.dom,l=e.selection,c=(g,v=s)=>{bt(v.onformat)&&v.onformat(g,v,n,o),Ky(i,g,v,n),fd(v.attributes,(h,y)=>{i.setAttrib(g,y,Bs(h,n))}),fd(v.classes,h=>{const y=Bs(h,n);i.hasClass(g,y)||i.addClass(g,y)})},u=(g,v)=>{let h=!1;return fd(g,y=>!(!Po(y)||("false"!==i.getContentEditable(v)||y.ceFalseOverride)&&(!ce(y.collapsed)||y.collapsed===a)&&i.is(v,y.selector)&&!Bo(v)&&(c(v,y),h=!0,1))),h},p=(g,v,h)=>{const y=[];let E=!0;const S=s.inline||s.block,A=(g=>{if(Te(g)){const v=i.create(g);return c(v),v}return null})(S);bl(g,v,N=>{let R;const M=P=>{let z=!1,W=E,D=!1;const I=P.parentNode,j=I.nodeName.toLowerCase(),Q=g.getContentEditable(P);ce(Q)&&(W=E,E="true"===Q,z=!0,D=ob(e,P));const re=E&&!z;if(Ht(P)&&!((oe,we,Ae,Be)=>{if(h_(oe)&&ln(we)&&Ae.parentNode){const Le=oh(oe.schema),ge=((e,t)=>((n,o)=>{const r=n.dom;return r.parentNode?(s=B(r.parentNode),Yt(s.dom.childNodes,i=>(s=>!Fe(n,s)&&o(s))(B(i))).map(B)):k.none();var s})(e,t).isSome())(B(Ae),Se=>Bo(Se.dom));return dn(Le,Be)&&os(oe.schema,Ae.parentNode,{skipBogus:!1,includeZwsp:!0})&&!ge}return!1})(e,s,P,j))return R=null,void(Mr(s)&&g.remove(P));if(oe=P,Mr(we=s)&&!0===we.wrapper&&Ir(e,oe,t,n))R=null;else{if(((oe,we,Ae)=>{const Be=Mr(Le=s)&&!0!==Le.wrapper&&Nf(e.schema,oe)&&ai(e,we,S);var Le;return Ae&&Be})(P,j,re)){const oe=g.rename(P,S);return c(oe),y.push(oe),void(R=null)}if(Po(s)){let oe=u(r,P);if(!oe&&ce(I)&&Bf(s)&&(oe=u(r,I)),!ln(s)||oe)return void(R=null)}ce(A)&&((oe,we,Ae,Be)=>{const Le=oe.nodeName.toLowerCase(),ge=ai(e,S,Le)&&ai(e,we,S),Se=!h&&se(oe)&&_c(oe.data),F=Bo(oe),U=!ln(s)||!g.isBlock(oe);return(Ae||Be)&&ge&&!Se&&!F&&U})(P,j,re,D)?(R||(R=g.clone(A,!1),I.insertBefore(R,P),y.push(R)),D&&z&&(E=W),R.appendChild(P)):(R=null,J(vn(P.childNodes),M),z&&(E=W),R=null)}var oe,we};J(N,M)}),!0===s.links&&J(y,N=>{const R=M=>{"A"===M.nodeName&&c(M,s),J(vn(M.childNodes),R)};R(N)}),J(y,N=>{const R=(M=>{let P=0;return J(M.childNodes,z=>{var W;ce(W=z)&&se(W)&&0===W.length||Do(z)||P++}),P})(N);var M;!(y.length>1)&&g.isBlock(N)||0!==R?(ln(s)||Mr(s)&&s.wrapper)&&(s.exact||1!==R||(N=Yt((M=N).childNodes,_f).filter(z=>"false"!==g.getContentEditable(z)&&dd(g,z,s)).map(z=>{const W=g.clone(z,!1);return c(W),g.replace(W,M,!0),g.remove(z,!0),W}).getOr(M)),((M,P,z,W)=>{Vy(P,D=>{var I,j,Q;ln(D)&&Vy(M.dom.select(D.inline,W),I=>{Bm(I)&&Tl(M,D,z,I,D.exact?I:null)}),I=M.dom,Q=W,(j=D).clear_child_styles&&Om(I.select(j.links?"*:not(a)":"*",Q),oe=>{Bm(oe)&&I.isEditable(oe)&&Om(j.styles,(we,Ae)=>{I.setStyle(oe,Ae,"")})})})})(e,r,n,N),((M,P,z,W,D)=>{const I=D.parentNode;Ir(M,I,z,W)&&Tl(M,P,W,D)||P.merge_with_parents&&I&&M.dom.getParent(I,j=>!!Ir(M,j,z,W)&&(Tl(M,P,W,D),!0))})(e,s,t,n,N),((M,P,z,W)=>{if(P.styles&&P.styles.backgroundColor){const D=Py(M,"fontSize");Dm(W,I=>D(I)&&M.isEditable(I),Ly(M,"backgroundColor",Bs(P.styles.backgroundColor,z)))}})(g,s,n,N),((M,P,z,W)=>{const D=I=>{if(ns(I)&&_e(I.parentNode)&&M.isEditable(I)){const j=rb(M,I.parentNode);M.getStyle(I,"color")&&j?M.setStyle(I,"text-decoration",j):M.getStyle(I,"text-decoration")===j&&M.setStyle(I,"text-decoration",null)}};P.styles&&(P.styles.color||P.styles.textDecoration)&&(le.walk(W,D,"childNodes"),D(W))})(g,s,0,N),((M,P,z,W)=>{if(ln(P)&&("sub"===P.inline||"sup"===P.inline)){const D=Py(M,"fontSize");Dm(W,j=>D(j)&&M.isEditable(j),Ly(M,"fontSize",""));const I=We(M.select("sup"===P.inline?"sub":"sup",W),M.isEditable);M.remove(I,!0)}})(g,s,0,N),Dy(e,s,0,N)):g.remove(N,!0)})},b=hl(o)?o:l.getNode();if("false"===i.getContentEditable(b)&&!ob(e,b))return u(r,o=b),void Cb(e,t,o,n);if(s){if(o)if(hl(o)){if(!u(r,o)){const g=i.createRng();g.setStartBefore(o),g.setEndAfter(o),p(i,Ca(i,g,r),!0)}}else p(i,o,!0);else a&&ln(s)&&!si(e).length?((g,v,h)=>{let y;const E=g.selection,S=g.formatter.get(v);if(!S)return;const A=E.getRng();let N=A.startOffset;const R=A.startContainer.nodeValue;y=va(g.getBody(),E.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(R&&N>0&&N<R.length&&M.test(R.charAt(N))&&M.test(R.charAt(N-1))){const W=E.getBookmark();A.collapse(!0);let D=Ca(g.dom,A,S);D=Qc(D),g.formatter.apply(v,h,D),E.moveToBookmark(W)}else{let W=y?hy(y):null;y&&W?.data===Nl||(P=g.getDoc(),z=Am(!0).dom,y=P.importNode(z,!0),W=y.firstChild,A.insertNode(y),N=1,Cy(g,y)),g.formatter.apply(v,h,y),E.setCursorLocation(W,N)}var P,z})(e,t,n):(l.setRng(Cm(l.getRng())),tb(e,()=>{kf(e,(g,v)=>{const h=v?g:Ca(i,g,r);p(i,h,!1)})},Ut),e.nodeChanged()),_y(e.formatter,t).each(g=>{var v;J(We((h=>{const y=h.getSelectedBlocks(),E=h.getRng();if(h.isCollapsed())return[];if(1===y.length)return Ny(E,y[0])&&Ay(E,y[0])?y:[];{const S=En(y).filter(R=>Ny(E,R)).toArray(),A=tr(y).filter(R=>Ay(E,R)).toArray(),N=y.slice(1,-1);return S.concat(N).concat(A)}})(v=e.selection),Ty(v.dom)),v=>Ky(i,v,g,n))});v=e,je(Al,g=t)&&J(Al[g],h=>{h(v)})}var g,v;Cb(e,t,o,n)},Xy=(e,t,n,o)=>{(o||e.selection.isEditable())&&RA(e,t,n,o)},Yy=e=>je(e,"vars"),Gy=e=>e.selection.getStart(),Qy=(e,t,n,o,r)=>$o(t,s=>{const a=e.formatter.matchNode(s,n,r??{},o);return!jt(a)},s=>!!py(e,s,n)||!o&&ce(e.formatter.matchNode(s,n,r,!0))),Zy=(e,t)=>{const n=t??Gy(e);return We($c(e.dom,n),o=>_e(o)&&!ra(o))},Jy=(e,t,n)=>{const o=Zy(e,t);yt(n,(r,s)=>{const a=i=>{const l=Qy(e,o,s,i.similar,Yy(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const u=l.getOr(t);Yy(i)?i.callback(c,{node:u,format:s,parents:o}):J(i.callbacks,f=>f(c,{node:u,format:s,parents:o}))}};J([r.withSimilar,r.withoutSimilar],a),J(r.withVars,a)})},eC=le.explode,tC=()=>{const e={};return{addFilter:(t,n)=>{J(eC(t),o=>{je(e,o)||(e[o]={name:o,callbacks:[]}),e[o].callbacks.push(n)})},getFilters:()=>Pa(e),removeFilter:(t,n)=>{J(eC(t),o=>{if(je(e,o))if(ce(n)){const r=e[o],s=We(r.callbacks,a=>a!==n);s.length>0?r.callbacks=s:delete e[o]}else delete e[o]})}}},Mm=e=>{const[t,...n]=e.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(r){const s=";base64"===r[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(o):decodeURIComponent(o);return k.some({type:r[1],data:a,base64Encoded:s})}return k.none()},nC=(e,t,n=!0)=>{let o=t;if(n)try{o=atob(t)}catch{return k.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return k.some(new Blob([r],{type:e}))},oC=e=>new Promise((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(e)});let BA=0;const rC=(e,t,n)=>Mm(e).bind(({data:o,type:r,base64Encoded:s})=>{if(t&&!s)return k.none();{const a=s?o:btoa(o);return n(a,r)}}),sC=(e,t,n)=>{const o=e.create("blobid"+BA++,t,n);return e.add(o),o},aC=(e,t,n=!1)=>rC(t,n,(o,r)=>k.from(e.getByData(o,r)).orThunk(()=>nC(r,o).map(s=>sC(e,s,o)))),DA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,PA=e=>k.from(e.match(DA)).bind(t=>$s(t,1)).map(t=>Vt(t,"www.")?t.substring(4):t),iC=(e,t)=>{k.from(e.attr("src")).bind(PA).forall(n=>!Re(t,n))&&e.attr("sandbox","")},Im=(e,t)=>Vt(e,`${t}/`),{entries:lC,setPrototypeOf:cC,isFrozen:LA,getPrototypeOf:MA,getOwnPropertyDescriptor:IA}=Object;let{freeze:fo,seal:Qo,create:dC}=Object,{apply:Fm,construct:jm}=typeof Reflect<"u"&&Reflect;fo||(fo=function(e){return e}),Qo||(Qo=function(e){return e}),Fm||(Fm=function(e,t,n){return e.apply(t,n)}),jm||(jm=function(e,t){return new e(...t)});const md=Io(Array.prototype.forEach),uC=Io(Array.prototype.pop),Rl=Io(Array.prototype.push),pd=Io(String.prototype.toLowerCase),zm=Io(String.prototype.toString),fC=Io(String.prototype.match),Ol=Io(String.prototype.replace),FA=Io(String.prototype.indexOf),jA=Io(String.prototype.trim),gr=Io(Object.prototype.hasOwnProperty),mo=Io(RegExp.prototype.test),Bl=(mC=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jm(mC,t)});var mC;function Io(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Fm(e,t,o)}}function Et(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pd;cC&&cC(e,null);let o=t.length;for(;o--;){let r=t[o];if("string"==typeof r){const s=n(r);s!==r&&(LA(t)||(t[o]=s),r=s)}e[r]=!0}return e}function zA(e){for(let t=0;t<e.length;t++)gr(e,t)||(e[t]=null);return e}function Na(e){const t=dC(null);for(const[n,o]of lC(e))gr(e,n)&&(t[n]=Array.isArray(o)?zA(o):o&&"object"==typeof o&&o.constructor===Object?Na(o):o);return t}function Dl(e,t){for(;null!==e;){const n=IA(e,t);if(n){if(n.get)return Io(n.get);if("function"==typeof n.value)return Io(n.value)}e=MA(e)}return function(){return null}}const pC=fo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Um=fo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Hm=fo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),UA=fo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qm=fo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),HA=fo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gC=fo(["#text"]),hC=fo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),$m=fo(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),bC=fo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gd=fo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),qA=Qo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$A=Qo(/<%[\w\W]*|[\w\W]*%>/gm),WA=Qo(/\${[\w\W]*}/gm),VA=Qo(/^data-[\-\w.\u00B7-\uFFFF]/),KA=Qo(/^aria-[\-\w]+$/),vC=Qo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),XA=Qo(/^(?:\w+script|data):/i),YA=Qo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),yC=Qo(/^html$/i),GA=Qo(/^[a-z][.\w]*(-[.\w]+)+$/i);var CC=Object.freeze({__proto__:null,MUSTACHE_EXPR:qA,ERB_EXPR:$A,TMPLIT_EXPR:WA,DATA_ATTR:VA,ARIA_ATTR:KA,IS_ALLOWED_URI:vC,IS_SCRIPT_OR_DATA:XA,ATTR_WHITESPACE:YA,DOCTYPE_NAME:yC,CUSTOM_ELEMENT:GA}),Wm=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=$=>e($);if(n.version="3.1.7",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;let{document:o}=t;const r=o,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:c,NodeFilter:u,NamedNodeMap:f=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:b,trustedTypes:g}=t,v=c.prototype,h=Dl(v,"cloneNode"),y=Dl(v,"remove"),E=Dl(v,"nextSibling"),S=Dl(v,"childNodes"),A=Dl(v,"parentNode");if("function"==typeof i){const $=o.createElement("template");$.content&&$.content.ownerDocument&&(o=$.content.ownerDocument)}let N,R="";const{implementation:M,createNodeIterator:P,createDocumentFragment:z,getElementsByTagName:W}=o,{importNode:D}=r;let I={};n.isSupported="function"==typeof lC&&"function"==typeof A&&M&&void 0!==M.createHTMLDocument;const{MUSTACHE_EXPR:j,ERB_EXPR:Q,TMPLIT_EXPR:re,DATA_ATTR:oe,ARIA_ATTR:we,IS_SCRIPT_OR_DATA:Ae,ATTR_WHITESPACE:Be,CUSTOM_ELEMENT:Le}=CC;let{IS_ALLOWED_URI:ge}=CC,Se=null;const F=Et({},[...pC,...Um,...Hm,...qm,...gC]);let U=null;const Y=Et({},[...hC,...$m,...bC,...gd]);let X=Object.seal(dC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),pe=null,de=null,De=!0,ze=!0,Je=!1,Lt=!0,Mt=!1,wo=!0,ve=!1,tt=!1,dt=!1,Ke=!1,ht=!1,Tt=!1,he=!0,Ue=!1,_t=!0,Nt=!1,Wt={},wn=null;const br=Et({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let zn=null;const Uo=Et({},["audio","video","img","source","image","track"]);let cn=null;const Da=Et({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),zs="http://www.w3.org/1998/Math/MathML",Hr="http://www.w3.org/2000/svg",Ho="http://www.w3.org/1999/xhtml";let Us=Ho,ds=!1,qr=null;const lu=Et({},[zs,Hr,Ho],zm);let oo=null;const Ni=["application/xhtml+xml","text/html"];let Qt=null,us=null;const $B=o.createElement("form"),DS=function($){return $ instanceof RegExp||$ instanceof Function},kg=function(){let $=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!us||us!==$){if($&&"object"==typeof $||($={}),$=Na($),oo=-1===Ni.indexOf($.PARSER_MEDIA_TYPE)?"text/html":$.PARSER_MEDIA_TYPE,Qt="application/xhtml+xml"===oo?zm:pd,Se=gr($,"ALLOWED_TAGS")?Et({},$.ALLOWED_TAGS,Qt):F,U=gr($,"ALLOWED_ATTR")?Et({},$.ALLOWED_ATTR,Qt):Y,qr=gr($,"ALLOWED_NAMESPACES")?Et({},$.ALLOWED_NAMESPACES,zm):lu,cn=gr($,"ADD_URI_SAFE_ATTR")?Et(Na(Da),$.ADD_URI_SAFE_ATTR,Qt):Da,zn=gr($,"ADD_DATA_URI_TAGS")?Et(Na(Uo),$.ADD_DATA_URI_TAGS,Qt):Uo,wn=gr($,"FORBID_CONTENTS")?Et({},$.FORBID_CONTENTS,Qt):br,pe=gr($,"FORBID_TAGS")?Et({},$.FORBID_TAGS,Qt):{},de=gr($,"FORBID_ATTR")?Et({},$.FORBID_ATTR,Qt):{},Wt=!!gr($,"USE_PROFILES")&&$.USE_PROFILES,De=!1!==$.ALLOW_ARIA_ATTR,ze=!1!==$.ALLOW_DATA_ATTR,Je=$.ALLOW_UNKNOWN_PROTOCOLS||!1,Lt=!1!==$.ALLOW_SELF_CLOSE_IN_ATTR,Mt=$.SAFE_FOR_TEMPLATES||!1,wo=!1!==$.SAFE_FOR_XML,ve=$.WHOLE_DOCUMENT||!1,Ke=$.RETURN_DOM||!1,ht=$.RETURN_DOM_FRAGMENT||!1,Tt=$.RETURN_TRUSTED_TYPE||!1,dt=$.FORCE_BODY||!1,he=!1!==$.SANITIZE_DOM,Ue=$.SANITIZE_NAMED_PROPS||!1,_t=!1!==$.KEEP_CONTENT,Nt=$.IN_PLACE||!1,ge=$.ALLOWED_URI_REGEXP||vC,Us=$.NAMESPACE||Ho,X=$.CUSTOM_ELEMENT_HANDLING||{},$.CUSTOM_ELEMENT_HANDLING&&DS($.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$.CUSTOM_ELEMENT_HANDLING&&DS($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(X.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Mt&&(ze=!1),ht&&(Ke=!0),Wt&&(Se=Et({},gC),U=[],!0===Wt.html&&(Et(Se,pC),Et(U,hC)),!0===Wt.svg&&(Et(Se,Um),Et(U,$m),Et(U,gd)),!0===Wt.svgFilters&&(Et(Se,Hm),Et(U,$m),Et(U,gd)),!0===Wt.mathMl&&(Et(Se,qm),Et(U,bC),Et(U,gd))),$.ADD_TAGS&&(Se===F&&(Se=Na(Se)),Et(Se,$.ADD_TAGS,Qt)),$.ADD_ATTR&&(U===Y&&(U=Na(U)),Et(U,$.ADD_ATTR,Qt)),$.ADD_URI_SAFE_ATTR&&Et(cn,$.ADD_URI_SAFE_ATTR,Qt),$.FORBID_CONTENTS&&(wn===br&&(wn=Na(wn)),Et(wn,$.FORBID_CONTENTS,Qt)),_t&&(Se["#text"]=!0),ve&&Et(Se,["html","head","body"]),Se.table&&(Et(Se,["tbody"]),delete pe.tbody),$.TRUSTED_TYPES_POLICY){if("function"!=typeof $.TRUSTED_TYPES_POLICY.createHTML)throw Bl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof $.TRUSTED_TYPES_POLICY.createScriptURL)throw Bl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=$.TRUSTED_TYPES_POLICY,R=N.createHTML("")}else void 0===N&&(N=function(ot,qe){if("object"!=typeof ot||"function"!=typeof ot.createPolicy)return null;let Rt=null;const Ft="data-tt-policy-suffix";qe&&qe.hasAttribute(Ft)&&(Rt=qe.getAttribute(Ft));const Ct="dompurify"+(Rt?"#"+Rt:"");try{return ot.createPolicy(Ct,{createHTML:Tn=>Tn,createScriptURL:Tn=>Tn})}catch{return console.warn("TrustedTypes policy "+Ct+" could not be created."),null}}(g,s)),null!==N&&"string"==typeof R&&(R=N.createHTML(""));fo&&fo($),us=$}},PS=Et({},["mi","mo","mn","ms","mtext"]),LS=Et({},["annotation-xml"]),WB=Et({},["title","style","font","a","script"]),MS=Et({},[...Um,...Hm,...UA]),IS=Et({},[...qm,...HA]),$r=function($){Rl(n.removed,{element:$});try{A($).removeChild($)}catch{y($)}},tc=function($,ot){try{Rl(n.removed,{attribute:ot.getAttributeNode($),from:ot})}catch{Rl(n.removed,{attribute:null,from:ot})}if(ot.removeAttribute($),"is"===$&&!U[$])if(Ke||ht)try{$r(ot)}catch{}else try{ot.setAttribute($,"")}catch{}},FS=function($){let ot=null,qe=null;if(dt)$="<remove></remove>"+$;else{const Ct=fC($,/^[\r\n\t ]+/);qe=Ct&&Ct[0]}"application/xhtml+xml"===oo&&Us===Ho&&($='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>");const Rt=N?N.createHTML($):$;if(Us===Ho)try{ot=(new b).parseFromString(Rt,oo)}catch{}if(!ot||!ot.documentElement){ot=M.createDocument(Us,"template",null);try{ot.documentElement.innerHTML=ds?R:Rt}catch{}}const Ft=ot.body||ot.documentElement;return $&&qe&&Ft.insertBefore(o.createTextNode(qe),Ft.childNodes[0]||null),Us===Ho?W.call(ot,ve?"html":"body")[0]:ve?ot.documentElement:Ft},jS=function($){return P.call($.ownerDocument||$,$,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},zS=function($){return $ instanceof p&&("string"!=typeof $.nodeName||"string"!=typeof $.textContent||"function"!=typeof $.removeChild||!($.attributes instanceof f)||"function"!=typeof $.removeAttribute||"function"!=typeof $.setAttribute||"string"!=typeof $.namespaceURI||"function"!=typeof $.insertBefore||"function"!=typeof $.hasChildNodes)},US=function($){return"function"==typeof l&&$ instanceof l},fs=function($,ot,qe){I[$]&&md(I[$],Rt=>{Rt.call(n,ot,qe,us)})},HS=function($){let ot=null;if(fs("beforeSanitizeElements",$,null),zS($))return $r($),!0;const qe=Qt($.nodeName);if(fs("uponSanitizeElement",$,{tagName:qe,allowedTags:Se}),$.hasChildNodes()&&!US($.firstElementChild)&&mo(/<[/\w]/g,$.innerHTML)&&mo(/<[/\w]/g,$.textContent)||7===$.nodeType||wo&&8===$.nodeType&&mo(/<[/\w]/g,$.data))return $r($),!0;if(!Se[qe]||pe[qe]){if(!pe[qe]&&$S(qe)&&(X.tagNameCheck instanceof RegExp&&mo(X.tagNameCheck,qe)||X.tagNameCheck instanceof Function&&X.tagNameCheck(qe)))return!1;if(_t&&!wn[qe]){const Rt=A($)||$.parentNode,Ft=S($)||$.childNodes;if(Ft&&Rt)for(let Ct=Ft.length-1;Ct>=0;--Ct){const Tn=h(Ft[Ct],!0);Tn.__removalCount=($.__removalCount||0)+1,Rt.insertBefore(Tn,E($))}}return $r($),!0}return $ instanceof c&&!function(Rt){let Ft=A(Rt);Ft&&Ft.tagName||(Ft={namespaceURI:Us,tagName:"template"});const Ct=pd(Rt.tagName),Tn=pd(Ft.tagName);return!!qr[Rt.namespaceURI]&&(Rt.namespaceURI===Hr?Ft.namespaceURI===Ho?"svg"===Ct:Ft.namespaceURI===zs?"svg"===Ct&&("annotation-xml"===Tn||PS[Tn]):!!MS[Ct]:Rt.namespaceURI===zs?Ft.namespaceURI===Ho?"math"===Ct:Ft.namespaceURI===Hr?"math"===Ct&&LS[Tn]:!!IS[Ct]:Rt.namespaceURI===Ho?!(Ft.namespaceURI===Hr&&!LS[Tn])&&!(Ft.namespaceURI===zs&&!PS[Tn])&&!IS[Ct]&&(WB[Ct]||!MS[Ct]):!("application/xhtml+xml"!==oo||!qr[Rt.namespaceURI]))}($)?($r($),!0):"noscript"!==qe&&"noembed"!==qe&&"noframes"!==qe||!mo(/<\/no(script|embed|frames)/i,$.innerHTML)?(Mt&&3===$.nodeType&&(ot=$.textContent,md([j,Q,re],Rt=>{ot=Ol(ot,Rt," ")}),$.textContent!==ot&&(Rl(n.removed,{element:$.cloneNode()}),$.textContent=ot)),fs("afterSanitizeElements",$,null),!1):($r($),!0)},qS=function($,ot,qe){if(he&&("id"===ot||"name"===ot)&&(qe in o||qe in $B))return!1;if((!ze||de[ot]||!mo(oe,ot))&&(!De||!mo(we,ot)))if(!U[ot]||de[ot]){if(!($S($)&&(X.tagNameCheck instanceof RegExp&&mo(X.tagNameCheck,$)||X.tagNameCheck instanceof Function&&X.tagNameCheck($))&&(X.attributeNameCheck instanceof RegExp&&mo(X.attributeNameCheck,ot)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(ot))||"is"===ot&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&mo(X.tagNameCheck,qe)||X.tagNameCheck instanceof Function&&X.tagNameCheck(qe))))return!1}else if(!cn[ot]&&!mo(ge,Ol(qe,Be,""))&&("src"!==ot&&"xlink:href"!==ot&&"href"!==ot||"script"===$||0!==FA(qe,"data:")||!zn[$])&&(!Je||mo(Ae,Ol(qe,Be,"")))&&qe)return!1;return!0},$S=function($){return"annotation-xml"!==$&&fC($,Le)},WS=function($){fs("beforeSanitizeAttributes",$,null);const{attributes:ot}=$;if(!ot)return;const qe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U};let Rt=ot.length;for(;Rt--;){const Ft=ot[Rt],{name:Ct,namespaceURI:Tn,value:ms}=Ft,Wr=Qt(Ct);let Wn="value"===Ct?ms:jA(ms);const KB=Wn;if(qe.attrName=Wr,qe.attrValue=Wn,qe.keepAttr=!0,qe.forceKeepAttr=void 0,fs("uponSanitizeAttribute",$,qe),Wn=qe.attrValue,qe.forceKeepAttr)continue;if(!qe.keepAttr){tc(Ct,$);continue}if(!Lt&&mo(/\/>/i,Wn)){tc(Ct,$);continue}Mt&&md([j,Q,re],KS=>{Wn=Ol(Wn,KS," ")});const VS=Qt($.nodeName);if(qS(VS,Wr,Wn))if(!Ue||"id"!==Wr&&"name"!==Wr||(tc(Ct,$),Wn="user-content-"+Wn),wo&&mo(/((--!?|])>)|<\/(style|title)/i,Wn))tc(Ct,$);else{if(N&&"object"==typeof g&&"function"==typeof g.getAttributeType&&!Tn)switch(g.getAttributeType(VS,Wr)){case"TrustedHTML":Wn=N.createHTML(Wn);break;case"TrustedScriptURL":Wn=N.createScriptURL(Wn)}if(Wn!==KB)try{Tn?$.setAttributeNS(Tn,Ct,Wn):$.setAttribute(Ct,Wn),zS($)?$r($):uC(n.removed)}catch{}}else tc(Ct,$)}fs("afterSanitizeAttributes",$,null)},VB=function $(ot){let qe=null;const Rt=jS(ot);for(fs("beforeSanitizeShadowDOM",ot,null);qe=Rt.nextNode();)fs("uponSanitizeShadowNode",qe,null),HS(qe)||(qe.content instanceof a&&$(qe.content),WS(qe));fs("afterSanitizeShadowDOM",ot,null)};return n.sanitize=function($){let ot=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},qe=null,Rt=null,Ft=null,Ct=null;if(ds=!$,ds&&($="\x3c!--\x3e"),"string"!=typeof $&&!US($)){if("function"!=typeof $.toString)throw Bl("toString is not a function");if("string"!=typeof($=$.toString()))throw Bl("dirty is not a string, aborting")}if(!n.isSupported)return $;if(tt||kg(ot),n.removed=[],"string"==typeof $&&(Nt=!1),Nt){if($.nodeName){const Wr=Qt($.nodeName);if(!Se[Wr]||pe[Wr])throw Bl("root node is forbidden and cannot be sanitized in-place")}}else if($ instanceof l)qe=FS("\x3c!----\x3e"),Rt=qe.ownerDocument.importNode($,!0),1===Rt.nodeType&&"BODY"===Rt.nodeName||"HTML"===Rt.nodeName?qe=Rt:qe.appendChild(Rt);else{if(!Ke&&!Mt&&!ve&&-1===$.indexOf("<"))return N&&Tt?N.createHTML($):$;if(qe=FS($),!qe)return Ke?null:Tt?R:""}qe&&dt&&$r(qe.firstChild);const Tn=jS(Nt?$:qe);for(;Ft=Tn.nextNode();)HS(Ft)||(Ft.content instanceof a&&VB(Ft.content),WS(Ft));if(Nt)return $;if(Ke){if(ht)for(Ct=z.call(qe.ownerDocument);qe.firstChild;)Ct.appendChild(qe.firstChild);else Ct=qe;return(U.shadowroot||U.shadowrootmode)&&(Ct=D.call(r,Ct,!0)),Ct}let ms=ve?qe.outerHTML:qe.innerHTML;return ve&&Se["!doctype"]&&qe.ownerDocument&&qe.ownerDocument.doctype&&qe.ownerDocument.doctype.name&&mo(yC,qe.ownerDocument.doctype.name)&&(ms="<!DOCTYPE "+qe.ownerDocument.doctype.name+">\n"+ms),Mt&&md([j,Q,re],Wr=>{ms=Ol(ms,Wr," ")}),N&&Tt?N.createHTML(ms):ms},n.setConfig=function(){kg(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),tt=!0},n.clearConfig=function(){us=null,tt=!1},n.isValidAttribute=function($,ot,qe){us||kg({});const Rt=Qt($),Ft=Qt(ot);return qS(Rt,Ft,qe)},n.addHook=function($,ot){"function"==typeof ot&&(I[$]=I[$]||[],Rl(I[$],ot))},n.removeHook=function($){if(I[$])return uC(I[$])},n.removeHooks=function($){I[$]&&(I[$]=[])},n.removeAllHooks=function(){I={}},n}();const wC=le.each,ZA=le.trim,JA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],eT={ftp:21,http:80,https:443,mailto:25},tT=["img","video"],xC=(e,t,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?(s=n,(ce(r=e.allow_svg_data_urls)?!r:!ce(s)||!Re(tT,s))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,s};class Zo{static parseDataUri(t){let n;const o=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(t,n,o={}){if(o.allow_script_urls)return!0;{const r=la.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!xC(o,r,n)}}static getDocumentBaseUrl(t){var n;let o;return o=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(n=t.href)&&void 0!==n?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(t,n={}){this.path="",this.directory="",t=ZA(t),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(r.source=t);const s=0===t.indexOf("//");if(0!==t.indexOf("/")||s||(t=(o&&o.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const i=o?o.path:new Zo(document.location.href).directory;if(""===o?.protocol)t="//mce_host"+r.toAbsPath(i,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);a&&wC(JA,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[i]=c}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;const n=new Zo(t,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(t,n){const o=new Zo(t,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?eT[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let o,r,s=0,a="";const i=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}if(i.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}if(1===s)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(t,n){let o=0;const r=/\/$/.test(n)?"/":"",s=t.split("/"),a=n.split("/"),i=[];wC(s,f=>{f&&i.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)0!==a[f].length&&"."!==a[f]&&(".."!==a[f]?o>0?o--:l.push(a[f]):o++);const c=i.length-o;let u;return u=c<=0?er(l).join("/"):i.slice(0,c).join("/")+"/"+er(l).join("/"),0!==u.indexOf("/")&&(u="/"+u),r&&u.lastIndexOf("/")!==u.length-1&&(u+=r),u}getURI(t=!1){let n;return this.source&&!t||(n="",t||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const nT=le.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Vm="data-mce-type";let EC=0;const SC=(e,t,n,o,r)=>{var s,a,i,l;const c=t.validate,u=n.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(s=e.nodeValue)&&void 0!==s?s:"")&&(e.nodeValue=" "+e.nodeValue);const f=null!==(a=r?.tagName)&&void 0!==a?a:e.nodeName.toLowerCase();if("html"!==o&&n.isValid(o))return void(ce(r)&&(r.allowedTags[f]=!0));if(1!==e.nodeType||"body"===f)return;const p=B(e),b=d(p,Vm),g=Gn(p,"data-mce-bogus");if(!b&&Te(g))return void("all"===g?Ye(p):at(p));const v=n.getElementRule(f);if(!c||v){if(ce(r)&&(r.allowedTags[f]=!0),c&&v&&!b){if(J(null!==(i=v.attributesForced)&&void 0!==i?i:[],h=>{Jt(p,h.name,"{$uid}"===h.value?"mce_"+EC++:h.value)}),J(null!==(l=v.attributesDefault)&&void 0!==l?l:[],h=>{d(p,h.name)||Jt(p,h.name,"{$uid}"===h.value?"mce_"+EC++:h.value)}),v.attributesRequired&&!St(v.attributesRequired,h=>d(p,h))||v.removeEmptyAttrs&&(h=>{const y=h.dom.attributes;return null==y||0===y.length})(p))return void at(p);v.outputName&&v.outputName!==f&&((h,y)=>{const E=((A,N)=>{const R=Pe(N),M=C(A);return or(R,M),R})(h,y);Ie(h,E);const S=xt(h);ct(E,S),Ye(h)})(p,v.outputName)}}else je(u,f)?Ye(p):at(p)},kC=(e,t,n,o,r,s)=>"html"!==n&&!sa(o)||!(r in nT&&xC(e,s,o))&&(!e.validate||t.isValid(o,r)||Vt(r,"data-")||Vt(r,"aria-")),_C=(e,t)=>e.hasAttribute(Vm)&&("id"===t||"class"===t||"style"===t),NC=(e,t)=>e in t.getBoolAttrs(),oT=(e,t,n,o)=>{const{attributes:r}=e;for(let s=r.length-1;s>=0;s--){const a=r[s],i=a.name,l=a.value;kC(t,n,o,e.tagName.toLowerCase(),i,l)||_C(e,i)?NC(i,n)&&e.setAttribute(i,i):e.removeAttribute(i)}},sT=e=>t=>{const n=Ig(t);if("svg"===n)(o=>{const s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(a=>`xlink:${a}`)};Wm().sanitize(o,s)})(t);else{if("math"!==n)throw new Error("Not a namespace element");((o,r)=>{const s=Wm();s.addHook("uponSanitizeElement",(a,i)=>{var l;const c=null!==(l=i.tagName)&&void 0!==l?l:a.nodeName.toLowerCase(),u=r.allow_mathml_annotation_encodings;if("annotation"===c&&ae(u)&&u.length>0){const f=a.getAttribute("encoding");Te(f)&&Re(u,f)&&(i.allowedTags[c]=!0)}}),s.sanitize(o,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})})(t,e)}},AC=le.makeMap,TC=le.extend,RC=(e,t,n,o)=>{const r=e.name,s=r in n&&"title"!==r&&"textarea"!==r&&"noscript"!==r,a=t.childNodes;for(let i=0,l=a.length;i<l;i++){const c=a[i],u=new qn(c.nodeName.toLowerCase(),c.nodeType);if(_e(c)){const f=c.attributes;for(let p=0,b=f.length;p<b;p++){const g=f[p];u.attr(g.name,g.value)}sa(u.name)&&(o(c),u.value=c.innerHTML)}else se(c)?(u.value=c.data,s&&(u.raw=!0)):(ks(c)||GS(c)||QS(c))&&(u.value=c.data);sa(u.name)||RC(u,c,n,o),e.append(u)}},fi=(e={},t=_s())=>{const n=tC(),o=tC(),r={validate:!0,root_name:"body",sanitize:!0,...e},s=new DOMParser,a=((v,h)=>{const y=(()=>{const E=rs(),S=()=>E.get().map(Ig).getOr("html");return{track:A=>(Su(A)?E.set(A):E.get().exists(N=>!N.contains(A))&&E.clear(),S()),current:S,reset:()=>{E.clear()}}})();if(v.sanitize){const E=((e,t,n)=>{const o=Wm();return o.addHook("uponSanitizeElement",(r,s)=>{SC(r,e,t,n.track(r),s)}),o.addHook("uponSanitizeAttribute",(r,s)=>{((a,i,l,c,u)=>{const f=a.tagName.toLowerCase(),{attrName:p,attrValue:b}=u;u.keepAttr=kC(i,l,c,f,p,b),u.keepAttr?(u.allowedAttributes[p]=!0,NC(p,l)&&(u.attrValue=p),i.allow_svg_data_urls&&Vt(b,"data:image/svg+xml")&&(u.forceKeepAttr=!0)):_C(a,p)&&(u.forceKeepAttr=!0)})(r,e,t,n.current(),s)}),o})(v,h,y);return{sanitizeHtmlElement:(A,N)=>{E.sanitize(A,((R,M)=>{const P={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1};return P.PARSER_MEDIA_TYPE=M,R.allow_script_urls?P.ALLOWED_URI_REGEXP=/.*/:R.allow_html_data_urls&&(P.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),P})(v,N)),E.removed=[],y.reset()},sanitizeNamespaceElement:sT(v)}}return{sanitizeHtmlElement:(E,S)=>{const A=document.createNodeIterator(E,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let N;for(;N=A.nextNode();){const R=y.track(N);SC(N,v,h,R),_e(N)&&oT(N,v,h,R)}y.reset()},sanitizeNamespaceElement:ke}})(r,t),l=n.getFilters,f=o.getFilters,b=(v,h)=>{const y=Te(h.attr(Vm)),E=1===h.type&&!je(v,h.name)&&!Ru(t,h)&&!sa(h.name);return 3===h.type||E&&!y},g={schema:t,addAttributeFilter:o.addFilter,getAttributeFilters:f,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(v,h={})=>{var y;const E=r.validate,S=null!==(y=h.context)&&void 0!==y?y:r.root_name,A=((j,Q,re="html")=>{const oe="xhtml"===re?"application/xhtml+xml":"text/html",we=je(t.getSpecialElements(),Q.toLowerCase()),Ae=we?`<${Q}>${j}</${Q}>`:j,Be=s.parseFromString("xhtml"===re?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ae}</body></html>`:/^[\s]*<head/i.test(j)||/^[\s]*<html/i.test(j)||/^[\s]*<!DOCTYPE/i.test(j)?`<html>${Ae}</html>`:`<body>${Ae}</body>`,oe).body;return a.sanitizeHtmlElement(Be,oe),we?Be.firstChild:Be})(v,S,h.format);_u(t,A);const N=new qn(S,11);RC(N,A,t.getSpecialElements(),a.sanitizeNamespaceElement),A.innerHTML="";const[R,M]=((j,Q,re,oe)=>{const we=re.validate,Ae=Q.getNonEmptyElements(),Be=Q.getWhitespaceElements(),Le=TC(AC("script,style,head,html,body,title,meta,param"),Q.getBlockElements()),ge=oh(Q),Se=/[ \t\r\n]+/g,F=/^[ \t\r\n]+/,U=/[ \t\r\n]+$/,Y=de=>{let De=de.parent;for(;ce(De);){if(De.name in Be)return!0;De=De.parent}return!1},X=de=>de.name in Le||Ru(Q,de)||sa(de.name)&&de.parent===j,pe=(de,De)=>!ce(De?de.prev:de.next)&&!wt(de.parent)&&X(de.parent)&&(de.parent!==j||!0===oe.isRootContent);return[de=>{var De,Je,Lt;if(3===de.type&&!Y(de)){let ze=null!==(De=de.value)&&void 0!==De?De:"";ze=ze.replace(Se," "),Lt=X,(ce(Je=de.prev)&&(Lt(Je)||"br"===Je.name)||pe(de,!0))&&(ze=ze.replace(F,"")),0===ze.length||" "===ze&&de.prev&&8===de.prev.type&&de.next&&8===de.next.type?de.remove():de.value=ze}},de=>{var De,Lt,Mt;if(1===de.type){const ze=Q.getElementRule(de.name);if(we&&ze){const Je=_l(Q,Ae,Be,de);ze.paddInEmptyBlock&&Je&&(Lt=>{let Mt=Lt;for(;ce(Mt);){if(Mt.name in ge)return _l(Q,Ae,Be,Mt);Mt=Mt.parent}return!1})(de)?hm(re,oe,X,de):ze.removeEmpty&&Je?X(de)?de.remove():de.unwrap():ze.paddEmpty&&(Je||uy(Lt=de,"#text")&&(null===(Mt=Lt?.firstChild)||void 0===Mt?void 0:Mt.value)===an)&&hm(re,oe,X,de)}}else if(3===de.type&&!Y(de)){let ze=null!==(De=de.value)&&void 0!==De?De:"";(de.next&&X(de.next)||pe(de,!1))&&(ze=ze.replace(U,"")),0===ze.length?de.remove():de.value=ze}}]})(N,t,r,h),P=[],W={nodes:{},attributes:{}},D=j=>ly(l(),f(),j,W);if(((j,Q,re)=>{const oe=[];for(let we=j,Ae=we;we;Ae=we,we=we.walk()){const Be=we;J(Q,Le=>Le(Be)),wt(Be.parent)&&Be!==j?we=Ae:oe.push(Be)}for(let we=oe.length-1;we>=0;we--){const Ae=oe[we];J(re,Be=>Be(Ae))}})(N,[R,D],[M,E?j=>{return re=P,void(ym(t,Q=j)&&re.push(Q));var Q,re}:ke]),P.reverse(),E&&P.length>0)if(h.context){const{pass:j,fail:Q}=qo(P,re=>re.parent===N);vm(Q,t,N,D),h.invalid=j.length>0}else vm(P,t,N,D);const I=((j,Q)=>{var re;const oe=null!==(re=Q.forced_root_block)&&void 0!==re?re:j.forced_root_block;return!1===oe?"":!0===oe?"p":oe})(r,h);return I&&("body"===N.name||h.isRootContent)&&((j,Q)=>{const re=TC(AC("script,style,head,html,body,title,meta,param"),t.getBlockElements()),oe=/^[ \t\r\n]+/,we=/[ \t\r\n]+$/;let Ae=j.firstChild,Be=null;const Le=ge=>{var Se,F;ge&&(Ae=ge.firstChild,Ae&&3===Ae.type&&(Ae.value=null===(Se=Ae.value)||void 0===Se?void 0:Se.replace(oe,"")),Ae=ge.lastChild,Ae&&3===Ae.type&&(Ae.value=null===(F=Ae.value)||void 0===F?void 0:F.replace(we,"")))};if(t.isValidChild(j.name,Q.toLowerCase())){for(;Ae;){const ge=Ae.next;b(re,Ae)?(Be||(Be=new qn(Q,1),Be.attr(r.forced_root_block_attrs),j.insert(Be,Ae)),Be.append(Ae)):(Le(Be),Be=null),Ae=ge}Le(Be)}})(N,I),h.invalid||cy(W,h),N}};return((v,h)=>{var y,E;const S=v.schema;v.addAttributeFilter("href",M=>{let P=M.length;const z=W=>{const D=W?le.trim(W):"";return/\b(noopener)\b/g.test(D)?D:D.split(" ").filter(j=>j.length>0).concat(["noopener"]).sort().join(" ")};if(!h.allow_unsafe_link_target)for(;P--;){const W=M[P];"a"===W.name&&"_blank"===W.attr("target")&&W.attr("rel",z(W.attr("rel")))}}),h.allow_html_in_named_anchor||v.addAttributeFilter("id,name",M=>{let P,z,W,D,I=M.length;for(;I--;)if(D=M[I],"a"===D.name&&D.firstChild&&!D.attr("href"))for(W=D.parent,P=D.lastChild;P&&W;)z=P.prev,W.insert(P,D),P=z}),h.fix_list_elements&&v.addNodeFilter("ul,ol",M=>{let P,z,W=M.length;for(;W--;)if(P=M[W],z=P.parent,z&&("ul"===z.name||"ol"===z.name))if(P.prev&&"li"===P.prev.name)P.prev.append(P);else{const D=new qn("li",1);D.attr("style","list-style-type: none"),P.wrap(D)}});const A=S.getValidClasses();h.validate&&A&&v.addAttributeFilter("class",M=>{var P;let z=M.length;for(;z--;){const W=M[z],D=null!==(P=W.attr("class"))&&void 0!==P?P:"",I=le.explode(D," ");let j="";for(let Q=0;Q<I.length;Q++){const re=I[Q];let oe=!1,we=A["*"];we&&we[re]&&(oe=!0),we=A[W.name],!oe&&we&&we[re]&&(oe=!0),oe&&(j&&(j+=" "),j+=re)}j.length||(j=null),W.attr("class",j)}}),((M,P)=>{const{blob_cache:z}=P;if(z){const W=D=>{const I=D.attr("src");var j;(j=D).attr("src")===gt.transparentSrc||ce(j.attr("data-mce-placeholder"))||(j=>ce(j.attr("data-mce-bogus")))(D)||wt(I)||aC(z,I,!0).each(j=>{D.attr("src",j.blobUri())})};M.addAttributeFilter("src",D=>J(D,W))}})(v,h);const N=null!==(y=h.sandbox_iframes)&&void 0!==y&&y,R=xr(null!==(E=h.sandbox_iframes_exclusions)&&void 0!==E?E:[]);h.convert_unsafe_embeds&&v.addNodeFilter("object,embed",M=>J(M,P=>{P.replace((({type:z,src:W,width:D,height:I}={},j,Q)=>{const re=jt(we=z)?"iframe":Im(we,"image")?"img":Im(we,"video")?"video":Im(we,"audio")?"audio":"iframe",oe=new qn(re,1);var we;return oe.attr("audio"===re?{src:W}:{src:W,width:D,height:I}),"audio"!==re&&"video"!==re||oe.attr("controls",""),"iframe"===re&&j&&iC(oe,Q),oe})({type:P.attr("type"),src:P.attr("object"===P.name?"data":"src"),width:P.attr("width"),height:P.attr("height")},N,R))})),N&&v.addNodeFilter("iframe",M=>J(M,P=>iC(P,R)))})(g,r),(h=r).inline_styles&&((e,t,n)=>{var o;const r=Fu();var s,a,i;t.convert_fonts_to_spans&&(s=e,a=r,i=le.explode(null!==(o=t.font_size_legacy_values)&&void 0!==o?o:""),s.addNodeFilter("font",l=>{J(l,c=>{const u=a.parse(c.attr("style")),f=c.attr("color"),p=c.attr("face"),b=c.attr("size");var g;f&&(u.color=f),p&&(u["font-family"]=p),b&&Ys(b).each(g=>{u["font-size"]=i[g-1]}),c.name="span",c.attr("style",a.serialize(u)),g=c,J(["color","face","size"],h=>{g.attr(h,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const c="html4"!==a.type;J(l,u=>{if(c)u.name="s";else{const f=i.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",i.serialize(f))}})})})(e,n,r)})(g,h,t),g;var h},OC=(e,t,n)=>{const o=cd(s=e)?Ds({validate:!1}).serialize(s):s,r=t(o);var s;if(r.isDefaultPrevented())return r;if(cd(e)){if(r.content!==o){const s=fi({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:e.name});return{...r,content:s}}return{...r,content:e}}return r},BC=e=>({sanitize:w0(e),sandbox_iframes:E0(e),sandbox_iframes_exclusions:uf(e)}),DC=(e,t)=>{if(t.no_events)return eo.value(t);{const n=e.dispatch("BeforeGetContent",t);return n.isDefaultPrevented()?eo.error(Eb(e,{content:"",...n}).content):eo.value(n)}},PC=(e,t,n)=>n.no_events?t:OC(t,r=>Eb(e,{...n,content:r}),BC(e)).content,Km=(e,t)=>{if(t.no_events)return eo.value(t);{const n=OC(t.content,o=>{return r=e,s={...t,content:o},r.dispatch("BeforeSetContent",s);var r,s},BC(e));return n.isDefaultPrevented()?(xb(e,n),eo.error(void 0)):eo.value(n)}},Xm=(e,t,n)=>{n.no_events||xb(e,{...n,content:t})},Ym=(e,t,n)=>({element:e,width:t,rows:n}),LC=(e,t)=>({element:e,cells:t}),aT=(e,t)=>({x:e,y:t}),MC=(e,t)=>rr(e,t).bind(Ys).getOr(1),iT=(e,t,n)=>{const o=e.rows;return!!(o[n]?o[n].cells:[])[t]},IC=e=>bn(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),FC=(e,t)=>{const n=e.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(Fe(r[s],t))return k.some(aT(s,o))}return k.none()},jC=(e,t,n,o,r)=>{const s=[],a=e.rows;for(let i=n;i<=r;i++){const l=a[i].cells,c=t<o?l.slice(t,o+1):l.slice(o,t+1);s.push(LC(a[i].element,c))}return s},lT=e=>((t,n)=>{const o=ua(t.element),r=Pe("tbody");return ct(r,n),Ee(o,r),o})(e,nt(e.rows,n=>{const o=nt(n.cells,s=>{const a=wh(s);return m(a,"colspan"),m(a,"rowspan"),a}),r=ua(n.element);return ct(r,o),r})),zC=()=>Ff([]),hd=(e,t)=>t>=0&&t<e.length&&ya(e.charAt(t)),UC=e=>yo(e.innerText),HC=e=>_e(e)?e.outerHTML:se(e)?la.encodeRaw(e.data,!1):ks(e)?"\x3c!--"+e.data+"--\x3e":"",mT=Vo(()=>document.implementation.createHTMLDocument("undo")),bd=e=>{const t=e.serializer.getTempAttrs(),n=cv(e.getBody(),t);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:We(nt(vn(n.childNodes),Dn(yo,HC)),o=>o.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:yo(n.innerHTML),bookmark:null,beforeBookmark:null}},Gm=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?((e,t)=>{((n,o)=>{let r=0;J(n,s=>{var a,i;0===s[0]?r++:1===s[0]?(((a,i,l)=>{const c=(u=>{let f;const p=document.createElement("div"),b=document.createDocumentFragment();for(u&&(p.innerHTML=u);f=p.firstChild;)b.appendChild(f);return b})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(c,a.childNodes[l]):a.appendChild(c)})(o,s[1],r),r++):2===s[0]&&(i=r,(a=o).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(f,p,b,g,v)=>{const h=c(f,p,b,g);if(null===h||h.start===p&&h.diag===p-g||h.end===f&&h.diag===f-b){let y=f,E=b;for(;y<p||E<g;)y<p&&E<g&&n[y]===o[E]?(v.push([0,n[y]]),++y,++E):p-f>g-b?(v.push([2,n[y]]),++y):(v.push([1,o[E]]),++E)}else{i(f,h.start,b,h.start-h.diag,v);for(let y=h.start;y<h.end;++y)v.push([0,n[y]]);i(h.end,p,h.end-h.diag,g,v)}},l=(f,p,b,g)=>{let v=f;for(;v-p<g&&v<b&&n[v]===o[v-p];)++v;return((h,y,E)=>({start:h,end:y,diag:E}))(f,v,p)},c=(f,p,b,g)=>{const v=p-f,h=g-b;if(0===v||0===h)return null;const y=v-h,E=h+v,S=(E%2==0?E:E+1)/2;let A,N,R,M,P;for(s[1+S]=f,a[1+S]=p+1,A=0;A<=S;++A){for(N=-A;N<=A;N+=2){for(R=N+S,s[R]=N===-A||N!==A&&s[R-1]<s[R+1]?s[R+1]:s[R-1]+1,M=s[R],P=M-f+b-N;M<p&&P<g&&n[M]===o[P];)s[R]=++M,++P;if(y%2!=0&&y-A<=N&&N<=y+A&&a[R-y]<=s[R])return l(a[R-y],N+f-b,p,g)}for(N=y-A;N<=y+A;N+=2){for(R=N+S-y,a[R]=N===y-A||N!==y+A&&a[R+1]<=a[R-1]?a[R+1]-1:a[R-1],M=a[R]-1,P=M-f+b-N;M>=f&&P>=b&&n[M]===o[P];)a[R]=M--,P--;if(y%2==0&&-A<=N&&N<=A&&a[R]<=s[R+y])return l(a[R],N+f-b,p,g)}}return null},u=[];return i(0,n.length,0,o.length,u),u})(nt(vn(t.childNodes),HC),e),t)})(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!ce(o)||!V0(o)||!o.isFakeCaret}),o&&(e.selection.moveToBookmark(o),e.selection.scrollIntoView())},Qm=e=>"fragmented"===e.type?e.fragments.join(""):e.content,qC=e=>{const t=Pe("body",mT());return nn(t,Qm(e)),J(Jn(t,"*[data-mce-bogus]"),at),Nn(t)},Zm=(e,t)=>{return!(!e||!t)&&(o=t,!(Qm(e)!==Qm(o))||((n,o)=>qC(n)===qC(o))(e,t));var o},Jm=e=>0===e.get(),vd=(e,t,n)=>{Jm(n)&&(e.typing=t)},$C=(e,t)=>{e.typing&&(vd(e,!1,t),e.add())},WC=e=>({init:{bindEvents:ke},undoManager:{beforeChange:(t,n)=>{return o=e,s=n,void(Jm(t)&&s.set(rf(o.selection)));var o,s},add:(t,n,o,r,s,a)=>((i,l,c,u,f,p,b)=>{const g=bd(i),v=le.extend(p||{},g);if(!Jm(u)||i.removed)return null;const h=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:v,lastLevel:h,originalEvent:b}).isDefaultPrevented()||h&&Zm(h,v))return null;l.data[c.get()]&&f.get().each(S=>{l.data[c.get()].beforeBookmark=S});const y=E_(i);if(y&&l.data.length>y){for(let S=0;S<l.data.length-1;S++)l.data[S]=l.data[S+1];l.data.length--,c.set(l.data.length)}v.bookmark=rf(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(v),c.set(l.data.length-1);const E={level:v,lastLevel:h,originalEvent:b};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",E),i.dispatch("change",E)):i.dispatch("AddUndo",E),v})(e,t,n,o,r,s,a),undo:(t,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,vd(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],Gm(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(e,t,n,o),redo:(t,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],Gm(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(e,t,n),clear:(t,n)=>{return o=e,s=n,(r=t).data=[],s.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,s},reset:t=>{return(n=t).clear(),void n.add();var n},hasUndo:(t,n)=>{return o=e,r=t,n.get()>0||r.typing&&r.data[0]&&!Zm(bd(o),r.data[0]);var o,r},hasRedo:(t,n)=>{return o=t,n.get()<o.data.length-1&&!o.typing;var o},transact:(t,n,o)=>{return a=o,$C(r=t,n),r.beforeChange(),r.ignore(a),r.add();var r,a},ignore:(t,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(t,n),extra:(t,n,o,r)=>((s,a,i,l,c)=>{if(a.transact(l)){const u=a.data[i.get()].bookmark,f=a.data[i.get()-1];Gm(s,f,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=u)}})(e,t,n,o,r)},formatter:{match:(t,n,o,r)=>Nm(e,t,n,o,r),matchAll:(t,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,c=>{for(let u=0;u<r.length;u++){const f=r[u];!i[f]&&Ir(o,c,f,s)&&(i[f]=!0,a.push(f))}},o.dom.getRoot()),a})(e,t,n),matchNode:(t,n,o,r)=>Ir(e,t,n,o,r),canApply:t=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const a=n.selection.getStart(),i=$c(s,a);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!Po(c))return!0;for(let u=i.length-1;u>=0;u--)if(s.is(i[u],c.selector))return!0}}return!1})(e,t),closest:t=>((n,o)=>{const r=s=>Fe(s,B(n.getBody()));return k.from(n.selection.getStart(!0)).bind(s=>Sm(B(s),a=>Xn(o,i=>{return Ir(n,a.dom,c=i)?k.some(c):k.none();var c}),r)).getOrNull()})(e,t),apply:(t,n,o)=>Xy(e,t,n,o),remove:(t,n,o,r)=>Wy(e,t,n,o,r),toggle:(t,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!Nm(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?Xy(r,s,a,i):Wy(r,s,a,i))})(e,t,n,o),formatChanged:(t,n,o,r,s)=>{return((p,b,g,v,h,y)=>{const E=b.get();J(g.split(","),S=>{const A=Ot(E,S).getOrThunk(()=>{const R={withSimilar:{state:pn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:pn(!1),similar:!1,callbacks:[]},withVars:[]};return E[S]=R,R}),N=()=>{const R=Zy(p);return Qy(p,R,S,h,y).isSome()};if(jt(y)){const R=h?A.withSimilar:A.withoutSimilar;R.callbacks.push(v),1===R.callbacks.length&&R.state.set(N())}else A.withVars.push({state:pn(N()),similar:h,vars:y,callback:v})}),b.set(E)})(e,i=t,l=n,c=o,r,s),{unbind:()=>((p,b,g)=>{const v=p.get();J(b.split(","),h=>Ot(v,h).each(y=>{v[h]={withSimilar:{...y.withSimilar,callbacks:We(y.withSimilar.callbacks,E=>E!==g)},withoutSimilar:{...y.withoutSimilar,callbacks:We(y.withoutSimilar.callbacks,E=>E!==g)},withVars:We(y.withVars,E=>E.callback!==g)}})),p.set(v)})(i,l,c)};var i,l,c}},editor:{getContent:t=>{return o=t,k.from((n=e).getBody()).fold(me("tree"===o.format?new qn("body",11):""),r=>((e,t,n)=>{let o;return o="raw"===t.format?le.trim(yo(cv(n,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?((r,s)=>{const a=r.getDoc(),i=zt(B(r.getBody())),l=Pe("div",a);Jt(l,"data-mce-bogus","all"),na(l,{position:"fixed",left:"-9999999px",top:"0"}),nn(l,s.innerHTML),dv(l),uv(l);const c=st(f=i)?f:B(It(f).dom.body);var f;Ee(c,l);const u=yo(l.dom.innerText);return Ye(l),u})(e,n):"tree"===t.format?e.serializer.serialize(n,t):((r,s)=>{const a=Fn(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(e,e.serializer.serialize(n,t)),"text"!==t.format&&!kc(B(n))&&Te(o)?le.trim(o):o})(n,o,r));var n,o},setContent:(t,n)=>{return r=t,s=n,k.from((o=e).getBody()).map(a=>cd(r)?((i,l,c,u)=>{dy(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const f=Ds({validate:!1},i.schema).serialize(c),p=yo(kc(B(l))?f:le.trim(f));return Em(i,p,u.no_selection),{content:c,html:p}})(o,a,r,s):((i,l,c,u)=>{if(0===(c=yo(c)).length||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const p=Fn(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),p.toLowerCase())?(c=f,c=i.dom.createHTML(p,il(i),c)):c||(c=f),Em(i,c,u.no_selection),{content:c,html:c}}{"raw"!==u.format&&(c=Ds({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const f=kc(B(l))?c:le.trim(c);return Em(i,f,u.no_selection),{content:f,html:f}}})(o,a,r,s)).getOr({content:r,html:cd(s.content)?"":s.content});var o,r,s},insertContent:(t,n)=>_A(e,t,n),addVisual:t=>((n,o)=>{const r=n.dom,s=ce(o)?o:n.getBody();J(r.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=T_(n),l=r.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const c=r.getAttrib(a,"name")||a.id,u=v0(n);c&&n.hasVisual?r.addClass(a,u):r.removeClass(a,u)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((o,r,s={})=>{const a=(i=s,l=r,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return DC(o,a).fold(pt,i=>{const l=((c,u)=>{if("text"===u.format)return k.from((f=c).selection.getRng()).map(p=>{var b;const g=k.from(f.dom.getParent(p.commonAncestorContainer,f.dom.isBlock)),v=f.getBody(),h=g.map(R=>R.nodeName).getOr("div").toLowerCase(),y=B(p.cloneContents());dv(y),uv(y);const E=f.dom.add(v,h,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},y.dom),S=UC(E),A=yo(null!==(b=E.textContent)&&void 0!==b?b:"");if(f.dom.remove(E),hd(A,0)||hd(A,A.length-1)){const N=g.getOr(v),R=UC(N),M=R.indexOf(S);return-1===M?S:(hd(R,M-1)?" ":"")+S+(hd(R,M+S.length)?" ":"")}return S}).getOr("");var f;{const f=((p,b)=>{const g=p.selection.getRng(),v=p.dom.create("body"),h=p.selection.getSel(),y=Yf(p,wf(h)),E=b.contextual?((e,t,n)=>{const o=Z0(t,e);return o.length>0?((e,t)=>{return(n=e,o=t[0],ir(o,"table",xe(Fe,n))).bind(n=>{const o=t[0],r=t[t.length-1],s=(a=>{const i=Ym(ua(a),0,[]);return J(Jn(a,"tr"),(l,c)=>{J(Jn(l,"td,th"),(u,f)=>{((p,b,g,v,h)=>{const y=MC(h,"rowspan"),E=MC(h,"colspan"),S=p.rows;for(let A=g;A<g+y;A++){S[A]||(S[A]=LC(wh(v),[]));for(let N=b;N<b+E;N++)S[A].cells[N]=A===g&&N===b?h:ua(h)}})(i,((p,b,g)=>{for(;iT(p,b,g);)b++;return b})(i,f,c),c,l,u)})}),Ym(i.element,IC(i.rows),i.rows)})(n);return(a=s,i=o,l=r,FC(a,i).bind(c=>FC(a,l).map(u=>((f,p,b)=>{const g=p.x,v=p.y,h=b.x,y=b.y,E=v<y?jC(f,g,v,h,y):jC(f,g,y,h,v);return Ym(f.element,IC(E),E)})(a,c,u)))).map(a=>Ff([lT(a)]));var a,i,l}).getOrThunk(zC);var n,o})(e,o):(r=e,a=n,(s=t).length>0&&s[0].collapsed?zC():(i=r,c=a,((u,f)=>{const p=bn(f,(b,g)=>(Ee(g,b),g),u);return f.length>0?Ff([p]):p})(B((l=s[0]).cloneContents()),((e,t,n)=>{const o=B(t.commonAncestorContainer),r=is(o,e),s=We(r,l=>n.isWrapper(mt(l))),a=(c=t,Yt(l=r,u=>"li"===mt(u)&&Ef(u,c)).fold(me([]),u=>{return(f=l,Yt(f,p=>"ul"===mt(p)||"ol"===mt(p))).map(f=>{const p=Pe(mt(f)),b=kr(ne(f),(g,v)=>Vt(v,"list-style"));return na(p,b),[Pe("li"),p]}).getOr([]);var f})),i=s.concat(a.length?a:(l=>Ya(l)?so(l).filter(Vu).fold(me([]),c=>[l,c]):Vu(l)?[l]:[])(o));var l,c;return nt(i,ua)})(i,l,c))));var r,s,a,i,l,c})(B(p.getBody()),y,p.schema).dom:g.cloneContents();return E&&v.appendChild(E),p.selection.serializer.serialize(v,b)})(c,u);return"tree"===u.format?f:c.selection.isCollapsed()?"":f}})(o,i);return PC(o,l,i)})})(e,t,n)},autocompleter:{addDecoration:ke,removeDecoration:ke},raw:{getModel:()=>k.none()}}),Fr=e=>je(e.plugins,"rtc"),ep=e=>e.rtcInstance?e.rtcInstance:WC(e),on=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},VC=e=>on(e).init.bindEvents(),KC=e=>0===e.dom.length?(Ye(e),k.none()):k.some(e),XC=(e,t,n,o,r)=>{e.bind(s=>((o?rm:rd)(s.dom,o?s.dom.length:0,r),t.filter(Cn).map(a=>((i,l,c,u,f)=>{const p=i.dom,b=l.dom,g=u?p.length:b.length;u?(sm(p,b,f,!1,!u),c.setStart(b,g)):(sm(b,p,f,!1,!u),c.setEnd(b,g))})(s,a,n,o,r)))).orThunk(()=>{return(a=t,i=o,a.filter(l=>vl.isBookmarkNode(l.dom)).bind(i?bo:Mn)).or(t).filter(Cn).map(a=>((i,l,c)=>{so(i).each(u=>{const f=i.dom;l&&El(u,G(f,0),c)?rd(f,0,c):!l&&Sl(u,G(f,f.length),c)&&rm(f,f.length,c)})})(a,o,r));var a,i})},YC=(e,t,n)=>{if(je(e,t)){const o=We(e[t],r=>r!==n);0===o.length?delete e[t]:e[t]=o}},GC=e=>!(!e||!e.ownerDocument)&&Sn(B(e.ownerDocument),B(e)),QC=(e,t,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((h,y)=>{let E,S;const A=(R,M)=>Yt(M,P=>h.is(P,R)),N=R=>h.getParents(R,void 0,h.getRoot());return{selectorChangedWithUnbind:(R,M)=>(E||(E={},S={},y.on("NodeChange",P=>{const z=P.element,W=N(z),D={};yt(E,(I,j)=>{A(j,W).each(Q=>{S[j]||(J(I,re=>{re(!0,{node:Q,selector:j,parents:W})}),S[j]=I),D[j]=I})}),yt(S,(I,j)=>{D[j]||(delete S[j],J(I,Q=>{Q(!1,{node:z,selector:j,parents:W})}))})})),E[R]||(E[R]=[]),E[R].push(M),A(R,N(y.selection.getStart())).each(()=>{S[R]=E[R]}),{unbind:()=>{YC(E,R,M),YC(S,R,M)}})}})(e,o),i=(h,y)=>((E,S,A={})=>{const N=(R=A,M=S,{format:"html",...R,set:!0,selection:!0,content:M});var R,M;Km(E,N).each(R=>{const M=((z,W)=>{if("raw"!==W.format){const D=z.selection.getRng(),I=z.dom.getParent(D.commonAncestorContainer,z.dom.isBlock),j=I?{context:I.nodeName.toLowerCase()}:{},Q=z.parser.parse(W.content,{forced_root_block:!1,...j,...W});return Ds({validate:!1},z.schema).serialize(Q)}return W.content})(E,R),P=E.selection.getRng();((z,W,D)=>{const I=k.from(W.firstChild).map(B),j=k.from(W.lastChild).map(B);z.deleteContents(),z.insertNode(W);const Q=I.bind(Mn).filter(Cn).bind(KC),re=j.bind(bo).filter(Cn).bind(KC);XC(Q,I,z,!0,D),XC(re,j,z,!1,D),z.collapse(!1)})(P,P.createContextualFragment(M),E.schema),E.selection.setRng(P),Cl(E,P),Xm(E,M,R)})})(o,h,y),l=h=>{const y=u();y.collapse(!!h),f(y)},c=()=>t.getSelection?t.getSelection():t.document.selection,u=()=>{let h;const y=(S,A,N)=>{try{return A.compareBoundaryPoints(S,N)}catch{return-1}},E=t.document;if(ce(o.bookmark)&&!di(o)){const S=$f(o);if(S.isSome())return S.map(A=>Yf(o,[A])[0]).getOr(E.createRange())}try{const S=c();S&&!hc(S.anchorNode)&&(h=S.rangeCount>0?S.getRangeAt(0):E.createRange(),h=Yf(o,[h])[0])}catch{}if(h||(h=E.createRange()),$i(h.startContainer)&&h.collapsed){const S=e.getRoot();h.setStart(S,0),h.setEnd(S,0)}return r&&s&&(0===y(h.START_TO_START,h,r)&&0===y(h.END_TO_END,h,r)?h=s:(r=null,s=null)),h},f=(h,y)=>{if(!((S=h)&&GC(S.startContainer)&&GC(S.endContainer)))return;var S;const E=c();if(h=o.dispatch("SetSelectionRange",{range:h,forward:y}).range,E){s=h;try{E.removeAllRanges(),E.addRange(h)}catch{}!1===y&&E.extend&&(E.collapse(h.endContainer,h.endOffset),E.extend(h.startContainer,h.startOffset)),r=E.rangeCount>0?E.getRangeAt(0):null}if(!h.collapsed&&h.startContainer===h.endContainer&&E?.setBaseAndExtent&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()){const S=h.startContainer.childNodes[h.startOffset];S&&"IMG"===S.nodeName&&(E.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),E.anchorNode===h.startContainer&&E.focusNode===h.endContainer||E.setBaseAndExtent(S,0,S,1))}o.dispatch("AfterSetSelectionRange",{range:h,forward:y})},p=()=>{const h=c(),y=h?.anchorNode,E=h?.focusNode;if(!h||!y||!E||hc(y)||hc(E))return!0;const S=e.createRng(),A=e.createRng();try{S.setStart(y,h.anchorOffset),S.collapse(!0),A.setStart(E,h.focusOffset),A.collapse(!0)}catch{return!0}return S.compareBoundaryPoints(S.START_TO_START,A)<=0},b={dom:e,win:t,serializer:n,editor:o,expand:(h={type:"word"})=>f(xa(e).expand(u(),h)),collapse:l,setCursorLocation:(h,y)=>{const E=e.createRng();ce(h)&&ce(y)?(E.setStart(h,y),E.setEnd(h,y),f(E),l(!1)):(Sf(e,E,o.getBody(),!0),f(E))},getContent:h=>((y,E={})=>{return A=E.format?E.format:"html",N=E,on(y).selection.getContent(A,N);var A,N})(o,h),setContent:i,getBookmark:(h,y)=>g.getBookmark(h,y),moveToBookmark:h=>g.moveToBookmark(h),select:(h,y)=>{return(E=e,S=h,A=y,k.from(S).bind(N=>k.from(N.parentNode).map(R=>{const M=E.nodeIndex(N),P=E.createRng();return P.setStart(R,M),P.setEnd(R,M+1),A&&(Sf(E,P,N,!0),Sf(E,P,N,!1)),P}))).each(f),h;var E,S,A},isCollapsed:()=>{const h=u(),y=c();return!(!h||h.item)&&(h.compareEndPoints?0===h.compareEndPoints("StartToEnd",h):!y||h.collapsed)},isEditable:()=>{if(o.mode.isReadOnly())return!1;const h=u(),y=o.getBody().querySelectorAll('[data-mce-selected="1"]');return y.length>0?ro(y,E=>e.isEditable(E.parentElement)):Zb(e,h)},isForward:p,setNode:h=>(i(e.getOuterHTML(h)),h),getNode:()=>((h,y)=>{if(!y)return h;let E=y.startContainer,S=y.endContainer;const A=y.startOffset,N=y.endOffset;let R=y.commonAncestorContainer;y.collapsed||(E===S&&N-A<2&&E.hasChildNodes()&&(R=E.childNodes[A]),se(E)&&se(S)&&(E=E.length===A?nv(E.nextSibling,!0):E.parentNode,S=0===N?nv(S.previousSibling,!1):S.parentNode,E&&E===S&&(R=E)));const M=se(R)?R.parentNode:R;return ns(M)?M:h})(o.getBody(),u()),getSel:c,setRng:f,getRng:u,getStart:h=>ev(o.getBody(),u(),h),getEnd:h=>tv(o.getBody(),u(),h),getSelectedBlocks:(h,y)=>((E,S,A,N)=>{const R=[],M=E.getRoot(),P=E.getParent(A||ev(M,S,S.collapsed),E.isBlock),z=E.getParent(N||tv(M,S,S.collapsed),E.isBlock);if(P&&P!==M&&R.push(P),P&&z&&P!==z){let W;const D=new mn(P,M);for(;(W=D.next())&&W!==z;)E.isBlock(W)&&R.push(W)}return z&&P!==z&&z!==M&&R.push(z),R})(e,u(),h,y),normalize:()=>{const h=u(),y=c();if(!(wf(y).length>1)&&Hc(o)){const E=Yc(e,h);return E.each(S=>{f(S,p())}),E.getOr(h)}return h},selectorChanged:(h,y)=>(a(h,y),b),selectorChangedWithUnbind:a,getScrollContainer:()=>{let h,y=e.getRoot();for(;y&&"BODY"!==y.nodeName;){if(y.scrollHeight>y.clientHeight){h=y;break}y=y.parentNode}return h},scrollIntoView:(h,y)=>{var E;ce(h)?((E=o).inline?FN:zN)(E,h,y):Cl(o,u(),y)},placeCaretAt:(h,y)=>f(Ob(h,y,o.getDoc())),getBoundingClientRect:()=>{const h=u();return h.collapsed?G.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:()=>{t=r=s=null,v.destroy()}},g=vl(b),v=_b(b,o);return b.bookmarkManager=g,b.controlSelection=v,b},pT=(e,t,n)=>{-1===le.inArray(t,n)&&(e.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),t.push(n))},ZC=(e,t)=>{const n=((e,t)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},r=t&&t.dom?t.dom:Bt.DOM,s=t&&t.schema?t.schema:_s(o),a=fi(o,s);return l=o,c=r,(i=a).addAttributeFilter("data-mce-tabindex",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];b.attr("tabindex",b.attr("data-mce-tabindex")),b.attr(f,null)}}),i.addAttributeFilter("src,href,style",(u,f)=>{const p="data-mce-"+f,b=l.url_converter,g=l.url_converter_scope;let v=u.length;for(;v--;){const h=u[v];let y=h.attr(p);void 0!==y?(h.attr(f,y.length>0?y:null),h.attr(p,null)):(y=h.attr(f),"style"===f?y=c.serializeStyle(c.parseStyle(y),h.name):b&&(y=b.call(g,y,f,h.name)),h.attr(f,y.length>0?y:null))}}),i.addAttributeFilter("class",u=>{let f=u.length;for(;f--;){const p=u[f];let b=p.attr("class");b&&(b=b.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),p.attr("class",b.length>0?b:null))}}),i.addAttributeFilter("data-mce-type",(u,f,p)=>{let b=u.length;for(;b--;){const g=u[b];"bookmark"===g.attr("data-mce-type")&&!p.cleanup&&(k.from(g.firstChild).exists(h=>{var y;return!_c(null!==(y=h.value)&&void 0!==y?y:"")})?g.unwrap():g.remove())}}),i.addNodeFilter("script,style",(u,f)=>{var p;const b=v=>v.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=u.length;for(;g--;){const v=u[g],h=v.firstChild,y=null!==(p=h?.value)&&void 0!==p?p:"";if("script"===f){const E=v.attr("type");E&&v.attr("type","mce-no/type"===E?null:E.replace(/^mce\-/,"")),"xhtml"===l.element_format&&h&&y.length>0&&(h.value="// <![CDATA[\n"+b(y)+"\n// ]]>")}else"xhtml"===l.element_format&&h&&y.length>0&&(h.value="\x3c!--\n"+b(y)+"\n--\x3e")}}),i.addNodeFilter("#comment",u=>{let f=u.length;for(;f--;){const p=u[f],b=p.value;l.preserve_cdata&&0===b?.indexOf("[CDATA[")?(p.name="#cdata",p.type=4,p.value=c.decode(b.replace(/^\[CDATA\[|\]\]$/g,""))):0===b?.indexOf("mce:protected ")&&(p.name="#text",p.type=3,p.raw=!0,p.value=unescape(b).substr(14))}}),i.addNodeFilter("xml:namespace,input",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];7===b.type?b.remove():1===b.type&&("input"!==f||b.attr("type")||b.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",u=>{J(u,f=>{"format-caret"===f.attr("data-mce-type")&&(f.isEmpty(i.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(u,f)=>{let p=u.length;for(;p--;)u[p].attr(f,null)}),l.remove_trailing_brs&&(u=l,p=i.schema,i.addNodeFilter("br",(b,g,v)=>{const h=le.extend({},p.getBlockElements()),y=p.getNonEmptyElements(),E=p.getWhitespaceElements();h.body=1;const S=A=>A.name in h||Ru(p,A);for(let A=0,N=b.length;A<N;A++){let R=b[A],M=R.parent;if(M&&S(M)&&R===M.lastChild){let P=R.prev;for(;P;){const z=P.name;if("span"!==z||"bookmark"!==P.attr("data-mce-type")){"br"===z&&(R=null);break}P=P.prev}if(R&&(R.remove(),_l(p,y,E,M))){const z=p.getElementRule(M.name);z&&(z.removeEmpty?M.remove():z.paddEmpty&&hm(u,v,S,M))}}else{let P=R;for(;M&&M.firstChild===P&&M.lastChild===P&&(P=M,!h[M.name]);)M=M.parent;if(P===M){const z=new qn("#text",3);z.value=an,R.replace(z)}}}})),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},u=(g=i,y=v=c,ce(h=b=t)&&h.hasEventListeners("PreProcess")&&!y.no_events?((h,y,E)=>{let S;const A=h.dom;let N=y.cloneNode(!0);const R=document.implementation;if(R.createHTMLDocument){const M=R.createHTMLDocument("");le.each("BODY"===N.nodeName?N.childNodes:[N],P=>{M.body.appendChild(M.importNode(P,!0))}),N="BODY"!==N.nodeName?M.body.firstChild:M.body,S=A.doc,A.doc=M}return P={...E,node:N},h.dispatch("PreProcess",P),S&&(A.doc=S),N;var P})(b,g,v):g),f=((b,g,v)=>{const h=yo(v.getInner?g.innerHTML:b.getOuterHTML(g));return v.selection||kc(B(g))?h:le.trim(h)})(r,u,c),p=((b,g,v)=>{const h=v.selection?{forced_root_block:!1,...v}:v,y=b.parse(g,h);return(E=>{const S=N=>"br"===N?.name,A=E.lastChild;if(S(A)){const N=A.prev;S(N)&&(A.remove(),N.remove())}})(y),y})(a,f,c);var b,g,v,h,y;return"tree"===c.format?p:((b,g,v,h,y)=>{var N;return((S,A,N)=>{return!A.no_events&&S?(M=S,P={...A,content:N},M.dispatch("PostProcess",P)).content:N;var M,P})(b,y,(N=h,Ds(g,v).serialize(N)))})(t,o,s,p,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:xe(pT,a,n),getTempAttrs:me(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var i,l,c,u,p})(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},tp=(e,t,n={})=>{const o=(r=n,s=t,{format:"html",...r,set:!0,content:s});var r,s;return Km(e,o).map(r=>{const s=(i=r.content,l=r,ep(e).editor.setContent(i,l));var i,l;return Xm(e,s.html,r),s.content}).getOr(t)},hT="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),bT=[],vT="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),JC=[],e1=(e,t)=>{const n=We(t,o=>je(e,o));return Kr(n)},t1=(e,t)=>{const n=le.makeMap(e.plugins," "),o=We(t,r=>je(n,r));return Kr(o)},ET=e=>Yt(JC,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),yd=Bt.DOM,Cd=e=>k.from(e).each(t=>t.destroy()),wd=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>je(e,t)}})(),mi=Hn.ModelManager,n1=(e,t)=>t.dom[e],o1=(e,t)=>parseInt(L(t,e),10),ST=xe(n1,"clientWidth"),kT=xe(n1,"clientHeight"),_T=xe(o1,"margin-top"),NT=xe(o1,"margin-left"),r1=e=>{const t=[],n=()=>{const l=e.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>k.from(t[0]),r=()=>{o().each(l=>{l.reposition()})},s=l=>{qs(t,c=>c===l).each(c=>{t.splice(c,1)})},a=(l,c=!0)=>{return e.removed||!(f=(u=e).inline?u.getBody():u.getContentAreaContainer(),k.from(f).map(B)).map(ar).getOr(!1)?{}:(c&&e.dispatch("BeforeOpenNotification",{notification:l}),Yt(t,u=>{return!((f=n().getArgs(u)).type!==(p=l).type||f.text!==p.text||f.progressBar||f.timeout||p.progressBar||p.timeout);var f,p}).getOrThunk(()=>{e.editorManager.setActive(e);const u=n().open(l,()=>{s(u)},()=>Qb(e));return(f=>{t.push(f)})(u),r(),e.dispatch("OpenNotification",{notification:{...u}}),u}));var u,f},i=me(t);return(l=e).on("SkinLoaded",()=>{const c=u_(l);c&&a({text:c,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{J(t.slice(),c=>{n().close(c)})}),l.on("keydown",c=>{var u;const f="f12"===(null===(u=c.key)||void 0===u?void 0:u.toLowerCase())||123===c.keyCode;c.altKey&&f&&(c.preventDefault(),o().map(p=>B(p.getEl())).each(p=>$b(p)))}),{open:a,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:i};var l},pi=Hn.PluginManager,Aa=Hn.ThemeManager,s1=e=>{let t=[];const n=()=>{const a=e.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},o=(a,i)=>(...l)=>i?i.apply(a,l):void 0,r=a=>{e.dispatch("CloseWindow",{dialog:a}),t=We(t,i=>i!==a),0===t.length&&e.focus()},s=a=>{e.editorManager.setActive(e),Zc(e),e.ui.show();const i=a();return t.push(l=i),e.dispatch("OpenWindow",{dialog:l}),i;var l};return e.on("remove",()=>{J(t,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,r)),openUrl:a=>s(()=>n().openUrl(a,r)),alert:(a,i,l)=>{const c=n();c.alert(a,o(l||c,i))},confirm:(a,i,l)=>{const c=n();c.confirm(a,o(l||c,i))},close:()=>{k.from(t[t.length-1]).each(a=>{n().close(a),r(a)})}}},a1=(e,t)=>{e.notificationManager.open({type:"error",text:t})},xd=(e,t)=>{e._skinLoaded?a1(e,t):e.on("SkinLoaded",()=>{a1(e,t)})},Pl=(e,t,n)=>{yb(e,t,{message:n}),console.error(n)},Ll=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,Ed=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},np=e=>"content/"+e+"/content.css",i1=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return nt(t,r=>tinymce.Resource.has(np(r))?r:/^[a-z0-9\-]+$/i.test(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},l1=()=>{let e={};const t=(o,r)=>({status:o,resultUri:r}),n=o=>o in e;return{hasBlobUri:n,getResultUri:o=>{const r=e[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===e[o].status,isUploaded:o=>!!n(o)&&2===e[o].status,markPending:o=>{e[o]=t(1,null)},markUploaded:(o,r)=>{e[o]=t(2,r)},removeFailed:o=>{delete e[o]},destroy:()=>{e={}}}};let TT=0;const c1=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),d1=(e,t)=>((e,t)=>{const n={},o=(l,c)=>new Promise((u,f)=>{const p=new XMLHttpRequest;p.open("POST",t.url),p.withCredentials=t.credentials,p.upload.onprogress=g=>{c(g.loaded/g.total*100)},p.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+p.status)},p.onload=()=>{if(p.status<200||p.status>=300)return void f("HTTP Error: "+p.status);const g=JSON.parse(p.responseText);var v,h;g&&Te(g.location)?u((h=g.location,(v=t.basePath)?v.replace(/\/$/,"")+"/"+h.replace(/^\//,""):h)):f("Invalid JSON: "+p.responseText)};const b=new FormData;b.append("file",l.blob(),l.filename()),p.send(b)}),r=bt(t.handler)?t.handler:o,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{le.each(n[l],u=>{u(c)}),delete n[l]};return{upload:(l,c)=>{return t.url||r!==o?(f=c,u=le.grep(u=l,p=>!e.isUploaded(p.blobUri())),Promise.all(le.map(u,p=>{return e.isPending(p.blobUri())?(b=>{const g=b.blobUri();return new Promise(v=>{n[g]=n[g]||[],n[g].push(v)})})(p):(g=r,v=f,e.markPending((b=p).blobUri()),new Promise(h=>{let y,E;try{const S=()=>{y&&(y.close(),E=ke)},A=R=>{S(),e.markUploaded(b.blobUri(),R),i(b.blobUri(),s(b,R)),h(s(b,R))},N=R=>{S(),e.removeFailed(b.blobUri()),i(b.blobUri(),a(b,R)),h(a(b,R))};E=R=>{R<0||R>100||k.from(y).orThunk(()=>k.from(v).map(yr)).each(M=>{y=M,M.progressBar.value(R)})},g(b,E).then(A,R=>{N(Te(R)?{message:R}:R)})}catch(S){h(a(b,S))}}));var b,g,v}))):new Promise(u=>{u([])});var u,f}}})(t,{url:Zk(e),basePath:Jk(e),credentials:e_(e),handler:t_(e)}),u1={remove_similar:!0,inherit:!1},gi={selector:"td,th",...u1},BT={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...gi},tablecellverticalalign:{styles:{"vertical-align":"%value"},...gi},tablecellbordercolor:{styles:{borderColor:"%value"},...gi},tablecellclass:{classes:["%value"],...gi},tableclass:{selector:"table",classes:["%value"],...u1},tablecellborderstyle:{styles:{borderStyle:"%value"},...gi},tablecellborderwidth:{styles:{borderWidth:"%value"},...gi}},DT=me(BT),Sd=le.each,Fo=Bt.DOM,op=e=>ce(e)&&Ve(e),f1=(e,t)=>{const n=t&&t.schema||_s({}),o=a=>{const i=Te(a)?{name:a,classes:[],attrs:{}}:a,l=Fo.create(i.name);return c=l,(u=i).classes.length>0&&Fo.addClass(c,u.classes.join(" ")),Fo.setAttribs(c,u.attrs),l;var c,u},r=(a,i,l)=>{let c;const u=i[0],f=op(u)?u.name:void 0,p=((v,h)=>{const y=n.getElementRule(v.nodeName.toLowerCase()),E=y?.parentsRequired;return!(!E||!E.length)&&(h&&Re(E,h)?h:E[0])})(a,f);if(p)f===p?(c=u,i=i.slice(1)):c=p;else if(u)c=u,i=i.slice(1);else if(!l)return a;const b=c?o(c):Fo.create("div");b.appendChild(a),l&&le.each(l,v=>{const h=o(v);b.insertBefore(h,a)});const g=op(c)?c.siblings:void 0;return r(b,i,g)},s=Fo.create("div");if(e.length>0){const a=e[0],i=o(a),l=op(a)?a.siblings:void 0;s.appendChild(r(i,e.slice(1),l))}return s},PT=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=le.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==le.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},LT=(e,t)=>{let n="",o=g_(e);if(""===o)return"";const r=b=>Te(b)?b.replace(/%(\w+)/g,""):"",s=(b,g)=>Fo.getStyle(g??e.getBody(),b,!0);if(Te(t)){const b=e.formatter.get(t);if(!b)return"";t=b[0]}if("preview"in t){const b=t.preview;if(!1===b)return"";o=b||o}let a,i=t.block||t.inline||"span";const l=Te(c=t.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),le.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),b=>{const g=le.map(b.split(/(?:~\+|~|\+)/),PT),v=g.pop();return g.length&&(v.siblings=g),v}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=i),i=t.selector,a=f1(l,e)):a=f1([i],e);const u=Fo.select(i,a)[0]||a.firstChild;Sd(t.styles,(b,g)=>{const v=r(b);v&&Fo.setStyle(u,g,v)}),Sd(t.attributes,(b,g)=>{const v=r(b);v&&Fo.setAttrib(u,g,v)}),Sd(t.classes,b=>{const g=r(b);Fo.hasClass(u,g)||Fo.addClass(u,g)}),e.dispatch("PreviewFormats"),Fo.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const f=s("fontSize"),p=/px$/.test(f)?parseInt(f,10):0;return Sd(o.split(" "),b=>{let g=s(b,u);if(!("background-color"===b&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(b),"#ffffff"===Vi(g).toLowerCase())||"color"===b&&"#000000"===Vi(g).toLowerCase())){if("font-size"===b&&/em|%$/.test(g)){if(0===p)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*p+"px"}"border"===b&&g&&(n+="padding:0 2px;"),n+=b+":"+g+";"}}),e.dispatch("AfterPreviewFormats"),Fo.remove(a),n},m1=e=>{const t=(o=>{const r={},s=(a,i)=>{a&&(Te(a)?(ae(i)||(i=[i]),J(i,l=>{jt(l.deep)&&(l.deep=!Po(l)),jt(l.split)&&(l.split=!Po(l)||ln(l)),jt(l.remove)&&Po(l)&&!ln(l)&&(l.remove="none"),Po(l)&&ln(l)&&(l.mixed=!0,l.block_expand=!0),Te(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[a]=i):yt(a,(l,c)=>{s(c,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},p={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[p,u,f]:[u,p,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,p)=>_e(u)&&u.hasAttribute("href"),onformat:(u,f,p)=>{le.each(p,(b,g)=>{i.setAttrib(u,g,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return null!==(f=u?.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return le.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{c[u]={block:u,remove:"all"}}),c})(o)),s(DT()),s(p_(o)),{get:a=>ce(a)?r[a]:r,has:a=>je(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(e),n=pn({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(o=e).on("mouseup keydown",r=>{var s;((a,i,l)=>{const c=a.selection,u=a.getBody();Rm(a,null,l),8!==i&&46!==i||!c.isCollapsed()||c.getStart().innerHTML!==Nl||Rm(a,va(u,c.getStart()),!0),37!==i&&39!==i||Rm(a,va(u,c.getStart()),!0)})(o,r.keyCode,(s=o.selection.getRng().endContainer,se(s)&&Xs(s.data,an)))}),Fr(e)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{Jy(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const a=k.from(s.node).map(i=>hl(i)?i:i.startContainer).bind(i=>_e(i)?k.some(i):k.from(i.parentElement)).getOrThunk(()=>Gy(r));Jy(r,a,o.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(o,r,s)=>{var i,l,c;i=o,l=r,c=s,on(e).formatter.apply(i,l,c)},remove:(o,r,s,a)=>{var l,c,u,f;l=o,c=r,u=s,f=a,on(e).formatter.remove(l,c,u,f)},toggle:(o,r,s)=>{var i,l,c;i=o,l=r,c=s,on(e).formatter.toggle(i,l,c)},match:(o,r,s,a)=>{return l=o,c=r,u=s,f=a,on(e).formatter.match(l,c,u,f);var l,c,u,f},closest:o=>{return s=o,on(e).formatter.closest(s);var s},matchAll:(o,r)=>{return a=o,i=r,on(e).formatter.matchAll(a,i);var a,i},matchNode:(o,r,s,a)=>{return l=o,c=r,u=s,f=a,on(e).formatter.matchNode(l,c,u,f);var l,c,u,f},canApply:o=>{return s=o,on(e).formatter.canApply(s);var s},formatChanged:(o,r,s,a)=>{return l=n,c=o,u=r,f=s,p=a,on(e).formatter.formatChanged(l,c,u,f,p);var l,c,u,f,p},getCssText:xe(LT,e)};var o},p1=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},g1=e=>{const t=rs(),n=pn(0),o=pn(0),r={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=t,on(e).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=r,c=o,u=n,f=t,p=s,b=a,on(e).undoManager.add(l,c,u,f,p,b);var l,c,u,f,p,b},dispatchChange:()=>{e.setDirty(!0);const s=bd(e);s.bookmark=rf(e.selection),e.dispatch("change",{level:s,lastLevel:$s(r.data,o.get()).getOrUndefined()})},undo:()=>{return a=r,i=n,l=o,on(e).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=o,i=r.data,on(e).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=r,i=o,on(e).undoManager.clear(a,i)},reset:()=>{var a;a=r,on(e).undoManager.reset(a)},hasUndo:()=>{return a=r,i=o,on(e).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=r,i=o,on(e).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=r,l=n,c=s,on(e).undoManager.transact(i,l,c);var i,l,c},ignore:s=>{var i,l;i=n,l=s,on(e).undoManager.ignore(i,l)},extra:(s,a)=>{var l,c,u,f;l=r,c=o,u=s,f=a,on(e).undoManager.extra(l,c,u,f)}};return Fr(e)||((s,a,i)=>{const l=pn(!1),c=u=>{vd(a,!1,i),a.add({},u)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",u=>{p1(u.command)||($C(a,i),a.beforeChange())}),s.on("ExecCommand",u=>{p1(u.command)||c(u)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",u=>{const f=u.keyCode;if(u.isDefaultPrevented())return;const p=gt.os.isMacOS()&&"Meta"===u.key;(f>=33&&f<=36||f>=37&&f<=40||45===f||u.ctrlKey||p)&&(c(),s.nodeChanged()),46!==f&&8!==f||s.nodeChanged(),l.get()&&a.typing&&!Zm(bd(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",u=>{const f=u.keyCode;if(!u.isDefaultPrevented()){if(!(f>=33&&f<=36||f>=37&&f<=40||45===f))return!(f<16||f>20)||224===f||91===f||a.typing||u.ctrlKey&&!u.altKey||u.metaKey?void((gt.os.isMacOS()?u.metaKey:u.ctrlKey&&!u.altKey)&&a.beforeChange()):(a.beforeChange(),vd(a,!0,i),a.add({},u),void l.set(!0));a.typing&&c(u)}}),s.on("mousedown",u=>{a.typing&&c(u)}),s.on("input",u=>{var f,p;u.inputType&&("insertReplacementText"===u.inputType||"insertText"===(f=u).inputType&&null===f.data||"insertFromPaste"===(p=u).inputType||"insertFromDrop"===p.inputType)&&c(u)}),s.on("AddUndo Undo Redo ClearUndos",u=>{u.isDefaultPrevented()||s.nodeChanged()})})(e,r,n),(s=e).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),r;var s},MT=[9,27,ye.HOME,ye.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ye.DOWN,ye.UP,ye.LEFT,ye.RIGHT].concat(gt.browser.isFirefox()?[224]:[]),h1="data-mce-placeholder",b1=e=>"keydown"===e.type||"keyup"===e.type,v1=e=>{const t=e.keyCode;return t===ye.BACKSPACE||t===ye.DELETE},IT=(e,t)=>({from:e,to:t}),rp=(e,t)=>{const n=B(e),o=B(t.container());return ad(n,o).map(r=>((s,a)=>({block:s,position:a}))(r,t))},y1=(e,t)=>Qn(t,n=>nl(n)||Yo(n.dom),n=>Fe(n,e)).filter(Un).getOr(e),C1=(e,t)=>{const n=((o,r)=>{const s=xt(o);return qs(s,a=>r.isBlock(mt(a))).fold(me(s),a=>s.slice(0,a))})(e,t);return J(n,Ye),n},w1=(e,t,n)=>{const o=is(n,t);return Yt(o.reverse(),r=>In(e,r)).each(Ye)},FT=(e,t,n,o,r)=>{if(In(o,n))return Ns(n),jn(n.dom);var a;a=o,0===We(Jr(r),l=>!In(a,l)).length&&In(o,t)&&Oe(r,Pe("br"));const s=uo(n.dom,G.before(r.dom));return J(C1(t,o),a=>{Oe(r,a)}),w1(o,e,t),s},jT=(e,t,n,o)=>{if(In(o,n)){if(In(o,t)){const a=Vr((i=>{const l=(c,u)=>kn(c).fold(()=>u,f=>o.isInline(mt(f))?l(f,u.concat(ua(f))):u);return l(i,[])})(n),(i,l)=>(At(i,l),l),Ga());ft(t),Ee(t,a)}return Ye(n),jn(t.dom)}const r=Go(n.dom);return J(C1(t,o),s=>{Ee(n,s)}),w1(o,e,t),r},x1=(e,t)=>{ri(e,t.dom).bind(n=>k.from(n.getNode())).map(B).filter(ma).each(Ye)},E1=(e,t,n,o)=>{return x1(!0,t),x1(!1,n),(r=t,s=n,Sn(s,r)?((a,i)=>{const l=is(i,a);return k.from(l[l.length-1])})(s,r):k.none()).fold(xe(jT,e,t,n,o),xe(FT,e,t,n,o));var r,s},S1=(e,t,n,o,r)=>t?E1(e,o,n,r):E1(e,n,o,r),sp=(e,t)=>{const n=B(e.getBody());return(r=e.schema,s=n.dom,a=t,i=e.selection.getRng(),i.collapsed?((l,c,u,f)=>{const p=rp(c,G.fromRangeStart(f)),b=p.bind(g=>Oo(u,c,g.position).bind(v=>rp(c,v).map(h=>{return y=l,E=c,S=u,Ht((A=h).position.getNode())&&!In(y,A.block)?ri(!1,A.block.dom).bind(N=>N.isEqual(A.position)?Oo(S,E,N).bind(R=>rp(E,R)):k.some(A)).getOr(A):A;var y,E,S,A})));return yn(p,b,IT).filter(g=>{return!Fe((v=g).from.block,v.to.block)&&((v,h)=>{const y=B(v);return Fe(y1(y,h.from.block),y1(y,h.to.block))})(c,g)&&(v=>!1===Pt(v.from.block.dom)&&!1===Pt(v.to.block.dom))(g)&&(v=>{const h=y=>Sh(y)||Nu(y.dom)||Ya(y);return h(v.from.block)&&h(v.to.block)})(g)&&(v=>!(Sn(v.to.block,v.from.block)||Sn(v.from.block,v.to.block)))(g);var v})})(r,s,a,i):k.none()).map(r=>()=>{S1(n,t,r.from.block,r.to.block,e.schema).each(s=>{e.selection.setRng(s.toRange())})});var r,s,a,i},k1=(e,t)=>{const n=B(t),o=xe(Fe,e);return To(n,nl,o).isSome()},ap=(e,t)=>e.selection.isCollapsed()?k.none():(e=>{const t=B(e.getBody());return((n,o)=>{const r=uo(n.dom,G.fromRangeStart(o)).isNone(),s=to(n.dom,G.fromRangeEnd(o)).isNone();return!(k1(a=n,(i=o).startContainer)||k1(a,i.endContainer))&&r&&s;var a,i})(t,e.selection.getRng())?(n=e,k.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o,r)=>{const s=o.getRng();return yn(ad(n,B(s.startContainer)),ad(n,B(s.endContainer)),(a,i)=>Fe(a,i)?k.none():k.some(()=>{s.deleteContents(),S1(n,!0,a,i,r).each(l=>{o.setRng(l.toRange())})})).getOr(k.none())})(t,e.selection,e.schema);var n})(e),ls=(e,t,n,o,r)=>k.from(t._selectionOverrides.showCaret(e,n,o,r)),Ml=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?k.none():k.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(t)),ip=(e,t,n)=>t.collapsed?((o,r,s)=>{const a=pf(1,o.getBody(),r),i=G.fromRangeStart(a),l=i.getNode();if(cl(l))return ls(1,o,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(cl(c))return ls(1,o,c,!1,!1);const u=ka(o.dom.getRoot(),i.getNode());return cl(u)?ls(1,o,u,!1,s):k.none()})(e,t,n).getOr(t):t,UT=e=>Ls(e)||wl(e),HT=e=>Ms(e)||xl(e),_1=(e,t,n,o,r,s)=>{var a,i;ls(o,e,s.getNode(!r),r,!0).each(a=>{if(t.collapsed){const i=t.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else t.deleteContents();e.selection.setRng(a)}),a=e.dom,se(i=n)&&0===i.data.length&&a.remove(i)},lp=(e,t)=>((n,o)=>{const r=n.selection.getRng();if(!se(r.commonAncestorContainer))return k.none();const s=o?hn.Forwards:hn.Backwards,a=Lr(n.getBody()),i=xe(gf,o?a.next:a.prev),l=o?UT:HT,c=pl(s,n.getBody(),r),u=i(c),f=u&&Mo(o,u);if(!f||!Fc(c,f))return k.none();if(l(f))return k.some(()=>_1(n,r,c.getNode(),s,o,f));const p=i(f);return p&&l(p)&&Fc(f,p)?k.some(()=>_1(n,r,c.getNode(),s,o,p)):k.none()})(e,t),cp=(e,t)=>{const n=e.getBody();return t?jn(n).filter(Ls):Go(n).filter(Ms)},dp=e=>{const t=e.selection.getRng();return!t.collapsed&&(cp(e,!0).exists(n=>n.isEqual(G.fromRangeStart(t)))||cp(e,!1).exists(n=>n.isEqual(G.fromRangeEnd(t))))},jo=Br([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),N1=(e,t,n,o)=>Oo(t,e,n).bind(r=>{return s=r.getNode(),ce(s)&&(nl(B(s))||Ya(B(s)))||((a,i,l,c,u)=>{const f=p=>u.isInline(p.nodeName.toLowerCase())&&!Dr(l,c,a);return M0(!i,l).fold(()=>M0(i,c).fold(vt,f),f)})(e,t,n,r,o)?k.none():t&&Pt(r.getNode())||!t&&Pt(r.getNode(!0))?((a,i,l,c,u)=>{const f=u.getNode(!l);return ad(B(i),B(c.getNode())).map(p=>In(a,p)?jo.remove(p.dom):jo.moveToElement(f)).orThunk(()=>k.some(jo.moveToElement(f)))})(o,e,t,n,r):t&&Ms(n)||!t&&Ls(n)?k.some(jo.moveToPosition(r)):k.none();var s}),A1=(e,t)=>k.from(ka(e.getBody(),t)),T1=e=>{const t=e.dom,n=e.selection,o=ka(e.getBody(),n.getNode());if(Yo(o)&&t.isBlock(o)&&t.isEmpty(o)){const r=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(r),n.setRng(G.before(r).toRange())}return!0},up=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=e.selection.getNode();return A1(e,n).filter(Pt).fold(()=>((o,r,s,a)=>{const i=pf(r?1:-1,o,s),l=G.fromRangeStart(i),c=B(o);return!r&&Ms(l)?k.some(jo.remove(l.getNode(!0))):r&&Ls(l)?k.some(jo.remove(l.getNode())):!r&&Ls(l)&&od(c,l,a)?Nv(c,l,a).map(u=>jo.remove(u.getNode())):r&&Ms(l)&&tm(c,l,a)?lA(c,l,a).map(u=>jo.remove(u.getNode())):(u=o,b=a,((g,v)=>{const h=v.getNode(!g),y=g?"after":"before";return _e(h)&&h.getAttribute("data-mce-caret")===y})(f=r,p=l)?(g=f,v=p.getNode(!f),wt(v)?k.none():g&&Pt(v.nextSibling)?k.some(jo.moveToElement(v.nextSibling)):!g&&Pt(v.previousSibling)?k.some(jo.moveToElement(v.previousSibling)):k.none()).orThunk(()=>N1(u,f,p,b)):N1(u,f,p,b).bind(g=>((v,h,y)=>y.fold(E=>k.some(jo.remove(E)),E=>k.some(jo.moveToElement(E)),E=>Dr(h,E,v)?k.none():k.some(jo.moveToPosition(E))))(u,p,g)));var u,f,p,b,g,v})(e.getBody(),t,e.selection.getRng(),e.schema).map(o=>()=>o.fold(((r,s)=>a=>(r._selectionOverrides.hideFakeCaret(),Ea(r,s,B(a)),!0))(e,t),((r,s)=>a=>{const i=s?G.before(a):G.after(a);return r.selection.setRng(i.toRange()),!0})(e,t),(r=>s=>(r.selection.setRng(s.toRange()),!0))(e))),()=>k.some(ke))})(e,t):((n,o)=>{const r=n.selection.getNode();return Pt(r)&&!vc(r)?A1(n,r.parentNode).filter(Pt).fold(()=>k.some(()=>{var s;s=B(n.getBody()),J(Jn(s,".mce-offscreen-selection"),Ye),Ea(n,o,B(n.selection.getNode())),am(n)}),()=>k.some(ke)):dp(n)?k.some(()=>{Yv(n,n.selection.getRng(),B(n.getBody()))}):k.none()})(e,t),R1=e=>e.hasOwnProperty("text"),O1=e=>e.hasOwnProperty("marker"),B1=(e,t)=>{const n=(r,s)=>{if(se(r))return{text:r,offset:s};{const a=t(),i=r.childNodes;return s<i.length?(r.insertBefore(a,i[s]),{marker:a,before:!0}):(r.appendChild(a),{marker:a,before:!1})}},o=n(e.endContainer,e.endOffset);return{start:n(e.startContainer,e.startOffset),end:o}},D1=e=>{var t,n;const{start:o,end:r}=e,s=new window.Range;return R1(o)?s.setStart(o.text,o.offset):O1(o)&&(o.before?s.setStartBefore(o.marker):s.setStartAfter(o.marker),null===(t=o.marker.parentNode)||void 0===t||t.removeChild(o.marker)),R1(r)?s.setEnd(r.text,r.offset):O1(r)&&(r.before?s.setEndBefore(r.marker):s.setEndAfter(r.marker),null===(n=r.marker.parentNode)||void 0===n||n.removeChild(r.marker)),s},fp=(e,t)=>{var n;const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),s=o.getParent(e.selection.getEnd(),o.isBlock),a=e.getBody();if("div"===(null===(n=r?.nodeName)||void 0===n?void 0:n.toLowerCase())&&r&&s&&r===a.firstChild&&s===a.lastChild&&!o.isEmpty(a)){const i=r.cloneNode(!1);return k.some(()=>{if(t?Vv(e):sd(e),a.firstChild!==r){const c=B1(e.selection.getRng(),()=>document.createElement("span"));Array.from(a.childNodes).forEach(u=>i.appendChild(u)),a.appendChild(i),e.selection.setRng(D1(c))}})}return k.none()},mp=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=G.fromRangeStart(n.selection.getRng());return Oo(o,n.getBody(),r).filter(s=>o?oA(s):rA(s)).bind(s=>mf(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(e,t):k.none(),hi=se,P1=e=>hi(e)&&e.data[0]===gn,L1=e=>hi(e)&&e.data[e.data.length-1]===gn,M1=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(gn)},kd=(e,t)=>e?(n=>{var o;if(hi(n.previousSibling))return L1(n.previousSibling)||n.previousSibling.appendData(gn),n.previousSibling;if(hi(n))return P1(n)||n.insertData(0,gn),n;{const r=M1(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(t):(n=>{var o,r;if(hi(n.nextSibling))return P1(n.nextSibling)||n.nextSibling.insertData(0,gn),n.nextSibling;if(hi(n))return L1(n)||n.appendData(gn),n;{const s=M1(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(s,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(s),s}})(t),$T=xe(kd,!0),WT=xe(kd,!1),I1=(e,t)=>se(e.container())?kd(t,e.container()):kd(t,e.getNode()),F1=(e,t)=>{const n=t.get();return n&&e.container()===n&&As(n)},pp=(e,t)=>t.fold(n=>{ha(e.get());const o=$T(n);return e.set(o),k.some(G(o,o.length-1))},n=>jn(n).map(o=>{if(F1(o,e)){const r=e.get();return G(r,1)}{ha(e.get());const r=I1(o,!0);return e.set(r),G(r,1)}}),n=>Go(n).map(o=>{if(F1(o,e)){const r=e.get();return G(r,r.length-1)}{ha(e.get());const r=I1(o,!1);return e.set(r),G(r,r.length-1)}}),n=>{ha(e.get());const o=WT(n);return e.set(o),k.some(G(o,1))}),j1=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n].apply(null,t);if(o.isSome())return o}return k.none()},$n=Br([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),z1=(e,t)=>Os(t,e)||e,VT=(e,t,n)=>{const o=qv(n),r=z1(t,o.container());return Is(e,r,o).fold(()=>to(r,o).bind(xe(Is,e,r)).map(s=>$n.before(s)),k.none)},KT=(e,t)=>null===va(e,t),U1=(e,t,n)=>Is(e,t,n).filter(xe(KT,t)),XT=(e,t,n)=>{const o=$v(n);return U1(e,t,o).bind(r=>uo(r,o).isNone()?k.some($n.start(r)):k.none())},YT=(e,t,n)=>{const o=qv(n);return U1(e,t,o).bind(r=>to(r,o).isNone()?k.some($n.end(r)):k.none())},GT=(e,t,n)=>{const o=$v(n),r=z1(t,o.container());return Is(e,r,o).fold(()=>uo(r,o).bind(xe(Is,e,r)).map(s=>$n.after(s)),k.none)},H1=e=>!Hv(gp(e)),jr=(e,t,n)=>j1([VT,XT,YT,GT],[e,t,n]).filter(H1),gp=e=>e.fold(pt,pt,pt,pt),q1=e=>e.fold(me("before"),me("start"),me("end"),me("after")),_d=e=>e.fold($n.before,$n.before,$n.after,$n.after),hp=e=>e.fold($n.start,$n.start,$n.end,$n.end),QT=(e,t,n,o,r,s)=>yn(Is(t,n,o),Is(t,n,r),(a,i)=>a!==i&&((l,c,u)=>{const f=Os(c,l),p=Os(u,l);return ce(f)&&f===p})(n,a,i)?$n.after(e?a:i):s).getOr(s),ZT=(e,t)=>e.fold(Ut,n=>{return r=t,!(q1(o=n)===q1(r)&&gp(o)===gp(r));var o,r}),JT=(e,t)=>e?t.fold(Dn(k.some,$n.start),k.none,Dn(k.some,$n.after),k.none):t.fold(k.none,Dn(k.some,$n.before),k.none,Dn(k.some,$n.end)),$1=(e,t,n)=>{const o=e?1:-1;return t.setRng(G(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var zr;!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(zr||(zr={}));const Nd=(e,t)=>e===hn.Backwards?er(t):t,eR=(e,t,n)=>e===hn.Forwards?t.next(n):t.prev(n),tR=(e,t,n,o)=>Ht(o.getNode(t===hn.Forwards))?zr.Br:!1===Dr(n,o)?zr.Block:zr.Wrap,W1=(e,t,n,o)=>{const r=Lr(n);let s=o;const a=[];for(;s;){const i=eR(t,r,s);if(!i)break;if(Ht(i.getNode(!1)))return t===hn.Forwards?{positions:Nd(t,a).concat([i]),breakType:zr.Br,breakAt:k.some(i)}:{positions:Nd(t,a),breakType:zr.Br,breakAt:k.some(i)};if(i.isVisible()){if(e(s,i)){const l=tR(0,t,s,i);return{positions:Nd(t,a),breakType:l,breakAt:k.some(i)}}a.push(i),s=i}else s=i}return{positions:Nd(t,a),breakType:zr.Eol,breakAt:k.none()}},V1=(e,t,n,o)=>t(n,o).breakAt.map(r=>{const s=t(n,r).positions;return e===hn.Backwards?s.concat(r):[r].concat(s)}).getOr([]),bp=(e,t)=>bn(e,(n,o)=>n.fold(()=>k.some(o),r=>yn(En(r.getClientRects()),En(o.getClientRects()),(s,a)=>{const i=Math.abs(t-s.left);return Math.abs(t-a.left)<=i?o:r}).or(n)),k.none()),Ad=(e,t)=>En(t.getClientRects()).bind(n=>bp(e,n.left)),Il=xe(W1,G.isAbove,-1),Fl=xe(W1,G.isBelow,1),K1=xe(V1,-1,Il),X1=xe(V1,1,Fl),Y1=(e,t)=>Il(e,t).breakAt.isNone(),G1=(e,t)=>Fl(e,t).breakAt.isNone(),nR=(e,t)=>Ad(K1(e,t),t),oR=(e,t)=>Ad(X1(e,t),t),rR=Pt,Q1=(e,t)=>Math.abs(e.left-t),Z1=(e,t)=>Math.abs(e.right-t),J1=(e,t)=>gs(e,(n,o)=>{const r=Math.min(Q1(n,t),Z1(n,t)),s=Math.min(Q1(o,t),Z1(o,t));return s===r&&dn(o,"node")&&rR(o.node)||s<r?o:n}),sR=e=>{const t=n=>nt(n,o=>{const r=pa(o);return r.node=e,r});if(_e(e))return t(e.getClientRects());if(se(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},ew=e=>Gt(e,sR);var jl;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(jl||(jl={}));const tw=(e,t,n,o,r,s)=>{let a=0;const i=[],l=f=>{let p=ew([f]);-1===e&&(p=p.reverse());for(let b=0;b<p.length;b++){const g=p[b];if(!n(g,c)){if(i.length>0&&t(g,Xr(i))&&a++,g.line=a,r(g))return!0;i.push(g)}}return!1},c=Xr(s.getClientRects());if(!c)return i;const u=s.getNode();return u&&(l(u),((f,p,b,g)=>{let v=g;for(;v=ul(v,f,Dh,p);)if(b(v))return})(e,o,l,u)),i},aR=xe(tw,jl.Up,ol,rl),iR=xe(tw,jl.Down,rl,ol),nw=e=>Xr(e.getClientRects()),ow=e=>t=>t.line>e,vp=e=>t=>t.line===e,cs=(e,t)=>{e.selection.setRng(t),Cl(e,e.selection.getRng())},yp=(e,t,n)=>k.some(ip(e,t,n)),rw=(e,t,n,o,r,s)=>{const a=t===hn.Forwards,i=Lr(e.getBody()),l=xe(gf,a?i.next:i.prev),c=a?o:r;if(!n.collapsed){const g=Tc(n);if(s(g))return ls(t,e,g,t===hn.Backwards,!1);if(dp(e)){const v=n.cloneRange();return v.collapse(t===hn.Backwards),k.from(v)}}const u=pl(t,e.getBody(),n);if(c(u))return Ml(e,u.getNode(!a));let f=l(u);const p=_h(n);if(!f)return p?k.some(n):k.none();if(f=Mo(a,f),c(f))return ls(t,e,f.getNode(!a),a,!1);const b=l(f);return b&&c(b)&&Fc(f,b)?ls(t,e,b.getNode(!a),a,!1):p?yp(e,f.toRange(),!1):k.none()},sw=(e,t,n,o,r,s)=>{const a=pl(t,e.getBody(),n),i=Xr(a.getClientRects()),l=t===jl.Down,c=e.getBody();if(!i)return k.none();if(dp(e)){const v=l?G.fromRangeEnd(n):G.fromRangeStart(n);return(l?oR:nR)(c,v).orThunk(()=>k.from(v)).map(h=>h.toRange())}const u=(l?iR:aR)(c,ow(1),a),f=We(u,vp(1)),p=i.left,b=J1(f,p);if(b&&s(b.node)){const v=Math.abs(p-b.left),h=Math.abs(p-b.right);return ls(t,e,b.node,v<h,!1)}let g;if(g=o(a)?a.getNode():r(a)?a.getNode(!0):Tc(n),g){const v=((y,E,S,A)=>{const N=Lr(E);let R,M,P,z;const W=[];let D=0;1===y?(R=N.next,M=rl,P=ol,z=G.after(A)):(R=N.prev,M=ol,P=rl,z=G.before(A));const I=nw(z);do{if(!z.isVisible())continue;const j=nw(z);if(P(j,I))continue;W.length>0&&M(j,Xr(W))&&D++;const Q=pa(j);if(Q.position=z,Q.line=D,S(Q))return W;W.push(Q)}while(z=R(z));return W})(t,c,ow(1),g);let h=J1(We(v,vp(1)),p);if(h||(h=Xr(We(v,vp(0))),h))return yp(e,h.position.toRange(),!1)}return 0===f.length?Cp(e,l).filter(l?r:o).map(v=>ip(e,v.toRange(),!1)):k.none()},Cp=(e,t)=>{const n=e.selection.getRng(),o=t?G.fromRangeEnd(n):G.fromRangeStart(n),r=(s=o.container(),a=e.getBody(),To(B(s),i=>fN(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(t){const i=Fl(r,o);return tr(i.positions)}{const i=Il(r,o);return En(i.positions)}},aw=(e,t,n)=>Cp(e,t).filter(n).exists(o=>(e.selection.setRng(o.toRange()),!0)),Td=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},iw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},lw=(e,t,n)=>pp(t,n).map(o=>(Td(e,o),n)),cw=(e,t,n)=>!!ll(e)&&((e,t,n)=>{const o=e.getBody(),r=((s,a,i)=>{const l=G.fromRangeStart(s);if(s.collapsed)return l;{const c=G.fromRangeEnd(s);return i?uo(a,c).getOr(c):to(a,l).getOr(l)}})(e.selection.getRng(),o,n);return((s,a,i,l)=>{const c=Mo(s,l),u=jr(a,i,c);return jr(a,i,c).bind(xe(JT,s)).orThunk(()=>((f,p,b,g,v)=>{const h=Mo(f,v);return Oo(f,b,h).map(xe(Mo,f)).fold(()=>g.map(_d),y=>jr(p,b,y).map(xe(QT,f,p,b,h,y)).filter(xe(ZT,g))).filter(H1)})(s,a,i,u,l))})(n,xe(Sa,e),o,r).bind(s=>lw(e,t,s))})(e,t,n).isSome(),dw=(e,t,n)=>!!ll(t)&&((o,r)=>{const s=r.selection.getRng(),a=o?G.fromRangeEnd(s):G.fromRangeStart(s);return!!bt(r.selection.getSel().modify)&&(o&&Ku(a)?$1(!0,r.selection,a):!(o||!Xu(a))&&$1(!1,r.selection,a))})(e,t),dR=xe(dw,!0),uR=xe(dw,!1),Rd=(e,t,n)=>{if(ll(e)){const o=Cp(e,t).getOrThunk(()=>{const r=e.selection.getRng();return t?G.fromRangeEnd(r):G.fromRangeStart(r)});return jr(xe(Sa,e),e.getBody(),o).exists(r=>{const s=_d(r);return pp(n,s).exists(a=>(Td(e,a),!0))})}return!1},uw=(e,t)=>n=>pp(t,n).map(o=>()=>Td(e,o)),fw=(e,t,n,o)=>{const r=e.getBody(),s=xe(Sa,e);e.undoManager.ignore(()=>{e.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),sd(e),jr(s,r,G.fromRangeStart(e.selection.getRng())).map(hp).bind(uw(e,t)).each(Kn)}),e.nodeChanged()},wp=(e,t,n)=>{if(e.selection.isCollapsed()&&ll(e)){const o=G.fromRangeStart(e.selection.getRng());return((r,s,a,i)=>{const l=(f=r.getBody(),p=i.container(),Os(p,f)||f),c=xe(Sa,r),u=jr(c,l,i);var f,p;return u.bind(f=>a?f.fold(me(k.some(hp(f))),k.none,me(k.some(_d(f))),k.none):f.fold(k.none,me(k.some(_d(f))),k.none,me(k.some(hp(f))))).map(uw(r,s)).getOrThunk(()=>{const f=oi(a,l,i),p=f.bind(b=>jr(c,l,b));return yn(u,p,()=>Is(c,l,i).bind(b=>{return yn(jn(g=b),Go(g),(v,h)=>{const y=Mo(!0,v),E=Mo(!1,h);return to(g,y).forall(S=>S.isEqual(E))}).getOr(!0)?k.some(()=>{Ea(r,a,B(b))}):k.none();var g})).getOrThunk(()=>p.bind(()=>f.map(b=>()=>{a?fw(r,s,i,b):fw(r,s,b,i)})))})})(e,t,n,o)}return k.none()},mw=(e,t)=>{const n=B(e.getBody()),o=B(e.selection.getStart()),r=is(o,n);return qs(r,t).fold(me(r),s=>r.slice(0,s))},fR=e=>1===_n(e),pw=(e,t)=>{const n=xe(Ey,e);return Gt(t,o=>n(o)?[o.dom]:[])},gw=e=>{const t=mw(n=e,o=>n.schema.isBlock(mt(o)));var n;return pw(e,t)},hw=(e,t)=>{const n=e.selection.getStart(),o=((r,s)=>{const a=s.parentElement;return Ht(s)&&!Ze(a)&&r.dom.isEmpty(a)})(e,n)||Df(B(n))?xy(n,t):((r,s)=>{const{caretContainer:a,caretPosition:i}=wy(s);return r.insertNode(a.dom),i})(e.selection.getRng(),t);e.selection.setRng(o.toRange())},bw=e=>se(e.startContainer),xp=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=We(mw(o=e,r=>o.schema.isBlock(mt(r))||_n(r)>1),fR);var o;return tr(n).bind(o=>{const r=G.fromRangeStart(e.selection.getRng());return Kv(t,r,o.dom)&&!Df(o)?k.some(()=>((s,a,i,l)=>{const c=pw(a,l);if(0===c.length)Ea(a,s,i);else{const u=xy(i.dom,c);a.selection.setRng(u.toRange())}})(t,e,o,n)):k.none()})})(e,t):(n=>{if((e=>{const t=e.selection.getRng();return 0===(n=t).startOffset&&bw(n)&&((n,o)=>{const r=o.startContainer.parentElement;return!Ze(r)&&Ey(n,B(r))})(e,t)&&(n=>{return(r=>{const s=r.startContainer.parentNode,a=r.endContainer.parentNode;return!Ze(s)&&!Ze(a)&&s.isEqualNode(a)})(o=n)&&(r=>{const s=r.endContainer;return r.endOffset===(se(s)?s.length:s.childNodes.length)})(o)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n);var o})(t);var n})(n)){const o=gw(n);return k.some(()=>{sd(n),((r,s)=>{const a=et(s,gw(r));a.length>0&&hw(r,a)})(n,o)})}return k.none()})(e),zl=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(bw(n)||t.dom.isEmpty(n.startContainer))&&(r=B((o=t).selection.getStart()),s=o.schema,!Ag(r,a=>Bo(a.dom),a=>s.isBlock(mt(a))));var o,r,s})(e)&&hw(e,[]),!0),Ep=(e,t,n)=>ce(n)?k.some(()=>{e._selectionOverrides.hideFakeCaret(),Ea(e,t,B(n))}):k.none(),Sp=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=o?wl:xl,a=pl(o?hn.Forwards:hn.Backwards,n.getBody(),n.selection.getRng());return r(a)?Ep(n,o,a.getNode(!o)):k.from(Mo(o,a)).filter(i=>r(i)&&Fc(a,i)).bind(i=>Ep(n,o,i.getNode(!o)))})(e,t):((n,o)=>{const r=n.selection.getNode();return Or(r)?Ep(n,o,r):k.none()})(e,t),kp=e=>Ys(e??"").getOr(0),vw=(e,t)=>(e||"table"===mt(t)?"margin":"padding")+("rtl"===L(t,"direction")?"-right":"-left"),yw=e=>{const t=ww(e);return!e.mode.isReadOnly()&&(t.length>1||(n=e,ro(t,r=>{const s=vw(f0(n),r),a=te(r,s).map(kp).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&a>0})));var n},Cw=e=>Vu(e)||Ya(e),ww=e=>We(tn(e.selection.getSelectedBlocks()),t=>!Cw(t)&&!so(t).exists(Cw)&&Qn(t,n=>Yo(n.dom)||Pt(n.dom)).exists(n=>Yo(n.dom))),xw=(e,t)=>{var n,o;if(e.mode.isReadOnly())return;const{dom:r}=e,s=r_(e),a=null!==(o=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",i=kp(s),l=f0(e);J(ww(e),c=>{((u,f,p,b,g,v)=>{const h=vw(p,B(v)),y=kp(u.getStyle(v,h));if("outdent"===f){const E=Math.max(0,y-b);u.setStyle(v,h,E?E+g:"")}else u.setStyle(v,h,y+b+g)})(r,t,l,i,a,c.dom)})},Ew=e=>xw(e,"outdent"),Sw=e=>{if(e.selection.isCollapsed()&&yw(e)){const t=e.dom,n=e.selection.getRng(),o=G.fromRangeStart(n),r=t.getParent(n.startContainer,t.isBlock);if(null!==r&&em(B(r),o,e.schema))return k.some(()=>Ew(e))}return k.none()},kw=(e,t,n)=>Xn([Sw,up,lp,(o,r)=>wp(o,t,r),sp,pm,mp,Sp,ap,xp,fp],o=>o(e,n)).filter(o=>e.selection.isEditable()),_w=e=>void 0===e.touches||1!==e.touches.length?k.none():k.some(e.touches[0]),_p=(e,t)=>je(e,t.nodeName),gR=(e,t)=>!!se(t)||!!_e(t)&&!(_p(e.getBlockElements(),t)||Do(t)||aa(e,t)||Su(t)),hR=(e,t)=>{if(se(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||_p(e,t.nextSibling)||Su(t.nextSibling)}return!1},Np=e=>e.dom.create(Fn(e),il(e)),Nw=(e,t,n)=>{const o=B(Np(e)),r=Ga();Ee(o,r),n(t,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},Aw=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),bR=(e,t,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?t.charAt(s-1):"";if('"'===a)return o;if(">"===a){const i=t.lastIndexOf("<",s);if(-1!==i&&-1!==t.substring(i,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},vR=(e,t)=>ro(e,n=>{const o=t.match(n);return null!==o&&o[0].length===t.length}),Tw=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Yu(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},yR=(e,t)=>{const n=es(B(e.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void Tw(e,n)):void(kh(n)&&(Tw(e,n),e.undoManager.add()))},Rw=Pt,Ow=(e,t,n)=>{const o=Lr(e.getBody()),r=xe(gf,1===t?o.next:o.prev);if(n.collapsed){const s=e.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(G.fromRangeStart(n))){const a=B((i=>{const l=i.dom.create(Fn(i));return l.innerHTML='<br data-mce-bogus="1">',l})(e));1===t?Ie(B(s),a):Oe(B(s),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},Bw=(e,t)=>((n,o)=>{const r=o?hn.Forwards:hn.Backwards,s=n.selection.getRng();return(a=r,i=n,l=s,rw(i,a,l,Ls,Ms,Rw)).orThunk(()=>(Ow(n,r,s),k.none()));var a,i,l})(e,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return Hv(r)?!o:o})(e.selection,t)).exists(n=>(cs(e,n),!0)),Dw=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return(a=r,i=n,l=s,sw(i,a,l,c=>Ls(c)||wv(c),c=>Ms(c)||Zf(c),Rw)).orThunk(()=>(Ow(n,r,s),k.none()));var a,i,l})(e,t).exists(n=>(cs(e,n),!0)),Pw=(e,t)=>aw(e,t,t?Ms:Ls),Od=(e,t)=>cp(e,!t).map(n=>{const o=n.toRange(),r=e.selection.getRng();return t?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(cs(e,n),!0)),CR=e=>Re(["figcaption"],mt(e)),Lw=(e,t)=>!!e.selection.isCollapsed()&&((n,o)=>{const r=B(n.getBody()),s=G.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const c=xe(Fe,i);return Qn(B(a.container()),u=>l.isBlock(mt(u)),c).filter(CR)})(s,r,n.schema).exists(()=>{if(a=r,l=s,o?G1(a.dom,l):Y1(a.dom,l)){const a=Nw(n,r,o?Ee:Qe);return n.selection.setRng(a),!0}var a,l;return!1})})(e,t),Mw=(e,t)=>{return n=e,t?k.from(n.dom.getParent(n.selection.getNode(),"details")).map(r=>((s,a)=>{const i=s.selection.getRng(),l=G.fromRangeStart(i);return!(s.getBody().lastChild!==a||!G1(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r)).getOr(!1):k.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(r=>k.from(n.dom.getParent(r,"details")).map(s=>((a,i,l)=>{const c=a.selection.getRng(),u=G.fromRangeStart(c);return!(a.getBody().firstChild!==i||!Y1(l,u)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,r))).getOr(!1);var n},Iw={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Fw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,He=(e,...t)=>()=>e.apply(null,t),Ul=(e,t)=>{return Yt((o=t,Gt(nt(e,s=>({...Iw,...s})),r=>Fw(r,o)?[r]:[])),n=>n.action());var o},jw=(e,t)=>{return Xn((o=t,Gt(nt(e,s=>({...Iw,...s})),r=>Fw(r,o)?[r]:[])),n=>n.action());var o},zw=(e,t)=>{const n=t?hn.Forwards:hn.Backwards,o=e.selection.getRng();return rw(e,n,o,wl,xl,Or).exists(r=>(cs(e,r),!0))},Uw=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return sw(e,n,o,wl,xl,Or).exists(r=>(cs(e,r),!0))},Hw=(e,t)=>aw(e,t,t?xl:wl),qw=Br([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Hl={...qw,none:e=>qw.none(e)},$w=(e,t,n)=>Gt(xt(e),o=>sn(o,t)?n(o)?[o]:[]:$w(o,t,n)),Ww=(e,t)=>lr(e,"table",t),Ap=(e,t,n,o,r=Ut)=>{const s=1===o;if(!s&&n<=0)return Hl.first(e[0]);if(s&&n>=e.length-1)return Hl.last(e[e.length-1]);{const a=n+o,i=e[a];return r(i)?Hl.middle(t,i):Ap(e,t,a,o,r)}},Vw=(e,t)=>Ww(e,t).bind(n=>{const o=$w(n,"th,td",Ut);return qs(o,r=>Fe(e,r)).map(r=>({index:r,all:o}))}),wR=["img","br"],xR=e=>{return(t=e,Wu.getOption(t)).filter(n=>0!==n.trim().length||n.indexOf(an)>-1).isSome()||Re(wR,mt(e))||Js(n=e)&&"false"===Gn(n,"contenteditable");var n,t},Kw=(e,t,n,o,r)=>{const s=Jn(B(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,c)=>bn(i,(u,f)=>u.fold(()=>k.some(f),p=>{const b=Math.sqrt(Math.abs(p.x-l)+Math.abs(p.y-c)),g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return k.some(g<b?f:p)}),k.none()))(We((i=e,Gt(s,c=>{const u={left:(f=pa(c.getBoundingClientRect())).left- -1,top:f.top- -1,right:f.right+-2,bottom:f.bottom+-2,width:f.width+-1,height:f.height+-1};var f;return[{x:u.left,y:i(u),cell:c},{x:u.right,y:i(u),cell:c}]})),i=>t(i,r)),o,r).map(i=>i.cell)},ER=xe(Kw,e=>e.bottom,(e,t)=>e.y<t),SR=xe(Kw,e=>e.top,(e,t)=>e.y>t),Xw=(e,t,n)=>{const o=e(t,n);return(r=o).breakType===zr.Wrap&&0===r.positions.length||!Ht(n.getNode())&&(r=>r.breakType===zr.Br&&1===r.positions.length)(o)?!((r,s,a)=>a.breakAt.exists(i=>r(s,i).breakAt.isSome()))(e,t,o):o.breakAt.isNone();var r},kR=xe(Xw,Il),_R=xe(Xw,Fl),NR=(e,t,n,o)=>{const r=e.selection.getRng(),s=t?1:-1;return!(!R0()||!((a,i,l)=>{const c=G.fromRangeStart(i);return ri(!a,l).exists(u=>u.isEqual(c))})(t,r,n)||(ls(s,e,n,!t,!1).each(a=>{cs(e,a)}),0))},Yw=(e,t,n)=>{const o=((s,a)=>{const i=a.getNode(s);return Rr(i)?k.some(i):k.none()})(!!t,n),r=!1===t;o.fold(()=>cs(e,n.toRange()),s=>ri(r,e.getBody()).filter(a=>a.isEqual(n)).fold(()=>cs(e,n.toRange()),a=>{return i=t,c=s,void(l=e).undoManager.transact(()=>{const u=i?Ie:Oe,f=Nw(l,B(c),u);cs(l,f)});var i,l,c}))},AR=(e,t,n,o)=>{const r=e.selection.getRng(),s=G.fromRangeStart(r),a=e.getBody();if(!t&&kR(o,s)){const i=(l=a,(f=c=n,p=u=s,En(p.getClientRects()).bind(b=>ER(f,b.left,b.top)).bind(b=>{return Ad(Go(g=b).map(v=>Il(g,v).positions.concat(v)).getOr([]),p);var g})).orThunk(()=>En(u.getClientRects()).bind(f=>bp(K1(l,G.before(c)),f.left))).getOr(G.before(c)));return Yw(e,t,i),!0}var l,c,u,f,p;if(t&&_R(o,s)){const i=((l,c,u)=>((f,p)=>tr(p.getClientRects()).bind(b=>SR(f,b.left,b.top)).bind(b=>{return Ad(jn(g=b).map(v=>[v].concat(Fl(g,v).positions)).getOr([]),p);var g}))(c,u).orThunk(()=>En(u.getClientRects()).bind(f=>bp(X1(l,G.after(c)),f.left))).getOr(G.after(c)))(a,n,s);return Yw(e,t,i),!0}return!1},Gw=(e,t,n)=>k.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(o=>k.from(e.dom.getParent(o,"table")).map(r=>n(e,t,r,o))).getOr(!1),Qw=(e,t)=>Gw(e,t,NR),Tp=(e,t)=>Gw(e,t,AR),Zw=(e,t,n)=>n.fold(k.none,k.none,(o,r)=>{return(s=r,Ua(s,xR)).map(a=>{return(e=>{const t=li.getWin(e).dom,n=(r,s,a,i)=>Mf(t,r,s,a,i),o=e.match({domRange:s=>{const a=B(s.startContainer),i=B(s.endContainer);return Rb(a,s.startOffset,i,s.endOffset)},relative:AN,exact:Rb});return((r,s)=>{var i;return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(u=>!1===u.collapsed).map(u=>yl.rtl(B(u.endContainer),u.endOffset,B(u.startContainer),u.startOffset)).getOrThunk(()=>Ab(0,yl.ltr,c)):Ab(0,yl.ltr,c)})(0,(i=r,s.match({domRange:c=>({ltr:me(c),rtl:k.none}),relative:(c,u)=>({ltr:Vo(()=>Nb(i,c,u)),rtl:Vo(()=>k.some(Nb(i,u,c)))}),exact:(c,u,f,p)=>({ltr:Vo(()=>Mf(i,c,u,f,p)),rtl:Vo(()=>k.some(Mf(i,f,p,c,u)))})})))})(t,o).match({ltr:n,rtl:n})})(li.exact(i=a,0,i,0));var i});var s},o=>e.mode.isReadOnly()?k.none():(e.execCommand("mceTableInsertRowAfter"),Jw(e,t,o))),Jw=(e,t,n)=>{return Zw(e,t,(r=cr,Vw(o=n,void 0).fold(()=>Hl.none(o),s=>Ap(s.all,o,s.index,1,r))));var o,r},TR=(e,t,n)=>{return Zw(e,t,(r=cr,Vw(o=n,void 0).fold(()=>Hl.none(),s=>Ap(s.all,o,s.index,-1,r))));var o,r},ex=(e,t)=>{const n=["table","li","dl"],o=B(e.getBody()),r=a=>{const i=mt(a);return Fe(a,o)||Re(n,i)},s=e.selection.getRng();return(a=B(t?s.endContainer:s.startContainer),i=r,((l,c,u=vt)=>u(c)?k.none():Re(l,mt(c))?k.some(c):ir(c,l.join(","),f=>sn(f,"table")||u(f)))(["td","th"],a,i)).map(a=>(Ww(a,r).each(i=>{e.model.table.clearSelectedCells(i.dom)}),e.selection.collapse(!t),(t?Jw:TR)(e,r,a).each(i=>{e.selection.setRng(i)}),!0)).getOr(!1);var a,i},hr=(e,t)=>({container:e,offset:t}),Bd=Bt.DOM,Dd=e=>t=>e===t?-1:0,Rp=(e,t,n)=>{if(se(e)&&t>=0)return k.some(hr(e,t));{const o=fa(Bd);return k.from(o.backwards(e,t,Dd(e),n)).map(r=>hr(r.container,r.container.data.length))}},Op=(e,t,n)=>{if(!se(e))return k.none();if(t>=0&&t<=e.data.length)return k.some(hr(e,t));{const r=fa(Bd);return k.from(r.backwards(e,t,Dd(e),n)).bind(s=>Op(s.container,t+s.container.data.length,n))}},tx=(e,t,n)=>{if(!se(e))return k.none();const o=e.data;if(t<=o.length)return k.some(hr(e,t));{const r=fa(Bd);return k.from(r.forwards(e,t,Dd(e),n)).bind(s=>tx(s.container,t-o.length,n))}},Bp=(e,t,n,o,r)=>{const s=fa(e,(a=>i=>a.isBlock(i)||Re(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i))(e));return k.from(s.backwards(t,n,o,r))},nx=e=>""!==e&&-1!==" \xa0\ufeff\f\n\r\t\v".indexOf(e),RR=(e,t)=>e.substring(t.length),Dp=(e,t,n,o=!1)=>{if(!(r=t).collapsed||!se(r.startContainer))return k.none();var r;const s={text:"",offset:0},a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return Bp(e,t.startContainer,t.startOffset,(i,l,c)=>(s.text=c+s.text,s.offset+=l,((u,f,p,b=!1)=>{let g;const v=p.charAt(0);for(g=f-1;g>=0;g--){const h=u.charAt(g);if(!b&&nx(h))return k.none();if(v===h&&un(u,p,g,f))break}return k.some(g)})(s.text,s.offset,n,o).getOr(l)),a).bind(i=>{const l=t.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(t.endContainer,t.endOffset),l.collapsed)return k.none();const c=yo(l.toString().replace(/\u00A0/g," "));return 0!==c.lastIndexOf(n)?k.none():k.some({text:RR(c,n),range:l,trigger:n})})},ox=e=>{if(3===e.nodeType)return hr(e,e.data.length);{const t=e.childNodes;return t.length>0?ox(t[t.length-1]):hr(e,t.length)}},rx=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?rx(n[t],0):n.length>0&&1===e.nodeType&&n.length===t?ox(n[n.length-1]):hr(e,t)},sx=(e,t,n,o={})=>{var r;const s=t(),a=null!==(r=e.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",i=We(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>(u=>f=>{const p=rx(f.startContainer,f.startOffset);return!((b,g)=>{var v;const h=null!==(v=b.getParent(g.container,b.isBlock))&&void 0!==v?v:b.getRoot();return Bp(b,g.container,g.offset,(y,E)=>0===E?-1:E,h).filter(y=>{const E=y.container.data.charAt(y.offset-1);return!nx(E)}).isSome()})(u,p)})(e.dom))(n.range,a,n.text));if(0===i.length)return k.none();const l=Promise.all(nt(i,c=>c.fetch(n.text,c.maxResults,o).then(u=>({matchText:n.text,items:u,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return k.some({lookupData:l,context:n})};var Ur;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(Ur||(Ur={}));const Pp=(e,t,n)=>e.stype===Ur.Error?t(e.serror):n(e.svalue),bi=e=>({stype:Ur.Value,svalue:e}),ql=e=>({stype:Ur.Error,serror:e}),OR=Pp,Lp=e=>Ve(e)&&rn(e).length>100?" removed due to size":JSON.stringify(e,null,2),Pd=(e,t)=>ql([{path:e,getErrorInfo:t}]),ax=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const s in r)je(r,s)&&(n[s]=e(n[s],r[s]))}return n},Mp=ax((e,t)=>Me(e)&&Me(t)?Mp(e,t):t),DR=ax((e,t)=>t),ix=e=>({tag:"defaultedThunk",process:me(e)}),lx=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Ip=e=>({extract:(t,n)=>{return(o=e(n)).stype===Ur.Error?Pd(t,me(o.serror)):o;var o},toString:me("val")}),LR=Ip(bi),cx=(e,t,n,o)=>o(Ot(e,t).getOrThunk(()=>n(e))),MR=(e,t,n,o,r)=>{const s=i=>r.extract(t.concat([o]),i),a=i=>i.fold(()=>bi(k.none()),l=>{return(u=r.extract(t.concat([o]),l)).stype===Ur.Value?{stype:Ur.Value,svalue:(0,k.some)(u.svalue)}:u;var u});switch(e.tag){case"required":return i=t,u=s,Ot(l=n,c=o).fold(()=>{return p=c,b=l,Pd(i,()=>'Could not find valid *required* value for "'+p+'" in '+Lp(b));var p,b},u);case"defaultedThunk":return cx(n,o,e.process,s);case"option":return((i,l,c)=>c(Ot(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,c,u)=>u(Ot(i,l).map(f=>!0===f?c(i):f)))(n,o,e.process,a);case"mergeWithThunk":return cx(n,o,me({}),i=>{const l=Mp(e.process(n),i);return s(l)})}var i,l,c,u},Fp=e=>({extract:(t,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)lx(l,(c,u,f,p)=>{const b=MR(f,o,r,c,p);OR(b,g=>{i.push(...g)},g=>{a[u]=g})},(c,u)=>{a[c]=u(r)});return i.length>0?ql(i):bi(a)})(t,n,e),toString:()=>"obj{\n"+nt(e,n=>lx(n,(o,r,s,a)=>o+" -> "+a.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),dx=e=>({extract:(t,n)=>(e=>{const t=(o=>{const r=[],s=[];return J(o,a=>{Pp(a,i=>s.push(i),i=>r.push(i))}),{values:r,errors:s}})(e);return t.errors.length>0?(n=t.errors,Dn(ql,nc)(n)):bi(t.values);var n})(nt(n,(r,s)=>e.extract(t.concat(["["+s+"]"]),r))),toString:()=>"array("+e.toString()+")"}),ux=(e,t)=>((e,t)=>({extract:(n,o)=>Ot(o,e).fold(()=>{return s=e,Pd(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},r=>{return s=n,a=o,Ot(i=t,l=r).fold(()=>{return u=i,f=l,Pd(s,()=>'The chosen schema: "'+f+'" did not exist in branches: '+Lp(u));var u,f},c=>c.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+e+"). Possible values: "+rn(t)}))(e,ps(t,Fp)),FR=me(LR),Ld=(e,t)=>Ip(n=>{const o=typeof n;return e(n)?bi(n):ql(`Expected type: ${t} but got: ${o}`)}),jR=Ld(w,"number"),Md=Ld(Te,"string"),zR=Ld(xn,"boolean"),jp=Ld(bt,"function"),$l=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),fx=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),mx=(e,t)=>$l(e,e,{tag:"required",process:{}},t),px=e=>mx(e,Md),gx=e=>mx(e,jp),zp=(e,t)=>$l(e,e,{tag:"option",process:{}},t),Id=e=>zp(e,Md),vi=(e,t,n)=>$l(e,e,ix(t),n),hx=(e,t)=>vi(e,t,jR),bx=(e,t)=>vi(e,t,Md),vx=(e,t,n)=>{return vi(e,t,(o=n,r=s=>Re(o,s)?eo.value(s):eo.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),Ip(s=>r(s).fold(ql,bi))));var o,r},Up=(e,t)=>vi(e,t,zR),Hp=(e,t)=>vi(e,t,jp),UR=px("type"),HR=gx("fetch"),qp=gx("onAction"),qR=Hp("onSetup",()=>ke),$R=Id("text"),WR=Id("icon"),VR=Id("tooltip"),KR=Id("label"),XR=Up("active",!1),YR=Up("enabled",!0),yx=Up("primary",!1),Wl=e=>bx("type",e),GR=Fp([UR,px("trigger"),hx("minChars",1),(e=>$l(e,e,ix(1),FR()))("columns"),hx("maxResults",10),zp("matches",jp),HR,qp,(Cx=Md,vi("highlightOn",[],dx(Cx)))]);var Cx;const $p=[YR,VR,WR,$R,qR,bx("context","mode:design")],wx=[XR].concat($p),QR=[Hp("predicate",vt),vx("scope","node",["node","editor"]),vx("position","selection",["node","selection","line"])],ZR=$p.concat([Wl("contextformbutton"),yx,qp,fx("original",pt)]),JR=wx.concat([Wl("contextformbutton"),yx,qp,fx("original",pt)]),eO=$p.concat([Wl("contextformbutton")]),tO=wx.concat([Wl("contextformtogglebutton")]),nO=ux("type",{contextformbutton:ZR,contextformtogglebutton:JR});Fp([Wl("contextform"),Hp("initValue",me("")),KR,((e,t)=>$l(e,e,{tag:"required",process:{}},dx(t)))("commands",nO),zp("launch",ux("type",{contextformbutton:eO,contextformtogglebutton:tO}))].concat(QR));const rO=e=>{const t=rs(),n=pn(!1),o=t.isSet,r=()=>{o()&&(e.dispatch("AutocompleterEnd"),n.set(!1),t.clear())},s=Vo(()=>(e=>{const t=e.ui.registry.getAll().popups,n=ps(t,s=>{return(a=s,((e,t,n)=>{return o=(i=t.extract([e],a=n)).stype===Ur.Error?{stype:Ur.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,Pp(o,eo.error,eo.value);var a,i,o})("Autocompleter",GR,a)).fold(i=>{throw new Error("Errors: \n"+(c=>{const u=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:me("... (only showing first ten failures)")}]):c;return nt(u,f=>"Failed path: ("+f.path.join(" > ")+")\n"+f.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+Lp(l.input));var l},pt);var a}),o=La(_r(n,s=>s.trigger)),r=Pa(n);return{dataset:n,triggers:o,lookupByTrigger:s=>We(r,a=>a.trigger===s)}})(e)),a=l=>{var c;(c=l,t.get().map(u=>Dp(e.dom,e.selection.getRng(),u.trigger,!0).bind(f=>sx(e,s,f,c))).getOrThunk(()=>((u,f)=>{const p=f(),b=u.selection.getRng();return(g=u.dom,v=b,h=p,Xn(h.triggers,y=>Dp(g,v,y))).bind(g=>sx(u,f,g));var g,v,h})(e,s))).fold(r,c=>{var u;u=c.context,o()||t.set({trigger:u.trigger,matchLength:u.text.length}),c.lookupData.then(u=>{t.get().map(f=>{const p=c.context;f.trigger===p.trigger&&(t.set({...f,matchLength:p.text.length}),n.get()?(Pf(e,{range:p.range}),e.dispatch("AutocompleterUpdate",{lookupData:u})):(n.set(!0),Pf(e,{range:p.range}),e.dispatch("AutocompleterStart",{lookupData:u})))})})})},i=()=>t.get().bind(({trigger:l})=>{const c=e.selection.getRng();return Dp(e.dom,c,l,n.get()).filter(({range:u})=>((f,p)=>{const b=f.compareBoundaryPoints(window.Range.START_TO_START,p),g=f.compareBoundaryPoints(window.Range.END_TO_END,p);return b>=0&&g<=0})(c,u)).map(({range:u})=>u)});e.addCommand("mceAutocompleterReload",(l,c)=>{const u=Ve(c)?c.fetchOptions:{};a(u)}),e.addCommand("mceAutocompleterClose",r),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{i().each(l=>{Pf(e,{range:l})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>i().isSome()),((l,c)=>{const u=$u(c.load,50);l.on("input",f=>{("insertCompositionText"!==f.inputType||l.composing)&&u.throttle()}),l.on("keydown",f=>{const p=f.which;8===p?u.throttle():27===p?(u.cancel(),c.cancelIfNecessary()):38!==p&&40!==p||u.cancel()},!0),l.on("remove",u.cancel)})(e,{cancelIfNecessary:r,load:a})},sO=Ln().browser.isSafari(),xx=e=>Ns(B(e)),Ex=(e,t)=>{var n;return 0===e.startOffset&&e.endOffset===(null===(n=t.textContent)||void 0===n?void 0:n.length)},Fd=(e,t)=>k.from(e.getParent(t.container(),"details")),Sx=(e,t)=>Fd(e,t).isSome(),kx=(e,t)=>{const n=t.getNode();jt(n)||e.selection.setCursorLocation(n,t.offset())},_x=(e,t,n)=>{const o=e.dom.getParent(t.container(),"details");if(o&&!o.open){const r=e.dom.select("summary",o)[0];r&&(n?jn(r):Go(r)).each(s=>kx(e,s))}else kx(e,t)},Nx=(e,t,n)=>{const{dom:o,selection:r}=e,s=e.getBody();if("character"===n){const a=G.fromRangeStart(r.getRng()),i=o.getParent(a.container(),o.isBlock),l=Fd(o,a),c=i&&o.isEmpty(i),u=Ze(i?.previousSibling),f=Ze(i?.nextSibling);return!!(c&&(t?f:u)&&oi(!t,s,a).exists(p=>Sx(o,p)&&!fc(l,Fd(o,p))))||oi(t,s,a).fold(vt,p=>{const b=Fd(o,p);if(Sx(o,p)&&!fc(l,b)){if(t||_x(e,p,!1),i&&c){if(t&&u||!t&&f)return!0;_x(e,p,t),e.dom.remove(i)}return!0}return!1})}return!1},Ta=(e,t,n)=>{return r=t,s=n,((a,i)=>{const l=k.from(a.getParent(i.startContainer,"details")),c=k.from(a.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const u=l.bind(f=>k.from(a.select("summary",f)[0]));return k.some({startSummary:u,startDetails:l,endDetails:c})}return k.none()})((o=e).dom,o.selection.getRng()).fold(()=>Nx(o,r,s),a=>((e,t,n,o)=>{const r=e.selection.getRng(),s=G.fromRangeStart(r),a=e.getBody();return"selection"===o?((i,l)=>{const c=l.startSummary.exists(p=>p.contains(i.startContainer)),u=l.startSummary.exists(p=>p.contains(i.endContainer)),f=l.startDetails.forall(p=>l.endDetails.forall(b=>p!==b));return(c||u)&&!(c&&u)||f})(r,t):n?(i=s,t.startSummary.exists(c=>{return u=i,Go(f=c).exists(p=>Ht(p.getNode())&&uo(f,p).exists(b=>b.isEqual(u))||p.isEqual(u));var u,f})||((i,l,c)=>c.startDetails.exists(u=>to(i,l).forall(f=>!u.contains(f.container()))))(a,s,t)):((i,l)=>l.startSummary.exists(c=>{return u=i,jn(c).exists(p=>p.isEqual(u));var u}))(s,t)||((i,l)=>l.startDetails.exists(c=>uo(c,i).forall(u=>l.startSummary.exists(f=>!f.contains(i.container())&&f.contains(u.container())))))(s,t);var i})(o,a,r,s)||Nx(o,r,s))||sO&&((o,r,s)=>{const a=o.selection,i=a.getNode(),l=a.getRng(),c=G.fromRangeStart(l);return!!ek(i)&&("selection"===s&&Ex(l,i)||Kv(r,c,i)?xx(i):o.undoManager.transact(()=>{const u=a.getSel();let{anchorNode:f,anchorOffset:p,focusNode:b,focusOffset:g}=u??{};const v=()=>{ce(f)&&ce(p)&&ce(b)&&ce(g)&&u?.setBaseAndExtent(f,p,b,g)},h=(E,S)=>{J(E.childNodes,A=>{hl(A)&&S.appendChild(A)})},y=o.dom.create("span",{"data-mce-bogus":"1"});h(i,y),i.appendChild(y),v(),"word"!==s&&"line"!==s||null==u||u.modify("extend",r?"right":"left",s),!a.isCollapsed()&&Ex(a.getRng(),y)?xx(i):(o.execCommand(r?"ForwardDelete":"Delete"),f=u?.anchorNode,p=u?.anchorOffset,b=u?.focusNode,g=u?.focusOffset,h(y,i),v()),o.dom.remove(y)}),!0)})(e,t,n)?k.some(ke):k.none();var o,r,s},Ax=e=>(t,n,o={})=>{const r=t.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:ke,inputType:n},a=lh(new InputEvent(e));return t.dispatch(e,{...a,...s,...o})},Vl=Ax("input"),jd=Ax("beforeinput"),Tx=Ln(),Rx=Tx.os,Ox=Rx.isMacOS()||Rx.isiOS(),iO=Tx.browser.isFirefox(),yi=(e,t)=>{const n=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const s=(a=>{for(;a;){if(_e(a)||se(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(t.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&t.insertBefore(n.doc.createTextNode(an),t.firstChild)}const r=n.createRng();if(t.normalize(),t.hasChildNodes()){const s=new mn(t,t);let a,i=t;for(;a=s.current();){if(se(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else Ht(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));e.selection.setRng(r),Cl(e,r)},Kl=(e,t)=>{const n=e.getRoot();let o,r=t;for(;r!==n&&r&&"false"!==e.getContentEditable(r);){if("true"===e.getContentEditable(r)){o=r;break}r=r.parentNode}return r!==n?o:n},Wp=e=>k.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Vp=e=>{e.innerHTML='<br data-mce-bogus="1">'},Xl=(e,t)=>{Fn(e).toLowerCase()===t.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;k.from(r.style).map(s.parseStyle).each(u=>{const f={...ne(B(o)),...u};s.setStyles(o,f)});const a=k.from(r.class).map(u=>u.split(/\s+/)),i=k.from(o.className).map(u=>We(u.split(/\s+/),f=>""!==f));yn(a,i,(u,f)=>{const p=We(f,g=>!Re(u,g)),b=[...u,...p];s.setAttrib(o,"class",b.join(" "))});const l=["style","class"],c=kr(r,(u,f)=>!Re(l,f));s.setAttribs(o,c)})(e,t,il(e))},Bx=(e,t,n,o,r=!0,s,a)=>{const i=e.dom,l=e.schema,c=Fn(e),u=n?n.nodeName.toUpperCase():"";let f=t;const p=l.getTextInlineElements();let b;b=s||"TABLE"===u||"HR"===u?i.create(s||c,a||{}):n.cloneNode(!1);let g=b;if(r){do{if(p[f.nodeName]){if(Bo(f)||Do(f))continue;const v=f.cloneNode(!1);i.setAttrib(v,"id",""),b.hasChildNodes()?(v.appendChild(b.firstChild),b.appendChild(v)):(g=v,b.appendChild(v))}}while((f=f.parentNode)&&f!==o)}else i.setAttrib(b,"style",null),i.setAttrib(b,"class",null);return Xl(e,b),Vp(g),b},Dx=(e,t)=>{const n=e?.parentNode;return ce(n)&&n.nodeName===t},Px=e=>ce(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Kp=e=>ce(e)&&/^(LI|DT|DD)$/.test(e.nodeName),zd=e=>{const t=e.parentNode;return Kp(t)?t:e},Ud=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];for(;o&&!_e(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},Lx=e=>bn(_r(ne(B(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),lO=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),Xp=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Yp=(e,t)=>ce(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),Gp=(e,t,n)=>se(t)?e?1===n&&t.data.charAt(n-1)===gn?0:n:n===t.data.length-1&&t.data.charAt(n)===gn?t.data.length:n:n,Mx={insert:(e,t)=>{let n,o,r,s,a=!1;const i=e.dom,l=e.schema.getNonEmptyElements(),c=e.selection.getRng(),u=Fn(e),f=B(c.startContainer),p=qt(f,c.startOffset),b=p.exists(z=>Js(z)&&!cr(z)),g=c.collapsed&&b,v=(z,W)=>Bx(e,n,N,A,Xk(e),z,W),h=z=>{const W=Gp(z,n,o);if(se(n)&&(z?W>0:W<n.data.length))return!1;if((n.parentNode===N||n===N)&&a&&!z||z&&_e(n)&&n===N.firstChild)return!0;if(Xp(n,"TABLE")||Xp(n,"HR"))return"BR"===(j=n).nodeName||j.nextSibling&&"BR"===j.nextSibling.nodeName?!z:a&&!z||!a&&z;var j;const D=new mn(n,N);let I;for(se(n)&&(z&&0===W?D.prev():z||W!==n.data.length||D.next());I=D.current();){if(_e(I)){if(!I.getAttribute("data-mce-bogus")){const j=I.nodeName.toLowerCase();if(l[j]&&"br"!==j)return!1}}else if(se(I)&&!Wa(I.data))return!1;z?D.prev():D.next()}return!0},y=()=>{let z;return z=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==R?v(u):v(),((W,D)=>{const I=Yk(W);return!wt(D)&&(Te(I)?Re(le.explode(I),D.nodeName.toLowerCase()):I)})(e,s)&&Yp(i,s)&&i.isEmpty(N,void 0,{includeZwsp:!0})?z=i.split(s,N):i.insertAfter(z,N),yi(e,z),z};Yc(i,c).each(z=>{c.setStart(z.startContainer,z.startOffset),c.setEnd(z.endContainer,z.endOffset)}),n=c.startContainer,o=c.startOffset;const E=!(!t||!t.shiftKey),S=!(!t||!t.ctrlKey);_e(n)&&n.hasChildNodes()&&!g&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&se(n)?n.data.length:0);const A=Kl(i,n);if(!A||((z,W)=>{const D=z.dom.getParent(W,"ol,ul,dl");return null!==D&&"false"===z.dom.getContentEditableParent(D)})(e,n))return;E||(n=((z,W,D,I,j)=>{var Q,re;const oe=z.dom,we=null!==(Q=Kl(oe,I))&&void 0!==Q?Q:oe.getRoot();let Ae=oe.getParent(I,oe.isBlock);if(!Ae||!Yp(oe,Ae)){if(Ae=Ae||we,!Ae.hasChildNodes()){const Se=oe.create(W);return Xl(z,Se),Ae.appendChild(Se),D.setStart(Se,0),D.setEnd(Se,0),Se}let Be,Le=I;for(;Le&&Le.parentNode!==Ae;)Le=Le.parentNode;for(;Le&&!oe.isBlock(Le);)Be=Le,Le=Le.previousSibling;const ge=null===(re=Be?.parentElement)||void 0===re?void 0:re.nodeName;if(Be&&ge&&z.schema.isValidChild(ge,W.toLowerCase())){const Se=Be.parentNode,F=oe.create(W);for(Xl(z,F),Se.insertBefore(F,Be),Le=Be;Le&&!oe.isBlock(Le);){const U=Le.nextSibling;F.appendChild(Le),Le=U}D.setStart(I,j),D.setEnd(I,j)}}return I})(e,u,c,n,o));let N=i.getParent(n,i.isBlock)||i.getRoot();s=ce(N?.parentNode)?i.getParent(N.parentNode,i.isBlock):null,r=N?N.nodeName.toUpperCase():"";const R=s?s.nodeName.toUpperCase():"";if("LI"!==R||S||(N=s,s=s.parentNode,r=R),_e(s)&&(z=e,D=N,!E&&D.nodeName.toLowerCase()===Fn(z)&&z.dom.isEmpty(D)&&((I,j)=>{let re=j;for(;re&&re!==I&&Ze(re.nextSibling);){const we=re.parentElement;if(!we||(oe=we,!je(z.schema.getTextBlockElements(),oe.nodeName.toLowerCase())))return xu(we);re=we}var oe;return!1})(z.getBody(),D)))return((z,W,D)=>{var I,j,Q;const re=W(Fn(z)),oe=z.dom.getParent(D,xu);oe&&(z.dom.insertAfter(re,oe),yi(z,re),(null!==(Q=null===(j=null===(I=D.parentElement)||void 0===I?void 0:I.childNodes)||void 0===j?void 0:j.length)&&void 0!==Q?Q:0)>1&&z.dom.remove(D))})(e,v,N);var z,D;if(/^(LI|DT|DD)$/.test(r)&&_e(s)&&i.isEmpty(N))return void((z,W,D,I,j)=>{const Q=z.dom,re=z.selection.getRng(),oe=D.parentNode;if(D===z.getBody()||!oe)return;var we;Px(we=D)&&Px(we.parentNode)&&(j="LI");const Ae=Kp(I)?Lx(I):void 0;let Be=Kp(I)&&Ae?W(j,{style:Lx(I)}):W(j);if(Ud(D,I,!0)&&Ud(D,I,!1))if(Dx(D,"LI")){const Le=zd(D);Q.insertAfter(Be,Le),(null===(Se=(ge=D).parentNode)||void 0===Se?void 0:Se.firstChild)===ge?Q.remove(Le):Q.remove(D)}else Q.replace(Be,D);else if(Ud(D,I,!0))Dx(D,"LI")?(Q.insertAfter(Be,zd(D)),Be.appendChild(Q.doc.createTextNode(" ")),Be.appendChild(D)):oe.insertBefore(Be,D),Q.remove(I);else if(Ud(D,I,!1))Q.insertAfter(Be,zd(D)),Q.remove(I);else{D=zd(D);const Le=re.cloneRange();Le.setStartAfter(I),Le.setEndAfter(D);const ge=Le.extractContents();if("LI"===j&&(Se=>Se.firstChild&&"LI"===Se.firstChild.nodeName)(ge)){const Se=We(nt(Be.children,B),vr(ta("br")));Be=ge.firstChild,Q.insertAfter(ge,D),J(Se,F=>Qe(B(Be),F)),Ae&&Be.setAttribute("style",Ae)}else Q.insertAfter(ge,D),Q.insertAfter(Be,D);Q.remove(I)}var ge,Se;yi(z,Be)})(e,v,s,N,u);if(!(g||N!==e.getBody()&&Yp(i,N)))return;const M=N.parentNode;let P;if(g)P=v(u),p.fold(()=>{Ee(f,B(P))},z=>{Oe(z,B(P))}),e.selection.setCursorLocation(P,0);else if(Za(N))P=Yu(N),i.isEmpty(N)&&Vp(N),Xl(e,P),yi(e,P);else if(h(!1))P=y();else if(h(!0)&&M){const z=G.fromRangeStart(c),W=Zf(z),D=B(N),I=od(D,z,e.schema)?Nv(D,z,e.schema).bind(Q=>k.from(Q.getNode())):k.none();P=M.insertBefore(v(),N);const j=Xp(N,"HR")||W?P:I.getOr(N);yi(e,j)}else{const z=(D=>{const I=D.cloneRange();return I.setStart(D.startContainer,Gp(!0,D.startContainer,D.startOffset)),I.setEnd(D.endContainer,Gp(!1,D.endContainer,D.endOffset)),I})(c).cloneRange();z.setEndAfter(N);const W=z.extractContents();(D=>{J(Ng(B(D),Cn),I=>{const j=I.dom;j.nodeValue=yo(j.data)})})(W),(D=>{let I=D;do{se(I)&&(I.data=I.data.replace(/^[\r\n]+/,"")),I=I.firstChild}while(I)})(W),P=W.firstChild,i.insertAfter(W,N),((D,I,j)=>{var Q;const re=[];if(!j)return;let oe=j;for(;oe=oe.firstChild;){if(D.isBlock(oe))return;_e(oe)&&!I[oe.nodeName.toLowerCase()]&&re.push(oe)}let we=re.length;for(;we--;)oe=re[we],(!oe.hasChildNodes()||oe.firstChild===oe.lastChild&&""===(null===(Q=oe.firstChild)||void 0===Q?void 0:Q.nodeValue)||lO(D,oe))&&D.remove(oe)})(i,l,P),((D,I)=>{I.normalize();const j=I.lastChild;(!j||_e(j)&&/^(left|right)$/gi.test(D.getStyle(j,"float",!0)))&&D.add(I,"br")})(i,N),i.isEmpty(N)&&Vp(N),P.normalize(),i.isEmpty(P)?(i.remove(P),y()):(Xl(e,P),yi(e,P))}i.setAttrib(P,"id",""),e.dispatch("NewBlock",{newBlock:P})},fakeEventName:"insertParagraph"},Ix=(e,t,n)=>{const o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),Cl(e,o)},cO=(e,t)=>{const n=Pe("br");Oe(B(t),n),e.undoManager.add()},dO=(e,t)=>{uO(e.getBody(),t)||Ie(B(t),Pe("br"));const n=Pe("br");Ie(B(t),n),Ix(e,n.dom,!1),e.undoManager.add()},uO=(e,t)=>{return n=G.after(t),!!Ht(n.getNode())||to(e,G.after(t)).map(o=>Ht(o.getNode())).getOr(!1);var n},Fx=e=>e&&"A"===e.nodeName&&"href"in e,fO=e=>e.fold(vt,Fx,Fx,vt),mO=(e,t)=>{t.fold(ke,xe(cO,e),xe(dO,e),ke)},jx={insert:(e,t)=>{const n=(o=>{const r=xe(Sa,o),s=G.fromRangeStart(o.selection.getRng());return jr(r,o.getBody(),s).filter(fO)})(e);n.isSome()?n.each(xe(mO,e)):((o,r)=>{const a=o.dom,i=o.selection.getRng();let l,c=!1;Yc(a,i).each(h=>{i.setStart(h.startContainer,h.startOffset),i.setEnd(h.endContainer,h.endOffset)});let u=i.startOffset,f=i.startContainer;if(_e(f)&&f.hasChildNodes()){const h=u>f.childNodes.length-1;f=f.childNodes[Math.min(u,f.childNodes.length-1)]||f,u=h&&se(f)?f.data.length:0}let p=a.getParent(f,a.isBlock);const b=p&&p.parentNode?a.getParent(p.parentNode,a.isBlock):null;"LI"!==(b?b.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(p=b),se(f)&&u>=f.data.length&&(((h,y,E)=>{const S=new mn(y,E);let A;const N=h.getNonEmptyElements();for(;A=S.next();)if(N[A.nodeName.toLowerCase()]||se(A)&&A.length>0)return!0;return!1})(o.schema,f,p||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),tf(a,i,l),Ix(o,l,c),o.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},zx=(e,t)=>Wp(e).filter(n=>t.length>0&&sn(B(n),t)).isSome(),Co=Br([{br:[]},{block:[]},{none:[]}]),pO=(e,t)=>{return zx(n=e,Kk(n));var n},Ux=e=>(t,n)=>Wp(t).filter(r=>Ya(B(r))).isSome()===e,Hx=(e,t)=>(n,o)=>Wp(n).fold(me(""),a=>a.nodeName.toUpperCase())===e.toUpperCase()===t,gO=e=>{const t=Kl(e.dom,e.selection.getStart());return wt(t)},Yl=e=>Hx("pre",e),Hd=e=>(t,n)=>$k(t)===e,hO=(e,t)=>{return zx(n=e,Vk(n));var n},qd=(e,t)=>t,bO=e=>{const t=Fn(e),n=Kl(e.dom,e.selection.getStart());return ce(n)&&e.schema.isValidChild(n.nodeName,t)},vO=e=>{const t=e.selection.getRng(),n=B(t.startContainer),o=qt(n,t.startOffset).map(r=>Js(r)&&!cr(r));return t.collapsed&&o.getOr(!0)},zo=(e,t)=>(n,o)=>bn(e,(r,s)=>r&&s(n,o),!0)?k.some(t):k.none(),$d=(e,t,n)=>{if(!t.mode.isReadOnly()){if(t.selection.isCollapsed()||t.execCommand("delete"),ce(n)&&jd(t,e.fakeEventName).isDefaultPrevented())return;e.insert(t,n),ce(n)&&Vl(t,e.fakeEventName)}},qx=(e,t)=>{if(e.mode.isReadOnly())return;const n=()=>$d(jx,e,t),o=()=>$d(Mx,e,t),r=(s=e,a=t,j1([zo([pO],Co.none()),zo([Yl(!0),gO],Co.none()),zo([Hx("summary",!0)],Co.br()),zo([Yl(!0),Hd(!1),qd],Co.br()),zo([Yl(!0),Hd(!1)],Co.block()),zo([Yl(!0),Hd(!0),qd],Co.block()),zo([Yl(!0),Hd(!0)],Co.br()),zo([Ux(!0),qd],Co.br()),zo([Ux(!0)],Co.block()),zo([hO],Co.br()),zo([qd],Co.br()),zo([bO],Co.block()),zo([vO],Co.block())],[s,!(!a||!a.shiftKey)]).getOr(Co.none()));var s,a;switch(Wk(e)){case"linebreak":r.fold(n,n,ke);break;case"block":r.fold(o,o,ke);break;case"invert":r.fold(o,n,ke);break;default:r.fold(n,o,ke)}},$x=Ln(),yO=$x.os.isiOS()&&$x.browser.isSafari(),Wx=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{qx(e,t)}))},CO=Ln(),Vx=e=>e.stopImmediatePropagation(),Kx=e=>e.keyCode===ye.PAGE_UP||e.keyCode===ye.PAGE_DOWN,Xx=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",Vx,!0):!n&&e.get()&&t.off("NodeChange",Vx),e.set(n)},Yx=(e,t)=>{const n=t.container(),o=t.offset();return se(n)?(n.insertData(o,e),k.some(G(n,o+e.length))):Ic(t).map(r=>{const s=lt(e);return t.isAtEnd()?Ie(r,s):Oe(r,s),G(s.dom,e.length)})},Gx=xe(Yx,an),Qx=xe(Yx," "),Zx=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},wO=e=>{const t=G.fromRangeStart(e.selection.getRng()),n=B(e.getBody());if(e.selection.isCollapsed()){const o=xe(Sa,e),r=G.fromRangeStart(e.selection.getRng());return jr(o,e.getBody(),r).bind((s=>a=>a.fold(i=>uo(s.dom,G.before(i)),i=>jn(i),i=>Go(i),i=>to(s.dom,G.after(i))))(n)).map(s=>()=>((a,i,l)=>c=>Dv(a,c,l)?Gx(i):Qx(i))(n,t,e.schema)(s).each(Zx(e)))}return k.none()},xO=e=>{return Cs(gt.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const o=B(e.getBody());var r,s,a;e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),(r=o,s=G.fromRangeStart(e.selection.getRng()),a=e.schema,Dv(r,s,a)?Gx(s):Qx(s)).each(Zx(e))});var t,n},EO=e=>eN(e)?[{keyCode:ye.TAB,action:He(ex,e,!0)},{keyCode:ye.TAB,shiftKey:!0,action:He(ex,e,!1)}]:[],SO=e=>{if(e.addShortcut("Meta+P","","mcePrint"),rO(e),Fr(e))return pn(null);{const t=(e=>{const t=pn(null),n=xe(Sa,e);return e.on("NodeChange",o=>{ll(e)&&(((r,s,a)=>{const i=nt(Jn(B(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),u=>u.dom),l=We(i,r),c=We(a,r);J(et(l,c),xe(iw,!1)),J(et(c,l),xe(iw,!0))})(n,e.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=G.fromRangeStart(r.selection.getRng());G.isTextPosition(i)&&!Ku(l=i)&&!Xu(l)&&(Td(r,((e,t)=>{return G.isTextPosition(t)?(o=t,S0(n=e)&&o.container()===n?((r,s)=>{const a=_0(r.data.substr(0,s.offset())),i=_0(r.data.substr(s.offset()));return(a.text+i.text).length>0?(N0(r),G(r,s.offset()-a.count)):s})(n,o):A0(n,o)):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,c)=>{const u=ut(l,c);return-1===u?k.none():k.some(u)})(vn(a.childNodes),r).map(l=>l<s.offset()?G(a,s.offset()-1):s).getOr(s);return ha(r),i})(n,o):A0(n,o))(e,t);var n,o})(a,i)),s.set(null))}var l})(e,t),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=We(i,r);J(l,c=>{const u=G.fromRangeStart(s.selection.getRng());jr(r,s.getBody(),u).bind(f=>lw(s,a,f))})}})(n,e,t,o.parents))}),t})(e);return(n=e).on("beforeinput",o=>{n.selection.isEditable()&&!St(o.getTargetRanges(),r=>!Zb(n.dom,r))||o.preventDefault()}),(n=>{n.on("keyup compositionstart",xe(yR,n))})(e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=gt.os.isMacOS()||gt.os.isiOS();Ul([{keyCode:ye.RIGHT,action:He(Bw,s,!0)},{keyCode:ye.LEFT,action:He(Bw,s,!1)},{keyCode:ye.UP,action:He(Dw,s,!1)},{keyCode:ye.DOWN,action:He(Dw,s,!0)},...l?[{keyCode:ye.UP,action:He(Od,s,!1),metaKey:!0,shiftKey:!0},{keyCode:ye.DOWN,action:He(Od,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ye.RIGHT,action:He(Qw,s,!0)},{keyCode:ye.LEFT,action:He(Qw,s,!1)},{keyCode:ye.UP,action:He(Tp,s,!1)},{keyCode:ye.DOWN,action:He(Tp,s,!0)},{keyCode:ye.UP,action:He(Tp,s,!1)},{keyCode:ye.UP,action:He(Mw,s,!1)},{keyCode:ye.DOWN,action:He(Mw,s,!0)},{keyCode:ye.RIGHT,action:He(zw,s,!0)},{keyCode:ye.LEFT,action:He(zw,s,!1)},{keyCode:ye.UP,action:He(Uw,s,!1)},{keyCode:ye.DOWN,action:He(Uw,s,!0)},{keyCode:ye.RIGHT,action:He(cw,s,a,!0)},{keyCode:ye.LEFT,action:He(cw,s,a,!1)},{keyCode:ye.RIGHT,ctrlKey:!l,altKey:l,action:He(dR,s,a)},{keyCode:ye.LEFT,ctrlKey:!l,altKey:l,action:He(uR,s,a)},{keyCode:ye.UP,action:He(Lw,s,!1)},{keyCode:ye.DOWN,action:He(Lw,s,!0)}],i).each(c=>{i.preventDefault()})})(n,o,r)})})(e,t),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===ye.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===ye.BACKSPACE?"deleteContentBackward":"deleteContentForward",u=a.selection.isCollapsed(),f=u?"character":"selection",p=b=>u?b?"word":"line":"selection";jw([{keyCode:ye.BACKSPACE,action:He(Sw,a)},{keyCode:ye.BACKSPACE,action:He(up,a,!1)},{keyCode:ye.DELETE,action:He(up,a,!0)},{keyCode:ye.BACKSPACE,action:He(lp,a,!1)},{keyCode:ye.DELETE,action:He(lp,a,!0)},{keyCode:ye.BACKSPACE,action:He(wp,a,i,!1)},{keyCode:ye.DELETE,action:He(wp,a,i,!0)},{keyCode:ye.BACKSPACE,action:He(pm,a,!1)},{keyCode:ye.DELETE,action:He(pm,a,!0)},{keyCode:ye.BACKSPACE,action:He(Ta,a,!1,f)},{keyCode:ye.DELETE,action:He(Ta,a,!0,f)},...Ox?[{keyCode:ye.BACKSPACE,altKey:!0,action:He(Ta,a,!1,p(!0))},{keyCode:ye.DELETE,altKey:!0,action:He(Ta,a,!0,p(!0))},{keyCode:ye.BACKSPACE,metaKey:!0,action:He(Ta,a,!1,p(!1))}]:[{keyCode:ye.BACKSPACE,ctrlKey:!0,action:He(Ta,a,!1,p(!0))},{keyCode:ye.DELETE,ctrlKey:!0,action:He(Ta,a,!0,p(!0))}],{keyCode:ye.BACKSPACE,action:He(mp,a,!1)},{keyCode:ye.DELETE,action:He(mp,a,!0)},{keyCode:ye.BACKSPACE,action:He(Sp,a,!1)},{keyCode:ye.DELETE,action:He(Sp,a,!0)},{keyCode:ye.BACKSPACE,action:He(ap,a,!1)},{keyCode:ye.DELETE,action:He(ap,a,!0)},{keyCode:ye.BACKSPACE,action:He(sp,a,!1)},{keyCode:ye.DELETE,action:He(sp,a,!0)},{keyCode:ye.BACKSPACE,action:He(xp,a,!1)},{keyCode:ye.DELETE,action:He(xp,a,!0)},{keyCode:ye.BACKSPACE,action:He(fp,a,!1)},{keyCode:ye.DELETE,action:He(fp,a,!0)}],l).filter(b=>a.selection.isEditable()).each(b=>{l.preventDefault(),jd(a,c).isDefaultPrevented()||(b(),Vl(a,c))})})(n,o,s)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(i=s,l=r,Ul([{keyCode:ye.BACKSPACE,action:He(T1,a=n)},{keyCode:ye.DELETE,action:He(T1,a)},...Ox?[{keyCode:ye.BACKSPACE,altKey:!0,action:He(zl,a)},{keyCode:ye.DELETE,altKey:!0,action:He(zl,a)},...l?[{keyCode:iO?224:91,action:He(zl,a)}]:[]]:[{keyCode:ye.BACKSPACE,ctrlKey:!0,action:He(zl,a)},{keyCode:ye.DELETE,ctrlKey:!0,action:He(zl,a)}]],i)),r=!1})})(e,t),(n=>{let o=k.none();n.on("keydown",r=>{var s;r.keyCode===ye.ENTER&&(yO&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(se(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(o=k.some((s=n).selection.getBookmark()),s.undoManager.add()):Wx(n,r))}),n.on("keyup",r=>{r.keyCode===ye.ENTER&&o.each(()=>{return a=r,(s=n).undoManager.undo(),o.fold(ke,i=>s.selection.moveToBookmark(i)),Wx(s,a),void(o=k.none());var s,a})})})(e),(n=>{n.on("keydown",o=>{var r,s;o.isDefaultPrevented()||(s=o,jw([{keyCode:ye.SPACEBAR,action:He(wO,r=n)},{keyCode:ye.SPACEBAR,action:He(xO,r)}],s).each(a=>{s.preventDefault(),jd(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),Vl(r,"insertText",{data:" "}))}))})})(e),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=B(r.getBody());r.selection.isCollapsed()&&((e,t,n)=>{const o=t.container();if(!se(o))return k.none();if((r=>{const s=r.container();return se(s)&&un(s.data,an)})(t)){const r=Mv(e,o,!1,n)||(s=>{const a=s.data,i=(l=>{const c=l.split("");return nt(c,(u,f)=>Uc(u)&&f>0&&f<c.length-1&&Cf(c[f-1])&&Cf(c[f+1])?" ":u).join("")})(a);return i!==a&&(s.data=i,!0)})(o)||Iv(e,o,!1,n);return Cs(r,t)}if(om(e,t,n)){const r=Mv(e,o,!0,n)||Iv(e,o,!0,n);return Cs(r,t)}return k.none()})(s,G.fromRangeStart(r.selection.getRng()),r.schema).each(a=>{r.selection.setRng(a.toRange())})})(n)})})(e),(n=>{n.on("keydown",o=>{var s;o.isDefaultPrevented()||(s=o,Ul([...EO(n)],s).each(a=>{s.preventDefault()}))})})(e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=gt.os.isMacOS()||gt.os.isiOS();Ul([{keyCode:ye.END,action:He(Pw,s,!0)},{keyCode:ye.HOME,action:He(Pw,s,!1)},...l?[]:[{keyCode:ye.HOME,action:He(Od,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ye.END,action:He(Od,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ye.END,action:He(Hw,s,!0)},{keyCode:ye.HOME,action:He(Hw,s,!1)},{keyCode:ye.END,action:He(Rd,s,!0,a)},{keyCode:ye.HOME,action:He(Rd,s,!1,a)}],i).each(c=>{i.preventDefault()})})(n,o,r)})})(e,t),((n,o)=>{if(CO.os.isMacOS())return;const r=pn(!1);n.on("keydown",s=>{Kx(s)&&Xx(r,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,Ul([{keyCode:ye.PAGE_UP,action:He(Rd,a=n,!1,i=o)},{keyCode:ye.PAGE_DOWN,action:He(Rd,a,!0,i)}],l)),Kx(s)&&r.get()&&(Xx(r,n,!1),n.nodeChanged())})})(e,t),t}var n};class kO{constructor(t){let n;this.lastPath=[],this.editor=t;const o=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",r=>{const s=t.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==r.type&&jf(a,n)||t.dispatch("SelectionChange"),n=a}),t.on("contextmenu",()=>{Zc(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const r=t.selection.getStart(!0);r&&Hc(t)&&!o.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",r=>{!r.isDefaultPrevented()&&Hc(t)&&("IMG"===t.selection.getNode().nodeName?Lo.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor,o=n.selection;let r;if(n.initialized&&o&&!S_(n)){const s=n.getBody();r=o.getStart(!0)||s,r.ownerDocument===n.getDoc()&&n.dom.isChildOf(r,s)||(r=s);const a=[];n.dom.getParent(r,i=>i===s||(a.push(i),!1)),n.dispatch("NodeChange",{...t,element:r,parents:a})}}isSameElementPath(t){let n;const o=this.editor,r=er(o.dom.getParents(t,Ut,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const Jx=el("image"),Qp=el("event"),Wd=e=>t=>{t[Qp]=e},eE=Wd(0),_O=Wd(2),NO=Wd(1),Zp=el("mode"),Vd=e=>t=>{t[Zp]=e},tE=(e,t)=>Vd(t)(e),nE=Vd(0),Jp=Vd(2),TO=Vd(1),oE=e=>t=>k.from(t[Zp]).exists(o=>o===e),Ci=oE(0),rE=oE(1),RO=["none","copy","link","move"],OO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],eg=()=>{const e=new window.DataTransfer;let t="move",n="all";const o={get dropEffect(){return t},set dropEffect(r){Re(RO,r)&&(t=r)},get effectAllowed(){return n},set effectAllowed(r){(e=>k.from(e[Qp]).exists(n=>0===n))(o)&&Re(OO,r)&&(n=r)},get items(){return r=o,s=e.items,{...s,get length(){return s.length},add:(a,i)=>{if(Ci(r)){if(!Te(a))return s.add(a);if(!jt(i))return s.add(a,i)}return null},remove:a=>{Ci(r)&&s.remove(a)},clear:()=>{Ci(r)&&s.clear()}};var r,s},get files(){return rE(o)?Object.freeze({length:0,item:r=>null}):e.files},get types(){return e.types},setDragImage:(r,s,a)=>{Ci(o)&&(o[Jx]={image:r,x:s,y:a},e.setDragImage(r,s,a))},getData:r=>rE(o)?"":e.getData(r),setData:(r,s)=>{Ci(o)&&e.setData(r,s)},clearData:r=>{Ci(o)&&e.clearData(r)}};return nE(o),o},sE=(e,t)=>e.setData("text/html",t),aE="x-tinymce/html",Kd=me(aE),tg="\x3c!-- "+aE+" --\x3e",BO=e=>tg+e,iE=e=>-1!==e.indexOf(tg),lE="%MCEPASTEBIN%",ng=e=>e.dom.get("mcepastebin"),DO=e=>ce(e)&&"mcepastebin"===e.id,cE=e=>e===lE,dE=(e,t)=>(le.each(t,n=>{e=Eo(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])}),e),uE=e=>dE(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,o)=>n||o?an:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),fE=(e,t)=>({content:e,cancelled:t}),og=(e,t)=>(e.insertContent(t,{merge:H_(e),paste:!0}),!0),rg=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),PO=(e,t,n)=>{return!(e.selection.isCollapsed()||!rg(t)||(o=e,r=t,s=n,o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,s},LO=(e,t,n)=>{return o=e,!(!rg(r=t)||!St(x0(o),s=>Xs(r.toLowerCase(),`.${s.toLowerCase()}`)))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(e,t,n);var o,r},MO=(()=>{let t=0;return()=>"mceclip"+t++})(),IO=e=>{const t=eg();return sE(t,e),Jp(t),t},mE=(e,t,n,o,r)=>{const s=((c,u,f)=>{const p=c.dispatch("PastePreProcess",{content:u,internal:f}),b=((g,v)=>{const h=fi({sanitize:w0(g),sandbox_iframes:E0(g),sandbox_iframes_exclusions:uf(g),convert_unsafe_embeds:oN(g)},g.schema);h.addNodeFilter("meta",E=>{le.each(E,S=>{S.remove()})});const y=h.parse(v,{forced_root_block:!1,isRootContent:!0});return Ds({validate:!0},g.schema).serialize(y)})(c,p.content);return c.hasEventListeners("PastePostProcess")&&!p.isDefaultPrevented()?((g,v,h)=>{const y=g.dom.create("div",{style:"display:none"},v),E=g.dispatch("PastePostProcess",{node:y,internal:h});return fE(E.node.innerHTML,E.isDefaultPrevented())})(c,b,f):fE(b,p.isDefaultPrevented())})(e,t,n);if(!s.cancelled){const a=s.content,i=()=>{return l=e,c=a,void(o||!q_(l)?og(l,c):(f=l,p=c,le.each([PO,LO,og],b=>!b(f,p,og))));var l,c,f,p};r?jd(e,"insertFromPaste",{dataTransfer:IO(a)}).isDefaultPrevented()||(i(),Vl(e,"insertFromPaste")):i()}},Xd=(e,t,n,o)=>{const r=n||iE(t);mE(e,t.replace(tg,""),r,!1,o)},sg=(e,t,n)=>{const o=e.dom.encode(t).replace(/\r\n/g,"\n"),r=((s,a,i)=>{const l=s.split(/\n\n/),c=((p,b)=>{let g="<"+p;const v=_r(b,(h,y)=>y+'="'+la.encodeAllRaw(h)+'"');return v.length&&(g+=" "+v.join(" ")),g+">"})(a,i),u="</"+a+">",f=nt(l,p=>p.split(/\n/).join("<br />"));return 1===f.length?f[0]:nt(f,p=>c+p+u).join("")})(Og(o,W_(e)),Fn(e),il(e));mE(e,r,!1,!0,n)},pE=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const o=e.types[n];try{t[o]=e.getData(o)}catch{t[o]=""}}return t},Fs=(e,t)=>t in e&&e[t].length>0,gE=e=>Fs(e,"text/html")||Fs(e,"text/plain"),hE=(e,t,n)=>{const o="paste"===t.type?t.clipboardData:t.dataTransfer;var r;if(Lc(e)&&o){const s=((a,i)=>{const l=i.items?Gt(vn(i.items),u=>"file"===u.kind?[u.getAsFile()]:[]):[],c=i.files?vn(i.files):[];return We(l.length>0?l:c,(u=>{const f=x0(u);return p=>Vt(p.type,"image/")&&St(f,b=>(g=>{const v=g.toLowerCase(),h={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return le.hasOwn(h,v)?"image/"+h[v]:"image/"+v})(b)===p.type)})(a))})(e,o);if(s.length>0)return t.preventDefault(),(r=s,Promise.all(nt(r,a=>oC(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&e.selection.setRng(n),J(a,i=>{var l,c;l=e,Mm((c=i).uri).each(({data:u,type:f,base64Encoded:p})=>{const b=p?u:btoa(u),g=c.file,v=l.editorUpload.blobCache,y=v.getByData(b,f)??((E,S,A,N)=>{const R=MO(),M=c0(E)&&ce(A.name),P=M?((D,I)=>{const j=I.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ce(j)?D.dom.encode(j[1]):void 0})(E,A.name):R,W=S.create(R,A,N,P,M?A.name:void 0);return S.add(W),W})(l,v,g,b);Xd(l,`<img src="${y.blobUri()}">`,!1,!0)})})}),!0}return!1},ag=(e,t,n,o,r)=>{let s=uE(n);const a=Fs(t,Kd())||iE(n),i=!a&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=rg(s);(cE(s)||!s.length||i&&!l)&&(o=!0),(o||l)&&(s=Fs(t,"text/plain")&&i?t["text/plain"]:(c=>{const u=_s(),f=fi({},u);let p="";const b=u.getVoidElements(),g=le.makeMap("script noscript style textarea video audio iframe object"," "),v=u.getBlockElements(),h=y=>{const E=y.name,S=y;if("br"!==E){if("wbr"!==E)if(b[E]&&(p+=" "),g[E])p+=" ";else{if(3===y.type&&(p+=y.value),!(y.name in u.getVoidElements())){let A=y.firstChild;if(A)do{h(A)}while(A=A.next)}v[E]&&S.next&&(p+="\n","p"===E&&(p+="\n"))}}else p+="\n"};return c=dE(c,[/<!\[[^\]]+\]>/g]),h(f.parse(c)),p})(s)),cE(s)||(o?sg(e,s,r):Xd(e,s,a,r))},bE=(e,t,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(Kd(),s),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},vE=e=>(t,n)=>{const{dom:o,selection:r}=e,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},t);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(e.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),Lo.setEditorTimeout(e,()=>{r.setRng(i),o.remove(s),n()},0)},yE=e=>({html:BO(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),CE=e=>{return!e.selection.isCollapsed()||!!(t=e).dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody());var t},wE=(e,t)=>{var n,o;return xa.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(o=t.clientY)&&void 0!==o?o:0,e.getDoc())},xE=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},jO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,EE=e=>le.trim(e).replace(jO,Vi).toLowerCase(),zO=(e,t,n)=>{const o=z_(e);if(n||"all"===o||!U_(e))return t;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const s=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,u)=>{const f=s.parseStyle(s.decode(c)),p={};for(let g=0;g<r.length;g++){const v=f[r[g]];let h=v,y=s.getStyle(a,r[g],!0);/color/.test(r[g])&&(h=EE(h),y=EE(y)),y!==h&&(p[r[g]]=v)}const b=s.serializeStyle(p,"span");return b?l+' style="'+b+'"'+u:l+u})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},HO=Ht,SE=se,qO=e=>Pt(e.dom),kE=e=>t=>Fe(B(e),t),_E=(e,t)=>Qn(B(e),qO,kE(t)),NE=(e,t,n)=>{const o=new mn(e,t),r=n?o.next.bind(o):o.prev.bind(o);let s=e;for(let a=n?e:r();a&&!HO(a);a=r())mr(a)&&(s=a);return s};var wi;!function(e){e.Before="before",e.After="after"}(wi||(wi={}));const WO=(e,t)=>Math.abs(e.left-t),VO=(e,t)=>Math.abs(e.right-t),XO=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),ig=(e,t,n,o)=>{const r=u=>mr(u.node)?k.some(u):_e(u.node)?ig(vn(u.node.childNodes),t,n,!1):k.none(),s=(u,f)=>{const p=Kr(u,(b,g)=>f(b,t,n)-f(g,t,n));return Xn(p,r).map(b=>{return o&&!se(b.node)&&p.length>1?(g=b,v=p[1],h=f,r(v).filter(y=>Math.abs(h(g,t,n)-h(y,t,n))<2&&se(y.node))).getOr(b):b;var g,v,h})},[a,i]=((e,t)=>{return(n=We(e,n=>{return(o=t)>=(r=n).top&&o<=r.bottom;var o,r}),bn(n,(o,r)=>o.fold(()=>k.some(r),s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),c=Math.max(r.bottom,s.bottom);return k.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}),k.none())).fold(()=>[[],e],n=>{const{pass:o,fail:r}=qo(e,s=>((a,i)=>{const l=(c=a,u=i,Math.max(0,Math.min(c.bottom,u.bottom)-Math.max(c.top,u.top))/Math.min(a.height,i.height));var c,u;return((c,u)=>c.top<u.bottom&&c.bottom>u.top)(a,i)&&l>.5})(s,n));return[o,r]});var n})(ew(e),n),{pass:l,fail:c}=qo(i,u=>u.top<n);return s(a,XO).orThunk(()=>s(c,Th)).orThunk(()=>s(l,Th))},AE=(e,t,n)=>((o,r,s)=>{const a=B(o),l=((e,t,n)=>k.from(e.dom.elementFromPoint(t,n)).map(Z))(It(a),r,s).filter(c=>Sn(a,c)).getOr(a);return((c,u,f,p)=>{const b=(g,v)=>{const h=We(g.dom.childNodes,vr(y=>_e(y)&&y.classList.contains("mce-drag-container")));return v.fold(()=>ig(h,f,p,!0),y=>{const E=We(h,S=>S!==y.dom);return ig(E,f,p,!0)}).orThunk(()=>(Fe(g,c)?k.none():ao(g)).bind(y=>b(y,k.some(g))))};return b(u,k.none())})(a,l,r,s)})(e,t,n).filter(o=>dl(o.node)).map(o=>{return{node:(r=o).node,position:WO(r,s=t)<VO(r,s)?wi.Before:wi.After};var r,s}),TE=e=>{var t,n;const o=e.getBoundingClientRect(),r=e.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+(null!==(t=a?.scrollY)&&void 0!==t?t:0)-s.clientTop,left:o.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},RE=e=>({target:e,srcElement:e}),OE=Pt,GO=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(OE,Yo),QO=(e,t,n,o)=>{const r=e.dom,s=t.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},Yd=(e,t)=>n=>()=>{const o="left"===e?n.scrollX:n.scrollY;n.scroll({[e]:o+t,behavior:"smooth"})},BE=Yd("left",-32),DE=Yd("left",32),PE=Yd("top",-32),LE=Yd("top",32),ME=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Gl=(e,t,n,o,r)=>{"dragstart"===t&&sE(o,e.dom.getOuterHTML(n));const s=((e,t,n,o)=>{const r=((s,a)=>{const i=(l=>{const c=eg(),u=k.from(l[Zp]);return Jp(l),eE(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(f=l,k.from(f[Jx])).each(f=>c.setDragImage(f.image,f.x,f.y)),J(l.types,f=>{"Files"!==f&&c.setData(f,l.getData(f))}),J(l.files,f=>c.items.add(f)),(f=>k.from(f[Qp]))(l).each(f=>{var p;p=c,Wd(f)(p)}),u.each(f=>{tE(l,f),tE(c,f)}),c;var f})(s);return"dragstart"===a?(eE(i),nE(i)):"drop"===a?(_O(i),Jp(i)):(NO(i),TO(i)),i})(n,e);return jt(o)?((s,a,i)=>{const l=po("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:ke,stopImmediatePropagation:ke,stopPropagation:ke,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...RE(a)}})(e,t,r):(s=e,a=o,i=t,l=r,{...a,dataTransfer:l,type:s,...RE(i)});var s,a,i,l})(t,n,o,r);return e.dispatch(t,s)},IE=(e,t,n)=>{e.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>Gl(t,"dragend",o.element,o.dataTransfer),r=>Gl(t,"dragend",o.element,o.dataTransfer,r))}),FE(e)},FE=e=>{e.on(t=>{t.intervalId.clear(),ME(t.ghost)}),e.clear()},Ql=Pt,jE=(e,t)=>ka(e.getBody(),t),eB=e=>{const t=e.selection,n=e.dom,o=e.getBody(),r=((e,t,n,o)=>{const r=rs();let s,a;const i=Fn(e),l=e.dom,c=()=>{(u=>{var f,p;const b=Jn(B(u),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<b.length;g++){const v=b[g].dom;let h=v.previousSibling;if(Ac(h)){const y=h.data;1===y.length?null===(f=h.parentNode)||void 0===f||f.removeChild(h):h.deleteData(y.length-1,1)}h=v.nextSibling,Nc(h)&&(1===h.data.length?null===(p=h.parentNode)||void 0===p||p.removeChild(h):h.deleteData(0,1))}})(t),a&&(ha(a),a=null),r.on(u=>{l.remove(u.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(u,f)=>{let p;if(c(),dN(f))return null;if(!n(f))return a=((b,g)=>{var v;const h=(null!==(v=b.ownerDocument)&&void 0!==v?v:document).createTextNode(gn),y=b.parentNode;if(g){const E=b.previousSibling;if(Qa(E)){if(Ro(E))return E;if(Ac(E))return E.splitText(E.data.length-1)}y?.insertBefore(h,b)}else{const E=b.nextSibling;if(Qa(E)){if(Ro(E))return E;if(Nc(E))return E.splitText(1),E}b.nextSibling?y?.insertBefore(h,b.nextSibling):y?.appendChild(h)}return h})(f,u),p=f.ownerDocument.createRange(),cl(a.nextSibling)?(p.setStart(a,0),p.setEnd(a,0)):(p.setStart(a,1),p.setEnd(a,1)),p;{const b=((h,y,E)=>{var S;const A=(null!==(S=y.ownerDocument)&&void 0!==S?S:document).createElement(h);A.setAttribute("data-mce-caret",E?"before":"after"),A.setAttribute("data-mce-bogus","all"),A.appendChild(Ga().dom);const N=y.parentNode;return E?N?.insertBefore(A,y):y.nextSibling?N?.insertBefore(A,y.nextSibling):N?.appendChild(A),A})(i,f,u),g=T0(t,f,u);l.setStyle(b,"top",g.top),l.setStyle(b,"caret-color","transparent"),a=b;const v=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(v,{...g}),l.add(t,v),r.set({caret:v,element:f,before:u}),u&&l.addClass(v,"mce-visual-caret-before"),s=setInterval(()=>{r.on(h=>{o()?l.toggleClass(h.caret,"mce-visual-caret-hidden"):l.addClass(h.caret,"mce-visual-caret-hidden")})},500),p=f.ownerDocument.createRange(),p.setStart(b,0),p.setEnd(b,0)}return p},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(u=>{const f=T0(t,u.element,u.before);l.setStyles(u.caret,{...f})})},destroy:()=>clearInterval(s)}})(e,o,n.isBlock,()=>di(e)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=h=>h!==o&&(Ql(h)||Or(h))&&n.isChildOf(h,o)&&n.isEditable(h.parentNode),c=(h,y,E,S=!0)=>e.dispatch("ShowCaret",{target:y,direction:h,before:E}).isDefaultPrevented()?null:(S&&t.scrollIntoView(y,-1===h),r.show(E,y)),u=h=>Ro(h)||Nc(h)||Ac(h),f=h=>u(h.startContainer)||u(h.endContainer),b=(h,y)=>{if(!h)return null;if(h.collapsed){if(!f(h)){const N=y?1:-1,R=pl(N,o,h),M=R.getNode(!y);if(ce(M)){if(dl(M))return c(N,M,!!y&&!R.isAtEnd(),!1);if(As(M)&&Pt(M.nextSibling)){const z=n.createRng();return z.setStart(M,0),z.setEnd(M,0),z}}const P=R.getNode(y);if(ce(P)){if(dl(P))return c(N,P,!y&&!R.isAtEnd(),!1);if(As(P)&&Pt(P.previousSibling)){const z=n.createRng();return z.setStart(P,1),z.setEnd(P,1),z}}}return null}let E=h.startContainer,S=h.startOffset;const A=h.endOffset;if(se(E)&&0===S&&Ql(E.parentNode)&&(E=E.parentNode,S=n.nodeIndex(E),E=E.parentNode),!_e(E))return null;if(A===S+1&&E===h.endContainer){const N=E.childNodes[S];if(l(N))return(R=>{const M=R.cloneNode(!0),P=e.dispatch("ObjectSelected",{target:R,targetClone:M});if(P.isDefaultPrevented())return null;const z=((D,I)=>{const j=B(e.getBody()),Q=e.getDoc(),re=es(j,"#"+s).getOrThunk(()=>{const Ae=ue('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Q);return Jt(Ae,"id",s),Ee(j,Ae),Ae}),oe=n.createRng();ft(re),ct(re,[lt(an,Q),B(I),lt(an,Q)]),oe.setStart(re.dom.firstChild,1),oe.setEnd(re.dom.lastChild,0),na(re,{top:n.getPos(D,e.getBody()).y+"px"}),$b(re);const we=t.getSel();return we&&(we.removeAllRanges(),we.addRange(oe)),oe})(R,P.targetClone),W=B(R);return J(Jn(B(e.getBody()),`*[${a}]`),D=>{Fe(W,D)||m(D,a)}),n.getAttrib(R,a)||R.setAttribute(a,"1"),i=R,v(),z})(N)}return null},g=()=>{i&&i.removeAttribute(a),es(B(e.getBody()),"#"+s).each(Ye),i=null},v=()=>{r.hide()};return Fr(e)||(e.on("click",h=>{n.isEditable(h.target)||(h.preventDefault(),e.focus())}),e.on("blur NewBlock",g),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",h=>{const y=h.target,E=jE(e,y);Ql(E)?(h.preventDefault(),Ml(e,E).each(b)):l(y)&&Ml(e,y).each(b)},!0),e.on("mousedown",h=>{const y=h.target;if(y!==o&&"HTML"!==y.nodeName&&!n.isChildOf(y,o)||!((S,A,N)=>{const R=B(S.getBody()),M=S.inline?R:B(It(R).dom.documentElement),P=((z,W,D,I)=>{const j=W.dom.getBoundingClientRect();return{x:D-(z?j.left+W.dom.clientLeft+NT(W):0),y:I-(z?j.top+W.dom.clientTop+_T(W):0)}})(S.inline,M,A,N);return((z,W,D)=>{const I=ST(z),j=kT(z);return W>=0&&D>=0&&W<=I&&D<=j})(M,P.x,P.y)})(e,h.clientX,h.clientY))return;g(),v();const E=jE(e,y);Ql(E)?(h.preventDefault(),Ml(e,E).each(b)):AE(o,h.clientX,h.clientY).each(S=>{var A;h.preventDefault(),(A=c(1,S.node,S.position===wi.Before,!1))&&t.setRng(A),ns(E)?E.focus():e.getBody().focus()})}),e.on("keypress",h=>{ye.modifierPressed(h)||Ql(t.getNode())&&h.preventDefault()}),e.on("GetSelectionRange",h=>{let y=h.range;if(i){if(!i.parentNode)return void(i=null);y=y.cloneRange(),y.selectNode(i),h.range=y}}),e.on("SetSelectionRange",h=>{h.range=(h=>{const y=e.schema.getVoidElements(),E=n.createRng(),S=h.startContainer,A=h.startOffset,N=h.endContainer,R=h.endOffset;return je(y,S.nodeName.toLowerCase())?0===A?E.setStartBefore(S):E.setStartAfter(S):E.setStart(S,A),je(y,N.nodeName.toLowerCase())?0===R?E.setEndBefore(N):E.setEndAfter(N):E.setEnd(N,R),E})(h.range);const y=b(h.range,h.forward);y&&(h.range=y)}),e.on("AfterSetSelectionRange",h=>{const y=h.range,E=y.startContainer.parentElement;var S,A;f(y)||_e(S=E)&&"mcepastebin"===S.id||v(),ce(A=E)&&n.hasClass(A,"mce-offscreen-selection")||g()}),(e=>{const t=rs(),n=Bt.DOM,o=document,r=((l,c)=>u=>{if(0===u.button){const f=Yt(c.dom.getParents(u.target),GO).getOr(null);if(ce(f)&&(p=c.dom,b=c.getBody(),OE(g=f)&&g!==b&&p.isEditable(g.parentElement))){const p=c.dom.getPos(f),b=c.getBody(),g=c.getDoc().documentElement;l.set({element:f,dataTransfer:eg(),dragging:!1,screenX:u.screenX,screenY:u.screenY,maxX:(c.inline?b.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?b.scrollHeight:g.offsetHeight)-2,relX:u.pageX-p.x,relY:u.pageY-p.y,width:f.offsetWidth,height:f.offsetHeight,ghost:QO(c,f,f.offsetWidth,f.offsetHeight),intervalId:ok(100)})}}var p,b,g})(t,e),s=((e,t)=>{const n=Sc((r,s)=>{return i=r,l=s,(a=t)._selectionOverrides.hideFakeCaret(),void AE(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),c=>{const u=a._selectionOverrides.showCaret(1,c.node,c.position===wi.Before,!1);u?a.selection.setRng(u):a.selection.placeCaretAt(i,l)});var a,i,l},0);t.on("remove",n.cancel);const o=e;return r=>e.on(s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){const c=Gl(t,"dragstart",s.element,s.dataTransfer,r);if(ce(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,t.focus()}if(s.dragging){const c=r.currentTarget===t.getDoc().documentElement,u=((f,p)=>({pageX:p.pageX-f.relX,pageY:p.pageY+5}))(s,(p=r,b=(h=f=t).inline?TE(h.getBody()):{left:0,top:0},g=(h=>{const y=h.getBody();return h.inline?{left:y.scrollLeft,top:y.scrollTop}:{left:0,top:0}})(f),v=((h,y)=>{if(y.target.ownerDocument!==h.getDoc()){const E=TE(h.getContentAreaContainer()),S=(A=>{const N=A.getBody(),R=A.getDoc().documentElement;return A.inline?{left:N.scrollLeft,top:N.scrollTop}:{left:N.scrollLeft||R.scrollLeft,top:N.scrollTop||R.scrollTop}})(h);return{left:y.pageX-E.left+S.left,top:y.pageY-E.top+S.top}}return{left:y.pageX,top:y.pageY}})(f,p),{pageX:v.left-b.left+g.left,pageY:v.top-b.top+g.top}));i=s.ghost,l=t.getBody(),i.parentNode!==l&&l.appendChild(i),((f,p,b,g,v,h,y,E,S,A,N,R)=>{let M=0,P=0;f.style.left=p.pageX+"px",f.style.top=p.pageY+"px",p.pageX+b>v&&(M=p.pageX+b-v),p.pageY+g>h&&(P=p.pageY+g-h),f.style.width=b-M+"px",f.style.height=g-P+"px";const z=S.clientHeight,W=S.clientWidth,D=y+S.getBoundingClientRect().top,I=E+S.getBoundingClientRect().left;N.on(j=>{j.intervalId.clear(),j.dragging&&R&&(y+8>=z?j.intervalId.set(LE(A)):y-8<=0?j.intervalId.set(PE(A)):E+8>=W?j.intervalId.set(DE(A)):E-8<=0?j.intervalId.set(BE(A)):D+16>=window.innerHeight?j.intervalId.set(LE(window)):D-16<=0?j.intervalId.set(PE(window)):I+16>=window.innerWidth?j.intervalId.set(DE(window)):I-16<=0&&j.intervalId.set(BE(window)))})})(s.ghost,u,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,t.getContentAreaContainer(),t.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var f,p,h,b,g,v,i,l})})(t,e),a=((l,c)=>u=>{l.on(f=>{var p,b,g,v;if(f.intervalId.clear(),f.dragging){if(b=c,g=(b=>{const g=b.getSel();if(ce(g)){const v=g.getRangeAt(0).startContainer;return se(v)?v.parentNode:v}return null})(c.selection),v=f.element,!wt(g)&&g!==v&&!b.dom.isChildOf(g,v)&&b.dom.isEditable(g)){const b=null!==(p=c.getDoc().elementFromPoint(u.clientX,u.clientY))&&void 0!==p?p:c.getBody();Gl(c,"drop",b,f.dataTransfer,u).isDefaultPrevented()||c.undoManager.transact(()=>{((g,v)=>{const h=g.getParent(v.parentNode,g.isBlock);ME(v),h&&h!==g.getRoot()&&g.isEmpty(h)&&Ns(B(h))})(c.dom,f.element),(g=>{const v=g.getData("text/html");return""===v?k.none():k.some(v)})(f.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}Gl(c,"dragend",c.getBody(),f.dataTransfer,u)}}),FE(l)})(t,e),i=((l,c)=>u=>IE(l,c,k.some(u)))(t,e);e.on("mousedown",r),e.on("mousemove",s),e.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),e.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)}),e.on("keydown",l=>{l.keyCode===ye.ESC&&IE(t,e,k.none())})})(h=e),N_(h)&&(y=>{const E=N=>{if(!N.isDefaultPrevented()){const R=N.dataTransfer;R&&(Re(R.types,"Files")||R.files.length>0)&&(N.preventDefault(),"drop"===N.type&&xd(y,"Dropped file type is not supported"))}},S=N=>{Jc(y,N.target)&&E(N)},A=()=>{const N=Bt.DOM,R=y.dom,M=document,P=y.inline?y.getBody():y.getDoc(),z=["drop","dragover"];J(z,W=>{N.bind(M,W,S),R.bind(P,W,E)}),y.on("remove",()=>{J(z,W=>{N.unbind(M,W,S),R.unbind(P,W,E)})})};y.on("init",()=>{Lo.setEditorTimeout(y,A,0)})})(h),(h=>{const y=Sc(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const E=h.selection.getRng();if(E.collapsed){const S=ip(h,E,!1);h.selection.setRng(S)}}},0);h.on("focus",()=>{y.throttle()}),h.on("blur",()=>{y.cancel()})})(e),(h=>{h.on("init",()=>{h.on("focusin",y=>{const E=y.target;if(Or(E)){const S=ka(h.getBody(),E),A=Pt(S)?S:E;h.selection.getNode()!==A&&Ml(h,A).each(N=>h.selection.setRng(N))}})})})(e)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&(Yu(h),t.scrollIntoView(h))},hideFakeCaret:v,destroy:()=>{r.destroy(),i=null}};var h},tB=(e,t)=>{let n=t;for(let o=e.previousSibling;se(o);o=o.previousSibling)n+=o.data.length;return n},zE=(e,t,n,o,r)=>{if(se(n)&&(o<0||o>n.data.length))return[];const s=r&&se(n)?[tB(n,o)]:[o];let a=n;for(;a!==t&&a.parentNode;)s.push(e.nodeIndex(a,r)),a=a.parentNode;return a===t?s.reverse():[]},lg=(e,t,n,o,r,s,a=!1)=>({start:zE(e,t,n,o,a),end:zE(e,t,r,s,a)}),UE=(e,t)=>{const n=t.slice(),o=n.pop();return w(o)?bn(n,(r,s)=>r.bind(a=>k.from(a.childNodes[s])),k.some(e)).bind(r=>se(r)&&(o<0||o>r.data.length)?k.none():k.some({node:r,offset:o})):k.none()},HE=(e,t)=>UE(e,t.start).bind(({node:n,offset:o})=>UE(e,t.end).map(({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})),xi=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const o=t.parentNode;e.remove(t,se(t.firstChild)&&Wa(t.firstChild.data)),xi(e,o,n)}},Gd=(e,t,n,o=!0)=>{const r=t.startContainer.parentNode,s=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(se(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),se(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),xi(e,r,n),r!==s&&xi(e,s,n))},Qd=(e,t)=>k.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),cg=(e,t,n)=>{const o=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:t0(o).concat(e.blockPatterns),inlinePatterns:n0(o).concat(e.inlinePatterns)}},dg=(e,t,n,o)=>{const r=e.createRng();return r.setStart(t,0),r.setEnd(n,o),r.toString()},qE=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Zd=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},$E=(e,t,n)=>{const o=HE(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=0===o.endOffset?s:s.splitText(o.endOffset),i=0===o.startOffset?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:t,end:a.parentNode.insertBefore(qE(e,t+"-end"),a),start:l.insertBefore(qE(e,t+"-start"),i)}},WE=(e,t,n)=>{xi(e,e.get(t.prefix+"-end"),n),xi(e,e.get(t.prefix+"-start"),n)},ug=e=>0===e.start.length,VE=(e,t,n,o)=>{const r=t.start;var s;return Bp(e,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),u=l.lastIndexOf(s);return-1!==u?u+s.length:-1!==c?c+1:-1}),n).bind(a=>{var i,l;const c=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(r))&&void 0!==l?l:-1;if(-1!==c&&a.offset>=c+r.length){const u=e.createRng();return u.setStart(a.container,a.offset-r.length),u.setEnd(a.container,a.offset),k.some(u)}return Op(a.container,a.offset-r.length,n).map(f=>{const p=e.createRng();return p.setStart(f.container,f.offset),p.setEnd(a.container,a.offset),p}).filter(f=>f.toString()===r).orThunk(()=>VE(e,t,n,hr(a.container,0)))})},nB=(e,t,n,o)=>{const r=e.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Op(i,l-n.pattern.end.length,t).bind(c=>{const u=lg(r,s,c.container,c.offset,i,l,o);if(ug(a))return k.some({matches:[{pattern:a,startRng:u,endRng:u}],position:c});{const f=Jd(e,n.remainingPatterns,c.container,c.offset,t,o),p=f.getOr({matches:[],position:c}),b=p.position;return((v,h,y,E,S,A=!1)=>{if(0===h.start.length&&!A){const N=v.createRng();return N.setStart(y,E),N.setEnd(y,E),k.some(N)}return Rp(y,E,S).bind(N=>VE(v,h,S,N).bind(R=>{var M;return A&&(R.endContainer===N.container&&R.endOffset===N.offset||0===N.offset&&(null===(M=R.endContainer.textContent)||void 0===M?void 0:M.length)===R.endOffset)?k.none():k.some(R)}))})(r,a,b.container,b.offset,t,f.isNone()).map(v=>{const h=((y,E,S,A=!1)=>lg(y,E,S.startContainer,S.startOffset,S.endContainer,S.endOffset,A))(r,s,v,o);return{matches:p.matches.concat([{pattern:a,startRng:h,endRng:u}]),position:hr(v.startContainer,v.startOffset)}})}})},Jd=(e,t,n,o,r,s)=>{const a=e.dom;return Rp(n,o,a.getRoot()).bind(i=>{const l=dg(a,r,n,o);for(let c=0;c<t.length;c++){const u=t[c];if(!Xs(l,u.end))continue;const f=t.slice();f.splice(c,1);const p=nB(e,r,{pattern:u,remainingPatterns:f,position:i},s);if(p.isNone()&&o>0)return Jd(e,t,n,o-1,r,s);if(p.isSome())return p}return k.none()})},KE=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?J(t.format,o=>{e.formatter.apply(o)}):e.execCommand(t.cmd,!1,t.value)},XE=(e,t,n,o,r,s)=>{var a;return((i,l)=>{const c=ro(i,u=>St(l,f=>u.pattern.start===f.pattern.start&&u.pattern.end===f.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(Jd(e,r.inlinePatterns,n,o,t,s).fold(()=>[],i=>i.matches),Jd(e,(a=r.inlinePatterns,Kr(a,(i,l)=>l.end.length-i.end.length)),n,o,t,s).fold(()=>[],i=>i.matches))},YE=(e,t)=>{if(0===t.length)return;const n=e.dom,o=e.selection.getBookmark(),r=((s,a)=>{const i=el("mce_textpattern"),l=Vr(a,(c,u)=>{const f=$E(s,i+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Vr(l,(c,u)=>{const f=l.length-c.length-1,p=ug(u.pattern)?u.endMarker:$E(s,i+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:p}])},[])})(n,t);J(r,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;ug(s.pattern)?((l,c,u,f)=>{const p=Zd(l.dom,u);Gd(l.dom,p,f),KE(l,c,p)})(e,s.pattern,s.endMarker,i):((l,c,u,f,p)=>{const b=l.dom,g=Zd(b,f),v=Zd(b,u);Gd(b,v,p),Gd(b,g,p);const y=Zd(b,{prefix:u.prefix,start:u.end,end:f.start});KE(l,c,y)})(e,s.pattern,s.startMarker,s.endMarker,i),WE(n,s.endMarker,i),WE(n,s.startMarker,i)}),e.selection.moveToBookmark(o)},GE=(e,t,n)=>((o,r,s)=>{if(se(o)&&0>=o.length)return k.some(hr(o,0));{const a=fa(Bd);return k.from(a.forwards(o,0,Dd(o),s)).map(i=>hr(i.container,0))}})(t,0,t).map(o=>{const r=o.container;return tx(r,n.start.length,t).each(s=>{const a=e.createRng();a.setStart(r,0),a.setEnd(s.container,s.offset),Gd(e,a,i=>i===t)}),r}),QE=e=>(t,n)=>{const r=n.pattern,s=HE(t.dom.getRoot(),n.range).getOrDie("Unable to resolve path range");return Qd(t,s).each(a=>{"block-format"===r.type?((i,l)=>{const c=l.get(i);return ae(c)&&En(c).exists(u=>je(u,"block"))})(r.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,a,r),t.formatter.apply(r.format)}):"block-command"===r.type&&t.undoManager.transact(()=>{e(t.dom,a,r),t.execCommand(r.cmd,!1,r.value)})}),!0},ZE=e=>(t,n)=>{const o=Kr(t,(a,i)=>i.start.length-a.start.length),r=n.replace(an," ");return Yt(o,s=>e(s,n,r))},JE=(e,t)=>(n,o,r,s,a)=>{var i;void 0===a&&(a=null!==(i=o.textContent)&&void 0!==i?i:"");const l=n.dom,c=Fn(n);return l.is(o,c)?e(r.blockPatterns,a).map(u=>t&&le.trim(a).length===u.start.length?[]:[{pattern:u,range:lg(l,l.getRoot(),o,0,o,0,s)}]).getOr([]):[]},oB=QE((e,t,n)=>{GE(e,t,n).each(o=>{const r=B(o),s=tl(r);/^\s[^\s]/.test(s)&&Eh(r,s.slice(1))})}),rB=ZE((e,t,n)=>0===t.indexOf(e.start)||0===n.indexOf(e.start)),sB=JE(rB,!0),aB=QE(GE),iB=ZE((e,t,n)=>t===e.start||n===e.start),lB=JE(iB,!1),eS=(e,t,n)=>{for(let o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},fg=Bt.DOM,uB=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,mg=e=>kr(e,t=>!1===jt(t)),tS=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return mg({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:uB(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:uf(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},nS=e=>{const t=e.options.get;return mg({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},pg=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,oS=e=>{const t=pg(e),n=m0(e),o=e.contentCSS,r=()=>{t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},s=()=>{e.removed?r():e.on("remove",r)};if(e.contentStyles.length>0){let l="";le.each(e.contentStyles,c=>{l+=c+"\r\n"}),e.dom.addStyle(l)}const a=Promise.all(((l,c,u)=>{const{pass:f,fail:p}=qo(c,v=>tinymce.Resource.has(np(v))),g=[...f.map(v=>{const h=tinymce.Resource.get(np(v));return Te(h)?Promise.resolve(pg(l).loadRawCss(v,h)):Promise.resolve()}),pg(l).loadAll(p)];return l.inline?g:g.concat([l.ui.styleSheetLoader.loadAll(u)])})(e,o,n)).then(s).catch(s),i=a_(e);return i&&((l,c)=>{const u=B(l.getBody()),f=Xt(zt(u)),p=Pe("style");Jt(p,"type","text/css"),Ee(p,lt(c)),Ee(f,p),l.on("remove",()=>{Ye(p)})})(e,i),a},gg=e=>{var t;!0!==e.removed&&(Fr(t=e)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,t.dispatch("Init"),t.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||Hc(o)&&o.selection.getStart(!0)!==r||jn(r).each(s=>{const a=s.getNode(),i=Rr(a)?jn(a).getOr(s):s;o.selection.setRng(i.toRange())})})(t),t.nodeChanged({initial:!0});const n=O_(t);bt(n)&&n.call(t,t),(o=>{const r=D_(o);r&&Lo.setEditorTimeout(o,()=>{let s;s=!0===r?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(t)})(e))},rS=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(fg.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const o=e.getBody();var a,i;o.disabled=!0,e.readonly=h0(e),e._editableRoot=k_(e),e.hasEditableRoot()&&(e.inline&&"static"===fg.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=(e=>{const t=(()=>{let v=[];const h=S=>{if(!S.blob||!S.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const A=S.id||"blobid"+TT+++(()=>{const P=()=>Math.round(4294967295*vh()).toString(36);return"s"+(new Date).getTime().toString(36)+P()+P()+P()})(),N=S.name||A,R=S.blob;var M;return{id:me(A),name:me(N),filename:me(S.filename||N+"."+(M=R.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[M.toLowerCase()]||"dat")),blob:me(R),base64:me(S.base64),blobUri:me(S.blobUri||URL.createObjectURL(R)),uri:me(S.uri)}},y=S=>Yt(v,S).getOrUndefined(),E=S=>y(A=>A.id()===S);return{create:(S,A,N,R,M)=>{if(Te(S))return h({id:S,name:R,filename:M,blob:A,base64:N});if(Ve(S))return h(S);throw new Error("Unknown input type")},add:S=>{E(S.id())||v.push(S)},get:E,getByUri:S=>y(A=>A.blobUri()===S),getByData:(S,A)=>y(N=>N.base64()===S&&N.blob().type===A),findFirst:y,removeByUri:S=>{v=We(v,A=>A.blobUri()!==S||(URL.revokeObjectURL(A.blobUri()),!1))},destroy:()=>{J(v,S=>{URL.revokeObjectURL(S.blobUri())}),v=[]}}})();let n,o;const r=l1(),s=[],a=v=>h=>e.selection?v(h):[],i=(v,h,y)=>{let E=0;do{E=v.indexOf(h,E),-1!==E&&(v=v.substring(0,E)+y+v.substr(E+h.length),E+=y.length-h.length+1)}while(-1!==E);return v},l=(v,h,y)=>(v=i(v,`src="${h}"`,`src="${y}"${y===gt.transparentSrc?' data-mce-placeholder="1"':""}`),i(v,'data-mce-src="'+h+'"','data-mce-src="'+y+'"')),c=(v,h)=>{J(e.undoManager.data,y=>{"fragmented"===y.type?y.fragments=nt(y.fragments,E=>l(E,v,h)):y.content=l(y.content,v,h)})},u=()=>(n||(n=d1(e,r)),b().then(a(v=>{const h=nt(v,y=>y.blobInfo);return n.upload(h,c1(e)).then(a(y=>{const E=[];let S=!1;const A=nt(y,(N,R)=>{const{blobInfo:M,image:P}=v[R];let z=!1;return N.status&&Gk(e)?(N.url&&!un(P.src,N.url)&&(S=!0),t.removeByUri(P.src),Fr(e)||((W,D)=>{const I=e.convertURL(D,"src");var j;c(W.src,D),or(B(W),{src:c0(e)?(j=D,j+(-1===j.indexOf("?")?"?":"&")+(new Date).getTime()):D,"data-mce-src":I})})(P,N.url)):N.error&&(N.error.remove&&(c(P.src,gt.transparentSrc),E.push(P),z=!0),xd(e,fr.translate(["Failed to upload image: {0}",N.error.message]))),{element:P,status:N.status,uploadUri:N.url,blobInfo:M,removed:z}});return E.length>0&&!Fr(e)?e.undoManager.transact(()=>{J(tn(E),N=>{const R=so(N);Ye(N),R.each((M=>P=>{var z,W;(z=M).dom.isEmpty((W=P).dom)&&ce(z.schema.getTextBlockElements()[mt(W)])&&Ee(P,ue('<br data-mce-bogus="1" />'))})(e)),t.removeByUri(N.dom.src)})}):S&&e.undoManager.dispatchChange(),A}))}))),f=()=>l0(e)?u():Promise.resolve([]),p=v=>ro(s,h=>h(v)),b=()=>(o||(o=((e,t)=>{const n={};return{findAll:(o,r=Ut)=>{const s=We((i=o)?vn(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===gt.transparentSrc)&&(Vt(l,"blob:")?!e.isUploaded(l)&&r(i):!!Vt(l,"data:")&&r(i))}),a=nt(s,i=>{const l=i.src;if(je(n,l))return n[l].then(c=>Te(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((u,f)=>{const p=()=>Promise.reject("Invalid data URI");if(Vt(f,"blob:")){const v=u.getByUri(f);return ce(v)?Promise.resolve(v):(b=f,Vt(b,"blob:")?(h=b,fetch(h).then(y=>y.ok?y.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${h} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Vt(b,"data:")?(g=b,new Promise((h,y)=>{Mm(g).bind(({type:E,data:S,base64Encoded:A})=>nC(E,S,A)).fold(()=>y("Invalid data URI"),h)})):Promise.reject("Unknown URI format")).then(h=>oC(h).then(y=>rC(y,!1,E=>k.some(sC(u,h,E))).getOrThunk(p)))}var h,b,g;return Vt(f,"data:")?aC(u,f).fold(p,v=>Promise.resolve(v)):Promise.reject("Unknown image data format")})(t,l).then(u=>(delete n[l],{image:i,blobInfo:u})).catch(u=>(delete n[l],u));return n[l]=c,c}});var i;return Promise.all(a)}}})(r,t)),o.findAll(e.getBody(),p).then(a(v=>{const h=We(v,y=>Te(y)?(xd(e,y),!1):"blob"!==y.uriType);return Fr(e)||J(h,y=>{c(y.image.src,y.blobInfo.blobUri()),y.image.src=y.blobInfo.blobUri(),y.image.removeAttribute("data-mce-src")}),h}))),g=v=>v.replace(/src="(blob:[^"]+)"/g,(h,y)=>{const E=r.getResultUri(y);if(E)return'src="'+E+'"';let S=t.getByUri(y);return S||(S=bn(e.editorManager.get(),(A,N)=>A||N.editorUpload&&N.editorUpload.blobCache.getByUri(y),void 0)),S?'src="data:'+S.blob().type+";base64,"+S.base64()+'"':h});return e.on("SetContent",()=>{l0(e)?f():b()}),e.on("RawSaveContent",v=>{v.content=g(v.content)}),e.on("GetContent",v=>{v.source_view||"raw"===v.format||"tree"===v.format||(v.content=g(v.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",v=>{J(v,h=>{const y=h.attr("src");if(!y||t.getByUri(y))return;const E=r.getResultUri(y);E&&h.attr("src",E)})})}),{blobCache:t,addFilter:v=>{s.push(v)},uploadImages:u,uploadImagesAuto:f,scanForImages:b,destroy:()=>{t.destroy(),r.destroy(),o=n=null}}})(e),e.schema=_s(nS(e)),e.dom=Bt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:n_(e),referrerPolicy:lf(e),onSetAttrib:a=>{e.dispatch("SetAttrib",a)}}),e.parser=(a=>{const i=fi(tS(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const u=a.dom,f="data-mce-"+c;let p=l.length;for(;p--;){const b=l[p];let g=b.attr(c);if(g&&!b.attr(f)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===c?(g=u.serializeStyle(u.parseStyle(g),b.name),g.length||(g=null),b.attr(f,g),b.attr(c,g)):"tabindex"===c?(b.attr(f,g),b.attr(c,null)):b.attr(f,a.convertURL(g,c,b.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const u=l[c],f=u.attr("type")||"no/type";0!==f.indexOf("mce-")&&u.attr("type","mce-"+f)}}),Q_(a)&&i.addNodeFilter("#cdata",l=>{var c;let u=l.length;for(;u--;){const f=l[u];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode(null!==(c=f.value)&&void 0!==c?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const u=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(u)&&0===f.getAll("br").length&&f.append(new qn("br",1))}}),i})(e),e.serializer=ZC((a=>{const i=a.options.get;return{...tS(a),...nS(a),...mg({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(e),e),e.selection=QC(e.dom,e.getWin(),e.serializer,e),e.annotator=bb(e),e.formatter=m1(e),e.undoManager=g1(e),e._nodeChangeDispatcher=new kO(e),e._selectionOverrides=eB(e),(a=>{const i=rs(),l=pn(!1),c=$u(u=>{a.dispatch("longpress",{...u,type:"longpress"}),l.set(!0)},400);a.on("touchstart",u=>{_w(u).each(f=>{c.cancel();const p={x:f.clientX,y:f.clientY,target:u.target};c.throttle(u),l.set(!1),i.set(p)})},!0),a.on("touchmove",u=>{c.cancel(),_w(u).each(f=>{i.on(p=>{((b,g)=>{const v=Math.abs(b.clientX-g.x),h=Math.abs(b.clientY-g.y);return v>5||h>5})(f,p)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",u=>{c.cancel(),"touchcancel"!==u.type&&i.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{l.get()?u.preventDefault():a.dispatch("tap",{...u,type:"tap"})})},!0)})(e),(i=a=e).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{const c=tN(i);J(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const c=nN(i);J(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})})})(a),(a=>{const i="contenteditable",l=" "+le.trim(Y_(a))+" ",c=" "+le.trim(C0(a))+" ",u=Aw(l),f=Aw(c),p=G_(a);p.length>0&&a.on("BeforeSetContent",b=>{((g,v,h)=>{let y=v.length,E=h.content;if("raw"!==h.format){for(;y--;)E=E.replace(v[y],bR(g,E,C0(g)));h.content=E}})(a,p,b)}),a.parser.addAttributeFilter("class",b=>{let g=b.length;for(;g--;){const v=b[g];u(v)?v.attr(i,"true"):f(v)&&v.attr(i,"false")}}),a.serializer.addAttributeFilter(i,b=>{let g=b.length;for(;g--;){const v=b[g];if(!u(v)&&!f(v))continue;const h=v.attr("data-mce-content");p.length>0&&h?vR(p,h)?(v.name="#text",v.type=3,v.raw=!0,v.value=h):v.remove():v.attr(i,null)}})})(e),Fr(e)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(e=>{const t=((n,o,r)=>{const s=G.fromRangeStart(n).getNode(),a=(f=o,p=r,Qn(B(s),b=>Yo(b.dom)||p.isBlock(mt(b)),kE(f)).getOr(B(f)).dom),i=NE(s,a,!1),l=NE(s,a,!0),c=document.createRange();var f,p;return _E(i,a).fold(()=>{SE(i)?c.setStart(i,0):c.setStartBefore(i)},u=>c.setStartBefore(u.dom)),_E(l,a).fold(()=>{SE(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)},u=>c.setEndAfter(u.dom)),c})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Cm(t))})(a))})})(e),(a=>{(e=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>{return a=K_(e).filter(l=>"inline-command"!==l.type&&"block-command"!==l.type||e.queryCommandSupported(l.cmd)),i=X_(e),{inlinePatterns:n0(a),blockPatterns:t0(a),dynamicPatternsLookup:i};var a,i},r=()=>e.options.isSet("text_patterns_lookup");e.on("keydown",a=>{if(13===a.keyCode&&!ye.modifierPressed(a)&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=sf(o(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||r())&&((u,f)=>{const p=u.selection.getRng();return Qd(u,p).map(b=>{var g;const v=Math.max(0,p.startOffset),h=cg(f,b,null!==(g=b.textContent)&&void 0!==g?g:"");return{inlineMatches:XE(u,b,p.startContainer,v,h,!0),blockMatches:sB(u,b,h,!0)}}).filter(({inlineMatches:b,blockMatches:g})=>g.length>0||b.length>0)})(l=e,i).fold(vt,({inlineMatches:u,blockMatches:f})=>(l.undoManager.add(),l.undoManager.extra(()=>{l.execCommand("mceInsertNewLine")},()=>{l.insertContent(gn,{preserve_zwsp:!0}),YE(l,u),((g,v)=>{if(0===v.length)return;const h=g.selection.getBookmark();J(v,y=>oB(g,y)),g.selection.moveToBookmark(h)})(l,f);const p=l.selection.getRng(),b=Rp(p.startContainer,p.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),b.each(g=>{const v=g.container;"\ufeff"===v.data.charAt(g.offset-1)&&(v.deleteData(g.offset-1,1),xi(l.dom,v.parentNode,h=>h===l.dom.getRoot()))})}),!0))&&a.preventDefault()}var l},!0),e.on("keydown",a=>{if(32===a.keyCode&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=sf(o(),"space");(i.blockPatterns.length>0||r())&&((u,f)=>{const p=u.selection.getRng();return Qd(u,p).map(b=>{const g=Math.max(0,p.startOffset),v=dg(u.dom,b,p.startContainer,g),h=cg(f,b,v);return lB(u,b,h,!1,v)}).filter(b=>b.length>0)})(l=e,i).fold(vt,u=>(l.undoManager.transact(()=>{var f;f=l,J(u,b=>aB(f,b))}),!0))&&a.preventDefault()}var l},!0);const s=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const a=sf(o(),"space");(a.inlinePatterns.length>0||r())&&((i,l)=>{const c=i.selection.getRng();Qd(i,c).map(u=>{const f=Math.max(0,c.startOffset-1),p=dg(i.dom,u,c.startContainer,f),b=cg(l,u,p),g=XE(i,u,c.startContainer,f,b,!1);g.length>0&&i.undoManager.transact(()=>{YE(i,g)})})})(e,a)}};e.on("keyup",a=>{eS(n,a,(i,l)=>i===l.keyCode&&!ye.modifierPressed(l))&&s()}),e.on("keypress",a=>{eS(t,a,(i,l)=>i.charCodeAt(0)===l.charCode)&&Lo.setEditorTimeout(e,s)})})(a)})(e));const r=SO(e);((a,i)=>{a.addCommand("delete",()=>{var l;kw(l=a,i,!1).fold(()=>{l.selection.isEditable()&&(sd(l),am(l))},Kn)}),a.addCommand("forwardDelete",()=>{var l;kw(l=a,i,!0).fold(()=>{l.selection.isEditable()&&Vv(l)},Kn)})})(e,r),(a=>{a.on("NodeChange",()=>(i=>{const l=i.dom,c=i.selection,u=i.schema,f=u.getBlockElements(),p=c.getStart(),b=i.getBody();let g,v,h=null;const y=Fn(i);if(!p||!_e(p))return;const E=b.nodeName.toLowerCase();if(!u.isValidChild(E,y.toLowerCase())||(A=f,N=b,St(xv(B(p),B(N)),M=>_p(A,M.dom))))return;var A,N;if(b.firstChild===b.lastChild&&Ht(b.firstChild))return g=Np(i),g.appendChild(Ga().dom),b.replaceChild(g,b.firstChild),i.selection.setCursorLocation(g,0),void i.nodeChanged();let S=b.firstChild;for(;S;)if(_e(S)&&ak(u,S),gR(u,S)){if(hR(f,S)){v=S,S=S.nextSibling,l.remove(v);continue}if(!g){if(!h&&i.hasFocus()&&(h=B1(i.selection.getRng(),()=>document.createElement("span"))),!S.parentNode){S=null;break}g=Np(i),b.insertBefore(g,S)}v=S,S=S.nextSibling,g.appendChild(v)}else g=null,S=S.nextSibling;h&&(i.selection.setRng(D1(h)),i.nodeChanged())})(a))})(e),(a=>{var i;const l=a.dom,c=Fn(a),u=null!==(i=d_(a))&&void 0!==i?i:"",f=(p,b)=>{if((h=>{if(b1(h)){const y=h.keyCode;return!v1(h)&&(ye.metaKeyPressed(h)||h.altKey||y>=112&&y<=123||Re(MT,y))}return!1})(p))return;const g=a.getBody(),v=!(b1(h=p)&&!(v1(h)||"keyup"===h.type&&229===h.keyCode))&&((h,y,E)=>{if(h.isEmpty(y,void 0,{skipBogus:!1,includeZwsp:!0})){const S=y.firstElementChild;return!S||!h.getStyle(y.firstElementChild,"padding-left")&&!h.getStyle(y.firstElementChild,"padding-right")&&E===S.nodeName.toLowerCase()}return!1})(l,g,c);var h;(""!==l.getAttrib(g,h1)!==v||b)&&(l.setAttrib(g,h1,v?u:null),((h,y)=>{h.dispatch("PlaceholderToggle",{state:y})})(a,v),a.on(v?"keydown":"keyup",f),a.off(v?"keyup":"keydown",f))};So(u)&&a.on("init",p=>{f(p,!0),a.on("change SetContent ExecCommand",f),a.on("paste",b=>Lo.setEditorTimeout(a,()=>f(b)))})})(e),(e=>{const t=pn(!1),n=pn($_(e)?"text":"html"),o=(r=>{const s=pn(null);return{create:()=>((a,i)=>{const{dom:l,selection:c}=a,u=a.getBody();i.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},lE);gt.browser.isFirefox()&&l.setStyle(f,"left","rtl"===l.getStyle(u,"direction",!0)?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",p=>{p.stopPropagation()}),f.focus(),c.select(f,!0)})(r,s),remove:()=>((a,i)=>{const l=a.dom;if(ng(a)){let c;const u=i.get();for(;c=ng(a);)l.remove(c),l.unbind(c);u&&a.selection.setRng(u)}i.set(null)})(r,s),getEl:()=>ng(r),getHtml:()=>(a=>{const i=a.dom,l=(p,b)=>{p.appendChild(b),i.remove(b,!0)},[c,...u]=We(a.getBody().childNodes,DO);J(u,p=>{l(c,p)});const f=i.select("div[id=mcepastebin]",c);for(let p=f.length-1;p>=0;p--){const b=i.create("div");c.insertBefore(b,f[p]),l(b,f[p])}return c?c.innerHTML:""})(r),getLastRng:s.get}})(e);var r,s,a;r=e,(gt.browser.isChromium()||gt.browser.isSafari())&&(a=zO,(s=r).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),Sb(a,!1)):(i.set("text"),Sb(a,!0)),a.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Xd(r,i.html,i.internal,!1),i.text&&sg(r,i.text,!1)})})(e,n),(r=>{const s=l=>c=>{l(r,c)},a=I_(r);bt(a)&&r.on("PastePreProcess",s(a));const i=F_(r);bt(i)&&r.on("PastePostProcess",s(i))})(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>"text"===n.get()),e.on("PreInit",()=>{(r=>{r.on("cut",(s=>a=>{!a.isDefaultPrevented()&&CE(s)&&s.selection.isEditable()&&bE(a,yE(s),vE(s),()=>{if(gt.browser.isChromium()||gt.browser.isFirefox()){const i=s.selection.getRng();Lo.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>a=>{!a.isDefaultPrevented()&&CE(s)&&bE(a,yE(s),vE(s),ke)})(r))})(e),((r,s)=>{M_(r)&&r.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Lc(r)||r.on("drop",a=>{const i=a.dataTransfer;i&&St(i.files,c=>/^image\//.test(c.type))&&a.preventDefault()}),r.on("drop",a=>{if(a.isDefaultPrevented())return;const i=wE(r,a);if(wt(i))return;const l=pE(a.dataTransfer),c=Fs(l,Kd());if((!gE(l)||(g=>{const v=g["text/plain"];return!!v&&0===v.indexOf("file://")})(l))&&hE(r,a,i))return;const u=l[Kd()],f=u||l["text/html"]||l["text/plain"],p=((g,v,h,y)=>{const E=g.getParent(h,S=>aa(v,S));if(!Ze(g.getParent(h,"summary")))return!0;if(E&&je(y,"text/html")){const S=(new DOMParser).parseFromString(y["text/html"],"text/html").body;return!Ze(S.querySelector(E.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,i.startContainer,l),b=s.get();b&&!p||f&&(a.preventDefault(),Lo.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{(u||b&&p)&&r.execCommand("Delete"),xE(r,i);const g=uE(f);l["text/html"]?Xd(r,g,c,!0):sg(r,g,!0)})}))}),r.on("dragstart",a=>{s.set(!0)}),r.on("dragover dragend",a=>{Lc(r)&&!s.get()&&(a.preventDefault(),xE(r,wE(r,a))),"dragend"===a.type&&s.set(!1)}),(a=>{a.on("input",i=>{const l=c=>Ze(c.querySelector("summary"));if("deleteByDrag"===i.inputType){const c=We(a.dom.select("details"),l);J(c,u=>{Ht(u.firstChild)&&u.firstChild.remove();const f=a.dom.create("summary");f.appendChild(Ga().dom),u.prepend(f)})}})})(r)})(e,t),((e,t,n)=>{((o,r,s)=>{let a;o.on("keydown",i=>{var l;(ye.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(u=i,gt.os.isAndroid()&&0===(null===(p=null===(f=u.clipboardData)||void 0===f?void 0:f.items)||void 0===p?void 0:p.length)))return;var u,f,p;const l="text"===s.get()||a;a=!1;const c=pE(i.clipboardData);!gE(c)&&hE(o,i,r.getLastRng()||o.selection.getRng())||(Fs(c,"text/html")?(i.preventDefault(),ag(o,c,c["text/html"],l,!0)):Fs(c,"text/plain")&&Fs(c,"text/uri-list")?(i.preventDefault(),ag(o,c,c["text/plain"],l,!0)):(r.create(),Lo.setEditorTimeout(o,()=>{const u=r.getHtml();r.remove(),ag(o,c,u,l,!1)},0)))})})(e,t,n),(o=>{const r=a=>Vt(a,"webkit-fake-url"),s=a=>Vt(a,"data:");o.parser.addNodeFilter("img",(a,i,l)=>{if(!Lc(o)&&!0===(null===(u=l.data)||void 0===u?void 0:u.paste))for(const c of a){const u=c.attr("src");Te(u)&&!c.attr("data-mce-object")&&u!==gt.transparentSrc&&(r(u)||!V_(o)&&s(u))&&c.remove()}var u})})(e)})(e,o,n)})})(e);const s=(a=>{const i=a;return(l=a,Ot(l.plugins,"rtc").bind(c=>k.from(c.setup))).fold(()=>(i.rtcInstance=WC(a),k.none()),l=>(i.rtcInstance=(()=>{const c=me(null),u=me("");return{init:{bindEvents:ke},undoManager:{beforeChange:ke,add:c,undo:c,redo:c,clear:ke,reset:ke,hasUndo:vt,hasRedo:vt,transact:c,ignore:ke,extra:ke},formatter:{match:vt,matchAll:me([]),matchNode:me(void 0),canApply:vt,closest:u,apply:ke,remove:ke,toggle:ke,formatChanged:me({unbind:ke})},editor:{getContent:u,setContent:me({content:"",html:""}),insertContent:me(""),addVisual:ke},selection:{getContent:u},autocompleter:{addDecoration:ke,removeDecoration:ke},raw:{getModel:me(k.none())}}})(),k.some(()=>l().then(c=>(i.rtcInstance=(u=>{const f=S=>Ve(S)?S:{},{init:p,undoManager:b,formatter:g,editor:v,selection:h,autocompleter:y,raw:E}=u;return{init:{bindEvents:p.bindEvents},undoManager:{beforeChange:b.beforeChange,add:b.add,undo:b.undo,redo:b.redo,clear:b.clear,reset:b.reset,hasUndo:b.hasUndo,hasRedo:b.hasRedo,transact:(S,A,N)=>b.transact(N),ignore:(S,A)=>b.ignore(A),extra:(S,A,N,R)=>b.extra(N,R)},formatter:{match:(S,A,N,R)=>g.match(S,f(A),R),matchAll:g.matchAll,matchNode:g.matchNode,canApply:S=>g.canApply(S),closest:S=>g.closest(S),apply:(S,A,N)=>g.apply(S,f(A)),remove:(S,A,N,R)=>g.remove(S,f(A)),toggle:(S,A,N)=>g.toggle(S,f(A)),formatChanged:(S,A,N,R,M)=>g.formatChanged(A,N,R,M)},editor:{getContent:S=>v.getContent(S),setContent:(S,A)=>({content:v.setContent(S,A),html:""}),insertContent:(S,A)=>(v.insertContent(S),""),addVisual:v.addVisual},selection:{getContent:(S,A)=>h.getContent(A)},autocompleter:{addDecoration:y.addDecoration,removeDecoration:y.removeDecoration},raw:{getModel:()=>k.some(E.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(e);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),P_(a)||(i.body.spellcheck=!1,fg.setAttrib(l,"spellcheck","false")),a.quirks=(e=>{const t=le.each,n=ye.BACKSPACE,o=ye.DELETE,r=e.dom,s=e.selection,a=e.parser,i=gt.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),u=gt.deviceType.isiPhone()||gt.deviceType.isiPad(),f=gt.os.isMacOS()||gt.os.isiOS(),p=(D,I)=>{try{e.getDoc().execCommand(D,!1,String(I))}catch{}},b=D=>D.isDefaultPrevented(),g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},v=()=>{e.inline||r.bind(e.getDoc(),"mousedown mouseup",D=>{let I;if(D.target===e.getDoc().documentElement)if(I=s.getRng(),e.getBody().focus(),"mousedown"===D.type){if(Ro(I.startContainer))return;s.placeCaretAt(D.clientX,D.clientY)}else s.setRng(I)})},h=()=>{Range.prototype.getClientRects||e.on("mousedown",D=>{if(!b(D)&&"HTML"===D.target.nodeName){const I=e.getBody();I.blur(),Lo.setEditorTimeout(e,()=>{I.focus()})}})},y=()=>{const D=v0(e);e.on("click",I=>{const j=I.target;/^(IMG|HR)$/.test(j.nodeName)&&r.isEditable(j)&&(I.preventDefault(),e.selection.select(j),e.nodeChanged()),"A"===j.nodeName&&r.hasClass(j,D)&&0===j.childNodes.length&&r.isEditable(j.parentNode)&&(I.preventDefault(),s.select(j))})},E=()=>{e.on("keydown",D=>{if(!b(D)&&D.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const I=s.getNode().previousSibling;if(I&&I.nodeName&&"table"===I.nodeName.toLowerCase())return D.preventDefault(),!1}return!0})},S=()=>{h0(e)||e.on("BeforeExecCommand mousedown",()=>{p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),p0(e)||p("enableObjectResizing",!1)})},A=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},N=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},R=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",D=>{let I;"HTML"===D.target.nodeName&&(I=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(I),e.selection.normalize(),e.nodeChanged())}))},M=()=>{f&&e.on("keydown",D=>{!ye.metaKeyPressed(D)||D.shiftKey||37!==D.keyCode&&39!==D.keyCode||(D.preventDefault(),e.selection.getSel().modify("move",37===D.keyCode?"backward":"forward","lineboundary"))})},P=()=>{e.on("click",D=>{let I=D.target;do{if("A"===I.tagName)return void D.preventDefault()}while(I=I.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},z=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",D=>{D.preventDefault()})})},W=ke;return Fr(e)?(c&&(v(),y(),z(),g(),u&&(N(),R(),P())),l&&(h(),S(),A(),M())):(e.on("keydown",D=>{if(b(D)||D.keyCode!==ye.BACKSPACE)return;let I=s.getRng();const j=I.startContainer,Q=I.startOffset,re=r.getRoot();let oe=j;if(I.collapsed&&0===Q){for(;oe.parentNode&&oe.parentNode.firstChild===oe&&oe.parentNode!==re;)oe=oe.parentNode;"BLOCKQUOTE"===oe.nodeName&&(e.formatter.toggle("blockquote",void 0,oe),I=r.createRng(),I.setStart(j,0),I.setEnd(j,0),s.setRng(I))}}),(()=>{const D=I=>{const j=r.create("body"),Q=I.cloneContents();return j.appendChild(Q),s.serializer.serialize(j,{format:"html"})};e.on("keydown",I=>{const j=I.keyCode;if(!b(I)&&(j===o||j===n)&&e.selection.isEditable()){const Q=e.selection.isCollapsed(),re=e.getBody();if(Q&&!os(e.schema,re)||!Q&&!(oe=>{const we=D(oe),Ae=r.createRng();return Ae.selectNode(e.getBody()),we===D(Ae)})(e.selection.getRng()))return;I.preventDefault(),e.setContent(""),re.firstChild&&r.isBlock(re.firstChild)?e.selection.setCursorLocation(re.firstChild,0):e.selection.setCursorLocation(re,0),e.nodeChanged()}})})(),gt.windowsPhone||e.on("keyup focusin mouseup",D=>{ye.modifierPressed(D)||(I=>{const j=I.getBody(),Q=I.selection.getRng();return Q.startContainer===Q.endContainer&&Q.startContainer===j&&0===Q.startOffset&&Q.endOffset===j.childNodes.length})(e)||s.normalize()},!0),c&&(v(),y(),e.on("init",()=>{p("DefaultParagraphSeparator",Fn(e))}),z(),E(),a.addNodeFilter("br",D=>{let I=D.length;for(;I--;)"Apple-interchange-newline"===D[I].attr("class")&&D[I].remove()}),u?(N(),R(),P()):g()),l&&(e.on("keydown",D=>{if(!b(D)&&D.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const I=s.getNode(),j=I.previousSibling;if("HR"===I.nodeName)return r.remove(I),void D.preventDefault();j&&j.nodeName&&"hr"===j.nodeName.toLowerCase()&&(r.remove(j),D.preventDefault())}}}),h(),(()=>{const D=()=>{const j=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const Q=s.getStart();Q!==e.getBody()&&(r.setAttrib(Q,"style",null),t(j,re=>{Q.setAttributeNode(re.cloneNode(!0))}))}},I=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);e.on("keypress",j=>{let Q;return!(!(b(j)||8!==j.keyCode&&46!==j.keyCode)&&I()&&(Q=D(),e.getDoc().execCommand("delete",!1),Q(),j.preventDefault(),1))}),r.bind(e.getDoc(),"cut",j=>{if(!b(j)&&I()){const Q=D();Lo.setEditorTimeout(e,()=>{Q()})}})})(),S(),e.on("SetContent ExecCommand",D=>{"setcontent"!==D.type&&"mceInsertLink"!==D.command||t(r.select("a:not([data-mce-block])"),I=>{var j;let Q=I.parentNode;const re=r.getRoot();if(Q?.lastChild===I){for(;Q&&!r.isBlock(Q);){if((null===(j=Q.parentNode)||void 0===j?void 0:j.lastChild)!==Q||Q===re)return;Q=Q.parentNode}r.add(Q,"br",{"data-mce-bogus":1})}})}),A(),M(),E())),{refreshContentEditable:W,isHidden:()=>{if(!l||e.removed)return!1;const D=e.selection.getSel();return!D||!D.rangeCount||0===D.rangeCount}}})(a),a.dispatch("PostRender");const c=i_(a);void 0!==c&&(l.dir=c);const u=L_(a);u&&a.on("BeforeSetContent",f=>{le.each(u,p=>{f.content=f.content.replace(p,b=>"\x3c!--mce:protected "+escape(b)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing="compositionstart"===f.type})})(e),(a=>{const i=rN(a);var c,l;Te(sN(a))||!jt(i)&&"INVALID"!=("gpl"===(l=i).toLowerCase()||(c=l).length>=64&&c.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(e),s.fold(()=>{const a=(i=>{let l=!1;const c=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(e);oS(e).then(()=>{gg(e),a()})},a=>{e.setProgressState(!0),oS(e).then(()=>{a().then(i=>{e.setProgressState(!1),gg(e),VC(e)},i=>{e.notificationManager.open({type:"error",text:String(i)}),gg(e),VC(e)})})})},fB=Ut,hg=Bt.DOM,sS=Bt.DOM,aS=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),iS=e=>{const t=e.getElement();return e.inline?aS(null):(n=>{const o=sS.create("div");return sS.insertAfter(o,n),aS(o,o)})(t)},mB=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const o=le.trim(d0(n)),r=n.ui.registry.getAll().icons,s={...wd.get("default").icons,...wd.get(o).icons};yt(s,(a,i)=>{je(r,i)||n.ui.registry.addIcon(i,a)})})(e),(n=>{const o=ei(n);if(Te(o)){const r=Aa.get(o);n.theme=r(n,Aa.urls[o])||{},bt(n.theme.init)&&n.theme.init(n,Aa.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const o=cf(n),r=mi.get(o);n.model=r(n,mi.urls[o])})(e),(n=>{const o=[];J(Pc(n),r=>{((s,a,i)=>{const l=pi.get(i),c=pi.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=le.trim(i),l&&-1===le.inArray(a,i)){if(s.plugins[i])return;try{const u=l(s,c)||{};s.plugins[i]=u,bt(u.init)&&(u.init(s,c),a.push(i))}catch(u){((f,p,b)=>{const g=fr.translate(["Failed to initialize plugin: {0}",p]);yb(f,"PluginLoadError",{message:g}),Ed(g,b),xd(f,g)})(s,i,u)}}})(n,o,r.replace(/^\-/,""))})})(e);const t=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,Te(ei(n))?(r=>{const s=r.theme.renderUI;return s?s():iS(r)})(n):bt(ei(n))?(r=>{const s=r.getElement(),a=ei(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):iS(n)})(e);var n,o;((n,o)=>{const r={show:k.from(o.show).getOr(ke),hide:k.from(o.hide).getOr(ke),isEnabled:k.from(o.isEnabled).getOr(Ut),setEnabled:s=>{s&&"readonly"===n.mode.get()||k.from(o.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...r}})(e,k.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=e).contentCSS=n.contentCSS.concat(i1(o=n,s_(o)),(o=>i1(o,m0(o)))(n)),e.inline?rS(e):((n,o)=>{((r,s)=>{const a=gt.browser.isFirefox()?y0(r):"Rich Text Area",i=r.translate(a),l=rr(B(r.getElement()),"tabindex").bind(Ys),c=((u,f,p,b)=>{const g=Pe("iframe");return b.each(v=>Jt(g,"tabindex",v)),or(g,p),or(g,{id:u+"_ifr",frameBorder:"0",allowTransparency:"true",title:f}),H(g,"tox-edit-area__iframe"),g})(r.id,i,zk(r),l).dom;c.onload=()=>{c.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=c,r.iframeHTML=(u=>{let f=Uk(u)+"<html><head>";a0(u)!==u.documentBaseUrl&&(f+='<base href="'+u.documentBaseURI.getURI()+'" />'),f+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const p=Hk(u),b=qk(u),g=u.translate(y0(u));return i0(u)&&(f+='<meta http-equiv="Content-Security-Policy" content="'+i0(u)+'" />'),f+=`</head><body id="${p}" class="mce-content-body ${b}" data-id="${u.id}" aria-label="${g}"><br></body></html>`,f})(r),hg.add(s.iframeContainer,c)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=hg.isHidden(o.editorContainer)),n.getElement().style.display="none",hg.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,a=()=>{r.contentDocument=s.contentDocument,rS(r)};if(J_(r)||gt.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),a()}else{const l=((e,t,n)=>((r,s,a,i)=>{const c=((u,f)=>p=>{u(p)&&f((b=>{const g=B(Ao(b).getOr(b.target)),v=()=>b.stopPropagation(),h=()=>b.preventDefault(),y=Dn(h,v);return((E,S,A,N,R,M,P)=>({target:E,x:S,y:A,stop:N,prevent:R,kill:M,raw:P}))(g,b.clientX,b.clientY,v,h,y,b)})(p))})(a,i);return r.dom.addEventListener(s,c,!1),{unbind:xe(lo,r,s,c,!1)}})(e,"load",n,()=>{l.unbind(),a()}))(B(s),0,fB);s.srcdoc=r.iframeHTML}})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Ra=Bt.DOM,lS=e=>"-"===e.charAt(0),cS=(e,t,n)=>k.from(t).filter(o=>So(o)&&!wd.has(o)).map(o=>({url:`${e.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:k.some(o)})),dS=Ln().deviceType,uS=dS.isPhone(),gB=dS.isTablet(),Zl=e=>{if(wt(e))return[];{const t=ae(e)?e:e.split(/[ ,]/),n=nt(t,Gr);return We(n,So)}},bg=(e,t)=>je(e.sections(),t),bB=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ot(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),vB=(e,t)=>{var n;const o=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?le.extend({},e.external_plugins,o):o},wB=(e,t)=>{const n=e.selection,o=e.dom;return/^ | $/.test(t)?((r,s,a,i)=>{const l=B(r.getRoot());return a=El(l,G.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Sl(l,G.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),t,e.schema):t},eu=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:o}=(r=>{if("string"!=typeof r){const s=le.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(t);Km(e,{...o,content:wB(e,n),format:"html",set:!1,selection:!0}).each(r=>{const s=(i=r.content,l=o,ep(e).editor.insertContent(i,l));var i,l;Xm(e,s,r),e.addVisual()})}},xB={"font-size":"size","font-family":"face"},EB=ta("font"),fS=e=>(t,n)=>k.from(n).map(B).filter(Un).bind(o=>{return(r=e,s=t,a=o.dom,Sm(B(a),i=>{return te(l=i,r).orThunk(()=>EB(l)?Ot(xB,r).bind(c=>rr(l,c)):k.none());var l},i=>Fe(B(s),i))).or(((r,s)=>k.from(Bt.DOM.getStyle(s,r,!0)))(e,o.dom));var r,s,a}).getOr(""),SB=fS("font-size"),kB=Dn(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),fS("font-family")),_B=e=>jn(e.getBody()).bind(t=>{const n=t.container();return k.from(se(n)?n.parentNode:n)}),vg=(e,t)=>{return n=e,o=Hs(k.some,t),(r=n,k.from(r.selection.getRng()).bind(s=>{const a=r.getBody();return s.startContainer===a&&0===s.startOffset?k.none():k.from(r.selection.getStart(!0))})).orThunk(xe(_B,n)).map(B).filter(Un).bind(o);var n,o,r},mS=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=le.explode(e.options.get("font_size_style_values")),r=le.explode(e.options.get("font_size_classes"));return r.length>0?r[n-1]||t:o[n-1]||t}return t}return t},NB=e=>{const t=e.split(/\s*,\s*/);return nt(t,n=>-1===n.indexOf(" ")||Vt(n,'"')||Vt(n,"'")?n:`'${n}'`).join(",")},pS=(e,t)=>{if(e.mode.isReadOnly())return;const n=e.dom,o=e.selection.getRng(),r=t?e.selection.getStart():e.selection.getEnd(),s=t?o.startContainer:o.endContainer,a=Kl(n,s);if(!a||!a.isContentEditable)return;const i=t?Oe:Ie,l=Fn(e);((c,u,f,p)=>{const b=c.dom,g=h=>b.isBlock(h)&&h.parentElement===f,v=g(u)?u:b.getParent(p,g,f);return k.from(v).map(B)})(e,r,a,s).each(c=>{const u=Bx(e,s,c.dom,a,!1,l);i(c,B(u)),e.selection.setCursorLocation(u,0),e.dispatch("NewBlock",{newBlock:u}),Vl(e,"insertParagraph")})},TB=["toggleview"],gS=e=>Re(TB,e.toLowerCase());class hS{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,o,r){const s=this.editor,a=t.toLowerCase(),i=r?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?$f(c=s).each(u=>c.selection.setRng(u)):s.focus()),s.dispatch("BeforeExecCommand",{command:t,ui:n,value:o}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[a];return!!bt(l)&&(l(a,n,o),s.dispatch("ExecCommand",{command:t,ui:n,value:o}),!0)}queryCommandState(t){if(!gS(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),o=this.commands.state[n];return!!bt(o)&&o(n)}queryCommandValue(t){if(!gS(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),o=this.commands.value[n];return bt(o)?o(n):""}addCommands(t,n="exec"){const o=this.commands;yt(t,(r,s)=>{J(s.toLowerCase().split(","),a=>{o[n][a]=r})})}addCommand(t,n,o){const r=t.toLowerCase();this.commands.exec[r]=(s,a,i)=>n.call(o??this.editor,a,i)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,o){this.commands.state[t.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(t,n,o){this.commands.value[t.toLowerCase()]=()=>n.call(o??this.editor)}}const yg=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},bS=(e,t)=>{e.dom.contentEditable=t?"true":"false"},Ei=e=>e.readonly,OB=["copy"],BB=le.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Cg{static isNative(t){return!!BB[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||vt}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const o=t.toLowerCase(),r=ju(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(t,n,o,r){if(!1===n&&(n=vt),n){const s={func:n,removed:!1};r&&le.extend(s,r);const a=t.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(t,n){if(t){const o=t.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return yt(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=qo(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,J(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(t,!1),delete this.bindings[s])}}}else yt(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(t,n,o){return this.on(t,n,o,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||0===n.length)}}const Jl=e=>(e._eventDispatcher||(e._eventDispatcher=new Cg({scope:e,toggleEvent:(t,n)=>{Cg.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),wg={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const o=this;if(o.removed&&"remove"!==e&&"detach"!==e)return ju(e.toLowerCase(),t??{},o);const r=Jl(o).dispatch(e,t);if(!1!==n&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(e,r,!1),s=s.parent?s.parent():void 0}return r},on(e,t,n){return Jl(this).on(e,t,n)},off(e,t){return Jl(this).off(e,t)},once(e,t){return Jl(this).once(e,t)},hasEventListeners(e){return Jl(this).has(e)}},tu=Bt.DOM;let Oa;const nu=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=g0(e);return n?(e.eventRoot||(e.eventRoot=tu.select(n)[0]),e.eventRoot):e.getBody()},vS=(e,t,n)=>{e.hidden?Ei(e)&&((o,r)=>{if("click"!==r.type||ye.metaKeyPressed(r))Re(OB,r.type)&&o.dispatch(r.type,r);else{const s=B(r.target);(a=o,i=s,lr(i,"a",l=>Fe(l,B(a.getBody()))).bind(l=>rr(l,"href"))).each(a=>{if(r.preventDefault(),/^#/.test(a)){const i=o.dom.select(`${a},[name="${Yr(a,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(e,n):e.dispatch(t,n)},yS=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=nu(e,t);if(g0(e)){if(Oa||(Oa={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Oa&&(yt(Oa,(r,s)=>{e.dom.unbind(nu(e,s))}),Oa=null)})),Oa[t])return;const o=r=>{const s=r.target,a=e.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||tu.isChildOf(s,l))&&vS(a[i],t,r)}};Oa[t]=o,tu.bind(n,t,o)}else{const o=r=>{vS(e,t,r)};tu.bind(n,t,o),e.delegates[t]=o}},CS={...wg,bindPendingEventDelegates(){const e=this;le.each(e._pendingNativeEvents,t=>{yS(e,t)})},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?yS(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(nu(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(yt(e.delegates,(o,r)=>{e.dom.unbind(nu(e,r),r,o)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},DB=e=>Te(e)?{value:e.split(/[ ,]/),valid:!0}:Bn(e,Te)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},wS=(e,t)=>e+(vs(t.message)?"":`. ${t.message}`),xS=e=>e.valid,xg=(e,t,n="")=>{const o=t(e);return xn(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},PB=["design","readonly"],ES=(e,t,n,o)=>{const r=n[t.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}var a;r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((e,t)=>{const n=B(e.getBody());var o,r,s;s=t,ie(o=n,r="mce-content-readonly")&&!s?ee(o,r):s&&H(o,r),t?((o=>{o.readonly=!0,o.selection.controlSelection.hideResizeRect(),o._selectionOverrides.hideFakeCaret(),(r=>{k.from(r.selection.getNode()).each(s=>{s.removeAttribute("data-mce-selected")})})(o)})(e),e.hasEditableRoot()&&bS(n,!0)):((o,r)=>{o.readonly=!1,o.hasEditableRoot()&&bS(r,!0),((s,a)=>{yg(s,"StyleWithCSS",a),yg(s,"enableInlineTableEditing",a),yg(s,"enableObjectResizing",a)})(o,!1),Qb(o)&&o.focus(),(s=>{s.selection.setRng(s.selection.getRng())})(o),o.nodeChanged()})(e,n)})(e,s.editorReadOnly),t.set(o),(a=e).dispatch("SwitchMode",{mode:o})},Eg=le.each,Sg=le.explode,LB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},SS=le.makeMap("alt,ctrl,shift,meta,access"),MB=e=>{const t={},n=gt.os.isMacOS()||gt.os.isiOS();Eg(Sg(e.toLowerCase(),"+"),s=>{s in SS?t[s]=!0:/^[0-9]{2,}$/.test(s)?t.keyCode=parseInt(s,10):(t.charCode=s.charCodeAt(0),t.keyCode=LB[s]||s.toUpperCase().charCodeAt(0))});const o=[t.keyCode];let r;for(r in SS)t[r]?o.push(r):t[r]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class kS{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Eg(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return Eg(Sg(le.trim(t)),i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l}),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,o=t;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:le.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(t,n,o,r){const s=le.map(Sg(t,">"),MB);return s[s.length-1]=le.extend(s[s.length-1],{func:o,scope:r||this.editor}),le.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const IB=()=>{const e=(()=>{const t={},n={},o={},r={},s={},a={},i={},l={},c={},u=(f,p)=>(b,g)=>{f[b.toLowerCase()]={...g,type:p}};return{addButton:u(t,"button"),addGroupToolbarButton:u(t,"grouptoolbarbutton"),addToggleButton:u(t,"togglebutton"),addMenuButton:u(t,"menubutton"),addSplitButton:u(t,"splitbutton"),addMenuItem:u(n,"menuitem"),addNestedMenuItem:u(n,"nestedmenuitem"),addToggleMenuItem:u(n,"togglemenuitem"),addAutocompleter:u(o,"autocompleter"),addContextMenu:u(s,"contextmenu"),addContextToolbar:u(a,"contexttoolbar"),addContextForm:u(a,"contextform"),addSidebar:u(l,"sidebar"),addView:u(c,"views"),addIcon:(f,p)=>r[f.toLowerCase()]=p,addContext:(f,p)=>i[f.toLowerCase()]=p,getAll:()=>({buttons:t,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:l,views:c,contexts:i})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Ba=Bt.DOM,_S=le.extend,FB=le.each;class ou{constructor(t,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,_S(this,CS);const r=this;this.id=t,this.hidden=!1;const s=((b,g)=>{const v=DR(g);return((e,t,n,o,r)=>{var s;const a=e?{mobile:bB(null!==(s=r.mobile)&&void 0!==s?s:{},t)}:{},i=((e,t)=>{const n=(s=>{const i={},l={};return Sr(s,(c,u)=>Re(e,u),Er(i),Er(l)),{t:i,f:l}})(t);return r=n.f,{sections:me(n.t),options:me(r)};var r})(["mobile"],Mp(a,r)),l=le.extend(n,o,i.options(),e&&bg(i,"mobile")?((c,u,f={})=>{const p=c.sections(),b=Ot(p,u).getOr({});return le.extend({},f,b)})(i,"mobile"):{},{external_plugins:vB(o,i.options())});return((c,u,f,p)=>{const b=Zl(f.forced_plugins),g=Zl(p.plugins),v=bg(E=u,"mobile")?E.sections().mobile:{},h=((E,S,A,N)=>E&&bg(S,"mobile")?N:A)(c,u,g,v.plugins?Zl(v.plugins):g),y=((E,S)=>[...Zl(E),...Zl(S)])(b,h);var E;return le.extend(p,{forced_plugins:b,plugins:y})})(e,i,o,l)})(uS||gB,uS,v,b,v)})(o.defaultOptions,n);this.options=((b,g,v=g)=>{const h={},y={},E=(A,N,R)=>{const M=xg(N,R);return xS(M)?(y[A]=M.value,!0):(console.warn(wS(`Invalid value passed for the ${A} option`,M)),!1)},S=A=>je(h,A);return{register:(A,N)=>{const R=Te(N.processor)?(P=>{const z=(()=>{switch(P){case"array":return ae;case"boolean":return xn;case"function":return bt;case"number":return w;case"object":return Ve;case"string":return Te;case"string[]":return DB;case"object[]":return W=>Bn(W,Ve);case"regexp":return W=>Eo(W,RegExp);default:return Ut}})();return W=>xg(W,z,`The value must be a ${P}.`)})(N.processor):N.processor,M=((P,z,W)=>{if(!jt(z)){const D=xg(z,W);if(xS(D))return D.value;console.error(wS(`Invalid default value passed for the "${P}" option`,D))}})(A,N.default,R);h[A]={...N,default:M,processor:R},Ot(y,A).orThunk(()=>Ot(g,A)).each(P=>E(A,P,R))},isRegistered:S,get:A=>Ot(y,A).orThunk(()=>Ot(h,A).map(N=>N.default)).getOrUndefined(),set:(A,N)=>{if(S(A)){const R=h[A];return R.immutable?(console.error(`"${A}" is an immutable option and cannot be updated`),!1):E(A,N,R.processor)}return console.warn(`"${A}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:A=>{const N=S(A);return N&&delete y[A],N},isSet:A=>je(y,A),debug:()=>{try{console.log(JSON.parse(JSON.stringify(v,(A,N)=>xn(N)||w(N)||Te(N)||Ze(N)||ae(N)||Me(N)?N:Object.prototype.toString.call(N))))}catch(A){console.error(A)}}}})(0,s,n),(b=>{const g=b.options.register;g("id",{processor:"string",default:b.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:b.documentBaseUrl}),g("body_id",{processor:s0(b,"tinymce"),default:"tinymce"}),g("body_class",{processor:s0(b),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:v=>{const h=Te(v)&&So(v);return h?{value:v,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:v=>{const h=Re(["block","linebreak","invert","default"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:v=>xn(v)||Te(v)?{valid:!0,value:v}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:v=>{const h=!1===v||Te(v)||Bn(v,Te);return h?Te(v)?{value:nt(v.split(","),Gr),valid:h}:ae(v)?{value:v,valid:h}:!1===v?{value:[],valid:h}:{value:v,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:df(b)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:v=>{const h=Te(v)||Bn(v,Te);return h?{value:ae(v)?v:nt(v.split(","),Gr),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:v=>{const h=xn(v)||Te(v);return h?!1===v||af.isiPhone()||af.isiPad()?{value:"",valid:h}:{value:!0===v?"table,img,figure.image,div,video,iframe":v,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!Fk}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"string"}),g("service_message",{processor:"string"}),g("theme",{processor:v=>!1===v||Te(v)||bt(v),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:v=>{const h=!1===v||Te(v);return h?{value:!1===v?"":v,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:b.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:b.convertURL}),g("url_converter_scope",{processor:"object",default:b}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("allow_mathml_annotation_encodings",{processor:v=>{const h=Bn(v,Te);return h?{value:v,valid:h}:{valid:!1,message:"Must be an array of strings."}},default:[]}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:Dc}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:Dc}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:Dc}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:Dc}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:v=>Te(v)||!0===v}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("license_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:v=>Bn(v,Ve)||!1===v?{value:o0(!1===v?[]:v),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),g("text_patterns_lookup",{processor:v=>{return bt(v)?{value:(h=v,y=>{const E=h(y);return o0(E)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:v=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:v=>Bn(v,r0)?{value:v,valid:!0}:r0(v)?{value:[v],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!0}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:v=>{const h=Re(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:v=>{const h=Re(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("sandbox_iframes",{processor:"boolean",default:!0}),g("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),g("convert_unsafe_embeds",{processor:"boolean",default:!0}),b.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:fr.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:jk.getAttrib(b.getElement(),"placeholder")})})})(r);const a=this.options.get;var b,g;a("deprecation_warnings")&&(((v,h)=>{const y=(e=>{const t=e1(e,hT),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),Kr(t)})(v),E=(e=>t1(e,vT))(h),S=E.length>0,A=y.length>0,N="mobile"===h.theme;if(S||A||N){const R="\n- ",M=N?`\n\nThemes:${R}mobile`:"",P=S?`\n\nPlugins:${R}${E.join(R)}`:"",z=A?`\n\nOptions:${R}${y.join(R)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+M+P+z)}})(b=n,g=s),((v,h)=>{const y=(e=>e1(e,bT))(v),E=(e=>t1(e,JC.map(t=>t.name)))(h),S=E.length>0,A=y.length>0;if(S||A){const N="\n- ",R=S?`\n\nPlugins:${N}${E.map(ET).join(N)}`:"",M=A?`\n\nOptions:${N}${y.join(N)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+R+M)}})(b,g));const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=lf(r);c&&(ss.ScriptLoader._setReferrerPolicy(c),Bt.DOM.styleSheetLoader._setReferrerPolicy(c));const u=b0(r);ce(u)&&Bt.DOM.styleSheetLoader._setContentCssCors(u),Hn.languageLoad=a("language_load"),Hn.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new Zo(a0(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=df(r),this.hasVisual=A_(r),this.shortcuts=new kS(this),this.editorCommands=new hS(this),(e=>{var t;(e=>{(t=>{const n=o=>()=>{J("left,center,right,justify".split(","),r=>{o!==r&&t.formatter.remove("align"+r)}),"none"!==o&&(t.formatter.toggle("align"+o,void 0),t.nodeChanged())};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=o=>()=>{const r=t.selection,s=r.isCollapsed()?[t.dom.getParent(r.getNode(),t.dom.isBlock)]:r.getSelectedBlocks();return St(s,a=>ce(t.formatter.matchNode(a,o)))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)})(e),(t=e).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=t.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(gt.os.isMacOS()||gt.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:s,type:"error"})}}}),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;t.dom.getParent(t.selection.getNode(),a=>!_e(a)||s++!==r||(t.selection.select(a),!1),t.getBody())},mceSelectNode:(n,o,r)=>{t.selection.select(r)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),Yo);if(n){const o=t.dom.createRng();o.selectNodeContents(n),t.selection.setRng(o)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{eu(t,t.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{eu(t,t.dom.encode(r))},insertHTML:(n,o,r)=>{eu(t,r)},mceInsertContent:(n,o,r)=>{eu(t,r)},mceSetContent:(n,o,r)=>{t.setContent(r)},mceReplaceContent:(n,o,r)=>{t.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(j_(t))}})})(e),(t=>{const n=(o,r,s)=>{if(t.mode.isReadOnly())return;const a=Te(s)?{href:s}:s,i=t.dom.getParent(t.selection.getNode(),"a");Ve(a)&&Te(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,i))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const o=t.dom.getParent(t.selection.getStart(),"a");return void(o&&t.dom.remove(o,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),(t=>{t.editorCommands.addCommands({Indent:()=>{xw(t,"indent")},Outdent:()=>{Ew(t)}}),t.editorCommands.addCommands({Outdent:()=>yw(t)},"state")})(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{pS(t,!0)},InsertNewBlockAfter:()=>{pS(t,!1)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{$d(Mx,t)},mceInsertNewLine:(n,o,r)=>{qx(t,r)},InsertLineBreak:(n,o,r)=>{$d(jx,t)}})})(e),(t=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const c=mS(i,l);i.formatter.toggle("fontname",{value:NB(c)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:mS(i,a)}),i.nodeChanged()},LineHeight:(r,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(r,s,a)=>{var i;o(r,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(Te(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(t),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return vg(r=n,s=>kB(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return vg(r=n,s=>SB(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return vg(r=n,s=>{const a=B(r.getBody());return Sm(s,l=>te(l,"line-height"),xe(Fe,a)).getOrThunk(()=>{const l=parseFloat(L(s,"line-height")),c=parseFloat(L(s,"font-size"));return String(l/c)})}).getOr("");var r})})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??t.selection.getNode();if(s!==t.getBody()){const a=t.selection.getBookmark();t.dom.remove(s,!0),t.selection.moveToBookmark(a)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,o,r)=>{var s;(s=t).removed||(!0===r?Xf(s):(i=>{const l=i.selection,c=i.getBody();let u=l.getRng();i.quirks.refreshContentEditable();const f=b=>{$f(b).each(g=>{b.selection.setRng(g),u=g})};!di(i)&&i.hasEditableRoot()&&f(i);const p=(b=i,g=l.getNode(),b.dom.getParent(g,v=>"true"===b.dom.getContentEditable(v)));var b,g;if(p&&i.dom.isChildOf(p,c))return((b,g)=>null!==b.dom.getParent(g,v=>"false"===b.dom.getContentEditable(v)))(i,p)||ed(c),ed(p),i.hasEditableRoot()||f(i),Gb(i,u),void Xf(i);i.inline||(gt.browser.isOpera()||ed(c),i.getWin().focus()),(gt.browser.isFirefox()||i.inline)&&(ed(c),Gb(i,u)),Xf(i)})(s))},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)})(this);const f=a("cache_suffix");f&&(gt.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:IB(),styleSheetLoader:void 0,show:ke,hide:ke,setEnabled:ke,isEnabled:Ut},this.mode=(b=>{const g=pn("design"),v=pn({design:{activate:ke,deactivate:ke,editorReadOnly:!1},readonly:{activate:ke,deactivate:ke,editorReadOnly:!0}});return(h=b).on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",y=>{Ei(h)&&y.preventDefault()}),h.on("BeforeExecCommand",y=>{"Undo"!==y.command&&"Redo"!==y.command||!Ei(h)||y.preventDefault()}),h.on("input",y=>{if(!y.isComposing&&Ei(h)){const E=h.undoManager.add();ce(E)&&h.undoManager.undo()}}),h.on("compositionend",()=>{if(Ei(h)){const y=h.undoManager.add();ce(y)&&h.undoManager.undo()}}),{isReadOnly:()=>Ei(b),set:h=>((y,E,S,A)=>{if(A!==S.get()){if(!je(E,A))throw new Error(`Editor mode '${A}' is invalid`);y.initialized?ES(y,S,E,A):y.on("init",()=>ES(y,S,E,A))}})(b,v.get(),g,h),get:()=>g.get(),register:(h,y)=>{v.set(((E,S,A)=>{if(Re(PB,S))throw new Error(`Cannot override default mode ${S}`);return{...E,[S]:{...A,deactivate:()=>{try{A.deactivate()}catch(N){console.error(`problem while deactivating editor mode ${S}:`,N)}}}}})(v.get(),h,y))}};var h})(r),o.dispatch("SetupEditor",{editor:this});const p=R_(r);bt(p)&&p.call(r,r)}render(){(t=>{const n=t.id;fr.setCode(u0(t));const o=()=>{Ra.unbind(window,"ready",o),t.render()};if(!ca.Event.domLoaded)return void Ra.bind(window,"ready",o);if(!t.getElement())return;const r=B(t.getElement()),s=C(r);var l;t.on("remove",()=>{wr(r.dom.attributes,i=>m(r,i.name)),or(r,s)}),t.ui.styleSheetLoader=$g.forElement(r,{contentCssCors:b0(l=t),referrerPolicy:lf(l)}),df(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const a=t.getElement().form||Ra.getParent(n,"form");a&&(t.formElement=a,y_(t)&&!Cu(t.getElement())&&(Ra.insertAfter(Ra.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=i=>{t.dispatch(i.type,i)},Ra.bind(a,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!C_(t)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),a._mceOldSubmit(a)))),t.windowManager=s1(t),t.notificationManager=r1(t),"xml"===t.options.get("encoding")&&t.on("GetContent",i=>{i.save&&(i.content=Ra.encode(i.content))}),w_(t)&&t.on("submit",()=>{t.initialized&&t.save()}),x_(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),((e,t)=>{const n=ss.ScriptLoader,o=()=>{!e.removed&&(r=>{const s=ei(r);return!Te(s)||ce(Aa.get(s))})(e)&&(r=>{const s=cf(r);return ce(mi.get(s))})(e)&&mB(e)};((r,s)=>{const a=ei(r);if(Te(a)&&!lS(a)&&!je(Aa.urls,a)){const i=f_(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;Aa.load(a,l).catch(()=>{Pl(r,"ThemeLoadError",Ll("theme",l,a))})}})(e,t),((r,s)=>{const a=cf(r);if("plugin"!==a&&!je(mi.urls,a)){const i=m_(r),l=Te(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;mi.load(a,l).catch(()=>{Pl(r,"ModelLoadError",Ll("model",l,a))})}})(e,t),((r,s)=>{const a=u0(s),i=o_(s);if(!fr.hasCode(a)&&"en"!==a){const l=So(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch(()=>{Pl(s,"LanguageLoadError",Ll("language",l,a))})}})(n,e),((r,s,a)=>{const i=cS(s,"default",a),l=(c=s,k.from(Qk(c)).filter(So).map(u=>({url:u,name:k.none()}))).orThunk(()=>cS(s,d0(s),""));var c;J((c=>{const u=[],f=p=>{u.push(p)};for(let p=0;p<c.length;p++)c[p].each(f);return u})([i,l]),c=>{r.add(c.url).catch(()=>{var u,f,p;u=s,f=c.url,p=c.name.getOrUndefined(),Pl(u,"IconsLoadError",Ll("icons",f,p))})})})(n,e,t),((r,s)=>{const a=(i,l)=>{pi.load(i,l).catch(()=>{Pl(r,"PluginLoadError",Ll("plugin",l,i))})};yt(__(r),(i,l)=>{a(l,i),r.options.set("plugins",Pc(r).concat(l))}),J(Pc(r),i=>{!(i=le.trim(i))||pi.urls[i]||lS(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(e,t),n.loadQueue().then(o,o)})(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return di(this)}translate(t){return fr.translate(t)}getParam(t,n,o){const r=this.options;return r.isRegistered(t)||(ce(o)?r.register(t,{processor:o,default:n}):r.register(t,{processor:Ut,default:n})),r.isSet(t)||jt(n)?r.get(t):n}hasPlugin(t,n){return!(!Re(Pc(this),t)||n&&void 0===pi.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,o){this.editorCommands.addCommand(t,n,o)}addQueryStateHandler(t,n,o){this.editorCommands.addQueryStateHandler(t,n,o)}addQueryValueHandler(t,n,o){this.editorCommands.addQueryValueHandler(t,n,o)}addShortcut(t,n,o,r){this.shortcuts.add(t,n,o,r)}execCommand(t,n,o,r){return this.editorCommands.execCommand(t,n,o,r)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Ba.show(t.getContainer()),Ba.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Ba.hide(t.getContainer()),Ba.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...t,load:!0},s=Cu(o)?o.value:o.innerHTML,a=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),a}return""}save(t={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...t,save:!0,element:o};let s=n.getContent(r);const a={...r,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,Cu(o))o.value=s;else{!t.is_removing&&n.inline||(o.innerHTML=s);const i=Ba.getParent(n.id,"form");i&&FB(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=r.element=o=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(t,n){return tp(this,t,n)}getContent(t){return((n,o={})=>{const r=(s=o,a=o.format?o.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return DC(n,r).fold(pt,s=>{const a=(l=s,ep(n).editor.getContent(l));var l;return PC(n,a,s)})})(this,t)}insertContent(t,n){n&&(t=_S({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?tp(this,this.startContent,{format:"raw"}):tp(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Ba.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ba.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const o=this.getDoc();return null!==(n=null!==(t=this.bodyElement)&&void 0!==t?t:o?.body)&&void 0!==n?n:null}convertURL(t,n,o){const r=this,s=r.options.get,a=B_(r);if(bt(a))return a.call(r,t,o,!0,n);if(!s("convert_urls")||"link"===o||Ve(o)&&"LINK"===o.nodeName||0===t.indexOf("file:")||0===t.length)return t;const i=new Zo(t);return"http"!==i.protocol&&"https"!==i.protocol&&""!==i.protocol?t:s("relative_urls")?r.documentBaseURI.toRelative(t):t=r.documentBaseURI.toAbsolute(t,s("remove_script_host"))}addVisual(t){((n,o)=>{var s;s=o,on(this).editor.addVisual(s)})(0,t)}setEditableRoot(t){var n,o;(n=this)._editableRoot!==(o=t)&&(n._editableRoot=o,n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged(),n.dispatch("EditableRootStateChange",{state:o}))}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:o}=t,r=t.getBody(),s=t.getElement();r&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&ce(s?.nextSibling)&&yd.remove(s.nextSibling),t.dispatch("remove"),t.editorManager.remove(t),!t.inline&&r&&yd.setStyle((a=t).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(t),yd.remove(t.getContainer()),Cd(n),Cd(o),t.destroy()}var a})(this)}destroy(t){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Cd(r),Cd(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),yd.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Si=Bt.DOM,ru=le.each;let su,NS=!1,no=[];const au=e=>{const t=e.type;ru(js.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},AS=e=>{if(e!==NS){const t=Bt.DOM;e?(t.bind(window,"resize",au),t.bind(window,"scroll",au)):(t.unbind(window,"resize",au),t.unbind(window,"scroll",au)),NS=e}},TS=e=>{const t=no;return no=We(no,n=>e!==n),js.activeEditor===e&&(js.activeEditor=no.length>0?no[0]:null),js.focusedEditor===e&&(js.focusedEditor=null),t.length!==no.length},jB="CSS1Compat"!==document.compatMode,js={...wg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"5.0",releaseDate:"2024-11-06",i18n:fr,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",o=Zo.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}var s;e.baseURL=new Zo(o).toAbsolute(t),e.documentBaseURL=o,e.baseURI=new Zo(e.baseURL),e.suffix=n,(s=e).on("AddEditor",xe($N,s)),s.on("RemoveEditor",xe(WN,s))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const o=e.plugin_base_urls;void 0!==o&&yt(o,(r,s)=>{Hn.PluginManager.urls[s]=r})},init(e){const t=this;let n;const o=le.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var c;Si.unbind(window,"ready",s),(()=>{const u=e.onpageload;u&&u.apply(t,[])})(),l=xr((c=e,gt.browser.isIE()||gt.browser.isEdge()?(Ed("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):jB?(Ed("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Te(c.selector)?Si.select(c.selector):ce(c.target)?[c.target]:[])),le.each(l,c=>{var u;(u=t.get(c.id))&&u.initialized&&!(u.getContainer()||u.getBody()).parentNode&&(TS(u),u.unbindAllNativeEvents(),u.destroy(!0),u.removed=!0)}),l=le.grep(l,c=>!t.get(c.id)),0===l.length?r([]):ru(l,c=>{e.inline&&c.tagName.toLowerCase()in o?Ed("Could not initialize inline editor on invalid inline target element",c):((u,f,p)=>{const b=new ou(u,f,t);i.push(b),b.on("init",()=>{++a===l.length&&r(i)}),b.targetElm=b.targetElm||p,b.render()})((u=>{let f=u.id;return f||(f=Ot(u,"name").filter(p=>!Si.get(p)).getOrThunk(Si.uniqueId),u.setAttribute("id",f)),f})(c),e,c)})};return Si.bind(window,"ready",s),new Promise(a=>{n?a(n):r=i=>{a(i)}})},get(e){return 0===arguments.length?no.slice(0):Te(e)?Yt(no,t=>t.id===e).getOr(null):w(e)&&no[e]?no[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&no.push(e),AS(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),su||(su=o=>{const r=t.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",su))),e},createEditor(e,t){return this.add(new ou(e,t,this))},remove(e){const t=this;let n;if(e){if(!Te(e))return n=e,Ze(t.get(n.id))?null:(TS(n)&&t.dispatch("RemoveEditor",{editor:n}),0===no.length&&window.removeEventListener("beforeunload",su),n.remove(),AS(no.length>0),n);ru(Si.select(e),o=>{n=t.get(o.id),n&&t.remove(n)})}else for(let o=no.length-1;o>=0;o--)t.remove(no[o])},execCommand(e,t,n){var o;const r=this,s=Ve(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(e){case"mceAddEditor":return r.get(s)||new ou(s,n.options,r).render(),!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:()=>{ru(no,e=>{e.save()})},addI18n:(e,t)=>{fr.add(e,t)},translate:e=>fr.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Zo(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Zo(this.baseURL)}};js.setup();const zB=(()=>{const e=rs();return{FakeClipboardItem:t=>({items:t,types:rn(t),getType:n=>Ot(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),RS=Math.min,ki=Math.max,iu=Math.round,OS=(e,t,n)=>{let o=t.x,r=t.y;const s=e.w,a=e.h,i=t.w,l=t.h,c=(n||"").split("");return"b"===c[0]&&(r+=l),"r"===c[1]&&(o+=i),"c"===c[0]&&(r+=iu(l/2)),"c"===c[1]&&(o+=iu(i/2)),"b"===c[3]&&(r-=a),"r"===c[4]&&(o-=s),"c"===c[3]&&(r-=iu(a/2)),"c"===c[4]&&(o-=iu(s/2)),_i(o,r,s,a)},_i=(e,t,n,o)=>({x:e,y:t,w:n,h:o}),UB={inflate:(e,t,n)=>_i(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:OS,findBestRelativePosition:(e,t,n,o)=>{for(let r=0;r<o.length;r++){const s=OS(e,t,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(e,t)=>{const n=ki(e.x,t.x),o=ki(e.y,t.y),r=RS(e.x+e.w,t.x+t.w),s=RS(e.y+e.h,t.y+t.h);return r-n<0||s-o<0?null:_i(n,o,r-n,s-o)},clamp:(e,t,n)=>{let o=e.x,r=e.y,s=e.x+e.w,a=e.y+e.h;const i=t.x+t.w,l=t.y+t.h,c=ki(0,t.x-o),u=ki(0,t.y-r),f=ki(0,s-i),p=ki(0,a-l);return o+=c,r+=u,n&&(s+=c,a+=u,o-=f,r-=p),s-=f,a-=p,_i(o,r,s-o,a-r)},create:_i,fromClientRect:e=>_i(e.left,e.top,e.width,e.height)},HB=(()=>{const e={},t={},n={};return{load:(o,r)=>{const s=`Script at URL "${r}" failed to load`,a=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(void 0!==e[o])return e[o];{const i=new Promise((l,c)=>{const u=((f,p,b=1e3)=>{let g=!1,v=null;const h=S=>(...A)=>{g||(g=!0,null!==v&&(clearTimeout(v),v=null),S.apply(null,A))},y=h(f),E=h(p);return{start:(...S)=>{g||null!==v||(v=setTimeout(()=>E.apply(null,S),b))},resolve:y,reject:E}})(l,c);t[o]=u.resolve,ss.ScriptLoader.loadScript(r).then(()=>u.start(a),()=>u.reject(s))});return e[o]=i,i}},add:(o,r)=>{void 0!==t[o]&&(t[o](r),delete t[o]),e[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete e[o],delete n[o]}}})();let ec;try{const e="__storage_test__";ec=window.localStorage,ec.setItem(e,e),ec.removeItem(e)}catch{ec=(()=>{let t={},n=[];const o={getItem:r=>t[r]||null,setItem:(r,s)=>{n.push(r),t[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete t[r]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const qB={geom:{Rect:UB},util:{Delay:Lo,Tools:le,VK:ye,URI:Zo,EventDispatcher:Cg,Observable:wg,I18n:fr,LocalStorage:ec,ImageUploader:e=>{const t=l1(),n=d1(e,t);return{upload:(o,r=!0)=>n.upload(o,r?c1(e):void 0)}}},dom:{EventUtils:ca,TreeWalker:mn,TextSeeker:fa,DOMUtils:Bt,ScriptLoader:ss,RangeUtils:xa,Serializer:ZC,StyleSheetLoader:qg,ControlSelection:_b,BookmarkManager:vl,Selection:QC,Event:ca.Event},html:{Styles:Fu,Entities:la,Node:qn,Schema:_s,DomParser:fi,Writer:mv,Serializer:Ds},Env:gt,AddOnManager:Hn,Annotator:bb,Formatter:m1,UndoManager:g1,EditorCommands:hS,WindowManager:s1,NotificationManager:r1,EditorObservable:CS,Shortcuts:kS,Editor:ou,FocusManager:Yb,EditorManager:js,DOM:Bt.DOM,ScriptLoader:ss.ScriptLoader,PluginManager:pi,ThemeManager:Aa,ModelManager:mi,IconManager:wd,Resource:HB,FakeClipboard:zB,trim:le.trim,isArray:le.isArray,is:le.is,toArray:le.toArray,makeMap:le.makeMap,each:le.each,map:le.map,grep:le.grep,inArray:le.inArray,extend:le.extend,walk:le.walk,resolve:le.resolve,explode:le.explode,_addCacheSuffix:le._addCacheSuffix},BS=le.extend(js,qB);(e=>{window.tinymce=e,window.tinyMCE=e})(BS),(e=>{if("object"==typeof module)try{module.exports=e}catch{}})(BS)}(),function(be,Xe){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=be.document?Xe(be,!0):function(Ge){if(!Ge.document)throw new Error("jQuery requires a window with a document");return Xe(Ge)}:Xe(be)}(typeof window<"u"?window:this,function(be,Xe){"use strict";var Ge=[],$e=Object.getPrototypeOf,it=Ge.slice,Kt=Ge.flat?function(d){return Ge.flat.call(d)}:function(d){return Ge.concat.apply([],d)},Rn=Ge.push,Zt=Ge.indexOf,Vn={},xo=Vn.toString,On=Vn.hasOwnProperty,Eo=On.toString,Te=Eo.call(Object),Ve={},Me=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},ae=function(d){return null!=d&&d===d.window},Ze=be.document,xn={type:!0,src:!0,nonce:!0,noModule:!0};function jt(d,m,C){var x,_,T=(C=C||Ze).createElement("script");if(T.text=d,m)for(x in xn)(_=m[x]||m.getAttribute&&m.getAttribute(x))&&T.setAttribute(x,_);C.head.appendChild(T).parentNode.removeChild(T)}function wt(d){return null==d?d+"":"object"==typeof d||"function"==typeof d?Vn[xo.call(d)]||"object":typeof d}var bt=/HTML$/i,w=function(d,m){return new w.fn.init(d,m)};function Bn(d){var m=!!d&&"length"in d&&d.length,C=wt(d);return!Me(d)&&!ae(d)&&("array"===C||0===m||"number"==typeof m&&0<m&&m-1 in d)}function ke(d,m){return d.nodeName&&d.nodeName.toLowerCase()===m.toLowerCase()}w.fn=w.prototype={jquery:"3.7.1",constructor:w,length:0,toArray:function(){return it.call(this)},get:function(d){return null==d?it.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var m=w.merge(this.constructor(),d);return m.prevObject=this,m},each:function(d){return w.each(this,d)},map:function(d){return this.pushStack(w.map(this,function(m,C){return d.call(m,C,m)}))},slice:function(){return this.pushStack(it.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(d,m){return(m+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(d,m){return m%2}))},eq:function(d){var m=this.length,C=+d+(d<0?m:0);return this.pushStack(0<=C&&C<m?[this[C]]:[])},end:function(){return this.prevObject||this.constructor()},push:Rn,sort:Ge.sort,splice:Ge.splice},w.extend=w.fn.extend=function(){var d,m,C,x,_,T,O=arguments[0]||{},q=1,H=arguments.length,K=!1;for("boolean"==typeof O&&(K=O,O=arguments[q]||{},q++),"object"==typeof O||Me(O)||(O={}),q===H&&(O=this,q--);q<H;q++)if(null!=(d=arguments[q]))for(m in d)x=d[m],"__proto__"!==m&&O!==x&&(K&&x&&(w.isPlainObject(x)||(_=Array.isArray(x)))?(C=O[m],T=_&&!Array.isArray(C)?[]:_||w.isPlainObject(C)?C:{},_=!1,O[m]=w.extend(K,T,x)):void 0!==x&&(O[m]=x));return O},w.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var m,C;return!(!d||"[object Object]"!==xo.call(d)||(m=$e(d))&&("function"!=typeof(C=On.call(m,"constructor")&&m.constructor)||Eo.call(C)!==Te))},isEmptyObject:function(d){var m;for(m in d)return!1;return!0},globalEval:function(d,m,C){jt(d,{nonce:m&&m.nonce},C)},each:function(d,m){var C,x=0;if(Bn(d))for(C=d.length;x<C&&!1!==m.call(d[x],x,d[x]);x++);else for(x in d)if(!1===m.call(d[x],x,d[x]))break;return d},text:function(d){var m,C="",x=0,_=d.nodeType;if(!_)for(;m=d[x++];)C+=w.text(m);return 1===_||11===_?d.textContent:9===_?d.documentElement.textContent:3===_||4===_?d.nodeValue:C},makeArray:function(d,m){var C=m||[];return null!=d&&(Bn(Object(d))?w.merge(C,"string"==typeof d?[d]:d):Rn.call(C,d)),C},inArray:function(d,m,C){return null==m?-1:Zt.call(m,d,C)},isXMLDoc:function(d){var C=d&&(d.ownerDocument||d).documentElement;return!bt.test(d&&d.namespaceURI||C&&C.nodeName||"HTML")},merge:function(d,m){for(var C=+m.length,x=0,_=d.length;x<C;x++)d[_++]=m[x];return d.length=_,d},grep:function(d,m,C){for(var x=[],_=0,T=d.length,O=!C;_<T;_++)!m(d[_],_)!==O&&x.push(d[_]);return x},map:function(d,m,C){var x,_,T=0,O=[];if(Bn(d))for(x=d.length;T<x;T++)null!=(_=m(d[T],T,C))&&O.push(_);else for(T in d)null!=(_=m(d[T],T,C))&&O.push(_);return Kt(O)},guid:1,support:Ve}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=Ge[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,m){Vn["[object "+m+"]"]=m.toLowerCase()});var Dn=Ge.pop,Hs=Ge.sort,me=Ge.splice,pt="[\\x20\\t\\r\\n\\f]",Jo=new RegExp("^"+pt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+pt+"+$","g");w.contains=function(d,m){var C=m&&m.parentNode;return d===C||!(!C||1!==C.nodeType||!(d.contains?d.contains(C):d.compareDocumentPosition&&16&d.compareDocumentPosition(C)))};var xe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function vr(d,m){return m?"\0"===d?"\ufffd":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}w.escapeSelector=function(d){return(d+"").replace(xe,vr)};var po=Ze,yr=Rn;!function(){var d,m,C,x,_,T,O,q,H,K,ee=yr,ie=w.expando,Z=0,ue=0,Pe=zt(),lt=zt(),B=zt(),en=zt(),fn=function(L,V){return L===V&&(_=!0),0},sn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",No="(?:\\\\[\\da-fA-F]{1,6}"+pt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Fe="\\["+pt+"*("+No+")(?:"+pt+"*([*^$|!~]?=)"+pt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+No+"))|)"+pt+"*\\]",Sn=":("+No+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Fe+")*)|.*)\\)|)",kt=new RegExp(pt+"+","g"),It=new RegExp("^"+pt+"*,"+pt+"*"),sr=new RegExp("^"+pt+"*([>+~]|"+pt+")"+pt+"*"),so=new RegExp(pt+"|>"),ao=new RegExp(Sn),xs=new RegExp("^"+No+"$"),Mn={ID:new RegExp("^#("+No+")"),CLASS:new RegExp("^\\.("+No+")"),TAG:new RegExp("^("+No+"|[*])"),ATTR:new RegExp("^"+Fe),PSEUDO:new RegExp("^"+Sn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+pt+"*(even|odd|(([+-]|)(\\d*)n|)"+pt+"*(?:([+-]|)"+pt+"*(\\d+)|))"+pt+"*\\)|)","i"),bool:new RegExp("^(?:"+sn+")$","i"),needsContext:new RegExp("^"+pt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+pt+"*((?:-\\d)?\\d*)"+pt+"*\\)|)(?=[^-]|$)","i")},bo=/^(?:input|select|textarea|button)$/i,Jr=/^h\d$/i,io=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xt=/[+~]/,qt=new RegExp("\\\\[\\da-fA-F]{1,6}"+pt+"?|\\\\([^\\r\\n\\f])","g"),kn=function(L,V){var te="0x"+L.slice(1)-65536;return V||(te<0?String.fromCharCode(te+65536):String.fromCharCode(te>>10|55296,1023&te|56320))},Ko=function(){Qn()},_n=lr(function(L){return!0===L.disabled&&ke(L,"fieldset")},{dir:"parentNode",next:"legend"});try{ee.apply(Ge=it.call(po.childNodes),po.childNodes)}catch{ee={apply:function(V,te){yr.apply(V,it.call(te))},call:function(V){yr.apply(V,it.call(arguments,1))}}}function st(L,V,te,ne){var fe,Oe,Ie,Qe,Ee,At,ct,ft=V&&V.ownerDocument,Ye=V?V.nodeType:9;if(te=te||[],"string"!=typeof L||!L||1!==Ye&&9!==Ye&&11!==Ye)return te;if(!ne&&(Qn(V),V=V||T,q)){if(11!==Ye&&(Ee=io.exec(L)))if(fe=Ee[1]){if(9===Ye){if(!(Ie=V.getElementById(fe)))return te;if(Ie.id===fe)return ee.call(te,Ie),te}else if(ft&&(Ie=ft.getElementById(fe))&&st.contains(V,Ie)&&Ie.id===fe)return ee.call(te,Ie),te}else{if(Ee[2])return ee.apply(te,V.getElementsByTagName(L)),te;if((fe=Ee[3])&&V.getElementsByClassName)return ee.apply(te,V.getElementsByClassName(fe)),te}if(!(en[L+" "]||H&&H.test(L))){if(ct=L,ft=V,1===Ye&&(so.test(L)||sr.test(L))){for((ft=xt.test(L)&&To(V.parentNode)||V)==V&&Ve.scope||((Qe=V.getAttribute("id"))?Qe=w.escapeSelector(Qe):V.setAttribute("id",Qe=ie)),Oe=(At=ir(L)).length;Oe--;)At[Oe]=(Qe?"#"+Qe:":scope")+" "+es(At[Oe]);ct=At.join(",")}try{return ee.apply(te,ft.querySelectorAll(ct)),te}catch{en(L,!0)}finally{Qe===ie&&V.removeAttribute("id")}}}return na(L.replace(Jo,"$1"),V,te,ne)}function zt(){var L=[];return function V(te,ne){return L.push(te+" ")>m.cacheLength&&delete V[L.shift()],V[te+" "]=ne}}function Xt(L){return L[ie]=!0,L}function $t(L){var V=T.createElement("fieldset");try{return!!L(V)}catch{return!1}finally{V.parentNode&&V.parentNode.removeChild(V),V=null}}function Ao(L){return function(V){return ke(V,"input")&&V.type===L}}function Es(L){return function(V){return(ke(V,"input")||ke(V,"button"))&&V.type===L}}function ar(L){return function(V){return"form"in V?V.parentNode&&!1===V.disabled?"label"in V?"label"in V.parentNode?V.parentNode.disabled===L:V.disabled===L:V.isDisabled===L||V.isDisabled!==!L&&_n(V)===L:V.disabled===L:"label"in V&&V.disabled===L}}function Tr(L){return Xt(function(V){return V=+V,Xt(function(te,ne){for(var fe,Oe=L([],te.length,V),Ie=Oe.length;Ie--;)te[fe=Oe[Ie]]&&(te[fe]=!(ne[fe]=te[fe]))})})}function To(L){return L&&typeof L.getElementsByTagName<"u"&&L}function Qn(L){var V,te=L?L.ownerDocument||L:po;return te!=T&&9===te.nodeType&&te.documentElement&&(O=(T=te).documentElement,q=!w.isXMLDoc(T),K=O.matches||O.webkitMatchesSelector||O.msMatchesSelector,O.msMatchesSelector&&po!=T&&(V=T.defaultView)&&V.top!==V&&V.addEventListener("unload",Ko),Ve.getById=$t(function(ne){return O.appendChild(ne).id=w.expando,!T.getElementsByName||!T.getElementsByName(w.expando).length}),Ve.disconnectedMatch=$t(function(ne){return K.call(ne,"*")}),Ve.scope=$t(function(){return T.querySelectorAll(":scope")}),Ve.cssHas=$t(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Ve.getById?(m.filter.ID=function(ne){var fe=ne.replace(qt,kn);return function(Oe){return Oe.getAttribute("id")===fe}},m.find.ID=function(ne,fe){if(typeof fe.getElementById<"u"&&q){var Oe=fe.getElementById(ne);return Oe?[Oe]:[]}}):(m.filter.ID=function(ne){var fe=ne.replace(qt,kn);return function(Oe){var Ie=typeof Oe.getAttributeNode<"u"&&Oe.getAttributeNode("id");return Ie&&Ie.value===fe}},m.find.ID=function(ne,fe){if(typeof fe.getElementById<"u"&&q){var Oe,Ie,Qe,Ee=fe.getElementById(ne);if(Ee){if((Oe=Ee.getAttributeNode("id"))&&Oe.value===ne)return[Ee];for(Qe=fe.getElementsByName(ne),Ie=0;Ee=Qe[Ie++];)if((Oe=Ee.getAttributeNode("id"))&&Oe.value===ne)return[Ee]}return[]}}),m.find.TAG=function(ne,fe){return typeof fe.getElementsByTagName<"u"?fe.getElementsByTagName(ne):fe.querySelectorAll(ne)},m.find.CLASS=function(ne,fe){if(typeof fe.getElementsByClassName<"u"&&q)return fe.getElementsByClassName(ne)},H=[],$t(function(ne){var fe;O.appendChild(ne).innerHTML="<a id='"+ie+"' href='' disabled='disabled'></a><select id='"+ie+"-\r\\' disabled='disabled'><option selected=''></option></select>",ne.querySelectorAll("[selected]").length||H.push("\\["+pt+"*(?:value|"+sn+")"),ne.querySelectorAll("[id~="+ie+"-]").length||H.push("~="),ne.querySelectorAll("a#"+ie+"+*").length||H.push(".#.+[+~]"),ne.querySelectorAll(":checked").length||H.push(":checked"),(fe=T.createElement("input")).setAttribute("type","hidden"),ne.appendChild(fe).setAttribute("name","D"),O.appendChild(ne).disabled=!0,2!==ne.querySelectorAll(":disabled").length&&H.push(":enabled",":disabled"),(fe=T.createElement("input")).setAttribute("name",""),ne.appendChild(fe),ne.querySelectorAll("[name='']").length||H.push("\\["+pt+"*name"+pt+"*="+pt+"*(?:''|\"\")")}),Ve.cssHas||H.push(":has"),H=H.length&&new RegExp(H.join("|")),fn=function(ne,fe){if(ne===fe)return _=!0,0;var Oe=!ne.compareDocumentPosition-!fe.compareDocumentPosition;return Oe||(1&(Oe=(ne.ownerDocument||ne)==(fe.ownerDocument||fe)?ne.compareDocumentPosition(fe):1)||!Ve.sortDetached&&fe.compareDocumentPosition(ne)===Oe?ne===T||ne.ownerDocument==po&&st.contains(po,ne)?-1:fe===T||fe.ownerDocument==po&&st.contains(po,fe)?1:x?Zt.call(x,ne)-Zt.call(x,fe):0:4&Oe?-1:1)}),T}for(d in st.matches=function(L,V){return st(L,null,null,V)},st.matchesSelector=function(L,V){if(Qn(L),q&&!en[V+" "]&&(!H||!H.test(V)))try{var te=K.call(L,V);if(te||Ve.disconnectedMatch||L.document&&11!==L.document.nodeType)return te}catch{en(V,!0)}return 0<st(V,T,null,[L]).length},st.contains=function(L,V){return(L.ownerDocument||L)!=T&&Qn(L),w.contains(L,V)},st.attr=function(L,V){(L.ownerDocument||L)!=T&&Qn(L);var te=m.attrHandle[V.toLowerCase()],ne=te&&On.call(m.attrHandle,V.toLowerCase())?te(L,V,!q):void 0;return void 0!==ne?ne:L.getAttribute(V)},st.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},w.uniqueSort=function(L){var V,te=[],ne=0,fe=0;if(_=!Ve.sortStable,x=!Ve.sortStable&&it.call(L,0),Hs.call(L,fn),_){for(;V=L[fe++];)V===L[fe]&&(ne=te.push(fe));for(;ne--;)me.call(L,te[ne],1)}return x=null,L},w.fn.uniqueSort=function(){return this.pushStack(w.uniqueSort(it.apply(this)))},(m=w.expr={cacheLength:50,createPseudo:Xt,match:Mn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(qt,kn),L[3]=(L[3]||L[4]||L[5]||"").replace(qt,kn),"~="===L[2]&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),"nth"===L[1].slice(0,3)?(L[3]||st.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*("even"===L[3]||"odd"===L[3])),L[5]=+(L[7]+L[8]||"odd"===L[3])):L[3]&&st.error(L[0]),L},PSEUDO:function(L){var V,te=!L[6]&&L[2];return Mn.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":te&&ao.test(te)&&(V=ir(te,!0))&&(V=te.indexOf(")",te.length-V)-te.length)&&(L[0]=L[0].slice(0,V),L[2]=te.slice(0,V)),L.slice(0,3))}},filter:{TAG:function(L){var V=L.replace(qt,kn).toLowerCase();return"*"===L?function(){return!0}:function(te){return ke(te,V)}},CLASS:function(L){var V=Pe[L+" "];return V||(V=new RegExp("(^|"+pt+")"+L+"("+pt+"|$)"))&&Pe(L,function(te){return V.test("string"==typeof te.className&&te.className||typeof te.getAttribute<"u"&&te.getAttribute("class")||"")})},ATTR:function(L,V,te){return function(ne){var fe=st.attr(ne,L);return null==fe?"!="===V:!V||(fe+="","="===V?fe===te:"!="===V?fe!==te:"^="===V?te&&0===fe.indexOf(te):"*="===V?te&&-1<fe.indexOf(te):"$="===V?te&&fe.slice(-te.length)===te:"~="===V?-1<(" "+fe.replace(kt," ")+" ").indexOf(te):"|="===V&&(fe===te||fe.slice(0,te.length+1)===te+"-"))}},CHILD:function(L,V,te,ne,fe){var Oe="nth"!==L.slice(0,3),Ie="last"!==L.slice(-4),Qe="of-type"===V;return 1===ne&&0===fe?function(Ee){return!!Ee.parentNode}:function(Ee,At,ct){var ft,Ye,at,tn,Nn,nn=Oe!==Ie?"nextSibling":"previousSibling",Zn=Ee.parentNode,lo=Qe&&Ee.nodeName.toLowerCase(),vo=!ct&&!Qe,Dt=!1;if(Zn){if(Oe){for(;nn;){for(at=Ee;at=at[nn];)if(Qe?ke(at,lo):1===at.nodeType)return!1;Nn=nn="only"===L&&!Nn&&"nextSibling"}return!0}if(Nn=[Ie?Zn.firstChild:Zn.lastChild],Ie&&vo){for(Dt=(tn=(ft=(Ye=Zn[ie]||(Zn[ie]={}))[L]||[])[0]===Z&&ft[1])&&ft[2],at=tn&&Zn.childNodes[tn];at=++tn&&at&&at[nn]||(Dt=tn=0)||Nn.pop();)if(1===at.nodeType&&++Dt&&at===Ee){Ye[L]=[Z,tn,Dt];break}}else if(vo&&(Dt=tn=(ft=(Ye=Ee[ie]||(Ee[ie]={}))[L]||[])[0]===Z&&ft[1]),!1===Dt)for(;(at=++tn&&at&&at[nn]||(Dt=tn=0)||Nn.pop())&&(!(Qe?ke(at,lo):1===at.nodeType)||!++Dt||(vo&&((Ye=at[ie]||(at[ie]={}))[L]=[Z,Dt]),at!==Ee)););return(Dt-=fe)===ne||Dt%ne==0&&0<=Dt/ne}}},PSEUDO:function(L,V){var te,ne=m.pseudos[L]||m.setFilters[L.toLowerCase()]||st.error("unsupported pseudo: "+L);return ne[ie]?ne(V):1<ne.length?(te=[L,L,"",V],m.setFilters.hasOwnProperty(L.toLowerCase())?Xt(function(fe,Oe){for(var Ie,Qe=ne(fe,V),Ee=Qe.length;Ee--;)fe[Ie=Zt.call(fe,Qe[Ee])]=!(Oe[Ie]=Qe[Ee])}):function(fe){return ne(fe,0,te)}):ne}},pseudos:{not:Xt(function(L){var V=[],te=[],ne=$a(L.replace(Jo,"$1"));return ne[ie]?Xt(function(fe,Oe,Ie,Qe){for(var Ee,At=ne(fe,null,Qe,[]),ct=fe.length;ct--;)(Ee=At[ct])&&(fe[ct]=!(Oe[ct]=Ee))}):function(fe,Oe,Ie){return V[0]=fe,ne(V,null,Ie,te),V[0]=null,!te.pop()}}),has:Xt(function(L){return function(V){return 0<st(L,V).length}}),contains:Xt(function(L){return L=L.replace(qt,kn),function(V){return-1<(V.textContent||w.text(V)).indexOf(L)}}),lang:Xt(function(L){return xs.test(L||"")||st.error("unsupported lang: "+L),L=L.replace(qt,kn).toLowerCase(),function(V){var te;do{if(te=q?V.lang:V.getAttribute("xml:lang")||V.getAttribute("lang"))return(te=te.toLowerCase())===L||0===te.indexOf(L+"-")}while((V=V.parentNode)&&1===V.nodeType);return!1}}),target:function(L){var V=be.location&&be.location.hash;return V&&V.slice(1)===L.id},root:function(L){return L===O},focus:function(L){return L===function(){try{return T.activeElement}catch{}}()&&T.hasFocus()&&!!(L.type||L.href||~L.tabIndex)},enabled:ar(!1),disabled:ar(!0),checked:function(L){return ke(L,"input")&&!!L.checked||ke(L,"option")&&!!L.selected},selected:function(L){return!0===L.selected},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!m.pseudos.empty(L)},header:function(L){return Jr.test(L.nodeName)},input:function(L){return bo.test(L.nodeName)},button:function(L){return ke(L,"input")&&"button"===L.type||ke(L,"button")},text:function(L){var V;return ke(L,"input")&&"text"===L.type&&(null==(V=L.getAttribute("type"))||"text"===V.toLowerCase())},first:Tr(function(){return[0]}),last:Tr(function(L,V){return[V-1]}),eq:Tr(function(L,V,te){return[te<0?te+V:te]}),even:Tr(function(L,V){for(var te=0;te<V;te+=2)L.push(te);return L}),odd:Tr(function(L,V){for(var te=1;te<V;te+=2)L.push(te);return L}),lt:Tr(function(L,V,te){var ne;for(ne=te<0?te+V:V<te?V:te;0<=--ne;)L.push(ne);return L}),gt:Tr(function(L,V,te){for(var ne=te<0?te+V:te;++ne<V;)L.push(ne);return L})}}).pseudos.nth=m.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})m.pseudos[d]=Ao(d);for(d in{submit:!0,reset:!0})m.pseudos[d]=Es(d);function Ua(){}function ir(L,V){var te,ne,fe,Oe,Ie,Qe,Ee,At=lt[L+" "];if(At)return V?0:At.slice(0);for(Ie=L,Qe=[],Ee=m.preFilter;Ie;){for(Oe in te&&!(ne=It.exec(Ie))||(ne&&(Ie=Ie.slice(ne[0].length)||Ie),Qe.push(fe=[])),te=!1,(ne=sr.exec(Ie))&&(te=ne.shift(),fe.push({value:te,type:ne[0].replace(Jo," ")}),Ie=Ie.slice(te.length)),m.filter)!(ne=Mn[Oe].exec(Ie))||Ee[Oe]&&!(ne=Ee[Oe](ne))||(te=ne.shift(),fe.push({value:te,type:Oe,matches:ne}),Ie=Ie.slice(te.length));if(!te)break}return V?Ie.length:Ie?st.error(L):lt(L,Qe).slice(0)}function es(L){for(var V=0,te=L.length,ne="";V<te;V++)ne+=L[V].value;return ne}function lr(L,V,te){var ne=V.dir,fe=V.next,Oe=fe||ne,Ie=te&&"parentNode"===Oe,Qe=ue++;return V.first?function(Ee,At,ct){for(;Ee=Ee[ne];)if(1===Ee.nodeType||Ie)return L(Ee,At,ct);return!1}:function(Ee,At,ct){var ft,Ye,at=[Z,Qe];if(ct){for(;Ee=Ee[ne];)if((1===Ee.nodeType||Ie)&&L(Ee,At,ct))return!0}else for(;Ee=Ee[ne];)if(1===Ee.nodeType||Ie)if(Ye=Ee[ie]||(Ee[ie]={}),fe&&ke(Ee,fe))Ee=Ee[ne]||Ee;else{if((ft=Ye[Oe])&&ft[0]===Z&&ft[1]===Qe)return at[2]=ft[2];if((Ye[Oe]=at)[2]=L(Ee,At,ct))return!0}return!1}}function cr(L){return 1<L.length?function(V,te,ne){for(var fe=L.length;fe--;)if(!L[fe](V,te,ne))return!1;return!0}:L[0]}function Ha(L,V,te,ne,fe){for(var Oe,Ie=[],Qe=0,Ee=L.length,At=null!=V;Qe<Ee;Qe++)(Oe=L[Qe])&&(te&&!te(Oe,ne,fe)||(Ie.push(Oe),At&&V.push(Qe)));return Ie}function ts(L,V,te,ne,fe,Oe){return ne&&!ne[ie]&&(ne=ts(ne)),fe&&!fe[ie]&&(fe=ts(fe,Oe)),Xt(function(Ie,Qe,Ee,At){var ct,ft,Ye,at,tn=[],Nn=[],nn=Qe.length,Zn=Ie||function(vo,Dt,Xo){for(var co=0,Ss=Dt.length;co<Ss;co++)st(vo,Dt[co],Xo);return Xo}(V||"*",Ee.nodeType?[Ee]:Ee,[]),lo=!L||!Ie&&V?Zn:Ha(Zn,tn,L,Ee,At);if(te?te(lo,at=fe||(Ie?L:nn||ne)?[]:Qe,Ee,At):at=lo,ne)for(ct=Ha(at,Nn),ne(ct,[],Ee,At),ft=ct.length;ft--;)(Ye=ct[ft])&&(at[Nn[ft]]=!(lo[Nn[ft]]=Ye));if(Ie){if(fe||L){if(fe){for(ct=[],ft=at.length;ft--;)(Ye=at[ft])&&ct.push(lo[ft]=Ye);fe(null,at=[],ct,At)}for(ft=at.length;ft--;)(Ye=at[ft])&&-1<(ct=fe?Zt.call(Ie,Ye):tn[ft])&&(Ie[ct]=!(Qe[ct]=Ye))}}else at=Ha(at===Qe?at.splice(nn,at.length):at),fe?fe(null,Qe,at,At):ee.apply(Qe,at)})}function qa(L){for(var V,te,ne,fe=L.length,Oe=m.relative[L[0].type],Ie=Oe||m.relative[" "],Qe=Oe?1:0,Ee=lr(function(ft){return ft===V},Ie,!0),At=lr(function(ft){return-1<Zt.call(V,ft)},Ie,!0),ct=[function(ft,Ye,at){var tn=!Oe&&(at||Ye!=C)||((V=Ye).nodeType?Ee(ft,Ye,at):At(ft,Ye,at));return V=null,tn}];Qe<fe;Qe++)if(te=m.relative[L[Qe].type])ct=[lr(cr(ct),te)];else{if((te=m.filter[L[Qe].type].apply(null,L[Qe].matches))[ie]){for(ne=++Qe;ne<fe&&!m.relative[L[ne].type];ne++);return ts(1<Qe&&cr(ct),1<Qe&&es(L.slice(0,Qe-1).concat({value:" "===L[Qe-2].type?"*":""})).replace(Jo,"$1"),te,Qe<ne&&qa(L.slice(Qe,ne)),ne<fe&&qa(L=L.slice(ne)),ne<fe&&es(L))}ct.push(te)}return cr(ct)}function $a(L,V){var te,ne,fe,Oe,Ie,Qe,Ee=[],At=[],ct=B[L+" "];if(!ct){for(V||(V=ir(L)),te=V.length;te--;)(ct=qa(V[te]))[ie]?Ee.push(ct):At.push(ct);(ct=B(L,(ne=At,Oe=0<(fe=Ee).length,Ie=0<ne.length,Qe=function(ft,Ye,at,tn,Nn){var nn,Zn,lo,vo=0,Dt="0",Xo=ft&&[],co=[],Ss=C,zi=ft||Ie&&m.find.TAG("*",Nn),Ui=Z+=null==Ss?1:Math.random()||.1,gc=zi.length;for(Nn&&(C=Ye==T||Ye||Nn);Dt!==gc&&null!=(nn=zi[Dt]);Dt++){if(Ie&&nn){for(Zn=0,Ye||nn.ownerDocument==T||(Qn(nn),at=!q);lo=ne[Zn++];)if(lo(nn,Ye||T,at)){ee.call(tn,nn);break}Nn&&(Z=Ui)}Oe&&((nn=!lo&&nn)&&vo--,ft&&Xo.push(nn))}if(vo+=Dt,Oe&&Dt!==vo){for(Zn=0;lo=fe[Zn++];)lo(Xo,co,Ye,at);if(ft){if(0<vo)for(;Dt--;)Xo[Dt]||co[Dt]||(co[Dt]=Dn.call(tn));co=Ha(co)}ee.apply(tn,co),Nn&&!ft&&0<co.length&&1<vo+fe.length&&w.uniqueSort(tn)}return Nn&&(Z=Ui,C=Ss),Xo},Oe?Xt(Qe):Qe))).selector=L}return ct}function na(L,V,te,ne){var fe,Oe,Ie,Qe,Ee,At="function"==typeof L&&L,ct=!ne&&ir(L=At.selector||L);if(te=te||[],1===ct.length){if(2<(Oe=ct[0]=ct[0].slice(0)).length&&"ID"===(Ie=Oe[0]).type&&9===V.nodeType&&q&&m.relative[Oe[1].type]){if(!(V=(m.find.ID(Ie.matches[0].replace(qt,kn),V)||[])[0]))return te;At&&(V=V.parentNode),L=L.slice(Oe.shift().value.length)}for(fe=Mn.needsContext.test(L)?0:Oe.length;fe--&&!m.relative[Qe=(Ie=Oe[fe]).type];)if((Ee=m.find[Qe])&&(ne=Ee(Ie.matches[0].replace(qt,kn),xt.test(Oe[0].type)&&To(V.parentNode)||V))){if(Oe.splice(fe,1),!(L=ne.length&&es(Oe)))return ee.apply(te,ne),te;break}}return(At||$a(L,ct))(ne,V,!q,te,!V||xt.test(L)&&To(V.parentNode)||V),te}Ua.prototype=m.filters=m.pseudos,m.setFilters=new Ua,Ve.sortStable=ie.split("").sort(fn).join("")===ie,Qn(),Ve.sortDetached=$t(function(L){return 1&L.compareDocumentPosition(T.createElement("fieldset"))}),w.find=st,w.expr[":"]=w.expr.pseudos,w.unique=w.uniqueSort,st.compile=$a,st.select=na,st.setDocument=Qn,st.tokenize=ir,st.escape=w.escapeSelector,st.getText=w.text,st.isXML=w.isXMLDoc,st.selectors=w.expr,st.support=w.support,st.uniqueSort=w.uniqueSort}();var Kn=function(d,m,C){for(var x=[],_=void 0!==C;(d=d[m])&&9!==d.nodeType;)if(1===d.nodeType){if(_&&w(d).is(C))break;x.push(d)}return x},vt=function(d,m){for(var C=[];d;d=d.nextSibling)1===d.nodeType&&d!==m&&C.push(d);return C},Ut=w.expr.match.needsContext,k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Cr(d,m,C){return Me(m)?w.grep(d,function(x,_){return!!m.call(x,_,x)!==C}):m.nodeType?w.grep(d,function(x){return x===m!==C}):"string"!=typeof m?w.grep(d,function(x){return-1<Zt.call(m,x)!==C}):w.filter(m,d,C)}w.filter=function(d,m,C){var x=m[0];return C&&(d=":not("+d+")"),1===m.length&&1===x.nodeType?w.find.matchesSelector(x,d)?[x]:[]:w.find.matches(d,w.grep(m,function(_){return 1===_.nodeType}))},w.fn.extend({find:function(d){var m,C,x=this.length,_=this;if("string"!=typeof d)return this.pushStack(w(d).filter(function(){for(m=0;m<x;m++)if(w.contains(_[m],this))return!0}));for(C=this.pushStack([]),m=0;m<x;m++)w.find(d,_[m],C);return 1<x?w.uniqueSort(C):C},filter:function(d){return this.pushStack(Cr(this,d||[],!1))},not:function(d){return this.pushStack(Cr(this,d||[],!0))},is:function(d){return!!Cr(this,"string"==typeof d&&Ut.test(d)?w(d):d||[],!1).length}});var Ne,rt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(d,m,C){var x,_;if(!d)return this;if(C=C||Ne,"string"==typeof d){if(!(x="<"===d[0]&&">"===d[d.length-1]&&3<=d.length?[null,d,null]:rt.exec(d))||!x[1]&&m)return!m||m.jquery?(m||C).find(d):this.constructor(m).find(d);if(x[1]){if(w.merge(this,w.parseHTML(x[1],(m=m instanceof w?m[0]:m)&&m.nodeType?m.ownerDocument||m:Ze,!0)),k.test(x[1])&&w.isPlainObject(m))for(x in m)Me(this[x])?this[x](m[x]):this.attr(x,m[x]);return this}return(_=Ze.getElementById(x[2]))&&(this[0]=_,this.length=1),this}return d.nodeType?(this[0]=d,this.length=1,this):Me(d)?void 0!==C.ready?C.ready(d):d(w):w.makeArray(d,this)}).prototype=w.fn,Ne=w(Ze);var ut=/^(?:parents|prev(?:Until|All))/,Re={children:!0,contents:!0,next:!0,prev:!0};function St(d,m){for(;(d=d[m])&&1!==d.nodeType;);return d}w.fn.extend({has:function(d){var m=w(d,this),C=m.length;return this.filter(function(){for(var x=0;x<C;x++)if(w.contains(this,m[x]))return!0})},closest:function(d,m){var C,x=0,_=this.length,T=[],O="string"!=typeof d&&w(d);if(!Ut.test(d))for(;x<_;x++)for(C=this[x];C&&C!==m;C=C.parentNode)if(C.nodeType<11&&(O?-1<O.index(C):1===C.nodeType&&w.find.matchesSelector(C,d))){T.push(C);break}return this.pushStack(1<T.length?w.uniqueSort(T):T)},index:function(d){return d?"string"==typeof d?Zt.call(w(d),this[0]):Zt.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,m){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(d,m))))},addBack:function(d){return this.add(null==d?this.prevObject:this.prevObject.filter(d))}}),w.each({parent:function(d){var m=d.parentNode;return m&&11!==m.nodeType?m:null},parents:function(d){return Kn(d,"parentNode")},parentsUntil:function(d,m,C){return Kn(d,"parentNode",C)},next:function(d){return St(d,"nextSibling")},prev:function(d){return St(d,"previousSibling")},nextAll:function(d){return Kn(d,"nextSibling")},prevAll:function(d){return Kn(d,"previousSibling")},nextUntil:function(d,m,C){return Kn(d,"nextSibling",C)},prevUntil:function(d,m,C){return Kn(d,"previousSibling",C)},siblings:function(d){return vt((d.parentNode||{}).firstChild,d)},children:function(d){return vt(d.firstChild)},contents:function(d){return null!=d.contentDocument&&$e(d.contentDocument)?d.contentDocument:(ke(d,"template")&&(d=d.content||d),w.merge([],d.childNodes))}},function(d,m){w.fn[d]=function(C,x){var _=w.map(this,m,C);return"Until"!==d.slice(-5)&&(x=C),x&&"string"==typeof x&&(_=w.filter(x,_)),1<this.length&&(Re[d]||w.uniqueSort(_),ut.test(d)&&_.reverse()),this.pushStack(_)}});var nt=/[^\x20\t\r\n\f]+/g;function J(d){return d}function wr(d){throw d}function qo(d,m,C,x){var _;try{d&&Me(_=d.promise)?_.call(d).done(m).fail(C):d&&Me(_=d.then)?_.call(d,m,C):m.apply(void 0,[d].slice(x))}catch(T){C.apply(void 0,[T])}}w.Callbacks=function(d){var C;d="string"==typeof d?(C={},w.each(d.match(nt)||[],function(Z,ue){C[ue]=!0}),C):w.extend({},d);var x,_,T,O,q=[],H=[],K=-1,ee=function(){for(O=O||d.once,T=x=!0;H.length;K=-1)for(_=H.shift();++K<q.length;)!1===q[K].apply(_[0],_[1])&&d.stopOnFalse&&(K=q.length,_=!1);d.memory||(_=!1),x=!1,O&&(q=_?[]:"")},ie={add:function(){return q&&(_&&!x&&(K=q.length-1,H.push(_)),function Z(ue){w.each(ue,function(Pe,lt){Me(lt)?d.unique&&ie.has(lt)||q.push(lt):lt&&lt.length&&"string"!==wt(lt)&&Z(lt)})}(arguments),_&&!x&&ee()),this},remove:function(){return w.each(arguments,function(Z,ue){for(var Pe;-1<(Pe=w.inArray(ue,q,Pe));)q.splice(Pe,1),Pe<=K&&K--}),this},has:function(Z){return Z?-1<w.inArray(Z,q):0<q.length},empty:function(){return q&&(q=[]),this},disable:function(){return O=H=[],q=_="",this},disabled:function(){return!q},lock:function(){return O=H=[],_||x||(q=_=""),this},locked:function(){return!!O},fireWith:function(Z,ue){return O||(ue=[Z,(ue=ue||[]).slice?ue.slice():ue],H.push(ue),x||ee()),this},fire:function(){return ie.fireWith(this,arguments),this},fired:function(){return!!T}};return ie},w.extend({Deferred:function(d){var m=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],C="pending",x={state:function(){return C},always:function(){return _.done(arguments).fail(arguments),this},catch:function(T){return x.then(null,T)},pipe:function(){var T=arguments;return w.Deferred(function(O){w.each(m,function(q,H){var K=Me(T[H[4]])&&T[H[4]];_[H[1]](function(){var ee=K&&K.apply(this,arguments);ee&&Me(ee.promise)?ee.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[H[0]+"With"](this,K?[ee]:arguments)})}),T=null}).promise()},then:function(T,O,q){var H=0;function K(ee,ie,Z,ue){return function(){var Pe=this,lt=arguments,B=function(){var fn,sn;if(!(ee<H)){if((fn=Z.apply(Pe,lt))===ie.promise())throw new TypeError("Thenable self-resolution");Me(sn=fn&&("object"==typeof fn||"function"==typeof fn)&&fn.then)?ue?sn.call(fn,K(H,ie,J,ue),K(H,ie,wr,ue)):(H++,sn.call(fn,K(H,ie,J,ue),K(H,ie,wr,ue),K(H,ie,J,ie.notifyWith))):(Z!==J&&(Pe=void 0,lt=[fn]),(ue||ie.resolveWith)(Pe,lt))}},en=ue?B:function(){try{B()}catch(fn){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(fn,en.error),H<=ee+1&&(Z!==wr&&(Pe=void 0,lt=[fn]),ie.rejectWith(Pe,lt))}};ee?en():(w.Deferred.getErrorHook?en.error=w.Deferred.getErrorHook():w.Deferred.getStackHook&&(en.error=w.Deferred.getStackHook()),be.setTimeout(en))}}return w.Deferred(function(ee){m[0][3].add(K(0,ee,Me(q)?q:J,ee.notifyWith)),m[1][3].add(K(0,ee,Me(T)?T:J)),m[2][3].add(K(0,ee,Me(O)?O:wr))}).promise()},promise:function(T){return null!=T?w.extend(T,x):x}},_={};return w.each(m,function(T,O){var q=O[2],H=O[5];x[O[1]]=q.add,H&&q.add(function(){C=H},m[3-T][2].disable,m[3-T][3].disable,m[0][2].lock,m[0][3].lock),q.add(O[3].fire),_[O[0]]=function(){return _[O[0]+"With"](this===_?void 0:this,arguments),this},_[O[0]+"With"]=q.fireWith}),x.promise(_),d&&d.call(_,_),_},when:function(d){var m=arguments.length,C=m,x=Array(C),_=it.call(arguments),T=w.Deferred(),O=function(q){return function(H){x[q]=this,_[q]=1<arguments.length?it.call(arguments):H,--m||T.resolveWith(x,_)}};if(m<=1&&(qo(d,T.done(O(C)).resolve,T.reject,!m),"pending"===T.state()||Me(_[C]&&_[C].then)))return T.then();for(;C--;)qo(_[C],O(C),T.reject);return T.promise()}});var We=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(d,m){be.console&&be.console.warn&&d&&We.test(d.name)&&be.console.warn("jQuery.Deferred exception: "+d.message,d.stack,m)},w.readyException=function(d){be.setTimeout(function(){throw d})};var Vr=w.Deferred();function bn(){Ze.removeEventListener("DOMContentLoaded",bn),be.removeEventListener("load",bn),w.ready()}w.fn.ready=function(d){return Vr.then(d).catch(function(m){w.readyException(m)}),this},w.extend({isReady:!1,readyWait:1,ready:function(d){(!0===d?--w.readyWait:w.isReady)||(w.isReady=!0)!==d&&0<--w.readyWait||Vr.resolveWith(Ze,[w])}}),w.ready.then=Vr.then,"complete"===Ze.readyState||"loading"!==Ze.readyState&&!Ze.documentElement.doScroll?be.setTimeout(w.ready):(Ze.addEventListener("DOMContentLoaded",bn),be.addEventListener("load",bn));var $o=function(d,m,C,x,_,T,O){var q=0,H=d.length,K=null==C;if("object"===wt(C))for(q in _=!0,C)$o(d,m,q,C[q],!0,T,O);else if(void 0!==x&&(_=!0,Me(x)||(O=!0),K&&(O?(m.call(d,x),m=null):(K=m,m=function(ee,ie,Z){return K.call(w(ee),Z)})),m))for(;q<H;q++)m(d[q],C,O?x:x.call(d[q],q,m(d[q],C)));return _?d:K?m.call(d):H?m(d[0],C):T},Yt=/^-ms-/,qs=/-([a-z])/g;function nc(d,m){return m.toUpperCase()}function Gt(d){return d.replace(Yt,"ms-").replace(qs,nc)}var ro=function(d){return 1===d.nodeType||9===d.nodeType||!+d.nodeType};function er(){this.expando=w.expando+er.uid++}er.uid=1,er.prototype={cache:function(d){var m=d[this.expando];return m||(m={},ro(d)&&(d.nodeType?d[this.expando]=m:Object.defineProperty(d,this.expando,{value:m,configurable:!0}))),m},set:function(d,m,C){var x,_=this.cache(d);if("string"==typeof m)_[Gt(m)]=C;else for(x in m)_[Gt(x)]=m[x];return _},get:function(d,m){return void 0===m?this.cache(d):d[this.expando]&&d[this.expando][Gt(m)]},access:function(d,m,C){return void 0===m||m&&"string"==typeof m&&void 0===C?this.get(d,m):(this.set(d,m,C),void 0!==C?C:m)},remove:function(d,m){var C,x=d[this.expando];if(void 0!==x){if(void 0!==m)for((C=(m=Array.isArray(m)?m.map(Gt):(m=Gt(m))in x?[m]:m.match(nt)||[]).length);C--;)delete x[m[C]];(void 0===m||w.isEmptyObject(x))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var m=d[this.expando];return void 0!==m&&!w.isEmptyObject(m)}};var et=new er,Pn=new er,Kr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$s=/[A-Z]/g;function En(d,m,C){var x,_;if(void 0===C&&1===d.nodeType)if(x="data-"+m.replace($s,"-$&").toLowerCase(),"string"==typeof(C=d.getAttribute(x))){try{C="true"===(_=C)||"false"!==_&&("null"===_?null:_===+_+""?+_:Kr.test(_)?JSON.parse(_):_)}catch{}Pn.set(d,m,C)}else C=void 0;return C}w.extend({hasData:function(d){return Pn.hasData(d)||et.hasData(d)},data:function(d,m,C){return Pn.access(d,m,C)},removeData:function(d,m){Pn.remove(d,m)},_data:function(d,m,C){return et.access(d,m,C)},_removeData:function(d,m){et.remove(d,m)}}),w.fn.extend({data:function(d,m){var C,x,_,T=this[0],O=T&&T.attributes;if(void 0===d){if(this.length&&(_=Pn.get(T),1===T.nodeType&&!et.get(T,"hasDataAttrs"))){for(C=O.length;C--;)O[C]&&0===(x=O[C].name).indexOf("data-")&&(x=Gt(x.slice(5)),En(T,x,_[x]));et.set(T,"hasDataAttrs",!0)}return _}return"object"==typeof d?this.each(function(){Pn.set(this,d)}):$o(this,function(q){var H;if(T&&void 0===q)return void 0!==(H=Pn.get(T,d))||void 0!==(H=En(T,d))?H:void 0;this.each(function(){Pn.set(this,d,q)})},null,m,1<arguments.length,null,!0)},removeData:function(d){return this.each(function(){Pn.remove(this,d)})}}),w.extend({queue:function(d,m,C){var x;if(d)return x=et.get(d,m=(m||"fx")+"queue"),C&&(!x||Array.isArray(C)?x=et.access(d,m,w.makeArray(C)):x.push(C)),x||[]},dequeue:function(d,m){var C=w.queue(d,m=m||"fx"),x=C.length,_=C.shift(),T=w._queueHooks(d,m);"inprogress"===_&&(_=C.shift(),x--),_&&("fx"===m&&C.unshift("inprogress"),delete T.stop,_.call(d,function(){w.dequeue(d,m)},T)),!x&&T&&T.empty.fire()},_queueHooks:function(d,m){var C=m+"queueHooks";return et.get(d,C)||et.access(d,C,{empty:w.Callbacks("once memory").add(function(){et.remove(d,[m+"queue",C])})})}}),w.fn.extend({queue:function(d,m){var C=2;return"string"!=typeof d&&(m=d,d="fx",C--),arguments.length<C?w.queue(this[0],d):void 0===m?this:this.each(function(){var x=w.queue(this,d,m);w._queueHooks(this,d),"fx"===d&&"inprogress"!==x[0]&&w.dequeue(this,d)})},dequeue:function(d){return this.each(function(){w.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,m){var C,x=1,_=w.Deferred(),T=this,O=this.length,q=function(){--x||_.resolveWith(T,[T])};for("string"!=typeof d&&(m=d,d=void 0),d=d||"fx";O--;)(C=et.get(T[O],d+"queueHooks"))&&C.empty&&(x++,C.empty.add(q));return q(),_.promise(m)}});var tr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,vn=new RegExp("^(?:([+-])=|)("+tr+")([a-z%]*)$","i"),Xn=["Top","Right","Bottom","Left"],xr=Ze.documentElement,rn=function(d){return w.contains(d.ownerDocument,d)},cu={composed:!0};xr.getRootNode&&(rn=function(d){return w.contains(d.ownerDocument,d)||d.getRootNode(cu)===d.ownerDocument});var yt=function(d,m){return"none"===(d=m||d).style.display||""===d.style.display&&rn(d)&&"none"===w.css(d,"display")};function ps(d,m,C,x){var _,T,O=20,q=x?function(){return x.cur()}:function(){return w.css(d,m,"")},H=q(),K=C&&C[3]||(w.cssNumber[m]?"":"px"),ee=d.nodeType&&(w.cssNumber[m]||"px"!==K&&+H)&&vn.exec(w.css(d,m));if(ee&&ee[3]!==K){for(K=K||ee[3],ee=+(H/=2)||1;O--;)w.style(d,m,ee+K),(1-T)*(1-(T=q()/H||.5))<=0&&(O=0),ee/=T;w.style(d,m,(ee*=2)+K),C=C||[]}return C&&(ee=+ee||+H||0,_=C[1]?ee+(C[1]+1)*C[2]:+C[2],x&&(x.unit=K,x.start=ee,x.end=_)),_}var oc={};function Er(d,m){for(var C,x,_,T,O,q,H,K=[],ee=0,ie=d.length;ee<ie;ee++)(x=d[ee]).style&&(C=x.style.display,m?("none"===C&&(K[ee]=et.get(x,"display")||null,K[ee]||(x.style.display="")),""===x.style.display&&yt(x)&&(K[ee]=(H=O=T=void 0,O=(_=x).ownerDocument,(H=oc[q=_.nodeName])||(T=O.body.appendChild(O.createElement(q)),H=w.css(T,"display"),T.parentNode.removeChild(T),"none"===H&&(H="block"),oc[q]=H)))):"none"!==C&&(K[ee]="none",et.set(x,"display",C)));for(ee=0;ee<ie;ee++)null!=K[ee]&&(d[ee].style.display=K[ee]);return d}w.fn.extend({show:function(){return Er(this,!0)},hide:function(){return Er(this)},toggle:function(d){return"boolean"==typeof d?d?this.show():this.hide():this.each(function(){yt(this)?w(this).show():w(this).hide()})}});var Sr,kr,_r=/^(?:checkbox|radio)$/i,Pa=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ot=/^$|^module$|\/(?:java|ecma)script/i;Sr=Ze.createDocumentFragment().appendChild(Ze.createElement("div")),(kr=Ze.createElement("input")).setAttribute("type","radio"),kr.setAttribute("checked","checked"),kr.setAttribute("name","t"),Sr.appendChild(kr),Ve.checkClone=Sr.cloneNode(!0).cloneNode(!0).lastChild.checked,Sr.innerHTML="<textarea>x</textarea>",Ve.noCloneChecked=!!Sr.cloneNode(!0).lastChild.defaultValue,Sr.innerHTML="<option></option>",Ve.option=!!Sr.lastChild;var je={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function dn(d,m){var C;return C=typeof d.getElementsByTagName<"u"?d.getElementsByTagName(m||"*"):typeof d.querySelectorAll<"u"?d.querySelectorAll(m||"*"):[],void 0===m||m&&ke(d,m)?w.merge([d],C):C}function La(d,m){for(var C=0,x=d.length;C<x;C++)et.set(d[C],"globalEval",!m||et.get(m[C],"globalEval"))}je.tbody=je.tfoot=je.colgroup=je.caption=je.thead,je.th=je.td,Ve.option||(je.optgroup=je.option=[1,"<select multiple='multiple'>","</select>"]);var rc=/<|&#?\w+;/;function Ma(d,m,C,x,_){for(var T,O,q,H,K,ee,ie=m.createDocumentFragment(),Z=[],ue=0,Pe=d.length;ue<Pe;ue++)if((T=d[ue])||0===T)if("object"===wt(T))w.merge(Z,T.nodeType?[T]:T);else if(rc.test(T)){for(O=O||ie.appendChild(m.createElement("div")),q=(Pa.exec(T)||["",""])[1].toLowerCase(),O.innerHTML=(H=je[q]||je._default)[1]+w.htmlPrefilter(T)+H[2],ee=H[0];ee--;)O=O.lastChild;w.merge(Z,O.childNodes),(O=ie.firstChild).textContent=""}else Z.push(m.createTextNode(T));for(ie.textContent="",ue=0;T=Z[ue++];)if(x&&-1<w.inArray(T,x))_&&_.push(T);else if(K=rn(T),O=dn(ie.appendChild(T),"script"),K&&La(O),C)for(ee=0;T=O[ee++];)Ot.test(T.type||"")&&C.push(T);return ie}var Ws=/^([^.]*)(?:\.(.+)|)/;function Nr(){return!0}function Wo(){return!1}function gs(d,m,C,x,_,T){var O,q;if("object"==typeof m){for(q in"string"!=typeof C&&(x=x||C,C=void 0),m)gs(d,q,C,x,m[q],T);return d}if(null==x&&null==_?(_=C,x=C=void 0):null==_&&("string"==typeof C?(_=x,x=void 0):(_=x,x=C,C=void 0)),!1===_)_=Wo;else if(!_)return d;return 1===T&&(O=_,(_=function(H){return w().off(H),O.apply(this,arguments)}).guid=O.guid||(O.guid=w.guid++)),d.each(function(){w.event.add(this,m,_,x,C)})}function Vs(d,m,C){C?(et.set(d,m,!1),w.event.add(d,m,{namespace:!1,handler:function(x){var _,T=et.get(this,m);if(1&x.isTrigger&&this[m]){if(T)(w.event.special[m]||{}).delegateType&&x.stopPropagation();else if(T=it.call(arguments),et.set(this,m,T),this[m](),_=et.get(this,m),et.set(this,m,!1),T!==_)return x.stopImmediatePropagation(),x.preventDefault(),_}else T&&(et.set(this,m,w.event.trigger(T[0],T.slice(1),this)),x.stopPropagation(),x.isImmediatePropagationStopped=Nr)}})):void 0===et.get(d,m)&&w.event.add(d,m,Nr)}w.event={global:{},add:function(d,m,C,x,_){var T,O,q,H,K,ee,ie,Z,ue,Pe,lt,B=et.get(d);if(ro(d))for(C.handler&&(C=(T=C).handler,_=T.selector),_&&w.find.matchesSelector(xr,_),C.guid||(C.guid=w.guid++),(H=B.events)||(H=B.events=Object.create(null)),(O=B.handle)||(O=B.handle=function(en){return typeof w<"u"&&w.event.triggered!==en.type?w.event.dispatch.apply(d,arguments):void 0}),K=(m=(m||"").match(nt)||[""]).length;K--;)ue=lt=(q=Ws.exec(m[K])||[])[1],Pe=(q[2]||"").split(".").sort(),ue&&(ie=w.event.special[ue]||{},ie=w.event.special[ue=(_?ie.delegateType:ie.bindType)||ue]||{},ee=w.extend({type:ue,origType:lt,data:x,handler:C,guid:C.guid,selector:_,needsContext:_&&w.expr.match.needsContext.test(_),namespace:Pe.join(".")},T),(Z=H[ue])||((Z=H[ue]=[]).delegateCount=0,ie.setup&&!1!==ie.setup.call(d,x,Pe,O)||d.addEventListener&&d.addEventListener(ue,O)),ie.add&&(ie.add.call(d,ee),ee.handler.guid||(ee.handler.guid=C.guid)),_?Z.splice(Z.delegateCount++,0,ee):Z.push(ee),w.event.global[ue]=!0)},remove:function(d,m,C,x,_){var T,O,q,H,K,ee,ie,Z,ue,Pe,lt,B=et.hasData(d)&&et.get(d);if(B&&(H=B.events)){for(K=(m=(m||"").match(nt)||[""]).length;K--;)if(ue=lt=(q=Ws.exec(m[K])||[])[1],Pe=(q[2]||"").split(".").sort(),ue){for(ie=w.event.special[ue]||{},Z=H[ue=(x?ie.delegateType:ie.bindType)||ue]||[],q=q[2]&&new RegExp("(^|\\.)"+Pe.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=T=Z.length;T--;)ee=Z[T],!_&&lt!==ee.origType||C&&C.guid!==ee.guid||q&&!q.test(ee.namespace)||x&&x!==ee.selector&&("**"!==x||!ee.selector)||(Z.splice(T,1),ee.selector&&Z.delegateCount--,ie.remove&&ie.remove.call(d,ee));O&&!Z.length&&(ie.teardown&&!1!==ie.teardown.call(d,Pe,B.handle)||w.removeEvent(d,ue,B.handle),delete H[ue])}else for(ue in H)w.event.remove(d,ue+m[K],C,x,!0);w.isEmptyObject(H)&&et.remove(d,"handle events")}},dispatch:function(d){var m,C,x,_,T,O,q=new Array(arguments.length),H=w.event.fix(d),K=(et.get(this,"events")||Object.create(null))[H.type]||[],ee=w.event.special[H.type]||{};for(q[0]=H,m=1;m<arguments.length;m++)q[m]=arguments[m];if(H.delegateTarget=this,!ee.preDispatch||!1!==ee.preDispatch.call(this,H)){for(O=w.event.handlers.call(this,H,K),m=0;(_=O[m++])&&!H.isPropagationStopped();)for(H.currentTarget=_.elem,C=0;(T=_.handlers[C++])&&!H.isImmediatePropagationStopped();)H.rnamespace&&!1!==T.namespace&&!H.rnamespace.test(T.namespace)||(H.handleObj=T,H.data=T.data,void 0!==(x=((w.event.special[T.origType]||{}).handle||T.handler).apply(_.elem,q))&&!1===(H.result=x)&&(H.preventDefault(),H.stopPropagation()));return ee.postDispatch&&ee.postDispatch.call(this,H),H.result}},handlers:function(d,m){var C,x,_,T,O,q=[],H=m.delegateCount,K=d.target;if(H&&K.nodeType&&!("click"===d.type&&1<=d.button))for(;K!==this;K=K.parentNode||this)if(1===K.nodeType&&("click"!==d.type||!0!==K.disabled)){for(T=[],O={},C=0;C<H;C++)void 0===O[_=(x=m[C]).selector+" "]&&(O[_]=x.needsContext?-1<w(_,this).index(K):w.find(_,this,null,[K]).length),O[_]&&T.push(x);T.length&&q.push({elem:K,handlers:T})}return K=this,H<m.length&&q.push({elem:K,handlers:m.slice(H)}),q},addProp:function(d,m){Object.defineProperty(w.Event.prototype,d,{enumerable:!0,configurable:!0,get:Me(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(C){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:C})}})},fix:function(d){return d[w.expando]?d:new w.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var m=this||d;return _r.test(m.type)&&m.click&&ke(m,"input")&&Vs(m,"click",!0),!1},trigger:function(d){var m=this||d;return _r.test(m.type)&&m.click&&ke(m,"input")&&Vs(m,"click"),!0},_default:function(d){var m=d.target;return _r.test(m.type)&&m.click&&ke(m,"input")&&et.get(m,"click")||ke(m,"a")}},beforeunload:{postDispatch:function(d){void 0!==d.result&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}},w.removeEvent=function(d,m,C){d.removeEventListener&&d.removeEventListener(m,C)},w.Event=function(d,m){if(!(this instanceof w.Event))return new w.Event(d,m);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||void 0===d.defaultPrevented&&!1===d.returnValue?Nr:Wo,this.target=d.target&&3===d.target.nodeType?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,m&&w.extend(this,m),this.timeStamp=d&&d.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Wo,isPropagationStopped:Wo,isImmediatePropagationStopped:Wo,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=Nr,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=Nr,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=Nr,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(d,m){function C(x){if(Ze.documentMode){var _=et.get(this,"handle"),T=w.event.fix(x);T.type="focusin"===x.type?"focus":"blur",T.isSimulated=!0,_(x),T.target===T.currentTarget&&_(T)}else w.event.simulate(m,x.target,w.event.fix(x))}w.event.special[d]={setup:function(){var x;if(Vs(this,d,!0),!Ze.documentMode)return!1;(x=et.get(this,m))||this.addEventListener(m,C),et.set(this,m,(x||0)+1)},trigger:function(){return Vs(this,d),!0},teardown:function(){var x;if(!Ze.documentMode)return!1;(x=et.get(this,m)-1)?et.set(this,m,x):(this.removeEventListener(m,C),et.remove(this,m))},_default:function(x){return et.get(x.target,d)},delegateType:m},w.event.special[m]={setup:function(){var x=this.ownerDocument||this.document||this,_=Ze.documentMode?this:x,T=et.get(_,m);T||(Ze.documentMode?this.addEventListener(m,C):x.addEventListener(d,C,!0)),et.set(_,m,(T||0)+1)},teardown:function(){var x=this.ownerDocument||this.document||this,_=Ze.documentMode?this:x,T=et.get(_,m)-1;T?et.set(_,m,T):(Ze.documentMode?this.removeEventListener(m,C):x.removeEventListener(d,C,!0),et.remove(_,m))}}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,m){w.event.special[d]={delegateType:m,bindType:m,handle:function(C){var x,_=C.relatedTarget,T=C.handleObj;return _&&(_===this||w.contains(this,_))||(C.type=T.origType,x=T.handler.apply(this,arguments),C.type=m),x}}}),w.fn.extend({on:function(d,m,C,x){return gs(this,d,m,C,x)},one:function(d,m,C,x){return gs(this,d,m,C,x,1)},off:function(d,m,C){var x,_;if(d&&d.preventDefault&&d.handleObj)return x=d.handleObj,w(d.delegateTarget).off(x.namespace?x.origType+"."+x.namespace:x.origType,x.selector,x.handler),this;if("object"==typeof d){for(_ in d)this.off(_,m,d[_]);return this}return!1!==m&&"function"!=typeof m||(C=m,m=void 0),!1===C&&(C=Wo),this.each(function(){w.event.remove(this,d,C,m)})}});var Xr=/<script|<style|<link/i,Vo=/checked\s*(?:[^=]|=\s*.checked.)/i,sc=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ia(d,m){return ke(d,"table")&&ke(11!==m.nodeType?m:m.firstChild,"tr")&&w(d).children("tbody")[0]||d}function Ks(d){return d.type=(null!==d.getAttribute("type"))+"/"+d.type,d}function ac(d){return"true/"===(d.type||"").slice(0,5)?d.type=d.type.slice(5):d.removeAttribute("type"),d}function Ai(d,m){var C,x,_,T,O,q;if(1===m.nodeType){if(et.hasData(d)&&(q=et.get(d).events))for(_ in et.remove(m,"handle events"),q)for(C=0,x=q[_].length;C<x;C++)w.event.add(m,_,q[_][C]);Pn.hasData(d)&&(T=Pn.access(d),O=w.extend({},T),Pn.set(m,O))}}function Yr(d,m,C,x){m=Kt(m);var _,T,O,q,H,K,ee=0,ie=d.length,Z=ie-1,ue=m[0],Pe=Me(ue);if(Pe||1<ie&&"string"==typeof ue&&!Ve.checkClone&&Vo.test(ue))return d.each(function(lt){var B=d.eq(lt);Pe&&(m[0]=ue.call(this,lt,B.html())),Yr(B,m,C,x)});if(ie&&(T=(_=Ma(m,d[0].ownerDocument,!1,d,x)).firstChild,1===_.childNodes.length&&(_=T),T||x)){for(q=(O=w.map(dn(_,"script"),Ks)).length;ee<ie;ee++)H=_,ee!==Z&&(H=w.clone(H,!0,!0),q&&w.merge(O,dn(H,"script"))),C.call(d[ee],H,ee);if(q)for(K=O[O.length-1].ownerDocument,w.map(O,ac),ee=0;ee<q;ee++)Ot.test((H=O[ee]).type||"")&&!et.access(H,"globalEval")&&w.contains(K,H)&&(H.src&&"module"!==(H.type||"").toLowerCase()?w._evalUrl&&!H.noModule&&w._evalUrl(H.src,{nonce:H.nonce||H.getAttribute("nonce")},K):jt(H.textContent.replace(sc,""),H,K))}return d}function un(d,m,C){for(var x,_=m?w.filter(m,d):d,T=0;null!=(x=_[T]);T++)C||1!==x.nodeType||w.cleanData(dn(x)),x.parentNode&&(C&&rn(x)&&La(dn(x,"script")),x.parentNode.removeChild(x));return d}w.extend({htmlPrefilter:function(d){return d},clone:function(d,m,C){var x,_,T,O,q,H,K,ee=d.cloneNode(!0),ie=rn(d);if(!(Ve.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||w.isXMLDoc(d)))for(O=dn(ee),x=0,_=(T=dn(d)).length;x<_;x++)q=T[x],"input"===(K=(H=O[x]).nodeName.toLowerCase())&&_r.test(q.type)?H.checked=q.checked:"input"!==K&&"textarea"!==K||(H.defaultValue=q.defaultValue);if(m)if(C)for(T=T||dn(d),O=O||dn(ee),x=0,_=T.length;x<_;x++)Ai(T[x],O[x]);else Ai(d,ee);return 0<(O=dn(ee,"script")).length&&La(O,!ie&&dn(d,"script")),ee},cleanData:function(d){for(var m,C,x,_=w.event.special,T=0;void 0!==(C=d[T]);T++)if(ro(C)){if(m=C[et.expando]){if(m.events)for(x in m.events)_[x]?w.event.remove(C,x):w.removeEvent(C,x,m.handle);C[et.expando]=void 0}C[Pn.expando]&&(C[Pn.expando]=void 0)}}}),w.fn.extend({detach:function(d){return un(this,d,!0)},remove:function(d){return un(this,d)},text:function(d){return $o(this,function(m){return void 0===m?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=m)})},null,d,arguments.length)},append:function(){return Yr(this,arguments,function(d){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ia(this,d).appendChild(d)})},prepend:function(){return Yr(this,arguments,function(d){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var m=Ia(this,d);m.insertBefore(d,m.firstChild)}})},before:function(){return Yr(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return Yr(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,m=0;null!=(d=this[m]);m++)1===d.nodeType&&(w.cleanData(dn(d,!1)),d.textContent="");return this},clone:function(d,m){return d=null!=d&&d,m=m??d,this.map(function(){return w.clone(this,d,m)})},html:function(d){return $o(this,function(m){var C=this[0]||{},x=0,_=this.length;if(void 0===m&&1===C.nodeType)return C.innerHTML;if("string"==typeof m&&!Xr.test(m)&&!je[(Pa.exec(m)||["",""])[1].toLowerCase()]){m=w.htmlPrefilter(m);try{for(;x<_;x++)1===(C=this[x]||{}).nodeType&&(w.cleanData(dn(C,!1)),C.innerHTML=m);C=0}catch{}}C&&this.empty().append(m)},null,d,arguments.length)},replaceWith:function(){var d=[];return Yr(this,arguments,function(m){var C=this.parentNode;w.inArray(this,d)<0&&(w.cleanData(dn(this)),C&&C.replaceChild(m,this))},d)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,m){w.fn[d]=function(C){for(var x,_=[],T=w(C),O=T.length-1,q=0;q<=O;q++)x=q===O?this:this.clone(!0),w(T[q])[m](x),Rn.apply(_,x.get());return this.pushStack(_)}});var Vt=new RegExp("^("+tr+")(?!px)[a-z%]+$","i"),Xs=/^--/,hs=function(d){var m=d.ownerDocument.defaultView;return m&&m.opener||(m=be),m.getComputedStyle(d)},Gr=function(d,m,C){var x,_,T={};for(_ in m)T[_]=d.style[_],d.style[_]=m[_];for(_ in x=C.call(d),m)d.style[_]=T[_];return x},du=new RegExp(Xn.join("|"),"i");function bs(d,m,C){var x,_,T,O,q=Xs.test(m),H=d.style;return(C=C||hs(d))&&(O=C.getPropertyValue(m)||C[m],q&&O&&(O=O.replace(Jo,"$1")||void 0),""!==O||rn(d)||(O=w.style(d,m)),!Ve.pixelBoxStyles()&&Vt.test(O)&&du.test(m)&&(x=H.width,_=H.minWidth,T=H.maxWidth,H.minWidth=H.maxWidth=H.width=O,O=C.width,H.width=x,H.minWidth=_,H.maxWidth=T)),void 0!==O?O+"":O}function So(d,m){return{get:function(){if(!d())return(this.get=m).apply(this,arguments);delete this.get}}}!function(){function d(){if(K){H.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",xr.appendChild(H).appendChild(K);var ee=be.getComputedStyle(K);C="1%"!==ee.top,q=12===m(ee.marginLeft),K.style.right="60%",T=36===m(ee.right),x=36===m(ee.width),K.style.position="absolute",_=12===m(K.offsetWidth/3),xr.removeChild(H),K=null}}function m(ee){return Math.round(parseFloat(ee))}var C,x,_,T,O,q,H=Ze.createElement("div"),K=Ze.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",Ve.clearCloneStyle="content-box"===K.style.backgroundClip,w.extend(Ve,{boxSizingReliable:function(){return d(),x},pixelBoxStyles:function(){return d(),T},pixelPosition:function(){return d(),C},reliableMarginLeft:function(){return d(),q},scrollboxSize:function(){return d(),_},reliableTrDimensions:function(){var ee,ie,Z,ue;return null==O&&(ee=Ze.createElement("table"),ie=Ze.createElement("tr"),Z=Ze.createElement("div"),ee.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ie.style.cssText="box-sizing:content-box;border:1px solid",ie.style.height="1px",Z.style.height="9px",Z.style.display="block",xr.appendChild(ee).appendChild(ie).appendChild(Z),ue=be.getComputedStyle(ie),O=parseInt(ue.height,10)+parseInt(ue.borderTopWidth,10)+parseInt(ue.borderBottomWidth,10)===ie.offsetHeight,xr.removeChild(ee)),O}}))}();var vs=["Webkit","Moz","ms"],Ys=Ze.createElement("div").style,Fa={};function ko(d){return w.cssProps[d]||Fa[d]||(d in Ys?d:Fa[d]=function(C){for(var x=C[0].toUpperCase()+C.slice(1),_=vs.length;_--;)if((C=vs[_]+x)in Ys)return C}(d)||d)}var uu=/^(none|table(?!-c[ea]).+)/,fu={position:"absolute",visibility:"hidden",display:"block"},Ti={letterSpacing:"0",fontWeight:"400"};function Ri(d,m,C){var x=vn.exec(m);return x?Math.max(0,x[2]-(C||0))+(x[3]||"px"):m}function ja(d,m,C,x,_,T){var O="width"===m?1:0,q=0,H=0,K=0;if(C===(x?"border":"content"))return 0;for(;O<4;O+=2)"margin"===C&&(K+=w.css(d,C+Xn[O],!0,_)),x?("content"===C&&(H-=w.css(d,"padding"+Xn[O],!0,_)),"margin"!==C&&(H-=w.css(d,"border"+Xn[O]+"Width",!0,_))):(H+=w.css(d,"padding"+Xn[O],!0,_),"padding"!==C?H+=w.css(d,"border"+Xn[O]+"Width",!0,_):q+=w.css(d,"border"+Xn[O]+"Width",!0,_));return!x&&0<=T&&(H+=Math.max(0,Math.ceil(d["offset"+m[0].toUpperCase()+m.slice(1)]-T-H-q-.5))||0),H+K}function Oi(d,m,C){var x=hs(d),_=(!Ve.boxSizingReliable()||C)&&"border-box"===w.css(d,"boxSizing",!1,x),T=_,O=bs(d,m,x),q="offset"+m[0].toUpperCase()+m.slice(1);if(Vt.test(O)){if(!C)return O;O="auto"}return(!Ve.boxSizingReliable()&&_||!Ve.reliableTrDimensions()&&ke(d,"tr")||"auto"===O||!parseFloat(O)&&"inline"===w.css(d,"display",!1,x))&&d.getClientRects().length&&(_="border-box"===w.css(d,"boxSizing",!1,x),(T=q in d)&&(O=d[q])),(O=parseFloat(O)||0)+ja(d,m,C||(_?"border":"content"),T,x,O)+"px"}function go(d,m,C,x,_){return new go.prototype.init(d,m,C,x,_)}w.extend({cssHooks:{opacity:{get:function(d,m){if(m){var C=bs(d,"opacity");return""===C?"1":C}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,m,C,x){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var _,T,O,q=Gt(m),H=Xs.test(m),K=d.style;if(H||(m=ko(q)),O=w.cssHooks[m]||w.cssHooks[q],void 0===C)return O&&"get"in O&&void 0!==(_=O.get(d,!1,x))?_:K[m];"string"==(T=typeof C)&&(_=vn.exec(C))&&_[1]&&(C=ps(d,m,_),T="number"),null!=C&&C==C&&("number"!==T||H||(C+=_&&_[3]||(w.cssNumber[q]?"":"px")),Ve.clearCloneStyle||""!==C||0!==m.indexOf("background")||(K[m]="inherit"),O&&"set"in O&&void 0===(C=O.set(d,C,x))||(H?K.setProperty(m,C):K[m]=C))}},css:function(d,m,C,x){var _,T,O,q=Gt(m);return Xs.test(m)||(m=ko(q)),(O=w.cssHooks[m]||w.cssHooks[q])&&"get"in O&&(_=O.get(d,!0,C)),void 0===_&&(_=bs(d,m,x)),"normal"===_&&m in Ti&&(_=Ti[m]),""===C||C?(T=parseFloat(_),!0===C||isFinite(T)?T||0:_):_}}),w.each(["height","width"],function(d,m){w.cssHooks[m]={get:function(C,x,_){if(x)return!uu.test(w.css(C,"display"))||C.getClientRects().length&&C.getBoundingClientRect().width?Oi(C,m,_):Gr(C,fu,function(){return Oi(C,m,_)})},set:function(C,x,_){var T,O=hs(C),q=!Ve.scrollboxSize()&&"absolute"===O.position,H=(q||_)&&"border-box"===w.css(C,"boxSizing",!1,O),K=_?ja(C,m,_,H,O):0;return H&&q&&(K-=Math.ceil(C["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(O[m])-ja(C,m,"border",!1,O)-.5)),K&&(T=vn.exec(x))&&"px"!==(T[3]||"px")&&(C.style[m]=x,x=w.css(C,m)),Ri(0,x,K)}}}),w.cssHooks.marginLeft=So(Ve.reliableMarginLeft,function(d,m){if(m)return(parseFloat(bs(d,"marginLeft"))||d.getBoundingClientRect().left-Gr(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(d,m){w.cssHooks[d+m]={expand:function(C){for(var x=0,_={},T="string"==typeof C?C.split(" "):[C];x<4;x++)_[d+Xn[x]+m]=T[x]||T[x-2]||T[0];return _}},"margin"!==d&&(w.cssHooks[d+m].set=Ri)}),w.fn.extend({css:function(d,m){return $o(this,function(C,x,_){var T,O,q={},H=0;if(Array.isArray(x)){for(T=hs(C),O=x.length;H<O;H++)q[x[H]]=w.css(C,x[H],!1,T);return q}return void 0!==_?w.style(C,x,_):w.css(C,x)},d,m,1<arguments.length)}}),((w.Tween=go).prototype={constructor:go,init:function(d,m,C,x,_,T){this.elem=d,this.prop=C,this.easing=_||w.easing._default,this.options=m,this.start=this.now=this.cur(),this.end=x,this.unit=T||(w.cssNumber[C]?"":"px")},cur:function(){var d=go.propHooks[this.prop];return d&&d.get?d.get(this):go.propHooks._default.get(this)},run:function(d){var m,C=go.propHooks[this.prop];return this.pos=m=this.options.duration?w.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):d,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),C&&C.set?C.set(this):go.propHooks._default.set(this),this}}).init.prototype=go.prototype,(go.propHooks={_default:{get:function(d){var m;return 1!==d.elem.nodeType||null!=d.elem[d.prop]&&null==d.elem.style[d.prop]?d.elem[d.prop]:(m=w.css(d.elem,d.prop,""))&&"auto"!==m?m:0},set:function(d){w.fx.step[d.prop]?w.fx.step[d.prop](d):1!==d.elem.nodeType||!w.cssHooks[d.prop]&&null==d.elem.style[ko(d.prop)]?d.elem[d.prop]=d.now:w.style(d.elem,d.prop,d.now+d.unit)}}}).scrollTop=go.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},w.easing={linear:function(d){return d},swing:function(d){return.5-Math.cos(d*Math.PI)/2},_default:"swing"},w.fx=go.prototype.init,w.fx.step={};var Qr,Gs,ys,ic,lc=/^(?:toggle|show|hide)$/,cc=/queueHooks$/;function za(){Gs&&(!1===Ze.hidden&&be.requestAnimationFrame?be.requestAnimationFrame(za):be.setTimeout(za,w.fx.interval),w.fx.tick())}function Bi(){return be.setTimeout(function(){Qr=void 0}),Qr=Date.now()}function Qs(d,m){var C,x=0,_={height:d};for(m=m?1:0;x<4;x+=2-m)_["margin"+(C=Xn[x])]=_["padding"+C]=d;return m&&(_.opacity=_.width=d),_}function Di(d,m,C){for(var x,_=(ho.tweeners[m]||[]).concat(ho.tweeners["*"]),T=0,O=_.length;T<O;T++)if(x=_[T].call(C,m,d))return x}function ho(d,m,C){var x,_,T=0,O=ho.prefilters.length,q=w.Deferred().always(function(){delete H.elem}),H=function(){if(_)return!1;for(var ie=Qr||Bi(),Z=Math.max(0,K.startTime+K.duration-ie),ue=1-(Z/K.duration||0),Pe=0,lt=K.tweens.length;Pe<lt;Pe++)K.tweens[Pe].run(ue);return q.notifyWith(d,[K,ue,Z]),ue<1&&lt?Z:(lt||q.notifyWith(d,[K,1,0]),q.resolveWith(d,[K]),!1)},K=q.promise({elem:d,props:w.extend({},m),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},C),originalProperties:m,originalOptions:C,startTime:Qr||Bi(),duration:C.duration,tweens:[],createTween:function(ie,Z){var ue=w.Tween(d,K.opts,ie,Z,K.opts.specialEasing[ie]||K.opts.easing);return K.tweens.push(ue),ue},stop:function(ie){var Z=0,ue=ie?K.tweens.length:0;if(_)return this;for(_=!0;Z<ue;Z++)K.tweens[Z].run(1);return ie?(q.notifyWith(d,[K,1,0]),q.resolveWith(d,[K,ie])):q.rejectWith(d,[K,ie]),this}}),ee=K.props;for(function(ie,Z){var ue,Pe,lt,B,en;for(ue in ie)if(lt=Z[Pe=Gt(ue)],B=ie[ue],Array.isArray(B)&&(lt=B[1],B=ie[ue]=B[0]),ue!==Pe&&(ie[Pe]=B,delete ie[ue]),(en=w.cssHooks[Pe])&&"expand"in en)for(ue in B=en.expand(B),delete ie[Pe],B)ue in ie||(ie[ue]=B[ue],Z[ue]=lt);else Z[Pe]=lt}(ee,K.opts.specialEasing);T<O;T++)if(x=ho.prefilters[T].call(K,d,ee,K.opts))return Me(x.stop)&&(w._queueHooks(K.elem,K.opts.queue).stop=x.stop.bind(x)),x;return w.map(ee,Di,K),Me(K.opts.start)&&K.opts.start.call(d,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),w.fx.timer(w.extend(H,{elem:d,anim:K,queue:K.opts.queue})),K}w.Animation=w.extend(ho,{tweeners:{"*":[function(d,m){var C=this.createTween(d,m);return ps(C.elem,d,vn.exec(m),C),C}]},tweener:function(d,m){Me(d)?(m=d,d=["*"]):d=d.match(nt);for(var C,x=0,_=d.length;x<_;x++)(ho.tweeners[C=d[x]]=ho.tweeners[C]||[]).unshift(m)},prefilters:[function(d,m,C){var x,_,T,O,q,H,K,ee,ie="width"in m||"height"in m,Z=this,ue={},Pe=d.style,lt=d.nodeType&&yt(d),B=et.get(d,"fxshow");for(x in C.queue||(null==(O=w._queueHooks(d,"fx")).unqueued&&(O.unqueued=0,q=O.empty.fire,O.empty.fire=function(){O.unqueued||q()}),O.unqueued++,Z.always(function(){Z.always(function(){O.unqueued--,w.queue(d,"fx").length||O.empty.fire()})})),m)if(lc.test(_=m[x])){if(delete m[x],T=T||"toggle"===_,_===(lt?"hide":"show")){if("show"!==_||!B||void 0===B[x])continue;lt=!0}ue[x]=B&&B[x]||w.style(d,x)}if((H=!w.isEmptyObject(m))||!w.isEmptyObject(ue))for(x in ie&&1===d.nodeType&&(C.overflow=[Pe.overflow,Pe.overflowX,Pe.overflowY],null==(K=B&&B.display)&&(K=et.get(d,"display")),"none"===(ee=w.css(d,"display"))&&(K?ee=K:(Er([d],!0),K=d.style.display||K,ee=w.css(d,"display"),Er([d]))),("inline"===ee||"inline-block"===ee&&null!=K)&&"none"===w.css(d,"float")&&(H||(Z.done(function(){Pe.display=K}),null==K&&(K="none"===(ee=Pe.display)?"":ee)),Pe.display="inline-block")),C.overflow&&(Pe.overflow="hidden",Z.always(function(){Pe.overflow=C.overflow[0],Pe.overflowX=C.overflow[1],Pe.overflowY=C.overflow[2]})),H=!1,ue)H||(B?"hidden"in B&&(lt=B.hidden):B=et.access(d,"fxshow",{display:K}),T&&(B.hidden=!lt),lt&&Er([d],!0),Z.done(function(){for(x in lt||Er([d]),et.remove(d,"fxshow"),ue)w.style(d,x,ue[x])})),H=Di(lt?B[x]:0,x,Z),x in B||(B[x]=H.start,lt&&(H.end=H.start,H.start=0))}],prefilter:function(d,m){m?ho.prefilters.unshift(d):ho.prefilters.push(d)}}),w.speed=function(d,m,C){var x=d&&"object"==typeof d?w.extend({},d):{complete:C||!C&&m||Me(d)&&d,duration:d,easing:C&&m||m&&!Me(m)&&m};return w.fx.off?x.duration=0:"number"!=typeof x.duration&&(x.duration=x.duration in w.fx.speeds?w.fx.speeds[x.duration]:w.fx.speeds._default),null!=x.queue&&!0!==x.queue||(x.queue="fx"),x.old=x.complete,x.complete=function(){Me(x.old)&&x.old.call(this),x.queue&&w.dequeue(this,x.queue)},x},w.fn.extend({fadeTo:function(d,m,C,x){return this.filter(yt).css("opacity",0).show().end().animate({opacity:m},d,C,x)},animate:function(d,m,C,x){var _=w.isEmptyObject(d),T=w.speed(m,C,x),O=function(){var q=ho(this,w.extend({},d),T);(_||et.get(this,"finish"))&&q.stop(!0)};return O.finish=O,_||!1===T.queue?this.each(O):this.queue(T.queue,O)},stop:function(d,m,C){var x=function(_){var T=_.stop;delete _.stop,T(C)};return"string"!=typeof d&&(C=m,m=d,d=void 0),m&&this.queue(d||"fx",[]),this.each(function(){var _=!0,T=null!=d&&d+"queueHooks",O=w.timers,q=et.get(this);if(T)q[T]&&q[T].stop&&x(q[T]);else for(T in q)q[T]&&q[T].stop&&cc.test(T)&&x(q[T]);for(T=O.length;T--;)O[T].elem!==this||null!=d&&O[T].queue!==d||(O[T].anim.stop(C),_=!1,O.splice(T,1));!_&&C||w.dequeue(this,d)})},finish:function(d){return!1!==d&&(d=d||"fx"),this.each(function(){var m,C=et.get(this),x=C[d+"queue"],_=C[d+"queueHooks"],T=w.timers,O=x?x.length:0;for(C.finish=!0,w.queue(this,d,[]),_&&_.stop&&_.stop.call(this,!0),m=T.length;m--;)T[m].elem===this&&T[m].queue===d&&(T[m].anim.stop(!0),T.splice(m,1));for(m=0;m<O;m++)x[m]&&x[m].finish&&x[m].finish.call(this);delete C.finish})}}),w.each(["toggle","show","hide"],function(d,m){var C=w.fn[m];w.fn[m]=function(x,_,T){return null==x||"boolean"==typeof x?C.apply(this,arguments):this.animate(Qs(m,!0),x,_,T)}}),w.each({slideDown:Qs("show"),slideUp:Qs("hide"),slideToggle:Qs("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,m){w.fn[d]=function(C,x,_){return this.animate(m,C,x,_)}}),w.timers=[],w.fx.tick=function(){var d,m=0,C=w.timers;for(Qr=Date.now();m<C.length;m++)(d=C[m])()||C[m]!==d||C.splice(m--,1);C.length||w.fx.stop(),Qr=void 0},w.fx.timer=function(d){w.timers.push(d),w.fx.start()},w.fx.interval=13,w.fx.start=function(){Gs||(Gs=!0,za())},w.fx.stop=function(){Gs=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(d,m){return d=w.fx&&w.fx.speeds[d]||d,this.queue(m=m||"fx",function(C,x){var _=be.setTimeout(C,d);x.stop=function(){be.clearTimeout(_)}})},ys=Ze.createElement("input"),ic=Ze.createElement("select").appendChild(Ze.createElement("option")),ys.type="checkbox",Ve.checkOn=""!==ys.value,Ve.optSelected=ic.selected,(ys=Ze.createElement("input")).value="t",ys.type="radio",Ve.radioValue="t"===ys.value;var Pi,Zs=w.expr.attrHandle;w.fn.extend({attr:function(d,m){return $o(this,w.attr,d,m,1<arguments.length)},removeAttr:function(d){return this.each(function(){w.removeAttr(this,d)})}}),w.extend({attr:function(d,m,C){var x,_,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return typeof d.getAttribute>"u"?w.prop(d,m,C):(1===T&&w.isXMLDoc(d)||(_=w.attrHooks[m.toLowerCase()]||(w.expr.match.bool.test(m)?Pi:void 0)),void 0!==C?null===C?void w.removeAttr(d,m):_&&"set"in _&&void 0!==(x=_.set(d,C,m))?x:(d.setAttribute(m,C+""),C):_&&"get"in _&&null!==(x=_.get(d,m))?x:null==(x=w.find.attr(d,m))?void 0:x)},attrHooks:{type:{set:function(d,m){if(!Ve.radioValue&&"radio"===m&&ke(d,"input")){var C=d.value;return d.setAttribute("type",m),C&&(d.value=C),m}}}},removeAttr:function(d,m){var C,x=0,_=m&&m.match(nt);if(_&&1===d.nodeType)for(;C=_[x++];)d.removeAttribute(C)}}),Pi={set:function(d,m,C){return!1===m?w.removeAttr(d,C):d.setAttribute(C,C),C}},w.each(w.expr.match.bool.source.match(/\w+/g),function(d,m){var C=Zs[m]||w.find.attr;Zs[m]=function(x,_,T){var O,q,H=_.toLowerCase();return T||(q=Zs[H],Zs[H]=O,O=null!=C(x,_,T)?H:null,Zs[H]=q),O}});var mu=/^(?:input|select|textarea|button)$/i,pu=/^(?:a|area)$/i;function Zr(d){return(d.match(nt)||[]).join(" ")}function Ln(d){return d.getAttribute&&d.getAttribute("class")||""}function Li(d){return Array.isArray(d)?d:"string"==typeof d&&d.match(nt)||[]}w.fn.extend({prop:function(d,m){return $o(this,w.prop,d,m,1<arguments.length)},removeProp:function(d){return this.each(function(){delete this[w.propFix[d]||d]})}}),w.extend({prop:function(d,m,C){var x,_,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return 1===T&&w.isXMLDoc(d)||(_=w.propHooks[m=w.propFix[m]||m]),void 0!==C?_&&"set"in _&&void 0!==(x=_.set(d,C,m))?x:d[m]=C:_&&"get"in _&&null!==(x=_.get(d,m))?x:d[m]},propHooks:{tabIndex:{get:function(d){var m=w.find.attr(d,"tabindex");return m?parseInt(m,10):mu.test(d.nodeName)||pu.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Ve.optSelected||(w.propHooks.selected={get:function(d){return null},set:function(d){}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(d){var m,C,x,_,T,O;return Me(d)?this.each(function(q){w(this).addClass(d.call(this,q,Ln(this)))}):(m=Li(d)).length?this.each(function(){if(x=Ln(this),C=1===this.nodeType&&" "+Zr(x)+" "){for(T=0;T<m.length;T++)C.indexOf(" "+(_=m[T])+" ")<0&&(C+=_+" ");O=Zr(C),x!==O&&this.setAttribute("class",O)}}):this},removeClass:function(d){var m,C,x,_,T,O;return Me(d)?this.each(function(q){w(this).removeClass(d.call(this,q,Ln(this)))}):arguments.length?(m=Li(d)).length?this.each(function(){if(x=Ln(this),C=1===this.nodeType&&" "+Zr(x)+" "){for(T=0;T<m.length;T++)for(_=m[T];-1<C.indexOf(" "+_+" ");)C=C.replace(" "+_+" "," ");O=Zr(C),x!==O&&this.setAttribute("class",O)}}):this:this.attr("class","")},toggleClass:function(d,m){var C,x,_,T,O=typeof d,q="string"===O||Array.isArray(d);return Me(d)?this.each(function(H){w(this).toggleClass(d.call(this,H,Ln(this),m),m)}):"boolean"==typeof m&&q?m?this.addClass(d):this.removeClass(d):(C=Li(d),this.each(function(){if(q)for(T=w(this),_=0;_<C.length;_++)T.hasClass(x=C[_])?T.removeClass(x):T.addClass(x);else void 0!==d&&"boolean"!==O||((x=Ln(this))&&et.set(this,"__className__",x),this.setAttribute&&this.setAttribute("class",x||!1===d?"":et.get(this,"__className__")||""))}))},hasClass:function(d){var m,C,x=0;for(m=" "+d+" ";C=this[x++];)if(1===C.nodeType&&-1<(" "+Zr(Ln(C))+" ").indexOf(m))return!0;return!1}});var Mi=/\r/g;w.fn.extend({val:function(d){var m,C,x,_=this[0];return arguments.length?(x=Me(d),this.each(function(T){var O;1===this.nodeType&&(null==(O=x?d.call(this,T,w(this).val()):d)?O="":"number"==typeof O?O+="":Array.isArray(O)&&(O=w.map(O,function(q){return null==q?"":q+""})),(m=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in m&&void 0!==m.set(this,O,"value")||(this.value=O))})):_?(m=w.valHooks[_.type]||w.valHooks[_.nodeName.toLowerCase()])&&"get"in m&&void 0!==(C=m.get(_,"value"))?C:"string"==typeof(C=_.value)?C.replace(Mi,""):C??"":void 0}}),w.extend({valHooks:{option:{get:function(d){return w.find.attr(d,"value")??Zr(w.text(d))}},select:{get:function(d){var m,C,x,_=d.options,T=d.selectedIndex,O="select-one"===d.type,q=O?null:[],H=O?T+1:_.length;for(x=T<0?H:O?T:0;x<H;x++)if(((C=_[x]).selected||x===T)&&!C.disabled&&(!C.parentNode.disabled||!ke(C.parentNode,"optgroup"))){if(m=w(C).val(),O)return m;q.push(m)}return q},set:function(d,m){for(var C,x,_=d.options,T=w.makeArray(m),O=_.length;O--;)((x=_[O]).selected=-1<w.inArray(w.valHooks.option.get(x),T))&&(C=!0);return C||(d.selectedIndex=-1),T}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(d,m){if(Array.isArray(m))return d.checked=-1<w.inArray(w(d).val(),m)}},Ve.checkOn||(w.valHooks[this].get=function(d){return null===d.getAttribute("value")?"on":d.value})});var Yn=be.location,_o={guid:Date.now()},nr=/\?/;w.parseXML=function(d){var m,C;if(!d||"string"!=typeof d)return null;try{m=(new be.DOMParser).parseFromString(d,"text/xml")}catch{}return C=m&&m.getElementsByTagName("parsererror")[0],m&&!C||w.error("Invalid XML: "+(C?w.map(C.childNodes,function(x){return x.textContent}).join("\n"):d)),m};var dc=/^(?:focusinfocus|focusoutblur)$/,gt=function(d){d.stopPropagation()};w.extend(w.event,{trigger:function(d,m,C,x){var _,T,O,q,H,K,ee,ie,Z=[C||Ze],ue=On.call(d,"type")?d.type:d,Pe=On.call(d,"namespace")?d.namespace.split("."):[];if(T=ie=O=C=C||Ze,3!==C.nodeType&&8!==C.nodeType&&!dc.test(ue+w.event.triggered)&&(-1<ue.indexOf(".")&&(ue=(Pe=ue.split(".")).shift(),Pe.sort()),H=ue.indexOf(":")<0&&"on"+ue,(d=d[w.expando]?d:new w.Event(ue,"object"==typeof d&&d)).isTrigger=x?2:3,d.namespace=Pe.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+Pe.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=C),m=null==m?[d]:w.makeArray(m,[d]),ee=w.event.special[ue]||{},x||!ee.trigger||!1!==ee.trigger.apply(C,m))){if(!x&&!ee.noBubble&&!ae(C)){for(dc.test((q=ee.delegateType||ue)+ue)||(T=T.parentNode);T;T=T.parentNode)Z.push(T),O=T;O===(C.ownerDocument||Ze)&&Z.push(O.defaultView||O.parentWindow||be)}for(_=0;(T=Z[_++])&&!d.isPropagationStopped();)ie=T,d.type=1<_?q:ee.bindType||ue,(K=(et.get(T,"events")||Object.create(null))[d.type]&&et.get(T,"handle"))&&K.apply(T,m),(K=H&&T[H])&&K.apply&&ro(T)&&(d.result=K.apply(T,m),!1===d.result&&d.preventDefault());return d.type=ue,x||d.isDefaultPrevented()||ee._default&&!1!==ee._default.apply(Z.pop(),m)||!ro(C)||H&&Me(C[ue])&&!ae(C)&&((O=C[H])&&(C[H]=null),w.event.triggered=ue,d.isPropagationStopped()&&ie.addEventListener(ue,gt),C[ue](),d.isPropagationStopped()&&ie.removeEventListener(ue,gt),w.event.triggered=void 0,O&&(C[H]=O)),d.result}},simulate:function(d,m,C){var x=w.extend(new w.Event,C,{type:d,isSimulated:!0});w.event.trigger(x,null,m)}}),w.fn.extend({trigger:function(d,m){return this.each(function(){w.event.trigger(d,m,this)})},triggerHandler:function(d,m){var C=this[0];if(C)return w.event.trigger(d,m,C,!0)}});var gu=/\[\]$/,Ii=/\r?\n/g,uc=/^(?:submit|button|image|reset|file)$/i,le=/^(?:input|select|textarea|keygen)/i;function Ar(d,m,C,x){var _;if(Array.isArray(m))w.each(m,function(T,O){C||gu.test(d)?x(d,O):Ar(d+"["+("object"==typeof O&&null!=O?T:"")+"]",O,C,x)});else if(C||"object"!==wt(m))x(d,m);else for(_ in m)Ar(d+"["+_+"]",m[_],C,x)}w.param=function(d,m){var C,x=[],_=function(T,O){var q=Me(O)?O():O;x[x.length]=encodeURIComponent(T)+"="+encodeURIComponent(q??"")};if(null==d)return"";if(Array.isArray(d)||d.jquery&&!w.isPlainObject(d))w.each(d,function(){_(this.name,this.value)});else for(C in d)Ar(C,d[C],m,_);return x.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=w.prop(this,"elements");return d?w.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!w(this).is(":disabled")&&le.test(this.nodeName)&&!uc.test(d)&&(this.checked||!_r.test(d))}).map(function(d,m){var C=w(this).val();return null==C?null:Array.isArray(C)?w.map(C,function(x){return{name:m.name,value:x.replace(Ii,"\r\n")}}):{name:m.name,value:C.replace(Ii,"\r\n")}}).get()}});var fc=/%20/g,yn=/#.*$/,Cs=/([?&])_=[^&]*/,hu=/^(.*?):[ \t]*([^\r\n]*)$/gm,mc=/^(?:GET|HEAD)$/,bu=/^\/\//,pc={},mt={},Fi="*/".concat("*"),ws=Ze.createElement("a");function Js(d){return function(m,C){"string"!=typeof m&&(C=m,m="*");var x,_=0,T=m.toLowerCase().match(nt)||[];if(Me(C))for(;x=T[_++];)"+"===x[0]?(x=x.slice(1)||"*",(d[x]=d[x]||[]).unshift(C)):(d[x]=d[x]||[]).push(C)}}function Un(d,m,C,x){var _={},T=d===mt;function O(q){var H;return _[q]=!0,w.each(d[q]||[],function(K,ee){var ie=ee(m,C,x);return"string"!=typeof ie||T||_[ie]?T?!(H=ie):void 0:(m.dataTypes.unshift(ie),O(ie),!1)}),H}return O(m.dataTypes[0])||!_["*"]&&O("*")}function Cn(d,m){var C,x,_=w.ajaxSettings.flatOptions||{};for(C in m)void 0!==m[C]&&((_[C]?d:x||(x={}))[C]=m[C]);return x&&w.extend(!0,d,x),d}ws.href=Yn.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Yn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Yn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,m){return m?Cn(Cn(d,w.ajaxSettings),m):Cn(w.ajaxSettings,d)},ajaxPrefilter:Js(pc),ajaxTransport:Js(mt),ajax:function(d,m){"object"==typeof d&&(m=d,d=void 0);var C,x,_,T,O,q,H,K,ee,ie,Z=w.ajaxSetup({},m=m||{}),ue=Z.context||Z,Pe=Z.context&&(ue.nodeType||ue.jquery)?w(ue):w.event,lt=w.Deferred(),B=w.Callbacks("once memory"),en=Z.statusCode||{},fn={},sn={},No="canceled",Fe={readyState:0,getResponseHeader:function(kt){var It;if(H){if(!T)for(T={};It=hu.exec(_);)T[It[1].toLowerCase()+" "]=(T[It[1].toLowerCase()+" "]||[]).concat(It[2]);It=T[kt.toLowerCase()+" "]}return null==It?null:It.join(", ")},getAllResponseHeaders:function(){return H?_:null},setRequestHeader:function(kt,It){return null==H&&(kt=sn[kt.toLowerCase()]=sn[kt.toLowerCase()]||kt,fn[kt]=It),this},overrideMimeType:function(kt){return null==H&&(Z.mimeType=kt),this},statusCode:function(kt){var It;if(kt)if(H)Fe.always(kt[Fe.status]);else for(It in kt)en[It]=[en[It],kt[It]];return this},abort:function(kt){var It=kt||No;return C&&C.abort(It),Sn(0,It),this}};if(lt.promise(Fe),Z.url=((d||Z.url||Yn.href)+"").replace(bu,Yn.protocol+"//"),Z.type=m.method||m.type||Z.method||Z.type,Z.dataTypes=(Z.dataType||"*").toLowerCase().match(nt)||[""],null==Z.crossDomain){q=Ze.createElement("a");try{q.href=Z.url,q.href=q.href,Z.crossDomain=ws.protocol+"//"+ws.host!=q.protocol+"//"+q.host}catch{Z.crossDomain=!0}}if(Z.data&&Z.processData&&"string"!=typeof Z.data&&(Z.data=w.param(Z.data,Z.traditional)),Un(pc,Z,m,Fe),H)return Fe;for(ee in(K=w.event&&Z.global)&&0==w.active++&&w.event.trigger("ajaxStart"),Z.type=Z.type.toUpperCase(),Z.hasContent=!mc.test(Z.type),x=Z.url.replace(yn,""),Z.hasContent?Z.data&&Z.processData&&0===(Z.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Z.data=Z.data.replace(fc,"+")):(ie=Z.url.slice(x.length),Z.data&&(Z.processData||"string"==typeof Z.data)&&(x+=(nr.test(x)?"&":"?")+Z.data,delete Z.data),!1===Z.cache&&(x=x.replace(Cs,"$1"),ie=(nr.test(x)?"&":"?")+"_="+_o.guid+++ie),Z.url=x+ie),Z.ifModified&&(w.lastModified[x]&&Fe.setRequestHeader("If-Modified-Since",w.lastModified[x]),w.etag[x]&&Fe.setRequestHeader("If-None-Match",w.etag[x])),(Z.data&&Z.hasContent&&!1!==Z.contentType||m.contentType)&&Fe.setRequestHeader("Content-Type",Z.contentType),Fe.setRequestHeader("Accept",Z.dataTypes[0]&&Z.accepts[Z.dataTypes[0]]?Z.accepts[Z.dataTypes[0]]+("*"!==Z.dataTypes[0]?", "+Fi+"; q=0.01":""):Z.accepts["*"]),Z.headers)Fe.setRequestHeader(ee,Z.headers[ee]);if(Z.beforeSend&&(!1===Z.beforeSend.call(ue,Fe,Z)||H))return Fe.abort();if(No="abort",B.add(Z.complete),Fe.done(Z.success),Fe.fail(Z.error),C=Un(mt,Z,m,Fe)){if(Fe.readyState=1,K&&Pe.trigger("ajaxSend",[Fe,Z]),H)return Fe;Z.async&&0<Z.timeout&&(O=be.setTimeout(function(){Fe.abort("timeout")},Z.timeout));try{H=!1,C.send(fn,Sn)}catch(kt){if(H)throw kt;Sn(-1,kt)}}else Sn(-1,"No Transport");function Sn(kt,It,sr,so){var ao,xs,Mn,bo,Jr,io=It;H||(H=!0,O&&be.clearTimeout(O),C=void 0,_=so||"",Fe.readyState=0<kt?4:0,ao=200<=kt&&kt<300||304===kt,sr&&(bo=function(xt,qt,kn){for(var Ko,_n,st,zt,Xt=xt.contents,$t=xt.dataTypes;"*"===$t[0];)$t.shift(),void 0===Ko&&(Ko=xt.mimeType||qt.getResponseHeader("Content-Type"));if(Ko)for(_n in Xt)if(Xt[_n]&&Xt[_n].test(Ko)){$t.unshift(_n);break}if($t[0]in kn)st=$t[0];else{for(_n in kn){if(!$t[0]||xt.converters[_n+" "+$t[0]]){st=_n;break}zt||(zt=_n)}st=st||zt}if(st)return st!==$t[0]&&$t.unshift(st),kn[st]}(Z,Fe,sr)),!ao&&-1<w.inArray("script",Z.dataTypes)&&w.inArray("json",Z.dataTypes)<0&&(Z.converters["text script"]=function(){}),bo=function(xt,qt,kn,Ko){var _n,st,zt,Xt,$t,Ao={},Es=xt.dataTypes.slice();if(Es[1])for(zt in xt.converters)Ao[zt.toLowerCase()]=xt.converters[zt];for(st=Es.shift();st;)if(xt.responseFields[st]&&(kn[xt.responseFields[st]]=qt),!$t&&Ko&&xt.dataFilter&&(qt=xt.dataFilter(qt,xt.dataType)),$t=st,st=Es.shift())if("*"===st)st=$t;else if("*"!==$t&&$t!==st){if(!(zt=Ao[$t+" "+st]||Ao["* "+st]))for(_n in Ao)if((Xt=_n.split(" "))[1]===st&&(zt=Ao[$t+" "+Xt[0]]||Ao["* "+Xt[0]])){!0===zt?zt=Ao[_n]:!0!==Ao[_n]&&(st=Xt[0],Es.unshift(Xt[1]));break}if(!0!==zt)if(zt&&xt.throws)qt=zt(qt);else try{qt=zt(qt)}catch(ar){return{state:"parsererror",error:zt?ar:"No conversion from "+$t+" to "+st}}}return{state:"success",data:qt}}(Z,bo,Fe,ao),ao?(Z.ifModified&&((Jr=Fe.getResponseHeader("Last-Modified"))&&(w.lastModified[x]=Jr),(Jr=Fe.getResponseHeader("etag"))&&(w.etag[x]=Jr)),204===kt||"HEAD"===Z.type?io="nocontent":304===kt?io="notmodified":(io=bo.state,xs=bo.data,ao=!(Mn=bo.error))):(Mn=io,!kt&&io||(io="error",kt<0&&(kt=0))),Fe.status=kt,Fe.statusText=(It||io)+"",ao?lt.resolveWith(ue,[xs,io,Fe]):lt.rejectWith(ue,[Fe,io,Mn]),Fe.statusCode(en),en=void 0,K&&Pe.trigger(ao?"ajaxSuccess":"ajaxError",[Fe,Z,ao?xs:Mn]),B.fireWith(ue,[Fe,io]),K&&(Pe.trigger("ajaxComplete",[Fe,Z]),--w.active||w.event.trigger("ajaxStop")))}return Fe},getJSON:function(d,m,C){return w.get(d,m,C,"json")},getScript:function(d,m){return w.get(d,void 0,m,"script")}}),w.each(["get","post"],function(d,m){w[m]=function(C,x,_,T){return Me(x)&&(T=T||_,_=x,x=void 0),w.ajax(w.extend({url:C,type:m,dataType:T,data:x,success:_},w.isPlainObject(C)&&C))}}),w.ajaxPrefilter(function(d){var m;for(m in d.headers)"content-type"===m.toLowerCase()&&(d.contentType=d.headers[m]||"")}),w._evalUrl=function(d,m,C){return w.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(x){w.globalEval(x,m,C)}})},w.fn.extend({wrapAll:function(d){var m;return this[0]&&(Me(d)&&(d=d.call(this[0])),m=w(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var C=this;C.firstElementChild;)C=C.firstElementChild;return C}).append(this)),this},wrapInner:function(d){return Me(d)?this.each(function(m){w(this).wrapInner(d.call(this,m))}):this.each(function(){var m=w(this),C=m.contents();C.length?C.wrapAll(d):m.append(d)})},wrap:function(d){var m=Me(d);return this.each(function(C){w(this).wrapAll(m?d.call(this,C):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(d){return!w.expr.pseudos.visible(d)},w.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new be.XMLHttpRequest}catch{}};var vu={0:200,1223:204},ea=w.ajaxSettings.xhr();Ve.cors=!!ea&&"withCredentials"in ea,Ve.ajax=ea=!!ea,w.ajaxTransport(function(d){var m,C;if(Ve.cors||ea&&!d.crossDomain)return{send:function(x,_){var T,O=d.xhr();if(O.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(T in d.xhrFields)O[T]=d.xhrFields[T];for(T in d.mimeType&&O.overrideMimeType&&O.overrideMimeType(d.mimeType),d.crossDomain||x["X-Requested-With"]||(x["X-Requested-With"]="XMLHttpRequest"),x)O.setRequestHeader(T,x[T]);m=function(q){return function(){m&&(m=C=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,"abort"===q?O.abort():"error"===q?"number"!=typeof O.status?_(0,"error"):_(O.status,O.statusText):_(vu[O.status]||O.status,O.statusText,"text"!==(O.responseType||"text")||"string"!=typeof O.responseText?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=m(),C=O.onerror=O.ontimeout=m("error"),void 0!==O.onabort?O.onabort=C:O.onreadystatechange=function(){4===O.readyState&&be.setTimeout(function(){m&&C()})},m=m("abort");try{O.send(d.hasContent&&d.data||null)}catch(q){if(m)throw q}},abort:function(){m&&m()}}}),w.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return w.globalEval(d),d}}}),w.ajaxPrefilter("script",function(d){void 0===d.cache&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),w.ajaxTransport("script",function(d){var m,C;if(d.crossDomain||d.scriptAttrs)return{send:function(x,_){m=w("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",C=function(T){m.remove(),C=null,T&&_("error"===T.type?404:200,T.type)}),Ze.head.appendChild(m[0])},abort:function(){C&&C()}}});var ta,ji=[],Jt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=ji.pop()||w.expando+"_"+_o.guid++;return this[d]=!0,d}}),w.ajaxPrefilter("json jsonp",function(d,m,C){var x,_,T,O=!1!==d.jsonp&&(Jt.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(d.data)&&"data");if(O||"jsonp"===d.dataTypes[0])return x=d.jsonpCallback=Me(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,O?d[O]=d[O].replace(Jt,"$1"+x):!1!==d.jsonp&&(d.url+=(nr.test(d.url)?"&":"?")+d.jsonp+"="+x),d.converters["script json"]=function(){return T||w.error(x+" was not called"),T[0]},d.dataTypes[0]="json",_=be[x],be[x]=function(){T=arguments},C.always(function(){void 0===_?w(be).removeProp(x):be[x]=_,d[x]&&(d.jsonpCallback=m.jsonpCallback,ji.push(x)),T&&Me(_)&&_(T[0]),T=_=void 0}),"script"}),Ve.createHTMLDocument=((ta=Ze.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===ta.childNodes.length),w.parseHTML=function(d,m,C){return"string"!=typeof d?[]:("boolean"==typeof m&&(C=m,m=!1),m||(Ve.createHTMLDocument?((x=(m=Ze.implementation.createHTMLDocument("")).createElement("base")).href=Ze.location.href,m.head.appendChild(x)):m=Ze),T=!C&&[],(_=k.exec(d))?[m.createElement(_[1])]:(_=Ma([d],m,T),T&&T.length&&w(T).remove(),w.merge([],_.childNodes)));var x,_,T},w.fn.load=function(d,m,C){var x,_,T,O=this,q=d.indexOf(" ");return-1<q&&(x=Zr(d.slice(q)),d=d.slice(0,q)),Me(m)?(C=m,m=void 0):m&&"object"==typeof m&&(_="POST"),0<O.length&&w.ajax({url:d,type:_||"GET",dataType:"html",data:m}).done(function(H){T=arguments,O.html(x?w("<div>").append(w.parseHTML(H)).find(x):H)}).always(C&&function(H,K){O.each(function(){C.apply(this,T||[H.responseText,K,H])})}),this},w.expr.pseudos.animated=function(d){return w.grep(w.timers,function(m){return d===m.elem}).length},w.offset={setOffset:function(d,m,C){var x,_,T,O,q,H,K=w.css(d,"position"),ee=w(d),ie={};"static"===K&&(d.style.position="relative"),q=ee.offset(),T=w.css(d,"top"),H=w.css(d,"left"),("absolute"===K||"fixed"===K)&&-1<(T+H).indexOf("auto")?(O=(x=ee.position()).top,_=x.left):(O=parseFloat(T)||0,_=parseFloat(H)||0),Me(m)&&(m=m.call(d,C,w.extend({},q))),null!=m.top&&(ie.top=m.top-q.top+O),null!=m.left&&(ie.left=m.left-q.left+_),"using"in m?m.using.call(d,ie):ee.css(ie)}},w.fn.extend({offset:function(d){if(arguments.length)return void 0===d?this:this.each(function(_){w.offset.setOffset(this,d,_)});var m,C,x=this[0];return x?x.getClientRects().length?{top:(m=x.getBoundingClientRect()).top+(C=x.ownerDocument.defaultView).pageYOffset,left:m.left+C.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var d,m,C,x=this[0],_={top:0,left:0};if("fixed"===w.css(x,"position"))m=x.getBoundingClientRect();else{for(m=this.offset(),C=x.ownerDocument,d=x.offsetParent||C.documentElement;d&&(d===C.body||d===C.documentElement)&&"static"===w.css(d,"position");)d=d.parentNode;d&&d!==x&&1===d.nodeType&&((_=w(d).offset()).top+=w.css(d,"borderTopWidth",!0),_.left+=w.css(d,"borderLeftWidth",!0))}return{top:m.top-_.top-w.css(x,"marginTop",!0),left:m.left-_.left-w.css(x,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&"static"===w.css(d,"position");)d=d.offsetParent;return d||xr})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,m){var C="pageYOffset"===m;w.fn[d]=function(x){return $o(this,function(_,T,O){var q;if(ae(_)?q=_:9===_.nodeType&&(q=_.defaultView),void 0===O)return q?q[m]:_[T];q?q.scrollTo(C?q.pageXOffset:O,C?O:q.pageYOffset):_[T]=O},d,x,arguments.length)}}),w.each(["top","left"],function(d,m){w.cssHooks[m]=So(Ve.pixelPosition,function(C,x){if(x)return x=bs(C,m),Vt.test(x)?w(C).position()[m]+"px":x})}),w.each({Height:"height",Width:"width"},function(d,m){w.each({padding:"inner"+d,content:m,"":"outer"+d},function(C,x){w.fn[x]=function(_,T){var O=arguments.length&&(C||"boolean"!=typeof _),q=C||(!0===_||!0===T?"margin":"border");return $o(this,function(H,K,ee){var ie;return ae(H)?0===x.indexOf("outer")?H["inner"+d]:H.document.documentElement["client"+d]:9===H.nodeType?(ie=H.documentElement,Math.max(H.body["scroll"+d],ie["scroll"+d],H.body["offset"+d],ie["offset"+d],ie["client"+d])):void 0===ee?w.css(H,K,q):w.style(H,K,ee,q)},m,O?_:void 0,O)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,m){w.fn[m]=function(C){return this.on(m,C)}}),w.fn.extend({bind:function(d,m,C){return this.on(d,null,m,C)},unbind:function(d,m){return this.off(d,null,m)},delegate:function(d,m,C,x){return this.on(m,d,C,x)},undelegate:function(d,m,C){return 1===arguments.length?this.off(d,"**"):this.off(m,d||"**",C)},hover:function(d,m){return this.on("mouseenter",d).on("mouseleave",m||d)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,m){w.fn[m]=function(C,x){return 0<arguments.length?this.on(m,null,C,x):this.trigger(m)}});var or=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;w.proxy=function(d,m){var C,x,_;if("string"==typeof m&&(C=d[m],m=d,d=C),Me(d))return x=it.call(arguments,2),(_=function(){return d.apply(m||this,x.concat(it.call(arguments)))}).guid=d.guid=d.guid||w.guid++,_},w.holdReady=function(d){d?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=ke,w.isFunction=Me,w.isWindow=ae,w.camelCase=Gt,w.type=wt,w.now=Date.now,w.isNumeric=function(d){var m=w.type(d);return("number"===m||"string"===m)&&!isNaN(d-parseFloat(d))},w.trim=function(d){return null==d?"":(d+"").replace(or,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Gn=be.jQuery,rr=be.$;return w.noConflict=function(d){return be.$===w&&(be.$=rr),d&&be.jQuery===w&&(be.jQuery=Gn),w},typeof Xe>"u"&&(be.jQuery=be.$=w),w}),function(be){be.imageArea=function(Xe,Ge){var Rn,Zt,Vn,On,$e=Xe.options,it=Xe.$image,Kt=Xe.$trigger,xo={},Eo=!0,Te=!0,Ve=[0,0],Me=[0,0],ae={id:Ge,x:0,y:0,z:0,height:0,width:0},xn=function(){Xe.blurAll(),ae.z=100,me()},jt=function(){return ae},wt=function(Ne){it.trigger(Ne,[ae.id,Xe.areas()])},ce=function(Ne){var rt=Ne||window.event||{};rt.cancelBubble=!0,rt.returnValue=!1,rt.stopPropagation&&rt.stopPropagation(),rt.preventDefault&&rt.preventDefault()},w=function(Ne,rt){var ut,Re;switch(Ne){case"start":ut="mousedown",Re="touchstart";break;case"move":ut="mousemove",Re="touchmove";break;case"stop":ut="mouseup",Re="touchend";break;default:return}rt&&jQuery.isFunction(rt)?be(window.document).on(ut,rt).on(Re,rt):be(window.document).off(ut).off(Re)},Bn=function(){Rn.css({cursor:"default",width:ae.width,height:ae.height,left:ae.x,top:ae.y}),Zt.css({backgroundPosition:-ae.x-1+"px "+(-ae.y-1)+"px",cursor:$e.allowMove?"move":"default",width:ae.width-2>0?ae.width-2:0,height:ae.height-2>0?ae.height-2:0,left:ae.x+1,top:ae.y+1}),Vn.css({width:ae.width-2>0?ae.width-2:0,left:ae.x+2,top:ae.y+1})},ke=function(Ne){$e.allowResize&&(Ne?be.each(xo,function(rt,ut){var Re,St,nt=Math.round(ut.width()/2),J=Math.round(ut.height()/2),wr=rt[0],qo=rt[rt.length-1];Re="n"===wr?-J:"s"===wr?ae.height-J-1:Math.round(ae.height/2)-J-1,St="e"===qo?ae.width-nt-1:"w"===qo?-nt:Math.round(ae.width/2)-nt-1,ut.css({display:"block",left:ae.x+St,top:ae.y+Re})}):be(".select-areas-resize-handler").each(function(){be(this).css({display:"none"})}))},Dn=function(Ne){On&&On.css({display:Ne?"block":"none",left:ae.x+ae.width+1,top:ae.y-On.outerHeight()-1})},Hs=function(Ne){Rn.css({cursor:Ne}),Zt.css({cursor:Ne})},me=function(Ne){switch(Ne){case"startSelection":Xe._refresh(),Bn(),ke(),Dn(!0);break;case"pickSelection":case"pickResizeHandler":ke();break;case"resizeSelection":Bn(),ke(),Hs("crosshair"),Dn(!0);break;case"moveSelection":Bn(),ke(),Hs("move"),Dn(!0);break;case"blur":Bn(),ke(),Dn();break;default:Bn(),ke(!0),Dn(!0)}},Jo=function(Ne){ce(Ne),xn(),w("move",po),w("stop",Kn);var rt=k(Ne);Ve[0]=rt[0]-ae.x,Ve[1]=rt[1]-ae.y,me("pickSelection")},xe=function(Ne){ce(Ne),xn();var rt=Ne.target.className.split(" ")[1];"w"===rt[rt.length-1]&&(Me[0]+=ae.width,ae.x=Me[0]-ae.width),"n"===rt[0]&&(Me[1]+=ae.height,ae.y=Me[1]-ae.height),"n"===rt||"s"===rt?Eo=!1:("e"===rt||"w"===rt)&&(Te=!1),w("move",vr),w("stop",Kn),me("pickResizeHandler")},vr=function(Ne){ce(Ne),xn();var rt=k(Ne),ut=rt[1]-Me[1],Re=rt[0]-Me[0];Math.abs(Re)<$e.minSize[0]&&(Re=Re>=0?$e.minSize[0]:-$e.minSize[0]),Math.abs(ut)<$e.minSize[1]&&(ut=ut>=0?$e.minSize[1]:-$e.minSize[1]),(Me[0]+Re<0||Me[0]+Re>it.width())&&(Re=-Re),(Me[1]+ut<0||Me[1]+ut>it.height())&&(ut=-ut),$e.maxSize[0]>$e.minSize[0]&&$e.maxSize[1]>$e.minSize[1]&&(Math.abs(Re)>$e.maxSize[0]&&(Re=Re>=0?$e.maxSize[0]:-$e.maxSize[0]),Math.abs(ut)>$e.maxSize[1]&&(ut=ut>=0?$e.maxSize[1]:-$e.maxSize[1])),Eo&&(ae.width=Re),Te&&(ae.height=ut),$e.aspectRatio&&(Re>0&&ut>0||Re<0&&ut<0?Eo?ut=Math.round(Re/$e.aspectRatio):Re=Math.round(ut*$e.aspectRatio):Eo?ut=-Math.round(Re/$e.aspectRatio):Re=-Math.round(ut*$e.aspectRatio),Me[0]+Re>it.width()&&(Re=it.width()-Me[0],ut=ut>0?Math.round(Re/$e.aspectRatio):-Math.round(Re/$e.aspectRatio)),Me[1]+ut<0&&(ut=-Me[1],Re=Re>0?-Math.round(ut*$e.aspectRatio):Math.round(ut*$e.aspectRatio)),Me[1]+ut>it.height()&&(ut=it.height()-Me[1],Re=Re>0?Math.round(ut*$e.aspectRatio):-Math.round(ut*$e.aspectRatio)),ae.width=Re,ae.height=ut),ae.width<0?(ae.width=Math.abs(ae.width),ae.x=Me[0]-ae.width):ae.x=Me[0],ae.height<0?(ae.height=Math.abs(ae.height),ae.y=Me[1]-ae.height):ae.y=Me[1],wt("changing"),me("resizeSelection")},po=function(Ne){if(ce(Ne),$e.allowMove){xn();var rt=k(Ne);yr({x:rt[0]-Ve[0],y:rt[1]-Ve[1]}),wt("changing")}},yr=function(Ne){ae.x=Ne.x>0?Ne.x+ae.width<it.width()?Ne.x:it.width()-ae.width:0,ae.y=Ne.y>0?Ne.y+ae.height<it.height()?Ne.y:it.height()-ae.height:0,me("moveSelection")},Kn=function(Ne,rt){ce(Ne),function(){be.each(arguments,function(Ne,rt){w(rt)})}("move","stop"),rt&&(ae.x=rt.x,ae.y=rt.y,ae.z=rt.z,ae.width=rt.width,ae.height=rt.height,Bn()),Me[0]=ae.x,Me[1]=ae.y,Eo=!0,Te=!0,wt("changed"),me("releaseSelection")},vt=function(Ne){wt("deleted"),ce(Ne),Zt.remove(),Rn.remove(),Vn.remove(),be.each(xo,function(rt,ut){ut.remove()}),On&&On.remove(),Xe._remove(Ge)},k=function(Ne){var rt=function(Ne){var rt=be(Ne).offset();return[rt.left,rt.top]}(it);Ne.pageX||(Ne.originalEvent&&(Ne=Ne.originalEvent),Ne.changedTouches&&(Ne=Ne.changedTouches[0]),Ne.touches&&(Ne=Ne.touches[0]));var ut=Ne.pageX-rt[0],Re=Ne.pageY-rt[1];return[ut=ut<0?0:ut>it.width()?it.width():ut,Re=Re<0?0:Re>it.height()?it.height():Re]};if(Rn=be("<div id='select-areas-outline_"+jt().id+'\'  class="select-areas-outline"/>').css({opacity:$e.outlineOpacity,position:"absolute"}).insertAfter(Kt),Zt=be("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+jt().id).css({position:"absolute"}).insertAfter(Rn),Vn=be("<div id='select-areas-label-container_"+jt().id+'\'  class="select-areas-label-container"/>').css({position:"absolute"}).insertAfter(Kt),$e.allowResize&&be.each(["nw","n","ne","e","se","s","sw","w"],function(Ne,rt){xo[rt]=be('<div class="select-areas-resize-handler '+rt+" select-areas-resize-handler_"+jt().id+'"/>').css({opacity:.5,position:"absolute",cursor:rt+"-resize"}).insertAfter(Zt).mousedown(xe).bind("touchstart",xe)}),$e.allowDelete){var Cr=function(Ne){return Ne.click(vt).bind("touchstart",vt).bind("tap",vt),Ne};On=Cr(be("<div id='select-areas-delete_"+jt().id+'\'  class="delete-area" />')).append(Cr(be('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(Zt)}return $e.allowMove&&Zt.mousedown(Jo).bind("touchstart",Jo),xn(),{getData:jt,startSelection:function(Ne){ce(Ne),ae.width=$e.minSize[0],ae.height=$e.minSize[1],xn(),w("move",vr),w("stop",Kn),(Me=k(Ne))[0]+ae.width>it.width()&&(Me[0]=it.width()-ae.width),Me[1]+ae.height>it.height()&&(Me[1]=it.height()-ae.height),ae.x=Me[0],ae.y=Me[1],me("startSelection")},deleteSelection:vt,options:$e,blur:function(){ae.z=0,me("blur")},focus:xn,nudge:function(Ne){Ne.x=ae.x,Ne.y=ae.y,Ne.d&&(Ne.y=ae.y+Ne.d),Ne.u&&(Ne.y=ae.y-Ne.u),Ne.l&&(Ne.x=ae.x-Ne.l),Ne.r&&(Ne.x=ae.x+Ne.r),yr(Ne),wt("changed")},set:function(Ne,rt){ae=be.extend(ae,Ne),Me[0]=ae.x,Me[1]=ae.y,rt||wt("changed")},contains:function(Ne){return Ne.x>=ae.x&&Ne.x<=ae.x+ae.width&&Ne.y>=ae.y&&Ne.y<=ae.y+ae.height}}},be.imageSelectAreas=function(){},be.imageSelectAreas.prototype.init=function(Xe,Ge){var $e=this;this.options=be.extend({allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null},Ge),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=be(Xe),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=be("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=be('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=be("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),be.each(this.options.areas,function(Kt,Rn){$e._add(Rn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(be.proxy(this.newArea,this)).on("touchstart",be.proxy(this.newArea,this)),this.options.allowNudge&&be("html").keydown(function(Kt){var Vn,Zt={37:"l",38:"u",39:"r",40:"d"}[Kt.which];if(Zt&&($e._eachArea(function(On){if(100===On.getData().z)return Vn=On,!1}),Vn)){var xo={};xo[Zt]=1,Vn.nudge(xo)}})},be.imageSelectAreas.prototype._refresh=function(){var Xe=this.areas().length;this.$overlay.css({display:Xe?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},be.imageSelectAreas.prototype._eachArea=function(Xe){be.each(this._areas,function(Ge,$e){if($e)return Xe($e,Ge)})},be.imageSelectAreas.prototype._remove=function(Xe){delete this._areas[Xe],this._refresh()},be.imageSelectAreas.prototype.remove=function(Xe){this._areas[Xe]&&this._areas[Xe].deleteSelection()},be.imageSelectAreas.prototype.newArea=function(Xe){var Ge=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function($e,it){Ge=Math.max(Ge,parseInt(it,10))}),this._areas[Ge+=1]=be.imageArea(this,Ge),Xe&&this._areas[Ge].startSelection(Xe)),Ge},be.imageSelectAreas.prototype.set=function(Xe,Ge,$e){this._areas[Xe]&&(Ge.id=Xe,this._areas[Xe].set(Ge,$e),this._areas[Xe].focus())},be.imageSelectAreas.prototype._add=function(Xe,Ge){var $e=this.newArea();this.set($e,Xe,Ge)},be.imageSelectAreas.prototype.add=function(Xe){var Ge=this;this.blurAll(),be.isArray(Xe)?be.each(Xe,function($e,it){Ge._add(it)}):this._add(Xe),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},be.imageSelectAreas.prototype.reset=function(){var Xe=this;this._eachArea(function(Ge,$e){Xe.remove($e)}),this._refresh()},be.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},be.imageSelectAreas.prototype.areas=function(){var Xe=[];return this._eachArea(function(Ge){Xe.push(Ge.getData())}),Xe},be.imageSelectAreas.prototype.relativeAreas=function(){for(var Xe=this.areas(),Ge=[],$e=this.ratio,it=function(Rn){return Math.floor(Rn/$e)},Kt=0;Kt<Xe.length;Kt++)Ge[Kt]=be.extend({},Xe[Kt]),Ge[Kt].x=it(Ge[Kt].x),Ge[Kt].y=it(Ge[Kt].y),Ge[Kt].width=it(Ge[Kt].width),Ge[Kt].height=it(Ge[Kt].height);return Ge},be.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(Xe){Xe.blur()})},be.imageSelectAreas.prototype.contains=function(Xe){var Ge=!1;return this._eachArea(function($e){if($e.contains(Xe))return Ge=!0,!1}),Ge},be.selectAreas=function(Xe,Ge){var $e=be(Xe);if(!$e.data("mainImageSelectAreas")){var it=new be.imageSelectAreas;it.init(Xe,Ge),$e.data("mainImageSelectAreas",it),$e.trigger("loaded")}return $e.data("mainImageSelectAreas")},be.fn.selectAreas=function(Xe){if(be.imageSelectAreas.prototype[Xe]){var Ge=be.imageSelectAreas.prototype[Xe].apply(be.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Ge>"u"?this:Ge}if("object"==typeof Xe||!Xe)return this.each(function(){var $e=this,it=new Image;it.onload=function(){be.selectAreas($e,Xe)},it.src=$e.src}),this;be.error("Method "+Xe+" does not exist on jQuery.selectAreas")}}(jQuery);
!function(){"use strict";var bt=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},Yt=function(t){return{eq:t}},Qt=Yt(function(t,e){return t===e}),Wt=function(t){return Yt(function(e,n){if(e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t.eq(e[o],n[o]))return!1;return!0})},ie=function(t){return Yt(function(e,n){var l,u,f,r=Object.keys(e),o=Object.keys(n);if(!(l=Qt,u=Wt(l),f=function(u){return Array.prototype.slice.call(u).sort(undefined)},Yt(function(p,b){return u.eq(f(p),f(b))})).eq(r,o))return!1;for(var s=r.length,a=0;a<s;a++){var i=r[a];if(!t.eq(e[i],n[i]))return!1}return!0})},Xe=Yt(function(t,e){if(t===e)return!0;var n=bt(t);return n===bt(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?Wt(Xe).eq(t,e):"object"===n&&ie(Xe).eq(t,e))});const Rn=Object.getPrototypeOf,Je=(t,e,n)=>{var r;return!!n(t,e.prototype)||(null===(r=t.constructor)||void 0===r?void 0:r.name)===e.name},Kn=t=>e=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&Je(n,String,(o,s)=>s.isPrototypeOf(o))?"string":r})(e)===t,wr=t=>e=>typeof e===t,On=t=>e=>t===e,Er=(t,e)=>Kt(t)&&Je(t,e,(n,r)=>Rn(n)===r),Rt=Kn("string"),Kt=Kn("object"),It=t=>Er(t,Object),it=Kn("array"),Jt=On(null),En=wr("boolean"),Me=On(void 0),we=t=>null==t,ct=t=>!we(t),be=wr("function"),x=wr("number"),Un=(t,e)=>{if(it(t)){for(let n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}return!1},_t=()=>{},Bn=(t,e)=>(...n)=>t(e.apply(null,n)),Fs=(t,e)=>n=>t(e(n)),mt=t=>()=>t,pe=t=>t,Jr=(t,e)=>t===e;function Et(t,...e){return(...n)=>{const r=e.concat(n);return t.apply(null,r)}}const yo=t=>e=>!t(e),mr=t=>()=>{throw new Error(t)},Co=t=>t(),Xn=t=>{t()},Ce=mt(!1),je=mt(!0);class k{constructor(e,n){this.tag=e,this.value=n}static some(e){return new k(!0,e)}static none(){return k.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?k.some(e(this.value)):k.none()}bind(e){return this.tag?e(this.value):k.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:k.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return ct(e)?k.some(e):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const xo=Array.prototype.slice,Tt=Array.prototype.indexOf,oe=Array.prototype.push,ue=(t,e)=>Tt.call(t,e),Ot=(t,e)=>ue(t,e)>-1,_e=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},re=(t,e)=>{const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e(t[o],o);return r},Z=(t,e)=>{for(let n=0,r=t.length;n<r;n++)e(t[n],n)},wo=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Ur=(t,e)=>{const n=[],r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];(e(a,o)?n:r).push(a)}return{pass:n,fail:r}},Vt=(t,e)=>{const n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];e(s,r)&&n.push(s)}return n},$o=(t,e,n)=>(wo(t,(r,o)=>{n=e(n,r,o)}),n),yn=(t,e,n)=>(Z(t,(r,o)=>{n=e(n,r,o)}),n),Hr=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++){const s=t[r];if(e(s,r))return k.some(s);if(n(s,r))break}return k.none()},Ge=(t,e)=>Hr(t,e,Ce),js=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return k.some(n);return k.none()},tc=t=>{const e=[];for(let n=0,r=t.length;n<r;++n){if(!it(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);oe.apply(e,t[n])}return e},Qe=(t,e)=>tc(re(t,e)),or=(t,e)=>{for(let n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0},to=t=>{const e=xo.call(t,0);return e.reverse(),e},ne=(t,e)=>Vt(t,n=>!Ot(e,n)),Dn=(t,e)=>{const n={};for(let r=0,o=t.length;r<o;r++){const s=t[r];n[String(s)]=e(s,r)}return n},Wo=(t,e)=>{const n=xo.call(t,0);return n.sort(e),n},zs=(t,e)=>e>=0&&e<t.length?k.some(t[e]):k.none(),Sn=t=>zs(t,0),eo=t=>zs(t,t.length-1),Cn=be(Array.from)?Array.from:t=>xo.call(t),Yn=(t,e)=>{for(let n=0;n<t.length;n++){const r=e(t[n],n);if(r.isSome())return r}return k.none()},Eo=(t,e)=>{const n=[],r=be(e)?o=>_e(n,s=>e(s,o)):o=>Ot(n,o);for(let o=0,s=t.length;o<s;o++){const a=t[o];r(a)||n.push(a)}return n},an=Object.keys,cu=Object.hasOwnProperty,xe=(t,e)=>{const n=an(t);for(let r=0,o=n.length;r<o;r++){const s=n[r];e(t[s],s)}},ds=(t,e)=>ec(t,(n,r)=>({k:r,v:e(n,r)})),ec=(t,e)=>{const n={};return xe(t,(r,o)=>{const s=e(r,o);n[s.k]=s.v}),n},So=t=>(e,n)=>{t[n]=e},ko=(t,e,n,r)=>{xe(t,(o,s)=>{(e(o,s)?n:r)(o,s)})},_o=(t,e)=>{const n={};return ko(t,e,So(n),_t),n},No=(t,e)=>{const n=[];return xe(t,(r,o)=>{n.push(e(r,o))}),n},Ba=t=>No(t,pe),Te=(t,e)=>Ut(t,e)?k.from(t[e]):k.none(),Ut=(t,e)=>cu.call(t,e),un=(t,e)=>Ut(t,e)&&null!=t[e],Da=t=>{const e={};return Z(t,n=>{e[n]={}}),an(e)},nc=t=>void 0!==t.length,Pa=Array.isArray,Us=(t,e,n)=>{if(!t)return!1;if(n=n||t,nc(t)){for(let r=0,o=t.length;r<o;r++)if(!1===e.call(n,t[r],r,t))return!1}else for(const r in t)if(Ut(t,r)&&!1===e.call(n,t[r],r,t))return!1;return!0},Ao=(t,e)=>{const n=[];return Us(t,(r,o)=>{n.push(e(r,o,t))}),n},qr=(t,e)=>{const n=[];return Us(t,(r,o)=>{e&&!e(r,o,t)||n.push(r)}),n},us=(t,e,n,r)=>{let o=Me(n)?t[0]:n;for(let s=0;s<t.length;s++)o=e.call(r,o,t[s],s);return o},Hs=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t))return r;return-1},Vo=t=>t[t.length-1],$r=t=>{let e,n=!1;return(...r)=>(n||(n=!0,e=t.apply(null,r)),e)},rc=()=>La(0,0),La=(t,e)=>({major:t,minor:e}),qs={nu:La,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?rc():((r,o)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const u=i[c];if(u.test(l))return u}})(r,o);if(!s)return{major:0,minor:0};const a=i=>Number(o.replace(s,"$"+i));return La(a(1),a(2))})(t,n)},unknown:rc},oc=(t,e)=>{const n=String(e).toLowerCase();return Ge(t,r=>r.search(n))},Ai=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,Ko=(t,e)=>Ve(t,e)?t.substring(e.length):t,fn=(t,e,n=0,r)=>{const o=t.indexOf(e,n);return-1!==o&&(!!Me(r)||o+e.length<=r)},Ve=(t,e)=>Ai(t,e,0),$s=(t,e)=>Ai(t,e,t.length-e.length),fs=t=>e=>e.replace(t,""),Xo=fs(/^\s+|\s+$/g),du=fs(/^\s+/g),ms=fs(/\s+$/g),Sr=t=>t.length>0,ps=t=>!Sr(t),Ws=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?k.none():k.some(n)},Ma=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,kr=t=>e=>fn(e,t),uu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>fn(t,"edge/")&&fn(t,"chrome")&&fn(t,"safari")&&fn(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ma],search:t=>fn(t,"chrome")&&!fn(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>fn(t,"msie")||fn(t,"trident")},{name:"Opera",versionRegexes:[Ma,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:kr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:kr("firefox")},{name:"Safari",versionRegexes:[Ma,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(fn(t,"safari")||fn(t,"mobile/"))&&fn(t,"applewebkit")}],fu=[{name:"Windows",search:kr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>fn(t,"iphone")||fn(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:kr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:kr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:kr("linux"),versionRegexes:[]},{name:"Solaris",search:kr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:kr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:kr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ti={browsers:mt(uu),oses:mt(fu)},Ia="Chromium",pr="Firefox",Vs=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isEdge:r("Edge"),isChromium:r(Ia),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(pr),isSafari:r("Safari")}},gs=()=>Vs({current:void 0,version:qs.unknown()}),sc=Vs,ac=(mt("Edge"),mt(Ia),mt("IE"),mt("Opera"),mt(pr),mt("Safari"),"Windows"),ic="Android",Ks="Solaris",Di="FreeBSD",gr="ChromeOS",Pi=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isWindows:r(ac),isiOS:r("iOS"),isAndroid:r(ic),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(Ks),isFreeBSD:r(Di),isChromeOS:r(gr)}},Xs=()=>Pi({current:void 0,version:qs.unknown()}),mu=Pi,pu=(mt(ac),mt("iOS"),mt(ic),mt("Linux"),mt("macOS"),mt(Ks),mt(Di),mt(gr),t=>window.matchMedia(t).matches);let Go=$r(()=>((t,e,n)=>{const r=Ti.browsers(),o=Ti.oses(),s=e.bind(l=>{return c=r,Yn(l.brands,f=>{const p=f.brand.toLowerCase();return Ge(c,b=>{var g;return p===(null===(g=b.brand)||void 0===g?void 0:g.toLowerCase())}).map(b=>({current:b.name,version:qs.nu(parseInt(f.version,10),0)}))});var c}).orThunk(()=>{return oc(r,c=t).map(u=>{const f=qs.detect(u.versionRegexes,c);return{current:u.name,version:f}});var c}).fold(gs,sc),a=(l=o,c=t,oc(l,c).map(u=>{const f=qs.detect(u.versionRegexes,c);return{current:u.name,version:f}})).fold(Xs,mu),i=((l,c,u,f)=>{const p=l.isiOS()&&!0===/ipad/i.test(u),b=l.isiOS()&&!p,g=l.isiOS()||l.isAndroid(),v=g||f("(pointer:coarse)"),h=p||!b&&g&&f("(min-device-width:768px)"),C=b||g&&!h,E=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(u),S=!C&&!h&&!E;return{isiPad:mt(p),isiPhone:mt(b),isTablet:mt(h),isPhone:mt(C),isTouch:mt(v),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:mt(E),isDesktop:mt(S)}})(a,s,t,n);var l,c;return{browser:s,os:a,deviceType:i}})(window.navigator.userAgent,k.from(window.navigator.userAgentData),pu));const Pn=()=>Go(),Li=window.navigator.userAgent,Mi=Pn(),Gn=Mi.browser,_r=Mi.os,no=Mi.deviceType,lc=-1!==Li.indexOf("Windows Phone"),ge={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Gn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Gn.isIE(),windowsPhone:lc,browser:{current:Gn.current,version:Gn.version,isChromium:Gn.isChromium,isEdge:Gn.isEdge,isFirefox:Gn.isFirefox,isIE:Gn.isIE,isOpera:Gn.isOpera,isSafari:Gn.isSafari},os:{current:_r.current,version:_r.version,isAndroid:_r.isAndroid,isChromeOS:_r.isChromeOS,isFreeBSD:_r.isFreeBSD,isiOS:_r.isiOS,isLinux:_r.isLinux,isMacOS:_r.isMacOS,isSolaris:_r.isSolaris,isWindows:_r.isWindows},deviceType:{isDesktop:no.isDesktop,isiPad:no.isiPad,isiPhone:no.isiPhone,isPhone:no.isPhone,isTablet:no.isTablet,isTouch:no.isTouch,isWebView:no.isWebView}},gu=/^\s*|\s*$/g,Ii=t=>we(t)?"":(""+t).replace(gu,""),cc=function(t,e,n,r){r=r||this,t&&(n&&(t=t[n]),Us(t,(o,s)=>!1!==e.call(r,o,s,n)&&(cc(o,e,n,r),!0)))},lt={trim:Ii,isArray:Pa,is:(t,e)=>e?!("array"!==e||!Pa(t))||typeof t===e:void 0!==t,toArray:t=>{if(Pa(t))return t;{const e=[];for(let n=0,r=t.length;n<r;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const r=Rt(t)?t.split(e||","):t||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:Us,map:Ao,grep:qr,inArray:(t,e)=>{if(t)for(let n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},hasOwn:Ut,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(Ut(r,o)){const s=r[o];void 0!==s&&(t[o]=s)}}return t},walk:cc,resolve:(t,e=window)=>{const n=t.split(".");for(let r=0,o=n.length;r<o&&(e=e[n[r]]);r++);return e},explode:(t,e)=>it(t)?t:""===t?[]:Ao(t.split(e||","),Ii),_addCacheSuffix:t=>{const e=ge.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},To=(t,e,n=Jr)=>t.exists(r=>n(r,e)),dc=(t,e,n=Jr)=>xn(t,e,n).getOr(t.isNone()&&e.isNone()),xn=(t,e,n)=>t.isSome()&&e.isSome()?k.some(n(t.getOrDie(),e.getOrDie())):k.none(),hs=(t,e)=>t?k.some(e):k.none(),hu=typeof window<"u"?window:Function("return this;")(),uc=(t,e)=>((n,r)=>{let o=r??hu;for(let s=0;s<n.length&&null!=o;++s)o=o[n[s]];return o})(t.split("."),e),bu=Object.getPrototypeOf,me=t=>t.dom.nodeName.toLowerCase(),Fi=t=>t.dom.nodeType,bs=t=>e=>Fi(e)===t,Ys=t=>Hn(t)&&(t=>{const e=uc("ownerDocument.defaultView",t);return Kt(t)&&((n=e,((r,o)=>{const s=uc(r,o);if(null==s)throw new Error(r+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(bu(t).constructor.name));var n})(t.dom),Hn=bs(1),wn=bs(3),vu=bs(9),Gs=bs(11),Qs=t=>e=>Hn(e)&&me(e)===t,ji=(t,e,n)=>{if(!(Rt(n)||En(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Ze=(t,e,n)=>{ji(t.dom,e,n)},ro=(t,e)=>{const n=t.dom;xe(e,(r,o)=>{ji(n,o,r)})},Qn=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},oo=(t,e)=>k.from(Qn(t,e)),d=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},m=(t,e)=>{t.dom.removeAttribute(e)},y=t=>yn(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),w=(t,e)=>{const n=Qn(t,e);return void 0===n||""===n?[]:n.split(" ")},_=t=>void 0!==t.dom.classList,T=t=>w(t,"class"),O=(t,e)=>((n,r,o)=>{const s=w(n,r).concat([o]);return Ze(n,r,s.join(" ")),!0})(t,"class",e),q=(t,e)=>((n,r,o)=>{const s=Vt(w(n,r),a=>a!==o);return s.length>0?Ze(n,r,s.join(" ")):m(n,r),!1})(t,"class",e),H=(t,e)=>{_(t)?t.dom.classList.add(e):O(t,e)},K=t=>{0===(_(t)?t.dom.classList:T(t)).length&&m(t,"class")},tt=(t,e)=>{_(t)?t.dom.classList.remove(e):q(t,e),K(t)},at=(t,e)=>_(t)&&t.dom.classList.contains(e),J=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},ut=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,t),new Error(r)}return J(n.childNodes[0])},Mt=(t,e)=>{const n=(e||document).createElement(t);return J(n)},le=(t,e)=>{const n=(e||document).createTextNode(t);return J(n)},D=J,mn=(t,e)=>{const n=[],r=s=>(n.push(s),e(s));let o=e(t);do{o=o.bind(r)}while(o.isSome());return n},ln=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},Nr=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,zt=(t,e)=>t.dom===e.dom,kn=(t,e)=>{const n=t.dom,r=e.dom;return n!==r&&n.contains(r)},Ne=t=>D(t.dom.ownerDocument),Le=t=>vu(t)?t:Ne(t),so=t=>D(Le(t).dom.defaultView),sr=t=>k.from(t.dom.parentNode).map(D),ar=t=>k.from(t.dom.parentElement).map(D),vs=(t,e)=>{const n=be(e)?e:Ce;let r=t.dom;const o=[];for(;null!=r.parentNode;){const s=r.parentNode,a=D(s);if(o.push(a),!0===n(a))break;r=s}return o},Ln=t=>k.from(t.dom.previousSibling).map(D),hr=t=>k.from(t.dom.nextSibling).map(D),Qo=t=>to(mn(t,Ln)),ir=t=>mn(t,hr),Ee=t=>re(t.dom.childNodes,D),$e=(t,e)=>k.from(t.dom.childNodes[e]).map(D),_n=t=>$e(t,0),Wr=t=>$e(t,t.dom.childNodes.length-1),Nn=t=>t.dom.childNodes.length,se=t=>Gs(t)&&ct(t.dom.host),Ie=t=>D(t.dom.getRootNode()),Ye=t=>se(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return D(n)})(Le(t)),We=t=>D(t.dom.host),Ar=t=>{if(ct(t.target)){const e=D(t.target);if(Hn(e)&&ys(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Sn(n)}}return k.from(t.target)},ys=t=>ct(t.dom.shadowRoot),ao=t=>{const e=wn(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(r=>{const o=Ie(r);return se(o)?k.some(o):k.none()})(D(e)).fold(()=>n.body.contains(e),Fs(ao,We))};var Ro=(t,e,n,r,o)=>t(n,r)?k.some(n):be(o)&&o(n)?k.none():e(n,r,o);const Tr=(t,e,n)=>{let r=t.dom;const o=be(n)?n:Ce;for(;r.parentNode;){r=r.parentNode;const s=D(r);if(e(s))return k.some(s);if(o(s))break}return k.none()},Zn=(t,e,n)=>Ro((r,o)=>o(r),Tr,t,e,n),ja=(t,e)=>{const n=r=>{for(let o=0;o<r.childNodes.length;o++){const s=D(r.childNodes[o]);if(e(s))return k.some(s);const a=n(r.childNodes[o]);if(a.isSome())return a}return k.none()};return n(t.dom)},io=(t,e,n)=>Tr(t,r=>ln(r,e),n),Zo=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return Nr(o)?k.none():k.from(o.querySelector(n)).map(D)})(e,t),lo=(t,e,n)=>Ro((r,o)=>ln(r,o),io,t,e,n),co=(t,e=!1)=>{return ao(t)?t.dom.isContentEditable:(n=t,lo(n,"[contenteditable]")).fold(mt(e),r=>"true"===za(r));var n},za=t=>t.dom.contentEditable,Jo=t=>void 0!==t.style&&be(t.style.getPropertyValue),Ua=(t,e,n)=>{if(!Rt(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Jo(t)&&t.style.setProperty(e,n)},Ha=(t,e,n)=>{Ua(t.dom,e,n)},Zs=(t,e)=>{const n=t.dom;xe(e,(r,o)=>{Ua(n,o,r)})},L=(t,e)=>{const n=t.dom,r=window.getComputedStyle(n).getPropertyValue(e);return""!==r||ao(t)?r:W(n,e)},W=(t,e)=>Jo(t)?t.style.getPropertyValue(e):"",et=(t,e)=>{const r=W(t.dom,e);return k.from(r).filter(o=>o.length>0)},nt=t=>{const e={},n=t.dom;if(Jo(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);e[o]=n.style[o]}return e},ft=(t,e)=>{var n,r;r=e,Jo(n=t.dom)&&n.style.removeProperty(r),To(oo(t,"style").map(Xo),"")&&m(t,"style")},Bt=(t,e)=>{sr(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Ft=(t,e)=>{hr(t).fold(()=>{sr(t).each(n=>{St(n,e)})},n=>{Bt(n,e)})},Zt=(t,e)=>{_n(t).fold(()=>{St(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},St=(t,e)=>{t.dom.appendChild(e.dom)},Ae=(t,e)=>{Bt(t,e),St(e,t)},de=(t,e)=>{Z(e,n=>{St(t,n)})},fe=t=>{t.dom.textContent="",Z(Ee(t),e=>{Gt(e)})},Gt=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},ae=t=>{const e=Ee(t);var n,r;e.length>0&&(n=t,Z(r=e,(o,s)=>{Ft(0===s?n:r[s-1],o)})),Gt(t)},en=t=>re(t,D),An=t=>t.dom.innerHTML,nn=(t,e)=>{const n=Ne(t).dom,r=D(n.createDocumentFragment()),o=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,Ee(D(i))})(e,n);de(r,o),fe(t),St(t,r)},lr=(t,e,n,r)=>{t.dom.removeEventListener(e,n,r)},br=(t,e)=>({left:t,top:e,translate:(n,r)=>br(t+n,e+r)}),De=br,Vr=(t,e)=>void 0!==t?t:void 0!==e?e:0,cr=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?De(n.offsetLeft,n.offsetTop):ao(t)?(r=>{const o=r.getBoundingClientRect();return De(o.left,o.top)})(e):De(0,0)},Cs=t=>{const e=void 0!==t?t.dom:document;return De(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},zi=(t,e,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(t,e)},Ui=(t,e)=>{Pn().browser.isSafari()&&be(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},mc=(t,e,n,r)=>({x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}),Ng=t=>{const e=void 0===t?window:t,r=Cs(D(e.document));return(o=>{const s=void 0===o?window:o;return Pn().browser.isFirefox()?k.none():k.from(s.visualViewport)})(e).fold(()=>{const o=e.document.documentElement;return mc(r.left,r.top,o.clientWidth,o.clientHeight)},o=>mc(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},Ag=(t,e)=>{let n=[];return Z(Ee(t),r=>{e(r)&&(n=n.concat([r])),n=n.concat(Ag(r,e))}),n},Mn=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return Nr(o)?[]:re(o.querySelectorAll(n),D)})(e,t),Tg=(t,e,n)=>Tr(t,e,n).isSome(),Rg=(t,e)=>ja(t,e).isSome();class pn{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,r,o){if(e){if(!o&&e[n])return e[n];if(e!==this.rootNode){let s=e[r];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[r],s)return s}}}findPreviousNode(e,n){if(e){const r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let s=r.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return r}const o=e.parentNode;if(o&&o!==this.rootNode)return o}}}const cn="\xa0",yu=t=>"\ufeff"===t,zS=/^[ \t\r\n]*$/,qa=t=>zS.test(t),Og=t=>"\n"===t||"\r"===t,Bg=(t,e=4,n=!0,r=!0)=>{const o=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,o);var l;return yn(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===cn?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&r||(u=i.str.length+1)<(c=s).length&&u>=0&&Og(c[u])?{pcIsSpace:!1,str:i.str+cn}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Og(l),str:i.str+l};var c,u},{pcIsSpace:!1,str:""}).str},Js=t=>e=>!!e&&e.nodeType===t,pc=t=>!!t&&!Object.getPrototypeOf(t),Nt=Js(1),ts=t=>Nt(t)&&Ys(D(t)),qi=t=>{const e=t.toLowerCase();return n=>ct(n)&&n.nodeName.toLowerCase()===e},uo=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return Ot(e,r)}return!1}},gc=(t,e)=>{const n=e.toLowerCase().split(" ");return r=>{if(Nt(r)){const o=r.ownerDocument.defaultView;if(o)for(let s=0;s<n.length;s++){const a=o.getComputedStyle(r,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},ta=t=>Nt(t)&&t.hasAttribute("data-mce-bogus"),Oo=t=>Nt(t)&&"TABLE"===t.tagName,Dg=t=>e=>!(!ts(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),Cu=uo(["textarea","input"]),ot=Js(3),US=Js(4),HS=Js(7),xs=Js(8),$i=Js(9),xu=Js(11),He=qi("br"),Pg=qi("img"),Kr=Dg("true"),Pe=Dg("false"),hc=uo(["td","th"]),qS=uo(["td","th","caption"]),Bo=uo(["video","audio","object","embed"]),$S=qi("li"),wu=qi("details"),WS=qi("summary"),Lg={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Eu=(t,e,n,r)=>{return be(r.isContent)&&r.isContent(e)||(s=t,Nt(o=e)&&Ut(s.getNonEmptyElements(),o.nodeName))||(t=>Nt(t)&&t.hasAttribute("data-mce-bookmark"))(e)||(o=>Nt(o)&&"A"===o.nodeName&&!o.hasAttribute("href")&&(o.hasAttribute("name")||o.hasAttribute("id")))(e)||((t,e,n,r)=>{return ot(t)&&(s=e,a=n,!(qa((o=t).data)&&!((i,l,c)=>{const u=D(l),f=D(i),p=c.getWhitespaceElements();return Tg(f,b=>Ut(p,me(b)),Et(zt,u))})(o,s,a)))&&(!r.includeZwsp||!(o=>{for(const s of o)if(!yu(s))return!1;return!0})(t.data));var o,s,a})(e,n,t,r)||Pe(e)||Kr(e)&&(o=>ar(D(o)).exists(s=>!co(s)))(e);var o,s},es=(t,e,n)=>{const r={...Lg,...n};if(r.checkRootAsContent&&Eu(t,e,e,r))return!1;let o=e.firstChild,s=0;if(!o)return!0;const a=new pn(o,e);do{if(r.skipBogus&&Nt(o)){const i=o.getAttribute("data-mce-bogus");if(i){o=a.next("all"===i);continue}}if(xs(o))o=a.next(!0);else if(He(o))s++,o=a.next();else{if(Eu(t,o,e,r))return!1;o=a.next()}}while(o);return s<=1},In=(t,e,n)=>es(t,e.dom,{checkRootAsContent:!0,...n}),Mg=(t,e,n)=>Eu(t,e,e,{includeZwsp:Lg.includeZwsp,...n}),gn=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},XS=t=>{const e=gn(k.none()),n=()=>e.get().each(r=>clearInterval(r));return{clear:()=>{n(),e.set(k.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:r=>{n(),e.set(k.some(setInterval(r,t)))}}},ns=()=>{const t=(e=>{const n=gn(k.none()),r=()=>n.get().each(e);return{clear:()=>{r(),n.set(k.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(k.some(o))}}})(_t);return{...t,on:e=>t.get().each(e)}},Ig=t=>{const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":"html"},ea=t=>"html"!==Ig(t),Su=t=>ea(t.nodeName),Fg=t=>Ig(t.nodeName),YS=["svg","math"],bc="data-mce-block",ku=t=>{return re((e=t,Vt(an(e),n=>!/[A-Z]/.test(n))),e=>{const n=CSS.escape(e);return`${n}:`+re(YS,r=>`not(${r} ${n})`).join(":")}).join(",");var e},jg=(t,e)=>ct(e.querySelector(t))?(e.setAttribute(bc,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(bc),!1),zg=(t,e)=>{const n=ku(t.getTransparentElements()),r=ku(t.getBlockElements());return Vt(e.querySelectorAll(n),o=>jg(r,o))},Ug=(t,e,n)=>{var r;const o=n?"lastChild":"firstChild";for(let s=e[o];s;s=s[o])if(es(t,s,{checkRootAsContent:!0}))return void(null===(r=s.parentNode)||void 0===r||r.removeChild(s))},_u=(t,e)=>{const n=zg(t,e);var r,o,s;((t,e,n)=>{const r=t.getBlockElements(),o=D(e),s=i=>me(i)in r,a=i=>zt(i,o);Z(en(n),i=>{Tr(i,s,a).each(l=>{const c=Vt(Ee(i),p=>s(p)&&!t.isValidChild(me(l),me(p)));if(c.length>0){const u=ar(l);Z(c,f=>{Tr(f,s,a).each(p=>{((b,g,v)=>{const h=document.createRange(),C=g.parentNode;if(C){h.setStartBefore(g),h.setEndBefore(v);const E=h.extractContents();Ug(b,E,!0),h.setStartAfter(v),h.setEndAfter(g);const S=h.extractContents();Ug(b,S,!1),es(b,E,{checkRootAsContent:!0})||C.insertBefore(E,g),es(b,v,{checkRootAsContent:!0})||C.insertBefore(v,g),es(b,S,{checkRootAsContent:!0})||C.insertBefore(S,g),C.removeChild(g)}})(t,p.dom,f.dom)})}),u.each(f=>zg(t,f.dom))}})})})(t,e,n),r=t,o=e,s=n,Z([...s,...na(r,o)?[o]:[]],a=>Z(Mn(D(a),a.nodeName.toLowerCase()),i=>{ZS(r,i.dom)&&ae(i)}))},QS=(t,e)=>{if(Tu(t,e)){const n=ku(t.getBlockElements());jg(n,e)}},Nu=t=>t.hasAttribute(bc),Au=(t,e)=>Ut(t.getTransparentElements(),e),Tu=(t,e)=>Nt(e)&&Au(t,e.nodeName),na=(t,e)=>Tu(t,e)&&Nu(e),ZS=(t,e)=>Tu(t,e)&&!Nu(e),Ru=(t,e)=>1===e.type&&Au(t,e.name)&&Rt(e.attr(bc)),JS=Pn().browser,Hg=t=>Ge(t,Hn),qg=(t,e)=>t.children&&Ot(t.children,e),$g=(t,e={})=>{let n=0;const r={},o=D(t),s=Le(o),a=f=>{St(Ye(o),f)},i=f=>{const p=Ye(o);Zo(p,"#"+f).each(Gt)},l=f=>Te(r,f).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=f=>new Promise((p,b)=>{let g;const v=lt._addCacheSuffix(f),h=l(v);r[v]=h,h.count++;const C=(A,R)=>{Z(A,Xn),h.status=R,h.passed=[],h.failed=[],g&&(g.onload=null,g.onerror=null,g=null)},E=()=>C(h.passed,2),S=()=>C(h.failed,3);if(p&&h.passed.push(p),b&&h.failed.push(b),1===h.status)return;if(2===h.status)return void E();if(3===h.status)return void S();h.status=1;const N=Mt("link",s.dom);ro(N,{rel:"stylesheet",type:"text/css",id:h.id}),e.contentCssCors&&Ze(N,"crossOrigin","anonymous"),e.referrerPolicy&&Ze(N,"referrerpolicy",e.referrerPolicy),g=N.dom,g.onload=E,g.onerror=S,a(N),Ze(N,"href",v)}),u=f=>{const p=lt._addCacheSuffix(f);Te(r,p).each(b=>{0==--b.count&&(delete r[p],i(b.id))})};return{load:c,loadRawCss:(f,p)=>{const b=l(f);r[f]=b,b.count++;const g=Mt("style",s.dom);ro(g,{rel:"stylesheet",type:"text/css",id:b.id}),g.dom.innerHTML=p,a(g)},loadAll:f=>Promise.allSettled(re(f,p=>c(p).then(mt(p)))).then(p=>{const b=Ur(p,g=>"fulfilled"===g.status);return b.fail.length>0?Promise.reject(re(b.fail,g=>g.reason)):re(b.pass,g=>g.value)}),unload:u,unloadRawCss:f=>{Te(r,f).each(p=>{0==--p.count&&(delete r[f],i(p.id))})},unloadAll:f=>{Z(f,p=>{u(p)})},_setReferrerPolicy:f=>{e.referrerPolicy=f},_setContentCssCors:f=>{e.contentCssCors=f}}},Wg=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const r=Ie(e).dom;return k.from(t.get(r)).getOrThunk(()=>{const o=$g(r,n);return t.set(r,o),o})}}})(),Vg=(t,e)=>ct(t)&&(Mg(e,t)||e.isInline(t.nodeName.toLowerCase())),Kg=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Ou=(t,e,n,r)=>{var o;const s=r||e;if(Nt(e)&&Kg(e))return e;const a=e.childNodes;for(let i=a.length-1;i>=0;i--)Ou(t,a[i],n,s);if(Nt(e)){const i=e.childNodes;1===i.length&&Kg(i[0])&&(null===(o=e.parentNode)||void 0===o||o.insertBefore(i[0],e))}return xu(i=e)||$i(i)||Mg(n,e)||(i=>!!Nt(i)&&i.childNodes.length>0)(e)||((i,l,c)=>ot(i)&&i.data.length>0&&((u,f,p)=>{const b=new pn(u,f).prev(!1),g=new pn(u,f).next(!1),v=Me(b)||Vg(b,p),h=Me(g)||Vg(g,p);return v&&h})(i,l,c))(e,s,n)||t.remove(e),e;var i},tk=lt.makeMap,vc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ek=/[<>&\"\']/g,nk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,rk={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},ra={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ok={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Xg=(t,e)=>{const n={};if(t){const r=t.split(",");e=e||10;for(let o=0;o<r.length;o+=2){const s=String.fromCharCode(parseInt(r[o],e));if(!ra[s]){const a="&"+r[o+1]+";";n[s]=a,n[a]=s}}return n}},Bu=Xg("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Yg=(t,e)=>t.replace(e?vc:yc,n=>ra[n]||n),Gg=(t,e)=>t.replace(e?vc:yc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":ra[n]||"&#"+n.charCodeAt(0)+";"),Du=(t,e,n)=>{const r=n||Bu;return t.replace(e?vc:yc,o=>ra[o]||r[o]||o)},oa={encodeRaw:Yg,encodeAllRaw:t=>(""+t).replace(ek,e=>ra[e]||e),encodeNumeric:Gg,encodeNamed:Du,getEncodeFunc:(t,e)=>{const n=Xg(e)||Bu,r=tk(t.replace(/\+/g,","));return r.named&&r.numeric?(o,s)=>o.replace(s?vc:yc,a=>void 0!==ra[a]?ra[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):r.named?e?(o,s)=>Du(o,s,n):Du:r.numeric?Gg:Yg},decode:t=>t.replace(nk,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):rk[n]||String.fromCharCode(n):ok[e]||Bu[e]||(r=>{const o=Mt("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(e))},Tn=(t,e)=>(t=lt.trim(t))?t.split(e||" "):[],Qg=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),Zg=t=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==t?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==t?["xml:lang"]:[]]),Jg=t=>{let e,n;e="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(e+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==t&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),e=[e,"center dir isindex noframes"].join(" "));const r=[e,n].join(" ");return{blockContent:e,phrasingContent:n,flowContent:r}},Pu=t=>{const{blockContent:e,phrasingContent:n,flowContent:r}=Jg(t),o=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:o(e),phrasingContent:o(n),flowContent:o(r)})},sk={html4:$r(()=>Pu("html4")),html5:$r(()=>Pu("html5")),"html5-strict":$r(()=>Pu("html5-strict"))},th=(t,e)=>{const{blockContent:n,phrasingContent:r,flowContent:o}=sk[t]();return"blocks"===e?k.some(n):"phrasing"===e?k.some(r):"flow"===e?k.some(o):k.none()},Lu=t=>k.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(t)).map(e=>({preset:"@"===e[1],name:e[2]})),Cc={},Wi=lt.makeMap,fo=lt.each,eh=lt.extend,nh=lt.explode,rh=(t,e={})=>{const n=Wi(t," ",Wi(t.toUpperCase()," "));return eh(n,e)},oh=t=>rh("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Mu=(t,e)=>{if(t){const n={};return Rt(t)&&(t={"*":t}),fo(t,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===e?Wi(r,/[, ]/):nh(r,/[, ]/)}),n}},ws=(t={})=>{var e;const n={},r={};let o=[];const s={},a={},i=(yt,te,ce)=>{const ee=t[yt];if(ee)return Wi(ee,/[, ]/,Wi(ee.toUpperCase(),/[, ]/));{let he=Cc[yt];return he||(he=rh(te,ce),Cc[yt]=he),he}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(yt=>{const te=Zg(yt),{phrasingContent:ce,flowContent:ee}=Jg(yt),he={},Oe=(ye,Be,on)=>{he[ye]={attributes:Dn(Be,mt({})),attributesOrder:Be,children:Dn(on,mt({}))}},ht=(ye,Be="",on="")=>{const rr=Tn(on),Qr=Tn(ye);let zn=Qr.length;const fr=[...te,...Tn(Be)];for(;zn--;)Oe(Qr[zn],fr.slice(),rr)},jt=(ye,Be)=>{const on=Tn(ye),rr=Tn(Be);let Qr=on.length;for(;Qr--;){const zn=he[on[Qr]];for(let fr=0,sn=rr.length;fr<sn;fr++)zn.attributes[rr[fr]]={},zn.attributesOrder.push(rr[fr])}};return"html5-strict"!==yt&&(Z(Tn("acronym applet basefont big font strike tt"),ye=>{ht(ye,"",ce)}),Z(Tn("center dir isindex noframes"),ye=>{ht(ye,"",ee)})),ht("html","manifest","head body"),ht("head","","base command link meta noscript script style title"),ht("title hr noscript br"),ht("base","href target"),ht("link","href rel media hreflang type sizes hreflang"),ht("meta","name http-equiv content charset"),ht("style","media type scoped"),ht("script","src async defer type charset"),ht("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",ee),ht("dd div","",ee),ht("address dt caption","","html4"===yt?ce:ee),ht("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",ce),ht("blockquote","cite",ee),ht("ol","reversed start type","li"),ht("ul","","li"),ht("li","value",ee),ht("dl","","dt dd"),ht("a","href target rel media hreflang type","html4"===yt?ce:ee),ht("q","cite",ce),ht("ins del","cite datetime",ee),ht("img","src sizes srcset alt usemap ismap width height"),ht("iframe","src name width height",ee),ht("embed","src type width height"),ht("object","data type typemustmatch name usemap form width height",[ee,"param"].join(" ")),ht("param","name value"),ht("map","name",[ee,"area"].join(" ")),ht("area","alt coords shape href target rel media hreflang type"),ht("table","border","caption colgroup thead tfoot tbody tr"+("html4"===yt?" col":"")),ht("colgroup","span","col"),ht("col","span"),ht("tbody thead tfoot","","tr"),ht("tr","","td th"),ht("td","colspan rowspan headers",ee),ht("th","colspan rowspan headers scope abbr",ee),ht("form","accept-charset action autocomplete enctype method name novalidate target",ee),ht("fieldset","disabled form name",[ee,"legend"].join(" ")),ht("label","form for",ce),ht("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ht("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===yt?ee:ce),ht("select","disabled form multiple name required size","option optgroup"),ht("optgroup","disabled label","option"),ht("option","disabled label selected value"),ht("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ht("menu","type label",[ee,"li"].join(" ")),ht("noscript","",ee),"html4"!==yt&&(ht("wbr"),ht("ruby","",[ce,"rt rp"].join(" ")),ht("figcaption","",ee),ht("mark rt rp bdi","",ce),ht("summary","",[ce,"h1 h2 h3 h4 h5 h6"].join(" ")),ht("canvas","width height",ee),ht("data","value",ce),ht("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[ee,"track source"].join(" ")),ht("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[ee,"track source"].join(" ")),ht("picture","","img source"),ht("source","src srcset type media sizes"),ht("track","kind src srclang label default"),ht("datalist","",[ce,"option"].join(" ")),ht("article section nav aside main header footer","",ee),ht("hgroup","","h1 h2 h3 h4 h5 h6"),ht("figure","",[ee,"figcaption"].join(" ")),ht("time","datetime",ce),ht("dialog","open",ee),ht("command","type label icon disabled checked radiogroup command"),ht("output","for form name",ce),ht("progress","value max",ce),ht("meter","value min max low high optimum",ce),ht("details","open",[ee,"summary"].join(" ")),ht("keygen","autofocus challenge disabled form keytype name"),Oe("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==yt&&(jt("script","language xml:space"),jt("style","xml:space"),jt("object","declare classid code codebase codetype archive standby align border hspace vspace"),jt("embed","align name hspace vspace"),jt("param","valuetype type"),jt("a","charset name rev shape coords"),jt("br","clear"),jt("applet","codebase archive code object alt name width height align hspace vspace"),jt("img","name longdesc align border hspace vspace"),jt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),jt("font basefont","size color face"),jt("input","usemap align"),jt("select"),jt("textarea"),jt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),jt("ul","type compact"),jt("li","type"),jt("ol dl menu dir","compact"),jt("pre","width xml:space"),jt("hr","align noshade size width"),jt("isindex","prompt"),jt("table","summary width frame rules cellspacing cellpadding align bgcolor"),jt("col","width align char charoff valign"),jt("colgroup","width align char charoff valign"),jt("thead","align char charoff valign"),jt("tr","align char charoff valign bgcolor"),jt("th","axis align char charoff valign nowrap bgcolor width height"),jt("form","accept"),jt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),jt("tfoot","align char charoff valign"),jt("tbody","align char charoff valign"),jt("area","nohref"),jt("body","background bgcolor text link vlink alink")),"html4"!==yt&&(jt("input button select textarea","autofocus"),jt("input textarea","placeholder"),jt("a","download"),jt("link script img","crossorigin"),jt("img","loading"),jt("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),"html4"!==yt&&Z([he.video,he.audio],ye=>{delete ye.children.audio,delete ye.children.video}),Z(Tn("a form meter progress dfn"),ye=>{he[ye]&&delete he[ye].children[ye]}),delete he.caption.children.table,delete he.script,he})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const u=Mu(t.valid_styles),f=Mu(t.invalid_styles,"map"),p=Mu(t.valid_classes,"map"),b=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),C="td th iframe video audio object script code",E=i("non_empty_elements",C+" pre svg textarea summary",v),S=i("move_caret_before_on_enter_elements",C+" table",v),N="h1 h2 h3 h4 h5 h6",A=i("text_block_elements",N+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),R=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",A),M=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),P=i("transparent_elements","a ins del canvas map"),z=i("wrap_block_elements","pre "+N);fo("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),yt=>{a[yt]=new RegExp("</"+yt+"[^>]*>","gi")});const $=yt=>{const te=k.from(n["@"]),ce=/[*?+]/;Z(((ee,he)=>{const Oe=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Qe(Tn(he,","),ht=>{const jt=Oe.exec(ht);if(jt){const ye=jt[1],Be=jt[2],on=jt[3],rr=jt[4],Qr=jt[5],zn={attributes:{},attributesOrder:[]};if(ee.each(fr=>{return xr=zn,xe((sn=fr).attributes,(qo,ls)=>{xr.attributes[ls]=qo}),void xr.attributesOrder.push(...sn.attributesOrder);var sn,xr}),"#"===ye?zn.paddEmpty=!0:"-"===ye&&(zn.removeEmpty=!0),"!"===rr&&(zn.removeEmptyAttrs=!0),Qr&&((fr,sn)=>{const xr=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,qo=/[*?+]/,{attributes:ls,attributesOrder:Ra}=sn;Z(Tn(fr,"|"),kg=>{const Zr=xr.exec(kg);if(Zr){const Ms={},vn=Zr[1],Vn=Zr[2].replace(/[\\:]:/g,":"),ki=Zr[3],Is=Zr[4];if("!"===vn&&(sn.attributesRequired=sn.attributesRequired||[],sn.attributesRequired.push(Vn),Ms.required=!0),"-"===vn)return delete ls[Vn],void Ra.splice(lt.inArray(Ra,Vn),1);if(ki&&("="===ki?(sn.attributesDefault=sn.attributesDefault||[],sn.attributesDefault.push({name:Vn,value:Is}),Ms.defaultValue=Is):"~"===ki?(sn.attributesForced=sn.attributesForced||[],sn.attributesForced.push({name:Vn,value:Is}),Ms.forcedValue=Is):"<"===ki&&(Ms.validValues=lt.makeMap(Is,"?"))),qo.test(Vn)){const _i=Ms;sn.attributePatterns=sn.attributePatterns||[],_i.pattern=Qg(Vn),sn.attributePatterns.push(_i)}else ls[Vn]||Ra.push(Vn),ls[Vn]=Ms}})})(Qr,zn),on&&(zn.outputName=Be),"@"===Be){if(!ee.isNone())return[];ee=k.some(zn)}return[on?{name:Be,element:zn,aliasName:on}:{name:Be,element:zn}]}return[]})})(te,yt??""),({name:ee,element:he,aliasName:Oe})=>{if(Oe&&(n[Oe]=he),ce.test(ee)){const ht=he;ht.pattern=Qg(ee),o.push(ht)}else n[ee]=he})},B=yt=>{o=[],Z(an(n),te=>{delete n[te]}),$(yt)},I=(yt,te)=>{var ce,ee;delete Cc.text_block_elements,delete Cc.block_elements;const he=!!te.extends&&!Se(te.extends),Oe=te.extends;if(r[yt]=Oe?r[Oe]:{},s[yt]=Oe??yt,E[yt.toUpperCase()]={},E[yt]={},he||(R[yt.toUpperCase()]={},R[yt]={}),Oe&&!n[yt]&&n[Oe]){const ht=(jt=>{const ye=Be=>{return it(Be)?re(Be,ye):Kt(on=Be)&&on.source&&"[object RegExp]"===Object.prototype.toString.call(on)?new RegExp(Be.source,Be.flags):Kt(Be)?ds(Be,ye):Be;var on};return ye(jt)})(n[Oe]);delete ht.removeEmptyAttrs,delete ht.removeEmpty,n[yt]=ht}else n[yt]={attributesOrder:[],attributes:{}};if(it(te.attributes)){const ht=ye=>{jt.attributesOrder.push(ye),jt.attributes[ye]={}},jt=null!==(ce=n[yt])&&void 0!==ce?ce:{};delete jt.attributesDefault,delete jt.attributesForced,delete jt.attributePatterns,delete jt.attributesRequired,jt.attributesOrder=[],jt.attributes={},Z(te.attributes,ye=>{const Be=Zg(l);Lu(ye).each(({preset:on,name:rr})=>{on?"global"===rr&&Z(Be,ht):ht(rr)})}),n[yt]=jt}if(En(te.padEmpty)){const ht=null!==(ee=n[yt])&&void 0!==ee?ee:{};ht.paddEmpty=te.padEmpty,n[yt]=ht}if(it(te.children)){const ht={},jt=Be=>{ht[Be]={}},ye=Be=>{th(l,Be).each(on=>{Z(on,jt)})};Z(te.children,Be=>{Lu(Be).each(({preset:on,name:rr})=>{on?ye(rr):jt(rr)})}),r[yt]=ht}Oe&&xe(r,(ht,jt)=>{ht[Oe]&&(r[jt]=ht=eh({},r[jt]),ht[yt]=ht[Oe])})},j=yt=>{Kt(yt)?xe(yt,(te,ce)=>I(ce,te)):Rt(yt)&&Z((ce=>{const ee=/^(~)?(.+)$/;return Qe(Tn(ce,","),he=>{const Oe=ee.exec(he);return Oe?[{cloneName:"~"===Oe[1]?"span":"div",name:Oe[2]}]:[]})})(yt??""),({name:ce,cloneName:ee})=>{I(ce,{extends:ee})})},G=yt=>{Z((te=>{const ce=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Qe(Tn(te,","),ee=>{const he=ce.exec(ee);if(he){const Oe=he[1];return[{operation:Oe?(jt=>"-"===jt?"remove":"add")(Oe):"replace",name:he[2],validChildren:Qe(Tn(he[3],"|"),jt=>Lu(jt).toArray())}]}return[]})})(yt??""),({operation:te,name:ce,validChildren:ee})=>{const he="replace"===te?{"#comment":{}}:r[ce],Oe=ht=>{"remove"===te?delete he[ht]:he[ht]={}};Z(ee,({preset:ht,name:jt})=>{ht?th(l,jt).each(Be=>{Z(Be,Oe)}):Oe(jt)}),r[ce]=he})},st=yt=>{const te=n[yt];if(te)return te;let ce=o.length;for(;ce--;){const ee=o[ce];if(ee.pattern.test(yt))return ee}},rt=mt(u),xt=mt(f),At=mt(p),Dt=mt(h),wt=mt(R),pt=mt(A),kt=mt(M),F=mt(Object.seal(v)),U=mt(g),X=mt(E),Q=mt(S),gt=mt(b),dt=mt(P),Lt=mt(z),Ht=mt(Object.seal(a)),Xt=(yt,te)=>{const ce=st(yt);if(ce){if(!te)return!0;{if(ce.attributes[te])return!0;const ee=ce.attributePatterns;if(ee){let he=ee.length;for(;he--;)if(ee[he].pattern.test(te))return!0}}}return!1},Se=yt=>Ut(wt(),yt),ze=yt=>!Ve(yt,"#")&&Xt(yt)&&!Se(yt),Cr=mt(s);return t.valid_elements?(B(t.valid_elements),fo(c,(yt,te)=>{r[te]=yt.children})):(fo(c,(yt,te)=>{n[te]={attributes:yt.attributes,attributesOrder:yt.attributesOrder},r[te]=yt.children}),fo(Tn("strong/b em/i"),yt=>{const te=Tn(yt,"/");n[te[1]].outputName=te[0]}),fo(M,(yt,te)=>{n[te]&&(t.padd_empty_block_inline_children&&(n[te].paddInEmptyBlock=!0),n[te].removeEmpty=!0)}),fo(Tn("ol ul blockquote a table tbody"),yt=>{n[yt]&&(n[yt].removeEmpty=!0)}),fo(Tn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),yt=>{n[yt]&&(n[yt].paddEmpty=!0)}),fo(Tn("span"),yt=>{n[yt].removeEmptyAttrs=!0})),delete n.svg,j(t.custom_elements),G(t.valid_children),$(t.extended_valid_elements),G("+ol[ul|ol],+ul[ul|ol]"),fo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(yt,te)=>{n[te]&&(n[te].parentsRequired=Tn(yt))}),t.invalid_elements&&fo(nh(t.invalid_elements),yt=>{n[yt]&&delete n[yt]}),st("span")||$("span[!data-mce-type|*]"),{type:l,children:r,elements:n,getValidStyles:rt,getValidClasses:At,getBlockElements:wt,getInvalidStyles:xt,getVoidElements:F,getTextBlockElements:pt,getTextInlineElements:kt,getBoolAttrs:Dt,getElementRule:st,getSelfClosingElements:U,getNonEmptyElements:X,getMoveCaretBeforeOnEnterElements:Q,getWhitespaceElements:gt,getTransparentElements:dt,getSpecialElements:Ht,isValidChild:(yt,te)=>{const ce=r[yt.toLowerCase()];return!(!ce||!ce[te.toLowerCase()])},isValid:Xt,isBlock:Se,isInline:ze,isWrapper:yt=>Ut(Lt(),yt)||ze(yt),getCustomElements:Cr,addValidElements:$,setValidElements:B,addCustomElements:j,addValidChildren:G}},Iu=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},ak=t=>{return{value:(n=Iu(t.red)+Iu(t.green)+Iu(t.blue),Ko(n,"#").toUpperCase())};var n},sh=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,ah=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,ih=(t,e,n,r)=>((o,s,a,i)=>({red:o,green:s,blue:a,alpha:i}))(parseInt(t,10),parseInt(e,10),parseInt(n,10),parseFloat(r)),lh=t=>{const e=sh.exec(t);if(null!==e)return k.some(ih(e[1],e[2],e[3],"1"));const n=ah.exec(t);return null!==n?k.some(ih(n[1],n[2],n[3],n[4])):k.none()},ik=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,Vi=t=>lh(t).map(ak).map(e=>"#"+e.value).getOr(t),Fu=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let f=0;f<c.length;f++)s[c[f]]="\ufeff"+f,s["\ufeff"+f]=c[f];const u={parse:f=>{const p={};let b=!1;const g=t.url_converter,v=t.url_converter_scope||u,h=(B,I,j)=>{const G=p[B+"-top"+I];if(!G)return;const st=p[B+"-right"+I];if(!st)return;const rt=p[B+"-bottom"+I];if(!rt)return;const xt=p[B+"-left"+I];if(!xt)return;const At=[G,st,rt,xt];let Dt=At.length-1;for(;Dt--&&At[Dt]===At[Dt+1];);Dt>-1&&j||(p[B+I]=-1===Dt?At[0]:At.join(" "),delete p[B+"-top"+I],delete p[B+"-right"+I],delete p[B+"-bottom"+I],delete p[B+"-left"+I])},C=B=>{const I=p[B];if(!I)return;const j=I.indexOf(",")>-1?[I]:I.split(" ");let G=j.length;for(;G--;)if(j[G]!==j[0])return!1;return p[B]=j[0],!0},E=B=>(b=!0,s[B]),S=(B,I)=>(b&&(B=B.replace(/\uFEFF[0-9]/g,j=>s[j])),I||(B=B.replace(/\\([\'\";:])/g,"$1")),B),N=B=>String.fromCharCode(parseInt(B.slice(1),16)),A=B=>B.replace(/\\[0-9a-f]+/gi,N),R=(B,I,j,G,st,rt)=>{if(st=st||rt)return"'"+(st=S(st)).replace(/\'/g,"\\'")+"'";if(I=S(I||j||G||""),!t.allow_script_urls){const xt=I.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(xt)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(xt))return""}return g&&(I=g.call(v,I,"style")),"url('"+I.replace(/\'/g,"\\'")+"')"};if(f){let B;for(f=(f=f.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,E).replace(/\"[^\"]+\"|\'[^\']+\'/g,I=>I.replace(/[;:]/g,E));B=r.exec(f);){r.lastIndex=B.index+B[0].length;let I=B[1].replace(o,"").toLowerCase(),j=B[2].replace(o,"");if(I&&j){if(I=A(I),j=A(j),-1!==I.indexOf("\ufeff")||-1!==I.indexOf('"')||!t.allow_script_urls&&("behavior"===I||/expression\s*\(|\/\*|\*\//.test(j)))continue;"font-weight"===I&&"700"===j?j="bold":"color"!==I&&"background-color"!==I||(j=j.toLowerCase()),"rgb"==(sh.test($=j)?"rgb":ah.test($)?"rgba":"other")&&lh(j).each(G=>{j=Vi(ik(G)).toLowerCase()}),j=j.replace(n,R),p[I]=b?S(j,!0):j}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),P="border-style",z="border-color",C(M="border-width")&&C(P)&&C(z)&&(p.border=p[M]+" "+p[P]+" "+p[z],delete p[M],delete p[P],delete p[z]),"medium none"===p.border&&delete p.border,"none"===p["border-image"]&&delete p["border-image"]}var M,P,z,$;return p},serialize:(f,p)=>{let b="";const g=(v,h)=>{const C=h[v];if(C)for(let E=0,S=C.length;E<S;E++){const N=C[E],A=f[N];A&&(b+=(b.length>0?" ":"")+N+": "+A+";")}};return p&&a?(g("*",a),g(p,a)):xe(f,(v,h)=>{v&&((C,E)=>{if(!i||!E)return!0;let S=i["*"];return!(S&&S[C]||(S=i[E],S&&S[C]))})(h,p)&&(b+=(b.length>0?" ":"")+h+": "+v+";")}),b}};return u},lk={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ch=(t,e)=>{const n=e??{};for(const r in t)Ut(lk,r)||(n[r]=t[r]);return ct(t.composedPath)&&(n.composedPath=()=>t.composedPath()),ct(t.getModifierState)&&(n.getModifierState=r=>t.getModifierState(r)),ct(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},ju=(t,e,n,r)=>{var o;const s=ch(e,r);return s.type=t,we(s.target)&&(s.target=null!==(o=s.srcElement)&&void 0!==o?o:n),(we((a=e).preventDefault)||(i=a)instanceof Event||be(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=je,be(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=je,be(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=je,s.stopPropagation()},(a=>a.isDefaultPrevented===je||a.isDefaultPrevented===Ce)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?je:Ce,s.isPropagationStopped=!0===s.cancelBubble?je:Ce,s.isImmediatePropagationStopped=Ce)),s;var a,i},ck=/^(?:mouse|contextmenu)|click/,zu=(t,e,n,r)=>{t.addEventListener(e,n,r||!1)},xc=(t,e,n,r)=>{t.removeEventListener(e,n,r||!1)},Ki=(t,e)=>{const n=ju(t.type,t,document,e);if(ct(r=t)&&ck.test(r.type)&&Me(t.pageX)&&!Me(t.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,s=r.body,a=n;a.pageX=t.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}var r;return n},dk=(t,e,n)=>{const r=t.document,o={type:"ready"};if(n.domLoaded)return void e(o);const s=()=>{xc(t,"DOMContentLoaded",s),xc(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(o)),t=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?s():zu(t,"DOMContentLoaded",s),n.domLoaded||zu(t,"load",s)};class sa{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,r,o){const s=this;let a;const i=window,l=p=>{s.executeHandlers(Ki(p||i.event),c)};if(!e||ot(e)||xs(e))return r;let c;e[s.expando]?c=e[s.expando]:(c=s.count++,e[s.expando]=c,s.events[c]={}),o=o||e;const u=n.split(" ");let f=u.length;for(;f--;){let p=u[f],b=l,g=!1,v=!1;"DOMContentLoaded"===p&&(p="ready"),s.domLoaded&&"ready"===p&&"complete"===e.readyState?r.call(o,Ki({type:p})):(s.hasFocusIn||"focusin"!==p&&"focusout"!==p||(g=!0,v="focusin"===p?"focus":"blur",b=h=>{const C=Ki(h||i.event);C.type="focus"===C.type?"focusin":"focusout",s.executeHandlers(C,c)}),a=s.events[c][p],a?"ready"===p&&s.domLoaded?r(Ki({type:p})):a.push({func:r,scope:o}):(s.events[c][p]=a=[{func:r,scope:o}],a.fakeName=v,a.capture=g,a.nativeHandler=b,"ready"===p?dk(e,b,s):zu(e,v||p,b,g)))}return e=a=null,r}unbind(e,n,r){if(!e||ot(e)||xs(e))return this;const o=e[this.expando];if(o){let s=this.events[o];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(r){let u=c.length;for(;u--;)if(c[u].func===r){const f=c.nativeHandler,p=c.fakeName,b=c.capture,g=c.slice(0,u).concat(c.slice(u+1));g.nativeHandler=f,g.fakeName=p,g.capture=b,s[l]=g}}r&&0!==c.length||(delete s[l],xc(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else xe(s,(a,i)=>{xc(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(Ut(s,a))return this;delete this.events[o];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,r){return this.dispatch(e,n,r)}dispatch(e,n,r){if(!e||ot(e)||xs(e))return this;const o=Ki({type:n,target:e},r);do{const s=e[this.expando];s&&this.executeHandlers(o,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}clean(e){if(!e||ot(e)||xs(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let r=n.length;for(;r--;)(e=n[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const r=this.events[n],o=r&&r[e.type];if(o)for(let s=0,a=o.length;s<a;s++){const i=o[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}sa.Event=new sa;const Uu=lt.each,uk=lt.grep,Hu="data-mce-style",fk=lt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Xi=(t,e,n)=>{we(n)||""===n?m(t,e):Ze(t,e,n)},dh=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),$a=(t,e)=>{let n=0;if(t)for(let r=t.nodeType,o=t.previousSibling;o;o=o.previousSibling){const s=o.nodeType;(!e||!ot(o)||s!==r&&o.data.length)&&(n++,r=s)}return n},uh=(t,e)=>{const n=Qn(e,"style"),r=t.serialize(t.parse(n),me(e));Xi(e,Hu,r)},fh=(t,e,n)=>{const r=dh(e);var o,s;we(n)||""===n?ft(t,r):Ha(t,r,(s=r,x(o=n)?Ut(fk,s)?o+"":o+"px":o))},Re=(t,e={})=>{const n={},r=window,o={};let s=0;const a=Wg.forElement(D(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:ws({}),c=Fu({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),u=e.ownEvents?new sa:sa.Event,f=l.getBlockElements(),p=F=>F&&t&&Rt(F)?t.getElementById(F):F,b=F=>{const U=p(F);return ct(U)?D(U):null},g=(F,U,X="")=>{let Q;const gt=b(F);if(ct(gt)&&Hn(gt)){const dt=kt[U];Q=dt&&dt.get?dt.get(gt.dom,U):Qn(gt,U)}return ct(Q)?Q:X},v=F=>{const U=p(F);return we(U)?[]:U.attributes},h=(F,U,X)=>{P(F,Q=>{if(Nt(Q)){const gt=D(Q),dt=""===X?null:X,Lt=Qn(gt,U),Ht=kt[U];Ht&&Ht.set?Ht.set(gt.dom,dt,U):Xi(gt,U,dt),Lt!==dt&&e.onSetAttrib&&e.onSetAttrib({attrElm:gt.dom,attrName:U,attrValue:dt})}})},C=()=>e.root_element||t.body,E=(F,U)=>((X,Q,gt)=>{let dt=0,Lt=0;const Ht=X.ownerDocument;if(gt=gt||X,Q){if(gt===X&&Q.getBoundingClientRect&&"static"===L(D(X),"position")){const Se=Q.getBoundingClientRect();return dt=Se.left+(Ht.documentElement.scrollLeft||X.scrollLeft)-Ht.documentElement.clientLeft,Lt=Se.top+(Ht.documentElement.scrollTop||X.scrollTop)-Ht.documentElement.clientTop,{x:dt,y:Lt}}let Xt=Q;for(;Xt&&Xt!==gt&&Xt.nodeType&&!qg(Xt,gt);)dt+=Xt.offsetLeft||0,Lt+=Xt.offsetTop||0,Xt=Xt.offsetParent;for(Xt=Q.parentNode;Xt&&Xt!==gt&&Xt.nodeType&&!qg(Xt,gt);)dt-=Xt.scrollLeft||0,Lt-=Xt.scrollTop||0,Xt=Xt.parentNode;Lt+=(Se=D(Q),JS.isFirefox()&&"table"===me(Se)?Hg(Ee(Se)).filter(ze=>"caption"===me(ze)).bind(ze=>Hg(ir(ze)).map(Cr=>Cr.dom.offsetTop<=ze.dom.offsetTop?-ze.dom.offsetHeight:0)).getOr(0):0)}var Se;return{x:dt,y:Lt}})(t.body,p(F),U),S=(F,U,X)=>{const Q=p(F);var gt;if(!we(Q)&&(ts(Q)||Nt(gt=Q)&&"http://www.w3.org/2000/svg"===gt.namespaceURI))return X?L(D(Q),dh(U)):("float"===(U=U.replace(/-(\D)/g,(dt,Lt)=>Lt.toUpperCase()))&&(U="cssFloat"),Q.style?Q.style[U]:void 0)},N=F=>{const U=p(F);if(!U)return{w:0,h:0};let X=S(U,"width"),Q=S(U,"height");return X&&-1!==X.indexOf("px")||(X="0"),Q&&-1!==Q.indexOf("px")||(Q="0"),{w:parseInt(X,10)||U.offsetWidth||U.clientWidth,h:parseInt(Q,10)||U.offsetHeight||U.clientHeight}},A=(F,U)=>{if(!F)return!1;const X=it(F)?F:[F];return _e(X,Q=>ln(D(Q),U))},R=(F,U,X,Q)=>{const gt=[];let dt=p(F);Q=void 0===Q;const Lt=X||("BODY"!==C().nodeName?C().parentNode:null);if(Rt(U))if("*"===U)U=Nt;else{const Ht=U;U=Xt=>A(Xt,Ht)}for(;dt&&!(dt===Lt||we(dt.nodeType)||$i(dt)||xu(dt));){if(!U||U(dt)){if(!Q)return[dt];gt.push(dt)}dt=dt.parentNode}return Q?gt:null},M=(F,U,X)=>{let Q=U;if(F){Rt(U)&&(Q=gt=>A(gt,U));for(let gt=F[X];gt;gt=gt[X])if(be(Q)&&Q(gt))return gt}return null},P=function(F,U,X){const Q=X??this;if(it(F)){const gt=[];return Uu(F,(dt,Lt)=>{const Ht=p(dt);Ht&&gt.push(U.call(Q,Ht,Lt))}),gt}{const gt=p(F);return!!gt&&U.call(Q,gt)}},z=(F,U)=>{P(F,X=>{xe(U,(Q,gt)=>{h(X,gt,Q)})})},$=(F,U)=>{P(F,X=>{const Q=D(X);nn(Q,U)})},B=(F,U,X,Q,gt)=>P(F,dt=>{const Lt=Rt(U)?t.createElement(U):U;return ct(X)&&z(Lt,X),Q&&(!Rt(Q)&&Q.nodeType?Lt.appendChild(Q):Rt(Q)&&$(Lt,Q)),gt?Lt:dt.appendChild(Lt)}),I=(F,U,X)=>B(t.createElement(F),F,U,X,!0),j=oa.encodeAllRaw,G=(F,U)=>P(F,X=>{const Q=D(X);return U&&Z(Ee(Q),gt=>{wn(gt)&&0===gt.dom.length?Gt(gt):Bt(Q,gt)}),Gt(Q),Q.dom}),st=(F,U,X)=>{P(F,Q=>{if(Nt(Q)){const gt=D(Q),dt=U.split(" ");Z(dt,Lt=>{var Ht,Xt,ze,Cr;ct(X)?(X?H:tt)(gt,Lt):(Xt=Lt,_(Ht=gt)?Ht.dom.classList.toggle(Xt):(Cr=Xt,Ot(T(ze=Ht),Cr)?q(ze,Cr):O(ze,Cr)),K(Ht))})}})},rt=(F,U,X)=>P(U,Q=>{var gt;const dt=it(U)?F.cloneNode(!0):F;return X&&Uu(uk(Q.childNodes),Lt=>{dt.appendChild(Lt)}),null===(gt=Q.parentNode)||void 0===gt||gt.replaceChild(dt,Q),Q}),xt=()=>t.createRange(),At=(F,U,X,Q)=>{if(it(F)){let gt=F.length;const dt=[];for(;gt--;)dt[gt]=At(F[gt],U,X,Q);return dt}return!e.collect||F!==t&&F!==r||i.push([F,U,X,Q]),u.bind(F,U,X,Q||pt)},Dt=(F,U,X)=>{if(it(F)){let Q=F.length;const gt=[];for(;Q--;)gt[Q]=Dt(F[Q],U,X);return gt}if(i.length>0&&(F===t||F===r)){let Q=i.length;for(;Q--;){const[gt,dt,Lt]=i[Q];F!==gt||U&&U!==dt||X&&X!==Lt||u.unbind(gt,dt,Lt)}}return u.unbind(F,U,X)},wt=F=>{if(F&&ts(F)){const U=F.getAttribute("data-mce-contenteditable");return U&&"inherit"!==U?U:"inherit"!==F.contentEditable?F.contentEditable:null}return null},pt={doc:t,settings:e,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:u,isBlock:F=>Rt(F)?Ut(f,F):Nt(F)&&(Ut(f,F.nodeName)||na(l,F)),root:null,clone:(F,U)=>F.cloneNode(U),getRoot:C,getViewPort:F=>{const U=Ng(F);return{x:U.x,y:U.y,w:U.width,h:U.height}},getRect:F=>{const U=p(F),X=E(U),Q=N(U);return{x:X.x,y:X.y,w:Q.w,h:Q.h}},getSize:N,getParent:(F,U,X)=>{const Q=R(F,U,X,!1);return Q&&Q.length>0?Q[0]:null},getParents:R,get:p,getNext:(F,U)=>M(F,U,"nextSibling"),getPrev:(F,U)=>M(F,U,"previousSibling"),select:(F,U)=>{var X,Q;const gt=null!==(Q=null!==(X=p(U))&&void 0!==X?X:e.root_element)&&void 0!==Q?Q:t;return be(gt.querySelectorAll)?Cn(gt.querySelectorAll(F)):[]},is:A,add:B,create:I,createHTML:(F,U,X="")=>{let Q="<"+F;for(const gt in U)un(U,gt)&&(Q+=" "+gt+'="'+j(U[gt])+'"');return ps(X)&&Ut(l.getVoidElements(),F)?Q+" />":Q+">"+X+"</"+F+">"},createFragment:F=>{const U=t.createElement("div"),X=t.createDocumentFragment();let Q;for(X.appendChild(U),F&&(U.innerHTML=F);Q=U.firstChild;)X.appendChild(Q);return X.removeChild(U),X},remove:G,setStyle:(F,U,X)=>{P(F,Q=>{const gt=D(Q);fh(gt,U,X),e.update_styles&&uh(c,gt)})},getStyle:S,setStyles:(F,U)=>{P(F,X=>{const Q=D(X);xe(U,(gt,dt)=>{fh(Q,dt,gt)}),e.update_styles&&uh(c,Q)})},removeAllAttribs:F=>P(F,U=>{const X=U.attributes;for(let Q=X.length-1;Q>=0;Q--)U.removeAttributeNode(X.item(Q))}),setAttrib:h,setAttribs:z,getAttrib:g,getPos:E,parseStyle:F=>c.parse(F),serializeStyle:(F,U)=>c.serialize(F,U),addStyle:F=>{if(pt!==Re.DOM&&t===document){if(n[F])return;n[F]=!0}let U=t.getElementById("mceDefaultStyles");if(!U){U=t.createElement("style"),U.id="mceDefaultStyles",U.type="text/css";const X=t.head;X.firstChild?X.insertBefore(U,X.firstChild):X.appendChild(U)}U.styleSheet?U.styleSheet.cssText+=F:U.appendChild(t.createTextNode(F))},loadCSS:F=>{F||(F=""),Z(F.split(","),U=>{o[U]=!0,a.load(U).catch(_t)})},addClass:(F,U)=>{st(F,U,!0)},removeClass:(F,U)=>{st(F,U,!1)},hasClass:(F,U)=>{const X=b(F),Q=U.split(" ");return ct(X)&&or(Q,gt=>at(X,gt))},toggleClass:st,show:F=>{P(F,U=>ft(D(U),"display"))},hide:F=>{P(F,U=>Ha(D(U),"display","none"))},isHidden:F=>{const U=b(F);return ct(U)&&To(et(U,"display"),"none")},uniqueId:F=>(F||"mce_")+s++,setHTML:$,getOuterHTML:F=>{const U=b(F);return ct(U)?Nt(U.dom)?U.dom.outerHTML:(X=>{const Q=Mt("div"),gt=D(X.dom.cloneNode(!0));return St(Q,gt),An(Q)})(U):""},setOuterHTML:(F,U)=>{P(F,X=>{Nt(X)&&(X.outerHTML=U)})},decode:oa.decode,encode:j,insertAfter:(F,U)=>{const X=p(U);return P(F,Q=>{const gt=X?.parentNode,dt=X?.nextSibling;return gt&&(dt?gt.insertBefore(Q,dt):gt.appendChild(Q)),Q})},replace:rt,rename:(F,U)=>{if(F.nodeName!==U.toUpperCase()){const X=I(U);return Uu(v(F),Q=>{h(X,Q.nodeName,g(F,Q.nodeName))}),rt(X,F,!0),X}return F},findCommonAncestor:(F,U)=>{let X=F;for(;X;){let Q=U;for(;Q&&X!==Q;)Q=Q.parentNode;if(X===Q)break;X=X.parentNode}return!X&&F.ownerDocument?F.ownerDocument.documentElement:X},run:P,getAttribs:v,isEmpty:(F,U,X)=>It(U)?es(l,F,{...X,isContent:gt=>{const dt=gt.nodeName.toLowerCase();return!!U[dt]}}):es(l,F,X),createRng:xt,nodeIndex:$a,split:(F,U,X)=>{let Q,gt,dt=xt();if(F&&U&&F.parentNode&&U.parentNode){const Lt=F.parentNode;return dt.setStart(Lt,$a(F)),dt.setEnd(U.parentNode,$a(U)),Q=dt.extractContents(),dt=xt(),dt.setStart(U.parentNode,$a(U)+1),dt.setEnd(Lt,$a(F)+1),gt=dt.extractContents(),Lt.insertBefore(Ou(pt,Q,l),F),Lt.insertBefore(X||U,F),Lt.insertBefore(Ou(pt,gt,l),F),G(F),X||U}},bind:At,unbind:Dt,fire:(F,U,X)=>u.dispatch(F,U,X),dispatch:(F,U,X)=>u.dispatch(F,U,X),getContentEditable:wt,getContentEditableParent:F=>{const U=C();let X=null;for(let Q=F;Q&&Q!==U&&(X=wt(Q),null===X);Q=Q.parentNode);return X},isEditable:F=>{if(ct(F)){const U=Nt(F)?F:F.parentElement;return ct(U)&&ts(U)&&co(D(U))}return!1},destroy:()=>{if(i.length>0){let F=i.length;for(;F--;){const[U,X,Q]=i[F];u.unbind(U,X,Q)}}xe(o,(F,U)=>{a.unload(U),delete o[U]})},isChildOf:(F,U)=>F===U||U.contains(F),dumpRng:F=>"startContainer: "+F.startContainer.nodeName+", startOffset: "+F.startOffset+", endContainer: "+F.endContainer.nodeName+", endOffset: "+F.endOffset},kt=((F,U,X)=>{const Q=U.keep_values,dt={style:{set:(Lt,Ht)=>{const Xt=D(Lt);Q&&Xi(Xt,Hu,Ht),m(Xt,"style"),Rt(Ht)&&Zs(Xt,F.parse(Ht))},get:Lt=>{const Ht=D(Lt),Xt=Qn(Ht,Hu)||Qn(Ht,"style");return F.serialize(F.parse(Xt),me(Ht))}}};return Q&&(dt.href=dt.src={set:(Lt,Ht,Xt)=>{const Se=D(Lt);be(U.url_converter)&&ct(Ht)&&(Ht=U.url_converter.call(U.url_converter_scope||X(),String(Ht),Xt,Lt)),Xi(Se,"data-mce-"+Xt,Ht),Xi(Se,Xt,Ht)},get:(Lt,Ht)=>{const Xt=D(Lt);return Qn(Xt,"data-mce-"+Ht)||Qn(Xt,Ht)}}),dt})(c,e,mt(pt));return pt};Re.DOM=Re(document),Re.nodeIndex=$a;const mk=Re.DOM;class rs{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,r)=>{const o=mk;let s;const a=()=>{o.remove(i),s&&(s.onerror=s.onload=s=null)},i=o.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=lt._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:r,reject:o})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(l,c)=>{Te(n.scriptLoadedCallbacks,c).each(u=>{Z(u,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},o=l=>{const c=Vt(l,u=>"rejected"===u.status);return c.length>0?Promise.reject(Qe(c,({reason:u})=>it(u)?u:[u])):Promise.resolve()},s=l=>Promise.allSettled(re(l,c=>2===n.states[c]?(r("resolve",c),Promise.resolve()):3===n.states[c]?(r("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,r("resolve",c);const u=n.queue;return u.length>0?(n.queue=[],s(u).then(o)):Promise.resolve()},()=>(n.states[c]=3,r("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return k.from(u).each(Xn),o(c)})),i=Da(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,c)})}):a(i)}}rs.ScriptLoader=new rs;const Yi={},qu=gn("en"),mh=()=>Te(Yi,qu.get()),mo={getData:()=>ds(Yi,t=>({...t})),setCode:t=>{t&&qu.set(t)},getCode:()=>qu.get(),add:(t,e)=>{let n=Yi[t];n||(Yi[t]=n={});const r=re(an(e),o=>o.toLowerCase());xe(e,(o,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const c=i.indexOf(l);return-1!==c&&i.indexOf(l,c+1)>c})(r,a)?(Ut(e,a)||(n[a]=o),n[s]=o):n[a]=o})},translate:t=>{const e=mh().getOr({}),n=i=>be(i)?Object.prototype.toString.call(i):r(i)?"":""+i,r=i=>""===i||null==i,o=i=>{const l=n(i);return Ut(e,l)?n(e[l]):Te(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(r(t))return"";if(Kt(a=t)&&Ut(a,"raw"))return n(t.raw);var a,i;if(it(i=t)&&i.length>1){const i=t.slice(1);return s(o(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>Ut(i,c)?n(i[c]):l))}return s(o(t))},isRtl:()=>mh().bind(t=>Te(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>Ut(Yi,t)},qn=()=>{const t=[],e={},n={},r=[],o=(l,c)=>{const u=Vt(r,f=>f.name===l&&f.state===c);Z(u,f=>f.resolve())},s=l=>Ut(e,l),a=(l,c)=>{const u=mo.getCode();!u||c&&-1===(","+(c||"")+",").indexOf(","+u+",")||rs.ScriptLoader.add(e[l]+"/langs/"+u+".js")},i=(l,c="added")=>"added"===c&&Ut(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(u=>{r.push({name:l,state:c,resolve:u})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==qn.languageLoad&&(s(l)?a(l,c):i(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},o(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>Rt(c)?Rt(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let u=Rt(c)?c:c.prefix+c.resource+c.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=qn.baseURL+"/"+u),e[l]=u.substring(0,u.lastIndexOf("/"));const f=()=>(o(l,"loaded"),Promise.resolve());return n[l]?f():rs.ScriptLoader.add(u).then(f)},waitFor:i}};qn.languageLoad=!0,qn.baseURL="",qn.PluginManager=qn(),qn.ThemeManager=qn(),qn.ModelManager=qn();const wc=(t,e)=>{let n=null;return{cancel:()=>{Jt(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Jt(n)&&(n=setTimeout(()=>{n=null,t.apply(null,r)},e))}}},$u=(t,e)=>{let n=null;const r=()=>{Jt(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,t.apply(null,o)},e)}}},Gi=mt("mce-annotation"),aa=mt("data-mce-annotation"),Wa=mt("data-mce-annotation-uid"),Qi=mt("data-mce-annotation-active"),Zi=mt("data-mce-annotation-classes"),Ji=mt("data-mce-annotation-attrs"),ph=t=>e=>zt(e,t),gh=(t,e)=>{const n=t.selection.getRng(),r=D(n.startContainer),o=D(t.getBody()),s=e.fold(()=>"."+Gi(),i=>`[${aa()}="${i}"]`),a=$e(r,n.startOffset).getOr(r);return lo(a,s,ph(o)).bind(i=>oo(i,`${Wa()}`).bind(l=>oo(i,`${aa()}`).map(c=>{const u=bh(t,l);return{uid:l,name:c,elements:u}})))},hh=(t,e)=>{return d(t,"data-mce-bogus")||(n=t,o=ph(e),io(n,'[data-mce-bogus="all"]',o).isSome());var n,o},bh=(t,e)=>{const n=D(t.getBody()),r=Mn(n,`[${Wa()}="${e}"]`);return Vt(r,o=>!hh(o,n))},vh=(t,e)=>{const n=D(t.getBody()),r=Mn(n,`[${aa()}="${e}"]`),o={};return Z(r,s=>{if(!hh(s,n)){const a=Qn(s,Wa()),i=Te(o,a).getOr([]);o[a]=i.concat([s])}}),o},yh=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ch=0;const tl=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*yh());return Ch++,t+"_"+n+Ch+String(e)},xh=(t,e)=>D(t.dom.cloneNode(e)),ia=t=>xh(t,!1),wh=t=>xh(t,!0),Eh=(t,e,n=Ce)=>{const r=new pn(t,e),o=s=>{let a;do{a=r[s]()}while(a&&!ot(a)&&!n(a));return k.from(a).filter(ot)};return{current:()=>k.from(r.current()).filter(ot),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},la=(t,e)=>{const n=e||(o=>t.isBlock(o)||He(o)||Pe(o)),r=(o,s,a,i)=>{if(ot(o)){const l=i(o,s,o.data);if(-1!==l)return k.some({container:o,offset:l})}return a().bind(l=>r(l.container,l.offset,a,i))};return{backwards:(o,s,a,i)=>{const l=Eh(o,i??t.getRoot(),n);return r(o,s,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(o,s,a,i)=>{const l=Eh(o,i??t.getRoot(),n);return r(o,s,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},Wu=(t=>{const n=r=>t(r)?k.from(r.dom.nodeValue):k.none();return{get:r=>{if(!t(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!t(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(wn),el=t=>Wu.get(t),Sh=(t,e)=>Wu.set(t,e),Va=t=>{let e;return n=>(e=e||Dn(t,je),Ut(e,me(n)))},ca=t=>Hn(t)&&"br"===me(t),kh=Va(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Vu=Va(["ul","ol","dl"]),Ka=Va(["li","dd","dt"]),pk=Va(["thead","tbody","tfoot"]),nl=Va(["td","th"]),Ec=Va(["pre","script","textarea","style"]),Xa=()=>{const t=Mt("br");return Ze(t,"data-mce-bogus","1"),t},Es=t=>{fe(t),St(t,Xa())},hn="\ufeff",Sc=yu,vr=t=>t.replace(/\uFEFF/g,""),gk=Nt,Ya=ot,Ga=t=>(Ya(t)&&(t=t.parentNode),gk(t)&&t.hasAttribute("data-mce-caret")),Ss=t=>Ya(t)&&Sc(t.data),Rr=t=>Ga(t)||Ss(t),_h=t=>t.firstChild!==t.lastChild||!He(t.firstChild),Ku=t=>{const e=t.container();return!!ot(e)&&(e.data.charAt(t.offset())===hn||t.isAtStart()&&Ss(e.previousSibling))},Xu=t=>{const e=t.container();return!!ot(e)&&(e.data.charAt(t.offset()-1)===hn||t.isAtEnd()&&Ss(e.nextSibling))},kc=t=>Ya(t)&&t.data[0]===hn,_c=t=>Ya(t)&&t.data[t.data.length-1]===hn,Yu=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const r=e.getElementsByTagName("br"),o=r[r.length-1];ta(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Nh=t=>Ga(t.startContainer),Qa=Math.round,da=t=>t?{left:Qa(t.left),top:Qa(t.top),bottom:Qa(t.bottom),right:Qa(t.right),width:Qa(t.width),height:Qa(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Ah=(t,e)=>(t=da(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Th=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,rl=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Th(e.top-t.bottom,t,e)},ol=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&Th(e.bottom-t.top,t,e),Rh=(t,e,n)=>{const r=Math.max(Math.min(e,t.left+t.width),t.left),o=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-r)*(e-r)+(n-o)*(n-o))},Nc=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},ks=(t,e)=>{if(Nt(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},hk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Oh=t=>Rt(t)&&t.charCodeAt(0)>=768&&hk.test(t),Bh=Kr,bk=Pe,vk=He,yk=ot,Ck=uo(["script","style","textarea"]),Dh=uo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),xk=uo(["table"]),wk=Rr,po=t=>!wk(t)&&(yk(t)?!Ck(t.parentNode):Dh(t)||vk(t)||xk(t)||Gu(t)),Gu=t=>{return!(Nt(e=t)&&"true"===e.getAttribute("unselectable"))&&bk(t);var e},Ph=(t,e)=>po(t)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(Gu(o))return!1;if(Bh(o))return!0}return!0})(t,e),Lh=Nt,Ek=po,Mh=gc("display","block table"),Sk=gc("float","left right"),sl=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Lh,Ek,yo(Sk)),kk=yo(gc("white-space","pre pre-line pre-wrap")),al=ot,Qu=He,Ih=Re.nodeIndex,Ac=(t,e)=>e<0&&Nt(t)&&t.hasChildNodes()?void 0:ks(t,e),Zu=t=>t?t.createRange():Re.DOM.createRng(),Ju=t=>Rt(t)&&/[\r\n\t ]/.test(t),Fh=t=>!!t.setStart&&!!t.setEnd,tf=t=>{const e=t.startContainer,n=t.startOffset;if(Ju(t.toString())&&kk(e.parentNode)&&ot(e)){const r=e.data;if(Ju(r[n-1])||Ju(r[n+1]))return!0}return!1},jh=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,_s=t=>{var e;let n;const r=t.getClientRects();return n=da(r.length>0?r[0]:t.getBoundingClientRect()),!Fh(t)&&Qu(t)&&jh(n)?(o=>{const s=o.ownerDocument,a=Zu(s),i=s.createTextNode(cn),l=o.parentNode;l.insertBefore(i,o),a.setStart(i,0),a.setEnd(i,1);const c=da(a.getBoundingClientRect());return l.removeChild(i),c})(t):jh(n)&&Fh(t)&&null!==(e=(o=>{const a=o.endContainer,i=o.startOffset,l=o.endOffset;if(o.startContainer===a&&ot(a)&&0===i&&1===l){const c=o.cloneRange();return c.setEndAfter(a),_s(c)}return null})(t))&&void 0!==e?e:n},ua=(t,e)=>{const n=Ah(t,e);return n.width=1,n.right=n.left+1,n},Y=(t,e,n)=>{const r=()=>(n||(n=(o=>{const s=[],a=u=>{var f,p;0!==u.height&&(s.length>0&&(f=u).left===(p=s[s.length-1]).left&&f.top===p.top&&f.bottom===p.bottom&&f.right===p.right||s.push(u))},i=(u,f)=>{const p=Zu(u.ownerDocument);if(f<u.data.length){if(Oh(u.data[f]))return;if(Oh(u.data[f-1])&&(p.setStart(u,f),p.setEnd(u,f+1),!tf(p)))return void a(ua(_s(p),!1))}f>0&&(p.setStart(u,f-1),p.setEnd(u,f),tf(p)||a(ua(_s(p),!1))),f<u.data.length&&(p.setStart(u,f),p.setEnd(u,f+1),tf(p)||a(ua(_s(p),!0)))},l=o.container(),c=o.offset();if(al(l))return i(l,c),s;if(Lh(l))if(o.isAtEnd()){const u=Ac(l,c);al(u)&&i(u,u.data.length),sl(u)&&!Qu(u)&&a(ua(_s(u),!1))}else{const u=Ac(l,c);if(al(u)&&i(u,0),sl(u)&&o.isAtEnd())return a(ua(_s(u),!1)),s;const f=Ac(o.container(),o.offset()-1);sl(f)&&!Qu(f)&&(Mh(f)||Mh(u)||!sl(u))&&a(ua(_s(f),!1)),sl(u)&&a(ua(_s(u),!0))}return s})(Y(t,e))),n);return{container:mt(t),offset:mt(e),toRange:()=>{const o=Zu(t.ownerDocument);return o.setStart(t,e),o.setEnd(t,e),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(al(t),0===e),isAtEnd:()=>al(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:o=>o&&t===o.container()&&e===o.offset(),getNode:o=>Ac(t,o?e-1:e)}};Y.fromRangeStart=t=>Y(t.startContainer,t.startOffset),Y.fromRangeEnd=t=>Y(t.endContainer,t.endOffset),Y.after=t=>Y(t.parentNode,Ih(t)+1),Y.before=t=>Y(t.parentNode,Ih(t)),Y.isAbove=(t,e)=>xn(Sn(e.getClientRects()),eo(t.getClientRects()),rl).getOr(!1),Y.isBelow=(t,e)=>xn(eo(e.getClientRects()),Sn(t.getClientRects()),ol).getOr(!1),Y.isAtStart=t=>!!t&&t.isAtStart(),Y.isAtEnd=t=>!!t&&t.isAtEnd(),Y.isTextPosition=t=>!!t&&ot(t.container()),Y.isElementPosition=t=>!Y.isTextPosition(t);const Tc=(t,e)=>{ot(e)&&0===e.data.length&&t.remove(e)},ef=(t,e,n)=>{var r,s;xu(n)?((r,o,s)=>{const a=k.from(s.firstChild),i=k.from(s.lastChild);o.insertNode(s),a.each(l=>Tc(r,l.previousSibling)),i.each(l=>Tc(r,l.nextSibling))})(t,e,n):(r=t,e.insertNode(s=n),Tc(r,s.previousSibling),Tc(r,s.nextSibling))},go=ot,zh=ta,Uh=Re.nodeIndex,Hh=t=>{const e=t.parentNode;return zh(e)?Hh(e):e},nf=t=>t?us(t.childNodes,(e,n)=>(zh(n)&&"BR"!==n.nodeName?e=e.concat(nf(n)):e.push(n),e),[]):[],qh=t=>e=>t===e,$h=t=>(go(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,r;n=nf(Hh(e)),r=Hs(n,qh(e),e),n=n.slice(0,r+1);const o=us(n,(s,a,i)=>(go(a)&&go(n[i-1])&&s++,s),0);return n=qr(n,uo([e.nodeName])),r=Hs(n,qh(e),e),r-o})(t)+"]",Wh=(t,e)=>{let n,r=[],o=e.container(),s=e.offset();if(go(o))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&go(c);)l+=c.data.length;return l})(o,s);else{const i=o.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",o=i[s]}r.push($h(o));let a=((i,l)=>{const u=[];for(let f=l.parentNode;f&&f!==i;f=f.parentNode)u.push(f);return u})(t,o);return a=qr(a,yo(ta)),r=r.concat(Ao(a,i=>$h(i))),r.reverse().join("/")+","+n},Vh=(t,e)=>{if(!e)return null;const n=e.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",s=us(r,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((c,u,f)=>{let p=nf(c);return p=qr(p,(b,g)=>!go(b)||!go(p[g-1])),p=qr(p,uo([u])),p[f]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!go(s)&&s.parentNode){let a;return a="after"===o?Uh(s)+1:Uh(s),Y(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;go(l);){const u=l.data.length;if(i>=c&&i<=c+u){a=l,i-=c;break}if(!go(l.nextSibling)){a=l,i=u;break}c+=u,l=l.nextSibling}return go(a)&&i>a.data.length&&(i=a.data.length),Y(a,i)})(s,parseInt(o,10))},Rc=Pe,Kh=(t,e,n,r,o)=>{const s=o?r.startContainer:r.endContainer;let a=o?r.startOffset:r.endOffset;const i=[],l=t.getRoot();if(ot(s))i.push(n?((c,u,f)=>{let p=c(u.data.slice(0,f)).length;for(let b=u.previousSibling;b&&ot(b);b=b.previousSibling)p+=c(b.data).length;return p})(e,s,a):a);else{let c=0;const u=s.childNodes;a>=u.length&&u.length&&(c=1,a=Math.max(0,u.length-1)),i.push(t.nodeIndex(u[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(t.nodeIndex(c,n));return i},rf=(t,e,n)=>{let r=0;return lt.each(t.select(e),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},Xh=(t,e)=>{let n=e?t.startContainer:t.endContainer,r=e?t.startOffset:t.endOffset;if(Nt(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(e?r:r-1,o.length-1)],n&&(r=e?0:n.childNodes.length,e?t.setStart(n,r):t.setEnd(n,r))}},Yh=t=>(Xh(t,!0),Xh(t,!1),t),Gh=(t,e)=>{if(Nt(t)&&(t=ks(t,e),Rc(t)))return t;if(Rr(t)){ot(t)&&Ga(t)&&(t=t.parentNode);let n=t.previousSibling;if(Rc(n)||(n=t.nextSibling,Rc(n)))return n}},Qh=(t,e,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Rc(r)){const a=r.nodeName;return{name:a,index:rf(n.dom,a,r)}}const s=Gh((a=o).startContainer,a.startOffset)||Gh(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:rf(n.dom,a,s)}}return((a,i,l,c)=>{const u=i.dom,f=Kh(u,a,l,c,!0),p=i.isForward(),b=Nh(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:f,forward:p,...b}:{start:f,end:Kh(u,a,l,c,!1),forward:p,...b}})(t,n,e,o)},Zh=(t,e,n)=>{const r={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",r,"&#xFEFF;"):t.create("span",r)},Jh=(t,e)=>{const n=t.dom;let r=t.getRng();const o=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:rf(n,i,a)};const c=Yh(r.cloneRange());if(!s){c.collapse(!1);const f=Zh(n,o+"_end",e);ef(n,c,f)}r=Yh(r),r.collapse(!0);const u=Zh(n,o+"_start",e);return ef(n,r,u),t.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},of=Et(Qh,pe,!0),t0=t=>{const e=s=>s(t),n=mt(t),r=()=>o,o={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:je,isError:Ce,map:s=>tr.value(s(t)),mapError:r,bind:e,exists:e,forall:e,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:s=>{s(t)},toOptional:()=>k.some(t)};return o},e0=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,o)=>r(t),isValue:Ce,isError:je,map:e,mapError:r=>tr.error(r(t)),bind:e,exists:Ce,forall:je,getOr:pe,or:pe,getOrThunk:Co,orThunk:Co,getOrDie:mr(String(t)),each:_t,toOptional:k.none};return n},tr={value:t0,error:e0,fromOption:(t,e)=>t.fold(()=>e0(e),t0)},Do=t=>{if(!it(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return Z(t,(r,o)=>{const s=an(r);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!it(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...u)=>{if(u.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+u.length);return u[o].apply(null,l)},match:u=>{const f=an(u);if(e.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+f.join(","));if(!or(e,p=>Ot(f,p)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+"\nRequired: "+e.join(", "));return u[a].apply(null,l)},log:u=>{console.log(u,{constructors:e,constructor:a,params:l})}}}}),n};Do([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const _k=t=>"inline-command"===t.type||"inline-format"===t.type,Nk=t=>"block-command"===t.type||"block-format"===t.type,Ak=t=>{var e;const n=o=>tr.error({message:o,pattern:t}),r=(o,s,a)=>{if(void 0!==t.format){let i;if(it(t.format)){if(!or(t.format,Rt))return n(o+" pattern has non-string items in the `format` array");i=t.format}else{if(!Rt(t.format))return n(o+" pattern has non-string `format` parameter");i=[t.format]}return tr.value(s(i))}return void 0!==t.cmd?Rt(t.cmd)?tr.value(a(t.cmd,t.value)):n(o+" pattern has non-string `cmd` parameter"):n(o+" pattern is missing both `format` and `cmd` parameters")};if(!Kt(t))return n("Raw pattern is not an object");if(!Rt(t.start))return n("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!Rt(t.end))return n("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return n("Inline pattern has empty `start` and `end` parameters");let o=t.start,s=t.end;return 0===s.length&&(s=o,o=""),r("Inline",a=>({type:"inline-format",start:o,end:s,format:a}),(a,i)=>({type:"inline-command",start:o,end:s,cmd:a,value:i}))}if(void 0!==t.replacement)return Rt(t.replacement)?0===t.start.length?n("Replacement pattern has empty `start` parameter"):tr.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const o=null!==(e=t.trigger)&&void 0!==e?e:"space";return 0===t.start.length?n("Block pattern has empty `start` parameter"):r("Block",s=>({type:"block-format",start:t.start,format:s[0],trigger:o}),(s,a)=>({type:"block-command",start:t.start,cmd:s,value:a,trigger:o}))}},n0=t=>Vt(t,Nk),r0=t=>Vt(t,_k),sf=(t,e)=>({...t,blockPatterns:Vt(t.blockPatterns,n=>{return("block-command"===(r=n).type||"block-format"===r.type)&&r.trigger===e;var r})}),o0=t=>{const e=(n=>{const r=[],o=[];return Z(n,s=>{s.fold(a=>{r.push(a)},a=>{o.push(a)})}),{errors:r,values:o}})(re(t,Ak));return Z(e.errors,n=>console.error(n.message,n.pattern)),e.values},af=Pn().deviceType,Tk=af.isTouch(),Rk=Re.DOM,s0=t=>Er(t,RegExp),Ct=t=>e=>e.options.get(t),Oc=t=>Rt(t)||Kt(t),a0=(t,e="")=>n=>{const r=Rt(n);if(r){if(-1!==n.indexOf("=")){const o=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return yn(a,(i,l)=>{const c=l.split("="),u=c[0],f=c.length>1?c[1]:u;return i[Xo(u)]=Xo(f),i},{})})(n);return{value:Te(o,t.id).getOr(e),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},Ok=Ct("iframe_attrs"),Bk=Ct("doctype"),i0=Ct("document_base_url"),Dk=Ct("body_id"),Pk=Ct("body_class"),l0=Ct("content_security_policy"),Lk=Ct("br_in_pre"),Fn=Ct("forced_root_block"),il=Ct("forced_root_block_attrs"),Mk=Ct("newline_behavior"),Ik=Ct("br_newline_selector"),Fk=Ct("no_newline_selector"),jk=Ct("keep_styles"),zk=Ct("end_container_on_empty_block"),c0=Ct("automatic_uploads"),d0=Ct("images_reuse_filename"),Uk=Ct("images_replace_blob_uris"),u0=Ct("icons"),Hk=Ct("icons_url"),qk=Ct("images_upload_url"),$k=Ct("images_upload_base_path"),Wk=Ct("images_upload_credentials"),Vk=Ct("images_upload_handler"),Kk=Ct("content_css_cors"),lf=Ct("referrer_policy"),f0=Ct("language"),Xk=Ct("language_url"),m0=Ct("indent_use_margin"),Yk=Ct("indentation"),Gk=Ct("content_css"),Qk=Ct("content_style"),p0=Ct("font_css"),Zk=Ct("directionality"),Jk=Ct("inline_boundaries_selector"),g0=Ct("object_resizing"),t_=Ct("resize_img_proportional"),e_=Ct("placeholder"),h0=Ct("event_root"),n_=Ct("service_message"),Za=Ct("theme"),r_=Ct("theme_url"),cf=Ct("model"),o_=Ct("model_url"),ll=Ct("inline_boundaries"),s_=Ct("formats"),a_=Ct("preview_styles"),i_=Ct("format_empty_lines"),l_=Ct("format_noneditable_selector"),c_=Ct("custom_ui_selector"),df=Ct("inline"),d_=Ct("hidden_input"),u_=Ct("submit_patch"),f_=Ct("add_form_submit_trigger"),m_=Ct("add_unload_trigger"),p_=Ct("custom_undo_redo_levels"),g_=Ct("disable_nodechange"),b0=Ct("readonly"),h_=Ct("editable_root"),v0=Ct("content_css_cors"),Bc=Ct("plugins"),b_=Ct("external_plugins"),v_=Ct("block_unsupported_drop"),y_=Ct("visual"),C_=Ct("visual_table_class"),y0=Ct("visual_anchor_class"),C0=Ct("iframe_aria_text"),x_=Ct("setup"),w_=Ct("init_instance_callback"),E_=Ct("urlconverter_callback"),S_=Ct("auto_focus"),k_=Ct("browser_spellcheck"),__=Ct("protect"),N_=Ct("paste_block_drop"),Dc=Ct("paste_data_images"),A_=Ct("paste_preprocess"),T_=Ct("paste_postprocess"),R_=Ct("newdocument_content"),O_=Ct("paste_webkit_styles"),B_=Ct("paste_remove_styles_if_webkit"),D_=Ct("paste_merge_formats"),P_=Ct("smart_paste"),L_=Ct("paste_as_text"),M_=Ct("paste_tab_spaces"),I_=Ct("allow_html_data_urls"),F_=Ct("text_patterns"),j_=Ct("text_patterns_lookup"),x0=Ct("noneditable_class"),z_=Ct("editable_class"),U_=Ct("noneditable_regexp"),H_=Ct("preserve_cdata"),q_=Ct("highlight_on_focus"),w0=Ct("xss_sanitization"),$_=Ct("init_content_sync"),E0=t=>lt.explode(t.options.get("images_file_types")),W_=Ct("table_tab_navigation"),V_=Ct("details_initial_state"),K_=Ct("details_serialized_state"),S0=Ct("sandbox_iframes"),uf=t=>t.options.get("sandbox_iframes_exclusions"),X_=Ct("convert_unsafe_embeds"),Y_=Ct("license_key"),G_=Ct("api_key"),Q_=Nt,k0=ot,_0=t=>{const e=t.parentNode;e&&e.removeChild(t)},N0=t=>{const e=vr(t);return{count:t.length-e.length,text:e}},A0=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(hn));)t.deleteData(e,1)},T0=(t,e)=>(fa(t),e),fa=t=>{Q_(t)&&Rr(t)&&(_h(t)?t.removeAttribute("data-mce-caret"):_0(t)),k0(t)&&(A0(t),0===t.data.length&&_0(t))},J_=Pe,tN=Bo,eN=hc,R0=(t,e,n)=>{const r=Ah(e.getBoundingClientRect(),n);let o,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;o=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();o=t.scrollLeft-i.left,s=t.scrollTop-i.top}r.left+=o,r.right+=o,r.top+=s,r.bottom+=s,r.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),r.left+=a,r.right+=a),r},O0=()=>ge.browser.isFirefox(),cl=t=>J_(t)||tN(t),dl=t=>(cl(t)||Oo(t)&&O0())&&ar(D(t)).exists(co),rN=Kr,ff=Pe,oN=Bo,B0=gc("display","block table table-cell table-caption list-item"),D0=Rr,P0=Ga,sN=Nt,aN=ot,iN=po,Ja=t=>t>0,ma=t=>t<0,Pc=(t,e)=>{let n;for(;n=t(e);)if(!P0(n))return n;return null},ul=(t,e,n,r,o)=>{const s=new pn(t,r),a=ff(t)||P0(t);let i;if(ma(e)){if(a&&(i=Pc(s.prev.bind(s),!0),n(i)))return i;for(;i=Pc(s.prev.bind(s),o);)if(n(i))return i}if(Ja(e)){if(a&&(i=Pc(s.next.bind(s),!0),n(i)))return i;for(;i=Pc(s.next.bind(s),o);)if(n(i))return i}return null},Ns=(t,e)=>{for(;t&&t!==e;){if(B0(t))return t;t=t.parentNode}return null},Po=(t,e,n)=>Ns(t.container(),n)===Ns(e.container(),n),mf=(t,e)=>{if(!e)return k.none();const n=e.container(),r=e.offset();return sN(n)?k.from(n.childNodes[r+t]):k.none()},L0=(t,e)=>{var n;const r=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),r},lN=(t,e,n)=>Ns(e,t)===Ns(n,t),M0=(t,e,n)=>{const r=t?"previousSibling":"nextSibling";let o=n;for(;o&&o!==e;){let s=o[r];if(s&&D0(s)&&(s=s[r]),ff(s)||oN(s)){if(lN(e,s,o))return s;break}if(iN(s))break;o=o.parentNode}return null},fl=Et(L0,!0),ml=Et(L0,!1),pf=(t,e,n)=>{let r;const o=Et(M0,!0,e),s=Et(M0,!1,e),a=n.startContainer,i=n.startOffset;if(Ga(a)){const l=aN(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if("before"===c&&(r=l.nextSibling,dl(r)))return fl(r);if("after"===c&&(r=l.previousSibling,dl(r)))return ml(r)}if(!n.collapsed)return n;if(ot(a)){if(D0(a)){if(1===t){if(r=s(a),r)return fl(r);if(r=o(a),r)return ml(r)}if(-1===t){if(r=o(a),r)return ml(r);if(r=s(a),r)return fl(r)}return n}if(_c(a)&&i>=a.data.length-1)return 1===t&&(r=s(a),r)?fl(r):n;if(kc(a)&&i<=1)return-1===t&&(r=o(a),r)?ml(r):n;if(i===a.data.length)return r=s(a),r?fl(r):n;if(0===i)return r=o(a),r?ml(r):n}return n},I0=(t,e)=>mf(t?0:-1,e).filter(ff),pl=(t,e,n)=>{const r=pf(t,e,n);return-1===t?Y.fromRangeStart(r):Y.fromRangeEnd(r)},Lc=t=>k.from(t.getNode()).map(D),gf=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},Mc=(t,e)=>{const n=Po(t,e);return!(n||!He(t.getNode()))||n};var bn,t;(t=bn||(bn={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const cN=Pe,Lo=ot,F0=Nt,hf=He,ti=po,j0=t=>{return Dh(t)||!!Gu(e=t)&&!yn(Cn(e.getElementsByTagName("*")),(n,r)=>n||Bh(r),!1);var e},Ic=Ph,z0=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,U0=(t,e)=>{if(Ja(t)){if(ti(e.previousSibling)&&!Lo(e.previousSibling))return Y.before(e);if(Lo(e))return Y(e,0)}if(ma(t)){if(ti(e.nextSibling)&&!Lo(e.nextSibling))return Y.after(e);if(Lo(e))return Y(e,e.data.length)}return ma(t)?hf(e)?Y.before(e):Y.after(e):Y.before(e)},bf=(t,e,n)=>{let r,o,s,a;if(!F0(n)||!e)return null;if(e.isEqual(Y.after(n))&&n.lastChild){if(a=Y.after(n.lastChild),ma(t)&&ti(n.lastChild)&&F0(n.lastChild))return hf(n.lastChild)?Y.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(Lo(i)){if(ma(t)&&l>0)return Y(i,--l);if(Ja(t)&&l<i.length)return Y(i,++l);r=i}else{if(ma(t)&&l>0&&(o=z0(i,l-1),ti(o)))return!j0(o)&&(s=ul(o,t,Ic,o),s)?Lo(s)?Y(s,s.data.length):Y.after(s):Lo(o)?Y(o,o.data.length):Y.before(o);if(Ja(t)&&l<i.childNodes.length&&(o=z0(i,l),ti(o)))return hf(o)?((u,f)=>{const p=f.nextSibling;return p&&ti(p)?Lo(p)?Y(p,0):Y.before(p):bf(bn.Forwards,Y.after(f),u)})(n,o):!j0(o)&&(s=ul(o,t,Ic,o),s)?Lo(s)?Y(s,0):Y.before(s):Lo(o)?Y(o,0):Y.after(o);r=o||a.getNode()}if(r&&(Ja(t)&&a.isAtEnd()||ma(t)&&a.isAtStart())&&(r=ul(r,t,je,n,!0),Ic(r,n)))return U0(t,r);o=r&&ul(r,t,Ic,n);const c=Vo(Vt(((u,f)=>{const p=[];let b=u;for(;b&&b!==f;)p.push(b),b=b.parentNode;return p})(i,n),cN));return!c||o&&c.contains(o)?o?U0(t,o):null:(a=Ja(t)?Y.after(c):Y.before(c),a)},Mo=t=>({next:e=>bf(bn.Forwards,e,t),prev:e=>bf(bn.Backwards,e,t)}),H0=t=>Y.isTextPosition(t)?0===t.offset():po(t.getNode()),q0=t=>{if(Y.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return po(t.getNode(!0))},$0=(t,e)=>!Y.isTextPosition(t)&&!Y.isTextPosition(e)&&t.getNode()===e.getNode(!0),Or=(t,e,n)=>{const r=Mo(e);return k.from(t?r.next(n):r.prev(n))},ei=(t,e,n)=>Or(t,e,n).bind(r=>{return Po(n,r,e)&&(s=n,a=r,t?!$0(s,a)&&(Y.isTextPosition(i=s)||!He(i.getNode()))&&q0(s)&&H0(a):!$0(a,s)&&H0(s)&&q0(a))?Or(t,e,r):k.some(r);var s,a,i}),W0=(t,e,n,r)=>ei(t,e,n).bind(o=>r(o)?W0(t,e,o,r):k.some(o)),ni=(t,e)=>{const n=t?e.firstChild:e.lastChild;return ot(n)?k.some(Y(n,t?0:n.data.length)):n?po(n)?k.some(t?Y.before(n):He(r=n)?Y.before(r):Y.after(r)):((o,s,a)=>{const i=o?Y.before(a):Y.after(a);return Or(o,s,i)})(t,e,n):k.none();var r},er=Et(Or,!0),dr=Et(Or,!1),jn=Et(ni,!0),Xr=Et(ni,!1),vf="_mce_caret",Br=t=>Nt(t)&&t.id===vf,pa=(t,e)=>{let n=e;for(;n&&n!==t;){if(Br(n))return n;n=n.parentNode}return null},V0=t=>Ut(t,"name"),K0=t=>lt.isArray(t.start),Fc=t=>!(!V0(t)&&En(t.forward))||t.forward,X0=(t,e)=>(Nt(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),dN=(t,e)=>Xr(t).fold(Ce,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),Y0=(t,e,n)=>!(e.hasChildNodes()||!pa(t,e)||(((r,o)=>{var s;const a=(null!==(s=r.ownerDocument)&&void 0!==s?s:document).createTextNode(hn);r.appendChild(a),o.setStart(a,0),o.setEnd(a,0)})(e,n),0)),G0=(t,e,n,r)=>{const o=n[e?"start":"end"],s=t.getRoot();if(o){let a=s,i=o[0];for(let l=o.length-1;a&&l>=1;l--){const c=a.childNodes;if(Y0(s,a,r))return!0;if(o[l]>c.length-1)return!!Y0(s,a,r)||dN(a,r);a=c[o[l]]}ot(a)&&(i=Math.min(o[0],a.data.length)),Nt(a)&&(i=Math.min(o[0],a.childNodes.length)),e?r.setStart(a,i):r.setEnd(a,i)}return!0},yf=t=>ot(t)&&t.data.length>0,Q0=(t,e,n)=>{const r=t.get(n.id+"_"+e),o=r?.parentNode,s=n.keep;if(r&&o){let a,i;if("start"===e?s?r.hasChildNodes()?(a=r.firstChild,i=1):yf(r.nextSibling)?(a=r.nextSibling,i=0):yf(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)+1):(a=o,i=t.nodeIndex(r)):s?r.hasChildNodes()?(a=r.firstChild,i=1):yf(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)):(a=o,i=t.nodeIndex(r)),!s){const l=r.previousSibling,c=r.nextSibling;let u;for(lt.each(lt.grep(r.childNodes),f=>{ot(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});u=t.get(n.id+"_"+e);)t.remove(u,!0);if(ot(c)&&ot(l)&&!ge.browser.isOpera()){const f=l.data.length;l.appendData(c.data),t.remove(c),a=l,i=f}}return k.some(Y(a,i))}return k.none()},uN=(t,e,n)=>((r,o,s=!1)=>{return 2===o?Qh(vr,s,r):3===o?(a=>{const i=a.getRng();return{start:Wh(a.dom.getRoot(),Y.fromRangeStart(i)),end:Wh(a.dom.getRoot(),Y.fromRangeEnd(i)),forward:a.isForward()}})(r):o?{rng:(a=r).getRng(),forward:a.isForward()}:Jh(r,!1);var a})(t,e,n),fN=(t,e)=>{((n,r)=>{const o=n.dom;if(r){if(K0(r))return((s,a)=>{const i=s.createRng();return G0(s,!0,a,i)&&G0(s,!1,a,i)?k.some({range:i,forward:Fc(a)}):k.none()})(o,r);if(Rt(r.start))return((s,a)=>{const i=k.from(Vh(s.getRoot(),a.start)),l=k.from(Vh(s.getRoot(),a.end));return xn(i,l,(c,u)=>{const f=s.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Fc(a)}})})(o,r);if(Ut(r,"id"))return((s,a)=>{const i=Q0(s,"start",a),l=Q0(s,"end",a);return xn(i,l.or(i),(c,u)=>{const f=s.createRng();return f.setStart(X0(s,c.container()),c.offset()),f.setEnd(X0(s,u.container()),u.offset()),{range:f,forward:Fc(a)}})})(o,r);if(V0(r))return((s,a)=>k.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(o,r);if((s=>Ut(s,"rng"))(r))return k.some({range:r.rng,forward:Fc(r)})}return k.none()})(t,e).each(({range:n,forward:r})=>{t.setRng(n,r)})},Dr=t=>Nt(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),jc=(Z0=cn,t=>Z0===t);var Z0;const ga=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),Cf=t=>!ga(t)&&!jc(t)&&!yu(t),xf=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},J0=(t,e)=>{const n=Mn(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Vt(Qe(t,s=>{const a=Nc(s);return a?[D(a)]:[]}),nl)},ri=t=>J0(xf(t.selection.getSel()),D(t.getBody())),gl=(t,e)=>io(t,"table",e),tb=t=>_n(t).fold(mt([t]),e=>[t].concat(tb(e))),wf=t=>Wr(t).fold(mt([t]),e=>"br"===me(e)?Ln(e).map(n=>[t].concat(wf(n))).getOr([]):[t].concat(wf(e))),Ef=(t,e)=>xn((n=>{const r=n.startContainer,o=n.startOffset;return ot(r)?0===o?k.some(D(r)):k.none():k.from(r.childNodes[o]).map(D)})(e),(n=>{const r=n.endContainer,o=n.endOffset;return ot(r)?o===r.data.length?k.some(D(r)):k.none():k.from(r.childNodes[o-1]).map(D)})(e),(n,r)=>{const o=Ge(tb(t),Et(zt,n)),s=Ge(wf(t),Et(zt,r));return o.isSome()&&s.isSome()}).getOr(!1),Sf=(t,e,n,r)=>{const o=n,s=new pn(n,o),a=_o(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Ot(["td","th","table"],c.toLowerCase()));let i=n;do{if(ot(i)&&0!==lt.trim(i.data).length)return void(r?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(r?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=r?s.next():s.prev());"BODY"===o.nodeName&&(r?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},zc=t=>{const e=t.selection.getSel();return ct(e)&&e.rangeCount>0},kf=(t,e)=>{const n=ri(t);n.length>0?Z(n,r=>{const o=r.dom,s=t.dom.createRng();s.setStartBefore(o),s.setEndAfter(o),e(s,!0)}):e(t.selection.getRng(),!1)},eb=(t,e,n)=>{const r=Jh(t,e);n(r),t.moveToBookmark(r)},hl=t=>x(t?.nodeType),_f=t=>Nt(t)&&!Dr(t)&&!Br(t)&&!ta(t),nb=(t,e,n)=>{const{selection:r,dom:o}=t,s=r.getNode(),a=Pe(s);eb(r,!0,()=>{e()}),a&&Pe(s)&&o.isChildOf(s,t.getBody())?t.selection.select(s):n(r.getStart())&&mN(o,r)},mN=(t,e)=>{var n,r;const o=e.getRng(),{startContainer:s,startOffset:a}=o;if(!((i,l)=>{if(_f(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),u=parseInt(c,10);return!isNaN(u)&&u>0}return!1})(t,e.getNode())&&Nt(s)){const i=s.childNodes,l=t.getRoot();let c;if(a<i.length){const u=i[a];c=new pn(u,null!==(n=t.getParent(u,t.isBlock))&&void 0!==n?n:l)}else{const u=i[i.length-1];c=new pn(u,null!==(r=t.getParent(u,t.isBlock))&&void 0!==r?r:l),c.next(!0)}for(let u=c.current();u;u=c.next()){if("false"===t.getContentEditable(u))return;if(ot(u)&&!Af(u))return o.setStart(u,0),void e.setRng(o)}}},rb=(t,e,n)=>{if(t){const r=e?"nextSibling":"previousSibling";for(t=n?t:t[r];t;t=t[r])if(Nt(t)||!Af(t))return t}},Nf=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||na(t,e),oi=(t,e,n)=>t.schema.isValidChild(e,n),Af=(t,e=!1)=>{if(ct(t)&&ot(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return qa(n)}return!1},ob=(t,e)=>{const n=t.dom;return _f(e)&&"false"===n.getContentEditable(e)&&((r,o)=>{const s="[data-mce-cef-wrappable]",a=l_(r),i=ps(a)?s:`${s},${a}`;return ln(D(o),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},As=(t,e)=>be(t)?t(e):(ct(e)&&(t=t.replace(/%(\w+)/g,(n,r)=>e[r]||n)),t),Tf=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),Rf=(t,e)=>{if(we(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=Vi(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Uc=(t,e,n)=>{const r=t.getStyle(e,n);return Rf(r,n)},sb=(t,e)=>{let n;return t.getParent(e,r=>!!Nt(r)&&(n=t.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},Hc=(t,e,n)=>t.getParents(e,n,t.getRoot()),Of=(t,e,n)=>{const r=t.formatter.get(e);return ct(r)&&_e(r,n)},Io=t=>un(t,"block"),Pr=t=>un(t,"selector"),dn=t=>un(t,"inline"),Bf=t=>Pr(t)&&!1!==t.expand&&!dn(t),ab=t=>(e=>{const n=[];let r=e;for(;r;){if(ot(r)&&r.data!==hn||r.childNodes.length>1)return[];Nt(r)&&n.push(r),r=r.firstChild}return n})(t).length>0,Df=t=>Br(t.dom)&&ab(t.dom),si=Dr,ib=Hc,lb=Af,pN=Nf,cb=(t,e)=>{let n=e;for(;n;){if(Nt(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},db=(t,e,n,r)=>{const o=e.data;if(t){for(let s=n;s>0;s--)if(r(o.charAt(s-1)))return s}else for(let s=n;s<o.length;s++)if(r(o.charAt(s)))return s;return-1},gN=(t,e,n)=>db(t,e,n,r=>jc(r)||ga(r)),hN=(t,e,n)=>db(t,e,n,Cf),ub=(t,e,n,r,o,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(c,u,f)=>{const p=la(t);return k.from((o?p.backwards:p.forwards)(c,u,(g,v)=>si(g.parentNode)?-1:(a=g,f(o,g,v)),i))};return l(n,r,gN).bind(c=>s?l(c.container,c.offset+(o?-1:0),hN):k.some(c)).orThunk(()=>a?k.some({container:a,offset:o?0:a.length}):k.none())},fb=(t,e,n,r,o)=>{const s=r[o];ot(r)&&ps(r.data)&&s&&(r=s);const a=ib(t,r);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const c=e[l];if((!ct(c.collapsed)||c.collapsed===n.collapsed)&&Pr(c)&&t.is(a[i],c.selector))return a[i]}return r},mb=(t,e,n,r)=>{var o;let s=n;const a=t.getRoot(),i=e[0];if(Io(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(o=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==o?o:a;s=t.getParent(ot(n)?n.parentNode:n,c=>c!==a&&pN(t.schema,c),l)}if(s&&Io(i)&&i.wrapper&&(s=ib(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[r]&&!t.isBlock(s[r])&&(s=s[r],!Tf(s,"br")););return s||n},pb=(t,e,n,r)=>{const o=n.parentNode;return!ct(n[r])&&(!(o!==e&&!we(o)&&!t.isBlock(o))||pb(t,e,o,r))},qc=(t,e,n,r,o)=>{let s=n;const a=o?"previousSibling":"nextSibling",i=t.getRoot();if(ot(n)&&!lb(n)&&(o?r>0:r<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let c=s[a];c;c=c[a]){const u=ot(c)&&!pb(t,i,c,a);if(!si(c)&&(!He(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!lb(c,u))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},gb=t=>si(t.parentNode)||si(t),ha=(t,e,n,r=!1)=>{let{startContainer:o,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return Nt(o)&&o.hasChildNodes()&&(o=ks(o,s),ot(o)&&(s=0)),Nt(a)&&a.hasChildNodes()&&(a=ks(a,e.collapsed?i:i-1),ot(a)&&(i=a.data.length)),o=cb(t,o),a=cb(t,a),gb(o)&&(o=si(o)?o:o.parentNode,o=e.collapsed?o.previousSibling||o:o.nextSibling||o,ot(o)&&(s=e.collapsed?o.length:0)),gb(a)&&(a=si(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,ot(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(ub(t,t.getRoot(),o,s,!0,r).each(({container:c,offset:u})=>{o=c,s=u}),ub(t,t.getRoot(),a,i,!1,r).each(({container:c,offset:u})=>{a=c,i=u})),(dn(l)||l.block_expand)&&(dn(l)&&ot(o)&&0!==s||(o=qc(t,n,o,s,!0)),dn(l)&&ot(a)&&i!==a.data.length||(a=qc(t,n,a,i,!1))),Bf(l)&&(o=fb(t,n,e,o,"previousSibling"),a=fb(t,n,e,a,"nextSibling")),(Io(l)||Pr(l))&&(o=mb(t,n,o,"previousSibling"),a=mb(t,n,a,"nextSibling"),Io(l)&&(t.isBlock(o)||(o=qc(t,n,o,s,!0),ot(o)&&(s=0)),t.isBlock(a)||(a=qc(t,n,a,i,!1),ot(a)&&(i=a.data.length)))),Nt(o)&&o.parentNode&&(s=t.nodeIndex(o),o=o.parentNode),Nt(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:s,endContainer:a,endOffset:i}},bl=(t,e,n)=>{var r;const o=e.startOffset,s=ks(e.startContainer,o),a=e.endOffset,i=ks(e.endContainer,a-1),l=h=>{const C=h[0];ot(C)&&C===s&&o>=C.data.length&&h.splice(0,1);const E=h[h.length-1];return 0===a&&h.length>0&&E===i&&ot(E)&&h.splice(h.length-1,1),h},c=(h,C,E)=>{const S=[];for(;h&&h!==E;h=h[C])S.push(h);return S},u=(h,C)=>t.getParent(h,E=>E.parentNode===C,C),f=(h,C,E)=>{const S=E?"nextSibling":"previousSibling";for(let N=h,A=N.parentNode;N&&N!==C;N=A){A=N.parentNode;const R=c(N===h?N:N[S],S);R.length&&(E||R.reverse(),n(l(R)))}};if(s===i)return n(l([s]));const p=null!==(r=t.findCommonAncestor(s,i))&&void 0!==r?r:t.getRoot();if(t.isChildOf(s,i))return f(s,p,!0);if(t.isChildOf(i,s))return f(i,p);const b=u(s,p)||s,g=u(i,p)||i;f(s,b,!0);const v=c(b===s?b:b.nextSibling,"nextSibling",g===i?g.nextSibling:g);v.length&&n(l(v)),f(i,g)},bN=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],hb=(t,e,n,r,o,s)=>{const{uid:a=e,...i}=n;H(t,Gi()),Ze(t,`${Wa()}`,a),Ze(t,`${aa()}`,r);const{attributes:l={},classes:c=[]}=o(a,i);if(ro(t,l),u=t,Z(c,p=>{H(u,p)}),s){c.length>0&&Ze(t,`${Zi()}`,c.join(","));const u=an(l);u.length>0&&Ze(t,`${Ji()}`,u.join(","))}var u},bb=(t,e,n,r,o)=>{const s=Mt("span",t);return hb(s,e,n,r,o,!1),s},vb=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Te(s,a).map(i=>i.settings),getNames:()=>an(s)}})();((s,a)=>{const i=aa(),l=u=>k.from(u.attr(i)).bind(a.lookup),c=u=>{var f,p;u.attr(Wa(),null),u.attr(aa(),null),u.attr(Qi(),null);const b=k.from(u.attr(Ji())).map(C=>C.split(",")).getOr([]),g=k.from(u.attr(Zi())).map(C=>C.split(",")).getOr([]);Z(b,C=>u.attr(C,null));const v=null!==(p=null===(f=u.attr("class"))||void 0===f?void 0:f.split(" "))&&void 0!==p?p:[],h=ne(v,[Gi()].concat(g));u.attr("class",h.length>0?h.join(" "):null),u.attr(Zi(),null),u.attr(Ji(),null)};s.serializer.addTempAttr(Qi()),s.serializer.addAttributeFilter(i,u=>{for(const f of u)l(f).each(p=>{!1===p.persistent&&("span"===f.name?f.unwrap():c(f))})})})(t,e);const n=((s,a)=>{const i=gn({}),l=()=>({listeners:[],previous:ns()}),c=(b,g)=>{u(b,v=>(g(v),v))},u=(b,g)=>{const v=i.get(),h=g(Te(v,b).getOrThunk(l));v[b]=h,i.set(v)},f=(b,g)=>{Z(bh(s,b),v=>{g?Ze(v,Qi(),"true"):m(v,Qi())})},p=$u(()=>{const b=Wo(a.getNames());Z(b,g=>{u(g,v=>{const h=v.previous.get();return gh(s,k.some(g)).fold(()=>{h.each(C=>{var E;c(E=g,S=>{Z(S.listeners,N=>N(!1,E))}),v.previous.clear(),f(C,!1)})},({uid:C,name:E,elements:S})=>{var N,A,R;To(h,C)||(h.each(N=>f(N,!1)),A=C,R=S,c(N=E,M=>{Z(M.listeners,P=>P(!0,N,{uid:A,nodes:re(R,z=>z.dom)}))}),v.previous.set(C),f(C,!0))}),{previous:v.previous,listeners:v.listeners}})})},30);return s.on("remove",()=>{p.cancel()}),s.on("NodeChange",()=>{p.throttle()}),{addListener:(b,g)=>{u(b,v=>({previous:v.previous,listeners:v.listeners.concat([g])}))}}})(t,e),r=Qs("span"),o=s=>{Z(s,a=>{r(a)?ae(a):(i=>{tt(i,Gi()),m(i,`${Wa()}`),m(i,`${aa()}`),m(i,`${Qi()}`);const l=oo(i,`${Ji()}`).map(f=>f.split(",")).getOr([]),c=oo(i,`${Zi()}`).map(f=>f.split(",")).getOr([]);var u;Z(l,f=>m(i,f)),u=i,Z(c,f=>{tt(u,f)}),m(i,`${Zi()}`),m(i,`${Ji()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,c,u,f;c=s,u=i,f=a,(l=t).undoManager.transact(()=>{const p=l.selection,b=p.getRng(),g=ri(l).length>0,v=tl("mce-annotation");if(b.collapsed&&!g&&((h,C)=>{const E=ha(h.dom,C,[{inline:"span"}]);C.setStart(E.startContainer,E.startOffset),C.setEnd(E.endContainer,E.endOffset),h.selection.setRng(C)})(l,b),p.getRng().collapsed&&!g){const h=bb(l.getDoc(),v,f,c,u.decorate);nn(h,cn),p.getRng().insertNode(h.dom),p.select(h.dom)}else eb(p,!1,()=>{kf(l,h=>{((t,e,n,r,o,s)=>{const a=[],i=bb(t.getDoc(),n,s,r,o),l=ns(),c=()=>{l.clear()},u=p=>{Z(p,f)},f=p=>{switch(b=t,g=p,v="span",h=me(p),sr(g).fold(()=>"skipping",C=>{return"br"===h||wn(E=g)&&el(E)===hn?"valid":(E=>Hn(E)&&at(E,Gi()))(g)?"existing":Br(g.dom)?"caret":_e(bN,E=>ln(g,E))?"valid-block":oi(b,v,h)&&oi(b,me(C),v)?"valid":"invalid-child";var E})){case"invalid-child":{c();const b=Ee(p);u(b),c();break}case"valid-block":c(),hb(p,n,s,r,o,!0);break;case"valid":{const b=l.get().getOrThunk(()=>{const g=ia(i);return a.push(g),l.set(g),g});Ae(p,b);break}}var b,g,v,h};bl(t.dom,e,p=>{c(),(b=>{const g=re(b,D);u(g)})(p)})})(l,h,v,c,u.decorate,f)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{gh(t,k.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();o(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();xe(vh(t,s),(i,l)=>{o(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=vh(t,s);return ds(a,i=>re(i,l=>l.dom))}}},vl=t=>({getBookmark:Et(uN,t),moveToBookmark:Et(fN,t)});vl.isBookmarkNode=Dr;const yb=(t,e,n)=>!n.collapsed&&_e(n.getClientRects(),r=>{return a=e,(s=t)>=(o=r).left&&s<=o.right&&a>=o.top&&a<=o.bottom;var o,s,a}),Cb=(t,e,n)=>{t.dispatch(e,n)},xb=(t,e,n,r)=>{t.dispatch("FormatApply",{format:e,node:n,vars:r})},wb=(t,e,n,r)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:r})},Eb=(t,e)=>t.dispatch("SetContent",e),Sb=(t,e)=>t.dispatch("GetContent",e),Pf=(t,e)=>{t.dispatch("AutocompleterUpdateActiveRange",e)},kb=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),vt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||vt.metaKeyPressed(t),metaKeyPressed:t=>ge.os.isMacOS()||ge.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},ba="data-mce-selected",_b=Math.abs,$c=Math.round,Lf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Nb=(t,e)=>{const n=e.dom,r=e.getDoc(),o=document,s=e.getBody();let a,i,l,c,u,f,p,b,g,v,h,C,E,S,N;const A=pt=>ct(pt)&&(Pg(pt)||n.is(pt,"figure.image")),R=pt=>Bo(pt)||n.hasClass(pt,"mce-preview-object"),M=pt=>{const kt=pt.target;((F,U)=>{if("longpress"===(X=F).type||0===X.type.indexOf("touch")){const X=F.touches[0];return A(F.target)&&!yb(X.clientX,X.clientY,U)}var X;return A(F.target)&&!yb(F.clientX,F.clientY,U)})(pt,e.selection.getRng())&&!pt.isDefaultPrevented()&&e.selection.select(kt)},P=pt=>n.hasClass(pt,"mce-preview-object")&&ct(pt.firstElementChild)?[pt,pt.firstElementChild]:n.is(pt,"figure.image")?[pt.querySelector("img")]:[pt],z=pt=>{const kt=g0(e);return!!kt&&"false"!==pt.getAttribute("data-mce-resize")&&pt!==e.getBody()&&(n.hasClass(pt,"mce-preview-object")&&ct(pt.firstElementChild)?ln(D(pt.firstElementChild),kt):ln(D(pt),kt))},$=(pt,kt,F)=>{if(ct(F)){const U=P(pt);Z(U,X=>{X.style[kt]||!e.schema.isValid(X.nodeName.toLowerCase(),kt)?n.setStyle(X,kt,F):n.setAttrib(X,kt,""+F)})}},B=(pt,kt,F)=>{$(pt,"width",kt),$(pt,"height",F)},I=pt=>{let kt,F,U,X,Q;kt=pt.screenX-f,F=pt.screenY-p,C=kt*c[2]+b,E=F*c[3]+g,C=C<5?5:C,E=E<5?5:E,U=(A(a)||R(a))&&!1!==t_(e)?!vt.modifierPressed(pt):vt.modifierPressed(pt),U&&(_b(kt)>_b(F)?(E=$c(C*v),C=$c(E/v)):(C=$c(E/v),E=$c(C*v))),B(i,C,E),X=c.startPos.x+kt,Q=c.startPos.y+F,X=X>0?X:0,Q=Q>0?Q:0,n.setStyles(l,{left:X,top:Q,display:"block"}),l.innerHTML=C+" &times; "+E,c[2]<0&&i.clientWidth<=C&&n.setStyle(i,"left",void 0+(b-C)),c[3]<0&&i.clientHeight<=E&&n.setStyle(i,"top",void 0+(g-E)),kt=s.scrollWidth-S,F=s.scrollHeight-N,kt+F!==0&&n.setStyles(l,{left:X-kt,top:Q-F}),h||(e.dispatch("ObjectResizeStart",{target:a,width:b,height:g,origin:"corner-"+c.name}),h=!0)},j=()=>{const pt=h;h=!1,pt&&($(a,"width",C),$(a,"height",E)),n.unbind(r,"mousemove",I),n.unbind(r,"mouseup",j),o!==r&&(n.unbind(o,"mousemove",I),n.unbind(o,"mouseup",j)),n.remove(i),n.remove(l),n.remove(u),G(a),pt&&(e.dispatch("ObjectResized",{target:a,width:C,height:E,origin:"corner-"+c.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},G=pt=>{Dt();const kt=n.getPos(pt,s),F=kt.x,U=kt.y,X=pt.getBoundingClientRect(),Q=X.width||X.right-X.left,gt=X.height||X.bottom-X.top;a!==pt&&(rt(),a=pt,C=E=0);const dt=e.dispatch("ObjectSelected",{target:pt});z(pt)&&!dt.isDefaultPrevented()?xe(Lf,(Lt,Ht)=>{let Xt=n.get("mceResizeHandle"+Ht);Xt&&n.remove(Xt),Xt=n.add(s,"div",{id:"mceResizeHandle"+Ht,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Ht+"-resize; margin:0; padding:0"}),n.bind(Xt,"mousedown",Se=>{Se.stopImmediatePropagation(),Se.preventDefault(),(ze=>{const Cr=P(a)[0];f=ze.screenX,p=ze.screenY,b=Cr.clientWidth,g=Cr.clientHeight,v=g/b,c=Lt,c.name=Ht,c.startPos={x:Q*Lt[0]+F,y:gt*Lt[1]+U},S=s.scrollWidth,N=s.scrollHeight,u=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=((yt,te)=>{if(R(te))return yt.create("img",{src:ge.transparentSrc});if(Oo(te)){const ce=Ve(c.name,"n")?Sn:eo,ee=te.cloneNode(!0);return ce(yt.select("tr",ee)).each(he=>{const Oe=yt.select("td,th",he);yt.setStyle(he,"height",null),Z(Oe,ht=>yt.setStyle(ht,"height",null))}),ee}return te.cloneNode(!0)})(n,a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:F,top:U,margin:0}),B(i,Q,gt),i.removeAttribute(ba),s.appendChild(i),n.bind(r,"mousemove",I),n.bind(r,"mouseup",j),o!==r&&(n.bind(o,"mousemove",I),n.bind(o,"mouseup",j)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},b+" &times; "+g)})(Se)}),Lt.elm=Xt,n.setStyles(Xt,{left:Q*Lt[0]+F-Xt.offsetWidth/2,top:gt*Lt[1]+U-Xt.offsetHeight/2})}):rt(!1)},st=wc(G,0),rt=(pt=!0)=>{st.cancel(),Dt(),a&&pt&&a.removeAttribute(ba),xe(Lf,(kt,F)=>{const U=n.get("mceResizeHandle"+F);U&&(n.unbind(U),n.remove(U))})},xt=(pt,kt)=>n.isChildOf(pt,kt),At=pt=>{if(h||e.removed||e.composing)return;const kt="mousedown"===pt.type?pt.target:t.getNode(),F=lo(D(kt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(X=>X.dom).filter(X=>n.isEditable(X.parentElement)||"IMG"===X.nodeName&&n.isEditable(X)).getOrUndefined(),U=ct(F)?n.getAttrib(F,ba,"1"):"1";if(Z(n.select(`img[${ba}],hr[${ba}]`),X=>{X.removeAttribute(ba)}),ct(F)&&xt(F,s)&&e.hasFocus()){wt();const X=t.getStart(!0);if(xt(X,F)&&xt(t.getEnd(!0),F))return n.setAttrib(F,ba,U),void st.throttle(F)}rt()},Dt=()=>{xe(Lf,pt=>{pt.elm&&(n.unbind(pt.elm),delete pt.elm)})},wt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{wt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",At),e.on("keyup compositionend",pt=>{a&&"TABLE"===a.nodeName&&At(pt)}),e.on("hide blur",rt),e.on("contextmenu longpress",M,!0)}),e.on("remove",Dt),{isResizable:z,showResizeRect:G,hideResizeRect:rt,updateResizeRect:At,destroy:()=>{st.cancel(),a=i=u=null}}},Ab=(t,e,n)=>{const r=t.document.createRange();var o,s;return o=r,e.fold(s=>{o.setStartBefore(s.dom)},(s,a)=>{o.setStart(s.dom,a)},s=>{o.setStartAfter(s.dom)}),s=r,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),r},Mf=(t,e,n,r,o)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(r.dom,o),s},yl=Do([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Tb=(t,e,n)=>e(D(n.startContainer),n.startOffset,D(n.endContainer),n.endOffset),Rb=(t,e,n,r)=>({start:t,soffset:e,finish:n,foffset:r}),If=Do([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),os={before:If.before,on:If.on,after:If.after,cata:(t,e,n,r)=>t.fold(e,n,r),getStart:t=>t.fold(pe,pe,pe)},Wc=Do([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ai={domRange:Wc.domRange,relative:Wc.relative,exact:Wc.exact,exactFromRange:t=>Wc.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:r=>D(r.startContainer),relative:(r,o)=>os.getStart(r),exact:(r,o,s,a)=>r});return so(e)},range:Rb},Vc=(t,e)=>{const n=me(t);return"input"===n?os.after(t):Ot(["br","img"],n)?0===e?os.before(t):os.after(t):os.on(t,e)},yN=(t,e)=>{const n=t.fold(os.before,Vc,os.after),r=e.fold(os.before,Vc,os.after);return ai.relative(n,r)},Ob=(t,e,n,r)=>{const o=Vc(t,e),s=Vc(n,r);return ai.relative(o,s)},Ff=(t,e)=>{const n=(e||document).createDocumentFragment();return Z(t,r=>{n.appendChild(r.dom)}),D(n)},Bb=(t,e,n)=>((t,e,n)=>{return(a=t.document,i=e,l=n,a.caretPositionFromPoint?(u=i,f=l,k.from(null===(p=(c=a).caretPositionFromPoint)||void 0===p?void 0:p.call(c,u,f)).bind(b=>{if(null===b.offsetNode)return k.none();const g=c.createRange();return g.setStart(b.offsetNode,b.offset),g.collapse(),k.some(g)})):a.caretRangeFromPoint?((c,u,f)=>{var p;return k.from(null===(p=c.caretRangeFromPoint)||void 0===p?void 0:p.call(c,u,f))})(a,i,l):k.none()).map(a=>Rb(D(a.startContainer),a.startOffset,D(a.endContainer),a.endOffset));var a,i,l,c,u,f,p})(so(D(n)).dom,t,e).map(o=>{const s=n.createRange();return s.setStart(o.start.dom,o.soffset),s.setEnd(o.finish.dom,o.foffset),s}).getOrUndefined(),jf=(t,e)=>ct(t)&&ct(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,Db=(t,e,n)=>null!==((r,o,s)=>{let a=r;for(;a&&a!==o;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),wN=(t,e,n)=>Db(t,e,r=>r.nodeName===n),EN=(t,e)=>Rr(t)&&!Db(t,e,Br),Pb=(t,e,n)=>{const r=e.parentNode;if(r){const o=new pn(e,t.getParent(r,t.isBlock)||t.getRoot());let s;for(;s=o[n?"prev":"next"]();)if(He(s))return!0}return!1},zf=(t,e,n,r,o)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=o.parentNode;let l,c;if(!i)return k.none();const u=t.getParent(i,t.isBlock)||s;if(r&&He(o)&&e&&t.isEmpty(u))return k.some(Y(i,t.nodeIndex(o)));const f=new pn(o,u);for(;c=f[r?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||EN(c,s))return k.none();if(ot(c)&&c.data.length>0)return wN(c,s,"A")?k.none():k.some(Y(c,r?c.data.length:0));if(t.isBlock(c)||a[c.nodeName.toLowerCase()])return k.none();l=c}return xs(l)?k.none():n&&l?k.some(Y(l,0)):k.none()},Lb=(t,e,n,r)=>{const o=t.getRoot();let s,a=!1,i=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const c=Nt(i)&&l===i.childNodes.length,u=t.schema.getNonEmptyElements();let f=n;if(Rr(i))return k.none();if(Nt(i)&&l>i.childNodes.length-1&&(f=!1),$i(i)&&(i=o,l=0),i===o){if(f&&(s=i.childNodes[l>0?l-1:0],s)&&(Rr(s)||u[s.nodeName]||Oo(s)))return k.none();if(i.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=ot(i)&&c?i.data.length:0,!e&&i===o.lastChild&&Oo(i)||((p,b)=>{let g=b;for(;g&&g!==p;){if(Pe(g))return!0;g=g.parentNode}return!1})(o,i)||Rr(i)||wu(i))return k.none();if(i.hasChildNodes()&&!Oo(i)){s=i;const p=new pn(i,o);do{if(Pe(s)||Rr(s)){a=!1;break}if(ot(s)&&s.data.length>0){l=f?0:s.data.length,i=s,a=!0;break}if(u[s.nodeName.toLowerCase()]&&!qS(s)){l=t.nodeIndex(s),i=s.parentNode,f||l++,a=!0;break}}while(s=f?p.next():p.prev())}}}return e&&(ot(i)&&0===l&&zf(t,c,e,!0,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),Nt(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!He(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||Pb(t,s,!1)||Pb(t,s,!0)||zf(t,c,e,!0,s).each(p=>{i=p.container(),l=p.offset(),a=!0}))),f&&!e&&ot(i)&&l===i.data.length&&zf(t,c,e,!1,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),a&&i?k.some(Y(i,l)):k.none();var g},Kc=(t,e)=>{const n=e.collapsed,r=e.cloneRange(),o=Y.fromRangeStart(e);return Lb(t,n,!0,r).each(s=>{n&&Y.isAbove(o,s)||r.setStart(s.container(),s.offset())}),n||Lb(t,n,!1,r).each(s=>{r.setEnd(s.container(),s.offset())}),n&&r.collapse(!0),jf(e,r)?k.none():k.some(r)},Xc=(t,e)=>t.splitText(e),Yc=t=>{let e=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset;if(e===r&&ot(e)){if(n>0&&n<e.data.length)if(r=Xc(e,n),e=r.previousSibling,o>n){o-=n;const s=Xc(r,o).previousSibling;e=r=s,o=s.data.length,n=0}else o=0}else if(ot(e)&&n>0&&n<e.data.length&&(e=Xc(e,n),n=0),ot(r)&&o>0&&o<r.data.length){const s=Xc(r,o).previousSibling;r=s,o=s.data.length}return{startContainer:e,startOffset:n,endContainer:r,endOffset:o}},va=t=>({walk:(e,n)=>bl(t,e,n),split:Yc,expand:(e,n={type:"word"})=>{if("word"===n.type){const r=ha(t,e,[{inline:"span"}]),o=t.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return e},normalize:e=>Kc(t,e).fold(Ce,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});va.compareRanges=jf,va.getCaretRangeFromPoint=Bb,va.getSelectedNode=Nc,va.getNode=ks;const SN=(t=>{const n=o=>{const s=(a=>{const i=a.dom;return ao(a)?i.getBoundingClientRect().height:i.offsetHeight})(o);if(s<=0||null===s){const a=L(o,t);return parseFloat(a)||0}return s},r=(o,s)=>yn(s,(a,i)=>{const l=L(o,i),c=void 0===l?0:parseInt(l,10);return isNaN(c)?a:a+c},0);return{set:(o,s)=>{if(!x(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=o.dom;Jo(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:r,max:(o,s,a)=>{const i=r(o,a);return s>i?s-i:0}}})("height"),Mb=()=>D(document),Ib=(t,e)=>t.view(e).fold(mt([]),n=>{const r=t.owner(n),o=Ib(t,r);return[n].concat(o)});var kN=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?k.none():k.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(D)},owner:t=>Le(t)});const Uf=t=>"textarea"===me(t),Fb=(t,e)=>{const n=(o=>{const s=o.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===o.dom)return De(a.offsetLeft,a.offsetTop);const c=Vr(i?.pageYOffset,l.scrollTop),u=Vr(i?.pageXOffset,l.scrollLeft),f=Vr(l.clientTop,a.clientTop),p=Vr(l.clientLeft,a.clientLeft);return cr(o).translate(u-p,c-f)})(t),r=SN.get(t);return{element:t,bottom:n.top+r,height:r,pos:n,cleanup:e}},jb=(t,e,n,r)=>{NN(t,(o,s)=>_N(t,e,n,r),n)},zb=(t,e,n,r,o)=>{const s={elm:r.element.dom,alignToTop:o};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(t,e,Cs(e).top,r,o),t.dispatch("AfterScrollIntoView",s))},_N=(t,e,n,r)=>{D(t.getBody());const s=D(t.getDoc()),a=((i,l)=>{const c=((f,p)=>{const b=Ee(f);if(0===b.length||Uf(f))return{element:f,offset:p};if(p<b.length&&!Uf(b[p]))return{element:b[p],offset:0};{const g=b[b.length-1];return Uf(g)?{element:f,offset:p}:"img"===me(g)?{element:g,offset:1}:wn(g)?{element:g,offset:el(g).length}:{element:g,offset:Ee(g).length}}})(i,l),u=ut('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Bt(c.element,u),Fb(u,()=>Gt(u))})(D(n.startContainer),n.startOffset);zb(t,s,e,a,r),a.cleanup()},Ub=(t,e,n,r)=>{const o=D(t.getDoc());zb(t,o,n,Fb(D(e),_t),r)},NN=(t,e,n)=>{const r=n.startContainer,o=n.startOffset,s=n.endContainer,a=n.endOffset;e(D(r),D(s));const i=t.dom.createRng();i.setStart(r,o),i.setEnd(s,a),t.selection.setRng(n)},Hf=(t,e,n,r,o)=>{const s=e.pos;if(r)zi(s.left,s.top,o);else{const a=s.top-n+e.height;zi(-t.getBody().getBoundingClientRect().left,a,o)}},Hb=(t,e,n,r,o,s)=>{const a=r+n,i=o.pos.top,l=o.bottom,c=l-i>=r;i<n?Hf(t,o,r,!1!==s,e):i>a?Hf(t,o,r,c?!1!==s:!0===s,e):l>a&&!c&&Hf(t,o,r,!0===s,e)},qb=(t,e,n,r,o)=>{const s=so(e).dom.innerHeight;Hb(t,e,n,s,r,o)},$b=(t,e,n,r,o)=>{const s=so(e).dom.innerHeight;Hb(t,e,n,s,r,o);const a=(l=>{const c=Mb(),u=Cs(c),f=((g,v)=>{const h=v.owner(g);return Ib(v,h)})(l,kN),p=cr(l),b=$o(f,(g,v)=>{const h=cr(v);return{left:g.left+h.left,top:g.top+h.top}},{left:0,top:0});return De(b.left+p.left+u.left,b.top+p.top+u.top)})(r.element),i=Ng(window);a.top<i.y?Ui(r.element,!1!==o):a.top>i.bottom&&Ui(r.element,!0===o)},AN=(t,e,n)=>jb(t,qb,e,n),TN=(t,e,n)=>Ub(t,e,qb,n),RN=(t,e,n)=>jb(t,$b,e,n),ON=(t,e,n)=>Ub(t,e,$b,n),Cl=(t,e,n)=>{(t.inline?AN:RN)(t,e,n)},Wb=(t,e=!1)=>t.dom.focus({preventScroll:e}),Vb=t=>{const e=Ie(t).dom;return t.dom===e.activeElement},qf=(t=Mb())=>k.from(t.dom.activeElement).map(D),Kb=(t,e)=>{const n=wn(e)?el(e).length:Ee(e).length+1;return t>n?n:t<0?0:t},BN=t=>ai.range(t.start,Kb(t.soffset,t.start),t.finish,Kb(t.foffset,t.finish)),Xb=(t,e)=>!pc(e.dom)&&(kn(t,e)||zt(t,e)),Yb=t=>e=>Xb(t,e.start)&&Xb(t,e.finish),DN=t=>ai.range(D(t.startContainer),t.startOffset,D(t.endContainer),t.endOffset),PN=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),k.some(e)}catch{return k.none()}},Gc=t=>{const e=t.inline||ge.browser.isFirefox()?(n=D(t.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?k.from(o.getRangeAt(0)):k.none()).map(DN)})(so(n).dom).filter(Yb(n))):k.none();var n;t.bookmark=e.isSome()?e:t.bookmark},$f=t=>(t.bookmark?t.bookmark:k.none()).bind(e=>{return n=D(t.getBody()),k.from(e).filter(Yb(n)).map(BN);var n}).bind(PN),Gb={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Lr={setEditorTimeout:(t,e,n)=>{return x(o=n)||(o=0),setTimeout(()=>{t.removed||e()},o);var o},setEditorInterval:(t,e,n)=>{const r=(x(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(r):e()},s));var s;return r}};let ii;const Wf=Re.DOM,Vf=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Qc=(t,e)=>{const n=c_(t);return null!==Wf.getParent(e,o=>{return Nt(s=o)&&Gb.isEditorUIElement(s)||!!n&&t.dom.is(o,n);var s})},Kf=t=>{try{const e=Ie(D(t.getElement()));return qf(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},LN=(t,e)=>{const n=e.editor;(o=>{const s=wc(()=>{Gc(o)},0);o.on("init",()=>{var a,c;o.inline&&((a,i)=>{const l=()=>{i.throttle()};Re.DOM.bind(document,"mouseup",l),a.on("remove",()=>{Re.DOM.unbind(document,"mouseup",l)})})(o,s),c=s,(a=o).on("mouseup touchend",u=>{c.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Gc(a)})}),o.on("remove",()=>{s.cancel()})})(n);const r=(o,s)=>{q_(o)&&!0!==o.inline&&s(D(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=t.focusedEditor;Vf(Kf(n))&&r(n,H),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Lr.setEditorTimeout(n,()=>{const o=t.focusedEditor;Vf(Kf(n))&&o===n||r(n,tt),Qc(n,Kf(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),ii||(ii=o=>{const s=t.activeEditor;s&&Ar(o).each(a=>{a.ownerDocument===document&&(a===document.body||Qc(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Wf.bind(document,"focusin",ii))},MN=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&ii&&(Wf.unbind(document,"focusin",ii),ii=null)},Qb=(t,e)=>{var n,r,o;(n=D(t.getBody()),r=e,(o=r,o.collapsed?k.from(ks(o.startContainer,o.startOffset)).map(D):k.none()).bind(o=>pk(o)?k.some(o):kn(n,o)?k.none():k.some(n))).bind(n=>jn(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Zc=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},li=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(r=D(n),Vb(r)||(o=r,qf(Ie(o)).filter(s=>o.dom.contains(s.dom))).isSome());var r,o})(t):ct((e=t).iframeElement)&&Vb(D(e.iframeElement));var e},Zb=t=>li(t)||(e=>{const n=Ie(D(e.getElement()));return qf(n).filter(r=>!Vf(r.dom)&&Qc(e,r.dom)).isSome()})(t),Xf=t=>t.editorManager.setActive(t),Jb=(t,e)=>e.collapsed?t.isEditable(e.startContainer):t.isEditable(e.startContainer)&&t.isEditable(e.endContainer),tv=(t,e,n,r,o)=>{const a=n?e.startOffset:e.endOffset;return k.from(n?e.startContainer:e.endContainer).map(D).map(i=>r&&e.collapsed?i:$e(i,o(i,a)).getOr(i)).bind(i=>Hn(i)?k.some(i):sr(i).filter(Hn)).map(i=>i.dom).getOr(t)},ev=(t,e,n=!1)=>tv(t,e,!0,n,(r,o)=>Math.min(Nn(r),o)),nv=(t,e,n=!1)=>tv(t,e,!1,n,(r,o)=>o>0?o-1:o),rv=(t,e)=>{const n=t;for(;t&&ot(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Yf=(t,e)=>re(e,n=>{const r=t.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),IN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Jc=(t,e,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(t[r])return t[r];if(t!==e){let s=t[o];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[o],s)return s}},FN=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!qa(n))return!1;const r=t.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},ov=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class $n{static create(e,n){const r=new $n(e,IN[e]||1);return n&&xe(n,(o,s)=>{r.attr(s,o)}),r}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const r=this;if(!Rt(e))return ct(e)&&xe(e,(s,a)=>{r.attr(a,s)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(e in o.map){delete o.map[e];let s=o.length;for(;s--;)if(o[s].name===e)return o.splice(s,1),r}return r}if(e in o.map){let s=o.length;for(;s--;)if(o[s].name===e){o[s].value=n;break}}else o.push({name:e,value:n});return o.map[e]=n,r}return o.map[e]}}clone(){const e=this,n=new $n(e.name,e.type),r=e.attributes;if(r){const o=[];o.map={};for(let s=0,a=r.length;s<a;s++){const i=r[s];"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const r=n.next;e.insert(n,e,!0),n=r}e.remove()}remove(){const e=this,n=e.parent,r=e.next,o=e.prev;return n&&(n.firstChild===e?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===e?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const r=n.lastChild;return r?(r.next=e,e.prev=r,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,r){e.parent&&e.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===o.lastChild?o.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=o,e}getAll(e){const n=this,r=[];for(let o=n.firstChild;o;o=Jc(o,n))o.name===e&&r.push(o);return r}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let o=e.firstChild;o;o=Jc(o,e))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},r){var o;const s=this;let a=s.firstChild;if(ov(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||ov(a))return!1}if(8===a.type||3===a.type&&!FN(a)||3===a.type&&a.parent&&n[a.parent.name]&&qa(null!==(o=a.value)&&void 0!==o?o:"")||r&&r(a))return!1}while(a=Jc(a,s));return!0}walk(e){return Jc(this,null,e)}}const jN=lt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),sv=t=>Rt(t.nodeValue)&&t.nodeValue.includes(hn),av=t=>(0===t.length?"":`${re(t,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',iv=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>sv(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),lv=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,e=>{if(sv(e)){const n=e.parentNode;return n&&Ut(jN,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),zN=t=>null!==iv(t).nextNode(),UN=t=>null!==lv(t).nextNode(),HN=(t,e)=>null!==e.querySelector(av(t)),qN=(t,e)=>{Z(e.querySelectorAll(av(t)),n=>{const r=D(n);"all"===Qn(r,"data-mce-bogus")?Gt(r):Z(t,o=>{d(r,o)&&m(r,o)})})},cv=t=>{let e=t.nextNode();for(;null!==e;)e.nodeValue=null,e=t.nextNode()},$N=Bn(cv,iv),WN=Bn(cv,lv),dv=(t,e)=>{const n=[{condition:Et(HN,e),action:Et(qN,e)},{condition:zN,action:$N},{condition:UN,action:WN}];let r=t,o=!1;return Z(n,({condition:s,action:a})=>{s(r)&&(o||(r=t.cloneNode(!0),o=!0),a(r))}),r},uv=t=>{const e=Mn(t,"[data-mce-bogus]");Z(e,n=>{"all"===Qn(n,"data-mce-bogus")?Gt(n):ca(n)?(Bt(n,le("\ufeff")),Gt(n)):ae(n)})},fv=t=>{const e=Mn(t,"input");Z(e,n=>{m(n,"name")})},mv=lt.makeMap,pv=t=>{const e=[],n=(t=t||{}).indent,r=mv(t.indent_before||""),o=mv(t.indent_after||""),s=oa.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,c)=>{if(n&&r[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}if(e.push("<",i),l)for(let u=0,f=l.length;u<f;u++){const p=l[u];e.push(" ",p.name,'="',s(p.value,!0),'"')}if(e[e.length]=!c||a?">":" />",c&&n&&o[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&o[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},Ts=(t={},e=ws())=>{const n=pv(t);return t.validate=!("validate"in t)||t.validate,{serialize:r=>{const o=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const u=i.name,f=u in e.getVoidElements();let p=i.attributes;if(o&&p&&p.length>1){const b=[];b.map={};const g=e.getElementRule(i.name);if(g){for(let v=0,h=g.attributesOrder.length;v<h;v++){const C=g.attributesOrder[v];if(C in p.map){const E=p.map[C];b.map[C]=E,b.push({name:C,value:E})}}for(let v=0,h=p.length;v<h;v++){const C=p[v].name;if(!(C in b.map)){const E=p.map[C];b.map[C]=E,b.push({name:C,value:E})}}p=b}}if(n.start(u,p,f),ea(u))Rt(i.value)&&n.text(i.value,!0),n.end(u);else if(!f){let b=i.firstChild;if(b){"pre"!==u&&"textarea"!==u||3!==b.type||"\n"!==(null===(l=b.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(b)}while(b=b.next)}n.end(u)}}};return 1!==r.type||t.inner?3===r.type?s[3](r):s[11](r):a(r),n.getContent()}}},gv=new Set;Z(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{gv.add(t)});const hv=new Set;Z(["background-color"],t=>{hv.add(t)});const bv=["font","text-decoration","text-emphasis"],ci=(t,e)=>{return an((n=t).parseStyle(n.getAttrib(e,"style")));var n},vv=(t,e)=>_e(ci(t,e),n=>gv.has(n)),yv=(t,e,n)=>k.from(n.container()).filter(ot).exists(r=>{const o=t?0:-1;return e(r.data.charAt(n.offset()+o))}),Gf=Et(yv,!0,ga),Qf=Et(yv,!1,ga),KN=t=>{const e=t.container();return ot(e)&&(0===e.data.length||Sc(e.data)&&vl.isBookmarkNode(e.parentNode))},Rs=(t,e)=>n=>mf(t?0:-1,n).filter(e).isSome(),Cv=t=>Pg(t)&&"block"===L(D(t),"display"),xv=t=>{return Pe(t)&&!(Nt(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},XN=Rs(!0,Cv),YN=Rs(!1,Cv),xl=Rs(!0,Bo),wl=Rs(!1,Bo),wv=Rs(!0,Oo),Zf=Rs(!1,Oo),Os=Rs(!0,xv),Bs=Rs(!1,xv),Ev=(t,e)=>{return o=Ce,kn(r=e,n=t)?vs(n,s=>o(s)||zt(s,r)).slice(0,-1):[];var n,r,o},ss=(t,e)=>[t].concat(Ev(t,e)),Jf=(t,e,n)=>W0(t,e,n,KN),Sv=(t,e,n)=>Ge(ss(D(e.container()),t),(r=>o=>r.isBlock(me(o)))(n)),kv=(t,e,n,r)=>Jf(t,e.dom,n).forall(o=>Sv(e,n,r).fold(()=>!Po(o,n,e.dom),s=>!Po(o,n,e.dom)&&kn(s,D(o.container())))),_v=(t,e,n,r)=>Sv(e,n,r).fold(()=>Jf(t,e.dom,n).forall(o=>!Po(o,n,e.dom)),o=>Jf(t,o.dom,n).isNone()),tm=Et(_v,!1),Nv=Et(_v,!0),GN=Et(kv,!1),QN=Et(kv,!0),ZN=t=>Lc(t).exists(ca),td=(t,e,n,r)=>{const o=Vt(ss(D(n.container()),e),a=>r.isBlock(me(a))),s=Sn(o).getOr(e);return Or(t,s.dom,n).filter(ZN)},em=(t,e,n)=>Lc(e).exists(ca)||td(!0,t,e,n).isSome(),ed=(t,e,n)=>{return(r=e,k.from(r.getNode(!0)).map(D)).exists(ca)||td(!1,t,e,n).isSome();var r},Av=Et(td,!1),JN=Et(td,!0),Tv=t=>Y.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),Rv=(t,e,n)=>{const r=Vt(ss(D(e.container()),t),o=>n.isBlock(me(o)));return Sn(r).getOr(t)},Ov=(t,e,n)=>Tv(e)?Qf(e):Qf(e)||dr(Rv(t,e,n).dom,e).exists(Qf),Bv=(t,e,n)=>Tv(e)?Gf(e):Gf(e)||er(Rv(t,e,n).dom,e).exists(Gf),nm=t=>Lc(t).bind(e=>Zn(e,Hn)).exists(e=>{return n=L(e,"white-space"),Ot(["pre","pre-wrap"],n);var n}),Dv=(t,e)=>n=>{return r=new pn(n,t)[e](),ct(r)&&Pe(r)&&B0(r);var r},Pv=(t,e,n)=>{return!nm(e)&&(s=n,dr((r=t).dom,o=e).isNone()||er(r.dom,o).isNone()||tm(r,o,s)||Nv(r,o,s)||ed(r,o,s)||em(r,o,s)||Ov(t,e,n)||Bv(t,e,n));var r,o,s},El=(t,e,n)=>!nm(e)&&(tm(t,e,n)||GN(t,e,n)||ed(t,e,n)||Ov(t,e,n)||((r,o)=>{const s=dr(r.dom,o).getOr(o),a=Dv(r.dom,"prev");return o.isAtStart()&&(a(o.container())||a(s.container()))})(t,e)),Sl=(t,e,n)=>!nm(e)&&(Nv(t,e,n)||QN(t,e,n)||em(t,e,n)||Bv(t,e,n)||((r,o)=>{const s=er(r.dom,o).getOr(o),a=Dv(r.dom,"next");return o.isAtEnd()&&(a(o.container())||a(s.container()))})(t,e)),rm=(t,e,n)=>El(t,e,n)||Sl(t,(r=>{const o=r.container(),s=r.offset();return ot(o)&&s<o.data.length?Y(o,s+1):r})(e),n),Lv=(t,e)=>jc(t.charAt(e)),Mv=(t,e)=>ga(t.charAt(e)),Iv=(t,e,n,r)=>{const o=e.data,s=Y(e,0);return n||!Lv(o,0)||rm(t,s,r)?!!(n&&Mv(o,0)&&El(t,s,r))&&(e.data=cn+o.slice(1),!0):(e.data=" "+o.slice(1),!0)},Fv=(t,e,n,r)=>{const o=e.data,s=Y(e,o.length-1);return n||!Lv(o,o.length-1)||rm(t,s,r)?!!(n&&Mv(o,o.length-1)&&Sl(t,s,r))&&(e.data=o.slice(0,-1)+cn,!0):(e.data=o.slice(0,-1)+" ",!0)},jv=(t,e,n,r)=>{if(0===n)return;const o=D(t),s=Tr(o,c=>r.isBlock(me(c))).getOr(o),a=t.data.slice(e,e+n),i=e+n>=t.data.length&&Sl(s,Y(t,t.data.length),r),l=0===e&&El(s,Y(t,0),r);t.replaceData(e,n,Bg(a,4,l,i))},nd=(t,e,n)=>{const r=t.data.slice(e),o=r.length-du(r).length;jv(t,e,o,n)},om=(t,e,n)=>{const r=t.data.slice(0,e),o=r.length-ms(r).length;jv(t,e-o,o,n)},sm=(t,e,n,r,o=!0)=>{const s=ms(t.data).length,a=o?t:e,i=o?e:t;return o?a.appendData(i.data):a.insertData(0,i.data),Gt(D(i)),r&&nd(a,s,n),a},eA=(t,e)=>((n,r)=>{const o=n.container(),s=n.offset();return!Y.isTextPosition(n)&&o===r.parentNode&&s>Y.before(r).offset()})(e,t)?Y(e.container(),e.offset()-1):e,zv=t=>{return po(t.previousSibling)?k.some(ot(e=t.previousSibling)?Y(e,e.data.length):Y.after(e)):t.previousSibling?Xr(t.previousSibling):k.none();var e},Uv=t=>{return po(t.nextSibling)?k.some(ot(e=t.nextSibling)?Y(e,0):Y.before(e)):t.nextSibling?jn(t.nextSibling):k.none();var e},Hv=(t,e,n)=>{n.fold(()=>{t.focus()},r=>{t.selection.setRng(r.toRange(),e)})},rA=(t,e)=>e&&Ut(t.schema.getBlockElements(),me(e)),ya=(t,e,n,r=!0,o=!1)=>{const s=((t,e,n)=>{return(r=t,o=e,s=n,r?(a=o,Uv(i=s).orThunk(()=>zv(i)).orThunk(()=>{return er(l=a,Y.after(c=i)).orThunk(()=>dr(l,Y.before(c)));var l,c})):((a,i)=>zv(i).orThunk(()=>Uv(i)).orThunk(()=>{return l=a,k.from((c=i).previousSibling?c.previousSibling:c.parentNode).bind(u=>dr(l,Y.before(u))).orThunk(()=>er(l,Y.after(c)));var l,c}))(o,s)).map(Et(eA,n));var r,o,s,a,i})(e,t.getBody(),n.dom),a=Tr(n,Et(rA,t),(i=t.getBody(),c=>c.dom===i));var i;const l=((c,u,f,p)=>{const b=Ln(c).filter(wn),g=hr(c).filter(wn);return Gt(c),(v=b,h=g,C=u,E=(S,N,A)=>{const R=S.dom,M=N.dom,P=R.data.length;return sm(R,M,f,p),A.container()===M?Y(R,P):A},v.isSome()&&h.isSome()&&C.isSome()?k.some(E(v.getOrDie(),h.getOrDie(),C.getOrDie())):k.none()).orThunk(()=>(p&&(b.each(S=>om(S.dom,S.dom.length,f)),g.each(S=>nd(S.dom,0,f))),u));var v,h,C,E})(n,s,t.schema,(u=n,Ut(t.schema.getTextInlineElements(),me(u))));var u;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(c=>((u,f,p)=>{if(In(u,f)){const b=ut('<br data-mce-bogus="1">');return p?Z(Ee(f),g=>{Df(g)||Gt(g)}):fe(f),St(f,b),k.some(Y.before(b.dom))}return k.none()})(t.schema,c,o)).fold(()=>{r&&Hv(t,e,l)},c=>{r&&Hv(t,e,k.some(c))})},oA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Ca=(t,e)=>ln(D(e),Jk(t))&&!na(t.schema,e)&&t.dom.isEditable(e),qv=t=>{var e,n;return"rtl"===Re.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",oA.test(n))},Ds=(t,e,n)=>{const r=(o=t,s=e,Vt(Re.DOM.getParents(n.container(),"*",s),o));var o,s;return k.from(r[r.length-1])},Mr=(t,e)=>{const n=e.container(),r=e.offset();return t?Ss(n)?ot(n.nextSibling)?Y(n.nextSibling,0):Y.after(n):Ku(e)?Y(n,r+1):e:Ss(n)?ot(n.previousSibling)?Y(n.previousSibling,n.previousSibling.data.length):Y.before(n):Xu(e)?Y(n,r-1):e},$v=Et(Mr,!0),Wv=Et(Mr,!1),Vv=(t,e)=>{const n=r=>r.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},rd=t=>Vv(t,"Delete"),Kv=t=>Vv(t,"ForwardDelete"),sA=t=>kh(t)||Ka(t),od=(t,e)=>kn(t,e)?Zn(e,sA,(n=>r=>To(sr(r),n,zt))(t)):k.none(),am=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},Xv=(t,e,n)=>xn(jn(n),Xr(n),(r,o)=>{const s=Mr(!0,r),a=Mr(!1,o),i=Mr(!1,e);return t?er(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s)):dr(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a))}).getOr(!0),Yv=t=>{var e;return(8===Fi(e=t)||"#comment"===me(e)?Ln(t):Wr(t)).bind(Yv).orThunk(()=>k.some(t))},Gv=(t,e,n,r=!0)=>{var o;e.deleteContents();const s=Yv(n).getOr(n),a=D(null!==(o=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==o?o:n.dom);if(a.dom===t.getBody()?am(t,r):In(t.schema,a,{checkRootAsContent:!1})&&(Es(a),r&&t.selection.setCursorLocation(a.dom,0)),!zt(n,a)){const l=To(sr(a),n)?[]:sr(i=a).map(Ee).map(c=>Vt(c,u=>!zt(i,u))).getOr([]);Z(l.concat(Ee(n)),c=>{zt(c,a)||kn(c,a)||!In(t.schema,c)||Gt(c)})}var i},im=t=>Mn(t,"td,th"),Qv=(t,e)=>gl(D(t),e),lm=(t,e)=>({start:t,end:e}),kl=Do([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),sd=(t,e)=>lo(D(t),"td,th",e),Zv=t=>!zt(t.start,t.end),Jv=(t,e)=>gl(t.start,e).bind(n=>gl(t.end,e).bind(r=>hs(zt(n,r),n))),cm=t=>e=>Jv(e,t).map(n=>((r,o,s)=>({rng:r,table:o,cells:s}))(e,n,im(n))),ty=(t,e,n,r)=>{if(n.collapsed||!t.forall(Zv))return k.none();if(e.isSameTable){const o=t.bind(cm(r));return k.some({start:o,end:o})}{const o=sd(n.startContainer,r),s=sd(n.endContainer,r),a=o.bind((l=>c=>gl(c,l).bind(u=>eo(im(u)).map(f=>lm(c,f))))(r)).bind(cm(r)),i=s.bind((l=>c=>gl(c,l).bind(u=>Sn(im(u)).map(f=>lm(f,c))))(r)).bind(cm(r));return k.some({start:a,end:i})}},ey=(t,e)=>js(t,n=>zt(n,e)),dm=t=>xn(ey(t.cells,t.rng.start),ey(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),ny=(t,e)=>{const{startTable:n,endTable:r}=e,o=t.cloneRange();return n.each(s=>o.setStartAfter(s.dom)),r.each(s=>o.setEndBefore(s.dom)),o},ry=t=>Z(t,e=>{m(e,"contenteditable"),Es(e)}),um=(t,e,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(e.dom.lastChild)):(o.setStartBefore(e.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),fm(t,o,e,!1).each(s=>s())},oy=t=>{const e=ri(t),n=D(t.selection.getNode());hc(n.dom)&&In(t.schema,n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&_e(e,r=>zt(r,n))&&Ze(n,"data-mce-selected","1")},sy=(t,e,n)=>k.some(()=>{const r=t.selection.getRng(),o=n.bind(({rng:s,isStartInTable:a})=>{const i=k.from((c=t).dom.getParent(a?s.endContainer:s.startContainer,c.dom.isBlock)).map(D);var c;s.deleteContents(),((c,u,f)=>{f.each(p=>{u?Gt(p):(Es(p),c.selection.setCursorLocation(p.dom,0))})})(t,a,i.filter(Et(In,t.schema)));const l=a?e[0]:e[e.length-1];return um(t,l,r,a),In(t.schema,l)?k.none():k.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);ry(o),oy(t)}),iA=(t,e,n,r)=>k.some(()=>{const o=t.selection.getRng(),s=e[0],a=n[n.length-1];um(t,s,o,!0),um(t,a,o,!1);const i=In(t.schema,s)?e:e.slice(1),l=In(t.schema,a)?n:n.slice(0,-1);ry(i.concat(l)),r.deleteContents(),oy(t)}),fm=(t,e,n,r=!0)=>k.some(()=>{Gv(t,e,n,r)}),lA=(t,e)=>k.some(()=>ya(t,!1,e)),ay=(t,e)=>Ge(ss(e,t),nl),mm=(t,e)=>Ge(ss(e,t),Qs("caption")),ad=(t,e)=>k.some(()=>{Es(e),t.selection.setCursorLocation(e.dom,0)}),iy=(t,e)=>t?wv(e):Zf(e),pm=(t,e)=>{const n=D(t.selection.getStart(!0)),r=ri(t);return t.selection.isCollapsed()&&0===r.length?((t,e,n)=>{const r=D(t.getBody());return mm(r,n).fold(()=>((o,s,a,i)=>{const l=Y.fromRangeStart(o.selection.getRng());return ay(a,i).bind(c=>{return In(o.schema,c,{checkRootAsContent:!1})?ad(o,c):(f=a,b=c,g=l,ei(s,o.getBody(),g).bind(v=>ay(f,D(v.getNode())).bind(h=>zt(h,b)?k.none():k.some(_t))));var f,b,g})})(t,e,r,n).orThunk(()=>hs(((o,s)=>{const a=Y.fromRangeStart(o.selection.getRng());return iy(s,a)||Or(s,o.getBody(),a).exists(i=>iy(s,i))})(t,e),_t)),o=>((s,a,i,l)=>{const c=Y.fromRangeStart(s.selection.getRng());return In(s.schema,l)?ad(s,l):(f=i,b=l,g=c,ei(p=a,(u=s).getBody(),g).fold(()=>k.some(_t),v=>{return C=p,E=g,S=v,jn((h=b).dom).bind(N=>Xr(h.dom).map(A=>C?E.isEqual(N)&&S.isEqual(A):E.isEqual(A)&&S.isEqual(N))).getOr(!0)?((h,C)=>ad(h,C))(u,b):((h,C,E)=>mm(h,D(E.getNode())).fold(()=>k.some(_t),S=>hs(!zt(S,C),_t)))(f,b,v);var h,C,E,S}));var u,f,p,b,g})(t,e,r,o))})(t,e,n):((o,s,a)=>{const i=D(o.getBody()),l=o.selection.getRng();return 0!==a.length?sy(o,a,k.none()):(c=o,f=l,mm(u=i,s).fold(()=>{return b=c,((t,e)=>{const n=(s=>a=>zt(s,a))(t),r=((s,a)=>{const i=sd(s.startContainer,a),l=sd(s.endContainer,a);return xn(i,l,lm)})(e,n),o=((s,a)=>{const i=Qv(s.startContainer,a),l=Qv(s.endContainer,a),c=i.isSome(),u=l.isSome(),f=xn(i,l,zt).getOr(!1);return xn((p={startTable:i,endTable:l,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u}).startTable,p.endTable,(b,g)=>{const v=Rg(b,C=>zt(C,g)),h=Rg(g,C=>zt(C,b));return v||h?{...p,startTable:v?k.none():p.startTable,endTable:h?k.none():p.endTable,isSameTable:!1,isMultiTable:!1}:p}).getOr(p);var p})(e,n);return a=e,i=n,r.exists(l=>{return u=i,!Zv(c=l)&&Jv(c,u).exists(f=>{const p=f.dom.rows;return 1===p.length&&1===p[0].cells.length})&&Ef(l.start,a);var c,u})?r.map(s=>kl.singleCellTable(e,s.start)):o.isMultiTable?((s,a,i,l)=>ty(s,a,i,l).bind(({start:c,end:u})=>{const f=c.bind(dm).getOr([]),p=u.bind(dm).getOr([]);if(f.length>0&&p.length>0){const b=ny(i,a);return k.some(kl.multiTable(f,p,b))}return k.none()}))(r,o,e,n):((s,a,i,l)=>ty(s,a,i,l).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=a,f=dm(c).getOr([]);if(u&&c.cells.length===f.length)return k.some(kl.fullTable(c.table));if(f.length>0){if(u)return k.some(kl.partialTable(f,k.none()));{const p=ny(i,a);return k.some(kl.partialTable(f,k.some({...a,rng:p})))}}return k.none()}))(r,o,e,n);var a,i})(u,f).bind(h=>h.fold(Et(fm,b),Et(lA,b),Et(sy,b),Et(iA,b)));var b},b=>ad(c,b)));var c,u,f})(t,n,r)},xa=(t,e)=>{let n=e;for(;n&&n!==t;){if(Kr(n)||Pe(n))return n;n=n.parentNode}return null},dA=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],uA=lt.each,gm=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),r=o=>_e(dA,s=>Ve(o,s))||n.has(o);return{compare:(o,s)=>{if(o.nodeName!==s.nodeName||o.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return uA(e.getAttribs(l),u=>{const f=u.nodeName.toLowerCase();"style"===f||r(f)||(c[f]=e.getAttrib(l,f))}),c},i=(l,c)=>{for(const u in l)if(Ut(l,u)){const f=c[u];if(Me(f)||l[u]!==f)return!1;delete c[u]}for(const u in c)if(Ut(c,u))return!1;return!0};return!(Nt(o)&&Nt(s)&&(!i(a(o),a(s))||!i(e.parseStyle(e.getAttrib(o,"style")),e.parseStyle(e.getAttrib(s,"style"))))||Dr(o)||Dr(s))},isAttributeInternal:r}},ly=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),cy=(t,e,n,r)=>{const o=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const c=r.attributes[l];c?c.nodes.push(n):r.attributes[l]={filter:i,nodes:[n]}}}},dy=(t,e)=>{const n=(r,o)=>{xe(r,s=>{const a=Cn(s.nodes);Z(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(o?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!we(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},uy=(t,e,n,r={})=>{const o=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&(c=>{let f=c;for(;f=f.walk();)cy(s,a,f,l)})(i),l})(t,e,n);dy(o,r)},hm=(t,e,n,r)=>{if((t.pad_empty_with_br||e.insert)&&n(r)){const o=new $n("br",1);e.insert&&o.attr("data-mce-bogus","1"),r.empty().append(o)}else r.empty().append(new $n("#text",3)).value=cn},fy=(t,e)=>{const n=t?.firstChild;return ct(n)&&n===t.lastChild&&n.name===e},_l=(t,e,n,r)=>r.isEmpty(e,n,o=>((s,a)=>{const i=s.getElementRule(a.name);return!0===i?.paddEmpty})(t,o)),fA=t=>{let e;for(let n=t;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(e=n)}return k.from(e)},bm=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const r=t.children();for(const o of r)n&&!e.isValidChild(n.name,o.name)&&bm(o,e,n);t.unwrap()}},vm=(t,e,n,r=_t)=>{const o=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=lt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=u=>u!==n&&!i[u.name];for(let u=0;u<t.length;u++){const f=t[u];let p,b,g;if(!f.parent||l.has(f))continue;if(o[f.name]&&"li"===f.parent.name){let h=f.next;for(;h&&o[h.name];)h.name="li",l.add(h),f.parent.insert(h,f.parent),h=h.next;f.unwrap();continue}const v=[f];for(p=f.parent;p&&!e.isValidChild(p.name,f.name)&&c(p);p=p.parent)v.push(p);if(p&&v.length>1)if(ym(e,f,p))bm(f,e);else{v.reverse(),b=v[0].clone(),r(b);let h=b;for(let C=0;C<v.length-1;C++){e.isValidChild(h.name,v[C].name)&&C>0?(g=v[C].clone(),r(g),h.append(g)):g=h;for(let E=v[C].firstChild;E&&E!==v[C+1];){const S=E.next;g.append(E),E=S}h=g}_l(e,s,a,b)?p.insert(f,v[0],!0):(p.insert(b,v[0],!0),p.insert(f,b)),p=v[0],(_l(e,s,a,p)||fy(p,"br"))&&p.empty().remove()}else if(f.parent){if("li"===f.name){let h=f.prev;if(h&&("ul"===h.name||"ol"===h.name)){h.append(f);continue}if(h=f.next,h&&("ul"===h.name||"ol"===h.name)&&h.firstChild){h.insert(f,h.firstChild,!0);continue}const C=new $n("ul",1);r(C),f.wrap(C);continue}if(e.isValidChild(f.parent.name,"div")&&e.isValidChild("div",f.name)){const h=new $n("div",1);r(h),f.wrap(h)}else bm(f,e)}}},ym=(t,e,n=e.parent)=>{return!(!n||(!t.children[e.name]||t.isValidChild(n.name,e.name))&&("a"!==e.name||!(r=>{let s=r;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n))&&(r=n,"summary"!==r.name||!ly(e)||n?.firstChild===e&&n?.lastChild===e));var r},Cm=t=>t.collapsed?t:(e=>{const n=Y.fromRangeStart(e),r=Y.fromRangeEnd(e),o=e.commonAncestorContainer;return Or(!1,o,r).map(s=>!Po(n,r,o)&&Po(n,s,o)?((a,i,l,c)=>{const u=document.createRange();return u.setStart(a,i),u.setEnd(l,c),u})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),xm=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},my=(t,e)=>{const n=Y.after(t),r=Mo(e).prev(n);return r?r.toRange():null},hA=["pre"],wm=hc,bA=(t,e,n)=>{var r,o;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,c=Ts({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=vr(e)),-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u);let f=s.getRng();const p=f.startContainer,b=t.getBody();var S,N;p===b&&s.isCollapsed()&&a.isBlock(b.firstChild)&&(S=t,ct(N=b.firstChild)&&!S.schema.getVoidElements()[N.nodeName])&&a.isEmpty(b.firstChild)&&(f=a.createRng(),f.setStart(b.firstChild,0),f.setEnd(b.firstChild,0),s.setRng(f)),s.isCollapsed()||(S=>{const N=S.dom,A=Cm(S.selection.getRng());S.selection.setRng(A);const R=N.getParent(A.startContainer,wm);var M,P,z;M=N,P=A,ct(z=R)&&z===M.getParent(P.endContainer,wm)&&Ef(D(z),P)?fm(S,A,D(R)):A.startContainer===A.endContainer&&A.endOffset-A.startOffset==1&&ot(A.startContainer.childNodes[A.startOffset])?A.deleteContents():S.getDoc().execCommand("Delete",!1)})(t);const g=s.getNode(),v={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},h=i.parse(e,v);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,r=e.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,s)=>{const a=o.getNonEmptyElements();return ct(s)&&(s.isEmpty(a)||(l=s,o.getBlockElements()[l.name]&&ct((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===cn)(l.firstChild)));var l,c})(t,r)&&(r=r?.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(t.schema,h)&&((S,N)=>!!xm(S,N))(a,g))return f=((t,e,n,r)=>{const o=((f,p,b)=>{const g=p.serialize(b);return(v=>{var h,C;const E=v.firstChild,S=v.lastChild;return E&&"META"===E.nodeName&&(null===(h=E.parentNode)||void 0===h||h.removeChild(E)),S&&"mce_marker"===S.id&&(null===(C=S.parentNode)||void 0===C||C.removeChild(S)),v})(f.createFragment(g))})(e,t,r),s=xm(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||ct(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((r=e.firstChild).data===cn||He(r)))?t.slice(0,-1):t;var r,e,n})((i=o.firstChild,Vt(null!==(l=i?.childNodes)&&void 0!==l?l:[],f=>"LI"===f.nodeName)));var i,l;const c=e.getRoot(),u=f=>{const p=Y.fromRangeStart(n),b=Mo(e.getRoot()),g=1===f?b.prev(p):b.next(p),v=g?.getNode();return!v||xm(e,v)!==s};return s?u(1)?((f,p,b)=>{const g=f.parentNode;return g&&lt.each(p,v=>{g.insertBefore(v,f)}),((v,h)=>{const C=Y.before(v),E=Mo(h).next(C);return E?E.toRange():null})(f,b)})(s,a,c):u(2)?(f=s,b=c,e.insertAfter((p=a).reverse(),f),my(p[0],b)):((f,p,b,g)=>{const v=((C,E)=>{const S=E.cloneRange(),N=E.cloneRange();return S.setStartBefore(C),N.setEndAfter(C),[S.cloneContents(),N.cloneContents()]})(f,g),h=f.parentNode;return h&&(h.insertBefore(v[0],f),lt.each(p,C=>{h.insertBefore(C,f)}),h.insertBefore(v[1],f),h.removeChild(f)),my(p[p.length-1],b)})(s,a,c,n):null;var f,p,b})(c,a,s.getRng(),h),f&&s.setRng(f),e;!0===n.paste&&((S,N,A,R)=>{var M;const P=N.firstChild,z=N.lastChild,$=P===("bookmark"===z.attr("data-mce-type")?z.prev:z),B=Ot(hA,P.name);if($&&B){const I="false"!==P.attr("contenteditable"),j=(null===(M=S.getParent(A,S.isBlock))||void 0===M?void 0:M.nodeName.toLowerCase())===P.name,G=k.from(xa(R,A)).forall(Kr);return I&&j&&G}return!1})(a,h,g,t.getBody())&&(null===(r=h.firstChild)||void 0===r||r.unwrap()),(S=>{let N=S;for(;N=N.walk();)1===N.type&&N.attr("data-mce-fragment","1")})(h);let C=h.lastChild;if(C&&"mce_marker"===C.attr("id")){const S=C;for(C=C.prev;C;C=C.walk(!0))if(3===C.type||!a.isBlock(C.name)){C.parent&&t.schema.isValidChild(C.parent.name,"span")&&C.parent.insert(S,C,"br"===C.name);break}}if(t._selectionOverrides.showBlockCaretContainer(g),v.invalid||((S,N,A)=>{var R;return _e(A.children(),ly)&&"SUMMARY"===(null===(R=S.getParent(N,S.isBlock))||void 0===R?void 0:R.nodeName)})(a,g,h)){t.selection.setContent(u);let S,N=s.getNode();const A=t.getBody();for($i(N)?N=S=A:S=N;S&&S!==A;)N=S,S=S.parentNode;e=N===A?A.innerHTML:a.getOuterHTML(N);const R=i.parse(e),M=(I=>{for(let j=I;j;j=j.walk())if("mce_marker"===j.attr("id"))return k.some(j);return k.none()})(R),P=M.bind(fA).getOr(R);M.each(I=>I.replace(h));const z=h.children(),$=null!==(o=h.parent)&&void 0!==o?o:R;h.unwrap();const B=Vt(z,I=>ym(t.schema,I,$));vm(B,t.schema,P),uy(i.getNodeFilters(),i.getAttributeFilters(),R),e=c.serialize(R),N===A?a.setHTML(A,e):a.setOuterHTML(N,e)}else e=c.serialize(h),((S,N,A)=>{var R;if("all"===A.getAttribute("data-mce-bogus"))null===(R=A.parentNode)||void 0===R||R.insertBefore(S.dom.createFragment(N),A);else{const M=A.firstChild;!M||M===A.lastChild&&"BR"===M.nodeName?S.dom.setHTML(A,N):S.selection.setContent(N,{no_events:!0})}})(t,e,g);var E;return((S,N)=>{const A=S.schema.getTextInlineElements(),R=S.dom;if(N){const M=S.getBody(),P=gm(S),z="*[data-mce-fragment]",$=R.select(z);lt.each($,B=>{const I=st=>ct(A[st.nodeName.toLowerCase()]),j=st=>1===st.childNodes.length;if(!vv(R,G=B)&&(!vv(st=R,rt=G)||!_e(ci(st,rt),xt=>hv.has(xt)))&&I(B)&&j(B)){const st=ci(R,B),rt=(wt,pt)=>or(wt,kt=>Ot(pt,kt)),xt=wt=>j(B)&&R.is(wt,z)&&I(wt)&&(wt.nodeName===B.nodeName&&rt(st,ci(R,wt))||xt(wt.children[0])),At=wt=>ct(wt)&&wt!==M&&(P.compare(B,wt)||At(wt.parentElement)),Dt=wt=>ct(wt)&&wt!==M&&R.is(wt,z)&&(((pt,kt,F)=>{const U=ci(pt,kt),X=ci(pt,F),Q=gt=>{var dt,Lt;const Ht=null!==(dt=pt.getStyle(kt,gt))&&void 0!==dt?dt:"",Xt=null!==(Lt=pt.getStyle(F,gt))&&void 0!==Lt?Lt:"";return Sr(Ht)&&Sr(Xt)&&Ht!==Xt};return _e(U,gt=>{const dt=Lt=>_e(Lt,Ht=>Ht===gt);if(!dt(X)&&dt(bv)){const Lt=Vt(X,Ht=>_e(bv,Xt=>Ve(Ht,Xt)));return _e(Lt,Q)}return Q(gt)})})(R,B,wt)||Dt(wt.parentElement));(xt(B.children[0])||At(B.parentElement)&&!Dt(B.parentElement))&&R.remove(B,!0)}var st,rt,G})}})(t,l),((S,N)=>{var A,R,M;let P;const z=S.dom,$=S.selection;if(!N)return;$.scrollIntoView(N);const B=xa(S.getBody(),N);if(B&&"false"===z.getContentEditable(B))return z.remove(N),void $.select(B);let I=z.createRng();const j=N.previousSibling;if(ot(j)){I.setStart(j,null!==(R=null===(A=j.nodeValue)||void 0===A?void 0:A.length)&&void 0!==R?R:0);const st=N.nextSibling;ot(st)&&(j.appendData(st.data),null===(M=st.parentNode)||void 0===M||M.removeChild(st))}else I.setStartBefore(N),I.setEndBefore(N);const G=z.getParent(N,z.isBlock);if(z.remove(N),G&&z.isEmpty(G)){const st=wm(G);fe(D(G)),I.setStart(G,0),I.setEnd(G,0),st||G.getAttribute("data-mce-fragment")||!(P=(rt=>{let xt=Y.fromRangeStart(rt);return xt=Mo(S.getBody()).next(xt),xt?.toRange()})(I))?z.add(G,z.create("br",st?{}:{"data-mce-bogus":"1"})):(I=P,z.remove(G))}$.setRng(I)})(t,a.get("mce_marker")),E=t.getBody(),lt.each(E.getElementsByTagName("*"),S=>{S.removeAttribute("data-mce-fragment")}),((S,N,A)=>{k.from(S.getParent(N,"td,th")).map(D).each(R=>{return P=A,void Wr(M=R).each(z=>{Ln(z).each($=>{P.isBlock(me(M))&&ca(z)&&P.isBlock(me($))&&Gt(z)})});var M,P})})(a,s.getStart(),t.schema),((S,N,A)=>{const R=vs(D(A),M=>zt(M,D(N)));zs(R,R.length-2).filter(Hn).fold(()=>_u(S,N),M=>_u(S,M.dom))})(t.schema,t.getBody(),s.getStart()),e},id=t=>t instanceof $n,Em=(t,e,n)=>{var r;t.dom.setHTML(t.getBody(),e),!0!==n&&li(r=t)&&jn(r.getBody()).each(o=>{const s=o.getNode(),a=Oo(s)?jn(s).getOr(o):o;r.selection.setRng(a.toRange())})},py=t=>be(t)?t:Ce,Sm=(t,e,n)=>{const r=e(t),o=py(n);return r.orThunk(()=>o(t)?k.none():((s,a,i)=>{let l=s.dom;const c=py(i);for(;l.parentNode;){l=l.parentNode;const u=D(l),f=a(u);if(f.isSome())return f;if(c(u))break}return k.none()})(t,e,o))},km=Tf,gy=(t,e,n)=>{const r=t.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const s=r[o];if(Pr(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},_m=(t,e,n,r,o)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!gy(t,i,n)||i.parentNode===s||!!Fo(t,i,n,r,!0));return!!Fo(t,a,n,r,o)},ld=(t,e,n)=>!(!dn(n)||!km(e,n.inline))||!(!Io(n)||!km(e,n.block))||!!Pr(n)&&Nt(e)&&t.is(e,n.selector),hy=(t,e,n,r,o,s)=>{const a=n[r],i="attributes"===r;if(be(n.onmatch))return n.onmatch(e,n,r);if(a)if(nc(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):Uc(t,e,a[l]))return!0}else for(const l in a)if(Ut(a,l)){const c=i?t.getAttrib(e,l):Uc(t,e,l),u=As(a[l],s),f=we(c)||ps(c);if(f&&we(u))continue;if(o&&f&&!n.exact||(!o||n.exact)&&!km(c,Rf(u,l)))return!1}return!0},Fo=(t,e,n,r,o)=>{const s=t.formatter.get(n),a=t.dom;if(s&&Nt(e))for(let i=0;i<s.length;i++){const l=s[i];if(ld(t.dom,e,l)&&hy(a,e,l,"attributes",o,r)&&hy(a,e,l,"styles",o,r)){const c=l.classes;if(c)for(let u=0;u<c.length;u++)if(!t.dom.hasClass(e,As(c[u],r)))return;return l}}},Nm=(t,e,n,r,o)=>{if(r)return _m(t,r,e,n,o);if(r=t.selection.getNode(),_m(t,r,e,n,o))return!0;const s=t.selection.getStart();return!(s===r||!_m(t,s,e,n,o))},Nl=hn,by=t=>{if(t){const e=new pn(t,t);for(let n=e.current();n;n=e.next())if(ot(n))return n}return null},Am=t=>{const e=Mt("span");return ro(e,{id:vf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&St(e,le(Nl)),e},Tm=(t,e,n)=>{const r=t.dom,o=t.selection;if(ab(e))ya(t,!1,D(e),n,!0);else{const s=o.getRng(),a=r.getParent(e,r.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,u=s.endOffset,f=(p=>{const b=by(p);return b&&b.data.charAt(0)===Nl&&b.deleteData(0,1),b})(e);r.remove(e,!0),i===f&&l>0&&s.setStart(f,l-1),c===f&&u>0&&s.setEnd(f,u-1),a&&r.isEmpty(a)&&Es(D(a)),o.setRng(s)}},Rm=(t,e,n)=>{const r=t.dom,o=t.selection;if(e)Tm(t,e,n);else if(!(e=pa(t.getBody(),o.getStart())))for(;e=r.get(vf);)Tm(t,e,n)},vy=(t,e)=>(t.appendChild(e),e),yy=(t,e)=>{var n;const r=$o(t,(s,a)=>vy(s,a.cloneNode(!1)),e),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return vy(r,o.createTextNode(Nl))},Cy=t=>Sh(t,el(t).replace(new RegExp(`${cn}$`)," ")),xy=(t,e)=>{const n=()=>{null===e||t.dom.isEmpty(e)||Ln(D(e)).each(r=>{wn(r)?Cy(r):ja(r,o=>wn(o)).each(o=>{wn(o)&&Cy(o)})})};t.once("input",r=>{r.data&&!ga(r.data)&&(r.isComposing?t.once("compositionend",()=>{n()}):n())})},wy=t=>{const e=Am(!1),n=yy(t,e.dom);return{caretContainer:e,caretPosition:Y(n,0)}},Ey=(t,e)=>{const{caretContainer:n,caretPosition:r}=wy(e);return Bt(D(t),n),Gt(D(t)),r},Sy=(t,e)=>{if(Br(e.dom))return!1;const n=t.schema.getTextInlineElements();return Ut(n,me(e))&&!Br(e.dom)&&!ta(e.dom)},Al={},ky=uo(["pre"]);(t=>{Al[t]||(Al[t]=[]),Al[t].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=Vt(Vt(r,ky),(s=>a=>{const i=a.previousSibling;return ky(i)&&Ot(s,i)})(r));Z(o,s=>{((a,i)=>{const l=D(i),c=Le(l).dom;Gt(l),de(D(a),[Mt("br",c),Mt("br",c),...Ee(l)])})(s.previousSibling,s)})}})})("pre");const _y=["fontWeight","fontStyle","color","fontSize","fontFamily"],Ny=(t,e)=>{const n=t.get(e);return it(n)?Ge(n,r=>{return dn(r)&&"span"===r.inline&&Kt((o=r).styles)&&_e(an(o.styles),s=>Ot(_y,s));var o}):k.none()},Ay=(t,e)=>dr(e,Y.fromRangeStart(t)).isNone(),Ty=(t,e)=>!1===er(e,Y.fromRangeEnd(t)).exists(n=>!He(n.getNode())||er(e,n).isSome()),Ry=t=>e=>$S(e)&&t.isEditable(e),Oy=t=>Vt(t.getSelectedBlocks(),Ry(t.dom)),Om=lt.each,Bm=t=>Nt(t)&&!Dr(t)&&!Br(t)&&!ta(t),By=(t,e)=>{for(let n=t;n;n=n[e]){if(ot(n)&&Sr(n.data))return t;if(Nt(n)&&!Dr(n))return n}return t},Dy=(t,e,n)=>{const r=gm(t),o=ts(e)&&t.dom.isEditable(e),s=ts(n)&&t.dom.isEditable(n);if(o&&s){const a=By(e,"previousSibling"),i=By(n,"nextSibling");if(r.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return t.dom.remove(i),lt.each(lt.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},Py=(t,e,n,r)=>{var o;if(r&&!1!==e.merge_siblings){const s=null!==(o=Dy(t,rb(r),r))&&void 0!==o?o:r;Dy(t,s,rb(s,!0))}},Dm=(t,e,n)=>{Om(t.childNodes,r=>{Bm(r)&&(e(r)&&n(r),r.hasChildNodes()&&Dm(r,e,n))})},Ly=(t,e)=>n=>!(!n||!Uc(t,n,e)),My=(t,e,n)=>r=>{var o,s;t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=t,"SPAN"===(s=r).nodeName&&0===o.getAttribs(s).length&&o.remove(s,!0)},wa=Do([{keep:[]},{rename:["name"]},{removed:[]}]),yA=/^(src|href|style)$/,Pm=lt.each,cd=Tf,Iy=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),Fy=(t,e,n)=>{let r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(Nt(r)){const s=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>s?s:o]}return ot(r)&&n&&o>=r.data.length&&(r=new pn(r,t.getBody()).next()||r),ot(r)&&!n&&0===o&&(r=new pn(r,t.getBody()).prev()||r),r},jy=(t,e)=>{const n=e?"firstChild":"lastChild",r=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&r?"TR"===t.nodeName&&r[n]||r:t},Lm=(t,e,n,r)=>{var o;const s=t.create(n,r);return null===(o=e.parentNode)||void 0===o||o.insertBefore(s,e),s.appendChild(e),s},zy=(t,e,n,r,o)=>{const s=D(e),a=D(t.create(r,o)),i=n?ir(s):Qo(s);return de(a,i),n?(Bt(s,a),Zt(a,s)):(Ft(s,a),St(a,s)),a.dom},Uy=(t,e,n)=>{const r=e.parentNode;let o;const s=t.dom,a=Fn(t);var i;Io(n)&&r===s.getRoot()&&(n.list_block&&cd(e,n.list_block)||Z(Cn(e.childNodes),i=>{oi(t,a,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=Lm(s,i,a),s.setAttribs(o,il(t))):o=null})),Pr(i=n)&&dn(i)&&To(Te(i,"mixed"),!0)&&!cd(n.inline,e)||s.remove(e,!0)},Hy=(t,e,n)=>x(t)?{name:e,value:null}:{name:t,value:As(e,n)},qy=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},$y=(t,e,n,r,o)=>{let s=!1;Pm(n.styles,(a,i)=>{const{name:l,value:c}=Hy(i,a,r),u=Rf(c,l);(n.remove_similar||Jt(c)||!Nt(o)||cd(Uc(t,o,l),u))&&t.setStyle(e,l,""),s=!0}),s&&qy(t,e)},Wy=(t,e,n,r,o)=>{const s=t.dom,a=gm(t),i=t.schema;if(dn(e)&&Au(i,e.inline)&&na(i,r)&&r.parentElement===t.getBody())return Uy(t,r,e),wa.removed();if(!e.ceFalseOverride&&r&&"false"===s.getContentEditableParent(r)||r&&!ld(s,r,e)&&(!e.links||"A"!==r.nodeName))return wa.keep();const l=r,c=e.preserve_attributes;if(dn(e)&&"all"===e.remove&&it(c)){const u=Vt(s.getAttribs(l),f=>Ot(c,f.name.toLowerCase()));if(s.removeAllAttribs(l),Z(u,f=>s.setAttrib(l,f.name,f.value)),u.length>0)return wa.rename("span")}if("all"!==e.remove){$y(s,l,e,n,o),Pm(e.attributes,(f,p)=>{const{name:b,value:g}=Hy(p,f,n);if(e.remove_similar||Jt(g)||!Nt(o)||cd(s.getAttrib(o,b),g)){if("class"===b){const v=s.getAttrib(l,b);if(v){let h="";if(Z(v.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(h+=(h?" ":"")+C)}),h)return void s.setAttrib(l,b,h)}}if(yA.test(b)&&l.removeAttribute("data-mce-"+b),"style"===b&&uo(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(b),void s.setStyle(l,"list-style-type","none");"class"===b&&l.removeAttribute("className"),l.removeAttribute(b)}}),Pm(e.classes,f=>{f=As(f,n),Nt(o)&&!s.hasClass(o,f)||s.removeClass(l,f)});const u=s.getAttribs(l);for(let f=0;f<u.length;f++)if(!a.isAttributeInternal(u[f].nodeName))return wa.keep()}return"none"!==e.remove?(Uy(t,l,e),wa.removed()):wa.keep()},CA=(t,e,n,r)=>Wy(t,e,n,r,r).fold(mt(r),o=>(t.dom.createFragment().appendChild(r),t.dom.rename(r,o)),mt(null)),Vy=(t,e,n,r,o)=>{(r||t.selection.isEditable())&&((s,a,i,l,c)=>{const u=s.formatter.get(a),f=u[0],p=s.dom,b=s.selection,g=S=>{const N=((A,R,M,P,z)=>{let $;return R.parentNode&&Z(Hc(A.dom,R.parentNode).reverse(),B=>{if(!$&&Nt(B)&&"_start"!==B.id&&"_end"!==B.id){const I=Fo(A,B,M,P,z);I&&!1!==I.split&&($=B)}}),$})(s,S,a,i,c);return((A,R,M,P,z,$,B,I)=>{var j,G;let st,rt;const xt=A.dom;if(M){const At=M.parentNode;for(let Dt=P.parentNode;Dt&&Dt!==At;Dt=Dt.parentNode){let wt=xt.clone(Dt,!1);for(let pt=0;pt<R.length&&(wt=CA(A,R[pt],I,wt),null!==wt);pt++);wt&&(st&&wt.appendChild(st),rt||(rt=wt),st=wt)}B.mixed&&xt.isBlock(M)||(P=null!==(j=xt.split(M,P))&&void 0!==j?j:P),st&&rt&&(null===(G=z.parentNode)||void 0===G||G.insertBefore(st,z),rt.appendChild(z),dn(B)&&Py(A,B,0,st))}return P})(s,u,N,S,S,0,f,i)},v=S=>_e(u,N=>Tl(s,N,i,S,S)),h=S=>{const N=Cn(S.childNodes),A=v(S)||_e(u,M=>ld(p,S,M)),R=S.parentNode;if(!A&&ct(R)&&Bf(f)&&v(R),f.deep&&N.length)for(let M=0;M<N.length;M++)h(N[M]);Z(["underline","line-through","overline"],M=>{Nt(S)&&s.dom.getStyle(S,"text-decoration")===M&&S.parentNode&&sb(p,S.parentNode)===M&&Tl(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:M}},void 0,S)})},C=S=>{const N=p.get(S?"_start":"_end");if(N){let A=N[S?"firstChild":"lastChild"];return Dr(R=A)&&Nt(R)&&("_start"===R.id||"_end"===R.id)&&(A=A[S?"firstChild":"lastChild"]),ot(A)&&0===A.data.length&&(A=S?N.previousSibling||N.nextSibling:N.nextSibling||N.previousSibling),p.remove(N,!0),A}var R;return null},E=S=>{let N,A,R=ha(p,S,u,S.collapsed);if(f.split){if(R=Yc(R),N=Fy(s,R,!0),A=Fy(s,R),N!==A){if(N=jy(N,!0),A=jy(A,!1),Iy(p,N,A)){const P=k.from(N.firstChild).getOr(N);return g(zy(p,P,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void C(!0)}if(Iy(p,A,N)){const P=k.from(A.lastChild).getOr(A);return g(zy(p,P,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void C(!1)}N=Lm(p,N,"span",{id:"_start","data-mce-type":"bookmark"}),A=Lm(p,A,"span",{id:"_end","data-mce-type":"bookmark"});const M=p.createRng();M.setStartAfter(N),M.setEndBefore(A),bl(p,M,P=>{Z(P,z=>{Dr(z)||Dr(z.parentNode)||g(z)})}),g(N),g(A),N=C(!0),A=C()}else N=A=g(N);R.startContainer=N.parentNode?N.parentNode:N,R.startOffset=p.nodeIndex(N),R.endContainer=A.parentNode?A.parentNode:A,R.endOffset=p.nodeIndex(A)+1}bl(p,R,M=>{Z(M,h)})};if(l){if(hl(l)){const S=p.createRng();S.setStartBefore(l),S.setEndAfter(l),E(S)}else E(l);wb(s,a,l,i)}else b.isCollapsed()&&dn(f)&&!ri(s).length?((t,e,n,r)=>{const o=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),c=l.startContainer,u=l.startOffset;let f=c;ot(c)&&(u!==c.data.length&&(a=!0),f=f.parentNode);const p=[];let b;for(;f;){if(Fo(t,f,e,n,r)){b=f;break}f.nextSibling&&(a=!0),p.push(f),f=f.parentNode}if(b)if(a){const g=s.getBookmark();l.collapse(!0);let v=ha(o,l,i,!0);v=Yc(v),t.formatter.remove(e,n,v,r),s.moveToBookmark(g)}else{const g=pa(t.getBody(),b),v=ct(g)?o.getParents(b.parentNode,je,g):[],h=Am(!1).dom;((S,N,A)=>{var R,M;const P=S.dom,z=P.getParent(A,Et(Nf,S.schema));z&&P.isEmpty(z)?null===(R=A.parentNode)||void 0===R||R.replaceChild(N,A):(($=>{const B=Mn($,"br"),I=Vt((j=>{const G=[];let st=j.dom;for(;st;)G.push(D(st)),st=st.lastChild;return G})($).slice(-1),ca);B.length===I.length&&Z(I,Gt)})(D(A)),P.isEmpty(A)?null===(M=A.parentNode)||void 0===M||M.replaceChild(N,A):P.insertAfter(N,A))})(t,h,g??b);const C=((S,N,A,R,M,P)=>{const z=S.formatter,$=S.dom,B=Vt(an(z.get()),j=>j!==R&&!fn(j,"removeformat")),I=(j=S,G=A,yn(B,(rt,xt)=>{const At=Of(j,xt,pt=>{const kt=F=>be(F)||F.length>1&&"%"===F.charAt(0);return _e(["styles","attributes"],F=>Te(pt,F).exists(U=>{const X=it(U)?U:Ba(U);return _e(X,kt)}))});return j.formatter.matchNode(G,xt,{},At)?rt.concat([xt]):rt},[]));var j,G;if(Vt(I,j=>!((G,st,rt)=>{const xt=["inline","block","selector","attributes","styles","classes"],At=Dt=>_o(Dt,(wt,pt)=>_e(xt,kt=>kt===pt));return Of(G,st,Dt=>{const wt=At(Dt);return Of(G,rt,pt=>{const kt=At(pt);return((F,U,X=Xe)=>ie(X).eq(F,U))(wt,kt)})})})(S,j,R)).length>0){const j=A.cloneNode(!1);return $.add(N,j),z.remove(R,M,j,P),$.remove(j),k.some(j)}return k.none()})(t,h,b,e,n,r),E=yy([...p,...C.toArray(),...v],h);g&&Tm(t,g,ct(g)),s.setCursorLocation(E,1),xy(t,h),o.isEmpty(b)&&o.remove(b)}})(s,a,i,c):(nb(s,()=>kf(s,E),S=>dn(f)&&Nm(s,a,i,S)),s.nodeChanged()),S=s,A=i,"removeformat"===(N=a)?Z(Oy(S.selection),R=>{Z(_y,M=>S.dom.setStyle(R,M,"")),qy(S.dom,R)}):Ny(S.formatter,N).each(R=>{Z(Oy(S.selection),M=>$y(S.dom,M,R,A,null))}),wb(s,a,l,i);var S,N,A})(t,e,n,r,o)},Tl=(t,e,n,r,o)=>Wy(t,e,n,r,o).fold(Ce,s=>(t.dom.rename(r,s),!0),je),Ky=lt.each,dd=lt.each,Xy=(t,e,n,r)=>{if(dd(n.styles,(o,s)=>{t.setStyle(e,s,As(o,r))}),n.styles){const o=t.getAttrib(e,"style");o&&t.setAttrib(e,"data-mce-style",o)}},xA=(t,e,n,r)=>{const o=t.formatter.get(e),s=o[0],a=!r&&t.selection.isCollapsed(),i=t.dom,l=t.selection,c=(g,v=s)=>{be(v.onformat)&&v.onformat(g,v,n,r),Xy(i,g,v,n),dd(v.attributes,(h,C)=>{i.setAttrib(g,C,As(h,n))}),dd(v.classes,h=>{const C=As(h,n);i.hasClass(g,C)||i.addClass(g,C)})},u=(g,v)=>{let h=!1;return dd(g,C=>!(!Pr(C)||("false"!==i.getContentEditable(v)||C.ceFalseOverride)&&(!ct(C.collapsed)||C.collapsed===a)&&i.is(v,C.selector)&&!Br(v)&&(c(v,C),h=!0,1))),h},p=(g,v,h)=>{const C=[];let E=!0;const S=s.inline||s.block,N=(g=>{if(Rt(g)){const v=i.create(g);return c(v),v}return null})(S);bl(g,v,A=>{let R;const M=P=>{let z=!1,$=E,B=!1;const I=P.parentNode,j=I.nodeName.toLowerCase(),G=g.getContentEditable(P);ct(G)&&($=E,E="true"===G,z=!0,B=ob(t,P));const st=E&&!z;if(He(P)&&!((rt,xt,At,Dt)=>{if(i_(rt)&&dn(xt)&&At.parentNode){const wt=oh(rt.schema),pt=((t,e)=>((n,r)=>{const o=n.dom;return o.parentNode?(s=D(o.parentNode),Ge(s.dom.childNodes,i=>(s=>!zt(n,s)&&r(s))(D(i))).map(D)):k.none();var s})(t,e).isSome())(D(At),kt=>Br(kt.dom));return un(wt,Dt)&&es(rt.schema,At.parentNode,{skipBogus:!1,includeZwsp:!0})&&!pt}return!1})(t,s,P,j))return R=null,void(Io(s)&&g.remove(P));if(rt=P,Io(xt=s)&&!0===xt.wrapper&&Fo(t,rt,e,n))R=null;else{if(((rt,xt,At)=>{const Dt=Io(wt=s)&&!0!==wt.wrapper&&Nf(t.schema,rt)&&oi(t,xt,S);var wt;return At&&Dt})(P,j,st)){const rt=g.rename(P,S);return c(rt),C.push(rt),void(R=null)}if(Pr(s)){let rt=u(o,P);if(!rt&&ct(I)&&Bf(s)&&(rt=u(o,I)),!dn(s)||rt)return void(R=null)}ct(N)&&((rt,xt,At,Dt)=>{const wt=rt.nodeName.toLowerCase(),pt=oi(t,S,wt)&&oi(t,xt,S),kt=!h&&ot(rt)&&Sc(rt.data),F=Br(rt),U=!dn(s)||!g.isBlock(rt);return(At||Dt)&&pt&&!kt&&!F&&U})(P,j,st,B)?(R||(R=g.clone(N,!1),I.insertBefore(R,P),C.push(R)),B&&z&&(E=$),R.appendChild(P)):(R=null,Z(Cn(P.childNodes),M),z&&(E=$),R=null)}var rt,xt};Z(A,M)}),!0===s.links&&Z(C,A=>{const R=M=>{"A"===M.nodeName&&c(M,s),Z(Cn(M.childNodes),R)};R(A)}),Z(C,A=>{const R=(M=>{let P=0;return Z(M.childNodes,z=>{var $;ct($=z)&&ot($)&&0===$.length||Dr(z)||P++}),P})(A);var M;!(C.length>1)&&g.isBlock(A)||0!==R?(dn(s)||Io(s)&&s.wrapper)&&(s.exact||1!==R||(A=Ge((M=A).childNodes,_f).filter(z=>"false"!==g.getContentEditable(z)&&ld(g,z,s)).map(z=>{const $=g.clone(z,!1);return c($),g.replace($,M,!0),g.remove(z,!0),$}).getOr(M)),((M,P,z,$)=>{Ky(P,B=>{var I,j,G;dn(B)&&Ky(M.dom.select(B.inline,$),I=>{Bm(I)&&Tl(M,B,z,I,B.exact?I:null)}),I=M.dom,G=$,(j=B).clear_child_styles&&Om(I.select(j.links?"*:not(a)":"*",G),rt=>{Bm(rt)&&I.isEditable(rt)&&Om(j.styles,(xt,At)=>{I.setStyle(rt,At,"")})})})})(t,o,n,A),((M,P,z,$,B)=>{const I=B.parentNode;Fo(M,I,z,$)&&Tl(M,P,$,B)||P.merge_with_parents&&I&&M.dom.getParent(I,j=>!!Fo(M,j,z,$)&&(Tl(M,P,$,B),!0))})(t,s,e,n,A),((M,P,z,$)=>{if(P.styles&&P.styles.backgroundColor){const B=Ly(M,"fontSize");Dm($,I=>B(I)&&M.isEditable(I),My(M,"backgroundColor",As(P.styles.backgroundColor,z)))}})(g,s,n,A),((M,P,z,$)=>{const B=I=>{if(ts(I)&&Nt(I.parentNode)&&M.isEditable(I)){const j=sb(M,I.parentNode);M.getStyle(I,"color")&&j?M.setStyle(I,"text-decoration",j):M.getStyle(I,"text-decoration")===j&&M.setStyle(I,"text-decoration",null)}};P.styles&&(P.styles.color||P.styles.textDecoration)&&(lt.walk($,B,"childNodes"),B($))})(g,s,0,A),((M,P,z,$)=>{if(dn(P)&&("sub"===P.inline||"sup"===P.inline)){const B=Ly(M,"fontSize");Dm($,j=>B(j)&&M.isEditable(j),My(M,"fontSize",""));const I=Vt(M.select("sup"===P.inline?"sub":"sup",$),M.isEditable);M.remove(I,!0)}})(g,s,0,A),Py(t,s,0,A)):g.remove(A,!0)})},b=hl(r)?r:l.getNode();if("false"===i.getContentEditable(b)&&!ob(t,b))return u(o,r=b),void xb(t,e,r,n);if(s){if(r)if(hl(r)){if(!u(o,r)){const g=i.createRng();g.setStartBefore(r),g.setEndAfter(r),p(i,ha(i,g,o),!0)}}else p(i,r,!0);else a&&dn(s)&&!ri(t).length?((g,v,h)=>{let C;const E=g.selection,S=g.formatter.get(v);if(!S)return;const N=E.getRng();let A=N.startOffset;const R=N.startContainer.nodeValue;C=pa(g.getBody(),E.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(R&&A>0&&A<R.length&&M.test(R.charAt(A))&&M.test(R.charAt(A-1))){const $=E.getBookmark();N.collapse(!0);let B=ha(g.dom,N,S);B=Yc(B),g.formatter.apply(v,h,B),E.moveToBookmark($)}else{let $=C?by(C):null;C&&$?.data===Nl||(P=g.getDoc(),z=Am(!0).dom,C=P.importNode(z,!0),$=C.firstChild,N.insertNode(C),A=1,xy(g,C)),g.formatter.apply(v,h,C),E.setCursorLocation($,A)}var P,z})(t,e,n):(l.setRng(Cm(l.getRng())),nb(t,()=>{kf(t,(g,v)=>{const h=v?g:ha(i,g,o);p(i,h,!1)})},je),t.nodeChanged()),Ny(t.formatter,e).each(g=>{var v;Z(Vt((h=>{const C=h.getSelectedBlocks(),E=h.getRng();if(h.isCollapsed())return[];if(1===C.length)return Ay(E,C[0])&&Ty(E,C[0])?C:[];{const S=Sn(C).filter(R=>Ay(E,R)).toArray(),N=eo(C).filter(R=>Ty(E,R)).toArray(),A=C.slice(1,-1);return S.concat(A).concat(N)}})(v=t.selection),Ry(v.dom)),v=>Xy(i,v,g,n))});v=t,Ut(Al,g=e)&&Z(Al[g],h=>{h(v)})}var g,v;xb(t,e,r,n)},Yy=(t,e,n,r)=>{(r||t.selection.isEditable())&&xA(t,e,n,r)},Gy=t=>Ut(t,"vars"),Qy=t=>t.selection.getStart(),Zy=(t,e,n,r,o)=>Hr(e,s=>{const a=t.formatter.matchNode(s,n,o??{},r);return!Me(a)},s=>!!gy(t,s,n)||!r&&ct(t.formatter.matchNode(s,n,o,!0))),Jy=(t,e)=>{const n=e??Qy(t);return Vt(Hc(t.dom,n),r=>Nt(r)&&!ta(r))},tC=(t,e,n)=>{const r=Jy(t,e);xe(n,(o,s)=>{const a=i=>{const l=Zy(t,r,s,i.similar,Gy(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const u=l.getOr(e);Gy(i)?i.callback(c,{node:u,format:s,parents:r}):Z(i.callbacks,f=>f(c,{node:u,format:s,parents:r}))}};Z([o.withSimilar,o.withoutSimilar],a),Z(o.withVars,a)})},eC=lt.explode,nC=()=>{const t={};return{addFilter:(e,n)=>{Z(eC(e),r=>{Ut(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>Ba(t),removeFilter:(e,n)=>{Z(eC(e),r=>{if(Ut(t,r))if(ct(n)){const o=t[r],s=Vt(o.callbacks,a=>a!==n);s.length>0?o.callbacks=s:delete t[r]}else delete t[r]})}}},Mm=t=>{const[e,...n]=t.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(o){const s=";base64"===o[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(r):decodeURIComponent(r);return k.some({type:o[1],data:a,base64Encoded:s})}return k.none()},rC=(t,e,n=!0)=>{let r=e;if(n)try{r=atob(e)}catch{return k.none()}const o=new Uint8Array(r.length);for(let s=0;s<o.length;s++)o[s]=r.charCodeAt(s);return k.some(new Blob([o],{type:t}))},oC=t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(t)});let EA=0;const sC=(t,e,n)=>Mm(t).bind(({data:r,type:o,base64Encoded:s})=>{if(e&&!s)return k.none();{const a=s?r:btoa(r);return n(a,o)}}),aC=(t,e,n)=>{const r=t.create("blobid"+EA++,e,n);return t.add(r),r},iC=(t,e,n=!1)=>sC(e,n,(r,o)=>k.from(t.getByData(r,o)).orThunk(()=>rC(o,r).map(s=>aC(t,s,r)))),SA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,kA=t=>k.from(t.match(SA)).bind(e=>zs(e,1)).map(e=>Ve(e,"www.")?e.substring(4):e),lC=(t,e)=>{k.from(t.attr("src")).bind(kA).forall(n=>!Ot(e,n))&&t.attr("sandbox","")},Im=(t,e)=>Ve(t,`${e}/`),{entries:cC,setPrototypeOf:dC,isFrozen:_A,getPrototypeOf:NA,getOwnPropertyDescriptor:AA}=Object;let{freeze:ur,seal:ho,create:TA}=Object,{apply:Fm,construct:jm}=typeof Reflect<"u"&&Reflect;Fm||(Fm=function(t,e,n){return t.apply(e,n)}),ur||(ur=function(t){return t}),ho||(ho=function(t){return t}),jm||(jm=function(t,e){return new t(...e)});const RA=Yr(Array.prototype.forEach),OA=Yr(Array.prototype.pop),Rl=Yr(Array.prototype.push),ud=Yr(String.prototype.toLowerCase),zm=Yr(String.prototype.toString),BA=Yr(String.prototype.match),bo=Yr(String.prototype.replace),DA=Yr(String.prototype.indexOf),PA=Yr(String.prototype.trim),Ir=Yr(RegExp.prototype.test),Ol=(uC=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return jm(uC,e)});var uC;function Yr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Fm(t,e,r)}}function ve(t,e,n){var r;n=null!==(r=n)&&void 0!==r?r:ud,dC&&dC(t,null);let o=e.length;for(;o--;){let s=e[o];if("string"==typeof s){const a=n(s);a!==s&&(_A(e)||(e[o]=a),s=a)}t[s]=!0}return t}function di(t){const e=TA(null);for(const[n,r]of cC(t))e[n]=r;return e}function fd(t,e){for(;null!==t;){const n=AA(t,e);if(n){if(n.get)return Yr(n.get);if("function"==typeof n.value)return Yr(n.value)}t=NA(t)}return function(n){return console.warn("fallback value for",n),null}}const fC=ur(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Um=ur(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Hm=ur(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),LA=ur(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qm=ur(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),MA=ur(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mC=ur(["#text"]),pC=ur(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$m=ur(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),gC=ur(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),md=ur(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),IA=ho(/\{\{[\w\W]*|[\w\W]*\}\}/gm),FA=ho(/<%[\w\W]*|[\w\W]*%>/gm),jA=ho(/\${[\w\W]*}/gm),zA=ho(/^data-[\-\w.\u00B7-\uFFFF]/),UA=ho(/^aria-[\-\w]+$/),hC=ho(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),HA=ho(/^(?:\w+script|data):/i),qA=ho(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),bC=ho(/^html$/i);var vC=Object.freeze({__proto__:null,MUSTACHE_EXPR:IA,ERB_EXPR:FA,TMPLIT_EXPR:jA,DATA_ATTR:zA,ARIA_ATTR:UA,IS_ALLOWED_URI:hC,IS_SCRIPT_OR_DATA:HA,ATTR_WHITESPACE:qA,DOCTYPE_NAME:bC}),Wm=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=V=>t(V);if(n.version="3.0.5",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;const r=e.document,o=r.currentScript;let{document:s}=e;const{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:c,NodeFilter:u,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:b,trustedTypes:g}=e,v=c.prototype,h=fd(v,"cloneNode"),C=fd(v,"nextSibling"),E=fd(v,"childNodes"),S=fd(v,"parentNode");if("function"==typeof i){const V=s.createElement("template");V.content&&V.content.ownerDocument&&(s=V.content.ownerDocument)}let N,A="";const{implementation:R,createNodeIterator:M,createDocumentFragment:P,getElementsByTagName:z}=s,{importNode:$}=r;let B={};n.isSupported="function"==typeof cC&&"function"==typeof S&&R&&void 0!==R.createHTMLDocument;const{MUSTACHE_EXPR:I,ERB_EXPR:j,TMPLIT_EXPR:G,DATA_ATTR:st,ARIA_ATTR:rt,IS_SCRIPT_OR_DATA:xt,ATTR_WHITESPACE:At}=vC;let{IS_ALLOWED_URI:Dt}=vC,wt=null;const pt=ve({},[...fC,...Um,...Hm,...qm,...mC]);let kt=null;const F=ve({},[...pC,...$m,...gC,...md]);let U=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),X=null,Q=null,gt=!0,dt=!0,Lt=!1,Ht=!0,Xt=!1,Se=!1,ze=!1,Cr=!1,yt=!1,te=!1,ce=!1,ee=!0,he=!1,Oe=!0,ht=!1,jt={},ye=null;const Be=ve({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let on=null;const rr=ve({},["audio","video","img","source","image","track"]);let Qr=null;const zn=ve({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fr="http://www.w3.org/1998/Math/MathML",sn="http://www.w3.org/2000/svg",xr="http://www.w3.org/1999/xhtml";let qo=xr,ls=!1,Ra=null;const kg=ve({},[fr,sn,xr],zm);let Zr;const Ms=["application/xhtml+xml","text/html"];let vn,Vn=null;const ki=s.createElement("form"),Is=function(V){return V instanceof RegExp||V instanceof Function},_i=function(V){if(!Vn||Vn!==V){if(V&&"object"==typeof V||(V={}),V=di(V),Zr=Zr=-1===Ms.indexOf(V.PARSER_MEDIA_TYPE)?"text/html":V.PARSER_MEDIA_TYPE,vn="application/xhtml+xml"===Zr?zm:ud,wt="ALLOWED_TAGS"in V?ve({},V.ALLOWED_TAGS,vn):pt,kt="ALLOWED_ATTR"in V?ve({},V.ALLOWED_ATTR,vn):F,Ra="ALLOWED_NAMESPACES"in V?ve({},V.ALLOWED_NAMESPACES,zm):kg,Qr="ADD_URI_SAFE_ATTR"in V?ve(di(zn),V.ADD_URI_SAFE_ATTR,vn):zn,on="ADD_DATA_URI_TAGS"in V?ve(di(rr),V.ADD_DATA_URI_TAGS,vn):rr,ye="FORBID_CONTENTS"in V?ve({},V.FORBID_CONTENTS,vn):Be,X="FORBID_TAGS"in V?ve({},V.FORBID_TAGS,vn):{},Q="FORBID_ATTR"in V?ve({},V.FORBID_ATTR,vn):{},jt="USE_PROFILES"in V&&V.USE_PROFILES,gt=!1!==V.ALLOW_ARIA_ATTR,dt=!1!==V.ALLOW_DATA_ATTR,Lt=V.ALLOW_UNKNOWN_PROTOCOLS||!1,Ht=!1!==V.ALLOW_SELF_CLOSE_IN_ATTR,Xt=V.SAFE_FOR_TEMPLATES||!1,Se=V.WHOLE_DOCUMENT||!1,yt=V.RETURN_DOM||!1,te=V.RETURN_DOM_FRAGMENT||!1,ce=V.RETURN_TRUSTED_TYPE||!1,Cr=V.FORCE_BODY||!1,ee=!1!==V.SANITIZE_DOM,he=V.SANITIZE_NAMED_PROPS||!1,Oe=!1!==V.KEEP_CONTENT,ht=V.IN_PLACE||!1,Dt=V.ALLOWED_URI_REGEXP||hC,qo=V.NAMESPACE||xr,U=V.CUSTOM_ELEMENT_HANDLING||{},V.CUSTOM_ELEMENT_HANDLING&&Is(V.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=V.CUSTOM_ELEMENT_HANDLING.tagNameCheck),V.CUSTOM_ELEMENT_HANDLING&&Is(V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),V.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(U.allowCustomizedBuiltInElements=V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Xt&&(dt=!1),te&&(yt=!0),jt&&(wt=ve({},[...mC]),kt=[],!0===jt.html&&(ve(wt,fC),ve(kt,pC)),!0===jt.svg&&(ve(wt,Um),ve(kt,$m),ve(kt,md)),!0===jt.svgFilters&&(ve(wt,Hm),ve(kt,$m),ve(kt,md)),!0===jt.mathMl&&(ve(wt,qm),ve(kt,gC),ve(kt,md))),V.ADD_TAGS&&(wt===pt&&(wt=di(wt)),ve(wt,V.ADD_TAGS,vn)),V.ADD_ATTR&&(kt===F&&(kt=di(kt)),ve(kt,V.ADD_ATTR,vn)),V.ADD_URI_SAFE_ATTR&&ve(Qr,V.ADD_URI_SAFE_ATTR,vn),V.FORBID_CONTENTS&&(ye===Be&&(ye=di(ye)),ve(ye,V.FORBID_CONTENTS,vn)),Oe&&(wt["#text"]=!0),Se&&ve(wt,["html","head","body"]),wt.table&&(ve(wt,["tbody"]),delete X.tbody),V.TRUSTED_TYPES_POLICY){if("function"!=typeof V.TRUSTED_TYPES_POLICY.createHTML)throw Ol('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof V.TRUSTED_TYPES_POLICY.createScriptURL)throw Ol('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=V.TRUSTED_TYPES_POLICY,A=N.createHTML("")}else void 0===N&&(N=function(Pt,$t){if("object"!=typeof Pt||"function"!=typeof Pt.createPolicy)return null;let ke=null;const Fe="data-tt-policy-suffix";$t&&$t.hasAttribute(Fe)&&(ke=$t.getAttribute(Fe));const qe="dompurify"+(ke?"#"+ke:"");try{return Pt.createPolicy(qe,{createHTML:Ue=>Ue,createScriptURL:Ue=>Ue})}catch{return console.warn("TrustedTypes policy "+qe+" could not be created."),null}}(g,o)),null!==N&&"string"==typeof A&&(A=N.createHTML(""));ur&&ur(V),Vn=V}},RS=ve({},["mi","mo","mn","ms","mtext"]),OS=ve({},["foreignobject","desc","title","annotation-xml"]),MB=ve({},["title","style","font","a","script"]),iu=ve({},Um);ve(iu,Hm),ve(iu,LA);const _g=ve({},qm);ve(_g,MA);const Oa=function(V){Rl(n.removed,{element:V});try{V.parentNode.removeChild(V)}catch{V.remove()}},Jl=function(V,Pt){try{Rl(n.removed,{attribute:Pt.getAttributeNode(V),from:Pt})}catch{Rl(n.removed,{attribute:null,from:Pt})}if(Pt.removeAttribute(V),"is"===V&&!kt[V])if(yt||te)try{Oa(Pt)}catch{}else try{Pt.setAttribute(V,"")}catch{}},BS=function(V){let Pt,$t;if(Cr)V="<remove></remove>"+V;else{const qe=BA(V,/^[\r\n\t ]+/);$t=qe&&qe[0]}"application/xhtml+xml"===Zr&&qo===xr&&(V='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+V+"</body></html>");const ke=N?N.createHTML(V):V;if(qo===xr)try{Pt=(new b).parseFromString(ke,Zr)}catch{}if(!Pt||!Pt.documentElement){Pt=R.createDocument(qo,"template",null);try{Pt.documentElement.innerHTML=ls?A:ke}catch{}}const Fe=Pt.body||Pt.documentElement;return V&&$t&&Fe.insertBefore(s.createTextNode($t),Fe.childNodes[0]||null),qo===xr?z.call(Pt,Se?"html":"body")[0]:Se?Pt.documentElement:Fe},DS=function(V){return M.call(V.ownerDocument||V,V,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},lu=function(V){return"object"==typeof l?V instanceof l:V&&"object"==typeof V&&"number"==typeof V.nodeType&&"string"==typeof V.nodeName},cs=function(V,Pt,$t){B[V]&&RA(B[V],ke=>{ke.call(n,Pt,$t,Vn)})},PS=function(V){let Pt;if(cs("beforeSanitizeElements",V,null),($t=V)instanceof p&&("string"!=typeof $t.nodeName||"string"!=typeof $t.textContent||"function"!=typeof $t.removeChild||!($t.attributes instanceof f)||"function"!=typeof $t.removeAttribute||"function"!=typeof $t.setAttribute||"string"!=typeof $t.namespaceURI||"function"!=typeof $t.insertBefore||"function"!=typeof $t.hasChildNodes))return Oa(V),!0;var $t;const ke=vn(V.nodeName);if(cs("uponSanitizeElement",V,{tagName:ke,allowedTags:wt}),V.hasChildNodes()&&!lu(V.firstElementChild)&&(!lu(V.content)||!lu(V.content.firstElementChild))&&Ir(/<[/\w]/g,V.innerHTML)&&Ir(/<[/\w]/g,V.textContent))return Oa(V),!0;if(!wt[ke]||X[ke]){if(!X[ke]&&MS(ke)&&(U.tagNameCheck instanceof RegExp&&Ir(U.tagNameCheck,ke)||U.tagNameCheck instanceof Function&&U.tagNameCheck(ke)))return!1;if(Oe&&!ye[ke]){const Fe=S(V)||V.parentNode,qe=E(V)||V.childNodes;if(qe&&Fe)for(let Ue=qe.length-1;Ue>=0;--Ue)Fe.insertBefore(h(qe[Ue],!0),C(V))}return Oa(V),!0}return V instanceof c&&!function(Fe){let qe=S(Fe);qe&&qe.tagName||(qe={namespaceURI:qo,tagName:"template"});const Ue=ud(Fe.tagName),Ke=ud(qe.tagName);return!!Ra[Fe.namespaceURI]&&(Fe.namespaceURI===sn?qe.namespaceURI===xr?"svg"===Ue:qe.namespaceURI===fr?"svg"===Ue&&("annotation-xml"===Ke||RS[Ke]):!!iu[Ue]:Fe.namespaceURI===fr?qe.namespaceURI===xr?"math"===Ue:qe.namespaceURI===sn?"math"===Ue&&OS[Ke]:!!_g[Ue]:Fe.namespaceURI===xr?!(qe.namespaceURI===sn&&!OS[Ke])&&!(qe.namespaceURI===fr&&!RS[Ke])&&!_g[Ue]&&(MB[Ue]||!iu[Ue]):!("application/xhtml+xml"!==Zr||!Ra[Fe.namespaceURI]))}(V)?(Oa(V),!0):"noscript"!==ke&&"noembed"!==ke&&"noframes"!==ke||!Ir(/<\/no(script|embed|frames)/i,V.innerHTML)?(Xt&&3===V.nodeType&&(Pt=V.textContent,Pt=bo(Pt,I," "),Pt=bo(Pt,j," "),Pt=bo(Pt,G," "),V.textContent!==Pt&&(Rl(n.removed,{element:V.cloneNode()}),V.textContent=Pt)),cs("afterSanitizeElements",V,null),!1):(Oa(V),!0)},LS=function(V,Pt,$t){if(ee&&("id"===Pt||"name"===Pt)&&($t in s||$t in ki))return!1;if((!dt||Q[Pt]||!Ir(st,Pt))&&(!gt||!Ir(rt,Pt)))if(!kt[Pt]||Q[Pt]){if(!(MS(V)&&(U.tagNameCheck instanceof RegExp&&Ir(U.tagNameCheck,V)||U.tagNameCheck instanceof Function&&U.tagNameCheck(V))&&(U.attributeNameCheck instanceof RegExp&&Ir(U.attributeNameCheck,Pt)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(Pt))||"is"===Pt&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&Ir(U.tagNameCheck,$t)||U.tagNameCheck instanceof Function&&U.tagNameCheck($t))))return!1}else if(!Qr[Pt]&&!Ir(Dt,bo($t,At,""))&&("src"!==Pt&&"xlink:href"!==Pt&&"href"!==Pt||"script"===V||0!==DA($t,"data:")||!on[V])&&(!Lt||Ir(xt,bo($t,At,"")))&&$t)return!1;return!0},MS=function(V){return V.indexOf("-")>0},IS=function(V){let Pt,$t,ke,Fe;cs("beforeSanitizeAttributes",V,null);const{attributes:qe}=V;if(!qe)return;const Ue={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:kt};for(Fe=qe.length;Fe--;){Pt=qe[Fe];const{name:Ke,namespaceURI:Ni}=Pt;$t="value"===Ke?Pt.value:PA(Pt.value);const FB=$t;if(ke=vn(Ke),Ue.attrName=ke,Ue.attrValue=$t,Ue.keepAttr=!0,Ue.forceKeepAttr=void 0,cs("uponSanitizeAttribute",V,Ue),$t=Ue.attrValue,Ue.forceKeepAttr)continue;if(!Ue.keepAttr){Jl(Ke,V);continue}if(!Ht&&Ir(/\/>/i,$t)){Jl(Ke,V);continue}Xt&&($t=bo($t,I," "),$t=bo($t,j," "),$t=bo($t,G," "));const FS=vn(V.nodeName);if(LS(FS,ke,$t)){if(!he||"id"!==ke&&"name"!==ke||(Jl(Ke,V),$t="user-content-"+$t),N&&"object"==typeof g&&"function"==typeof g.getAttributeType&&!Ni)switch(g.getAttributeType(FS,ke)){case"TrustedHTML":$t=N.createHTML($t);break;case"TrustedScriptURL":$t=N.createScriptURL($t)}if($t!==FB)try{Ni?V.setAttributeNS(Ni,Ke,$t):V.setAttribute(Ke,$t)}catch{Jl(Ke,V)}}else Jl(Ke,V)}cs("afterSanitizeAttributes",V,null)},IB=function V(Pt){let $t;const ke=DS(Pt);for(cs("beforeSanitizeShadowDOM",Pt,null);$t=ke.nextNode();)cs("uponSanitizeShadowNode",$t,null),PS($t)||($t.content instanceof a&&V($t.content),IS($t));cs("afterSanitizeShadowDOM",Pt,null)};return n.sanitize=function(V){let Pt,$t,ke,Fe,qe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ls=!V,ls&&(V="\x3c!--\x3e"),"string"!=typeof V&&!lu(V)){if("function"!=typeof V.toString)throw Ol("toString is not a function");if("string"!=typeof(V=V.toString()))throw Ol("dirty is not a string, aborting")}if(!n.isSupported)return V;if(ze||_i(qe),n.removed=[],"string"==typeof V&&(ht=!1),ht){if(V.nodeName){const Ni=vn(V.nodeName);if(!wt[Ni]||X[Ni])throw Ol("root node is forbidden and cannot be sanitized in-place")}}else if(V instanceof l)Pt=BS("\x3c!----\x3e"),$t=Pt.ownerDocument.importNode(V,!0),1===$t.nodeType&&"BODY"===$t.nodeName||"HTML"===$t.nodeName?Pt=$t:Pt.appendChild($t);else{if(!yt&&!Xt&&!Se&&-1===V.indexOf("<"))return N&&ce?N.createHTML(V):V;if(Pt=BS(V),!Pt)return yt?null:ce?A:""}Pt&&Cr&&Oa(Pt.firstChild);const Ue=DS(ht?V:Pt);for(;ke=Ue.nextNode();)PS(ke)||(ke.content instanceof a&&IB(ke.content),IS(ke));if(ht)return V;if(yt){if(te)for(Fe=P.call(Pt.ownerDocument);Pt.firstChild;)Fe.appendChild(Pt.firstChild);else Fe=Pt;return(kt.shadowroot||kt.shadowrootmode)&&(Fe=$.call(r,Fe,!0)),Fe}let Ke=Se?Pt.outerHTML:Pt.innerHTML;return Se&&wt["!doctype"]&&Pt.ownerDocument&&Pt.ownerDocument.doctype&&Pt.ownerDocument.doctype.name&&Ir(bC,Pt.ownerDocument.doctype.name)&&(Ke="<!DOCTYPE "+Pt.ownerDocument.doctype.name+">\n"+Ke),Xt&&(Ke=bo(Ke,I," "),Ke=bo(Ke,j," "),Ke=bo(Ke,G," ")),N&&ce?N.createHTML(Ke):Ke},n.setConfig=function(V){_i(V),ze=!0},n.clearConfig=function(){Vn=null,ze=!1},n.isValidAttribute=function(V,Pt,$t){Vn||_i({});const ke=vn(V),Fe=vn(Pt);return LS(ke,Fe,$t)},n.addHook=function(V,Pt){"function"==typeof Pt&&(B[V]=B[V]||[],Rl(B[V],Pt))},n.removeHook=function(V){if(B[V])return OA(B[V])},n.removeHooks=function(V){B[V]&&(B[V]=[])},n.removeAllHooks=function(){B={}},n}();const yC=lt.each,WA=lt.trim,VA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],KA={ftp:21,http:80,https:443,mailto:25},XA=["img","video"],CC=(t,e,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!t.allow_html_data_urls&&(/^data:image\//i.test(r)?(s=n,(ct(o=t.allow_svg_data_urls)?!o:!ct(s)||!Ot(XA,s))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,s};class Gr{static parseDataUri(e){let n;const r=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(e,n,r={}){if(r.allow_script_urls)return!0;{const o=oa.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!CC(r,o,n)}}static getDocumentBaseUrl(e){var n;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,n={}){this.path="",this.directory="",e=WA(e),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=r?r.path:new Gr(document.location.href).directory;if(""===r?.protocol)e="//mce_host"+o.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&yC(VA,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),o[i]=c}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),s&&(o.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new Gr(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const r=new Gr(e,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?KA[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let r,o,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(r=0,o=i.length;r<o;r++)if(r>=l.length||i[r]!==l[r]){s=r+1;break}if(i.length<l.length)for(r=0,o=l.length;r<o;r++)if(r>=i.length||i[r]!==l[r]){s=r+1;break}if(1===s)return n;for(r=0,o=i.length-(s-1);r<o;r++)a+="../";for(r=s-1,o=l.length;r<o;r++)a+=r!==s-1?"/"+l[r]:l[r];return a}toAbsPath(e,n){let r=0;const o=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];yC(s,f=>{f&&i.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)0!==a[f].length&&"."!==a[f]&&(".."!==a[f]?r>0?r--:l.push(a[f]):r++);const c=i.length-r;let u;return u=c<=0?to(l).join("/"):i.slice(0,c).join("/")+"/"+to(l).join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const YA=lt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Vm="data-mce-type";let xC=0;const wC=(t,e,n,r,o)=>{var s,a,i,l;const c=e.validate,u=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(s=t.nodeValue)&&void 0!==s?s:"")&&(t.nodeValue=" "+t.nodeValue);const f=null!==(a=o?.tagName)&&void 0!==a?a:t.nodeName.toLowerCase();if("html"!==r&&n.isValid(r))return void(ct(o)&&(o.allowedTags[f]=!0));if(1!==t.nodeType||"body"===f)return;const p=D(t),b=d(p,Vm),g=Qn(p,"data-mce-bogus");if(!b&&Rt(g))return void("all"===g?Gt(p):ae(p));const v=n.getElementRule(f);if(!c||v){if(ct(o)&&(o.allowedTags[f]=!0),c&&v&&!b){if(Z(null!==(i=v.attributesForced)&&void 0!==i?i:[],h=>{Ze(p,h.name,"{$uid}"===h.value?"mce_"+xC++:h.value)}),Z(null!==(l=v.attributesDefault)&&void 0!==l?l:[],h=>{d(p,h.name)||Ze(p,h.name,"{$uid}"===h.value?"mce_"+xC++:h.value)}),v.attributesRequired&&!_e(v.attributesRequired,h=>d(p,h))||v.removeEmptyAttrs&&(h=>{const C=h.dom.attributes;return null==C||0===C.length})(p))return void ae(p);v.outputName&&v.outputName!==f&&((h,C)=>{const E=((N,A)=>{const R=Mt(A),M=y(N);return ro(R,M),R})(h,C);Ft(h,E);const S=Ee(h);de(E,S),Gt(h)})(p,v.outputName)}}else Ut(u,f)?Gt(p):ae(p)},EC=(t,e,n,r,o,s)=>"html"!==n&&!ea(r)||!(o in YA&&CC(t,s,r))&&(!t.validate||e.isValid(r,o)||Ve(o,"data-")||Ve(o,"aria-")),SC=(t,e)=>t.hasAttribute(Vm)&&("id"===e||"class"===e||"style"===e),kC=(t,e)=>t in e.getBoolAttrs(),GA=(t,e,n,r)=>{const{attributes:o}=t;for(let s=o.length-1;s>=0;s--){const a=o[s],i=a.name,l=a.value;EC(e,n,r,t.tagName.toLowerCase(),i,l)||SC(t,i)?kC(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},ZA=t=>{const e=Fg(t);if("svg"===e){const r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(o=>`xlink:${o}`)};Wm().sanitize(t,r)}else{if("math"!==e)throw new Error("Not a namespace element");{const n={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};Wm().sanitize(t,n)}}},_C=lt.makeMap,NC=lt.extend,AC=(t,e,n,r)=>{const o=t.name,s=o in n&&"title"!==o&&"textarea"!==o&&"noscript"!==o,a=e.childNodes;for(let i=0,l=a.length;i<l;i++){const c=a[i],u=new $n(c.nodeName.toLowerCase(),c.nodeType);if(Nt(c)){const f=c.attributes;for(let p=0,b=f.length;p<b;p++){const g=f[p];u.attr(g.name,g.value)}ea(u.name)&&(r(c),u.value=c.innerHTML)}else ot(c)?(u.value=c.data,s&&(u.raw=!0)):(xs(c)||US(c)||HS(c))&&(u.value=c.data);ea(u.name)||AC(u,c,n,r),t.append(u)}},ui=(t={},e=ws())=>{const n=nC(),r=nC(),o={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((v,h)=>{const C=(()=>{const E=ns(),S=()=>E.get().map(Fg).getOr("html");return{track:N=>(Su(N)?E.set(N):E.get().exists(A=>!A.contains(N))&&E.clear(),S()),current:S,reset:()=>{E.clear()}}})();if(v.sanitize){const E=((t,e,n)=>{const r=Wm();return r.addHook("uponSanitizeElement",(o,s)=>{wC(o,t,e,n.track(o),s)}),r.addHook("uponSanitizeAttribute",(o,s)=>{((a,i,l,c,u)=>{const f=a.tagName.toLowerCase(),{attrName:p,attrValue:b}=u;u.keepAttr=EC(i,l,c,f,p,b),u.keepAttr?(u.allowedAttributes[p]=!0,kC(p,l)&&(u.attrValue=p),i.allow_svg_data_urls&&Ve(b,"data:image/svg+xml")&&(u.forceKeepAttr=!0)):SC(a,p)&&(u.forceKeepAttr=!0)})(o,t,e,n.current(),s)}),r})(v,h,C);return{sanitizeHtmlElement:(N,A)=>{E.sanitize(N,((R,M)=>{const P={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return P.PARSER_MEDIA_TYPE=M,R.allow_script_urls?P.ALLOWED_URI_REGEXP=/.*/:R.allow_html_data_urls&&(P.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),P})(v,A)),E.removed=[],C.reset()},sanitizeNamespaceElement:ZA}}return{sanitizeHtmlElement:(E,S)=>{const N=document.createNodeIterator(E,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let A;for(;A=N.nextNode();){const R=C.track(A);wC(A,v,h,R),Nt(A)&&GA(A,v,h,R)}C.reset()},sanitizeNamespaceElement:_t}})(o,e),l=n.getFilters,f=r.getFilters,b=(v,h)=>{const C=Rt(h.attr(Vm)),E=1===h.type&&!Ut(v,h.name)&&!Ru(e,h)&&!ea(h.name);return 3===h.type||E&&!C},g={schema:e,addAttributeFilter:r.addFilter,getAttributeFilters:f,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(v,h={})=>{var C;const E=o.validate,S=null!==(C=h.context)&&void 0!==C?C:o.root_name,N=((j,G,st="html")=>{const rt="xhtml"===st?"application/xhtml+xml":"text/html",xt=Ut(e.getSpecialElements(),G.toLowerCase()),At=xt?`<${G}>${j}</${G}>`:j,Dt=s.parseFromString("xhtml"===st?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${At}</body></html>`:/^[\s]*<head/i.test(j)||/^[\s]*<html/i.test(j)||/^[\s]*<!DOCTYPE/i.test(j)?`<html>${At}</html>`:`<body>${At}</body>`,rt).body;return a.sanitizeHtmlElement(Dt,rt),xt?Dt.firstChild:Dt})(v,S,h.format);_u(e,N);const A=new $n(S,11);AC(A,N,e.getSpecialElements(),a.sanitizeNamespaceElement),N.innerHTML="";const[R,M]=((j,G,st,rt)=>{const xt=st.validate,At=G.getNonEmptyElements(),Dt=G.getWhitespaceElements(),wt=NC(_C("script,style,head,html,body,title,meta,param"),G.getBlockElements()),pt=oh(G),kt=/[ \t\r\n]+/g,F=/^[ \t\r\n]+/,U=/[ \t\r\n]+$/,X=dt=>{let Lt=dt.parent;for(;ct(Lt);){if(Lt.name in Dt)return!0;Lt=Lt.parent}return!1},Q=dt=>dt.name in wt||Ru(G,dt)||ea(dt.name)&&dt.parent===j,gt=(dt,Lt)=>!ct(Lt?dt.prev:dt.next)&&!we(dt.parent)&&Q(dt.parent)&&(dt.parent!==j||!0===rt.isRootContent);return[dt=>{var Lt,Xt,Se;if(3===dt.type&&!X(dt)){let Ht=null!==(Lt=dt.value)&&void 0!==Lt?Lt:"";Ht=Ht.replace(kt," "),Se=Q,(ct(Xt=dt.prev)&&(Se(Xt)||"br"===Xt.name)||gt(dt,!0))&&(Ht=Ht.replace(F,"")),0===Ht.length||" "===Ht&&dt.prev&&8===dt.prev.type&&dt.next&&8===dt.next.type?dt.remove():dt.value=Ht}},dt=>{var Lt,Se,ze;if(1===dt.type){const Ht=G.getElementRule(dt.name);if(xt&&Ht){const Xt=_l(G,At,Dt,dt);Ht.paddInEmptyBlock&&Xt&&(Se=>{let ze=Se;for(;ct(ze);){if(ze.name in pt)return _l(G,At,Dt,ze);ze=ze.parent}return!1})(dt)?hm(st,rt,Q,dt):Ht.removeEmpty&&Xt?Q(dt)?dt.remove():dt.unwrap():Ht.paddEmpty&&(Xt||fy(Se=dt,"#text")&&(null===(ze=Se?.firstChild)||void 0===ze?void 0:ze.value)===cn)&&hm(st,rt,Q,dt)}}else if(3===dt.type&&!X(dt)){let Ht=null!==(Lt=dt.value)&&void 0!==Lt?Lt:"";(dt.next&&Q(dt.next)||gt(dt,!1))&&(Ht=Ht.replace(U,"")),0===Ht.length?dt.remove():dt.value=Ht}}]})(A,e,o,h),P=[],$={nodes:{},attributes:{}},B=j=>cy(l(),f(),j,$);if(((j,G,st)=>{const rt=[];for(let xt=j,At=xt;xt;At=xt,xt=xt.walk()){const Dt=xt;Z(G,wt=>wt(Dt)),we(Dt.parent)&&Dt!==j?xt=At:rt.push(Dt)}for(let xt=rt.length-1;xt>=0;xt--){const At=rt[xt];Z(st,Dt=>Dt(At))}})(A,[R,B],[M,E?j=>{return st=P,void(ym(e,G=j)&&st.push(G));var G,st}:_t]),P.reverse(),E&&P.length>0)if(h.context){const{pass:j,fail:G}=Ur(P,st=>st.parent===A);vm(G,e,A,B),h.invalid=j.length>0}else vm(P,e,A,B);const I=((j,G)=>{var st;const rt=null!==(st=G.forced_root_block)&&void 0!==st?st:j.forced_root_block;return!1===rt?"":!0===rt?"p":rt})(o,h);return I&&("body"===A.name||h.isRootContent)&&((j,G)=>{const st=NC(_C("script,style,head,html,body,title,meta,param"),e.getBlockElements()),rt=/^[ \t\r\n]+/,xt=/[ \t\r\n]+$/;let At=j.firstChild,Dt=null;const wt=pt=>{var kt,F;pt&&(At=pt.firstChild,At&&3===At.type&&(At.value=null===(kt=At.value)||void 0===kt?void 0:kt.replace(rt,"")),At=pt.lastChild,At&&3===At.type&&(At.value=null===(F=At.value)||void 0===F?void 0:F.replace(xt,"")))};if(e.isValidChild(j.name,G.toLowerCase())){for(;At;){const pt=At.next;b(st,At)?(Dt||(Dt=new $n(G,1),Dt.attr(o.forced_root_block_attrs),j.insert(Dt,At)),Dt.append(At)):(wt(Dt),Dt=null),At=pt}wt(Dt)}})(A,I),h.invalid||dy($,h),A}};return((v,h)=>{var C,E;const S=v.schema;v.addAttributeFilter("href",M=>{let P=M.length;const z=$=>{const B=$?lt.trim($):"";return/\b(noopener)\b/g.test(B)?B:B.split(" ").filter(j=>j.length>0).concat(["noopener"]).sort().join(" ")};if(!h.allow_unsafe_link_target)for(;P--;){const $=M[P];"a"===$.name&&"_blank"===$.attr("target")&&$.attr("rel",z($.attr("rel")))}}),h.allow_html_in_named_anchor||v.addAttributeFilter("id,name",M=>{let P,z,$,B,I=M.length;for(;I--;)if(B=M[I],"a"===B.name&&B.firstChild&&!B.attr("href"))for($=B.parent,P=B.lastChild;P&&$;)z=P.prev,$.insert(P,B),P=z}),h.fix_list_elements&&v.addNodeFilter("ul,ol",M=>{let P,z,$=M.length;for(;$--;)if(P=M[$],z=P.parent,z&&("ul"===z.name||"ol"===z.name))if(P.prev&&"li"===P.prev.name)P.prev.append(P);else{const B=new $n("li",1);B.attr("style","list-style-type: none"),P.wrap(B)}});const N=S.getValidClasses();h.validate&&N&&v.addAttributeFilter("class",M=>{var P;let z=M.length;for(;z--;){const $=M[z],B=null!==(P=$.attr("class"))&&void 0!==P?P:"",I=lt.explode(B," ");let j="";for(let G=0;G<I.length;G++){const st=I[G];let rt=!1,xt=N["*"];xt&&xt[st]&&(rt=!0),xt=N[$.name],!rt&&xt&&xt[st]&&(rt=!0),rt&&(j&&(j+=" "),j+=st)}j.length||(j=null),$.attr("class",j)}}),((M,P)=>{const{blob_cache:z}=P;if(z){const $=B=>{const I=B.attr("src");var j;(j=B).attr("src")===ge.transparentSrc||ct(j.attr("data-mce-placeholder"))||(j=>ct(j.attr("data-mce-bogus")))(B)||we(I)||iC(z,I,!0).each(j=>{B.attr("src",j.blobUri())})};M.addAttributeFilter("src",B=>Z(B,$))}})(v,h);const A=null!==(C=h.sandbox_iframes)&&void 0!==C&&C,R=Eo(null!==(E=h.sandbox_iframes_exclusions)&&void 0!==E?E:[]);h.convert_unsafe_embeds&&v.addNodeFilter("object,embed",M=>Z(M,P=>{P.replace((({type:z,src:$,width:B,height:I}={},j,G)=>{const st=Me(xt=z)?"iframe":Im(xt,"image")?"img":Im(xt,"video")?"video":Im(xt,"audio")?"audio":"iframe",rt=new $n(st,1);var xt;return rt.attr("audio"===st?{src:$}:{src:$,width:B,height:I}),"audio"!==st&&"video"!==st||rt.attr("controls",""),"iframe"===st&&j&&lC(rt,G),rt})({type:P.attr("type"),src:P.attr("object"===P.name?"data":"src"),width:P.attr("width"),height:P.attr("height")},A,R))})),A&&v.addNodeFilter("iframe",M=>Z(M,P=>lC(P,R)))})(g,o),(h=o).inline_styles&&((t,e,n)=>{var r;const o=Fu();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=o,i=lt.explode(null!==(r=e.font_size_legacy_values)&&void 0!==r?r:""),s.addNodeFilter("font",l=>{Z(l,c=>{const u=a.parse(c.attr("style")),f=c.attr("color"),p=c.attr("face"),b=c.attr("size");var g;f&&(u.color=f),p&&(u["font-family"]=p),b&&Ws(b).each(g=>{u["font-size"]=i[g-1]}),c.name="span",c.attr("style",a.serialize(u)),g=c,Z(["color","face","size"],h=>{g.attr(h,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const c="html4"!==a.type;Z(l,u=>{if(c)u.name="s";else{const f=i.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",i.serialize(f))}})})})(t,n,o)})(g,h,e),g;var h},TC=(t,e,n)=>{const r=id(s=t)?Ts({validate:!1}).serialize(s):s,o=e(r);var s;if(o.isDefaultPrevented())return o;if(id(t)){if(o.content!==r){const s=ui({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:t.name});return{...o,content:s}}return{...o,content:t}}return o},RC=t=>({sanitize:w0(t),sandbox_iframes:S0(t),sandbox_iframes_exclusions:uf(t)}),OC=(t,e)=>{if(e.no_events)return tr.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?tr.error(Sb(t,{content:"",...n}).content):tr.value(n)}},BC=(t,e,n)=>n.no_events?e:TC(e,o=>Sb(t,{...n,content:o}),RC(t)).content,Km=(t,e)=>{if(e.no_events)return tr.value(e);{const n=TC(e.content,r=>{return o=t,s={...e,content:r},o.dispatch("BeforeSetContent",s);var o,s},RC(t));return n.isDefaultPrevented()?(Eb(t,n),tr.error(void 0)):tr.value(n)}},Xm=(t,e,n)=>{n.no_events||Eb(t,{...n,content:e})},Ym=(t,e,n)=>({element:t,width:e,rows:n}),DC=(t,e)=>({element:t,cells:e}),JA=(t,e)=>({x:t,y:e}),PC=(t,e)=>oo(t,e).bind(Ws).getOr(1),tT=(t,e,n)=>{const r=t.rows;return!!(r[n]?r[n].cells:[])[e]},LC=t=>yn(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),MC=(t,e)=>{const n=t.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let s=0;s<o.length;s++)if(zt(o[s],e))return k.some(JA(s,r))}return k.none()},IC=(t,e,n,r,o)=>{const s=[],a=t.rows;for(let i=n;i<=o;i++){const l=a[i].cells,c=e<r?l.slice(e,r+1):l.slice(r,e+1);s.push(DC(a[i].element,c))}return s},eT=t=>((e,n)=>{const r=ia(e.element),o=Mt("tbody");return de(o,n),St(r,o),r})(t,re(t.rows,n=>{const r=re(n.cells,s=>{const a=wh(s);return m(a,"colspan"),m(a,"rowspan"),a}),o=ia(n.element);return de(o,r),o})),FC=()=>Ff([]),pd=(t,e)=>e>=0&&e<t.length&&ga(t.charAt(e)),jC=t=>vr(t.innerText),zC=t=>Nt(t)?t.outerHTML:ot(t)?oa.encodeRaw(t.data,!1):xs(t)?"\x3c!--"+t.data+"--\x3e":"",aT=$r(()=>document.implementation.createHTMLDocument("undo")),gd=t=>{const e=t.serializer.getTempAttrs(),n=dv(t.getBody(),e);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:Vt(re(Cn(n.childNodes),Bn(vr,zC)),r=>r.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:vr(n.innerHTML),bookmark:null,beforeBookmark:null}},Gm=(t,e,n)=>{const r=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,r)=>{let o=0;Z(n,s=>{var a,i;0===s[0]?o++:1===s[0]?(((a,i,l)=>{const c=(u=>{let f;const p=document.createElement("div"),b=document.createDocumentFragment();for(u&&(p.innerHTML=u);f=p.firstChild;)b.appendChild(f);return b})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(c,a.childNodes[l]):a.appendChild(c)})(r,s[1],o),o++):2===s[0]&&(i=o,(a=r).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,r)=>{const o=n.length+r.length+2,s=new Array(o),a=new Array(o),i=(f,p,b,g,v)=>{const h=c(f,p,b,g);if(null===h||h.start===p&&h.diag===p-g||h.end===f&&h.diag===f-b){let C=f,E=b;for(;C<p||E<g;)C<p&&E<g&&n[C]===r[E]?(v.push([0,n[C]]),++C,++E):p-f>g-b?(v.push([2,n[C]]),++C):(v.push([1,r[E]]),++E)}else{i(f,h.start,b,h.start-h.diag,v);for(let C=h.start;C<h.end;++C)v.push([0,n[C]]);i(h.end,p,h.end-h.diag,g,v)}},l=(f,p,b,g)=>{let v=f;for(;v-p<g&&v<b&&n[v]===r[v-p];)++v;return((h,C,E)=>({start:h,end:C,diag:E}))(f,v,p)},c=(f,p,b,g)=>{const v=p-f,h=g-b;if(0===v||0===h)return null;const C=v-h,E=h+v,S=(E%2==0?E:E+1)/2;let N,A,R,M,P;for(s[1+S]=f,a[1+S]=p+1,N=0;N<=S;++N){for(A=-N;A<=N;A+=2){for(R=A+S,s[R]=A===-N||A!==N&&s[R-1]<s[R+1]?s[R+1]:s[R-1]+1,M=s[R],P=M-f+b-A;M<p&&P<g&&n[M]===r[P];)s[R]=++M,++P;if(C%2!=0&&C-N<=A&&A<=C+N&&a[R-C]<=s[R])return l(a[R-C],A+f-b,p,g)}for(A=C-N;A<=C+N;A+=2){for(R=A+S-C,a[R]=A===C-N||A!==C+N&&a[R+1]<=a[R-1]?a[R+1]-1:a[R-1],M=a[R]-1,P=M-f+b-A;M>=f&&P>=b&&n[M]===r[P];)a[R]=M--,P--;if(C%2==0&&-N<=A&&A<=N&&a[R]<=s[R+C])return l(a[R],A+f-b,p,g)}}return null},u=[];return i(0,n.length,0,r.length,u),u})(re(Cn(e.childNodes),zC),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!ct(r)||!K0(r)||!r.isFakeCaret}),r&&(t.selection.moveToBookmark(r),t.selection.scrollIntoView())},Qm=t=>"fragmented"===t.type?t.fragments.join(""):t.content,UC=t=>{const e=Mt("body",aT());return nn(e,Qm(t)),Z(Mn(e,"*[data-mce-bogus]"),ae),An(e)},Zm=(t,e)=>{return!(!t||!e)&&(r=e,!(Qm(t)!==Qm(r))||((n,r)=>UC(n)===UC(r))(t,e));var r},Jm=t=>0===t.get(),hd=(t,e,n)=>{Jm(n)&&(t.typing=e)},HC=(t,e)=>{t.typing&&(hd(t,!1,e),t.add())},qC=t=>({init:{bindEvents:_t},undoManager:{beforeChange:(e,n)=>{return r=t,s=n,void(Jm(e)&&s.set(of(r.selection)));var r,s},add:(e,n,r,o,s,a)=>((i,l,c,u,f,p,b)=>{const g=gd(i),v=lt.extend(p||{},g);if(!Jm(u)||i.removed)return null;const h=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:v,lastLevel:h,originalEvent:b}).isDefaultPrevented()||h&&Zm(h,v))return null;l.data[c.get()]&&f.get().each(S=>{l.data[c.get()].beforeBookmark=S});const C=p_(i);if(C&&l.data.length>C){for(let S=0;S<l.data.length-1;S++)l.data[S]=l.data[S+1];l.data.length--,c.set(l.data.length)}v.bookmark=of(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(v),c.set(l.data.length-1);const E={level:v,lastLevel:h,originalEvent:b};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",E),i.dispatch("change",E)):i.dispatch("AddUndo",E),v})(t,e,n,r,o,s,a),undo:(e,n,r)=>((o,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,hd(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],Gm(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(t,e,n,r),redo:(e,n)=>((r,o,s)=>{let a;return o.get()<s.length-1&&(o.set(o.get()+1),a=s[o.get()],Gm(r,a,!1),r.setDirty(!0),r.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return r=t,s=n,(o=e).data=[],s.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return r=t,o=e,n.get()>0||o.typing&&o.data[0]&&!Zm(gd(r),o.data[0]);var r,o},hasRedo:(e,n)=>{return r=e,n.get()<r.data.length-1&&!r.typing;var r},transact:(e,n,r)=>{return a=r,HC(o=e,n),o.beforeChange(),o.ignore(a),o.add();var o,a},ignore:(e,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(e,n),extra:(e,n,r,o)=>((s,a,i,l,c)=>{if(a.transact(l)){const u=a.data[i.get()].bookmark,f=a.data[i.get()-1];Gm(s,f,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=u)}})(t,e,n,r,o)},formatter:{match:(e,n,r,o)=>Nm(t,e,n,r,o),matchAll:(e,n)=>((r,o,s)=>{const a=[],i={},l=r.selection.getStart();return r.dom.getParent(l,c=>{for(let u=0;u<o.length;u++){const f=o[u];!i[f]&&Fo(r,c,f,s)&&(i[f]=!0,a.push(f))}},r.dom.getRoot()),a})(t,e,n),matchNode:(e,n,r,o)=>Fo(t,e,n,r,o),canApply:e=>((n,r)=>{const o=n.formatter.get(r),s=n.dom;if(o&&n.selection.isEditable()){const a=n.selection.getStart(),i=Hc(s,a);for(let l=o.length-1;l>=0;l--){const c=o[l];if(!Pr(c))return!0;for(let u=i.length-1;u>=0;u--)if(s.is(i[u],c.selector))return!0}}return!1})(t,e),closest:e=>((n,r)=>{const o=s=>zt(s,D(n.getBody()));return k.from(n.selection.getStart(!0)).bind(s=>Sm(D(s),a=>Yn(r,i=>{return Fo(n,a.dom,c=i)?k.some(c):k.none();var c}),o)).getOrNull()})(t,e),apply:(e,n,r)=>Yy(t,e,n,r),remove:(e,n,r,o)=>Vy(t,e,n,r,o),toggle:(e,n,r)=>((o,s,a,i)=>{const l=o.formatter.get(s);l&&(!Nm(o,s,a,i)||"toggle"in l[0]&&!l[0].toggle?Yy(o,s,a,i):Vy(o,s,a,i))})(t,e,n,r),formatChanged:(e,n,r,o,s)=>{return((p,b,g,v,h,C)=>{const E=b.get();Z(g.split(","),S=>{const N=Te(E,S).getOrThunk(()=>{const R={withSimilar:{state:gn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:gn(!1),similar:!1,callbacks:[]},withVars:[]};return E[S]=R,R}),A=()=>{const R=Jy(p);return Zy(p,R,S,h,C).isSome()};if(Me(C)){const R=h?N.withSimilar:N.withoutSimilar;R.callbacks.push(v),1===R.callbacks.length&&R.state.set(A())}else N.withVars.push({state:gn(A()),similar:h,vars:C,callback:v})}),b.set(E)})(t,i=e,l=n,c=r,o,s),{unbind:()=>((p,b,g)=>{const v=p.get();Z(b.split(","),h=>Te(v,h).each(C=>{v[h]={withSimilar:{...C.withSimilar,callbacks:Vt(C.withSimilar.callbacks,E=>E!==g)},withoutSimilar:{...C.withoutSimilar,callbacks:Vt(C.withoutSimilar.callbacks,E=>E!==g)},withVars:Vt(C.withVars,E=>E.callback!==g)}})),p.set(v)})(i,l,c)};var i,l,c}},editor:{getContent:e=>{return r=e,k.from((n=t).getBody()).fold(mt("tree"===r.format?new $n("body",11):""),o=>((t,e,n)=>{let r;return r="raw"===e.format?lt.trim(vr(dv(n,t.serializer.getTempAttrs()).innerHTML)):"text"===e.format?((o,s)=>{const a=o.getDoc(),i=Ie(D(o.getBody())),l=Mt("div",a);Ze(l,"data-mce-bogus","all"),Zs(l,{position:"fixed",left:"-9999999px",top:"0"}),nn(l,s.innerHTML),uv(l),fv(l);const c=se(f=i)?f:D(Le(f).dom.body);var f;St(c,l);const u=vr(l.dom.innerText);return Gt(l),u})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((o,s)=>{const a=Fn(o),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!Ec(D(n))&&Rt(r)?lt.trim(r):r})(n,r,o));var n,r},setContent:(e,n)=>{return o=e,s=n,k.from((r=t).getBody()).map(a=>id(o)?((i,l,c,u)=>{uy(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const f=Ts({validate:!1},i.schema).serialize(c),p=vr(Ec(D(l))?f:lt.trim(f));return Em(i,p,u.no_selection),{content:c,html:p}})(r,a,o,s):((i,l,c,u)=>{if(0===(c=vr(c)).length||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const p=Fn(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),p.toLowerCase())?(c=f,c=i.dom.createHTML(p,il(i),c)):c||(c=f),Em(i,c,u.no_selection),{content:c,html:c}}{"raw"!==u.format&&(c=Ts({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const f=Ec(D(l))?c:lt.trim(c);return Em(i,f,u.no_selection),{content:f,html:f}}})(r,a,o,s)).getOr({content:o,html:id(s.content)?"":s.content});var r,o,s},insertContent:(e,n)=>bA(t,e,n),addVisual:e=>((n,r)=>{const o=n.dom,s=ct(r)?r:n.getBody();Z(o.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=C_(n),l=o.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?o.removeClass(a,i):o.addClass(a,i);break;case"A":if(!o.getAttrib(a,"href")){const c=o.getAttrib(a,"name")||a.id,u=y0(n);c&&n.hasVisual?o.addClass(a,u):o.removeClass(a,u)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((r,o,s={})=>{const a=(i=s,l=o,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return OC(r,a).fold(pe,i=>{const l=((c,u)=>{if("text"===u.format)return k.from((f=c).selection.getRng()).map(p=>{var b;const g=k.from(f.dom.getParent(p.commonAncestorContainer,f.dom.isBlock)),v=f.getBody(),h=g.map(R=>R.nodeName).getOr("div").toLowerCase(),C=D(p.cloneContents());uv(C),fv(C);const E=f.dom.add(v,h,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},C.dom),S=jC(E),N=vr(null!==(b=E.textContent)&&void 0!==b?b:"");if(f.dom.remove(E),pd(N,0)||pd(N,N.length-1)){const A=g.getOr(v),R=jC(A),M=R.indexOf(S);return-1===M?S:(pd(R,M-1)?" ":"")+S+(pd(R,M+S.length)?" ":"")}return S}).getOr("");var f;{const f=((p,b)=>{const g=p.selection.getRng(),v=p.dom.create("body"),h=p.selection.getSel(),C=Yf(p,xf(h)),E=b.contextual?((t,e,n)=>{const r=J0(e,t);return r.length>0?((t,e)=>{return(n=t,r=e[0],io(r,"table",Et(zt,n))).bind(n=>{const r=e[0],o=e[e.length-1],s=(a=>{const i=Ym(ia(a),0,[]);return Z(Mn(a,"tr"),(l,c)=>{Z(Mn(l,"td,th"),(u,f)=>{((p,b,g,v,h)=>{const C=PC(h,"rowspan"),E=PC(h,"colspan"),S=p.rows;for(let N=g;N<g+C;N++){S[N]||(S[N]=DC(wh(v),[]));for(let A=b;A<b+E;A++)S[N].cells[A]=N===g&&A===b?h:ia(h)}})(i,((p,b,g)=>{for(;tT(p,b,g);)b++;return b})(i,f,c),c,l,u)})}),Ym(i.element,LC(i.rows),i.rows)})(n);return(a=s,i=r,l=o,MC(a,i).bind(c=>MC(a,l).map(u=>((f,p,b)=>{const g=p.x,v=p.y,h=b.x,C=b.y,E=v<C?IC(f,g,v,h,C):IC(f,g,C,h,v);return Ym(f.element,LC(E),E)})(a,c,u)))).map(a=>Ff([eT(a)]));var a,i,l}).getOrThunk(FC);var n,r})(t,r):(o=t,a=n,(s=e).length>0&&s[0].collapsed?FC():(i=o,c=a,((u,f)=>{const p=yn(f,(b,g)=>(St(g,b),g),u);return f.length>0?Ff([p]):p})(D((l=s[0]).cloneContents()),((t,e,n)=>{const r=D(e.commonAncestorContainer),o=ss(r,t),s=Vt(o,l=>n.isWrapper(me(l))),a=(c=e,Ge(l=o,u=>"li"===me(u)&&Ef(u,c)).fold(mt([]),u=>{return(f=l,Ge(f,p=>"ul"===me(p)||"ol"===me(p))).map(f=>{const p=Mt(me(f)),b=_o(nt(f),(g,v)=>Ve(v,"list-style"));return Zs(p,b),[Mt("li"),p]}).getOr([]);var f})),i=s.concat(a.length?a:(l=>Ka(l)?sr(l).filter(Vu).fold(mt([]),c=>[l,c]):Vu(l)?[l]:[])(r));var l,c;return re(i,ia)})(i,l,c))));var o,s,a,i,l,c})(D(p.getBody()),C,p.schema).dom:g.cloneContents();return E&&v.appendChild(E),p.selection.serializer.serialize(v,b)})(c,u);return"tree"===u.format?f:c.selection.isCollapsed()?"":f}})(r,i);return BC(r,l,i)})})(t,e,n)},autocompleter:{addDecoration:_t,removeDecoration:_t},raw:{getModel:()=>k.none()}}),jo=t=>Ut(t.plugins,"rtc"),tp=t=>t.rtcInstance?t.rtcInstance:qC(t),rn=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},$C=t=>rn(t).init.bindEvents(),WC=t=>0===t.dom.length?(Gt(t),k.none()):k.some(t),VC=(t,e,n,r,o)=>{t.bind(s=>((r?om:nd)(s.dom,r?s.dom.length:0,o),e.filter(wn).map(a=>((i,l,c,u,f)=>{const p=i.dom,b=l.dom,g=u?p.length:b.length;u?(sm(p,b,f,!1,!u),c.setStart(b,g)):(sm(b,p,f,!1,!u),c.setEnd(b,g))})(s,a,n,r,o)))).orThunk(()=>{return(a=e,i=r,a.filter(l=>vl.isBookmarkNode(l.dom)).bind(i?hr:Ln)).or(e).filter(wn).map(a=>((i,l,c)=>{sr(i).each(u=>{const f=i.dom;l&&El(u,Y(f,0),c)?nd(f,0,c):!l&&Sl(u,Y(f,f.length),c)&&om(f,f.length,c)})})(a,r,o));var a,i})},KC=(t,e,n)=>{if(Ut(t,e)){const r=Vt(t[e],o=>o!==n);0===r.length?delete t[e]:t[e]=r}},XC=t=>!(!t||!t.ownerDocument)&&kn(D(t.ownerDocument),D(t)),YC=(t,e,n,r)=>{let o,s;const{selectorChangedWithUnbind:a}=((h,C)=>{let E,S;const N=(R,M)=>Ge(M,P=>h.is(P,R)),A=R=>h.getParents(R,void 0,h.getRoot());return{selectorChangedWithUnbind:(R,M)=>(E||(E={},S={},C.on("NodeChange",P=>{const z=P.element,$=A(z),B={};xe(E,(I,j)=>{N(j,$).each(G=>{S[j]||(Z(I,st=>{st(!0,{node:G,selector:j,parents:$})}),S[j]=I),B[j]=I})}),xe(S,(I,j)=>{B[j]||(delete S[j],Z(I,G=>{G(!1,{node:z,selector:j,parents:$})}))})})),E[R]||(E[R]=[]),E[R].push(M),N(R,A(C.selection.getStart())).each(()=>{S[R]=E[R]}),{unbind:()=>{KC(E,R,M),KC(S,R,M)}})}})(t,r),i=(h,C)=>((E,S,N={})=>{const A=(R=N,M=S,{format:"html",...R,set:!0,selection:!0,content:M});var R,M;Km(E,A).each(R=>{const M=((z,$)=>{if("raw"!==$.format){const B=z.selection.getRng(),I=z.dom.getParent(B.commonAncestorContainer,z.dom.isBlock),j=I?{context:I.nodeName.toLowerCase()}:{},G=z.parser.parse($.content,{forced_root_block:!1,...j,...$});return Ts({validate:!1},z.schema).serialize(G)}return $.content})(E,R),P=E.selection.getRng();((z,$,B)=>{const I=k.from($.firstChild).map(D),j=k.from($.lastChild).map(D);z.deleteContents(),z.insertNode($);const G=I.bind(Ln).filter(wn).bind(WC),st=j.bind(hr).filter(wn).bind(WC);VC(G,I,z,!0,B),VC(st,j,z,!1,B),z.collapse(!1)})(P,P.createContextualFragment(M),E.schema),E.selection.setRng(P),Cl(E,P),Xm(E,M,R)})})(r,h,C),l=h=>{const C=u();C.collapse(!!h),f(C)},c=()=>e.getSelection?e.getSelection():e.document.selection,u=()=>{let h;const C=(S,N,A)=>{try{return N.compareBoundaryPoints(S,A)}catch{return-1}},E=e.document;if(ct(r.bookmark)&&!li(r)){const S=$f(r);if(S.isSome())return S.map(N=>Yf(r,[N])[0]).getOr(E.createRange())}try{const S=c();S&&!pc(S.anchorNode)&&(h=S.rangeCount>0?S.getRangeAt(0):E.createRange(),h=Yf(r,[h])[0])}catch{}if(h||(h=E.createRange()),$i(h.startContainer)&&h.collapsed){const S=t.getRoot();h.setStart(S,0),h.setEnd(S,0)}return o&&s&&(0===C(h.START_TO_START,h,o)&&0===C(h.END_TO_END,h,o)?h=s:(o=null,s=null)),h},f=(h,C)=>{if(!((S=h)&&XC(S.startContainer)&&XC(S.endContainer)))return;var S;const E=c();if(h=r.dispatch("SetSelectionRange",{range:h,forward:C}).range,E){s=h;try{E.removeAllRanges(),E.addRange(h)}catch{}!1===C&&E.extend&&(E.collapse(h.endContainer,h.endOffset),E.extend(h.startContainer,h.startOffset)),o=E.rangeCount>0?E.getRangeAt(0):null}if(!h.collapsed&&h.startContainer===h.endContainer&&E?.setBaseAndExtent&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()){const S=h.startContainer.childNodes[h.startOffset];S&&"IMG"===S.nodeName&&(E.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),E.anchorNode===h.startContainer&&E.focusNode===h.endContainer||E.setBaseAndExtent(S,0,S,1))}r.dispatch("AfterSetSelectionRange",{range:h,forward:C})},p=()=>{const h=c(),C=h?.anchorNode,E=h?.focusNode;if(!h||!C||!E||pc(C)||pc(E))return!0;const S=t.createRng(),N=t.createRng();try{S.setStart(C,h.anchorOffset),S.collapse(!0),N.setStart(E,h.focusOffset),N.collapse(!0)}catch{return!0}return S.compareBoundaryPoints(S.START_TO_START,N)<=0},b={dom:t,win:e,serializer:n,editor:r,expand:(h={type:"word"})=>f(va(t).expand(u(),h)),collapse:l,setCursorLocation:(h,C)=>{const E=t.createRng();ct(h)&&ct(C)?(E.setStart(h,C),E.setEnd(h,C),f(E),l(!1)):(Sf(t,E,r.getBody(),!0),f(E))},getContent:h=>((C,E={})=>{return N=E.format?E.format:"html",A=E,rn(C).selection.getContent(N,A);var N,A})(r,h),setContent:i,getBookmark:(h,C)=>g.getBookmark(h,C),moveToBookmark:h=>g.moveToBookmark(h),select:(h,C)=>{return(E=t,S=h,N=C,k.from(S).bind(A=>k.from(A.parentNode).map(R=>{const M=E.nodeIndex(A),P=E.createRng();return P.setStart(R,M),P.setEnd(R,M+1),N&&(Sf(E,P,A,!0),Sf(E,P,A,!1)),P}))).each(f),h;var E,S,N},isCollapsed:()=>{const h=u(),C=c();return!(!h||h.item)&&(h.compareEndPoints?0===h.compareEndPoints("StartToEnd",h):!C||h.collapsed)},isEditable:()=>{const h=u(),C=r.getBody().querySelectorAll('[data-mce-selected="1"]');return C.length>0?or(C,E=>t.isEditable(E.parentElement)):Jb(t,h)},isForward:p,setNode:h=>(i(t.getOuterHTML(h)),h),getNode:()=>((h,C)=>{if(!C)return h;let E=C.startContainer,S=C.endContainer;const N=C.startOffset,A=C.endOffset;let R=C.commonAncestorContainer;C.collapsed||(E===S&&A-N<2&&E.hasChildNodes()&&(R=E.childNodes[N]),ot(E)&&ot(S)&&(E=E.length===N?rv(E.nextSibling,!0):E.parentNode,S=0===A?rv(S.previousSibling,!1):S.parentNode,E&&E===S&&(R=E)));const M=ot(R)?R.parentNode:R;return ts(M)?M:h})(r.getBody(),u()),getSel:c,setRng:f,getRng:u,getStart:h=>ev(r.getBody(),u(),h),getEnd:h=>nv(r.getBody(),u(),h),getSelectedBlocks:(h,C)=>((E,S,N,A)=>{const R=[],M=E.getRoot(),P=E.getParent(N||ev(M,S,S.collapsed),E.isBlock),z=E.getParent(A||nv(M,S,S.collapsed),E.isBlock);if(P&&P!==M&&R.push(P),P&&z&&P!==z){let $;const B=new pn(P,M);for(;($=B.next())&&$!==z;)E.isBlock($)&&R.push($)}return z&&P!==z&&z!==M&&R.push(z),R})(t,u(),h,C),normalize:()=>{const h=u(),C=c();if(!(xf(C).length>1)&&zc(r)){const E=Kc(t,h);return E.each(S=>{f(S,p())}),E.getOr(h)}return h},selectorChanged:(h,C)=>(a(h,C),b),selectorChangedWithUnbind:a,getScrollContainer:()=>{let h,C=t.getRoot();for(;C&&"BODY"!==C.nodeName;){if(C.scrollHeight>C.clientHeight){h=C;break}C=C.parentNode}return h},scrollIntoView:(h,C)=>{var E;ct(h)?((E=r).inline?TN:ON)(E,h,C):Cl(r,u(),C)},placeCaretAt:(h,C)=>f(Bb(h,C,r.getDoc())),getBoundingClientRect:()=>{const h=u();return h.collapsed?Y.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:()=>{e=o=s=null,v.destroy()}},g=vl(b),v=Nb(b,r);return b.bookmarkManager=g,b.controlSelection=v,b},iT=(t,e,n)=>{-1===lt.inArray(e,n)&&(t.addAttributeFilter(n,(r,o)=>{let s=r.length;for(;s--;)r[s].attr(o,null)}),e.push(n))},GC=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},o=e&&e.dom?e.dom:Re.DOM,s=e&&e.schema?e.schema:ws(r),a=ui(r,s);return l=r,c=o,(i=a).addAttributeFilter("data-mce-tabindex",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];b.attr("tabindex",b.attr("data-mce-tabindex")),b.attr(f,null)}}),i.addAttributeFilter("src,href,style",(u,f)=>{const p="data-mce-"+f,b=l.url_converter,g=l.url_converter_scope;let v=u.length;for(;v--;){const h=u[v];let C=h.attr(p);void 0!==C?(h.attr(f,C.length>0?C:null),h.attr(p,null)):(C=h.attr(f),"style"===f?C=c.serializeStyle(c.parseStyle(C),h.name):b&&(C=b.call(g,C,f,h.name)),h.attr(f,C.length>0?C:null))}}),i.addAttributeFilter("class",u=>{let f=u.length;for(;f--;){const p=u[f];let b=p.attr("class");b&&(b=b.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),p.attr("class",b.length>0?b:null))}}),i.addAttributeFilter("data-mce-type",(u,f,p)=>{let b=u.length;for(;b--;){const g=u[b];"bookmark"===g.attr("data-mce-type")&&!p.cleanup&&(k.from(g.firstChild).exists(h=>{var C;return!Sc(null!==(C=h.value)&&void 0!==C?C:"")})?g.unwrap():g.remove())}}),i.addNodeFilter("script,style",(u,f)=>{var p;const b=v=>v.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=u.length;for(;g--;){const v=u[g],h=v.firstChild,C=null!==(p=h?.value)&&void 0!==p?p:"";if("script"===f){const E=v.attr("type");E&&v.attr("type","mce-no/type"===E?null:E.replace(/^mce\-/,"")),"xhtml"===l.element_format&&h&&C.length>0&&(h.value="// <![CDATA[\n"+b(C)+"\n// ]]>")}else"xhtml"===l.element_format&&h&&C.length>0&&(h.value="\x3c!--\n"+b(C)+"\n--\x3e")}}),i.addNodeFilter("#comment",u=>{let f=u.length;for(;f--;){const p=u[f],b=p.value;l.preserve_cdata&&0===b?.indexOf("[CDATA[")?(p.name="#cdata",p.type=4,p.value=c.decode(b.replace(/^\[CDATA\[|\]\]$/g,""))):0===b?.indexOf("mce:protected ")&&(p.name="#text",p.type=3,p.raw=!0,p.value=unescape(b).substr(14))}}),i.addNodeFilter("xml:namespace,input",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];7===b.type?b.remove():1===b.type&&("input"!==f||b.attr("type")||b.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",u=>{Z(u,f=>{"format-caret"===f.attr("data-mce-type")&&(f.isEmpty(i.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(u,f)=>{let p=u.length;for(;p--;)u[p].attr(f,null)}),l.remove_trailing_brs&&(u=l,p=i.schema,i.addNodeFilter("br",(b,g,v)=>{const h=lt.extend({},p.getBlockElements()),C=p.getNonEmptyElements(),E=p.getWhitespaceElements();h.body=1;const S=N=>N.name in h||Ru(p,N);for(let N=0,A=b.length;N<A;N++){let R=b[N],M=R.parent;if(M&&S(M)&&R===M.lastChild){let P=R.prev;for(;P;){const z=P.name;if("span"!==z||"bookmark"!==P.attr("data-mce-type")){"br"===z&&(R=null);break}P=P.prev}if(R&&(R.remove(),_l(p,C,E,M))){const z=p.getElementRule(M.name);z&&(z.removeEmpty?M.remove():z.paddEmpty&&hm(u,v,S,M))}}else{let P=R;for(;M&&M.firstChild===P&&M.lastChild===P&&(P=M,!h[M.name]);)M=M.parent;if(P===M){const z=new $n("#text",3);z.value=cn,R.replace(z)}}}})),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},u=(g=i,C=v=c,ct(h=b=e)&&h.hasEventListeners("PreProcess")&&!C.no_events?((h,C,E)=>{let S;const N=h.dom;let A=C.cloneNode(!0);const R=document.implementation;if(R.createHTMLDocument){const M=R.createHTMLDocument("");lt.each("BODY"===A.nodeName?A.childNodes:[A],P=>{M.body.appendChild(M.importNode(P,!0))}),A="BODY"!==A.nodeName?M.body.firstChild:M.body,S=N.doc,N.doc=M}return P={...E,node:A},h.dispatch("PreProcess",P),S&&(N.doc=S),A;var P})(b,g,v):g),f=((b,g,v)=>{const h=vr(v.getInner?g.innerHTML:b.getOuterHTML(g));return v.selection||Ec(D(g))?h:lt.trim(h)})(o,u,c),p=((b,g,v)=>{const h=v.selection?{forced_root_block:!1,...v}:v,C=b.parse(g,h);return(E=>{const S=A=>"br"===A?.name,N=E.lastChild;if(S(N)){const A=N.prev;S(A)&&(N.remove(),A.remove())}})(C),C})(a,f,c);var b,g,v,h,C;return"tree"===c.format?p:((b,g,v,h,C)=>{var A;return((S,N,A)=>{return!N.no_events&&S?(M=S,P={...N,content:A},M.dispatch("PostProcess",P)).content:A;var M,P})(b,C,(A=h,Ts(g,v).serialize(A)))})(e,r,s,p,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:Et(iT,a,n),getTempAttrs:mt(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var i,l,c,u,p})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},ep=(t,e,n={})=>{const r=(o=n,s=e,{format:"html",...o,set:!0,content:s});var o,s;return Km(t,r).map(o=>{const s=(i=o.content,l=o,tp(t).editor.setContent(i,l));var i,l;return Xm(t,s.html,o),s.content}).getOr(e)},cT="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),dT=[],uT="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),QC=[],ZC=(t,e)=>{const n=Vt(e,r=>Ut(t,r));return Wo(n)},JC=(t,e)=>{const n=lt.makeMap(t.plugins," "),r=Vt(e,o=>Ut(n,o));return Wo(r)},hT=t=>Ge(QC,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),bd=Re.DOM,vd=t=>k.from(t).each(e=>e.destroy()),yd=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>Ut(t,e)}})(),fi=qn.ModelManager,t1=(t,e)=>e.dom[t],e1=(t,e)=>parseInt(L(e,t),10),bT=Et(t1,"clientWidth"),vT=Et(t1,"clientHeight"),yT=Et(e1,"margin-top"),CT=Et(e1,"margin-left"),n1=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},r=()=>k.from(e[0]),o=()=>{r().each(l=>{l.reposition()})},s=l=>{js(e,c=>c===l).each(c=>{e.splice(c,1)})},a=(l,c=!0)=>{return t.removed||!(f=(u=t).inline?u.getBody():u.getContentAreaContainer(),k.from(f).map(D)).map(ao).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),Ge(e,u=>{return!((f=n().getArgs(u)).type!==(p=l).type||f.text!==p.text||f.progressBar||f.timeout||p.progressBar||p.timeout);var f,p}).getOrThunk(()=>{t.editorManager.setActive(t);const u=n().open(l,()=>{s(u)},()=>Zb(t));return(f=>{e.push(f)})(u),o(),t.dispatch("OpenNotification",{notification:{...u}}),u}));var u,f},i=mt(e);return(l=t).on("SkinLoaded",()=>{const c=n_(l);c&&a({text:c,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{Z(e.slice(),c=>{n().close(c)})}),l.addShortcut("alt+F12","Focus to notification",()=>r().map(c=>D(c.getEl())).each(c=>Wb(c))),{open:a,close:()=>{r().each(l=>{n().close(l),s(l),o()})},getNotifications:i};var l},mi=qn.PluginManager,Ea=qn.ThemeManager,r1=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},r=(a,i)=>(...l)=>i?i.apply(a,l):void 0,o=a=>{t.dispatch("CloseWindow",{dialog:a}),e=Vt(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),Gc(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{Z(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,o)),openUrl:a=>s(()=>n().openUrl(a,o)),alert:(a,i,l)=>{const c=n();c.alert(a,r(l||c,i))},confirm:(a,i,l)=>{const c=n();c.confirm(a,r(l||c,i))},close:()=>{k.from(e[e.length-1]).each(a=>{n().close(a),o(a)})}}},o1=(t,e)=>{t.notificationManager.open({type:"error",text:e})},Cd=(t,e)=>{t._skinLoaded?o1(t,e):t.on("SkinLoaded",()=>{o1(t,e)})},Bl=(t,e,n)=>{Cb(t,e,{message:n}),console.error(n)},Dl=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,xd=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},np=t=>"content/"+t+"/content.css",s1=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",r=`content${t.editorManager.suffix}.css`;return re(e,o=>tinymce.Resource.has(np(o))?o:/^[a-z0-9\-]+$/i.test(o)&&!t.inline?`${n}/${o}/${r}`:t.documentBaseURI.toAbsolute(o))},a1=()=>{let t={};const e=(r,o)=>({status:r,resultUri:o}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{const o=t[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:r=>{t[r]=e(1,null)},markUploaded:(r,o)=>{t[r]=e(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}};let wT=0;const i1=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),l1=(t,e)=>((t,e)=>{const n={},r=(l,c)=>new Promise((u,f)=>{const p=new XMLHttpRequest;p.open("POST",e.url),p.withCredentials=e.credentials,p.upload.onprogress=g=>{c(g.loaded/g.total*100)},p.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+p.status)},p.onload=()=>{if(p.status<200||p.status>=300)return void f("HTTP Error: "+p.status);const g=JSON.parse(p.responseText);var v,h;g&&Rt(g.location)?u((h=g.location,(v=e.basePath)?v.replace(/\/$/,"")+"/"+h.replace(/^\//,""):h)):f("Invalid JSON: "+p.responseText)};const b=new FormData;b.append("file",l.blob(),l.filename()),p.send(b)}),o=be(e.handler)?e.handler:r,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{lt.each(n[l],u=>{u(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||o!==r?(f=c,u=lt.grep(u=l,p=>!t.isUploaded(p.blobUri())),Promise.all(lt.map(u,p=>{return t.isPending(p.blobUri())?(b=>{const g=b.blobUri();return new Promise(v=>{n[g]=n[g]||[],n[g].push(v)})})(p):(g=o,v=f,t.markPending((b=p).blobUri()),new Promise(h=>{let C,E;try{const S=()=>{C&&(C.close(),E=_t)},N=R=>{S(),t.markUploaded(b.blobUri(),R),i(b.blobUri(),s(b,R)),h(s(b,R))},A=R=>{S(),t.removeFailed(b.blobUri()),i(b.blobUri(),a(b,R)),h(a(b,R))};E=R=>{R<0||R>100||k.from(C).orThunk(()=>k.from(v).map(Co)).each(M=>{C=M,M.progressBar.value(R)})},g(b,E).then(N,R=>{A(Rt(R)?{message:R}:R)})}catch(S){h(a(b,S))}}));var b,g,v}))):new Promise(u=>{u([])});var u,f}}})(e,{url:qk(t),basePath:$k(t),credentials:Wk(t),handler:Vk(t)}),c1={remove_similar:!0,inherit:!1},pi={selector:"td,th",...c1},kT={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...pi},tablecellverticalalign:{styles:{"vertical-align":"%value"},...pi},tablecellbordercolor:{styles:{borderColor:"%value"},...pi},tablecellclass:{classes:["%value"],...pi},tableclass:{selector:"table",classes:["%value"],...c1},tablecellborderstyle:{styles:{borderStyle:"%value"},...pi},tablecellborderwidth:{styles:{borderWidth:"%value"},...pi}},_T=mt(kT),wd=lt.each,Fr=Re.DOM,rp=t=>ct(t)&&Kt(t),d1=(t,e)=>{const n=e&&e.schema||ws({}),r=a=>{const i=Rt(a)?{name:a,classes:[],attrs:{}}:a,l=Fr.create(i.name);return c=l,(u=i).classes.length>0&&Fr.addClass(c,u.classes.join(" ")),Fr.setAttribs(c,u.attrs),l;var c,u},o=(a,i,l)=>{let c;const u=i[0],f=rp(u)?u.name:void 0,p=((v,h)=>{const C=n.getElementRule(v.nodeName.toLowerCase()),E=C?.parentsRequired;return!(!E||!E.length)&&(h&&Ot(E,h)?h:E[0])})(a,f);if(p)f===p?(c=u,i=i.slice(1)):c=p;else if(u)c=u,i=i.slice(1);else if(!l)return a;const b=c?r(c):Fr.create("div");b.appendChild(a),l&&lt.each(l,v=>{const h=r(v);b.insertBefore(h,a)});const g=rp(c)?c.siblings:void 0;return o(b,i,g)},s=Fr.create("div");if(t.length>0){const a=t[0],i=r(a),l=rp(a)?a.siblings:void 0;s.appendChild(o(i,t.slice(1),l))}return s},NT=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=lt.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,s,a,i)=>{switch(o){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==lt.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},AT=(t,e)=>{let n="",r=a_(t);if(""===r)return"";const o=b=>Rt(b)?b.replace(/%(\w+)/g,""):"",s=(b,g)=>Fr.getStyle(g??t.getBody(),b,!0);if(Rt(e)){const b=t.formatter.get(e);if(!b)return"";e=b[0]}if("preview"in e){const b=e.preview;if(!1===b)return"";r=b||r}let a,i=e.block||e.inline||"span";const l=Rt(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),lt.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),b=>{const g=lt.map(b.split(/(?:~\+|~|\+)/),NT),v=g.pop();return g.length&&(v.siblings=g),v}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=d1(l,t)):a=d1([i],t);const u=Fr.select(i,a)[0]||a.firstChild;wd(e.styles,(b,g)=>{const v=o(b);v&&Fr.setStyle(u,g,v)}),wd(e.attributes,(b,g)=>{const v=o(b);v&&Fr.setAttrib(u,g,v)}),wd(e.classes,b=>{const g=o(b);Fr.hasClass(u,g)||Fr.addClass(u,g)}),t.dispatch("PreviewFormats"),Fr.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const f=s("fontSize"),p=/px$/.test(f)?parseInt(f,10):0;return wd(r.split(" "),b=>{let g=s(b,u);if(!("background-color"===b&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(b),"#ffffff"===Vi(g).toLowerCase())||"color"===b&&"#000000"===Vi(g).toLowerCase())){if("font-size"===b&&/em|%$/.test(g)){if(0===p)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*p+"px"}"border"===b&&g&&(n+="padding:0 2px;"),n+=b+":"+g+";"}}),t.dispatch("AfterPreviewFormats"),Fr.remove(a),n},u1=t=>{const e=(r=>{const o={},s=(a,i)=>{a&&(Rt(a)?(it(i)||(i=[i]),Z(i,l=>{Me(l.deep)&&(l.deep=!Pr(l)),Me(l.split)&&(l.split=!Pr(l)||dn(l)),Me(l.remove)&&Pr(l)&&!dn(l)&&(l.remove="none"),Pr(l)&&dn(l)&&(l.mixed=!0,l.block_expand=!0),Rt(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[a]=i):xe(a,(l,c)=>{s(c,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},p={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[p,u,f]:[u,p,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,p)=>Nt(u)&&u.hasAttribute("href"),onformat:(u,f,p)=>{lt.each(p,(b,g)=>{i.setAttrib(u,g,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return null!==(f=u?.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return lt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{c[u]={block:u,remove:"all"}}),c})(r)),s(_T()),s(s_(r)),{get:a=>ct(a)?o[a]:o,has:a=>Ut(o,a),register:s,unregister:a=>(a&&o[a]&&delete o[a],o)}})(t),n=gn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(r=t).on("mouseup keydown",o=>{var s;((a,i,l)=>{const c=a.selection,u=a.getBody();Rm(a,null,l),8!==i&&46!==i||!c.isCollapsed()||c.getStart().innerHTML!==Nl||Rm(a,pa(u,c.getStart()),!0),37!==i&&39!==i||Rm(a,pa(u,c.getStart()),!0)})(r,o.keyCode,(s=r.selection.getRng().endContainer,ot(s)&&$s(s.data,cn)))}),jo(t)||((r,o)=>{r.set({}),o.on("NodeChange",s=>{tC(o,s.element,r.get())}),o.on("FormatApply FormatRemove",s=>{const a=k.from(s.node).map(i=>hl(i)?i:i.startContainer).bind(i=>Nt(i)?k.some(i):k.from(i.parentElement)).getOrThunk(()=>Qy(o));tC(o,a,r.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,rn(t).formatter.apply(i,l,c)},remove:(r,o,s,a)=>{var l,c,u,f;l=r,c=o,u=s,f=a,rn(t).formatter.remove(l,c,u,f)},toggle:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,rn(t).formatter.toggle(i,l,c)},match:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,rn(t).formatter.match(l,c,u,f);var l,c,u,f},closest:r=>{return s=r,rn(t).formatter.closest(s);var s},matchAll:(r,o)=>{return a=r,i=o,rn(t).formatter.matchAll(a,i);var a,i},matchNode:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,rn(t).formatter.matchNode(l,c,u,f);var l,c,u,f},canApply:r=>{return s=r,rn(t).formatter.canApply(s);var s},formatChanged:(r,o,s,a)=>{return l=n,c=r,u=o,f=s,p=a,rn(t).formatter.formatChanged(l,c,u,f,p);var l,c,u,f,p},getCssText:Et(AT,t)};var r},f1=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},m1=t=>{const e=ns(),n=gn(0),r=gn(0),o={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,rn(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=o,c=r,u=n,f=e,p=s,b=a,rn(t).undoManager.add(l,c,u,f,p,b);var l,c,u,f,p,b},dispatchChange:()=>{t.setDirty(!0);const s=gd(t);s.bookmark=of(t.selection),t.dispatch("change",{level:s,lastLevel:zs(o.data,r.get()).getOrUndefined()})},undo:()=>{return a=o,i=n,l=r,rn(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=r,i=o.data,rn(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=o,i=r,rn(t).undoManager.clear(a,i)},reset:()=>{var a;a=o,rn(t).undoManager.reset(a)},hasUndo:()=>{return a=o,i=r,rn(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=o,i=r,rn(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=o,l=n,c=s,rn(t).undoManager.transact(i,l,c);var i,l,c},ignore:s=>{var i,l;i=n,l=s,rn(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,c,u,f;l=o,c=r,u=s,f=a,rn(t).undoManager.extra(l,c,u,f)}};return jo(t)||((s,a,i)=>{const l=gn(!1),c=u=>{hd(a,!1,i),a.add({},u)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",u=>{f1(u.command)||(HC(a,i),a.beforeChange())}),s.on("ExecCommand",u=>{f1(u.command)||c(u)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",u=>{const f=u.keyCode;if(u.isDefaultPrevented())return;const p=ge.os.isMacOS()&&"Meta"===u.key;(f>=33&&f<=36||f>=37&&f<=40||45===f||u.ctrlKey||p)&&(c(),s.nodeChanged()),46!==f&&8!==f||s.nodeChanged(),l.get()&&a.typing&&!Zm(gd(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",u=>{const f=u.keyCode;if(!u.isDefaultPrevented()){if(!(f>=33&&f<=36||f>=37&&f<=40||45===f))return!(f<16||f>20)||224===f||91===f||a.typing||u.ctrlKey&&!u.altKey||u.metaKey?void((ge.os.isMacOS()?u.metaKey:u.ctrlKey&&!u.altKey)&&a.beforeChange()):(a.beforeChange(),hd(a,!0,i),a.add({},u),void l.set(!0));a.typing&&c(u)}}),s.on("mousedown",u=>{a.typing&&c(u)}),s.on("input",u=>{var f,p;u.inputType&&("insertReplacementText"===u.inputType||"insertText"===(f=u).inputType&&null===f.data||"insertFromPaste"===(p=u).inputType||"insertFromDrop"===p.inputType)&&c(u)}),s.on("AddUndo Undo Redo ClearUndos",u=>{u.isDefaultPrevented()||s.nodeChanged()})})(t,o,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),o;var s},TT=[9,27,vt.HOME,vt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,vt.DOWN,vt.UP,vt.LEFT,vt.RIGHT].concat(ge.browser.isFirefox()?[224]:[]),p1="data-mce-placeholder",g1=t=>"keydown"===t.type||"keyup"===t.type,h1=t=>{const e=t.keyCode;return e===vt.BACKSPACE||e===vt.DELETE},RT=(t,e)=>({from:t,to:e}),op=(t,e)=>{const n=D(t),r=D(e.container());return od(n,r).map(o=>((s,a)=>({block:s,position:a}))(o,e))},b1=(t,e)=>Zn(e,n=>nl(n)||Kr(n.dom),n=>zt(n,t)).filter(Hn).getOr(t),v1=(t,e)=>{const n=((r,o)=>{const s=Ee(r);return js(s,a=>o.isBlock(me(a))).fold(mt(s),a=>s.slice(0,a))})(t,e);return Z(n,Gt),n},y1=(t,e,n)=>{const r=ss(n,e);return Ge(r.reverse(),o=>In(t,o)).each(Gt)},OT=(t,e,n,r,o)=>{if(In(r,n))return Es(n),jn(n.dom);var a;a=r,0===Vt(Qo(o),l=>!In(a,l)).length&&In(r,e)&&Bt(o,Mt("br"));const s=dr(n.dom,Y.before(o.dom));return Z(v1(e,r),a=>{Bt(o,a)}),y1(r,t,e),s},BT=(t,e,n,r)=>{if(In(r,n)){if(In(r,e)){const a=$o((i=>{const l=(c,u)=>_n(c).fold(()=>u,f=>r.isInline(me(f))?l(f,u.concat(ia(f))):u);return l(i,[])})(n),(i,l)=>(Ae(i,l),l),Xa());fe(e),St(e,a)}return Gt(n),jn(e.dom)}const o=Xr(n.dom);return Z(v1(e,r),s=>{St(n,s)}),y1(r,t,e),o},C1=(t,e)=>{ni(t,e.dom).bind(n=>k.from(n.getNode())).map(D).filter(ca).each(Gt)},x1=(t,e,n,r)=>{return C1(!0,e),C1(!1,n),(o=e,s=n,kn(s,o)?((a,i)=>{const l=ss(i,a);return k.from(l[l.length-1])})(s,o):k.none()).fold(Et(BT,t,e,n,r),Et(OT,t,e,n,r));var o,s},w1=(t,e,n,r,o)=>e?x1(t,r,n,o):x1(t,n,r,o),sp=(t,e)=>{const n=D(t.getBody());return(o=t.schema,s=n.dom,a=e,i=t.selection.getRng(),i.collapsed?((l,c,u,f)=>{const p=op(c,Y.fromRangeStart(f)),b=p.bind(g=>Or(u,c,g.position).bind(v=>op(c,v).map(h=>{return C=l,E=c,S=u,He((N=h).position.getNode())&&!In(C,N.block)?ni(!1,N.block.dom).bind(A=>A.isEqual(N.position)?Or(S,E,A).bind(R=>op(E,R)):k.some(N)).getOr(N):N;var C,E,S,N})));return xn(p,b,RT).filter(g=>{return!zt((v=g).from.block,v.to.block)&&((v,h)=>{const C=D(v);return zt(b1(C,h.from.block),b1(C,h.to.block))})(c,g)&&(v=>!1===Pe(v.from.block.dom)&&!1===Pe(v.to.block.dom))(g)&&(v=>{const h=C=>kh(C)||Nu(C.dom)||Ka(C);return h(v.from.block)&&h(v.to.block)})(g)&&(v=>!(kn(v.to.block,v.from.block)||kn(v.from.block,v.to.block)))(g);var v})})(o,s,a,i):k.none()).map(o=>()=>{w1(n,e,o.from.block,o.to.block,t.schema).each(s=>{t.selection.setRng(s.toRange())})});var o,s,a,i},E1=(t,e)=>{const n=D(e),r=Et(zt,t);return Tr(n,nl,r).isSome()},ap=(t,e)=>t.selection.isCollapsed()?k.none():(t=>{const e=D(t.getBody());return((n,r)=>{const o=dr(n.dom,Y.fromRangeStart(r)).isNone(),s=er(n.dom,Y.fromRangeEnd(r)).isNone();return!(E1(a=n,(i=r).startContainer)||E1(a,i.endContainer))&&o&&s;var a,i})(e,t.selection.getRng())?(n=t,k.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r,o)=>{const s=r.getRng();return xn(od(n,D(s.startContainer)),od(n,D(s.endContainer)),(a,i)=>zt(a,i)?k.none():k.some(()=>{s.deleteContents(),w1(n,!0,a,i,o).each(l=>{r.setRng(l.toRange())})})).getOr(k.none())})(e,t.selection,t.schema);var n})(t),as=(t,e,n,r,o)=>k.from(e._selectionOverrides.showCaret(t,n,r,o)),Pl=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?k.none():k.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(e)),ip=(t,e,n)=>e.collapsed?((r,o,s)=>{const a=pf(1,r.getBody(),o),i=Y.fromRangeStart(a),l=i.getNode();if(cl(l))return as(1,r,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(cl(c))return as(1,r,c,!1,!1);const u=xa(r.dom.getRoot(),i.getNode());return cl(u)?as(1,r,u,!1,s):k.none()})(t,e,n).getOr(e):e,PT=t=>Os(t)||xl(t),LT=t=>Bs(t)||wl(t),S1=(t,e,n,r,o,s)=>{var a,i;as(r,t,s.getNode(!o),o,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();o?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,ot(i=n)&&0===i.data.length&&a.remove(i)},lp=(t,e)=>((n,r)=>{const o=n.selection.getRng();if(!ot(o.commonAncestorContainer))return k.none();const s=r?bn.Forwards:bn.Backwards,a=Mo(n.getBody()),i=Et(gf,r?a.next:a.prev),l=r?PT:LT,c=pl(s,n.getBody(),o),u=i(c),f=u&&Mr(r,u);if(!f||!Mc(c,f))return k.none();if(l(f))return k.some(()=>S1(n,o,c.getNode(),s,r,f));const p=i(f);return p&&l(p)&&Mc(f,p)?k.some(()=>S1(n,o,c.getNode(),s,r,p)):k.none()})(t,e),cp=(t,e)=>{const n=t.getBody();return e?jn(n).filter(Os):Xr(n).filter(Bs)},dp=t=>{const e=t.selection.getRng();return!e.collapsed&&(cp(t,!0).exists(n=>n.isEqual(Y.fromRangeStart(e)))||cp(t,!1).exists(n=>n.isEqual(Y.fromRangeEnd(e))))},jr=Do([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),k1=(t,e,n,r)=>Or(e,t,n).bind(o=>{return s=o.getNode(),ct(s)&&(nl(D(s))||Ka(D(s)))||((a,i,l,c,u)=>{const f=p=>u.isInline(p.nodeName.toLowerCase())&&!Po(l,c,a);return I0(!i,l).fold(()=>I0(i,c).fold(Ce,f),f)})(t,e,n,o,r)?k.none():e&&Pe(o.getNode())||!e&&Pe(o.getNode(!0))?((a,i,l,c,u)=>{const f=u.getNode(!l);return od(D(i),D(c.getNode())).map(p=>In(a,p)?jr.remove(p.dom):jr.moveToElement(f)).orThunk(()=>k.some(jr.moveToElement(f)))})(r,t,e,n,o):e&&Bs(n)||!e&&Os(n)?k.some(jr.moveToPosition(o)):k.none();var s}),_1=(t,e)=>k.from(xa(t.getBody(),e)),N1=t=>{const e=t.dom,n=t.selection,r=xa(t.getBody(),n.getNode());if(Kr(r)&&e.isBlock(r)&&e.isEmpty(r)){const o=e.create("br",{"data-mce-bogus":"1"});e.setHTML(r,""),r.appendChild(o),n.setRng(Y.before(o).toRange())}return!0},up=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return _1(t,n).filter(Pe).fold(()=>((r,o,s,a)=>{const i=pf(o?1:-1,r,s),l=Y.fromRangeStart(i),c=D(r);return!o&&Bs(l)?k.some(jr.remove(l.getNode(!0))):o&&Os(l)?k.some(jr.remove(l.getNode())):!o&&Os(l)&&ed(c,l,a)?Av(c,l,a).map(u=>jr.remove(u.getNode())):o&&Bs(l)&&em(c,l,a)?JN(c,l,a).map(u=>jr.remove(u.getNode())):(u=r,b=a,((g,v)=>{const h=v.getNode(!g),C=g?"after":"before";return Nt(h)&&h.getAttribute("data-mce-caret")===C})(f=o,p=l)?(g=f,v=p.getNode(!f),we(v)?k.none():g&&Pe(v.nextSibling)?k.some(jr.moveToElement(v.nextSibling)):!g&&Pe(v.previousSibling)?k.some(jr.moveToElement(v.previousSibling)):k.none()).orThunk(()=>k1(u,f,p,b)):k1(u,f,p,b).bind(g=>((v,h,C)=>C.fold(E=>k.some(jr.remove(E)),E=>k.some(jr.moveToElement(E)),E=>Po(h,E,v)?k.none():k.some(jr.moveToPosition(E))))(u,p,g)));var u,f,p,b,g,v})(t.getBody(),e,t.selection.getRng(),t.schema).map(r=>()=>r.fold(((o,s)=>a=>(o._selectionOverrides.hideFakeCaret(),ya(o,s,D(a)),!0))(t,e),((o,s)=>a=>{const i=s?Y.before(a):Y.after(a);return o.selection.setRng(i.toRange()),!0})(t,e),(o=>s=>(o.selection.setRng(s.toRange()),!0))(t))),()=>k.some(_t))})(t,e):((n,r)=>{const o=n.selection.getNode();return Pe(o)&&!hc(o)?_1(n,o.parentNode).filter(Pe).fold(()=>k.some(()=>{var s;s=D(n.getBody()),Z(Mn(s,".mce-offscreen-selection"),Gt),ya(n,r,D(n.selection.getNode())),am(n)}),()=>k.some(_t)):dp(n)?k.some(()=>{Gv(n,n.selection.getRng(),D(n.getBody()))}):k.none()})(t,e),A1=t=>t.hasOwnProperty("text"),T1=t=>t.hasOwnProperty("marker"),R1=(t,e)=>{const n=(o,s)=>{if(ot(o))return{text:o,offset:s};{const a=e(),i=o.childNodes;return s<i.length?(o.insertBefore(a,i[s]),{marker:a,before:!0}):(o.appendChild(a),{marker:a,before:!1})}},r=n(t.endContainer,t.endOffset);return{start:n(t.startContainer,t.startOffset),end:r}},O1=t=>{var e,n;const{start:r,end:o}=t,s=new window.Range;return A1(r)?s.setStart(r.text,r.offset):T1(r)&&(r.before?s.setStartBefore(r.marker):s.setStartAfter(r.marker),null===(e=r.marker.parentNode)||void 0===e||e.removeChild(r.marker)),A1(o)?s.setEnd(o.text,o.offset):T1(o)&&(o.before?s.setEndBefore(o.marker):s.setEndAfter(o.marker),null===(n=o.marker.parentNode)||void 0===n||n.removeChild(o.marker)),s},fp=(t,e)=>{var n;const r=t.dom,o=r.getParent(t.selection.getStart(),r.isBlock),s=r.getParent(t.selection.getEnd(),r.isBlock),a=t.getBody();if("div"===(null===(n=o?.nodeName)||void 0===n?void 0:n.toLowerCase())&&o&&s&&o===a.firstChild&&s===a.lastChild&&!r.isEmpty(a)){const i=o.cloneNode(!1);return k.some(()=>{if(e?Kv(t):rd(t),a.firstChild!==o){const c=R1(t.selection.getRng(),()=>document.createElement("span"));Array.from(a.childNodes).forEach(u=>i.appendChild(u)),a.appendChild(i),t.selection.setRng(O1(c))}})}return k.none()},mp=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=Y.fromRangeStart(n.selection.getRng());return Or(r,n.getBody(),o).filter(s=>r?XN(s):YN(s)).bind(s=>mf(r?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):k.none(),gi=ot,B1=t=>gi(t)&&t.data[0]===hn,D1=t=>gi(t)&&t.data[t.data.length-1]===hn,P1=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(hn)},Ed=(t,e)=>t?(n=>{var r;if(gi(n.previousSibling))return D1(n.previousSibling)||n.previousSibling.appendData(hn),n.previousSibling;if(gi(n))return B1(n)||n.insertData(0,hn),n;{const o=P1(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(e):(n=>{var r,o;if(gi(n.nextSibling))return B1(n.nextSibling)||n.nextSibling.insertData(0,hn),n.nextSibling;if(gi(n))return D1(n)||n.appendData(hn),n;{const s=P1(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(s,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(s),s}})(e),IT=Et(Ed,!0),FT=Et(Ed,!1),L1=(t,e)=>ot(t.container())?Ed(e,t.container()):Ed(e,t.getNode()),M1=(t,e)=>{const n=e.get();return n&&t.container()===n&&Ss(n)},pp=(t,e)=>e.fold(n=>{fa(t.get());const r=IT(n);return t.set(r),k.some(Y(r,r.length-1))},n=>jn(n).map(r=>{if(M1(r,t)){const o=t.get();return Y(o,1)}{fa(t.get());const o=L1(r,!0);return t.set(o),Y(o,1)}}),n=>Xr(n).map(r=>{if(M1(r,t)){const o=t.get();return Y(o,o.length-1)}{fa(t.get());const o=L1(r,!1);return t.set(o),Y(o,o.length-1)}}),n=>{fa(t.get());const r=FT(n);return t.set(r),k.some(Y(r,1))}),I1=(t,e)=>{for(let n=0;n<t.length;n++){const r=t[n].apply(null,e);if(r.isSome())return r}return k.none()},Wn=Do([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),F1=(t,e)=>Ns(e,t)||t,jT=(t,e,n)=>{const r=$v(n),o=F1(e,r.container());return Ds(t,o,r).fold(()=>er(o,r).bind(Et(Ds,t,o)).map(s=>Wn.before(s)),k.none)},zT=(t,e)=>null===pa(t,e),j1=(t,e,n)=>Ds(t,e,n).filter(Et(zT,e)),UT=(t,e,n)=>{const r=Wv(n);return j1(t,e,r).bind(o=>dr(o,r).isNone()?k.some(Wn.start(o)):k.none())},HT=(t,e,n)=>{const r=$v(n);return j1(t,e,r).bind(o=>er(o,r).isNone()?k.some(Wn.end(o)):k.none())},qT=(t,e,n)=>{const r=Wv(n),o=F1(e,r.container());return Ds(t,o,r).fold(()=>dr(o,r).bind(Et(Ds,t,o)).map(s=>Wn.after(s)),k.none)},z1=t=>!qv(gp(t)),zo=(t,e,n)=>I1([jT,UT,HT,qT],[t,e,n]).filter(z1),gp=t=>t.fold(pe,pe,pe,pe),U1=t=>t.fold(mt("before"),mt("start"),mt("end"),mt("after")),Sd=t=>t.fold(Wn.before,Wn.before,Wn.after,Wn.after),hp=t=>t.fold(Wn.start,Wn.start,Wn.end,Wn.end),$T=(t,e,n,r,o,s)=>xn(Ds(e,n,r),Ds(e,n,o),(a,i)=>a!==i&&((l,c,u)=>{const f=Ns(c,l),p=Ns(u,l);return ct(f)&&f===p})(n,a,i)?Wn.after(t?a:i):s).getOr(s),WT=(t,e)=>t.fold(je,n=>{return o=e,!(U1(r=n)===U1(o)&&gp(r)===gp(o));var r,o}),VT=(t,e)=>t?e.fold(Bn(k.some,Wn.start),k.none,Bn(k.some,Wn.after),k.none):e.fold(k.none,Bn(k.some,Wn.before),k.none,Bn(k.some,Wn.end)),H1=(t,e,n)=>{const r=t?1:-1;return e.setRng(Y(n.container(),n.offset()+r).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Uo;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Uo||(Uo={}));const kd=(t,e)=>t===bn.Backwards?to(e):e,KT=(t,e,n)=>t===bn.Forwards?e.next(n):e.prev(n),XT=(t,e,n,r)=>He(r.getNode(e===bn.Forwards))?Uo.Br:!1===Po(n,r)?Uo.Block:Uo.Wrap,q1=(t,e,n,r)=>{const o=Mo(n);let s=r;const a=[];for(;s;){const i=KT(e,o,s);if(!i)break;if(He(i.getNode(!1)))return e===bn.Forwards?{positions:kd(e,a).concat([i]),breakType:Uo.Br,breakAt:k.some(i)}:{positions:kd(e,a),breakType:Uo.Br,breakAt:k.some(i)};if(i.isVisible()){if(t(s,i)){const l=XT(0,e,s,i);return{positions:kd(e,a),breakType:l,breakAt:k.some(i)}}a.push(i),s=i}else s=i}return{positions:kd(e,a),breakType:Uo.Eol,breakAt:k.none()}},$1=(t,e,n,r)=>e(n,r).breakAt.map(o=>{const s=e(n,o).positions;return t===bn.Backwards?s.concat(o):[o].concat(s)}).getOr([]),bp=(t,e)=>yn(t,(n,r)=>n.fold(()=>k.some(r),o=>xn(Sn(o.getClientRects()),Sn(r.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?r:o}).or(n)),k.none()),_d=(t,e)=>Sn(e.getClientRects()).bind(n=>bp(t,n.left)),Ll=Et(q1,Y.isAbove,-1),Ml=Et(q1,Y.isBelow,1),W1=Et($1,-1,Ll),V1=Et($1,1,Ml),K1=(t,e)=>Ll(t,e).breakAt.isNone(),X1=(t,e)=>Ml(t,e).breakAt.isNone(),YT=(t,e)=>_d(W1(t,e),e),GT=(t,e)=>_d(V1(t,e),e),QT=Pe,Y1=(t,e)=>Math.abs(t.left-e),G1=(t,e)=>Math.abs(t.right-e),Q1=(t,e)=>us(t,(n,r)=>{const o=Math.min(Y1(n,e),G1(n,e)),s=Math.min(Y1(r,e),G1(r,e));return s===o&&un(r,"node")&&QT(r.node)||s<o?r:n}),ZT=t=>{const e=n=>re(n,r=>{const o=da(r);return o.node=t,o});if(Nt(t))return e(t.getClientRects());if(ot(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},Z1=t=>Qe(t,ZT);var Il;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Il||(Il={}));const J1=(t,e,n,r,o,s)=>{let a=0;const i=[],l=f=>{let p=Z1([f]);-1===t&&(p=p.reverse());for(let b=0;b<p.length;b++){const g=p[b];if(!n(g,c)){if(i.length>0&&e(g,Vo(i))&&a++,g.line=a,o(g))return!0;i.push(g)}}return!1},c=Vo(s.getClientRects());if(!c)return i;const u=s.getNode();return u&&(l(u),((f,p,b,g)=>{let v=g;for(;v=ul(v,f,Ph,p);)if(b(v))return})(t,r,l,u)),i},JT=Et(J1,Il.Up,rl,ol),tR=Et(J1,Il.Down,ol,rl),tx=t=>Vo(t.getClientRects()),ex=t=>e=>e.line>t,vp=t=>e=>e.line===t,is=(t,e)=>{t.selection.setRng(e),Cl(t,t.selection.getRng())},yp=(t,e,n)=>k.some(ip(t,e,n)),nx=(t,e,n,r,o,s)=>{const a=e===bn.Forwards,i=Mo(t.getBody()),l=Et(gf,a?i.next:i.prev),c=a?r:o;if(!n.collapsed){const g=Nc(n);if(s(g))return as(e,t,g,e===bn.Backwards,!1);if(dp(t)){const v=n.cloneRange();return v.collapse(e===bn.Backwards),k.from(v)}}const u=pl(e,t.getBody(),n);if(c(u))return Pl(t,u.getNode(!a));let f=l(u);const p=Nh(n);if(!f)return p?k.some(n):k.none();if(f=Mr(a,f),c(f))return as(e,t,f.getNode(!a),a,!1);const b=l(f);return b&&c(b)&&Mc(f,b)?as(e,t,b.getNode(!a),a,!1):p?yp(t,f.toRange(),!1):k.none()},rx=(t,e,n,r,o,s)=>{const a=pl(e,t.getBody(),n),i=Vo(a.getClientRects()),l=e===Il.Down,c=t.getBody();if(!i)return k.none();if(dp(t)){const v=l?Y.fromRangeEnd(n):Y.fromRangeStart(n);return(l?GT:YT)(c,v).orThunk(()=>k.from(v)).map(h=>h.toRange())}const u=(l?tR:JT)(c,ex(1),a),f=Vt(u,vp(1)),p=i.left,b=Q1(f,p);if(b&&s(b.node)){const v=Math.abs(p-b.left),h=Math.abs(p-b.right);return as(e,t,b.node,v<h,!1)}let g;if(g=r(a)?a.getNode():o(a)?a.getNode(!0):Nc(n),g){const v=((C,E,S,N)=>{const A=Mo(E);let R,M,P,z;const $=[];let B=0;1===C?(R=A.next,M=ol,P=rl,z=Y.after(N)):(R=A.prev,M=rl,P=ol,z=Y.before(N));const I=tx(z);do{if(!z.isVisible())continue;const j=tx(z);if(P(j,I))continue;$.length>0&&M(j,Vo($))&&B++;const G=da(j);if(G.position=z,G.line=B,S(G))return $;$.push(G)}while(z=R(z));return $})(e,c,ex(1),g);let h=Q1(Vt(v,vp(1)),p);if(h||(h=Vo(Vt(v,vp(0))),h))return yp(t,h.position.toRange(),!1)}return 0===f.length?Cp(t,l).filter(l?o:r).map(v=>ip(t,v.toRange(),!1)):k.none()},Cp=(t,e)=>{const n=t.selection.getRng(),r=e?Y.fromRangeEnd(n):Y.fromRangeStart(n),o=(s=r.container(),a=t.getBody(),Tr(D(s),i=>rN(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=Ml(o,r);return eo(i.positions)}{const i=Ll(o,r);return Sn(i.positions)}},ox=(t,e,n)=>Cp(t,e).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),Nd=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},sx=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},ax=(t,e,n)=>pp(e,n).map(r=>(Nd(t,r),n)),ix=(t,e,n)=>!!ll(t)&&((t,e,n)=>{const r=t.getBody(),o=((s,a,i)=>{const l=Y.fromRangeStart(s);if(s.collapsed)return l;{const c=Y.fromRangeEnd(s);return i?dr(a,c).getOr(c):er(a,l).getOr(l)}})(t.selection.getRng(),r,n);return((s,a,i,l)=>{const c=Mr(s,l),u=zo(a,i,c);return zo(a,i,c).bind(Et(VT,s)).orThunk(()=>((f,p,b,g,v)=>{const h=Mr(f,v);return Or(f,b,h).map(Et(Mr,f)).fold(()=>g.map(Sd),C=>zo(p,b,C).map(Et($T,f,p,b,h,C)).filter(Et(WT,g))).filter(z1)})(s,a,i,u,l))})(n,Et(Ca,t),r,o).bind(s=>ax(t,e,s))})(t,e,n).isSome(),lx=(t,e,n)=>!!ll(e)&&((r,o)=>{const s=o.selection.getRng(),a=r?Y.fromRangeEnd(s):Y.fromRangeStart(s);return!!be(o.selection.getSel().modify)&&(r&&Ku(a)?H1(!0,o.selection,a):!(r||!Xu(a))&&H1(!1,o.selection,a))})(t,e),rR=Et(lx,!0),oR=Et(lx,!1),Ad=(t,e,n)=>{if(ll(t)){const r=Cp(t,e).getOrThunk(()=>{const o=t.selection.getRng();return e?Y.fromRangeEnd(o):Y.fromRangeStart(o)});return zo(Et(Ca,t),t.getBody(),r).exists(o=>{const s=Sd(o);return pp(n,s).exists(a=>(Nd(t,a),!0))})}return!1},cx=(t,e)=>n=>pp(e,n).map(r=>()=>Nd(t,r)),dx=(t,e,n,r)=>{const o=t.getBody(),s=Et(Ca,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,r)),rd(t),zo(s,o,Y.fromRangeStart(t.selection.getRng())).map(hp).bind(cx(t,e)).each(Xn)}),t.nodeChanged()},xp=(t,e,n)=>{if(t.selection.isCollapsed()&&ll(t)){const r=Y.fromRangeStart(t.selection.getRng());return((o,s,a,i)=>{const l=(f=o.getBody(),p=i.container(),Ns(p,f)||f),c=Et(Ca,o),u=zo(c,l,i);var f,p;return u.bind(f=>a?f.fold(mt(k.some(hp(f))),k.none,mt(k.some(Sd(f))),k.none):f.fold(k.none,mt(k.some(Sd(f))),k.none,mt(k.some(hp(f))))).map(cx(o,s)).getOrThunk(()=>{const f=ei(a,l,i),p=f.bind(b=>zo(c,l,b));return xn(u,p,()=>Ds(c,l,i).bind(b=>{return xn(jn(g=b),Xr(g),(v,h)=>{const C=Mr(!0,v),E=Mr(!1,h);return er(g,C).forall(S=>S.isEqual(E))}).getOr(!0)?k.some(()=>{ya(o,a,D(b))}):k.none();var g})).getOrThunk(()=>p.bind(()=>f.map(b=>()=>{a?dx(o,s,i,b):dx(o,s,b,i)})))})})(t,e,n,r)}return k.none()},ux=(t,e)=>{const n=D(t.getBody()),r=D(t.selection.getStart()),o=ss(r,n);return js(o,e).fold(mt(o),s=>o.slice(0,s))},sR=t=>1===Nn(t),fx=(t,e)=>{const n=Et(Sy,t);return Qe(e,r=>n(r)?[r.dom]:[])},mx=t=>{const e=ux(n=t,r=>n.schema.isBlock(me(r)));var n;return fx(t,e)},px=(t,e)=>{const n=t.selection.getStart(),r=((o,s)=>{const a=s.parentElement;return He(s)&&!Jt(a)&&o.dom.isEmpty(a)})(t,n)||Df(D(n))?Ey(n,e):((o,s)=>{const{caretContainer:a,caretPosition:i}=wy(s);return o.insertNode(a.dom),i})(t.selection.getRng(),e);t.selection.setRng(r.toRange())},gx=t=>ot(t.startContainer),wp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=Vt(ux(r=t,o=>r.schema.isBlock(me(o))||Nn(o)>1),sR);var r;return eo(n).bind(r=>{const o=Y.fromRangeStart(t.selection.getRng());return Xv(e,o,r.dom)&&!Df(r)?k.some(()=>((s,a,i,l)=>{const c=fx(a,l);if(0===c.length)ya(a,s,i);else{const u=Ey(i.dom,c);a.selection.setRng(u.toRange())}})(e,t,r,n)):k.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&gx(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!Jt(o)&&Sy(n,D(o))})(t,e)&&(n=>{return(o=>{const s=o.startContainer.parentNode,a=o.endContainer.parentNode;return!Jt(s)&&!Jt(a)&&s.isEqualNode(a)})(r=n)&&(o=>{const s=o.endContainer;return o.endOffset===(ot(s)?s.length:s.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(e);var n})(n)){const r=mx(n);return k.some(()=>{rd(n),((o,s)=>{const a=ne(s,mx(o));a.length>0&&px(o,a)})(n,r)})}return k.none()})(t),Fl=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(gx(n)||e.dom.isEmpty(n.startContainer))&&(o=D((r=e).selection.getStart()),s=r.schema,!Tg(o,a=>Br(a.dom),a=>s.isBlock(me(a))));var r,o,s})(t)&&px(t,[]),!0),Ep=(t,e,n)=>ct(n)?k.some(()=>{t._selectionOverrides.hideFakeCaret(),ya(t,e,D(n))}):k.none(),Sp=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=r?xl:wl,a=pl(r?bn.Forwards:bn.Backwards,n.getBody(),n.selection.getRng());return o(a)?Ep(n,r,a.getNode(!r)):k.from(Mr(r,a)).filter(i=>o(i)&&Mc(a,i)).bind(i=>Ep(n,r,i.getNode(!r)))})(t,e):((n,r)=>{const o=n.selection.getNode();return Bo(o)?Ep(n,r,o):k.none()})(t,e),kp=t=>Ws(t??"").getOr(0),hx=(t,e)=>(t||"table"===me(e)?"margin":"padding")+("rtl"===L(e,"direction")?"-right":"-left"),bx=t=>{const e=yx(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,or(e,o=>{const s=hx(m0(n),o),a=et(o,s).map(kp).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&a>0})));var n},vx=t=>Vu(t)||Ka(t),yx=t=>Vt(en(t.selection.getSelectedBlocks()),e=>!vx(e)&&!sr(e).exists(vx)&&Zn(e,n=>Kr(n.dom)||Pe(n.dom)).exists(n=>Kr(n.dom))),Cx=(t,e)=>{var n,r;const{dom:o}=t,s=Yk(t),a=null!==(r=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",i=kp(s),l=m0(t);Z(yx(t),c=>{((u,f,p,b,g,v)=>{const h=hx(p,D(v)),C=kp(u.getStyle(v,h));if("outdent"===f){const E=Math.max(0,C-b);u.setStyle(v,h,E?E+g:"")}else u.setStyle(v,h,C+b+g)})(o,e,l,i,a,c.dom)})},xx=t=>Cx(t,"outdent"),wx=t=>{if(t.selection.isCollapsed()&&bx(t)){const e=t.dom,n=t.selection.getRng(),r=Y.fromRangeStart(n),o=e.getParent(n.startContainer,e.isBlock);if(null!==o&&tm(D(o),r,t.schema))return k.some(()=>xx(t))}return k.none()},Ex=(t,e,n)=>Yn([wx,up,lp,(r,o)=>xp(r,e,o),sp,pm,mp,Sp,ap,wp,fp],r=>r(t,n)).filter(r=>t.selection.isEditable()),Sx=t=>void 0===t.touches||1!==t.touches.length?k.none():k.some(t.touches[0]),_p=(t,e)=>Ut(t,e.nodeName),lR=(t,e)=>!!ot(e)||!!Nt(e)&&!(_p(t.getBlockElements(),e)||Dr(e)||na(t,e)||Su(e)),cR=(t,e)=>{if(ot(e)){if(0===e.data.length)return!0;if(/^\s+$/.test(e.data))return!e.nextSibling||_p(t,e.nextSibling)||Su(e.nextSibling)}return!1},Np=t=>t.dom.create(Fn(t),il(t)),kx=(t,e,n)=>{const r=D(Np(t)),o=Xa();St(r,o),n(e,r);const s=document.createRange();return s.setStartBefore(o.dom),s.setEndBefore(o.dom),s},_x=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),dR=(t,e,n)=>function(r){const o=arguments,s=o[o.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return r;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(o[0])+'">'+t.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},uR=(t,e)=>or(t,n=>{const r=e.match(n);return null!==r&&r[0].length===e.length}),Nx=(t,e)=>{e.hasAttribute("data-mce-caret")&&(Yu(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},fR=(t,e)=>{const n=Zo(D(t.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void Nx(t,n)):void(_h(n)&&(Nx(t,n),t.undoManager.add()))},Ax=Pe,Tx=(t,e,n)=>{const r=Mo(t.getBody()),o=Et(gf,1===e?r.next:r.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!o(Y.fromRangeStart(n))){const a=D((i=>{const l=i.dom.create(Fn(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Ft(D(s),a):Bt(D(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},Rx=(t,e)=>((n,r)=>{const o=r?bn.Forwards:bn.Backwards,s=n.selection.getRng();return(a=o,i=n,l=s,nx(i,a,l,Os,Bs,Ax)).orThunk(()=>(Tx(n,o,s),k.none()));var a,i,l})(t,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return qv(o)?!r:r})(t.selection,e)).exists(n=>(is(t,n),!0)),Ox=(t,e)=>((n,r)=>{const o=r?1:-1,s=n.selection.getRng();return(a=o,i=n,l=s,rx(i,a,l,c=>Os(c)||wv(c),c=>Bs(c)||Zf(c),Ax)).orThunk(()=>(Tx(n,o,s),k.none()));var a,i,l})(t,e).exists(n=>(is(t,n),!0)),Bx=(t,e)=>ox(t,e,e?Bs:Os),Td=(t,e)=>cp(t,!e).map(n=>{const r=n.toRange(),o=t.selection.getRng();return e?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(is(t,n),!0)),mR=t=>Ot(["figcaption"],me(t)),Dx=(t,e)=>!!t.selection.isCollapsed()&&((n,r)=>{const o=D(n.getBody()),s=Y.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const c=Et(zt,i);return Zn(D(a.container()),u=>l.isBlock(me(u)),c).filter(mR)})(s,o,n.schema).exists(()=>{if(a=o,l=s,r?X1(a.dom,l):K1(a.dom,l)){const a=kx(n,o,r?St:Zt);return n.selection.setRng(a),!0}var a,l;return!1})})(t,e),Px=(t,e)=>{return n=t,e?k.from(n.dom.getParent(n.selection.getNode(),"details")).map(o=>((s,a)=>{const i=s.selection.getRng(),l=Y.fromRangeStart(i);return!(s.getBody().lastChild!==a||!X1(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,o)).getOr(!1):k.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(o=>k.from(n.dom.getParent(o,"details")).map(s=>((a,i,l)=>{const c=a.selection.getRng(),u=Y.fromRangeStart(c);return!(a.getBody().firstChild!==i||!K1(l,u)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,o))).getOr(!1);var n},Lx={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Mx=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,qt=(t,...e)=>()=>t.apply(null,e),jl=(t,e)=>{return Ge((r=e,Qe(re(t,s=>({...Lx,...s})),o=>Mx(o,r)?[o]:[])),n=>n.action());var r},Ix=(t,e)=>{return Yn((r=e,Qe(re(t,s=>({...Lx,...s})),o=>Mx(o,r)?[o]:[])),n=>n.action());var r},Fx=(t,e)=>{const n=e?bn.Forwards:bn.Backwards,r=t.selection.getRng();return nx(t,n,r,xl,wl,Bo).exists(o=>(is(t,o),!0))},jx=(t,e)=>{const n=e?1:-1,r=t.selection.getRng();return rx(t,n,r,xl,wl,Bo).exists(o=>(is(t,o),!0))},zx=(t,e)=>ox(t,e,e?wl:xl),Ux=Do([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),zl={...Ux,none:t=>Ux.none(t)},Hx=(t,e,n)=>Qe(Ee(t),r=>ln(r,e)?n(r)?[r]:[]:Hx(r,e,n)),qx=(t,e)=>lo(t,"table",e),Ap=(t,e,n,r,o=je)=>{const s=1===r;if(!s&&n<=0)return zl.first(t[0]);if(s&&n>=t.length-1)return zl.last(t[t.length-1]);{const a=n+r,i=t[a];return o(i)?zl.middle(e,i):Ap(t,e,a,r,o)}},$x=(t,e)=>qx(t,e).bind(n=>{const r=Hx(n,"th,td",je);return js(r,o=>zt(t,o)).map(o=>({index:o,all:r}))}),pR=["img","br"],gR=t=>{return(e=t,Wu.getOption(e)).filter(n=>0!==n.trim().length||n.indexOf(cn)>-1).isSome()||Ot(pR,me(t))||Ys(n=t)&&"false"===Qn(n,"contenteditable");var n,e},Wx=(t,e,n,r,o)=>{const s=Mn(D(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,c)=>yn(i,(u,f)=>u.fold(()=>k.some(f),p=>{const b=Math.sqrt(Math.abs(p.x-l)+Math.abs(p.y-c)),g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return k.some(g<b?f:p)}),k.none()))(Vt((i=t,Qe(s,c=>{const u={left:(f=da(c.getBoundingClientRect())).left- -1,top:f.top- -1,right:f.right+-2,bottom:f.bottom+-2,width:f.width+-1,height:f.height+-1};var f;return[{x:u.left,y:i(u),cell:c},{x:u.right,y:i(u),cell:c}]})),i=>e(i,o)),r,o).map(i=>i.cell)},hR=Et(Wx,t=>t.bottom,(t,e)=>t.y<e),bR=Et(Wx,t=>t.top,(t,e)=>t.y>e),Vx=(t,e,n)=>{const r=t(e,n);return(o=r).breakType===Uo.Wrap&&0===o.positions.length||!He(n.getNode())&&(o=>o.breakType===Uo.Br&&1===o.positions.length)(r)?!((o,s,a)=>a.breakAt.exists(i=>o(s,i).breakAt.isSome()))(t,e,r):r.breakAt.isNone();var o},vR=Et(Vx,Ll),yR=Et(Vx,Ml),CR=(t,e,n,r)=>{const o=t.selection.getRng(),s=e?1:-1;return!(!O0()||!((a,i,l)=>{const c=Y.fromRangeStart(i);return ni(!a,l).exists(u=>u.isEqual(c))})(e,o,n)||(as(s,t,n,!e,!1).each(a=>{is(t,a)}),0))},Kx=(t,e,n)=>{const r=((s,a)=>{const i=a.getNode(s);return Oo(i)?k.some(i):k.none()})(!!e,n),o=!1===e;r.fold(()=>is(t,n.toRange()),s=>ni(o,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>is(t,n.toRange()),a=>{return i=e,c=s,void(l=t).undoManager.transact(()=>{const u=i?Ft:Bt,f=kx(l,D(c),u);is(l,f)});var i,l,c}))},xR=(t,e,n,r)=>{const o=t.selection.getRng(),s=Y.fromRangeStart(o),a=t.getBody();if(!e&&vR(r,s)){const i=(l=a,(f=c=n,p=u=s,Sn(p.getClientRects()).bind(b=>hR(f,b.left,b.top)).bind(b=>{return _d(Xr(g=b).map(v=>Ll(g,v).positions.concat(v)).getOr([]),p);var g})).orThunk(()=>Sn(u.getClientRects()).bind(f=>bp(W1(l,Y.before(c)),f.left))).getOr(Y.before(c)));return Kx(t,e,i),!0}var l,c,u,f,p;if(e&&yR(r,s)){const i=((l,c,u)=>((f,p)=>eo(p.getClientRects()).bind(b=>bR(f,b.left,b.top)).bind(b=>{return _d(jn(g=b).map(v=>[v].concat(Ml(g,v).positions)).getOr([]),p);var g}))(c,u).orThunk(()=>Sn(u.getClientRects()).bind(f=>bp(V1(l,Y.after(c)),f.left))).getOr(Y.after(c)))(a,n,s);return Kx(t,e,i),!0}return!1},Xx=(t,e,n)=>k.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(r=>k.from(t.dom.getParent(r,"table")).map(o=>n(t,e,o,r))).getOr(!1),Yx=(t,e)=>Xx(t,e,CR),Tp=(t,e)=>Xx(t,e,xR),Gx=(t,e,n)=>n.fold(k.none,k.none,(r,o)=>{return(s=o,ja(s,gR)).map(a=>{return(t=>{const e=ai.getWin(t).dom,n=(o,s,a,i)=>Mf(e,o,s,a,i),r=t.match({domRange:s=>{const a=D(s.startContainer),i=D(s.endContainer);return Ob(a,s.startOffset,i,s.endOffset)},relative:yN,exact:Ob});return((o,s)=>{var i;return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(u=>!1===u.collapsed).map(u=>yl.rtl(D(u.endContainer),u.endOffset,D(u.startContainer),u.startOffset)).getOrThunk(()=>Tb(0,yl.ltr,c)):Tb(0,yl.ltr,c)})(0,(i=o,s.match({domRange:c=>({ltr:mt(c),rtl:k.none}),relative:(c,u)=>({ltr:$r(()=>Ab(i,c,u)),rtl:$r(()=>k.some(Ab(i,u,c)))}),exact:(c,u,f,p)=>({ltr:$r(()=>Mf(i,c,u,f,p)),rtl:$r(()=>k.some(Mf(i,f,p,c,u)))})})))})(e,r).match({ltr:n,rtl:n})})(ai.exact(i=a,0,i,0));var i});var s},r=>(t.execCommand("mceTableInsertRowAfter"),Qx(t,e,r))),Qx=(t,e,n)=>{return Gx(t,e,(o=co,$x(r=n,void 0).fold(()=>zl.none(r),s=>Ap(s.all,r,s.index,1,o))));var r,o},wR=(t,e,n)=>{return Gx(t,e,(o=co,$x(r=n,void 0).fold(()=>zl.none(),s=>Ap(s.all,r,s.index,-1,o))));var r,o},Zx=(t,e)=>{const n=["table","li","dl"],r=D(t.getBody()),o=a=>{const i=me(a);return zt(a,r)||Ot(n,i)},s=t.selection.getRng();return(a=D(e?s.endContainer:s.startContainer),i=o,((l,c,u=Ce)=>u(c)?k.none():Ot(l,me(c))?k.some(c):io(c,l.join(","),f=>ln(f,"table")||u(f)))(["td","th"],a,i)).map(a=>(qx(a,o).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?Qx:wR)(t,o,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},vo=(t,e)=>({container:t,offset:e}),Rd=Re.DOM,Od=t=>e=>t===e?-1:0,Rp=(t,e,n)=>{if(ot(t)&&e>=0)return k.some(vo(t,e));{const r=la(Rd);return k.from(r.backwards(t,e,Od(t),n)).map(o=>vo(o.container,o.container.data.length))}},Op=(t,e,n)=>{if(!ot(t))return k.none();if(e>=0&&e<=t.data.length)return k.some(vo(t,e));{const o=la(Rd);return k.from(o.backwards(t,e,Od(t),n)).bind(s=>Op(s.container,e+s.container.data.length,n))}},Jx=(t,e,n)=>{if(!ot(t))return k.none();const r=t.data;if(e<=r.length)return k.some(vo(t,e));{const o=la(Rd);return k.from(o.forwards(t,e,Od(t),n)).bind(s=>Jx(s.container,e-r.length,n))}},Bp=(t,e,n,r,o)=>{const s=la(t,(a=>i=>a.isBlock(i)||Ot(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i))(t));return k.from(s.backwards(e,n,r,o))},tw=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),ER=(t,e)=>t.substring(e.length),Dp=(t,e,n,r=!1)=>{if(!(o=e).collapsed||!ot(o.startContainer))return k.none();var o;const s={text:"",offset:0},a=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return Bp(t,e.startContainer,e.startOffset,(i,l,c)=>(s.text=c+s.text,s.offset+=l,((u,f,p,b=!1)=>{let g;const v=p.charAt(0);for(g=f-1;g>=0;g--){const h=u.charAt(g);if(!b&&tw(h))return k.none();if(v===h&&fn(u,p,g,f))break}return k.some(g)})(s.text,s.offset,n,r).getOr(l)),a).bind(i=>{const l=e.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(e.endContainer,e.endOffset),l.collapsed)return k.none();const c=vr(l.toString().replace(/\u00A0/g," "));return 0!==c.lastIndexOf(n)?k.none():k.some({text:ER(c,n),range:l,trigger:n})})},ew=t=>{if(3===t.nodeType)return vo(t,t.data.length);{const e=t.childNodes;return e.length>0?ew(e[e.length-1]):vo(t,e.length)}},nw=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?nw(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?ew(n[n.length-1]):vo(t,e)},rw=(t,e,n,r={})=>{var o;const s=e(),a=null!==(o=t.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=Vt(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>(u=>f=>{const p=nw(f.startContainer,f.startOffset);return!((b,g)=>{var v;const h=null!==(v=b.getParent(g.container,b.isBlock))&&void 0!==v?v:b.getRoot();return Bp(b,g.container,g.offset,(C,E)=>0===E?-1:E,h).filter(C=>{const E=C.container.data.charAt(C.offset-1);return!tw(E)}).isSome()})(u,p)})(t.dom))(n.range,a,n.text));if(0===i.length)return k.none();const l=Promise.all(re(i,c=>c.fetch(n.text,c.maxResults,r).then(u=>({matchText:n.text,items:u,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return k.some({lookupData:l,context:n})};var Ho;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Ho||(Ho={}));const Pp=(t,e,n)=>t.stype===Ho.Error?e(t.serror):n(t.svalue),hi=t=>({stype:Ho.Value,svalue:t}),Ul=t=>({stype:Ho.Error,serror:t}),SR=Pp,Lp=t=>Kt(t)&&an(t).length>100?" removed due to size":JSON.stringify(t,null,2),Bd=(t,e)=>Ul([{path:t,getErrorInfo:e}]),ow=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const s in o)Ut(o,s)&&(n[s]=t(n[s],o[s]))}return n},Mp=ow((t,e)=>It(t)&&It(e)?Mp(t,e):e),_R=ow((t,e)=>e),sw=t=>({tag:"defaultedThunk",process:mt(t)}),aw=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Ip=t=>({extract:(e,n)=>{return(r=t(n)).stype===Ho.Error?Bd(e,mt(r.serror)):r;var r},toString:mt("val")}),AR=Ip(hi),iw=(t,e,n,r)=>r(Te(t,e).getOrThunk(()=>n(t))),TR=(t,e,n,r,o)=>{const s=i=>o.extract(e.concat([r]),i),a=i=>i.fold(()=>hi(k.none()),l=>{return(u=o.extract(e.concat([r]),l)).stype===Ho.Value?{stype:Ho.Value,svalue:(0,k.some)(u.svalue)}:u;var u});switch(t.tag){case"required":return i=e,u=s,Te(l=n,c=r).fold(()=>{return p=c,b=l,Bd(i,()=>'Could not find valid *required* value for "'+p+'" in '+Lp(b));var p,b},u);case"defaultedThunk":return iw(n,r,t.process,s);case"option":return((i,l,c)=>c(Te(i,l)))(n,r,a);case"defaultedOptionThunk":return((i,l,c,u)=>u(Te(i,l).map(f=>!0===f?c(i):f)))(n,r,t.process,a);case"mergeWithThunk":return iw(n,r,mt({}),i=>{const l=Mp(t.process(n),i);return s(l)})}var i,l,c,u},Fp=t=>({extract:(e,n)=>((r,o,s)=>{const a={},i=[];for(const l of s)aw(l,(c,u,f,p)=>{const b=TR(f,r,o,c,p);SR(b,g=>{i.push(...g)},g=>{a[u]=g})},(c,u)=>{a[c]=u(o)});return i.length>0?Ul(i):hi(a)})(e,n,t),toString:()=>"obj{\n"+re(t,n=>aw(n,(r,o,s,a)=>r+" -> "+a.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),lw=t=>({extract:(e,n)=>(t=>{const e=(r=>{const o=[],s=[];return Z(r,a=>{Pp(a,i=>s.push(i),i=>o.push(i))}),{values:o,errors:s}})(t);return e.errors.length>0?(n=e.errors,Bn(Ul,tc)(n)):hi(e.values);var n})(re(n,(o,s)=>t.extract(e.concat(["["+s+"]"]),o))),toString:()=>"array("+t.toString()+")"}),cw=(t,e)=>((t,e)=>({extract:(n,r)=>Te(r,t).fold(()=>{return s=t,Bd(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},o=>{return s=n,a=r,Te(i=e,l=o).fold(()=>{return u=i,f=l,Bd(s,()=>'The chosen schema: "'+f+'" did not exist in branches: '+Lp(u));var u,f},c=>c.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+an(e)}))(t,ds(e,Fp)),OR=mt(AR),Dd=(t,e)=>Ip(n=>{const r=typeof n;return t(n)?hi(n):Ul(`Expected type: ${e} but got: ${r}`)}),BR=Dd(x,"number"),Pd=Dd(Rt,"string"),DR=Dd(En,"boolean"),jp=Dd(be,"function"),Hl=(t,e,n,r)=>({tag:"field",key:t,newKey:e,presence:n,prop:r}),dw=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),uw=(t,e)=>Hl(t,t,{tag:"required",process:{}},e),fw=t=>uw(t,Pd),mw=t=>uw(t,jp),zp=(t,e)=>Hl(t,t,{tag:"option",process:{}},e),Ld=t=>zp(t,Pd),bi=(t,e,n)=>Hl(t,t,sw(e),n),pw=(t,e)=>bi(t,e,BR),gw=(t,e,n)=>{return bi(t,e,(r=n,o=s=>Ot(r,s)?tr.value(s):tr.error(`Unsupported value: "${s}", choose one of "${r.join(", ")}".`),Ip(s=>o(s).fold(Ul,hi))));var r,o},Up=(t,e)=>bi(t,e,DR),Hp=(t,e)=>bi(t,e,jp),PR=fw("type"),LR=mw("fetch"),qp=mw("onAction"),MR=Hp("onSetup",()=>_t),IR=Ld("text"),FR=Ld("icon"),jR=Ld("tooltip"),zR=Ld("label"),UR=Up("active",!1),HR=Up("enabled",!0),hw=Up("primary",!1),ql=t=>bi("type",t,Pd),qR=Fp([PR,fw("trigger"),pw("minChars",1),(t=>Hl(t,t,sw(1),OR()))("columns"),pw("maxResults",10),zp("matches",jp),LR,qp,(bw=Pd,bi("highlightOn",[],lw(bw)))]);var bw;const $p=[HR,jR,FR,IR,MR],vw=[UR].concat($p),$R=[Hp("predicate",Ce),gw("scope","node",["node","editor"]),gw("position","selection",["node","selection","line"])],WR=$p.concat([ql("contextformbutton"),hw,qp,dw("original",pe)]),VR=vw.concat([ql("contextformbutton"),hw,qp,dw("original",pe)]),KR=$p.concat([ql("contextformbutton")]),XR=vw.concat([ql("contextformtogglebutton")]),YR=cw("type",{contextformbutton:WR,contextformtogglebutton:VR});Fp([ql("contextform"),Hp("initValue",mt("")),zR,((t,e)=>Hl(t,t,{tag:"required",process:{}},lw(e)))("commands",YR),zp("launch",cw("type",{contextformbutton:KR,contextformtogglebutton:XR}))].concat($R));const QR=t=>{const e=ns(),n=gn(!1),r=e.isSet,o=()=>{r()&&(t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=$r(()=>(t=>{const e=t.ui.registry.getAll().popups,n=ds(e,s=>{return(a=s,((t,e,n)=>{return r=(i=e.extract([t],a=n)).stype===Ho.Error?{stype:Ho.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,Pp(r,tr.error,tr.value);var a,i,r})("Autocompleter",qR,a)).fold(i=>{throw new Error("Errors: \n"+(c=>{const u=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:mt("... (only showing first ten failures)")}]):c;return re(u,f=>"Failed path: ("+f.path.join(" > ")+")\n"+f.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+Lp(l.input));var l},pe);var a}),r=Da(No(n,s=>s.trigger)),o=Ba(n);return{dataset:n,triggers:r,lookupByTrigger:s=>Vt(o,a=>a.trigger===s)}})(t)),a=l=>{var c;(c=l,e.get().map(u=>Dp(t.dom,t.selection.getRng(),u.trigger,!0).bind(f=>rw(t,s,f,c))).getOrThunk(()=>((u,f)=>{const p=f(),b=u.selection.getRng();return(g=u.dom,v=b,h=p,Yn(h.triggers,C=>Dp(g,v,C))).bind(g=>rw(u,f,g));var g,v,h})(t,s))).fold(o,c=>{var u;u=c.context,r()||e.set({trigger:u.trigger,matchLength:u.text.length}),c.lookupData.then(u=>{e.get().map(f=>{const p=c.context;f.trigger===p.trigger&&(e.set({...f,matchLength:p.text.length}),n.get()?(Pf(t,{range:p.range}),t.dispatch("AutocompleterUpdate",{lookupData:u})):(n.set(!0),Pf(t,{range:p.range}),t.dispatch("AutocompleterStart",{lookupData:u})))})})})},i=()=>e.get().bind(({trigger:l})=>{const c=t.selection.getRng();return Dp(t.dom,c,l,n.get()).filter(({range:u})=>((f,p)=>{const b=f.compareBoundaryPoints(window.Range.START_TO_START,p),g=f.compareBoundaryPoints(window.Range.END_TO_END,p);return b>=0&&g<=0})(c,u)).map(({range:u})=>u)});t.addCommand("mceAutocompleterReload",(l,c)=>{const u=Kt(c)?c.fetchOptions:{};a(u)}),t.addCommand("mceAutocompleterClose",o),t.addCommand("mceAutocompleterRefreshActiveRange",()=>{i().each(l=>{Pf(t,{range:l})})}),t.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>i().isSome()),((l,c)=>{const u=$u(c.load,50);l.on("input",f=>{("insertCompositionText"!==f.inputType||l.composing)&&u.throttle()}),l.on("keydown",f=>{const p=f.which;8===p?u.throttle():27===p?(u.cancel(),c.cancelIfNecessary()):38!==p&&40!==p||u.cancel()},!0),l.on("remove",u.cancel)})(t,{cancelIfNecessary:o,load:a})},ZR=Pn().browser.isSafari(),yw=t=>Es(D(t)),Cw=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},Md=(t,e)=>k.from(t.getParent(e.container(),"details")),xw=(t,e)=>Md(t,e).isSome(),ww=(t,e)=>{const n=e.getNode();Me(n)||t.selection.setCursorLocation(n,e.offset())},Ew=(t,e,n)=>{const r=t.dom.getParent(e.container(),"details");if(r&&!r.open){const o=t.dom.select("summary",r)[0];o&&(n?jn(o):Xr(o)).each(s=>ww(t,s))}else ww(t,e)},Sw=(t,e,n)=>{const{dom:r,selection:o}=t,s=t.getBody();if("character"===n){const a=Y.fromRangeStart(o.getRng()),i=r.getParent(a.container(),r.isBlock),l=Md(r,a),c=i&&r.isEmpty(i),u=Jt(i?.previousSibling),f=Jt(i?.nextSibling);return!!(c&&(e?f:u)&&ei(!e,s,a).exists(p=>xw(r,p)&&!dc(l,Md(r,p))))||ei(e,s,a).fold(Ce,p=>{const b=Md(r,p);if(xw(r,p)&&!dc(l,b)){if(e||Ew(t,p,!1),i&&c){if(e&&u||!e&&f)return!0;Ew(t,p,e),t.dom.remove(i)}return!0}return!1})}return!1},Sa=(t,e,n)=>{return o=e,s=n,((a,i)=>{const l=k.from(a.getParent(i.startContainer,"details")),c=k.from(a.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const u=l.bind(f=>k.from(a.select("summary",f)[0]));return k.some({startSummary:u,startDetails:l,endDetails:c})}return k.none()})((r=t).dom,r.selection.getRng()).fold(()=>Sw(r,o,s),a=>((t,e,n,r)=>{const o=t.selection.getRng(),s=Y.fromRangeStart(o),a=t.getBody();return"selection"===r?((i,l)=>{const c=l.startSummary.exists(p=>p.contains(i.startContainer)),u=l.startSummary.exists(p=>p.contains(i.endContainer)),f=l.startDetails.forall(p=>l.endDetails.forall(b=>p!==b));return(c||u)&&!(c&&u)||f})(o,e):n?(i=s,e.startSummary.exists(c=>{return u=i,Xr(f=c).exists(p=>He(p.getNode())&&dr(f,p).exists(b=>b.isEqual(u))||p.isEqual(u));var u,f})||((i,l,c)=>c.startDetails.exists(u=>er(i,l).forall(f=>!u.contains(f.container()))))(a,s,e)):((i,l)=>l.startSummary.exists(c=>{return u=i,jn(c).exists(p=>p.isEqual(u));var u}))(s,e)||((i,l)=>l.startDetails.exists(c=>dr(c,i).forall(u=>l.startSummary.exists(f=>!f.contains(i.container())&&f.contains(u.container())))))(s,e);var i})(r,a,o,s)||Sw(r,o,s))||ZR&&((r,o,s)=>{const a=r.selection,i=a.getNode(),l=a.getRng(),c=Y.fromRangeStart(l);return!!WS(i)&&("selection"===s&&Cw(l,i)||Xv(o,c,i)?yw(i):r.undoManager.transact(()=>{const u=a.getSel();let{anchorNode:f,anchorOffset:p,focusNode:b,focusOffset:g}=u??{};const v=()=>{ct(f)&&ct(p)&&ct(b)&&ct(g)&&u?.setBaseAndExtent(f,p,b,g)},h=(E,S)=>{Z(E.childNodes,N=>{hl(N)&&S.appendChild(N)})},C=r.dom.create("span",{"data-mce-bogus":"1"});h(i,C),i.appendChild(C),v(),"word"!==s&&"line"!==s||null==u||u.modify("extend",o?"right":"left",s),!a.isCollapsed()&&Cw(a.getRng(),C)?yw(i):(r.execCommand(o?"ForwardDelete":"Delete"),f=u?.anchorNode,p=u?.anchorOffset,b=u?.focusNode,g=u?.focusOffset,h(C,i),v()),r.dom.remove(C)}),!0)})(t,e,n)?k.some(_t):k.none();var r,o,s},kw=t=>(e,n,r={})=>{const o=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:_t,inputType:n},a=ch(new InputEvent(t));return e.dispatch(t,{...a,...s,...r})},$l=kw("input"),Id=kw("beforeinput"),_w=Pn(),Nw=_w.os,Aw=Nw.isMacOS()||Nw.isiOS(),tO=_w.browser.isFirefox(),vi=(t,e)=>{const n=t.dom,r=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(Nt(a)||ot(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(cn),e.firstChild)}const o=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new pn(e,e);let a,i=e;for(;a=s.current();){if(ot(a)){o.setStart(a,0),o.setEnd(a,0);break}if(r[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}i=a,a=s.next()}a||(o.setStart(i,0),o.setEnd(i,0))}else He(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)):(o.setStart(e,0),o.setEnd(e,0));t.selection.setRng(o),Cl(t,o)},Wl=(t,e)=>{const n=t.getRoot();let r,o=e;for(;o!==n&&o&&"false"!==t.getContentEditable(o);){if("true"===t.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},Wp=t=>k.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Vp=t=>{t.innerHTML='<br data-mce-bogus="1">'},Vl=(t,e)=>{Fn(t).toLowerCase()===e.tagName.toLowerCase()&&((n,r,o)=>{const s=n.dom;k.from(o.style).map(s.parseStyle).each(u=>{const f={...nt(D(r)),...u};s.setStyles(r,f)});const a=k.from(o.class).map(u=>u.split(/\s+/)),i=k.from(r.className).map(u=>Vt(u.split(/\s+/),f=>""!==f));xn(a,i,(u,f)=>{const p=Vt(f,g=>!Ot(u,g)),b=[...u,...p];s.setAttrib(r,"class",b.join(" "))});const l=["style","class"],c=_o(o,(u,f)=>!Ot(l,f));s.setAttribs(r,c)})(t,e,il(t))},Tw=(t,e,n,r,o=!0,s,a)=>{const i=t.dom,l=t.schema,c=Fn(t),u=n?n.nodeName.toUpperCase():"";let f=e;const p=l.getTextInlineElements();let b;b=s||"TABLE"===u||"HR"===u?i.create(s||c,a||{}):n.cloneNode(!1);let g=b;if(o){do{if(p[f.nodeName]){if(Br(f)||Dr(f))continue;const v=f.cloneNode(!1);i.setAttrib(v,"id",""),b.hasChildNodes()?(v.appendChild(b.firstChild),b.appendChild(v)):(g=v,b.appendChild(v))}}while((f=f.parentNode)&&f!==r)}else i.setAttrib(b,"style",null),i.setAttrib(b,"class",null);return Vl(t,b),Vp(g),b},Rw=(t,e)=>{const n=t?.parentNode;return ct(n)&&n.nodeName===e},Ow=t=>ct(t)&&/^(OL|UL|LI)$/.test(t.nodeName),Kp=t=>ct(t)&&/^(LI|DT|DD)$/.test(t.nodeName),Fd=t=>{const e=t.parentNode;return Kp(e)?e:t},jd=(t,e,n)=>{let r=t[n?"firstChild":"lastChild"];for(;r&&!Nt(r);)r=r[n?"nextSibling":"previousSibling"];return r===e},Bw=t=>yn(No(nt(D(t)),(e,n)=>`${n}: ${e};`),(e,n)=>e+n,""),eO=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Xp=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Yp=(t,e)=>ct(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Gp=(t,e,n)=>ot(e)?t?1===n&&e.data.charAt(n-1)===hn?0:n:n===e.data.length-1&&e.data.charAt(n)===hn?e.data.length:n:n,Dw={insert:(t,e)=>{let n,r,o,s,a=!1;const i=t.dom,l=t.schema.getNonEmptyElements(),c=t.selection.getRng(),u=Fn(t),f=D(c.startContainer),p=$e(f,c.startOffset),b=p.exists(z=>Ys(z)&&!co(z)),g=c.collapsed&&b,v=(z,$)=>Tw(t,n,A,N,jk(t),z,$),h=z=>{const $=Gp(z,n,r);if(ot(n)&&(z?$>0:$<n.data.length))return!1;if((n.parentNode===A||n===A)&&a&&!z||z&&Nt(n)&&n===A.firstChild)return!0;if(Xp(n,"TABLE")||Xp(n,"HR"))return a&&!z||!a&&z;const B=new pn(n,A);let I;for(ot(n)&&(z&&0===$?B.prev():z||$!==n.data.length||B.next());I=B.current();){if(Nt(I)){if(!I.getAttribute("data-mce-bogus")){const j=I.nodeName.toLowerCase();if(l[j]&&"br"!==j)return!1}}else if(ot(I)&&!qa(I.data))return!1;z?B.prev():B.next()}return!0},C=()=>{let z;return z=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==R?v(u):v(),(($,B)=>{const I=zk($);return!we(B)&&(Rt(I)?Ot(lt.explode(I),B.nodeName.toLowerCase()):I)})(t,s)&&Yp(i,s)&&i.isEmpty(A,void 0,{includeZwsp:!0})?z=i.split(s,A):i.insertAfter(z,A),vi(t,z),z};Kc(i,c).each(z=>{c.setStart(z.startContainer,z.startOffset),c.setEnd(z.endContainer,z.endOffset)}),n=c.startContainer,r=c.startOffset;const E=!(!e||!e.shiftKey),S=!(!e||!e.ctrlKey);Nt(n)&&n.hasChildNodes()&&!g&&(a=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=a&&ot(n)?n.data.length:0);const N=Wl(i,n);if(!N||((z,$)=>{const B=z.dom.getParent($,"ol,ul,dl");return null!==B&&"false"===z.dom.getContentEditableParent(B)})(t,n))return;E||(n=((z,$,B,I,j)=>{var G,st;const rt=z.dom,xt=null!==(G=Wl(rt,I))&&void 0!==G?G:rt.getRoot();let At=rt.getParent(I,rt.isBlock);if(!At||!Yp(rt,At)){if(At=At||xt,!At.hasChildNodes()){const kt=rt.create($);return Vl(z,kt),At.appendChild(kt),B.setStart(kt,0),B.setEnd(kt,0),kt}let Dt,wt=I;for(;wt&&wt.parentNode!==At;)wt=wt.parentNode;for(;wt&&!rt.isBlock(wt);)Dt=wt,wt=wt.previousSibling;const pt=null===(st=Dt?.parentElement)||void 0===st?void 0:st.nodeName;if(Dt&&pt&&z.schema.isValidChild(pt,$.toLowerCase())){const kt=Dt.parentNode,F=rt.create($);for(Vl(z,F),kt.insertBefore(F,Dt),wt=Dt;wt&&!rt.isBlock(wt);){const U=wt.nextSibling;F.appendChild(wt),wt=U}B.setStart(I,j),B.setEnd(I,j)}}return I})(t,u,c,n,r));let A=i.getParent(n,i.isBlock)||i.getRoot();s=ct(A?.parentNode)?i.getParent(A.parentNode,i.isBlock):null,o=A?A.nodeName.toUpperCase():"";const R=s?s.nodeName.toUpperCase():"";if("LI"!==R||S||(A=s,s=s.parentNode,o=R),Nt(s)&&(z=t,B=A,!E&&B.nodeName.toLowerCase()===Fn(z)&&z.dom.isEmpty(B)&&((I,j)=>{let st=j;for(;st&&st!==I&&Jt(st.nextSibling);){const xt=st.parentElement;if(!xt||(rt=xt,!Ut(z.schema.getTextBlockElements(),rt.nodeName.toLowerCase())))return wu(xt);st=xt}var rt;return!1})(z.getBody(),B)))return((z,$,B)=>{var I,j,G;const st=$(Fn(z)),rt=z.dom.getParent(B,wu);rt&&(z.dom.insertAfter(st,rt),vi(z,st),(null!==(G=null===(j=null===(I=B.parentElement)||void 0===I?void 0:I.childNodes)||void 0===j?void 0:j.length)&&void 0!==G?G:0)>1&&z.dom.remove(B))})(t,v,A);var z,B;if(/^(LI|DT|DD)$/.test(o)&&Nt(s)&&i.isEmpty(A))return void((z,$,B,I,j)=>{const G=z.dom,st=z.selection.getRng(),rt=B.parentNode;if(B===z.getBody()||!rt)return;var xt;Ow(xt=B)&&Ow(xt.parentNode)&&(j="LI");const At=Kp(I)?Bw(I):void 0;let Dt=Kp(I)&&At?$(j,{style:Bw(I)}):$(j);if(jd(B,I,!0)&&jd(B,I,!1))if(Rw(B,"LI")){const wt=Fd(B);G.insertAfter(Dt,wt),(null===(kt=(pt=B).parentNode)||void 0===kt?void 0:kt.firstChild)===pt?G.remove(wt):G.remove(B)}else G.replace(Dt,B);else if(jd(B,I,!0))Rw(B,"LI")?(G.insertAfter(Dt,Fd(B)),Dt.appendChild(G.doc.createTextNode(" ")),Dt.appendChild(B)):rt.insertBefore(Dt,B),G.remove(I);else if(jd(B,I,!1))G.insertAfter(Dt,Fd(B)),G.remove(I);else{B=Fd(B);const wt=st.cloneRange();wt.setStartAfter(I),wt.setEndAfter(B);const pt=wt.extractContents();if("LI"===j&&(kt=>kt.firstChild&&"LI"===kt.firstChild.nodeName)(pt)){const kt=Vt(re(Dt.children,D),yo(Qs("br")));Dt=pt.firstChild,G.insertAfter(pt,B),Z(kt,F=>Zt(D(Dt),F)),At&&Dt.setAttribute("style",At)}else G.insertAfter(pt,B),G.insertAfter(Dt,B);G.remove(I)}var pt,kt;vi(z,Dt)})(t,v,s,A,u);if(!(g||A!==t.getBody()&&Yp(i,A)))return;const M=A.parentNode;let P;if(g)P=v(u),p.fold(()=>{St(f,D(P))},z=>{Bt(z,D(P))}),t.selection.setCursorLocation(P,0);else if(Ga(A))P=Yu(A),i.isEmpty(A)&&Vp(A),Vl(t,P),vi(t,P);else if(h(!1))P=C();else if(h(!0)&&M){const z=Y.fromRangeStart(c),$=Zf(z),B=D(A),I=ed(B,z,t.schema)?Av(B,z,t.schema).bind(G=>k.from(G.getNode())):k.none();P=M.insertBefore(v(),A);const j=Xp(A,"HR")||$?P:I.getOr(A);vi(t,j)}else{const z=(B=>{const I=B.cloneRange();return I.setStart(B.startContainer,Gp(!0,B.startContainer,B.startOffset)),I.setEnd(B.endContainer,Gp(!1,B.endContainer,B.endOffset)),I})(c).cloneRange();z.setEndAfter(A);const $=z.extractContents();(B=>{Z(Ag(D(B),wn),I=>{const j=I.dom;j.nodeValue=vr(j.data)})})($),(B=>{let I=B;do{ot(I)&&(I.data=I.data.replace(/^[\r\n]+/,"")),I=I.firstChild}while(I)})($),P=$.firstChild,i.insertAfter($,A),((B,I,j)=>{var G;const st=[];if(!j)return;let rt=j;for(;rt=rt.firstChild;){if(B.isBlock(rt))return;Nt(rt)&&!I[rt.nodeName.toLowerCase()]&&st.push(rt)}let xt=st.length;for(;xt--;)rt=st[xt],(!rt.hasChildNodes()||rt.firstChild===rt.lastChild&&""===(null===(G=rt.firstChild)||void 0===G?void 0:G.nodeValue)||eO(B,rt))&&B.remove(rt)})(i,l,P),((B,I)=>{I.normalize();const j=I.lastChild;(!j||Nt(j)&&/^(left|right)$/gi.test(B.getStyle(j,"float",!0)))&&B.add(I,"br")})(i,A),i.isEmpty(A)&&Vp(A),P.normalize(),i.isEmpty(P)?(i.remove(P),C()):(Vl(t,P),vi(t,P))}i.setAttrib(P,"id",""),t.dispatch("NewBlock",{newBlock:P})},fakeEventName:"insertParagraph"},Pw=(t,e,n)=>{const r=t.dom.createRng();n?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),t.selection.setRng(r),Cl(t,r)},nO=(t,e)=>{const n=Mt("br");Bt(D(e),n),t.undoManager.add()},rO=(t,e)=>{oO(t.getBody(),e)||Ft(D(e),Mt("br"));const n=Mt("br");Ft(D(e),n),Pw(t,n.dom,!1),t.undoManager.add()},oO=(t,e)=>{return n=Y.after(e),!!He(n.getNode())||er(t,Y.after(e)).map(r=>He(r.getNode())).getOr(!1);var n},Lw=t=>t&&"A"===t.nodeName&&"href"in t,sO=t=>t.fold(Ce,Lw,Lw,Ce),aO=(t,e)=>{e.fold(_t,Et(nO,t),Et(rO,t),_t)},Mw={insert:(t,e)=>{const n=(r=>{const o=Et(Ca,r),s=Y.fromRangeStart(r.selection.getRng());return zo(o,r.getBody(),s).filter(sO)})(t);n.isSome()?n.each(Et(aO,t)):((r,o)=>{const a=r.dom,i=r.selection.getRng();let l,c=!1;Kc(a,i).each(h=>{i.setStart(h.startContainer,h.startOffset),i.setEnd(h.endContainer,h.endOffset)});let u=i.startOffset,f=i.startContainer;if(Nt(f)&&f.hasChildNodes()){const h=u>f.childNodes.length-1;f=f.childNodes[Math.min(u,f.childNodes.length-1)]||f,u=h&&ot(f)?f.data.length:0}let p=a.getParent(f,a.isBlock);const b=p&&p.parentNode?a.getParent(p.parentNode,a.isBlock):null;"LI"!==(b?b.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(p=b),ot(f)&&u>=f.data.length&&(((h,C,E)=>{const S=new pn(C,E);let N;const A=h.getNonEmptyElements();for(;N=S.next();)if(A[N.nodeName.toLowerCase()]||ot(N)&&N.length>0)return!0;return!1})(r.schema,f,p||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),ef(a,i,l),Pw(r,l,c),r.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},Iw=(t,e)=>Wp(t).filter(n=>e.length>0&&ln(D(n),e)).isSome(),yr=Do([{br:[]},{block:[]},{none:[]}]),iO=(t,e)=>{return Iw(n=t,Fk(n));var n},Fw=t=>(e,n)=>Wp(e).filter(o=>Ka(D(o))).isSome()===t,jw=(t,e)=>(n,r)=>Wp(n).fold(mt(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,lO=t=>{const e=Wl(t.dom,t.selection.getStart());return we(e)},Kl=t=>jw("pre",t),zd=t=>(e,n)=>Lk(e)===t,cO=(t,e)=>{return Iw(n=t,Ik(n));var n},Ud=(t,e)=>e,dO=t=>{const e=Fn(t),n=Wl(t.dom,t.selection.getStart());return ct(n)&&t.schema.isValidChild(n.nodeName,e)},uO=t=>{const e=t.selection.getRng(),n=D(e.startContainer),r=$e(n,e.startOffset).map(o=>Ys(o)&&!co(o));return e.collapsed&&r.getOr(!0)},zr=(t,e)=>(n,r)=>yn(t,(o,s)=>o&&s(n,r),!0)?k.some(e):k.none(),Hd=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),ct(n)&&Id(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),ct(n)&&$l(e,t.fakeEventName))},zw=(t,e)=>{const n=()=>Hd(Mw,t,e),r=()=>Hd(Dw,t,e),o=(s=t,a=e,I1([zr([iO],yr.none()),zr([Kl(!0),lO],yr.none()),zr([jw("summary",!0)],yr.br()),zr([Kl(!0),zd(!1),Ud],yr.br()),zr([Kl(!0),zd(!1)],yr.block()),zr([Kl(!0),zd(!0),Ud],yr.block()),zr([Kl(!0),zd(!0)],yr.br()),zr([Fw(!0),Ud],yr.br()),zr([Fw(!0)],yr.block()),zr([cO],yr.br()),zr([Ud],yr.br()),zr([dO],yr.block()),zr([uO],yr.block())],[s,!(!a||!a.shiftKey)]).getOr(yr.none()));var s,a;switch(Mk(t)){case"linebreak":o.fold(n,n,_t);break;case"block":o.fold(r,r,_t);break;case"invert":o.fold(r,n,_t);break;default:o.fold(n,r,_t)}},Uw=Pn(),fO=Uw.os.isiOS()&&Uw.browser.isSafari(),Hw=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{zw(t,e)}))},mO=Pn(),qw=t=>t.stopImmediatePropagation(),$w=t=>t.keyCode===vt.PAGE_UP||t.keyCode===vt.PAGE_DOWN,Ww=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",qw,!0):!n&&t.get()&&e.off("NodeChange",qw),t.set(n)},Vw=(t,e)=>{const n=e.container(),r=e.offset();return ot(n)?(n.insertData(r,t),k.some(Y(n,r+t.length))):Lc(e).map(o=>{const s=le(t);return e.isAtEnd()?Ft(o,s):Bt(o,s),Y(s.dom,t.length)})},Kw=Et(Vw,cn),Xw=Et(Vw," "),Yw=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},pO=t=>{const e=Y.fromRangeStart(t.selection.getRng()),n=D(t.getBody());if(t.selection.isCollapsed()){const r=Et(Ca,t),o=Y.fromRangeStart(t.selection.getRng());return zo(r,t.getBody(),o).bind((s=>a=>a.fold(i=>dr(s.dom,Y.before(i)),i=>jn(i),i=>Xr(i),i=>er(s.dom,Y.after(i))))(n)).map(s=>()=>((a,i,l)=>c=>Pv(a,c,l)?Kw(i):Xw(i))(n,e,t.schema)(s).each(Yw(t)))}return k.none()},gO=t=>{return hs(ge.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const r=D(t.getBody());var o,s,a;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(o=r,s=Y.fromRangeStart(t.selection.getRng()),a=t.schema,Pv(o,s,a)?Kw(s):Xw(s)).each(Yw(t))});var e,n},hO=t=>W_(t)?[{keyCode:vt.TAB,action:qt(Zx,t,!0)},{keyCode:vt.TAB,shiftKey:!0,action:qt(Zx,t,!1)}]:[],bO=t=>{if(t.addShortcut("Meta+P","","mcePrint"),QR(t),jo(t))return gn(null);{const e=(t=>{const e=gn(null),n=Et(Ca,t);return t.on("NodeChange",r=>{ll(t)&&(((o,s,a)=>{const i=re(Mn(D(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),u=>u.dom),l=Vt(i,o),c=Vt(a,o);Z(ne(l,c),Et(sx,!1)),Z(ne(c,l),Et(sx,!0))})(n,t.dom,r.parents),((o,s)=>{const a=s.get();if(o.selection.isCollapsed()&&!o.composing&&a){const i=Y.fromRangeStart(o.selection.getRng());Y.isTextPosition(i)&&!Ku(l=i)&&!Xu(l)&&(Nd(o,((t,e)=>{return Y.isTextPosition(e)?(r=e,k0(n=t)&&r.container()===n?((o,s)=>{const a=N0(o.data.substr(0,s.offset())),i=N0(o.data.substr(s.offset()));return(a.text+i.text).length>0?(A0(o),Y(o,s.offset()-a.count)):s})(n,r):T0(n,r)):((n,r)=>r.container()===n.parentNode?((o,s)=>{const a=s.container(),i=((l,c)=>{const u=ue(l,c);return-1===u?k.none():k.some(u)})(Cn(a.childNodes),o).map(l=>l<s.offset()?Y(a,s.offset()-1):s).getOr(s);return fa(o),i})(n,r):T0(n,r))(t,e);var n,r})(a,i)),s.set(null))}var l})(t,e),((o,s,a,i)=>{if(s.selection.isCollapsed()){const l=Vt(i,o);Z(l,c=>{const u=Y.fromRangeStart(s.selection.getRng());zo(o,s.getBody(),u).bind(f=>ax(s,a,f))})}})(n,t,e,r.parents))}),e})(t);return(n=t).on("beforeinput",r=>{n.selection.isEditable()&&!_e(r.getTargetRanges(),o=>!Jb(n.dom,o))||r.preventDefault()}),(n=>{n.on("keyup compositionstart",Et(fR,n))})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=ge.os.isMacOS()||ge.os.isiOS();jl([{keyCode:vt.RIGHT,action:qt(Rx,s,!0)},{keyCode:vt.LEFT,action:qt(Rx,s,!1)},{keyCode:vt.UP,action:qt(Ox,s,!1)},{keyCode:vt.DOWN,action:qt(Ox,s,!0)},...l?[{keyCode:vt.UP,action:qt(Td,s,!1),metaKey:!0,shiftKey:!0},{keyCode:vt.DOWN,action:qt(Td,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:vt.RIGHT,action:qt(Yx,s,!0)},{keyCode:vt.LEFT,action:qt(Yx,s,!1)},{keyCode:vt.UP,action:qt(Tp,s,!1)},{keyCode:vt.DOWN,action:qt(Tp,s,!0)},{keyCode:vt.UP,action:qt(Tp,s,!1)},{keyCode:vt.UP,action:qt(Px,s,!1)},{keyCode:vt.DOWN,action:qt(Px,s,!0)},{keyCode:vt.RIGHT,action:qt(Fx,s,!0)},{keyCode:vt.LEFT,action:qt(Fx,s,!1)},{keyCode:vt.UP,action:qt(jx,s,!1)},{keyCode:vt.DOWN,action:qt(jx,s,!0)},{keyCode:vt.RIGHT,action:qt(ix,s,a,!0)},{keyCode:vt.LEFT,action:qt(ix,s,a,!1)},{keyCode:vt.RIGHT,ctrlKey:!l,altKey:l,action:qt(rR,s,a)},{keyCode:vt.LEFT,ctrlKey:!l,altKey:l,action:qt(oR,s,a)},{keyCode:vt.UP,action:qt(Dx,s,!1)},{keyCode:vt.DOWN,action:qt(Dx,s,!0)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{let o=!1;n.on("keydown",s=>{o=s.keyCode===vt.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===vt.BACKSPACE?"deleteContentBackward":"deleteContentForward",u=a.selection.isCollapsed(),f=u?"character":"selection",p=b=>u?b?"word":"line":"selection";Ix([{keyCode:vt.BACKSPACE,action:qt(wx,a)},{keyCode:vt.BACKSPACE,action:qt(up,a,!1)},{keyCode:vt.DELETE,action:qt(up,a,!0)},{keyCode:vt.BACKSPACE,action:qt(lp,a,!1)},{keyCode:vt.DELETE,action:qt(lp,a,!0)},{keyCode:vt.BACKSPACE,action:qt(xp,a,i,!1)},{keyCode:vt.DELETE,action:qt(xp,a,i,!0)},{keyCode:vt.BACKSPACE,action:qt(pm,a,!1)},{keyCode:vt.DELETE,action:qt(pm,a,!0)},{keyCode:vt.BACKSPACE,action:qt(Sa,a,!1,f)},{keyCode:vt.DELETE,action:qt(Sa,a,!0,f)},...Aw?[{keyCode:vt.BACKSPACE,altKey:!0,action:qt(Sa,a,!1,p(!0))},{keyCode:vt.DELETE,altKey:!0,action:qt(Sa,a,!0,p(!0))},{keyCode:vt.BACKSPACE,metaKey:!0,action:qt(Sa,a,!1,p(!1))}]:[{keyCode:vt.BACKSPACE,ctrlKey:!0,action:qt(Sa,a,!1,p(!0))},{keyCode:vt.DELETE,ctrlKey:!0,action:qt(Sa,a,!0,p(!0))}],{keyCode:vt.BACKSPACE,action:qt(mp,a,!1)},{keyCode:vt.DELETE,action:qt(mp,a,!0)},{keyCode:vt.BACKSPACE,action:qt(Sp,a,!1)},{keyCode:vt.DELETE,action:qt(Sp,a,!0)},{keyCode:vt.BACKSPACE,action:qt(ap,a,!1)},{keyCode:vt.DELETE,action:qt(ap,a,!0)},{keyCode:vt.BACKSPACE,action:qt(sp,a,!1)},{keyCode:vt.DELETE,action:qt(sp,a,!0)},{keyCode:vt.BACKSPACE,action:qt(wp,a,!1)},{keyCode:vt.DELETE,action:qt(wp,a,!0)},{keyCode:vt.BACKSPACE,action:qt(fp,a,!1)},{keyCode:vt.DELETE,action:qt(fp,a,!0)}],l).filter(b=>a.selection.isEditable()).each(b=>{l.preventDefault(),Id(a,c).isDefaultPrevented()||(b(),$l(a,c))})})(n,r,s)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(i=s,l=o,jl([{keyCode:vt.BACKSPACE,action:qt(N1,a=n)},{keyCode:vt.DELETE,action:qt(N1,a)},...Aw?[{keyCode:vt.BACKSPACE,altKey:!0,action:qt(Fl,a)},{keyCode:vt.DELETE,altKey:!0,action:qt(Fl,a)},...l?[{keyCode:tO?224:91,action:qt(Fl,a)}]:[]]:[{keyCode:vt.BACKSPACE,ctrlKey:!0,action:qt(Fl,a)},{keyCode:vt.DELETE,ctrlKey:!0,action:qt(Fl,a)}]],i)),o=!1})})(t,e),(n=>{let r=k.none();n.on("keydown",o=>{var s;o.keyCode===vt.ENTER&&(fO&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(ot(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(r=k.some((s=n).selection.getBookmark()),s.undoManager.add()):Hw(n,o))}),n.on("keyup",o=>{o.keyCode===vt.ENTER&&r.each(()=>{return a=o,(s=n).undoManager.undo(),r.fold(_t,i=>s.selection.moveToBookmark(i)),Hw(s,a),void(r=k.none());var s,a})})})(t),(n=>{n.on("keydown",r=>{var o,s;r.isDefaultPrevented()||(s=r,Ix([{keyCode:vt.SPACEBAR,action:qt(pO,o=n)},{keyCode:vt.SPACEBAR,action:qt(gO,o)}],s).each(a=>{s.preventDefault(),Id(o,"insertText",{data:" "}).isDefaultPrevented()||(a(),$l(o,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",r=>{r.isComposing||(o=>{const s=D(o.getBody());o.selection.isCollapsed()&&((t,e,n)=>{const r=e.container();if(!ot(r))return k.none();if((o=>{const s=o.container();return ot(s)&&fn(s.data,cn)})(e)){const o=Iv(t,r,!1,n)||(s=>{const a=s.data,i=(l=>{const c=l.split("");return re(c,(u,f)=>jc(u)&&f>0&&f<c.length-1&&Cf(c[f-1])&&Cf(c[f+1])?" ":u).join("")})(a);return i!==a&&(s.data=i,!0)})(r)||Fv(t,r,!1,n);return hs(o,e)}if(rm(t,e,n)){const o=Iv(t,r,!0,n)||Fv(t,r,!0,n);return hs(o,e)}return k.none()})(s,Y.fromRangeStart(o.selection.getRng()),o.schema).each(a=>{o.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",r=>{var s;r.isDefaultPrevented()||(s=r,jl([...hO(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=ge.os.isMacOS()||ge.os.isiOS();jl([{keyCode:vt.END,action:qt(Bx,s,!0)},{keyCode:vt.HOME,action:qt(Bx,s,!1)},...l?[]:[{keyCode:vt.HOME,action:qt(Td,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:vt.END,action:qt(Td,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:vt.END,action:qt(zx,s,!0)},{keyCode:vt.HOME,action:qt(zx,s,!1)},{keyCode:vt.END,action:qt(Ad,s,!0,a)},{keyCode:vt.HOME,action:qt(Ad,s,!1,a)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{if(mO.os.isMacOS())return;const o=gn(!1);n.on("keydown",s=>{$w(s)&&Ww(o,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,jl([{keyCode:vt.PAGE_UP,action:qt(Ad,a=n,!1,i=r)},{keyCode:vt.PAGE_DOWN,action:qt(Ad,a,!0,i)}],l)),$w(s)&&o.get()&&(Ww(o,n,!1),n.nodeChanged())})})(t,e),e}var n};class vO{constructor(e){let n;this.lastPath=[],this.editor=e;const r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",o=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==o.type&&jf(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{Gc(e),e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const o=e.selection.getStart(!0);o&&zc(e)&&!r.isSameElementPath(o)&&e.dom.isChildOf(o,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",o=>{!o.isDefaultPrevented()&&zc(e)&&("IMG"===e.selection.getNode().nodeName?Lr.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!g_(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const s=[];this.editor.dom.getParent(r,a=>a===o||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:s})}}isSameElementPath(e){let n;const r=this.editor,o=to(r.dom.getParents(e,je,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const Gw=tl("image"),Qp=tl("event"),qd=t=>e=>{e[Qp]=t},Qw=qd(0),yO=qd(2),CO=qd(1),Zp=tl("mode"),$d=t=>e=>{e[Zp]=t},Zw=(t,e)=>$d(e)(t),Jw=$d(0),Jp=$d(2),wO=$d(1),tE=t=>e=>k.from(e[Zp]).exists(r=>r===t),yi=tE(0),eE=tE(1),EO=["none","copy","link","move"],SO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],tg=()=>{const t=new window.DataTransfer;let e="move",n="all";const r={get dropEffect(){return e},set dropEffect(o){Ot(EO,o)&&(e=o)},get effectAllowed(){return n},set effectAllowed(o){(t=>k.from(t[Qp]).exists(n=>0===n))(r)&&Ot(SO,o)&&(n=o)},get items(){return o=r,s=t.items,{...s,get length(){return s.length},add:(a,i)=>{if(yi(o)){if(!Rt(a))return s.add(a);if(!Me(i))return s.add(a,i)}return null},remove:a=>{yi(o)&&s.remove(a)},clear:()=>{yi(o)&&s.clear()}};var o,s},get files(){return eE(r)?Object.freeze({length:0,item:o=>null}):t.files},get types(){return t.types},setDragImage:(o,s,a)=>{yi(r)&&(r[Gw]={image:o,x:s,y:a},t.setDragImage(o,s,a))},getData:o=>eE(r)?"":t.getData(o),setData:(o,s)=>{yi(r)&&t.setData(o,s)},clearData:o=>{yi(r)&&t.clearData(o)}};return Jw(r),r},nE=(t,e)=>t.setData("text/html",e),rE="x-tinymce/html",Wd=mt(rE),eg="\x3c!-- "+rE+" --\x3e",kO=t=>eg+t,oE=t=>-1!==t.indexOf(eg),sE="%MCEPASTEBIN%",ng=t=>t.dom.get("mcepastebin"),_O=t=>ct(t)&&"mcepastebin"===t.id,aE=t=>t===sE,iE=(t,e)=>(lt.each(e,n=>{t=Er(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),lE=t=>iE(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,r)=>n||r?cn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),cE=(t,e)=>({content:t,cancelled:e}),rg=(t,e)=>(t.insertContent(e,{merge:D_(t),paste:!0}),!0),og=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),NO=(t,e,n)=>{return!(t.selection.isCollapsed()||!og(e)||(r=t,o=e,s=n,r.undoManager.extra(()=>{s(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,s},AO=(t,e,n)=>{return r=t,!(!og(o=e)||!_e(E0(r),s=>$s(o.toLowerCase(),`.${s.toLowerCase()}`)))&&((r,o,s)=>(r.undoManager.extra(()=>{s(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(t,e,n);var r,o},TO=(()=>{let e=0;return()=>"mceclip"+e++})(),RO=t=>{const e=tg();return nE(e,t),Jp(e),e},dE=(t,e,n,r,o)=>{const s=((c,u,f)=>{const p=c.dispatch("PastePreProcess",{content:u,internal:f}),b=((g,v)=>{const h=ui({sanitize:w0(g),sandbox_iframes:S0(g),sandbox_iframes_exclusions:uf(g),convert_unsafe_embeds:X_(g)},g.schema);h.addNodeFilter("meta",E=>{lt.each(E,S=>{S.remove()})});const C=h.parse(v,{forced_root_block:!1,isRootContent:!0});return Ts({validate:!0},g.schema).serialize(C)})(c,p.content);return c.hasEventListeners("PastePostProcess")&&!p.isDefaultPrevented()?((g,v,h)=>{const C=g.dom.create("div",{style:"display:none"},v),E=g.dispatch("PastePostProcess",{node:C,internal:h});return cE(E.node.innerHTML,E.isDefaultPrevented())})(c,b,f):cE(b,p.isDefaultPrevented())})(t,e,n);if(!s.cancelled){const a=s.content,i=()=>{return l=t,c=a,void(r||!P_(l)?rg(l,c):(f=l,p=c,lt.each([NO,AO,rg],b=>!b(f,p,rg))));var l,c,f,p};o?Id(t,"insertFromPaste",{dataTransfer:RO(a)}).isDefaultPrevented()||(i(),$l(t,"insertFromPaste")):i()}},Vd=(t,e,n,r)=>{const o=n||oE(e);dE(t,e.replace(eg,""),o,!1,r)},sg=(t,e,n)=>{const r=t.dom.encode(e).replace(/\r\n/g,"\n"),o=((s,a,i)=>{const l=s.split(/\n\n/),c=((p,b)=>{let g="<"+p;const v=No(b,(h,C)=>C+'="'+oa.encodeAllRaw(h)+'"');return v.length&&(g+=" "+v.join(" ")),g+">"})(a,i),u="</"+a+">",f=re(l,p=>p.split(/\n/).join("<br />"));return 1===f.length?f[0]:re(f,p=>c+p+u).join("")})(Bg(r,M_(t)),Fn(t),il(t));dE(t,o,!1,!0,n)},uE=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const r=t.types[n];try{e[r]=t.getData(r)}catch{e[r]=""}}return e},Ps=(t,e)=>e in t&&t[e].length>0,fE=t=>Ps(t,"text/html")||Ps(t,"text/plain"),mE=(t,e,n)=>{const r="paste"===e.type?e.clipboardData:e.dataTransfer;var o;if(Dc(t)&&r){const s=((a,i)=>{const l=i.items?Qe(Cn(i.items),u=>"file"===u.kind?[u.getAsFile()]:[]):[],c=i.files?Cn(i.files):[];return Vt(l.length>0?l:c,(u=>{const f=E0(u);return p=>Ve(p.type,"image/")&&_e(f,b=>(g=>{const v=g.toLowerCase(),h={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return lt.hasOwn(h,v)?"image/"+h[v]:"image/"+v})(b)===p.type)})(a))})(t,r);if(s.length>0)return e.preventDefault(),(o=s,Promise.all(re(o,a=>oC(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),Z(a,i=>{var l,c;l=t,Mm((c=i).uri).each(({data:u,type:f,base64Encoded:p})=>{const b=p?u:btoa(u),g=c.file,v=l.editorUpload.blobCache,C=v.getByData(b,f)??((E,S,N,A)=>{const R=TO(),M=d0(E)&&ct(N.name),P=M?((B,I)=>{const j=I.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ct(j)?B.dom.encode(j[1]):void 0})(E,N.name):R,$=S.create(R,N,A,P,M?N.name:void 0);return S.add($),$})(l,v,g,b);Vd(l,`<img src="${C.blobUri()}">`,!1,!0)})})}),!0}return!1},ag=(t,e,n,r,o)=>{let s=lE(n);const a=Ps(e,Wd())||oE(n),i=!a&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=og(s);(aE(s)||!s.length||i&&!l)&&(r=!0),(r||l)&&(s=Ps(e,"text/plain")&&i?e["text/plain"]:(c=>{const u=ws(),f=ui({},u);let p="";const b=u.getVoidElements(),g=lt.makeMap("script noscript style textarea video audio iframe object"," "),v=u.getBlockElements(),h=C=>{const E=C.name,S=C;if("br"!==E){if("wbr"!==E)if(b[E]&&(p+=" "),g[E])p+=" ";else{if(3===C.type&&(p+=C.value),!(C.name in u.getVoidElements())){let N=C.firstChild;if(N)do{h(N)}while(N=N.next)}v[E]&&S.next&&(p+="\n","p"===E&&(p+="\n"))}}else p+="\n"};return c=iE(c,[/<!\[[^\]]+\]>/g]),h(f.parse(c)),p})(s)),aE(s)||(r?sg(t,s,o):Vd(t,s,a,o))},pE=(t,e,n,r)=>{((o,s,a)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",s),o.setData("text/plain",a),o.setData(Wd(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),r()):n(e.html,r)},gE=t=>(e,n)=>{const{dom:r,selection:o}=t,s=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},e);r.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),r.add(t.getBody(),s);const i=o.getRng();a.focus();const l=r.createRng();l.selectNodeContents(a),o.setRng(l),Lr.setEditorTimeout(t,()=>{o.setRng(i),r.remove(s),n()},0)},hE=t=>({html:kO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),bE=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},vE=(t,e)=>{var n,r;return va.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(r=e.clientY)&&void 0!==r?r:0,t.getDoc())},yE=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},BO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,CE=t=>lt.trim(t).replace(BO,Vi).toLowerCase(),DO=(t,e,n)=>{const r=O_(t);if(n||"all"===r||!B_(t))return e;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,u)=>{const f=s.parseStyle(s.decode(c)),p={};for(let g=0;g<o.length;g++){const v=f[o[g]];let h=v,C=s.getStyle(a,o[g],!0);/color/.test(o[g])&&(h=CE(h),C=CE(C)),C!==h&&(p[o[g]]=v)}const b=s.serializeStyle(p,"span");return b?l+' style="'+b+'"'+u:l+u})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},LO=He,xE=ot,MO=t=>Pe(t.dom),wE=t=>e=>zt(D(t),e),EE=(t,e)=>Zn(D(t),MO,wE(e)),SE=(t,e,n)=>{const r=new pn(t,e),o=n?r.next.bind(r):r.prev.bind(r);let s=t;for(let a=n?t:o();a&&!LO(a);a=o())po(a)&&(s=a);return s};var Ci;!function(t){t.Before="before",t.After="after"}(Ci||(Ci={}));const FO=(t,e)=>Math.abs(t.left-e),jO=(t,e)=>Math.abs(t.right-e),UO=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),ig=(t,e,n,r)=>{const o=u=>po(u.node)?k.some(u):Nt(u.node)?ig(Cn(u.node.childNodes),e,n,!1):k.none(),s=(u,f)=>{const p=Wo(u,(b,g)=>f(b,e,n)-f(g,e,n));return Yn(p,o).map(b=>{return r&&!ot(b.node)&&p.length>1?(g=b,v=p[1],h=f,o(v).filter(C=>Math.abs(h(g,e,n)-h(C,e,n))<2&&ot(C.node))).getOr(b):b;var g,v,h})},[a,i]=((t,e)=>{return(n=Vt(t,n=>{return(r=e)>=(o=n).top&&r<=o.bottom;var r,o}),yn(n,(r,o)=>r.fold(()=>k.some(o),s=>{const a=Math.min(o.left,s.left),i=Math.min(o.top,s.top),l=Math.max(o.right,s.right),c=Math.max(o.bottom,s.bottom);return k.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}),k.none())).fold(()=>[[],t],n=>{const{pass:r,fail:o}=Ur(t,s=>((a,i)=>{const l=(c=a,u=i,Math.max(0,Math.min(c.bottom,u.bottom)-Math.max(c.top,u.top))/Math.min(a.height,i.height));var c,u;return((c,u)=>c.top<u.bottom&&c.bottom>u.top)(a,i)&&l>.5})(s,n));return[r,o]});var n})(Z1(t),n),{pass:l,fail:c}=Ur(i,u=>u.top<n);return s(a,UO).orThunk(()=>s(c,Rh)).orThunk(()=>s(l,Rh))},kE=(t,e,n)=>((r,o,s)=>{const a=D(r),l=((t,e,n)=>k.from(t.dom.elementFromPoint(e,n)).map(J))(Le(a),o,s).filter(c=>kn(a,c)).getOr(a);return((c,u,f,p)=>{const b=(g,v)=>{const h=Vt(g.dom.childNodes,yo(C=>Nt(C)&&C.classList.contains("mce-drag-container")));return v.fold(()=>ig(h,f,p,!0),C=>{const E=Vt(h,S=>S!==C.dom);return ig(E,f,p,!0)}).orThunk(()=>(zt(g,c)?k.none():ar(g)).bind(C=>b(C,k.some(g))))};return b(u,k.none())})(a,l,o,s)})(t,e,n).filter(r=>dl(r.node)).map(r=>{return{node:(o=r).node,position:FO(o,s=e)<jO(o,s)?Ci.Before:Ci.After};var o,s}),_E=t=>{var e,n;const r=t.getBoundingClientRect(),o=t.ownerDocument,s=o.documentElement,a=o.defaultView;return{top:r.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:r.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},NE=t=>({target:t,srcElement:t}),AE=Pe,qO=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(AE,Kr),$O=(t,e,n,r)=>{const o=t.dom,s=e.cloneNode(!0);o.setStyles(s,{width:n,height:r}),o.setAttrib(s,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},Kd=(t,e)=>n=>()=>{const r="left"===t?n.scrollX:n.scrollY;n.scroll({[t]:r+e,behavior:"smooth"})},TE=Kd("left",-32),RE=Kd("left",32),OE=Kd("top",-32),BE=Kd("top",32),DE=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Xl=(t,e,n,r,o)=>{"dragstart"===e&&nE(r,t.dom.getOuterHTML(n));const s=((t,e,n,r)=>{const o=((s,a)=>{const i=(l=>{const c=tg(),u=k.from(l[Zp]);return Jp(l),Qw(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(f=l,k.from(f[Gw])).each(f=>c.setDragImage(f.image,f.x,f.y)),Z(l.types,f=>{"Files"!==f&&c.setData(f,l.getData(f))}),Z(l.files,f=>c.items.add(f)),(f=>k.from(f[Qp]))(l).each(f=>{var p;p=c,qd(f)(p)}),u.each(f=>{Zw(l,f),Zw(c,f)}),c;var f})(s);return"dragstart"===a?(Qw(i),Jw(i)):"drop"===a?(yO(i),Jp(i)):(CO(i),wO(i)),i})(n,t);return Me(r)?((s,a,i)=>{const l=mr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:_t,stopImmediatePropagation:_t,stopPropagation:_t,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...NE(a)}})(t,e,o):(s=t,a=r,i=e,l=o,{...a,dataTransfer:l,type:s,...NE(i)});var s,a,i,l})(e,n,r,o);return t.dispatch(e,s)},PE=(t,e,n)=>{t.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>Xl(e,"dragend",r.element,r.dataTransfer),o=>Xl(e,"dragend",r.element,r.dataTransfer,o))}),LE(t)},LE=t=>{t.on(e=>{e.intervalId.clear(),DE(e.ghost)}),t.clear()},Yl=Pe,ME=(t,e)=>xa(t.getBody(),e),KO=t=>{const e=t.selection,n=t.dom,r=t.getBody(),o=((t,e,n,r)=>{const o=ns();let s,a;const i=Fn(t),l=t.dom,c=()=>{(u=>{var f,p;const b=Mn(D(u),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<b.length;g++){const v=b[g].dom;let h=v.previousSibling;if(_c(h)){const C=h.data;1===C.length?null===(f=h.parentNode)||void 0===f||f.removeChild(h):h.deleteData(C.length-1,1)}h=v.nextSibling,kc(h)&&(1===h.data.length?null===(p=h.parentNode)||void 0===p||p.removeChild(h):h.deleteData(0,1))}})(e),a&&(fa(a),a=null),o.on(u=>{l.remove(u.caret),o.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(u,f)=>{let p;if(c(),eN(f))return null;if(!n(f))return a=((b,g)=>{var v;const h=(null!==(v=b.ownerDocument)&&void 0!==v?v:document).createTextNode(hn),C=b.parentNode;if(g){const E=b.previousSibling;if(Ya(E)){if(Rr(E))return E;if(_c(E))return E.splitText(E.data.length-1)}C?.insertBefore(h,b)}else{const E=b.nextSibling;if(Ya(E)){if(Rr(E))return E;if(kc(E))return E.splitText(1),E}b.nextSibling?C?.insertBefore(h,b.nextSibling):C?.appendChild(h)}return h})(f,u),p=f.ownerDocument.createRange(),cl(a.nextSibling)?(p.setStart(a,0),p.setEnd(a,0)):(p.setStart(a,1),p.setEnd(a,1)),p;{const b=((h,C,E)=>{var S;const N=(null!==(S=C.ownerDocument)&&void 0!==S?S:document).createElement(h);N.setAttribute("data-mce-caret",E?"before":"after"),N.setAttribute("data-mce-bogus","all"),N.appendChild(Xa().dom);const A=C.parentNode;return E?A?.insertBefore(N,C):C.nextSibling?A?.insertBefore(N,C.nextSibling):A?.appendChild(N),N})(i,f,u),g=R0(e,f,u);l.setStyle(b,"top",g.top),l.setStyle(b,"caret-color","transparent"),a=b;const v=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(v,{...g}),l.add(e,v),o.set({caret:v,element:f,before:u}),u&&l.addClass(v,"mce-visual-caret-before"),s=setInterval(()=>{o.on(h=>{r()?l.toggleClass(h.caret,"mce-visual-caret-hidden"):l.addClass(h.caret,"mce-visual-caret-hidden")})},500),p=f.ownerDocument.createRange(),p.setStart(b,0),p.setEnd(b,0)}return p},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(u=>{const f=R0(e,u.element,u.before);l.setStyles(u.caret,{...f})})},destroy:()=>clearInterval(s)}})(t,r,n.isBlock,()=>li(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=h=>h!==r&&(Yl(h)||Bo(h))&&n.isChildOf(h,r)&&n.isEditable(h.parentNode),c=(h,C,E,S=!0)=>t.dispatch("ShowCaret",{target:C,direction:h,before:E}).isDefaultPrevented()?null:(S&&e.scrollIntoView(C,-1===h),o.show(E,C)),u=h=>Rr(h)||kc(h)||_c(h),f=h=>u(h.startContainer)||u(h.endContainer),b=(h,C)=>{if(!h)return null;if(h.collapsed){if(!f(h)){const A=C?1:-1,R=pl(A,r,h),M=R.getNode(!C);if(ct(M)){if(dl(M))return c(A,M,!!C&&!R.isAtEnd(),!1);if(Ss(M)&&Pe(M.nextSibling)){const z=n.createRng();return z.setStart(M,0),z.setEnd(M,0),z}}const P=R.getNode(C);if(ct(P)){if(dl(P))return c(A,P,!C&&!R.isAtEnd(),!1);if(Ss(P)&&Pe(P.previousSibling)){const z=n.createRng();return z.setStart(P,1),z.setEnd(P,1),z}}}return null}let E=h.startContainer,S=h.startOffset;const N=h.endOffset;if(ot(E)&&0===S&&Yl(E.parentNode)&&(E=E.parentNode,S=n.nodeIndex(E),E=E.parentNode),!Nt(E))return null;if(N===S+1&&E===h.endContainer){const A=E.childNodes[S];if(l(A))return(R=>{const M=R.cloneNode(!0),P=t.dispatch("ObjectSelected",{target:R,targetClone:M});if(P.isDefaultPrevented())return null;const z=((B,I)=>{const j=D(t.getBody()),G=t.getDoc(),st=Zo(j,"#"+s).getOrThunk(()=>{const At=ut('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',G);return Ze(At,"id",s),St(j,At),At}),rt=n.createRng();fe(st),de(st,[le(cn,G),D(I),le(cn,G)]),rt.setStart(st.dom.firstChild,1),rt.setEnd(st.dom.lastChild,0),Zs(st,{top:n.getPos(B,t.getBody()).y+"px"}),Wb(st);const xt=e.getSel();return xt&&(xt.removeAllRanges(),xt.addRange(rt)),rt})(R,P.targetClone),$=D(R);return Z(Mn(D(t.getBody()),`*[${a}]`),B=>{zt($,B)||m(B,a)}),n.getAttrib(R,a)||R.setAttribute(a,"1"),i=R,v(),z})(A)}return null},g=()=>{i&&i.removeAttribute(a),Zo(D(t.getBody()),"#"+s).each(Gt),i=null},v=()=>{o.hide()};return jo(t)||(t.on("click",h=>{n.isEditable(h.target)||(h.preventDefault(),t.focus())}),t.on("blur NewBlock",g),t.on("ResizeWindow FullscreenStateChanged",o.reposition),t.on("tap",h=>{const C=h.target,E=ME(t,C);Yl(E)?(h.preventDefault(),Pl(t,E).each(b)):l(C)&&Pl(t,C).each(b)},!0),t.on("mousedown",h=>{const C=h.target;if(C!==r&&"HTML"!==C.nodeName&&!n.isChildOf(C,r)||!((S,N,A)=>{const R=D(S.getBody()),M=S.inline?R:D(Le(R).dom.documentElement),P=((z,$,B,I)=>{const j=$.dom.getBoundingClientRect();return{x:B-(z?j.left+$.dom.clientLeft+CT($):0),y:I-(z?j.top+$.dom.clientTop+yT($):0)}})(S.inline,M,N,A);return((z,$,B)=>{const I=bT(z),j=vT(z);return $>=0&&B>=0&&$<=I&&B<=j})(M,P.x,P.y)})(t,h.clientX,h.clientY))return;g(),v();const E=ME(t,C);Yl(E)?(h.preventDefault(),Pl(t,E).each(b)):kE(r,h.clientX,h.clientY).each(S=>{var N;h.preventDefault(),(N=c(1,S.node,S.position===Ci.Before,!1))&&e.setRng(N),ts(E)?E.focus():t.getBody().focus()})}),t.on("keypress",h=>{vt.modifierPressed(h)||Yl(e.getNode())&&h.preventDefault()}),t.on("GetSelectionRange",h=>{let C=h.range;if(i){if(!i.parentNode)return void(i=null);C=C.cloneRange(),C.selectNode(i),h.range=C}}),t.on("SetSelectionRange",h=>{h.range=(h=>{const C=t.schema.getVoidElements(),E=n.createRng(),S=h.startContainer,N=h.startOffset,A=h.endContainer,R=h.endOffset;return Ut(C,S.nodeName.toLowerCase())?0===N?E.setStartBefore(S):E.setStartAfter(S):E.setStart(S,N),Ut(C,A.nodeName.toLowerCase())?0===R?E.setEndBefore(A):E.setEndAfter(A):E.setEnd(A,R),E})(h.range);const C=b(h.range,h.forward);C&&(h.range=C)}),t.on("AfterSetSelectionRange",h=>{const C=h.range,E=C.startContainer.parentElement;var S,N;f(C)||Nt(S=E)&&"mcepastebin"===S.id||v(),ct(N=E)&&n.hasClass(N,"mce-offscreen-selection")||g()}),(t=>{const e=ns(),n=Re.DOM,r=document,o=((l,c)=>u=>{if(0===u.button){const f=Ge(c.dom.getParents(u.target),qO).getOr(null);if(ct(f)&&(p=c.dom,b=c.getBody(),AE(g=f)&&g!==b&&p.isEditable(g.parentElement))){const p=c.dom.getPos(f),b=c.getBody(),g=c.getDoc().documentElement;l.set({element:f,dataTransfer:tg(),dragging:!1,screenX:u.screenX,screenY:u.screenY,maxX:(c.inline?b.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?b.scrollHeight:g.offsetHeight)-2,relX:u.pageX-p.x,relY:u.pageY-p.y,width:f.offsetWidth,height:f.offsetHeight,ghost:$O(c,f,f.offsetWidth,f.offsetHeight),intervalId:XS(100)})}}var p,b,g})(e,t),s=((t,e)=>{const n=wc((o,s)=>{return i=o,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void kE(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),c=>{const u=a._selectionOverrides.showCaret(1,c.node,c.position===Ci.Before,!1);u?a.selection.setRng(u):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const r=t;return o=>t.on(s=>{const a=Math.max(Math.abs(o.screenX-s.screenX),Math.abs(o.screenY-s.screenY));if(!s.dragging&&a>10){const c=Xl(e,"dragstart",s.element,s.dataTransfer,o);if(ct(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const c=o.currentTarget===e.getDoc().documentElement,u=((f,p)=>({pageX:p.pageX-f.relX,pageY:p.pageY+5}))(s,(p=o,b=(h=f=e).inline?_E(h.getBody()):{left:0,top:0},g=(h=>{const C=h.getBody();return h.inline?{left:C.scrollLeft,top:C.scrollTop}:{left:0,top:0}})(f),v=((h,C)=>{if(C.target.ownerDocument!==h.getDoc()){const E=_E(h.getContentAreaContainer()),S=(N=>{const A=N.getBody(),R=N.getDoc().documentElement;return N.inline?{left:A.scrollLeft,top:A.scrollTop}:{left:A.scrollLeft||R.scrollLeft,top:A.scrollTop||R.scrollTop}})(h);return{left:C.pageX-E.left+S.left,top:C.pageY-E.top+S.top}}return{left:C.pageX,top:C.pageY}})(f,p),{pageX:v.left-b.left+g.left,pageY:v.top-b.top+g.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((f,p,b,g,v,h,C,E,S,N,A,R)=>{let M=0,P=0;f.style.left=p.pageX+"px",f.style.top=p.pageY+"px",p.pageX+b>v&&(M=p.pageX+b-v),p.pageY+g>h&&(P=p.pageY+g-h),f.style.width=b-M+"px",f.style.height=g-P+"px";const z=S.clientHeight,$=S.clientWidth,B=C+S.getBoundingClientRect().top,I=E+S.getBoundingClientRect().left;A.on(j=>{j.intervalId.clear(),j.dragging&&R&&(C+8>=z?j.intervalId.set(BE(N)):C-8<=0?j.intervalId.set(OE(N)):E+8>=$?j.intervalId.set(RE(N)):E-8<=0?j.intervalId.set(TE(N)):B+16>=window.innerHeight?j.intervalId.set(BE(window)):B-16<=0?j.intervalId.set(OE(window)):I+16>=window.innerWidth?j.intervalId.set(RE(window)):I-16<=0&&j.intervalId.set(TE(window)))})})(s.ghost,u,s.width,s.height,s.maxX,s.maxY,o.clientY,o.clientX,e.getContentAreaContainer(),e.getWin(),r,c),n.throttle(o.clientX,o.clientY)}var f,p,h,b,g,v,i,l})})(e,t),a=((l,c)=>u=>{l.on(f=>{var p,b,g,v;if(f.intervalId.clear(),f.dragging){if(b=c,g=(b=>{const g=b.getSel();if(ct(g)){const v=g.getRangeAt(0).startContainer;return ot(v)?v.parentNode:v}return null})(c.selection),v=f.element,!we(g)&&g!==v&&!b.dom.isChildOf(g,v)&&b.dom.isEditable(g)){const b=null!==(p=c.getDoc().elementFromPoint(u.clientX,u.clientY))&&void 0!==p?p:c.getBody();Xl(c,"drop",b,f.dataTransfer,u).isDefaultPrevented()||c.undoManager.transact(()=>{((g,v)=>{const h=g.getParent(v.parentNode,g.isBlock);DE(v),h&&h!==g.getRoot()&&g.isEmpty(h)&&Es(D(h))})(c.dom,f.element),(g=>{const v=g.getData("text/html");return""===v?k.none():k.some(v)})(f.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}Xl(c,"dragend",c.getBody(),f.dataTransfer,u)}}),LE(l)})(e,t),i=((l,c)=>u=>PE(l,c,k.some(u)))(e,t);t.on("mousedown",o),t.on("mousemove",s),t.on("mouseup",a),n.bind(r,"mousemove",s),n.bind(r,"mouseup",i),t.on("remove",()=>{n.unbind(r,"mousemove",s),n.unbind(r,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===vt.ESC&&PE(e,t,k.none())})})(h=t),v_(h)&&(C=>{const E=A=>{if(!A.isDefaultPrevented()){const R=A.dataTransfer;R&&(Ot(R.types,"Files")||R.files.length>0)&&(A.preventDefault(),"drop"===A.type&&Cd(C,"Dropped file type is not supported"))}},S=A=>{Qc(C,A.target)&&E(A)},N=()=>{const A=Re.DOM,R=C.dom,M=document,P=C.inline?C.getBody():C.getDoc(),z=["drop","dragover"];Z(z,$=>{A.bind(M,$,S),R.bind(P,$,E)}),C.on("remove",()=>{Z(z,$=>{A.unbind(M,$,S),R.unbind(P,$,E)})})};C.on("init",()=>{Lr.setEditorTimeout(C,N,0)})})(h),(h=>{const C=wc(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const E=h.selection.getRng();if(E.collapsed){const S=ip(h,E,!1);h.selection.setRng(S)}}},0);h.on("focus",()=>{C.throttle()}),h.on("blur",()=>{C.cancel()})})(t),(h=>{h.on("init",()=>{h.on("focusin",C=>{const E=C.target;if(Bo(E)){const S=xa(h.getBody(),E),N=Pe(S)?S:E;h.selection.getNode()!==N&&Pl(h,N).each(A=>h.selection.setRng(A))}})})})(t)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&(Yu(h),e.scrollIntoView(h))},hideFakeCaret:v,destroy:()=>{o.destroy(),i=null}};var h},XO=(t,e)=>{let n=e;for(let r=t.previousSibling;ot(r);r=r.previousSibling)n+=r.data.length;return n},IE=(t,e,n,r,o)=>{if(ot(n)&&(r<0||r>n.data.length))return[];const s=o&&ot(n)?[XO(n,r)]:[r];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,o)),a=a.parentNode;return a===e?s.reverse():[]},lg=(t,e,n,r,o,s,a=!1)=>({start:IE(t,e,n,r,a),end:IE(t,e,o,s,a)}),FE=(t,e)=>{const n=e.slice(),r=n.pop();return x(r)?yn(n,(o,s)=>o.bind(a=>k.from(a.childNodes[s])),k.some(t)).bind(o=>ot(o)&&(r<0||r>o.data.length)?k.none():k.some({node:o,offset:r})):k.none()},jE=(t,e)=>FE(t,e.start).bind(({node:n,offset:r})=>FE(t,e.end).map(({node:o,offset:s})=>{const a=document.createRange();return a.setStart(n,r),a.setEnd(o,s),a})),xi=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const r=e.parentNode;t.remove(e,ot(e.firstChild)&&qa(e.firstChild.data)),xi(t,r,n)}},Xd=(t,e,n,r=!0)=>{const o=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),r&&!n(e.startContainer)&&(ot(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),ot(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),xi(t,o,n),o!==s&&xi(t,s,n))},Yd=(t,e)=>k.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),cg=(t,e,n)=>{const r=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:n0(r).concat(t.blockPatterns),inlinePatterns:r0(r).concat(t.inlinePatterns)}},dg=(t,e,n,r)=>{const o=t.createRng();return o.setStart(e,0),o.setEnd(n,r),o.toString()},zE=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),Gd=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},UE=(t,e,n)=>{const r=jE(t.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,s=r.endContainer,a=0===r.endOffset?s:s.splitText(r.endOffset),i=0===r.startOffset?o:o.splitText(r.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(zE(t,e+"-end"),a),start:l.insertBefore(zE(t,e+"-start"),i)}},HE=(t,e,n)=>{xi(t,t.get(e.prefix+"-end"),n),xi(t,t.get(e.prefix+"-start"),n)},ug=t=>0===t.start.length,qE=(t,e,n,r)=>{const o=e.start;var s;return Bp(t,r.container,r.offset,(s=o,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),u=l.lastIndexOf(s);return-1!==u?u+s.length:-1!==c?c+1:-1}),n).bind(a=>{var i,l;const c=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(o))&&void 0!==l?l:-1;if(-1!==c&&a.offset>=c+o.length){const u=t.createRng();return u.setStart(a.container,a.offset-o.length),u.setEnd(a.container,a.offset),k.some(u)}return Op(a.container,a.offset-o.length,n).map(f=>{const p=t.createRng();return p.setStart(f.container,f.offset),p.setEnd(a.container,a.offset),p}).filter(f=>f.toString()===o).orThunk(()=>qE(t,e,n,vo(a.container,0)))})},YO=(t,e,n,r)=>{const o=t.dom,s=o.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Op(i,l-n.pattern.end.length,e).bind(c=>{const u=lg(o,s,c.container,c.offset,i,l,r);if(ug(a))return k.some({matches:[{pattern:a,startRng:u,endRng:u}],position:c});{const f=Qd(t,n.remainingPatterns,c.container,c.offset,e,r),p=f.getOr({matches:[],position:c}),b=p.position;return((v,h,C,E,S,N=!1)=>{if(0===h.start.length&&!N){const A=v.createRng();return A.setStart(C,E),A.setEnd(C,E),k.some(A)}return Rp(C,E,S).bind(A=>qE(v,h,S,A).bind(R=>{var M;return N&&(R.endContainer===A.container&&R.endOffset===A.offset||0===A.offset&&(null===(M=R.endContainer.textContent)||void 0===M?void 0:M.length)===R.endOffset)?k.none():k.some(R)}))})(o,a,b.container,b.offset,e,f.isNone()).map(v=>{const h=((C,E,S,N=!1)=>lg(C,E,S.startContainer,S.startOffset,S.endContainer,S.endOffset,N))(o,s,v,r);return{matches:p.matches.concat([{pattern:a,startRng:h,endRng:u}]),position:vo(v.startContainer,v.startOffset)}})}})},Qd=(t,e,n,r,o,s)=>{const a=t.dom;return Rp(n,r,a.getRoot()).bind(i=>{const l=dg(a,o,n,r);for(let c=0;c<e.length;c++){const u=e[c];if(!$s(l,u.end))continue;const f=e.slice();f.splice(c,1);const p=YO(t,o,{pattern:u,remainingPatterns:f,position:i},s);if(p.isNone()&&r>0)return Qd(t,e,n,r-1,o,s);if(p.isSome())return p}return k.none()})},$E=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?Z(e.format,r=>{t.formatter.apply(r)}):t.execCommand(e.cmd,!1,e.value)},WE=(t,e,n,r,o,s)=>{var a;return((i,l)=>{const c=or(i,u=>_e(l,f=>u.pattern.start===f.pattern.start&&u.pattern.end===f.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(Qd(t,o.inlinePatterns,n,r,e,s).fold(()=>[],i=>i.matches),Qd(t,(a=o.inlinePatterns,Wo(a,(i,l)=>l.end.length-i.end.length)),n,r,e,s).fold(()=>[],i=>i.matches))},VE=(t,e)=>{if(0===e.length)return;const n=t.dom,r=t.selection.getBookmark(),o=((s,a)=>{const i=tl("mce_textpattern"),l=$o(a,(c,u)=>{const f=UE(s,i+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return $o(l,(c,u)=>{const f=l.length-c.length-1,p=ug(u.pattern)?u.endMarker:UE(s,i+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:p}])},[])})(n,e);Z(o,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;ug(s.pattern)?((l,c,u,f)=>{const p=Gd(l.dom,u);Xd(l.dom,p,f),$E(l,c,p)})(t,s.pattern,s.endMarker,i):((l,c,u,f,p)=>{const b=l.dom,g=Gd(b,f),v=Gd(b,u);Xd(b,v,p),Xd(b,g,p);const C=Gd(b,{prefix:u.prefix,start:u.end,end:f.start});$E(l,c,C)})(t,s.pattern,s.startMarker,s.endMarker,i),HE(n,s.endMarker,i),HE(n,s.startMarker,i)}),t.selection.moveToBookmark(r)},KE=(t,e,n)=>((r,o,s)=>{if(ot(r)&&0>=r.length)return k.some(vo(r,0));{const a=la(Rd);return k.from(a.forwards(r,0,Od(r),s)).map(i=>vo(i.container,0))}})(e,0,e).map(r=>{const o=r.container;return Jx(o,n.start.length,e).each(s=>{const a=t.createRng();a.setStart(o,0),a.setEnd(s.container,s.offset),Xd(t,a,i=>i===e)}),o}),XE=t=>(e,n)=>{const o=n.pattern,s=jE(e.dom.getRoot(),n.range).getOrDie("Unable to resolve path range");return Yd(e,s).each(a=>{"block-format"===o.type?((i,l)=>{const c=l.get(i);return it(c)&&Sn(c).exists(u=>Ut(u,"block"))})(o.format,e.formatter)&&e.undoManager.transact(()=>{t(e.dom,a,o),e.formatter.apply(o.format)}):"block-command"===o.type&&e.undoManager.transact(()=>{t(e.dom,a,o),e.execCommand(o.cmd,!1,o.value)})}),!0},YE=t=>(e,n)=>{const r=Wo(e,(a,i)=>i.start.length-a.start.length),o=n.replace(cn," ");return Ge(r,s=>t(s,n,o))},GE=(t,e)=>(n,r,o,s,a)=>{var i;void 0===a&&(a=null!==(i=r.textContent)&&void 0!==i?i:"");const l=n.dom,c=Fn(n);return l.is(r,c)?t(o.blockPatterns,a).map(u=>e&&lt.trim(a).length===u.start.length?[]:[{pattern:u,range:lg(l,l.getRoot(),r,0,r,0,s)}]).getOr([]):[]},GO=XE((t,e,n)=>{KE(t,e,n).each(r=>{const o=D(r),s=el(o);/^\s[^\s]/.test(s)&&Sh(o,s.slice(1))})}),QO=YE((t,e,n)=>0===e.indexOf(t.start)||0===n.indexOf(t.start)),ZO=GE(QO,!0),JO=XE(KE),tB=YE((t,e,n)=>e===t.start||n===t.start),eB=GE(tB,!1),QE=(t,e,n)=>{for(let r=0;r<t.length;r++)if(n(t[r],e))return!0;return!1},fg=Re.DOM,oB=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,mg=t=>_o(t,e=>!1===Me(e)),ZE=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return mg({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_unsafe_embeds:e("convert_unsafe_embeds"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:oB(t),sandbox_iframes:e("sandbox_iframes"),sandbox_iframes_exclusions:uf(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},JE=t=>{const e=t.options.get;return mg({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},pg=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,tS=t=>{const e=pg(t),n=p0(t),r=t.contentCSS,o=()=>{e.unloadAll(r),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?o():t.on("remove",o)};if(t.contentStyles.length>0){let l="";lt.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,c,u)=>{const{pass:f,fail:p}=Ur(c,v=>tinymce.Resource.has(np(v))),g=[...f.map(v=>{const h=tinymce.Resource.get(np(v));return Rt(h)?Promise.resolve(pg(l).loadRawCss(v,h)):Promise.resolve()}),pg(l).loadAll(p)];return l.inline?g:g.concat([l.ui.styleSheetLoader.loadAll(u)])})(t,r,n)).then(s).catch(s),i=Qk(t);return i&&((l,c)=>{const u=D(l.getBody()),f=Ye(Ie(u)),p=Mt("style");Ze(p,"type","text/css"),St(p,le(c)),St(f,p),l.on("remove",()=>{Gt(p)})})(t,i),a},gg=t=>{var e;!0!==t.removed&&(jo(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||zc(r)&&r.selection.getStart(!0)!==o||jn(o).each(s=>{const a=s.getNode(),i=Oo(a)?jn(a).getOr(s):s;r.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=w_(e);be(n)&&n.call(e,e),(r=>{const o=S_(r);o&&Lr.setEditorTimeout(r,()=>{let s;s=!0===o?r:r.editorManager.get(o),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},eS=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(fg.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const r=t.getBody();var a,i;r.disabled=!0,t.readonly=b0(t),t._editableRoot=h_(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===fg.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let v=[];const h=S=>{if(!S.blob||!S.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const N=S.id||"blobid"+wT+++(()=>{const P=()=>Math.round(4294967295*yh()).toString(36);return"s"+(new Date).getTime().toString(36)+P()+P()+P()})(),A=S.name||N,R=S.blob;var M;return{id:mt(N),name:mt(A),filename:mt(S.filename||A+"."+(M=R.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[M.toLowerCase()]||"dat")),blob:mt(R),base64:mt(S.base64),blobUri:mt(S.blobUri||URL.createObjectURL(R)),uri:mt(S.uri)}},C=S=>Ge(v,S).getOrUndefined(),E=S=>C(N=>N.id()===S);return{create:(S,N,A,R,M)=>{if(Rt(S))return h({id:S,name:R,filename:M,blob:N,base64:A});if(Kt(S))return h(S);throw new Error("Unknown input type")},add:S=>{E(S.id())||v.push(S)},get:E,getByUri:S=>C(N=>N.blobUri()===S),getByData:(S,N)=>C(A=>A.base64()===S&&A.blob().type===N),findFirst:C,removeByUri:S=>{v=Vt(v,N=>N.blobUri()!==S||(URL.revokeObjectURL(N.blobUri()),!1))},destroy:()=>{Z(v,S=>{URL.revokeObjectURL(S.blobUri())}),v=[]}}})();let n,r;const o=a1(),s=[],a=v=>h=>t.selection?v(h):[],i=(v,h,C)=>{let E=0;do{E=v.indexOf(h,E),-1!==E&&(v=v.substring(0,E)+C+v.substr(E+h.length),E+=C.length-h.length+1)}while(-1!==E);return v},l=(v,h,C)=>(v=i(v,`src="${h}"`,`src="${C}"${C===ge.transparentSrc?' data-mce-placeholder="1"':""}`),i(v,'data-mce-src="'+h+'"','data-mce-src="'+C+'"')),c=(v,h)=>{Z(t.undoManager.data,C=>{"fragmented"===C.type?C.fragments=re(C.fragments,E=>l(E,v,h)):C.content=l(C.content,v,h)})},u=()=>(n||(n=l1(t,o)),b().then(a(v=>{const h=re(v,C=>C.blobInfo);return n.upload(h,i1(t)).then(a(C=>{const E=[];let S=!1;const N=re(C,(A,R)=>{const{blobInfo:M,image:P}=v[R];let z=!1;return A.status&&Uk(t)?(A.url&&!fn(P.src,A.url)&&(S=!0),e.removeByUri(P.src),jo(t)||(($,B)=>{const I=t.convertURL(B,"src");var j;c($.src,B),ro(D($),{src:d0(t)?(j=B,j+(-1===j.indexOf("?")?"?":"&")+(new Date).getTime()):B,"data-mce-src":I})})(P,A.url)):A.error&&(A.error.remove&&(c(P.src,ge.transparentSrc),E.push(P),z=!0),Cd(t,mo.translate(["Failed to upload image: {0}",A.error.message]))),{element:P,status:A.status,uploadUri:A.url,blobInfo:M,removed:z}});return E.length>0&&!jo(t)?t.undoManager.transact(()=>{Z(en(E),A=>{const R=sr(A);Gt(A),R.each((M=>P=>{var z,$;(z=M).dom.isEmpty(($=P).dom)&&ct(z.schema.getTextBlockElements()[me($)])&&St(P,ut('<br data-mce-bogus="1" />'))})(t)),e.removeByUri(A.dom.src)})}):S&&t.undoManager.dispatchChange(),N}))}))),f=()=>c0(t)?u():Promise.resolve([]),p=v=>or(s,h=>h(v)),b=()=>(r||(r=((t,e)=>{const n={};return{findAll:(r,o=je)=>{const s=Vt((i=r)?Cn(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===ge.transparentSrc)&&(Ve(l,"blob:")?!t.isUploaded(l)&&o(i):!!Ve(l,"data:")&&o(i))}),a=re(s,i=>{const l=i.src;if(Ut(n,l))return n[l].then(c=>Rt(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((u,f)=>{const p=()=>Promise.reject("Invalid data URI");if(Ve(f,"blob:")){const v=u.getByUri(f);return ct(v)?Promise.resolve(v):(b=f,Ve(b,"blob:")?(h=b,fetch(h).then(C=>C.ok?C.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${h} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Ve(b,"data:")?(g=b,new Promise((h,C)=>{Mm(g).bind(({type:E,data:S,base64Encoded:N})=>rC(E,S,N)).fold(()=>C("Invalid data URI"),h)})):Promise.reject("Unknown URI format")).then(h=>oC(h).then(C=>sC(C,!1,E=>k.some(aC(u,h,E))).getOrThunk(p)))}var h,b,g;return Ve(f,"data:")?iC(u,f).fold(p,v=>Promise.resolve(v)):Promise.reject("Unknown image data format")})(e,l).then(u=>(delete n[l],{image:i,blobInfo:u})).catch(u=>(delete n[l],u));return n[l]=c,c}});var i;return Promise.all(a)}}})(o,e)),r.findAll(t.getBody(),p).then(a(v=>{const h=Vt(v,C=>Rt(C)?(Cd(t,C),!1):"blob"!==C.uriType);return jo(t)||Z(h,C=>{c(C.image.src,C.blobInfo.blobUri()),C.image.src=C.blobInfo.blobUri(),C.image.removeAttribute("data-mce-src")}),h}))),g=v=>v.replace(/src="(blob:[^"]+)"/g,(h,C)=>{const E=o.getResultUri(C);if(E)return'src="'+E+'"';let S=e.getByUri(C);return S||(S=yn(t.editorManager.get(),(N,A)=>N||A.editorUpload&&A.editorUpload.blobCache.getByUri(C),void 0)),S?'src="data:'+S.blob().type+";base64,"+S.base64()+'"':h});return t.on("SetContent",()=>{c0(t)?f():b()}),t.on("RawSaveContent",v=>{v.content=g(v.content)}),t.on("GetContent",v=>{v.source_view||"raw"===v.format||"tree"===v.format||(v.content=g(v.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",v=>{Z(v,h=>{const C=h.attr("src");if(!C||e.getByUri(C))return;const E=o.getResultUri(C);E&&h.attr("src",E)})})}),{blobCache:e,addFilter:v=>{s.push(v)},uploadImages:u,uploadImagesAuto:f,scanForImages:b,destroy:()=>{e.destroy(),o.destroy(),r=n=null}}})(t),t.schema=ws(JE(t)),t.dom=Re(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Kk(t),referrerPolicy:lf(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=ui(ZE(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const u=a.dom,f="data-mce-"+c;let p=l.length;for(;p--;){const b=l[p];let g=b.attr(c);if(g&&!b.attr(f)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===c?(g=u.serializeStyle(u.parseStyle(g),b.name),g.length||(g=null),b.attr(f,g),b.attr(c,g)):"tabindex"===c?(b.attr(f,g),b.attr(c,null)):b.attr(f,a.convertURL(g,c,b.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const u=l[c],f=u.attr("type")||"no/type";0!==f.indexOf("mce-")&&u.attr("type","mce-"+f)}}),H_(a)&&i.addNodeFilter("#cdata",l=>{var c;let u=l.length;for(;u--;){const f=l[u];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode(null!==(c=f.value)&&void 0!==c?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const u=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(u)&&0===f.getAll("br").length&&f.append(new $n("br",1))}}),i})(t),t.serializer=GC((a=>{const i=a.options.get;return{...ZE(a),...JE(a),...mg({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=YC(t.dom,t.getWin(),t.serializer,t),t.annotator=vb(t),t.formatter=u1(t),t.undoManager=m1(t),t._nodeChangeDispatcher=new vO(t),t._selectionOverrides=KO(t),(a=>{const i=ns(),l=gn(!1),c=$u(u=>{a.dispatch("longpress",{...u,type:"longpress"}),l.set(!0)},400);a.on("touchstart",u=>{Sx(u).each(f=>{c.cancel();const p={x:f.clientX,y:f.clientY,target:u.target};c.throttle(u),l.set(!1),i.set(p)})},!0),a.on("touchmove",u=>{c.cancel(),Sx(u).each(f=>{i.on(p=>{((b,g)=>{const v=Math.abs(b.clientX-g.x),h=Math.abs(b.clientY-g.y);return v>5||h>5})(f,p)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",u=>{c.cancel(),"touchcancel"!==u.type&&i.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{l.get()?u.preventDefault():a.dispatch("tap",{...u,type:"tap"})})},!0)})(t),(i=a=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{const c=V_(i);Z(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const c=K_(i);Z(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})})})(a),(a=>{const i="contenteditable",l=" "+lt.trim(z_(a))+" ",c=" "+lt.trim(x0(a))+" ",u=_x(l),f=_x(c),p=U_(a);p.length>0&&a.on("BeforeSetContent",b=>{((g,v,h)=>{let C=v.length,E=h.content;if("raw"!==h.format){for(;C--;)E=E.replace(v[C],dR(g,E,x0(g)));h.content=E}})(a,p,b)}),a.parser.addAttributeFilter("class",b=>{let g=b.length;for(;g--;){const v=b[g];u(v)?v.attr(i,"true"):f(v)&&v.attr(i,"false")}}),a.serializer.addAttributeFilter(i,b=>{let g=b.length;for(;g--;){const v=b[g];if(!u(v)&&!f(v))continue;const h=v.attr("data-mce-content");p.length>0&&h?uR(p,h)?(v.name="#text",v.type=3,v.raw=!0,v.value=h):v.remove():v.attr(i,null)}})})(t),jo(t)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,r,o)=>{const s=Y.fromRangeStart(n).getNode(),a=(f=r,p=o,Zn(D(s),b=>Kr(b.dom)||p.isBlock(me(b)),wE(f)).getOr(D(f)).dom),i=SE(s,a,!1),l=SE(s,a,!0),c=document.createRange();var f,p;return EE(i,a).fold(()=>{xE(i)?c.setStart(i,0):c.setStartBefore(i)},u=>c.setStartBefore(u.dom)),EE(l,a).fold(()=>{xE(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)},u=>c.setEndAfter(u.dom)),c})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(Cm(e))})(a))})})(t),(a=>{(t=>{const e=[",",".",";",":","!","?"],n=[32],r=()=>{return a=F_(t).filter(l=>"inline-command"!==l.type&&"block-command"!==l.type||t.queryCommandSupported(l.cmd)),i=j_(t),{inlinePatterns:r0(a),blockPatterns:n0(a),dynamicPatternsLookup:i};var a,i},o=()=>t.options.isSet("text_patterns_lookup");t.on("keydown",a=>{if(13===a.keyCode&&!vt.modifierPressed(a)&&t.selection.isCollapsed()){const i=sf(r(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||o())&&((u,f)=>{const p=u.selection.getRng();return Yd(u,p).map(b=>{var g;const v=Math.max(0,p.startOffset),h=cg(f,b,null!==(g=b.textContent)&&void 0!==g?g:"");return{inlineMatches:WE(u,b,p.startContainer,v,h,!0),blockMatches:ZO(u,b,h,!0)}}).filter(({inlineMatches:b,blockMatches:g})=>g.length>0||b.length>0)})(l=t,i).fold(Ce,({inlineMatches:u,blockMatches:f})=>(l.undoManager.add(),l.undoManager.extra(()=>{l.execCommand("mceInsertNewLine")},()=>{l.insertContent(hn,{preserve_zwsp:!0}),VE(l,u),((g,v)=>{if(0===v.length)return;const h=g.selection.getBookmark();Z(v,C=>GO(g,C)),g.selection.moveToBookmark(h)})(l,f);const p=l.selection.getRng(),b=Rp(p.startContainer,p.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),b.each(g=>{const v=g.container;"\ufeff"===v.data.charAt(g.offset-1)&&(v.deleteData(g.offset-1,1),xi(l.dom,v.parentNode,h=>h===l.dom.getRoot()))})}),!0))&&a.preventDefault()}var l},!0),t.on("keydown",a=>{if(32===a.keyCode&&t.selection.isCollapsed()){const i=sf(r(),"space");(i.blockPatterns.length>0||o())&&((u,f)=>{const p=u.selection.getRng();return Yd(u,p).map(b=>{const g=Math.max(0,p.startOffset),v=dg(u.dom,b,p.startContainer,g),h=cg(f,b,v);return eB(u,b,h,!1,v)}).filter(b=>b.length>0)})(l=t,i).fold(Ce,u=>(l.undoManager.transact(()=>{var f;f=l,Z(u,b=>JO(f,b))}),!0))&&a.preventDefault()}var l},!0);const s=()=>{if(t.selection.isCollapsed()){const a=sf(r(),"space");(a.inlinePatterns.length>0||o())&&((i,l)=>{const c=i.selection.getRng();Yd(i,c).map(u=>{const f=Math.max(0,c.startOffset-1),p=dg(i.dom,u,c.startContainer,f),b=cg(l,u,p),g=WE(i,u,c.startContainer,f,b,!1);g.length>0&&i.undoManager.transact(()=>{VE(i,g)})})})(t,a)}};t.on("keyup",a=>{QE(n,a,(i,l)=>i===l.keyCode&&!vt.modifierPressed(l))&&s()}),t.on("keypress",a=>{QE(e,a,(i,l)=>i.charCodeAt(0)===l.charCode)&&Lr.setEditorTimeout(t,s)})})(a)})(t));const o=bO(t);((a,i)=>{a.addCommand("delete",()=>{var l;Ex(l=a,i,!1).fold(()=>{l.selection.isEditable()&&(rd(l),am(l))},Xn)}),a.addCommand("forwardDelete",()=>{var l;Ex(l=a,i,!0).fold(()=>{l.selection.isEditable()&&Kv(l)},Xn)})})(t,o),(a=>{a.on("NodeChange",()=>(i=>{const l=i.dom,c=i.selection,u=i.schema,f=u.getBlockElements(),p=c.getStart(),b=i.getBody();let g,v,h=null;const C=Fn(i);if(!p||!Nt(p))return;const E=b.nodeName.toLowerCase();if(!u.isValidChild(E,C.toLowerCase())||(N=f,A=b,_e(Ev(D(p),D(A)),M=>_p(N,M.dom))))return;var N,A;if(b.firstChild===b.lastChild&&He(b.firstChild))return g=Np(i),g.appendChild(Xa().dom),b.replaceChild(g,b.firstChild),i.selection.setCursorLocation(g,0),void i.nodeChanged();let S=b.firstChild;for(;S;)if(Nt(S)&&QS(u,S),lR(u,S)){if(cR(f,S)){v=S,S=S.nextSibling,l.remove(v);continue}if(!g){if(!h&&i.hasFocus()&&(h=R1(i.selection.getRng(),()=>document.createElement("span"))),!S.parentNode){S=null;break}g=Np(i),b.insertBefore(g,S)}v=S,S=S.nextSibling,g.appendChild(v)}else g=null,S=S.nextSibling;h&&(i.selection.setRng(O1(h)),i.nodeChanged())})(a))})(t),(a=>{var i;const l=a.dom,c=Fn(a),u=null!==(i=e_(a))&&void 0!==i?i:"",f=(p,b)=>{if((h=>{if(g1(h)){const C=h.keyCode;return!h1(h)&&(vt.metaKeyPressed(h)||h.altKey||C>=112&&C<=123||Ot(TT,C))}return!1})(p))return;const g=a.getBody(),v=!(g1(h=p)&&!(h1(h)||"keyup"===h.type&&229===h.keyCode))&&((h,C,E)=>{if(h.isEmpty(C,void 0,{skipBogus:!1,includeZwsp:!0})){const S=C.firstElementChild;return!S||!h.getStyle(C.firstElementChild,"padding-left")&&!h.getStyle(C.firstElementChild,"padding-right")&&E===S.nodeName.toLowerCase()}return!1})(l,g,c);var h;(""!==l.getAttrib(g,p1)!==v||b)&&(l.setAttrib(g,p1,v?u:null),((h,C)=>{h.dispatch("PlaceholderToggle",{state:C})})(a,v),a.on(v?"keydown":"keyup",f),a.off(v?"keyup":"keydown",f))};Sr(u)&&a.on("init",p=>{f(p,!0),a.on("change SetContent ExecCommand",f),a.on("paste",b=>Lr.setEditorTimeout(a,()=>f(b)))})})(t),(t=>{const e=gn(!1),n=gn(L_(t)?"text":"html"),r=(o=>{const s=gn(null);return{create:()=>((a,i)=>{const{dom:l,selection:c}=a,u=a.getBody();i.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},sE);ge.browser.isFirefox()&&l.setStyle(f,"left","rtl"===l.getStyle(u,"direction",!0)?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",p=>{p.stopPropagation()}),f.focus(),c.select(f,!0)})(o,s),remove:()=>((a,i)=>{const l=a.dom;if(ng(a)){let c;const u=i.get();for(;c=ng(a);)l.remove(c),l.unbind(c);u&&a.selection.setRng(u)}i.set(null)})(o,s),getEl:()=>ng(o),getHtml:()=>(a=>{const i=a.dom,l=(p,b)=>{p.appendChild(b),i.remove(b,!0)},[c,...u]=Vt(a.getBody().childNodes,_O);Z(u,p=>{l(c,p)});const f=i.select("div[id=mcepastebin]",c);for(let p=f.length-1;p>=0;p--){const b=i.create("div");c.insertBefore(b,f[p]),l(b,f[p])}return c?c.innerHTML:""})(o),getLastRng:s.get}})(t);var o,s,a;o=t,(ge.browser.isChromium()||ge.browser.isSafari())&&(a=DO,(s=o).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((o,s)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),kb(a,!1)):(i.set("text"),kb(a,!0)),a.focus()})(o,s)}),o.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Vd(o,i.html,i.internal,!1),i.text&&sg(o,i.text,!1)})})(t,n),(o=>{const s=l=>c=>{l(o,c)},a=A_(o);be(a)&&o.on("PastePreProcess",s(a));const i=T_(o);be(i)&&o.on("PastePostProcess",s(i))})(t),t.addQueryStateHandler("mceTogglePlainTextPaste",()=>"text"===n.get()),t.on("PreInit",()=>{(o=>{o.on("cut",(s=>a=>{!a.isDefaultPrevented()&&bE(s)&&s.selection.isEditable()&&pE(a,hE(s),gE(s),()=>{if(ge.browser.isChromium()||ge.browser.isFirefox()){const i=s.selection.getRng();Lr.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(o)),o.on("copy",(s=>a=>{!a.isDefaultPrevented()&&bE(s)&&pE(a,hE(s),gE(s),_t)})(o))})(t),((o,s)=>{N_(o)&&o.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Dc(o)||o.on("drop",a=>{const i=a.dataTransfer;i&&_e(i.files,c=>/^image\//.test(c.type))&&a.preventDefault()}),o.on("drop",a=>{if(a.isDefaultPrevented())return;const i=vE(o,a);if(we(i))return;const l=uE(a.dataTransfer),c=Ps(l,Wd());if((!fE(l)||(g=>{const v=g["text/plain"];return!!v&&0===v.indexOf("file://")})(l))&&mE(o,a,i))return;const u=l[Wd()],f=u||l["text/html"]||l["text/plain"],p=((g,v,h,C)=>{const E=g.getParent(h,S=>na(v,S));if(!Jt(g.getParent(h,"summary")))return!0;if(E&&Ut(C,"text/html")){const S=(new DOMParser).parseFromString(C["text/html"],"text/html").body;return!Jt(S.querySelector(E.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,i.startContainer,l),b=s.get();b&&!p||f&&(a.preventDefault(),Lr.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{(u||b&&p)&&o.execCommand("Delete"),yE(o,i);const g=lE(f);l["text/html"]?Vd(o,g,c,!0):sg(o,g,!0)})}))}),o.on("dragstart",a=>{s.set(!0)}),o.on("dragover dragend",a=>{Dc(o)&&!s.get()&&(a.preventDefault(),yE(o,vE(o,a))),"dragend"===a.type&&s.set(!1)}),(a=>{a.on("input",i=>{const l=c=>Jt(c.querySelector("summary"));if("deleteByDrag"===i.inputType){const c=Vt(a.dom.select("details"),l);Z(c,u=>{He(u.firstChild)&&u.firstChild.remove();const f=a.dom.create("summary");f.appendChild(Xa().dom),u.prepend(f)})}})})(o)})(t,e),((t,e,n)=>{((r,o,s)=>{let a;r.on("keydown",i=>{var l;(vt.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),r.on("paste",i=>{if(i.isDefaultPrevented()||(u=i,ge.os.isAndroid()&&0===(null===(p=null===(f=u.clipboardData)||void 0===f?void 0:f.items)||void 0===p?void 0:p.length)))return;var u,f,p;const l="text"===s.get()||a;a=!1;const c=uE(i.clipboardData);!fE(c)&&mE(r,i,o.getLastRng()||r.selection.getRng())||(Ps(c,"text/html")?(i.preventDefault(),ag(r,c,c["text/html"],l,!0)):Ps(c,"text/plain")&&Ps(c,"text/uri-list")?(i.preventDefault(),ag(r,c,c["text/plain"],l,!0)):(o.create(),Lr.setEditorTimeout(r,()=>{const u=o.getHtml();o.remove(),ag(r,c,u,l,!1)},0)))})})(t,e,n),(r=>{const o=a=>Ve(a,"webkit-fake-url"),s=a=>Ve(a,"data:");r.parser.addNodeFilter("img",(a,i,l)=>{if(!Dc(r)&&!0===(null===(u=l.data)||void 0===u?void 0:u.paste))for(const c of a){const u=c.attr("src");Rt(u)&&!c.attr("data-mce-object")&&u!==ge.transparentSrc&&(o(u)||!I_(r)&&s(u))&&c.remove()}var u})})(t)})(t,r,n)})})(t);const s=(a=>{const i=a;return(l=a,Te(l.plugins,"rtc").bind(c=>k.from(c.setup))).fold(()=>(i.rtcInstance=qC(a),k.none()),l=>(i.rtcInstance=(()=>{const c=mt(null),u=mt("");return{init:{bindEvents:_t},undoManager:{beforeChange:_t,add:c,undo:c,redo:c,clear:_t,reset:_t,hasUndo:Ce,hasRedo:Ce,transact:c,ignore:_t,extra:_t},formatter:{match:Ce,matchAll:mt([]),matchNode:mt(void 0),canApply:Ce,closest:u,apply:_t,remove:_t,toggle:_t,formatChanged:mt({unbind:_t})},editor:{getContent:u,setContent:mt({content:"",html:""}),insertContent:mt(""),addVisual:_t},selection:{getContent:u},autocompleter:{addDecoration:_t,removeDecoration:_t},raw:{getModel:mt(k.none())}}})(),k.some(()=>l().then(c=>(i.rtcInstance=(u=>{const f=S=>Kt(S)?S:{},{init:p,undoManager:b,formatter:g,editor:v,selection:h,autocompleter:C,raw:E}=u;return{init:{bindEvents:p.bindEvents},undoManager:{beforeChange:b.beforeChange,add:b.add,undo:b.undo,redo:b.redo,clear:b.clear,reset:b.reset,hasUndo:b.hasUndo,hasRedo:b.hasRedo,transact:(S,N,A)=>b.transact(A),ignore:(S,N)=>b.ignore(N),extra:(S,N,A,R)=>b.extra(A,R)},formatter:{match:(S,N,A,R)=>g.match(S,f(N),R),matchAll:g.matchAll,matchNode:g.matchNode,canApply:S=>g.canApply(S),closest:S=>g.closest(S),apply:(S,N,A)=>g.apply(S,f(N)),remove:(S,N,A,R)=>g.remove(S,f(N)),toggle:(S,N,A)=>g.toggle(S,f(N)),formatChanged:(S,N,A,R,M)=>g.formatChanged(N,A,R,M)},editor:{getContent:S=>v.getContent(S),setContent:(S,N)=>({content:v.setContent(S,N),html:""}),insertContent:(S,N)=>(v.insertContent(S),""),addVisual:v.addVisual},selection:{getContent:(S,N)=>h.getContent(N)},autocompleter:{addDecoration:C.addDecoration,removeDecoration:C.removeDecoration},raw:{getModel:()=>k.some(E.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),k_(a)||(i.body.spellcheck=!1,fg.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=lt.each,n=vt.BACKSPACE,r=vt.DELETE,o=t.dom,s=t.selection,a=t.parser,i=ge.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),u=ge.deviceType.isiPhone()||ge.deviceType.isiPad(),f=ge.os.isMacOS()||ge.os.isiOS(),p=(B,I)=>{try{t.getDoc().execCommand(B,!1,String(I))}catch{}},b=B=>B.isDefaultPrevented(),g=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},v=()=>{t.inline||o.bind(t.getDoc(),"mousedown mouseup",B=>{let I;if(B.target===t.getDoc().documentElement)if(I=s.getRng(),t.getBody().focus(),"mousedown"===B.type){if(Rr(I.startContainer))return;s.placeCaretAt(B.clientX,B.clientY)}else s.setRng(I)})},h=()=>{Range.prototype.getClientRects||t.on("mousedown",B=>{if(!b(B)&&"HTML"===B.target.nodeName){const I=t.getBody();I.blur(),Lr.setEditorTimeout(t,()=>{I.focus()})}})},C=()=>{const B=y0(t);t.on("click",I=>{const j=I.target;/^(IMG|HR)$/.test(j.nodeName)&&o.isEditable(j)&&(I.preventDefault(),t.selection.select(j),t.nodeChanged()),"A"===j.nodeName&&o.hasClass(j,B)&&0===j.childNodes.length&&o.isEditable(j.parentNode)&&(I.preventDefault(),s.select(j))})},E=()=>{t.on("keydown",B=>{if(!b(B)&&B.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const I=s.getNode().previousSibling;if(I&&I.nodeName&&"table"===I.nodeName.toLowerCase())return B.preventDefault(),!1}return!0})},S=()=>{b0(t)||t.on("BeforeExecCommand mousedown",()=>{p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),g0(t)||p("enableObjectResizing",!1)})},N=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},A=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},R=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",B=>{let I;"HTML"===B.target.nodeName&&(I=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(I),t.selection.normalize(),t.nodeChanged())}))},M=()=>{f&&t.on("keydown",B=>{!vt.metaKeyPressed(B)||B.shiftKey||37!==B.keyCode&&39!==B.keyCode||(B.preventDefault(),t.selection.getSel().modify("move",37===B.keyCode?"backward":"forward","lineboundary"))})},P=()=>{t.on("click",B=>{let I=B.target;do{if("A"===I.tagName)return void B.preventDefault()}while(I=I.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},z=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",B=>{B.preventDefault()})})},$=_t;return jo(t)?(c&&(v(),C(),z(),g(),u&&(A(),R(),P())),l&&(h(),S(),N(),M())):(t.on("keydown",B=>{if(b(B)||B.keyCode!==vt.BACKSPACE)return;let I=s.getRng();const j=I.startContainer,G=I.startOffset,st=o.getRoot();let rt=j;if(I.collapsed&&0===G){for(;rt.parentNode&&rt.parentNode.firstChild===rt&&rt.parentNode!==st;)rt=rt.parentNode;"BLOCKQUOTE"===rt.nodeName&&(t.formatter.toggle("blockquote",void 0,rt),I=o.createRng(),I.setStart(j,0),I.setEnd(j,0),s.setRng(I))}}),(()=>{const B=I=>{const j=o.create("body"),G=I.cloneContents();return j.appendChild(G),s.serializer.serialize(j,{format:"html"})};t.on("keydown",I=>{const j=I.keyCode;if(!b(I)&&(j===r||j===n)&&t.selection.isEditable()){const G=t.selection.isCollapsed(),st=t.getBody();if(G&&!es(t.schema,st)||!G&&!(rt=>{const xt=B(rt),At=o.createRng();return At.selectNode(t.getBody()),xt===B(At)})(t.selection.getRng()))return;I.preventDefault(),t.setContent(""),st.firstChild&&o.isBlock(st.firstChild)?t.selection.setCursorLocation(st.firstChild,0):t.selection.setCursorLocation(st,0),t.nodeChanged()}})})(),ge.windowsPhone||t.on("keyup focusin mouseup",B=>{vt.modifierPressed(B)||(I=>{const j=I.getBody(),G=I.selection.getRng();return G.startContainer===G.endContainer&&G.startContainer===j&&0===G.startOffset&&G.endOffset===j.childNodes.length})(t)||s.normalize()},!0),c&&(v(),C(),t.on("init",()=>{p("DefaultParagraphSeparator",Fn(t))}),z(),E(),a.addNodeFilter("br",B=>{let I=B.length;for(;I--;)"Apple-interchange-newline"===B[I].attr("class")&&B[I].remove()}),u?(A(),R(),P()):g()),l&&(t.on("keydown",B=>{if(!b(B)&&B.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const I=s.getNode(),j=I.previousSibling;if("HR"===I.nodeName)return o.remove(I),void B.preventDefault();j&&j.nodeName&&"hr"===j.nodeName.toLowerCase()&&(o.remove(j),B.preventDefault())}}}),h(),(()=>{const B=()=>{const j=o.getAttribs(s.getStart().cloneNode(!1));return()=>{const G=s.getStart();G!==t.getBody()&&(o.setAttrib(G,"style",null),e(j,st=>{G.setAttributeNode(st.cloneNode(!0))}))}},I=()=>!s.isCollapsed()&&o.getParent(s.getStart(),o.isBlock)!==o.getParent(s.getEnd(),o.isBlock);t.on("keypress",j=>{let G;return!(!(b(j)||8!==j.keyCode&&46!==j.keyCode)&&I()&&(G=B(),t.getDoc().execCommand("delete",!1),G(),j.preventDefault(),1))}),o.bind(t.getDoc(),"cut",j=>{if(!b(j)&&I()){const G=B();Lr.setEditorTimeout(t,()=>{G()})}})})(),S(),t.on("SetContent ExecCommand",B=>{"setcontent"!==B.type&&"mceInsertLink"!==B.command||e(o.select("a:not([data-mce-block])"),I=>{var j;let G=I.parentNode;const st=o.getRoot();if(G?.lastChild===I){for(;G&&!o.isBlock(G);){if((null===(j=G.parentNode)||void 0===j?void 0:j.lastChild)!==G||G===st)return;G=G.parentNode}o.add(G,"br",{"data-mce-bogus":1})}})}),N(),M(),E())),{refreshContentEditable:$,isHidden:()=>{if(!l||t.removed)return!1;const B=t.selection.getSel();return!B||!B.rangeCount||0===B.rangeCount}}})(a),a.dispatch("PostRender");const c=Zk(a);void 0!==c&&(l.dir=c);const u=__(a);u&&a.on("BeforeSetContent",f=>{lt.each(u,p=>{f.content=f.content.replace(p,b=>"\x3c!--mce:protected "+escape(b)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing="compositionstart"===f.type})})(t),(a=>{const i=Y_(a);var c,l;Rt(G_(a))||!Me(i)&&"INVALID"!=("gpl"===(l=i).toLowerCase()||(c=l).length>=64&&c.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(t),s.fold(()=>{const a=(i=>{let l=!1;const c=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(t);tS(t).then(()=>{gg(t),a()})},a=>{t.setProgressState(!0),tS(t).then(()=>{a().then(i=>{t.setProgressState(!1),gg(t),$C(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),gg(t),$C(t)})})})},sB=je,hg=Re.DOM,nS=Re.DOM,rS=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),oS=t=>{const e=t.getElement();return t.inline?rS(null):(n=>{const r=nS.create("div");return nS.insertAfter(r,n),rS(r,r)})(e)},aB=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const r=lt.trim(u0(n)),o=n.ui.registry.getAll().icons,s={...yd.get("default").icons,...yd.get(r).icons};xe(s,(a,i)=>{Ut(o,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const r=Za(n);if(Rt(r)){const o=Ea.get(r);n.theme=o(n,Ea.urls[r])||{},be(n.theme.init)&&n.theme.init(n,Ea.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const r=cf(n),o=fi.get(r);n.model=o(n,fi.urls[r])})(t),(n=>{const r=[];Z(Bc(n),o=>{((s,a,i)=>{const l=mi.get(i),c=mi.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=lt.trim(i),l&&-1===lt.inArray(a,i)){if(s.plugins[i])return;try{const u=l(s,c)||{};s.plugins[i]=u,be(u.init)&&(u.init(s,c),a.push(i))}catch(u){((f,p,b)=>{const g=mo.translate(["Failed to initialize plugin: {0}",p]);Cb(f,"PluginLoadError",{message:g}),xd(g,b),Cd(f,g)})(s,i,u)}}})(n,r,o.replace(/^\-/,""))})})(t);const e=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,Rt(Za(n))?(o=>{const s=o.theme.renderUI;return s?s():oS(o)})(n):be(Za(n))?(o=>{const s=o.getElement(),a=Za(o)(o,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||o.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||o.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):oS(n)})(t);var n,r;((n,r)=>{const o={show:k.from(r.show).getOr(_t),hide:k.from(r.hide).getOr(_t),isEnabled:k.from(r.isEnabled).getOr(je),setEnabled:s=>{n.mode.isReadOnly()||k.from(r.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...o}})(t,k.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(s1(r=n,Gk(r)),(r=>s1(r,p0(r)))(n)),t.inline?eS(t):((n,r)=>{((o,s)=>{const a=ge.browser.isFirefox()?C0(o):"Rich Text Area",i=o.translate(a),l=oo(D(o.getElement()),"tabindex").bind(Ws),c=((u,f,p,b)=>{const g=Mt("iframe");return b.each(v=>Ze(g,"tabindex",v)),ro(g,p),ro(g,{id:u+"_ifr",frameBorder:"0",allowTransparency:"true",title:f}),H(g,"tox-edit-area__iframe"),g})(o.id,i,Ok(o),l).dom;c.onload=()=>{c.onload=null,o.dispatch("load")},o.contentAreaContainer=s.iframeContainer,o.iframeElement=c,o.iframeHTML=(u=>{let f=Bk(u)+"<html><head>";i0(u)!==u.documentBaseUrl&&(f+='<base href="'+u.documentBaseURI.getURI()+'" />'),f+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const p=Dk(u),b=Pk(u),g=u.translate(C0(u));return l0(u)&&(f+='<meta http-equiv="Content-Security-Policy" content="'+l0(u)+'" />'),f+=`</head><body id="${p}" class="mce-content-body ${b}" data-id="${u.id}" aria-label="${g}"><br></body></html>`,f})(o),hg.add(s.iframeContainer,c)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=hg.isHidden(r.editorContainer)),n.getElement().style.display="none",hg.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const s=o.iframeElement,a=()=>{o.contentDocument=s.contentDocument,eS(o)};if($_(o)||ge.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close(),a()}else{const l=((t,e,n)=>((o,s,a,i)=>{const c=((u,f)=>p=>{u(p)&&f((b=>{const g=D(Ar(b).getOr(b.target)),v=()=>b.stopPropagation(),h=()=>b.preventDefault(),C=Bn(h,v);return((E,S,N,A,R,M,P)=>({target:E,x:S,y:N,stop:A,prevent:R,kill:M,raw:P}))(g,b.clientX,b.clientY,v,h,C,b)})(p))})(a,i);return o.dom.addEventListener(s,c,!1),{unbind:Et(lr,o,s,c,!1)}})(t,"load",n,()=>{l.unbind(),a()}))(D(s),0,sB);s.srcdoc=o.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},ka=Re.DOM,sS=t=>"-"===t.charAt(0),aS=(t,e,n)=>k.from(e).filter(r=>Sr(r)&&!yd.has(r)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:k.some(r)})),iS=Pn().deviceType,lS=iS.isPhone(),lB=iS.isTablet(),Gl=t=>{if(we(t))return[];{const e=it(t)?t:t.split(/[ ,]/),n=re(e,Xo);return Vt(n,Sr)}},bg=(t,e)=>Ut(t.sections(),e),dB=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Te(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),uB=(t,e)=>{var n;const r=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?lt.extend({},t.external_plugins,r):r},pB=(t,e)=>{const n=t.selection,r=t.dom;return/^ | $/.test(e)?((o,s,a,i)=>{const l=D(o.getRoot());return a=El(l,Y.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Sl(l,Y.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),e,t.schema):e},Zd=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const s=lt.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:s}}return{content:o,details:{}}})(e);Km(t,{...r,content:pB(t,n),format:"html",set:!1,selection:!0}).each(o=>{const s=(i=o.content,l=r,tp(t).editor.insertContent(i,l));var i,l;Xm(t,s,o),t.addVisual()})}},gB={"font-size":"size","font-family":"face"},hB=Qs("font"),cS=t=>(e,n)=>k.from(n).map(D).filter(Hn).bind(r=>{return(o=t,s=e,a=r.dom,Sm(D(a),i=>{return et(l=i,o).orThunk(()=>hB(l)?Te(gB,o).bind(c=>oo(l,c)):k.none());var l},i=>zt(D(s),i))).or(((o,s)=>k.from(Re.DOM.getStyle(s,o,!0)))(t,r.dom));var o,s,a}).getOr(""),bB=cS("font-size"),vB=Bn(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),cS("font-family")),yB=t=>jn(t.getBody()).bind(e=>{const n=e.container();return k.from(ot(n)?n.parentNode:n)}),vg=(t,e)=>{return n=t,r=Fs(k.some,e),(o=n,k.from(o.selection.getRng()).bind(s=>{const a=o.getBody();return s.startContainer===a&&0===s.startOffset?k.none():k.from(o.selection.getStart(!0))})).orThunk(Et(yB,n)).map(D).filter(Hn).bind(r);var n,r,o},dS=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const r=lt.explode(t.options.get("font_size_style_values")),o=lt.explode(t.options.get("font_size_classes"));return o.length>0?o[n-1]||e:r[n-1]||e}return e}return e},CB=t=>{const e=t.split(/\s*,\s*/);return re(e,n=>-1===n.indexOf(" ")||Ve(n,'"')||Ve(n,"'")?n:`'${n}'`).join(",")},uS=(t,e)=>{const n=t.dom,r=t.selection.getRng(),o=e?t.selection.getStart():t.selection.getEnd(),s=e?r.startContainer:r.endContainer,a=Wl(n,s);if(!a||!a.isContentEditable)return;const i=e?Bt:Ft,l=Fn(t);((c,u,f,p)=>{const b=c.dom,g=h=>b.isBlock(h)&&h.parentElement===f,v=g(u)?u:b.getParent(p,g,f);return k.from(v).map(D)})(t,o,a,s).each(c=>{const u=Tw(t,s,c.dom,a,!1,l);i(c,D(u)),t.selection.setCursorLocation(u,0),t.dispatch("NewBlock",{newBlock:u}),$l(t,"insertParagraph")})},wB=["toggleview"],fS=t=>Ot(wB,t.toLowerCase());class mS{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,r,o){const s=this.editor,a=e.toLowerCase(),i=o?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?$f(c=s).each(u=>c.selection.setRng(u)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:r}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[a];return!!be(l)&&(l(a,n,r),s.dispatch("ExecCommand",{command:e,ui:n,value:r}),!0)}queryCommandState(e){if(!fS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),r=this.commands.state[n];return!!be(r)&&r(n)}queryCommandValue(e){if(!fS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),r=this.commands.value[n];return be(r)?r(n):""}addCommands(e,n="exec"){const r=this.commands;xe(e,(o,s)=>{Z(s.toLowerCase().split(","),a=>{r[n][a]=o})})}addCommand(e,n,r){const o=e.toLowerCase();this.commands.exec[o]=(s,a,i)=>n.call(r??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,r){this.commands.state[e.toLowerCase()]=()=>n.call(r??this.editor)}addQueryValueHandler(e,n,r){this.commands.value[e.toLowerCase()]=()=>n.call(r??this.editor)}}const _a="data-mce-contenteditable",yg=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Jd=(t,e)=>{t.dom.contentEditable=e?"true":"false"},Na=t=>t.readonly,pS=t=>{t.parser.addAttributeFilter("contenteditable",e=>{Na(t)&&Z(e,n=>{n.attr(_a,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(_a,e=>{Na(t)&&Z(e,n=>{n.attr("contenteditable",n.attr(_a))})}),t.serializer.addTempAttr(_a)},EB=["copy"],SB=lt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Cg{static isNative(e){return!!SB[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ce}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const r=e.toLowerCase(),o=ju(r,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const s=this.bindings[r];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(!1===l.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(e,n,r,o){if(!1===n&&(n=Ce),n){const s={func:n,removed:!1};o&&lt.extend(s,o);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=r?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(e,n){if(e){const r=e.toLowerCase().split(" ");let o=r.length;for(;o--;){const s=r[o];let a=this.bindings[s];if(!s)return xe(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=Ur(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,Z(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else xe(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(e,n,r){return this.on(e,n,r,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const Ql=t=>(t._eventDispatcher||(t._eventDispatcher=new Cg({scope:t,toggleEvent:(e,n)=>{Cg.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),xg={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const r=this;if(r.removed&&"remove"!==t&&"detach"!==t)return ju(t.toLowerCase(),e??{},r);const o=Ql(r).dispatch(t,e);if(!1!==n&&r.parent){let s=r.parent();for(;s&&!o.isPropagationStopped();)s.dispatch(t,o,!1),s=s.parent?s.parent():void 0}return o},on(t,e,n){return Ql(this).on(t,e,n)},off(t,e){return Ql(this).off(t,e)},once(t,e){return Ql(this).once(t,e)},hasEventListeners(t){return Ql(this).has(t)}},tu=Re.DOM;let Aa;const eu=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=h0(t);return n?(t.eventRoot||(t.eventRoot=tu.select(n)[0]),t.eventRoot):t.getBody()},gS=(t,e,n)=>{var r;(r=t).hidden||Na(r)?Na(t)&&((r,o)=>{if("click"!==o.type||vt.metaKeyPressed(o))Ot(EB,o.type)&&r.dispatch(o.type,o);else{const s=D(o.target);(a=r,i=s,lo(i,"a",l=>zt(l,D(a.getBody()))).bind(l=>oo(l,"href"))).each(a=>{if(o.preventDefault(),/^#/.test(a)){const i=r.dom.select(`${a},[name="${Ko(a,"#")}"]`);i.length&&r.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},hS=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=eu(t,e);if(h0(t)){if(Aa||(Aa={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Aa&&(xe(Aa,(o,s)=>{t.dom.unbind(eu(t,s))}),Aa=null)})),Aa[e])return;const r=o=>{const s=o.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||tu.isChildOf(s,l))&&gS(a[i],e,o)}};Aa[e]=r,tu.bind(n,e,r)}else{const r=o=>{gS(t,e,o)};tu.bind(n,e,r),t.delegates[e]=r}},bS={...xg,bindPendingEventDelegates(){const t=this;lt.each(t._pendingNativeEvents,e=>{hS(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?hS(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(eu(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(xe(t.delegates,(r,o)=>{t.dom.unbind(eu(t,o),o,r)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},kB=t=>Rt(t)?{value:t.split(/[ ,]/),valid:!0}:Un(t,Rt)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},vS=(t,e)=>t+(ps(e.message)?"":`. ${e.message}`),yS=t=>t.valid,wg=(t,e,n="")=>{const r=e(t);return En(r)?r?{value:t,valid:!0}:{valid:!1,message:n}:r},_B=["design","readonly"],CS=(t,e,n,r)=>{const o=n[e.get()],s=n[r];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${r}:`,a)}var a;o.deactivate(),o.editorReadOnly!==s.editorReadOnly&&((a,i)=>{const l=D(a.getBody());var c,u,f;f=i,at(c=l,u="mce-content-readonly")&&!f?tt(c,u):f&&H(c,u),i?(a.selection.controlSelection.hideResizeRect(),a._selectionOverrides.hideFakeCaret(),(c=>{k.from(c.selection.getNode()).each(u=>{u.removeAttribute("data-mce-selected")})})(a),a.readonly=!0,Jd(l,!1),Z(Mn(l,'*[contenteditable="true"]'),c=>{Ze(c,_a,"true"),Jd(c,!1)})):(a.readonly=!1,a.hasEditableRoot()&&Jd(l,!0),Z(Mn(l,`*[${_a}="true"]`),c=>{m(c,_a),Jd(c,!0)}),yg(a,"StyleWithCSS",!1),yg(a,"enableInlineTableEditing",!1),yg(a,"enableObjectResizing",!1),Zb(a)&&a.focus(),(c=>{c.selection.setRng(c.selection.getRng())})(a),a.nodeChanged())})(t,s.editorReadOnly),e.set(r),(a=t).dispatch("SwitchMode",{mode:r})},Eg=lt.each,Sg=lt.explode,NB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},xS=lt.makeMap("alt,ctrl,shift,meta,access"),AB=t=>{const e={},n=ge.os.isMacOS()||ge.os.isiOS();Eg(Sg(t.toLowerCase(),"+"),s=>{s in xS?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=NB[s]||s.toUpperCase().charCodeAt(0))});const r=[e.keyCode];let o;for(o in xS)e[o]?r.push(o):e[o]=!1;return e.id=r.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class wS{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(Eg(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,r,o){const s=this,a=s.normalizeCommandFunc(r);return Eg(Sg(lt.trim(e)),i=>{const l=s.createShortcut(i,n,a,o);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,r=e;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:lt.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,n,r,o){const s=lt.map(Sg(e,">"),AB);return s[s.length-1]=lt.extend(s[s.length-1],{func:r,scope:o||this.editor}),lt.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const TB=()=>{const t=(()=>{const e={},n={},r={},o={},s={},a={},i={},l={},c=(u,f)=>(p,b)=>{u[p.toLowerCase()]={...b,type:f}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(r,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(a,"contexttoolbar"),addContextForm:c(a,"contextform"),addSidebar:c(i,"sidebar"),addView:c(l,"views"),addIcon:(u,f)=>o[u.toLowerCase()]=f,getAll:()=>({buttons:e,menuItems:n,icons:o,popups:r,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Ta=Re.DOM,ES=lt.extend,RB=lt.each;class nu{constructor(e,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,ES(this,bS);const o=this;this.id=e,this.hidden=!1;const s=((b,g)=>{const v=_R(g);return((t,e,n,r,o)=>{var s;const a=t?{mobile:dB(null!==(s=o.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=(s=>{const i={},l={};return ko(s,(c,u)=>Ot(t,u),So(i),So(l)),{t:i,f:l}})(e);return o=n.f,{sections:mt(n.t),options:mt(o)};var o})(["mobile"],Mp(a,o)),l=lt.extend(n,r,i.options(),t&&bg(i,"mobile")?((c,u,f={})=>{const p=c.sections(),b=Te(p,u).getOr({});return lt.extend({},f,b)})(i,"mobile"):{},{external_plugins:uB(r,i.options())});return((c,u,f,p)=>{const b=Gl(f.forced_plugins),g=Gl(p.plugins),v=bg(E=u,"mobile")?E.sections().mobile:{},h=((E,S,N,A)=>E&&bg(S,"mobile")?A:N)(c,u,g,v.plugins?Gl(v.plugins):g),C=((E,S)=>[...Gl(E),...Gl(S)])(b,h);var E;return lt.extend(p,{forced_plugins:b,plugins:C})})(t,i,r,l)})(lS||lB,lS,v,b,v)})(r.defaultOptions,n);this.options=((b,g,v=g)=>{const h={},C={},E=(N,A,R)=>{const M=wg(A,R);return yS(M)?(C[N]=M.value,!0):(console.warn(vS(`Invalid value passed for the ${N} option`,M)),!1)},S=N=>Ut(h,N);return{register:(N,A)=>{const R=Rt(A.processor)?(P=>{const z=(()=>{switch(P){case"array":return it;case"boolean":return En;case"function":return be;case"number":return x;case"object":return Kt;case"string":return Rt;case"string[]":return kB;case"object[]":return $=>Un($,Kt);case"regexp":return $=>Er($,RegExp);default:return je}})();return $=>wg($,z,`The value must be a ${P}.`)})(A.processor):A.processor,M=((P,z,$)=>{if(!Me(z)){const B=wg(z,$);if(yS(B))return B.value;console.error(vS(`Invalid default value passed for the "${P}" option`,B))}})(N,A.default,R);h[N]={...A,default:M,processor:R},Te(C,N).orThunk(()=>Te(g,N)).each(P=>E(N,P,R))},isRegistered:S,get:N=>Te(C,N).orThunk(()=>Te(h,N).map(A=>A.default)).getOrUndefined(),set:(N,A)=>{if(S(N)){const R=h[N];return R.immutable?(console.error(`"${N}" is an immutable option and cannot be updated`),!1):E(N,A,R.processor)}return console.warn(`"${N}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:N=>{const A=S(N);return A&&delete C[N],A},isSet:N=>Ut(C,N),debug:()=>{try{console.log(JSON.parse(JSON.stringify(v,(N,A)=>En(A)||x(A)||Rt(A)||Jt(A)||it(A)||It(A)?A:Object.prototype.toString.call(A))))}catch(N){console.error(N)}}}})(0,s,n),(b=>{const g=b.options.register;g("id",{processor:"string",default:b.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:b.documentBaseUrl}),g("body_id",{processor:a0(b,"tinymce"),default:"tinymce"}),g("body_class",{processor:a0(b),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:v=>{const h=Rt(v)&&Sr(v);return h?{value:v,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:v=>{const h=Ot(["block","linebreak","invert","default"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:v=>En(v)||Rt(v)?{valid:!0,value:v}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:v=>{const h=!1===v||Rt(v)||Un(v,Rt);return h?Rt(v)?{value:re(v.split(","),Xo),valid:h}:it(v)?{value:v,valid:h}:!1===v?{value:[],valid:h}:{value:v,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:df(b)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:v=>{const h=Rt(v)||Un(v,Rt);return h?{value:it(v)?v:re(v.split(","),Xo),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:v=>{const h=En(v)||Rt(v);return h?!1===v||af.isiPhone()||af.isiPad()?{value:"",valid:h}:{value:!0===v?"table,img,figure.image,div,video,iframe":v,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!Tk}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"string"}),g("service_message",{processor:"string"}),g("theme",{processor:v=>!1===v||Rt(v)||be(v),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:v=>{const h=!1===v||Rt(v);return h?{value:!1===v?"":v,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:b.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:b.convertURL}),g("url_converter_scope",{processor:"object",default:b}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:Oc}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:Oc}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:Oc}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:Oc}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:v=>Rt(v)||!0===v}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("license_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:v=>Un(v,Kt)||!1===v?{value:o0(!1===v?[]:v),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),g("text_patterns_lookup",{processor:v=>{return be(v)?{value:(h=v,C=>{const E=h(C);return o0(E)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:v=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:v=>Un(v,s0)?{value:v,valid:!0}:s0(v)?{value:[v],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!0}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:v=>{const h=Ot(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:v=>{const h=Ot(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("sandbox_iframes",{processor:"boolean",default:!0}),g("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),g("convert_unsafe_embeds",{processor:"boolean",default:!0}),b.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:mo.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:Rk.getAttrib(b.getElement(),"placeholder")})})})(o);const a=this.options.get;var b,g;a("deprecation_warnings")&&(((v,h)=>{const C=(t=>{const e=ZC(t,cT),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),Wo(e)})(v),E=(t=>JC(t,uT))(h),S=E.length>0,N=C.length>0,A="mobile"===h.theme;if(S||N||A){const R="\n- ",M=A?`\n\nThemes:${R}mobile`:"",P=S?`\n\nPlugins:${R}${E.join(R)}`:"",z=N?`\n\nOptions:${R}${C.join(R)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+M+P+z)}})(b=n,g=s),((v,h)=>{const C=(t=>ZC(t,dT))(v),E=(t=>JC(t,QC.map(e=>e.name)))(h),S=E.length>0,N=C.length>0;if(S||N){const A="\n- ",R=S?`\n\nPlugins:${A}${E.map(hT).join(A)}`:"",M=N?`\n\nOptions:${A}${C.join(A)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+R+M)}})(b,g));const i=a("suffix");i&&(r.suffix=i),this.suffix=r.suffix;const l=a("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const c=lf(o);c&&(rs.ScriptLoader._setReferrerPolicy(c),Re.DOM.styleSheetLoader._setReferrerPolicy(c));const u=v0(o);ct(u)&&Re.DOM.styleSheetLoader._setContentCssCors(u),qn.languageLoad=a("language_load"),qn.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Gr(i0(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=df(o),this.hasVisual=y_(o),this.shortcuts=new wS(this),this.editorCommands=new mS(this),(t=>{var e;(t=>{(e=>{const n=r=>()=>{Z("left,center,right,justify".split(","),o=>{r!==o&&e.formatter.remove("align"+o)}),"none"!==r&&(e.formatter.toggle("align"+r,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=r=>()=>{const o=e.selection,s=o.isCollapsed()?[e.dom.getParent(o.getNode(),e.dom.isBlock)]:o.getSelectedBlocks();return _e(s,a=>ct(e.formatter.matchNode(a,r)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=e.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(ge.os.isMacOS()||ge.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!Nt(a)||s++!==o||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,r,o)=>{e.selection.select(o)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Kr);if(n){const r=e.dom.createRng();r.selectNodeContents(n),e.selection.setRng(r)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{Zd(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{Zd(e,e.dom.encode(o))},insertHTML:(n,r,o)=>{Zd(e,o)},mceInsertContent:(n,r,o)=>{Zd(e,o)},mceSetContent:(n,r,o)=>{e.setContent(o)},mceReplaceContent:(n,r,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(R_(e))}})})(t),(e=>{const n=(r,o,s)=>{const a=Rt(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");Kt(a)&&Rt(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const r=e.dom.getParent(e.selection.getStart(),"a");return void(r&&e.dom.remove(r,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{Cx(e,"indent")},Outdent:()=>{xx(e)}}),e.editorCommands.addCommands({Outdent:()=>bx(e)},"state")})(t),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{uS(e,!0)},InsertNewBlockAfter:()=>{uS(e,!1)}})})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Hd(Dw,e)},mceInsertNewLine:(n,r,o)=>{zw(e,o)},InsertLineBreak:(n,r,o)=>{Hd(Mw,e)}})})(t),(e=>{(n=>{const r=(o,s)=>{n.formatter.toggle(o,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,s,a)=>{r(o,{value:a})},BackColor:(o,s,a)=>{r("hilitecolor",{value:a})},FontName:(o,s,a)=>{((i,l)=>{const c=dS(i,l);i.formatter.toggle("fontname",{value:CB(c)}),i.nodeChanged()})(n,a)},FontSize:(o,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:dS(i,a)}),i.nodeChanged()},LineHeight:(o,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(o,s,a)=>{var i;r(o,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,s,a)=>{r(Rt(a)?a:"p")},mceToggleFormat:(o,s,a)=>{r(a)}})})(e),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return vg(o=n,s=>vB(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return vg(o=n,s=>bB(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return vg(o=n,s=>{const a=D(o.getBody());return Sm(s,l=>et(l,"line-height"),Et(zt,a)).getOrThunk(()=>{const l=parseFloat(L(s,"line-height")),c=parseFloat(L(s,"font-size"));return String(l/c)})}).getOr("");var o})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const s=o??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,r,o)=>{var s;(s=e).removed||(!0===o?Xf(s):(i=>{const l=i.selection,c=i.getBody();let u=l.getRng();i.quirks.refreshContentEditable();const f=b=>{$f(b).each(g=>{b.selection.setRng(g),u=g})};!li(i)&&i.hasEditableRoot()&&f(i);const p=(b=i,g=l.getNode(),b.dom.getParent(g,v=>"true"===b.dom.getContentEditable(v)));var b,g;if(p&&i.dom.isChildOf(p,c))return((b,g)=>null!==b.dom.getParent(g,v=>"false"===b.dom.getContentEditable(v)))(i,p)||Zc(c),Zc(p),i.hasEditableRoot()||f(i),Qb(i,u),void Xf(i);i.inline||(ge.browser.isOpera()||Zc(c),i.getWin().focus()),(ge.browser.isFirefox()||i.inline)&&(Zc(c),Qb(i,u)),Xf(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const f=a("cache_suffix");f&&(ge.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:TB(),styleSheetLoader:void 0,show:_t,hide:_t,setEnabled:_t,isEnabled:je},this.mode=(b=>{const g=gn("design"),v=gn({design:{activate:_t,deactivate:_t,editorReadOnly:!1},readonly:{activate:_t,deactivate:_t,editorReadOnly:!0}});return(h=b).serializer?pS(h):h.on("PreInit",()=>{pS(h)}),(h=>{h.on("ShowCaret",C=>{Na(h)&&C.preventDefault()}),h.on("ObjectSelected",C=>{Na(h)&&C.preventDefault()})})(b),{isReadOnly:()=>Na(b),set:h=>((C,E,S,N)=>{if(N!==S.get()){if(!Ut(E,N))throw new Error(`Editor mode '${N}' is invalid`);C.initialized?CS(C,S,E,N):C.on("init",()=>CS(C,S,E,N))}})(b,v.get(),g,h),get:()=>g.get(),register:(h,C)=>{v.set(((E,S,N)=>{if(Ot(_B,S))throw new Error(`Cannot override default mode ${S}`);return{...E,[S]:{...N,deactivate:()=>{try{N.deactivate()}catch(A){console.error(`problem while deactivating editor mode ${S}:`,A)}}}}})(v.get(),h,C))}};var h})(o),r.dispatch("SetupEditor",{editor:this});const p=x_(o);be(p)&&p.call(o,o)}render(){(e=>{const n=e.id;mo.setCode(f0(e));const r=()=>{ka.unbind(window,"ready",r),e.render()};if(!sa.Event.domLoaded)return void ka.bind(window,"ready",r);if(!e.getElement())return;const o=D(e.getElement()),s=y(o);var l;e.on("remove",()=>{wo(o.dom.attributes,i=>m(o,i.name)),ro(o,s)}),e.ui.styleSheetLoader=Wg.forElement(o,{contentCssCors:v0(l=e),referrerPolicy:lf(l)}),df(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||ka.getParent(n,"form");a&&(e.formElement=a,d_(e)&&!Cu(e.getElement())&&(ka.insertAfter(ka.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},ka.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!u_(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=r1(e),e.notificationManager=n1(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=ka.encode(i.content))}),f_(e)&&e.on("submit",()=>{e.initialized&&e.save()}),m_(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=rs.ScriptLoader,r=()=>{!t.removed&&(o=>{const s=Za(o);return!Rt(s)||ct(Ea.get(s))})(t)&&(o=>{const s=cf(o);return ct(fi.get(s))})(t)&&aB(t)};((o,s)=>{const a=Za(o);if(Rt(a)&&!sS(a)&&!Ut(Ea.urls,a)){const i=r_(o),l=i?o.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;Ea.load(a,l).catch(()=>{Bl(o,"ThemeLoadError",Dl("theme",l,a))})}})(t,e),((o,s)=>{const a=cf(o);if("plugin"!==a&&!Ut(fi.urls,a)){const i=o_(o),l=Rt(i)?o.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;fi.load(a,l).catch(()=>{Bl(o,"ModelLoadError",Dl("model",l,a))})}})(t,e),((o,s)=>{const a=f0(s),i=Xk(s);if(!mo.hasCode(a)&&"en"!==a){const l=Sr(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;o.add(l).catch(()=>{Bl(s,"LanguageLoadError",Dl("language",l,a))})}})(n,t),((o,s,a)=>{const i=aS(s,"default",a),l=(c=s,k.from(Hk(c)).filter(Sr).map(u=>({url:u,name:k.none()}))).orThunk(()=>aS(s,u0(s),""));var c;Z((c=>{const u=[],f=p=>{u.push(p)};for(let p=0;p<c.length;p++)c[p].each(f);return u})([i,l]),c=>{o.add(c.url).catch(()=>{var u,f,p;u=s,f=c.url,p=c.name.getOrUndefined(),Bl(u,"IconsLoadError",Dl("icons",f,p))})})})(n,t,e),((o,s)=>{const a=(i,l)=>{mi.load(i,l).catch(()=>{Bl(o,"PluginLoadError",Dl("plugin",l,i))})};xe(b_(o),(i,l)=>{a(l,i),o.options.set("plugins",Bc(o).concat(l))}),Z(Bc(o),i=>{!(i=lt.trim(i))||mi.urls[i]||sS(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(r,r)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return li(this)}translate(e){return mo.translate(e)}getParam(e,n,r){const o=this.options;return o.isRegistered(e)||(ct(r)?o.register(e,{processor:r,default:n}):o.register(e,{processor:je,default:n})),o.isSet(e)||Me(n)?o.get(e):n}hasPlugin(e,n){return!(!Ot(Bc(this),e)||n&&void 0===mi.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,r){this.editorCommands.addCommand(e,n,r)}addQueryStateHandler(e,n,r){this.editorCommands.addQueryStateHandler(e,n,r)}addQueryValueHandler(e,n,r){this.editorCommands.addQueryValueHandler(e,n,r)}addShortcut(e,n,r,o){this.shortcuts.add(e,n,r,o)}execCommand(e,n,r,o){return this.editorCommands.execCommand(e,n,r,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(Ta.show(e.getContainer()),Ta.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Ta.hide(e.getContainer()),Ta.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...e,load:!0},s=Cu(r)?r.value:r.innerHTML,a=n.setContent(s,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),a}return""}save(e={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...e,save:!0,element:r};let s=n.getContent(o);const a={...o,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,Cu(r))r.value=s;else{!e.is_removing&&n.inline||(r.innerHTML=s);const i=Ta.getParent(n.id,"form");i&&RB(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=o.element=r=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return ep(this,e,n)}getContent(e){return((n,r={})=>{const o=(s=r,a=r.format?r.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return OC(n,o).fold(pe,s=>{const a=(l=s,tp(n).editor.getContent(l));var l;return BC(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=ES({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?ep(this,this.startContent,{format:"raw"}):ep(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||Ta.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ta.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const r=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:r?.body)&&void 0!==n?n:null}convertURL(e,n,r){const o=this,s=o.options.get,a=E_(o);if(be(a))return a.call(o,e,r,!0,n);if(!s("convert_urls")||"link"===r||Kt(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length)return e;const i=new Gr(e);return"http"!==i.protocol&&"https"!==i.protocol&&""!==i.protocol?e:s("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,r)=>{var s;s=r,rn(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,r;(n=this)._editableRoot!==(r=e)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:r}=e,o=e.getBody(),s=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ct(s?.nextSibling)&&bd.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&o&&bd.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),bd.remove(e.getContainer()),vd(n),vd(r),e.destroy()}var a})(this)}destroy(e){((n,r)=>{const{selection:o,dom:s}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),vd(o),vd(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),bd.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const wi=Re.DOM,ru=lt.each;let ou,SS=!1,nr=[];const su=t=>{const e=t.type;ru(Ls.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},kS=t=>{if(t!==SS){const e=Re.DOM;t?(e.bind(window,"resize",su),e.bind(window,"scroll",su)):(e.unbind(window,"resize",su),e.unbind(window,"scroll",su)),SS=t}},_S=t=>{const e=nr;return nr=Vt(nr,n=>t!==n),Ls.activeEditor===t&&(Ls.activeEditor=nr.length>0?nr[0]:null),Ls.focusedEditor===t&&(Ls.focusedEditor=null),e.length!==nr.length},OB="CSS1Compat"!==document.compatMode,Ls={...xg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"3.0",releaseDate:"2024-08-07",i18n:mo,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",r=Gr.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)e=o.base||o.baseURL,n=o.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new Gr(r).toAbsolute(e),t.documentBaseURL=r,t.baseURI=new Gr(t.baseURL),t.suffix=n,(s=t).on("AddEditor",Et(LN,s)),s.on("RemoveEditor",Et(MN,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const r=t.plugin_base_urls;void 0!==r&&xe(r,(o,s)=>{qn.PluginManager.urls[s]=o})},init(t){const e=this;let n;const r=lt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var c;wi.unbind(window,"ready",s),(()=>{const u=t.onpageload;u&&u.apply(e,[])})(),l=Eo((c=t,ge.browser.isIE()||ge.browser.isEdge()?(xd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):OB?(xd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Rt(c.selector)?wi.select(c.selector):ct(c.target)?[c.target]:[])),lt.each(l,c=>{var u;(u=e.get(c.id))&&u.initialized&&!(u.getContainer()||u.getBody()).parentNode&&(_S(u),u.unbindAllNativeEvents(),u.destroy(!0),u.removed=!0)}),l=lt.grep(l,c=>!e.get(c.id)),0===l.length?o([]):ru(l,c=>{t.inline&&c.tagName.toLowerCase()in r?xd("Could not initialize inline editor on invalid inline target element",c):((u,f,p)=>{const b=new nu(u,f,e);i.push(b),b.on("init",()=>{++a===l.length&&o(i)}),b.targetElm=b.targetElm||p,b.render()})((u=>{let f=u.id;return f||(f=Te(u,"name").filter(p=>!wi.get(p)).getOrThunk(wi.uniqueId),u.setAttribute("id",f)),f})(c),t,c)})};return wi.bind(window,"ready",s),new Promise(a=>{n?a(n):o=i=>{a(i)}})},get(t){return 0===arguments.length?nr.slice(0):Rt(t)?Ge(nr,e=>e.id===t).getOr(null):x(t)&&nr[t]?nr[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&nr.push(t),kS(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),ou||(ou=r=>{const o=e.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",ou))),t},createEditor(t,e){return this.add(new nu(t,e,this))},remove(t){const e=this;let n;if(t){if(!Rt(t))return n=t,Jt(e.get(n.id))?null:(_S(n)&&e.dispatch("RemoveEditor",{editor:n}),0===nr.length&&window.removeEventListener("beforeunload",ou),n.remove(),kS(nr.length>0),n);ru(wi.select(t),r=>{n=e.get(r.id),n&&e.remove(n)})}else for(let r=nr.length-1;r>=0;r--)e.remove(nr[r])},execCommand(t,e,n){var r;const o=this,s=Kt(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(t){case"mceAddEditor":return o.get(s)||new nu(s,n.options,o).render(),!0;case"mceRemoveEditor":{const a=o.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(t,e,n)},triggerSave:()=>{ru(nr,t=>{t.save()})},addI18n:(t,e)=>{mo.add(t,e)},translate:t=>mo.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new Gr(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Gr(this.baseURL)}};Ls.setup();const BB=(()=>{const t=ns();return{FakeClipboardItem:e=>({items:e,types:an(e),getType:n=>Te(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),NS=Math.min,Ei=Math.max,au=Math.round,AS=(t,e,n)=>{let r=e.x,o=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(o+=l),"r"===c[1]&&(r+=i),"c"===c[0]&&(o+=au(l/2)),"c"===c[1]&&(r+=au(i/2)),"b"===c[3]&&(o-=a),"r"===c[4]&&(r-=s),"c"===c[3]&&(o-=au(a/2)),"c"===c[4]&&(r-=au(s/2)),Si(r,o,s,a)},Si=(t,e,n,r)=>({x:t,y:e,w:n,h:r}),DB={inflate:(t,e,n)=>Si(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:AS,findBestRelativePosition:(t,e,n,r)=>{for(let o=0;o<r.length;o++){const s=AS(t,e,r[o]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return r[o]}return null},intersect:(t,e)=>{const n=Ei(t.x,e.x),r=Ei(t.y,e.y),o=NS(t.x+t.w,e.x+e.w),s=NS(t.y+t.h,e.y+e.h);return o-n<0||s-r<0?null:Si(n,r,o-n,s-r)},clamp:(t,e,n)=>{let r=t.x,o=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,c=Ei(0,e.x-r),u=Ei(0,e.y-o),f=Ei(0,s-i),p=Ei(0,a-l);return r+=c,o+=u,n&&(s+=c,a+=u,r-=f,o-=p),s-=f,a-=p,Si(r,o,s-r,a-o)},create:Si,fromClientRect:t=>Si(t.left,t.top,t.width,t.height)},PB=(()=>{const t={},e={},n={};return{load:(r,o)=>{const s=`Script at URL "${o}" failed to load`,a=`Script at URL "${o}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(void 0!==t[r])return t[r];{const i=new Promise((l,c)=>{const u=((f,p,b=1e3)=>{let g=!1,v=null;const h=S=>(...N)=>{g||(g=!0,null!==v&&(clearTimeout(v),v=null),S.apply(null,N))},C=h(f),E=h(p);return{start:(...S)=>{g||null!==v||(v=setTimeout(()=>E.apply(null,S),b))},resolve:C,reject:E}})(l,c);e[r]=u.resolve,rs.ScriptLoader.loadScript(o).then(()=>u.start(a),()=>u.reject(s))});return t[r]=i,i}},add:(r,o)=>{void 0!==e[r]&&(e[r](o),delete e[r]),t[r]=Promise.resolve(o),n[r]=o},has:r=>r in n,get:r=>n[r],unload:r=>{delete t[r],delete n[r]}}})();let Zl;try{const t="__storage_test__";Zl=window.localStorage,Zl.setItem(t,t),Zl.removeItem(t)}catch{Zl=(()=>{let e={},n=[];const r={getItem:o=>e[o]||null,setItem:(o,s)=>{n.push(o),e[o]=String(s)},key:o=>n[o],removeItem:o=>{n=n.filter(s=>s===o),delete e[o]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const LB={geom:{Rect:DB},util:{Delay:Lr,Tools:lt,VK:vt,URI:Gr,EventDispatcher:Cg,Observable:xg,I18n:mo,LocalStorage:Zl,ImageUploader:t=>{const e=a1(),n=l1(t,e);return{upload:(r,o=!0)=>n.upload(r,o?i1(t):void 0)}}},dom:{EventUtils:sa,TreeWalker:pn,TextSeeker:la,DOMUtils:Re,ScriptLoader:rs,RangeUtils:va,Serializer:GC,StyleSheetLoader:$g,ControlSelection:Nb,BookmarkManager:vl,Selection:YC,Event:sa.Event},html:{Styles:Fu,Entities:oa,Node:$n,Schema:ws,DomParser:ui,Writer:pv,Serializer:Ts},Env:ge,AddOnManager:qn,Annotator:vb,Formatter:u1,UndoManager:m1,EditorCommands:mS,WindowManager:r1,NotificationManager:n1,EditorObservable:bS,Shortcuts:wS,Editor:nu,FocusManager:Gb,EditorManager:Ls,DOM:Re.DOM,ScriptLoader:rs.ScriptLoader,PluginManager:mi,ThemeManager:Ea,ModelManager:fi,IconManager:yd,Resource:PB,FakeClipboard:BB,trim:lt.trim,isArray:lt.isArray,is:lt.is,toArray:lt.toArray,makeMap:lt.makeMap,each:lt.each,map:lt.map,grep:lt.grep,inArray:lt.inArray,extend:lt.extend,walk:lt.walk,resolve:lt.resolve,explode:lt.explode,_addCacheSuffix:lt._addCacheSuffix},TS=lt.extend(Ls,LB);(t=>{window.tinymce=t,window.tinyMCE=t})(TS),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(TS)}(),function(bt,Yt){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=bt.document?Yt(bt,!0):function(Qt){if(!Qt.document)throw new Error("jQuery requires a window with a document");return Yt(Qt)}:Yt(bt)}(typeof window<"u"?window:this,function(bt,Yt){"use strict";var Qt=[],Wt=Object.getPrototypeOf,ie=Qt.slice,Xe=Qt.flat?function(d){return Qt.flat.call(d)}:function(d){return Qt.concat.apply([],d)},Rn=Qt.push,Je=Qt.indexOf,Kn={},wr=Kn.toString,On=Kn.hasOwnProperty,Er=On.toString,Rt=Er.call(Object),Kt={},It=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},it=function(d){return null!=d&&d===d.window},Jt=bt.document,En={type:!0,src:!0,nonce:!0,noModule:!0};function Me(d,m,y){var w,_,T=(y=y||Jt).createElement("script");if(T.text=d,m)for(w in En)(_=m[w]||m.getAttribute&&m.getAttribute(w))&&T.setAttribute(w,_);y.head.appendChild(T).parentNode.removeChild(T)}function we(d){return null==d?d+"":"object"==typeof d||"function"==typeof d?Kn[wr.call(d)]||"object":typeof d}var be=/HTML$/i,x=function(d,m){return new x.fn.init(d,m)};function Un(d){var m=!!d&&"length"in d&&d.length,y=we(d);return!It(d)&&!it(d)&&("array"===y||0===m||"number"==typeof m&&0<m&&m-1 in d)}function _t(d,m){return d.nodeName&&d.nodeName.toLowerCase()===m.toLowerCase()}x.fn=x.prototype={jquery:"3.7.1",constructor:x,length:0,toArray:function(){return ie.call(this)},get:function(d){return null==d?ie.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var m=x.merge(this.constructor(),d);return m.prevObject=this,m},each:function(d){return x.each(this,d)},map:function(d){return this.pushStack(x.map(this,function(m,y){return d.call(m,y,m)}))},slice:function(){return this.pushStack(ie.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(d,m){return(m+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(d,m){return m%2}))},eq:function(d){var m=this.length,y=+d+(d<0?m:0);return this.pushStack(0<=y&&y<m?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:Rn,sort:Qt.sort,splice:Qt.splice},x.extend=x.fn.extend=function(){var d,m,y,w,_,T,O=arguments[0]||{},q=1,H=arguments.length,K=!1;for("boolean"==typeof O&&(K=O,O=arguments[q]||{},q++),"object"==typeof O||It(O)||(O={}),q===H&&(O=this,q--);q<H;q++)if(null!=(d=arguments[q]))for(m in d)w=d[m],"__proto__"!==m&&O!==w&&(K&&w&&(x.isPlainObject(w)||(_=Array.isArray(w)))?(y=O[m],T=_&&!Array.isArray(y)?[]:_||x.isPlainObject(y)?y:{},_=!1,O[m]=x.extend(K,T,w)):void 0!==w&&(O[m]=w));return O},x.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var m,y;return!(!d||"[object Object]"!==wr.call(d)||(m=Wt(d))&&("function"!=typeof(y=On.call(m,"constructor")&&m.constructor)||Er.call(y)!==Rt))},isEmptyObject:function(d){var m;for(m in d)return!1;return!0},globalEval:function(d,m,y){Me(d,{nonce:m&&m.nonce},y)},each:function(d,m){var y,w=0;if(Un(d))for(y=d.length;w<y&&!1!==m.call(d[w],w,d[w]);w++);else for(w in d)if(!1===m.call(d[w],w,d[w]))break;return d},text:function(d){var m,y="",w=0,_=d.nodeType;if(!_)for(;m=d[w++];)y+=x.text(m);return 1===_||11===_?d.textContent:9===_?d.documentElement.textContent:3===_||4===_?d.nodeValue:y},makeArray:function(d,m){var y=m||[];return null!=d&&(Un(Object(d))?x.merge(y,"string"==typeof d?[d]:d):Rn.call(y,d)),y},inArray:function(d,m,y){return null==m?-1:Je.call(m,d,y)},isXMLDoc:function(d){var y=d&&(d.ownerDocument||d).documentElement;return!be.test(d&&d.namespaceURI||y&&y.nodeName||"HTML")},merge:function(d,m){for(var y=+m.length,w=0,_=d.length;w<y;w++)d[_++]=m[w];return d.length=_,d},grep:function(d,m,y){for(var w=[],_=0,T=d.length,O=!y;_<T;_++)!m(d[_],_)!==O&&w.push(d[_]);return w},map:function(d,m,y){var w,_,T=0,O=[];if(Un(d))for(w=d.length;T<w;T++)null!=(_=m(d[T],T,y))&&O.push(_);else for(T in d)null!=(_=m(d[T],T,y))&&O.push(_);return Xe(O)},guid:1,support:Kt}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=Qt[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,m){Kn["[object "+m+"]"]=m.toLowerCase()});var Bn=Qt.pop,Fs=Qt.sort,mt=Qt.splice,pe="[\\x20\\t\\r\\n\\f]",Jr=new RegExp("^"+pe+"+|((?:^|[^\\\\])(?:\\\\.)*)"+pe+"+$","g");x.contains=function(d,m){var y=m&&m.parentNode;return d===y||!(!y||1!==y.nodeType||!(d.contains?d.contains(y):d.compareDocumentPosition&&16&d.compareDocumentPosition(y)))};var Et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function yo(d,m){return m?"\0"===d?"\ufffd":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}x.escapeSelector=function(d){return(d+"").replace(Et,yo)};var mr=Jt,Co=Rn;!function(){var d,m,y,w,_,T,O,q,H,K,tt=Co,at=x.expando,J=0,ut=0,Mt=Ie(),le=Ie(),D=Ie(),tn=Ie(),mn=function(L,W){return L===W&&(_=!0),0},ln="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Nr="(?:\\\\[\\da-fA-F]{1,6}"+pe+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",zt="\\["+pe+"*("+Nr+")(?:"+pe+"*([*^$|!~]?=)"+pe+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Nr+"))|)"+pe+"*\\]",kn=":("+Nr+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+zt+")*)|.*)\\)|)",Ne=new RegExp(pe+"+","g"),Le=new RegExp("^"+pe+"*,"+pe+"*"),so=new RegExp("^"+pe+"*([>+~]|"+pe+")"+pe+"*"),sr=new RegExp(pe+"|>"),ar=new RegExp(kn),vs=new RegExp("^"+Nr+"$"),Ln={ID:new RegExp("^#("+Nr+")"),CLASS:new RegExp("^\\.("+Nr+")"),TAG:new RegExp("^("+Nr+"|[*])"),ATTR:new RegExp("^"+zt),PSEUDO:new RegExp("^"+kn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+pe+"*(even|odd|(([+-]|)(\\d*)n|)"+pe+"*(?:([+-]|)"+pe+"*(\\d+)|))"+pe+"*\\)|)","i"),bool:new RegExp("^(?:"+ln+")$","i"),needsContext:new RegExp("^"+pe+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+pe+"*((?:-\\d)?\\d*)"+pe+"*\\)|)(?=[^-]|$)","i")},hr=/^(?:input|select|textarea|button)$/i,Qo=/^h\d$/i,ir=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ee=/[+~]/,$e=new RegExp("\\\\[\\da-fA-F]{1,6}"+pe+"?|\\\\([^\\r\\n\\f])","g"),_n=function(L,W){var et="0x"+L.slice(1)-65536;return W||(et<0?String.fromCharCode(et+65536):String.fromCharCode(et>>10|55296,1023&et|56320))},Wr=function(){Zn()},Nn=lo(function(L){return!0===L.disabled&&_t(L,"fieldset")},{dir:"parentNode",next:"legend"});try{tt.apply(Qt=ie.call(mr.childNodes),mr.childNodes)}catch{tt={apply:function(W,et){Co.apply(W,ie.call(et))},call:function(W){Co.apply(W,ie.call(arguments,1))}}}function se(L,W,et,nt){var ft,Bt,Ft,Zt,St,Ae,de,fe=W&&W.ownerDocument,Gt=W?W.nodeType:9;if(et=et||[],"string"!=typeof L||!L||1!==Gt&&9!==Gt&&11!==Gt)return et;if(!nt&&(Zn(W),W=W||T,q)){if(11!==Gt&&(St=ir.exec(L)))if(ft=St[1]){if(9===Gt){if(!(Ft=W.getElementById(ft)))return et;if(Ft.id===ft)return tt.call(et,Ft),et}else if(fe&&(Ft=fe.getElementById(ft))&&se.contains(W,Ft)&&Ft.id===ft)return tt.call(et,Ft),et}else{if(St[2])return tt.apply(et,W.getElementsByTagName(L)),et;if((ft=St[3])&&W.getElementsByClassName)return tt.apply(et,W.getElementsByClassName(ft)),et}if(!(tn[L+" "]||H&&H.test(L))){if(de=L,fe=W,1===Gt&&(sr.test(L)||so.test(L))){for((fe=Ee.test(L)&&Tr(W.parentNode)||W)==W&&Kt.scope||((Zt=W.getAttribute("id"))?Zt=x.escapeSelector(Zt):W.setAttribute("id",Zt=at)),Bt=(Ae=io(L)).length;Bt--;)Ae[Bt]=(Zt?"#"+Zt:":scope")+" "+Zo(Ae[Bt]);de=Ae.join(",")}try{return tt.apply(et,fe.querySelectorAll(de)),et}catch{tn(L,!0)}finally{Zt===at&&W.removeAttribute("id")}}}return Zs(L.replace(Jr,"$1"),W,et,nt)}function Ie(){var L=[];return function W(et,nt){return L.push(et+" ")>m.cacheLength&&delete W[L.shift()],W[et+" "]=nt}}function Ye(L){return L[at]=!0,L}function We(L){var W=T.createElement("fieldset");try{return!!L(W)}catch{return!1}finally{W.parentNode&&W.parentNode.removeChild(W),W=null}}function Ar(L){return function(W){return _t(W,"input")&&W.type===L}}function ys(L){return function(W){return(_t(W,"input")||_t(W,"button"))&&W.type===L}}function ao(L){return function(W){return"form"in W?W.parentNode&&!1===W.disabled?"label"in W?"label"in W.parentNode?W.parentNode.disabled===L:W.disabled===L:W.isDisabled===L||W.isDisabled!==!L&&Nn(W)===L:W.disabled===L:"label"in W&&W.disabled===L}}function Ro(L){return Ye(function(W){return W=+W,Ye(function(et,nt){for(var ft,Bt=L([],et.length,W),Ft=Bt.length;Ft--;)et[ft=Bt[Ft]]&&(et[ft]=!(nt[ft]=et[ft]))})})}function Tr(L){return L&&typeof L.getElementsByTagName<"u"&&L}function Zn(L){var W,et=L?L.ownerDocument||L:mr;return et!=T&&9===et.nodeType&&et.documentElement&&(O=(T=et).documentElement,q=!x.isXMLDoc(T),K=O.matches||O.webkitMatchesSelector||O.msMatchesSelector,O.msMatchesSelector&&mr!=T&&(W=T.defaultView)&&W.top!==W&&W.addEventListener("unload",Wr),Kt.getById=We(function(nt){return O.appendChild(nt).id=x.expando,!T.getElementsByName||!T.getElementsByName(x.expando).length}),Kt.disconnectedMatch=We(function(nt){return K.call(nt,"*")}),Kt.scope=We(function(){return T.querySelectorAll(":scope")}),Kt.cssHas=We(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Kt.getById?(m.filter.ID=function(nt){var ft=nt.replace($e,_n);return function(Bt){return Bt.getAttribute("id")===ft}},m.find.ID=function(nt,ft){if(typeof ft.getElementById<"u"&&q){var Bt=ft.getElementById(nt);return Bt?[Bt]:[]}}):(m.filter.ID=function(nt){var ft=nt.replace($e,_n);return function(Bt){var Ft=typeof Bt.getAttributeNode<"u"&&Bt.getAttributeNode("id");return Ft&&Ft.value===ft}},m.find.ID=function(nt,ft){if(typeof ft.getElementById<"u"&&q){var Bt,Ft,Zt,St=ft.getElementById(nt);if(St){if((Bt=St.getAttributeNode("id"))&&Bt.value===nt)return[St];for(Zt=ft.getElementsByName(nt),Ft=0;St=Zt[Ft++];)if((Bt=St.getAttributeNode("id"))&&Bt.value===nt)return[St]}return[]}}),m.find.TAG=function(nt,ft){return typeof ft.getElementsByTagName<"u"?ft.getElementsByTagName(nt):ft.querySelectorAll(nt)},m.find.CLASS=function(nt,ft){if(typeof ft.getElementsByClassName<"u"&&q)return ft.getElementsByClassName(nt)},H=[],We(function(nt){var ft;O.appendChild(nt).innerHTML="<a id='"+at+"' href='' disabled='disabled'></a><select id='"+at+"-\r\\' disabled='disabled'><option selected=''></option></select>",nt.querySelectorAll("[selected]").length||H.push("\\["+pe+"*(?:value|"+ln+")"),nt.querySelectorAll("[id~="+at+"-]").length||H.push("~="),nt.querySelectorAll("a#"+at+"+*").length||H.push(".#.+[+~]"),nt.querySelectorAll(":checked").length||H.push(":checked"),(ft=T.createElement("input")).setAttribute("type","hidden"),nt.appendChild(ft).setAttribute("name","D"),O.appendChild(nt).disabled=!0,2!==nt.querySelectorAll(":disabled").length&&H.push(":enabled",":disabled"),(ft=T.createElement("input")).setAttribute("name",""),nt.appendChild(ft),nt.querySelectorAll("[name='']").length||H.push("\\["+pe+"*name"+pe+"*="+pe+"*(?:''|\"\")")}),Kt.cssHas||H.push(":has"),H=H.length&&new RegExp(H.join("|")),mn=function(nt,ft){if(nt===ft)return _=!0,0;var Bt=!nt.compareDocumentPosition-!ft.compareDocumentPosition;return Bt||(1&(Bt=(nt.ownerDocument||nt)==(ft.ownerDocument||ft)?nt.compareDocumentPosition(ft):1)||!Kt.sortDetached&&ft.compareDocumentPosition(nt)===Bt?nt===T||nt.ownerDocument==mr&&se.contains(mr,nt)?-1:ft===T||ft.ownerDocument==mr&&se.contains(mr,ft)?1:w?Je.call(w,nt)-Je.call(w,ft):0:4&Bt?-1:1)}),T}for(d in se.matches=function(L,W){return se(L,null,null,W)},se.matchesSelector=function(L,W){if(Zn(L),q&&!tn[W+" "]&&(!H||!H.test(W)))try{var et=K.call(L,W);if(et||Kt.disconnectedMatch||L.document&&11!==L.document.nodeType)return et}catch{tn(W,!0)}return 0<se(W,T,null,[L]).length},se.contains=function(L,W){return(L.ownerDocument||L)!=T&&Zn(L),x.contains(L,W)},se.attr=function(L,W){(L.ownerDocument||L)!=T&&Zn(L);var et=m.attrHandle[W.toLowerCase()],nt=et&&On.call(m.attrHandle,W.toLowerCase())?et(L,W,!q):void 0;return void 0!==nt?nt:L.getAttribute(W)},se.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},x.uniqueSort=function(L){var W,et=[],nt=0,ft=0;if(_=!Kt.sortStable,w=!Kt.sortStable&&ie.call(L,0),Fs.call(L,mn),_){for(;W=L[ft++];)W===L[ft]&&(nt=et.push(ft));for(;nt--;)mt.call(L,et[nt],1)}return w=null,L},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(ie.apply(this)))},(m=x.expr={cacheLength:50,createPseudo:Ye,match:Ln,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace($e,_n),L[3]=(L[3]||L[4]||L[5]||"").replace($e,_n),"~="===L[2]&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),"nth"===L[1].slice(0,3)?(L[3]||se.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*("even"===L[3]||"odd"===L[3])),L[5]=+(L[7]+L[8]||"odd"===L[3])):L[3]&&se.error(L[0]),L},PSEUDO:function(L){var W,et=!L[6]&&L[2];return Ln.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":et&&ar.test(et)&&(W=io(et,!0))&&(W=et.indexOf(")",et.length-W)-et.length)&&(L[0]=L[0].slice(0,W),L[2]=et.slice(0,W)),L.slice(0,3))}},filter:{TAG:function(L){var W=L.replace($e,_n).toLowerCase();return"*"===L?function(){return!0}:function(et){return _t(et,W)}},CLASS:function(L){var W=Mt[L+" "];return W||(W=new RegExp("(^|"+pe+")"+L+"("+pe+"|$)"))&&Mt(L,function(et){return W.test("string"==typeof et.className&&et.className||typeof et.getAttribute<"u"&&et.getAttribute("class")||"")})},ATTR:function(L,W,et){return function(nt){var ft=se.attr(nt,L);return null==ft?"!="===W:!W||(ft+="","="===W?ft===et:"!="===W?ft!==et:"^="===W?et&&0===ft.indexOf(et):"*="===W?et&&-1<ft.indexOf(et):"$="===W?et&&ft.slice(-et.length)===et:"~="===W?-1<(" "+ft.replace(Ne," ")+" ").indexOf(et):"|="===W&&(ft===et||ft.slice(0,et.length+1)===et+"-"))}},CHILD:function(L,W,et,nt,ft){var Bt="nth"!==L.slice(0,3),Ft="last"!==L.slice(-4),Zt="of-type"===W;return 1===nt&&0===ft?function(St){return!!St.parentNode}:function(St,Ae,de){var fe,Gt,ae,en,An,nn=Bt!==Ft?"nextSibling":"previousSibling",Jn=St.parentNode,lr=Zt&&St.nodeName.toLowerCase(),br=!de&&!Zt,De=!1;if(Jn){if(Bt){for(;nn;){for(ae=St;ae=ae[nn];)if(Zt?_t(ae,lr):1===ae.nodeType)return!1;An=nn="only"===L&&!An&&"nextSibling"}return!0}if(An=[Ft?Jn.firstChild:Jn.lastChild],Ft&&br){for(De=(en=(fe=(Gt=Jn[at]||(Jn[at]={}))[L]||[])[0]===J&&fe[1])&&fe[2],ae=en&&Jn.childNodes[en];ae=++en&&ae&&ae[nn]||(De=en=0)||An.pop();)if(1===ae.nodeType&&++De&&ae===St){Gt[L]=[J,en,De];break}}else if(br&&(De=en=(fe=(Gt=St[at]||(St[at]={}))[L]||[])[0]===J&&fe[1]),!1===De)for(;(ae=++en&&ae&&ae[nn]||(De=en=0)||An.pop())&&(!(Zt?_t(ae,lr):1===ae.nodeType)||!++De||(br&&((Gt=ae[at]||(ae[at]={}))[L]=[J,De]),ae!==St)););return(De-=ft)===nt||De%nt==0&&0<=De/nt}}},PSEUDO:function(L,W){var et,nt=m.pseudos[L]||m.setFilters[L.toLowerCase()]||se.error("unsupported pseudo: "+L);return nt[at]?nt(W):1<nt.length?(et=[L,L,"",W],m.setFilters.hasOwnProperty(L.toLowerCase())?Ye(function(ft,Bt){for(var Ft,Zt=nt(ft,W),St=Zt.length;St--;)ft[Ft=Je.call(ft,Zt[St])]=!(Bt[Ft]=Zt[St])}):function(ft){return nt(ft,0,et)}):nt}},pseudos:{not:Ye(function(L){var W=[],et=[],nt=Ha(L.replace(Jr,"$1"));return nt[at]?Ye(function(ft,Bt,Ft,Zt){for(var St,Ae=nt(ft,null,Zt,[]),de=ft.length;de--;)(St=Ae[de])&&(ft[de]=!(Bt[de]=St))}):function(ft,Bt,Ft){return W[0]=ft,nt(W,null,Ft,et),W[0]=null,!et.pop()}}),has:Ye(function(L){return function(W){return 0<se(L,W).length}}),contains:Ye(function(L){return L=L.replace($e,_n),function(W){return-1<(W.textContent||x.text(W)).indexOf(L)}}),lang:Ye(function(L){return vs.test(L||"")||se.error("unsupported lang: "+L),L=L.replace($e,_n).toLowerCase(),function(W){var et;do{if(et=q?W.lang:W.getAttribute("xml:lang")||W.getAttribute("lang"))return(et=et.toLowerCase())===L||0===et.indexOf(L+"-")}while((W=W.parentNode)&&1===W.nodeType);return!1}}),target:function(L){var W=bt.location&&bt.location.hash;return W&&W.slice(1)===L.id},root:function(L){return L===O},focus:function(L){return L===function(){try{return T.activeElement}catch{}}()&&T.hasFocus()&&!!(L.type||L.href||~L.tabIndex)},enabled:ao(!1),disabled:ao(!0),checked:function(L){return _t(L,"input")&&!!L.checked||_t(L,"option")&&!!L.selected},selected:function(L){return!0===L.selected},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!m.pseudos.empty(L)},header:function(L){return Qo.test(L.nodeName)},input:function(L){return hr.test(L.nodeName)},button:function(L){return _t(L,"input")&&"button"===L.type||_t(L,"button")},text:function(L){var W;return _t(L,"input")&&"text"===L.type&&(null==(W=L.getAttribute("type"))||"text"===W.toLowerCase())},first:Ro(function(){return[0]}),last:Ro(function(L,W){return[W-1]}),eq:Ro(function(L,W,et){return[et<0?et+W:et]}),even:Ro(function(L,W){for(var et=0;et<W;et+=2)L.push(et);return L}),odd:Ro(function(L,W){for(var et=1;et<W;et+=2)L.push(et);return L}),lt:Ro(function(L,W,et){var nt;for(nt=et<0?et+W:W<et?W:et;0<=--nt;)L.push(nt);return L}),gt:Ro(function(L,W,et){for(var nt=et<0?et+W:et;++nt<W;)L.push(nt);return L})}}).pseudos.nth=m.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})m.pseudos[d]=Ar(d);for(d in{submit:!0,reset:!0})m.pseudos[d]=ys(d);function ja(){}function io(L,W){var et,nt,ft,Bt,Ft,Zt,St,Ae=le[L+" "];if(Ae)return W?0:Ae.slice(0);for(Ft=L,Zt=[],St=m.preFilter;Ft;){for(Bt in et&&!(nt=Le.exec(Ft))||(nt&&(Ft=Ft.slice(nt[0].length)||Ft),Zt.push(ft=[])),et=!1,(nt=so.exec(Ft))&&(et=nt.shift(),ft.push({value:et,type:nt[0].replace(Jr," ")}),Ft=Ft.slice(et.length)),m.filter)!(nt=Ln[Bt].exec(Ft))||St[Bt]&&!(nt=St[Bt](nt))||(et=nt.shift(),ft.push({value:et,type:Bt,matches:nt}),Ft=Ft.slice(et.length));if(!et)break}return W?Ft.length:Ft?se.error(L):le(L,Zt).slice(0)}function Zo(L){for(var W=0,et=L.length,nt="";W<et;W++)nt+=L[W].value;return nt}function lo(L,W,et){var nt=W.dir,ft=W.next,Bt=ft||nt,Ft=et&&"parentNode"===Bt,Zt=ut++;return W.first?function(St,Ae,de){for(;St=St[nt];)if(1===St.nodeType||Ft)return L(St,Ae,de);return!1}:function(St,Ae,de){var fe,Gt,ae=[J,Zt];if(de){for(;St=St[nt];)if((1===St.nodeType||Ft)&&L(St,Ae,de))return!0}else for(;St=St[nt];)if(1===St.nodeType||Ft)if(Gt=St[at]||(St[at]={}),ft&&_t(St,ft))St=St[nt]||St;else{if((fe=Gt[Bt])&&fe[0]===J&&fe[1]===Zt)return ae[2]=fe[2];if((Gt[Bt]=ae)[2]=L(St,Ae,de))return!0}return!1}}function co(L){return 1<L.length?function(W,et,nt){for(var ft=L.length;ft--;)if(!L[ft](W,et,nt))return!1;return!0}:L[0]}function za(L,W,et,nt,ft){for(var Bt,Ft=[],Zt=0,St=L.length,Ae=null!=W;Zt<St;Zt++)(Bt=L[Zt])&&(et&&!et(Bt,nt,ft)||(Ft.push(Bt),Ae&&W.push(Zt)));return Ft}function Jo(L,W,et,nt,ft,Bt){return nt&&!nt[at]&&(nt=Jo(nt)),ft&&!ft[at]&&(ft=Jo(ft,Bt)),Ye(function(Ft,Zt,St,Ae){var de,fe,Gt,ae,en=[],An=[],nn=Zt.length,Jn=Ft||function(br,De,Vr){for(var cr=0,Cs=De.length;cr<Cs;cr++)se(br,De[cr],Vr);return Vr}(W||"*",St.nodeType?[St]:St,[]),lr=!L||!Ft&&W?Jn:za(Jn,en,L,St,Ae);if(et?et(lr,ae=ft||(Ft?L:nn||nt)?[]:Zt,St,Ae):ae=lr,nt)for(de=za(ae,An),nt(de,[],St,Ae),fe=de.length;fe--;)(Gt=de[fe])&&(ae[An[fe]]=!(lr[An[fe]]=Gt));if(Ft){if(ft||L){if(ft){for(de=[],fe=ae.length;fe--;)(Gt=ae[fe])&&de.push(lr[fe]=Gt);ft(null,ae=[],de,Ae)}for(fe=ae.length;fe--;)(Gt=ae[fe])&&-1<(de=ft?Je.call(Ft,Gt):en[fe])&&(Ft[de]=!(Zt[de]=Gt))}}else ae=za(ae===Zt?ae.splice(nn,ae.length):ae),ft?ft(null,Zt,ae,Ae):tt.apply(Zt,ae)})}function Ua(L){for(var W,et,nt,ft=L.length,Bt=m.relative[L[0].type],Ft=Bt||m.relative[" "],Zt=Bt?1:0,St=lo(function(fe){return fe===W},Ft,!0),Ae=lo(function(fe){return-1<Je.call(W,fe)},Ft,!0),de=[function(fe,Gt,ae){var en=!Bt&&(ae||Gt!=y)||((W=Gt).nodeType?St(fe,Gt,ae):Ae(fe,Gt,ae));return W=null,en}];Zt<ft;Zt++)if(et=m.relative[L[Zt].type])de=[lo(co(de),et)];else{if((et=m.filter[L[Zt].type].apply(null,L[Zt].matches))[at]){for(nt=++Zt;nt<ft&&!m.relative[L[nt].type];nt++);return Jo(1<Zt&&co(de),1<Zt&&Zo(L.slice(0,Zt-1).concat({value:" "===L[Zt-2].type?"*":""})).replace(Jr,"$1"),et,Zt<nt&&Ua(L.slice(Zt,nt)),nt<ft&&Ua(L=L.slice(nt)),nt<ft&&Zo(L))}de.push(et)}return co(de)}function Ha(L,W){var et,nt,ft,Bt,Ft,Zt,St=[],Ae=[],de=D[L+" "];if(!de){for(W||(W=io(L)),et=W.length;et--;)(de=Ua(W[et]))[at]?St.push(de):Ae.push(de);(de=D(L,(nt=Ae,Bt=0<(ft=St).length,Ft=0<nt.length,Zt=function(fe,Gt,ae,en,An){var nn,Jn,lr,br=0,De="0",Vr=fe&&[],cr=[],Cs=y,zi=fe||Ft&&m.find.TAG("*",An),Ui=J+=null==Cs?1:Math.random()||.1,mc=zi.length;for(An&&(y=Gt==T||Gt||An);De!==mc&&null!=(nn=zi[De]);De++){if(Ft&&nn){for(Jn=0,Gt||nn.ownerDocument==T||(Zn(nn),ae=!q);lr=nt[Jn++];)if(lr(nn,Gt||T,ae)){tt.call(en,nn);break}An&&(J=Ui)}Bt&&((nn=!lr&&nn)&&br--,fe&&Vr.push(nn))}if(br+=De,Bt&&De!==br){for(Jn=0;lr=ft[Jn++];)lr(Vr,cr,Gt,ae);if(fe){if(0<br)for(;De--;)Vr[De]||cr[De]||(cr[De]=Bn.call(en));cr=za(cr)}tt.apply(en,cr),An&&!fe&&0<cr.length&&1<br+ft.length&&x.uniqueSort(en)}return An&&(J=Ui,y=Cs),Vr},Bt?Ye(Zt):Zt))).selector=L}return de}function Zs(L,W,et,nt){var ft,Bt,Ft,Zt,St,Ae="function"==typeof L&&L,de=!nt&&io(L=Ae.selector||L);if(et=et||[],1===de.length){if(2<(Bt=de[0]=de[0].slice(0)).length&&"ID"===(Ft=Bt[0]).type&&9===W.nodeType&&q&&m.relative[Bt[1].type]){if(!(W=(m.find.ID(Ft.matches[0].replace($e,_n),W)||[])[0]))return et;Ae&&(W=W.parentNode),L=L.slice(Bt.shift().value.length)}for(ft=Ln.needsContext.test(L)?0:Bt.length;ft--&&!m.relative[Zt=(Ft=Bt[ft]).type];)if((St=m.find[Zt])&&(nt=St(Ft.matches[0].replace($e,_n),Ee.test(Bt[0].type)&&Tr(W.parentNode)||W))){if(Bt.splice(ft,1),!(L=nt.length&&Zo(Bt)))return tt.apply(et,nt),et;break}}return(Ae||Ha(L,de))(nt,W,!q,et,!W||Ee.test(L)&&Tr(W.parentNode)||W),et}ja.prototype=m.filters=m.pseudos,m.setFilters=new ja,Kt.sortStable=at.split("").sort(mn).join("")===at,Zn(),Kt.sortDetached=We(function(L){return 1&L.compareDocumentPosition(T.createElement("fieldset"))}),x.find=se,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,se.compile=Ha,se.select=Zs,se.setDocument=Zn,se.tokenize=io,se.escape=x.escapeSelector,se.getText=x.text,se.isXML=x.isXMLDoc,se.selectors=x.expr,se.support=x.support,se.uniqueSort=x.uniqueSort}();var Xn=function(d,m,y){for(var w=[],_=void 0!==y;(d=d[m])&&9!==d.nodeType;)if(1===d.nodeType){if(_&&x(d).is(y))break;w.push(d)}return w},Ce=function(d,m){for(var y=[];d;d=d.nextSibling)1===d.nodeType&&d!==m&&y.push(d);return y},je=x.expr.match.needsContext,k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function xo(d,m,y){return It(m)?x.grep(d,function(w,_){return!!m.call(w,_,w)!==y}):m.nodeType?x.grep(d,function(w){return w===m!==y}):"string"!=typeof m?x.grep(d,function(w){return-1<Je.call(m,w)!==y}):x.filter(m,d,y)}x.filter=function(d,m,y){var w=m[0];return y&&(d=":not("+d+")"),1===m.length&&1===w.nodeType?x.find.matchesSelector(w,d)?[w]:[]:x.find.matches(d,x.grep(m,function(_){return 1===_.nodeType}))},x.fn.extend({find:function(d){var m,y,w=this.length,_=this;if("string"!=typeof d)return this.pushStack(x(d).filter(function(){for(m=0;m<w;m++)if(x.contains(_[m],this))return!0}));for(y=this.pushStack([]),m=0;m<w;m++)x.find(d,_[m],y);return 1<w?x.uniqueSort(y):y},filter:function(d){return this.pushStack(xo(this,d||[],!1))},not:function(d){return this.pushStack(xo(this,d||[],!0))},is:function(d){return!!xo(this,"string"==typeof d&&je.test(d)?x(d):d||[],!1).length}});var Tt,oe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(d,m,y){var w,_;if(!d)return this;if(y=y||Tt,"string"==typeof d){if(!(w="<"===d[0]&&">"===d[d.length-1]&&3<=d.length?[null,d,null]:oe.exec(d))||!w[1]&&m)return!m||m.jquery?(m||y).find(d):this.constructor(m).find(d);if(w[1]){if(x.merge(this,x.parseHTML(w[1],(m=m instanceof x?m[0]:m)&&m.nodeType?m.ownerDocument||m:Jt,!0)),k.test(w[1])&&x.isPlainObject(m))for(w in m)It(this[w])?this[w](m[w]):this.attr(w,m[w]);return this}return(_=Jt.getElementById(w[2]))&&(this[0]=_,this.length=1),this}return d.nodeType?(this[0]=d,this.length=1,this):It(d)?void 0!==y.ready?y.ready(d):d(x):x.makeArray(d,this)}).prototype=x.fn,Tt=x(Jt);var ue=/^(?:parents|prev(?:Until|All))/,Ot={children:!0,contents:!0,next:!0,prev:!0};function _e(d,m){for(;(d=d[m])&&1!==d.nodeType;);return d}x.fn.extend({has:function(d){var m=x(d,this),y=m.length;return this.filter(function(){for(var w=0;w<y;w++)if(x.contains(this,m[w]))return!0})},closest:function(d,m){var y,w=0,_=this.length,T=[],O="string"!=typeof d&&x(d);if(!je.test(d))for(;w<_;w++)for(y=this[w];y&&y!==m;y=y.parentNode)if(y.nodeType<11&&(O?-1<O.index(y):1===y.nodeType&&x.find.matchesSelector(y,d))){T.push(y);break}return this.pushStack(1<T.length?x.uniqueSort(T):T)},index:function(d){return d?"string"==typeof d?Je.call(x(d),this[0]):Je.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,m){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(d,m))))},addBack:function(d){return this.add(null==d?this.prevObject:this.prevObject.filter(d))}}),x.each({parent:function(d){var m=d.parentNode;return m&&11!==m.nodeType?m:null},parents:function(d){return Xn(d,"parentNode")},parentsUntil:function(d,m,y){return Xn(d,"parentNode",y)},next:function(d){return _e(d,"nextSibling")},prev:function(d){return _e(d,"previousSibling")},nextAll:function(d){return Xn(d,"nextSibling")},prevAll:function(d){return Xn(d,"previousSibling")},nextUntil:function(d,m,y){return Xn(d,"nextSibling",y)},prevUntil:function(d,m,y){return Xn(d,"previousSibling",y)},siblings:function(d){return Ce((d.parentNode||{}).firstChild,d)},children:function(d){return Ce(d.firstChild)},contents:function(d){return null!=d.contentDocument&&Wt(d.contentDocument)?d.contentDocument:(_t(d,"template")&&(d=d.content||d),x.merge([],d.childNodes))}},function(d,m){x.fn[d]=function(y,w){var _=x.map(this,m,y);return"Until"!==d.slice(-5)&&(w=y),w&&"string"==typeof w&&(_=x.filter(w,_)),1<this.length&&(Ot[d]||x.uniqueSort(_),ue.test(d)&&_.reverse()),this.pushStack(_)}});var re=/[^\x20\t\r\n\f]+/g;function Z(d){return d}function wo(d){throw d}function Ur(d,m,y,w){var _;try{d&&It(_=d.promise)?_.call(d).done(m).fail(y):d&&It(_=d.then)?_.call(d,m,y):m.apply(void 0,[d].slice(w))}catch(T){y.apply(void 0,[T])}}x.Callbacks=function(d){var y;d="string"==typeof d?(y={},x.each(d.match(re)||[],function(J,ut){y[ut]=!0}),y):x.extend({},d);var w,_,T,O,q=[],H=[],K=-1,tt=function(){for(O=O||d.once,T=w=!0;H.length;K=-1)for(_=H.shift();++K<q.length;)!1===q[K].apply(_[0],_[1])&&d.stopOnFalse&&(K=q.length,_=!1);d.memory||(_=!1),w=!1,O&&(q=_?[]:"")},at={add:function(){return q&&(_&&!w&&(K=q.length-1,H.push(_)),function J(ut){x.each(ut,function(Mt,le){It(le)?d.unique&&at.has(le)||q.push(le):le&&le.length&&"string"!==we(le)&&J(le)})}(arguments),_&&!w&&tt()),this},remove:function(){return x.each(arguments,function(J,ut){for(var Mt;-1<(Mt=x.inArray(ut,q,Mt));)q.splice(Mt,1),Mt<=K&&K--}),this},has:function(J){return J?-1<x.inArray(J,q):0<q.length},empty:function(){return q&&(q=[]),this},disable:function(){return O=H=[],q=_="",this},disabled:function(){return!q},lock:function(){return O=H=[],_||w||(q=_=""),this},locked:function(){return!!O},fireWith:function(J,ut){return O||(ut=[J,(ut=ut||[]).slice?ut.slice():ut],H.push(ut),w||tt()),this},fire:function(){return at.fireWith(this,arguments),this},fired:function(){return!!T}};return at},x.extend({Deferred:function(d){var m=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],y="pending",w={state:function(){return y},always:function(){return _.done(arguments).fail(arguments),this},catch:function(T){return w.then(null,T)},pipe:function(){var T=arguments;return x.Deferred(function(O){x.each(m,function(q,H){var K=It(T[H[4]])&&T[H[4]];_[H[1]](function(){var tt=K&&K.apply(this,arguments);tt&&It(tt.promise)?tt.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[H[0]+"With"](this,K?[tt]:arguments)})}),T=null}).promise()},then:function(T,O,q){var H=0;function K(tt,at,J,ut){return function(){var Mt=this,le=arguments,D=function(){var mn,ln;if(!(tt<H)){if((mn=J.apply(Mt,le))===at.promise())throw new TypeError("Thenable self-resolution");It(ln=mn&&("object"==typeof mn||"function"==typeof mn)&&mn.then)?ut?ln.call(mn,K(H,at,Z,ut),K(H,at,wo,ut)):(H++,ln.call(mn,K(H,at,Z,ut),K(H,at,wo,ut),K(H,at,Z,at.notifyWith))):(J!==Z&&(Mt=void 0,le=[mn]),(ut||at.resolveWith)(Mt,le))}},tn=ut?D:function(){try{D()}catch(mn){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(mn,tn.error),H<=tt+1&&(J!==wo&&(Mt=void 0,le=[mn]),at.rejectWith(Mt,le))}};tt?tn():(x.Deferred.getErrorHook?tn.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(tn.error=x.Deferred.getStackHook()),bt.setTimeout(tn))}}return x.Deferred(function(tt){m[0][3].add(K(0,tt,It(q)?q:Z,tt.notifyWith)),m[1][3].add(K(0,tt,It(T)?T:Z)),m[2][3].add(K(0,tt,It(O)?O:wo))}).promise()},promise:function(T){return null!=T?x.extend(T,w):w}},_={};return x.each(m,function(T,O){var q=O[2],H=O[5];w[O[1]]=q.add,H&&q.add(function(){y=H},m[3-T][2].disable,m[3-T][3].disable,m[0][2].lock,m[0][3].lock),q.add(O[3].fire),_[O[0]]=function(){return _[O[0]+"With"](this===_?void 0:this,arguments),this},_[O[0]+"With"]=q.fireWith}),w.promise(_),d&&d.call(_,_),_},when:function(d){var m=arguments.length,y=m,w=Array(y),_=ie.call(arguments),T=x.Deferred(),O=function(q){return function(H){w[q]=this,_[q]=1<arguments.length?ie.call(arguments):H,--m||T.resolveWith(w,_)}};if(m<=1&&(Ur(d,T.done(O(y)).resolve,T.reject,!m),"pending"===T.state()||It(_[y]&&_[y].then)))return T.then();for(;y--;)Ur(_[y],O(y),T.reject);return T.promise()}});var Vt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(d,m){bt.console&&bt.console.warn&&d&&Vt.test(d.name)&&bt.console.warn("jQuery.Deferred exception: "+d.message,d.stack,m)},x.readyException=function(d){bt.setTimeout(function(){throw d})};var $o=x.Deferred();function yn(){Jt.removeEventListener("DOMContentLoaded",yn),bt.removeEventListener("load",yn),x.ready()}x.fn.ready=function(d){return $o.then(d).catch(function(m){x.readyException(m)}),this},x.extend({isReady:!1,readyWait:1,ready:function(d){(!0===d?--x.readyWait:x.isReady)||(x.isReady=!0)!==d&&0<--x.readyWait||$o.resolveWith(Jt,[x])}}),x.ready.then=$o.then,"complete"===Jt.readyState||"loading"!==Jt.readyState&&!Jt.documentElement.doScroll?bt.setTimeout(x.ready):(Jt.addEventListener("DOMContentLoaded",yn),bt.addEventListener("load",yn));var Hr=function(d,m,y,w,_,T,O){var q=0,H=d.length,K=null==y;if("object"===we(y))for(q in _=!0,y)Hr(d,m,q,y[q],!0,T,O);else if(void 0!==w&&(_=!0,It(w)||(O=!0),K&&(O?(m.call(d,w),m=null):(K=m,m=function(tt,at,J){return K.call(x(tt),J)})),m))for(;q<H;q++)m(d[q],y,O?w:w.call(d[q],q,m(d[q],y)));return _?d:K?m.call(d):H?m(d[0],y):T},Ge=/^-ms-/,js=/-([a-z])/g;function tc(d,m){return m.toUpperCase()}function Qe(d){return d.replace(Ge,"ms-").replace(js,tc)}var or=function(d){return 1===d.nodeType||9===d.nodeType||!+d.nodeType};function to(){this.expando=x.expando+to.uid++}to.uid=1,to.prototype={cache:function(d){var m=d[this.expando];return m||(m={},or(d)&&(d.nodeType?d[this.expando]=m:Object.defineProperty(d,this.expando,{value:m,configurable:!0}))),m},set:function(d,m,y){var w,_=this.cache(d);if("string"==typeof m)_[Qe(m)]=y;else for(w in m)_[Qe(w)]=m[w];return _},get:function(d,m){return void 0===m?this.cache(d):d[this.expando]&&d[this.expando][Qe(m)]},access:function(d,m,y){return void 0===m||m&&"string"==typeof m&&void 0===y?this.get(d,m):(this.set(d,m,y),void 0!==y?y:m)},remove:function(d,m){var y,w=d[this.expando];if(void 0!==w){if(void 0!==m)for((y=(m=Array.isArray(m)?m.map(Qe):(m=Qe(m))in w?[m]:m.match(re)||[]).length);y--;)delete w[m[y]];(void 0===m||x.isEmptyObject(w))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var m=d[this.expando];return void 0!==m&&!x.isEmptyObject(m)}};var ne=new to,Dn=new to,Wo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,zs=/[A-Z]/g;function Sn(d,m,y){var w,_;if(void 0===y&&1===d.nodeType)if(w="data-"+m.replace(zs,"-$&").toLowerCase(),"string"==typeof(y=d.getAttribute(w))){try{y="true"===(_=y)||"false"!==_&&("null"===_?null:_===+_+""?+_:Wo.test(_)?JSON.parse(_):_)}catch{}Dn.set(d,m,y)}else y=void 0;return y}x.extend({hasData:function(d){return Dn.hasData(d)||ne.hasData(d)},data:function(d,m,y){return Dn.access(d,m,y)},removeData:function(d,m){Dn.remove(d,m)},_data:function(d,m,y){return ne.access(d,m,y)},_removeData:function(d,m){ne.remove(d,m)}}),x.fn.extend({data:function(d,m){var y,w,_,T=this[0],O=T&&T.attributes;if(void 0===d){if(this.length&&(_=Dn.get(T),1===T.nodeType&&!ne.get(T,"hasDataAttrs"))){for(y=O.length;y--;)O[y]&&0===(w=O[y].name).indexOf("data-")&&(w=Qe(w.slice(5)),Sn(T,w,_[w]));ne.set(T,"hasDataAttrs",!0)}return _}return"object"==typeof d?this.each(function(){Dn.set(this,d)}):Hr(this,function(q){var H;if(T&&void 0===q)return void 0!==(H=Dn.get(T,d))||void 0!==(H=Sn(T,d))?H:void 0;this.each(function(){Dn.set(this,d,q)})},null,m,1<arguments.length,null,!0)},removeData:function(d){return this.each(function(){Dn.remove(this,d)})}}),x.extend({queue:function(d,m,y){var w;if(d)return w=ne.get(d,m=(m||"fx")+"queue"),y&&(!w||Array.isArray(y)?w=ne.access(d,m,x.makeArray(y)):w.push(y)),w||[]},dequeue:function(d,m){var y=x.queue(d,m=m||"fx"),w=y.length,_=y.shift(),T=x._queueHooks(d,m);"inprogress"===_&&(_=y.shift(),w--),_&&("fx"===m&&y.unshift("inprogress"),delete T.stop,_.call(d,function(){x.dequeue(d,m)},T)),!w&&T&&T.empty.fire()},_queueHooks:function(d,m){var y=m+"queueHooks";return ne.get(d,y)||ne.access(d,y,{empty:x.Callbacks("once memory").add(function(){ne.remove(d,[m+"queue",y])})})}}),x.fn.extend({queue:function(d,m){var y=2;return"string"!=typeof d&&(m=d,d="fx",y--),arguments.length<y?x.queue(this[0],d):void 0===m?this:this.each(function(){var w=x.queue(this,d,m);x._queueHooks(this,d),"fx"===d&&"inprogress"!==w[0]&&x.dequeue(this,d)})},dequeue:function(d){return this.each(function(){x.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,m){var y,w=1,_=x.Deferred(),T=this,O=this.length,q=function(){--w||_.resolveWith(T,[T])};for("string"!=typeof d&&(m=d,d=void 0),d=d||"fx";O--;)(y=ne.get(T[O],d+"queueHooks"))&&y.empty&&(w++,y.empty.add(q));return q(),_.promise(m)}});var eo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Cn=new RegExp("^(?:([+-])=|)("+eo+")([a-z%]*)$","i"),Yn=["Top","Right","Bottom","Left"],Eo=Jt.documentElement,an=function(d){return x.contains(d.ownerDocument,d)},cu={composed:!0};Eo.getRootNode&&(an=function(d){return x.contains(d.ownerDocument,d)||d.getRootNode(cu)===d.ownerDocument});var xe=function(d,m){return"none"===(d=m||d).style.display||""===d.style.display&&an(d)&&"none"===x.css(d,"display")};function ds(d,m,y,w){var _,T,O=20,q=w?function(){return w.cur()}:function(){return x.css(d,m,"")},H=q(),K=y&&y[3]||(x.cssNumber[m]?"":"px"),tt=d.nodeType&&(x.cssNumber[m]||"px"!==K&&+H)&&Cn.exec(x.css(d,m));if(tt&&tt[3]!==K){for(K=K||tt[3],tt=+(H/=2)||1;O--;)x.style(d,m,tt+K),(1-T)*(1-(T=q()/H||.5))<=0&&(O=0),tt/=T;x.style(d,m,(tt*=2)+K),y=y||[]}return y&&(tt=+tt||+H||0,_=y[1]?tt+(y[1]+1)*y[2]:+y[2],w&&(w.unit=K,w.start=tt,w.end=_)),_}var ec={};function So(d,m){for(var y,w,_,T,O,q,H,K=[],tt=0,at=d.length;tt<at;tt++)(w=d[tt]).style&&(y=w.style.display,m?("none"===y&&(K[tt]=ne.get(w,"display")||null,K[tt]||(w.style.display="")),""===w.style.display&&xe(w)&&(K[tt]=(H=O=T=void 0,O=(_=w).ownerDocument,(H=ec[q=_.nodeName])||(T=O.body.appendChild(O.createElement(q)),H=x.css(T,"display"),T.parentNode.removeChild(T),"none"===H&&(H="block"),ec[q]=H)))):"none"!==y&&(K[tt]="none",ne.set(w,"display",y)));for(tt=0;tt<at;tt++)null!=K[tt]&&(d[tt].style.display=K[tt]);return d}x.fn.extend({show:function(){return So(this,!0)},hide:function(){return So(this)},toggle:function(d){return"boolean"==typeof d?d?this.show():this.hide():this.each(function(){xe(this)?x(this).show():x(this).hide()})}});var ko,_o,No=/^(?:checkbox|radio)$/i,Ba=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Te=/^$|^module$|\/(?:java|ecma)script/i;ko=Jt.createDocumentFragment().appendChild(Jt.createElement("div")),(_o=Jt.createElement("input")).setAttribute("type","radio"),_o.setAttribute("checked","checked"),_o.setAttribute("name","t"),ko.appendChild(_o),Kt.checkClone=ko.cloneNode(!0).cloneNode(!0).lastChild.checked,ko.innerHTML="<textarea>x</textarea>",Kt.noCloneChecked=!!ko.cloneNode(!0).lastChild.defaultValue,ko.innerHTML="<option></option>",Kt.option=!!ko.lastChild;var Ut={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function un(d,m){var y;return y=typeof d.getElementsByTagName<"u"?d.getElementsByTagName(m||"*"):typeof d.querySelectorAll<"u"?d.querySelectorAll(m||"*"):[],void 0===m||m&&_t(d,m)?x.merge([d],y):y}function Da(d,m){for(var y=0,w=d.length;y<w;y++)ne.set(d[y],"globalEval",!m||ne.get(m[y],"globalEval"))}Ut.tbody=Ut.tfoot=Ut.colgroup=Ut.caption=Ut.thead,Ut.th=Ut.td,Kt.option||(Ut.optgroup=Ut.option=[1,"<select multiple='multiple'>","</select>"]);var nc=/<|&#?\w+;/;function Pa(d,m,y,w,_){for(var T,O,q,H,K,tt,at=m.createDocumentFragment(),J=[],ut=0,Mt=d.length;ut<Mt;ut++)if((T=d[ut])||0===T)if("object"===we(T))x.merge(J,T.nodeType?[T]:T);else if(nc.test(T)){for(O=O||at.appendChild(m.createElement("div")),q=(Ba.exec(T)||["",""])[1].toLowerCase(),O.innerHTML=(H=Ut[q]||Ut._default)[1]+x.htmlPrefilter(T)+H[2],tt=H[0];tt--;)O=O.lastChild;x.merge(J,O.childNodes),(O=at.firstChild).textContent=""}else J.push(m.createTextNode(T));for(at.textContent="",ut=0;T=J[ut++];)if(w&&-1<x.inArray(T,w))_&&_.push(T);else if(K=an(T),O=un(at.appendChild(T),"script"),K&&Da(O),y)for(tt=0;T=O[tt++];)Te.test(T.type||"")&&y.push(T);return at}var Us=/^([^.]*)(?:\.(.+)|)/;function Ao(){return!0}function qr(){return!1}function us(d,m,y,w,_,T){var O,q;if("object"==typeof m){for(q in"string"!=typeof y&&(w=w||y,y=void 0),m)us(d,q,y,w,m[q],T);return d}if(null==w&&null==_?(_=y,w=y=void 0):null==_&&("string"==typeof y?(_=w,w=void 0):(_=w,w=y,y=void 0)),!1===_)_=qr;else if(!_)return d;return 1===T&&(O=_,(_=function(H){return x().off(H),O.apply(this,arguments)}).guid=O.guid||(O.guid=x.guid++)),d.each(function(){x.event.add(this,m,_,w,y)})}function Hs(d,m,y){y?(ne.set(d,m,!1),x.event.add(d,m,{namespace:!1,handler:function(w){var _,T=ne.get(this,m);if(1&w.isTrigger&&this[m]){if(T)(x.event.special[m]||{}).delegateType&&w.stopPropagation();else if(T=ie.call(arguments),ne.set(this,m,T),this[m](),_=ne.get(this,m),ne.set(this,m,!1),T!==_)return w.stopImmediatePropagation(),w.preventDefault(),_}else T&&(ne.set(this,m,x.event.trigger(T[0],T.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=Ao)}})):void 0===ne.get(d,m)&&x.event.add(d,m,Ao)}x.event={global:{},add:function(d,m,y,w,_){var T,O,q,H,K,tt,at,J,ut,Mt,le,D=ne.get(d);if(or(d))for(y.handler&&(y=(T=y).handler,_=T.selector),_&&x.find.matchesSelector(Eo,_),y.guid||(y.guid=x.guid++),(H=D.events)||(H=D.events=Object.create(null)),(O=D.handle)||(O=D.handle=function(tn){return typeof x<"u"&&x.event.triggered!==tn.type?x.event.dispatch.apply(d,arguments):void 0}),K=(m=(m||"").match(re)||[""]).length;K--;)ut=le=(q=Us.exec(m[K])||[])[1],Mt=(q[2]||"").split(".").sort(),ut&&(at=x.event.special[ut]||{},at=x.event.special[ut=(_?at.delegateType:at.bindType)||ut]||{},tt=x.extend({type:ut,origType:le,data:w,handler:y,guid:y.guid,selector:_,needsContext:_&&x.expr.match.needsContext.test(_),namespace:Mt.join(".")},T),(J=H[ut])||((J=H[ut]=[]).delegateCount=0,at.setup&&!1!==at.setup.call(d,w,Mt,O)||d.addEventListener&&d.addEventListener(ut,O)),at.add&&(at.add.call(d,tt),tt.handler.guid||(tt.handler.guid=y.guid)),_?J.splice(J.delegateCount++,0,tt):J.push(tt),x.event.global[ut]=!0)},remove:function(d,m,y,w,_){var T,O,q,H,K,tt,at,J,ut,Mt,le,D=ne.hasData(d)&&ne.get(d);if(D&&(H=D.events)){for(K=(m=(m||"").match(re)||[""]).length;K--;)if(ut=le=(q=Us.exec(m[K])||[])[1],Mt=(q[2]||"").split(".").sort(),ut){for(at=x.event.special[ut]||{},J=H[ut=(w?at.delegateType:at.bindType)||ut]||[],q=q[2]&&new RegExp("(^|\\.)"+Mt.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=T=J.length;T--;)tt=J[T],!_&&le!==tt.origType||y&&y.guid!==tt.guid||q&&!q.test(tt.namespace)||w&&w!==tt.selector&&("**"!==w||!tt.selector)||(J.splice(T,1),tt.selector&&J.delegateCount--,at.remove&&at.remove.call(d,tt));O&&!J.length&&(at.teardown&&!1!==at.teardown.call(d,Mt,D.handle)||x.removeEvent(d,ut,D.handle),delete H[ut])}else for(ut in H)x.event.remove(d,ut+m[K],y,w,!0);x.isEmptyObject(H)&&ne.remove(d,"handle events")}},dispatch:function(d){var m,y,w,_,T,O,q=new Array(arguments.length),H=x.event.fix(d),K=(ne.get(this,"events")||Object.create(null))[H.type]||[],tt=x.event.special[H.type]||{};for(q[0]=H,m=1;m<arguments.length;m++)q[m]=arguments[m];if(H.delegateTarget=this,!tt.preDispatch||!1!==tt.preDispatch.call(this,H)){for(O=x.event.handlers.call(this,H,K),m=0;(_=O[m++])&&!H.isPropagationStopped();)for(H.currentTarget=_.elem,y=0;(T=_.handlers[y++])&&!H.isImmediatePropagationStopped();)H.rnamespace&&!1!==T.namespace&&!H.rnamespace.test(T.namespace)||(H.handleObj=T,H.data=T.data,void 0!==(w=((x.event.special[T.origType]||{}).handle||T.handler).apply(_.elem,q))&&!1===(H.result=w)&&(H.preventDefault(),H.stopPropagation()));return tt.postDispatch&&tt.postDispatch.call(this,H),H.result}},handlers:function(d,m){var y,w,_,T,O,q=[],H=m.delegateCount,K=d.target;if(H&&K.nodeType&&!("click"===d.type&&1<=d.button))for(;K!==this;K=K.parentNode||this)if(1===K.nodeType&&("click"!==d.type||!0!==K.disabled)){for(T=[],O={},y=0;y<H;y++)void 0===O[_=(w=m[y]).selector+" "]&&(O[_]=w.needsContext?-1<x(_,this).index(K):x.find(_,this,null,[K]).length),O[_]&&T.push(w);T.length&&q.push({elem:K,handlers:T})}return K=this,H<m.length&&q.push({elem:K,handlers:m.slice(H)}),q},addProp:function(d,m){Object.defineProperty(x.Event.prototype,d,{enumerable:!0,configurable:!0,get:It(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(y){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(d){return d[x.expando]?d:new x.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var m=this||d;return No.test(m.type)&&m.click&&_t(m,"input")&&Hs(m,"click",!0),!1},trigger:function(d){var m=this||d;return No.test(m.type)&&m.click&&_t(m,"input")&&Hs(m,"click"),!0},_default:function(d){var m=d.target;return No.test(m.type)&&m.click&&_t(m,"input")&&ne.get(m,"click")||_t(m,"a")}},beforeunload:{postDispatch:function(d){void 0!==d.result&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}},x.removeEvent=function(d,m,y){d.removeEventListener&&d.removeEventListener(m,y)},x.Event=function(d,m){if(!(this instanceof x.Event))return new x.Event(d,m);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||void 0===d.defaultPrevented&&!1===d.returnValue?Ao:qr,this.target=d.target&&3===d.target.nodeType?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,m&&x.extend(this,m),this.timeStamp=d&&d.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:qr,isPropagationStopped:qr,isImmediatePropagationStopped:qr,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=Ao,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=Ao,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=Ao,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(d,m){function y(w){if(Jt.documentMode){var _=ne.get(this,"handle"),T=x.event.fix(w);T.type="focusin"===w.type?"focus":"blur",T.isSimulated=!0,_(w),T.target===T.currentTarget&&_(T)}else x.event.simulate(m,w.target,x.event.fix(w))}x.event.special[d]={setup:function(){var w;if(Hs(this,d,!0),!Jt.documentMode)return!1;(w=ne.get(this,m))||this.addEventListener(m,y),ne.set(this,m,(w||0)+1)},trigger:function(){return Hs(this,d),!0},teardown:function(){var w;if(!Jt.documentMode)return!1;(w=ne.get(this,m)-1)?ne.set(this,m,w):(this.removeEventListener(m,y),ne.remove(this,m))},_default:function(w){return ne.get(w.target,d)},delegateType:m},x.event.special[m]={setup:function(){var w=this.ownerDocument||this.document||this,_=Jt.documentMode?this:w,T=ne.get(_,m);T||(Jt.documentMode?this.addEventListener(m,y):w.addEventListener(d,y,!0)),ne.set(_,m,(T||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,_=Jt.documentMode?this:w,T=ne.get(_,m)-1;T?ne.set(_,m,T):(Jt.documentMode?this.removeEventListener(m,y):w.removeEventListener(d,y,!0),ne.remove(_,m))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,m){x.event.special[d]={delegateType:m,bindType:m,handle:function(y){var w,_=y.relatedTarget,T=y.handleObj;return _&&(_===this||x.contains(this,_))||(y.type=T.origType,w=T.handler.apply(this,arguments),y.type=m),w}}}),x.fn.extend({on:function(d,m,y,w){return us(this,d,m,y,w)},one:function(d,m,y,w){return us(this,d,m,y,w,1)},off:function(d,m,y){var w,_;if(d&&d.preventDefault&&d.handleObj)return w=d.handleObj,x(d.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof d){for(_ in d)this.off(_,m,d[_]);return this}return!1!==m&&"function"!=typeof m||(y=m,m=void 0),!1===y&&(y=qr),this.each(function(){x.event.remove(this,d,y,m)})}});var Vo=/<script|<style|<link/i,$r=/checked\s*(?:[^=]|=\s*.checked.)/i,rc=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function La(d,m){return _t(d,"table")&&_t(11!==m.nodeType?m:m.firstChild,"tr")&&x(d).children("tbody")[0]||d}function qs(d){return d.type=(null!==d.getAttribute("type"))+"/"+d.type,d}function oc(d){return"true/"===(d.type||"").slice(0,5)?d.type=d.type.slice(5):d.removeAttribute("type"),d}function Ai(d,m){var y,w,_,T,O,q;if(1===m.nodeType){if(ne.hasData(d)&&(q=ne.get(d).events))for(_ in ne.remove(m,"handle events"),q)for(y=0,w=q[_].length;y<w;y++)x.event.add(m,_,q[_][y]);Dn.hasData(d)&&(T=Dn.access(d),O=x.extend({},T),Dn.set(m,O))}}function Ko(d,m,y,w){m=Xe(m);var _,T,O,q,H,K,tt=0,at=d.length,J=at-1,ut=m[0],Mt=It(ut);if(Mt||1<at&&"string"==typeof ut&&!Kt.checkClone&&$r.test(ut))return d.each(function(le){var D=d.eq(le);Mt&&(m[0]=ut.call(this,le,D.html())),Ko(D,m,y,w)});if(at&&(T=(_=Pa(m,d[0].ownerDocument,!1,d,w)).firstChild,1===_.childNodes.length&&(_=T),T||w)){for(q=(O=x.map(un(_,"script"),qs)).length;tt<at;tt++)H=_,tt!==J&&(H=x.clone(H,!0,!0),q&&x.merge(O,un(H,"script"))),y.call(d[tt],H,tt);if(q)for(K=O[O.length-1].ownerDocument,x.map(O,oc),tt=0;tt<q;tt++)Te.test((H=O[tt]).type||"")&&!ne.access(H,"globalEval")&&x.contains(K,H)&&(H.src&&"module"!==(H.type||"").toLowerCase()?x._evalUrl&&!H.noModule&&x._evalUrl(H.src,{nonce:H.nonce||H.getAttribute("nonce")},K):Me(H.textContent.replace(rc,""),H,K))}return d}function fn(d,m,y){for(var w,_=m?x.filter(m,d):d,T=0;null!=(w=_[T]);T++)y||1!==w.nodeType||x.cleanData(un(w)),w.parentNode&&(y&&an(w)&&Da(un(w,"script")),w.parentNode.removeChild(w));return d}x.extend({htmlPrefilter:function(d){return d},clone:function(d,m,y){var w,_,T,O,q,H,K,tt=d.cloneNode(!0),at=an(d);if(!(Kt.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||x.isXMLDoc(d)))for(O=un(tt),w=0,_=(T=un(d)).length;w<_;w++)q=T[w],"input"===(K=(H=O[w]).nodeName.toLowerCase())&&No.test(q.type)?H.checked=q.checked:"input"!==K&&"textarea"!==K||(H.defaultValue=q.defaultValue);if(m)if(y)for(T=T||un(d),O=O||un(tt),w=0,_=T.length;w<_;w++)Ai(T[w],O[w]);else Ai(d,tt);return 0<(O=un(tt,"script")).length&&Da(O,!at&&un(d,"script")),tt},cleanData:function(d){for(var m,y,w,_=x.event.special,T=0;void 0!==(y=d[T]);T++)if(or(y)){if(m=y[ne.expando]){if(m.events)for(w in m.events)_[w]?x.event.remove(y,w):x.removeEvent(y,w,m.handle);y[ne.expando]=void 0}y[Dn.expando]&&(y[Dn.expando]=void 0)}}}),x.fn.extend({detach:function(d){return fn(this,d,!0)},remove:function(d){return fn(this,d)},text:function(d){return Hr(this,function(m){return void 0===m?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=m)})},null,d,arguments.length)},append:function(){return Ko(this,arguments,function(d){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||La(this,d).appendChild(d)})},prepend:function(){return Ko(this,arguments,function(d){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var m=La(this,d);m.insertBefore(d,m.firstChild)}})},before:function(){return Ko(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return Ko(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,m=0;null!=(d=this[m]);m++)1===d.nodeType&&(x.cleanData(un(d,!1)),d.textContent="");return this},clone:function(d,m){return d=null!=d&&d,m=m??d,this.map(function(){return x.clone(this,d,m)})},html:function(d){return Hr(this,function(m){var y=this[0]||{},w=0,_=this.length;if(void 0===m&&1===y.nodeType)return y.innerHTML;if("string"==typeof m&&!Vo.test(m)&&!Ut[(Ba.exec(m)||["",""])[1].toLowerCase()]){m=x.htmlPrefilter(m);try{for(;w<_;w++)1===(y=this[w]||{}).nodeType&&(x.cleanData(un(y,!1)),y.innerHTML=m);y=0}catch{}}y&&this.empty().append(m)},null,d,arguments.length)},replaceWith:function(){var d=[];return Ko(this,arguments,function(m){var y=this.parentNode;x.inArray(this,d)<0&&(x.cleanData(un(this)),y&&y.replaceChild(m,this))},d)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,m){x.fn[d]=function(y){for(var w,_=[],T=x(y),O=T.length-1,q=0;q<=O;q++)w=q===O?this:this.clone(!0),x(T[q])[m](w),Rn.apply(_,w.get());return this.pushStack(_)}});var Ve=new RegExp("^("+eo+")(?!px)[a-z%]+$","i"),$s=/^--/,fs=function(d){var m=d.ownerDocument.defaultView;return m&&m.opener||(m=bt),m.getComputedStyle(d)},Xo=function(d,m,y){var w,_,T={};for(_ in m)T[_]=d.style[_],d.style[_]=m[_];for(_ in w=y.call(d),m)d.style[_]=T[_];return w},du=new RegExp(Yn.join("|"),"i");function ms(d,m,y){var w,_,T,O,q=$s.test(m),H=d.style;return(y=y||fs(d))&&(O=y.getPropertyValue(m)||y[m],q&&O&&(O=O.replace(Jr,"$1")||void 0),""!==O||an(d)||(O=x.style(d,m)),!Kt.pixelBoxStyles()&&Ve.test(O)&&du.test(m)&&(w=H.width,_=H.minWidth,T=H.maxWidth,H.minWidth=H.maxWidth=H.width=O,O=y.width,H.width=w,H.minWidth=_,H.maxWidth=T)),void 0!==O?O+"":O}function Sr(d,m){return{get:function(){if(!d())return(this.get=m).apply(this,arguments);delete this.get}}}!function(){function d(){if(K){H.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Eo.appendChild(H).appendChild(K);var tt=bt.getComputedStyle(K);y="1%"!==tt.top,q=12===m(tt.marginLeft),K.style.right="60%",T=36===m(tt.right),w=36===m(tt.width),K.style.position="absolute",_=12===m(K.offsetWidth/3),Eo.removeChild(H),K=null}}function m(tt){return Math.round(parseFloat(tt))}var y,w,_,T,O,q,H=Jt.createElement("div"),K=Jt.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",Kt.clearCloneStyle="content-box"===K.style.backgroundClip,x.extend(Kt,{boxSizingReliable:function(){return d(),w},pixelBoxStyles:function(){return d(),T},pixelPosition:function(){return d(),y},reliableMarginLeft:function(){return d(),q},scrollboxSize:function(){return d(),_},reliableTrDimensions:function(){var tt,at,J,ut;return null==O&&(tt=Jt.createElement("table"),at=Jt.createElement("tr"),J=Jt.createElement("div"),tt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",at.style.cssText="box-sizing:content-box;border:1px solid",at.style.height="1px",J.style.height="9px",J.style.display="block",Eo.appendChild(tt).appendChild(at).appendChild(J),ut=bt.getComputedStyle(at),O=parseInt(ut.height,10)+parseInt(ut.borderTopWidth,10)+parseInt(ut.borderBottomWidth,10)===at.offsetHeight,Eo.removeChild(tt)),O}}))}();var ps=["Webkit","Moz","ms"],Ws=Jt.createElement("div").style,Ma={};function kr(d){return x.cssProps[d]||Ma[d]||(d in Ws?d:Ma[d]=function(y){for(var w=y[0].toUpperCase()+y.slice(1),_=ps.length;_--;)if((y=ps[_]+w)in Ws)return y}(d)||d)}var uu=/^(none|table(?!-c[ea]).+)/,fu={position:"absolute",visibility:"hidden",display:"block"},Ti={letterSpacing:"0",fontWeight:"400"};function Ri(d,m,y){var w=Cn.exec(m);return w?Math.max(0,w[2]-(y||0))+(w[3]||"px"):m}function Ia(d,m,y,w,_,T){var O="width"===m?1:0,q=0,H=0,K=0;if(y===(w?"border":"content"))return 0;for(;O<4;O+=2)"margin"===y&&(K+=x.css(d,y+Yn[O],!0,_)),w?("content"===y&&(H-=x.css(d,"padding"+Yn[O],!0,_)),"margin"!==y&&(H-=x.css(d,"border"+Yn[O]+"Width",!0,_))):(H+=x.css(d,"padding"+Yn[O],!0,_),"padding"!==y?H+=x.css(d,"border"+Yn[O]+"Width",!0,_):q+=x.css(d,"border"+Yn[O]+"Width",!0,_));return!w&&0<=T&&(H+=Math.max(0,Math.ceil(d["offset"+m[0].toUpperCase()+m.slice(1)]-T-H-q-.5))||0),H+K}function Oi(d,m,y){var w=fs(d),_=(!Kt.boxSizingReliable()||y)&&"border-box"===x.css(d,"boxSizing",!1,w),T=_,O=ms(d,m,w),q="offset"+m[0].toUpperCase()+m.slice(1);if(Ve.test(O)){if(!y)return O;O="auto"}return(!Kt.boxSizingReliable()&&_||!Kt.reliableTrDimensions()&&_t(d,"tr")||"auto"===O||!parseFloat(O)&&"inline"===x.css(d,"display",!1,w))&&d.getClientRects().length&&(_="border-box"===x.css(d,"boxSizing",!1,w),(T=q in d)&&(O=d[q])),(O=parseFloat(O)||0)+Ia(d,m,y||(_?"border":"content"),T,w,O)+"px"}function pr(d,m,y,w,_){return new pr.prototype.init(d,m,y,w,_)}x.extend({cssHooks:{opacity:{get:function(d,m){if(m){var y=ms(d,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,m,y,w){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var _,T,O,q=Qe(m),H=$s.test(m),K=d.style;if(H||(m=kr(q)),O=x.cssHooks[m]||x.cssHooks[q],void 0===y)return O&&"get"in O&&void 0!==(_=O.get(d,!1,w))?_:K[m];"string"==(T=typeof y)&&(_=Cn.exec(y))&&_[1]&&(y=ds(d,m,_),T="number"),null!=y&&y==y&&("number"!==T||H||(y+=_&&_[3]||(x.cssNumber[q]?"":"px")),Kt.clearCloneStyle||""!==y||0!==m.indexOf("background")||(K[m]="inherit"),O&&"set"in O&&void 0===(y=O.set(d,y,w))||(H?K.setProperty(m,y):K[m]=y))}},css:function(d,m,y,w){var _,T,O,q=Qe(m);return $s.test(m)||(m=kr(q)),(O=x.cssHooks[m]||x.cssHooks[q])&&"get"in O&&(_=O.get(d,!0,y)),void 0===_&&(_=ms(d,m,w)),"normal"===_&&m in Ti&&(_=Ti[m]),""===y||y?(T=parseFloat(_),!0===y||isFinite(T)?T||0:_):_}}),x.each(["height","width"],function(d,m){x.cssHooks[m]={get:function(y,w,_){if(w)return!uu.test(x.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?Oi(y,m,_):Xo(y,fu,function(){return Oi(y,m,_)})},set:function(y,w,_){var T,O=fs(y),q=!Kt.scrollboxSize()&&"absolute"===O.position,H=(q||_)&&"border-box"===x.css(y,"boxSizing",!1,O),K=_?Ia(y,m,_,H,O):0;return H&&q&&(K-=Math.ceil(y["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(O[m])-Ia(y,m,"border",!1,O)-.5)),K&&(T=Cn.exec(w))&&"px"!==(T[3]||"px")&&(y.style[m]=w,w=x.css(y,m)),Ri(0,w,K)}}}),x.cssHooks.marginLeft=Sr(Kt.reliableMarginLeft,function(d,m){if(m)return(parseFloat(ms(d,"marginLeft"))||d.getBoundingClientRect().left-Xo(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(d,m){x.cssHooks[d+m]={expand:function(y){for(var w=0,_={},T="string"==typeof y?y.split(" "):[y];w<4;w++)_[d+Yn[w]+m]=T[w]||T[w-2]||T[0];return _}},"margin"!==d&&(x.cssHooks[d+m].set=Ri)}),x.fn.extend({css:function(d,m){return Hr(this,function(y,w,_){var T,O,q={},H=0;if(Array.isArray(w)){for(T=fs(y),O=w.length;H<O;H++)q[w[H]]=x.css(y,w[H],!1,T);return q}return void 0!==_?x.style(y,w,_):x.css(y,w)},d,m,1<arguments.length)}}),((x.Tween=pr).prototype={constructor:pr,init:function(d,m,y,w,_,T){this.elem=d,this.prop=y,this.easing=_||x.easing._default,this.options=m,this.start=this.now=this.cur(),this.end=w,this.unit=T||(x.cssNumber[y]?"":"px")},cur:function(){var d=pr.propHooks[this.prop];return d&&d.get?d.get(this):pr.propHooks._default.get(this)},run:function(d){var m,y=pr.propHooks[this.prop];return this.pos=m=this.options.duration?x.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):d,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):pr.propHooks._default.set(this),this}}).init.prototype=pr.prototype,(pr.propHooks={_default:{get:function(d){var m;return 1!==d.elem.nodeType||null!=d.elem[d.prop]&&null==d.elem.style[d.prop]?d.elem[d.prop]:(m=x.css(d.elem,d.prop,""))&&"auto"!==m?m:0},set:function(d){x.fx.step[d.prop]?x.fx.step[d.prop](d):1!==d.elem.nodeType||!x.cssHooks[d.prop]&&null==d.elem.style[kr(d.prop)]?d.elem[d.prop]=d.now:x.style(d.elem,d.prop,d.now+d.unit)}}}).scrollTop=pr.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},x.easing={linear:function(d){return d},swing:function(d){return.5-Math.cos(d*Math.PI)/2},_default:"swing"},x.fx=pr.prototype.init,x.fx.step={};var Yo,Vs,gs,sc,ac=/^(?:toggle|show|hide)$/,ic=/queueHooks$/;function Fa(){Vs&&(!1===Jt.hidden&&bt.requestAnimationFrame?bt.requestAnimationFrame(Fa):bt.setTimeout(Fa,x.fx.interval),x.fx.tick())}function Bi(){return bt.setTimeout(function(){Yo=void 0}),Yo=Date.now()}function Ks(d,m){var y,w=0,_={height:d};for(m=m?1:0;w<4;w+=2-m)_["margin"+(y=Yn[w])]=_["padding"+y]=d;return m&&(_.opacity=_.width=d),_}function Di(d,m,y){for(var w,_=(gr.tweeners[m]||[]).concat(gr.tweeners["*"]),T=0,O=_.length;T<O;T++)if(w=_[T].call(y,m,d))return w}function gr(d,m,y){var w,_,T=0,O=gr.prefilters.length,q=x.Deferred().always(function(){delete H.elem}),H=function(){if(_)return!1;for(var at=Yo||Bi(),J=Math.max(0,K.startTime+K.duration-at),ut=1-(J/K.duration||0),Mt=0,le=K.tweens.length;Mt<le;Mt++)K.tweens[Mt].run(ut);return q.notifyWith(d,[K,ut,J]),ut<1&&le?J:(le||q.notifyWith(d,[K,1,0]),q.resolveWith(d,[K]),!1)},K=q.promise({elem:d,props:x.extend({},m),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},y),originalProperties:m,originalOptions:y,startTime:Yo||Bi(),duration:y.duration,tweens:[],createTween:function(at,J){var ut=x.Tween(d,K.opts,at,J,K.opts.specialEasing[at]||K.opts.easing);return K.tweens.push(ut),ut},stop:function(at){var J=0,ut=at?K.tweens.length:0;if(_)return this;for(_=!0;J<ut;J++)K.tweens[J].run(1);return at?(q.notifyWith(d,[K,1,0]),q.resolveWith(d,[K,at])):q.rejectWith(d,[K,at]),this}}),tt=K.props;for(function(at,J){var ut,Mt,le,D,tn;for(ut in at)if(le=J[Mt=Qe(ut)],D=at[ut],Array.isArray(D)&&(le=D[1],D=at[ut]=D[0]),ut!==Mt&&(at[Mt]=D,delete at[ut]),(tn=x.cssHooks[Mt])&&"expand"in tn)for(ut in D=tn.expand(D),delete at[Mt],D)ut in at||(at[ut]=D[ut],J[ut]=le);else J[Mt]=le}(tt,K.opts.specialEasing);T<O;T++)if(w=gr.prefilters[T].call(K,d,tt,K.opts))return It(w.stop)&&(x._queueHooks(K.elem,K.opts.queue).stop=w.stop.bind(w)),w;return x.map(tt,Di,K),It(K.opts.start)&&K.opts.start.call(d,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),x.fx.timer(x.extend(H,{elem:d,anim:K,queue:K.opts.queue})),K}x.Animation=x.extend(gr,{tweeners:{"*":[function(d,m){var y=this.createTween(d,m);return ds(y.elem,d,Cn.exec(m),y),y}]},tweener:function(d,m){It(d)?(m=d,d=["*"]):d=d.match(re);for(var y,w=0,_=d.length;w<_;w++)(gr.tweeners[y=d[w]]=gr.tweeners[y]||[]).unshift(m)},prefilters:[function(d,m,y){var w,_,T,O,q,H,K,tt,at="width"in m||"height"in m,J=this,ut={},Mt=d.style,le=d.nodeType&&xe(d),D=ne.get(d,"fxshow");for(w in y.queue||(null==(O=x._queueHooks(d,"fx")).unqueued&&(O.unqueued=0,q=O.empty.fire,O.empty.fire=function(){O.unqueued||q()}),O.unqueued++,J.always(function(){J.always(function(){O.unqueued--,x.queue(d,"fx").length||O.empty.fire()})})),m)if(ac.test(_=m[w])){if(delete m[w],T=T||"toggle"===_,_===(le?"hide":"show")){if("show"!==_||!D||void 0===D[w])continue;le=!0}ut[w]=D&&D[w]||x.style(d,w)}if((H=!x.isEmptyObject(m))||!x.isEmptyObject(ut))for(w in at&&1===d.nodeType&&(y.overflow=[Mt.overflow,Mt.overflowX,Mt.overflowY],null==(K=D&&D.display)&&(K=ne.get(d,"display")),"none"===(tt=x.css(d,"display"))&&(K?tt=K:(So([d],!0),K=d.style.display||K,tt=x.css(d,"display"),So([d]))),("inline"===tt||"inline-block"===tt&&null!=K)&&"none"===x.css(d,"float")&&(H||(J.done(function(){Mt.display=K}),null==K&&(K="none"===(tt=Mt.display)?"":tt)),Mt.display="inline-block")),y.overflow&&(Mt.overflow="hidden",J.always(function(){Mt.overflow=y.overflow[0],Mt.overflowX=y.overflow[1],Mt.overflowY=y.overflow[2]})),H=!1,ut)H||(D?"hidden"in D&&(le=D.hidden):D=ne.access(d,"fxshow",{display:K}),T&&(D.hidden=!le),le&&So([d],!0),J.done(function(){for(w in le||So([d]),ne.remove(d,"fxshow"),ut)x.style(d,w,ut[w])})),H=Di(le?D[w]:0,w,J),w in D||(D[w]=H.start,le&&(H.end=H.start,H.start=0))}],prefilter:function(d,m){m?gr.prefilters.unshift(d):gr.prefilters.push(d)}}),x.speed=function(d,m,y){var w=d&&"object"==typeof d?x.extend({},d):{complete:y||!y&&m||It(d)&&d,duration:d,easing:y&&m||m&&!It(m)&&m};return x.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in x.fx.speeds?x.fx.speeds[w.duration]:x.fx.speeds._default),null!=w.queue&&!0!==w.queue||(w.queue="fx"),w.old=w.complete,w.complete=function(){It(w.old)&&w.old.call(this),w.queue&&x.dequeue(this,w.queue)},w},x.fn.extend({fadeTo:function(d,m,y,w){return this.filter(xe).css("opacity",0).show().end().animate({opacity:m},d,y,w)},animate:function(d,m,y,w){var _=x.isEmptyObject(d),T=x.speed(m,y,w),O=function(){var q=gr(this,x.extend({},d),T);(_||ne.get(this,"finish"))&&q.stop(!0)};return O.finish=O,_||!1===T.queue?this.each(O):this.queue(T.queue,O)},stop:function(d,m,y){var w=function(_){var T=_.stop;delete _.stop,T(y)};return"string"!=typeof d&&(y=m,m=d,d=void 0),m&&this.queue(d||"fx",[]),this.each(function(){var _=!0,T=null!=d&&d+"queueHooks",O=x.timers,q=ne.get(this);if(T)q[T]&&q[T].stop&&w(q[T]);else for(T in q)q[T]&&q[T].stop&&ic.test(T)&&w(q[T]);for(T=O.length;T--;)O[T].elem!==this||null!=d&&O[T].queue!==d||(O[T].anim.stop(y),_=!1,O.splice(T,1));!_&&y||x.dequeue(this,d)})},finish:function(d){return!1!==d&&(d=d||"fx"),this.each(function(){var m,y=ne.get(this),w=y[d+"queue"],_=y[d+"queueHooks"],T=x.timers,O=w?w.length:0;for(y.finish=!0,x.queue(this,d,[]),_&&_.stop&&_.stop.call(this,!0),m=T.length;m--;)T[m].elem===this&&T[m].queue===d&&(T[m].anim.stop(!0),T.splice(m,1));for(m=0;m<O;m++)w[m]&&w[m].finish&&w[m].finish.call(this);delete y.finish})}}),x.each(["toggle","show","hide"],function(d,m){var y=x.fn[m];x.fn[m]=function(w,_,T){return null==w||"boolean"==typeof w?y.apply(this,arguments):this.animate(Ks(m,!0),w,_,T)}}),x.each({slideDown:Ks("show"),slideUp:Ks("hide"),slideToggle:Ks("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,m){x.fn[d]=function(y,w,_){return this.animate(m,y,w,_)}}),x.timers=[],x.fx.tick=function(){var d,m=0,y=x.timers;for(Yo=Date.now();m<y.length;m++)(d=y[m])()||y[m]!==d||y.splice(m--,1);y.length||x.fx.stop(),Yo=void 0},x.fx.timer=function(d){x.timers.push(d),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Vs||(Vs=!0,Fa())},x.fx.stop=function(){Vs=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(d,m){return d=x.fx&&x.fx.speeds[d]||d,this.queue(m=m||"fx",function(y,w){var _=bt.setTimeout(y,d);w.stop=function(){bt.clearTimeout(_)}})},gs=Jt.createElement("input"),sc=Jt.createElement("select").appendChild(Jt.createElement("option")),gs.type="checkbox",Kt.checkOn=""!==gs.value,Kt.optSelected=sc.selected,(gs=Jt.createElement("input")).value="t",gs.type="radio",Kt.radioValue="t"===gs.value;var Pi,Xs=x.expr.attrHandle;x.fn.extend({attr:function(d,m){return Hr(this,x.attr,d,m,1<arguments.length)},removeAttr:function(d){return this.each(function(){x.removeAttr(this,d)})}}),x.extend({attr:function(d,m,y){var w,_,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return typeof d.getAttribute>"u"?x.prop(d,m,y):(1===T&&x.isXMLDoc(d)||(_=x.attrHooks[m.toLowerCase()]||(x.expr.match.bool.test(m)?Pi:void 0)),void 0!==y?null===y?void x.removeAttr(d,m):_&&"set"in _&&void 0!==(w=_.set(d,y,m))?w:(d.setAttribute(m,y+""),y):_&&"get"in _&&null!==(w=_.get(d,m))?w:null==(w=x.find.attr(d,m))?void 0:w)},attrHooks:{type:{set:function(d,m){if(!Kt.radioValue&&"radio"===m&&_t(d,"input")){var y=d.value;return d.setAttribute("type",m),y&&(d.value=y),m}}}},removeAttr:function(d,m){var y,w=0,_=m&&m.match(re);if(_&&1===d.nodeType)for(;y=_[w++];)d.removeAttribute(y)}}),Pi={set:function(d,m,y){return!1===m?x.removeAttr(d,y):d.setAttribute(y,y),y}},x.each(x.expr.match.bool.source.match(/\w+/g),function(d,m){var y=Xs[m]||x.find.attr;Xs[m]=function(w,_,T){var O,q,H=_.toLowerCase();return T||(q=Xs[H],Xs[H]=O,O=null!=y(w,_,T)?H:null,Xs[H]=q),O}});var mu=/^(?:input|select|textarea|button)$/i,pu=/^(?:a|area)$/i;function Go(d){return(d.match(re)||[]).join(" ")}function Pn(d){return d.getAttribute&&d.getAttribute("class")||""}function Li(d){return Array.isArray(d)?d:"string"==typeof d&&d.match(re)||[]}x.fn.extend({prop:function(d,m){return Hr(this,x.prop,d,m,1<arguments.length)},removeProp:function(d){return this.each(function(){delete this[x.propFix[d]||d]})}}),x.extend({prop:function(d,m,y){var w,_,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return 1===T&&x.isXMLDoc(d)||(_=x.propHooks[m=x.propFix[m]||m]),void 0!==y?_&&"set"in _&&void 0!==(w=_.set(d,y,m))?w:d[m]=y:_&&"get"in _&&null!==(w=_.get(d,m))?w:d[m]},propHooks:{tabIndex:{get:function(d){var m=x.find.attr(d,"tabindex");return m?parseInt(m,10):mu.test(d.nodeName)||pu.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Kt.optSelected||(x.propHooks.selected={get:function(d){return null},set:function(d){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(d){var m,y,w,_,T,O;return It(d)?this.each(function(q){x(this).addClass(d.call(this,q,Pn(this)))}):(m=Li(d)).length?this.each(function(){if(w=Pn(this),y=1===this.nodeType&&" "+Go(w)+" "){for(T=0;T<m.length;T++)y.indexOf(" "+(_=m[T])+" ")<0&&(y+=_+" ");O=Go(y),w!==O&&this.setAttribute("class",O)}}):this},removeClass:function(d){var m,y,w,_,T,O;return It(d)?this.each(function(q){x(this).removeClass(d.call(this,q,Pn(this)))}):arguments.length?(m=Li(d)).length?this.each(function(){if(w=Pn(this),y=1===this.nodeType&&" "+Go(w)+" "){for(T=0;T<m.length;T++)for(_=m[T];-1<y.indexOf(" "+_+" ");)y=y.replace(" "+_+" "," ");O=Go(y),w!==O&&this.setAttribute("class",O)}}):this:this.attr("class","")},toggleClass:function(d,m){var y,w,_,T,O=typeof d,q="string"===O||Array.isArray(d);return It(d)?this.each(function(H){x(this).toggleClass(d.call(this,H,Pn(this),m),m)}):"boolean"==typeof m&&q?m?this.addClass(d):this.removeClass(d):(y=Li(d),this.each(function(){if(q)for(T=x(this),_=0;_<y.length;_++)T.hasClass(w=y[_])?T.removeClass(w):T.addClass(w);else void 0!==d&&"boolean"!==O||((w=Pn(this))&&ne.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||!1===d?"":ne.get(this,"__className__")||""))}))},hasClass:function(d){var m,y,w=0;for(m=" "+d+" ";y=this[w++];)if(1===y.nodeType&&-1<(" "+Go(Pn(y))+" ").indexOf(m))return!0;return!1}});var Mi=/\r/g;x.fn.extend({val:function(d){var m,y,w,_=this[0];return arguments.length?(w=It(d),this.each(function(T){var O;1===this.nodeType&&(null==(O=w?d.call(this,T,x(this).val()):d)?O="":"number"==typeof O?O+="":Array.isArray(O)&&(O=x.map(O,function(q){return null==q?"":q+""})),(m=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in m&&void 0!==m.set(this,O,"value")||(this.value=O))})):_?(m=x.valHooks[_.type]||x.valHooks[_.nodeName.toLowerCase()])&&"get"in m&&void 0!==(y=m.get(_,"value"))?y:"string"==typeof(y=_.value)?y.replace(Mi,""):y??"":void 0}}),x.extend({valHooks:{option:{get:function(d){return x.find.attr(d,"value")??Go(x.text(d))}},select:{get:function(d){var m,y,w,_=d.options,T=d.selectedIndex,O="select-one"===d.type,q=O?null:[],H=O?T+1:_.length;for(w=T<0?H:O?T:0;w<H;w++)if(((y=_[w]).selected||w===T)&&!y.disabled&&(!y.parentNode.disabled||!_t(y.parentNode,"optgroup"))){if(m=x(y).val(),O)return m;q.push(m)}return q},set:function(d,m){for(var y,w,_=d.options,T=x.makeArray(m),O=_.length;O--;)((w=_[O]).selected=-1<x.inArray(x.valHooks.option.get(w),T))&&(y=!0);return y||(d.selectedIndex=-1),T}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(d,m){if(Array.isArray(m))return d.checked=-1<x.inArray(x(d).val(),m)}},Kt.checkOn||(x.valHooks[this].get=function(d){return null===d.getAttribute("value")?"on":d.value})});var Gn=bt.location,_r={guid:Date.now()},no=/\?/;x.parseXML=function(d){var m,y;if(!d||"string"!=typeof d)return null;try{m=(new bt.DOMParser).parseFromString(d,"text/xml")}catch{}return y=m&&m.getElementsByTagName("parsererror")[0],m&&!y||x.error("Invalid XML: "+(y?x.map(y.childNodes,function(w){return w.textContent}).join("\n"):d)),m};var lc=/^(?:focusinfocus|focusoutblur)$/,ge=function(d){d.stopPropagation()};x.extend(x.event,{trigger:function(d,m,y,w){var _,T,O,q,H,K,tt,at,J=[y||Jt],ut=On.call(d,"type")?d.type:d,Mt=On.call(d,"namespace")?d.namespace.split("."):[];if(T=at=O=y=y||Jt,3!==y.nodeType&&8!==y.nodeType&&!lc.test(ut+x.event.triggered)&&(-1<ut.indexOf(".")&&(ut=(Mt=ut.split(".")).shift(),Mt.sort()),H=ut.indexOf(":")<0&&"on"+ut,(d=d[x.expando]?d:new x.Event(ut,"object"==typeof d&&d)).isTrigger=w?2:3,d.namespace=Mt.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+Mt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=y),m=null==m?[d]:x.makeArray(m,[d]),tt=x.event.special[ut]||{},w||!tt.trigger||!1!==tt.trigger.apply(y,m))){if(!w&&!tt.noBubble&&!it(y)){for(lc.test((q=tt.delegateType||ut)+ut)||(T=T.parentNode);T;T=T.parentNode)J.push(T),O=T;O===(y.ownerDocument||Jt)&&J.push(O.defaultView||O.parentWindow||bt)}for(_=0;(T=J[_++])&&!d.isPropagationStopped();)at=T,d.type=1<_?q:tt.bindType||ut,(K=(ne.get(T,"events")||Object.create(null))[d.type]&&ne.get(T,"handle"))&&K.apply(T,m),(K=H&&T[H])&&K.apply&&or(T)&&(d.result=K.apply(T,m),!1===d.result&&d.preventDefault());return d.type=ut,w||d.isDefaultPrevented()||tt._default&&!1!==tt._default.apply(J.pop(),m)||!or(y)||H&&It(y[ut])&&!it(y)&&((O=y[H])&&(y[H]=null),x.event.triggered=ut,d.isPropagationStopped()&&at.addEventListener(ut,ge),y[ut](),d.isPropagationStopped()&&at.removeEventListener(ut,ge),x.event.triggered=void 0,O&&(y[H]=O)),d.result}},simulate:function(d,m,y){var w=x.extend(new x.Event,y,{type:d,isSimulated:!0});x.event.trigger(w,null,m)}}),x.fn.extend({trigger:function(d,m){return this.each(function(){x.event.trigger(d,m,this)})},triggerHandler:function(d,m){var y=this[0];if(y)return x.event.trigger(d,m,y,!0)}});var gu=/\[\]$/,Ii=/\r?\n/g,cc=/^(?:submit|button|image|reset|file)$/i,lt=/^(?:input|select|textarea|keygen)/i;function To(d,m,y,w){var _;if(Array.isArray(m))x.each(m,function(T,O){y||gu.test(d)?w(d,O):To(d+"["+("object"==typeof O&&null!=O?T:"")+"]",O,y,w)});else if(y||"object"!==we(m))w(d,m);else for(_ in m)To(d+"["+_+"]",m[_],y,w)}x.param=function(d,m){var y,w=[],_=function(T,O){var q=It(O)?O():O;w[w.length]=encodeURIComponent(T)+"="+encodeURIComponent(q??"")};if(null==d)return"";if(Array.isArray(d)||d.jquery&&!x.isPlainObject(d))x.each(d,function(){_(this.name,this.value)});else for(y in d)To(y,d[y],m,_);return w.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=x.prop(this,"elements");return d?x.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!x(this).is(":disabled")&&lt.test(this.nodeName)&&!cc.test(d)&&(this.checked||!No.test(d))}).map(function(d,m){var y=x(this).val();return null==y?null:Array.isArray(y)?x.map(y,function(w){return{name:m.name,value:w.replace(Ii,"\r\n")}}):{name:m.name,value:y.replace(Ii,"\r\n")}}).get()}});var dc=/%20/g,xn=/#.*$/,hs=/([?&])_=[^&]*/,hu=/^(.*?):[ \t]*([^\r\n]*)$/gm,uc=/^(?:GET|HEAD)$/,bu=/^\/\//,fc={},me={},Fi="*/".concat("*"),bs=Jt.createElement("a");function Ys(d){return function(m,y){"string"!=typeof m&&(y=m,m="*");var w,_=0,T=m.toLowerCase().match(re)||[];if(It(y))for(;w=T[_++];)"+"===w[0]?(w=w.slice(1)||"*",(d[w]=d[w]||[]).unshift(y)):(d[w]=d[w]||[]).push(y)}}function Hn(d,m,y,w){var _={},T=d===me;function O(q){var H;return _[q]=!0,x.each(d[q]||[],function(K,tt){var at=tt(m,y,w);return"string"!=typeof at||T||_[at]?T?!(H=at):void 0:(m.dataTypes.unshift(at),O(at),!1)}),H}return O(m.dataTypes[0])||!_["*"]&&O("*")}function wn(d,m){var y,w,_=x.ajaxSettings.flatOptions||{};for(y in m)void 0!==m[y]&&((_[y]?d:w||(w={}))[y]=m[y]);return w&&x.extend(!0,d,w),d}bs.href=Gn.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Gn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Gn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,m){return m?wn(wn(d,x.ajaxSettings),m):wn(x.ajaxSettings,d)},ajaxPrefilter:Ys(fc),ajaxTransport:Ys(me),ajax:function(d,m){"object"==typeof d&&(m=d,d=void 0);var y,w,_,T,O,q,H,K,tt,at,J=x.ajaxSetup({},m=m||{}),ut=J.context||J,Mt=J.context&&(ut.nodeType||ut.jquery)?x(ut):x.event,le=x.Deferred(),D=x.Callbacks("once memory"),tn=J.statusCode||{},mn={},ln={},Nr="canceled",zt={readyState:0,getResponseHeader:function(Ne){var Le;if(H){if(!T)for(T={};Le=hu.exec(_);)T[Le[1].toLowerCase()+" "]=(T[Le[1].toLowerCase()+" "]||[]).concat(Le[2]);Le=T[Ne.toLowerCase()+" "]}return null==Le?null:Le.join(", ")},getAllResponseHeaders:function(){return H?_:null},setRequestHeader:function(Ne,Le){return null==H&&(Ne=ln[Ne.toLowerCase()]=ln[Ne.toLowerCase()]||Ne,mn[Ne]=Le),this},overrideMimeType:function(Ne){return null==H&&(J.mimeType=Ne),this},statusCode:function(Ne){var Le;if(Ne)if(H)zt.always(Ne[zt.status]);else for(Le in Ne)tn[Le]=[tn[Le],Ne[Le]];return this},abort:function(Ne){var Le=Ne||Nr;return y&&y.abort(Le),kn(0,Le),this}};if(le.promise(zt),J.url=((d||J.url||Gn.href)+"").replace(bu,Gn.protocol+"//"),J.type=m.method||m.type||J.method||J.type,J.dataTypes=(J.dataType||"*").toLowerCase().match(re)||[""],null==J.crossDomain){q=Jt.createElement("a");try{q.href=J.url,q.href=q.href,J.crossDomain=bs.protocol+"//"+bs.host!=q.protocol+"//"+q.host}catch{J.crossDomain=!0}}if(J.data&&J.processData&&"string"!=typeof J.data&&(J.data=x.param(J.data,J.traditional)),Hn(fc,J,m,zt),H)return zt;for(tt in(K=x.event&&J.global)&&0==x.active++&&x.event.trigger("ajaxStart"),J.type=J.type.toUpperCase(),J.hasContent=!uc.test(J.type),w=J.url.replace(xn,""),J.hasContent?J.data&&J.processData&&0===(J.contentType||"").indexOf("application/x-www-form-urlencoded")&&(J.data=J.data.replace(dc,"+")):(at=J.url.slice(w.length),J.data&&(J.processData||"string"==typeof J.data)&&(w+=(no.test(w)?"&":"?")+J.data,delete J.data),!1===J.cache&&(w=w.replace(hs,"$1"),at=(no.test(w)?"&":"?")+"_="+_r.guid+++at),J.url=w+at),J.ifModified&&(x.lastModified[w]&&zt.setRequestHeader("If-Modified-Since",x.lastModified[w]),x.etag[w]&&zt.setRequestHeader("If-None-Match",x.etag[w])),(J.data&&J.hasContent&&!1!==J.contentType||m.contentType)&&zt.setRequestHeader("Content-Type",J.contentType),zt.setRequestHeader("Accept",J.dataTypes[0]&&J.accepts[J.dataTypes[0]]?J.accepts[J.dataTypes[0]]+("*"!==J.dataTypes[0]?", "+Fi+"; q=0.01":""):J.accepts["*"]),J.headers)zt.setRequestHeader(tt,J.headers[tt]);if(J.beforeSend&&(!1===J.beforeSend.call(ut,zt,J)||H))return zt.abort();if(Nr="abort",D.add(J.complete),zt.done(J.success),zt.fail(J.error),y=Hn(me,J,m,zt)){if(zt.readyState=1,K&&Mt.trigger("ajaxSend",[zt,J]),H)return zt;J.async&&0<J.timeout&&(O=bt.setTimeout(function(){zt.abort("timeout")},J.timeout));try{H=!1,y.send(mn,kn)}catch(Ne){if(H)throw Ne;kn(-1,Ne)}}else kn(-1,"No Transport");function kn(Ne,Le,so,sr){var ar,vs,Ln,hr,Qo,ir=Le;H||(H=!0,O&&bt.clearTimeout(O),y=void 0,_=sr||"",zt.readyState=0<Ne?4:0,ar=200<=Ne&&Ne<300||304===Ne,so&&(hr=function(Ee,$e,_n){for(var Wr,Nn,se,Ie,Ye=Ee.contents,We=Ee.dataTypes;"*"===We[0];)We.shift(),void 0===Wr&&(Wr=Ee.mimeType||$e.getResponseHeader("Content-Type"));if(Wr)for(Nn in Ye)if(Ye[Nn]&&Ye[Nn].test(Wr)){We.unshift(Nn);break}if(We[0]in _n)se=We[0];else{for(Nn in _n){if(!We[0]||Ee.converters[Nn+" "+We[0]]){se=Nn;break}Ie||(Ie=Nn)}se=se||Ie}if(se)return se!==We[0]&&We.unshift(se),_n[se]}(J,zt,so)),!ar&&-1<x.inArray("script",J.dataTypes)&&x.inArray("json",J.dataTypes)<0&&(J.converters["text script"]=function(){}),hr=function(Ee,$e,_n,Wr){var Nn,se,Ie,Ye,We,Ar={},ys=Ee.dataTypes.slice();if(ys[1])for(Ie in Ee.converters)Ar[Ie.toLowerCase()]=Ee.converters[Ie];for(se=ys.shift();se;)if(Ee.responseFields[se]&&(_n[Ee.responseFields[se]]=$e),!We&&Wr&&Ee.dataFilter&&($e=Ee.dataFilter($e,Ee.dataType)),We=se,se=ys.shift())if("*"===se)se=We;else if("*"!==We&&We!==se){if(!(Ie=Ar[We+" "+se]||Ar["* "+se]))for(Nn in Ar)if((Ye=Nn.split(" "))[1]===se&&(Ie=Ar[We+" "+Ye[0]]||Ar["* "+Ye[0]])){!0===Ie?Ie=Ar[Nn]:!0!==Ar[Nn]&&(se=Ye[0],ys.unshift(Ye[1]));break}if(!0!==Ie)if(Ie&&Ee.throws)$e=Ie($e);else try{$e=Ie($e)}catch(ao){return{state:"parsererror",error:Ie?ao:"No conversion from "+We+" to "+se}}}return{state:"success",data:$e}}(J,hr,zt,ar),ar?(J.ifModified&&((Qo=zt.getResponseHeader("Last-Modified"))&&(x.lastModified[w]=Qo),(Qo=zt.getResponseHeader("etag"))&&(x.etag[w]=Qo)),204===Ne||"HEAD"===J.type?ir="nocontent":304===Ne?ir="notmodified":(ir=hr.state,vs=hr.data,ar=!(Ln=hr.error))):(Ln=ir,!Ne&&ir||(ir="error",Ne<0&&(Ne=0))),zt.status=Ne,zt.statusText=(Le||ir)+"",ar?le.resolveWith(ut,[vs,ir,zt]):le.rejectWith(ut,[zt,ir,Ln]),zt.statusCode(tn),tn=void 0,K&&Mt.trigger(ar?"ajaxSuccess":"ajaxError",[zt,J,ar?vs:Ln]),D.fireWith(ut,[zt,ir]),K&&(Mt.trigger("ajaxComplete",[zt,J]),--x.active||x.event.trigger("ajaxStop")))}return zt},getJSON:function(d,m,y){return x.get(d,m,y,"json")},getScript:function(d,m){return x.get(d,void 0,m,"script")}}),x.each(["get","post"],function(d,m){x[m]=function(y,w,_,T){return It(w)&&(T=T||_,_=w,w=void 0),x.ajax(x.extend({url:y,type:m,dataType:T,data:w,success:_},x.isPlainObject(y)&&y))}}),x.ajaxPrefilter(function(d){var m;for(m in d.headers)"content-type"===m.toLowerCase()&&(d.contentType=d.headers[m]||"")}),x._evalUrl=function(d,m,y){return x.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){x.globalEval(w,m,y)}})},x.fn.extend({wrapAll:function(d){var m;return this[0]&&(It(d)&&(d=d.call(this[0])),m=x(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(d){return It(d)?this.each(function(m){x(this).wrapInner(d.call(this,m))}):this.each(function(){var m=x(this),y=m.contents();y.length?y.wrapAll(d):m.append(d)})},wrap:function(d){var m=It(d);return this.each(function(y){x(this).wrapAll(m?d.call(this,y):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(d){return!x.expr.pseudos.visible(d)},x.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new bt.XMLHttpRequest}catch{}};var vu={0:200,1223:204},Gs=x.ajaxSettings.xhr();Kt.cors=!!Gs&&"withCredentials"in Gs,Kt.ajax=Gs=!!Gs,x.ajaxTransport(function(d){var m,y;if(Kt.cors||Gs&&!d.crossDomain)return{send:function(w,_){var T,O=d.xhr();if(O.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(T in d.xhrFields)O[T]=d.xhrFields[T];for(T in d.mimeType&&O.overrideMimeType&&O.overrideMimeType(d.mimeType),d.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)O.setRequestHeader(T,w[T]);m=function(q){return function(){m&&(m=y=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,"abort"===q?O.abort():"error"===q?"number"!=typeof O.status?_(0,"error"):_(O.status,O.statusText):_(vu[O.status]||O.status,O.statusText,"text"!==(O.responseType||"text")||"string"!=typeof O.responseText?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=m(),y=O.onerror=O.ontimeout=m("error"),void 0!==O.onabort?O.onabort=y:O.onreadystatechange=function(){4===O.readyState&&bt.setTimeout(function(){m&&y()})},m=m("abort");try{O.send(d.hasContent&&d.data||null)}catch(q){if(m)throw q}},abort:function(){m&&m()}}}),x.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return x.globalEval(d),d}}}),x.ajaxPrefilter("script",function(d){void 0===d.cache&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),x.ajaxTransport("script",function(d){var m,y;if(d.crossDomain||d.scriptAttrs)return{send:function(w,_){m=x("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",y=function(T){m.remove(),y=null,T&&_("error"===T.type?404:200,T.type)}),Jt.head.appendChild(m[0])},abort:function(){y&&y()}}});var Qs,ji=[],Ze=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=ji.pop()||x.expando+"_"+_r.guid++;return this[d]=!0,d}}),x.ajaxPrefilter("json jsonp",function(d,m,y){var w,_,T,O=!1!==d.jsonp&&(Ze.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ze.test(d.data)&&"data");if(O||"jsonp"===d.dataTypes[0])return w=d.jsonpCallback=It(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,O?d[O]=d[O].replace(Ze,"$1"+w):!1!==d.jsonp&&(d.url+=(no.test(d.url)?"&":"?")+d.jsonp+"="+w),d.converters["script json"]=function(){return T||x.error(w+" was not called"),T[0]},d.dataTypes[0]="json",_=bt[w],bt[w]=function(){T=arguments},y.always(function(){void 0===_?x(bt).removeProp(w):bt[w]=_,d[w]&&(d.jsonpCallback=m.jsonpCallback,ji.push(w)),T&&It(_)&&_(T[0]),T=_=void 0}),"script"}),Kt.createHTMLDocument=((Qs=Jt.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qs.childNodes.length),x.parseHTML=function(d,m,y){return"string"!=typeof d?[]:("boolean"==typeof m&&(y=m,m=!1),m||(Kt.createHTMLDocument?((w=(m=Jt.implementation.createHTMLDocument("")).createElement("base")).href=Jt.location.href,m.head.appendChild(w)):m=Jt),T=!y&&[],(_=k.exec(d))?[m.createElement(_[1])]:(_=Pa([d],m,T),T&&T.length&&x(T).remove(),x.merge([],_.childNodes)));var w,_,T},x.fn.load=function(d,m,y){var w,_,T,O=this,q=d.indexOf(" ");return-1<q&&(w=Go(d.slice(q)),d=d.slice(0,q)),It(m)?(y=m,m=void 0):m&&"object"==typeof m&&(_="POST"),0<O.length&&x.ajax({url:d,type:_||"GET",dataType:"html",data:m}).done(function(H){T=arguments,O.html(w?x("<div>").append(x.parseHTML(H)).find(w):H)}).always(y&&function(H,K){O.each(function(){y.apply(this,T||[H.responseText,K,H])})}),this},x.expr.pseudos.animated=function(d){return x.grep(x.timers,function(m){return d===m.elem}).length},x.offset={setOffset:function(d,m,y){var w,_,T,O,q,H,K=x.css(d,"position"),tt=x(d),at={};"static"===K&&(d.style.position="relative"),q=tt.offset(),T=x.css(d,"top"),H=x.css(d,"left"),("absolute"===K||"fixed"===K)&&-1<(T+H).indexOf("auto")?(O=(w=tt.position()).top,_=w.left):(O=parseFloat(T)||0,_=parseFloat(H)||0),It(m)&&(m=m.call(d,y,x.extend({},q))),null!=m.top&&(at.top=m.top-q.top+O),null!=m.left&&(at.left=m.left-q.left+_),"using"in m?m.using.call(d,at):tt.css(at)}},x.fn.extend({offset:function(d){if(arguments.length)return void 0===d?this:this.each(function(_){x.offset.setOffset(this,d,_)});var m,y,w=this[0];return w?w.getClientRects().length?{top:(m=w.getBoundingClientRect()).top+(y=w.ownerDocument.defaultView).pageYOffset,left:m.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var d,m,y,w=this[0],_={top:0,left:0};if("fixed"===x.css(w,"position"))m=w.getBoundingClientRect();else{for(m=this.offset(),y=w.ownerDocument,d=w.offsetParent||y.documentElement;d&&(d===y.body||d===y.documentElement)&&"static"===x.css(d,"position");)d=d.parentNode;d&&d!==w&&1===d.nodeType&&((_=x(d).offset()).top+=x.css(d,"borderTopWidth",!0),_.left+=x.css(d,"borderLeftWidth",!0))}return{top:m.top-_.top-x.css(w,"marginTop",!0),left:m.left-_.left-x.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&"static"===x.css(d,"position");)d=d.offsetParent;return d||Eo})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,m){var y="pageYOffset"===m;x.fn[d]=function(w){return Hr(this,function(_,T,O){var q;if(it(_)?q=_:9===_.nodeType&&(q=_.defaultView),void 0===O)return q?q[m]:_[T];q?q.scrollTo(y?q.pageXOffset:O,y?O:q.pageYOffset):_[T]=O},d,w,arguments.length)}}),x.each(["top","left"],function(d,m){x.cssHooks[m]=Sr(Kt.pixelPosition,function(y,w){if(w)return w=ms(y,m),Ve.test(w)?x(y).position()[m]+"px":w})}),x.each({Height:"height",Width:"width"},function(d,m){x.each({padding:"inner"+d,content:m,"":"outer"+d},function(y,w){x.fn[w]=function(_,T){var O=arguments.length&&(y||"boolean"!=typeof _),q=y||(!0===_||!0===T?"margin":"border");return Hr(this,function(H,K,tt){var at;return it(H)?0===w.indexOf("outer")?H["inner"+d]:H.document.documentElement["client"+d]:9===H.nodeType?(at=H.documentElement,Math.max(H.body["scroll"+d],at["scroll"+d],H.body["offset"+d],at["offset"+d],at["client"+d])):void 0===tt?x.css(H,K,q):x.style(H,K,tt,q)},m,O?_:void 0,O)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,m){x.fn[m]=function(y){return this.on(m,y)}}),x.fn.extend({bind:function(d,m,y){return this.on(d,null,m,y)},unbind:function(d,m){return this.off(d,null,m)},delegate:function(d,m,y,w){return this.on(m,d,y,w)},undelegate:function(d,m,y){return 1===arguments.length?this.off(d,"**"):this.off(m,d||"**",y)},hover:function(d,m){return this.on("mouseenter",d).on("mouseleave",m||d)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,m){x.fn[m]=function(y,w){return 0<arguments.length?this.on(m,null,y,w):this.trigger(m)}});var ro=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(d,m){var y,w,_;if("string"==typeof m&&(y=d[m],m=d,d=y),It(d))return w=ie.call(arguments,2),(_=function(){return d.apply(m||this,w.concat(ie.call(arguments)))}).guid=d.guid=d.guid||x.guid++,_},x.holdReady=function(d){d?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=_t,x.isFunction=It,x.isWindow=it,x.camelCase=Qe,x.type=we,x.now=Date.now,x.isNumeric=function(d){var m=x.type(d);return("number"===m||"string"===m)&&!isNaN(d-parseFloat(d))},x.trim=function(d){return null==d?"":(d+"").replace(ro,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var Qn=bt.jQuery,oo=bt.$;return x.noConflict=function(d){return bt.$===x&&(bt.$=oo),d&&bt.jQuery===x&&(bt.jQuery=Qn),x},typeof Yt>"u"&&(bt.jQuery=bt.$=x),x}),function(bt){bt.imageArea=function(Yt,Qt){var Rn,Je,Kn,On,Wt=Yt.options,ie=Yt.$image,Xe=Yt.$trigger,wr={},Er=!0,Rt=!0,Kt=[0,0],It=[0,0],it={id:Qt,x:0,y:0,z:0,height:0,width:0},En=function(){Yt.blurAll(),it.z=100,mt()},Me=function(){return it},we=function(Tt){ie.trigger(Tt,[it.id,Yt.areas()])},ct=function(Tt){var oe=Tt||window.event||{};oe.cancelBubble=!0,oe.returnValue=!1,oe.stopPropagation&&oe.stopPropagation(),oe.preventDefault&&oe.preventDefault()},x=function(Tt,oe){var ue,Ot;switch(Tt){case"start":ue="mousedown",Ot="touchstart";break;case"move":ue="mousemove",Ot="touchmove";break;case"stop":ue="mouseup",Ot="touchend";break;default:return}oe&&jQuery.isFunction(oe)?bt(window.document).on(ue,oe).on(Ot,oe):bt(window.document).off(ue).off(Ot)},Un=function(){Rn.css({cursor:"default",width:it.width,height:it.height,left:it.x,top:it.y}),Je.css({backgroundPosition:-it.x-1+"px "+(-it.y-1)+"px",cursor:Wt.allowMove?"move":"default",width:it.width-2>0?it.width-2:0,height:it.height-2>0?it.height-2:0,left:it.x+1,top:it.y+1}),Kn.css({width:it.width-2>0?it.width-2:0,left:it.x+2,top:it.y+1})},_t=function(Tt){Wt.allowResize&&(Tt?bt.each(wr,function(oe,ue){var Ot,_e,re=Math.round(ue.width()/2),Z=Math.round(ue.height()/2),wo=oe[0],Ur=oe[oe.length-1];Ot="n"===wo?-Z:"s"===wo?it.height-Z-1:Math.round(it.height/2)-Z-1,_e="e"===Ur?it.width-re-1:"w"===Ur?-re:Math.round(it.width/2)-re-1,ue.css({display:"block",left:it.x+_e,top:it.y+Ot})}):bt(".select-areas-resize-handler").each(function(){bt(this).css({display:"none"})}))},Bn=function(Tt){On&&On.css({display:Tt?"block":"none",left:it.x+it.width+1,top:it.y-On.outerHeight()-1})},Fs=function(Tt){Rn.css({cursor:Tt}),Je.css({cursor:Tt})},mt=function(Tt){switch(Tt){case"startSelection":Yt._refresh(),Un(),_t(),Bn(!0);break;case"pickSelection":case"pickResizeHandler":_t();break;case"resizeSelection":Un(),_t(),Fs("crosshair"),Bn(!0);break;case"moveSelection":Un(),_t(),Fs("move"),Bn(!0);break;case"blur":Un(),_t(),Bn();break;default:Un(),_t(!0),Bn(!0)}},Jr=function(Tt){ct(Tt),En(),x("move",mr),x("stop",Xn);var oe=k(Tt);Kt[0]=oe[0]-it.x,Kt[1]=oe[1]-it.y,mt("pickSelection")},Et=function(Tt){ct(Tt),En();var oe=Tt.target.className.split(" ")[1];"w"===oe[oe.length-1]&&(It[0]+=it.width,it.x=It[0]-it.width),"n"===oe[0]&&(It[1]+=it.height,it.y=It[1]-it.height),"n"===oe||"s"===oe?Er=!1:("e"===oe||"w"===oe)&&(Rt=!1),x("move",yo),x("stop",Xn),mt("pickResizeHandler")},yo=function(Tt){ct(Tt),En();var oe=k(Tt),ue=oe[1]-It[1],Ot=oe[0]-It[0];Math.abs(Ot)<Wt.minSize[0]&&(Ot=Ot>=0?Wt.minSize[0]:-Wt.minSize[0]),Math.abs(ue)<Wt.minSize[1]&&(ue=ue>=0?Wt.minSize[1]:-Wt.minSize[1]),(It[0]+Ot<0||It[0]+Ot>ie.width())&&(Ot=-Ot),(It[1]+ue<0||It[1]+ue>ie.height())&&(ue=-ue),Wt.maxSize[0]>Wt.minSize[0]&&Wt.maxSize[1]>Wt.minSize[1]&&(Math.abs(Ot)>Wt.maxSize[0]&&(Ot=Ot>=0?Wt.maxSize[0]:-Wt.maxSize[0]),Math.abs(ue)>Wt.maxSize[1]&&(ue=ue>=0?Wt.maxSize[1]:-Wt.maxSize[1])),Er&&(it.width=Ot),Rt&&(it.height=ue),Wt.aspectRatio&&(Ot>0&&ue>0||Ot<0&&ue<0?Er?ue=Math.round(Ot/Wt.aspectRatio):Ot=Math.round(ue*Wt.aspectRatio):Er?ue=-Math.round(Ot/Wt.aspectRatio):Ot=-Math.round(ue*Wt.aspectRatio),It[0]+Ot>ie.width()&&(Ot=ie.width()-It[0],ue=ue>0?Math.round(Ot/Wt.aspectRatio):-Math.round(Ot/Wt.aspectRatio)),It[1]+ue<0&&(ue=-It[1],Ot=Ot>0?-Math.round(ue*Wt.aspectRatio):Math.round(ue*Wt.aspectRatio)),It[1]+ue>ie.height()&&(ue=ie.height()-It[1],Ot=Ot>0?Math.round(ue*Wt.aspectRatio):-Math.round(ue*Wt.aspectRatio)),it.width=Ot,it.height=ue),it.width<0?(it.width=Math.abs(it.width),it.x=It[0]-it.width):it.x=It[0],it.height<0?(it.height=Math.abs(it.height),it.y=It[1]-it.height):it.y=It[1],we("changing"),mt("resizeSelection")},mr=function(Tt){if(ct(Tt),Wt.allowMove){En();var oe=k(Tt);Co({x:oe[0]-Kt[0],y:oe[1]-Kt[1]}),we("changing")}},Co=function(Tt){it.x=Tt.x>0?Tt.x+it.width<ie.width()?Tt.x:ie.width()-it.width:0,it.y=Tt.y>0?Tt.y+it.height<ie.height()?Tt.y:ie.height()-it.height:0,mt("moveSelection")},Xn=function(Tt,oe){ct(Tt),function(){bt.each(arguments,function(Tt,oe){x(oe)})}("move","stop"),oe&&(it.x=oe.x,it.y=oe.y,it.z=oe.z,it.width=oe.width,it.height=oe.height,Un()),It[0]=it.x,It[1]=it.y,Er=!0,Rt=!0,we("changed"),mt("releaseSelection")},Ce=function(Tt){we("deleted"),ct(Tt),Je.remove(),Rn.remove(),Kn.remove(),bt.each(wr,function(oe,ue){ue.remove()}),On&&On.remove(),Yt._remove(Qt)},k=function(Tt){var oe=function(Tt){var oe=bt(Tt).offset();return[oe.left,oe.top]}(ie);Tt.pageX||(Tt.originalEvent&&(Tt=Tt.originalEvent),Tt.changedTouches&&(Tt=Tt.changedTouches[0]),Tt.touches&&(Tt=Tt.touches[0]));var ue=Tt.pageX-oe[0],Ot=Tt.pageY-oe[1];return[ue=ue<0?0:ue>ie.width()?ie.width():ue,Ot=Ot<0?0:Ot>ie.height()?ie.height():Ot]};if(Rn=bt("<div id='select-areas-outline_"+Me().id+'\'  class="select-areas-outline"/>').css({opacity:Wt.outlineOpacity,position:"absolute"}).insertAfter(Xe),Je=bt("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+Me().id).css({position:"absolute"}).insertAfter(Rn),Kn=bt("<div id='select-areas-label-container_"+Me().id+'\'  class="select-areas-label-container"/>').css({position:"absolute"}).insertAfter(Xe),Wt.allowResize&&bt.each(["nw","n","ne","e","se","s","sw","w"],function(Tt,oe){wr[oe]=bt('<div class="select-areas-resize-handler '+oe+" select-areas-resize-handler_"+Me().id+'"/>').css({opacity:.5,position:"absolute",cursor:oe+"-resize"}).insertAfter(Je).mousedown(Et).bind("touchstart",Et)}),Wt.allowDelete){var xo=function(Tt){return Tt.click(Ce).bind("touchstart",Ce).bind("tap",Ce),Tt};On=xo(bt("<div id='select-areas-delete_"+Me().id+'\'  class="delete-area" />')).append(xo(bt('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(Je)}return Wt.allowMove&&Je.mousedown(Jr).bind("touchstart",Jr),En(),{getData:Me,startSelection:function(Tt){ct(Tt),it.width=Wt.minSize[0],it.height=Wt.minSize[1],En(),x("move",yo),x("stop",Xn),(It=k(Tt))[0]+it.width>ie.width()&&(It[0]=ie.width()-it.width),It[1]+it.height>ie.height()&&(It[1]=ie.height()-it.height),it.x=It[0],it.y=It[1],mt("startSelection")},deleteSelection:Ce,options:Wt,blur:function(){it.z=0,mt("blur")},focus:En,nudge:function(Tt){Tt.x=it.x,Tt.y=it.y,Tt.d&&(Tt.y=it.y+Tt.d),Tt.u&&(Tt.y=it.y-Tt.u),Tt.l&&(Tt.x=it.x-Tt.l),Tt.r&&(Tt.x=it.x+Tt.r),Co(Tt),we("changed")},set:function(Tt,oe){it=bt.extend(it,Tt),It[0]=it.x,It[1]=it.y,oe||we("changed")},contains:function(Tt){return Tt.x>=it.x&&Tt.x<=it.x+it.width&&Tt.y>=it.y&&Tt.y<=it.y+it.height}}},bt.imageSelectAreas=function(){},bt.imageSelectAreas.prototype.init=function(Yt,Qt){var Wt=this;this.options=bt.extend({allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null},Qt),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=bt(Yt),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=bt("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=bt('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=bt("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),bt.each(this.options.areas,function(Xe,Rn){Wt._add(Rn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(bt.proxy(this.newArea,this)).on("touchstart",bt.proxy(this.newArea,this)),this.options.allowNudge&&bt("html").keydown(function(Xe){var Kn,Je={37:"l",38:"u",39:"r",40:"d"}[Xe.which];if(Je&&(Wt._eachArea(function(On){if(100===On.getData().z)return Kn=On,!1}),Kn)){var wr={};wr[Je]=1,Kn.nudge(wr)}})},bt.imageSelectAreas.prototype._refresh=function(){var Yt=this.areas().length;this.$overlay.css({display:Yt?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},bt.imageSelectAreas.prototype._eachArea=function(Yt){bt.each(this._areas,function(Qt,Wt){if(Wt)return Yt(Wt,Qt)})},bt.imageSelectAreas.prototype._remove=function(Yt){delete this._areas[Yt],this._refresh()},bt.imageSelectAreas.prototype.remove=function(Yt){this._areas[Yt]&&this._areas[Yt].deleteSelection()},bt.imageSelectAreas.prototype.newArea=function(Yt){var Qt=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(Wt,ie){Qt=Math.max(Qt,parseInt(ie,10))}),this._areas[Qt+=1]=bt.imageArea(this,Qt),Yt&&this._areas[Qt].startSelection(Yt)),Qt},bt.imageSelectAreas.prototype.set=function(Yt,Qt,Wt){this._areas[Yt]&&(Qt.id=Yt,this._areas[Yt].set(Qt,Wt),this._areas[Yt].focus())},bt.imageSelectAreas.prototype._add=function(Yt,Qt){var Wt=this.newArea();this.set(Wt,Yt,Qt)},bt.imageSelectAreas.prototype.add=function(Yt){var Qt=this;this.blurAll(),bt.isArray(Yt)?bt.each(Yt,function(Wt,ie){Qt._add(ie)}):this._add(Yt),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},bt.imageSelectAreas.prototype.reset=function(){var Yt=this;this._eachArea(function(Qt,Wt){Yt.remove(Wt)}),this._refresh()},bt.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},bt.imageSelectAreas.prototype.areas=function(){var Yt=[];return this._eachArea(function(Qt){Yt.push(Qt.getData())}),Yt},bt.imageSelectAreas.prototype.relativeAreas=function(){for(var Yt=this.areas(),Qt=[],Wt=this.ratio,ie=function(Rn){return Math.floor(Rn/Wt)},Xe=0;Xe<Yt.length;Xe++)Qt[Xe]=bt.extend({},Yt[Xe]),Qt[Xe].x=ie(Qt[Xe].x),Qt[Xe].y=ie(Qt[Xe].y),Qt[Xe].width=ie(Qt[Xe].width),Qt[Xe].height=ie(Qt[Xe].height);return Qt},bt.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(Yt){Yt.blur()})},bt.imageSelectAreas.prototype.contains=function(Yt){var Qt=!1;return this._eachArea(function(Wt){if(Wt.contains(Yt))return Qt=!0,!1}),Qt},bt.selectAreas=function(Yt,Qt){var Wt=bt(Yt);if(!Wt.data("mainImageSelectAreas")){var ie=new bt.imageSelectAreas;ie.init(Yt,Qt),Wt.data("mainImageSelectAreas",ie),Wt.trigger("loaded")}return Wt.data("mainImageSelectAreas")},bt.fn.selectAreas=function(Yt){if(bt.imageSelectAreas.prototype[Yt]){var Qt=bt.imageSelectAreas.prototype[Yt].apply(bt.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Qt>"u"?this:Qt}if("object"==typeof Yt||!Yt)return this.each(function(){var Wt=this,ie=new Image;ie.onload=function(){bt.selectAreas(Wt,Yt)},ie.src=Wt.src}),this;bt.error("Method "+Yt+" does not exist on jQuery.selectAreas")}}(jQuery);
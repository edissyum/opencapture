!function(){"use strict";var bt=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},Yt=function(t){return{eq:t}},Qt=Yt(function(t,e){return t===e}),Wt=function(t){return Yt(function(e,n){if(e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t.eq(e[o],n[o]))return!1;return!0})},ie=function(t){return Yt(function(e,n){var l,u,f,r=Object.keys(e),o=Object.keys(n);if(!(l=Qt,u=Wt(l),f=function(u){return Array.prototype.slice.call(u).sort(void 0)},Yt(function(p,b){return u.eq(f(p),f(b))})).eq(r,o))return!1;for(var s=r.length,a=0;a<s;a++){var i=r[a];if(!t.eq(e[i],n[i]))return!1}return!0})},Xe=Yt(function(t,e){if(t===e)return!0;var n=bt(t);return n===bt(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?Wt(Xe).eq(t,e):"object"===n&&ie(Xe).eq(t,e))});const Nn=Object.getPrototypeOf,tn=(t,e,n)=>{var r;return!!n(t,e.prototype)||(null===(r=t.constructor)||void 0===r?void 0:r.name)===e.name},Gn=t=>e=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&tn(n,String,(o,s)=>s.isPrototypeOf(o))?"string":r})(e)===t,xr=t=>e=>typeof e===t,An=t=>e=>t===e,wr=(t,e)=>Xt(t)&&tn(t,e,(n,r)=>Nn(n)===r),Nt=Gn("string"),Xt=Gn("object"),Mt=t=>wr(t,Object),at=Gn("array"),te=An(null),Tn=xr("boolean"),Ie=An(void 0),Se=t=>null==t,lt=t=>!Se(t),he=xr("function"),x=xr("number"),zn=(t,e)=>{if(at(t)){for(let n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}return!1},St=()=>{},Rn=(t,e)=>(...n)=>t(e.apply(null,n)),zs=(t,e)=>n=>t(e(n)),ft=t=>()=>t,me=t=>t,Zr=(t,e)=>t===e;function xt(t,...e){return(...n)=>{const r=e.concat(n);return t.apply(null,r)}}const bo=t=>e=>!t(e),ur=t=>()=>{throw new Error(t)},vo=t=>t(),Qn=t=>{t()},xe=ft(!1),je=ft(!0);class k{constructor(e,n){this.tag=e,this.value=n}static some(e){return new k(!0,e)}static none(){return k.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?k.some(e(this.value)):k.none()}bind(e){return this.tag?e(this.value):k.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:k.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return lt(e)?k.some(e):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const yo=Array.prototype.slice,kt=Array.prototype.indexOf,oe=Array.prototype.push,de=(t,e)=>kt.call(t,e),At=(t,e)=>de(t,e)>-1,Te=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},re=(t,e)=>{const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e(t[o],o);return r},Q=(t,e)=>{for(let n=0,r=t.length;n<r;n++)e(t[n],n)},Co=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},zr=(t,e)=>{const n=[],r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];(e(a,o)?n:r).push(a)}return{pass:n,fail:r}},Kt=(t,e)=>{const n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];e(s,r)&&n.push(s)}return n},$o=(t,e,n)=>(Co(t,(r,o)=>{n=e(n,r,o)}),n),Cn=(t,e,n)=>(Q(t,(r,o)=>{n=e(n,r,o)}),n),Ur=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++){const s=t[r];if(e(s,r))return k.some(s);if(n(s,r))break}return k.none()},Ge=(t,e)=>Ur(t,e,xe),Us=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return k.some(n);return k.none()},Zl=t=>{const e=[];for(let n=0,r=t.length;n<r;++n){if(!at(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);oe.apply(e,t[n])}return e},Qe=(t,e)=>Zl(re(t,e)),fr=(t,e)=>{for(let n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0},Jr=t=>{const e=yo.call(t,0);return e.reverse(),e},ee=(t,e)=>Kt(t,n=>!At(e,n)),On=(t,e)=>{const n={};for(let r=0,o=t.length;r<o;r++){const s=t[r];n[String(s)]=e(s,r)}return n},Wo=(t,e)=>{const n=yo.call(t,0);return n.sort(e),n},Hs=(t,e)=>e>=0&&e<t.length?k.some(t[e]):k.none(),Sn=t=>Hs(t,0),to=t=>Hs(t,t.length-1),xn=he(Array.from)?Array.from:t=>yo.call(t),Zn=(t,e)=>{for(let n=0;n<t.length;n++){const r=e(t[n],n);if(r.isSome())return r}return k.none()},xo=(t,e)=>{const n=[],r=he(e)?o=>Te(n,s=>e(s,o)):o=>At(n,o);for(let o=0,s=t.length;o<s;o++){const a=t[o];r(a)||n.push(a)}return n},an=Object.keys,su=Object.hasOwnProperty,we=(t,e)=>{const n=an(t);for(let r=0,o=n.length;r<o;r++){const s=n[r];e(t[s],s)}},ds=(t,e)=>Jl(t,(n,r)=>({k:r,v:e(n,r)})),Jl=(t,e)=>{const n={};return we(t,(r,o)=>{const s=e(r,o);n[s.k]=s.v}),n},wo=t=>(e,n)=>{t[n]=e},So=(t,e,n,r)=>{we(t,(o,s)=>{(e(o,s)?n:r)(o,s)})},Eo=(t,e)=>{const n={};return So(t,e,wo(n),St),n},ko=(t,e)=>{const n=[];return we(t,(r,o)=>{n.push(e(r,o))}),n},Pa=t=>ko(t,me),Re=(t,e)=>jt(t,e)?k.from(t[e]):k.none(),jt=(t,e)=>su.call(t,e),un=(t,e)=>jt(t,e)&&null!=t[e],La=t=>{const e={};return Q(t,n=>{e[n]={}}),an(e)},tc=t=>void 0!==t.length,Ma=Array.isArray,qs=(t,e,n)=>{if(!t)return!1;if(n=n||t,tc(t)){for(let r=0,o=t.length;r<o;r++)if(!1===e.call(n,t[r],r,t))return!1}else for(const r in t)if(jt(t,r)&&!1===e.call(n,t[r],r,t))return!1;return!0},_o=(t,e)=>{const n=[];return qs(t,(r,o)=>{n.push(e(r,o,t))}),n},Hr=(t,e)=>{const n=[];return qs(t,(r,o)=>{e&&!e(r,o,t)||n.push(r)}),n},us=(t,e,n,r)=>{let o=Ie(n)?t[0]:n;for(let s=0;s<t.length;s++)o=e.call(r,o,t[s],s);return o},$s=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t))return r;return-1},Vo=t=>t[t.length-1],qr=t=>{let e,n=!1;return(...r)=>(n||(n=!0,e=t.apply(null,r)),e)},ec=()=>Ia(0,0),Ia=(t,e)=>({major:t,minor:e}),Ws={nu:Ia,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?ec():((r,o)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const u=i[c];if(u.test(l))return u}})(r,o);if(!s)return{major:0,minor:0};const a=i=>Number(o.replace(s,"$"+i));return Ia(a(1),a(2))})(t,n)},unknown:ec},nc=(t,e)=>{const n=String(e).toLowerCase();return Ge(t,r=>r.search(n))},ki=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,Ko=(t,e)=>Ve(t,e)?t.substring(e.length):t,fn=(t,e,n=0,r)=>{const o=t.indexOf(e,n);return-1!==o&&(!!Ie(r)||o+e.length<=r)},Ve=(t,e)=>ki(t,e,0),Vs=(t,e)=>ki(t,e,t.length-e.length),fs=t=>e=>e.replace(t,""),Xo=fs(/^\s+|\s+$/g),au=fs(/^\s+/g),ms=fs(/\s+$/g),Sr=t=>t.length>0,ps=t=>!Sr(t),Ks=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?k.none():k.some(n)},Fa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Er=t=>e=>fn(e,t),iu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>fn(t,"edge/")&&fn(t,"chrome")&&fn(t,"safari")&&fn(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fa],search:t=>fn(t,"chrome")&&!fn(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>fn(t,"msie")||fn(t,"trident")},{name:"Opera",versionRegexes:[Fa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Er("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Er("firefox")},{name:"Safari",versionRegexes:[Fa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(fn(t,"safari")||fn(t,"mobile/"))&&fn(t,"applewebkit")}],lu=[{name:"Windows",search:Er("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>fn(t,"iphone")||fn(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Er("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Er("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Er("linux"),versionRegexes:[]},{name:"Solaris",search:Er("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Er("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Er("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],_i={browsers:ft(iu),oses:ft(lu)},ja="Chromium",mr="Firefox",Xs=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isEdge:r("Edge"),isChromium:r(ja),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(mr),isSafari:r("Safari")}},gs=()=>Xs({current:void 0,version:Ws.unknown()}),rc=Xs,oc=(ft("Edge"),ft(ja),ft("IE"),ft("Opera"),ft(mr),ft("Safari"),"Windows"),sc="Android",Ys="Solaris",Ri="FreeBSD",pr="ChromeOS",Oi=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isWindows:r(oc),isiOS:r("iOS"),isAndroid:r(sc),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(Ys),isFreeBSD:r(Ri),isChromeOS:r(pr)}},Gs=()=>Oi({current:void 0,version:Ws.unknown()}),cu=Oi,du=(ft(oc),ft("iOS"),ft(sc),ft("Linux"),ft("macOS"),ft(Ys),ft(Ri),ft(pr),t=>window.matchMedia(t).matches);let Go=qr(()=>((t,e,n)=>{const r=_i.browsers(),o=_i.oses(),s=e.bind(l=>{return c=r,Zn(l.brands,f=>{const p=f.brand.toLowerCase();return Ge(c,b=>{var h;return p===(null===(h=b.brand)||void 0===h?void 0:h.toLowerCase())}).map(b=>({current:b.name,version:Ws.nu(parseInt(f.version,10),0)}))});var c}).orThunk(()=>{return nc(r,c=t).map(u=>{const f=Ws.detect(u.versionRegexes,c);return{current:u.name,version:f}});var c}).fold(gs,rc),a=(l=o,c=t,nc(l,c).map(u=>{const f=Ws.detect(u.versionRegexes,c);return{current:u.name,version:f}})).fold(Gs,cu),i=((l,c,u,f)=>{const p=l.isiOS()&&!0===/ipad/i.test(u),b=l.isiOS()&&!p,h=l.isiOS()||l.isAndroid(),v=h||f("(pointer:coarse)"),g=p||!b&&h&&f("(min-device-width:768px)"),C=b||h&&!g,S=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(u),E=!C&&!g&&!S;return{isiPad:ft(p),isiPhone:ft(b),isTablet:ft(g),isPhone:ft(C),isTouch:ft(v),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ft(S),isDesktop:ft(E)}})(a,s,t,n);var l,c;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,k.from(navigator.userAgentData),du));const Dn=()=>Go(),Di=navigator.userAgent,Bi=Dn(),Jn=Bi.browser,kr=Bi.os,eo=Bi.deviceType,ac=-1!==Di.indexOf("Windows Phone"),pe={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Jn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Jn.isIE(),windowsPhone:ac,browser:{current:Jn.current,version:Jn.version,isChromium:Jn.isChromium,isEdge:Jn.isEdge,isFirefox:Jn.isFirefox,isIE:Jn.isIE,isOpera:Jn.isOpera,isSafari:Jn.isSafari},os:{current:kr.current,version:kr.version,isAndroid:kr.isAndroid,isChromeOS:kr.isChromeOS,isFreeBSD:kr.isFreeBSD,isiOS:kr.isiOS,isLinux:kr.isLinux,isMacOS:kr.isMacOS,isSolaris:kr.isSolaris,isWindows:kr.isWindows},deviceType:{isDesktop:eo.isDesktop,isiPad:eo.isiPad,isiPhone:eo.isiPhone,isPhone:eo.isPhone,isTablet:eo.isTablet,isTouch:eo.isTouch,isWebView:eo.isWebView}},uu=/^\s*|\s*$/g,Pi=t=>Se(t)?"":(""+t).replace(uu,""),ic=function(t,e,n,r){r=r||this,t&&(n&&(t=t[n]),qs(t,(o,s)=>!1!==e.call(r,o,s,n)&&(ic(o,e,n,r),!0)))},it={trim:Pi,isArray:Ma,is:(t,e)=>e?!("array"!==e||!Ma(t))||typeof t===e:void 0!==t,toArray:t=>{if(Ma(t))return t;{const e=[];for(let n=0,r=t.length;n<r;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const r=Nt(t)?t.split(e||","):t||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:qs,map:_o,grep:Hr,inArray:(t,e)=>{if(t)for(let n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},hasOwn:jt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(jt(r,o)){const s=r[o];void 0!==s&&(t[o]=s)}}return t},walk:ic,resolve:(t,e=window)=>{const n=t.split(".");for(let r=0,o=n.length;r<o&&(e=e[n[r]]);r++);return e},explode:(t,e)=>at(t)?t:""===t?[]:_o(t.split(e||","),Pi),_addCacheSuffix:t=>{const e=pe.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},No=(t,e,n=Zr)=>t.exists(r=>n(r,e)),lc=(t,e,n=Zr)=>wn(t,e,n).getOr(t.isNone()&&e.isNone()),wn=(t,e,n)=>t.isSome()&&e.isSome()?k.some(n(t.getOrDie(),e.getOrDie())):k.none(),hs=(t,e)=>t?k.some(e):k.none(),fu=typeof window<"u"?window:Function("return this;")(),cc=(t,e)=>((n,r)=>{let o=r??fu;for(let s=0;s<n.length&&null!=o;++s)o=o[n[s]];return o})(t.split("."),e),mu=Object.getPrototypeOf,fe=t=>t.dom.nodeName.toLowerCase(),Li=t=>t.dom.nodeType,bs=t=>e=>Li(e)===t,Qs=t=>Un(t)&&(t=>{const e=cc("ownerDocument.defaultView",t);return Xt(t)&&((n=e,((r,o)=>{const s=cc(r,o);if(null==s)throw new Error(r+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(mu(t).constructor.name));var n})(t.dom),Un=bs(1),Hn=bs(3),pu=bs(9),Zs=bs(11),Js=t=>e=>Un(e)&&fe(e)===t,Mi=(t,e,n)=>{if(!(Nt(n)||Tn(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Ze=(t,e,n)=>{Mi(t.dom,e,n)},no=(t,e)=>{const n=t.dom;we(e,(r,o)=>{Mi(n,o,r)})},tr=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},ro=(t,e)=>k.from(tr(t,e)),d=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},m=(t,e)=>{t.dom.removeAttribute(e)},y=t=>Cn(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),w=(t,e)=>{const n=tr(t,e);return void 0===n||""===n?[]:n.split(" ")},_=t=>void 0!==t.dom.classList,T=t=>w(t,"class"),O=(t,e)=>((n,r,o)=>{const s=w(n,r).concat([o]);return Ze(n,r,s.join(" ")),!0})(t,"class",e),q=(t,e)=>((n,r,o)=>{const s=Kt(w(n,r),a=>a!==o);return s.length>0?Ze(n,r,s.join(" ")):m(n,r),!1})(t,"class",e),H=(t,e)=>{_(t)?t.dom.classList.add(e):O(t,e)},K=t=>{0===(_(t)?t.dom.classList:T(t)).length&&m(t,"class")},et=(t,e)=>{_(t)?t.dom.classList.remove(e):q(t,e),K(t)},ot=(t,e)=>_(t)&&t.dom.classList.contains(e),J=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},ut=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,t),new Error(r)}return J(n.childNodes[0])},Dt=(t,e)=>{const n=(e||document).createElement(t);return J(n)},le=(t,e)=>{const n=(e||document).createTextNode(t);return J(n)},D=J,mn=(t,e)=>{const n=[],r=s=>(n.push(s),e(s));let o=e(t);do{o=o.bind(r)}while(o.isSome());return n},ln=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},_r=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,It=(t,e)=>t.dom===e.dom,qn=(t,e)=>{const n=t.dom,r=e.dom;return n!==r&&n.contains(r)},Ne=t=>D(t.dom.ownerDocument),Le=t=>pu(t)?t:Ne(t),oo=t=>D(Le(t).dom.defaultView),sr=t=>k.from(t.dom.parentNode).map(D),ar=t=>k.from(t.dom.parentElement).map(D),vs=(t,e)=>{const n=he(e)?e:xe;let r=t.dom;const o=[];for(;null!=r.parentNode;){const s=r.parentNode,a=D(s);if(o.push(a),!0===n(a))break;r=s}return o},$n=t=>k.from(t.dom.previousSibling).map(D),gr=t=>k.from(t.dom.nextSibling).map(D),Qo=t=>Jr(mn(t,$n)),ir=t=>mn(t,gr),Ee=t=>re(t.dom.childNodes,D),qe=(t,e)=>k.from(t.dom.childNodes[e]).map(D),En=t=>qe(t,0),$r=t=>qe(t,t.dom.childNodes.length-1),kn=t=>t.dom.childNodes.length,se=t=>Zs(t)&&lt(t.dom.host),Je=he(Element.prototype.attachShadow)&&he(Node.prototype.getRootNode),nn=ft(Je),Oe=Je?t=>D(t.dom.getRootNode()):Le,hr=t=>se(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return D(n)})(Le(t)),ys=t=>D(t.dom.host),ta=t=>{if(nn()&&lt(t.target)){const e=D(t.target);if(Un(e)&&Zo(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Sn(n)}}return k.from(t.target)},Zo=t=>lt(t.dom.shadowRoot),Ao=t=>{const e=Hn(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(r=>{const o=Oe(r);return se(o)?k.some(o):k.none()})(D(e)).fold(()=>n.body.contains(e),zs(Ao,ys))};var so=(t,e,n,r,o)=>t(n,r)?k.some(n):he(o)&&o(n)?k.none():e(n,r,o);const Wr=(t,e,n)=>{let r=t.dom;const o=he(n)?n:xe;for(;r.parentNode;){r=r.parentNode;const s=D(r);if(e(s))return k.some(s);if(o(s))break}return k.none()},Nr=(t,e,n)=>so((r,o)=>o(r),Wr,t,e,n),ea=(t,e)=>{const n=r=>{for(let o=0;o<r.childNodes.length;o++){const s=D(r.childNodes[o]);if(e(s))return k.some(s);const a=n(r.childNodes[o]);if(a.isSome())return a}return k.none()};return n(t.dom)},To=(t,e,n)=>Wr(t,r=>ln(r,e),n),Cs=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return _r(o)?k.none():k.from(o.querySelector(n)).map(D)})(e,t),ao=(t,e,n)=>so((r,o)=>ln(r,o),To,t,e,n),io=(t,e=!1)=>{return Ao(t)?t.dom.isContentEditable:(n=t,ao(n,"[contenteditable]")).fold(ft(e),r=>"true"===Ii(r));var n},Ii=t=>t.dom.contentEditable,Jo=t=>void 0!==t.style&&he(t.style.getPropertyValue),Fi=(t,e,n)=>{if(!Nt(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Jo(t)&&t.style.setProperty(e,n)},M=(t,e,n)=>{Fi(t.dom,e,n)},W=(t,e)=>{const n=t.dom;we(e,(r,o)=>{Fi(n,o,r)})},tt=(t,e)=>{const n=t.dom,r=window.getComputedStyle(n).getPropertyValue(e);return""!==r||Ao(t)?r:nt(n,e)},nt=(t,e)=>Jo(t)?t.style.getPropertyValue(e):"",dt=(t,e)=>{const r=nt(t.dom,e);return k.from(r).filter(o=>o.length>0)},Ut=t=>{const e={},n=t.dom;if(Jo(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);e[o]=n.style[o]}return e},Ht=(t,e)=>{var n,r;r=e,Jo(n=t.dom)&&n.style.removeProperty(r),No(ro(t,"style").map(Xo),"")&&m(t,"style")},Ft=(t,e)=>{sr(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Bt=(t,e)=>{gr(t).fold(()=>{sr(t).each(n=>{Vt(n,e)})},n=>{Ft(n,e)})},Ae=(t,e)=>{En(t).fold(()=>{Vt(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Vt=(t,e)=>{t.dom.appendChild(e.dom)},ge=(t,e)=>{Ft(t,e),Vt(e,t)},be=(t,e)=>{Q(e,n=>{Vt(t,n)})},ae=t=>{t.dom.textContent="",Q(Ee(t),e=>{ue(e)})},ue=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Ye=t=>{const e=Ee(t);var n,r;e.length>0&&(n=t,Q(r=e,(o,s)=>{Bt(0===s?n:r[s-1],o)})),ue(t)},cn=t=>re(t,D),Wn=t=>t.dom.innerHTML,Bn=(t,e)=>{const n=Ne(t).dom,r=D(n.createDocumentFragment()),o=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,Ee(D(i))})(e,n);be(r,o),ae(t),Vt(t,r)},$e=(t,e,n,r)=>{t.dom.removeEventListener(e,n,r)},Ro=(t,e)=>({left:t,top:e,translate:(n,r)=>Ro(t+n,e+r)}),Pn=Ro,ts=(t,e)=>void 0!==t?t:void 0!==e?e:0,Ua=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Pn(n.offsetLeft,n.offsetTop):Ao(t)?(r=>{const o=r.getBoundingClientRect();return Pn(o.left,o.top)})(e):Pn(0,0)},Ha=t=>{const e=void 0!==t?t.dom:document;return Pn(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},uc=(t,e,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(t,e)},Sg=(t,e)=>{Dn().browser.isSafari()&&he(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Eg=(t,e,n,r)=>({x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}),kg=t=>{const e=void 0===t?window:t,r=Ha(D(e.document));return(o=>{const s=void 0===o?window:o;return Dn().browser.isFirefox()?k.none():k.from(s.visualViewport)})(e).fold(()=>{const o=e.document.documentElement;return Eg(r.left,r.top,o.clientWidth,o.clientHeight)},o=>Eg(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},_g=(t,e)=>{let n=[];return Q(Ee(t),r=>{e(r)&&(n=n.concat([r])),n=n.concat(_g(r,e))}),n},Ln=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return _r(o)?[]:re(o.querySelectorAll(n),D)})(e,t),Ng=(t,e,n)=>Wr(t,e,n).isSome(),Ag=(t,e)=>ea(t,e).isSome();class pn{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,r,o){if(e){if(!o&&e[n])return e[n];if(e!==this.rootNode){let s=e[r];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[r],s)return s}}}findPreviousNode(e,n){if(e){const r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let s=r.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return r}const o=e.parentNode;if(o&&o!==this.rootNode)return o}}}const gn="\xa0",gu=t=>"\ufeff"===t,_E=/^[ \t\r\n]*$/,qa=t=>_E.test(t),Tg=t=>"\n"===t||"\r"===t,Rg=(t,e=4,n=!0,r=!0)=>{const o=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,o);var l;return Cn(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===gn?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&r||(u=i.str.length+1)<(c=s).length&&u>=0&&Tg(c[u])?{pcIsSpace:!1,str:i.str+gn}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Tg(l),str:i.str+l};var c,u},{pcIsSpace:!1,str:""}).str},na=t=>e=>!!e&&e.nodeType===t,fc=t=>!!t&&!Object.getPrototypeOf(t),Et=na(1),es=t=>Et(t)&&Qs(D(t)),zi=t=>{const e=t.toLowerCase();return n=>lt(n)&&n.nodeName.toLowerCase()===e},lo=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return At(e,r)}return!1}},mc=(t,e)=>{const n=e.toLowerCase().split(" ");return r=>{if(Et(r)){const o=r.ownerDocument.defaultView;if(o)for(let s=0;s<n.length;s++){const a=o.getComputedStyle(r,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},ra=t=>Et(t)&&t.hasAttribute("data-mce-bogus"),Oo=t=>Et(t)&&"TABLE"===t.tagName,Og=t=>e=>!(!es(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),hu=lo(["textarea","input"]),st=na(3),NE=na(4),AE=na(7),xs=na(8),Ui=na(9),bu=na(11),We=zi("br"),Dg=zi("img"),Vr=Og("true"),Me=Og("false"),pc=lo(["td","th"]),TE=lo(["td","th","caption"]),Do=lo(["video","audio","object","embed"]),RE=zi("li"),vu=zi("details"),OE=zi("summary"),Bg={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},yu=(t,e,n,r)=>{return he(r.isContent)&&r.isContent(e)||(s=t,Et(o=e)&&jt(s.getNonEmptyElements(),o.nodeName))||(t=>Et(t)&&t.hasAttribute("data-mce-bookmark"))(e)||(o=>Et(o)&&"A"===o.nodeName&&!o.hasAttribute("href")&&(o.hasAttribute("name")||o.hasAttribute("id")))(e)||((t,e,n,r)=>{return st(t)&&(s=e,a=n,!(qa((o=t).data)&&!((i,l,c)=>{const u=D(l),f=D(i),p=c.getWhitespaceElements();return Ng(f,b=>jt(p,fe(b)),xt(It,u))})(o,s,a)))&&(!r.includeZwsp||!(o=>{for(const s of o)if(!gu(s))return!1;return!0})(t.data));var o,s,a})(e,n,t,r)||Me(e)||Vr(e)&&(o=>ar(D(o)).exists(s=>!io(s)))(e);var o,s},ns=(t,e,n)=>{const r={...Bg,...n};if(r.checkRootAsContent&&yu(t,e,e,r))return!1;let o=e.firstChild,s=0;if(!o)return!0;const a=new pn(o,e);do{if(r.skipBogus&&Et(o)){const i=o.getAttribute("data-mce-bogus");if(i){o=a.next("all"===i);continue}}if(xs(o))o=a.next(!0);else if(We(o))s++,o=a.next();else{if(yu(t,o,e,r))return!1;o=a.next()}}while(o);return s<=1},Mn=(t,e,n)=>ns(t,e.dom,{checkRootAsContent:!0,...n}),Pg=(t,e,n)=>yu(t,e,e,{includeZwsp:Bg.includeZwsp,...n}),oa=t=>"svg"===t.toLowerCase(),Cu=t=>oa(t.nodeName),Lg=t=>"svg"===t?.nodeName?"svg":"html",PE=["svg"],gc="data-mce-block",xu=t=>{return re((e=t,Kt(an(e),n=>!/[A-Z]/.test(n))),e=>`${e}:`+re(PE,n=>`not(${n} ${e})`).join(":")).join(",");var e},Mg=(t,e)=>lt(e.querySelector(t))?(e.setAttribute(gc,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(gc),!1),Ig=(t,e)=>{const n=xu(t.getTransparentElements()),r=xu(t.getBlockElements());return Kt(e.querySelectorAll(n),o=>Mg(r,o))},Fg=(t,e,n)=>{var r;const o=n?"lastChild":"firstChild";for(let s=e[o];s;s=s[o])if(ns(t,s,{checkRootAsContent:!0}))return void(null===(r=s.parentNode)||void 0===r||r.removeChild(s))},wu=(t,e)=>{const n=Ig(t,e);var r,o,s;((t,e,n)=>{const r=t.getBlockElements(),o=D(e),s=i=>fe(i)in r,a=i=>It(i,o);Q(cn(n),i=>{Wr(i,s,a).each(l=>{const c=Kt(Ee(i),p=>s(p)&&!t.isValidChild(fe(l),fe(p)));if(c.length>0){const u=ar(l);Q(c,f=>{Wr(f,s,a).each(p=>{((b,h,v)=>{const g=document.createRange(),C=h.parentNode;if(C){g.setStartBefore(h),g.setEndBefore(v);const S=g.extractContents();Fg(b,S,!0),g.setStartAfter(v),g.setEndAfter(h);const E=g.extractContents();Fg(b,E,!1),ns(b,S,{checkRootAsContent:!0})||C.insertBefore(S,h),ns(b,v,{checkRootAsContent:!0})||C.insertBefore(v,h),ns(b,E,{checkRootAsContent:!0})||C.insertBefore(E,h),C.removeChild(h)}})(t,p.dom,f.dom)})}),u.each(f=>Ig(t,f.dom))}})})})(t,e,n),r=t,o=e,s=n,Q([...s,...sa(r,o)?[o]:[]],a=>Q(Ln(D(a),a.nodeName.toLowerCase()),i=>{IE(r,i.dom)&&Ye(i)}))},ME=(t,e)=>{if(ku(t,e)){const n=xu(t.getBlockElements());Mg(n,e)}},Su=t=>t.hasAttribute(gc),Eu=(t,e)=>jt(t.getTransparentElements(),e),ku=(t,e)=>Et(e)&&Eu(t,e.nodeName),sa=(t,e)=>ku(t,e)&&Su(e),IE=(t,e)=>ku(t,e)&&!Su(e),_u=(t,e)=>1===e.type&&Eu(t,e.name)&&Nt(e.attr(gc)),FE=Dn().browser,jg=t=>Ge(t,Un),zg=(t,e)=>t.children&&At(t.children,e),Ug=(t,e={})=>{let n=0;const r={},o=D(t),s=Le(o),a=f=>{Vt(hr(o),f)},i=f=>{const p=hr(o);Cs(p,"#"+f).each(ue)},l=f=>Re(r,f).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=f=>new Promise((p,b)=>{let h;const v=it._addCacheSuffix(f),g=l(v);r[v]=g,g.count++;const C=(A,R)=>{Q(A,Qn),g.status=R,g.passed=[],g.failed=[],h&&(h.onload=null,h.onerror=null,h=null)},S=()=>C(g.passed,2),E=()=>C(g.failed,3);if(p&&g.passed.push(p),b&&g.failed.push(b),1===g.status)return;if(2===g.status)return void S();if(3===g.status)return void E();g.status=1;const N=Dt("link",s.dom);no(N,{rel:"stylesheet",type:"text/css",id:g.id}),e.contentCssCors&&Ze(N,"crossOrigin","anonymous"),e.referrerPolicy&&Ze(N,"referrerpolicy",e.referrerPolicy),h=N.dom,h.onload=S,h.onerror=E,a(N),Ze(N,"href",v)}),u=f=>{const p=it._addCacheSuffix(f);Re(r,p).each(b=>{0==--b.count&&(delete r[p],i(b.id))})};return{load:c,loadRawCss:(f,p)=>{const b=l(f);r[f]=b,b.count++;const h=Dt("style",s.dom);no(h,{rel:"stylesheet",type:"text/css",id:b.id}),h.dom.innerHTML=p,a(h)},loadAll:f=>Promise.allSettled(re(f,p=>c(p).then(ft(p)))).then(p=>{const b=zr(p,h=>"fulfilled"===h.status);return b.fail.length>0?Promise.reject(re(b.fail,h=>h.reason)):re(b.pass,h=>h.value)}),unload:u,unloadRawCss:f=>{Re(r,f).each(p=>{0==--p.count&&(delete r[f],i(p.id))})},unloadAll:f=>{Q(f,p=>{u(p)})},_setReferrerPolicy:f=>{e.referrerPolicy=f},_setContentCssCors:f=>{e.contentCssCors=f}}},Hg=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const r=Oe(e).dom;return k.from(t.get(r)).getOrThunk(()=>{const o=Ug(r,n);return t.set(r,o),o})}}})(),qg=(t,e)=>lt(t)&&(Pg(e,t)||e.isInline(t.nodeName.toLowerCase())),$g=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Nu=(t,e,n,r)=>{var o;const s=r||e;if(Et(e)&&$g(e))return e;const a=e.childNodes;for(let i=a.length-1;i>=0;i--)Nu(t,a[i],n,s);if(Et(e)){const i=e.childNodes;1===i.length&&$g(i[0])&&(null===(o=e.parentNode)||void 0===o||o.insertBefore(i[0],e))}return bu(i=e)||Ui(i)||Pg(n,e)||(i=>!!Et(i)&&i.childNodes.length>0)(e)||((i,l,c)=>st(i)&&i.data.length>0&&((u,f,p)=>{const b=new pn(u,f).prev(!1),h=new pn(u,f).next(!1),v=Ie(b)||qg(b,p),g=Ie(h)||qg(h,p);return v&&g})(i,l,c))(e,s,n)||t.remove(e),e;var i},jE=it.makeMap,hc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zE=/[<>&\"\']/g,UE=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,HE={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},aa={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},qE={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Wg=(t,e)=>{const n={};if(t){const r=t.split(",");e=e||10;for(let o=0;o<r.length;o+=2){const s=String.fromCharCode(parseInt(r[o],e));if(!aa[s]){const a="&"+r[o+1]+";";n[s]=a,n[a]=s}}return n}},Au=Wg("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Vg=(t,e)=>t.replace(e?hc:bc,n=>aa[n]||n),Kg=(t,e)=>t.replace(e?hc:bc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":aa[n]||"&#"+n.charCodeAt(0)+";"),Tu=(t,e,n)=>{const r=n||Au;return t.replace(e?hc:bc,o=>aa[o]||r[o]||o)},ws={encodeRaw:Vg,encodeAllRaw:t=>(""+t).replace(zE,e=>aa[e]||e),encodeNumeric:Kg,encodeNamed:Tu,getEncodeFunc:(t,e)=>{const n=Wg(e)||Au,r=jE(t.replace(/\+/g,","));return r.named&&r.numeric?(o,s)=>o.replace(s?hc:bc,a=>void 0!==aa[a]?aa[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):r.named?e?(o,s)=>Tu(o,s,n):Tu:r.numeric?Kg:Vg},decode:t=>t.replace(UE,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):HE[n]||String.fromCharCode(n):qE[e]||Au[e]||(r=>{const o=Dt("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(e))},_n=(t,e)=>(t=it.trim(t))?t.split(e||" "):[],Xg=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),Yg=t=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==t?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate"]:[],..."html5-strict"!==t?["xml:lang"]:[]]),Gg=t=>{let e,n;e="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(e+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==t&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),e=[e,"center dir isindex noframes"].join(" "));const r=[e,n].join(" ");return{blockContent:e,phrasingContent:n,flowContent:r}},Ru=t=>{const{blockContent:e,phrasingContent:n,flowContent:r}=Gg(t),o=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:o(e),phrasingContent:o(n),flowContent:o(r)})},$E={html4:qr(()=>Ru("html4")),html5:qr(()=>Ru("html5")),"html5-strict":qr(()=>Ru("html5-strict"))},Qg=(t,e)=>{const{blockContent:n,phrasingContent:r,flowContent:o}=$E[t]();return"blocks"===e?k.some(n):"phrasing"===e?k.some(r):"flow"===e?k.some(o):k.none()},Ou=t=>k.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(t)).map(e=>({preset:"@"===e[1],name:e[2]})),vc={},Hi=it.makeMap,co=it.each,Zg=it.extend,Jg=it.explode,th=(t,e={})=>{const n=Hi(t," ",Hi(t.toUpperCase()," "));return Zg(n,e)},eh=t=>th("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Du=(t,e)=>{if(t){const n={};return Nt(t)&&(t={"*":t}),co(t,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===e?Hi(r,/[, ]/):Jg(r,/[, ]/)}),n}},Ss=(t={})=>{var e;const n={},r={};let o=[];const s={},a={},i=(vt,Zt,ce)=>{const Jt=t[vt];if(Jt)return Hi(Jt,/[, ]/,Hi(Jt.toUpperCase(),/[, ]/));{let ve=vc[vt];return ve||(ve=th(Zt,ce),vc[vt]=ve),ve}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(vt=>{const Zt=Yg(vt),{phrasingContent:ce,flowContent:Jt}=Gg(vt),ve={},Be=(Ce,Pe,on)=>{ve[Ce]={attributes:On(Pe,ft({})),attributesOrder:Pe,children:On(on,ft({}))}},pt=(Ce,Pe="",on="")=>{const or=_n(on),Gr=_n(Ce);let jn=Gr.length;const dr=[...Zt,..._n(Pe)];for(;jn--;)Be(Gr[jn],dr.slice(),or)},Lt=(Ce,Pe)=>{const on=_n(Ce),or=_n(Pe);let Gr=on.length;for(;Gr--;){const jn=ve[on[Gr]];for(let dr=0,sn=or.length;dr<sn;dr++)jn.attributes[or[dr]]={},jn.attributesOrder.push(or[dr])}};return"html5-strict"!==vt&&(Q(_n("acronym applet basefont big font strike tt"),Ce=>{pt(Ce,"",ce)}),Q(_n("center dir isindex noframes"),Ce=>{pt(Ce,"",Jt)})),pt("html","manifest","head body"),pt("head","","base command link meta noscript script style title"),pt("title hr noscript br"),pt("base","href target"),pt("link","href rel media hreflang type sizes hreflang"),pt("meta","name http-equiv content charset"),pt("style","media type scoped"),pt("script","src async defer type charset"),pt("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Jt),pt("dd div","",Jt),pt("address dt caption","","html4"===vt?ce:Jt),pt("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",ce),pt("blockquote","cite",Jt),pt("ol","reversed start type","li"),pt("ul","","li"),pt("li","value",Jt),pt("dl","","dt dd"),pt("a","href target rel media hreflang type","html4"===vt?ce:Jt),pt("q","cite",ce),pt("ins del","cite datetime",Jt),pt("img","src sizes srcset alt usemap ismap width height"),pt("iframe","src name width height",Jt),pt("embed","src type width height"),pt("object","data type typemustmatch name usemap form width height",[Jt,"param"].join(" ")),pt("param","name value"),pt("map","name",[Jt,"area"].join(" ")),pt("area","alt coords shape href target rel media hreflang type"),pt("table","border","caption colgroup thead tfoot tbody tr"+("html4"===vt?" col":"")),pt("colgroup","span","col"),pt("col","span"),pt("tbody thead tfoot","","tr"),pt("tr","","td th"),pt("td","colspan rowspan headers",Jt),pt("th","colspan rowspan headers scope abbr",Jt),pt("form","accept-charset action autocomplete enctype method name novalidate target",Jt),pt("fieldset","disabled form name",[Jt,"legend"].join(" ")),pt("label","form for",ce),pt("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),pt("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===vt?Jt:ce),pt("select","disabled form multiple name required size","option optgroup"),pt("optgroup","disabled label","option"),pt("option","disabled label selected value"),pt("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),pt("menu","type label",[Jt,"li"].join(" ")),pt("noscript","",Jt),"html4"!==vt&&(pt("wbr"),pt("ruby","",[ce,"rt rp"].join(" ")),pt("figcaption","",Jt),pt("mark rt rp bdi","",ce),pt("summary","",[ce,"h1 h2 h3 h4 h5 h6"].join(" ")),pt("canvas","width height",Jt),pt("data","value",ce),pt("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Jt,"track source"].join(" ")),pt("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Jt,"track source"].join(" ")),pt("picture","","img source"),pt("source","src srcset type media sizes"),pt("track","kind src srclang label default"),pt("datalist","",[ce,"option"].join(" ")),pt("article section nav aside main header footer","",Jt),pt("hgroup","","h1 h2 h3 h4 h5 h6"),pt("figure","",[Jt,"figcaption"].join(" ")),pt("time","datetime",ce),pt("dialog","open",Jt),pt("command","type label icon disabled checked radiogroup command"),pt("output","for form name",ce),pt("progress","value max",ce),pt("meter","value min max low high optimum",ce),pt("details","open",[Jt,"summary"].join(" ")),pt("keygen","autofocus challenge disabled form keytype name"),Be("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==vt&&(Lt("script","language xml:space"),Lt("style","xml:space"),Lt("object","declare classid code codebase codetype archive standby align border hspace vspace"),Lt("embed","align name hspace vspace"),Lt("param","valuetype type"),Lt("a","charset name rev shape coords"),Lt("br","clear"),Lt("applet","codebase archive code object alt name width height align hspace vspace"),Lt("img","name longdesc align border hspace vspace"),Lt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Lt("font basefont","size color face"),Lt("input","usemap align"),Lt("select"),Lt("textarea"),Lt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Lt("ul","type compact"),Lt("li","type"),Lt("ol dl menu dir","compact"),Lt("pre","width xml:space"),Lt("hr","align noshade size width"),Lt("isindex","prompt"),Lt("table","summary width frame rules cellspacing cellpadding align bgcolor"),Lt("col","width align char charoff valign"),Lt("colgroup","width align char charoff valign"),Lt("thead","align char charoff valign"),Lt("tr","align char charoff valign bgcolor"),Lt("th","axis align char charoff valign nowrap bgcolor width height"),Lt("form","accept"),Lt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Lt("tfoot","align char charoff valign"),Lt("tbody","align char charoff valign"),Lt("area","nohref"),Lt("body","background bgcolor text link vlink alink")),"html4"!==vt&&(Lt("input button select textarea","autofocus"),Lt("input textarea","placeholder"),Lt("a","download"),Lt("link script img","crossorigin"),Lt("img","loading"),Lt("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==vt&&Q([ve.video,ve.audio],Ce=>{delete Ce.children.audio,delete Ce.children.video}),Q(_n("a form meter progress dfn"),Ce=>{ve[Ce]&&delete ve[Ce].children[Ce]}),delete ve.caption.children.table,delete ve.script,ve})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const u=Du(t.valid_styles),f=Du(t.invalid_styles,"map"),p=Du(t.valid_classes,"map"),b=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),h=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),C="td th iframe video audio object script code",S=i("non_empty_elements",C+" pre svg textarea summary",v),E=i("move_caret_before_on_enter_elements",C+" table",v),N="h1 h2 h3 h4 h5 h6",A=i("text_block_elements",N+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),R=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",A),L=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),P=i("transparent_elements","a ins del canvas map"),j=i("wrap_block_elements","pre "+N);co("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),vt=>{a[vt]=new RegExp("</"+vt+"[^>]*>","gi")});const $=vt=>{const Zt=k.from(n["@"]),ce=/[*?+]/;Q(((Jt,ve)=>{const Be=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Qe(_n(ve,","),pt=>{const Lt=Be.exec(pt);if(Lt){const Ce=Lt[1],Pe=Lt[2],on=Lt[3],or=Lt[4],Gr=Lt[5],jn={attributes:{},attributesOrder:[]};if(Jt.each(dr=>{return Cr=jn,we((sn=dr).attributes,(qo,ls)=>{Cr.attributes[ls]=qo}),void Cr.attributesOrder.push(...sn.attributesOrder);var sn,Cr}),"#"===Ce?jn.paddEmpty=!0:"-"===Ce&&(jn.removeEmpty=!0),"!"===or&&(jn.removeEmptyAttrs=!0),Gr&&((dr,sn)=>{const Cr=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,qo=/[*?+]/,{attributes:ls,attributesOrder:Da}=sn;Q(_n(dr,"|"),xg=>{const Qr=Cr.exec(xg);if(Qr){const Fs={},yn=Qr[1],Yn=Qr[2].replace(/[\\:]:/g,":"),wi=Qr[3],js=Qr[4];if("!"===yn&&(sn.attributesRequired=sn.attributesRequired||[],sn.attributesRequired.push(Yn),Fs.required=!0),"-"===yn)return delete ls[Yn],void Da.splice(it.inArray(Da,Yn),1);if(wi&&("="===wi?(sn.attributesDefault=sn.attributesDefault||[],sn.attributesDefault.push({name:Yn,value:js}),Fs.defaultValue=js):"~"===wi?(sn.attributesForced=sn.attributesForced||[],sn.attributesForced.push({name:Yn,value:js}),Fs.forcedValue=js):"<"===wi&&(Fs.validValues=it.makeMap(js,"?"))),qo.test(Yn)){const Si=Fs;sn.attributePatterns=sn.attributePatterns||[],Si.pattern=Xg(Yn),sn.attributePatterns.push(Si)}else ls[Yn]||Da.push(Yn),ls[Yn]=Fs}})})(Gr,jn),on&&(jn.outputName=Pe),"@"===Pe){if(!Jt.isNone())return[];Jt=k.some(jn)}return[on?{name:Pe,element:jn,aliasName:on}:{name:Pe,element:jn}]}return[]})})(Zt,vt??""),({name:Jt,element:ve,aliasName:Be})=>{if(Be&&(n[Be]=ve),ce.test(Jt)){const pt=ve;pt.pattern=Xg(Jt),o.push(pt)}else n[Jt]=ve})},B=vt=>{o=[],Q(an(n),Zt=>{delete n[Zt]}),$(vt)},I=(vt,Zt)=>{var ce,Jt;delete vc.text_block_elements,delete vc.block_elements;const ve=!!Zt.extends&&!ke(Zt.extends),Be=Zt.extends;if(r[vt]=Be?r[Be]:{},s[vt]=Be??vt,S[vt.toUpperCase()]={},S[vt]={},ve||(R[vt.toUpperCase()]={},R[vt]={}),Be&&!n[vt]&&n[Be]){const pt=(Lt=>{const Ce=Pe=>{return at(Pe)?re(Pe,Ce):Xt(on=Pe)&&on.source&&"[object RegExp]"===Object.prototype.toString.call(on)?new RegExp(Pe.source,Pe.flags):Xt(Pe)?ds(Pe,Ce):Pe;var on};return Ce(Lt)})(n[Be]);delete pt.removeEmptyAttrs,delete pt.removeEmpty,n[vt]=pt}else n[vt]={attributesOrder:[],attributes:{}};if(at(Zt.attributes)){const pt=Ce=>{Lt.attributesOrder.push(Ce),Lt.attributes[Ce]={}},Lt=null!==(ce=n[vt])&&void 0!==ce?ce:{};delete Lt.attributesDefault,delete Lt.attributesForced,delete Lt.attributePatterns,delete Lt.attributesRequired,Lt.attributesOrder=[],Lt.attributes={},Q(Zt.attributes,Ce=>{const Pe=Yg(l);Ou(Ce).each(({preset:on,name:or})=>{on?"global"===or&&Q(Pe,pt):pt(or)})}),n[vt]=Lt}if(Tn(Zt.padEmpty)){const pt=null!==(Jt=n[vt])&&void 0!==Jt?Jt:{};pt.paddEmpty=Zt.padEmpty,n[vt]=pt}if(at(Zt.children)){const pt={},Lt=Pe=>{pt[Pe]={}},Ce=Pe=>{Qg(l,Pe).each(on=>{Q(on,Lt)})};Q(Zt.children,Pe=>{Ou(Pe).each(({preset:on,name:or})=>{on?Ce(or):Lt(or)})}),r[vt]=pt}Be&&we(r,(pt,Lt)=>{pt[Be]&&(r[Lt]=pt=Zg({},r[Lt]),pt[vt]=pt[Be])})},U=vt=>{Xt(vt)?we(vt,(Zt,ce)=>I(ce,Zt)):Nt(vt)&&Q((ce=>{const Jt=/^(~)?(.+)$/;return Qe(_n(ce,","),ve=>{const Be=Jt.exec(ve);return Be?[{cloneName:"~"===Be[1]?"span":"div",name:Be[2]}]:[]})})(vt??""),({name:ce,cloneName:Jt})=>{I(ce,{extends:Jt})})},G=vt=>{Q((Zt=>{const ce=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Qe(_n(Zt,","),Jt=>{const ve=ce.exec(Jt);if(ve){const Be=ve[1];return[{operation:Be?(Lt=>"-"===Lt?"remove":"add")(Be):"replace",name:ve[2],validChildren:Qe(_n(ve[3],"|"),Lt=>Ou(Lt).toArray())}]}return[]})})(vt??""),({operation:Zt,name:ce,validChildren:Jt})=>{const ve="replace"===Zt?{"#comment":{}}:r[ce],Be=pt=>{"remove"===Zt?delete ve[pt]:ve[pt]={}};Q(Jt,({preset:pt,name:Lt})=>{pt?Qg(l,Lt).each(Pe=>{Q(Pe,Be)}):Be(Lt)}),r[ce]=ve})},ct=vt=>{const Zt=n[vt];if(Zt)return Zt;let ce=o.length;for(;ce--;){const Jt=o[ce];if(Jt.pattern.test(vt))return Jt}},rt=ft(u),wt=ft(f),Tt=ft(p),Pt=ft(g),Ot=ft(R),gt=ft(A),_t=ft(L),F=ft(Object.seal(v)),z=ft(h),X=ft(S),Z=ft(E),ht=ft(b),mt=ft(P),zt=ft(j),Gt=ft(Object.seal(a)),ne=(vt,Zt)=>{const ce=ct(vt);if(ce){if(!Zt)return!0;{if(ce.attributes[Zt])return!0;const Jt=ce.attributePatterns;if(Jt){let ve=Jt.length;for(;ve--;)if(Jt[ve].pattern.test(Zt))return!0}}}return!1},ke=vt=>jt(Ot(),vt),ze=vt=>!Ve(vt,"#")&&ne(vt)&&!ke(vt),yr=ft(s);return t.valid_elements?(B(t.valid_elements),co(c,(vt,Zt)=>{r[Zt]=vt.children})):(co(c,(vt,Zt)=>{n[Zt]={attributes:vt.attributes,attributesOrder:vt.attributesOrder},r[Zt]=vt.children}),co(_n("strong/b em/i"),vt=>{const Zt=_n(vt,"/");n[Zt[1]].outputName=Zt[0]}),co(L,(vt,Zt)=>{n[Zt]&&(t.padd_empty_block_inline_children&&(n[Zt].paddInEmptyBlock=!0),n[Zt].removeEmpty=!0)}),co(_n("ol ul blockquote a table tbody"),vt=>{n[vt]&&(n[vt].removeEmpty=!0)}),co(_n("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),vt=>{n[vt]&&(n[vt].paddEmpty=!0)}),co(_n("span"),vt=>{n[vt].removeEmptyAttrs=!0})),delete n.svg,U(t.custom_elements),G(t.valid_children),$(t.extended_valid_elements),G("+ol[ul|ol],+ul[ul|ol]"),co({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(vt,Zt)=>{n[Zt]&&(n[Zt].parentsRequired=_n(vt))}),t.invalid_elements&&co(Jg(t.invalid_elements),vt=>{n[vt]&&delete n[vt]}),ct("span")||$("span[!data-mce-type|*]"),{type:l,children:r,elements:n,getValidStyles:rt,getValidClasses:Tt,getBlockElements:Ot,getInvalidStyles:wt,getVoidElements:F,getTextBlockElements:gt,getTextInlineElements:_t,getBoolAttrs:Pt,getElementRule:ct,getSelfClosingElements:z,getNonEmptyElements:X,getMoveCaretBeforeOnEnterElements:Z,getWhitespaceElements:ht,getTransparentElements:mt,getSpecialElements:Gt,isValidChild:(vt,Zt)=>{const ce=r[vt.toLowerCase()];return!(!ce||!ce[Zt.toLowerCase()])},isValid:ne,isBlock:ke,isInline:ze,isWrapper:vt=>jt(zt(),vt)||ze(vt),getCustomElements:yr,addValidElements:$,setValidElements:B,addCustomElements:U,addValidChildren:G}},Bu=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},WE=t=>{return{value:(n=Bu(t.red)+Bu(t.green)+Bu(t.blue),Ko(n,"#").toUpperCase())};var n},VE=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,KE=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,nh=(t,e,n,r)=>({red:t,green:e,blue:n,alpha:r}),rh=(t,e,n,r)=>{const o=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(r);return nh(o,s,a,i)},oh=t=>{if("transparent"===t)return k.some(nh(0,0,0,0));const e=VE.exec(t);if(null!==e)return k.some(rh(e[1],e[2],e[3],"1"));const n=KE.exec(t);return null!==n?k.some(rh(n[1],n[2],n[3],n[4])):k.none()},XE=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,qi=t=>oh(t).map(WE).map(e=>"#"+e.value).getOr(t),Pu=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,s=/rgba *\(/i,a={};let i,l;e&&(i=e.getValidStyles(),l=e.getInvalidStyles());const u="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let p=0;p<u.length;p++)a[u[p]]="\ufeff"+p,a["\ufeff"+p]=u[p];const f={parse:p=>{const b={};let h=!1;const v=t.url_converter,g=t.url_converter_scope||f,C=(B,I,U)=>{const G=b[B+"-top"+I];if(!G)return;const ct=b[B+"-right"+I];if(!ct)return;const rt=b[B+"-bottom"+I];if(!rt)return;const wt=b[B+"-left"+I];if(!wt)return;const Tt=[G,ct,rt,wt];let Pt=Tt.length-1;for(;Pt--&&Tt[Pt]===Tt[Pt+1];);Pt>-1&&U||(b[B+I]=-1===Pt?Tt[0]:Tt.join(" "),delete b[B+"-top"+I],delete b[B+"-right"+I],delete b[B+"-bottom"+I],delete b[B+"-left"+I])},S=B=>{const I=b[B];if(!I)return;const U=I.indexOf(",")>-1?[I]:I.split(" ");let G=U.length;for(;G--;)if(U[G]!==U[0])return!1;return b[B]=U[0],!0},E=B=>(h=!0,a[B]),N=(B,I)=>(h&&(B=B.replace(/\uFEFF[0-9]/g,U=>a[U])),I||(B=B.replace(/\\([\'\";:])/g,"$1")),B),A=B=>String.fromCharCode(parseInt(B.slice(1),16)),R=B=>B.replace(/\\[0-9a-f]+/gi,A),L=(B,I,U,G,ct,rt)=>{if(ct=ct||rt)return"'"+(ct=N(ct)).replace(/\'/g,"\\'")+"'";if(I=N(I||U||G||""),!t.allow_script_urls){const wt=I.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(wt)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(wt))return""}return v&&(I=v.call(g,I,"style")),"url('"+I.replace(/\'/g,"\\'")+"')"};if(p){let B;for(p=(p=p.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,E).replace(/\"[^\"]+\"|\'[^\']+\'/g,I=>I.replace(/[;:]/g,E));B=r.exec(p);){r.lastIndex=B.index+B[0].length;let I=B[1].replace(o,"").toLowerCase(),U=B[2].replace(o,"");if(I&&U){if(I=R(I),U=R(U),-1!==I.indexOf("\ufeff")||-1!==I.indexOf('"')||!t.allow_script_urls&&("behavior"===I||/expression\s*\(|\/\*|\*\//.test(U)))continue;"font-weight"===I&&"700"===U?U="bold":"color"!==I&&"background-color"!==I||(U=U.toLowerCase()),s.test(U)||oh(U).each(G=>{U=qi(XE(G)).toLowerCase()}),U=U.replace(n,L),b[I]=h?N(U,!0):U}}C("border","",!0),C("border","-width"),C("border","-color"),C("border","-style"),C("padding",""),C("margin",""),j="border-style",$="border-color",S(P="border-width")&&S(j)&&S($)&&(b.border=b[P]+" "+b[j]+" "+b[$],delete b[P],delete b[j],delete b[$]),"medium none"===b.border&&delete b.border,"none"===b["border-image"]&&delete b["border-image"]}var P,j,$;return b},serialize:(p,b)=>{let h="";const v=(g,C)=>{const S=C[g];if(S)for(let E=0,N=S.length;E<N;E++){const A=S[E],R=p[A];R&&(h+=(h.length>0?" ":"")+A+": "+R+";")}};return b&&i?(v("*",i),v(b,i)):we(p,(g,C)=>{g&&((S,E)=>{if(!l||!E)return!0;let N=l["*"];return!(N&&N[S]||(N=l[E],N&&N[S]))})(C,b)&&(h+=(h.length>0?" ":"")+C+": "+g+";")}),h}};return f},YE={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},sh=(t,e)=>{const n=e??{};for(const r in t)jt(YE,r)||(n[r]=t[r]);return lt(t.composedPath)&&(n.composedPath=()=>t.composedPath()),lt(t.getModifierState)&&(n.getModifierState=r=>t.getModifierState(r)),lt(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},Lu=(t,e,n,r)=>{var o;const s=sh(e,r);return s.type=t,Se(s.target)&&(s.target=null!==(o=s.srcElement)&&void 0!==o?o:n),(Se((a=e).preventDefault)||(i=a)instanceof Event||he(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=je,he(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=je,he(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=je,s.stopPropagation()},(a=>a.isDefaultPrevented===je||a.isDefaultPrevented===xe)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?je:xe,s.isPropagationStopped=!0===s.cancelBubble?je:xe,s.isImmediatePropagationStopped=xe)),s;var a,i},GE=/^(?:mouse|contextmenu)|click/,Mu=(t,e,n,r)=>{t.addEventListener(e,n,r||!1)},yc=(t,e,n,r)=>{t.removeEventListener(e,n,r||!1)},$i=(t,e)=>{const n=Lu(t.type,t,document,e);if(lt(r=t)&&GE.test(r.type)&&Ie(t.pageX)&&!Ie(t.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,s=r.body,a=n;a.pageX=t.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}var r;return n},QE=(t,e,n)=>{const r=t.document,o={type:"ready"};if(n.domLoaded)return void e(o);const s=()=>{yc(t,"DOMContentLoaded",s),yc(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(o)),t=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?s():Mu(t,"DOMContentLoaded",s),n.domLoaded||Mu(t,"load",s)};class ia{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,r,o){const s=this;let a;const i=window,l=p=>{s.executeHandlers($i(p||i.event),c)};if(!e||st(e)||xs(e))return r;let c;e[s.expando]?c=e[s.expando]:(c=s.count++,e[s.expando]=c,s.events[c]={}),o=o||e;const u=n.split(" ");let f=u.length;for(;f--;){let p=u[f],b=l,h=!1,v=!1;"DOMContentLoaded"===p&&(p="ready"),s.domLoaded&&"ready"===p&&"complete"===e.readyState?r.call(o,$i({type:p})):(s.hasFocusIn||"focusin"!==p&&"focusout"!==p||(h=!0,v="focusin"===p?"focus":"blur",b=g=>{const C=$i(g||i.event);C.type="focus"===C.type?"focusin":"focusout",s.executeHandlers(C,c)}),a=s.events[c][p],a?"ready"===p&&s.domLoaded?r($i({type:p})):a.push({func:r,scope:o}):(s.events[c][p]=a=[{func:r,scope:o}],a.fakeName=v,a.capture=h,a.nativeHandler=b,"ready"===p?QE(e,b,s):Mu(e,v||p,b,h)))}return e=a=null,r}unbind(e,n,r){if(!e||st(e)||xs(e))return this;const o=e[this.expando];if(o){let s=this.events[o];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(r){let u=c.length;for(;u--;)if(c[u].func===r){const f=c.nativeHandler,p=c.fakeName,b=c.capture,h=c.slice(0,u).concat(c.slice(u+1));h.nativeHandler=f,h.fakeName=p,h.capture=b,s[l]=h}}r&&0!==c.length||(delete s[l],yc(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else we(s,(a,i)=>{yc(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(jt(s,a))return this;delete this.events[o];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,r){return this.dispatch(e,n,r)}dispatch(e,n,r){if(!e||st(e)||xs(e))return this;const o=$i({type:n,target:e},r);do{const s=e[this.expando];s&&this.executeHandlers(o,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}clean(e){if(!e||st(e)||xs(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let r=n.length;for(;r--;)(e=n[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const r=this.events[n],o=r&&r[e.type];if(o)for(let s=0,a=o.length;s<a;s++){const i=o[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}ia.Event=new ia;const Iu=it.each,ZE=it.grep,Fu="data-mce-style",JE=it.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Wi=(t,e,n)=>{Se(n)||""===n?m(t,e):Ze(t,e,n)},ah=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),$a=(t,e)=>{let n=0;if(t)for(let r=t.nodeType,o=t.previousSibling;o;o=o.previousSibling){const s=o.nodeType;(!e||!st(o)||s!==r&&o.data.length)&&(n++,r=s)}return n},ih=(t,e)=>{const n=tr(e,"style"),r=t.serialize(t.parse(n),fe(e));Wi(e,Fu,r)},lh=(t,e,n)=>{const r=ah(e);var o,s;Se(n)||""===n?Ht(t,r):M(t,r,(s=r,x(o=n)?jt(JE,s)?o+"":o+"px":o))},De=(t,e={})=>{const n={},r=window,o={};let s=0;const a=Hg.forElement(D(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:Ss({}),c=Pu({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),u=e.ownEvents?new ia:ia.Event,f=l.getBlockElements(),p=F=>F&&t&&Nt(F)?t.getElementById(F):F,b=F=>{const z=p(F);return lt(z)?D(z):null},h=(F,z,X="")=>{let Z;const ht=b(F);if(lt(ht)&&Un(ht)){const mt=_t[z];Z=mt&&mt.get?mt.get(ht.dom,z):tr(ht,z)}return lt(Z)?Z:X},v=F=>{const z=p(F);return Se(z)?[]:z.attributes},g=(F,z,X)=>{P(F,Z=>{if(Et(Z)){const ht=D(Z),mt=""===X?null:X,zt=tr(ht,z),Gt=_t[z];Gt&&Gt.set?Gt.set(ht.dom,mt,z):Wi(ht,z,mt),zt!==mt&&e.onSetAttrib&&e.onSetAttrib({attrElm:ht.dom,attrName:z,attrValue:mt})}})},C=()=>e.root_element||t.body,S=(F,z)=>((X,Z,ht)=>{let mt=0,zt=0;const Gt=X.ownerDocument;if(ht=ht||X,Z){if(ht===X&&Z.getBoundingClientRect&&"static"===tt(D(X),"position")){const ke=Z.getBoundingClientRect();return mt=ke.left+(Gt.documentElement.scrollLeft||X.scrollLeft)-Gt.documentElement.clientLeft,zt=ke.top+(Gt.documentElement.scrollTop||X.scrollTop)-Gt.documentElement.clientTop,{x:mt,y:zt}}let ne=Z;for(;ne&&ne!==ht&&ne.nodeType&&!zg(ne,ht);)mt+=ne.offsetLeft||0,zt+=ne.offsetTop||0,ne=ne.offsetParent;for(ne=Z.parentNode;ne&&ne!==ht&&ne.nodeType&&!zg(ne,ht);)mt-=ne.scrollLeft||0,zt-=ne.scrollTop||0,ne=ne.parentNode;zt+=(ke=D(Z),FE.isFirefox()&&"table"===fe(ke)?jg(Ee(ke)).filter(ze=>"caption"===fe(ze)).bind(ze=>jg(ir(ze)).map(yr=>yr.dom.offsetTop<=ze.dom.offsetTop?-ze.dom.offsetHeight:0)).getOr(0):0)}var ke;return{x:mt,y:zt}})(t.body,p(F),z),E=(F,z,X)=>{const Z=p(F);var ht;if(!Se(Z)&&(es(Z)||Et(ht=Z)&&"http://www.w3.org/2000/svg"===ht.namespaceURI))return X?tt(D(Z),ah(z)):("float"===(z=z.replace(/-(\D)/g,(mt,zt)=>zt.toUpperCase()))&&(z="cssFloat"),Z.style?Z.style[z]:void 0)},N=F=>{const z=p(F);if(!z)return{w:0,h:0};let X=E(z,"width"),Z=E(z,"height");return X&&-1!==X.indexOf("px")||(X="0"),Z&&-1!==Z.indexOf("px")||(Z="0"),{w:parseInt(X,10)||z.offsetWidth||z.clientWidth,h:parseInt(Z,10)||z.offsetHeight||z.clientHeight}},A=(F,z)=>{if(!F)return!1;const X=at(F)?F:[F];return Te(X,Z=>ln(D(Z),z))},R=(F,z,X,Z)=>{const ht=[];let mt=p(F);Z=void 0===Z;const zt=X||("BODY"!==C().nodeName?C().parentNode:null);if(Nt(z))if("*"===z)z=Et;else{const Gt=z;z=ne=>A(ne,Gt)}for(;mt&&!(mt===zt||Se(mt.nodeType)||Ui(mt)||bu(mt));){if(!z||z(mt)){if(!Z)return[mt];ht.push(mt)}mt=mt.parentNode}return Z?ht:null},L=(F,z,X)=>{let Z=z;if(F){Nt(z)&&(Z=ht=>A(ht,z));for(let ht=F[X];ht;ht=ht[X])if(he(Z)&&Z(ht))return ht}return null},P=function(F,z,X){const Z=X??this;if(at(F)){const ht=[];return Iu(F,(mt,zt)=>{const Gt=p(mt);Gt&&ht.push(z.call(Z,Gt,zt))}),ht}{const ht=p(F);return!!ht&&z.call(Z,ht)}},j=(F,z)=>{P(F,X=>{we(z,(Z,ht)=>{g(X,ht,Z)})})},$=(F,z)=>{P(F,X=>{const Z=D(X);Bn(Z,z)})},B=(F,z,X,Z,ht)=>P(F,mt=>{const zt=Nt(z)?t.createElement(z):z;return lt(X)&&j(zt,X),Z&&(!Nt(Z)&&Z.nodeType?zt.appendChild(Z):Nt(Z)&&$(zt,Z)),ht?zt:mt.appendChild(zt)}),I=(F,z,X)=>B(t.createElement(F),F,z,X,!0),U=ws.encodeAllRaw,G=(F,z)=>P(F,X=>{const Z=D(X);return z&&Q(Ee(Z),ht=>{Hn(ht)&&0===ht.dom.length?ue(ht):Ft(Z,ht)}),ue(Z),Z.dom}),ct=(F,z,X)=>{P(F,Z=>{if(Et(Z)){const ht=D(Z),mt=z.split(" ");Q(mt,zt=>{var Gt,ne,ze,yr;lt(X)?(X?H:et)(ht,zt):(ne=zt,_(Gt=ht)?Gt.dom.classList.toggle(ne):(yr=ne,At(T(ze=Gt),yr)?q(ze,yr):O(ze,yr)),K(Gt))})}})},rt=(F,z,X)=>P(z,Z=>{var ht;const mt=at(z)?F.cloneNode(!0):F;return X&&Iu(ZE(Z.childNodes),zt=>{mt.appendChild(zt)}),null===(ht=Z.parentNode)||void 0===ht||ht.replaceChild(mt,Z),Z}),wt=()=>t.createRange(),Tt=(F,z,X,Z)=>{if(at(F)){let ht=F.length;const mt=[];for(;ht--;)mt[ht]=Tt(F[ht],z,X,Z);return mt}return!e.collect||F!==t&&F!==r||i.push([F,z,X,Z]),u.bind(F,z,X,Z||gt)},Pt=(F,z,X)=>{if(at(F)){let Z=F.length;const ht=[];for(;Z--;)ht[Z]=Pt(F[Z],z,X);return ht}if(i.length>0&&(F===t||F===r)){let Z=i.length;for(;Z--;){const[ht,mt,zt]=i[Z];F!==ht||z&&z!==mt||X&&X!==zt||u.unbind(ht,mt,zt)}}return u.unbind(F,z,X)},Ot=F=>{if(F&&es(F)){const z=F.getAttribute("data-mce-contenteditable");return z&&"inherit"!==z?z:"inherit"!==F.contentEditable?F.contentEditable:null}return null},gt={doc:t,settings:e,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:u,isBlock:F=>Nt(F)?jt(f,F):Et(F)&&(jt(f,F.nodeName)||sa(l,F)),root:null,clone:(F,z)=>F.cloneNode(z),getRoot:C,getViewPort:F=>{const z=kg(F);return{x:z.x,y:z.y,w:z.width,h:z.height}},getRect:F=>{const z=p(F),X=S(z),Z=N(z);return{x:X.x,y:X.y,w:Z.w,h:Z.h}},getSize:N,getParent:(F,z,X)=>{const Z=R(F,z,X,!1);return Z&&Z.length>0?Z[0]:null},getParents:R,get:p,getNext:(F,z)=>L(F,z,"nextSibling"),getPrev:(F,z)=>L(F,z,"previousSibling"),select:(F,z)=>{var X,Z;const ht=null!==(Z=null!==(X=p(z))&&void 0!==X?X:e.root_element)&&void 0!==Z?Z:t;return he(ht.querySelectorAll)?xn(ht.querySelectorAll(F)):[]},is:A,add:B,create:I,createHTML:(F,z,X="")=>{let Z="<"+F;for(const ht in z)un(z,ht)&&(Z+=" "+ht+'="'+U(z[ht])+'"');return ps(X)&&jt(l.getVoidElements(),F)?Z+" />":Z+">"+X+"</"+F+">"},createFragment:F=>{const z=t.createElement("div"),X=t.createDocumentFragment();let Z;for(X.appendChild(z),F&&(z.innerHTML=F);Z=z.firstChild;)X.appendChild(Z);return X.removeChild(z),X},remove:G,setStyle:(F,z,X)=>{P(F,Z=>{const ht=D(Z);lh(ht,z,X),e.update_styles&&ih(c,ht)})},getStyle:E,setStyles:(F,z)=>{P(F,X=>{const Z=D(X);we(z,(ht,mt)=>{lh(Z,mt,ht)}),e.update_styles&&ih(c,Z)})},removeAllAttribs:F=>P(F,z=>{const X=z.attributes;for(let Z=X.length-1;Z>=0;Z--)z.removeAttributeNode(X.item(Z))}),setAttrib:g,setAttribs:j,getAttrib:h,getPos:S,parseStyle:F=>c.parse(F),serializeStyle:(F,z)=>c.serialize(F,z),addStyle:F=>{if(gt!==De.DOM&&t===document){if(n[F])return;n[F]=!0}let z=t.getElementById("mceDefaultStyles");if(!z){z=t.createElement("style"),z.id="mceDefaultStyles",z.type="text/css";const X=t.head;X.firstChild?X.insertBefore(z,X.firstChild):X.appendChild(z)}z.styleSheet?z.styleSheet.cssText+=F:z.appendChild(t.createTextNode(F))},loadCSS:F=>{F||(F=""),Q(F.split(","),z=>{o[z]=!0,a.load(z).catch(St)})},addClass:(F,z)=>{ct(F,z,!0)},removeClass:(F,z)=>{ct(F,z,!1)},hasClass:(F,z)=>{const X=b(F),Z=z.split(" ");return lt(X)&&fr(Z,ht=>ot(X,ht))},toggleClass:ct,show:F=>{P(F,z=>Ht(D(z),"display"))},hide:F=>{P(F,z=>M(D(z),"display","none"))},isHidden:F=>{const z=b(F);return lt(z)&&No(dt(z,"display"),"none")},uniqueId:F=>(F||"mce_")+s++,setHTML:$,getOuterHTML:F=>{const z=b(F);return lt(z)?Et(z.dom)?z.dom.outerHTML:(X=>{const Z=Dt("div"),ht=D(X.dom.cloneNode(!0));return Vt(Z,ht),Wn(Z)})(z):""},setOuterHTML:(F,z)=>{P(F,X=>{Et(X)&&(X.outerHTML=z)})},decode:ws.decode,encode:U,insertAfter:(F,z)=>{const X=p(z);return P(F,Z=>{const ht=X?.parentNode,mt=X?.nextSibling;return ht&&(mt?ht.insertBefore(Z,mt):ht.appendChild(Z)),Z})},replace:rt,rename:(F,z)=>{if(F.nodeName!==z.toUpperCase()){const X=I(z);return Iu(v(F),Z=>{g(X,Z.nodeName,h(F,Z.nodeName))}),rt(X,F,!0),X}return F},findCommonAncestor:(F,z)=>{let X=F;for(;X;){let Z=z;for(;Z&&X!==Z;)Z=Z.parentNode;if(X===Z)break;X=X.parentNode}return!X&&F.ownerDocument?F.ownerDocument.documentElement:X},run:P,getAttribs:v,isEmpty:(F,z,X)=>Mt(z)?ns(l,F,{...X,isContent:ht=>{const mt=ht.nodeName.toLowerCase();return!!z[mt]}}):ns(l,F,X),createRng:wt,nodeIndex:$a,split:(F,z,X)=>{let Z,ht,mt=wt();if(F&&z&&F.parentNode&&z.parentNode){const zt=F.parentNode;return mt.setStart(zt,$a(F)),mt.setEnd(z.parentNode,$a(z)),Z=mt.extractContents(),mt=wt(),mt.setStart(z.parentNode,$a(z)+1),mt.setEnd(zt,$a(F)+1),ht=mt.extractContents(),zt.insertBefore(Nu(gt,Z,l),F),zt.insertBefore(X||z,F),zt.insertBefore(Nu(gt,ht,l),F),G(F),X||z}},bind:Tt,unbind:Pt,fire:(F,z,X)=>u.dispatch(F,z,X),dispatch:(F,z,X)=>u.dispatch(F,z,X),getContentEditable:Ot,getContentEditableParent:F=>{const z=C();let X=null;for(let Z=F;Z&&Z!==z&&(X=Ot(Z),null===X);Z=Z.parentNode);return X},isEditable:F=>{if(lt(F)){const z=Et(F)?F:F.parentElement;return lt(z)&&es(z)&&io(D(z))}return!1},destroy:()=>{if(i.length>0){let F=i.length;for(;F--;){const[z,X,Z]=i[F];u.unbind(z,X,Z)}}we(o,(F,z)=>{a.unload(z),delete o[z]})},isChildOf:(F,z)=>F===z||z.contains(F),dumpRng:F=>"startContainer: "+F.startContainer.nodeName+", startOffset: "+F.startOffset+", endContainer: "+F.endContainer.nodeName+", endOffset: "+F.endOffset},_t=((F,z,X)=>{const Z=z.keep_values,mt={style:{set:(zt,Gt)=>{const ne=D(zt);Z&&Wi(ne,Fu,Gt),m(ne,"style"),Nt(Gt)&&W(ne,F.parse(Gt))},get:zt=>{const Gt=D(zt),ne=tr(Gt,Fu)||tr(Gt,"style");return F.serialize(F.parse(ne),fe(Gt))}}};return Z&&(mt.href=mt.src={set:(zt,Gt,ne)=>{const ke=D(zt);he(z.url_converter)&&lt(Gt)&&(Gt=z.url_converter.call(z.url_converter_scope||X(),String(Gt),ne,zt)),Wi(ke,"data-mce-"+ne,Gt),Wi(ke,ne,Gt)},get:(zt,Gt)=>{const ne=D(zt);return tr(ne,"data-mce-"+Gt)||tr(ne,Gt)}}),mt})(c,e,ft(gt));return gt};De.DOM=De(document),De.nodeIndex=$a;const tk=De.DOM;class rs{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,r)=>{const o=tk;let s;const a=()=>{o.remove(i),s&&(s.onerror=s.onload=s=null)},i=o.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=it._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:r,reject:o})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(l,c)=>{Re(n.scriptLoadedCallbacks,c).each(u=>{Q(u,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},o=l=>{const c=Kt(l,u=>"rejected"===u.status);return c.length>0?Promise.reject(Qe(c,({reason:u})=>at(u)?u:[u])):Promise.resolve()},s=l=>Promise.allSettled(re(l,c=>2===n.states[c]?(r("resolve",c),Promise.resolve()):3===n.states[c]?(r("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,r("resolve",c);const u=n.queue;return u.length>0?(n.queue=[],s(u).then(o)):Promise.resolve()},()=>(n.states[c]=3,r("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return k.from(u).each(Qn),o(c)})),i=La(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,c)})}):a(i)}}rs.ScriptLoader=new rs;const hn=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},Vi={},ju=hn("en"),ch=()=>Re(Vi,ju.get()),uo={getData:()=>ds(Vi,t=>({...t})),setCode:t=>{t&&ju.set(t)},getCode:()=>ju.get(),add:(t,e)=>{let n=Vi[t];n||(Vi[t]=n={});const r=re(an(e),o=>o.toLowerCase());we(e,(o,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const c=i.indexOf(l);return-1!==c&&i.indexOf(l,c+1)>c})(r,a)?(jt(e,a)||(n[a]=o),n[s]=o):n[a]=o})},translate:t=>{const e=ch().getOr({}),n=i=>he(i)?Object.prototype.toString.call(i):r(i)?"":""+i,r=i=>""===i||null==i,o=i=>{const l=n(i);return jt(e,l)?n(e[l]):Re(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(r(t))return"";if(Xt(a=t)&&jt(a,"raw"))return n(t.raw);var a,i;if(at(i=t)&&i.length>1){const i=t.slice(1);return s(o(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>jt(i,c)?n(i[c]):l))}return s(o(t))},isRtl:()=>ch().bind(t=>Re(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>jt(Vi,t)},Vn=()=>{const t=[],e={},n={},r=[],o=(l,c)=>{const u=Kt(r,f=>f.name===l&&f.state===c);Q(u,f=>f.resolve())},s=l=>jt(e,l),a=(l,c)=>{const u=uo.getCode();!u||c&&-1===(","+(c||"")+",").indexOf(","+u+",")||rs.ScriptLoader.add(e[l]+"/langs/"+u+".js")},i=(l,c="added")=>"added"===c&&jt(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(u=>{r.push({name:l,state:c,resolve:u})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==Vn.languageLoad&&(s(l)?a(l,c):i(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},o(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>Nt(c)?Nt(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let u=Nt(c)?c:c.prefix+c.resource+c.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=Vn.baseURL+"/"+u),e[l]=u.substring(0,u.lastIndexOf("/"));const f=()=>(o(l,"loaded"),Promise.resolve());return n[l]?f():rs.ScriptLoader.add(u).then(f)},waitFor:i}};Vn.languageLoad=!0,Vn.baseURL="",Vn.PluginManager=Vn(),Vn.ThemeManager=Vn(),Vn.ModelManager=Vn();const ek=t=>{const e=hn(k.none()),n=()=>e.get().each(r=>clearInterval(r));return{clear:()=>{n(),e.set(k.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:r=>{n(),e.set(k.some(setInterval(r,t)))}}},Es=()=>{const t=(e=>{const n=hn(k.none()),r=()=>n.get().each(e);return{clear:()=>{r(),n.set(k.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(k.some(o))}}})(St);return{...t,on:e=>t.get().each(e)}},Cc=(t,e)=>{let n=null;return{cancel:()=>{te(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{te(n)&&(n=setTimeout(()=>{n=null,t.apply(null,r)},e))}}},zu=(t,e)=>{let n=null;const r=()=>{te(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,t.apply(null,o)},e)}}},Ki=ft("mce-annotation"),la=ft("data-mce-annotation"),Wa=ft("data-mce-annotation-uid"),Xi=ft("data-mce-annotation-active"),Yi=ft("data-mce-annotation-classes"),Gi=ft("data-mce-annotation-attrs"),dh=t=>e=>It(e,t),uh=(t,e)=>{const n=t.selection.getRng(),r=D(n.startContainer),o=D(t.getBody()),s=e.fold(()=>"."+Ki(),i=>`[${la()}="${i}"]`),a=qe(r,n.startOffset).getOr(r);return ao(a,s,dh(o)).bind(i=>ro(i,`${Wa()}`).bind(l=>ro(i,`${la()}`).map(c=>{const u=mh(t,l);return{uid:l,name:c,elements:u}})))},fh=(t,e)=>{return d(t,"data-mce-bogus")||(n=t,o=dh(e),To(n,'[data-mce-bogus="all"]',o).isSome());var n,o},mh=(t,e)=>{const n=D(t.getBody()),r=Ln(n,`[${Wa()}="${e}"]`);return Kt(r,o=>!fh(o,n))},ph=(t,e)=>{const n=D(t.getBody()),r=Ln(n,`[${la()}="${e}"]`),o={};return Q(r,s=>{if(!fh(s,n)){const a=tr(s,Wa()),i=Re(o,a).getOr([]);o[a]=i.concat([s])}}),o};let gh=0;const Qi=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return gh++,t+"_"+n+gh+String(e)},hh=(t,e)=>D(t.dom.cloneNode(e)),ca=t=>hh(t,!1),bh=t=>hh(t,!0),vh=(t,e,n=xe)=>{const r=new pn(t,e),o=s=>{let a;do{a=r[s]()}while(a&&!st(a)&&!n(a));return k.from(a).filter(st)};return{current:()=>k.from(r.current()).filter(st),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},da=(t,e)=>{const n=e||(o=>t.isBlock(o)||We(o)||Me(o)),r=(o,s,a,i)=>{if(st(o)){const l=i(o,s,o.data);if(-1!==l)return k.some({container:o,offset:l})}return a().bind(l=>r(l.container,l.offset,a,i))};return{backwards:(o,s,a,i)=>{const l=vh(o,i??t.getRoot(),n);return r(o,s,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(o,s,a,i)=>{const l=vh(o,i??t.getRoot(),n);return r(o,s,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},Uu=((t,e)=>{const n=r=>t(r)?k.from(r.dom.nodeValue):k.none();return{get:r=>{if(!t(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!t(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(Hn),xc=t=>Uu.get(t),Va=t=>{let e;return n=>(e=e||On(t,je),jt(e,fe(n)))},ua=t=>Un(t)&&"br"===fe(t),yh=Va(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Hu=Va(["ul","ol","dl"]),Zi=Va(["li","dd","dt"]),nk=Va(["thead","tbody","tfoot"]),Ji=Va(["td","th"]),wc=Va(["pre","script","textarea","style"]),tl=()=>{const t=Dt("br");return Ze(t,"data-mce-bogus","1"),t},ks=t=>{ae(t),Vt(t,tl())},bn="\ufeff",Sc=gu,br=t=>t.replace(/\uFEFF/g,""),rk=Et,Ka=st,Xa=t=>(Ka(t)&&(t=t.parentNode),rk(t)&&t.hasAttribute("data-mce-caret")),_s=t=>Ka(t)&&Sc(t.data),Tr=t=>Xa(t)||_s(t),Ch=t=>t.firstChild!==t.lastChild||!We(t.firstChild),qu=t=>{const e=t.container();return!!st(e)&&(e.data.charAt(t.offset())===bn||t.isAtStart()&&_s(e.previousSibling))},$u=t=>{const e=t.container();return!!st(e)&&(e.data.charAt(t.offset()-1)===bn||t.isAtEnd()&&_s(e.nextSibling))},Ec=t=>Ka(t)&&t.data[0]===bn,kc=t=>Ka(t)&&t.data[t.data.length-1]===bn,Wu=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const r=e.getElementsByTagName("br"),o=r[r.length-1];ra(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,xh=t=>Xa(t.startContainer),Ya=Math.round,fa=t=>t?{left:Ya(t.left),top:Ya(t.top),bottom:Ya(t.bottom),right:Ya(t.right),width:Ya(t.width),height:Ya(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},wh=(t,e)=>(t=fa(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Sh=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,el=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Sh(e.top-t.bottom,t,e)},nl=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&Sh(e.bottom-t.top,t,e),Eh=(t,e,n)=>{const r=Math.max(Math.min(e,t.left+t.width),t.left),o=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-r)*(e-r)+(n-o)*(n-o))},_c=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},Ns=(t,e)=>{if(Et(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},ok=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),kh=t=>Nt(t)&&t.charCodeAt(0)>=768&&ok.test(t),_h=Vr,sk=Me,ak=We,ik=st,lk=lo(["script","style","textarea"]),Nh=lo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ck=lo(["table"]),dk=Tr,fo=t=>!dk(t)&&(ik(t)?!lk(t.parentNode):Nh(t)||ak(t)||ck(t)||Vu(t)),Vu=t=>{return!(Et(e=t)&&"true"===e.getAttribute("unselectable"))&&sk(t);var e},Ah=(t,e)=>fo(t)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(Vu(o))return!1;if(_h(o))return!0}return!0})(t,e),Th=Et,uk=fo,Rh=mc("display","block table"),fk=mc("float","left right"),rl=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Th,uk,bo(fk)),mk=bo(mc("white-space","pre pre-line pre-wrap")),ol=st,Ku=We,Oh=De.nodeIndex,Nc=(t,e)=>e<0&&Et(t)&&t.hasChildNodes()?void 0:Ns(t,e),Xu=t=>t?t.createRange():De.DOM.createRng(),Yu=t=>Nt(t)&&/[\r\n\t ]/.test(t),Dh=t=>!!t.setStart&&!!t.setEnd,Gu=t=>{const e=t.startContainer,n=t.startOffset;if(Yu(t.toString())&&mk(e.parentNode)&&st(e)){const r=e.data;if(Yu(r[n-1])||Yu(r[n+1]))return!0}return!1},Bh=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,As=t=>{var e;let n;const r=t.getClientRects();return n=fa(r.length>0?r[0]:t.getBoundingClientRect()),!Dh(t)&&Ku(t)&&Bh(n)?(o=>{const s=o.ownerDocument,a=Xu(s),i=s.createTextNode(gn),l=o.parentNode;l.insertBefore(i,o),a.setStart(i,0),a.setEnd(i,1);const c=fa(a.getBoundingClientRect());return l.removeChild(i),c})(t):Bh(n)&&Dh(t)&&null!==(e=(o=>{const a=o.endContainer,i=o.startOffset,l=o.endOffset;if(o.startContainer===a&&st(a)&&0===i&&1===l){const c=o.cloneRange();return c.setEndAfter(a),As(c)}return null})(t))&&void 0!==e?e:n},ma=(t,e)=>{const n=wh(t,e);return n.width=1,n.right=n.left+1,n},Y=(t,e,n)=>{const r=()=>(n||(n=(o=>{const s=[],a=u=>{var f,p;0!==u.height&&(s.length>0&&(f=u).left===(p=s[s.length-1]).left&&f.top===p.top&&f.bottom===p.bottom&&f.right===p.right||s.push(u))},i=(u,f)=>{const p=Xu(u.ownerDocument);if(f<u.data.length){if(kh(u.data[f]))return;if(kh(u.data[f-1])&&(p.setStart(u,f),p.setEnd(u,f+1),!Gu(p)))return void a(ma(As(p),!1))}f>0&&(p.setStart(u,f-1),p.setEnd(u,f),Gu(p)||a(ma(As(p),!1))),f<u.data.length&&(p.setStart(u,f),p.setEnd(u,f+1),Gu(p)||a(ma(As(p),!0)))},l=o.container(),c=o.offset();if(ol(l))return i(l,c),s;if(Th(l))if(o.isAtEnd()){const u=Nc(l,c);ol(u)&&i(u,u.data.length),rl(u)&&!Ku(u)&&a(ma(As(u),!1))}else{const u=Nc(l,c);if(ol(u)&&i(u,0),rl(u)&&o.isAtEnd())return a(ma(As(u),!1)),s;const f=Nc(o.container(),o.offset()-1);rl(f)&&!Ku(f)&&(Rh(f)||Rh(u)||!rl(u))&&a(ma(As(f),!1)),rl(u)&&a(ma(As(u),!0))}return s})(Y(t,e))),n);return{container:ft(t),offset:ft(e),toRange:()=>{const o=Xu(t.ownerDocument);return o.setStart(t,e),o.setEnd(t,e),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(ol(t),0===e),isAtEnd:()=>ol(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:o=>o&&t===o.container()&&e===o.offset(),getNode:o=>Nc(t,o?e-1:e)}};Y.fromRangeStart=t=>Y(t.startContainer,t.startOffset),Y.fromRangeEnd=t=>Y(t.endContainer,t.endOffset),Y.after=t=>Y(t.parentNode,Oh(t)+1),Y.before=t=>Y(t.parentNode,Oh(t)),Y.isAbove=(t,e)=>wn(Sn(e.getClientRects()),to(t.getClientRects()),el).getOr(!1),Y.isBelow=(t,e)=>wn(to(e.getClientRects()),Sn(t.getClientRects()),nl).getOr(!1),Y.isAtStart=t=>!!t&&t.isAtStart(),Y.isAtEnd=t=>!!t&&t.isAtEnd(),Y.isTextPosition=t=>!!t&&st(t.container()),Y.isElementPosition=t=>!Y.isTextPosition(t);const Ac=(t,e)=>{st(e)&&0===e.data.length&&t.remove(e)},Qu=(t,e,n)=>{var r,s;bu(n)?((r,o,s)=>{const a=k.from(s.firstChild),i=k.from(s.lastChild);o.insertNode(s),a.each(l=>Ac(r,l.previousSibling)),i.each(l=>Ac(r,l.nextSibling))})(t,e,n):(r=t,e.insertNode(s=n),Ac(r,s.previousSibling),Ac(r,s.nextSibling))},mo=st,Ph=ra,Lh=De.nodeIndex,Mh=t=>{const e=t.parentNode;return Ph(e)?Mh(e):e},Zu=t=>t?us(t.childNodes,(e,n)=>(Ph(n)&&"BR"!==n.nodeName?e=e.concat(Zu(n)):e.push(n),e),[]):[],Ih=t=>e=>t===e,Fh=t=>(mo(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,r;n=Zu(Mh(e)),r=$s(n,Ih(e),e),n=n.slice(0,r+1);const o=us(n,(s,a,i)=>(mo(a)&&mo(n[i-1])&&s++,s),0);return n=Hr(n,lo([e.nodeName])),r=$s(n,Ih(e),e),r-o})(t)+"]",jh=(t,e)=>{let n,r=[],o=e.container(),s=e.offset();if(mo(o))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&mo(c);)l+=c.data.length;return l})(o,s);else{const i=o.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",o=i[s]}r.push(Fh(o));let a=((i,l,c)=>{const u=[];for(let f=l.parentNode;f&&f!==i;f=f.parentNode)u.push(f);return u})(t,o);return a=Hr(a,bo(ra)),r=r.concat(_o(a,i=>Fh(i))),r.reverse().join("/")+","+n},zh=(t,e)=>{if(!e)return null;const n=e.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",s=us(r,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((c,u,f)=>{let p=Zu(c);return p=Hr(p,(b,h)=>!mo(b)||!mo(p[h-1])),p=Hr(p,lo([u])),p[f]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!mo(s)&&s.parentNode){let a;return a="after"===o?Lh(s)+1:Lh(s),Y(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;mo(l);){const u=l.data.length;if(i>=c&&i<=c+u){a=l,i-=c;break}if(!mo(l.nextSibling)){a=l,i=u;break}c+=u,l=l.nextSibling}return mo(a)&&i>a.data.length&&(i=a.data.length),Y(a,i)})(s,parseInt(o,10))},Tc=Me,Uh=(t,e,n,r,o)=>{const s=o?r.startContainer:r.endContainer;let a=o?r.startOffset:r.endOffset;const i=[],l=t.getRoot();if(st(s))i.push(n?((c,u,f)=>{let p=c(u.data.slice(0,f)).length;for(let b=u.previousSibling;b&&st(b);b=b.previousSibling)p+=c(b.data).length;return p})(e,s,a):a);else{let c=0;const u=s.childNodes;a>=u.length&&u.length&&(c=1,a=Math.max(0,u.length-1)),i.push(t.nodeIndex(u[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(t.nodeIndex(c,n));return i},Ju=(t,e,n)=>{let r=0;return it.each(t.select(e),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},Hh=(t,e)=>{let n=e?t.startContainer:t.endContainer,r=e?t.startOffset:t.endOffset;if(Et(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(e?r:r-1,o.length-1)],n&&(r=e?0:n.childNodes.length,e?t.setStart(n,r):t.setEnd(n,r))}},qh=t=>(Hh(t,!0),Hh(t,!1),t),$h=(t,e)=>{if(Et(t)&&(t=Ns(t,e),Tc(t)))return t;if(Tr(t)){st(t)&&Xa(t)&&(t=t.parentNode);let n=t.previousSibling;if(Tc(n)||(n=t.nextSibling,Tc(n)))return n}},Wh=(t,e,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Tc(r)){const a=r.nodeName;return{name:a,index:Ju(n.dom,a,r)}}const s=$h((a=o).startContainer,a.startOffset)||$h(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:Ju(n.dom,a,s)}}return((a,i,l,c)=>{const u=i.dom,f=Uh(u,a,l,c,!0),p=i.isForward(),b=xh(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:f,forward:p,...b}:{start:f,end:Uh(u,a,l,c,!1),forward:p,...b}})(t,n,e,o)},Vh=(t,e,n)=>{const r={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",r,"&#xFEFF;"):t.create("span",r)},Kh=(t,e)=>{const n=t.dom;let r=t.getRng();const o=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:Ju(n,i,a)};const c=qh(r.cloneRange());if(!s){c.collapse(!1);const f=Vh(n,o+"_end",e);Qu(n,c,f)}r=qh(r),r.collapse(!0);const u=Vh(n,o+"_start",e);return Qu(n,r,u),t.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},tf=xt(Wh,me,!0),Xh=t=>{const e=s=>s(t),n=ft(t),r=()=>o,o={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:je,isError:xe,map:s=>er.value(s(t)),mapError:r,bind:e,exists:e,forall:e,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:s=>{s(t)},toOptional:()=>k.some(t)};return o},Yh=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,o)=>r(t),isValue:xe,isError:je,map:e,mapError:r=>er.error(r(t)),bind:e,exists:xe,forall:je,getOr:me,or:me,getOrThunk:vo,orThunk:vo,getOrDie:ur(String(t)),each:St,toOptional:k.none};return n},er={value:Xh,error:Yh,fromOption:(t,e)=>t.fold(()=>Yh(e),Xh)},Bo=t=>{if(!at(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return Q(t,(r,o)=>{const s=an(r);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!at(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...u)=>{if(u.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+u.length);return u[o].apply(null,l)},match:u=>{const f=an(u);if(e.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+f.join(","));if(!fr(e,p=>At(f,p)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+"\nRequired: "+e.join(", "));return u[a].apply(null,l)},log:u=>{console.log(u,{constructors:e,constructor:a,params:l})}}}}),n};Bo([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const pk=t=>"inline-command"===t.type||"inline-format"===t.type,gk=t=>"block-command"===t.type||"block-format"===t.type,hk=t=>{var e;const n=o=>er.error({message:o,pattern:t}),r=(o,s,a)=>{if(void 0!==t.format){let i;if(at(t.format)){if(!fr(t.format,Nt))return n(o+" pattern has non-string items in the `format` array");i=t.format}else{if(!Nt(t.format))return n(o+" pattern has non-string `format` parameter");i=[t.format]}return er.value(s(i))}return void 0!==t.cmd?Nt(t.cmd)?er.value(a(t.cmd,t.value)):n(o+" pattern has non-string `cmd` parameter"):n(o+" pattern is missing both `format` and `cmd` parameters")};if(!Xt(t))return n("Raw pattern is not an object");if(!Nt(t.start))return n("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!Nt(t.end))return n("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return n("Inline pattern has empty `start` and `end` parameters");let o=t.start,s=t.end;return 0===s.length&&(s=o,o=""),r("Inline",a=>({type:"inline-format",start:o,end:s,format:a}),(a,i)=>({type:"inline-command",start:o,end:s,cmd:a,value:i}))}if(void 0!==t.replacement)return Nt(t.replacement)?0===t.start.length?n("Replacement pattern has empty `start` parameter"):er.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const o=null!==(e=t.trigger)&&void 0!==e?e:"space";return 0===t.start.length?n("Block pattern has empty `start` parameter"):r("Block",s=>({type:"block-format",start:t.start,format:s[0],trigger:o}),(s,a)=>({type:"block-command",start:t.start,cmd:s,value:a,trigger:o}))}},Gh=t=>Kt(t,gk),Qh=t=>Kt(t,pk),ef=(t,e)=>({...t,blockPatterns:Kt(t.blockPatterns,n=>{return("block-command"===(r=n).type||"block-format"===r.type)&&r.trigger===e;var r})}),Zh=t=>{const e=(n=>{const r=[],o=[];return Q(n,s=>{s.fold(a=>{r.push(a)},a=>{o.push(a)})}),{errors:r,values:o}})(re(t,hk));return Q(e.errors,n=>console.error(n.message,n.pattern)),e.values},nf=Dn().deviceType,bk=nf.isTouch(),vk=De.DOM,Jh=t=>wr(t,RegExp),yt=t=>e=>e.options.get(t),Rc=t=>Nt(t)||Xt(t),t0=(t,e="")=>n=>{const r=Nt(n);if(r){if(-1!==n.indexOf("=")){const o=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Cn(a,(i,l)=>{const c=l.split("="),u=c[0],f=c.length>1?c[1]:u;return i[Xo(u)]=Xo(f),i},{})})(n);return{value:Re(o,t.id).getOr(e),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},yk=yt("iframe_attrs"),Ck=yt("doctype"),e0=yt("document_base_url"),xk=yt("body_id"),wk=yt("body_class"),n0=yt("content_security_policy"),Sk=yt("br_in_pre"),In=yt("forced_root_block"),sl=yt("forced_root_block_attrs"),Ek=yt("newline_behavior"),kk=yt("br_newline_selector"),_k=yt("no_newline_selector"),Nk=yt("keep_styles"),Ak=yt("end_container_on_empty_block"),r0=yt("automatic_uploads"),o0=yt("images_reuse_filename"),Tk=yt("images_replace_blob_uris"),s0=yt("icons"),Rk=yt("icons_url"),Ok=yt("images_upload_url"),Dk=yt("images_upload_base_path"),Bk=yt("images_upload_credentials"),Pk=yt("images_upload_handler"),Lk=yt("content_css_cors"),rf=yt("referrer_policy"),a0=yt("language"),Mk=yt("language_url"),i0=yt("indent_use_margin"),Ik=yt("indentation"),Fk=yt("content_css"),jk=yt("content_style"),l0=yt("font_css"),zk=yt("directionality"),Uk=yt("inline_boundaries_selector"),c0=yt("object_resizing"),Hk=yt("resize_img_proportional"),qk=yt("placeholder"),d0=yt("event_root"),$k=yt("service_message"),Ga=yt("theme"),Wk=yt("theme_url"),of=yt("model"),Vk=yt("model_url"),al=yt("inline_boundaries"),Kk=yt("formats"),Xk=yt("preview_styles"),Yk=yt("format_empty_lines"),Gk=yt("format_noneditable_selector"),Qk=yt("custom_ui_selector"),sf=yt("inline"),Zk=yt("hidden_input"),Jk=yt("submit_patch"),t_=yt("add_form_submit_trigger"),e_=yt("add_unload_trigger"),n_=yt("custom_undo_redo_levels"),r_=yt("disable_nodechange"),u0=yt("readonly"),o_=yt("editable_root"),f0=yt("content_css_cors"),Oc=yt("plugins"),s_=yt("external_plugins"),a_=yt("block_unsupported_drop"),i_=yt("visual"),l_=yt("visual_table_class"),m0=yt("visual_anchor_class"),c_=yt("iframe_aria_text"),d_=yt("setup"),u_=yt("init_instance_callback"),f_=yt("urlconverter_callback"),m_=yt("auto_focus"),p_=yt("browser_spellcheck"),g_=yt("protect"),h_=yt("paste_block_drop"),Dc=yt("paste_data_images"),b_=yt("paste_preprocess"),v_=yt("paste_postprocess"),y_=yt("newdocument_content"),C_=yt("paste_webkit_styles"),x_=yt("paste_remove_styles_if_webkit"),w_=yt("paste_merge_formats"),S_=yt("smart_paste"),E_=yt("paste_as_text"),k_=yt("paste_tab_spaces"),__=yt("allow_html_data_urls"),N_=yt("text_patterns"),A_=yt("text_patterns_lookup"),p0=yt("noneditable_class"),T_=yt("editable_class"),R_=yt("noneditable_regexp"),O_=yt("preserve_cdata"),D_=yt("highlight_on_focus"),g0=yt("xss_sanitization"),B_=yt("init_content_sync"),h0=t=>it.explode(t.options.get("images_file_types")),P_=yt("table_tab_navigation"),L_=yt("details_initial_state"),M_=yt("details_serialized_state"),b0=yt("sandbox_iframes"),af=t=>t.options.get("sandbox_iframes_exclusions"),I_=yt("convert_unsafe_embeds"),F_=yt("license_key"),j_=yt("api_key"),z_=Et,v0=st,y0=t=>{const e=t.parentNode;e&&e.removeChild(t)},C0=t=>{const e=br(t);return{count:t.length-e.length,text:e}},x0=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(bn));)t.deleteData(e,1)},w0=(t,e)=>(pa(t),e),pa=t=>{z_(t)&&Tr(t)&&(Ch(t)?t.removeAttribute("data-mce-caret"):y0(t)),v0(t)&&(x0(t),0===t.data.length&&y0(t))},H_=Me,q_=Do,$_=pc,S0=(t,e,n)=>{const r=wh(e.getBoundingClientRect(),n);let o,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;o=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();o=t.scrollLeft-i.left,s=t.scrollTop-i.top}r.left+=o,r.right+=o,r.top+=s,r.bottom+=s,r.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),r.left+=a,r.right+=a),r},E0=()=>pe.browser.isFirefox(),il=t=>H_(t)||q_(t),ll=t=>(il(t)||Oo(t)&&E0())&&ar(D(t)).exists(io),V_=Vr,lf=Me,K_=Do,k0=mc("display","block table table-cell table-caption list-item"),_0=Tr,N0=Xa,X_=Et,Y_=st,G_=fo,Qa=t=>t>0,ga=t=>t<0,Bc=(t,e)=>{let n;for(;n=t(e);)if(!N0(n))return n;return null},cl=(t,e,n,r,o)=>{const s=new pn(t,r),a=lf(t)||N0(t);let i;if(ga(e)){if(a&&(i=Bc(s.prev.bind(s),!0),n(i)))return i;for(;i=Bc(s.prev.bind(s),o);)if(n(i))return i}if(Qa(e)){if(a&&(i=Bc(s.next.bind(s),!0),n(i)))return i;for(;i=Bc(s.next.bind(s),o);)if(n(i))return i}return null},Ts=(t,e)=>{for(;t&&t!==e;){if(k0(t))return t;t=t.parentNode}return null},Po=(t,e,n)=>Ts(t.container(),n)===Ts(e.container(),n),cf=(t,e)=>{if(!e)return k.none();const n=e.container(),r=e.offset();return X_(n)?k.from(n.childNodes[r+t]):k.none()},A0=(t,e)=>{var n;const r=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),r},Q_=(t,e,n)=>Ts(e,t)===Ts(n,t),T0=(t,e,n)=>{const r=t?"previousSibling":"nextSibling";let o=n;for(;o&&o!==e;){let s=o[r];if(s&&_0(s)&&(s=s[r]),lf(s)||K_(s)){if(Q_(e,s,o))return s;break}if(G_(s))break;o=o.parentNode}return null},dl=xt(A0,!0),ul=xt(A0,!1),df=(t,e,n)=>{let r;const o=xt(T0,!0,e),s=xt(T0,!1,e),a=n.startContainer,i=n.startOffset;if(Xa(a)){const l=Y_(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if("before"===c&&(r=l.nextSibling,ll(r)))return dl(r);if("after"===c&&(r=l.previousSibling,ll(r)))return ul(r)}if(!n.collapsed)return n;if(st(a)){if(_0(a)){if(1===t){if(r=s(a),r)return dl(r);if(r=o(a),r)return ul(r)}if(-1===t){if(r=o(a),r)return ul(r);if(r=s(a),r)return dl(r)}return n}if(kc(a)&&i>=a.data.length-1)return 1===t&&(r=s(a),r)?dl(r):n;if(Ec(a)&&i<=1)return-1===t&&(r=o(a),r)?ul(r):n;if(i===a.data.length)return r=s(a),r?dl(r):n;if(0===i)return r=o(a),r?ul(r):n}return n},R0=(t,e)=>cf(t?0:-1,e).filter(lf),fl=(t,e,n)=>{const r=df(t,e,n);return-1===t?Y.fromRangeStart(r):Y.fromRangeEnd(r)},Pc=t=>k.from(t.getNode()).map(D),uf=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},Lc=(t,e)=>{const n=Po(t,e);return!(n||!We(t.getNode()))||n};var vn,t;(t=vn||(vn={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const Z_=Me,Lo=st,O0=Et,ff=We,Za=fo,D0=t=>{return Nh(t)||!!Vu(e=t)&&!Cn(xn(e.getElementsByTagName("*")),(n,r)=>n||_h(r),!1);var e},Mc=Ah,B0=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,P0=(t,e)=>{if(Qa(t)){if(Za(e.previousSibling)&&!Lo(e.previousSibling))return Y.before(e);if(Lo(e))return Y(e,0)}if(ga(t)){if(Za(e.nextSibling)&&!Lo(e.nextSibling))return Y.after(e);if(Lo(e))return Y(e,e.data.length)}return ga(t)?ff(e)?Y.before(e):Y.after(e):Y.before(e)},mf=(t,e,n)=>{let r,o,s,a;if(!O0(n)||!e)return null;if(e.isEqual(Y.after(n))&&n.lastChild){if(a=Y.after(n.lastChild),ga(t)&&Za(n.lastChild)&&O0(n.lastChild))return ff(n.lastChild)?Y.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(Lo(i)){if(ga(t)&&l>0)return Y(i,--l);if(Qa(t)&&l<i.length)return Y(i,++l);r=i}else{if(ga(t)&&l>0&&(o=B0(i,l-1),Za(o)))return!D0(o)&&(s=cl(o,t,Mc,o),s)?Lo(s)?Y(s,s.data.length):Y.after(s):Lo(o)?Y(o,o.data.length):Y.before(o);if(Qa(t)&&l<i.childNodes.length&&(o=B0(i,l),Za(o)))return ff(o)?((u,f)=>{const p=f.nextSibling;return p&&Za(p)?Lo(p)?Y(p,0):Y.before(p):mf(vn.Forwards,Y.after(f),u)})(n,o):!D0(o)&&(s=cl(o,t,Mc,o),s)?Lo(s)?Y(s,0):Y.before(s):Lo(o)?Y(o,0):Y.after(o);r=o||a.getNode()}if(r&&(Qa(t)&&a.isAtEnd()||ga(t)&&a.isAtStart())&&(r=cl(r,t,je,n,!0),Mc(r,n)))return P0(t,r);o=r&&cl(r,t,Mc,n);const c=Vo(Kt(((u,f)=>{const p=[];let b=u;for(;b&&b!==f;)p.push(b),b=b.parentNode;return p})(i,n),Z_));return!c||o&&c.contains(o)?o?P0(t,o):null:(a=Qa(t)?Y.after(c):Y.before(c),a)},Mo=t=>({next:e=>mf(vn.Forwards,e,t),prev:e=>mf(vn.Backwards,e,t)}),L0=t=>Y.isTextPosition(t)?0===t.offset():fo(t.getNode()),M0=t=>{if(Y.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return fo(t.getNode(!0))},I0=(t,e)=>!Y.isTextPosition(t)&&!Y.isTextPosition(e)&&t.getNode()===e.getNode(!0),Rr=(t,e,n)=>{const r=Mo(e);return k.from(t?r.next(n):r.prev(n))},Ja=(t,e,n)=>Rr(t,e,n).bind(r=>{return Po(n,r,e)&&(s=n,a=r,t?!I0(s,a)&&(Y.isTextPosition(i=s)||!We(i.getNode()))&&M0(s)&&L0(a):!I0(a,s)&&L0(s)&&M0(a))?Rr(t,e,r):k.some(r);var s,a,i}),F0=(t,e,n,r)=>Ja(t,e,n).bind(o=>r(o)?F0(t,e,o,r):k.some(o)),ti=(t,e)=>{const n=t?e.firstChild:e.lastChild;return st(n)?k.some(Y(n,t?0:n.data.length)):n?fo(n)?k.some(t?Y.before(n):We(r=n)?Y.before(r):Y.after(r)):((o,s,a)=>{const i=o?Y.before(a):Y.after(a);return Rr(o,s,i)})(t,e,n):k.none();var r},nr=xt(Rr,!0),lr=xt(Rr,!1),Fn=xt(ti,!0),Kr=xt(ti,!1),pf="_mce_caret",Or=t=>Et(t)&&t.id===pf,ha=(t,e)=>{let n=e;for(;n&&n!==t;){if(Or(n))return n;n=n.parentNode}return null},j0=t=>jt(t,"name"),z0=t=>it.isArray(t.start),Ic=t=>!(!j0(t)&&Tn(t.forward))||t.forward,U0=(t,e)=>(Et(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),J_=(t,e)=>Kr(t).fold(xe,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),H0=(t,e,n)=>!(e.hasChildNodes()||!ha(t,e)||(((r,o)=>{var s;const a=(null!==(s=r.ownerDocument)&&void 0!==s?s:document).createTextNode(bn);r.appendChild(a),o.setStart(a,0),o.setEnd(a,0)})(e,n),0)),q0=(t,e,n,r)=>{const o=n[e?"start":"end"],s=t.getRoot();if(o){let a=s,i=o[0];for(let l=o.length-1;a&&l>=1;l--){const c=a.childNodes;if(H0(s,a,r))return!0;if(o[l]>c.length-1)return!!H0(s,a,r)||J_(a,r);a=c[o[l]]}st(a)&&(i=Math.min(o[0],a.data.length)),Et(a)&&(i=Math.min(o[0],a.childNodes.length)),e?r.setStart(a,i):r.setEnd(a,i)}return!0},gf=t=>st(t)&&t.data.length>0,$0=(t,e,n)=>{const r=t.get(n.id+"_"+e),o=r?.parentNode,s=n.keep;if(r&&o){let a,i;if("start"===e?s?r.hasChildNodes()?(a=r.firstChild,i=1):gf(r.nextSibling)?(a=r.nextSibling,i=0):gf(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)+1):(a=o,i=t.nodeIndex(r)):s?r.hasChildNodes()?(a=r.firstChild,i=1):gf(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)):(a=o,i=t.nodeIndex(r)),!s){const l=r.previousSibling,c=r.nextSibling;let u;for(it.each(it.grep(r.childNodes),f=>{st(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});u=t.get(n.id+"_"+e);)t.remove(u,!0);if(st(c)&&st(l)&&!pe.browser.isOpera()){const f=l.data.length;l.appendData(c.data),t.remove(c),a=l,i=f}}return k.some(Y(a,i))}return k.none()},tN=(t,e,n)=>((r,o,s=!1)=>{return 2===o?Wh(br,s,r):3===o?(a=>{const i=a.getRng();return{start:jh(a.dom.getRoot(),Y.fromRangeStart(i)),end:jh(a.dom.getRoot(),Y.fromRangeEnd(i)),forward:a.isForward()}})(r):o?{rng:(a=r).getRng(),forward:a.isForward()}:Kh(r,!1);var a})(t,e,n),eN=(t,e)=>{((n,r)=>{const o=n.dom;if(r){if(z0(r))return((s,a)=>{const i=s.createRng();return q0(s,!0,a,i)&&q0(s,!1,a,i)?k.some({range:i,forward:Ic(a)}):k.none()})(o,r);if(Nt(r.start))return((s,a)=>{const i=k.from(zh(s.getRoot(),a.start)),l=k.from(zh(s.getRoot(),a.end));return wn(i,l,(c,u)=>{const f=s.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Ic(a)}})})(o,r);if(jt(r,"id"))return((s,a)=>{const i=$0(s,"start",a),l=$0(s,"end",a);return wn(i,l.or(i),(c,u)=>{const f=s.createRng();return f.setStart(U0(s,c.container()),c.offset()),f.setEnd(U0(s,u.container()),u.offset()),{range:f,forward:Ic(a)}})})(o,r);if(j0(r))return((s,a)=>k.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(o,r);if((s=>jt(s,"rng"))(r))return k.some({range:r.rng,forward:Ic(r)})}return k.none()})(t,e).each(({range:n,forward:r})=>{t.setRng(n,r)})},Dr=t=>Et(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Fc=(W0=gn,t=>W0===t);var W0;const ei=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),hf=t=>!ei(t)&&!Fc(t)&&!gu(t),bf=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},V0=(t,e)=>{const n=Ln(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Kt(Qe(t,s=>{const a=_c(s);return a?[D(a)]:[]}),Ji)},ni=t=>V0(bf(t.selection.getSel()),D(t.getBody())),ml=(t,e)=>To(t,"table",e),K0=t=>En(t).fold(ft([t]),e=>[t].concat(K0(e))),vf=t=>$r(t).fold(ft([t]),e=>"br"===fe(e)?$n(e).map(n=>[t].concat(vf(n))).getOr([]):[t].concat(vf(e))),yf=(t,e)=>wn((n=>{const r=n.startContainer,o=n.startOffset;return st(r)?0===o?k.some(D(r)):k.none():k.from(r.childNodes[o]).map(D)})(e),(n=>{const r=n.endContainer,o=n.endOffset;return st(r)?o===r.data.length?k.some(D(r)):k.none():k.from(r.childNodes[o-1]).map(D)})(e),(n,r)=>{const o=Ge(K0(t),xt(It,n)),s=Ge(vf(t),xt(It,r));return o.isSome()&&s.isSome()}).getOr(!1),Cf=(t,e,n,r)=>{const o=n,s=new pn(n,o),a=Eo(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!At(["td","th","table"],c.toLowerCase()));let i=n;do{if(st(i)&&0!==it.trim(i.data).length)return void(r?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(r?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=r?s.next():s.prev());"BODY"===o.nodeName&&(r?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},jc=t=>{const e=t.selection.getSel();return lt(e)&&e.rangeCount>0},xf=(t,e)=>{const n=ni(t);n.length>0?Q(n,r=>{const o=r.dom,s=t.dom.createRng();s.setStartBefore(o),s.setEndAfter(o),e(s,!0)}):e(t.selection.getRng(),!1)},X0=(t,e,n)=>{const r=Kh(t,e);n(r),t.moveToBookmark(r)},pl=t=>x(t?.nodeType),wf=t=>Et(t)&&!Dr(t)&&!Or(t)&&!ra(t),Y0=(t,e,n)=>{const{selection:r,dom:o}=t,s=r.getNode(),a=Me(s);X0(r,!0,()=>{e()}),a&&Me(s)&&o.isChildOf(s,t.getBody())?t.selection.select(s):n(r.getStart())&&nN(o,r)},nN=(t,e)=>{var n,r;const o=e.getRng(),{startContainer:s,startOffset:a}=o;if(!((i,l)=>{if(wf(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),u=parseInt(c,10);return!isNaN(u)&&u>0}return!1})(t,e.getNode())&&Et(s)){const i=s.childNodes,l=t.getRoot();let c;if(a<i.length){const u=i[a];c=new pn(u,null!==(n=t.getParent(u,t.isBlock))&&void 0!==n?n:l)}else{const u=i[i.length-1];c=new pn(u,null!==(r=t.getParent(u,t.isBlock))&&void 0!==r?r:l),c.next(!0)}for(let u=c.current();u;u=c.next()){if("false"===t.getContentEditable(u))return;if(st(u)&&!Ef(u))return o.setStart(u,0),void e.setRng(o)}}},G0=(t,e,n)=>{if(t){const r=e?"nextSibling":"previousSibling";for(t=n?t:t[r];t;t=t[r])if(Et(t)||!Ef(t))return t}},Sf=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||sa(t,e),ri=(t,e,n)=>t.schema.isValidChild(e,n),Ef=(t,e=!1)=>{if(lt(t)&&st(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return qa(n)}return!1},Q0=(t,e)=>{const n=t.dom;return wf(e)&&"false"===n.getContentEditable(e)&&((r,o)=>{const s="[data-mce-cef-wrappable]",a=Gk(r),i=ps(a)?s:`${s},${a}`;return ln(D(o),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},Rs=(t,e)=>he(t)?t(e):(lt(e)&&(t=t.replace(/%(\w+)/g,(n,r)=>e[r]||n)),t),kf=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),_f=(t,e)=>{if(Se(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=qi(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},zc=(t,e,n)=>{const r=t.getStyle(e,n);return _f(r,n)},Z0=(t,e)=>{let n;return t.getParent(e,r=>!!Et(r)&&(n=t.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},Uc=(t,e,n)=>t.getParents(e,n,t.getRoot()),Nf=(t,e,n)=>{const r=t.formatter.get(e);return lt(r)&&Te(r,n)},Io=t=>un(t,"block"),Br=t=>un(t,"selector"),dn=t=>un(t,"inline"),Af=t=>Br(t)&&!1!==t.expand&&!dn(t),J0=t=>(e=>{const n=[];let r=e;for(;r;){if(st(r)&&r.data!==bn||r.childNodes.length>1)return[];Et(r)&&n.push(r),r=r.firstChild}return n})(t).length>0,Tf=t=>Or(t.dom)&&J0(t.dom),oi=Dr,tb=Uc,eb=Ef,rN=Sf,nb=(t,e)=>{let n=e;for(;n;){if(Et(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},rb=(t,e,n,r)=>{const o=e.data;if(t){for(let s=n;s>0;s--)if(r(o.charAt(s-1)))return s}else for(let s=n;s<o.length;s++)if(r(o.charAt(s)))return s;return-1},oN=(t,e,n)=>rb(t,e,n,r=>Fc(r)||ei(r)),sN=(t,e,n)=>rb(t,e,n,hf),ob=(t,e,n,r,o,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(c,u,f)=>{const p=da(t);return k.from((o?p.backwards:p.forwards)(c,u,(h,v)=>oi(h.parentNode)?-1:(a=h,f(o,h,v)),i))};return l(n,r,oN).bind(c=>s?l(c.container,c.offset+(o?-1:0),sN):k.some(c)).orThunk(()=>a?k.some({container:a,offset:o?0:a.length}):k.none())},sb=(t,e,n,r,o)=>{const s=r[o];st(r)&&ps(r.data)&&s&&(r=s);const a=tb(t,r);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const c=e[l];if((!lt(c.collapsed)||c.collapsed===n.collapsed)&&Br(c)&&t.is(a[i],c.selector))return a[i]}return r},ab=(t,e,n,r)=>{var o;let s=n;const a=t.getRoot(),i=e[0];if(Io(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(o=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==o?o:a;s=t.getParent(st(n)?n.parentNode:n,c=>c!==a&&rN(t.schema,c),l)}if(s&&Io(i)&&i.wrapper&&(s=tb(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[r]&&!t.isBlock(s[r])&&(s=s[r],!kf(s,"br")););return s||n},ib=(t,e,n,r)=>{const o=n.parentNode;return!lt(n[r])&&(!(o!==e&&!Se(o)&&!t.isBlock(o))||ib(t,e,o,r))},Hc=(t,e,n,r,o)=>{let s=n;const a=o?"previousSibling":"nextSibling",i=t.getRoot();if(st(n)&&!eb(n)&&(o?r>0:r<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let c=s[a];c;c=c[a]){const u=st(c)&&!ib(t,i,c,a);if(!oi(c)&&(!We(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!eb(c,u))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},lb=t=>oi(t.parentNode)||oi(t),ba=(t,e,n,r=!1)=>{let{startContainer:o,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return Et(o)&&o.hasChildNodes()&&(o=Ns(o,s),st(o)&&(s=0)),Et(a)&&a.hasChildNodes()&&(a=Ns(a,e.collapsed?i:i-1),st(a)&&(i=a.data.length)),o=nb(t,o),a=nb(t,a),lb(o)&&(o=oi(o)?o:o.parentNode,o=e.collapsed?o.previousSibling||o:o.nextSibling||o,st(o)&&(s=e.collapsed?o.length:0)),lb(a)&&(a=oi(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,st(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(ob(t,t.getRoot(),o,s,!0,r).each(({container:c,offset:u})=>{o=c,s=u}),ob(t,t.getRoot(),a,i,!1,r).each(({container:c,offset:u})=>{a=c,i=u})),(dn(l)||l.block_expand)&&(dn(l)&&st(o)&&0!==s||(o=Hc(t,n,o,s,!0)),dn(l)&&st(a)&&i!==a.data.length||(a=Hc(t,n,a,i,!1))),Af(l)&&(o=sb(t,n,e,o,"previousSibling"),a=sb(t,n,e,a,"nextSibling")),(Io(l)||Br(l))&&(o=ab(t,n,o,"previousSibling"),a=ab(t,n,a,"nextSibling"),Io(l)&&(t.isBlock(o)||(o=Hc(t,n,o,s,!0),st(o)&&(s=0)),t.isBlock(a)||(a=Hc(t,n,a,i,!1),st(a)&&(i=a.data.length)))),Et(o)&&o.parentNode&&(s=t.nodeIndex(o),o=o.parentNode),Et(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:s,endContainer:a,endOffset:i}},gl=(t,e,n)=>{var r;const o=e.startOffset,s=Ns(e.startContainer,o),a=e.endOffset,i=Ns(e.endContainer,a-1),l=g=>{const C=g[0];st(C)&&C===s&&o>=C.data.length&&g.splice(0,1);const S=g[g.length-1];return 0===a&&g.length>0&&S===i&&st(S)&&g.splice(g.length-1,1),g},c=(g,C,S)=>{const E=[];for(;g&&g!==S;g=g[C])E.push(g);return E},u=(g,C)=>t.getParent(g,S=>S.parentNode===C,C),f=(g,C,S)=>{const E=S?"nextSibling":"previousSibling";for(let N=g,A=N.parentNode;N&&N!==C;N=A){A=N.parentNode;const R=c(N===g?N:N[E],E);R.length&&(S||R.reverse(),n(l(R)))}};if(s===i)return n(l([s]));const p=null!==(r=t.findCommonAncestor(s,i))&&void 0!==r?r:t.getRoot();if(t.isChildOf(s,i))return f(s,p,!0);if(t.isChildOf(i,s))return f(i,p);const b=u(s,p)||s,h=u(i,p)||i;f(s,b,!0);const v=c(b===s?b:b.nextSibling,"nextSibling",h===i?h.nextSibling:h);v.length&&n(l(v)),f(i,h)},aN=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],cb=(t,e,n,r,o,s)=>{const{uid:a=e,...i}=n;H(t,Ki()),Ze(t,`${Wa()}`,a),Ze(t,`${la()}`,r);const{attributes:l={},classes:c=[]}=o(a,i);if(no(t,l),u=t,Q(c,p=>{H(u,p)}),s){c.length>0&&Ze(t,`${Yi()}`,c.join(","));const u=an(l);u.length>0&&Ze(t,`${Gi()}`,u.join(","))}var u},db=(t,e,n,r,o)=>{const s=Dt("span",t);return cb(s,e,n,r,o,!1),s},ub=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Re(s,a).map(i=>i.settings),getNames:()=>an(s)}})();((s,a)=>{const i=la(),l=u=>k.from(u.attr(i)).bind(a.lookup),c=u=>{var f,p;u.attr(Wa(),null),u.attr(la(),null),u.attr(Xi(),null);const b=k.from(u.attr(Gi())).map(C=>C.split(",")).getOr([]),h=k.from(u.attr(Yi())).map(C=>C.split(",")).getOr([]);Q(b,C=>u.attr(C,null));const v=null!==(p=null===(f=u.attr("class"))||void 0===f?void 0:f.split(" "))&&void 0!==p?p:[],g=ee(v,[Ki()].concat(h));u.attr("class",g.length>0?g.join(" "):null),u.attr(Yi(),null),u.attr(Gi(),null)};s.serializer.addTempAttr(Xi()),s.serializer.addAttributeFilter(i,u=>{for(const f of u)l(f).each(p=>{!1===p.persistent&&("span"===f.name?f.unwrap():c(f))})})})(t,e);const n=((s,a)=>{const i=hn({}),l=()=>({listeners:[],previous:Es()}),c=(b,h)=>{u(b,v=>(h(v),v))},u=(b,h)=>{const v=i.get(),g=h(Re(v,b).getOrThunk(l));v[b]=g,i.set(v)},f=(b,h)=>{Q(mh(s,b),v=>{h?Ze(v,Xi(),"true"):m(v,Xi())})},p=zu(()=>{const b=Wo(a.getNames());Q(b,h=>{u(h,v=>{const g=v.previous.get();return uh(s,k.some(h)).fold(()=>{g.each(C=>{var S;c(S=h,E=>{Q(E.listeners,N=>N(!1,S))}),v.previous.clear(),f(C,!1)})},({uid:C,name:S,elements:E})=>{var N,A,R;No(g,C)||(g.each(N=>f(N,!1)),A=C,R=E,c(N=S,L=>{Q(L.listeners,P=>P(!0,N,{uid:A,nodes:re(R,j=>j.dom)}))}),v.previous.set(C),f(C,!0))}),{previous:v.previous,listeners:v.listeners}})})},30);return s.on("remove",()=>{p.cancel()}),s.on("NodeChange",()=>{p.throttle()}),{addListener:(b,h)=>{u(b,v=>({previous:v.previous,listeners:v.listeners.concat([h])}))}}})(t,e),r=Js("span"),o=s=>{Q(s,a=>{r(a)?Ye(a):(i=>{et(i,Ki()),m(i,`${Wa()}`),m(i,`${la()}`),m(i,`${Xi()}`);const l=ro(i,`${Gi()}`).map(f=>f.split(",")).getOr([]),c=ro(i,`${Yi()}`).map(f=>f.split(",")).getOr([]);var u;Q(l,f=>m(i,f)),u=i,Q(c,f=>{et(u,f)}),m(i,`${Yi()}`),m(i,`${Gi()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,c,u,f;c=s,u=i,f=a,(l=t).undoManager.transact(()=>{const p=l.selection,b=p.getRng(),h=ni(l).length>0,v=Qi("mce-annotation");if(b.collapsed&&!h&&((g,C)=>{const S=ba(g.dom,C,[{inline:"span"}]);C.setStart(S.startContainer,S.startOffset),C.setEnd(S.endContainer,S.endOffset),g.selection.setRng(C)})(l,b),p.getRng().collapsed&&!h){const g=db(l.getDoc(),v,f,c,u.decorate);Bn(g,gn),p.getRng().insertNode(g.dom),p.select(g.dom)}else X0(p,!1,()=>{xf(l,g=>{((t,e,n,r,o,s)=>{const a=[],i=db(t.getDoc(),n,s,r,o),l=Es(),c=()=>{l.clear()},u=p=>{Q(p,f)},f=p=>{switch(b=t,h=p,v="span",g=fe(p),sr(h).fold(()=>"skipping",C=>{return"br"===g||Hn(S=h)&&xc(S)===bn?"valid":(S=>Un(S)&&ot(S,Ki()))(h)?"existing":Or(h.dom)?"caret":Te(aN,S=>ln(h,S))?"valid-block":ri(b,v,g)&&ri(b,fe(C),v)?"valid":"invalid-child";var S})){case"invalid-child":{c();const b=Ee(p);u(b),c();break}case"valid-block":c(),cb(p,n,s,r,o,!0);break;case"valid":{const b=l.get().getOrThunk(()=>{const h=ca(i);return a.push(h),l.set(h),h});ge(p,b);break}}var b,h,v,g};gl(t.dom,e,p=>{c(),(b=>{const h=re(b,D);u(h)})(p)})})(l,g,v,c,u.decorate,f)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{uh(t,k.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();o(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();we(ph(t,s),(i,l)=>{o(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=ph(t,s);return ds(a,i=>re(i,l=>l.dom))}}},hl=t=>({getBookmark:xt(tN,t),moveToBookmark:xt(eN,t)});hl.isBookmarkNode=Dr;const fb=(t,e,n)=>!n.collapsed&&Te(n.getClientRects(),r=>{return a=e,(s=t)>=(o=r).left&&s<=o.right&&a>=o.top&&a<=o.bottom;var o,s,a}),mb=(t,e,n)=>{t.dispatch(e,n)},pb=(t,e,n,r)=>{t.dispatch("FormatApply",{format:e,node:n,vars:r})},gb=(t,e,n,r)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:r})},hb=(t,e)=>t.dispatch("SetContent",e),bb=(t,e)=>t.dispatch("GetContent",e),Rf=(t,e)=>{t.dispatch("AutocompleterUpdateActiveRange",e)},vb=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),Ct={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||Ct.metaKeyPressed(t),metaKeyPressed:t=>pe.os.isMacOS()||pe.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},va="data-mce-selected",yb=Math.abs,qc=Math.round,Of={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Cb=(t,e)=>{const n=e.dom,r=e.getDoc(),o=document,s=e.getBody();let a,i,l,c,u,f,p,b,h,v,g,C,S,E,N;const A=gt=>lt(gt)&&(Dg(gt)||n.is(gt,"figure.image")),R=gt=>Do(gt)||n.hasClass(gt,"mce-preview-object"),L=gt=>{const _t=gt.target;((F,z)=>{if("longpress"===(X=F).type||0===X.type.indexOf("touch")){const X=F.touches[0];return A(F.target)&&!fb(X.clientX,X.clientY,z)}var X;return A(F.target)&&!fb(F.clientX,F.clientY,z)})(gt,e.selection.getRng())&&!gt.isDefaultPrevented()&&e.selection.select(_t)},P=gt=>n.hasClass(gt,"mce-preview-object")&&lt(gt.firstElementChild)?[gt,gt.firstElementChild]:n.is(gt,"figure.image")?[gt.querySelector("img")]:[gt],j=gt=>{const _t=c0(e);return!!_t&&"false"!==gt.getAttribute("data-mce-resize")&&gt!==e.getBody()&&(n.hasClass(gt,"mce-preview-object")&&lt(gt.firstElementChild)?ln(D(gt.firstElementChild),_t):ln(D(gt),_t))},$=(gt,_t,F)=>{if(lt(F)){const z=P(gt);Q(z,X=>{X.style[_t]||!e.schema.isValid(X.nodeName.toLowerCase(),_t)?n.setStyle(X,_t,F):n.setAttrib(X,_t,""+F)})}},B=(gt,_t,F)=>{$(gt,"width",_t),$(gt,"height",F)},I=gt=>{let _t,F,z,X,Z;_t=gt.screenX-f,F=gt.screenY-p,C=_t*c[2]+b,S=F*c[3]+h,C=C<5?5:C,S=S<5?5:S,z=(A(a)||R(a))&&!1!==Hk(e)?!Ct.modifierPressed(gt):Ct.modifierPressed(gt),z&&(yb(_t)>yb(F)?(S=qc(C*v),C=qc(S/v)):(C=qc(S/v),S=qc(C*v))),B(i,C,S),X=c.startPos.x+_t,Z=c.startPos.y+F,X=X>0?X:0,Z=Z>0?Z:0,n.setStyles(l,{left:X,top:Z,display:"block"}),l.innerHTML=C+" &times; "+S,c[2]<0&&i.clientWidth<=C&&n.setStyle(i,"left",void 0+(b-C)),c[3]<0&&i.clientHeight<=S&&n.setStyle(i,"top",void 0+(h-S)),_t=s.scrollWidth-E,F=s.scrollHeight-N,_t+F!==0&&n.setStyles(l,{left:X-_t,top:Z-F}),g||(e.dispatch("ObjectResizeStart",{target:a,width:b,height:h,origin:"corner-"+c.name}),g=!0)},U=()=>{const gt=g;g=!1,gt&&($(a,"width",C),$(a,"height",S)),n.unbind(r,"mousemove",I),n.unbind(r,"mouseup",U),o!==r&&(n.unbind(o,"mousemove",I),n.unbind(o,"mouseup",U)),n.remove(i),n.remove(l),n.remove(u),G(a),gt&&(e.dispatch("ObjectResized",{target:a,width:C,height:S,origin:"corner-"+c.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},G=gt=>{Pt();const _t=n.getPos(gt,s),F=_t.x,z=_t.y,X=gt.getBoundingClientRect(),Z=X.width||X.right-X.left,ht=X.height||X.bottom-X.top;a!==gt&&(rt(),a=gt,C=S=0);const mt=e.dispatch("ObjectSelected",{target:gt});j(gt)&&!mt.isDefaultPrevented()?we(Of,(zt,Gt)=>{let ne=n.get("mceResizeHandle"+Gt);ne&&n.remove(ne),ne=n.add(s,"div",{id:"mceResizeHandle"+Gt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Gt+"-resize; margin:0; padding:0"}),n.bind(ne,"mousedown",ke=>{ke.stopImmediatePropagation(),ke.preventDefault(),(ze=>{const yr=P(a)[0];f=ze.screenX,p=ze.screenY,b=yr.clientWidth,h=yr.clientHeight,v=h/b,c=zt,c.name=Gt,c.startPos={x:Z*zt[0]+F,y:ht*zt[1]+z},E=s.scrollWidth,N=s.scrollHeight,u=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=((vt,Zt)=>{if(R(Zt))return vt.create("img",{src:pe.transparentSrc});if(Oo(Zt)){const ce=Ve(c.name,"n")?Sn:to,Jt=Zt.cloneNode(!0);return ce(vt.select("tr",Jt)).each(ve=>{const Be=vt.select("td,th",ve);vt.setStyle(ve,"height",null),Q(Be,pt=>vt.setStyle(pt,"height",null))}),Jt}return Zt.cloneNode(!0)})(n,a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:F,top:z,margin:0}),B(i,Z,ht),i.removeAttribute(va),s.appendChild(i),n.bind(r,"mousemove",I),n.bind(r,"mouseup",U),o!==r&&(n.bind(o,"mousemove",I),n.bind(o,"mouseup",U)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},b+" &times; "+h)})(ke)}),zt.elm=ne,n.setStyles(ne,{left:Z*zt[0]+F-ne.offsetWidth/2,top:ht*zt[1]+z-ne.offsetHeight/2})}):rt(!1)},ct=Cc(G,0),rt=(gt=!0)=>{ct.cancel(),Pt(),a&&gt&&a.removeAttribute(va),we(Of,(_t,F)=>{const z=n.get("mceResizeHandle"+F);z&&(n.unbind(z),n.remove(z))})},wt=(gt,_t)=>n.isChildOf(gt,_t),Tt=gt=>{if(g||e.removed||e.composing)return;const _t="mousedown"===gt.type?gt.target:t.getNode(),F=ao(D(_t),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(X=>X.dom).filter(X=>n.isEditable(X.parentElement)||"IMG"===X.nodeName&&n.isEditable(X)).getOrUndefined(),z=lt(F)?n.getAttrib(F,va,"1"):"1";if(Q(n.select(`img[${va}],hr[${va}]`),X=>{X.removeAttribute(va)}),lt(F)&&wt(F,s)&&e.hasFocus()){Ot();const X=t.getStart(!0);if(wt(X,F)&&wt(t.getEnd(!0),F))return n.setAttrib(F,va,z),void ct.throttle(F)}rt()},Pt=()=>{we(Of,gt=>{gt.elm&&(n.unbind(gt.elm),delete gt.elm)})},Ot=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{Ot(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Tt),e.on("keyup compositionend",gt=>{a&&"TABLE"===a.nodeName&&Tt(gt)}),e.on("hide blur",rt),e.on("contextmenu longpress",L,!0)}),e.on("remove",Pt),{isResizable:j,showResizeRect:G,hideResizeRect:rt,updateResizeRect:Tt,destroy:()=>{ct.cancel(),a=i=u=null}}},xb=(t,e,n)=>{const r=t.document.createRange();var o,s;return o=r,e.fold(s=>{o.setStartBefore(s.dom)},(s,a)=>{o.setStart(s.dom,a)},s=>{o.setStartAfter(s.dom)}),s=r,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),r},Df=(t,e,n,r,o)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(r.dom,o),s},bl=Bo([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),wb=(t,e,n)=>e(D(n.startContainer),n.startOffset,D(n.endContainer),n.endOffset),Sb=(t,e,n,r)=>({start:t,soffset:e,finish:n,foffset:r}),lN=document.caretPositionFromPoint?(t,e,n)=>{var r,o;return k.from(null===(o=(r=t.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,n)).bind(s=>{if(null===s.offsetNode)return k.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),k.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var r,o;return k.from(null===(o=(r=t.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,e,n))}:k.none,Bf=Bo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),os={before:Bf.before,on:Bf.on,after:Bf.after,cata:(t,e,n,r)=>t.fold(e,n,r),getStart:t=>t.fold(me,me,me)},$c=Bo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),si={domRange:$c.domRange,relative:$c.relative,exact:$c.exact,exactFromRange:t=>$c.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:r=>D(r.startContainer),relative:(r,o)=>os.getStart(r),exact:(r,o,s,a)=>r});return oo(e)},range:Sb},Wc=(t,e)=>{const n=fe(t);return"input"===n?os.after(t):At(["br","img"],n)?0===e?os.before(t):os.after(t):os.on(t,e)},cN=(t,e)=>{const n=t.fold(os.before,Wc,os.after),r=e.fold(os.before,Wc,os.after);return si.relative(n,r)},Eb=(t,e,n,r)=>{const o=Wc(t,e),s=Wc(n,r);return si.relative(o,s)},Pf=(t,e)=>{const n=(e||document).createDocumentFragment();return Q(t,r=>{n.appendChild(r.dom)}),D(n)},kb=(t,e,n)=>{return(r=oo(D(n)).dom,o=t,s=e,((a,i,l)=>{const c=D(a.document);return lN(c,i,l).map(u=>Sb(D(u.startContainer),u.startOffset,D(u.endContainer),u.endOffset))})(r,o,s)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,s},Lf=(t,e)=>lt(t)&&lt(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,_b=(t,e,n)=>null!==((r,o,s)=>{let a=r;for(;a&&a!==o;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),uN=(t,e,n)=>_b(t,e,r=>r.nodeName===n),fN=(t,e)=>Tr(t)&&!_b(t,e,Or),Nb=(t,e,n)=>{const r=e.parentNode;if(r){const o=new pn(e,t.getParent(r,t.isBlock)||t.getRoot());let s;for(;s=o[n?"prev":"next"]();)if(We(s))return!0}return!1},Mf=(t,e,n,r,o)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=o.parentNode;let l,c;if(!i)return k.none();const u=t.getParent(i,t.isBlock)||s;if(r&&We(o)&&e&&t.isEmpty(u))return k.some(Y(i,t.nodeIndex(o)));const f=new pn(o,u);for(;c=f[r?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||fN(c,s))return k.none();if(st(c)&&c.data.length>0)return uN(c,s,"A")?k.none():k.some(Y(c,r?c.data.length:0));if(t.isBlock(c)||a[c.nodeName.toLowerCase()])return k.none();l=c}return xs(l)?k.none():n&&l?k.some(Y(l,0)):k.none()},Ab=(t,e,n,r)=>{const o=t.getRoot();let s,a=!1,i=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const c=Et(i)&&l===i.childNodes.length,u=t.schema.getNonEmptyElements();let f=n;if(Tr(i))return k.none();if(Et(i)&&l>i.childNodes.length-1&&(f=!1),Ui(i)&&(i=o,l=0),i===o){if(f&&(s=i.childNodes[l>0?l-1:0],s)&&(Tr(s)||u[s.nodeName]||Oo(s)))return k.none();if(i.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=st(i)&&c?i.data.length:0,!e&&i===o.lastChild&&Oo(i)||((p,b)=>{let h=b;for(;h&&h!==p;){if(Me(h))return!0;h=h.parentNode}return!1})(o,i)||Tr(i)||vu(i))return k.none();if(i.hasChildNodes()&&!Oo(i)){s=i;const p=new pn(i,o);do{if(Me(s)||Tr(s)){a=!1;break}if(st(s)&&s.data.length>0){l=f?0:s.data.length,i=s,a=!0;break}if(u[s.nodeName.toLowerCase()]&&!TE(s)){l=t.nodeIndex(s),i=s.parentNode,f||l++,a=!0;break}}while(s=f?p.next():p.prev())}}}return e&&(st(i)&&0===l&&Mf(t,c,e,!0,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),Et(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!We(s)||"A"===(null===(h=s.previousSibling)||void 0===h?void 0:h.nodeName)||Nb(t,s,!1)||Nb(t,s,!0)||Mf(t,c,e,!0,s).each(p=>{i=p.container(),l=p.offset(),a=!0}))),f&&!e&&st(i)&&l===i.data.length&&Mf(t,c,e,!1,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),a&&i?k.some(Y(i,l)):k.none();var h},Vc=(t,e)=>{const n=e.collapsed,r=e.cloneRange(),o=Y.fromRangeStart(e);return Ab(t,n,!0,r).each(s=>{n&&Y.isAbove(o,s)||r.setStart(s.container(),s.offset())}),n||Ab(t,n,!1,r).each(s=>{r.setEnd(s.container(),s.offset())}),n&&r.collapse(!0),Lf(e,r)?k.none():k.some(r)},Kc=(t,e)=>t.splitText(e),Xc=t=>{let e=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset;if(e===r&&st(e)){if(n>0&&n<e.data.length)if(r=Kc(e,n),e=r.previousSibling,o>n){o-=n;const s=Kc(r,o).previousSibling;e=r=s,o=s.data.length,n=0}else o=0}else if(st(e)&&n>0&&n<e.data.length&&(e=Kc(e,n),n=0),st(r)&&o>0&&o<r.data.length){const s=Kc(r,o).previousSibling;r=s,o=s.data.length}return{startContainer:e,startOffset:n,endContainer:r,endOffset:o}},ya=t=>({walk:(e,n)=>gl(t,e,n),split:Xc,expand:(e,n={type:"word"})=>{if("word"===n.type){const r=ba(t,e,[{inline:"span"}]),o=t.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return e},normalize:e=>Vc(t,e).fold(xe,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});ya.compareRanges=Lf,ya.getCaretRangeFromPoint=kb,ya.getSelectedNode=_c,ya.getNode=Ns;const mN=((t,e)=>{const n=o=>{const s=(a=>{const i=a.dom;return Ao(a)?i.getBoundingClientRect().height:i.offsetHeight})(o);if(s<=0||null===s){const a=tt(o,t);return parseFloat(a)||0}return s},r=(o,s)=>Cn(s,(a,i)=>{const l=tt(o,i),c=void 0===l?0:parseInt(l,10);return isNaN(c)?a:a+c},0);return{set:(o,s)=>{if(!x(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=o.dom;Jo(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:r,max:(o,s,a)=>{const i=r(o,a);return s>i?s-i:0}}})("height"),Tb=()=>D(document),Rb=(t,e)=>t.view(e).fold(ft([]),n=>{const r=t.owner(n),o=Rb(t,r);return[n].concat(o)});var pN=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?k.none():k.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(D)},owner:t=>Le(t)});const If=t=>"textarea"===fe(t),Ob=(t,e)=>{const n=(o=>{const s=o.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===o.dom)return Pn(a.offsetLeft,a.offsetTop);const c=ts(i?.pageYOffset,l.scrollTop),u=ts(i?.pageXOffset,l.scrollLeft),f=ts(l.clientTop,a.clientTop),p=ts(l.clientLeft,a.clientLeft);return Ua(o).translate(u-p,c-f)})(t),r=mN.get(t);return{element:t,bottom:n.top+r,height:r,pos:n,cleanup:e}},Db=(t,e,n,r)=>{hN(t,(o,s)=>gN(t,e,n,r),n)},Bb=(t,e,n,r,o)=>{const s={elm:r.element.dom,alignToTop:o};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(t,e,Ha(e).top,r,o),t.dispatch("AfterScrollIntoView",s))},gN=(t,e,n,r)=>{D(t.getBody());const s=D(t.getDoc()),a=((i,l)=>{const c=((f,p)=>{const b=Ee(f);if(0===b.length||If(f))return{element:f,offset:p};if(p<b.length&&!If(b[p]))return{element:b[p],offset:0};{const h=b[b.length-1];return If(h)?{element:f,offset:p}:"img"===fe(h)?{element:h,offset:1}:Hn(h)?{element:h,offset:xc(h).length}:{element:h,offset:Ee(h).length}}})(i,l),u=ut('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Ft(c.element,u),Ob(u,()=>ue(u))})(D(n.startContainer),n.startOffset);Bb(t,s,e,a,r),a.cleanup()},Pb=(t,e,n,r)=>{const o=D(t.getDoc());Bb(t,o,n,Ob(D(e),St),r)},hN=(t,e,n)=>{const r=n.startContainer,o=n.startOffset,s=n.endContainer,a=n.endOffset;e(D(r),D(s));const i=t.dom.createRng();i.setStart(r,o),i.setEnd(s,a),t.selection.setRng(n)},Ff=(t,e,n,r,o)=>{const s=e.pos;if(r)uc(s.left,s.top,o);else{const a=s.top-n+e.height;uc(-t.getBody().getBoundingClientRect().left,a,o)}},Lb=(t,e,n,r,o,s)=>{const a=r+n,i=o.pos.top,l=o.bottom,c=l-i>=r;i<n?Ff(t,o,r,!1!==s,e):i>a?Ff(t,o,r,c?!1!==s:!0===s,e):l>a&&!c&&Ff(t,o,r,!0===s,e)},Mb=(t,e,n,r,o)=>{const s=oo(e).dom.innerHeight;Lb(t,e,n,s,r,o)},Ib=(t,e,n,r,o)=>{const s=oo(e).dom.innerHeight;Lb(t,e,n,s,r,o);const a=(l=>{const c=Tb(),u=Ha(c),f=((h,v)=>{const g=v.owner(h);return Rb(v,g)})(l,pN),p=Ua(l),b=$o(f,(h,v)=>{const g=Ua(v);return{left:h.left+g.left,top:h.top+g.top}},{left:0,top:0});return Pn(b.left+p.left+u.left,b.top+p.top+u.top)})(r.element),i=kg(window);a.top<i.y?Sg(r.element,!1!==o):a.top>i.bottom&&Sg(r.element,!0===o)},bN=(t,e,n)=>Db(t,Mb,e,n),vN=(t,e,n)=>Pb(t,e,Mb,n),yN=(t,e,n)=>Db(t,Ib,e,n),CN=(t,e,n)=>Pb(t,e,Ib,n),vl=(t,e,n)=>{(t.inline?bN:yN)(t,e,n)},Fb=(t,e=!1)=>t.dom.focus({preventScroll:e}),jb=t=>{const e=Oe(t).dom;return t.dom===e.activeElement},jf=(t=Tb())=>k.from(t.dom.activeElement).map(D),zb=(t,e)=>{const n=Hn(e)?xc(e).length:Ee(e).length+1;return t>n?n:t<0?0:t},xN=t=>si.range(t.start,zb(t.soffset,t.start),t.finish,zb(t.foffset,t.finish)),Ub=(t,e)=>!fc(e.dom)&&(qn(t,e)||It(t,e)),Hb=t=>e=>Ub(t,e.start)&&Ub(t,e.finish),wN=t=>si.range(D(t.startContainer),t.startOffset,D(t.endContainer),t.endOffset),SN=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),k.some(e)}catch{return k.none()}},Yc=t=>{const e=t.inline||pe.browser.isFirefox()?(n=D(t.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?k.from(o.getRangeAt(0)):k.none()).map(wN)})(oo(n).dom).filter(Hb(n))):k.none();var n;t.bookmark=e.isSome()?e:t.bookmark},zf=t=>(t.bookmark?t.bookmark:k.none()).bind(e=>{return n=D(t.getBody()),k.from(e).filter(Hb(n)).map(xN);var n}).bind(SN),qb={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Pr={setEditorTimeout:(t,e,n)=>{return x(o=n)||(o=0),setTimeout(()=>{t.removed||e()},o);var o},setEditorInterval:(t,e,n)=>{const r=(x(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(r):e()},s));var s;return r}};let ai;const Uf=De.DOM,Hf=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Gc=(t,e)=>{const n=Qk(t);return null!==Uf.getParent(e,o=>{return Et(s=o)&&qb.isEditorUIElement(s)||!!n&&t.dom.is(o,n);var s})},qf=t=>{try{const e=Oe(D(t.getElement()));return jf(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},EN=(t,e)=>{const n=e.editor;(o=>{const s=Cc(()=>{Yc(o)},0);o.on("init",()=>{var a,c;o.inline&&((a,i)=>{const l=()=>{i.throttle()};De.DOM.bind(document,"mouseup",l),a.on("remove",()=>{De.DOM.unbind(document,"mouseup",l)})})(o,s),c=s,(a=o).on("mouseup touchend",u=>{c.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Yc(a)})}),o.on("remove",()=>{s.cancel()})})(n);const r=(o,s)=>{D_(o)&&!0!==o.inline&&s(D(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=t.focusedEditor;Hf(qf(n))&&r(n,H),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Pr.setEditorTimeout(n,()=>{const o=t.focusedEditor;Hf(qf(n))&&o===n||r(n,et),Gc(n,qf(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),ai||(ai=o=>{const s=t.activeEditor;s&&ta(o).each(a=>{a.ownerDocument===document&&(a===document.body||Gc(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Uf.bind(document,"focusin",ai))},kN=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&ai&&(Uf.unbind(document,"focusin",ai),ai=null)},$b=(t,e)=>{var n,r,o;(n=D(t.getBody()),r=e,(o=r,o.collapsed?k.from(Ns(o.startContainer,o.startOffset)).map(D):k.none()).bind(o=>nk(o)?k.some(o):qn(n,o)?k.none():k.some(n))).bind(n=>Fn(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},$f=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},Ca=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(r=D(n),jb(r)||(o=r,jf(Oe(o)).filter(s=>o.dom.contains(s.dom))).isSome());var r,o})(t):lt((e=t).iframeElement)&&jb(D(e.iframeElement));var e},Wb=t=>Ca(t)||(e=>{const n=Oe(D(e.getElement()));return jf(n).filter(r=>!Hf(r.dom)&&Gc(e,r.dom)).isSome()})(t),Wf=t=>t.editorManager.setActive(t),Vb=(t,e)=>e.collapsed?t.isEditable(e.startContainer):t.isEditable(e.startContainer)&&t.isEditable(e.endContainer),Kb=(t,e,n,r,o)=>{const a=n?e.startOffset:e.endOffset;return k.from(n?e.startContainer:e.endContainer).map(D).map(i=>r&&e.collapsed?i:qe(i,o(i,a)).getOr(i)).bind(i=>Un(i)?k.some(i):sr(i).filter(Un)).map(i=>i.dom).getOr(t)},Xb=(t,e,n=!1)=>Kb(t,e,!0,n,(r,o)=>Math.min(kn(r),o)),Yb=(t,e,n=!1)=>Kb(t,e,!1,n,(r,o)=>o>0?o-1:o),Gb=(t,e)=>{const n=t;for(;t&&st(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Vf=(t,e)=>re(e,n=>{const r=t.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),_N={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Qc=(t,e,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(t[r])return t[r];if(t!==e){let s=t[o];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[o],s)return s}},NN=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!qa(n))return!1;const r=t.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},Qb=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Kn{static create(e,n){const r=new Kn(e,_N[e]||1);return n&&we(n,(o,s)=>{r.attr(s,o)}),r}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const r=this;if(!Nt(e))return lt(e)&&we(e,(s,a)=>{r.attr(a,s)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(e in o.map){delete o.map[e];let s=o.length;for(;s--;)if(o[s].name===e)return o.splice(s,1),r}return r}if(e in o.map){let s=o.length;for(;s--;)if(o[s].name===e){o[s].value=n;break}}else o.push({name:e,value:n});return o.map[e]=n,r}return o.map[e]}}clone(){const e=this,n=new Kn(e.name,e.type),r=e.attributes;if(r){const o=[];o.map={};for(let s=0,a=r.length;s<a;s++){const i=r[s];"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const r=n.next;e.insert(n,e,!0),n=r}e.remove()}remove(){const e=this,n=e.parent,r=e.next,o=e.prev;return n&&(n.firstChild===e?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===e?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const r=n.lastChild;return r?(r.next=e,e.prev=r,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,r){e.parent&&e.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===o.lastChild?o.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=o,e}getAll(e){const n=this,r=[];for(let o=n.firstChild;o;o=Qc(o,n))o.name===e&&r.push(o);return r}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let o=e.firstChild;o;o=Qc(o,e))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},r){var o;const s=this;let a=s.firstChild;if(Qb(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||Qb(a))return!1}if(8===a.type||3===a.type&&!NN(a)||3===a.type&&a.parent&&n[a.parent.name]&&qa(null!==(o=a.value)&&void 0!==o?o:"")||r&&r(a))return!1}while(a=Qc(a,s));return!0}walk(e){return Qc(this,null,e)}}const AN=it.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),Zb=t=>Nt(t.nodeValue)&&t.nodeValue.includes(bn),Jb=t=>(0===t.length?"":`${re(t,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',tv=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>Zb(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),ev=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,e=>{if(Zb(e)){const n=e.parentNode;return n&&jt(AN,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),TN=t=>null!==tv(t).nextNode(),RN=t=>null!==ev(t).nextNode(),ON=(t,e)=>null!==e.querySelector(Jb(t)),DN=(t,e)=>{Q(e.querySelectorAll(Jb(t)),n=>{const r=D(n);"all"===tr(r,"data-mce-bogus")?ue(r):Q(t,o=>{d(r,o)&&m(r,o)})})},nv=t=>{let e=t.nextNode();for(;null!==e;)e.nodeValue=null,e=t.nextNode()},BN=Rn(nv,tv),PN=Rn(nv,ev),rv=(t,e)=>{const n=[{condition:xt(ON,e),action:xt(DN,e)},{condition:TN,action:BN},{condition:RN,action:PN}];let r=t,o=!1;return Q(n,({condition:s,action:a})=>{s(r)&&(o||(r=t.cloneNode(!0),o=!0),a(r))}),r},ov=t=>{const e=Ln(t,"[data-mce-bogus]");Q(e,n=>{"all"===tr(n,"data-mce-bogus")?ue(n):ua(n)?(Ft(n,le("\ufeff")),ue(n)):Ye(n)})},sv=t=>{const e=Ln(t,"input");Q(e,n=>{m(n,"name")})},av=it.makeMap,iv=t=>{const e=[],n=(t=t||{}).indent,r=av(t.indent_before||""),o=av(t.indent_after||""),s=ws.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,c)=>{if(n&&r[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}if(e.push("<",i),l)for(let u=0,f=l.length;u<f;u++){const p=l[u];e.push(" ",p.name,'="',s(p.value,!0),'"')}if(e[e.length]=!c||a?">":" />",c&&n&&o[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&o[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},Os=(t={},e=Ss())=>{const n=iv(t);return t.validate=!("validate"in t)||t.validate,{serialize:r=>{const o=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const u=i.name,f=u in e.getVoidElements();let p=i.attributes;if(o&&p&&p.length>1){const b=[];b.map={};const h=e.getElementRule(i.name);if(h){for(let v=0,g=h.attributesOrder.length;v<g;v++){const C=h.attributesOrder[v];if(C in p.map){const S=p.map[C];b.map[C]=S,b.push({name:C,value:S})}}for(let v=0,g=p.length;v<g;v++){const C=p[v].name;if(!(C in b.map)){const S=p.map[C];b.map[C]=S,b.push({name:C,value:S})}}p=b}}if(n.start(u,p,f),oa(u))Nt(i.value)&&n.text(i.value,!0),n.end(u);else if(!f){let b=i.firstChild;if(b){"pre"!==u&&"textarea"!==u||3!==b.type||"\n"!==(null===(l=b.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(b)}while(b=b.next)}n.end(u)}}};return 1!==r.type||t.inner?3===r.type?s[3](r):s[11](r):a(r),n.getContent()}}},lv=new Set;Q(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{lv.add(t)});const cv=["font","text-decoration","text-emphasis"],Kf=(t,e)=>an(t.parseStyle(t.getAttrib(e,"style"))),MN=(t,e,n)=>{const r=Kf(t,e),o=Kf(t,n),s=a=>{var i,l;const c=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",u=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return Sr(c)&&Sr(u)&&c!==u};return Te(r,a=>{const i=l=>Te(l,c=>c===a);if(!i(o)&&i(cv)){const l=Kt(o,c=>Te(cv,u=>Ve(c,u)));return Te(l,s)}return s(a)})},dv=(t,e,n)=>k.from(n.container()).filter(st).exists(r=>{const o=t?0:-1;return e(r.data.charAt(n.offset()+o))}),Xf=xt(dv,!0,ei),Yf=xt(dv,!1,ei),IN=t=>{const e=t.container();return st(e)&&(0===e.data.length||Sc(e.data)&&hl.isBookmarkNode(e.parentNode))},Ds=(t,e)=>n=>cf(t?0:-1,n).filter(e).isSome(),uv=t=>Dg(t)&&"block"===tt(D(t),"display"),fv=t=>{return Me(t)&&!(Et(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},FN=Ds(!0,uv),jN=Ds(!1,uv),yl=Ds(!0,Do),Cl=Ds(!1,Do),mv=Ds(!0,Oo),pv=Ds(!1,Oo),Bs=Ds(!0,fv),Ps=Ds(!1,fv),gv=(t,e)=>{return o=xe,qn(r=e,n=t)?vs(n,s=>o(s)||It(s,r)).slice(0,-1):[];var n,r,o},ss=(t,e)=>[t].concat(gv(t,e)),Gf=(t,e,n)=>F0(t,e,n,IN),hv=(t,e,n)=>Ge(ss(D(e.container()),t),(r=>o=>r.isBlock(fe(o)))(n)),bv=(t,e,n,r)=>Gf(t,e.dom,n).forall(o=>hv(e,n,r).fold(()=>!Po(o,n,e.dom),s=>!Po(o,n,e.dom)&&qn(s,D(o.container())))),vv=(t,e,n,r)=>hv(e,n,r).fold(()=>Gf(t,e.dom,n).forall(o=>!Po(o,n,e.dom)),o=>Gf(t,o.dom,n).isNone()),Qf=xt(vv,!1),yv=xt(vv,!0),zN=xt(bv,!1),UN=xt(bv,!0),HN=t=>Pc(t).exists(ua),Zc=(t,e,n,r)=>{const o=Kt(ss(D(n.container()),e),a=>r.isBlock(fe(a))),s=Sn(o).getOr(e);return Rr(t,s.dom,n).filter(HN)},Zf=(t,e,n)=>Pc(e).exists(ua)||Zc(!0,t,e,n).isSome(),Jf=(t,e,n)=>{return(r=e,k.from(r.getNode(!0)).map(D)).exists(ua)||Zc(!1,t,e,n).isSome();var r},qN=xt(Zc,!1),$N=xt(Zc,!0),Cv=t=>Y.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),xv=(t,e,n)=>{const r=Kt(ss(D(e.container()),t),o=>n.isBlock(fe(o)));return Sn(r).getOr(t)},wv=(t,e,n)=>Cv(e)?Yf(e):Yf(e)||lr(xv(t,e,n).dom,e).exists(Yf),Sv=(t,e,n)=>Cv(e)?Xf(e):Xf(e)||nr(xv(t,e,n).dom,e).exists(Xf),tm=t=>Pc(t).bind(e=>Nr(e,Un)).exists(e=>{return n=tt(e,"white-space"),At(["pre","pre-wrap"],n);var n}),Ev=(t,e)=>n=>{return r=new pn(n,t)[e](),lt(r)&&Me(r)&&k0(r);var r},kv=(t,e,n)=>{return!tm(e)&&(s=n,lr((r=t).dom,o=e).isNone()||nr(r.dom,o).isNone()||Qf(r,o,s)||yv(r,o,s)||Jf(r,o,s)||Zf(r,o,s)||wv(t,e,n)||Sv(t,e,n));var r,o,s},xl=(t,e,n)=>!tm(e)&&(Qf(t,e,n)||zN(t,e,n)||Jf(t,e,n)||wv(t,e,n)||((r,o)=>{const s=lr(r.dom,o).getOr(o),a=Ev(r.dom,"prev");return o.isAtStart()&&(a(o.container())||a(s.container()))})(t,e)),wl=(t,e,n)=>!tm(e)&&(yv(t,e,n)||UN(t,e,n)||Zf(t,e,n)||Sv(t,e,n)||((r,o)=>{const s=nr(r.dom,o).getOr(o),a=Ev(r.dom,"next");return o.isAtEnd()&&(a(o.container())||a(s.container()))})(t,e)),em=(t,e,n)=>xl(t,e,n)||wl(t,(r=>{const o=r.container(),s=r.offset();return st(o)&&s<o.data.length?Y(o,s+1):r})(e),n),_v=(t,e)=>Fc(t.charAt(e)),Nv=(t,e)=>ei(t.charAt(e)),Av=(t,e,n,r)=>{const o=e.data,s=Y(e,0);return n||!_v(o,0)||em(t,s,r)?!!(n&&Nv(o,0)&&xl(t,s,r))&&(e.data=gn+o.slice(1),!0):(e.data=" "+o.slice(1),!0)},Tv=(t,e,n,r)=>{const o=e.data,s=Y(e,o.length-1);return n||!_v(o,o.length-1)||em(t,s,r)?!!(n&&Nv(o,o.length-1)&&wl(t,s,r))&&(e.data=o.slice(0,-1)+gn,!0):(e.data=o.slice(0,-1)+" ",!0)},Rv=(t,e,n,r)=>{if(0===n)return;const o=D(t),s=Wr(o,c=>r.isBlock(fe(c))).getOr(o),a=t.data.slice(e,e+n),i=e+n>=t.data.length&&wl(s,Y(t,t.data.length),r),l=0===e&&xl(s,Y(t,0),r);t.replaceData(e,n,Rg(a,4,l,i))},Jc=(t,e,n)=>{const r=t.data.slice(e),o=r.length-au(r).length;Rv(t,e,o,n)},nm=(t,e,n)=>{const r=t.data.slice(0,e),o=r.length-ms(r).length;Rv(t,e-o,o,n)},rm=(t,e,n,r,o=!0)=>{const s=ms(t.data).length,a=o?t:e,i=o?e:t;return o?a.appendData(i.data):a.insertData(0,i.data),ue(D(i)),r&&Jc(a,s,n),a},VN=(t,e)=>((n,r)=>{const o=n.container(),s=n.offset();return!Y.isTextPosition(n)&&o===r.parentNode&&s>Y.before(r).offset()})(e,t)?Y(e.container(),e.offset()-1):e,Ov=t=>{return fo(t.previousSibling)?k.some(st(e=t.previousSibling)?Y(e,e.data.length):Y.after(e)):t.previousSibling?Kr(t.previousSibling):k.none();var e},Dv=t=>{return fo(t.nextSibling)?k.some(st(e=t.nextSibling)?Y(e,0):Y.before(e)):t.nextSibling?Fn(t.nextSibling):k.none();var e},Bv=(t,e,n)=>{n.fold(()=>{t.focus()},r=>{t.selection.setRng(r.toRange(),e)})},XN=(t,e)=>e&&jt(t.schema.getBlockElements(),fe(e)),xa=(t,e,n,r=!0,o=!1)=>{const s=((t,e,n)=>{return(r=t,o=e,s=n,r?(a=o,Dv(i=s).orThunk(()=>Ov(i)).orThunk(()=>{return nr(l=a,Y.after(c=i)).orThunk(()=>lr(l,Y.before(c)));var l,c})):((a,i)=>Ov(i).orThunk(()=>Dv(i)).orThunk(()=>{return l=a,k.from((c=i).previousSibling?c.previousSibling:c.parentNode).bind(u=>lr(l,Y.before(u))).orThunk(()=>nr(l,Y.after(c)));var l,c}))(o,s)).map(xt(VN,n));var r,o,s,a,i})(e,t.getBody(),n.dom),a=Wr(n,xt(XN,t),(i=t.getBody(),c=>c.dom===i));var i;const l=((c,u,f,p)=>{const b=$n(c).filter(Hn),h=gr(c).filter(Hn);return ue(c),(v=b,g=h,C=u,S=(E,N,A)=>{const R=E.dom,L=N.dom,P=R.data.length;return rm(R,L,f,p),A.container()===L?Y(R,P):A},v.isSome()&&g.isSome()&&C.isSome()?k.some(S(v.getOrDie(),g.getOrDie(),C.getOrDie())):k.none()).orThunk(()=>(p&&(b.each(E=>nm(E.dom,E.dom.length,f)),h.each(E=>Jc(E.dom,0,f))),u));var v,g,C,S})(n,s,t.schema,(u=n,jt(t.schema.getTextInlineElements(),fe(u))));var u;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(c=>((u,f,p)=>{if(Mn(u,f)){const b=ut('<br data-mce-bogus="1">');return p?Q(Ee(f),h=>{Tf(h)||ue(h)}):ae(f),Vt(f,b),k.some(Y.before(b.dom))}return k.none()})(t.schema,c,o)).fold(()=>{r&&Bv(t,e,l)},c=>{r&&Bv(t,e,k.some(c))})},YN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,wa=(t,e)=>ln(D(e),Uk(t))&&!sa(t.schema,e)&&t.dom.isEditable(e),Pv=t=>{var e,n;return"rtl"===De.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",YN.test(n))},Ls=(t,e,n)=>{const r=(o=t,s=e,Kt(De.DOM.getParents(n.container(),"*",s),o));var o,s;return k.from(r[r.length-1])},Lr=(t,e)=>{const n=e.container(),r=e.offset();return t?_s(n)?st(n.nextSibling)?Y(n.nextSibling,0):Y.after(n):qu(e)?Y(n,r+1):e:_s(n)?st(n.previousSibling)?Y(n.previousSibling,n.previousSibling.data.length):Y.before(n):$u(e)?Y(n,r-1):e},Lv=xt(Lr,!0),Mv=xt(Lr,!1),Iv=(t,e)=>{const n=r=>r.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},om=t=>Iv(t,"Delete"),GN=t=>yh(t)||Zi(t),td=(t,e)=>qn(t,e)?Nr(e,GN,(n=>r=>No(sr(r),n,It))(t)):k.none(),sm=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},Fv=(t,e,n)=>wn(Fn(n),Kr(n),(r,o)=>{const s=Lr(!0,r),a=Lr(!1,o),i=Lr(!1,e);return t?nr(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s)):lr(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a))}).getOr(!0),jv=t=>{var e;return(8===Li(e=t)||"#comment"===fe(e)?$n(t):$r(t)).bind(jv).orThunk(()=>k.some(t))},zv=(t,e,n,r=!0)=>{var o;e.deleteContents();const s=jv(n).getOr(n),a=D(null!==(o=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==o?o:n.dom);if(a.dom===t.getBody()?sm(t,r):Mn(t.schema,a,{checkRootAsContent:!1})&&(ks(a),r&&t.selection.setCursorLocation(a.dom,0)),!It(n,a)){const l=No(sr(a),n)?[]:sr(i=a).map(Ee).map(c=>Kt(c,u=>!It(i,u))).getOr([]);Q(l.concat(Ee(n)),c=>{It(c,a)||qn(c,a)||!Mn(t.schema,c)||ue(c)})}var i},am=t=>Ln(t,"td,th"),Uv=(t,e)=>ml(D(t),e),im=(t,e)=>({start:t,end:e}),Sl=Bo([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ed=(t,e)=>ao(D(t),"td,th",e),Hv=t=>!It(t.start,t.end),qv=(t,e)=>ml(t.start,e).bind(n=>ml(t.end,e).bind(r=>hs(It(n,r),n))),lm=t=>e=>qv(e,t).map(n=>((r,o,s)=>({rng:r,table:o,cells:s}))(e,n,am(n))),$v=(t,e,n,r)=>{if(n.collapsed||!t.forall(Hv))return k.none();if(e.isSameTable){const o=t.bind(lm(r));return k.some({start:o,end:o})}{const o=ed(n.startContainer,r),s=ed(n.endContainer,r),a=o.bind((l=>c=>ml(c,l).bind(u=>to(am(u)).map(f=>im(c,f))))(r)).bind(lm(r)),i=s.bind((l=>c=>ml(c,l).bind(u=>Sn(am(u)).map(f=>im(f,c))))(r)).bind(lm(r));return k.some({start:a,end:i})}},Wv=(t,e)=>Us(t,n=>It(n,e)),cm=t=>wn(Wv(t.cells,t.rng.start),Wv(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),Vv=(t,e)=>{const{startTable:n,endTable:r}=e,o=t.cloneRange();return n.each(s=>o.setStartAfter(s.dom)),r.each(s=>o.setEndBefore(s.dom)),o},Kv=t=>Q(t,e=>{m(e,"contenteditable"),ks(e)}),dm=(t,e,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(e.dom.lastChild)):(o.setStartBefore(e.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),um(t,o,e,!1).each(s=>s())},Xv=t=>{const e=ni(t),n=D(t.selection.getNode());pc(n.dom)&&Mn(t.schema,n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&Te(e,r=>It(r,n))&&Ze(n,"data-mce-selected","1")},Yv=(t,e,n)=>k.some(()=>{const r=t.selection.getRng(),o=n.bind(({rng:s,isStartInTable:a})=>{const i=k.from((c=t).dom.getParent(a?s.endContainer:s.startContainer,c.dom.isBlock)).map(D);var c;s.deleteContents(),((c,u,f)=>{f.each(p=>{u?ue(p):(ks(p),c.selection.setCursorLocation(p.dom,0))})})(t,a,i.filter(xt(Mn,t.schema)));const l=a?e[0]:e[e.length-1];return dm(t,l,r,a),Mn(t.schema,l)?k.none():k.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);Kv(o),Xv(t)}),ZN=(t,e,n,r)=>k.some(()=>{const o=t.selection.getRng(),s=e[0],a=n[n.length-1];dm(t,s,o,!0),dm(t,a,o,!1);const i=Mn(t.schema,s)?e:e.slice(1),l=Mn(t.schema,a)?n:n.slice(0,-1);Kv(i.concat(l)),r.deleteContents(),Xv(t)}),um=(t,e,n,r=!0)=>k.some(()=>{zv(t,e,n,r)}),JN=(t,e)=>k.some(()=>xa(t,!1,e)),Gv=(t,e)=>Ge(ss(e,t),Ji),fm=(t,e)=>Ge(ss(e,t),Js("caption")),nd=(t,e)=>k.some(()=>{ks(e),t.selection.setCursorLocation(e.dom,0)}),Qv=(t,e)=>t?mv(e):pv(e),mm=(t,e)=>{const n=D(t.selection.getStart(!0)),r=ni(t);return t.selection.isCollapsed()&&0===r.length?((t,e,n)=>{const r=D(t.getBody());return fm(r,n).fold(()=>((o,s,a,i)=>{const l=Y.fromRangeStart(o.selection.getRng());return Gv(a,i).bind(c=>{return Mn(o.schema,c,{checkRootAsContent:!1})?nd(o,c):(f=a,b=c,h=l,Ja(s,o.getBody(),h).bind(v=>Gv(f,D(v.getNode())).bind(g=>It(g,b)?k.none():k.some(St))));var f,b,h})})(t,e,r,n).orThunk(()=>hs(((o,s)=>{const a=Y.fromRangeStart(o.selection.getRng());return Qv(s,a)||Rr(s,o.getBody(),a).exists(i=>Qv(s,i))})(t,e),St)),o=>((s,a,i,l)=>{const c=Y.fromRangeStart(s.selection.getRng());return Mn(s.schema,l)?nd(s,l):(f=i,b=l,h=c,Ja(p=a,(u=s).getBody(),h).fold(()=>k.some(St),v=>{return C=p,S=h,E=v,Fn((g=b).dom).bind(N=>Kr(g.dom).map(A=>C?S.isEqual(N)&&E.isEqual(A):S.isEqual(A)&&E.isEqual(N))).getOr(!0)?((g,C)=>nd(g,C))(u,b):((g,C,S)=>fm(g,D(S.getNode())).fold(()=>k.some(St),E=>hs(!It(E,C),St)))(f,b,v);var g,C,S,E}));var u,f,p,b,h})(t,e,r,o))})(t,e,n):((o,s,a)=>{const i=D(o.getBody()),l=o.selection.getRng();return 0!==a.length?Yv(o,a,k.none()):(c=o,f=l,fm(u=i,s).fold(()=>{return b=c,((t,e)=>{const n=(s=>a=>It(s,a))(t),r=((s,a)=>{const i=ed(s.startContainer,a),l=ed(s.endContainer,a);return wn(i,l,im)})(e,n),o=((s,a)=>{const i=Uv(s.startContainer,a),l=Uv(s.endContainer,a),c=i.isSome(),u=l.isSome(),f=wn(i,l,It).getOr(!1);return wn((p={startTable:i,endTable:l,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u}).startTable,p.endTable,(b,h)=>{const v=Ag(b,C=>It(C,h)),g=Ag(h,C=>It(C,b));return v||g?{...p,startTable:v?k.none():p.startTable,endTable:g?k.none():p.endTable,isSameTable:!1,isMultiTable:!1}:p}).getOr(p);var p})(e,n);return a=e,i=n,r.exists(l=>{return u=i,!Hv(c=l)&&qv(c,u).exists(f=>{const p=f.dom.rows;return 1===p.length&&1===p[0].cells.length})&&yf(l.start,a);var c,u})?r.map(s=>Sl.singleCellTable(e,s.start)):o.isMultiTable?((s,a,i,l)=>$v(s,a,i,l).bind(({start:c,end:u})=>{const f=c.bind(cm).getOr([]),p=u.bind(cm).getOr([]);if(f.length>0&&p.length>0){const b=Vv(i,a);return k.some(Sl.multiTable(f,p,b))}return k.none()}))(r,o,e,n):((s,a,i,l)=>$v(s,a,i,l).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=a,f=cm(c).getOr([]);if(u&&c.cells.length===f.length)return k.some(Sl.fullTable(c.table));if(f.length>0){if(u)return k.some(Sl.partialTable(f,k.none()));{const p=Vv(i,a);return k.some(Sl.partialTable(f,k.some({...a,rng:p})))}}return k.none()}))(r,o,e,n);var a,i})(u,f).bind(g=>g.fold(xt(um,b),xt(JN,b),xt(Yv,b),xt(ZN,b)));var b},b=>nd(c,b)));var c,u,f})(t,n,r)},Sa=(t,e)=>{let n=e;for(;n&&n!==t;){if(Vr(n)||Me(n))return n;n=n.parentNode}return null},eA=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],nA=it.each,pm=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),r=o=>Te(eA,s=>Ve(o,s))||n.has(o);return{compare:(o,s)=>{if(o.nodeName!==s.nodeName||o.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return nA(e.getAttribs(l),u=>{const f=u.nodeName.toLowerCase();"style"===f||r(f)||(c[f]=e.getAttrib(l,f))}),c},i=(l,c)=>{for(const u in l)if(jt(l,u)){const f=c[u];if(Ie(f)||l[u]!==f)return!1;delete c[u]}for(const u in c)if(jt(c,u))return!1;return!0};return!(Et(o)&&Et(s)&&(!i(a(o),a(s))||!i(e.parseStyle(e.getAttrib(o,"style")),e.parseStyle(e.getAttrib(s,"style"))))||Dr(o)||Dr(s))},isAttributeInternal:r}},Zv=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),Jv=(t,e,n,r)=>{const o=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const c=r.attributes[l];c?c.nodes.push(n):r.attributes[l]={filter:i,nodes:[n]}}}},ty=(t,e)=>{const n=(r,o)=>{we(r,s=>{const a=xn(s.nodes);Q(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(o?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!Se(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},ey=(t,e,n,r={})=>{const o=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((c,u)=>{let f=c;for(;f=f.walk();)Jv(s,a,f,l)})(i),l})(t,e,n);ty(o,r)},gm=(t,e,n,r)=>{if((t.pad_empty_with_br||e.insert)&&n(r)){const o=new Kn("br",1);e.insert&&o.attr("data-mce-bogus","1"),r.empty().append(o)}else r.empty().append(new Kn("#text",3)).value=gn},ny=(t,e)=>{const n=t?.firstChild;return lt(n)&&n===t.lastChild&&n.name===e},El=(t,e,n,r)=>r.isEmpty(e,n,o=>((s,a)=>{const i=s.getElementRule(a.name);return!0===i?.paddEmpty})(t,o)),rA=t=>{let e;for(let n=t;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(e=n)}return k.from(e)},hm=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const r=t.children();for(const o of r)n&&!e.isValidChild(n.name,o.name)&&hm(o,e,n);t.unwrap()}},bm=(t,e,n,r=St)=>{const o=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=it.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=u=>u!==n&&!i[u.name];for(let u=0;u<t.length;u++){const f=t[u];let p,b,h;if(!f.parent||l.has(f))continue;if(o[f.name]&&"li"===f.parent.name){let g=f.next;for(;g&&o[g.name];)g.name="li",l.add(g),f.parent.insert(g,f.parent),g=g.next;f.unwrap();continue}const v=[f];for(p=f.parent;p&&!e.isValidChild(p.name,f.name)&&c(p);p=p.parent)v.push(p);if(p&&v.length>1)if(vm(e,f,p))hm(f,e);else{v.reverse(),b=v[0].clone(),r(b);let g=b;for(let C=0;C<v.length-1;C++){e.isValidChild(g.name,v[C].name)&&C>0?(h=v[C].clone(),r(h),g.append(h)):h=g;for(let S=v[C].firstChild;S&&S!==v[C+1];){const E=S.next;h.append(S),S=E}g=h}El(e,s,a,b)?p.insert(f,v[0],!0):(p.insert(b,v[0],!0),p.insert(f,b)),p=v[0],(El(e,s,a,p)||ny(p,"br"))&&p.empty().remove()}else if(f.parent){if("li"===f.name){let g=f.prev;if(g&&("ul"===g.name||"ol"===g.name)){g.append(f);continue}if(g=f.next,g&&("ul"===g.name||"ol"===g.name)&&g.firstChild){g.insert(f,g.firstChild,!0);continue}const C=new Kn("ul",1);r(C),f.wrap(C);continue}if(e.isValidChild(f.parent.name,"div")&&e.isValidChild("div",f.name)){const g=new Kn("div",1);r(g),f.wrap(g)}else hm(f,e)}}},vm=(t,e,n=e.parent)=>{return!(!n||(!t.children[e.name]||t.isValidChild(n.name,e.name))&&("a"!==e.name||!((r,o)=>{let s=r;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n))&&(r=n,"summary"!==r.name||!Zv(e)||n?.firstChild===e&&n?.lastChild===e));var r},ym=t=>t.collapsed?t:(e=>{const n=Y.fromRangeStart(e),r=Y.fromRangeEnd(e),o=e.commonAncestorContainer;return Rr(!1,o,r).map(s=>!Po(n,r,o)&&Po(n,s,o)?((a,i,l,c)=>{const u=document.createRange();return u.setStart(a,i),u.setEnd(l,c),u})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),Cm=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},ry=(t,e)=>{const n=Y.after(t),r=Mo(e).prev(n);return r?r.toRange():null},iA=["pre"],xm=pc,lA=(t,e,n)=>{var r,o;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,c=Os({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=br(e)),-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u);let f=s.getRng();const p=f.startContainer,b=t.getBody();var E,N;p===b&&s.isCollapsed()&&a.isBlock(b.firstChild)&&(E=t,lt(N=b.firstChild)&&!E.schema.getVoidElements()[N.nodeName])&&a.isEmpty(b.firstChild)&&(f=a.createRng(),f.setStart(b.firstChild,0),f.setEnd(b.firstChild,0),s.setRng(f)),s.isCollapsed()||(E=>{const N=E.dom,A=ym(E.selection.getRng());E.selection.setRng(A);const R=N.getParent(A.startContainer,xm);var L,P,j;L=N,P=A,lt(j=R)&&j===L.getParent(P.endContainer,xm)&&yf(D(j),P)?um(E,A,D(R)):A.startContainer===A.endContainer&&A.endOffset-A.startOffset==1&&st(A.startContainer.childNodes[A.startOffset])?A.deleteContents():E.getDoc().execCommand("Delete",!1)})(t);const h=s.getNode(),v={context:h.nodeName.toLowerCase(),data:n.data,insert:!0},g=i.parse(e,v);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,r=e.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,s)=>{const a=o.getNonEmptyElements();return lt(s)&&(s.isEmpty(a)||(l=s,o.getBlockElements()[l.name]&&lt((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===gn)(l.firstChild)));var l,c})(t,r)&&(r=r?.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(t.schema,g)&&((E,N)=>!!Cm(E,N))(a,h))return f=((t,e,n,r)=>{const o=((f,p,b)=>{const h=p.serialize(b);return(v=>{var g,C;const S=v.firstChild,E=v.lastChild;return S&&"META"===S.nodeName&&(null===(g=S.parentNode)||void 0===g||g.removeChild(S)),E&&"mce_marker"===E.id&&(null===(C=E.parentNode)||void 0===C||C.removeChild(E)),v})(f.createFragment(h))})(e,t,r),s=Cm(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||lt(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((r=e.firstChild).data===gn||We(r)))?t.slice(0,-1):t;var r,e,n})((i=o.firstChild,Kt(null!==(l=i?.childNodes)&&void 0!==l?l:[],f=>"LI"===f.nodeName)));var i,l;const c=e.getRoot(),u=f=>{const p=Y.fromRangeStart(n),b=Mo(e.getRoot()),h=1===f?b.prev(p):b.next(p),v=h?.getNode();return!v||Cm(e,v)!==s};return s?u(1)?((f,p,b)=>{const h=f.parentNode;return h&&it.each(p,v=>{h.insertBefore(v,f)}),((v,g)=>{const C=Y.before(v),S=Mo(g).next(C);return S?S.toRange():null})(f,b)})(s,a,c):u(2)?(f=s,b=c,e.insertAfter((p=a).reverse(),f),ry(p[0],b)):((f,p,b,h)=>{const v=((C,S)=>{const E=S.cloneRange(),N=S.cloneRange();return E.setStartBefore(C),N.setEndAfter(C),[E.cloneContents(),N.cloneContents()]})(f,h),g=f.parentNode;return g&&(g.insertBefore(v[0],f),it.each(p,C=>{g.insertBefore(C,f)}),g.insertBefore(v[1],f),g.removeChild(f)),ry(p[p.length-1],b)})(s,a,c,n):null;var f,p,b})(c,a,s.getRng(),g),f&&s.setRng(f),e;!0===n.paste&&((E,N,A,R)=>{var L;const P=N.firstChild,j=N.lastChild,$=P===("bookmark"===j.attr("data-mce-type")?j.prev:j),B=At(iA,P.name);if($&&B){const I="false"!==P.attr("contenteditable"),U=(null===(L=E.getParent(A,E.isBlock))||void 0===L?void 0:L.nodeName.toLowerCase())===P.name,G=k.from(Sa(R,A)).forall(Vr);return I&&U&&G}return!1})(a,g,h,t.getBody())&&(null===(r=g.firstChild)||void 0===r||r.unwrap()),(E=>{let N=E;for(;N=N.walk();)1===N.type&&N.attr("data-mce-fragment","1")})(g);let C=g.lastChild;if(C&&"mce_marker"===C.attr("id")){const E=C;for(C=C.prev;C;C=C.walk(!0))if(3===C.type||!a.isBlock(C.name)){C.parent&&t.schema.isValidChild(C.parent.name,"span")&&C.parent.insert(E,C,"br"===C.name);break}}if(t._selectionOverrides.showBlockCaretContainer(h),v.invalid||((E,N,A)=>{var R;return Te(A.children(),Zv)&&"SUMMARY"===(null===(R=E.getParent(N,E.isBlock))||void 0===R?void 0:R.nodeName)})(a,h,g)){t.selection.setContent(u);let E,N=s.getNode();const A=t.getBody();for(Ui(N)?N=E=A:E=N;E&&E!==A;)N=E,E=E.parentNode;e=N===A?A.innerHTML:a.getOuterHTML(N);const R=i.parse(e),L=(I=>{for(let U=I;U;U=U.walk())if("mce_marker"===U.attr("id"))return k.some(U);return k.none()})(R),P=L.bind(rA).getOr(R);L.each(I=>I.replace(g));const j=g.children(),$=null!==(o=g.parent)&&void 0!==o?o:R;g.unwrap();const B=Kt(j,I=>vm(t.schema,I,$));bm(B,t.schema,P),ey(i.getNodeFilters(),i.getAttributeFilters(),R),e=c.serialize(R),N===A?a.setHTML(A,e):a.setOuterHTML(N,e)}else e=c.serialize(g),((E,N,A)=>{var R;if("all"===A.getAttribute("data-mce-bogus"))null===(R=A.parentNode)||void 0===R||R.insertBefore(E.dom.createFragment(N),A);else{const L=A.firstChild;!L||L===A.lastChild&&"BR"===L.nodeName?E.dom.setHTML(A,N):E.selection.setContent(N,{no_events:!0})}})(t,e,h);var S;return((E,N)=>{const A=E.schema.getTextInlineElements(),R=E.dom;if(N){const L=E.getBody(),P=pm(E);it.each(R.select("*[data-mce-fragment]"),j=>{if(lt(A[j.nodeName.toLowerCase()])&&fr(Kf(R,j),I=>!lv.has(I)))for(let $=j.parentElement;lt($)&&$!==L&&!MN(R,j,$);$=$.parentElement)if(P.compare($,j)){R.remove(j,!0);break}})}})(t,l),((E,N)=>{var A,R,L;let P;const j=E.dom,$=E.selection;if(!N)return;$.scrollIntoView(N);const B=Sa(E.getBody(),N);if(B&&"false"===j.getContentEditable(B))return j.remove(N),void $.select(B);let I=j.createRng();const U=N.previousSibling;if(st(U)){I.setStart(U,null!==(R=null===(A=U.nodeValue)||void 0===A?void 0:A.length)&&void 0!==R?R:0);const ct=N.nextSibling;st(ct)&&(U.appendData(ct.data),null===(L=ct.parentNode)||void 0===L||L.removeChild(ct))}else I.setStartBefore(N),I.setEndBefore(N);const G=j.getParent(N,j.isBlock);if(j.remove(N),G&&j.isEmpty(G)){const ct=xm(G);ae(D(G)),I.setStart(G,0),I.setEnd(G,0),ct||G.getAttribute("data-mce-fragment")||!(P=(rt=>{let wt=Y.fromRangeStart(rt);return wt=Mo(E.getBody()).next(wt),wt?.toRange()})(I))?j.add(G,j.create("br",ct?{}:{"data-mce-bogus":"1"})):(I=P,j.remove(G))}$.setRng(I)})(t,a.get("mce_marker")),S=t.getBody(),it.each(S.getElementsByTagName("*"),E=>{E.removeAttribute("data-mce-fragment")}),((E,N,A)=>{k.from(E.getParent(N,"td,th")).map(D).each(R=>{return P=A,void $r(L=R).each(j=>{$n(j).each($=>{P.isBlock(fe(L))&&ua(j)&&P.isBlock(fe($))&&ue(j)})});var L,P})})(a,s.getStart(),t.schema),((E,N,A)=>{const R=vs(D(A),L=>It(L,D(N)));Hs(R,R.length-2).filter(Un).fold(()=>wu(E,N),L=>wu(E,L.dom))})(t.schema,t.getBody(),s.getStart()),e},rd=t=>t instanceof Kn,wm=(t,e,n)=>{var r;t.dom.setHTML(t.getBody(),e),!0!==n&&Ca(r=t)&&Fn(r.getBody()).each(o=>{const s=o.getNode(),a=Oo(s)?Fn(s).getOr(o):o;r.selection.setRng(a.toRange())})},oy=t=>he(t)?t:xe,Sm=(t,e,n)=>{const r=e(t),o=oy(n);return r.orThunk(()=>o(t)?k.none():((s,a,i)=>{let l=s.dom;const c=oy(i);for(;l.parentNode;){l=l.parentNode;const u=D(l),f=a(u);if(f.isSome())return f;if(c(u))break}return k.none()})(t,e,o))},Em=kf,sy=(t,e,n)=>{const r=t.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const s=r[o];if(Br(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},km=(t,e,n,r,o)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!sy(t,i,n)||i.parentNode===s||!!Fo(t,i,n,r,!0));return!!Fo(t,a,n,r,o)},od=(t,e,n)=>!(!dn(n)||!Em(e,n.inline))||!(!Io(n)||!Em(e,n.block))||!!Br(n)&&Et(e)&&t.is(e,n.selector),ay=(t,e,n,r,o,s)=>{const a=n[r],i="attributes"===r;if(he(n.onmatch))return n.onmatch(e,n,r);if(a)if(tc(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):zc(t,e,a[l]))return!0}else for(const l in a)if(jt(a,l)){const c=i?t.getAttrib(e,l):zc(t,e,l),u=Rs(a[l],s),f=Se(c)||ps(c);if(f&&Se(u))continue;if(o&&f&&!n.exact||(!o||n.exact)&&!Em(c,_f(u,l)))return!1}return!0},Fo=(t,e,n,r,o)=>{const s=t.formatter.get(n),a=t.dom;if(s&&Et(e))for(let i=0;i<s.length;i++){const l=s[i];if(od(t.dom,e,l)&&ay(a,e,l,"attributes",o,r)&&ay(a,e,l,"styles",o,r)){const c=l.classes;if(c)for(let u=0;u<c.length;u++)if(!t.dom.hasClass(e,Rs(c[u],r)))return;return l}}},_m=(t,e,n,r,o)=>{if(r)return km(t,r,e,n,o);if(r=t.selection.getNode(),km(t,r,e,n,o))return!0;const s=t.selection.getStart();return!(s===r||!km(t,s,e,n,o))},kl=bn,iy=t=>{if(t){const e=new pn(t,t);for(let n=e.current();n;n=e.next())if(st(n))return n}return null},Nm=t=>{const e=Dt("span");return no(e,{id:pf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Vt(e,le(kl)),e},Am=(t,e,n)=>{const r=t.dom,o=t.selection;if(J0(e))xa(t,!1,D(e),n,!0);else{const s=o.getRng(),a=r.getParent(e,r.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,u=s.endOffset,f=(p=>{const b=iy(p);return b&&b.data.charAt(0)===kl&&b.deleteData(0,1),b})(e);r.remove(e,!0),i===f&&l>0&&s.setStart(f,l-1),c===f&&u>0&&s.setEnd(f,u-1),a&&r.isEmpty(a)&&ks(D(a)),o.setRng(s)}},Tm=(t,e,n)=>{const r=t.dom,o=t.selection;if(e)Am(t,e,n);else if(!(e=ha(t.getBody(),o.getStart())))for(;e=r.get(pf);)Am(t,e,n)},ly=(t,e)=>(t.appendChild(e),e),cy=(t,e)=>{var n;const r=$o(t,(s,a)=>ly(s,a.cloneNode(!1)),e),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return ly(r,o.createTextNode(kl))},dy=t=>{const e=Nm(!1),n=cy(t,e.dom);return{caretContainer:e,caretPosition:Y(n,0)}},uy=(t,e)=>{const{caretContainer:n,caretPosition:r}=dy(e);return Ft(D(t),n),ue(D(t)),r},fy=(t,e)=>{if(Or(e.dom))return!1;const n=t.schema.getTextInlineElements();return jt(n,fe(e))&&!Or(e.dom)&&!ra(e.dom)},_l={},my=lo(["pre"]);((t,e)=>{_l[t]||(_l[t]=[]),_l[t].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=Kt(Kt(r,my),(s=>a=>{const i=a.previousSibling;return my(i)&&At(s,i)})(r));Q(o,s=>{((a,i)=>{const l=D(i),c=Le(l).dom;ue(l),be(D(a),[Dt("br",c),Dt("br",c),...Ee(l)])})(s.previousSibling,s)})}})})("pre");const py=["fontWeight","fontStyle","color","fontSize","fontFamily"],gy=(t,e)=>{const n=t.get(e);return at(n)?Ge(n,r=>{return dn(r)&&"span"===r.inline&&Xt((o=r).styles)&&Te(an(o.styles),s=>At(py,s));var o}):k.none()},hy=(t,e)=>lr(e,Y.fromRangeStart(t)).isNone(),by=(t,e)=>!1===nr(e,Y.fromRangeEnd(t)).exists(n=>!We(n.getNode())||nr(e,n).isSome()),vy=t=>e=>RE(e)&&t.isEditable(e),yy=t=>Kt(t.getSelectedBlocks(),vy(t.dom)),Rm=it.each,Om=t=>Et(t)&&!Dr(t)&&!Or(t)&&!ra(t),Cy=(t,e)=>{for(let n=t;n;n=n[e]){if(st(n)&&Sr(n.data))return t;if(Et(n)&&!Dr(n))return n}return t},xy=(t,e,n)=>{const r=pm(t),o=es(e)&&t.dom.isEditable(e),s=es(n)&&t.dom.isEditable(n);if(o&&s){const a=Cy(e,"previousSibling"),i=Cy(n,"nextSibling");if(r.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return t.dom.remove(i),it.each(it.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},wy=(t,e,n,r)=>{var o;if(r&&!1!==e.merge_siblings){const s=null!==(o=xy(t,G0(r),r))&&void 0!==o?o:r;xy(t,s,G0(s,!0))}},Dm=(t,e,n)=>{Rm(t.childNodes,r=>{Om(r)&&(e(r)&&n(r),r.hasChildNodes()&&Dm(r,e,n))})},Sy=(t,e)=>n=>!(!n||!zc(t,n,e)),Ey=(t,e,n)=>r=>{var o,s;t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=t,"SPAN"===(s=r).nodeName&&0===o.getAttribs(s).length&&o.remove(s,!0)},Ea=Bo([{keep:[]},{rename:["name"]},{removed:[]}]),dA=/^(src|href|style)$/,Bm=it.each,sd=kf,ky=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),_y=(t,e,n)=>{let r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(Et(r)){const s=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>s?s:o]}return st(r)&&n&&o>=r.data.length&&(r=new pn(r,t.getBody()).next()||r),st(r)&&!n&&0===o&&(r=new pn(r,t.getBody()).prev()||r),r},Ny=(t,e)=>{const n=e?"firstChild":"lastChild",r=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&r?"TR"===t.nodeName&&r[n]||r:t},Pm=(t,e,n,r)=>{var o;const s=t.create(n,r);return null===(o=e.parentNode)||void 0===o||o.insertBefore(s,e),s.appendChild(e),s},Ay=(t,e,n,r,o)=>{const s=D(e),a=D(t.create(r,o)),i=n?ir(s):Qo(s);return be(a,i),n?(Ft(s,a),Ae(a,s)):(Bt(s,a),Vt(a,s)),a.dom},Ty=(t,e,n)=>{const r=e.parentNode;let o;const s=t.dom,a=In(t);var i;Io(n)&&r===s.getRoot()&&(n.list_block&&sd(e,n.list_block)||Q(xn(e.childNodes),i=>{ri(t,a,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=Pm(s,i,a),s.setAttribs(o,sl(t))):o=null})),Br(i=n)&&dn(i)&&No(Re(i,"mixed"),!0)&&!sd(n.inline,e)||s.remove(e,!0)},Ry=(t,e,n)=>x(t)?{name:e,value:null}:{name:t,value:Rs(e,n)},Oy=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},Dy=(t,e,n,r,o)=>{let s=!1;Bm(n.styles,(a,i)=>{const{name:l,value:c}=Ry(i,a,r),u=_f(c,l);(n.remove_similar||te(c)||!Et(o)||sd(zc(t,o,l),u))&&t.setStyle(e,l,""),s=!0}),s&&Oy(t,e)},By=(t,e,n,r,o)=>{const s=t.dom,a=pm(t),i=t.schema;if(dn(e)&&Eu(i,e.inline)&&sa(i,r)&&r.parentElement===t.getBody())return Ty(t,r,e),Ea.removed();if(!e.ceFalseOverride&&r&&"false"===s.getContentEditableParent(r)||r&&!od(s,r,e)&&(!e.links||"A"!==r.nodeName))return Ea.keep();const l=r,c=e.preserve_attributes;if(dn(e)&&"all"===e.remove&&at(c)){const u=Kt(s.getAttribs(l),f=>At(c,f.name.toLowerCase()));if(s.removeAllAttribs(l),Q(u,f=>s.setAttrib(l,f.name,f.value)),u.length>0)return Ea.rename("span")}if("all"!==e.remove){Dy(s,l,e,n,o),Bm(e.attributes,(f,p)=>{const{name:b,value:h}=Ry(p,f,n);if(e.remove_similar||te(h)||!Et(o)||sd(s.getAttrib(o,b),h)){if("class"===b){const v=s.getAttrib(l,b);if(v){let g="";if(Q(v.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(g+=(g?" ":"")+C)}),g)return void s.setAttrib(l,b,g)}}if(dA.test(b)&&l.removeAttribute("data-mce-"+b),"style"===b&&lo(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(b),void s.setStyle(l,"list-style-type","none");"class"===b&&l.removeAttribute("className"),l.removeAttribute(b)}}),Bm(e.classes,f=>{f=Rs(f,n),Et(o)&&!s.hasClass(o,f)||s.removeClass(l,f)});const u=s.getAttribs(l);for(let f=0;f<u.length;f++)if(!a.isAttributeInternal(u[f].nodeName))return Ea.keep()}return"none"!==e.remove?(Ty(t,l,e),Ea.removed()):Ea.keep()},uA=(t,e,n,r)=>By(t,e,n,r,r).fold(ft(r),o=>(t.dom.createFragment().appendChild(r),t.dom.rename(r,o)),ft(null)),Py=(t,e,n,r,o)=>{(r||t.selection.isEditable())&&((s,a,i,l,c)=>{const u=s.formatter.get(a),f=u[0],p=s.dom,b=s.selection,h=E=>{const N=((A,R,L,P,j)=>{let $;return R.parentNode&&Q(Uc(A.dom,R.parentNode).reverse(),B=>{if(!$&&Et(B)&&"_start"!==B.id&&"_end"!==B.id){const I=Fo(A,B,L,P,j);I&&!1!==I.split&&($=B)}}),$})(s,E,a,i,c);return((A,R,L,P,j,$,B,I)=>{var U,G;let ct,rt;const wt=A.dom;if(L){const Tt=L.parentNode;for(let Pt=P.parentNode;Pt&&Pt!==Tt;Pt=Pt.parentNode){let Ot=wt.clone(Pt,!1);for(let gt=0;gt<R.length&&(Ot=uA(A,R[gt],I,Ot),null!==Ot);gt++);Ot&&(ct&&Ot.appendChild(ct),rt||(rt=Ot),ct=Ot)}B.mixed&&wt.isBlock(L)||(P=null!==(U=wt.split(L,P))&&void 0!==U?U:P),ct&&rt&&(null===(G=j.parentNode)||void 0===G||G.insertBefore(ct,j),rt.appendChild(j),dn(B)&&wy(A,B,0,ct))}return P})(s,u,N,E,E,0,f,i)},v=E=>Te(u,N=>Nl(s,N,i,E,E)),g=E=>{const N=xn(E.childNodes),A=v(E)||Te(u,L=>od(p,E,L)),R=E.parentNode;if(!A&&lt(R)&&Af(f)&&v(R),f.deep&&N.length)for(let L=0;L<N.length;L++)g(N[L]);Q(["underline","line-through","overline"],L=>{Et(E)&&s.dom.getStyle(E,"text-decoration")===L&&E.parentNode&&Z0(p,E.parentNode)===L&&Nl(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:L}},void 0,E)})},C=E=>{const N=p.get(E?"_start":"_end");if(N){let A=N[E?"firstChild":"lastChild"];return Dr(R=A)&&Et(R)&&("_start"===R.id||"_end"===R.id)&&(A=A[E?"firstChild":"lastChild"]),st(A)&&0===A.data.length&&(A=E?N.previousSibling||N.nextSibling:N.nextSibling||N.previousSibling),p.remove(N,!0),A}var R;return null},S=E=>{let N,A,R=ba(p,E,u,E.collapsed);if(f.split){if(R=Xc(R),N=_y(s,R,!0),A=_y(s,R),N!==A){if(N=Ny(N,!0),A=Ny(A,!1),ky(p,N,A)){const P=k.from(N.firstChild).getOr(N);return h(Ay(p,P,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void C(!0)}if(ky(p,A,N)){const P=k.from(A.lastChild).getOr(A);return h(Ay(p,P,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void C(!1)}N=Pm(p,N,"span",{id:"_start","data-mce-type":"bookmark"}),A=Pm(p,A,"span",{id:"_end","data-mce-type":"bookmark"});const L=p.createRng();L.setStartAfter(N),L.setEndBefore(A),gl(p,L,P=>{Q(P,j=>{Dr(j)||Dr(j.parentNode)||h(j)})}),h(N),h(A),N=C(!0),A=C()}else N=A=h(N);R.startContainer=N.parentNode?N.parentNode:N,R.startOffset=p.nodeIndex(N),R.endContainer=A.parentNode?A.parentNode:A,R.endOffset=p.nodeIndex(A)+1}gl(p,R,L=>{Q(L,g)})};if(l){if(pl(l)){const E=p.createRng();E.setStartBefore(l),E.setEndAfter(l),S(E)}else S(l);gb(s,a,l,i)}else b.isCollapsed()&&dn(f)&&!ni(s).length?((t,e,n,r)=>{const o=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),c=l.startContainer,u=l.startOffset;let f=c;st(c)&&(u!==c.data.length&&(a=!0),f=f.parentNode);const p=[];let b;for(;f;){if(Fo(t,f,e,n,r)){b=f;break}f.nextSibling&&(a=!0),p.push(f),f=f.parentNode}if(b)if(a){const h=s.getBookmark();l.collapse(!0);let v=ba(o,l,i,!0);v=Xc(v),t.formatter.remove(e,n,v,r),s.moveToBookmark(h)}else{const h=ha(t.getBody(),b),v=lt(h)?o.getParents(b.parentNode,je,h):[],g=Nm(!1).dom;((E,N,A)=>{var R,L;const P=E.dom,j=P.getParent(A,xt(Sf,E.schema));j&&P.isEmpty(j)?null===(R=A.parentNode)||void 0===R||R.replaceChild(N,A):(($=>{const B=Ln($,"br"),I=Kt((U=>{const G=[];let ct=U.dom;for(;ct;)G.push(D(ct)),ct=ct.lastChild;return G})($).slice(-1),ua);B.length===I.length&&Q(I,ue)})(D(A)),P.isEmpty(A)?null===(L=A.parentNode)||void 0===L||L.replaceChild(N,A):P.insertAfter(N,A))})(t,g,h??b);const C=((E,N,A,R,L,P)=>{const j=E.formatter,$=E.dom,B=Kt(an(j.get()),U=>U!==R&&!fn(U,"removeformat")),I=(U=E,G=A,Cn(B,(rt,wt)=>{const Tt=Nf(U,wt,gt=>{const _t=F=>he(F)||F.length>1&&"%"===F.charAt(0);return Te(["styles","attributes"],F=>Re(gt,F).exists(z=>{const X=at(z)?z:Pa(z);return Te(X,_t)}))});return U.formatter.matchNode(G,wt,{},Tt)?rt.concat([wt]):rt},[]));var U,G;if(Kt(I,U=>!((G,ct,rt)=>{const wt=["inline","block","selector","attributes","styles","classes"],Tt=Pt=>Eo(Pt,(Ot,gt)=>Te(wt,_t=>_t===gt));return Nf(G,ct,Pt=>{const Ot=Tt(Pt);return Nf(G,rt,gt=>{const _t=Tt(gt);return((F,z,X=Xe)=>ie(X).eq(F,z))(Ot,_t)})})})(E,U,R)).length>0){const U=A.cloneNode(!1);return $.add(N,U),j.remove(R,L,U,P),$.remove(U),k.some(U)}return k.none()})(t,g,b,e,n,r),S=cy([...p,...C.toArray(),...v],g);h&&Am(t,h,lt(h)),s.setCursorLocation(S,1),o.isEmpty(b)&&o.remove(b)}})(s,a,i,c):(Y0(s,()=>xf(s,S),E=>dn(f)&&_m(s,a,i,E)),s.nodeChanged()),E=s,A=i,"removeformat"===(N=a)?Q(yy(E.selection),R=>{Q(py,L=>E.dom.setStyle(R,L,"")),Oy(E.dom,R)}):gy(E.formatter,N).each(R=>{Q(yy(E.selection),L=>Dy(E.dom,L,R,A,null))}),gb(s,a,l,i);var E,N,A})(t,e,n,r,o)},Nl=(t,e,n,r,o)=>By(t,e,n,r,o).fold(xe,s=>(t.dom.rename(r,s),!0),je),Ly=it.each,ad=it.each,My=(t,e,n,r)=>{if(ad(n.styles,(o,s)=>{t.setStyle(e,s,Rs(o,r))}),n.styles){const o=t.getAttrib(e,"style");o&&t.setAttrib(e,"data-mce-style",o)}},fA=(t,e,n,r)=>{const o=t.formatter.get(e),s=o[0],a=!r&&t.selection.isCollapsed(),i=t.dom,l=t.selection,c=(h,v=s)=>{he(v.onformat)&&v.onformat(h,v,n,r),My(i,h,v,n),ad(v.attributes,(g,C)=>{i.setAttrib(h,C,Rs(g,n))}),ad(v.classes,g=>{const C=Rs(g,n);i.hasClass(h,C)||i.addClass(h,C)})},u=(h,v)=>{let g=!1;return ad(h,C=>!(!Br(C)||("false"!==i.getContentEditable(v)||C.ceFalseOverride)&&(!lt(C.collapsed)||C.collapsed===a)&&i.is(v,C.selector)&&!Or(v)&&(c(v,C),g=!0,1))),g},p=(h,v,g)=>{const C=[];let S=!0;const E=s.inline||s.block,N=(h=>{if(Nt(h)){const v=i.create(h);return c(v),v}return null})(E);gl(h,v,A=>{let R;const L=P=>{let j=!1,$=S,B=!1;const I=P.parentNode,U=I.nodeName.toLowerCase(),G=h.getContentEditable(P);lt(G)&&($=S,S="true"===G,j=!0,B=Q0(t,P));const ct=S&&!j;if(We(P)&&!((rt,wt,Tt,Pt)=>{if(Yk(rt)&&dn(wt)&&Tt.parentNode){const Ot=eh(rt.schema),gt=((t,e)=>((n,r)=>{const o=n.dom;return o.parentNode?(s=D(o.parentNode),Ge(s.dom.childNodes,i=>(s=>!It(n,s)&&r(s))(D(i))).map(D)):k.none();var s})(t,e).isSome())(D(Tt),_t=>Or(_t.dom));return un(Ot,Pt)&&ns(rt.schema,Tt.parentNode,{skipBogus:!1,includeZwsp:!0})&&!gt}return!1})(t,s,P,U))return R=null,void(Io(s)&&h.remove(P));if(rt=P,Io(wt=s)&&!0===wt.wrapper&&Fo(t,rt,e,n))R=null;else{if(((rt,wt,Tt)=>{const Pt=Io(Ot=s)&&!0!==Ot.wrapper&&Sf(t.schema,rt)&&ri(t,wt,E);var Ot;return Tt&&Pt})(P,U,ct)){const rt=h.rename(P,E);return c(rt),C.push(rt),void(R=null)}if(Br(s)){let rt=u(o,P);if(!rt&&lt(I)&&Af(s)&&(rt=u(o,I)),!dn(s)||rt)return void(R=null)}lt(N)&&((rt,wt,Tt,Pt)=>{const Ot=rt.nodeName.toLowerCase(),gt=ri(t,E,Ot)&&ri(t,wt,E),_t=!g&&st(rt)&&Sc(rt.data),F=Or(rt),z=!dn(s)||!h.isBlock(rt);return(Tt||Pt)&&gt&&!_t&&!F&&z})(P,U,ct,B)?(R||(R=h.clone(N,!1),I.insertBefore(R,P),C.push(R)),B&&j&&(S=$),R.appendChild(P)):(R=null,Q(xn(P.childNodes),L),j&&(S=$),R=null)}var rt,wt};Q(A,L)}),!0===s.links&&Q(C,A=>{const R=L=>{"A"===L.nodeName&&c(L,s),Q(xn(L.childNodes),R)};R(A)}),Q(C,A=>{const R=(L=>{let P=0;return Q(L.childNodes,j=>{var $;lt($=j)&&st($)&&0===$.length||Dr(j)||P++}),P})(A);var L;!(C.length>1)&&h.isBlock(A)||0!==R?(dn(s)||Io(s)&&s.wrapper)&&(s.exact||1!==R||(A=Ge((L=A).childNodes,wf).filter(j=>"false"!==h.getContentEditable(j)&&od(h,j,s)).map(j=>{const $=h.clone(j,!1);return c($),h.replace($,L,!0),h.remove(j,!0),$}).getOr(L)),((L,P,j,$)=>{Ly(P,B=>{var I,U,G;dn(B)&&Ly(L.dom.select(B.inline,$),I=>{Om(I)&&Nl(L,B,j,I,B.exact?I:null)}),I=L.dom,G=$,(U=B).clear_child_styles&&Rm(I.select(U.links?"*:not(a)":"*",G),rt=>{Om(rt)&&I.isEditable(rt)&&Rm(U.styles,(wt,Tt)=>{I.setStyle(rt,Tt,"")})})})})(t,o,n,A),((L,P,j,$,B)=>{const I=B.parentNode;Fo(L,I,j,$)&&Nl(L,P,$,B)||P.merge_with_parents&&I&&L.dom.getParent(I,U=>!!Fo(L,U,j,$)&&(Nl(L,P,$,B),!0))})(t,s,e,n,A),((L,P,j,$)=>{if(P.styles&&P.styles.backgroundColor){const B=Sy(L,"fontSize");Dm($,I=>B(I)&&L.isEditable(I),Ey(L,"backgroundColor",Rs(P.styles.backgroundColor,j)))}})(h,s,n,A),((L,P,j,$)=>{const B=I=>{if(es(I)&&Et(I.parentNode)&&L.isEditable(I)){const U=Z0(L,I.parentNode);L.getStyle(I,"color")&&U?L.setStyle(I,"text-decoration",U):L.getStyle(I,"text-decoration")===U&&L.setStyle(I,"text-decoration",null)}};P.styles&&(P.styles.color||P.styles.textDecoration)&&(it.walk($,B,"childNodes"),B($))})(h,s,0,A),((L,P,j,$)=>{if(dn(P)&&("sub"===P.inline||"sup"===P.inline)){const B=Sy(L,"fontSize");Dm($,U=>B(U)&&L.isEditable(U),Ey(L,"fontSize",""));const I=Kt(L.select("sup"===P.inline?"sub":"sup",$),L.isEditable);L.remove(I,!0)}})(h,s,0,A),wy(t,s,0,A)):h.remove(A,!0)})},b=pl(r)?r:l.getNode();if("false"===i.getContentEditable(b)&&!Q0(t,b))return u(o,r=b),void pb(t,e,r,n);if(s){if(r)if(pl(r)){if(!u(o,r)){const h=i.createRng();h.setStartBefore(r),h.setEndAfter(r),p(i,ba(i,h,o),!0)}}else p(i,r,!0);else a&&dn(s)&&!ni(t).length?((h,v,g)=>{let C;const S=h.selection,E=h.formatter.get(v);if(!E)return;const N=S.getRng();let A=N.startOffset;const R=N.startContainer.nodeValue;C=ha(h.getBody(),S.getStart());const L=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(R&&A>0&&A<R.length&&L.test(R.charAt(A))&&L.test(R.charAt(A-1))){const $=S.getBookmark();N.collapse(!0);let B=ba(h.dom,N,E);B=Xc(B),h.formatter.apply(v,g,B),S.moveToBookmark($)}else{let $=C?iy(C):null;C&&$?.data===kl||(P=h.getDoc(),j=Nm(!0).dom,C=P.importNode(j,!0),$=C.firstChild,N.insertNode(C),A=1),h.formatter.apply(v,g,C),S.setCursorLocation($,A)}var P,j})(t,e,n):(l.setRng(ym(l.getRng())),Y0(t,()=>{xf(t,(h,v)=>{const g=v?h:ba(i,h,o);p(i,g,!1)})},je),t.nodeChanged()),gy(t.formatter,e).each(h=>{var v;Q(Kt((g=>{const C=g.getSelectedBlocks(),S=g.getRng();if(g.isCollapsed())return[];if(1===C.length)return hy(S,C[0])&&by(S,C[0])?C:[];{const E=Sn(C).filter(R=>hy(S,R)).toArray(),N=to(C).filter(R=>by(S,R)).toArray(),A=C.slice(1,-1);return E.concat(A).concat(N)}})(v=t.selection),vy(v.dom)),v=>My(i,v,h,n))});v=t,jt(_l,h=e)&&Q(_l[h],g=>{g(v)})}var h,v;pb(t,e,r,n)},Iy=(t,e,n,r)=>{(r||t.selection.isEditable())&&fA(t,e,n,r)},Fy=t=>jt(t,"vars"),jy=t=>t.selection.getStart(),zy=(t,e,n,r,o)=>Ur(e,s=>{const a=t.formatter.matchNode(s,n,o??{},r);return!Ie(a)},s=>!!sy(t,s,n)||!r&&lt(t.formatter.matchNode(s,n,o,!0))),Uy=(t,e)=>{const n=e??jy(t);return Kt(Uc(t.dom,n),r=>Et(r)&&!ra(r))},Hy=(t,e,n)=>{const r=Uy(t,e);we(n,(o,s)=>{const a=i=>{const l=zy(t,r,s,i.similar,Fy(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const u=l.getOr(e);Fy(i)?i.callback(c,{node:u,format:s,parents:r}):Q(i.callbacks,f=>f(c,{node:u,format:s,parents:r}))}};Q([o.withSimilar,o.withoutSimilar],a),Q(o.withVars,a)})},qy=it.explode,$y=()=>{const t={};return{addFilter:(e,n)=>{Q(qy(e),r=>{jt(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>Pa(t),removeFilter:(e,n)=>{Q(qy(e),r=>{if(jt(t,r))if(lt(n)){const o=t[r],s=Kt(o.callbacks,a=>a!==n);s.length>0?o.callbacks=s:delete t[r]}else delete t[r]})}}},Lm=t=>{const[e,...n]=t.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(o){const s=";base64"===o[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(r):decodeURIComponent(r);return k.some({type:o[1],data:a,base64Encoded:s})}return k.none()},Wy=(t,e,n=!0)=>{let r=e;if(n)try{r=atob(e)}catch{return k.none()}const o=new Uint8Array(r.length);for(let s=0;s<o.length;s++)o[s]=r.charCodeAt(s);return k.some(new Blob([o],{type:t}))},Vy=t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(t)});let pA=0;const Ky=(t,e,n)=>Lm(t).bind(({data:r,type:o,base64Encoded:s})=>{if(e&&!s)return k.none();{const a=s?r:btoa(r);return n(a,o)}}),Xy=(t,e,n)=>{const r=t.create("blobid"+pA++,e,n);return t.add(r),r},Yy=(t,e,n=!1)=>Ky(e,n,(r,o)=>k.from(t.getByData(r,o)).orThunk(()=>Wy(o,r).map(s=>Xy(t,s,r)))),gA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,hA=t=>k.from(t.match(gA)).bind(e=>Hs(e,1)).map(e=>Ve(e,"www.")?e.substring(4):e),Gy=(t,e)=>{k.from(t.attr("src")).bind(hA).forall(n=>!At(e,n))&&t.attr("sandbox","")},Mm=(t,e)=>Ve(t,`${e}/`),{entries:Qy,setPrototypeOf:Zy,isFrozen:bA,getPrototypeOf:vA,getOwnPropertyDescriptor:yA}=Object;let{freeze:cr,seal:po,create:CA}=Object,{apply:Im,construct:Fm}=typeof Reflect<"u"&&Reflect;Im||(Im=function(t,e,n){return t.apply(e,n)}),cr||(cr=function(t){return t}),po||(po=function(t){return t}),Fm||(Fm=function(t,e){return new t(...e)});const xA=Xr(Array.prototype.forEach),wA=Xr(Array.prototype.pop),Al=Xr(Array.prototype.push),id=Xr(String.prototype.toLowerCase),jm=Xr(String.prototype.toString),SA=Xr(String.prototype.match),go=Xr(String.prototype.replace),EA=Xr(String.prototype.indexOf),kA=Xr(String.prototype.trim),Mr=Xr(RegExp.prototype.test),Tl=(Jy=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Fm(Jy,e)});var Jy;function Xr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Im(t,e,r)}}function ye(t,e,n){var r;n=null!==(r=n)&&void 0!==r?r:id,Zy&&Zy(t,null);let o=e.length;for(;o--;){let s=e[o];if("string"==typeof s){const a=n(s);a!==s&&(bA(e)||(e[o]=a),s=a)}t[s]=!0}return t}function ii(t){const e=CA(null);for(const[n,r]of Qy(t))e[n]=r;return e}function ld(t,e){for(;null!==t;){const n=yA(t,e);if(n){if(n.get)return Xr(n.get);if("function"==typeof n.value)return Xr(n.value)}t=vA(t)}return function(n){return console.warn("fallback value for",n),null}}const tC=cr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zm=cr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Um=cr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_A=cr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hm=cr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),NA=cr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),eC=cr(["#text"]),nC=cr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),qm=cr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),rC=cr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),cd=cr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),AA=po(/\{\{[\w\W]*|[\w\W]*\}\}/gm),TA=po(/<%[\w\W]*|[\w\W]*%>/gm),RA=po(/\${[\w\W]*}/gm),OA=po(/^data-[\-\w.\u00B7-\uFFFF]/),DA=po(/^aria-[\-\w]+$/),oC=po(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),BA=po(/^(?:\w+script|data):/i),PA=po(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sC=po(/^html$/i);var aC=Object.freeze({__proto__:null,MUSTACHE_EXPR:AA,ERB_EXPR:TA,TMPLIT_EXPR:RA,DATA_ATTR:OA,ARIA_ATTR:DA,IS_ALLOWED_URI:oC,IS_SCRIPT_OR_DATA:BA,ATTR_WHITESPACE:PA,DOCTYPE_NAME:sC}),iC=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=V=>t(V);if(n.version="3.0.5",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;const r=e.document,o=r.currentScript;let{document:s}=e;const{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:c,NodeFilter:u,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:b,trustedTypes:h}=e,v=c.prototype,g=ld(v,"cloneNode"),C=ld(v,"nextSibling"),S=ld(v,"childNodes"),E=ld(v,"parentNode");if("function"==typeof i){const V=s.createElement("template");V.content&&V.content.ownerDocument&&(s=V.content.ownerDocument)}let N,A="";const{implementation:R,createNodeIterator:L,createDocumentFragment:P,getElementsByTagName:j}=s,{importNode:$}=r;let B={};n.isSupported="function"==typeof Qy&&"function"==typeof E&&R&&void 0!==R.createHTMLDocument;const{MUSTACHE_EXPR:I,ERB_EXPR:U,TMPLIT_EXPR:G,DATA_ATTR:ct,ARIA_ATTR:rt,IS_SCRIPT_OR_DATA:wt,ATTR_WHITESPACE:Tt}=aC;let{IS_ALLOWED_URI:Pt}=aC,Ot=null;const gt=ye({},[...tC,...zm,...Um,...Hm,...eC]);let _t=null;const F=ye({},[...nC,...qm,...rC,...cd]);let z=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),X=null,Z=null,ht=!0,mt=!0,zt=!1,Gt=!0,ne=!1,ke=!1,ze=!1,yr=!1,vt=!1,Zt=!1,ce=!1,Jt=!0,ve=!1,Be=!0,pt=!1,Lt={},Ce=null;const Pe=ye({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let on=null;const or=ye({},["audio","video","img","source","image","track"]);let Gr=null;const jn=ye({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dr="http://www.w3.org/1998/Math/MathML",sn="http://www.w3.org/2000/svg",Cr="http://www.w3.org/1999/xhtml";let qo=Cr,ls=!1,Da=null;const xg=ye({},[dr,sn,Cr],jm);let Qr;const Fs=["application/xhtml+xml","text/html"];let yn,Yn=null;const wi=s.createElement("form"),js=function(V){return V instanceof RegExp||V instanceof Function},Si=function(V){if(!Yn||Yn!==V){if(V&&"object"==typeof V||(V={}),V=ii(V),Qr=Qr=-1===Fs.indexOf(V.PARSER_MEDIA_TYPE)?"text/html":V.PARSER_MEDIA_TYPE,yn="application/xhtml+xml"===Qr?jm:id,Ot="ALLOWED_TAGS"in V?ye({},V.ALLOWED_TAGS,yn):gt,_t="ALLOWED_ATTR"in V?ye({},V.ALLOWED_ATTR,yn):F,Da="ALLOWED_NAMESPACES"in V?ye({},V.ALLOWED_NAMESPACES,jm):xg,Gr="ADD_URI_SAFE_ATTR"in V?ye(ii(jn),V.ADD_URI_SAFE_ATTR,yn):jn,on="ADD_DATA_URI_TAGS"in V?ye(ii(or),V.ADD_DATA_URI_TAGS,yn):or,Ce="FORBID_CONTENTS"in V?ye({},V.FORBID_CONTENTS,yn):Pe,X="FORBID_TAGS"in V?ye({},V.FORBID_TAGS,yn):{},Z="FORBID_ATTR"in V?ye({},V.FORBID_ATTR,yn):{},Lt="USE_PROFILES"in V&&V.USE_PROFILES,ht=!1!==V.ALLOW_ARIA_ATTR,mt=!1!==V.ALLOW_DATA_ATTR,zt=V.ALLOW_UNKNOWN_PROTOCOLS||!1,Gt=!1!==V.ALLOW_SELF_CLOSE_IN_ATTR,ne=V.SAFE_FOR_TEMPLATES||!1,ke=V.WHOLE_DOCUMENT||!1,vt=V.RETURN_DOM||!1,Zt=V.RETURN_DOM_FRAGMENT||!1,ce=V.RETURN_TRUSTED_TYPE||!1,yr=V.FORCE_BODY||!1,Jt=!1!==V.SANITIZE_DOM,ve=V.SANITIZE_NAMED_PROPS||!1,Be=!1!==V.KEEP_CONTENT,pt=V.IN_PLACE||!1,Pt=V.ALLOWED_URI_REGEXP||oC,qo=V.NAMESPACE||Cr,z=V.CUSTOM_ELEMENT_HANDLING||{},V.CUSTOM_ELEMENT_HANDLING&&js(V.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=V.CUSTOM_ELEMENT_HANDLING.tagNameCheck),V.CUSTOM_ELEMENT_HANDLING&&js(V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),V.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(z.allowCustomizedBuiltInElements=V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ne&&(mt=!1),Zt&&(vt=!0),Lt&&(Ot=ye({},[...eC]),_t=[],!0===Lt.html&&(ye(Ot,tC),ye(_t,nC)),!0===Lt.svg&&(ye(Ot,zm),ye(_t,qm),ye(_t,cd)),!0===Lt.svgFilters&&(ye(Ot,Um),ye(_t,qm),ye(_t,cd)),!0===Lt.mathMl&&(ye(Ot,Hm),ye(_t,rC),ye(_t,cd))),V.ADD_TAGS&&(Ot===gt&&(Ot=ii(Ot)),ye(Ot,V.ADD_TAGS,yn)),V.ADD_ATTR&&(_t===F&&(_t=ii(_t)),ye(_t,V.ADD_ATTR,yn)),V.ADD_URI_SAFE_ATTR&&ye(Gr,V.ADD_URI_SAFE_ATTR,yn),V.FORBID_CONTENTS&&(Ce===Pe&&(Ce=ii(Ce)),ye(Ce,V.FORBID_CONTENTS,yn)),Be&&(Ot["#text"]=!0),ke&&ye(Ot,["html","head","body"]),Ot.table&&(ye(Ot,["tbody"]),delete X.tbody),V.TRUSTED_TYPES_POLICY){if("function"!=typeof V.TRUSTED_TYPES_POLICY.createHTML)throw Tl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof V.TRUSTED_TYPES_POLICY.createScriptURL)throw Tl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=V.TRUSTED_TYPES_POLICY,A=N.createHTML("")}else void 0===N&&(N=function(Rt,$t){if("object"!=typeof Rt||"function"!=typeof Rt.createPolicy)return null;let _e=null;const Fe="data-tt-policy-suffix";$t&&$t.hasAttribute(Fe)&&(_e=$t.getAttribute(Fe));const He="dompurify"+(_e?"#"+_e:"");try{return Rt.createPolicy(He,{createHTML:Ue=>Ue,createScriptURL:Ue=>Ue})}catch{return console.warn("TrustedTypes policy "+He+" could not be created."),null}}(h,o)),null!==N&&"string"==typeof A&&(A=N.createHTML(""));cr&&cr(V),Yn=V}},hE=ye({},["mi","mo","mn","ms","mtext"]),bE=ye({},["foreignobject","desc","title","annotation-xml"]),ND=ye({},["title","style","font","a","script"]),ru=ye({},zm);ye(ru,Um),ye(ru,_A);const wg=ye({},Hm);ye(wg,NA);const Ba=function(V){Al(n.removed,{element:V});try{V.parentNode.removeChild(V)}catch{V.remove()}},Ql=function(V,Rt){try{Al(n.removed,{attribute:Rt.getAttributeNode(V),from:Rt})}catch{Al(n.removed,{attribute:null,from:Rt})}if(Rt.removeAttribute(V),"is"===V&&!_t[V])if(vt||Zt)try{Ba(Rt)}catch{}else try{Rt.setAttribute(V,"")}catch{}},vE=function(V){let Rt,$t;if(yr)V="<remove></remove>"+V;else{const He=SA(V,/^[\r\n\t ]+/);$t=He&&He[0]}"application/xhtml+xml"===Qr&&qo===Cr&&(V='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+V+"</body></html>");const _e=N?N.createHTML(V):V;if(qo===Cr)try{Rt=(new b).parseFromString(_e,Qr)}catch{}if(!Rt||!Rt.documentElement){Rt=R.createDocument(qo,"template",null);try{Rt.documentElement.innerHTML=ls?A:_e}catch{}}const Fe=Rt.body||Rt.documentElement;return V&&$t&&Fe.insertBefore(s.createTextNode($t),Fe.childNodes[0]||null),qo===Cr?j.call(Rt,ke?"html":"body")[0]:ke?Rt.documentElement:Fe},yE=function(V){return L.call(V.ownerDocument||V,V,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},ou=function(V){return"object"==typeof l?V instanceof l:V&&"object"==typeof V&&"number"==typeof V.nodeType&&"string"==typeof V.nodeName},cs=function(V,Rt,$t){B[V]&&xA(B[V],_e=>{_e.call(n,Rt,$t,Yn)})},CE=function(V){let Rt;if(cs("beforeSanitizeElements",V,null),($t=V)instanceof p&&("string"!=typeof $t.nodeName||"string"!=typeof $t.textContent||"function"!=typeof $t.removeChild||!($t.attributes instanceof f)||"function"!=typeof $t.removeAttribute||"function"!=typeof $t.setAttribute||"string"!=typeof $t.namespaceURI||"function"!=typeof $t.insertBefore||"function"!=typeof $t.hasChildNodes))return Ba(V),!0;var $t;const _e=yn(V.nodeName);if(cs("uponSanitizeElement",V,{tagName:_e,allowedTags:Ot}),V.hasChildNodes()&&!ou(V.firstElementChild)&&(!ou(V.content)||!ou(V.content.firstElementChild))&&Mr(/<[/\w]/g,V.innerHTML)&&Mr(/<[/\w]/g,V.textContent))return Ba(V),!0;if(!Ot[_e]||X[_e]){if(!X[_e]&&wE(_e)&&(z.tagNameCheck instanceof RegExp&&Mr(z.tagNameCheck,_e)||z.tagNameCheck instanceof Function&&z.tagNameCheck(_e)))return!1;if(Be&&!Ce[_e]){const Fe=E(V)||V.parentNode,He=S(V)||V.childNodes;if(He&&Fe)for(let Ue=He.length-1;Ue>=0;--Ue)Fe.insertBefore(g(He[Ue],!0),C(V))}return Ba(V),!0}return V instanceof c&&!function(Fe){let He=E(Fe);He&&He.tagName||(He={namespaceURI:qo,tagName:"template"});const Ue=id(Fe.tagName),Ke=id(He.tagName);return!!Da[Fe.namespaceURI]&&(Fe.namespaceURI===sn?He.namespaceURI===Cr?"svg"===Ue:He.namespaceURI===dr?"svg"===Ue&&("annotation-xml"===Ke||hE[Ke]):!!ru[Ue]:Fe.namespaceURI===dr?He.namespaceURI===Cr?"math"===Ue:He.namespaceURI===sn?"math"===Ue&&bE[Ke]:!!wg[Ue]:Fe.namespaceURI===Cr?!(He.namespaceURI===sn&&!bE[Ke])&&!(He.namespaceURI===dr&&!hE[Ke])&&!wg[Ue]&&(ND[Ue]||!ru[Ue]):!("application/xhtml+xml"!==Qr||!Da[Fe.namespaceURI]))}(V)?(Ba(V),!0):"noscript"!==_e&&"noembed"!==_e&&"noframes"!==_e||!Mr(/<\/no(script|embed|frames)/i,V.innerHTML)?(ne&&3===V.nodeType&&(Rt=V.textContent,Rt=go(Rt,I," "),Rt=go(Rt,U," "),Rt=go(Rt,G," "),V.textContent!==Rt&&(Al(n.removed,{element:V.cloneNode()}),V.textContent=Rt)),cs("afterSanitizeElements",V,null),!1):(Ba(V),!0)},xE=function(V,Rt,$t){if(Jt&&("id"===Rt||"name"===Rt)&&($t in s||$t in wi))return!1;if((!mt||Z[Rt]||!Mr(ct,Rt))&&(!ht||!Mr(rt,Rt)))if(!_t[Rt]||Z[Rt]){if(!(wE(V)&&(z.tagNameCheck instanceof RegExp&&Mr(z.tagNameCheck,V)||z.tagNameCheck instanceof Function&&z.tagNameCheck(V))&&(z.attributeNameCheck instanceof RegExp&&Mr(z.attributeNameCheck,Rt)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(Rt))||"is"===Rt&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&Mr(z.tagNameCheck,$t)||z.tagNameCheck instanceof Function&&z.tagNameCheck($t))))return!1}else if(!Gr[Rt]&&!Mr(Pt,go($t,Tt,""))&&("src"!==Rt&&"xlink:href"!==Rt&&"href"!==Rt||"script"===V||0!==EA($t,"data:")||!on[V])&&(!zt||Mr(wt,go($t,Tt,"")))&&$t)return!1;return!0},wE=function(V){return V.indexOf("-")>0},SE=function(V){let Rt,$t,_e,Fe;cs("beforeSanitizeAttributes",V,null);const{attributes:He}=V;if(!He)return;const Ue={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_t};for(Fe=He.length;Fe--;){Rt=He[Fe];const{name:Ke,namespaceURI:Ei}=Rt;$t="value"===Ke?Rt.value:kA(Rt.value);const TD=$t;if(_e=yn(Ke),Ue.attrName=_e,Ue.attrValue=$t,Ue.keepAttr=!0,Ue.forceKeepAttr=void 0,cs("uponSanitizeAttribute",V,Ue),$t=Ue.attrValue,Ue.forceKeepAttr)continue;if(!Ue.keepAttr){Ql(Ke,V);continue}if(!Gt&&Mr(/\/>/i,$t)){Ql(Ke,V);continue}ne&&($t=go($t,I," "),$t=go($t,U," "),$t=go($t,G," "));const EE=yn(V.nodeName);if(xE(EE,_e,$t)){if(!ve||"id"!==_e&&"name"!==_e||(Ql(Ke,V),$t="user-content-"+$t),N&&"object"==typeof h&&"function"==typeof h.getAttributeType&&!Ei)switch(h.getAttributeType(EE,_e)){case"TrustedHTML":$t=N.createHTML($t);break;case"TrustedScriptURL":$t=N.createScriptURL($t)}if($t!==TD)try{Ei?V.setAttributeNS(Ei,Ke,$t):V.setAttribute(Ke,$t)}catch{Ql(Ke,V)}}else Ql(Ke,V)}cs("afterSanitizeAttributes",V,null)},AD=function V(Rt){let $t;const _e=yE(Rt);for(cs("beforeSanitizeShadowDOM",Rt,null);$t=_e.nextNode();)cs("uponSanitizeShadowNode",$t,null),CE($t)||($t.content instanceof a&&V($t.content),SE($t));cs("afterSanitizeShadowDOM",Rt,null)};return n.sanitize=function(V){let Rt,$t,_e,Fe,He=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ls=!V,ls&&(V="\x3c!--\x3e"),"string"!=typeof V&&!ou(V)){if("function"!=typeof V.toString)throw Tl("toString is not a function");if("string"!=typeof(V=V.toString()))throw Tl("dirty is not a string, aborting")}if(!n.isSupported)return V;if(ze||Si(He),n.removed=[],"string"==typeof V&&(pt=!1),pt){if(V.nodeName){const Ei=yn(V.nodeName);if(!Ot[Ei]||X[Ei])throw Tl("root node is forbidden and cannot be sanitized in-place")}}else if(V instanceof l)Rt=vE("\x3c!----\x3e"),$t=Rt.ownerDocument.importNode(V,!0),1===$t.nodeType&&"BODY"===$t.nodeName||"HTML"===$t.nodeName?Rt=$t:Rt.appendChild($t);else{if(!vt&&!ne&&!ke&&-1===V.indexOf("<"))return N&&ce?N.createHTML(V):V;if(Rt=vE(V),!Rt)return vt?null:ce?A:""}Rt&&yr&&Ba(Rt.firstChild);const Ue=yE(pt?V:Rt);for(;_e=Ue.nextNode();)CE(_e)||(_e.content instanceof a&&AD(_e.content),SE(_e));if(pt)return V;if(vt){if(Zt)for(Fe=P.call(Rt.ownerDocument);Rt.firstChild;)Fe.appendChild(Rt.firstChild);else Fe=Rt;return(_t.shadowroot||_t.shadowrootmode)&&(Fe=$.call(r,Fe,!0)),Fe}let Ke=ke?Rt.outerHTML:Rt.innerHTML;return ke&&Ot["!doctype"]&&Rt.ownerDocument&&Rt.ownerDocument.doctype&&Rt.ownerDocument.doctype.name&&Mr(sC,Rt.ownerDocument.doctype.name)&&(Ke="<!DOCTYPE "+Rt.ownerDocument.doctype.name+">\n"+Ke),ne&&(Ke=go(Ke,I," "),Ke=go(Ke,U," "),Ke=go(Ke,G," ")),N&&ce?N.createHTML(Ke):Ke},n.setConfig=function(V){Si(V),ze=!0},n.clearConfig=function(){Yn=null,ze=!1},n.isValidAttribute=function(V,Rt,$t){Yn||Si({});const _e=yn(V),Fe=yn(Rt);return xE(_e,Fe,$t)},n.addHook=function(V,Rt){"function"==typeof Rt&&(B[V]=B[V]||[],Al(B[V],Rt))},n.removeHook=function(V){if(B[V])return wA(B[V])},n.removeHooks=function(V){B[V]&&(B[V]=[])},n.removeAllHooks=function(){B={}},n}();const lC=it.each,MA=it.trim,IA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],FA={ftp:21,http:80,https:443,mailto:25},jA=["img","video"],cC=(t,e,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!t.allow_html_data_urls&&(/^data:image\//i.test(r)?(s=n,(lt(o=t.allow_svg_data_urls)?!o:!lt(s)||!At(jA,s))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,s};class Yr{static parseDataUri(e){let n;const r=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(e,n,r={}){if(r.allow_script_urls)return!0;{const o=ws.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!cC(r,o,n)}}static getDocumentBaseUrl(e){var n;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,n={}){this.path="",this.directory="",e=MA(e),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=r?r.path:new Yr(document.location.href).directory;if(""===r?.protocol)e="//mce_host"+o.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&lC(IA,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),o[i]=c}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),s&&(o.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new Yr(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const r=new Yr(e,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?FA[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let r,o,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(r=0,o=i.length;r<o;r++)if(r>=l.length||i[r]!==l[r]){s=r+1;break}if(i.length<l.length)for(r=0,o=l.length;r<o;r++)if(r>=i.length||i[r]!==l[r]){s=r+1;break}if(1===s)return n;for(r=0,o=i.length-(s-1);r<o;r++)a+="../";for(r=s-1,o=l.length;r<o;r++)a+=r!==s-1?"/"+l[r]:l[r];return a}toAbsPath(e,n){let r=0;const o=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];lC(s,f=>{f&&i.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)0!==a[f].length&&"."!==a[f]&&(".."!==a[f]?r>0?r--:l.push(a[f]):r++);const c=i.length-r;let u;return u=c<=0?Jr(l).join("/"):i.slice(0,c).join("/")+"/"+Jr(l).join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const zA=it.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),$m="data-mce-type";let dC=0;const uC=(t,e,n,r,o)=>{var s,a,i,l;const c=e.validate,u=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(s=t.nodeValue)&&void 0!==s?s:"")&&(t.nodeValue=" "+t.nodeValue);const f=null!==(a=o?.tagName)&&void 0!==a?a:t.nodeName.toLowerCase();if("html"!==r&&n.isValid(r))return void(lt(o)&&(o.allowedTags[f]=!0));if(1!==t.nodeType||"body"===f)return;const p=D(t),b=d(p,$m),h=tr(p,"data-mce-bogus");if(!b&&Nt(h))return void("all"===h?ue(p):Ye(p));const v=n.getElementRule(f);if(!c||v){if(lt(o)&&(o.allowedTags[f]=!0),c&&v&&!b){if(Q(null!==(i=v.attributesForced)&&void 0!==i?i:[],g=>{Ze(p,g.name,"{$uid}"===g.value?"mce_"+dC++:g.value)}),Q(null!==(l=v.attributesDefault)&&void 0!==l?l:[],g=>{d(p,g.name)||Ze(p,g.name,"{$uid}"===g.value?"mce_"+dC++:g.value)}),v.attributesRequired&&!Te(v.attributesRequired,g=>d(p,g))||v.removeEmptyAttrs&&(g=>{const C=g.dom.attributes;return null==C||0===C.length})(p))return void Ye(p);v.outputName&&v.outputName!==f&&((g,C)=>{const S=((N,A)=>{const R=Dt(A),L=y(N);return no(R,L),R})(g,C);Bt(g,S);const E=Ee(g);be(S,E),ue(g)})(p,v.outputName)}}else jt(u,f)?ue(p):Ye(p)},fC=(t,e,n,r,o,s)=>"html"!==n&&!oa(r)||!(o in zA&&cC(t,s,r))&&(!t.validate||e.isValid(r,o)||Ve(o,"data-")||Ve(o,"aria-")),mC=(t,e)=>t.hasAttribute($m)&&("id"===e||"class"===e||"style"===e),pC=(t,e)=>t in e.getBoolAttrs(),UA=(t,e,n,r)=>{const{attributes:o}=t;for(let s=o.length-1;s>=0;s--){const a=o[s],i=a.name,l=a.value;fC(e,n,r,t.tagName.toLowerCase(),i,l)||mC(t,i)?pC(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},qA=t=>{const n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`)};return iC().sanitize(t,n),t.innerHTML},gC=it.makeMap,hC=it.extend,bC=(t,e,n,r)=>{const o=t.name,s=o in n&&"title"!==o&&"textarea"!==o,a=e.childNodes;for(let i=0,l=a.length;i<l;i++){const c=a[i],u=new Kn(c.nodeName.toLowerCase(),c.nodeType);if(Et(c)){const f=c.attributes;for(let p=0,b=f.length;p<b;p++){const h=f[p];u.attr(h.name,h.value)}oa(u.name)&&(r(c),u.value=c.innerHTML)}else st(c)?(u.value=c.data,s&&(u.raw=!0)):(xs(c)||NE(c)||AE(c))&&(u.value=c.data);oa(u.name)||bC(u,c,n,r),t.append(u)}},li=(t={},e=Ss())=>{const n=$y(),r=$y(),o={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((v,g)=>{const C=(()=>{let S=[];const E=()=>S[S.length-1];return{track:N=>{Cu(N)&&S.push(N);let A=E();return A&&!A.contains(N)&&(S.pop(),A=E()),Lg(A)},current:()=>Lg(E()),reset:()=>{S=[]}}})();if(v.sanitize){const S=((t,e,n)=>{const r=iC();return r.addHook("uponSanitizeElement",(o,s)=>{uC(o,t,e,n.track(o),s)}),r.addHook("uponSanitizeAttribute",(o,s)=>{((a,i,l,c,u)=>{const f=a.tagName.toLowerCase(),{attrName:p,attrValue:b}=u;u.keepAttr=fC(i,l,c,f,p,b),u.keepAttr?(u.allowedAttributes[p]=!0,pC(p,l)&&(u.attrValue=p),i.allow_svg_data_urls&&Ve(b,"data:image/svg+xml")&&(u.forceKeepAttr=!0)):mC(a,p)&&(u.forceKeepAttr=!0)})(o,t,e,n.current(),s)}),r})(v,g,C);return{sanitizeHtmlElement:(N,A)=>{S.sanitize(N,((R,L)=>{const P={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return P.PARSER_MEDIA_TYPE=L,R.allow_script_urls?P.ALLOWED_URI_REGEXP=/.*/:R.allow_html_data_urls&&(P.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),P})(v,A)),S.removed=[],C.reset()},sanitizeNamespaceElement:qA}}return{sanitizeHtmlElement:(S,E)=>{const N=document.createNodeIterator(S,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let A;for(;A=N.nextNode();){const R=C.track(A);uC(A,v,g,R),Et(A)&&UA(A,v,g,R)}C.reset()},sanitizeNamespaceElement:St}})(o,e),l=n.getFilters,f=r.getFilters,b=(v,g)=>{const C=Nt(g.attr($m)),S=1===g.type&&!jt(v,g.name)&&!_u(e,g)&&!oa(g.name);return 3===g.type||S&&!C},h={schema:e,addAttributeFilter:r.addFilter,getAttributeFilters:f,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(v,g={})=>{var C;const S=o.validate,E=null!==(C=g.context)&&void 0!==C?C:o.root_name,N=((U,G,ct="html")=>{const rt="xhtml"===ct?"application/xhtml+xml":"text/html",wt=jt(e.getSpecialElements(),G.toLowerCase()),Tt=wt?`<${G}>${U}</${G}>`:U,Ot=s.parseFromString("xhtml"===ct?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Tt}</body></html>`:`<body>${Tt}</body>`,rt).body;return a.sanitizeHtmlElement(Ot,rt),wt?Ot.firstChild:Ot})(v,E,g.format);wu(e,N);const A=new Kn(E,11);bC(A,N,e.getSpecialElements(),a.sanitizeNamespaceElement),N.innerHTML="";const[R,L]=((U,G,ct,rt)=>{const wt=ct.validate,Tt=G.getNonEmptyElements(),Pt=G.getWhitespaceElements(),Ot=hC(gC("script,style,head,html,body,title,meta,param"),G.getBlockElements()),gt=eh(G),_t=/[ \t\r\n]+/g,F=/^[ \t\r\n]+/,z=/[ \t\r\n]+$/,X=mt=>{let zt=mt.parent;for(;lt(zt);){if(zt.name in Pt)return!0;zt=zt.parent}return!1},Z=mt=>mt.name in Ot||_u(G,mt)||oa(mt.name)&&mt.parent===U,ht=(mt,zt)=>!lt(zt?mt.prev:mt.next)&&!Se(mt.parent)&&Z(mt.parent)&&(mt.parent!==U||!0===rt.isRootContent);return[mt=>{var zt,ne,ke;if(3===mt.type&&!X(mt)){let Gt=null!==(zt=mt.value)&&void 0!==zt?zt:"";Gt=Gt.replace(_t," "),ke=Z,(lt(ne=mt.prev)&&(ke(ne)||"br"===ne.name)||ht(mt,!0))&&(Gt=Gt.replace(F,"")),0===Gt.length?mt.remove():mt.value=Gt}},mt=>{var zt,ke,ze;if(1===mt.type){const Gt=G.getElementRule(mt.name);if(wt&&Gt){const ne=El(G,Tt,Pt,mt);Gt.paddInEmptyBlock&&ne&&(ke=>{let ze=ke;for(;lt(ze);){if(ze.name in gt)return El(G,Tt,Pt,ze);ze=ze.parent}return!1})(mt)?gm(ct,rt,Z,mt):Gt.removeEmpty&&ne?Z(mt)?mt.remove():mt.unwrap():Gt.paddEmpty&&(ne||ny(ke=mt,"#text")&&(null===(ze=ke?.firstChild)||void 0===ze?void 0:ze.value)===gn)&&gm(ct,rt,Z,mt)}}else if(3===mt.type&&!X(mt)){let Gt=null!==(zt=mt.value)&&void 0!==zt?zt:"";(mt.next&&Z(mt.next)||ht(mt,!1))&&(Gt=Gt.replace(z,"")),0===Gt.length?mt.remove():mt.value=Gt}}]})(A,e,o,g),P=[],$={nodes:{},attributes:{}},B=U=>Jv(l(),f(),U,$);if(((U,G,ct)=>{const rt=[];for(let wt=U,Tt=wt;wt;Tt=wt,wt=wt.walk()){const Pt=wt;Q(G,Ot=>Ot(Pt)),Se(Pt.parent)&&Pt!==U?wt=Tt:rt.push(Pt)}for(let wt=rt.length-1;wt>=0;wt--){const Tt=rt[wt];Q(ct,Pt=>Pt(Tt))}})(A,[R,B],[L,S?U=>{return ct=P,void(vm(e,G=U)&&ct.push(G));var G,ct}:St]),P.reverse(),S&&P.length>0)if(g.context){const{pass:U,fail:G}=zr(P,ct=>ct.parent===A);bm(G,e,A,B),g.invalid=U.length>0}else bm(P,e,A,B);const I=((U,G)=>{var ct;const rt=null!==(ct=G.forced_root_block)&&void 0!==ct?ct:U.forced_root_block;return!1===rt?"":!0===rt?"p":rt})(o,g);return I&&("body"===A.name||g.isRootContent)&&((U,G)=>{const ct=hC(gC("script,style,head,html,body,title,meta,param"),e.getBlockElements()),rt=/^[ \t\r\n]+/,wt=/[ \t\r\n]+$/;let Tt=U.firstChild,Pt=null;const Ot=gt=>{var _t,F;gt&&(Tt=gt.firstChild,Tt&&3===Tt.type&&(Tt.value=null===(_t=Tt.value)||void 0===_t?void 0:_t.replace(rt,"")),Tt=gt.lastChild,Tt&&3===Tt.type&&(Tt.value=null===(F=Tt.value)||void 0===F?void 0:F.replace(wt,"")))};if(e.isValidChild(U.name,G.toLowerCase())){for(;Tt;){const gt=Tt.next;b(ct,Tt)?(Pt||(Pt=new Kn(G,1),Pt.attr(o.forced_root_block_attrs),U.insert(Pt,Tt)),Pt.append(Tt)):(Ot(Pt),Pt=null),Tt=gt}Ot(Pt)}})(A,I),g.invalid||ty($,g),A}};return((v,g)=>{var C,S;const E=v.schema;v.addAttributeFilter("href",L=>{let P=L.length;const j=$=>{const B=$?it.trim($):"";return/\b(noopener)\b/g.test(B)?B:B.split(" ").filter(U=>U.length>0).concat(["noopener"]).sort().join(" ")};if(!g.allow_unsafe_link_target)for(;P--;){const $=L[P];"a"===$.name&&"_blank"===$.attr("target")&&$.attr("rel",j($.attr("rel")))}}),g.allow_html_in_named_anchor||v.addAttributeFilter("id,name",L=>{let P,j,$,B,I=L.length;for(;I--;)if(B=L[I],"a"===B.name&&B.firstChild&&!B.attr("href"))for($=B.parent,P=B.lastChild;P&&$;)j=P.prev,$.insert(P,B),P=j}),g.fix_list_elements&&v.addNodeFilter("ul,ol",L=>{let P,j,$=L.length;for(;$--;)if(P=L[$],j=P.parent,j&&("ul"===j.name||"ol"===j.name))if(P.prev&&"li"===P.prev.name)P.prev.append(P);else{const B=new Kn("li",1);B.attr("style","list-style-type: none"),P.wrap(B)}});const N=E.getValidClasses();g.validate&&N&&v.addAttributeFilter("class",L=>{var P;let j=L.length;for(;j--;){const $=L[j],B=null!==(P=$.attr("class"))&&void 0!==P?P:"",I=it.explode(B," ");let U="";for(let G=0;G<I.length;G++){const ct=I[G];let rt=!1,wt=N["*"];wt&&wt[ct]&&(rt=!0),wt=N[$.name],!rt&&wt&&wt[ct]&&(rt=!0),rt&&(U&&(U+=" "),U+=ct)}U.length||(U=null),$.attr("class",U)}}),((L,P)=>{const{blob_cache:j}=P;if(j){const $=B=>{const I=B.attr("src");var U;(U=B).attr("src")===pe.transparentSrc||lt(U.attr("data-mce-placeholder"))||(U=>lt(U.attr("data-mce-bogus")))(B)||Se(I)||Yy(j,I,!0).each(U=>{B.attr("src",U.blobUri())})};L.addAttributeFilter("src",B=>Q(B,$))}})(v,g);const A=null!==(C=g.sandbox_iframes)&&void 0!==C&&C,R=xo(null!==(S=g.sandbox_iframes_exclusions)&&void 0!==S?S:[]);g.convert_unsafe_embeds&&v.addNodeFilter("object,embed",L=>Q(L,P=>{P.replace((({type:j,src:$,width:B,height:I}={},U,G)=>{const ct=Ie(wt=j)?"iframe":Mm(wt,"image")?"img":Mm(wt,"video")?"video":Mm(wt,"audio")?"audio":"iframe",rt=new Kn(ct,1);var wt;return rt.attr("audio"===ct?{src:$}:{src:$,width:B,height:I}),"audio"!==ct&&"video"!==ct||rt.attr("controls",""),"iframe"===ct&&U&&Gy(rt,G),rt})({type:P.attr("type"),src:P.attr("object"===P.name?"data":"src"),width:P.attr("width"),height:P.attr("height")},A,R))})),A&&v.addNodeFilter("iframe",L=>Q(L,P=>Gy(P,R)))})(h,o),(g=o).inline_styles&&((t,e,n)=>{var r;const o=Pu();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=o,i=it.explode(null!==(r=e.font_size_legacy_values)&&void 0!==r?r:""),s.addNodeFilter("font",l=>{Q(l,c=>{const u=a.parse(c.attr("style")),f=c.attr("color"),p=c.attr("face"),b=c.attr("size");var h;f&&(u.color=f),p&&(u["font-family"]=p),b&&Ks(b).each(h=>{u["font-size"]=i[h-1]}),c.name="span",c.attr("style",a.serialize(u)),h=c,Q(["color","face","size"],g=>{h.attr(g,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const c="html4"!==a.type;Q(l,u=>{if(c)u.name="s";else{const f=i.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",i.serialize(f))}})})})(t,n,o)})(h,g,e),h;var g},vC=(t,e,n)=>{const r=rd(s=t)?Os({validate:!1}).serialize(s):s,o=e(r);var s;if(o.isDefaultPrevented())return o;if(rd(t)){if(o.content!==r){const s=li({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:t.name});return{...o,content:s}}return{...o,content:t}}return o},yC=t=>({sanitize:g0(t),sandbox_iframes:b0(t),sandbox_iframes_exclusions:af(t)}),CC=(t,e)=>{if(e.no_events)return er.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?er.error(bb(t,{content:"",...n}).content):er.value(n)}},xC=(t,e,n)=>n.no_events?e:vC(e,o=>bb(t,{...n,content:o}),yC(t)).content,Wm=(t,e)=>{if(e.no_events)return er.value(e);{const n=vC(e.content,r=>{return o=t,s={...e,content:r},o.dispatch("BeforeSetContent",s);var o,s},yC(t));return n.isDefaultPrevented()?(hb(t,n),er.error(void 0)):er.value(n)}},Vm=(t,e,n)=>{n.no_events||hb(t,{...n,content:e})},Km=(t,e,n)=>({element:t,width:e,rows:n}),wC=(t,e)=>({element:t,cells:e}),$A=(t,e)=>({x:t,y:e}),SC=(t,e)=>ro(t,e).bind(Ks).getOr(1),WA=(t,e,n)=>{const r=t.rows;return!!(r[n]?r[n].cells:[])[e]},EC=t=>Cn(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),kC=(t,e)=>{const n=t.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let s=0;s<o.length;s++)if(It(o[s],e))return k.some($A(s,r))}return k.none()},_C=(t,e,n,r,o)=>{const s=[],a=t.rows;for(let i=n;i<=o;i++){const l=a[i].cells,c=e<r?l.slice(e,r+1):l.slice(r,e+1);s.push(wC(a[i].element,c))}return s},VA=t=>((e,n)=>{const r=ca(e.element),o=Dt("tbody");return be(o,n),Vt(r,o),r})(t,re(t.rows,n=>{const r=re(n.cells,s=>{const a=bh(s);return m(a,"colspan"),m(a,"rowspan"),a}),o=ca(n.element);return be(o,r),o})),NC=()=>Pf([]),dd=(t,e)=>e>=0&&e<t.length&&ei(t.charAt(e)),AC=t=>br(t.innerText),TC=t=>Et(t)?t.outerHTML:st(t)?ws.encodeRaw(t.data,!1):xs(t)?"\x3c!--"+t.data+"--\x3e":"",QA=qr(()=>document.implementation.createHTMLDocument("undo")),ud=t=>{const e=t.serializer.getTempAttrs(),n=rv(t.getBody(),e);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:Kt(re(xn(n.childNodes),Rn(br,TC)),r=>r.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:br(n.innerHTML),bookmark:null,beforeBookmark:null}},Xm=(t,e,n)=>{const r=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,r)=>{let o=0;Q(n,s=>{var a,i;0===s[0]?o++:1===s[0]?(((a,i,l)=>{const c=(u=>{let f;const p=document.createElement("div"),b=document.createDocumentFragment();for(u&&(p.innerHTML=u);f=p.firstChild;)b.appendChild(f);return b})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(c,a.childNodes[l]):a.appendChild(c)})(r,s[1],o),o++):2===s[0]&&(i=o,(a=r).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,r)=>{const o=n.length+r.length+2,s=new Array(o),a=new Array(o),i=(f,p,b,h,v)=>{const g=c(f,p,b,h);if(null===g||g.start===p&&g.diag===p-h||g.end===f&&g.diag===f-b){let C=f,S=b;for(;C<p||S<h;)C<p&&S<h&&n[C]===r[S]?(v.push([0,n[C]]),++C,++S):p-f>h-b?(v.push([2,n[C]]),++C):(v.push([1,r[S]]),++S)}else{i(f,g.start,b,g.start-g.diag,v);for(let C=g.start;C<g.end;++C)v.push([0,n[C]]);i(g.end,p,g.end-g.diag,h,v)}},l=(f,p,b,h)=>{let v=f;for(;v-p<h&&v<b&&n[v]===r[v-p];)++v;return((g,C,S)=>({start:g,end:C,diag:S}))(f,v,p)},c=(f,p,b,h)=>{const v=p-f,g=h-b;if(0===v||0===g)return null;const C=v-g,S=g+v,E=(S%2==0?S:S+1)/2;let N,A,R,L,P;for(s[1+E]=f,a[1+E]=p+1,N=0;N<=E;++N){for(A=-N;A<=N;A+=2){for(R=A+E,s[R]=A===-N||A!==N&&s[R-1]<s[R+1]?s[R+1]:s[R-1]+1,L=s[R],P=L-f+b-A;L<p&&P<h&&n[L]===r[P];)s[R]=++L,++P;if(C%2!=0&&C-N<=A&&A<=C+N&&a[R-C]<=s[R])return l(a[R-C],A+f-b,p,h)}for(A=C-N;A<=C+N;A+=2){for(R=A+E-C,a[R]=A===C-N||A!==C+N&&a[R+1]<=a[R-1]?a[R+1]-1:a[R-1],L=a[R]-1,P=L-f+b-A;L>=f&&P>=b&&n[L]===r[P];)a[R]=L--,P--;if(C%2==0&&-N<=A&&A<=N&&a[R]<=s[R+C])return l(a[R],A+f-b,p,h)}}return null},u=[];return i(0,n.length,0,r.length,u),u})(re(xn(e.childNodes),TC),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!lt(r)||!z0(r)||!r.isFakeCaret}),r&&(t.selection.moveToBookmark(r),t.selection.scrollIntoView())},Ym=t=>"fragmented"===t.type?t.fragments.join(""):t.content,RC=t=>{const e=Dt("body",QA());return Bn(e,Ym(t)),Q(Ln(e,"*[data-mce-bogus]"),Ye),Wn(e)},Gm=(t,e)=>{return!(!t||!e)&&(r=e,!(Ym(t)!==Ym(r))||((n,r)=>RC(n)===RC(r))(t,e));var r},Qm=t=>0===t.get(),fd=(t,e,n)=>{Qm(n)&&(t.typing=e)},OC=(t,e)=>{t.typing&&(fd(t,!1,e),t.add())},DC=t=>({init:{bindEvents:St},undoManager:{beforeChange:(e,n)=>{return r=t,s=n,void(Qm(e)&&s.set(tf(r.selection)));var r,s},add:(e,n,r,o,s,a)=>((i,l,c,u,f,p,b)=>{const h=ud(i),v=it.extend(p||{},h);if(!Qm(u)||i.removed)return null;const g=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:v,lastLevel:g,originalEvent:b}).isDefaultPrevented()||g&&Gm(g,v))return null;l.data[c.get()]&&f.get().each(E=>{l.data[c.get()].beforeBookmark=E});const C=n_(i);if(C&&l.data.length>C){for(let E=0;E<l.data.length-1;E++)l.data[E]=l.data[E+1];l.data.length--,c.set(l.data.length)}v.bookmark=tf(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(v),c.set(l.data.length-1);const S={level:v,lastLevel:g,originalEvent:b};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",S),i.dispatch("change",S)):i.dispatch("AddUndo",S),v})(t,e,n,r,o,s,a),undo:(e,n,r)=>((o,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,fd(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],Xm(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(t,e,n,r),redo:(e,n)=>((r,o,s)=>{let a;return o.get()<s.length-1&&(o.set(o.get()+1),a=s[o.get()],Xm(r,a,!1),r.setDirty(!0),r.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return r=t,s=n,(o=e).data=[],s.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return r=t,o=e,n.get()>0||o.typing&&o.data[0]&&!Gm(ud(r),o.data[0]);var r,o},hasRedo:(e,n)=>{return r=e,n.get()<r.data.length-1&&!r.typing;var r},transact:(e,n,r)=>{return a=r,OC(o=e,n),o.beforeChange(),o.ignore(a),o.add();var o,a},ignore:(e,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(e,n),extra:(e,n,r,o)=>((s,a,i,l,c)=>{if(a.transact(l)){const u=a.data[i.get()].bookmark,f=a.data[i.get()-1];Xm(s,f,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=u)}})(t,e,n,r,o)},formatter:{match:(e,n,r,o)=>_m(t,e,n,r,o),matchAll:(e,n)=>((r,o,s)=>{const a=[],i={},l=r.selection.getStart();return r.dom.getParent(l,c=>{for(let u=0;u<o.length;u++){const f=o[u];!i[f]&&Fo(r,c,f,s)&&(i[f]=!0,a.push(f))}},r.dom.getRoot()),a})(t,e,n),matchNode:(e,n,r,o)=>Fo(t,e,n,r,o),canApply:e=>((n,r)=>{const o=n.formatter.get(r),s=n.dom;if(o&&n.selection.isEditable()){const a=n.selection.getStart(),i=Uc(s,a);for(let l=o.length-1;l>=0;l--){const c=o[l];if(!Br(c))return!0;for(let u=i.length-1;u>=0;u--)if(s.is(i[u],c.selector))return!0}}return!1})(t,e),closest:e=>((n,r)=>{const o=s=>It(s,D(n.getBody()));return k.from(n.selection.getStart(!0)).bind(s=>Sm(D(s),a=>Zn(r,i=>{return Fo(n,a.dom,c=i)?k.some(c):k.none();var c}),o)).getOrNull()})(t,e),apply:(e,n,r)=>Iy(t,e,n,r),remove:(e,n,r,o)=>Py(t,e,n,r,o),toggle:(e,n,r)=>((o,s,a,i)=>{const l=o.formatter.get(s);l&&(!_m(o,s,a,i)||"toggle"in l[0]&&!l[0].toggle?Iy(o,s,a,i):Py(o,s,a,i))})(t,e,n,r),formatChanged:(e,n,r,o,s)=>{return((p,b,h,v,g,C)=>{const S=b.get();Q(h.split(","),E=>{const N=Re(S,E).getOrThunk(()=>{const R={withSimilar:{state:hn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:hn(!1),similar:!1,callbacks:[]},withVars:[]};return S[E]=R,R}),A=()=>{const R=Uy(p);return zy(p,R,E,g,C).isSome()};if(Ie(C)){const R=g?N.withSimilar:N.withoutSimilar;R.callbacks.push(v),1===R.callbacks.length&&R.state.set(A())}else N.withVars.push({state:hn(A()),similar:g,vars:C,callback:v})}),b.set(S)})(t,i=e,l=n,c=r,o,s),{unbind:()=>((p,b,h)=>{const v=p.get();Q(b.split(","),g=>Re(v,g).each(C=>{v[g]={withSimilar:{...C.withSimilar,callbacks:Kt(C.withSimilar.callbacks,S=>S!==h)},withoutSimilar:{...C.withoutSimilar,callbacks:Kt(C.withoutSimilar.callbacks,S=>S!==h)},withVars:Kt(C.withVars,S=>S.callback!==h)}})),p.set(v)})(i,l,c)};var i,l,c}},editor:{getContent:e=>{return r=e,k.from((n=t).getBody()).fold(ft("tree"===r.format?new Kn("body",11):""),o=>((t,e,n)=>{let r;return r="raw"===e.format?it.trim(br(rv(n,t.serializer.getTempAttrs()).innerHTML)):"text"===e.format?((o,s)=>{const a=o.getDoc(),i=Oe(D(o.getBody())),l=Dt("div",a);Ze(l,"data-mce-bogus","all"),W(l,{position:"fixed",left:"-9999999px",top:"0"}),Bn(l,s.innerHTML),ov(l),sv(l);const c=se(f=i)?f:D(Le(f).dom.body);var f;Vt(c,l);const u=br(l.dom.innerText);return ue(l),u})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((o,s)=>{const a=In(o),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!wc(D(n))&&Nt(r)?it.trim(r):r})(n,r,o));var n,r},setContent:(e,n)=>{return o=e,s=n,k.from((r=t).getBody()).map(a=>rd(o)?((i,l,c,u)=>{ey(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const f=Os({validate:!1},i.schema).serialize(c),p=br(wc(D(l))?f:it.trim(f));return wm(i,p,u.no_selection),{content:c,html:p}})(r,a,o,s):((i,l,c,u)=>{if(0===(c=br(c)).length||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const p=In(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),p.toLowerCase())?(c=f,c=i.dom.createHTML(p,sl(i),c)):c||(c=f),wm(i,c,u.no_selection),{content:c,html:c}}{"raw"!==u.format&&(c=Os({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const f=wc(D(l))?c:it.trim(c);return wm(i,f,u.no_selection),{content:f,html:f}}})(r,a,o,s)).getOr({content:o,html:rd(s.content)?"":s.content});var r,o,s},insertContent:(e,n)=>lA(t,e,n),addVisual:e=>((n,r)=>{const o=n.dom,s=lt(r)?r:n.getBody();Q(o.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=l_(n),l=o.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?o.removeClass(a,i):o.addClass(a,i);break;case"A":if(!o.getAttrib(a,"href")){const c=o.getAttrib(a,"name")||a.id,u=m0(n);c&&n.hasVisual?o.addClass(a,u):o.removeClass(a,u)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((r,o,s={})=>{const a=(i=s,l=o,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return CC(r,a).fold(me,i=>{const l=((c,u)=>{if("text"===u.format)return k.from((f=c).selection.getRng()).map(p=>{var b;const h=k.from(f.dom.getParent(p.commonAncestorContainer,f.dom.isBlock)),v=f.getBody(),g=h.map(R=>R.nodeName).getOr("div").toLowerCase(),C=D(p.cloneContents());ov(C),sv(C);const S=f.dom.add(v,g,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},C.dom),E=AC(S),N=br(null!==(b=S.textContent)&&void 0!==b?b:"");if(f.dom.remove(S),dd(N,0)||dd(N,N.length-1)){const A=h.getOr(v),R=AC(A),L=R.indexOf(E);return-1===L?E:(dd(R,L-1)?" ":"")+E+(dd(R,L+E.length)?" ":"")}return E}).getOr("");var f;{const f=((p,b)=>{const h=p.selection.getRng(),v=p.dom.create("body"),g=p.selection.getSel(),C=Vf(p,bf(g)),S=b.contextual?((t,e,n)=>{const r=V0(e,t);return r.length>0?((t,e)=>{return(n=t,r=e[0],To(r,"table",xt(It,n))).bind(n=>{const r=e[0],o=e[e.length-1],s=(a=>{const i=Km(ca(a),0,[]);return Q(Ln(a,"tr"),(l,c)=>{Q(Ln(l,"td,th"),(u,f)=>{((p,b,h,v,g)=>{const C=SC(g,"rowspan"),S=SC(g,"colspan"),E=p.rows;for(let N=h;N<h+C;N++){E[N]||(E[N]=wC(bh(v),[]));for(let A=b;A<b+S;A++)E[N].cells[A]=N===h&&A===b?g:ca(g)}})(i,((p,b,h)=>{for(;WA(p,b,h);)b++;return b})(i,f,c),c,l,u)})}),Km(i.element,EC(i.rows),i.rows)})(n);return(a=s,i=r,l=o,kC(a,i).bind(c=>kC(a,l).map(u=>((f,p,b)=>{const h=p.x,v=p.y,g=b.x,C=b.y,S=v<C?_C(f,h,v,g,C):_C(f,h,C,g,v);return Km(f.element,EC(S),S)})(a,c,u)))).map(a=>Pf([VA(a)]));var a,i,l}).getOrThunk(NC);var n,r})(t,r):(o=t,a=n,(s=e).length>0&&s[0].collapsed?NC():(i=o,c=a,((u,f)=>{const p=Cn(f,(b,h)=>(Vt(h,b),h),u);return f.length>0?Pf([p]):p})(D((l=s[0]).cloneContents()),((t,e,n)=>{const r=D(e.commonAncestorContainer),o=ss(r,t),s=Kt(o,l=>n.isWrapper(fe(l))),a=(c=e,Ge(l=o,u=>"li"===fe(u)&&yf(u,c)).fold(ft([]),u=>{return(f=l,Ge(f,p=>"ul"===fe(p)||"ol"===fe(p))).map(f=>{const p=Dt(fe(f)),b=Eo(Ut(f),(h,v)=>Ve(v,"list-style"));return W(p,b),[Dt("li"),p]}).getOr([]);var f})),i=s.concat(a.length?a:(l=>Zi(l)?sr(l).filter(Hu).fold(ft([]),c=>[l,c]):Hu(l)?[l]:[])(r));var l,c;return re(i,ca)})(i,l,c))));var o,s,a,i,l,c})(D(p.getBody()),C,p.schema).dom:h.cloneContents();return S&&v.appendChild(S),p.selection.serializer.serialize(v,b)})(c,u);return"tree"===u.format?f:c.selection.isCollapsed()?"":f}})(r,i);return xC(r,l,i)})})(t,e,n)},autocompleter:{addDecoration:St,removeDecoration:St},raw:{getModel:()=>k.none()}}),jo=t=>jt(t.plugins,"rtc"),Zm=t=>t.rtcInstance?t.rtcInstance:DC(t),rn=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},BC=t=>rn(t).init.bindEvents(),PC=t=>0===t.dom.length?(ue(t),k.none()):k.some(t),LC=(t,e,n,r,o)=>{t.bind(s=>((r?nm:Jc)(s.dom,r?s.dom.length:0,o),e.filter(Hn).map(a=>((i,l,c,u,f)=>{const p=i.dom,b=l.dom,h=u?p.length:b.length;u?(rm(p,b,f,!1,!u),c.setStart(b,h)):(rm(b,p,f,!1,!u),c.setEnd(b,h))})(s,a,n,r,o)))).orThunk(()=>{return(a=e,i=r,a.filter(l=>hl.isBookmarkNode(l.dom)).bind(i?gr:$n)).or(e).filter(Hn).map(a=>((i,l,c)=>{sr(i).each(u=>{const f=i.dom;l&&xl(u,Y(f,0),c)?Jc(f,0,c):!l&&wl(u,Y(f,f.length),c)&&nm(f,f.length,c)})})(a,r,o));var a,i})},MC=(t,e,n)=>{if(jt(t,e)){const r=Kt(t[e],o=>o!==n);0===r.length?delete t[e]:t[e]=r}},IC=t=>!(!t||!t.ownerDocument)&&qn(D(t.ownerDocument),D(t)),FC=(t,e,n,r)=>{let o,s;const{selectorChangedWithUnbind:a}=((g,C)=>{let S,E;const N=(R,L)=>Ge(L,P=>g.is(P,R)),A=R=>g.getParents(R,void 0,g.getRoot());return{selectorChangedWithUnbind:(R,L)=>(S||(S={},E={},C.on("NodeChange",P=>{const j=P.element,$=A(j),B={};we(S,(I,U)=>{N(U,$).each(G=>{E[U]||(Q(I,ct=>{ct(!0,{node:G,selector:U,parents:$})}),E[U]=I),B[U]=I})}),we(E,(I,U)=>{B[U]||(delete E[U],Q(I,G=>{G(!1,{node:j,selector:U,parents:$})}))})})),S[R]||(S[R]=[]),S[R].push(L),N(R,A(C.selection.getStart())).each(()=>{E[R]=S[R]}),{unbind:()=>{MC(S,R,L),MC(E,R,L)}})}})(t,r),i=(g,C)=>((S,E,N={})=>{const A=(R=N,L=E,{format:"html",...R,set:!0,selection:!0,content:L});var R,L;Wm(S,A).each(R=>{const L=((j,$)=>{if("raw"!==$.format){const B=j.selection.getRng(),I=j.dom.getParent(B.commonAncestorContainer,j.dom.isBlock),U=I?{context:I.nodeName.toLowerCase()}:{},G=j.parser.parse($.content,{forced_root_block:!1,...U,...$});return Os({validate:!1},j.schema).serialize(G)}return $.content})(S,R),P=S.selection.getRng();((j,$,B)=>{const I=k.from($.firstChild).map(D),U=k.from($.lastChild).map(D);j.deleteContents(),j.insertNode($);const G=I.bind($n).filter(Hn).bind(PC),ct=U.bind(gr).filter(Hn).bind(PC);LC(G,I,j,!0,B),LC(ct,U,j,!1,B),j.collapse(!1)})(P,P.createContextualFragment(L),S.schema),S.selection.setRng(P),vl(S,P),Vm(S,L,R)})})(r,g,C),l=g=>{const C=u();C.collapse(!!g),f(C)},c=()=>e.getSelection?e.getSelection():e.document.selection,u=()=>{let g;const C=(E,N,A)=>{try{return N.compareBoundaryPoints(E,A)}catch{return-1}},S=e.document;if(lt(r.bookmark)&&!Ca(r)){const E=zf(r);if(E.isSome())return E.map(N=>Vf(r,[N])[0]).getOr(S.createRange())}try{const E=c();E&&!fc(E.anchorNode)&&(g=E.rangeCount>0?E.getRangeAt(0):S.createRange(),g=Vf(r,[g])[0])}catch{}if(g||(g=S.createRange()),Ui(g.startContainer)&&g.collapsed){const E=t.getRoot();g.setStart(E,0),g.setEnd(E,0)}return o&&s&&(0===C(g.START_TO_START,g,o)&&0===C(g.END_TO_END,g,o)?g=s:(o=null,s=null)),g},f=(g,C)=>{if(!((E=g)&&IC(E.startContainer)&&IC(E.endContainer)))return;var E;const S=c();if(g=r.dispatch("SetSelectionRange",{range:g,forward:C}).range,S){s=g;try{S.removeAllRanges(),S.addRange(g)}catch{}!1===C&&S.extend&&(S.collapse(g.endContainer,g.endOffset),S.extend(g.startContainer,g.startOffset)),o=S.rangeCount>0?S.getRangeAt(0):null}if(!g.collapsed&&g.startContainer===g.endContainer&&S?.setBaseAndExtent&&g.endOffset-g.startOffset<2&&g.startContainer.hasChildNodes()){const E=g.startContainer.childNodes[g.startOffset];E&&"IMG"===E.nodeName&&(S.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),S.anchorNode===g.startContainer&&S.focusNode===g.endContainer||S.setBaseAndExtent(E,0,E,1))}r.dispatch("AfterSetSelectionRange",{range:g,forward:C})},p=()=>{const g=c(),C=g?.anchorNode,S=g?.focusNode;if(!g||!C||!S||fc(C)||fc(S))return!0;const E=t.createRng(),N=t.createRng();try{E.setStart(C,g.anchorOffset),E.collapse(!0),N.setStart(S,g.focusOffset),N.collapse(!0)}catch{return!0}return E.compareBoundaryPoints(E.START_TO_START,N)<=0},b={dom:t,win:e,serializer:n,editor:r,expand:(g={type:"word"})=>f(ya(t).expand(u(),g)),collapse:l,setCursorLocation:(g,C)=>{const S=t.createRng();lt(g)&&lt(C)?(S.setStart(g,C),S.setEnd(g,C),f(S),l(!1)):(Cf(t,S,r.getBody(),!0),f(S))},getContent:g=>((C,S={})=>{return N=S.format?S.format:"html",A=S,rn(C).selection.getContent(N,A);var N,A})(r,g),setContent:i,getBookmark:(g,C)=>h.getBookmark(g,C),moveToBookmark:g=>h.moveToBookmark(g),select:(g,C)=>{return(S=t,E=g,N=C,k.from(E).bind(A=>k.from(A.parentNode).map(R=>{const L=S.nodeIndex(A),P=S.createRng();return P.setStart(R,L),P.setEnd(R,L+1),N&&(Cf(S,P,A,!0),Cf(S,P,A,!1)),P}))).each(f),g;var S,E,N},isCollapsed:()=>{const g=u(),C=c();return!(!g||g.item)&&(g.compareEndPoints?0===g.compareEndPoints("StartToEnd",g):!C||g.collapsed)},isEditable:()=>{const g=u(),C=r.getBody().querySelectorAll('[data-mce-selected="1"]');return C.length>0?fr(C,S=>t.isEditable(S.parentElement)):Vb(t,g)},isForward:p,setNode:g=>(i(t.getOuterHTML(g)),g),getNode:()=>((g,C)=>{if(!C)return g;let S=C.startContainer,E=C.endContainer;const N=C.startOffset,A=C.endOffset;let R=C.commonAncestorContainer;C.collapsed||(S===E&&A-N<2&&S.hasChildNodes()&&(R=S.childNodes[N]),st(S)&&st(E)&&(S=S.length===N?Gb(S.nextSibling,!0):S.parentNode,E=0===A?Gb(E.previousSibling,!1):E.parentNode,S&&S===E&&(R=S)));const L=st(R)?R.parentNode:R;return es(L)?L:g})(r.getBody(),u()),getSel:c,setRng:f,getRng:u,getStart:g=>Xb(r.getBody(),u(),g),getEnd:g=>Yb(r.getBody(),u(),g),getSelectedBlocks:(g,C)=>((S,E,N,A)=>{const R=[],L=S.getRoot(),P=S.getParent(N||Xb(L,E,E.collapsed),S.isBlock),j=S.getParent(A||Yb(L,E,E.collapsed),S.isBlock);if(P&&P!==L&&R.push(P),P&&j&&P!==j){let $;const B=new pn(P,L);for(;($=B.next())&&$!==j;)S.isBlock($)&&R.push($)}return j&&P!==j&&j!==L&&R.push(j),R})(t,u(),g,C),normalize:()=>{const g=u(),C=c();if(!(bf(C).length>1)&&jc(r)){const S=Vc(t,g);return S.each(E=>{f(E,p())}),S.getOr(g)}return g},selectorChanged:(g,C)=>(a(g,C),b),selectorChangedWithUnbind:a,getScrollContainer:()=>{let g,C=t.getRoot();for(;C&&"BODY"!==C.nodeName;){if(C.scrollHeight>C.clientHeight){g=C;break}C=C.parentNode}return g},scrollIntoView:(g,C)=>{var S;lt(g)?((S=r).inline?vN:CN)(S,g,C):vl(r,u(),C)},placeCaretAt:(g,C)=>f(kb(g,C,r.getDoc())),getBoundingClientRect:()=>{const g=u();return g.collapsed?Y.fromRangeStart(g).getClientRects()[0]:g.getBoundingClientRect()},destroy:()=>{e=o=s=null,v.destroy()}},h=hl(b),v=Cb(b,r);return b.bookmarkManager=h,b.controlSelection=v,b},ZA=(t,e,n)=>{-1===it.inArray(e,n)&&(t.addAttributeFilter(n,(r,o)=>{let s=r.length;for(;s--;)r[s].attr(o,null)}),e.push(n))},jC=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},o=e&&e.dom?e.dom:De.DOM,s=e&&e.schema?e.schema:Ss(r),a=li(r,s);return l=r,c=o,(i=a).addAttributeFilter("data-mce-tabindex",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];b.attr("tabindex",b.attr("data-mce-tabindex")),b.attr(f,null)}}),i.addAttributeFilter("src,href,style",(u,f)=>{const p="data-mce-"+f,b=l.url_converter,h=l.url_converter_scope;let v=u.length;for(;v--;){const g=u[v];let C=g.attr(p);void 0!==C?(g.attr(f,C.length>0?C:null),g.attr(p,null)):(C=g.attr(f),"style"===f?C=c.serializeStyle(c.parseStyle(C),g.name):b&&(C=b.call(h,C,f,g.name)),g.attr(f,C.length>0?C:null))}}),i.addAttributeFilter("class",u=>{let f=u.length;for(;f--;){const p=u[f];let b=p.attr("class");b&&(b=b.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),p.attr("class",b.length>0?b:null))}}),i.addAttributeFilter("data-mce-type",(u,f,p)=>{let b=u.length;for(;b--;){const h=u[b];"bookmark"===h.attr("data-mce-type")&&!p.cleanup&&(k.from(h.firstChild).exists(g=>{var C;return!Sc(null!==(C=g.value)&&void 0!==C?C:"")})?h.unwrap():h.remove())}}),i.addNodeFilter("noscript",u=>{var f;let p=u.length;for(;p--;){const b=u[p].firstChild;b&&(b.value=ws.decode(null!==(f=b.value)&&void 0!==f?f:""))}}),i.addNodeFilter("script,style",(u,f)=>{var p;const b=v=>v.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let h=u.length;for(;h--;){const v=u[h],g=v.firstChild,C=null!==(p=g?.value)&&void 0!==p?p:"";if("script"===f){const S=v.attr("type");S&&v.attr("type","mce-no/type"===S?null:S.replace(/^mce\-/,"")),"xhtml"===l.element_format&&g&&C.length>0&&(g.value="// <![CDATA[\n"+b(C)+"\n// ]]>")}else"xhtml"===l.element_format&&g&&C.length>0&&(g.value="\x3c!--\n"+b(C)+"\n--\x3e")}}),i.addNodeFilter("#comment",u=>{let f=u.length;for(;f--;){const p=u[f],b=p.value;l.preserve_cdata&&0===b?.indexOf("[CDATA[")?(p.name="#cdata",p.type=4,p.value=c.decode(b.replace(/^\[CDATA\[|\]\]$/g,""))):0===b?.indexOf("mce:protected ")&&(p.name="#text",p.type=3,p.raw=!0,p.value=unescape(b).substr(14))}}),i.addNodeFilter("xml:namespace,input",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];7===b.type?b.remove():1===b.type&&("input"!==f||b.attr("type")||b.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",u=>{Q(u,f=>{"format-caret"===f.attr("data-mce-type")&&(f.isEmpty(i.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(u,f)=>{let p=u.length;for(;p--;)u[p].attr(f,null)}),l.remove_trailing_brs&&(u=l,p=i.schema,i.addNodeFilter("br",(b,h,v)=>{const g=it.extend({},p.getBlockElements()),C=p.getNonEmptyElements(),S=p.getWhitespaceElements();g.body=1;const E=N=>N.name in g||_u(p,N);for(let N=0,A=b.length;N<A;N++){let R=b[N],L=R.parent;if(L&&E(L)&&R===L.lastChild){let P=R.prev;for(;P;){const j=P.name;if("span"!==j||"bookmark"!==P.attr("data-mce-type")){"br"===j&&(R=null);break}P=P.prev}if(R&&(R.remove(),El(p,C,S,L))){const j=p.getElementRule(L.name);j&&(j.removeEmpty?L.remove():j.paddEmpty&&gm(u,v,E,L))}}else{let P=R;for(;L&&L.firstChild===P&&L.lastChild===P&&(P=L,!g[L.name]);)L=L.parent;if(P===L){const j=new Kn("#text",3);j.value=gn,R.replace(j)}}}})),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},u=(h=i,C=v=c,lt(g=b=e)&&g.hasEventListeners("PreProcess")&&!C.no_events?((g,C,S)=>{let E;const N=g.dom;let A=C.cloneNode(!0);const R=document.implementation;if(R.createHTMLDocument){const L=R.createHTMLDocument("");it.each("BODY"===A.nodeName?A.childNodes:[A],P=>{L.body.appendChild(L.importNode(P,!0))}),A="BODY"!==A.nodeName?L.body.firstChild:L.body,E=N.doc,N.doc=L}return P={...S,node:A},g.dispatch("PreProcess",P),E&&(N.doc=E),A;var P})(b,h,v):h),f=((b,h,v)=>{const g=br(v.getInner?h.innerHTML:b.getOuterHTML(h));return v.selection||wc(D(h))?g:it.trim(g)})(o,u,c),p=((b,h,v)=>{const g=v.selection?{forced_root_block:!1,...v}:v,C=b.parse(h,g);return(S=>{const E=A=>"br"===A?.name,N=S.lastChild;if(E(N)){const A=N.prev;E(A)&&(N.remove(),A.remove())}})(C),C})(a,f,c);var b,h,v,g,C;return"tree"===c.format?p:((b,h,v,g,C)=>{var A;return((E,N,A)=>{return!N.no_events&&E?(L=E,P={...N,content:A},L.dispatch("PostProcess",P)).content:A;var L,P})(b,C,(A=g,Os(h,v).serialize(A)))})(e,r,s,p,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:xt(ZA,a,n),getTempAttrs:ft(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var i,l,c,u,p})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Jm=(t,e,n={})=>{const r=(o=n,s=e,{format:"html",...o,set:!0,content:s});var o,s;return Wm(t,r).map(o=>{const s=(i=o.content,l=o,Zm(t).editor.setContent(i,l));var i,l;return Vm(t,s.html,o),s.content}).getOr(e)},tT="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),eT=[],nT="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),zC=[],UC=(t,e)=>{const n=Kt(e,r=>jt(t,r));return Wo(n)},HC=(t,e)=>{const n=it.makeMap(t.plugins," "),r=Kt(e,o=>jt(n,o));return Wo(r)},iT=t=>Ge(zC,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),md=De.DOM,pd=t=>k.from(t).each(e=>e.destroy()),gd=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>jt(t,e)}})(),ci=Vn.ModelManager,qC=(t,e)=>e.dom[t],$C=(t,e)=>parseInt(tt(e,t),10),lT=xt(qC,"clientWidth"),cT=xt(qC,"clientHeight"),dT=xt($C,"margin-top"),uT=xt($C,"margin-left"),WC=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},r=()=>k.from(e[0]),o=()=>{Q(e,l=>{l.reposition()})},s=l=>{Us(e,c=>c===l).each(c=>{e.splice(c,1)})},a=(l,c=!0)=>{return t.removed||!(f=(u=t).inline?u.getBody():u.getContentAreaContainer(),k.from(f).map(D)).map(Ao).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),Ge(e,u=>{return!((f=n().getArgs(u)).type!==(p=l).type||f.text!==p.text||f.progressBar||f.timeout||p.progressBar||p.timeout);var f,p}).getOrThunk(()=>{t.editorManager.setActive(t);const u=n().open(l,()=>{s(u),o(),Wb(t)&&r().fold(()=>t.focus(),f=>Fb(D(f.getEl())))});return(f=>{e.push(f)})(u),o(),t.dispatch("OpenNotification",{notification:{...u}}),u}));var u,f},i=ft(e);return(l=t).on("SkinLoaded",()=>{const c=$k(l);c&&a({text:c,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{Q(e.slice(),c=>{n().close(c)})}),{open:a,close:()=>{r().each(l=>{n().close(l),s(l),o()})},getNotifications:i};var l},di=Vn.PluginManager,ka=Vn.ThemeManager,VC=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},r=(a,i)=>(...l)=>i?i.apply(a,l):void 0,o=a=>{t.dispatch("CloseWindow",{dialog:a}),e=Kt(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),Yc(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{Q(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,o)),openUrl:a=>s(()=>n().openUrl(a,o)),alert:(a,i,l)=>{const c=n();c.alert(a,r(l||c,i))},confirm:(a,i,l)=>{const c=n();c.confirm(a,r(l||c,i))},close:()=>{k.from(e[e.length-1]).each(a=>{n().close(a),o(a)})}}},KC=(t,e)=>{t.notificationManager.open({type:"error",text:e})},hd=(t,e)=>{t._skinLoaded?KC(t,e):t.on("SkinLoaded",()=>{KC(t,e)})},Rl=(t,e,n)=>{mb(t,e,{message:n}),console.error(n)},Ol=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,bd=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},tp=t=>"content/"+t+"/content.css",XC=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",r=`content${t.editorManager.suffix}.css`;return re(e,o=>tinymce.Resource.has(tp(o))?o:/^[a-z0-9\-]+$/i.test(o)&&!t.inline?`${n}/${o}/${r}`:t.documentBaseURI.toAbsolute(o))},YC=()=>{let t={};const e=(r,o)=>({status:r,resultUri:o}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{const o=t[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:r=>{t[r]=e(1,null)},markUploaded:(r,o)=>{t[r]=e(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}};let mT=0;const GC=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),QC=(t,e)=>((t,e)=>{const n={},r=(l,c)=>new Promise((u,f)=>{const p=new XMLHttpRequest;p.open("POST",e.url),p.withCredentials=e.credentials,p.upload.onprogress=h=>{c(h.loaded/h.total*100)},p.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+p.status)},p.onload=()=>{if(p.status<200||p.status>=300)return void f("HTTP Error: "+p.status);const h=JSON.parse(p.responseText);var v,g;h&&Nt(h.location)?u((g=h.location,(v=e.basePath)?v.replace(/\/$/,"")+"/"+g.replace(/^\//,""):g)):f("Invalid JSON: "+p.responseText)};const b=new FormData;b.append("file",l.blob(),l.filename()),p.send(b)}),o=he(e.handler)?e.handler:r,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{it.each(n[l],u=>{u(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||o!==r?(f=c,u=it.grep(u=l,p=>!t.isUploaded(p.blobUri())),Promise.all(it.map(u,p=>{return t.isPending(p.blobUri())?(b=>{const h=b.blobUri();return new Promise(v=>{n[h]=n[h]||[],n[h].push(v)})})(p):(h=o,v=f,t.markPending((b=p).blobUri()),new Promise(g=>{let C,S;try{const E=()=>{C&&(C.close(),S=St)},N=R=>{E(),t.markUploaded(b.blobUri(),R),i(b.blobUri(),s(b,R)),g(s(b,R))},A=R=>{E(),t.removeFailed(b.blobUri()),i(b.blobUri(),a(b,R)),g(a(b,R))};S=R=>{R<0||R>100||k.from(C).orThunk(()=>k.from(v).map(vo)).each(L=>{C=L,L.progressBar.value(R)})},h(b,S).then(N,R=>{A(Nt(R)?{message:R}:R)})}catch(E){g(a(b,E))}}));var b,h,v}))):new Promise(u=>{u([])});var u,f}}})(e,{url:Ok(t),basePath:Dk(t),credentials:Bk(t),handler:Pk(t)}),ZC={remove_similar:!0,inherit:!1},ui={selector:"td,th",...ZC},hT={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ui},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ui},tablecellbordercolor:{styles:{borderColor:"%value"},...ui},tablecellclass:{classes:["%value"],...ui},tableclass:{selector:"table",classes:["%value"],...ZC},tablecellborderstyle:{styles:{borderStyle:"%value"},...ui},tablecellborderwidth:{styles:{borderWidth:"%value"},...ui}},bT=ft(hT),vd=it.each,Ir=De.DOM,ep=t=>lt(t)&&Xt(t),JC=(t,e)=>{const n=e&&e.schema||Ss({}),r=a=>{const i=Nt(a)?{name:a,classes:[],attrs:{}}:a,l=Ir.create(i.name);return c=l,(u=i).classes.length>0&&Ir.addClass(c,u.classes.join(" ")),Ir.setAttribs(c,u.attrs),l;var c,u},o=(a,i,l)=>{let c;const u=i[0],f=ep(u)?u.name:void 0,p=((v,g)=>{const C=n.getElementRule(v.nodeName.toLowerCase()),S=C?.parentsRequired;return!(!S||!S.length)&&(g&&At(S,g)?g:S[0])})(a,f);if(p)f===p?(c=u,i=i.slice(1)):c=p;else if(u)c=u,i=i.slice(1);else if(!l)return a;const b=c?r(c):Ir.create("div");b.appendChild(a),l&&it.each(l,v=>{const g=r(v);b.insertBefore(g,a)});const h=ep(c)?c.siblings:void 0;return o(b,i,h)},s=Ir.create("div");if(t.length>0){const a=t[0],i=r(a),l=ep(a)?a.siblings:void 0;s.appendChild(o(i,t.slice(1),l))}return s},vT=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=it.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,s,a,i)=>{switch(o){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==it.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},yT=(t,e)=>{let n="",r=Xk(t);if(""===r)return"";const o=b=>Nt(b)?b.replace(/%(\w+)/g,""):"",s=(b,h)=>Ir.getStyle(h??t.getBody(),b,!0);if(Nt(e)){const b=t.formatter.get(e);if(!b)return"";e=b[0]}if("preview"in e){const b=e.preview;if(!1===b)return"";r=b||r}let a,i=e.block||e.inline||"span";const l=Nt(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),it.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),b=>{const h=it.map(b.split(/(?:~\+|~|\+)/),vT),v=h.pop();return h.length&&(v.siblings=h),v}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=JC(l,t)):a=JC([i],t);const u=Ir.select(i,a)[0]||a.firstChild;vd(e.styles,(b,h)=>{const v=o(b);v&&Ir.setStyle(u,h,v)}),vd(e.attributes,(b,h)=>{const v=o(b);v&&Ir.setAttrib(u,h,v)}),vd(e.classes,b=>{const h=o(b);Ir.hasClass(u,h)||Ir.addClass(u,h)}),t.dispatch("PreviewFormats"),Ir.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const f=s("fontSize"),p=/px$/.test(f)?parseInt(f,10):0;return vd(r.split(" "),b=>{let h=s(b,u);if(!("background-color"===b&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(h)&&(h=s(b),"#ffffff"===qi(h).toLowerCase())||"color"===b&&"#000000"===qi(h).toLowerCase())){if("font-size"===b&&/em|%$/.test(h)){if(0===p)return;h=parseFloat(h)/(/%$/.test(h)?100:1)*p+"px"}"border"===b&&h&&(n+="padding:0 2px;"),n+=b+":"+h+";"}}),t.dispatch("AfterPreviewFormats"),Ir.remove(a),n},t1=t=>{const e=(r=>{const o={},s=(a,i)=>{a&&(Nt(a)?(at(i)||(i=[i]),Q(i,l=>{Ie(l.deep)&&(l.deep=!Br(l)),Ie(l.split)&&(l.split=!Br(l)||dn(l)),Ie(l.remove)&&Br(l)&&!dn(l)&&(l.remove="none"),Br(l)&&dn(l)&&(l.mixed=!0,l.block_expand=!0),Nt(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[a]=i):we(a,(l,c)=>{s(c,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},p={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[p,u,f]:[u,p,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,p)=>Et(u)&&u.hasAttribute("href"),onformat:(u,f,p)=>{it.each(p,(b,h)=>{i.setAttrib(u,h,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return null!==(f=u?.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return it.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{c[u]={block:u,remove:"all"}}),c})(r)),s(bT()),s(Kk(r)),{get:a=>lt(a)?o[a]:o,has:a=>jt(o,a),register:s,unregister:a=>(a&&o[a]&&delete o[a],o)}})(t),n=hn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(r=t).on("mouseup keydown",o=>{var s;((a,i,l)=>{const c=a.selection,u=a.getBody();Tm(a,null,l),8!==i&&46!==i||!c.isCollapsed()||c.getStart().innerHTML!==kl||Tm(a,ha(u,c.getStart()),!0),37!==i&&39!==i||Tm(a,ha(u,c.getStart()),!0)})(r,o.keyCode,(s=r.selection.getRng().endContainer,st(s)&&Vs(s.data,gn)))}),jo(t)||((r,o)=>{r.set({}),o.on("NodeChange",s=>{Hy(o,s.element,r.get())}),o.on("FormatApply FormatRemove",s=>{const a=k.from(s.node).map(i=>pl(i)?i:i.startContainer).bind(i=>Et(i)?k.some(i):k.from(i.parentElement)).getOrThunk(()=>jy(o));Hy(o,a,r.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,rn(t).formatter.apply(i,l,c)},remove:(r,o,s,a)=>{var l,c,u,f;l=r,c=o,u=s,f=a,rn(t).formatter.remove(l,c,u,f)},toggle:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,rn(t).formatter.toggle(i,l,c)},match:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,rn(t).formatter.match(l,c,u,f);var l,c,u,f},closest:r=>{return s=r,rn(t).formatter.closest(s);var s},matchAll:(r,o)=>{return a=r,i=o,rn(t).formatter.matchAll(a,i);var a,i},matchNode:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,rn(t).formatter.matchNode(l,c,u,f);var l,c,u,f},canApply:r=>{return s=r,rn(t).formatter.canApply(s);var s},formatChanged:(r,o,s,a)=>{return l=n,c=r,u=o,f=s,p=a,rn(t).formatter.formatChanged(l,c,u,f,p);var l,c,u,f,p},getCssText:xt(yT,t)};var r},e1=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},n1=t=>{const e=Es(),n=hn(0),r=hn(0),o={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,rn(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=o,c=r,u=n,f=e,p=s,b=a,rn(t).undoManager.add(l,c,u,f,p,b);var l,c,u,f,p,b},dispatchChange:()=>{t.setDirty(!0);const s=ud(t);s.bookmark=tf(t.selection),t.dispatch("change",{level:s,lastLevel:Hs(o.data,r.get()).getOrUndefined()})},undo:()=>{return a=o,i=n,l=r,rn(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=r,i=o.data,rn(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=o,i=r,rn(t).undoManager.clear(a,i)},reset:()=>{var a;a=o,rn(t).undoManager.reset(a)},hasUndo:()=>{return a=o,i=r,rn(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=o,i=r,rn(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=o,l=n,c=s,rn(t).undoManager.transact(i,l,c);var i,l,c},ignore:s=>{var i,l;i=n,l=s,rn(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,c,u,f;l=o,c=r,u=s,f=a,rn(t).undoManager.extra(l,c,u,f)}};return jo(t)||((s,a,i)=>{const l=hn(!1),c=u=>{fd(a,!1,i),a.add({},u)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",u=>{e1(u.command)||(OC(a,i),a.beforeChange())}),s.on("ExecCommand",u=>{e1(u.command)||c(u)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",u=>{const f=u.keyCode;if(u.isDefaultPrevented())return;const p=pe.os.isMacOS()&&"Meta"===u.key;(f>=33&&f<=36||f>=37&&f<=40||45===f||u.ctrlKey||p)&&(c(),s.nodeChanged()),46!==f&&8!==f||s.nodeChanged(),l.get()&&a.typing&&!Gm(ud(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",u=>{const f=u.keyCode;if(!u.isDefaultPrevented()){if(!(f>=33&&f<=36||f>=37&&f<=40||45===f))return!(f<16||f>20)||224===f||91===f||a.typing||u.ctrlKey&&!u.altKey||u.metaKey?void((pe.os.isMacOS()?u.metaKey:u.ctrlKey&&!u.altKey)&&a.beforeChange()):(a.beforeChange(),fd(a,!0,i),a.add({},u),void l.set(!0));a.typing&&c(u)}}),s.on("mousedown",u=>{a.typing&&c(u)}),s.on("input",u=>{var f,p;u.inputType&&("insertReplacementText"===u.inputType||"insertText"===(f=u).inputType&&null===f.data||"insertFromPaste"===(p=u).inputType||"insertFromDrop"===p.inputType)&&c(u)}),s.on("AddUndo Undo Redo ClearUndos",u=>{u.isDefaultPrevented()||s.nodeChanged()})})(t,o,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),o;var s},CT=[9,27,Ct.HOME,Ct.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ct.DOWN,Ct.UP,Ct.LEFT,Ct.RIGHT].concat(pe.browser.isFirefox()?[224]:[]),r1="data-mce-placeholder",o1=t=>"keydown"===t.type||"keyup"===t.type,s1=t=>{const e=t.keyCode;return e===Ct.BACKSPACE||e===Ct.DELETE},xT=(t,e)=>({from:t,to:e}),np=(t,e)=>{const n=D(t),r=D(e.container());return td(n,r).map(o=>((s,a)=>({block:s,position:a}))(o,e))},a1=(t,e)=>Nr(e,n=>Ji(n)||Vr(n.dom),n=>It(n,t)).filter(Un).getOr(t),i1=(t,e)=>{const n=((r,o)=>{const s=Ee(r);return Us(s,a=>o.isBlock(fe(a))).fold(ft(s),a=>s.slice(0,a))})(t,e);return Q(n,ue),n},l1=(t,e,n)=>{const r=ss(n,e);return Ge(r.reverse(),o=>Mn(t,o)).each(ue)},wT=(t,e,n,r,o)=>{if(Mn(r,n))return ks(n),Fn(n.dom);var a;a=r,0===Kt(Qo(o),l=>!Mn(a,l)).length&&Mn(r,e)&&Ft(o,Dt("br"));const s=lr(n.dom,Y.before(o.dom));return Q(i1(e,r),a=>{Ft(o,a)}),l1(r,t,e),s},ST=(t,e,n,r)=>{if(Mn(r,n)){if(Mn(r,e)){const a=$o((i=>{const l=(c,u)=>En(c).fold(()=>u,f=>r.isInline(fe(f))?l(f,u.concat(ca(f))):u);return l(i,[])})(n),(i,l)=>(ge(i,l),l),tl());ae(e),Vt(e,a)}return ue(n),Fn(e.dom)}const o=Kr(n.dom);return Q(i1(e,r),s=>{Vt(n,s)}),l1(r,t,e),o},c1=(t,e)=>{ti(t,e.dom).bind(n=>k.from(n.getNode())).map(D).filter(ua).each(ue)},d1=(t,e,n,r)=>{return c1(!0,e),c1(!1,n),(o=e,s=n,qn(s,o)?((a,i)=>{const l=ss(i,a);return k.from(l[l.length-1])})(s,o):k.none()).fold(xt(ST,t,e,n,r),xt(wT,t,e,n,r));var o,s},u1=(t,e,n,r,o)=>e?d1(t,r,n,o):d1(t,n,r,o),rp=(t,e)=>{const n=D(t.getBody());return(o=t.schema,s=n.dom,a=e,i=t.selection.getRng(),i.collapsed?((l,c,u,f)=>{const p=np(c,Y.fromRangeStart(f)),b=p.bind(h=>Rr(u,c,h.position).bind(v=>np(c,v).map(g=>{return C=l,S=c,E=u,We((N=g).position.getNode())&&!Mn(C,N.block)?ti(!1,N.block.dom).bind(A=>A.isEqual(N.position)?Rr(E,S,A).bind(R=>np(S,R)):k.some(N)).getOr(N):N;var C,S,E,N})));return wn(p,b,xT).filter(h=>{return!It((v=h).from.block,v.to.block)&&((v,g)=>{const C=D(v);return It(a1(C,g.from.block),a1(C,g.to.block))})(c,h)&&(v=>!1===Me(v.from.block.dom)&&!1===Me(v.to.block.dom))(h)&&(v=>{const g=C=>yh(C)||Su(C.dom);return g(v.from.block)&&g(v.to.block)})(h);var v})})(o,s,a,i):k.none()).map(o=>()=>{u1(n,e,o.from.block,o.to.block,t.schema).each(s=>{t.selection.setRng(s.toRange())})});var o,s,a,i},f1=(t,e)=>{const n=D(e),r=xt(It,t);return Wr(n,Ji,r).isSome()},op=(t,e)=>t.selection.isCollapsed()?k.none():(t=>{const e=D(t.getBody());return((n,r)=>{const o=lr(n.dom,Y.fromRangeStart(r)).isNone(),s=nr(n.dom,Y.fromRangeEnd(r)).isNone();return!(f1(a=n,(i=r).startContainer)||f1(a,i.endContainer))&&o&&s;var a,i})(e,t.selection.getRng())?(n=t,k.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r,o)=>{const s=r.getRng();return wn(td(n,D(s.startContainer)),td(n,D(s.endContainer)),(a,i)=>It(a,i)?k.none():k.some(()=>{s.deleteContents(),u1(n,!0,a,i,o).each(l=>{r.setRng(l.toRange())})})).getOr(k.none())})(e,t.selection,t.schema);var n})(t),as=(t,e,n,r,o)=>k.from(e._selectionOverrides.showCaret(t,n,r,o)),Dl=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?k.none():k.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(e)),sp=(t,e,n)=>e.collapsed?((r,o,s)=>{const a=df(1,r.getBody(),o),i=Y.fromRangeStart(a),l=i.getNode();if(il(l))return as(1,r,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(il(c))return as(1,r,c,!1,!1);const u=Sa(r.dom.getRoot(),i.getNode());return il(u)?as(1,r,u,!1,s):k.none()})(t,e,n).getOr(e):e,kT=t=>Bs(t)||yl(t),_T=t=>Ps(t)||Cl(t),m1=(t,e,n,r,o,s)=>{var a,i;as(r,t,s.getNode(!o),o,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();o?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,st(i=n)&&0===i.data.length&&a.remove(i)},ap=(t,e)=>((n,r)=>{const o=n.selection.getRng();if(!st(o.commonAncestorContainer))return k.none();const s=r?vn.Forwards:vn.Backwards,a=Mo(n.getBody()),i=xt(uf,r?a.next:a.prev),l=r?kT:_T,c=fl(s,n.getBody(),o),u=i(c),f=u&&Lr(r,u);if(!f||!Lc(c,f))return k.none();if(l(f))return k.some(()=>m1(n,o,c.getNode(),s,r,f));const p=i(f);return p&&l(p)&&Lc(f,p)?k.some(()=>m1(n,o,c.getNode(),s,r,p)):k.none()})(t,e),ip=(t,e)=>{const n=t.getBody();return e?Fn(n).filter(Bs):Kr(n).filter(Ps)},lp=t=>{const e=t.selection.getRng();return!e.collapsed&&(ip(t,!0).exists(n=>n.isEqual(Y.fromRangeStart(e)))||ip(t,!1).exists(n=>n.isEqual(Y.fromRangeEnd(e))))},Fr=Bo([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),p1=(t,e,n,r)=>Rr(e,t,n).bind(o=>{return s=o.getNode(),lt(s)&&(Ji(D(s))||Zi(D(s)))||((a,i,l,c,u)=>{const f=p=>u.isInline(p.nodeName.toLowerCase())&&!Po(l,c,a);return R0(!i,l).fold(()=>R0(i,c).fold(xe,f),f)})(t,e,n,o,r)?k.none():e&&Me(o.getNode())||!e&&Me(o.getNode(!0))?((a,i,l,c,u)=>{const f=u.getNode(!l);return td(D(i),D(c.getNode())).map(p=>Mn(a,p)?Fr.remove(p.dom):Fr.moveToElement(f)).orThunk(()=>k.some(Fr.moveToElement(f)))})(r,t,e,n,o):e&&Ps(n)||!e&&Bs(n)?k.some(Fr.moveToPosition(o)):k.none();var s}),g1=(t,e)=>k.from(Sa(t.getBody(),e)),h1=t=>{const e=t.dom,n=t.selection,r=Sa(t.getBody(),n.getNode());if(Vr(r)&&e.isBlock(r)&&e.isEmpty(r)){const o=e.create("br",{"data-mce-bogus":"1"});e.setHTML(r,""),r.appendChild(o),n.setRng(Y.before(o).toRange())}return!0},cp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return g1(t,n).filter(Me).fold(()=>((r,o,s,a)=>{const i=df(o?1:-1,r,s),l=Y.fromRangeStart(i),c=D(r);return!o&&Ps(l)?k.some(Fr.remove(l.getNode(!0))):o&&Bs(l)?k.some(Fr.remove(l.getNode())):!o&&Bs(l)&&Jf(c,l,a)?qN(c,l,a).map(u=>Fr.remove(u.getNode())):o&&Ps(l)&&Zf(c,l,a)?$N(c,l,a).map(u=>Fr.remove(u.getNode())):(u=r,b=a,((h,v)=>{const g=v.getNode(!h),C=h?"after":"before";return Et(g)&&g.getAttribute("data-mce-caret")===C})(f=o,p=l)?(h=f,v=p.getNode(!f),Se(v)?k.none():h&&Me(v.nextSibling)?k.some(Fr.moveToElement(v.nextSibling)):!h&&Me(v.previousSibling)?k.some(Fr.moveToElement(v.previousSibling)):k.none()).orThunk(()=>p1(u,f,p,b)):p1(u,f,p,b).bind(h=>((v,g,C)=>C.fold(S=>k.some(Fr.remove(S)),S=>k.some(Fr.moveToElement(S)),S=>Po(g,S,v)?k.none():k.some(Fr.moveToPosition(S))))(u,p,h)));var u,f,p,b,h,v})(t.getBody(),e,t.selection.getRng(),t.schema).map(r=>()=>r.fold(((o,s)=>a=>(o._selectionOverrides.hideFakeCaret(),xa(o,s,D(a)),!0))(t,e),((o,s)=>a=>{const i=s?Y.before(a):Y.after(a);return o.selection.setRng(i.toRange()),!0})(t,e),(o=>s=>(o.selection.setRng(s.toRange()),!0))(t))),()=>k.some(St))})(t,e):((n,r)=>{const o=n.selection.getNode();return Me(o)&&!pc(o)?g1(n,o.parentNode).filter(Me).fold(()=>k.some(()=>{var s;s=D(n.getBody()),Q(Ln(s,".mce-offscreen-selection"),ue),xa(n,r,D(n.selection.getNode())),sm(n)}),()=>k.some(St)):lp(n)?k.some(()=>{zv(n,n.selection.getRng(),D(n.getBody()))}):k.none()})(t,e),dp=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=Y.fromRangeStart(n.selection.getRng());return Rr(r,n.getBody(),o).filter(s=>r?FN(s):jN(s)).bind(s=>cf(r?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):k.none(),fi=st,b1=t=>fi(t)&&t.data[0]===bn,v1=t=>fi(t)&&t.data[t.data.length-1]===bn,y1=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(bn)},yd=(t,e)=>t?(n=>{var r;if(fi(n.previousSibling))return v1(n.previousSibling)||n.previousSibling.appendData(bn),n.previousSibling;if(fi(n))return b1(n)||n.insertData(0,bn),n;{const o=y1(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(e):(n=>{var r,o;if(fi(n.nextSibling))return b1(n.nextSibling)||n.nextSibling.insertData(0,bn),n.nextSibling;if(fi(n))return v1(n)||n.appendData(bn),n;{const s=y1(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(s,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(s),s}})(e),AT=xt(yd,!0),TT=xt(yd,!1),C1=(t,e)=>st(t.container())?yd(e,t.container()):yd(e,t.getNode()),x1=(t,e)=>{const n=e.get();return n&&t.container()===n&&_s(n)},up=(t,e)=>e.fold(n=>{pa(t.get());const r=AT(n);return t.set(r),k.some(Y(r,r.length-1))},n=>Fn(n).map(r=>{if(x1(r,t)){const o=t.get();return Y(o,1)}{pa(t.get());const o=C1(r,!0);return t.set(o),Y(o,1)}}),n=>Kr(n).map(r=>{if(x1(r,t)){const o=t.get();return Y(o,o.length-1)}{pa(t.get());const o=C1(r,!1);return t.set(o),Y(o,o.length-1)}}),n=>{pa(t.get());const r=TT(n);return t.set(r),k.some(Y(r,1))}),w1=(t,e)=>{for(let n=0;n<t.length;n++){const r=t[n].apply(null,e);if(r.isSome())return r}return k.none()},Xn=Bo([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),S1=(t,e)=>Ts(e,t)||t,RT=(t,e,n)=>{const r=Lv(n),o=S1(e,r.container());return Ls(t,o,r).fold(()=>nr(o,r).bind(xt(Ls,t,o)).map(s=>Xn.before(s)),k.none)},OT=(t,e)=>null===ha(t,e),E1=(t,e,n)=>Ls(t,e,n).filter(xt(OT,e)),DT=(t,e,n)=>{const r=Mv(n);return E1(t,e,r).bind(o=>lr(o,r).isNone()?k.some(Xn.start(o)):k.none())},BT=(t,e,n)=>{const r=Lv(n);return E1(t,e,r).bind(o=>nr(o,r).isNone()?k.some(Xn.end(o)):k.none())},PT=(t,e,n)=>{const r=Mv(n),o=S1(e,r.container());return Ls(t,o,r).fold(()=>lr(o,r).bind(xt(Ls,t,o)).map(s=>Xn.after(s)),k.none)},k1=t=>!Pv(fp(t)),zo=(t,e,n)=>w1([RT,DT,BT,PT],[t,e,n]).filter(k1),fp=t=>t.fold(me,me,me,me),_1=t=>t.fold(ft("before"),ft("start"),ft("end"),ft("after")),Cd=t=>t.fold(Xn.before,Xn.before,Xn.after,Xn.after),mp=t=>t.fold(Xn.start,Xn.start,Xn.end,Xn.end),LT=(t,e,n,r,o,s)=>wn(Ls(e,n,r),Ls(e,n,o),(a,i)=>a!==i&&((l,c,u)=>{const f=Ts(c,l),p=Ts(u,l);return lt(f)&&f===p})(n,a,i)?Xn.after(t?a:i):s).getOr(s),MT=(t,e)=>t.fold(je,n=>{return o=e,!(_1(r=n)===_1(o)&&fp(r)===fp(o));var r,o}),IT=(t,e)=>t?e.fold(Rn(k.some,Xn.start),k.none,Rn(k.some,Xn.after),k.none):e.fold(k.none,Rn(k.some,Xn.before),k.none,Rn(k.some,Xn.end)),N1=(t,e,n)=>{const r=t?1:-1;return e.setRng(Y(n.container(),n.offset()+r).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Uo;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Uo||(Uo={}));const xd=(t,e)=>t===vn.Backwards?Jr(e):e,FT=(t,e,n)=>t===vn.Forwards?e.next(n):e.prev(n),jT=(t,e,n,r)=>We(r.getNode(e===vn.Forwards))?Uo.Br:!1===Po(n,r)?Uo.Block:Uo.Wrap,A1=(t,e,n,r)=>{const o=Mo(n);let s=r;const a=[];for(;s;){const i=FT(e,o,s);if(!i)break;if(We(i.getNode(!1)))return e===vn.Forwards?{positions:xd(e,a).concat([i]),breakType:Uo.Br,breakAt:k.some(i)}:{positions:xd(e,a),breakType:Uo.Br,breakAt:k.some(i)};if(i.isVisible()){if(t(s,i)){const l=jT(0,e,s,i);return{positions:xd(e,a),breakType:l,breakAt:k.some(i)}}a.push(i),s=i}else s=i}return{positions:xd(e,a),breakType:Uo.Eol,breakAt:k.none()}},T1=(t,e,n,r)=>e(n,r).breakAt.map(o=>{const s=e(n,o).positions;return t===vn.Backwards?s.concat(o):[o].concat(s)}).getOr([]),pp=(t,e)=>Cn(t,(n,r)=>n.fold(()=>k.some(r),o=>wn(Sn(o.getClientRects()),Sn(r.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?r:o}).or(n)),k.none()),wd=(t,e)=>Sn(e.getClientRects()).bind(n=>pp(t,n.left)),Bl=xt(A1,Y.isAbove,-1),Pl=xt(A1,Y.isBelow,1),R1=xt(T1,-1,Bl),O1=xt(T1,1,Pl),D1=(t,e)=>Bl(t,e).breakAt.isNone(),B1=(t,e)=>Pl(t,e).breakAt.isNone(),zT=(t,e)=>wd(R1(t,e),e),UT=(t,e)=>wd(O1(t,e),e),HT=Me,P1=(t,e)=>Math.abs(t.left-e),L1=(t,e)=>Math.abs(t.right-e),M1=(t,e)=>us(t,(n,r)=>{const o=Math.min(P1(n,e),L1(n,e)),s=Math.min(P1(r,e),L1(r,e));return s===o&&un(r,"node")&&HT(r.node)||s<o?r:n}),qT=t=>{const e=n=>re(n,r=>{const o=fa(r);return o.node=t,o});if(Et(t))return e(t.getClientRects());if(st(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},I1=t=>Qe(t,qT);var Ll;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Ll||(Ll={}));const F1=(t,e,n,r,o,s)=>{let a=0;const i=[],l=f=>{let p=I1([f]);-1===t&&(p=p.reverse());for(let b=0;b<p.length;b++){const h=p[b];if(!n(h,c)){if(i.length>0&&e(h,Vo(i))&&a++,h.line=a,o(h))return!0;i.push(h)}}return!1},c=Vo(s.getClientRects());if(!c)return i;const u=s.getNode();return u&&(l(u),((f,p,b,h)=>{let v=h;for(;v=cl(v,f,Ah,p);)if(b(v))return})(t,r,l,u)),i},$T=xt(F1,Ll.Up,el,nl),WT=xt(F1,Ll.Down,nl,el),j1=t=>Vo(t.getClientRects()),z1=t=>e=>e.line>t,gp=t=>e=>e.line===t,is=(t,e)=>{t.selection.setRng(e),vl(t,t.selection.getRng())},hp=(t,e,n)=>k.some(sp(t,e,n)),U1=(t,e,n,r,o,s)=>{const a=e===vn.Forwards,i=Mo(t.getBody()),l=xt(uf,a?i.next:i.prev),c=a?r:o;if(!n.collapsed){const h=_c(n);if(s(h))return as(e,t,h,e===vn.Backwards,!1);if(lp(t)){const v=n.cloneRange();return v.collapse(e===vn.Backwards),k.from(v)}}const u=fl(e,t.getBody(),n);if(c(u))return Dl(t,u.getNode(!a));let f=l(u);const p=xh(n);if(!f)return p?k.some(n):k.none();if(f=Lr(a,f),c(f))return as(e,t,f.getNode(!a),a,!1);const b=l(f);return b&&c(b)&&Lc(f,b)?as(e,t,b.getNode(!a),a,!1):p?hp(t,f.toRange(),!1):k.none()},H1=(t,e,n,r,o,s)=>{const a=fl(e,t.getBody(),n),i=Vo(a.getClientRects()),l=e===Ll.Down,c=t.getBody();if(!i)return k.none();if(lp(t)){const v=l?Y.fromRangeEnd(n):Y.fromRangeStart(n);return(l?UT:zT)(c,v).orThunk(()=>k.from(v)).map(g=>g.toRange())}const u=(l?WT:$T)(c,z1(1),a),f=Kt(u,gp(1)),p=i.left,b=M1(f,p);if(b&&s(b.node)){const v=Math.abs(p-b.left),g=Math.abs(p-b.right);return as(e,t,b.node,v<g,!1)}let h;if(h=r(a)?a.getNode():o(a)?a.getNode(!0):_c(n),h){const v=((C,S,E,N)=>{const A=Mo(S);let R,L,P,j;const $=[];let B=0;1===C?(R=A.next,L=nl,P=el,j=Y.after(N)):(R=A.prev,L=el,P=nl,j=Y.before(N));const I=j1(j);do{if(!j.isVisible())continue;const U=j1(j);if(P(U,I))continue;$.length>0&&L(U,Vo($))&&B++;const G=fa(U);if(G.position=j,G.line=B,E(G))return $;$.push(G)}while(j=R(j));return $})(e,c,z1(1),h);let g=M1(Kt(v,gp(1)),p);if(g||(g=Vo(Kt(v,gp(0))),g))return hp(t,g.position.toRange(),!1)}return 0===f.length?bp(t,l).filter(l?o:r).map(v=>sp(t,v.toRange(),!1)):k.none()},bp=(t,e)=>{const n=t.selection.getRng(),r=e?Y.fromRangeEnd(n):Y.fromRangeStart(n),o=(s=r.container(),a=t.getBody(),Wr(D(s),i=>V_(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=Pl(o,r);return to(i.positions)}{const i=Bl(o,r);return Sn(i.positions)}},q1=(t,e,n)=>bp(t,e).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),Sd=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},$1=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},W1=(t,e,n)=>up(e,n).map(r=>(Sd(t,r),n)),V1=(t,e,n)=>!!al(t)&&((t,e,n)=>{const r=t.getBody(),o=((s,a,i)=>{const l=Y.fromRangeStart(s);if(s.collapsed)return l;{const c=Y.fromRangeEnd(s);return i?lr(a,c).getOr(c):nr(a,l).getOr(l)}})(t.selection.getRng(),r,n);return((s,a,i,l)=>{const c=Lr(s,l),u=zo(a,i,c);return zo(a,i,c).bind(xt(IT,s)).orThunk(()=>((f,p,b,h,v)=>{const g=Lr(f,v);return Rr(f,b,g).map(xt(Lr,f)).fold(()=>h.map(Cd),C=>zo(p,b,C).map(xt(LT,f,p,b,g,C)).filter(xt(MT,h))).filter(k1)})(s,a,i,u,l))})(n,xt(wa,t),r,o).bind(s=>W1(t,e,s))})(t,e,n).isSome(),K1=(t,e,n)=>!!al(e)&&((r,o)=>{const s=o.selection.getRng(),a=r?Y.fromRangeEnd(s):Y.fromRangeStart(s);return!!he(o.selection.getSel().modify)&&(r&&qu(a)?N1(!0,o.selection,a):!(r||!$u(a))&&N1(!1,o.selection,a))})(t,e),XT=xt(K1,!0),YT=xt(K1,!1),Ed=(t,e,n)=>{if(al(t)){const r=bp(t,e).getOrThunk(()=>{const o=t.selection.getRng();return e?Y.fromRangeEnd(o):Y.fromRangeStart(o)});return zo(xt(wa,t),t.getBody(),r).exists(o=>{const s=Cd(o);return up(n,s).exists(a=>(Sd(t,a),!0))})}return!1},X1=(t,e)=>n=>up(e,n).map(r=>()=>Sd(t,r)),Y1=(t,e,n,r)=>{const o=t.getBody(),s=xt(wa,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,r)),om(t),zo(s,o,Y.fromRangeStart(t.selection.getRng())).map(mp).bind(X1(t,e)).each(Qn)}),t.nodeChanged()},vp=(t,e,n)=>{if(t.selection.isCollapsed()&&al(t)){const r=Y.fromRangeStart(t.selection.getRng());return((o,s,a,i)=>{const l=(f=o.getBody(),p=i.container(),Ts(p,f)||f),c=xt(wa,o),u=zo(c,l,i);var f,p;return u.bind(f=>a?f.fold(ft(k.some(mp(f))),k.none,ft(k.some(Cd(f))),k.none):f.fold(k.none,ft(k.some(Cd(f))),k.none,ft(k.some(mp(f))))).map(X1(o,s)).getOrThunk(()=>{const f=Ja(a,l,i),p=f.bind(b=>zo(c,l,b));return wn(u,p,()=>Ls(c,l,i).bind(b=>{return wn(Fn(h=b),Kr(h),(v,g)=>{const C=Lr(!0,v),S=Lr(!1,g);return nr(h,C).forall(E=>E.isEqual(S))}).getOr(!0)?k.some(()=>{xa(o,a,D(b))}):k.none();var h})).getOrThunk(()=>p.bind(()=>f.map(b=>()=>{a?Y1(o,s,i,b):Y1(o,s,b,i)})))})})(t,e,n,r)}return k.none()},G1=(t,e)=>{const n=D(t.getBody()),r=D(t.selection.getStart()),o=ss(r,n);return Us(o,e).fold(ft(o),s=>o.slice(0,s))},GT=t=>1===kn(t),Q1=(t,e)=>{const n=xt(fy,t);return Qe(e,r=>n(r)?[r.dom]:[])},Z1=t=>{const e=G1(n=t,r=>n.schema.isBlock(fe(r)));var n;return Q1(t,e)},J1=(t,e)=>{const n=t.selection.getStart(),r=((o,s)=>{const a=s.parentElement;return We(s)&&!te(a)&&o.dom.isEmpty(a)})(t,n)||Tf(D(n))?uy(n,e):((o,s)=>{const{caretContainer:a,caretPosition:i}=dy(s);return o.insertNode(a.dom),i})(t.selection.getRng(),e);t.selection.setRng(r.toRange())},tx=t=>st(t.startContainer),yp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=Kt(G1(r=t,o=>r.schema.isBlock(fe(o))||kn(o)>1),GT);var r;return to(n).bind(r=>{const o=Y.fromRangeStart(t.selection.getRng());return Fv(e,o,r.dom)&&!Tf(r)?k.some(()=>((s,a,i,l)=>{const c=Q1(a,l);if(0===c.length)xa(a,s,i);else{const u=uy(i.dom,c);a.selection.setRng(u.toRange())}})(e,t,r,n)):k.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&tx(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!te(o)&&fy(n,D(o))})(t,e)&&(n=>{return(o=>{const s=o.startContainer.parentNode,a=o.endContainer.parentNode;return!te(s)&&!te(a)&&s.isEqualNode(a)})(r=n)&&(o=>{const s=o.endContainer;return o.endOffset===(st(s)?s.length:s.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(e);var n})(n)){const r=Z1(n);return k.some(()=>{om(n),((o,s)=>{const a=ee(s,Z1(o));a.length>0&&J1(o,a)})(n,r)})}return k.none()})(t),Ml=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(tx(n)||e.dom.isEmpty(n.startContainer))&&(o=D((r=e).selection.getStart()),s=r.schema,!Ng(o,a=>Or(a.dom),a=>s.isBlock(fe(a))));var r,o,s})(t)&&J1(t,[]),!0),Cp=(t,e,n)=>lt(n)?k.some(()=>{t._selectionOverrides.hideFakeCaret(),xa(t,e,D(n))}):k.none(),xp=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=r?yl:Cl,a=fl(r?vn.Forwards:vn.Backwards,n.getBody(),n.selection.getRng());return o(a)?Cp(n,r,a.getNode(!r)):k.from(Lr(r,a)).filter(i=>o(i)&&Lc(a,i)).bind(i=>Cp(n,r,i.getNode(!r)))})(t,e):((n,r)=>{const o=n.selection.getNode();return Do(o)?Cp(n,r,o):k.none()})(t,e),wp=t=>Ks(t??"").getOr(0),ex=(t,e)=>(t||"table"===fe(e)?"margin":"padding")+("rtl"===tt(e,"direction")?"-right":"-left"),nx=t=>{const e=ox(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,fr(e,o=>{const s=ex(i0(n),o),a=dt(o,s).map(wp).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&a>0})));var n},rx=t=>Hu(t)||Zi(t),ox=t=>Kt(cn(t.selection.getSelectedBlocks()),e=>!rx(e)&&!sr(e).exists(rx)&&Nr(e,n=>Vr(n.dom)||Me(n.dom)).exists(n=>Vr(n.dom))),sx=(t,e)=>{var n,r;const{dom:o}=t,s=Ik(t),a=null!==(r=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",i=wp(s),l=i0(t);Q(ox(t),c=>{((u,f,p,b,h,v)=>{const g=ex(p,D(v)),C=wp(u.getStyle(v,g));if("outdent"===f){const S=Math.max(0,C-b);u.setStyle(v,g,S?S+h:"")}else u.setStyle(v,g,C+b+h)})(o,e,l,i,a,c.dom)})},ax=t=>sx(t,"outdent"),ix=t=>{if(t.selection.isCollapsed()&&nx(t)){const e=t.dom,n=t.selection.getRng(),r=Y.fromRangeStart(n),o=e.getParent(n.startContainer,e.isBlock);if(null!==o&&Qf(D(o),r,t.schema))return k.some(()=>ax(t))}return k.none()},lx=(t,e,n)=>Zn([ix,cp,ap,(r,o)=>vp(r,e,o),rp,mm,dp,xp,op,yp],r=>r(t,n)).filter(r=>t.selection.isEditable()),cx=t=>void 0===t.touches||1!==t.touches.length?k.none():k.some(t.touches[0]),Sp=(t,e)=>jt(t,e.nodeName),tR=(t,e)=>!!st(e)||!!Et(e)&&!(Sp(t.getBlockElements(),e)||Dr(e)||sa(t,e)||Cu(e)),eR=(t,e)=>{if(st(e)){if(0===e.data.length)return!0;if(/^\s+$/.test(e.data))return!e.nextSibling||Sp(t,e.nextSibling)||Cu(e.nextSibling)}return!1},dx=t=>t.dom.create(In(t),sl(t)),nR=t=>{const e=t.dom,n=t.selection,r=t.schema,o=r.getBlockElements(),s=n.getStart(),a=t.getBody();let i,l,c=!1;const u=In(t);if(!s||!Et(s))return;const f=a.nodeName.toLowerCase();if(!r.isValidChild(f,u.toLowerCase())||(E=o,N=a,Te(gv(D(s),D(N)),R=>Sp(E,R.dom))))return;var E,N;const p=n.getRng(),{startContainer:b,startOffset:h,endContainer:v,endOffset:g}=p,C=Ca(t);let S=a.firstChild;for(;S;)if(Et(S)&&ME(r,S),tR(r,S)){if(eR(o,S)){l=S,S=S.nextSibling,e.remove(l);continue}i||(i=dx(t),a.insertBefore(i,S),c=!0),l=S,S=S.nextSibling,i.appendChild(l)}else i=null,S=S.nextSibling;c&&C&&(p.setStart(b,h),p.setEnd(v,g),n.setRng(p),t.nodeChanged())},ux=(t,e,n)=>{const r=D(dx(t)),o=tl();Vt(r,o),n(e,r);const s=document.createRange();return s.setStartBefore(o.dom),s.setEndBefore(o.dom),s},fx=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),rR=(t,e,n)=>function(r){const o=arguments,s=o[o.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return r;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(o[0])+'">'+t.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},mx=(t,e)=>{e.hasAttribute("data-mce-caret")&&(Wu(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},oR=(t,e)=>{const n=Cs(D(t.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void mx(t,n)):void(Ch(n)&&(mx(t,n),t.undoManager.add()))},px=Me,gx=(t,e,n)=>{const r=Mo(t.getBody()),o=xt(uf,1===e?r.next:r.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!o(Y.fromRangeStart(n))){const a=D((i=>{const l=i.dom.create(In(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Bt(D(s),a):Ft(D(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},hx=(t,e)=>((n,r)=>{const o=r?vn.Forwards:vn.Backwards,s=n.selection.getRng();return(a=o,i=n,l=s,U1(i,a,l,Bs,Ps,px)).orThunk(()=>(gx(n,o,s),k.none()));var a,i,l})(t,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return Pv(o)?!r:r})(t.selection,e)).exists(n=>(is(t,n),!0)),bx=(t,e)=>((n,r)=>{const o=r?1:-1,s=n.selection.getRng();return(a=o,i=n,l=s,H1(i,a,l,c=>Bs(c)||mv(c),c=>Ps(c)||pv(c),px)).orThunk(()=>(gx(n,o,s),k.none()));var a,i,l})(t,e).exists(n=>(is(t,n),!0)),vx=(t,e)=>q1(t,e,e?Ps:Bs),kd=(t,e)=>ip(t,!e).map(n=>{const r=n.toRange(),o=t.selection.getRng();return e?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(is(t,n),!0)),sR=t=>At(["figcaption"],fe(t)),yx=(t,e)=>!!t.selection.isCollapsed()&&((n,r)=>{const o=D(n.getBody()),s=Y.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const c=xt(It,i);return Nr(D(a.container()),u=>l.isBlock(fe(u)),c).filter(sR)})(s,o,n.schema).exists(()=>{if(a=o,l=s,r?B1(a.dom,l):D1(a.dom,l)){const a=ux(n,o,r?Vt:Ae);return n.selection.setRng(a),!0}var a,l;return!1})})(t,e),Cx=(t,e)=>{return n=t,e?k.from(n.dom.getParent(n.selection.getNode(),"details")).map(o=>((s,a)=>{const i=s.selection.getRng(),l=Y.fromRangeStart(i);return!(s.getBody().lastChild!==a||!B1(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,o)).getOr(!1):k.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(o=>k.from(n.dom.getParent(o,"details")).map(s=>((a,i,l)=>{const c=a.selection.getRng(),u=Y.fromRangeStart(c);return!(a.getBody().firstChild!==i||!D1(l,u)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,o))).getOr(!1);var n},xx={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},wx=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,qt=(t,...e)=>()=>t.apply(null,e),Il=(t,e)=>{return Ge((r=e,Qe(re(t,s=>({...xx,...s})),o=>wx(o,r)?[o]:[])),n=>n.action());var r},Sx=(t,e)=>{return Zn((r=e,Qe(re(t,s=>({...xx,...s})),o=>wx(o,r)?[o]:[])),n=>n.action());var r},Ex=(t,e)=>{const n=e?vn.Forwards:vn.Backwards,r=t.selection.getRng();return U1(t,n,r,yl,Cl,Do).exists(o=>(is(t,o),!0))},kx=(t,e)=>{const n=e?1:-1,r=t.selection.getRng();return H1(t,n,r,yl,Cl,Do).exists(o=>(is(t,o),!0))},_x=(t,e)=>q1(t,e,e?Cl:yl),Nx=Bo([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Fl={...Nx,none:t=>Nx.none(t)},Ax=(t,e,n)=>Qe(Ee(t),r=>ln(r,e)?n(r)?[r]:[]:Ax(r,e,n)),Tx=(t,e)=>ao(t,"table",e),Ep=(t,e,n,r,o=je)=>{const s=1===r;if(!s&&n<=0)return Fl.first(t[0]);if(s&&n>=t.length-1)return Fl.last(t[t.length-1]);{const a=n+r,i=t[a];return o(i)?Fl.middle(e,i):Ep(t,e,a,r,o)}},Rx=(t,e)=>Tx(t,e).bind(n=>{const r=Ax(n,"th,td",je);return Us(r,o=>It(t,o)).map(o=>({index:o,all:r}))}),aR=["img","br"],iR=t=>{return(e=t,Uu.getOption(e)).filter(n=>0!==n.trim().length||n.indexOf(gn)>-1).isSome()||At(aR,fe(t))||Qs(n=t)&&"false"===tr(n,"contenteditable");var n,e},Ox=(t,e,n,r,o)=>{const s=Ln(D(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,c)=>Cn(i,(u,f)=>u.fold(()=>k.some(f),p=>{const b=Math.sqrt(Math.abs(p.x-l)+Math.abs(p.y-c)),h=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return k.some(h<b?f:p)}),k.none()))(Kt((i=t,Qe(s,c=>{const u={left:(f=fa(c.getBoundingClientRect())).left- -1,top:f.top- -1,right:f.right+-2,bottom:f.bottom+-2,width:f.width+-1,height:f.height+-1};var f;return[{x:u.left,y:i(u),cell:c},{x:u.right,y:i(u),cell:c}]})),i=>e(i,o)),r,o).map(i=>i.cell)},lR=xt(Ox,t=>t.bottom,(t,e)=>t.y<e),cR=xt(Ox,t=>t.top,(t,e)=>t.y>e),Dx=(t,e,n)=>{const r=t(e,n);return(o=r).breakType===Uo.Wrap&&0===o.positions.length||!We(n.getNode())&&(o=>o.breakType===Uo.Br&&1===o.positions.length)(r)?!((o,s,a)=>a.breakAt.exists(i=>o(s,i).breakAt.isSome()))(t,e,r):r.breakAt.isNone();var o},dR=xt(Dx,Bl),uR=xt(Dx,Pl),fR=(t,e,n,r)=>{const o=t.selection.getRng(),s=e?1:-1;return!(!E0()||!((a,i,l)=>{const c=Y.fromRangeStart(i);return ti(!a,l).exists(u=>u.isEqual(c))})(e,o,n)||(as(s,t,n,!e,!1).each(a=>{is(t,a)}),0))},Bx=(t,e,n)=>{const r=((s,a)=>{const i=a.getNode(s);return Oo(i)?k.some(i):k.none()})(!!e,n),o=!1===e;r.fold(()=>is(t,n.toRange()),s=>ti(o,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>is(t,n.toRange()),a=>{return i=e,c=s,void(l=t).undoManager.transact(()=>{const u=i?Bt:Ft,f=ux(l,D(c),u);is(l,f)});var i,l,c}))},mR=(t,e,n,r)=>{const o=t.selection.getRng(),s=Y.fromRangeStart(o),a=t.getBody();if(!e&&dR(r,s)){const i=(l=a,(f=c=n,p=u=s,Sn(p.getClientRects()).bind(b=>lR(f,b.left,b.top)).bind(b=>{return wd(Kr(h=b).map(v=>Bl(h,v).positions.concat(v)).getOr([]),p);var h})).orThunk(()=>Sn(u.getClientRects()).bind(f=>pp(R1(l,Y.before(c)),f.left))).getOr(Y.before(c)));return Bx(t,e,i),!0}var l,c,u,f,p;if(e&&uR(r,s)){const i=((l,c,u)=>((f,p)=>to(p.getClientRects()).bind(b=>cR(f,b.left,b.top)).bind(b=>{return wd(Fn(h=b).map(v=>[v].concat(Pl(h,v).positions)).getOr([]),p);var h}))(c,u).orThunk(()=>Sn(u.getClientRects()).bind(f=>pp(O1(l,Y.after(c)),f.left))).getOr(Y.after(c)))(a,n,s);return Bx(t,e,i),!0}return!1},Px=(t,e,n)=>k.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(r=>k.from(t.dom.getParent(r,"table")).map(o=>n(t,e,o,r))).getOr(!1),Lx=(t,e)=>Px(t,e,fR),kp=(t,e)=>Px(t,e,mR),Mx=(t,e,n)=>n.fold(k.none,k.none,(r,o)=>{return(s=o,ea(s,iR)).map(a=>{return(t=>{const e=si.getWin(t).dom,n=(o,s,a,i)=>Df(e,o,s,a,i),r=t.match({domRange:s=>{const a=D(s.startContainer),i=D(s.endContainer);return Eb(a,s.startOffset,i,s.endOffset)},relative:cN,exact:Eb});return((o,s)=>{var i;return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(u=>!1===u.collapsed).map(u=>bl.rtl(D(u.endContainer),u.endOffset,D(u.startContainer),u.startOffset)).getOrThunk(()=>wb(0,bl.ltr,c)):wb(0,bl.ltr,c)})(0,(i=o,s.match({domRange:c=>({ltr:ft(c),rtl:k.none}),relative:(c,u)=>({ltr:qr(()=>xb(i,c,u)),rtl:qr(()=>k.some(xb(i,u,c)))}),exact:(c,u,f,p)=>({ltr:qr(()=>Df(i,c,u,f,p)),rtl:qr(()=>k.some(Df(i,f,p,c,u)))})})))})(e,r).match({ltr:n,rtl:n})})(si.exact(i=a,0,i,0));var i});var s},r=>(t.execCommand("mceTableInsertRowAfter"),Ix(t,e,r))),Ix=(t,e,n)=>{return Mx(t,e,(o=io,Rx(r=n,void 0).fold(()=>Fl.none(r),s=>Ep(s.all,r,s.index,1,o))));var r,o},pR=(t,e,n)=>{return Mx(t,e,(o=io,Rx(r=n,void 0).fold(()=>Fl.none(),s=>Ep(s.all,r,s.index,-1,o))));var r,o},Fx=(t,e)=>{const n=["table","li","dl"],r=D(t.getBody()),o=a=>{const i=fe(a);return It(a,r)||At(n,i)},s=t.selection.getRng();return(a=D(e?s.endContainer:s.startContainer),i=o,((l,c,u=xe)=>u(c)?k.none():At(l,fe(c))?k.some(c):To(c,l.join(","),f=>ln(f,"table")||u(f)))(["td","th"],a,i)).map(a=>(Tx(a,o).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?Ix:pR)(t,o,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},ho=(t,e)=>({container:t,offset:e}),_d=De.DOM,Nd=t=>e=>t===e?-1:0,_p=(t,e,n)=>{if(st(t)&&e>=0)return k.some(ho(t,e));{const r=da(_d);return k.from(r.backwards(t,e,Nd(t),n)).map(o=>ho(o.container,o.container.data.length))}},Np=(t,e,n)=>{if(!st(t))return k.none();if(e>=0&&e<=t.data.length)return k.some(ho(t,e));{const o=da(_d);return k.from(o.backwards(t,e,Nd(t),n)).bind(s=>Np(s.container,e+s.container.data.length,n))}},jx=(t,e,n)=>{if(!st(t))return k.none();const r=t.data;if(e<=r.length)return k.some(ho(t,e));{const o=da(_d);return k.from(o.forwards(t,e,Nd(t),n)).bind(s=>jx(s.container,e-r.length,n))}},Ap=(t,e,n,r,o)=>{const s=da(t,(a=>i=>a.isBlock(i)||At(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i))(t));return k.from(s.backwards(e,n,r,o))},zx=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),gR=(t,e)=>t.substring(e.length),Tp=(t,e,n,r=!1)=>{if(!(o=e).collapsed||!st(o.startContainer))return k.none();var o;const s={text:"",offset:0},a=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return Ap(t,e.startContainer,e.startOffset,(i,l,c)=>(s.text=c+s.text,s.offset+=l,((u,f,p,b=!1)=>{let h;const v=p.charAt(0);for(h=f-1;h>=0;h--){const g=u.charAt(h);if(!b&&zx(g))return k.none();if(v===g&&fn(u,p,h,f))break}return k.some(h)})(s.text,s.offset,n,r).getOr(l)),a).bind(i=>{const l=e.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(e.endContainer,e.endOffset),l.collapsed)return k.none();const c=br(l.toString().replace(/\u00A0/g," "));return 0!==c.lastIndexOf(n)?k.none():k.some({text:gR(c,n),range:l,trigger:n})})},Ux=t=>{if(3===t.nodeType)return ho(t,t.data.length);{const e=t.childNodes;return e.length>0?Ux(e[e.length-1]):ho(t,e.length)}},Hx=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?Hx(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?Ux(n[n.length-1]):ho(t,e)},qx=(t,e,n,r={})=>{var o;const s=e(),a=null!==(o=t.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=Kt(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>(u=>f=>{const p=Hx(f.startContainer,f.startOffset);return!((b,h)=>{var v;const g=null!==(v=b.getParent(h.container,b.isBlock))&&void 0!==v?v:b.getRoot();return Ap(b,h.container,h.offset,(C,S)=>0===S?-1:S,g).filter(C=>{const S=C.container.data.charAt(C.offset-1);return!zx(S)}).isSome()})(u,p)})(t.dom))(n.range,a,n.text));if(0===i.length)return k.none();const l=Promise.all(re(i,c=>c.fetch(n.text,c.maxResults,r).then(u=>({matchText:n.text,items:u,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return k.some({lookupData:l,context:n})};var Ho;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Ho||(Ho={}));const Rp=(t,e,n)=>t.stype===Ho.Error?e(t.serror):n(t.svalue),mi=t=>({stype:Ho.Value,svalue:t}),jl=t=>({stype:Ho.Error,serror:t}),hR=Rp,Op=t=>Xt(t)&&an(t).length>100?" removed due to size":JSON.stringify(t,null,2),Ad=(t,e)=>jl([{path:t,getErrorInfo:e}]),$x=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const s in o)jt(o,s)&&(n[s]=t(n[s],o[s]))}return n},Dp=$x((t,e)=>Mt(t)&&Mt(e)?Dp(t,e):e),Wx=($x((t,e)=>e),t=>({tag:"defaultedThunk",process:ft(t)})),Vx=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Bp=t=>({extract:(e,n)=>{return(r=t(n)).stype===Ho.Error?Ad(e,ft(r.serror)):r;var r},toString:ft("val")}),yR=Bp(mi),Kx=(t,e,n,r)=>r(Re(t,e).getOrThunk(()=>n(t))),CR=(t,e,n,r,o)=>{const s=i=>o.extract(e.concat([r]),i),a=i=>i.fold(()=>mi(k.none()),l=>{return(u=o.extract(e.concat([r]),l)).stype===Ho.Value?{stype:Ho.Value,svalue:(0,k.some)(u.svalue)}:u;var u});switch(t.tag){case"required":return i=e,u=s,Re(l=n,c=r).fold(()=>{return p=c,b=l,Ad(i,()=>'Could not find valid *required* value for "'+p+'" in '+Op(b));var p,b},u);case"defaultedThunk":return Kx(n,r,t.process,s);case"option":return((i,l,c)=>c(Re(i,l)))(n,r,a);case"defaultedOptionThunk":return((i,l,c,u)=>u(Re(i,l).map(f=>!0===f?c(i):f)))(n,r,t.process,a);case"mergeWithThunk":return Kx(n,r,ft({}),i=>{const l=Dp(t.process(n),i);return s(l)})}var i,l,c,u},Pp=t=>({extract:(e,n)=>((r,o,s)=>{const a={},i=[];for(const l of s)Vx(l,(c,u,f,p)=>{const b=CR(f,r,o,c,p);hR(b,h=>{i.push(...h)},h=>{a[u]=h})},(c,u)=>{a[c]=u(o)});return i.length>0?jl(i):mi(a)})(e,n,t),toString:()=>"obj{\n"+re(t,n=>Vx(n,(r,o,s,a)=>r+" -> "+a.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),Xx=t=>({extract:(e,n)=>(t=>{const e=(r=>{const o=[],s=[];return Q(r,a=>{Rp(a,i=>s.push(i),i=>o.push(i))}),{values:o,errors:s}})(t);return e.errors.length>0?(n=e.errors,Rn(jl,Zl)(n)):mi(e.values);var n})(re(n,(o,s)=>t.extract(e.concat(["["+s+"]"]),o))),toString:()=>"array("+t.toString()+")"}),Yx=(t,e)=>((t,e)=>({extract:(n,r)=>Re(r,t).fold(()=>{return s=t,Ad(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},o=>{return s=n,a=r,Re(i=e,l=o).fold(()=>{return u=i,f=l,Ad(s,()=>'The chosen schema: "'+f+'" did not exist in branches: '+Op(u));var u,f},c=>c.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+an(e)}))(t,ds(e,Pp)),wR=ft(yR),Td=(t,e)=>Bp(n=>{const r=typeof n;return t(n)?mi(n):jl(`Expected type: ${e} but got: ${r}`)}),SR=Td(x,"number"),Rd=Td(Nt,"string"),ER=Td(Tn,"boolean"),Lp=Td(he,"function"),zl=(t,e,n,r)=>({tag:"field",key:t,newKey:e,presence:n,prop:r}),Gx=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),Qx=(t,e)=>zl(t,t,{tag:"required",process:{}},e),Zx=t=>Qx(t,Rd),Jx=t=>Qx(t,Lp),Mp=(t,e)=>zl(t,t,{tag:"option",process:{}},e),Od=t=>Mp(t,Rd),pi=(t,e,n)=>zl(t,t,Wx(e),n),tw=(t,e)=>pi(t,e,SR),ew=(t,e,n)=>{return pi(t,e,(r=n,o=s=>At(r,s)?er.value(s):er.error(`Unsupported value: "${s}", choose one of "${r.join(", ")}".`),Bp(s=>o(s).fold(jl,mi))));var r,o},Ip=(t,e)=>pi(t,e,ER),Fp=(t,e)=>pi(t,e,Lp),kR=Zx("type"),_R=Jx("fetch"),jp=Jx("onAction"),NR=Fp("onSetup",()=>St),AR=Od("text"),TR=Od("icon"),RR=Od("tooltip"),OR=Od("label"),DR=Ip("active",!1),BR=Ip("enabled",!0),nw=Ip("primary",!1),Ul=t=>pi("type",t,Rd),PR=Pp([kR,Zx("trigger"),tw("minChars",1),((t,e)=>zl(t,t,Wx(1),wR()))("columns"),tw("maxResults",10),Mp("matches",Lp),_R,jp,(rw=Rd,pi("highlightOn",[],Xx(rw)))]);var rw;const zp=[BR,RR,TR,AR,NR],ow=[DR].concat(zp),LR=[Fp("predicate",xe),ew("scope","node",["node","editor"]),ew("position","selection",["node","selection","line"])],MR=zp.concat([Ul("contextformbutton"),nw,jp,Gx("original",me)]),IR=ow.concat([Ul("contextformbutton"),nw,jp,Gx("original",me)]),FR=zp.concat([Ul("contextformbutton")]),jR=ow.concat([Ul("contextformtogglebutton")]),zR=Yx("type",{contextformbutton:MR,contextformtogglebutton:IR});Pp([Ul("contextform"),Fp("initValue",ft("")),OR,((t,e)=>zl(t,t,{tag:"required",process:{}},Xx(e)))("commands",zR),Mp("launch",Yx("type",{contextformbutton:FR,contextformtogglebutton:jR}))].concat(LR));const HR=t=>{const e=Es(),n=hn(!1),r=e.isSet,o=()=>{r()&&(t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=qr(()=>(t=>{const e=t.ui.registry.getAll().popups,n=ds(e,s=>{return(a=s,((t,e,n)=>{return r=(i=e.extract([t],a=n)).stype===Ho.Error?{stype:Ho.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,Rp(r,er.error,er.value);var a,i,r})("Autocompleter",PR,a)).fold(i=>{throw new Error("Errors: \n"+(c=>{const u=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:ft("... (only showing first ten failures)")}]):c;return re(u,f=>"Failed path: ("+f.path.join(" > ")+")\n"+f.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+Op(l.input));var l},me);var a}),r=La(ko(n,s=>s.trigger)),o=Pa(n);return{dataset:n,triggers:r,lookupByTrigger:s=>Kt(o,a=>a.trigger===s)}})(t)),a=l=>{var c;(c=l,e.get().map(u=>Tp(t.dom,t.selection.getRng(),u.trigger,!0).bind(f=>qx(t,s,f,c))).getOrThunk(()=>((u,f)=>{const p=f(),b=u.selection.getRng();return(h=u.dom,v=b,g=p,Zn(g.triggers,C=>Tp(h,v,C))).bind(h=>qx(u,f,h));var h,v,g})(t,s))).fold(o,c=>{var u;u=c.context,r()||e.set({trigger:u.trigger,matchLength:u.text.length}),c.lookupData.then(u=>{e.get().map(f=>{const p=c.context;f.trigger===p.trigger&&(p.text.length-f.matchLength>=10?o():(e.set({...f,matchLength:p.text.length}),n.get()?(Rf(t,{range:p.range}),t.dispatch("AutocompleterUpdate",{lookupData:u})):(n.set(!0),Rf(t,{range:p.range}),t.dispatch("AutocompleterStart",{lookupData:u}))))})})})},i=()=>e.get().bind(({trigger:l})=>{const c=t.selection.getRng();return Tp(t.dom,c,l,n.get()).filter(({range:u})=>((f,p)=>{const b=f.compareBoundaryPoints(window.Range.START_TO_START,p),h=f.compareBoundaryPoints(window.Range.END_TO_END,p);return b>=0&&h<=0})(c,u)).map(({range:u})=>u)});t.addCommand("mceAutocompleterReload",(l,c)=>{const u=Xt(c)?c.fetchOptions:{};a(u)}),t.addCommand("mceAutocompleterClose",o),t.addCommand("mceAutocompleterRefreshActiveRange",()=>{i().each(l=>{Rf(t,{range:l})})}),t.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>i().isSome()),((l,c)=>{const u=zu(c.load,50);l.on("input",f=>{("insertCompositionText"!==f.inputType||l.composing)&&u.throttle()}),l.on("keydown",f=>{const p=f.which;8===p?u.throttle():27===p?(u.cancel(),c.cancelIfNecessary()):38!==p&&40!==p||u.cancel()},!0),l.on("remove",u.cancel)})(t,{cancelIfNecessary:o,load:a})},qR=Dn().browser.isSafari(),sw=t=>ks(D(t)),aw=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},Dd=(t,e)=>k.from(t.getParent(e.container(),"details")),iw=(t,e)=>Dd(t,e).isSome(),lw=(t,e)=>{const n=e.getNode();Ie(n)||t.selection.setCursorLocation(n,e.offset())},cw=(t,e,n)=>{const r=t.dom.getParent(e.container(),"details");if(r&&!r.open){const o=t.dom.select("summary",r)[0];o&&(n?Fn(o):Kr(o)).each(s=>lw(t,s))}else lw(t,e)},dw=(t,e,n)=>{const{dom:r,selection:o}=t,s=t.getBody();if("character"===n){const a=Y.fromRangeStart(o.getRng()),i=r.getParent(a.container(),r.isBlock),l=Dd(r,a),c=i&&r.isEmpty(i),u=te(i?.previousSibling),f=te(i?.nextSibling);return!!(c&&(e?f:u)&&Ja(!e,s,a).exists(p=>iw(r,p)&&!lc(l,Dd(r,p))))||Ja(e,s,a).fold(xe,p=>{const b=Dd(r,p);if(iw(r,p)&&!lc(l,b)){if(e||cw(t,p,!1),i&&c){if(e&&u||!e&&f)return!0;cw(t,p,e),t.dom.remove(i)}return!0}return!1})}return!1},_a=(t,e,n)=>{return o=e,s=n,((a,i)=>{const l=k.from(a.getParent(i.startContainer,"details")),c=k.from(a.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const u=l.bind(f=>k.from(a.select("summary",f)[0]));return k.some({startSummary:u,startDetails:l,endDetails:c})}return k.none()})((r=t).dom,r.selection.getRng()).fold(()=>dw(r,o,s),a=>((t,e,n,r)=>{const o=t.selection.getRng(),s=Y.fromRangeStart(o),a=t.getBody();return"selection"===r?((i,l)=>{const c=l.startSummary.exists(p=>p.contains(i.startContainer)),u=l.startSummary.exists(p=>p.contains(i.endContainer)),f=l.startDetails.forall(p=>l.endDetails.forall(b=>p!==b));return(c||u)&&!(c&&u)||f})(o,e):n?(i=s,e.startSummary.exists(c=>{return u=i,Kr(f=c).exists(p=>We(p.getNode())&&lr(f,p).exists(b=>b.isEqual(u))||p.isEqual(u));var u,f})||((i,l,c)=>c.startDetails.exists(u=>nr(i,l).forall(f=>!u.contains(f.container()))))(a,s,e)):((i,l)=>l.startSummary.exists(c=>{return u=i,Fn(c).exists(p=>p.isEqual(u));var u}))(s,e)||((i,l)=>l.startDetails.exists(c=>lr(c,i).forall(u=>l.startSummary.exists(f=>!f.contains(i.container())&&f.contains(u.container())))))(s,e);var i})(r,a,o,s)||dw(r,o,s))||qR&&((r,o,s)=>{const a=r.selection,i=a.getNode(),l=a.getRng(),c=Y.fromRangeStart(l);return!!OE(i)&&("selection"===s&&aw(l,i)||Fv(o,c,i)?sw(i):r.undoManager.transact(()=>{const u=a.getSel();let{anchorNode:f,anchorOffset:p,focusNode:b,focusOffset:h}=u??{};const v=()=>{lt(f)&&lt(p)&&lt(b)&&lt(h)&&u?.setBaseAndExtent(f,p,b,h)},g=(S,E)=>{Q(S.childNodes,N=>{pl(N)&&E.appendChild(N)})},C=r.dom.create("span",{"data-mce-bogus":"1"});g(i,C),i.appendChild(C),v(),"word"!==s&&"line"!==s||null==u||u.modify("extend",o?"right":"left",s),!a.isCollapsed()&&aw(a.getRng(),C)?sw(i):(r.execCommand(o?"ForwardDelete":"Delete"),f=u?.anchorNode,p=u?.anchorOffset,b=u?.focusNode,h=u?.focusOffset,g(C,i),v()),r.dom.remove(C)}),!0)})(t,e,n)?k.some(St):k.none();var r,o,s},uw=t=>(e,n,r={})=>{const o=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:St,inputType:n},a=sh(new InputEvent(t));return e.dispatch(t,{...a,...s,...r})},Hl=uw("input"),Bd=uw("beforeinput"),fw=Dn(),mw=fw.os,pw=mw.isMacOS()||mw.isiOS(),WR=fw.browser.isFirefox(),gi=(t,e)=>{const n=t.dom,r=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(Et(a)||st(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(gn),e.firstChild)}const o=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new pn(e,e);let a,i=e;for(;a=s.current();){if(st(a)){o.setStart(a,0),o.setEnd(a,0);break}if(r[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}i=a,a=s.next()}a||(o.setStart(i,0),o.setEnd(i,0))}else We(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)):(o.setStart(e,0),o.setEnd(e,0));t.selection.setRng(o),vl(t,o)},ql=(t,e)=>{const n=t.getRoot();let r,o=e;for(;o!==n&&o&&"false"!==t.getContentEditable(o);){if("true"===t.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},Up=t=>k.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Hp=t=>{t.innerHTML='<br data-mce-bogus="1">'},$l=(t,e)=>{In(t).toLowerCase()===e.tagName.toLowerCase()&&((n,r,o)=>{const s=n.dom;k.from(o.style).map(s.parseStyle).each(u=>{const f={...Ut(D(r)),...u};s.setStyles(r,f)});const a=k.from(o.class).map(u=>u.split(/\s+/)),i=k.from(r.className).map(u=>Kt(u.split(/\s+/),f=>""!==f));wn(a,i,(u,f)=>{const p=Kt(f,h=>!At(u,h)),b=[...u,...p];s.setAttrib(r,"class",b.join(" "))});const l=["style","class"],c=Eo(o,(u,f)=>!At(l,f));s.setAttribs(r,c)})(t,e,sl(t))},gw=(t,e,n,r,o=!0,s,a)=>{const i=t.dom,l=t.schema,c=In(t),u=n?n.nodeName.toUpperCase():"";let f=e;const p=l.getTextInlineElements();let b;b=s||"TABLE"===u||"HR"===u?i.create(s||c,a||{}):n.cloneNode(!1);let h=b;if(o){do{if(p[f.nodeName]){if(Or(f)||Dr(f))continue;const v=f.cloneNode(!1);i.setAttrib(v,"id",""),b.hasChildNodes()?(v.appendChild(b.firstChild),b.appendChild(v)):(h=v,b.appendChild(v))}}while((f=f.parentNode)&&f!==r)}else i.setAttrib(b,"style",null),i.setAttrib(b,"class",null);return $l(t,b),Hp(h),b},hw=(t,e)=>{const n=t?.parentNode;return lt(n)&&n.nodeName===e},bw=t=>lt(t)&&/^(OL|UL|LI)$/.test(t.nodeName),qp=t=>lt(t)&&/^(LI|DT|DD)$/.test(t.nodeName),Pd=t=>{const e=t.parentNode;return qp(e)?e:t},Ld=(t,e,n)=>{let r=t[n?"firstChild":"lastChild"];for(;r&&!Et(r);)r=r[n?"nextSibling":"previousSibling"];return r===e},vw=t=>Cn(ko(Ut(D(t)),(e,n)=>`${n}: ${e};`),(e,n)=>e+n,""),VR=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),$p=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Wp=(t,e)=>lt(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Vp=(t,e,n)=>st(e)?t?1===n&&e.data.charAt(n-1)===bn?0:n:n===e.data.length-1&&e.data.charAt(n)===bn?e.data.length:n:n,yw={insert:(t,e)=>{let n,r,o,s,a=!1;const i=t.dom,l=t.schema.getNonEmptyElements(),c=t.selection.getRng(),u=In(t),f=D(c.startContainer),p=qe(f,c.startOffset),b=p.exists(j=>Qs(j)&&!io(j)),h=c.collapsed&&b,v=(j,$)=>gw(t,n,A,N,Nk(t),j,$),g=j=>{const $=Vp(j,n,r);if(st(n)&&(j?$>0:$<n.data.length))return!1;if((n.parentNode===A||n===A)&&a&&!j||j&&Et(n)&&n===A.firstChild)return!0;if($p(n,"TABLE")||$p(n,"HR"))return a&&!j||!a&&j;const B=new pn(n,A);let I;for(st(n)&&(j&&0===$?B.prev():j||$!==n.data.length||B.next());I=B.current();){if(Et(I)){if(!I.getAttribute("data-mce-bogus")){const U=I.nodeName.toLowerCase();if(l[U]&&"br"!==U)return!1}}else if(st(I)&&!qa(I.data))return!1;j?B.prev():B.next()}return!0},C=()=>{let j;return j=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==R?v(u):v(),(($,B)=>{const I=Ak($);return!Se(B)&&(Nt(I)?At(it.explode(I),B.nodeName.toLowerCase()):I)})(t,s)&&Wp(i,s)&&i.isEmpty(A,void 0,{includeZwsp:!0})?j=i.split(s,A):i.insertAfter(j,A),gi(t,j),j};Vc(i,c).each(j=>{c.setStart(j.startContainer,j.startOffset),c.setEnd(j.endContainer,j.endOffset)}),n=c.startContainer,r=c.startOffset;const S=!(!e||!e.shiftKey),E=!(!e||!e.ctrlKey);Et(n)&&n.hasChildNodes()&&!h&&(a=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=a&&st(n)?n.data.length:0);const N=ql(i,n);if(!N||((j,$)=>{const B=j.dom.getParent($,"ol,ul,dl");return null!==B&&"false"===j.dom.getContentEditableParent(B)})(t,n))return;S||(n=((j,$,B,I,U)=>{var G,ct;const rt=j.dom,wt=null!==(G=ql(rt,I))&&void 0!==G?G:rt.getRoot();let Tt=rt.getParent(I,rt.isBlock);if(!Tt||!Wp(rt,Tt)){if(Tt=Tt||wt,!Tt.hasChildNodes()){const _t=rt.create($);return $l(j,_t),Tt.appendChild(_t),B.setStart(_t,0),B.setEnd(_t,0),_t}let Pt,Ot=I;for(;Ot&&Ot.parentNode!==Tt;)Ot=Ot.parentNode;for(;Ot&&!rt.isBlock(Ot);)Pt=Ot,Ot=Ot.previousSibling;const gt=null===(ct=Pt?.parentElement)||void 0===ct?void 0:ct.nodeName;if(Pt&&gt&&j.schema.isValidChild(gt,$.toLowerCase())){const _t=Pt.parentNode,F=rt.create($);for($l(j,F),_t.insertBefore(F,Pt),Ot=Pt;Ot&&!rt.isBlock(Ot);){const z=Ot.nextSibling;F.appendChild(Ot),Ot=z}B.setStart(I,U),B.setEnd(I,U)}}return I})(t,u,c,n,r));let A=i.getParent(n,i.isBlock)||i.getRoot();s=lt(A?.parentNode)?i.getParent(A.parentNode,i.isBlock):null,o=A?A.nodeName.toUpperCase():"";const R=s?s.nodeName.toUpperCase():"";if("LI"!==R||E||(A=s,s=s.parentNode,o=R),Et(s)&&(j=t,B=A,!S&&B.nodeName.toLowerCase()===In(j)&&j.dom.isEmpty(B)&&((I,U,G)=>{let ct=U;for(;ct&&ct!==I&&te(ct.nextSibling);){const wt=ct.parentElement;if(!wt||(rt=wt,!jt(j.schema.getTextBlockElements(),rt.nodeName.toLowerCase())))return vu(wt);ct=wt}var rt;return!1})(j.getBody(),B)))return((j,$,B)=>{var I,U,G;const ct=$(In(j)),rt=j.dom.getParent(B,vu);rt&&(j.dom.insertAfter(ct,rt),gi(j,ct),(null!==(G=null===(U=null===(I=B.parentElement)||void 0===I?void 0:I.childNodes)||void 0===U?void 0:U.length)&&void 0!==G?G:0)>1&&j.dom.remove(B))})(t,v,A);var j,B;if(/^(LI|DT|DD)$/.test(o)&&Et(s)&&i.isEmpty(A))return void((j,$,B,I,U)=>{const G=j.dom,ct=j.selection.getRng(),rt=B.parentNode;if(B===j.getBody()||!rt)return;var wt;bw(wt=B)&&bw(wt.parentNode)&&(U="LI");const Tt=qp(I)?vw(I):void 0;let Pt=qp(I)&&Tt?$(U,{style:vw(I)}):$(U);if(Ld(B,I,!0)&&Ld(B,I,!1))if(hw(B,"LI")){const Ot=Pd(B);G.insertAfter(Pt,Ot),(null===(_t=(gt=B).parentNode)||void 0===_t?void 0:_t.firstChild)===gt?G.remove(Ot):G.remove(B)}else G.replace(Pt,B);else if(Ld(B,I,!0))hw(B,"LI")?(G.insertAfter(Pt,Pd(B)),Pt.appendChild(G.doc.createTextNode(" ")),Pt.appendChild(B)):rt.insertBefore(Pt,B),G.remove(I);else if(Ld(B,I,!1))G.insertAfter(Pt,Pd(B)),G.remove(I);else{B=Pd(B);const Ot=ct.cloneRange();Ot.setStartAfter(I),Ot.setEndAfter(B);const gt=Ot.extractContents();if("LI"===U&&((_t,F)=>_t.firstChild&&"LI"===_t.firstChild.nodeName)(gt)){const _t=Kt(re(Pt.children,D),bo(Js("br")));Pt=gt.firstChild,G.insertAfter(gt,B),Q(_t,F=>Ae(D(Pt),F)),Tt&&Pt.setAttribute("style",Tt)}else G.insertAfter(gt,B),G.insertAfter(Pt,B);G.remove(I)}var gt,_t;gi(j,Pt)})(t,v,s,A,u);if(!(h||A!==t.getBody()&&Wp(i,A)))return;const L=A.parentNode;let P;if(h)P=v(u),p.fold(()=>{Vt(f,D(P))},j=>{Ft(j,D(P))}),t.selection.setCursorLocation(P,0);else if(Xa(A))P=Wu(A),i.isEmpty(A)&&Hp(A),$l(t,P),gi(t,P);else if(g(!1))P=C();else if(g(!0)&&L){P=L.insertBefore(v(),A);const j=D(c.startContainer).dom.hasChildNodes()&&c.collapsed;gi(t,$p(A,"HR")||j?P:A)}else{const j=(B=>{const I=B.cloneRange();return I.setStart(B.startContainer,Vp(!0,B.startContainer,B.startOffset)),I.setEnd(B.endContainer,Vp(!1,B.endContainer,B.endOffset)),I})(c).cloneRange();j.setEndAfter(A);const $=j.extractContents();(B=>{Q(_g(D(B),Hn),I=>{const U=I.dom;U.nodeValue=br(U.data)})})($),(B=>{let I=B;do{st(I)&&(I.data=I.data.replace(/^[\r\n]+/,"")),I=I.firstChild}while(I)})($),P=$.firstChild,i.insertAfter($,A),((B,I,U)=>{var G;const ct=[];if(!U)return;let rt=U;for(;rt=rt.firstChild;){if(B.isBlock(rt))return;Et(rt)&&!I[rt.nodeName.toLowerCase()]&&ct.push(rt)}let wt=ct.length;for(;wt--;)rt=ct[wt],(!rt.hasChildNodes()||rt.firstChild===rt.lastChild&&""===(null===(G=rt.firstChild)||void 0===G?void 0:G.nodeValue)||VR(B,rt))&&B.remove(rt)})(i,l,P),((B,I)=>{I.normalize();const U=I.lastChild;(!U||Et(U)&&/^(left|right)$/gi.test(B.getStyle(U,"float",!0)))&&B.add(I,"br")})(i,A),i.isEmpty(A)&&Hp(A),P.normalize(),i.isEmpty(P)?(i.remove(P),C()):($l(t,P),gi(t,P))}i.setAttrib(P,"id",""),t.dispatch("NewBlock",{newBlock:P})},fakeEventName:"insertParagraph"},Cw=(t,e,n)=>{const r=t.dom.createRng();n?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),t.selection.setRng(r),vl(t,r)},KR=(t,e)=>{const n=Dt("br");Ft(D(e),n),t.undoManager.add()},XR=(t,e)=>{YR(t.getBody(),e)||Bt(D(e),Dt("br"));const n=Dt("br");Bt(D(e),n),Cw(t,n.dom,!1),t.undoManager.add()},YR=(t,e)=>{return n=Y.after(e),!!We(n.getNode())||nr(t,Y.after(e)).map(r=>We(r.getNode())).getOr(!1);var n},xw=t=>t&&"A"===t.nodeName&&"href"in t,GR=t=>t.fold(xe,xw,xw,xe),QR=(t,e)=>{e.fold(St,xt(KR,t),xt(XR,t),St)},ww={insert:(t,e)=>{const n=(r=>{const o=xt(wa,r),s=Y.fromRangeStart(r.selection.getRng());return zo(o,r.getBody(),s).filter(GR)})(t);n.isSome()?n.each(xt(QR,t)):((r,o)=>{const a=r.dom,i=r.selection.getRng();let l,c=!1;Vc(a,i).each(g=>{i.setStart(g.startContainer,g.startOffset),i.setEnd(g.endContainer,g.endOffset)});let u=i.startOffset,f=i.startContainer;if(Et(f)&&f.hasChildNodes()){const g=u>f.childNodes.length-1;f=f.childNodes[Math.min(u,f.childNodes.length-1)]||f,u=g&&st(f)?f.data.length:0}let p=a.getParent(f,a.isBlock);const b=p&&p.parentNode?a.getParent(p.parentNode,a.isBlock):null;"LI"!==(b?b.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(p=b),st(f)&&u>=f.data.length&&(((g,C,S)=>{const E=new pn(C,S);let N;const A=g.getNonEmptyElements();for(;N=E.next();)if(A[N.nodeName.toLowerCase()]||st(N)&&N.length>0)return!0;return!1})(r.schema,f,p||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),Qu(a,i,l),Cw(r,l,c),r.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},Sw=(t,e)=>Up(t).filter(n=>e.length>0&&ln(D(n),e)).isSome(),vr=Bo([{br:[]},{block:[]},{none:[]}]),ZR=(t,e)=>{return Sw(n=t,_k(n));var n},Ew=t=>(e,n)=>Up(e).filter(o=>Zi(D(o))).isSome()===t,kw=(t,e)=>(n,r)=>Up(n).fold(ft(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,JR=t=>{const e=ql(t.dom,t.selection.getStart());return Se(e)},Wl=t=>kw("pre",t),Md=t=>(e,n)=>Sk(e)===t,tO=(t,e)=>{return Sw(n=t,kk(n));var n},Id=(t,e)=>e,eO=t=>{const e=In(t),n=ql(t.dom,t.selection.getStart());return lt(n)&&t.schema.isValidChild(n.nodeName,e)},nO=t=>{const e=t.selection.getRng(),n=D(e.startContainer),r=qe(n,e.startOffset).map(o=>Qs(o)&&!io(o));return e.collapsed&&r.getOr(!0)},jr=(t,e)=>(n,r)=>Cn(t,(o,s)=>o&&s(n,r),!0)?k.some(e):k.none(),Fd=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),lt(n)&&Bd(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),lt(n)&&Hl(e,t.fakeEventName))},_w=(t,e)=>{const n=()=>Fd(ww,t,e),r=()=>Fd(yw,t,e),o=(s=t,a=e,w1([jr([ZR],vr.none()),jr([Wl(!0),JR],vr.none()),jr([kw("summary",!0)],vr.br()),jr([Wl(!0),Md(!1),Id],vr.br()),jr([Wl(!0),Md(!1)],vr.block()),jr([Wl(!0),Md(!0),Id],vr.block()),jr([Wl(!0),Md(!0)],vr.br()),jr([Ew(!0),Id],vr.br()),jr([Ew(!0)],vr.block()),jr([tO],vr.br()),jr([Id],vr.br()),jr([eO],vr.block()),jr([nO],vr.block())],[s,!(!a||!a.shiftKey)]).getOr(vr.none()));var s,a;switch(Ek(t)){case"linebreak":o.fold(n,n,St);break;case"block":o.fold(r,r,St);break;case"invert":o.fold(r,n,St);break;default:o.fold(n,r,St)}},Nw=Dn(),rO=Nw.os.isiOS()&&Nw.browser.isSafari(),Aw=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{_w(t,e)}))},oO=Dn(),Tw=t=>t.stopImmediatePropagation(),Rw=t=>t.keyCode===Ct.PAGE_UP||t.keyCode===Ct.PAGE_DOWN,Ow=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",Tw,!0):!n&&t.get()&&e.off("NodeChange",Tw),t.set(n)},Dw=(t,e)=>{const n=e.container(),r=e.offset();return st(n)?(n.insertData(r,t),k.some(Y(n,r+t.length))):Pc(e).map(o=>{const s=le(t);return e.isAtEnd()?Bt(o,s):Ft(o,s),Y(s.dom,t.length)})},Bw=xt(Dw,gn),Pw=xt(Dw," "),Lw=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},sO=t=>{const e=Y.fromRangeStart(t.selection.getRng()),n=D(t.getBody());if(t.selection.isCollapsed()){const r=xt(wa,t),o=Y.fromRangeStart(t.selection.getRng());return zo(r,t.getBody(),o).bind((s=>a=>a.fold(i=>lr(s.dom,Y.before(i)),i=>Fn(i),i=>Kr(i),i=>nr(s.dom,Y.after(i))))(n)).map(s=>()=>((a,i,l)=>c=>kv(a,c,l)?Bw(i):Pw(i))(n,e,t.schema)(s).each(Lw(t)))}return k.none()},aO=t=>{return hs(pe.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const r=D(t.getBody());var o,s,a;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(o=r,s=Y.fromRangeStart(t.selection.getRng()),a=t.schema,kv(o,s,a)?Bw(s):Pw(s)).each(Lw(t))});var e,n},iO=t=>P_(t)?[{keyCode:Ct.TAB,action:qt(Fx,t,!0)},{keyCode:Ct.TAB,shiftKey:!0,action:qt(Fx,t,!1)}]:[],lO=t=>{if(t.addShortcut("Meta+P","","mcePrint"),HR(t),jo(t))return hn(null);{const e=(t=>{const e=hn(null),n=xt(wa,t);return t.on("NodeChange",r=>{al(t)&&(((o,s,a)=>{const i=re(Ln(D(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),u=>u.dom),l=Kt(i,o),c=Kt(a,o);Q(ee(l,c),xt($1,!1)),Q(ee(c,l),xt($1,!0))})(n,t.dom,r.parents),((o,s)=>{const a=s.get();if(o.selection.isCollapsed()&&!o.composing&&a){const i=Y.fromRangeStart(o.selection.getRng());Y.isTextPosition(i)&&!qu(l=i)&&!$u(l)&&(Sd(o,((t,e)=>{return Y.isTextPosition(e)?(r=e,v0(n=t)&&r.container()===n?((o,s)=>{const a=C0(o.data.substr(0,s.offset())),i=C0(o.data.substr(s.offset()));return(a.text+i.text).length>0?(x0(o),Y(o,s.offset()-a.count)):s})(n,r):w0(n,r)):((n,r)=>r.container()===n.parentNode?((o,s)=>{const a=s.container(),i=((l,c)=>{const u=de(l,c);return-1===u?k.none():k.some(u)})(xn(a.childNodes),o).map(l=>l<s.offset()?Y(a,s.offset()-1):s).getOr(s);return pa(o),i})(n,r):w0(n,r))(t,e);var n,r})(a,i)),s.set(null))}var l})(t,e),((o,s,a,i)=>{if(s.selection.isCollapsed()){const l=Kt(i,o);Q(l,c=>{const u=Y.fromRangeStart(s.selection.getRng());zo(o,s.getBody(),u).bind(f=>W1(s,a,f))})}})(n,t,e,r.parents))}),e})(t);return(n=t).on("beforeinput",r=>{n.selection.isEditable()&&!Te(r.getTargetRanges(),o=>!Vb(n.dom,o))||r.preventDefault()}),(n=>{n.on("keyup compositionstart",xt(oR,n))})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=pe.os.isMacOS()||pe.os.isiOS();Il([{keyCode:Ct.RIGHT,action:qt(hx,s,!0)},{keyCode:Ct.LEFT,action:qt(hx,s,!1)},{keyCode:Ct.UP,action:qt(bx,s,!1)},{keyCode:Ct.DOWN,action:qt(bx,s,!0)},...l?[{keyCode:Ct.UP,action:qt(kd,s,!1),metaKey:!0,shiftKey:!0},{keyCode:Ct.DOWN,action:qt(kd,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Ct.RIGHT,action:qt(Lx,s,!0)},{keyCode:Ct.LEFT,action:qt(Lx,s,!1)},{keyCode:Ct.UP,action:qt(kp,s,!1)},{keyCode:Ct.DOWN,action:qt(kp,s,!0)},{keyCode:Ct.UP,action:qt(kp,s,!1)},{keyCode:Ct.UP,action:qt(Cx,s,!1)},{keyCode:Ct.DOWN,action:qt(Cx,s,!0)},{keyCode:Ct.RIGHT,action:qt(Ex,s,!0)},{keyCode:Ct.LEFT,action:qt(Ex,s,!1)},{keyCode:Ct.UP,action:qt(kx,s,!1)},{keyCode:Ct.DOWN,action:qt(kx,s,!0)},{keyCode:Ct.RIGHT,action:qt(V1,s,a,!0)},{keyCode:Ct.LEFT,action:qt(V1,s,a,!1)},{keyCode:Ct.RIGHT,ctrlKey:!l,altKey:l,action:qt(XT,s,a)},{keyCode:Ct.LEFT,ctrlKey:!l,altKey:l,action:qt(YT,s,a)},{keyCode:Ct.UP,action:qt(yx,s,!1)},{keyCode:Ct.DOWN,action:qt(yx,s,!0)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{let o=!1;n.on("keydown",s=>{o=s.keyCode===Ct.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===Ct.BACKSPACE?"deleteContentBackward":"deleteContentForward",u=a.selection.isCollapsed(),f=u?"character":"selection",p=b=>u?b?"word":"line":"selection";Sx([{keyCode:Ct.BACKSPACE,action:qt(ix,a)},{keyCode:Ct.BACKSPACE,action:qt(cp,a,!1)},{keyCode:Ct.DELETE,action:qt(cp,a,!0)},{keyCode:Ct.BACKSPACE,action:qt(ap,a,!1)},{keyCode:Ct.DELETE,action:qt(ap,a,!0)},{keyCode:Ct.BACKSPACE,action:qt(vp,a,i,!1)},{keyCode:Ct.DELETE,action:qt(vp,a,i,!0)},{keyCode:Ct.BACKSPACE,action:qt(mm,a,!1)},{keyCode:Ct.DELETE,action:qt(mm,a,!0)},{keyCode:Ct.BACKSPACE,action:qt(_a,a,!1,f)},{keyCode:Ct.DELETE,action:qt(_a,a,!0,f)},...pw?[{keyCode:Ct.BACKSPACE,altKey:!0,action:qt(_a,a,!1,p(!0))},{keyCode:Ct.DELETE,altKey:!0,action:qt(_a,a,!0,p(!0))},{keyCode:Ct.BACKSPACE,metaKey:!0,action:qt(_a,a,!1,p(!1))}]:[{keyCode:Ct.BACKSPACE,ctrlKey:!0,action:qt(_a,a,!1,p(!0))},{keyCode:Ct.DELETE,ctrlKey:!0,action:qt(_a,a,!0,p(!0))}],{keyCode:Ct.BACKSPACE,action:qt(dp,a,!1)},{keyCode:Ct.DELETE,action:qt(dp,a,!0)},{keyCode:Ct.BACKSPACE,action:qt(xp,a,!1)},{keyCode:Ct.DELETE,action:qt(xp,a,!0)},{keyCode:Ct.BACKSPACE,action:qt(op,a,!1)},{keyCode:Ct.DELETE,action:qt(op,a,!0)},{keyCode:Ct.BACKSPACE,action:qt(rp,a,!1)},{keyCode:Ct.DELETE,action:qt(rp,a,!0)},{keyCode:Ct.BACKSPACE,action:qt(yp,a,!1)},{keyCode:Ct.DELETE,action:qt(yp,a,!0)}],l).filter(b=>a.selection.isEditable()).each(b=>{l.preventDefault(),Bd(a,c).isDefaultPrevented()||(b(),Hl(a,c))})})(n,r,s)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(i=s,l=o,Il([{keyCode:Ct.BACKSPACE,action:qt(h1,a=n)},{keyCode:Ct.DELETE,action:qt(h1,a)},...pw?[{keyCode:Ct.BACKSPACE,altKey:!0,action:qt(Ml,a)},{keyCode:Ct.DELETE,altKey:!0,action:qt(Ml,a)},...l?[{keyCode:WR?224:91,action:qt(Ml,a)}]:[]]:[{keyCode:Ct.BACKSPACE,ctrlKey:!0,action:qt(Ml,a)},{keyCode:Ct.DELETE,ctrlKey:!0,action:qt(Ml,a)}]],i)),o=!1})})(t,e),(n=>{let r=k.none();n.on("keydown",o=>{var s;o.keyCode===Ct.ENTER&&(rO&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(st(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(r=k.some((s=n).selection.getBookmark()),s.undoManager.add()):Aw(n,o))}),n.on("keyup",o=>{o.keyCode===Ct.ENTER&&r.each(()=>{return a=o,(s=n).undoManager.undo(),r.fold(St,i=>s.selection.moveToBookmark(i)),Aw(s,a),void(r=k.none());var s,a})})})(t),(n=>{n.on("keydown",r=>{var o,s;r.isDefaultPrevented()||(s=r,Sx([{keyCode:Ct.SPACEBAR,action:qt(sO,o=n)},{keyCode:Ct.SPACEBAR,action:qt(aO,o)}],s).each(a=>{s.preventDefault(),Bd(o,"insertText",{data:" "}).isDefaultPrevented()||(a(),Hl(o,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",r=>{r.isComposing||(o=>{const s=D(o.getBody());o.selection.isCollapsed()&&((t,e,n)=>{const r=e.container();if(!st(r))return k.none();if((o=>{const s=o.container();return st(s)&&fn(s.data,gn)})(e)){const o=Av(t,r,!1,n)||(s=>{const a=s.data,i=(l=>{const c=l.split("");return re(c,(u,f)=>Fc(u)&&f>0&&f<c.length-1&&hf(c[f-1])&&hf(c[f+1])?" ":u).join("")})(a);return i!==a&&(s.data=i,!0)})(r)||Tv(t,r,!1,n);return hs(o,e)}if(em(t,e,n)){const o=Av(t,r,!0,n)||Tv(t,r,!0,n);return hs(o,e)}return k.none()})(s,Y.fromRangeStart(o.selection.getRng()),o.schema).each(a=>{o.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",r=>{var s;r.isDefaultPrevented()||(s=r,Il([...iO(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=pe.os.isMacOS()||pe.os.isiOS();Il([{keyCode:Ct.END,action:qt(vx,s,!0)},{keyCode:Ct.HOME,action:qt(vx,s,!1)},...l?[]:[{keyCode:Ct.HOME,action:qt(kd,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Ct.END,action:qt(kd,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Ct.END,action:qt(_x,s,!0)},{keyCode:Ct.HOME,action:qt(_x,s,!1)},{keyCode:Ct.END,action:qt(Ed,s,!0,a)},{keyCode:Ct.HOME,action:qt(Ed,s,!1,a)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{if(oO.os.isMacOS())return;const o=hn(!1);n.on("keydown",s=>{Rw(s)&&Ow(o,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,Il([{keyCode:Ct.PAGE_UP,action:qt(Ed,a=n,!1,i=r)},{keyCode:Ct.PAGE_DOWN,action:qt(Ed,a,!0,i)}],l)),Rw(s)&&o.get()&&(Ow(o,n,!1),n.nodeChanged())})})(t,e),e}var n};class cO{constructor(e){let n;this.lastPath=[],this.editor=e;const r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",o=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==o.type&&Lf(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{Yc(e),e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const o=e.selection.getStart(!0);o&&jc(e)&&!r.isSameElementPath(o)&&e.dom.isChildOf(o,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",o=>{!o.isDefaultPrevented()&&jc(e)&&("IMG"===e.selection.getNode().nodeName?Pr.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!r_(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const s=[];this.editor.dom.getParent(r,a=>a===o||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:s})}}isSameElementPath(e){let n;const r=this.editor,o=Jr(r.dom.getParents(e,je,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const Mw=Qi("image"),Kp=Qi("event"),jd=t=>e=>{e[Kp]=t},Iw=jd(0),dO=jd(2),uO=jd(1),Xp=Qi("mode"),zd=t=>e=>{e[Xp]=t},Fw=(t,e)=>zd(e)(t),jw=zd(0),Yp=zd(2),mO=zd(1),zw=t=>e=>k.from(e[Xp]).exists(r=>r===t),hi=zw(0),Uw=zw(1),pO=["none","copy","link","move"],gO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Gp=()=>{const t=new window.DataTransfer;let e="move",n="all";const r={get dropEffect(){return e},set dropEffect(o){At(pO,o)&&(e=o)},get effectAllowed(){return n},set effectAllowed(o){(t=>k.from(t[Kp]).exists(n=>0===n))(r)&&At(gO,o)&&(n=o)},get items(){return o=r,s=t.items,{...s,get length(){return s.length},add:(a,i)=>{if(hi(o)){if(!Nt(a))return s.add(a);if(!Ie(i))return s.add(a,i)}return null},remove:a=>{hi(o)&&s.remove(a)},clear:()=>{hi(o)&&s.clear()}};var o,s},get files(){return Uw(r)?Object.freeze({length:0,item:o=>null}):t.files},get types(){return t.types},setDragImage:(o,s,a)=>{hi(r)&&(r[Mw]={image:o,x:s,y:a},t.setDragImage(o,s,a))},getData:o=>Uw(r)?"":t.getData(o),setData:(o,s)=>{hi(r)&&t.setData(o,s)},clearData:o=>{hi(r)&&t.clearData(o)}};return jw(r),r},Hw=(t,e)=>t.setData("text/html",e),qw="x-tinymce/html",Ud=ft(qw),Qp="\x3c!-- "+qw+" --\x3e",hO=t=>Qp+t,$w=t=>-1!==t.indexOf(Qp),Ww="%MCEPASTEBIN%",Zp=t=>t.dom.get("mcepastebin"),bO=t=>lt(t)&&"mcepastebin"===t.id,Vw=t=>t===Ww,Kw=(t,e)=>(it.each(e,n=>{t=wr(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),Xw=t=>Kw(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,r)=>n||r?gn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Yw=(t,e)=>({content:t,cancelled:e}),Jp=(t,e)=>(t.insertContent(e,{merge:w_(t),paste:!0}),!0),tg=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),vO=(t,e,n)=>{return!(t.selection.isCollapsed()||!tg(e)||(r=t,o=e,s=n,r.undoManager.extra(()=>{s(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,s},yO=(t,e,n)=>{return r=t,!(!tg(o=e)||!Te(h0(r),s=>Vs(o.toLowerCase(),`.${s.toLowerCase()}`)))&&((r,o,s)=>(r.undoManager.extra(()=>{s(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(t,e,n);var r,o},CO=(t=>{let e=0;return()=>"mceclip"+e++})(),xO=t=>{const e=Gp();return Hw(e,t),Yp(e),e},Gw=(t,e,n,r,o)=>{const s=((c,u,f)=>{const p=c.dispatch("PastePreProcess",{content:u,internal:f}),b=((h,v)=>{const g=li({sanitize:g0(h),sandbox_iframes:b0(h),sandbox_iframes_exclusions:af(h),convert_unsafe_embeds:I_(h)},h.schema);g.addNodeFilter("meta",S=>{it.each(S,E=>{E.remove()})});const C=g.parse(v,{forced_root_block:!1,isRootContent:!0});return Os({validate:!0},h.schema).serialize(C)})(c,p.content);return c.hasEventListeners("PastePostProcess")&&!p.isDefaultPrevented()?((h,v,g)=>{const C=h.dom.create("div",{style:"display:none"},v),S=h.dispatch("PastePostProcess",{node:C,internal:g});return Yw(S.node.innerHTML,S.isDefaultPrevented())})(c,b,f):Yw(b,p.isDefaultPrevented())})(t,e,n);if(!s.cancelled){const a=s.content,i=()=>{return l=t,c=a,void(r||!S_(l)?Jp(l,c):(f=l,p=c,it.each([vO,yO,Jp],b=>!b(f,p,Jp))));var l,c,f,p};o?Bd(t,"insertFromPaste",{dataTransfer:xO(a)}).isDefaultPrevented()||(i(),Hl(t,"insertFromPaste")):i()}},Hd=(t,e,n,r)=>{const o=n||$w(e);Gw(t,e.replace(Qp,""),o,!1,r)},eg=(t,e,n)=>{const r=t.dom.encode(e).replace(/\r\n/g,"\n"),o=((s,a,i)=>{const l=s.split(/\n\n/),c=((p,b)=>{let h="<"+p;const v=ko(b,(g,C)=>C+'="'+ws.encodeAllRaw(g)+'"');return v.length&&(h+=" "+v.join(" ")),h+">"})(a,i),u="</"+a+">",f=re(l,p=>p.split(/\n/).join("<br />"));return 1===f.length?f[0]:re(f,p=>c+p+u).join("")})(Rg(r,k_(t)),In(t),sl(t));Gw(t,o,!1,!0,n)},Qw=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const r=t.types[n];try{e[r]=t.getData(r)}catch{e[r]=""}}return e},Ms=(t,e)=>e in t&&t[e].length>0,Zw=t=>Ms(t,"text/html")||Ms(t,"text/plain"),Jw=(t,e,n)=>{const r="paste"===e.type?e.clipboardData:e.dataTransfer;var o;if(Dc(t)&&r){const s=((a,i)=>{const l=i.items?Qe(xn(i.items),u=>"file"===u.kind?[u.getAsFile()]:[]):[],c=i.files?xn(i.files):[];return Kt(l.length>0?l:c,(u=>{const f=h0(u);return p=>Ve(p.type,"image/")&&Te(f,b=>(h=>{const v=h.toLowerCase(),g={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return it.hasOwn(g,v)?"image/"+g[v]:"image/"+v})(b)===p.type)})(a))})(t,r);if(s.length>0)return e.preventDefault(),(o=s,Promise.all(re(o,a=>Vy(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),Q(a,i=>{var l,c;l=t,Lm((c=i).uri).each(({data:u,type:f,base64Encoded:p})=>{const b=p?u:btoa(u),h=c.file,v=l.editorUpload.blobCache,C=v.getByData(b,f)??((S,E,N,A)=>{const R=CO(),L=o0(S)&&lt(N.name),P=L?((B,I)=>{const U=I.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return lt(U)?B.dom.encode(U[1]):void 0})(S,N.name):R,$=E.create(R,N,A,P,L?N.name:void 0);return E.add($),$})(l,v,h,b);Hd(l,`<img src="${C.blobUri()}">`,!1,!0)})})}),!0}return!1},ng=(t,e,n,r,o)=>{let s=Xw(n);const a=Ms(e,Ud())||$w(n),i=!a&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=tg(s);(Vw(s)||!s.length||i&&!l)&&(r=!0),(r||l)&&(s=Ms(e,"text/plain")&&i?e["text/plain"]:(c=>{const u=Ss(),f=li({},u);let p="";const b=u.getVoidElements(),h=it.makeMap("script noscript style textarea video audio iframe object"," "),v=u.getBlockElements(),g=C=>{const S=C.name,E=C;if("br"!==S){if("wbr"!==S)if(b[S]&&(p+=" "),h[S])p+=" ";else{if(3===C.type&&(p+=C.value),!(C.name in u.getVoidElements())){let N=C.firstChild;if(N)do{g(N)}while(N=N.next)}v[S]&&E.next&&(p+="\n","p"===S&&(p+="\n"))}}else p+="\n"};return c=Kw(c,[/<!\[[^\]]+\]>/g]),g(f.parse(c)),p})(s)),Vw(s)||(r?eg(t,s,o):Hd(t,s,a,o))},tS=(t,e,n,r)=>{((o,s,a)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",s),o.setData("text/plain",a),o.setData(Ud(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),r()):n(e.html,r)},eS=t=>(e,n)=>{const{dom:r,selection:o}=t,s=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},e);r.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),r.add(t.getBody(),s);const i=o.getRng();a.focus();const l=r.createRng();l.selectNodeContents(a),o.setRng(l),Pr.setEditorTimeout(t,()=>{o.setRng(i),r.remove(s),n()},0)},nS=t=>({html:hO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),rS=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},oS=(t,e)=>{var n,r;return ya.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(r=e.clientY)&&void 0!==r?r:0,t.getDoc())},sS=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},SO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,aS=t=>it.trim(t).replace(SO,qi).toLowerCase(),EO=(t,e,n)=>{const r=C_(t);if(n||"all"===r||!x_(t))return e;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,u)=>{const f=s.parseStyle(s.decode(c)),p={};for(let h=0;h<o.length;h++){const v=f[o[h]];let g=v,C=s.getStyle(a,o[h],!0);/color/.test(o[h])&&(g=aS(g),C=aS(C)),C!==g&&(p[o[h]]=v)}const b=s.serializeStyle(p,"span");return b?l+' style="'+b+'"'+u:l+u})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},_O=We,iS=st,NO=t=>Me(t.dom),lS=t=>e=>It(D(t),e),cS=(t,e)=>Nr(D(t),NO,lS(e)),dS=(t,e,n)=>{const r=new pn(t,e),o=n?r.next.bind(r):r.prev.bind(r);let s=t;for(let a=n?t:o();a&&!_O(a);a=o())fo(a)&&(s=a);return s};var bi;!function(t){t.Before="before",t.After="after"}(bi||(bi={}));const TO=(t,e)=>Math.abs(t.left-e),RO=(t,e)=>Math.abs(t.right-e),DO=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),rg=(t,e,n,r)=>{const o=u=>fo(u.node)?k.some(u):Et(u.node)?rg(xn(u.node.childNodes),e,n,!1):k.none(),s=(u,f)=>{const p=Wo(u,(b,h)=>f(b,e,n)-f(h,e,n));return Zn(p,o).map(b=>{return r&&!st(b.node)&&p.length>1?(h=b,v=p[1],g=f,o(v).filter(C=>Math.abs(g(h,e,n)-g(C,e,n))<2&&st(C.node))).getOr(b):b;var h,v,g})},[a,i]=((t,e)=>{return(n=Kt(t,n=>{return(r=e)>=(o=n).top&&r<=o.bottom;var r,o}),Cn(n,(r,o)=>r.fold(()=>k.some(o),s=>{const a=Math.min(o.left,s.left),i=Math.min(o.top,s.top),l=Math.max(o.right,s.right),c=Math.max(o.bottom,s.bottom);return k.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}),k.none())).fold(()=>[[],t],n=>{const{pass:r,fail:o}=zr(t,s=>((a,i)=>{const l=(c=a,u=i,Math.max(0,Math.min(c.bottom,u.bottom)-Math.max(c.top,u.top))/Math.min(a.height,i.height));var c,u;return((c,u)=>c.top<u.bottom&&c.bottom>u.top)(a,i)&&l>.5})(s,n));return[r,o]});var n})(I1(t),n),{pass:l,fail:c}=zr(i,u=>u.top<n);return s(a,DO).orThunk(()=>s(c,Eh)).orThunk(()=>s(l,Eh))},uS=(t,e,n)=>((r,o,s)=>{const a=D(r),l=((t,e,n)=>k.from(t.dom.elementFromPoint(e,n)).map(J))(Le(a),o,s).filter(c=>qn(a,c)).getOr(a);return((c,u,f,p)=>{const b=(h,v)=>{const g=Kt(h.dom.childNodes,bo(C=>Et(C)&&C.classList.contains("mce-drag-container")));return v.fold(()=>rg(g,f,p,!0),C=>{const S=Kt(g,E=>E!==C.dom);return rg(S,f,p,!0)}).orThunk(()=>(It(h,c)?k.none():ar(h)).bind(C=>b(C,k.some(h))))};return b(u,k.none())})(a,l,o,s)})(t,e,n).filter(r=>ll(r.node)).map(r=>{return{node:(o=r).node,position:TO(o,s=e)<RO(o,s)?bi.Before:bi.After};var o,s}),fS=t=>{var e,n;const r=t.getBoundingClientRect(),o=t.ownerDocument,s=o.documentElement,a=o.defaultView;return{top:r.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:r.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},mS=t=>({target:t,srcElement:t}),pS=Me,PO=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(pS,Vr),LO=(t,e,n,r)=>{const o=t.dom,s=e.cloneNode(!0);o.setStyles(s,{width:n,height:r}),o.setAttrib(s,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},qd=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},gS=qd("left",-32),hS=qd("left",32),bS=qd("top",-32),vS=qd("top",32),yS=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Vl=(t,e,n,r,o)=>{"dragstart"===e&&Hw(r,t.dom.getOuterHTML(n));const s=((t,e,n,r)=>{const o=((s,a)=>{const i=(l=>{const c=Gp(),u=k.from(l[Xp]);return Yp(l),Iw(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(f=l,k.from(f[Mw])).each(f=>c.setDragImage(f.image,f.x,f.y)),Q(l.types,f=>{"Files"!==f&&c.setData(f,l.getData(f))}),Q(l.files,f=>c.items.add(f)),(f=>k.from(f[Kp]))(l).each(f=>{var p;p=c,jd(f)(p)}),u.each(f=>{Fw(l,f),Fw(c,f)}),c;var f})(s);return"dragstart"===a?(Iw(i),jw(i)):"drop"===a?(dO(i),Yp(i)):(uO(i),mO(i)),i})(n,t);return Ie(r)?((s,a,i)=>{const l=ur("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:St,stopImmediatePropagation:St,stopPropagation:St,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...mS(a)}})(t,e,o):(s=t,a=r,i=e,l=o,{...a,dataTransfer:l,type:s,...mS(i)});var s,a,i,l})(e,n,r,o);return t.dispatch(e,s)},CS=(t,e,n)=>{t.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>Vl(e,"dragend",r.element,r.dataTransfer),o=>Vl(e,"dragend",r.element,r.dataTransfer,o))}),xS(t)},xS=t=>{t.on(e=>{e.intervalId.clear(),yS(e.ghost)}),t.clear()},Kl=Me,wS=(t,e)=>Sa(t.getBody(),e),FO=t=>{const e=t.selection,n=t.dom,r=t.getBody(),o=((t,e,n,r)=>{const o=Es();let s,a;const i=In(t),l=t.dom,c=()=>{(u=>{var f,p;const b=Ln(D(u),"*[contentEditable=false],video,audio,embed,object");for(let h=0;h<b.length;h++){const v=b[h].dom;let g=v.previousSibling;if(kc(g)){const C=g.data;1===C.length?null===(f=g.parentNode)||void 0===f||f.removeChild(g):g.deleteData(C.length-1,1)}g=v.nextSibling,Ec(g)&&(1===g.data.length?null===(p=g.parentNode)||void 0===p||p.removeChild(g):g.deleteData(0,1))}})(e),a&&(pa(a),a=null),o.on(u=>{l.remove(u.caret),o.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(u,f)=>{let p;if(c(),$_(f))return null;if(!n(f))return a=((b,h)=>{var v;const g=(null!==(v=b.ownerDocument)&&void 0!==v?v:document).createTextNode(bn),C=b.parentNode;if(h){const S=b.previousSibling;if(Ka(S)){if(Tr(S))return S;if(kc(S))return S.splitText(S.data.length-1)}C?.insertBefore(g,b)}else{const S=b.nextSibling;if(Ka(S)){if(Tr(S))return S;if(Ec(S))return S.splitText(1),S}b.nextSibling?C?.insertBefore(g,b.nextSibling):C?.appendChild(g)}return g})(f,u),p=f.ownerDocument.createRange(),il(a.nextSibling)?(p.setStart(a,0),p.setEnd(a,0)):(p.setStart(a,1),p.setEnd(a,1)),p;{const b=((g,C,S)=>{var E;const N=(null!==(E=C.ownerDocument)&&void 0!==E?E:document).createElement(g);N.setAttribute("data-mce-caret",S?"before":"after"),N.setAttribute("data-mce-bogus","all"),N.appendChild(tl().dom);const A=C.parentNode;return S?A?.insertBefore(N,C):C.nextSibling?A?.insertBefore(N,C.nextSibling):A?.appendChild(N),N})(i,f,u),h=S0(e,f,u);l.setStyle(b,"top",h.top),l.setStyle(b,"caret-color","transparent"),a=b;const v=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(v,{...h}),l.add(e,v),o.set({caret:v,element:f,before:u}),u&&l.addClass(v,"mce-visual-caret-before"),s=setInterval(()=>{o.on(g=>{r()?l.toggleClass(g.caret,"mce-visual-caret-hidden"):l.addClass(g.caret,"mce-visual-caret-hidden")})},500),p=f.ownerDocument.createRange(),p.setStart(b,0),p.setEnd(b,0)}return p},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(u=>{const f=S0(e,u.element,u.before);l.setStyles(u.caret,{...f})})},destroy:()=>clearInterval(s)}})(t,r,n.isBlock,()=>Ca(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=g=>g!==r&&(Kl(g)||Do(g))&&n.isChildOf(g,r)&&n.isEditable(g.parentNode),c=(g,C,S,E=!0)=>t.dispatch("ShowCaret",{target:C,direction:g,before:S}).isDefaultPrevented()?null:(E&&e.scrollIntoView(C,-1===g),o.show(S,C)),u=g=>Tr(g)||Ec(g)||kc(g),f=g=>u(g.startContainer)||u(g.endContainer),b=(g,C)=>{if(!g)return null;if(g.collapsed){if(!f(g)){const A=C?1:-1,R=fl(A,r,g),L=R.getNode(!C);if(lt(L)){if(ll(L))return c(A,L,!!C&&!R.isAtEnd(),!1);if(_s(L)&&Me(L.nextSibling)){const j=n.createRng();return j.setStart(L,0),j.setEnd(L,0),j}}const P=R.getNode(C);if(lt(P)){if(ll(P))return c(A,P,!C&&!R.isAtEnd(),!1);if(_s(P)&&Me(P.previousSibling)){const j=n.createRng();return j.setStart(P,1),j.setEnd(P,1),j}}}return null}let S=g.startContainer,E=g.startOffset;const N=g.endOffset;if(st(S)&&0===E&&Kl(S.parentNode)&&(S=S.parentNode,E=n.nodeIndex(S),S=S.parentNode),!Et(S))return null;if(N===E+1&&S===g.endContainer){const A=S.childNodes[E];if(l(A))return(R=>{const L=R.cloneNode(!0),P=t.dispatch("ObjectSelected",{target:R,targetClone:L});if(P.isDefaultPrevented())return null;const j=((B,I)=>{const U=D(t.getBody()),G=t.getDoc(),ct=Cs(U,"#"+s).getOrThunk(()=>{const Tt=ut('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',G);return Ze(Tt,"id",s),Vt(U,Tt),Tt}),rt=n.createRng();ae(ct),be(ct,[le(gn,G),D(I),le(gn,G)]),rt.setStart(ct.dom.firstChild,1),rt.setEnd(ct.dom.lastChild,0),W(ct,{top:n.getPos(B,t.getBody()).y+"px"}),Fb(ct);const wt=e.getSel();return wt&&(wt.removeAllRanges(),wt.addRange(rt)),rt})(R,P.targetClone),$=D(R);return Q(Ln(D(t.getBody()),`*[${a}]`),B=>{It($,B)||m(B,a)}),n.getAttrib(R,a)||R.setAttribute(a,"1"),i=R,v(),j})(A)}return null},h=()=>{i&&i.removeAttribute(a),Cs(D(t.getBody()),"#"+s).each(ue),i=null},v=()=>{o.hide()};return jo(t)||(t.on("click",g=>{n.isEditable(g.target)||(g.preventDefault(),t.focus())}),t.on("blur NewBlock",h),t.on("ResizeWindow FullscreenStateChanged",o.reposition),t.on("tap",g=>{const C=g.target,S=wS(t,C);Kl(S)?(g.preventDefault(),Dl(t,S).each(b)):l(C)&&Dl(t,C).each(b)},!0),t.on("mousedown",g=>{const C=g.target;if(C!==r&&"HTML"!==C.nodeName&&!n.isChildOf(C,r)||!((E,N,A)=>{const R=D(E.getBody()),L=E.inline?R:D(Le(R).dom.documentElement),P=((j,$,B,I)=>{const U=$.dom.getBoundingClientRect();return{x:B-(j?U.left+$.dom.clientLeft+uT($):0),y:I-(j?U.top+$.dom.clientTop+dT($):0)}})(E.inline,L,N,A);return((j,$,B)=>{const I=lT(j),U=cT(j);return $>=0&&B>=0&&$<=I&&B<=U})(L,P.x,P.y)})(t,g.clientX,g.clientY))return;h(),v();const S=wS(t,C);Kl(S)?(g.preventDefault(),Dl(t,S).each(b)):uS(r,g.clientX,g.clientY).each(E=>{var N;g.preventDefault(),(N=c(1,E.node,E.position===bi.Before,!1))&&e.setRng(N),es(S)?S.focus():t.getBody().focus()})}),t.on("keypress",g=>{Ct.modifierPressed(g)||Kl(e.getNode())&&g.preventDefault()}),t.on("GetSelectionRange",g=>{let C=g.range;if(i){if(!i.parentNode)return void(i=null);C=C.cloneRange(),C.selectNode(i),g.range=C}}),t.on("SetSelectionRange",g=>{g.range=(g=>{const C=t.schema.getVoidElements(),S=n.createRng(),E=g.startContainer,N=g.startOffset,A=g.endContainer,R=g.endOffset;return jt(C,E.nodeName.toLowerCase())?0===N?S.setStartBefore(E):S.setStartAfter(E):S.setStart(E,N),jt(C,A.nodeName.toLowerCase())?0===R?S.setEndBefore(A):S.setEndAfter(A):S.setEnd(A,R),S})(g.range);const C=b(g.range,g.forward);C&&(g.range=C)}),t.on("AfterSetSelectionRange",g=>{const C=g.range,S=C.startContainer.parentElement;var E,N;f(C)||Et(E=S)&&"mcepastebin"===E.id||v(),lt(N=S)&&n.hasClass(N,"mce-offscreen-selection")||h()}),(t=>{const e=Es(),n=De.DOM,r=document,o=((l,c)=>u=>{if(0===u.button){const f=Ge(c.dom.getParents(u.target),PO).getOr(null);if(lt(f)&&(p=c.dom,b=c.getBody(),pS(h=f)&&h!==b&&p.isEditable(h.parentElement))){const p=c.dom.getPos(f),b=c.getBody(),h=c.getDoc().documentElement;l.set({element:f,dataTransfer:Gp(),dragging:!1,screenX:u.screenX,screenY:u.screenY,maxX:(c.inline?b.scrollWidth:h.offsetWidth)-2,maxY:(c.inline?b.scrollHeight:h.offsetHeight)-2,relX:u.pageX-p.x,relY:u.pageY-p.y,width:f.offsetWidth,height:f.offsetHeight,ghost:LO(c,f,f.offsetWidth,f.offsetHeight),intervalId:ek(100)})}}var p,b,h})(e,t),s=((t,e)=>{const n=Cc((o,s)=>{return i=o,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void uS(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),c=>{const u=a._selectionOverrides.showCaret(1,c.node,c.position===bi.Before,!1);u?a.selection.setRng(u):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const r=t;return o=>t.on(s=>{const a=Math.max(Math.abs(o.screenX-s.screenX),Math.abs(o.screenY-s.screenY));if(!s.dragging&&a>10){const c=Vl(e,"dragstart",s.element,s.dataTransfer,o);if(lt(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const c=o.currentTarget===e.getDoc().documentElement,u=((f,p)=>({pageX:p.pageX-f.relX,pageY:p.pageY+5}))(s,(p=o,b=(g=f=e).inline?fS(g.getBody()):{left:0,top:0},h=(g=>{const C=g.getBody();return g.inline?{left:C.scrollLeft,top:C.scrollTop}:{left:0,top:0}})(f),v=((g,C)=>{if(C.target.ownerDocument!==g.getDoc()){const S=fS(g.getContentAreaContainer()),E=(N=>{const A=N.getBody(),R=N.getDoc().documentElement;return N.inline?{left:A.scrollLeft,top:A.scrollTop}:{left:A.scrollLeft||R.scrollLeft,top:A.scrollTop||R.scrollTop}})(g);return{left:C.pageX-S.left+E.left,top:C.pageY-S.top+E.top}}return{left:C.pageX,top:C.pageY}})(f,p),{pageX:v.left-b.left+h.left,pageY:v.top-b.top+h.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((f,p,b,h,v,g,C,S,E,N,A,R)=>{let L=0,P=0;f.style.left=p.pageX+"px",f.style.top=p.pageY+"px",p.pageX+b>v&&(L=p.pageX+b-v),p.pageY+h>g&&(P=p.pageY+h-g),f.style.width=b-L+"px",f.style.height=h-P+"px";const j=E.clientHeight,$=E.clientWidth,B=C+E.getBoundingClientRect().top,I=S+E.getBoundingClientRect().left;A.on(U=>{U.intervalId.clear(),U.dragging&&R&&(C+8>=j?U.intervalId.set(vS(N)):C-8<=0?U.intervalId.set(bS(N)):S+8>=$?U.intervalId.set(hS(N)):S-8<=0?U.intervalId.set(gS(N)):B+16>=window.innerHeight?U.intervalId.set(vS(window)):B-16<=0?U.intervalId.set(bS(window)):I+16>=window.innerWidth?U.intervalId.set(hS(window)):I-16<=0&&U.intervalId.set(gS(window)))})})(s.ghost,u,s.width,s.height,s.maxX,s.maxY,o.clientY,o.clientX,e.getContentAreaContainer(),e.getWin(),r,c),n.throttle(o.clientX,o.clientY)}var f,p,g,b,h,v,i,l})})(e,t),a=((l,c)=>u=>{l.on(f=>{var p,b,h,v;if(f.intervalId.clear(),f.dragging){if(b=c,h=(b=>{const h=b.getSel();if(lt(h)){const v=h.getRangeAt(0).startContainer;return st(v)?v.parentNode:v}return null})(c.selection),v=f.element,!Se(h)&&h!==v&&!b.dom.isChildOf(h,v)&&b.dom.isEditable(h)){const b=null!==(p=c.getDoc().elementFromPoint(u.clientX,u.clientY))&&void 0!==p?p:c.getBody();Vl(c,"drop",b,f.dataTransfer,u).isDefaultPrevented()||c.undoManager.transact(()=>{((h,v)=>{const g=h.getParent(v.parentNode,h.isBlock);yS(v),g&&g!==h.getRoot()&&h.isEmpty(g)&&ks(D(g))})(c.dom,f.element),(h=>{const v=h.getData("text/html");return""===v?k.none():k.some(v)})(f.dataTransfer).each(h=>c.insertContent(h)),c._selectionOverrides.hideFakeCaret()})}Vl(c,"dragend",c.getBody(),f.dataTransfer,u)}}),xS(l)})(e,t),i=((l,c)=>u=>CS(l,c,k.some(u)))(e,t);t.on("mousedown",o),t.on("mousemove",s),t.on("mouseup",a),n.bind(r,"mousemove",s),n.bind(r,"mouseup",i),t.on("remove",()=>{n.unbind(r,"mousemove",s),n.unbind(r,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===Ct.ESC&&CS(e,t,k.none())})})(g=t),a_(g)&&(C=>{const S=A=>{if(!A.isDefaultPrevented()){const R=A.dataTransfer;R&&(At(R.types,"Files")||R.files.length>0)&&(A.preventDefault(),"drop"===A.type&&hd(C,"Dropped file type is not supported"))}},E=A=>{Gc(C,A.target)&&S(A)},N=()=>{const A=De.DOM,R=C.dom,L=document,P=C.inline?C.getBody():C.getDoc(),j=["drop","dragover"];Q(j,$=>{A.bind(L,$,E),R.bind(P,$,S)}),C.on("remove",()=>{Q(j,$=>{A.unbind(L,$,E),R.unbind(P,$,S)})})};C.on("init",()=>{Pr.setEditorTimeout(C,N,0)})})(g),(g=>{const C=Cc(()=>{if(!g.removed&&g.getBody().contains(document.activeElement)){const S=g.selection.getRng();if(S.collapsed){const E=sp(g,S,!1);g.selection.setRng(E)}}},0);g.on("focus",()=>{C.throttle()}),g.on("blur",()=>{C.cancel()})})(t),(g=>{g.on("init",()=>{g.on("focusin",C=>{const S=C.target;if(Do(S)){const E=Sa(g.getBody(),S),N=Me(E)?E:S;g.selection.getNode()!==N&&Dl(g,N).each(A=>g.selection.setRng(A))}})})})(t)),{showCaret:c,showBlockCaretContainer:g=>{g.hasAttribute("data-mce-caret")&&(Wu(g),e.scrollIntoView(g))},hideFakeCaret:v,destroy:()=>{o.destroy(),i=null}};var g},jO=(t,e)=>{let n=e;for(let r=t.previousSibling;st(r);r=r.previousSibling)n+=r.data.length;return n},SS=(t,e,n,r,o)=>{if(st(n)&&(r<0||r>n.data.length))return[];const s=o&&st(n)?[jO(n,r)]:[r];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,o)),a=a.parentNode;return a===e?s.reverse():[]},og=(t,e,n,r,o,s,a=!1)=>({start:SS(t,e,n,r,a),end:SS(t,e,o,s,a)}),ES=(t,e)=>{const n=e.slice(),r=n.pop();return x(r)?Cn(n,(o,s)=>o.bind(a=>k.from(a.childNodes[s])),k.some(t)).bind(o=>st(o)&&(r<0||r>o.data.length)?k.none():k.some({node:o,offset:r})):k.none()},kS=(t,e)=>ES(t,e.start).bind(({node:n,offset:r})=>ES(t,e.end).map(({node:o,offset:s})=>{const a=document.createRange();return a.setStart(n,r),a.setEnd(o,s),a})),vi=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const r=e.parentNode;t.remove(e,st(e.firstChild)&&qa(e.firstChild.data)),vi(t,r,n)}},$d=(t,e,n,r=!0)=>{const o=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),r&&!n(e.startContainer)&&(st(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),st(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),vi(t,o,n),o!==s&&vi(t,s,n))},Wd=(t,e)=>k.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),sg=(t,e,n)=>{const r=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:Gh(r).concat(t.blockPatterns),inlinePatterns:Qh(r).concat(t.inlinePatterns)}},ag=(t,e,n,r)=>{const o=t.createRng();return o.setStart(e,0),o.setEnd(n,r),o.toString()},_S=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),Vd=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},NS=(t,e,n)=>{const r=kS(t.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,s=r.endContainer,a=0===r.endOffset?s:s.splitText(r.endOffset),i=0===r.startOffset?o:o.splitText(r.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(_S(t,e+"-end"),a),start:l.insertBefore(_S(t,e+"-start"),i)}},AS=(t,e,n)=>{vi(t,t.get(e.prefix+"-end"),n),vi(t,t.get(e.prefix+"-start"),n)},ig=t=>0===t.start.length,TS=(t,e,n,r)=>{const o=e.start;var s;return Ap(t,r.container,r.offset,(s=o,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),u=l.lastIndexOf(s);return-1!==u?u+s.length:-1!==c?c+1:-1}),n).bind(a=>{var i,l;const c=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(o))&&void 0!==l?l:-1;if(-1!==c&&a.offset>=c+o.length){const u=t.createRng();return u.setStart(a.container,a.offset-o.length),u.setEnd(a.container,a.offset),k.some(u)}return Np(a.container,a.offset-o.length,n).map(f=>{const p=t.createRng();return p.setStart(f.container,f.offset),p.setEnd(a.container,a.offset),p}).filter(f=>f.toString()===o).orThunk(()=>TS(t,e,n,ho(a.container,0)))})},zO=(t,e,n,r)=>{const o=t.dom,s=o.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Np(i,l-n.pattern.end.length,e).bind(c=>{const u=og(o,s,c.container,c.offset,i,l,r);if(ig(a))return k.some({matches:[{pattern:a,startRng:u,endRng:u}],position:c});{const f=Kd(t,n.remainingPatterns,c.container,c.offset,e,r),p=f.getOr({matches:[],position:c}),b=p.position;return((v,g,C,S,E,N=!1)=>{if(0===g.start.length&&!N){const A=v.createRng();return A.setStart(C,S),A.setEnd(C,S),k.some(A)}return _p(C,S,E).bind(A=>TS(v,g,E,A).bind(R=>{var L;return N&&(R.endContainer===A.container&&R.endOffset===A.offset||0===A.offset&&(null===(L=R.endContainer.textContent)||void 0===L?void 0:L.length)===R.endOffset)?k.none():k.some(R)}))})(o,a,b.container,b.offset,e,f.isNone()).map(v=>{const g=((C,S,E,N=!1)=>og(C,S,E.startContainer,E.startOffset,E.endContainer,E.endOffset,N))(o,s,v,r);return{matches:p.matches.concat([{pattern:a,startRng:g,endRng:u}]),position:ho(v.startContainer,v.startOffset)}})}})},Kd=(t,e,n,r,o,s)=>{const a=t.dom;return _p(n,r,a.getRoot()).bind(i=>{const l=ag(a,o,n,r);for(let c=0;c<e.length;c++){const u=e[c];if(!Vs(l,u.end))continue;const f=e.slice();f.splice(c,1);const p=zO(t,o,{pattern:u,remainingPatterns:f,position:i},s);if(p.isNone()&&r>0)return Kd(t,e,n,r-1,o,s);if(p.isSome())return p}return k.none()})},RS=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?Q(e.format,r=>{t.formatter.apply(r)}):t.execCommand(e.cmd,!1,e.value)},OS=(t,e,n,r,o,s)=>{var a;return((i,l)=>{const c=fr(i,u=>Te(l,f=>u.pattern.start===f.pattern.start&&u.pattern.end===f.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(Kd(t,o.inlinePatterns,n,r,e,s).fold(()=>[],i=>i.matches),Kd(t,(a=o.inlinePatterns,Wo(a,(i,l)=>l.end.length-i.end.length)),n,r,e,s).fold(()=>[],i=>i.matches))},DS=(t,e)=>{if(0===e.length)return;const n=t.dom,r=t.selection.getBookmark(),o=((s,a)=>{const i=Qi("mce_textpattern"),l=$o(a,(c,u)=>{const f=NS(s,i+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return $o(l,(c,u)=>{const f=l.length-c.length-1,p=ig(u.pattern)?u.endMarker:NS(s,i+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:p}])},[])})(n,e);Q(o,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;ig(s.pattern)?((l,c,u,f)=>{const p=Vd(l.dom,u);$d(l.dom,p,f),RS(l,c,p)})(t,s.pattern,s.endMarker,i):((l,c,u,f,p)=>{const b=l.dom,h=Vd(b,f),v=Vd(b,u);$d(b,v,p),$d(b,h,p);const C=Vd(b,{prefix:u.prefix,start:u.end,end:f.start});RS(l,c,C)})(t,s.pattern,s.startMarker,s.endMarker,i),AS(n,s.endMarker,i),AS(n,s.startMarker,i)}),t.selection.moveToBookmark(r)},BS=(t,e,n)=>((r,o,s)=>{if(st(r)&&0>=r.length)return k.some(ho(r,0));{const a=da(_d);return k.from(a.forwards(r,0,Nd(r),s)).map(i=>ho(i.container,0))}})(e,0,e).map(r=>{const o=r.container;return jx(o,n.start.length,e).each(s=>{const a=t.createRng();a.setStart(o,0),a.setEnd(s.container,s.offset),$d(t,a,i=>i===e)}),o}),PS=t=>(e,n)=>{const o=n.pattern,s=kS(e.dom.getRoot(),n.range).getOrDie("Unable to resolve path range");return Wd(e,s).each(a=>{"block-format"===o.type?((i,l)=>{const c=l.get(i);return at(c)&&Sn(c).exists(u=>jt(u,"block"))})(o.format,e.formatter)&&e.undoManager.transact(()=>{t(e.dom,a,o),e.formatter.apply(o.format)}):"block-command"===o.type&&e.undoManager.transact(()=>{t(e.dom,a,o),e.execCommand(o.cmd,!1,o.value)})}),!0},LS=t=>(e,n)=>{const r=Wo(e,(a,i)=>i.start.length-a.start.length),o=n.replace(gn," ");return Ge(r,s=>t(s,n,o))},MS=(t,e)=>(n,r,o,s,a)=>{var i;void 0===a&&(a=null!==(i=r.textContent)&&void 0!==i?i:"");const l=n.dom,c=In(n);return l.is(r,c)?t(o.blockPatterns,a).map(u=>e&&it.trim(a).length===u.start.length?[]:[{pattern:u,range:og(l,l.getRoot(),r,0,r,0,s)}]).getOr([]):[]},UO=PS((t,e,n)=>{BS(t,e,n).each(r=>{const o=D(r),s=xc(o);var a,i;/^\s[^\s]/.test(s)&&(a=o,i=s.slice(1),Uu.set(a,i))})}),HO=LS((t,e,n)=>0===e.indexOf(t.start)||0===n.indexOf(t.start)),qO=MS(HO,!0),$O=PS(BS),WO=LS((t,e,n)=>e===t.start||n===t.start),VO=MS(WO,!1),IS=(t,e,n)=>{for(let r=0;r<t.length;r++)if(n(t[r],e))return!0;return!1},lg=De.DOM,YO=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,cg=t=>Eo(t,e=>!1===Ie(e)),FS=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return cg({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_unsafe_embeds:e("convert_unsafe_embeds"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:YO(t),sandbox_iframes:e("sandbox_iframes"),sandbox_iframes_exclusions:af(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},jS=t=>{const e=t.options.get;return cg({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},dg=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,zS=t=>{const e=dg(t),n=l0(t),r=t.contentCSS,o=()=>{e.unloadAll(r),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?o():t.on("remove",o)};if(t.contentStyles.length>0){let l="";it.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,c,u)=>{const{pass:f,fail:p}=zr(c,v=>tinymce.Resource.has(tp(v))),h=[...f.map(v=>{const g=tinymce.Resource.get(tp(v));return Nt(g)?Promise.resolve(dg(l).loadRawCss(v,g)):Promise.resolve()}),dg(l).loadAll(p)];return l.inline?h:h.concat([l.ui.styleSheetLoader.loadAll(u)])})(t,r,n)).then(s).catch(s),i=jk(t);return i&&((l,c)=>{const u=D(l.getBody()),f=hr(Oe(u)),p=Dt("style");Ze(p,"type","text/css"),Vt(p,le(c)),Vt(f,p),l.on("remove",()=>{ue(p)})})(t,i),a},ug=t=>{var e;!0!==t.removed&&(jo(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||jc(r)&&r.selection.getStart(!0)!==o||Fn(o).each(s=>{const a=s.getNode(),i=Oo(a)?Fn(a).getOr(s):s;r.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=u_(e);he(n)&&n.call(e,e),(r=>{const o=m_(r);o&&Pr.setEditorTimeout(r,()=>{let s;s=!0===o?r:r.editorManager.get(o),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},US=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(lg.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const r=t.getBody();var a,i;r.disabled=!0,t.readonly=u0(t),t._editableRoot=o_(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===lg.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let v=[];const g=E=>{if(!E.blob||!E.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const N=E.id||"blobid"+mT+++(()=>{const P=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+P()+P()+P()})(),A=E.name||N,R=E.blob;var L;return{id:ft(N),name:ft(A),filename:ft(E.filename||A+"."+(L=R.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[L.toLowerCase()]||"dat")),blob:ft(R),base64:ft(E.base64),blobUri:ft(E.blobUri||URL.createObjectURL(R)),uri:ft(E.uri)}},C=E=>Ge(v,E).getOrUndefined(),S=E=>C(N=>N.id()===E);return{create:(E,N,A,R,L)=>{if(Nt(E))return g({id:E,name:R,filename:L,blob:N,base64:A});if(Xt(E))return g(E);throw new Error("Unknown input type")},add:E=>{S(E.id())||v.push(E)},get:S,getByUri:E=>C(N=>N.blobUri()===E),getByData:(E,N)=>C(A=>A.base64()===E&&A.blob().type===N),findFirst:C,removeByUri:E=>{v=Kt(v,N=>N.blobUri()!==E||(URL.revokeObjectURL(N.blobUri()),!1))},destroy:()=>{Q(v,E=>{URL.revokeObjectURL(E.blobUri())}),v=[]}}})();let n,r;const o=YC(),s=[],a=v=>g=>t.selection?v(g):[],i=(v,g,C)=>{let S=0;do{S=v.indexOf(g,S),-1!==S&&(v=v.substring(0,S)+C+v.substr(S+g.length),S+=C.length-g.length+1)}while(-1!==S);return v},l=(v,g,C)=>(v=i(v,`src="${g}"`,`src="${C}"${C===pe.transparentSrc?' data-mce-placeholder="1"':""}`),i(v,'data-mce-src="'+g+'"','data-mce-src="'+C+'"')),c=(v,g)=>{Q(t.undoManager.data,C=>{"fragmented"===C.type?C.fragments=re(C.fragments,S=>l(S,v,g)):C.content=l(C.content,v,g)})},u=()=>(n||(n=QC(t,o)),b().then(a(v=>{const g=re(v,C=>C.blobInfo);return n.upload(g,GC(t)).then(a(C=>{const S=[];let E=!1;const N=re(C,(A,R)=>{const{blobInfo:L,image:P}=v[R];let j=!1;return A.status&&Tk(t)?(A.url&&!fn(P.src,A.url)&&(E=!0),e.removeByUri(P.src),jo(t)||(($,B)=>{const I=t.convertURL(B,"src");var U;c($.src,B),no(D($),{src:o0(t)?(U=B,U+(-1===U.indexOf("?")?"?":"&")+(new Date).getTime()):B,"data-mce-src":I})})(P,A.url)):A.error&&(A.error.remove&&(c(P.src,pe.transparentSrc),S.push(P),j=!0),hd(t,uo.translate(["Failed to upload image: {0}",A.error.message]))),{element:P,status:A.status,uploadUri:A.url,blobInfo:L,removed:j}});return S.length>0&&!jo(t)?t.undoManager.transact(()=>{Q(cn(S),A=>{const R=sr(A);ue(A),R.each((L=>P=>{var j,$;(j=L).dom.isEmpty(($=P).dom)&&lt(j.schema.getTextBlockElements()[fe($)])&&Vt(P,ut('<br data-mce-bogus="1" />'))})(t)),e.removeByUri(A.dom.src)})}):E&&t.undoManager.dispatchChange(),N}))}))),f=()=>r0(t)?u():Promise.resolve([]),p=v=>fr(s,g=>g(v)),b=()=>(r||(r=((t,e)=>{const n={};return{findAll:(r,o=je)=>{const s=Kt((i=r)?xn(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===pe.transparentSrc)&&(Ve(l,"blob:")?!t.isUploaded(l)&&o(i):!!Ve(l,"data:")&&o(i))}),a=re(s,i=>{const l=i.src;if(jt(n,l))return n[l].then(c=>Nt(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((u,f)=>{const p=()=>Promise.reject("Invalid data URI");if(Ve(f,"blob:")){const v=u.getByUri(f);return lt(v)?Promise.resolve(v):(b=f,Ve(b,"blob:")?(g=b,fetch(g).then(C=>C.ok?C.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${g} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Ve(b,"data:")?(h=b,new Promise((g,C)=>{Lm(h).bind(({type:S,data:E,base64Encoded:N})=>Wy(S,E,N)).fold(()=>C("Invalid data URI"),g)})):Promise.reject("Unknown URI format")).then(g=>Vy(g).then(C=>Ky(C,!1,S=>k.some(Xy(u,g,S))).getOrThunk(p)))}var g,b,h;return Ve(f,"data:")?Yy(u,f).fold(p,v=>Promise.resolve(v)):Promise.reject("Unknown image data format")})(e,l).then(u=>(delete n[l],{image:i,blobInfo:u})).catch(u=>(delete n[l],u));return n[l]=c,c}});var i;return Promise.all(a)}}})(o,e)),r.findAll(t.getBody(),p).then(a(v=>{const g=Kt(v,C=>Nt(C)?(hd(t,C),!1):"blob"!==C.uriType);return jo(t)||Q(g,C=>{c(C.image.src,C.blobInfo.blobUri()),C.image.src=C.blobInfo.blobUri(),C.image.removeAttribute("data-mce-src")}),g}))),h=v=>v.replace(/src="(blob:[^"]+)"/g,(g,C)=>{const S=o.getResultUri(C);if(S)return'src="'+S+'"';let E=e.getByUri(C);return E||(E=Cn(t.editorManager.get(),(N,A)=>N||A.editorUpload&&A.editorUpload.blobCache.getByUri(C),void 0)),E?'src="data:'+E.blob().type+";base64,"+E.base64()+'"':g});return t.on("SetContent",()=>{r0(t)?f():b()}),t.on("RawSaveContent",v=>{v.content=h(v.content)}),t.on("GetContent",v=>{v.source_view||"raw"===v.format||"tree"===v.format||(v.content=h(v.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",v=>{Q(v,g=>{const C=g.attr("src");if(!C||e.getByUri(C))return;const S=o.getResultUri(C);S&&g.attr("src",S)})})}),{blobCache:e,addFilter:v=>{s.push(v)},uploadImages:u,uploadImagesAuto:f,scanForImages:b,destroy:()=>{e.destroy(),o.destroy(),r=n=null}}})(t),t.schema=Ss(jS(t)),t.dom=De(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Lk(t),referrerPolicy:rf(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=li(FS(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const u=a.dom,f="data-mce-"+c;let p=l.length;for(;p--;){const b=l[p];let h=b.attr(c);if(h&&!b.attr(f)){if(0===h.indexOf("data:")||0===h.indexOf("blob:"))continue;"style"===c?(h=u.serializeStyle(u.parseStyle(h),b.name),h.length||(h=null),b.attr(f,h),b.attr(c,h)):"tabindex"===c?(b.attr(f,h),b.attr(c,null)):b.attr(f,a.convertURL(h,c,b.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const u=l[c],f=u.attr("type")||"no/type";0!==f.indexOf("mce-")&&u.attr("type","mce-"+f)}}),O_(a)&&i.addNodeFilter("#cdata",l=>{var c;let u=l.length;for(;u--;){const f=l[u];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode(null!==(c=f.value)&&void 0!==c?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const u=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(u)&&0===f.getAll("br").length&&f.append(new Kn("br",1))}}),i})(t),t.serializer=jC((a=>{const i=a.options.get;return{...FS(a),...jS(a),...cg({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=FC(t.dom,t.getWin(),t.serializer,t),t.annotator=ub(t),t.formatter=t1(t),t.undoManager=n1(t),t._nodeChangeDispatcher=new cO(t),t._selectionOverrides=FO(t),(a=>{const i=Es(),l=hn(!1),c=zu(u=>{a.dispatch("longpress",{...u,type:"longpress"}),l.set(!0)},400);a.on("touchstart",u=>{cx(u).each(f=>{c.cancel();const p={x:f.clientX,y:f.clientY,target:u.target};c.throttle(u),l.set(!1),i.set(p)})},!0),a.on("touchmove",u=>{c.cancel(),cx(u).each(f=>{i.on(p=>{((b,h)=>{const v=Math.abs(b.clientX-h.x),g=Math.abs(b.clientY-h.y);return v>5||g>5})(f,p)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",u=>{c.cancel(),"touchcancel"!==u.type&&i.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{l.get()?u.preventDefault():a.dispatch("tap",{...u,type:"tap"})})},!0)})(t),(i=a=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{const c=L_(i);Q(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const c=M_(i);Q(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})})})(a),(a=>{const i="contenteditable",l=" "+it.trim(T_(a))+" ",c=" "+it.trim(p0(a))+" ",u=fx(l),f=fx(c),p=R_(a);p.length>0&&a.on("BeforeSetContent",b=>{((h,v,g)=>{let C=v.length,S=g.content;if("raw"!==g.format){for(;C--;)S=S.replace(v[C],rR(h,S,p0(h)));g.content=S}})(a,p,b)}),a.parser.addAttributeFilter("class",b=>{let h=b.length;for(;h--;){const v=b[h];u(v)?v.attr(i,"true"):f(v)&&v.attr(i,"false")}}),a.serializer.addAttributeFilter(i,b=>{let h=b.length;for(;h--;){const v=b[h];(u(v)||f(v))&&(p.length>0&&v.attr("data-mce-content")?(v.name="#text",v.type=3,v.raw=!0,v.value=v.attr("data-mce-content")):v.attr(i,null))}})})(t),jo(t)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,r,o)=>{const s=Y.fromRangeStart(n).getNode(),a=(f=r,p=o,Nr(D(s),b=>Vr(b.dom)||p.isBlock(fe(b)),lS(f)).getOr(D(f)).dom),i=dS(s,a,!1),l=dS(s,a,!0),c=document.createRange();var f,p;return cS(i,a).fold(()=>{iS(i)?c.setStart(i,0):c.setStartBefore(i)},u=>c.setStartBefore(u.dom)),cS(l,a).fold(()=>{iS(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)},u=>c.setEndAfter(u.dom)),c})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(ym(e))})(a))})})(t),(a=>{(t=>{const e=[",",".",";",":","!","?"],n=[32],r=()=>{return a=N_(t),i=A_(t),{inlinePatterns:Qh(a),blockPatterns:Gh(a),dynamicPatternsLookup:i};var a,i},o=()=>t.options.isSet("text_patterns_lookup");t.on("keydown",a=>{if(13===a.keyCode&&!Ct.modifierPressed(a)&&t.selection.isCollapsed()){const i=ef(r(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||o())&&((u,f)=>{const p=u.selection.getRng();return Wd(u,p).map(b=>{var h;const v=Math.max(0,p.startOffset),g=sg(f,b,null!==(h=b.textContent)&&void 0!==h?h:"");return{inlineMatches:OS(u,b,p.startContainer,v,g,!0),blockMatches:qO(u,b,g,!0)}}).filter(({inlineMatches:b,blockMatches:h})=>h.length>0||b.length>0)})(l=t,i).fold(xe,({inlineMatches:u,blockMatches:f})=>(l.undoManager.add(),l.undoManager.extra(()=>{l.execCommand("mceInsertNewLine")},()=>{l.insertContent(bn,{preserve_zwsp:!0}),DS(l,u),((h,v)=>{if(0===v.length)return;const g=h.selection.getBookmark();Q(v,C=>UO(h,C)),h.selection.moveToBookmark(g)})(l,f);const p=l.selection.getRng(),b=_p(p.startContainer,p.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),b.each(h=>{const v=h.container;"\ufeff"===v.data.charAt(h.offset-1)&&(v.deleteData(h.offset-1,1),vi(l.dom,v.parentNode,g=>g===l.dom.getRoot()))})}),!0))&&a.preventDefault()}var l},!0),t.on("keydown",a=>{if(32===a.keyCode&&t.selection.isCollapsed()){const i=ef(r(),"space");(i.blockPatterns.length>0||o())&&((u,f)=>{const p=u.selection.getRng();return Wd(u,p).map(b=>{const h=Math.max(0,p.startOffset),v=ag(u.dom,b,p.startContainer,h),g=sg(f,b,v);return VO(u,b,g,!1,v)}).filter(b=>b.length>0)})(l=t,i).fold(xe,u=>(l.undoManager.transact(()=>{var f;f=l,Q(u,b=>$O(f,b))}),!0))&&a.preventDefault()}var l},!0);const s=()=>{if(t.selection.isCollapsed()){const a=ef(r(),"space");(a.inlinePatterns.length>0||o())&&((i,l)=>{const c=i.selection.getRng();Wd(i,c).map(u=>{const f=Math.max(0,c.startOffset-1),p=ag(i.dom,u,c.startContainer,f),b=sg(l,u,p),h=OS(i,u,c.startContainer,f,b,!1);h.length>0&&i.undoManager.transact(()=>{DS(i,h)})})})(t,a)}};t.on("keyup",a=>{IS(n,a,(i,l)=>i===l.keyCode&&!Ct.modifierPressed(l))&&s()}),t.on("keypress",a=>{IS(e,a,(i,l)=>i.charCodeAt(0)===l.charCode)&&Pr.setEditorTimeout(t,s)})})(a)})(t));const o=lO(t);((t,e)=>{t.addCommand("delete",()=>{var n;lx(n=t,e,!1).fold(()=>{n.selection.isEditable()&&(om(n),sm(n))},Qn)}),t.addCommand("forwardDelete",()=>{var n;lx(n=t,e,!0).fold(()=>{n.selection.isEditable()&&Iv(n,"ForwardDelete")},Qn)})})(t,o),(a=>{a.on("NodeChange",xt(nR,a))})(t),(a=>{var i;const l=a.dom,c=In(a),u=null!==(i=qk(a))&&void 0!==i?i:"",f=(p,b)=>{if((g=>{if(o1(g)){const C=g.keyCode;return!s1(g)&&(Ct.metaKeyPressed(g)||g.altKey||C>=112&&C<=123||At(CT,C))}return!1})(p))return;const h=a.getBody(),v=!(o1(g=p)&&!(s1(g)||"keyup"===g.type&&229===g.keyCode))&&((g,C,S)=>{if(g.isEmpty(C,void 0,{skipBogus:!1,includeZwsp:!0})){const E=C.firstElementChild;return!E||!g.getStyle(C.firstElementChild,"padding-left")&&!g.getStyle(C.firstElementChild,"padding-right")&&S===E.nodeName.toLowerCase()}return!1})(l,h,c);var g;(""!==l.getAttrib(h,r1)!==v||b)&&(l.setAttrib(h,r1,v?u:null),((g,C)=>{g.dispatch("PlaceholderToggle",{state:C})})(a,v),a.on(v?"keydown":"keyup",f),a.off(v?"keyup":"keydown",f))};Sr(u)&&a.on("init",p=>{f(p,!0),a.on("change SetContent ExecCommand",f),a.on("paste",b=>Pr.setEditorTimeout(a,()=>f(b)))})})(t),(t=>{const e=hn(!1),n=hn(E_(t)?"text":"html"),r=(o=>{const s=hn(null);return{create:()=>((a,i)=>{const{dom:l,selection:c}=a,u=a.getBody();i.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Ww);pe.browser.isFirefox()&&l.setStyle(f,"left","rtl"===l.getStyle(u,"direction",!0)?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",p=>{p.stopPropagation()}),f.focus(),c.select(f,!0)})(o,s),remove:()=>((a,i)=>{const l=a.dom;if(Zp(a)){let c;const u=i.get();for(;c=Zp(a);)l.remove(c),l.unbind(c);u&&a.selection.setRng(u)}i.set(null)})(o,s),getEl:()=>Zp(o),getHtml:()=>(a=>{const i=a.dom,l=(p,b)=>{p.appendChild(b),i.remove(b,!0)},[c,...u]=Kt(a.getBody().childNodes,bO);Q(u,p=>{l(c,p)});const f=i.select("div[id=mcepastebin]",c);for(let p=f.length-1;p>=0;p--){const b=i.create("div");c.insertBefore(b,f[p]),l(b,f[p])}return c?c.innerHTML:""})(o),getLastRng:s.get}})(t);var o,s,a;o=t,(pe.browser.isChromium()||pe.browser.isSafari())&&(a=EO,(s=o).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((o,s)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),vb(a,!1)):(i.set("text"),vb(a,!0)),a.focus()})(o,s)}),o.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Hd(o,i.html,i.internal,!1),i.text&&eg(o,i.text,!1)})})(t,n),(o=>{const s=l=>c=>{l(o,c)},a=b_(o);he(a)&&o.on("PastePreProcess",s(a));const i=v_(o);he(i)&&o.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(o=>{o.on("cut",(s=>a=>{!a.isDefaultPrevented()&&rS(s)&&s.selection.isEditable()&&tS(a,nS(s),eS(s),()=>{if(pe.browser.isChromium()||pe.browser.isFirefox()){const i=s.selection.getRng();Pr.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(o)),o.on("copy",(s=>a=>{!a.isDefaultPrevented()&&rS(s)&&tS(a,nS(s),eS(s),St)})(o))})(t),((o,s)=>{h_(o)&&o.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Dc(o)||o.on("drop",a=>{const i=a.dataTransfer;i&&Te(i.files,c=>/^image\//.test(c.type))&&a.preventDefault()}),o.on("drop",a=>{if(a.isDefaultPrevented())return;const i=oS(o,a);if(Se(i))return;const l=Qw(a.dataTransfer),c=Ms(l,Ud());if((!Zw(l)||(h=>{const v=h["text/plain"];return!!v&&0===v.indexOf("file://")})(l))&&Jw(o,a,i))return;const u=l[Ud()],f=u||l["text/html"]||l["text/plain"],p=((h,v,g,C)=>{const S=h.getParent(g,E=>sa(v,E));if(!te(h.getParent(g,"summary")))return!0;if(S&&jt(C,"text/html")){const E=(new DOMParser).parseFromString(C["text/html"],"text/html").body;return!te(E.querySelector(S.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,i.startContainer,l),b=s.get();b&&!p||f&&(a.preventDefault(),Pr.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{(u||b&&p)&&o.execCommand("Delete"),sS(o,i);const h=Xw(f);l["text/html"]?Hd(o,h,c,!0):eg(o,h,!0)})}))}),o.on("dragstart",a=>{s.set(!0)}),o.on("dragover dragend",a=>{Dc(o)&&!s.get()&&(a.preventDefault(),sS(o,oS(o,a))),"dragend"===a.type&&s.set(!1)}),(a=>{a.on("input",i=>{const l=c=>te(c.querySelector("summary"));if("deleteByDrag"===i.inputType){const c=Kt(a.dom.select("details"),l);Q(c,u=>{We(u.firstChild)&&u.firstChild.remove();const f=a.dom.create("summary");f.appendChild(tl().dom),u.prepend(f)})}})})(o)})(t,e),((t,e,n)=>{((r,o,s)=>{let a;r.on("keydown",i=>{var l;(Ct.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),r.on("paste",i=>{if(i.isDefaultPrevented()||(u=i,pe.os.isAndroid()&&0===(null===(p=null===(f=u.clipboardData)||void 0===f?void 0:f.items)||void 0===p?void 0:p.length)))return;var u,f,p;const l="text"===s.get()||a;a=!1;const c=Qw(i.clipboardData);!Zw(c)&&Jw(r,i,o.getLastRng()||r.selection.getRng())||(Ms(c,"text/html")?(i.preventDefault(),ng(r,c,c["text/html"],l,!0)):Ms(c,"text/plain")&&Ms(c,"text/uri-list")?(i.preventDefault(),ng(r,c,c["text/plain"],l,!0)):(o.create(),Pr.setEditorTimeout(r,()=>{const u=o.getHtml();o.remove(),ng(r,c,u,l,!1)},0)))})})(t,e,n),(r=>{const o=a=>Ve(a,"webkit-fake-url"),s=a=>Ve(a,"data:");r.parser.addNodeFilter("img",(a,i,l)=>{if(!Dc(r)&&!0===(null===(u=l.data)||void 0===u?void 0:u.paste))for(const c of a){const u=c.attr("src");Nt(u)&&!c.attr("data-mce-object")&&u!==pe.transparentSrc&&(o(u)||!__(r)&&s(u))&&c.remove()}var u})})(t)})(t,r,n)})})(t);const s=(a=>{const i=a;return(l=a,Re(l.plugins,"rtc").bind(c=>k.from(c.setup))).fold(()=>(i.rtcInstance=DC(a),k.none()),l=>(i.rtcInstance=(()=>{const c=ft(null),u=ft("");return{init:{bindEvents:St},undoManager:{beforeChange:St,add:c,undo:c,redo:c,clear:St,reset:St,hasUndo:xe,hasRedo:xe,transact:c,ignore:St,extra:St},formatter:{match:xe,matchAll:ft([]),matchNode:ft(void 0),canApply:xe,closest:u,apply:St,remove:St,toggle:St,formatChanged:ft({unbind:St})},editor:{getContent:u,setContent:ft({content:"",html:""}),insertContent:ft(""),addVisual:St},selection:{getContent:u},autocompleter:{addDecoration:St,removeDecoration:St},raw:{getModel:ft(k.none())}}})(),k.some(()=>l().then(c=>(i.rtcInstance=(u=>{const f=E=>Xt(E)?E:{},{init:p,undoManager:b,formatter:h,editor:v,selection:g,autocompleter:C,raw:S}=u;return{init:{bindEvents:p.bindEvents},undoManager:{beforeChange:b.beforeChange,add:b.add,undo:b.undo,redo:b.redo,clear:b.clear,reset:b.reset,hasUndo:b.hasUndo,hasRedo:b.hasRedo,transact:(E,N,A)=>b.transact(A),ignore:(E,N)=>b.ignore(N),extra:(E,N,A,R)=>b.extra(A,R)},formatter:{match:(E,N,A,R)=>h.match(E,f(N),R),matchAll:h.matchAll,matchNode:h.matchNode,canApply:E=>h.canApply(E),closest:E=>h.closest(E),apply:(E,N,A)=>h.apply(E,f(N)),remove:(E,N,A,R)=>h.remove(E,f(N)),toggle:(E,N,A)=>h.toggle(E,f(N)),formatChanged:(E,N,A,R,L)=>h.formatChanged(N,A,R,L)},editor:{getContent:E=>v.getContent(E),setContent:(E,N)=>({content:v.setContent(E,N),html:""}),insertContent:(E,N)=>(v.insertContent(E),""),addVisual:v.addVisual},selection:{getContent:(E,N)=>g.getContent(N)},autocompleter:{addDecoration:C.addDecoration,removeDecoration:C.removeDecoration},raw:{getModel:()=>k.some(S.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),p_(a)||(i.body.spellcheck=!1,lg.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=it.each,n=Ct.BACKSPACE,r=Ct.DELETE,o=t.dom,s=t.selection,a=t.parser,i=pe.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),u=pe.deviceType.isiPhone()||pe.deviceType.isiPad(),f=pe.os.isMacOS()||pe.os.isiOS(),p=(B,I)=>{try{t.getDoc().execCommand(B,!1,String(I))}catch{}},b=B=>B.isDefaultPrevented(),h=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},v=()=>{t.inline||o.bind(t.getDoc(),"mousedown mouseup",B=>{let I;if(B.target===t.getDoc().documentElement)if(I=s.getRng(),t.getBody().focus(),"mousedown"===B.type){if(Tr(I.startContainer))return;s.placeCaretAt(B.clientX,B.clientY)}else s.setRng(I)})},g=()=>{Range.prototype.getClientRects||t.on("mousedown",B=>{if(!b(B)&&"HTML"===B.target.nodeName){const I=t.getBody();I.blur(),Pr.setEditorTimeout(t,()=>{I.focus()})}})},C=()=>{const B=m0(t);t.on("click",I=>{const U=I.target;/^(IMG|HR)$/.test(U.nodeName)&&o.isEditable(U)&&(I.preventDefault(),t.selection.select(U),t.nodeChanged()),"A"===U.nodeName&&o.hasClass(U,B)&&0===U.childNodes.length&&o.isEditable(U.parentNode)&&(I.preventDefault(),s.select(U))})},S=()=>{t.on("keydown",B=>{if(!b(B)&&B.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const I=s.getNode().previousSibling;if(I&&I.nodeName&&"table"===I.nodeName.toLowerCase())return B.preventDefault(),!1}return!0})},E=()=>{u0(t)||t.on("BeforeExecCommand mousedown",()=>{p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),c0(t)||p("enableObjectResizing",!1)})},N=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},A=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},R=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",B=>{let I;"HTML"===B.target.nodeName&&(I=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(I),t.selection.normalize(),t.nodeChanged())}))},L=()=>{f&&t.on("keydown",B=>{!Ct.metaKeyPressed(B)||B.shiftKey||37!==B.keyCode&&39!==B.keyCode||(B.preventDefault(),t.selection.getSel().modify("move",37===B.keyCode?"backward":"forward","lineboundary"))})},P=()=>{t.on("click",B=>{let I=B.target;do{if("A"===I.tagName)return void B.preventDefault()}while(I=I.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},j=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",B=>{B.preventDefault()})})},$=St;return jo(t)?(c&&(v(),C(),j(),h(),u&&(A(),R(),P())),l&&(g(),E(),N(),L())):(t.on("keydown",B=>{if(b(B)||B.keyCode!==Ct.BACKSPACE)return;let I=s.getRng();const U=I.startContainer,G=I.startOffset,ct=o.getRoot();let rt=U;if(I.collapsed&&0===G){for(;rt.parentNode&&rt.parentNode.firstChild===rt&&rt.parentNode!==ct;)rt=rt.parentNode;"BLOCKQUOTE"===rt.nodeName&&(t.formatter.toggle("blockquote",void 0,rt),I=o.createRng(),I.setStart(U,0),I.setEnd(U,0),s.setRng(I))}}),(()=>{const B=I=>{const U=o.create("body"),G=I.cloneContents();return U.appendChild(G),s.serializer.serialize(U,{format:"html"})};t.on("keydown",I=>{const U=I.keyCode;if(!b(I)&&(U===r||U===n)&&t.selection.isEditable()){const G=t.selection.isCollapsed(),ct=t.getBody();if(G&&!ns(t.schema,ct)||!G&&!(rt=>{const wt=B(rt),Tt=o.createRng();return Tt.selectNode(t.getBody()),wt===B(Tt)})(t.selection.getRng()))return;I.preventDefault(),t.setContent(""),ct.firstChild&&o.isBlock(ct.firstChild)?t.selection.setCursorLocation(ct.firstChild,0):t.selection.setCursorLocation(ct,0),t.nodeChanged()}})})(),pe.windowsPhone||t.on("keyup focusin mouseup",B=>{Ct.modifierPressed(B)||(I=>{const U=I.getBody(),G=I.selection.getRng();return G.startContainer===G.endContainer&&G.startContainer===U&&0===G.startOffset&&G.endOffset===U.childNodes.length})(t)||s.normalize()},!0),c&&(v(),C(),t.on("init",()=>{p("DefaultParagraphSeparator",In(t))}),j(),S(),a.addNodeFilter("br",B=>{let I=B.length;for(;I--;)"Apple-interchange-newline"===B[I].attr("class")&&B[I].remove()}),u?(A(),R(),P()):h()),l&&(t.on("keydown",B=>{if(!b(B)&&B.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const I=s.getNode(),U=I.previousSibling;if("HR"===I.nodeName)return o.remove(I),void B.preventDefault();U&&U.nodeName&&"hr"===U.nodeName.toLowerCase()&&(o.remove(U),B.preventDefault())}}}),g(),(()=>{const B=()=>{const U=o.getAttribs(s.getStart().cloneNode(!1));return()=>{const G=s.getStart();G!==t.getBody()&&(o.setAttrib(G,"style",null),e(U,ct=>{G.setAttributeNode(ct.cloneNode(!0))}))}},I=()=>!s.isCollapsed()&&o.getParent(s.getStart(),o.isBlock)!==o.getParent(s.getEnd(),o.isBlock);t.on("keypress",U=>{let G;return!(!(b(U)||8!==U.keyCode&&46!==U.keyCode)&&I()&&(G=B(),t.getDoc().execCommand("delete",!1),G(),U.preventDefault(),1))}),o.bind(t.getDoc(),"cut",U=>{if(!b(U)&&I()){const G=B();Pr.setEditorTimeout(t,()=>{G()})}})})(),E(),t.on("SetContent ExecCommand",B=>{"setcontent"!==B.type&&"mceInsertLink"!==B.command||e(o.select("a:not([data-mce-block])"),I=>{var U;let G=I.parentNode;const ct=o.getRoot();if(G?.lastChild===I){for(;G&&!o.isBlock(G);){if((null===(U=G.parentNode)||void 0===U?void 0:U.lastChild)!==G||G===ct)return;G=G.parentNode}o.add(G,"br",{"data-mce-bogus":1})}})}),N(),L(),S())),{refreshContentEditable:$,isHidden:()=>{if(!l||t.removed)return!1;const B=t.selection.getSel();return!B||!B.rangeCount||0===B.rangeCount}}})(a),a.dispatch("PostRender");const c=zk(a);void 0!==c&&(l.dir=c);const u=g_(a);u&&a.on("BeforeSetContent",f=>{it.each(u,p=>{f.content=f.content.replace(p,b=>"\x3c!--mce:protected "+escape(b)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing="compositionstart"===f.type})})(t),(a=>{const i=F_(a);var c,l;Nt(j_(a))||!Ie(i)&&"INVALID"!=("gpl"===(l=i).toLowerCase()||(c=l).length>=64&&c.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(t),s.fold(()=>{const a=(i=>{let l=!1;const c=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(t);zS(t).then(()=>{ug(t),a()})},a=>{t.setProgressState(!0),zS(t).then(()=>{a().then(i=>{t.setProgressState(!1),ug(t),BC(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),ug(t),BC(t)})})})},GO=je,fg=De.DOM,HS=De.DOM,qS=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),$S=t=>{const e=t.getElement();return t.inline?qS(null):(n=>{const r=HS.create("div");return HS.insertAfter(r,n),qS(r,r)})(e)},QO=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const r=it.trim(s0(n)),o=n.ui.registry.getAll().icons,s={...gd.get("default").icons,...gd.get(r).icons};we(s,(a,i)=>{jt(o,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const r=Ga(n);if(Nt(r)){const o=ka.get(r);n.theme=o(n,ka.urls[r])||{},he(n.theme.init)&&n.theme.init(n,ka.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const r=of(n),o=ci.get(r);n.model=o(n,ci.urls[r])})(t),(n=>{const r=[];Q(Oc(n),o=>{((s,a,i)=>{const l=di.get(i),c=di.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=it.trim(i),l&&-1===it.inArray(a,i)){if(s.plugins[i])return;try{const u=l(s,c)||{};s.plugins[i]=u,he(u.init)&&(u.init(s,c),a.push(i))}catch(u){((f,p,b)=>{const h=uo.translate(["Failed to initialize plugin: {0}",p]);mb(f,"PluginLoadError",{message:h}),bd(h,b),hd(f,h)})(s,i,u)}}})(n,r,o.replace(/^\-/,""))})})(t);const e=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,Nt(Ga(n))?(o=>{const s=o.theme.renderUI;return s?s():$S(o)})(n):he(Ga(n))?(o=>{const s=o.getElement(),a=Ga(o)(o,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||o.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||o.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):$S(n)})(t);var n,r;((n,r)=>{const o={show:k.from(r.show).getOr(St),hide:k.from(r.hide).getOr(St),isEnabled:k.from(r.isEnabled).getOr(je),setEnabled:s=>{n.mode.isReadOnly()||k.from(r.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...o}})(t,k.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(XC(r=n,Fk(r)),(r=>XC(r,l0(r)))(n)),t.inline?US(t):((n,r)=>{((o,s)=>{const a=o.translate("Rich Text Area"),i=ro(D(o.getElement()),"tabindex").bind(Ks),l=((c,u,f,p)=>{const b=Dt("iframe");return p.each(h=>Ze(b,"tabindex",h)),no(b,f),no(b,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:u}),H(b,"tox-edit-area__iframe"),b})(o.id,a,yk(o),i).dom;l.onload=()=>{l.onload=null,o.dispatch("load")},o.contentAreaContainer=s.iframeContainer,o.iframeElement=l,o.iframeHTML=(c=>{let u=Ck(c)+"<html><head>";e0(c)!==c.documentBaseUrl&&(u+='<base href="'+c.documentBaseURI.getURI()+'" />'),u+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const f=xk(c),p=wk(c),b=c.translate(c_(c));return n0(c)&&(u+='<meta http-equiv="Content-Security-Policy" content="'+n0(c)+'" />'),u+=`</head><body id="${f}" class="mce-content-body ${p}" data-id="${c.id}" aria-label="${b}"><br></body></html>`,u})(o),fg.add(s.iframeContainer,l)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=fg.isHidden(r.editorContainer)),n.getElement().style.display="none",fg.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const s=o.iframeElement,a=()=>{o.contentDocument=s.contentDocument,US(o)};if(B_(o)||pe.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close(),a()}else{const l=((t,e,n,r)=>((o,s,a,i,l)=>{const c=((u,f)=>p=>{u(p)&&f((b=>{const h=D(ta(b).getOr(b.target)),v=()=>b.stopPropagation(),g=()=>b.preventDefault(),C=Rn(g,v);return((S,E,N,A,R,L,P)=>({target:S,x:E,y:N,stop:A,prevent:R,kill:L,raw:P}))(h,b.clientX,b.clientY,v,g,C,b)})(p))})(a,i);return o.dom.addEventListener(s,c,!1),{unbind:xt($e,o,s,c,!1)}})(t,"load",n,()=>{l.unbind(),a()}))(D(s),0,GO);s.srcdoc=o.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},Na=De.DOM,WS=t=>"-"===t.charAt(0),VS=(t,e,n)=>k.from(e).filter(r=>Sr(r)&&!gd.has(r)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:k.some(r)})),KS=Dn().deviceType,XS=KS.isPhone(),JO=KS.isTablet(),Xl=t=>{if(Se(t))return[];{const e=at(t)?t:t.split(/[ ,]/),n=re(e,Xo);return Kt(n,Sr)}},mg=(t,e)=>jt(t.sections(),e),eD=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Re(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),nD=(t,e)=>{var n;const r=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?it.extend({},t.external_plugins,r):r},sD=(t,e)=>{const n=t.selection,r=t.dom;return/^ | $/.test(e)?((o,s,a,i)=>{const l=D(o.getRoot());return a=xl(l,Y.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),wl(l,Y.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),e,t.schema):e},Xd=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const s=it.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:s}}return{content:o,details:{}}})(e);Wm(t,{...r,content:sD(t,n),format:"html",set:!1,selection:!0}).each(o=>{const s=(i=o.content,l=r,Zm(t).editor.insertContent(i,l));var i,l;Vm(t,s,o),t.addVisual()})}},aD={"font-size":"size","font-family":"face"},iD=Js("font"),YS=t=>(e,n)=>k.from(n).map(D).filter(Un).bind(r=>{return(o=t,s=e,a=r.dom,Sm(D(a),i=>{return dt(l=i,o).orThunk(()=>iD(l)?Re(aD,o).bind(c=>ro(l,c)):k.none());var l},i=>It(D(s),i))).or(((o,s)=>k.from(De.DOM.getStyle(s,o,!0)))(t,r.dom));var o,s,a}).getOr(""),lD=YS("font-size"),cD=Rn(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),YS("font-family")),dD=t=>Fn(t.getBody()).bind(e=>{const n=e.container();return k.from(st(n)?n.parentNode:n)}),pg=(t,e)=>{return n=t,r=zs(k.some,e),(o=n,k.from(o.selection.getRng()).bind(s=>{const a=o.getBody();return s.startContainer===a&&0===s.startOffset?k.none():k.from(o.selection.getStart(!0))})).orThunk(xt(dD,n)).map(D).filter(Un).bind(r);var n,r,o},GS=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const r=it.explode(t.options.get("font_size_style_values")),o=it.explode(t.options.get("font_size_classes"));return o.length>0?o[n-1]||e:r[n-1]||e}return e}return e},uD=t=>{const e=t.split(/\s*,\s*/);return re(e,n=>-1===n.indexOf(" ")||Ve(n,'"')||Ve(n,"'")?n:`'${n}'`).join(",")},QS=(t,e)=>{const n=t.dom,r=t.selection.getRng(),o=e?t.selection.getStart():t.selection.getEnd(),s=e?r.startContainer:r.endContainer,a=ql(n,s);if(!a||!a.isContentEditable)return;const i=e?Ft:Bt,l=In(t);((c,u,f,p)=>{const b=c.dom,h=g=>b.isBlock(g)&&g.parentElement===f,v=h(u)?u:b.getParent(p,h,f);return k.from(v).map(D)})(t,o,a,s).each(c=>{const u=gw(t,s,c.dom,a,!1,l);i(c,D(u)),t.selection.setCursorLocation(u,0),t.dispatch("NewBlock",{newBlock:u}),Hl(t,"insertParagraph")})},mD=["toggleview"],ZS=t=>At(mD,t.toLowerCase());class JS{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,r,o){const s=this.editor,a=e.toLowerCase(),i=o?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?zf(c=s).each(u=>c.selection.setRng(u)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:r}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[a];return!!he(l)&&(l(a,n,r),s.dispatch("ExecCommand",{command:e,ui:n,value:r}),!0)}queryCommandState(e){if(!ZS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),r=this.commands.state[n];return!!he(r)&&r(n)}queryCommandValue(e){if(!ZS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),r=this.commands.value[n];return he(r)?r(n):""}addCommands(e,n="exec"){const r=this.commands;we(e,(o,s)=>{Q(s.toLowerCase().split(","),a=>{r[n][a]=o})})}addCommand(e,n,r){const o=e.toLowerCase();this.commands.exec[o]=(s,a,i)=>n.call(r??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,r){this.commands.state[e.toLowerCase()]=()=>n.call(r??this.editor)}addQueryValueHandler(e,n,r){this.commands.value[e.toLowerCase()]=()=>n.call(r??this.editor)}}const Aa="data-mce-contenteditable",gg=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Yd=(t,e)=>{t.dom.contentEditable=e?"true":"false"},Ta=t=>t.readonly,tE=t=>{t.parser.addAttributeFilter("contenteditable",e=>{Ta(t)&&Q(e,n=>{n.attr(Aa,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(Aa,e=>{Ta(t)&&Q(e,n=>{n.attr("contenteditable",n.attr(Aa))})}),t.serializer.addTempAttr(Aa)},pD=["copy"],gD=it.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class hg{static isNative(e){return!!gD[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||xe}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const r=e.toLowerCase(),o=Lu(r,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const s=this.bindings[r];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(!1===l.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(e,n,r,o){if(!1===n&&(n=xe),n){const s={func:n,removed:!1};o&&it.extend(s,o);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=r?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(e,n){if(e){const r=e.toLowerCase().split(" ");let o=r.length;for(;o--;){const s=r[o];let a=this.bindings[s];if(!s)return we(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=zr(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,Q(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else we(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(e,n,r){return this.on(e,n,r,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const Yl=t=>(t._eventDispatcher||(t._eventDispatcher=new hg({scope:t,toggleEvent:(e,n)=>{hg.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),bg={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const r=this;if(r.removed&&"remove"!==t&&"detach"!==t)return Lu(t.toLowerCase(),e??{},r);const o=Yl(r).dispatch(t,e);if(!1!==n&&r.parent){let s=r.parent();for(;s&&!o.isPropagationStopped();)s.dispatch(t,o,!1),s=s.parent?s.parent():void 0}return o},on(t,e,n){return Yl(this).on(t,e,n)},off(t,e){return Yl(this).off(t,e)},once(t,e){return Yl(this).once(t,e)},hasEventListeners(t){return Yl(this).has(t)}},Gd=De.DOM;let Ra;const Qd=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=d0(t);return n?(t.eventRoot||(t.eventRoot=Gd.select(n)[0]),t.eventRoot):t.getBody()},eE=(t,e,n)=>{var r;(r=t).hidden||Ta(r)?Ta(t)&&((r,o)=>{if("click"!==o.type||Ct.metaKeyPressed(o))At(pD,o.type)&&r.dispatch(o.type,o);else{const s=D(o.target);(a=r,i=s,ao(i,"a",l=>It(l,D(a.getBody()))).bind(l=>ro(l,"href"))).each(a=>{if(o.preventDefault(),/^#/.test(a)){const i=r.dom.select(`${a},[name="${Ko(a,"#")}"]`);i.length&&r.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},nE=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=Qd(t,e);if(d0(t)){if(Ra||(Ra={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Ra&&(we(Ra,(o,s)=>{t.dom.unbind(Qd(t,s))}),Ra=null)})),Ra[e])return;const r=o=>{const s=o.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||Gd.isChildOf(s,l))&&eE(a[i],e,o)}};Ra[e]=r,Gd.bind(n,e,r)}else{const r=o=>{eE(t,e,o)};Gd.bind(n,e,r),t.delegates[e]=r}},rE={...bg,bindPendingEventDelegates(){const t=this;it.each(t._pendingNativeEvents,e=>{nE(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?nE(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(Qd(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(we(t.delegates,(r,o)=>{t.dom.unbind(Qd(t,o),o,r)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},hD=t=>Nt(t)?{value:t.split(/[ ,]/),valid:!0}:zn(t,Nt)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},oE=(t,e)=>t+(ps(e.message)?"":`. ${e.message}`),sE=t=>t.valid,vg=(t,e,n="")=>{const r=e(t);return Tn(r)?r?{value:t,valid:!0}:{valid:!1,message:n}:r},bD=["design","readonly"],aE=(t,e,n,r)=>{const o=n[e.get()],s=n[r];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${r}:`,a)}var a;o.deactivate(),o.editorReadOnly!==s.editorReadOnly&&((a,i)=>{const l=D(a.getBody());var c,u,f;f=i,ot(c=l,u="mce-content-readonly")&&!f?et(c,u):f&&H(c,u),i?(a.selection.controlSelection.hideResizeRect(),a._selectionOverrides.hideFakeCaret(),(c=>{k.from(c.selection.getNode()).each(u=>{u.removeAttribute("data-mce-selected")})})(a),a.readonly=!0,Yd(l,!1),Q(Ln(l,'*[contenteditable="true"]'),c=>{Ze(c,Aa,"true"),Yd(c,!1)})):(a.readonly=!1,a.hasEditableRoot()&&Yd(l,!0),Q(Ln(l,`*[${Aa}="true"]`),c=>{m(c,Aa),Yd(c,!0)}),gg(a,"StyleWithCSS",!1),gg(a,"enableInlineTableEditing",!1),gg(a,"enableObjectResizing",!1),Wb(a)&&a.focus(),(c=>{c.selection.setRng(c.selection.getRng())})(a),a.nodeChanged())})(t,s.editorReadOnly),e.set(r),(a=t).dispatch("SwitchMode",{mode:r})},yg=it.each,Cg=it.explode,vD={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},iE=it.makeMap("alt,ctrl,shift,meta,access"),yD=t=>{const e={},n=pe.os.isMacOS()||pe.os.isiOS();yg(Cg(t.toLowerCase(),"+"),s=>{s in iE?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=vD[s]||s.toUpperCase().charCodeAt(0))});const r=[e.keyCode];let o;for(o in iE)e[o]?r.push(o):e[o]=!1;return e.id=r.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class lE{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(yg(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,r,o){const s=this,a=s.normalizeCommandFunc(r);return yg(Cg(it.trim(e)),i=>{const l=s.createShortcut(i,n,a,o);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,r=e;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:it.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,n,r,o){const s=it.map(Cg(e,">"),yD);return s[s.length-1]=it.extend(s[s.length-1],{func:r,scope:o||this.editor}),it.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const CD=()=>{const t=(()=>{const e={},n={},r={},o={},s={},a={},i={},l={},c=(u,f)=>(p,b)=>{u[p.toLowerCase()]={...b,type:f}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(r,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(a,"contexttoolbar"),addContextForm:c(a,"contextform"),addSidebar:c(i,"sidebar"),addView:c(l,"views"),addIcon:(u,f)=>o[u.toLowerCase()]=f,getAll:()=>({buttons:e,menuItems:n,icons:o,popups:r,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Oa=De.DOM,cE=it.extend,xD=it.each;class Zd{constructor(e,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,cE(this,rE);const o=this;this.id=e,this.hidden=!1;const s=((t,e,n,r,o)=>{var s;const a=t?{mobile:eD(null!==(s=o.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return So(s,(c,u)=>At(t,u),wo(i),wo(l)),{t:i,f:l}})(e);return o=n.f,{sections:ft(n.t),options:ft(o)};var o})(["mobile"],Dp(a,o)),l=it.extend(n,r,i.options(),t&&mg(i,"mobile")?((c,u,f={})=>{const p=c.sections(),b=Re(p,u).getOr({});return it.extend({},f,b)})(i,"mobile"):{},{external_plugins:nD(r,i.options())});return((c,u,f,p)=>{const b=Xl(f.forced_plugins),h=Xl(p.plugins),v=mg(S=u,"mobile")?S.sections().mobile:{},g=((S,E,N,A)=>S&&mg(E,"mobile")?A:N)(c,u,h,v.plugins?Xl(v.plugins):h),C=((S,E)=>[...Xl(S),...Xl(E)])(b,g);var S;return it.extend(p,{forced_plugins:b,plugins:C})})(t,i,r,l)})(XS||JO,XS,h=n,r.defaultOptions,h);var h;this.options=((b,h)=>{const v={},g={},C=(E,N,A)=>{const R=vg(N,A);return sE(R)?(g[E]=R.value,!0):(console.warn(oE(`Invalid value passed for the ${E} option`,R)),!1)},S=E=>jt(v,E);return{register:(E,N)=>{const A=Nt(N.processor)?(L=>{const P=(()=>{switch(L){case"array":return at;case"boolean":return Tn;case"function":return he;case"number":return x;case"object":return Xt;case"string":return Nt;case"string[]":return hD;case"object[]":return j=>zn(j,Xt);case"regexp":return j=>wr(j,RegExp);default:return je}})();return j=>vg(j,P,`The value must be a ${L}.`)})(N.processor):N.processor,R=((L,P,j)=>{if(!Ie(P)){const $=vg(P,j);if(sE($))return $.value;console.error(oE(`Invalid default value passed for the "${L}" option`,$))}})(E,N.default,A);v[E]={...N,default:R,processor:A},Re(g,E).orThunk(()=>Re(h,E)).each(L=>C(E,L,A))},isRegistered:S,get:E=>Re(g,E).orThunk(()=>Re(v,E).map(N=>N.default)).getOrUndefined(),set:(E,N)=>{if(S(E)){const A=v[E];return A.immutable?(console.error(`"${E}" is an immutable option and cannot be updated`),!1):C(E,N,A.processor)}return console.warn(`"${E}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:E=>{const N=S(E);return N&&delete g[E],N},isSet:E=>jt(g,E)}})(0,s),(b=>{const h=b.options.register;h("id",{processor:"string",default:b.id}),h("selector",{processor:"string"}),h("target",{processor:"object"}),h("suffix",{processor:"string"}),h("cache_suffix",{processor:"string"}),h("base_url",{processor:"string"}),h("referrer_policy",{processor:"string",default:""}),h("language_load",{processor:"boolean",default:!0}),h("inline",{processor:"boolean",default:!1}),h("iframe_attrs",{processor:"object",default:{}}),h("doctype",{processor:"string",default:"<!DOCTYPE html>"}),h("document_base_url",{processor:"string",default:b.documentBaseUrl}),h("body_id",{processor:t0(b,"tinymce"),default:"tinymce"}),h("body_class",{processor:t0(b),default:""}),h("content_security_policy",{processor:"string",default:""}),h("br_in_pre",{processor:"boolean",default:!0}),h("forced_root_block",{processor:v=>{const g=Nt(v)&&Sr(v);return g?{value:v,valid:g}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),h("forced_root_block_attrs",{processor:"object",default:{}}),h("newline_behavior",{processor:v=>{const g=At(["block","linebreak","invert","default"],v);return g?{value:v,valid:g}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),h("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),h("no_newline_selector",{processor:"string",default:""}),h("keep_styles",{processor:"boolean",default:!0}),h("end_container_on_empty_block",{processor:v=>Tn(v)||Nt(v)?{valid:!0,value:v}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),h("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),h("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),h("font_size_classes",{processor:"string",default:""}),h("automatic_uploads",{processor:"boolean",default:!0}),h("images_reuse_filename",{processor:"boolean",default:!1}),h("images_replace_blob_uris",{processor:"boolean",default:!0}),h("icons",{processor:"string",default:""}),h("icons_url",{processor:"string",default:""}),h("images_upload_url",{processor:"string",default:""}),h("images_upload_base_path",{processor:"string",default:""}),h("images_upload_credentials",{processor:"boolean",default:!1}),h("images_upload_handler",{processor:"function"}),h("language",{processor:"string",default:"en"}),h("language_url",{processor:"string",default:""}),h("entity_encoding",{processor:"string",default:"named"}),h("indent",{processor:"boolean",default:!0}),h("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),h("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),h("indent_use_margin",{processor:"boolean",default:!1}),h("indentation",{processor:"string",default:"40px"}),h("content_css",{processor:v=>{const g=!1===v||Nt(v)||zn(v,Nt);return g?Nt(v)?{value:re(v.split(","),Xo),valid:g}:at(v)?{value:v,valid:g}:!1===v?{value:[],valid:g}:{value:v,valid:g}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:sf(b)?[]:["default"]}),h("content_style",{processor:"string"}),h("content_css_cors",{processor:"boolean",default:!1}),h("font_css",{processor:v=>{const g=Nt(v)||zn(v,Nt);return g?{value:at(v)?v:re(v.split(","),Xo),valid:g}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),h("inline_boundaries",{processor:"boolean",default:!0}),h("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),h("object_resizing",{processor:v=>{const g=Tn(v)||Nt(v);return g?!1===v||nf.isiPhone()||nf.isiPad()?{value:"",valid:g}:{value:!0===v?"table,img,figure.image,div,video,iframe":v,valid:g}:{valid:!1,message:"Must be boolean or a string"}},default:!bk}),h("resize_img_proportional",{processor:"boolean",default:!0}),h("event_root",{processor:"string"}),h("service_message",{processor:"string"}),h("theme",{processor:v=>!1===v||Nt(v)||he(v),default:"silver"}),h("theme_url",{processor:"string"}),h("formats",{processor:"object"}),h("format_empty_lines",{processor:"boolean",default:!1}),h("format_noneditable_selector",{processor:"string",default:""}),h("preview_styles",{processor:v=>{const g=!1===v||Nt(v);return g?{value:!1===v?"":v,valid:g}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),h("custom_ui_selector",{processor:"string",default:""}),h("hidden_input",{processor:"boolean",default:!0}),h("submit_patch",{processor:"boolean",default:!0}),h("encoding",{processor:"string"}),h("add_form_submit_trigger",{processor:"boolean",default:!0}),h("add_unload_trigger",{processor:"boolean",default:!0}),h("custom_undo_redo_levels",{processor:"number",default:0}),h("disable_nodechange",{processor:"boolean",default:!1}),h("readonly",{processor:"boolean",default:!1}),h("editable_root",{processor:"boolean",default:!0}),h("plugins",{processor:"string[]",default:[]}),h("external_plugins",{processor:"object"}),h("forced_plugins",{processor:"string[]"}),h("model",{processor:"string",default:b.hasPlugin("rtc")?"plugin":"dom"}),h("model_url",{processor:"string"}),h("block_unsupported_drop",{processor:"boolean",default:!0}),h("visual",{processor:"boolean",default:!0}),h("visual_table_class",{processor:"string",default:"mce-item-table"}),h("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),h("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),h("setup",{processor:"function"}),h("init_instance_callback",{processor:"function"}),h("url_converter",{processor:"function",default:b.convertURL}),h("url_converter_scope",{processor:"object",default:b}),h("urlconverter_callback",{processor:"function"}),h("allow_conditional_comments",{processor:"boolean",default:!1}),h("allow_html_data_urls",{processor:"boolean",default:!1}),h("allow_svg_data_urls",{processor:"boolean"}),h("allow_html_in_named_anchor",{processor:"boolean",default:!1}),h("allow_script_urls",{processor:"boolean",default:!1}),h("allow_unsafe_link_target",{processor:"boolean",default:!1}),h("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),h("fix_list_elements",{processor:"boolean",default:!1}),h("preserve_cdata",{processor:"boolean",default:!1}),h("remove_trailing_brs",{processor:"boolean",default:!0}),h("pad_empty_with_br",{processor:"boolean",default:!1}),h("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),h("element_format",{processor:"string",default:"html"}),h("entities",{processor:"string"}),h("schema",{processor:"string",default:"html5"}),h("convert_urls",{processor:"boolean",default:!0}),h("relative_urls",{processor:"boolean",default:!0}),h("remove_script_host",{processor:"boolean",default:!0}),h("custom_elements",{processor:Rc}),h("extended_valid_elements",{processor:"string"}),h("invalid_elements",{processor:"string"}),h("invalid_styles",{processor:Rc}),h("valid_children",{processor:"string"}),h("valid_classes",{processor:Rc}),h("valid_elements",{processor:"string"}),h("valid_styles",{processor:Rc}),h("verify_html",{processor:"boolean",default:!0}),h("auto_focus",{processor:v=>Nt(v)||!0===v}),h("browser_spellcheck",{processor:"boolean",default:!1}),h("protect",{processor:"array"}),h("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),h("deprecation_warnings",{processor:"boolean",default:!0}),h("a11y_advanced_options",{processor:"boolean",default:!1}),h("api_key",{processor:"string"}),h("license_key",{processor:"string"}),h("paste_block_drop",{processor:"boolean",default:!1}),h("paste_data_images",{processor:"boolean",default:!0}),h("paste_preprocess",{processor:"function"}),h("paste_postprocess",{processor:"function"}),h("paste_webkit_styles",{processor:"string",default:"none"}),h("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),h("paste_merge_formats",{processor:"boolean",default:!0}),h("smart_paste",{processor:"boolean",default:!0}),h("paste_as_text",{processor:"boolean",default:!1}),h("paste_tab_spaces",{processor:"number",default:4}),h("text_patterns",{processor:v=>zn(v,Xt)||!1===v?{value:Zh(!1===v?[]:v),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),h("text_patterns_lookup",{processor:v=>{return he(v)?{value:(g=v,C=>{const S=g(C);return Zh(S)}),valid:!0}:{valid:!1,message:"Must be a single function"};var g},default:v=>[]}),h("noneditable_class",{processor:"string",default:"mceNonEditable"}),h("editable_class",{processor:"string",default:"mceEditable"}),h("noneditable_regexp",{processor:v=>zn(v,Jh)?{value:v,valid:!0}:Jh(v)?{value:[v],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),h("table_tab_navigation",{processor:"boolean",default:!0}),h("highlight_on_focus",{processor:"boolean",default:!0}),h("xss_sanitization",{processor:"boolean",default:!0}),h("details_initial_state",{processor:v=>{const g=At(["inherited","collapsed","expanded"],v);return g?{value:v,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),h("details_serialized_state",{processor:v=>{const g=At(["inherited","collapsed","expanded"],v);return g?{value:v,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),h("init_content_sync",{processor:"boolean",default:!1}),h("newdocument_content",{processor:"string",default:""}),h("sandbox_iframes",{processor:"boolean",default:!0}),h("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),h("convert_unsafe_embeds",{processor:"boolean",default:!0}),b.on("ScriptsLoaded",()=>{h("directionality",{processor:"string",default:uo.isRtl()?"rtl":void 0}),h("placeholder",{processor:"string",default:vk.getAttrib(b.getElement(),"placeholder")})})})(o);const a=this.options.get;a("deprecation_warnings")&&((b,h)=>{((v,g)=>{const C=(t=>{const e=UC(t,tT),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),Wo(e)})(v),S=(t=>HC(t,nT))(g),E=S.length>0,N=C.length>0,A="mobile"===g.theme;if(E||N||A){const R="\n- ",L=A?`\n\nThemes:${R}mobile`:"",P=E?`\n\nPlugins:${R}${S.join(R)}`:"",j=N?`\n\nOptions:${R}${C.join(R)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+L+P+j)}})(b,h),((v,g)=>{const C=(t=>UC(t,eT))(v),S=(t=>HC(t,zC.map(e=>e.name)))(g),E=S.length>0,N=C.length>0;if(E||N){const A="\n- ",R=E?`\n\nPlugins:${A}${S.map(iT).join(A)}`:"",L=N?`\n\nOptions:${A}${C.join(A)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+R+L)}})(b,h)})(n,s);const i=a("suffix");i&&(r.suffix=i),this.suffix=r.suffix;const l=a("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const c=rf(o);c&&(rs.ScriptLoader._setReferrerPolicy(c),De.DOM.styleSheetLoader._setReferrerPolicy(c));const u=f0(o);lt(u)&&De.DOM.styleSheetLoader._setContentCssCors(u),Vn.languageLoad=a("language_load"),Vn.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Yr(e0(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=sf(o),this.hasVisual=i_(o),this.shortcuts=new lE(this),this.editorCommands=new JS(this),(t=>{var e;(t=>{(e=>{const n=r=>()=>{Q("left,center,right,justify".split(","),o=>{r!==o&&e.formatter.remove("align"+o)}),"none"!==r&&(e.formatter.toggle("align"+r,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=r=>()=>{const o=e.selection,s=o.isCollapsed()?[e.dom.getParent(o.getNode(),e.dom.isBlock)]:o.getSelectedBlocks();return Te(s,a=>lt(e.formatter.matchNode(a,r)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=e.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(pe.os.isMacOS()||pe.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!Et(a)||s++!==o||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,r,o)=>{e.selection.select(o)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Vr);if(n){const r=e.dom.createRng();r.selectNodeContents(n),e.selection.setRng(r)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{Xd(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{Xd(e,e.dom.encode(o))},insertHTML:(n,r,o)=>{Xd(e,o)},mceInsertContent:(n,r,o)=>{Xd(e,o)},mceSetContent:(n,r,o)=>{e.setContent(o)},mceReplaceContent:(n,r,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(y_(e))}})})(t),(e=>{const n=(r,o,s)=>{const a=Nt(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");Xt(a)&&Nt(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const r=e.dom.getParent(e.selection.getStart(),"a");return void(r&&e.dom.remove(r,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{sx(e,"indent")},Outdent:()=>{ax(e)}}),e.editorCommands.addCommands({Outdent:()=>nx(e)},"state")})(t),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{QS(e,!0)},InsertNewBlockAfter:()=>{QS(e,!1)}})})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Fd(yw,e)},mceInsertNewLine:(n,r,o)=>{_w(e,o)},InsertLineBreak:(n,r,o)=>{Fd(ww,e)}})})(t),(e=>{(n=>{const r=(o,s)=>{n.formatter.toggle(o,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,s,a)=>{r(o,{value:a})},BackColor:(o,s,a)=>{r("hilitecolor",{value:a})},FontName:(o,s,a)=>{((i,l)=>{const c=GS(i,l);i.formatter.toggle("fontname",{value:uD(c)}),i.nodeChanged()})(n,a)},FontSize:(o,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:GS(i,a)}),i.nodeChanged()},LineHeight:(o,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(o,s,a)=>{var i;r(o,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,s,a)=>{r(Nt(a)?a:"p")},mceToggleFormat:(o,s,a)=>{r(a)}})})(e),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return pg(o=n,s=>cD(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return pg(o=n,s=>lD(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return pg(o=n,s=>{const a=D(o.getBody());return Sm(s,l=>dt(l,"line-height"),xt(It,a)).getOrThunk(()=>{const l=parseFloat(tt(s,"line-height")),c=parseFloat(tt(s,"font-size"));return String(l/c)})}).getOr("");var o})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const s=o??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,r,o)=>{var s;(s=e).removed||(!0===o?Wf(s):(i=>{const l=i.selection,c=i.getBody();let u=l.getRng();i.quirks.refreshContentEditable(),lt(i.bookmark)&&!Ca(i)&&zf(i).each(p=>{i.selection.setRng(p),u=p});const f=(p=i,b=l.getNode(),p.dom.getParent(b,h=>"true"===p.dom.getContentEditable(h)));var p,b;if(f&&i.dom.isChildOf(f,c))return $f(f),$b(i,u),void Wf(i);i.inline||(pe.browser.isOpera()||$f(c),i.getWin().focus()),(pe.browser.isFirefox()||i.inline)&&($f(c),$b(i,u)),Wf(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const f=a("cache_suffix");f&&(pe.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:CD(),styleSheetLoader:void 0,show:St,hide:St,setEnabled:St,isEnabled:je},this.mode=(b=>{const h=hn("design"),v=hn({design:{activate:St,deactivate:St,editorReadOnly:!1},readonly:{activate:St,deactivate:St,editorReadOnly:!0}});return(g=b).serializer?tE(g):g.on("PreInit",()=>{tE(g)}),(g=>{g.on("ShowCaret",C=>{Ta(g)&&C.preventDefault()}),g.on("ObjectSelected",C=>{Ta(g)&&C.preventDefault()})})(b),{isReadOnly:()=>Ta(b),set:g=>((C,S,E,N)=>{if(N!==E.get()){if(!jt(S,N))throw new Error(`Editor mode '${N}' is invalid`);C.initialized?aE(C,E,S,N):C.on("init",()=>aE(C,E,S,N))}})(b,v.get(),h,g),get:()=>h.get(),register:(g,C)=>{v.set(((S,E,N)=>{if(At(bD,E))throw new Error(`Cannot override default mode ${E}`);return{...S,[E]:{...N,deactivate:()=>{try{N.deactivate()}catch(A){console.error(`problem while deactivating editor mode ${E}:`,A)}}}}})(v.get(),g,C))}};var g})(o),r.dispatch("SetupEditor",{editor:this});const p=d_(o);he(p)&&p.call(o,o)}render(){(e=>{const n=e.id;uo.setCode(a0(e));const r=()=>{Na.unbind(window,"ready",r),e.render()};if(!ia.Event.domLoaded)return void Na.bind(window,"ready",r);if(!e.getElement())return;const o=D(e.getElement()),s=y(o);var l;e.on("remove",()=>{Co(o.dom.attributes,i=>m(o,i.name)),no(o,s)}),e.ui.styleSheetLoader=Hg.forElement(o,{contentCssCors:f0(l=e),referrerPolicy:rf(l)}),sf(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||Na.getParent(n,"form");a&&(e.formElement=a,Zk(e)&&!hu(e.getElement())&&(Na.insertAfter(Na.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},Na.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!Jk(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=VC(e),e.notificationManager=WC(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=Na.encode(i.content))}),t_(e)&&e.on("submit",()=>{e.initialized&&e.save()}),e_(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=rs.ScriptLoader,r=()=>{!t.removed&&(o=>{const s=Ga(o);return!Nt(s)||lt(ka.get(s))})(t)&&(o=>{const s=of(o);return lt(ci.get(s))})(t)&&QO(t)};((o,s)=>{const a=Ga(o);if(Nt(a)&&!WS(a)&&!jt(ka.urls,a)){const i=Wk(o),l=i?o.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;ka.load(a,l).catch(()=>{Rl(o,"ThemeLoadError",Ol("theme",l,a))})}})(t,e),((o,s)=>{const a=of(o);if("plugin"!==a&&!jt(ci.urls,a)){const i=Vk(o),l=Nt(i)?o.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;ci.load(a,l).catch(()=>{Rl(o,"ModelLoadError",Ol("model",l,a))})}})(t,e),((o,s)=>{const a=a0(s),i=Mk(s);if(!uo.hasCode(a)&&"en"!==a){const l=Sr(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;o.add(l).catch(()=>{Rl(s,"LanguageLoadError",Ol("language",l,a))})}})(n,t),((o,s,a)=>{const i=VS(s,"default",a),l=(c=s,k.from(Rk(c)).filter(Sr).map(u=>({url:u,name:k.none()}))).orThunk(()=>VS(s,s0(s),""));var c;Q((c=>{const u=[],f=p=>{u.push(p)};for(let p=0;p<c.length;p++)c[p].each(f);return u})([i,l]),c=>{o.add(c.url).catch(()=>{var u,f,p;u=s,f=c.url,p=c.name.getOrUndefined(),Rl(u,"IconsLoadError",Ol("icons",f,p))})})})(n,t,e),((o,s)=>{const a=(i,l)=>{di.load(i,l).catch(()=>{Rl(o,"PluginLoadError",Ol("plugin",l,i))})};we(s_(o),(i,l)=>{a(l,i),o.options.set("plugins",Oc(o).concat(l))}),Q(Oc(o),i=>{!(i=it.trim(i))||di.urls[i]||WS(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(r,r)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Ca(this)}translate(e){return uo.translate(e)}getParam(e,n,r){const o=this.options;return o.isRegistered(e)||(lt(r)?o.register(e,{processor:r,default:n}):o.register(e,{processor:je,default:n})),o.isSet(e)||Ie(n)?o.get(e):n}hasPlugin(e,n){return!(!At(Oc(this),e)||n&&void 0===di.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,r){this.editorCommands.addCommand(e,n,r)}addQueryStateHandler(e,n,r){this.editorCommands.addQueryStateHandler(e,n,r)}addQueryValueHandler(e,n,r){this.editorCommands.addQueryValueHandler(e,n,r)}addShortcut(e,n,r,o){this.shortcuts.add(e,n,r,o)}execCommand(e,n,r,o){return this.editorCommands.execCommand(e,n,r,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(Oa.show(e.getContainer()),Oa.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Oa.hide(e.getContainer()),Oa.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...e,load:!0},s=hu(r)?r.value:r.innerHTML,a=n.setContent(s,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),a}return""}save(e={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...e,save:!0,element:r};let s=n.getContent(o);const a={...o,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,hu(r))r.value=s;else{!e.is_removing&&n.inline||(r.innerHTML=s);const i=Oa.getParent(n.id,"form");i&&xD(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=o.element=r=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return Jm(this,e,n)}getContent(e){return((n,r={})=>{const o=(s=r,a=r.format?r.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return CC(n,o).fold(me,s=>{const a=(l=s,Zm(n).editor.getContent(l));var l;return xC(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=cE({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Jm(this,this.startContent,{format:"raw"}):Jm(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||Oa.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Oa.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const r=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:r?.body)&&void 0!==n?n:null}convertURL(e,n,r){const o=this,s=o.options.get,a=f_(o);if(he(a))return a.call(o,e,r,!0,n);if(!s("convert_urls")||"link"===r||Xt(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length)return e;const i=new Yr(e);return"http"!==i.protocol&&"https"!==i.protocol&&""!==i.protocol?e:s("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,r)=>{var s;s=r,rn(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,r;(n=this)._editableRoot!==(r=e)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:r}=e,o=e.getBody(),s=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&lt(s?.nextSibling)&&md.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&o&&md.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),md.remove(e.getContainer()),pd(n),pd(r),e.destroy()}var a})(this)}destroy(e){((n,r)=>{const{selection:o,dom:s}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),pd(o),pd(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),md.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const yi=De.DOM,Jd=it.each;let tu,dE=!1,rr=[];const eu=t=>{const e=t.type;Jd(Is.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},uE=t=>{if(t!==dE){const e=De.DOM;t?(e.bind(window,"resize",eu),e.bind(window,"scroll",eu)):(e.unbind(window,"resize",eu),e.unbind(window,"scroll",eu)),dE=t}},fE=t=>{const e=rr;return rr=Kt(rr,n=>t!==n),Is.activeEditor===t&&(Is.activeEditor=rr.length>0?rr[0]:null),Is.focusedEditor===t&&(Is.focusedEditor=null),e.length!==rr.length},wD="CSS1Compat"!==document.compatMode,Is={...bg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"0.1",releaseDate:"2024-04-10",i18n:uo,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",r=Yr.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)e=o.base||o.baseURL,n=o.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new Yr(r).toAbsolute(e),t.documentBaseURL=r,t.baseURI=new Yr(t.baseURL),t.suffix=n,(s=t).on("AddEditor",xt(EN,s)),s.on("RemoveEditor",xt(kN,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const r=t.plugin_base_urls;void 0!==r&&we(r,(o,s)=>{Vn.PluginManager.urls[s]=o})},init(t){const e=this;let n;const r=it.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var c;yi.unbind(window,"ready",s),(c=>{const u=t.onpageload;u&&u.apply(e,[])})(),l=xo((c=t,pe.browser.isIE()||pe.browser.isEdge()?(bd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):wD?(bd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Nt(c.selector)?yi.select(c.selector):lt(c.target)?[c.target]:[])),it.each(l,c=>{var u;(u=e.get(c.id))&&u.initialized&&!(u.getContainer()||u.getBody()).parentNode&&(fE(u),u.unbindAllNativeEvents(),u.destroy(!0),u.removed=!0)}),l=it.grep(l,c=>!e.get(c.id)),0===l.length?o([]):Jd(l,c=>{t.inline&&c.tagName.toLowerCase()in r?bd("Could not initialize inline editor on invalid inline target element",c):((u,f,p)=>{const b=new Zd(u,f,e);i.push(b),b.on("init",()=>{++a===l.length&&o(i)}),b.targetElm=b.targetElm||p,b.render()})((u=>{let f=u.id;return f||(f=Re(u,"name").filter(p=>!yi.get(p)).getOrThunk(yi.uniqueId),u.setAttribute("id",f)),f})(c),t,c)})};return yi.bind(window,"ready",s),new Promise(a=>{n?a(n):o=i=>{a(i)}})},get(t){return 0===arguments.length?rr.slice(0):Nt(t)?Ge(rr,e=>e.id===t).getOr(null):x(t)&&rr[t]?rr[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&rr.push(t),uE(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),tu||(tu=r=>{const o=e.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",tu))),t},createEditor(t,e){return this.add(new Zd(t,e,this))},remove(t){const e=this;let n;if(t){if(!Nt(t))return n=t,te(e.get(n.id))?null:(fE(n)&&e.dispatch("RemoveEditor",{editor:n}),0===rr.length&&window.removeEventListener("beforeunload",tu),n.remove(),uE(rr.length>0),n);Jd(yi.select(t),r=>{n=e.get(r.id),n&&e.remove(n)})}else for(let r=rr.length-1;r>=0;r--)e.remove(rr[r])},execCommand(t,e,n){var r;const o=this,s=Xt(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(t){case"mceAddEditor":return o.get(s)||new Zd(s,n.options,o).render(),!0;case"mceRemoveEditor":{const a=o.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Jd(rr,t=>{t.save()})},addI18n:(t,e)=>{uo.add(t,e)},translate:t=>uo.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new Yr(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Yr(this.baseURL)}};Is.setup();const SD=(()=>{const t=Es();return{FakeClipboardItem:e=>({items:e,types:an(e),getType:n=>Re(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),mE=Math.min,Ci=Math.max,nu=Math.round,pE=(t,e,n)=>{let r=e.x,o=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(o+=l),"r"===c[1]&&(r+=i),"c"===c[0]&&(o+=nu(l/2)),"c"===c[1]&&(r+=nu(i/2)),"b"===c[3]&&(o-=a),"r"===c[4]&&(r-=s),"c"===c[3]&&(o-=nu(a/2)),"c"===c[4]&&(r-=nu(s/2)),xi(r,o,s,a)},xi=(t,e,n,r)=>({x:t,y:e,w:n,h:r}),ED={inflate:(t,e,n)=>xi(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:pE,findBestRelativePosition:(t,e,n,r)=>{for(let o=0;o<r.length;o++){const s=pE(t,e,r[o]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return r[o]}return null},intersect:(t,e)=>{const n=Ci(t.x,e.x),r=Ci(t.y,e.y),o=mE(t.x+t.w,e.x+e.w),s=mE(t.y+t.h,e.y+e.h);return o-n<0||s-r<0?null:xi(n,r,o-n,s-r)},clamp:(t,e,n)=>{let r=t.x,o=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,c=Ci(0,e.x-r),u=Ci(0,e.y-o),f=Ci(0,s-i),p=Ci(0,a-l);return r+=c,o+=u,n&&(s+=c,a+=u,r-=f,o-=p),s-=f,a-=p,xi(r,o,s-r,a-o)},create:xi,fromClientRect:t=>xi(t.left,t.top,t.width,t.height)},kD=(()=>{const t={},e={},n={};return{load:(r,o)=>{const s=`Script at URL "${o}" failed to load`,a=`Script at URL "${o}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(void 0!==t[r])return t[r];{const i=new Promise((l,c)=>{const u=((f,p,b=1e3)=>{let h=!1,v=null;const g=E=>(...N)=>{h||(h=!0,null!==v&&(clearTimeout(v),v=null),E.apply(null,N))},C=g(f),S=g(p);return{start:(...E)=>{h||null!==v||(v=setTimeout(()=>S.apply(null,E),b))},resolve:C,reject:S}})(l,c);e[r]=u.resolve,rs.ScriptLoader.loadScript(o).then(()=>u.start(a),()=>u.reject(s))});return t[r]=i,i}},add:(r,o)=>{void 0!==e[r]&&(e[r](o),delete e[r]),t[r]=Promise.resolve(o),n[r]=o},has:r=>r in n,get:r=>n[r],unload:r=>{delete t[r],delete n[r]}}})();let Gl;try{const t="__storage_test__";Gl=window.localStorage,Gl.setItem(t,t),Gl.removeItem(t)}catch{Gl=(()=>{let e={},n=[];const r={getItem:o=>e[o]||null,setItem:(o,s)=>{n.push(o),e[o]=String(s)},key:o=>n[o],removeItem:o=>{n=n.filter(s=>s===o),delete e[o]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const _D={geom:{Rect:ED},util:{Delay:Pr,Tools:it,VK:Ct,URI:Yr,EventDispatcher:hg,Observable:bg,I18n:uo,LocalStorage:Gl,ImageUploader:t=>{const e=YC(),n=QC(t,e);return{upload:(r,o=!0)=>n.upload(r,o?GC(t):void 0)}}},dom:{EventUtils:ia,TreeWalker:pn,TextSeeker:da,DOMUtils:De,ScriptLoader:rs,RangeUtils:ya,Serializer:jC,StyleSheetLoader:Ug,ControlSelection:Cb,BookmarkManager:hl,Selection:FC,Event:ia.Event},html:{Styles:Pu,Entities:ws,Node:Kn,Schema:Ss,DomParser:li,Writer:iv,Serializer:Os},Env:pe,AddOnManager:Vn,Annotator:ub,Formatter:t1,UndoManager:n1,EditorCommands:JS,WindowManager:VC,NotificationManager:WC,EditorObservable:rE,Shortcuts:lE,Editor:Zd,FocusManager:qb,EditorManager:Is,DOM:De.DOM,ScriptLoader:rs.ScriptLoader,PluginManager:di,ThemeManager:ka,ModelManager:ci,IconManager:gd,Resource:kD,FakeClipboard:SD,trim:it.trim,isArray:it.isArray,is:it.is,toArray:it.toArray,makeMap:it.makeMap,each:it.each,map:it.map,grep:it.grep,inArray:it.inArray,extend:it.extend,walk:it.walk,resolve:it.resolve,explode:it.explode,_addCacheSuffix:it._addCacheSuffix},gE=it.extend(Is,_D);(t=>{window.tinymce=t,window.tinyMCE=t})(gE),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(gE)}(),function(bt,Yt){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=bt.document?Yt(bt,!0):function(Qt){if(!Qt.document)throw new Error("jQuery requires a window with a document");return Yt(Qt)}:Yt(bt)}(typeof window<"u"?window:this,function(bt,Yt){"use strict";var Qt=[],Wt=Object.getPrototypeOf,ie=Qt.slice,Xe=Qt.flat?function(d){return Qt.flat.call(d)}:function(d){return Qt.concat.apply([],d)},Nn=Qt.push,tn=Qt.indexOf,Gn={},xr=Gn.toString,An=Gn.hasOwnProperty,wr=An.toString,Nt=wr.call(Object),Xt={},Mt=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},at=function(d){return null!=d&&d===d.window},te=bt.document,Tn={type:!0,src:!0,nonce:!0,noModule:!0};function Ie(d,m,y){var w,_,T=(y=y||te).createElement("script");if(T.text=d,m)for(w in Tn)(_=m[w]||m.getAttribute&&m.getAttribute(w))&&T.setAttribute(w,_);y.head.appendChild(T).parentNode.removeChild(T)}function Se(d){return null==d?d+"":"object"==typeof d||"function"==typeof d?Gn[xr.call(d)]||"object":typeof d}var he=/HTML$/i,x=function(d,m){return new x.fn.init(d,m)};function zn(d){var m=!!d&&"length"in d&&d.length,y=Se(d);return!Mt(d)&&!at(d)&&("array"===y||0===m||"number"==typeof m&&0<m&&m-1 in d)}function St(d,m){return d.nodeName&&d.nodeName.toLowerCase()===m.toLowerCase()}x.fn=x.prototype={jquery:"3.7.1",constructor:x,length:0,toArray:function(){return ie.call(this)},get:function(d){return null==d?ie.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var m=x.merge(this.constructor(),d);return m.prevObject=this,m},each:function(d){return x.each(this,d)},map:function(d){return this.pushStack(x.map(this,function(m,y){return d.call(m,y,m)}))},slice:function(){return this.pushStack(ie.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(d,m){return(m+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(d,m){return m%2}))},eq:function(d){var m=this.length,y=+d+(d<0?m:0);return this.pushStack(0<=y&&y<m?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:Nn,sort:Qt.sort,splice:Qt.splice},x.extend=x.fn.extend=function(){var d,m,y,w,_,T,O=arguments[0]||{},q=1,H=arguments.length,K=!1;for("boolean"==typeof O&&(K=O,O=arguments[q]||{},q++),"object"==typeof O||Mt(O)||(O={}),q===H&&(O=this,q--);q<H;q++)if(null!=(d=arguments[q]))for(m in d)w=d[m],"__proto__"!==m&&O!==w&&(K&&w&&(x.isPlainObject(w)||(_=Array.isArray(w)))?(y=O[m],T=_&&!Array.isArray(y)?[]:_||x.isPlainObject(y)?y:{},_=!1,O[m]=x.extend(K,T,w)):void 0!==w&&(O[m]=w));return O},x.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var m,y;return!(!d||"[object Object]"!==xr.call(d)||(m=Wt(d))&&("function"!=typeof(y=An.call(m,"constructor")&&m.constructor)||wr.call(y)!==Nt))},isEmptyObject:function(d){var m;for(m in d)return!1;return!0},globalEval:function(d,m,y){Ie(d,{nonce:m&&m.nonce},y)},each:function(d,m){var y,w=0;if(zn(d))for(y=d.length;w<y&&!1!==m.call(d[w],w,d[w]);w++);else for(w in d)if(!1===m.call(d[w],w,d[w]))break;return d},text:function(d){var m,y="",w=0,_=d.nodeType;if(!_)for(;m=d[w++];)y+=x.text(m);return 1===_||11===_?d.textContent:9===_?d.documentElement.textContent:3===_||4===_?d.nodeValue:y},makeArray:function(d,m){var y=m||[];return null!=d&&(zn(Object(d))?x.merge(y,"string"==typeof d?[d]:d):Nn.call(y,d)),y},inArray:function(d,m,y){return null==m?-1:tn.call(m,d,y)},isXMLDoc:function(d){var y=d&&(d.ownerDocument||d).documentElement;return!he.test(d&&d.namespaceURI||y&&y.nodeName||"HTML")},merge:function(d,m){for(var y=+m.length,w=0,_=d.length;w<y;w++)d[_++]=m[w];return d.length=_,d},grep:function(d,m,y){for(var w=[],_=0,T=d.length,O=!y;_<T;_++)!m(d[_],_)!==O&&w.push(d[_]);return w},map:function(d,m,y){var w,_,T=0,O=[];if(zn(d))for(w=d.length;T<w;T++)null!=(_=m(d[T],T,y))&&O.push(_);else for(T in d)null!=(_=m(d[T],T,y))&&O.push(_);return Xe(O)},guid:1,support:Xt}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=Qt[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,m){Gn["[object "+m+"]"]=m.toLowerCase()});var Rn=Qt.pop,zs=Qt.sort,ft=Qt.splice,me="[\\x20\\t\\r\\n\\f]",Zr=new RegExp("^"+me+"+|((?:^|[^\\\\])(?:\\\\.)*)"+me+"+$","g");x.contains=function(d,m){var y=m&&m.parentNode;return d===y||!(!y||1!==y.nodeType||!(d.contains?d.contains(y):d.compareDocumentPosition&&16&d.compareDocumentPosition(y)))};var xt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function bo(d,m){return m?"\0"===d?"\ufffd":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}x.escapeSelector=function(d){return(d+"").replace(xt,bo)};var ur=te,vo=Nn;!function(){var d,m,y,w,_,T,O,q,H,K,et=vo,ot=x.expando,J=0,ut=0,Dt=Je(),le=Je(),D=Je(),en=Je(),mn=function(M,W){return M===W&&(_=!0),0},ln="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",_r="(?:\\\\[\\da-fA-F]{1,6}"+me+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",It="\\["+me+"*("+_r+")(?:"+me+"*([*^$|!~]?=)"+me+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+_r+"))|)"+me+"*\\]",qn=":("+_r+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+It+")*)|.*)\\)|)",Ne=new RegExp(me+"+","g"),Le=new RegExp("^"+me+"*,"+me+"*"),oo=new RegExp("^"+me+"*([>+~]|"+me+")"+me+"*"),sr=new RegExp(me+"|>"),ar=new RegExp(qn),vs=new RegExp("^"+_r+"$"),$n={ID:new RegExp("^#("+_r+")"),CLASS:new RegExp("^\\.("+_r+")"),TAG:new RegExp("^("+_r+"|[*])"),ATTR:new RegExp("^"+It),PSEUDO:new RegExp("^"+qn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+me+"*(even|odd|(([+-]|)(\\d*)n|)"+me+"*(?:([+-]|)"+me+"*(\\d+)|))"+me+"*\\)|)","i"),bool:new RegExp("^(?:"+ln+")$","i"),needsContext:new RegExp("^"+me+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+me+"*((?:-\\d)?\\d*)"+me+"*\\)|)(?=[^-]|$)","i")},gr=/^(?:input|select|textarea|button)$/i,Qo=/^h\d$/i,ir=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ee=/[+~]/,qe=new RegExp("\\\\[\\da-fA-F]{1,6}"+me+"?|\\\\([^\\r\\n\\f])","g"),En=function(M,W){var tt="0x"+M.slice(1)-65536;return W||(tt<0?String.fromCharCode(tt+65536):String.fromCharCode(tt>>10|55296,1023&tt|56320))},$r=function(){so()},kn=To(function(M){return!0===M.disabled&&St(M,"fieldset")},{dir:"parentNode",next:"legend"});try{et.apply(Qt=ie.call(ur.childNodes),ur.childNodes)}catch{et={apply:function(W,tt){vo.apply(W,ie.call(tt))},call:function(W){vo.apply(W,ie.call(arguments,1))}}}function se(M,W,tt,nt){var dt,Ut,Ht,Ft,Bt,Ae,Vt,ge=W&&W.ownerDocument,be=W?W.nodeType:9;if(tt=tt||[],"string"!=typeof M||!M||1!==be&&9!==be&&11!==be)return tt;if(!nt&&(so(W),W=W||T,q)){if(11!==be&&(Bt=ir.exec(M)))if(dt=Bt[1]){if(9===be){if(!(Ht=W.getElementById(dt)))return tt;if(Ht.id===dt)return et.call(tt,Ht),tt}else if(ge&&(Ht=ge.getElementById(dt))&&se.contains(W,Ht)&&Ht.id===dt)return et.call(tt,Ht),tt}else{if(Bt[2])return et.apply(tt,W.getElementsByTagName(M)),tt;if((dt=Bt[3])&&W.getElementsByClassName)return et.apply(tt,W.getElementsByClassName(dt)),tt}if(!(en[M+" "]||H&&H.test(M))){if(Vt=M,ge=W,1===be&&(sr.test(M)||oo.test(M))){for((ge=Ee.test(M)&&Ao(W.parentNode)||W)==W&&Xt.scope||((Ft=W.getAttribute("id"))?Ft=x.escapeSelector(Ft):W.setAttribute("id",Ft=ot)),Ut=(Ae=Nr(M)).length;Ut--;)Ae[Ut]=(Ft?"#"+Ft:":scope")+" "+ea(Ae[Ut]);Vt=Ae.join(",")}try{return et.apply(tt,ge.querySelectorAll(Vt)),tt}catch{en(M,!0)}finally{Ft===ot&&W.removeAttribute("id")}}}return Fi(M.replace(Zr,"$1"),W,tt,nt)}function Je(){var M=[];return function W(tt,nt){return M.push(tt+" ")>m.cacheLength&&delete W[M.shift()],W[tt+" "]=nt}}function nn(M){return M[ot]=!0,M}function Oe(M){var W=T.createElement("fieldset");try{return!!M(W)}catch{return!1}finally{W.parentNode&&W.parentNode.removeChild(W),W=null}}function hr(M){return function(W){return St(W,"input")&&W.type===M}}function ys(M){return function(W){return(St(W,"input")||St(W,"button"))&&W.type===M}}function ta(M){return function(W){return"form"in W?W.parentNode&&!1===W.disabled?"label"in W?"label"in W.parentNode?W.parentNode.disabled===M:W.disabled===M:W.isDisabled===M||W.isDisabled!==!M&&kn(W)===M:W.disabled===M:"label"in W&&W.disabled===M}}function Zo(M){return nn(function(W){return W=+W,nn(function(tt,nt){for(var dt,Ut=M([],tt.length,W),Ht=Ut.length;Ht--;)tt[dt=Ut[Ht]]&&(tt[dt]=!(nt[dt]=tt[dt]))})})}function Ao(M){return M&&typeof M.getElementsByTagName<"u"&&M}function so(M){var W,tt=M?M.ownerDocument||M:ur;return tt!=T&&9===tt.nodeType&&tt.documentElement&&(O=(T=tt).documentElement,q=!x.isXMLDoc(T),K=O.matches||O.webkitMatchesSelector||O.msMatchesSelector,O.msMatchesSelector&&ur!=T&&(W=T.defaultView)&&W.top!==W&&W.addEventListener("unload",$r),Xt.getById=Oe(function(nt){return O.appendChild(nt).id=x.expando,!T.getElementsByName||!T.getElementsByName(x.expando).length}),Xt.disconnectedMatch=Oe(function(nt){return K.call(nt,"*")}),Xt.scope=Oe(function(){return T.querySelectorAll(":scope")}),Xt.cssHas=Oe(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Xt.getById?(m.filter.ID=function(nt){var dt=nt.replace(qe,En);return function(Ut){return Ut.getAttribute("id")===dt}},m.find.ID=function(nt,dt){if(typeof dt.getElementById<"u"&&q){var Ut=dt.getElementById(nt);return Ut?[Ut]:[]}}):(m.filter.ID=function(nt){var dt=nt.replace(qe,En);return function(Ut){var Ht=typeof Ut.getAttributeNode<"u"&&Ut.getAttributeNode("id");return Ht&&Ht.value===dt}},m.find.ID=function(nt,dt){if(typeof dt.getElementById<"u"&&q){var Ut,Ht,Ft,Bt=dt.getElementById(nt);if(Bt){if((Ut=Bt.getAttributeNode("id"))&&Ut.value===nt)return[Bt];for(Ft=dt.getElementsByName(nt),Ht=0;Bt=Ft[Ht++];)if((Ut=Bt.getAttributeNode("id"))&&Ut.value===nt)return[Bt]}return[]}}),m.find.TAG=function(nt,dt){return typeof dt.getElementsByTagName<"u"?dt.getElementsByTagName(nt):dt.querySelectorAll(nt)},m.find.CLASS=function(nt,dt){if(typeof dt.getElementsByClassName<"u"&&q)return dt.getElementsByClassName(nt)},H=[],Oe(function(nt){var dt;O.appendChild(nt).innerHTML="<a id='"+ot+"' href='' disabled='disabled'></a><select id='"+ot+"-\r\\' disabled='disabled'><option selected=''></option></select>",nt.querySelectorAll("[selected]").length||H.push("\\["+me+"*(?:value|"+ln+")"),nt.querySelectorAll("[id~="+ot+"-]").length||H.push("~="),nt.querySelectorAll("a#"+ot+"+*").length||H.push(".#.+[+~]"),nt.querySelectorAll(":checked").length||H.push(":checked"),(dt=T.createElement("input")).setAttribute("type","hidden"),nt.appendChild(dt).setAttribute("name","D"),O.appendChild(nt).disabled=!0,2!==nt.querySelectorAll(":disabled").length&&H.push(":enabled",":disabled"),(dt=T.createElement("input")).setAttribute("name",""),nt.appendChild(dt),nt.querySelectorAll("[name='']").length||H.push("\\["+me+"*name"+me+"*="+me+"*(?:''|\"\")")}),Xt.cssHas||H.push(":has"),H=H.length&&new RegExp(H.join("|")),mn=function(nt,dt){if(nt===dt)return _=!0,0;var Ut=!nt.compareDocumentPosition-!dt.compareDocumentPosition;return Ut||(1&(Ut=(nt.ownerDocument||nt)==(dt.ownerDocument||dt)?nt.compareDocumentPosition(dt):1)||!Xt.sortDetached&&dt.compareDocumentPosition(nt)===Ut?nt===T||nt.ownerDocument==ur&&se.contains(ur,nt)?-1:dt===T||dt.ownerDocument==ur&&se.contains(ur,dt)?1:w?tn.call(w,nt)-tn.call(w,dt):0:4&Ut?-1:1)}),T}for(d in se.matches=function(M,W){return se(M,null,null,W)},se.matchesSelector=function(M,W){if(so(M),q&&!en[W+" "]&&(!H||!H.test(W)))try{var tt=K.call(M,W);if(tt||Xt.disconnectedMatch||M.document&&11!==M.document.nodeType)return tt}catch{en(W,!0)}return 0<se(W,T,null,[M]).length},se.contains=function(M,W){return(M.ownerDocument||M)!=T&&so(M),x.contains(M,W)},se.attr=function(M,W){(M.ownerDocument||M)!=T&&so(M);var tt=m.attrHandle[W.toLowerCase()],nt=tt&&An.call(m.attrHandle,W.toLowerCase())?tt(M,W,!q):void 0;return void 0!==nt?nt:M.getAttribute(W)},se.error=function(M){throw new Error("Syntax error, unrecognized expression: "+M)},x.uniqueSort=function(M){var W,tt=[],nt=0,dt=0;if(_=!Xt.sortStable,w=!Xt.sortStable&&ie.call(M,0),zs.call(M,mn),_){for(;W=M[dt++];)W===M[dt]&&(nt=tt.push(dt));for(;nt--;)ft.call(M,tt[nt],1)}return w=null,M},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(ie.apply(this)))},(m=x.expr={cacheLength:50,createPseudo:nn,match:$n,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(M){return M[1]=M[1].replace(qe,En),M[3]=(M[3]||M[4]||M[5]||"").replace(qe,En),"~="===M[2]&&(M[3]=" "+M[3]+" "),M.slice(0,4)},CHILD:function(M){return M[1]=M[1].toLowerCase(),"nth"===M[1].slice(0,3)?(M[3]||se.error(M[0]),M[4]=+(M[4]?M[5]+(M[6]||1):2*("even"===M[3]||"odd"===M[3])),M[5]=+(M[7]+M[8]||"odd"===M[3])):M[3]&&se.error(M[0]),M},PSEUDO:function(M){var W,tt=!M[6]&&M[2];return $n.CHILD.test(M[0])?null:(M[3]?M[2]=M[4]||M[5]||"":tt&&ar.test(tt)&&(W=Nr(tt,!0))&&(W=tt.indexOf(")",tt.length-W)-tt.length)&&(M[0]=M[0].slice(0,W),M[2]=tt.slice(0,W)),M.slice(0,3))}},filter:{TAG:function(M){var W=M.replace(qe,En).toLowerCase();return"*"===M?function(){return!0}:function(tt){return St(tt,W)}},CLASS:function(M){var W=Dt[M+" "];return W||(W=new RegExp("(^|"+me+")"+M+"("+me+"|$)"))&&Dt(M,function(tt){return W.test("string"==typeof tt.className&&tt.className||typeof tt.getAttribute<"u"&&tt.getAttribute("class")||"")})},ATTR:function(M,W,tt){return function(nt){var dt=se.attr(nt,M);return null==dt?"!="===W:!W||(dt+="","="===W?dt===tt:"!="===W?dt!==tt:"^="===W?tt&&0===dt.indexOf(tt):"*="===W?tt&&-1<dt.indexOf(tt):"$="===W?tt&&dt.slice(-tt.length)===tt:"~="===W?-1<(" "+dt.replace(Ne," ")+" ").indexOf(tt):"|="===W&&(dt===tt||dt.slice(0,tt.length+1)===tt+"-"))}},CHILD:function(M,W,tt,nt,dt){var Ut="nth"!==M.slice(0,3),Ht="last"!==M.slice(-4),Ft="of-type"===W;return 1===nt&&0===dt?function(Bt){return!!Bt.parentNode}:function(Bt,Ae,Vt){var ge,be,ae,ue,Ye,cn=Ut!==Ht?"nextSibling":"previousSibling",Wn=Bt.parentNode,Bn=Ft&&Bt.nodeName.toLowerCase(),Ar=!Vt&&!Ft,$e=!1;if(Wn){if(Ut){for(;cn;){for(ae=Bt;ae=ae[cn];)if(Ft?St(ae,Bn):1===ae.nodeType)return!1;Ye=cn="only"===M&&!Ye&&"nextSibling"}return!0}if(Ye=[Ht?Wn.firstChild:Wn.lastChild],Ht&&Ar){for($e=(ue=(ge=(be=Wn[ot]||(Wn[ot]={}))[M]||[])[0]===J&&ge[1])&&ge[2],ae=ue&&Wn.childNodes[ue];ae=++ue&&ae&&ae[cn]||($e=ue=0)||Ye.pop();)if(1===ae.nodeType&&++$e&&ae===Bt){be[M]=[J,ue,$e];break}}else if(Ar&&($e=ue=(ge=(be=Bt[ot]||(Bt[ot]={}))[M]||[])[0]===J&&ge[1]),!1===$e)for(;(ae=++ue&&ae&&ae[cn]||($e=ue=0)||Ye.pop())&&(!(Ft?St(ae,Bn):1===ae.nodeType)||!++$e||(Ar&&((be=ae[ot]||(ae[ot]={}))[M]=[J,$e]),ae!==Bt)););return($e-=dt)===nt||$e%nt==0&&0<=$e/nt}}},PSEUDO:function(M,W){var tt,nt=m.pseudos[M]||m.setFilters[M.toLowerCase()]||se.error("unsupported pseudo: "+M);return nt[ot]?nt(W):1<nt.length?(tt=[M,M,"",W],m.setFilters.hasOwnProperty(M.toLowerCase())?nn(function(dt,Ut){for(var Ht,Ft=nt(dt,W),Bt=Ft.length;Bt--;)dt[Ht=tn.call(dt,Ft[Bt])]=!(Ut[Ht]=Ft[Bt])}):function(dt){return nt(dt,0,tt)}):nt}},pseudos:{not:nn(function(M){var W=[],tt=[],nt=Jo(M.replace(Zr,"$1"));return nt[ot]?nn(function(dt,Ut,Ht,Ft){for(var Bt,Ae=nt(dt,null,Ft,[]),Vt=dt.length;Vt--;)(Bt=Ae[Vt])&&(dt[Vt]=!(Ut[Vt]=Bt))}):function(dt,Ut,Ht){return W[0]=dt,nt(W,null,Ht,tt),W[0]=null,!tt.pop()}}),has:nn(function(M){return function(W){return 0<se(M,W).length}}),contains:nn(function(M){return M=M.replace(qe,En),function(W){return-1<(W.textContent||x.text(W)).indexOf(M)}}),lang:nn(function(M){return vs.test(M||"")||se.error("unsupported lang: "+M),M=M.replace(qe,En).toLowerCase(),function(W){var tt;do{if(tt=q?W.lang:W.getAttribute("xml:lang")||W.getAttribute("lang"))return(tt=tt.toLowerCase())===M||0===tt.indexOf(M+"-")}while((W=W.parentNode)&&1===W.nodeType);return!1}}),target:function(M){var W=bt.location&&bt.location.hash;return W&&W.slice(1)===M.id},root:function(M){return M===O},focus:function(M){return M===function(){try{return T.activeElement}catch{}}()&&T.hasFocus()&&!!(M.type||M.href||~M.tabIndex)},enabled:ta(!1),disabled:ta(!0),checked:function(M){return St(M,"input")&&!!M.checked||St(M,"option")&&!!M.selected},selected:function(M){return!0===M.selected},empty:function(M){for(M=M.firstChild;M;M=M.nextSibling)if(M.nodeType<6)return!1;return!0},parent:function(M){return!m.pseudos.empty(M)},header:function(M){return Qo.test(M.nodeName)},input:function(M){return gr.test(M.nodeName)},button:function(M){return St(M,"input")&&"button"===M.type||St(M,"button")},text:function(M){var W;return St(M,"input")&&"text"===M.type&&(null==(W=M.getAttribute("type"))||"text"===W.toLowerCase())},first:Zo(function(){return[0]}),last:Zo(function(M,W){return[W-1]}),eq:Zo(function(M,W,tt){return[tt<0?tt+W:tt]}),even:Zo(function(M,W){for(var tt=0;tt<W;tt+=2)M.push(tt);return M}),odd:Zo(function(M,W){for(var tt=1;tt<W;tt+=2)M.push(tt);return M}),lt:Zo(function(M,W,tt){var nt;for(nt=tt<0?tt+W:W<tt?W:tt;0<=--nt;)M.push(nt);return M}),gt:Zo(function(M,W,tt){for(var nt=tt<0?tt+W:tt;++nt<W;)M.push(nt);return M})}}).pseudos.nth=m.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})m.pseudos[d]=hr(d);for(d in{submit:!0,reset:!0})m.pseudos[d]=ys(d);function Wr(){}function Nr(M,W){var tt,nt,dt,Ut,Ht,Ft,Bt,Ae=le[M+" "];if(Ae)return W?0:Ae.slice(0);for(Ht=M,Ft=[],Bt=m.preFilter;Ht;){for(Ut in tt&&!(nt=Le.exec(Ht))||(nt&&(Ht=Ht.slice(nt[0].length)||Ht),Ft.push(dt=[])),tt=!1,(nt=oo.exec(Ht))&&(tt=nt.shift(),dt.push({value:tt,type:nt[0].replace(Zr," ")}),Ht=Ht.slice(tt.length)),m.filter)!(nt=$n[Ut].exec(Ht))||Bt[Ut]&&!(nt=Bt[Ut](nt))||(tt=nt.shift(),dt.push({value:tt,type:Ut,matches:nt}),Ht=Ht.slice(tt.length));if(!tt)break}return W?Ht.length:Ht?se.error(M):le(M,Ft).slice(0)}function ea(M){for(var W=0,tt=M.length,nt="";W<tt;W++)nt+=M[W].value;return nt}function To(M,W,tt){var nt=W.dir,dt=W.next,Ut=dt||nt,Ht=tt&&"parentNode"===Ut,Ft=ut++;return W.first?function(Bt,Ae,Vt){for(;Bt=Bt[nt];)if(1===Bt.nodeType||Ht)return M(Bt,Ae,Vt);return!1}:function(Bt,Ae,Vt){var ge,be,ae=[J,Ft];if(Vt){for(;Bt=Bt[nt];)if((1===Bt.nodeType||Ht)&&M(Bt,Ae,Vt))return!0}else for(;Bt=Bt[nt];)if(1===Bt.nodeType||Ht)if(be=Bt[ot]||(Bt[ot]={}),dt&&St(Bt,dt))Bt=Bt[nt]||Bt;else{if((ge=be[Ut])&&ge[0]===J&&ge[1]===Ft)return ae[2]=ge[2];if((be[Ut]=ae)[2]=M(Bt,Ae,Vt))return!0}return!1}}function Cs(M){return 1<M.length?function(W,tt,nt){for(var dt=M.length;dt--;)if(!M[dt](W,tt,nt))return!1;return!0}:M[0]}function ao(M,W,tt,nt,dt){for(var Ut,Ht=[],Ft=0,Bt=M.length,Ae=null!=W;Ft<Bt;Ft++)(Ut=M[Ft])&&(tt&&!tt(Ut,nt,dt)||(Ht.push(Ut),Ae&&W.push(Ft)));return Ht}function io(M,W,tt,nt,dt,Ut){return nt&&!nt[ot]&&(nt=io(nt)),dt&&!dt[ot]&&(dt=io(dt,Ut)),nn(function(Ht,Ft,Bt,Ae){var Vt,ge,be,ae,ue=[],Ye=[],cn=Ft.length,Wn=Ht||function(Ar,$e,Ro){for(var Pn=0,ts=$e.length;Pn<ts;Pn++)se(Ar,$e[Pn],Ro);return Ro}(W||"*",Bt.nodeType?[Bt]:Bt,[]),Bn=!M||!Ht&&W?Wn:ao(Wn,ue,M,Bt,Ae);if(tt?tt(Bn,ae=dt||(Ht?M:cn||nt)?[]:Ft,Bt,Ae):ae=Bn,nt)for(Vt=ao(ae,Ye),nt(Vt,[],Bt,Ae),ge=Vt.length;ge--;)(be=Vt[ge])&&(ae[Ye[ge]]=!(Bn[Ye[ge]]=be));if(Ht){if(dt||M){if(dt){for(Vt=[],ge=ae.length;ge--;)(be=ae[ge])&&Vt.push(Bn[ge]=be);dt(null,ae=[],Vt,Ae)}for(ge=ae.length;ge--;)(be=ae[ge])&&-1<(Vt=dt?tn.call(Ht,be):ue[ge])&&(Ht[Vt]=!(Ft[Vt]=be))}}else ae=ao(ae===Ft?ae.splice(cn,ae.length):ae),dt?dt(null,Ft,ae,Ae):et.apply(Ft,ae)})}function Ii(M){for(var W,tt,nt,dt=M.length,Ut=m.relative[M[0].type],Ht=Ut||m.relative[" "],Ft=Ut?1:0,Bt=To(function(ge){return ge===W},Ht,!0),Ae=To(function(ge){return-1<tn.call(W,ge)},Ht,!0),Vt=[function(ge,be,ae){var ue=!Ut&&(ae||be!=y)||((W=be).nodeType?Bt(ge,be,ae):Ae(ge,be,ae));return W=null,ue}];Ft<dt;Ft++)if(tt=m.relative[M[Ft].type])Vt=[To(Cs(Vt),tt)];else{if((tt=m.filter[M[Ft].type].apply(null,M[Ft].matches))[ot]){for(nt=++Ft;nt<dt&&!m.relative[M[nt].type];nt++);return io(1<Ft&&Cs(Vt),1<Ft&&ea(M.slice(0,Ft-1).concat({value:" "===M[Ft-2].type?"*":""})).replace(Zr,"$1"),tt,Ft<nt&&Ii(M.slice(Ft,nt)),nt<dt&&Ii(M=M.slice(nt)),nt<dt&&ea(M))}Vt.push(tt)}return Cs(Vt)}function Jo(M,W){var tt,nt,dt,Ut,Ht,Ft,Bt=[],Ae=[],Vt=D[M+" "];if(!Vt){for(W||(W=Nr(M)),tt=W.length;tt--;)(Vt=Ii(W[tt]))[ot]?Bt.push(Vt):Ae.push(Vt);(Vt=D(M,(nt=Ae,Ut=0<(dt=Bt).length,Ht=0<nt.length,Ft=function(ge,be,ae,ue,Ye){var cn,Wn,Bn,Ar=0,$e="0",Ro=ge&&[],Pn=[],ts=y,Ua=ge||Ht&&m.find.TAG("*",Ye),Ha=J+=null==ts?1:Math.random()||.1,uc=Ua.length;for(Ye&&(y=be==T||be||Ye);$e!==uc&&null!=(cn=Ua[$e]);$e++){if(Ht&&cn){for(Wn=0,be||cn.ownerDocument==T||(so(cn),ae=!q);Bn=nt[Wn++];)if(Bn(cn,be||T,ae)){et.call(ue,cn);break}Ye&&(J=Ha)}Ut&&((cn=!Bn&&cn)&&Ar--,ge&&Ro.push(cn))}if(Ar+=$e,Ut&&$e!==Ar){for(Wn=0;Bn=dt[Wn++];)Bn(Ro,Pn,be,ae);if(ge){if(0<Ar)for(;$e--;)Ro[$e]||Pn[$e]||(Pn[$e]=Rn.call(ue));Pn=ao(Pn)}et.apply(ue,Pn),Ye&&!ge&&0<Pn.length&&1<Ar+dt.length&&x.uniqueSort(ue)}return Ye&&(J=Ha,y=ts),Ro},Ut?nn(Ft):Ft))).selector=M}return Vt}function Fi(M,W,tt,nt){var dt,Ut,Ht,Ft,Bt,Ae="function"==typeof M&&M,Vt=!nt&&Nr(M=Ae.selector||M);if(tt=tt||[],1===Vt.length){if(2<(Ut=Vt[0]=Vt[0].slice(0)).length&&"ID"===(Ht=Ut[0]).type&&9===W.nodeType&&q&&m.relative[Ut[1].type]){if(!(W=(m.find.ID(Ht.matches[0].replace(qe,En),W)||[])[0]))return tt;Ae&&(W=W.parentNode),M=M.slice(Ut.shift().value.length)}for(dt=$n.needsContext.test(M)?0:Ut.length;dt--&&!m.relative[Ft=(Ht=Ut[dt]).type];)if((Bt=m.find[Ft])&&(nt=Bt(Ht.matches[0].replace(qe,En),Ee.test(Ut[0].type)&&Ao(W.parentNode)||W))){if(Ut.splice(dt,1),!(M=nt.length&&ea(Ut)))return et.apply(tt,nt),tt;break}}return(Ae||Jo(M,Vt))(nt,W,!q,tt,!W||Ee.test(M)&&Ao(W.parentNode)||W),tt}Wr.prototype=m.filters=m.pseudos,m.setFilters=new Wr,Xt.sortStable=ot.split("").sort(mn).join("")===ot,so(),Xt.sortDetached=Oe(function(M){return 1&M.compareDocumentPosition(T.createElement("fieldset"))}),x.find=se,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,se.compile=Jo,se.select=Fi,se.setDocument=so,se.tokenize=Nr,se.escape=x.escapeSelector,se.getText=x.text,se.isXML=x.isXMLDoc,se.selectors=x.expr,se.support=x.support,se.uniqueSort=x.uniqueSort}();var Qn=function(d,m,y){for(var w=[],_=void 0!==y;(d=d[m])&&9!==d.nodeType;)if(1===d.nodeType){if(_&&x(d).is(y))break;w.push(d)}return w},xe=function(d,m){for(var y=[];d;d=d.nextSibling)1===d.nodeType&&d!==m&&y.push(d);return y},je=x.expr.match.needsContext,k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function yo(d,m,y){return Mt(m)?x.grep(d,function(w,_){return!!m.call(w,_,w)!==y}):m.nodeType?x.grep(d,function(w){return w===m!==y}):"string"!=typeof m?x.grep(d,function(w){return-1<tn.call(m,w)!==y}):x.filter(m,d,y)}x.filter=function(d,m,y){var w=m[0];return y&&(d=":not("+d+")"),1===m.length&&1===w.nodeType?x.find.matchesSelector(w,d)?[w]:[]:x.find.matches(d,x.grep(m,function(_){return 1===_.nodeType}))},x.fn.extend({find:function(d){var m,y,w=this.length,_=this;if("string"!=typeof d)return this.pushStack(x(d).filter(function(){for(m=0;m<w;m++)if(x.contains(_[m],this))return!0}));for(y=this.pushStack([]),m=0;m<w;m++)x.find(d,_[m],y);return 1<w?x.uniqueSort(y):y},filter:function(d){return this.pushStack(yo(this,d||[],!1))},not:function(d){return this.pushStack(yo(this,d||[],!0))},is:function(d){return!!yo(this,"string"==typeof d&&je.test(d)?x(d):d||[],!1).length}});var kt,oe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(d,m,y){var w,_;if(!d)return this;if(y=y||kt,"string"==typeof d){if(!(w="<"===d[0]&&">"===d[d.length-1]&&3<=d.length?[null,d,null]:oe.exec(d))||!w[1]&&m)return!m||m.jquery?(m||y).find(d):this.constructor(m).find(d);if(w[1]){if(x.merge(this,x.parseHTML(w[1],(m=m instanceof x?m[0]:m)&&m.nodeType?m.ownerDocument||m:te,!0)),k.test(w[1])&&x.isPlainObject(m))for(w in m)Mt(this[w])?this[w](m[w]):this.attr(w,m[w]);return this}return(_=te.getElementById(w[2]))&&(this[0]=_,this.length=1),this}return d.nodeType?(this[0]=d,this.length=1,this):Mt(d)?void 0!==y.ready?y.ready(d):d(x):x.makeArray(d,this)}).prototype=x.fn,kt=x(te);var de=/^(?:parents|prev(?:Until|All))/,At={children:!0,contents:!0,next:!0,prev:!0};function Te(d,m){for(;(d=d[m])&&1!==d.nodeType;);return d}x.fn.extend({has:function(d){var m=x(d,this),y=m.length;return this.filter(function(){for(var w=0;w<y;w++)if(x.contains(this,m[w]))return!0})},closest:function(d,m){var y,w=0,_=this.length,T=[],O="string"!=typeof d&&x(d);if(!je.test(d))for(;w<_;w++)for(y=this[w];y&&y!==m;y=y.parentNode)if(y.nodeType<11&&(O?-1<O.index(y):1===y.nodeType&&x.find.matchesSelector(y,d))){T.push(y);break}return this.pushStack(1<T.length?x.uniqueSort(T):T)},index:function(d){return d?"string"==typeof d?tn.call(x(d),this[0]):tn.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,m){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(d,m))))},addBack:function(d){return this.add(null==d?this.prevObject:this.prevObject.filter(d))}}),x.each({parent:function(d){var m=d.parentNode;return m&&11!==m.nodeType?m:null},parents:function(d){return Qn(d,"parentNode")},parentsUntil:function(d,m,y){return Qn(d,"parentNode",y)},next:function(d){return Te(d,"nextSibling")},prev:function(d){return Te(d,"previousSibling")},nextAll:function(d){return Qn(d,"nextSibling")},prevAll:function(d){return Qn(d,"previousSibling")},nextUntil:function(d,m,y){return Qn(d,"nextSibling",y)},prevUntil:function(d,m,y){return Qn(d,"previousSibling",y)},siblings:function(d){return xe((d.parentNode||{}).firstChild,d)},children:function(d){return xe(d.firstChild)},contents:function(d){return null!=d.contentDocument&&Wt(d.contentDocument)?d.contentDocument:(St(d,"template")&&(d=d.content||d),x.merge([],d.childNodes))}},function(d,m){x.fn[d]=function(y,w){var _=x.map(this,m,y);return"Until"!==d.slice(-5)&&(w=y),w&&"string"==typeof w&&(_=x.filter(w,_)),1<this.length&&(At[d]||x.uniqueSort(_),de.test(d)&&_.reverse()),this.pushStack(_)}});var re=/[^\x20\t\r\n\f]+/g;function Q(d){return d}function Co(d){throw d}function zr(d,m,y,w){var _;try{d&&Mt(_=d.promise)?_.call(d).done(m).fail(y):d&&Mt(_=d.then)?_.call(d,m,y):m.apply(void 0,[d].slice(w))}catch(T){y.apply(void 0,[T])}}x.Callbacks=function(d){var y;d="string"==typeof d?(y={},x.each(d.match(re)||[],function(J,ut){y[ut]=!0}),y):x.extend({},d);var w,_,T,O,q=[],H=[],K=-1,et=function(){for(O=O||d.once,T=w=!0;H.length;K=-1)for(_=H.shift();++K<q.length;)!1===q[K].apply(_[0],_[1])&&d.stopOnFalse&&(K=q.length,_=!1);d.memory||(_=!1),w=!1,O&&(q=_?[]:"")},ot={add:function(){return q&&(_&&!w&&(K=q.length-1,H.push(_)),function J(ut){x.each(ut,function(Dt,le){Mt(le)?d.unique&&ot.has(le)||q.push(le):le&&le.length&&"string"!==Se(le)&&J(le)})}(arguments),_&&!w&&et()),this},remove:function(){return x.each(arguments,function(J,ut){for(var Dt;-1<(Dt=x.inArray(ut,q,Dt));)q.splice(Dt,1),Dt<=K&&K--}),this},has:function(J){return J?-1<x.inArray(J,q):0<q.length},empty:function(){return q&&(q=[]),this},disable:function(){return O=H=[],q=_="",this},disabled:function(){return!q},lock:function(){return O=H=[],_||w||(q=_=""),this},locked:function(){return!!O},fireWith:function(J,ut){return O||(ut=[J,(ut=ut||[]).slice?ut.slice():ut],H.push(ut),w||et()),this},fire:function(){return ot.fireWith(this,arguments),this},fired:function(){return!!T}};return ot},x.extend({Deferred:function(d){var m=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],y="pending",w={state:function(){return y},always:function(){return _.done(arguments).fail(arguments),this},catch:function(T){return w.then(null,T)},pipe:function(){var T=arguments;return x.Deferred(function(O){x.each(m,function(q,H){var K=Mt(T[H[4]])&&T[H[4]];_[H[1]](function(){var et=K&&K.apply(this,arguments);et&&Mt(et.promise)?et.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[H[0]+"With"](this,K?[et]:arguments)})}),T=null}).promise()},then:function(T,O,q){var H=0;function K(et,ot,J,ut){return function(){var Dt=this,le=arguments,D=function(){var mn,ln;if(!(et<H)){if((mn=J.apply(Dt,le))===ot.promise())throw new TypeError("Thenable self-resolution");Mt(ln=mn&&("object"==typeof mn||"function"==typeof mn)&&mn.then)?ut?ln.call(mn,K(H,ot,Q,ut),K(H,ot,Co,ut)):(H++,ln.call(mn,K(H,ot,Q,ut),K(H,ot,Co,ut),K(H,ot,Q,ot.notifyWith))):(J!==Q&&(Dt=void 0,le=[mn]),(ut||ot.resolveWith)(Dt,le))}},en=ut?D:function(){try{D()}catch(mn){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(mn,en.error),H<=et+1&&(J!==Co&&(Dt=void 0,le=[mn]),ot.rejectWith(Dt,le))}};et?en():(x.Deferred.getErrorHook?en.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(en.error=x.Deferred.getStackHook()),bt.setTimeout(en))}}return x.Deferred(function(et){m[0][3].add(K(0,et,Mt(q)?q:Q,et.notifyWith)),m[1][3].add(K(0,et,Mt(T)?T:Q)),m[2][3].add(K(0,et,Mt(O)?O:Co))}).promise()},promise:function(T){return null!=T?x.extend(T,w):w}},_={};return x.each(m,function(T,O){var q=O[2],H=O[5];w[O[1]]=q.add,H&&q.add(function(){y=H},m[3-T][2].disable,m[3-T][3].disable,m[0][2].lock,m[0][3].lock),q.add(O[3].fire),_[O[0]]=function(){return _[O[0]+"With"](this===_?void 0:this,arguments),this},_[O[0]+"With"]=q.fireWith}),w.promise(_),d&&d.call(_,_),_},when:function(d){var m=arguments.length,y=m,w=Array(y),_=ie.call(arguments),T=x.Deferred(),O=function(q){return function(H){w[q]=this,_[q]=1<arguments.length?ie.call(arguments):H,--m||T.resolveWith(w,_)}};if(m<=1&&(zr(d,T.done(O(y)).resolve,T.reject,!m),"pending"===T.state()||Mt(_[y]&&_[y].then)))return T.then();for(;y--;)zr(_[y],O(y),T.reject);return T.promise()}});var Kt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(d,m){bt.console&&bt.console.warn&&d&&Kt.test(d.name)&&bt.console.warn("jQuery.Deferred exception: "+d.message,d.stack,m)},x.readyException=function(d){bt.setTimeout(function(){throw d})};var $o=x.Deferred();function Cn(){te.removeEventListener("DOMContentLoaded",Cn),bt.removeEventListener("load",Cn),x.ready()}x.fn.ready=function(d){return $o.then(d).catch(function(m){x.readyException(m)}),this},x.extend({isReady:!1,readyWait:1,ready:function(d){(!0===d?--x.readyWait:x.isReady)||(x.isReady=!0)!==d&&0<--x.readyWait||$o.resolveWith(te,[x])}}),x.ready.then=$o.then,"complete"===te.readyState||"loading"!==te.readyState&&!te.documentElement.doScroll?bt.setTimeout(x.ready):(te.addEventListener("DOMContentLoaded",Cn),bt.addEventListener("load",Cn));var Ur=function(d,m,y,w,_,T,O){var q=0,H=d.length,K=null==y;if("object"===Se(y))for(q in _=!0,y)Ur(d,m,q,y[q],!0,T,O);else if(void 0!==w&&(_=!0,Mt(w)||(O=!0),K&&(O?(m.call(d,w),m=null):(K=m,m=function(et,ot,J){return K.call(x(et),J)})),m))for(;q<H;q++)m(d[q],y,O?w:w.call(d[q],q,m(d[q],y)));return _?d:K?m.call(d):H?m(d[0],y):T},Ge=/^-ms-/,Us=/-([a-z])/g;function Zl(d,m){return m.toUpperCase()}function Qe(d){return d.replace(Ge,"ms-").replace(Us,Zl)}var fr=function(d){return 1===d.nodeType||9===d.nodeType||!+d.nodeType};function Jr(){this.expando=x.expando+Jr.uid++}Jr.uid=1,Jr.prototype={cache:function(d){var m=d[this.expando];return m||(m={},fr(d)&&(d.nodeType?d[this.expando]=m:Object.defineProperty(d,this.expando,{value:m,configurable:!0}))),m},set:function(d,m,y){var w,_=this.cache(d);if("string"==typeof m)_[Qe(m)]=y;else for(w in m)_[Qe(w)]=m[w];return _},get:function(d,m){return void 0===m?this.cache(d):d[this.expando]&&d[this.expando][Qe(m)]},access:function(d,m,y){return void 0===m||m&&"string"==typeof m&&void 0===y?this.get(d,m):(this.set(d,m,y),void 0!==y?y:m)},remove:function(d,m){var y,w=d[this.expando];if(void 0!==w){if(void 0!==m)for((y=(m=Array.isArray(m)?m.map(Qe):(m=Qe(m))in w?[m]:m.match(re)||[]).length);y--;)delete w[m[y]];(void 0===m||x.isEmptyObject(w))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var m=d[this.expando];return void 0!==m&&!x.isEmptyObject(m)}};var ee=new Jr,On=new Jr,Wo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Hs=/[A-Z]/g;function Sn(d,m,y){var w,_;if(void 0===y&&1===d.nodeType)if(w="data-"+m.replace(Hs,"-$&").toLowerCase(),"string"==typeof(y=d.getAttribute(w))){try{y="true"===(_=y)||"false"!==_&&("null"===_?null:_===+_+""?+_:Wo.test(_)?JSON.parse(_):_)}catch{}On.set(d,m,y)}else y=void 0;return y}x.extend({hasData:function(d){return On.hasData(d)||ee.hasData(d)},data:function(d,m,y){return On.access(d,m,y)},removeData:function(d,m){On.remove(d,m)},_data:function(d,m,y){return ee.access(d,m,y)},_removeData:function(d,m){ee.remove(d,m)}}),x.fn.extend({data:function(d,m){var y,w,_,T=this[0],O=T&&T.attributes;if(void 0===d){if(this.length&&(_=On.get(T),1===T.nodeType&&!ee.get(T,"hasDataAttrs"))){for(y=O.length;y--;)O[y]&&0===(w=O[y].name).indexOf("data-")&&(w=Qe(w.slice(5)),Sn(T,w,_[w]));ee.set(T,"hasDataAttrs",!0)}return _}return"object"==typeof d?this.each(function(){On.set(this,d)}):Ur(this,function(q){var H;if(T&&void 0===q)return void 0!==(H=On.get(T,d))||void 0!==(H=Sn(T,d))?H:void 0;this.each(function(){On.set(this,d,q)})},null,m,1<arguments.length,null,!0)},removeData:function(d){return this.each(function(){On.remove(this,d)})}}),x.extend({queue:function(d,m,y){var w;if(d)return w=ee.get(d,m=(m||"fx")+"queue"),y&&(!w||Array.isArray(y)?w=ee.access(d,m,x.makeArray(y)):w.push(y)),w||[]},dequeue:function(d,m){var y=x.queue(d,m=m||"fx"),w=y.length,_=y.shift(),T=x._queueHooks(d,m);"inprogress"===_&&(_=y.shift(),w--),_&&("fx"===m&&y.unshift("inprogress"),delete T.stop,_.call(d,function(){x.dequeue(d,m)},T)),!w&&T&&T.empty.fire()},_queueHooks:function(d,m){var y=m+"queueHooks";return ee.get(d,y)||ee.access(d,y,{empty:x.Callbacks("once memory").add(function(){ee.remove(d,[m+"queue",y])})})}}),x.fn.extend({queue:function(d,m){var y=2;return"string"!=typeof d&&(m=d,d="fx",y--),arguments.length<y?x.queue(this[0],d):void 0===m?this:this.each(function(){var w=x.queue(this,d,m);x._queueHooks(this,d),"fx"===d&&"inprogress"!==w[0]&&x.dequeue(this,d)})},dequeue:function(d){return this.each(function(){x.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,m){var y,w=1,_=x.Deferred(),T=this,O=this.length,q=function(){--w||_.resolveWith(T,[T])};for("string"!=typeof d&&(m=d,d=void 0),d=d||"fx";O--;)(y=ee.get(T[O],d+"queueHooks"))&&y.empty&&(w++,y.empty.add(q));return q(),_.promise(m)}});var to=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xn=new RegExp("^(?:([+-])=|)("+to+")([a-z%]*)$","i"),Zn=["Top","Right","Bottom","Left"],xo=te.documentElement,an=function(d){return x.contains(d.ownerDocument,d)},su={composed:!0};xo.getRootNode&&(an=function(d){return x.contains(d.ownerDocument,d)||d.getRootNode(su)===d.ownerDocument});var we=function(d,m){return"none"===(d=m||d).style.display||""===d.style.display&&an(d)&&"none"===x.css(d,"display")};function ds(d,m,y,w){var _,T,O=20,q=w?function(){return w.cur()}:function(){return x.css(d,m,"")},H=q(),K=y&&y[3]||(x.cssNumber[m]?"":"px"),et=d.nodeType&&(x.cssNumber[m]||"px"!==K&&+H)&&xn.exec(x.css(d,m));if(et&&et[3]!==K){for(K=K||et[3],et=+(H/=2)||1;O--;)x.style(d,m,et+K),(1-T)*(1-(T=q()/H||.5))<=0&&(O=0),et/=T;x.style(d,m,(et*=2)+K),y=y||[]}return y&&(et=+et||+H||0,_=y[1]?et+(y[1]+1)*y[2]:+y[2],w&&(w.unit=K,w.start=et,w.end=_)),_}var Jl={};function wo(d,m){for(var y,w,_,T,O,q,H,K=[],et=0,ot=d.length;et<ot;et++)(w=d[et]).style&&(y=w.style.display,m?("none"===y&&(K[et]=ee.get(w,"display")||null,K[et]||(w.style.display="")),""===w.style.display&&we(w)&&(K[et]=(H=O=T=void 0,O=(_=w).ownerDocument,(H=Jl[q=_.nodeName])||(T=O.body.appendChild(O.createElement(q)),H=x.css(T,"display"),T.parentNode.removeChild(T),"none"===H&&(H="block"),Jl[q]=H)))):"none"!==y&&(K[et]="none",ee.set(w,"display",y)));for(et=0;et<ot;et++)null!=K[et]&&(d[et].style.display=K[et]);return d}x.fn.extend({show:function(){return wo(this,!0)},hide:function(){return wo(this)},toggle:function(d){return"boolean"==typeof d?d?this.show():this.hide():this.each(function(){we(this)?x(this).show():x(this).hide()})}});var So,Eo,ko=/^(?:checkbox|radio)$/i,Pa=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Re=/^$|^module$|\/(?:java|ecma)script/i;So=te.createDocumentFragment().appendChild(te.createElement("div")),(Eo=te.createElement("input")).setAttribute("type","radio"),Eo.setAttribute("checked","checked"),Eo.setAttribute("name","t"),So.appendChild(Eo),Xt.checkClone=So.cloneNode(!0).cloneNode(!0).lastChild.checked,So.innerHTML="<textarea>x</textarea>",Xt.noCloneChecked=!!So.cloneNode(!0).lastChild.defaultValue,So.innerHTML="<option></option>",Xt.option=!!So.lastChild;var jt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function un(d,m){var y;return y=typeof d.getElementsByTagName<"u"?d.getElementsByTagName(m||"*"):typeof d.querySelectorAll<"u"?d.querySelectorAll(m||"*"):[],void 0===m||m&&St(d,m)?x.merge([d],y):y}function La(d,m){for(var y=0,w=d.length;y<w;y++)ee.set(d[y],"globalEval",!m||ee.get(m[y],"globalEval"))}jt.tbody=jt.tfoot=jt.colgroup=jt.caption=jt.thead,jt.th=jt.td,Xt.option||(jt.optgroup=jt.option=[1,"<select multiple='multiple'>","</select>"]);var tc=/<|&#?\w+;/;function Ma(d,m,y,w,_){for(var T,O,q,H,K,et,ot=m.createDocumentFragment(),J=[],ut=0,Dt=d.length;ut<Dt;ut++)if((T=d[ut])||0===T)if("object"===Se(T))x.merge(J,T.nodeType?[T]:T);else if(tc.test(T)){for(O=O||ot.appendChild(m.createElement("div")),q=(Pa.exec(T)||["",""])[1].toLowerCase(),O.innerHTML=(H=jt[q]||jt._default)[1]+x.htmlPrefilter(T)+H[2],et=H[0];et--;)O=O.lastChild;x.merge(J,O.childNodes),(O=ot.firstChild).textContent=""}else J.push(m.createTextNode(T));for(ot.textContent="",ut=0;T=J[ut++];)if(w&&-1<x.inArray(T,w))_&&_.push(T);else if(K=an(T),O=un(ot.appendChild(T),"script"),K&&La(O),y)for(et=0;T=O[et++];)Re.test(T.type||"")&&y.push(T);return ot}var qs=/^([^.]*)(?:\.(.+)|)/;function _o(){return!0}function Hr(){return!1}function us(d,m,y,w,_,T){var O,q;if("object"==typeof m){for(q in"string"!=typeof y&&(w=w||y,y=void 0),m)us(d,q,y,w,m[q],T);return d}if(null==w&&null==_?(_=y,w=y=void 0):null==_&&("string"==typeof y?(_=w,w=void 0):(_=w,w=y,y=void 0)),!1===_)_=Hr;else if(!_)return d;return 1===T&&(O=_,(_=function(H){return x().off(H),O.apply(this,arguments)}).guid=O.guid||(O.guid=x.guid++)),d.each(function(){x.event.add(this,m,_,w,y)})}function $s(d,m,y){y?(ee.set(d,m,!1),x.event.add(d,m,{namespace:!1,handler:function(w){var _,T=ee.get(this,m);if(1&w.isTrigger&&this[m]){if(T)(x.event.special[m]||{}).delegateType&&w.stopPropagation();else if(T=ie.call(arguments),ee.set(this,m,T),this[m](),_=ee.get(this,m),ee.set(this,m,!1),T!==_)return w.stopImmediatePropagation(),w.preventDefault(),_}else T&&(ee.set(this,m,x.event.trigger(T[0],T.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=_o)}})):void 0===ee.get(d,m)&&x.event.add(d,m,_o)}x.event={global:{},add:function(d,m,y,w,_){var T,O,q,H,K,et,ot,J,ut,Dt,le,D=ee.get(d);if(fr(d))for(y.handler&&(y=(T=y).handler,_=T.selector),_&&x.find.matchesSelector(xo,_),y.guid||(y.guid=x.guid++),(H=D.events)||(H=D.events=Object.create(null)),(O=D.handle)||(O=D.handle=function(en){return typeof x<"u"&&x.event.triggered!==en.type?x.event.dispatch.apply(d,arguments):void 0}),K=(m=(m||"").match(re)||[""]).length;K--;)ut=le=(q=qs.exec(m[K])||[])[1],Dt=(q[2]||"").split(".").sort(),ut&&(ot=x.event.special[ut]||{},ot=x.event.special[ut=(_?ot.delegateType:ot.bindType)||ut]||{},et=x.extend({type:ut,origType:le,data:w,handler:y,guid:y.guid,selector:_,needsContext:_&&x.expr.match.needsContext.test(_),namespace:Dt.join(".")},T),(J=H[ut])||((J=H[ut]=[]).delegateCount=0,ot.setup&&!1!==ot.setup.call(d,w,Dt,O)||d.addEventListener&&d.addEventListener(ut,O)),ot.add&&(ot.add.call(d,et),et.handler.guid||(et.handler.guid=y.guid)),_?J.splice(J.delegateCount++,0,et):J.push(et),x.event.global[ut]=!0)},remove:function(d,m,y,w,_){var T,O,q,H,K,et,ot,J,ut,Dt,le,D=ee.hasData(d)&&ee.get(d);if(D&&(H=D.events)){for(K=(m=(m||"").match(re)||[""]).length;K--;)if(ut=le=(q=qs.exec(m[K])||[])[1],Dt=(q[2]||"").split(".").sort(),ut){for(ot=x.event.special[ut]||{},J=H[ut=(w?ot.delegateType:ot.bindType)||ut]||[],q=q[2]&&new RegExp("(^|\\.)"+Dt.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=T=J.length;T--;)et=J[T],!_&&le!==et.origType||y&&y.guid!==et.guid||q&&!q.test(et.namespace)||w&&w!==et.selector&&("**"!==w||!et.selector)||(J.splice(T,1),et.selector&&J.delegateCount--,ot.remove&&ot.remove.call(d,et));O&&!J.length&&(ot.teardown&&!1!==ot.teardown.call(d,Dt,D.handle)||x.removeEvent(d,ut,D.handle),delete H[ut])}else for(ut in H)x.event.remove(d,ut+m[K],y,w,!0);x.isEmptyObject(H)&&ee.remove(d,"handle events")}},dispatch:function(d){var m,y,w,_,T,O,q=new Array(arguments.length),H=x.event.fix(d),K=(ee.get(this,"events")||Object.create(null))[H.type]||[],et=x.event.special[H.type]||{};for(q[0]=H,m=1;m<arguments.length;m++)q[m]=arguments[m];if(H.delegateTarget=this,!et.preDispatch||!1!==et.preDispatch.call(this,H)){for(O=x.event.handlers.call(this,H,K),m=0;(_=O[m++])&&!H.isPropagationStopped();)for(H.currentTarget=_.elem,y=0;(T=_.handlers[y++])&&!H.isImmediatePropagationStopped();)H.rnamespace&&!1!==T.namespace&&!H.rnamespace.test(T.namespace)||(H.handleObj=T,H.data=T.data,void 0!==(w=((x.event.special[T.origType]||{}).handle||T.handler).apply(_.elem,q))&&!1===(H.result=w)&&(H.preventDefault(),H.stopPropagation()));return et.postDispatch&&et.postDispatch.call(this,H),H.result}},handlers:function(d,m){var y,w,_,T,O,q=[],H=m.delegateCount,K=d.target;if(H&&K.nodeType&&!("click"===d.type&&1<=d.button))for(;K!==this;K=K.parentNode||this)if(1===K.nodeType&&("click"!==d.type||!0!==K.disabled)){for(T=[],O={},y=0;y<H;y++)void 0===O[_=(w=m[y]).selector+" "]&&(O[_]=w.needsContext?-1<x(_,this).index(K):x.find(_,this,null,[K]).length),O[_]&&T.push(w);T.length&&q.push({elem:K,handlers:T})}return K=this,H<m.length&&q.push({elem:K,handlers:m.slice(H)}),q},addProp:function(d,m){Object.defineProperty(x.Event.prototype,d,{enumerable:!0,configurable:!0,get:Mt(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(y){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(d){return d[x.expando]?d:new x.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var m=this||d;return ko.test(m.type)&&m.click&&St(m,"input")&&$s(m,"click",!0),!1},trigger:function(d){var m=this||d;return ko.test(m.type)&&m.click&&St(m,"input")&&$s(m,"click"),!0},_default:function(d){var m=d.target;return ko.test(m.type)&&m.click&&St(m,"input")&&ee.get(m,"click")||St(m,"a")}},beforeunload:{postDispatch:function(d){void 0!==d.result&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}},x.removeEvent=function(d,m,y){d.removeEventListener&&d.removeEventListener(m,y)},x.Event=function(d,m){if(!(this instanceof x.Event))return new x.Event(d,m);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||void 0===d.defaultPrevented&&!1===d.returnValue?_o:Hr,this.target=d.target&&3===d.target.nodeType?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,m&&x.extend(this,m),this.timeStamp=d&&d.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Hr,isPropagationStopped:Hr,isImmediatePropagationStopped:Hr,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=_o,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=_o,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=_o,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(d,m){function y(w){if(te.documentMode){var _=ee.get(this,"handle"),T=x.event.fix(w);T.type="focusin"===w.type?"focus":"blur",T.isSimulated=!0,_(w),T.target===T.currentTarget&&_(T)}else x.event.simulate(m,w.target,x.event.fix(w))}x.event.special[d]={setup:function(){var w;if($s(this,d,!0),!te.documentMode)return!1;(w=ee.get(this,m))||this.addEventListener(m,y),ee.set(this,m,(w||0)+1)},trigger:function(){return $s(this,d),!0},teardown:function(){var w;if(!te.documentMode)return!1;(w=ee.get(this,m)-1)?ee.set(this,m,w):(this.removeEventListener(m,y),ee.remove(this,m))},_default:function(w){return ee.get(w.target,d)},delegateType:m},x.event.special[m]={setup:function(){var w=this.ownerDocument||this.document||this,_=te.documentMode?this:w,T=ee.get(_,m);T||(te.documentMode?this.addEventListener(m,y):w.addEventListener(d,y,!0)),ee.set(_,m,(T||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,_=te.documentMode?this:w,T=ee.get(_,m)-1;T?ee.set(_,m,T):(te.documentMode?this.removeEventListener(m,y):w.removeEventListener(d,y,!0),ee.remove(_,m))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,m){x.event.special[d]={delegateType:m,bindType:m,handle:function(y){var w,_=y.relatedTarget,T=y.handleObj;return _&&(_===this||x.contains(this,_))||(y.type=T.origType,w=T.handler.apply(this,arguments),y.type=m),w}}}),x.fn.extend({on:function(d,m,y,w){return us(this,d,m,y,w)},one:function(d,m,y,w){return us(this,d,m,y,w,1)},off:function(d,m,y){var w,_;if(d&&d.preventDefault&&d.handleObj)return w=d.handleObj,x(d.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof d){for(_ in d)this.off(_,m,d[_]);return this}return!1!==m&&"function"!=typeof m||(y=m,m=void 0),!1===y&&(y=Hr),this.each(function(){x.event.remove(this,d,y,m)})}});var Vo=/<script|<style|<link/i,qr=/checked\s*(?:[^=]|=\s*.checked.)/i,ec=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ia(d,m){return St(d,"table")&&St(11!==m.nodeType?m:m.firstChild,"tr")&&x(d).children("tbody")[0]||d}function Ws(d){return d.type=(null!==d.getAttribute("type"))+"/"+d.type,d}function nc(d){return"true/"===(d.type||"").slice(0,5)?d.type=d.type.slice(5):d.removeAttribute("type"),d}function ki(d,m){var y,w,_,T,O,q;if(1===m.nodeType){if(ee.hasData(d)&&(q=ee.get(d).events))for(_ in ee.remove(m,"handle events"),q)for(y=0,w=q[_].length;y<w;y++)x.event.add(m,_,q[_][y]);On.hasData(d)&&(T=On.access(d),O=x.extend({},T),On.set(m,O))}}function Ko(d,m,y,w){m=Xe(m);var _,T,O,q,H,K,et=0,ot=d.length,J=ot-1,ut=m[0],Dt=Mt(ut);if(Dt||1<ot&&"string"==typeof ut&&!Xt.checkClone&&qr.test(ut))return d.each(function(le){var D=d.eq(le);Dt&&(m[0]=ut.call(this,le,D.html())),Ko(D,m,y,w)});if(ot&&(T=(_=Ma(m,d[0].ownerDocument,!1,d,w)).firstChild,1===_.childNodes.length&&(_=T),T||w)){for(q=(O=x.map(un(_,"script"),Ws)).length;et<ot;et++)H=_,et!==J&&(H=x.clone(H,!0,!0),q&&x.merge(O,un(H,"script"))),y.call(d[et],H,et);if(q)for(K=O[O.length-1].ownerDocument,x.map(O,nc),et=0;et<q;et++)Re.test((H=O[et]).type||"")&&!ee.access(H,"globalEval")&&x.contains(K,H)&&(H.src&&"module"!==(H.type||"").toLowerCase()?x._evalUrl&&!H.noModule&&x._evalUrl(H.src,{nonce:H.nonce||H.getAttribute("nonce")},K):Ie(H.textContent.replace(ec,""),H,K))}return d}function fn(d,m,y){for(var w,_=m?x.filter(m,d):d,T=0;null!=(w=_[T]);T++)y||1!==w.nodeType||x.cleanData(un(w)),w.parentNode&&(y&&an(w)&&La(un(w,"script")),w.parentNode.removeChild(w));return d}x.extend({htmlPrefilter:function(d){return d},clone:function(d,m,y){var w,_,T,O,q,H,K,et=d.cloneNode(!0),ot=an(d);if(!(Xt.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||x.isXMLDoc(d)))for(O=un(et),w=0,_=(T=un(d)).length;w<_;w++)q=T[w],"input"===(K=(H=O[w]).nodeName.toLowerCase())&&ko.test(q.type)?H.checked=q.checked:"input"!==K&&"textarea"!==K||(H.defaultValue=q.defaultValue);if(m)if(y)for(T=T||un(d),O=O||un(et),w=0,_=T.length;w<_;w++)ki(T[w],O[w]);else ki(d,et);return 0<(O=un(et,"script")).length&&La(O,!ot&&un(d,"script")),et},cleanData:function(d){for(var m,y,w,_=x.event.special,T=0;void 0!==(y=d[T]);T++)if(fr(y)){if(m=y[ee.expando]){if(m.events)for(w in m.events)_[w]?x.event.remove(y,w):x.removeEvent(y,w,m.handle);y[ee.expando]=void 0}y[On.expando]&&(y[On.expando]=void 0)}}}),x.fn.extend({detach:function(d){return fn(this,d,!0)},remove:function(d){return fn(this,d)},text:function(d){return Ur(this,function(m){return void 0===m?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=m)})},null,d,arguments.length)},append:function(){return Ko(this,arguments,function(d){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ia(this,d).appendChild(d)})},prepend:function(){return Ko(this,arguments,function(d){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var m=Ia(this,d);m.insertBefore(d,m.firstChild)}})},before:function(){return Ko(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return Ko(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,m=0;null!=(d=this[m]);m++)1===d.nodeType&&(x.cleanData(un(d,!1)),d.textContent="");return this},clone:function(d,m){return d=null!=d&&d,m=m??d,this.map(function(){return x.clone(this,d,m)})},html:function(d){return Ur(this,function(m){var y=this[0]||{},w=0,_=this.length;if(void 0===m&&1===y.nodeType)return y.innerHTML;if("string"==typeof m&&!Vo.test(m)&&!jt[(Pa.exec(m)||["",""])[1].toLowerCase()]){m=x.htmlPrefilter(m);try{for(;w<_;w++)1===(y=this[w]||{}).nodeType&&(x.cleanData(un(y,!1)),y.innerHTML=m);y=0}catch{}}y&&this.empty().append(m)},null,d,arguments.length)},replaceWith:function(){var d=[];return Ko(this,arguments,function(m){var y=this.parentNode;x.inArray(this,d)<0&&(x.cleanData(un(this)),y&&y.replaceChild(m,this))},d)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,m){x.fn[d]=function(y){for(var w,_=[],T=x(y),O=T.length-1,q=0;q<=O;q++)w=q===O?this:this.clone(!0),x(T[q])[m](w),Nn.apply(_,w.get());return this.pushStack(_)}});var Ve=new RegExp("^("+to+")(?!px)[a-z%]+$","i"),Vs=/^--/,fs=function(d){var m=d.ownerDocument.defaultView;return m&&m.opener||(m=bt),m.getComputedStyle(d)},Xo=function(d,m,y){var w,_,T={};for(_ in m)T[_]=d.style[_],d.style[_]=m[_];for(_ in w=y.call(d),m)d.style[_]=T[_];return w},au=new RegExp(Zn.join("|"),"i");function ms(d,m,y){var w,_,T,O,q=Vs.test(m),H=d.style;return(y=y||fs(d))&&(O=y.getPropertyValue(m)||y[m],q&&O&&(O=O.replace(Zr,"$1")||void 0),""!==O||an(d)||(O=x.style(d,m)),!Xt.pixelBoxStyles()&&Ve.test(O)&&au.test(m)&&(w=H.width,_=H.minWidth,T=H.maxWidth,H.minWidth=H.maxWidth=H.width=O,O=y.width,H.width=w,H.minWidth=_,H.maxWidth=T)),void 0!==O?O+"":O}function Sr(d,m){return{get:function(){if(!d())return(this.get=m).apply(this,arguments);delete this.get}}}!function(){function d(){if(K){H.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",xo.appendChild(H).appendChild(K);var et=bt.getComputedStyle(K);y="1%"!==et.top,q=12===m(et.marginLeft),K.style.right="60%",T=36===m(et.right),w=36===m(et.width),K.style.position="absolute",_=12===m(K.offsetWidth/3),xo.removeChild(H),K=null}}function m(et){return Math.round(parseFloat(et))}var y,w,_,T,O,q,H=te.createElement("div"),K=te.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",Xt.clearCloneStyle="content-box"===K.style.backgroundClip,x.extend(Xt,{boxSizingReliable:function(){return d(),w},pixelBoxStyles:function(){return d(),T},pixelPosition:function(){return d(),y},reliableMarginLeft:function(){return d(),q},scrollboxSize:function(){return d(),_},reliableTrDimensions:function(){var et,ot,J,ut;return null==O&&(et=te.createElement("table"),ot=te.createElement("tr"),J=te.createElement("div"),et.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ot.style.cssText="box-sizing:content-box;border:1px solid",ot.style.height="1px",J.style.height="9px",J.style.display="block",xo.appendChild(et).appendChild(ot).appendChild(J),ut=bt.getComputedStyle(ot),O=parseInt(ut.height,10)+parseInt(ut.borderTopWidth,10)+parseInt(ut.borderBottomWidth,10)===ot.offsetHeight,xo.removeChild(et)),O}}))}();var ps=["Webkit","Moz","ms"],Ks=te.createElement("div").style,Fa={};function Er(d){return x.cssProps[d]||Fa[d]||(d in Ks?d:Fa[d]=function(y){for(var w=y[0].toUpperCase()+y.slice(1),_=ps.length;_--;)if((y=ps[_]+w)in Ks)return y}(d)||d)}var iu=/^(none|table(?!-c[ea]).+)/,lu={position:"absolute",visibility:"hidden",display:"block"},_i={letterSpacing:"0",fontWeight:"400"};function Ni(d,m,y){var w=xn.exec(m);return w?Math.max(0,w[2]-(y||0))+(w[3]||"px"):m}function ja(d,m,y,w,_,T){var O="width"===m?1:0,q=0,H=0,K=0;if(y===(w?"border":"content"))return 0;for(;O<4;O+=2)"margin"===y&&(K+=x.css(d,y+Zn[O],!0,_)),w?("content"===y&&(H-=x.css(d,"padding"+Zn[O],!0,_)),"margin"!==y&&(H-=x.css(d,"border"+Zn[O]+"Width",!0,_))):(H+=x.css(d,"padding"+Zn[O],!0,_),"padding"!==y?H+=x.css(d,"border"+Zn[O]+"Width",!0,_):q+=x.css(d,"border"+Zn[O]+"Width",!0,_));return!w&&0<=T&&(H+=Math.max(0,Math.ceil(d["offset"+m[0].toUpperCase()+m.slice(1)]-T-H-q-.5))||0),H+K}function Ai(d,m,y){var w=fs(d),_=(!Xt.boxSizingReliable()||y)&&"border-box"===x.css(d,"boxSizing",!1,w),T=_,O=ms(d,m,w),q="offset"+m[0].toUpperCase()+m.slice(1);if(Ve.test(O)){if(!y)return O;O="auto"}return(!Xt.boxSizingReliable()&&_||!Xt.reliableTrDimensions()&&St(d,"tr")||"auto"===O||!parseFloat(O)&&"inline"===x.css(d,"display",!1,w))&&d.getClientRects().length&&(_="border-box"===x.css(d,"boxSizing",!1,w),(T=q in d)&&(O=d[q])),(O=parseFloat(O)||0)+ja(d,m,y||(_?"border":"content"),T,w,O)+"px"}function mr(d,m,y,w,_){return new mr.prototype.init(d,m,y,w,_)}x.extend({cssHooks:{opacity:{get:function(d,m){if(m){var y=ms(d,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,m,y,w){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var _,T,O,q=Qe(m),H=Vs.test(m),K=d.style;if(H||(m=Er(q)),O=x.cssHooks[m]||x.cssHooks[q],void 0===y)return O&&"get"in O&&void 0!==(_=O.get(d,!1,w))?_:K[m];"string"==(T=typeof y)&&(_=xn.exec(y))&&_[1]&&(y=ds(d,m,_),T="number"),null!=y&&y==y&&("number"!==T||H||(y+=_&&_[3]||(x.cssNumber[q]?"":"px")),Xt.clearCloneStyle||""!==y||0!==m.indexOf("background")||(K[m]="inherit"),O&&"set"in O&&void 0===(y=O.set(d,y,w))||(H?K.setProperty(m,y):K[m]=y))}},css:function(d,m,y,w){var _,T,O,q=Qe(m);return Vs.test(m)||(m=Er(q)),(O=x.cssHooks[m]||x.cssHooks[q])&&"get"in O&&(_=O.get(d,!0,y)),void 0===_&&(_=ms(d,m,w)),"normal"===_&&m in _i&&(_=_i[m]),""===y||y?(T=parseFloat(_),!0===y||isFinite(T)?T||0:_):_}}),x.each(["height","width"],function(d,m){x.cssHooks[m]={get:function(y,w,_){if(w)return!iu.test(x.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?Ai(y,m,_):Xo(y,lu,function(){return Ai(y,m,_)})},set:function(y,w,_){var T,O=fs(y),q=!Xt.scrollboxSize()&&"absolute"===O.position,H=(q||_)&&"border-box"===x.css(y,"boxSizing",!1,O),K=_?ja(y,m,_,H,O):0;return H&&q&&(K-=Math.ceil(y["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(O[m])-ja(y,m,"border",!1,O)-.5)),K&&(T=xn.exec(w))&&"px"!==(T[3]||"px")&&(y.style[m]=w,w=x.css(y,m)),Ni(0,w,K)}}}),x.cssHooks.marginLeft=Sr(Xt.reliableMarginLeft,function(d,m){if(m)return(parseFloat(ms(d,"marginLeft"))||d.getBoundingClientRect().left-Xo(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(d,m){x.cssHooks[d+m]={expand:function(y){for(var w=0,_={},T="string"==typeof y?y.split(" "):[y];w<4;w++)_[d+Zn[w]+m]=T[w]||T[w-2]||T[0];return _}},"margin"!==d&&(x.cssHooks[d+m].set=Ni)}),x.fn.extend({css:function(d,m){return Ur(this,function(y,w,_){var T,O,q={},H=0;if(Array.isArray(w)){for(T=fs(y),O=w.length;H<O;H++)q[w[H]]=x.css(y,w[H],!1,T);return q}return void 0!==_?x.style(y,w,_):x.css(y,w)},d,m,1<arguments.length)}}),((x.Tween=mr).prototype={constructor:mr,init:function(d,m,y,w,_,T){this.elem=d,this.prop=y,this.easing=_||x.easing._default,this.options=m,this.start=this.now=this.cur(),this.end=w,this.unit=T||(x.cssNumber[y]?"":"px")},cur:function(){var d=mr.propHooks[this.prop];return d&&d.get?d.get(this):mr.propHooks._default.get(this)},run:function(d){var m,y=mr.propHooks[this.prop];return this.pos=m=this.options.duration?x.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):d,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):mr.propHooks._default.set(this),this}}).init.prototype=mr.prototype,(mr.propHooks={_default:{get:function(d){var m;return 1!==d.elem.nodeType||null!=d.elem[d.prop]&&null==d.elem.style[d.prop]?d.elem[d.prop]:(m=x.css(d.elem,d.prop,""))&&"auto"!==m?m:0},set:function(d){x.fx.step[d.prop]?x.fx.step[d.prop](d):1!==d.elem.nodeType||!x.cssHooks[d.prop]&&null==d.elem.style[Er(d.prop)]?d.elem[d.prop]=d.now:x.style(d.elem,d.prop,d.now+d.unit)}}}).scrollTop=mr.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},x.easing={linear:function(d){return d},swing:function(d){return.5-Math.cos(d*Math.PI)/2},_default:"swing"},x.fx=mr.prototype.init,x.fx.step={};var Yo,Xs,gs,rc,oc=/^(?:toggle|show|hide)$/,sc=/queueHooks$/;function za(){Xs&&(!1===te.hidden&&bt.requestAnimationFrame?bt.requestAnimationFrame(za):bt.setTimeout(za,x.fx.interval),x.fx.tick())}function Ti(){return bt.setTimeout(function(){Yo=void 0}),Yo=Date.now()}function Ys(d,m){var y,w=0,_={height:d};for(m=m?1:0;w<4;w+=2-m)_["margin"+(y=Zn[w])]=_["padding"+y]=d;return m&&(_.opacity=_.width=d),_}function Ri(d,m,y){for(var w,_=(pr.tweeners[m]||[]).concat(pr.tweeners["*"]),T=0,O=_.length;T<O;T++)if(w=_[T].call(y,m,d))return w}function pr(d,m,y){var w,_,T=0,O=pr.prefilters.length,q=x.Deferred().always(function(){delete H.elem}),H=function(){if(_)return!1;for(var ot=Yo||Ti(),J=Math.max(0,K.startTime+K.duration-ot),ut=1-(J/K.duration||0),Dt=0,le=K.tweens.length;Dt<le;Dt++)K.tweens[Dt].run(ut);return q.notifyWith(d,[K,ut,J]),ut<1&&le?J:(le||q.notifyWith(d,[K,1,0]),q.resolveWith(d,[K]),!1)},K=q.promise({elem:d,props:x.extend({},m),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},y),originalProperties:m,originalOptions:y,startTime:Yo||Ti(),duration:y.duration,tweens:[],createTween:function(ot,J){var ut=x.Tween(d,K.opts,ot,J,K.opts.specialEasing[ot]||K.opts.easing);return K.tweens.push(ut),ut},stop:function(ot){var J=0,ut=ot?K.tweens.length:0;if(_)return this;for(_=!0;J<ut;J++)K.tweens[J].run(1);return ot?(q.notifyWith(d,[K,1,0]),q.resolveWith(d,[K,ot])):q.rejectWith(d,[K,ot]),this}}),et=K.props;for(function(ot,J){var ut,Dt,le,D,en;for(ut in ot)if(le=J[Dt=Qe(ut)],D=ot[ut],Array.isArray(D)&&(le=D[1],D=ot[ut]=D[0]),ut!==Dt&&(ot[Dt]=D,delete ot[ut]),(en=x.cssHooks[Dt])&&"expand"in en)for(ut in D=en.expand(D),delete ot[Dt],D)ut in ot||(ot[ut]=D[ut],J[ut]=le);else J[Dt]=le}(et,K.opts.specialEasing);T<O;T++)if(w=pr.prefilters[T].call(K,d,et,K.opts))return Mt(w.stop)&&(x._queueHooks(K.elem,K.opts.queue).stop=w.stop.bind(w)),w;return x.map(et,Ri,K),Mt(K.opts.start)&&K.opts.start.call(d,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),x.fx.timer(x.extend(H,{elem:d,anim:K,queue:K.opts.queue})),K}x.Animation=x.extend(pr,{tweeners:{"*":[function(d,m){var y=this.createTween(d,m);return ds(y.elem,d,xn.exec(m),y),y}]},tweener:function(d,m){Mt(d)?(m=d,d=["*"]):d=d.match(re);for(var y,w=0,_=d.length;w<_;w++)(pr.tweeners[y=d[w]]=pr.tweeners[y]||[]).unshift(m)},prefilters:[function(d,m,y){var w,_,T,O,q,H,K,et,ot="width"in m||"height"in m,J=this,ut={},Dt=d.style,le=d.nodeType&&we(d),D=ee.get(d,"fxshow");for(w in y.queue||(null==(O=x._queueHooks(d,"fx")).unqueued&&(O.unqueued=0,q=O.empty.fire,O.empty.fire=function(){O.unqueued||q()}),O.unqueued++,J.always(function(){J.always(function(){O.unqueued--,x.queue(d,"fx").length||O.empty.fire()})})),m)if(oc.test(_=m[w])){if(delete m[w],T=T||"toggle"===_,_===(le?"hide":"show")){if("show"!==_||!D||void 0===D[w])continue;le=!0}ut[w]=D&&D[w]||x.style(d,w)}if((H=!x.isEmptyObject(m))||!x.isEmptyObject(ut))for(w in ot&&1===d.nodeType&&(y.overflow=[Dt.overflow,Dt.overflowX,Dt.overflowY],null==(K=D&&D.display)&&(K=ee.get(d,"display")),"none"===(et=x.css(d,"display"))&&(K?et=K:(wo([d],!0),K=d.style.display||K,et=x.css(d,"display"),wo([d]))),("inline"===et||"inline-block"===et&&null!=K)&&"none"===x.css(d,"float")&&(H||(J.done(function(){Dt.display=K}),null==K&&(K="none"===(et=Dt.display)?"":et)),Dt.display="inline-block")),y.overflow&&(Dt.overflow="hidden",J.always(function(){Dt.overflow=y.overflow[0],Dt.overflowX=y.overflow[1],Dt.overflowY=y.overflow[2]})),H=!1,ut)H||(D?"hidden"in D&&(le=D.hidden):D=ee.access(d,"fxshow",{display:K}),T&&(D.hidden=!le),le&&wo([d],!0),J.done(function(){for(w in le||wo([d]),ee.remove(d,"fxshow"),ut)x.style(d,w,ut[w])})),H=Ri(le?D[w]:0,w,J),w in D||(D[w]=H.start,le&&(H.end=H.start,H.start=0))}],prefilter:function(d,m){m?pr.prefilters.unshift(d):pr.prefilters.push(d)}}),x.speed=function(d,m,y){var w=d&&"object"==typeof d?x.extend({},d):{complete:y||!y&&m||Mt(d)&&d,duration:d,easing:y&&m||m&&!Mt(m)&&m};return x.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in x.fx.speeds?x.fx.speeds[w.duration]:x.fx.speeds._default),null!=w.queue&&!0!==w.queue||(w.queue="fx"),w.old=w.complete,w.complete=function(){Mt(w.old)&&w.old.call(this),w.queue&&x.dequeue(this,w.queue)},w},x.fn.extend({fadeTo:function(d,m,y,w){return this.filter(we).css("opacity",0).show().end().animate({opacity:m},d,y,w)},animate:function(d,m,y,w){var _=x.isEmptyObject(d),T=x.speed(m,y,w),O=function(){var q=pr(this,x.extend({},d),T);(_||ee.get(this,"finish"))&&q.stop(!0)};return O.finish=O,_||!1===T.queue?this.each(O):this.queue(T.queue,O)},stop:function(d,m,y){var w=function(_){var T=_.stop;delete _.stop,T(y)};return"string"!=typeof d&&(y=m,m=d,d=void 0),m&&this.queue(d||"fx",[]),this.each(function(){var _=!0,T=null!=d&&d+"queueHooks",O=x.timers,q=ee.get(this);if(T)q[T]&&q[T].stop&&w(q[T]);else for(T in q)q[T]&&q[T].stop&&sc.test(T)&&w(q[T]);for(T=O.length;T--;)O[T].elem!==this||null!=d&&O[T].queue!==d||(O[T].anim.stop(y),_=!1,O.splice(T,1));!_&&y||x.dequeue(this,d)})},finish:function(d){return!1!==d&&(d=d||"fx"),this.each(function(){var m,y=ee.get(this),w=y[d+"queue"],_=y[d+"queueHooks"],T=x.timers,O=w?w.length:0;for(y.finish=!0,x.queue(this,d,[]),_&&_.stop&&_.stop.call(this,!0),m=T.length;m--;)T[m].elem===this&&T[m].queue===d&&(T[m].anim.stop(!0),T.splice(m,1));for(m=0;m<O;m++)w[m]&&w[m].finish&&w[m].finish.call(this);delete y.finish})}}),x.each(["toggle","show","hide"],function(d,m){var y=x.fn[m];x.fn[m]=function(w,_,T){return null==w||"boolean"==typeof w?y.apply(this,arguments):this.animate(Ys(m,!0),w,_,T)}}),x.each({slideDown:Ys("show"),slideUp:Ys("hide"),slideToggle:Ys("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,m){x.fn[d]=function(y,w,_){return this.animate(m,y,w,_)}}),x.timers=[],x.fx.tick=function(){var d,m=0,y=x.timers;for(Yo=Date.now();m<y.length;m++)(d=y[m])()||y[m]!==d||y.splice(m--,1);y.length||x.fx.stop(),Yo=void 0},x.fx.timer=function(d){x.timers.push(d),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Xs||(Xs=!0,za())},x.fx.stop=function(){Xs=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(d,m){return d=x.fx&&x.fx.speeds[d]||d,this.queue(m=m||"fx",function(y,w){var _=bt.setTimeout(y,d);w.stop=function(){bt.clearTimeout(_)}})},gs=te.createElement("input"),rc=te.createElement("select").appendChild(te.createElement("option")),gs.type="checkbox",Xt.checkOn=""!==gs.value,Xt.optSelected=rc.selected,(gs=te.createElement("input")).value="t",gs.type="radio",Xt.radioValue="t"===gs.value;var Oi,Gs=x.expr.attrHandle;x.fn.extend({attr:function(d,m){return Ur(this,x.attr,d,m,1<arguments.length)},removeAttr:function(d){return this.each(function(){x.removeAttr(this,d)})}}),x.extend({attr:function(d,m,y){var w,_,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return typeof d.getAttribute>"u"?x.prop(d,m,y):(1===T&&x.isXMLDoc(d)||(_=x.attrHooks[m.toLowerCase()]||(x.expr.match.bool.test(m)?Oi:void 0)),void 0!==y?null===y?void x.removeAttr(d,m):_&&"set"in _&&void 0!==(w=_.set(d,y,m))?w:(d.setAttribute(m,y+""),y):_&&"get"in _&&null!==(w=_.get(d,m))?w:null==(w=x.find.attr(d,m))?void 0:w)},attrHooks:{type:{set:function(d,m){if(!Xt.radioValue&&"radio"===m&&St(d,"input")){var y=d.value;return d.setAttribute("type",m),y&&(d.value=y),m}}}},removeAttr:function(d,m){var y,w=0,_=m&&m.match(re);if(_&&1===d.nodeType)for(;y=_[w++];)d.removeAttribute(y)}}),Oi={set:function(d,m,y){return!1===m?x.removeAttr(d,y):d.setAttribute(y,y),y}},x.each(x.expr.match.bool.source.match(/\w+/g),function(d,m){var y=Gs[m]||x.find.attr;Gs[m]=function(w,_,T){var O,q,H=_.toLowerCase();return T||(q=Gs[H],Gs[H]=O,O=null!=y(w,_,T)?H:null,Gs[H]=q),O}});var cu=/^(?:input|select|textarea|button)$/i,du=/^(?:a|area)$/i;function Go(d){return(d.match(re)||[]).join(" ")}function Dn(d){return d.getAttribute&&d.getAttribute("class")||""}function Di(d){return Array.isArray(d)?d:"string"==typeof d&&d.match(re)||[]}x.fn.extend({prop:function(d,m){return Ur(this,x.prop,d,m,1<arguments.length)},removeProp:function(d){return this.each(function(){delete this[x.propFix[d]||d]})}}),x.extend({prop:function(d,m,y){var w,_,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return 1===T&&x.isXMLDoc(d)||(_=x.propHooks[m=x.propFix[m]||m]),void 0!==y?_&&"set"in _&&void 0!==(w=_.set(d,y,m))?w:d[m]=y:_&&"get"in _&&null!==(w=_.get(d,m))?w:d[m]},propHooks:{tabIndex:{get:function(d){var m=x.find.attr(d,"tabindex");return m?parseInt(m,10):cu.test(d.nodeName)||du.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Xt.optSelected||(x.propHooks.selected={get:function(d){return null},set:function(d){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(d){var m,y,w,_,T,O;return Mt(d)?this.each(function(q){x(this).addClass(d.call(this,q,Dn(this)))}):(m=Di(d)).length?this.each(function(){if(w=Dn(this),y=1===this.nodeType&&" "+Go(w)+" "){for(T=0;T<m.length;T++)y.indexOf(" "+(_=m[T])+" ")<0&&(y+=_+" ");O=Go(y),w!==O&&this.setAttribute("class",O)}}):this},removeClass:function(d){var m,y,w,_,T,O;return Mt(d)?this.each(function(q){x(this).removeClass(d.call(this,q,Dn(this)))}):arguments.length?(m=Di(d)).length?this.each(function(){if(w=Dn(this),y=1===this.nodeType&&" "+Go(w)+" "){for(T=0;T<m.length;T++)for(_=m[T];-1<y.indexOf(" "+_+" ");)y=y.replace(" "+_+" "," ");O=Go(y),w!==O&&this.setAttribute("class",O)}}):this:this.attr("class","")},toggleClass:function(d,m){var y,w,_,T,O=typeof d,q="string"===O||Array.isArray(d);return Mt(d)?this.each(function(H){x(this).toggleClass(d.call(this,H,Dn(this),m),m)}):"boolean"==typeof m&&q?m?this.addClass(d):this.removeClass(d):(y=Di(d),this.each(function(){if(q)for(T=x(this),_=0;_<y.length;_++)T.hasClass(w=y[_])?T.removeClass(w):T.addClass(w);else void 0!==d&&"boolean"!==O||((w=Dn(this))&&ee.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||!1===d?"":ee.get(this,"__className__")||""))}))},hasClass:function(d){var m,y,w=0;for(m=" "+d+" ";y=this[w++];)if(1===y.nodeType&&-1<(" "+Go(Dn(y))+" ").indexOf(m))return!0;return!1}});var Bi=/\r/g;x.fn.extend({val:function(d){var m,y,w,_=this[0];return arguments.length?(w=Mt(d),this.each(function(T){var O;1===this.nodeType&&(null==(O=w?d.call(this,T,x(this).val()):d)?O="":"number"==typeof O?O+="":Array.isArray(O)&&(O=x.map(O,function(q){return null==q?"":q+""})),(m=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in m&&void 0!==m.set(this,O,"value")||(this.value=O))})):_?(m=x.valHooks[_.type]||x.valHooks[_.nodeName.toLowerCase()])&&"get"in m&&void 0!==(y=m.get(_,"value"))?y:"string"==typeof(y=_.value)?y.replace(Bi,""):y??"":void 0}}),x.extend({valHooks:{option:{get:function(d){return x.find.attr(d,"value")??Go(x.text(d))}},select:{get:function(d){var m,y,w,_=d.options,T=d.selectedIndex,O="select-one"===d.type,q=O?null:[],H=O?T+1:_.length;for(w=T<0?H:O?T:0;w<H;w++)if(((y=_[w]).selected||w===T)&&!y.disabled&&(!y.parentNode.disabled||!St(y.parentNode,"optgroup"))){if(m=x(y).val(),O)return m;q.push(m)}return q},set:function(d,m){for(var y,w,_=d.options,T=x.makeArray(m),O=_.length;O--;)((w=_[O]).selected=-1<x.inArray(x.valHooks.option.get(w),T))&&(y=!0);return y||(d.selectedIndex=-1),T}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(d,m){if(Array.isArray(m))return d.checked=-1<x.inArray(x(d).val(),m)}},Xt.checkOn||(x.valHooks[this].get=function(d){return null===d.getAttribute("value")?"on":d.value})});var Jn=bt.location,kr={guid:Date.now()},eo=/\?/;x.parseXML=function(d){var m,y;if(!d||"string"!=typeof d)return null;try{m=(new bt.DOMParser).parseFromString(d,"text/xml")}catch{}return y=m&&m.getElementsByTagName("parsererror")[0],m&&!y||x.error("Invalid XML: "+(y?x.map(y.childNodes,function(w){return w.textContent}).join("\n"):d)),m};var ac=/^(?:focusinfocus|focusoutblur)$/,pe=function(d){d.stopPropagation()};x.extend(x.event,{trigger:function(d,m,y,w){var _,T,O,q,H,K,et,ot,J=[y||te],ut=An.call(d,"type")?d.type:d,Dt=An.call(d,"namespace")?d.namespace.split("."):[];if(T=ot=O=y=y||te,3!==y.nodeType&&8!==y.nodeType&&!ac.test(ut+x.event.triggered)&&(-1<ut.indexOf(".")&&(ut=(Dt=ut.split(".")).shift(),Dt.sort()),H=ut.indexOf(":")<0&&"on"+ut,(d=d[x.expando]?d:new x.Event(ut,"object"==typeof d&&d)).isTrigger=w?2:3,d.namespace=Dt.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+Dt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=y),m=null==m?[d]:x.makeArray(m,[d]),et=x.event.special[ut]||{},w||!et.trigger||!1!==et.trigger.apply(y,m))){if(!w&&!et.noBubble&&!at(y)){for(ac.test((q=et.delegateType||ut)+ut)||(T=T.parentNode);T;T=T.parentNode)J.push(T),O=T;O===(y.ownerDocument||te)&&J.push(O.defaultView||O.parentWindow||bt)}for(_=0;(T=J[_++])&&!d.isPropagationStopped();)ot=T,d.type=1<_?q:et.bindType||ut,(K=(ee.get(T,"events")||Object.create(null))[d.type]&&ee.get(T,"handle"))&&K.apply(T,m),(K=H&&T[H])&&K.apply&&fr(T)&&(d.result=K.apply(T,m),!1===d.result&&d.preventDefault());return d.type=ut,w||d.isDefaultPrevented()||et._default&&!1!==et._default.apply(J.pop(),m)||!fr(y)||H&&Mt(y[ut])&&!at(y)&&((O=y[H])&&(y[H]=null),x.event.triggered=ut,d.isPropagationStopped()&&ot.addEventListener(ut,pe),y[ut](),d.isPropagationStopped()&&ot.removeEventListener(ut,pe),x.event.triggered=void 0,O&&(y[H]=O)),d.result}},simulate:function(d,m,y){var w=x.extend(new x.Event,y,{type:d,isSimulated:!0});x.event.trigger(w,null,m)}}),x.fn.extend({trigger:function(d,m){return this.each(function(){x.event.trigger(d,m,this)})},triggerHandler:function(d,m){var y=this[0];if(y)return x.event.trigger(d,m,y,!0)}});var uu=/\[\]$/,Pi=/\r?\n/g,ic=/^(?:submit|button|image|reset|file)$/i,it=/^(?:input|select|textarea|keygen)/i;function No(d,m,y,w){var _;if(Array.isArray(m))x.each(m,function(T,O){y||uu.test(d)?w(d,O):No(d+"["+("object"==typeof O&&null!=O?T:"")+"]",O,y,w)});else if(y||"object"!==Se(m))w(d,m);else for(_ in m)No(d+"["+_+"]",m[_],y,w)}x.param=function(d,m){var y,w=[],_=function(T,O){var q=Mt(O)?O():O;w[w.length]=encodeURIComponent(T)+"="+encodeURIComponent(q??"")};if(null==d)return"";if(Array.isArray(d)||d.jquery&&!x.isPlainObject(d))x.each(d,function(){_(this.name,this.value)});else for(y in d)No(y,d[y],m,_);return w.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=x.prop(this,"elements");return d?x.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!x(this).is(":disabled")&&it.test(this.nodeName)&&!ic.test(d)&&(this.checked||!ko.test(d))}).map(function(d,m){var y=x(this).val();return null==y?null:Array.isArray(y)?x.map(y,function(w){return{name:m.name,value:w.replace(Pi,"\r\n")}}):{name:m.name,value:y.replace(Pi,"\r\n")}}).get()}});var lc=/%20/g,wn=/#.*$/,hs=/([?&])_=[^&]*/,fu=/^(.*?):[ \t]*([^\r\n]*)$/gm,cc=/^(?:GET|HEAD)$/,mu=/^\/\//,dc={},fe={},Li="*/".concat("*"),bs=te.createElement("a");function Qs(d){return function(m,y){"string"!=typeof m&&(y=m,m="*");var w,_=0,T=m.toLowerCase().match(re)||[];if(Mt(y))for(;w=T[_++];)"+"===w[0]?(w=w.slice(1)||"*",(d[w]=d[w]||[]).unshift(y)):(d[w]=d[w]||[]).push(y)}}function Un(d,m,y,w){var _={},T=d===fe;function O(q){var H;return _[q]=!0,x.each(d[q]||[],function(K,et){var ot=et(m,y,w);return"string"!=typeof ot||T||_[ot]?T?!(H=ot):void 0:(m.dataTypes.unshift(ot),O(ot),!1)}),H}return O(m.dataTypes[0])||!_["*"]&&O("*")}function Hn(d,m){var y,w,_=x.ajaxSettings.flatOptions||{};for(y in m)void 0!==m[y]&&((_[y]?d:w||(w={}))[y]=m[y]);return w&&x.extend(!0,d,w),d}bs.href=Jn.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Jn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Jn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Li,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,m){return m?Hn(Hn(d,x.ajaxSettings),m):Hn(x.ajaxSettings,d)},ajaxPrefilter:Qs(dc),ajaxTransport:Qs(fe),ajax:function(d,m){"object"==typeof d&&(m=d,d=void 0);var y,w,_,T,O,q,H,K,et,ot,J=x.ajaxSetup({},m=m||{}),ut=J.context||J,Dt=J.context&&(ut.nodeType||ut.jquery)?x(ut):x.event,le=x.Deferred(),D=x.Callbacks("once memory"),en=J.statusCode||{},mn={},ln={},_r="canceled",It={readyState:0,getResponseHeader:function(Ne){var Le;if(H){if(!T)for(T={};Le=fu.exec(_);)T[Le[1].toLowerCase()+" "]=(T[Le[1].toLowerCase()+" "]||[]).concat(Le[2]);Le=T[Ne.toLowerCase()+" "]}return null==Le?null:Le.join(", ")},getAllResponseHeaders:function(){return H?_:null},setRequestHeader:function(Ne,Le){return null==H&&(Ne=ln[Ne.toLowerCase()]=ln[Ne.toLowerCase()]||Ne,mn[Ne]=Le),this},overrideMimeType:function(Ne){return null==H&&(J.mimeType=Ne),this},statusCode:function(Ne){var Le;if(Ne)if(H)It.always(Ne[It.status]);else for(Le in Ne)en[Le]=[en[Le],Ne[Le]];return this},abort:function(Ne){var Le=Ne||_r;return y&&y.abort(Le),qn(0,Le),this}};if(le.promise(It),J.url=((d||J.url||Jn.href)+"").replace(mu,Jn.protocol+"//"),J.type=m.method||m.type||J.method||J.type,J.dataTypes=(J.dataType||"*").toLowerCase().match(re)||[""],null==J.crossDomain){q=te.createElement("a");try{q.href=J.url,q.href=q.href,J.crossDomain=bs.protocol+"//"+bs.host!=q.protocol+"//"+q.host}catch{J.crossDomain=!0}}if(J.data&&J.processData&&"string"!=typeof J.data&&(J.data=x.param(J.data,J.traditional)),Un(dc,J,m,It),H)return It;for(et in(K=x.event&&J.global)&&0==x.active++&&x.event.trigger("ajaxStart"),J.type=J.type.toUpperCase(),J.hasContent=!cc.test(J.type),w=J.url.replace(wn,""),J.hasContent?J.data&&J.processData&&0===(J.contentType||"").indexOf("application/x-www-form-urlencoded")&&(J.data=J.data.replace(lc,"+")):(ot=J.url.slice(w.length),J.data&&(J.processData||"string"==typeof J.data)&&(w+=(eo.test(w)?"&":"?")+J.data,delete J.data),!1===J.cache&&(w=w.replace(hs,"$1"),ot=(eo.test(w)?"&":"?")+"_="+kr.guid+++ot),J.url=w+ot),J.ifModified&&(x.lastModified[w]&&It.setRequestHeader("If-Modified-Since",x.lastModified[w]),x.etag[w]&&It.setRequestHeader("If-None-Match",x.etag[w])),(J.data&&J.hasContent&&!1!==J.contentType||m.contentType)&&It.setRequestHeader("Content-Type",J.contentType),It.setRequestHeader("Accept",J.dataTypes[0]&&J.accepts[J.dataTypes[0]]?J.accepts[J.dataTypes[0]]+("*"!==J.dataTypes[0]?", "+Li+"; q=0.01":""):J.accepts["*"]),J.headers)It.setRequestHeader(et,J.headers[et]);if(J.beforeSend&&(!1===J.beforeSend.call(ut,It,J)||H))return It.abort();if(_r="abort",D.add(J.complete),It.done(J.success),It.fail(J.error),y=Un(fe,J,m,It)){if(It.readyState=1,K&&Dt.trigger("ajaxSend",[It,J]),H)return It;J.async&&0<J.timeout&&(O=bt.setTimeout(function(){It.abort("timeout")},J.timeout));try{H=!1,y.send(mn,qn)}catch(Ne){if(H)throw Ne;qn(-1,Ne)}}else qn(-1,"No Transport");function qn(Ne,Le,oo,sr){var ar,vs,$n,gr,Qo,ir=Le;H||(H=!0,O&&bt.clearTimeout(O),y=void 0,_=sr||"",It.readyState=0<Ne?4:0,ar=200<=Ne&&Ne<300||304===Ne,oo&&(gr=function(Ee,qe,En){for(var $r,kn,se,Je,nn=Ee.contents,Oe=Ee.dataTypes;"*"===Oe[0];)Oe.shift(),void 0===$r&&($r=Ee.mimeType||qe.getResponseHeader("Content-Type"));if($r)for(kn in nn)if(nn[kn]&&nn[kn].test($r)){Oe.unshift(kn);break}if(Oe[0]in En)se=Oe[0];else{for(kn in En){if(!Oe[0]||Ee.converters[kn+" "+Oe[0]]){se=kn;break}Je||(Je=kn)}se=se||Je}if(se)return se!==Oe[0]&&Oe.unshift(se),En[se]}(J,It,oo)),!ar&&-1<x.inArray("script",J.dataTypes)&&x.inArray("json",J.dataTypes)<0&&(J.converters["text script"]=function(){}),gr=function(Ee,qe,En,$r){var kn,se,Je,nn,Oe,hr={},ys=Ee.dataTypes.slice();if(ys[1])for(Je in Ee.converters)hr[Je.toLowerCase()]=Ee.converters[Je];for(se=ys.shift();se;)if(Ee.responseFields[se]&&(En[Ee.responseFields[se]]=qe),!Oe&&$r&&Ee.dataFilter&&(qe=Ee.dataFilter(qe,Ee.dataType)),Oe=se,se=ys.shift())if("*"===se)se=Oe;else if("*"!==Oe&&Oe!==se){if(!(Je=hr[Oe+" "+se]||hr["* "+se]))for(kn in hr)if((nn=kn.split(" "))[1]===se&&(Je=hr[Oe+" "+nn[0]]||hr["* "+nn[0]])){!0===Je?Je=hr[kn]:!0!==hr[kn]&&(se=nn[0],ys.unshift(nn[1]));break}if(!0!==Je)if(Je&&Ee.throws)qe=Je(qe);else try{qe=Je(qe)}catch(ta){return{state:"parsererror",error:Je?ta:"No conversion from "+Oe+" to "+se}}}return{state:"success",data:qe}}(J,gr,It,ar),ar?(J.ifModified&&((Qo=It.getResponseHeader("Last-Modified"))&&(x.lastModified[w]=Qo),(Qo=It.getResponseHeader("etag"))&&(x.etag[w]=Qo)),204===Ne||"HEAD"===J.type?ir="nocontent":304===Ne?ir="notmodified":(ir=gr.state,vs=gr.data,ar=!($n=gr.error))):($n=ir,!Ne&&ir||(ir="error",Ne<0&&(Ne=0))),It.status=Ne,It.statusText=(Le||ir)+"",ar?le.resolveWith(ut,[vs,ir,It]):le.rejectWith(ut,[It,ir,$n]),It.statusCode(en),en=void 0,K&&Dt.trigger(ar?"ajaxSuccess":"ajaxError",[It,J,ar?vs:$n]),D.fireWith(ut,[It,ir]),K&&(Dt.trigger("ajaxComplete",[It,J]),--x.active||x.event.trigger("ajaxStop")))}return It},getJSON:function(d,m,y){return x.get(d,m,y,"json")},getScript:function(d,m){return x.get(d,void 0,m,"script")}}),x.each(["get","post"],function(d,m){x[m]=function(y,w,_,T){return Mt(w)&&(T=T||_,_=w,w=void 0),x.ajax(x.extend({url:y,type:m,dataType:T,data:w,success:_},x.isPlainObject(y)&&y))}}),x.ajaxPrefilter(function(d){var m;for(m in d.headers)"content-type"===m.toLowerCase()&&(d.contentType=d.headers[m]||"")}),x._evalUrl=function(d,m,y){return x.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){x.globalEval(w,m,y)}})},x.fn.extend({wrapAll:function(d){var m;return this[0]&&(Mt(d)&&(d=d.call(this[0])),m=x(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(d){return Mt(d)?this.each(function(m){x(this).wrapInner(d.call(this,m))}):this.each(function(){var m=x(this),y=m.contents();y.length?y.wrapAll(d):m.append(d)})},wrap:function(d){var m=Mt(d);return this.each(function(y){x(this).wrapAll(m?d.call(this,y):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(d){return!x.expr.pseudos.visible(d)},x.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new bt.XMLHttpRequest}catch{}};var pu={0:200,1223:204},Zs=x.ajaxSettings.xhr();Xt.cors=!!Zs&&"withCredentials"in Zs,Xt.ajax=Zs=!!Zs,x.ajaxTransport(function(d){var m,y;if(Xt.cors||Zs&&!d.crossDomain)return{send:function(w,_){var T,O=d.xhr();if(O.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(T in d.xhrFields)O[T]=d.xhrFields[T];for(T in d.mimeType&&O.overrideMimeType&&O.overrideMimeType(d.mimeType),d.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)O.setRequestHeader(T,w[T]);m=function(q){return function(){m&&(m=y=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,"abort"===q?O.abort():"error"===q?"number"!=typeof O.status?_(0,"error"):_(O.status,O.statusText):_(pu[O.status]||O.status,O.statusText,"text"!==(O.responseType||"text")||"string"!=typeof O.responseText?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=m(),y=O.onerror=O.ontimeout=m("error"),void 0!==O.onabort?O.onabort=y:O.onreadystatechange=function(){4===O.readyState&&bt.setTimeout(function(){m&&y()})},m=m("abort");try{O.send(d.hasContent&&d.data||null)}catch(q){if(m)throw q}},abort:function(){m&&m()}}}),x.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return x.globalEval(d),d}}}),x.ajaxPrefilter("script",function(d){void 0===d.cache&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),x.ajaxTransport("script",function(d){var m,y;if(d.crossDomain||d.scriptAttrs)return{send:function(w,_){m=x("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",y=function(T){m.remove(),y=null,T&&_("error"===T.type?404:200,T.type)}),te.head.appendChild(m[0])},abort:function(){y&&y()}}});var Js,Mi=[],Ze=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=Mi.pop()||x.expando+"_"+kr.guid++;return this[d]=!0,d}}),x.ajaxPrefilter("json jsonp",function(d,m,y){var w,_,T,O=!1!==d.jsonp&&(Ze.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ze.test(d.data)&&"data");if(O||"jsonp"===d.dataTypes[0])return w=d.jsonpCallback=Mt(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,O?d[O]=d[O].replace(Ze,"$1"+w):!1!==d.jsonp&&(d.url+=(eo.test(d.url)?"&":"?")+d.jsonp+"="+w),d.converters["script json"]=function(){return T||x.error(w+" was not called"),T[0]},d.dataTypes[0]="json",_=bt[w],bt[w]=function(){T=arguments},y.always(function(){void 0===_?x(bt).removeProp(w):bt[w]=_,d[w]&&(d.jsonpCallback=m.jsonpCallback,Mi.push(w)),T&&Mt(_)&&_(T[0]),T=_=void 0}),"script"}),Xt.createHTMLDocument=((Js=te.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Js.childNodes.length),x.parseHTML=function(d,m,y){return"string"!=typeof d?[]:("boolean"==typeof m&&(y=m,m=!1),m||(Xt.createHTMLDocument?((w=(m=te.implementation.createHTMLDocument("")).createElement("base")).href=te.location.href,m.head.appendChild(w)):m=te),T=!y&&[],(_=k.exec(d))?[m.createElement(_[1])]:(_=Ma([d],m,T),T&&T.length&&x(T).remove(),x.merge([],_.childNodes)));var w,_,T},x.fn.load=function(d,m,y){var w,_,T,O=this,q=d.indexOf(" ");return-1<q&&(w=Go(d.slice(q)),d=d.slice(0,q)),Mt(m)?(y=m,m=void 0):m&&"object"==typeof m&&(_="POST"),0<O.length&&x.ajax({url:d,type:_||"GET",dataType:"html",data:m}).done(function(H){T=arguments,O.html(w?x("<div>").append(x.parseHTML(H)).find(w):H)}).always(y&&function(H,K){O.each(function(){y.apply(this,T||[H.responseText,K,H])})}),this},x.expr.pseudos.animated=function(d){return x.grep(x.timers,function(m){return d===m.elem}).length},x.offset={setOffset:function(d,m,y){var w,_,T,O,q,H,K=x.css(d,"position"),et=x(d),ot={};"static"===K&&(d.style.position="relative"),q=et.offset(),T=x.css(d,"top"),H=x.css(d,"left"),("absolute"===K||"fixed"===K)&&-1<(T+H).indexOf("auto")?(O=(w=et.position()).top,_=w.left):(O=parseFloat(T)||0,_=parseFloat(H)||0),Mt(m)&&(m=m.call(d,y,x.extend({},q))),null!=m.top&&(ot.top=m.top-q.top+O),null!=m.left&&(ot.left=m.left-q.left+_),"using"in m?m.using.call(d,ot):et.css(ot)}},x.fn.extend({offset:function(d){if(arguments.length)return void 0===d?this:this.each(function(_){x.offset.setOffset(this,d,_)});var m,y,w=this[0];return w?w.getClientRects().length?{top:(m=w.getBoundingClientRect()).top+(y=w.ownerDocument.defaultView).pageYOffset,left:m.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var d,m,y,w=this[0],_={top:0,left:0};if("fixed"===x.css(w,"position"))m=w.getBoundingClientRect();else{for(m=this.offset(),y=w.ownerDocument,d=w.offsetParent||y.documentElement;d&&(d===y.body||d===y.documentElement)&&"static"===x.css(d,"position");)d=d.parentNode;d&&d!==w&&1===d.nodeType&&((_=x(d).offset()).top+=x.css(d,"borderTopWidth",!0),_.left+=x.css(d,"borderLeftWidth",!0))}return{top:m.top-_.top-x.css(w,"marginTop",!0),left:m.left-_.left-x.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&"static"===x.css(d,"position");)d=d.offsetParent;return d||xo})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,m){var y="pageYOffset"===m;x.fn[d]=function(w){return Ur(this,function(_,T,O){var q;if(at(_)?q=_:9===_.nodeType&&(q=_.defaultView),void 0===O)return q?q[m]:_[T];q?q.scrollTo(y?q.pageXOffset:O,y?O:q.pageYOffset):_[T]=O},d,w,arguments.length)}}),x.each(["top","left"],function(d,m){x.cssHooks[m]=Sr(Xt.pixelPosition,function(y,w){if(w)return w=ms(y,m),Ve.test(w)?x(y).position()[m]+"px":w})}),x.each({Height:"height",Width:"width"},function(d,m){x.each({padding:"inner"+d,content:m,"":"outer"+d},function(y,w){x.fn[w]=function(_,T){var O=arguments.length&&(y||"boolean"!=typeof _),q=y||(!0===_||!0===T?"margin":"border");return Ur(this,function(H,K,et){var ot;return at(H)?0===w.indexOf("outer")?H["inner"+d]:H.document.documentElement["client"+d]:9===H.nodeType?(ot=H.documentElement,Math.max(H.body["scroll"+d],ot["scroll"+d],H.body["offset"+d],ot["offset"+d],ot["client"+d])):void 0===et?x.css(H,K,q):x.style(H,K,et,q)},m,O?_:void 0,O)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,m){x.fn[m]=function(y){return this.on(m,y)}}),x.fn.extend({bind:function(d,m,y){return this.on(d,null,m,y)},unbind:function(d,m){return this.off(d,null,m)},delegate:function(d,m,y,w){return this.on(m,d,y,w)},undelegate:function(d,m,y){return 1===arguments.length?this.off(d,"**"):this.off(m,d||"**",y)},hover:function(d,m){return this.on("mouseenter",d).on("mouseleave",m||d)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,m){x.fn[m]=function(y,w){return 0<arguments.length?this.on(m,null,y,w):this.trigger(m)}});var no=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(d,m){var y,w,_;if("string"==typeof m&&(y=d[m],m=d,d=y),Mt(d))return w=ie.call(arguments,2),(_=function(){return d.apply(m||this,w.concat(ie.call(arguments)))}).guid=d.guid=d.guid||x.guid++,_},x.holdReady=function(d){d?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=St,x.isFunction=Mt,x.isWindow=at,x.camelCase=Qe,x.type=Se,x.now=Date.now,x.isNumeric=function(d){var m=x.type(d);return("number"===m||"string"===m)&&!isNaN(d-parseFloat(d))},x.trim=function(d){return null==d?"":(d+"").replace(no,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var tr=bt.jQuery,ro=bt.$;return x.noConflict=function(d){return bt.$===x&&(bt.$=ro),d&&bt.jQuery===x&&(bt.jQuery=tr),x},typeof Yt>"u"&&(bt.jQuery=bt.$=x),x}),function(bt){bt.imageArea=function(Yt,Qt){var Nn,tn,Gn,An,Wt=Yt.options,ie=Yt.$image,Xe=Yt.$trigger,xr={},wr=!0,Nt=!0,Xt=[0,0],Mt=[0,0],at={id:Qt,x:0,y:0,z:0,height:0,width:0},Tn=function(){Yt.blurAll(),at.z=100,ft()},Ie=function(){return at},Se=function(kt){ie.trigger(kt,[at.id,Yt.areas()])},lt=function(kt){var oe=kt||window.event||{};oe.cancelBubble=!0,oe.returnValue=!1,oe.stopPropagation&&oe.stopPropagation(),oe.preventDefault&&oe.preventDefault()},x=function(kt,oe){var de,At;switch(kt){case"start":de="mousedown",At="touchstart";break;case"move":de="mousemove",At="touchmove";break;case"stop":de="mouseup",At="touchend";break;default:return}oe&&jQuery.isFunction(oe)?bt(window.document).on(de,oe).on(At,oe):bt(window.document).off(de).off(At)},zn=function(){Nn.css({cursor:"default",width:at.width,height:at.height,left:at.x,top:at.y}),tn.css({backgroundPosition:-at.x-1+"px "+(-at.y-1)+"px",cursor:Wt.allowMove?"move":"default",width:at.width-2>0?at.width-2:0,height:at.height-2>0?at.height-2:0,left:at.x+1,top:at.y+1}),Gn.css({width:at.width-2>0?at.width-2:0,left:at.x+2,top:at.y+1})},St=function(kt){Wt.allowResize&&(kt?bt.each(xr,function(oe,de){var At,Te,re=Math.round(de.width()/2),Q=Math.round(de.height()/2),Co=oe[0],zr=oe[oe.length-1];At="n"===Co?-Q:"s"===Co?at.height-Q-1:Math.round(at.height/2)-Q-1,Te="e"===zr?at.width-re-1:"w"===zr?-re:Math.round(at.width/2)-re-1,de.css({display:"block",left:at.x+Te,top:at.y+At})}):bt(".select-areas-resize-handler").each(function(){bt(this).css({display:"none"})}))},Rn=function(kt){An&&An.css({display:kt?"block":"none",left:at.x+at.width+1,top:at.y-An.outerHeight()-1})},zs=function(kt){Nn.css({cursor:kt}),tn.css({cursor:kt})},ft=function(kt){switch(kt){case"startSelection":Yt._refresh(),zn(),St(),Rn(!0);break;case"pickSelection":case"pickResizeHandler":St();break;case"resizeSelection":zn(),St(),zs("crosshair"),Rn(!0);break;case"moveSelection":zn(),St(),zs("move"),Rn(!0);break;case"blur":zn(),St(),Rn();break;default:zn(),St(!0),Rn(!0)}},Zr=function(kt){lt(kt),Tn(),x("move",ur),x("stop",Qn);var oe=k(kt);Xt[0]=oe[0]-at.x,Xt[1]=oe[1]-at.y,ft("pickSelection")},xt=function(kt){lt(kt),Tn();var oe=kt.target.className.split(" ")[1];"w"===oe[oe.length-1]&&(Mt[0]+=at.width,at.x=Mt[0]-at.width),"n"===oe[0]&&(Mt[1]+=at.height,at.y=Mt[1]-at.height),"n"===oe||"s"===oe?wr=!1:("e"===oe||"w"===oe)&&(Nt=!1),x("move",bo),x("stop",Qn),ft("pickResizeHandler")},bo=function(kt){lt(kt),Tn();var oe=k(kt),de=oe[1]-Mt[1],At=oe[0]-Mt[0];Math.abs(At)<Wt.minSize[0]&&(At=At>=0?Wt.minSize[0]:-Wt.minSize[0]),Math.abs(de)<Wt.minSize[1]&&(de=de>=0?Wt.minSize[1]:-Wt.minSize[1]),(Mt[0]+At<0||Mt[0]+At>ie.width())&&(At=-At),(Mt[1]+de<0||Mt[1]+de>ie.height())&&(de=-de),Wt.maxSize[0]>Wt.minSize[0]&&Wt.maxSize[1]>Wt.minSize[1]&&(Math.abs(At)>Wt.maxSize[0]&&(At=At>=0?Wt.maxSize[0]:-Wt.maxSize[0]),Math.abs(de)>Wt.maxSize[1]&&(de=de>=0?Wt.maxSize[1]:-Wt.maxSize[1])),wr&&(at.width=At),Nt&&(at.height=de),Wt.aspectRatio&&(At>0&&de>0||At<0&&de<0?wr?de=Math.round(At/Wt.aspectRatio):At=Math.round(de*Wt.aspectRatio):wr?de=-Math.round(At/Wt.aspectRatio):At=-Math.round(de*Wt.aspectRatio),Mt[0]+At>ie.width()&&(At=ie.width()-Mt[0],de=de>0?Math.round(At/Wt.aspectRatio):-Math.round(At/Wt.aspectRatio)),Mt[1]+de<0&&(de=-Mt[1],At=At>0?-Math.round(de*Wt.aspectRatio):Math.round(de*Wt.aspectRatio)),Mt[1]+de>ie.height()&&(de=ie.height()-Mt[1],At=At>0?Math.round(de*Wt.aspectRatio):-Math.round(de*Wt.aspectRatio)),at.width=At,at.height=de),at.width<0?(at.width=Math.abs(at.width),at.x=Mt[0]-at.width):at.x=Mt[0],at.height<0?(at.height=Math.abs(at.height),at.y=Mt[1]-at.height):at.y=Mt[1],Se("changing"),ft("resizeSelection")},ur=function(kt){if(lt(kt),Wt.allowMove){Tn();var oe=k(kt);vo({x:oe[0]-Xt[0],y:oe[1]-Xt[1]}),Se("changing")}},vo=function(kt){at.x=kt.x>0?kt.x+at.width<ie.width()?kt.x:ie.width()-at.width:0,at.y=kt.y>0?kt.y+at.height<ie.height()?kt.y:ie.height()-at.height:0,ft("moveSelection")},Qn=function(kt,oe){lt(kt),function(){bt.each(arguments,function(kt,oe){x(oe)})}("move","stop"),oe&&(at.x=oe.x,at.y=oe.y,at.z=oe.z,at.width=oe.width,at.height=oe.height,zn()),Mt[0]=at.x,Mt[1]=at.y,wr=!0,Nt=!0,Se("changed"),ft("releaseSelection")},xe=function(kt){Se("deleted"),lt(kt),tn.remove(),Nn.remove(),Gn.remove(),bt.each(xr,function(oe,de){de.remove()}),An&&An.remove(),Yt._remove(Qt)},k=function(kt){var oe=function(kt){var oe=bt(kt).offset();return[oe.left,oe.top]}(ie);kt.pageX||(kt.originalEvent&&(kt=kt.originalEvent),kt.changedTouches&&(kt=kt.changedTouches[0]),kt.touches&&(kt=kt.touches[0]));var de=kt.pageX-oe[0],At=kt.pageY-oe[1];return[de=de<0?0:de>ie.width()?ie.width():de,At=At<0?0:At>ie.height()?ie.height():At]};if(Nn=bt("<div id='select-areas-outline_"+Ie().id+'\'  class="select-areas-outline"/>').css({opacity:Wt.outlineOpacity,position:"absolute"}).insertAfter(Xe),tn=bt("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+Ie().id).css({position:"absolute"}).insertAfter(Nn),Gn=bt("<div id='select-areas-label-container_"+Ie().id+'\'  class="select-areas-label-container"/>').css({position:"absolute"}).insertAfter(Xe),Wt.allowResize&&bt.each(["nw","n","ne","e","se","s","sw","w"],function(kt,oe){xr[oe]=bt('<div class="select-areas-resize-handler '+oe+" select-areas-resize-handler_"+Ie().id+'"/>').css({opacity:.5,position:"absolute",cursor:oe+"-resize"}).insertAfter(tn).mousedown(xt).bind("touchstart",xt)}),Wt.allowDelete){var yo=function(kt){return kt.click(xe).bind("touchstart",xe).bind("tap",xe),kt};An=yo(bt("<div id='select-areas-delete_"+Ie().id+'\'  class="delete-area" />')).append(yo(bt('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(tn)}return Wt.allowMove&&tn.mousedown(Zr).bind("touchstart",Zr),Tn(),{getData:Ie,startSelection:function(kt){lt(kt),at.width=Wt.minSize[0],at.height=Wt.minSize[1],Tn(),x("move",bo),x("stop",Qn),(Mt=k(kt))[0]+at.width>ie.width()&&(Mt[0]=ie.width()-at.width),Mt[1]+at.height>ie.height()&&(Mt[1]=ie.height()-at.height),at.x=Mt[0],at.y=Mt[1],ft("startSelection")},deleteSelection:xe,options:Wt,blur:function(){at.z=0,ft("blur")},focus:Tn,nudge:function(kt){kt.x=at.x,kt.y=at.y,kt.d&&(kt.y=at.y+kt.d),kt.u&&(kt.y=at.y-kt.u),kt.l&&(kt.x=at.x-kt.l),kt.r&&(kt.x=at.x+kt.r),vo(kt),Se("changed")},set:function(kt,oe){at=bt.extend(at,kt),Mt[0]=at.x,Mt[1]=at.y,oe||Se("changed")},contains:function(kt){return kt.x>=at.x&&kt.x<=at.x+at.width&&kt.y>=at.y&&kt.y<=at.y+at.height}}},bt.imageSelectAreas=function(){},bt.imageSelectAreas.prototype.init=function(Yt,Qt){var Wt=this;this.options=bt.extend({allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null},Qt),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=bt(Yt),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=bt("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=bt('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=bt("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),bt.each(this.options.areas,function(Xe,Nn){Wt._add(Nn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(bt.proxy(this.newArea,this)).on("touchstart",bt.proxy(this.newArea,this)),this.options.allowNudge&&bt("html").keydown(function(Xe){var Gn,tn={37:"l",38:"u",39:"r",40:"d"}[Xe.which];if(tn&&(Wt._eachArea(function(An){if(100===An.getData().z)return Gn=An,!1}),Gn)){var xr={};xr[tn]=1,Gn.nudge(xr)}})},bt.imageSelectAreas.prototype._refresh=function(){var Yt=this.areas().length;this.$overlay.css({display:Yt?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},bt.imageSelectAreas.prototype._eachArea=function(Yt){bt.each(this._areas,function(Qt,Wt){if(Wt)return Yt(Wt,Qt)})},bt.imageSelectAreas.prototype._remove=function(Yt){delete this._areas[Yt],this._refresh()},bt.imageSelectAreas.prototype.remove=function(Yt){this._areas[Yt]&&this._areas[Yt].deleteSelection()},bt.imageSelectAreas.prototype.newArea=function(Yt){var Qt=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(Wt,ie){Qt=Math.max(Qt,parseInt(ie,10))}),this._areas[Qt+=1]=bt.imageArea(this,Qt),Yt&&this._areas[Qt].startSelection(Yt)),Qt},bt.imageSelectAreas.prototype.set=function(Yt,Qt,Wt){this._areas[Yt]&&(Qt.id=Yt,this._areas[Yt].set(Qt,Wt),this._areas[Yt].focus())},bt.imageSelectAreas.prototype._add=function(Yt,Qt){var Wt=this.newArea();this.set(Wt,Yt,Qt)},bt.imageSelectAreas.prototype.add=function(Yt){var Qt=this;this.blurAll(),bt.isArray(Yt)?bt.each(Yt,function(Wt,ie){Qt._add(ie)}):this._add(Yt),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},bt.imageSelectAreas.prototype.reset=function(){var Yt=this;this._eachArea(function(Qt,Wt){Yt.remove(Wt)}),this._refresh()},bt.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},bt.imageSelectAreas.prototype.areas=function(){var Yt=[];return this._eachArea(function(Qt){Yt.push(Qt.getData())}),Yt},bt.imageSelectAreas.prototype.relativeAreas=function(){for(var Yt=this.areas(),Qt=[],Wt=this.ratio,ie=function(Nn){return Math.floor(Nn/Wt)},Xe=0;Xe<Yt.length;Xe++)Qt[Xe]=bt.extend({},Yt[Xe]),Qt[Xe].x=ie(Qt[Xe].x),Qt[Xe].y=ie(Qt[Xe].y),Qt[Xe].width=ie(Qt[Xe].width),Qt[Xe].height=ie(Qt[Xe].height);return Qt},bt.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(Yt){Yt.blur()})},bt.imageSelectAreas.prototype.contains=function(Yt){var Qt=!1;return this._eachArea(function(Wt){if(Wt.contains(Yt))return Qt=!0,!1}),Qt},bt.selectAreas=function(Yt,Qt){var Wt=bt(Yt);if(!Wt.data("mainImageSelectAreas")){var ie=new bt.imageSelectAreas;ie.init(Yt,Qt),Wt.data("mainImageSelectAreas",ie),Wt.trigger("loaded")}return Wt.data("mainImageSelectAreas")},bt.fn.selectAreas=function(Yt){if(bt.imageSelectAreas.prototype[Yt]){var Qt=bt.imageSelectAreas.prototype[Yt].apply(bt.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Qt>"u"?this:Qt}if("object"==typeof Yt||!Yt)return this.each(function(){var Wt=this,ie=new Image;ie.onload=function(){bt.selectAreas(Wt,Yt)},ie.src=Wt.src}),this;bt.error("Method "+Yt+" does not exist on jQuery.selectAreas")}}(jQuery);
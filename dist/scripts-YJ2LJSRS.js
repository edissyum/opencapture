(function(){"use strict";var be=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},Ge=function(e){return{eq:e}},Qe=Ge(function(e,t){return e===t}),Ve=function(e){return Ge(function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e.eq(t[r],n[r]))return!1;return!0})},it=function(e){return Ge(function(t,n){var o=Object.keys(t),r=Object.keys(n);if(!function(l,c){return function(d,f){return Ge(function(m,b){return d.eq(f(m),f(b))})}(Ve(l),function(d){return function(f,m){return Array.prototype.slice.call(f).sort(m)}(d,c)})}(Qe).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!e.eq(t[i],n[i]))return!1}return!0})},Xt=Ge(function(e,t){if(e===t)return!0;var n=be(e);return n===be(t)&&(function(o){return["undefined","boolean","number","string","function","xml","null"].indexOf(o)!==-1}(n)?e===t:n==="array"?Ve(Xt).eq(e,t):n==="object"&&it(Xt).eq(e,t))});const Rn=Object.getPrototypeOf,Zt=(e,t,n)=>{var o;return!!n(e,t.prototype)||((o=e.constructor)===null||o===void 0?void 0:o.name)===t.name},Xn=e=>t=>(n=>{const o=typeof n;return n===null?"null":o==="object"&&Array.isArray(n)?"array":o==="object"&&Zt(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(t)===e,wo=e=>t=>typeof t===e,On=e=>t=>e===t,So=(e,t)=>Xe(e)&&Zt(e,t,(n,o)=>Rn(n)===o),Ae=Xn("string"),Xe=Xn("object"),Me=e=>So(e,Object),se=Xn("array"),Je=On(null),gn=wo("boolean"),Ft=On(void 0),wt=e=>e==null,le=e=>!wt(e),bt=wo("function"),x=wo("number"),Bn=(e,t)=>{if(se(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},Ee=()=>{},wn=(e,t)=>(...n)=>e(t.apply(null,n)),Ks=(e,t)=>n=>e(t(n)),fe=e=>()=>e,mt=e=>e,er=(e,t)=>e===t;function xe(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const vr=e=>t=>!e(t),po=e=>()=>{throw new Error(e)},yr=e=>e(),Yn=e=>{e()},yt=fe(!1),zt=fe(!0);class k{constructor(t,n){this.tag=t,this.value=n}static some(t){return new k(!0,t)}static none(){return k.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?k.some(t(this.value)):k.none()}bind(t){return this.tag?t(this.value):k.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:k.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return le(t)?k.some(t):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const Cr=Array.prototype.slice,_e=Array.prototype.indexOf,rt=Array.prototype.push,dt=(e,t)=>_e.call(e,t),Te=(e,t)=>dt(e,t)>-1,kt=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},ot=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const s=e[r];o[r]=t(s,r)}return o},J=(e,t)=>{for(let n=0,o=e.length;n<o;n++)t(e[n],n)},xr=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},qo=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];(t(a,r)?n:o).push(a)}return{pass:n,fail:o}},Ke=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const s=e[o];t(s,o)&&n.push(s)}return n},Vr=(e,t,n)=>(xr(e,(o,r)=>{n=t(n,o,r)}),n),hn=(e,t,n)=>(J(e,(o,r)=>{n=t(n,o,r)}),n),$o=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const s=e[o];if(t(s,o))return k.some(s);if(n(s,o))break}return k.none()},Gt=(e,t)=>$o(e,t,yt),Xs=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return k.some(n);return k.none()},lc=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!se(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);rt.apply(t,e[n])}return t},Qt=(e,t)=>lc(ot(e,t)),oo=(e,t)=>{for(let n=0,o=e.length;n<o;++n)if(t(e[n],n)!==!0)return!1;return!0},tr=e=>{const t=Cr.call(e,0);return t.reverse(),t},et=(e,t)=>Ke(e,n=>!Te(t,n)),Dn=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const s=e[o];n[String(s)]=t(s,o)}return n},Kr=(e,t)=>{const n=Cr.call(e,0);return n.sort(t),n},Ys=(e,t)=>t>=0&&t<e.length?k.some(e[t]):k.none(),Sn=e=>Ys(e,0),nr=e=>Ys(e,e.length-1),bn=bt(Array.from)?Array.from:e=>Cr.call(e),Gn=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return k.none()},wr=(e,t)=>{const n=[],o=bt(t)?r=>kt(n,s=>t(s,r)):r=>Te(n,r);for(let r=0,s=e.length;r<s;r++){const a=e[r];o(a)||n.push(a)}return n},nn=Object.keys,bu=Object.hasOwnProperty,Ct=(e,t)=>{const n=nn(e);for(let o=0,r=n.length;o<r;o++){const s=n[o];t(e[s],s)}},gs=(e,t)=>cc(e,(n,o)=>({k:o,v:t(n,o)})),cc=(e,t)=>{const n={};return Ct(e,(o,r)=>{const s=t(o,r);n[s.k]=s.v}),n},Sr=e=>(t,n)=>{e[n]=t},Er=(e,t,n,o)=>{Ct(e,(r,s)=>{(t(r,s)?n:o)(r,s)})},kr=(e,t)=>{const n={};return Er(e,t,Sr(n),Ee),n},_r=(e,t)=>{const n=[];return Ct(e,(o,r)=>{n.push(t(o,r))}),n},za=e=>_r(e,mt),Ot=(e,t)=>Fe(e,t)?k.from(e[t]):k.none(),Fe=(e,t)=>bu.call(e,t),ln=(e,t)=>Fe(e,t)&&e[t]!==void 0&&e[t]!==null,Ua=e=>{const t={};return J(e,n=>{t[n]={}}),nn(t)},dc=e=>e.length!==void 0,Ha=Array.isArray,Gs=(e,t,n)=>{if(!e)return!1;if(n=n||e,dc(e)){for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e)===!1)return!1}else for(const o in e)if(Fe(e,o)&&t.call(n,e[o],o,e)===!1)return!1;return!0},Nr=(e,t)=>{const n=[];return Gs(e,(o,r)=>{n.push(t(o,r,e))}),n},Wo=(e,t)=>{const n=[];return Gs(e,(o,r)=>{t&&!t(o,r,e)||n.push(o)}),n},hs=(e,t,n,o)=>{let r=Ft(n)?e[0]:n;for(let s=0;s<e.length;s++)r=t.call(o,r,e[s],s);return r},Qs=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},Xr=e=>e[e.length-1],Vo=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},uc=()=>qa(0,0),qa=(e,t)=>({major:e,minor:t}),Js={nu:qa,detect:(e,t)=>{const n=String(t).toLowerCase();return e.length===0?uc():((o,r)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const d=i[c];if(d.test(l))return d}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return qa(a(1),a(2))})(e,n)},unknown:uc},fc=(e,t)=>{const n=String(t).toLowerCase();return Gt(e,o=>o.search(n))},Li=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,Yr=(e,t)=>Kt(e,t)?((n,o)=>n.substring(o))(e,t.length):e,cn=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return r!==-1&&(!!Ft(o)||r+t.length<=o)},Kt=(e,t)=>Li(e,t,0),Zs=(e,t)=>Li(e,t,e.length-t.length),bs=e=>t=>t.replace(e,""),Gr=bs(/^\s+|\s+$/g),vu=bs(/^\s+/g),vs=bs(/\s+$/g),Eo=e=>e.length>0,ys=e=>!Eo(e),ea=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?k.none():k.some(n)},$a=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ko=e=>t=>cn(t,e),yu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>cn(e,"edge/")&&cn(e,"chrome")&&cn(e,"safari")&&cn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,$a],search:e=>cn(e,"chrome")&&!cn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>cn(e,"msie")||cn(e,"trident")},{name:"Opera",versionRegexes:[$a,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ko("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ko("firefox")},{name:"Safari",versionRegexes:[$a,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(cn(e,"safari")||cn(e,"mobile/"))&&cn(e,"applewebkit")}],Cu=[{name:"Windows",search:ko("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>cn(e,"iphone")||cn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ko("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ko("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ko("linux"),versionRegexes:[]},{name:"Solaris",search:ko("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ko("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ko("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Mi={browsers:fe(yu),oses:fe(Cu)},Ii="Edge",Wa="Chromium",Fi="Opera",go="Firefox",Qr="Safari",ta=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isEdge:o(Ii),isChromium:o(Wa),isIE:o("IE"),isOpera:o(Fi),isFirefox:o(go),isSafari:o(Qr)}},Cs=()=>ta({current:void 0,version:Js.unknown()}),mc=ta,pc=(fe(Ii),fe(Wa),fe("IE"),fe(Fi),fe(go),fe(Qr),"Windows"),gc="Android",Va="Linux",ji="macOS",na="Solaris",zi="FreeBSD",ho="ChromeOS",Ui=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isWindows:o(pc),isiOS:o("iOS"),isAndroid:o(gc),isMacOS:o(ji),isLinux:o(Va),isSolaris:o(na),isFreeBSD:o(zi),isChromeOS:o(ho)}},oa=()=>Ui({current:void 0,version:Js.unknown()}),xu=Ui,wu=(fe(pc),fe("iOS"),fe(gc),fe(Va),fe(ji),fe(na),fe(zi),fe(ho),e=>window.matchMedia(e).matches);let Jr=Vo(()=>((e,t,n)=>{const o=Mi.browsers(),r=Mi.oses(),s=t.bind(l=>((c,d)=>Gn(d.brands,f=>{const m=f.brand.toLowerCase();return Gt(c,b=>{var g;return m===((g=b.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(b=>({current:b.name,version:Js.nu(parseInt(f.version,10),0)}))}))(o,l)).orThunk(()=>((l,c)=>fc(l,c).map(d=>{const f=Js.detect(d.versionRegexes,c);return{current:d.name,version:f}}))(o,e)).fold(Cs,mc),a=((l,c)=>fc(l,c).map(d=>{const f=Js.detect(d.versionRegexes,c);return{current:d.name,version:f}}))(r,e).fold(oa,xu),i=((l,c,d,f)=>{const m=l.isiOS()&&/ipad/i.test(d)===!0,b=l.isiOS()&&!m,g=l.isiOS()||l.isAndroid(),v=g||f("(pointer:coarse)"),h=m||!b&&g&&f("(min-device-width:768px)"),C=b||g&&!h,S=c.isSafari()&&l.isiOS()&&/safari/i.test(d)===!1,E=!C&&!h&&!S;return{isiPad:fe(m),isiPhone:fe(b),isTablet:fe(h),isPhone:fe(C),isTouch:fe(v),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:fe(S),isDesktop:fe(E)}})(a,s,e,n);return{browser:s,os:a,deviceType:i}})(window.navigator.userAgent,k.from(window.navigator.userAgentData),wu));const Pn=()=>Jr(),Hi=window.navigator.userAgent,qi=Pn(),Qn=qi.browser,_o=qi.os,or=qi.deviceType,hc=Hi.indexOf("Windows Phone")!==-1,gt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Qn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Qn.isIE(),windowsPhone:hc,browser:{current:Qn.current,version:Qn.version,isChromium:Qn.isChromium,isEdge:Qn.isEdge,isFirefox:Qn.isFirefox,isIE:Qn.isIE,isOpera:Qn.isOpera,isSafari:Qn.isSafari},os:{current:_o.current,version:_o.version,isAndroid:_o.isAndroid,isChromeOS:_o.isChromeOS,isFreeBSD:_o.isFreeBSD,isiOS:_o.isiOS,isLinux:_o.isLinux,isMacOS:_o.isMacOS,isSolaris:_o.isSolaris,isWindows:_o.isWindows},deviceType:{isDesktop:or.isDesktop,isiPad:or.isiPad,isiPhone:or.isiPhone,isPhone:or.isPhone,isTablet:or.isTablet,isTouch:or.isTouch,isWebView:or.isWebView}},Su=/^\s*|\s*$/g,$i=e=>wt(e)?"":(""+e).replace(Su,""),bc=function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),Gs(e,(r,s)=>t.call(o,r,s,n)!==!1&&(bc(r,t,n,o),!0)))},ce={trim:$i,isArray:Ha,is:(e,t)=>t?!(t!=="array"||!Ha(e))||typeof e===t:e!==void 0,toArray:e=>{if(Ha(e))return e;{const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const o=Ae(e)?e.split(t||","):e||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:Gs,map:Nr,grep:Wo,inArray:(e,t)=>{if(e){for(let n=0,o=e.length;n<o;n++)if(e[n]===t)return n}return-1},hasOwn:Fe,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const o=t[n];for(const r in o)if(Fe(o,r)){const s=o[r];s!==void 0&&(e[r]=s)}}return e},walk:bc,resolve:(e,t=window)=>{const n=e.split(".");for(let o=0,r=n.length;o<r&&(t=t[n[o]]);o++);return t},explode:(e,t)=>se(e)?e:e===""?[]:Nr(e.split(t||","),$i),_addCacheSuffix:e=>{const t=gt.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Ar=(e,t,n=er)=>e.exists(o=>n(o,t)),vc=(e,t,n=er)=>vn(e,t,n).getOr(e.isNone()&&t.isNone()),vn=(e,t,n)=>e.isSome()&&t.isSome()?k.some(n(e.getOrDie(),t.getOrDie())):k.none(),xs=(e,t)=>e?k.some(t):k.none(),Eu=typeof window<"u"?window:Function("return this;")(),yc=(e,t)=>((n,o)=>{let r=o??Eu;for(let s=0;s<n.length&&r!=null;++s)r=r[n[s]];return r})(e.split("."),t),ku=Object.getPrototypeOf,Cc=e=>{const t=yc("ownerDocument.defaultView",e);return Xe(e)&&((n=>((o,r)=>{const s=((a,i)=>yc(a,i))(o,r);if(s==null)throw new Error(o+" not available on this browser");return s})("HTMLElement",n))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ku(e).constructor.name))},ft=e=>e.dom.nodeName.toLowerCase(),Wi=e=>e.dom.nodeType,ws=e=>t=>Wi(t)===e,Ss=e=>Hn(e)&&Cc(e.dom),Hn=ws(1),yn=ws(3),_u=ws(9),ra=ws(11),Es=e=>t=>Hn(t)&&ft(t)===e,Vi=(e,t,n)=>{if(!(Ae(n)||gn(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Jt=(e,t,n)=>{Vi(e.dom,t,n)},rr=(e,t)=>{const n=e.dom;Ct(t,(o,r)=>{Vi(n,r,o)})},Jn=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},sr=(e,t)=>k.from(Jn(e,t)),u=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},p=(e,t)=>{e.dom.removeAttribute(t)},y=e=>hn(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),w=(e,t)=>{const n=Jn(e,t);return n===void 0||n===""?[]:n.split(" ")},_=e=>e.dom.classList!==void 0,T=e=>w(e,"class"),O=(e,t)=>((n,o,r)=>{const s=w(n,o).concat([r]);return Jt(n,o,s.join(" ")),!0})(e,"class",t),q=(e,t)=>((n,o,r)=>{const s=Ke(w(n,o),a=>a!==r);return s.length>0?Jt(n,o,s.join(" ")):p(n,o),!1})(e,"class",t),H=(e,t)=>{_(e)?e.dom.classList.add(t):O(e,t)},K=e=>{(_(e)?e.dom.classList:T(e)).length===0&&p(e,"class")},ee=(e,t)=>{_(e)?e.dom.classList.remove(t):q(e,t),K(e)},ae=(e,t)=>_(e)&&e.dom.classList.contains(t),Z=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},me=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Z(n.childNodes[0])},De=(e,t)=>{const n=(t||document).createElement(e);return Z(n)},lt=(e,t)=>{const n=(t||document).createTextNode(e);return Z(n)},B=Z,en=(e,t,n)=>k.from(e.dom.elementFromPoint(t,n)).map(Z),dn=(e,t)=>{const n=[],o=s=>(n.push(s),t(s));let r=t(e);do r=r.bind(o);while(r.isSome());return n},on=(e,t)=>{const n=e.dom;if(n.nodeType!==1)return!1;{const o=n;if(o.matches!==void 0)return o.matches(t);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(t);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(t);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},No=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,Ie=(e,t)=>e.dom===t.dom,En=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},_t=e=>B(e.dom.ownerDocument),Mt=e=>_u(e)?e:_t(e),ar=e=>B(Mt(e).dom.defaultView),ro=e=>k.from(e.dom.parentNode).map(B),so=e=>k.from(e.dom.parentElement).map(B),ks=(e,t)=>{const n=bt(t)?t:yt;let o=e.dom;const r=[];for(;o.parentNode!==null&&o.parentNode!==void 0;){const s=o.parentNode,a=B(s);if(r.push(a),n(a)===!0)break;o=s}return r},Ln=e=>k.from(e.dom.previousSibling).map(B),bo=e=>k.from(e.dom.nextSibling).map(B),Zr=e=>tr(dn(e,Ln)),ao=e=>dn(e,bo),St=e=>ot(e.dom.childNodes,B),$t=(e,t)=>{const n=e.dom.childNodes;return k.from(n[t]).map(B)},kn=e=>$t(e,0),Ko=e=>$t(e,e.dom.childNodes.length-1),_n=e=>e.dom.childNodes.length,st=e=>ra(e)&&le(e.dom.host),jt=e=>B(e.dom.getRootNode()),Yt=e=>st(e)?e:(t=>{const n=t.dom.head;if(n==null)throw new Error("Head is not available yet");return B(n)})(Mt(e)),Wt=e=>B(e.dom.host),Ao=e=>{if(le(e.target)){const t=B(e.target);if(Hn(t)&&_s(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Sn(n)}}return k.from(e.target)},_s=e=>le(e.dom.shadowRoot),ir=e=>{const t=yn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return(o=>{const r=jt(o);return st(r)?k.some(r):k.none()})(B(t)).fold(()=>n.body.contains(t),Ks(ir,Wt))};var Tr=(e,t,n,o,r)=>e(n,o)?k.some(n):bt(r)&&r(n)?k.none():t(n,o,r);const To=(e,t,n)=>{let o=e.dom;const r=bt(n)?n:yt;for(;o.parentNode;){o=o.parentNode;const s=B(o);if(t(s))return k.some(s);if(r(s))break}return k.none()},qn=(e,t,n)=>Tr((o,r)=>r(o),To,e,t,n),Ka=(e,t)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const s=B(o.childNodes[r]);if(t(s))return k.some(s);const a=n(o.childNodes[r]);if(a.isSome())return a}return k.none()};return n(e.dom)},lr=(e,t,n)=>To(e,o=>on(o,t),n),es=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return No(r)?k.none():k.from(r.querySelector(n)).map(B)})(t,e),cr=(e,t,n)=>Tr((o,r)=>on(o,r),lr,e,t,n),Xo=(e,t=!1)=>{return ir(e)?e.dom.isContentEditable:(n=e,cr(n,"[contenteditable]")).fold(fe(t),o=>Xa(o)==="true");var n},Xa=e=>e.dom.contentEditable,Ns=(e,t)=>{e.dom.contentEditable=t?"true":"false"},ts=e=>e.style!==void 0&&bt(e.style.getPropertyValue),Ya=(e,t,n)=>{if(!Ae(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ts(e)&&e.style.setProperty(t,n)},Ki=(e,t,n)=>{const o=e.dom;Ya(o,t,n)},I=(e,t)=>{const n=e.dom;Ct(t,(o,r)=>{Ya(n,r,o)})},W=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o!==""||ir(e)?o:te(n,t)},te=(e,t)=>ts(e)?e.style.getPropertyValue(t):"",ne=(e,t)=>{const n=e.dom,o=te(n,t);return k.from(o).filter(r=>r.length>0)},ue=e=>{const t={},n=e.dom;if(ts(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);t[r]=n.style[r]}return t},$e=(e,t)=>{((n,o)=>{ts(n)&&n.style.removeProperty(o)})(e.dom,t),Ar(sr(e,"style").map(Gr),"")&&p(e,"style")},Re=(e,t)=>{ro(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},We=(e,t)=>{bo(e).fold(()=>{ro(e).each(n=>{at(n,t)})},n=>{Re(n,t)})},He=(e,t)=>{kn(e).fold(()=>{at(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},at=(e,t)=>{e.dom.appendChild(t.dom)},pt=(e,t)=>{Re(e,t),at(t,e)},ut=(e,t)=>{J(t,n=>{at(e,n)})},vt=e=>{e.dom.textContent="",J(St(e),t=>{Pe(t)})},Pe=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Ht=e=>{const t=St(e);var n,o;t.length>0&&(n=e,J(o=t,(r,s)=>{const a=s===0?n:o[s-1];We(a,r)})),Pe(e)},Cn=e=>ot(e,B),un=e=>e.dom.innerHTML,Nn=(e,t)=>{const n=_t(e).dom,o=B(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,St(B(i))})(t,n);ut(o,r),vt(e),at(e,o)},io=(e,t,n,o)=>((r,s,a,i,l)=>{const c=((d,f)=>m=>{d(m)&&f((b=>{const g=B(Ao(b).getOr(b.target)),v=()=>b.stopPropagation(),h=()=>b.preventDefault(),C=wn(h,v);return((S,E,A,N,R,M,P)=>({target:S,x:E,y:A,stop:N,prevent:R,kill:M,raw:P}))(g,b.clientX,b.clientY,v,h,C,b)})(m))})(a,i);return r.dom.addEventListener(s,c,l),{unbind:xe(Ro,r,s,c,l)}})(e,t,n,o,!1),Ro=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},qt=(e,t)=>({left:e,top:t,translate:(n,o)=>qt(e+n,t+o)}),vo=qt,Zn=(e,t)=>e!==void 0?e:t!==void 0?t:0,As=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?vo(n.offsetLeft,n.offsetTop):ir(e)?(o=>{const r=o.getBoundingClientRect();return vo(r.left,r.top)})(t):vo(0,0)},Ga=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return vo(n,o)},Xi=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},xc=(e,t)=>{Pn().browser.isSafari()&&bt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Ug=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),Hg=e=>{const t=e===void 0?window:e,n=t.document,o=Ga(B(n));return(r=>{const s=r===void 0?window:r;return Pn().browser.isFirefox()?k.none():k.from(s.visualViewport)})(t).fold(()=>{const r=t.document.documentElement,s=r.clientWidth,a=r.clientHeight;return Ug(o.left,o.top,s,a)},r=>Ug(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},qg=(e,t)=>{let n=[];return J(St(e),o=>{t(o)&&(n=n.concat([o])),n=n.concat(qg(o,t))}),n},Mn=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return No(r)?[]:ot(r.querySelectorAll(n),B)})(t,e),$g=(e,t,n)=>To(e,t,n).isSome(),dk=(e,t)=>((n,o)=>{const r=n.dom;return r.parentNode?((s,a)=>Gt(s.dom.childNodes,i=>a(B(i))).map(B))(B(r.parentNode),s=>!Ie(n,s)&&o(s)):k.none()})(e,t).isSome(),Nu=(e,t)=>Ka(e,t).isSome();class fn{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,o,r){if(t){if(!r&&t[n])return t[n];if(t!==this.rootNode){let s=t[o];if(s)return s;for(let a=t.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(t,n){if(t){const o=t.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n){for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s}return o}const r=t.parentNode;if(r&&r!==this.rootNode)return r}}}const Yi="\uFEFF",rn="\xA0",Au=e=>e===Yi,uk=/^[ \t\r\n]*$/,Qa=e=>uk.test(e),Wg=e=>e===`
`||e==="\r",Vg=(e,t=4,n=!0,o=!0)=>{const r=((i,l)=>l<=0?"":new Array(l+1).join(" "))(0,t),s=e.replace(/\t/g,r);return hn(s,(i,l)=>(c=>" \f	\v".indexOf(c)!==-1)(l)||l===rn?i.pcIsSpace||i.str===""&&n||i.str.length===s.length-1&&o||((c,d)=>d<c.length&&d>=0&&Wg(c[d]))(s,i.str.length+1)?{pcIsSpace:!1,str:i.str+rn}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Wg(l),str:i.str+l},{pcIsSpace:!1,str:""}).str},sa=e=>t=>!!t&&t.nodeType===e,wc=e=>!!e&&!Object.getPrototypeOf(e),ke=sa(1),Rr=e=>ke(e)&&Ss(B(e)),Gi=e=>{const t=e.toLowerCase();return n=>le(n)&&n.nodeName.toLowerCase()===t},dr=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Te(t,o)}return!1}},Sc=(e,t)=>{const n=t.toLowerCase().split(" ");return o=>{if(ke(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(e):null)===n[s])return!0}}return!1}},aa=e=>ke(e)&&e.hasAttribute("data-mce-bogus"),Or=e=>ke(e)&&e.tagName==="TABLE",Kg=e=>t=>!!(Rr(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),Tu=dr(["textarea","input"]),re=sa(3),fk=sa(4),mk=sa(7),Ts=sa(8),Qi=sa(9),Ru=sa(11),Ut=Gi("br"),Xg=Gi("img"),Yo=Kg("true"),Dt=Kg("false"),Ou=e=>Rr(e)&&e.isContentEditable&&le(e.parentElement)&&!e.parentElement.isContentEditable,Ec=dr(["td","th"]),pk=dr(["td","th","caption"]),Br=dr(["video","audio","object","embed"]),gk=Gi("li"),Bu=Gi("details"),hk=Gi("summary"),Yg={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},bk=e=>ke(e)&&e.hasAttribute("data-mce-bookmark"),vk=(e,t,n,o)=>re(e)&&!((r,s,a)=>Qa(r.data)&&!((i,l,c)=>{const d=B(l),f=B(i),m=c.getWhitespaceElements();return $g(f,b=>Fe(m,ft(b)),xe(Ie,d))})(r,s,a))(e,t,n)&&(!o.includeZwsp||!(r=>{for(const s of r)if(!Au(s))return!1;return!0})(e.data)),Du=(e,t,n,o)=>bt(o.isContent)&&o.isContent(t)||((r,s)=>ke(r)&&Fe(s.getNonEmptyElements(),r.nodeName))(t,e)||bk(t)||(r=>ke(r)&&r.nodeName==="A"&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id")))(t)||vk(t,n,e,o)||Dt(t)||Yo(t)&&(r=>so(B(r)).exists(s=>!Xo(s)))(t),ns=(e,t,n)=>{const o={...Yg,...n};if(o.checkRootAsContent&&Du(e,t,t,o))return!1;let r=t.firstChild,s=0;if(!r)return!0;const a=new fn(r,t);do{if(o.skipBogus&&ke(r)){const i=r.getAttribute("data-mce-bogus");if(i){r=a.next(i==="all");continue}}if(Ts(r))r=a.next(!0);else if(Ut(r))s++,r=a.next();else{if(Du(e,r,t,o))return!1;r=a.next()}}while(r);return s<=1},In=(e,t,n)=>ns(e,t.dom,{checkRootAsContent:!0,...n}),Gg=(e,t,n)=>Du(e,t,t,{includeZwsp:Yg.includeZwsp,...n}),mn=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},yk=e=>{const t=mn(k.none()),n=()=>t.get().each(o=>clearInterval(o));return{clear:()=>{n(),t.set(k.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:o=>{n(),t.set(k.some(setInterval(o,e)))}}},os=()=>{const e=(t=>{const n=mn(k.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(k.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(k.some(r))}}})(Ee);return{...e,on:t=>e.get().each(t)}},Qg=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},ia=e=>Qg(e)!=="html",Pu=e=>ia(e.nodeName),Jg=e=>Qg(e.nodeName),Ck=["svg","math"],kc="data-mce-block",Lu=e=>ot((t=>Ke(nn(t),n=>!/[A-Z]/.test(n)))(e),t=>{const n=CSS.escape(t);return`${n}:`+ot(Ck,o=>`not(${o} ${n})`).join(":")}).join(","),Zg=(e,t)=>le(t.querySelector(e))?(t.setAttribute(kc,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(kc),!1),eh=(e,t)=>{const n=Lu(e.getTransparentElements()),o=Lu(e.getBlockElements());return Ke(t.querySelectorAll(n),r=>Zg(o,r))},th=(e,t,n)=>{var o;const r=n?"lastChild":"firstChild";for(let s=t[r];s;s=s[r])if(ns(e,s,{checkRootAsContent:!0}))return void((o=s.parentNode)===null||o===void 0||o.removeChild(s))},xk=(e,t,n)=>{const o=e.getBlockElements(),r=B(t),s=i=>ft(i)in o,a=i=>Ie(i,r);J(Cn(n),i=>{To(i,s,a).each(l=>{const c=(d=>Ke(St(d),f=>s(f)&&!e.isValidChild(ft(l),ft(f))))(i);if(c.length>0){const d=so(l);J(c,f=>{To(f,s,a).each(m=>{((b,g,v)=>{const h=document.createRange(),C=g.parentNode;if(C){h.setStartBefore(g),h.setEndBefore(v);const S=h.extractContents();th(b,S,!0),h.setStartAfter(v),h.setEndAfter(g);const E=h.extractContents();th(b,E,!1),ns(b,S,{checkRootAsContent:!0})||C.insertBefore(S,g),ns(b,v,{checkRootAsContent:!0})||C.insertBefore(v,g),ns(b,E,{checkRootAsContent:!0})||C.insertBefore(E,g),C.removeChild(g)}})(e,m.dom,f.dom)})}),d.each(f=>eh(e,f.dom))}})})},Mu=(e,t)=>{const n=eh(e,t);xk(e,t,n),((o,r,s)=>{J([...s,...la(o,r)?[r]:[]],a=>J(Mn(B(a),a.nodeName.toLowerCase()),i=>{Sk(o,i.dom)&&Ht(i)}))})(e,t,n)},wk=(e,t)=>{if(ju(e,t)){const n=Lu(e.getBlockElements());Zg(n,t)}},Iu=e=>e.hasAttribute(kc),Fu=(e,t)=>Fe(e.getTransparentElements(),t),ju=(e,t)=>ke(t)&&Fu(e,t.nodeName),la=(e,t)=>ju(e,t)&&Iu(t),Sk=(e,t)=>ju(e,t)&&!Iu(t),zu=(e,t)=>t.type===1&&Fu(e,t.name)&&Ae(t.attr(kc)),Ek=Pn().browser,nh=e=>Gt(e,Hn),oh=(e,t)=>e.children&&Te(e.children,t),rh=(e,t={})=>{let n=0;const o={},r=B(e),s=Mt(r),a=f=>{at(Yt(r),f)},i=f=>{const m=Yt(r);es(m,"#"+f).each(Pe)},l=f=>Ot(o,f).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=f=>new Promise((m,b)=>{let g;const v=ce._addCacheSuffix(f),h=l(v);o[v]=h,h.count++;const C=(N,R)=>{J(N,Yn),h.status=R,h.passed=[],h.failed=[],g&&(g.onload=null,g.onerror=null,g=null)},S=()=>C(h.passed,2),E=()=>C(h.failed,3);if(m&&h.passed.push(m),b&&h.failed.push(b),h.status===1)return;if(h.status===2)return void S();if(h.status===3)return void E();h.status=1;const A=De("link",s.dom);rr(A,{rel:"stylesheet",type:"text/css",id:h.id}),t.contentCssCors&&Jt(A,"crossOrigin","anonymous"),t.referrerPolicy&&Jt(A,"referrerpolicy",t.referrerPolicy),g=A.dom,g.onload=S,g.onerror=E,a(A),Jt(A,"href",v)}),d=f=>{const m=ce._addCacheSuffix(f);Ot(o,m).each(b=>{--b.count==0&&(delete o[m],i(b.id))})};return{load:c,loadRawCss:(f,m)=>{const b=l(f);o[f]=b,b.count++;const g=De("style",s.dom);rr(g,{rel:"stylesheet",type:"text/css",id:b.id,"data-mce-key":f}),g.dom.innerHTML=m,a(g)},loadAll:f=>Promise.allSettled(ot(f,m=>c(m).then(fe(m)))).then(m=>{const b=qo(m,g=>g.status==="fulfilled");return b.fail.length>0?Promise.reject(ot(b.fail,g=>g.reason)):ot(b.pass,g=>g.value)}),unload:d,unloadRawCss:f=>{Ot(o,f).each(m=>{--m.count==0&&(delete o[f],i(m.id))})},unloadAll:f=>{J(f,m=>{d(m)})},_setReferrerPolicy:f=>{t.referrerPolicy=f},_setContentCssCors:f=>{t.contentCssCors=f}}},sh=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const o=jt(t).dom;return k.from(e.get(o)).getOrThunk(()=>{const r=rh(o,n);return e.set(o,r),r})}}})(),ah=(e,t)=>le(e)&&(Gg(t,e)||t.isInline(e.nodeName.toLowerCase())),ih=e=>(t=>t.nodeName.toLowerCase()==="span")(e)&&e.getAttribute("data-mce-type")==="bookmark",Uu=(e,t,n,o)=>{var r;const s=o||t;if(ke(t)&&ih(t))return t;const a=t.childNodes;for(let i=a.length-1;i>=0;i--)Uu(e,a[i],n,s);if(ke(t)){const i=t.childNodes;i.length===1&&ih(i[0])&&((r=t.parentNode)===null||r===void 0||r.insertBefore(i[0],t))}return(i=>Ru(i)||Qi(i))(t)||Gg(n,t)||(i=>!!ke(i)&&i.childNodes.length>0)(t)||((i,l,c)=>re(i)&&i.data.length>0&&((d,f,m)=>{const b=new fn(d,f).prev(!1),g=new fn(d,f).next(!1),v=Ft(b)||ah(b,m),h=Ft(g)||ah(g,m);return v&&h})(i,l,c))(t,s,n)||e.remove(t),t},kk=ce.makeMap,_c=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Nc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_k=/[<>&\"\']/g,Nk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ak={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},ca={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Tk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},lh=(e,t)=>{const n={};if(e){const o=e.split(",");t=t||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],t));if(!ca[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},Hu=lh("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ch=(e,t)=>e.replace(t?_c:Nc,n=>ca[n]||n),dh=(e,t)=>e.replace(t?_c:Nc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":ca[n]||"&#"+n.charCodeAt(0)+";"),qu=(e,t,n)=>{const o=n||Hu;return e.replace(t?_c:Nc,r=>ca[r]||o[r]||r)},da={encodeRaw:ch,encodeAllRaw:e=>(""+e).replace(_k,t=>ca[t]||t),encodeNumeric:dh,encodeNamed:qu,getEncodeFunc:(e,t)=>{const n=lh(t)||Hu,o=kk(e.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?_c:Nc,a=>ca[a]!==void 0?ca[a]:n[a]!==void 0?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):o.named?t?(r,s)=>qu(r,s,n):qu:o.numeric?dh:ch},decode:e=>e.replace(Nk,(t,n)=>n?(n=n.charAt(0).toLowerCase()==="x"?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):Ak[n]||String.fromCharCode(n):Tk[t]||Hu[t]||(o=>{const r=De("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(t))},An=(e,t)=>(e=ce.trim(e))?e.split(t||" "):[],uh=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),fh=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),mh=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const o=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:o}},$u=e=>{const{blockContent:t,phrasingContent:n,flowContent:o}=mh(e),r=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:r(t),phrasingContent:r(n),flowContent:r(o)})},Rk={html4:Vo(()=>$u("html4")),html5:Vo(()=>$u("html5")),"html5-strict":Vo(()=>$u("html5-strict"))},ph=(e,t)=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Rk[e]();return t==="blocks"?k.some(n):t==="phrasing"?k.some(o):t==="flow"?k.some(r):k.none()},Wu=e=>k.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map(t=>({preset:t[1]==="@",name:t[2]})),Ac={},Ji=ce.makeMap,ur=ce.each,gh=ce.extend,hh=ce.explode,bh=(e,t={})=>{const n=Ji(e," ",Ji(e.toUpperCase()," "));return gh(n,t)},vh=e=>bh("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Vu=(e,t)=>{if(e){const n={};return Ae(e)&&(e={"*":e}),ur(e,(o,r)=>{n[r]=n[r.toUpperCase()]=t==="map"?Ji(o,/[, ]/):hh(o,/[, ]/)}),n}},Rs=(e={})=>{var t;const n={},o={};let r=[];const s={},a={},i=(ve,tt,ct)=>{const Ye=e[ve];if(Ye)return Ji(Ye,/[, ]/,Ji(Ye.toUpperCase(),/[, ]/));{let ht=Ac[ve];return ht||(ht=bh(tt,ct),Ac[ve]=ht),ht}},l=(t=e.schema)!==null&&t!==void 0?t:"html5",c=(ve=>{const tt=fh(ve),{phrasingContent:ct,flowContent:Ye}=mh(ve),ht={},Tt=(Nt,At,Vt)=>{ht[Nt]={attributes:Dn(At,fe({})),attributesOrder:At,children:Dn(Vt,fe({}))}},he=(Nt,At="",Vt="")=>{const xn=An(Vt),br=An(Nt);let zn=br.length;const Uo=[...tt,...An(At)];for(;zn--;)Tt(br[zn],Uo.slice(),xn)},Ue=(Nt,At)=>{const Vt=An(Nt),xn=An(At);let br=Vt.length;for(;br--;){const zn=ht[Vt[br]];for(let Uo=0,an=xn.length;Uo<an;Uo++)zn.attributes[xn[Uo]]={},zn.attributesOrder.push(xn[Uo])}};return ve!=="html5-strict"&&(J(An("acronym applet basefont big font strike tt"),Nt=>{he(Nt,"",ct)}),J(An("center dir isindex noframes"),Nt=>{he(Nt,"",Ye)})),he("html","manifest","head body"),he("head","","base command link meta noscript script style title"),he("title hr noscript br"),he("base","href target"),he("link","href rel media hreflang type sizes hreflang"),he("meta","name http-equiv content charset"),he("style","media type scoped"),he("script","src async defer type charset"),he("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Ye),he("dd div","",Ye),he("address dt caption","",ve==="html4"?ct:Ye),he("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",ct),he("blockquote","cite",Ye),he("ol","reversed start type","li"),he("ul","","li"),he("li","value",Ye),he("dl","","dt dd"),he("a","href target rel media hreflang type",ve==="html4"?ct:Ye),he("q","cite",ct),he("ins del","cite datetime",Ye),he("img","src sizes srcset alt usemap ismap width height"),he("iframe","src name width height",Ye),he("embed","src type width height"),he("object","data type typemustmatch name usemap form width height",[Ye,"param"].join(" ")),he("param","name value"),he("map","name",[Ye,"area"].join(" ")),he("area","alt coords shape href target rel media hreflang type"),he("table","border","caption colgroup thead tfoot tbody tr"+(ve==="html4"?" col":"")),he("colgroup","span","col"),he("col","span"),he("tbody thead tfoot","","tr"),he("tr","","td th"),he("td","colspan rowspan headers",Ye),he("th","colspan rowspan headers scope abbr",Ye),he("form","accept-charset action autocomplete enctype method name novalidate target",Ye),he("fieldset","disabled form name",[Ye,"legend"].join(" ")),he("label","form for",ct),he("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),he("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",ve==="html4"?Ye:ct),he("select","disabled form multiple name required size","option optgroup"),he("optgroup","disabled label","option"),he("option","disabled label selected value"),he("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),he("menu","type label",[Ye,"li"].join(" ")),he("noscript","",Ye),ve!=="html4"&&(he("wbr"),he("ruby","",[ct,"rt rp"].join(" ")),he("figcaption","",Ye),he("mark rt rp bdi","",ct),he("summary","",[ct,"h1 h2 h3 h4 h5 h6"].join(" ")),he("canvas","width height",Ye),he("data","value",ct),he("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Ye,"track source"].join(" ")),he("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Ye,"track source"].join(" ")),he("picture","","img source"),he("source","src srcset type media sizes"),he("track","kind src srclang label default"),he("datalist","",[ct,"option"].join(" ")),he("article section nav aside main header footer","",Ye),he("hgroup","","h1 h2 h3 h4 h5 h6"),he("figure","",[Ye,"figcaption"].join(" ")),he("time","datetime",ct),he("dialog","open",Ye),he("command","type label icon disabled checked radiogroup command"),he("output","for form name",ct),he("progress","value max",ct),he("meter","value min max low high optimum",ct),he("details","open",[Ye,"summary"].join(" ")),he("keygen","autofocus challenge disabled form keytype name"),Tt("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),ve!=="html5-strict"&&(Ue("script","language xml:space"),Ue("style","xml:space"),Ue("object","declare classid code codebase codetype archive standby align border hspace vspace"),Ue("embed","align name hspace vspace"),Ue("param","valuetype type"),Ue("a","charset name rev shape coords"),Ue("br","clear"),Ue("applet","codebase archive code object alt name width height align hspace vspace"),Ue("img","name longdesc align border hspace vspace"),Ue("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Ue("font basefont","size color face"),Ue("input","usemap align"),Ue("select"),Ue("textarea"),Ue("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Ue("ul","type compact"),Ue("li","type"),Ue("ol dl menu dir","compact"),Ue("pre","width xml:space"),Ue("hr","align noshade size width"),Ue("isindex","prompt"),Ue("table","summary width frame rules cellspacing cellpadding align bgcolor"),Ue("col","width align char charoff valign"),Ue("colgroup","width align char charoff valign"),Ue("thead","align char charoff valign"),Ue("tr","align char charoff valign bgcolor"),Ue("th","axis align char charoff valign nowrap bgcolor width height"),Ue("form","accept"),Ue("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Ue("tfoot","align char charoff valign"),Ue("tbody","align char charoff valign"),Ue("area","nohref"),Ue("body","background bgcolor text link vlink alink")),ve!=="html4"&&(Ue("input button select textarea","autofocus"),Ue("input textarea","placeholder"),Ue("a","download"),Ue("link script img","crossorigin"),Ue("img","loading"),Ue("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),ve!=="html4"&&J([ht.video,ht.audio],Nt=>{delete Nt.children.audio,delete Nt.children.video}),J(An("a form meter progress dfn"),Nt=>{ht[Nt]&&delete ht[Nt].children[Nt]}),delete ht.caption.children.table,delete ht.script,ht})(l);e.verify_html===!1&&(e.valid_elements="*[*]");const d=Vu(e.valid_styles),f=Vu(e.invalid_styles,"map"),m=Vu(e.valid_classes,"map"),b=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),C="td th iframe video audio object script code",S=i("non_empty_elements",C+" pre svg textarea summary",v),E=i("move_caret_before_on_enter_elements",C+" table",v),A="h1 h2 h3 h4 h5 h6",N=i("text_block_elements",A+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),R=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",N),M=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),P=i("transparent_elements","a ins del canvas map"),z=i("wrap_block_elements","pre "+A);ur("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ve=>{a[ve]=new RegExp("</"+ve+"[^>]*>","gi")});const V=ve=>{const tt=k.from(n["@"]),ct=/[*?+]/;J(((Ye,ht)=>{const Tt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Qt(An(ht,","),he=>{const Ue=Tt.exec(he);if(Ue){const Nt=Ue[1],At=Ue[2],Vt=Ue[3],xn=Ue[4],br=Ue[5],zn={attributes:{},attributesOrder:[]};if(Ye.each(Uo=>((an,Fa)=>{Ct(an.attributes,($s,Hr)=>{Fa.attributes[Hr]=$s}),Fa.attributesOrder.push(...an.attributesOrder)})(Uo,zn)),Nt==="#"?zn.paddEmpty=!0:Nt==="-"&&(zn.removeEmpty=!0),xn==="!"&&(zn.removeEmptyAttrs=!0),br&&((Uo,an)=>{const Fa=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,$s=/[*?+]/,{attributes:Hr,attributesOrder:Ho}=an;J(An(Uo,"|"),Ws=>{const us=Fa.exec(Ws);if(us){const qr={},hu=us[1],mo=us[2].replace(/[\\:]:/g,":"),fs=us[3],ja=us[4];if(hu==="!"&&(an.attributesRequired=an.attributesRequired||[],an.attributesRequired.push(mo),qr.required=!0),hu==="-")return delete Hr[mo],void Ho.splice(ce.inArray(Ho,mo),1);if(fs&&(fs==="="?(an.attributesDefault=an.attributesDefault||[],an.attributesDefault.push({name:mo,value:ja}),qr.defaultValue=ja):fs==="~"?(an.attributesForced=an.attributesForced||[],an.attributesForced.push({name:mo,value:ja}),qr.forcedValue=ja):fs==="<"&&(qr.validValues=ce.makeMap(ja,"?"))),$s.test(mo)){const Vs=qr;an.attributePatterns=an.attributePatterns||[],Vs.pattern=uh(mo),an.attributePatterns.push(Vs)}else Hr[mo]||Ho.push(mo),Hr[mo]=qr}})})(br,zn),Vt&&(zn.outputName=At),At==="@"){if(!Ye.isNone())return[];Ye=k.some(zn)}return[Vt?{name:At,element:zn,aliasName:Vt}:{name:At,element:zn}]}return[]})})(tt,ve??""),({name:Ye,element:ht,aliasName:Tt})=>{if(Tt&&(n[Tt]=ht),ct.test(Ye)){const he=ht;he.pattern=uh(Ye),r.push(he)}else n[Ye]=ht})},D=ve=>{r=[],J(nn(n),tt=>{delete n[tt]}),V(ve)},L=(ve,tt)=>{var ct,Ye;delete Ac.text_block_elements,delete Ac.block_elements;const ht=!!tt.extends&&!Pt(tt.extends),Tt=tt.extends;if(o[ve]=Tt?o[Tt]:{},s[ve]=Tt??ve,S[ve.toUpperCase()]={},S[ve]={},ht||(R[ve.toUpperCase()]={},R[ve]={}),Tt&&!n[ve]&&n[Tt]){const he=(Ue=>{const Nt=At=>se(At)?ot(At,Nt):(Vt=>Xe(Vt)&&Vt.source&&Object.prototype.toString.call(Vt)==="[object RegExp]")(At)?new RegExp(At.source,At.flags):Xe(At)?gs(At,Nt):At;return Nt(Ue)})(n[Tt]);delete he.removeEmptyAttrs,delete he.removeEmpty,n[ve]=he}else n[ve]={attributesOrder:[],attributes:{}};if(se(tt.attributes)){const he=Nt=>{Ue.attributesOrder.push(Nt),Ue.attributes[Nt]={}},Ue=(ct=n[ve])!==null&&ct!==void 0?ct:{};delete Ue.attributesDefault,delete Ue.attributesForced,delete Ue.attributePatterns,delete Ue.attributesRequired,Ue.attributesOrder=[],Ue.attributes={},J(tt.attributes,Nt=>{const At=fh(l);Wu(Nt).each(({preset:Vt,name:xn})=>{Vt?xn==="global"&&J(At,he):he(xn)})}),n[ve]=Ue}if(gn(tt.padEmpty)){const he=(Ye=n[ve])!==null&&Ye!==void 0?Ye:{};he.paddEmpty=tt.padEmpty,n[ve]=he}if(se(tt.children)){const he={},Ue=At=>{he[At]={}},Nt=At=>{ph(l,At).each(Vt=>{J(Vt,Ue)})};J(tt.children,At=>{Wu(At).each(({preset:Vt,name:xn})=>{Vt?Nt(xn):Ue(xn)})}),o[ve]=he}Tt&&Ct(o,(he,Ue)=>{he[Tt]&&(o[Ue]=he=gh({},o[Ue]),he[ve]=he[Tt])})},j=ve=>{Xe(ve)?Ct(ve,(tt,ct)=>L(ct,tt)):Ae(ve)&&(tt=>{J((ct=>{const Ye=/^(~)?(.+)$/;return Qt(An(ct,","),ht=>{const Tt=Ye.exec(ht);return Tt?[{cloneName:Tt[1]==="~"?"span":"div",name:Tt[2]}]:[]})})(tt??""),({name:ct,cloneName:Ye})=>{L(ct,{extends:Ye})})})(ve)},Q=ve=>{J((tt=>{const ct=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Qt(An(tt,","),Ye=>{const ht=ct.exec(Ye);if(ht){const Tt=ht[1];return[{operation:Tt?(Ue=>Ue==="-"?"remove":"add")(Tt):"replace",name:ht[2],validChildren:Qt(An(ht[3],"|"),Ue=>Wu(Ue).toArray())}]}return[]})})(ve??""),({operation:tt,name:ct,validChildren:Ye})=>{const ht=tt==="replace"?{"#comment":{}}:o[ct],Tt=he=>{tt==="remove"?delete ht[he]:ht[he]={}};J(Ye,({preset:he,name:Ue})=>{he?(Nt=>{ph(l,Nt).each(At=>{J(At,Tt)})})(Ue):Tt(Ue)}),o[ct]=ht})},ie=ve=>{const tt=n[ve];if(tt)return tt;let ct=r.length;for(;ct--;){const Ye=r[ct];if(Ye.pattern.test(ve))return Ye}},oe=fe(d),we=fe(f),Ne=fe(m),Oe=fe(h),Le=fe(R),ge=fe(N),Se=fe(M),F=fe(Object.seal(v)),U=fe(g),Y=fe(S),X=fe(E),pe=fe(b),de=fe(P),Be=fe(z),je=fe(Object.seal(a)),Ze=(ve,tt)=>{const ct=ie(ve);if(ct){if(!tt)return!0;{if(ct.attributes[tt])return!0;const Ye=ct.attributePatterns;if(Ye){let ht=Ye.length;for(;ht--;)if(Ye[ht].pattern.test(tt))return!0}}}return!1},Pt=ve=>Fe(Le(),ve),Lt=ve=>!Kt(ve,"#")&&Ze(ve)&&!Pt(ve),xo=fe(s);return e.valid_elements?(D(e.valid_elements),ur(c,(ve,tt)=>{o[tt]=ve.children})):(ur(c,(ve,tt)=>{n[tt]={attributes:ve.attributes,attributesOrder:ve.attributesOrder},o[tt]=ve.children}),ur(An("strong/b em/i"),ve=>{const tt=An(ve,"/");n[tt[1]].outputName=tt[0]}),ur(M,(ve,tt)=>{n[tt]&&(e.padd_empty_block_inline_children&&(n[tt].paddInEmptyBlock=!0),n[tt].removeEmpty=!0)}),ur(An("ol ul blockquote a table tbody"),ve=>{n[ve]&&(n[ve].removeEmpty=!0)}),ur(An("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),ve=>{n[ve]&&(n[ve].paddEmpty=!0)}),ur(An("span"),ve=>{n[ve].removeEmptyAttrs=!0})),delete n.svg,j(e.custom_elements),Q(e.valid_children),V(e.extended_valid_elements),Q("+ol[ul|ol],+ul[ul|ol]"),ur({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ve,tt)=>{n[tt]&&(n[tt].parentsRequired=An(ve))}),e.invalid_elements&&ur(hh(e.invalid_elements),ve=>{n[ve]&&delete n[ve]}),ie("span")||V("span[!data-mce-type|*]"),{type:l,children:o,elements:n,getValidStyles:oe,getValidClasses:Ne,getBlockElements:Le,getInvalidStyles:we,getVoidElements:F,getTextBlockElements:ge,getTextInlineElements:Se,getBoolAttrs:Oe,getElementRule:ie,getSelfClosingElements:U,getNonEmptyElements:Y,getMoveCaretBeforeOnEnterElements:X,getWhitespaceElements:pe,getTransparentElements:de,getSpecialElements:je,isValidChild:(ve,tt)=>{const ct=o[ve.toLowerCase()];return!(!ct||!ct[tt.toLowerCase()])},isValid:Ze,isBlock:Pt,isInline:Lt,isWrapper:ve=>Fe(Be(),ve)||Lt(ve),getCustomElements:xo,addValidElements:V,setValidElements:D,addCustomElements:j,addValidChildren:Q}},Ku=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},Ok=e=>(t=>{return{value:(n=t,Yr(n,"#").toUpperCase())};var n})(Ku(e.red)+Ku(e.green)+Ku(e.blue)),yh=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ch=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,xh=(e,t,n,o)=>((r,s,a,i)=>({red:r,green:s,blue:a,alpha:i}))(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(o)),wh=e=>{const t=yh.exec(e);if(t!==null)return k.some(xh(t[1],t[2],t[3],"1"));const n=Ch.exec(e);return n!==null?k.some(xh(n[1],n[2],n[3],n[4])):k.none()},Bk=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Zi=e=>wh(e).map(Ok).map(t=>"#"+t.value).getOr(e),Xu=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;const l=Yi;t&&(a=t.getValidStyles(),i=t.getInvalidStyles());const c=`\\" \\' \\; \\: ; : \uFEFF`.split(" ");for(let f=0;f<c.length;f++)s[c[f]]=l+f,s[l+f]=c[f];const d={parse:f=>{const m={};let b=!1;const g=e.url_converter,v=e.url_converter_scope||d,h=(D,L,j)=>{const Q=m[D+"-top"+L];if(!Q)return;const ie=m[D+"-right"+L];if(!ie)return;const oe=m[D+"-bottom"+L];if(!oe)return;const we=m[D+"-left"+L];if(!we)return;const Ne=[Q,ie,oe,we];let Oe=Ne.length-1;for(;Oe--&&Ne[Oe]===Ne[Oe+1];);Oe>-1&&j||(m[D+L]=Oe===-1?Ne[0]:Ne.join(" "),delete m[D+"-top"+L],delete m[D+"-right"+L],delete m[D+"-bottom"+L],delete m[D+"-left"+L])},C=D=>{const L=m[D];if(!L)return;const j=L.indexOf(",")>-1?[L]:L.split(" ");let Q=j.length;for(;Q--;)if(j[Q]!==j[0])return!1;return m[D]=j[0],!0},S=D=>(b=!0,s[D]),E=(D,L)=>(b&&(D=D.replace(/\uFEFF[0-9]/g,j=>s[j])),L||(D=D.replace(/\\([\'\";:])/g,"$1")),D),A=D=>String.fromCharCode(parseInt(D.slice(1),16)),N=D=>D.replace(/\\[0-9a-f]+/gi,A),R=(D,L,j,Q,ie,oe)=>{if(ie=ie||oe)return"'"+(ie=E(ie)).replace(/\'/g,"\\'")+"'";if(L=E(L||j||Q||""),!e.allow_script_urls){const we=L.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(we)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(we))return""}return g&&(L=g.call(v,L,"style")),"url('"+L.replace(/\'/g,"\\'")+"')"};if(f){let D;for(f=(f=f.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,S).replace(/\"[^\"]+\"|\'[^\']+\'/g,L=>L.replace(/[;:]/g,S));D=o.exec(f);){o.lastIndex=D.index+D[0].length;let L=D[1].replace(r,"").toLowerCase(),j=D[2].replace(r,"");if(L&&j){if(L=N(L),j=N(j),L.indexOf(l)!==-1||L.indexOf('"')!==-1||!e.allow_script_urls&&(L==="behavior"||/expression\s*\(|\/\*|\*\//.test(j)))continue;L==="font-weight"&&j==="700"?j="bold":L!=="color"&&L!=="background-color"||(j=j.toLowerCase()),V=j,(yh.test(V)?"rgb":Ch.test(V)?"rgba":"other")=="rgb"&&wh(j).each(Q=>{j=Zi(Bk(Q)).toLowerCase()}),j=j.replace(n,R),m[L]=b?E(j,!0):j}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),P="border-style",z="border-color",C(M="border-width")&&C(P)&&C(z)&&(m.border=m[M]+" "+m[P]+" "+m[z],delete m[M],delete m[P],delete m[z]),m.border==="medium none"&&delete m.border,m["border-image"]==="none"&&delete m["border-image"]}var M,P,z,V;return m},serialize:(f,m)=>{let b="";const g=(v,h)=>{const C=h[v];if(C)for(let S=0,E=C.length;S<E;S++){const A=C[S],N=f[A];N&&(b+=(b.length>0?" ":"")+A+": "+N+";")}};return m&&a?(g("*",a),g(m,a)):Ct(f,(v,h)=>{v&&((C,S)=>{if(!i||!S)return!0;let E=i["*"];return!(E&&E[C]||(E=i[S],E&&E[C]))})(h,m)&&(b+=(b.length>0?" ":"")+h+": "+v+";")}),b}};return d},Dk={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Sh=(e,t)=>{const n=t??{};for(const o in e)Fe(Dk,o)||(n[o]=e[o]);return le(e.composedPath)&&(n.composedPath=()=>e.composedPath()),le(e.getModifierState)&&(n.getModifierState=o=>e.getModifierState(o)),le(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Yu=(e,t,n,o)=>{var r;const s=Sh(t,o);return s.type=e,wt(s.target)&&(s.target=(r=s.srcElement)!==null&&r!==void 0?r:n),(a=>wt(a.preventDefault)||(i=>i instanceof Event||bt(i.initEvent))(a))(t)&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=zt,bt(t.preventDefault)&&t.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=zt,bt(t.stopPropagation)&&t.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=zt,s.stopPropagation()},(a=>a.isDefaultPrevented===zt||a.isDefaultPrevented===yt)(s)||(s.isDefaultPrevented=s.defaultPrevented===!0?zt:yt,s.isPropagationStopped=s.cancelBubble===!0?zt:yt,s.isImmediatePropagationStopped=yt)),s},Pk=/^(?:mouse|contextmenu)|click/,Gu=(e,t,n,o)=>{e.addEventListener(t,n,o||!1)},Tc=(e,t,n,o)=>{e.removeEventListener(t,n,o||!1)},el=(e,t)=>{const n=Yu(e.type,e,document,t);if((o=>le(o)&&Pk.test(o.type))(e)&&Ft(e.pageX)&&!Ft(e.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=e.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=e.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}return n},Lk=(e,t,n)=>{const o=e.document,r={type:"ready"};if(n.domLoaded)return void t(r);const s=()=>{Tc(e,"DOMContentLoaded",s),Tc(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(r)),e=null};o.readyState==="complete"||o.readyState==="interactive"&&o.body?s():Gu(e,"DOMContentLoaded",s),n.domLoaded||Gu(e,"load",s)};class ua{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,o,r){const s=this;let a;const i=window,l=m=>{s.executeHandlers(el(m||i.event),c)};if(!t||re(t)||Ts(t))return o;let c;t[s.expando]?c=t[s.expando]:(c=s.count++,t[s.expando]=c,s.events[c]={}),r=r||t;const d=n.split(" ");let f=d.length;for(;f--;){let m=d[f],b=l,g=!1,v=!1;m==="DOMContentLoaded"&&(m="ready"),s.domLoaded&&m==="ready"&&t.readyState==="complete"?o.call(r,el({type:m})):(s.hasFocusIn||m!=="focusin"&&m!=="focusout"||(g=!0,v=m==="focusin"?"focus":"blur",b=h=>{const C=el(h||i.event);C.type=C.type==="focus"?"focusin":"focusout",s.executeHandlers(C,c)}),a=s.events[c][m],a?m==="ready"&&s.domLoaded?o(el({type:m})):a.push({func:o,scope:r}):(s.events[c][m]=a=[{func:o,scope:r}],a.fakeName=v,a.capture=g,a.nativeHandler=b,m==="ready"?Lk(t,b,s):Gu(t,v||m,b,g)))}return t=a=null,o}unbind(t,n,o){if(!t||re(t)||Ts(t))return this;const r=t[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(o){let d=c.length;for(;d--;)if(c[d].func===o){const f=c.nativeHandler,m=c.fakeName,b=c.capture,g=c.slice(0,d).concat(c.slice(d+1));g.nativeHandler=f,g.fakeName=m,g.capture=b,s[l]=g}}o&&c.length!==0||(delete s[l],Tc(t,c.fakeName||l,c.nativeHandler,c.capture))}}}else Ct(s,(a,i)=>{Tc(t,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(Fe(s,a))return this;delete this.events[r];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,o){return this.dispatch(t,n,o)}dispatch(t,n,o){if(!t||re(t)||Ts(t))return this;const r=el({type:n,target:t},o);do{const s=t[this.expando];s&&this.executeHandlers(r,s),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!r.isPropagationStopped());return this}clean(t){if(!t||re(t)||Ts(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let o=n.length;for(;o--;)(t=n[o])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const o=this.events[n],r=o&&o[t.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&i.func.call(i.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ua.Event=new ua;const Qu=ce.each,Mk=ce.grep,Ju="data-mce-style",Ik=ce.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),tl=(e,t,n)=>{wt(n)||n===""?p(e,t):Jt(e,t,n)},Eh=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Ja=(e,t)=>{let n=0;if(e)for(let o=e.nodeType,r=e.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!t||!re(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},kh=(e,t)=>{const n=Jn(t,"style"),o=e.serialize(e.parse(n),ft(t));tl(t,Ju,o)},_h=(e,t,n)=>{const o=Eh(t);wt(n)||n===""?$e(e,o):Ki(e,o,((r,s)=>x(r)?Fe(Ik,s)?r+"":r+"px":r)(n,o))},Bt=(e,t={})=>{const n={},o=window,r={};let s=0;const a=sh.forElement(B(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),i=[],l=t.schema?t.schema:Rs({}),c=Xu({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new ua:ua.Event,f=l.getBlockElements(),m=F=>F&&e&&Ae(F)?e.getElementById(F):F,b=F=>{const U=m(F);return le(U)?B(U):null},g=(F,U,Y="")=>{let X;const pe=b(F);if(le(pe)&&Hn(pe)){const de=Se[U];X=de&&de.get?de.get(pe.dom,U):Jn(pe,U)}return le(X)?X:Y},v=F=>{const U=m(F);return wt(U)?[]:U.attributes},h=(F,U,Y)=>{P(F,X=>{if(ke(X)){const pe=B(X),de=Y===""?null:Y,Be=Jn(pe,U),je=Se[U];je&&je.set?je.set(pe.dom,de,U):tl(pe,U,de),Be!==de&&t.onSetAttrib&&t.onSetAttrib({attrElm:pe.dom,attrName:U,attrValue:de})}})},C=()=>t.root_element||e.body,S=(F,U)=>((Y,X,pe)=>{let de=0,Be=0;const je=Y.ownerDocument;if(pe=pe||Y,X){if(pe===Y&&X.getBoundingClientRect&&W(B(Y),"position")==="static"){const Pt=X.getBoundingClientRect();return de=Pt.left+(je.documentElement.scrollLeft||Y.scrollLeft)-je.documentElement.clientLeft,Be=Pt.top+(je.documentElement.scrollTop||Y.scrollTop)-je.documentElement.clientTop,{x:de,y:Be}}let Ze=X;for(;Ze&&Ze!==pe&&Ze.nodeType&&!oh(Ze,pe);){const Pt=Ze;de+=Pt.offsetLeft||0,Be+=Pt.offsetTop||0,Ze=Pt.offsetParent}for(Ze=X.parentNode;Ze&&Ze!==pe&&Ze.nodeType&&!oh(Ze,pe);)de-=Ze.scrollLeft||0,Be-=Ze.scrollTop||0,Ze=Ze.parentNode;Be+=(Pt=>Ek.isFirefox()&&ft(Pt)==="table"?nh(St(Pt)).filter(Lt=>ft(Lt)==="caption").bind(Lt=>nh(ao(Lt)).map(xo=>{const ve=xo.dom.offsetTop,tt=Lt.dom.offsetTop,ct=Lt.dom.offsetHeight;return ve<=tt?-ct:0})).getOr(0):0)(B(X))}return{x:de,y:Be}})(e.body,m(F),U),E=(F,U,Y)=>{const X=m(F);var pe;if(!wt(X)&&(Rr(X)||ke(pe=X)&&pe.namespaceURI==="http://www.w3.org/2000/svg"))return Y?W(B(X),Eh(U)):((U=U.replace(/-(\D)/g,(de,Be)=>Be.toUpperCase()))==="float"&&(U="cssFloat"),X.style?X.style[U]:void 0)},A=F=>{const U=m(F);if(!U)return{w:0,h:0};let Y=E(U,"width"),X=E(U,"height");return Y&&Y.indexOf("px")!==-1||(Y="0"),X&&X.indexOf("px")!==-1||(X="0"),{w:parseInt(Y,10)||U.offsetWidth||U.clientWidth,h:parseInt(X,10)||U.offsetHeight||U.clientHeight}},N=(F,U)=>{if(!F)return!1;const Y=se(F)?F:[F];return kt(Y,X=>on(B(X),U))},R=(F,U,Y,X)=>{const pe=[];let de=m(F);X=X===void 0;const Be=Y||(C().nodeName!=="BODY"?C().parentNode:null);if(Ae(U))if(U==="*")U=ke;else{const je=U;U=Ze=>N(Ze,je)}for(;de&&!(de===Be||wt(de.nodeType)||Qi(de)||Ru(de));){if(!U||U(de)){if(!X)return[de];pe.push(de)}de=de.parentNode}return X?pe:null},M=(F,U,Y)=>{let X=U;if(F){Ae(U)&&(X=pe=>N(pe,U));for(let pe=F[Y];pe;pe=pe[Y])if(bt(X)&&X(pe))return pe}return null},P=function(F,U,Y){const X=Y??this;if(se(F)){const pe=[];return Qu(F,(de,Be)=>{const je=m(de);je&&pe.push(U.call(X,je,Be))}),pe}{const pe=m(F);return!!pe&&U.call(X,pe)}},z=(F,U)=>{P(F,Y=>{Ct(U,(X,pe)=>{h(Y,pe,X)})})},V=(F,U)=>{P(F,Y=>{const X=B(Y);Nn(X,U)})},D=(F,U,Y,X,pe)=>P(F,de=>{const Be=Ae(U)?e.createElement(U):U;return le(Y)&&z(Be,Y),X&&(!Ae(X)&&X.nodeType?Be.appendChild(X):Ae(X)&&V(Be,X)),pe?Be:de.appendChild(Be)}),L=(F,U,Y)=>D(e.createElement(F),F,U,Y,!0),j=da.encodeAllRaw,Q=(F,U)=>P(F,Y=>{const X=B(Y);return U&&J(St(X),pe=>{yn(pe)&&pe.dom.length===0?Pe(pe):Re(X,pe)}),Pe(X),X.dom}),ie=(F,U,Y)=>{P(F,X=>{if(ke(X)){const pe=B(X),de=U.split(" ");J(de,Be=>{le(Y)?(Y?H:ee)(pe,Be):((je,Ze)=>{const Pt=_(je)?je.dom.classList.toggle(Ze):((Lt,xo)=>Te(T(Lt),xo)?q(Lt,xo):O(Lt,xo))(je,Ze);K(je)})(pe,Be)})}})},oe=(F,U,Y)=>P(U,X=>{var pe;const de=se(U)?F.cloneNode(!0):F;return Y&&Qu(Mk(X.childNodes),Be=>{de.appendChild(Be)}),(pe=X.parentNode)===null||pe===void 0||pe.replaceChild(de,X),X}),we=()=>e.createRange(),Ne=(F,U,Y,X)=>{if(se(F)){let pe=F.length;const de=[];for(;pe--;)de[pe]=Ne(F[pe],U,Y,X);return de}return!t.collect||F!==e&&F!==o||i.push([F,U,Y,X]),d.bind(F,U,Y,X||ge)},Oe=(F,U,Y)=>{if(se(F)){let X=F.length;const pe=[];for(;X--;)pe[X]=Oe(F[X],U,Y);return pe}if(i.length>0&&(F===e||F===o)){let X=i.length;for(;X--;){const[pe,de,Be]=i[X];F!==pe||U&&U!==de||Y&&Y!==Be||d.unbind(pe,de,Be)}}return d.unbind(F,U,Y)},Le=F=>{if(F&&Rr(F)){const U=F.getAttribute("data-mce-contenteditable");return U&&U!=="inherit"?U:F.contentEditable!=="inherit"?F.contentEditable:null}return null},ge={doc:e,settings:t,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:d,isBlock:F=>Ae(F)?Fe(f,F):ke(F)&&(Fe(f,F.nodeName)||la(l,F)),root:null,clone:(F,U)=>F.cloneNode(U),getRoot:C,getViewPort:F=>{const U=Hg(F);return{x:U.x,y:U.y,w:U.width,h:U.height}},getRect:F=>{const U=m(F),Y=S(U),X=A(U);return{x:Y.x,y:Y.y,w:X.w,h:X.h}},getSize:A,getParent:(F,U,Y)=>{const X=R(F,U,Y,!1);return X&&X.length>0?X[0]:null},getParents:R,get:m,getNext:(F,U)=>M(F,U,"nextSibling"),getPrev:(F,U)=>M(F,U,"previousSibling"),select:(F,U)=>{var Y,X;const pe=(X=(Y=m(U))!==null&&Y!==void 0?Y:t.root_element)!==null&&X!==void 0?X:e;return bt(pe.querySelectorAll)?bn(pe.querySelectorAll(F)):[]},is:N,add:D,create:L,createHTML:(F,U,Y="")=>{let X="<"+F;for(const pe in U)ln(U,pe)&&(X+=" "+pe+'="'+j(U[pe])+'"');return ys(Y)&&Fe(l.getVoidElements(),F)?X+" />":X+">"+Y+"</"+F+">"},createFragment:F=>{const U=e.createElement("div"),Y=e.createDocumentFragment();let X;for(Y.appendChild(U),F&&(U.innerHTML=F);X=U.firstChild;)Y.appendChild(X);return Y.removeChild(U),Y},remove:Q,setStyle:(F,U,Y)=>{P(F,X=>{const pe=B(X);_h(pe,U,Y),t.update_styles&&kh(c,pe)})},getStyle:E,setStyles:(F,U)=>{P(F,Y=>{const X=B(Y);Ct(U,(pe,de)=>{_h(X,de,pe)}),t.update_styles&&kh(c,X)})},removeAllAttribs:F=>P(F,U=>{const Y=U.attributes;for(let X=Y.length-1;X>=0;X--)U.removeAttributeNode(Y.item(X))}),setAttrib:h,setAttribs:z,getAttrib:g,getPos:S,parseStyle:F=>c.parse(F),serializeStyle:(F,U)=>c.serialize(F,U),addStyle:F=>{if(ge!==Bt.DOM&&e===document){if(n[F])return;n[F]=!0}let U=e.getElementById("mceDefaultStyles");if(!U){U=e.createElement("style"),U.id="mceDefaultStyles",U.type="text/css";const Y=e.head;Y.firstChild?Y.insertBefore(U,Y.firstChild):Y.appendChild(U)}U.styleSheet?U.styleSheet.cssText+=F:U.appendChild(e.createTextNode(F))},loadCSS:F=>{F||(F=""),J(F.split(","),U=>{r[U]=!0,a.load(U).catch(Ee)})},addClass:(F,U)=>{ie(F,U,!0)},removeClass:(F,U)=>{ie(F,U,!1)},hasClass:(F,U)=>{const Y=b(F),X=U.split(" ");return le(Y)&&oo(X,pe=>ae(Y,pe))},toggleClass:ie,show:F=>{P(F,U=>$e(B(U),"display"))},hide:F=>{P(F,U=>Ki(B(U),"display","none"))},isHidden:F=>{const U=b(F);return le(U)&&Ar(ne(U,"display"),"none")},uniqueId:F=>(F||"mce_")+s++,setHTML:V,getOuterHTML:F=>{const U=b(F);return le(U)?ke(U.dom)?U.dom.outerHTML:(Y=>{const X=De("div"),pe=B(Y.dom.cloneNode(!0));return at(X,pe),un(X)})(U):""},setOuterHTML:(F,U)=>{P(F,Y=>{ke(Y)&&(Y.outerHTML=U)})},decode:da.decode,encode:j,insertAfter:(F,U)=>{const Y=m(U);return P(F,X=>{const pe=Y?.parentNode,de=Y?.nextSibling;return pe&&(de?pe.insertBefore(X,de):pe.appendChild(X)),X})},replace:oe,rename:(F,U)=>{if(F.nodeName!==U.toUpperCase()){const Y=L(U);return Qu(v(F),X=>{h(Y,X.nodeName,g(F,X.nodeName))}),oe(Y,F,!0),Y}return F},findCommonAncestor:(F,U)=>{let Y=F;for(;Y;){let X=U;for(;X&&Y!==X;)X=X.parentNode;if(Y===X)break;Y=Y.parentNode}return!Y&&F.ownerDocument?F.ownerDocument.documentElement:Y},run:P,getAttribs:v,isEmpty:(F,U,Y)=>Me(U)?ns(l,F,{...Y,isContent:pe=>{const de=pe.nodeName.toLowerCase();return!!U[de]}}):ns(l,F,Y),createRng:we,nodeIndex:Ja,split:(F,U,Y)=>{let X,pe,de=we();if(F&&U&&F.parentNode&&U.parentNode){const Be=F.parentNode;return de.setStart(Be,Ja(F)),de.setEnd(U.parentNode,Ja(U)),X=de.extractContents(),de=we(),de.setStart(U.parentNode,Ja(U)+1),de.setEnd(Be,Ja(F)+1),pe=de.extractContents(),Be.insertBefore(Uu(ge,X,l),F),Y?Be.insertBefore(Y,F):Be.insertBefore(U,F),Be.insertBefore(Uu(ge,pe,l),F),Q(F),Y||U}},bind:Ne,unbind:Oe,fire:(F,U,Y)=>d.dispatch(F,U,Y),dispatch:(F,U,Y)=>d.dispatch(F,U,Y),getContentEditable:Le,getContentEditableParent:F=>{const U=C();let Y=null;for(let X=F;X&&X!==U&&(Y=Le(X),Y===null);X=X.parentNode);return Y},isEditable:F=>{if(le(F)){const U=ke(F)?F:F.parentElement;return le(U)&&Rr(U)&&Xo(B(U))}return!1},destroy:()=>{if(i.length>0){let F=i.length;for(;F--;){const[U,Y,X]=i[F];d.unbind(U,Y,X)}}Ct(r,(F,U)=>{a.unload(U),delete r[U]})},isChildOf:(F,U)=>F===U||U.contains(F),dumpRng:F=>"startContainer: "+F.startContainer.nodeName+", startOffset: "+F.startOffset+", endContainer: "+F.endContainer.nodeName+", endOffset: "+F.endOffset},Se=((F,U,Y)=>{const X=U.keep_values,pe={set:(Be,je,Ze)=>{const Pt=B(Be);bt(U.url_converter)&&le(je)&&(je=U.url_converter.call(U.url_converter_scope||Y(),String(je),Ze,Be)),tl(Pt,"data-mce-"+Ze,je),tl(Pt,Ze,je)},get:(Be,je)=>{const Ze=B(Be);return Jn(Ze,"data-mce-"+je)||Jn(Ze,je)}},de={style:{set:(Be,je)=>{const Ze=B(Be);X&&tl(Ze,Ju,je),p(Ze,"style"),Ae(je)&&I(Ze,F.parse(je))},get:Be=>{const je=B(Be),Ze=Jn(je,Ju)||Jn(je,"style");return F.serialize(F.parse(Ze),ft(je))}}};return X&&(de.href=de.src=pe),de})(c,t,fe(ge));return ge};Bt.DOM=Bt(document),Bt.nodeIndex=Ja;const Fk=Bt.DOM;class rs{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,o)=>{const r=Fk;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=ce._addCacheSuffix(t),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(t){return this.states[t]===2}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,o=(l,c)=>{Ot(n.scriptLoadedCallbacks,c).each(d=>{J(d,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=Ke(l,d=>d.status==="rejected");return c.length>0?Promise.reject(Qt(c,({reason:d})=>se(d)?d:[d])):Promise.resolve()},s=l=>Promise.allSettled(ot(l,c=>n.states[c]===2?(o("resolve",c),Promise.resolve()):n.states[c]===3?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,o("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],s(d).then(r)):Promise.resolve()},()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return k.from(d).each(Yn),r(c)})),i=Ua(t);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,c)})}):a(i)}}rs.ScriptLoader=new rs;const nl={},Zu=mn("en"),Nh=()=>Ot(nl,Zu.get()),fr={getData:()=>gs(nl,e=>({...e})),setCode:e=>{e&&Zu.set(e)},getCode:()=>Zu.get(),add:(e,t)=>{let n=nl[e];n||(nl[e]=n={});const o=ot(nn(t),r=>r.toLowerCase());Ct(t,(r,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const c=i.indexOf(l);return c!==-1&&i.indexOf(l,c+1)>c})(o,a)?(Fe(t,a)||(n[a]=r),n[s]=r):n[a]=r})},translate:e=>{const t=Nh().getOr({}),n=i=>bt(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>i===""||i==null,r=i=>{const l=n(i);return Fe(t,l)?n(t[l]):Ot(t,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(o(e))return"";if(Xe(a=e)&&Fe(a,"raw"))return n(e.raw);var a;if((i=>se(i)&&i.length>1)(e)){const i=e.slice(1);return s(r(e[0]).replace(/\{([0-9]+)\}/g,(l,c)=>Fe(i,c)?n(i[c]):l))}return s(r(e))},isRtl:()=>Nh().bind(e=>Ot(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Fe(nl,e)},$n=()=>{const e=[],t={},n={},o=[],r=(l,c)=>{const d=Ke(o,f=>f.name===l&&f.state===c);J(d,f=>f.resolve())},s=l=>Fe(t,l),a=(l,c)=>{const d=fr.getCode();!d||c&&(","+(c||"")+",").indexOf(","+d+",")===-1||rs.ScriptLoader.add(t[l]+"/langs/"+d+".js")},i=(l,c="added")=>c==="added"&&(d=>Fe(n,d))(l)||c==="loaded"&&s(l)?Promise.resolve():new Promise(d=>{o.push({name:l,state:c,resolve:d})});return{items:e,urls:t,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{$n.languageLoad!==!1&&(s(l)?a(l,c):i(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(e.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete t[l],delete n[l]},createUrl:(l,c)=>Ae(c)?Ae(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(t[l])return Promise.resolve();let d=Ae(c)?c:c.prefix+c.resource+c.suffix;d.indexOf("/")!==0&&d.indexOf("://")===-1&&(d=$n.baseURL+"/"+d),t[l]=d.substring(0,d.lastIndexOf("/"));const f=()=>(r(l,"loaded"),Promise.resolve());return n[l]?f():rs.ScriptLoader.add(d).then(f)},waitFor:i}};$n.languageLoad=!0,$n.baseURL="",$n.PluginManager=$n(),$n.ThemeManager=$n(),$n.ModelManager=$n();const Rc=(e,t)=>{let n=null;return{cancel:()=>{Je(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Je(n)&&(n=setTimeout(()=>{n=null,e.apply(null,o)},t))}}},ef=(e,t)=>{let n=null;const o=()=>{Je(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},ol=fe("mce-annotation"),fa=fe("data-mce-annotation"),Za=fe("data-mce-annotation-uid"),rl=fe("data-mce-annotation-active"),sl=fe("data-mce-annotation-classes"),al=fe("data-mce-annotation-attrs"),Ah=e=>t=>Ie(t,e),Th=(e,t)=>{const n=e.selection.getRng(),o=B(n.startContainer),r=B(e.getBody()),s=t.fold(()=>"."+ol(),i=>`[${fa()}="${i}"]`),a=$t(o,n.startOffset).getOr(o);return cr(a,s,Ah(r)).bind(i=>sr(i,`${Za()}`).bind(l=>sr(i,`${fa()}`).map(c=>{const d=Oh(e,l);return{uid:l,name:c,elements:d}})))},Rh=(e,t)=>u(e,"data-mce-bogus")||((n,o,r)=>lr(n,'[data-mce-bogus="all"]',r).isSome())(e,0,Ah(t)),Oh=(e,t)=>{const n=B(e.getBody()),o=Mn(n,`[${Za()}="${t}"]`);return Ke(o,r=>!Rh(r,n))},Bh=(e,t)=>{const n=B(e.getBody()),o=Mn(n,`[${fa()}="${t}"]`),r={};return J(o,s=>{if(!Rh(s,n)){const a=Jn(s,Za()),i=Ot(r,a).getOr([]);r[a]=i.concat([s])}}),r},Dh=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ph=0;const il=e=>{const t=new Date().getTime(),n=Math.floor(1e9*Dh());return Ph++,e+"_"+n+Ph+String(t)},Lh=(e,t)=>B(e.dom.cloneNode(t)),ma=e=>Lh(e,!1),Mh=e=>Lh(e,!0),Ih=(e,t,n=yt)=>{const o=new fn(e,t),r=s=>{let a;do a=o[s]();while(a&&!re(a)&&!n(a));return k.from(a).filter(re)};return{current:()=>k.from(o.current()).filter(re),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},pa=(e,t)=>{const n=t||(r=>e.isBlock(r)||Ut(r)||Dt(r)),o=(r,s,a,i)=>{if(re(r)){const l=i(r,s,r.data);if(l!==-1)return k.some({container:r,offset:l})}return a().bind(l=>o(l.container,l.offset,a,i))};return{backwards:(r,s,a,i)=>{const l=Ih(r,i??e.getRoot(),n);return o(r,s,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(r,s,a,i)=>{const l=Ih(r,i??e.getRoot(),n);return o(r,s,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},tf=(e=>{const t=n=>e(n)?k.from(n.dom.nodeValue):k.none();return{get:n=>{if(!e(n))throw new Error("Can only get text value of a text node");return t(n).getOr("")},getOption:t,set:(n,o)=>{if(!e(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=o}}})(yn),ll=e=>tf.get(e),Fh=(e,t)=>tf.set(e,t),ei=e=>{let t;return n=>(t=t||Dn(e,zt),Fe(t,ft(n)))},ga=e=>Hn(e)&&ft(e)==="br",jh=ei(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),nf=ei(["ul","ol","dl"]),ti=ei(["li","dd","dt"]),jk=ei(["thead","tbody","tfoot"]),cl=ei(["td","th"]),Oc=ei(["pre","script","textarea","style"]),ni=()=>{const e=De("br");return Jt(e,"data-mce-bogus","1"),e},Os=e=>{vt(e),at(e,ni())},pn=Yi,Bc=Au,yo=e=>e.replace(/\uFEFF/g,""),zk=ke,oi=re,ri=e=>(oi(e)&&(e=e.parentNode),zk(e)&&e.hasAttribute("data-mce-caret")),Bs=e=>oi(e)&&Bc(e.data),Oo=e=>ri(e)||Bs(e),zh=e=>e.firstChild!==e.lastChild||!Ut(e.firstChild),of=e=>{const t=e.container();return!!re(t)&&(t.data.charAt(e.offset())===pn||e.isAtStart()&&Bs(t.previousSibling))},rf=e=>{const t=e.container();return!!re(t)&&(t.data.charAt(e.offset()-1)===pn||e.isAtEnd()&&Bs(t.nextSibling))},Dc=e=>oi(e)&&e.data[0]===pn,Pc=e=>oi(e)&&e.data[e.data.length-1]===pn,sf=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const o=t.getElementsByTagName("br"),r=o[o.length-1];aa(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Uh=e=>ri(e.startContainer),si=Math.round,ha=e=>e?{left:si(e.left),top:si(e.top),bottom:si(e.bottom),right:si(e.right),width:si(e.width),height:si(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Hh=(e,t)=>(e=ha(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),qh=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,dl=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&qh(t.top-e.bottom,e,t)},ul=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&qh(t.bottom-e.top,e,t),$h=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left),r=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-r)*(n-r))},Lc=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ds=(e,t)=>{if(ke(e)&&e.hasChildNodes()){const n=e.childNodes,o=((r,s,a)=>Math.min(Math.max(r,0),a))(t,0,n.length-1);return n[o]}return e},Uk=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),Wh=e=>Ae(e)&&e.charCodeAt(0)>=768&&Uk.test(e),Vh=Yo,Hk=Dt,qk=Ut,$k=re,Wk=dr(["script","style","textarea"]),Kh=dr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Vk=dr(["table"]),Kk=Oo,mr=e=>!Kk(e)&&($k(e)?!Wk(e.parentNode):Kh(e)||qk(e)||Vk(e)||af(e)),af=e=>!(t=>ke(t)&&t.getAttribute("unselectable")==="true")(e)&&Hk(e),Xh=(e,t)=>mr(e)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(af(r))return!1;if(Vh(r))return!0}return!0})(e,t),Yh=ke,Xk=mr,Gh=Sc("display","block table"),Yk=Sc("float","left right"),fl=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(Yh,Xk,vr(Yk)),Gk=vr(Sc("white-space","pre pre-line pre-wrap")),ml=re,lf=Ut,Qh=Bt.nodeIndex,Mc=(e,t)=>t<0&&ke(e)&&e.hasChildNodes()?void 0:Ds(e,t),cf=e=>e?e.createRange():Bt.DOM.createRng(),df=e=>Ae(e)&&/[\r\n\t ]/.test(e),Jh=e=>!!e.setStart&&!!e.setEnd,uf=e=>{const t=e.startContainer,n=e.startOffset;if(df(e.toString())&&Gk(t.parentNode)&&re(t)){const o=t.data;if(df(o[n-1])||df(o[n+1]))return!0}return!1},Zh=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Ps=e=>{var t;let n;const o=e.getClientRects();return n=o.length>0?ha(o[0]):ha(e.getBoundingClientRect()),!Jh(e)&&lf(e)&&Zh(n)?(r=>{const s=r.ownerDocument,a=cf(s),i=s.createTextNode(rn),l=r.parentNode;l.insertBefore(i,r),a.setStart(i,0),a.setEnd(i,1);const c=ha(a.getBoundingClientRect());return l.removeChild(i),c})(e):Zh(n)&&Jh(e)&&(t=(r=>{const s=r.startContainer,a=r.endContainer,i=r.startOffset,l=r.endOffset;if(s===a&&re(a)&&i===0&&l===1){const c=r.cloneRange();return c.setEndAfter(a),Ps(c)}return null})(e))!==null&&t!==void 0?t:n},ba=(e,t)=>{const n=Hh(e,t);return n.width=1,n.right=n.left+1,n},G=(e,t,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=d=>{var f,m;d.height!==0&&(s.length>0&&(f=d,m=s[s.length-1],f.left===m.left&&f.top===m.top&&f.bottom===m.bottom&&f.right===m.right)||s.push(d))},i=(d,f)=>{const m=cf(d.ownerDocument);if(f<d.data.length){if(Wh(d.data[f]))return;if(Wh(d.data[f-1])&&(m.setStart(d,f),m.setEnd(d,f+1),!uf(m)))return void a(ba(Ps(m),!1))}f>0&&(m.setStart(d,f-1),m.setEnd(d,f),uf(m)||a(ba(Ps(m),!1))),f<d.data.length&&(m.setStart(d,f),m.setEnd(d,f+1),uf(m)||a(ba(Ps(m),!0)))},l=r.container(),c=r.offset();if(ml(l))return i(l,c),s;if(Yh(l))if(r.isAtEnd()){const d=Mc(l,c);ml(d)&&i(d,d.data.length),fl(d)&&!lf(d)&&a(ba(Ps(d),!1))}else{const d=Mc(l,c);if(ml(d)&&i(d,0),fl(d)&&r.isAtEnd())return a(ba(Ps(d),!1)),s;const f=Mc(r.container(),r.offset()-1);fl(f)&&!lf(f)&&(Gh(f)||Gh(d)||!fl(d))&&a(ba(Ps(f),!1)),fl(d)&&a(ba(Ps(d),!0))}return s})(G(e,t))),n);return{container:fe(e),offset:fe(t),toRange:()=>{const r=cf(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(ml(e),t===0),isAtEnd:()=>ml(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>Mc(e,r?t-1:t)}};G.fromRangeStart=e=>G(e.startContainer,e.startOffset),G.fromRangeEnd=e=>G(e.endContainer,e.endOffset),G.after=e=>G(e.parentNode,Qh(e)+1),G.before=e=>G(e.parentNode,Qh(e)),G.isAbove=(e,t)=>vn(Sn(t.getClientRects()),nr(e.getClientRects()),dl).getOr(!1),G.isBelow=(e,t)=>vn(nr(t.getClientRects()),Sn(e.getClientRects()),ul).getOr(!1),G.isAtStart=e=>!!e&&e.isAtStart(),G.isAtEnd=e=>!!e&&e.isAtEnd(),G.isTextPosition=e=>!!e&&re(e.container()),G.isElementPosition=e=>!G.isTextPosition(e);const Ic=(e,t)=>{re(t)&&t.data.length===0&&e.remove(t)},ff=(e,t,n)=>{Ru(n)?((o,r,s)=>{const a=k.from(s.firstChild),i=k.from(s.lastChild);r.insertNode(s),a.each(l=>Ic(o,l.previousSibling)),i.each(l=>Ic(o,l.nextSibling))})(e,t,n):((o,r,s)=>{r.insertNode(s),Ic(o,s.previousSibling),Ic(o,s.nextSibling)})(e,t,n)},pr=re,e0=aa,t0=Bt.nodeIndex,n0=e=>{const t=e.parentNode;return e0(t)?n0(t):t},mf=e=>e?hs(e.childNodes,(t,n)=>(e0(n)&&n.nodeName!=="BR"?t=t.concat(mf(n)):t.push(n),t),[]):[],o0=e=>t=>e===t,r0=e=>(pr(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,o;n=mf(n0(t)),o=Qs(n,o0(t),t),n=n.slice(0,o+1);const r=hs(n,(s,a,i)=>(pr(a)&&pr(n[i-1])&&s++,s),0);return n=Wo(n,dr([t.nodeName])),o=Qs(n,o0(t),t),o-r})(e)+"]",s0=(e,t)=>{let n,o=[],r=t.container(),s=t.offset();if(pr(r))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&pr(c);)l+=c.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(r0(r));let a=((i,l)=>{const c=[];for(let d=l.parentNode;d&&d!==i;d=d.parentNode)c.push(d);return c})(e,r);return a=Wo(a,vr(aa)),o=o.concat(Nr(a,i=>r0(i))),o.reverse().join("/")+","+n},a0=(e,t)=>{if(!t)return null;const n=t.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=hs(o,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?(l[1]==="text()"&&(l[1]="#text"),((c,d,f)=>{let m=mf(c);return m=Wo(m,(b,g)=>!pr(b)||!pr(m[g-1])),m=Wo(m,dr([d])),m[f]})(a,l[1],parseInt(l[2],10))):null},e);if(!s)return null;if(!pr(s)&&s.parentNode){let a;return a=r==="after"?t0(s)+1:t0(s),G(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;pr(l);){const d=l.data.length;if(i>=c&&i<=c+d){a=l,i-=c;break}if(!pr(l.nextSibling)){a=l,i=d;break}c+=d,l=l.nextSibling}return pr(a)&&i>a.data.length&&(i=a.data.length),G(a,i)})(s,parseInt(r,10))},Fc=Dt,i0=(e,t,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=e.getRoot();if(re(s))i.push(n?((c,d,f)=>{let m=c(d.data.slice(0,f)).length;for(let b=d.previousSibling;b&&re(b);b=b.previousSibling)m+=c(b.data).length;return m})(t,s,a):a);else{let c=0;const d=s.childNodes;a>=d.length&&d.length&&(c=1,a=Math.max(0,d.length-1)),i.push(e.nodeIndex(d[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(e.nodeIndex(c,n));return i},pf=(e,t,n)=>{let o=0;return ce.each(e.select(t),r=>r.getAttribute("data-mce-bogus")==="all"?void 0:r!==n&&void o++),o},l0=(e,t)=>{let n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;if(ke(n)&&n.nodeName==="TR"){const r=n.childNodes;n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))}},c0=e=>(l0(e,!0),l0(e,!1),e),d0=(e,t)=>{if(ke(e)&&(e=Ds(e,t),Fc(e)))return e;if(Oo(e)){re(e)&&ri(e)&&(e=e.parentNode);let n=e.previousSibling;if(Fc(n)||(n=e.nextSibling,Fc(n)))return n}},u0=(e,t,n)=>{const o=n.getNode(),r=n.getRng();if(o.nodeName==="IMG"||Fc(o)){const a=o.nodeName;return{name:a,index:pf(n.dom,a,o)}}const s=(a=>d0(a.startContainer,a.startOffset)||d0(a.endContainer,a.endOffset))(r);if(s){const a=s.tagName;return{name:a,index:pf(n.dom,a,s)}}return((a,i,l,c)=>{const d=i.dom,f=i0(d,a,l,c,!0),m=i.isForward(),b=Uh(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:f,forward:m,...b}:{start:f,end:i0(d,a,l,c,!1),forward:m,...b}})(e,n,t,r)},f0=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},m0=(e,t)=>{const n=e.dom;let o=e.getRng();const r=n.uniqueId(),s=e.isCollapsed(),a=e.getNode(),i=a.nodeName,l=e.isForward();if(i==="IMG")return{name:i,index:pf(n,i,a)};const c=c0(o.cloneRange());if(!s){c.collapse(!1);const f=f0(n,r+"_end",t);ff(n,c,f)}o=c0(o),o.collapse(!0);const d=f0(n,r+"_start",t);return ff(n,o,d),e.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},gf=xe(u0,mt,!0),p0=e=>{const t=s=>s(e),n=fe(e),o=()=>r,r={tag:!0,inner:e,fold:(s,a)=>a(e),isValue:zt,isError:yt,map:s=>eo.value(s(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(e)},toOptional:()=>k.some(e)};return r},g0=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(o,r)=>o(e),isValue:yt,isError:zt,map:t,mapError:o=>eo.error(o(e)),bind:t,exists:yt,forall:zt,getOr:mt,or:mt,getOrThunk:yr,orThunk:yr,getOrDie:po(String(e)),each:Ee,toOptional:k.none};return n},eo={value:p0,error:g0,fromOption:(e,t)=>e.fold(()=>g0(t),p0)},Dr=e=>{if(!se(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return J(e,(o,r)=>{const s=nn(o);if(s.length!==1)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(n[a]!==void 0)throw new Error("duplicate key detected:"+a);if(a==="cata")throw new Error("cannot have a case named cata (sorry)");if(!se(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...d)=>{if(d.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+d.length);return d[r].apply(null,l)},match:d=>{const f=nn(d);if(t.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+f.join(","));if(!oo(t,m=>Te(f,m)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+`
Required: `+t.join(", "));return d[a].apply(null,l)},log:d=>{console.log(d,{constructors:t,constructor:a,params:l})}}}}),n};Dr([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Qk=e=>e.type==="inline-command"||e.type==="inline-format",Jk=e=>e.type==="block-command"||e.type==="block-format",Zk=e=>{var t;const n=r=>eo.error({message:r,pattern:e}),o=(r,s,a)=>{if(e.format!==void 0){let i;if(se(e.format)){if(!oo(e.format,Ae))return n(r+" pattern has non-string items in the `format` array");i=e.format}else{if(!Ae(e.format))return n(r+" pattern has non-string `format` parameter");i=[e.format]}return eo.value(s(i))}return e.cmd!==void 0?Ae(e.cmd)?eo.value(a(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Xe(e))return n("Raw pattern is not an object");if(!Ae(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Ae(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,s=e.end;return s.length===0&&(s=r,r=""),o("Inline",a=>({type:"inline-format",start:r,end:s,format:a}),(a,i)=>({type:"inline-command",start:r,end:s,cmd:a,value:i}))}if(e.replacement!==void 0)return Ae(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):eo.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const r=(t=e.trigger)!==null&&t!==void 0?t:"space";return e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",s=>({type:"block-format",start:e.start,format:s[0],trigger:r}),(s,a)=>({type:"block-command",start:e.start,cmd:s,value:a,trigger:r}))}},h0=e=>Ke(e,Jk),b0=e=>Ke(e,Qk),hf=(e,t)=>({...e,blockPatterns:Ke(e.blockPatterns,n=>((o,r)=>(o.type==="block-command"||o.type==="block-format")&&o.trigger===r)(n,t))}),v0=e=>{const t=(n=>{const o=[],r=[];return J(n,s=>{s.fold(a=>{o.push(a)},a=>{r.push(a)})}),{errors:o,values:r}})(ot(e,Zk));return J(t.errors,n=>console.error(n.message,n.pattern)),t.values},y0=(e,t,n)=>{e.dispatch(t,n)},C0=(e,t,n,o)=>{e.dispatch("FormatApply",{format:t,node:n,vars:o})},x0=(e,t,n,o)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:o})},w0=(e,t)=>e.dispatch("SetContent",t),S0=(e,t)=>e.dispatch("GetContent",t),bf=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},E0=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),vf=Pn().deviceType,e_=vf.isTouch(),t_=Bt.DOM,k0=e=>So(e,RegExp),ye=e=>t=>t.options.get(e),jc=e=>Ae(e)||Xe(e),_0=(e,t="")=>n=>{const o=Ae(n);if(o){if(n.indexOf("=")!==-1){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return hn(a,(i,l)=>{const c=l.split("="),d=c[0],f=c.length>1?c[1]:d;return i[Gr(d)]=Gr(f),i},{})})(n);return{value:Ot(r,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},n_=ye("iframe_attrs"),o_=ye("doctype"),N0=ye("document_base_url"),r_=ye("body_id"),s_=ye("body_class"),A0=ye("content_security_policy"),a_=ye("br_in_pre"),Fn=ye("forced_root_block"),pl=ye("forced_root_block_attrs"),i_=ye("newline_behavior"),l_=ye("br_newline_selector"),c_=ye("no_newline_selector"),d_=ye("keep_styles"),u_=ye("end_container_on_empty_block"),T0=ye("automatic_uploads"),R0=ye("images_reuse_filename"),f_=ye("images_replace_blob_uris"),O0=ye("icons"),m_=ye("icons_url"),p_=ye("images_upload_url"),g_=ye("images_upload_base_path"),h_=ye("images_upload_credentials"),b_=ye("images_upload_handler"),v_=ye("content_css_cors"),yf=ye("referrer_policy"),B0=ye("language"),y_=ye("language_url"),D0=ye("indent_use_margin"),C_=ye("indentation"),x_=ye("content_css"),w_=ye("content_style"),P0=ye("font_css"),S_=ye("directionality"),E_=ye("inline_boundaries_selector"),L0=ye("object_resizing"),k_=ye("resize_img_proportional"),__=ye("placeholder"),M0=ye("event_root"),N_=ye("service_message"),ai=ye("theme"),A_=ye("theme_url"),Cf=ye("model"),T_=ye("model_url"),gl=ye("inline_boundaries"),R_=ye("formats"),O_=ye("preview_styles"),B_=ye("format_empty_lines"),D_=ye("format_noneditable_selector"),P_=ye("custom_ui_selector"),xf=ye("inline"),L_=ye("hidden_input"),M_=ye("submit_patch"),I_=ye("add_form_submit_trigger"),F_=ye("add_unload_trigger"),j_=ye("custom_undo_redo_levels"),z_=ye("disable_nodechange"),I0=ye("readonly"),U_=ye("editable_root"),F0=ye("content_css_cors"),zc=ye("plugins"),H_=ye("external_plugins"),q_=ye("block_unsupported_drop"),$_=ye("visual"),W_=ye("visual_table_class"),j0=ye("visual_anchor_class"),z0=ye("iframe_aria_text"),V_=ye("setup"),K_=ye("init_instance_callback"),X_=ye("urlconverter_callback"),Y_=ye("auto_focus"),G_=ye("browser_spellcheck"),Q_=ye("protect"),J_=ye("paste_block_drop"),Uc=ye("paste_data_images"),Z_=ye("paste_preprocess"),eN=ye("paste_postprocess"),tN=ye("newdocument_content"),nN=ye("paste_webkit_styles"),oN=ye("paste_remove_styles_if_webkit"),rN=ye("paste_merge_formats"),sN=ye("smart_paste"),aN=ye("paste_as_text"),iN=ye("paste_tab_spaces"),lN=ye("allow_html_data_urls"),cN=ye("text_patterns"),dN=ye("text_patterns_lookup"),U0=ye("noneditable_class"),uN=ye("editable_class"),fN=ye("noneditable_regexp"),mN=ye("preserve_cdata"),pN=ye("highlight_on_focus"),H0=ye("xss_sanitization"),gN=ye("init_content_sync"),q0=e=>ce.explode(e.options.get("images_file_types")),hN=ye("table_tab_navigation"),bN=ye("details_initial_state"),vN=ye("details_serialized_state"),$0=ye("sandbox_iframes"),wf=e=>e.options.get("sandbox_iframes_exclusions"),yN=ye("convert_unsafe_embeds"),CN=ye("license_key"),xN=ye("api_key"),Hc=ye("disabled"),wN=ke,W0=re,V0=e=>{const t=e.parentNode;t&&t.removeChild(e)},K0=e=>{const t=yo(e);return{count:e.length-t.length,text:t}},X0=e=>{let t;for(;(t=e.data.lastIndexOf(pn))!==-1;)e.deleteData(t,1)},Y0=(e,t)=>(va(e),t),SN=(e,t)=>G.isTextPosition(t)?((n,o)=>W0(n)&&o.container()===n?((r,s)=>{const a=K0(r.data.substr(0,s.offset())),i=K0(r.data.substr(s.offset()));return(a.text+i.text).length>0?(X0(r),G(r,s.offset()-a.count)):s})(n,o):Y0(n,o))(e,t):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,c)=>{const d=dt(l,c);return d===-1?k.none():k.some(d)})(bn(a.childNodes),r).map(l=>l<s.offset()?G(a,s.offset()-1):s).getOr(s);return va(r),i})(n,o):Y0(n,o))(e,t),va=e=>{wN(e)&&Oo(e)&&(zh(e)?e.removeAttribute("data-mce-caret"):V0(e)),W0(e)&&(X0(e),e.data.length===0&&V0(e))},EN=Dt,kN=Br,_N=Ec,G0=(e,t,n)=>{const o=Hh(t.getBoundingClientRect(),n);let r,s;if(e.tagName==="BODY"){const i=e.ownerDocument.documentElement;r=e.scrollLeft||i.scrollLeft,s=e.scrollTop||i.scrollTop}else{const i=e.getBoundingClientRect();r=e.scrollLeft-i.left,s=e.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},NN=(e,t,n,o)=>{const r=os();let s,a;const i=Fn(e),l=e.dom,c=()=>{(d=>{var f,m;const b=Mn(B(d),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<b.length;g++){const v=b[g].dom;let h=v.previousSibling;if(Pc(h)){const C=h.data;C.length===1?(f=h.parentNode)===null||f===void 0||f.removeChild(h):h.deleteData(C.length-1,1)}h=v.nextSibling,Dc(h)&&(h.data.length===1?(m=h.parentNode)===null||m===void 0||m.removeChild(h):h.deleteData(0,1))}})(t),a&&(va(a),a=null),r.on(d=>{l.remove(d.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(d,f)=>{let m;if(c(),_N(f))return null;if(!n(f))return a=((b,g)=>{var v;const h=((v=b.ownerDocument)!==null&&v!==void 0?v:document).createTextNode(pn),C=b.parentNode;if(g){const S=b.previousSibling;if(oi(S)){if(Oo(S))return S;if(Pc(S))return S.splitText(S.data.length-1)}C?.insertBefore(h,b)}else{const S=b.nextSibling;if(oi(S)){if(Oo(S))return S;if(Dc(S))return S.splitText(1),S}b.nextSibling?C?.insertBefore(h,b.nextSibling):C?.appendChild(h)}return h})(f,d),m=f.ownerDocument.createRange(),hl(a.nextSibling)?(m.setStart(a,0),m.setEnd(a,0)):(m.setStart(a,1),m.setEnd(a,1)),m;{const b=((h,C,S)=>{var E;const A=((E=C.ownerDocument)!==null&&E!==void 0?E:document).createElement(h);A.setAttribute("data-mce-caret",S?"before":"after"),A.setAttribute("data-mce-bogus","all"),A.appendChild(ni().dom);const N=C.parentNode;return S?N?.insertBefore(A,C):C.nextSibling?N?.insertBefore(A,C.nextSibling):N?.appendChild(A),A})(i,f,d),g=G0(t,f,d);l.setStyle(b,"top",g.top),l.setStyle(b,"caret-color","transparent"),a=b;const v=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(v,{...g}),l.add(t,v),r.set({caret:v,element:f,before:d}),d&&l.addClass(v,"mce-visual-caret-before"),s=setInterval(()=>{r.on(h=>{o()?l.toggleClass(h.caret,"mce-visual-caret-hidden"):l.addClass(h.caret,"mce-visual-caret-hidden")})},500),m=f.ownerDocument.createRange(),m.setStart(b,0),m.setEnd(b,0)}return m},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(d=>{const f=G0(t,d.element,d.before);l.setStyles(d.caret,{...f})})},destroy:()=>clearInterval(s)}},Q0=()=>gt.browser.isFirefox(),hl=e=>EN(e)||kN(e),bl=e=>(hl(e)||Or(e)&&Q0())&&so(B(e)).exists(Xo),AN=Yo,Sf=Dt,TN=Br,J0=Sc("display","block table table-cell table-row table-caption list-item"),Z0=Oo,eb=ri,RN=ke,ON=re,BN=mr,ii=e=>e===1,ya=e=>e===-1,qc=(e,t)=>{let n;for(;n=e(t);)if(!eb(n))return n;return null},vl=(e,t,n,o,r)=>{const s=new fn(e,o),a=Sf(e)||eb(e);let i;if(ya(t)){if(a&&(i=qc(s.prev.bind(s),!0),n(i)))return i;for(;i=qc(s.prev.bind(s),r);)if(n(i))return i}if(ii(t)){if(a&&(i=qc(s.next.bind(s),!0),n(i)))return i;for(;i=qc(s.next.bind(s),r);)if(n(i))return i}return null},Ls=(e,t)=>{for(;e&&e!==t;){if(J0(e))return e;e=e.parentNode}return null},Pr=(e,t,n)=>Ls(e.container(),n)===Ls(t.container(),n),Ef=(e,t)=>{if(!t)return k.none();const n=t.container(),o=t.offset();return RN(n)?k.from(n.childNodes[o+e]):k.none()},tb=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},DN=(e,t,n)=>Ls(t,e)===Ls(n,e),nb=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let r=n;for(;r&&r!==t;){let s=r[o];if(s&&Z0(s)&&(s=s[o]),Sf(s)||TN(s)){if(DN(t,s,r))return s;break}if(BN(s))break;r=r.parentNode}return null},yl=xe(tb,!0),Cl=xe(tb,!1),kf=(e,t,n)=>{let o;const r=xe(nb,!0,t),s=xe(nb,!1,t),a=n.startContainer,i=n.startOffset;if(ri(a)){const l=ON(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if(c==="before"&&(o=l.nextSibling,bl(o)))return yl(o);if(c==="after"&&(o=l.previousSibling,bl(o)))return Cl(o)}if(!n.collapsed)return n;if(re(a)){if(Z0(a)){if(e===1){if(o=s(a),o)return yl(o);if(o=r(a),o)return Cl(o)}if(e===-1){if(o=r(a),o)return Cl(o);if(o=s(a),o)return yl(o)}return n}if(Pc(a)&&i>=a.data.length-1)return e===1&&(o=s(a),o)?yl(o):n;if(Dc(a)&&i<=1)return e===-1&&(o=r(a),o)?Cl(o):n;if(i===a.data.length)return o=s(a),o?yl(o):n;if(i===0)return o=r(a),o?Cl(o):n}return n},ob=(e,t)=>Ef(e?0:-1,t).filter(Sf),xl=(e,t,n)=>{const o=kf(e,t,n);return e===-1?G.fromRangeStart(o):G.fromRangeEnd(o)},$c=e=>k.from(e.getNode()).map(B),_f=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Wc=(e,t)=>{const n=Pr(e,t);return!(n||!Ut(e.getNode()))||n},PN=Dt,Lr=re,rb=ke,Nf=Ut,li=mr,sb=e=>Kh(e)||(t=>!!af(t)&&!hn(bn(t.getElementsByTagName("*")),(n,o)=>n||Vh(o),!1))(e),Vc=Xh,ab=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,ib=(e,t)=>{if(ii(e)){if(li(t.previousSibling)&&!Lr(t.previousSibling))return G.before(t);if(Lr(t))return G(t,0)}if(ya(e)){if(li(t.nextSibling)&&!Lr(t.nextSibling))return G.after(t);if(Lr(t))return G(t,t.data.length)}return ya(e)?Nf(t)?G.before(t):G.after(t):G.before(t)},Af=(e,t,n)=>{let o,r,s,a;if(!rb(n)||!t)return null;if(t.isEqual(G.after(n))&&n.lastChild){if(a=G.after(n.lastChild),ya(e)&&li(n.lastChild)&&rb(n.lastChild))return Nf(n.lastChild)?G.before(n.lastChild):a}else a=t;const i=a.container();let l=a.offset();if(Lr(i)){if(ya(e)&&l>0)return G(i,--l);if(ii(e)&&l<i.length)return G(i,++l);o=i}else{if(ya(e)&&l>0&&(r=ab(i,l-1),li(r)))return!sb(r)&&(s=vl(r,e,Vc,r),s)?Lr(s)?G(s,s.data.length):G.after(s):Lr(r)?G(r,r.data.length):G.before(r);if(ii(e)&&l<i.childNodes.length&&(r=ab(i,l),li(r)))return Nf(r)?((d,f)=>{const m=f.nextSibling;return m&&li(m)?Lr(m)?G(m,0):G.before(m):Af(1,G.after(f),d)})(n,r):!sb(r)&&(s=vl(r,e,Vc,r),s)?Lr(s)?G(s,0):G.before(s):Lr(r)?G(r,0):G.after(r);o=r||a.getNode()}if(o&&(ii(e)&&a.isAtEnd()||ya(e)&&a.isAtStart())&&(o=vl(o,e,zt,n,!0),Vc(o,n)))return ib(e,o);r=o&&vl(o,e,Vc,n);const c=Xr(Ke(((d,f)=>{const m=[];let b=d;for(;b&&b!==f;)m.push(b),b=b.parentNode;return m})(i,n),PN));return!c||r&&c.contains(r)?r?ib(e,r):null:(a=ii(e)?G.after(c):G.before(c),a)},Mr=e=>({next:t=>Af(1,t,e),prev:t=>Af(-1,t,e)}),lb=e=>G.isTextPosition(e)?e.offset()===0:mr(e.getNode()),cb=e=>{if(G.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return mr(e.getNode(!0))},db=(e,t)=>!G.isTextPosition(e)&&!G.isTextPosition(t)&&e.getNode()===t.getNode(!0),Bo=(e,t,n)=>{const o=Mr(t);return k.from(e?o.next(n):o.prev(n))},ci=(e,t,n)=>Bo(e,t,n).bind(o=>Pr(n,o,t)&&((r,s,a)=>{return r?!db(s,a)&&(i=s,!(!G.isTextPosition(i)&&Ut(i.getNode())))&&cb(s)&&lb(a):!db(a,s)&&lb(s)&&cb(a);var i})(e,n,o)?Bo(e,t,o):k.some(o)),ub=(e,t,n,o)=>ci(e,t,n).bind(r=>o(r)?ub(e,t,r,o):k.some(r)),di=(e,t)=>{const n=e?t.firstChild:t.lastChild;return re(n)?k.some(G(n,e?0:n.data.length)):n?mr(n)?k.some(e?G.before(n):Ut(o=n)?G.before(o):G.after(o)):((r,s,a)=>{const i=r?G.before(a):G.after(a);return Bo(r,s,i)})(e,t,n):k.none();var o},to=xe(Bo,!0),lo=xe(Bo,!1),jn=xe(di,!0),Go=xe(di,!1),Tf="_mce_caret",Do=e=>ke(e)&&e.id===Tf,Ca=(e,t)=>{let n=t;for(;n&&n!==e;){if(Do(n))return n;n=n.parentNode}return null},fb=e=>Fe(e,"name"),mb=e=>ce.isArray(e.start),Kc=e=>!(!fb(e)&&gn(e.forward))||e.forward,pb=(e,t)=>(ke(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),LN=(e,t)=>Go(e).fold(yt,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),gb=(e,t,n)=>!(!(o=>!o.hasChildNodes())(t)||!Ca(e,t)||(((o,r)=>{var s;const a=((s=o.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(pn);o.appendChild(a),r.setStart(a,0),r.setEnd(a,0)})(t,n),0)),hb=(e,t,n,o)=>{const r=n[t?"start":"end"],s=e.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const c=a.childNodes;if(gb(s,a,o))return!0;if(r[l]>c.length-1)return!!gb(s,a,o)||LN(a,o);a=c[r[l]]}re(a)&&(i=Math.min(r[0],a.data.length)),ke(a)&&(i=Math.min(r[0],a.childNodes.length)),t?o.setStart(a,i):o.setEnd(a,i)}return!0},Rf=e=>re(e)&&e.data.length>0,bb=(e,t,n)=>{const o=e.get(n.id+"_"+t),r=o?.parentNode,s=n.keep;if(o&&r){let a,i;if(t==="start"?s?o.hasChildNodes()?(a=o.firstChild,i=1):Rf(o.nextSibling)?(a=o.nextSibling,i=0):Rf(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)+1):(a=r,i=e.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):Rf(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)):(a=r,i=e.nodeIndex(o)),!s){const l=o.previousSibling,c=o.nextSibling;let d;for(ce.each(ce.grep(o.childNodes),f=>{re(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});d=e.get(n.id+"_"+t);)e.remove(d,!0);if(re(c)&&re(l)&&!gt.browser.isOpera()){const f=l.data.length;l.appendData(c.data),e.remove(c),a=l,i=f}}return k.some(G(a,i))}return k.none()},MN=(e,t,n)=>((o,r,s=!1)=>r===2?u0(yo,s,o):r===3?(a=>{const i=a.getRng();return{start:s0(a.dom.getRoot(),G.fromRangeStart(i)),end:s0(a.dom.getRoot(),G.fromRangeEnd(i)),forward:a.isForward()}})(o):r?(a=>({rng:a.getRng(),forward:a.isForward()}))(o):m0(o,!1))(e,t,n),IN=(e,t)=>{((n,o)=>{const r=n.dom;if(o){if(mb(o))return((s,a)=>{const i=s.createRng();return hb(s,!0,a,i)&&hb(s,!1,a,i)?k.some({range:i,forward:Kc(a)}):k.none()})(r,o);if((s=>Ae(s.start))(o))return((s,a)=>{const i=k.from(a0(s.getRoot(),a.start)),l=k.from(a0(s.getRoot(),a.end));return vn(i,l,(c,d)=>{const f=s.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(d.container(),d.offset()),{range:f,forward:Kc(a)}})})(r,o);if((s=>Fe(s,"id"))(o))return((s,a)=>{const i=bb(s,"start",a),l=bb(s,"end",a);return vn(i,l.or(i),(c,d)=>{const f=s.createRng();return f.setStart(pb(s,c.container()),c.offset()),f.setEnd(pb(s,d.container()),d.offset()),{range:f,forward:Kc(a)}})})(r,o);if(fb(o))return((s,a)=>k.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(r,o);if((s=>Fe(s,"rng"))(o))return k.some({range:o.rng,forward:Kc(o)})}return k.none()})(e,t).each(({range:n,forward:o})=>{e.setRng(n,o)})},Po=e=>ke(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Xc=(vb=rn,e=>vb===e);var vb;const xa=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Of=e=>!xa(e)&&!Xc(e)&&!Au(e),Bf=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},yb=(e,t)=>{const n=Mn(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:(o=>Ke((r=>Qt(r,s=>{const a=Lc(s);return a?[B(a)]:[]}))(o),cl))(e)},ui=e=>yb(Bf(e.selection.getSel()),B(e.getBody())),wl=(e,t)=>lr(e,"table",t),Cb=e=>kn(e).fold(fe([e]),t=>[e].concat(Cb(t))),Df=e=>Ko(e).fold(fe([e]),t=>ft(t)==="br"?Ln(t).map(n=>[e].concat(Df(n))).getOr([]):[e].concat(Df(t))),Pf=(e,t)=>vn((n=>{const o=n.startContainer,r=n.startOffset;return re(o)?r===0?k.some(B(o)):k.none():k.from(o.childNodes[r]).map(B)})(t),(n=>{const o=n.endContainer,r=n.endOffset;return re(o)?r===o.data.length?k.some(B(o)):k.none():k.from(o.childNodes[r-1]).map(B)})(t),(n,o)=>{const r=Gt(Cb(e),xe(Ie,n)),s=Gt(Df(e),xe(Ie,o));return r.isSome()&&s.isSome()}).getOr(!1),Lf=(e,t,n,o)=>{const r=n,s=new fn(n,r),a=kr(e.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Te(["td","th","table"],c.toLowerCase()));let i=n;do{if(re(i)&&ce.trim(i.data).length!==0)return void(o?t.setStart(i,0):t.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?t.setStartBefore(i):i.nodeName==="BR"?t.setEndBefore(i):t.setEndAfter(i))}while(i=o?s.next():s.prev());r.nodeName==="BODY"&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},Yc=e=>{const t=e.selection.getSel();return le(t)&&t.rangeCount>0},Mf=(e,t)=>{const n=ui(e);n.length>0?J(n,o=>{const r=o.dom,s=e.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),t(s,!0)}):t(e.selection.getRng(),!1)},xb=(e,t,n)=>{const o=m0(e,t);n(o),e.moveToBookmark(o)},Sl=e=>x(e?.nodeType),If=e=>ke(e)&&!Po(e)&&!Do(e)&&!aa(e),wb=(e,t,n)=>{const{selection:o,dom:r}=e,s=o.getNode(),a=Dt(s);xb(o,!0,()=>{t()}),a&&Dt(s)&&r.isChildOf(s,e.getBody())?e.selection.select(s):n(o.getStart())&&FN(r,o)},FN=(e,t)=>{var n,o;const r=t.getRng(),{startContainer:s,startOffset:a}=r;if(!((i,l)=>{if(If(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),d=parseInt(c,10);return!isNaN(d)&&d>0}return!1})(e,t.getNode())&&ke(s)){const i=s.childNodes,l=e.getRoot();let c;if(a<i.length){const d=i[a];c=new fn(d,(n=e.getParent(d,e.isBlock))!==null&&n!==void 0?n:l)}else{const d=i[i.length-1];c=new fn(d,(o=e.getParent(d,e.isBlock))!==null&&o!==void 0?o:l),c.next(!0)}for(let d=c.current();d;d=c.next()){if(e.getContentEditable(d)==="false")return;if(re(d)&&!jf(d))return r.setStart(d,0),void t.setRng(r)}}},Sb=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(ke(e)||!jf(e))return e}},Ff=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||la(e,t),fi=(e,t,n)=>e.schema.isValidChild(t,n),jf=(e,t=!1)=>{if(le(e)&&re(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return Qa(n)}return!1},Eb=(e,t)=>{const n=e.dom;return If(t)&&n.getContentEditable(t)==="false"&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=D_(o),i=ys(a)?s:`${s},${a}`;return on(B(r),i)})(e,t)&&n.select('[contenteditable="true"]',t).length===0},Ms=(e,t)=>bt(e)?e(t):(le(t)&&(e=e.replace(/%(\w+)/g,(n,o)=>t[o]||n)),e),zf=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Uf=(e,t)=>{if(wt(e))return null;{let n=String(e);return t!=="color"&&t!=="backgroundColor"||(n=Zi(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Gc=(e,t,n)=>{const o=e.getStyle(t,n);return Uf(o,n)},kb=(e,t)=>{let n;return e.getParent(t,o=>!!ke(o)&&(n=e.getStyle(o,"text-decoration"),!!n&&n!=="none")),n},Qc=(e,t,n)=>e.getParents(t,n,e.getRoot()),Hf=(e,t,n)=>{const o=e.formatter.get(t);return le(o)&&kt(o,n)},Ir=e=>ln(e,"block"),Lo=e=>ln(e,"selector"),sn=e=>ln(e,"inline"),qf=e=>Lo(e)&&e.expand!==!1&&!sn(e),_b=e=>(t=>{const n=[];let o=t;for(;o;){if(re(o)&&o.data!==pn||o.childNodes.length>1)return[];ke(o)&&n.push(o),o=o.firstChild}return n})(e).length>0,$f=e=>Do(e.dom)&&_b(e.dom),mi=Po,Nb=Qc,Ab=jf,jN=Ff,Tb=(e,t)=>{let n=t;for(;n;){if(ke(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},Rb=(e,t,n,o)=>{const r=t.data;if(e){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},zN=(e,t,n)=>Rb(e,t,n,o=>Xc(o)||xa(o)),UN=(e,t,n)=>Rb(e,t,n,Of),Ob=(e,t,n,o,r,s)=>{let a;const i=e.getParent(n,d=>Ou(d)||e.isBlock(d)),l=le(i)?i:t,c=(d,f,m)=>{const b=pa(e),g=r?b.backwards:b.forwards;return k.from(g(d,f,(v,h)=>mi(v.parentNode)?-1:(a=v,m(r,v,h)),l))};return c(n,o,zN).bind(d=>s?c(d.container,d.offset+(r?-1:0),UN):k.some(d)).orThunk(()=>a?k.some({container:a,offset:r?0:a.length}):k.none())},Bb=(e,t,n,o,r)=>{const s=o[r];re(o)&&ys(o.data)&&s&&(o=s);const a=Nb(e,o);for(let i=0;i<a.length;i++)for(let l=0;l<t.length;l++){const c=t[l];if((!le(c.collapsed)||c.collapsed===n.collapsed)&&Lo(c)&&e.is(a[i],c.selector))return a[i]}return o},Db=(e,t,n,o)=>{var r;let s=n;const a=e.getRoot(),i=t[0];if(Ir(i)&&(s=i.wrapper?null:e.getParent(n,i.block,a)),!s){const l=(r=e.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&r!==void 0?r:a;s=e.getParent(re(n)?n.parentNode:n,c=>c!==a&&jN(e.schema,c),l)}if(s&&Ir(i)&&i.wrapper&&(s=Nb(e,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!e.isBlock(s[o])&&(s=s[o],!zf(s,"br")););return s||n},Pb=(e,t,n,o)=>{const r=n.parentNode;return!le(n[o])&&(!(r!==t&&!wt(r)&&!e.isBlock(r))||Pb(e,t,r,o))},Jc=(e,t,n,o,r,s)=>{let a=n;const i=r?"previousSibling":"nextSibling",l=e.getRoot();if(re(n)&&!Ab(n)&&(r?o>0:o<n.data.length))return n;for(;a;){if(Ou(a))return n;if(!t[0].block_expand&&e.isBlock(a))return s?a:n;for(let d=a[i];d;d=d[i]){const f=re(d)&&!Pb(e,l,d,i);if(!mi(d)&&(!Ut(c=d)||!c.getAttribute("data-mce-bogus")||c.nextSibling)&&!Ab(d,f))return a}if(a===l||a.parentNode===l){n=a;break}a=a.parentNode}var c;return n},Lb=e=>mi(e.parentNode)||mi(e),wa=(e,t,n,o={})=>{const{includeTrailingSpace:r=!1,expandToBlock:s=!0}=o,a=e.getParent(t.commonAncestorContainer,b=>Ou(b)),i=le(a)?a:e.getRoot();let{startContainer:l,startOffset:c,endContainer:d,endOffset:f}=t;const m=n[0];return ke(l)&&l.hasChildNodes()&&(l=Ds(l,c),re(l)&&(c=0)),ke(d)&&d.hasChildNodes()&&(d=Ds(d,t.collapsed?f:f-1),re(d)&&(f=d.data.length)),l=Tb(e,l),d=Tb(e,d),Lb(l)&&(l=mi(l)?l:l.parentNode,l=t.collapsed?l.previousSibling||l:l.nextSibling||l,re(l)&&(c=t.collapsed?l.length:0)),Lb(d)&&(d=mi(d)?d:d.parentNode,d=t.collapsed?d.nextSibling||d:d.previousSibling||d,re(d)&&(f=t.collapsed?0:d.length)),t.collapsed&&(Ob(e,i,l,c,!0,r).each(({container:b,offset:g})=>{l=b,c=g}),Ob(e,i,d,f,!1,r).each(({container:b,offset:g})=>{d=b,f=g})),(sn(m)||m.block_expand)&&(sn(m)&&re(l)&&c!==0||(l=Jc(e,n,l,c,!0,s)),sn(m)&&re(d)&&f!==d.data.length||(d=Jc(e,n,d,f,!1,s))),qf(m)&&(l=Bb(e,n,t,l,"previousSibling"),d=Bb(e,n,t,d,"nextSibling")),(Ir(m)||Lo(m))&&(l=Db(e,n,l,"previousSibling"),d=Db(e,n,d,"nextSibling"),Ir(m)&&(e.isBlock(l)||(l=Jc(e,n,l,c,!0,s),re(l)&&(c=0)),e.isBlock(d)||(d=Jc(e,n,d,f,!1,s),re(d)&&(f=d.data.length)))),ke(l)&&l.parentNode&&(c=e.nodeIndex(l),l=l.parentNode),ke(d)&&d.parentNode&&(f=e.nodeIndex(d)+1,d=d.parentNode),{startContainer:l,startOffset:c,endContainer:d,endOffset:f}},El=(e,t,n)=>{var o;const r=t.startOffset,s=Ds(t.startContainer,r),a=t.endOffset,i=Ds(t.endContainer,a-1),l=h=>{const C=h[0];re(C)&&C===s&&r>=C.data.length&&h.splice(0,1);const S=h[h.length-1];return a===0&&h.length>0&&S===i&&re(S)&&h.splice(h.length-1,1),h},c=(h,C,S)=>{const E=[];for(;h&&h!==S;h=h[C])E.push(h);return E},d=(h,C)=>e.getParent(h,S=>S.parentNode===C,C),f=(h,C,S)=>{const E=S?"nextSibling":"previousSibling";for(let A=h,N=A.parentNode;A&&A!==C;A=N){N=A.parentNode;const R=c(A===h?A:A[E],E);R.length&&(S||R.reverse(),n(l(R)))}};if(s===i)return n(l([s]));const m=(o=e.findCommonAncestor(s,i))!==null&&o!==void 0?o:e.getRoot();if(e.isChildOf(s,i))return f(s,m,!0);if(e.isChildOf(i,s))return f(i,m);const b=d(s,m)||s,g=d(i,m)||i;f(s,b,!0);const v=c(b===s?b:b.nextSibling,"nextSibling",g===i?g.nextSibling:g);v.length&&n(l(v)),f(i,g)},HN=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Mb=(e,t,n,o,r,s)=>{const{uid:a=t,...i}=n;H(e,ol()),Jt(e,`${Za()}`,a),Jt(e,`${fa()}`,o);const{attributes:l={},classes:c=[]}=r(a,i);if(rr(e,l),((d,f)=>{J(f,m=>{H(d,m)})})(e,c),s){c.length>0&&Jt(e,`${sl()}`,c.join(","));const d=nn(l);d.length>0&&Jt(e,`${al()}`,d.join(","))}},Ib=(e,t,n,o,r)=>{const s=De("span",e);return Mb(s,t,n,o,r,!1),s},qN=(e,t,n,o,r,s)=>{const a=[],i=Ib(e.getDoc(),n,s,o,r),l=os(),c=()=>{l.clear()},d=m=>{J(m,f)},f=m=>{switch(((b,g,v,h)=>ro(g).fold(()=>"skipping",C=>h==="br"||(S=>yn(S)&&ll(S)===pn)(g)?"valid":(S=>Hn(S)&&ae(S,ol()))(g)?"existing":Do(g.dom)?"caret":kt(HN,S=>on(g,S))?"valid-block":fi(b,v,h)&&fi(b,ft(C),v)?"valid":"invalid-child"))(e,m,"span",ft(m))){case"invalid-child":{c();const b=St(m);d(b),c();break}case"valid-block":c(),Mb(m,n,s,o,r,!0);break;case"valid":{const b=l.get().getOrThunk(()=>{const g=ma(i);return a.push(g),l.set(g),g});pt(m,b);break}}};return El(e.dom,t,m=>{c(),(b=>{const g=ot(b,B);d(g)})(m)}),a},Fb=e=>{const t=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Ot(s,a).map(i=>i.settings),getNames:()=>nn(s)}})();((s,a)=>{const i=fa(),l=d=>k.from(d.attr(i)).bind(a.lookup),c=d=>{var f,m;d.attr(Za(),null),d.attr(fa(),null),d.attr(rl(),null);const b=k.from(d.attr(al())).map(C=>C.split(",")).getOr([]),g=k.from(d.attr(sl())).map(C=>C.split(",")).getOr([]);J(b,C=>d.attr(C,null));const v=(m=(f=d.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&m!==void 0?m:[],h=et(v,[ol()].concat(g));d.attr("class",h.length>0?h.join(" "):null),d.attr(sl(),null),d.attr(al(),null)};s.serializer.addTempAttr(rl()),s.serializer.addAttributeFilter(i,d=>{for(const f of d)l(f).each(m=>{m.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})})(e,t);const n=((s,a)=>{const i=mn({}),l=()=>({listeners:[],previous:os()}),c=(b,g)=>{d(b,v=>(g(v),v))},d=(b,g)=>{const v=i.get(),h=g(Ot(v,b).getOrThunk(l));v[b]=h,i.set(v)},f=(b,g)=>{J(Oh(s,b),v=>{g?Jt(v,rl(),"true"):p(v,rl())})},m=ef(()=>{const b=Kr(a.getNames());J(b,g=>{d(g,v=>{const h=v.previous.get();return Th(s,k.some(g)).fold(()=>{h.each(C=>{(S=>{c(S,E=>{J(E.listeners,A=>A(!1,S))})})(g),v.previous.clear(),f(C,!1)})},({uid:C,name:S,elements:E})=>{Ar(h,C)||(h.each(A=>f(A,!1)),((A,N,R)=>{c(A,M=>{J(M.listeners,P=>P(!0,A,{uid:N,nodes:ot(R,z=>z.dom)}))})})(S,C,E),v.previous.set(C),f(C,!0))}),{previous:v.previous,listeners:v.listeners}})})},30);return s.on("remove",()=>{m.cancel()}),s.on("NodeChange",()=>{m.throttle()}),{addListener:(b,g)=>{d(b,v=>({previous:v.previous,listeners:v.listeners.concat([g])}))}}})(e,t),o=Es("span"),r=s=>{J(s,a=>{o(a)?Ht(a):(i=>{ee(i,ol()),p(i,`${Za()}`),p(i,`${fa()}`),p(i,`${rl()}`);const l=sr(i,`${al()}`).map(f=>f.split(",")).getOr([]),c=sr(i,`${sl()}`).map(f=>f.split(",")).getOr([]);var d;J(l,f=>p(i,f)),d=i,J(c,f=>{ee(d,f)}),p(i,`${sl()}`),p(i,`${al()}`)})(a)})};return{register:(s,a)=>{t.register(s,a)},annotate:(s,a)=>{t.lookup(s).each(i=>{((l,c,d,f)=>{l.undoManager.transact(()=>{const m=l.selection,b=m.getRng(),g=ui(l).length>0,v=il("mce-annotation");if(b.collapsed&&!g&&((h,C)=>{const S=wa(h.dom,C,[{inline:"span"}]);C.setStart(S.startContainer,S.startOffset),C.setEnd(S.endContainer,S.endOffset),h.selection.setRng(C)})(l,b),m.getRng().collapsed&&!g){const h=Ib(l.getDoc(),v,f,c,d.decorate);Nn(h,rn),m.getRng().insertNode(h.dom),m.select(h.dom)}else xb(m,!1,()=>{Mf(l,h=>{qN(l,h,v,c,d.decorate,f)})})})})(e,s,i,a)})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{Th(e,k.some(s)).each(({elements:a})=>{const i=e.selection.getBookmark();r(a),e.selection.moveToBookmark(i)})},removeAll:s=>{const a=e.selection.getBookmark();Ct(Bh(e,s),(i,l)=>{r(i)}),e.selection.moveToBookmark(a)},getAll:s=>{const a=Bh(e,s);return gs(a,i=>ot(i,l=>l.dom))}}},kl=e=>({getBookmark:xe(MN,e),moveToBookmark:xe(IN,e)});kl.isBookmarkNode=Po;const jb=(e,t,n)=>!n.collapsed&&kt(n.getClientRects(),o=>((r,s,a)=>s>=r.left&&s<=r.right&&a>=r.top&&a<=r.bottom)(o,e,t)),zb=()=>B(document),Ub=(e,t=!1)=>e.dom.focus({preventScroll:t}),Hb=e=>{const t=jt(e).dom;return e.dom===t.activeElement},Wf=(e=zb())=>k.from(e.dom.activeElement).map(B),qb=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),Vf=Dr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ss={before:Vf.before,on:Vf.on,after:Vf.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(mt,mt,mt)},Zc=Dr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),pi={domRange:Zc.domRange,relative:Zc.relative,exact:Zc.exact,exactFromRange:e=>Zc.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(n=>n.match({domRange:o=>B(o.startContainer),relative:(o,r)=>ss.getStart(o),exact:(o,r,s,a)=>o}))(e);return ar(t)},range:qb},$b=(e,t)=>{const n=yn(t)?ll(t).length:St(t).length+1;return e>n?n:e<0?0:e},$N=e=>pi.range(e.start,$b(e.soffset,e.start),e.finish,$b(e.foffset,e.finish)),Wb=(e,t)=>!wc(t.dom)&&(En(e,t)||Ie(e,t)),Vb=e=>t=>Wb(e,t.start)&&Wb(e,t.finish),WN=e=>pi.range(B(e.startContainer),e.startOffset,B(e.endContainer),e.endOffset),VN=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),k.some(t)}catch{return k.none()}},ed=e=>{const t=(o=>o.inline||gt.browser.isFirefox())(e)?(n=B(e.getBody()),(o=>{const r=o.getSelection();return(r&&r.rangeCount!==0?k.from(r.getRangeAt(0)):k.none()).map(WN)})(ar(n).dom).filter(Vb(n))):k.none();var n;e.bookmark=t.isSome()?t:e.bookmark},Kf=e=>(e.bookmark?e.bookmark:k.none()).bind(t=>{return n=B(e.getBody()),o=t,k.from(o).filter(Vb(n)).map($N);var n,o}).bind(VN),Kb={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},Mo={setEditorTimeout:(e,t,n)=>((o,r)=>(x(r)||(r=0),setTimeout(o,r)))(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const o=((r,s)=>(x(s)||(s=0),setInterval(r,s)))(()=>{e.removed?clearInterval(o):t()},n);return o}};let gi;const Xf=Bt.DOM,Yf=e=>{const t=e.classList;return t!==void 0&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},td=(e,t)=>{const n=P_(e);return Xf.getParent(t,r=>(s=>ke(s)&&Kb.isEditorUIElement(s))(r)||!!n&&e.dom.is(r,n))!==null},Gf=e=>{try{const t=jt(B(e.getElement()));return Wf(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},KN=(e,t)=>{const n=t.editor;(r=>{const s=Rc(()=>{ed(r)},0);r.on("init",()=>{r.inline&&((a,i)=>{const l=()=>{i.throttle()};Bt.DOM.bind(document,"mouseup",l),a.on("remove",()=>{Bt.DOM.unbind(document,"mouseup",l)})})(r,s),((a,i)=>{((l,c)=>{l.on("mouseup touchend",d=>{c.throttle()})})(a,i),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>c.type==="nodechange"&&c.selectionChange)(l)||ed(a)})})(r,s)}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{pN(r)&&r.inline!==!0&&s(B(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=e.focusedEditor;Yf(Gf(n))&&o(n,H),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{Mo.setEditorTimeout(n,()=>{const r=e.focusedEditor;Yf(Gf(n))&&r===n||o(n,ee),td(n,Gf(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),gi||(gi=r=>{const s=e.activeEditor;s&&Ao(r).each(a=>{const i=a;i.ownerDocument===document&&(i===document.body||td(s,i)||e.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},Xf.bind(document,"focusin",gi))},XN=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&gi&&(Xf.unbind(document,"focusin",gi),gi=null)},Xb=(e,t)=>{((n,o)=>(r=>r.collapsed?k.from(Ds(r.startContainer,r.startOffset)).map(B):k.none())(o).bind(r=>jk(r)?k.some(r):En(n,r)?k.none():k.some(n)))(B(e.getBody()),t).bind(n=>jn(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},nd=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},hi=e=>e.inline?(t=>{const n=t.getBody();return n&&(o=B(n),Hb(o)||(r=o,Wf(jt(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(e):(t=>le(t.iframeElement)&&Hb(B(t.iframeElement)))(e),Qf=e=>hi(e)||(t=>{const n=jt(B(t.getElement()));return Wf(n).filter(o=>!Yf(o.dom)&&td(t,o.dom)).isSome()})(e),Jf=e=>e.editorManager.setActive(e),Ce={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Ce.metaKeyPressed(e),metaKeyPressed:e=>gt.os.isMacOS()||gt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Sa="data-mce-selected",Yb=Math.abs,od=Math.round,Zf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Gb=(e,t)=>{const n=t.dom,o=t.getDoc(),r=document,s=t.getBody();let a,i,l,c,d,f,m,b,g,v,h,C,S,E,A;const N=ge=>le(ge)&&(Xg(ge)||n.is(ge,"figure.image")),R=ge=>Br(ge)||n.hasClass(ge,"mce-preview-object"),M=ge=>{const Se=ge.target;((F,U)=>{if((Y=>Y.type==="longpress"||Y.type.indexOf("touch")===0)(F)){const Y=F.touches[0];return N(F.target)&&!jb(Y.clientX,Y.clientY,U)}return N(F.target)&&!jb(F.clientX,F.clientY,U)})(ge,t.selection.getRng())&&!ge.isDefaultPrevented()&&t.selection.select(Se)},P=ge=>n.hasClass(ge,"mce-preview-object")&&le(ge.firstElementChild)?[ge,ge.firstElementChild]:n.is(ge,"figure.image")?[ge.querySelector("img")]:[ge],z=ge=>{const Se=L0(t);return!(!Se||t.mode.isReadOnly())&&ge.getAttribute("data-mce-resize")!=="false"&&ge!==t.getBody()&&(n.hasClass(ge,"mce-preview-object")&&le(ge.firstElementChild)?on(B(ge.firstElementChild),Se):on(B(ge),Se))},V=(ge,Se,F)=>{if(le(F)){const U=P(ge);J(U,Y=>{Y.style[Se]||!t.schema.isValid(Y.nodeName.toLowerCase(),Se)?n.setStyle(Y,Se,F):n.setAttrib(Y,Se,""+F)})}},D=(ge,Se,F)=>{V(ge,"width",Se),V(ge,"height",F)},L=ge=>{let Se,F,U,Y,X;Se=ge.screenX-f,F=ge.screenY-m,C=Se*c[2]+b,S=F*c[3]+g,C=C<5?5:C,S=S<5?5:S,U=(N(a)||R(a))&&k_(t)!==!1?!Ce.modifierPressed(ge):Ce.modifierPressed(ge),U&&(Yb(Se)>Yb(F)?(S=od(C*v),C=od(S/v)):(C=od(S/v),S=od(C*v))),D(i,C,S),Y=c.startPos.x+Se,X=c.startPos.y+F,Y=Y>0?Y:0,X=X>0?X:0,n.setStyles(l,{left:Y,top:X,display:"block"}),l.innerHTML=C+" &times; "+S,Se=s.scrollWidth-E,F=s.scrollHeight-A,Se+F!==0&&n.setStyles(l,{left:Y-Se,top:X-F}),h||(((pe,de,Be,je,Ze)=>{pe.dispatch("ObjectResizeStart",{target:de,width:Be,height:je,origin:Ze})})(t,a,b,g,"corner-"+c.name),h=!0)},j=()=>{const ge=h;h=!1,ge&&(V(a,"width",C),V(a,"height",S)),n.unbind(o,"mousemove",L),n.unbind(o,"mouseup",j),r!==o&&(n.unbind(r,"mousemove",L),n.unbind(r,"mouseup",j)),n.remove(i),n.remove(l),n.remove(d),Q(a),ge&&(((Se,F,U,Y,X)=>{Se.dispatch("ObjectResized",{target:F,width:U,height:Y,origin:X})})(t,a,C,S,"corner-"+c.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},Q=ge=>{Oe();const Se=n.getPos(ge,s),F=Se.x,U=Se.y,Y=ge.getBoundingClientRect(),X=Y.width||Y.right-Y.left,pe=Y.height||Y.bottom-Y.top;a!==ge&&(oe(),a=ge,C=S=0);const de=t.dispatch("ObjectSelected",{target:ge});z(ge)&&!de.isDefaultPrevented()?Ct(Zf,(Be,je)=>{let Ze=n.get("mceResizeHandle"+je);Ze&&n.remove(Ze),Ze=n.add(s,"div",{id:"mceResizeHandle"+je,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+je+"-resize; margin:0; padding:0"}),n.bind(Ze,"mousedown",Pt=>{Pt.stopImmediatePropagation(),Pt.preventDefault(),(Lt=>{const xo=P(a)[0];f=Lt.screenX,m=Lt.screenY,b=xo.clientWidth,g=xo.clientHeight,v=g/b,c=Be,c.name=je,c.startPos={x:X*Be[0]+F,y:pe*Be[1]+U},E=s.scrollWidth,A=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=((ve,tt)=>{if(R(tt))return ve.create("img",{src:gt.transparentSrc});if(Or(tt)){const ct=Kt(c.name,"n")?Sn:nr,Ye=tt.cloneNode(!0);return ct(ve.select("tr",Ye)).each(ht=>{const Tt=ve.select("td,th",ht);ve.setStyle(ht,"height",null),J(Tt,he=>ve.setStyle(he,"height",null))}),Ye}return tt.cloneNode(!0)})(n,a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:F,top:U,margin:0}),D(i,X,pe),i.removeAttribute(Sa),s.appendChild(i),n.bind(o,"mousemove",L),n.bind(o,"mouseup",j),r!==o&&(n.bind(r,"mousemove",L),n.bind(r,"mouseup",j)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},b+" &times; "+g)})(Pt)}),Be.elm=Ze,n.setStyles(Ze,{left:X*Be[0]+F-Ze.offsetWidth/2,top:pe*Be[1]+U-Ze.offsetHeight/2})}):oe(!1)},ie=Rc(Q,0),oe=(ge=!0)=>{ie.cancel(),Oe(),a&&ge&&a.removeAttribute(Sa),Ct(Zf,(Se,F)=>{const U=n.get("mceResizeHandle"+F);U&&(n.unbind(U),n.remove(U))})},we=(ge,Se)=>n.isChildOf(ge,Se),Ne=ge=>{if(h||t.removed||t.composing)return;const Se=ge.type==="mousedown"?ge.target:e.getNode(),F=cr(B(Se),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(Y=>Y.dom).filter(Y=>n.isEditable(Y.parentElement)||Y.nodeName==="IMG"&&n.isEditable(Y)).getOrUndefined(),U=le(F)?n.getAttrib(F,Sa,"1"):"1";if(J(n.select(`img[${Sa}],hr[${Sa}]`),Y=>{Y.removeAttribute(Sa)}),le(F)&&we(F,s)&&Qf(t)){Le();const Y=e.getStart(!0);if(we(Y,F)&&we(e.getEnd(!0),F))return n.setAttrib(F,Sa,U),void ie.throttle(F)}oe()},Oe=()=>{Ct(Zf,ge=>{ge.elm&&(n.unbind(ge.elm),delete ge.elm)})},Le=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Le(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Ne),t.on("keyup compositionend",ge=>{a&&a.nodeName==="TABLE"&&Ne(ge)}),t.on("hide blur",oe),t.on("contextmenu longpress",M,!0)}),t.on("remove",Oe),{isResizable:z,showResizeRect:Q,hideResizeRect:oe,updateResizeRect:Ne,destroy:()=>{ie.cancel(),a=i=d=null}}},Qb=(e,t,n)=>{const o=e.document.createRange();var r;return r=o,t.fold(s=>{r.setStartBefore(s.dom)},(s,a)=>{r.setStart(s.dom,a)},s=>{r.setStartAfter(s.dom)}),((s,a)=>{a.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)})})(o,n),o},em=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},_l=Dr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Jb=(e,t,n)=>t(B(n.startContainer),n.startOffset,B(n.endContainer),n.endOffset);_l.ltr,_l.rtl;const rd=(e,t)=>{const n=ft(e);return n==="input"?ss.after(e):Te(["br","img"],n)?t===0?ss.before(e):ss.after(e):ss.on(e,t)},YN=(e,t)=>{const n=e.fold(ss.before,rd,ss.after),o=t.fold(ss.before,rd,ss.after);return pi.relative(n,o)},Zb=(e,t,n,o)=>{const r=rd(e,t),s=rd(n,o);return pi.relative(r,s)},tm=(e,t)=>{const n=(t||document).createDocumentFragment();return J(e,o=>{n.appendChild(o.dom)}),B(n)},GN=e=>{const t=pi.getWin(e).dom,n=(r,s,a,i)=>em(t,r,s,a,i),o=(r=>r.match({domRange:s=>{const a=B(s.startContainer),i=B(s.endContainer);return Zb(a,s.startOffset,i,s.endOffset)},relative:YN,exact:Zb}))(e);return((r,s)=>{const a=((i,l)=>l.match({domRange:c=>({ltr:fe(c),rtl:k.none}),relative:(c,d)=>({ltr:Vo(()=>Qb(i,c,d)),rtl:Vo(()=>k.some(Qb(i,d,c)))}),exact:(c,d,f,m)=>({ltr:Vo(()=>em(i,c,d,f,m)),rtl:Vo(()=>k.some(em(i,f,m,c,d)))})}))(r,s);return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(d=>d.collapsed===!1).map(d=>_l.rtl(B(d.endContainer),d.endOffset,B(d.startContainer),d.startOffset)).getOrThunk(()=>Jb(0,_l.ltr,c)):Jb(0,_l.ltr,c)})(0,a)})(t,o).match({ltr:n,rtl:n})},QN=(e,t,n)=>((o,r,s)=>((a,i,l)=>a.caretPositionFromPoint?((c,d,f)=>{var m;return k.from((m=c.caretPositionFromPoint)===null||m===void 0?void 0:m.call(c,d,f)).bind(b=>{if(b.offsetNode===null)return k.none();const g=c.createRange();return g.setStart(b.offsetNode,b.offset),g.collapse(),k.some(g)})})(a,i,l):a.caretRangeFromPoint?((c,d,f)=>{var m;return k.from((m=c.caretRangeFromPoint)===null||m===void 0?void 0:m.call(c,d,f))})(a,i,l):k.none())(o.document,r,s).map(a=>qb(B(a.startContainer),a.startOffset,B(a.endContainer),a.endOffset)))(e,t,n),ev=(e,t,n)=>{const o=ar(B(n));return QN(o.dom,e,t).map(r=>{const s=n.createRange();return s.setStart(r.start.dom,r.soffset),s.setEnd(r.finish.dom,r.foffset),s}).getOrUndefined()},nm=(e,t)=>le(e)&&le(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,tv=(e,t,n)=>((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(e,t,n)!==null,JN=(e,t,n)=>tv(e,t,o=>o.nodeName===n),ZN=(e,t)=>Oo(e)&&!tv(e,t,Do),nv=(e,t,n)=>{const o=t.parentNode;if(o){const r=new fn(t,e.getParent(o,e.isBlock)||e.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(Ut(s))return!0}return!1},om=(e,t,n,o,r)=>{const s=e.getRoot(),a=e.schema.getNonEmptyElements(),i=r.parentNode;let l,c;if(!i)return k.none();const d=e.getParent(i,e.isBlock)||s;if(o&&Ut(r)&&t&&e.isEmpty(d))return k.some(G(i,e.nodeIndex(r)));const f=new fn(r,d);for(;c=f[o?"prev":"next"]();){if(e.getContentEditableParent(c)==="false"||ZN(c,s))return k.none();if(re(c)&&c.data.length>0)return JN(c,s,"A")?k.none():k.some(G(c,o?c.data.length:0));if(e.isBlock(c)||a[c.nodeName.toLowerCase()])return k.none();l=c}return Ts(l)?k.none():n&&l?k.some(G(l,0)):k.none()},ov=(e,t,n,o)=>{const r=e.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=ke(i)&&l===i.childNodes.length,d=e.schema.getNonEmptyElements();let f=n;if(Oo(i))return k.none();if(ke(i)&&l>i.childNodes.length-1&&(f=!1),Qi(i)&&(i=r,l=0),i===r){if(f&&(s=i.childNodes[l>0?l-1:0],s)&&(Oo(s)||d[s.nodeName]||Or(s)))return k.none();if(i.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=re(i)&&c?i.data.length:0,!t&&i===r.lastChild&&Or(i)||((m,b)=>{let g=b;for(;g&&g!==m;){if(Dt(g))return!0;g=g.parentNode}return!1})(r,i)||Oo(i)||Bu(i))return k.none();if(i.hasChildNodes()&&!Or(i)){s=i;const m=new fn(i,r);do{if(Dt(s)||Oo(s)){a=!1;break}if(re(s)&&s.data.length>0){l=f?0:s.data.length,i=s,a=!0;break}if(d[s.nodeName.toLowerCase()]&&!pk(s)){l=e.nodeIndex(s),i=s.parentNode,f||l++,a=!0;break}}while(s=f?m.next():m.prev())}}}return t&&(re(i)&&l===0&&om(e,c,t,!0,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),ke(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Ut(s)||(m=>{var b;return((b=m.previousSibling)===null||b===void 0?void 0:b.nodeName)==="A"})(s)||nv(e,s,!1)||nv(e,s,!0)||om(e,c,t,!0,s).each(m=>{i=m.container(),l=m.offset(),a=!0}))),f&&!t&&re(i)&&l===i.data.length&&om(e,c,t,!1,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),a&&i?k.some(G(i,l)):k.none()},sd=(e,t)=>{const n=t.collapsed,o=t.cloneRange(),r=G.fromRangeStart(t);return ov(e,n,!0,o).each(s=>{n&&G.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||ov(e,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),nm(t,o)?k.none():k.some(o)},ad=(e,t)=>e.splitText(t),id=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset;if(t===o&&re(t)){if(n>0&&n<t.data.length)if(o=ad(t,n),t=o.previousSibling,r>n){r-=n;const s=ad(o,r).previousSibling;t=o=s,r=s.data.length,n=0}else r=0}else if(re(t)&&n>0&&n<t.data.length&&(t=ad(t,n),n=0),re(o)&&r>0&&r<o.data.length){const s=ad(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:r}},Ea=e=>({walk:(t,n)=>El(e,t,n),split:id,expand:(t,n={type:"word"})=>{if(n.type==="word"){const o=wa(e,t,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),r=e.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return t},normalize:t=>sd(e,t).fold(yt,n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0))});Ea.compareRanges=nm,Ea.getCaretRangeFromPoint=ev,Ea.getSelectedNode=Lc,Ea.getNode=Ds;const eA=(e=>{const t=o=>{const r=(s=>{const a=s.dom;return ir(s)?a.getBoundingClientRect().height:a.offsetHeight})(o);if(r<=0||r===null){const s=W(o,e);return parseFloat(s)||0}return r},n=(o,r)=>hn(r,(s,a)=>{const i=W(o,a),l=i===void 0?0:parseInt(i,10);return isNaN(l)?s:s+l},0);return{set:(o,r)=>{if(!x(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);const s=o.dom;ts(s)&&(s.style[e]=r+"px")},get:t,getOuter:t,aggregate:n,max:(o,r,s)=>{const a=n(o,s);return r>a?r-a:0}}})("height"),rv=(e,t)=>e.view(t).fold(fe([]),n=>{const o=e.owner(n),r=rv(e,o);return[n].concat(r)});var tA=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?k.none():k.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(B)},owner:e=>Mt(e)});const rm=e=>ft(e)==="textarea",sv=(e,t)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return vo(a.offsetLeft,a.offsetTop);const c=Zn(i?.pageYOffset,l.scrollTop),d=Zn(i?.pageXOffset,l.scrollLeft),f=Zn(l.clientTop,a.clientTop),m=Zn(l.clientLeft,a.clientLeft);return As(r).translate(d-m,c-f)})(e),o=(r=>eA.get(r))(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},av=(e,t,n,o)=>{oA(e,(r,s)=>nA(e,t,n,o),n)},iv=(e,t,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};((a,i)=>a.dispatch("ScrollIntoView",i).isDefaultPrevented())(e,s)||(n(e,t,Ga(t).top,o,r),((a,i)=>{a.dispatch("AfterScrollIntoView",i)})(e,s))},nA=(e,t,n,o)=>{const r=B(e.getBody()),s=B(e.getDoc());r.dom.offsetWidth;const a=((i,l)=>{const c=((f,m)=>{const b=St(f);if(b.length===0||rm(f))return{element:f,offset:m};if(m<b.length&&!rm(b[m]))return{element:b[m],offset:0};{const g=b[b.length-1];return rm(g)?{element:f,offset:m}:ft(g)==="img"?{element:g,offset:1}:yn(g)?{element:g,offset:ll(g).length}:{element:g,offset:St(g).length}}})(i,l),d=me('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return Re(c.element,d),sv(d,()=>Pe(d))})(B(n.startContainer),n.startOffset);iv(e,s,t,a,o),a.cleanup()},lv=(e,t,n,o)=>{const r=B(e.getDoc());iv(e,r,n,(s=>sv(B(s),Ee))(t),o)},oA=(e,t,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;t(B(o),B(s));const i=e.dom.createRng();i.setStart(o,r),i.setEnd(s,a),e.selection.setRng(n)},sm=(e,t,n,o,r)=>{const s=t.pos;if(o)Xi(s.left,s.top,r);else{const a=s.top-n+t.height;Xi(-e.getBody().getBoundingClientRect().left,a,r)}},cv=(e,t,n,o,r,s)=>{const a=o+n,i=r.pos.top,l=r.bottom,c=l-i>=o;i<n?sm(e,r,o,s!==!1,t):i>a?sm(e,r,o,c?s!==!1:s===!0,t):l>a&&!c&&sm(e,r,o,s===!0,t)},dv=(e,t,n,o,r)=>{const s=ar(t).dom.innerHeight;cv(e,t,n,s,o,r)},uv=(e,t,n,o,r)=>{const s=ar(t).dom.innerHeight;cv(e,t,n,s,o,r);const a=(l=>{const c=zb(),d=Ga(c),f=((g,v)=>{const h=v.owner(g);return rv(v,h)})(l,tA),m=As(l),b=Vr(f,(g,v)=>{const h=As(v);return{left:g.left+h.left,top:g.top+h.top}},{left:0,top:0});return vo(b.left+m.left+d.left,b.top+m.top+d.top)})(o.element),i=Hg(window);a.top<i.y?xc(o.element,r!==!1):a.top>i.bottom&&xc(o.element,r===!0)},rA=(e,t,n)=>av(e,dv,t,n),sA=(e,t,n)=>lv(e,t,dv,n),aA=(e,t,n)=>av(e,uv,t,n),iA=(e,t,n)=>lv(e,t,uv,n),Nl=(e,t,n)=>{(e.inline?rA:aA)(e,t,n)},fv=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),mv=(e,t,n,o,r)=>{const s=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return k.from(s).map(B).map(i=>o&&t.collapsed?i:$t(i,r(i,a)).getOr(i)).bind(i=>Hn(i)?k.some(i):ro(i).filter(Hn)).map(i=>i.dom).getOr(e)},pv=(e,t,n=!1)=>mv(e,t,!0,n,(o,r)=>Math.min(_n(o),r)),gv=(e,t,n=!1)=>mv(e,t,!1,n,(o,r)=>r>0?r-1:r),hv=(e,t)=>{const n=e;for(;e&&re(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},am=(e,t)=>ot(t,n=>{const o=e.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),lA={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ld=(e,t,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[o])return e[o];if(e!==t){let s=e[r];if(s)return s;for(let a=e.parent;a&&a!==t;a=a.parent)if(s=a[r],s)return s}},cA=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!Qa(n))return!1;const o=e.parent;return!o||o.name==="span"&&!o.attr("style")||!/^[ ]+$/.test(n)},bv=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Wn{static create(t,n){const o=new Wn(t,lA[t]||1);return n&&Ct(n,(r,s)=>{o.attr(s,r)}),o}constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const o=this;if(!Ae(t))return le(t)&&Ct(t,(s,a)=>{o.attr(a,s)}),o;const r=o.attributes;if(r){if(n!==void 0){if(n===null){if(t in r.map){delete r.map[t];let s=r.length;for(;s--;)if(r[s].name===t)return r.splice(s,1),o}return o}if(t in r.map){let s=r.length;for(;s--;)if(r[s].name===t){r[s].value=n;break}}else r.push({name:t,value:n});return r.map[t]=n,o}return r.map[t]}}clone(){const t=this,n=new Wn(t.name,t.type),o=t.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];i.name!=="id"&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const o=n.next;t.insert(n,t,!0),n=o}t.remove()}remove(){const t=this,n=t.parent,o=t.next,r=t.prev;return n&&(n.firstChild===t?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===t?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const o=n.lastChild;return o?(o.next=t,t.prev=o,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,o){t.parent&&t.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===r.lastChild?r.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=r,t}getAll(t){const n=this,o=[];for(let r=n.firstChild;r;r=ld(r,n))r.name===t&&o.push(r);return o}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let r=t.firstChild;r;r=ld(r,t))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},o){var r;const s=this;let a=s.firstChild;if(bv(s))return!1;if(a)do{if(a.type===1){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||bv(a))return!1}if(a.type===8||a.type===3&&!cA(a)||a.type===3&&a.parent&&n[a.parent.name]&&Qa((r=a.value)!==null&&r!==void 0?r:"")||o&&o(a))return!1}while(a=ld(a,s));return!0}walk(t){return ld(this,null,t)}}const dA=ce.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),vv=e=>Ae(e.nodeValue)&&e.nodeValue.includes(pn),yv=e=>(e.length===0?"":`${ot(e,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',Cv=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>vv(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),xv=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(vv(t)){const n=t.parentNode;return n&&Fe(dA,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),uA=e=>Cv(e).nextNode()!==null,fA=e=>xv(e).nextNode()!==null,mA=(e,t)=>t.querySelector(yv(e))!==null,pA=(e,t)=>{J(((n,o)=>o.querySelectorAll(yv(n)))(e,t),n=>{const o=B(n);Jn(o,"data-mce-bogus")==="all"?Pe(o):J(e,r=>{u(o,r)&&p(o,r)})})},wv=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},gA=wn(wv,Cv),hA=wn(wv,xv),Sv=(e,t)=>{const n=[{condition:xe(mA,t),action:xe(pA,t)},{condition:uA,action:gA},{condition:fA,action:hA}];let o=e,r=!1;return J(n,({condition:s,action:a})=>{s(o)&&(r||(o=e.cloneNode(!0),r=!0),a(o))}),o},Ev=e=>{const t=Mn(e,"[data-mce-bogus]");J(t,n=>{Jn(n,"data-mce-bogus")==="all"?Pe(n):ga(n)?(Re(n,lt(Yi)),Pe(n)):Ht(n)})},kv=e=>{const t=Mn(e,"input");J(t,n=>{p(n,"name")})},bA=(e,t,n)=>{let o;return o=t.format==="raw"?ce.trim(yo(Sv(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?((r,s)=>{const a=r.getDoc(),i=jt(B(r.getBody())),l=De("div",a);Jt(l,"data-mce-bogus","all"),I(l,{position:"fixed",left:"-9999999px",top:"0"}),Nn(l,s.innerHTML),Ev(l),kv(l);const c=(f=>st(f)?f:B(Mt(f).dom.body))(i);at(c,l);const d=yo(l.dom.innerText);return Pe(l),d})(e,n):t.format==="tree"?e.serializer.serialize(n,t):((r,s)=>{const a=Fn(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${a}>[\r
]*|<br \\/>[\r
]*)$`);return s.replace(i,"")})(e,e.serializer.serialize(n,t)),t.format!=="text"&&!Oc(B(n))&&Ae(o)?ce.trim(o):o},_v=ce.makeMap,Nv=e=>{const t=[],n=(e=e||{}).indent,o=_v(e.indent_before||""),r=_v(e.indent_after||""),s=da.getEncodeFunc(e.entity_encoding||"raw",e.entities),a=e.element_format!=="xhtml";return{start:(i,l,c)=>{if(n&&o[i]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}if(t.push("<",i),l)for(let d=0,f=l.length;d<f;d++){const m=l[d];t.push(" ",m.name,'="',s(m.value,!0),'"')}if(t[t.length]=!c||a?">":" />",c&&n&&r[i]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}},end:i=>{let l;t.push("</",i,">"),n&&r[i]&&t.length>0&&(l=t[t.length-1],l.length>0&&l!==`
`&&t.push(`
`))},text:(i,l)=>{i.length>0&&(t[t.length]=l?i:s(i))},cdata:i=>{t.push("<![CDATA[",i,"]]>")},comment:i=>{t.push("<!--",i,"-->")},pi:(i,l)=>{l?t.push("<?",i," ",s(l),"?>"):t.push("<?",i,"?>"),n&&t.push(`
`)},doctype:i=>{t.push("<!DOCTYPE",i,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Is=(e={},t=Rs())=>{const n=Nv(e);return e.validate=!("validate"in e)||e.validate,{serialize:o=>{const r=e.validate,s={3:i=>{var l;n.text((l=i.value)!==null&&l!==void 0?l:"",i.raw)},8:i=>{var l;n.comment((l=i.value)!==null&&l!==void 0?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype((l=i.value)!==null&&l!==void 0?l:"")},4:i=>{var l;n.cdata((l=i.value)!==null&&l!==void 0?l:"")},11:i=>{let l=i;if(l=l.firstChild)do a(l);while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const d=i.name,f=d in t.getVoidElements();let m=i.attributes;if(r&&m&&m.length>1){const b=[];b.map={};const g=t.getElementRule(i.name);if(g){for(let v=0,h=g.attributesOrder.length;v<h;v++){const C=g.attributesOrder[v];if(C in m.map){const S=m.map[C];b.map[C]=S,b.push({name:C,value:S})}}for(let v=0,h=m.length;v<h;v++){const C=m[v].name;if(!(C in b.map)){const S=m.map[C];b.map[C]=S,b.push({name:C,value:S})}}m=b}}if(n.start(d,m,f),ia(d))Ae(i.value)&&n.text(i.value,!0),n.end(d);else if(!f){let b=i.firstChild;if(b){d!=="pre"&&d!=="textarea"||b.type!==3||((l=b.value)===null||l===void 0?void 0:l[0])!==`
`||n.text(`
`,!0);do a(b);while(b=b.next)}n.end(d)}}};return o.type!==1||e.inner?o.type===3?s[3](o):s[11](o):a(o),n.getContent()}}},Av=new Set;J(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{Av.add(e)});const Tv=new Set;J(["background-color"],e=>{Tv.add(e)});const Rv=["font","text-decoration","text-emphasis"],bi=(e,t)=>nn(((n,o)=>n.parseStyle(n.getAttrib(o,"style")))(e,t)),Ov=(e,t)=>kt(bi(e,t),n=>(o=>Av.has(o))(n)),Bv=(e,t,n)=>k.from(n.container()).filter(re).exists(o=>{const r=e?0:-1;return t(o.data.charAt(n.offset()+r))}),im=xe(Bv,!0,xa),lm=xe(Bv,!1,xa),vA=e=>{const t=e.container();return re(t)&&(t.data.length===0||Bc(t.data)&&kl.isBookmarkNode(t.parentNode))},Fs=(e,t)=>n=>Ef(e?0:-1,n).filter(t).isSome(),Dv=e=>Xg(e)&&W(B(e),"display")==="block",Pv=e=>Dt(e)&&!(t=>ke(t)&&t.getAttribute("data-mce-bogus")==="all")(e),yA=Fs(!0,Dv),CA=Fs(!1,Dv),Al=Fs(!0,Br),Tl=Fs(!1,Br),Lv=Fs(!0,Or),cm=Fs(!1,Or),js=Fs(!0,Pv),zs=Fs(!1,Pv),Mv=(e,t)=>((n,o,r)=>En(o,n)?ks(n,s=>r(s)||Ie(s,o)).slice(0,-1):[])(e,t,yt),as=(e,t)=>[e].concat(Mv(e,t)),dm=(e,t,n)=>ub(e,t,n,vA),Iv=(e,t,n)=>Gt(as(B(t.container()),e),(o=>r=>o.isBlock(ft(r)))(n)),Fv=(e,t,n,o)=>dm(e,t.dom,n).forall(r=>Iv(t,n,o).fold(()=>!Pr(r,n,t.dom),s=>!Pr(r,n,t.dom)&&En(s,B(r.container())))),jv=(e,t,n,o)=>Iv(t,n,o).fold(()=>dm(e,t.dom,n).forall(r=>!Pr(r,n,t.dom)),r=>dm(e,r.dom,n).isNone()),um=xe(jv,!1),zv=xe(jv,!0),xA=xe(Fv,!1),wA=xe(Fv,!0),SA=e=>$c(e).exists(ga),cd=(e,t,n,o)=>{const r=Ke(as(B(n.container()),t),a=>o.isBlock(ft(a))),s=Sn(r).getOr(t);return Bo(e,s.dom,n).filter(SA)},fm=(e,t,n)=>$c(t).exists(ga)||cd(!0,e,t,n).isSome(),dd=(e,t,n)=>(o=>k.from(o.getNode(!0)).map(B))(t).exists(ga)||cd(!1,e,t,n).isSome(),Uv=xe(cd,!1),EA=xe(cd,!0),Hv=e=>G.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),qv=(e,t,n)=>{const o=Ke(as(B(t.container()),e),r=>n.isBlock(ft(r)));return Sn(o).getOr(e)},$v=(e,t,n)=>Hv(t)?lm(t):lm(t)||lo(qv(e,t,n).dom,t).exists(lm),Wv=(e,t,n)=>Hv(t)?im(t):im(t)||to(qv(e,t,n).dom,t).exists(im),mm=e=>$c(e).bind(t=>qn(t,Hn)).exists(t=>(n=>Te(["pre","pre-wrap"],n))(W(t,"white-space"))),Vv=(e,t)=>n=>{return o=new fn(n,e)[t](),le(o)&&Dt(o)&&J0(o);var o},Kv=(e,t,n)=>!mm(t)&&(((o,r,s)=>((a,i)=>lo(a.dom,i).isNone())(o,r)||((a,i)=>to(a.dom,i).isNone())(o,r)||um(o,r,s)||zv(o,r,s)||dd(o,r,s)||fm(o,r,s))(e,t,n)||$v(e,t,n)||Wv(e,t,n)),Rl=(e,t,n)=>!mm(t)&&(um(e,t,n)||xA(e,t,n)||dd(e,t,n)||$v(e,t,n)||((o,r)=>{const s=lo(o.dom,r).getOr(r),a=Vv(o.dom,"prev");return r.isAtStart()&&(a(r.container())||a(s.container()))})(e,t)),Ol=(e,t,n)=>!mm(t)&&(zv(e,t,n)||wA(e,t,n)||fm(e,t,n)||Wv(e,t,n)||((o,r)=>{const s=to(o.dom,r).getOr(r),a=Vv(o.dom,"next");return r.isAtEnd()&&(a(r.container())||a(s.container()))})(e,t)),pm=(e,t,n)=>Rl(e,t,n)||Ol(e,(o=>{const r=o.container(),s=o.offset();return re(r)&&s<r.data.length?G(r,s+1):o})(t),n),Xv=(e,t)=>Xc(e.charAt(t)),Yv=(e,t)=>xa(e.charAt(t)),Gv=(e,t,n,o)=>{const r=t.data,s=G(t,0);return n||!Xv(r,0)||pm(e,s,o)?!!(n&&Yv(r,0)&&Rl(e,s,o))&&(t.data=rn+r.slice(1),!0):(t.data=" "+r.slice(1),!0)},Qv=(e,t,n,o)=>{const r=t.data,s=G(t,r.length-1);return n||!Xv(r,r.length-1)||pm(e,s,o)?!!(n&&Yv(r,r.length-1)&&Ol(e,s,o))&&(t.data=r.slice(0,-1)+rn,!0):(t.data=r.slice(0,-1)+" ",!0)},kA=(e,t,n)=>{const o=t.container();if(!re(o))return k.none();if((r=>{const s=r.container();return re(s)&&cn(s.data,rn)})(t)){const r=Gv(e,o,!1,n)||(s=>{const a=s.data,i=(l=>{const c=l.split("");return ot(c,(d,f)=>Xc(d)&&f>0&&f<c.length-1&&Of(c[f-1])&&Of(c[f+1])?" ":d).join("")})(a);return i!==a&&(s.data=i,!0)})(o)||Qv(e,o,!1,n);return xs(r,t)}if(pm(e,t,n)){const r=Gv(e,o,!0,n)||Qv(e,o,!0,n);return xs(r,t)}return k.none()},Jv=(e,t,n,o)=>{if(n===0)return;const r=B(e),s=To(r,c=>o.isBlock(ft(c))).getOr(r),a=e.data.slice(t,t+n),i=t+n>=e.data.length&&Ol(s,G(e,e.data.length),o),l=t===0&&Rl(s,G(e,0),o);e.replaceData(t,n,Vg(a,4,l,i))},ud=(e,t,n)=>{const o=e.data.slice(t),r=o.length-vu(o).length;Jv(e,t,r,n)},gm=(e,t,n)=>{const o=e.data.slice(0,t),r=o.length-vs(o).length;Jv(e,t-r,r,n)},hm=(e,t,n,o,r=!0)=>{const s=vs(e.data).length,a=r?e:t,i=r?t:e;return r?a.appendData(i.data):a.insertData(0,i.data),Pe(B(i)),o&&ud(a,s,n),a},_A=(e,t)=>((n,o)=>{const r=n.container(),s=n.offset();return!G.isTextPosition(n)&&r===o.parentNode&&s>G.before(o).offset()})(t,e)?G(t.container(),t.offset()-1):t,Zv=e=>{return mr(e.previousSibling)?k.some((t=e.previousSibling,re(t)?G(t,t.data.length):G.after(t))):e.previousSibling?Go(e.previousSibling):k.none();var t},ey=e=>{return mr(e.nextSibling)?k.some((t=e.nextSibling,re(t)?G(t,0):G.before(t))):e.nextSibling?jn(e.nextSibling):k.none();var t},NA=(e,t,n)=>((o,r,s)=>o?((a,i)=>ey(i).orThunk(()=>Zv(i)).orThunk(()=>((l,c)=>to(l,G.after(c)).orThunk(()=>lo(l,G.before(c))))(a,i)))(r,s):((a,i)=>Zv(i).orThunk(()=>ey(i)).orThunk(()=>((l,c)=>k.from(c.previousSibling?c.previousSibling:c.parentNode).bind(d=>lo(l,G.before(d))).orThunk(()=>to(l,G.after(c))))(a,i)))(r,s))(e,t,n).map(xe(_A,n)),ty=(e,t,n)=>{n.fold(()=>{e.focus()},o=>{e.selection.setRng(o.toRange(),t)})},AA=(e,t)=>t&&Fe(e.schema.getBlockElements(),ft(t)),ka=(e,t,n,o=!0,r=!1)=>{const s=NA(t,e.getBody(),n.dom),a=To(n,xe(AA,e),(i=e.getBody(),c=>c.dom===i));var i;const l=((c,d,f,m)=>{const b=Ln(c).filter(yn),g=bo(c).filter(yn);return Pe(c),(v=b,h=g,C=d,S=(E,A,N)=>{const R=E.dom,M=A.dom,P=R.data.length;return hm(R,M,f,m),N.container()===M?G(R,P):N},v.isSome()&&h.isSome()&&C.isSome()?k.some(S(v.getOrDie(),h.getOrDie(),C.getOrDie())):k.none()).orThunk(()=>(m&&(b.each(E=>gm(E.dom,E.dom.length,f)),g.each(E=>ud(E.dom,0,f))),d));var v,h,C,S})(n,s,e.schema,((c,d)=>Fe(c.schema.getTextInlineElements(),ft(d)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind(c=>((d,f,m)=>{if(In(d,f)){const b=me('<br data-mce-bogus="1">');return m?J(St(f),g=>{$f(g)||Pe(g)}):vt(f),at(f,b),k.some(G.before(b.dom))}return k.none()})(e.schema,c,r)).fold(()=>{o&&ty(e,t,l)},c=>{o&&ty(e,t,k.some(c))})},TA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,_a=(e,t)=>on(B(t),E_(e))&&!la(e.schema,t)&&e.dom.isEditable(t),ny=e=>{var t;return Bt.DOM.getStyle(e,"direction",!0)==="rtl"||(n=>TA.test(n))((t=e.textContent)!==null&&t!==void 0?t:"")},Us=(e,t,n)=>{const o=((r,s,a)=>Ke(Bt.DOM.getParents(a.container(),"*",s),r))(e,t,n);return k.from(o[o.length-1])},Io=(e,t)=>{const n=t.container(),o=t.offset();return e?Bs(n)?re(n.nextSibling)?G(n.nextSibling,0):G.after(n):of(t)?G(n,o+1):t:Bs(n)?re(n.previousSibling)?G(n.previousSibling,n.previousSibling.data.length):G.before(n):rf(t)?G(n,o-1):t},oy=xe(Io,!0),ry=xe(Io,!1),sy=(e,t)=>{const n=o=>o.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},fd=e=>sy(e,"Delete"),ay=e=>sy(e,"ForwardDelete"),RA=e=>jh(e)||ti(e),md=(e,t)=>En(e,t)?qn(t,RA,(n=>o=>Ar(ro(o),n,Ie))(e)):k.none(),bm=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},iy=(e,t,n)=>vn(jn(n),Go(n),(o,r)=>{const s=Io(!0,o),a=Io(!1,r),i=Io(!1,t);return e?to(n,i).exists(l=>l.isEqual(a)&&t.isEqual(s)):lo(n,i).exists(l=>l.isEqual(s)&&t.isEqual(a))}).getOr(!0),ly=e=>{var t;return(Wi(t=e)===8||ft(t)==="#comment"?Ln(e):Ko(e)).bind(ly).orThunk(()=>k.some(e))},cy=(e,t,n,o=!0)=>{var r;t.deleteContents();const s=ly(n).getOr(n),a=B((r=e.dom.getParent(s.dom,e.dom.isBlock))!==null&&r!==void 0?r:n.dom);if(a.dom===e.getBody()?bm(e,o):In(e.schema,a,{checkRootAsContent:!1})&&(Os(a),o&&e.selection.setCursorLocation(a.dom,0)),!Ie(n,a)){const l=Ar(ro(a),n)?[]:ro(i=a).map(St).map(c=>Ke(c,d=>!Ie(i,d))).getOr([]);J(l.concat(St(n)),c=>{Ie(c,a)||En(c,a)||!In(e.schema,c)||Pe(c)})}var i},vm=e=>Mn(e,"td,th"),dy=(e,t)=>wl(B(e),t),ym=(e,t)=>({start:e,end:t}),Bl=Dr([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),pd=(e,t)=>cr(B(e),"td,th",t),uy=e=>!Ie(e.start,e.end),fy=(e,t)=>wl(e.start,t).bind(n=>wl(e.end,t).bind(o=>xs(Ie(n,o),n))),Cm=e=>t=>fy(t,e).map(n=>((o,r,s)=>({rng:o,table:r,cells:s}))(t,n,vm(n))),my=(e,t,n,o)=>{if(n.collapsed||!e.forall(uy))return k.none();if(t.isSameTable){const r=e.bind(Cm(o));return k.some({start:r,end:r})}{const r=pd(n.startContainer,o),s=pd(n.endContainer,o),a=r.bind((l=>c=>wl(c,l).bind(d=>nr(vm(d)).map(f=>ym(c,f))))(o)).bind(Cm(o)),i=s.bind((l=>c=>wl(c,l).bind(d=>Sn(vm(d)).map(f=>ym(f,c))))(o)).bind(Cm(o));return k.some({start:a,end:i})}},py=(e,t)=>Xs(e,n=>Ie(n,t)),xm=e=>vn(py(e.cells,e.rng.start),py(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),gy=(e,t)=>{const{startTable:n,endTable:o}=t,r=e.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},OA=(e,t)=>{const n=(s=>a=>Ie(s,a))(e),o=((s,a)=>{const i=pd(s.startContainer,a),l=pd(s.endContainer,a);return vn(i,l,ym)})(t,n),r=((s,a)=>{const i=dy(s.startContainer,a),l=dy(s.endContainer,a),c=i.isSome(),d=l.isSome(),f=vn(i,l,Ie).getOr(!1);return(m=>vn(m.startTable,m.endTable,(b,g)=>{const v=Nu(b,C=>Ie(C,g)),h=Nu(g,C=>Ie(C,b));return v||h?{...m,startTable:v?k.none():m.startTable,endTable:h?k.none():m.endTable,isSameTable:!1,isMultiTable:!1}:m}).getOr(m))({startTable:i,endTable:l,isStartInTable:c,isEndInTable:d,isSameTable:f,isMultiTable:!f&&c&&d})})(t,n);return((s,a,i)=>s.exists(l=>((c,d)=>!uy(c)&&fy(c,d).exists(f=>{const m=f.dom.rows;return m.length===1&&m[0].cells.length===1}))(l,i)&&Pf(l.start,a)))(o,t,n)?o.map(s=>Bl.singleCellTable(t,s.start)):r.isMultiTable?((s,a,i,l)=>my(s,a,i,l).bind(({start:c,end:d})=>{const f=c.bind(xm).getOr([]),m=d.bind(xm).getOr([]);if(f.length>0&&m.length>0){const b=gy(i,a);return k.some(Bl.multiTable(f,m,b))}return k.none()}))(o,r,t,n):((s,a,i,l)=>my(s,a,i,l).bind(({start:c,end:d})=>c.or(d)).bind(c=>{const{isSameTable:d}=a,f=xm(c).getOr([]);if(d&&c.cells.length===f.length)return k.some(Bl.fullTable(c.table));if(f.length>0){if(d)return k.some(Bl.partialTable(f,k.none()));{const m=gy(i,a);return k.some(Bl.partialTable(f,k.some({...a,rng:m})))}}return k.none()}))(o,r,t,n)},hy=e=>J(e,t=>{p(t,"contenteditable"),Os(t)}),wm=(e,t,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(t.dom.lastChild)):(r.setStartBefore(t.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Sm(e,r,t,!1).each(s=>s())},by=e=>{const t=ui(e),n=B(e.selection.getNode());Ec(n.dom)&&In(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&kt(t,o=>Ie(o,n))&&Jt(n,"data-mce-selected","1")},vy=(e,t,n)=>k.some(()=>{const o=e.selection.getRng(),r=n.bind(({rng:s,isStartInTable:a})=>{const i=((c,d)=>k.from(c.dom.getParent(d,c.dom.isBlock)).map(B))(e,a?s.endContainer:s.startContainer);s.deleteContents(),((c,d,f)=>{f.each(m=>{d?Pe(m):(Os(m),c.selection.setCursorLocation(m.dom,0))})})(e,a,i.filter(xe(In,e.schema)));const l=a?t[0]:t[t.length-1];return wm(e,l,o,a),In(e.schema,l)?k.none():k.some(a?t.slice(1):t.slice(0,-1))}).getOr(t);hy(r),by(e)}),BA=(e,t,n,o)=>k.some(()=>{const r=e.selection.getRng(),s=t[0],a=n[n.length-1];wm(e,s,r,!0),wm(e,a,r,!1);const i=In(e.schema,s)?t:t.slice(1),l=In(e.schema,a)?n:n.slice(0,-1);hy(i.concat(l)),o.deleteContents(),by(e)}),Sm=(e,t,n,o=!0)=>k.some(()=>{cy(e,t,n,o)}),DA=(e,t)=>k.some(()=>ka(e,!1,t)),yy=(e,t)=>Gt(as(t,e),cl),Em=(e,t)=>Gt(as(t,e),Es("caption")),gd=(e,t)=>k.some(()=>{Os(t),e.selection.setCursorLocation(t.dom,0)}),Cy=(e,t)=>e?Lv(t):cm(t),PA=(e,t,n)=>{const o=B(e.getBody());return Em(o,n).fold(()=>((r,s,a,i)=>{const l=G.fromRangeStart(r.selection.getRng());return yy(a,i).bind(c=>In(r.schema,c,{checkRootAsContent:!1})?gd(r,c):((d,f,m,b,g)=>ci(m,d.getBody(),g).bind(v=>yy(f,B(v.getNode())).bind(h=>Ie(h,b)?k.none():k.some(Ee))))(r,a,s,c,l))})(e,t,o,n).orThunk(()=>xs(((r,s)=>{const a=G.fromRangeStart(r.selection.getRng());return Cy(s,a)||Bo(s,r.getBody(),a).exists(i=>Cy(s,i))})(e,t),Ee)),r=>((s,a,i,l)=>{const c=G.fromRangeStart(s.selection.getRng());return In(s.schema,l)?gd(s,l):((d,f,m,b,g)=>ci(m,d.getBody(),g).fold(()=>k.some(Ee),v=>((h,C,S,E)=>jn(h.dom).bind(A=>Go(h.dom).map(N=>C?S.isEqual(A)&&E.isEqual(N):S.isEqual(N)&&E.isEqual(A))).getOr(!0))(b,m,g,v)?((h,C)=>gd(h,C))(d,b):((h,C,S)=>Em(h,B(S.getNode())).fold(()=>k.some(Ee),E=>xs(!Ie(E,C),Ee)))(f,b,v)))(s,i,a,l,c)})(e,t,o,r))},km=(e,t)=>{const n=B(e.selection.getStart(!0)),o=ui(e);return e.selection.isCollapsed()&&o.length===0?PA(e,t,n):((r,s,a)=>{const i=B(r.getBody()),l=r.selection.getRng();return a.length!==0?vy(r,a,k.none()):((c,d,f,m)=>Em(d,m).fold(()=>((b,g,v)=>OA(g,v).bind(h=>h.fold(xe(Sm,b),xe(DA,b),xe(vy,b),xe(BA,b))))(c,d,f),b=>((g,v)=>gd(g,v))(c,b)))(r,i,l,s)})(e,n,o)},Na=(e,t)=>{let n=t;for(;n&&n!==e;){if(Yo(n)||Dt(n))return n;n=n.parentNode}return null},LA=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],MA=ce.each,_m=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),o=r=>kt(LA,s=>Kt(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return MA(t.getAttribs(l),d=>{const f=d.nodeName.toLowerCase();f==="style"||o(f)||(c[f]=t.getAttrib(l,f))}),c},i=(l,c)=>{for(const d in l)if(Fe(l,d)){const f=c[d];if(Ft(f)||l[d]!==f)return!1;delete c[d]}for(const d in c)if(Fe(c,d))return!1;return!0};return ke(r)&&ke(s)&&(!i(a(r),a(s))||!i(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(s,"style"))))?!1:!Po(r)&&!Po(s)},isAttributeInternal:o}},xy=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),wy=(e,t,n,o)=>{const r=n.name;for(let s=0,a=e.length;s<a;s++){const i=e[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=t.length;s<a;s++){const i=t[s],l=i.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},Sy=(e,t)=>{const n=(o,r)=>{Ct(o,s=>{const a=bn(s.nodes);J(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(r?c.attr(s.filter.name)!==void 0:c.name===s.filter.name)&&!wt(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},Ey=(e,t,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&(c=>{let d=c;for(;d=d.walk();)wy(s,a,d,l)})(i),l})(e,t,n);Sy(r,o)},Nm=(e,t,n,o)=>{if((e.pad_empty_with_br||t.insert)&&n(o)){const r=new Wn("br",1);t.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Wn("#text",3)).value=rn},ky=(e,t)=>{const n=e?.firstChild;return le(n)&&n===e.lastChild&&n.name===t},Dl=(e,t,n,o)=>o.isEmpty(t,n,r=>((s,a)=>{const i=s.getElementRule(a.name);return i?.paddEmpty===!0})(e,r)),IA=e=>{let t;for(let n=e;n;n=n.parent){const o=n.attr("contenteditable");if(o==="false")break;o==="true"&&(t=n)}return k.from(t)},Am=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const o=e.children();for(const r of o)n&&!t.isValidChild(n.name,r.name)&&Am(r,t,n);e.unwrap()}},Tm=(e,t,n,o=Ee)=>{const r=t.getTextBlockElements(),s=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=ce.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=d=>d!==n&&!i[d.name];for(let d=0;d<e.length;d++){const f=e[d];let m,b,g;if(!f.parent||l.has(f))continue;if(r[f.name]&&f.parent.name==="li"){let h=f.next;for(;h&&r[h.name];)h.name="li",l.add(h),f.parent.insert(h,f.parent),h=h.next;f.unwrap();continue}const v=[f];for(m=f.parent;m&&!t.isValidChild(m.name,f.name)&&c(m);m=m.parent)v.push(m);if(m&&v.length>1)if(Rm(t,f,m))Am(f,t);else{v.reverse(),b=v[0].clone(),o(b);let h=b;for(let C=0;C<v.length-1;C++){t.isValidChild(h.name,v[C].name)&&C>0?(g=v[C].clone(),o(g),h.append(g)):g=h;for(let S=v[C].firstChild;S&&S!==v[C+1];){const E=S.next;g.append(S),S=E}h=g}Dl(t,s,a,b)?m.insert(f,v[0],!0):(m.insert(b,v[0],!0),m.insert(f,b)),m=v[0],(Dl(t,s,a,m)||ky(m,"br"))&&m.empty().remove()}else if(f.parent){if(f.name==="li"){let h=f.prev;if(h&&(h.name==="ul"||h.name==="ol")){h.append(f);continue}if(h=f.next,h&&(h.name==="ul"||h.name==="ol")&&h.firstChild){h.insert(f,h.firstChild,!0);continue}const C=new Wn("ul",1);o(C),f.wrap(C);continue}if(t.isValidChild(f.parent.name,"div")&&t.isValidChild("div",f.name)){const h=new Wn("div",1);o(h),f.wrap(h)}else Am(f,t)}}},Rm=(e,t,n=t.parent)=>!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&(t.name!=="a"||!(o=>{let r=o;for(;r;){if(r.name==="a")return!0;r=r.parent}return!1})(n))&&(!(o=>o.name==="summary")(n)||!xy(t)||n?.firstChild===t&&n?.lastChild===t)),Om=e=>e.collapsed?e:(t=>{const n=G.fromRangeStart(t),o=G.fromRangeEnd(t),r=t.commonAncestorContainer;return Bo(!1,r,o).map(s=>!Pr(n,o,r)&&Pr(n,s,r)?((a,i,l,c)=>{const d=document.createRange();return d.setStart(a,i),d.setEnd(l,c),d})(n.container(),n.offset(),s.container(),s.offset()):t).getOr(t)})(e),FA=(e,t)=>{let n=t.firstChild,o=t.lastChild;return n&&n.name==="meta"&&(n=n.next),o&&o.attr("id")==="mce_marker"&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return le(s)&&(s.isEmpty(a)||((i,l)=>i.getBlockElements()[l.name]&&(c=>le(c.firstChild)&&c.firstChild===c.lastChild)(l)&&(c=>c.name==="br"||c.value===rn)(l.firstChild))(r,s))})(e,o)&&(o=o?.prev),!(!n||n!==o||n.name!=="ul"&&n.name!=="ol")},jA=e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||le((t=n)==null?void 0:t.firstChild)&&t.firstChild===t.lastChild&&(o=>o.data===rn||Ut(o))(t.firstChild))?e.slice(0,-1):e;var t,n},Bm=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},_y=(e,t)=>{const n=G.after(e),o=Mr(t).prev(n);return o?o.toRange():null},zA=(e,t,n,o)=>{const r=((f,m,b)=>{const g=m.serialize(b);return(v=>{var h,C;const S=v.firstChild,E=v.lastChild;return S&&S.nodeName==="META"&&((h=S.parentNode)===null||h===void 0||h.removeChild(S)),E&&E.id==="mce_marker"&&((C=E.parentNode)===null||C===void 0||C.removeChild(E)),v})(f.createFragment(g))})(t,e,o),s=Bm(t,n.startContainer),a=jA((i=r.firstChild,Ke((l=i?.childNodes)!==null&&l!==void 0?l:[],f=>f.nodeName==="LI")));var i,l;const c=t.getRoot(),d=f=>{const m=G.fromRangeStart(n),b=Mr(t.getRoot()),g=f===1?b.prev(m):b.next(m),v=g?.getNode();return!v||Bm(t,v)!==s};return s?d(1)?((f,m,b)=>{const g=f.parentNode;return g&&ce.each(m,v=>{g.insertBefore(v,f)}),((v,h)=>{const C=G.before(v),S=Mr(h).next(C);return S?S.toRange():null})(f,b)})(s,a,c):d(2)?((f,m,b,g)=>(g.insertAfter(m.reverse(),f),_y(m[0],b)))(s,a,c,t):((f,m,b,g)=>{const v=((C,S)=>{const E=S.cloneRange(),A=S.cloneRange();return E.setStartBefore(C),A.setEndAfter(C),[E.cloneContents(),A.cloneContents()]})(f,g),h=f.parentNode;return h&&(h.insertBefore(v[0],f),ce.each(m,C=>{h.insertBefore(C,f)}),h.insertBefore(v[1],f),h.removeChild(f)),_y(m[m.length-1],b)})(s,a,c,n):null},UA=["pre"],Dm=Ec,HA=(e,t,n)=>{var o,r;const s=e.selection,a=e.dom,i=e.parser,l=n.merge,c=Is({validate:!0},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=yo(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);let f=s.getRng();const m=f.startContainer,b=e.getBody();m===b&&s.isCollapsed()&&a.isBlock(b.firstChild)&&((E,A)=>le(A)&&!E.schema.getVoidElements()[A.nodeName])(e,b.firstChild)&&a.isEmpty(b.firstChild)&&(f=a.createRng(),f.setStart(b.firstChild,0),f.setEnd(b.firstChild,0),s.setRng(f)),s.isCollapsed()||(E=>{const A=E.dom,N=Om(E.selection.getRng());E.selection.setRng(N);const R=A.getParent(N.startContainer,Dm);((M,P,z)=>!!le(z)&&z===M.getParent(P.endContainer,Dm)&&Pf(B(z),P))(A,N,R)?Sm(E,N,B(R)):N.startContainer===N.endContainer&&N.endOffset-N.startOffset==1&&re(N.startContainer.childNodes[N.startOffset])?N.deleteContents():E.getDoc().execCommand("Delete",!1)})(e);const g=s.getNode(),v={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},h=i.parse(t,v);if(n.paste===!0&&FA(e.schema,h)&&((E,A)=>!!Bm(E,A))(a,g))return f=zA(c,a,s.getRng(),h),f&&s.setRng(f),t;n.paste===!0&&((E,A,N,R)=>{var M;const P=A.firstChild,z=A.lastChild,V=P===(z.attr("data-mce-type")==="bookmark"?z.prev:z),D=Te(UA,P.name);if(V&&D){const L=P.attr("contenteditable")!=="false",j=((M=E.getParent(N,E.isBlock))===null||M===void 0?void 0:M.nodeName.toLowerCase())===P.name,Q=k.from(Na(R,N)).forall(Yo);return L&&j&&Q}return!1})(a,h,g,e.getBody())&&((o=h.firstChild)===null||o===void 0||o.unwrap()),(E=>{let A=E;for(;A=A.walk();)A.type===1&&A.attr("data-mce-fragment","1")})(h);let C=h.lastChild;if(C&&C.attr("id")==="mce_marker"){const E=C;for(C=C.prev;C&&C.name!=="table";C=C.walk(!0))if(C.type===3||!a.isBlock(C.name)){C.parent&&e.schema.isValidChild(C.parent.name,"span")&&C.parent.insert(E,C,C.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(g),v.invalid||((E,A,N)=>{var R;return kt(N.children(),xy)&&((R=E.getParent(A,E.isBlock))===null||R===void 0?void 0:R.nodeName)==="SUMMARY"})(a,g,h)){e.selection.setContent(d);let E,A=s.getNode();const N=e.getBody();for(Qi(A)?A=E=N:E=A;E&&E!==N;)A=E,E=E.parentNode;t=A===N?N.innerHTML:a.getOuterHTML(A);const R=i.parse(t),M=(L=>{for(let j=L;j;j=j.walk())if(j.attr("id")==="mce_marker")return k.some(j);return k.none()})(R),P=M.bind(IA).getOr(R);M.each(L=>L.replace(h));const z=h.children(),V=(r=h.parent)!==null&&r!==void 0?r:R;h.unwrap();const D=Ke(z,L=>Rm(e.schema,L,V));Tm(D,e.schema,P),Ey(i.getNodeFilters(),i.getAttributeFilters(),R),t=c.serialize(R),A===N?a.setHTML(N,t):a.setOuterHTML(A,t)}else t=c.serialize(h),((E,A,N)=>{var R;N.getAttribute("data-mce-bogus")==="all"?(R=N.parentNode)===null||R===void 0||R.insertBefore(E.dom.createFragment(A),N):((M,P)=>{if(M.isBlock(P)&&M.isEditable(P)){const z=P.childNodes;return z.length===1&&Ut(z[0])||z.length===0}return!1})(E.dom,N)?E.dom.setHTML(N,A):E.selection.setContent(A,{no_events:!0})})(e,t,g);var S;return((E,A)=>{const N=E.schema.getTextInlineElements(),R=E.dom;if(A){const M=E.getBody(),P=_m(E),z="*[data-mce-fragment]",V=R.select(z);ce.each(V,D=>{const L=ie=>le(N[ie.nodeName.toLowerCase()]),j=ie=>ie.childNodes.length===1;if(!Ov(R,Q=D)&&!((ie,oe)=>Ov(ie,oe)&&kt(bi(ie,oe),we=>(Ne=>Tv.has(Ne))(we)))(R,Q)&&L(D)&&j(D)){const ie=bi(R,D),oe=(Le,ge)=>oo(Le,Se=>Te(ge,Se)),we=Le=>j(D)&&R.is(Le,z)&&L(Le)&&(Le.nodeName===D.nodeName&&oe(ie,bi(R,Le))||we(Le.children[0])),Ne=Le=>le(Le)&&Le!==M&&(P.compare(D,Le)||Ne(Le.parentElement)),Oe=Le=>le(Le)&&Le!==M&&R.is(Le,z)&&(((ge,Se,F)=>{const U=bi(ge,Se),Y=bi(ge,F),X=pe=>{var de,Be;const je=(de=ge.getStyle(Se,pe))!==null&&de!==void 0?de:"",Ze=(Be=ge.getStyle(F,pe))!==null&&Be!==void 0?Be:"";return Eo(je)&&Eo(Ze)&&je!==Ze};return kt(U,pe=>{const de=Be=>kt(Be,je=>je===pe);if(!de(Y)&&de(Rv)){const Be=Ke(Y,je=>kt(Rv,Ze=>Kt(je,Ze)));return kt(Be,X)}return X(pe)})})(R,D,Le)||Oe(Le.parentElement));(we(D.children[0])||Ne(D.parentElement)&&!Oe(D.parentElement))&&R.remove(D,!0)}var Q})}})(e,l),((E,A)=>{var N,R,M;let P;const z=E.dom,V=E.selection;if(!A)return;V.scrollIntoView(A);const D=Na(E.getBody(),A);if(D&&z.getContentEditable(D)==="false")return z.remove(A),void V.select(D);let L=z.createRng();const j=A.previousSibling;if(re(j)){L.setStart(j,(R=(N=j.nodeValue)===null||N===void 0?void 0:N.length)!==null&&R!==void 0?R:0);const ie=A.nextSibling;re(ie)&&(j.appendData(ie.data),(M=ie.parentNode)===null||M===void 0||M.removeChild(ie))}else L.setStartBefore(A),L.setEndBefore(A);const Q=z.getParent(A,z.isBlock);if(z.remove(A),Q&&z.isEmpty(Q)){const ie=Dm(Q);vt(B(Q)),L.setStart(Q,0),L.setEnd(Q,0),ie||(oe=>!!oe.getAttribute("data-mce-fragment"))(Q)||!(P=(oe=>{let we=G.fromRangeStart(oe);return we=Mr(E.getBody()).next(we),we?.toRange()})(L))?z.add(Q,z.create("br",ie?{}:{"data-mce-bogus":"1"})):(L=P,z.remove(Q))}V.setRng(L)})(e,a.get("mce_marker")),S=e.getBody(),ce.each(S.getElementsByTagName("*"),E=>{E.removeAttribute("data-mce-fragment")}),((E,A,N)=>{k.from(E.getParent(A,"td,th")).map(B).each(R=>((M,P)=>{Ko(M).each(z=>{Ln(z).each(V=>{P.isBlock(ft(M))&&ga(z)&&P.isBlock(ft(V))&&Pe(z)})})})(R,N))})(a,s.getStart(),e.schema),((E,A,N)=>{const R=ks(B(N),M=>Ie(M,B(A)));Ys(R,R.length-2).filter(Hn).fold(()=>Mu(E,A),M=>Mu(E,M.dom))})(e.schema,e.getBody(),s.getStart()),t},hd=e=>e instanceof Wn,Pm=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&(o=>{hi(o)&&jn(o.getBody()).each(r=>{const s=r.getNode(),a=Or(s)?jn(s).getOr(r):r;o.selection.setRng(a.toRange())})})(e)},Ny=e=>bt(e)?e:yt,Lm=(e,t,n)=>{const o=t(e),r=Ny(n);return o.orThunk(()=>r(e)?k.none():((s,a,i)=>{let l=s.dom;const c=Ny(i);for(;l.parentNode;){l=l.parentNode;const d=B(l),f=a(d);if(f.isSome())return f;if(c(d))break}return k.none()})(e,t,r))},Mm=zf,Ay=(e,t,n)=>{const o=e.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(Lo(s)&&s.inherit===!1&&e.dom.is(t,s.selector))return!0}return!1},Im=(e,t,n,o,r)=>{const s=e.dom.getRoot();if(t===s)return!1;const a=e.dom.getParent(t,i=>!!Ay(e,i,n)||i.parentNode===s||!!Fr(e,i,n,o,!0));return!!Fr(e,a,n,o,r)},bd=(e,t,n)=>!(!sn(n)||!Mm(t,n.inline))||!(!Ir(n)||!Mm(t,n.block))||!!Lo(n)&&ke(t)&&e.is(t,n.selector),Ty=(e,t,n,o,r,s)=>{const a=n[o],i=o==="attributes";if(bt(n.onmatch))return n.onmatch(t,n,o);if(a){if(dc(a)){for(let l=0;l<a.length;l++)if(i?e.getAttrib(t,a[l]):Gc(e,t,a[l]))return!0}else for(const l in a)if(Fe(a,l)){const c=i?e.getAttrib(t,l):Gc(e,t,l),d=Ms(a[l],s),f=wt(c)||ys(c);if(f&&wt(d))continue;if(r&&f&&!n.exact||(!r||n.exact)&&!Mm(c,Uf(d,l)))return!1}}return!0},Fr=(e,t,n,o,r)=>{const s=e.formatter.get(n),a=e.dom;if(s&&ke(t))for(let i=0;i<s.length;i++){const l=s[i];if(bd(e.dom,t,l)&&Ty(a,t,l,"attributes",r,o)&&Ty(a,t,l,"styles",r,o)){const c=l.classes;if(c){for(let d=0;d<c.length;d++)if(!e.dom.hasClass(t,Ms(c[d],o)))return}return l}}},Fm=(e,t,n,o,r)=>{if(o)return Im(e,o,t,n,r);if(o=e.selection.getNode(),Im(e,o,t,n,r))return!0;const s=e.selection.getStart();return!(s===o||!Im(e,s,t,n,r))},Pl=pn,Ry=e=>{if(e){const t=new fn(e,e);for(let n=t.current();n;n=t.next())if(re(n))return n}return null},jm=e=>{const t=De("span");return rr(t,{id:Tf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&at(t,lt(Pl)),t},zm=(e,t,n)=>{const o=e.dom,r=e.selection;if(_b(t))ka(e,!1,B(t),n,!0);else{const s=r.getRng(),a=o.getParent(t,o.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,d=s.endOffset,f=(m=>{const b=Ry(m);return b&&b.data.charAt(0)===Pl&&b.deleteData(0,1),b})(t);o.remove(t,!0),i===f&&l>0&&s.setStart(f,l-1),c===f&&d>0&&s.setEnd(f,d-1),a&&o.isEmpty(a)&&Os(B(a)),r.setRng(s)}},Um=(e,t,n)=>{const o=e.dom,r=e.selection;if(t)zm(e,t,n);else if(!(t=Ca(e.getBody(),r.getStart())))for(;t=o.get(Tf);)zm(e,t,n)},Oy=(e,t)=>(e.appendChild(t),t),By=(e,t)=>{var n;const o=Vr(e,(s,a)=>Oy(s,a.cloneNode(!1)),t),r=(n=o.ownerDocument)!==null&&n!==void 0?n:document;return Oy(o,r.createTextNode(Pl))},Dy=e=>Fh(e,ll(e).replace(new RegExp(`${rn}$`)," ")),Py=(e,t)=>{const n=()=>{t===null||e.dom.isEmpty(t)||Ln(B(t)).each(o=>{yn(o)?Dy(o):Ka(o,r=>yn(r)).each(r=>{yn(r)&&Dy(r)})})};e.once("input",o=>{o.data&&!xa(o.data)&&(o.isComposing?e.once("compositionend",()=>{n()}):n())})},qA=(e,t,n,o)=>{const r=e.dom,s=e.selection;let a=!1;const i=e.formatter.get(t);if(!i)return;const l=s.getRng(),c=l.startContainer,d=l.startOffset;let f=c;re(c)&&(d!==c.data.length&&(a=!0),f=f.parentNode);const m=[];let b;for(;f;){if(Fr(e,f,t,n,o)){b=f;break}f.nextSibling&&(a=!0),m.push(f),f=f.parentNode}if(b)if(a){const g=s.getBookmark();l.collapse(!0);let v=wa(r,l,i,{includeTrailingSpace:!0});v=id(v),e.formatter.remove(t,n,v,o),s.moveToBookmark(g)}else{const g=Ca(e.getBody(),b),v=le(g)?r.getParents(b.parentNode,zt,g):[],h=jm(!1).dom;((E,A,N)=>{var R,M;const P=E.dom,z=P.getParent(N,xe(Ff,E.schema));z&&P.isEmpty(z)?(R=N.parentNode)===null||R===void 0||R.replaceChild(A,N):((V=>{const D=Mn(V,"br"),L=Ke((j=>{const Q=[];let ie=j.dom;for(;ie;)Q.push(B(ie)),ie=ie.lastChild;return Q})(V).slice(-1),ga);D.length===L.length&&J(L,Pe)})(B(N)),P.isEmpty(N)?(M=N.parentNode)===null||M===void 0||M.replaceChild(A,N):P.insertAfter(A,N))})(e,h,g??b);const C=((E,A,N,R,M,P)=>{const z=E.formatter,V=E.dom,D=Ke(nn(z.get()),j=>j!==R&&!cn(j,"removeformat")),L=((j,Q,ie)=>hn(ie,(oe,we)=>{const Ne=((Oe,Le)=>Hf(Oe,Le,ge=>{const Se=F=>bt(F)||F.length>1&&F.charAt(0)==="%";return kt(["styles","attributes"],F=>Ot(ge,F).exists(U=>{const Y=se(U)?U:za(U);return kt(Y,Se)}))}))(j,we);return j.formatter.matchNode(Q,we,{},Ne)?oe.concat([we]):oe},[]))(E,N,D);if(Ke(L,j=>!((Q,ie,oe)=>{const we=["inline","block","selector","attributes","styles","classes"],Ne=Oe=>kr(Oe,(Le,ge)=>kt(we,Se=>Se===ge));return Hf(Q,ie,Oe=>{const Le=Ne(Oe);return Hf(Q,oe,ge=>{const Se=Ne(ge);return((F,U,Y=Xt)=>it(Y).eq(F,U))(Le,Se)})})})(E,j,R)).length>0){const j=N.cloneNode(!1);return V.add(A,j),z.remove(R,M,j,P),V.remove(j),k.some(j)}return k.none()})(e,h,b,t,n,o),S=By([...m,...C.toArray(),...v],h);g&&zm(e,g,le(g)),s.setCursorLocation(S,1),Py(e,h),r.isEmpty(b)&&r.remove(b)}},Ly=e=>{const t=jm(!1),n=By(e,t.dom);return{caretContainer:t,caretPosition:G(n,0)}},My=(e,t)=>{const{caretContainer:n,caretPosition:o}=Ly(t);return Re(B(e),n),Pe(B(e)),o},Iy=(e,t)=>{if(Do(t.dom))return!1;const n=e.schema.getTextInlineElements();return Fe(n,ft(t))&&!Do(t.dom)&&!aa(t.dom)},Ll={},Fy=dr(["pre"]);(e=>{Ll[e]||(Ll[e]=[]),Ll[e].push(t=>{if(!t.selection.getRng().collapsed){const n=t.selection.getSelectedBlocks(),o=Ke(Ke(n,Fy),(r=>s=>{const a=s.previousSibling;return Fy(a)&&Te(r,a)})(n));J(o,r=>{((s,a)=>{const i=B(a),l=Mt(i).dom;Pe(i),ut(B(s),[De("br",l),De("br",l),...St(i)])})(r.previousSibling,r)})}})})("pre");const jy=["fontWeight","fontStyle","color","fontSize","fontFamily"],zy=(e,t)=>{const n=e.get(t);return se(n)?Gt(n,o=>sn(o)&&o.inline==="span"&&(r=>Xe(r.styles)&&kt(nn(r.styles),s=>Te(jy,s)))(o)):k.none()},Uy=(e,t)=>lo(t,G.fromRangeStart(e)).isNone(),Hy=(e,t)=>to(t,G.fromRangeEnd(e)).exists(n=>!Ut(n.getNode())||to(t,n).isSome())===!1,qy=e=>t=>gk(t)&&e.isEditable(t),$y=e=>Ke(e.getSelectedBlocks(),qy(e.dom)),Hm=ce.each,qm=e=>ke(e)&&!Po(e)&&!Do(e)&&!aa(e),Wy=(e,t)=>{for(let n=e;n;n=n[t]){if(re(n)&&Eo(n.data))return e;if(ke(n)&&!Po(n))return n}return e},Vy=(e,t,n)=>{const o=_m(e),r=Rr(t)&&e.dom.isEditable(t),s=Rr(n)&&e.dom.isEditable(n);if(r&&s){const a=Wy(t,"previousSibling"),i=Wy(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return e.dom.remove(i),ce.each(ce.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},Ky=(e,t,n,o)=>{var r;if(o&&t.merge_siblings!==!1){const s=(r=Vy(e,Sb(o),o))!==null&&r!==void 0?r:o;Vy(e,s,Sb(s,!0))}},$m=(e,t,n)=>{Hm(e.childNodes,o=>{qm(o)&&(t(o)&&n(o),o.hasChildNodes()&&$m(o,t,n))})},Xy=(e,t)=>n=>!(!n||!Gc(e,n,t)),Yy=(e,t,n)=>o=>{e.setStyle(o,t,n),o.getAttribute("style")===""&&o.removeAttribute("style"),((r,s)=>{s.nodeName==="SPAN"&&r.getAttribs(s).length===0&&r.remove(s,!0)})(e,o)},Aa=Dr([{keep:[]},{rename:["name"]},{removed:[]}]),$A=/^(src|href|style)$/,Wm=ce.each,vd=zf,Gy=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),Qy=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"];if(ke(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return re(o)&&n&&r>=o.data.length&&(o=new fn(o,e.getBody()).next()||o),re(o)&&!n&&r===0&&(o=new fn(o,e.getBody()).prev()||o),o},Jy=(e,t)=>{const n=t?"firstChild":"lastChild",o=e[n];return(r=>/^(TR|TH|TD)$/.test(r.nodeName))(e)&&o?e.nodeName==="TR"&&o[n]||o:e},Vm=(e,t,n,o)=>{var r;const s=e.create(n,o);return(r=t.parentNode)===null||r===void 0||r.insertBefore(s,t),s.appendChild(t),s},Zy=(e,t,n,o,r)=>{const s=B(t),a=B(e.create(o,r)),i=n?ao(s):Zr(s);return ut(a,i),n?(Re(s,a),He(a,s)):(We(s,a),at(a,s)),a.dom},eC=(e,t,n)=>{const o=t.parentNode;let r;const s=e.dom,a=Fn(e);Ir(n)&&o===s.getRoot()&&(n.list_block&&vd(t,n.list_block)||J(bn(t.childNodes),i=>{fi(e,a,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=Vm(s,i,a),s.setAttribs(r,pl(e))):r=null})),(i=>Lo(i)&&sn(i)&&Ar(Ot(i,"mixed"),!0))(n)&&!vd(n.inline,t)||s.remove(t,!0)},tC=(e,t,n)=>x(e)?{name:t,value:null}:{name:e,value:Ms(t,n)},nC=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},oC=(e,t,n,o,r)=>{let s=!1;Wm(n.styles,(a,i)=>{const{name:l,value:c}=tC(i,a,o),d=Uf(c,l);(n.remove_similar||Je(c)||!ke(r)||vd(Gc(e,r,l),d))&&e.setStyle(t,l,""),s=!0}),s&&nC(e,t)},rC=(e,t,n,o,r)=>{const s=e.dom,a=_m(e),i=e.schema;if(sn(t)&&Fu(i,t.inline)&&la(i,o)&&o.parentElement===e.getBody())return eC(e,o,t),Aa.removed();if(!t.ceFalseOverride&&o&&s.getContentEditableParent(o)==="false"||o&&!bd(s,o,t)&&!((d,f)=>f.links&&d.nodeName==="A")(o,t))return Aa.keep();const l=o,c=t.preserve_attributes;if(sn(t)&&t.remove==="all"&&se(c)){const d=Ke(s.getAttribs(l),f=>Te(c,f.name.toLowerCase()));if(s.removeAllAttribs(l),J(d,f=>s.setAttrib(l,f.name,f.value)),d.length>0)return Aa.rename("span")}if(t.remove!=="all"){oC(s,l,t,n,r),Wm(t.attributes,(f,m)=>{const{name:b,value:g}=tC(m,f,n);if(t.remove_similar||Je(g)||!ke(r)||vd(s.getAttrib(r,b),g)){if(b==="class"){const v=s.getAttrib(l,b);if(v){let h="";if(J(v.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(h+=(h?" ":"")+C)}),h)return void s.setAttrib(l,b,h)}}if($A.test(b)&&l.removeAttribute("data-mce-"+b),b==="style"&&dr(["li"])(l)&&s.getStyle(l,"list-style-type")==="none")return l.removeAttribute(b),void s.setStyle(l,"list-style-type","none");b==="class"&&l.removeAttribute("className"),l.removeAttribute(b)}}),Wm(t.classes,f=>{f=Ms(f,n),ke(r)&&!s.hasClass(r,f)||s.removeClass(l,f)});const d=s.getAttribs(l);for(let f=0;f<d.length;f++){const m=d[f].nodeName;if(!a.isAttributeInternal(m))return Aa.keep()}}return t.remove!=="none"?(eC(e,l,t),Aa.removed()):Aa.keep()},WA=(e,t,n,o)=>rC(e,t,n,o,o).fold(fe(o),r=>(e.dom.createFragment().appendChild(o),e.dom.rename(o,r)),fe(null)),sC=(e,t,n,o,r)=>{(o||e.selection.isEditable())&&((s,a,i,l,c)=>{const d=s.formatter.get(a),f=d[0],m=s.dom,b=s.selection,g=E=>{const A=((N,R,M,P,z)=>{let V;return R.parentNode&&J(Qc(N.dom,R.parentNode).reverse(),D=>{if(!V&&ke(D)&&D.id!=="_start"&&D.id!=="_end"){const L=Fr(N,D,M,P,z);L&&L.split!==!1&&(V=D)}}),V})(s,E,a,i,c);return((N,R,M,P,z,V,D,L)=>{var j,Q;let ie,oe;const we=N.dom;if(M){const Ne=M.parentNode;for(let Oe=P.parentNode;Oe&&Oe!==Ne;Oe=Oe.parentNode){let Le=we.clone(Oe,!1);for(let ge=0;ge<R.length&&(Le=WA(N,R[ge],L,Le),Le!==null);ge++);Le&&(ie&&Le.appendChild(ie),oe||(oe=Le),ie=Le)}D.mixed&&we.isBlock(M)||(P=(j=we.split(M,P))!==null&&j!==void 0?j:P),ie&&oe&&((Q=z.parentNode)===null||Q===void 0||Q.insertBefore(ie,z),oe.appendChild(z),sn(D)&&Ky(N,D,0,ie))}return P})(s,d,A,E,E,0,f,i)},v=E=>kt(d,A=>Ml(s,A,i,E,E)),h=E=>{const A=bn(E.childNodes),N=v(E)||kt(d,M=>bd(m,E,M)),R=E.parentNode;if(!N&&le(R)&&qf(f)&&v(R),f.deep&&A.length)for(let M=0;M<A.length;M++)h(A[M]);J(["underline","line-through","overline"],M=>{ke(E)&&s.dom.getStyle(E,"text-decoration")===M&&E.parentNode&&kb(m,E.parentNode)===M&&Ml(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:M}},void 0,E)})},C=E=>{const A=m.get(E?"_start":"_end");if(A){let N=A[E?"firstChild":"lastChild"];return(R=>Po(R)&&ke(R)&&(R.id==="_start"||R.id==="_end"))(N)&&(N=N[E?"firstChild":"lastChild"]),re(N)&&N.data.length===0&&(N=E?A.previousSibling||A.nextSibling:A.nextSibling||A.previousSibling),m.remove(A,!0),N}return null},S=E=>{let A,N,R=wa(m,E,d,{includeTrailingSpace:E.collapsed});if(f.split){if(R=id(R),A=Qy(s,R,!0),N=Qy(s,R),A!==N){if(A=Jy(A,!0),N=Jy(N,!1),Gy(m,A,N)){const P=k.from(A.firstChild).getOr(A);return g(Zy(m,P,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void C(!0)}if(Gy(m,N,A)){const P=k.from(N.lastChild).getOr(N);return g(Zy(m,P,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void C(!1)}A=Vm(m,A,"span",{id:"_start","data-mce-type":"bookmark"}),N=Vm(m,N,"span",{id:"_end","data-mce-type":"bookmark"});const M=m.createRng();M.setStartAfter(A),M.setEndBefore(N),El(m,M,P=>{J(P,z=>{Po(z)||Po(z.parentNode)||g(z)})}),g(A),g(N),A=C(!0),N=C()}else A=N=g(A);R.startContainer=A.parentNode?A.parentNode:A,R.startOffset=m.nodeIndex(A),R.endContainer=N.parentNode?N.parentNode:N,R.endOffset=m.nodeIndex(N)+1}El(m,R,M=>{J(M,h)})};if(l){if(Sl(l)){const E=m.createRng();E.setStartBefore(l),E.setEndAfter(l),S(E)}else S(l);x0(s,a,l,i)}else b.isCollapsed()&&sn(f)&&!ui(s).length?qA(s,a,i,c):(wb(s,()=>Mf(s,S),E=>sn(f)&&Fm(s,a,i,E)),s.nodeChanged()),((E,A,N)=>{A==="removeformat"?J($y(E.selection),R=>{J(jy,M=>E.dom.setStyle(R,M,"")),nC(E.dom,R)}):zy(E.formatter,A).each(R=>{J($y(E.selection),M=>oC(E.dom,M,R,N,null))})})(s,a,i),x0(s,a,l,i)})(e,t,n,o,r)},Ml=(e,t,n,o,r)=>rC(e,t,n,o,r).fold(yt,s=>(e.dom.rename(o,s),!0),zt),aC=ce.each,yd=ce.each,iC=(e,t,n,o)=>{if(yd(n.styles,(r,s)=>{e.setStyle(t,s,Ms(r,o))}),n.styles){const r=e.getAttrib(t,"style");r&&e.setAttrib(t,"data-mce-style",r)}},VA=(e,t,n,o)=>{const r=e.formatter.get(t),s=r[0],a=!o&&e.selection.isCollapsed(),i=e.dom,l=e.selection,c=(g,v=s)=>{bt(v.onformat)&&v.onformat(g,v,n,o),iC(i,g,v,n),yd(v.attributes,(h,C)=>{i.setAttrib(g,C,Ms(h,n))}),yd(v.classes,h=>{const C=Ms(h,n);i.hasClass(g,C)||i.addClass(g,C)})},d=(g,v)=>{let h=!1;return yd(g,C=>!(!Lo(C)||(i.getContentEditable(v)!=="false"||C.ceFalseOverride)&&(!le(C.collapsed)||C.collapsed===a)&&i.is(v,C.selector)&&!Do(v)&&(c(v,C),h=!0,1))),h},f=g=>{if(Ae(g)){const v=i.create(g);return c(v),v}return null},m=(g,v,h)=>{const C=[];let S=!0;const E=s.inline||s.block,A=f(E);El(g,v,N=>{let R;const M=P=>{let z=!1,V=S,D=!1;const L=P.parentNode,j=L.nodeName.toLowerCase(),Q=g.getContentEditable(P);le(Q)&&(V=S,S=Q==="true",z=!0,D=Eb(e,P));const ie=S&&!z;if(Ut(P)&&!((oe,we,Ne,Oe)=>{if(B_(oe)&&sn(we)&&Ne.parentNode){const Le=vh(oe.schema),ge=dk(B(Ne),Se=>Do(Se.dom));return ln(Le,Oe)&&ns(oe.schema,Ne.parentNode,{skipBogus:!1,includeZwsp:!0})&&!ge}return!1})(e,s,P,j))return R=null,void(Ir(s)&&g.remove(P));if((oe=>(we=>Ir(we)&&we.wrapper===!0)(s)&&Fr(e,oe,t,n))(P))R=null;else{if(((oe,we,Ne)=>{const Oe=(Le=>Ir(Le)&&Le.wrapper!==!0)(s)&&Ff(e.schema,oe)&&fi(e,we,E);return Ne&&Oe})(P,j,ie)){const oe=g.rename(P,E);return c(oe),C.push(oe),void(R=null)}if(Lo(s)){let oe=d(r,P);if(!oe&&le(L)&&qf(s)&&(oe=d(r,L)),!sn(s)||oe)return void(R=null)}le(A)&&((oe,we,Ne,Oe)=>{const Le=oe.nodeName.toLowerCase(),ge=fi(e,E,Le)&&fi(e,we,E),Se=!h&&re(oe)&&Bc(oe.data),F=Do(oe),U=!sn(s)||!g.isBlock(oe);return(Ne||Oe)&&ge&&!Se&&!F&&U})(P,j,ie,D)?(R||(R=g.clone(A,!1),L.insertBefore(R,P),C.push(R)),D&&z&&(S=V),R.appendChild(P)):(R=null,J(bn(P.childNodes),M),z&&(S=V),R=null)}};J(N,M)}),s.links===!0&&J(C,N=>{const R=M=>{M.nodeName==="A"&&c(M,s),J(bn(M.childNodes),R)};R(N)}),J(C,N=>{const R=(M=>{let P=0;return J(M.childNodes,z=>{(V=>le(V)&&re(V)&&V.length===0)(z)||Po(z)||P++}),P})(N);!(C.length>1)&&g.isBlock(N)||R!==0?(sn(s)||Ir(s)&&s.wrapper)&&(s.exact||R!==1||(N=(M=>Gt(M.childNodes,If).filter(z=>g.getContentEditable(z)!=="false"&&bd(g,z,s)).map(z=>{const V=g.clone(z,!1);return c(V),g.replace(V,M,!0),g.remove(z,!0),V}).getOr(M))(N)),((M,P,z,V)=>{aC(P,D=>{sn(D)&&aC(M.dom.select(D.inline,V),L=>{qm(L)&&Ml(M,D,z,L,D.exact?L:null)}),((L,j,Q)=>{if(j.clear_child_styles){const ie=j.links?"*:not(a)":"*";Hm(L.select(ie,Q),oe=>{qm(oe)&&L.isEditable(oe)&&Hm(j.styles,(we,Ne)=>{L.setStyle(oe,Ne,"")})})}})(M.dom,D,V)})})(e,r,n,N),((M,P,z,V,D)=>{const L=D.parentNode;Fr(M,L,z,V)&&Ml(M,P,V,D)||P.merge_with_parents&&L&&M.dom.getParent(L,j=>!!Fr(M,j,z,V)&&(Ml(M,P,V,D),!0))})(e,s,t,n,N),((M,P,z,V)=>{if(P.styles&&P.styles.backgroundColor){const D=Xy(M,"fontSize");$m(V,L=>D(L)&&M.isEditable(L),Yy(M,"backgroundColor",Ms(P.styles.backgroundColor,z)))}})(g,s,n,N),((M,P,z,V)=>{const D=L=>{if(Rr(L)&&ke(L.parentNode)&&M.isEditable(L)){const j=kb(M,L.parentNode);M.getStyle(L,"color")&&j?M.setStyle(L,"text-decoration",j):M.getStyle(L,"text-decoration")===j&&M.setStyle(L,"text-decoration",null)}};P.styles&&(P.styles.color||P.styles.textDecoration)&&(ce.walk(V,D,"childNodes"),D(V))})(g,s,0,N),((M,P,z,V)=>{if(sn(P)&&(P.inline==="sub"||P.inline==="sup")){const D=Xy(M,"fontSize");$m(V,j=>D(j)&&M.isEditable(j),Yy(M,"fontSize",""));const L=Ke(M.select(P.inline==="sup"?"sub":"sup",V),M.isEditable);M.remove(L,!0)}})(g,s,0,N),Ky(e,s,0,N)):g.remove(N,!0)})},b=Sl(o)?o:l.getNode();if(i.getContentEditable(b)==="false"&&!Eb(e,b))return d(r,o=b),void C0(e,t,o,n);if(s){if(o)if(Sl(o)){if(!d(r,o)){const g=i.createRng();g.setStartBefore(o),g.setEndAfter(o),m(i,wa(i,g,r),!0)}}else m(i,o,!0);else a&&sn(s)&&!ui(e).length?((g,v,h)=>{let C;const S=g.selection,E=g.formatter.get(v);if(!E)return;const A=S.getRng();let N=A.startOffset;const R=A.startContainer.nodeValue;C=Ca(g.getBody(),S.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(R&&N>0&&N<R.length&&M.test(R.charAt(N))&&M.test(R.charAt(N-1))){const V=S.getBookmark();A.collapse(!0);let D=wa(g.dom,A,E);D=id(D),g.formatter.apply(v,h,D),S.moveToBookmark(V)}else{let V=C?Ry(C):null;C&&V?.data===Pl||(P=g.getDoc(),z=jm(!0).dom,C=P.importNode(z,!0),V=C.firstChild,A.insertNode(C),N=1,Py(g,C)),g.formatter.apply(v,h,C),S.setCursorLocation(V,N)}var P,z})(e,t,n):(l.setRng(Om(l.getRng())),wb(e,()=>{Mf(e,(g,v)=>{const h=v?g:wa(i,g,r);m(i,h,!1)})},zt),e.nodeChanged()),zy(e.formatter,t).each(g=>{J((v=>Ke((h=>{const C=h.getSelectedBlocks(),S=h.getRng();if(h.isCollapsed())return[];if(C.length===1)return Uy(S,C[0])&&Hy(S,C[0])?C:[];{const E=Sn(C).filter(R=>Uy(S,R)).toArray(),A=nr(C).filter(R=>Hy(S,R)).toArray(),N=C.slice(1,-1);return E.concat(N).concat(A)}})(v),qy(v.dom)))(e.selection),v=>iC(i,v,g,n))});((g,v)=>{Fe(Ll,g)&&J(Ll[g],h=>{h(v)})})(t,e)}C0(e,t,o,n)},lC=(e,t,n,o)=>{(o||e.selection.isEditable())&&VA(e,t,n,o)},cC=e=>Fe(e,"vars"),dC=e=>e.selection.getStart(),uC=(e,t,n,o,r)=>$o(t,s=>{const a=e.formatter.matchNode(s,n,r??{},o);return!Ft(a)},s=>!!Ay(e,s,n)||!o&&le(e.formatter.matchNode(s,n,r,!0))),fC=(e,t)=>{const n=t??dC(e);return Ke(Qc(e.dom,n),o=>ke(o)&&!aa(o))},mC=(e,t,n)=>{const o=fC(e,t);Ct(n,(r,s)=>{const a=i=>{const l=uC(e,o,s,i.similar,cC(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const d=l.getOr(t);cC(i)?i.callback(c,{node:d,format:s,parents:o}):J(i.callbacks,f=>f(c,{node:d,format:s,parents:o}))}};J([r.withSimilar,r.withoutSimilar],a),J(r.withVars,a)})},pC=ce.explode,gC=()=>{const e={};return{addFilter:(t,n)=>{J(pC(t),o=>{Fe(e,o)||(e[o]={name:o,callbacks:[]}),e[o].callbacks.push(n)})},getFilters:()=>za(e),removeFilter:(t,n)=>{J(pC(t),o=>{if(Fe(e,o))if(le(n)){const r=e[o],s=Ke(r.callbacks,a=>a!==n);s.length>0?r.callbacks=s:delete e[o]}else delete e[o]})}}},KA=(e,t,n)=>{var o;const r=Xu();t.convert_fonts_to_spans&&((s,a,i)=>{s.addNodeFilter("font",l=>{J(l,c=>{const d=a.parse(c.attr("style")),f=c.attr("color"),m=c.attr("face"),b=c.attr("size");f&&(d.color=f),m&&(d["font-family"]=m),b&&ea(b).each(g=>{d["font-size"]=i[g-1]}),c.name="span",c.attr("style",a.serialize(d)),(g=>{J(["color","face","size"],v=>{g.attr(v,null)})})(c)})})})(e,r,ce.explode((o=t.font_size_legacy_values)!==null&&o!==void 0?o:"")),((s,a,i)=>{s.addNodeFilter("strike",l=>{const c=a.type!=="html4";J(l,d=>{if(c)d.name="s";else{const f=i.parse(d.attr("style"));f["text-decoration"]="line-through",d.name="span",d.attr("style",i.serialize(f))}})})})(e,n,r)},Km=e=>{const[t,...n]=e.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(r){const s=r[2]===";base64",a=(l=>{try{return decodeURIComponent(l)}catch{return l}})(o),i=s?(l=>{const c=/([a-z0-9+\/=\s]+)/i.exec(l);return c?c[1]:""})(a):a;return k.some({type:r[1],data:i,base64Encoded:s})}return k.none()},hC=(e,t,n=!0)=>{let o=t;if(n)try{o=atob(t)}catch{return k.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return k.some(new Blob([r],{type:e}))},bC=e=>new Promise((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result)},o.onerror=()=>{var r;n((r=o.error)===null||r===void 0?void 0:r.message)},o.readAsDataURL(e)});let XA=0;const vC=(e,t,n)=>Km(e).bind(({data:o,type:r,base64Encoded:s})=>{if(t&&!s)return k.none();{const a=s?o:btoa(o);return n(a,r)}}),yC=(e,t,n)=>{const o=e.create("blobid"+XA++,t,n);return e.add(o),o},CC=(e,t,n=!1)=>vC(t,n,(o,r)=>k.from(e.getByData(o,r)).orThunk(()=>hC(r,o).map(s=>yC(e,s,o)))),YA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,GA=e=>k.from(e.match(YA)).bind(t=>Ys(t,1)).map(t=>Kt(t,"www.")?t.substring(4):t),xC=(e,t)=>{k.from(e.attr("src")).bind(GA).forall(n=>!Te(t,n))&&e.attr("sandbox","")},Xm=(e,t)=>Kt(e,`${t}/`),{entries:wC,setPrototypeOf:SC,isFrozen:QA,getPrototypeOf:JA,getOwnPropertyDescriptor:ZA}=Object;let{freeze:co,seal:Qo,create:EC}=Object,{apply:Ym,construct:Gm}=typeof Reflect<"u"&&Reflect;co||(co=function(e){return e}),Qo||(Qo=function(e){return e}),Ym||(Ym=function(e,t,n){return e.apply(t,n)}),Gm||(Gm=function(e,t){return new e(...t)});const Cd=fo(Array.prototype.forEach),eT=fo(Array.prototype.lastIndexOf),kC=fo(Array.prototype.pop),Il=fo(Array.prototype.push),tT=fo(Array.prototype.splice),xd=fo(String.prototype.toLowerCase),Qm=fo(String.prototype.toString),_C=fo(String.prototype.match),Fl=fo(String.prototype.replace),nT=fo(String.prototype.indexOf),oT=fo(String.prototype.trim),gr=fo(Object.prototype.hasOwnProperty),uo=fo(RegExp.prototype.test),jl=(NC=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gm(NC,t)});var NC;function fo(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Ym(e,t,o)}}function Et(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xd;SC&&SC(e,null);let o=t.length;for(;o--;){let r=t[o];if(typeof r=="string"){const s=n(r);s!==r&&(QA(t)||(t[o]=s),r=s)}e[r]=!0}return e}function rT(e){for(let t=0;t<e.length;t++)gr(e,t)||(e[t]=null);return e}function Ta(e){const t=EC(null);for(const[n,o]of wC(e))gr(e,n)&&(Array.isArray(o)?t[n]=rT(o):o&&typeof o=="object"&&o.constructor===Object?t[n]=Ta(o):t[n]=o);return t}function zl(e,t){for(;e!==null;){const n=ZA(e,t);if(n){if(n.get)return fo(n.get);if(typeof n.value=="function")return fo(n.value)}e=JA(e)}return function(){return null}}const AC=co(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Jm=co(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Zm=co(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),sT=co(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ep=co(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),aT=co(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),TC=co(["#text"]),RC=co(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),tp=co(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),OC=co(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),wd=co(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),iT=Qo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lT=Qo(/<%[\w\W]*|[\w\W]*%>/gm),cT=Qo(/\$\{[\w\W]*/gm),dT=Qo(/^data-[\-\w.\u00B7-\uFFFF]+$/),uT=Qo(/^aria-[\-\w]+$/),BC=Qo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fT=Qo(/^(?:\w+script|data):/i),mT=Qo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DC=Qo(/^html$/i),pT=Qo(/^[a-z][.\w]*(-[.\w]+)+$/i);var PC=Object.freeze({__proto__:null,ARIA_ATTR:uT,ATTR_WHITESPACE:mT,CUSTOM_ELEMENT:pT,DATA_ATTR:dT,DOCTYPE_NAME:DC,ERB_EXPR:lT,IS_ALLOWED_URI:BC,IS_SCRIPT_OR_DATA:fT,MUSTACHE_EXPR:iT,TMPLIT_EXPR:cT});const gT=function(){return typeof window>"u"?null:window};var np=function e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gT();const n=$=>e($);if(n.version="3.2.4",n.removed=[],!t||!t.document||t.document.nodeType!==9||!t.Element)return n.isSupported=!1,n;let{document:o}=t;const r=o,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:c,NodeFilter:d,NamedNodeMap:f=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:b,trustedTypes:g}=t,v=c.prototype,h=zl(v,"cloneNode"),C=zl(v,"remove"),S=zl(v,"nextSibling"),E=zl(v,"childNodes"),A=zl(v,"parentNode");if(typeof i=="function"){const $=o.createElement("template");$.content&&$.content.ownerDocument&&(o=$.content.ownerDocument)}let N,R="";const{implementation:M,createNodeIterator:P,createDocumentFragment:z,getElementsByTagName:V}=o,{importNode:D}=r;let L={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported=typeof wC=="function"&&typeof A=="function"&&M&&M.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:j,ERB_EXPR:Q,TMPLIT_EXPR:ie,DATA_ATTR:oe,ARIA_ATTR:we,IS_SCRIPT_OR_DATA:Ne,ATTR_WHITESPACE:Oe,CUSTOM_ELEMENT:Le}=PC;let{IS_ALLOWED_URI:ge}=PC,Se=null;const F=Et({},[...AC,...Jm,...Zm,...ep,...TC]);let U=null;const Y=Et({},[...RC,...tp,...OC,...wd]);let X=Object.seal(EC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),pe=null,de=null,Be=!0,je=!0,Ze=!1,Pt=!0,Lt=!1,xo=!0,ve=!1,tt=!1,ct=!1,Ye=!1,ht=!1,Tt=!1,he=!0,Ue=!1,Nt=!0,At=!1,Vt={},xn=null;const br=Et({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let zn=null;const Uo=Et({},["audio","video","img","source","image","track"]);let an=null;const Fa=Et({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$s="http://www.w3.org/1998/Math/MathML",Hr="http://www.w3.org/2000/svg",Ho="http://www.w3.org/1999/xhtml";let Ws=Ho,us=!1,qr=null;const hu=Et({},[$s,Hr,Ho],Qm);let mo=Et({},["mi","mo","mn","ms","mtext"]),fs=Et({},["annotation-xml"]);const ja=Et({},["title","style","font","a","script"]);let Vs=null;const lD=["application/xhtml+xml","text/html"];let Un=null,Pi=null;const cD=o.createElement("form"),JE=function($){return $ instanceof RegExp||$ instanceof Function},jg=function(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!Pi||Pi!==$){if($&&typeof $=="object"||($={}),$=Ta($),Vs=lD.indexOf($.PARSER_MEDIA_TYPE)===-1?"text/html":$.PARSER_MEDIA_TYPE,Un=Vs==="application/xhtml+xml"?Qm:xd,Se=gr($,"ALLOWED_TAGS")?Et({},$.ALLOWED_TAGS,Un):F,U=gr($,"ALLOWED_ATTR")?Et({},$.ALLOWED_ATTR,Un):Y,qr=gr($,"ALLOWED_NAMESPACES")?Et({},$.ALLOWED_NAMESPACES,Qm):hu,an=gr($,"ADD_URI_SAFE_ATTR")?Et(Ta(Fa),$.ADD_URI_SAFE_ATTR,Un):Fa,zn=gr($,"ADD_DATA_URI_TAGS")?Et(Ta(Uo),$.ADD_DATA_URI_TAGS,Un):Uo,xn=gr($,"FORBID_CONTENTS")?Et({},$.FORBID_CONTENTS,Un):br,pe=gr($,"FORBID_TAGS")?Et({},$.FORBID_TAGS,Un):{},de=gr($,"FORBID_ATTR")?Et({},$.FORBID_ATTR,Un):{},Vt=!!gr($,"USE_PROFILES")&&$.USE_PROFILES,Be=$.ALLOW_ARIA_ATTR!==!1,je=$.ALLOW_DATA_ATTR!==!1,Ze=$.ALLOW_UNKNOWN_PROTOCOLS||!1,Pt=$.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Lt=$.SAFE_FOR_TEMPLATES||!1,xo=$.SAFE_FOR_XML!==!1,ve=$.WHOLE_DOCUMENT||!1,Ye=$.RETURN_DOM||!1,ht=$.RETURN_DOM_FRAGMENT||!1,Tt=$.RETURN_TRUSTED_TYPE||!1,ct=$.FORCE_BODY||!1,he=$.SANITIZE_DOM!==!1,Ue=$.SANITIZE_NAMED_PROPS||!1,Nt=$.KEEP_CONTENT!==!1,At=$.IN_PLACE||!1,ge=$.ALLOWED_URI_REGEXP||BC,Ws=$.NAMESPACE||Ho,mo=$.MATHML_TEXT_INTEGRATION_POINTS||mo,fs=$.HTML_INTEGRATION_POINTS||fs,X=$.CUSTOM_ELEMENT_HANDLING||{},$.CUSTOM_ELEMENT_HANDLING&&JE($.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$.CUSTOM_ELEMENT_HANDLING&&JE($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$.CUSTOM_ELEMENT_HANDLING&&typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Lt&&(je=!1),ht&&(Ye=!0),Vt&&(Se=Et({},TC),U=[],Vt.html===!0&&(Et(Se,AC),Et(U,RC)),Vt.svg===!0&&(Et(Se,Jm),Et(U,tp),Et(U,wd)),Vt.svgFilters===!0&&(Et(Se,Zm),Et(U,tp),Et(U,wd)),Vt.mathMl===!0&&(Et(Se,ep),Et(U,OC),Et(U,wd))),$.ADD_TAGS&&(Se===F&&(Se=Ta(Se)),Et(Se,$.ADD_TAGS,Un)),$.ADD_ATTR&&(U===Y&&(U=Ta(U)),Et(U,$.ADD_ATTR,Un)),$.ADD_URI_SAFE_ATTR&&Et(an,$.ADD_URI_SAFE_ATTR,Un),$.FORBID_CONTENTS&&(xn===br&&(xn=Ta(xn)),Et(xn,$.FORBID_CONTENTS,Un)),Nt&&(Se["#text"]=!0),ve&&Et(Se,["html","head","body"]),Se.table&&(Et(Se,["tbody"]),delete pe.tbody),$.TRUSTED_TYPES_POLICY){if(typeof $.TRUSTED_TYPES_POLICY.createHTML!="function")throw jl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw jl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=$.TRUSTED_TYPES_POLICY,R=N.createHTML("")}else N===void 0&&(N=function(nt,ze){if(typeof nt!="object"||typeof nt.createPolicy!="function")return null;let Rt=null;const It="data-tt-policy-suffix";ze&&ze.hasAttribute(It)&&(Rt=ze.getAttribute(It));const xt="dompurify"+(Rt?"#"+Rt:"");try{return nt.createPolicy(xt,{createHTML:Tn=>Tn,createScriptURL:Tn=>Tn})}catch{return console.warn("TrustedTypes policy "+xt+" could not be created."),null}}(g,s)),N!==null&&typeof R=="string"&&(R=N.createHTML(""));co&&co($),Pi=$}},ZE=Et({},[...Jm,...Zm,...sT]),ek=Et({},[...ep,...aT]),$r=function($){Il(n.removed,{element:$});try{A($).removeChild($)}catch{C($)}},ic=function($,nt){try{Il(n.removed,{attribute:nt.getAttributeNode($),from:nt})}catch{Il(n.removed,{attribute:null,from:nt})}if(nt.removeAttribute($),$==="is")if(Ye||ht)try{$r(nt)}catch{}else try{nt.setAttribute($,"")}catch{}},tk=function($){let nt=null,ze=null;if(ct)$="<remove></remove>"+$;else{const xt=_C($,/^[\r\n\t ]+/);ze=xt&&xt[0]}Vs==="application/xhtml+xml"&&Ws===Ho&&($='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>");const Rt=N?N.createHTML($):$;if(Ws===Ho)try{nt=new b().parseFromString(Rt,Vs)}catch{}if(!nt||!nt.documentElement){nt=M.createDocument(Ws,"template",null);try{nt.documentElement.innerHTML=us?R:Rt}catch{}}const It=nt.body||nt.documentElement;return $&&ze&&It.insertBefore(o.createTextNode(ze),It.childNodes[0]||null),Ws===Ho?V.call(nt,ve?"html":"body")[0]:ve?nt.documentElement:It},nk=function($){return P.call($.ownerDocument||$,$,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},zg=function($){return $ instanceof m&&(typeof $.nodeName!="string"||typeof $.textContent!="string"||typeof $.removeChild!="function"||!($.attributes instanceof f)||typeof $.removeAttribute!="function"||typeof $.setAttribute!="function"||typeof $.namespaceURI!="string"||typeof $.insertBefore!="function"||typeof $.hasChildNodes!="function")},ok=function($){return typeof l=="function"&&$ instanceof l};function ms($,nt,ze){Cd($,Rt=>{Rt.call(n,nt,ze,Pi)})}const rk=function($){let nt=null;if(ms(L.beforeSanitizeElements,$,null),zg($))return $r($),!0;const ze=Un($.nodeName);if(ms(L.uponSanitizeElement,$,{tagName:ze,allowedTags:Se}),$.hasChildNodes()&&!ok($.firstElementChild)&&uo(/<[/\w]/g,$.innerHTML)&&uo(/<[/\w]/g,$.textContent)||$.nodeType===7||xo&&$.nodeType===8&&uo(/<[/\w]/g,$.data))return $r($),!0;if(!Se[ze]||pe[ze]){if(!pe[ze]&&ak(ze)&&(X.tagNameCheck instanceof RegExp&&uo(X.tagNameCheck,ze)||X.tagNameCheck instanceof Function&&X.tagNameCheck(ze)))return!1;if(Nt&&!xn[ze]){const Rt=A($)||$.parentNode,It=E($)||$.childNodes;if(It&&Rt)for(let xt=It.length-1;xt>=0;--xt){const Tn=h(It[xt],!0);Tn.__removalCount=($.__removalCount||0)+1,Rt.insertBefore(Tn,S($))}}return $r($),!0}return $ instanceof c&&!function(Rt){let It=A(Rt);It&&It.tagName||(It={namespaceURI:Ws,tagName:"template"});const xt=xd(Rt.tagName),Tn=xd(It.tagName);return!!qr[Rt.namespaceURI]&&(Rt.namespaceURI===Hr?It.namespaceURI===Ho?xt==="svg":It.namespaceURI===$s?xt==="svg"&&(Tn==="annotation-xml"||mo[Tn]):!!ZE[xt]:Rt.namespaceURI===$s?It.namespaceURI===Ho?xt==="math":It.namespaceURI===Hr?xt==="math"&&fs[Tn]:!!ek[xt]:Rt.namespaceURI===Ho?!(It.namespaceURI===Hr&&!fs[Tn])&&!(It.namespaceURI===$s&&!mo[Tn])&&!ek[xt]&&(ja[xt]||!ZE[xt]):!(Vs!=="application/xhtml+xml"||!qr[Rt.namespaceURI]))}($)?($r($),!0):ze!=="noscript"&&ze!=="noembed"&&ze!=="noframes"||!uo(/<\/no(script|embed|frames)/i,$.innerHTML)?(Lt&&$.nodeType===3&&(nt=$.textContent,Cd([j,Q,ie],Rt=>{nt=Fl(nt,Rt," ")}),$.textContent!==nt&&(Il(n.removed,{element:$.cloneNode()}),$.textContent=nt)),ms(L.afterSanitizeElements,$,null),!1):($r($),!0)},sk=function($,nt,ze){if(he&&(nt==="id"||nt==="name")&&(ze in o||ze in cD))return!1;if(!(je&&!de[nt]&&uo(oe,nt))){if(!(Be&&uo(we,nt))){if(!U[nt]||de[nt]){if(!(ak($)&&(X.tagNameCheck instanceof RegExp&&uo(X.tagNameCheck,$)||X.tagNameCheck instanceof Function&&X.tagNameCheck($))&&(X.attributeNameCheck instanceof RegExp&&uo(X.attributeNameCheck,nt)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(nt))||nt==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&uo(X.tagNameCheck,ze)||X.tagNameCheck instanceof Function&&X.tagNameCheck(ze))))return!1}else if(!an[nt]){if(!uo(ge,Fl(ze,Oe,""))){if((nt!=="src"&&nt!=="xlink:href"&&nt!=="href"||$==="script"||nT(ze,"data:")!==0||!zn[$])&&!(Ze&&!uo(Ne,Fl(ze,Oe,"")))){if(ze)return!1}}}}}return!0},ak=function($){return $!=="annotation-xml"&&_C($,Le)},ik=function($){ms(L.beforeSanitizeAttributes,$,null);const{attributes:nt}=$;if(!nt||zg($))return;const ze={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let Rt=nt.length;for(;Rt--;){const It=nt[Rt],{name:xt,namespaceURI:Tn,value:ps}=It,Wr=Un(xt);let Kn=xt==="value"?ps:oT(ps);const uD=Kn;if(ze.attrName=Wr,ze.attrValue=Kn,ze.keepAttr=!0,ze.forceKeepAttr=void 0,ms(L.uponSanitizeAttribute,$,ze),Kn=ze.attrValue,!Ue||Wr!=="id"&&Wr!=="name"||(ic(xt,$),Kn="user-content-"+Kn),xo&&uo(/((--!?|])>)|<\/(style|title)/i,Kn)){ic(xt,$);continue}if(ze.forceKeepAttr)continue;if(!ze.keepAttr){ic(xt,$);continue}if(!Pt&&uo(/\/>/i,Kn)){ic(xt,$);continue}Lt&&Cd([j,Q,ie],ck=>{Kn=Fl(Kn,ck," ")});const lk=Un($.nodeName);if(sk(lk,Wr,Kn)){if(N&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Tn)switch(g.getAttributeType(lk,Wr)){case"TrustedHTML":Kn=N.createHTML(Kn);break;case"TrustedScriptURL":Kn=N.createScriptURL(Kn)}if(Kn!==uD)try{Tn?$.setAttributeNS(Tn,xt,Kn):$.setAttribute(xt,Kn),zg($)?$r($):kC(n.removed)}catch{}}else ic(xt,$)}ms(L.afterSanitizeAttributes,$,null)},dD=function $(nt){let ze=null;const Rt=nk(nt);for(ms(L.beforeSanitizeShadowDOM,nt,null);ze=Rt.nextNode();)ms(L.uponSanitizeShadowNode,ze,null),rk(ze),ik(ze),ze.content instanceof a&&$(ze.content);ms(L.afterSanitizeShadowDOM,nt,null)};return n.sanitize=function($){let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ze=null,Rt=null,It=null,xt=null;if(us=!$,us&&($="<!-->"),typeof $!="string"&&!ok($)){if(typeof $.toString!="function")throw jl("toString is not a function");if(typeof($=$.toString())!="string")throw jl("dirty is not a string, aborting")}if(!n.isSupported)return $;if(tt||jg(nt),n.removed=[],typeof $=="string"&&(At=!1),At){if($.nodeName){const Wr=Un($.nodeName);if(!Se[Wr]||pe[Wr])throw jl("root node is forbidden and cannot be sanitized in-place")}}else if($ instanceof l)ze=tk("<!---->"),Rt=ze.ownerDocument.importNode($,!0),Rt.nodeType===1&&Rt.nodeName==="BODY"||Rt.nodeName==="HTML"?ze=Rt:ze.appendChild(Rt);else{if(!Ye&&!Lt&&!ve&&$.indexOf("<")===-1)return N&&Tt?N.createHTML($):$;if(ze=tk($),!ze)return Ye?null:Tt?R:""}ze&&ct&&$r(ze.firstChild);const Tn=nk(At?$:ze);for(;It=Tn.nextNode();)rk(It),ik(It),It.content instanceof a&&dD(It.content);if(At)return $;if(Ye){if(ht)for(xt=z.call(ze.ownerDocument);ze.firstChild;)xt.appendChild(ze.firstChild);else xt=ze;return(U.shadowroot||U.shadowrootmode)&&(xt=D.call(r,xt,!0)),xt}let ps=ve?ze.outerHTML:ze.innerHTML;return ve&&Se["!doctype"]&&ze.ownerDocument&&ze.ownerDocument.doctype&&ze.ownerDocument.doctype.name&&uo(DC,ze.ownerDocument.doctype.name)&&(ps="<!DOCTYPE "+ze.ownerDocument.doctype.name+`>
`+ps),Lt&&Cd([j,Q,ie],Wr=>{ps=Fl(ps,Wr," ")}),N&&Tt?N.createHTML(ps):ps},n.setConfig=function(){jg(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),tt=!0},n.clearConfig=function(){Pi=null,tt=!1},n.isValidAttribute=function($,nt,ze){Pi||jg({});const Rt=Un($),It=Un(nt);return sk(Rt,It,ze)},n.addHook=function($,nt){typeof nt=="function"&&Il(L[$],nt)},n.removeHook=function($,nt){if(nt!==void 0){const ze=eT(L[$],nt);return ze===-1?void 0:tT(L[$],ze,1)[0]}return kC(L[$])},n.removeHooks=function($){L[$]=[]},n.removeAllHooks=function(){L={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();const LC=ce.each,hT=ce.trim,bT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],vT={ftp:21,http:80,https:443,mailto:25},yT=["img","video"],MC=(e,t,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?((r,s)=>le(r)?!r:!le(s)||!Te(yT,s))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))};class Jo{static parseDataUri(t){let n;const o=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(t,n,o={}){if(o.allow_script_urls)return!0;{const r=da.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!MC(o,r,n)}}static getDocumentBaseUrl(t){var n;let o;return o=t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?(n=t.href)!==null&&n!==void 0?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(t,n={}){this.path="",this.directory="",t=hT(t),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(r.source=t);const s=t.indexOf("//")===0;if(t.indexOf("/")!==0||s||(t=(o&&o.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const i=o?o.path:new Jo(document.location.href).directory;if(o?.protocol==="")t="//mce_host"+r.toAbsPath(i,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);a&&LC(bT,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[i]=c}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||r.host!=="mce_host"||(r.port=o.port),r.host&&r.host!=="mce_host"||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new Jo(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(t,n){const o=new Jo(t,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?vT[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let o,r,s=0,a="";const i=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length){for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}}if(i.length<l.length){for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}}if(s===1)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(t,n){let o=0;const r=/\/$/.test(n)?"/":"",s=t.split("/"),a=n.split("/"),i=[];LC(s,f=>{f&&i.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)a[f].length!==0&&a[f]!=="."&&(a[f]!==".."?o>0?o--:l.push(a[f]):o++);const c=i.length-o;let d;return d=c<=0?tr(l).join("/"):i.slice(0,c).join("/")+"/"+tr(l).join("/"),d.indexOf("/")!==0&&(d="/"+d),r&&d.lastIndexOf("/")!==d.length-1&&(d+=r),d}getURI(t=!1){let n;return this.source&&!t||(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const CT=ce.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),op="data-mce-type";let IC=0;const FC=(e,t,n,o,r)=>{var s,a,i,l;const c=t.validate,d=n.getSpecialElements();e.nodeType===8&&!t.allow_conditional_comments&&/^\[if/i.test((s=e.nodeValue)!==null&&s!==void 0?s:"")&&(e.nodeValue=" "+e.nodeValue);const f=(a=r?.tagName)!==null&&a!==void 0?a:e.nodeName.toLowerCase();if(o!=="html"&&n.isValid(o))return void(le(r)&&(r.allowedTags[f]=!0));if(e.nodeType!==1||f==="body")return;const m=B(e),b=u(m,op),g=Jn(m,"data-mce-bogus");if(!b&&Ae(g))return void(g==="all"?Pe(m):Ht(m));const v=n.getElementRule(f);if(!c||v){if(le(r)&&(r.allowedTags[f]=!0),c&&v&&!b){if(J((i=v.attributesForced)!==null&&i!==void 0?i:[],h=>{Jt(m,h.name,h.value==="{$uid}"?"mce_"+IC++:h.value)}),J((l=v.attributesDefault)!==null&&l!==void 0?l:[],h=>{u(m,h.name)||Jt(m,h.name,h.value==="{$uid}"?"mce_"+IC++:h.value)}),v.attributesRequired&&!kt(v.attributesRequired,h=>u(m,h))||v.removeEmptyAttrs&&(h=>{const C=h.dom.attributes;return C==null||C.length===0})(m))return void Ht(m);v.outputName&&v.outputName!==f&&((h,C)=>{const S=((A,N)=>{const R=De(N),M=y(A);return rr(R,M),R})(h,C);We(h,S);const E=St(h);ut(S,E),Pe(h)})(m,v.outputName)}}else Fe(d,f)?Pe(m):Ht(m)},jC=(e,t,n,o,r,s)=>n!=="html"&&!ia(o)||!(r in CT&&MC(e,s,o))&&(!e.validate||t.isValid(o,r)||Kt(r,"data-")||Kt(r,"aria-")),zC=(e,t)=>e.hasAttribute(op)&&(t==="id"||t==="class"||t==="style"),UC=(e,t)=>e in t.getBoolAttrs(),xT=(e,t,n,o)=>{const{attributes:r}=e;for(let s=r.length-1;s>=0;s--){const a=r[s],i=a.name,l=a.value;jC(t,n,o,e.tagName.toLowerCase(),i,l)||zC(e,i)?UC(i,n)&&e.setAttribute(i,i):e.removeAttribute(i)}},wT=(e,t,n)=>{const o=np();return o.addHook("uponSanitizeElement",(r,s)=>{FC(r,e,t,n.track(r),s)}),o.addHook("uponSanitizeAttribute",(r,s)=>{((a,i,l,c,d)=>{const f=a.tagName.toLowerCase(),{attrName:m,attrValue:b}=d;d.keepAttr=jC(i,l,c,f,m,b),d.keepAttr?(d.allowedAttributes[m]=!0,UC(m,l)&&(d.attrValue=m),i.allow_svg_data_urls&&Kt(b,"data:image/svg+xml")&&(d.forceKeepAttr=!0)):zC(a,m)&&(d.forceKeepAttr=!0)})(r,e,t,n.current(),s)}),o},ST=e=>t=>{const n=Jg(t);if(n==="svg")(o=>{const r=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(a=>`xlink:${a}`),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:r};np().sanitize(o,s)})(t);else{if(n!=="math")throw new Error("Not a namespace element");((o,r)=>{const s=np(),a=r.allow_mathml_annotation_encodings,i=se(a)&&a.length>0;s.addHook("uponSanitizeElement",(l,c)=>{var d;const f=(d=c.tagName)!==null&&d!==void 0?d:l.nodeName.toLowerCase();if(i&&f==="semantics"&&(c.allowedTags[f]=!0),f==="annotation"){const m=l,b=(g=>{const v=g.getAttribute("encoding");return i&&Ae(v)&&Te(a,v)})(m);c.allowedTags[f]=b,b||m.remove()}}),s.sanitize(o,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})})(t,e)}},HC=ce.makeMap,qC=ce.extend,$C=(e,t,n,o)=>{const r=e.name,s=r in n&&r!=="title"&&r!=="textarea"&&r!=="noscript",a=t.childNodes;for(let i=0,l=a.length;i<l;i++){const c=a[i],d=new Wn(c.nodeName.toLowerCase(),c.nodeType);if(ke(c)){const f=c.attributes;for(let m=0,b=f.length;m<b;m++){const g=f[m];d.attr(g.name,g.value)}ia(d.name)&&(o(c),d.value=c.innerHTML)}else re(c)?(d.value=c.data,s&&(d.raw=!0)):(Ts(c)||fk(c)||mk(c))&&(d.value=c.data);ia(d.name)||$C(d,c,n,o),e.append(d)}},vi=(e={},t=Rs())=>{const n=gC(),o=gC(),r={validate:!0,root_name:"body",sanitize:!0,...e},s=new DOMParser,a=((v,h)=>{const C=(()=>{const S=os(),E=()=>S.get().map(Jg).getOr("html");return{track:A=>(Pu(A)?S.set(A):S.get().exists(N=>!N.contains(A))&&S.clear(),E()),current:E,reset:()=>{S.clear()}}})();if(v.sanitize){const S=wT(v,h,C);return{sanitizeHtmlElement:(A,N)=>{S.sanitize(A,((R,M)=>{const P={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1};return P.PARSER_MEDIA_TYPE=M,R.allow_script_urls?P.ALLOWED_URI_REGEXP=/.*/:R.allow_html_data_urls&&(P.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),P})(v,N)),S.removed=[],C.reset()},sanitizeNamespaceElement:ST(v)}}return{sanitizeHtmlElement:(S,E)=>{const A=document.createNodeIterator(S,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let N;for(;N=A.nextNode();){const R=C.track(N);FC(N,v,h,R),ke(N)&&xT(N,v,h,R)}C.reset()},sanitizeNamespaceElement:Ee}})(r,t),i=n.addFilter,l=n.getFilters,c=n.removeFilter,d=o.addFilter,f=o.getFilters,m=o.removeFilter,b=(v,h)=>{const C=Ae(h.attr(op)),S=h.type===1&&!Fe(v,h.name)&&!zu(t,h)&&!ia(h.name);return h.type===3||S&&!C},g={schema:t,addAttributeFilter:d,getAttributeFilters:f,removeAttributeFilter:m,addNodeFilter:i,getNodeFilters:l,removeNodeFilter:c,parse:(v,h={})=>{var C;const S=r.validate,E=(C=h.context)!==null&&C!==void 0?C:r.root_name,A=((j,Q,ie="html")=>{const oe=ie==="xhtml"?"application/xhtml+xml":"text/html",we=Fe(t.getSpecialElements(),Q.toLowerCase()),Ne=we?`<${Q}>${j}</${Q}>`:j,Oe=s.parseFromString(ie==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ne}</body></html>`:/^[\s]*<head/i.test(j)||/^[\s]*<html/i.test(j)||/^[\s]*<!DOCTYPE/i.test(j)?`<html>${Ne}</html>`:`<body>${Ne}</body>`,oe).body;return a.sanitizeHtmlElement(Oe,oe),we?Oe.firstChild:Oe})(v,E,h.format);Mu(t,A);const N=new Wn(E,11);$C(N,A,t.getSpecialElements(),a.sanitizeNamespaceElement),A.innerHTML="";const[R,M]=((j,Q,ie,oe)=>{const we=ie.validate,Ne=Q.getNonEmptyElements(),Oe=Q.getWhitespaceElements(),Le=qC(HC("script,style,head,html,body,title,meta,param"),Q.getBlockElements()),ge=vh(Q),Se=/[ \t\r\n]+/g,F=/^[ \t\r\n]+/,U=/[ \t\r\n]+$/,Y=de=>{let Be=de.parent;for(;le(Be);){if(Be.name in Oe)return!0;Be=Be.parent}return!1},X=de=>de.name in Le||zu(Q,de)||ia(de.name)&&de.parent===j,pe=(de,Be)=>{const je=Be?de.prev:de.next;return!le(je)&&!wt(de.parent)&&X(de.parent)&&(de.parent!==j||oe.isRootContent===!0)};return[de=>{var Be;if(de.type===3&&!Y(de)){let je=(Be=de.value)!==null&&Be!==void 0?Be:"";je=je.replace(Se," "),(((Ze,Pt)=>le(Ze)&&(Pt(Ze)||Ze.name==="br"))(de.prev,X)||pe(de,!0))&&(je=je.replace(F,"")),je.length===0||je===" "&&de.prev&&de.prev.type===8&&de.next&&de.next.type===8?de.remove():de.value=je}},de=>{var Be;if(de.type===1){const je=Q.getElementRule(de.name);if(we&&je){const Ze=Dl(Q,Ne,Oe,de);je.paddInEmptyBlock&&Ze&&(Pt=>{let Lt=Pt;for(;le(Lt);){if(Lt.name in ge)return Dl(Q,Ne,Oe,Lt);Lt=Lt.parent}return!1})(de)?Nm(ie,oe,X,de):je.removeEmpty&&Ze?X(de)?de.remove():de.unwrap():je.paddEmpty&&(Ze||(Pt=>{var Lt;return ky(Pt,"#text")&&((Lt=Pt?.firstChild)===null||Lt===void 0?void 0:Lt.value)===rn})(de))&&Nm(ie,oe,X,de)}}else if(de.type===3&&!Y(de)){let je=(Be=de.value)!==null&&Be!==void 0?Be:"";(de.next&&X(de.next)||pe(de,!1))&&(je=je.replace(U,"")),je.length===0?de.remove():de.value=je}}]})(N,t,r,h),P=[],z=S?j=>((Q,ie)=>{Rm(t,Q)&&ie.push(Q)})(j,P):Ee,V={nodes:{},attributes:{}},D=j=>wy(l(),f(),j,V);if(((j,Q,ie)=>{const oe=[];for(let we=j,Ne=we;we;Ne=we,we=we.walk()){const Oe=we;J(Q,Le=>Le(Oe)),wt(Oe.parent)&&Oe!==j?we=Ne:oe.push(Oe)}for(let we=oe.length-1;we>=0;we--){const Ne=oe[we];J(ie,Oe=>Oe(Ne))}})(N,[R,D],[M,z]),P.reverse(),S&&P.length>0)if(h.context){const{pass:j,fail:Q}=qo(P,ie=>ie.parent===N);Tm(Q,t,N,D),h.invalid=j.length>0}else Tm(P,t,N,D);const L=((j,Q)=>{var ie;const oe=(ie=Q.forced_root_block)!==null&&ie!==void 0?ie:j.forced_root_block;return oe===!1?"":oe===!0?"p":oe})(r,h);return L&&(N.name==="body"||h.isRootContent)&&((j,Q)=>{const ie=qC(HC("script,style,head,html,body,title,meta,param"),t.getBlockElements()),oe=/^[ \t\r\n]+/,we=/[ \t\r\n]+$/;let Ne=j.firstChild,Oe=null;const Le=ge=>{var Se,F;ge&&(Ne=ge.firstChild,Ne&&Ne.type===3&&(Ne.value=(Se=Ne.value)===null||Se===void 0?void 0:Se.replace(oe,"")),Ne=ge.lastChild,Ne&&Ne.type===3&&(Ne.value=(F=Ne.value)===null||F===void 0?void 0:F.replace(we,"")))};if(t.isValidChild(j.name,Q.toLowerCase())){for(;Ne;){const ge=Ne.next;b(ie,Ne)?(Oe||(Oe=new Wn(Q,1),Oe.attr(r.forced_root_block_attrs),j.insert(Oe,Ne)),Oe.append(Ne)):(Le(Oe),Oe=null),Ne=ge}Le(Oe)}})(N,L),h.invalid||Sy(V,h),N}};return((v,h)=>{var C,S;const E=v.schema;v.addAttributeFilter("href",M=>{let P=M.length;const z=V=>{const D=V?ce.trim(V):"";return/\b(noopener)\b/g.test(D)?D:(L=>L.split(" ").filter(j=>j.length>0).concat(["noopener"]).sort().join(" "))(D)};if(!h.allow_unsafe_link_target)for(;P--;){const V=M[P];V.name==="a"&&V.attr("target")==="_blank"&&V.attr("rel",z(V.attr("rel")))}}),h.allow_html_in_named_anchor||v.addAttributeFilter("id,name",M=>{let P,z,V,D,L=M.length;for(;L--;)if(D=M[L],D.name==="a"&&D.firstChild&&!D.attr("href"))for(V=D.parent,P=D.lastChild;P&&V;)z=P.prev,V.insert(P,D),P=z}),h.fix_list_elements&&v.addNodeFilter("ul,ol",M=>{let P,z,V=M.length;for(;V--;)if(P=M[V],z=P.parent,z&&(z.name==="ul"||z.name==="ol"))if(P.prev&&P.prev.name==="li")P.prev.append(P);else{const D=new Wn("li",1);D.attr("style","list-style-type: none"),P.wrap(D)}});const A=E.getValidClasses();h.validate&&A&&v.addAttributeFilter("class",M=>{var P;let z=M.length;for(;z--;){const V=M[z],D=(P=V.attr("class"))!==null&&P!==void 0?P:"",L=ce.explode(D," ");let j="";for(let Q=0;Q<L.length;Q++){const ie=L[Q];let oe=!1,we=A["*"];we&&we[ie]&&(oe=!0),we=A[V.name],!oe&&we&&we[ie]&&(oe=!0),oe&&(j&&(j+=" "),j+=ie)}j.length||(j=null),V.attr("class",j)}}),((M,P)=>{const{blob_cache:z}=P;if(z){const V=D=>{const L=D.attr("src");(j=>j.attr("src")===gt.transparentSrc||le(j.attr("data-mce-placeholder")))(D)||(j=>le(j.attr("data-mce-bogus")))(D)||wt(L)||CC(z,L,!0).each(j=>{D.attr("src",j.blobUri())})};M.addAttributeFilter("src",D=>J(D,V))}})(v,h);const N=(C=h.sandbox_iframes)!==null&&C!==void 0&&C,R=wr((S=h.sandbox_iframes_exclusions)!==null&&S!==void 0?S:[]);h.convert_unsafe_embeds&&v.addNodeFilter("object,embed",M=>J(M,P=>{P.replace((({type:z,src:V,width:D,height:L}={},j,Q)=>{const ie=(we=>Ft(we)?"iframe":Xm(we,"image")?"img":Xm(we,"video")?"video":Xm(we,"audio")?"audio":"iframe")(z),oe=new Wn(ie,1);return oe.attr(ie==="audio"?{src:V}:{src:V,width:D,height:L}),ie!=="audio"&&ie!=="video"||oe.attr("controls",""),ie==="iframe"&&j&&xC(oe,Q),oe})({type:P.attr("type"),src:P.name==="object"?P.attr("data"):P.attr("src"),width:P.attr("width"),height:P.attr("height")},N,R))})),N&&v.addNodeFilter("iframe",M=>J(M,P=>xC(P,R)))})(g,r),((v,h,C)=>{h.inline_styles&&KA(v,h,C)})(g,r,t),g},WC=(e,t,n)=>{const o=(s=>hd(s)?Is({validate:!1}).serialize(s):s)(e),r=t(o);if(r.isDefaultPrevented())return r;if(hd(e)){if(r.content!==o){const s=vi({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:e.name});return{...r,content:s}}return{...r,content:e}}return r},VC=e=>({sanitize:H0(e),sandbox_iframes:$0(e),sandbox_iframes_exclusions:wf(e)}),KC=(e,t)=>{if(t.no_events)return eo.value(t);{const n=((o,r)=>o.dispatch("BeforeGetContent",r))(e,t);return n.isDefaultPrevented()?eo.error(S0(e,{content:"",...n}).content):eo.value(n)}},XC=(e,t,n)=>n.no_events?t:WC(t,r=>S0(e,{...n,content:r}),VC(e)).content,rp=(e,t)=>{if(t.no_events)return eo.value(t);{const n=WC(t.content,o=>((r,s)=>r.dispatch("BeforeSetContent",s))(e,{...t,content:o}),VC(e));return n.isDefaultPrevented()?(w0(e,n),eo.error(void 0)):eo.value(n)}},sp=(e,t,n)=>{n.no_events||w0(e,{...n,content:t})},ap=(e,t,n)=>({element:e,width:t,rows:n}),YC=(e,t)=>({element:e,cells:t}),ET=(e,t)=>({x:e,y:t}),GC=(e,t)=>sr(e,t).bind(ea).getOr(1),kT=(e,t,n)=>{const o=e.rows;return!!(o[n]?o[n].cells:[])[t]},QC=e=>hn(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),JC=(e,t)=>{const n=e.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(Ie(r[s],t))return k.some(ET(s,o))}return k.none()},ZC=(e,t,n,o,r)=>{const s=[],a=e.rows;for(let i=n;i<=r;i++){const l=a[i].cells,c=t<o?l.slice(t,o+1):l.slice(o,t+1);s.push(YC(a[i].element,c))}return s},_T=e=>((t,n)=>{const o=ma(t.element),r=De("tbody");return ut(r,n),at(o,r),o})(e,(t=>ot(t.rows,n=>{const o=ot(n.cells,s=>{const a=Mh(s);return p(a,"colspan"),p(a,"rowspan"),a}),r=ma(n.element);return ut(r,o),r}))(e)),NT=(e,t,n)=>{const o=B(t.commonAncestorContainer),r=as(o,e),s=Ke(r,l=>n.isWrapper(ft(l))),a=((l,c)=>Gt(l,d=>ft(d)==="li"&&Pf(d,c)).fold(fe([]),d=>(f=>Gt(f,m=>ft(m)==="ul"||ft(m)==="ol"))(l).map(f=>{const m=De(ft(f)),b=kr(ue(f),(g,v)=>Kt(v,"list-style"));return I(m,b),[De("li"),m]}).getOr([])))(r,t),i=s.concat(a.length?a:(l=>ti(l)?ro(l).filter(nf).fold(fe([]),c=>[l,c]):nf(l)?[l]:[])(o));return ot(i,ma)},e1=()=>tm([]),AT=(e,t)=>((n,o)=>lr(o,"table",xe(Ie,n)))(e,t[0]).bind(n=>{const o=t[0],r=t[t.length-1],s=(a=>{const i=ap(ma(a),0,[]);return J(Mn(a,"tr"),(l,c)=>{J(Mn(l,"td,th"),(d,f)=>{((m,b,g,v,h)=>{const C=GC(h,"rowspan"),S=GC(h,"colspan"),E=m.rows;for(let A=g;A<g+C;A++){E[A]||(E[A]=YC(Mh(v),[]));for(let N=b;N<b+S;N++)E[A].cells[N]=A===g&&N===b?h:ma(h)}})(i,((m,b,g)=>{for(;kT(m,b,g);)b++;return b})(i,f,c),c,l,d)})}),ap(i.element,QC(i.rows),i.rows)})(n);return((a,i,l)=>JC(a,i).bind(c=>JC(a,l).map(d=>((f,m,b)=>{const g=m.x,v=m.y,h=b.x,C=b.y,S=v<C?ZC(f,g,v,h,C):ZC(f,g,C,h,v);return ap(f.element,QC(S),S)})(a,c,d))))(s,o,r).map(a=>tm([_T(a)]))}).getOrThunk(e1),TT=(e,t,n)=>{const o=yb(t,e);return o.length>0?AT(e,o):((r,s,a)=>s.length>0&&s[0].collapsed?e1():((i,l,c)=>((d,f)=>{const m=hn(f,(b,g)=>(at(g,b),g),d);return f.length>0?tm([m]):m})(B(l.cloneContents()),NT(i,l,c)))(r,s[0],a))(e,t,n)},Sd=(e,t)=>t>=0&&t<e.length&&xa(e.charAt(t)),t1=e=>yo(e.innerText),n1=e=>ke(e)?e.outerHTML:re(e)?da.encodeRaw(e.data,!1):Ts(e)?"<!--"+e.data+"-->":"",RT=(e,t)=>(((n,o)=>{let r=0;J(n,s=>{s[0]===0?r++:s[0]===1?(((a,i,l)=>{const c=(d=>{let f;const m=document.createElement("div"),b=document.createDocumentFragment();for(d&&(m.innerHTML=d);f=m.firstChild;)b.appendChild(f);return b})(i);if(a.hasChildNodes()&&l<a.childNodes.length){const d=a.childNodes[l];a.insertBefore(c,d)}else a.appendChild(c)})(o,s[1],r),r++):s[0]===2&&((a,i)=>{if(a.hasChildNodes()&&i<a.childNodes.length){const l=a.childNodes[i];a.removeChild(l)}})(o,r)})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(f,m,b,g,v)=>{const h=c(f,m,b,g);if(h===null||h.start===m&&h.diag===m-g||h.end===f&&h.diag===f-b){let C=f,S=b;for(;C<m||S<g;)C<m&&S<g&&n[C]===o[S]?(v.push([0,n[C]]),++C,++S):m-f>g-b?(v.push([2,n[C]]),++C):(v.push([1,o[S]]),++S)}else{i(f,h.start,b,h.start-h.diag,v);for(let C=h.start;C<h.end;++C)v.push([0,n[C]]);i(h.end,m,h.end-h.diag,g,v)}},l=(f,m,b,g)=>{let v=f;for(;v-m<g&&v<b&&n[v]===o[v-m];)++v;return((h,C,S)=>({start:h,end:C,diag:S}))(f,v,m)},c=(f,m,b,g)=>{const v=m-f,h=g-b;if(v===0||h===0)return null;const C=v-h,S=h+v,E=(S%2==0?S:S+1)/2;let A,N,R,M,P;for(s[1+E]=f,a[1+E]=m+1,A=0;A<=E;++A){for(N=-A;N<=A;N+=2){for(R=N+E,N===-A||N!==A&&s[R-1]<s[R+1]?s[R]=s[R+1]:s[R]=s[R-1]+1,M=s[R],P=M-f+b-N;M<m&&P<g&&n[M]===o[P];)s[R]=++M,++P;if(C%2!=0&&C-A<=N&&N<=C+A&&a[R-C]<=s[R])return l(a[R-C],N+f-b,m,g)}for(N=C-A;N<=C+A;N+=2){for(R=N+E-C,N===C-A||N!==C+A&&a[R+1]<=a[R-1]?a[R]=a[R+1]-1:a[R]=a[R-1],M=a[R]-1,P=M-f+b-N;M>=f&&P>=b&&n[M]===o[P];)a[R]=M--,P--;if(C%2==0&&-A<=N&&N<=A&&a[R]<=s[R+C])return l(a[R],N+f-b,m,g)}}return null},d=[];return i(0,n.length,0,o.length,d),d})(ot(bn(t.childNodes),n1),e),t),t),OT=Vo(()=>document.implementation.createHTMLDocument("undo")),Ed=e=>{const t=e.serializer.getTempAttrs(),n=Sv(e.getBody(),t);return(o=>o.querySelector("iframe")!==null)(n)?{type:"fragmented",fragments:Ke(ot(bn(n.childNodes),wn(yo,n1)),o=>o.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:yo(n.innerHTML),bookmark:null,beforeBookmark:null}},ip=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?RT(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!le(o)||!mb(o)||!o.isFakeCaret}),o&&(e.selection.moveToBookmark(o),e.selection.scrollIntoView())},lp=e=>e.type==="fragmented"?e.fragments.join(""):e.content,o1=e=>{const t=De("body",OT());return Nn(t,lp(e)),J(Mn(t,"*[data-mce-bogus]"),Ht),un(t)},cp=(e,t)=>!(!e||!t)&&(!!((n,o)=>lp(n)===lp(o))(e,t)||((n,o)=>o1(n)===o1(o))(e,t)),dp=e=>e.get()===0,kd=(e,t,n)=>{dp(n)&&(e.typing=t)},r1=(e,t)=>{e.typing&&(kd(e,!1,t),e.add())},s1=e=>({init:{bindEvents:Ee},undoManager:{beforeChange:(t,n)=>((o,r,s)=>{dp(r)&&s.set(gf(o.selection))})(e,t,n),add:(t,n,o,r,s,a)=>((i,l,c,d,f,m,b)=>{const g=Ed(i),v=ce.extend(m||{},g);if(!dp(d)||i.removed)return null;const h=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:v,lastLevel:h,originalEvent:b}).isDefaultPrevented()||h&&cp(h,v))return null;l.data[c.get()]&&f.get().each(E=>{l.data[c.get()].beforeBookmark=E});const C=j_(i);if(C&&l.data.length>C){for(let E=0;E<l.data.length-1;E++)l.data[E]=l.data[E+1];l.data.length--,c.set(l.data.length)}v.bookmark=gf(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(v),c.set(l.data.length-1);const S={level:v,lastLevel:h,originalEvent:b};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",S),i.dispatch("change",S)):i.dispatch("AddUndo",S),v})(e,t,n,o,r,s,a),undo:(t,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,kd(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],ip(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(e,t,n,o),redo:(t,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],ip(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(e,t,n),clear:(t,n)=>((o,r,s)=>{r.data=[],s.set(0),r.typing=!1,o.dispatch("ClearUndos")})(e,t,n),reset:t=>(n=>{n.clear(),n.add()})(t),hasUndo:(t,n)=>((o,r,s)=>s.get()>0||r.typing&&r.data[0]&&!cp(Ed(o),r.data[0]))(e,t,n),hasRedo:(t,n)=>((o,r)=>r.get()<o.data.length-1&&!o.typing)(t,n),transact:(t,n,o)=>((r,s,a)=>(r1(r,s),r.beforeChange(),r.ignore(a),r.add()))(t,n,o),ignore:(t,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(t,n),extra:(t,n,o,r)=>((s,a,i,l,c)=>{if(a.transact(l)){const d=a.data[i.get()].bookmark,f=a.data[i.get()-1];ip(s,f,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=d)}})(e,t,n,o,r)},formatter:{match:(t,n,o,r)=>Fm(e,t,n,o,r),matchAll:(t,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,c=>{for(let d=0;d<r.length;d++){const f=r[d];!i[f]&&Fr(o,c,f,s)&&(i[f]=!0,a.push(f))}},o.dom.getRoot()),a})(e,t,n),matchNode:(t,n,o,r)=>Fr(e,t,n,o,r),canApply:t=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const a=n.selection.getStart(),i=Qc(s,a);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!Lo(c))return!0;for(let d=i.length-1;d>=0;d--)if(s.is(i[d],c.selector))return!0}}return!1})(e,t),closest:t=>((n,o)=>{const r=s=>Ie(s,B(n.getBody()));return k.from(n.selection.getStart(!0)).bind(s=>Lm(B(s),a=>Gn(o,i=>((l,c)=>Fr(n,l.dom,c)?k.some(c):k.none())(a,i)),r)).getOrNull()})(e,t),apply:(t,n,o)=>lC(e,t,n,o),remove:(t,n,o,r)=>sC(e,t,n,o,r),toggle:(t,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!Fm(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?lC(r,s,a,i):sC(r,s,a,i))})(e,t,n,o),formatChanged:(t,n,o,r,s)=>((a,i,l,c,d,f)=>(((m,b,g,v,h,C)=>{const S=b.get();J(g.split(","),E=>{const A=Ot(S,E).getOrThunk(()=>{const R={withSimilar:{state:mn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:mn(!1),similar:!1,callbacks:[]},withVars:[]};return S[E]=R,R}),N=()=>{const R=fC(m);return uC(m,R,E,h,C).isSome()};if(Ft(C)){const R=h?A.withSimilar:A.withoutSimilar;R.callbacks.push(v),R.callbacks.length===1&&R.state.set(N())}else A.withVars.push({state:mn(N()),similar:h,vars:C,callback:v})}),b.set(S)})(a,i,l,c,d,f),{unbind:()=>((m,b,g)=>{const v=m.get();J(b.split(","),h=>Ot(v,h).each(C=>{v[h]={withSimilar:{...C.withSimilar,callbacks:Ke(C.withSimilar.callbacks,S=>S!==g)},withoutSimilar:{...C.withoutSimilar,callbacks:Ke(C.withoutSimilar.callbacks,S=>S!==g)},withVars:Ke(C.withVars,S=>S.callback!==g)}})),m.set(v)})(i,l,c)}))(e,t,n,o,r,s)},editor:{getContent:t=>((n,o)=>k.from(n.getBody()).fold(fe(o.format==="tree"?new Wn("body",11):""),r=>bA(n,o,r)))(e,t),setContent:(t,n)=>((o,r,s)=>k.from(o.getBody()).map(a=>hd(r)?((i,l,c,d)=>{Ey(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const f=Is({validate:!1},i.schema).serialize(c),m=yo(Oc(B(l))?f:ce.trim(f));return Pm(i,m,d.no_selection),{content:c,html:m}})(o,a,r,s):((i,l,c,d)=>{if((c=yo(c)).length===0||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';l.nodeName==="TABLE"?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const m=Fn(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),m.toLowerCase())?(c=f,c=i.dom.createHTML(m,pl(i),c)):c||(c=f),Pm(i,c,d.no_selection),{content:c,html:c}}{d.format!=="raw"&&(c=Is({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const f=Oc(B(l))?c:ce.trim(c);return Pm(i,f,d.no_selection),{content:f,html:f}}})(o,a,r,s)).getOr({content:r,html:hd(s.content)?"":s.content}))(e,t,n),insertContent:(t,n)=>HA(e,t,n),addVisual:t=>((n,o)=>{const r=n.dom,s=le(o)?o:n.getBody();J(r.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=W_(n),l=r.getAttrib(a,"border");l&&l!=="0"||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const c=r.getAttrib(a,"name")||a.id,d=j0(n);c&&n.hasVisual?r.addClass(a,d):r.removeClass(a,d)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((o,r,s={})=>{const a=((i,l)=>({...i,format:l,get:!0,selection:!0,getInner:!0}))(s,r);return KC(o,a).fold(mt,i=>{const l=((c,d)=>{if(d.format==="text")return(f=>k.from(f.selection.getRng()).map(m=>{var b;const g=k.from(f.dom.getParent(m.commonAncestorContainer,f.dom.isBlock)),v=f.getBody(),h=(N=>N.map(R=>R.nodeName).getOr("div").toLowerCase())(g),C=B(m.cloneContents());Ev(C),kv(C);const S=f.dom.add(v,h,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},C.dom),E=t1(S),A=yo((b=S.textContent)!==null&&b!==void 0?b:"");if(f.dom.remove(S),Sd(A,0)||Sd(A,A.length-1)){const N=g.getOr(v),R=t1(N),M=R.indexOf(E);return M===-1?E:(Sd(R,M-1)?" ":"")+E+(Sd(R,M+E.length)?" ":"")}return E}).getOr(""))(c);{const f=((m,b)=>{const g=m.selection.getRng(),v=m.dom.create("body"),h=m.selection.getSel(),C=am(m,Bf(h)),S=b.contextual?TT(B(m.getBody()),C,m.schema).dom:g.cloneContents();return S&&v.appendChild(S),m.selection.serializer.serialize(v,b)})(c,d);return d.format==="tree"?f:c.selection.isCollapsed()?"":f}})(o,i);return XC(o,l,i)})})(e,t,n)},autocompleter:{addDecoration:Ee,removeDecoration:Ee},raw:{getModel:()=>k.none()}}),jr=e=>Fe(e.plugins,"rtc"),up=e=>e.rtcInstance?e.rtcInstance:s1(e),tn=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},a1=e=>tn(e).init.bindEvents(),i1=e=>e.dom.length===0?(Pe(e),k.none()):k.some(e),l1=(e,t,n,o,r)=>{e.bind(s=>((o?gm:ud)(s.dom,o?s.dom.length:0,r),t.filter(yn).map(a=>((i,l,c,d,f)=>{const m=i.dom,b=l.dom,g=d?m.length:b.length;d?(hm(m,b,f,!1,!d),c.setStart(b,g)):(hm(b,m,f,!1,!d),c.setEnd(b,g))})(s,a,n,o,r)))).orThunk(()=>((a,i)=>a.filter(l=>kl.isBookmarkNode(l.dom)).bind(i?bo:Ln))(t,o).or(t).filter(yn).map(a=>((i,l,c)=>{ro(i).each(d=>{const f=i.dom;l&&Rl(d,G(f,0),c)?ud(f,0,c):!l&&Ol(d,G(f,f.length),c)&&gm(f,f.length,c)})})(a,o,r)))},c1=(e,t,n)=>{if(Fe(e,t)){const o=Ke(e[t],r=>r!==n);o.length===0?delete e[t]:e[t]=o}},d1=e=>!(!e||!e.ownerDocument)&&En(B(e.ownerDocument),B(e)),u1=(e,t,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((h,C)=>{let S,E;const A=(R,M)=>Gt(M,P=>h.is(P,R)),N=R=>h.getParents(R,void 0,h.getRoot());return{selectorChangedWithUnbind:(R,M)=>(S||(S={},E={},C.on("NodeChange",P=>{const z=P.element,V=N(z),D={};Ct(S,(L,j)=>{A(j,V).each(Q=>{E[j]||(J(L,ie=>{ie(!0,{node:Q,selector:j,parents:V})}),E[j]=L),D[j]=L})}),Ct(E,(L,j)=>{D[j]||(delete E[j],J(L,Q=>{Q(!1,{node:z,selector:j,parents:V})}))})})),S[R]||(S[R]=[]),S[R].push(M),A(R,N(C.selection.getStart())).each(()=>{E[R]=S[R]}),{unbind:()=>{c1(S,R,M),c1(E,R,M)}})}})(e,o),i=(h,C)=>((S,E,A={})=>{const N=((R,M)=>({format:"html",...R,set:!0,selection:!0,content:M}))(A,E);rp(S,N).each(R=>{const M=((z,V)=>{if(V.format!=="raw"){const D=z.selection.getRng(),L=z.dom.getParent(D.commonAncestorContainer,z.dom.isBlock),j=L?{context:L.nodeName.toLowerCase()}:{},Q=z.parser.parse(V.content,{forced_root_block:!1,...j,...V});return Is({validate:!1},z.schema).serialize(Q)}return V.content})(S,R),P=S.selection.getRng();((z,V,D)=>{const L=k.from(V.firstChild).map(B),j=k.from(V.lastChild).map(B);z.deleteContents(),z.insertNode(V);const Q=L.bind(Ln).filter(yn).bind(i1),ie=j.bind(bo).filter(yn).bind(i1);l1(Q,L,z,!0,D),l1(ie,j,z,!1,D),z.collapse(!1)})(P,P.createContextualFragment(M),S.schema),S.selection.setRng(P),Nl(S,P),sp(S,M,R)})})(o,h,C),l=h=>{const C=d();C.collapse(!!h),f(C)},c=()=>t.getSelection?t.getSelection():t.document.selection,d=()=>{let h;const C=(E,A,N)=>{try{return A.compareBoundaryPoints(E,N)}catch{return-1}},S=t.document;if(le(o.bookmark)&&!hi(o)){const E=Kf(o);if(E.isSome())return E.map(A=>am(o,[A])[0]).getOr(S.createRange())}try{const E=c();E&&!wc(E.anchorNode)&&(h=E.rangeCount>0?E.getRangeAt(0):S.createRange(),h=am(o,[h])[0])}catch{}if(h||(h=S.createRange()),Qi(h.startContainer)&&h.collapsed){const E=e.getRoot();h.setStart(E,0),h.setEnd(E,0)}return r&&s&&(C(h.START_TO_START,h,r)===0&&C(h.END_TO_END,h,r)===0?h=s:(r=null,s=null)),h},f=(h,C)=>{if(!(E=>!!E&&d1(E.startContainer)&&d1(E.endContainer))(h))return;const S=c();if(h=o.dispatch("SetSelectionRange",{range:h,forward:C}).range,S){s=h;try{S.removeAllRanges(),S.addRange(h)}catch{}C===!1&&S.extend&&(S.collapse(h.endContainer,h.endOffset),S.extend(h.startContainer,h.startOffset)),r=S.rangeCount>0?S.getRangeAt(0):null}if(!h.collapsed&&h.startContainer===h.endContainer&&S?.setBaseAndExtent&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()){const E=h.startContainer.childNodes[h.startOffset];E&&E.nodeName==="IMG"&&(S.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),S.anchorNode===h.startContainer&&S.focusNode===h.endContainer||S.setBaseAndExtent(E,0,E,1))}o.dispatch("AfterSetSelectionRange",{range:h,forward:C})},m=()=>{const h=c(),C=h?.anchorNode,S=h?.focusNode;if(!h||!C||!S||wc(C)||wc(S))return!0;const E=e.createRng(),A=e.createRng();try{E.setStart(C,h.anchorOffset),E.collapse(!0),A.setStart(S,h.focusOffset),A.collapse(!0)}catch{return!0}return E.compareBoundaryPoints(E.START_TO_START,A)<=0},b={dom:e,win:t,serializer:n,editor:o,expand:(h={type:"word"})=>f(Ea(e).expand(d(),h)),collapse:l,setCursorLocation:(h,C)=>{const S=e.createRng();le(h)&&le(C)?(S.setStart(h,C),S.setEnd(h,C),f(S),l(!1)):(Lf(e,S,o.getBody(),!0),f(S))},getContent:h=>((C,S={})=>((E,A,N)=>tn(E).selection.getContent(A,N))(C,S.format?S.format:"html",S))(o,h),setContent:i,getBookmark:(h,C)=>g.getBookmark(h,C),moveToBookmark:h=>g.moveToBookmark(h),select:(h,C)=>(((S,E,A)=>k.from(E).bind(N=>k.from(N.parentNode).map(R=>{const M=S.nodeIndex(N),P=S.createRng();return P.setStart(R,M),P.setEnd(R,M+1),A&&(Lf(S,P,N,!0),Lf(S,P,N,!1)),P})))(e,h,C).each(f),h),isCollapsed:()=>{const h=d(),C=c();return!(!h||h.item)&&(h.compareEndPoints?h.compareEndPoints("StartToEnd",h)===0:!C||h.collapsed)},isEditable:()=>{if(o.mode.isReadOnly())return!1;const h=d(),C=o.getBody().querySelectorAll('[data-mce-selected="1"]');return C.length>0?oo(C,S=>e.isEditable(S.parentElement)):fv(e,h)},isForward:m,setNode:h=>(i(e.getOuterHTML(h)),h),getNode:()=>((h,C)=>{if(!C)return h;let S=C.startContainer,E=C.endContainer;const A=C.startOffset,N=C.endOffset;let R=C.commonAncestorContainer;C.collapsed||(S===E&&N-A<2&&S.hasChildNodes()&&(R=S.childNodes[A]),re(S)&&re(E)&&(S=S.length===A?hv(S.nextSibling,!0):S.parentNode,E=N===0?hv(E.previousSibling,!1):E.parentNode,S&&S===E&&(R=S)));const M=re(R)?R.parentNode:R;return Rr(M)?M:h})(o.getBody(),d()),getSel:c,setRng:f,getRng:d,getStart:h=>pv(o.getBody(),d(),h),getEnd:h=>gv(o.getBody(),d(),h),getSelectedBlocks:(h,C)=>((S,E,A,N)=>{const R=[],M=S.getRoot(),P=S.getParent(A||pv(M,E,E.collapsed),S.isBlock),z=S.getParent(N||gv(M,E,E.collapsed),S.isBlock);if(P&&P!==M&&R.push(P),P&&z&&P!==z){let V;const D=new fn(P,M);for(;(V=D.next())&&V!==z;)S.isBlock(V)&&R.push(V)}return z&&P!==z&&z!==M&&R.push(z),R})(e,d(),h,C),normalize:()=>{const h=d(),C=c();if(!(Bf(C).length>1)&&Yc(o)){const S=sd(e,h);return S.each(E=>{f(E,m())}),S.getOr(h)}return h},selectorChanged:(h,C)=>(a(h,C),b),selectorChangedWithUnbind:a,getScrollContainer:()=>{let h,C=e.getRoot();for(;C&&C.nodeName!=="BODY";){if(C.scrollHeight>C.clientHeight){h=C;break}C=C.parentNode}return h},scrollIntoView:(h,C)=>{le(h)?((S,E,A)=>{(S.inline?sA:iA)(S,E,A)})(o,h,C):Nl(o,d(),C)},placeCaretAt:(h,C)=>f(ev(h,C,o.getDoc())),getBoundingClientRect:()=>{const h=d();return h.collapsed?G.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:()=>{t=r=s=null,v.destroy()}},g=kl(b),v=Gb(b,o);return b.bookmarkManager=g,b.controlSelection=v,b},BT=(e,t,n)=>{ce.inArray(t,n)===-1&&(e.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),t.push(n))},DT=(e,t)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},r=t&&t.dom?t.dom:Bt.DOM,s=t&&t.schema?t.schema:Rs(o),a=vi(o,s);return((i,l,c)=>{i.addAttributeFilter("data-mce-tabindex",(d,f)=>{let m=d.length;for(;m--;){const b=d[m];b.attr("tabindex",b.attr("data-mce-tabindex")),b.attr(f,null)}}),i.addAttributeFilter("src,href,style",(d,f)=>{const m="data-mce-"+f,b=l.url_converter,g=l.url_converter_scope;let v=d.length;for(;v--;){const h=d[v];let C=h.attr(m);C!==void 0?(h.attr(f,C.length>0?C:null),h.attr(m,null)):(C=h.attr(f),f==="style"?C=c.serializeStyle(c.parseStyle(C),h.name):b&&(C=b.call(g,C,f,h.name)),h.attr(f,C.length>0?C:null))}}),i.addAttributeFilter("class",d=>{let f=d.length;for(;f--;){const m=d[f];let b=m.attr("class");b&&(b=b.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",b.length>0?b:null))}}),i.addAttributeFilter("data-mce-type",(d,f,m)=>{let b=d.length;for(;b--;){const g=d[b];g.attr("data-mce-type")==="bookmark"&&!m.cleanup&&(k.from(g.firstChild).exists(h=>{var C;return!Bc((C=h.value)!==null&&C!==void 0?C:"")})?g.unwrap():g.remove())}}),i.addNodeFilter("script,style",(d,f)=>{var m;const b=v=>v.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=d.length;for(;g--;){const v=d[g],h=v.firstChild,C=(m=h?.value)!==null&&m!==void 0?m:"";if(f==="script"){const S=v.attr("type");S&&v.attr("type",S==="mce-no/type"?null:S.replace(/^mce\-/,"")),l.element_format==="xhtml"&&h&&C.length>0&&(h.value=`// <![CDATA[
`+b(C)+`
// ]]>`)}else l.element_format==="xhtml"&&h&&C.length>0&&(h.value=`<!--
`+b(C)+`
-->`)}}),i.addNodeFilter("#comment",d=>{let f=d.length;for(;f--;){const m=d[f],b=m.value;l.preserve_cdata&&b?.indexOf("[CDATA[")===0?(m.name="#cdata",m.type=4,m.value=c.decode(b.replace(/^\[CDATA\[|\]\]$/g,""))):b?.indexOf("mce:protected ")===0&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(b).substr(14))}}),i.addNodeFilter("xml:namespace,input",(d,f)=>{let m=d.length;for(;m--;){const b=d[m];b.type===7?b.remove():b.type===1&&(f!=="input"||b.attr("type")||b.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",d=>{J(d,f=>{f.attr("data-mce-type")==="format-caret"&&(f.isEmpty(i.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(d,f)=>{let m=d.length;for(;m--;)d[m].attr(f,null)}),l.remove_trailing_brs&&((d,f,m)=>{f.addNodeFilter("br",(b,g,v)=>{const h=ce.extend({},m.getBlockElements()),C=m.getNonEmptyElements(),S=m.getWhitespaceElements();h.body=1;const E=A=>A.name in h||zu(m,A);for(let A=0,N=b.length;A<N;A++){let R=b[A],M=R.parent;if(M&&E(M)&&R===M.lastChild){let P=R.prev;for(;P;){const z=P.name;if(z!=="span"||P.attr("data-mce-type")!=="bookmark"){z==="br"&&(R=null);break}P=P.prev}if(R&&(R.remove(),Dl(m,C,S,M))){const z=m.getElementRule(M.name);z&&(z.removeEmpty?M.remove():z.paddEmpty&&Nm(d,v,E,M))}}else{let P=R;for(;M&&M.firstChild===P&&M.lastChild===P&&(P=M,!h[M.name]);)M=M.parent;if(P===M){const z=new Wn("#text",3);z.value=rn,R.replace(z)}}}})})(l,i,i.schema)})(a,o,r),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},d=((b,g,v)=>((h,C)=>le(h)&&h.hasEventListeners("PreProcess")&&!C.no_events)(b,v)?((h,C,S)=>{let E;const A=h.dom;let N=C.cloneNode(!0);const R=document.implementation;if(R.createHTMLDocument){const M=R.createHTMLDocument("");ce.each(N.nodeName==="BODY"?N.childNodes:[N],P=>{M.body.appendChild(M.importNode(P,!0))}),N=N.nodeName!=="BODY"?M.body.firstChild:M.body,E=A.doc,A.doc=M}return((M,P)=>{M.dispatch("PreProcess",P)})(h,{...S,node:N}),E&&(A.doc=E),N})(b,g,v):g)(t,i,c),f=((b,g,v)=>{const h=yo(v.getInner?g.innerHTML:b.getOuterHTML(g));return v.selection||Oc(B(g))?h:ce.trim(h)})(r,d,c),m=((b,g,v)=>{const h=v.selection?{forced_root_block:!1,...v}:v,C=b.parse(g,h);return(S=>{const E=N=>N?.name==="br",A=S.lastChild;if(E(A)){const N=A.prev;E(N)&&(A.remove(),N.remove())}})(C),C})(a,f,c);return c.format==="tree"?m:((b,g,v,h,C)=>{const S=((E,A,N)=>Is(E,A).serialize(N))(g,v,h);return((E,A,N)=>!A.no_events&&E?((M,P)=>M.dispatch("PostProcess",P))(E,{...A,content:N}).content:N)(b,C,S)})(t,o,s,m,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:xe(BT,a,n),getTempAttrs:fe(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},f1=(e,t)=>{const n=DT(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},fp=(e,t,n={})=>{const o=((r,s)=>({format:"html",...r,set:!0,content:s}))(n,t);return rp(e,o).map(r=>{const s=((a,i,l)=>up(a).editor.setContent(i,l))(e,r.content,r);return sp(e,s.html,r),s.content}).getOr(t)},PT="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),LT=[],MT="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),m1=[],p1=(e,t)=>{const n=Ke(t,o=>Fe(e,o));return Kr(n)},IT=e=>{const t=p1(e,PT),n=e.forced_root_block;return n!==!1&&n!==""||t.push("forced_root_block (false only)"),Kr(t)},FT=e=>p1(e,LT),g1=(e,t)=>{const n=ce.makeMap(e.plugins," "),o=Ke(t,r=>Fe(n,r));return Kr(o)},jT=e=>g1(e,MT),zT=e=>g1(e,m1.map(t=>t.name)),UT=e=>Gt(m1,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),_d=Bt.DOM,Nd=e=>k.from(e).each(t=>t.destroy()),Ad=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Fe(e,t)}})(),yi=$n.ModelManager,h1=(e,t)=>t.dom[e],b1=(e,t)=>parseInt(W(t,e),10),HT=xe(h1,"clientWidth"),qT=xe(h1,"clientHeight"),$T=xe(b1,"margin-top"),WT=xe(b1,"margin-left"),v1=e=>{const t=[],n=()=>{const l=e.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>k.from(t[0]),r=()=>{o().each(l=>{l.reposition()})},s=l=>{Xs(t,c=>c===l).each(c=>{t.splice(c,1)})},a=(l,c=!0)=>e.removed||!(d=>{return(f=d.inline?d.getBody():d.getContentAreaContainer(),k.from(f).map(B)).map(ir).getOr(!1);var f})(e)?{}:(c&&e.dispatch("BeforeOpenNotification",{notification:l}),Gt(t,d=>{return f=n().getArgs(d),m=l,!(f.type!==m.type||f.text!==m.text||f.progressBar||f.timeout||m.progressBar||m.timeout);var f,m}).getOrThunk(()=>{e.editorManager.setActive(e);const d=n().open(l,()=>{s(d)},()=>Qf(e));return(f=>{t.push(f)})(d),r(),e.dispatch("OpenNotification",{notification:{...d}}),d})),i=fe(t);return(l=>{l.on("SkinLoaded",()=>{const c=N_(l);c&&a({text:c,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{J(t.slice(),c=>{n().close(c)})}),l.on("keydown",c=>{var d;const f=((d=c.key)===null||d===void 0?void 0:d.toLowerCase())==="f12"||c.keyCode===123;c.altKey&&f&&(c.preventDefault(),o().map(m=>B(m.getEl())).each(m=>Ub(m)))})})(e),{open:a,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:i}},Ci=$n.PluginManager,Ra=$n.ThemeManager,y1=e=>{let t=[];const n=()=>{const a=e.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},o=(a,i)=>(...l)=>i?i.apply(a,l):void 0,r=a=>{(i=>{e.dispatch("CloseWindow",{dialog:i})})(a),t=Ke(t,i=>i!==a),t.length===0&&e.focus()},s=a=>{e.editorManager.setActive(e),ed(e),e.ui.show();const i=a();return(l=>{t.push(l),(c=>{e.dispatch("OpenWindow",{dialog:c})})(l)})(i),i};return e.on("remove",()=>{J(t,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,r)),openUrl:a=>s(()=>n().openUrl(a,r)),alert:(a,i,l)=>{const c=n();c.alert(a,o(l||c,i))},confirm:(a,i,l)=>{const c=n();c.confirm(a,o(l||c,i))},close:()=>{k.from(t[t.length-1]).each(a=>{n().close(a),r(a)})}}},C1=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Td=(e,t)=>{e._skinLoaded?C1(e,t):e.on("SkinLoaded",()=>{C1(e,t)})},Ul=(e,t,n)=>{y0(e,t,{message:n}),console.error(n)},Hl=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,Rd=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},mp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},x1=(e,t,n)=>{ae(e,t)&&!n?ee(e,t):n&&H(e,t)},w1=e=>{const t=B(e.getBody());x1(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(n=>{k.from(n.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})})(e)},S1=e=>{const t=B(e.getBody());x1(t,"mce-content-readonly",!1),e.hasEditableRoot()&&Ns(t,!0),((n,o)=>{mp(n,"StyleWithCSS",o),mp(n,"enableInlineTableEditing",o),mp(n,"enableObjectResizing",o)})(e,!1),Qf(e)&&e.focus(),(n=>{n.selection.setRng(n.selection.getRng())})(e),e.nodeChanged()},is=e=>Hc(e),Oa="data-mce-contenteditable",E1=(e,t)=>{const n=B(e.getBody());t?(w1(e),Ns(n,!1),J(Mn(n,'*[contenteditable="true"]'),o=>{Jt(o,Oa,"true"),Ns(o,!1)})):(J(Mn(n,`*[${Oa}="true"]`),o=>{p(o,Oa),Ns(o,!0)}),S1(e))},k1=e=>{e.parser.addAttributeFilter("contenteditable",t=>{is(e)&&J(t,n=>{n.attr(Oa,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Oa,t=>{is(e)&&J(t,n=>{n.attr("contenteditable",n.attr(Oa))})}),e.serializer.addTempAttr(Oa)},VT=["copy"],pp=e=>"content/"+e+"/content.css",_1=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return ot(t,r=>(s=>tinymce.Resource.has(pp(s)))(r)?r:(s=>/^[a-z0-9\-]+$/i.test(s))(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},KT=(e,t)=>{const n={};return{findAll:(o,r=zt)=>{const s=Ke((i=>i?bn(i.getElementsByTagName("img")):[])(o),i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===gt.transparentSrc)&&(Kt(l,"blob:")?!e.isUploaded(l)&&r(i):!!Kt(l,"data:")&&r(i))}),a=ot(s,i=>{const l=i.src;if(Fe(n,l))return n[l].then(c=>Ae(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((d,f)=>{const m=()=>Promise.reject("Invalid data URI");if(Kt(f,"blob:")){const v=d.getByUri(f);return le(v)?Promise.resolve(v):(b=f,Kt(b,"blob:")?(h=>fetch(h).then(C=>C.ok?C.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${h} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})))(b):Kt(b,"data:")?(g=b,new Promise((h,C)=>{Km(g).bind(({type:S,data:E,base64Encoded:A})=>hC(S,E,A)).fold(()=>C("Invalid data URI"),h)})):Promise.reject("Unknown URI format")).then(h=>bC(h).then(C=>vC(C,!1,S=>k.some(yC(d,h,S))).getOrThunk(m)))}var b,g;return Kt(f,"data:")?CC(d,f).fold(m,v=>Promise.resolve(v)):Promise.reject("Unknown image data format")})(t,l).then(d=>(delete n[l],{image:i,blobInfo:d})).catch(d=>(delete n[l],d));return n[l]=c,c}});return Promise.all(a)}}},N1=()=>{let e={};const t=(o,r)=>({status:o,resultUri:r}),n=o=>o in e;return{hasBlobUri:n,getResultUri:o=>{const r=e[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&e[o].status===1,isUploaded:o=>!!n(o)&&e[o].status===2,markPending:o=>{e[o]=t(1,null)},markUploaded:(o,r)=>{e[o]=t(2,r)},removeFailed:o=>{delete e[o]},destroy:()=>{e={}}}};let XT=0;const YT=(e,t)=>{const n={},o=(l,c)=>new Promise((d,f)=>{const m=new XMLHttpRequest;m.open("POST",t.url),m.withCredentials=t.credentials,m.upload.onprogress=g=>{c(g.loaded/g.total*100)},m.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+m.status)},m.onload=()=>{if(m.status<200||m.status>=300)return void f("HTTP Error: "+m.status);const g=JSON.parse(m.responseText);var v,h;g&&Ae(g.location)?d((v=t.basePath,h=g.location,v?v.replace(/\/$/,"")+"/"+h.replace(/^\//,""):h)):f("Invalid JSON: "+m.responseText)};const b=new FormData;b.append("file",l.blob(),l.filename()),m.send(b)}),r=bt(t.handler)?t.handler:o,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{ce.each(n[l],d=>{d(c)}),delete n[l]};return{upload:(l,c)=>t.url||r!==o?((d,f)=>(d=ce.grep(d,m=>!e.isUploaded(m.blobUri())),Promise.all(ce.map(d,m=>e.isPending(m.blobUri())?(b=>{const g=b.blobUri();return new Promise(v=>{n[g]=n[g]||[],n[g].push(v)})})(m):((b,g,v)=>(e.markPending(b.blobUri()),new Promise(h=>{let C,S;try{const E=()=>{C&&(C.close(),S=Ee)},A=R=>{E(),e.markUploaded(b.blobUri(),R),i(b.blobUri(),s(b,R)),h(s(b,R))},N=R=>{E(),e.removeFailed(b.blobUri()),i(b.blobUri(),a(b,R)),h(a(b,R))};S=R=>{R<0||R>100||k.from(C).orThunk(()=>k.from(v).map(yr)).each(M=>{C=M,M.progressBar.value(R)})},g(b,S).then(A,R=>{N(Ae(R)?{message:R}:R)})}catch(E){h(a(b,E))}})))(m,r,f)))))(l,c):new Promise(d=>{d([])})}},A1=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),T1=(e,t)=>YT(t,{url:p_(e),basePath:g_(e),credentials:h_(e),handler:b_(e)}),GT=e=>{const t=(()=>{let v=[];const h=E=>{if(!E.blob||!E.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const A=E.id||"blobid"+XT+++(()=>{const P=()=>Math.round(4294967295*Dh()).toString(36);return"s"+new Date().getTime().toString(36)+P()+P()+P()})(),N=E.name||A,R=E.blob;var M;return{id:fe(A),name:fe(N),filename:fe(E.filename||N+"."+(M=R.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[M.toLowerCase()]||"dat")),blob:fe(R),base64:fe(E.base64),blobUri:fe(E.blobUri||URL.createObjectURL(R)),uri:fe(E.uri)}},C=E=>Gt(v,E).getOrUndefined(),S=E=>C(A=>A.id()===E);return{create:(E,A,N,R,M)=>{if(Ae(E))return h({id:E,name:R,filename:M,blob:A,base64:N});if(Xe(E))return h(E);throw new Error("Unknown input type")},add:E=>{S(E.id())||v.push(E)},get:S,getByUri:E=>C(A=>A.blobUri()===E),getByData:(E,A)=>C(N=>N.base64()===E&&N.blob().type===A),findFirst:C,removeByUri:E=>{v=Ke(v,A=>A.blobUri()!==E||(URL.revokeObjectURL(A.blobUri()),!1))},destroy:()=>{J(v,E=>{URL.revokeObjectURL(E.blobUri())}),v=[]}}})();let n,o;const r=N1(),s=[],a=v=>h=>e.selection?v(h):[],i=(v,h,C)=>{let S=0;do S=v.indexOf(h,S),S!==-1&&(v=v.substring(0,S)+C+v.substr(S+h.length),S+=C.length-h.length+1);while(S!==-1);return v},l=(v,h,C)=>{const S=`src="${C}"${C===gt.transparentSrc?' data-mce-placeholder="1"':""}`;return v=i(v,`src="${h}"`,S),i(v,'data-mce-src="'+h+'"','data-mce-src="'+C+'"')},c=(v,h)=>{J(e.undoManager.data,C=>{C.type==="fragmented"?C.fragments=ot(C.fragments,S=>l(S,v,h)):C.content=l(C.content,v,h)})},d=()=>(n||(n=T1(e,r)),b().then(a(v=>{const h=ot(v,C=>C.blobInfo);return n.upload(h,A1(e)).then(a(C=>{const S=[];let E=!1;const A=ot(C,(N,R)=>{const{blobInfo:M,image:P}=v[R];let z=!1;return N.status&&f_(e)?(N.url&&!cn(P.src,N.url)&&(E=!0),t.removeByUri(P.src),jr(e)||((V,D)=>{const L=e.convertURL(D,"src");var j;c(V.src,D),rr(B(V),{src:R0(e)?(j=D,j+(j.indexOf("?")===-1?"?":"&")+new Date().getTime()):D,"data-mce-src":L})})(P,N.url)):N.error&&(N.error.remove&&(c(P.src,gt.transparentSrc),S.push(P),z=!0),((V,D)=>{Td(V,fr.translate(["Failed to upload image: {0}",D]))})(e,N.error.message)),{element:P,status:N.status,uploadUri:N.url,blobInfo:M,removed:z}});return S.length>0&&!jr(e)?e.undoManager.transact(()=>{J(Cn(S),N=>{const R=ro(N);Pe(N),R.each((M=>P=>{((z,V)=>z.dom.isEmpty(V.dom)&&le(z.schema.getTextBlockElements()[ft(V)]))(M,P)&&at(P,me('<br data-mce-bogus="1" />'))})(e)),t.removeByUri(N.dom.src)})}):E&&e.undoManager.dispatchChange(),A}))}))),f=()=>T0(e)?d():Promise.resolve([]),m=v=>oo(s,h=>h(v)),b=()=>(o||(o=KT(r,t)),o.findAll(e.getBody(),m).then(a(v=>{const h=Ke(v,C=>Ae(C)?(Td(e,C),!1):C.uriType!=="blob");return jr(e)||J(h,C=>{c(C.image.src,C.blobInfo.blobUri()),C.image.src=C.blobInfo.blobUri(),C.image.removeAttribute("data-mce-src")}),h}))),g=v=>v.replace(/src="(blob:[^"]+)"/g,(h,C)=>{const S=r.getResultUri(C);if(S)return'src="'+S+'"';let E=t.getByUri(C);return E||(E=hn(e.editorManager.get(),(A,N)=>A||N.editorUpload&&N.editorUpload.blobCache.getByUri(C),void 0)),E?'src="data:'+E.blob().type+";base64,"+E.base64()+'"':h});return e.on("SetContent",()=>{T0(e)?f():b()}),e.on("RawSaveContent",v=>{v.content=g(v.content)}),e.on("GetContent",v=>{v.source_view||v.format==="raw"||v.format==="tree"||(v.content=g(v.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",v=>{J(v,h=>{const C=h.attr("src");if(!C||t.getByUri(C))return;const S=r.getResultUri(C);S&&h.attr("src",S)})})}),{blobCache:t,addFilter:v=>{s.push(v)},uploadImages:d,uploadImagesAuto:f,scanForImages:b,destroy:()=>{t.destroy(),r.destroy(),o=n=null}}},R1={remove_similar:!0,inherit:!1},xi={selector:"td,th",...R1},QT={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...xi},tablecellverticalalign:{styles:{"vertical-align":"%value"},...xi},tablecellbordercolor:{styles:{borderColor:"%value"},...xi},tablecellclass:{classes:["%value"],...xi},tableclass:{selector:"table",classes:["%value"],...R1},tablecellborderstyle:{styles:{borderStyle:"%value"},...xi},tablecellborderwidth:{styles:{borderWidth:"%value"},...xi}},JT=fe(QT),Od=ce.each,Fo=Bt.DOM,gp=e=>le(e)&&Xe(e),O1=(e,t)=>{const n=t&&t.schema||Rs({}),o=a=>{const i=Ae(a)?{name:a,classes:[],attrs:{}}:a,l=Fo.create(i.name);return((c,d)=>{d.classes.length>0&&Fo.addClass(c,d.classes.join(" ")),Fo.setAttribs(c,d.attrs)})(l,i),l},r=(a,i,l)=>{let c;const d=i[0],f=gp(d)?d.name:void 0,m=((v,h)=>{const C=n.getElementRule(v.nodeName.toLowerCase()),S=C?.parentsRequired;return!(!S||!S.length)&&(h&&Te(S,h)?h:S[0])})(a,f);if(m)f===m?(c=d,i=i.slice(1)):c=m;else if(d)c=d,i=i.slice(1);else if(!l)return a;const b=c?o(c):Fo.create("div");b.appendChild(a),l&&ce.each(l,v=>{const h=o(v);b.insertBefore(h,a)});const g=gp(c)?c.siblings:void 0;return r(b,i,g)},s=Fo.create("div");if(e.length>0){const a=e[0],i=o(a),l=gp(a)?a.siblings:void 0;s.appendChild(r(i,e.slice(1),l))}return s},ZT=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=ce.trim(e)};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":ce.inArray("checked disabled enabled read-only required".split(" "),s)!==-1&&(n.attrs[s]=s)}if(a==="["){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},eR=(e,t)=>{let n="",o=O_(e);if(o==="")return"";const r=b=>Ae(b)?b.replace(/%(\w+)/g,""):"",s=(b,g)=>Fo.getStyle(g??e.getBody(),b,!0);if(Ae(t)){const b=e.formatter.get(t);if(!b)return"";t=b[0]}if("preview"in t){const b=t.preview;if(b===!1)return"";o=b||o}let a,i=t.block||t.inline||"span";const l=(c=t.selector,Ae(c)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),ce.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),b=>{const g=ce.map(b.split(/(?:~\+|~|\+)/),ZT),v=g.pop();return g.length&&(v.siblings=g),v}).reverse()):[]);var c;l.length>0?(l[0].name||(l[0].name=i),i=t.selector,a=O1(l,e)):a=O1([i],e);const d=Fo.select(i,a)[0]||a.firstChild;Od(t.styles,(b,g)=>{const v=r(b);v&&Fo.setStyle(d,g,v)}),Od(t.attributes,(b,g)=>{const v=r(b);v&&Fo.setAttrib(d,g,v)}),Od(t.classes,b=>{const g=r(b);Fo.hasClass(d,g)||Fo.addClass(d,g)}),e.dispatch("PreviewFormats"),Fo.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const f=s("fontSize"),m=/px$/.test(f)?parseInt(f,10):0;return Od(o.split(" "),b=>{let g=s(b,d);if(!(b==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(b),Zi(g).toLowerCase()==="#ffffff")||b==="color"&&Zi(g).toLowerCase()==="#000000")){if(b==="font-size"&&/em|%$/.test(g)){if(m===0)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*m+"px"}b==="border"&&g&&(n+="padding:0 2px;"),n+=b+":"+g+";"}}),e.dispatch("AfterPreviewFormats"),Fo.remove(a),n},B1=e=>{const t=(o=>{const r={},s=(a,i)=>{a&&(Ae(a)?(se(i)||(i=[i]),J(i,l=>{Ft(l.deep)&&(l.deep=!Lo(l)),Ft(l.split)&&(l.split=!Lo(l)||sn(l)),Ft(l.remove)&&Lo(l)&&!sn(l)&&(l.remove="none"),Lo(l)&&sn(l)&&(l.mixed=!0,l.block_expand=!0),Ae(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[a]=i):Ct(a,(l,c)=>{s(c,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return l!=="html4"?[m,d,f]:[d,m,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,f,m)=>ke(d)&&d.hasAttribute("href"),onformat:(d,f,m)=>{ce.each(m,(b,g)=>{i.setAttrib(d,g,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>{var f;return(f=d?.customValue)!==null&&f!==void 0?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return ce.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),d=>{c[d]={block:d,remove:"all"}}),c})(o)),s(JT()),s(R_(o)),{get:a=>le(a)?r[a]:r,has:a=>Fe(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(e),n=mn({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(o=>{o.on("mouseup keydown",r=>{var s;((a,i,l)=>{const c=a.selection,d=a.getBody();Um(a,null,l),i!==8&&i!==46||!c.isCollapsed()||c.getStart().innerHTML!==Pl||Um(a,Ca(d,c.getStart()),!0),i!==37&&i!==39||Um(a,Ca(d,c.getStart()),!0)})(o,r.keyCode,(s=o.selection.getRng().endContainer,re(s)&&Zs(s.data,rn)))})})(e),jr(e)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{mC(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const a=k.from(s.node).map(i=>Sl(i)?i:i.startContainer).bind(i=>ke(i)?k.some(i):k.from(i.parentElement)).getOrThunk(()=>dC(r));mC(r,a,o.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(o,r,s)=>{((a,i,l,c)=>{tn(a).formatter.apply(i,l,c)})(e,o,r,s)},remove:(o,r,s,a)=>{((i,l,c,d,f)=>{tn(i).formatter.remove(l,c,d,f)})(e,o,r,s,a)},toggle:(o,r,s)=>{((a,i,l,c)=>{tn(a).formatter.toggle(i,l,c)})(e,o,r,s)},match:(o,r,s,a)=>((i,l,c,d,f)=>tn(i).formatter.match(l,c,d,f))(e,o,r,s,a),closest:o=>((r,s)=>tn(r).formatter.closest(s))(e,o),matchAll:(o,r)=>((s,a,i)=>tn(s).formatter.matchAll(a,i))(e,o,r),matchNode:(o,r,s,a)=>((i,l,c,d,f)=>tn(i).formatter.matchNode(l,c,d,f))(e,o,r,s,a),canApply:o=>((r,s)=>tn(r).formatter.canApply(s))(e,o),formatChanged:(o,r,s,a)=>((i,l,c,d,f,m)=>tn(i).formatter.formatChanged(l,c,d,f,m))(e,n,o,r,s,a),getCssText:xe(eR,e)}},D1=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},P1=e=>{const t=os(),n=mn(0),o=mn(0),r={data:[],typing:!1,beforeChange:()=>{((s,a,i)=>{tn(s).undoManager.beforeChange(a,i)})(e,n,t)},add:(s,a)=>((i,l,c,d,f,m,b)=>tn(i).undoManager.add(l,c,d,f,m,b))(e,r,o,n,t,s,a),dispatchChange:()=>{e.setDirty(!0);const s=Ed(e);s.bookmark=gf(e.selection),e.dispatch("change",{level:s,lastLevel:Ys(r.data,o.get()).getOrUndefined()})},undo:()=>((s,a,i,l)=>tn(s).undoManager.undo(a,i,l))(e,r,n,o),redo:()=>((s,a,i)=>tn(s).undoManager.redo(a,i))(e,o,r.data),clear:()=>{((s,a,i)=>{tn(s).undoManager.clear(a,i)})(e,r,o)},reset:()=>{((s,a)=>{tn(s).undoManager.reset(a)})(e,r)},hasUndo:()=>((s,a,i)=>tn(s).undoManager.hasUndo(a,i))(e,r,o),hasRedo:()=>((s,a,i)=>tn(s).undoManager.hasRedo(a,i))(e,r,o),transact:s=>((a,i,l,c)=>tn(a).undoManager.transact(i,l,c))(e,r,n,s),ignore:s=>{((a,i,l)=>{tn(a).undoManager.ignore(i,l)})(e,n,s)},extra:(s,a)=>{((i,l,c,d,f)=>{tn(i).undoManager.extra(l,c,d,f)})(e,r,o,s,a)}};return jr(e)||((s,a,i)=>{const l=mn(!1),c=d=>{kd(a,!1,i),a.add({},d)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",d=>{const f=d.command;D1(f)||(r1(a,i),a.beforeChange())}),s.on("ExecCommand",d=>{const f=d.command;D1(f)||c(d)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",d=>{const f=d.keyCode;if(d.isDefaultPrevented())return;const m=gt.os.isMacOS()&&d.key==="Meta";(f>=33&&f<=36||f>=37&&f<=40||f===45||d.ctrlKey||m)&&(c(),s.nodeChanged()),f!==46&&f!==8||s.nodeChanged(),l.get()&&a.typing&&!cp(Ed(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",d=>{const f=d.keyCode;if(d.isDefaultPrevented())return;if(f>=33&&f<=36||f>=37&&f<=40||f===45)return void(a.typing&&c(d));const m=d.ctrlKey&&!d.altKey||d.metaKey;if((f<16||f>20)&&f!==224&&f!==91&&!a.typing&&!m)return a.beforeChange(),kd(a,!0,i),a.add({},d),void l.set(!0);(gt.os.isMacOS()?d.metaKey:d.ctrlKey&&!d.altKey)&&a.beforeChange()}),s.on("mousedown",d=>{a.typing&&c(d)}),s.on("input",d=>{var f;d.inputType&&(d.inputType==="insertReplacementText"||(f=d).inputType==="insertText"&&f.data===null||(m=>m.inputType==="insertFromPaste"||m.inputType==="insertFromDrop")(d))&&c(d)}),s.on("AddUndo Undo Redo ClearUndos",d=>{d.isDefaultPrevented()||s.nodeChanged()})})(e,r,n),(s=>{s.addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo")})(e),r},tR=[9,27,Ce.HOME,Ce.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ce.DOWN,Ce.UP,Ce.LEFT,Ce.RIGHT].concat(gt.browser.isFirefox()?[224]:[]),L1="data-mce-placeholder",M1=e=>e.type==="keydown"||e.type==="keyup",I1=e=>{const t=e.keyCode;return t===Ce.BACKSPACE||t===Ce.DELETE},nR=(e,t)=>({from:e,to:t}),hp=(e,t)=>{const n=B(e),o=B(t.container());return md(n,o).map(r=>((s,a)=>({block:s,position:a}))(r,t))},F1=(e,t)=>qn(t,n=>cl(n)||Yo(n.dom),n=>Ie(n,e)).filter(Hn).getOr(e),j1=(e,t)=>{const n=((o,r)=>{const s=St(o);return Xs(s,a=>r.isBlock(ft(a))).fold(fe(s),a=>s.slice(0,a))})(e,t);return J(n,Pe),n},z1=(e,t,n)=>{const o=as(n,t);return Gt(o.reverse(),r=>In(e,r)).each(Pe)},oR=(e,t,n,o,r)=>{if(In(o,n))return Os(n),jn(n.dom);((a,i)=>Ke(Zr(i),l=>!In(a,l)).length===0)(o,r)&&In(o,t)&&Re(r,De("br"));const s=lo(n.dom,G.before(r.dom));return J(j1(t,o),a=>{Re(r,a)}),z1(o,e,t),s},rR=(e,t,n,o)=>{if(In(o,n)){if(In(o,t)){const s=i=>{const l=(c,d)=>kn(c).fold(()=>d,f=>((m,b)=>m.isInline(ft(b)))(o,f)?l(f,d.concat(ma(f))):d);return l(i,[])},a=Vr(s(n),(i,l)=>(pt(i,l),l),ni());vt(t),at(t,a)}return Pe(n),jn(t.dom)}const r=Go(n.dom);return J(j1(t,o),s=>{at(n,s)}),z1(o,e,t),r},U1=(e,t)=>{di(e,t.dom).bind(n=>k.from(n.getNode())).map(B).filter(ga).each(Pe)},H1=(e,t,n,o)=>(U1(!0,t),U1(!1,n),((r,s)=>En(s,r)?((a,i)=>{const l=as(i,a);return k.from(l[l.length-1])})(s,r):k.none())(t,n).fold(xe(rR,e,t,n,o),xe(oR,e,t,n,o))),q1=(e,t,n,o,r)=>t?H1(e,o,n,r):H1(e,n,o,r),bp=(e,t)=>{const n=B(e.getBody());return((r,s,a,i)=>i.collapsed?((l,c,d,f)=>{const m=hp(c,G.fromRangeStart(f)),b=m.bind(g=>Bo(d,c,g.position).bind(v=>hp(c,v).map(h=>((C,S,E,A)=>Ut(A.position.getNode())&&!In(C,A.block)?di(!1,A.block.dom).bind(N=>N.isEqual(A.position)?Bo(E,S,N).bind(R=>hp(S,R)):k.some(A)).getOr(A):A)(l,c,d,h))));return vn(m,b,nR).filter(g=>(v=>!Ie(v.from.block,v.to.block))(g)&&((v,h)=>{const C=B(v);return Ie(F1(C,h.from.block),F1(C,h.to.block))})(c,g)&&(v=>Dt(v.from.block.dom)===!1&&Dt(v.to.block.dom)===!1)(g)&&(v=>{const h=C=>jh(C)||Iu(C.dom)||ti(C);return h(v.from.block)&&h(v.to.block)})(g)&&(v=>!(En(v.to.block,v.from.block)||En(v.from.block,v.to.block)))(g))})(r,s,a,i):k.none())(e.schema,n.dom,t,e.selection.getRng()).map(r=>()=>{q1(n,t,r.from.block,r.to.block,e.schema).each(s=>{e.selection.setRng(s.toRange())})})},$1=(e,t)=>{const n=B(t),o=xe(Ie,e);return To(n,cl,o).isSome()},sR=e=>{const t=B(e.getBody());return((n,o)=>{const r=lo(n.dom,G.fromRangeStart(o)).isNone(),s=to(n.dom,G.fromRangeEnd(o)).isNone();return!((a,i)=>$1(a,i.startContainer)||$1(a,i.endContainer))(n,o)&&r&&s})(t,e.selection.getRng())?(n=>k.some(()=>{n.setContent(""),n.selection.setCursorLocation()}))(e):((n,o,r)=>{const s=o.getRng();return vn(md(n,B(s.startContainer)),md(n,B(s.endContainer)),(a,i)=>Ie(a,i)?k.none():k.some(()=>{s.deleteContents(),q1(n,!0,a,i,r).each(l=>{o.setRng(l.toRange())})})).getOr(k.none())})(t,e.selection,e.schema)},vp=(e,t)=>e.selection.isCollapsed()?k.none():sR(e),ls=(e,t,n,o,r)=>k.from(t._selectionOverrides.showCaret(e,n,o,r)),ql=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?k.none():k.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(t)),yp=(e,t,n)=>t.collapsed?((o,r,s)=>{const a=kf(1,o.getBody(),r),i=G.fromRangeStart(a),l=i.getNode();if(hl(l))return ls(1,o,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(hl(c))return ls(1,o,c,!1,!1);const d=Na(o.dom.getRoot(),i.getNode());return hl(d)?ls(1,o,d,!1,s):k.none()})(e,t,n).getOr(t):t,aR=e=>js(e)||Al(e),iR=e=>zs(e)||Tl(e),W1=(e,t,n,o,r,s)=>{ls(o,e,s.getNode(!r),r,!0).each(a=>{if(t.collapsed){const i=t.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else t.deleteContents();e.selection.setRng(a)}),((a,i)=>{re(i)&&i.data.length===0&&a.remove(i)})(e.dom,n)},Cp=(e,t)=>((n,o)=>{const r=n.selection.getRng();if(!re(r.commonAncestorContainer))return k.none();const s=o?1:-1,a=Mr(n.getBody()),i=xe(_f,o?a.next:a.prev),l=o?aR:iR,c=xl(s,n.getBody(),r),d=i(c),f=d&&Io(o,d);if(!f||!Wc(c,f))return k.none();if(l(f))return k.some(()=>W1(n,r,c.getNode(),s,o,f));const m=i(f);return m&&l(m)&&Wc(f,m)?k.some(()=>W1(n,r,c.getNode(),s,o,m)):k.none()})(e,t),xp=(e,t)=>{const n=e.getBody();return t?jn(n).filter(js):Go(n).filter(zs)},wp=e=>{const t=e.selection.getRng();return!t.collapsed&&(xp(e,!0).exists(n=>n.isEqual(G.fromRangeStart(t)))||xp(e,!1).exists(n=>n.isEqual(G.fromRangeEnd(t))))},jo=Dr([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),V1=(e,t,n,o)=>Bo(t,e,n).bind(r=>{return s=r.getNode(),le(s)&&(cl(B(s))||ti(B(s)))||((a,i,l,c,d)=>{const f=m=>d.isInline(m.nodeName.toLowerCase())&&!Pr(l,c,a);return ob(!i,l).fold(()=>ob(i,c).fold(yt,f),f)})(e,t,n,r,o)?k.none():t&&Dt(r.getNode())||!t&&Dt(r.getNode(!0))?((a,i,l,c,d)=>{const f=d.getNode(!l);return md(B(i),B(c.getNode())).map(m=>In(a,m)?jo.remove(m.dom):jo.moveToElement(f)).orThunk(()=>k.some(jo.moveToElement(f)))})(o,e,t,n,r):t&&zs(n)||!t&&js(n)?k.some(jo.moveToPosition(r)):k.none();var s}),K1=(e,t)=>k.from(Na(e.getBody(),t)),lR=(e,t)=>{const n=e.selection.getNode();return K1(e,n).filter(Dt).fold(()=>((o,r,s,a)=>{const i=kf(r?1:-1,o,s),l=G.fromRangeStart(i),c=B(o);return!r&&zs(l)?k.some(jo.remove(l.getNode(!0))):r&&js(l)?k.some(jo.remove(l.getNode())):!r&&js(l)&&dd(c,l,a)?Uv(c,l,a).map(d=>jo.remove(d.getNode())):r&&zs(l)&&fm(c,l,a)?EA(c,l,a).map(d=>jo.remove(d.getNode())):((d,f,m,b)=>((g,v)=>{const h=v.getNode(!g),C=g?"after":"before";return ke(h)&&h.getAttribute("data-mce-caret")===C})(f,m)?((g,v)=>wt(v)?k.none():g&&Dt(v.nextSibling)?k.some(jo.moveToElement(v.nextSibling)):!g&&Dt(v.previousSibling)?k.some(jo.moveToElement(v.previousSibling)):k.none())(f,m.getNode(!f)).orThunk(()=>V1(d,f,m,b)):V1(d,f,m,b).bind(g=>((v,h,C)=>C.fold(S=>k.some(jo.remove(S)),S=>k.some(jo.moveToElement(S)),S=>Pr(h,S,v)?k.none():k.some(jo.moveToPosition(S))))(d,m,g)))(o,r,l,a)})(e.getBody(),t,e.selection.getRng(),e.schema).map(o=>()=>o.fold(((r,s)=>a=>(r._selectionOverrides.hideFakeCaret(),ka(r,s,B(a)),!0))(e,t),((r,s)=>a=>{const i=s?G.before(a):G.after(a);return r.selection.setRng(i.toRange()),!0})(e,t),(r=>s=>(r.selection.setRng(s.toRange()),!0))(e))),()=>k.some(Ee))},X1=e=>{const t=e.dom,n=e.selection,o=Na(e.getBody(),n.getNode());if(Yo(o)&&t.isBlock(o)&&t.isEmpty(o)){const r=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(r),n.setRng(G.before(r).toRange())}return!0},Sp=(e,t)=>e.selection.isCollapsed()?lR(e,t):((n,o)=>{const r=n.selection.getNode();return Dt(r)&&!Ec(r)?K1(n,r.parentNode).filter(Dt).fold(()=>k.some(()=>{var s;s=B(n.getBody()),J(Mn(s,".mce-offscreen-selection"),Pe),ka(n,o,B(n.selection.getNode())),bm(n)}),()=>k.some(Ee)):wp(n)?k.some(()=>{cy(n,n.selection.getRng(),B(n.getBody()))}):k.none()})(e,t),Y1=e=>e.hasOwnProperty("text"),G1=e=>e.hasOwnProperty("marker"),Q1=(e,t)=>{const n=(r,s)=>{if(re(r))return{text:r,offset:s};{const a=t(),i=r.childNodes;return s<i.length?(r.insertBefore(a,i[s]),{marker:a,before:!0}):(r.appendChild(a),{marker:a,before:!1})}},o=n(e.endContainer,e.endOffset);return{start:n(e.startContainer,e.startOffset),end:o}},J1=e=>{var t,n;const{start:o,end:r}=e,s=new window.Range;return Y1(o)?s.setStart(o.text,o.offset):G1(o)&&(o.before?s.setStartBefore(o.marker):s.setStartAfter(o.marker),(t=o.marker.parentNode)===null||t===void 0||t.removeChild(o.marker)),Y1(r)?s.setEnd(r.text,r.offset):G1(r)&&(r.before?s.setEndBefore(r.marker):s.setEndAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),s},Ep=(e,t)=>{var n;const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),s=o.getParent(e.selection.getEnd(),o.isBlock),a=e.getBody();if(((n=r?.nodeName)===null||n===void 0?void 0:n.toLowerCase())==="div"&&r&&s&&r===a.firstChild&&s===a.lastChild&&!o.isEmpty(a)){const i=r.cloneNode(!1),l=()=>{if(t?ay(e):fd(e),a.firstChild!==r){const c=Q1(e.selection.getRng(),()=>document.createElement("span"));Array.from(a.childNodes).forEach(d=>i.appendChild(d)),a.appendChild(i),e.selection.setRng(J1(c))}};return k.some(l)}return k.none()},kp=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=G.fromRangeStart(n.selection.getRng());return Bo(o,n.getBody(),r).filter(s=>o?yA(s):CA(s)).bind(s=>Ef(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(e,t):k.none(),wi=re,Z1=e=>wi(e)&&e.data[0]===pn,ex=e=>wi(e)&&e.data[e.data.length-1]===pn,tx=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(pn)},Bd=(e,t)=>e?(n=>{var o;if(wi(n.previousSibling))return ex(n.previousSibling)||n.previousSibling.appendData(pn),n.previousSibling;if(wi(n))return Z1(n)||n.insertData(0,pn),n;{const r=tx(n);return(o=n.parentNode)===null||o===void 0||o.insertBefore(r,n),r}})(t):(n=>{var o,r;if(wi(n.nextSibling))return Z1(n.nextSibling)||n.nextSibling.insertData(0,pn),n.nextSibling;if(wi(n))return ex(n)||n.appendData(pn),n;{const s=tx(n);return n.nextSibling?(o=n.parentNode)===null||o===void 0||o.insertBefore(s,n.nextSibling):(r=n.parentNode)===null||r===void 0||r.appendChild(s),s}})(t),cR=xe(Bd,!0),dR=xe(Bd,!1),nx=(e,t)=>re(e.container())?Bd(t,e.container()):Bd(t,e.getNode()),ox=(e,t)=>{const n=t.get();return n&&e.container()===n&&Bs(n)},_p=(e,t)=>t.fold(n=>{va(e.get());const o=cR(n);return e.set(o),k.some(G(o,o.length-1))},n=>jn(n).map(o=>{if(ox(o,e)){const r=e.get();return G(r,1)}{va(e.get());const r=nx(o,!0);return e.set(r),G(r,1)}}),n=>Go(n).map(o=>{if(ox(o,e)){const r=e.get();return G(r,r.length-1)}{va(e.get());const r=nx(o,!1);return e.set(r),G(r,r.length-1)}}),n=>{va(e.get());const o=dR(n);return e.set(o),k.some(G(o,1))}),rx=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n].apply(null,t);if(o.isSome())return o}return k.none()},Vn=Dr([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),sx=(e,t)=>Ls(t,e)||e,uR=(e,t,n)=>{const o=oy(n),r=sx(t,o.container());return Us(e,r,o).fold(()=>to(r,o).bind(xe(Us,e,r)).map(s=>Vn.before(s)),k.none)},fR=(e,t)=>Ca(e,t)===null,ax=(e,t,n)=>Us(e,t,n).filter(xe(fR,t)),mR=(e,t,n)=>{const o=ry(n);return ax(e,t,o).bind(r=>lo(r,o).isNone()?k.some(Vn.start(r)):k.none())},pR=(e,t,n)=>{const o=oy(n);return ax(e,t,o).bind(r=>to(r,o).isNone()?k.some(Vn.end(r)):k.none())},gR=(e,t,n)=>{const o=ry(n),r=sx(t,o.container());return Us(e,r,o).fold(()=>lo(r,o).bind(xe(Us,e,r)).map(s=>Vn.after(s)),k.none)},ix=e=>!ny(Np(e)),zr=(e,t,n)=>rx([uR,mR,pR,gR],[e,t,n]).filter(ix),Np=e=>e.fold(mt,mt,mt,mt),lx=e=>e.fold(fe("before"),fe("start"),fe("end"),fe("after")),Dd=e=>e.fold(Vn.before,Vn.before,Vn.after,Vn.after),Ap=e=>e.fold(Vn.start,Vn.start,Vn.end,Vn.end),hR=(e,t,n,o,r,s)=>vn(Us(t,n,o),Us(t,n,r),(a,i)=>a!==i&&((l,c,d)=>{const f=Ls(c,l),m=Ls(d,l);return le(f)&&f===m})(n,a,i)?Vn.after(e?a:i):s).getOr(s),bR=(e,t)=>e.fold(zt,n=>{return r=t,!(lx(o=n)===lx(r)&&Np(o)===Np(r));var o,r}),vR=(e,t)=>e?t.fold(wn(k.some,Vn.start),k.none,wn(k.some,Vn.after),k.none):t.fold(k.none,wn(k.some,Vn.before),k.none,wn(k.some,Vn.end)),cx=(e,t,n)=>{const o=e?1:-1;return t.setRng(G(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var Ur;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Ur||(Ur={}));const Pd=(e,t)=>e===-1?tr(t):t,yR=(e,t,n)=>e===1?t.next(n):t.prev(n),CR=(e,t,n,o)=>Ut(o.getNode(t===1))?Ur.Br:Pr(n,o)===!1?Ur.Block:Ur.Wrap,dx=(e,t,n,o)=>{const r=Mr(n);let s=o;const a=[];for(;s;){const i=yR(t,r,s);if(!i)break;if(Ut(i.getNode(!1)))return t===1?{positions:Pd(t,a).concat([i]),breakType:Ur.Br,breakAt:k.some(i)}:{positions:Pd(t,a),breakType:Ur.Br,breakAt:k.some(i)};if(i.isVisible()){if(e(s,i)){const l=CR(0,t,s,i);return{positions:Pd(t,a),breakType:l,breakAt:k.some(i)}}a.push(i),s=i}else s=i}return{positions:Pd(t,a),breakType:Ur.Eol,breakAt:k.none()}},ux=(e,t,n,o)=>t(n,o).breakAt.map(r=>{const s=t(n,r).positions;return e===-1?s.concat(r):[r].concat(s)}).getOr([]),Tp=(e,t)=>hn(e,(n,o)=>n.fold(()=>k.some(o),r=>vn(Sn(r.getClientRects()),Sn(o.getClientRects()),(s,a)=>{const i=Math.abs(t-s.left);return Math.abs(t-a.left)<=i?o:r}).or(n)),k.none()),Ld=(e,t)=>Sn(t.getClientRects()).bind(n=>Tp(e,n.left)),$l=xe(dx,G.isAbove,-1),Wl=xe(dx,G.isBelow,1),fx=xe(ux,-1,$l),mx=xe(ux,1,Wl),px=(e,t)=>$l(e,t).breakAt.isNone(),gx=(e,t)=>Wl(e,t).breakAt.isNone(),xR=(e,t)=>Ld(fx(e,t),t),wR=(e,t)=>Ld(mx(e,t),t),SR=Dt,hx=(e,t)=>Math.abs(e.left-t),bx=(e,t)=>Math.abs(e.right-t),vx=(e,t)=>hs(e,(n,o)=>{const r=Math.min(hx(n,t),bx(n,t)),s=Math.min(hx(o,t),bx(o,t));return s===r&&ln(o,"node")&&SR(o.node)||s<r?o:n}),ER=e=>{const t=n=>ot(n,o=>{const r=ha(o);return r.node=e,r});if(ke(e))return t(e.getClientRects());if(re(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},yx=e=>Qt(e,ER);var Ba;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ba||(Ba={}));const Cx=(e,t,n,o,r,s)=>{let a=0;const i=[],l=f=>{let m=yx([f]);e===Ba.Up&&(m=m.reverse());for(let b=0;b<m.length;b++){const g=m[b];if(!n(g,c)){if(i.length>0&&t(g,Xr(i))&&a++,g.line=a,r(g))return!0;i.push(g)}}return!1},c=Xr(s.getClientRects());if(!c)return i;const d=s.getNode();return d&&(l(d),((f,m,b,g)=>{let v=g;for(;v=vl(v,f,Xh,m);)if(b(v))return})(e,o,l,d)),i},kR=xe(Cx,Ba.Up,dl,ul),_R=xe(Cx,Ba.Down,ul,dl),xx=e=>Xr(e.getClientRects()),wx=e=>t=>((n,o)=>o.line>n)(e,t),Rp=e=>t=>((n,o)=>o.line===n)(e,t),cs=(e,t)=>{e.selection.setRng(t),Nl(e,e.selection.getRng())},Op=(e,t,n)=>k.some(yp(e,t,n)),Sx=(e,t,n,o,r,s)=>{const a=t===1,i=Mr(e.getBody()),l=xe(_f,a?i.next:i.prev),c=a?o:r;if(!n.collapsed){const g=Lc(n);if(s(g))return ls(t,e,g,t===-1,!1);if(wp(e)){const v=n.cloneRange();return v.collapse(t===-1),k.from(v)}}const d=xl(t,e.getBody(),n);if(c(d))return ql(e,d.getNode(!a));let f=l(d);const m=Uh(n);if(!f)return m?k.some(n):k.none();if(f=Io(a,f),c(f))return ls(t,e,f.getNode(!a),a,!1);const b=l(f);return b&&c(b)&&Wc(f,b)?ls(t,e,b.getNode(!a),a,!1):m?Op(e,f.toRange(),!1):k.none()},Ex=(e,t,n,o,r,s)=>{const a=xl(t,e.getBody(),n),i=Xr(a.getClientRects()),l=t===Ba.Down,c=e.getBody();if(!i)return k.none();if(wp(e)){const v=l?G.fromRangeEnd(n):G.fromRangeStart(n);return(l?wR:xR)(c,v).orThunk(()=>k.from(v)).map(h=>h.toRange())}const d=(l?_R:kR)(c,wx(1),a),f=Ke(d,Rp(1)),m=i.left,b=vx(f,m);if(b&&s(b.node)){const v=Math.abs(m-b.left),h=Math.abs(m-b.right);return ls(t,e,b.node,v<h,!1)}let g;if(g=o(a)?a.getNode():r(a)?a.getNode(!0):Lc(n),g){const v=((C,S,E,A)=>{const N=Mr(S);let R,M,P,z;const V=[];let D=0;C===Ba.Down?(R=N.next,M=ul,P=dl,z=G.after(A)):(R=N.prev,M=dl,P=ul,z=G.before(A));const L=xx(z);do{if(!z.isVisible())continue;const j=xx(z);if(P(j,L))continue;V.length>0&&M(j,Xr(V))&&D++;const Q=ha(j);if(Q.position=z,Q.line=D,E(Q))return V;V.push(Q)}while(z=R(z));return V})(t,c,wx(1),g);let h=vx(Ke(v,Rp(1)),m);if(h||(h=Xr(Ke(v,Rp(0))),h))return Op(e,h.position.toRange(),!1)}return f.length===0?Bp(e,l).filter(l?r:o).map(v=>yp(e,v.toRange(),!1)):k.none()},Bp=(e,t)=>{const n=e.selection.getRng(),o=t?G.fromRangeEnd(n):G.fromRangeStart(n),r=(s=o.container(),a=e.getBody(),To(B(s),i=>AN(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(t){const i=Wl(r,o);return nr(i.positions)}{const i=$l(r,o);return Sn(i.positions)}},kx=(e,t,n)=>Bp(e,t).filter(n).exists(o=>(e.selection.setRng(o.toRange()),!0)),Md=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},_x=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Nx=(e,t,n)=>_p(t,n).map(o=>(Md(e,o),n)),NR=(e,t,n)=>{const o=e.getBody(),r=((s,a,i)=>{const l=G.fromRangeStart(s);if(s.collapsed)return l;{const c=G.fromRangeEnd(s);return i?lo(a,c).getOr(c):to(a,l).getOr(l)}})(e.selection.getRng(),o,n);return((s,a,i,l)=>{const c=Io(s,l),d=zr(a,i,c);return zr(a,i,c).bind(xe(vR,s)).orThunk(()=>((f,m,b,g,v)=>{const h=Io(f,v);return Bo(f,b,h).map(xe(Io,f)).fold(()=>g.map(Dd),C=>zr(m,b,C).map(xe(hR,f,m,b,h,C)).filter(xe(bR,g))).filter(ix)})(s,a,i,d,l))})(n,xe(_a,e),o,r).bind(s=>Nx(e,t,s))},Ax=(e,t,n)=>!!gl(e)&&NR(e,t,n).isSome(),Tx=(e,t,n)=>!!gl(t)&&((o,r)=>{const s=r.selection.getRng(),a=o?G.fromRangeEnd(s):G.fromRangeStart(s);return!!(i=>bt(i.selection.getSel().modify))(r)&&(o&&of(a)?cx(!0,r.selection,a):!(o||!rf(a))&&cx(!1,r.selection,a))})(e,t),AR=e=>{const t=mn(null),n=xe(_a,e);return e.on("NodeChange",o=>{gl(e)&&(((r,s,a)=>{const i=ot(Mn(B(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),l=Ke(i,r),c=Ke(a,r);J(et(l,c),xe(_x,!1)),J(et(c,l),xe(_x,!0))})(n,e.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=G.fromRangeStart(r.selection.getRng());G.isTextPosition(i)&&!(l=>of(l)||rf(l))(i)&&(Md(r,SN(a,i)),s.set(null))}})(e,t),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=Ke(i,r);J(l,c=>{const d=G.fromRangeStart(s.selection.getRng());zr(r,s.getBody(),d).bind(f=>Nx(s,a,f))})}})(n,e,t,o.parents))}),t},TR=xe(Tx,!0),RR=xe(Tx,!1),Id=(e,t,n)=>{if(gl(e)){const o=Bp(e,t).getOrThunk(()=>{const r=e.selection.getRng();return t?G.fromRangeEnd(r):G.fromRangeStart(r)});return zr(xe(_a,e),e.getBody(),o).exists(r=>{const s=Dd(r);return _p(n,s).exists(a=>(Md(e,a),!0))})}return!1},Rx=(e,t)=>n=>_p(t,n).map(o=>()=>Md(e,o)),Ox=(e,t,n,o)=>{const r=e.getBody(),s=xe(_a,e);e.undoManager.ignore(()=>{e.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),fd(e),zr(s,r,G.fromRangeStart(e.selection.getRng())).map(Ap).bind(Rx(e,t)).each(Yn)}),e.nodeChanged()},Dp=(e,t,n)=>{if(e.selection.isCollapsed()&&gl(e)){const o=G.fromRangeStart(e.selection.getRng());return((r,s,a,i)=>{const l=((f,m)=>Ls(m,f)||f)(r.getBody(),i.container()),c=xe(_a,r),d=zr(c,l,i);return d.bind(f=>a?f.fold(fe(k.some(Ap(f))),k.none,fe(k.some(Dd(f))),k.none):f.fold(k.none,fe(k.some(Dd(f))),k.none,fe(k.some(Ap(f))))).map(Rx(r,s)).getOrThunk(()=>{const f=ci(a,l,i),m=f.bind(b=>zr(c,l,b));return vn(d,m,()=>Us(c,l,i).bind(b=>(g=>vn(jn(g),Go(g),(v,h)=>{const C=Io(!0,v),S=Io(!1,h);return to(g,C).forall(E=>E.isEqual(S))}).getOr(!0))(b)?k.some(()=>{ka(r,a,B(b))}):k.none())).getOrThunk(()=>m.bind(()=>f.map(b=>()=>{a?Ox(r,s,i,b):Ox(r,s,b,i)})))})})(e,t,n,o)}return k.none()},Bx=(e,t)=>{const n=B(e.getBody()),o=B(e.selection.getStart()),r=as(o,n);return Xs(r,t).fold(fe(r),s=>r.slice(0,s))},OR=e=>_n(e)===1,Dx=(e,t)=>{const n=xe(Iy,e);return Qt(t,o=>n(o)?[o.dom]:[])},Px=e=>{const t=(n=>Bx(n,o=>n.schema.isBlock(ft(o))))(e);return Dx(e,t)},BR=(e,t)=>{const n=Ke((o=>Bx(o,r=>o.schema.isBlock(ft(r))||(s=>_n(s)>1)(r)))(e),OR);return nr(n).bind(o=>{const r=G.fromRangeStart(e.selection.getRng());return iy(t,r,o.dom)&&!$f(o)?k.some(()=>((s,a,i,l)=>{const c=Dx(a,l);if(c.length===0)ka(a,s,i);else{const d=My(i.dom,c);a.selection.setRng(d.toRange())}})(t,e,o,n)):k.none()})},Lx=(e,t)=>{const n=e.selection.getStart(),o=((r,s)=>{const a=s.parentElement;return Ut(s)&&!Je(a)&&r.dom.isEmpty(a)})(e,n)||$f(B(n))?My(n,t):((r,s)=>{const{caretContainer:a,caretPosition:i}=Ly(s);return r.insertNode(a.dom),i})(e.selection.getRng(),t);e.selection.setRng(o.toRange())},Mx=e=>re(e.startContainer),DR=e=>{const t=e.selection.getRng();return(n=>n.startOffset===0&&Mx(n))(t)&&((n,o)=>{const r=o.startContainer.parentElement;return!Je(r)&&Iy(n,B(r))})(e,t)&&(n=>(o=>(r=>{const s=r.startContainer.parentNode,a=r.endContainer.parentNode;return!Je(s)&&!Je(a)&&s.isEqualNode(a)})(o)&&(r=>{const s=r.endContainer;return r.endOffset===(re(s)?s.length:s.childNodes.length)})(o))(n)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n))(t)},Pp=(e,t)=>e.selection.isCollapsed()?BR(e,t):(n=>{if(DR(n)){const o=Px(n);return k.some(()=>{fd(n),((r,s)=>{const a=et(s,Px(r));a.length>0&&Lx(r,a)})(n,o)})}return k.none()})(e),Vl=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(Mx(n)||t.dom.isEmpty(n.startContainer))&&!(o=>{return r=B(o.selection.getStart()),s=o.schema,$g(r,a=>Do(a.dom),a=>s.isBlock(ft(a)));var r,s})(t)})(e)&&Lx(e,[]),!0),Lp=(e,t,n)=>le(n)?k.some(()=>{e._selectionOverrides.hideFakeCaret(),ka(e,t,B(n))}):k.none(),Mp=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=o?Al:Tl,s=xl(o?1:-1,n.getBody(),n.selection.getRng());return r(s)?Lp(n,o,s.getNode(!o)):k.from(Io(o,s)).filter(a=>r(a)&&Wc(s,a)).bind(a=>Lp(n,o,a.getNode(!o)))})(e,t):((n,o)=>{const r=n.selection.getNode();return Br(r)?Lp(n,o,r):k.none()})(e,t),Ip=e=>ea(e??"").getOr(0),Ix=(e,t)=>(e||ft(t)==="table"?"margin":"padding")+(W(t,"direction")==="rtl"?"-right":"-left"),Fx=e=>{const t=zx(e);return!e.mode.isReadOnly()&&(t.length>1||((n,o)=>oo(o,r=>{const s=Ix(D0(n),r),a=ne(r,s).map(Ip).getOr(0);return n.dom.getContentEditable(r.dom)!=="false"&&a>0}))(e,t))},jx=e=>nf(e)||ti(e),zx=e=>Ke(Cn(e.selection.getSelectedBlocks()),t=>!jx(t)&&!(n=>ro(n).exists(jx))(t)&&qn(t,n=>Yo(n.dom)||Dt(n.dom)).exists(n=>Yo(n.dom))),Ux=(e,t)=>{var n,o;if(e.mode.isReadOnly())return;const{dom:r}=e,s=C_(e),a=(o=(n=/[a-z%]+$/i.exec(s))===null||n===void 0?void 0:n[0])!==null&&o!==void 0?o:"px",i=Ip(s),l=D0(e);J(zx(e),c=>{((d,f,m,b,g,v)=>{const h=Ix(m,B(v)),C=Ip(d.getStyle(v,h));if(f==="outdent"){const S=Math.max(0,C-b);d.setStyle(v,h,S?S+g:"")}else{const S=C+b+g;d.setStyle(v,h,S)}})(r,t,l,i,a,c.dom)})},Hx=e=>Ux(e,"outdent"),qx=e=>{if(e.selection.isCollapsed()&&Fx(e)){const t=e.dom,n=e.selection.getRng(),o=G.fromRangeStart(n),r=t.getParent(n.startContainer,t.isBlock);if(r!==null&&um(B(r),o,e.schema))return k.some(()=>Hx(e))}return k.none()},$x=(e,t,n)=>Gn([qx,Sp,Cp,(o,r)=>Dp(o,t,r),bp,km,kp,Mp,vp,Pp,Ep],o=>o(e,n)).filter(o=>e.selection.isEditable()),Wx=e=>e.touches===void 0||e.touches.length!==1?k.none():k.some(e.touches[0]),Fp=(e,t)=>Fe(e,t.nodeName),PR=(e,t)=>!!re(t)||!!ke(t)&&!(Fp(e.getBlockElements(),t)||Po(t)||la(e,t)||Pu(t)),LR=(e,t)=>{if(re(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||Fp(e,t.nextSibling)||Pu(t.nextSibling)}return!1},jp=e=>e.dom.create(Fn(e),pl(e)),Vx=(e,t,n)=>{const o=B(jp(e)),r=ni();at(o,r),n(t,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},Kx=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,MR=(e,t,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?t.charAt(s-1):"";if(a==='"')return o;if(a===">"){const i=t.lastIndexOf("<",s);if(i!==-1&&t.substring(i,s).indexOf('contenteditable="false"')!==-1)return o}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode(typeof r[1]=="string"?r[1]:r[0])+"</span>"},IR=(e,t)=>oo(e,n=>{const o=t.match(n);return o!==null&&o[0].length===t.length}),Xx=(e,t)=>{t.hasAttribute("data-mce-caret")&&(sf(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},FR=(e,t)=>{const n=(o=>es(B(o.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull())(e);if(n)return t.type==="compositionstart"?(t.preventDefault(),t.stopPropagation(),void Xx(e,n)):void(zh(n)&&(Xx(e,n),e.undoManager.add()))},Yx=Dt,Gx=(e,t,n)=>{const o=Mr(e.getBody()),r=xe(_f,t===1?o.next:o.prev);if(n.collapsed){const s=e.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(G.fromRangeStart(n))){const a=B((i=>{const l=i.dom.create(Fn(i));return l.innerHTML='<br data-mce-bogus="1">',l})(e));t===1?We(B(s),a):Re(B(s),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},Qx=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((a,i,l)=>Sx(i,a,l,js,zs,Yx))(r,n,s).orThunk(()=>(Gx(n,r,s),k.none()))})(e,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return ny(r)?!o:o})(e.selection,t)).exists(n=>(cs(e,n),!0)),Jx=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((a,i,l)=>Ex(i,a,l,c=>js(c)||Lv(c),c=>zs(c)||cm(c),Yx))(r,n,s).orThunk(()=>(Gx(n,r,s),k.none()))})(e,t).exists(n=>(cs(e,n),!0)),Zx=(e,t)=>kx(e,t,t?zs:js),Fd=(e,t)=>xp(e,!t).map(n=>{const o=n.toRange(),r=e.selection.getRng();return t?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(cs(e,n),!0)),jR=e=>Te(["figcaption"],ft(e)),ew=(e,t)=>!!e.selection.isCollapsed()&&((n,o)=>{const r=B(n.getBody()),s=G.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const c=xe(Ie,i);return qn(B(a.container()),d=>l.isBlock(ft(d)),c).filter(jR)})(s,r,n.schema).exists(()=>{if(((a,i,l)=>i?gx(a.dom,l):px(a.dom,l))(r,o,s)){const a=Vx(n,r,o?at:He);return n.selection.setRng(a),!0}return!1})})(e,t),tw=(e,t)=>((n,o)=>o?k.from(n.dom.getParent(n.selection.getNode(),"details")).map(r=>((s,a)=>{const i=s.selection.getRng(),l=G.fromRangeStart(i);return!(s.getBody().lastChild!==a||!gx(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r)).getOr(!1):k.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(r=>k.from(n.dom.getParent(r,"details")).map(s=>((a,i,l)=>{const c=a.selection.getRng(),d=G.fromRangeStart(c);return!(a.getBody().firstChild!==i||!px(l,d)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,r))).getOr(!1))(e,t),nw={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},ow=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,qe=(e,...t)=>()=>e.apply(null,t),Kl=(e,t)=>Gt(((n,o)=>Qt((r=>ot(r,s=>({...nw,...s})))(n),r=>ow(r,o)?[r]:[]))(e,t),n=>n.action()),rw=(e,t)=>Gn(((n,o)=>Qt((r=>ot(r,s=>({...nw,...s})))(n),r=>ow(r,o)?[r]:[]))(e,t),n=>n.action()),sw=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return Sx(e,n,o,Al,Tl,Br).exists(r=>(cs(e,r),!0))},aw=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return Ex(e,n,o,Al,Tl,Br).exists(r=>(cs(e,r),!0))},iw=(e,t)=>kx(e,t,t?Tl:Al),lw=Dr([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Xl={...lw,none:e=>lw.none(e)},cw=(e,t,n)=>Qt(St(e),o=>on(o,t)?n(o)?[o]:[]:cw(o,t,n)),dw=(e,t)=>cr(e,"table",t),zp=(e,t,n,o,r=zt)=>{const s=o===1;if(!s&&n<=0)return Xl.first(e[0]);if(s&&n>=e.length-1)return Xl.last(e[e.length-1]);{const a=n+o,i=e[a];return r(i)?Xl.middle(t,i):zp(e,t,a,o,r)}},uw=(e,t)=>dw(e,t).bind(n=>{const o=cw(n,"th,td",zt);return Xs(o,r=>Ie(e,r)).map(r=>({index:r,all:o}))}),zR=["img","br"],UR=e=>{return(t=e,tf.getOption(t)).filter(n=>n.trim().length!==0||n.indexOf(rn)>-1).isSome()||Te(zR,ft(e))||(n=>Ss(n)&&Jn(n,"contenteditable")==="false")(e);var t},fw=(e,t,n,o,r)=>{const s=Mn(B(n),"td,th,caption").map(i=>i.dom),a=Ke(((i,l)=>Qt(l,c=>{const d=((f,m)=>({left:f.left-m,top:f.top-m,right:f.right+-2,bottom:f.bottom+-2,width:f.width+m,height:f.height+m}))(ha(c.getBoundingClientRect()),-1);return[{x:d.left,y:i(d),cell:c},{x:d.right,y:i(d),cell:c}]}))(e,s),i=>t(i,r));return((i,l,c)=>hn(i,(d,f)=>d.fold(()=>k.some(f),m=>{const b=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-c)),g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return k.some(g<b?f:m)}),k.none()))(a,o,r).map(i=>i.cell)},HR=xe(fw,e=>e.bottom,(e,t)=>e.y<t),qR=xe(fw,e=>e.top,(e,t)=>e.y>t),mw=(e,t,n)=>{const o=e(t,n);return(r=>r.breakType===Ur.Wrap&&r.positions.length===0)(o)||!Ut(n.getNode())&&(r=>r.breakType===Ur.Br&&r.positions.length===1)(o)?!((r,s,a)=>a.breakAt.exists(i=>r(s,i).breakAt.isSome()))(e,t,o):o.breakAt.isNone()},$R=xe(mw,$l),WR=xe(mw,Wl),VR=(e,t,n,o)=>{const r=e.selection.getRng(),s=t?1:-1;return!(!Q0()||!((a,i,l)=>{const c=G.fromRangeStart(i);return di(!a,l).exists(d=>d.isEqual(c))})(t,r,n)||(ls(s,e,n,!t,!1).each(a=>{cs(e,a)}),0))},pw=(e,t,n)=>{const o=((s,a)=>{const i=a.getNode(s);return Or(i)?k.some(i):k.none()})(!!t,n),r=t===!1;o.fold(()=>cs(e,n.toRange()),s=>di(r,e.getBody()).filter(a=>a.isEqual(n)).fold(()=>cs(e,n.toRange()),a=>((i,l,c)=>{l.undoManager.transact(()=>{const d=i?We:Re,f=Vx(l,B(c),d);cs(l,f)})})(t,e,s)))},KR=(e,t,n,o)=>{const r=e.selection.getRng(),s=G.fromRangeStart(r),a=e.getBody();if(!t&&$R(o,s)){const i=((l,c,d)=>((f,m)=>Sn(m.getClientRects()).bind(b=>HR(f,b.left,b.top)).bind(b=>{return Ld(Go(g=b).map(v=>$l(g,v).positions.concat(v)).getOr([]),m);var g}))(c,d).orThunk(()=>Sn(d.getClientRects()).bind(f=>Tp(fx(l,G.before(c)),f.left))).getOr(G.before(c)))(a,n,s);return pw(e,t,i),!0}if(t&&WR(o,s)){const i=((l,c,d)=>((f,m)=>nr(m.getClientRects()).bind(b=>qR(f,b.left,b.top)).bind(b=>{return Ld(jn(g=b).map(v=>[v].concat(Wl(g,v).positions)).getOr([]),m);var g}))(c,d).orThunk(()=>Sn(d.getClientRects()).bind(f=>Tp(mx(l,G.after(c)),f.left))).getOr(G.after(c)))(a,n,s);return pw(e,t,i),!0}return!1},gw=(e,t,n)=>k.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(o=>k.from(e.dom.getParent(o,"table")).map(r=>n(e,t,r,o))).getOr(!1),hw=(e,t)=>gw(e,t,VR),Up=(e,t)=>gw(e,t,KR),bw=(e,t,n)=>n.fold(k.none,k.none,(o,r)=>{return(s=r,Ka(s,UR)).map(a=>(i=>{const l=pi.exact(i,0,i,0);return GN(l)})(a));var s},o=>e.mode.isReadOnly()||!XR(o)?k.none():(e.execCommand("mceTableInsertRowAfter"),vw(e,t,o))),XR=e=>qn(e,Es("table")).exists(Xo),vw=(e,t,n)=>{return bw(e,t,(r=yw,uw(o=n,void 0).fold(()=>Xl.none(o),s=>zp(s.all,o,s.index,1,r))));var o,r},YR=(e,t,n)=>{return bw(e,t,(r=yw,uw(o=n,void 0).fold(()=>Xl.none(),s=>zp(s.all,o,s.index,-1,r))));var o,r},yw=e=>Xo(e)||Nu(e,GR),GR=e=>Ss(e)&&Xo(e),Cw=(e,t)=>{const n=["table","li","dl"],o=B(e.getBody()),r=a=>{const i=ft(a);return Ie(a,o)||Te(n,i)},s=e.selection.getRng();return((a,i)=>((l,c,d=yt)=>d(c)?k.none():Te(l,ft(c))?k.some(c):lr(c,l.join(","),f=>on(f,"table")||d(f)))(["td","th"],a,i))(B(t?s.endContainer:s.startContainer),r).map(a=>(dw(a,r).each(i=>{e.model.table.clearSelectedCells(i.dom)}),e.selection.collapse(!t),(t?vw:YR)(e,r,a).each(i=>{e.selection.setRng(i)}),!0)).getOr(!1)},hr=(e,t)=>({container:e,offset:t}),jd=Bt.DOM,zd=e=>t=>e===t?-1:0,Hp=(e,t,n)=>{if(re(e)&&t>=0)return k.some(hr(e,t));{const o=pa(jd);return k.from(o.backwards(e,t,zd(e),n)).map(r=>hr(r.container,r.container.data.length))}},qp=(e,t,n)=>{if(!re(e))return k.none();const o=e.data;if(t>=0&&t<=o.length)return k.some(hr(e,t));{const r=pa(jd);return k.from(r.backwards(e,t,zd(e),n)).bind(s=>{const a=s.container.data;return qp(s.container,t+a.length,n)})}},xw=(e,t,n)=>{if(!re(e))return k.none();const o=e.data;if(t<=o.length)return k.some(hr(e,t));{const r=pa(jd);return k.from(r.forwards(e,t,zd(e),n)).bind(s=>xw(s.container,t-o.length,n))}},$p=(e,t,n,o,r)=>{const s=pa(e,(a=>i=>a.isBlock(i)||Te(["BR","IMG","HR","INPUT"],i.nodeName)||a.getContentEditable(i)==="false")(e));return k.from(s.backwards(t,n,o,r))},ww=e=>e!==""&&` \xA0\uFEFF\f
\r	\v`.indexOf(e)!==-1,QR=(e,t)=>e.substring(t.length),Wp=(e,t,n,o=!1)=>{if(!(r=t).collapsed||!re(r.startContainer))return k.none();var r;const s={text:"",offset:0},a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return $p(e,t.startContainer,t.startOffset,(i,l,c)=>(s.text=c+s.text,s.offset+=l,((d,f,m,b=!1)=>{let g;const v=m.charAt(0);for(g=f-1;g>=0;g--){const h=d.charAt(g);if(!b&&ww(h))return k.none();if(v===h&&cn(d,m,g,f))break}return k.some(g)})(s.text,s.offset,n,o).getOr(l)),a).bind(i=>{const l=t.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(t.endContainer,t.endOffset),l.collapsed)return k.none();const c=(d=>yo(d.toString().replace(/\u00A0/g," ")))(l);return c.lastIndexOf(n)!==0?k.none():k.some({text:QR(c,n),range:l,trigger:n})})},Sw=e=>{if((t=>t.nodeType===3)(e))return hr(e,e.data.length);{const t=e.childNodes;return t.length>0?Sw(t[t.length-1]):hr(e,t.length)}},Ew=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?Ew(n[t],0):n.length>0&&(o=>o.nodeType===1)(e)&&n.length===t?Sw(n[n.length-1]):hr(e,t)},kw=(e,t,n,o={})=>{var r;const s=t(),a=(r=e.selection.getRng().startContainer.nodeValue)!==null&&r!==void 0?r:"",i=Ke(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>(d=>f=>{const m=Ew(f.startContainer,f.startOffset);return!((b,g)=>{var v;const h=(v=b.getParent(g.container,b.isBlock))!==null&&v!==void 0?v:b.getRoot();return $p(b,g.container,g.offset,(C,S)=>S===0?-1:S,h).filter(C=>{const S=C.container.data.charAt(C.offset-1);return!ww(S)}).isSome()})(d,m)})(e.dom))(n.range,a,n.text));if(i.length===0)return k.none();const l=Promise.all(ot(i,c=>c.fetch(n.text,c.maxResults,o).then(d=>({matchText:n.text,items:d,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return k.some({lookupData:l,context:n})};var Zo;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Zo||(Zo={}));const Vp=(e,t,n)=>e.stype===Zo.Error?t(e.serror):n(e.svalue),Si=e=>({stype:Zo.Value,svalue:e}),Yl=e=>({stype:Zo.Error,serror:e}),JR=Vp,Kp=e=>Xe(e)&&nn(e).length>100?" removed due to size":JSON.stringify(e,null,2),Ud=(e,t)=>Yl([{path:e,getErrorInfo:t}]),ZR=(e,t)=>({extract:(n,o)=>Ot(o,e).fold(()=>((r,s)=>Ud(r,()=>'Choice schema did not contain choice key: "'+s+'"'))(n,e),r=>((s,a,i,l)=>Ot(i,l).fold(()=>((c,d,f)=>Ud(c,()=>'The chosen schema: "'+f+'" did not exist in branches: '+Kp(d)))(s,i,l),c=>c.extract(s.concat(["branch: "+l]),a)))(n,o,t,r)),toString:()=>"chooseOn("+e+"). Possible values: "+nn(t)}),_w=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const s in r)Fe(r,s)&&(n[s]=e(n[s],r[s]))}return n},Xp=_w((e,t)=>Me(e)&&Me(t)?Xp(e,t):t),eO=_w((e,t)=>t),Nw=e=>({tag:"defaultedThunk",process:fe(e)}),Aw=e=>{const t=(o=>{const r=[],s=[];return J(o,a=>{Vp(a,i=>s.push(i),i=>r.push(i))}),{values:r,errors:s}})(e);return t.errors.length>0?(n=t.errors,wn(Yl,lc)(n)):Si(t.values);var n},Tw=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Yp=e=>({extract:(t,n)=>{return o=e(n),r=s=>((a,i)=>Ud(a,fe(i)))(t,s),o.stype===Zo.Error?r(o.serror):o;var o,r},toString:fe("val")}),tO=Yp(Si),Rw=(e,t,n,o)=>o(Ot(e,t).getOrThunk(()=>n(e))),nO=(e,t,n,o,r)=>{const s=i=>r.extract(t.concat([o]),i),a=i=>i.fold(()=>Si(k.none()),l=>{return d=r.extract(t.concat([o]),l),f=k.some,d.stype===Zo.Value?{stype:Zo.Value,svalue:f(d.svalue)}:d;var d,f});switch(e.tag){case"required":return((i,l,c,d)=>Ot(l,c).fold(()=>((f,m,b)=>Ud(f,()=>'Could not find valid *required* value for "'+m+'" in '+Kp(b)))(i,c,l),d))(t,n,o,s);case"defaultedThunk":return Rw(n,o,e.process,s);case"option":return((i,l,c)=>c(Ot(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,c,d)=>d(Ot(i,l).map(f=>f===!0?c(i):f)))(n,o,e.process,a);case"mergeWithThunk":return Rw(n,o,fe({}),i=>{const l=Xp(e.process(n),i);return s(l)})}},Hd=e=>({extract:(t,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)Tw(l,(c,d,f,m)=>{const b=nO(f,o,r,c,m);JR(b,g=>{i.push(...g)},g=>{a[d]=g})},(c,d)=>{a[c]=d(r)});return i.length>0?Yl(i):Si(a)})(t,n,e),toString:()=>`obj{
`+ot(e,n=>Tw(n,(o,r,s,a)=>o+" -> "+a.toString(),(o,r)=>"state("+o+")")).join(`
`)+"}"}),Gp=e=>({extract:(t,n)=>{const o=ot(n,(r,s)=>e.extract(t.concat(["["+s+"]"]),r));return Aw(o)},toString:()=>"array("+e.toString()+")"}),oO=wn(Gp,Hd),rO=(e,t,n)=>{return o=((r,s,a)=>((i,l)=>i.stype===Zo.Error?{stype:Zo.Error,serror:l(i.serror)}:i)(s.extract([r],a),i=>({input:a,errors:i})))(e,t,n),Vp(o,eo.error,eo.value);var o},Qp=(e,t)=>ZR(e,gs(t,Hd)),sO=fe(tO),qd=(e,t)=>Yp(n=>{const o=typeof n;return e(n)?Si(n):Yl(`Expected type: ${t} but got: ${o}`)}),aO=qd(x,"number"),Ei=qd(Ae,"string"),iO=qd(gn,"boolean"),Jp=qd(bt,"function"),ki=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),Ow=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),Bw=e=>{return t=n=>Te(e,n)?eo.value(n):eo.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`),Yp(n=>t(n).fold(Yl,Si));var t},Zp=(e,t)=>ki(e,e,{tag:"required",process:{}},t),Dw=e=>Zp(e,Ei),eg=(e,t)=>ki(e,e,{tag:"required",process:{}},Bw(t)),Pw=e=>Zp(e,Jp),Lw=(e,t)=>ki(e,e,{tag:"required",process:{}},Gp(t)),tg=(e,t)=>ki(e,e,{tag:"option",process:{}},t),Da=e=>tg(e,Ei),_i=(e,t,n)=>ki(e,e,Nw(t),n),Mw=(e,t)=>_i(e,t,aO),$d=(e,t)=>_i(e,t,Ei),Iw=(e,t,n)=>_i(e,t,Bw(n)),ng=(e,t)=>_i(e,t,iO),ds=(e,t)=>_i(e,t,Jp),lO=Dw("type"),cO=Pw("fetch"),og=Pw("onAction"),dO=ds("onSetup",()=>Ee),uO=Da("text"),fO=Da("icon"),mO=Da("tooltip"),pO=Da("label"),gO=ng("active",!1),hO=ng("enabled",!0),Fw=ng("primary",!1),Gl=e=>$d("type",e),bO=Hd([lO,Dw("trigger"),Mw("minChars",1),(e=>ki(e,e,Nw(1),sO()))("columns"),Mw("maxResults",10),tg("matches",Jp),cO,og,(jw=Ei,_i("highlightOn",[],Gp(jw)))]);var jw;const rg=[hO,mO,fO,uO,dO,$d("context","mode:design")],zw=[gO].concat(rg),Wd=[ds("predicate",yt),Iw("scope","node",["node","editor"]),Iw("position","selection",["node","selection","line"])],vO=rg.concat([Gl("contextformbutton"),$d("align","end"),Fw,og,Ow("original",mt)]),yO=zw.concat([Gl("contextformbutton"),$d("align","end"),Fw,og,Ow("original",mt)]),CO=rg.concat([Gl("contextformbutton")]),xO=zw.concat([Gl("contextformtogglebutton")]),sg=[pO,Lw("commands",Qp("type",{contextformbutton:vO,contextformtogglebutton:yO})),tg("launch",Qp("type",{contextformbutton:CO,contextformtogglebutton:xO})),ds("onInput",Ee),ds("onSetup",Ee)];Qp("type",{contextform:[...Wd,...sg,eg("type",["contextform"]),ds("initValue",fe("")),Da("placeholder")],contextsliderform:[...Wd,...sg,eg("type",["contextsliderform"]),ds("initValue",fe(0)),ds("min",fe(0)),ds("max",fe(100))],contextsizeinputform:[...Wd,...sg,eg("type",["contextsizeinputform"]),ds("initValue",fe({width:"",height:""}))]}),Hd([Gl("contexttoolbar"),Zp("items",(e=>{const t=mt;return{extract:(n,o)=>{const r=[];for(const s of e){const a=s.extract(n,o);if(a.stype===Zo.Value)return{stype:Zo.Value,svalue:t(a.svalue)};r.push(a)}return Aw(r)},toString:()=>"oneOf("+ot(e,n=>n.toString()).join(", ")+")"}})([Ei,oO([Da("name"),Da("label"),Lw("items",Ei)])]))].concat(Wd));const wO=e=>{const t=e.ui.registry.getAll().popups,n=gs(t,s=>{return(a=s,rO("Autocompleter",bO,a)).fold(i=>{throw new Error(`Errors: 
`+(c=>{const d=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:fe("... (only showing first ten failures)")}]):c;return ot(d,f=>"Failed path: ("+f.path.join(" > ")+`)
`+f.getErrorInfo())})((l=i).errors).join(`
`)+`

Input object: `+Kp(l.input));var l},mt);var a}),o=Ua(_r(n,s=>s.trigger)),r=za(n);return{dataset:n,triggers:o,lookupByTrigger:s=>Ke(r,a=>a.trigger===s)}},SO=e=>{const t=os(),n=mn(!1),o=t.isSet,r=()=>{o()&&((l=>{l.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},s=Vo(()=>wO(e)),a=l=>{(c=>t.get().map(d=>Wp(e.dom,e.selection.getRng(),d.trigger,!0).bind(f=>kw(e,s,f,c))).getOrThunk(()=>((d,f)=>{const m=f(),b=d.selection.getRng();return((g,v,h)=>Gn(h.triggers,C=>Wp(g,v,C)))(d.dom,b,m).bind(g=>kw(d,f,g))})(e,s)))(l).fold(r,c=>{(d=>{o()||t.set({trigger:d.trigger,matchLength:d.text.length})})(c.context),c.lookupData.then(d=>{t.get().map(f=>{const m=c.context;f.trigger===m.trigger&&(t.set({...f,matchLength:m.text.length}),n.get()?(bf(e,{range:m.range}),((b,g)=>{b.dispatch("AutocompleterUpdate",g)})(e,{lookupData:d})):(n.set(!0),bf(e,{range:m.range}),((b,g)=>{b.dispatch("AutocompleterStart",g)})(e,{lookupData:d})))})})})},i=()=>t.get().bind(({trigger:l})=>{const c=e.selection.getRng();return Wp(e.dom,c,l,n.get()).filter(({range:d})=>((f,m)=>{const b=f.compareBoundaryPoints(window.Range.START_TO_START,m),g=f.compareBoundaryPoints(window.Range.END_TO_END,m);return b>=0&&g<=0})(c,d)).map(({range:d})=>d)});e.addCommand("mceAutocompleterReload",(l,c)=>{const d=Xe(c)?c.fetchOptions:{};a(d)}),e.addCommand("mceAutocompleterClose",r),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{i().each(l=>{bf(e,{range:l})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>i().isSome()),((l,c)=>{const d=ef(c.load,50);l.on("input",f=>{(f.inputType!=="insertCompositionText"||l.composing)&&d.throttle()}),l.on("keydown",f=>{const m=f.which;m===8?d.throttle():m===27?(d.cancel(),c.cancelIfNecessary()):m!==38&&m!==40||d.cancel()},!0),l.on("remove",d.cancel)})(e,{cancelIfNecessary:r,load:a})},EO=Pn().browser.isSafari(),Uw=e=>Os(B(e)),Hw=(e,t)=>{var n;return e.startOffset===0&&e.endOffset===((n=t.textContent)===null||n===void 0?void 0:n.length)},Vd=(e,t)=>k.from(e.getParent(t.container(),"details")),qw=(e,t)=>Vd(e,t).isSome(),$w=(e,t)=>{const n=t.getNode();Ft(n)||e.selection.setCursorLocation(n,t.offset())},Ww=(e,t,n)=>{const o=e.dom.getParent(t.container(),"details");if(o&&!o.open){const r=e.dom.select("summary",o)[0];r&&(n?jn(r):Go(r)).each(s=>$w(e,s))}else $w(e,t)},Vw=(e,t,n)=>{const{dom:o,selection:r}=e,s=e.getBody();if(n==="character"){const a=G.fromRangeStart(r.getRng()),i=o.getParent(a.container(),o.isBlock),l=Vd(o,a),c=i&&o.isEmpty(i),d=Je(i?.previousSibling),f=Je(i?.nextSibling);return!!(c&&(t?f:d)&&ci(!t,s,a).exists(m=>qw(o,m)&&!vc(l,Vd(o,m))))||ci(t,s,a).fold(yt,m=>{const b=Vd(o,m);if(qw(o,m)&&!vc(l,b)){if(t||Ww(e,m,!1),i&&c){if(t&&d||!t&&f)return!0;Ww(e,m,t),e.dom.remove(i)}return!0}return!1})}return!1},kO=(e,t,n,o)=>{const r=e.selection.getRng(),s=G.fromRangeStart(r),a=e.getBody();return o==="selection"?((i,l)=>{const c=l.startSummary.exists(m=>m.contains(i.startContainer)),d=l.startSummary.exists(m=>m.contains(i.endContainer)),f=l.startDetails.forall(m=>l.endDetails.forall(b=>m!==b));return(c||d)&&!(c&&d)||f})(r,t):n?((i,l)=>l.startSummary.exists(c=>((d,f)=>Go(f).exists(m=>Ut(m.getNode())&&lo(f,m).exists(b=>b.isEqual(d))||m.isEqual(d)))(i,c)))(s,t)||((i,l,c)=>c.startDetails.exists(d=>to(i,l).forall(f=>!d.contains(f.container()))))(a,s,t):((i,l)=>l.startSummary.exists(c=>((d,f)=>jn(f).exists(m=>m.isEqual(d)))(i,c)))(s,t)||((i,l)=>l.startDetails.exists(c=>lo(c,i).forall(d=>l.startSummary.exists(f=>!f.contains(i.container())&&f.contains(d.container())))))(s,t)},Pa=(e,t,n)=>((o,r,s)=>((a,i)=>{const l=k.from(a.getParent(i.startContainer,"details")),c=k.from(a.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const d=l.bind(f=>k.from(a.select("summary",f)[0]));return k.some({startSummary:d,startDetails:l,endDetails:c})}return k.none()})(o.dom,o.selection.getRng()).fold(()=>Vw(o,r,s),a=>kO(o,a,r,s)||Vw(o,r,s)))(e,t,n)||EO&&((o,r,s)=>{const a=o.selection,i=a.getNode(),l=a.getRng(),c=G.fromRangeStart(l);return!!hk(i)&&(s==="selection"&&Hw(l,i)||iy(r,c,i)?Uw(i):o.undoManager.transact(()=>{const d=a.getSel();let{anchorNode:f,anchorOffset:m,focusNode:b,focusOffset:g}=d??{};const v=()=>{le(f)&&le(m)&&le(b)&&le(g)&&d?.setBaseAndExtent(f,m,b,g)},h=(S,E)=>{J(S.childNodes,A=>{Sl(A)&&E.appendChild(A)})},C=o.dom.create("span",{"data-mce-bogus":"1"});h(i,C),i.appendChild(C),v(),s!=="word"&&s!=="line"||d==null||d.modify("extend",r?"right":"left",s),!a.isCollapsed()&&Hw(a.getRng(),C)?Uw(i):(o.execCommand(r?"ForwardDelete":"Delete"),f=d?.anchorNode,m=d?.anchorOffset,b=d?.focusNode,g=d?.focusOffset,h(C,i),v()),o.dom.remove(C)}),!0)})(e,t,n)?k.some(Ee):k.none(),Kw=e=>(t,n,o={})=>{const r=t.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:Ee,inputType:n},a=Sh(new InputEvent(e));return t.dispatch(e,{...a,...s,...o})},Ql=Kw("input"),Kd=Kw("beforeinput"),Xw=Pn(),Yw=Xw.os,Gw=Yw.isMacOS()||Yw.isiOS(),_O=Xw.browser.isFirefox(),Ni=(e,t)=>{const n=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const s=(a=>{for(;a;){if(ke(a)||re(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(t.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&t.insertBefore(n.doc.createTextNode(rn),t.firstChild)}const r=n.createRng();if(t.normalize(),t.hasChildNodes()){const s=new fn(t,t);let a,i=t;for(;a=s.current();){if(re(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else Ut(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));e.selection.setRng(r),Nl(e,r)},Jl=(e,t)=>{const n=e.getRoot();let o,r=t;for(;r!==n&&r&&e.getContentEditable(r)!=="false";){if(e.getContentEditable(r)==="true"){o=r;break}r=r.parentNode}return r!==n?o:n},ag=e=>k.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),ig=e=>{e.innerHTML='<br data-mce-bogus="1">'},Zl=(e,t)=>{Fn(e).toLowerCase()===t.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;k.from(r.style).map(s.parseStyle).each(d=>{const f={...ue(B(o)),...d};s.setStyles(o,f)});const a=k.from(r.class).map(d=>d.split(/\s+/)),i=k.from(o.className).map(d=>Ke(d.split(/\s+/),f=>f!==""));vn(a,i,(d,f)=>{const m=Ke(f,g=>!Te(d,g)),b=[...d,...m];s.setAttrib(o,"class",b.join(" "))});const l=["style","class"],c=kr(r,(d,f)=>!Te(l,f));s.setAttribs(o,c)})(e,t,pl(e))},Qw=(e,t,n,o,r=!0,s,a)=>{const i=e.dom,l=e.schema,c=Fn(e),d=n?n.nodeName.toUpperCase():"";let f=t;const m=l.getTextInlineElements();let b;b=s||d==="TABLE"||d==="HR"?i.create(s||c,a||{}):n.cloneNode(!1);let g=b;if(r)do if(m[f.nodeName]){if(Do(f)||Po(f))continue;const v=f.cloneNode(!1);i.setAttrib(v,"id",""),b.hasChildNodes()?(v.appendChild(b.firstChild),b.appendChild(v)):(g=v,b.appendChild(v))}while((f=f.parentNode)&&f!==o);else i.setAttrib(b,"style",null),i.setAttrib(b,"class",null);return Zl(e,b),ig(g),b},Jw=(e,t)=>{const n=e?.parentNode;return le(n)&&n.nodeName===t},Zw=e=>le(e)&&/^(OL|UL|LI)$/.test(e.nodeName),lg=e=>le(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Xd=e=>{const t=e.parentNode;return lg(t)?t:e},Yd=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];for(;o&&!ke(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},eS=e=>hn(_r(ue(B(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),NO=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),cg=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,dg=(e,t)=>le(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",ug=(e,t,n)=>re(t)?e?n===1&&t.data.charAt(n-1)===pn?0:n:n===t.data.length-1&&t.data.charAt(n)===pn?t.data.length:n:n,tS={insert:(e,t)=>{let n,o,r,s,a=!1;const i=e.dom,l=e.schema.getNonEmptyElements(),c=e.selection.getRng(),d=Fn(e),f=B(c.startContainer),m=$t(f,c.startOffset),b=m.exists(z=>Ss(z)&&!Xo(z)),g=c.collapsed&&b,v=(z,V)=>Qw(e,n,N,A,d_(e),z,V),h=z=>{const V=ug(z,n,o);if(re(n)&&(z?V>0:V<n.data.length))return!1;if((n.parentNode===N||n===N)&&a&&!z||z&&ke(n)&&n===N.firstChild)return!0;if(cg(n,"TABLE")||cg(n,"HR"))return(j=>j.nodeName==="BR"||j.nextSibling&&j.nextSibling.nodeName==="BR")(n)?!z:a&&!z||!a&&z;const D=new fn(n,N);let L;for(re(n)&&(z&&V===0?D.prev():z||V!==n.data.length||D.next());L=D.current();){if(ke(L)){if(!L.getAttribute("data-mce-bogus")){const j=L.nodeName.toLowerCase();if(l[j]&&j!=="br")return!1}}else if(re(L)&&!Qa(L.data))return!1;z?D.prev():D.next()}return!0},C=()=>{let z;return z=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&R!=="HGROUP"?v(d):v(),((V,D)=>{const L=u_(V);return!wt(D)&&(Ae(L)?Te(ce.explode(L),D.nodeName.toLowerCase()):L)})(e,s)&&dg(i,s)&&i.isEmpty(N,void 0,{includeZwsp:!0})?z=i.split(s,N):i.insertAfter(z,N),Ni(e,z),z};sd(i,c).each(z=>{c.setStart(z.startContainer,z.startOffset),c.setEnd(z.endContainer,z.endOffset)}),n=c.startContainer,o=c.startOffset;const S=!(!t||!t.shiftKey),E=!(!t||!t.ctrlKey);ke(n)&&n.hasChildNodes()&&!g&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&re(n)?n.data.length:0);const A=Jl(i,n);if(!A||((z,V)=>{const D=z.dom.getParent(V,"ol,ul,dl");return D!==null&&z.dom.getContentEditableParent(D)==="false"})(e,n))return;S||(n=((z,V,D,L,j)=>{var Q,ie;const oe=z.dom,we=(Q=Jl(oe,L))!==null&&Q!==void 0?Q:oe.getRoot();let Ne=oe.getParent(L,oe.isBlock);if(!Ne||!dg(oe,Ne)){if(Ne=Ne||we,!Ne.hasChildNodes()){const Se=oe.create(V);return Zl(z,Se),Ne.appendChild(Se),D.setStart(Se,0),D.setEnd(Se,0),Se}let Oe,Le=L;for(;Le&&Le.parentNode!==Ne;)Le=Le.parentNode;for(;Le&&!oe.isBlock(Le);)Oe=Le,Le=Le.previousSibling;const ge=(ie=Oe?.parentElement)===null||ie===void 0?void 0:ie.nodeName;if(Oe&&ge&&z.schema.isValidChild(ge,V.toLowerCase())){const Se=Oe.parentNode,F=oe.create(V);for(Zl(z,F),Se.insertBefore(F,Oe),Le=Oe;Le&&!oe.isBlock(Le);){const U=Le.nextSibling;F.appendChild(Le),Le=U}D.setStart(L,j),D.setEnd(L,j)}}return L})(e,d,c,n,o));let N=i.getParent(n,i.isBlock)||i.getRoot();s=le(N?.parentNode)?i.getParent(N.parentNode,i.isBlock):null,r=N?N.nodeName.toUpperCase():"";const R=s?s.nodeName.toUpperCase():"";if(R!=="LI"||E||(N=s,s=s.parentNode,r=R),ke(s)&&((z,V,D)=>!V&&D.nodeName.toLowerCase()===Fn(z)&&z.dom.isEmpty(D)&&((L,j)=>{let Q=j;for(;Q&&Q!==L&&Je(Q.nextSibling);){const oe=Q.parentElement;if(!oe||(ie=oe,!Fe(z.schema.getTextBlockElements(),ie.nodeName.toLowerCase())))return Bu(oe);Q=oe}var ie;return!1})(z.getBody(),D))(e,S,N))return((z,V,D)=>{var L,j,Q;const ie=V(Fn(z)),oe=((we,Ne)=>we.dom.getParent(Ne,Bu))(z,D);oe&&(z.dom.insertAfter(ie,oe),Ni(z,ie),((Q=(j=(L=D.parentElement)===null||L===void 0?void 0:L.childNodes)===null||j===void 0?void 0:j.length)!==null&&Q!==void 0?Q:0)>1&&z.dom.remove(D))})(e,v,N);if(/^(LI|DT|DD)$/.test(r)&&ke(s)&&i.isEmpty(N))return void((z,V,D,L,j)=>{const Q=z.dom,ie=z.selection.getRng(),oe=D.parentNode;if(D===z.getBody()||!oe)return;var we;Zw(we=D)&&Zw(we.parentNode)&&(j="LI");const Ne=lg(L)?eS(L):void 0;let Oe=lg(L)&&Ne?V(j,{style:eS(L)}):V(j);if(Yd(D,L,!0)&&Yd(D,L,!1))if(Jw(D,"LI")){const Le=Xd(D);Q.insertAfter(Oe,Le),(ge=>{var Se;return((Se=ge.parentNode)===null||Se===void 0?void 0:Se.firstChild)===ge})(D)?Q.remove(Le):Q.remove(D)}else Q.replace(Oe,D);else if(Yd(D,L,!0))Jw(D,"LI")?(Q.insertAfter(Oe,Xd(D)),Oe.appendChild(Q.doc.createTextNode(" ")),Oe.appendChild(D)):oe.insertBefore(Oe,D),Q.remove(L);else if(Yd(D,L,!1))Q.insertAfter(Oe,Xd(D)),Q.remove(L);else{D=Xd(D);const Le=ie.cloneRange();Le.setStartAfter(L),Le.setEndAfter(D);const ge=Le.extractContents();if(j==="LI"&&(Se=>Se.firstChild&&Se.firstChild.nodeName==="LI")(ge)){const Se=Ke(ot(Oe.children,B),vr(Es("br")));Oe=ge.firstChild,Q.insertAfter(ge,D),J(Se,F=>He(B(Oe),F)),Ne&&Oe.setAttribute("style",Ne)}else Q.insertAfter(ge,D),Q.insertAfter(Oe,D);Q.remove(L)}Ni(z,Oe)})(e,v,s,N,d);if(!(g||N!==e.getBody()&&dg(i,N)))return;const M=N.parentNode;let P;if(g)P=v(d),m.fold(()=>{at(f,B(P))},z=>{Re(z,B(P))}),e.selection.setCursorLocation(P,0);else if(ri(N))P=sf(N),i.isEmpty(N)&&ig(N),Zl(e,P),Ni(e,P);else if(h(!1))P=C();else if(h(!0)&&M){const z=G.fromRangeStart(c),V=cm(z),D=B(N),L=dd(D,z,e.schema)?Uv(D,z,e.schema).bind(Q=>k.from(Q.getNode())):k.none();P=M.insertBefore(v(),N);const j=cg(N,"HR")||V?P:L.getOr(N);Ni(e,j)}else{const z=(D=>{const L=D.cloneRange();return L.setStart(D.startContainer,ug(!0,D.startContainer,D.startOffset)),L.setEnd(D.endContainer,ug(!1,D.endContainer,D.endOffset)),L})(c).cloneRange();z.setEndAfter(N);const V=z.extractContents();(D=>{J(qg(B(D),yn),L=>{const j=L.dom;j.nodeValue=yo(j.data)})})(V),(D=>{let L=D;do re(L)&&(L.data=L.data.replace(/^[\r\n]+/,"")),L=L.firstChild;while(L)})(V),P=V.firstChild,i.insertAfter(V,N),((D,L,j)=>{var Q;const ie=[];if(!j)return;let oe=j;for(;oe=oe.firstChild;){if(D.isBlock(oe))return;ke(oe)&&!L[oe.nodeName.toLowerCase()]&&ie.push(oe)}let we=ie.length;for(;we--;)oe=ie[we],(!oe.hasChildNodes()||oe.firstChild===oe.lastChild&&((Q=oe.firstChild)===null||Q===void 0?void 0:Q.nodeValue)===""||NO(D,oe))&&D.remove(oe)})(i,l,P),((D,L)=>{L.normalize();const j=L.lastChild;(!j||ke(j)&&/^(left|right)$/gi.test(D.getStyle(j,"float",!0)))&&D.add(L,"br")})(i,N),i.isEmpty(N)&&ig(N),P.normalize(),i.isEmpty(P)?(i.remove(P),C()):(Zl(e,P),Ni(e,P))}i.setAttrib(P,"id",""),e.dispatch("NewBlock",{newBlock:P})},fakeEventName:"insertParagraph"},nS=(e,t,n)=>{const o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),Nl(e,o)},AO=(e,t)=>{const n=De("br");Re(B(t),n),e.undoManager.add()},TO=(e,t)=>{RO(e.getBody(),t)||We(B(t),De("br"));const n=De("br");We(B(t),n),nS(e,n.dom,!1),e.undoManager.add()},RO=(e,t)=>{return n=G.after(t),!!Ut(n.getNode())||to(e,G.after(t)).map(o=>Ut(o.getNode())).getOr(!1);var n},oS=e=>e&&e.nodeName==="A"&&"href"in e,OO=e=>e.fold(yt,oS,oS,yt),BO=(e,t)=>{t.fold(Ee,xe(AO,e),xe(TO,e),Ee)},rS={insert:(e,t)=>{const n=(o=>{const r=xe(_a,o),s=G.fromRangeStart(o.selection.getRng());return zr(r,o.getBody(),s).filter(OO)})(e);n.isSome()?n.each(xe(BO,e)):((o,r)=>{const s=o.selection,a=o.dom,i=s.getRng();let l,c=!1;sd(a,i).each(h=>{i.setStart(h.startContainer,h.startOffset),i.setEnd(h.endContainer,h.endOffset)});let d=i.startOffset,f=i.startContainer;if(ke(f)&&f.hasChildNodes()){const h=d>f.childNodes.length-1;f=f.childNodes[Math.min(d,f.childNodes.length-1)]||f,d=h&&re(f)?f.data.length:0}let m=a.getParent(f,a.isBlock);const b=m&&m.parentNode?a.getParent(m.parentNode,a.isBlock):null,g=b?b.nodeName.toUpperCase():"",v=!(!r||!r.ctrlKey);g!=="LI"||v||(m=b),re(f)&&d>=f.data.length&&(((h,C,S)=>{const E=new fn(C,S);let A;const N=h.getNonEmptyElements();for(;A=E.next();)if(N[A.nodeName.toLowerCase()]||re(A)&&A.length>0)return!0;return!1})(o.schema,f,m||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),ff(a,i,l),nS(o,l,c),o.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},sS=(e,t)=>ag(e).filter(n=>t.length>0&&on(B(n),t)).isSome(),Co=Dr([{br:[]},{block:[]},{none:[]}]),DO=(e,t)=>(n=>sS(n,c_(n)))(e),aS=e=>(t,n)=>(o=>ag(o).filter(r=>ti(B(r))).isSome())(t)===e,iS=(e,t)=>(n,o)=>(s=>ag(s).fold(fe(""),a=>a.nodeName.toUpperCase()))(n)===e.toUpperCase()===t,PO=e=>{const t=Jl(e.dom,e.selection.getStart());return wt(t)},ec=e=>iS("pre",e),Gd=e=>(t,n)=>a_(t)===e,LO=(e,t)=>(n=>sS(n,l_(n)))(e),Qd=(e,t)=>t,MO=e=>{const t=Fn(e),n=Jl(e.dom,e.selection.getStart());return le(n)&&e.schema.isValidChild(n.nodeName,t)},IO=e=>{const t=e.selection.getRng(),n=B(t.startContainer),o=$t(n,t.startOffset).map(r=>Ss(r)&&!Xo(r));return t.collapsed&&o.getOr(!0)},zo=(e,t)=>(n,o)=>hn(e,(r,s)=>r&&s(n,o),!0)?k.some(t):k.none(),Jd=(e,t,n)=>{if(!t.mode.isReadOnly()){if(t.selection.isCollapsed()||(o=>{o.execCommand("delete")})(t),le(n)&&Kd(t,e.fakeEventName).isDefaultPrevented())return;e.insert(t,n),le(n)&&Ql(t,e.fakeEventName)}},lS=(e,t)=>{if(e.mode.isReadOnly())return;const n=()=>Jd(rS,e,t),o=()=>Jd(tS,e,t),r=((s,a)=>rx([zo([DO],Co.none()),zo([ec(!0),PO],Co.none()),zo([iS("summary",!0)],Co.br()),zo([ec(!0),Gd(!1),Qd],Co.br()),zo([ec(!0),Gd(!1)],Co.block()),zo([ec(!0),Gd(!0),Qd],Co.block()),zo([ec(!0),Gd(!0)],Co.br()),zo([aS(!0),Qd],Co.br()),zo([aS(!0)],Co.block()),zo([LO],Co.br()),zo([Qd],Co.br()),zo([MO],Co.block()),zo([IO],Co.block())],[s,!(!a||!a.shiftKey)]).getOr(Co.none()))(e,t);switch(i_(e)){case"linebreak":r.fold(n,n,Ee);break;case"block":r.fold(o,o,Ee);break;case"invert":r.fold(o,n,Ee);break;default:r.fold(n,o,Ee)}},cS=Pn(),FO=cS.os.isiOS()&&cS.browser.isSafari(),dS=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{lS(e,t)}))},jO=Pn(),uS=e=>e.stopImmediatePropagation(),fS=e=>e.keyCode===Ce.PAGE_UP||e.keyCode===Ce.PAGE_DOWN,mS=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",uS,!0):!n&&e.get()&&t.off("NodeChange",uS),e.set(n)},pS=(e,t)=>e===t||e.contains(t),gS=(e,t)=>{const n=t.container(),o=t.offset();return re(n)?(n.insertData(o,e),k.some(G(n,o+e.length))):$c(t).map(r=>{const s=lt(e);return t.isAtEnd()?We(r,s):Re(r,s),G(s.dom,e.length)})},hS=xe(gS,rn),bS=xe(gS," "),vS=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},zO=e=>{const t=G.fromRangeStart(e.selection.getRng()),n=B(e.getBody());if(e.selection.isCollapsed()){const o=xe(_a,e),r=G.fromRangeStart(e.selection.getRng());return zr(o,e.getBody(),r).bind((s=>a=>a.fold(i=>lo(s.dom,G.before(i)),i=>jn(i),i=>Go(i),i=>to(s.dom,G.after(i))))(n)).map(s=>()=>((a,i,l)=>c=>Kv(a,c,l)?hS(i):bS(i))(n,t,e.schema)(s).each(vS(e)))}return k.none()},UO=e=>{return xs(gt.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const o=B(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((r,s,a)=>Kv(r,s,a)?hS(s):bS(s))(o,G.fromRangeStart(e.selection.getRng()),e.schema).each(vS(e))});var t,n},HO=e=>hN(e)?[{keyCode:Ce.TAB,action:qe(Cw,e,!0)},{keyCode:Ce.TAB,shiftKey:!0,action:qe(Cw,e,!1)}]:[],qO=e=>{if(e.addShortcut("Meta+P","","mcePrint"),SO(e),jr(e))return mn(null);{const t=AR(e);return(n=>{n.on("beforeinput",o=>{n.selection.isEditable()&&!kt(o.getTargetRanges(),r=>!((s,a)=>!pS(s.getBody(),a.startContainer)||!pS(s.getBody(),a.endContainer)||fv(s.dom,a))(n,r))||o.preventDefault()})})(e),(n=>{n.on("keyup compositionstart",xe(FR,n))})(e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=gt.os.isMacOS()||gt.os.isiOS();Kl([{keyCode:Ce.RIGHT,action:qe(Qx,s,!0)},{keyCode:Ce.LEFT,action:qe(Qx,s,!1)},{keyCode:Ce.UP,action:qe(Jx,s,!1)},{keyCode:Ce.DOWN,action:qe(Jx,s,!0)},...l?[{keyCode:Ce.UP,action:qe(Fd,s,!1),metaKey:!0,shiftKey:!0},{keyCode:Ce.DOWN,action:qe(Fd,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Ce.RIGHT,action:qe(hw,s,!0)},{keyCode:Ce.LEFT,action:qe(hw,s,!1)},{keyCode:Ce.UP,action:qe(Up,s,!1)},{keyCode:Ce.DOWN,action:qe(Up,s,!0)},{keyCode:Ce.UP,action:qe(Up,s,!1)},{keyCode:Ce.UP,action:qe(tw,s,!1)},{keyCode:Ce.DOWN,action:qe(tw,s,!0)},{keyCode:Ce.RIGHT,action:qe(sw,s,!0)},{keyCode:Ce.LEFT,action:qe(sw,s,!1)},{keyCode:Ce.UP,action:qe(aw,s,!1)},{keyCode:Ce.DOWN,action:qe(aw,s,!0)},{keyCode:Ce.RIGHT,action:qe(Ax,s,a,!0)},{keyCode:Ce.LEFT,action:qe(Ax,s,a,!1)},{keyCode:Ce.RIGHT,ctrlKey:!l,altKey:l,action:qe(TR,s,a)},{keyCode:Ce.LEFT,ctrlKey:!l,altKey:l,action:qe(RR,s,a)},{keyCode:Ce.UP,action:qe(ew,s,!1)},{keyCode:Ce.DOWN,action:qe(ew,s,!0)}],i).each(c=>{i.preventDefault()})})(n,o,r)})})(e,t),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===Ce.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===Ce.BACKSPACE?"deleteContentBackward":"deleteContentForward",d=a.selection.isCollapsed(),f=d?"character":"selection",m=b=>d?b?"word":"line":"selection";rw([{keyCode:Ce.BACKSPACE,action:qe(qx,a)},{keyCode:Ce.BACKSPACE,action:qe(Sp,a,!1)},{keyCode:Ce.DELETE,action:qe(Sp,a,!0)},{keyCode:Ce.BACKSPACE,action:qe(Cp,a,!1)},{keyCode:Ce.DELETE,action:qe(Cp,a,!0)},{keyCode:Ce.BACKSPACE,action:qe(Dp,a,i,!1)},{keyCode:Ce.DELETE,action:qe(Dp,a,i,!0)},{keyCode:Ce.BACKSPACE,action:qe(km,a,!1)},{keyCode:Ce.DELETE,action:qe(km,a,!0)},{keyCode:Ce.BACKSPACE,action:qe(Pa,a,!1,f)},{keyCode:Ce.DELETE,action:qe(Pa,a,!0,f)},...Gw?[{keyCode:Ce.BACKSPACE,altKey:!0,action:qe(Pa,a,!1,m(!0))},{keyCode:Ce.DELETE,altKey:!0,action:qe(Pa,a,!0,m(!0))},{keyCode:Ce.BACKSPACE,metaKey:!0,action:qe(Pa,a,!1,m(!1))}]:[{keyCode:Ce.BACKSPACE,ctrlKey:!0,action:qe(Pa,a,!1,m(!0))},{keyCode:Ce.DELETE,ctrlKey:!0,action:qe(Pa,a,!0,m(!0))}],{keyCode:Ce.BACKSPACE,action:qe(kp,a,!1)},{keyCode:Ce.DELETE,action:qe(kp,a,!0)},{keyCode:Ce.BACKSPACE,action:qe(Mp,a,!1)},{keyCode:Ce.DELETE,action:qe(Mp,a,!0)},{keyCode:Ce.BACKSPACE,action:qe(vp,a,!1)},{keyCode:Ce.DELETE,action:qe(vp,a,!0)},{keyCode:Ce.BACKSPACE,action:qe(bp,a,!1)},{keyCode:Ce.DELETE,action:qe(bp,a,!0)},{keyCode:Ce.BACKSPACE,action:qe(Pp,a,!1)},{keyCode:Ce.DELETE,action:qe(Pp,a,!0)},{keyCode:Ce.BACKSPACE,action:qe(Ep,a,!1)},{keyCode:Ce.DELETE,action:qe(Ep,a,!0)}],l).filter(b=>a.selection.isEditable()).each(b=>{l.preventDefault(),Kd(a,c).isDefaultPrevented()||(b(),Ql(a,c))})})(n,o,s)}),n.on("keyup",s=>{s.isDefaultPrevented()||((a,i,l)=>{Kl([{keyCode:Ce.BACKSPACE,action:qe(X1,a)},{keyCode:Ce.DELETE,action:qe(X1,a)},...Gw?[{keyCode:Ce.BACKSPACE,altKey:!0,action:qe(Vl,a)},{keyCode:Ce.DELETE,altKey:!0,action:qe(Vl,a)},...l?[{keyCode:_O?224:91,action:qe(Vl,a)}]:[]]:[{keyCode:Ce.BACKSPACE,ctrlKey:!0,action:qe(Vl,a)},{keyCode:Ce.DELETE,ctrlKey:!0,action:qe(Vl,a)}]],i)})(n,s,r),r=!1})})(e,t),(n=>{let o=k.none();n.on("keydown",r=>{r.keyCode===Ce.ENTER&&(FO&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(re(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(s=>{o=k.some(s.selection.getBookmark()),s.undoManager.add()})(n):dS(n,r))}),n.on("keyup",r=>{r.keyCode===Ce.ENTER&&o.each(()=>((s,a)=>{s.undoManager.undo(),o.fold(Ee,i=>s.selection.moveToBookmark(i)),dS(s,a),o=k.none()})(n,r))})})(e),(n=>{n.on("keydown",o=>{o.isDefaultPrevented()||((r,s)=>{rw([{keyCode:Ce.SPACEBAR,action:qe(zO,r)},{keyCode:Ce.SPACEBAR,action:qe(UO,r)}],s).each(a=>{s.preventDefault(),Kd(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),Ql(r,"insertText",{data:" "}))})})(n,o)})})(e),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=B(r.getBody());r.selection.isCollapsed()&&kA(s,G.fromRangeStart(r.selection.getRng()),r.schema).each(a=>{r.selection.setRng(a.toRange())})})(n)})})(e),(n=>{n.on("keydown",o=>{o.isDefaultPrevented()||((r,s)=>{Kl([...HO(r)],s).each(a=>{s.preventDefault()})})(n,o)})})(e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=gt.os.isMacOS()||gt.os.isiOS();Kl([{keyCode:Ce.END,action:qe(Zx,s,!0)},{keyCode:Ce.HOME,action:qe(Zx,s,!1)},...l?[]:[{keyCode:Ce.HOME,action:qe(Fd,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Ce.END,action:qe(Fd,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Ce.END,action:qe(iw,s,!0)},{keyCode:Ce.HOME,action:qe(iw,s,!1)},{keyCode:Ce.END,action:qe(Id,s,!0,a)},{keyCode:Ce.HOME,action:qe(Id,s,!1,a)}],i).each(c=>{i.preventDefault()})})(n,o,r)})})(e,t),((n,o)=>{if(jO.os.isMacOS())return;const r=mn(!1);n.on("keydown",s=>{fS(s)&&mS(r,n,!0)}),n.on("keyup",s=>{s.isDefaultPrevented()||((a,i,l)=>{Kl([{keyCode:Ce.PAGE_UP,action:qe(Id,a,!1,i)},{keyCode:Ce.PAGE_DOWN,action:qe(Id,a,!0,i)}],l)})(n,o,s),fS(s)&&r.get()&&(mS(r,n,!1),n.nodeChanged())})})(e,t),t}};class $O{constructor(t){let n;this.lastPath=[],this.editor=t;const o=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",r=>{const s=t.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};r.type!=="nodechange"&&nm(a,n)||t.dispatch("SelectionChange"),n=a}),t.on("contextmenu",()=>{ed(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const r=t.selection.getStart(!0);r&&Yc(t)&&!o.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",r=>{!r.isDefaultPrevented()&&Yc(t)&&(t.selection.getNode().nodeName==="IMG"?Mo.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor,o=n.selection;let r;if(n.initialized&&o&&!z_(n)&&!Hc(n)){const s=n.getBody();r=o.getStart(!0)||s,r.ownerDocument===n.getDoc()&&n.dom.isChildOf(r,s)||(r=s);const a=[];n.dom.getParent(r,i=>i===s||(a.push(i),!1)),n.dispatch("NodeChange",{...t,element:r,parents:a})}}isSameElementPath(t){let n;const o=this.editor,r=tr(o.dom.getParents(t,zt,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=r,!0}return this.lastPath=r,!1}}const yS=il("image"),fg=il("event"),Zd=e=>t=>{t[fg]=e},CS=Zd(0),WO=Zd(2),VO=Zd(1),KO=e=>{const t=e;return k.from(t[fg]).exists(n=>n===0)},mg=il("mode"),eu=e=>t=>{t[mg]=e},xS=(e,t)=>eu(t)(e),wS=eu(0),pg=eu(2),XO=eu(1),SS=e=>t=>{const n=t;return k.from(n[mg]).exists(o=>o===e)},Ai=SS(0),ES=SS(1),YO=["none","copy","link","move"],GO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],gg=()=>{const e=new window.DataTransfer;let t="move",n="all";const o={get dropEffect(){return t},set dropEffect(r){Te(YO,r)&&(t=r)},get effectAllowed(){return n},set effectAllowed(r){KO(o)&&Te(GO,r)&&(n=r)},get items(){return((r,s)=>({...s,get length(){return s.length},add:(a,i)=>{if(Ai(r)){if(!Ae(a))return s.add(a);if(!Ft(i))return s.add(a,i)}return null},remove:a=>{Ai(r)&&s.remove(a)},clear:()=>{Ai(r)&&s.clear()}}))(o,e.items)},get files(){return ES(o)?Object.freeze({length:0,item:r=>null}):e.files},get types(){return e.types},setDragImage:(r,s,a)=>{var i;Ai(o)&&(i={image:r,x:s,y:a},o[yS]=i,e.setDragImage(r,s,a))},getData:r=>ES(o)?"":e.getData(r),setData:(r,s)=>{Ai(o)&&e.setData(r,s)},clearData:r=>{Ai(o)&&e.clearData(r)}};return wS(o),o},kS=(e,t)=>e.setData("text/html",t),_S="x-tinymce/html",tu=fe(_S),hg="<!-- "+_S+" -->",QO=e=>hg+e,NS=e=>e.indexOf(hg)!==-1,AS="%MCEPASTEBIN%",bg=e=>e.dom.get("mcepastebin"),JO=e=>le(e)&&e.id==="mcepastebin",TS=e=>e===AS,RS=(e,t)=>(ce.each(t,n=>{e=So(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])}),e),OS=e=>RS(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,o)=>n||o?rn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),BS=(e,t)=>({content:e,cancelled:t}),vg=(e,t)=>(e.insertContent(t,{merge:rN(e),paste:!0}),!0),yg=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),ZO=(e,t,n)=>!(e.selection.isCollapsed()||!yg(t))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),!0))(e,t,n),eB=(e,t,n)=>!!((o,r)=>yg(r)&&kt(q0(o),s=>Zs(r.toLowerCase(),`.${s.toLowerCase()}`)))(e,t)&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(e,t,n),tB=(()=>{let e=0;return()=>"mceclip"+e++})(),nB=e=>{const t=gg();return kS(t,e),pg(t),t},DS=(e,t,n,o,r)=>{const s=((a,i,l)=>((c,d,f)=>{const m=((g,v,h)=>g.dispatch("PastePreProcess",{content:v,internal:h}))(c,d,f),b=((g,v)=>{const h=vi({sanitize:H0(g),sandbox_iframes:$0(g),sandbox_iframes_exclusions:wf(g),convert_unsafe_embeds:yN(g)},g.schema);h.addNodeFilter("meta",S=>{ce.each(S,E=>{E.remove()})});const C=h.parse(v,{forced_root_block:!1,isRootContent:!0});return Is({validate:!0},g.schema).serialize(C)})(c,m.content);return c.hasEventListeners("PastePostProcess")&&!m.isDefaultPrevented()?((g,v,h)=>{const C=g.dom.create("div",{style:"display:none"},v),S=((E,A,N)=>E.dispatch("PastePostProcess",{node:A,internal:N}))(g,C,h);return BS(S.node.innerHTML,S.isDefaultPrevented())})(c,b,f):BS(b,m.isDefaultPrevented())})(a,i,l))(e,t,n);if(!s.cancelled){const a=s.content,i=()=>((l,c,d)=>{d||!sN(l)?vg(l,c):((f,m)=>{ce.each([ZO,eB,vg],b=>!b(f,m,vg))})(l,c)})(e,a,o);r?Kd(e,"insertFromPaste",{dataTransfer:nB(a)}).isDefaultPrevented()||(i(),Ql(e,"insertFromPaste")):i()}},nu=(e,t,n,o)=>{const r=n||NS(t);DS(e,(s=>s.replace(hg,""))(t),r,!1,o)},Cg=(e,t,n)=>{const o=e.dom.encode(t).replace(/\r\n/g,`
`),r=((s,a,i)=>{const l=s.split(/\n\n/),c=((m,b)=>{let g="<"+m;const v=_r(b,(h,C)=>C+'="'+da.encodeAllRaw(h)+'"');return v.length&&(g+=" "+v.join(" ")),g+">"})(a,i),d="</"+a+">",f=ot(l,m=>m.split(/\n/).join("<br />"));return f.length===1?f[0]:ot(f,m=>c+m+d).join("")})(Vg(o,iN(e)),Fn(e),pl(e));DS(e,r,!1,!0,n)},PS=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const o=e.types[n];try{t[o]=e.getData(o)}catch{t[o]=""}}return t},Hs=(e,t)=>t in e&&e[t].length>0,LS=e=>Hs(e,"text/html")||Hs(e,"text/plain"),MS=(e,t,n)=>{const o=t.type==="paste"?t.clipboardData:t.dataTransfer;var r;if(Uc(e)&&o){const s=((a,i)=>{const l=i.items?Qt(bn(i.items),d=>d.kind==="file"?[d.getAsFile()]:[]):[],c=i.files?bn(i.files):[];return Ke(l.length>0?l:c,(d=>{const f=q0(d);return m=>Kt(m.type,"image/")&&kt(f,b=>(g=>{const v=g.toLowerCase(),h={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return ce.hasOwn(h,v)?"image/"+h[v]:"image/"+v})(b)===m.type)})(a))})(e,o);if(s.length>0)return t.preventDefault(),(r=s,Promise.all(ot(r,a=>bC(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&e.selection.setRng(n),J(a,i=>{((l,c)=>{Km(c.uri).each(({data:d,type:f,base64Encoded:m})=>{const b=m?d:btoa(d),g=c.file,v=l.editorUpload.blobCache,h=v.getByData(b,f),C=h??((S,E,A,N)=>{const R=tB(),M=R0(S)&&le(A.name),P=M?((D,L)=>{const j=L.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return le(j)?D.dom.encode(j[1]):void 0})(S,A.name):R,z=M?A.name:void 0,V=E.create(R,A,N,P,z);return E.add(V),V})(l,v,g,b);nu(l,`<img src="${C.blobUri()}">`,!1,!0)})})(e,i)})}),!0}return!1},xg=(e,t,n,o,r)=>{let s=OS(n);const a=Hs(t,tu())||NS(n),i=!a&&(c=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c))(s),l=yg(s);(TS(s)||!s.length||i&&!l)&&(o=!0),(o||l)&&(s=Hs(t,"text/plain")&&i?t["text/plain"]:(c=>{const d=Rs(),f=vi({},d);let m="";const b=d.getVoidElements(),g=ce.makeMap("script noscript style textarea video audio iframe object"," "),v=d.getBlockElements(),h=C=>{const S=C.name,E=C;if(S!=="br"){if(S!=="wbr")if(b[S]&&(m+=" "),g[S])m+=" ";else{if(C.type===3&&(m+=C.value),!(C.name in d.getVoidElements())){let A=C.firstChild;if(A)do h(A);while(A=A.next)}v[S]&&E.next&&(m+=`
`,S==="p"&&(m+=`
`))}}else m+=`
`};return c=RS(c,[/<!\[[^\]]+\]>/g]),h(f.parse(c)),m})(s)),TS(s)||(o?Cg(e,s,r):nu(e,s,a,r))},oB=(e,t,n)=>{((o,r,s)=>{let a;o.on("keydown",i=>{(l=>Ce.metaKeyPressed(l)&&l.keyCode===86||l.shiftKey&&l.keyCode===45)(i)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&i.keyCode===86)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(d=>{var f,m;return gt.os.isAndroid()&&((m=(f=d.clipboardData)===null||f===void 0?void 0:f.items)===null||m===void 0?void 0:m.length)===0})(i))return;const l=s.get()==="text"||a;a=!1;const c=PS(i.clipboardData);!LS(c)&&MS(o,i,r.getLastRng()||o.selection.getRng())||(Hs(c,"text/html")?(i.preventDefault(),xg(o,c,c["text/html"],l,!0)):Hs(c,"text/plain")&&Hs(c,"text/uri-list")?(i.preventDefault(),xg(o,c,c["text/plain"],l,!0)):(r.create(),Mo.setEditorTimeout(o,()=>{const d=r.getHtml();r.remove(),xg(o,c,d,l,!1)},0)))})})(e,t,n),(o=>{const r=a=>Kt(a,"webkit-fake-url"),s=a=>Kt(a,"data:");o.parser.addNodeFilter("img",(a,i,l)=>{if(!Uc(o)&&(c=>{var d;return((d=c.data)===null||d===void 0?void 0:d.paste)===!0})(l))for(const c of a){const d=c.attr("src");Ae(d)&&!c.attr("data-mce-object")&&d!==gt.transparentSrc&&(r(d)||!lN(o)&&s(d))&&c.remove()}})})(e)},IS=(e,t,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(tu(),s),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},FS=e=>(t,n)=>{const{dom:o,selection:r}=e,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},t);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(e.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),Mo.setEditorTimeout(e,()=>{r.setRng(i),o.remove(s),n()},0)},jS=e=>({html:QO(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),zS=e=>!e.selection.isCollapsed()||(t=>!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()))(e),US=(e,t)=>{var n,o;return Ea.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(o=t.clientY)!==null&&o!==void 0?o:0,e.getDoc())},HS=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},rB=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,qS=e=>ce.trim(e).replace(rB,Zi).toLowerCase(),sB=(e,t,n)=>{const o=nN(e);if(n||o==="all"||!oN(e))return t;const r=o?o.split(/[, ]/):[];if(r&&o!=="none"){const s=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,d)=>{const f=s.parseStyle(s.decode(c)),m={};for(let g=0;g<r.length;g++){const v=f[r[g]];let h=v,C=s.getStyle(a,r[g],!0);/color/.test(r[g])&&(h=qS(h),C=qS(C)),C!==h&&(m[r[g]]=v)}const b=s.serializeStyle(m,"span");return b?l+' style="'+b+'"'+d:l+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l),t},aB=e=>{const t=mn(!1),n=mn(aN(e)?"text":"html"),o=(r=>{const s=mn(null);return{create:()=>((a,i)=>{const{dom:l,selection:c}=a,d=a.getBody();i.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},AS);gt.browser.isFirefox()&&l.setStyle(f,"left",l.getStyle(d,"direction",!0)==="rtl"?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),f.focus(),c.select(f,!0)})(r,s),remove:()=>((a,i)=>{const l=a.dom;if(bg(a)){let c;const d=i.get();for(;c=bg(a);)l.remove(c),l.unbind(c);d&&a.selection.setRng(d)}i.set(null)})(r,s),getEl:()=>bg(r),getHtml:()=>(a=>{const i=a.dom,l=(m,b)=>{m.appendChild(b),i.remove(b,!0)},[c,...d]=Ke(a.getBody().childNodes,JO);J(d,m=>{l(c,m)});const f=i.select("div[id=mcepastebin]",c);for(let m=f.length-1;m>=0;m--){const b=i.create("div");c.insertBefore(b,f[m]),l(b,f[m])}return c?c.innerHTML:""})(r),getLastRng:s.get}})(e);(r=>{(gt.browser.isChromium()||gt.browser.isSafari())&&((s,a)=>{s.on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})})(r,sB)})(e),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{i.get()==="text"?(i.set("html"),E0(a,!1)):(i.set("text"),E0(a,!0)),a.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&nu(r,i.html,i.internal,!1),i.text&&Cg(r,i.text,!1)})})(e,n),(r=>{const s=l=>c=>{l(r,c)},a=Z_(r);bt(a)&&r.on("PastePreProcess",s(a));const i=eN(r);bt(i)&&r.on("PastePostProcess",s(i))})(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>n.get()==="text"),e.on("PreInit",()=>{(r=>{r.on("cut",(s=>a=>{!a.isDefaultPrevented()&&zS(s)&&s.selection.isEditable()&&IS(a,jS(s),FS(s),()=>{if(gt.browser.isChromium()||gt.browser.isFirefox()){const i=s.selection.getRng();Mo.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>a=>{!a.isDefaultPrevented()&&zS(s)&&IS(a,jS(s),FS(s),Ee)})(r))})(e),((r,s)=>{J_(r)&&r.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Uc(r)||r.on("drop",a=>{const i=a.dataTransfer;i&&(l=>kt(l.files,c=>/^image\//.test(c.type)))(i)&&a.preventDefault()}),r.on("drop",a=>{if(a.isDefaultPrevented())return;const i=US(r,a);if(wt(i))return;const l=PS(a.dataTransfer),c=Hs(l,tu());if((!LS(l)||(g=>{const v=g["text/plain"];return!!v&&v.indexOf("file://")===0})(l))&&MS(r,a,i))return;const d=l[tu()],f=d||l["text/html"]||l["text/plain"],m=((g,v,h,C)=>{const S=g.getParent(h,E=>la(v,E));if(!Je(g.getParent(h,"summary")))return!0;if(S&&Fe(C,"text/html")){const E=new DOMParser().parseFromString(C["text/html"],"text/html").body;return!Je(E.querySelector(S.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,i.startContainer,l),b=s.get();b&&!m||f&&(a.preventDefault(),Mo.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{(d||b&&m)&&r.execCommand("Delete"),HS(r,i);const g=OS(f);l["text/html"]?nu(r,g,c,!0):Cg(r,g,!0)})}))}),r.on("dragstart",a=>{s.set(!0)}),r.on("dragover dragend",a=>{Uc(r)&&!s.get()&&(a.preventDefault(),HS(r,US(r,a))),a.type==="dragend"&&s.set(!1)}),(a=>{a.on("input",i=>{const l=c=>Je(c.querySelector("summary"));if(i.inputType==="deleteByDrag"){const c=Ke(a.dom.select("details"),l);J(c,d=>{Ut(d.firstChild)&&d.firstChild.remove();const f=a.dom.create("summary");f.appendChild(ni().dom),d.prepend(f)})}})})(r)})(e,t),oB(e,o,n)})},iB=Ut,$S=re,lB=e=>Dt(e.dom),WS=e=>t=>Ie(B(e),t),VS=(e,t)=>qn(B(e),lB,WS(t)),KS=(e,t,n)=>{const o=new fn(e,t),r=n?o.next.bind(o):o.prev.bind(o);let s=e;for(let a=n?e:r();a&&!iB(a);a=r())mr(a)&&(s=a);return s},cB=e=>{const t=((n,o,r)=>{const s=G.fromRangeStart(n).getNode(),a=((d,f,m)=>qn(B(d),b=>(g=>Yo(g.dom))(b)||m.isBlock(ft(b)),WS(f)).getOr(B(f)).dom)(s,o,r),i=KS(s,a,!1),l=KS(s,a,!0),c=document.createRange();return VS(i,a).fold(()=>{$S(i)?c.setStart(i,0):c.setStartBefore(i)},d=>c.setStartBefore(d.dom)),VS(l,a).fold(()=>{$S(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)},d=>c.setEndAfter(d.dom)),c})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Om(t))};var Ti;(function(e){e.Before="before",e.After="after"})(Ti||(Ti={}));const dB=(e,t)=>Math.abs(e.left-t),uB=(e,t)=>Math.abs(e.right-t),fB=(e,t)=>(n=>hn(n,(o,r)=>o.fold(()=>k.some(r),s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),c=Math.max(r.bottom,s.bottom);return k.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}),k.none()))(Ke(e,n=>{return(o=t)>=(r=n).top&&o<=r.bottom;var o,r})).fold(()=>[[],e],n=>{const{pass:o,fail:r}=qo(e,s=>((a,i)=>{const l=((c,d)=>Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top)))(a,i)/Math.min(a.height,i.height);return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(a,i)&&l>.5})(s,n));return[o,r]}),mB=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),wg=(e,t,n,o)=>{const r=d=>mr(d.node)?k.some(d):ke(d.node)?wg(bn(d.node.childNodes),t,n,!1):k.none(),s=(d,f)=>{const m=Kr(d,(b,g)=>f(b,t,n)-f(g,t,n));return Gn(m,r).map(b=>o&&!re(b.node)&&m.length>1?((g,v,h)=>r(v).filter(C=>Math.abs(h(g,t,n)-h(C,t,n))<2&&re(C.node)))(b,m[1],f).getOr(b):b)},[a,i]=fB(yx(e),n),{pass:l,fail:c}=qo(i,d=>d.top<n);return s(a,mB).orThunk(()=>s(c,$h)).orThunk(()=>s(l,$h))},XS=(e,t,n)=>((o,r,s)=>{const a=B(o),i=Mt(a),l=en(i,r,s).filter(c=>En(a,c)).getOr(a);return((c,d,f,m)=>{const b=(g,v)=>{const h=Ke(g.dom.childNodes,vr(C=>ke(C)&&C.classList.contains("mce-drag-container")));return v.fold(()=>wg(h,f,m,!0),C=>{const S=Ke(h,E=>E!==C.dom);return wg(S,f,m,!0)}).orThunk(()=>(Ie(g,c)?k.none():so(g)).bind(C=>b(C,k.some(g))))};return b(d,k.none())})(a,l,r,s)})(e,t,n).filter(o=>bl(o.node)).map(o=>((r,s)=>({node:r.node,position:dB(r,s)<uB(r,s)?Ti.Before:Ti.After}))(o,t)),YS=e=>{var t,n;const o=e.getBoundingClientRect(),r=e.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+((t=a?.scrollY)!==null&&t!==void 0?t:0)-s.clientTop,left:o.left+((n=a?.scrollX)!==null&&n!==void 0?n:0)-s.clientLeft}},GS=e=>({target:e,srcElement:e}),pB=(e,t,n,o)=>{const r=((s,a)=>{const i=(l=>{const c=gg(),d=(f=>{const m=f;return k.from(m[mg])})(l);return pg(l),CS(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(f=>{const m=f;return k.from(m[yS])})(l).each(f=>c.setDragImage(f.image,f.x,f.y)),J(l.types,f=>{f!=="Files"&&c.setData(f,l.getData(f))}),J(l.files,f=>c.items.add(f)),(f=>{const m=f;return k.from(m[fg])})(l).each(f=>{((m,b)=>{Zd(b)(m)})(c,f)}),d.each(f=>{xS(l,f),xS(c,f)}),c})(s);return a==="dragstart"?(CS(i),wS(i)):a==="drop"?(WO(i),pg(i)):(VO(i),XO(i)),i})(n,e);return Ft(o)?((s,a,i)=>{const l=po("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:Ee,stopImmediatePropagation:Ee,stopPropagation:Ee,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...GS(a)}})(e,t,r):((s,a,i,l)=>({...a,dataTransfer:l,type:s,...GS(i)}))(e,o,t,r)},QS=Dt,gB=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(QS,Yo),hB=(e,t,n,o)=>{const r=e.dom,s=t.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},ou=(e,t)=>n=>()=>{const o=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:o+t,behavior:"smooth"})},JS=ou("left",-32),ZS=ou("left",32),eE=ou("top",-32),tE=ou("top",32),nE=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},tc=(e,t,n,o,r)=>{t==="dragstart"&&kS(o,e.dom.getOuterHTML(n));const s=pB(t,n,o,r);return e.dispatch(t,s)},bB=(e,t)=>{const n=Rc((r,s)=>((a,i,l)=>{a._selectionOverrides.hideFakeCaret(),XS(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),c=>{const d=a._selectionOverrides.showCaret(1,c.node,c.position===Ti.Before,!1);d?a.selection.setRng(d):a.selection.placeCaretAt(i,l)})})(t,r,s),0);t.on("remove",n.cancel);const o=e;return r=>e.on(s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){const c=tc(t,"dragstart",s.element,s.dataTransfer,r);if(le(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,t.focus()}if(s.dragging){const c=r.currentTarget===t.getDoc().documentElement,d=((f,m)=>({pageX:m.pageX-f.relX,pageY:m.pageY+5}))(s,((f,m)=>{return b=(h=>h.inline?YS(h.getBody()):{left:0,top:0})(f),g=(h=>{const C=h.getBody();return h.inline?{left:C.scrollLeft,top:C.scrollTop}:{left:0,top:0}})(f),v=((h,C)=>{if(C.target.ownerDocument!==h.getDoc()){const S=YS(h.getContentAreaContainer()),E=(A=>{const N=A.getBody(),R=A.getDoc().documentElement,M={left:N.scrollLeft,top:N.scrollTop},P={left:N.scrollLeft||R.scrollLeft,top:N.scrollTop||R.scrollTop};return A.inline?M:P})(h);return{left:C.pageX-S.left+E.left,top:C.pageY-S.top+E.top}}return{left:C.pageX,top:C.pageY}})(f,m),{pageX:v.left-b.left+g.left,pageY:v.top-b.top+g.top};var b,g,v})(t,r));i=s.ghost,l=t.getBody(),i.parentNode!==l&&l.appendChild(i),((f,m,b,g,v,h,C,S,E,A,N,R)=>{let M=0,P=0;f.style.left=m.pageX+"px",f.style.top=m.pageY+"px",m.pageX+b>v&&(M=m.pageX+b-v),m.pageY+g>h&&(P=m.pageY+g-h),f.style.width=b-M+"px",f.style.height=g-P+"px";const z=E.clientHeight,V=E.clientWidth,D=C+E.getBoundingClientRect().top,L=S+E.getBoundingClientRect().left;N.on(j=>{j.intervalId.clear(),j.dragging&&R&&(C+8>=z?j.intervalId.set(tE(A)):C-8<=0?j.intervalId.set(eE(A)):S+8>=V?j.intervalId.set(ZS(A)):S-8<=0?j.intervalId.set(JS(A)):D+16>=window.innerHeight?j.intervalId.set(tE(window)):D-16<=0?j.intervalId.set(eE(window)):L+16>=window.innerWidth?j.intervalId.set(ZS(window)):L-16<=0&&j.intervalId.set(JS(window)))})})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,t.getContentAreaContainer(),t.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var i,l})},oE=(e,t,n)=>{e.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>tc(t,"dragend",o.element,o.dataTransfer),r=>tc(t,"dragend",o.element,o.dataTransfer,r))}),rE(e)},rE=e=>{e.on(t=>{t.intervalId.clear(),nE(t.ghost)}),e.clear()},vB=e=>{const t=os(),n=Bt.DOM,o=document,r=((l,c)=>d=>{if((f=>f.button===0)(d)){const f=Gt(c.dom.getParents(d.target),gB).getOr(null);if(le(f)&&((m,b,g)=>QS(g)&&g!==b&&m.isEditable(g.parentElement))(c.dom,c.getBody(),f)){const m=c.dom.getPos(f),b=c.getBody(),g=c.getDoc().documentElement;l.set({element:f,dataTransfer:gg(),dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?b.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?b.scrollHeight:g.offsetHeight)-2,relX:d.pageX-m.x,relY:d.pageY-m.y,width:f.offsetWidth,height:f.offsetHeight,ghost:hB(c,f,f.offsetWidth,f.offsetHeight),intervalId:yk(100)})}}})(t,e),s=bB(t,e),a=((l,c)=>d=>{l.on(f=>{var m;if(f.intervalId.clear(),f.dragging){if(((b,g,v)=>!wt(g)&&g!==v&&!b.dom.isChildOf(g,v)&&b.dom.isEditable(g))(c,(b=>{const g=b.getSel();if(le(g)){const v=g.getRangeAt(0).startContainer;return re(v)?v.parentNode:v}return null})(c.selection),f.element)){const b=(m=c.getDoc().elementFromPoint(d.clientX,d.clientY))!==null&&m!==void 0?m:c.getBody();tc(c,"drop",b,f.dataTransfer,d).isDefaultPrevented()||c.undoManager.transact(()=>{((g,v)=>{const h=g.getParent(v.parentNode,g.isBlock);nE(v),h&&h!==g.getRoot()&&g.isEmpty(h)&&Os(B(h))})(c.dom,f.element),(g=>{const v=g.getData("text/html");return v===""?k.none():k.some(v)})(f.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}tc(c,"dragend",c.getBody(),f.dataTransfer,d)}}),rE(l)})(t,e),i=((l,c)=>d=>oE(l,c,k.some(d)))(t,e);e.on("mousedown",r),e.on("mousemove",s),e.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),e.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)}),e.on("keydown",l=>{l.keyCode===Ce.ESC&&oE(t,e,k.none())})},nc=Dt,sE=(e,t)=>Na(e.getBody(),t),yB=e=>{const t=e.selection,n=e.dom,o=e.getBody(),r=NN(e,o,n.isBlock,()=>hi(e)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=h=>h!==o&&(nc(h)||Br(h))&&n.isChildOf(h,o)&&n.isEditable(h.parentNode),c=(h,C,S,E=!0)=>e.dispatch("ShowCaret",{target:C,direction:h,before:S}).isDefaultPrevented()?null:(E&&t.scrollIntoView(C,h===-1),r.show(S,C)),d=h=>Oo(h)||Dc(h)||Pc(h),f=h=>d(h.startContainer)||d(h.endContainer),m=h=>{const C=e.schema.getVoidElements(),S=n.createRng(),E=h.startContainer,A=h.startOffset,N=h.endContainer,R=h.endOffset;return Fe(C,E.nodeName.toLowerCase())?A===0?S.setStartBefore(E):S.setStartAfter(E):S.setStart(E,A),Fe(C,N.nodeName.toLowerCase())?R===0?S.setEndBefore(N):S.setEndAfter(N):S.setEnd(N,R),S},b=(h,C)=>{if(!h)return null;if(h.collapsed){if(!f(h)){const N=C?1:-1,R=xl(N,o,h),M=R.getNode(!C);if(le(M)){if(bl(M))return c(N,M,!!C&&!R.isAtEnd(),!1);if(Bs(M)&&Dt(M.nextSibling)){const z=n.createRng();return z.setStart(M,0),z.setEnd(M,0),z}}const P=R.getNode(C);if(le(P)){if(bl(P))return c(N,P,!C&&!R.isAtEnd(),!1);if(Bs(P)&&Dt(P.previousSibling)){const z=n.createRng();return z.setStart(P,1),z.setEnd(P,1),z}}}return null}let S=h.startContainer,E=h.startOffset;const A=h.endOffset;if(re(S)&&E===0&&nc(S.parentNode)&&(S=S.parentNode,E=n.nodeIndex(S),S=S.parentNode),!ke(S))return null;if(A===E+1&&S===h.endContainer){const N=S.childNodes[E];if(l(N))return(R=>{const M=R.cloneNode(!0),P=e.dispatch("ObjectSelected",{target:R,targetClone:M});if(P.isDefaultPrevented())return null;const z=((D,L)=>{const j=B(e.getBody()),Q=e.getDoc(),ie=es(j,"#"+s).getOrThunk(()=>{const Ne=me('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Q);return Jt(Ne,"id",s),at(j,Ne),Ne}),oe=n.createRng();vt(ie),ut(ie,[lt(rn,Q),B(L),lt(rn,Q)]),oe.setStart(ie.dom.firstChild,1),oe.setEnd(ie.dom.lastChild,0),I(ie,{top:n.getPos(D,e.getBody()).y+"px"}),Ub(ie);const we=t.getSel();return we&&(we.removeAllRanges(),we.addRange(oe)),oe})(R,P.targetClone),V=B(R);return J(Mn(B(e.getBody()),`*[${a}]`),D=>{Ie(V,D)||p(D,a)}),n.getAttrib(R,a)||R.setAttribute(a,"1"),i=R,v(),z})(N)}return null},g=()=>{i&&i.removeAttribute(a),es(B(e.getBody()),"#"+s).each(Pe),i=null},v=()=>{r.hide()};return jr(e)||(e.on("click",h=>{n.isEditable(h.target)||(h.preventDefault(),e.focus())}),e.on("blur NewBlock",g),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",h=>{const C=h.target,S=sE(e,C);nc(S)?(h.preventDefault(),ql(e,S).each(b)):l(C)&&ql(e,C).each(b)},!0),e.on("mousedown",h=>{const C=h.target;if(C!==o&&C.nodeName!=="HTML"&&!n.isChildOf(C,o)||!((E,A,N)=>{const R=B(E.getBody()),M=E.inline?R:B(Mt(R).dom.documentElement),P=((z,V,D,L)=>{const j=(Q=>Q.dom.getBoundingClientRect())(V);return{x:D-(z?j.left+V.dom.clientLeft+WT(V):0),y:L-(z?j.top+V.dom.clientTop+$T(V):0)}})(E.inline,M,A,N);return((z,V,D)=>{const L=HT(z),j=qT(z);return V>=0&&D>=0&&V<=L&&D<=j})(M,P.x,P.y)})(e,h.clientX,h.clientY))return;g(),v();const S=sE(e,C);nc(S)?(h.preventDefault(),ql(e,S).each(b)):XS(o,h.clientX,h.clientY).each(E=>{var A;h.preventDefault(),(A=c(1,E.node,E.position===Ti.Before,!1))&&t.setRng(A),Rr(S)?S.focus():e.getBody().focus()})}),e.on("keypress",h=>{Ce.modifierPressed(h)||nc(t.getNode())&&h.preventDefault()}),e.on("GetSelectionRange",h=>{let C=h.range;if(i){if(!i.parentNode)return void(i=null);C=C.cloneRange(),C.selectNode(i),h.range=C}}),e.on("SetSelectionRange",h=>{h.range=m(h.range);const C=b(h.range,h.forward);C&&(h.range=C)}),e.on("AfterSetSelectionRange",h=>{const C=h.range,S=C.startContainer.parentElement;var E;f(C)||ke(E=S)&&E.id==="mcepastebin"||v(),(A=>le(A)&&n.hasClass(A,"mce-offscreen-selection"))(S)||g()}),(h=>{vB(h),q_(h)&&(C=>{const S=N=>{if(!N.isDefaultPrevented()){const R=N.dataTransfer;R&&(Te(R.types,"Files")||R.files.length>0)&&(N.preventDefault(),N.type==="drop"&&Td(C,"Dropped file type is not supported"))}},E=N=>{td(C,N.target)&&S(N)},A=()=>{const N=Bt.DOM,R=C.dom,M=document,P=C.inline?C.getBody():C.getDoc(),z=["drop","dragover"];J(z,V=>{N.bind(M,V,E),R.bind(P,V,S)}),C.on("remove",()=>{J(z,V=>{N.unbind(M,V,E),R.unbind(P,V,S)})})};C.on("init",()=>{Mo.setEditorTimeout(C,A,0)})})(h)})(e),(h=>{const C=Rc(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const S=h.selection.getRng();if(S.collapsed){const E=yp(h,S,!1);h.selection.setRng(E)}}},0);h.on("focus",()=>{C.throttle()}),h.on("blur",()=>{C.cancel()})})(e),(h=>{h.on("init",()=>{h.on("focusin",C=>{const S=C.target;if(Br(S)){const E=Na(h.getBody(),S),A=Dt(E)?E:S;h.selection.getNode()!==A&&ql(h,A).each(N=>h.selection.setRng(N))}})})})(e)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&(sf(h),t.scrollIntoView(h))},hideFakeCaret:v,destroy:()=>{r.destroy(),i=null}}},CB=(e,t)=>{let n=t;for(let o=e.previousSibling;re(o);o=o.previousSibling)n+=o.data.length;return n},aE=(e,t,n,o,r)=>{if(re(n)&&(o<0||o>n.data.length))return[];const s=r&&re(n)?[CB(n,o)]:[o];let a=n;for(;a!==t&&a.parentNode;)s.push(e.nodeIndex(a,r)),a=a.parentNode;return a===t?s.reverse():[]},Sg=(e,t,n,o,r,s,a=!1)=>({start:aE(e,t,n,o,a),end:aE(e,t,r,s,a)}),iE=(e,t)=>{const n=t.slice(),o=n.pop();return x(o)?hn(n,(r,s)=>r.bind(a=>k.from(a.childNodes[s])),k.some(e)).bind(r=>re(r)&&(o<0||o>r.data.length)?k.none():k.some({node:r,offset:o})):k.none()},lE=(e,t)=>iE(e,t.start).bind(({node:n,offset:o})=>iE(e,t.end).map(({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})),Ri=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const o=t.parentNode;e.remove(t,re(t.firstChild)&&Qa(t.firstChild.data)),Ri(e,o,n)}},ru=(e,t,n,o=!0)=>{const r=t.startContainer.parentNode,s=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(re(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),re(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Ri(e,r,n),r!==s&&Ri(e,s,n))},su=(e,t)=>k.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),Eg=(e,t,n)=>{const o=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:h0(o).concat(e.blockPatterns),inlinePatterns:b0(o).concat(e.inlinePatterns)}},kg=(e,t,n,o)=>{const r=e.createRng();return r.setStart(t,0),r.setEnd(n,o),r.toString()},cE=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),au=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},dE=(e,t,n)=>{const o=lE(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=o.endOffset===0?s:s.splitText(o.endOffset),i=o.startOffset===0?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:t,end:a.parentNode.insertBefore(cE(e,t+"-end"),a),start:l.insertBefore(cE(e,t+"-start"),i)}},uE=(e,t,n)=>{Ri(e,e.get(t.prefix+"-end"),n),Ri(e,e.get(t.prefix+"-start"),n)},_g=e=>e.start.length===0,fE=(e,t,n,o)=>{const r=t.start;var s;return $p(e,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),d=l.lastIndexOf(s);return d!==-1?d+s.length:c!==-1?c+1:-1}),n).bind(a=>{var i,l;const c=(l=(i=n.textContent)===null||i===void 0?void 0:i.indexOf(r))!==null&&l!==void 0?l:-1;if(c!==-1&&a.offset>=c+r.length){const d=e.createRng();return d.setStart(a.container,a.offset-r.length),d.setEnd(a.container,a.offset),k.some(d)}{const d=a.offset-r.length;return qp(a.container,d,n).map(f=>{const m=e.createRng();return m.setStart(f.container,f.offset),m.setEnd(a.container,a.offset),m}).filter(f=>f.toString()===r).orThunk(()=>fE(e,t,n,hr(a.container,0)))}})},xB=(e,t,n,o)=>{const r=e.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return qp(i,l-n.pattern.end.length,t).bind(c=>{const d=Sg(r,s,c.container,c.offset,i,l,o);if(_g(a))return k.some({matches:[{pattern:a,startRng:d,endRng:d}],position:c});{const f=iu(e,n.remainingPatterns,c.container,c.offset,t,o),m=f.getOr({matches:[],position:c}),b=m.position;return((v,h,C,S,E,A=!1)=>{if(h.start.length===0&&!A){const N=v.createRng();return N.setStart(C,S),N.setEnd(C,S),k.some(N)}return Hp(C,S,E).bind(N=>fE(v,h,E,N).bind(R=>{var M;return A&&(R.endContainer===N.container&&R.endOffset===N.offset||N.offset===0&&((M=R.endContainer.textContent)===null||M===void 0?void 0:M.length)===R.endOffset)?k.none():k.some(R)}))})(r,a,b.container,b.offset,t,f.isNone()).map(v=>{const h=((C,S,E,A=!1)=>Sg(C,S,E.startContainer,E.startOffset,E.endContainer,E.endOffset,A))(r,s,v,o);return{matches:m.matches.concat([{pattern:a,startRng:h,endRng:d}]),position:hr(v.startContainer,v.startOffset)}})}})},iu=(e,t,n,o,r,s)=>{const a=e.dom;return Hp(n,o,a.getRoot()).bind(i=>{const l=kg(a,r,n,o);for(let c=0;c<t.length;c++){const d=t[c];if(!Zs(l,d.end))continue;const f=t.slice();f.splice(c,1);const m=xB(e,r,{pattern:d,remainingPatterns:f,position:i},s);if(m.isNone()&&o>0)return iu(e,t,n,o-1,r,s);if(m.isSome())return m}return k.none()})},mE=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?J(t.format,o=>{e.formatter.apply(o)}):e.execCommand(t.cmd,!1,t.value)},pE=(e,t,n,o,r,s)=>{var a;return((i,l)=>{const c=oo(i,d=>kt(l,f=>d.pattern.start===f.pattern.start&&d.pattern.end===f.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(iu(e,r.inlinePatterns,n,o,t,s).fold(()=>[],i=>i.matches),iu(e,(a=r.inlinePatterns,Kr(a,(i,l)=>l.end.length-i.end.length)),n,o,t,s).fold(()=>[],i=>i.matches))},gE=(e,t)=>{if(t.length===0)return;const n=e.dom,o=e.selection.getBookmark(),r=((s,a)=>{const i=il("mce_textpattern"),l=Vr(a,(c,d)=>{const f=dE(s,i+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:f}])},[]);return Vr(l,(c,d)=>{const f=l.length-c.length-1,m=_g(d.pattern)?d.endMarker:dE(s,i+`_start${f}`,d.startRng);return c.concat([{...d,startMarker:m}])},[])})(n,t);J(r,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;_g(s.pattern)?((l,c,d,f)=>{const m=au(l.dom,d);ru(l.dom,m,f),mE(l,c,m)})(e,s.pattern,s.endMarker,i):((l,c,d,f,m)=>{const b=l.dom,g=au(b,f),v=au(b,d);ru(b,v,m),ru(b,g,m);const h={prefix:d.prefix,start:d.end,end:f.start},C=au(b,h);mE(l,c,C)})(e,s.pattern,s.startMarker,s.endMarker,i),uE(n,s.endMarker,i),uE(n,s.startMarker,i)}),e.selection.moveToBookmark(o)},hE=(e,t,n)=>((o,r,s)=>{if(re(o)&&0>=o.length)return k.some(hr(o,0));{const a=pa(jd);return k.from(a.forwards(o,0,zd(o),s)).map(i=>hr(i.container,0))}})(t,0,t).map(o=>{const r=o.container;return xw(r,n.start.length,t).each(s=>{const a=e.createRng();a.setStart(r,0),a.setEnd(s.container,s.offset),ru(e,a,i=>i===t)}),r}),bE=e=>(t,n)=>{const o=t.dom,r=n.pattern,s=lE(o.getRoot(),n.range).getOrDie("Unable to resolve path range");return su(t,s).each(a=>{r.type==="block-format"?((i,l)=>{const c=l.get(i);return se(c)&&Sn(c).exists(d=>Fe(d,"block"))})(r.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,a,r),t.formatter.apply(r.format)}):r.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,a,r),t.execCommand(r.cmd,!1,r.value)})}),!0},vE=e=>(t,n)=>{const o=(s=>Kr(s,(a,i)=>i.start.length-a.start.length))(t),r=n.replace(rn," ");return Gt(o,s=>e(s,n,r))},yE=(e,t)=>(n,o,r,s,a)=>{var i;a===void 0&&(a=(i=o.textContent)!==null&&i!==void 0?i:"");const l=n.dom,c=Fn(n);return l.is(o,c)?e(r.blockPatterns,a).map(d=>t&&ce.trim(a).length===d.start.length?[]:[{pattern:d,range:Sg(l,l.getRoot(),o,0,o,0,s)}]).getOr([]):[]},wB=bE((e,t,n)=>{hE(e,t,n).each(o=>{const r=B(o),s=ll(r);/^\s[^\s]/.test(s)&&Fh(r,s.slice(1))})}),SB=vE((e,t,n)=>t.indexOf(e.start)===0||n.indexOf(e.start)===0),EB=yE(SB,!0),kB=bE(hE),_B=vE((e,t,n)=>t===e.start||n===e.start),NB=yE(_B,!1),CE=(e,t,n)=>{for(let o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},AB=e=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>{return a=cN(e).filter(l=>l.type!=="inline-command"&&l.type!=="block-command"||e.queryCommandSupported(l.cmd)),i=dN(e),{inlinePatterns:b0(a),blockPatterns:h0(a),dynamicPatternsLookup:i};var a,i},r=()=>(a=>a.options.isSet("text_patterns_lookup"))(e);e.on("keydown",a=>{if(a.keyCode===13&&!Ce.modifierPressed(a)&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=hf(o(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||r())&&((l,c)=>((d,f)=>{const m=d.selection.getRng();return su(d,m).map(b=>{var g;const v=Math.max(0,m.startOffset),h=Eg(f,b,(g=b.textContent)!==null&&g!==void 0?g:"");return{inlineMatches:pE(d,b,m.startContainer,v,h,!0),blockMatches:EB(d,b,h,!0)}}).filter(({inlineMatches:b,blockMatches:g})=>g.length>0||b.length>0)})(l,c).fold(yt,({inlineMatches:d,blockMatches:f})=>(l.undoManager.add(),l.undoManager.extra(()=>{l.execCommand("mceInsertNewLine")},()=>{(g=>{g.insertContent(pn,{preserve_zwsp:!0})})(l),gE(l,d),((g,v)=>{if(v.length===0)return;const h=g.selection.getBookmark();J(v,C=>wB(g,C)),g.selection.moveToBookmark(h)})(l,f);const m=l.selection.getRng(),b=Hp(m.startContainer,m.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),b.each(g=>{const v=g.container;v.data.charAt(g.offset-1)===Yi&&(v.deleteData(g.offset-1,1),Ri(l.dom,v.parentNode,h=>h===l.dom.getRoot()))})}),!0)))(e,i)&&a.preventDefault()}},!0),e.on("keydown",a=>{if(a.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=hf(o(),"space");(i.blockPatterns.length>0||r())&&((l,c)=>((d,f)=>{const m=d.selection.getRng();return su(d,m).map(b=>{const g=Math.max(0,m.startOffset),v=kg(d.dom,b,m.startContainer,g),h=Eg(f,b,v);return NB(d,b,h,!1,v)}).filter(b=>b.length>0)})(l,c).fold(yt,d=>(l.undoManager.transact(()=>{((f,m)=>{J(m,b=>kB(f,b))})(l,d)}),!0)))(e,i)&&a.preventDefault()}},!0);const s=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const a=hf(o(),"space");(a.inlinePatterns.length>0||r())&&((i,l)=>{const c=i.selection.getRng();su(i,c).map(d=>{const f=Math.max(0,c.startOffset-1),m=kg(i.dom,d,c.startContainer,f),b=Eg(l,d,m),g=pE(i,d,c.startContainer,f,b,!1);g.length>0&&i.undoManager.transact(()=>{gE(i,g)})})})(e,a)}};e.on("keyup",a=>{CE(n,a,(i,l)=>i===l.keyCode&&!Ce.modifierPressed(l))&&s()}),e.on("keypress",a=>{CE(t,a,(i,l)=>i.charCodeAt(0)===l.charCode)&&Mo.setEditorTimeout(e,s)})},TB=e=>{const t=ce.each,n=Ce.BACKSPACE,o=Ce.DELETE,r=e.dom,s=e.selection,a=e.parser,i=gt.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),d=gt.deviceType.isiPhone()||gt.deviceType.isiPad(),f=gt.os.isMacOS()||gt.os.isiOS(),m=(D,L)=>{try{e.getDoc().execCommand(D,!1,String(L))}catch{}},b=D=>D.isDefaultPrevented(),g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},v=()=>{e.inline||r.bind(e.getDoc(),"mousedown mouseup",D=>{let L;if(D.target===e.getDoc().documentElement)if(L=s.getRng(),e.getBody().focus(),D.type==="mousedown"){if(Oo(L.startContainer))return;s.placeCaretAt(D.clientX,D.clientY)}else s.setRng(L)})},h=()=>{Range.prototype.getClientRects||e.on("mousedown",D=>{if(!b(D)&&D.target.nodeName==="HTML"){const L=e.getBody();L.blur(),Mo.setEditorTimeout(e,()=>{L.focus()})}})},C=()=>{const D=j0(e);e.on("click",L=>{const j=L.target;/^(IMG|HR)$/.test(j.nodeName)&&r.isEditable(j)&&(L.preventDefault(),e.selection.select(j),e.nodeChanged()),j.nodeName==="A"&&r.hasClass(j,D)&&j.childNodes.length===0&&r.isEditable(j.parentNode)&&(L.preventDefault(),s.select(j))})},S=()=>{e.on("keydown",D=>{if(!b(D)&&D.keyCode===n&&s.isCollapsed()&&s.getRng().startOffset===0){const L=s.getNode().previousSibling;if(L&&L.nodeName&&L.nodeName.toLowerCase()==="table")return D.preventDefault(),!1}return!0})},E=()=>{I0(e)||e.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),L0(e)||m("enableObjectResizing",!1)})},A=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},N=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},R=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",D=>{let L;D.target.nodeName==="HTML"&&(L=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(L),e.selection.normalize(),e.nodeChanged())}))},M=()=>{f&&e.on("keydown",D=>{!Ce.metaKeyPressed(D)||D.shiftKey||D.keyCode!==37&&D.keyCode!==39||(D.preventDefault(),e.selection.getSel().modify("move",D.keyCode===37?"backward":"forward","lineboundary"))})},P=()=>{e.on("click",D=>{let L=D.target;do if(L.tagName==="A")return void D.preventDefault();while(L=L.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},z=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",D=>{D.preventDefault()})})},V=Ee;return jr(e)?(c&&(v(),C(),z(),g(),d&&(N(),R(),P())),l&&(h(),E(),A(),M())):(e.on("keydown",D=>{if(b(D)||D.keyCode!==Ce.BACKSPACE)return;let L=s.getRng();const j=L.startContainer,Q=L.startOffset,ie=r.getRoot();let oe=j;if(L.collapsed&&Q===0){for(;oe.parentNode&&oe.parentNode.firstChild===oe&&oe.parentNode!==ie;)oe=oe.parentNode;oe.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,oe),L=r.createRng(),L.setStart(j,0),L.setEnd(j,0),s.setRng(L))}}),(()=>{const D=L=>{const j=r.create("body"),Q=L.cloneContents();return j.appendChild(Q),s.serializer.serialize(j,{format:"html"})};e.on("keydown",L=>{const j=L.keyCode;if(!b(L)&&(j===o||j===n)&&e.selection.isEditable()){const Q=e.selection.isCollapsed(),ie=e.getBody();if(Q&&!ns(e.schema,ie)||!Q&&!(oe=>{const we=D(oe),Ne=r.createRng();return Ne.selectNode(e.getBody()),we===D(Ne)})(e.selection.getRng()))return;L.preventDefault(),e.setContent(""),ie.firstChild&&r.isBlock(ie.firstChild)?e.selection.setCursorLocation(ie.firstChild,0):e.selection.setCursorLocation(ie,0),e.nodeChanged()}})})(),gt.windowsPhone||e.on("keyup focusin mouseup",D=>{Ce.modifierPressed(D)||(L=>{const j=L.getBody(),Q=L.selection.getRng();return Q.startContainer===Q.endContainer&&Q.startContainer===j&&Q.startOffset===0&&Q.endOffset===j.childNodes.length})(e)||s.normalize()},!0),c&&(v(),C(),e.on("init",()=>{m("DefaultParagraphSeparator",Fn(e))}),z(),S(),a.addNodeFilter("br",D=>{let L=D.length;for(;L--;)D[L].attr("class")==="Apple-interchange-newline"&&D[L].remove()}),d?(N(),R(),P()):g()),l&&(e.on("keydown",D=>{if(!b(D)&&D.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&s.getRng().startOffset===0){const L=s.getNode(),j=L.previousSibling;if(L.nodeName==="HR")return r.remove(L),void D.preventDefault();j&&j.nodeName&&j.nodeName.toLowerCase()==="hr"&&(r.remove(j),D.preventDefault())}}}),h(),(()=>{const D=()=>{const j=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const Q=s.getStart();Q!==e.getBody()&&(r.setAttrib(Q,"style",null),t(j,ie=>{Q.setAttributeNode(ie.cloneNode(!0))}))}},L=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);e.on("keypress",j=>{let Q;return!(!(b(j)||j.keyCode!==8&&j.keyCode!==46)&&L()&&(Q=D(),e.getDoc().execCommand("delete",!1),Q(),j.preventDefault(),1))}),r.bind(e.getDoc(),"cut",j=>{if(!b(j)&&L()){const Q=D();Mo.setEditorTimeout(e,()=>{Q()})}})})(),E(),e.on("SetContent ExecCommand",D=>{D.type!=="setcontent"&&D.command!=="mceInsertLink"||t(r.select("a:not([data-mce-block])"),L=>{var j;let Q=L.parentNode;const ie=r.getRoot();if(Q?.lastChild===L){for(;Q&&!r.isBlock(Q);){if(((j=Q.parentNode)===null||j===void 0?void 0:j.lastChild)!==Q||Q===ie)return;Q=Q.parentNode}r.add(Q,"br",{"data-mce-bogus":1})}})}),A(),M(),S())),{refreshContentEditable:V,isHidden:()=>{if(!l||e.removed)return!1;const D=e.selection.getSel();return!D||!D.rangeCount||D.rangeCount===0}}},Ng=Bt.DOM,RB=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Ag=e=>kr(e,t=>Ft(t)===!1),xE=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Ag({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:RB(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:wf(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},wE=e=>{const t=e.options.get;return Ag({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},Tg=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,SE=e=>{const t=Tg(e),n=P0(e),o=e.contentCSS,r=()=>{t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},s=()=>{e.removed?r():e.on("remove",r)};if(e.contentStyles.length>0){let l="";ce.each(e.contentStyles,c=>{l+=c+`\r
`}),e.dom.addStyle(l)}const a=Promise.all(((l,c,d)=>{const{pass:f,fail:m}=qo(c,v=>tinymce.Resource.has(pp(v))),b=f.map(v=>{const h=tinymce.Resource.get(pp(v));return Ae(h)?Promise.resolve(Tg(l).loadRawCss(v,h)):Promise.resolve()}),g=[...b,Tg(l).loadAll(m)];return l.inline?g:g.concat([l.ui.styleSheetLoader.loadAll(d)])})(e,o,n)).then(s).catch(s),i=w_(e);return i&&((l,c)=>{const d=B(l.getBody()),f=Yt(jt(d)),m=De("style");Jt(m,"type","text/css"),at(m,lt(c)),at(f,m),l.on("remove",()=>{Pe(m)})})(e,i),a},Rg=e=>{e.removed!==!0&&((t=>{jr(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})})(e),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(o=>{o.dispatch("Init")})(t),t.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||Yc(o)&&o.selection.getStart(!0)!==r||jn(r).each(s=>{const a=s.getNode(),i=Or(a)?jn(a).getOr(s):s;o.selection.setRng(i.toRange())})})(t),t.nodeChanged({initial:!0});const n=K_(t);bt(n)&&n.call(t,t),(o=>{const r=Y_(o);r&&Mo.setEditorTimeout(o,()=>{let s;s=r===!0?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(t),is(t)&&E1(t,!0)})(e))},EE=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Ng.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const o=e.getBody();o.disabled=!0,e.readonly=I0(e),e._editableRoot=U_(e),!Hc(e)&&e.hasEditableRoot()&&(e.inline&&Ng.getStyle(o,"position",!0)==="static"&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=GT(e),e.schema=Rs(wE(e)),e.dom=Bt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:v_(e),referrerPolicy:yf(e),onSetAttrib:a=>{e.dispatch("SetAttrib",a)}}),e.parser=(a=>{const i=vi(xE(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const d=a.dom,f="data-mce-"+c;let m=l.length;for(;m--;){const b=l[m];let g=b.attr(c);if(g&&!b.attr(f)){if(g.indexOf("data:")===0||g.indexOf("blob:")===0)continue;c==="style"?(g=d.serializeStyle(d.parseStyle(g),b.name),g.length||(g=null),b.attr(f,g),b.attr(c,g)):c==="tabindex"?(b.attr(f,g),b.attr(c,null)):b.attr(f,a.convertURL(g,c,b.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const d=l[c],f=d.attr("type")||"no/type";f.indexOf("mce-")!==0&&d.attr("type","mce-"+f)}}),mN(a)&&i.addNodeFilter("#cdata",l=>{var c;let d=l.length;for(;d--;){const f=l[d];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode((c=f.value)!==null&&c!==void 0?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const d=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(d)&&f.getAll("br").length===0&&f.append(new Wn("br",1))}}),i})(e),e.serializer=f1((a=>{const i=a.options.get;return{...xE(a),...wE(a),...Ag({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(e),e),e.selection=u1(e.dom,e.getWin(),e.serializer,e),e.annotator=Fb(e),e.formatter=B1(e),e.undoManager=P1(e),e._nodeChangeDispatcher=new $O(e),e._selectionOverrides=yB(e),(a=>{const i=os(),l=mn(!1),c=ef(d=>{a.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)},400);a.on("touchstart",d=>{Wx(d).each(f=>{c.cancel();const m={x:f.clientX,y:f.clientY,target:d.target};c.throttle(d),l.set(!1),i.set(m)})},!0),a.on("touchmove",d=>{c.cancel(),Wx(d).each(f=>{i.on(m=>{((b,g)=>{const v=Math.abs(b.clientX-g.x),h=Math.abs(b.clientY-g.y);return v>5||h>5})(f,m)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",d=>{c.cancel(),d.type!=="touchcancel"&&i.get().filter(f=>f.target.isEqualNode(d.target)).each(()=>{l.get()?d.preventDefault():a.dispatch("tap",{...d,type:"tap"})})},!0)})(e),(a=>{(i=>{i.on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()})})(a),(i=>{i.parser.addNodeFilter("details",l=>{const c=bN(i);J(l,d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const c=vN(i);J(l,d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)})})})(a)})(e),(a=>{const i="contenteditable",l=" "+ce.trim(uN(a))+" ",c=" "+ce.trim(U0(a))+" ",d=Kx(l),f=Kx(c),m=fN(a);m.length>0&&a.on("BeforeSetContent",b=>{((g,v,h)=>{let C=v.length,S=h.content;if(h.format!=="raw"){for(;C--;)S=S.replace(v[C],MR(g,S,U0(g)));h.content=S}})(a,m,b)}),a.parser.addAttributeFilter("class",b=>{let g=b.length;for(;g--;){const v=b[g];d(v)?v.attr(i,"true"):f(v)&&v.attr(i,"false")}}),a.serializer.addAttributeFilter(i,b=>{let g=b.length;for(;g--;){const v=b[g];if(!d(v)&&!f(v))continue;const h=v.attr("data-mce-content");m.length>0&&h?IR(m,h)?(v.name="#text",v.type=3,v.raw=!0,v.value=h):v.remove():v.attr(i,null)}})})(e),jr(e)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),cB(a))})})(e),(a=>{AB(a)})(e));const r=qO(e);((a,i)=>{a.addCommand("delete",()=>{((l,c)=>{$x(l,c,!1).fold(()=>{l.selection.isEditable()&&(fd(l),bm(l))},Yn)})(a,i)}),a.addCommand("forwardDelete",()=>{((l,c)=>{$x(l,c,!0).fold(()=>{l.selection.isEditable()&&ay(l)},Yn)})(a,i)})})(e,r),(a=>{a.on("NodeChange",()=>(i=>{const l=i.dom,c=i.selection,d=i.schema,f=d.getBlockElements(),m=c.getStart(),b=i.getBody();let g,v,h=null;const C=Fn(i);if(!m||!ke(m))return;const S=b.nodeName.toLowerCase();if(!d.isValidChild(S,C.toLowerCase())||((A,N,R)=>kt(Mv(B(R),B(N)),M=>Fp(A,M.dom)))(f,b,m))return;if(b.firstChild===b.lastChild&&Ut(b.firstChild))return g=jp(i),g.appendChild(ni().dom),b.replaceChild(g,b.firstChild),i.selection.setCursorLocation(g,0),void i.nodeChanged();let E=b.firstChild;for(;E;)if(ke(E)&&wk(d,E),PR(d,E)){if(LR(f,E)){v=E,E=E.nextSibling,l.remove(v);continue}if(!g){if(!h&&i.hasFocus()&&(h=Q1(i.selection.getRng(),()=>document.createElement("span"))),!E.parentNode){E=null;break}g=jp(i),b.insertBefore(g,E)}v=E,E=E.nextSibling,g.appendChild(v)}else g=null,E=E.nextSibling;h&&(i.selection.setRng(J1(h)),i.nodeChanged())})(a))})(e),(a=>{var i;const l=a.dom,c=Fn(a),d=(i=__(a))!==null&&i!==void 0?i:"",f=(m,b)=>{if((h=>{if(M1(h)){const C=h.keyCode;return!I1(h)&&(Ce.metaKeyPressed(h)||h.altKey||C>=112&&C<=123||Te(tR,C))}return!1})(m))return;const g=a.getBody(),v=!(h=>M1(h)&&!(I1(h)||h.type==="keyup"&&h.keyCode===229))(m)&&((h,C,S)=>{if(h.isEmpty(C,void 0,{skipBogus:!1,includeZwsp:!0})){const E=C.firstElementChild;return!E||!h.getStyle(C.firstElementChild,"padding-left")&&!h.getStyle(C.firstElementChild,"padding-right")&&S===E.nodeName.toLowerCase()}return!1})(l,g,c);(l.getAttrib(g,L1)!==""!==v||b)&&(l.setAttrib(g,L1,v?d:null),((h,C)=>{h.dispatch("PlaceholderToggle",{state:C})})(a,v),a.on(v?"keydown":"keyup",f),a.off(v?"keyup":"keydown",f))};Eo(d)&&a.on("init",m=>{f(m,!0),a.on("change SetContent ExecCommand",f),a.on("paste",b=>Mo.setEditorTimeout(a,()=>f(b)))})})(e),aB(e);const s=(a=>{const i=a;return(l=>Ot(l.plugins,"rtc").bind(c=>k.from(c.setup)))(a).fold(()=>(i.rtcInstance=s1(a),k.none()),l=>(i.rtcInstance=(()=>{const c=fe(null),d=fe("");return{init:{bindEvents:Ee},undoManager:{beforeChange:Ee,add:c,undo:c,redo:c,clear:Ee,reset:Ee,hasUndo:yt,hasRedo:yt,transact:c,ignore:Ee,extra:Ee},formatter:{match:yt,matchAll:fe([]),matchNode:fe(void 0),canApply:yt,closest:d,apply:Ee,remove:Ee,toggle:Ee,formatChanged:fe({unbind:Ee})},editor:{getContent:d,setContent:fe({content:"",html:""}),insertContent:fe(""),addVisual:Ee},selection:{getContent:d},autocompleter:{addDecoration:Ee,removeDecoration:Ee},raw:{getModel:fe(k.none())}}})(),k.some(()=>l().then(c=>(i.rtcInstance=(d=>{const f=E=>Xe(E)?E:{},{init:m,undoManager:b,formatter:g,editor:v,selection:h,autocompleter:C,raw:S}=d;return{init:{bindEvents:m.bindEvents},undoManager:{beforeChange:b.beforeChange,add:b.add,undo:b.undo,redo:b.redo,clear:b.clear,reset:b.reset,hasUndo:b.hasUndo,hasRedo:b.hasRedo,transact:(E,A,N)=>b.transact(N),ignore:(E,A)=>b.ignore(A),extra:(E,A,N,R)=>b.extra(N,R)},formatter:{match:(E,A,N,R)=>g.match(E,f(A),R),matchAll:g.matchAll,matchNode:g.matchNode,canApply:E=>g.canApply(E),closest:E=>g.closest(E),apply:(E,A,N)=>g.apply(E,f(A)),remove:(E,A,N,R)=>g.remove(E,f(A)),toggle:(E,A,N)=>g.toggle(E,f(A)),formatChanged:(E,A,N,R,M)=>g.formatChanged(A,N,R,M)},editor:{getContent:E=>v.getContent(E),setContent:(E,A)=>({content:v.setContent(E,A),html:""}),insertContent:(E,A)=>(v.insertContent(E),""),addVisual:v.addVisual},selection:{getContent:(E,A)=>h.getContent(A)},autocompleter:{addDecoration:C.addDecoration,removeDecoration:C.removeDecoration},raw:{getModel:()=>k.some(S.getRawModel())}}})(c),c.rtc.isRemote)))))})(e);(a=>{const i=a.getDoc(),l=a.getBody();(f=>{f.dispatch("PreInit")})(a),G_(a)||(i.body.spellcheck=!1,Ng.setAttrib(l,"spellcheck","false")),a.quirks=TB(a),(f=>{f.dispatch("PostRender")})(a);const c=S_(a);c!==void 0&&(l.dir=c);const d=Q_(a);d&&a.on("BeforeSetContent",f=>{ce.each(d,m=>{f.content=f.content.replace(m,b=>"<!--mce:protected "+escape(b)+"-->")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing=f.type==="compositionstart"})})(e),(a=>{const i=CN(a);Ae(xN(a))||!Ft(i)&&(l=>(c=>c.toLowerCase()==="gpl")(l)||(c=>c.length>=64&&c.length<=255)(l)?"VALID":"INVALID")(i)!=="INVALID"||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(e),s.fold(()=>{const a=(i=>{let l=!1;const c=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(e);SE(e).then(()=>{Rg(e),a()})},a=>{e.setProgressState(!0),SE(e).then(()=>{a().then(i=>{e.setProgressState(!1),Rg(e),a1(e)},i=>{e.notificationManager.open({type:"error",text:String(i)}),Rg(e),a1(e)})})})},OB=zt,Og=Bt.DOM,kE=Bt.DOM,_E=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),NE=e=>{const t=e.getElement();return e.inline?_E(null):(n=>{const o=kE.create("div");return kE.insertAfter(o,n),_E(o,o)})(t)},BB=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const o=ce.trim(O0(n)),r=n.ui.registry.getAll().icons,s={...Ad.get("default").icons,...Ad.get(o).icons};Ct(s,(a,i)=>{Fe(r,i)||n.ui.registry.addIcon(i,a)})})(e),(n=>{const o=ai(n);if(Ae(o)){const r=Ra.get(o);n.theme=r(n,Ra.urls[o])||{},bt(n.theme.init)&&n.theme.init(n,Ra.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const o=Cf(n),r=yi.get(o);n.model=r(n,yi.urls[o])})(e),(n=>{const o=[];J(zc(n),r=>{((s,a,i)=>{const l=Ci.get(i),c=Ci.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=ce.trim(i),l&&ce.inArray(a,i)===-1){if(s.plugins[i])return;try{const d=l(s,c)||{};s.plugins[i]=d,bt(d.init)&&(d.init(s,c),a.push(i))}catch(d){((f,m,b)=>{const g=fr.translate(["Failed to initialize plugin: {0}",m]);y0(f,"PluginLoadError",{message:g}),Rd(g,b),Td(f,g)})(s,i,d)}}})(n,o,(s=>s.replace(/^\-/,""))(r))})})(e);const t=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,Ae(ai(n))?(r=>{const s=r.theme.renderUI;return s?s():NE(r)})(n):bt(ai(n))?(r=>{const s=r.getElement(),a=ai(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):NE(n)})(e);((n,o)=>{const r={show:k.from(o.show).getOr(Ee),hide:k.from(o.hide).getOr(Ee),isEnabled:k.from(o.isEnabled).getOr(zt),setEnabled:s=>{s&&(n.mode.get()==="readonly"||is(n))||k.from(o.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...r}})(e,k.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=>{n.contentCSS=n.contentCSS.concat((o=>_1(o,x_(o)))(n),(o=>_1(o,P0(o)))(n))})(e),e.inline?EE(e):((n,o)=>{((r,s)=>{const a=gt.browser.isFirefox()?z0(r):"Rich Text Area",i=r.translate(a),l=sr(B(r.getElement()),"tabindex").bind(ea),c=((d,f,m,b)=>{const g=De("iframe");return b.each(v=>Jt(g,"tabindex",v)),rr(g,m),rr(g,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:f}),H(g,"tox-edit-area__iframe"),g})(r.id,i,n_(r),l).dom;c.onload=()=>{c.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=c,r.iframeHTML=(d=>{let f=o_(d)+"<html><head>";N0(d)!==d.documentBaseUrl&&(f+='<base href="'+d.documentBaseURI.getURI()+'" />'),f+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const m=r_(d),b=s_(d),g=d.translate(z0(d));return A0(d)&&(f+='<meta http-equiv="Content-Security-Policy" content="'+A0(d)+'" />'),f+=`</head><body id="${m}" class="mce-content-body ${b}" data-id="${d.id}" aria-label="${g}"><br></body></html>`,f})(r),Og.add(s.iframeContainer,c)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=Og.isHidden(o.editorContainer)),n.getElement().style.display="none",Og.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,a=()=>{r.contentDocument=s.contentDocument,EE(r)};if(gN(r)||gt.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),a()}else{const l=(i=B(s),io(i,"load",OB,()=>{l.unbind(),a()}));s.srcdoc=r.iframeHTML}var i})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},La=Bt.DOM,AE=e=>e.charAt(0)==="-",TE=(e,t,n)=>k.from(t).filter(o=>Eo(o)&&!Ad.has(o)).map(o=>({url:`${e.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:k.some(o)})),DB=(e,t)=>{const n=rs.ScriptLoader,o=()=>{!e.removed&&(r=>{const s=ai(r);return!Ae(s)||le(Ra.get(s))})(e)&&(r=>{const s=Cf(r);return le(yi.get(s))})(e)&&BB(e)};((r,s)=>{const a=ai(r);if(Ae(a)&&!AE(a)&&!Fe(Ra.urls,a)){const i=A_(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;Ra.load(a,l).catch(()=>{((c,d,f)=>{Ul(c,"ThemeLoadError",Hl("theme",d,f))})(r,l,a)})}})(e,t),((r,s)=>{const a=Cf(r);if(a!=="plugin"&&!Fe(yi.urls,a)){const i=T_(r),l=Ae(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;yi.load(a,l).catch(()=>{((c,d,f)=>{Ul(c,"ModelLoadError",Hl("model",d,f))})(r,l,a)})}})(e,t),((r,s)=>{const a=B0(s),i=y_(s);if(!fr.hasCode(a)&&a!=="en"){const l=Eo(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch(()=>{((c,d,f)=>{Ul(c,"LanguageLoadError",Hl("language",d,f))})(s,l,a)})}})(n,e),((r,s,a)=>{const i=TE(s,"default",a),l=(c=>k.from(m_(c)).filter(Eo).map(d=>({url:d,name:k.none()})))(s).orThunk(()=>TE(s,O0(s),""));J((c=>{const d=[],f=m=>{d.push(m)};for(let m=0;m<c.length;m++)c[m].each(f);return d})([i,l]),c=>{r.add(c.url).catch(()=>{((d,f,m)=>{Ul(d,"IconsLoadError",Hl("icons",f,m))})(s,c.url,c.name.getOrUndefined())})})})(n,e,t),((r,s)=>{const a=(i,l)=>{Ci.load(i,l).catch(()=>{((c,d,f)=>{Ul(c,"PluginLoadError",Hl("plugin",d,f))})(r,l,i)})};Ct(H_(r),(i,l)=>{a(l,i),r.options.set("plugins",zc(r).concat(l))}),J(zc(r),i=>{!(i=ce.trim(i))||Ci.urls[i]||AE(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(e,t),n.loadQueue().then(o,o)},RE=Pn().deviceType,OE=RE.isPhone(),PB=RE.isTablet(),oc=e=>{if(wt(e))return[];{const t=se(e)?e:e.split(/[ ,]/),n=ot(t,Gr);return Ke(n,Eo)}},LB=(e,t)=>{const n=(s=>{const a={},i={};return Er(s,(l,c)=>Te(e,c),Sr(a),Sr(i)),{t:a,f:i}})(t);return o=n.t,r=n.f,{sections:fe(o),options:fe(r)};var o,r},Bg=(e,t)=>Fe(e.sections(),t),MB=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ot(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),IB=(e,t)=>{var n;const o=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?ce.extend({},e.external_plugins,o):o},FB=(e,t,n,o,r)=>{var s;const a=e?{mobile:MB((s=r.mobile)!==null&&s!==void 0?s:{},t)}:{},i=LB(["mobile"],Xp(a,r)),l=ce.extend(n,o,i.options(),((c,d)=>c&&Bg(d,"mobile"))(e,i)?((c,d,f={})=>{const m=c.sections(),b=Ot(m,d).getOr({});return ce.extend({},f,b)})(i,"mobile"):{},{external_plugins:IB(o,i.options())});return((c,d,f,m)=>{const b=oc(f.forced_plugins),g=oc(m.plugins),v=((S,E)=>Bg(S,E)?S.sections()[E]:{})(d,"mobile"),h=((S,E,A,N)=>S&&Bg(E,"mobile")?N:A)(c,d,g,v.plugins?oc(v.plugins):g),C=((S,E)=>[...oc(S),...oc(E)])(b,h);return ce.extend(m,{forced_plugins:b,plugins:C})})(e,i,o,l)},jB=e=>{(t=>{const n=o=>()=>{J("left,center,right,justify".split(","),r=>{o!==r&&t.formatter.remove("align"+r)}),o!=="none"&&(r=>{t.formatter.toggle(r,void 0),t.nodeChanged()})("align"+o)};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=o=>()=>{const r=t.selection,s=r.isCollapsed()?[t.dom.getParent(r.getNode(),t.dom.isBlock)]:r.getSelectedBlocks();return kt(s,a=>le(t.formatter.matchNode(a,o)))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)},zB=(e,t)=>{const n=e.selection,o=e.dom;return/^ | $/.test(t)?((r,s,a,i)=>{const l=B(r.getRoot());return a=Rl(l,G.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Ol(l,G.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),t,e.schema):t},lu=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:o}=(r=>{if(typeof r!="string"){const s=ce.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(t);rp(e,{...o,content:zB(e,n),format:"html",set:!1,selection:!0}).each(r=>{const s=((a,i,l)=>up(a).editor.insertContent(i,l))(e,r.content,o);sp(e,s,r),e.addVisual()})}},UB={"font-size":"size","font-family":"face"},HB=Es("font"),BE=e=>(t,n)=>k.from(n).map(B).filter(Hn).bind(o=>((r,s,a)=>Lm(B(a),i=>(l=>ne(l,r).orThunk(()=>HB(l)?Ot(UB,r).bind(c=>sr(l,c)):k.none()))(i),i=>Ie(B(s),i)))(e,t,o.dom).or(((r,s)=>k.from(Bt.DOM.getStyle(s,r,!0)))(e,o.dom))).getOr(""),qB=BE("font-size"),$B=wn(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),BE("font-family")),WB=e=>jn(e.getBody()).bind(t=>{const n=t.container();return k.from(re(n)?n.parentNode:n)}),Dg=(e,t)=>((n,o)=>(r=>k.from(r.selection.getRng()).bind(s=>{const a=r.getBody();return s.startContainer===a&&s.startOffset===0?k.none():k.from(r.selection.getStart(!0))}))(n).orThunk(xe(WB,n)).map(B).filter(Hn).bind(o))(e,Ks(k.some,t)),DE=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=(s=>ce.explode(s.options.get("font_size_style_values")))(e),r=(s=>ce.explode(s.options.get("font_size_classes")))(e);return r.length>0?r[n-1]||t:o[n-1]||t}return t}return t},VB=e=>{const t=e.split(/\s*,\s*/);return ot(t,n=>n.indexOf(" ")===-1||Kt(n,'"')||Kt(n,"'")?n:`'${n}'`).join(",")},PE=(e,t)=>{if(e.mode.isReadOnly())return;const n=e.dom,o=e.selection.getRng(),r=t?e.selection.getStart():e.selection.getEnd(),s=t?o.startContainer:o.endContainer,a=Jl(n,s);if(!a||!a.isContentEditable)return;const i=t?Re:We,l=Fn(e);((c,d,f,m)=>{const b=c.dom,g=h=>b.isBlock(h)&&h.parentElement===f,v=g(d)?d:b.getParent(m,g,f);return k.from(v).map(B)})(e,r,a,s).each(c=>{const d=Qw(e,s,c.dom,a,!1,l);i(c,B(d)),e.selection.setCursorLocation(d,0),e.dispatch("NewBlock",{newBlock:d}),Ql(e,"insertParagraph")})},KB=e=>{jB(e),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=t.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n!=="paste"||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(gt.os.isMacOS()||gt.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:s,type:"error"})}}})})(e),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;t.dom.getParent(t.selection.getNode(),a=>!ke(a)||s++!==r||(t.selection.select(a),!1),t.getBody())},mceSelectNode:(n,o,r)=>{t.selection.select(r)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),Yo);if(n){const o=t.dom.createRng();o.selectNodeContents(n),t.selection.setRng(o)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{lu(t,t.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{lu(t,t.dom.encode(r))},insertHTML:(n,o,r)=>{lu(t,r)},mceInsertContent:(n,o,r)=>{lu(t,r)},mceSetContent:(n,o,r)=>{t.setContent(r)},mceReplaceContent:(n,o,r)=>{t.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(tN(t))}})})(e),(t=>{const n=(o,r,s)=>{if(t.mode.isReadOnly())return;const a=Ae(s)?{href:s}:s,i=t.dom.getParent(t.selection.getNode(),"a");Xe(a)&&Ae(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,i))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const o=t.dom.getParent(t.selection.getStart(),"a");return void(o&&t.dom.remove(o,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),(t=>{t.editorCommands.addCommands({Indent:()=>{(n=>{Ux(n,"indent")})(t)},Outdent:()=>{Hx(t)}}),t.editorCommands.addCommands({Outdent:()=>Fx(t)},"state")})(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{(n=>{PE(n,!0)})(t)},InsertNewBlockAfter:()=>{(n=>{PE(n,!1)})(t)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{Jd(tS,t)},mceInsertNewLine:(n,o,r)=>{lS(t,r)},InsertLineBreak:(n,o,r)=>{Jd(rS,t)}})})(e),(t=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const c=DE(i,l);i.formatter.toggle("fontname",{value:VB(c)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{((i,l)=>{i.formatter.toggle("fontsize",{value:DE(i,l)}),i.nodeChanged()})(n,a)},LineHeight:(r,s,a)=>{((i,l)=>{i.formatter.toggle("lineheight",{value:String(l)}),i.nodeChanged()})(n,a)},Lang:(r,s,a)=>{var i;o(r,{value:a.code,customValue:(i=a.customCode)!==null&&i!==void 0?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(Ae(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(t),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>(r=>Dg(r,s=>$B(r.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("FontSize",()=>(r=>Dg(r,s=>qB(r.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("LineHeight",()=>(r=>Dg(r,s=>{const a=B(r.getBody());return Lm(s,l=>ne(l,"line-height"),xe(Ie,a)).getOrThunk(()=>{const l=parseFloat(W(s,"line-height")),c=parseFloat(W(s,"font-size"));return String(l/c)})}).getOr(""))(n))})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??t.selection.getNode();if(s!==t.getBody()){const a=t.selection.getBookmark();t.dom.remove(s,!0),t.selection.moveToBookmark(a)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,o,r)=>{((s,a)=>{s.removed||(a?Jf(s):(i=>{const l=i.selection,c=i.getBody();let d=l.getRng();i.quirks.refreshContentEditable();const f=b=>{Kf(b).each(g=>{b.selection.setRng(g),d=g})};!hi(i)&&i.hasEditableRoot()&&f(i);const m=((b,g)=>b.dom.getParent(g,v=>b.dom.getContentEditable(v)==="true"))(i,l.getNode());if(m&&i.dom.isChildOf(m,c))return((b,g)=>b.dom.getParent(g,v=>b.dom.getContentEditable(v)==="false")!==null)(i,m)||nd(c),nd(m),i.hasEditableRoot()||f(i),Xb(i,d),void Jf(i);i.inline||(gt.browser.isOpera()||nd(c),i.getWin().focus()),(gt.browser.isFirefox()||i.inline)&&(nd(c),Xb(i,d)),Jf(i)})(s))})(t,r===!0)},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)},XB=["toggleview"],LE=e=>Te(XB,e.toLowerCase());class ME{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,o,r){const s=this.editor,a=t.toLowerCase(),i=r?.skip_focus;if(s.removed||(a!=="mcefocus"&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?(c=>{Kf(c).each(d=>c.selection.setRng(d))})(s):s.focus()),s.dispatch("BeforeExecCommand",{command:t,ui:n,value:o}).isDefaultPrevented()))return!1;const l=this.commands.exec[a];return!!bt(l)&&(l(a,n,o),s.dispatch("ExecCommand",{command:t,ui:n,value:o}),!0)}queryCommandState(t){if(!LE(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),o=this.commands.state[n];return!!bt(o)&&o(n)}queryCommandValue(t){if(!LE(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),o=this.commands.value[n];return bt(o)?o(n):""}addCommands(t,n="exec"){const o=this.commands;Ct(t,(r,s)=>{J(s.toLowerCase().split(","),a=>{o[n][a]=r})})}addCommand(t,n,o){const r=t.toLowerCase();this.commands.exec[r]=(s,a,i)=>n.call(o??this.editor,a,i)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,o){this.commands.state[t.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(t,n,o){this.commands.value[t.toLowerCase()]=()=>n.call(o??this.editor)}}const YB=ce.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Pg{static isNative(t){return!!YB[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||yt}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const o=t.toLowerCase(),r=Yu(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(l.func.call(this.scope,r)===!1)return r.preventDefault(),r}}return r}on(t,n,o,r){if(n===!1&&(n=yt),n){const s={func:n,removed:!1};r&&ce.extend(s,r);const a=t.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(t,n){if(t){const o=t.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return Ct(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=qo(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,J(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(t,!1),delete this.bindings[s])}}}else Ct(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(t,n,o){return this.on(t,n,o,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const rc=e=>(e._eventDispatcher||(e._eventDispatcher=new Pg({scope:e,toggleEvent:(t,n)=>{Pg.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Lg={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const o=this;if(o.removed&&e!=="remove"&&e!=="detach")return Yu(e.toLowerCase(),t??{},o);const r=rc(o).dispatch(e,t);if(n!==!1&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(e,r,!1),s=s.parent?s.parent():void 0}return r},on(e,t,n){return rc(this).on(e,t,n)},off(e,t){return rc(this).off(e,t)},once(e,t){return rc(this).once(e,t)},hasEventListeners(e){return rc(this).has(e)}},cu=Bt.DOM;let Ma;const du=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=M0(e);return n?(e.eventRoot||(e.eventRoot=cu.select(n)[0]),e.eventRoot):e.getBody()},IE=(e,t,n)=>{(o=>!o.hidden&&!is(o))(e)?e.dispatch(t,n):is(e)&&((o,r)=>{if((s=>s.type==="click")(r)&&!Ce.metaKeyPressed(r)){const s=B(r.target);((a,i)=>cr(i,"a",l=>Ie(l,B(a.getBody()))).bind(l=>sr(l,"href")))(o,s).each(a=>{if(r.preventDefault(),/^#/.test(a)){const i=o.dom.select(`${a},[name="${Yr(a,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else(s=>Te(VT,s.type))(r)&&o.dispatch(r.type,r)})(e,n)},FE=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=du(e,t);if(M0(e)){if(Ma||(Ma={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Ma&&(Ct(Ma,(r,s)=>{e.dom.unbind(du(e,s))}),Ma=null)})),Ma[t])return;const o=r=>{const s=r.target,a=e.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||cu.isChildOf(s,l))&&IE(a[i],t,r)}};Ma[t]=o,cu.bind(n,t,o)}else{const o=r=>{IE(e,t,r)};cu.bind(n,t,o),e.delegates[t]=o}},jE={...Lg,bindPendingEventDelegates(){const e=this;ce.each(e._pendingNativeEvents,t=>{FE(e,t)})},toggleNativeEvent(e,t){const n=this;e!=="focus"&&e!=="blur"&&(n.removed||(t?n.initialized?FE(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(du(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(Ct(e.delegates,(o,r)=>{e.dom.unbind(du(e,r),r,o)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},GB=e=>Ae(e)?{value:e.split(/[ ,]/),valid:!0}:Bn(e,Ae)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},zE=(e,t)=>e+(ys(t.message)?"":`. ${t.message}`),UE=e=>e.valid,Mg=(e,t,n="")=>{const o=t(e);return gn(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},sc=e=>e.readonly,QB=["design","readonly"],HE=(e,t,n,o)=>{const r=n[t.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((a,i)=>{const l=B(a.getBody());i?(a.readonly=!0,a.hasEditableRoot()&&(l.dom.contentEditable="true"),w1(a)):(a.readonly=!1,S1(a))})(e,s.editorReadOnly),t.set(o),((a,i)=>{a.dispatch("SwitchMode",{mode:i})})(e,o)},JB=e=>{const t=mn("design"),n=mn({design:{activate:Ee,deactivate:Ee,editorReadOnly:!1},readonly:{activate:Ee,deactivate:Ee,editorReadOnly:!0}});return(o=>{o.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{sc(o)&&r.preventDefault()}),o.on("BeforeExecCommand",r=>{r.command!=="Undo"&&r.command!=="Redo"||!sc(o)||r.preventDefault()}),o.on("input",r=>{if(!r.isComposing&&sc(o)){const s=o.undoManager.add();le(s)&&o.undoManager.undo()}}),o.on("compositionend",()=>{if(sc(o)){const r=o.undoManager.add();le(r)&&o.undoManager.undo()}})})(e),(o=>{(r=>{r.serializer?k1(r):r.on("PreInit",()=>{k1(r)})})(o),(r=>{r.on("ShowCaret ObjectSelected",s=>{is(r)&&s.preventDefault()}),r.on("DisabledStateChange",s=>{s.isDefaultPrevented()||E1(r,s.state)})})(o)})(e),{isReadOnly:()=>sc(e),set:o=>((r,s,a,i)=>{if(!(i===a.get()||r.initialized&&is(r))){if(!Fe(s,i))throw new Error(`Editor mode '${i}' is invalid`);r.initialized?HE(r,a,s,i):r.on("init",()=>HE(r,a,s,i))}})(e,n.get(),t,o),get:()=>t.get(),register:(o,r)=>{n.set(((s,a,i)=>{if(Te(QB,a))throw new Error(`Cannot override default mode ${a}`);return{...s,[a]:{...i,deactivate:()=>{try{i.deactivate()}catch(l){console.error(`problem while deactivating editor mode ${a}:`,l)}}}}})(n.get(),o,r))}}},Ig=ce.each,Fg=ce.explode,ZB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},qE=ce.makeMap("alt,ctrl,shift,meta,access"),eD=e=>{const t={},n=gt.os.isMacOS()||gt.os.isiOS();Ig(Fg(e.toLowerCase(),"+"),s=>{(a=>a in qE)(s)?t[s]=!0:/^[0-9]{2,}$/.test(s)?t.keyCode=parseInt(s,10):(t.charCode=s.charCodeAt(0),t.keyCode=ZB[s]||s.toUpperCase().charCodeAt(0))});const o=[t.keyCode];let r;for(r in qE)t[r]?o.push(r):t[r]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class $E{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Ig(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),o.type==="keydown"&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&o.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return Ig(Fg(ce.trim(t)),i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l}),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,o=t;return typeof o=="string"?()=>{n.editor.execCommand(o,!1,null)}:ce.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(t,n,o,r){const s=ce.map(Fg(t,">"),eD);return s[s.length-1]=ce.extend(s[s.length-1],{func:o,scope:r||this.editor}),ce.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const tD=()=>{const e=(()=>{const t={},n={},o={},r={},s={},a={},i={},l={},c={},d=(m,b)=>(g,v)=>{m[g.toLowerCase()]={...v,type:b}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(o,"autocompleter"),addContextMenu:d(s,"contextmenu"),addContextToolbar:d(a,"contexttoolbar"),addContextForm:(f=a,(m,b)=>{f[m.toLowerCase()]={type:"contextform",...b}}),addSidebar:d(l,"sidebar"),addView:d(c,"views"),addIcon:(m,b)=>r[m.toLowerCase()]=b,addContext:(m,b)=>i[m.toLowerCase()]=b,getAll:()=>({buttons:t,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:l,views:c,contexts:i})};var f})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Ia=Bt.DOM,WE=ce.extend,nD=ce.each;class uu{constructor(t,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,WE(this,jE);const r=this;this.id=t,this.hidden=!1;const s=((b,g)=>{const v=eO(g);return FB(OE||PB,OE,v,b,v)})(o.defaultOptions,n);this.options=((b,g,v=g)=>{const h={},C={},S=(A,N,R)=>{const M=Mg(N,R);return UE(M)?(C[A]=M.value,!0):(console.warn(zE(`Invalid value passed for the ${A} option`,M)),!1)},E=A=>Fe(h,A);return{register:(A,N)=>{const R=(P=>Ae(P.processor))(N)?(P=>{const z=(()=>{switch(P){case"array":return se;case"boolean":return gn;case"function":return bt;case"number":return x;case"object":return Xe;case"string":return Ae;case"string[]":return GB;case"object[]":return V=>Bn(V,Xe);case"regexp":return V=>So(V,RegExp);default:return zt}})();return V=>Mg(V,z,`The value must be a ${P}.`)})(N.processor):N.processor,M=((P,z,V)=>{if(!Ft(z)){const D=Mg(z,V);if(UE(D))return D.value;console.error(zE(`Invalid default value passed for the "${P}" option`,D))}})(A,N.default,R);h[A]={...N,default:M,processor:R},Ot(C,A).orThunk(()=>Ot(g,A)).each(P=>S(A,P,R))},isRegistered:E,get:A=>Ot(C,A).orThunk(()=>Ot(h,A).map(N=>N.default)).getOrUndefined(),set:(A,N)=>{if(E(A)){const R=h[A];return R.immutable?(console.error(`"${A}" is an immutable option and cannot be updated`),!1):S(A,N,R.processor)}return console.warn(`"${A}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:A=>{const N=E(A);return N&&delete C[A],N},isSet:A=>Fe(C,A),debug:()=>{try{console.log(JSON.parse(JSON.stringify(v,(A,N)=>gn(N)||x(N)||Ae(N)||Je(N)||se(N)||Me(N)?N:Object.prototype.toString.call(N))))}catch(A){console.error(A)}}}})(0,s,n),(b=>{const g=b.options.register;g("id",{processor:"string",default:b.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:b.documentBaseUrl}),g("body_id",{processor:_0(b,"tinymce"),default:"tinymce"}),g("body_class",{processor:_0(b),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:v=>{const h=Ae(v)&&Eo(v);return h?{value:v,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:v=>{const h=Te(["block","linebreak","invert","default"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:v=>gn(v)||Ae(v)?{valid:!0,value:v}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:v=>{const h=v===!1||Ae(v)||Bn(v,Ae);return h?Ae(v)?{value:ot(v.split(","),Gr),valid:h}:se(v)?{value:v,valid:h}:v===!1?{value:[],valid:h}:{value:v,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:xf(b)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:v=>{const h=Ae(v)||Bn(v,Ae);return h?{value:se(v)?v:ot(v.split(","),Gr),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:v=>{const h=gn(v)||Ae(v);return h?v===!1||vf.isiPhone()||vf.isiPad()?{value:"",valid:h}:{value:v===!0?"table,img,figure.image,div,video,iframe":v,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!e_}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"string"}),g("service_message",{processor:"string"}),g("theme",{processor:v=>v===!1||Ae(v)||bt(v),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:v=>{const h=v===!1||Ae(v);return h?{value:v===!1?"":v,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("disabled",{processor:v=>gn(v)?(b.initialized&&Hc(b)!==v&&Promise.resolve().then(()=>{((h,C)=>{h.dispatch("DisabledStateChange",{state:C})})(b,v)}),{valid:!0,value:v}):{valid:!1,message:"The value must be a boolean."},default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:b.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(b.hasPlugin("help")?". Press ALT-0 for help.":"")}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:b.convertURL}),g("url_converter_scope",{processor:"object",default:b}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("allow_mathml_annotation_encodings",{processor:v=>{const h=Bn(v,Ae);return h?{value:v,valid:h}:{valid:!1,message:"Must be an array of strings."}},default:[]}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:jc}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:jc}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:jc}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:jc}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:v=>Ae(v)||v===!0}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("license_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:v=>Bn(v,Xe)||v===!1?{value:v0(v===!1?[]:v),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),g("text_patterns_lookup",{processor:v=>{return bt(v)?{value:(h=v,C=>{const S=h(C);return v0(S)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:v=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:v=>Bn(v,k0)?{value:v,valid:!0}:k0(v)?{value:[v],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!0}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:v=>{const h=Te(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:v=>{const h=Te(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("sandbox_iframes",{processor:"boolean",default:!0}),g("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),g("convert_unsafe_embeds",{processor:"boolean",default:!0}),b.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:fr.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:t_.getAttrib(b.getElement(),"placeholder")})})})(r);const a=this.options.get;a("deprecation_warnings")&&((b,g)=>{((v,h)=>{const C=IT(v),S=jT(h),E=S.length>0,A=C.length>0,N=h.theme==="mobile";if(E||A||N){const R=`
- `,M=N?`

Themes:${R}mobile`:"",P=E?`

Plugins:${R}${S.join(R)}`:"",z=A?`

Options:${R}${C.join(R)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+M+P+z)}})(b,g),((v,h)=>{const C=FT(v),S=zT(h),E=S.length>0,A=C.length>0;if(E||A){const N=`
- `,R=E?`

Plugins:${N}${S.map(UT).join(N)}`:"",M=A?`

Options:${N}${C.join(N)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+R+M)}})(b,g)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=yf(r);c&&(rs.ScriptLoader._setReferrerPolicy(c),Bt.DOM.styleSheetLoader._setReferrerPolicy(c));const d=F0(r);le(d)&&Bt.DOM.styleSheetLoader._setContentCssCors(d),$n.languageLoad=a("language_load"),$n.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new Jo(N0(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=xf(r),this.hasVisual=$_(r),this.shortcuts=new $E(this),this.editorCommands=new ME(this),KB(this);const f=a("cache_suffix");f&&(gt.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:tD(),styleSheetLoader:void 0,show:Ee,hide:Ee,setEnabled:Ee,isEnabled:zt},this.mode=JB(r),o.dispatch("SetupEditor",{editor:this});const m=V_(r);bt(m)&&m.call(r,r)}render(){(t=>{const n=t.id;fr.setCode(B0(t));const o=()=>{La.unbind(window,"ready",o),t.render()};if(!ua.Event.domLoaded)return void La.bind(window,"ready",o);if(!t.getElement())return;const r=B(t.getElement()),s=y(r);t.on("remove",()=>{xr(r.dom.attributes,i=>p(r,i.name)),rr(r,s)}),t.ui.styleSheetLoader=((i,l)=>sh.forElement(i,{contentCssCors:F0(l),referrerPolicy:yf(l)}))(r,t),xf(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const a=t.getElement().form||La.getParent(n,"form");a&&(t.formElement=a,L_(t)&&!Tu(t.getElement())&&(La.insertAfter(La.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=i=>{t.dispatch(i.type,i)},La.bind(a,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!M_(t)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),a._mceOldSubmit(a)))),t.windowManager=y1(t),t.notificationManager=v1(t),(i=>i.options.get("encoding")==="xml")(t)&&t.on("GetContent",i=>{i.save&&(i.content=La.encode(i.content))}),I_(t)&&t.on("submit",()=>{t.initialized&&t.save()}),F_(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),DB(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return hi(this)}translate(t){return fr.translate(t)}getParam(t,n,o){const r=this.options;return r.isRegistered(t)||(le(o)?r.register(t,{processor:o,default:n}):r.register(t,{processor:zt,default:n})),r.isSet(t)||Ft(n)?r.get(t):n}hasPlugin(t,n){return!(!Te(zc(this),t)||n&&Ci.get(t)===void 0)}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,o){this.editorCommands.addCommand(t,n,o)}addQueryStateHandler(t,n,o){this.editorCommands.addQueryStateHandler(t,n,o)}addQueryValueHandler(t,n,o){this.editorCommands.addQueryValueHandler(t,n,o)}addShortcut(t,n,o,r){this.shortcuts.add(t,n,o,r)}execCommand(t,n,o,r){return this.editorCommands.execCommand(t,n,o,r)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Ia.show(t.getContainer()),Ia.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Ia.hide(t.getContainer()),Ia.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...t,load:!0},s=Tu(o)?o.value:o.innerHTML,a=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),a}return""}save(t={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...t,save:!0,element:o};let s=n.getContent(r);const a={...r,content:s};if(a.no_events||n.dispatch("SaveContent",a),a.format==="raw"&&n.dispatch("RawSaveContent",a),s=a.content,Tu(o))o.value=s;else{!t.is_removing&&n.inline||(o.innerHTML=s);const i=Ia.getParent(n.id,"form");i&&nD(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=r.element=o=null,a.set_dirty!==!1&&n.setDirty(!1),s}setContent(t,n){return fp(this,t,n)}getContent(t){return((n,o={})=>{const r=((s,a)=>({...s,format:a,get:!0,getInner:!0}))(o,o.format?o.format:"html");return KC(n,r).fold(mt,s=>{const a=((i,l)=>up(i).editor.getContent(l))(n,s);return XC(n,a,s)})})(this,t)}insertContent(t,n){n&&(t=WE({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?fp(this,this.startContent,{format:"raw"}):fp(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Ia.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ia.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const o=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:o?.body)!==null&&n!==void 0?n:null}convertURL(t,n,o){const r=this,s=r.options.get,a=X_(r);if(bt(a))return a.call(r,t,o,!0,n);if(!s("convert_urls")||o==="link"||Xe(o)&&o.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const i=new Jo(t);return i.protocol!=="http"&&i.protocol!=="https"&&i.protocol!==""?t:s("relative_urls")?r.documentBaseURI.toRelative(t):t=r.documentBaseURI.toAbsolute(t,s("remove_script_host"))}addVisual(t){((n,o)=>{((r,s)=>{tn(r).editor.addVisual(s)})(n,o)})(this,t)}setEditableRoot(t){((n,o)=>{n._editableRoot!==o&&(n._editableRoot=o,is(n)||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),((r,s)=>{r.dispatch("EditableRootStateChange",{state:s})})(n,o))})(this,t)}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:o}=t,r=t.getBody(),s=t.getElement();r&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&le(s?.nextSibling)&&_d.remove(s.nextSibling),(a=>{a.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&r&&(a=>{_d.setStyle(a.id,"display",a.orgDisplay)})(t),(a=>{a.dispatch("detach")})(t),_d.remove(t.getContainer()),Nd(n),Nd(o),t.destroy()}})(this)}destroy(t){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Nd(r),Nd(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),_d.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;if(l){const c=l.dom;i.selection=l.win=l.dom=c.doc=null}})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Oi=Bt.DOM,fu=ce.each;let mu,VE=!1,no=[];const pu=e=>{const t=e.type;fu(qs.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},KE=e=>{if(e!==VE){const t=Bt.DOM;e?(t.bind(window,"resize",pu),t.bind(window,"scroll",pu)):(t.unbind(window,"resize",pu),t.unbind(window,"scroll",pu)),VE=e}},XE=e=>{const t=no;return no=Ke(no,n=>e!==n),qs.activeEditor===e&&(qs.activeEditor=no.length>0?no[0]:null),qs.focusedEditor===e&&(qs.focusedEditor=null),t.length!==no.length},oD=document.compatMode!=="CSS1Compat",qs={...Lg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"7.2",releaseDate:"2025-03-19",i18n:fr,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",o=Jo.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(l==="")continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){c.indexOf(".min")!==-1&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}var s;e.baseURL=new Jo(o).toAbsolute(t),e.documentBaseURL=o,e.baseURI=new Jo(e.baseURL),e.suffix=n,(s=e).on("AddEditor",xe(KN,s)),s.on("RemoveEditor",xe(XN,s))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const o=e.plugin_base_urls;o!==void 0&&Ct(o,(r,s)=>{$n.PluginManager.urls[s]=r})},init(e){const t=this;let n;const o=ce.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;Oi.unbind(window,"ready",s),(()=>{const c=e.onpageload;c&&c.apply(t,[])})(),l=wr((c=>gt.browser.isIE()||gt.browser.isEdge()?(Rd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):oD?(Rd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Ae(c.selector)?Oi.select(c.selector):le(c.target)?[c.target]:[])(e)),ce.each(l,c=>{var d;(d=t.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(XE(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)}),l=ce.grep(l,c=>!t.get(c.id)),l.length===0?r([]):fu(l,c=>{((d,f)=>d.inline&&f.tagName.toLowerCase()in o)(e,c)?Rd("Could not initialize inline editor on invalid inline target element",c):((d,f,m)=>{const b=new uu(d,f,t);i.push(b),b.on("init",()=>{++a===l.length&&r(i)}),b.targetElm=b.targetElm||m,b.render()})((d=>{let f=d.id;return f||(f=Ot(d,"name").filter(m=>!Oi.get(m)).getOrThunk(Oi.uniqueId),d.setAttribute("id",f)),f})(c),e,c)})};return Oi.bind(window,"ready",s),new Promise(a=>{n?a(n):r=i=>{a(i)}})},get(e){return arguments.length===0?no.slice(0):Ae(e)?Gt(no,t=>t.id===e).getOr(null):x(e)&&no[e]?no[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&no.push(e),KE(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),mu||(mu=o=>{const r=t.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",mu))),e},createEditor(e,t){return this.add(new uu(e,t,this))},remove(e){const t=this;let n;if(e){if(!Ae(e))return n=e,Je(t.get(n.id))?null:(XE(n)&&t.dispatch("RemoveEditor",{editor:n}),no.length===0&&window.removeEventListener("beforeunload",mu),n.remove(),KE(no.length>0),n);fu(Oi.select(e),o=>{n=t.get(o.id),n&&t.remove(n)})}else for(let o=no.length-1;o>=0;o--)t.remove(no[o])},execCommand(e,t,n){var o;const r=this,s=Xe(n)?(o=n.id)!==null&&o!==void 0?o:n.index:n;switch(e){case"mceAddEditor":if(!r.get(s)){const a=n.options;new uu(s,a,r).render()}return!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:()=>{fu(no,e=>{e.save()})},addI18n:(e,t)=>{fr.add(e,t)},translate:e=>fr.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Jo(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Jo(this.baseURL)}};qs.setup();const rD=(()=>{const e=os();return{FakeClipboardItem:t=>({items:t,types:nn(t),getType:n=>Ot(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),YE=Math.min,Bi=Math.max,gu=Math.round,GE=(e,t,n)=>{let o=t.x,r=t.y;const s=e.w,a=e.h,i=t.w,l=t.h,c=(n||"").split("");return c[0]==="b"&&(r+=l),c[1]==="r"&&(o+=i),c[0]==="c"&&(r+=gu(l/2)),c[1]==="c"&&(o+=gu(i/2)),c[3]==="b"&&(r-=a),c[4]==="r"&&(o-=s),c[3]==="c"&&(r-=gu(a/2)),c[4]==="c"&&(o-=gu(s/2)),Di(o,r,s,a)},Di=(e,t,n,o)=>({x:e,y:t,w:n,h:o}),sD={inflate:(e,t,n)=>Di(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:GE,findBestRelativePosition:(e,t,n,o)=>{for(let r=0;r<o.length;r++){const s=GE(e,t,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(e,t)=>{const n=Bi(e.x,t.x),o=Bi(e.y,t.y),r=YE(e.x+e.w,t.x+t.w),s=YE(e.y+e.h,t.y+t.h);return r-n<0||s-o<0?null:Di(n,o,r-n,s-o)},clamp:(e,t,n)=>{let o=e.x,r=e.y,s=e.x+e.w,a=e.y+e.h;const i=t.x+t.w,l=t.y+t.h,c=Bi(0,t.x-o),d=Bi(0,t.y-r),f=Bi(0,s-i),m=Bi(0,a-l);return o+=c,r+=d,n&&(s+=c,a+=d,o-=f,r-=m),s-=f,a-=m,Di(o,r,s-o,a-r)},create:Di,fromClientRect:e=>Di(e.left,e.top,e.width,e.height)},aD=(()=>{const e={},t={},n={};return{load:(o,r)=>{const s=`Script at URL "${r}" failed to load`,a=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(e[o]!==void 0)return e[o];{const i=new Promise((l,c)=>{const d=((f,m,b=1e3)=>{let g=!1,v=null;const h=E=>(...A)=>{g||(g=!0,v!==null&&(clearTimeout(v),v=null),E.apply(null,A))},C=h(f),S=h(m);return{start:(...E)=>{g||v!==null||(v=setTimeout(()=>S.apply(null,E),b))},resolve:C,reject:S}})(l,c);t[o]=d.resolve,rs.ScriptLoader.loadScript(r).then(()=>d.start(a),()=>d.reject(s))});return e[o]=i,i}},add:(o,r)=>{t[o]!==void 0&&(t[o](r),delete t[o]),e[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete e[o],delete n[o]}}})();let ac;try{const e="__storage_test__";ac=window.localStorage,ac.setItem(e,e),ac.removeItem(e)}catch{ac=(()=>{let t={},n=[];const o={getItem:r=>t[r]||null,setItem:(r,s)=>{n.push(r),t[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete t[r]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const iD={geom:{Rect:sD},util:{Delay:Mo,Tools:ce,VK:Ce,URI:Jo,EventDispatcher:Pg,Observable:Lg,I18n:fr,LocalStorage:ac,ImageUploader:e=>{const t=N1(),n=T1(e,t);return{upload:(o,r=!0)=>n.upload(o,r?A1(e):void 0)}}},dom:{EventUtils:ua,TreeWalker:fn,TextSeeker:pa,DOMUtils:Bt,ScriptLoader:rs,RangeUtils:Ea,Serializer:f1,StyleSheetLoader:rh,ControlSelection:Gb,BookmarkManager:kl,Selection:u1,Event:ua.Event},html:{Styles:Xu,Entities:da,Node:Wn,Schema:Rs,DomParser:vi,Writer:Nv,Serializer:Is},Env:gt,AddOnManager:$n,Annotator:Fb,Formatter:B1,UndoManager:P1,EditorCommands:ME,WindowManager:y1,NotificationManager:v1,EditorObservable:jE,Shortcuts:$E,Editor:uu,FocusManager:Kb,EditorManager:qs,DOM:Bt.DOM,ScriptLoader:rs.ScriptLoader,PluginManager:Ci,ThemeManager:Ra,ModelManager:yi,IconManager:Ad,Resource:aD,FakeClipboard:rD,trim:ce.trim,isArray:ce.isArray,is:ce.is,toArray:ce.toArray,makeMap:ce.makeMap,each:ce.each,map:ce.map,grep:ce.grep,inArray:ce.inArray,extend:ce.extend,walk:ce.walk,resolve:ce.resolve,explode:ce.explode,_addCacheSuffix:ce._addCacheSuffix},QE=ce.extend(qs,iD);(e=>{window.tinymce=e,window.tinyMCE=e})(QE),(e=>{if(typeof module=="object")try{module.exports=e}catch{}})(QE)})();/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */(function(be,Ge){"use strict";typeof module=="object"&&typeof module.exports=="object"?module.exports=be.document?Ge(be,!0):function(Qe){if(!Qe.document)throw new Error("jQuery requires a window with a document");return Ge(Qe)}:Ge(be)})(typeof window<"u"?window:this,function(be,Ge){"use strict";var Qe=[],Ve=Object.getPrototypeOf,it=Qe.slice,Xt=Qe.flat?function(u){return Qe.flat.call(u)}:function(u){return Qe.concat.apply([],u)},Rn=Qe.push,Zt=Qe.indexOf,Xn={},wo=Xn.toString,On=Xn.hasOwnProperty,So=On.toString,Ae=So.call(Object),Xe={},Me=function(u){return typeof u=="function"&&typeof u.nodeType!="number"&&typeof u.item!="function"},se=function(u){return u!=null&&u===u.window},Je=be.document,gn={type:!0,src:!0,nonce:!0,noModule:!0};function Ft(u,p,y){var w,_,T=(y=y||Je).createElement("script");if(T.text=u,p)for(w in gn)(_=p[w]||p.getAttribute&&p.getAttribute(w))&&T.setAttribute(w,_);y.head.appendChild(T).parentNode.removeChild(T)}function wt(u){return u==null?u+"":typeof u=="object"||typeof u=="function"?Xn[wo.call(u)]||"object":typeof u}var le="3.7.1",bt=/HTML$/i,x=function(u,p){return new x.fn.init(u,p)};function Bn(u){var p=!!u&&"length"in u&&u.length,y=wt(u);return!Me(u)&&!se(u)&&(y==="array"||p===0||typeof p=="number"&&0<p&&p-1 in u)}function Ee(u,p){return u.nodeName&&u.nodeName.toLowerCase()===p.toLowerCase()}x.fn=x.prototype={jquery:le,constructor:x,length:0,toArray:function(){return it.call(this)},get:function(u){return u==null?it.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var p=x.merge(this.constructor(),u);return p.prevObject=this,p},each:function(u){return x.each(this,u)},map:function(u){return this.pushStack(x.map(this,function(p,y){return u.call(p,y,p)}))},slice:function(){return this.pushStack(it.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(u,p){return(p+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(u,p){return p%2}))},eq:function(u){var p=this.length,y=+u+(u<0?p:0);return this.pushStack(0<=y&&y<p?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:Rn,sort:Qe.sort,splice:Qe.splice},x.extend=x.fn.extend=function(){var u,p,y,w,_,T,O=arguments[0]||{},q=1,H=arguments.length,K=!1;for(typeof O=="boolean"&&(K=O,O=arguments[q]||{},q++),typeof O=="object"||Me(O)||(O={}),q===H&&(O=this,q--);q<H;q++)if((u=arguments[q])!=null)for(p in u)w=u[p],p!=="__proto__"&&O!==w&&(K&&w&&(x.isPlainObject(w)||(_=Array.isArray(w)))?(y=O[p],T=_&&!Array.isArray(y)?[]:_||x.isPlainObject(y)?y:{},_=!1,O[p]=x.extend(K,T,w)):w!==void 0&&(O[p]=w));return O},x.extend({expando:"jQuery"+(le+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var p,y;return!(!u||wo.call(u)!=="[object Object]")&&(!(p=Ve(u))||typeof(y=On.call(p,"constructor")&&p.constructor)=="function"&&So.call(y)===Ae)},isEmptyObject:function(u){var p;for(p in u)return!1;return!0},globalEval:function(u,p,y){Ft(u,{nonce:p&&p.nonce},y)},each:function(u,p){var y,w=0;if(Bn(u))for(y=u.length;w<y&&p.call(u[w],w,u[w])!==!1;w++);else for(w in u)if(p.call(u[w],w,u[w])===!1)break;return u},text:function(u){var p,y="",w=0,_=u.nodeType;if(!_)for(;p=u[w++];)y+=x.text(p);return _===1||_===11?u.textContent:_===9?u.documentElement.textContent:_===3||_===4?u.nodeValue:y},makeArray:function(u,p){var y=p||[];return u!=null&&(Bn(Object(u))?x.merge(y,typeof u=="string"?[u]:u):Rn.call(y,u)),y},inArray:function(u,p,y){return p==null?-1:Zt.call(p,u,y)},isXMLDoc:function(u){var p=u&&u.namespaceURI,y=u&&(u.ownerDocument||u).documentElement;return!bt.test(p||y&&y.nodeName||"HTML")},merge:function(u,p){for(var y=+p.length,w=0,_=u.length;w<y;w++)u[_++]=p[w];return u.length=_,u},grep:function(u,p,y){for(var w=[],_=0,T=u.length,O=!y;_<T;_++)!p(u[_],_)!==O&&w.push(u[_]);return w},map:function(u,p,y){var w,_,T=0,O=[];if(Bn(u))for(w=u.length;T<w;T++)(_=p(u[T],T,y))!=null&&O.push(_);else for(T in u)(_=p(u[T],T,y))!=null&&O.push(_);return Xt(O)},guid:1,support:Xe}),typeof Symbol=="function"&&(x.fn[Symbol.iterator]=Qe[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,p){Xn["[object "+p+"]"]=p.toLowerCase()});var wn=Qe.pop,Ks=Qe.sort,fe=Qe.splice,mt="[\\x20\\t\\r\\n\\f]",er=new RegExp("^"+mt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+mt+"+$","g");x.contains=function(u,p){var y=p&&p.parentNode;return u===y||!(!y||y.nodeType!==1||!(u.contains?u.contains(y):u.compareDocumentPosition&&16&u.compareDocumentPosition(y)))};var xe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function vr(u,p){return p?u==="\0"?"\uFFFD":u.slice(0,-1)+"\\"+u.charCodeAt(u.length-1).toString(16)+" ":"\\"+u}x.escapeSelector=function(u){return(u+"").replace(xe,vr)};var po=Je,yr=Rn;(function(){var u,p,y,w,_,T,O,q,H,K,ee=yr,ae=x.expando,Z=0,me=0,De=jt(),lt=jt(),B=jt(),en=jt(),dn=function(I,W){return I===W&&(_=!0),0},on="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",No="(?:\\\\[\\da-fA-F]{1,6}"+mt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ie="\\["+mt+"*("+No+")(?:"+mt+"*([*^$|!~]?=)"+mt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+No+"))|)"+mt+"*\\]",En=":("+No+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Ie+")*)|.*)\\)|)",_t=new RegExp(mt+"+","g"),Mt=new RegExp("^"+mt+"*,"+mt+"*"),ar=new RegExp("^"+mt+"*([>+~]|"+mt+")"+mt+"*"),ro=new RegExp(mt+"|>"),so=new RegExp(En),ks=new RegExp("^"+No+"$"),Ln={ID:new RegExp("^#("+No+")"),CLASS:new RegExp("^\\.("+No+")"),TAG:new RegExp("^("+No+"|[*])"),ATTR:new RegExp("^"+Ie),PSEUDO:new RegExp("^"+En),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+mt+"*(even|odd|(([+-]|)(\\d*)n|)"+mt+"*(?:([+-]|)"+mt+"*(\\d+)|))"+mt+"*\\)|)","i"),bool:new RegExp("^(?:"+on+")$","i"),needsContext:new RegExp("^"+mt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+mt+"*((?:-\\d)?\\d*)"+mt+"*\\)|)(?=[^-]|$)","i")},bo=/^(?:input|select|textarea|button)$/i,Zr=/^h\d$/i,ao=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,St=/[+~]/,$t=new RegExp("\\\\[\\da-fA-F]{1,6}"+mt+"?|\\\\([^\\r\\n\\f])","g"),kn=function(I,W){var te="0x"+I.slice(1)-65536;return W||(te<0?String.fromCharCode(te+65536):String.fromCharCode(te>>10|55296,1023&te|56320))},Ko=function(){qn()},_n=cr(function(I){return I.disabled===!0&&Ee(I,"fieldset")},{dir:"parentNode",next:"legend"});try{ee.apply(Qe=it.call(po.childNodes),po.childNodes),Qe[po.childNodes.length].nodeType}catch{ee={apply:function(W,te){yr.apply(W,it.call(te))},call:function(W){yr.apply(W,it.call(arguments,1))}}}function st(I,W,te,ne){var ue,$e,Re,We,He,at,pt,ut=W&&W.ownerDocument,vt=W?W.nodeType:9;if(te=te||[],typeof I!="string"||!I||vt!==1&&vt!==9&&vt!==11)return te;if(!ne&&(qn(W),W=W||T,q)){if(vt!==11&&(He=ao.exec(I)))if(ue=He[1]){if(vt===9){if(!(Re=W.getElementById(ue)))return te;if(Re.id===ue)return ee.call(te,Re),te}else if(ut&&(Re=ut.getElementById(ue))&&st.contains(W,Re)&&Re.id===ue)return ee.call(te,Re),te}else{if(He[2])return ee.apply(te,W.getElementsByTagName(I)),te;if((ue=He[3])&&W.getElementsByClassName)return ee.apply(te,W.getElementsByClassName(ue)),te}if(!(en[I+" "]||H&&H.test(I))){if(pt=I,ut=W,vt===1&&(ro.test(I)||ar.test(I))){for((ut=St.test(I)&&To(W.parentNode)||W)==W&&Xe.scope||((We=W.getAttribute("id"))?We=x.escapeSelector(We):W.setAttribute("id",We=ae)),$e=(at=lr(I)).length;$e--;)at[$e]=(We?"#"+We:":scope")+" "+es(at[$e]);pt=at.join(",")}try{return ee.apply(te,ut.querySelectorAll(pt)),te}catch{en(I,!0)}finally{We===ae&&W.removeAttribute("id")}}}return Ki(I.replace(er,"$1"),W,te,ne)}function jt(){var I=[];return function W(te,ne){return I.push(te+" ")>p.cacheLength&&delete W[I.shift()],W[te+" "]=ne}}function Yt(I){return I[ae]=!0,I}function Wt(I){var W=T.createElement("fieldset");try{return!!I(W)}catch{return!1}finally{W.parentNode&&W.parentNode.removeChild(W),W=null}}function Ao(I){return function(W){return Ee(W,"input")&&W.type===I}}function _s(I){return function(W){return(Ee(W,"input")||Ee(W,"button"))&&W.type===I}}function ir(I){return function(W){return"form"in W?W.parentNode&&W.disabled===!1?"label"in W?"label"in W.parentNode?W.parentNode.disabled===I:W.disabled===I:W.isDisabled===I||W.isDisabled!==!I&&_n(W)===I:W.disabled===I:"label"in W&&W.disabled===I}}function Tr(I){return Yt(function(W){return W=+W,Yt(function(te,ne){for(var ue,$e=I([],te.length,W),Re=$e.length;Re--;)te[ue=$e[Re]]&&(te[ue]=!(ne[ue]=te[ue]))})})}function To(I){return I&&typeof I.getElementsByTagName<"u"&&I}function qn(I){var W,te=I?I.ownerDocument||I:po;return te!=T&&te.nodeType===9&&te.documentElement&&(O=(T=te).documentElement,q=!x.isXMLDoc(T),K=O.matches||O.webkitMatchesSelector||O.msMatchesSelector,O.msMatchesSelector&&po!=T&&(W=T.defaultView)&&W.top!==W&&W.addEventListener("unload",Ko),Xe.getById=Wt(function(ne){return O.appendChild(ne).id=x.expando,!T.getElementsByName||!T.getElementsByName(x.expando).length}),Xe.disconnectedMatch=Wt(function(ne){return K.call(ne,"*")}),Xe.scope=Wt(function(){return T.querySelectorAll(":scope")}),Xe.cssHas=Wt(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Xe.getById?(p.filter.ID=function(ne){var ue=ne.replace($t,kn);return function($e){return $e.getAttribute("id")===ue}},p.find.ID=function(ne,ue){if(typeof ue.getElementById<"u"&&q){var $e=ue.getElementById(ne);return $e?[$e]:[]}}):(p.filter.ID=function(ne){var ue=ne.replace($t,kn);return function($e){var Re=typeof $e.getAttributeNode<"u"&&$e.getAttributeNode("id");return Re&&Re.value===ue}},p.find.ID=function(ne,ue){if(typeof ue.getElementById<"u"&&q){var $e,Re,We,He=ue.getElementById(ne);if(He){if(($e=He.getAttributeNode("id"))&&$e.value===ne)return[He];for(We=ue.getElementsByName(ne),Re=0;He=We[Re++];)if(($e=He.getAttributeNode("id"))&&$e.value===ne)return[He]}return[]}}),p.find.TAG=function(ne,ue){return typeof ue.getElementsByTagName<"u"?ue.getElementsByTagName(ne):ue.querySelectorAll(ne)},p.find.CLASS=function(ne,ue){if(typeof ue.getElementsByClassName<"u"&&q)return ue.getElementsByClassName(ne)},H=[],Wt(function(ne){var ue;O.appendChild(ne).innerHTML="<a id='"+ae+"' href='' disabled='disabled'></a><select id='"+ae+"-\r\\' disabled='disabled'><option selected=''></option></select>",ne.querySelectorAll("[selected]").length||H.push("\\["+mt+"*(?:value|"+on+")"),ne.querySelectorAll("[id~="+ae+"-]").length||H.push("~="),ne.querySelectorAll("a#"+ae+"+*").length||H.push(".#.+[+~]"),ne.querySelectorAll(":checked").length||H.push(":checked"),(ue=T.createElement("input")).setAttribute("type","hidden"),ne.appendChild(ue).setAttribute("name","D"),O.appendChild(ne).disabled=!0,ne.querySelectorAll(":disabled").length!==2&&H.push(":enabled",":disabled"),(ue=T.createElement("input")).setAttribute("name",""),ne.appendChild(ue),ne.querySelectorAll("[name='']").length||H.push("\\["+mt+"*name"+mt+"*="+mt+`*(?:''|"")`)}),Xe.cssHas||H.push(":has"),H=H.length&&new RegExp(H.join("|")),dn=function(ne,ue){if(ne===ue)return _=!0,0;var $e=!ne.compareDocumentPosition-!ue.compareDocumentPosition;return $e||(1&($e=(ne.ownerDocument||ne)==(ue.ownerDocument||ue)?ne.compareDocumentPosition(ue):1)||!Xe.sortDetached&&ue.compareDocumentPosition(ne)===$e?ne===T||ne.ownerDocument==po&&st.contains(po,ne)?-1:ue===T||ue.ownerDocument==po&&st.contains(po,ue)?1:w?Zt.call(w,ne)-Zt.call(w,ue):0:4&$e?-1:1)}),T}for(u in st.matches=function(I,W){return st(I,null,null,W)},st.matchesSelector=function(I,W){if(qn(I),q&&!en[W+" "]&&(!H||!H.test(W)))try{var te=K.call(I,W);if(te||Xe.disconnectedMatch||I.document&&I.document.nodeType!==11)return te}catch{en(W,!0)}return 0<st(W,T,null,[I]).length},st.contains=function(I,W){return(I.ownerDocument||I)!=T&&qn(I),x.contains(I,W)},st.attr=function(I,W){(I.ownerDocument||I)!=T&&qn(I);var te=p.attrHandle[W.toLowerCase()],ne=te&&On.call(p.attrHandle,W.toLowerCase())?te(I,W,!q):void 0;return ne!==void 0?ne:I.getAttribute(W)},st.error=function(I){throw new Error("Syntax error, unrecognized expression: "+I)},x.uniqueSort=function(I){var W,te=[],ne=0,ue=0;if(_=!Xe.sortStable,w=!Xe.sortStable&&it.call(I,0),Ks.call(I,dn),_){for(;W=I[ue++];)W===I[ue]&&(ne=te.push(ue));for(;ne--;)fe.call(I,te[ne],1)}return w=null,I},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(it.apply(this)))},(p=x.expr={cacheLength:50,createPseudo:Yt,match:Ln,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(I){return I[1]=I[1].replace($t,kn),I[3]=(I[3]||I[4]||I[5]||"").replace($t,kn),I[2]==="~="&&(I[3]=" "+I[3]+" "),I.slice(0,4)},CHILD:function(I){return I[1]=I[1].toLowerCase(),I[1].slice(0,3)==="nth"?(I[3]||st.error(I[0]),I[4]=+(I[4]?I[5]+(I[6]||1):2*(I[3]==="even"||I[3]==="odd")),I[5]=+(I[7]+I[8]||I[3]==="odd")):I[3]&&st.error(I[0]),I},PSEUDO:function(I){var W,te=!I[6]&&I[2];return Ln.CHILD.test(I[0])?null:(I[3]?I[2]=I[4]||I[5]||"":te&&so.test(te)&&(W=lr(te,!0))&&(W=te.indexOf(")",te.length-W)-te.length)&&(I[0]=I[0].slice(0,W),I[2]=te.slice(0,W)),I.slice(0,3))}},filter:{TAG:function(I){var W=I.replace($t,kn).toLowerCase();return I==="*"?function(){return!0}:function(te){return Ee(te,W)}},CLASS:function(I){var W=De[I+" "];return W||(W=new RegExp("(^|"+mt+")"+I+"("+mt+"|$)"))&&De(I,function(te){return W.test(typeof te.className=="string"&&te.className||typeof te.getAttribute<"u"&&te.getAttribute("class")||"")})},ATTR:function(I,W,te){return function(ne){var ue=st.attr(ne,I);return ue==null?W==="!=":!W||(ue+="",W==="="?ue===te:W==="!="?ue!==te:W==="^="?te&&ue.indexOf(te)===0:W==="*="?te&&-1<ue.indexOf(te):W==="$="?te&&ue.slice(-te.length)===te:W==="~="?-1<(" "+ue.replace(_t," ")+" ").indexOf(te):W==="|="&&(ue===te||ue.slice(0,te.length+1)===te+"-"))}},CHILD:function(I,W,te,ne,ue){var $e=I.slice(0,3)!=="nth",Re=I.slice(-4)!=="last",We=W==="of-type";return ne===1&&ue===0?function(He){return!!He.parentNode}:function(He,at,pt){var ut,vt,Pe,Ht,Cn,un=$e!==Re?"nextSibling":"previousSibling",Nn=He.parentNode,io=We&&He.nodeName.toLowerCase(),Ro=!pt&&!We,qt=!1;if(Nn){if($e){for(;un;){for(Pe=He;Pe=Pe[un];)if(We?Ee(Pe,io):Pe.nodeType===1)return!1;Cn=un=I==="only"&&!Cn&&"nextSibling"}return!0}if(Cn=[Re?Nn.firstChild:Nn.lastChild],Re&&Ro){for(qt=(Ht=(ut=(vt=Nn[ae]||(Nn[ae]={}))[I]||[])[0]===Z&&ut[1])&&ut[2],Pe=Ht&&Nn.childNodes[Ht];Pe=++Ht&&Pe&&Pe[un]||(qt=Ht=0)||Cn.pop();)if(Pe.nodeType===1&&++qt&&Pe===He){vt[I]=[Z,Ht,qt];break}}else if(Ro&&(qt=Ht=(ut=(vt=He[ae]||(He[ae]={}))[I]||[])[0]===Z&&ut[1]),qt===!1)for(;(Pe=++Ht&&Pe&&Pe[un]||(qt=Ht=0)||Cn.pop())&&!((We?Ee(Pe,io):Pe.nodeType===1)&&++qt&&(Ro&&((vt=Pe[ae]||(Pe[ae]={}))[I]=[Z,qt]),Pe===He)););return(qt-=ue)===ne||qt%ne==0&&0<=qt/ne}}},PSEUDO:function(I,W){var te,ne=p.pseudos[I]||p.setFilters[I.toLowerCase()]||st.error("unsupported pseudo: "+I);return ne[ae]?ne(W):1<ne.length?(te=[I,I,"",W],p.setFilters.hasOwnProperty(I.toLowerCase())?Yt(function(ue,$e){for(var Re,We=ne(ue,W),He=We.length;He--;)ue[Re=Zt.call(ue,We[He])]=!($e[Re]=We[He])}):function(ue){return ne(ue,0,te)}):ne}},pseudos:{not:Yt(function(I){var W=[],te=[],ne=Ya(I.replace(er,"$1"));return ne[ae]?Yt(function(ue,$e,Re,We){for(var He,at=ne(ue,null,We,[]),pt=ue.length;pt--;)(He=at[pt])&&(ue[pt]=!($e[pt]=He))}):function(ue,$e,Re){return W[0]=ue,ne(W,null,Re,te),W[0]=null,!te.pop()}}),has:Yt(function(I){return function(W){return 0<st(I,W).length}}),contains:Yt(function(I){return I=I.replace($t,kn),function(W){return-1<(W.textContent||x.text(W)).indexOf(I)}}),lang:Yt(function(I){return ks.test(I||"")||st.error("unsupported lang: "+I),I=I.replace($t,kn).toLowerCase(),function(W){var te;do if(te=q?W.lang:W.getAttribute("xml:lang")||W.getAttribute("lang"))return(te=te.toLowerCase())===I||te.indexOf(I+"-")===0;while((W=W.parentNode)&&W.nodeType===1);return!1}}),target:function(I){var W=be.location&&be.location.hash;return W&&W.slice(1)===I.id},root:function(I){return I===O},focus:function(I){return I===function(){try{return T.activeElement}catch{}}()&&T.hasFocus()&&!!(I.type||I.href||~I.tabIndex)},enabled:ir(!1),disabled:ir(!0),checked:function(I){return Ee(I,"input")&&!!I.checked||Ee(I,"option")&&!!I.selected},selected:function(I){return I.parentNode&&I.parentNode.selectedIndex,I.selected===!0},empty:function(I){for(I=I.firstChild;I;I=I.nextSibling)if(I.nodeType<6)return!1;return!0},parent:function(I){return!p.pseudos.empty(I)},header:function(I){return Zr.test(I.nodeName)},input:function(I){return bo.test(I.nodeName)},button:function(I){return Ee(I,"input")&&I.type==="button"||Ee(I,"button")},text:function(I){var W;return Ee(I,"input")&&I.type==="text"&&((W=I.getAttribute("type"))==null||W.toLowerCase()==="text")},first:Tr(function(){return[0]}),last:Tr(function(I,W){return[W-1]}),eq:Tr(function(I,W,te){return[te<0?te+W:te]}),even:Tr(function(I,W){for(var te=0;te<W;te+=2)I.push(te);return I}),odd:Tr(function(I,W){for(var te=1;te<W;te+=2)I.push(te);return I}),lt:Tr(function(I,W,te){var ne;for(ne=te<0?te+W:W<te?W:te;0<=--ne;)I.push(ne);return I}),gt:Tr(function(I,W,te){for(var ne=te<0?te+W:te;++ne<W;)I.push(ne);return I})}}).pseudos.nth=p.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})p.pseudos[u]=Ao(u);for(u in{submit:!0,reset:!0})p.pseudos[u]=_s(u);function Ka(){}function lr(I,W){var te,ne,ue,$e,Re,We,He,at=lt[I+" "];if(at)return W?0:at.slice(0);for(Re=I,We=[],He=p.preFilter;Re;){for($e in te&&!(ne=Mt.exec(Re))||(ne&&(Re=Re.slice(ne[0].length)||Re),We.push(ue=[])),te=!1,(ne=ar.exec(Re))&&(te=ne.shift(),ue.push({value:te,type:ne[0].replace(er," ")}),Re=Re.slice(te.length)),p.filter)!(ne=Ln[$e].exec(Re))||He[$e]&&!(ne=He[$e](ne))||(te=ne.shift(),ue.push({value:te,type:$e,matches:ne}),Re=Re.slice(te.length));if(!te)break}return W?Re.length:Re?st.error(I):lt(I,We).slice(0)}function es(I){for(var W=0,te=I.length,ne="";W<te;W++)ne+=I[W].value;return ne}function cr(I,W,te){var ne=W.dir,ue=W.next,$e=ue||ne,Re=te&&$e==="parentNode",We=me++;return W.first?function(He,at,pt){for(;He=He[ne];)if(He.nodeType===1||Re)return I(He,at,pt);return!1}:function(He,at,pt){var ut,vt,Pe=[Z,We];if(pt){for(;He=He[ne];)if((He.nodeType===1||Re)&&I(He,at,pt))return!0}else for(;He=He[ne];)if(He.nodeType===1||Re)if(vt=He[ae]||(He[ae]={}),ue&&Ee(He,ue))He=He[ne]||He;else{if((ut=vt[$e])&&ut[0]===Z&&ut[1]===We)return Pe[2]=ut[2];if((vt[$e]=Pe)[2]=I(He,at,pt))return!0}return!1}}function Xo(I){return 1<I.length?function(W,te,ne){for(var ue=I.length;ue--;)if(!I[ue](W,te,ne))return!1;return!0}:I[0]}function Xa(I,W,te,ne,ue){for(var $e,Re=[],We=0,He=I.length,at=W!=null;We<He;We++)($e=I[We])&&(te&&!te($e,ne,ue)||(Re.push($e),at&&W.push(We)));return Re}function Ns(I,W,te,ne,ue,$e){return ne&&!ne[ae]&&(ne=Ns(ne)),ue&&!ue[ae]&&(ue=Ns(ue,$e)),Yt(function(Re,We,He,at){var pt,ut,vt,Pe,Ht=[],Cn=[],un=We.length,Nn=Re||function(Ro,qt,vo){for(var Zn=0,As=qt.length;Zn<As;Zn++)st(Ro,qt[Zn],vo);return vo}(W||"*",He.nodeType?[He]:He,[]),io=!I||!Re&&W?Nn:Xa(Nn,Ht,I,He,at);if(te?te(io,Pe=ue||(Re?I:un||ne)?[]:We,He,at):Pe=io,ne)for(pt=Xa(Pe,Cn),ne(pt,[],He,at),ut=pt.length;ut--;)(vt=pt[ut])&&(Pe[Cn[ut]]=!(io[Cn[ut]]=vt));if(Re){if(ue||I){if(ue){for(pt=[],ut=Pe.length;ut--;)(vt=Pe[ut])&&pt.push(io[ut]=vt);ue(null,Pe=[],pt,at)}for(ut=Pe.length;ut--;)(vt=Pe[ut])&&-1<(pt=ue?Zt.call(Re,vt):Ht[ut])&&(Re[pt]=!(We[pt]=vt))}}else Pe=Xa(Pe===We?Pe.splice(un,Pe.length):Pe),ue?ue(null,We,Pe,at):ee.apply(We,Pe)})}function ts(I){for(var W,te,ne,ue=I.length,$e=p.relative[I[0].type],Re=$e||p.relative[" "],We=$e?1:0,He=cr(function(ut){return ut===W},Re,!0),at=cr(function(ut){return-1<Zt.call(W,ut)},Re,!0),pt=[function(ut,vt,Pe){var Ht=!$e&&(Pe||vt!=y)||((W=vt).nodeType?He(ut,vt,Pe):at(ut,vt,Pe));return W=null,Ht}];We<ue;We++)if(te=p.relative[I[We].type])pt=[cr(Xo(pt),te)];else{if((te=p.filter[I[We].type].apply(null,I[We].matches))[ae]){for(ne=++We;ne<ue&&!p.relative[I[ne].type];ne++);return Ns(1<We&&Xo(pt),1<We&&es(I.slice(0,We-1).concat({value:I[We-2].type===" "?"*":""})).replace(er,"$1"),te,We<ne&&ts(I.slice(We,ne)),ne<ue&&ts(I=I.slice(ne)),ne<ue&&es(I))}pt.push(te)}return Xo(pt)}function Ya(I,W){var te,ne,ue,$e,Re,We,He=[],at=[],pt=B[I+" "];if(!pt){for(W||(W=lr(I)),te=W.length;te--;)(pt=ts(W[te]))[ae]?He.push(pt):at.push(pt);(pt=B(I,(ne=at,$e=0<(ue=He).length,Re=0<ne.length,We=function(ut,vt,Pe,Ht,Cn){var un,Nn,io,Ro=0,qt="0",vo=ut&&[],Zn=[],As=y,Ga=ut||Re&&p.find.TAG("*",Cn),Xi=Z+=As==null?1:Math.random()||.1,xc=Ga.length;for(Cn&&(y=vt==T||vt||Cn);qt!==xc&&(un=Ga[qt])!=null;qt++){if(Re&&un){for(Nn=0,vt||un.ownerDocument==T||(qn(un),Pe=!q);io=ne[Nn++];)if(io(un,vt||T,Pe)){ee.call(Ht,un);break}Cn&&(Z=Xi)}$e&&((un=!io&&un)&&Ro--,ut&&vo.push(un))}if(Ro+=qt,$e&&qt!==Ro){for(Nn=0;io=ue[Nn++];)io(vo,Zn,vt,Pe);if(ut){if(0<Ro)for(;qt--;)vo[qt]||Zn[qt]||(Zn[qt]=wn.call(Ht));Zn=Xa(Zn)}ee.apply(Ht,Zn),Cn&&!ut&&0<Zn.length&&1<Ro+ue.length&&x.uniqueSort(Ht)}return Cn&&(Z=Xi,y=As),vo},$e?Yt(We):We))).selector=I}return pt}function Ki(I,W,te,ne){var ue,$e,Re,We,He,at=typeof I=="function"&&I,pt=!ne&&lr(I=at.selector||I);if(te=te||[],pt.length===1){if(2<($e=pt[0]=pt[0].slice(0)).length&&(Re=$e[0]).type==="ID"&&W.nodeType===9&&q&&p.relative[$e[1].type]){if(!(W=(p.find.ID(Re.matches[0].replace($t,kn),W)||[])[0]))return te;at&&(W=W.parentNode),I=I.slice($e.shift().value.length)}for(ue=Ln.needsContext.test(I)?0:$e.length;ue--&&(Re=$e[ue],!p.relative[We=Re.type]);)if((He=p.find[We])&&(ne=He(Re.matches[0].replace($t,kn),St.test($e[0].type)&&To(W.parentNode)||W))){if($e.splice(ue,1),!(I=ne.length&&es($e)))return ee.apply(te,ne),te;break}}return(at||Ya(I,pt))(ne,W,!q,te,!W||St.test(I)&&To(W.parentNode)||W),te}Ka.prototype=p.filters=p.pseudos,p.setFilters=new Ka,Xe.sortStable=ae.split("").sort(dn).join("")===ae,qn(),Xe.sortDetached=Wt(function(I){return 1&I.compareDocumentPosition(T.createElement("fieldset"))}),x.find=st,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,st.compile=Ya,st.select=Ki,st.setDocument=qn,st.tokenize=lr,st.escape=x.escapeSelector,st.getText=x.text,st.isXML=x.isXMLDoc,st.selectors=x.expr,st.support=x.support,st.uniqueSort=x.uniqueSort})();var Yn=function(u,p,y){for(var w=[],_=y!==void 0;(u=u[p])&&u.nodeType!==9;)if(u.nodeType===1){if(_&&x(u).is(y))break;w.push(u)}return w},yt=function(u,p){for(var y=[];u;u=u.nextSibling)u.nodeType===1&&u!==p&&y.push(u);return y},zt=x.expr.match.needsContext,k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Cr(u,p,y){return Me(p)?x.grep(u,function(w,_){return!!p.call(w,_,w)!==y}):p.nodeType?x.grep(u,function(w){return w===p!==y}):typeof p!="string"?x.grep(u,function(w){return-1<Zt.call(p,w)!==y}):x.filter(p,u,y)}x.filter=function(u,p,y){var w=p[0];return y&&(u=":not("+u+")"),p.length===1&&w.nodeType===1?x.find.matchesSelector(w,u)?[w]:[]:x.find.matches(u,x.grep(p,function(_){return _.nodeType===1}))},x.fn.extend({find:function(u){var p,y,w=this.length,_=this;if(typeof u!="string")return this.pushStack(x(u).filter(function(){for(p=0;p<w;p++)if(x.contains(_[p],this))return!0}));for(y=this.pushStack([]),p=0;p<w;p++)x.find(u,_[p],y);return 1<w?x.uniqueSort(y):y},filter:function(u){return this.pushStack(Cr(this,u||[],!1))},not:function(u){return this.pushStack(Cr(this,u||[],!0))},is:function(u){return!!Cr(this,typeof u=="string"&&zt.test(u)?x(u):u||[],!1).length}});var _e,rt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(u,p,y){var w,_;if(!u)return this;if(y=y||_e,typeof u=="string"){if(!(w=u[0]==="<"&&u[u.length-1]===">"&&3<=u.length?[null,u,null]:rt.exec(u))||!w[1]&&p)return!p||p.jquery?(p||y).find(u):this.constructor(p).find(u);if(w[1]){if(p=p instanceof x?p[0]:p,x.merge(this,x.parseHTML(w[1],p&&p.nodeType?p.ownerDocument||p:Je,!0)),k.test(w[1])&&x.isPlainObject(p))for(w in p)Me(this[w])?this[w](p[w]):this.attr(w,p[w]);return this}return(_=Je.getElementById(w[2]))&&(this[0]=_,this.length=1),this}return u.nodeType?(this[0]=u,this.length=1,this):Me(u)?y.ready!==void 0?y.ready(u):u(x):x.makeArray(u,this)}).prototype=x.fn,_e=x(Je);var dt=/^(?:parents|prev(?:Until|All))/,Te={children:!0,contents:!0,next:!0,prev:!0};function kt(u,p){for(;(u=u[p])&&u.nodeType!==1;);return u}x.fn.extend({has:function(u){var p=x(u,this),y=p.length;return this.filter(function(){for(var w=0;w<y;w++)if(x.contains(this,p[w]))return!0})},closest:function(u,p){var y,w=0,_=this.length,T=[],O=typeof u!="string"&&x(u);if(!zt.test(u)){for(;w<_;w++)for(y=this[w];y&&y!==p;y=y.parentNode)if(y.nodeType<11&&(O?-1<O.index(y):y.nodeType===1&&x.find.matchesSelector(y,u))){T.push(y);break}}return this.pushStack(1<T.length?x.uniqueSort(T):T)},index:function(u){return u?typeof u=="string"?Zt.call(x(u),this[0]):Zt.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,p){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(u,p))))},addBack:function(u){return this.add(u==null?this.prevObject:this.prevObject.filter(u))}}),x.each({parent:function(u){var p=u.parentNode;return p&&p.nodeType!==11?p:null},parents:function(u){return Yn(u,"parentNode")},parentsUntil:function(u,p,y){return Yn(u,"parentNode",y)},next:function(u){return kt(u,"nextSibling")},prev:function(u){return kt(u,"previousSibling")},nextAll:function(u){return Yn(u,"nextSibling")},prevAll:function(u){return Yn(u,"previousSibling")},nextUntil:function(u,p,y){return Yn(u,"nextSibling",y)},prevUntil:function(u,p,y){return Yn(u,"previousSibling",y)},siblings:function(u){return yt((u.parentNode||{}).firstChild,u)},children:function(u){return yt(u.firstChild)},contents:function(u){return u.contentDocument!=null&&Ve(u.contentDocument)?u.contentDocument:(Ee(u,"template")&&(u=u.content||u),x.merge([],u.childNodes))}},function(u,p){x.fn[u]=function(y,w){var _=x.map(this,p,y);return u.slice(-5)!=="Until"&&(w=y),w&&typeof w=="string"&&(_=x.filter(w,_)),1<this.length&&(Te[u]||x.uniqueSort(_),dt.test(u)&&_.reverse()),this.pushStack(_)}});var ot=/[^\x20\t\r\n\f]+/g;function J(u){return u}function xr(u){throw u}function qo(u,p,y,w){var _;try{u&&Me(_=u.promise)?_.call(u).done(p).fail(y):u&&Me(_=u.then)?_.call(u,p,y):p.apply(void 0,[u].slice(w))}catch(T){y.apply(void 0,[T])}}x.Callbacks=function(u){var p,y;u=typeof u=="string"?(p=u,y={},x.each(p.match(ot)||[],function(Z,me){y[me]=!0}),y):x.extend({},u);var w,_,T,O,q=[],H=[],K=-1,ee=function(){for(O=O||u.once,T=w=!0;H.length;K=-1)for(_=H.shift();++K<q.length;)q[K].apply(_[0],_[1])===!1&&u.stopOnFalse&&(K=q.length,_=!1);u.memory||(_=!1),w=!1,O&&(q=_?[]:"")},ae={add:function(){return q&&(_&&!w&&(K=q.length-1,H.push(_)),function Z(me){x.each(me,function(De,lt){Me(lt)?u.unique&&ae.has(lt)||q.push(lt):lt&&lt.length&&wt(lt)!=="string"&&Z(lt)})}(arguments),_&&!w&&ee()),this},remove:function(){return x.each(arguments,function(Z,me){for(var De;-1<(De=x.inArray(me,q,De));)q.splice(De,1),De<=K&&K--}),this},has:function(Z){return Z?-1<x.inArray(Z,q):0<q.length},empty:function(){return q&&(q=[]),this},disable:function(){return O=H=[],q=_="",this},disabled:function(){return!q},lock:function(){return O=H=[],_||w||(q=_=""),this},locked:function(){return!!O},fireWith:function(Z,me){return O||(me=[Z,(me=me||[]).slice?me.slice():me],H.push(me),w||ee()),this},fire:function(){return ae.fireWith(this,arguments),this},fired:function(){return!!T}};return ae},x.extend({Deferred:function(u){var p=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],y="pending",w={state:function(){return y},always:function(){return _.done(arguments).fail(arguments),this},catch:function(T){return w.then(null,T)},pipe:function(){var T=arguments;return x.Deferred(function(O){x.each(p,function(q,H){var K=Me(T[H[4]])&&T[H[4]];_[H[1]](function(){var ee=K&&K.apply(this,arguments);ee&&Me(ee.promise)?ee.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[H[0]+"With"](this,K?[ee]:arguments)})}),T=null}).promise()},then:function(T,O,q){var H=0;function K(ee,ae,Z,me){return function(){var De=this,lt=arguments,B=function(){var dn,on;if(!(ee<H)){if((dn=Z.apply(De,lt))===ae.promise())throw new TypeError("Thenable self-resolution");on=dn&&(typeof dn=="object"||typeof dn=="function")&&dn.then,Me(on)?me?on.call(dn,K(H,ae,J,me),K(H,ae,xr,me)):(H++,on.call(dn,K(H,ae,J,me),K(H,ae,xr,me),K(H,ae,J,ae.notifyWith))):(Z!==J&&(De=void 0,lt=[dn]),(me||ae.resolveWith)(De,lt))}},en=me?B:function(){try{B()}catch(dn){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(dn,en.error),H<=ee+1&&(Z!==xr&&(De=void 0,lt=[dn]),ae.rejectWith(De,lt))}};ee?en():(x.Deferred.getErrorHook?en.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(en.error=x.Deferred.getStackHook()),be.setTimeout(en))}}return x.Deferred(function(ee){p[0][3].add(K(0,ee,Me(q)?q:J,ee.notifyWith)),p[1][3].add(K(0,ee,Me(T)?T:J)),p[2][3].add(K(0,ee,Me(O)?O:xr))}).promise()},promise:function(T){return T!=null?x.extend(T,w):w}},_={};return x.each(p,function(T,O){var q=O[2],H=O[5];w[O[1]]=q.add,H&&q.add(function(){y=H},p[3-T][2].disable,p[3-T][3].disable,p[0][2].lock,p[0][3].lock),q.add(O[3].fire),_[O[0]]=function(){return _[O[0]+"With"](this===_?void 0:this,arguments),this},_[O[0]+"With"]=q.fireWith}),w.promise(_),u&&u.call(_,_),_},when:function(u){var p=arguments.length,y=p,w=Array(y),_=it.call(arguments),T=x.Deferred(),O=function(q){return function(H){w[q]=this,_[q]=1<arguments.length?it.call(arguments):H,--p||T.resolveWith(w,_)}};if(p<=1&&(qo(u,T.done(O(y)).resolve,T.reject,!p),T.state()==="pending"||Me(_[y]&&_[y].then)))return T.then();for(;y--;)qo(_[y],O(y),T.reject);return T.promise()}});var Ke=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(u,p){be.console&&be.console.warn&&u&&Ke.test(u.name)&&be.console.warn("jQuery.Deferred exception: "+u.message,u.stack,p)},x.readyException=function(u){be.setTimeout(function(){throw u})};var Vr=x.Deferred();function hn(){Je.removeEventListener("DOMContentLoaded",hn),be.removeEventListener("load",hn),x.ready()}x.fn.ready=function(u){return Vr.then(u).catch(function(p){x.readyException(p)}),this},x.extend({isReady:!1,readyWait:1,ready:function(u){(u===!0?--x.readyWait:x.isReady)||(x.isReady=!0)!==u&&0<--x.readyWait||Vr.resolveWith(Je,[x])}}),x.ready.then=Vr.then,Je.readyState==="complete"||Je.readyState!=="loading"&&!Je.documentElement.doScroll?be.setTimeout(x.ready):(Je.addEventListener("DOMContentLoaded",hn),be.addEventListener("load",hn));var $o=function(u,p,y,w,_,T,O){var q=0,H=u.length,K=y==null;if(wt(y)==="object")for(q in _=!0,y)$o(u,p,q,y[q],!0,T,O);else if(w!==void 0&&(_=!0,Me(w)||(O=!0),K&&(O?(p.call(u,w),p=null):(K=p,p=function(ee,ae,Z){return K.call(x(ee),Z)})),p))for(;q<H;q++)p(u[q],y,O?w:w.call(u[q],q,p(u[q],y)));return _?u:K?p.call(u):H?p(u[0],y):T},Gt=/^-ms-/,Xs=/-([a-z])/g;function lc(u,p){return p.toUpperCase()}function Qt(u){return u.replace(Gt,"ms-").replace(Xs,lc)}var oo=function(u){return u.nodeType===1||u.nodeType===9||!+u.nodeType};function tr(){this.expando=x.expando+tr.uid++}tr.uid=1,tr.prototype={cache:function(u){var p=u[this.expando];return p||(p={},oo(u)&&(u.nodeType?u[this.expando]=p:Object.defineProperty(u,this.expando,{value:p,configurable:!0}))),p},set:function(u,p,y){var w,_=this.cache(u);if(typeof p=="string")_[Qt(p)]=y;else for(w in p)_[Qt(w)]=p[w];return _},get:function(u,p){return p===void 0?this.cache(u):u[this.expando]&&u[this.expando][Qt(p)]},access:function(u,p,y){return p===void 0||p&&typeof p=="string"&&y===void 0?this.get(u,p):(this.set(u,p,y),y!==void 0?y:p)},remove:function(u,p){var y,w=u[this.expando];if(w!==void 0){if(p!==void 0)for(y=(p=Array.isArray(p)?p.map(Qt):(p=Qt(p))in w?[p]:p.match(ot)||[]).length;y--;)delete w[p[y]];(p===void 0||x.isEmptyObject(w))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var p=u[this.expando];return p!==void 0&&!x.isEmptyObject(p)}};var et=new tr,Dn=new tr,Kr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ys=/[A-Z]/g;function Sn(u,p,y){var w,_;if(y===void 0&&u.nodeType===1)if(w="data-"+p.replace(Ys,"-$&").toLowerCase(),typeof(y=u.getAttribute(w))=="string"){try{y=(_=y)==="true"||_!=="false"&&(_==="null"?null:_===+_+""?+_:Kr.test(_)?JSON.parse(_):_)}catch{}Dn.set(u,p,y)}else y=void 0;return y}x.extend({hasData:function(u){return Dn.hasData(u)||et.hasData(u)},data:function(u,p,y){return Dn.access(u,p,y)},removeData:function(u,p){Dn.remove(u,p)},_data:function(u,p,y){return et.access(u,p,y)},_removeData:function(u,p){et.remove(u,p)}}),x.fn.extend({data:function(u,p){var y,w,_,T=this[0],O=T&&T.attributes;if(u===void 0){if(this.length&&(_=Dn.get(T),T.nodeType===1&&!et.get(T,"hasDataAttrs"))){for(y=O.length;y--;)O[y]&&(w=O[y].name).indexOf("data-")===0&&(w=Qt(w.slice(5)),Sn(T,w,_[w]));et.set(T,"hasDataAttrs",!0)}return _}return typeof u=="object"?this.each(function(){Dn.set(this,u)}):$o(this,function(q){var H;if(T&&q===void 0)return(H=Dn.get(T,u))!==void 0||(H=Sn(T,u))!==void 0?H:void 0;this.each(function(){Dn.set(this,u,q)})},null,p,1<arguments.length,null,!0)},removeData:function(u){return this.each(function(){Dn.remove(this,u)})}}),x.extend({queue:function(u,p,y){var w;if(u)return p=(p||"fx")+"queue",w=et.get(u,p),y&&(!w||Array.isArray(y)?w=et.access(u,p,x.makeArray(y)):w.push(y)),w||[]},dequeue:function(u,p){p=p||"fx";var y=x.queue(u,p),w=y.length,_=y.shift(),T=x._queueHooks(u,p);_==="inprogress"&&(_=y.shift(),w--),_&&(p==="fx"&&y.unshift("inprogress"),delete T.stop,_.call(u,function(){x.dequeue(u,p)},T)),!w&&T&&T.empty.fire()},_queueHooks:function(u,p){var y=p+"queueHooks";return et.get(u,y)||et.access(u,y,{empty:x.Callbacks("once memory").add(function(){et.remove(u,[p+"queue",y])})})}}),x.fn.extend({queue:function(u,p){var y=2;return typeof u!="string"&&(p=u,u="fx",y--),arguments.length<y?x.queue(this[0],u):p===void 0?this:this.each(function(){var w=x.queue(this,u,p);x._queueHooks(this,u),u==="fx"&&w[0]!=="inprogress"&&x.dequeue(this,u)})},dequeue:function(u){return this.each(function(){x.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,p){var y,w=1,_=x.Deferred(),T=this,O=this.length,q=function(){--w||_.resolveWith(T,[T])};for(typeof u!="string"&&(p=u,u=void 0),u=u||"fx";O--;)(y=et.get(T[O],u+"queueHooks"))&&y.empty&&(w++,y.empty.add(q));return q(),_.promise(p)}});var nr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,bn=new RegExp("^(?:([+-])=|)("+nr+")([a-z%]*)$","i"),Gn=["Top","Right","Bottom","Left"],wr=Je.documentElement,nn=function(u){return x.contains(u.ownerDocument,u)},bu={composed:!0};wr.getRootNode&&(nn=function(u){return x.contains(u.ownerDocument,u)||u.getRootNode(bu)===u.ownerDocument});var Ct=function(u,p){return(u=p||u).style.display==="none"||u.style.display===""&&nn(u)&&x.css(u,"display")==="none"};function gs(u,p,y,w){var _,T,O=20,q=w?function(){return w.cur()}:function(){return x.css(u,p,"")},H=q(),K=y&&y[3]||(x.cssNumber[p]?"":"px"),ee=u.nodeType&&(x.cssNumber[p]||K!=="px"&&+H)&&bn.exec(x.css(u,p));if(ee&&ee[3]!==K){for(H/=2,K=K||ee[3],ee=+H||1;O--;)x.style(u,p,ee+K),(1-T)*(1-(T=q()/H||.5))<=0&&(O=0),ee/=T;ee*=2,x.style(u,p,ee+K),y=y||[]}return y&&(ee=+ee||+H||0,_=y[1]?ee+(y[1]+1)*y[2]:+y[2],w&&(w.unit=K,w.start=ee,w.end=_)),_}var cc={};function Sr(u,p){for(var y,w,_,T,O,q,H,K=[],ee=0,ae=u.length;ee<ae;ee++)(w=u[ee]).style&&(y=w.style.display,p?(y==="none"&&(K[ee]=et.get(w,"display")||null,K[ee]||(w.style.display="")),w.style.display===""&&Ct(w)&&(K[ee]=(H=O=T=void 0,O=(_=w).ownerDocument,q=_.nodeName,(H=cc[q])||(T=O.body.appendChild(O.createElement(q)),H=x.css(T,"display"),T.parentNode.removeChild(T),H==="none"&&(H="block"),cc[q]=H)))):y!=="none"&&(K[ee]="none",et.set(w,"display",y)));for(ee=0;ee<ae;ee++)K[ee]!=null&&(u[ee].style.display=K[ee]);return u}x.fn.extend({show:function(){return Sr(this,!0)},hide:function(){return Sr(this)},toggle:function(u){return typeof u=="boolean"?u?this.show():this.hide():this.each(function(){Ct(this)?x(this).show():x(this).hide()})}});var Er,kr,_r=/^(?:checkbox|radio)$/i,za=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ot=/^$|^module$|\/(?:java|ecma)script/i;Er=Je.createDocumentFragment().appendChild(Je.createElement("div")),(kr=Je.createElement("input")).setAttribute("type","radio"),kr.setAttribute("checked","checked"),kr.setAttribute("name","t"),Er.appendChild(kr),Xe.checkClone=Er.cloneNode(!0).cloneNode(!0).lastChild.checked,Er.innerHTML="<textarea>x</textarea>",Xe.noCloneChecked=!!Er.cloneNode(!0).lastChild.defaultValue,Er.innerHTML="<option></option>",Xe.option=!!Er.lastChild;var Fe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ln(u,p){var y;return y=typeof u.getElementsByTagName<"u"?u.getElementsByTagName(p||"*"):typeof u.querySelectorAll<"u"?u.querySelectorAll(p||"*"):[],p===void 0||p&&Ee(u,p)?x.merge([u],y):y}function Ua(u,p){for(var y=0,w=u.length;y<w;y++)et.set(u[y],"globalEval",!p||et.get(p[y],"globalEval"))}Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,Xe.option||(Fe.optgroup=Fe.option=[1,"<select multiple='multiple'>","</select>"]);var dc=/<|&#?\w+;/;function Ha(u,p,y,w,_){for(var T,O,q,H,K,ee,ae=p.createDocumentFragment(),Z=[],me=0,De=u.length;me<De;me++)if((T=u[me])||T===0)if(wt(T)==="object")x.merge(Z,T.nodeType?[T]:T);else if(dc.test(T)){for(O=O||ae.appendChild(p.createElement("div")),q=(za.exec(T)||["",""])[1].toLowerCase(),H=Fe[q]||Fe._default,O.innerHTML=H[1]+x.htmlPrefilter(T)+H[2],ee=H[0];ee--;)O=O.lastChild;x.merge(Z,O.childNodes),(O=ae.firstChild).textContent=""}else Z.push(p.createTextNode(T));for(ae.textContent="",me=0;T=Z[me++];)if(w&&-1<x.inArray(T,w))_&&_.push(T);else if(K=nn(T),O=ln(ae.appendChild(T),"script"),K&&Ua(O),y)for(ee=0;T=O[ee++];)Ot.test(T.type||"")&&y.push(T);return ae}var Gs=/^([^.]*)(?:\.(.+)|)/;function Nr(){return!0}function Wo(){return!1}function hs(u,p,y,w,_,T){var O,q;if(typeof p=="object"){for(q in typeof y!="string"&&(w=w||y,y=void 0),p)hs(u,q,y,w,p[q],T);return u}if(w==null&&_==null?(_=y,w=y=void 0):_==null&&(typeof y=="string"?(_=w,w=void 0):(_=w,w=y,y=void 0)),_===!1)_=Wo;else if(!_)return u;return T===1&&(O=_,(_=function(H){return x().off(H),O.apply(this,arguments)}).guid=O.guid||(O.guid=x.guid++)),u.each(function(){x.event.add(this,p,_,w,y)})}function Qs(u,p,y){y?(et.set(u,p,!1),x.event.add(u,p,{namespace:!1,handler:function(w){var _,T=et.get(this,p);if(1&w.isTrigger&&this[p]){if(T)(x.event.special[p]||{}).delegateType&&w.stopPropagation();else if(T=it.call(arguments),et.set(this,p,T),this[p](),_=et.get(this,p),et.set(this,p,!1),T!==_)return w.stopImmediatePropagation(),w.preventDefault(),_}else T&&(et.set(this,p,x.event.trigger(T[0],T.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=Nr)}})):et.get(u,p)===void 0&&x.event.add(u,p,Nr)}x.event={global:{},add:function(u,p,y,w,_){var T,O,q,H,K,ee,ae,Z,me,De,lt,B=et.get(u);if(oo(u))for(y.handler&&(y=(T=y).handler,_=T.selector),_&&x.find.matchesSelector(wr,_),y.guid||(y.guid=x.guid++),(H=B.events)||(H=B.events=Object.create(null)),(O=B.handle)||(O=B.handle=function(en){return typeof x<"u"&&x.event.triggered!==en.type?x.event.dispatch.apply(u,arguments):void 0}),K=(p=(p||"").match(ot)||[""]).length;K--;)me=lt=(q=Gs.exec(p[K])||[])[1],De=(q[2]||"").split(".").sort(),me&&(ae=x.event.special[me]||{},me=(_?ae.delegateType:ae.bindType)||me,ae=x.event.special[me]||{},ee=x.extend({type:me,origType:lt,data:w,handler:y,guid:y.guid,selector:_,needsContext:_&&x.expr.match.needsContext.test(_),namespace:De.join(".")},T),(Z=H[me])||((Z=H[me]=[]).delegateCount=0,ae.setup&&ae.setup.call(u,w,De,O)!==!1||u.addEventListener&&u.addEventListener(me,O)),ae.add&&(ae.add.call(u,ee),ee.handler.guid||(ee.handler.guid=y.guid)),_?Z.splice(Z.delegateCount++,0,ee):Z.push(ee),x.event.global[me]=!0)},remove:function(u,p,y,w,_){var T,O,q,H,K,ee,ae,Z,me,De,lt,B=et.hasData(u)&&et.get(u);if(B&&(H=B.events)){for(K=(p=(p||"").match(ot)||[""]).length;K--;)if(me=lt=(q=Gs.exec(p[K])||[])[1],De=(q[2]||"").split(".").sort(),me){for(ae=x.event.special[me]||{},Z=H[me=(w?ae.delegateType:ae.bindType)||me]||[],q=q[2]&&new RegExp("(^|\\.)"+De.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=T=Z.length;T--;)ee=Z[T],!_&&lt!==ee.origType||y&&y.guid!==ee.guid||q&&!q.test(ee.namespace)||w&&w!==ee.selector&&(w!=="**"||!ee.selector)||(Z.splice(T,1),ee.selector&&Z.delegateCount--,ae.remove&&ae.remove.call(u,ee));O&&!Z.length&&(ae.teardown&&ae.teardown.call(u,De,B.handle)!==!1||x.removeEvent(u,me,B.handle),delete H[me])}else for(me in H)x.event.remove(u,me+p[K],y,w,!0);x.isEmptyObject(H)&&et.remove(u,"handle events")}},dispatch:function(u){var p,y,w,_,T,O,q=new Array(arguments.length),H=x.event.fix(u),K=(et.get(this,"events")||Object.create(null))[H.type]||[],ee=x.event.special[H.type]||{};for(q[0]=H,p=1;p<arguments.length;p++)q[p]=arguments[p];if(H.delegateTarget=this,!ee.preDispatch||ee.preDispatch.call(this,H)!==!1){for(O=x.event.handlers.call(this,H,K),p=0;(_=O[p++])&&!H.isPropagationStopped();)for(H.currentTarget=_.elem,y=0;(T=_.handlers[y++])&&!H.isImmediatePropagationStopped();)H.rnamespace&&T.namespace!==!1&&!H.rnamespace.test(T.namespace)||(H.handleObj=T,H.data=T.data,(w=((x.event.special[T.origType]||{}).handle||T.handler).apply(_.elem,q))!==void 0&&(H.result=w)===!1&&(H.preventDefault(),H.stopPropagation()));return ee.postDispatch&&ee.postDispatch.call(this,H),H.result}},handlers:function(u,p){var y,w,_,T,O,q=[],H=p.delegateCount,K=u.target;if(H&&K.nodeType&&!(u.type==="click"&&1<=u.button)){for(;K!==this;K=K.parentNode||this)if(K.nodeType===1&&(u.type!=="click"||K.disabled!==!0)){for(T=[],O={},y=0;y<H;y++)O[_=(w=p[y]).selector+" "]===void 0&&(O[_]=w.needsContext?-1<x(_,this).index(K):x.find(_,this,null,[K]).length),O[_]&&T.push(w);T.length&&q.push({elem:K,handlers:T})}}return K=this,H<p.length&&q.push({elem:K,handlers:p.slice(H)}),q},addProp:function(u,p){Object.defineProperty(x.Event.prototype,u,{enumerable:!0,configurable:!0,get:Me(p)?function(){if(this.originalEvent)return p(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(y){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(u){return u[x.expando]?u:new x.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var p=this||u;return _r.test(p.type)&&p.click&&Ee(p,"input")&&Qs(p,"click",!0),!1},trigger:function(u){var p=this||u;return _r.test(p.type)&&p.click&&Ee(p,"input")&&Qs(p,"click"),!0},_default:function(u){var p=u.target;return _r.test(p.type)&&p.click&&Ee(p,"input")&&et.get(p,"click")||Ee(p,"a")}},beforeunload:{postDispatch:function(u){u.result!==void 0&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}},x.removeEvent=function(u,p,y){u.removeEventListener&&u.removeEventListener(p,y)},x.Event=function(u,p){if(!(this instanceof x.Event))return new x.Event(u,p);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||u.defaultPrevented===void 0&&u.returnValue===!1?Nr:Wo,this.target=u.target&&u.target.nodeType===3?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,p&&x.extend(this,p),this.timeStamp=u&&u.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Wo,isPropagationStopped:Wo,isImmediatePropagationStopped:Wo,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=Nr,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=Nr,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=Nr,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(u,p){function y(w){if(Je.documentMode){var _=et.get(this,"handle"),T=x.event.fix(w);T.type=w.type==="focusin"?"focus":"blur",T.isSimulated=!0,_(w),T.target===T.currentTarget&&_(T)}else x.event.simulate(p,w.target,x.event.fix(w))}x.event.special[u]={setup:function(){var w;if(Qs(this,u,!0),!Je.documentMode)return!1;(w=et.get(this,p))||this.addEventListener(p,y),et.set(this,p,(w||0)+1)},trigger:function(){return Qs(this,u),!0},teardown:function(){var w;if(!Je.documentMode)return!1;(w=et.get(this,p)-1)?et.set(this,p,w):(this.removeEventListener(p,y),et.remove(this,p))},_default:function(w){return et.get(w.target,u)},delegateType:p},x.event.special[p]={setup:function(){var w=this.ownerDocument||this.document||this,_=Je.documentMode?this:w,T=et.get(_,p);T||(Je.documentMode?this.addEventListener(p,y):w.addEventListener(u,y,!0)),et.set(_,p,(T||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,_=Je.documentMode?this:w,T=et.get(_,p)-1;T?et.set(_,p,T):(Je.documentMode?this.removeEventListener(p,y):w.removeEventListener(u,y,!0),et.remove(_,p))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,p){x.event.special[u]={delegateType:p,bindType:p,handle:function(y){var w,_=y.relatedTarget,T=y.handleObj;return _&&(_===this||x.contains(this,_))||(y.type=T.origType,w=T.handler.apply(this,arguments),y.type=p),w}}}),x.fn.extend({on:function(u,p,y,w){return hs(this,u,p,y,w)},one:function(u,p,y,w){return hs(this,u,p,y,w,1)},off:function(u,p,y){var w,_;if(u&&u.preventDefault&&u.handleObj)return w=u.handleObj,x(u.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if(typeof u=="object"){for(_ in u)this.off(_,p,u[_]);return this}return p!==!1&&typeof p!="function"||(y=p,p=void 0),y===!1&&(y=Wo),this.each(function(){x.event.remove(this,u,y,p)})}});var Xr=/<script|<style|<link/i,Vo=/checked\s*(?:[^=]|=\s*.checked.)/i,uc=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function qa(u,p){return Ee(u,"table")&&Ee(p.nodeType!==11?p:p.firstChild,"tr")&&x(u).children("tbody")[0]||u}function Js(u){return u.type=(u.getAttribute("type")!==null)+"/"+u.type,u}function fc(u){return(u.type||"").slice(0,5)==="true/"?u.type=u.type.slice(5):u.removeAttribute("type"),u}function Li(u,p){var y,w,_,T,O,q;if(p.nodeType===1){if(et.hasData(u)&&(q=et.get(u).events))for(_ in et.remove(p,"handle events"),q)for(y=0,w=q[_].length;y<w;y++)x.event.add(p,_,q[_][y]);Dn.hasData(u)&&(T=Dn.access(u),O=x.extend({},T),Dn.set(p,O))}}function Yr(u,p,y,w){p=Xt(p);var _,T,O,q,H,K,ee=0,ae=u.length,Z=ae-1,me=p[0],De=Me(me);if(De||1<ae&&typeof me=="string"&&!Xe.checkClone&&Vo.test(me))return u.each(function(lt){var B=u.eq(lt);De&&(p[0]=me.call(this,lt,B.html())),Yr(B,p,y,w)});if(ae&&(T=(_=Ha(p,u[0].ownerDocument,!1,u,w)).firstChild,_.childNodes.length===1&&(_=T),T||w)){for(q=(O=x.map(ln(_,"script"),Js)).length;ee<ae;ee++)H=_,ee!==Z&&(H=x.clone(H,!0,!0),q&&x.merge(O,ln(H,"script"))),y.call(u[ee],H,ee);if(q)for(K=O[O.length-1].ownerDocument,x.map(O,fc),ee=0;ee<q;ee++)H=O[ee],Ot.test(H.type||"")&&!et.access(H,"globalEval")&&x.contains(K,H)&&(H.src&&(H.type||"").toLowerCase()!=="module"?x._evalUrl&&!H.noModule&&x._evalUrl(H.src,{nonce:H.nonce||H.getAttribute("nonce")},K):Ft(H.textContent.replace(uc,""),H,K))}return u}function cn(u,p,y){for(var w,_=p?x.filter(p,u):u,T=0;(w=_[T])!=null;T++)y||w.nodeType!==1||x.cleanData(ln(w)),w.parentNode&&(y&&nn(w)&&Ua(ln(w,"script")),w.parentNode.removeChild(w));return u}x.extend({htmlPrefilter:function(u){return u},clone:function(u,p,y){var w,_,T,O,q,H,K,ee=u.cloneNode(!0),ae=nn(u);if(!(Xe.noCloneChecked||u.nodeType!==1&&u.nodeType!==11||x.isXMLDoc(u)))for(O=ln(ee),w=0,_=(T=ln(u)).length;w<_;w++)q=T[w],H=O[w],(K=H.nodeName.toLowerCase())==="input"&&_r.test(q.type)?H.checked=q.checked:K!=="input"&&K!=="textarea"||(H.defaultValue=q.defaultValue);if(p)if(y)for(T=T||ln(u),O=O||ln(ee),w=0,_=T.length;w<_;w++)Li(T[w],O[w]);else Li(u,ee);return 0<(O=ln(ee,"script")).length&&Ua(O,!ae&&ln(u,"script")),ee},cleanData:function(u){for(var p,y,w,_=x.event.special,T=0;(y=u[T])!==void 0;T++)if(oo(y)){if(p=y[et.expando]){if(p.events)for(w in p.events)_[w]?x.event.remove(y,w):x.removeEvent(y,w,p.handle);y[et.expando]=void 0}y[Dn.expando]&&(y[Dn.expando]=void 0)}}}),x.fn.extend({detach:function(u){return cn(this,u,!0)},remove:function(u){return cn(this,u)},text:function(u){return $o(this,function(p){return p===void 0?x.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=p)})},null,u,arguments.length)},append:function(){return Yr(this,arguments,function(u){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||qa(this,u).appendChild(u)})},prepend:function(){return Yr(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var p=qa(this,u);p.insertBefore(u,p.firstChild)}})},before:function(){return Yr(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return Yr(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,p=0;(u=this[p])!=null;p++)u.nodeType===1&&(x.cleanData(ln(u,!1)),u.textContent="");return this},clone:function(u,p){return u=u!=null&&u,p=p??u,this.map(function(){return x.clone(this,u,p)})},html:function(u){return $o(this,function(p){var y=this[0]||{},w=0,_=this.length;if(p===void 0&&y.nodeType===1)return y.innerHTML;if(typeof p=="string"&&!Xr.test(p)&&!Fe[(za.exec(p)||["",""])[1].toLowerCase()]){p=x.htmlPrefilter(p);try{for(;w<_;w++)(y=this[w]||{}).nodeType===1&&(x.cleanData(ln(y,!1)),y.innerHTML=p);y=0}catch{}}y&&this.empty().append(p)},null,u,arguments.length)},replaceWith:function(){var u=[];return Yr(this,arguments,function(p){var y=this.parentNode;x.inArray(this,u)<0&&(x.cleanData(ln(this)),y&&y.replaceChild(p,this))},u)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,p){x.fn[u]=function(y){for(var w,_=[],T=x(y),O=T.length-1,q=0;q<=O;q++)w=q===O?this:this.clone(!0),x(T[q])[p](w),Rn.apply(_,w.get());return this.pushStack(_)}});var Kt=new RegExp("^("+nr+")(?!px)[a-z%]+$","i"),Zs=/^--/,bs=function(u){var p=u.ownerDocument.defaultView;return p&&p.opener||(p=be),p.getComputedStyle(u)},Gr=function(u,p,y){var w,_,T={};for(_ in p)T[_]=u.style[_],u.style[_]=p[_];for(_ in w=y.call(u),p)u.style[_]=T[_];return w},vu=new RegExp(Gn.join("|"),"i");function vs(u,p,y){var w,_,T,O,q=Zs.test(p),H=u.style;return(y=y||bs(u))&&(O=y.getPropertyValue(p)||y[p],q&&O&&(O=O.replace(er,"$1")||void 0),O!==""||nn(u)||(O=x.style(u,p)),!Xe.pixelBoxStyles()&&Kt.test(O)&&vu.test(p)&&(w=H.width,_=H.minWidth,T=H.maxWidth,H.minWidth=H.maxWidth=H.width=O,O=y.width,H.width=w,H.minWidth=_,H.maxWidth=T)),O!==void 0?O+"":O}function Eo(u,p){return{get:function(){if(!u())return(this.get=p).apply(this,arguments);delete this.get}}}(function(){function u(){if(K){H.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",wr.appendChild(H).appendChild(K);var ee=be.getComputedStyle(K);y=ee.top!=="1%",q=p(ee.marginLeft)===12,K.style.right="60%",T=p(ee.right)===36,w=p(ee.width)===36,K.style.position="absolute",_=p(K.offsetWidth/3)===12,wr.removeChild(H),K=null}}function p(ee){return Math.round(parseFloat(ee))}var y,w,_,T,O,q,H=Je.createElement("div"),K=Je.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",Xe.clearCloneStyle=K.style.backgroundClip==="content-box",x.extend(Xe,{boxSizingReliable:function(){return u(),w},pixelBoxStyles:function(){return u(),T},pixelPosition:function(){return u(),y},reliableMarginLeft:function(){return u(),q},scrollboxSize:function(){return u(),_},reliableTrDimensions:function(){var ee,ae,Z,me;return O==null&&(ee=Je.createElement("table"),ae=Je.createElement("tr"),Z=Je.createElement("div"),ee.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ae.style.cssText="box-sizing:content-box;border:1px solid",ae.style.height="1px",Z.style.height="9px",Z.style.display="block",wr.appendChild(ee).appendChild(ae).appendChild(Z),me=be.getComputedStyle(ae),O=parseInt(me.height,10)+parseInt(me.borderTopWidth,10)+parseInt(me.borderBottomWidth,10)===ae.offsetHeight,wr.removeChild(ee)),O}}))})();var ys=["Webkit","Moz","ms"],ea=Je.createElement("div").style,$a={};function ko(u){var p=x.cssProps[u]||$a[u];return p||(u in ea?u:$a[u]=function(y){for(var w=y[0].toUpperCase()+y.slice(1),_=ys.length;_--;)if((y=ys[_]+w)in ea)return y}(u)||u)}var yu=/^(none|table(?!-c[ea]).+)/,Cu={position:"absolute",visibility:"hidden",display:"block"},Mi={letterSpacing:"0",fontWeight:"400"};function Ii(u,p,y){var w=bn.exec(p);return w?Math.max(0,w[2]-(y||0))+(w[3]||"px"):p}function Wa(u,p,y,w,_,T){var O=p==="width"?1:0,q=0,H=0,K=0;if(y===(w?"border":"content"))return 0;for(;O<4;O+=2)y==="margin"&&(K+=x.css(u,y+Gn[O],!0,_)),w?(y==="content"&&(H-=x.css(u,"padding"+Gn[O],!0,_)),y!=="margin"&&(H-=x.css(u,"border"+Gn[O]+"Width",!0,_))):(H+=x.css(u,"padding"+Gn[O],!0,_),y!=="padding"?H+=x.css(u,"border"+Gn[O]+"Width",!0,_):q+=x.css(u,"border"+Gn[O]+"Width",!0,_));return!w&&0<=T&&(H+=Math.max(0,Math.ceil(u["offset"+p[0].toUpperCase()+p.slice(1)]-T-H-q-.5))||0),H+K}function Fi(u,p,y){var w=bs(u),_=(!Xe.boxSizingReliable()||y)&&x.css(u,"boxSizing",!1,w)==="border-box",T=_,O=vs(u,p,w),q="offset"+p[0].toUpperCase()+p.slice(1);if(Kt.test(O)){if(!y)return O;O="auto"}return(!Xe.boxSizingReliable()&&_||!Xe.reliableTrDimensions()&&Ee(u,"tr")||O==="auto"||!parseFloat(O)&&x.css(u,"display",!1,w)==="inline")&&u.getClientRects().length&&(_=x.css(u,"boxSizing",!1,w)==="border-box",(T=q in u)&&(O=u[q])),(O=parseFloat(O)||0)+Wa(u,p,y||(_?"border":"content"),T,w,O)+"px"}function go(u,p,y,w,_){return new go.prototype.init(u,p,y,w,_)}x.extend({cssHooks:{opacity:{get:function(u,p){if(p){var y=vs(u,"opacity");return y===""?"1":y}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(u,p,y,w){if(u&&u.nodeType!==3&&u.nodeType!==8&&u.style){var _,T,O,q=Qt(p),H=Zs.test(p),K=u.style;if(H||(p=ko(q)),O=x.cssHooks[p]||x.cssHooks[q],y===void 0)return O&&"get"in O&&(_=O.get(u,!1,w))!==void 0?_:K[p];(T=typeof y)=="string"&&(_=bn.exec(y))&&_[1]&&(y=gs(u,p,_),T="number"),y!=null&&y==y&&(T!=="number"||H||(y+=_&&_[3]||(x.cssNumber[q]?"":"px")),Xe.clearCloneStyle||y!==""||p.indexOf("background")!==0||(K[p]="inherit"),O&&"set"in O&&(y=O.set(u,y,w))===void 0||(H?K.setProperty(p,y):K[p]=y))}},css:function(u,p,y,w){var _,T,O,q=Qt(p);return Zs.test(p)||(p=ko(q)),(O=x.cssHooks[p]||x.cssHooks[q])&&"get"in O&&(_=O.get(u,!0,y)),_===void 0&&(_=vs(u,p,w)),_==="normal"&&p in Mi&&(_=Mi[p]),y===""||y?(T=parseFloat(_),y===!0||isFinite(T)?T||0:_):_}}),x.each(["height","width"],function(u,p){x.cssHooks[p]={get:function(y,w,_){if(w)return!yu.test(x.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?Fi(y,p,_):Gr(y,Cu,function(){return Fi(y,p,_)})},set:function(y,w,_){var T,O=bs(y),q=!Xe.scrollboxSize()&&O.position==="absolute",H=(q||_)&&x.css(y,"boxSizing",!1,O)==="border-box",K=_?Wa(y,p,_,H,O):0;return H&&q&&(K-=Math.ceil(y["offset"+p[0].toUpperCase()+p.slice(1)]-parseFloat(O[p])-Wa(y,p,"border",!1,O)-.5)),K&&(T=bn.exec(w))&&(T[3]||"px")!=="px"&&(y.style[p]=w,w=x.css(y,p)),Ii(0,w,K)}}}),x.cssHooks.marginLeft=Eo(Xe.reliableMarginLeft,function(u,p){if(p)return(parseFloat(vs(u,"marginLeft"))||u.getBoundingClientRect().left-Gr(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(u,p){x.cssHooks[u+p]={expand:function(y){for(var w=0,_={},T=typeof y=="string"?y.split(" "):[y];w<4;w++)_[u+Gn[w]+p]=T[w]||T[w-2]||T[0];return _}},u!=="margin"&&(x.cssHooks[u+p].set=Ii)}),x.fn.extend({css:function(u,p){return $o(this,function(y,w,_){var T,O,q={},H=0;if(Array.isArray(w)){for(T=bs(y),O=w.length;H<O;H++)q[w[H]]=x.css(y,w[H],!1,T);return q}return _!==void 0?x.style(y,w,_):x.css(y,w)},u,p,1<arguments.length)}}),((x.Tween=go).prototype={constructor:go,init:function(u,p,y,w,_,T){this.elem=u,this.prop=y,this.easing=_||x.easing._default,this.options=p,this.start=this.now=this.cur(),this.end=w,this.unit=T||(x.cssNumber[y]?"":"px")},cur:function(){var u=go.propHooks[this.prop];return u&&u.get?u.get(this):go.propHooks._default.get(this)},run:function(u){var p,y=go.propHooks[this.prop];return this.options.duration?this.pos=p=x.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):this.pos=p=u,this.now=(this.end-this.start)*p+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):go.propHooks._default.set(this),this}}).init.prototype=go.prototype,(go.propHooks={_default:{get:function(u){var p;return u.elem.nodeType!==1||u.elem[u.prop]!=null&&u.elem.style[u.prop]==null?u.elem[u.prop]:(p=x.css(u.elem,u.prop,""))&&p!=="auto"?p:0},set:function(u){x.fx.step[u.prop]?x.fx.step[u.prop](u):u.elem.nodeType!==1||!x.cssHooks[u.prop]&&u.elem.style[ko(u.prop)]==null?u.elem[u.prop]=u.now:x.style(u.elem,u.prop,u.now+u.unit)}}}).scrollTop=go.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},x.easing={linear:function(u){return u},swing:function(u){return .5-Math.cos(u*Math.PI)/2},_default:"swing"},x.fx=go.prototype.init,x.fx.step={};var Qr,ta,Cs,mc,pc=/^(?:toggle|show|hide)$/,gc=/queueHooks$/;function Va(){ta&&(Je.hidden===!1&&be.requestAnimationFrame?be.requestAnimationFrame(Va):be.setTimeout(Va,x.fx.interval),x.fx.tick())}function ji(){return be.setTimeout(function(){Qr=void 0}),Qr=Date.now()}function na(u,p){var y,w=0,_={height:u};for(p=p?1:0;w<4;w+=2-p)_["margin"+(y=Gn[w])]=_["padding"+y]=u;return p&&(_.opacity=_.width=u),_}function zi(u,p,y){for(var w,_=(ho.tweeners[p]||[]).concat(ho.tweeners["*"]),T=0,O=_.length;T<O;T++)if(w=_[T].call(y,p,u))return w}function ho(u,p,y){var w,_,T=0,O=ho.prefilters.length,q=x.Deferred().always(function(){delete H.elem}),H=function(){if(_)return!1;for(var ae=Qr||ji(),Z=Math.max(0,K.startTime+K.duration-ae),me=1-(Z/K.duration||0),De=0,lt=K.tweens.length;De<lt;De++)K.tweens[De].run(me);return q.notifyWith(u,[K,me,Z]),me<1&&lt?Z:(lt||q.notifyWith(u,[K,1,0]),q.resolveWith(u,[K]),!1)},K=q.promise({elem:u,props:x.extend({},p),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},y),originalProperties:p,originalOptions:y,startTime:Qr||ji(),duration:y.duration,tweens:[],createTween:function(ae,Z){var me=x.Tween(u,K.opts,ae,Z,K.opts.specialEasing[ae]||K.opts.easing);return K.tweens.push(me),me},stop:function(ae){var Z=0,me=ae?K.tweens.length:0;if(_)return this;for(_=!0;Z<me;Z++)K.tweens[Z].run(1);return ae?(q.notifyWith(u,[K,1,0]),q.resolveWith(u,[K,ae])):q.rejectWith(u,[K,ae]),this}}),ee=K.props;for(!function(ae,Z){var me,De,lt,B,en;for(me in ae)if(lt=Z[De=Qt(me)],B=ae[me],Array.isArray(B)&&(lt=B[1],B=ae[me]=B[0]),me!==De&&(ae[De]=B,delete ae[me]),(en=x.cssHooks[De])&&"expand"in en)for(me in B=en.expand(B),delete ae[De],B)me in ae||(ae[me]=B[me],Z[me]=lt);else Z[De]=lt}(ee,K.opts.specialEasing);T<O;T++)if(w=ho.prefilters[T].call(K,u,ee,K.opts))return Me(w.stop)&&(x._queueHooks(K.elem,K.opts.queue).stop=w.stop.bind(w)),w;return x.map(ee,zi,K),Me(K.opts.start)&&K.opts.start.call(u,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),x.fx.timer(x.extend(H,{elem:u,anim:K,queue:K.opts.queue})),K}x.Animation=x.extend(ho,{tweeners:{"*":[function(u,p){var y=this.createTween(u,p);return gs(y.elem,u,bn.exec(p),y),y}]},tweener:function(u,p){Me(u)?(p=u,u=["*"]):u=u.match(ot);for(var y,w=0,_=u.length;w<_;w++)y=u[w],ho.tweeners[y]=ho.tweeners[y]||[],ho.tweeners[y].unshift(p)},prefilters:[function(u,p,y){var w,_,T,O,q,H,K,ee,ae="width"in p||"height"in p,Z=this,me={},De=u.style,lt=u.nodeType&&Ct(u),B=et.get(u,"fxshow");for(w in y.queue||((O=x._queueHooks(u,"fx")).unqueued==null&&(O.unqueued=0,q=O.empty.fire,O.empty.fire=function(){O.unqueued||q()}),O.unqueued++,Z.always(function(){Z.always(function(){O.unqueued--,x.queue(u,"fx").length||O.empty.fire()})})),p)if(_=p[w],pc.test(_)){if(delete p[w],T=T||_==="toggle",_===(lt?"hide":"show")){if(_!=="show"||!B||B[w]===void 0)continue;lt=!0}me[w]=B&&B[w]||x.style(u,w)}if((H=!x.isEmptyObject(p))||!x.isEmptyObject(me))for(w in ae&&u.nodeType===1&&(y.overflow=[De.overflow,De.overflowX,De.overflowY],(K=B&&B.display)==null&&(K=et.get(u,"display")),(ee=x.css(u,"display"))==="none"&&(K?ee=K:(Sr([u],!0),K=u.style.display||K,ee=x.css(u,"display"),Sr([u]))),(ee==="inline"||ee==="inline-block"&&K!=null)&&x.css(u,"float")==="none"&&(H||(Z.done(function(){De.display=K}),K==null&&(ee=De.display,K=ee==="none"?"":ee)),De.display="inline-block")),y.overflow&&(De.overflow="hidden",Z.always(function(){De.overflow=y.overflow[0],De.overflowX=y.overflow[1],De.overflowY=y.overflow[2]})),H=!1,me)H||(B?"hidden"in B&&(lt=B.hidden):B=et.access(u,"fxshow",{display:K}),T&&(B.hidden=!lt),lt&&Sr([u],!0),Z.done(function(){for(w in lt||Sr([u]),et.remove(u,"fxshow"),me)x.style(u,w,me[w])})),H=zi(lt?B[w]:0,w,Z),w in B||(B[w]=H.start,lt&&(H.end=H.start,H.start=0))}],prefilter:function(u,p){p?ho.prefilters.unshift(u):ho.prefilters.push(u)}}),x.speed=function(u,p,y){var w=u&&typeof u=="object"?x.extend({},u):{complete:y||!y&&p||Me(u)&&u,duration:u,easing:y&&p||p&&!Me(p)&&p};return x.fx.off?w.duration=0:typeof w.duration!="number"&&(w.duration in x.fx.speeds?w.duration=x.fx.speeds[w.duration]:w.duration=x.fx.speeds._default),w.queue!=null&&w.queue!==!0||(w.queue="fx"),w.old=w.complete,w.complete=function(){Me(w.old)&&w.old.call(this),w.queue&&x.dequeue(this,w.queue)},w},x.fn.extend({fadeTo:function(u,p,y,w){return this.filter(Ct).css("opacity",0).show().end().animate({opacity:p},u,y,w)},animate:function(u,p,y,w){var _=x.isEmptyObject(u),T=x.speed(p,y,w),O=function(){var q=ho(this,x.extend({},u),T);(_||et.get(this,"finish"))&&q.stop(!0)};return O.finish=O,_||T.queue===!1?this.each(O):this.queue(T.queue,O)},stop:function(u,p,y){var w=function(_){var T=_.stop;delete _.stop,T(y)};return typeof u!="string"&&(y=p,p=u,u=void 0),p&&this.queue(u||"fx",[]),this.each(function(){var _=!0,T=u!=null&&u+"queueHooks",O=x.timers,q=et.get(this);if(T)q[T]&&q[T].stop&&w(q[T]);else for(T in q)q[T]&&q[T].stop&&gc.test(T)&&w(q[T]);for(T=O.length;T--;)O[T].elem!==this||u!=null&&O[T].queue!==u||(O[T].anim.stop(y),_=!1,O.splice(T,1));!_&&y||x.dequeue(this,u)})},finish:function(u){return u!==!1&&(u=u||"fx"),this.each(function(){var p,y=et.get(this),w=y[u+"queue"],_=y[u+"queueHooks"],T=x.timers,O=w?w.length:0;for(y.finish=!0,x.queue(this,u,[]),_&&_.stop&&_.stop.call(this,!0),p=T.length;p--;)T[p].elem===this&&T[p].queue===u&&(T[p].anim.stop(!0),T.splice(p,1));for(p=0;p<O;p++)w[p]&&w[p].finish&&w[p].finish.call(this);delete y.finish})}}),x.each(["toggle","show","hide"],function(u,p){var y=x.fn[p];x.fn[p]=function(w,_,T){return w==null||typeof w=="boolean"?y.apply(this,arguments):this.animate(na(p,!0),w,_,T)}}),x.each({slideDown:na("show"),slideUp:na("hide"),slideToggle:na("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,p){x.fn[u]=function(y,w,_){return this.animate(p,y,w,_)}}),x.timers=[],x.fx.tick=function(){var u,p=0,y=x.timers;for(Qr=Date.now();p<y.length;p++)(u=y[p])()||y[p]!==u||y.splice(p--,1);y.length||x.fx.stop(),Qr=void 0},x.fx.timer=function(u){x.timers.push(u),x.fx.start()},x.fx.interval=13,x.fx.start=function(){ta||(ta=!0,Va())},x.fx.stop=function(){ta=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(u,p){return u=x.fx&&x.fx.speeds[u]||u,p=p||"fx",this.queue(p,function(y,w){var _=be.setTimeout(y,u);w.stop=function(){be.clearTimeout(_)}})},Cs=Je.createElement("input"),mc=Je.createElement("select").appendChild(Je.createElement("option")),Cs.type="checkbox",Xe.checkOn=Cs.value!=="",Xe.optSelected=mc.selected,(Cs=Je.createElement("input")).value="t",Cs.type="radio",Xe.radioValue=Cs.value==="t";var Ui,oa=x.expr.attrHandle;x.fn.extend({attr:function(u,p){return $o(this,x.attr,u,p,1<arguments.length)},removeAttr:function(u){return this.each(function(){x.removeAttr(this,u)})}}),x.extend({attr:function(u,p,y){var w,_,T=u.nodeType;if(T!==3&&T!==8&&T!==2)return typeof u.getAttribute>"u"?x.prop(u,p,y):(T===1&&x.isXMLDoc(u)||(_=x.attrHooks[p.toLowerCase()]||(x.expr.match.bool.test(p)?Ui:void 0)),y!==void 0?y===null?void x.removeAttr(u,p):_&&"set"in _&&(w=_.set(u,y,p))!==void 0?w:(u.setAttribute(p,y+""),y):_&&"get"in _&&(w=_.get(u,p))!==null?w:(w=x.find.attr(u,p))==null?void 0:w)},attrHooks:{type:{set:function(u,p){if(!Xe.radioValue&&p==="radio"&&Ee(u,"input")){var y=u.value;return u.setAttribute("type",p),y&&(u.value=y),p}}}},removeAttr:function(u,p){var y,w=0,_=p&&p.match(ot);if(_&&u.nodeType===1)for(;y=_[w++];)u.removeAttribute(y)}}),Ui={set:function(u,p,y){return p===!1?x.removeAttr(u,y):u.setAttribute(y,y),y}},x.each(x.expr.match.bool.source.match(/\w+/g),function(u,p){var y=oa[p]||x.find.attr;oa[p]=function(w,_,T){var O,q,H=_.toLowerCase();return T||(q=oa[H],oa[H]=O,O=y(w,_,T)!=null?H:null,oa[H]=q),O}});var xu=/^(?:input|select|textarea|button)$/i,wu=/^(?:a|area)$/i;function Jr(u){return(u.match(ot)||[]).join(" ")}function Pn(u){return u.getAttribute&&u.getAttribute("class")||""}function Hi(u){return Array.isArray(u)?u:typeof u=="string"&&u.match(ot)||[]}x.fn.extend({prop:function(u,p){return $o(this,x.prop,u,p,1<arguments.length)},removeProp:function(u){return this.each(function(){delete this[x.propFix[u]||u]})}}),x.extend({prop:function(u,p,y){var w,_,T=u.nodeType;if(T!==3&&T!==8&&T!==2)return T===1&&x.isXMLDoc(u)||(p=x.propFix[p]||p,_=x.propHooks[p]),y!==void 0?_&&"set"in _&&(w=_.set(u,y,p))!==void 0?w:u[p]=y:_&&"get"in _&&(w=_.get(u,p))!==null?w:u[p]},propHooks:{tabIndex:{get:function(u){var p=x.find.attr(u,"tabindex");return p?parseInt(p,10):xu.test(u.nodeName)||wu.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Xe.optSelected||(x.propHooks.selected={get:function(u){var p=u.parentNode;return p&&p.parentNode&&p.parentNode.selectedIndex,null},set:function(u){var p=u.parentNode;p&&(p.selectedIndex,p.parentNode&&p.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(u){var p,y,w,_,T,O;return Me(u)?this.each(function(q){x(this).addClass(u.call(this,q,Pn(this)))}):(p=Hi(u)).length?this.each(function(){if(w=Pn(this),y=this.nodeType===1&&" "+Jr(w)+" "){for(T=0;T<p.length;T++)_=p[T],y.indexOf(" "+_+" ")<0&&(y+=_+" ");O=Jr(y),w!==O&&this.setAttribute("class",O)}}):this},removeClass:function(u){var p,y,w,_,T,O;return Me(u)?this.each(function(q){x(this).removeClass(u.call(this,q,Pn(this)))}):arguments.length?(p=Hi(u)).length?this.each(function(){if(w=Pn(this),y=this.nodeType===1&&" "+Jr(w)+" "){for(T=0;T<p.length;T++)for(_=p[T];-1<y.indexOf(" "+_+" ");)y=y.replace(" "+_+" "," ");O=Jr(y),w!==O&&this.setAttribute("class",O)}}):this:this.attr("class","")},toggleClass:function(u,p){var y,w,_,T,O=typeof u,q=O==="string"||Array.isArray(u);return Me(u)?this.each(function(H){x(this).toggleClass(u.call(this,H,Pn(this),p),p)}):typeof p=="boolean"&&q?p?this.addClass(u):this.removeClass(u):(y=Hi(u),this.each(function(){if(q)for(T=x(this),_=0;_<y.length;_++)w=y[_],T.hasClass(w)?T.removeClass(w):T.addClass(w);else u!==void 0&&O!=="boolean"||((w=Pn(this))&&et.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||u===!1?"":et.get(this,"__className__")||""))}))},hasClass:function(u){var p,y,w=0;for(p=" "+u+" ";y=this[w++];)if(y.nodeType===1&&-1<(" "+Jr(Pn(y))+" ").indexOf(p))return!0;return!1}});var qi=/\r/g;x.fn.extend({val:function(u){var p,y,w,_=this[0];return arguments.length?(w=Me(u),this.each(function(T){var O;this.nodeType===1&&((O=w?u.call(this,T,x(this).val()):u)==null?O="":typeof O=="number"?O+="":Array.isArray(O)&&(O=x.map(O,function(q){return q==null?"":q+""})),(p=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in p&&p.set(this,O,"value")!==void 0||(this.value=O))})):_?(p=x.valHooks[_.type]||x.valHooks[_.nodeName.toLowerCase()])&&"get"in p&&(y=p.get(_,"value"))!==void 0?y:typeof(y=_.value)=="string"?y.replace(qi,""):y??"":void 0}}),x.extend({valHooks:{option:{get:function(u){var p=x.find.attr(u,"value");return p??Jr(x.text(u))}},select:{get:function(u){var p,y,w,_=u.options,T=u.selectedIndex,O=u.type==="select-one",q=O?null:[],H=O?T+1:_.length;for(w=T<0?H:O?T:0;w<H;w++)if(((y=_[w]).selected||w===T)&&!y.disabled&&(!y.parentNode.disabled||!Ee(y.parentNode,"optgroup"))){if(p=x(y).val(),O)return p;q.push(p)}return q},set:function(u,p){for(var y,w,_=u.options,T=x.makeArray(p),O=_.length;O--;)((w=_[O]).selected=-1<x.inArray(x.valHooks.option.get(w),T))&&(y=!0);return y||(u.selectedIndex=-1),T}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(u,p){if(Array.isArray(p))return u.checked=-1<x.inArray(x(u).val(),p)}},Xe.checkOn||(x.valHooks[this].get=function(u){return u.getAttribute("value")===null?"on":u.value})});var Qn=be.location,_o={guid:Date.now()},or=/\?/;x.parseXML=function(u){var p,y;if(!u||typeof u!="string")return null;try{p=new be.DOMParser().parseFromString(u,"text/xml")}catch{}return y=p&&p.getElementsByTagName("parsererror")[0],p&&!y||x.error("Invalid XML: "+(y?x.map(y.childNodes,function(w){return w.textContent}).join(`
`):u)),p};var hc=/^(?:focusinfocus|focusoutblur)$/,gt=function(u){u.stopPropagation()};x.extend(x.event,{trigger:function(u,p,y,w){var _,T,O,q,H,K,ee,ae,Z=[y||Je],me=On.call(u,"type")?u.type:u,De=On.call(u,"namespace")?u.namespace.split("."):[];if(T=ae=O=y=y||Je,y.nodeType!==3&&y.nodeType!==8&&!hc.test(me+x.event.triggered)&&(-1<me.indexOf(".")&&(me=(De=me.split(".")).shift(),De.sort()),H=me.indexOf(":")<0&&"on"+me,(u=u[x.expando]?u:new x.Event(me,typeof u=="object"&&u)).isTrigger=w?2:3,u.namespace=De.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+De.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=y),p=p==null?[u]:x.makeArray(p,[u]),ee=x.event.special[me]||{},w||!ee.trigger||ee.trigger.apply(y,p)!==!1)){if(!w&&!ee.noBubble&&!se(y)){for(q=ee.delegateType||me,hc.test(q+me)||(T=T.parentNode);T;T=T.parentNode)Z.push(T),O=T;O===(y.ownerDocument||Je)&&Z.push(O.defaultView||O.parentWindow||be)}for(_=0;(T=Z[_++])&&!u.isPropagationStopped();)ae=T,u.type=1<_?q:ee.bindType||me,(K=(et.get(T,"events")||Object.create(null))[u.type]&&et.get(T,"handle"))&&K.apply(T,p),(K=H&&T[H])&&K.apply&&oo(T)&&(u.result=K.apply(T,p),u.result===!1&&u.preventDefault());return u.type=me,w||u.isDefaultPrevented()||ee._default&&ee._default.apply(Z.pop(),p)!==!1||!oo(y)||H&&Me(y[me])&&!se(y)&&((O=y[H])&&(y[H]=null),x.event.triggered=me,u.isPropagationStopped()&&ae.addEventListener(me,gt),y[me](),u.isPropagationStopped()&&ae.removeEventListener(me,gt),x.event.triggered=void 0,O&&(y[H]=O)),u.result}},simulate:function(u,p,y){var w=x.extend(new x.Event,y,{type:u,isSimulated:!0});x.event.trigger(w,null,p)}}),x.fn.extend({trigger:function(u,p){return this.each(function(){x.event.trigger(u,p,this)})},triggerHandler:function(u,p){var y=this[0];if(y)return x.event.trigger(u,p,y,!0)}});var Su=/\[\]$/,$i=/\r?\n/g,bc=/^(?:submit|button|image|reset|file)$/i,ce=/^(?:input|select|textarea|keygen)/i;function Ar(u,p,y,w){var _;if(Array.isArray(p))x.each(p,function(T,O){y||Su.test(u)?w(u,O):Ar(u+"["+(typeof O=="object"&&O!=null?T:"")+"]",O,y,w)});else if(y||wt(p)!=="object")w(u,p);else for(_ in p)Ar(u+"["+_+"]",p[_],y,w)}x.param=function(u,p){var y,w=[],_=function(T,O){var q=Me(O)?O():O;w[w.length]=encodeURIComponent(T)+"="+encodeURIComponent(q??"")};if(u==null)return"";if(Array.isArray(u)||u.jquery&&!x.isPlainObject(u))x.each(u,function(){_(this.name,this.value)});else for(y in u)Ar(y,u[y],p,_);return w.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=x.prop(this,"elements");return u?x.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!x(this).is(":disabled")&&ce.test(this.nodeName)&&!bc.test(u)&&(this.checked||!_r.test(u))}).map(function(u,p){var y=x(this).val();return y==null?null:Array.isArray(y)?x.map(y,function(w){return{name:p.name,value:w.replace($i,`\r
`)}}):{name:p.name,value:y.replace($i,`\r
`)}}).get()}});var vc=/%20/g,vn=/#.*$/,xs=/([?&])_=[^&]*/,Eu=/^(.*?):[ \t]*([^\r\n]*)$/gm,yc=/^(?:GET|HEAD)$/,ku=/^\/\//,Cc={},ft={},Wi="*/".concat("*"),ws=Je.createElement("a");function Ss(u){return function(p,y){typeof p!="string"&&(y=p,p="*");var w,_=0,T=p.toLowerCase().match(ot)||[];if(Me(y))for(;w=T[_++];)w[0]==="+"?(w=w.slice(1)||"*",(u[w]=u[w]||[]).unshift(y)):(u[w]=u[w]||[]).push(y)}}function Hn(u,p,y,w){var _={},T=u===ft;function O(q){var H;return _[q]=!0,x.each(u[q]||[],function(K,ee){var ae=ee(p,y,w);return typeof ae!="string"||T||_[ae]?T?!(H=ae):void 0:(p.dataTypes.unshift(ae),O(ae),!1)}),H}return O(p.dataTypes[0])||!_["*"]&&O("*")}function yn(u,p){var y,w,_=x.ajaxSettings.flatOptions||{};for(y in p)p[y]!==void 0&&((_[y]?u:w||(w={}))[y]=p[y]);return w&&x.extend(!0,u,w),u}ws.href=Qn.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Qn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Qn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,p){return p?yn(yn(u,x.ajaxSettings),p):yn(x.ajaxSettings,u)},ajaxPrefilter:Ss(Cc),ajaxTransport:Ss(ft),ajax:function(u,p){typeof u=="object"&&(p=u,u=void 0),p=p||{};var y,w,_,T,O,q,H,K,ee,ae,Z=x.ajaxSetup({},p),me=Z.context||Z,De=Z.context&&(me.nodeType||me.jquery)?x(me):x.event,lt=x.Deferred(),B=x.Callbacks("once memory"),en=Z.statusCode||{},dn={},on={},No="canceled",Ie={readyState:0,getResponseHeader:function(_t){var Mt;if(H){if(!T)for(T={};Mt=Eu.exec(_);)T[Mt[1].toLowerCase()+" "]=(T[Mt[1].toLowerCase()+" "]||[]).concat(Mt[2]);Mt=T[_t.toLowerCase()+" "]}return Mt==null?null:Mt.join(", ")},getAllResponseHeaders:function(){return H?_:null},setRequestHeader:function(_t,Mt){return H==null&&(_t=on[_t.toLowerCase()]=on[_t.toLowerCase()]||_t,dn[_t]=Mt),this},overrideMimeType:function(_t){return H==null&&(Z.mimeType=_t),this},statusCode:function(_t){var Mt;if(_t)if(H)Ie.always(_t[Ie.status]);else for(Mt in _t)en[Mt]=[en[Mt],_t[Mt]];return this},abort:function(_t){var Mt=_t||No;return y&&y.abort(Mt),En(0,Mt),this}};if(lt.promise(Ie),Z.url=((u||Z.url||Qn.href)+"").replace(ku,Qn.protocol+"//"),Z.type=p.method||p.type||Z.method||Z.type,Z.dataTypes=(Z.dataType||"*").toLowerCase().match(ot)||[""],Z.crossDomain==null){q=Je.createElement("a");try{q.href=Z.url,q.href=q.href,Z.crossDomain=ws.protocol+"//"+ws.host!=q.protocol+"//"+q.host}catch{Z.crossDomain=!0}}if(Z.data&&Z.processData&&typeof Z.data!="string"&&(Z.data=x.param(Z.data,Z.traditional)),Hn(Cc,Z,p,Ie),H)return Ie;for(ee in(K=x.event&&Z.global)&&x.active++==0&&x.event.trigger("ajaxStart"),Z.type=Z.type.toUpperCase(),Z.hasContent=!yc.test(Z.type),w=Z.url.replace(vn,""),Z.hasContent?Z.data&&Z.processData&&(Z.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Z.data=Z.data.replace(vc,"+")):(ae=Z.url.slice(w.length),Z.data&&(Z.processData||typeof Z.data=="string")&&(w+=(or.test(w)?"&":"?")+Z.data,delete Z.data),Z.cache===!1&&(w=w.replace(xs,"$1"),ae=(or.test(w)?"&":"?")+"_="+_o.guid+++ae),Z.url=w+ae),Z.ifModified&&(x.lastModified[w]&&Ie.setRequestHeader("If-Modified-Since",x.lastModified[w]),x.etag[w]&&Ie.setRequestHeader("If-None-Match",x.etag[w])),(Z.data&&Z.hasContent&&Z.contentType!==!1||p.contentType)&&Ie.setRequestHeader("Content-Type",Z.contentType),Ie.setRequestHeader("Accept",Z.dataTypes[0]&&Z.accepts[Z.dataTypes[0]]?Z.accepts[Z.dataTypes[0]]+(Z.dataTypes[0]!=="*"?", "+Wi+"; q=0.01":""):Z.accepts["*"]),Z.headers)Ie.setRequestHeader(ee,Z.headers[ee]);if(Z.beforeSend&&(Z.beforeSend.call(me,Ie,Z)===!1||H))return Ie.abort();if(No="abort",B.add(Z.complete),Ie.done(Z.success),Ie.fail(Z.error),y=Hn(ft,Z,p,Ie)){if(Ie.readyState=1,K&&De.trigger("ajaxSend",[Ie,Z]),H)return Ie;Z.async&&0<Z.timeout&&(O=be.setTimeout(function(){Ie.abort("timeout")},Z.timeout));try{H=!1,y.send(dn,En)}catch(_t){if(H)throw _t;En(-1,_t)}}else En(-1,"No Transport");function En(_t,Mt,ar,ro){var so,ks,Ln,bo,Zr,ao=Mt;H||(H=!0,O&&be.clearTimeout(O),y=void 0,_=ro||"",Ie.readyState=0<_t?4:0,so=200<=_t&&_t<300||_t===304,ar&&(bo=function(St,$t,kn){for(var Ko,_n,st,jt,Yt=St.contents,Wt=St.dataTypes;Wt[0]==="*";)Wt.shift(),Ko===void 0&&(Ko=St.mimeType||$t.getResponseHeader("Content-Type"));if(Ko){for(_n in Yt)if(Yt[_n]&&Yt[_n].test(Ko)){Wt.unshift(_n);break}}if(Wt[0]in kn)st=Wt[0];else{for(_n in kn){if(!Wt[0]||St.converters[_n+" "+Wt[0]]){st=_n;break}jt||(jt=_n)}st=st||jt}if(st)return st!==Wt[0]&&Wt.unshift(st),kn[st]}(Z,Ie,ar)),!so&&-1<x.inArray("script",Z.dataTypes)&&x.inArray("json",Z.dataTypes)<0&&(Z.converters["text script"]=function(){}),bo=function(St,$t,kn,Ko){var _n,st,jt,Yt,Wt,Ao={},_s=St.dataTypes.slice();if(_s[1])for(jt in St.converters)Ao[jt.toLowerCase()]=St.converters[jt];for(st=_s.shift();st;)if(St.responseFields[st]&&(kn[St.responseFields[st]]=$t),!Wt&&Ko&&St.dataFilter&&($t=St.dataFilter($t,St.dataType)),Wt=st,st=_s.shift()){if(st==="*")st=Wt;else if(Wt!=="*"&&Wt!==st){if(!(jt=Ao[Wt+" "+st]||Ao["* "+st])){for(_n in Ao)if((Yt=_n.split(" "))[1]===st&&(jt=Ao[Wt+" "+Yt[0]]||Ao["* "+Yt[0]])){jt===!0?jt=Ao[_n]:Ao[_n]!==!0&&(st=Yt[0],_s.unshift(Yt[1]));break}}if(jt!==!0)if(jt&&St.throws)$t=jt($t);else try{$t=jt($t)}catch(ir){return{state:"parsererror",error:jt?ir:"No conversion from "+Wt+" to "+st}}}}return{state:"success",data:$t}}(Z,bo,Ie,so),so?(Z.ifModified&&((Zr=Ie.getResponseHeader("Last-Modified"))&&(x.lastModified[w]=Zr),(Zr=Ie.getResponseHeader("etag"))&&(x.etag[w]=Zr)),_t===204||Z.type==="HEAD"?ao="nocontent":_t===304?ao="notmodified":(ao=bo.state,ks=bo.data,so=!(Ln=bo.error))):(Ln=ao,!_t&&ao||(ao="error",_t<0&&(_t=0))),Ie.status=_t,Ie.statusText=(Mt||ao)+"",so?lt.resolveWith(me,[ks,ao,Ie]):lt.rejectWith(me,[Ie,ao,Ln]),Ie.statusCode(en),en=void 0,K&&De.trigger(so?"ajaxSuccess":"ajaxError",[Ie,Z,so?ks:Ln]),B.fireWith(me,[Ie,ao]),K&&(De.trigger("ajaxComplete",[Ie,Z]),--x.active||x.event.trigger("ajaxStop")))}return Ie},getJSON:function(u,p,y){return x.get(u,p,y,"json")},getScript:function(u,p){return x.get(u,void 0,p,"script")}}),x.each(["get","post"],function(u,p){x[p]=function(y,w,_,T){return Me(w)&&(T=T||_,_=w,w=void 0),x.ajax(x.extend({url:y,type:p,dataType:T,data:w,success:_},x.isPlainObject(y)&&y))}}),x.ajaxPrefilter(function(u){var p;for(p in u.headers)p.toLowerCase()==="content-type"&&(u.contentType=u.headers[p]||"")}),x._evalUrl=function(u,p,y){return x.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){x.globalEval(w,p,y)}})},x.fn.extend({wrapAll:function(u){var p;return this[0]&&(Me(u)&&(u=u.call(this[0])),p=x(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&p.insertBefore(this[0]),p.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(u){return Me(u)?this.each(function(p){x(this).wrapInner(u.call(this,p))}):this.each(function(){var p=x(this),y=p.contents();y.length?y.wrapAll(u):p.append(u)})},wrap:function(u){var p=Me(u);return this.each(function(y){x(this).wrapAll(p?u.call(this,y):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(u){return!x.expr.pseudos.visible(u)},x.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new be.XMLHttpRequest}catch{}};var _u={0:200,1223:204},ra=x.ajaxSettings.xhr();Xe.cors=!!ra&&"withCredentials"in ra,Xe.ajax=ra=!!ra,x.ajaxTransport(function(u){var p,y;if(Xe.cors||ra&&!u.crossDomain)return{send:function(w,_){var T,O=u.xhr();if(O.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(T in u.xhrFields)O[T]=u.xhrFields[T];for(T in u.mimeType&&O.overrideMimeType&&O.overrideMimeType(u.mimeType),u.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)O.setRequestHeader(T,w[T]);p=function(q){return function(){p&&(p=y=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,q==="abort"?O.abort():q==="error"?typeof O.status!="number"?_(0,"error"):_(O.status,O.statusText):_(_u[O.status]||O.status,O.statusText,(O.responseType||"text")!=="text"||typeof O.responseText!="string"?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=p(),y=O.onerror=O.ontimeout=p("error"),O.onabort!==void 0?O.onabort=y:O.onreadystatechange=function(){O.readyState===4&&be.setTimeout(function(){p&&y()})},p=p("abort");try{O.send(u.hasContent&&u.data||null)}catch(q){if(p)throw q}},abort:function(){p&&p()}}}),x.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return x.globalEval(u),u}}}),x.ajaxPrefilter("script",function(u){u.cache===void 0&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),x.ajaxTransport("script",function(u){var p,y;if(u.crossDomain||u.scriptAttrs)return{send:function(w,_){p=x("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",y=function(T){p.remove(),y=null,T&&_(T.type==="error"?404:200,T.type)}),Je.head.appendChild(p[0])},abort:function(){y&&y()}}});var Es,Vi=[],Jt=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=Vi.pop()||x.expando+"_"+_o.guid++;return this[u]=!0,u}}),x.ajaxPrefilter("json jsonp",function(u,p,y){var w,_,T,O=u.jsonp!==!1&&(Jt.test(u.url)?"url":typeof u.data=="string"&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Jt.test(u.data)&&"data");if(O||u.dataTypes[0]==="jsonp")return w=u.jsonpCallback=Me(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,O?u[O]=u[O].replace(Jt,"$1"+w):u.jsonp!==!1&&(u.url+=(or.test(u.url)?"&":"?")+u.jsonp+"="+w),u.converters["script json"]=function(){return T||x.error(w+" was not called"),T[0]},u.dataTypes[0]="json",_=be[w],be[w]=function(){T=arguments},y.always(function(){_===void 0?x(be).removeProp(w):be[w]=_,u[w]&&(u.jsonpCallback=p.jsonpCallback,Vi.push(w)),T&&Me(_)&&_(T[0]),T=_=void 0}),"script"}),Xe.createHTMLDocument=((Es=Je.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",Es.childNodes.length===2),x.parseHTML=function(u,p,y){return typeof u!="string"?[]:(typeof p=="boolean"&&(y=p,p=!1),p||(Xe.createHTMLDocument?((w=(p=Je.implementation.createHTMLDocument("")).createElement("base")).href=Je.location.href,p.head.appendChild(w)):p=Je),T=!y&&[],(_=k.exec(u))?[p.createElement(_[1])]:(_=Ha([u],p,T),T&&T.length&&x(T).remove(),x.merge([],_.childNodes)));var w,_,T},x.fn.load=function(u,p,y){var w,_,T,O=this,q=u.indexOf(" ");return-1<q&&(w=Jr(u.slice(q)),u=u.slice(0,q)),Me(p)?(y=p,p=void 0):p&&typeof p=="object"&&(_="POST"),0<O.length&&x.ajax({url:u,type:_||"GET",dataType:"html",data:p}).done(function(H){T=arguments,O.html(w?x("<div>").append(x.parseHTML(H)).find(w):H)}).always(y&&function(H,K){O.each(function(){y.apply(this,T||[H.responseText,K,H])})}),this},x.expr.pseudos.animated=function(u){return x.grep(x.timers,function(p){return u===p.elem}).length},x.offset={setOffset:function(u,p,y){var w,_,T,O,q,H,K=x.css(u,"position"),ee=x(u),ae={};K==="static"&&(u.style.position="relative"),q=ee.offset(),T=x.css(u,"top"),H=x.css(u,"left"),(K==="absolute"||K==="fixed")&&-1<(T+H).indexOf("auto")?(O=(w=ee.position()).top,_=w.left):(O=parseFloat(T)||0,_=parseFloat(H)||0),Me(p)&&(p=p.call(u,y,x.extend({},q))),p.top!=null&&(ae.top=p.top-q.top+O),p.left!=null&&(ae.left=p.left-q.left+_),"using"in p?p.using.call(u,ae):ee.css(ae)}},x.fn.extend({offset:function(u){if(arguments.length)return u===void 0?this:this.each(function(_){x.offset.setOffset(this,u,_)});var p,y,w=this[0];return w?w.getClientRects().length?(p=w.getBoundingClientRect(),y=w.ownerDocument.defaultView,{top:p.top+y.pageYOffset,left:p.left+y.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var u,p,y,w=this[0],_={top:0,left:0};if(x.css(w,"position")==="fixed")p=w.getBoundingClientRect();else{for(p=this.offset(),y=w.ownerDocument,u=w.offsetParent||y.documentElement;u&&(u===y.body||u===y.documentElement)&&x.css(u,"position")==="static";)u=u.parentNode;u&&u!==w&&u.nodeType===1&&((_=x(u).offset()).top+=x.css(u,"borderTopWidth",!0),_.left+=x.css(u,"borderLeftWidth",!0))}return{top:p.top-_.top-x.css(w,"marginTop",!0),left:p.left-_.left-x.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&x.css(u,"position")==="static";)u=u.offsetParent;return u||wr})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,p){var y=p==="pageYOffset";x.fn[u]=function(w){return $o(this,function(_,T,O){var q;if(se(_)?q=_:_.nodeType===9&&(q=_.defaultView),O===void 0)return q?q[p]:_[T];q?q.scrollTo(y?q.pageXOffset:O,y?O:q.pageYOffset):_[T]=O},u,w,arguments.length)}}),x.each(["top","left"],function(u,p){x.cssHooks[p]=Eo(Xe.pixelPosition,function(y,w){if(w)return w=vs(y,p),Kt.test(w)?x(y).position()[p]+"px":w})}),x.each({Height:"height",Width:"width"},function(u,p){x.each({padding:"inner"+u,content:p,"":"outer"+u},function(y,w){x.fn[w]=function(_,T){var O=arguments.length&&(y||typeof _!="boolean"),q=y||(_===!0||T===!0?"margin":"border");return $o(this,function(H,K,ee){var ae;return se(H)?w.indexOf("outer")===0?H["inner"+u]:H.document.documentElement["client"+u]:H.nodeType===9?(ae=H.documentElement,Math.max(H.body["scroll"+u],ae["scroll"+u],H.body["offset"+u],ae["offset"+u],ae["client"+u])):ee===void 0?x.css(H,K,q):x.style(H,K,ee,q)},p,O?_:void 0,O)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,p){x.fn[p]=function(y){return this.on(p,y)}}),x.fn.extend({bind:function(u,p,y){return this.on(u,null,p,y)},unbind:function(u,p){return this.off(u,null,p)},delegate:function(u,p,y,w){return this.on(p,u,y,w)},undelegate:function(u,p,y){return arguments.length===1?this.off(u,"**"):this.off(p,u||"**",y)},hover:function(u,p){return this.on("mouseenter",u).on("mouseleave",p||u)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,p){x.fn[p]=function(y,w){return 0<arguments.length?this.on(p,null,y,w):this.trigger(p)}});var rr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(u,p){var y,w,_;if(typeof p=="string"&&(y=u[p],p=u,u=y),Me(u))return w=it.call(arguments,2),(_=function(){return u.apply(p||this,w.concat(it.call(arguments)))}).guid=u.guid=u.guid||x.guid++,_},x.holdReady=function(u){u?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=Ee,x.isFunction=Me,x.isWindow=se,x.camelCase=Qt,x.type=wt,x.now=Date.now,x.isNumeric=function(u){var p=x.type(u);return(p==="number"||p==="string")&&!isNaN(u-parseFloat(u))},x.trim=function(u){return u==null?"":(u+"").replace(rr,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return x});var Jn=be.jQuery,sr=be.$;return x.noConflict=function(u){return be.$===x&&(be.$=sr),u&&be.jQuery===x&&(be.jQuery=Jn),x},typeof Ge>"u"&&(be.jQuery=be.$=x),x}),function(be){be.imageArea=function(Ge,Qe){var Ve=Ge.options,it=Ge.$image,Xt=Ge.$trigger,Rn,Zt,Xn,wo={},On,So=!0,Ae=!0,Xe=[0,0],Me=[0,0],se={id:Qe,x:0,y:0,z:0,height:0,width:0},Je=function(){se.z=0,fe("blur")},gn=function(){Ge.blurAll(),se.z=100,fe()},Ft=function(){return se},wt=function(_e){it.trigger(_e,[se.id,Ge.areas()])},le=function(_e){var rt=_e||window.event||{};rt.cancelBubble=!0,rt.returnValue=!1,rt.stopPropagation&&rt.stopPropagation(),rt.preventDefault&&rt.preventDefault()},bt=function(){be.each(arguments,function(_e,rt){x(rt)})},x=function(_e,rt){var dt,Te;switch(_e){case"start":dt="mousedown",Te="touchstart";break;case"move":dt="mousemove",Te="touchmove";break;case"stop":dt="mouseup",Te="touchend";break;default:return}rt&&jQuery.isFunction(rt)?be(window.document).on(dt,rt).on(Te,rt):be(window.document).off(dt).off(Te)},Bn=function(){Rn.css({cursor:"default",width:se.width,height:se.height,left:se.x,top:se.y}),Zt.css({backgroundPosition:-se.x-1+"px "+(-se.y-1)+"px",cursor:Ve.allowMove?"move":"default",width:se.width-2>0?se.width-2:0,height:se.height-2>0?se.height-2:0,left:se.x+1,top:se.y+1}),Xn.css({width:se.width-2>0?se.width-2:0,left:se.x+2,top:se.y+1})},Ee=function(_e){Ve.allowResize&&(_e?be.each(wo,function(rt,dt){var Te,kt,ot=Math.round(dt.width()/2),J=Math.round(dt.height()/2),xr=rt[0],qo=rt[rt.length-1];xr==="n"?Te=-J:xr==="s"?Te=se.height-J-1:Te=Math.round(se.height/2)-J-1,qo==="e"?kt=se.width-ot-1:qo==="w"?kt=-ot:kt=Math.round(se.width/2)-ot-1,dt.css({display:"block",left:se.x+kt,top:se.y+Te})}):be(".select-areas-resize-handler").each(function(){be(this).css({display:"none"})}))},wn=function(_e){On&&On.css({display:_e?"block":"none",left:se.x+se.width+1,top:se.y-On.outerHeight()-1})},Ks=function(_e){Rn.css({cursor:_e}),Zt.css({cursor:_e})},fe=function(_e){switch(_e){case"startSelection":Ge._refresh(),Bn(),Ee(),wn(!0);break;case"pickSelection":case"pickResizeHandler":Ee();break;case"resizeSelection":Bn(),Ee(),Ks("crosshair"),wn(!0);break;case"moveSelection":Bn(),Ee(),Ks("move"),wn(!0);break;case"blur":Bn(),Ee(),wn();break;default:Bn(),Ee(!0),wn(!0)}},mt=function(_e){le(_e),se.width=Ve.minSize[0],se.height=Ve.minSize[1],gn(),x("move",vr),x("stop",Yn),Me=k(_e),Me[0]+se.width>it.width()&&(Me[0]=it.width()-se.width),Me[1]+se.height>it.height()&&(Me[1]=it.height()-se.height),se.x=Me[0],se.y=Me[1],fe("startSelection")},er=function(_e){le(_e),gn(),x("move",po),x("stop",Yn);var rt=k(_e);Xe[0]=rt[0]-se.x,Xe[1]=rt[1]-se.y,fe("pickSelection")},xe=function(_e){le(_e),gn();var rt=_e.target.className.split(" ")[1];rt[rt.length-1]==="w"&&(Me[0]+=se.width,se.x=Me[0]-se.width),rt[0]==="n"&&(Me[1]+=se.height,se.y=Me[1]-se.height),rt==="n"||rt==="s"?So=!1:(rt==="e"||rt==="w")&&(Ae=!1),x("move",vr),x("stop",Yn),fe("pickResizeHandler")},vr=function(_e){le(_e),gn();var rt=k(_e),dt=rt[1]-Me[1],Te=rt[0]-Me[0];Math.abs(Te)<Ve.minSize[0]&&(Te=Te>=0?Ve.minSize[0]:-Ve.minSize[0]),Math.abs(dt)<Ve.minSize[1]&&(dt=dt>=0?Ve.minSize[1]:-Ve.minSize[1]),(Me[0]+Te<0||Me[0]+Te>it.width())&&(Te=-Te),(Me[1]+dt<0||Me[1]+dt>it.height())&&(dt=-dt),Ve.maxSize[0]>Ve.minSize[0]&&Ve.maxSize[1]>Ve.minSize[1]&&(Math.abs(Te)>Ve.maxSize[0]&&(Te=Te>=0?Ve.maxSize[0]:-Ve.maxSize[0]),Math.abs(dt)>Ve.maxSize[1]&&(dt=dt>=0?Ve.maxSize[1]:-Ve.maxSize[1])),So&&(se.width=Te),Ae&&(se.height=dt),Ve.aspectRatio&&(Te>0&&dt>0||Te<0&&dt<0?So?dt=Math.round(Te/Ve.aspectRatio):Te=Math.round(dt*Ve.aspectRatio):So?dt=-Math.round(Te/Ve.aspectRatio):Te=-Math.round(dt*Ve.aspectRatio),Me[0]+Te>it.width()&&(Te=it.width()-Me[0],dt=dt>0?Math.round(Te/Ve.aspectRatio):-Math.round(Te/Ve.aspectRatio)),Me[1]+dt<0&&(dt=-Me[1],Te=Te>0?-Math.round(dt*Ve.aspectRatio):Math.round(dt*Ve.aspectRatio)),Me[1]+dt>it.height()&&(dt=it.height()-Me[1],Te=Te>0?Math.round(dt*Ve.aspectRatio):-Math.round(dt*Ve.aspectRatio)),se.width=Te,se.height=dt),se.width<0?(se.width=Math.abs(se.width),se.x=Me[0]-se.width):se.x=Me[0],se.height<0?(se.height=Math.abs(se.height),se.y=Me[1]-se.height):se.y=Me[1],wt("changing"),fe("resizeSelection")},po=function(_e){if(le(_e),!!Ve.allowMove){gn();var rt=k(_e);yr({x:rt[0]-Xe[0],y:rt[1]-Xe[1]}),wt("changing")}},yr=function(_e){_e.x>0?_e.x+se.width<it.width()?se.x=_e.x:se.x=it.width()-se.width:se.x=0,_e.y>0?_e.y+se.height<it.height()?se.y=_e.y:se.y=it.height()-se.height:se.y=0,fe("moveSelection")},Yn=function(_e,rt){le(_e),bt("move","stop"),rt&&(se.x=rt.x,se.y=rt.y,se.z=rt.z,se.width=rt.width,se.height=rt.height,Bn()),Me[0]=se.x,Me[1]=se.y,So=!0,Ae=!0,wt("changed"),fe("releaseSelection")},yt=function(_e){wt("deleted"),le(_e),Zt.remove(),Rn.remove(),Xn.remove(),be.each(wo,function(rt,dt){dt.remove()}),On&&On.remove(),Ge._remove(Qe)},zt=function(_e){var rt=be(_e).offset();return[rt.left,rt.top]},k=function(_e){var rt=zt(it);_e.pageX||(_e.originalEvent&&(_e=_e.originalEvent),_e.changedTouches&&(_e=_e.changedTouches[0]),_e.touches&&(_e=_e.touches[0]));var dt=_e.pageX-rt[0],Te=_e.pageY-rt[1];return dt=dt<0?0:dt>it.width()?it.width():dt,Te=Te<0?0:Te>it.height()?it.height():Te,[dt,Te]};if(Rn=be("<div id='select-areas-outline_"+Ft().id+`'  class="select-areas-outline"/>`).css({opacity:Ve.outlineOpacity,position:"absolute"}).insertAfter(Xt),Zt=be("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+Ft().id).css({position:"absolute"}).insertAfter(Rn),Xn=be("<div id='select-areas-label-container_"+Ft().id+`'  class="select-areas-label-container"/>`).css({position:"absolute"}).insertAfter(Xt),Ve.allowResize&&be.each(["nw","n","ne","e","se","s","sw","w"],function(_e,rt){wo[rt]=be('<div class="select-areas-resize-handler '+rt+" select-areas-resize-handler_"+Ft().id+'"/>').css({opacity:.5,position:"absolute",cursor:rt+"-resize"}).insertAfter(Zt).mousedown(xe).bind("touchstart",xe)}),Ve.allowDelete){var Cr=function(_e){return _e.click(yt).bind("touchstart",yt).bind("tap",yt),_e};On=Cr(be("<div id='select-areas-delete_"+Ft().id+`'  class="delete-area" />`)).append(Cr(be('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(Zt)}return Ve.allowMove&&Zt.mousedown(er).bind("touchstart",er),gn(),{getData:Ft,startSelection:mt,deleteSelection:yt,options:Ve,blur:Je,focus:gn,nudge:function(_e){_e.x=se.x,_e.y=se.y,_e.d&&(_e.y=se.y+_e.d),_e.u&&(_e.y=se.y-_e.u),_e.l&&(_e.x=se.x-_e.l),_e.r&&(_e.x=se.x+_e.r),yr(_e),wt("changed")},set:function(_e,rt){se=be.extend(se,_e),Me[0]=se.x,Me[1]=se.y,rt||wt("changed")},contains:function(_e){return _e.x>=se.x&&_e.x<=se.x+se.width&&_e.y>=se.y&&_e.y<=se.y+se.height}}},be.imageSelectAreas=function(){},be.imageSelectAreas.prototype.init=function(Ge,Qe){var Ve=this,it={allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null};this.options=be.extend(it,Qe),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=be(Ge),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=be("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=be('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=be("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),be.each(this.options.areas,function(Xt,Rn){Ve._add(Rn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(be.proxy(this.newArea,this)).on("touchstart",be.proxy(this.newArea,this)),this.options.allowNudge&&be("html").keydown(function(Xt){var Rn={37:"l",38:"u",39:"r",40:"d"},Zt=Rn[Xt.which],Xn;if(Zt&&(Ve._eachArea(function(On){if(On.getData().z===100)return Xn=On,!1}),Xn)){var wo={};wo[Zt]=1,Xn.nudge(wo)}})},be.imageSelectAreas.prototype._refresh=function(){var Ge=this.areas().length;this.$overlay.css({display:Ge?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},be.imageSelectAreas.prototype._eachArea=function(Ge){be.each(this._areas,function(Qe,Ve){if(Ve)return Ge(Ve,Qe)})},be.imageSelectAreas.prototype._remove=function(Ge){delete this._areas[Ge],this._refresh()},be.imageSelectAreas.prototype.remove=function(Ge){this._areas[Ge]&&this._areas[Ge].deleteSelection()},be.imageSelectAreas.prototype.newArea=function(Ge){var Qe=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(Ve,it){Qe=Math.max(Qe,parseInt(it,10))}),Qe+=1,this._areas[Qe]=be.imageArea(this,Qe),Ge&&this._areas[Qe].startSelection(Ge)),Qe},be.imageSelectAreas.prototype.set=function(Ge,Qe,Ve){this._areas[Ge]&&(Qe.id=Ge,this._areas[Ge].set(Qe,Ve),this._areas[Ge].focus())},be.imageSelectAreas.prototype._add=function(Ge,Qe){var Ve=this.newArea();this.set(Ve,Ge,Qe)},be.imageSelectAreas.prototype.add=function(Ge){var Qe=this;this.blurAll(),be.isArray(Ge)?be.each(Ge,function(Ve,it){Qe._add(it)}):this._add(Ge),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},be.imageSelectAreas.prototype.reset=function(){var Ge=this;this._eachArea(function(Qe,Ve){Ge.remove(Ve)}),this._refresh()},be.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},be.imageSelectAreas.prototype.areas=function(){var Ge=[];return this._eachArea(function(Qe){Ge.push(Qe.getData())}),Ge},be.imageSelectAreas.prototype.relativeAreas=function(){for(var Ge=this.areas(),Qe=[],Ve=this.ratio,it=function(Rn){return Math.floor(Rn/Ve)},Xt=0;Xt<Ge.length;Xt++)Qe[Xt]=be.extend({},Ge[Xt]),Qe[Xt].x=it(Qe[Xt].x),Qe[Xt].y=it(Qe[Xt].y),Qe[Xt].width=it(Qe[Xt].width),Qe[Xt].height=it(Qe[Xt].height);return Qe},be.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(Ge){Ge.blur()})},be.imageSelectAreas.prototype.contains=function(Ge){var Qe=!1;return this._eachArea(function(Ve){if(Ve.contains(Ge))return Qe=!0,!1}),Qe},be.selectAreas=function(Ge,Qe){var Ve=be(Ge);if(!Ve.data("mainImageSelectAreas")){var it=new be.imageSelectAreas;it.init(Ge,Qe),Ve.data("mainImageSelectAreas",it),Ve.trigger("loaded")}return Ve.data("mainImageSelectAreas")},be.fn.selectAreas=function(Ge){if(be.imageSelectAreas.prototype[Ge]){var Qe=be.imageSelectAreas.prototype[Ge].apply(be.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Qe>"u"?this:Qe}else{if(typeof Ge=="object"||!Ge)return this.each(function(){var Ve=this,it=new Image;it.onload=function(){be.selectAreas(Ve,Ge)},it.src=Ve.src}),this;be.error("Method "+Ge+" does not exist on jQuery.selectAreas")}}}(jQuery);

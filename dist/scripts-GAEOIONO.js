(function(){"use strict";var ve=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},Ke=function(e){return{eq:e}},Xe=Ke((function(e,t){return e===t})),$e=function(e){return Ke((function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e.eq(t[r],n[r]))return!1;return!0}))},it=function(e){return Ke((function(t,n){var o=Object.keys(t),r=Object.keys(n);if(!(function(l,c){return(function(d,m){return Ke((function(f,g){return d.eq(m(f),m(g))}))})($e(l),(function(d){return(function(m,f){return Array.prototype.slice.call(m).sort(f)})(d,c)}))})(Xe).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!e.eq(t[i],n[i]))return!1}return!0}))},Gt=Ke((function(e,t){if(e===t)return!0;var n=ve(e);return n===ve(t)&&((function(o){return["undefined","boolean","number","string","function","xml","null"].indexOf(o)!==-1})(n)?e===t:n==="array"?$e(Gt).eq(e,t):n==="object"&&it(Gt).eq(e,t))}));const Bn=Object.getPrototypeOf,rn=(e,t,n)=>{var o;return!!n(e,t.prototype)||((o=e.constructor)===null||o===void 0?void 0:o.name)===t.name},Kn=e=>t=>(n=>{const o=typeof n;return n===null?"null":o==="object"&&Array.isArray(n)?"array":o==="object"&&rn(n,String,((r,s)=>s.isPrototypeOf(r)))?"string":o})(t)===e,Co=e=>t=>typeof t===e,Pn=e=>t=>e===t,xo=(e,t)=>Ue(e)&&rn(e,t,((n,o)=>Bn(n)===o)),we=Kn("string"),Ue=Kn("object"),Be=e=>xo(e,Object),se=Kn("array"),Ye=Pn(null),Cn=Co("boolean"),jt=Pn(void 0),kt=e=>e==null,te=e=>!kt(e),ht=Co("function"),x=Co("number"),Ln=(e,t)=>{if(se(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},Ee=()=>{},Mn=(e,t)=>(...n)=>e(t.apply(null,n)),Us=(e,t)=>n=>e(t(n)),ie=e=>()=>e,bt=e=>e,Jo=(e,t)=>e===t;function Ce(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const $o=e=>t=>!e(t),po=e=>()=>{throw new Error(e)},pr=e=>e(),Xn=e=>{e()},_t=ie(!1),zt=ie(!0);class _{constructor(t,n){this.tag=t,this.value=n}static some(t){return new _(!0,t)}static none(){return _.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?_.some(t(this.value)):_.none()}bind(t){return this.tag?t(this.value):_.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:_.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return te(t)?_.some(t):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_.singletonNone=new _(!1);const gr=Array.prototype.slice,ke=Array.prototype.indexOf,et=Array.prototype.push,dt=(e,t)=>ke.call(e,t),Se=(e,t)=>dt(e,t)>-1,yt=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},qe=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const s=e[r];o[r]=t(s,r)}return o},K=(e,t)=>{for(let n=0,o=e.length;n<o;n++)t(e[n],n)},hr=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},Zo=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];(t(a,r)?n:o).push(a)}return{pass:n,fail:o}},Pe=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const s=e[o];t(s,o)&&n.push(s)}return n},qr=(e,t,n)=>(hr(e,((o,r)=>{n=t(n,o,r)})),n),Qt=(e,t,n)=>(K(e,((o,r)=>{n=t(n,o,r)})),n),go=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const s=e[o];if(t(s,o))return _.some(s);if(n(s,o))break}return _.none()},$t=(e,t)=>go(e,t,_t),Hs=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return _.some(n);return _.none()},Ec=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!se(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);et.apply(t,e[n])}return t},qt=(e,t)=>Ec(qe(e,t)),no=(e,t)=>{for(let n=0,o=e.length;n<o;++n)if(t(e[n],n)!==!0)return!1;return!0},wo=e=>{const t=gr.call(e,0);return t.reverse(),t},Ge=(e,t)=>Pe(e,(n=>!Se(t,n))),kn=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const s=e[o];n[String(s)]=t(s,o)}return n},Wr=(e,t)=>{const n=gr.call(e,0);return n.sort(t),n},$s=(e,t)=>t>=0&&t<e.length?_.some(e[t]):_.none(),sn=e=>$s(e,0),oo=e=>$s(e,e.length-1),xn=ht(Array.from)?Array.from:e=>gr.call(e),$n=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return _.none()},So=(e,t)=>{const n=[],o=ht(t)?r=>yt(n,(s=>t(s,r))):r=>Se(n,r);for(let r=0,s=e.length;r<s;r++){const a=e[r];o(a)||n.push(a)}return n},fn=Object.keys,Zu=Object.hasOwnProperty,Ct=(e,t)=>{const n=fn(e);for(let o=0,r=n.length;o<r;o++){const s=n[o];t(e[s],s)}},qs=(e,t)=>kc(e,((n,o)=>({k:o,v:t(n,o)}))),kc=(e,t)=>{const n={};return Ct(e,((o,r)=>{const s=t(o,r);n[s.k]=s.v})),n},br=e=>(t,n)=>{e[n]=t},vr=(e,t,n,o)=>{Ct(e,((r,s)=>{(t(r,s)?n:o)(r,s)}))},er=(e,t)=>{const n={};return vr(e,t,br(n),Ee),n},yr=(e,t)=>{const n=[];return Ct(e,((o,r)=>{n.push(t(o,r))})),n},Ua=e=>yr(e,bt),Ot=(e,t)=>Me(e,t)?_.from(e[t]):_.none(),Me=(e,t)=>Zu.call(e,t),pn=(e,t)=>Me(e,t)&&e[t]!==void 0&&e[t]!==null,ho=e=>{if(!se(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return K(e,((o,r)=>{const s=fn(o);if(s.length!==1)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(n[a]!==void 0)throw new Error("duplicate key detected:"+a);if(a==="cata")throw new Error("cannot have a case named cata (sorry)");if(!se(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...d)=>{if(d.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+d.length);return d[r].apply(null,l)},match:d=>{const m=fn(d);if(t.length!==m.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+m.join(","));if(!no(t,(f=>Se(m,f))))throw new Error("Not all branches were specified when using match. Specified: "+m.join(", ")+`
Required: `+t.join(", "));return d[a].apply(null,l)},log:d=>{console.log(d,{constructors:t,constructor:a,params:l})}}}})),n},tn=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},Zi=e=>{const t=s=>s(e),n=ie(e),o=()=>r,r={tag:!0,inner:e,fold:(s,a)=>a(e),isValue:zt,isError:_t,map:s=>gn.value(s(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(e)},toOptional:()=>_.some(e)};return r},el=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(o,r)=>o(e),isValue:_t,isError:zt,map:t,mapError:o=>gn.error(o(e)),bind:t,exists:_t,forall:zt,getOr:bt,or:bt,getOrThunk:pr,orThunk:pr,getOrDie:po(String(e)),each:Ee,toOptional:_.none};return n},gn={value:Zi,error:el,fromOption:(e,t)=>e.fold((()=>el(t)),Zi)},is=typeof window<"u"?window:Function("return this;")(),Ws=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Vs=0;const Ks=e=>{const t=new Date().getTime(),n=Math.floor(1e9*Ws());return Vs++,e+"_"+n+Vs+String(t)},_c=()=>window.isSecureContext?window.crypto.randomUUID():(()=>{const e=(()=>{const n=window.crypto.getRandomValues(new Uint8Array(16));return n[6]=15&n[6]|64,n[8]=63&n[8]|128,n})(),t=(n,o)=>{let r="";for(let s=n;s<=o;++s)r+=e[s].toString(16).padStart(2,"0");return r};return`${t(0,3)}-${t(4,5)}-${t(6,7)}-${t(8,9)}-${t(10,15)}`})(),Nc=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const s in r)Me(r,s)&&(n[s]=e(n[s],r[s]))}return n},Ha=Nc(((e,t)=>Be(e)&&Be(t)?Ha(e,t):t)),em=Nc(((e,t)=>t)),ls=(e,t,n=Jo)=>e.exists((o=>n(o,t))),$a=(e,t,n=Jo)=>Wt(e,t,n).getOr(e.isNone()&&t.isNone()),Wt=(e,t,n)=>e.isSome()&&t.isSome()?_.some(n(e.getOrDie(),t.getOrDie())):_.none(),Vr=(e,t)=>e?_.some(t):_.none(),qa=(e,t)=>((n,o)=>{let r=o??is;for(let s=0;s<n.length&&r!=null;++s)r=r[n[s]];return r})(e.split("."),t);ho([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Wa=e=>{const t=[],n=[];return K(e,(o=>{o.fold((r=>{t.push(r)}),(r=>{n.push(r)}))})),{errors:t,values:n}},Va=e=>{const t=tn(_.none()),n=()=>t.get().each((o=>clearInterval(o)));return{clear:()=>{n(),t.set(_.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:o=>{n(),t.set(_.some(setInterval(o,e)))}}},qo=()=>{const e=(t=>{const n=tn(_.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(_.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(_.some(r))}}})(Ee);return{...e,on:t=>e.get().each(t)}},Ac=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,cs=(e,t)=>Jt(e,t)?((n,o)=>n.substring(o))(e,t.length):e,hn=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return r!==-1&&(!!jt(o)||r+t.length<=o)},Jt=(e,t)=>Ac(e,t,0),Ka=(e,t)=>Ac(e,t,e.length-t.length),Xa=e=>t=>t.replace(e,""),Cr=Xa(/^\s+|\s+$/g),tm=Xa(/^\s+/g),Tc=Xa(/\s+$/g),Eo=e=>e.length>0,ds=e=>!Eo(e),us=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?_.none():_.some(n)},Xs=(e,t)=>{let n=null;return{cancel:()=>{Ye(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Ye(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}},ro=(e,t)=>{let n=null;const o=()=>{Ye(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)}}},qn=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},xr="\uFEFF",Ft="\xA0",Kr=e=>e===xr,Dc=e=>{const t={};return K(e,(n=>{t[n]={}})),fn(t)},Rc=e=>e.length!==void 0,Ys=Array.isArray,Gs=(e,t,n)=>{if(!e)return!1;if(n=n||e,Rc(e)){for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e)===!1)return!1}else for(const o in e)if(Me(e,o)&&t.call(n,e[o],o,e)===!1)return!1;return!0},ms=(e,t)=>{const n=[];return Gs(e,((o,r)=>{n.push(t(o,r,e))})),n},fs=(e,t)=>{const n=[];return Gs(e,((o,r)=>{t&&!t(o,r,e)||n.push(o)})),n},Yn=(e,t,n,o)=>{let r=jt(n)?e[0]:n;for(let s=0;s<e.length;s++)r=t.call(o,r,e[s],s);return r},tl=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},ko=e=>e[e.length-1],Oc=()=>nl(0,0),nl=(e,t)=>({major:e,minor:t}),_o={nu:nl,detect:(e,t)=>{const n=String(t).toLowerCase();return e.length===0?Oc():((o,r)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const d=i[c];if(d.test(l))return d}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return nl(a(1),a(2))})(e,n)},unknown:Oc},wr=(e,t)=>{const n=String(t).toLowerCase();return $t(e,(o=>o.search(n)))},Qs=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tr=e=>t=>hn(t,e),Js=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>hn(e,"edge/")&&hn(e,"chrome")&&hn(e,"safari")&&hn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Qs],search:e=>hn(e,"chrome")&&!hn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>hn(e,"msie")||hn(e,"trident")},{name:"Opera",versionRegexes:[Qs,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tr("firefox")},{name:"Safari",versionRegexes:[Qs,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(hn(e,"safari")||hn(e,"mobile/"))&&hn(e,"applewebkit")}],Bc=[{name:"Windows",search:tr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>hn(e,"iphone")||hn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:tr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tr("linux"),versionRegexes:[]},{name:"Solaris",search:tr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:tr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ya={browsers:ie(Js),oses:ie(Bc)},ol="Edge",rl="Chromium",Pc="Opera",sl="Firefox",Lc="Safari",Mc=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isEdge:o(ol),isChromium:o(rl),isIE:o("IE"),isOpera:o(Pc),isFirefox:o(sl),isSafari:o(Lc)}},al=()=>Mc({current:void 0,version:_o.unknown()}),nm=Mc,Ic=(ie(ol),ie(rl),ie("IE"),ie(Pc),ie(sl),ie(Lc),"Windows"),Fc="Android",jc="Linux",zc="macOS",Uc="Solaris",il="FreeBSD",Ga="ChromeOS",ll=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isWindows:o(Ic),isiOS:o("iOS"),isAndroid:o(Fc),isMacOS:o(zc),isLinux:o(jc),isSolaris:o(Uc),isFreeBSD:o(il),isChromeOS:o(Ga)}},cl=()=>ll({current:void 0,version:_o.unknown()}),Hc=ll,$c=(ie(Ic),ie("iOS"),ie(Fc),ie(jc),ie(zc),ie(Uc),ie(il),ie(Ga),e=>window.matchMedia(e).matches);let dl=qn((()=>((e,t,n)=>{const o=Ya.browsers(),r=Ya.oses(),s=t.bind((l=>((c,d)=>$n(d.brands,(m=>{const f=m.brand.toLowerCase();return $t(c,(g=>{var h;return f===((h=g.brand)===null||h===void 0?void 0:h.toLowerCase())})).map((g=>({current:g.name,version:_o.nu(parseInt(m.version,10),0)})))})))(o,l))).orThunk((()=>((l,c)=>wr(l,c).map((d=>{const m=_o.detect(d.versionRegexes,c);return{current:d.name,version:m}})))(o,e))).fold(al,nm),a=((l,c)=>wr(l,c).map((d=>{const m=_o.detect(d.versionRegexes,c);return{current:d.name,version:m}})))(r,e).fold(cl,Hc),i=((l,c,d,m)=>{const f=l.isiOS()&&/ipad/i.test(d)===!0,g=l.isiOS()&&!f,h=l.isiOS()||l.isAndroid(),b=h||m("(pointer:coarse)"),v=f||!g&&h&&m("(min-device-width:768px)"),y=g||h&&!v,E=c.isSafari()&&l.isiOS()&&/safari/i.test(d)===!1,N=!y&&!v&&!E;return{isiPad:ie(f),isiPhone:ie(g),isTablet:ie(v),isPhone:ie(y),isTouch:ie(b),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ie(E),isDesktop:ie(N)}})(a,s,e,n);return{browser:s,os:a,deviceType:i}})(window.navigator.userAgent,_.from(window.navigator.userAgentData),$c)));const No=()=>dl(),Zs=Object.getPrototypeOf,qc=e=>{const t=qa("ownerDocument.defaultView",e);return Ue(e)&&((n=>((o,r)=>{const s=((a,i)=>qa(a,i))(o,r);if(s==null)throw new Error(o+" not available on this browser");return s})("HTMLElement",n))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Zs(e).constructor.name))},Wc=window.navigator.userAgent,ea=No(),Wo=ea.browser,Vo=ea.os,Xr=ea.deviceType,u=Wc.indexOf("Windows Phone")!==-1,p={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Wo.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Wo.isIE(),windowsPhone:u,browser:{current:Wo.current,version:Wo.version,isChromium:Wo.isChromium,isEdge:Wo.isEdge,isFirefox:Wo.isFirefox,isIE:Wo.isIE,isOpera:Wo.isOpera,isSafari:Wo.isSafari},os:{current:Vo.current,version:Vo.version,isAndroid:Vo.isAndroid,isChromeOS:Vo.isChromeOS,isFreeBSD:Vo.isFreeBSD,isiOS:Vo.isiOS,isLinux:Vo.isLinux,isMacOS:Vo.isMacOS,isSolaris:Vo.isSolaris,isWindows:Vo.isWindows},deviceType:{isDesktop:Xr.isDesktop,isiPad:Xr.isiPad,isiPhone:Xr.isiPhone,isPhone:Xr.isPhone,isTablet:Xr.isTablet,isTouch:Xr.isTouch,isWebView:Xr.isWebView}},C=/^\s*|\s*$/g,w=e=>kt(e)?"":(""+e).replace(C,""),T=function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),Gs(e,((r,s)=>t.call(o,r,s,n)!==!1&&(T(r,t,n,o),!0))))},k={trim:w,isArray:Ys,is:(e,t)=>t?!(t!=="array"||!Ys(e))||typeof e===t:e!==void 0,toArray:e=>{if(Ys(e))return e;{const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const o=we(e)?e.split(t||","):e||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:Gs,map:ms,grep:fs,inArray:(e,t)=>{if(e){for(let n=0,o=e.length;n<o;n++)if(e[n]===t)return n}return-1},hasOwn:Me,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const o=t[n];for(const r in o)if(Me(o,r)){const s=o[r];s!==void 0&&(e[r]=s)}}return e},walk:T,resolve:(e,t=window)=>{const n=e.split(".");for(let o=0,r=n.length;o<r&&(t=t[n[o]]);o++);return t},explode:(e,t)=>se(e)?e:e===""?[]:ms(e.split(t||","),w),_addCacheSuffix:e=>{const t=p.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},O=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},S={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return O(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return O(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return O(n)},fromDom:O,fromPoint:(e,t,n)=>_.from(e.dom.elementFromPoint(t,n)).map(O)},U=(e,t,n)=>{const o=e.document.createRange();var r;return r=o,t.fold((s=>{r.setStartBefore(s.dom)}),((s,a)=>{r.setStart(s.dom,a)}),(s=>{r.setStartAfter(s.dom)})),((s,a)=>{a.fold((i=>{s.setEndBefore(i.dom)}),((i,l)=>{s.setEnd(i.dom,l)}),(i=>{s.setEndAfter(i.dom)}))})(o,n),o},V=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},ee=ho([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ae=(e,t,n)=>t(S.fromDom(n.startContainer),n.startOffset,S.fromDom(n.endContainer),n.endOffset);ee.ltr,ee.rtl;const Z=(e,t)=>{const n=e.dom;if(n.nodeType!==1)return!1;{const o=n;if(o.matches!==void 0)return o.matches(t);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(t);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(t);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},de=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,pe=(e,t)=>e.dom===t.dom,Ze=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},ut=Z,nn=(e,t)=>{const n=[],o=s=>(n.push(s),t(s));let r=t(e);do r=r.bind(o);while(r.isSome());return n},Le=e=>e.dom.nodeName.toLowerCase(),Ao=e=>e.dom.nodeType,so=e=>t=>Ao(t)===e,xt=e=>Ao(e)===8||Le(e)==="#comment",ao=e=>nt(e)&&qc(e.dom),nt=so(1),wt=so(3),ta=so(9),ul=so(11),wn=e=>t=>nt(t)&&Le(t)===e,ps=e=>S.fromDom(e.dom.ownerDocument),_n=e=>ta(e)?e:ps(e),bo=e=>S.fromDom(_n(e).dom.defaultView),bn=e=>_.from(e.dom.parentNode).map(S.fromDom),Nn=e=>_.from(e.dom.parentElement).map(S.fromDom),on=(e,t)=>{const n=ht(t)?t:_t;let o=e.dom;const r=[];for(;o.parentNode!==null&&o.parentNode!==void 0;){const s=o.parentNode,a=S.fromDom(s);if(r.push(a),n(a)===!0)break;o=s}return r},an=e=>bn(e).map(gt).map((t=>Pe(t,(n=>!pe(e,n))))).getOr([]),Xt=e=>_.from(e.dom.previousSibling).map(S.fromDom),Gn=e=>_.from(e.dom.nextSibling).map(S.fromDom),In=e=>wo(nn(e,Xt)),st=e=>nn(e,Gn),gt=e=>qe(e.dom.childNodes,S.fromDom),Vt=(e,t)=>{const n=e.dom.childNodes;return _.from(n[t]).map(S.fromDom)},Bt=e=>Vt(e,0),Wn=e=>Vt(e,e.dom.childNodes.length-1),Sr=e=>e.dom.childNodes.length,gs=e=>ul(e)&&te(e.dom.host),Qn=e=>S.fromDom(e.dom.getRootNode()),na=e=>gs(e)?e:(t=>{const n=t.dom.head;if(n==null)throw new Error("Head is not available yet");return S.fromDom(n)})(_n(e)),Er=e=>S.fromDom(e.dom.host),ml=e=>{if(te(e.target)){const t=S.fromDom(e.target);if(nt(t)&&oa(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return sn(n)}}return _.from(e.target)},oa=e=>te(e.dom.shadowRoot),Qa=(e,t,n,o)=>((r,s,a,i,l)=>{const c=((d,m)=>f=>{d(f)&&m((g=>{const h=S.fromDom(ml(g).getOr(g.target)),b=()=>g.stopPropagation(),v=()=>g.preventDefault(),y=Mn(v,b);return((E,N,D,A,R,P,L)=>({target:E,x:N,y:D,stop:A,prevent:R,kill:P,raw:L}))(h,g.clientX,g.clientY,b,v,y,g)})(f))})(a,i);return r.dom.addEventListener(s,c,l),{unbind:Ce(Ja,r,s,c,l)}})(e,t,n,o,!1),Ja=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},fl=zt,ra=()=>S.fromDom(document),hs=(e,t=!1)=>e.dom.focus({preventScroll:t}),Za=e=>{const t=Qn(e).dom;return e.dom===t.activeElement},kr=(e=ra())=>_.from(e.dom.activeElement).map(S.fromDom),dn=(e,t)=>{bn(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},M=(e,t)=>{Gn(e).fold((()=>{bn(e).each((n=>{X(n,t)}))}),(n=>{dn(n,t)}))},q=(e,t)=>{Bt(e).fold((()=>{X(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},X=(e,t)=>{e.dom.appendChild(t.dom)},ne=(e,t)=>{dn(e,t),X(t,e)},ce=(e,t)=>{K(t,((n,o)=>{const r=o===0?e:t[o-1];M(r,n)}))},Re=(e,t)=>{K(t,(n=>{X(e,n)}))},He=(e,t,n)=>{if(!(we(n)||Cn(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Te=(e,t,n)=>{He(e.dom,t,n)},Ae=(e,t)=>{const n=e.dom;Ct(t,((o,r)=>{He(n,r,o)}))},ft=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},at=(e,t)=>_.from(ft(e,t)),pt=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},ot=(e,t)=>{e.dom.removeAttribute(t)},mt=e=>{const t=e.dom.attributes;return t==null||t.length===0},Zt=e=>Qt(e.dom.attributes,((t,n)=>(t[n.name]=n.value,t)),{}),en=e=>{e.dom.textContent="",K(gt(e),(t=>{ct(t)}))},ct=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Yt=e=>{const t=gt(e);t.length>0&&ce(e,t),ct(e)},Jn=(e,t)=>S.fromDom(e.dom.cloneNode(t)),vn=e=>Jn(e,!1),Ut=e=>Jn(e,!0),Ko=(e,t)=>{const n=((r,s)=>{const a=S.fromTag(s),i=Zt(r);return Ae(a,i),a})(e,t);M(e,n);const o=gt(e);return Re(n,o),ct(e),n},An=e=>qe(e,S.fromDom),sa=e=>e.dom.innerHTML,aa=(e,t)=>{const n=ps(e).dom,o=S.fromDom(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,gt(S.fromDom(i))})(t,n);Re(o,r),en(e),X(e,o)},bs=e=>e.style!==void 0&&ht(e.style.getPropertyValue),Yr=e=>{const t=wt(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return(o=>{const r=Qn(o);return gs(r)?_.some(r):_.none()})(S.fromDom(t)).fold((()=>n.body.contains(t)),Us(Yr,Er))},Ih=(e,t,n)=>{if(!we(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);bs(e)&&e.style.setProperty(t,n)},Vc=(e,t,n)=>{const o=e.dom;Ih(o,t,n)},Kc=(e,t)=>{const n=e.dom;Ct(t,((o,r)=>{Ih(n,r,o)}))},nr=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o!==""||Yr(e)?o:Fh(n,t)},Fh=(e,t)=>bs(e)?e.style.getPropertyValue(t):"",ei=(e,t)=>{const n=e.dom,o=Fh(n,t);return _.from(o).filter((r=>r.length>0))},om=e=>{const t={},n=e.dom;if(bs(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);t[r]=n.style[r]}return t},Xc=(e,t)=>{((n,o)=>{bs(n)&&n.style.removeProperty(o)})(e.dom,t),ls(at(e,"style").map(Cr),"")&&ot(e,"style")},q_=(e=>{const t=o=>{const r=(s=>{const a=s.dom;return Yr(s)?a.getBoundingClientRect().height:a.offsetHeight})(o);if(r<=0||r===null){const s=nr(o,e);return parseFloat(s)||0}return r},n=(o,r)=>Qt(r,((s,a)=>{const i=nr(o,a),l=i===void 0?0:parseInt(i,10);return isNaN(l)?s:s+l}),0);return{set:(o,r)=>{if(!x(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);const s=o.dom;bs(s)&&(s.style[e]=r+"px")},get:t,getOuter:t,aggregate:n,max:(o,r,s)=>{const a=n(o,s);return r>a?r-a:0}}})("height"),jh=(e,t)=>({left:e,top:t,translate:(n,o)=>jh(e+n,t+o)}),ti=jh,Yc=(e,t)=>e!==void 0?e:t!==void 0?t:0,rm=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?ti(n.offsetLeft,n.offsetTop):Yr(e)?(o=>{const r=o.getBoundingClientRect();return ti(r.left,r.top)})(t):ti(0,0)},sm=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return ti(n,o)},zh=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Uh=(e,t)=>{No().browser.isSafari()&&ht(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},pl=(e,t)=>{const n=(t||document).createDocumentFragment();return K(e,(o=>{n.appendChild(o.dom)})),S.fromDom(n)},am=(e=>{const t=n=>e(n)?_.from(n.dom.nodeValue):_.none();return{get:n=>{if(!e(n))throw new Error("Can only get text value of a text node");return t(n).getOr("")},getOption:t,set:(n,o)=>{if(!e(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=o}}})(wt),ni=e=>am.get(e),im=(e,t)=>am.set(e,t),lm=(e,t)=>{const n=ft(e,t);return n===void 0||n===""?[]:n.split(" ")};var Hh=(e,t,n,o,r)=>e(n,o)?_.some(n):ht(r)&&r(n)?_.none():t(n,o,r);const _r=(e,t,n)=>{let o=e.dom;const r=ht(n)?n:_t;for(;o.parentNode;){o=o.parentNode;const s=S.fromDom(o);if(t(s))return _.some(s);if(r(s))break}return _.none()},Nr=(e,t,n)=>Hh(((o,r)=>r(o)),_r,e,t,n),Gc=(e,t)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const s=S.fromDom(o.childNodes[r]);if(t(s))return _.some(s);const a=n(o.childNodes[r]);if(a.isSome())return a}return _.none()};return n(e.dom)},oi=(e,t,n)=>_r(e,(o=>Z(o,t)),n),Qc=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return de(r)?_.none():_.from(r.querySelector(n)).map(S.fromDom)})(t,e),vs=(e,t,n)=>Hh(((o,r)=>Z(o,r)),oi,e,t,n),gl=e=>e.dom.classList!==void 0,$h=e=>lm(e,"class"),qh=(e,t)=>((n,o,r)=>{const s=lm(n,o).concat([r]);return Te(n,o,s.join(" ")),!0})(e,"class",t),Wh=(e,t)=>((n,o,r)=>{const s=Pe(lm(n,o),(a=>a!==r));return s.length>0?Te(n,o,s.join(" ")):ot(n,o),!1})(e,"class",t),ri=(e,t)=>{gl(e)?e.dom.classList.add(t):qh(e,t)},Vh=e=>{(gl(e)?e.dom.classList:$h(e)).length===0&&ot(e,"class")},hl=(e,t)=>{gl(e)?e.dom.classList.remove(t):Wh(e,t),Vh(e)},cm=(e,t)=>gl(e)&&e.dom.classList.contains(t),Gr=(e,t=!1)=>{return Yr(e)?e.dom.isContentEditable:(n=e,vs(n,"[contenteditable]")).fold(ie(t),(o=>W_(o)==="true"));var n},W_=e=>e.dom.contentEditable,Jc=(e,t)=>{e.dom.contentEditable=t?"true":"false"},Kh=(e,t,n)=>Pe(on(e,n),t),Zc=(e,t)=>{let n=[];return K(gt(e),(o=>{t(o)&&(n=n.concat([o])),n=n.concat(Zc(o,t))})),n},Tn=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return de(r)?[]:qe(r.querySelectorAll(n),S.fromDom)})(t,e),dm=(e,t,n)=>_r(e,t,n).isSome(),V_=(e,t)=>((n,o)=>{const r=n.dom;return r.parentNode?((s,a)=>$t(s.dom.childNodes,(i=>a(S.fromDom(i)))).map(S.fromDom))(S.fromDom(r.parentNode),(s=>!pe(n,s)&&o(s))):_.none()})(e,t).isSome(),um=(e,t)=>Gc(e,t).isSome(),Xh=e=>ht(e)?e:_t,mm=(e,t,n)=>{const o=t(e),r=Xh(n);return o.orThunk((()=>r(e)?_.none():((s,a,i)=>{let l=s.dom;const c=Xh(i);for(;l.parentNode;){l=l.parentNode;const d=S.fromDom(l),m=a(d);if(m.isSome())return m;if(c(d))break}return _.none()})(e,t,r)))},K_=["img","br"],X_=e=>{return(t=e,am.getOption(t)).filter((n=>n.trim().length!==0||n.indexOf(Ft)>-1)).isSome()||Se(K_,Le(e))||(n=>ao(n)&&ft(n,"contenteditable")==="false")(e);var t},Yh=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),fm=ho([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Qr={before:fm.before,on:fm.on,after:fm.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(bt,bt,bt)},ed=ho([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),si={domRange:ed.domRange,relative:ed.relative,exact:ed.exact,exactFromRange:e=>ed.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(n=>n.match({domRange:o=>S.fromDom(o.startContainer),relative:(o,r)=>Qr.getStart(o),exact:(o,r,s,a)=>o}))(e);return bo(t)},range:Yh},td=(e,t)=>{const n=Le(e);return n==="input"?Qr.after(e):Se(["br","img"],n)?t===0?Qr.before(e):Qr.after(e):Qr.on(e,t)},Y_=(e,t)=>{const n=e.fold(Qr.before,td,Qr.after),o=t.fold(Qr.before,td,Qr.after);return si.relative(n,o)},Gh=(e,t,n,o)=>{const r=td(e,t),s=td(n,o);return si.relative(r,s)},G_=e=>{const t=si.getWin(e).dom,n=(r,s,a,i)=>V(t,r,s,a,i),o=(r=>r.match({domRange:s=>{const a=S.fromDom(s.startContainer),i=S.fromDom(s.endContainer);return Gh(a,s.startOffset,i,s.endOffset)},relative:Y_,exact:Gh}))(e);return((r,s)=>{const a=((i,l)=>l.match({domRange:c=>({ltr:ie(c),rtl:_.none}),relative:(c,d)=>({ltr:qn((()=>U(i,c,d))),rtl:qn((()=>_.some(U(i,d,c))))}),exact:(c,d,m,f)=>({ltr:qn((()=>V(i,c,d,m,f))),rtl:qn((()=>_.some(V(i,m,f,c,d))))})}))(r,s);return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter((d=>d.collapsed===!1)).map((d=>ee.rtl(S.fromDom(d.endContainer),d.endOffset,S.fromDom(d.startContainer),d.startOffset))).getOrThunk((()=>ae(0,ee.ltr,c))):ae(0,ee.ltr,c)})(0,a)})(t,o).match({ltr:n,rtl:n})},Q_=(e,t,n)=>((o,r,s)=>((a,i,l)=>a.caretPositionFromPoint?((c,d,m)=>{var f;return _.from((f=c.caretPositionFromPoint)===null||f===void 0?void 0:f.call(c,d,m)).bind((g=>{if(g.offsetNode===null)return _.none();const h=c.createRange();return h.setStart(g.offsetNode,g.offset),h.collapse(),_.some(h)}))})(a,i,l):a.caretRangeFromPoint?((c,d,m)=>{var f;return _.from((f=c.caretRangeFromPoint)===null||f===void 0?void 0:f.call(c,d,m))})(a,i,l):_.none())(o.document,r,s).map((a=>Yh(S.fromDom(a.startContainer),a.startOffset,S.fromDom(a.endContainer),a.endOffset))))(e,t,n),Qh=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),pm=e=>{const t=e===void 0?window:e,n=t.document,o=sm(S.fromDom(n));return(r=>{const s=r===void 0?window:r;return No().browser.isFirefox()?_.none():_.from(s.visualViewport)})(t).fold((()=>{const r=t.document.documentElement,s=r.clientWidth,a=r.clientHeight;return Qh(o.left,o.top,s,a)}),(r=>Qh(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height)))};class ln{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,o,r){if(t){if(!r&&t[n])return t[n];if(t!==this.rootNode){let s=t[o];if(s)return s;for(let a=t.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(t,n){if(t){const o=t.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n){for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s}return o}const r=t.parentNode;if(r&&r!==this.rootNode)return r}}}const J_=/^[ \t\r\n]*$/,ai=e=>J_.test(e),Jh=e=>e===`
`||e==="\r",Zh=(e,t=4,n=!0,o=!0)=>{const r=((i,l)=>l<=0?"":new Array(l+1).join(" "))(0,t),s=e.replace(/\t/g,r);return Qt(s,((i,l)=>(c=>" \f	\v".indexOf(c)!==-1)(l)||l===Ft?i.pcIsSpace||i.str===""&&n||i.str.length===s.length-1&&o||((c,d)=>d<c.length&&d>=0&&Jh(c[d]))(s,i.str.length+1)?{pcIsSpace:!1,str:i.str+Ft}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Jh(l),str:i.str+l}),{pcIsSpace:!1,str:""}).str},ia=e=>t=>!!t&&t.nodeType===e,nd=e=>!!e&&!Object.getPrototypeOf(e),xe=ia(1),or=e=>xe(e)&&ao(S.fromDom(e)),la=e=>{const t=e.toLowerCase();return n=>te(n)&&n.nodeName.toLowerCase()===t},rr=e=>{const t=e.map((n=>n.toLowerCase()));return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Se(t,o)}return!1}},od=(e,t)=>{const n=t.toLowerCase().split(" ");return o=>{if(xe(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(e):null)===n[s])return!0}}return!1}},ca=e=>xe(e)&&e.hasAttribute("data-mce-bogus"),Ar=e=>xe(e)&&e.tagName==="TABLE",e0=e=>t=>!!(or(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),gm=rr(["textarea","input"]),re=ia(3),Z_=ia(4),eN=ia(7),ys=ia(8),bl=ia(9),hm=ia(11),Ht=la("br"),t0=la("img"),tN=la("a"),Xo=e0("true"),Pt=e0("false"),bm=e=>or(e)&&e.isContentEditable&&te(e.parentElement)&&!e.parentElement.isContentEditable,rd=rr(["td","th"]),nN=rr(["td","th","caption"]),n0=la("template"),sr=rr(["video","audio","object","embed"]),oN=la("li"),vm=la("details"),rN=la("summary"),o0={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},sN=e=>xe(e)&&e.hasAttribute("data-mce-bookmark"),aN=(e,t,n,o)=>re(e)&&!((r,s,a)=>ai(r.data)&&!((i,l,c)=>{const d=S.fromDom(l),m=S.fromDom(i),f=c.getWhitespaceElements();return dm(m,(g=>Me(f,Le(g))),Ce(pe,d))})(r,s,a))(e,t,n)&&(!o.includeZwsp||!(r=>{for(const s of r)if(!Kr(s))return!1;return!0})(e.data)),ym=(e,t,n,o)=>ht(o.isContent)&&o.isContent(t)||((r,s)=>xe(r)&&Me(s.getNonEmptyElements(),r.nodeName))(t,e)||sN(t)||(r=>xe(r)&&r.nodeName==="A"&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id")))(t)||aN(t,n,e,o)||Pt(t)||Xo(t)&&(r=>Nn(S.fromDom(r)).exists((s=>!Gr(s))))(t),Jr=(e,t,n)=>{const o={...o0,...n};if(o.checkRootAsContent&&ym(e,t,t,o))return!1;let r=t.firstChild,s=0;if(!r)return!0;const a=new ln(r,t);do{if(o.skipBogus&&xe(r)){const i=r.getAttribute("data-mce-bogus");if(i){r=a.next(i==="all");continue}}if(ys(r))r=a.next(!0);else if(Ht(r))s++,r=a.next();else{if(ym(e,r,t,o))return!1;r=a.next()}}while(r);return s<=1},Fn=(e,t,n)=>Jr(e,t.dom,{checkRootAsContent:!0,...n}),r0=(e,t,n)=>ym(e,t,t,{includeZwsp:o0.includeZwsp,...n}),s0=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},da=e=>s0(e)!=="html",Cm=e=>da(e.nodeName),a0=e=>s0(e.nodeName),iN=["svg","math"],sd="data-mce-block",xm=e=>qe((t=>Pe(fn(t),(n=>!/[A-Z]/.test(n))))(e),(t=>{const n=CSS.escape(t);return`${n}:`+qe(iN,(o=>`not(${o} ${n})`)).join(":")})).join(","),i0=(e,t)=>te(t.querySelector(e))?(t.setAttribute(sd,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(sd),!1),l0=(e,t)=>{const n=xm(e.getTransparentElements()),o=xm(e.getBlockElements());return Pe(t.querySelectorAll(n),(r=>i0(o,r)))},c0=(e,t,n)=>{var o;const r=n?"lastChild":"firstChild";for(let s=t[r];s;s=s[r])if(Jr(e,s,{checkRootAsContent:!0}))return void((o=s.parentNode)===null||o===void 0||o.removeChild(s))},lN=(e,t,n)=>{const o=e.getBlockElements(),r=S.fromDom(t),s=i=>Le(i)in o,a=i=>pe(i,r);K(An(n),(i=>{_r(i,s,a).each((l=>{const c=(d=>Pe(gt(d),(m=>s(m)&&!e.isValidChild(Le(l),Le(m)))))(i);if(c.length>0){const d=Nn(l);K(c,(m=>{_r(m,s,a).each((f=>{((g,h,b)=>{const v=document.createRange(),y=h.parentNode;if(y){v.setStartBefore(h),v.setEndBefore(b);const E=v.extractContents();c0(g,E,!0),v.setStartAfter(b),v.setEndAfter(h);const N=v.extractContents();c0(g,N,!1),Jr(g,E,{checkRootAsContent:!0})||y.insertBefore(E,h),Jr(g,b,{checkRootAsContent:!0})||y.insertBefore(b,h),Jr(g,N,{checkRootAsContent:!0})||y.insertBefore(N,h),y.removeChild(h)}})(e,f.dom,m.dom)}))})),d.each((m=>l0(e,m.dom)))}}))}))},wm=(e,t)=>{const n=l0(e,t);lN(e,t,n),((o,r,s)=>{K([...s,...ua(o,r)?[r]:[]],(a=>K(Tn(S.fromDom(a),a.nodeName.toLowerCase()),(i=>{dN(o,i.dom)&&Yt(i)}))))})(e,t,n)},cN=(e,t)=>{if(km(e,t)){const n=xm(e.getBlockElements());i0(n,t)}},Sm=e=>e.hasAttribute(sd),Em=(e,t)=>Me(e.getTransparentElements(),t),km=(e,t)=>xe(t)&&Em(e,t.nodeName),ua=(e,t)=>km(e,t)&&Sm(t),dN=(e,t)=>km(e,t)&&!Sm(t),_m=(e,t)=>t.type===1&&Em(e,t.name)&&we(t.attr(sd)),uN=No().browser,d0=e=>$t(e,nt),u0=(e,t)=>e.children&&Se(e.children,t),m0=(e,t={})=>{let n=0;const o={},r=S.fromDom(e),s=_n(r),a=m=>{X(na(r),m)},i=m=>{const f=na(r);Qc(f,"#"+m).each(ct)},l=m=>Ot(o,m).getOrThunk((()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}))),c=m=>new Promise(((f,g)=>{let h;const b=k._addCacheSuffix(m),v=l(b);o[b]=v,v.count++;const y=(R,P)=>{K(R,Xn),v.status=P,v.passed=[],v.failed=[],h&&(h.onload=null,h.onerror=null,h=null)},E=()=>y(v.passed,2),N=()=>y(v.failed,3);if(f&&v.passed.push(f),g&&v.failed.push(g),v.status===1)return;if(v.status===2)return void E();if(v.status===3)return void N();v.status=1;const D=S.fromTag("link",s.dom);Ae(D,{rel:"stylesheet",type:"text/css",id:v.id});const A=((R,P)=>{const L=P.crossOrigin;return P.contentCssCors?"anonymous":ht(L)?L(R):void 0})(m,t);A!==void 0&&Te(D,"crossOrigin",A),t.referrerPolicy&&Te(D,"referrerpolicy",t.referrerPolicy),h=D.dom,h.onload=E,h.onerror=N,a(D),Te(D,"href",b)})),d=m=>{const f=k._addCacheSuffix(m);Ot(o,f).each((g=>{--g.count==0&&(delete o[f],i(g.id))}))};return{load:c,loadRawCss:(m,f)=>{const g=l(m);o[m]=g,g.count++;const h=S.fromTag("style",s.dom);Ae(h,{rel:"stylesheet",type:"text/css",id:g.id,"data-mce-key":m}),h.dom.innerHTML=f,a(h)},loadAll:m=>Promise.allSettled(qe(m,(f=>c(f).then(ie(f))))).then((f=>{const g=Zo(f,(h=>h.status==="fulfilled"));return g.fail.length>0?Promise.reject(qe(g.fail,(h=>h.reason))):qe(g.pass,(h=>h.value))})),unload:d,unloadRawCss:m=>{Ot(o,m).each((f=>{--f.count==0&&(delete o[m],i(f.id))}))},unloadAll:m=>{K(m,(f=>{d(f)}))},_setReferrerPolicy:m=>{t.referrerPolicy=m},_setContentCssCors:m=>{t.contentCssCors=m},_setCrossOrigin:m=>{t.crossOrigin=m}}},f0=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const o=Qn(t).dom;return _.from(e.get(o)).getOrThunk((()=>{const r=m0(o,n);return e.set(o,r),r}))}}})(),p0=(e,t)=>te(e)&&(r0(t,e)||t.isInline(e.nodeName.toLowerCase())),g0=e=>(t=>t.nodeName.toLowerCase()==="span")(e)&&e.getAttribute("data-mce-type")==="bookmark",Nm=(e,t,n,o)=>{var r;const s=o||t;if(xe(t)&&g0(t))return t;const a=t.childNodes;for(let i=a.length-1;i>=0;i--)Nm(e,a[i],n,s);if(xe(t)){const i=t.childNodes;i.length===1&&g0(i[0])&&((r=t.parentNode)===null||r===void 0||r.insertBefore(i[0],t))}return(i=>hm(i)||bl(i))(t)||r0(n,t)||(i=>!!xe(i)&&i.childNodes.length>0)(t)||((i,l,c)=>re(i)&&i.data.length>0&&((d,m,f)=>{const g=new ln(d,m).prev(!1),h=new ln(d,m).next(!1),b=jt(g)||p0(g,f),v=jt(h)||p0(h,f);return b&&v})(i,l,c))(t,s,n)||e.remove(t),t},mN=k.makeMap,ad=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,id=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fN=/[<>&\"\']/g,pN=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,gN={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},ma={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},hN={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},h0=(e,t)=>{const n={};if(e){const o=e.split(",");t=t||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],t));if(!ma[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},Am=h0("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),b0=(e,t)=>e.replace(t?ad:id,(n=>ma[n]||n)),v0=(e,t)=>e.replace(t?ad:id,(n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":ma[n]||"&#"+n.charCodeAt(0)+";")),Tm=(e,t,n)=>{const o=n||Am;return e.replace(t?ad:id,(r=>ma[r]||o[r]||r))},fa={encodeRaw:b0,encodeAllRaw:e=>(""+e).replace(fN,(t=>ma[t]||t)),encodeNumeric:v0,encodeNamed:Tm,getEncodeFunc:(e,t)=>{const n=h0(t)||Am,o=mN(e.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?ad:id,(a=>ma[a]!==void 0?ma[a]:n[a]!==void 0?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";")):o.named?t?(r,s)=>Tm(r,s,n):Tm:o.numeric?v0:b0},decode:e=>e.replace(pN,((t,n)=>n?(n=n.charAt(0).toLowerCase()==="x"?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):gN[n]||String.fromCharCode(n):hN[t]||Am[t]||(o=>{const r=S.fromTag("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(t)))},Dn=(e,t)=>(e=k.trim(e))?e.split(t||" "):[],y0=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),C0=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),x0=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const o=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:o}},Dm=e=>{const{blockContent:t,phrasingContent:n,flowContent:o}=x0(e),r=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:r(t),phrasingContent:r(n),flowContent:r(o)})},bN={html4:qn((()=>Dm("html4"))),html5:qn((()=>Dm("html5"))),"html5-strict":qn((()=>Dm("html5-strict")))},w0=(e,t)=>{const{blockContent:n,phrasingContent:o,flowContent:r}=bN[e]();return t==="blocks"?_.some(n):t==="phrasing"?_.some(o):t==="flow"?_.some(r):_.none()},Rm=e=>_.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map((t=>({preset:t[1]==="@",name:t[2]}))),ld={},vl=k.makeMap,ar=k.each,S0=k.extend,E0=k.explode,k0=(e,t={})=>{const n=vl(e," ",vl(e.toUpperCase()," "));return S0(n,t)},_0=e=>k0("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Om=(e,t)=>{if(e){const n={};return we(e)&&(e={"*":e}),ar(e,((o,r)=>{n[r]=n[r.toUpperCase()]=t==="map"?vl(o,/[, ]/):E0(o,/[, ]/)})),n}},Cs=(e={})=>{var t;const n={},o={};let r=[];const s={},a={},i=(ye,Qe,lt)=>{const Ve=e[ye];if(Ve)return vl(Ve,/[, ]/,vl(Ve.toUpperCase(),/[, ]/));{let vt=ld[ye];return vt||(vt=k0(Qe,lt),ld[ye]=vt),vt}},l=(t=e.schema)!==null&&t!==void 0?t:"html5",c=(ye=>{const Qe=C0(ye),{phrasingContent:lt,flowContent:Ve}=x0(ye),vt={},Dt=(At,Tt,Kt)=>{vt[At]={attributes:kn(Tt,ie({})),attributesOrder:Tt,children:kn(Kt,ie({}))}},he=(At,Tt="",Kt="")=>{const En=Dn(Kt),fr=Dn(At);let Un=fr.length;const Uo=[...Qe,...Dn(Tt)];for(;Un--;)Dt(fr[Un],Uo.slice(),En)},je=(At,Tt)=>{const Kt=Dn(At),En=Dn(Tt);let fr=Kt.length;for(;fr--;){const Un=vt[Kt[fr]];for(let Uo=0,mn=En.length;Uo<mn;Uo++)Un.attributes[En[Uo]]={},Un.attributesOrder.push(En[Uo])}};return ye!=="html5-strict"&&(K(Dn("acronym applet basefont big font strike tt"),(At=>{he(At,"",lt)})),K(Dn("center dir isindex noframes"),(At=>{he(At,"",Ve)}))),he("html","manifest","head body"),he("head","","base command link meta noscript script style title"),he("title hr noscript br"),he("base","href target"),he("link","href rel media hreflang type sizes hreflang"),he("meta","name http-equiv content charset"),he("style","media type scoped"),he("script","src async defer type charset"),he("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Ve),he("dd div","",Ve),he("address dt caption","",ye==="html4"?lt:Ve),he("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",lt),he("blockquote","cite",Ve),he("ol","reversed start type","li"),he("ul","","li"),he("li","value",Ve),he("dl","","dt dd"),he("a","href target rel media hreflang type",ye==="html4"?lt:Ve),he("q","cite",lt),he("ins del","cite datetime",Ve),he("img","src sizes srcset alt usemap ismap width height"),he("iframe","src name width height",Ve),he("embed","src type width height"),he("object","data type typemustmatch name usemap form width height",[Ve,"param"].join(" ")),he("param","name value"),he("map","name",[Ve,"area"].join(" ")),he("area","alt coords shape href target rel media hreflang type"),he("table","border","caption colgroup thead tfoot tbody tr"+(ye==="html4"?" col":"")),he("colgroup","span","col"),he("col","span"),he("tbody thead tfoot","","tr"),he("tr","","td th"),he("td","colspan rowspan headers",Ve),he("th","colspan rowspan headers scope abbr",Ve),he("form","accept-charset action autocomplete enctype method name novalidate target",Ve),he("fieldset","disabled form name",[Ve,"legend"].join(" ")),he("label","form for",lt),he("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),he("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",ye==="html4"?Ve:lt),he("select","disabled form multiple name required size","option optgroup"),he("optgroup","disabled label","option"),he("option","disabled label selected value"),he("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),he("menu","type label",[Ve,"li"].join(" ")),he("noscript","",Ve),ye!=="html4"&&(he("wbr"),he("ruby","",[lt,"rt rp"].join(" ")),he("figcaption","",Ve),he("mark rt rp bdi","",lt),he("summary","",[lt,"h1 h2 h3 h4 h5 h6"].join(" ")),he("canvas","width height",Ve),he("data","value",lt),he("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Ve,"track source"].join(" ")),he("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Ve,"track source"].join(" ")),he("picture","","img source"),he("source","src srcset type media sizes"),he("track","kind src srclang label default"),he("datalist","",[lt,"option"].join(" ")),he("article section nav aside main header footer","",Ve),he("hgroup","","h1 h2 h3 h4 h5 h6"),he("figure","",[Ve,"figcaption"].join(" ")),he("time","datetime",lt),he("dialog","open",Ve),he("command","type label icon disabled checked radiogroup command"),he("output","for form name",lt),he("progress","value max",lt),he("meter","value min max low high optimum",lt),he("details","open",[Ve,"summary"].join(" ")),he("keygen","autofocus challenge disabled form keytype name"),Dt("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),ye!=="html5-strict"&&(je("script","language xml:space"),je("style","xml:space"),je("object","declare classid code codebase codetype archive standby align border hspace vspace"),je("embed","align name hspace vspace"),je("param","valuetype type"),je("a","charset name rev shape coords"),je("br","clear"),je("applet","codebase archive code object alt name width height align hspace vspace"),je("img","name longdesc align border hspace vspace"),je("iframe","longdesc frameborder marginwidth marginheight scrolling align"),je("font basefont","size color face"),je("input","usemap align"),je("select"),je("textarea"),je("h1 h2 h3 h4 h5 h6 div p legend caption","align"),je("ul","type compact"),je("li","type"),je("ol dl menu dir","compact"),je("pre","width xml:space"),je("hr","align noshade size width"),je("isindex","prompt"),je("table","summary width frame rules cellspacing cellpadding align bgcolor"),je("col","width align char charoff valign"),je("colgroup","width align char charoff valign"),je("thead","align char charoff valign"),je("tr","align char charoff valign bgcolor"),je("th","axis align char charoff valign nowrap bgcolor width height"),je("form","accept"),je("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),je("tfoot","align char charoff valign"),je("tbody","align char charoff valign"),je("area","nohref"),je("body","background bgcolor text link vlink alink")),ye!=="html4"&&(je("input button select textarea","autofocus"),je("input textarea","placeholder"),je("a","download"),je("link script img","crossorigin"),je("img","loading"),je("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),ye!=="html4"&&K([vt.video,vt.audio],(At=>{delete At.children.audio,delete At.children.video})),K(Dn("a form meter progress dfn"),(At=>{vt[At]&&delete vt[At].children[At]})),delete vt.caption.children.table,delete vt.script,vt})(l);e.verify_html===!1&&(e.valid_elements="*[*]");const d=Om(e.valid_styles),m=Om(e.invalid_styles,"map"),f=Om(e.valid_classes,"map"),g=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),h=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),v=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),y="td th iframe video audio object script code",E=i("non_empty_elements",y+" pre svg textarea summary",b),N=i("move_caret_before_on_enter_elements",y+" table",b),D="h1 h2 h3 h4 h5 h6",A=i("text_block_elements",D+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),R=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",A),P=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),L=i("transparent_elements","a ins del canvas map"),j=i("wrap_block_elements","pre "+D);ar("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),(ye=>{a[ye]=new RegExp("</"+ye+"[^>]*>","gi")}));const W=ye=>{const Qe=_.from(n["@"]),lt=/[*?+]/;K(((Ve,vt)=>{const Dt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return qt(Dn(vt,","),(he=>{const je=Dt.exec(he);if(je){const At=je[1],Tt=je[2],Kt=je[3],En=je[4],fr=je[5],Un={attributes:{},attributesOrder:[]};if(Ve.each((Uo=>((mn,ja)=>{Ct(mn.attributes,((Is,zr)=>{ja.attributes[zr]=Is})),ja.attributesOrder.push(...mn.attributesOrder)})(Uo,Un))),At==="#"?Un.paddEmpty=!0:At==="-"&&(Un.removeEmpty=!0),En==="!"&&(Un.removeEmptyAttrs=!0),fr&&((Uo,mn)=>{const ja=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Is=/[*?+]/,{attributes:zr,attributesOrder:Ho}=mn;K(Dn(Uo,"|"),(Fs=>{const rs=ja.exec(Fs);if(rs){const Ur={},Ju=rs[1],fo=rs[2].replace(/[\\:]:/g,":"),ss=rs[3],za=rs[4];if(Ju==="!"&&(mn.attributesRequired=mn.attributesRequired||[],mn.attributesRequired.push(fo),Ur.required=!0),Ju==="-")return delete zr[fo],void Ho.splice(k.inArray(Ho,fo),1);if(ss&&(ss==="="?(mn.attributesDefault=mn.attributesDefault||[],mn.attributesDefault.push({name:fo,value:za}),Ur.defaultValue=za):ss==="~"?(mn.attributesForced=mn.attributesForced||[],mn.attributesForced.push({name:fo,value:za}),Ur.forcedValue=za):ss==="<"&&(Ur.validValues=k.makeMap(za,"?"))),Is.test(fo)){const js=Ur;mn.attributePatterns=mn.attributePatterns||[],js.pattern=y0(fo),mn.attributePatterns.push(js)}else zr[fo]||Ho.push(fo),zr[fo]=Ur}}))})(fr,Un),Kt&&(Un.outputName=Tt),Tt==="@"){if(!Ve.isNone())return[];Ve=_.some(Un)}return[Kt?{name:Tt,element:Un,aliasName:Kt}:{name:Tt,element:Un}]}return[]}))})(Qe,ye??""),(({name:Ve,element:vt,aliasName:Dt})=>{if(Dt&&(n[Dt]=vt),lt.test(Ve)){const he=vt;he.pattern=y0(Ve),r.push(he)}else n[Ve]=vt}))},B=ye=>{r=[],K(fn(n),(Qe=>{delete n[Qe]})),W(ye)},I=(ye,Qe)=>{var lt,Ve;delete ld.text_block_elements,delete ld.block_elements;const vt=!!Qe.extends&&!Lt(Qe.extends),Dt=Qe.extends;if(o[ye]=Dt?o[Dt]:{},s[ye]=Dt??ye,E[ye.toUpperCase()]={},E[ye]={},vt||(R[ye.toUpperCase()]={},R[ye]={}),Dt&&!n[ye]&&n[Dt]){const he=(je=>{const At=Tt=>se(Tt)?qe(Tt,At):(Kt=>Ue(Kt)&&Kt.source&&Object.prototype.toString.call(Kt)==="[object RegExp]")(Tt)?new RegExp(Tt.source,Tt.flags):Ue(Tt)?qs(Tt,At):Tt;return At(je)})(n[Dt]);delete he.removeEmptyAttrs,delete he.removeEmpty,n[ye]=he}else n[ye]={attributesOrder:[],attributes:{}};if(se(Qe.attributes)){const he=At=>{je.attributesOrder.push(At),je.attributes[At]={}},je=(lt=n[ye])!==null&&lt!==void 0?lt:{};delete je.attributesDefault,delete je.attributesForced,delete je.attributePatterns,delete je.attributesRequired,je.attributesOrder=[],je.attributes={},K(Qe.attributes,(At=>{const Tt=C0(l);Rm(At).each((({preset:Kt,name:En})=>{Kt?En==="global"&&K(Tt,he):he(En)}))})),n[ye]=je}if(Cn(Qe.padEmpty)){const he=(Ve=n[ye])!==null&&Ve!==void 0?Ve:{};he.paddEmpty=Qe.padEmpty,n[ye]=he}if(se(Qe.children)){const he={},je=Tt=>{he[Tt]={}},At=Tt=>{w0(l,Tt).each((Kt=>{K(Kt,je)}))};K(Qe.children,(Tt=>{Rm(Tt).each((({preset:Kt,name:En})=>{Kt?At(En):je(En)}))})),o[ye]=he}Dt&&Ct(o,((he,je)=>{he[Dt]&&(o[je]=he=S0({},o[je]),he[ye]=he[Dt])}))},H=ye=>{Ue(ye)?Ct(ye,((Qe,lt)=>I(lt,Qe))):we(ye)&&(Qe=>{K((lt=>{const Ve=/^(~)?(.+)$/;return qt(Dn(lt,","),(vt=>{const Dt=Ve.exec(vt);return Dt?[{cloneName:Dt[1]==="~"?"span":"div",name:Dt[2]}]:[]}))})(Qe??""),(({name:lt,cloneName:Ve})=>{I(lt,{extends:Ve})}))})(ye)},J=ye=>{K((Qe=>{const lt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return qt(Dn(Qe,","),(Ve=>{const vt=lt.exec(Ve);if(vt){const Dt=vt[1];return[{operation:Dt?(je=>je==="-"?"remove":"add")(Dt):"replace",name:vt[2],validChildren:qt(Dn(vt[3],"|"),(je=>Rm(je).toArray()))}]}return[]}))})(ye??""),(({operation:Qe,name:lt,validChildren:Ve})=>{const vt=Qe==="replace"?{"#comment":{}}:o[lt],Dt=he=>{Qe==="remove"?delete vt[he]:vt[he]={}};K(Ve,(({preset:he,name:je})=>{he?(At=>{w0(l,At).each((Tt=>{K(Tt,Dt)}))})(je):Dt(je)})),o[lt]=vt}))},oe=ye=>{const Qe=n[ye];if(Qe)return Qe;let lt=r.length;for(;lt--;){const Ve=r[lt];if(Ve.pattern.test(ye))return Ve}},le=ie(d),_e=ie(m),Oe=ie(f),De=ie(v),rt=ie(R),be=ie(A),Ne=ie(P),F=ie(Object.seal(b)),z=ie(h),Q=ie(E),Y=ie(N),fe=ie(g),ue=ie(L),ze=ie(j),We=ie(Object.seal(a)),tt=(ye,Qe)=>{const lt=oe(ye);if(lt){if(!Qe)return!0;{if(lt.attributes[Qe])return!0;const Ve=lt.attributePatterns;if(Ve){let vt=Ve.length;for(;vt--;)if(Ve[vt].pattern.test(Qe))return!0}}}return!1},Lt=ye=>Me(rt(),ye),Mt=ye=>!Jt(ye,"#")&&tt(ye)&&!Lt(ye),mo=ie(s);return e.valid_elements?(B(e.valid_elements),ar(c,((ye,Qe)=>{o[Qe]=ye.children}))):(ar(c,((ye,Qe)=>{n[Qe]={attributes:ye.attributes,attributesOrder:ye.attributesOrder},o[Qe]=ye.children})),ar(Dn("strong/b em/i"),(ye=>{const Qe=Dn(ye,"/");n[Qe[1]].outputName=Qe[0]})),ar(P,((ye,Qe)=>{n[Qe]&&(e.padd_empty_block_inline_children&&(n[Qe].paddInEmptyBlock=!0),n[Qe].removeEmpty=!0)})),ar(Dn("ol ul blockquote a table tbody"),(ye=>{n[ye]&&(n[ye].removeEmpty=!0)})),ar(Dn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),(ye=>{n[ye]&&(n[ye].paddEmpty=!0)})),ar(Dn("span"),(ye=>{n[ye].removeEmptyAttrs=!0}))),delete n.svg,H(e.custom_elements),J(e.valid_children),W(e.extended_valid_elements),J("+ol[ul|ol],+ul[ul|ol]"),ar({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},((ye,Qe)=>{n[Qe]&&(n[Qe].parentsRequired=Dn(ye))})),e.invalid_elements&&ar(E0(e.invalid_elements),(ye=>{n[ye]&&delete n[ye]})),oe("span")||W("span[!data-mce-type|*]"),{type:l,children:o,elements:n,getValidStyles:le,getValidClasses:Oe,getBlockElements:rt,getInvalidStyles:_e,getVoidElements:F,getTextBlockElements:be,getTextInlineElements:Ne,getBoolAttrs:De,getElementRule:oe,getSelfClosingElements:z,getNonEmptyElements:Q,getMoveCaretBeforeOnEnterElements:Y,getWhitespaceElements:fe,getTransparentElements:ue,getSpecialElements:We,isValidChild:(ye,Qe)=>{const lt=o[ye.toLowerCase()];return!(!lt||!lt[Qe.toLowerCase()])},isValid:tt,isBlock:Lt,isInline:Mt,isWrapper:ye=>Me(ze(),ye)||Mt(ye),getCustomElements:mo,addValidElements:W,setValidElements:B,addCustomElements:H,addValidChildren:J}},Bm=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},vN=e=>(t=>{return{value:(n=t,cs(n,"#").toUpperCase())};var n})(Bm(e.red)+Bm(e.green)+Bm(e.blue)),N0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,A0=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,T0=(e,t,n,o)=>((r,s,a,i)=>({red:r,green:s,blue:a,alpha:i}))(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(o)),D0=e=>{const t=N0.exec(e);if(t!==null)return _.some(T0(t[1],t[2],t[3],"1"));const n=A0.exec(e);return n!==null?_.some(T0(n[1],n[2],n[3],n[4])):_.none()},yN=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,yl=e=>D0(e).map(vN).map((t=>"#"+t.value)).getOr(e),Pm=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;const l=xr;t&&(a=t.getValidStyles(),i=t.getInvalidStyles());const c=`\\" \\' \\; \\: ; : \uFEFF`.split(" ");for(let m=0;m<c.length;m++)s[c[m]]=l+m,s[l+m]=c[m];const d={parse:m=>{const f={};let g=!1;const h=e.url_converter,b=e.url_converter_scope||d,v=(B,I,H)=>{const J=f[B+"-top"+I];if(!J)return;const oe=f[B+"-right"+I];if(!oe)return;const le=f[B+"-bottom"+I];if(!le)return;const _e=f[B+"-left"+I];if(!_e)return;const Oe=[J,oe,le,_e];let De=Oe.length-1;for(;De--&&Oe[De]===Oe[De+1];);De>-1&&H||(f[B+I]=De===-1?Oe[0]:Oe.join(" "),delete f[B+"-top"+I],delete f[B+"-right"+I],delete f[B+"-bottom"+I],delete f[B+"-left"+I])},y=B=>{const I=f[B];if(!I)return;const H=I.indexOf(",")>-1?[I]:I.split(" ");let J=H.length;for(;J--;)if(H[J]!==H[0])return!1;return f[B]=H[0],!0},E=B=>(g=!0,s[B]),N=(B,I)=>(g&&(B=B.replace(/\uFEFF[0-9]/g,(H=>s[H]))),I||(B=B.replace(/\\([\'\";:])/g,"$1")),B),D=B=>String.fromCharCode(parseInt(B.slice(1),16)),A=B=>B.replace(/\\[0-9a-f]+/gi,D),R=(B,I,H,J,oe,le)=>{if(oe=oe||le)return"'"+(oe=N(oe)).replace(/\'/g,"\\'")+"'";if(I=N(I||H||J||""),!e.allow_script_urls){const _e=I.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(_e)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(_e))return""}return h&&(I=h.call(b,I,"style")),"url('"+I.replace(/\'/g,"\\'")+"')"};if(m){let B;for(m=(m=m.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,E).replace(/\"[^\"]+\"|\'[^\']+\'/g,(I=>I.replace(/[;:]/g,E)));B=o.exec(m);){o.lastIndex=B.index+B[0].length;let I=B[1].replace(r,"").toLowerCase(),H=B[2].replace(r,"");if(I&&H){if(I=A(I),H=A(H),I.indexOf(l)!==-1||I.indexOf('"')!==-1||!e.allow_script_urls&&(I==="behavior"||/expression\s*\(|\/\*|\*\//.test(H)))continue;I==="font-weight"&&H==="700"?H="bold":I!=="color"&&I!=="background-color"||(H=H.toLowerCase()),W=H,(N0.test(W)?"rgb":A0.test(W)?"rgba":"other")=="rgb"&&D0(H).each((J=>{H=yl(yN(J)).toLowerCase()})),H=H.replace(n,R),f[I]=g?N(H,!0):H}}v("border","",!0),v("border","-width"),v("border","-color"),v("border","-style"),v("padding",""),v("margin",""),L="border-style",j="border-color",y(P="border-width")&&y(L)&&y(j)&&(f.border=f[P]+" "+f[L]+" "+f[j],delete f[P],delete f[L],delete f[j]),f.border==="medium none"&&delete f.border,f["border-image"]==="none"&&delete f["border-image"]}var P,L,j,W;return f},serialize:(m,f)=>{let g="";const h=(b,v)=>{const y=v[b];if(y)for(let E=0,N=y.length;E<N;E++){const D=y[E],A=m[D];A&&(g+=(g.length>0?" ":"")+D+": "+A+";")}};return f&&a?(h("*",a),h(f,a)):Ct(m,((b,v)=>{b&&((y,E)=>{if(!i||!E)return!0;let N=i["*"];return!(N&&N[y]||(N=i[E],N&&N[y]))})(v,f)&&(g+=(g.length>0?" ":"")+v+": "+b+";")})),g}};return d},CN={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},R0=(e,t)=>{const n=t??{};for(const o in e)Me(CN,o)||(n[o]=e[o]);return te(e.composedPath)&&(n.composedPath=()=>e.composedPath()),te(e.getModifierState)&&(n.getModifierState=o=>e.getModifierState(o)),te(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Lm=(e,t,n,o)=>{var r;const s=R0(t,o);return s.type=e,kt(s.target)&&(s.target=(r=s.srcElement)!==null&&r!==void 0?r:n),(a=>kt(a.preventDefault)||(i=>i instanceof Event||ht(i.initEvent))(a))(t)&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=zt,ht(t.preventDefault)&&t.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=zt,ht(t.stopPropagation)&&t.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=zt,s.stopPropagation()},(a=>a.isDefaultPrevented===zt||a.isDefaultPrevented===_t)(s)||(s.isDefaultPrevented=s.defaultPrevented===!0?zt:_t,s.isPropagationStopped=s.cancelBubble===!0?zt:_t,s.isImmediatePropagationStopped=_t)),s},xN=/^(?:mouse|contextmenu)|click/,Mm=(e,t,n,o)=>{e.addEventListener(t,n,o||!1)},cd=(e,t,n,o)=>{e.removeEventListener(t,n,o||!1)},Cl=(e,t)=>{const n=Lm(e.type,e,document,t);if((o=>te(o)&&xN.test(o.type))(e)&&jt(e.pageX)&&!jt(e.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=e.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=e.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}return n},wN=(e,t,n)=>{const o=e.document,r={type:"ready"};if(n.domLoaded)return void t(r);const s=()=>{cd(e,"DOMContentLoaded",s),cd(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(r)),e=null};o.readyState==="complete"||o.readyState==="interactive"&&o.body?s():Mm(e,"DOMContentLoaded",s),n.domLoaded||Mm(e,"load",s)};class pa{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,o,r){const s=this;let a;const i=window,l=f=>{s.executeHandlers(Cl(f||i.event),c)};if(!t||re(t)||ys(t))return o;let c;t[s.expando]?c=t[s.expando]:(c=s.count++,t[s.expando]=c,s.events[c]={}),r=r||t;const d=n.split(" ");let m=d.length;for(;m--;){let f=d[m],g=l,h=!1,b=!1;f==="DOMContentLoaded"&&(f="ready"),s.domLoaded&&f==="ready"&&t.readyState==="complete"?o.call(r,Cl({type:f})):(s.hasFocusIn||f!=="focusin"&&f!=="focusout"||(h=!0,b=f==="focusin"?"focus":"blur",g=v=>{const y=Cl(v||i.event);y.type=y.type==="focus"?"focusin":"focusout",s.executeHandlers(y,c)}),a=s.events[c][f],a?f==="ready"&&s.domLoaded?o(Cl({type:f})):a.push({func:o,scope:r}):(s.events[c][f]=a=[{func:o,scope:r}],a.fakeName=b,a.capture=h,a.nativeHandler=g,f==="ready"?wN(t,g,s):Mm(t,b||f,g,h)))}return t=a=null,o}unbind(t,n,o){if(!t||re(t)||ys(t))return this;const r=t[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(o){let d=c.length;for(;d--;)if(c[d].func===o){const m=c.nativeHandler,f=c.fakeName,g=c.capture,h=c.slice(0,d).concat(c.slice(d+1));h.nativeHandler=m,h.fakeName=f,h.capture=g,s[l]=h}}o&&c.length!==0||(delete s[l],cd(t,c.fakeName||l,c.nativeHandler,c.capture))}}}else Ct(s,((a,i)=>{cd(t,a.fakeName||i,a.nativeHandler,a.capture)})),s={};for(const a in s)if(Me(s,a))return this;delete this.events[r];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,o){return this.dispatch(t,n,o)}dispatch(t,n,o){if(!t||re(t)||ys(t))return this;const r=Cl({type:n,target:t},o);do{const s=t[this.expando];s&&this.executeHandlers(r,s),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!r.isPropagationStopped());return this}clean(t){if(!t||re(t)||ys(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let o=n.length;for(;o--;)(t=n[o])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const o=this.events[n],r=o&&o[t.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&i.func.call(i.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}pa.Event=new pa;const Im=k.each,SN=k.grep,Fm="data-mce-style",EN=k.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),xl=(e,t,n)=>{kt(n)||n===""?ot(e,t):Te(e,t,n)},O0=e=>e.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase())),ii=(e,t)=>{let n=0;if(e)for(let o=e.nodeType,r=e.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!t||!re(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},B0=(e,t)=>{const n=ft(t,"style"),o=e.serialize(e.parse(n),Le(t));xl(t,Fm,o)},P0=(e,t,n)=>{const o=O0(t);kt(n)||n===""?Xc(e,o):Vc(e,o,((r,s)=>x(r)?Me(EN,s)?r+"":r+"px":r)(n,o))},St=(e,t={})=>{const n={},o=window,r={};let s=0;const a=f0.forElement(S.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy,crossOrigin:F=>{const z=t.crossOrigin;return ht(z)?z(F,"stylesheet"):void 0}}),i=[],l=t.schema?t.schema:Cs({}),c=Pm({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new pa:pa.Event,m=l.getBlockElements(),f=F=>F&&e&&we(F)?e.getElementById(F):F,g=F=>{const z=f(F);return te(z)?S.fromDom(z):null},h=(F,z,Q="")=>{let Y;const fe=g(F);if(te(fe)&&nt(fe)){const ue=Ne[z];Y=ue&&ue.get?ue.get(fe.dom,z):ft(fe,z)}return te(Y)?Y:Q},b=F=>{const z=f(F);return kt(z)?[]:z.attributes},v=(F,z,Q)=>{L(F,(Y=>{if(xe(Y)){const fe=S.fromDom(Y),ue=Q===""?null:Q,ze=ft(fe,z),We=Ne[z];We&&We.set?We.set(fe.dom,ue,z):xl(fe,z,ue),ze!==ue&&t.onSetAttrib&&t.onSetAttrib({attrElm:fe.dom,attrName:z,attrValue:ue})}}))},y=()=>t.root_element||e.body,E=(F,z)=>((Q,Y,fe)=>{let ue=0,ze=0;const We=Q.ownerDocument;if(fe=fe||Q,Y){if(fe===Q&&Y.getBoundingClientRect&&nr(S.fromDom(Q),"position")==="static"){const Lt=Y.getBoundingClientRect();return ue=Lt.left+(We.documentElement.scrollLeft||Q.scrollLeft)-We.documentElement.clientLeft,ze=Lt.top+(We.documentElement.scrollTop||Q.scrollTop)-We.documentElement.clientTop,{x:ue,y:ze}}let tt=Y;for(;tt&&tt!==fe&&tt.nodeType&&!u0(tt,fe);){const Lt=tt;ue+=Lt.offsetLeft||0,ze+=Lt.offsetTop||0,tt=Lt.offsetParent}for(tt=Y.parentNode;tt&&tt!==fe&&tt.nodeType&&!u0(tt,fe);)ue-=tt.scrollLeft||0,ze-=tt.scrollTop||0,tt=tt.parentNode;ze+=(Lt=>uN.isFirefox()&&Le(Lt)==="table"?d0(gt(Lt)).filter((Mt=>Le(Mt)==="caption")).bind((Mt=>d0(st(Mt)).map((mo=>{const ye=mo.dom.offsetTop,Qe=Mt.dom.offsetTop,lt=Mt.dom.offsetHeight;return ye<=Qe?-lt:0})))).getOr(0):0)(S.fromDom(Y))}return{x:ue,y:ze}})(e.body,f(F),z),N=(F,z,Q)=>{const Y=f(F);var fe;if(!kt(Y)&&(or(Y)||xe(fe=Y)&&fe.namespaceURI==="http://www.w3.org/2000/svg"))return Q?nr(S.fromDom(Y),O0(z)):((z=z.replace(/-(\D)/g,((ue,ze)=>ze.toUpperCase())))==="float"&&(z="cssFloat"),Y.style?Y.style[z]:void 0)},D=F=>{const z=f(F);if(!z)return{w:0,h:0};let Q=N(z,"width"),Y=N(z,"height");return Q&&Q.indexOf("px")!==-1||(Q="0"),Y&&Y.indexOf("px")!==-1||(Y="0"),{w:parseInt(Q,10)||z.offsetWidth||z.clientWidth,h:parseInt(Y,10)||z.offsetHeight||z.clientHeight}},A=(F,z)=>{if(!F)return!1;const Q=se(F)?F:[F];return yt(Q,(Y=>Z(S.fromDom(Y),z)))},R=(F,z,Q,Y)=>{const fe=[];let ue=f(F);Y=Y===void 0;const ze=Q||(y().nodeName!=="BODY"?y().parentNode:null);if(we(z))if(z==="*")z=xe;else{const We=z;z=tt=>A(tt,We)}for(;ue&&!(ue===ze||kt(ue.nodeType)||bl(ue)||hm(ue));){if(!z||z(ue)){if(!Y)return[ue];fe.push(ue)}ue=ue.parentNode}return Y?fe:null},P=(F,z,Q)=>{let Y=z;if(F){we(z)&&(Y=fe=>A(fe,z));for(let fe=F[Q];fe;fe=fe[Q])if(ht(Y)&&Y(fe))return fe}return null},L=function(F,z,Q){const Y=Q??this;if(se(F)){const fe=[];return Im(F,((ue,ze)=>{const We=f(ue);We&&fe.push(z.call(Y,We,ze))})),fe}{const fe=f(F);return!!fe&&z.call(Y,fe)}},j=(F,z)=>{L(F,(Q=>{Ct(z,((Y,fe)=>{v(Q,fe,Y)}))}))},W=(F,z)=>{L(F,(Q=>{const Y=S.fromDom(Q);aa(Y,z)}))},B=(F,z,Q,Y,fe)=>L(F,(ue=>{const ze=we(z)?e.createElement(z):z;return te(Q)&&j(ze,Q),Y&&(!we(Y)&&Y.nodeType?ze.appendChild(Y):we(Y)&&W(ze,Y)),fe?ze:ue.appendChild(ze)})),I=(F,z,Q)=>B(e.createElement(F),F,z,Q,!0),H=fa.encodeAllRaw,J=(F,z)=>L(F,(Q=>{const Y=S.fromDom(Q);return z&&K(gt(Y),(fe=>{wt(fe)&&fe.dom.length===0?ct(fe):dn(Y,fe)})),ct(Y),Y.dom})),oe=(F,z,Q)=>{L(F,(Y=>{if(xe(Y)){const fe=S.fromDom(Y),ue=z.split(" ");K(ue,(ze=>{te(Q)?(Q?ri:hl)(fe,ze):((We,tt)=>{const Lt=gl(We)?We.dom.classList.toggle(tt):((Mt,mo)=>Se($h(Mt),mo)?Wh(Mt,mo):qh(Mt,mo))(We,tt);Vh(We)})(fe,ze)}))}}))},le=(F,z,Q)=>L(z,(Y=>{var fe;const ue=se(z)?F.cloneNode(!0):F;return Q&&Im(SN(Y.childNodes),(ze=>{ue.appendChild(ze)})),(fe=Y.parentNode)===null||fe===void 0||fe.replaceChild(ue,Y),Y})),_e=()=>e.createRange(),Oe=(F,z,Q,Y)=>{if(se(F)){let fe=F.length;const ue=[];for(;fe--;)ue[fe]=Oe(F[fe],z,Q,Y);return ue}return!t.collect||F!==e&&F!==o||i.push([F,z,Q,Y]),d.bind(F,z,Q,Y||be)},De=(F,z,Q)=>{if(se(F)){let Y=F.length;const fe=[];for(;Y--;)fe[Y]=De(F[Y],z,Q);return fe}if(i.length>0&&(F===e||F===o)){let Y=i.length;for(;Y--;){const[fe,ue,ze]=i[Y];F!==fe||z&&z!==ue||Q&&Q!==ze||d.unbind(fe,ue,ze)}}return d.unbind(F,z,Q)},rt=F=>{if(F&&or(F)){const z=F.getAttribute("data-mce-contenteditable");return z&&z!=="inherit"?z:F.contentEditable!=="inherit"?F.contentEditable:null}return null},be={doc:e,settings:t,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:d,isBlock:F=>we(F)?Me(m,F):xe(F)&&(Me(m,F.nodeName)||ua(l,F)),root:null,clone:(F,z)=>F.cloneNode(z),getRoot:y,getViewPort:F=>{const z=pm(F);return{x:z.x,y:z.y,w:z.width,h:z.height}},getRect:F=>{const z=f(F),Q=E(z),Y=D(z);return{x:Q.x,y:Q.y,w:Y.w,h:Y.h}},getSize:D,getParent:(F,z,Q)=>{const Y=R(F,z,Q,!1);return Y&&Y.length>0?Y[0]:null},getParents:R,get:f,getNext:(F,z)=>P(F,z,"nextSibling"),getPrev:(F,z)=>P(F,z,"previousSibling"),select:(F,z)=>{var Q,Y;const fe=(Y=(Q=f(z))!==null&&Q!==void 0?Q:t.root_element)!==null&&Y!==void 0?Y:e;return ht(fe.querySelectorAll)?xn(fe.querySelectorAll(F)):[]},is:A,add:B,create:I,createHTML:(F,z,Q="")=>{let Y="<"+F;for(const fe in z)pn(z,fe)&&(Y+=" "+fe+'="'+H(z[fe])+'"');return ds(Q)&&Me(l.getVoidElements(),F)?Y+" />":Y+">"+Q+"</"+F+">"},createFragment:F=>{const z=e.createElement("div"),Q=e.createDocumentFragment();let Y;for(Q.appendChild(z),F&&(z.innerHTML=F);Y=z.firstChild;)Q.appendChild(Y);return Q.removeChild(z),Q},remove:J,setStyle:(F,z,Q)=>{L(F,(Y=>{const fe=S.fromDom(Y);P0(fe,z,Q),t.update_styles&&B0(c,fe)}))},getStyle:N,setStyles:(F,z)=>{L(F,(Q=>{const Y=S.fromDom(Q);Ct(z,((fe,ue)=>{P0(Y,ue,fe)})),t.update_styles&&B0(c,Y)}))},removeAllAttribs:F=>L(F,(z=>{const Q=z.attributes;for(let Y=Q.length-1;Y>=0;Y--)z.removeAttributeNode(Q.item(Y))})),setAttrib:v,setAttribs:j,getAttrib:h,getPos:E,parseStyle:F=>c.parse(F),serializeStyle:(F,z)=>c.serialize(F,z),addStyle:F=>{if(be!==St.DOM&&e===document){if(n[F])return;n[F]=!0}let z=e.getElementById("mceDefaultStyles");if(!z){z=e.createElement("style"),z.id="mceDefaultStyles",z.type="text/css";const Q=e.head;Q.firstChild?Q.insertBefore(z,Q.firstChild):Q.appendChild(z)}z.styleSheet?z.styleSheet.cssText+=F:z.appendChild(e.createTextNode(F))},loadCSS:F=>{F||(F=""),K(F.split(","),(z=>{r[z]=!0,a.load(z).catch(Ee)}))},addClass:(F,z)=>{oe(F,z,!0)},removeClass:(F,z)=>{oe(F,z,!1)},hasClass:(F,z)=>{const Q=g(F),Y=z.split(" ");return te(Q)&&no(Y,(fe=>cm(Q,fe)))},toggleClass:oe,show:F=>{L(F,(z=>Xc(S.fromDom(z),"display")))},hide:F=>{L(F,(z=>Vc(S.fromDom(z),"display","none")))},isHidden:F=>{const z=g(F);return te(z)&&ls(ei(z,"display"),"none")},uniqueId:F=>(F||"mce_")+s++,setHTML:W,getOuterHTML:F=>{const z=g(F);return te(z)?xe(z.dom)?z.dom.outerHTML:(Q=>{const Y=S.fromTag("div"),fe=S.fromDom(Q.dom.cloneNode(!0));return X(Y,fe),sa(Y)})(z):""},setOuterHTML:(F,z)=>{L(F,(Q=>{xe(Q)&&(Q.outerHTML=z)}))},decode:fa.decode,encode:H,insertAfter:(F,z)=>{const Q=f(z);return L(F,(Y=>{const fe=Q?.parentNode,ue=Q?.nextSibling;return fe&&(ue?fe.insertBefore(Y,ue):fe.appendChild(Y)),Y}))},replace:le,rename:(F,z)=>{if(F.nodeName!==z.toUpperCase()){const Q=I(z);return Im(b(F),(Y=>{v(Q,Y.nodeName,h(F,Y.nodeName))})),le(Q,F,!0),Q}return F},findCommonAncestor:(F,z)=>{let Q=F;for(;Q;){let Y=z;for(;Y&&Q!==Y;)Y=Y.parentNode;if(Q===Y)break;Q=Q.parentNode}return!Q&&F.ownerDocument?F.ownerDocument.documentElement:Q},run:L,getAttribs:b,isEmpty:(F,z,Q)=>Be(z)?Jr(l,F,{...Q,isContent:fe=>{const ue=fe.nodeName.toLowerCase();return!!z[ue]}}):Jr(l,F,Q),createRng:_e,nodeIndex:ii,split:(F,z,Q)=>{let Y,fe,ue=_e();if(F&&z&&F.parentNode&&z.parentNode){const ze=F.parentNode;return ue.setStart(ze,ii(F)),ue.setEnd(z.parentNode,ii(z)),Y=ue.extractContents(),ue=_e(),ue.setStart(z.parentNode,ii(z)+1),ue.setEnd(ze,ii(F)+1),fe=ue.extractContents(),ze.insertBefore(Nm(be,Y,l),F),Q?ze.insertBefore(Q,F):ze.insertBefore(z,F),ze.insertBefore(Nm(be,fe,l),F),J(F),Q||z}},bind:Oe,unbind:De,fire:(F,z,Q)=>d.dispatch(F,z,Q),dispatch:(F,z,Q)=>d.dispatch(F,z,Q),getContentEditable:rt,getContentEditableParent:F=>{const z=y();let Q=null;for(let Y=F;Y&&Y!==z&&(Q=rt(Y),Q===null);Y=Y.parentNode);return Q},isEditable:F=>{if(te(F)){const z=xe(F)?F:F.parentElement;return te(z)&&or(z)&&Gr(S.fromDom(z))}return!1},destroy:()=>{if(i.length>0){let F=i.length;for(;F--;){const[z,Q,Y]=i[F];d.unbind(z,Q,Y)}}Ct(r,((F,z)=>{a.unload(z),delete r[z]}))},isChildOf:(F,z)=>F===z||z.contains(F),dumpRng:F=>"startContainer: "+F.startContainer.nodeName+", startOffset: "+F.startOffset+", endContainer: "+F.endContainer.nodeName+", endOffset: "+F.endOffset},Ne=((F,z,Q)=>{const Y=z.keep_values,fe={set:(ze,We,tt)=>{const Lt=S.fromDom(ze);ht(z.url_converter)&&te(We)&&(We=z.url_converter.call(z.url_converter_scope||Q(),String(We),tt,ze)),xl(Lt,"data-mce-"+tt,We),xl(Lt,tt,We)},get:(ze,We)=>{const tt=S.fromDom(ze);return ft(tt,"data-mce-"+We)||ft(tt,We)}},ue={style:{set:(ze,We)=>{const tt=S.fromDom(ze);Y&&xl(tt,Fm,We),ot(tt,"style"),we(We)&&Kc(tt,F.parse(We))},get:ze=>{const We=S.fromDom(ze),tt=ft(We,Fm)||ft(We,"style");return F.serialize(F.parse(tt),Le(We))}}};return Y&&(ue.href=ue.src=fe),ue})(c,t,ie(be));return be};St.DOM=St(document),St.nodeIndex=ii;const kN=St.DOM;class Tr{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}_setCrossOrigin(t){this.settings.crossOrigin=t}loadScript(t){return new Promise(((n,o)=>{const r=kN;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=k._addCacheSuffix(t),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy);const l=this.settings.crossOrigin;if(ht(l)){const c=l(t);c!==void 0&&r.setAttrib(s,"crossorigin",c)}s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}))}isDone(t){return this.states[t]===2}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=0),new Promise(((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})}))}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,o=(l,c)=>{Ot(n.scriptLoadedCallbacks,c).each((d=>{K(d,(m=>m[l](c)))})),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=Pe(l,(d=>d.status==="rejected"));return c.length>0?Promise.reject(qt(c,(({reason:d})=>se(d)?d:[d]))):Promise.resolve()},s=l=>Promise.allSettled(qe(l,(c=>n.states[c]===2?(o("resolve",c),Promise.resolve()):n.states[c]===3?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then((()=>{n.states[c]=2,o("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],s(d).then(r)):Promise.resolve()}),(()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))))),a=l=>(n.loading=!0,s(l).then((c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return _.from(d).each(Xn),r(c)}))),i=Dc(t);return n.loading?new Promise(((l,c)=>{n.queueLoadedCallbacks.push((()=>{a(i).then(l,c)}))})):a(i)}}Tr.ScriptLoader=new Tr;const wl={},jm=tn("en"),L0=()=>Ot(wl,jm.get()),ir={getData:()=>qs(wl,(e=>({...e}))),setCode:e=>{e&&jm.set(e)},getCode:()=>jm.get(),add:(e,t)=>{let n=wl[e];n||(wl[e]=n={});const o=qe(fn(t),(r=>r.toLowerCase()));Ct(t,((r,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const c=i.indexOf(l);return c!==-1&&i.indexOf(l,c+1)>c})(o,a)?(Me(t,a)||(n[a]=r),n[s]=r):n[a]=r}))},translate:e=>{const t=L0().getOr({}),n=l=>ht(l)?Object.prototype.toString.call(l):o(l)?"":""+l,o=l=>l===""||l==null,r=l=>{const c=n(l);return Me(t,c)?n(t[c]):Ot(t,c.toLowerCase()).map(n).getOr(c)},s=l=>l.replace(/{context:\w+}$/,""),a=l=>l.replaceAll("...","\u2026");if(o(e))return"";if(Ue(i=e)&&Me(i,"raw"))return a(n(e.raw));var i;if((l=>se(l)&&l.length>1)(e)){const l=e.slice(1);return a(s(r(e[0]).replace(/\{([0-9]+)\}/g,((c,d)=>Me(l,d)?n(l[d]):c))))}return a(s(r(e)))},isRtl:()=>L0().bind((e=>Ot(e,"_dir"))).exists((e=>e==="rtl")),hasCode:e=>Me(wl,e)},jn=()=>{const e=[],t={},n={},o=[],r=(l,c)=>{const d=Pe(o,(m=>m.name===l&&m.state===c));K(d,(m=>m.resolve()))},s=l=>Me(t,l),a=(l,c)=>{const d=ir.getCode();!d||c&&(","+(c||"")+",").indexOf(","+d+",")===-1||Tr.ScriptLoader.add(t[l]+"/langs/"+d+".js")},i=(l,c="added")=>c==="added"&&(d=>Me(n,d))(l)||c==="loaded"&&s(l)?Promise.resolve():new Promise((d=>{o.push({name:l,state:c,resolve:d})}));return{items:e,urls:t,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{jn.languageLoad!==!1&&(s(l)?a(l,c):i(l,"loaded").then((()=>a(l,c))))},add:(l,c)=>(e.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete t[l],delete n[l]},createUrl:(l,c)=>we(c)?we(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(t[l])return Promise.resolve();let d=we(c)?c:c.prefix+c.resource+c.suffix;d.indexOf("/")!==0&&d.indexOf("://")===-1&&(d=jn.baseURL+"/"+d),t[l]=d.substring(0,d.lastIndexOf("/"));const m=()=>(r(l,"loaded"),Promise.resolve());return n[l]?m():Tr.ScriptLoader.add(d).then(m)},waitFor:i}};jn.languageLoad=!0,jn.baseURL="",jn.PluginManager=jn(),jn.ThemeManager=jn(),jn.ModelManager=jn();const Sl=ie("mce-annotation"),ga=ie("data-mce-annotation"),li=ie("data-mce-annotation-uid"),El=ie("data-mce-annotation-active"),kl=ie("data-mce-annotation-classes"),_l=ie("data-mce-annotation-attrs"),M0=e=>t=>pe(t,e),I0=(e,t)=>{const n=e.selection.getRng(),o=S.fromDom(n.startContainer),r=S.fromDom(e.getBody()),s=t.fold((()=>"."+Sl()),(i=>`[${ga()}="${i}"]`)),a=Vt(o,n.startOffset).getOr(o);return vs(a,s,M0(r)).bind((i=>at(i,`${li()}`).bind((l=>at(i,`${ga()}`).map((c=>{const d=j0(e,l);return{uid:l,name:c,elements:d}}))))))},F0=(e,t)=>pt(e,"data-mce-bogus")||((n,o,r)=>oi(n,'[data-mce-bogus="all"]',r).isSome())(e,0,M0(t)),j0=(e,t)=>{const n=S.fromDom(e.getBody()),o=Tn(n,`[${li()}="${t}"]`);return Pe(o,(r=>!F0(r,n)))},z0=(e,t)=>{const n=S.fromDom(e.getBody()),o=Tn(n,`[${ga()}="${t}"]`),r={};return K(o,(s=>{if(!F0(s,n)){const a=ft(s,li()),i=Ot(r,a).getOr([]);r[a]=i.concat([s])}})),r},U0=(e,t,n=_t)=>{const o=new ln(e,t),r=s=>{let a;do a=o[s]();while(a&&!re(a)&&!n(a));return _.from(a).filter(re)};return{current:()=>_.from(o.current()).filter(re),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},ha=(e,t)=>{const n=t||(r=>e.isBlock(r)||Ht(r)||Pt(r)),o=(r,s,a,i)=>{if(re(r)){const l=i(r,s,r.data);if(l!==-1)return _.some({container:r,offset:l})}return a().bind((l=>o(l.container,l.offset,a,i)))};return{backwards:(r,s,a,i)=>{const l=U0(r,i??e.getRoot(),n);return o(r,s,(()=>l.prev().map((c=>({container:c,offset:c.length})))),a).getOrNull()},forwards:(r,s,a,i)=>{const l=U0(r,i??e.getRoot(),n);return o(r,s,(()=>l.next().map((c=>({container:c,offset:0})))),a).getOrNull()}}},ci=e=>{let t;return n=>(t=t||kn(e,zt),Me(t,Le(n)))},xs=e=>nt(e)&&Le(e)==="br",H0=ci(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),zm=ci(["ul","ol","dl"]),di=ci(["li","dd","dt"]),_N=ci(["thead","tbody","tfoot"]),Nl=ci(["td","th"]),dd=ci(["pre","script","textarea","style"]),ui=()=>{const e=S.fromTag("br");return Te(e,"data-mce-bogus","1"),e},ws=e=>{en(e),X(e,ui())},yn=xr,ud=Kr,vo=e=>e.replace(/\uFEFF/g,""),NN=xe,mi=re,fi=e=>(mi(e)&&(e=e.parentNode),NN(e)&&e.hasAttribute("data-mce-caret")),Ss=e=>mi(e)&&ud(e.data),To=e=>fi(e)||Ss(e),$0=e=>e.firstChild!==e.lastChild||!Ht(e.firstChild),Um=e=>{const t=e.container();return!!re(t)&&(t.data.charAt(e.offset())===yn||e.isAtStart()&&Ss(t.previousSibling))},Hm=e=>{const t=e.container();return!!re(t)&&(t.data.charAt(e.offset()-1)===yn||e.isAtEnd()&&Ss(t.nextSibling))},md=e=>mi(e)&&e.data[0]===yn,fd=e=>mi(e)&&e.data[e.data.length-1]===yn,$m=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const o=t.getElementsByTagName("br"),r=o[o.length-1];ca(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,q0=e=>fi(e.startContainer),pi=Math.round,ba=e=>e?{left:pi(e.left),top:pi(e.top),bottom:pi(e.bottom),right:pi(e.right),width:pi(e.width),height:pi(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},W0=(e,t)=>(e=ba(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),V0=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Al=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&V0(t.top-e.bottom,e,t)},Tl=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&V0(t.bottom-e.top,e,t),K0=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left),r=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-r)*(n-r))},pd=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Es=(e,t)=>{if(xe(e)&&e.hasChildNodes()){const n=e.childNodes,o=((r,s,a)=>Math.min(Math.max(r,0),a))(t,0,n.length-1);return n[o]}return e},AN=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),X0=e=>we(e)&&e.charCodeAt(0)>=768&&AN.test(e),Y0=Xo,TN=Pt,DN=Ht,RN=re,ON=rr(["script","style","textarea"]),G0=rr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),BN=rr(["table"]),PN=To,lr=e=>!PN(e)&&(RN(e)?!ON(e.parentNode):G0(e)||DN(e)||BN(e)||qm(e)),qm=e=>!(t=>xe(t)&&t.getAttribute("unselectable")==="true")(e)&&TN(e),Q0=(e,t)=>lr(e)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(qm(r))return!1;if(Y0(r))return!0}return!0})(e,t),J0=xe,LN=lr,Z0=od("display","block table"),MN=od("float","left right"),Dl=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(J0,LN,$o(MN)),IN=$o(od("white-space","pre pre-line pre-wrap")),Rl=re,Wm=Ht,eb=St.nodeIndex,gd=(e,t)=>t<0&&xe(e)&&e.hasChildNodes()?void 0:Es(e,t),Vm=e=>e?e.createRange():St.DOM.createRng(),Km=e=>we(e)&&/[\r\n\t ]/.test(e),tb=e=>!!e.setStart&&!!e.setEnd,Xm=e=>{const t=e.startContainer,n=e.startOffset;if(Km(e.toString())&&IN(t.parentNode)&&re(t)){const o=t.data;if(Km(o[n-1])||Km(o[n+1]))return!0}return!1},nb=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,ks=e=>{var t;let n;const o=e.getClientRects();return n=o.length>0?ba(o[0]):ba(e.getBoundingClientRect()),!tb(e)&&Wm(e)&&nb(n)?(r=>{const s=r.ownerDocument,a=Vm(s),i=s.createTextNode(Ft),l=r.parentNode;l.insertBefore(i,r),a.setStart(i,0),a.setEnd(i,1);const c=ba(a.getBoundingClientRect());return l.removeChild(i),c})(e):nb(n)&&tb(e)&&(t=(r=>{const s=r.startContainer,a=r.endContainer,i=r.startOffset,l=r.endOffset;if(s===a&&re(a)&&i===0&&l===1){const c=r.cloneRange();return c.setEndAfter(a),ks(c)}return null})(e))!==null&&t!==void 0?t:n},va=(e,t)=>{const n=W0(e,t);return n.width=1,n.right=n.left+1,n},G=(e,t,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=d=>{var m,f;d.height!==0&&(s.length>0&&(m=d,f=s[s.length-1],m.left===f.left&&m.top===f.top&&m.bottom===f.bottom&&m.right===f.right)||s.push(d))},i=(d,m)=>{const f=Vm(d.ownerDocument);if(m<d.data.length){if(X0(d.data[m]))return;if(X0(d.data[m-1])&&(f.setStart(d,m),f.setEnd(d,m+1),!Xm(f)))return void a(va(ks(f),!1))}m>0&&(f.setStart(d,m-1),f.setEnd(d,m),Xm(f)||a(va(ks(f),!1))),m<d.data.length&&(f.setStart(d,m),f.setEnd(d,m+1),Xm(f)||a(va(ks(f),!0)))},l=r.container(),c=r.offset();if(Rl(l))return i(l,c),s;if(J0(l))if(r.isAtEnd()){const d=gd(l,c);Rl(d)&&i(d,d.data.length),Dl(d)&&!Wm(d)&&a(va(ks(d),!1))}else{const d=gd(l,c);if(Rl(d)&&i(d,0),Dl(d)&&r.isAtEnd())return a(va(ks(d),!1)),s;const m=gd(r.container(),r.offset()-1);Dl(m)&&!Wm(m)&&(Z0(m)||Z0(d)||!Dl(d))&&a(va(ks(m),!1)),Dl(d)&&a(va(ks(d),!0))}return s})(G(e,t))),n);return{container:ie(e),offset:ie(t),toRange:()=>{const r=Vm(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(Rl(e),t===0),isAtEnd:()=>Rl(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>gd(e,r?t-1:t)}};G.fromRangeStart=e=>G(e.startContainer,e.startOffset),G.fromRangeEnd=e=>G(e.endContainer,e.endOffset),G.after=e=>G(e.parentNode,eb(e)+1),G.before=e=>G(e.parentNode,eb(e)),G.isAbove=(e,t)=>Wt(sn(t.getClientRects()),oo(e.getClientRects()),Al).getOr(!1),G.isBelow=(e,t)=>Wt(oo(t.getClientRects()),sn(e.getClientRects()),Tl).getOr(!1),G.isAtStart=e=>!!e&&e.isAtStart(),G.isAtEnd=e=>!!e&&e.isAtEnd(),G.isTextPosition=e=>!!e&&re(e.container()),G.isElementPosition=e=>!G.isTextPosition(e);const hd=(e,t)=>{re(t)&&t.data.length===0&&e.remove(t)},Ym=(e,t,n)=>{hm(n)?((o,r,s)=>{const a=_.from(s.firstChild),i=_.from(s.lastChild);r.insertNode(s),a.each((l=>hd(o,l.previousSibling))),i.each((l=>hd(o,l.nextSibling)))})(e,t,n):((o,r,s)=>{r.insertNode(s),hd(o,s.previousSibling),hd(o,s.nextSibling)})(e,t,n)},cr=re,ob=ca,rb=St.nodeIndex,sb=e=>{const t=e.parentNode;return ob(t)?sb(t):t},Gm=e=>e?Yn(e.childNodes,((t,n)=>(ob(n)&&n.nodeName!=="BR"?t=t.concat(Gm(n)):t.push(n),t)),[]):[],ab=e=>t=>e===t,ib=e=>(cr(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,o;n=Gm(sb(t)),o=tl(n,ab(t),t),n=n.slice(0,o+1);const r=Yn(n,((s,a,i)=>(cr(a)&&cr(n[i-1])&&s++,s)),0);return n=fs(n,rr([t.nodeName])),o=tl(n,ab(t),t),o-r})(e)+"]",lb=(e,t)=>{let n,o=[],r=t.container(),s=t.offset();if(cr(r))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&cr(c);)l+=c.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(ib(r));let a=((i,l)=>{const c=[];for(let d=l.parentNode;d&&d!==i;d=d.parentNode)c.push(d);return c})(e,r);return a=fs(a,$o(ca)),o=o.concat(ms(a,(i=>ib(i)))),o.reverse().join("/")+","+n},cb=(e,t)=>{if(!t)return null;const n=t.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=Yn(o,((a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?(l[1]==="text()"&&(l[1]="#text"),((c,d,m)=>{let f=Gm(c);return f=fs(f,((g,h)=>!cr(g)||!cr(f[h-1]))),f=fs(f,rr([d])),f[m]})(a,l[1],parseInt(l[2],10))):null}),e);if(!s)return null;if(!cr(s)&&s.parentNode){let a;return a=r==="after"?rb(s)+1:rb(s),G(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;cr(l);){const d=l.data.length;if(i>=c&&i<=c+d){a=l,i-=c;break}if(!cr(l.nextSibling)){a=l,i=d;break}c+=d,l=l.nextSibling}return cr(a)&&i>a.data.length&&(i=a.data.length),G(a,i)})(s,parseInt(r,10))},bd=Pt,db=(e,t,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=e.getRoot();if(re(s))i.push(n?((c,d,m)=>{let f=c(d.data.slice(0,m)).length;for(let g=d.previousSibling;g&&re(g);g=g.previousSibling)f+=c(g.data).length;return f})(t,s,a):a);else{let c=0;const d=s.childNodes;a>=d.length&&d.length&&(c=1,a=Math.max(0,d.length-1)),i.push(e.nodeIndex(d[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(e.nodeIndex(c,n));return i},Qm=(e,t,n)=>{let o=0;return k.each(e.select(t),(r=>r.getAttribute("data-mce-bogus")==="all"?void 0:r!==n&&void o++)),o},ub=(e,t)=>{let n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;if(xe(n)&&n.nodeName==="TR"){const r=n.childNodes;n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))}},mb=e=>(ub(e,!0),ub(e,!1),e),fb=(e,t)=>{if(xe(e)&&(e=Es(e,t),bd(e)))return e;if(To(e)){re(e)&&fi(e)&&(e=e.parentNode);let n=e.previousSibling;if(bd(n)||(n=e.nextSibling,bd(n)))return n}},pb=(e,t,n)=>{const o=n.getNode(),r=n.getRng();if(o.nodeName==="IMG"||bd(o)){const a=o.nodeName;return{name:a,index:Qm(n.dom,a,o)}}const s=(a=>fb(a.startContainer,a.startOffset)||fb(a.endContainer,a.endOffset))(r);if(s){const a=s.tagName;return{name:a,index:Qm(n.dom,a,s)}}return((a,i,l,c)=>{const d=i.dom,m=db(d,a,l,c,!0),f=i.isForward(),g=q0(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:m,forward:f,...g}:{start:m,end:db(d,a,l,c,!1),forward:f,...g}})(e,n,t,r)},gb=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},hb=(e,t)=>{const n=e.dom;let o=e.getRng();const r=n.uniqueId(),s=e.isCollapsed(),a=e.getNode(),i=a.nodeName,l=e.isForward();if(i==="IMG")return{name:i,index:Qm(n,i,a)};const c=mb(o.cloneRange());if(!s){c.collapse(!1);const m=gb(n,r+"_end",t);Ym(n,c,m)}o=mb(o),o.collapse(!0);const d=gb(n,r+"_start",t);return Ym(n,o,d),e.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},Jm=Ce(pb,bt,!0),FN=e=>e.type==="inline-command"||e.type==="inline-format",jN=e=>e.type==="block-command"||e.type==="block-format",zN=e=>{var t;const n=r=>gn.error({message:r,pattern:e}),o=(r,s,a)=>{if(e.format!==void 0){let i;if(se(e.format)){if(!no(e.format,we))return n(r+" pattern has non-string items in the `format` array");i=e.format}else{if(!we(e.format))return n(r+" pattern has non-string `format` parameter");i=[e.format]}return gn.value(s(i))}return e.cmd!==void 0?we(e.cmd)?gn.value(a(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Ue(e))return n("Raw pattern is not an object");if(!we(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!we(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,s=e.end;return s.length===0&&(s=r,r=""),o("Inline",(a=>({type:"inline-format",start:r,end:s,format:a})),((a,i)=>({type:"inline-command",start:r,end:s,cmd:a,value:i})))}if(e.replacement!==void 0)return we(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):gn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const r=(t=e.trigger)!==null&&t!==void 0?t:"space";return e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",(s=>({type:"block-format",start:e.start,format:s[0],trigger:r})),((s,a)=>({type:"block-command",start:e.start,cmd:s,value:a,trigger:r})))}},bb=e=>Pe(e,jN),vb=e=>Pe(e,FN),Zm=(e,t)=>({...e,blockPatterns:Pe(e.blockPatterns,(n=>((o,r)=>(o.type==="block-command"||o.type==="block-format")&&o.trigger===r)(n,t)))}),yb=e=>{const t=Wa(qe(e,zN));return K(t.errors,(n=>console.error(n.message,n.pattern))),t.values},Cb=(e,t,n)=>{e.dispatch(t,n)},xb=(e,t,n,o)=>{e.dispatch("FormatApply",{format:t,node:n,vars:o})},wb=(e,t,n,o)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:o})},Sb=(e,t)=>e.dispatch("SetContent",t),Eb=(e,t)=>e.dispatch("GetContent",t),ef=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},kb=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),tf=No().deviceType,UN=tf.isTouch(),HN=St.DOM,_b=e=>xo(e,RegExp),ge=e=>t=>t.options.get(e),vd=e=>we(e)||Ue(e),Nb=(e,t="")=>n=>{const o=we(n);if(o){if(n.indexOf("=")!==-1){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Qt(a,((i,l)=>{const c=l.split("="),d=c[0],m=c.length>1?c[1]:d;return i[Cr(d)]=Cr(m),i}),{})})(n);return{value:Ot(r,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},$N=ge("iframe_attrs"),qN=ge("doctype"),Ab=ge("document_base_url"),WN=ge("body_id"),VN=ge("body_class"),Tb=ge("content_security_policy"),KN=ge("br_in_pre"),Sn=ge("forced_root_block"),gi=ge("forced_root_block_attrs"),XN=ge("newline_behavior"),YN=ge("br_newline_selector"),GN=ge("no_newline_selector"),QN=ge("keep_styles"),JN=ge("end_container_on_empty_block"),Db=ge("automatic_uploads"),Rb=ge("images_reuse_filename"),ZN=ge("images_replace_blob_uris"),Ob=ge("icons"),eA=ge("icons_url"),tA=ge("images_upload_url"),nA=ge("images_upload_base_path"),oA=ge("images_upload_credentials"),rA=ge("images_upload_handler"),sA=ge("content_css_cors"),nf=ge("referrer_policy"),of=ge("crossorigin"),Bb=ge("language"),aA=ge("language_url"),Pb=ge("indent_use_margin"),iA=ge("indentation"),lA=ge("content_css"),cA=ge("content_style"),Lb=ge("font_css"),dA=ge("directionality"),uA=ge("inline_boundaries_selector"),Mb=ge("object_resizing"),mA=ge("resize_img_proportional"),fA=ge("placeholder"),Ib=ge("event_root"),pA=ge("service_message"),hi=ge("theme"),gA=ge("theme_url"),rf=ge("model"),hA=ge("model_url"),Ol=ge("inline_boundaries"),bA=ge("formats"),vA=ge("preview_styles"),yA=ge("format_empty_lines"),CA=ge("format_noneditable_selector"),xA=ge("custom_ui_selector"),sf=ge("inline"),wA=ge("hidden_input"),SA=ge("submit_patch"),EA=ge("add_form_submit_trigger"),kA=ge("add_unload_trigger"),_A=ge("custom_undo_redo_levels"),NA=ge("disable_nodechange"),Fb=ge("readonly"),AA=ge("editable_root"),jb=ge("content_css_cors"),Bl=ge("plugins"),TA=ge("external_plugins"),DA=ge("block_unsupported_drop"),RA=ge("visual"),OA=ge("visual_table_class"),zb=ge("visual_anchor_class"),Ub=ge("iframe_aria_text"),BA=ge("setup"),PA=ge("init_instance_callback"),LA=ge("urlconverter_callback"),MA=ge("auto_focus"),IA=ge("browser_spellcheck"),FA=ge("protect"),jA=ge("paste_block_drop"),yd=ge("paste_data_images"),zA=ge("paste_preprocess"),UA=ge("paste_postprocess"),HA=ge("newdocument_content"),$A=ge("paste_webkit_styles"),qA=ge("paste_remove_styles_if_webkit"),WA=ge("paste_merge_formats"),VA=ge("smart_paste"),KA=ge("paste_as_text"),XA=ge("paste_tab_spaces"),YA=ge("allow_html_data_urls"),GA=ge("text_patterns"),QA=ge("text_patterns_lookup"),Hb=ge("noneditable_class"),JA=ge("editable_class"),ZA=ge("noneditable_regexp"),eT=ge("preserve_cdata"),tT=ge("highlight_on_focus"),$b=ge("xss_sanitization"),nT=ge("init_content_sync"),qb=e=>k.explode(e.options.get("images_file_types")),oT=ge("table_tab_navigation"),rT=ge("details_initial_state"),sT=ge("details_serialized_state"),Wb=ge("sandbox_iframes"),af=e=>e.options.get("sandbox_iframes_exclusions"),aT=ge("convert_unsafe_embeds"),iT=ge("license_key"),lT=ge("api_key"),Cd=ge("disabled"),cT=ge("user_id"),dT=ge("fetch_users"),uT=ge("lists_indent_on_tab"),Vb=e=>_.from(e.options.get("list_max_depth")),mT=xe,Kb=re,Xb=e=>{const t=e.parentNode;t&&t.removeChild(e)},Yb=e=>{const t=vo(e);return{count:e.length-t.length,text:t}},Gb=e=>{let t;for(;(t=e.data.lastIndexOf(yn))!==-1;)e.deleteData(t,1)},Qb=(e,t)=>(ya(e),t),fT=(e,t)=>G.isTextPosition(t)?((n,o)=>Kb(n)&&o.container()===n?((r,s)=>{const a=Yb(r.data.substr(0,s.offset())),i=Yb(r.data.substr(s.offset()));return(a.text+i.text).length>0?(Gb(r),G(r,s.offset()-a.count)):s})(n,o):Qb(n,o))(e,t):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,c)=>{const d=dt(l,c);return d===-1?_.none():_.some(d)})(xn(a.childNodes),r).map((l=>l<s.offset()?G(a,s.offset()-1):s)).getOr(s);return ya(r),i})(n,o):Qb(n,o))(e,t),ya=e=>{mT(e)&&To(e)&&($0(e)?e.removeAttribute("data-mce-caret"):Xb(e)),Kb(e)&&(Gb(e),e.data.length===0&&Xb(e))},pT=Pt,gT=sr,hT=rd,Jb=(e,t,n)=>{const o=W0(t.getBoundingClientRect(),n);let r,s;if(e.tagName==="BODY"){const i=e.ownerDocument.documentElement;r=e.scrollLeft||i.scrollLeft,s=e.scrollTop||i.scrollTop}else{const i=e.getBoundingClientRect();r=e.scrollLeft-i.left,s=e.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},bT=(e,t,n,o)=>{const r=qo();let s,a;const i=Sn(e),l=e.dom,c=()=>{(d=>{var m,f;const g=Tn(S.fromDom(d),"*[contentEditable=false],video,audio,embed,object");for(let h=0;h<g.length;h++){const b=g[h].dom;let v=b.previousSibling;if(fd(v)){const y=v.data;y.length===1?(m=v.parentNode)===null||m===void 0||m.removeChild(v):v.deleteData(y.length-1,1)}v=b.nextSibling,md(v)&&(v.data.length===1?(f=v.parentNode)===null||f===void 0||f.removeChild(v):v.deleteData(0,1))}})(t),a&&(ya(a),a=null),r.on((d=>{l.remove(d.caret),r.clear()})),s&&(clearInterval(s),s=void 0)};return{isShowing:r.isSet,show:(d,m)=>{let f;if(c(),hT(m))return null;if(!n(m))return a=((g,h)=>{var b;const v=((b=g.ownerDocument)!==null&&b!==void 0?b:document).createTextNode(yn),y=g.parentNode;if(h){const E=g.previousSibling;if(mi(E)){if(To(E))return E;if(fd(E))return E.splitText(E.data.length-1)}y?.insertBefore(v,g)}else{const E=g.nextSibling;if(mi(E)){if(To(E))return E;if(md(E))return E.splitText(1),E}g.nextSibling?y?.insertBefore(v,g.nextSibling):y?.appendChild(v)}return v})(m,d),f=m.ownerDocument.createRange(),Pl(a.nextSibling)?(f.setStart(a,0),f.setEnd(a,0)):(f.setStart(a,1),f.setEnd(a,1)),f;{const g=((v,y,E)=>{var N;const D=((N=y.ownerDocument)!==null&&N!==void 0?N:document).createElement(v);D.setAttribute("data-mce-caret",E?"before":"after"),D.setAttribute("data-mce-bogus","all"),D.appendChild(ui().dom);const A=y.parentNode;return E?A?.insertBefore(D,y):y.nextSibling?A?.insertBefore(D,y.nextSibling):A?.appendChild(D),D})(i,m,d),h=Jb(t,m,d);l.setStyle(g,"top",h.top),l.setStyle(g,"caret-color","transparent"),a=g;const b=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(b,{...h}),l.add(t,b),r.set({caret:b,element:m,before:d}),d&&l.addClass(b,"mce-visual-caret-before"),s=window.setInterval((()=>{r.on((v=>{o()?l.toggleClass(v.caret,"mce-visual-caret-hidden"):l.addClass(v.caret,"mce-visual-caret-hidden")}))}),500),f=m.ownerDocument.createRange(),f.setStart(g,0),f.setEnd(g,0)}return f},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on((d=>{const m=Jb(t,d.element,d.before);l.setStyles(d.caret,{...m})}))},destroy:()=>clearInterval(s)}},Zb=()=>p.browser.isFirefox(),Pl=e=>pT(e)||gT(e),Ll=e=>(Pl(e)||Ar(e)&&Zb())&&Nn(S.fromDom(e)).exists(Gr),vT=Xo,lf=Pt,yT=sr,ev=od("display","block table table-cell table-row table-caption list-item"),tv=To,nv=fi,CT=xe,xT=re,wT=lr,bi=e=>e===1,Ca=e=>e===-1,xd=(e,t)=>{let n;for(;n=e(t);)if(!nv(n))return n;return null},Ml=(e,t,n,o,r)=>{const s=new ln(e,o),a=lf(e)||nv(e);let i;if(Ca(t)){if(a&&(i=xd(s.prev.bind(s),!0),n(i)))return i;for(;i=xd(s.prev.bind(s),r);)if(n(i))return i}if(bi(t)){if(a&&(i=xd(s.next.bind(s),!0),n(i)))return i;for(;i=xd(s.next.bind(s),r);)if(n(i))return i}return null},_s=(e,t)=>{for(;e&&e!==t;){if(ev(e))return e;e=e.parentNode}return null},Dr=(e,t,n)=>_s(e.container(),n)===_s(t.container(),n),cf=(e,t)=>{if(!t)return _.none();const n=t.container(),o=t.offset();return CT(n)?_.from(n.childNodes[o+e]):_.none()},ov=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},ST=(e,t,n)=>_s(t,e)===_s(n,e),rv=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let r=n;for(;r&&r!==t;){let s=r[o];if(s&&tv(s)&&(s=s[o]),lf(s)||yT(s)){if(ST(t,s,r))return s;break}if(wT(s))break;r=r.parentNode}return null},Il=Ce(ov,!0),Fl=Ce(ov,!1),df=(e,t,n)=>{let o;const r=Ce(rv,!0,t),s=Ce(rv,!1,t),a=n.startContainer,i=n.startOffset;if(fi(a)){const l=xT(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if(c==="before"&&(o=l.nextSibling,Ll(o)))return Il(o);if(c==="after"&&(o=l.previousSibling,Ll(o)))return Fl(o)}if(!n.collapsed)return n;if(re(a)){if(tv(a)){if(e===1){if(o=s(a),o)return Il(o);if(o=r(a),o)return Fl(o)}if(e===-1){if(o=r(a),o)return Fl(o);if(o=s(a),o)return Il(o)}return n}if(fd(a)&&i>=a.data.length-1)return e===1&&(o=s(a),o)?Il(o):n;if(md(a)&&i<=1)return e===-1&&(o=r(a),o)?Fl(o):n;if(i===a.data.length)return o=s(a),o?Il(o):n;if(i===0)return o=r(a),o?Fl(o):n}return n},sv=(e,t)=>cf(e?0:-1,t).filter(lf),jl=(e,t,n)=>{const o=df(e,t,n);return e===-1?G.fromRangeStart(o):G.fromRangeEnd(o)},wd=e=>_.from(e.getNode()).map(S.fromDom),uf=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Sd=(e,t)=>{const n=Dr(e,t);return!(n||!Ht(e.getNode()))||n},ET=Pt,Rr=re,av=xe,mf=Ht,vi=lr,iv=e=>G0(e)||(t=>!!qm(t)&&!Qt(xn(t.getElementsByTagName("*")),((n,o)=>n||Y0(o)),!1))(e),Ed=Q0,lv=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,cv=(e,t)=>{if(bi(e)){if(vi(t.previousSibling)&&!Rr(t.previousSibling))return G.before(t);if(Rr(t))return G(t,0)}if(Ca(e)){if(vi(t.nextSibling)&&!Rr(t.nextSibling))return G.after(t);if(Rr(t))return G(t,t.data.length)}return Ca(e)?mf(t)?G.before(t):G.after(t):G.before(t)},ff=(e,t,n)=>{let o,r,s,a;if(!av(n)||!t)return null;if(t.isEqual(G.after(n))&&n.lastChild){if(a=G.after(n.lastChild),Ca(e)&&vi(n.lastChild)&&av(n.lastChild))return mf(n.lastChild)?G.before(n.lastChild):a}else a=t;const i=a.container();let l=a.offset();if(Rr(i)){if(Ca(e)&&l>0)return G(i,--l);if(bi(e)&&l<i.length)return G(i,++l);o=i}else{if(Ca(e)&&l>0&&(r=lv(i,l-1),vi(r)))return!iv(r)&&(s=Ml(r,e,Ed,r),s)?Rr(s)?G(s,s.data.length):G.after(s):Rr(r)?G(r,r.data.length):G.before(r);if(bi(e)&&l<i.childNodes.length&&(r=lv(i,l),vi(r)))return mf(r)?((d,m)=>{const f=m.nextSibling;return f&&vi(f)?Rr(f)?G(f,0):G.before(f):ff(1,G.after(m),d)})(n,r):!iv(r)&&(s=Ml(r,e,Ed,r),s)?Rr(s)?G(s,0):G.before(s):Rr(r)?G(r,0):G.after(r);o=r||a.getNode()}if(o&&(bi(e)&&a.isAtEnd()||Ca(e)&&a.isAtStart())&&(o=Ml(o,e,zt,n,!0),Ed(o,n)))return cv(e,o);r=o&&Ml(o,e,Ed,n);const c=ko(Pe(((d,m)=>{const f=[];let g=d;for(;g&&g!==m;)f.push(g),g=g.parentNode;return f})(i,n),ET));return!c||r&&c.contains(r)?r?cv(e,r):null:(a=bi(e)?G.after(c):G.before(c),a)},Or=e=>({next:t=>ff(1,t,e),prev:t=>ff(-1,t,e)}),dv=e=>G.isTextPosition(e)?e.offset()===0:lr(e.getNode()),uv=e=>{if(G.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return lr(e.getNode(!0))},mv=(e,t)=>!G.isTextPosition(e)&&!G.isTextPosition(t)&&e.getNode()===t.getNode(!0),Do=(e,t,n)=>{const o=Or(t);return _.from(e?o.next(n):o.prev(n))},yi=(e,t,n)=>Do(e,t,n).bind((o=>Dr(n,o,t)&&((r,s,a)=>{return r?!mv(s,a)&&(i=s,!(!G.isTextPosition(i)&&Ht(i.getNode())))&&uv(s)&&dv(a):!mv(a,s)&&dv(s)&&uv(a);var i})(e,n,o)?Do(e,t,o):_.some(o))),fv=(e,t,n,o)=>yi(e,t,n).bind((r=>o(r)?fv(e,t,r,o):_.some(r))),Ci=(e,t)=>{const n=e?t.firstChild:t.lastChild;return re(n)?_.some(G(n,e?0:n.data.length)):n?lr(n)?_.some(e?G.before(n):Ht(o=n)?G.before(o):G.after(o)):((r,s,a)=>{const i=r?G.before(a):G.after(a);return Do(r,s,i)})(e,t,n):_.none();var o},Zn=Ce(Do,!0),io=Ce(Do,!1),zn=Ce(Ci,!0),Yo=Ce(Ci,!1),pf="_mce_caret",Ro=e=>xe(e)&&e.id===pf,xa=(e,t)=>{let n=t;for(;n&&n!==e;){if(Ro(n))return n;n=n.parentNode}return null},pv=e=>Me(e,"name"),gv=e=>k.isArray(e.start),kd=e=>!(!pv(e)&&Cn(e.forward))||e.forward,hv=(e,t)=>(xe(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),kT=(e,t)=>Yo(e).fold(_t,(n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0))),bv=(e,t,n)=>!(!(o=>!o.hasChildNodes())(t)||!xa(e,t)||(((o,r)=>{var s;const a=((s=o.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(yn);o.appendChild(a),r.setStart(a,0),r.setEnd(a,0)})(t,n),0)),vv=(e,t,n,o)=>{const r=n[t?"start":"end"],s=e.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const c=a.childNodes;if(bv(s,a,o))return!0;if(r[l]>c.length-1)return!!bv(s,a,o)||kT(a,o);a=c[r[l]]}re(a)&&(i=Math.min(r[0],a.data.length)),xe(a)&&(i=Math.min(r[0],a.childNodes.length)),t?o.setStart(a,i):o.setEnd(a,i)}return!0},gf=e=>re(e)&&e.data.length>0,yv=(e,t,n)=>{const o=e.get(n.id+"_"+t),r=o?.parentNode,s=n.keep;if(o&&r){let a,i;if(t==="start"?s?o.hasChildNodes()?(a=o.firstChild,i=1):gf(o.nextSibling)?(a=o.nextSibling,i=0):gf(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)+1):(a=r,i=e.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):gf(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)):(a=r,i=e.nodeIndex(o)),!s){const l=o.previousSibling,c=o.nextSibling;let d;for(k.each(k.grep(o.childNodes),(m=>{re(m)&&(m.data=m.data.replace(/\uFEFF/g,""))}));d=e.get(n.id+"_"+t);)e.remove(d,!0);if(re(c)&&re(l)&&!p.browser.isOpera()){const m=l.data.length;l.appendData(c.data),e.remove(c),a=l,i=m}}return _.some(G(a,i))}return _.none()},_T=(e,t,n)=>((o,r,s=!1)=>r===2?pb(vo,s,o):r===3?(a=>{const i=a.getRng();return{start:lb(a.dom.getRoot(),G.fromRangeStart(i)),end:lb(a.dom.getRoot(),G.fromRangeEnd(i)),forward:a.isForward()}})(o):r?(a=>({rng:a.getRng(),forward:a.isForward()}))(o):hb(o,!1))(e,t,n),NT=(e,t)=>{((n,o)=>{const r=n.dom;if(o){if(gv(o))return((s,a)=>{const i=s.createRng();return vv(s,!0,a,i)&&vv(s,!1,a,i)?_.some({range:i,forward:kd(a)}):_.none()})(r,o);if((s=>we(s.start))(o))return((s,a)=>{const i=_.from(cb(s.getRoot(),a.start)),l=_.from(cb(s.getRoot(),a.end));return Wt(i,l,((c,d)=>{const m=s.createRng();return m.setStart(c.container(),c.offset()),m.setEnd(d.container(),d.offset()),{range:m,forward:kd(a)}}))})(r,o);if((s=>Me(s,"id"))(o))return((s,a)=>{const i=yv(s,"start",a),l=yv(s,"end",a);return Wt(i,l.or(i),((c,d)=>{const m=s.createRng();return m.setStart(hv(s,c.container()),c.offset()),m.setEnd(hv(s,d.container()),d.offset()),{range:m,forward:kd(a)}}))})(r,o);if(pv(o))return((s,a)=>_.from(s.select(a.name)[a.index]).map((i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}})))(r,o);if((s=>Me(s,"rng"))(o))return _.some({range:o.rng,forward:kd(o)})}return _.none()})(e,t).each((({range:n,forward:o})=>{e.setRng(n,o)}))},Oo=e=>xe(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",_d=(Cv=Ft,e=>Cv===e);var Cv;const wa=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,hf=e=>!wa(e)&&!_d(e)&&!Kr(e),bf=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},xv=(e,t)=>{const n=Tn(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:(o=>Pe((r=>qt(r,(s=>{const a=pd(s);return a?[S.fromDom(a)]:[]})))(o),Nl))(e)},xi=e=>xv(bf(e.selection.getSel()),S.fromDom(e.getBody())),zl=(e,t)=>oi(e,"table",t),wv=e=>Bt(e).fold(ie([e]),(t=>[e].concat(wv(t)))),vf=e=>Wn(e).fold(ie([e]),(t=>Le(t)==="br"?Xt(t).map((n=>[e].concat(vf(n)))).getOr([]):[e].concat(vf(t)))),yf=(e,t)=>Wt((n=>{const o=n.startContainer,r=n.startOffset;return re(o)?r===0?_.some(S.fromDom(o)):_.none():_.from(o.childNodes[r]).map(S.fromDom)})(t),(n=>{const o=n.endContainer,r=n.endOffset;return re(o)?r===o.data.length?_.some(S.fromDom(o)):_.none():_.from(o.childNodes[r-1]).map(S.fromDom)})(t),((n,o)=>{const r=$t(wv(e),Ce(pe,n)),s=$t(vf(e),Ce(pe,o));return r.isSome()&&s.isSome()})).getOr(!1),Cf=(e,t,n,o)=>{const r=n,s=new ln(n,r),a=er(e.schema.getMoveCaretBeforeOnEnterElements(),((l,c)=>!Se(["td","th","table"],c.toLowerCase())));let i=n;do{if(re(i)&&k.trim(i.data).length!==0)return void(o?t.setStart(i,0):t.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?t.setStartBefore(i):i.nodeName==="BR"?t.setEndBefore(i):t.setEndAfter(i))}while(i=o?s.next():s.prev());r.nodeName==="BODY"&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},Nd=e=>{const t=e.selection.getSel();return te(t)&&t.rangeCount>0},xf=(e,t)=>{const n=xi(e);n.length>0?K(n,(o=>{const r=o.dom,s=e.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),t(s,!0)})):t(e.selection.getRng(),!1)},Sv=(e,t,n)=>{const o=hb(e,t);n(o),e.moveToBookmark(o)},wf=(e,t)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset==1&&t(e.startContainer.childNodes[e.startOffset]),Ul=e=>x(e?.nodeType),Sf=e=>xe(e)&&!Oo(e)&&!Ro(e)&&!ca(e),Ev=(e,t,n)=>{const{selection:o,dom:r}=e,s=o.getNode(),a=Pt(s);Sv(o,!0,(()=>{t()})),a&&Pt(s)&&r.isChildOf(s,e.getBody())?e.selection.select(s):n(o.getStart())&&AT(r,o)},AT=(e,t)=>{var n,o;const r=t.getRng(),{startContainer:s,startOffset:a}=r;if(!((i,l)=>{if(Sf(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),d=parseInt(c,10);return!isNaN(d)&&d>0}return!1})(e,t.getNode())&&xe(s)){const i=s.childNodes,l=e.getRoot();let c;if(a<i.length){const d=i[a];c=new ln(d,(n=e.getParent(d,e.isBlock))!==null&&n!==void 0?n:l)}else{const d=i[i.length-1];c=new ln(d,(o=e.getParent(d,e.isBlock))!==null&&o!==void 0?o:l),c.next(!0)}for(let d=c.current();d;d=c.next()){if(e.getContentEditable(d)==="false")return;if(re(d)&&!kf(d))return r.setStart(d,0),void t.setRng(r)}}},kv=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(xe(e)||!kf(e))return e}},Ef=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||ua(e,t),wi=(e,t,n)=>e.schema.isValidChild(t,n),kf=(e,t=!1)=>{if(te(e)&&re(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return ai(n)}return!1},_v=(e,t)=>{const n=e.dom;return Sf(t)&&n.getContentEditable(t)==="false"&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=CA(o),i=ds(a)?s:`${s},${a}`;return Z(S.fromDom(r),i)})(e,t)&&n.select('[contenteditable="true"]',t).length===0},Ns=(e,t)=>ht(e)?e(t):(te(t)&&(e=e.replace(/%(\w+)/g,((n,o)=>t[o]||n))),e),_f=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Nf=(e,t)=>{if(kt(e))return null;{let n=String(e);return t!=="color"&&t!=="backgroundColor"||(n=yl(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Ad=(e,t,n)=>{const o=e.getStyle(t,n);return Nf(o,n)},Nv=(e,t)=>{let n;return e.getParent(t,(o=>!!xe(o)&&(n=e.getStyle(o,"text-decoration"),!!n&&n!=="none"))),n},Td=(e,t,n)=>e.getParents(t,n,e.getRoot()),Af=(e,t,n)=>{const o=e.formatter.get(t);return te(o)&&yt(o,n)},Br=e=>pn(e,"block"),Bo=e=>pn(e,"selector"),un=e=>pn(e,"inline"),Tf=e=>Bo(e)&&e.expand!==!1&&!un(e),Av=e=>(t=>{const n=[];let o=t;for(;o;){if(re(o)&&o.data!==yn||o.childNodes.length>1)return[];xe(o)&&n.push(o),o=o.firstChild}return n})(e).length>0,Df=e=>Ro(e.dom)&&Av(e.dom),Si=Oo,Tv=Td,Dv=kf,TT=Ef,Rv=(e,t)=>{let n=t;for(;n;){if(xe(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},Ov=(e,t,n,o)=>{const r=t.data;if(e){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},DT=(e,t,n)=>Ov(e,t,n,(o=>_d(o)||wa(o))),RT=(e,t,n)=>Ov(e,t,n,hf),Bv=(e,t,n,o,r,s)=>{let a;const i=e.getParent(n,(d=>bm(d)||e.isBlock(d))),l=te(i)?i:t,c=(d,m,f)=>{const g=ha(e),h=r?g.backwards:g.forwards;return _.from(h(d,m,((b,v)=>Si(b.parentNode)?-1:(a=b,f(r,b,v))),l))};return c(n,o,DT).bind((d=>s?c(d.container,d.offset+(r?-1:0),RT):_.some(d))).orThunk((()=>a?_.some({container:a,offset:r?0:a.length}):_.none()))},Pv=(e,t,n,o,r)=>{const s=o[r];re(o)&&ds(o.data)&&s&&(o=s);const a=Tv(e,o);for(let i=0;i<a.length;i++)for(let l=0;l<t.length;l++){const c=t[l];if((!te(c.collapsed)||c.collapsed===n.collapsed)&&Bo(c)&&e.is(a[i],c.selector))return a[i]}return o},Lv=(e,t,n,o)=>{var r;let s=n;const a=e.getRoot(),i=t[0];if(Br(i)&&(s=i.wrapper?null:e.getParent(n,i.block,a)),!s){const l=(r=e.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&r!==void 0?r:a;s=e.getParent(re(n)?n.parentNode:n,(c=>c!==a&&TT(e.schema,c)),l)}if(s&&Br(i)&&i.wrapper&&(s=Tv(e,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!e.isBlock(s[o])&&(s=s[o],!_f(s,"br")););return s||n},Mv=(e,t,n,o)=>{const r=n.parentNode;return!te(n[o])&&(!(r!==t&&!kt(r)&&!e.isBlock(r))||Mv(e,t,r,o))},Dd=(e,t,n,o,r,s)=>{let a=n;const i=r?"previousSibling":"nextSibling",l=e.getRoot();if(re(n)&&!Dv(n)&&(r?o>0:o<n.data.length))return n;for(;a;){if(bm(a))return n;if(!t[0].block_expand&&e.isBlock(a))return s?a:n;for(let d=a[i];d;d=d[i]){const m=re(d)&&!Mv(e,l,d,i);if(!Si(d)&&(!Ht(c=d)||!c.getAttribute("data-mce-bogus")||c.nextSibling)&&!Dv(d,m))return a}if(a===l||a.parentNode===l){n=a;break}a=a.parentNode}var c;return n},Iv=e=>Si(e.parentNode)||Si(e),Sa=(e,t,n,o={})=>{const{includeTrailingSpace:r=!1,expandToBlock:s=!0}=o,a=e.getParent(t.commonAncestorContainer,(g=>bm(g))),i=te(a)?a:e.getRoot();let{startContainer:l,startOffset:c,endContainer:d,endOffset:m}=t;const f=n[0];return xe(l)&&l.hasChildNodes()&&(l=Es(l,c),re(l)&&(c=0)),xe(d)&&d.hasChildNodes()&&(d=Es(d,t.collapsed?m:m-1),re(d)&&(m=d.data.length)),l=Rv(e,l),d=Rv(e,d),Iv(l)&&(l=Si(l)?l:l.parentNode,l=t.collapsed?l.previousSibling||l:l.nextSibling||l,re(l)&&(c=t.collapsed?l.length:0)),Iv(d)&&(d=Si(d)?d:d.parentNode,d=t.collapsed?d.nextSibling||d:d.previousSibling||d,re(d)&&(m=t.collapsed?0:d.length)),t.collapsed&&(Bv(e,i,l,c,!0,r).each((({container:g,offset:h})=>{l=g,c=h})),Bv(e,i,d,m,!1,r).each((({container:g,offset:h})=>{d=g,m=h}))),(un(f)||f.block_expand)&&(un(f)&&re(l)&&c!==0||(l=Dd(e,n,l,c,!0,s)),un(f)&&re(d)&&m!==d.data.length||(d=Dd(e,n,d,m,!1,s))),Tf(f)&&(l=Pv(e,n,t,l,"previousSibling"),d=Pv(e,n,t,d,"nextSibling")),(Br(f)||Bo(f))&&(l=Lv(e,n,l,"previousSibling"),d=Lv(e,n,d,"nextSibling"),Br(f)&&(e.isBlock(l)||(l=Dd(e,n,l,c,!0,s),re(l)&&(c=0)),e.isBlock(d)||(d=Dd(e,n,d,m,!1,s),re(d)&&(m=d.data.length)))),xe(l)&&l.parentNode&&(c=e.nodeIndex(l),l=l.parentNode),xe(d)&&d.parentNode&&(m=e.nodeIndex(d)+1,d=d.parentNode),{startContainer:l,startOffset:c,endContainer:d,endOffset:m}},Hl=(e,t,n)=>{var o;const r=t.startOffset,s=Es(t.startContainer,r),a=t.endOffset,i=Es(t.endContainer,a-1),l=v=>{const y=v[0];re(y)&&y===s&&r>=y.data.length&&v.splice(0,1);const E=v[v.length-1];return a===0&&v.length>0&&E===i&&re(E)&&v.splice(v.length-1,1),v},c=(v,y,E)=>{const N=[];for(;v&&v!==E;v=v[y])N.push(v);return N},d=(v,y)=>e.getParent(v,(E=>E.parentNode===y),y),m=(v,y,E)=>{const N=E?"nextSibling":"previousSibling";for(let D=v,A=D.parentNode;D&&D!==y;D=A){A=D.parentNode;const R=c(D===v?D:D[N],N);R.length&&(E||R.reverse(),n(l(R)))}};if(s===i)return n(l([s]));const f=(o=e.findCommonAncestor(s,i))!==null&&o!==void 0?o:e.getRoot();if(e.isChildOf(s,i))return m(s,f,!0);if(e.isChildOf(i,s))return m(i,f);const g=d(s,f)||s,h=d(i,f)||i;m(s,g,!0);const b=c(g===s?g:g.nextSibling,"nextSibling",h===i?h.nextSibling:h);b.length&&n(l(b)),m(i,h)},OT=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],Fv=(e,t,n,o,r,s)=>{const{uid:a=t,...i}=n;ri(e,Sl()),Te(e,`${li()}`,a),Te(e,`${ga()}`,o);const{attributes:l={},classes:c=[]}=r(a,i);if(Ae(e,l),((d,m)=>{K(m,(f=>{ri(d,f)}))})(e,c),s){c.length>0&&Te(e,`${kl()}`,c.join(","));const d=fn(l);d.length>0&&Te(e,`${_l()}`,d.join(","))}},jv=(e,t,n,o,r)=>{const s=S.fromTag("span",e);return Fv(s,t,n,o,r,!1),s},BT=(e,t,n,o,r,s)=>{const a=[],i=jv(e.getDoc(),n,s,o,r),l=qo(),c=()=>{l.clear()},d=f=>{K(f,m)},m=f=>{switch(((g,h,b,v)=>Nn(h).fold((()=>"skipping"),(y=>v==="br"||(E=>wt(E)&&ni(E)===yn)(h)?"valid":(E=>nt(E)&&cm(E,Sl()))(h)?"existing":Ro(h.dom)?"caret":yt(OT,(E=>Z(h,E)))?"valid-block":wi(g,b,v)&&wi(g,Le(y),b)?"valid":"invalid-child")))(e,f,"span",Le(f))){case"invalid-child":{c();const g=gt(f);d(g),c();break}case"valid-block":c(),Fv(f,n,s,o,r,!0);break;case"valid":{const g=l.get().getOrThunk((()=>{const h=vn(i);return a.push(h),l.set(h),h}));ne(f,g);break}}};return Hl(e.dom,t,(f=>{c(),(g=>{const h=qe(g,S.fromDom);d(h)})(f)})),a},zv=e=>{const t=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Ot(s,a).map((i=>i.settings)),getNames:()=>fn(s)}})();((s,a)=>{const i=ga(),l=d=>_.from(d.attr(i)).bind(a.lookup),c=d=>{var m,f;d.attr(li(),null),d.attr(ga(),null),d.attr(El(),null);const g=_.from(d.attr(_l())).map((y=>y.split(","))).getOr([]),h=_.from(d.attr(kl())).map((y=>y.split(","))).getOr([]);K(g,(y=>d.attr(y,null)));const b=(f=(m=d.attr("class"))===null||m===void 0?void 0:m.split(" "))!==null&&f!==void 0?f:[],v=Ge(b,[Sl()].concat(h));d.attr("class",v.length>0?v.join(" "):null),d.attr(kl(),null),d.attr(_l(),null)};s.serializer.addTempAttr(El()),s.serializer.addAttributeFilter(i,(d=>{for(const m of d)l(m).each((f=>{f.persistent===!1&&(m.name==="span"?m.unwrap():c(m))}))}))})(e,t);const n=((s,a)=>{const i=tn({}),l=()=>({listeners:[],previous:qo()}),c=(g,h)=>{d(g,(b=>(h(b),b)))},d=(g,h)=>{const b=i.get(),v=h(Ot(b,g).getOrThunk(l));b[g]=v,i.set(b)},m=(g,h)=>{K(j0(s,g),(b=>{h?Te(b,El(),"true"):ot(b,El())}))},f=ro((()=>{const g=Wr(a.getNames());K(g,(h=>{d(h,(b=>{const v=b.previous.get();return I0(s,_.some(h)).fold((()=>{v.each((y=>{(E=>{c(E,(N=>{K(N.listeners,(D=>D(!1,E)))}))})(h),b.previous.clear(),m(y,!1)}))}),(({uid:y,name:E,elements:N})=>{ls(v,y)||(v.each((D=>m(D,!1))),((D,A,R)=>{c(D,(P=>{K(P.listeners,(L=>L(!0,D,{uid:A,nodes:qe(R,(j=>j.dom))})))}))})(E,y,N),b.previous.set(y),m(y,!0))})),{previous:b.previous,listeners:b.listeners}}))}))}),30);return s.on("remove",(()=>{f.cancel()})),s.on("NodeChange",(()=>{f.throttle()})),{addListener:(g,h)=>{d(g,(b=>({previous:b.previous,listeners:b.listeners.concat([h])})))}}})(e,t),o=wn("span"),r=s=>{K(s,(a=>{o(a)?Yt(a):(i=>{hl(i,Sl()),ot(i,`${li()}`),ot(i,`${ga()}`),ot(i,`${El()}`);const l=at(i,`${_l()}`).map((m=>m.split(","))).getOr([]),c=at(i,`${kl()}`).map((m=>m.split(","))).getOr([]);var d;K(l,(m=>ot(i,m))),d=i,K(c,(m=>{hl(d,m)})),ot(i,`${kl()}`),ot(i,`${_l()}`)})(a)}))};return{register:(s,a)=>{t.register(s,a)},annotate:(s,a)=>{t.lookup(s).each((i=>{((l,c,d,m)=>{l.undoManager.transact((()=>{const f=l.selection,g=f.getRng(),h=xi(l).length>0,b=Ks("mce-annotation");if(g.collapsed&&!h&&((v,y)=>{const E=Sa(v.dom,y,[{inline:"span"}]);y.setStart(E.startContainer,E.startOffset),y.setEnd(E.endContainer,E.endOffset),v.selection.setRng(y)})(l,g),f.getRng().collapsed&&!h){const v=jv(l.getDoc(),b,m,c,d.decorate);aa(v,Ft),f.getRng().insertNode(v.dom),f.select(v.dom)}else Sv(f,!1,(()=>{xf(l,(v=>{BT(l,v,b,c,d.decorate,m)}))}))}))})(e,s,i,a)}))},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{I0(e,_.some(s)).each((({elements:a})=>{const i=e.selection.getBookmark();r(a),e.selection.moveToBookmark(i)}))},removeAll:s=>{const a=e.selection.getBookmark();Ct(z0(e,s),((i,l)=>{r(i)})),e.selection.moveToBookmark(a)},getAll:s=>{const a=z0(e,s);return qs(a,(i=>qe(i,(l=>l.dom))))}}},Ei=e=>({getBookmark:Ce(_T,e),moveToBookmark:Ce(NT,e)});Ei.isBookmarkNode=Oo;const Uv=(e,t,n)=>!n.collapsed&&yt(n.getClientRects(),(o=>((r,s,a)=>s>=r.left&&s<=r.right&&a>=r.top&&a<=r.bottom)(o,e,t))),Hv=(e,t)=>{const n=wt(t)?ni(t).length:gt(t).length+1;return e>n?n:e<0?0:e},PT=e=>si.range(e.start,Hv(e.soffset,e.start),e.finish,Hv(e.foffset,e.finish)),$v=(e,t)=>!nd(t.dom)&&(Ze(e,t)||pe(e,t)),qv=e=>t=>$v(e,t.start)&&$v(e,t.finish),LT=e=>si.range(S.fromDom(e.startContainer),e.startOffset,S.fromDom(e.endContainer),e.endOffset),MT=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),_.some(t)}catch{return _.none()}},Rd=e=>{const t=(o=>o.inline||p.browser.isFirefox())(e)?(n=S.fromDom(e.getBody()),(o=>{const r=o.getSelection();return(r&&r.rangeCount!==0?_.from(r.getRangeAt(0)):_.none()).map(LT)})(bo(n).dom).filter(qv(n))):_.none();var n;e.bookmark=t.isSome()?t:e.bookmark},Rf=e=>(e.bookmark?e.bookmark:_.none()).bind((t=>{return n=S.fromDom(e.getBody()),o=t,_.from(o).filter(qv(n)).map(PT);var n,o})).bind(MT),Wv={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},Po={setEditorTimeout:(e,t,n)=>((o,r)=>(x(r)||(r=0),window.setTimeout(o,r)))((()=>{e.removed||t()}),n),setEditorInterval:(e,t,n)=>{const o=((r,s)=>(x(s)||(s=0),window.setInterval(r,s)))((()=>{e.removed?window.clearInterval(o):t()}),n);return o}},Vv=(e,t)=>e.view(t).fold(ie([]),(n=>{const o=e.owner(n),r=Vv(e,o);return[n].concat(r)}));var IT=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?_.none():_.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(S.fromDom)},owner:e=>_n(e)});const Kv=e=>{const t=ra(),n=sm(t),o=((a,i)=>{const l=i.owner(a);return Vv(i,l)})(e,IT),r=rm(e),s=qr(o,((a,i)=>{const l=rm(i);return{left:a.left+l.left,top:a.top+l.top}}),{left:0,top:0});return ti(s.left+r.left+n.left,s.top+r.top+n.top)};let ki;const Of=St.DOM,Bf=e=>{const t=e.classList;return t!==void 0&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},Od=(e,t)=>{const n=xA(e);return Of.getParent(t,(r=>(s=>xe(s)&&Wv.isEditorUIElement(s))(r)||!!n&&e.dom.is(r,n)))!==null},Pf=e=>{try{const t=Qn(S.fromDom(e.getElement()));return kr(t).fold((()=>document.body),(n=>n.dom))}catch{return document.body}},FT=(e,t)=>{const n=t.editor;(r=>{const s=Xs((()=>{Rd(r)}),0);r.on("init",(()=>{r.inline&&((a,i)=>{const l=()=>{i.throttle()};St.DOM.bind(document,"mouseup",l),a.on("remove",(()=>{St.DOM.unbind(document,"mouseup",l)}))})(r,s),((a,i)=>{((l,c)=>{l.on("mouseup touchend",(d=>{c.throttle()}))})(a,i),a.on("keyup NodeChange AfterSetSelectionRange",(l=>{(c=>c.type==="nodechange"&&c.selectionChange)(l)||Rd(a)}))})(r,s)})),r.on("remove",(()=>{s.cancel()}))})(n);const o=(r,s)=>{tT(r)&&r.inline!==!0&&s(S.fromDom(r.getContainer()),"tox-edit-focus")};n.on("focusin",(()=>{const r=e.focusedEditor;if(Bf(Pf(n))&&o(n,ri),r!==n){r&&r.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0);const s=No().browser;n.inline!==!0&&(s.isSafari()||s.isChromium())&&(a=>{if(!a.iframeElement)return;const i=S.fromDom(a.iframeElement),l=Kv(i),c=pm(window);(l.top<c.y||l.top>c.bottom-25)&&i.dom.scrollIntoView({block:"center"})})(n)}})),n.on("focusout",(()=>{Po.setEditorTimeout(n,(()=>{const r=e.focusedEditor;Bf(Pf(n))&&r===n||o(n,hl),Od(n,Pf(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),ki||(ki=r=>{const s=e.activeEditor;s&&ml(r).each((a=>{const i=a;i.ownerDocument===document&&(i===document.body||Od(s,i)||e.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))}))},Of.bind(document,"focusin",ki))},jT=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&ki&&(Of.unbind(document,"focusin",ki),ki=null)},Xv=(e,t)=>{((n,o)=>(r=>r.collapsed?_.from(Es(r.startContainer,r.startOffset)).map(S.fromDom):_.none())(o).bind((r=>_N(r)?_.some(r):Ze(n,r)?_.none():_.some(n))))(S.fromDom(e.getBody()),t).bind((n=>zn(n.dom))).fold((()=>{e.selection.normalize()}),(n=>e.selection.setRng(n.toRange())))},Bd=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},_i=e=>e.inline?(t=>{const n=t.getBody();return n&&(o=S.fromDom(n),Za(o)||(r=o,kr(Qn(r)).filter((s=>r.dom.contains(s.dom)))).isSome());var o,r})(e):(t=>te(t.iframeElement)&&Za(S.fromDom(t.iframeElement)))(e),Lf=e=>_i(e)||(t=>{const n=Qn(S.fromDom(t.getElement()));return kr(n).filter((o=>!Bf(o.dom)&&Od(t,o.dom))).isSome()})(e),Mf=e=>e.editorManager.setActive(e),me={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||me.metaKeyPressed(e),metaKeyPressed:e=>p.os.isMacOS()||p.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Ea="data-mce-selected",Yv=Math.abs,Pd=Math.round,If={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Gv=(e,t)=>{const n=t.dom,o=t.getDoc(),r=document,s=t.getBody();let a,i,l,c,d,m,f,g,h,b,v,y,E,N,D;const A=be=>te(be)&&(t0(be)||n.is(be,"figure.image")),R=be=>sr(be)||n.hasClass(be,"mce-preview-object"),P=be=>{const Ne=be.target;((F,z)=>{if((Q=>Q.type==="longpress"||Q.type.indexOf("touch")===0)(F)){const Q=F.touches[0];return A(F.target)&&!Uv(Q.clientX,Q.clientY,z)}return A(F.target)&&!Uv(F.clientX,F.clientY,z)})(be,t.selection.getRng())&&!be.isDefaultPrevented()&&t.selection.select(Ne)},L=be=>n.hasClass(be,"mce-preview-object")&&te(be.firstElementChild)?[be,be.firstElementChild]:n.is(be,"figure.image")?[be.querySelector("img")]:[be],j=be=>{const Ne=Mb(t);return!(!Ne||t.mode.isReadOnly())&&be.getAttribute("data-mce-resize")!=="false"&&be!==t.getBody()&&(n.hasClass(be,"mce-preview-object")&&te(be.firstElementChild)?Z(S.fromDom(be.firstElementChild),Ne):Z(S.fromDom(be),Ne))},W=(be,Ne,F)=>{if(te(F)){const z=L(be);K(z,(Q=>{Q.style[Ne]||!t.schema.isValid(Q.nodeName.toLowerCase(),Ne)?n.setStyle(Q,Ne,F):n.setAttrib(Q,Ne,""+F)}))}},B=(be,Ne,F)=>{W(be,"width",Ne),W(be,"height",F)},I=be=>{let Ne,F,z,Q,Y;Ne=be.screenX-m,F=be.screenY-f,y=Ne*c[2]+g,E=F*c[3]+h,y=y<5?5:y,E=E<5?5:E,z=(A(a)||R(a))&&mA(t)!==!1?!me.modifierPressed(be):me.modifierPressed(be),z&&(Yv(Ne)>Yv(F)?(E=Pd(y*b),y=Pd(E/b)):(y=Pd(E/b),E=Pd(y*b))),B(i,y,E),Q=c.startPos.x+Ne,Y=c.startPos.y+F,Q=Q>0?Q:0,Y=Y>0?Y:0,n.setStyles(l,{left:Q,top:Y,display:"block"}),l.innerHTML=y+" &times; "+E,Ne=s.scrollWidth-N,F=s.scrollHeight-D,Ne+F!==0&&n.setStyles(l,{left:Q-Ne,top:Y-F}),v||(((fe,ue,ze,We,tt)=>{fe.dispatch("ObjectResizeStart",{target:ue,width:ze,height:We,origin:tt})})(t,a,g,h,"corner-"+c.name),v=!0)},H=()=>{const be=v;v=!1,be&&(W(a,"width",y),W(a,"height",E)),n.unbind(o,"mousemove",I),n.unbind(o,"mouseup",H),r!==o&&(n.unbind(r,"mousemove",I),n.unbind(r,"mouseup",H)),n.remove(i),n.remove(l),n.remove(d),J(a),be&&(((Ne,F,z,Q,Y)=>{Ne.dispatch("ObjectResized",{target:F,width:z,height:Q,origin:Y})})(t,a,y,E,"corner-"+c.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},J=be=>{De();const Ne=n.getPos(be,s),F=Ne.x,z=Ne.y,Q=be.getBoundingClientRect(),Y=Q.width||Q.right-Q.left,fe=Q.height||Q.bottom-Q.top;a!==be&&(le(),a=be,y=E=0);const ue=t.dispatch("ObjectSelected",{target:be});j(be)&&!ue.isDefaultPrevented()?Ct(If,((ze,We)=>{let tt=n.get("mceResizeHandle"+We);tt&&n.remove(tt),tt=n.add(s,"div",{id:"mceResizeHandle"+We,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+We+"-resize; margin:0; padding:0"}),n.bind(tt,"mousedown",(Lt=>{Lt.stopImmediatePropagation(),Lt.preventDefault(),(Mt=>{const mo=L(a)[0];m=Mt.screenX,f=Mt.screenY,g=mo.clientWidth,h=mo.clientHeight,b=h/g,c=ze,c.name=We,c.startPos={x:Y*ze[0]+F,y:fe*ze[1]+z},N=s.scrollWidth,D=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=((ye,Qe)=>{if(R(Qe))return ye.create("img",{src:p.transparentSrc});if(Ar(Qe)){const lt=Jt(c.name,"n")?sn:oo,Ve=Qe.cloneNode(!0);return lt(ye.select("tr",Ve)).each((vt=>{const Dt=ye.select("td,th",vt);ye.setStyle(vt,"height",null),K(Dt,(he=>ye.setStyle(he,"height",null)))})),Ve}return Qe.cloneNode(!0)})(n,a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:F,top:z,margin:0}),B(i,Y,fe),i.removeAttribute(Ea),s.appendChild(i),n.bind(o,"mousemove",I),n.bind(o,"mouseup",H),r!==o&&(n.bind(r,"mousemove",I),n.bind(r,"mouseup",H)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},g+" &times; "+h)})(Lt)})),ze.elm=tt,n.setStyles(tt,{left:Y*ze[0]+F-tt.offsetWidth/2,top:fe*ze[1]+z-tt.offsetHeight/2})})):le(!1)},oe=Xs(J,0),le=(be=!0)=>{oe.cancel(),De(),a&&be&&a.removeAttribute(Ea),Ct(If,((Ne,F)=>{const z=n.get("mceResizeHandle"+F);z&&(n.unbind(z),n.remove(z))}))},_e=(be,Ne)=>n.isChildOf(be,Ne),Oe=be=>{if(v||t.removed||t.composing)return;const Ne=be.type==="mousedown"?be.target:e.getNode(),F=vs(S.fromDom(Ne),"table,img,figure.image,hr,video,span.mce-preview-object,details").map((Q=>Q.dom)).filter((Q=>n.isEditable(Q.parentElement)||Q.nodeName==="IMG"&&n.isEditable(Q))).getOrUndefined(),z=te(F)?n.getAttrib(F,Ea,"1"):"1";if(K(n.select(`img[${Ea}],hr[${Ea}]`),(Q=>{Q.removeAttribute(Ea)})),te(F)&&_e(F,s)&&Lf(t)){rt();const Q=e.getStart(!0);if(_e(Q,F)&&_e(e.getEnd(!0),F))return n.setAttrib(F,Ea,z),void oe.throttle(F)}le()},De=()=>{Ct(If,(be=>{be.elm&&(n.unbind(be.elm),delete be.elm)}))},rt=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",(()=>{rt(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Oe),t.on("keyup compositionend",(be=>{a&&a.nodeName==="TABLE"&&Oe(be)})),t.on("hide blur",le),t.on("contextmenu longpress",P,!0)})),t.on("remove",De),{isResizable:j,showResizeRect:J,hideResizeRect:le,updateResizeRect:Oe,destroy:()=>{oe.cancel(),a=i=d=null}}},Qv=(e,t,n)=>{const o=bo(S.fromDom(n));return Q_(o.dom,e,t).map((r=>{const s=n.createRange();return s.setStart(r.start.dom,r.soffset),s.setEnd(r.finish.dom,r.foffset),s})).getOrUndefined()},Ff=(e,t)=>te(e)&&te(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Jv=(e,t,n)=>((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(e,t,n)!==null,zT=(e,t,n)=>Jv(e,t,(o=>o.nodeName===n)),UT=(e,t)=>To(e)&&!Jv(e,t,Ro),Zv=(e,t,n)=>{const o=t.parentNode;if(o){const r=new ln(t,e.getParent(o,e.isBlock)||e.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(Ht(s))return!0}return!1},jf=(e,t,n,o,r)=>{const s=e.getRoot(),a=e.schema.getNonEmptyElements(),i=r.parentNode;let l,c;if(!i)return _.none();const d=e.getParent(i,e.isBlock)||s;if(o&&Ht(r)&&t&&e.isEmpty(d))return _.some(G(i,e.nodeIndex(r)));const m=new ln(r,d);for(;c=m[o?"prev":"next"]();){if(e.getContentEditableParent(c)==="false"||UT(c,s))return _.none();if(re(c)&&c.data.length>0)return zT(c,s,"A")?_.none():_.some(G(c,o?c.data.length:0));if(e.isBlock(c)||a[c.nodeName.toLowerCase()])return _.none();l=c}return ys(l)?_.none():n&&l?_.some(G(l,0)):_.none()},ey=(e,t,n,o)=>{const r=e.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=xe(i)&&l===i.childNodes.length,d=e.schema.getNonEmptyElements();let m=n;if(To(i))return _.none();if(xe(i)&&l>i.childNodes.length-1&&(m=!1),bl(i)&&(i=r,l=0),i===r){if(m&&(s=i.childNodes[l>0?l-1:0],s)&&(To(s)||d[s.nodeName]||Ar(s)))return _.none();if(i.hasChildNodes()){if(l=Math.min(!m&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=re(i)&&c?i.data.length:0,!t&&i===r.lastChild&&Ar(i)||((f,g)=>{let h=g;for(;h&&h!==f;){if(Pt(h))return!0;h=h.parentNode}return!1})(r,i)||To(i)||vm(i))return _.none();if(i.hasChildNodes()&&!Ar(i)){s=i;const f=new ln(i,r);do{if(Pt(s)||To(s)){a=!1;break}if(re(s)&&s.data.length>0){l=m?0:s.data.length,i=s,a=!0;break}if(d[s.nodeName.toLowerCase()]&&!nN(s)){l=e.nodeIndex(s),i=s.parentNode,m||l++,a=!0;break}}while(s=m?f.next():f.prev())}}}return t&&(re(i)&&l===0&&jf(e,c,t,!0,i).each((f=>{i=f.container(),l=f.offset(),a=!0})),xe(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Ht(s)||(f=>{var g;return((g=f.previousSibling)===null||g===void 0?void 0:g.nodeName)==="A"})(s)||Zv(e,s,!1)||Zv(e,s,!0)||jf(e,c,t,!0,s).each((f=>{i=f.container(),l=f.offset(),a=!0})))),m&&!t&&re(i)&&l===i.data.length&&jf(e,c,t,!1,i).each((f=>{i=f.container(),l=f.offset(),a=!0})),a&&i?_.some(G(i,l)):_.none()},Ld=(e,t)=>{const n=t.collapsed,o=t.cloneRange(),r=G.fromRangeStart(t);return ey(e,n,!0,o).each((s=>{n&&G.isAbove(r,s)||o.setStart(s.container(),s.offset())})),n||ey(e,n,!1,o).each((s=>{o.setEnd(s.container(),s.offset())})),n&&o.collapse(!0),Ff(t,o)?_.none():_.some(o)},Md=(e,t)=>e.splitText(t),Id=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset;if(t===o&&re(t)){if(n>0&&n<t.data.length)if(o=Md(t,n),t=o.previousSibling,r>n){r-=n;const s=Md(o,r).previousSibling;t=o=s,r=s.data.length,n=0}else r=0}else if(re(t)&&n>0&&n<t.data.length&&(t=Md(t,n),n=0),re(o)&&r>0&&r<o.data.length){const s=Md(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:r}},Pr=e=>({walk:(t,n)=>Hl(e,t,n),split:Id,expand:(t,n={type:"word"})=>{if(n.type==="word"){const o=Sa(e,t,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),r=e.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return t},normalize:t=>Ld(e,t).fold(_t,(n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0)))});Pr.compareRanges=Ff,Pr.getCaretRangeFromPoint=Qv,Pr.getSelectedNode=pd,Pr.getNode=Es;const zf=e=>Le(e)==="textarea",ty=(e,t)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return ti(a.offsetLeft,a.offsetTop);const c=Yc(i?.pageYOffset,l.scrollTop),d=Yc(i?.pageXOffset,l.scrollLeft),m=Yc(l.clientTop,a.clientTop),f=Yc(l.clientLeft,a.clientLeft);return rm(r).translate(d-f,c-m)})(e),o=(r=>q_.get(r))(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},ny=(e,t,n,o)=>{$T(e,((r,s)=>HT(e,t,n,o)),n)},oy=(e,t,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};((a,i)=>a.dispatch("ScrollIntoView",i).isDefaultPrevented())(e,s)||(n(e,t,sm(t).top,o,r),((a,i)=>{a.dispatch("AfterScrollIntoView",i)})(e,s))},HT=(e,t,n,o)=>{const r=S.fromDom(e.getBody()),s=S.fromDom(e.getDoc());r.dom.offsetWidth;const a=((i,l)=>{const c=((m,f)=>{const g=gt(m);if(g.length===0||zf(m))return{element:m,offset:f};if(f<g.length&&!zf(g[f]))return{element:g[f],offset:0};{const h=g[g.length-1];return zf(h)?{element:m,offset:f}:Le(h)==="img"?{element:h,offset:1}:wt(h)?{element:h,offset:ni(h).length}:{element:h,offset:gt(h).length}}})(i,l),d=S.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return dn(c.element,d),ty(d,(()=>ct(d)))})(S.fromDom(n.startContainer),n.startOffset);oy(e,s,t,a,o),a.cleanup()},ry=(e,t,n,o)=>{const r=S.fromDom(e.getDoc());oy(e,r,n,(s=>ty(S.fromDom(s),Ee))(t),o)},$T=(e,t,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;t(S.fromDom(o),S.fromDom(s));const i=e.dom.createRng();i.setStart(o,r),i.setEnd(s,a),e.selection.setRng(n)},Uf=(e,t,n,o,r)=>{const s=t.pos;if(o)zh(s.left,Math.max(0,s.top-30),r);else{const a=s.top-n+t.height+30;zh(-e.getBody().getBoundingClientRect().left,a,r)}},sy=(e,t,n,o,r,s)=>{const a=o+n,i=r.pos.top,l=r.bottom,c=l-i>=o;i<n?Uf(e,r,o,s!==!1,t):i>a?Uf(e,r,o,c?s!==!1:s===!0,t):l>a&&!c&&Uf(e,r,o,s===!0,t)},ay=(e,t,n,o,r)=>{const s=bo(t).dom.innerHeight;sy(e,t,n,s,o,r)},iy=(e,t,n,o,r)=>{const s=bo(t).dom.innerHeight;sy(e,t,n,s,o,r);const a=Kv(o.element),i=pm(window);a.top<i.y?Uh(o.element,r!==!1):a.top>i.bottom&&Uh(o.element,r===!0)},qT=(e,t,n)=>ny(e,ay,t,n),WT=(e,t,n)=>ry(e,t,ay,n),VT=(e,t,n)=>ny(e,iy,t,n),KT=(e,t,n)=>ry(e,t,iy,n),$l=(e,t,n)=>{(e.inline?qT:VT)(e,t,n)},ly=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),cy=(e,t,n,o,r)=>{const s=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return _.from(s).map(S.fromDom).map((i=>o&&t.collapsed?i:Vt(i,r(i,a)).getOr(i))).bind((i=>nt(i)?_.some(i):bn(i).filter(nt))).map((i=>i.dom)).getOr(e)},dy=(e,t,n=!1)=>cy(e,t,!0,n,((o,r)=>Math.min(Sr(o),r))),uy=(e,t,n=!1)=>cy(e,t,!1,n,((o,r)=>r>0?r-1:r)),my=(e,t)=>{const n=e;for(;e&&re(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},Hf=(e,t)=>qe(t,(n=>{const o=e.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n})),XT={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Fd=(e,t,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[o])return e[o];if(e!==t){let s=e[r];if(s)return s;for(let a=e.parent;a&&a!==t;a=a.parent)if(s=a[r],s)return s}},YT=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!ai(n))return!1;const o=e.parent;return!o||o.name==="span"&&!o.attr("style")||!/^[ ]+$/.test(n)},fy=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Rn{static create(t,n){const o=new Rn(t,XT[t]||1);return n&&Ct(n,((r,s)=>{o.attr(s,r)})),o}constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const o=this;if(!we(t))return te(t)&&Ct(t,((s,a)=>{o.attr(a,s)})),o;const r=o.attributes;if(r){if(n!==void 0){if(n===null){if(t in r.map){delete r.map[t];let s=r.length;for(;s--;)if(r[s].name===t)return r.splice(s,1),o}return o}if(t in r.map){let s=r.length;for(;s--;)if(r[s].name===t){r[s].value=n;break}}else r.push({name:t,value:n});return r.map[t]=n,o}return r.map[t]}}clone(){const t=this,n=new Rn(t.name,t.type),o=t.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];i.name!=="id"&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const o=n.next;t.insert(n,t,!0),n=o}t.remove()}remove(){const t=this,n=t.parent,o=t.next,r=t.prev;return n&&(n.firstChild===t?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===t?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const o=n.lastChild;return o?(o.next=t,t.prev=o,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,o){t.parent&&t.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===r.lastChild?r.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=r,t}getAll(t){const n=this,o=[];for(let r=n.firstChild;r;r=Fd(r,n))r.name===t&&o.push(r);return o}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let r=t.firstChild;r;r=Fd(r,t))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},o){var r;const s=this;let a=s.firstChild;if(fy(s))return!1;if(a)do{if(a.type===1){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||fy(a))return!1}if(a.type===8||a.type===3&&!YT(a)||a.type===3&&a.parent&&n[a.parent.name]&&ai((r=a.value)!==null&&r!==void 0?r:"")||o&&o(a))return!1}while(a=Fd(a,s));return!0}walk(t){return Fd(this,null,t)}}const GT=k.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),py=e=>we(e.nodeValue)&&e.nodeValue.includes(yn),gy=e=>(e.length===0?"":`${qe(e,(t=>`[${t}]`)).join(",")},`)+'[data-mce-bogus="all"]',hy=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,(t=>py(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP)),by=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,(t=>{if(py(t)){const n=t.parentNode;return n&&Me(GT,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP})),QT=e=>hy(e).nextNode()!==null,JT=e=>by(e).nextNode()!==null,ZT=(e,t)=>t.querySelector(gy(e))!==null,eD=(e,t)=>{K(((n,o)=>o.querySelectorAll(gy(n)))(e,t),(n=>{const o=S.fromDom(n);ft(o,"data-mce-bogus")==="all"?ct(o):K(e,(r=>{pt(o,r)&&ot(o,r)}))}))},vy=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},tD=Mn(vy,hy),nD=Mn(vy,by),yy=(e,t)=>{const n=[{condition:Ce(ZT,t),action:Ce(eD,t)},{condition:QT,action:tD},{condition:JT,action:nD}];let o=e,r=!1;return K(n,(({condition:s,action:a})=>{s(o)&&(r||(o=e.cloneNode(!0),r=!0),a(o))})),o},Cy=e=>{const t=Tn(e,"[data-mce-bogus]");K(t,(n=>{ft(n,"data-mce-bogus")==="all"?ct(n):xs(n)?(dn(n,S.fromText(xr)),ct(n)):Yt(n)}))},xy=e=>{const t=Tn(e,"input");K(t,(n=>{ot(n,"name")}))},oD=(e,t,n)=>{let o;return o=t.format==="raw"?k.trim(vo(yy(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?((r,s)=>{const a=r.getDoc(),i=Qn(S.fromDom(r.getBody())),l=S.fromTag("div",a);Te(l,"data-mce-bogus","all"),Kc(l,{position:"fixed",left:"-9999999px",top:"0"}),aa(l,s.innerHTML),Cy(l),xy(l);const c=(m=>gs(m)?m:S.fromDom(_n(m).dom.body))(i);X(c,l);const d=vo(l.dom.innerText);return ct(l),d})(e,n):t.format==="tree"?e.serializer.serialize(n,t):((r,s)=>{const a=Sn(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${a}>[\r
]*|<br \\/>[\r
]*)$`);return s.replace(i,"")})(e,e.serializer.serialize(n,t)),t.format!=="text"&&!dd(S.fromDom(n))&&we(o)?k.trim(o):o},wy=k.makeMap,Sy=e=>{const t=[],n=(e=e||{}).indent,o=wy(e.indent_before||""),r=wy(e.indent_after||""),s=fa.getEncodeFunc(e.entity_encoding||"raw",e.entities),a=e.element_format!=="xhtml";return{start:(i,l,c)=>{if(n&&o[i]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}if(t.push("<",i),l)for(let d=0,m=l.length;d<m;d++){const f=l[d];t.push(" ",f.name,'="',s(f.value,!0),'"')}if(t[t.length]=!c||a?">":" />",c&&n&&r[i]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}},end:i=>{let l;t.push("</",i,">"),n&&r[i]&&t.length>0&&(l=t[t.length-1],l.length>0&&l!==`
`&&t.push(`
`))},text:(i,l)=>{i.length>0&&(t[t.length]=l?i:s(i))},cdata:i=>{t.push("<![CDATA[",i,"]]>")},comment:i=>{t.push("<!--",i,"-->")},pi:(i,l)=>{l?t.push("<?",i," ",s(l),"?>"):t.push("<?",i,"?>"),n&&t.push(`
`)},doctype:i=>{t.push("<!DOCTYPE",i,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},As=(e={},t=Cs())=>{const n=Sy(e);return e.validate=!("validate"in e)||e.validate,{serialize:o=>{const r=e.validate,s={3:i=>{var l;n.text((l=i.value)!==null&&l!==void 0?l:"",i.raw)},8:i=>{var l;n.comment((l=i.value)!==null&&l!==void 0?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype((l=i.value)!==null&&l!==void 0?l:"")},4:i=>{var l;n.cdata((l=i.value)!==null&&l!==void 0?l:"")},11:i=>{let l=i;if(l=l.firstChild)do a(l);while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const d=i.name,m=d in t.getVoidElements();let f=i.attributes;if(r&&f&&f.length>1){const g=[];g.map={};const h=t.getElementRule(i.name);if(h){for(let b=0,v=h.attributesOrder.length;b<v;b++){const y=h.attributesOrder[b];if(y in f.map){const E=f.map[y];g.map[y]=E,g.push({name:y,value:E})}}for(let b=0,v=f.length;b<v;b++){const y=f[b].name;if(!(y in g.map)){const E=f.map[y];g.map[y]=E,g.push({name:y,value:E})}}f=g}}if(n.start(d,f,m),da(d))we(i.value)&&n.text(i.value,!0),n.end(d);else if(!m){let g=i.firstChild;if(g){d!=="pre"&&d!=="textarea"||g.type!==3||((l=g.value)===null||l===void 0?void 0:l[0])!==`
`||n.text(`
`,!0);do a(g);while(g=g.next)}n.end(d)}}};return o.type!==1||e.inner?o.type===3?s[3](o):s[11](o):a(o),n.getContent()}}},Ey=new Set;K(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(e=>{Ey.add(e)}));const ky=new Set;K(["background-color"],(e=>{ky.add(e)}));const _y=["font","text-decoration","text-emphasis"],Ni=(e,t)=>fn(((n,o)=>n.parseStyle(n.getAttrib(o,"style")))(e,t)),Ny=(e,t)=>yt(Ni(e,t),(n=>(o=>Ey.has(o))(n))),Ay=(e,t,n)=>_.from(n.container()).filter(re).exists((o=>{const r=e?0:-1;return t(o.data.charAt(n.offset()+r))})),$f=Ce(Ay,!0,wa),qf=Ce(Ay,!1,wa),rD=e=>{const t=e.container();return re(t)&&(t.data.length===0||ud(t.data)&&Ei.isBookmarkNode(t.parentNode))},Ts=(e,t)=>n=>cf(e?0:-1,n).filter(t).isSome(),Ty=e=>t0(e)&&nr(S.fromDom(e),"display")==="block",Dy=e=>Pt(e)&&!(t=>xe(t)&&t.getAttribute("data-mce-bogus")==="all")(e),sD=Ts(!0,Ty),aD=Ts(!1,Ty),ql=Ts(!0,sr),Wl=Ts(!1,sr),Ry=Ts(!0,Ar),Wf=Ts(!1,Ar),Ds=Ts(!0,Dy),Rs=Ts(!1,Dy),Oy=(e,t)=>((n,o,r)=>Ze(o,n)?on(n,(s=>r(s)||pe(s,o))).slice(0,-1):[])(e,t,_t),Zr=(e,t)=>[e].concat(Oy(e,t)),Vf=(e,t,n)=>fv(e,t,n,rD),By=(e,t,n)=>$t(Zr(S.fromDom(t.container()),e),(o=>r=>o.isBlock(Le(r)))(n)),Py=(e,t,n,o)=>Vf(e,t.dom,n).forall((r=>By(t,n,o).fold((()=>!Dr(r,n,t.dom)),(s=>!Dr(r,n,t.dom)&&Ze(s,S.fromDom(r.container())))))),Ly=(e,t,n,o)=>By(t,n,o).fold((()=>Vf(e,t.dom,n).forall((r=>!Dr(r,n,t.dom)))),(r=>Vf(e,r.dom,n).isNone())),Kf=Ce(Ly,!1),My=Ce(Ly,!0),iD=Ce(Py,!1),lD=Ce(Py,!0),cD=e=>wd(e).exists(xs),jd=(e,t,n,o)=>{const r=Pe(Zr(S.fromDom(n.container()),t),(a=>o.isBlock(Le(a)))),s=sn(r).getOr(t);return Do(e,s.dom,n).filter(cD)},Xf=(e,t,n)=>wd(t).exists(xs)||jd(!0,e,t,n).isSome(),zd=(e,t,n)=>(o=>_.from(o.getNode(!0)).map(S.fromDom))(t).exists(xs)||jd(!1,e,t,n).isSome(),Iy=Ce(jd,!1),dD=Ce(jd,!0),Fy=e=>G.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),jy=(e,t,n)=>{const o=Pe(Zr(S.fromDom(t.container()),e),(r=>n.isBlock(Le(r))));return sn(o).getOr(e)},zy=(e,t,n)=>Fy(t)?qf(t):qf(t)||io(jy(e,t,n).dom,t).exists(qf),Uy=(e,t,n)=>Fy(t)?$f(t):$f(t)||Zn(jy(e,t,n).dom,t).exists($f),Yf=e=>wd(e).bind((t=>Nr(t,nt))).exists((t=>(n=>Se(["pre","pre-wrap"],n))(nr(t,"white-space")))),Hy=(e,t)=>n=>{return o=new ln(n,e)[t](),te(o)&&Pt(o)&&ev(o);var o},$y=(e,t,n)=>!Yf(t)&&(((o,r,s)=>((a,i)=>io(a.dom,i).isNone())(o,r)||((a,i)=>Zn(a.dom,i).isNone())(o,r)||Kf(o,r,s)||My(o,r,s)||zd(o,r,s)||Xf(o,r,s))(e,t,n)||zy(e,t,n)||Uy(e,t,n)),Vl=(e,t,n)=>!Yf(t)&&(Kf(e,t,n)||iD(e,t,n)||zd(e,t,n)||zy(e,t,n)||((o,r)=>{const s=io(o.dom,r).getOr(r),a=Hy(o.dom,"prev");return r.isAtStart()&&(a(r.container())||a(s.container()))})(e,t)),Kl=(e,t,n)=>!Yf(t)&&(My(e,t,n)||lD(e,t,n)||Xf(e,t,n)||Uy(e,t,n)||((o,r)=>{const s=Zn(o.dom,r).getOr(r),a=Hy(o.dom,"next");return r.isAtEnd()&&(a(r.container())||a(s.container()))})(e,t)),Gf=(e,t,n)=>Vl(e,t,n)||Kl(e,(o=>{const r=o.container(),s=o.offset();return re(r)&&s<r.data.length?G(r,s+1):o})(t),n),qy=(e,t)=>_d(e.charAt(t)),Wy=(e,t)=>wa(e.charAt(t)),Vy=(e,t,n,o)=>{const r=t.data,s=G(t,0);return n||!qy(r,0)||Gf(e,s,o)?!!(n&&Wy(r,0)&&Vl(e,s,o))&&(t.data=Ft+r.slice(1),!0):(t.data=" "+r.slice(1),!0)},Ky=(e,t,n,o)=>{const r=t.data,s=G(t,r.length-1);return n||!qy(r,r.length-1)||Gf(e,s,o)?!!(n&&Wy(r,r.length-1)&&Kl(e,s,o))&&(t.data=r.slice(0,-1)+Ft,!0):(t.data=r.slice(0,-1)+" ",!0)},uD=(e,t,n)=>{const o=t.container();if(!re(o))return _.none();if((r=>{const s=r.container();return re(s)&&hn(s.data,Ft)})(t)){const r=Vy(e,o,!1,n)||(s=>{const a=s.data,i=(l=>{const c=l.split("");return qe(c,((d,m)=>_d(d)&&m>0&&m<c.length-1&&hf(c[m-1])&&hf(c[m+1])?" ":d)).join("")})(a);return i!==a&&(s.data=i,!0)})(o)||Ky(e,o,!1,n);return Vr(r,t)}if(Gf(e,t,n)){const r=Vy(e,o,!0,n)||Ky(e,o,!0,n);return Vr(r,t)}return _.none()},Xy=(e,t,n,o)=>{if(n===0)return;const r=S.fromDom(e),s=_r(r,(c=>o.isBlock(Le(c)))).getOr(r),a=e.data.slice(t,t+n),i=t+n>=e.data.length&&Kl(s,G(e,e.data.length),o),l=t===0&&Vl(s,G(e,0),o);e.replaceData(t,n,Zh(a,4,l,i))},Ud=(e,t,n)=>{const o=e.data.slice(t),r=o.length-tm(o).length;Xy(e,t,r,n)},Qf=(e,t,n)=>{const o=e.data.slice(0,t),r=o.length-Tc(o).length;Xy(e,t-r,r,n)},Jf=(e,t,n,o,r=!0)=>{const s=Tc(e.data).length,a=r?e:t,i=r?t:e;return r?a.appendData(i.data):a.insertData(0,i.data),ct(S.fromDom(i)),o&&Ud(a,s,n),a},mD=(e,t)=>((n,o)=>{const r=n.container(),s=n.offset();return!G.isTextPosition(n)&&r===o.parentNode&&s>G.before(o).offset()})(t,e)?G(t.container(),t.offset()-1):t,Yy=e=>{return lr(e.previousSibling)?_.some((t=e.previousSibling,re(t)?G(t,t.data.length):G.after(t))):e.previousSibling?Yo(e.previousSibling):_.none();var t},Gy=e=>{return lr(e.nextSibling)?_.some((t=e.nextSibling,re(t)?G(t,0):G.before(t))):e.nextSibling?zn(e.nextSibling):_.none();var t},fD=(e,t,n)=>((o,r,s)=>o?((a,i)=>Gy(i).orThunk((()=>Yy(i))).orThunk((()=>((l,c)=>Zn(l,G.after(c)).orThunk((()=>io(l,G.before(c)))))(a,i))))(r,s):((a,i)=>Yy(i).orThunk((()=>Gy(i))).orThunk((()=>((l,c)=>_.from(c.previousSibling?c.previousSibling:c.parentNode).bind((d=>io(l,G.before(d)))).orThunk((()=>Zn(l,G.after(c)))))(a,i))))(r,s))(e,t,n).map(Ce(mD,n)),Qy=(e,t,n)=>{n.fold((()=>{e.focus()}),(o=>{e.selection.setRng(o.toRange(),t)}))},pD=(e,t)=>t&&Me(e.schema.getBlockElements(),Le(t)),Os=(e,t,n,o=!0,r=!1)=>{const s=fD(t,e.getBody(),n.dom),a=_r(n,Ce(pD,e),(i=e.getBody(),c=>c.dom===i));var i;const l=((c,d,m,f)=>{const g=Xt(c).filter(wt),h=Gn(c).filter(wt);return ct(c),(b=g,v=h,y=d,E=(N,D,A)=>{const R=N.dom,P=D.dom,L=R.data.length;return Jf(R,P,m,f),A.container()===P?G(R,L):A},b.isSome()&&v.isSome()&&y.isSome()?_.some(E(b.getOrDie(),v.getOrDie(),y.getOrDie())):_.none()).orThunk((()=>(f&&(g.each((N=>Qf(N.dom,N.dom.length,m))),h.each((N=>Ud(N.dom,0,m)))),d)));var b,v,y,E})(n,s,e.schema,((c,d)=>Me(c.schema.getTextInlineElements(),Le(d)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind((c=>((d,m,f)=>{if(Fn(d,m)){const g=S.fromHtml('<br data-mce-bogus="1">');return f?K(gt(m),(h=>{Df(h)||ct(h)})):en(m),X(m,g),_.some(G.before(g.dom))}return _.none()})(e.schema,c,r))).fold((()=>{o&&Qy(e,t,l)}),(c=>{o&&Qy(e,t,_.some(c))}))},gD=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ka=(e,t)=>Z(S.fromDom(t),uA(e))&&!ua(e.schema,t)&&e.dom.isEditable(t),Jy=e=>{var t;return St.DOM.getStyle(e,"direction",!0)==="rtl"||(n=>gD.test(n))((t=e.textContent)!==null&&t!==void 0?t:"")},Bs=(e,t,n)=>{const o=((r,s,a)=>Pe(St.DOM.getParents(a.container(),"*",s),r))(e,t,n);return _.from(o[o.length-1])},Lo=(e,t)=>{const n=t.container(),o=t.offset();return e?Ss(n)?re(n.nextSibling)?G(n.nextSibling,0):G.after(n):Um(t)?G(n,o+1):t:Ss(n)?re(n.previousSibling)?G(n.previousSibling,n.previousSibling.data.length):G.before(n):Hm(t)?G(n,o-1):t},Zy=Ce(Lo,!0),eC=Ce(Lo,!1),tC=(e,t)=>{const n=o=>o.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},Hd=e=>tC(e,"Delete"),nC=e=>tC(e,"ForwardDelete"),hD=e=>H0(e)||di(e),$d=(e,t)=>Ze(e,t)?Nr(t,hD,(n=>o=>ls(bn(o),n,pe))(e)):_.none(),Zf=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},oC=(e,t,n)=>Wt(zn(n),Yo(n),((o,r)=>{const s=Lo(!0,o),a=Lo(!1,r),i=Lo(!1,t);return e?Zn(n,i).exists((l=>l.isEqual(a)&&t.isEqual(s))):io(n,i).exists((l=>l.isEqual(s)&&t.isEqual(a)))})).getOr(!0),rC=e=>(xt(e)?Xt(e):Wn(e)).bind(rC).orThunk((()=>_.some(e))),sC=(e,t,n,o=!0)=>{var r;t.deleteContents();const s=rC(n).getOr(n),a=S.fromDom((r=e.dom.getParent(s.dom,e.dom.isBlock))!==null&&r!==void 0?r:n.dom);if(a.dom===e.getBody()?Zf(e,o):Fn(e.schema,a,{checkRootAsContent:!1})&&(ws(a),o&&e.selection.setCursorLocation(a.dom,0)),!pe(n,a)){const i=ls(bn(a),n)?[]:an(a);K(i.concat(gt(n)),(l=>{pe(l,a)||Ze(l,a)||!Fn(e.schema,l)||ct(l)}))}},ep=e=>Tn(e,"td,th"),aC=(e,t)=>zl(S.fromDom(e),t),tp=(e,t)=>({start:e,end:t}),Xl=ho([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),qd=(e,t)=>vs(S.fromDom(e),"td,th",t),iC=e=>!pe(e.start,e.end),lC=(e,t)=>zl(e.start,t).bind((n=>zl(e.end,t).bind((o=>Vr(pe(n,o),n))))),np=e=>t=>lC(t,e).map((n=>((o,r,s)=>({rng:o,table:r,cells:s}))(t,n,ep(n)))),cC=(e,t,n,o)=>{if(n.collapsed||!e.forall(iC))return _.none();if(t.isSameTable){const r=e.bind(np(o));return _.some({start:r,end:r})}{const r=qd(n.startContainer,o),s=qd(n.endContainer,o),a=r.bind((l=>c=>zl(c,l).bind((d=>oo(ep(d)).map((m=>tp(c,m))))))(o)).bind(np(o)),i=s.bind((l=>c=>zl(c,l).bind((d=>sn(ep(d)).map((m=>tp(m,c))))))(o)).bind(np(o));return _.some({start:a,end:i})}},dC=(e,t)=>Hs(e,(n=>pe(n,t))),op=e=>Wt(dC(e.cells,e.rng.start),dC(e.cells,e.rng.end),((t,n)=>e.cells.slice(t,n+1))),uC=(e,t)=>{const{startTable:n,endTable:o}=t,r=e.cloneRange();return n.each((s=>r.setStartAfter(s.dom))),o.each((s=>r.setEndBefore(s.dom))),r},bD=(e,t)=>{const n=(s=>a=>pe(s,a))(e),o=((s,a)=>{const i=qd(s.startContainer,a),l=qd(s.endContainer,a);return Wt(i,l,tp)})(t,n),r=((s,a)=>{const i=aC(s.startContainer,a),l=aC(s.endContainer,a),c=i.isSome(),d=l.isSome(),m=Wt(i,l,pe).getOr(!1);return(f=>Wt(f.startTable,f.endTable,((g,h)=>{const b=um(g,(y=>pe(y,h))),v=um(h,(y=>pe(y,g)));return b||v?{...f,startTable:b?_.none():f.startTable,endTable:v?_.none():f.endTable,isSameTable:!1,isMultiTable:!1}:f})).getOr(f))({startTable:i,endTable:l,isStartInTable:c,isEndInTable:d,isSameTable:m,isMultiTable:!m&&c&&d})})(t,n);return((s,a,i)=>s.exists((l=>((c,d)=>!iC(c)&&lC(c,d).exists((m=>{const f=m.dom.rows;return f.length===1&&f[0].cells.length===1})))(l,i)&&yf(l.start,a))))(o,t,n)?o.map((s=>Xl.singleCellTable(t,s.start))):r.isMultiTable?((s,a,i,l)=>cC(s,a,i,l).bind((({start:c,end:d})=>{const m=c.bind(op).getOr([]),f=d.bind(op).getOr([]);if(m.length>0&&f.length>0){const g=uC(i,a);return _.some(Xl.multiTable(m,f,g))}return _.none()})))(o,r,t,n):((s,a,i,l)=>cC(s,a,i,l).bind((({start:c,end:d})=>c.or(d))).bind((c=>{const{isSameTable:d}=a,m=op(c).getOr([]);if(d&&c.cells.length===m.length)return _.some(Xl.fullTable(c.table));if(m.length>0){if(d)return _.some(Xl.partialTable(m,_.none()));{const f=uC(i,a);return _.some(Xl.partialTable(m,_.some({...a,rng:f})))}}return _.none()})))(o,r,t,n)},mC=e=>K(e,(t=>{ot(t,"contenteditable"),ws(t)})),rp=(e,t,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(t.dom.lastChild)):(r.setStartBefore(t.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),sp(e,r,t,!1).each((s=>s()))},fC=e=>{const t=xi(e),n=S.fromDom(e.selection.getNode());rd(n.dom)&&Fn(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&yt(t,(o=>pe(o,n)))&&Te(n,"data-mce-selected","1")},pC=(e,t,n)=>_.some((()=>{const o=e.selection.getRng(),r=n.bind((({rng:s,isStartInTable:a})=>{const i=((c,d)=>_.from(c.dom.getParent(d,c.dom.isBlock)).map(S.fromDom))(e,a?s.endContainer:s.startContainer);s.deleteContents(),((c,d,m)=>{m.each((f=>{d?ct(f):(ws(f),c.selection.setCursorLocation(f.dom,0))}))})(e,a,i.filter(Ce(Fn,e.schema)));const l=a?t[0]:t[t.length-1];return rp(e,l,o,a),Fn(e.schema,l)?_.none():_.some(a?t.slice(1):t.slice(0,-1))})).getOr(t);mC(r),fC(e)})),vD=(e,t,n,o)=>_.some((()=>{const r=e.selection.getRng(),s=t[0],a=n[n.length-1];rp(e,s,r,!0),rp(e,a,r,!1);const i=Fn(e.schema,s)?t:t.slice(1),l=Fn(e.schema,a)?n:n.slice(0,-1);mC(i.concat(l)),o.deleteContents(),fC(e)})),sp=(e,t,n,o=!0)=>_.some((()=>{sC(e,t,n,o)})),yD=(e,t)=>_.some((()=>Os(e,!1,t))),gC=(e,t)=>$t(Zr(t,e),Nl),ap=(e,t)=>$t(Zr(t,e),wn("caption")),Wd=(e,t)=>_.some((()=>{ws(t),e.selection.setCursorLocation(t.dom,0)})),hC=(e,t)=>e?Ry(t):Wf(t),CD=(e,t,n)=>{const o=S.fromDom(e.getBody());return ap(o,n).fold((()=>((r,s,a,i)=>{const l=G.fromRangeStart(r.selection.getRng());return gC(a,i).bind((c=>Fn(r.schema,c,{checkRootAsContent:!1})?Wd(r,c):((d,m,f,g,h)=>yi(f,d.getBody(),h).bind((b=>gC(m,S.fromDom(b.getNode())).bind((v=>pe(v,g)?_.none():_.some(Ee))))))(r,a,s,c,l)))})(e,t,o,n).orThunk((()=>Vr(((r,s)=>{const a=G.fromRangeStart(r.selection.getRng());return hC(s,a)||Do(s,r.getBody(),a).exists((i=>hC(s,i)))})(e,t),Ee)))),(r=>((s,a,i,l)=>{const c=G.fromRangeStart(s.selection.getRng());return Fn(s.schema,l)?Wd(s,l):((d,m,f,g,h)=>yi(f,d.getBody(),h).fold((()=>_.some(Ee)),(b=>((v,y,E,N)=>zn(v.dom).bind((D=>Yo(v.dom).map((A=>y?E.isEqual(D)&&N.isEqual(A):E.isEqual(A)&&N.isEqual(D))))).getOr(!0))(g,f,h,b)?((v,y)=>Wd(v,y))(d,g):((v,y,E)=>ap(v,S.fromDom(E.getNode())).fold((()=>_.some(Ee)),(N=>Vr(!pe(N,y),Ee))))(m,g,b))))(s,i,a,l,c)})(e,t,o,r)))},ip=(e,t)=>{const n=S.fromDom(e.selection.getStart(!0)),o=xi(e);return e.selection.isCollapsed()&&o.length===0?CD(e,t,n):((r,s,a)=>{const i=S.fromDom(r.getBody()),l=r.selection.getRng();return a.length!==0?pC(r,a,_.none()):((c,d,m,f)=>ap(d,f).fold((()=>((g,h,b)=>bD(h,b).bind((v=>v.fold(Ce(sp,g),Ce(yD,g),Ce(pC,g),Ce(vD,g)))))(c,d,m)),(g=>((h,b)=>Wd(h,b))(c,g))))(r,i,l,s)})(e,n,o)},_a=(e,t)=>{let n=t;for(;n&&n!==e;){if(Xo(n)||Pt(n))return n;n=n.parentNode}return null},xD=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],wD=k.each,lp=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),o=r=>yt(xD,(s=>Jt(r,s)))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return wD(t.getAttribs(l),(d=>{const m=d.nodeName.toLowerCase();m==="style"||o(m)||(c[m]=t.getAttrib(l,m))})),c},i=(l,c)=>{for(const d in l)if(Me(l,d)){const m=c[d];if(jt(m)||l[d]!==m)return!1;delete c[d]}for(const d in c)if(Me(c,d))return!1;return!0};return xe(r)&&xe(s)&&(!i(a(r),a(s))||!i(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(s,"style"))))?!1:!Oo(r)&&!Oo(s)},isAttributeInternal:o}},bC=(e,t)=>{if(re(e))return{container:e,offset:t};const n=Pr.getNode(e,t);return re(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&re(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&re(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},Yl=St.DOM,vC=(e,t,n,o)=>{if(k.each(n.styles,((r,s)=>{e.setStyle(t,s,Ns(r,o))})),n.styles){const r=e.getAttrib(t,"style");r&&e.setAttrib(t,"data-mce-style",r)}},Ai=(e,t,n,o,r)=>{const s=e.dom;ht(n.onformat)&&n.onformat(t,n,o,r),vC(s,t,n,o),k.each(n.attributes,((a,i)=>{s.setAttrib(t,i,Ns(a,o))})),k.each(n.classes,(a=>{const i=Ns(a,o);s.hasClass(t,i)||s.addClass(t,i)}))},cp=_f,yC=(e,t,n)=>{const o=e.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(Bo(s)&&s.inherit===!1&&e.dom.is(t,s.selector))return!0}return!1},dp=(e,t,n,o,r)=>{const s=e.dom.getRoot();if(t===s)return!1;const a=e.dom.getParent(t,(i=>!!yC(e,i,n)||i.parentNode===s||!!Mo(e,i,n,o,!0)));return!!Mo(e,a,n,o,r)},Vd=(e,t,n)=>!(!un(n)||!cp(t,n.inline))||!(!Br(n)||!cp(t,n.block))||!!Bo(n)&&xe(t)&&e.is(t,n.selector),CC=(e,t,n,o,r,s)=>{const a=n[o],i=o==="attributes";if(ht(n.onmatch))return n.onmatch(t,n,o);if(a){if(Rc(a)){for(let l=0;l<a.length;l++)if(i?e.getAttrib(t,a[l]):Ad(e,t,a[l]))return!0}else for(const l in a)if(Me(a,l)){const c=i?e.getAttrib(t,l):Ad(e,t,l),d=Ns(a[l],s),m=kt(c)||ds(c);if(m&&kt(d))continue;if(r&&m&&!n.exact||(!r||n.exact)&&!cp(c,Nf(d,l)))return!1}}return!0},Mo=(e,t,n,o,r)=>{const s=e.formatter.get(n),a=e.dom;if(s&&xe(t))for(let i=0;i<s.length;i++){const l=s[i];if(Vd(e.dom,t,l)&&CC(a,t,l,"attributes",r,o)&&CC(a,t,l,"styles",r,o)){const c=l.classes;if(c){for(let d=0;d<c.length;d++)if(!e.dom.hasClass(t,Ns(c[d],o)))return}return l}}},up=(e,t,n,o,r)=>{if(o)return dp(e,o,t,n,r);if(o=e.selection.getNode(),dp(e,o,t,n,r))return!0;const s=e.selection.getStart();return!(s===o||!dp(e,s,t,n,r))},Gl=yn,xC=e=>{if(e){const t=new ln(e,e);for(let n=t.current();n;n=t.next())if(re(n))return n}return null},mp=e=>{const t=S.fromTag("span");return Ae(t,{id:pf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&X(t,S.fromText(Gl)),t},fp=(e,t,n)=>{const o=e.dom,r=e.selection;if(Av(t))Os(e,!1,S.fromDom(t),n,!0);else{const s=r.getRng(),a=o.getParent(t,o.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,d=s.endOffset,m=(f=>{const g=xC(f);return g&&g.data.charAt(0)===Gl&&g.deleteData(0,1),g})(t);o.remove(t,!0),i===m&&l>0&&s.setStart(m,l-1),c===m&&d>0&&s.setEnd(m,d-1),a&&o.isEmpty(a)&&ws(S.fromDom(a)),r.setRng(s)}},pp=(e,t,n)=>{const o=e.dom,r=e.selection;if(t)fp(e,t,n);else if(!(t=xa(e.getBody(),r.getStart())))for(;t=o.get(pf);)fp(e,t,n)},wC=(e,t)=>(e.appendChild(t),t),SC=(e,t)=>{var n;const o=qr(e,((s,a)=>wC(s,a.cloneNode(!1))),t),r=(n=o.ownerDocument)!==null&&n!==void 0?n:document;return wC(o,r.createTextNode(Gl))},EC=e=>im(e,ni(e).replace(new RegExp(`${Ft}$`)," ")),kC=(e,t)=>{const n=()=>{t===null||e.dom.isEmpty(t)||Xt(S.fromDom(t)).each((o=>{wt(o)?EC(o):Gc(o,(r=>wt(r))).each((r=>{wt(r)&&EC(r)}))}))};e.once("input",(o=>{o.data&&!wa(o.data)&&(o.isComposing?e.once("compositionend",(()=>{n()})):n())}))},SD=(e,t,n,o)=>{const r=e.dom,s=e.selection;let a=!1;const i=e.formatter.get(t);if(!i)return;const l=s.getRng(),c=l.startContainer,d=l.startOffset;let m=c;re(c)&&(d!==c.data.length&&(a=!0),m=m.parentNode);const f=[];let g;for(;m;){if(Mo(e,m,t,n,o)){g=m;break}m.nextSibling&&(a=!0),f.push(m),m=m.parentNode}if(g)if(a){const h=s.getBookmark();l.collapse(!0);let b=Sa(r,l,i,{includeTrailingSpace:!0});b=Id(b),e.formatter.remove(t,n,b,o),s.moveToBookmark(h)}else{const h=xa(e.getBody(),g),b=te(h)?r.getParents(g.parentNode,zt,h):[],v=mp(!1).dom;((N,D,A)=>{var R,P;const L=N.dom,j=L.getParent(A,Ce(Ef,N.schema));j&&L.isEmpty(j)?(R=A.parentNode)===null||R===void 0||R.replaceChild(D,A):((W=>{const B=Tn(W,"br"),I=Pe((H=>{const J=[];let oe=H.dom;for(;oe;)J.push(S.fromDom(oe)),oe=oe.lastChild;return J})(W).slice(-1),xs);B.length===I.length&&K(I,ct)})(S.fromDom(A)),L.isEmpty(A)?(P=A.parentNode)===null||P===void 0||P.replaceChild(D,A):L.insertAfter(D,A))})(e,v,h??g);const y=((N,D,A,R,P,L)=>{const j=N.formatter,W=N.dom,B=Pe(fn(j.get()),(H=>H!==R&&!hn(H,"removeformat"))),I=((H,J,oe)=>Qt(oe,((le,_e)=>{const Oe=((De,rt)=>Af(De,rt,(be=>{const Ne=F=>ht(F)||F.length>1&&F.charAt(0)==="%";return yt(["styles","attributes"],(F=>Ot(be,F).exists((z=>{const Q=se(z)?z:Ua(z);return yt(Q,Ne)}))))})))(H,_e);return H.formatter.matchNode(J,_e,{},Oe)?le.concat([_e]):le}),[]))(N,A,B);if(Pe(I,(H=>!((J,oe,le)=>{const _e=["inline","block","selector","attributes","styles","classes"],Oe=De=>er(De,((rt,be)=>yt(_e,(Ne=>Ne===be))));return Af(J,oe,(De=>{const rt=Oe(De);return Af(J,le,(be=>{const Ne=Oe(be);return((F,z,Q=Gt)=>it(Q).eq(F,z))(rt,Ne)}))}))})(N,H,R))).length>0){const H=A.cloneNode(!1);return W.add(D,H),j.remove(R,P,H,L),W.remove(H),_.some(H)}return _.none()})(e,v,g,t,n,o),E=SC([...f,...y.toArray(),...b],v);h&&fp(e,h,te(h)),s.setCursorLocation(E,1),kC(e,v),r.isEmpty(g)&&r.remove(g)}},_C=e=>{const t=mp(!1),n=SC(e,t.dom);return{caretContainer:t,caretPosition:G(n,0)}},NC=(e,t)=>{const{caretContainer:n,caretPosition:o}=_C(t);return dn(S.fromDom(e),n),ct(S.fromDom(e)),o},AC=(e,t)=>{if(Ro(t.dom))return!1;const n=e.schema.getTextInlineElements();return Me(n,Le(t))&&!Ro(t.dom)&&!ca(t.dom)},TC=["fontWeight","fontStyle","color","fontSize","fontFamily"],DC=(e,t)=>{const n=e.get(t);return se(n)?$t(n,(o=>un(o)&&o.inline==="span"&&(r=>Ue(r.styles)&&yt(fn(r.styles),(s=>Se(TC,s))))(o))):_.none()},RC=(e,t)=>io(t,G.fromRangeStart(e)).isNone(),OC=(e,t)=>Zn(t,G.fromRangeEnd(e)).exists((n=>!Ht(n.getNode())||Zn(t,n).isSome()))===!1,BC=e=>t=>oN(t)&&e.isEditable(t),PC=e=>Pe(e.getSelectedBlocks(),BC(e.dom)),gp=k.each,hp=e=>xe(e)&&!Oo(e)&&!Ro(e)&&!ca(e),LC=(e,t)=>{for(let n=e;n;n=n[t]){if(re(n)&&Eo(n.data))return e;if(xe(n)&&!Oo(n))return n}return e},MC=(e,t,n)=>{const o=lp(e),r=or(t)&&e.dom.isEditable(t),s=or(n)&&e.dom.isEditable(n);if(r&&s){const a=LC(t,"previousSibling"),i=LC(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return e.dom.remove(i),k.each(k.grep(i.childNodes),(l=>{a.appendChild(l)})),a}}return n},IC=(e,t,n,o)=>{var r;if(o&&t.merge_siblings!==!1){const s=(r=MC(e,kv(o),o))!==null&&r!==void 0?r:o;MC(e,s,kv(s,!0))}},bp=(e,t,n)=>{gp(e.childNodes,(o=>{hp(o)&&(t(o)&&n(o),o.hasChildNodes()&&bp(o,t,n))}))},FC=(e,t)=>n=>!(!n||!Ad(e,n,t)),jC=(e,t,n)=>o=>{e.setStyle(o,t,n),o.getAttribute("style")===""&&o.removeAttribute("style"),((r,s)=>{s.nodeName==="SPAN"&&r.getAttribs(s).length===0&&r.remove(s,!0)})(e,o)},Na=ho([{keep:[]},{rename:["name"]},{removed:[]}]),ED=/^(src|href|style)$/,vp=k.each,Kd=_f,zC=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),UC=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"];if(xe(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return re(o)&&n&&r>=o.data.length&&(o=new ln(o,e.getBody()).next()||o),re(o)&&!n&&r===0&&(o=new ln(o,e.getBody()).prev()||o),o},HC=(e,t)=>{const n=t?"firstChild":"lastChild",o=e[n];return(r=>/^(TR|TH|TD)$/.test(r.nodeName))(e)&&o?e.nodeName==="TR"&&o[n]||o:e},yp=(e,t,n,o)=>{var r;const s=e.create(n,o);return(r=t.parentNode)===null||r===void 0||r.insertBefore(s,t),s.appendChild(t),s},$C=(e,t,n,o,r)=>{const s=S.fromDom(t),a=S.fromDom(e.create(o,r)),i=n?st(s):In(s);return Re(a,i),n?(dn(s,a),q(a,s)):(M(s,a),X(a,s)),a.dom},qC=(e,t,n)=>{const o=t.parentNode;let r;const s=e.dom,a=Sn(e);Br(n)&&o===s.getRoot()&&(n.list_block&&Kd(t,n.list_block)||K(xn(t.childNodes),(i=>{wi(e,a,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=yp(s,i,a),s.setAttribs(r,gi(e))):r=null}))),(i=>Bo(i)&&un(i)&&ls(Ot(i,"mixed"),!0))(n)&&!Kd(n.inline,t)||s.remove(t,!0)},WC=(e,t,n)=>x(e)?{name:t,value:null}:{name:e,value:Ns(t,n)},VC=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},KC=(e,t,n,o,r)=>{let s=!1;vp(n.styles,((a,i)=>{const{name:l,value:c}=WC(i,a,o),d=Nf(c,l);(n.remove_similar||Ye(c)||!xe(r)||Kd(Ad(e,r,l),d))&&e.setStyle(t,l,""),s=!0})),s&&VC(e,t)},Cp=(e,t,n,o,r)=>{const s=e.dom,a=lp(e),i=e.schema;if(un(t)&&Em(i,t.inline)&&ua(i,o)&&o.parentElement===e.getBody())return qC(e,o,t),Na.removed();if(!t.ceFalseOverride&&o&&s.getContentEditableParent(o)==="false"||o&&!Vd(s,o,t)&&!((d,m)=>m.links&&d.nodeName==="A")(o,t))return Na.keep();const l=o,c=t.preserve_attributes;if(un(t)&&t.remove==="all"&&se(c)){const d=Pe(s.getAttribs(l),(m=>Se(c,m.name.toLowerCase())));if(s.removeAllAttribs(l),K(d,(m=>s.setAttrib(l,m.name,m.value))),d.length>0)return Na.rename("span")}if(t.remove!=="all"){KC(s,l,t,n,r),vp(t.attributes,((m,f)=>{const{name:g,value:h}=WC(f,m,n);if(t.remove_similar||Ye(h)||!xe(r)||Kd(s.getAttrib(r,g),h)){if(g==="class"){const b=s.getAttrib(l,g);if(b){let v="";if(K(b.split(/\s+/),(y=>{/mce\-\w+/.test(y)&&(v+=(v?" ":"")+y)})),v)return void s.setAttrib(l,g,v)}}if(ED.test(g)&&l.removeAttribute("data-mce-"+g),g==="style"&&rr(["li"])(l)&&s.getStyle(l,"list-style-type")==="none")return l.removeAttribute(g),void s.setStyle(l,"list-style-type","none");g==="class"&&l.removeAttribute("className"),l.removeAttribute(g)}})),vp(t.classes,(m=>{m=Ns(m,n),xe(r)&&!s.hasClass(r,m)||s.removeClass(l,m)}));const d=s.getAttribs(l);for(let m=0;m<d.length;m++){const f=d[m].nodeName;if(!a.isAttributeInternal(f))return Na.keep()}}return t.remove!=="none"?(qC(e,l,t),Na.removed()):Na.keep()},kD=(e,t,n,o)=>Cp(e,t,n,o,o).fold(ie(o),(r=>(e.dom.createFragment().appendChild(o),e.dom.rename(o,r))),ie(null)),XC=(e,t,n,o,r)=>{(o||e.selection.isEditable())&&((s,a,i,l,c)=>{const d=s.formatter.get(a),m=d[0],f=s.dom,g=s.selection,h=N=>{const D=((A,R,P,L,j)=>{let W;return R.parentNode&&K(Td(A.dom,R.parentNode).reverse(),(B=>{if(!W&&xe(B)&&B.id!=="_start"&&B.id!=="_end"){const I=Mo(A,B,P,L,j);I&&I.split!==!1&&(W=B)}})),W})(s,N,a,i,c);return((A,R,P,L,j,W,B,I)=>{var H,J;let oe,le;const _e=A.dom;if(P){const Oe=P.parentNode;for(let De=L.parentNode;De&&De!==Oe;De=De.parentNode){let rt=_e.clone(De,!1);for(let be=0;be<R.length&&(rt=kD(A,R[be],I,rt),rt!==null);be++);rt&&(oe&&rt.appendChild(oe),le||(le=rt),oe=rt)}B.mixed&&_e.isBlock(P)||(L=(H=_e.split(P,L))!==null&&H!==void 0?H:L),oe&&le&&((J=j.parentNode)===null||J===void 0||J.insertBefore(oe,j),le.appendChild(j),un(B)&&IC(A,B,0,oe))}return L})(s,d,D,N,N,0,m,i)},b=N=>yt(d,(D=>Ql(s,D,i,N,N))),v=N=>{const D=xn(N.childNodes),A=b(N)||yt(d,(P=>Vd(f,N,P))),R=N.parentNode;if(!A&&te(R)&&Tf(m)&&b(R),m.deep&&D.length)for(let P=0;P<D.length;P++)v(D[P]);K(["underline","line-through","overline"],(P=>{xe(N)&&s.dom.getStyle(N,"text-decoration")===P&&N.parentNode&&Nv(f,N.parentNode)===P&&Ql(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:P}},void 0,N)}))},y=N=>{const D=f.get(N?"_start":"_end");if(D){let A=D[N?"firstChild":"lastChild"];return(R=>Oo(R)&&xe(R)&&(R.id==="_start"||R.id==="_end"))(A)&&(A=A[N?"firstChild":"lastChild"]),re(A)&&A.data.length===0&&(A=N?D.previousSibling||D.nextSibling:D.nextSibling||D.previousSibling),f.remove(D,!0),A}return null},E=N=>{let D,A,R=Sa(f,N,d,{includeTrailingSpace:N.collapsed});if(m.split){if(R=Id(R),D=UC(s,R,!0),A=UC(s,R),D!==A){if(D=HC(D,!0),A=HC(A,!1),zC(f,D,A)){const L=_.from(D.firstChild).getOr(D);return h($C(f,L,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void y(!0)}if(zC(f,A,D)){const L=_.from(A.lastChild).getOr(A);return h($C(f,L,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void y(!1)}D=yp(f,D,"span",{id:"_start","data-mce-type":"bookmark"}),A=yp(f,A,"span",{id:"_end","data-mce-type":"bookmark"});const P=f.createRng();P.setStartAfter(D),P.setEndBefore(A),Hl(f,P,(L=>{K(L,(j=>{Oo(j)||Oo(j.parentNode)||h(j)}))})),h(D),h(A),D=y(!0),A=y()}else D=A=h(D);R.startContainer=D.parentNode?D.parentNode:D,R.startOffset=f.nodeIndex(D),R.endContainer=A.parentNode?A.parentNode:A,R.endOffset=f.nodeIndex(A)+1}Hl(f,R,(P=>{K(P,v)}))};if(l){if(Ul(l)){const N=f.createRng();N.setStartBefore(l),N.setEndAfter(l),E(N)}else E(l);wb(s,a,l,i)}else g.isCollapsed()&&un(m)&&!xi(s).length?SD(s,a,i,c):(Ev(s,(()=>xf(s,E)),(N=>un(m)&&up(s,a,i,N))),s.nodeChanged()),((N,D,A)=>{D==="removeformat"?K(PC(N.selection),(R=>{K(TC,(P=>N.dom.setStyle(R,P,""))),VC(N.dom,R)})):DC(N.formatter,D).each((R=>{K(PC(N.selection),(P=>KC(N.dom,P,R,A,null)))}))})(s,a,i),wb(s,a,l,i)})(e,t,n,o,r)},Ql=(e,t,n,o,r)=>Cp(e,t,n,o,r).fold(_t,(s=>(e.dom.rename(o,s),!0)),zt),YC=["fontsize","subscript","superscript"],_D=["strikethrough",...YC],xp=(e,t)=>yt(YC,(n=>((o,r,s)=>te(o.matchNode(r.dom,s,{},s==="fontsize")))(e,t,n))),ND=(e,t,n,o,r)=>{const s=a=>pe(S.fromDom(e.getRoot()),a)||e.isBlock(a.dom);K(t,(a=>{((i,l,c,d,m)=>{const f=on(l,i).filter(nt);return((g,h)=>{for(let b=g.length-1;b>=0;b--)if(h(g[b],b))return _.some(b);return _.none()})(f,c).map((g=>{const h=f[g];return{container:h,innerWrapper:d(h),outerWrappers:[...m(vn(h)).toArray(),...qt(f.slice(0,g),(b=>c(b)?m(b).toArray():[vn(b)]))]}}))})(s,a,n,o,r).each((({container:i,innerWrapper:l,outerWrappers:c})=>{e.split(i.dom,a.dom),((d,m,f,g)=>{K(gt(d),(h=>{nt(h)&&f(h)&&g(h).isNone()&&Yt(h)})),K(gt(d),(h=>X(m,h))),q(d,m)})(a,l,n,r),((d,m)=>{if(m.length>0){const f=m[m.length-1];dn(d,f);const g=Qt(m.slice(0,m.length-1),((h,b)=>(X(h,b),b)),f);X(g,d)}})(a,c)}))}))},GC=(e,t,n)=>{const o=(r=>{const s={},a=i=>{let l=r[i?"startContainer":"endContainer"],c=r[i?"startOffset":"endOffset"];if(xe(l)){const d=Yl.create("span",{"data-mce-type":"bookmark"});l.hasChildNodes()?c===l.childNodes.length?l.appendChild(d):l.insertBefore(d,l.childNodes[c]):l.appendChild(d),l=d,c=0}s[i?"startContainer":"endContainer"]=l,s[i?"startOffset":"endOffset"]=c};return a(!0),r.collapsed||a(),s})(e.selection.getRng());ND(e.dom,n,(r=>te(Mo(e,r.dom,t))),(r=>{const s=S.fromTag(Le(r)),a=Mo(e,r.dom,t,{});return te(a)&&(i=>!se(i.attributes)&&!se(i.styles))(a)&&Ai(e,s.dom,a),s}),(r=>{const s=Mo(e,r.dom,t,{});return te(s)?((a,i,l,c)=>Cp(a,i,{},c).fold((()=>_.some(c)),(d=>_.some(a.dom.rename(c,d))),_.none))(e,s,0,r.dom).map(S.fromDom):_.some(r)})),e.selection.setRng((r=>{const s=i=>{let l=r[i?"startContainer":"endContainer"],c=r[i?"startOffset":"endOffset"];if(l){if(xe(l)&&l.parentNode){const d=l;c=(m=>{var f;let g=(f=m.parentNode)===null||f===void 0?void 0:f.firstChild,h=0;for(;g;){if(g===m)return h;xe(g)&&g.getAttribute("data-mce-type")==="bookmark"||h++,g=g.nextSibling}return-1})(l),l=l.parentNode,Yl.remove(d),!l.hasChildNodes()&&Yl.isBlock(l)&&l.appendChild(Yl.create("br"))}r[i?"startContainer":"endContainer"]=l,r[i?"startOffset":"endOffset"]=c}};s(!0),s();const a=Yl.createRng();return a.setStart(r.startContainer,r.startOffset),r.endContainer&&a.setEnd(r.endContainer,r.endOffset),(i=>{const l=i.cloneRange(),c=bC(i.startContainer,i.startOffset);l.setStart(c.container,c.offset);const d=bC(i.endContainer,i.endOffset);return l.setEnd(d.container,d.offset),l})(a)})(o))},QC=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),JC=(e,t,n,o)=>{const r=n.name;for(let s=0,a=e.length;s<a;s++){const i=e[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=t.length;s<a;s++){const i=t[s],l=i.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},ZC=(e,t)=>{const n=(o,r)=>{Ct(o,(s=>{const a=xn(s.nodes);K(s.filter.callbacks,(i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(r?c.attr(s.filter.name)!==void 0:c.name===s.filter.name)&&!kt(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,t)}))}))};n(e.nodes,!1),n(e.attributes,!0)},e1=(e,t,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&(c=>{let d=c;for(;d=d.walk();)JC(s,a,d,l)})(i),l})(e,t,n);ZC(r,o)},wp=(e,t,n,o)=>{if((e.pad_empty_with_br||t.insert)&&n(o)){const r=new Rn("br",1);t.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Rn("#text",3)).value=Ft},t1=(e,t)=>{const n=e?.firstChild;return te(n)&&n===e.lastChild&&n.name===t},Jl=(e,t,n,o)=>o.isEmpty(t,n,(r=>((s,a)=>{const i=s.getElementRule(a.name);return i?.paddEmpty===!0})(e,r))),AD=e=>{let t;for(let n=e;n;n=n.parent){const o=n.attr("contenteditable");if(o==="false")break;o==="true"&&(t=n)}return _.from(t)},Sp=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const o=e.children();for(const r of o)n&&!t.isValidChild(n.name,r.name)&&Sp(r,t,n);e.unwrap()}},n1=(e,t,n,o=Ee)=>{const r=t.getTextBlockElements(),s=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=k.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=d=>d!==n&&!i[d.name];for(let d=0;d<e.length;d++){const m=e[d];let f,g,h;if(!m.parent||l.has(m))continue;if(r[m.name]&&m.parent.name==="li"){let v=m.next;for(;v&&r[v.name];)v.name="li",l.add(v),m.parent.insert(v,m.parent),v=v.next;m.unwrap();continue}const b=[m];for(f=m.parent;f&&!t.isValidChild(f.name,m.name)&&c(f);f=f.parent)b.push(f);if(f&&b.length>1)if(Ep(t,m,f))Sp(m,t);else{b.reverse(),g=b[0].clone(),o(g);let v=g;for(let y=0;y<b.length-1;y++){t.isValidChild(v.name,b[y].name)&&y>0?(h=b[y].clone(),o(h),v.append(h)):h=v;for(let E=b[y].firstChild;E&&E!==b[y+1];){const N=E.next;h.append(E),E=N}v=h}Jl(t,s,a,g)?f.insert(m,b[0],!0):(f.insert(g,b[0],!0),f.insert(m,g)),f=b[0],(Jl(t,s,a,f)||t1(f,"br"))&&f.empty().remove()}else if(m.parent){if(m.name==="li"){let v=m.prev;if(v&&(v.name==="ul"||v.name==="ol")){v.append(m);continue}if(v=m.next,v&&(v.name==="ul"||v.name==="ol")&&v.firstChild){v.insert(m,v.firstChild,!0);continue}const y=new Rn("ul",1);o(y),m.wrap(y);continue}if(t.isValidChild(m.parent.name,"div")&&t.isValidChild("div",m.name)){const v=new Rn("div",1);o(v),m.wrap(v)}else Sp(m,t)}}},Ep=(e,t,n=t.parent)=>!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&(t.name!=="a"||!(o=>{let r=o;for(;r;){if(r.name==="a")return!0;r=r.parent}return!1})(n))&&(!(o=>o.name==="summary")(n)||!QC(t)||n?.firstChild===t&&n?.lastChild===t)),Xd=e=>e.collapsed?e:(t=>{const n=G.fromRangeStart(t),o=G.fromRangeEnd(t),r=t.commonAncestorContainer;return Do(!1,r,o).map((s=>!Dr(n,o,r)&&Dr(n,s,r)?((a,i,l,c)=>{const d=document.createRange();return d.setStart(a,i),d.setEnd(l,c),d})(n.container(),n.offset(),s.container(),s.offset()):t)).getOr(t)})(e),o1=k.explode,r1=()=>{const e={};return{addFilter:(t,n)=>{K(o1(t),(o=>{Me(e,o)||(e[o]={name:o,callbacks:[]}),e[o].callbacks.push(n)}))},getFilters:()=>Ua(e),removeFilter:(t,n)=>{K(o1(t),(o=>{if(Me(e,o))if(te(n)){const r=e[o],s=Pe(r.callbacks,(a=>a!==n));s.length>0?r.callbacks=s:delete e[o]}else delete e[o]}))}}},TD=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),DD=(e,t,n)=>{var o;const r=Pm();t.convert_fonts_to_spans&&((s,a,i)=>{s.addNodeFilter("font",(l=>{K(l,(c=>{const d=a.parse(c.attr("style")),m=c.attr("color"),f=c.attr("face"),g=c.attr("size");m&&(d.color=m),f&&(d["font-family"]=f),g&&us(g).each((h=>{d["font-size"]=i[h-1]})),c.name="span",c.attr("style",a.serialize(d)),(h=>{K(["color","face","size"],(b=>{h.attr(b,null)}))})(c)}))}))})(e,r,k.explode((o=t.font_size_legacy_values)!==null&&o!==void 0?o:"")),((s,a,i)=>{s.addNodeFilter("strike",(l=>{const c=a.type!=="html4";K(l,(d=>{if(c)d.name="s";else{const m=i.parse(d.attr("style"));m["text-decoration"]="line-through",d.name="span",d.attr("style",i.serialize(m))}}))}))})(e,n,r)},kp=e=>{const[t,...n]=e.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(r){const s=r[2]===";base64",a=(l=>{try{return decodeURIComponent(l)}catch{return l}})(o),i=s?(l=>{const c=/([a-z0-9+\/=\s]+)/i.exec(l);return c?c[1]:""})(a):a;return _.some({type:r[1],data:i,base64Encoded:s})}return _.none()},s1=(e,t,n=!0)=>{let o=t;if(n)try{o=atob(t)}catch{return _.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return _.some(new Blob([r],{type:e}))},a1=e=>new Promise(((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result)},o.onerror=()=>{var r;n((r=o.error)===null||r===void 0?void 0:r.message)},o.readAsDataURL(e)}));let RD=0;const i1=(e,t,n)=>kp(e).bind((({data:o,type:r,base64Encoded:s})=>{if(t&&!s)return _.none();{const a=s?o:btoa(o);return n(a,r)}})),l1=(e,t,n)=>{const o=e.create("blobid"+RD++,t,n);return e.add(o),o},c1=(e,t,n=!1)=>i1(t,n,((o,r)=>_.from(e.getByData(o,r)).orThunk((()=>s1(r,o).map((s=>l1(e,s,o))))))),OD=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,BD=e=>_.from(e.match(OD)).bind((t=>$s(t,1))).map((t=>Jt(t,"www.")?t.substring(4):t)),d1=(e,t)=>{_.from(e.attr("src")).bind(BD).forall((n=>!Se(t,n)))&&e.attr("sandbox","")},_p=(e,t)=>Jt(e,`${t}/`),{entries:u1,setPrototypeOf:m1,isFrozen:PD,getPrototypeOf:LD,getOwnPropertyDescriptor:MD}=Object;let{freeze:lo,seal:Go,create:f1}=Object,{apply:Np,construct:Ap}=typeof Reflect<"u"&&Reflect;lo||(lo=function(e){return e}),Go||(Go=function(e){return e}),Np||(Np=function(e,t,n){return e.apply(t,n)}),Ap||(Ap=function(e,t){return new e(...t)});const Yd=uo(Array.prototype.forEach),ID=uo(Array.prototype.lastIndexOf),p1=uo(Array.prototype.pop),Zl=uo(Array.prototype.push),FD=uo(Array.prototype.splice),Gd=uo(String.prototype.toLowerCase),Tp=uo(String.prototype.toString),g1=uo(String.prototype.match),ec=uo(String.prototype.replace),jD=uo(String.prototype.indexOf),zD=uo(String.prototype.trim),dr=uo(Object.prototype.hasOwnProperty),co=uo(RegExp.prototype.test),tc=(h1=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ap(h1,t)});var h1;function uo(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Np(e,t,o)}}function Nt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gd;m1&&m1(e,null);let o=t.length;for(;o--;){let r=t[o];if(typeof r=="string"){const s=n(r);s!==r&&(PD(t)||(t[o]=s),r=s)}e[r]=!0}return e}function UD(e){for(let t=0;t<e.length;t++)dr(e,t)||(e[t]=null);return e}function es(e){const t=f1(null);for(const[n,o]of u1(e))dr(e,n)&&(Array.isArray(o)?t[n]=UD(o):o&&typeof o=="object"&&o.constructor===Object?t[n]=es(o):t[n]=o);return t}function nc(e,t){for(;e!==null;){const n=MD(e,t);if(n){if(n.get)return uo(n.get);if(typeof n.value=="function")return uo(n.value)}e=LD(e)}return function(){return null}}const b1=lo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Dp=lo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Rp=lo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),HD=lo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Op=lo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$D=lo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),v1=lo(["#text"]),y1=lo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Bp=lo(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),C1=lo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Qd=lo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),qD=Go(/\{\{[\w\W]*|[\w\W]*\}\}/gm),WD=Go(/<%[\w\W]*|[\w\W]*%>/gm),VD=Go(/\$\{[\w\W]*/gm),KD=Go(/^data-[\-\w.\u00B7-\uFFFF]+$/),XD=Go(/^aria-[\-\w]+$/),x1=Go(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),YD=Go(/^(?:\w+script|data):/i),GD=Go(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),w1=Go(/^html$/i),QD=Go(/^[a-z][.\w]*(-[.\w]+)+$/i);var S1=Object.freeze({__proto__:null,ARIA_ATTR:XD,ATTR_WHITESPACE:GD,CUSTOM_ELEMENT:QD,DATA_ATTR:KD,DOCTYPE_NAME:w1,ERB_EXPR:WD,IS_ALLOWED_URI:x1,IS_SCRIPT_OR_DATA:YD,MUSTACHE_EXPR:qD,TMPLIT_EXPR:VD});const JD=function(){return typeof window>"u"?null:window};var Pp=(function e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:JD();const n=$=>e($);if(n.version="3.2.6",n.removed=[],!t||!t.document||t.document.nodeType!==9||!t.Element)return n.isSupported=!1,n;let{document:o}=t;const r=o,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:c,NodeFilter:d,NamedNodeMap:m=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:g,trustedTypes:h}=t,b=c.prototype,v=nc(b,"cloneNode"),y=nc(b,"remove"),E=nc(b,"nextSibling"),N=nc(b,"childNodes"),D=nc(b,"parentNode");if(typeof i=="function"){const $=o.createElement("template");$.content&&$.content.ownerDocument&&(o=$.content.ownerDocument)}let A,R="";const{implementation:P,createNodeIterator:L,createDocumentFragment:j,getElementsByTagName:W}=o,{importNode:B}=r;let I={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported=typeof u1=="function"&&typeof D=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:H,ERB_EXPR:J,TMPLIT_EXPR:oe,DATA_ATTR:le,ARIA_ATTR:_e,IS_SCRIPT_OR_DATA:Oe,ATTR_WHITESPACE:De,CUSTOM_ELEMENT:rt}=S1;let{IS_ALLOWED_URI:be}=S1,Ne=null;const F=Nt({},[...b1,...Dp,...Rp,...Op,...v1]);let z=null;const Q=Nt({},[...y1,...Bp,...C1,...Qd]);let Y=Object.seal(f1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),fe=null,ue=null,ze=!0,We=!0,tt=!1,Lt=!0,Mt=!1,mo=!0,ye=!1,Qe=!1,lt=!1,Ve=!1,vt=!1,Dt=!1,he=!0,je=!1,At=!0,Tt=!1,Kt={},En=null;const fr=Nt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Un=null;const Uo=Nt({},["audio","video","img","source","image","track"]);let mn=null;const ja=Nt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Is="http://www.w3.org/1998/Math/MathML",zr="http://www.w3.org/2000/svg",Ho="http://www.w3.org/1999/xhtml";let Fs=Ho,rs=!1,Ur=null;const Ju=Nt({},[Is,zr,Ho],Tp);let fo=Nt({},["mi","mo","mn","ms","mtext"]),ss=Nt({},["annotation-xml"]);const za=Nt({},["title","style","font","a","script"]);let js=null;const uL=["application/xhtml+xml","text/html"];let Hn=null,Qi=null;const mL=o.createElement("form"),O_=function($){return $ instanceof RegExp||$ instanceof Function},Ph=function(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!Qi||Qi!==$){if($&&typeof $=="object"||($={}),$=es($),js=uL.indexOf($.PARSER_MEDIA_TYPE)===-1?"text/html":$.PARSER_MEDIA_TYPE,Hn=js==="application/xhtml+xml"?Tp:Gd,Ne=dr($,"ALLOWED_TAGS")?Nt({},$.ALLOWED_TAGS,Hn):F,z=dr($,"ALLOWED_ATTR")?Nt({},$.ALLOWED_ATTR,Hn):Q,Ur=dr($,"ALLOWED_NAMESPACES")?Nt({},$.ALLOWED_NAMESPACES,Tp):Ju,mn=dr($,"ADD_URI_SAFE_ATTR")?Nt(es(ja),$.ADD_URI_SAFE_ATTR,Hn):ja,Un=dr($,"ADD_DATA_URI_TAGS")?Nt(es(Uo),$.ADD_DATA_URI_TAGS,Hn):Uo,En=dr($,"FORBID_CONTENTS")?Nt({},$.FORBID_CONTENTS,Hn):fr,fe=dr($,"FORBID_TAGS")?Nt({},$.FORBID_TAGS,Hn):es({}),ue=dr($,"FORBID_ATTR")?Nt({},$.FORBID_ATTR,Hn):es({}),Kt=!!dr($,"USE_PROFILES")&&$.USE_PROFILES,ze=$.ALLOW_ARIA_ATTR!==!1,We=$.ALLOW_DATA_ATTR!==!1,tt=$.ALLOW_UNKNOWN_PROTOCOLS||!1,Lt=$.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Mt=$.SAFE_FOR_TEMPLATES||!1,mo=$.SAFE_FOR_XML!==!1,ye=$.WHOLE_DOCUMENT||!1,Ve=$.RETURN_DOM||!1,vt=$.RETURN_DOM_FRAGMENT||!1,Dt=$.RETURN_TRUSTED_TYPE||!1,lt=$.FORCE_BODY||!1,he=$.SANITIZE_DOM!==!1,je=$.SANITIZE_NAMED_PROPS||!1,At=$.KEEP_CONTENT!==!1,Tt=$.IN_PLACE||!1,be=$.ALLOWED_URI_REGEXP||x1,Fs=$.NAMESPACE||Ho,fo=$.MATHML_TEXT_INTEGRATION_POINTS||fo,ss=$.HTML_INTEGRATION_POINTS||ss,Y=$.CUSTOM_ELEMENT_HANDLING||{},$.CUSTOM_ELEMENT_HANDLING&&O_($.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Y.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$.CUSTOM_ELEMENT_HANDLING&&O_($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Y.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$.CUSTOM_ELEMENT_HANDLING&&typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Y.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Mt&&(We=!1),vt&&(Ve=!0),Kt&&(Ne=Nt({},v1),z=[],Kt.html===!0&&(Nt(Ne,b1),Nt(z,y1)),Kt.svg===!0&&(Nt(Ne,Dp),Nt(z,Bp),Nt(z,Qd)),Kt.svgFilters===!0&&(Nt(Ne,Rp),Nt(z,Bp),Nt(z,Qd)),Kt.mathMl===!0&&(Nt(Ne,Op),Nt(z,C1),Nt(z,Qd))),$.ADD_TAGS&&(Ne===F&&(Ne=es(Ne)),Nt(Ne,$.ADD_TAGS,Hn)),$.ADD_ATTR&&(z===Q&&(z=es(z)),Nt(z,$.ADD_ATTR,Hn)),$.ADD_URI_SAFE_ATTR&&Nt(mn,$.ADD_URI_SAFE_ATTR,Hn),$.FORBID_CONTENTS&&(En===fr&&(En=es(En)),Nt(En,$.FORBID_CONTENTS,Hn)),At&&(Ne["#text"]=!0),ye&&Nt(Ne,["html","head","body"]),Ne.table&&(Nt(Ne,["tbody"]),delete fe.tbody),$.TRUSTED_TYPES_POLICY){if(typeof $.TRUSTED_TYPES_POLICY.createHTML!="function")throw tc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw tc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=$.TRUSTED_TYPES_POLICY,R=A.createHTML("")}else A===void 0&&(A=(function(Je,Ie){if(typeof Je!="object"||typeof Je.createPolicy!="function")return null;let Rt=null;const It="data-tt-policy-suffix";Ie&&Ie.hasAttribute(It)&&(Rt=Ie.getAttribute(It));const Et="dompurify"+(Rt?"#"+Rt:"");try{return Je.createPolicy(Et,{createHTML:On=>On,createScriptURL:On=>On})}catch{return console.warn("TrustedTypes policy "+Et+" could not be created."),null}})(h,s)),A!==null&&typeof R=="string"&&(R=A.createHTML(""));lo&&lo($),Qi=$}},B_=Nt({},[...Dp,...Rp,...HD]),P_=Nt({},[...Op,...$D]),Hr=function($){Zl(n.removed,{element:$});try{D($).removeChild($)}catch{y($)}},Ji=function($,Je){try{Zl(n.removed,{attribute:Je.getAttributeNode($),from:Je})}catch{Zl(n.removed,{attribute:null,from:Je})}if(Je.removeAttribute($),$==="is")if(Ve||vt)try{Hr(Je)}catch{}else try{Je.setAttribute($,"")}catch{}},L_=function($){let Je=null,Ie=null;if(lt)$="<remove></remove>"+$;else{const Et=g1($,/^[\r\n\t ]+/);Ie=Et&&Et[0]}js==="application/xhtml+xml"&&Fs===Ho&&($='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>");const Rt=A?A.createHTML($):$;if(Fs===Ho)try{Je=new g().parseFromString(Rt,js)}catch{}if(!Je||!Je.documentElement){Je=P.createDocument(Fs,"template",null);try{Je.documentElement.innerHTML=rs?R:Rt}catch{}}const It=Je.body||Je.documentElement;return $&&Ie&&It.insertBefore(o.createTextNode(Ie),It.childNodes[0]||null),Fs===Ho?W.call(Je,ye?"html":"body")[0]:ye?Je.documentElement:It},M_=function($){return L.call($.ownerDocument||$,$,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Lh=function($){return $ instanceof f&&(typeof $.nodeName!="string"||typeof $.textContent!="string"||typeof $.removeChild!="function"||!($.attributes instanceof m)||typeof $.removeAttribute!="function"||typeof $.setAttribute!="function"||typeof $.namespaceURI!="string"||typeof $.insertBefore!="function"||typeof $.hasChildNodes!="function")},I_=function($){return typeof l=="function"&&$ instanceof l};function as($,Je,Ie){Yd($,(Rt=>{Rt.call(n,Je,Ie,Qi)}))}const F_=function($){let Je=null;if(as(I.beforeSanitizeElements,$,null),Lh($))return Hr($),!0;const Ie=Hn($.nodeName);if(as(I.uponSanitizeElement,$,{tagName:Ie,allowedTags:Ne}),mo&&$.hasChildNodes()&&!I_($.firstElementChild)&&co(/<[/\w!]/g,$.innerHTML)&&co(/<[/\w!]/g,$.textContent)||$.nodeType===7||mo&&$.nodeType===8&&co(/<[/\w]/g,$.data))return Hr($),!0;if(!Ne[Ie]||fe[Ie]){if(!fe[Ie]&&z_(Ie)&&(Y.tagNameCheck instanceof RegExp&&co(Y.tagNameCheck,Ie)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(Ie)))return!1;if(At&&!En[Ie]){const Rt=D($)||$.parentNode,It=N($)||$.childNodes;if(It&&Rt)for(let Et=It.length-1;Et>=0;--Et){const On=v(It[Et],!0);On.__removalCount=($.__removalCount||0)+1,Rt.insertBefore(On,E($))}}return Hr($),!0}return $ instanceof c&&!(function(Rt){let It=D(Rt);It&&It.tagName||(It={namespaceURI:Fs,tagName:"template"});const Et=Gd(Rt.tagName),On=Gd(It.tagName);return!!Ur[Rt.namespaceURI]&&(Rt.namespaceURI===zr?It.namespaceURI===Ho?Et==="svg":It.namespaceURI===Is?Et==="svg"&&(On==="annotation-xml"||fo[On]):!!B_[Et]:Rt.namespaceURI===Is?It.namespaceURI===Ho?Et==="math":It.namespaceURI===zr?Et==="math"&&ss[On]:!!P_[Et]:Rt.namespaceURI===Ho?!(It.namespaceURI===zr&&!ss[On])&&!(It.namespaceURI===Is&&!fo[On])&&!P_[Et]&&(za[Et]||!B_[Et]):!(js!=="application/xhtml+xml"||!Ur[Rt.namespaceURI]))})($)?(Hr($),!0):Ie!=="noscript"&&Ie!=="noembed"&&Ie!=="noframes"||!co(/<\/no(script|embed|frames)/i,$.innerHTML)?(Mt&&$.nodeType===3&&(Je=$.textContent,Yd([H,J,oe],(Rt=>{Je=ec(Je,Rt," ")})),$.textContent!==Je&&(Zl(n.removed,{element:$.cloneNode()}),$.textContent=Je)),as(I.afterSanitizeElements,$,null),!1):(Hr($),!0)},j_=function($,Je,Ie){if(he&&(Je==="id"||Je==="name")&&(Ie in o||Ie in mL))return!1;if(!(We&&!ue[Je]&&co(le,Je))){if(!(ze&&co(_e,Je))){if(!z[Je]||ue[Je]){if(!(z_($)&&(Y.tagNameCheck instanceof RegExp&&co(Y.tagNameCheck,$)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck($))&&(Y.attributeNameCheck instanceof RegExp&&co(Y.attributeNameCheck,Je)||Y.attributeNameCheck instanceof Function&&Y.attributeNameCheck(Je))||Je==="is"&&Y.allowCustomizedBuiltInElements&&(Y.tagNameCheck instanceof RegExp&&co(Y.tagNameCheck,Ie)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(Ie))))return!1}else if(!mn[Je]){if(!co(be,ec(Ie,De,""))){if((Je!=="src"&&Je!=="xlink:href"&&Je!=="href"||$==="script"||jD(Ie,"data:")!==0||!Un[$])&&!(tt&&!co(Oe,ec(Ie,De,"")))){if(Ie)return!1}}}}}return!0},z_=function($){return $!=="annotation-xml"&&g1($,rt)},U_=function($){as(I.beforeSanitizeAttributes,$,null);const{attributes:Je}=$;if(!Je||Lh($))return;const Ie={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0};let Rt=Je.length;for(;Rt--;){const It=Je[Rt],{name:Et,namespaceURI:On,value:zs}=It,$r=Hn(Et),Mh=zs;let to=Et==="value"?Mh:zD(Mh);if(Ie.attrName=$r,Ie.attrValue=to,Ie.keepAttr=!0,Ie.forceKeepAttr=void 0,as(I.uponSanitizeAttribute,$,Ie),to=Ie.attrValue,!je||$r!=="id"&&$r!=="name"||(Ji(Et,$),to="user-content-"+to),mo&&co(/((--!?|])>)|<\/(style|title)/i,to)){Ji(Et,$);continue}if(Ie.forceKeepAttr)continue;if(!Ie.keepAttr){Ji(Et,$);continue}if(!Lt&&co(/\/>/i,to)){Ji(Et,$);continue}Mt&&Yd([H,J,oe],($_=>{to=ec(to,$_," ")}));const H_=Hn($.nodeName);if(j_(H_,$r,to)){if(A&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!On)switch(h.getAttributeType(H_,$r)){case"TrustedHTML":to=A.createHTML(to);break;case"TrustedScriptURL":to=A.createScriptURL(to)}if(to!==Mh)try{On?$.setAttributeNS(On,Et,to):$.setAttribute(Et,to),Lh($)?Hr($):p1(n.removed)}catch{Ji(Et,$)}}else Ji(Et,$)}as(I.afterSanitizeAttributes,$,null)},fL=function $(Je){let Ie=null;const Rt=M_(Je);for(as(I.beforeSanitizeShadowDOM,Je,null);Ie=Rt.nextNode();)as(I.uponSanitizeShadowNode,Ie,null),F_(Ie),U_(Ie),Ie.content instanceof a&&$(Ie.content);as(I.afterSanitizeShadowDOM,Je,null)};return n.sanitize=function($){let Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ie=null,Rt=null,It=null,Et=null;if(rs=!$,rs&&($="<!-->"),typeof $!="string"&&!I_($)){if(typeof $.toString!="function")throw tc("toString is not a function");if(typeof($=$.toString())!="string")throw tc("dirty is not a string, aborting")}if(!n.isSupported)return $;if(Qe||Ph(Je),n.removed=[],typeof $=="string"&&(Tt=!1),Tt){if($.nodeName){const $r=Hn($.nodeName);if(!Ne[$r]||fe[$r])throw tc("root node is forbidden and cannot be sanitized in-place")}}else if($ instanceof l)Ie=L_("<!---->"),Rt=Ie.ownerDocument.importNode($,!0),Rt.nodeType===1&&Rt.nodeName==="BODY"||Rt.nodeName==="HTML"?Ie=Rt:Ie.appendChild(Rt);else{if(!Ve&&!Mt&&!ye&&$.indexOf("<")===-1)return A&&Dt?A.createHTML($):$;if(Ie=L_($),!Ie)return Ve?null:Dt?R:""}Ie&&lt&&Hr(Ie.firstChild);const On=M_(Tt?$:Ie);for(;It=On.nextNode();)F_(It),U_(It),It.content instanceof a&&fL(It.content);if(Tt)return $;if(Ve){if(vt)for(Et=j.call(Ie.ownerDocument);Ie.firstChild;)Et.appendChild(Ie.firstChild);else Et=Ie;return(z.shadowroot||z.shadowrootmode)&&(Et=B.call(r,Et,!0)),Et}let zs=ye?Ie.outerHTML:Ie.innerHTML;return ye&&Ne["!doctype"]&&Ie.ownerDocument&&Ie.ownerDocument.doctype&&Ie.ownerDocument.doctype.name&&co(w1,Ie.ownerDocument.doctype.name)&&(zs="<!DOCTYPE "+Ie.ownerDocument.doctype.name+`>
`+zs),Mt&&Yd([H,J,oe],($r=>{zs=ec(zs,$r," ")})),A&&Dt?A.createHTML(zs):zs},n.setConfig=function(){Ph(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),Qe=!0},n.clearConfig=function(){Qi=null,Qe=!1},n.isValidAttribute=function($,Je,Ie){Qi||Ph({});const Rt=Hn($),It=Hn(Je);return j_(Rt,It,Ie)},n.addHook=function($,Je){typeof Je=="function"&&Zl(I[$],Je)},n.removeHook=function($,Je){if(Je!==void 0){const Ie=ID(I[$],Je);return Ie===-1?void 0:FD(I[$],Ie,1)[0]}return p1(I[$])},n.removeHooks=function($){I[$]=[]},n.removeAllHooks=function(){I={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n})();const E1=k.each,ZD=k.trim,eR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],tR={ftp:21,http:80,https:443,mailto:25},nR=["img","video"],k1=(e,t,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?((r,s)=>te(r)?!r:!te(s)||!Se(nR,s))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))};class Qo{static parseDataUri(t){let n;const o=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(t,n,o={}){if(o.allow_script_urls)return!0;{const r=fa.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!k1(o,r,n)}}static getDocumentBaseUrl(t){var n;let o;return o=t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?(n=t.href)!==null&&n!==void 0?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(t,n={}){this.path="",this.directory="",t=ZD(t),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(r.source=t);const s=t.indexOf("//")===0;if(t.indexOf("/")!==0||s||(t=(o&&o.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const i=o?o.path:new Qo(document.location.href).directory;if(o?.protocol==="")t="//mce_host"+r.toAbsPath(i,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);a&&E1(eR,((i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[i]=c})),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||r.host!=="mce_host"||(r.port=o.port),r.host&&r.host!=="mce_host"||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new Qo(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(t,n){const o=new Qo(t,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?tR[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let o,r,s=0,a="";const i=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length){for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}}if(i.length<l.length){for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}}if(s===1)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(t,n){let o=0;const r=/\/$/.test(n)?"/":"",s=t.split("/"),a=n.split("/"),i=[];E1(s,(m=>{m&&i.push(m)}));const l=[];for(let m=a.length-1;m>=0;m--)a[m].length!==0&&a[m]!=="."&&(a[m]!==".."?o>0?o--:l.push(a[m]):o++);const c=i.length-o;let d;return d=c<=0?wo(l).join("/"):i.slice(0,c).join("/")+"/"+wo(l).join("/"),d.indexOf("/")!==0&&(d="/"+d),r&&d.lastIndexOf("/")!==d.length-1&&(d+=r),d}getURI(t=!1){let n;return this.source&&!t||(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const oR=k.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Lp="data-mce-type";let _1=0;const N1=(e,t,n,o,r)=>{var s,a,i,l;const c=t.validate,d=n.getSpecialElements();e.nodeType===8&&(!t.allow_conditional_comments&&/^\[if/i.test((s=e.nodeValue)!==null&&s!==void 0?s:"")&&(e.nodeValue=" "+e.nodeValue),t.sanitize&&t.allow_html_in_comments&&we(e.nodeValue)&&(e.nodeValue=(v=>v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))(e.nodeValue)));const m=(a=r?.tagName)!==null&&a!==void 0?a:e.nodeName.toLowerCase();if(o!=="html"&&n.isValid(o))return void(te(r)&&(r.allowedTags[m]=!0));if(e.nodeType!==1||m==="body")return;const f=S.fromDom(e),g=pt(f,Lp),h=ft(f,"data-mce-bogus");if(!g&&we(h))return void(h==="all"?ct(f):Yt(f));const b=n.getElementRule(m);if(!c||b){if(te(r)&&(r.allowedTags[m]=!0),c&&b&&!g){if(K((i=b.attributesForced)!==null&&i!==void 0?i:[],(v=>{Te(f,v.name,v.value==="{$uid}"?"mce_"+_1++:v.value)})),K((l=b.attributesDefault)!==null&&l!==void 0?l:[],(v=>{pt(f,v.name)||Te(f,v.name,v.value==="{$uid}"?"mce_"+_1++:v.value)})),b.attributesRequired&&!yt(b.attributesRequired,(v=>pt(f,v)))||b.removeEmptyAttrs&&mt(f))return void Yt(f);b.outputName&&b.outputName!==m&&Ko(f,b.outputName)}}else Me(d,m)?ct(f):Yt(f)},A1=(e,t,n,o,r,s)=>n!=="html"&&!da(o)||!(r in oR&&k1(e,s,o))&&(!e.validate||t.isValid(o,r)||Jt(r,"data-")||Jt(r,"aria-")),T1=(e,t)=>e.hasAttribute(Lp)&&(t==="id"||t==="class"||t==="style"),D1=(e,t)=>e in t.getBoolAttrs(),rR=(e,t,n,o)=>{const{attributes:r}=e;for(let s=r.length-1;s>=0;s--){const a=r[s],i=a.name,l=a.value;A1(t,n,o,e.tagName.toLowerCase(),i,l)||T1(e,i)?D1(i,n)&&e.setAttribute(i,i):e.removeAttribute(i)}},sR=(e,t,n)=>{const o=Pp();return o.addHook("uponSanitizeElement",((r,s)=>{N1(r,e,t,n.track(r),s)})),o.addHook("uponSanitizeAttribute",((r,s)=>{((a,i,l,c,d)=>{const m=a.tagName.toLowerCase(),{attrName:f,attrValue:g}=d;d.keepAttr=A1(i,l,c,m,f,g),d.keepAttr?(d.allowedAttributes[f]=!0,D1(f,l)&&(d.attrValue=f),i.allow_svg_data_urls&&Jt(g,"data:image/svg+xml")&&(d.forceKeepAttr=!0)):T1(a,f)&&(d.forceKeepAttr=!0)})(r,e,t,n.current(),s)})),o},aR=(e,t)=>{const n=Pp(),o=t.allow_mathml_annotation_encodings,r=se(o)&&o.length>0;n.addHook("uponSanitizeElement",((s,a)=>{var i;const l=(i=a.tagName)!==null&&i!==void 0?i:s.nodeName.toLowerCase();((c,d)=>r&&d==="semantics"?_.some(!0):d==="annotation"?_.some(xe(c)&&(m=>{const f=m.getAttribute("encoding");return r&&we(f)&&Se(o,f)})(c)):se(t.extended_mathml_elements)&&t.extended_mathml_elements.includes(d)?_.from(!0):_.none())(s,l).each((c=>{a.allowedTags[l]=c,!c&&t.sanitize&&xe(s)&&s.remove()}))})),n.addHook("uponSanitizeAttribute",((s,a)=>{se(t.extended_mathml_attributes)&&t.extended_mathml_attributes.includes(a.attrName)&&(a.forceKeepAttr=!0)})),n.sanitize(e,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})},iR=e=>t=>{const n=a0(t);if(n==="svg")(o=>{const r=["type","href","role","arcrole","title","show","actuate","label","from","to"].map((a=>`xlink:${a}`)),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:r};Pp().sanitize(o,s)})(t);else{if(n!=="math")throw new Error("Not a namespace element");aR(t,e)}},R1=["script","style","template","param"],O1=k.makeMap,B1=k.extend,P1=(e,t,n,o,r)=>{const s=e.name,a=s in n&&s!=="title"&&s!=="textarea"&&s!=="noscript",i=t.childNodes;for(let l=0,c=i.length;l<c;l++){const d=i[l],m=new Rn(d.nodeName.toLowerCase(),d.nodeType);if(xe(d)){const f=d.attributes;for(let g=0,h=f.length;g<h;g++){const b=f[g];m.attr(b.name,b.value)}da(m.name)&&(o(d),m.value=d.innerHTML)}else re(d)?(m.value=d.data,a&&(m.raw=!0)):ys(d)?m.value=r?TD(d.data):d.data:(Z_(d)||eN(d))&&(m.value=d.data);if(n0(d)){const f=Rn.create("#text");f.value=d.innerHTML,f.raw=!0,m.append(f)}else da(m.name)||P1(m,d,n,o,r);e.append(m)}},Ti=(e={},t=Cs())=>{const n=r1(),o=r1(),r={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},s=new DOMParser,a=((b,v)=>{const y=(()=>{const E=qo(),N=()=>E.get().map(a0).getOr("html");return{track:D=>(Cm(D)?E.set(D):E.get().exists((A=>!A.contains(D)))&&E.clear(),N()),current:N,reset:()=>{E.clear()}}})();if(b.sanitize){const E=sR(b,v,y);return{sanitizeHtmlElement:(D,A)=>{E.sanitize(D,((R,P)=>{const L={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return L.PARSER_MEDIA_TYPE=P,R.allow_script_urls?L.ALLOWED_URI_REGEXP=/.*/:R.allow_html_data_urls&&(L.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),L})(b,A)),E.removed=[],y.reset()},sanitizeNamespaceElement:iR(b)}}return{sanitizeHtmlElement:(E,N)=>{const D=document.createNodeIterator(E,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let A;for(;A=D.nextNode();){const R=y.track(A);N1(A,b,v,R),xe(A)&&rR(A,b,v,R)}y.reset()},sanitizeNamespaceElement:Ee}})(r,t),i=n.addFilter,l=n.getFilters,c=n.removeFilter,d=o.addFilter,m=o.getFilters,f=o.removeFilter,g=(b,v)=>{const y=we(v.attr(Lp)),E=v.type===1&&!Me(b,v.name)&&!_m(t,v)&&!da(v.name);return v.type===3||E&&!y},h={schema:t,addAttributeFilter:d,getAttributeFilters:m,removeAttributeFilter:f,addNodeFilter:i,getNodeFilters:l,removeNodeFilter:c,parse:(b,v={})=>{var y;const E=r.validate,N=(y=v.context)!==null&&y!==void 0?y:r.root_name,D=((H,J,oe="html")=>{const le=oe==="xhtml"?"application/xhtml+xml":"text/html",_e=Me(t.getSpecialElements(),J.toLowerCase()),Oe=_e?`<${J}>${H}</${J}>`:H,De=s.parseFromString(oe==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Oe}</body></html>`:/^[\s]*<head/i.test(H)||/^[\s]*<html/i.test(H)||/^[\s]*<!DOCTYPE/i.test(H)?`<html>${Oe}</html>`:`<body>${Oe}</body>`,le).body;return a.sanitizeHtmlElement(De,le),_e?De.firstChild:De})(b,N,v.format);wm(t,D);const A=new Rn(N,11);P1(A,D,t.getSpecialElements(),a.sanitizeNamespaceElement,r.sanitize&&r.allow_html_in_comments),D.innerHTML="";const[R,P]=((H,J,oe,le)=>{const _e=oe.validate,Oe=J.getNonEmptyElements(),De=J.getWhitespaceElements(),rt=B1(O1(R1),J.getBlockElements()),be=_0(J),Ne=/[ \t\r\n]+/g,F=/^[ \t\r\n]+/,z=/[ \t\r\n]+$/,Q=ue=>{let ze=ue.parent;for(;te(ze);){if(ze.name in De)return!0;ze=ze.parent}return!1},Y=ue=>ue.name in rt||_m(J,ue)||da(ue.name)&&ue.parent===H,fe=(ue,ze)=>{const We=ze?ue.prev:ue.next;return!te(We)&&!kt(ue.parent)&&Y(ue.parent)&&(ue.parent!==H||le.isRootContent===!0)};return[ue=>{var ze;if(ue.type===3&&!Q(ue)){let We=(ze=ue.value)!==null&&ze!==void 0?ze:"";We=We.replace(Ne," "),(((tt,Lt)=>te(tt)&&(Lt(tt)||tt.name==="br"))(ue.prev,Y)||fe(ue,!0))&&(We=We.replace(F,"")),We.length===0||We===" "&&ue.prev&&ue.prev.type===8&&ue.next&&ue.next.type===8?ue.remove():ue.value=We}},ue=>{var ze;if(ue.type===1){const We=J.getElementRule(ue.name);if(_e&&We){const tt=Jl(J,Oe,De,ue);We.paddInEmptyBlock&&tt&&(Lt=>{let Mt=Lt;for(;te(Mt);){if(Mt.name in be)return Jl(J,Oe,De,Mt);Mt=Mt.parent}return!1})(ue)?wp(oe,le,Y,ue):We.removeEmpty&&tt?Y(ue)?ue.remove():ue.unwrap():We.paddEmpty&&(tt||(Lt=>{var Mt;return t1(Lt,"#text")&&((Mt=Lt?.firstChild)===null||Mt===void 0?void 0:Mt.value)===Ft})(ue))&&wp(oe,le,Y,ue)}}else if(ue.type===3&&!Q(ue)){let We=(ze=ue.value)!==null&&ze!==void 0?ze:"";(ue.next&&Y(ue.next)||fe(ue,!1))&&(We=We.replace(z,"")),We.length===0?ue.remove():ue.value=We}}]})(A,t,r,v),L=[],j=E?H=>((J,oe)=>{Ep(t,J)&&oe.push(J)})(H,L):Ee,W={nodes:{},attributes:{}},B=H=>JC(l(),m(),H,W);((H,J,oe)=>{const le=[];for(let _e=H,Oe=_e;_e;Oe=_e,_e=_e.walk()){const De=_e;K(J,(rt=>rt(De))),kt(De.parent)&&De!==H?_e=Oe:le.push(De)}for(let _e=le.length-1;_e>=0;_e--){const Oe=le[_e];K(oe,(De=>De(Oe)))}})(A,[R,B],[P,j]),L.reverse(),E&&L.length>0&&(v.context?v.invalid=!0:n1(L,t,A,B));const I=((H,J)=>{var oe;const le=(oe=J.forced_root_block)!==null&&oe!==void 0?oe:H.forced_root_block;return le===!1?"":le===!0?"p":le})(r,v);return I&&(A.name==="body"||v.isRootContent)&&((H,J)=>{const oe=B1(O1(R1),t.getBlockElements()),le=/^[ \t\r\n]+/,_e=/[ \t\r\n]+$/;let Oe=H.firstChild,De=null;const rt=be=>{var Ne,F;be&&(Oe=be.firstChild,Oe&&Oe.type===3&&(Oe.value=(Ne=Oe.value)===null||Ne===void 0?void 0:Ne.replace(le,"")),Oe=be.lastChild,Oe&&Oe.type===3&&(Oe.value=(F=Oe.value)===null||F===void 0?void 0:F.replace(_e,"")))};if(t.isValidChild(H.name,J.toLowerCase())){for(;Oe;){const be=Oe.next;g(oe,Oe)?(De||(De=new Rn(J,1),De.attr(r.forced_root_block_attrs),H.insert(De,Oe)),De.append(Oe)):(rt(De),De=null),Oe=be}rt(De)}})(A,I),v.invalid||ZC(W,v),A}};return((b,v)=>{var y,E;const N=b.schema;b.addAttributeFilter("href",(P=>{let L=P.length;const j=W=>{const B=W?k.trim(W):"";return/\b(noopener)\b/g.test(B)?B:(I=>I.split(" ").filter((H=>H.length>0)).concat(["noopener"]).sort().join(" "))(B)};if(!v.allow_unsafe_link_target)for(;L--;){const W=P[L];W.name==="a"&&W.attr("target")==="_blank"&&W.attr("rel",j(W.attr("rel")))}})),v.allow_html_in_named_anchor||b.addAttributeFilter("id,name",(P=>{let L,j,W,B,I=P.length;for(;I--;)if(B=P[I],B.name==="a"&&B.firstChild&&!B.attr("href"))for(W=B.parent,L=B.lastChild;L&&W;)j=L.prev,W.insert(L,B),L=j})),v.fix_list_elements&&b.addNodeFilter("ul,ol",(P=>{let L,j,W=P.length;for(;W--;)if(L=P[W],j=L.parent,j&&(j.name==="ul"||j.name==="ol"))if(L.prev&&L.prev.name==="li")L.prev.append(L);else{const B=new Rn("li",1);B.attr("style","list-style-type: none"),L.wrap(B)}}));const D=N.getValidClasses();v.validate&&D&&b.addAttributeFilter("class",(P=>{var L;let j=P.length;for(;j--;){const W=P[j],B=(L=W.attr("class"))!==null&&L!==void 0?L:"",I=k.explode(B," ");let H="";for(let J=0;J<I.length;J++){const oe=I[J];let le=!1,_e=D["*"];_e&&_e[oe]&&(le=!0),_e=D[W.name],!le&&_e&&_e[oe]&&(le=!0),le&&(H&&(H+=" "),H+=oe)}H.length||(H=null),W.attr("class",H)}})),((P,L)=>{const{blob_cache:j}=L;if(j){const W=B=>{const I=B.attr("src");(H=>H.attr("src")===p.transparentSrc||te(H.attr("data-mce-placeholder")))(B)||(H=>te(H.attr("data-mce-bogus")))(B)||kt(I)||c1(j,I,!0).each((H=>{B.attr("src",H.blobUri())}))};P.addAttributeFilter("src",(B=>K(B,W)))}})(b,v);const A=(y=v.sandbox_iframes)!==null&&y!==void 0&&y,R=So((E=v.sandbox_iframes_exclusions)!==null&&E!==void 0?E:[]);v.convert_unsafe_embeds&&b.addNodeFilter("object,embed",(P=>K(P,(L=>{L.replace((({type:j,src:W,width:B,height:I}={},H,J)=>{const oe=(_e=>jt(_e)?"iframe":_p(_e,"image")?"img":_p(_e,"video")?"video":_p(_e,"audio")?"audio":"iframe")(j),le=new Rn(oe,1);return le.attr(oe==="audio"?{src:W}:{src:W,width:B,height:I}),oe!=="audio"&&oe!=="video"||le.attr("controls",""),oe==="iframe"&&H&&d1(le,J),le})({type:L.attr("type"),src:L.name==="object"?L.attr("data"):L.attr("src"),width:L.attr("width"),height:L.attr("height")},A,R))})))),A&&b.addNodeFilter("iframe",(P=>K(P,(L=>d1(L,R)))))})(h,r),((b,v,y)=>{v.inline_styles&&DD(b,v,y)})(h,r,t),h},Jd=e=>e instanceof Rn,L1=(e,t,n)=>{const o=(s=>Jd(s)?As({validate:!1}).serialize(s):s)(e),r=t(o);if(r.isDefaultPrevented())return r;if(Jd(e)){if(r.content!==o){const s=Ti({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:e.name});return{...r,content:s}}return{...r,content:e}}return r},M1=e=>({sanitize:$b(e),sandbox_iframes:Wb(e),sandbox_iframes_exclusions:af(e)}),I1=(e,t)=>{if(t.no_events)return gn.value(t);{const n=((o,r)=>o.dispatch("BeforeGetContent",r))(e,t);return n.isDefaultPrevented()?gn.error(Eb(e,{content:"",...n}).content):gn.value(n)}},F1=(e,t,n)=>n.no_events?t:L1(t,(r=>Eb(e,{...n,content:r})),M1(e)).content,Mp=(e,t)=>{if(t.no_events)return gn.value(t);{const n=L1(t.content,(o=>((r,s)=>r.dispatch("BeforeSetContent",s))(e,{...t,content:o})),M1(e));return n.isDefaultPrevented()?(Sb(e,n),gn.error(void 0)):gn.value(n)}},Ip=(e,t,n)=>{n.no_events||Sb(e,{...n,content:t})},lR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),cR=[],dR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),j1=[{name:"export",replacedWith:"Export to PDF"}],z1=(e,t)=>{const n=Pe(t,(o=>Me(e,o)));return Wr(n)},uR=e=>{const t=z1(e,lR),n=e.forced_root_block;return n!==!1&&n!==""||t.push("forced_root_block (false only)"),Wr(t)},mR=e=>z1(e,cR),U1=(e,t)=>{const n=k.makeMap(e.plugins," "),o=Pe(t,(r=>Me(n,r)));return Wr(o)},fR=e=>U1(e,dR),pR=e=>U1(e,j1.map((t=>t.name))),gR=e=>$t(j1,(t=>t.name===e)).fold((()=>e),(t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e)),hR={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},H1=e=>{console.warn(hR[e],new Error().stack)},$1=e=>e.dom.length===0?(ct(e),_.none()):_.some(e),q1=(e,t,n,o,r)=>{e.bind((s=>((o?Qf:Ud)(s.dom,o?s.dom.length:0,r),t.filter(wt).map((a=>((i,l,c,d,m)=>{const f=i.dom,g=l.dom,h=d?f.length:g.length;d?(Jf(f,g,m,!1,!d),c.setStart(g,h)):(Jf(g,f,m,!1,!d),c.setEnd(g,h))})(s,a,n,o,r)))))).orThunk((()=>((a,i)=>a.filter((l=>Ei.isBookmarkNode(l.dom))).bind(i?Gn:Xt))(t,o).or(t).filter(wt).map((a=>((i,l,c)=>{bn(i).each((d=>{const m=i.dom;l&&Vl(d,G(m,0),c)?Ud(m,0,c):!l&&Kl(d,G(m,m.length),c)&&Qf(m,m.length,c)}))})(a,o,r)))))},Zd=(e,t,n={})=>{const o=((r,s)=>({format:"html",...r,set:!0,selection:!0,content:s}))(n,t);Mp(e,o).each((r=>{const s=((i,l)=>{if(l.format!=="raw"){const c=i.selection.getRng(),d=i.dom.getParent(c.commonAncestorContainer,i.dom.isBlock),m=d?{context:d.nodeName.toLowerCase()}:{},f=i.parser.parse(l.content,{forced_root_block:!1,...m,...l});return As({validate:!1},i.schema).serialize(f)}return l.content})(e,r),a=e.selection.getRng();((i,l,c)=>{const d=_.from(l.firstChild).map(S.fromDom),m=_.from(l.lastChild).map(S.fromDom);i.deleteContents(),i.insertNode(l);const f=d.bind(Xt).filter(wt).bind($1),g=m.bind(Gn).filter(wt).bind($1);q1(f,d,i,!0,c),q1(g,m,i,!1,c),i.collapse(!1)})(a,a.createContextualFragment(s),e.schema),e.selection.setRng(a),$l(e,a),Ip(e,s,r)}))},bR=(e,t)=>{let n=t.firstChild,o=t.lastChild;return n&&n.name==="meta"&&(n=n.next),o&&o.attr("id")==="mce_marker"&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return te(s)&&(s.isEmpty(a)||((i,l)=>i.getBlockElements()[l.name]&&(c=>te(c.firstChild)&&c.firstChild===c.lastChild)(l)&&(c=>c.name==="br"||c.value===Ft)(l.firstChild))(r,s))})(e,o)&&(o=o?.prev),!(!n||n!==o||n.name!=="ul"&&n.name!=="ol")},vR=e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||te((t=n)==null?void 0:t.firstChild)&&t.firstChild===t.lastChild&&(o=>o.data===Ft||Ht(o))(t.firstChild))?e.slice(0,-1):e;var t,n},Fp=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},W1=(e,t)=>{const n=G.after(e),o=Or(t).prev(n);return o?o.toRange():null},yR=(e,t,n,o)=>{const r=((m,f,g)=>{const h=f.serialize(g);return(b=>{var v,y;const E=b.firstChild,N=b.lastChild;return E&&E.nodeName==="META"&&((v=E.parentNode)===null||v===void 0||v.removeChild(E)),N&&N.id==="mce_marker"&&((y=N.parentNode)===null||y===void 0||y.removeChild(N)),b})(m.createFragment(h))})(t,e,o),s=Fp(t,n.startContainer),a=vR((i=r.firstChild,Pe((l=i?.childNodes)!==null&&l!==void 0?l:[],(m=>m.nodeName==="LI"))));var i,l;const c=t.getRoot(),d=m=>{const f=G.fromRangeStart(n),g=Or(t.getRoot()),h=m===1?g.prev(f):g.next(f),b=h?.getNode();return!b||Fp(t,b)!==s};return s?d(1)?((m,f,g)=>{const h=m.parentNode;return h&&k.each(f,(b=>{h.insertBefore(b,m)})),((b,v)=>{const y=G.before(b),E=Or(v).next(y);return E?E.toRange():null})(m,g)})(s,a,c):d(2)?((m,f,g,h)=>(h.insertAfter(f.reverse(),m),W1(f[0],g)))(s,a,c,t):((m,f,g,h)=>{const b=((y,E)=>{const N=E.cloneRange(),D=E.cloneRange();return N.setStartBefore(y),D.setEndAfter(y),[N.cloneContents(),D.cloneContents()]})(m,h),v=m.parentNode;return v&&(v.insertBefore(b[0],m),k.each(f,(y=>{v.insertBefore(y,m)})),v.insertBefore(b[1],m),v.removeChild(m)),W1(f[f.length-1],g)})(s,a,c,n):null},CR=["pre"],jp=rd,xR=(e,t)=>{const n=e.schema.getTextInlineElements(),o=e.dom;if(t){const r=e.getBody(),s=lp(e),a="*[data-mce-fragment]",i=o.select(a);k.each(i,(l=>{const c=f=>te(n[f.nodeName.toLowerCase()]),d=f=>f.childNodes.length===1;if(!Ny(o,m=l)&&!((f,g)=>Ny(f,g)&&yt(Ni(f,g),(h=>(b=>ky.has(b))(h))))(o,m)&&c(l)&&d(l)){const f=Ni(o,l),g=(y,E)=>no(y,(N=>Se(E,N))),h=y=>d(l)&&o.is(y,a)&&c(y)&&(y.nodeName===l.nodeName&&g(f,Ni(o,y))||h(y.children[0])),b=y=>te(y)&&y!==r&&(s.compare(l,y)||b(y.parentElement)),v=y=>te(y)&&y!==r&&o.is(y,a)&&(((E,N,D)=>{const A=Ni(E,N),R=Ni(E,D),P=L=>{var j,W;const B=(j=E.getStyle(N,L))!==null&&j!==void 0?j:"",I=(W=E.getStyle(D,L))!==null&&W!==void 0?W:"";return Eo(B)&&Eo(I)&&B!==I};return yt(A,(L=>{const j=W=>yt(W,(B=>B===L));if(!j(R)&&j(_y)){const W=Pe(R,(B=>yt(_y,(I=>Jt(B,I)))));return yt(W,P)}return P(L)}))})(o,l,y)||v(y.parentElement));(h(l.children[0])||b(l.parentElement)&&!v(l.parentElement))&&o.remove(l,!0)}var m})),((l,c)=>{const d=Pe(c,(m=>xp(l.formatter,m)));GC(l,"strikethrough",d)})(e,An(i))}},wR=(e,t,n)=>{var o;const r=e.selection,s=e.dom,a=e.parser,i=n.merge,l=As({validate:!0},e.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=vo(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,c);let d=r.getRng();const m=d.startContainer,f=e.getBody();m===f&&r.isCollapsed()&&s.isBlock(f.firstChild)&&((E,N)=>te(N)&&!E.schema.getVoidElements()[N.nodeName])(e,f.firstChild)&&s.isEmpty(f.firstChild)&&(d=s.createRng(),d.setStart(f.firstChild,0),d.setEnd(f.firstChild,0),r.setRng(d)),r.isCollapsed()||(E=>{const N=E.dom,D=Xd(E.selection.getRng());E.selection.setRng(D);const A=N.getParent(D.startContainer,jp);((P,L,j)=>!!te(j)&&j===P.getParent(L.endContainer,jp)&&yf(S.fromDom(j),L))(N,D,A)?sp(E,D,S.fromDom(A)):wf(D,tN)||(R=D,wf(R,re))?D.deleteContents():E.getDoc().execCommand("Delete",!1);var R})(e);const g=r.getNode(),h={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},b=a.parse(t,h);if(n.paste===!0&&bR(e.schema,b)&&((E,N)=>!!Fp(E,N))(s,g))return d=yR(l,s,r.getRng(),b),d&&r.setRng(d),t;n.paste===!0&&((E,N,D,A)=>{var R;const P=N.firstChild,L=N.lastChild,j=P===(L.attr("data-mce-type")==="bookmark"?L.prev:L),W=Se(CR,P.name);if(j&&W){const B=P.attr("contenteditable")!=="false",I=((R=E.getParent(D,E.isBlock))===null||R===void 0?void 0:R.nodeName.toLowerCase())===P.name,H=_.from(_a(A,D)).forall(Xo);return B&&I&&H}return!1})(s,b,g,e.getBody())&&((o=b.firstChild)===null||o===void 0||o.unwrap()),(E=>{let N=E;for(;N=N.walk();)N.type===1&&N.attr("data-mce-fragment","1")})(b);let v=b.lastChild;if(v&&v.attr("id")==="mce_marker"){const E=v;for(v=v.prev;v&&v.name!=="table";v=v.walk(!0))if(v.type===3||!s.isBlock(v.name)){v.parent&&e.schema.isValidChild(v.parent.name,"span")&&v.parent.insert(E,v,v.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(g),h.invalid||((E,N,D)=>{var A;return yt(D.children(),QC)&&((A=E.getParent(N,E.isBlock))===null||A===void 0?void 0:A.nodeName)==="SUMMARY"})(s,g,b)){Zd(e,c);let E,N=r.getNode();const D=e.getBody();for(bl(N)?N=E=D:E=N;E&&E!==D;)N=E,E=E.parentNode;t=N===D?D.innerHTML:s.getOuterHTML(N);const A=a.parse(t),R=(W=>{for(let B=W;B;B=B.walk())if(B.attr("id")==="mce_marker")return _.some(B);return _.none()})(A),P=R.bind(AD).getOr(A);R.each((W=>W.replace(b)));const L=(W=>{const B=[];for(let I=W.firstChild;te(I);I=I.walk())B.push(I);return B})(b);b.unwrap();const j=Pe(L,(W=>Ep(e.schema,W)));n1(j,e.schema,P),e1(a.getNodeFilters(),a.getAttributeFilters(),A),t=l.serialize(A),N===D?s.setHTML(D,t):s.setOuterHTML(N,t)}else t=l.serialize(b),((E,N,D)=>{var A;D.getAttribute("data-mce-bogus")==="all"?(A=D.parentNode)===null||A===void 0||A.insertBefore(E.dom.createFragment(N),D):((R,P)=>{if(R.isBlock(P)&&R.isEditable(P)){const L=P.childNodes;return L.length===1&&Ht(L[0])||L.length===0}return!1})(E.dom,D)?E.dom.setHTML(D,N):Zd(E,N,{no_events:!0})})(e,t,g);var y;return xR(e,i),((E,N)=>{var D,A,R;let P;const L=E.dom,j=E.selection;if(!N)return;j.scrollIntoView(N);const W=_a(E.getBody(),N);if(W&&L.getContentEditable(W)==="false")return L.remove(N),void j.select(W);let B=L.createRng();const I=N.previousSibling;if(re(I)){B.setStart(I,(A=(D=I.nodeValue)===null||D===void 0?void 0:D.length)!==null&&A!==void 0?A:0);const J=N.nextSibling;re(J)&&(I.appendData(J.data),(R=J.parentNode)===null||R===void 0||R.removeChild(J))}else B.setStartBefore(N),B.setEndBefore(N);const H=L.getParent(N,L.isBlock);if(L.remove(N),H&&L.isEmpty(H)){const J=jp(H);en(S.fromDom(H)),B.setStart(H,0),B.setEnd(H,0),J||(oe=>!!oe.getAttribute("data-mce-fragment"))(H)||!(P=(oe=>{let le=G.fromRangeStart(oe);return le=Or(E.getBody()).next(le),le?.toRange()})(B))?L.add(H,L.create("br",J?{}:{"data-mce-bogus":"1"})):(B=P,L.remove(H))}j.setRng(B)})(e,s.get("mce_marker")),y=e.getBody(),k.each(y.getElementsByTagName("*"),(E=>{E.removeAttribute("data-mce-fragment")})),((E,N,D)=>{_.from(E.getParent(N,"td,th")).map(S.fromDom).each((A=>((R,P)=>{Wn(R).each((L=>{Xt(L).each((j=>{P.isBlock(Le(R))&&xs(L)&&P.isBlock(Le(j))&&ct(L)}))}))})(A,D)))})(s,r.getStart(),e.schema),((E,N,D)=>{const A=on(S.fromDom(D),(R=>pe(R,S.fromDom(N))));$s(A,A.length-2).filter(nt).fold((()=>wm(E,N)),(R=>wm(E,R.dom)))})(e.schema,e.getBody(),r.getStart()),t},zp=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&(o=>{_i(o)&&zn(o.getBody()).each((r=>{const s=r.getNode(),a=Ar(s)?zn(s).getOr(r):r;o.selection.setRng(a.toRange())}))})(e)},oc={},V1=rr(["pre"]);(e=>{oc[e]||(oc[e]=[]),oc[e].push((t=>{if(!t.selection.getRng().collapsed){const n=t.selection.getSelectedBlocks(),o=Pe(Pe(n,V1),(r=>s=>{const a=s.previousSibling;return V1(a)&&Se(r,a)})(n));K(o,(r=>{((s,a)=>{const i=S.fromDom(a),l=_n(i).dom;ct(i),Re(S.fromDom(s),[S.fromTag("br",l),S.fromTag("br",l),...gt(i)])})(r.previousSibling,r)}))}}))})("pre");const K1=k.each,SR=k.each,ER=(e,t,n,o)=>{const r=e.formatter.get(t),s=r[0],a=!o&&e.selection.isCollapsed(),i=e.dom,l=e.selection,c=(g,h)=>{let b=!1;return SR(g,(v=>!(!Bo(v)||(i.getContentEditable(h)!=="false"||v.ceFalseOverride)&&(!te(v.collapsed)||v.collapsed===a)&&i.is(h,v.selector)&&!Ro(h)&&(Ai(e,h,v,n,h),b=!0,1)))),b},d=g=>{if(we(g)){const h=i.create(g);return Ai(e,h,s,n,o),h}return null},m=(g,h,b)=>{const v=[];let y=!0;const E=s.inline||s.block,N=d(E);Hl(g,h,(D=>{let A;const R=P=>{let L=!1,j=y,W=!1;const B=P.parentNode,I=B.nodeName.toLowerCase(),H=g.getContentEditable(P);te(H)&&(j=y,y=H==="true",L=!0,W=_v(e,P));const J=y&&!L;if(Ht(P)&&!((oe,le,_e,Oe)=>{if(yA(oe)&&un(le)&&_e.parentNode){const De=_0(oe.schema),rt=V_(S.fromDom(_e),(be=>Ro(be.dom)));return pn(De,Oe)&&Jr(oe.schema,_e.parentNode,{skipBogus:!1,includeZwsp:!0})&&!rt}return!1})(e,s,P,I))return A=null,void(Br(s)&&g.remove(P));if((oe=>(le=>Br(le)&&le.wrapper===!0)(s)&&Mo(e,oe,t,n))(P))A=null;else{if(((oe,le,_e)=>{const Oe=(De=>Br(De)&&De.wrapper!==!0)(s)&&Ef(e.schema,oe)&&wi(e,le,E);return _e&&Oe})(P,I,J)){const oe=g.rename(P,E);return Ai(e,oe,s,n,P),v.push(oe),void(A=null)}if(Bo(s)){let oe=c(r,P);if(!oe&&te(B)&&Tf(s)&&(oe=c(r,B)),!un(s)||oe)return void(A=null)}te(N)&&((oe,le,_e,Oe)=>{const De=oe.nodeName.toLowerCase(),rt=wi(e,E,De)&&wi(e,le,E),be=!b&&re(oe)&&ud(oe.data),Ne=Ro(oe),F=!un(s)||!g.isBlock(oe);return(_e||Oe)&&rt&&!be&&!Ne&&F})(P,I,J,W)?(A||(A=g.clone(N,!1),B.insertBefore(A,P),v.push(A)),W&&L&&(y=j),A.appendChild(P)):(A=null,K(xn(P.childNodes),R),L&&(y=j),A=null)}};K(D,R)})),s.links===!0&&K(v,(D=>{const A=R=>{R.nodeName==="A"&&Ai(e,R,s,n,o),K(xn(R.childNodes),A)};A(D)})),((D,A,R)=>{if(Se(_D,A)){const P=((L,j)=>qt(j,(W=>{const B=Zc(W,(I=>xp(L,I)));return xp(L,W)?[W,...B]:B})))(D.formatter,R);GC(D,"strikethrough",P)}})(e,t,An(v)),K(v,(D=>{const A=(R=>{let P=0;return K(R.childNodes,(L=>{(j=>te(j)&&re(j)&&j.length===0)(L)||Oo(L)||P++})),P})(D);!(v.length>1)&&g.isBlock(D)||A!==0?(un(s)||Br(s)&&s.wrapper)&&(s.exact||A!==1||(D=(R=>$t(R.childNodes,Sf).filter((L=>g.getContentEditable(L)!=="false"&&Vd(g,L,s))).map((L=>{const j=g.clone(L,!1);return Ai(e,j,s,n,R),g.replace(j,R,!0),g.remove(L,!0),j})).getOr(R))(D)),((R,P,L,j)=>{K1(P,(W=>{un(W)&&K1(R.dom.select(W.inline,j),(B=>{hp(B)&&Ql(R,W,L,B,W.exact?B:null)})),((B,I,H)=>{if(I.clear_child_styles){const J=I.links?"*:not(a)":"*";gp(B.select(J,H),(oe=>{hp(oe)&&B.isEditable(oe)&&gp(I.styles,((le,_e)=>{B.setStyle(oe,_e,"")}))}))}})(R.dom,W,j)}))})(e,r,n,D),((R,P,L,j,W)=>{const B=W.parentNode;Mo(R,B,L,j)&&Ql(R,P,j,W)||P.merge_with_parents&&B&&R.dom.getParent(B,(I=>!!Mo(R,I,L,j)&&(Ql(R,P,j,W),!0)))})(e,s,t,n,D),((R,P,L,j)=>{if(P.styles&&P.styles.backgroundColor){const W=FC(R,"fontSize");bp(j,(B=>W(B)&&R.isEditable(B)),jC(R,"backgroundColor",Ns(P.styles.backgroundColor,L)))}})(g,s,n,D),((R,P,L,j)=>{const W=B=>{if(or(B)&&xe(B.parentNode)&&R.isEditable(B)){const I=Nv(R,B.parentNode);R.getStyle(B,"color")&&I?R.setStyle(B,"text-decoration",I):R.getStyle(B,"text-decoration")===I&&R.setStyle(B,"text-decoration",null)}};P.styles&&(P.styles.color||P.styles.textDecoration)&&(k.walk(j,W,"childNodes"),W(j))})(g,s,0,D),((R,P,L,j)=>{if(un(P)&&(P.inline==="sub"||P.inline==="sup")){const W=FC(R,"fontSize");bp(j,(I=>W(I)&&R.isEditable(I)),jC(R,"fontSize",""));const B=Pe(R.select(P.inline==="sup"?"sub":"sup",j),R.isEditable);R.remove(B,!0)}})(g,s,0,D),IC(e,s,0,D)):g.remove(D,!0)}))},f=Ul(o)?o:l.getNode();if(i.getContentEditable(f)==="false"&&!_v(e,f))return c(r,o=f),void xb(e,t,o,n);if(s){if(o)if(Ul(o)){if(!c(r,o)){const g=i.createRng();g.setStartBefore(o),g.setEndAfter(o),m(i,Sa(i,g,r),!0)}}else m(i,o,!0);else a&&un(s)&&!xi(e).length?((g,h,b)=>{let v;const y=g.selection,E=g.formatter.get(h);if(!E)return;const N=y.getRng();let D=N.startOffset;const A=N.startContainer.nodeValue;v=xa(g.getBody(),y.getStart());const R=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(A&&D>0&&D<A.length&&R.test(A.charAt(D))&&R.test(A.charAt(D-1))){const j=y.getBookmark();N.collapse(!0);let W=Sa(g.dom,N,E);W=Id(W),g.formatter.apply(h,b,W),y.moveToBookmark(j)}else{let j=v?xC(v):null;v&&j?.data===Gl||(P=g.getDoc(),L=mp(!0).dom,v=P.importNode(L,!0),j=v.firstChild,N.insertNode(v),D=1,kC(g,v)),g.formatter.apply(h,b,v),y.setCursorLocation(j,D)}var P,L})(e,t,n):(l.setRng(Xd(l.getRng())),Ev(e,(()=>{xf(e,((g,h)=>{const b=h?g:Sa(i,g,r);m(i,b,!1)}))}),zt),e.nodeChanged()),DC(e.formatter,t).each((g=>{K((h=>Pe((b=>{const v=b.getSelectedBlocks(),y=b.getRng();if(b.isCollapsed())return[];if(v.length===1)return RC(y,v[0])&&OC(y,v[0])?v:[];{const E=sn(v).filter((A=>RC(y,A))).toArray(),N=oo(v).filter((A=>OC(y,A))).toArray(),D=v.slice(1,-1);return E.concat(D).concat(N)}})(h),BC(h.dom)))(e.selection),(h=>vC(i,h,g,n)))}));((g,h)=>{Me(oc,g)&&K(oc[g],(b=>{b(h)}))})(t,e)}xb(e,t,o,n)},X1=(e,t,n,o)=>{(o||e.selection.isEditable())&&ER(e,t,n,o)},Y1=e=>Me(e,"vars"),G1=e=>e.selection.getStart(),Q1=(e,t,n,o,r)=>go(t,(s=>{const a=e.formatter.matchNode(s,n,r??{},o);return!jt(a)}),(s=>!!yC(e,s,n)||!o&&te(e.formatter.matchNode(s,n,r,!0)))),J1=(e,t)=>{const n=t??G1(e);return Pe(Td(e.dom,n),(o=>xe(o)&&!ca(o)))},Z1=(e,t,n)=>{const o=J1(e,t);Ct(n,((r,s)=>{const a=i=>{const l=Q1(e,o,s,i.similar,Y1(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const d=l.getOr(t);Y1(i)?i.callback(c,{node:d,format:s,parents:o}):K(i.callbacks,(m=>m(c,{node:d,format:s,parents:o})))}};K([r.withSimilar,r.withoutSimilar],a),K(r.withVars,a)}))},Up=(e,t,n)=>({element:e,width:t,rows:n}),ex=(e,t)=>({element:e,cells:t}),kR=(e,t)=>({x:e,y:t}),tx=(e,t)=>at(e,t).bind(us).getOr(1),_R=(e,t,n)=>{const o=e.rows;return!!(o[n]?o[n].cells:[])[t]},nx=e=>Qt(e,((t,n)=>n.cells.length>t?n.cells.length:t),0),ox=(e,t)=>{const n=e.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(pe(r[s],t))return _.some(kR(s,o))}return _.none()},rx=(e,t,n,o,r)=>{const s=[],a=e.rows;for(let i=n;i<=r;i++){const l=a[i].cells,c=t<o?l.slice(t,o+1):l.slice(o,t+1);s.push(ex(a[i].element,c))}return s},NR=e=>((t,n)=>{const o=vn(t.element),r=S.fromTag("tbody");return Re(r,n),X(o,r),o})(e,(t=>qe(t.rows,(n=>{const o=qe(n.cells,(s=>{const a=Ut(s);return ot(a,"colspan"),ot(a,"rowspan"),a})),r=vn(n.element);return Re(r,o),r})))(e)),AR=(e,t,n)=>{const o=S.fromDom(t.commonAncestorContainer),r=Zr(o,e),s=Pe(r,(l=>n.isWrapper(Le(l)))),a=((l,c)=>$t(l,(d=>Le(d)==="li"&&yf(d,c))).fold(ie([]),(d=>(m=>$t(m,(f=>Le(f)==="ul"||Le(f)==="ol")))(l).map((m=>{const f=S.fromTag(Le(m)),g=er(om(m),((h,b)=>Jt(b,"list-style")));return Kc(f,g),[S.fromTag("li"),f]})).getOr([]))))(r,t),i=s.concat(a.length?a:(l=>di(l)?bn(l).filter(zm).fold(ie([]),(c=>[l,c])):zm(l)?[l]:[])(o));return qe(i,vn)},sx=()=>pl([]),TR=(e,t)=>((n,o)=>oi(o,"table",Ce(pe,n)))(e,t[0]).bind((n=>{const o=t[0],r=t[t.length-1],s=(a=>{const i=Up(vn(a),0,[]);return K(Tn(a,"tr"),((l,c)=>{K(Tn(l,"td,th"),((d,m)=>{((f,g,h,b,v)=>{const y=tx(v,"rowspan"),E=tx(v,"colspan"),N=f.rows;for(let D=h;D<h+y;D++){N[D]||(N[D]=ex(Ut(b),[]));for(let A=g;A<g+E;A++)N[D].cells[A]=D===h&&A===g?v:vn(v)}})(i,((f,g,h)=>{for(;_R(f,g,h);)g++;return g})(i,m,c),c,l,d)}))})),Up(i.element,nx(i.rows),i.rows)})(n);return((a,i,l)=>ox(a,i).bind((c=>ox(a,l).map((d=>((m,f,g)=>{const h=f.x,b=f.y,v=g.x,y=g.y,E=b<y?rx(m,h,b,v,y):rx(m,h,y,v,b);return Up(m.element,nx(E),E)})(a,c,d))))))(s,o,r).map((a=>pl([NR(a)])))})).getOrThunk(sx),DR=(e,t,n)=>{const o=xv(t,e);return o.length>0?TR(e,o):((r,s,a)=>s.length>0&&s[0].collapsed?sx():((i,l,c)=>((d,m)=>{const f=Qt(m,((g,h)=>(X(h,g),h)),d);return m.length>0?pl([f]):f})(S.fromDom(l.cloneContents()),AR(i,l,c)))(r,s[0],a))(e,t,n)},eu=(e,t)=>t>=0&&t<e.length&&wa(e.charAt(t)),ax=e=>vo(e.innerText),ix=e=>xe(e)?e.outerHTML:re(e)?fa.encodeRaw(e.data,!1):ys(e)?"<!--"+e.data+"-->":"",RR=(e,t)=>(((n,o)=>{let r=0;K(n,(s=>{s[0]===0?r++:s[0]===1?(((a,i,l)=>{const c=(d=>{let m;const f=document.createElement("div"),g=document.createDocumentFragment();for(d&&(f.innerHTML=d);m=f.firstChild;)g.appendChild(m);return g})(i);if(a.hasChildNodes()&&l<a.childNodes.length){const d=a.childNodes[l];a.insertBefore(c,d)}else a.appendChild(c)})(o,s[1],r),r++):s[0]===2&&((a,i)=>{if(a.hasChildNodes()&&i<a.childNodes.length){const l=a.childNodes[i];a.removeChild(l)}})(o,r)}))})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(m,f,g,h,b)=>{const v=c(m,f,g,h);if(v===null||v.start===f&&v.diag===f-h||v.end===m&&v.diag===m-g){let y=m,E=g;for(;y<f||E<h;)y<f&&E<h&&n[y]===o[E]?(b.push([0,n[y]]),++y,++E):f-m>h-g?(b.push([2,n[y]]),++y):(b.push([1,o[E]]),++E)}else{i(m,v.start,g,v.start-v.diag,b);for(let y=v.start;y<v.end;++y)b.push([0,n[y]]);i(v.end,f,v.end-v.diag,h,b)}},l=(m,f,g,h)=>{let b=m;for(;b-f<h&&b<g&&n[b]===o[b-f];)++b;return((v,y,E)=>({start:v,end:y,diag:E}))(m,b,f)},c=(m,f,g,h)=>{const b=f-m,v=h-g;if(b===0||v===0)return null;const y=b-v,E=v+b,N=(E%2==0?E:E+1)/2;let D,A,R,P,L;for(s[1+N]=m,a[1+N]=f+1,D=0;D<=N;++D){for(A=-D;A<=D;A+=2){for(R=A+N,A===-D||A!==D&&s[R-1]<s[R+1]?s[R]=s[R+1]:s[R]=s[R-1]+1,P=s[R],L=P-m+g-A;P<f&&L<h&&n[P]===o[L];)s[R]=++P,++L;if(y%2!=0&&y-D<=A&&A<=y+D&&a[R-y]<=s[R])return l(a[R-y],A+m-g,f,h)}for(A=y-D;A<=y+D;A+=2){for(R=A+N-y,A===y-D||A!==y+D&&a[R+1]<=a[R-1]?a[R]=a[R+1]-1:a[R]=a[R-1],P=a[R]-1,L=P-m+g-A;P>=m&&L>=g&&n[P]===o[L];)a[R]=P--,L--;if(y%2==0&&-D<=A&&A<=D&&a[R]<=s[R+y])return l(a[R],A+m-g,f,h)}}return null},d=[];return i(0,n.length,0,o.length,d),d})(qe(xn(t.childNodes),ix),e),t),t),OR=qn((()=>document.implementation.createHTMLDocument("undo"))),tu=e=>{const t=e.serializer.getTempAttrs(),n=yy(e.getBody(),t);return(o=>o.querySelector("iframe")!==null)(n)?{type:"fragmented",fragments:Pe(qe(xn(n.childNodes),Mn(vo,ix)),(o=>o.length>0)),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:vo(n.innerHTML),bookmark:null,beforeBookmark:null}},Hp=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?RR(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!te(o)||!gv(o)||!o.isFakeCaret}),o&&(e.selection.moveToBookmark(o),e.selection.scrollIntoView())},$p=e=>e.type==="fragmented"?e.fragments.join(""):e.content,lx=e=>{const t=S.fromTag("body",OR());return aa(t,$p(e)),K(Tn(t,"*[data-mce-bogus]"),Yt),sa(t)},qp=(e,t)=>!(!e||!t)&&(!!((n,o)=>$p(n)===$p(o))(e,t)||((n,o)=>lx(n)===lx(o))(e,t)),Wp=e=>e.get()===0,nu=(e,t,n)=>{Wp(n)&&(e.typing=t)},cx=(e,t)=>{e.typing&&(nu(e,!1,t),e.add())},dx=e=>({init:{bindEvents:Ee},undoManager:{beforeChange:(t,n)=>((o,r,s)=>{Wp(r)&&s.set(Jm(o.selection))})(e,t,n),add:(t,n,o,r,s,a)=>((i,l,c,d,m,f,g)=>{const h=tu(i),b=k.extend(f||{},h);if(!Wp(d)||i.removed)return null;const v=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:b,lastLevel:v,originalEvent:g}).isDefaultPrevented()||v&&qp(v,b))return null;l.data[c.get()]&&m.get().each((N=>{l.data[c.get()].beforeBookmark=N}));const y=_A(i);if(y&&l.data.length>y){for(let N=0;N<l.data.length-1;N++)l.data[N]=l.data[N+1];l.data.length--,c.set(l.data.length)}b.bookmark=Jm(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(b),c.set(l.data.length-1);const E={level:b,lastLevel:v,originalEvent:g};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",E),i.dispatch("change",E)):i.dispatch("AddUndo",E),b})(e,t,n,o,r,s,a),undo:(t,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,nu(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],Hp(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(e,t,n,o),redo:(t,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],Hp(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(e,t,n),clear:(t,n)=>((o,r,s)=>{r.data=[],s.set(0),r.typing=!1,o.dispatch("ClearUndos")})(e,t,n),reset:t=>(n=>{n.clear(),n.add()})(t),hasUndo:(t,n)=>((o,r,s)=>s.get()>0||r.typing&&r.data[0]&&!qp(tu(o),r.data[0]))(e,t,n),hasRedo:(t,n)=>((o,r)=>r.get()<o.data.length-1&&!o.typing)(t,n),transact:(t,n,o)=>((r,s,a)=>(cx(r,s),r.beforeChange(),r.ignore(a),r.add()))(t,n,o),ignore:(t,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(t,n),extra:(t,n,o,r)=>((s,a,i,l,c)=>{if(a.transact(l)){const d=a.data[i.get()].bookmark,m=a.data[i.get()-1];Hp(s,m,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=d)}})(e,t,n,o,r)},formatter:{match:(t,n,o,r)=>up(e,t,n,o,r),matchAll:(t,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,(c=>{for(let d=0;d<r.length;d++){const m=r[d];!i[m]&&Mo(o,c,m,s)&&(i[m]=!0,a.push(m))}}),o.dom.getRoot()),a})(e,t,n),matchNode:(t,n,o,r)=>Mo(e,t,n,o,r),canApply:t=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const a=n.selection.getStart(),i=Td(s,a);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!Bo(c))return!0;for(let d=i.length-1;d>=0;d--)if(s.is(i[d],c.selector))return!0}}return!1})(e,t),closest:t=>((n,o)=>{const r=s=>pe(s,S.fromDom(n.getBody()));return _.from(n.selection.getStart(!0)).bind((s=>mm(S.fromDom(s),(a=>$n(o,(i=>((l,c)=>Mo(n,l.dom,c)?_.some(c):_.none())(a,i)))),r))).getOrNull()})(e,t),apply:(t,n,o)=>X1(e,t,n,o),remove:(t,n,o,r)=>XC(e,t,n,o,r),toggle:(t,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!up(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?X1(r,s,a,i):XC(r,s,a,i))})(e,t,n,o),formatChanged:(t,n,o,r,s)=>((a,i,l,c,d,m)=>(((f,g,h,b,v,y)=>{const E=g.get();K(h.split(","),(N=>{const D=Ot(E,N).getOrThunk((()=>{const R={withSimilar:{state:tn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:tn(!1),similar:!1,callbacks:[]},withVars:[]};return E[N]=R,R})),A=()=>{const R=J1(f);return Q1(f,R,N,v,y).isSome()};if(jt(y)){const R=v?D.withSimilar:D.withoutSimilar;R.callbacks.push(b),R.callbacks.length===1&&R.state.set(A())}else D.withVars.push({state:tn(A()),similar:v,vars:y,callback:b})})),g.set(E)})(a,i,l,c,d,m),{unbind:()=>((f,g,h)=>{const b=f.get();K(g.split(","),(v=>Ot(b,v).each((y=>{b[v]={withSimilar:{...y.withSimilar,callbacks:Pe(y.withSimilar.callbacks,(E=>E!==h))},withoutSimilar:{...y.withoutSimilar,callbacks:Pe(y.withoutSimilar.callbacks,(E=>E!==h))},withVars:Pe(y.withVars,(E=>E.callback!==h))}})))),f.set(b)})(i,l,c)}))(e,t,n,o,r,s)},editor:{getContent:t=>((n,o)=>_.from(n.getBody()).fold(ie(o.format==="tree"?new Rn("body",11):""),(r=>oD(n,o,r))))(e,t),setContent:(t,n)=>((o,r,s)=>_.from(o.getBody()).map((a=>Jd(r)?((i,l,c,d)=>{e1(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const m=As({validate:!1},i.schema).serialize(c),f=vo(dd(S.fromDom(l))?m:k.trim(m));return zp(i,f,d.no_selection),{content:c,html:f}})(o,a,r,s):((i,l,c,d)=>{if((c=vo(c)).length===0||/^\s+$/.test(c)){const m='<br data-mce-bogus="1">';l.nodeName==="TABLE"?c="<tr><td>"+m+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+m+"</li>");const f=Sn(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),f.toLowerCase())?(c=m,c=i.dom.createHTML(f,gi(i),c)):c||(c=m),zp(i,c,d.no_selection),{content:c,html:c}}{d.format!=="raw"&&(c=As({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const m=dd(S.fromDom(l))?c:k.trim(c);return zp(i,m,d.no_selection),{content:m,html:m}}})(o,a,r,s))).getOr({content:r,html:Jd(s.content)?"":s.content}))(e,t,n),insertContent:(t,n)=>wR(e,t,n),addVisual:t=>((n,o)=>{const r=n.dom,s=te(o)?o:n.getBody();K(r.select("table,a",s),(a=>{switch(a.nodeName){case"TABLE":const i=OA(n),l=r.getAttrib(a,"border");l&&l!=="0"||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const c=r.getAttrib(a,"name")||a.id,d=zb(n);c&&n.hasVisual?r.addClass(a,d):r.removeClass(a,d)}}})),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((o,r,s={})=>{const a=((i,l)=>({...i,format:l,get:!0,selection:!0,getInner:!0}))(s,r);return I1(o,a).fold(bt,(i=>{const l=((c,d)=>{if(d.format==="text")return(m=>_.from(m.selection.getRng()).map((f=>{var g;const h=_.from(m.dom.getParent(f.commonAncestorContainer,m.dom.isBlock)),b=m.getBody(),v=(A=>A.map((R=>R.nodeName)).getOr("div").toLowerCase())(h),y=S.fromDom(f.cloneContents());Cy(y),xy(y);const E=m.dom.add(b,v,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},y.dom),N=ax(E),D=vo((g=E.textContent)!==null&&g!==void 0?g:"");if(m.dom.remove(E),eu(D,0)||eu(D,D.length-1)){const A=h.getOr(b),R=ax(A),P=R.indexOf(N);return P===-1?N:(eu(R,P-1)?" ":"")+N+(eu(R,P+N.length)?" ":"")}return N})).getOr(""))(c);{const m=((f,g)=>{const h=f.selection.getRng(),b=f.dom.create("body"),v=f.selection.getSel(),y=Hf(f,bf(v)),E=g.contextual?DR(S.fromDom(f.getBody()),y,f.schema).dom:h.cloneContents();return E&&b.appendChild(E),f.selection.serializer.serialize(b,g)})(c,d);return d.format==="tree"?m:c.selection.isCollapsed()?"":m}})(o,i);return F1(o,l,i)}))})(e,t,n)},autocompleter:{addDecoration:Ee,removeDecoration:Ee},raw:{getModel:()=>_.none()}}),Lr=e=>Me(e.plugins,"rtc"),Vp=e=>e.rtcInstance?e.rtcInstance:dx(e),cn=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},ux=e=>cn(e).init.bindEvents(),mx=(e,t,n)=>{if(Me(e,t)){const o=Pe(e[t],(r=>r!==n));o.length===0?delete e[t]:e[t]=o}},fx=e=>!(!e||!e.ownerDocument)&&Ze(S.fromDom(e.ownerDocument),S.fromDom(e)),px=(e,t,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((b,v)=>{let y,E;const N=(A,R)=>$t(R,(P=>b.is(P,A))),D=A=>b.getParents(A,void 0,b.getRoot());return{selectorChangedWithUnbind:(A,R)=>(y||(y={},E={},v.on("NodeChange",(P=>{const L=P.element,j=D(L),W={};Ct(y,((B,I)=>{N(I,j).each((H=>{E[I]||(K(B,(J=>{J(!0,{node:H,selector:I,parents:j})})),E[I]=B),W[I]=B}))})),Ct(E,((B,I)=>{W[I]||(delete E[I],K(B,(H=>{H(!1,{node:L,selector:I,parents:j})})))}))}))),y[A]||(y[A]=[]),y[A].push(R),N(A,D(v.selection.getStart())).each((()=>{E[A]=y[A]})),{unbind:()=>{mx(y,A,R),mx(E,A,R)}})}})(e,o),i=b=>{const v=c();v.collapse(!!b),d(v)},l=()=>t.getSelection?t.getSelection():t.document.selection,c=()=>{let b;const v=(E,N,D)=>{try{return N.compareBoundaryPoints(E,D)}catch{return-1}},y=t.document;if(te(o.bookmark)&&!_i(o)){const E=Rf(o);if(E.isSome())return E.map((N=>Hf(o,[N])[0])).getOr(y.createRange())}try{const E=l();E&&!nd(E.anchorNode)&&(b=E.rangeCount>0?E.getRangeAt(0):y.createRange(),b=Hf(o,[b])[0])}catch{}if(b||(b=y.createRange()),bl(b.startContainer)&&b.collapsed){const E=e.getRoot();b.setStart(E,0),b.setEnd(E,0)}return r&&s&&(v(b.START_TO_START,b,r)===0&&v(b.END_TO_END,b,r)===0?b=s:(r=null,s=null)),b},d=(b,v)=>{if(!(E=>!!E&&fx(E.startContainer)&&fx(E.endContainer))(b))return;const y=l();if(b=o.dispatch("SetSelectionRange",{range:b,forward:v}).range,y){s=b;try{y.removeAllRanges(),y.addRange(b)}catch{}v===!1&&y.extend&&(y.collapse(b.endContainer,b.endOffset),y.extend(b.startContainer,b.startOffset)),r=y.rangeCount>0?y.getRangeAt(0):null}if(!b.collapsed&&b.startContainer===b.endContainer&&y?.setBaseAndExtent&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()){const E=b.startContainer.childNodes[b.startOffset];E&&E.nodeName==="IMG"&&(y.setBaseAndExtent(b.startContainer,b.startOffset,b.endContainer,b.endOffset),y.anchorNode===b.startContainer&&y.focusNode===b.endContainer||y.setBaseAndExtent(E,0,E,1))}o.dispatch("AfterSetSelectionRange",{range:b,forward:v})},m=()=>{const b=l(),v=b?.anchorNode,y=b?.focusNode;if(!b||!v||!y||nd(v)||nd(y))return!0;const E=e.createRng(),N=e.createRng();try{E.setStart(v,b.anchorOffset),E.collapse(!0),N.setStart(y,b.focusOffset),N.collapse(!0)}catch{return!0}return E.compareBoundaryPoints(E.START_TO_START,N)<=0},f={dom:e,win:t,serializer:n,editor:o,expand:(b={type:"word"})=>d(Pr(e).expand(c(),b)),collapse:i,setCursorLocation:(b,v)=>{const y=e.createRng();te(b)&&te(v)?(y.setStart(b,v),y.setEnd(b,v),d(y),i(!1)):(Cf(e,y,o.getBody(),!0),d(y))},getContent:b=>((v,y={})=>((E,N,D)=>cn(E).selection.getContent(N,D))(v,y.format?y.format:"html",y))(o,b),setContent:(b,v)=>((y,E,N={})=>{H1("selectionSetContent"),Zd(y,E,N)})(o,b,v),getBookmark:(b,v)=>g.getBookmark(b,v),moveToBookmark:b=>g.moveToBookmark(b),select:(b,v)=>(((y,E,N)=>_.from(E).bind((D=>_.from(D.parentNode).map((A=>{const R=y.nodeIndex(D),P=y.createRng();return P.setStart(A,R),P.setEnd(A,R+1),N&&(Cf(y,P,D,!0),Cf(y,P,D,!1)),P})))))(e,b,v).each(d),b),isCollapsed:()=>{const b=c(),v=l();return!(!b||b.item)&&(b.compareEndPoints?b.compareEndPoints("StartToEnd",b)===0:!v||b.collapsed)},isEditable:()=>{if(o.mode.isReadOnly())return!1;const b=c(),v=o.getBody().querySelectorAll('[data-mce-selected="1"]');return v.length>0?no(v,(y=>e.isEditable(y.parentElement))):ly(e,b)},isForward:m,setNode:b=>(Zd(o,e.getOuterHTML(b)),b),getNode:()=>((b,v)=>{if(!v)return b;let y=v.startContainer,E=v.endContainer;const N=v.startOffset,D=v.endOffset;let A=v.commonAncestorContainer;v.collapsed||(y===E&&D-N<2&&y.hasChildNodes()&&(A=y.childNodes[N]),re(y)&&re(E)&&(y=y.length===N?my(y.nextSibling,!0):y.parentNode,E=D===0?my(E.previousSibling,!1):E.parentNode,y&&y===E&&(A=y)));const R=re(A)?A.parentNode:A;return or(R)?R:b})(o.getBody(),c()),getSel:l,setRng:d,getRng:c,getStart:b=>dy(o.getBody(),c(),b),getEnd:b=>uy(o.getBody(),c(),b),getSelectedBlocks:(b,v)=>((y,E,N,D)=>{const A=[],R=y.getRoot(),P=y.getParent(N||dy(R,E,E.collapsed),y.isBlock),L=y.getParent(D||uy(R,E,E.collapsed),y.isBlock);if(P&&P!==R&&A.push(P),P&&L&&P!==L){let j;const W=new ln(P,R);for(;(j=W.next())&&j!==L;)y.isBlock(j)&&A.push(j)}return L&&P!==L&&L!==R&&A.push(L),A})(e,c(),b,v),normalize:()=>{const b=c(),v=l();if(!(bf(v).length>1)&&Nd(o)){const y=Ld(e,b);return y.each((E=>{d(E,m())})),y.getOr(b)}return b},selectorChanged:(b,v)=>(a(b,v),f),selectorChangedWithUnbind:a,getScrollContainer:()=>{let b,v=e.getRoot();for(;v&&v.nodeName!=="BODY";){if(v.scrollHeight>v.clientHeight){b=v;break}v=v.parentNode}return b},scrollIntoView:(b,v)=>{te(b)?((y,E,N)=>{(y.inline?WT:KT)(y,E,N)})(o,b,v):$l(o,c(),v)},placeCaretAt:(b,v)=>d(Qv(b,v,o.getDoc())),getBoundingClientRect:()=>{const b=c();return b.collapsed?G.fromRangeStart(b).getClientRects()[0]:b.getBoundingClientRect()},destroy:()=>{t=r=s=null,h.destroy()}},g=Ei(f),h=Gv(f,o);return f.bookmarkManager=g,f.controlSelection=h,f},BR=(e,t,n)=>{k.inArray(t,n)===-1&&(e.addAttributeFilter(n,((o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)})),t.push(n))},PR=(e,t)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},r=t&&t.dom?t.dom:St.DOM,s=t&&t.schema?t.schema:Cs(o),a=Ti(o,s);return((i,l,c)=>{i.addAttributeFilter("data-mce-tabindex",((d,m)=>{let f=d.length;for(;f--;){const g=d[f];g.attr("tabindex",g.attr("data-mce-tabindex")),g.attr(m,null)}})),i.addAttributeFilter("src,href,style",((d,m)=>{const f="data-mce-"+m,g=l.url_converter,h=l.url_converter_scope;let b=d.length;for(;b--;){const v=d[b];let y=v.attr(f);y!==void 0?(v.attr(m,y.length>0?y:null),v.attr(f,null)):(y=v.attr(m),m==="style"?y=c.serializeStyle(c.parseStyle(y),v.name):g&&(y=g.call(h,y,m,v.name)),v.attr(m,y.length>0?y:null))}})),i.addAttributeFilter("class",(d=>{let m=d.length;for(;m--;){const f=d[m];let g=f.attr("class");g&&(g=g.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",g.length>0?g:null))}})),i.addAttributeFilter("data-mce-type",((d,m,f)=>{let g=d.length;for(;g--;){const h=d[g];h.attr("data-mce-type")==="bookmark"&&!f.cleanup&&(_.from(h.firstChild).exists((v=>{var y;return!ud((y=v.value)!==null&&y!==void 0?y:"")}))?h.unwrap():h.remove())}})),i.addNodeFilter("script,style",((d,m)=>{var f;const g=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let h=d.length;for(;h--;){const b=d[h],v=b.firstChild,y=(f=v?.value)!==null&&f!==void 0?f:"";if(m==="script"){const E=b.attr("type");E&&b.attr("type",E==="mce-no/type"?null:E.replace(/^mce\-/,"")),l.element_format==="xhtml"&&v&&y.length>0&&(v.value=`// <![CDATA[
`+g(y)+`
// ]]>`)}else l.element_format==="xhtml"&&v&&y.length>0&&(v.value=`<!--
`+g(y)+`
-->`)}})),i.addNodeFilter("#comment",(d=>{let m=d.length;for(;m--;){const f=d[m],g=f.value;l.preserve_cdata&&g?.indexOf("[CDATA[")===0?(f.name="#cdata",f.type=4,f.value=c.decode(g.replace(/^\[CDATA\[|\]\]$/g,""))):g?.indexOf("mce:protected ")===0&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(g).substr(14))}})),i.addNodeFilter("xml:namespace,input",((d,m)=>{let f=d.length;for(;f--;){const g=d[f];g.type===7?g.remove():g.type===1&&(m!=="input"||g.attr("type")||g.attr("type","text"))}})),i.addAttributeFilter("data-mce-type",(d=>{K(d,(m=>{m.attr("data-mce-type")==="format-caret"&&(m.isEmpty(i.schema.getNonEmptyElements())?m.remove():m.unwrap())}))})),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",((d,m)=>{let f=d.length;for(;f--;)d[f].attr(m,null)})),l.remove_trailing_brs&&((d,m,f)=>{m.addNodeFilter("br",((g,h,b)=>{const v=k.extend({},f.getBlockElements()),y=f.getNonEmptyElements(),E=f.getWhitespaceElements();v.body=1;const N=D=>D.name in v||_m(f,D);for(let D=0,A=g.length;D<A;D++){let R=g[D],P=R.parent;if(P&&N(P)&&R===P.lastChild){let L=R.prev;for(;L;){const j=L.name;if(j!=="span"||L.attr("data-mce-type")!=="bookmark"){j==="br"&&(R=null);break}L=L.prev}if(R&&(R.remove(),Jl(f,y,E,P))){const j=f.getElementRule(P.name);j&&(j.removeEmpty?P.remove():j.paddEmpty&&wp(d,b,N,P))}}else{let L=R;for(;P&&P.firstChild===L&&P.lastChild===L&&(L=P,!v[P.name]);)P=P.parent;if(L===P){const j=new Rn("#text",3);j.value=Ft,R.replace(j)}}}}))})(l,i,i.schema)})(a,o,r),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},d=((g,h,b)=>((v,y)=>te(v)&&v.hasEventListeners("PreProcess")&&!y.no_events)(g,b)?((v,y,E)=>{let N;const D=v.dom;let A=y.cloneNode(!0);const R=document.implementation;if(R.createHTMLDocument){const P=R.createHTMLDocument("");k.each(A.nodeName==="BODY"?A.childNodes:[A],(L=>{P.body.appendChild(P.importNode(L,!0))})),A=A.nodeName!=="BODY"?P.body.firstChild:P.body,N=D.doc,D.doc=P}return((P,L)=>{P.dispatch("PreProcess",L)})(v,{...E,node:A}),N&&(D.doc=N),A})(g,h,b):h)(t,i,c),m=((g,h,b)=>{const v=vo(b.getInner?h.innerHTML:g.getOuterHTML(h));return b.selection||dd(S.fromDom(h))?v:k.trim(v)})(r,d,c),f=((g,h,b)=>{const v=b.selection?{forced_root_block:!1,...b}:b,y=g.parse(h,v);return(E=>{const N=A=>A?.name==="br",D=E.lastChild;if(N(D)){const A=D.prev;N(A)&&(D.remove(),A.remove())}})(y),y})(a,m,c);return c.format==="tree"?f:((g,h,b,v,y)=>{const E=((N,D,A)=>As(N,D).serialize(A))(h,b,v);return((N,D,A)=>!D.no_events&&N?((P,L)=>P.dispatch("PostProcess",L))(N,{...D,content:A}).content:A)(g,y,E)})(t,o,s,f,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:Ce(BR,a,n),getTempAttrs:ie(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},gx=(e,t)=>{const n=PR(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Kp=(e,t,n={})=>{const o=((r,s)=>({format:"html",...r,set:!0,content:s}))(n,t);Mp(e,o).each((r=>{const s=((a,i,l)=>Vp(a).editor.setContent(i,l))(e,r.content,r);Ip(e,s.html,r)}))},ou=St.DOM,ru=e=>_.from(e).each((t=>t.destroy())),su=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Me(e,t)}})(),Di=jn.ModelManager,hx=(e,t)=>t.dom[e],bx=(e,t)=>parseInt(nr(t,e),10),LR=Ce(hx,"clientWidth"),MR=Ce(hx,"clientHeight"),IR=Ce(bx,"margin-top"),FR=Ce(bx,"margin-left"),vx=e=>{const t=[],n=()=>{const l=e.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>_.from(t[0]),r=()=>{o().each((l=>{l.reposition()}))},s=l=>{Hs(t,(c=>c===l)).each((c=>{t.splice(c,1)}))},a=(l,c=!0)=>e.removed||!(d=>{return(m=d.inline?d.getBody():d.getContentAreaContainer(),_.from(m).map(S.fromDom)).map(Yr).getOr(!1);var m})(e)?{}:(c&&e.dispatch("BeforeOpenNotification",{notification:l}),$t(t,(d=>{return m=n().getArgs(d),f=l,!(m.type!==f.type||m.text!==f.text||m.progressBar||m.timeout||f.progressBar||f.timeout);var m,f})).getOrThunk((()=>{e.editorManager.setActive(e);const d=n().open(l,(()=>{s(d)}),(()=>Lf(e)));return(m=>{t.push(m)})(d),r(),e.dispatch("OpenNotification",{notification:{...d}}),d}))),i=ie(t);return(l=>{l.on("SkinLoaded",(()=>{const c=pA(l);c&&a({text:c,type:"warning",timeout:0},!1),r()})),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",(()=>{requestAnimationFrame(r)})),l.on("remove",(()=>{K(t.slice(),(c=>{n().close(c)}))})),l.on("keydown",(c=>{var d;const m=((d=c.key)===null||d===void 0?void 0:d.toLowerCase())==="f12"||c.keyCode===123;c.altKey&&m&&(c.preventDefault(),o().map((f=>S.fromDom(f.getEl()))).each((f=>hs(f))))}))})(e),{open:a,close:()=>{o().each((l=>{n().close(l),s(l),r()}))},getNotifications:i}},Ri=jn.PluginManager,Aa=jn.ThemeManager,yx=e=>{let t=[];const n=()=>{const i=e.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():(()=>{const l=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:l,openUrl:l,alert:l,confirm:l,close:l}})()},o=(i,l)=>(...c)=>l?l.apply(i,c):void 0,r=i=>{(c=>{e.dispatch("CloseWindow",{dialog:c})})(i);const l=$n(t,(({instanceApi:c,triggerElement:d})=>c===i?d:_.none()));t=Pe(t,(({instanceApi:c})=>c!==i)),t.length===0?e.focus():l.filter(Yr).each(hs)},s=i=>{e.editorManager.setActive(e),Rd(e);const l=kr();e.ui.show();const c=i();return((d,m)=>{t.push({instanceApi:d,triggerElement:m}),(f=>{e.dispatch("OpenWindow",{dialog:f})})(d)})(c,l),c},a=i=>{t.length!==0&&i.each((l=>hs(l)))};return e.on("remove",(()=>{K(t,(({instanceApi:i})=>{n().close(i)}))})),{open:(i,l)=>s((()=>n().open(i,l,r))),openUrl:i=>s((()=>n().openUrl(i,r))),alert:(i,l,c)=>{const d=kr(),m=n();m.alert(i,o(c||m,(()=>{a(d),l?.()})))},confirm:(i,l,c)=>{const d=kr(),m=n();m.confirm(i,o(c||m,(f=>{a(d),l?.(f)})))},close:()=>{_.from(t[t.length-1]).each((({instanceApi:i})=>{n().close(i),r(i)}))}}},Cx=(e,t)=>{e.notificationManager.open({type:"error",text:t})},au=(e,t)=>{e._skinLoaded?Cx(e,t):e.on("SkinLoaded",(()=>{Cx(e,t)}))},Oi=(e,t,n)=>{Cb(e,t,{message:n}),console.error(n)},Bi=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,iu=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},xx=new WeakMap,wx=(e,t)=>{const{type:n,message:o}=t;e.notificationManager.open({type:n,text:o})},jR=e=>{(n=>{switch(n){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;default:return console.log}})(e.type)(e.message)},Xp=(e,t)=>{const{console:n,editor:o}=t;te(o)&&(e._skinLoaded?wx(e,o):e.on("SkinLoaded",(()=>{wx(e,o)}))),te(n)&&jR(n)},Yp="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",zR="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",Sx=(e,t)=>{Xp(e,{console:{type:"error",message:[`The "${t}" plugin requires a valid TinyMCE license key.`,Yp].join(" ")}})},Ex="licensekeymanager",kx=e=>{const t=(r=>we(lT(r))?"online":"offline")(e),n=(r=>{var s;const a=(s=iT(r))===null||s===void 0?void 0:s.toLowerCase();return a==="gpl"?"gpl":kt(a)?"no_key":"non_gpl"})(e),o=new Set(Bl(e)).has(Ex);return n!=="gpl"||t==="online"||o?{type:"use_plugin",onlineStatus:t,licenseKeyType:n,forcePlugin:o}:{type:"use_gpl",onlineStatus:t,licenseKeyType:n,forcePlugin:o}},lu="manager",UR=Ex,Gp=(()=>{const e=jn();return{load:(t,n)=>{if(kx(t).type==="use_plugin"){const o=`plugins/${UR}/plugin${n}.js`;e.load(lu,o).catch((()=>{((r,s)=>{Oi(r,"LicenseKeyManagerLoadError",Bi("license key manager",s))})(t,o)}))}},add:t=>{e.add(lu,t)},init:t=>{const n=s=>{Object.defineProperty(t,"licenseKeyManager",{value:s,writable:!1,configurable:!1,enumerable:!0})},o=kx(t),r=e.get(lu);if(te(r))n(r(t,e.urls[lu]));else switch(o.type){case"use_gpl":n((s=>({validate:a=>{const{plugin:i}=a,l=we(i);return l&&Sx(s,i),Promise.resolve(!l)}}))(t));break;case"use_plugin":(s=>{xx.has(s)||(xx.set(s,!0),s.initialized?(s.removed||s.mode.set("readonly"),s.options.set("disabled",!0)):s.on("init",(()=>{s.removed||s.mode.set("readonly"),s.options.set("disabled",!0)})),s.on("DisabledStateChange",(a=>{const{state:i}=a;i||a.preventDefault()}),!0),s.on("SwitchMode",(a=>{const{mode:i}=a;i!=="readonly"&&s.mode.set("readonly")})))})(t),n((s=>({validate:a=>{const{plugin:i}=a;return we(i)&&Sx(s,i),Promise.resolve(!1)}}))(t)),o.onlineStatus==="offline"&&o.licenseKeyType==="no_key"?(s=>{const a="The editor is disabled because a TinyMCE license key has not been provided.";Xp(s,{console:{type:"error",message:[`${a}`,zR,Yp].join(" ")},editor:{type:"warning",message:`${a}`}})})(t):((s,a)=>{const i=(a==="online"?"API":"license")+" key",l=`The editor is disabled because the TinyMCE ${i} could not be validated.`;Xp(s,{console:{type:"error",message:[`${l}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${i} to be validated but could not be loaded.`,Yp].join(" ")},editor:{type:"warning",message:`${l}`}})})(t,o.onlineStatus)}t.licenseKeyManager.validate({})}}})(),Qp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},_x=(e,t,n)=>{cm(e,t)&&!n?hl(e,t):n&&ri(e,t)},Nx=e=>{const t=S.fromDom(e.getBody());_x(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(n=>{_.from(n.selection.getNode()).each((o=>{o.removeAttribute("data-mce-selected")}))})(e)},Ax=e=>{const t=S.fromDom(e.getBody());_x(t,"mce-content-readonly",!1),e.hasEditableRoot()&&Jc(t,!0),((n,o)=>{Qp(n,"StyleWithCSS",o),Qp(n,"enableInlineTableEditing",o),Qp(n,"enableObjectResizing",o)})(e,!1),Lf(e)&&e.focus(),(n=>{n.selection.setRng(n.selection.getRng())})(e),e.nodeChanged()},ts=e=>Cd(e),Ta="data-mce-contenteditable",Tx=(e,t)=>{const n=S.fromDom(e.getBody());t?(Nx(e),Jc(n,!1),K(Tn(n,'*[contenteditable="true"]'),(o=>{Te(o,Ta,"true"),Jc(o,!1)}))):(K(Tn(n,`*[${Ta}="true"]`),(o=>{ot(o,Ta),Jc(o,!0)})),Ax(e))},Dx=e=>{e.parser.addAttributeFilter("contenteditable",(t=>{ts(e)&&K(t,(n=>{n.attr(Ta,n.attr("contenteditable")),n.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(Ta,(t=>{ts(e)&&K(t,(n=>{n.attr("contenteditable",n.attr(Ta))}))})),e.serializer.addTempAttr(Ta)},HR=["copy"],Jp=e=>"content/"+e+"/content.css",Rx=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return qe(t,(r=>(s=>tinymce.Resource.has(Jp(s)))(r)?r:(s=>/^[a-z0-9\-]+$/i.test(s))(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r)))},$R=(e,t)=>{const n={};return{findAll:(o,r=zt)=>{const s=Pe((i=>i?xn(i.getElementsByTagName("img")):[])(o),(i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===p.transparentSrc)&&(Jt(l,"blob:")?!e.isUploaded(l)&&r(i):!!Jt(l,"data:")&&r(i))})),a=qe(s,(i=>{const l=i.src;if(Me(n,l))return n[l].then((c=>we(c)?c:{image:i,blobInfo:c.blobInfo}));{const c=((d,m)=>{const f=()=>Promise.reject("Invalid data URI");if(Jt(m,"blob:")){const b=d.getByUri(m);return te(b)?Promise.resolve(b):(g=m,Jt(g,"blob:")?(v=>fetch(v).then((y=>y.ok?y.blob():Promise.reject())).catch((()=>Promise.reject({message:`Cannot convert ${v} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))))(g):Jt(g,"data:")?(h=g,new Promise(((v,y)=>{kp(h).bind((({type:E,data:N,base64Encoded:D})=>s1(E,N,D))).fold((()=>y("Invalid data URI")),v)}))):Promise.reject("Unknown URI format")).then((v=>a1(v).then((y=>i1(y,!1,(E=>_.some(l1(d,v,E)))).getOrThunk(f)))))}var g,h;return Jt(m,"data:")?c1(d,m).fold(f,(b=>Promise.resolve(b))):Promise.reject("Unknown image data format")})(t,l).then((d=>(delete n[l],{image:i,blobInfo:d}))).catch((d=>(delete n[l],d)));return n[l]=c,c}}));return Promise.all(a)}}},Ox=()=>{let e={};const t=(o,r)=>({status:o,resultUri:r}),n=o=>o in e;return{hasBlobUri:n,getResultUri:o=>{const r=e[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&e[o].status===1,isUploaded:o=>!!n(o)&&e[o].status===2,markPending:o=>{e[o]=t(1,null)},markUploaded:(o,r)=>{e[o]=t(2,r)},removeFailed:o=>{delete e[o]},destroy:()=>{e={}}}};let qR=0;const WR=(e,t)=>{const n={},o=(l,c)=>new Promise(((d,m)=>{const f=new XMLHttpRequest;f.open("POST",t.url),f.withCredentials=t.credentials,f.upload.onprogress=h=>{c(h.loaded/h.total*100)},f.onerror=()=>{m("Image upload failed due to a XHR Transport error. Code: "+f.status)},f.onload=()=>{if(f.status<200||f.status>=300)return void m("HTTP Error: "+f.status);const h=JSON.parse(f.responseText);var b,v;h&&we(h.location)?d((b=t.basePath,v=h.location,b?b.replace(/\/$/,"")+"/"+v.replace(/^\//,""):v)):m("Invalid JSON: "+f.responseText)};const g=new FormData;g.append("file",l.blob(),l.filename()),f.send(g)})),r=ht(t.handler)?t.handler:o,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{k.each(n[l],(d=>{d(c)})),delete n[l]};return{upload:(l,c)=>t.url||r!==o?((d,m)=>(d=k.grep(d,(f=>!e.isUploaded(f.blobUri()))),Promise.all(k.map(d,(f=>e.isPending(f.blobUri())?(g=>{const h=g.blobUri();return new Promise((b=>{n[h]=n[h]||[],n[h].push(b)}))})(f):((g,h,b)=>(e.markPending(g.blobUri()),new Promise((v=>{let y,E;try{const N=()=>{y&&(y.close(),E=Ee)},D=R=>{N(),e.markUploaded(g.blobUri(),R),i(g.blobUri(),s(g,R)),v(s(g,R))},A=R=>{N(),e.removeFailed(g.blobUri()),i(g.blobUri(),a(g,R)),v(a(g,R))};E=R=>{R<0||R>100||_.from(y).orThunk((()=>_.from(b).map(pr))).each((P=>{y=P,P.progressBar.value(R)}))},h(g,E).then(D,(R=>{A(we(R)?{message:R}:R)}))}catch(N){v(a(g,N))}}))))(f,r,m))))))(l,c):new Promise((d=>{d([])}))}},Bx=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Px=(e,t)=>WR(t,{url:tA(e),basePath:nA(e),credentials:oA(e),handler:rA(e)}),VR=e=>{const t=(()=>{let b=[];const v=N=>{if(!N.blob||!N.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const D=N.id||"blobid"+qR+++(()=>{const L=()=>Math.round(4294967295*Ws()).toString(36);return"s"+new Date().getTime().toString(36)+L()+L()+L()})(),A=N.name||D,R=N.blob;var P;return{id:ie(D),name:ie(A),filename:ie(N.filename||A+"."+(P=R.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[P.toLowerCase()]||"dat")),blob:ie(R),base64:ie(N.base64),blobUri:ie(N.blobUri||URL.createObjectURL(R)),uri:ie(N.uri)}},y=N=>$t(b,N).getOrUndefined(),E=N=>y((D=>D.id()===N));return{create:(N,D,A,R,P)=>{if(we(N))return v({id:N,name:R,filename:P,blob:D,base64:A});if(Ue(N))return v(N);throw new Error("Unknown input type")},add:N=>{E(N.id())||b.push(N)},get:E,getByUri:N=>y((D=>D.blobUri()===N)),getByData:(N,D)=>y((A=>A.base64()===N&&A.blob().type===D)),findFirst:y,removeByUri:N=>{b=Pe(b,(D=>D.blobUri()!==N||(URL.revokeObjectURL(D.blobUri()),!1)))},destroy:()=>{K(b,(N=>{URL.revokeObjectURL(N.blobUri())})),b=[]}}})();let n,o;const r=Ox(),s=[],a=b=>v=>e.selection?b(v):[],i=(b,v,y)=>{let E=0;do E=b.indexOf(v,E),E!==-1&&(b=b.substring(0,E)+y+b.substr(E+v.length),E+=y.length-v.length+1);while(E!==-1);return b},l=(b,v,y)=>{const E=`src="${y}"${y===p.transparentSrc?' data-mce-placeholder="1"':""}`;return b=i(b,`src="${v}"`,E),i(b,'data-mce-src="'+v+'"','data-mce-src="'+y+'"')},c=(b,v)=>{K(e.undoManager.data,(y=>{y.type==="fragmented"?y.fragments=qe(y.fragments,(E=>l(E,b,v))):y.content=l(y.content,b,v)}))},d=()=>(n||(n=Px(e,r)),g().then(a((b=>{const v=qe(b,(y=>y.blobInfo));return n.upload(v,Bx(e)).then(a((y=>{const E=[];let N=!1;const D=qe(y,((A,R)=>{const{blobInfo:P,image:L}=b[R];let j=!1;return A.status&&ZN(e)?(A.url&&!hn(L.src,A.url)&&(N=!0),t.removeByUri(L.src),Lr(e)||((W,B)=>{const I=e.convertURL(B,"src");var H;c(W.src,B),Ae(S.fromDom(W),{src:Rb(e)?(H=B,H+(H.indexOf("?")===-1?"?":"&")+new Date().getTime()):B,"data-mce-src":I})})(L,A.url)):A.error&&(A.error.remove&&(c(L.src,p.transparentSrc),E.push(L),j=!0),((W,B)=>{au(W,ir.translate(["Failed to upload image: {0}",B]))})(e,A.error.message)),{element:L,status:A.status,uploadUri:A.url,blobInfo:P,removed:j}}));return E.length>0&&!Lr(e)?e.undoManager.transact((()=>{K(An(E),(A=>{const R=bn(A);ct(A),R.each((P=>L=>{((j,W)=>j.dom.isEmpty(W.dom)&&te(j.schema.getTextBlockElements()[Le(W)]))(P,L)&&X(L,S.fromHtml('<br data-mce-bogus="1" />'))})(e)),t.removeByUri(A.dom.src)}))})):N&&e.undoManager.dispatchChange(),D})))})))),m=()=>Db(e)?d():Promise.resolve([]),f=b=>no(s,(v=>v(b))),g=()=>(o||(o=$R(r,t)),o.findAll(e.getBody(),f).then(a((b=>{const v=Pe(b,(y=>we(y)?(au(e,y),!1):y.uriType!=="blob"));return Lr(e)||K(v,(y=>{c(y.image.src,y.blobInfo.blobUri()),y.image.src=y.blobInfo.blobUri(),y.image.removeAttribute("data-mce-src")})),v})))),h=b=>b.replace(/src="(blob:[^"]+)"/g,((v,y)=>{const E=r.getResultUri(y);if(E)return'src="'+E+'"';let N=t.getByUri(y);return N||(N=Qt(e.editorManager.get(),((D,A)=>D||A.editorUpload&&A.editorUpload.blobCache.getByUri(y)),void 0)),N?'src="data:'+N.blob().type+";base64,"+N.base64()+'"':v}));return e.on("SetContent",(()=>{Db(e)?m():g()})),e.on("RawSaveContent",(b=>{b.content=h(b.content)})),e.on("GetContent",(b=>{b.source_view||b.format==="raw"||b.format==="tree"||(b.content=h(b.content))})),e.on("PostRender",(()=>{e.parser.addNodeFilter("img",(b=>{K(b,(v=>{const y=v.attr("src");if(!y||t.getByUri(y))return;const E=r.getResultUri(y);E&&v.attr("src",E)}))}))})),{blobCache:t,addFilter:b=>{s.push(b)},uploadImages:d,uploadImagesAuto:m,scanForImages:g,destroy:()=>{t.destroy(),r.destroy(),o=n=null}}},Lx={remove_similar:!0,inherit:!1},Pi={selector:"td,th",...Lx},KR={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Pi},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Pi},tablecellbordercolor:{styles:{borderColor:"%value"},...Pi},tablecellclass:{classes:["%value"],...Pi},tableclass:{selector:"table",classes:["%value"],...Lx},tablecellborderstyle:{styles:{borderStyle:"%value"},...Pi},tablecellborderwidth:{styles:{borderWidth:"%value"},...Pi}},XR=ie(KR),cu=k.each,Io=St.DOM,Zp=e=>te(e)&&Ue(e),Mx=(e,t)=>{const n=t&&t.schema||Cs({}),o=a=>{const i=we(a)?{name:a,classes:[],attrs:{}}:a,l=Io.create(i.name);return((c,d)=>{d.classes.length>0&&Io.addClass(c,d.classes.join(" ")),Io.setAttribs(c,d.attrs)})(l,i),l},r=(a,i,l)=>{let c;const d=i[0],m=Zp(d)?d.name:void 0,f=((b,v)=>{const y=n.getElementRule(b.nodeName.toLowerCase()),E=y?.parentsRequired;return!(!E||!E.length)&&(v&&Se(E,v)?v:E[0])})(a,m);if(f)m===f?(c=d,i=i.slice(1)):c=f;else if(d)c=d,i=i.slice(1);else if(!l)return a;const g=c?o(c):Io.create("div");g.appendChild(a),l&&k.each(l,(b=>{const v=o(b);g.insertBefore(v,a)}));const h=Zp(c)?c.siblings:void 0;return r(g,i,h)},s=Io.create("div");if(e.length>0){const a=e[0],i=o(a),l=Zp(a)?a.siblings:void 0;s.appendChild(r(i,e.slice(1),l))}return s},YR=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=k.trim(e)};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,((o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":k.inArray("checked disabled enabled read-only required".split(" "),s)!==-1&&(n.attrs[s]=s)}if(a==="["){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""}))),n.name=t||"div",n},GR=(e,t)=>{let n="",o=vA(e);if(o==="")return"";const r=g=>we(g)?g.replace(/%(\w+)/g,""):"",s=(g,h)=>Io.getStyle(h??e.getBody(),g,!0);if(we(t)){const g=e.formatter.get(t);if(!g)return"";t=g[0]}if("preview"in t){const g=t.preview;if(g===!1)return"";o=g||o}let a,i=t.block||t.inline||"span";const l=(c=t.selector,we(c)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),k.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),(g=>{const h=k.map(g.split(/(?:~\+|~|\+)/),YR),b=h.pop();return h.length&&(b.siblings=h),b})).reverse()):[]);var c;l.length>0?(l[0].name||(l[0].name=i),i=t.selector,a=Mx(l,e)):a=Mx([i],e);const d=Io.select(i,a)[0]||a.firstChild;cu(t.styles,((g,h)=>{const b=r(g);b&&Io.setStyle(d,h,b)})),cu(t.attributes,((g,h)=>{const b=r(g);b&&Io.setAttrib(d,h,b)})),cu(t.classes,(g=>{const h=r(g);Io.hasClass(d,h)||Io.addClass(d,h)})),e.dispatch("PreviewFormats"),Io.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const m=s("fontSize"),f=/px$/.test(m)?parseInt(m,10):0;return cu(o.split(" "),(g=>{let h=s(g,d);if(!(g==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(h)&&(h=s(g),yl(h).toLowerCase()==="#ffffff")||g==="color"&&yl(h).toLowerCase()==="#000000")){if(g==="font-size"&&/em|%$/.test(h)){if(f===0)return;h=parseFloat(h)/(/%$/.test(h)?100:1)*f+"px"}g==="border"&&h&&(n+="padding:0 2px;"),n+=g+":"+h+";"}})),e.dispatch("AfterPreviewFormats"),Io.remove(a),n},Ix=e=>{const t=(o=>{const r={},s=(a,i)=>{a&&(we(a)?(se(i)||(i=[i]),K(i,(l=>{jt(l.deep)&&(l.deep=!Bo(l)),jt(l.split)&&(l.split=!Bo(l)||un(l)),jt(l.remove)&&Bo(l)&&!un(l)&&(l.remove="none"),Bo(l)&&un(l)&&(l.mixed=!0,l.block_expand=!0),we(l.classes)&&(l.classes=l.classes.split(/\s+/))})),r[a]=i):Ct(a,((l,c)=>{s(c,l)})))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},m={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return l!=="html4"?[f,d,m]:[d,f,m]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,m,f)=>xe(d)&&d.hasAttribute("href"),onformat:(d,m,f)=>{k.each(f,((g,h)=>{i.setAttrib(d,h,g)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>{var m;return(m=d?.customValue)!==null&&m!==void 0?m:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return k.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),(d=>{c[d]={block:d,remove:"all"}})),c})(o)),s(XR()),s(bA(o)),{get:a=>te(a)?r[a]:r,has:a=>Me(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(e),n=tn({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(o=>{o.on("mouseup keydown",(r=>{var s;((a,i,l)=>{const c=a.selection,d=a.getBody();pp(a,null,l),i!==8&&i!==46||!c.isCollapsed()||c.getStart().innerHTML!==Gl||pp(a,xa(d,c.getStart()),!0),i!==37&&i!==39||pp(a,xa(d,c.getStart()),!0)})(o,r.keyCode,(s=o.selection.getRng().endContainer,re(s)&&Ka(s.data,Ft)))}))})(e),Lr(e)||((o,r)=>{o.set({}),r.on("NodeChange",(s=>{Z1(r,s.element,o.get())})),r.on("FormatApply FormatRemove",(s=>{const a=_.from(s.node).map((i=>Ul(i)?i:i.startContainer)).bind((i=>xe(i)?_.some(i):_.from(i.parentElement))).getOrThunk((()=>G1(r)));Z1(r,a,o.get())}))})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(o,r,s)=>{((a,i,l,c)=>{cn(a).formatter.apply(i,l,c)})(e,o,r,s)},remove:(o,r,s,a)=>{((i,l,c,d,m)=>{cn(i).formatter.remove(l,c,d,m)})(e,o,r,s,a)},toggle:(o,r,s)=>{((a,i,l,c)=>{cn(a).formatter.toggle(i,l,c)})(e,o,r,s)},match:(o,r,s,a)=>((i,l,c,d,m)=>cn(i).formatter.match(l,c,d,m))(e,o,r,s,a),closest:o=>((r,s)=>cn(r).formatter.closest(s))(e,o),matchAll:(o,r)=>((s,a,i)=>cn(s).formatter.matchAll(a,i))(e,o,r),matchNode:(o,r,s,a)=>((i,l,c,d,m)=>cn(i).formatter.matchNode(l,c,d,m))(e,o,r,s,a),canApply:o=>((r,s)=>cn(r).formatter.canApply(s))(e,o),formatChanged:(o,r,s,a)=>((i,l,c,d,m,f)=>cn(i).formatter.formatChanged(l,c,d,m,f))(e,n,o,r,s,a),getCssText:Ce(GR,e)}},Fx=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},jx=e=>{const t=qo(),n=tn(0),o=tn(0),r={data:[],typing:!1,beforeChange:()=>{((s,a,i)=>{cn(s).undoManager.beforeChange(a,i)})(e,n,t)},add:(s,a)=>((i,l,c,d,m,f,g)=>cn(i).undoManager.add(l,c,d,m,f,g))(e,r,o,n,t,s,a),dispatchChange:()=>{e.setDirty(!0);const s=tu(e);s.bookmark=Jm(e.selection),e.dispatch("change",{level:s,lastLevel:$s(r.data,o.get()).getOrUndefined()})},undo:()=>((s,a,i,l)=>cn(s).undoManager.undo(a,i,l))(e,r,n,o),redo:()=>((s,a,i)=>cn(s).undoManager.redo(a,i))(e,o,r.data),clear:()=>{((s,a,i)=>{cn(s).undoManager.clear(a,i)})(e,r,o)},reset:()=>{((s,a)=>{cn(s).undoManager.reset(a)})(e,r)},hasUndo:()=>((s,a,i)=>cn(s).undoManager.hasUndo(a,i))(e,r,o),hasRedo:()=>((s,a,i)=>cn(s).undoManager.hasRedo(a,i))(e,r,o),transact:s=>((a,i,l,c)=>cn(a).undoManager.transact(i,l,c))(e,r,n,s),ignore:s=>{((a,i,l)=>{cn(a).undoManager.ignore(i,l)})(e,n,s)},extra:(s,a)=>{((i,l,c,d,m)=>{cn(i).undoManager.extra(l,c,d,m)})(e,r,o,s,a)}};return Lr(e)||((s,a,i)=>{const l=tn(!1),c=d=>{nu(a,!1,i),a.add({},d)};s.on("init",(()=>{a.add()})),s.on("BeforeExecCommand",(d=>{const m=d.command;Fx(m)||(cx(a,i),a.beforeChange())})),s.on("ExecCommand",(d=>{const m=d.command;Fx(m)||c(d)})),s.on("ObjectResizeStart cut",(()=>{a.beforeChange()})),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",(d=>{const m=d.keyCode;if(d.isDefaultPrevented())return;const f=p.os.isMacOS()&&d.key==="Meta";(m>=33&&m<=36||m>=37&&m<=40||m===45||d.ctrlKey||f)&&(c(),s.nodeChanged()),m!==46&&m!==8||s.nodeChanged(),l.get()&&a.typing&&!qp(tu(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())})),s.on("keydown",(d=>{const m=d.keyCode;if(d.isDefaultPrevented())return;if(m>=33&&m<=36||m>=37&&m<=40||m===45)return void(a.typing&&c(d));const f=d.ctrlKey&&!d.altKey||d.metaKey;if((m<16||m>20)&&m!==224&&m!==91&&!a.typing&&!f)return a.beforeChange(),nu(a,!0,i),a.add({},d),void l.set(!0);(p.os.isMacOS()?d.metaKey:d.ctrlKey&&!d.altKey)&&a.beforeChange()})),s.on("mousedown",(d=>{a.typing&&c(d)})),s.on("input",(d=>{var m;d.inputType&&(d.inputType==="insertReplacementText"||(m=d).inputType==="insertText"&&m.data===null||(f=>f.inputType==="insertFromPaste"||f.inputType==="insertFromDrop")(d))&&c(d)})),s.on("AddUndo Undo Redo ClearUndos",(d=>{d.isDefaultPrevented()||s.nodeChanged()}))})(e,r,n),(s=>{s.addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo")})(e),r},QR=[9,27,me.HOME,me.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,me.DOWN,me.UP,me.LEFT,me.RIGHT].concat(p.browser.isFirefox()?[224]:[]),zx="data-mce-placeholder",Ux=e=>e.type==="keydown"||e.type==="keyup",Hx=e=>{const t=e.keyCode;return t===me.BACKSPACE||t===me.DELETE},du=e=>t=>te(t)&&e.test(t.nodeName),Mr=e=>te(e)&&e.nodeType===3,rc=e=>te(e)&&e.nodeType===1,Fo=du(/^(OL|UL|DL)$/),JR=du(/^(OL|UL)$/),uu=du(/^(LI|DT|DD)$/),ZR=du(/^(DT|DD)$/),Da=e=>te(e)&&e.nodeName.toLowerCase()==="br",eg=(e,t)=>te(t)&&t.nodeName in e.schema.getTextBlockElements(),tg=(e,t)=>te(e)&&e.nodeName in t,eO=(e,t)=>te(t)&&t.nodeName in e.schema.getVoidElements(),Ra=(e,t,n)=>{const o=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&o},$x=(e,t)=>e.isChildOf(t,e.getRoot()),qx=(e,t)=>{if(Mr(e))return{container:e,offset:t};const n=Pr.getNode(e,t);return Mr(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&Mr(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&Mr(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},mu=e=>{const t=e.cloneRange(),n=qx(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);const o=qx(e.endContainer,e.endOffset);return t.setEnd(o.container,o.offset),t},Li=St.DOM,Mi=e=>{const t={},n=o=>{let r=e[o?"startContainer":"endContainer"],s=e[o?"startOffset":"endOffset"];if(rc(r)){const a=Li.create("span",{"data-mce-type":"bookmark"});r.hasChildNodes()?(s=Math.min(s,r.childNodes.length-1),o?r.insertBefore(a,r.childNodes[s]):Li.insertAfter(a,r.childNodes[s])):r.appendChild(a),r=a,s=0}t[o?"startContainer":"endContainer"]=r,t[o?"startOffset":"endOffset"]=s};return n(!0),e.collapsed||n(),t},Ii=e=>{const t=o=>{let r=e[o?"startContainer":"endContainer"],s=e[o?"startOffset":"endOffset"];if(r){if(rc(r)&&r.parentNode){const a=r;s=(i=>{var l;let c=(l=i.parentNode)===null||l===void 0?void 0:l.firstChild,d=0;for(;c;){if(c===i)return d;rc(c)&&c.getAttribute("data-mce-type")==="bookmark"||d++,c=c.nextSibling}return-1})(r),r=r.parentNode,Li.remove(a),!r.hasChildNodes()&&Li.isBlock(r)&&r.appendChild(Li.create("br"))}e[o?"startContainer":"endContainer"]=r,e[o?"startOffset":"endOffset"]=s}};t(!0),t();const n=Li.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),mu(n)},Wx=St.DOM,ng=(e,t)=>{const n=k.grep(e.select("ol,ul",t));k.each(n,(o=>{((r,s)=>{const a=s.parentElement;if(a&&a.nodeName==="LI"&&a.firstChild===s){const i=a.previousSibling;i&&i.nodeName==="LI"?(i.appendChild(s),Ra(r,a)&&Wx.remove(a)):Wx.setStyle(a,"listStyleType","none")}if(Fo(a)){const i=a.previousSibling;i&&i.nodeName==="LI"&&i.appendChild(s)}})(e,o)}))},Vx=["OL","UL","DL"],Kx=Vx.join(","),sc=(e,t)=>{const n=t||e.selection.getStart(!0);return e.dom.getParent(n,Kx,ac(e,n))},og=e=>{const t=e.selection.getSelectedBlocks();return Pe(((n,o)=>{const r=k.map(o,(s=>n.dom.getParent(s,"li,dd,dt",ac(n,s))||s));return So(r)})(e,t),uu)},rg=(e,t)=>{const n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},ac=(e,t)=>{const n=e.dom.getParents(t,e.dom.isBlock);return $t(n,(r=>{return(i=>i.nodeName.toLowerCase()!==Sn(e))(r)&&(s=e.schema,!Fo(a=r)&&!uu(a)&&yt(Vx,(i=>s.isValidChild(a.nodeName,i))));var s,a})).getOr(e.getBody())},Xx=(e,t)=>{const n=e.dom.getParents(t,"ol,ul",ac(e,t));return oo(n)},tO=(e,t)=>{const n=qe(t,(o=>Xx(e,o).getOr(o)));return So(n)},fu=e=>/\btox\-/.test(e.className),Yx=(e,t)=>t!==null&&!e.dom.isEditable(t),sg=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return Yx(e,n)||!e.selection.isEditable()},Oa=(e,t,n)=>e.dispatch("ListMutation",{action:t,element:n}),Gx=(e,t,n={})=>{const o=e.dom,r=e.schema.getBlockElements(),s=o.createFragment(),a=Sn(e),i=gi(e);let l,c,d=!1;for(c=o.create(a,{...i,...n.style?{style:n.style}:{}}),tg(t.firstChild,r)||s.appendChild(c);l=t.firstChild;){const m=l.nodeName;d||m==="SPAN"&&l.getAttribute("data-mce-type")==="bookmark"||(d=!0),tg(l,r)?(s.appendChild(l),c=null):(c||(c=o.create(a,i),s.appendChild(c)),c.appendChild(l))}return!d&&c&&c.appendChild(o.create("br",{"data-mce-bogus":"1"})),s},ic=e=>ut(e,"OL,UL"),Qx=e=>Bt(e).exists(ic),Ba=e=>"listAttributes"in e,Jx=e=>"isComment"in e,Zx=e=>e.depth>0,nO=e=>e.isSelected,oO=e=>{const t=gt(e),n=Wn(e).exists(ic)?t.slice(0,-1):t;return qe(n,Ut)},ew=(e,t)=>{X(e.item,t.list)},rO=(e,t)=>{const n={list:S.fromTag(t,e),item:S.fromTag("li",e)};return X(n.list,n.item),n},tw=(e,t,n)=>{const o=t.slice(0,n.depth);return oo(o).each((r=>{if(Ba(n)){const s=((a,i,l)=>{const c=S.fromTag("li",a);return Ae(c,i),Re(c,l),c})(e,n.itemAttributes,n.content);((a,i)=>{X(a.list,i),a.item=i})(r,s),((a,i)=>{Le(a.list)!==i.listType&&(a.list=Ko(a.list,i.listType)),Ae(a.list,i.listAttributes)})(r,n)}else if((s=>"isFragment"in s)(n))Re(r.item,n.content);else{const s=S.fromHtml(`<!--${n.content}-->`);X(r.list,s)}})),o},nw=e=>(K(e,((t,n)=>{((o,r)=>{const s=o[r].depth,a=l=>l.depth===s&&!l.dirty,i=l=>l.depth<s;return go(wo(o.slice(0,r)),a,i).orThunk((()=>go(o.slice(r+1),a,i)))})(e,n).fold((()=>{t.dirty&&Ba(t)&&(o=>{o.listAttributes=er(o.listAttributes,((r,s)=>s!=="start"))})(t)}),(o=>{return s=o,void(Ba(r=t)&&Ba(s)&&(r.listType=s.listType,r.listAttributes={...s.listAttributes}));var r,s}))})),e),ow=(e,t,n,o)=>{var r;if(xt(o))return[{depth:e+1,content:(r=o.dom.nodeValue)!==null&&r!==void 0?r:"",dirty:!1,isSelected:!1,isComment:!0}];t.each((i=>{pe(i.start,o)&&n.set(!0)}));const s=((i,l,c)=>bn(i).filter(nt).map((d=>({depth:l,dirty:!1,isSelected:c,content:oO(i),itemAttributes:Zt(i),listAttributes:Zt(d),listType:Le(d),isInPreviousLi:!1}))))(o,e,n.get());t.each((i=>{pe(i.end,o)&&n.set(!1)}));const a=Wn(o).filter(ic).map((i=>pu(e,t,n,i))).getOr([]);return s.toArray().concat(a)},sO=(e,t,n,o)=>Bt(o).filter(ic).fold((()=>ow(e,t,n,o)),(r=>{const s=Qt(gt(o),((a,i,l)=>{if(l===0)return a;if(ut(i,"LI"))return a.concat(ow(e,t,n,i));{const c={isFragment:!0,depth:e,content:[i],isSelected:!1,dirty:!1,parentListType:Le(r)};return a.concat(c)}}),[]);return pu(e,t,n,r).concat(s)})),pu=(e,t,n,o)=>qt(gt(o),(r=>(ic(r)?pu:sO)(e+1,t,n,r))),aO=(e,t)=>{const n=nw(t);return((o,r)=>{let s=_.none();const a=Qt(r,((i,l,c)=>Jx(l)?c===0?(s=_.some(l),i):tw(o,i,l):l.depth>i.length?((d,m,f)=>{const g=((b,v,y)=>{const E=[];for(let N=0;N<y;N++)E.push(rO(b,Ba(v)?v.listType:v.parentListType));return E})(d,f,f.depth-m.length);var h;return(b=>{for(let v=1;v<b.length;v++)ew(b[v-1],b[v])})(g),((b,v)=>{for(let y=0;y<b.length-1;y++)Vc(b[y].item,"list-style-type","none");oo(b).each((y=>{Ba(v)&&(Ae(y.list,v.listAttributes),Ae(y.item,v.itemAttributes)),Re(y.item,v.content)}))})(g,f),h=g,Wt(oo(m),sn(h),ew),m.concat(g)})(o,i,l):tw(o,i,l)),[]);return s.each((i=>{const l=S.fromHtml(`<!--${i.content}-->`);sn(a).each((c=>{q(c.list,l)}))})),sn(a).map((i=>i.list))})(e.contentDocument,n).toArray()},iO=(e,t,n)=>{const o=((r,s)=>{const a=tn(!1);return qe(r,(i=>({sourceList:i,entries:pu(0,s,a,i)})))})(t,(r=>{const s=qe(og(r),S.fromDom);return Wt($t(s,$o(Qx)),$t(wo(s),$o(Qx)),((a,i)=>({start:a,end:i})))})(e));K(o,(r=>{((i,l,c)=>{K(Pe(l,nO),(d=>((m,f,g)=>{switch(f){case"Indent":if(!((h,b)=>Vb(h).map((v=>v>=b)).getOr(!0))(m,g.depth))return;g.depth++;break;case"Outdent":g.depth--;break;case"Flatten":g.depth=0}g.dirty=!0})(i,c,d)))})(e,r.entries,n);const s=((i,l)=>qt(((c,d)=>{if(c.length===0)return[];{let m=d(c[0]);const f=[];let g=[];for(let h=0,b=c.length;h<b;h++){const v=c[h],y=d(v);y!==m&&(f.push(g),g=[]),m=y,g.push(v)}return g.length!==0&&f.push(g),f}})(l,Zx),(c=>sn(c).exists(Zx)?aO(i,c):((d,m)=>{const f=nw(m);return qe(f,(g=>{const h=Jx(g)?pl([S.fromHtml(`<!--${g.content}-->`)]):pl(g.content),b=Ba(g)?g.itemAttributes:{};return S.fromDom(Gx(d,h.dom,b))}))})(i,c))))(e,r.entries);var a;K(s,(i=>{Oa(e,n==="Indent"?"IndentList":"OutdentList",i.dom)})),a=r.sourceList,K(s,(i=>{dn(a,i)})),ct(r.sourceList)}))},Ps=St.DOM,lO=wn("dd"),rw=wn("dt"),cO=e=>{rw(e)&&Ko(e,"dd")},dO=(e,t,n)=>{K(n,t==="Indent"?cO:o=>((r,s)=>{lO(s)?Ko(s,"dt"):rw(s)&&Nn(s).each((a=>((i,l,c)=>{const d=Ps.select('span[data-mce-type="bookmark"]',l),m=Gx(i,c),f=Ps.createRng();f.setStartAfter(c),f.setEndAfter(l);const g=f.extractContents();for(let b=g.firstChild;b;b=b.firstChild)if(b.nodeName==="LI"&&i.dom.isEmpty(b)){Ps.remove(b);break}i.dom.isEmpty(g)||Ps.insertAfter(g,l),Ps.insertAfter(m,l);const h=c.parentElement;h&&Ra(i.dom,h)&&(b=>{const v=b.parentNode;v&&k.each(d,(y=>{v.insertBefore(y,c.parentNode)})),Ps.remove(b)})(h),Ps.remove(c),Ra(i.dom,l)&&Ps.remove(l)})(r,a.dom,s.dom)))})(e,o))},uO=(e,t)=>{const n=An((s=>{const a=(l=>{const c=Xx(l,l.selection.getStart()),d=Pe(l.selection.getSelectedBlocks(),JR);return c.toArray().concat(d)})(s),i=(l=>{const c=l.selection.getStart();return l.dom.getParents(c,"ol,ul",ac(l,c))})(s);return $t(i,(l=>{return c=S.fromDom(l),bn(c).exists((d=>uu(d.dom)&&Bt(d).exists((m=>!Fo(m.dom)))&&Wn(d).exists((m=>!Fo(m.dom)))));var c})).fold((()=>tO(s,a)),(l=>[l]))})(e)),o=An((s=>Pe(og(s),ZR))(e));let r=!1;if(n.length||o.length){const s=e.selection.getBookmark();iO(e,n,t),dO(e,t,o),e.selection.moveToBookmark(s),e.selection.setRng(mu(e.selection.getRng())),e.nodeChanged(),r=!0}return r},ag=(e,t)=>!(n=>{const o=sc(n);return Yx(n,o)||!n.selection.isEditable()})(e)&&uO(e,t),sw=e=>ag(e,"Indent"),ig=e=>ag(e,"Outdent"),gu=e=>ag(e,"Flatten"),Fi=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},aw=(e,t)=>{k.each(t,((n,o)=>{e.setAttribute(o,n)}))},ji=(e,t,n)=>{((o,r,s)=>{const a=s["list-style-type"]?s["list-style-type"]:null;o.setStyle(r,"list-style-type",a)})(e,t,n),((o,r,s)=>{aw(r,s["list-attributes"]),k.each(o.select("li",r),(a=>{aw(a,s["list-item-attributes"])}))})(e,t,n)},hu=(e,t)=>te(t)&&!tg(t,e.schema.getBlockElements()),lg=(e,t,n,o)=>{let r=t[n?"startContainer":"endContainer"];const s=t[n?"startOffset":"endOffset"];rc(r)&&(r=r.childNodes[Math.min(s,r.childNodes.length-1)]||r),!n&&Da(r.nextSibling)&&(r=r.nextSibling);const a=(i,l)=>{var c;const d=new ln(i,(g=>{for(;!e.dom.isBlock(g)&&g.parentNode&&o!==g;)g=g.parentNode;return g})(i)),m=l?"next":"prev";let f;for(;f=d[m]();)if(!eO(e,f)&&!Kr(f.textContent)&&((c=f.textContent)===null||c===void 0?void 0:c.length)!==0)return _.some(f);return _.none()};if(n&&Mr(r))if(Kr(r.textContent))r=a(r,!1).getOr(r);else for(r.parentNode!==null&&hu(e,r.parentNode)&&(r=r.parentNode);r.previousSibling!==null&&(hu(e,r.previousSibling)||Mr(r.previousSibling));)r=r.previousSibling;if(!n&&Mr(r))if(Kr(r.textContent))r=a(r,!0).getOr(r);else for(r.parentNode!==null&&hu(e,r.parentNode)&&(r=r.parentNode);r.nextSibling!==null&&(hu(e,r.nextSibling)||Mr(r.nextSibling));)r=r.nextSibling;for(;r.parentNode!==o;){const i=r.parentNode;if(eg(e,r)||/^(TD|TH)$/.test(i.nodeName))return r;r=i}return r},cg=(e,t,n)=>{const o=e.selection.getRng();let r="LI";const s=ac(e,((c,d)=>{const m=c.selection.getStart(!0),f=lg(c,d,!0,c.getBody());return g=S.fromDom(f),h=S.fromDom(d.commonAncestorContainer),dm(g,Ce(pe,h))?d.commonAncestorContainer:m;var g,h})(e,o)),a=e.dom;if(a.getContentEditable(e.selection.getNode())==="false")return;(t=t.toUpperCase())==="DL"&&(r="DT");const i=Mi(o),l=Pe(((c,d,m)=>{const f=[],g=c.dom,h=lg(c,d,!0,m),b=lg(c,d,!1,m);let v;const y=[];for(let E=h;E&&(y.push(E),E!==b);E=E.nextSibling);return k.each(y,(E=>{var N;if(eg(c,E))return f.push(E),void(v=null);if(g.isBlock(E)||Da(E))return Da(E)&&g.remove(E),void(v=null);const D=E.nextSibling;Ei.isBookmarkNode(E)&&(Fo(D)||eg(c,D)||!D&&E.parentNode===m)?v=null:(v||(v=g.create("p"),(N=E.parentNode)===null||N===void 0||N.insertBefore(v,E),f.push(v)),v.appendChild(E))})),f})(e,o,s),e.dom.isEditable);k.each(l,(c=>{let d;const m=c.previousSibling,f=c.parentNode;uu(f)||(m&&Fo(m)&&m.nodeName===t&&((g,h,b)=>{const v=g.getStyle(h,"list-style-type");let y=b?b["list-style-type"]:"";return y=y===null?"":y,v===y})(a,m,n)?(d=m,c=a.rename(c,r),m.appendChild(c)):(d=a.create(t),f.insertBefore(d,c),d.appendChild(c),c=a.rename(c,r)),((g,h)=>{k.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],(b=>g.setStyle(h,b,"")))})(a,c),ji(a,d,n),dg(e.dom,d))})),e.selection.setRng(Ii(i))},iw=(e,t,n)=>{return((r,s)=>Fo(r)&&r.nodeName===s?.nodeName)(t,n)&&((r,s,a)=>r.getStyle(s,"list-style-type",!0)===r.getStyle(a,"list-style-type",!0))(e,t,n)&&(o=n,t.className===o.className);var o},dg=(e,t)=>{let n,o=t.nextSibling;if(iw(e,t,o)){const r=o;for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(o=t.previousSibling,iw(e,t,o)){const r=o;for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},mO=(e,t,n,o)=>{if(t.nodeName!==n){const r=e.dom.rename(t,n);ji(e.dom,r,o),Oa(e,Fi(n),r)}else ji(e.dom,t,o),Oa(e,Fi(n),t)},fO=(e,t,n,o)=>{if(t.classList.forEach(((r,s,a)=>{r.startsWith("tox-")&&(a.remove(r),a.length===0&&t.removeAttribute("class"))})),t.nodeName!==n){const r=e.dom.rename(t,n);ji(e.dom,r,o),Oa(e,Fi(n),r)}else ji(e.dom,t,o),Oa(e,Fi(n),t)},lw=e=>"list-style-type"in e,ug=(e,t,n)=>{const o=sc(e);if(sg(e,o))return;const r=(a=>{const i=sc(a),l=a.selection.getSelectedBlocks();return((c,d)=>te(c)&&d.length===1&&d[0]===c)(i,l)?(c=>Pe(c.querySelectorAll(Kx),Fo))(i):Pe(l,(c=>Fo(c)&&i!==c))})(e),s=Ue(n)?n:{};r.length>0?((a,i,l,c,d)=>{const m=Fo(i);if(!m||i.nodeName!==c||lw(d)||fu(i)){cg(a,c,d);const f=Mi(a.selection.getRng()),g=m?[i,...l]:l,h=m&&fu(i)?fO:mO;k.each(g,(b=>{h(a,b,c,d)})),a.selection.setRng(Ii(f))}else gu(a)})(e,o,r,t,s):((a,i,l,c)=>{if(i!==a.getBody())if(i)if(i.nodeName!==l||lw(c)||fu(i)){const d=Mi(a.selection.getRng());fu(i)&&i.classList.forEach(((f,g,h)=>{f.startsWith("tox-")&&(h.remove(f),h.length===0&&i.removeAttribute("class"))})),ji(a.dom,i,c);const m=a.dom.rename(i,l);dg(a.dom,m),a.selection.setRng(Ii(d)),cg(a,l,c),Oa(a,Fi(l),m)}else gu(a);else cg(a,l,c),Oa(a,Fi(l),i)})(e,o,t,s)},cw=(e,t,n,o)=>{let r=t.startContainer;const s=t.startOffset;if(Mr(r)&&(n?s<r.data.length:s>0))return r;const a=e.schema.getNonEmptyElements();rc(r)&&(r=Pr.getNode(r,s));const i=new ln(r,o);n&&((c,d)=>!!Da(d)&&c.isBlock(d.nextSibling)&&!Da(d.previousSibling))(e.dom,r)&&i.next();const l=n?i.next.bind(i):i.prev2.bind(i);for(;r=l();)if(r.nodeName==="LI"&&!r.hasChildNodes()||a[r.nodeName]||Mr(r)&&r.data.length>0)return r;return null},dw=(e,t)=>{const n=t.childNodes;return n.length===1&&!Fo(n[0])&&e.isBlock(n[0])},uw=(e,t,n)=>{let o;const r=dw(e,n)?n.firstChild:n;if(((s,a)=>{var i;dw(s,a)&&(i=a.firstChild,_.from(i).map(S.fromDom).filter(ao).exists((l=>Gr(l)&&!Se(["details"],Le(l)))))&&s.remove(a.firstChild,!0)})(e,t),!Ra(e,t,!0))for(;o=t.firstChild;)r.appendChild(o)},mg=(e,t,n)=>{let o;const r=t.parentNode;if(!$x(e,t)||!$x(e,n))return;Fo(n.lastChild)&&(o=n.lastChild),r===n.lastChild&&Da(r.previousSibling)&&e.remove(r.previousSibling);const s=n.lastChild;s&&Da(s)&&t.hasChildNodes()&&e.remove(s),Ra(e,n,!0)&&en(S.fromDom(n)),uw(e,t,n),o&&n.appendChild(o);const a=Ze(S.fromDom(n),S.fromDom(t))?e.getParents(t,Fo,n):[];e.remove(t),K(a,(i=>{Ra(e,i)&&i!==e.getRoot()&&e.remove(i)}))},pO=(e,t)=>{const n=e.dom,o=e.selection,r=o.getStart(),s=rg(e,r),a=n.getParent(o.getStart(),"LI",s);if(a){const i=a.parentElement;if(i===e.getBody()&&Ra(n,i))return!0;const l=mu(o.getRng()),c=n.getParent(cw(e,l,t,s),"LI",s),d=c&&(t?n.isChildOf(a,c):n.isChildOf(c,a));if(c&&c!==a&&!d)return e.undoManager.transact((()=>{var m,f;t?((g,h,b,v)=>{const y=g.dom;if(y.isEmpty(v))((E,N,D)=>{en(S.fromDom(D)),mg(E.dom,N,D),E.selection.setCursorLocation(D,0)})(g,b,v);else{const E=Mi(h);mg(y,b,v),g.selection.setRng(Ii(E))}})(e,l,c,a):((f=(m=a).parentNode)===null||f===void 0?void 0:f.firstChild)===m?ig(e):((g,h,b,v)=>{const y=Mi(h);mg(g.dom,b,v);const E=Ii(y);g.selection.setRng(E)})(e,l,a,c)})),!0;if(d&&!t&&c!==a){const m=l.commonAncestorContainer.parentElement;return!(!m||n.isChildOf(c,m)||(e.undoManager.transact((()=>{const f=Mi(l);uw(n,m,c),m.remove();const g=Ii(f);e.selection.setRng(g)})),0))}if(!c&&!t&&l.startOffset===0&&l.endOffset===0)return e.undoManager.transact((()=>{gu(e)})),!0}return!1},fg=e=>{const t=e.selection.getStart(),n=rg(e,t),o=e.dom.getParent(t,"LI,DT,DD",n);return te(o)||og(e).length>0},pg=(e,t)=>{const n=e.selection;return!sg(e,n.getNode())&&(n.isCollapsed()?((o,r)=>pO(o,r)||((s,a)=>{const i=s.dom,l=s.selection.getStart(),c=rg(s,l),d=i.getParent(l,i.isBlock,c);if(d&&i.isEmpty(d,void 0,{checkRootAsContent:!0})){const m=mu(s.selection.getRng()),f=cw(s,m,a,c),g=i.getParent(f,"LI",c);if(f&&g){const h=E=>Se(["td","th","caption"],Le(E)),b=E=>E.dom===c,v=Nr(S.fromDom(g),h,b),y=Nr(S.fromDom(m.startContainer),h,b);return!!$a(v,y,pe)&&(s.undoManager.transact((()=>{const E=g.parentNode;((N,D,A)=>{const R=N.getParent(D.parentNode,N.isBlock,A);N.remove(D),R&&N.isEmpty(R)&&N.remove(R)})(i,d,c),dg(i,E),s.selection.select(f,!0),s.selection.collapse(a)})),!0)}}return!1})(o,r))(e,t):(o=>!!fg(o)&&(o.undoManager.transact((()=>{let r=!0;const s=()=>r=!1;o.on("input",s),o.execCommand("Delete"),o.off("input",s),r&&o.dispatch("input"),ng(o.dom,o.getBody())})),!0))(e))},gO=(e,t)=>({from:e,to:t}),gg=(e,t)=>{const n=S.fromDom(e),o=S.fromDom(t.container());return $d(n,o).map((r=>((s,a)=>({block:s,position:a}))(r,t)))},mw=(e,t)=>Nr(t,(n=>Nl(n)||Xo(n.dom)),(n=>pe(n,e))).filter(nt).getOr(e),fw=(e,t)=>{const n=((o,r)=>{const s=gt(o);return Hs(s,(a=>r.isBlock(Le(a)))).fold(ie(s),(a=>s.slice(0,a)))})(e,t);return K(n,ct),n},pw=(e,t,n)=>{const o=Zr(n,t);return $t(o.reverse(),(r=>Fn(e,r))).each(ct)},hO=(e,t,n,o,r)=>{if(Fn(o,n))return ws(n),zn(n.dom);((a,i)=>Pe(In(i),(l=>!Fn(a,l))).length===0)(o,r)&&Fn(o,t)&&dn(r,S.fromTag("br"));const s=io(n.dom,G.before(r.dom));return K(fw(t,o),(a=>{dn(r,a)})),pw(o,e,t),s},bO=(e,t,n,o)=>{if(Fn(o,n)){if(Fn(o,t)){const s=i=>{const l=(c,d)=>Bt(c).fold((()=>d),(m=>((f,g)=>f.isInline(Le(g)))(o,m)?l(m,d.concat(vn(m))):d));return l(i,[])},a=qr(s(n),((i,l)=>(ne(i,l),l)),ui());en(t),X(t,a)}return ct(n),zn(t.dom)}const r=Yo(n.dom);return K(fw(t,o),(s=>{X(n,s)})),pw(o,e,t),r},gw=(e,t)=>{Ci(e,t.dom).bind((n=>_.from(n.getNode()))).map(S.fromDom).filter(xs).each(ct)},hw=(e,t,n,o)=>(gw(!0,t),gw(!1,n),((r,s)=>Ze(s,r)?((a,i)=>{const l=Zr(i,a);return _.from(l[l.length-1])})(s,r):_.none())(t,n).fold(Ce(bO,e,t,n,o),Ce(hO,e,t,n,o))),bw=(e,t,n,o,r)=>t?hw(e,o,n,r):hw(e,n,o,r),hg=(e,t)=>{const n=S.fromDom(e.getBody());return((r,s,a,i)=>i.collapsed?((l,c,d,m)=>{const f=gg(c,G.fromRangeStart(m)),g=f.bind((h=>Do(d,c,h.position).bind((b=>gg(c,b).map((v=>((y,E,N,D)=>Ht(D.position.getNode())&&!Fn(y,D.block)?Ci(!1,D.block.dom).bind((A=>A.isEqual(D.position)?Do(N,E,A).bind((R=>gg(E,R))):_.some(D))).getOr(D):D)(l,c,d,v)))))));return Wt(f,g,gO).filter((h=>(b=>!pe(b.from.block,b.to.block))(h)&&((b,v)=>{const y=S.fromDom(b);return pe(mw(y,v.from.block),mw(y,v.to.block))})(c,h)&&(b=>Pt(b.from.block.dom)===!1&&Pt(b.to.block.dom)===!1)(h)&&(b=>{const v=y=>H0(y)||Sm(y.dom)||di(y);return v(b.from.block)&&v(b.to.block)})(h)&&(b=>!(Ze(b.to.block,b.from.block)||Ze(b.from.block,b.to.block)))(h)))})(r,s,a,i):_.none())(e.schema,n.dom,t,e.selection.getRng()).map((r=>()=>{bw(n,t,r.from.block,r.to.block,e.schema).each((s=>{e.selection.setRng(s.toRange())}))}))},vw=(e,t)=>{const n=S.fromDom(t),o=Ce(pe,e);return _r(n,Nl,o).isSome()},vO=e=>{const t=S.fromDom(e.getBody());return((n,o)=>{const r=io(n.dom,G.fromRangeStart(o)).isNone(),s=Zn(n.dom,G.fromRangeEnd(o)).isNone();return!((a,i)=>vw(a,i.startContainer)||vw(a,i.endContainer))(n,o)&&r&&s})(t,e.selection.getRng())?(n=>_.some((()=>{n.setContent(""),n.selection.setCursorLocation()})))(e):((n,o,r)=>{const s=o.getRng();return Wt($d(n,S.fromDom(s.startContainer)),$d(n,S.fromDom(s.endContainer)),((a,i)=>pe(a,i)?_.none():_.some((()=>{s.deleteContents(),bw(n,!0,a,i,r).each((l=>{o.setRng(l.toRange())}))})))).getOr(_.none())})(t,e.selection,e.schema)},bg=(e,t)=>e.selection.isCollapsed()?_.none():vO(e),ns=(e,t,n,o,r)=>_.from(t._selectionOverrides.showCaret(e,n,o,r)),lc=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?_.none():_.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(t)),vg=(e,t,n)=>t.collapsed?((o,r,s)=>{const a=df(1,o.getBody(),r),i=G.fromRangeStart(a),l=i.getNode();if(Pl(l))return ns(1,o,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(Pl(c))return ns(1,o,c,!1,!1);const d=_a(o.dom.getRoot(),i.getNode());return Pl(d)?ns(1,o,d,!1,s):_.none()})(e,t,n).getOr(t):t,yO=e=>Ds(e)||ql(e),CO=e=>Rs(e)||Wl(e),yw=(e,t,n,o,r,s)=>{ns(o,e,s.getNode(!r),r,!0).each((a=>{if(t.collapsed){const i=t.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else t.deleteContents();e.selection.setRng(a)})),((a,i)=>{re(i)&&i.data.length===0&&a.remove(i)})(e.dom,n)},yg=(e,t)=>((n,o)=>{const r=n.selection.getRng();if(!re(r.commonAncestorContainer))return _.none();const s=o?1:-1,a=Or(n.getBody()),i=Ce(uf,o?a.next:a.prev),l=o?yO:CO,c=jl(s,n.getBody(),r),d=i(c),m=d&&Lo(o,d);if(!m||!Sd(c,m))return _.none();if(l(m))return _.some((()=>yw(n,r,c.getNode(),s,o,m)));const f=i(m);return f&&l(f)&&Sd(m,f)?_.some((()=>yw(n,r,c.getNode(),s,o,f))):_.none()})(e,t),Cg=(e,t)=>{const n=e.getBody();return t?zn(n).filter(Ds):Yo(n).filter(Rs)},xg=e=>{const t=e.selection.getRng();return!t.collapsed&&(Cg(e,!0).exists((n=>n.isEqual(G.fromRangeStart(t))))||Cg(e,!1).exists((n=>n.isEqual(G.fromRangeEnd(t)))))},jo=ho([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Cw=(e,t,n,o)=>Do(t,e,n).bind((r=>{return s=r.getNode(),te(s)&&(Nl(S.fromDom(s))||di(S.fromDom(s)))||((a,i,l,c,d)=>{const m=f=>d.isInline(f.nodeName.toLowerCase())&&!Dr(l,c,a);return sv(!i,l).fold((()=>sv(i,c).fold(_t,m)),m)})(e,t,n,r,o)?_.none():t&&Pt(r.getNode())||!t&&Pt(r.getNode(!0))?((a,i,l,c,d)=>{const m=d.getNode(!l);return $d(S.fromDom(i),S.fromDom(c.getNode())).map((f=>Fn(a,f)?jo.remove(f.dom):jo.moveToElement(m))).orThunk((()=>_.some(jo.moveToElement(m))))})(o,e,t,n,r):t&&Rs(n)||!t&&Ds(n)?_.some(jo.moveToPosition(r)):_.none();var s})),xw=(e,t)=>_.from(_a(e.getBody(),t)),xO=(e,t)=>{const n=e.selection.getNode();return xw(e,n).filter(Pt).fold((()=>((o,r,s,a)=>{const i=df(r?1:-1,o,s),l=G.fromRangeStart(i),c=S.fromDom(o);return!r&&Rs(l)?_.some(jo.remove(l.getNode(!0))):r&&Ds(l)?_.some(jo.remove(l.getNode())):!r&&Ds(l)&&zd(c,l,a)?Iy(c,l,a).map((d=>jo.remove(d.getNode()))):r&&Rs(l)&&Xf(c,l,a)?dD(c,l,a).map((d=>jo.remove(d.getNode()))):((d,m,f,g)=>((h,b)=>{const v=b.getNode(!h),y=h?"after":"before";return xe(v)&&v.getAttribute("data-mce-caret")===y})(m,f)?((h,b)=>kt(b)?_.none():h&&Pt(b.nextSibling)?_.some(jo.moveToElement(b.nextSibling)):!h&&Pt(b.previousSibling)?_.some(jo.moveToElement(b.previousSibling)):_.none())(m,f.getNode(!m)).orThunk((()=>Cw(d,m,f,g))):Cw(d,m,f,g).bind((h=>((b,v,y)=>y.fold((E=>_.some(jo.remove(E))),(E=>_.some(jo.moveToElement(E))),(E=>Dr(v,E,b)?_.none():_.some(jo.moveToPosition(E)))))(d,f,h))))(o,r,l,a)})(e.getBody(),t,e.selection.getRng(),e.schema).map((o=>()=>o.fold(((r,s)=>a=>(r._selectionOverrides.hideFakeCaret(),Os(r,s,S.fromDom(a)),!0))(e,t),((r,s)=>a=>{const i=s?G.before(a):G.after(a);return r.selection.setRng(i.toRange()),!0})(e,t),(r=>s=>(r.selection.setRng(s.toRange()),!0))(e))))),(()=>_.some(Ee)))},ww=e=>{const t=e.dom,n=e.selection,o=_a(e.getBody(),n.getNode());if(Xo(o)&&t.isBlock(o)&&t.isEmpty(o)){const r=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(r),n.setRng(G.before(r).toRange())}return!0},wg=(e,t)=>e.selection.isCollapsed()?xO(e,t):((n,o)=>{const r=n.selection.getNode();return Pt(r)&&!rd(r)?xw(n,r.parentNode).filter(Pt).fold((()=>_.some((()=>{var s;s=S.fromDom(n.getBody()),K(Tn(s,".mce-offscreen-selection"),ct),Os(n,o,S.fromDom(n.selection.getNode())),Zf(n)}))),(()=>_.some(Ee))):xg(n)?_.some((()=>{sC(n,n.selection.getRng(),S.fromDom(n.getBody()))})):_.none()})(e,t),Sw=e=>e.hasOwnProperty("text"),Ew=e=>e.hasOwnProperty("marker"),kw=(e,t)=>{const n=(r,s)=>{if(re(r))return{text:r,offset:s};{const a=t(),i=r.childNodes;return s<i.length?(r.insertBefore(a,i[s]),{marker:a,before:!0}):(r.appendChild(a),{marker:a,before:!1})}},o=n(e.endContainer,e.endOffset);return{start:n(e.startContainer,e.startOffset),end:o}},_w=e=>{var t,n;const{start:o,end:r}=e,s=new window.Range;return Sw(o)?s.setStart(o.text,o.offset):Ew(o)&&(o.before?s.setStartBefore(o.marker):s.setStartAfter(o.marker),(t=o.marker.parentNode)===null||t===void 0||t.removeChild(o.marker)),Sw(r)?s.setEnd(r.text,r.offset):Ew(r)&&(r.before?s.setEndBefore(r.marker):s.setEndAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),s},Sg=(e,t)=>{var n;const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),s=o.getParent(e.selection.getEnd(),o.isBlock),a=e.getBody();if(((n=r?.nodeName)===null||n===void 0?void 0:n.toLowerCase())==="div"&&r&&s&&r===a.firstChild&&s===a.lastChild&&!o.isEmpty(a)){const i=r.cloneNode(!1),l=()=>{if(t?nC(e):Hd(e),a.firstChild!==r){const c=kw(e.selection.getRng(),(()=>document.createElement("span")));Array.from(a.childNodes).forEach((d=>i.appendChild(d))),a.appendChild(i),e.selection.setRng(_w(c))}};return _.some(l)}return _.none()},Eg=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=G.fromRangeStart(n.selection.getRng());return Do(o,n.getBody(),r).filter((s=>o?sD(s):aD(s))).bind((s=>cf(o?0:-1,s))).map((s=>()=>n.selection.select(s)))})(e,t):_.none(),zi=re,Nw=e=>zi(e)&&e.data[0]===yn,Aw=e=>zi(e)&&e.data[e.data.length-1]===yn,Tw=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(yn)},bu=(e,t)=>e?(n=>{var o;if(zi(n.previousSibling))return Aw(n.previousSibling)||n.previousSibling.appendData(yn),n.previousSibling;if(zi(n))return Nw(n)||n.insertData(0,yn),n;{const r=Tw(n);return(o=n.parentNode)===null||o===void 0||o.insertBefore(r,n),r}})(t):(n=>{var o,r;if(zi(n.nextSibling))return Nw(n.nextSibling)||n.nextSibling.insertData(0,yn),n.nextSibling;if(zi(n))return Aw(n)||n.appendData(yn),n;{const s=Tw(n);return n.nextSibling?(o=n.parentNode)===null||o===void 0||o.insertBefore(s,n.nextSibling):(r=n.parentNode)===null||r===void 0||r.appendChild(s),s}})(t),wO=Ce(bu,!0),SO=Ce(bu,!1),Dw=(e,t)=>re(e.container())?bu(t,e.container()):bu(t,e.getNode()),Rw=(e,t)=>{const n=t.get();return n&&e.container()===n&&Ss(n)},kg=(e,t)=>t.fold((n=>{ya(e.get());const o=wO(n);return e.set(o),_.some(G(o,o.length-1))}),(n=>zn(n).map((o=>{if(Rw(o,e)){const r=e.get();return G(r,1)}{ya(e.get());const r=Dw(o,!0);return e.set(r),G(r,1)}}))),(n=>Yo(n).map((o=>{if(Rw(o,e)){const r=e.get();return G(r,r.length-1)}{ya(e.get());const r=Dw(o,!1);return e.set(r),G(r,r.length-1)}}))),(n=>{ya(e.get());const o=SO(n);return e.set(o),_.some(G(o,1))})),Ow=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n].apply(null,t);if(o.isSome())return o}return _.none()},Vn=ho([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Bw=(e,t)=>_s(t,e)||e,EO=(e,t,n)=>{const o=Zy(n),r=Bw(t,o.container());return Bs(e,r,o).fold((()=>Zn(r,o).bind(Ce(Bs,e,r)).map((s=>Vn.before(s)))),_.none)},kO=(e,t)=>xa(e,t)===null,Pw=(e,t,n)=>Bs(e,t,n).filter(Ce(kO,t)),_O=(e,t,n)=>{const o=eC(n);return Pw(e,t,o).bind((r=>io(r,o).isNone()?_.some(Vn.start(r)):_.none()))},NO=(e,t,n)=>{const o=Zy(n);return Pw(e,t,o).bind((r=>Zn(r,o).isNone()?_.some(Vn.end(r)):_.none()))},AO=(e,t,n)=>{const o=eC(n),r=Bw(t,o.container());return Bs(e,r,o).fold((()=>io(r,o).bind(Ce(Bs,e,r)).map((s=>Vn.after(s)))),_.none)},Lw=e=>!Jy(_g(e)),Ir=(e,t,n)=>Ow([EO,_O,NO,AO],[e,t,n]).filter(Lw),_g=e=>e.fold(bt,bt,bt,bt),Mw=e=>e.fold(ie("before"),ie("start"),ie("end"),ie("after")),vu=e=>e.fold(Vn.before,Vn.before,Vn.after,Vn.after),Ng=e=>e.fold(Vn.start,Vn.start,Vn.end,Vn.end),TO=(e,t,n,o,r,s)=>Wt(Bs(t,n,o),Bs(t,n,r),((a,i)=>a!==i&&((l,c,d)=>{const m=_s(c,l),f=_s(d,l);return te(m)&&m===f})(n,a,i)?Vn.after(e?a:i):s)).getOr(s),DO=(e,t)=>e.fold(zt,(n=>{return r=t,!(Mw(o=n)===Mw(r)&&_g(o)===_g(r));var o,r})),RO=(e,t)=>e?t.fold(Mn(_.some,Vn.start),_.none,Mn(_.some,Vn.after),_.none):t.fold(_.none,Mn(_.some,Vn.before),_.none,Mn(_.some,Vn.end)),Iw=(e,t,n)=>{const o=e?1:-1;return t.setRng(G(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var Fr;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Fr||(Fr={}));const yu=(e,t)=>e===-1?wo(t):t,OO=(e,t,n)=>e===1?t.next(n):t.prev(n),BO=(e,t,n,o)=>Ht(o.getNode(t===1))?Fr.Br:Dr(n,o)===!1?Fr.Block:Fr.Wrap,Fw=(e,t,n,o)=>{const r=Or(n);let s=o;const a=[];for(;s;){const i=OO(t,r,s);if(!i)break;if(Ht(i.getNode(!1)))return t===1?{positions:yu(t,a).concat([i]),breakType:Fr.Br,breakAt:_.some(i)}:{positions:yu(t,a),breakType:Fr.Br,breakAt:_.some(i)};if(i.isVisible()){if(e(s,i)){const l=BO(0,t,s,i);return{positions:yu(t,a),breakType:l,breakAt:_.some(i)}}a.push(i),s=i}else s=i}return{positions:yu(t,a),breakType:Fr.Eol,breakAt:_.none()}},jw=(e,t,n,o)=>t(n,o).breakAt.map((r=>{const s=t(n,r).positions;return e===-1?s.concat(r):[r].concat(s)})).getOr([]),Ag=(e,t)=>Qt(e,((n,o)=>n.fold((()=>_.some(o)),(r=>Wt(sn(r.getClientRects()),sn(o.getClientRects()),((s,a)=>{const i=Math.abs(t-s.left);return Math.abs(t-a.left)<=i?o:r})).or(n)))),_.none()),Cu=(e,t)=>sn(t.getClientRects()).bind((n=>Ag(e,n.left))),cc=Ce(Fw,G.isAbove,-1),dc=Ce(Fw,G.isBelow,1),zw=Ce(jw,-1,cc),Uw=Ce(jw,1,dc),Hw=(e,t)=>cc(e,t).breakAt.isNone(),$w=(e,t)=>dc(e,t).breakAt.isNone(),PO=(e,t)=>Cu(zw(e,t),t),LO=(e,t)=>Cu(Uw(e,t),t),MO=Pt,qw=(e,t)=>Math.abs(e.left-t),Ww=(e,t)=>Math.abs(e.right-t),Vw=(e,t)=>Yn(e,((n,o)=>{const r=Math.min(qw(n,t),Ww(n,t)),s=Math.min(qw(o,t),Ww(o,t));return s===r&&pn(o,"node")&&MO(o.node)||s<r?o:n})),IO=e=>{const t=n=>qe(n,(o=>{const r=ba(o);return r.node=e,r}));if(xe(e))return t(e.getClientRects());if(re(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},Kw=e=>qt(e,IO);var Pa;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Pa||(Pa={}));const Xw=(e,t,n,o,r,s)=>{let a=0;const i=[],l=m=>{let f=Kw([m]);e===Pa.Up&&(f=f.reverse());for(let g=0;g<f.length;g++){const h=f[g];if(!n(h,c)){if(i.length>0&&t(h,ko(i))&&a++,h.line=a,r(h))return!0;i.push(h)}}return!1},c=ko(s.getClientRects());if(!c)return i;const d=s.getNode();return d&&(l(d),((m,f,g,h)=>{let b=h;for(;b=Ml(b,m,Q0,f);)if(g(b))return})(e,o,l,d)),i},FO=Ce(Xw,Pa.Up,Al,Tl),jO=Ce(Xw,Pa.Down,Tl,Al),Yw=e=>ko(e.getClientRects()),Gw=e=>t=>((n,o)=>o.line>n)(e,t),Tg=e=>t=>((n,o)=>o.line===n)(e,t),os=(e,t)=>{e.selection.setRng(t),$l(e,e.selection.getRng())},Dg=(e,t,n)=>_.some(vg(e,t,n)),Qw=(e,t,n,o,r,s)=>{const a=t===1,i=Or(e.getBody()),l=Ce(uf,a?i.next:i.prev),c=a?o:r;if(!n.collapsed){const h=pd(n);if(s(h))return ns(t,e,h,t===-1,!1);if(xg(e)){const b=n.cloneRange();return b.collapse(t===-1),_.from(b)}}const d=jl(t,e.getBody(),n);if(c(d))return lc(e,d.getNode(!a));let m=l(d);const f=q0(n);if(!m)return f?_.some(n):_.none();if(m=Lo(a,m),c(m))return ns(t,e,m.getNode(!a),a,!1);const g=l(m);return g&&c(g)&&Sd(m,g)?ns(t,e,g.getNode(!a),a,!1):f?Dg(e,m.toRange(),!1):_.none()},Jw=(e,t,n,o,r,s)=>{const a=jl(t,e.getBody(),n),i=ko(a.getClientRects()),l=t===Pa.Down,c=e.getBody();if(!i)return _.none();if(xg(e)){const b=l?G.fromRangeEnd(n):G.fromRangeStart(n);return(l?LO:PO)(c,b).orThunk((()=>_.from(b))).map((v=>v.toRange()))}const d=(l?jO:FO)(c,Gw(1),a),m=Pe(d,Tg(1)),f=i.left,g=Vw(m,f);if(g&&s(g.node)){const b=Math.abs(f-g.left),v=Math.abs(f-g.right);return ns(t,e,g.node,b<v,!1)}let h;if(h=o(a)?a.getNode():r(a)?a.getNode(!0):pd(n),h){const b=((y,E,N,D)=>{const A=Or(E);let R,P,L,j;const W=[];let B=0;y===Pa.Down?(R=A.next,P=Tl,L=Al,j=G.after(D)):(R=A.prev,P=Al,L=Tl,j=G.before(D));const I=Yw(j);do{if(!j.isVisible())continue;const H=Yw(j);if(L(H,I))continue;W.length>0&&P(H,ko(W))&&B++;const J=ba(H);if(J.position=j,J.line=B,N(J))return W;W.push(J)}while(j=R(j));return W})(t,c,Gw(1),h);let v=Vw(Pe(b,Tg(1)),f);if(v||(v=ko(Pe(b,Tg(0))),v))return Dg(e,v.position.toRange(),!1)}return m.length===0?Rg(e,l).filter(l?r:o).map((b=>vg(e,b.toRange(),!1))):_.none()},Rg=(e,t)=>{const n=e.selection.getRng(),o=t?G.fromRangeEnd(n):G.fromRangeStart(n),r=(s=o.container(),a=e.getBody(),_r(S.fromDom(s),(i=>vT(i.dom)),(i=>i.dom===a)).map((i=>i.dom)).getOr(a));var s,a;if(t){const i=dc(r,o);return oo(i.positions)}{const i=cc(r,o);return sn(i.positions)}},Zw=(e,t,n)=>Rg(e,t).filter(n).exists((o=>(e.selection.setRng(o.toRange()),!0))),xu=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},eS=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},tS=(e,t,n)=>kg(t,n).map((o=>(xu(e,o),n))),zO=(e,t,n)=>{const o=e.getBody(),r=((s,a,i)=>{const l=G.fromRangeStart(s);if(s.collapsed)return l;{const c=G.fromRangeEnd(s);return i?io(a,c).getOr(c):Zn(a,l).getOr(l)}})(e.selection.getRng(),o,n);return((s,a,i,l)=>{const c=Lo(s,l),d=Ir(a,i,c);return Ir(a,i,c).bind(Ce(RO,s)).orThunk((()=>((m,f,g,h,b)=>{const v=Lo(m,b);return Do(m,g,v).map(Ce(Lo,m)).fold((()=>h.map(vu)),(y=>Ir(f,g,y).map(Ce(TO,m,f,g,v,y)).filter(Ce(DO,h)))).filter(Lw)})(s,a,i,d,l)))})(n,Ce(ka,e),o,r).bind((s=>tS(e,t,s)))},nS=(e,t,n)=>!!Ol(e)&&zO(e,t,n).isSome(),oS=(e,t,n)=>!!Ol(t)&&((o,r)=>{const s=r.selection.getRng(),a=o?G.fromRangeEnd(s):G.fromRangeStart(s);return!!(i=>ht(i.selection.getSel().modify))(r)&&(o&&Um(a)?Iw(!0,r.selection,a):!(o||!Hm(a))&&Iw(!1,r.selection,a))})(e,t),UO=e=>{const t=tn(null),n=Ce(ka,e);return e.on("NodeChange",(o=>{Ol(e)&&(((r,s,a)=>{const i=qe(Tn(S.fromDom(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),(d=>d.dom)),l=Pe(i,r),c=Pe(a,r);K(Ge(l,c),Ce(eS,!1)),K(Ge(c,l),Ce(eS,!0))})(n,e.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=G.fromRangeStart(r.selection.getRng());G.isTextPosition(i)&&!(l=>Um(l)||Hm(l))(i)&&(xu(r,fT(a,i)),s.set(null))}})(e,t),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=Pe(i,r);K(l,(c=>{const d=G.fromRangeStart(s.selection.getRng());Ir(r,s.getBody(),d).bind((m=>tS(s,a,m)))}))}})(n,e,t,o.parents))})),t},HO=Ce(oS,!0),$O=Ce(oS,!1),wu=(e,t,n)=>{if(Ol(e)){const o=Rg(e,t).getOrThunk((()=>{const r=e.selection.getRng();return t?G.fromRangeEnd(r):G.fromRangeStart(r)}));return Ir(Ce(ka,e),e.getBody(),o).exists((r=>{const s=vu(r);return kg(n,s).exists((a=>(xu(e,a),!0)))}))}return!1},rS=(e,t)=>n=>kg(t,n).map((o=>()=>xu(e,o))),sS=(e,t,n,o)=>{const r=e.getBody(),s=Ce(ka,e);e.undoManager.ignore((()=>{e.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),Hd(e),Ir(s,r,G.fromRangeStart(e.selection.getRng())).map(Ng).bind(rS(e,t)).each(Xn)})),e.nodeChanged()},Og=(e,t,n)=>{if(e.selection.isCollapsed()&&Ol(e)){const o=G.fromRangeStart(e.selection.getRng());return((r,s,a,i)=>{const l=((m,f)=>_s(f,m)||m)(r.getBody(),i.container()),c=Ce(ka,r),d=Ir(c,l,i);return d.bind((m=>a?m.fold(ie(_.some(Ng(m))),_.none,ie(_.some(vu(m))),_.none):m.fold(_.none,ie(_.some(vu(m))),_.none,ie(_.some(Ng(m)))))).map(rS(r,s)).getOrThunk((()=>{const m=yi(a,l,i),f=m.bind((g=>Ir(c,l,g)));return Wt(d,f,(()=>Bs(c,l,i).bind((g=>(h=>Wt(zn(h),Yo(h),((b,v)=>{const y=Lo(!0,b),E=Lo(!1,v);return Zn(h,y).forall((N=>N.isEqual(E)))})).getOr(!0))(g)?_.some((()=>{Os(r,a,S.fromDom(g))})):_.none())))).getOrThunk((()=>f.bind((()=>m.map((g=>()=>{a?sS(r,s,i,g):sS(r,s,g,i)}))))))}))})(e,t,n,o)}return _.none()},aS=(e,t)=>{const n=S.fromDom(e.getBody()),o=S.fromDom(e.selection.getStart()),r=Zr(o,n);return Hs(r,t).fold(ie(r),(s=>r.slice(0,s)))},qO=e=>Sr(e)===1,iS=(e,t)=>{const n=Ce(AC,e);return qt(t,(o=>n(o)?[o.dom]:[]))},lS=e=>{const t=(n=>aS(n,(o=>n.schema.isBlock(Le(o)))))(e);return iS(e,t)},WO=(e,t)=>{const n=Pe((o=>aS(o,(r=>o.schema.isBlock(Le(r))||(s=>Sr(s)>1)(r))))(e),qO);return oo(n).bind((o=>{const r=G.fromRangeStart(e.selection.getRng());return oC(t,r,o.dom)&&!Df(o)?_.some((()=>((s,a,i,l)=>{const c=iS(a,l);if(c.length===0)Os(a,s,i);else{const d=NC(i.dom,c);a.selection.setRng(d.toRange())}})(t,e,o,n))):_.none()}))},cS=(e,t)=>{const n=e.selection.getStart(),o=((r,s)=>{const a=s.parentElement;return Ht(s)&&!Ye(a)&&r.dom.isEmpty(a)})(e,n)||Df(S.fromDom(n))?NC(n,t):((r,s)=>{const{caretContainer:a,caretPosition:i}=_C(s);return r.insertNode(a.dom),i})(e.selection.getRng(),t);e.selection.setRng(o.toRange())},dS=e=>re(e.startContainer),VO=e=>{const t=e.selection.getRng();return(n=>n.startOffset===0&&dS(n))(t)&&((n,o)=>{const r=o.startContainer.parentElement;return!Ye(r)&&AC(n,S.fromDom(r))})(e,t)&&(n=>(o=>(r=>{const s=r.startContainer.parentNode,a=r.endContainer.parentNode;return!Ye(s)&&!Ye(a)&&s.isEqualNode(a)})(o)&&(r=>{const s=r.endContainer;return r.endOffset===(re(s)?s.length:s.childNodes.length)})(o))(n)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n))(t)},Bg=(e,t)=>e.selection.isCollapsed()?WO(e,t):(n=>{if(VO(n)){const o=lS(n);return _.some((()=>{Hd(n),((r,s)=>{const a=Ge(s,lS(r));a.length>0&&cS(r,a)})(n,o)}))}return _.none()})(e),uc=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(dS(n)||t.dom.isEmpty(n.startContainer))&&!(o=>{return r=S.fromDom(o.selection.getStart()),s=o.schema,dm(r,(a=>Ro(a.dom)),(a=>s.isBlock(Le(a))));var r,s})(t)})(e)&&cS(e,[]),!0),Pg=(e,t,n)=>te(n)?_.some((()=>{e._selectionOverrides.hideFakeCaret(),Os(e,t,S.fromDom(n))})):_.none(),Lg=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=o?ql:Wl,s=jl(o?1:-1,n.getBody(),n.selection.getRng());return r(s)?Pg(n,o,s.getNode(!o)):_.from(Lo(o,s)).filter((a=>r(a)&&Sd(s,a))).bind((a=>Pg(n,o,a.getNode(!o))))})(e,t):((n,o)=>{const r=n.selection.getNode();return sr(r)?Pg(n,o,r):_.none()})(e,t),Mg=e=>us(e??"").getOr(0),uS=(e,t)=>(e||Le(t)==="table"?"margin":"padding")+(nr(t,"direction")==="rtl"?"-right":"-left"),mS=e=>{const t=pS(e);return!e.mode.isReadOnly()&&(t.length>1||((n,o)=>no(o,(r=>{const s=uS(Pb(n),r),a=ei(r,s).map(Mg).getOr(0);return n.dom.getContentEditable(r.dom)!=="false"&&a>0})))(e,t))},fS=e=>zm(e)||di(e),pS=e=>Pe(An(e.selection.getSelectedBlocks()),(t=>!fS(t)&&!(n=>bn(n).exists(fS))(t)&&Nr(t,(n=>Xo(n.dom)||Pt(n.dom))).exists((n=>Xo(n.dom))))),gS=(e,t)=>{var n,o;if(e.mode.isReadOnly())return;const{dom:r}=e,s=iA(e),a=(o=(n=/[a-z%]+$/i.exec(s))===null||n===void 0?void 0:n[0])!==null&&o!==void 0?o:"px",i=Mg(s),l=Pb(e);K(pS(e),(c=>{((d,m,f,g,h,b)=>{const v=uS(f,S.fromDom(b)),y=Mg(d.getStyle(b,v));if(m==="outdent"){const E=Math.max(0,y-g);d.setStyle(b,v,E?E+h:"")}else{const E=y+g+h;d.setStyle(b,v,E)}})(r,t,l,i,a,c.dom)})),t==="indent"?sw(e):ig(e)},hS=e=>gS(e,"outdent"),bS=e=>{if(e.selection.isCollapsed()&&mS(e)){const t=e.dom,n=e.selection.getRng(),o=G.fromRangeStart(n),r=t.getParent(n.startContainer,t.isBlock);if(r!==null&&Kf(S.fromDom(r),o,e.schema))return _.some((()=>hS(e)))}return _.none()},Ig=(e,t)=>e.selection.isCollapsed()?_.none():((n,o)=>{return r=Xd(n.selection.getRng()),wf(r,or)?_.some((()=>Os(n,o,S.fromDom(n.selection.getNode())))):_.none();var r})(e,t),vS=(e,t,n)=>$n([bS,wg,yg,(o,r)=>Og(o,t,r),hg,ip,Eg,Lg,bg,Bg,Sg,Ig],(o=>o(e,n))).filter((o=>e.selection.isEditable())),Fg=(e,t)=>{vS(e,t,!1).fold((()=>{e.selection.isEditable()&&(Hd(e),Zf(e))}),Xn),fg(e)&&ng(e.dom,e.getBody())},yS=e=>e.touches===void 0||e.touches.length!==1?_.none():_.some(e.touches[0]),jg=(e,t)=>Me(e,t.nodeName),KO=(e,t)=>!!re(t)||!!xe(t)&&!(jg(e.getBlockElements(),t)||Oo(t)||ua(e,t)||Cm(t)||n0(t)),XO=(e,t)=>{if(re(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||jg(e,t.nextSibling)||Cm(t.nextSibling)}return!1},zg=e=>e.dom.create(Sn(e),gi(e)),CS=(e,t,n)=>{const o=S.fromDom(zg(e)),r=ui();X(o,r),n(t,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},xS=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,YO=(e,t,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?t.charAt(s-1):"";if(a==='"')return o;if(a===">"){const i=t.lastIndexOf("<",s);if(i!==-1&&t.substring(i,s).indexOf('contenteditable="false"')!==-1)return o}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode(typeof r[1]=="string"?r[1]:r[0])+"</span>"},GO=(e,t)=>no(e,(n=>{const o=t.match(n);return o!==null&&o[0].length===t.length})),wS=(e,t)=>{t.hasAttribute("data-mce-caret")&&($m(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},QO=(e,t)=>{const n=(o=>Qc(S.fromDom(o.getBody()),"*[data-mce-caret]").map((r=>r.dom)).getOrNull())(e);if(n)return t.type==="compositionstart"?(t.preventDefault(),t.stopPropagation(),void wS(e,n)):void($0(n)&&(wS(e,n),e.undoManager.add()))},SS=Pt,ES=(e,t,n)=>{const o=Or(e.getBody()),r=Ce(uf,t===1?o.next:o.prev);if(n.collapsed){const s=e.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(G.fromRangeStart(n))){const a=S.fromDom((i=>{const l=i.dom.create(Sn(i));return l.innerHTML='<br data-mce-bogus="1">',l})(e));t===1?M(S.fromDom(s),a):dn(S.fromDom(s),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},kS=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((a,i,l)=>Qw(i,a,l,Ds,Rs,SS))(r,n,s).orThunk((()=>(ES(n,r,s),_.none())))})(e,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return Jy(r)?!o:o})(e.selection,t)).exists((n=>(os(e,n),!0))),_S=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((a,i,l)=>Jw(i,a,l,(c=>Ds(c)||Ry(c)),(c=>Rs(c)||Wf(c)),SS))(r,n,s).orThunk((()=>(ES(n,r,s),_.none())))})(e,t).exists((n=>(os(e,n),!0))),NS=(e,t)=>Zw(e,t,t?Rs:Ds),Su=(e,t)=>Cg(e,!t).map((n=>{const o=n.toRange(),r=e.selection.getRng();return t?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o})).exists((n=>(os(e,n),!0))),JO=e=>Se(["figcaption"],Le(e)),AS=(e,t)=>!!e.selection.isCollapsed()&&((n,o)=>{const r=S.fromDom(n.getBody()),s=G.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const c=Ce(pe,i);return Nr(S.fromDom(a.container()),(d=>l.isBlock(Le(d))),c).filter(JO)})(s,r,n.schema).exists((()=>{if(((a,i,l)=>i?$w(a.dom,l):Hw(a.dom,l))(r,o,s)){const a=CS(n,r,o?X:q);return n.selection.setRng(a),!0}return!1}))})(e,t),TS=(e,t)=>((n,o)=>o?_.from(n.dom.getParent(n.selection.getNode(),"details")).map((r=>((s,a)=>{const i=s.selection.getRng(),l=G.fromRangeStart(i);return!(s.getBody().lastChild!==a||!$w(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r))).getOr(!1):_.from(n.dom.getParent(n.selection.getNode(),"summary")).bind((r=>_.from(n.dom.getParent(r,"details")).map((s=>((a,i,l)=>{const c=a.selection.getRng(),d=G.fromRangeStart(c);return!(a.getBody().firstChild!==i||!Hw(l,d)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,r))))).getOr(!1))(e,t),DS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},RS=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,Fe=(e,...t)=>()=>e.apply(null,t),mc=(e,t)=>$t(((n,o)=>qt((r=>qe(r,(s=>({...DS,...s}))))(n),(r=>RS(r,o)?[r]:[])))(e,t),(n=>n.action())),OS=(e,t)=>$n(((n,o)=>qt((r=>qe(r,(s=>({...DS,...s}))))(n),(r=>RS(r,o)?[r]:[])))(e,t),(n=>n.action())),BS=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return Qw(e,n,o,ql,Wl,sr).exists((r=>(os(e,r),!0)))},PS=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return Jw(e,n,o,ql,Wl,sr).exists((r=>(os(e,r),!0)))},LS=(e,t)=>Zw(e,t,t?Wl:ql),MS=(e,t,n)=>qt(gt(e),(o=>Z(o,t)?n(o)?[o]:[]:MS(o,t,n))),IS=(e,t)=>vs(e,"table",t),FS=ho([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),fc={...FS,none:e=>FS.none(e)},Ug=(e,t,n,o,r=zt)=>{const s=o===1;if(!s&&n<=0)return fc.first(e[0]);if(s&&n>=e.length-1)return fc.last(e[e.length-1]);{const a=n+o,i=e[a];return r(i)?fc.middle(t,i):Ug(e,t,a,o,r)}},jS=(e,t)=>IS(e,t).bind((n=>{const o=MS(n,"th,td",zt);return Hs(o,(r=>pe(e,r))).map((r=>({index:r,all:o})))}));var ZO=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const Hg=(e,t)=>({element:e,offset:t}),zS=(e,t)=>{if(e.property().isText(t))return Hg(t,e.property().getText(t).length);{const n=e.property().children(t);return n.length>0?zS(e,n[n.length-1]):Hg(t,n.length)}},US=(e,t,n)=>{const o=e.property().children(t);return o.length>0&&n<o.length?US(e,o[n],0):o.length>0&&e.property().isElement(t)&&o.length===n?zS(e,o[o.length-1]):Hg(t,n)},eB=US,tB={up:ie({selector:oi,closest:vs,predicate:_r,all:on}),down:ie({selector:Tn,predicate:Zc}),styles:ie({get:nr,getRaw:ei,set:Vc,remove:Xc}),attrs:ie({get:ft,set:Te,remove:ot,copyTo:(e,t)=>{const n=Zt(e);Ae(t,n)}}),insert:ie({before:dn,after:M,afterAll:ce,append:X,appendAll:Re,prepend:q,wrap:ne}),remove:ie({unwrap:Yt,remove:ct}),create:ie({nu:S.fromTag,clone:e=>S.fromDom(e.dom.cloneNode(!1)),text:S.fromText}),query:ie({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:Xt,nextSibling:Gn}),property:ie({children:gt,name:Le,parent:bn,document:e=>_n(e).dom,isText:wt,isComment:xt,isElement:nt,isSpecial:e=>{const t=Le(e);return Se(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>nt(e)?at(e,"lang"):_.none(),getText:ni,setText:im,isBoundary:e=>!!nt(e)&&(Le(e)==="body"||Se(ZO,Le(e))),isEmptyTag:e=>!!nt(e)&&Se(["br","img","hr","input"],Le(e)),isNonEditable:e=>nt(e)&&ft(e,"contenteditable")==="false"}),eq:pe,is:ut},HS=Ks("image"),$g=Ks("event"),Eu=e=>t=>{t[$g]=e},$S=Eu(0),nB=Eu(2),oB=Eu(1),rB=e=>{const t=e;return _.from(t[$g]).exists((n=>n===0))},qg=Ks("mode"),ku=e=>t=>{t[qg]=e},qS=(e,t)=>ku(t)(e),WS=ku(0),Wg=ku(2),sB=ku(1),VS=e=>t=>{const n=t;return _.from(n[qg]).exists((o=>o===e))},Ui=VS(0),KS=VS(1),aB=["none","copy","link","move"],iB=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Vg=()=>{const e=new window.DataTransfer;let t="move",n="all";const o={get dropEffect(){return t},set dropEffect(r){Se(aB,r)&&(t=r)},get effectAllowed(){return n},set effectAllowed(r){rB(o)&&Se(iB,r)&&(n=r)},get items(){return((r,s)=>({...s,get length(){return s.length},add:(a,i)=>{if(Ui(r)){if(!we(a))return s.add(a);if(!jt(i))return s.add(a,i)}return null},remove:a=>{Ui(r)&&s.remove(a)},clear:()=>{Ui(r)&&s.clear()}}))(o,e.items)},get files(){return KS(o)?Object.freeze({length:0,item:r=>null}):e.files},get types(){return e.types},setDragImage:(r,s,a)=>{var i;Ui(o)&&(i={image:r,x:s,y:a},o[HS]=i,e.setDragImage(r,s,a))},getData:r=>KS(o)?"":e.getData(r),setData:(r,s)=>{Ui(o)&&e.setData(r,s)},clearData:r=>{Ui(o)&&e.clearData(r)}};return WS(o),o},XS=(e,t)=>e.setData("text/html",t),YS=(e,t,n,o,r)=>{const s=Tn(S.fromDom(n),"td,th,caption").map((i=>i.dom)),a=Pe(((i,l)=>qt(l,(c=>{const d=((m,f)=>({left:m.left-f,top:m.top-f,right:m.right+-2,bottom:m.bottom+-2,width:m.width+f,height:m.height+f}))(ba(c.getBoundingClientRect()),-1);return[{x:d.left,y:i(d),cell:c},{x:d.right,y:i(d),cell:c}]})))(e,s),(i=>t(i,r)));return((i,l,c)=>Qt(i,((d,m)=>d.fold((()=>_.some(m)),(f=>{const g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c)),h=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-c));return _.some(h<g?m:f)}))),_.none()))(a,o,r).map((i=>i.cell))},lB=Ce(YS,(e=>e.bottom),((e,t)=>e.y<t)),cB=Ce(YS,(e=>e.top),((e,t)=>e.y>t)),GS=(e,t,n)=>{const o=e(t,n);return(r=>r.breakType===Fr.Wrap&&r.positions.length===0)(o)||!Ht(n.getNode())&&(r=>r.breakType===Fr.Br&&r.positions.length===1)(o)?!((r,s,a)=>a.breakAt.exists((i=>r(s,i).breakAt.isSome())))(e,t,o):o.breakAt.isNone()},dB=Ce(GS,cc),uB=Ce(GS,dc),mB=(e,t,n,o)=>{const r=e.selection.getRng(),s=t?1:-1;return!(!Zb()||!((a,i,l)=>{const c=G.fromRangeStart(i);return Ci(!a,l).exists((d=>d.isEqual(c)))})(t,r,n)||(ns(s,e,n,!t,!1).each((a=>{os(e,a)})),0))},QS=(e,t,n)=>{const o=((s,a)=>{const i=a.getNode(s);return Ar(i)?_.some(i):_.none()})(!!t,n),r=t===!1;o.fold((()=>os(e,n.toRange())),(s=>Ci(r,e.getBody()).filter((a=>a.isEqual(n))).fold((()=>os(e,n.toRange())),(a=>((i,l,c)=>{l.undoManager.transact((()=>{const d=i?M:dn,m=CS(l,S.fromDom(c),d);os(l,m)}))})(t,e,s)))))},fB=(e,t,n,o)=>{const r=e.selection.getRng(),s=G.fromRangeStart(r),a=e.getBody();if(!t&&dB(o,s)){const i=((l,c,d)=>((m,f)=>sn(f.getClientRects()).bind((g=>lB(m,g.left,g.top))).bind((g=>{return Cu(Yo(h=g).map((b=>cc(h,b).positions.concat(b))).getOr([]),f);var h})))(c,d).orThunk((()=>sn(d.getClientRects()).bind((m=>Ag(zw(l,G.before(c)),m.left))))).getOr(G.before(c)))(a,n,s);return QS(e,t,i),!0}if(t&&uB(o,s)){const i=((l,c,d)=>((m,f)=>oo(f.getClientRects()).bind((g=>cB(m,g.left,g.top))).bind((g=>{return Cu(zn(h=g).map((b=>[b].concat(dc(h,b).positions))).getOr([]),f);var h})))(c,d).orThunk((()=>sn(d.getClientRects()).bind((m=>Ag(Uw(l,G.after(c)),m.left))))).getOr(G.after(c)))(a,n,s);return QS(e,t,i),!0}return!1},JS=(e,t,n)=>_.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((o=>_.from(e.dom.getParent(o,"table")).map((r=>n(e,t,r,o))))).getOr(!1),ZS=(e,t)=>JS(e,t,mB),Kg=(e,t)=>JS(e,t,fB),eE=(e,t,n)=>n.fold(_.none,_.none,((o,r)=>{return(s=r,Gc(s,X_)).map((a=>(i=>{const l=si.exact(i,0,i,0);return G_(l)})(a)));var s}),(o=>!e.mode.isReadOnly()&&pB(o)&&(r=>_u(r)||an(r).some((s=>ao(s)&&_u(s))))(o)?(e.execCommand("mceTableInsertRowAfter"),tE(e,t,o)):_.none())),pB=e=>Nr(e,wn("table")).exists(Gr),tE=(e,t,n)=>{return eE(e,t,(r=_u,jS(o=n,void 0).fold((()=>fc.none(o)),(s=>Ug(s.all,o,s.index,1,r)))));var o,r},gB=(e,t,n)=>{return eE(e,t,(r=_u,jS(o=n,void 0).fold((()=>fc.none()),(s=>Ug(s.all,o,s.index,-1,r)))));var o,r},_u=e=>Gr(e)||um(e,hB),hB=e=>ao(e)&&Gr(e),nE=(e,t)=>{const n=["table","li","dl"],o=S.fromDom(e.getBody()),r=a=>{const i=Le(a);return pe(a,o)||Se(n,i)},s=e.selection.getRng();return((a,i)=>((l,c,d=_t)=>d(c)?_.none():Se(l,Le(c))?_.some(c):oi(c,l.join(","),(m=>Z(m,"table")||d(m))))(["td","th"],a,i))(S.fromDom(t?s.endContainer:s.startContainer),r).map((a=>(IS(a,r).each((i=>{e.model.table.clearSelectedCells(i.dom)})),e.selection.collapse(!t),(t?tE:gB)(e,r,a).each((i=>{e.selection.setRng(i)})),!0))).getOr(!1)},ur=(e,t)=>({container:e,offset:t}),Nu=St.DOM,Au=e=>t=>e===t?-1:0,Xg=(e,t,n)=>{if(re(e)&&t>=0)return _.some(ur(e,t));{const o=ha(Nu);return _.from(o.backwards(e,t,Au(e),n)).map((r=>ur(r.container,r.container.data.length)))}},Yg=(e,t,n)=>{if(!re(e))return _.none();const o=e.data;if(t>=0&&t<=o.length)return _.some(ur(e,t));{const r=ha(Nu);return _.from(r.backwards(e,t,Au(e),n)).bind((s=>{const a=s.container.data;return Yg(s.container,t+a.length,n)}))}},oE=(e,t,n)=>{if(!re(e))return _.none();const o=e.data;if(t<=o.length)return _.some(ur(e,t));{const r=ha(Nu);return _.from(r.forwards(e,t,Au(e),n)).bind((s=>oE(s.container,t-o.length,n)))}},Gg=(e,t,n,o,r)=>{const s=ha(e,(a=>i=>a.isBlock(i)||Se(["BR","IMG","HR","INPUT"],i.nodeName)||a.getContentEditable(i)==="false")(e));return _.from(s.backwards(t,n,o,r))},rE=e=>e!==""&&` \xA0\uFEFF\f
\r	\v`.indexOf(e)!==-1,bB=(e,t)=>e.substring(t.length),Qg=(e,t,n,o=!1)=>{if(!(r=t).collapsed||!re(r.startContainer))return _.none();var r;const s={text:"",offset:0},a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return Gg(e,t.startContainer,t.startOffset,((i,l,c)=>(s.text=c+s.text,s.offset+=l,((d,m,f,g=!1)=>{let h;const b=f.charAt(0);for(h=m-1;h>=0;h--){const v=d.charAt(h);if(!g&&rE(v))return _.none();if(b===v&&hn(d,f,h,m))break}return _.some(h)})(s.text,s.offset,n,o).getOr(l))),a).bind((i=>{const l=t.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(t.endContainer,t.endOffset),l.collapsed)return _.none();const c=(d=>vo(d.toString().replace(/\u00A0/g," ")))(l);return c.lastIndexOf(n)!==0?_.none():_.some({text:bB(c,n),range:l,trigger:n})}))},sE=e=>{if((t=>t.nodeType===3)(e))return ur(e,e.data.length);{const t=e.childNodes;return t.length>0?sE(t[t.length-1]):ur(e,t.length)}},aE=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?aE(n[t],0):n.length>0&&(o=>o.nodeType===1)(e)&&n.length===t?sE(n[n.length-1]):ur(e,t)},iE=(e,t,n,o={})=>{var r;const s=t(),a=(r=e.selection.getRng().startContainer.nodeValue)!==null&&r!==void 0?r:"",i=Pe(s.lookupByTrigger(n.trigger),(c=>n.text.length>=c.minChars&&c.matches.getOrThunk((()=>(d=>m=>{const f=aE(m.startContainer,m.startOffset);return!((g,h)=>{var b;const v=(b=g.getParent(h.container,g.isBlock))!==null&&b!==void 0?b:g.getRoot();return Gg(g,h.container,h.offset,((y,E)=>E===0?-1:E),v).filter((y=>{const E=y.container.data.charAt(y.offset-1);return!rE(E)})).isSome()})(d,f)})(e.dom)))(n.range,a,n.text)));if(i.length===0)return _.none();const l=Promise.all(qe(i,(c=>c.fetch(n.text,c.maxResults,o).then((d=>({matchText:n.text,items:d,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))))));return _.some({lookupData:l,context:n})};var jr;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(jr||(jr={}));const Jg=(e,t,n)=>e.stype===jr.Error?t(e.serror):n(e.svalue),Hi=e=>({stype:jr.Value,svalue:e}),pc=e=>({stype:jr.Error,serror:e}),vB=Jg,lE=e=>Ue(e)&&fn(e).length>100?" removed due to size":JSON.stringify(e,null,2),cE=(e,t)=>pc([{path:e,getErrorInfo:t}]),Zg=e=>({extract:(t,n)=>{return o=e(n),r=s=>((a,i)=>cE(a,ie(i)))(t,s),o.stype===jr.Error?r(o.serror):o;var o,r},toString:ie("val")}),yB=Zg(Hi),eh=ie(yB),Tu=(e,t)=>Zg((n=>{const o=typeof n;return e(n)?Hi(n):pc(`Expected type: ${t} but got: ${o}`)})),CB=Tu(x,"number"),th=Tu(we,"string");Tu(Cn,"boolean");const dE=Tu(ht,"function"),uE=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((t=>uE(e[t])));default:return!1}};Zg((e=>uE(e)?Hi(e):pc("Expected value to be acceptable for sending via postMessage")));const mE=e=>({tag:"defaultedThunk",process:ie(e)}),fE=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},xB=e=>{const t=(o=>{const r=[],s=[];return K(o,(a=>{Jg(a,(i=>s.push(i)),(i=>r.push(i)))})),{values:r,errors:s}})(e);return t.errors.length>0?(n=t.errors,Mn(pc,Ec)(n)):Hi(t.values);var n},pE=(e,t,n,o)=>o(Ot(e,t).getOrThunk((()=>n(e)))),wB=(e,t,n,o,r)=>{const s=i=>r.extract(t.concat([o]),i),a=i=>i.fold((()=>Hi(_.none())),(l=>{return d=r.extract(t.concat([o]),l),m=_.some,d.stype===jr.Value?{stype:jr.Value,svalue:m(d.svalue)}:d;var d,m}));switch(e.tag){case"required":return((i,l,c,d)=>Ot(l,c).fold((()=>((m,f,g)=>cE(m,(()=>'Could not find valid *required* value for "'+f+'" in '+lE(g))))(i,c,l)),d))(t,n,o,s);case"defaultedThunk":return pE(n,o,e.process,s);case"option":return((i,l,c)=>c(Ot(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,c,d)=>d(Ot(i,l).map((m=>m===!0?c(i):m))))(n,o,e.process,a);case"mergeWithThunk":return pE(n,o,ie({}),(i=>{const l=Ha(e.process(n),i);return s(l)}))}},gE=e=>({extract:(t,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)fE(l,((c,d,m,f)=>{const g=wB(m,o,r,c,f);vB(g,(h=>{i.push(...h)}),(h=>{a[d]=h}))}),((c,d)=>{a[c]=d(r)}));return i.length>0?pc(i):Hi(a)})(t,n,e),toString:()=>`obj{
`+qe(e,(n=>fE(n,((o,r,s,a)=>o+" -> "+a.toString()),((o,r)=>"state("+o+")")))).join(`
`)+"}"}),hE=(e,t,n)=>{return o=((r,s,a)=>((i,l)=>i.stype===jr.Error?{stype:jr.Error,serror:l(i.serror)}:i)(s.extract([r],a),(i=>({input:a,errors:i}))))(e,t,n),Jg(o,gn.error,gn.value);var o},bE=e=>`Errors: 
`+(t=>{const n=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ie("... (only showing first ten failures)")}]):t;return qe(n,(o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo()))})(e.errors).join(`
`)+`

Input object: `+lE(e.input),$i=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),vE=(e,t)=>$i(e,e,{tag:"required",process:{}},t),yE=e=>vE(e,th),CE=e=>vE(e,dE),xE=(e,t)=>$i(e,e,{tag:"option",process:{}},t),mr=e=>xE(e,th),wE=(e,t,n)=>$i(e,e,mE(t),n),SE=(e,t)=>wE(e,t,CB),SB=yE("type"),EB=CE("fetch"),kB=CE("onAction");mr("name"),mr("text"),mr("role"),mr("icon"),mr("url"),mr("tooltip"),mr("chevronTooltip"),mr("label"),mr("shortcut");const _B=gE([SB,yE("trigger"),SE("minChars",1),(e=>$i(e,e,mE(1),eh()))("columns"),SE("maxResults",10),xE("matches",dE),EB,kB,(EE=th,wE("highlightOn",[],(nh=EE,{extract:(e,t)=>{const n=qe(t,((o,r)=>nh.extract(e.concat(["["+r+"]"]),o)));return xB(n)},toString:()=>"array("+nh.toString()+")"})))]);var EE,nh;const NB=e=>{const t=qo(),n=tn(!1),o=t.isSet,r=()=>{o()&&((l=>{l.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},s=qn((()=>(l=>{const c=l.ui.registry.getAll().popups,d=qs(c,(g=>{return(h=g,hE("Autocompleter",_B,h)).fold((b=>{throw new Error(bE(b))}),bt);var h})),m=Dc(yr(d,(g=>g.trigger))),f=Ua(d);return{dataset:d,triggers:m,lookupByTrigger:g=>Pe(f,(h=>h.trigger===g))}})(e))),a=l=>{(c=>t.get().map((d=>Qg(e.dom,e.selection.getRng(),d.trigger,!0).bind((m=>iE(e,s,m,c))))).getOrThunk((()=>((d,m)=>{const f=m(),g=d.selection.getRng();return((h,b,v)=>$n(v.triggers,(y=>Qg(h,b,y))))(d.dom,g,f).bind((h=>iE(d,m,h)))})(e,s))))(l).fold(r,(c=>{(d=>{o()||t.set({trigger:d.trigger,matchLength:d.text.length})})(c.context),c.lookupData.then((d=>{t.get().map((m=>{const f=c.context;m.trigger===f.trigger&&(t.set({...m,matchLength:f.text.length}),n.get()?(ef(e,{range:f.range}),((g,h)=>{g.dispatch("AutocompleterUpdate",h)})(e,{lookupData:d})):(n.set(!0),ef(e,{range:f.range}),((g,h)=>{g.dispatch("AutocompleterStart",h)})(e,{lookupData:d})))}))}))}))},i=()=>t.get().bind((({trigger:l})=>{const c=e.selection.getRng();return Qg(e.dom,c,l,n.get()).filter((({range:d})=>((m,f)=>{const g=m.compareBoundaryPoints(window.Range.START_TO_START,f),h=m.compareBoundaryPoints(window.Range.END_TO_END,f);return g>=0&&h<=0})(c,d))).map((({range:d})=>d))}));e.addCommand("mceAutocompleterReload",((l,c)=>{const d=Ue(c)?c.fetchOptions:{};a(d)})),e.addCommand("mceAutocompleterClose",r),e.addCommand("mceAutocompleterRefreshActiveRange",(()=>{i().each((l=>{ef(e,{range:l})}))})),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",(()=>i().isSome())),((l,c)=>{const d=ro(c.load,50);l.on("input",(m=>{(m.inputType!=="insertCompositionText"||l.composing)&&d.throttle()})),l.on("keydown",(m=>{const f=m.which;f===8?d.throttle():f===27?(d.cancel(),c.cancelIfNecessary()):f!==38&&f!==40||d.cancel()}),!0),l.on("remove",d.cancel)})(e,{cancelIfNecessary:r,load:a})},AB=No().browser.isSafari(),kE=e=>ws(S.fromDom(e)),_E=(e,t)=>{var n;return e.startOffset===0&&e.endOffset===((n=t.textContent)===null||n===void 0?void 0:n.length)},Du=(e,t)=>_.from(e.getParent(t.container(),"details")),NE=(e,t)=>Du(e,t).isSome(),AE=(e,t)=>{const n=t.getNode();jt(n)||e.selection.setCursorLocation(n,t.offset())},TE=(e,t,n)=>{const o=e.dom.getParent(t.container(),"details");if(o&&!o.open){const r=e.dom.select("summary",o)[0];r&&(n?zn(r):Yo(r)).each((s=>AE(e,s)))}else AE(e,t)},DE=(e,t,n)=>{const{dom:o,selection:r}=e,s=e.getBody();if(n==="character"){const a=G.fromRangeStart(r.getRng()),i=o.getParent(a.container(),o.isBlock),l=Du(o,a),c=i&&o.isEmpty(i),d=Ye(i?.previousSibling),m=Ye(i?.nextSibling);return!!(c&&(t?m:d)&&yi(!t,s,a).exists((f=>NE(o,f)&&!$a(l,Du(o,f)))))||yi(t,s,a).fold(_t,(f=>{const g=Du(o,f);if(NE(o,f)&&!$a(l,g)){if(t||TE(e,f,!1),i&&c){if(t&&d||!t&&m)return!0;TE(e,f,t),e.dom.remove(i)}return!0}return!1}))}return!1},TB=(e,t,n,o)=>{const r=e.selection.getRng(),s=G.fromRangeStart(r),a=e.getBody();return o==="selection"?((i,l)=>{const c=l.startSummary.exists((f=>f.contains(i.startContainer))),d=l.startSummary.exists((f=>f.contains(i.endContainer))),m=l.startDetails.forall((f=>l.endDetails.forall((g=>f!==g))));return(c||d)&&!(c&&d)||m})(r,t):n?((i,l)=>l.startSummary.exists((c=>((d,m)=>Yo(m).exists((f=>Ht(f.getNode())&&io(m,f).exists((g=>g.isEqual(d)))||f.isEqual(d))))(i,c))))(s,t)||((i,l,c)=>c.startDetails.exists((d=>Zn(i,l).forall((m=>!d.contains(m.container()))))))(a,s,t):((i,l)=>l.startSummary.exists((c=>((d,m)=>zn(m).exists((f=>f.isEqual(d))))(i,c))))(s,t)||((i,l)=>l.startDetails.exists((c=>io(c,i).forall((d=>l.startSummary.exists((m=>!m.contains(i.container())&&m.contains(d.container()))))))))(s,t)},La=(e,t,n)=>((o,r,s)=>((a,i)=>{const l=_.from(a.getParent(i.startContainer,"details")),c=_.from(a.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const d=l.bind((m=>_.from(a.select("summary",m)[0])));return _.some({startSummary:d,startDetails:l,endDetails:c})}return _.none()})(o.dom,o.selection.getRng()).fold((()=>DE(o,r,s)),(a=>TB(o,a,r,s)||DE(o,r,s))))(e,t,n)||AB&&((o,r,s)=>{const a=o.selection,i=a.getNode(),l=a.getRng(),c=G.fromRangeStart(l);return!!rN(i)&&(s==="selection"&&_E(l,i)||oC(r,c,i)?kE(i):o.undoManager.transact((()=>{const d=a.getSel();let{anchorNode:m,anchorOffset:f,focusNode:g,focusOffset:h}=d??{};const b=()=>{te(m)&&te(f)&&te(g)&&te(h)&&d?.setBaseAndExtent(m,f,g,h)},v=(E,N)=>{K(E.childNodes,(D=>{Ul(D)&&N.appendChild(D)}))},y=o.dom.create("span",{"data-mce-bogus":"1"});v(i,y),i.appendChild(y),b(),s!=="word"&&s!=="line"||d==null||d.modify("extend",r?"right":"left",s),!a.isCollapsed()&&_E(a.getRng(),y)?kE(i):(o.execCommand(r?"ForwardDelete":"Delete"),m=d?.anchorNode,f=d?.anchorOffset,g=d?.focusNode,h=d?.focusOffset,v(y,i),b()),o.dom.remove(y)})),!0)})(e,t,n)?_.some(Ee):_.none(),RE=e=>(t,n,o={})=>{const r=t.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:Ee,inputType:n},a=R0(new InputEvent(e));return t.dispatch(e,{...a,...s,...o})},gc=RE("input"),Ru=RE("beforeinput"),OE=No(),BE=OE.os,PE=BE.isMacOS()||BE.isiOS(),DB=OE.browser.isFirefox(),qi=(e,t)=>{const n=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const s=l=>/^(ul|ol|dl)$/.test(Le(l)),a=l=>s(l)?_.from(l):Gc(l,s),i=l=>n.isEmpty(l.dom);(l=>{for(;l;){if(xe(l)||re(l)&&l.data&&/[\r\n\s]/.test(l.data))return _.from(S.fromDom(l));l=l.nextSibling}return _.none()})(t.firstChild).each((l=>{a(l).fold((()=>{if(i(l)){const c=(d=>eB(tB,d,0))(l).element;xs(c)||X(c,S.fromText(Ft))}}),(c=>{dn(c,S.fromText(Ft))}))}))}const r=n.createRng();if(t.normalize(),t.hasChildNodes()){const s=new ln(t,t);let a,i=t;for(;a=s.current();){if(re(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else Ht(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));e.selection.setRng(r),$l(e,r)},hc=(e,t)=>{const n=e.getRoot();let o,r=t;for(;r!==n&&r&&e.getContentEditable(r)!=="false";){if(e.getContentEditable(r)==="true"){o=r;break}r=r.parentNode}return r!==n?o:n},oh=e=>_.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),rh=e=>{e.innerHTML='<br data-mce-bogus="1">'},bc=(e,t)=>{Sn(e).toLowerCase()===t.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;_.from(r.style).map(s.parseStyle).each((d=>{const m={...om(S.fromDom(o)),...d};s.setStyles(o,m)}));const a=_.from(r.class).map((d=>d.split(/\s+/))),i=_.from(o.className).map((d=>Pe(d.split(/\s+/),(m=>m!==""))));Wt(a,i,((d,m)=>{const f=Pe(m,(h=>!Se(d,h))),g=[...d,...f];s.setAttrib(o,"class",g.join(" "))}));const l=["style","class"],c=er(r,((d,m)=>!Se(l,m)));s.setAttribs(o,c)})(e,t,gi(e))},LE=(e,t,n,o,r=!0,s,a)=>{const i=e.dom,l=e.schema,c=Sn(e),d=n?n.nodeName.toUpperCase():"";let m=t;const f=l.getTextInlineElements();let g;g=s||d==="TABLE"||d==="HR"?i.create(s||c,a||{}):n.cloneNode(!1);let h=g;if(r){do if(f[m.nodeName]){if(Ro(m)||Oo(m))continue;const b=m.cloneNode(!1);i.setAttrib(b,"id",""),g.hasChildNodes()?(b.appendChild(g.firstChild),g.appendChild(b)):(h=b,g.appendChild(b))}while((m=m.parentNode)&&m!==o);((b,v)=>{const y=S.fromDom(b),E=S.fromDom(v),N=wn("span"),D=Ce(pe,y),A=P=>nt(P)&&ei(P,"font-size").isSome(),R=[...A(E)?[E]:[],...Kh(E,A,D)];K(R.slice(1),(P=>{Xc(P,"font-size"),ot(P,"data-mce-style"),N(P)&&mt(P)&&Yt(P)}))})(g,h)}else i.setAttrib(g,"style",null),i.setAttrib(g,"class",null);return bc(e,g),rh(h),g},ME=(e,t)=>{const n=e?.parentNode;return te(n)&&n.nodeName===t},IE=e=>te(e)&&/^(OL|UL|LI)$/.test(e.nodeName),sh=e=>te(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Ou=e=>{const t=e.parentNode;return sh(t)?t:e},Bu=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];for(;o&&!xe(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},FE=e=>Qt(yr(om(S.fromDom(e)),((t,n)=>`${n}: ${t};`)),((t,n)=>t+n),""),RB=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),ah=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,ih=(e,t)=>te(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",lh=(e,t,n)=>re(t)?e?n===1&&t.data.charAt(n-1)===yn?0:n:n===t.data.length-1&&t.data.charAt(n)===yn?t.data.length:n:n,jE={insert:(e,t)=>{let n,o,r,s,a=!1;const i=e.dom,l=e.schema.getNonEmptyElements(),c=e.selection.getRng(),d=Sn(e),m=S.fromDom(c.startContainer),f=Vt(m,c.startOffset),g=f.exists((j=>ao(j)&&!Gr(j))),h=c.collapsed&&g,b=(j,W)=>LE(e,n,A,D,QN(e),j,W),v=j=>{const W=lh(j,n,o);if(re(n)&&(j?W>0:W<n.data.length))return!1;if((n.parentNode===A||n===A)&&a&&!j||j&&xe(n)&&n===A.firstChild)return!0;if(ah(n,"TABLE")||ah(n,"HR"))return(H=>H.nodeName==="BR"||H.nextSibling&&H.nextSibling.nodeName==="BR")(n)?!j:a&&!j||!a&&j;const B=new ln(n,A);let I;for(re(n)&&(j&&W===0?B.prev():j||W!==n.data.length||B.next());I=B.current();){if(xe(I)){if(!I.getAttribute("data-mce-bogus")){const H=I.nodeName.toLowerCase();if(l[H]&&H!=="br")return!1}}else if(re(I)&&!ai(I.data))return!1;j?B.prev():B.next()}return!0},y=()=>{let j;return j=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&R!=="HGROUP"?b(d):b(),((W,B)=>{const I=JN(W);return!kt(B)&&(we(I)?Se(k.explode(I),B.nodeName.toLowerCase()):I)})(e,s)&&ih(i,s)&&i.isEmpty(A,void 0,{includeZwsp:!0})?j=i.split(s,A):i.insertAfter(j,A),qi(e,j),j};Ld(i,c).each((j=>{c.setStart(j.startContainer,j.startOffset),c.setEnd(j.endContainer,j.endOffset)})),n=c.startContainer,o=c.startOffset;const E=!(!t||!t.shiftKey),N=!(!t||!t.ctrlKey);xe(n)&&n.hasChildNodes()&&!h&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&re(n)?n.data.length:0);const D=hc(i,n);if(!D||((j,W)=>{const B=j.dom.getParent(W,"ol,ul,dl");return B!==null&&j.dom.getContentEditableParent(B)==="false"})(e,n))return;E||(n=((j,W,B,I,H)=>{var J,oe;const le=j.dom,_e=(J=hc(le,I))!==null&&J!==void 0?J:le.getRoot();let Oe=le.getParent(I,le.isBlock);if(!Oe||!ih(le,Oe)){if(Oe=Oe||_e,!Oe.hasChildNodes()){const Ne=le.create(W);return bc(j,Ne),Oe.appendChild(Ne),B.setStart(Ne,0),B.setEnd(Ne,0),Ne}let De,rt=I;for(;rt&&rt.parentNode!==Oe;)rt=rt.parentNode;for(;rt&&!le.isBlock(rt);)De=rt,rt=rt.previousSibling;const be=(oe=De?.parentElement)===null||oe===void 0?void 0:oe.nodeName;if(De&&be&&j.schema.isValidChild(be,W.toLowerCase())){const Ne=De.parentNode,F=le.create(W);for(bc(j,F),Ne.insertBefore(F,De),rt=De;rt&&!le.isBlock(rt);){const z=rt.nextSibling;F.appendChild(rt),rt=z}B.setStart(I,H),B.setEnd(I,H)}}return I})(e,d,c,n,o));let A=i.getParent(n,i.isBlock)||i.getRoot();s=te(A?.parentNode)?i.getParent(A.parentNode,i.isBlock):null,r=A?A.nodeName.toUpperCase():"";const R=s?s.nodeName.toUpperCase():"";if(R!=="LI"||N||(A=s,s=s.parentNode,r=R),xe(s)&&((j,W,B)=>!W&&B.nodeName.toLowerCase()===Sn(j)&&j.dom.isEmpty(B)&&((I,H)=>{let J=H;for(;J&&J!==I&&Ye(J.nextSibling);){const le=J.parentElement;if(!le||(oe=le,!Me(j.schema.getTextBlockElements(),oe.nodeName.toLowerCase())))return vm(le);J=le}var oe;return!1})(j.getBody(),B))(e,E,A))return((j,W,B)=>{var I,H,J;const oe=W(Sn(j)),le=((_e,Oe)=>_e.dom.getParent(Oe,vm))(j,B);le&&(j.dom.insertAfter(oe,le),qi(j,oe),((J=(H=(I=B.parentElement)===null||I===void 0?void 0:I.childNodes)===null||H===void 0?void 0:H.length)!==null&&J!==void 0?J:0)>1&&j.dom.remove(B))})(e,b,A);if(/^(LI|DT|DD)$/.test(r)&&xe(s)&&i.isEmpty(A))return void((j,W,B,I,H)=>{const J=j.dom,oe=j.selection.getRng(),le=B.parentNode;if(B===j.getBody()||!le)return;var _e;IE(_e=B)&&IE(_e.parentNode)&&(H="LI");const Oe=sh(I)?FE(I):void 0;let De=sh(I)&&Oe?W(H,{style:FE(I)}):W(H);if(Bu(B,I,!0)&&Bu(B,I,!1))if(ME(B,"LI")){const rt=Ou(B);J.insertAfter(De,rt),(be=>{var Ne;return((Ne=be.parentNode)===null||Ne===void 0?void 0:Ne.firstChild)===be})(B)?J.remove(rt):J.remove(B)}else J.replace(De,B);else if(Bu(B,I,!0))ME(B,"LI")?(J.insertAfter(De,Ou(B)),De.appendChild(J.doc.createTextNode(" ")),De.appendChild(B)):le.insertBefore(De,B),J.remove(I);else if(Bu(B,I,!1))J.insertAfter(De,Ou(B)),J.remove(I);else{B=Ou(B);const rt=oe.cloneRange();rt.setStartAfter(I),rt.setEndAfter(B);const be=rt.extractContents();if(H==="LI"&&(Ne=>Ne.firstChild&&Ne.firstChild.nodeName==="LI")(be)){const Ne=Pe(qe(De.children,S.fromDom),$o(wn("br")));De=be.firstChild,J.insertAfter(be,B),K(Ne,(F=>q(S.fromDom(De),F))),Oe&&De.setAttribute("style",Oe)}else J.insertAfter(be,B),J.insertAfter(De,B);J.remove(I)}qi(j,De)})(e,b,s,A,d);if(!(h||A!==e.getBody()&&ih(i,A)))return;const P=A.parentNode;let L;if(h)L=b(d),f.fold((()=>{X(m,S.fromDom(L))}),(j=>{dn(j,S.fromDom(L))})),e.selection.setCursorLocation(L,0);else if(fi(A))L=$m(A),i.isEmpty(A)&&rh(A),bc(e,L),qi(e,L);else if(v(!1))L=y();else if(v(!0)&&P){const j=G.fromRangeStart(c),W=Wf(j),B=S.fromDom(A),I=zd(B,j,e.schema)?Iy(B,j,e.schema).bind((J=>_.from(J.getNode()))):_.none();L=P.insertBefore(b(),A);const H=ah(A,"HR")||W?L:I.getOr(A);qi(e,H)}else{const j=(B=>{const I=B.cloneRange();return I.setStart(B.startContainer,lh(!0,B.startContainer,B.startOffset)),I.setEnd(B.endContainer,lh(!1,B.endContainer,B.endOffset)),I})(c).cloneRange();j.setEndAfter(A);const W=j.extractContents();(B=>{K(Zc(S.fromDom(B),wt),(I=>{const H=I.dom;H.nodeValue=vo(H.data)}))})(W),(B=>{let I=B;do re(I)&&(I.data=I.data.replace(/^[\r\n]+/,"")),I=I.firstChild;while(I)})(W),L=W.firstChild,A===L?te(P)&&i.insertAfter(W,P):i.insertAfter(W,A),((B,I,H)=>{var J;const oe=[];if(!H)return;let le=H;for(;le=le.firstChild;){if(B.isBlock(le))return;xe(le)&&!I[le.nodeName.toLowerCase()]&&oe.push(le)}let _e=oe.length;for(;_e--;)le=oe[_e],(!le.hasChildNodes()||le.firstChild===le.lastChild&&((J=le.firstChild)===null||J===void 0?void 0:J.nodeValue)===""||RB(B,le))&&B.remove(le)})(i,l,L),((B,I)=>{I.normalize();const H=I.lastChild;(!H||xe(H)&&/^(left|right)$/gi.test(B.getStyle(H,"float",!0)))&&B.add(I,"br")})(i,A),i.isEmpty(A)&&rh(A),L.normalize(),i.isEmpty(L)?(i.remove(L),y()):(bc(e,L),qi(e,L))}i.setAttrib(L,"id",""),e.dispatch("NewBlock",{newBlock:L})},fakeEventName:"insertParagraph"},zE=(e,t,n)=>{const o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),$l(e,o)},OB=(e,t)=>{const n=S.fromTag("br");dn(S.fromDom(t),n),e.undoManager.add()},BB=(e,t)=>{PB(e.getBody(),t)||M(S.fromDom(t),S.fromTag("br"));const n=S.fromTag("br");M(S.fromDom(t),n),zE(e,n.dom,!1),e.undoManager.add()},PB=(e,t)=>{return n=G.after(t),!!Ht(n.getNode())||Zn(e,G.after(t)).map((o=>Ht(o.getNode()))).getOr(!1);var n},UE=e=>e&&e.nodeName==="A"&&"href"in e,LB=e=>e.fold(_t,UE,UE,_t),MB=(e,t)=>{t.fold(Ee,Ce(OB,e),Ce(BB,e),Ee)},HE={insert:(e,t)=>{const n=(o=>{const r=Ce(ka,o),s=G.fromRangeStart(o.selection.getRng());return Ir(r,o.getBody(),s).filter(LB)})(e);n.isSome()?n.each(Ce(MB,e)):((o,r)=>{const s=o.selection,a=o.dom,i=s.getRng();let l,c=!1;Ld(a,i).each((v=>{i.setStart(v.startContainer,v.startOffset),i.setEnd(v.endContainer,v.endOffset)}));let d=i.startOffset,m=i.startContainer;if(xe(m)&&m.hasChildNodes()){const v=d>m.childNodes.length-1;m=m.childNodes[Math.min(d,m.childNodes.length-1)]||m,d=v&&re(m)?m.data.length:0}let f=a.getParent(m,a.isBlock);const g=f&&f.parentNode?a.getParent(f.parentNode,a.isBlock):null,h=g?g.nodeName.toUpperCase():"",b=!(!r||!r.ctrlKey);h!=="LI"||b||(f=g),re(m)&&d>=m.data.length&&(((v,y,E)=>{const N=new ln(y,E);let D;const A=v.getNonEmptyElements();for(;D=N.next();)if(A[D.nodeName.toLowerCase()]||re(D)&&D.length>0)return!0;return!1})(o.schema,m,f||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),Ym(a,i,l),zE(o,l,c),o.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},$E=(e,t)=>oh(e).filter((n=>t.length>0&&Z(S.fromDom(n),t))).isSome(),yo=ho([{br:[]},{block:[]},{none:[]}]),IB=(e,t)=>(n=>$E(n,GN(n)))(e),qE=e=>(t,n)=>(o=>oh(o).filter((r=>di(S.fromDom(r)))).isSome())(t)===e,WE=(e,t)=>(n,o)=>(s=>oh(s).fold(ie(""),(a=>a.nodeName.toUpperCase())))(n)===e.toUpperCase()===t,FB=e=>{const t=hc(e.dom,e.selection.getStart());return kt(t)},vc=e=>WE("pre",e),Pu=e=>(t,n)=>KN(t)===e,jB=(e,t)=>(n=>$E(n,YN(n)))(e),Lu=(e,t)=>t,zB=e=>{const t=Sn(e),n=hc(e.dom,e.selection.getStart());return te(n)&&e.schema.isValidChild(n.nodeName,t)},UB=e=>{const t=e.selection.getRng(),n=S.fromDom(t.startContainer),o=Vt(n,t.startOffset).map((r=>ao(r)&&!Gr(r)));return t.collapsed&&o.getOr(!0)},zo=(e,t)=>(n,o)=>Qt(e,((r,s)=>r&&s(n,o)),!0)?_.some(t):_.none(),Mu=(e,t,n)=>{if(!t.mode.isReadOnly()){if(t.selection.isCollapsed()||(o=>{o.execCommand("delete")})(t),te(n)&&Ru(t,e.fakeEventName).isDefaultPrevented())return;e.insert(t,n),te(n)&&gc(t,e.fakeEventName)}},VE=(e,t)=>{if(e.mode.isReadOnly())return;const n=()=>Mu(HE,e,t),o=()=>Mu(jE,e,t),r=((s,a)=>Ow([zo([IB],yo.none()),zo([vc(!0),FB],yo.none()),zo([WE("summary",!0)],yo.br()),zo([vc(!0),Pu(!1),Lu],yo.br()),zo([vc(!0),Pu(!1)],yo.block()),zo([vc(!0),Pu(!0),Lu],yo.block()),zo([vc(!0),Pu(!0)],yo.br()),zo([qE(!0),Lu],yo.br()),zo([qE(!0)],yo.block()),zo([jB],yo.br()),zo([Lu],yo.br()),zo([zB],yo.block()),zo([UB],yo.block())],[s,!(!a||!a.shiftKey)]).getOr(yo.none()))(e,t);switch(XN(e)){case"linebreak":r.fold(n,n,Ee);break;case"block":r.fold(o,o,Ee);break;case"invert":r.fold(o,n,Ee);break;default:r.fold(n,o,Ee)}},KE=No(),HB=KE.os.isiOS()&&KE.browser.isSafari(),XE=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact((()=>{VE(e,t)})))},$B=No(),YE=e=>e.stopImmediatePropagation(),GE=e=>e.keyCode===me.PAGE_UP||e.keyCode===me.PAGE_DOWN,QE=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",YE,!0):!n&&e.get()&&t.off("NodeChange",YE),e.set(n)},JE=(e,t)=>e===t||e.contains(t),ZE=(e,t)=>{const n=t.container(),o=t.offset();return re(n)?(n.insertData(o,e),_.some(G(n,o+e.length))):wd(t).map((r=>{const s=S.fromText(e);return t.isAtEnd()?M(r,s):dn(r,s),G(s.dom,e.length)}))},ek=Ce(ZE,Ft),tk=Ce(ZE," "),nk=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},qB=e=>{const t=G.fromRangeStart(e.selection.getRng()),n=S.fromDom(e.getBody());if(e.selection.isCollapsed()){const o=Ce(ka,e),r=G.fromRangeStart(e.selection.getRng());return Ir(o,e.getBody(),r).bind((s=>a=>a.fold((i=>io(s.dom,G.before(i))),(i=>zn(i)),(i=>Yo(i)),(i=>Zn(s.dom,G.after(i)))))(n)).map((s=>()=>((a,i,l)=>c=>$y(a,c,l)?ek(i):tk(i))(n,t,e.schema)(s).each(nk(e))))}return _.none()},WB=e=>{return Vr(p.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),(()=>{const o=S.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((r,s,a)=>$y(r,s,a)?ek(s):tk(s))(o,G.fromRangeStart(e.selection.getRng()),e.schema).each(nk(e))}));var t,n},VB=e=>oT(e)?[{keyCode:me.TAB,action:Fe(nE,e,!0)},{keyCode:me.TAB,shiftKey:!0,action:Fe(nE,e,!1)}]:[],KB=e=>{if(e.addShortcut("Meta+P","","mcePrint"),NB(e),Lr(e))return tn(null);{const t=UO(e);return(n=>{n.on("beforeinput",(o=>{n.selection.isEditable()&&!yt(o.getTargetRanges(),(r=>!((s,a)=>!JE(s.getBody(),a.startContainer)||!JE(s.getBody(),a.endContainer)||ly(s.dom,a))(n,r)))||o.preventDefault()}))})(e),(n=>{n.on("keyup compositionstart",Ce(QO,n))})(e),((n,o)=>{n.on("keydown",(r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=p.os.isMacOS()||p.os.isiOS();mc([{keyCode:me.RIGHT,action:Fe(kS,s,!0)},{keyCode:me.LEFT,action:Fe(kS,s,!1)},{keyCode:me.UP,action:Fe(_S,s,!1)},{keyCode:me.DOWN,action:Fe(_S,s,!0)},...l?[{keyCode:me.UP,action:Fe(Su,s,!1),metaKey:!0,shiftKey:!0},{keyCode:me.DOWN,action:Fe(Su,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:me.RIGHT,action:Fe(ZS,s,!0)},{keyCode:me.LEFT,action:Fe(ZS,s,!1)},{keyCode:me.UP,action:Fe(Kg,s,!1)},{keyCode:me.DOWN,action:Fe(Kg,s,!0)},{keyCode:me.UP,action:Fe(Kg,s,!1)},{keyCode:me.UP,action:Fe(TS,s,!1)},{keyCode:me.DOWN,action:Fe(TS,s,!0)},{keyCode:me.RIGHT,action:Fe(BS,s,!0)},{keyCode:me.LEFT,action:Fe(BS,s,!1)},{keyCode:me.UP,action:Fe(PS,s,!1)},{keyCode:me.DOWN,action:Fe(PS,s,!0)},{keyCode:me.RIGHT,action:Fe(nS,s,a,!0)},{keyCode:me.LEFT,action:Fe(nS,s,a,!1)},{keyCode:me.RIGHT,ctrlKey:!l,altKey:l,action:Fe(HO,s,a)},{keyCode:me.LEFT,ctrlKey:!l,altKey:l,action:Fe($O,s,a)},{keyCode:me.UP,action:Fe(AS,s,!1)},{keyCode:me.DOWN,action:Fe(AS,s,!0)}],i).each((c=>{i.preventDefault()}))})(n,o,r)}))})(e,t),((n,o)=>{let r=!1;n.on("keydown",(s=>{r=s.keyCode===me.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===me.BACKSPACE?"deleteContentBackward":"deleteContentForward",d=a.selection.isCollapsed(),m=d?"character":"selection",f=g=>d?g?"word":"line":"selection";OS([{keyCode:me.BACKSPACE,action:Fe(bS,a)},{keyCode:me.BACKSPACE,action:Fe(wg,a,!1)},{keyCode:me.DELETE,action:Fe(wg,a,!0)},{keyCode:me.BACKSPACE,action:Fe(yg,a,!1)},{keyCode:me.DELETE,action:Fe(yg,a,!0)},{keyCode:me.BACKSPACE,action:Fe(Og,a,i,!1)},{keyCode:me.DELETE,action:Fe(Og,a,i,!0)},{keyCode:me.BACKSPACE,action:Fe(ip,a,!1)},{keyCode:me.DELETE,action:Fe(ip,a,!0)},{keyCode:me.BACKSPACE,action:Fe(La,a,!1,m)},{keyCode:me.DELETE,action:Fe(La,a,!0,m)},...PE?[{keyCode:me.BACKSPACE,altKey:!0,action:Fe(La,a,!1,f(!0))},{keyCode:me.DELETE,altKey:!0,action:Fe(La,a,!0,f(!0))},{keyCode:me.BACKSPACE,metaKey:!0,action:Fe(La,a,!1,f(!1))}]:[{keyCode:me.BACKSPACE,ctrlKey:!0,action:Fe(La,a,!1,f(!0))},{keyCode:me.DELETE,ctrlKey:!0,action:Fe(La,a,!0,f(!0))}],{keyCode:me.BACKSPACE,action:Fe(Eg,a,!1)},{keyCode:me.DELETE,action:Fe(Eg,a,!0)},{keyCode:me.BACKSPACE,action:Fe(Lg,a,!1)},{keyCode:me.DELETE,action:Fe(Lg,a,!0)},{keyCode:me.BACKSPACE,action:Fe(bg,a,!1)},{keyCode:me.DELETE,action:Fe(bg,a,!0)},{keyCode:me.BACKSPACE,action:Fe(hg,a,!1)},{keyCode:me.DELETE,action:Fe(hg,a,!0)},{keyCode:me.BACKSPACE,action:Fe(Bg,a,!1)},{keyCode:me.DELETE,action:Fe(Bg,a,!0)},{keyCode:me.BACKSPACE,action:Fe(Sg,a,!1)},{keyCode:me.DELETE,action:Fe(Sg,a,!0)},{keyCode:me.BACKSPACE,action:Fe(Ig,a,!1)},{keyCode:me.DELETE,action:Fe(Ig,a,!0)}],l).filter((g=>a.selection.isEditable())).each((g=>{l.preventDefault(),Ru(a,c).isDefaultPrevented()||(g(),gc(a,c))}))})(n,o,s)})),n.on("keyup",(s=>{s.isDefaultPrevented()||((a,i,l)=>{mc([{keyCode:me.BACKSPACE,action:Fe(ww,a)},{keyCode:me.DELETE,action:Fe(ww,a)},...PE?[{keyCode:me.BACKSPACE,altKey:!0,action:Fe(uc,a)},{keyCode:me.DELETE,altKey:!0,action:Fe(uc,a)},...l?[{keyCode:DB?224:91,action:Fe(uc,a)}]:[]]:[{keyCode:me.BACKSPACE,ctrlKey:!0,action:Fe(uc,a)},{keyCode:me.DELETE,ctrlKey:!0,action:Fe(uc,a)}]],i)})(n,s,r),r=!1}))})(e,t),(n=>{let o=_.none();n.on("keydown",(r=>{r.keyCode===me.ENTER&&(HB&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(re(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(s=>{o=_.some(s.selection.getBookmark()),s.undoManager.add()})(n):XE(n,r))})),n.on("keyup",(r=>{r.keyCode===me.ENTER&&o.each((()=>((s,a)=>{s.undoManager.undo(),o.fold(Ee,(i=>s.selection.moveToBookmark(i))),XE(s,a),o=_.none()})(n,r)))}))})(e),(n=>{n.on("keydown",(o=>{o.isDefaultPrevented()||((r,s)=>{OS([{keyCode:me.SPACEBAR,action:Fe(qB,r)},{keyCode:me.SPACEBAR,action:Fe(WB,r)}],s).each((a=>{s.preventDefault(),Ru(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),gc(r,"insertText",{data:" "}))}))})(n,o)}))})(e),(n=>{n.on("input",(o=>{o.isComposing||(r=>{const s=S.fromDom(r.getBody());r.selection.isCollapsed()&&uD(s,G.fromRangeStart(r.selection.getRng()),r.schema).each((a=>{r.selection.setRng(a.toRange())}))})(n)}))})(e),(n=>{n.on("keydown",(o=>{o.isDefaultPrevented()||((r,s)=>{mc([...VB(r)],s).each((a=>{s.preventDefault()}))})(n,o)}))})(e),((n,o)=>{n.on("keydown",(r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=p.os.isMacOS()||p.os.isiOS();mc([{keyCode:me.END,action:Fe(NS,s,!0)},{keyCode:me.HOME,action:Fe(NS,s,!1)},...l?[]:[{keyCode:me.HOME,action:Fe(Su,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:me.END,action:Fe(Su,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:me.END,action:Fe(LS,s,!0)},{keyCode:me.HOME,action:Fe(LS,s,!1)},{keyCode:me.END,action:Fe(wu,s,!0,a)},{keyCode:me.HOME,action:Fe(wu,s,!1,a)}],i).each((c=>{i.preventDefault()}))})(n,o,r)}))})(e,t),((n,o)=>{if($B.os.isMacOS())return;const r=tn(!1);n.on("keydown",(s=>{GE(s)&&QE(r,n,!0)})),n.on("keyup",(s=>{s.isDefaultPrevented()||((a,i,l)=>{mc([{keyCode:me.PAGE_UP,action:Fe(wu,a,!1,i)},{keyCode:me.PAGE_DOWN,action:Fe(wu,a,!0,i)}],l)})(n,o,s),GE(s)&&r.get()&&(QE(r,n,!1),n.nodeChanged())}))})(e,t),t}},ch=(e,t)=>()=>{const n=sc(e);return te(n)&&n.nodeName===t},ok=e=>e.type===3,rk=e=>e.length===0,XB=e=>{const t=(o,r)=>{const s=Rn.create("li");K(o,(a=>s.append(a))),r?e.insert(s,r,!0):e.append(s)},n=Qt(e.children(),((o,r)=>ok(r)?[...o,r]:rk(o)||ok(r)?o:(t(o,r),[])),[]);rk(n)||t(n)},YB=e=>{(t=>{t.on("keydown",(n=>{n.keyCode===me.BACKSPACE?pg(t,!1)&&n.preventDefault():n.keyCode===me.DELETE&&pg(t,!0)&&n.preventDefault()}))})(e),(t=>{t.addCommand("InsertUnorderedList",((n,o)=>{ug(t,"UL",o)})),t.addCommand("InsertOrderedList",((n,o)=>{ug(t,"OL",o)})),t.addCommand("InsertDefinitionList",((n,o)=>{ug(t,"DL",o)})),t.addCommand("RemoveList",(()=>{gu(t)})),t.addCommand("mceListUpdate",((n,o)=>{Ue(o)&&((r,s)=>{const a=sc(r);a===null||sg(r,a)||r.undoManager.transact((()=>{Ue(s.styles)&&r.dom.setStyles(a,s.styles),Ue(s.attrs)&&Ct(s.attrs,((i,l)=>r.dom.setAttrib(a,l,i)))}))})(t,o)})),t.addCommand("mceListBackspaceDelete",((n,o)=>{pg(t,o)})),t.addQueryStateHandler("InsertUnorderedList",ch(t,"UL")),t.addQueryStateHandler("InsertOrderedList",ch(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",ch(t,"DL"))})(e),(t=>{t.on("PreInit",(()=>{const{parser:n}=t;n.addNodeFilter("ul,ol",(o=>K(o,XB)))}))})(e),(t=>{uT(t)&&(n=>{n.on("keydown",(o=>{o.keyCode!==me.TAB||me.metaKeyPressed(o)||n.undoManager.transact((()=>{(o.shiftKey?ig(n):sw(n))&&o.preventDefault()}))}))})(t)})(e)};class GB{constructor(t){let n;this.lastPath=[],this.editor=t;const o=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",(r=>{const s=t.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};r.type!=="nodechange"&&Ff(a,n)||t.dispatch("SelectionChange"),n=a})),t.on("contextmenu",(()=>{Rd(t),t.dispatch("SelectionChange")})),t.on("SelectionChange",(()=>{const r=t.selection.getStart(!0);r&&Nd(t)&&!o.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})})),t.on("mouseup",(r=>{!r.isDefaultPrevented()&&Nd(t)&&(t.selection.getNode().nodeName==="IMG"?Po.setEditorTimeout(t,(()=>{t.nodeChanged()})):t.nodeChanged())}))}nodeChanged(t={}){const n=this.editor,o=n.selection;let r;if(n.initialized&&o&&!NA(n)&&!Cd(n)){const s=n.getBody();r=o.getStart(!0)||s,r.ownerDocument===n.getDoc()&&n.dom.isChildOf(r,s)||(r=s);const a=[];n.dom.getParent(r,(i=>i===s||(a.push(i),!1))),n.dispatch("NodeChange",{...t,element:r,parents:a})}}isSameElementPath(t){let n;const o=this.editor,r=wo(o.dom.getParents(t,zt,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=r,!0}return this.lastPath=r,!1}}const sk="x-tinymce/html",Iu=ie(sk),dh="<!-- "+sk+" -->",QB=e=>dh+e,ak=e=>e.indexOf(dh)!==-1,ik="%MCEPASTEBIN%",uh=e=>e.dom.get("mcepastebin"),JB=e=>te(e)&&e.id==="mcepastebin",lk=e=>e===ik,ck=(e,t)=>(k.each(t,(n=>{e=xo(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])})),e),dk=e=>ck(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,o)=>n||o?Ft:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),uk=(e,t)=>({content:e,cancelled:t}),mh=(e,t)=>(e.insertContent(t,{merge:WA(e),paste:!0}),!0),fh=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),ZB=(e,t,n)=>!(e.selection.isCollapsed()||!fh(t))&&((o,r,s)=>(o.undoManager.extra((()=>{s(o,r)}),(()=>{o.execCommand("mceInsertLink",!1,r)})),!0))(e,t,n),eP=(e,t,n)=>!!((o,r)=>fh(r)&&yt(qb(o),(s=>Ka(r.toLowerCase(),`.${s.toLowerCase()}`))))(e,t)&&((o,r,s)=>(o.undoManager.extra((()=>{s(o,r)}),(()=>{o.insertContent('<img src="'+r+'">')})),!0))(e,t,n),tP=(()=>{let e=0;return()=>"mceclip"+e++})(),nP=e=>{const t=Vg();return XS(t,e),Wg(t),t},mk=(e,t,n,o,r)=>{const s=((a,i,l)=>((c,d,m)=>{const f=((h,b,v)=>h.dispatch("PastePreProcess",{content:b,internal:v}))(c,d,m),g=((h,b)=>{const v=Ti({sanitize:$b(h),sandbox_iframes:Wb(h),sandbox_iframes_exclusions:af(h),convert_unsafe_embeds:aT(h)},h.schema);v.addNodeFilter("meta",(E=>{k.each(E,(N=>{N.remove()}))}));const y=v.parse(b,{forced_root_block:!1,isRootContent:!0});return As({validate:!0},h.schema).serialize(y)})(c,f.content);return c.hasEventListeners("PastePostProcess")&&!f.isDefaultPrevented()?((h,b,v)=>{const y=h.dom.create("div",{style:"display:none"},b),E=((N,D,A)=>N.dispatch("PastePostProcess",{node:D,internal:A}))(h,y,v);return uk(E.node.innerHTML,E.isDefaultPrevented())})(c,g,m):uk(g,f.isDefaultPrevented())})(a,i,l))(e,t,n);if(!s.cancelled){const a=s.content,i=()=>((l,c,d)=>{d||!VA(l)?mh(l,c):((m,f)=>{k.each([ZB,eP,mh],(g=>!g(m,f,mh)))})(l,c)})(e,a,o);r?Ru(e,"insertFromPaste",{dataTransfer:nP(a)}).isDefaultPrevented()||(i(),gc(e,"insertFromPaste")):i()}},Fu=(e,t,n,o)=>{const r=n||ak(t);mk(e,(s=>s.replace(dh,""))(t),r,!1,o)},ph=(e,t,n)=>{const o=e.dom.encode(t).replace(/\r\n/g,`
`),r=((s,a,i)=>{const l=s.split(/\n\n/),c=((f,g)=>{let h="<"+f;const b=yr(g,((v,y)=>y+'="'+fa.encodeAllRaw(v)+'"'));return b.length&&(h+=" "+b.join(" ")),h+">"})(a,i),d="</"+a+">",m=qe(l,(f=>f.split(/\n/).join("<br />")));return m.length===1?m[0]:qe(m,(f=>c+f+d)).join("")})(Zh(o,XA(e)),Sn(e),gi(e));mk(e,r,!1,!0,n)},fk=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const o=e.types[n];try{t[o]=e.getData(o)}catch{t[o]=""}}return t},Ls=(e,t)=>t in e&&e[t].length>0,pk=e=>Ls(e,"text/html")||Ls(e,"text/plain"),gk=(e,t,n)=>{const o=t.type==="paste"?t.clipboardData:t.dataTransfer;var r;if(yd(e)&&o){const s=((a,i)=>{const l=i.items?qt(xn(i.items),(d=>d.kind==="file"?[d.getAsFile()]:[])):[],c=i.files?xn(i.files):[];return Pe(l.length>0?l:c,(d=>{const m=qb(d);return f=>Jt(f.type,"image/")&&yt(m,(g=>(h=>{const b=h.toLowerCase(),v={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return k.hasOwn(v,b)?"image/"+v[b]:"image/"+b})(g)===f.type))})(a))})(e,o);if(s.length>0)return t.preventDefault(),(r=s,Promise.all(qe(r,(a=>a1(a).then((i=>({file:a,uri:i}))))))).then((a=>{n&&e.selection.setRng(n),K(a,(i=>{((l,c)=>{kp(c.uri).each((({data:d,type:m,base64Encoded:f})=>{const g=f?d:btoa(d),h=c.file,b=l.editorUpload.blobCache,v=b.getByData(g,m),y=v??((E,N,D,A)=>{const R=tP(),P=Rb(E)&&te(D.name),L=P?((B,I)=>{const H=I.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return te(H)?B.dom.encode(H[1]):void 0})(E,D.name):R,j=P?D.name:void 0,W=N.create(R,D,A,L,j);return N.add(W),W})(l,b,h,g);Fu(l,`<img src="${y.blobUri()}">`,!1,!0)}))})(e,i)}))})),!0}return!1},gh=(e,t,n,o,r)=>{let s=dk(n);const a=Ls(t,Iu())||ak(n),i=!a&&(c=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c))(s),l=fh(s);(lk(s)||!s.length||i&&!l)&&(o=!0),(o||l)&&(s=Ls(t,"text/plain")&&i?t["text/plain"]:(c=>{const d=Cs(),m=Ti({},d);let f="";const g=d.getVoidElements(),h=k.makeMap("script noscript style textarea video audio iframe object"," "),b=d.getBlockElements(),v=y=>{const E=y.name,N=y;if(E!=="br"){if(E!=="wbr")if(g[E]&&(f+=" "),h[E])f+=" ";else{if(y.type===3&&(f+=y.value),!(y.name in d.getVoidElements())){let D=y.firstChild;if(D)do v(D);while(D=D.next)}b[E]&&N.next&&(f+=`
`,E==="p"&&(f+=`
`))}}else f+=`
`};return c=ck(c,[/<!\[[^\]]+\]>/g]),v(m.parse(c)),f})(s)),lk(s)||(o?ph(e,s,r):Fu(e,s,a,r))},oP=(e,t,n)=>{((o,r,s)=>{let a;o.on("keydown",(i=>{(l=>me.metaKeyPressed(l)&&l.keyCode===86||l.shiftKey&&l.keyCode===45)(i)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&i.keyCode===86)})),o.on("paste",(i=>{if(i.isDefaultPrevented()||(d=>{var m,f;return p.os.isAndroid()&&((f=(m=d.clipboardData)===null||m===void 0?void 0:m.items)===null||f===void 0?void 0:f.length)===0})(i))return;const l=s.get()==="text"||a;a=!1;const c=fk(i.clipboardData);!pk(c)&&gk(o,i,r.getLastRng()||o.selection.getRng())||(Ls(c,"text/html")?(i.preventDefault(),gh(o,c,c["text/html"],l,!0)):Ls(c,"text/plain")&&Ls(c,"text/uri-list")?(i.preventDefault(),gh(o,c,c["text/plain"],l,!0)):(r.create(),Po.setEditorTimeout(o,(()=>{const d=r.getHtml();r.remove(),gh(o,c,d,l,!1)}),0)))}))})(e,t,n),(o=>{const r=a=>Jt(a,"webkit-fake-url"),s=a=>Jt(a,"data:");o.parser.addNodeFilter("img",((a,i,l)=>{if(!yd(o)&&(c=>{var d;return((d=c.data)===null||d===void 0?void 0:d.paste)===!0})(l))for(const c of a){const d=c.attr("src");we(d)&&!c.attr("data-mce-object")&&d!==p.transparentSrc&&(r(d)||!YA(o)&&s(d))&&c.remove()}}))})(e)},hk=(e,t,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(Iu(),s),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},bk=e=>(t,n)=>{const{dom:o,selection:r}=e,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},t);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(e.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),Po.setEditorTimeout(e,(()=>{r.setRng(i),o.remove(s),n()}),0)},vk=e=>({html:QB(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),yk=e=>!e.selection.isCollapsed()||(t=>!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()))(e),Ck=(e,t)=>{var n,o;return Pr.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(o=t.clientY)!==null&&o!==void 0?o:0,e.getDoc())},xk=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},rP=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,wk=e=>k.trim(e).replace(rP,yl).toLowerCase(),sP=(e,t,n)=>{const o=$A(e);if(n||o==="all"||!qA(e))return t;const r=o?o.split(/[, ]/):[];if(r&&o!=="none"){const s=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,((i,l,c,d)=>{const m=s.parseStyle(s.decode(c)),f={};for(let h=0;h<r.length;h++){const b=m[r[h]];let v=b,y=s.getStyle(a,r[h],!0);/color/.test(r[h])&&(v=wk(v),y=wk(y)),y!==v&&(f[r[h]]=b)}const g=s.serializeStyle(f,"span");return g?l+' style="'+g+'"'+d:l+d}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,((s,a,i,l)=>a+' style="'+i+'"'+l)),t},aP=(e,t)=>{const n=tn(!1),o=tn(KA(e)?"text":"html"),r=(s=>{const a=tn(null);return{create:()=>((i,l)=>{const{dom:c,selection:d}=i,m=i.getBody();l.set(d.getRng());const f=c.add(i.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},ik);p.browser.isFirefox()&&c.setStyle(f,"left",c.getStyle(m,"direction",!0)==="rtl"?65535:-65535),c.bind(f,"beforedeactivate focusin focusout",(g=>{g.stopPropagation()})),f.focus(),d.select(f,!0)})(s,a),remove:()=>((i,l)=>{const c=i.dom;if(uh(i)){let d;const m=l.get();for(;d=uh(i);)c.remove(d),c.unbind(d);m&&i.selection.setRng(m)}l.set(null)})(s,a),getEl:()=>uh(s),getHtml:()=>(i=>{const l=i.dom,c=(g,h)=>{g.appendChild(h),l.remove(h,!0)},[d,...m]=Pe(i.getBody().childNodes,JB);K(m,(g=>{c(d,g)}));const f=l.select("div[id=mcepastebin]",d);for(let g=f.length-1;g>=0;g--){const h=l.create("div");d.insertBefore(h,f[g]),c(h,f[g])}return d?d.innerHTML:""})(s),getLastRng:a.get}})(e);(s=>{(p.browser.isChromium()||p.browser.isSafari())&&((a,i)=>{a.on("PastePreProcess",(l=>{l.content=i(a,l.content,l.internal)}))})(s,sP)})(e),((s,a)=>{s.addCommand("mceTogglePlainTextPaste",(()=>{((i,l)=>{l.get()==="text"?(l.set("html"),kb(i,!1)):(l.set("text"),kb(i,!0)),i.focus()})(s,a)})),s.addCommand("mceInsertClipboardContent",((i,l)=>{l.html&&Fu(s,l.html,l.internal,!1),l.text&&ph(s,l.text,!1)}))})(e,o),(s=>{const a=c=>d=>{c(s,d)},i=zA(s);ht(i)&&s.on("PastePreProcess",a(i));const l=UA(s);ht(l)&&s.on("PastePostProcess",a(l))})(e),e.addQueryStateHandler("mceTogglePlainTextPaste",(()=>o.get()==="text")),e.on("PreInit",(()=>{((s,a)=>{s.on("cut",((i,l)=>c=>{!c.isDefaultPrevented()&&yk(i)&&i.selection.isEditable()&&hk(c,vk(i),bk(i),(()=>{if(p.browser.isChromium()||p.browser.isFirefox()){const d=i.selection.getRng();Po.setEditorTimeout(i,(()=>{i.selection.setRng(d),Fg(i,l)}),0)}else Fg(i,l)}))})(s,a)),s.on("copy",(i=>l=>{!l.isDefaultPrevented()&&yk(i)&&hk(l,vk(i),bk(i),Ee)})(s))})(e,t),((s,a)=>{jA(s)&&s.on("dragend dragover draggesture dragdrop drop drag",(i=>{i.preventDefault(),i.stopPropagation()})),yd(s)||s.on("drop",(i=>{const l=i.dataTransfer;l&&(c=>yt(c.files,(d=>/^image\//.test(d.type))))(l)&&i.preventDefault()})),s.on("drop",(i=>{if(i.isDefaultPrevented())return;const l=Ck(s,i);if(kt(l))return;const c=fk(i.dataTransfer),d=Ls(c,Iu());if((!pk(c)||(b=>{const v=b["text/plain"];return!!v&&v.indexOf("file://")===0})(c))&&gk(s,i,l))return;const m=c[Iu()],f=m||c["text/html"]||c["text/plain"],g=((b,v,y,E)=>{const N=b.getParent(y,(D=>ua(v,D)));if(!Ye(b.getParent(y,"summary")))return!0;if(N&&Me(E,"text/html")){const D=new DOMParser().parseFromString(E["text/html"],"text/html").body;return!Ye(D.querySelector(N.nodeName.toLowerCase()))}return!1})(s.dom,s.schema,l.startContainer,c),h=a.get();h&&!g||f&&(i.preventDefault(),Po.setEditorTimeout(s,(()=>{s.undoManager.transact((()=>{(m||h&&g)&&s.execCommand("Delete"),xk(s,l);const b=dk(f);c["text/html"]?Fu(s,b,d,!0):ph(s,b,!0)}))})))})),s.on("dragstart",(i=>{a.set(!0)})),s.on("dragover dragend",(i=>{yd(s)&&!a.get()&&(i.preventDefault(),xk(s,Ck(s,i))),i.type==="dragend"&&a.set(!1)})),(i=>{i.on("input",(l=>{const c=d=>Ye(d.querySelector("summary"));if(l.inputType==="deleteByDrag"){const d=Pe(i.dom.select("details"),c);K(d,(m=>{Ht(m.firstChild)&&m.firstChild.remove();const f=i.dom.create("summary");f.appendChild(ui().dom),m.prepend(f)}))}}))})(s)})(e,n),oP(e,r,o)}))},iP=Ht,Sk=re,lP=e=>Pt(e.dom),Ek=e=>t=>pe(S.fromDom(e),t),kk=(e,t)=>Nr(S.fromDom(e),lP,Ek(t)),_k=(e,t,n)=>{const o=new ln(e,t),r=n?o.next.bind(o):o.prev.bind(o);let s=e;for(let a=n?e:r();a&&!iP(a);a=r())lr(a)&&(s=a);return s},cP=e=>{const t=((n,o,r)=>{const s=G.fromRangeStart(n).getNode(),a=((d,m,f)=>Nr(S.fromDom(d),(g=>(h=>Xo(h.dom))(g)||f.isBlock(Le(g))),Ek(m)).getOr(S.fromDom(m)).dom)(s,o,r),i=_k(s,a,!1),l=_k(s,a,!0),c=document.createRange();return kk(i,a).fold((()=>{Sk(i)?c.setStart(i,0):c.setStartBefore(i)}),(d=>c.setStartBefore(d.dom))),kk(l,a).fold((()=>{Sk(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)}),(d=>c.setEndAfter(d.dom))),c})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Xd(t))};var Wi;(function(e){e.Before="before",e.After="after"})(Wi||(Wi={}));const dP=(e,t)=>Math.abs(e.left-t),uP=(e,t)=>Math.abs(e.right-t),mP=(e,t)=>(n=>Qt(n,((o,r)=>o.fold((()=>_.some(r)),(s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),c=Math.max(r.bottom,s.bottom);return _.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}))),_.none()))(Pe(e,(n=>{return(o=t)>=(r=n).top&&o<=r.bottom;var o,r}))).fold((()=>[[],e]),(n=>{const{pass:o,fail:r}=Zo(e,(s=>((a,i)=>{const l=((c,d)=>Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top)))(a,i)/Math.min(a.height,i.height);return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(a,i)&&l>.5})(s,n)));return[o,r]})),fP=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),hh=(e,t,n,o)=>{const r=d=>lr(d.node)?_.some(d):xe(d.node)?hh(xn(d.node.childNodes),t,n,!1):_.none(),s=(d,m)=>{const f=Wr(d,((g,h)=>m(g,t,n)-m(h,t,n)));return $n(f,r).map((g=>o&&!re(g.node)&&f.length>1?((h,b,v)=>r(b).filter((y=>Math.abs(v(h,t,n)-v(y,t,n))<2&&re(y.node))))(g,f[1],m).getOr(g):g))},[a,i]=mP(Kw(e),n),{pass:l,fail:c}=Zo(i,(d=>d.top<n));return s(a,fP).orThunk((()=>s(c,K0))).orThunk((()=>s(l,K0)))},Nk=(e,t,n)=>((o,r,s)=>{const a=S.fromDom(o),i=_n(a),l=S.fromPoint(i,r,s).filter((c=>Ze(a,c))).getOr(a);return((c,d,m,f)=>{const g=(h,b)=>{const v=Pe(h.dom.childNodes,$o((y=>xe(y)&&y.classList.contains("mce-drag-container"))));return b.fold((()=>hh(v,m,f,!0)),(y=>{const E=Pe(v,(N=>N!==y.dom));return hh(E,m,f,!0)})).orThunk((()=>(pe(h,c)?_.none():Nn(h)).bind((y=>g(y,_.some(h))))))};return g(d,_.none())})(a,l,r,s)})(e,t,n).filter((o=>Ll(o.node))).map((o=>((r,s)=>({node:r.node,position:dP(r,s)<uP(r,s)?Wi.Before:Wi.After}))(o,t))),Ak=e=>{var t,n;const o=e.getBoundingClientRect(),r=e.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+((t=a?.scrollY)!==null&&t!==void 0?t:0)-s.clientTop,left:o.left+((n=a?.scrollX)!==null&&n!==void 0?n:0)-s.clientLeft}},Tk=e=>({target:e,srcElement:e}),pP=(e,t,n,o)=>{const r=((s,a)=>{const i=(l=>{const c=Vg(),d=(m=>{const f=m;return _.from(f[qg])})(l);return Wg(l),$S(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(m=>{const f=m;return _.from(f[HS])})(l).each((m=>c.setDragImage(m.image,m.x,m.y))),K(l.types,(m=>{m!=="Files"&&c.setData(m,l.getData(m))})),K(l.files,(m=>c.items.add(m))),(m=>{const f=m;return _.from(f[$g])})(l).each((m=>{((f,g)=>{Eu(g)(f)})(c,m)})),d.each((m=>{qS(l,m),qS(c,m)})),c})(s);return a==="dragstart"?($S(i),WS(i)):a==="drop"?(nB(i),Wg(i)):(oB(i),sB(i)),i})(n,e);return jt(o)?((s,a,i)=>{const l=po("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:Ee,stopImmediatePropagation:Ee,stopPropagation:Ee,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...Tk(a)}})(e,t,r):((s,a,i,l)=>({...a,dataTransfer:l,type:s,...Tk(i)}))(e,o,t,r)},Dk=Pt,gP=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(Dk,Xo),hP=(e,t,n,o)=>{const r=e.dom,s=t.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},ju=(e,t)=>n=>()=>{const o=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:o+t,behavior:"smooth"})},Rk=ju("left",-32),Ok=ju("left",32),Bk=ju("top",-32),Pk=ju("top",32),Lk=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},yc=(e,t,n,o,r)=>{t==="dragstart"&&XS(o,e.dom.getOuterHTML(n));const s=pP(t,n,o,r);return e.dispatch(t,s)},bP=(e,t)=>{const n=Xs(((r,s)=>((a,i,l)=>{a._selectionOverrides.hideFakeCaret(),Nk(a.getBody(),i,l).fold((()=>a.selection.placeCaretAt(i,l)),(c=>{const d=a._selectionOverrides.showCaret(1,c.node,c.position===Wi.Before,!1);d?a.selection.setRng(d):a.selection.placeCaretAt(i,l)}))})(t,r,s)),0);t.on("remove",n.cancel);const o=e;return r=>e.on((s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){const c=yc(t,"dragstart",s.element,s.dataTransfer,r);if(te(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,t.focus()}if(s.dragging){const c=r.currentTarget===t.getDoc().documentElement,d=((m,f)=>({pageX:f.pageX-m.relX,pageY:f.pageY+5}))(s,((m,f)=>{return g=(v=>v.inline?Ak(v.getBody()):{left:0,top:0})(m),h=(v=>{const y=v.getBody();return v.inline?{left:y.scrollLeft,top:y.scrollTop}:{left:0,top:0}})(m),b=((v,y)=>{if(y.target.ownerDocument!==v.getDoc()){const E=Ak(v.getContentAreaContainer()),N=(D=>{const A=D.getBody(),R=D.getDoc().documentElement,P={left:A.scrollLeft,top:A.scrollTop},L={left:A.scrollLeft||R.scrollLeft,top:A.scrollTop||R.scrollTop};return D.inline?P:L})(v);return{left:y.pageX-E.left+N.left,top:y.pageY-E.top+N.top}}return{left:y.pageX,top:y.pageY}})(m,f),{pageX:b.left-g.left+h.left,pageY:b.top-g.top+h.top};var g,h,b})(t,r));i=s.ghost,l=t.getBody(),i.parentNode!==l&&l.appendChild(i),((m,f,g,h,b,v,y,E,N,D,A,R)=>{let P=0,L=0;m.style.left=f.pageX+"px",m.style.top=f.pageY+"px",f.pageX+g>b&&(P=f.pageX+g-b),f.pageY+h>v&&(L=f.pageY+h-v),m.style.width=g-P+"px",m.style.height=h-L+"px";const j=N.clientHeight,W=N.clientWidth,B=y+N.getBoundingClientRect().top,I=E+N.getBoundingClientRect().left;A.on((H=>{H.intervalId.clear(),H.dragging&&R&&(y+8>=j?H.intervalId.set(Pk(D)):y-8<=0?H.intervalId.set(Bk(D)):E+8>=W?H.intervalId.set(Ok(D)):E-8<=0?H.intervalId.set(Rk(D)):B+16>=window.innerHeight?H.intervalId.set(Pk(window)):B-16<=0?H.intervalId.set(Bk(window)):I+16>=window.innerWidth?H.intervalId.set(Ok(window)):I-16<=0&&H.intervalId.set(Rk(window)))}))})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,t.getContentAreaContainer(),t.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var i,l}))},Mk=(e,t,n)=>{e.on((o=>{o.intervalId.clear(),o.dragging&&n.fold((()=>yc(t,"dragend",o.element,o.dataTransfer)),(r=>yc(t,"dragend",o.element,o.dataTransfer,r)))})),Ik(e)},Ik=e=>{e.on((t=>{t.intervalId.clear(),Lk(t.ghost)})),e.clear()},vP=e=>{const t=qo(),n=St.DOM,o=document,r=((l,c)=>d=>{if((m=>m.button===0)(d)){const m=$t(c.dom.getParents(d.target),gP).getOr(null);if(te(m)&&((f,g,h)=>Dk(h)&&h!==g&&f.isEditable(h.parentElement))(c.dom,c.getBody(),m)){const f=c.dom.getPos(m),g=c.getBody(),h=c.getDoc().documentElement;l.set({element:m,dataTransfer:Vg(),dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?g.scrollWidth:h.offsetWidth)-2,maxY:(c.inline?g.scrollHeight:h.offsetHeight)-2,relX:d.pageX-f.x,relY:d.pageY-f.y,width:m.offsetWidth,height:m.offsetHeight,ghost:hP(c,m,m.offsetWidth,m.offsetHeight),intervalId:Va(100)})}}})(t,e),s=bP(t,e),a=((l,c)=>d=>{l.on((m=>{var f;if(m.intervalId.clear(),m.dragging){if(((g,h,b)=>!kt(h)&&h!==b&&!g.dom.isChildOf(h,b)&&g.dom.isEditable(h))(c,(g=>{const h=g.getSel();if(te(h)){const b=h.getRangeAt(0).startContainer;return re(b)?b.parentNode:b}return null})(c.selection),m.element)){const g=(f=c.getDoc().elementFromPoint(d.clientX,d.clientY))!==null&&f!==void 0?f:c.getBody();yc(c,"drop",g,m.dataTransfer,d).isDefaultPrevented()||c.undoManager.transact((()=>{((h,b)=>{const v=h.getParent(b.parentNode,h.isBlock);Lk(b),v&&v!==h.getRoot()&&h.isEmpty(v)&&ws(S.fromDom(v))})(c.dom,m.element),(h=>{const b=h.getData("text/html");return b===""?_.none():_.some(b)})(m.dataTransfer).each((h=>c.insertContent(h))),c._selectionOverrides.hideFakeCaret()}))}yc(c,"dragend",c.getBody(),m.dataTransfer,d)}})),Ik(l)})(t,e),i=((l,c)=>d=>Mk(l,c,_.some(d)))(t,e);e.on("mousedown",r),e.on("mousemove",s),e.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),e.on("remove",(()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)})),e.on("keydown",(l=>{l.keyCode===me.ESC&&Mk(t,e,_.none())}))},Cc=Pt,Fk=(e,t)=>_a(e.getBody(),t),yP=e=>{const t=e.selection,n=e.dom,o=e.getBody(),r=bT(e,o,n.isBlock,(()=>_i(e))),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=v=>v!==o&&(Cc(v)||sr(v))&&n.isChildOf(v,o)&&n.isEditable(v.parentNode),c=(v,y,E,N=!0)=>e.dispatch("ShowCaret",{target:y,direction:v,before:E}).isDefaultPrevented()?null:(N&&t.scrollIntoView(y,v===-1),r.show(E,y)),d=v=>To(v)||md(v)||fd(v),m=v=>d(v.startContainer)||d(v.endContainer),f=v=>{const y=e.schema.getVoidElements(),E=n.createRng(),N=v.startContainer,D=v.startOffset,A=v.endContainer,R=v.endOffset;return Me(y,N.nodeName.toLowerCase())?D===0?E.setStartBefore(N):E.setStartAfter(N):E.setStart(N,D),Me(y,A.nodeName.toLowerCase())?R===0?E.setEndBefore(A):E.setEndAfter(A):E.setEnd(A,R),E},g=(v,y)=>{if(!v)return null;if(v.collapsed){if(!m(v)){const A=y?1:-1,R=jl(A,o,v),P=R.getNode(!y);if(te(P)){if(Ll(P))return c(A,P,!!y&&!R.isAtEnd(),!1);if(Ss(P)&&Pt(P.nextSibling)){const j=n.createRng();return j.setStart(P,0),j.setEnd(P,0),j}}const L=R.getNode(y);if(te(L)){if(Ll(L))return c(A,L,!y&&!R.isAtEnd(),!1);if(Ss(L)&&Pt(L.previousSibling)){const j=n.createRng();return j.setStart(L,1),j.setEnd(L,1),j}}}return null}let E=v.startContainer,N=v.startOffset;const D=v.endOffset;if(re(E)&&N===0&&Cc(E.parentNode)&&(E=E.parentNode,N=n.nodeIndex(E),E=E.parentNode),!xe(E))return null;if(D===N+1&&E===v.endContainer){const A=E.childNodes[N];if(l(A))return(R=>{const P=R.cloneNode(!0),L=e.dispatch("ObjectSelected",{target:R,targetClone:P});if(L.isDefaultPrevented())return null;const j=((B,I)=>{const H=S.fromDom(e.getBody()),J=e.getDoc(),oe=Qc(H,"#"+s).getOrThunk((()=>{const Oe=S.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',J);return Te(Oe,"id",s),X(H,Oe),Oe})),le=n.createRng();en(oe),Re(oe,[S.fromText(Ft,J),S.fromDom(I),S.fromText(Ft,J)]),le.setStart(oe.dom.firstChild,1),le.setEnd(oe.dom.lastChild,0),Kc(oe,{top:n.getPos(B,e.getBody()).y+"px"}),hs(oe);const _e=t.getSel();return _e&&(_e.removeAllRanges(),_e.addRange(le)),le})(R,L.targetClone),W=S.fromDom(R);return K(Tn(S.fromDom(e.getBody()),`*[${a}]`),(B=>{pe(W,B)||ot(B,a)})),n.getAttrib(R,a)||R.setAttribute(a,"1"),i=R,b(),j})(A)}return null},h=()=>{i&&i.removeAttribute(a),Qc(S.fromDom(e.getBody()),"#"+s).each(ct),i=null},b=()=>{r.hide()};return Lr(e)||(e.on("click",(v=>{n.isEditable(v.target)||(v.preventDefault(),e.focus())})),e.on("blur NewBlock",h),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",(v=>{const y=v.target,E=Fk(e,y);Cc(E)?(v.preventDefault(),lc(e,E).each(g)):l(y)&&lc(e,y).each(g)}),!0),e.on("mousedown",(v=>{const y=v.target;if(y!==o&&y.nodeName!=="HTML"&&!n.isChildOf(y,o)||!((N,D,A)=>{const R=S.fromDom(N.getBody()),P=N.inline?R:S.fromDom(_n(R).dom.documentElement),L=((j,W,B,I)=>{const H=(J=>J.dom.getBoundingClientRect())(W);return{x:B-(j?H.left+W.dom.clientLeft+FR(W):0),y:I-(j?H.top+W.dom.clientTop+IR(W):0)}})(N.inline,P,D,A);return((j,W,B)=>{const I=LR(j),H=MR(j);return W>=0&&B>=0&&W<=I&&B<=H})(P,L.x,L.y)})(e,v.clientX,v.clientY))return;h(),b();const E=Fk(e,y);Cc(E)?(v.preventDefault(),lc(e,E).each(g)):Nk(o,v.clientX,v.clientY).each((N=>{var D;v.preventDefault(),(D=c(1,N.node,N.position===Wi.Before,!1))&&t.setRng(D),or(E)?E.focus():e.getBody().focus()}))})),e.on("keypress",(v=>{me.modifierPressed(v)||Cc(t.getNode())&&v.preventDefault()})),e.on("GetSelectionRange",(v=>{let y=v.range;if(i){if(!i.parentNode)return void(i=null);y=y.cloneRange(),y.selectNode(i),v.range=y}})),e.on("focusin",(v=>{if(e.selection.isCollapsed()&&!sr(v.target)&&e.getBody().contains(v.target)&&v.target!==e.getBody()&&!e.dom.isEditable(v.target.parentNode)){r.isShowing()&&r.hide(),v.target.contains(e.selection.getNode())||(e.selection.select(v.target,!0),e.selection.collapse(!0));const y=g(e.selection.getRng(),!0);y&&e.selection.setRng(y)}})),e.on("SetSelectionRange",(v=>{v.range=f(v.range);const y=g(v.range,v.forward);y&&(v.range=y)})),e.on("AfterSetSelectionRange",(v=>{const y=v.range,E=y.startContainer.parentElement;var N;m(y)||xe(N=E)&&N.id==="mcepastebin"||b(),(D=>te(D)&&n.hasClass(D,"mce-offscreen-selection"))(E)||h()})),(v=>{vP(v),DA(v)&&(y=>{const E=A=>{if(!A.isDefaultPrevented()){const R=A.dataTransfer;R&&(Se(R.types,"Files")||R.files.length>0)&&(A.preventDefault(),A.type==="drop"&&au(y,"Dropped file type is not supported"))}},N=A=>{Od(y,A.target)&&E(A)},D=()=>{const A=St.DOM,R=y.dom,P=document,L=y.inline?y.getBody():y.getDoc(),j=["drop","dragover"];K(j,(W=>{A.bind(P,W,N),R.bind(L,W,E)})),y.on("remove",(()=>{K(j,(W=>{A.unbind(P,W,N),R.unbind(L,W,E)}))}))};y.on("init",(()=>{Po.setEditorTimeout(y,D,0)}))})(v)})(e),(v=>{const y=Xs((()=>{if(!v.removed&&v.getBody().contains(document.activeElement)){const E=v.selection.getRng();if(E.collapsed){const N=vg(v,E,!1);v.selection.setRng(N)}}}),0);v.on("focus",(()=>{y.throttle()})),v.on("blur",(()=>{y.cancel()}))})(e),(v=>{v.on("init",(()=>{v.on("focusin",(y=>{const E=y.target;if(sr(E)){const N=_a(v.getBody(),E),D=Pt(N)?N:E;v.selection.getNode()!==D&&lc(v,D).each((A=>v.selection.setRng(A)))}}))}))})(e)),{showCaret:c,showBlockCaretContainer:v=>{v.hasAttribute("data-mce-caret")&&($m(v),t.scrollIntoView(v))},hideFakeCaret:b,destroy:()=>{r.destroy(),i=null}}},CP=(e,t)=>{let n=t;for(let o=e.previousSibling;re(o);o=o.previousSibling)n+=o.data.length;return n},jk=(e,t,n,o,r)=>{if(re(n)&&(o<0||o>n.data.length))return[];const s=r&&re(n)?[CP(n,o)]:[o];let a=n;for(;a!==t&&a.parentNode;)s.push(e.nodeIndex(a,r)),a=a.parentNode;return a===t?s.reverse():[]},bh=(e,t,n,o,r,s,a=!1)=>({start:jk(e,t,n,o,a),end:jk(e,t,r,s,a)}),zk=(e,t)=>{const n=t.slice(),o=n.pop();return x(o)?Qt(n,((r,s)=>r.bind((a=>_.from(a.childNodes[s])))),_.some(e)).bind((r=>re(r)&&(o<0||o>r.data.length)?_.none():_.some({node:r,offset:o}))):_.none()},Uk=(e,t)=>zk(e,t.start).bind((({node:n,offset:o})=>zk(e,t.end).map((({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})))),Vi=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const o=t.parentNode;e.remove(t,re(t.firstChild)&&ai(t.firstChild.data)),Vi(e,o,n)}},zu=(e,t,n,o=!0)=>{const r=t.startContainer.parentNode,s=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(re(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),re(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Vi(e,r,n),r!==s&&Vi(e,s,n))},Uu=(e,t)=>_.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),vh=(e,t,n)=>{const o=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:bb(o).concat(e.blockPatterns),inlinePatterns:vb(o).concat(e.inlinePatterns)}},yh=(e,t,n,o)=>{const r=e.createRng();return r.setStart(t,0),r.setEnd(n,o),r.toString()},Hk=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Hu=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},$k=(e,t,n)=>{const o=Uk(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=o.endOffset===0?s:s.splitText(o.endOffset),i=o.startOffset===0?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:t,end:a.parentNode.insertBefore(Hk(e,t+"-end"),a),start:l.insertBefore(Hk(e,t+"-start"),i)}},qk=(e,t,n)=>{Vi(e,e.get(t.prefix+"-end"),n),Vi(e,e.get(t.prefix+"-start"),n)},Ch=e=>e.start.length===0,Wk=(e,t,n,o)=>{const r=t.start;var s;return Gg(e,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),d=l.lastIndexOf(s);return d!==-1?d+s.length:c!==-1?c+1:-1}),n).bind((a=>{var i,l;const c=(l=(i=n.textContent)===null||i===void 0?void 0:i.indexOf(r))!==null&&l!==void 0?l:-1;if(c!==-1&&a.offset>=c+r.length){const d=e.createRng();return d.setStart(a.container,a.offset-r.length),d.setEnd(a.container,a.offset),_.some(d)}{const d=a.offset-r.length;return Yg(a.container,d,n).map((m=>{const f=e.createRng();return f.setStart(m.container,m.offset),f.setEnd(a.container,a.offset),f})).filter((m=>m.toString()===r)).orThunk((()=>Wk(e,t,n,ur(a.container,0))))}}))},xP=(e,t,n,o)=>{const r=e.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Yg(i,l-n.pattern.end.length,t).bind((c=>{const d=bh(r,s,c.container,c.offset,i,l,o);if(Ch(a))return _.some({matches:[{pattern:a,startRng:d,endRng:d}],position:c});{const m=$u(e,n.remainingPatterns,c.container,c.offset,t,o),f=m.getOr({matches:[],position:c}),g=f.position;return((b,v,y,E,N,D=!1)=>{if(v.start.length===0&&!D){const A=b.createRng();return A.setStart(y,E),A.setEnd(y,E),_.some(A)}return Xg(y,E,N).bind((A=>Wk(b,v,N,A).bind((R=>{var P;return D&&(R.endContainer===A.container&&R.endOffset===A.offset||A.offset===0&&((P=R.endContainer.textContent)===null||P===void 0?void 0:P.length)===R.endOffset)?_.none():_.some(R)}))))})(r,a,g.container,g.offset,t,m.isNone()).map((b=>{const v=((y,E,N,D=!1)=>bh(y,E,N.startContainer,N.startOffset,N.endContainer,N.endOffset,D))(r,s,b,o);return{matches:f.matches.concat([{pattern:a,startRng:v,endRng:d}]),position:ur(b.startContainer,b.startOffset)}}))}}))},$u=(e,t,n,o,r,s)=>{const a=e.dom;return Xg(n,o,a.getRoot()).bind((i=>{const l=yh(a,r,n,o);for(let c=0;c<t.length;c++){const d=t[c];if(!Ka(l,d.end))continue;const m=t.slice();m.splice(c,1);const f=xP(e,r,{pattern:d,remainingPatterns:m,position:i},s);if(f.isNone()&&o>0)return $u(e,t,n,o-1,r,s);if(f.isSome())return f}return _.none()}))},Vk=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?K(t.format,(o=>{e.formatter.apply(o)})):e.execCommand(t.cmd,!1,t.value)},Kk=(e,t,n,o,r,s)=>{var a;return((i,l)=>{const c=no(i,(d=>yt(l,(m=>d.pattern.start===m.pattern.start&&d.pattern.end===m.pattern.end))));return i.length===l.length?c?i:l:i.length>l.length?i:l})($u(e,r.inlinePatterns,n,o,t,s).fold((()=>[]),(i=>i.matches)),$u(e,(a=r.inlinePatterns,Wr(a,((i,l)=>l.end.length-i.end.length))),n,o,t,s).fold((()=>[]),(i=>i.matches)))},Xk=(e,t)=>{if(t.length===0)return;const n=e.dom,o=e.selection.getBookmark(),r=((s,a)=>{const i=Ks("mce_textpattern"),l=qr(a,((c,d)=>{const m=$k(s,i+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:m}])}),[]);return qr(l,((c,d)=>{const m=l.length-c.length-1,f=Ch(d.pattern)?d.endMarker:$k(s,i+`_start${m}`,d.startRng);return c.concat([{...d,startMarker:f}])}),[])})(n,t);K(r,(s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;Ch(s.pattern)?((l,c,d,m)=>{const f=Hu(l.dom,d);zu(l.dom,f,m),Vk(l,c,f)})(e,s.pattern,s.endMarker,i):((l,c,d,m,f)=>{const g=l.dom,h=Hu(g,m),b=Hu(g,d);zu(g,b,f),zu(g,h,f);const v={prefix:d.prefix,start:d.end,end:m.start},y=Hu(g,v);Vk(l,c,y)})(e,s.pattern,s.startMarker,s.endMarker,i),qk(n,s.endMarker,i),qk(n,s.startMarker,i)})),e.selection.moveToBookmark(o)},Yk=(e,t,n)=>((o,r,s)=>{if(re(o)&&0>=o.length)return _.some(ur(o,0));{const a=ha(Nu);return _.from(a.forwards(o,0,Au(o),s)).map((i=>ur(i.container,0)))}})(t,0,t).map((o=>{const r=o.container;return oE(r,n.start.length,t).each((s=>{const a=e.createRng();a.setStart(r,0),a.setEnd(s.container,s.offset),zu(e,a,(i=>i===t))})),r})),Gk=e=>(t,n)=>{const o=t.dom,r=n.pattern,s=Uk(o.getRoot(),n.range).getOrDie("Unable to resolve path range");return Uu(t,s).each((a=>{r.type==="block-format"?((i,l)=>{const c=l.get(i);return se(c)&&sn(c).exists((d=>Me(d,"block")))})(r.format,t.formatter)&&t.undoManager.transact((()=>{e(t.dom,a,r),t.formatter.apply(r.format)})):r.type==="block-command"&&t.undoManager.transact((()=>{e(t.dom,a,r),t.execCommand(r.cmd,!1,r.value)}))})),!0},Qk=e=>(t,n)=>{const o=(s=>Wr(s,((a,i)=>i.start.length-a.start.length)))(t),r=n.replace(Ft," ");return $t(o,(s=>e(s,n,r)))},Jk=(e,t)=>(n,o,r,s,a)=>{var i;a===void 0&&(a=(i=o.textContent)!==null&&i!==void 0?i:"");const l=n.dom,c=Sn(n);return l.is(o,c)?e(r.blockPatterns,a).map((d=>t&&k.trim(a).length===d.start.length?[]:[{pattern:d,range:bh(l,l.getRoot(),o,0,o,0,s)}])).getOr([]):[]},wP=Gk(((e,t,n)=>{Yk(e,t,n).each((o=>{const r=S.fromDom(o),s=ni(r);/^\s[^\s]/.test(s)&&im(r,s.slice(1))}))})),SP=Qk(((e,t,n)=>t.indexOf(e.start)===0||n.indexOf(e.start)===0)),EP=Jk(SP,!0),kP=Gk(Yk),_P=Qk(((e,t,n)=>t===e.start||n===e.start)),NP=Jk(_P,!1),Zk=(e,t,n)=>{for(let o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},AP=e=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>{return a=GA(e).filter((l=>l.type!=="inline-command"&&l.type!=="block-command"||e.queryCommandSupported(l.cmd))),i=QA(e),{inlinePatterns:vb(a),blockPatterns:bb(a),dynamicPatternsLookup:i};var a,i},r=()=>(a=>a.options.isSet("text_patterns_lookup"))(e);e.on("keydown",(a=>{if(a.keyCode===13&&!me.modifierPressed(a)&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=Zm(o(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||r())&&((l,c)=>((d,m)=>{const f=d.selection.getRng();return Uu(d,f).map((g=>{var h;const b=Math.max(0,f.startOffset),v=vh(m,g,(h=g.textContent)!==null&&h!==void 0?h:"");return{inlineMatches:Kk(d,g,f.startContainer,b,v,!0),blockMatches:EP(d,g,v,!0)}})).filter((({inlineMatches:g,blockMatches:h})=>h.length>0||g.length>0))})(l,c).fold(_t,(({inlineMatches:d,blockMatches:m})=>(l.undoManager.add(),l.undoManager.extra((()=>{l.execCommand("mceInsertNewLine")}),(()=>{(h=>{h.insertContent(yn,{preserve_zwsp:!0})})(l),Xk(l,d),((h,b)=>{if(b.length===0)return;const v=h.selection.getBookmark();K(b,(y=>wP(h,y))),h.selection.moveToBookmark(v)})(l,m);const f=l.selection.getRng(),g=Xg(f.startContainer,f.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),g.each((h=>{const b=h.container;b.data.charAt(h.offset-1)===xr&&(b.deleteData(h.offset-1,1),Vi(l.dom,b.parentNode,(v=>v===l.dom.getRoot())))}))})),!0))))(e,i)&&a.preventDefault()}}),!0),e.on("keydown",(a=>{if(a.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=Zm(o(),"space");(i.blockPatterns.length>0||r())&&((l,c)=>((d,m)=>{const f=d.selection.getRng();return Uu(d,f).map((g=>{const h=Math.max(0,f.startOffset),b=yh(d.dom,g,f.startContainer,h),v=vh(m,g,b);return NP(d,g,v,!1,b)})).filter((g=>g.length>0))})(l,c).fold(_t,(d=>(l.undoManager.transact((()=>{((m,f)=>{K(f,(g=>kP(m,g)))})(l,d)})),!0))))(e,i)&&a.preventDefault()}}),!0);const s=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const a=Zm(o(),"space");(a.inlinePatterns.length>0||r())&&((i,l)=>{const c=i.selection.getRng();Uu(i,c).map((d=>{const m=Math.max(0,c.startOffset-1),f=yh(i.dom,d,c.startContainer,m),g=vh(l,d,f),h=Kk(i,d,c.startContainer,m,g,!1);h.length>0&&i.undoManager.transact((()=>{Xk(i,h)}))}))})(e,a)}};e.on("keyup",(a=>{Zk(n,a,((i,l)=>i===l.keyCode&&!me.modifierPressed(l)))&&s()})),e.on("keypress",(a=>{Zk(t,a,((i,l)=>i.charCodeAt(0)===l.charCode))&&Po.setEditorTimeout(e,s)}))},TP=e=>{const t=k.each,n=me.BACKSPACE,o=me.DELETE,r=e.dom,s=e.selection,a=e.parser,i=p.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),d=p.deviceType.isiPhone()||p.deviceType.isiPad(),m=p.os.isMacOS()||p.os.isiOS(),f=(B,I)=>{try{e.getDoc().execCommand(B,!1,String(I))}catch{}},g=B=>B.isDefaultPrevented(),h=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{e.inline||r.bind(e.getDoc(),"mousedown mouseup",(B=>{let I;if(B.target===e.getDoc().documentElement)if(I=s.getRng(),e.getBody().focus(),B.type==="mousedown"){if(To(I.startContainer))return;s.placeCaretAt(B.clientX,B.clientY)}else s.setRng(I)}))},v=()=>{Range.prototype.getClientRects||e.on("mousedown",(B=>{if(!g(B)&&B.target.nodeName==="HTML"){const I=e.getBody();I.blur(),Po.setEditorTimeout(e,(()=>{I.focus()}))}}))},y=()=>{const B=zb(e);e.on("click",(I=>{const H=I.target;/^(IMG|HR)$/.test(H.nodeName)&&r.isEditable(H)&&(I.preventDefault(),e.selection.select(H),e.nodeChanged()),H.nodeName==="A"&&r.hasClass(H,B)&&H.childNodes.length===0&&r.isEditable(H.parentNode)&&(I.preventDefault(),s.select(H))}))},E=()=>{e.on("keydown",(B=>{if(!g(B)&&B.keyCode===n&&s.isCollapsed()&&s.getRng().startOffset===0){const I=s.getNode().previousSibling;if(I&&I.nodeName&&I.nodeName.toLowerCase()==="table")return B.preventDefault(),!1}return!0}))},N=()=>{Fb(e)||e.on("BeforeExecCommand mousedown",(()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),Mb(e)||f("enableObjectResizing",!1)}))},D=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},A=()=>{e.inline||e.on("keydown",(()=>{document.activeElement===document.body&&e.getWin().focus()}))},R=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(B=>{let I;B.target.nodeName==="HTML"&&(I=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(I),e.selection.normalize(),e.nodeChanged())})))},P=()=>{m&&e.on("keydown",(B=>{!me.metaKeyPressed(B)||B.shiftKey||B.keyCode!==37&&B.keyCode!==39||(B.preventDefault(),e.selection.getSel().modify("move",B.keyCode===37?"backward":"forward","lineboundary"))}))},L=()=>{e.on("click",(B=>{let I=B.target;do if(I.tagName==="A")return void B.preventDefault();while(I=I.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},j=()=>{e.on("init",(()=>{e.dom.bind(e.getBody(),"submit",(B=>{B.preventDefault()}))}))},W=Ee;return Lr(e)?(c&&(b(),y(),j(),h(),d&&(A(),R(),L())),l&&(v(),N(),D(),P())):(e.on("keydown",(B=>{if(g(B)||B.keyCode!==me.BACKSPACE)return;let I=s.getRng();const H=I.startContainer,J=I.startOffset,oe=r.getRoot();let le=H;if(I.collapsed&&J===0){for(;le.parentNode&&le.parentNode.firstChild===le&&le.parentNode!==oe;)le=le.parentNode;le.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,le),I=r.createRng(),I.setStart(H,0),I.setEnd(H,0),s.setRng(I))}})),(()=>{const B=I=>{const H=r.create("body"),J=I.cloneContents();return H.appendChild(J),s.serializer.serialize(H,{format:"html"})};e.on("keydown",(I=>{const H=I.keyCode;if(!g(I)&&(H===o||H===n)&&e.selection.isEditable()){const J=e.selection.isCollapsed(),oe=e.getBody();if(J&&!Jr(e.schema,oe)||!J&&!(le=>{const _e=B(le),Oe=r.createRng();return Oe.selectNode(e.getBody()),_e===B(Oe)})(e.selection.getRng()))return;I.preventDefault(),e.setContent(""),oe.firstChild&&r.isBlock(oe.firstChild)?e.selection.setCursorLocation(oe.firstChild,0):e.selection.setCursorLocation(oe,0),e.nodeChanged()}}))})(),p.windowsPhone||e.on("keyup focusin mouseup",(B=>{me.modifierPressed(B)||(I=>{const H=I.getBody(),J=I.selection.getRng();return J.startContainer===J.endContainer&&J.startContainer===H&&J.startOffset===0&&J.endOffset===H.childNodes.length})(e)||s.normalize()}),!0),c&&(b(),y(),e.on("init",(()=>{f("DefaultParagraphSeparator",Sn(e))})),j(),E(),a.addNodeFilter("br",(B=>{let I=B.length;for(;I--;)B[I].attr("class")==="Apple-interchange-newline"&&B[I].remove()})),d?(A(),R(),L()):h()),l&&((()=>{const B=wn("figcaption");e.on("keydown",(I=>{if(I.keyCode===me.LEFT||I.keyCode===me.RIGHT){const H=S.fromDom(e.selection.getNode());B(H)&&e.selection.isCollapsed()&&bn(H).bind((J=>{var oe;return e.selection.getRng().startOffset===0&&I.keyCode===me.LEFT?Xt(J):e.selection.getRng().endOffset===((oe=H.dom.textContent)===null||oe===void 0?void 0:oe.length)&&I.keyCode===me.RIGHT?Gn(J):_.none()})).each((J=>{e.selection.setCursorLocation(J.dom,0)}))}}))})(),e.on("mousedown",(B=>{Wt(_.from(B.clientX),_.from(B.clientY),((I,H)=>{const J=e.getDoc().caretPositionFromPoint(I,H),oe=J?.offsetNode.childNodes[J.offset-(J.offset>0?1:0)]||J?.offsetNode;if(oe&&(le=oe).nodeName==="IMG"&&e.dom.isEditable(le)){const _e=oe.getBoundingClientRect();B.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(oe),B.clientX<_e.left||B.clientY<_e.top?e.selection.collapse(!0):(B.clientX>_e.right||B.clientY>_e.bottom)&&e.selection.collapse(!1)}var le}))})),e.on("keydown",(B=>{if(!g(B)&&B.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&s.getRng().startOffset===0){const I=s.getNode(),H=I.previousSibling;if(I.nodeName==="HR")return r.remove(I),void B.preventDefault();H&&H.nodeName&&H.nodeName.toLowerCase()==="hr"&&(r.remove(H),B.preventDefault())}}})),v(),(()=>{const B=()=>{const H=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const J=s.getStart();J!==e.getBody()&&(r.setAttrib(J,"style",null),t(H,(oe=>{J.setAttributeNode(oe.cloneNode(!0))})))}},I=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);e.on("keypress",(H=>{let J;return!(!(g(H)||H.keyCode!==8&&H.keyCode!==46)&&I()&&(J=B(),e.getDoc().execCommand("delete",!1),J(),H.preventDefault(),1))})),r.bind(e.getDoc(),"cut",(H=>{if(!g(H)&&I()){const J=B();Po.setEditorTimeout(e,(()=>{J()}))}}))})(),N(),e.on("SetContent ExecCommand",(B=>{B.type!=="setcontent"&&B.command!=="mceInsertLink"||t(r.select("a:not([data-mce-block])"),(I=>{var H;let J=I.parentNode;const oe=r.getRoot();if(J?.lastChild===I){for(;J&&!r.isBlock(J);){if(((H=J.parentNode)===null||H===void 0?void 0:H.lastChild)!==J||J===oe)return;J=J.parentNode}r.add(J,"br",{"data-mce-bogus":1})}}))})),D(),P(),E())),{refreshContentEditable:W,isHidden:()=>{if(!l||e.removed)return!1;const B=e.selection.getSel();return!B||!B.rangeCount||B.rangeCount===0}}},xh=St.DOM,DP=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,wh=e=>er(e,(t=>jt(t)===!1)),e_=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return wh({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_html_in_comments:t("allow_html_in_comments"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),extended_mathml_attributes:t("extended_mathml_attributes"),extended_mathml_elements:t("extended_mathml_elements"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:DP(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:af(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},t_=e=>{const t=e.options.get;return wh({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},Sh=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,n_=e=>{const t=Sh(e),n=Lb(e),o=e.contentCSS,r=()=>{t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},s=()=>{e.removed?r():e.on("remove",r)};if(e.contentStyles.length>0){let l="";k.each(e.contentStyles,(c=>{l+=c+`\r
`})),e.dom.addStyle(l)}const a=Promise.all(((l,c,d)=>{const{pass:m,fail:f}=Zo(c,(b=>tinymce.Resource.has(Jp(b)))),g=m.map((b=>{const v=tinymce.Resource.get(Jp(b));return we(v)?Promise.resolve(Sh(l).loadRawCss(b,v)):Promise.resolve()})),h=[...g,Sh(l).loadAll(f)];return l.inline?h:h.concat([l.ui.styleSheetLoader.loadAll(d)])})(e,o,n)).then(s).catch(s),i=cA(e);return i&&((l,c)=>{const d=S.fromDom(l.getBody()),m=na(Qn(d)),f=S.fromTag("style");Te(f,"type","text/css"),X(f,S.fromText(c)),X(m,f),l.on("remove",(()=>{ct(f)}))})(e,i),a},Eh=e=>{e.removed!==!0&&((t=>{Lr(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})})(e),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(o=>{o.dispatch("Init")})(t),t.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||Nd(o)&&o.selection.getStart(!0)!==r||zn(r).each((s=>{const a=s.getNode(),i=Ar(a)?zn(a).getOr(s):s;o.selection.setRng(i.toRange())}))})(t),t.nodeChanged({initial:!0});const n=PA(t);ht(n)&&n.call(t,t),(o=>{const r=MA(o);r&&Po.setEditorTimeout(o,(()=>{let s;s=r===!0?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())}),100)})(t),ts(t)&&Tx(t,!0)})(e))},o_=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(xh.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const o=e.getBody();o.disabled=!0,e.readonly=Fb(e),e._editableRoot=AA(e),!Cd(e)&&e.hasEditableRoot()&&(e.inline&&xh.getStyle(o,"position",!0)==="static"&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=VR(e),e.schema=Cs(t_(e)),e.dom=St(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:sA(e),referrerPolicy:nf(e),crossOrigin:of(e),onSetAttrib:a=>{e.dispatch("SetAttrib",a)}}),e.parser=(a=>{const i=Ti(e_(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",((l,c)=>{const d=a.dom,m="data-mce-"+c;let f=l.length;for(;f--;){const g=l[f];let h=g.attr(c);if(h&&!g.attr(m)){if(h.indexOf("data:")===0||h.indexOf("blob:")===0)continue;c==="style"?(h=d.serializeStyle(d.parseStyle(h),g.name),h.length||(h=null),g.attr(m,h),g.attr(c,h)):c==="tabindex"?(g.attr(m,h),g.attr(c,null)):g.attr(m,a.convertURL(h,c,g.name))}}})),i.addNodeFilter("script",(l=>{let c=l.length;for(;c--;){const d=l[c],m=d.attr("type")||"no/type";m.indexOf("mce-")!==0&&d.attr("type","mce-"+m)}})),eT(a)&&i.addNodeFilter("#cdata",(l=>{var c;let d=l.length;for(;d--;){const m=l[d];m.type=8,m.name="#comment",m.value="[CDATA["+a.dom.encode((c=m.value)!==null&&c!==void 0?c:"")+"]]"}})),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(l=>{let c=l.length;const d=a.schema.getNonEmptyElements();for(;c--;){const m=l[c];m.isEmpty(d)&&m.getAll("br").length===0&&m.append(new Rn("br",1))}})),i})(e),e.serializer=gx((a=>{const i=a.options.get;return{...e_(a),...t_(a),...wh({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(e),e),e.selection=px(e.dom,e.getWin(),e.serializer,e),e.annotator=zv(e),e.formatter=Ix(e),e.undoManager=jx(e),e._nodeChangeDispatcher=new GB(e),e._selectionOverrides=yP(e),YB(e),(a=>{const i=qo(),l=tn(!1),c=ro((d=>{a.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)}),400);a.on("touchstart",(d=>{yS(d).each((m=>{c.cancel();const f={x:m.clientX,y:m.clientY,target:d.target};c.throttle(d),l.set(!1),i.set(f)}))}),!0),a.on("touchmove",(d=>{c.cancel(),yS(d).each((m=>{i.on((f=>{((g,h)=>{const b=Math.abs(g.clientX-h.x),v=Math.abs(g.clientY-h.y);return b>5||v>5})(m,f)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))}))}))}),!0),a.on("touchend touchcancel",(d=>{c.cancel(),d.type!=="touchcancel"&&i.get().filter((m=>m.target.isEqualNode(d.target))).each((()=>{l.get()?d.preventDefault():a.dispatch("tap",{...d,type:"tap"})}))}),!0)})(e),(a=>{(i=>{i.on("click",(l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}))})(a),(i=>{i.parser.addNodeFilter("details",(l=>{const c=rT(i);K(l,(d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)}))})),i.serializer.addNodeFilter("details",(l=>{const c=sT(i);K(l,(d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)}))}))})(a)})(e),(a=>{const i="contenteditable",l=" "+k.trim(JA(a))+" ",c=" "+k.trim(Hb(a))+" ",d=xS(l),m=xS(c),f=ZA(a);f.length>0&&a.on("BeforeSetContent",(g=>{((h,b,v)=>{let y=b.length,E=v.content;if(v.format!=="raw"){for(;y--;)E=E.replace(b[y],YO(h,E,Hb(h)));v.content=E}})(a,f,g)})),a.parser.addAttributeFilter("class",(g=>{let h=g.length;for(;h--;){const b=g[h];d(b)?b.attr(i,"true"):m(b)&&b.attr(i,"false")}})),a.serializer.addAttributeFilter(i,(g=>{let h=g.length;for(;h--;){const b=g[h];if(!d(b)&&!m(b))continue;const v=b.attr("data-mce-content");f.length>0&&v?GO(f,v)?(b.name="#text",b.type=3,b.raw=!0,b.value=v):b.remove():b.attr(i,null)}}))})(e),Lr(e)||((a=>{a.on("mousedown",(i=>{i.detail>=3&&(i.preventDefault(),cP(a))}))})(e),(a=>{AP(a)})(e));const r=KB(e);((a,i)=>{a.addCommand("delete",(()=>{Fg(a,i)})),a.addCommand("forwardDelete",(()=>{((l,c)=>{vS(l,c,!0).fold((()=>{l.selection.isEditable()&&nC(l)}),Xn),fg(l)&&ng(l.dom,l.getBody())})(a,i)}))})(e,r),(a=>{a.on("NodeChange",(()=>(i=>{const l=i.dom,c=i.selection,d=i.schema,m=d.getBlockElements(),f=c.getStart(),g=i.getBody();let h,b,v=null;const y=Sn(i);if(!f||!xe(f))return;const E=g.nodeName.toLowerCase();if(!d.isValidChild(E,y.toLowerCase())||((D,A,R)=>yt(Oy(S.fromDom(R),S.fromDom(A)),(P=>jg(D,P.dom))))(m,g,f))return;if(g.firstChild===g.lastChild&&Ht(g.firstChild))return h=zg(i),h.appendChild(ui().dom),g.replaceChild(h,g.firstChild),i.selection.setCursorLocation(h,0),void i.nodeChanged();let N=g.firstChild;for(;N;)if(xe(N)&&cN(d,N),KO(d,N)){if(XO(m,N)){b=N,N=N.nextSibling,l.remove(b);continue}if(!h){if(!v&&i.hasFocus()&&(v=kw(i.selection.getRng(),(()=>document.createElement("span")))),!N.parentNode){N=null;break}h=zg(i),g.insertBefore(h,N)}b=N,N=N.nextSibling,h.appendChild(b)}else h=null,N=N.nextSibling;v&&(i.selection.setRng(_w(v)),i.nodeChanged())})(a)))})(e),(a=>{var i;const l=a.dom,c=Sn(a),d=(i=fA(a))!==null&&i!==void 0?i:"",m=(f,g)=>{if((v=>{if(Ux(v)){const y=v.keyCode;return!Hx(v)&&(me.metaKeyPressed(v)||v.altKey||y>=112&&y<=123||Se(QR,y))}return!1})(f))return;const h=a.getBody(),b=!(v=>Ux(v)&&!(Hx(v)||v.type==="keyup"&&v.keyCode===229))(f)&&((v,y,E)=>{if(v.isEmpty(y,void 0,{skipBogus:!1,includeZwsp:!0})){const N=y.firstElementChild;return!N||!v.getStyle(y.firstElementChild,"padding-left")&&!v.getStyle(y.firstElementChild,"padding-right")&&E===N.nodeName.toLowerCase()}return!1})(l,h,c);(l.getAttrib(h,zx)!==""!==b||g)&&(l.setAttrib(h,zx,b?d:null),((v,y)=>{v.dispatch("PlaceholderToggle",{state:y})})(a,b),a.on(b?"keydown":"keyup",m),a.off(b?"keyup":"keydown",m))};Eo(d)&&a.on("init",(f=>{m(f,!0),a.on("change SetContent ExecCommand",m),a.on("paste",(g=>Po.setEditorTimeout(a,(()=>m(g)))))}))})(e),aP(e,r);const s=(a=>{const i=a;return(l=>Ot(l.plugins,"rtc").bind((c=>_.from(c.setup))))(a).fold((()=>(i.rtcInstance=dx(a),_.none())),(l=>(i.rtcInstance=(()=>{const c=ie(null),d=ie("");return{init:{bindEvents:Ee},undoManager:{beforeChange:Ee,add:c,undo:c,redo:c,clear:Ee,reset:Ee,hasUndo:_t,hasRedo:_t,transact:c,ignore:Ee,extra:Ee},formatter:{match:_t,matchAll:ie([]),matchNode:ie(void 0),canApply:_t,closest:d,apply:Ee,remove:Ee,toggle:Ee,formatChanged:ie({unbind:Ee})},editor:{getContent:d,setContent:ie({content:"",html:""}),insertContent:ie(""),addVisual:Ee},selection:{getContent:d},autocompleter:{addDecoration:Ee,removeDecoration:Ee},raw:{getModel:ie(_.none())}}})(),_.some((()=>l().then((c=>(i.rtcInstance=(d=>{const m=N=>Ue(N)?N:{},{init:f,undoManager:g,formatter:h,editor:b,selection:v,autocompleter:y,raw:E}=d;return{init:{bindEvents:f.bindEvents},undoManager:{beforeChange:g.beforeChange,add:g.add,undo:g.undo,redo:g.redo,clear:g.clear,reset:g.reset,hasUndo:g.hasUndo,hasRedo:g.hasRedo,transact:(N,D,A)=>g.transact(A),ignore:(N,D)=>g.ignore(D),extra:(N,D,A,R)=>g.extra(A,R)},formatter:{match:(N,D,A,R)=>h.match(N,m(D),R),matchAll:h.matchAll,matchNode:h.matchNode,canApply:N=>h.canApply(N),closest:N=>h.closest(N),apply:(N,D,A)=>h.apply(N,m(D)),remove:(N,D,A,R)=>h.remove(N,m(D)),toggle:(N,D,A)=>h.toggle(N,m(D)),formatChanged:(N,D,A,R,P)=>h.formatChanged(D,A,R,P)},editor:{getContent:N=>b.getContent(N),setContent:(N,D)=>({content:b.setContent(N,D),html:""}),insertContent:(N,D)=>(b.insertContent(N),""),addVisual:b.addVisual},selection:{getContent:(N,D)=>v.getContent(D)},autocompleter:{addDecoration:y.addDecoration,removeDecoration:y.removeDecoration},raw:{getModel:()=>_.some(E.getRawModel())}}})(c),c.rtc.isRemote))))))))})(e);(a=>{const i=a.getDoc(),l=a.getBody();(m=>{m.dispatch("PreInit")})(a),IA(a)||(i.body.spellcheck=!1,xh.setAttrib(l,"spellcheck","false")),a.quirks=TP(a),(m=>{m.dispatch("PostRender")})(a);const c=dA(a);c!==void 0&&(l.dir=c);const d=FA(a);d&&a.on("BeforeSetContent",(m=>{k.each(d,(f=>{m.content=m.content.replace(f,(g=>"<!--mce:protected "+escape(g)+"-->"))}))})),a.on("SetContent",(()=>{a.addVisual(a.getBody())})),a.on("compositionstart compositionend",(m=>{a.composing=m.type==="compositionstart"}))})(e),s.fold((()=>{const a=(i=>{let l=!1;const c=setTimeout((()=>{l||i.setProgressState(!0)}),500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(e);n_(e).then((()=>{Eh(e),a()}))}),(a=>{e.setProgressState(!0),n_(e).then((()=>{a().then((i=>{e.setProgressState(!1),Eh(e),ux(e)}),(i=>{e.notificationManager.open({type:"error",text:String(i)}),Eh(e),ux(e)}))}))}))},kh=St.DOM,r_=St.DOM,s_=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),a_=e=>{const t=e.getElement();return e.inline?s_(null):(n=>{const o=r_.create("div");return r_.insertAfter(o,n),s_(o,o)})(t)},RP=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const o=k.trim(Ob(n)),r=n.ui.registry.getAll().icons,s={...su.get("default").icons,...su.get(o).icons};Ct(s,((a,i)=>{Me(r,i)||n.ui.registry.addIcon(i,a)}))})(e),(n=>{const o=r=>{r.keyCode!==me.ESC||r.defaultPrevented||(s=>s.dispatch("CloseActiveTooltips"))(n).isDefaultPrevented()&&r.preventDefault()};document.addEventListener("keyup",o),n.inline||n.on("keyup",o),n.on("remove",(()=>{document.removeEventListener("keyup",o),n.inline||n.off("keyup",o)}))})(e),(n=>{const o=hi(n);if(we(o)){const r=Aa.get(o);n.theme=r(n,Aa.urls[o])||{},ht(n.theme.init)&&n.theme.init(n,Aa.urls[o]||n.editorManager.documentBaseURL.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const o=rf(n),r=Di.get(o);n.model=r(n,Di.urls[o])})(e),(n=>{Gp.init(n)})(e),(n=>{const o=[];K(Bl(n),(r=>{((s,a,i)=>{const l=Ri.get(i),c=Ri.urls[i]||s.editorManager.documentBaseURL.replace(/\/$/,"");if(i=k.trim(i),l&&k.inArray(a,i)===-1){if(s.plugins[i])return;try{const d=l(s,c)||{};s.plugins[i]=d,ht(d.init)&&(d.init(s,c),a.push(i))}catch(d){((m,f,g)=>{const h=ir.translate(["Failed to initialize plugin: {0}",f]);Cb(m,"PluginLoadError",{message:h}),iu(h,g),au(m,h)})(s,i,d)}}})(n,o,(s=>s.replace(/^\-/,""))(r))}))})(e);const t=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,we(hi(n))?(r=>{const s=r.theme.renderUI;return s?s():a_(r)})(n):ht(hi(n))?(r=>{const s=r.getElement(),a=hi(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):a_(n)})(e);((n,o)=>{const r={show:_.from(o.show).getOr(Ee),hide:_.from(o.hide).getOr(Ee),isEnabled:_.from(o.isEnabled).getOr(zt),setEnabled:s=>{s&&(n.mode.get()==="readonly"||ts(n))||_.from(o.setEnabled).each((a=>a(s)))}};n.ui={...n.ui,...r}})(e,_.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=>{n.contentCSS=n.contentCSS.concat((o=>Rx(o,lA(o)))(n),(o=>Rx(o,Lb(o)))(n))})(e),e.inline?o_(e):((n,o)=>{((r,s)=>{const a=p.browser.isFirefox()?Ub(r):"Rich Text Area",i=r.translate(a),l=at(S.fromDom(r.getElement()),"tabindex").bind(us),c=((d,m,f,g)=>{const h=S.fromTag("iframe");return g.each((b=>Te(h,"tabindex",b))),Ae(h,f),Ae(h,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:m}),ri(h,"tox-edit-area__iframe"),h})(r.id,i,$N(r),l).dom;c.onload=()=>{c.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=c,r.iframeHTML=(d=>{let m=qN(d)+"<html><head>";Ab(d)!==d.editorManager.documentBaseURL&&(m+='<base href="'+d.documentBaseURI.getURI()+'" />'),m+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const f=WN(d),g=VN(d),h=d.translate(Ub(d));return Tb(d)&&(m+='<meta http-equiv="Content-Security-Policy" content="'+Tb(d)+'" />'),m+=`</head><body id="${f}" class="mce-content-body ${g}" data-id="${d.id}" aria-label="${h}"><br></body></html>`,m})(r),kh.add(s.iframeContainer,c)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=kh.isHidden(o.editorContainer)),n.getElement().style.display="none",kh.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,a=()=>{r.contentDocument=s.contentDocument,o_(r)};if(nT(r)||p.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),a()}else{const l=(i=S.fromDom(s),Qa(i,"load",fl,(()=>{l.unbind(),a()})));s.srcdoc=r.iframeHTML}var i})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Ma=St.DOM,i_=e=>e.charAt(0)==="-",l_=(e,t,n)=>_.from(t).filter((o=>Eo(o)&&!su.has(o))).map((o=>({url:`${e.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:_.some(o)}))),OP=(e,t)=>{const n=Tr.ScriptLoader,o=()=>{!e.removed&&(r=>{const s=hi(r);return!we(s)||te(Aa.get(s))})(e)&&(r=>{const s=rf(r);return te(Di.get(s))})(e)&&RP(e)};((r,s)=>{const a=hi(r);if(we(a)&&!i_(a)&&!Me(Aa.urls,a)){const i=gA(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;Aa.load(a,l).catch((()=>{((c,d,m)=>{Oi(c,"ThemeLoadError",Bi("theme",d,m))})(r,l,a)}))}})(e,t),((r,s)=>{const a=rf(r);if(a!=="plugin"&&!Me(Di.urls,a)){const i=hA(r),l=we(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;Di.load(a,l).catch((()=>{((c,d,m)=>{Oi(c,"ModelLoadError",Bi("model",d,m))})(r,l,a)}))}})(e,t),((r,s)=>{Gp.load(r,s)})(e,t),((r,s)=>{const a=Bb(s),i=aA(s);if(!ir.hasCode(a)&&a!=="en"){const l=Eo(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch((()=>{((c,d,m)=>{Oi(c,"LanguageLoadError",Bi("language",d,m))})(s,l,a)}))}})(n,e),((r,s,a)=>{const i=l_(s,"default",a),l=(c=>_.from(eA(c)).filter(Eo).map((d=>({url:d,name:_.none()}))))(s).orThunk((()=>l_(s,Ob(s),"")));K((c=>{const d=[],m=f=>{d.push(f)};for(let f=0;f<c.length;f++)c[f].each(m);return d})([i,l]),(c=>{r.add(c.url).catch((()=>{((d,m,f)=>{Oi(d,"IconsLoadError",Bi("icons",m,f))})(s,c.url,c.name.getOrUndefined())}))}))})(n,e,t),((r,s)=>{const a=(i,l)=>{i!=="licensekeymanager"&&Ri.load(i,l).catch((()=>{((c,d,m)=>{Oi(c,"PluginLoadError",Bi("plugin",d,m))})(r,l,i)}))};Ct(TA(r),((i,l)=>{a(l,i),r.options.set("plugins",Bl(r).concat(l))})),K(Bl(r),(i=>{!(i=k.trim(i))||Ri.urls[i]||i_(i)||a(i,`plugins/${i}/plugin${s}.js`)}))})(e,t),n.loadQueue().then(o,o)},c_=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],_h=e=>{const t=((n,o,r=36)=>{const s=r/2;return`<svg height="${r}" width="${r}" xmlns="http://www.w3.org/2000/svg"><circle cx="${s}" cy="${s}" r="${s}" fill="${o}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${s}">`+(a=>{var i;return Intl.Segmenter?`${(i=new Intl.Segmenter().segment(a)[Symbol.iterator]().next().value)===null||i===void 0?void 0:i.segment}`:a.trim()[0]})(n)+"</text></svg>"})(e,(()=>{const n=Math.floor(Ws()*c_.length);return c_[n]})());return"data:image/svg+xml,"+encodeURIComponent(t)},BP=gE([$i("id","id",{tag:"required",process:{}},eh()),mr("name"),mr("avatar"),(e=>$i(e,e,{tag:"option",process:{}},eh()))("custom")]),PP=e=>{const t={};return Ct(e,((n,o)=>{n.each((r=>{t[o]=r}))})),t},LP=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");const t=qe(e,(r=>hE("Invalid user object",BP,r))),{errors:n,values:o}=Wa(t);if(n.length>0){const r=qe(n,((s,a)=>`User at index ${a}: ${bE(s)}`));console.warn(`User validation errors:
`+r.join(`
`))}return qe(o,(r=>{const{id:s,name:a,avatar:i,...l}=r;return{id:s,name:a.getOr(s),avatar:i.getOr(_h(a.getOr(s))),...PP(l)}}))},d_=No().deviceType,u_=d_.isPhone(),MP=d_.isTablet(),xc=e=>{if(kt(e))return[];{const t=se(e)?e:e.split(/[ ,]/),n=qe(t,Cr);return Pe(n,Eo)}},IP=(e,t)=>{const n=(s=>{const a={},i={};return vr(s,((l,c)=>Se(e,c)),br(a),br(i)),{t:a,f:i}})(t);return o=n.t,r=n.f,{sections:ie(o),options:ie(r)};var o,r},Nh=(e,t)=>Me(e.sections(),t),FP=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ot(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),jP=(e,t)=>{var n;const o=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?k.extend({},e.external_plugins,o):o},zP=(e,t,n,o,r)=>{var s;const a=e?{mobile:FP((s=r.mobile)!==null&&s!==void 0?s:{},t)}:{},i=IP(["mobile"],Ha(a,r)),l=k.extend(n,o,i.options(),((c,d)=>c&&Nh(d,"mobile"))(e,i)?((c,d,m={})=>{const f=c.sections(),g=Ot(f,d).getOr({});return k.extend({},m,g)})(i,"mobile"):{},{external_plugins:jP(o,i.options())});return((c,d,m,f)=>{const g=xc(m.forced_plugins),h=xc(f.plugins),b=((E,N)=>Nh(E,N)?E.sections()[N]:{})(d,"mobile"),v=((E,N,D,A)=>E&&Nh(N,"mobile")?A:D)(c,d,h,b.plugins?xc(b.plugins):h),y=((E,N)=>[...xc(E),...xc(N)])(g,v);return k.extend(f,{forced_plugins:g,plugins:y})})(e,i,o,l)},UP=e=>{(t=>{const n=o=>()=>{K("left,center,right,justify".split(","),(r=>{o!==r&&t.formatter.remove("align"+r)})),o!=="none"&&(r=>{t.formatter.toggle(r,void 0),t.nodeChanged()})("align"+o)};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=o=>()=>{const r=t.selection,s=r.isCollapsed()?[t.dom.getParent(r.getNode(),t.dom.isBlock)]:r.getSelectedBlocks();return yt(s,(a=>te(t.formatter.matchNode(a,o))))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)},HP=(e,t)=>{const n=e.selection,o=e.dom;return/^ | $/.test(t)?((r,s,a,i)=>{const l=S.fromDom(r.getRoot());return a=Vl(l,G.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Kl(l,G.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),t,e.schema):t},qu=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:o}=(r=>{if(typeof r!="string"){const s=k.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(t);Mp(e,{...o,content:HP(e,n),format:"html",set:!1,selection:!0}).each((r=>{const s=((a,i,l)=>Vp(a).editor.insertContent(i,l))(e,r.content,o);Ip(e,s,r),e.addVisual()}))}},$P={"font-size":"size","font-family":"face"},qP=wn("font"),m_=e=>(t,n)=>_.from(n).map(S.fromDom).filter(nt).bind((o=>((r,s,a)=>mm(S.fromDom(a),(i=>(l=>ei(l,r).orThunk((()=>qP(l)?Ot($P,r).bind((c=>at(l,c))):_.none())))(i)),(i=>pe(S.fromDom(s),i))))(e,t,o.dom).or(((r,s)=>_.from(St.DOM.getStyle(s,r,!0)))(e,o.dom)))).getOr(""),WP=m_("font-size"),VP=Mn((e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")),m_("font-family")),KP=e=>zn(e.getBody()).bind((t=>{const n=t.container();return _.from(re(n)?n.parentNode:n)})),Ah=(e,t)=>((n,o)=>(r=>_.from(r.selection.getRng()).bind((s=>{const a=r.getBody();return s.startContainer===a&&s.startOffset===0?_.none():_.from(r.selection.getStart(!0))})))(n).orThunk(Ce(KP,n)).map(S.fromDom).filter(nt).bind(o))(e,Us(_.some,t)),f_=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=(s=>k.explode(s.options.get("font_size_style_values")))(e),r=(s=>k.explode(s.options.get("font_size_classes")))(e);return r.length>0?r[n-1]||t:o[n-1]||t}return t}return t},XP=e=>{const t=e.split(/\s*,\s*/);return qe(t,(n=>n.indexOf(" ")===-1||Jt(n,'"')||Jt(n,"'")?n:`'${n}'`)).join(",")},YP=e=>{e.editorCommands.addCommands({Indent:()=>{(t=>{gS(t,"indent")})(e)},Outdent:()=>{hS(e)}}),e.editorCommands.addCommands({Outdent:()=>mS(e),Indent:()=>(t=>!t.mode.isReadOnly()&&(n=>Vb(n).forall((o=>{const r=n.selection.getSelectedBlocks();return yt(r,(s=>vs(S.fromDom(s),"li").forall((a=>{return(i=a,Kh(i,(l=>Z(l,"ol,ul")),void 0)).length<=o;var i}))))})))(t))(e)},"state")},p_=(e,t)=>{if(e.mode.isReadOnly())return;const n=e.dom,o=e.selection.getRng(),r=t?e.selection.getStart():e.selection.getEnd(),s=t?o.startContainer:o.endContainer,a=hc(n,s);if(!a||!a.isContentEditable)return;const i=t?dn:M,l=Sn(e);((c,d,m,f)=>{const g=c.dom,h=v=>g.isBlock(v)&&v.parentElement===m,b=h(d)?d:g.getParent(f,h,m);return _.from(b).map(S.fromDom)})(e,r,a,s).each((c=>{const d=LE(e,s,c.dom,a,!1,l);i(c,S.fromDom(d)),e.selection.setCursorLocation(d,0),e.dispatch("NewBlock",{newBlock:d}),gc(e,"insertParagraph")}))},GP=e=>{UP(e),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=t.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n!=="paste"||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(p.os.isMacOS()||p.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:s,type:"error"})}}})})(e),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;t.dom.getParent(t.selection.getNode(),(a=>!xe(a)||s++!==r||(t.selection.select(a),!1)),t.getBody())},mceSelectNode:(n,o,r)=>{t.selection.select(r)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),Xo);if(n){const o=t.dom.createRng();o.selectNodeContents(n),t.selection.setRng(o)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{qu(t,t.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{qu(t,t.dom.encode(r))},insertHTML:(n,o,r)=>{qu(t,r)},mceInsertContent:(n,o,r)=>{qu(t,r)},mceSetContent:(n,o,r)=>{t.setContent(r)},mceReplaceContent:(n,o,r)=>{t.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(HA(t))}})})(e),(t=>{const n=(o,r,s)=>{if(t.mode.isReadOnly())return;const a=we(s)?{href:s}:s,i=t.dom.getParent(t.selection.getNode(),"a");Ue(a)&&we(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,i))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const o=t.dom.getParent(t.selection.getStart(),"a");return void(o&&t.dom.remove(o,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),YP(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{(n=>{p_(n,!0)})(t)},InsertNewBlockAfter:()=>{(n=>{p_(n,!1)})(t)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{Mu(jE,t)},mceInsertNewLine:(n,o,r)=>{VE(t,r)},InsertLineBreak:(n,o,r)=>{Mu(HE,t)}})})(e),(t=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const c=f_(i,l);i.formatter.toggle("fontname",{value:XP(c)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{((i,l)=>{i.formatter.toggle("fontsize",{value:f_(i,l)}),i.nodeChanged()})(n,a)},LineHeight:(r,s,a)=>{((i,l)=>{i.formatter.toggle("lineheight",{value:String(l)}),i.nodeChanged()})(n,a)},Lang:(r,s,a)=>{var i;o(r,{value:a.code,customValue:(i=a.customCode)!==null&&i!==void 0?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(we(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(t),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",(()=>(r=>Ah(r,(s=>VP(r.getBody(),s.dom))).getOr(""))(n))),n.editorCommands.addQueryValueHandler("FontSize",(()=>(r=>Ah(r,(s=>WP(r.getBody(),s.dom))).getOr(""))(n))),n.editorCommands.addQueryValueHandler("LineHeight",(()=>(r=>Ah(r,(s=>{const a=S.fromDom(r.getBody());return mm(s,(l=>ei(l,"line-height")),Ce(pe,a)).getOrThunk((()=>{const l=parseFloat(nr(s,"line-height")),c=parseFloat(nr(s,"font-size"));return String(l/c)}))})).getOr(""))(n)))})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??t.selection.getNode();if(s!==t.getBody()){const a=t.selection.getBookmark();t.dom.remove(s,!0),t.selection.moveToBookmark(a)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,o,r)=>{((s,a)=>{s.removed||(a?Mf(s):(i=>{const l=i.selection,c=i.getBody();let d=l.getRng();i.quirks.refreshContentEditable();const m=g=>{Rf(g).each((h=>{g.selection.setRng(h),d=h}))};!_i(i)&&i.hasEditableRoot()&&m(i);const f=((g,h)=>g.dom.getParent(h,(b=>g.dom.getContentEditable(b)==="true")))(i,l.getNode());if(f&&i.dom.isChildOf(f,c))return((g,h)=>g.dom.getParent(h,(b=>g.dom.getContentEditable(b)==="false"))!==null)(i,f)||Bd(c),Bd(f),i.hasEditableRoot()||m(i),Xv(i,d),void Mf(i);i.inline||(p.browser.isOpera()||Bd(c),i.getWin().focus()),(p.browser.isFirefox()||i.inline)&&(Bd(c),Xv(i,d)),Mf(i)})(s))})(t,r===!0)},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)},QP=["toggleview"],g_=e=>Se(QP,e.toLowerCase());class h_{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,o,r){const s=this.editor,a=t.toLowerCase(),i=r?.skip_focus;if(s.removed||(a!=="mcefocus"&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?(c=>{Rf(c).each((d=>c.selection.setRng(d)))})(s):s.focus()),s.dispatch("BeforeExecCommand",{command:t,ui:n,value:o}).isDefaultPrevented()))return!1;const l=this.commands.exec[a];return!!ht(l)&&(l(a,n,o,r),s.dispatch("ExecCommand",{command:t,ui:n,value:o,args:r}),!0)}queryCommandState(t){if(!g_(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),o=this.commands.state[n];return!!ht(o)&&o(n)}queryCommandValue(t){if(!g_(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),o=this.commands.value[n];return ht(o)?o(n):""}addCommands(t,n="exec"){const o=this.commands;Ct(t,((r,s)=>{K(s.toLowerCase().split(","),(a=>{o[n][a]=r}))}))}addCommand(t,n,o){const r=t.toLowerCase();this.commands.exec[r]=(s,a,i,l)=>n.call(o??this.editor,a,i,l)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,o){this.commands.state[t.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(t,n,o){this.commands.value[t.toLowerCase()]=()=>n.call(o??this.editor)}}const JP=k.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Th{static isNative(t){return!!JP[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||_t}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const o=t.toLowerCase(),r=Lm(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(l.func.call(this.scope,r)===!1)return r.preventDefault(),r}}return r}on(t,n,o,r){if(n===!1&&(n=_t),n){const s={func:n,removed:!1};r&&k.extend(s,r);const a=t.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(t,n){if(t){const o=t.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return Ct(this.bindings,((i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]})),this;if(a){if(n){const i=Zo(a,(l=>l.func===n));a=i.fail,this.bindings[s]=a,K(i.pass,(l=>{l.removed=!0}))}else a.length=0;a.length||(this.toggleEvent(t,!1),delete this.bindings[s])}}}else Ct(this.bindings,((o,r)=>{this.toggleEvent(r,!1)})),this.bindings={};return this}once(t,n,o){return this.on(t,n,o,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const wc=e=>(e._eventDispatcher||(e._eventDispatcher=new Th({scope:e,toggleEvent:(t,n)=>{Th.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Dh={fire(e,t,n){return H1("fire"),this.dispatch(e,t,n)},dispatch(e,t,n){const o=this;if(o.removed&&e!=="remove"&&e!=="detach")return Lm(e.toLowerCase(),t??{},o);const r=wc(o).dispatch(e,t);if(n!==!1&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(e,r,!1),s=s.parent?s.parent():void 0}return r},on(e,t,n){return wc(this).on(e,t,n)},off(e,t){return wc(this).off(e,t)},once(e,t){return wc(this).once(e,t)},hasEventListeners(e){return wc(this).has(e)}},Wu=St.DOM;let Ia;const Vu=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Ib(e);return n?(e.eventRoot||(e.eventRoot=Wu.select(n)[0]),e.eventRoot):e.getBody()},b_=(e,t,n)=>{(o=>!o.hidden&&!ts(o))(e)?e.dispatch(t,n):ts(e)&&((o,r)=>{if((s=>s.type==="click")(r)&&!me.metaKeyPressed(r)){const s=S.fromDom(r.target);((a,i)=>vs(i,"a",(l=>pe(l,S.fromDom(a.getBody())))).bind((l=>at(l,"href"))))(o,s).each((a=>{if(r.preventDefault(),/^#/.test(a)){const i=o.dom.select(`${a},[name="${cs(a,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))}else(s=>Se(HR,s.type))(r)&&o.dispatch(r.type,r)})(e,n)},v_=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=Vu(e,t);if(Ib(e)){if(Ia||(Ia={},e.editorManager.on("removeEditor",(()=>{e.editorManager.activeEditor||Ia&&(Ct(Ia,((r,s)=>{e.dom.unbind(Vu(e,s))})),Ia=null)}))),Ia[t])return;const o=r=>{const s=r.target,a=e.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||Wu.isChildOf(s,l))&&b_(a[i],t,r)}};Ia[t]=o,Wu.bind(n,t,o)}else{const o=r=>{b_(e,t,r)};Wu.bind(n,t,o),e.delegates[t]=o}},y_={...Dh,bindPendingEventDelegates(){const e=this;k.each(e._pendingNativeEvents,(t=>{v_(e,t)}))},toggleNativeEvent(e,t){const n=this;e!=="focus"&&e!=="blur"&&(n.removed||(t?n.initialized?v_(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(Vu(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(Ct(e.delegates,((o,r)=>{e.dom.unbind(Vu(e,r),r,o)})),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},ZP=e=>we(e)?{value:e.split(/[ ,]/),valid:!0}:Ln(e,we)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},C_=(e,t)=>e+(ds(t.message)?"":`. ${t.message}`),x_=e=>e.valid,Rh=(e,t,n="")=>{const o=t(e);return Cn(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},Ki=e=>e.readonly,eL=["design","readonly"],w_=(e,t,n,o)=>{const r=n[t.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((a,i)=>{const l=S.fromDom(a.getBody());i?(a.readonly=!0,a.hasEditableRoot()&&(l.dom.contentEditable="true"),Nx(a)):(a.readonly=!1,Ax(a))})(e,s.editorReadOnly),t.set(o),((a,i)=>{a.dispatch("SwitchMode",{mode:i})})(e,o)},tL=e=>{const t=tn("design"),n=tn({design:{activate:Ee,deactivate:Ee,editorReadOnly:!1},readonly:{activate:Ee,deactivate:Ee,editorReadOnly:!0}});return(o=>{const r=a=>{Ki(o)&&(i=>yt(i,(l=>l.type==="characterData"||l.type==="childList")))(a)&&(i=>{const l=i.undoManager.add();te(l)&&(i.undoManager.undo(),i.undoManager.reset())})(o)},s=new MutationObserver(r);o.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",(a=>{Ki(o)&&a.preventDefault()})),o.on("BeforeExecCommand",(a=>{a.command!=="Undo"&&a.command!=="Redo"||!Ki(o)||a.preventDefault()})),o.on("compositionstart",(()=>{Ki(o)&&s.observe(o.getBody(),{characterData:!0,childList:!0,subtree:!0})})),o.on("compositionend",(()=>{if(Ki(o)){const a=s.takeRecords();r(a)}s.disconnect()}))})(e),(o=>{(r=>{r.serializer?Dx(r):r.on("PreInit",(()=>{Dx(r)}))})(o),(r=>{r.on("ShowCaret ObjectSelected",(s=>{ts(r)&&s.preventDefault()})),r.on("DisabledStateChange",(s=>{s.isDefaultPrevented()||Tx(r,s.state)}))})(o)})(e),{isReadOnly:()=>Ki(e),set:o=>((r,s,a,i)=>{if(!(i===a.get()||r.initialized&&ts(r))){if(!Me(s,i))throw new Error(`Editor mode '${i}' is invalid`);r.initialized?w_(r,a,s,i):r.on("init",(()=>w_(r,a,s,i)))}})(e,n.get(),t,o),get:()=>t.get(),register:(o,r)=>{n.set(((s,a,i)=>{if(Se(eL,a))throw new Error(`Cannot override default mode ${a}`);return{...s,[a]:{...i,deactivate:()=>{try{i.deactivate()}catch(l){console.error(`problem while deactivating editor mode ${a}:`,l)}}}}})(n.get(),o,r))}}},Oh=k.each,Bh=k.explode,nL={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},S_=k.makeMap("alt,ctrl,shift,meta,access"),oL=e=>{const t={},n=p.os.isMacOS()||p.os.isiOS();Oh(Bh(e.toLowerCase(),"+"),(s=>{(a=>a in S_)(s)?t[s]=!0:/^[0-9]{2,}$/.test(s)?t.keyCode=parseInt(s,10):(t.charCode=s.charCodeAt(0),t.keyCode=nL[s]||s.toUpperCase().charCodeAt(0))}));const o=[t.keyCode];let r;for(r in S_)t[r]?o.push(r):t[r]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class E_{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",(o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Oh(n.shortcuts,(r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),o.type==="keydown"&&n.executeShortcutAction(r))})),n.matchShortcut(o,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&o.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))}))}add(t,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return Oh(Bh(k.trim(t)),(i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l})),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,o=t;return typeof o=="string"?()=>{n.editor.execCommand(o,!1,null)}:k.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(t,n,o,r){const s=k.map(Bh(t,">"),oL);return s[s.length-1]=k.extend(s[s.length-1],{func:o,scope:r||this.editor}),k.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const rL=()=>{const e=(()=>{const t={},n={},o={},r={},s={},a={},i={},l={},c={},d=(f,g)=>(h,b)=>{f[h.toLowerCase()]={...b,type:g}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(o,"autocompleter"),addContextMenu:d(s,"contextmenu"),addContextToolbar:d(a,"contexttoolbar"),addContextForm:(m=a,(f,g)=>{m[f.toLowerCase()]={type:"contextform",...g}}),addSidebar:d(l,"sidebar"),addView:d(c,"views"),addIcon:(f,g)=>r[f.toLowerCase()]=g,addContext:(f,g)=>i[f.toLowerCase()]=g,getAll:()=>({buttons:t,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:l,views:c,contexts:i})};var m})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Fa=St.DOM,k_=k.extend,sL=k.each;class Ku{constructor(t,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,k_(this,y_);const r=this;this.id=t,this.editorUid=_c(),this.hidden=!1;const s=((g,h)=>{const b=em(h);return zP(u_||MP,u_,b,g,b)})(o.defaultOptions,n);this.options=((g,h,b=h)=>{const v={},y={},E=(D,A,R)=>{const P=Rh(A,R);return x_(P)?(y[D]=P.value,!0):(console.warn(C_(`Invalid value passed for the ${D} option`,P)),!1)},N=D=>Me(v,D);return{register:(D,A)=>{const R=(L=>we(L.processor))(A)?(L=>{const j=(()=>{switch(L){case"array":return se;case"boolean":return Cn;case"function":return ht;case"number":return x;case"object":return Ue;case"string":return we;case"string[]":return ZP;case"object[]":return W=>Ln(W,Ue);case"regexp":return W=>xo(W,RegExp);default:return zt}})();return W=>Rh(W,j,`The value must be a ${L}.`)})(A.processor):A.processor,P=((L,j,W)=>{if(!jt(j)){const B=Rh(j,W);if(x_(B))return B.value;console.error(C_(`Invalid default value passed for the "${L}" option`,B))}})(D,A.default,R);v[D]={...A,default:P,processor:R},Ot(y,D).orThunk((()=>Ot(h,D))).each((L=>E(D,L,R)))},isRegistered:N,get:D=>Ot(y,D).orThunk((()=>Ot(v,D).map((A=>A.default)))).getOrUndefined(),set:(D,A)=>{if(N(D)){const R=v[D];return R.immutable?(console.error(`"${D}" is an immutable option and cannot be updated`),!1):E(D,A,R.processor)}return console.warn(`"${D}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:D=>{const A=N(D);return A&&delete y[D],A},isSet:D=>Me(y,D),debug:()=>{try{console.log(JSON.parse(JSON.stringify(b,((D,A)=>Cn(A)||x(A)||we(A)||Ye(A)||se(A)||Be(A)?A:Object.prototype.toString.call(A)))))}catch(D){console.error(D)}}}})(0,s,n),(g=>{const h=g.options.register;h("id",{processor:"string",default:g.id}),h("selector",{processor:"string"}),h("target",{processor:"object"}),h("suffix",{processor:"string"}),h("cache_suffix",{processor:"string"}),h("base_url",{processor:"string"}),h("referrer_policy",{processor:"string",default:""}),h("crossorigin",{processor:"function",default:ie(void 0)}),h("language_load",{processor:"boolean",default:!0}),h("inline",{processor:"boolean",default:!1}),h("iframe_attrs",{processor:"object",default:{}}),h("doctype",{processor:"string",default:"<!DOCTYPE html>"}),h("document_base_url",{processor:"string",default:g.editorManager.documentBaseURL}),h("body_id",{processor:Nb(g,"tinymce"),default:"tinymce"}),h("body_class",{processor:Nb(g),default:""}),h("content_security_policy",{processor:"string",default:""}),h("br_in_pre",{processor:"boolean",default:!0}),h("forced_root_block",{processor:b=>{const v=we(b)&&Eo(b);return v?{value:b,valid:v}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),h("forced_root_block_attrs",{processor:"object",default:{}}),h("newline_behavior",{processor:b=>{const v=Se(["block","linebreak","invert","default"],b);return v?{value:b,valid:v}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),h("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),h("no_newline_selector",{processor:"string",default:""}),h("keep_styles",{processor:"boolean",default:!0}),h("end_container_on_empty_block",{processor:b=>Cn(b)||we(b)?{valid:!0,value:b}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),h("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),h("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),h("font_size_classes",{processor:"string",default:""}),h("automatic_uploads",{processor:"boolean",default:!0}),h("images_reuse_filename",{processor:"boolean",default:!1}),h("images_replace_blob_uris",{processor:"boolean",default:!0}),h("icons",{processor:"string",default:""}),h("icons_url",{processor:"string",default:""}),h("images_upload_url",{processor:"string",default:""}),h("images_upload_base_path",{processor:"string",default:""}),h("images_upload_credentials",{processor:"boolean",default:!1}),h("images_upload_handler",{processor:"function"}),h("language",{processor:"string",default:"en"}),h("language_url",{processor:"string",default:""}),h("entity_encoding",{processor:"string",default:"named"}),h("indent",{processor:"boolean",default:!0}),h("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),h("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),h("indent_use_margin",{processor:"boolean",default:!1}),h("indentation",{processor:"string",default:"40px"}),h("content_css",{processor:b=>{const v=b===!1||we(b)||Ln(b,we);return v?we(b)?{value:qe(b.split(","),Cr),valid:v}:se(b)?{value:b,valid:v}:b===!1?{value:[],valid:v}:{value:b,valid:v}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:sf(g)?[]:["default"]}),h("content_style",{processor:"string"}),h("content_css_cors",{processor:"boolean",default:!1}),h("font_css",{processor:b=>{const v=we(b)||Ln(b,we);return v?{value:se(b)?b:qe(b.split(","),Cr),valid:v}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),h("extended_mathml_attributes",{processor:"string[]"}),h("extended_mathml_elements",{processor:"string[]"}),h("inline_boundaries",{processor:"boolean",default:!0}),h("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),h("object_resizing",{processor:b=>{const v=Cn(b)||we(b);return v?b===!1||tf.isiPhone()||tf.isiPad()?{value:"",valid:v}:{value:b===!0?"table,img,figure.image,div,video,iframe":b,valid:v}:{valid:!1,message:"Must be boolean or a string"}},default:!UN}),h("resize_img_proportional",{processor:"boolean",default:!0}),h("event_root",{processor:"string"}),h("service_message",{processor:"string"}),h("onboarding",{processor:"boolean",default:!0}),h("tiny_cloud_entry_url",{processor:"string"}),h("theme",{processor:b=>b===!1||we(b)||ht(b),default:"silver"}),h("theme_url",{processor:"string"}),h("formats",{processor:"object"}),h("format_empty_lines",{processor:"boolean",default:!1}),h("format_noneditable_selector",{processor:"string",default:""}),h("preview_styles",{processor:b=>{const v=b===!1||we(b);return v?{value:b===!1?"":b,valid:v}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),h("custom_ui_selector",{processor:"string",default:""}),h("hidden_input",{processor:"boolean",default:!0}),h("submit_patch",{processor:"boolean",default:!0}),h("encoding",{processor:"string"}),h("add_form_submit_trigger",{processor:"boolean",default:!0}),h("add_unload_trigger",{processor:"boolean",default:!0}),h("custom_undo_redo_levels",{processor:"number",default:0}),h("disable_nodechange",{processor:"boolean",default:!1}),h("disabled",{processor:b=>Cn(b)?(g.initialized&&Cd(g)!==b&&Promise.resolve().then((()=>{((v,y)=>{v.dispatch("DisabledStateChange",{state:y})})(g,b)})),{valid:!0,value:b}):{valid:!1,message:"The value must be a boolean."},default:!1}),h("readonly",{processor:"boolean",default:!1}),h("editable_root",{processor:"boolean",default:!0}),h("plugins",{processor:"string[]",default:[]}),h("external_plugins",{processor:"object"}),h("forced_plugins",{processor:"string[]"}),h("model",{processor:"string",default:g.hasPlugin("rtc")?"plugin":"dom"}),h("model_url",{processor:"string"}),h("block_unsupported_drop",{processor:"boolean",default:!0}),h("visual",{processor:"boolean",default:!0}),h("visual_table_class",{processor:"string",default:"mce-item-table"}),h("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),h("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(g.hasPlugin("help")?". Press ALT-0 for help.":"")}),h("setup",{processor:"function"}),h("init_instance_callback",{processor:"function"}),h("url_converter",{processor:"function",default:g.convertURL}),h("url_converter_scope",{processor:"object",default:g}),h("urlconverter_callback",{processor:"function"}),h("allow_conditional_comments",{processor:"boolean",default:!1}),h("allow_html_data_urls",{processor:"boolean",default:!1}),h("allow_svg_data_urls",{processor:"boolean"}),h("allow_html_in_named_anchor",{processor:"boolean",default:!1}),h("allow_html_in_comments",{processor:"boolean",default:!1}),h("allow_script_urls",{processor:"boolean",default:!1}),h("allow_unsafe_link_target",{processor:"boolean",default:!1}),h("allow_mathml_annotation_encodings",{processor:b=>{const v=Ln(b,we);return v?{value:b,valid:v}:{valid:!1,message:"Must be an array of strings."}},default:[]}),h("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),h("fix_list_elements",{processor:"boolean",default:!1}),h("preserve_cdata",{processor:"boolean",default:!1}),h("remove_trailing_brs",{processor:"boolean",default:!0}),h("pad_empty_with_br",{processor:"boolean",default:!1}),h("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),h("element_format",{processor:"string",default:"html"}),h("entities",{processor:"string"}),h("schema",{processor:"string",default:"html5"}),h("convert_urls",{processor:"boolean",default:!0}),h("relative_urls",{processor:"boolean",default:!0}),h("remove_script_host",{processor:"boolean",default:!0}),h("custom_elements",{processor:vd}),h("extended_valid_elements",{processor:"string"}),h("invalid_elements",{processor:"string"}),h("invalid_styles",{processor:vd}),h("valid_children",{processor:"string"}),h("valid_classes",{processor:vd}),h("valid_elements",{processor:"string"}),h("valid_styles",{processor:vd}),h("verify_html",{processor:"boolean",default:!0}),h("auto_focus",{processor:b=>we(b)||b===!0}),h("browser_spellcheck",{processor:"boolean",default:!1}),h("protect",{processor:"array"}),h("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),h("deprecation_warnings",{processor:"boolean",default:!0}),h("a11y_advanced_options",{processor:"boolean",default:!1}),h("api_key",{processor:"string"}),h("license_key",{processor:"string"}),h("paste_block_drop",{processor:"boolean",default:!1}),h("paste_data_images",{processor:"boolean",default:!0}),h("paste_preprocess",{processor:"function"}),h("paste_postprocess",{processor:"function"}),h("paste_webkit_styles",{processor:"string",default:"none"}),h("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),h("paste_merge_formats",{processor:"boolean",default:!0}),h("smart_paste",{processor:"boolean",default:!0}),h("paste_as_text",{processor:"boolean",default:!1}),h("paste_tab_spaces",{processor:"number",default:4}),h("text_patterns",{processor:b=>Ln(b,Ue)||b===!1?{value:yb(b===!1?[]:b),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),h("text_patterns_lookup",{processor:b=>{return ht(b)?{value:(v=b,y=>{const E=v(y);return yb(E)}),valid:!0}:{valid:!1,message:"Must be a single function"};var v},default:b=>[]}),h("noneditable_class",{processor:"string",default:"mceNonEditable"}),h("editable_class",{processor:"string",default:"mceEditable"}),h("noneditable_regexp",{processor:b=>Ln(b,_b)?{value:b,valid:!0}:_b(b)?{value:[b],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),h("table_tab_navigation",{processor:"boolean",default:!0}),h("highlight_on_focus",{processor:"boolean",default:!0}),h("xss_sanitization",{processor:"boolean",default:!0}),h("details_initial_state",{processor:b=>{const v=Se(["inherited","collapsed","expanded"],b);return v?{value:b,valid:v}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),h("details_serialized_state",{processor:b=>{const v=Se(["inherited","collapsed","expanded"],b);return v?{value:b,valid:v}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),h("init_content_sync",{processor:"boolean",default:!1}),h("newdocument_content",{processor:"string",default:""}),h("sandbox_iframes",{processor:"boolean",default:!0}),h("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),h("convert_unsafe_embeds",{processor:"boolean",default:!0}),h("user_id",{processor:"string",default:"Anonymous"}),h("fetch_users",{processor:b=>b===void 0?{valid:!0,value:void 0}:ht(b)?{valid:!0,value:b}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}}),g.on("ScriptsLoaded",(()=>{h("directionality",{processor:"string",default:ir.isRtl()?"rtl":void 0}),h("placeholder",{processor:"string",default:HN.getAttrib(g.getElement(),"placeholder")})})),h("lists_indent_on_tab",{processor:"boolean",default:!0}),h("list_max_depth",{processor:b=>{const v=x(b);if(v){if(b<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:b,valid:v}}return{valid:!1,message:"Must be a number"}}})})(r),this.userLookup=(g=>{const h=new Map,b=new Map,v=N=>_.from(h.get(N)),y=(N,D)=>_.from(b.get(N)).each((({reject:A})=>{A(D),b.delete(N)})),E=cT(g);return Object.freeze({userId:E,fetchUsers:N=>{const D=dT(g);if(!Array.isArray(N))return{};if(!D)return kn(N,(R=>Promise.resolve({id:R,name:R,avatar:_h(R)})));const A=So(Pe(N,(R=>!v(R).isSome())));return K(A,(R=>{const P=new Promise(((L,j)=>{b.set(R,{resolve:L,reject:j})}));((L,j)=>{h.set(j,L)})(P,R)})),A.length>0&&D(A).then(LP).then((R=>{const P=new Set(qe(R,(L=>L.id)));K(R,(L=>((j,W)=>_.from(b.get(j)).each((({resolve:B})=>{B(W),b.delete(j)})))(L.id,L))),K(A,(L=>{P.has(L)||y(L,new Error(`User ${L} not found`))}))})).catch((R=>{K(A,(P=>y(P,R instanceof Error?R:new Error("Network error"))))})),Qt(N,((R,P)=>(R[P]=v(P).getOr(Promise.resolve({id:P,name:P,avatar:_h(P)})),R)),{})}})})(this);const a=this.options.get;a("deprecation_warnings")&&((g,h)=>{((b,v)=>{const y=uR(b),E=fR(v),N=E.length>0,D=y.length>0,A=v.theme==="mobile";if(N||D||A){const P=A?`

Themes:
- mobile`:"",L=N?`

Plugins:
- ${E.join(`
- `)}`:"",j=D?`

Options:
- ${y.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+P+L+j)}})(g,h),((b,v)=>{const y=mR(b),E=pR(v),N=E.length>0,D=y.length>0;if(N||D){const R=N?`

Plugins:
- ${E.map(gR).join(`
- `)}`:"",P=D?`

Options:
- ${y.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+R+P)}})(g,h)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=nf(r);c&&(Tr.ScriptLoader._setReferrerPolicy(c),St.DOM.styleSheetLoader._setReferrerPolicy(c)),Tr.ScriptLoader._setCrossOrigin((g=>of(r)(g,"script"))),St.DOM.styleSheetLoader._setCrossOrigin((g=>of(r)(g,"stylesheet")));const d=jb(r);te(d)&&St.DOM.styleSheetLoader._setContentCssCors(d),jn.languageLoad=a("language_load"),jn.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new Qo(Ab(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=sf(r),this.hasVisual=RA(r),this.shortcuts=new E_(this),this.editorCommands=new h_(this),GP(this);const m=a("cache_suffix");m&&(p.cacheSuffix=m.replace(/^[\?\&]+/,"")),this.ui={registry:rL(),styleSheetLoader:void 0,show:Ee,hide:Ee,setEnabled:Ee,isEnabled:zt},this.mode=tL(r),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),o.dispatch("SetupEditor",{editor:this});const f=BA(r);ht(f)&&f.call(r,r)}render(){(t=>{const n=t.id;ir.setCode(Bb(t));const o=()=>{Ma.unbind(window,"ready",o),t.render()};if(!pa.Event.domLoaded)return void Ma.bind(window,"ready",o);if(!t.getElement())return;const r=S.fromDom(t.getElement()),s=Zt(r);t.on("remove",(()=>{hr(r.dom.attributes,(i=>ot(r,i.name))),Ae(r,s)})),t.ui.styleSheetLoader=((i,l)=>f0.forElement(i,{contentCssCors:jb(l),referrerPolicy:nf(l)}))(r,t),sf(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const a=t.getElement().form||Ma.getParent(n,"form");a&&(t.formElement=a,wA(t)&&!gm(t.getElement())&&(Ma.insertAfter(Ma.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=i=>{t.dispatch(i.type,i)},Ma.bind(a,"submit reset",t.formEventDelegate),t.on("reset",(()=>{t.resetContent()})),!SA(t)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),a._mceOldSubmit(a)))),t.windowManager=yx(t),t.notificationManager=vx(t),(i=>i.options.get("encoding")==="xml")(t)&&t.on("GetContent",(i=>{i.save&&(i.content=Ma.encode(i.content))})),EA(t)&&t.on("submit",(()=>{t.initialized&&t.save()})),kA(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),OP(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return _i(this)}translate(t){return ir.translate(t)}getParam(t,n,o){const r=this.options;return r.isRegistered(t)||(te(o)?r.register(t,{processor:o,default:n}):r.register(t,{processor:zt,default:n})),r.isSet(t)||jt(n)?r.get(t):n}hasPlugin(t,n){return!(!Se(Bl(this),t)||n&&Ri.get(t)===void 0)}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,o){this.editorCommands.addCommand(t,n,o)}addQueryStateHandler(t,n,o){this.editorCommands.addQueryStateHandler(t,n,o)}addQueryValueHandler(t,n,o){this.editorCommands.addQueryValueHandler(t,n,o)}addShortcut(t,n,o,r){this.shortcuts.add(t,n,o,r)}execCommand(t,n,o,r){return this.editorCommands.execCommand(t,n,o,r)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Fa.show(t.getContainer()),Fa.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Fa.hide(t.getContainer()),Fa.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,o=n.getElement();if(!n.removed&&o){const r={...t,load:!0},s=gm(o)?o.value:o.innerHTML;n.setContent(s,r),r.no_events||n.dispatch("LoadContent",{...r,element:o})}}save(t={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...t,save:!0,element:o};let s=n.getContent(r);const a={...r,content:s};if(a.no_events||n.dispatch("SaveContent",a),a.format==="raw"&&n.dispatch("RawSaveContent",a),s=a.content,gm(o))o.value=s;else{!t.is_removing&&n.inline||(o.innerHTML=s);const i=Fa.getParent(n.id,"form");i&&sL(i.elements,(l=>l.name!==n.id||(l.value=s,!1)))}return a.element=r.element=o=null,a.set_dirty!==!1&&n.setDirty(!1),s}setContent(t,n){Kp(this,t,n)}getContent(t){return((n,o={})=>{const r=((s,a)=>({...s,format:a,get:!0,getInner:!0}))(o,o.format?o.format:"html");return I1(n,r).fold(bt,(s=>{const a=((i,l)=>Vp(i).editor.getContent(l))(n,s);return F1(n,a,s)}))})(this,t)}insertContent(t,n){n&&(t=k_({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?Kp(this,this.startContent,{initial:!0,format:"raw"}):Kp(this,t,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Fa.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Fa.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const o=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:o?.body)!==null&&n!==void 0?n:null}convertURL(t,n,o){const r=this,s=r.options.get,a=LA(r);if(ht(a))return a.call(r,t,o,!0,n);if(!s("convert_urls")||o==="link"||Ue(o)&&o.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const i=new Qo(t);return i.protocol!=="http"&&i.protocol!=="https"&&i.protocol!==""?t:s("relative_urls")?r.documentBaseURI.toRelative(t):t=r.documentBaseURI.toAbsolute(t,s("remove_script_host"))}addVisual(t){((n,o)=>{((r,s)=>{cn(r).editor.addVisual(s)})(n,o)})(this,t)}setEditableRoot(t){((n,o)=>{n._editableRoot!==o&&(n._editableRoot=o,ts(n)||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),((r,s)=>{r.dispatch("EditableRootStateChange",{state:s})})(n,o))})(this,t)}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:o}=t,r=t.getBody(),s=t.getElement();r&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&te(s?.nextSibling)&&ou.remove(s.nextSibling),(a=>{a.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&r&&(a=>{ou.setStyle(a.id,"display",a.orgDisplay)})(t),(a=>{a.dispatch("detach")})(t),ou.remove(t.getContainer()),ru(n),ru(o),t.destroy()}})(this)}destroy(t){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),ru(r),ru(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),ou.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;if(l){const c=l.dom;i.selection=l.win=l.dom=c.doc=null}})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Xi=St.DOM,Xu=k.each;let Yu,__=!1,eo=[];const Gu=e=>{const t=e.type;Xu(Ms.get(),(n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}}))},N_=e=>{if(e!==__){const t=St.DOM;e?(t.bind(window,"resize",Gu),t.bind(window,"scroll",Gu)):(t.unbind(window,"resize",Gu),t.unbind(window,"scroll",Gu)),__=e}},A_=e=>{const t=eo;return eo=Pe(eo,(n=>e!==n)),Ms.activeEditor===e&&(Ms.activeEditor=eo.length>0?eo[0]:null),Ms.focusedEditor===e&&(Ms.focusedEditor=null),t.length!==eo.length},aL=document.compatMode!=="CSS1Compat",Ms={...Dh,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:_c(),majorVersion:"8",minorVersion:"0.2",releaseDate:"2025-08-14",i18n:ir,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",o=Qo.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(l==="")continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){c.indexOf(".min")!==-1&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}var s;e.baseURL=new Qo(o).toAbsolute(t),e.documentBaseURL=o,e.baseURI=new Qo(e.baseURL),e.suffix=n,(s=e).on("AddEditor",Ce(FT,s)),s.on("RemoveEditor",Ce(jT,s)),K(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],(a=>Object.defineProperty(e,a,{writable:!1,configurable:!1,enumerable:!0})))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const o=e.plugin_base_urls;o!==void 0&&Ct(o,((r,s)=>{jn.PluginManager.urls[s]=r}))},init(e){const t=this;let n;const o=k.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;Xi.unbind(window,"ready",s),(()=>{const c=e.onpageload;c&&c.apply(t,[])})(),l=So((c=>p.browser.isIE()||p.browser.isEdge()?(iu("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):aL?(iu("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):we(c.selector)?Xi.select(c.selector):te(c.target)?[c.target]:[])(e)),k.each(l,(c=>{var d;(d=t.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(A_(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)})),l=k.grep(l,(c=>!t.get(c.id))),l.length===0?r([]):Xu(l,(c=>{((d,m)=>d.inline&&m.tagName.toLowerCase()in o)(e,c)?iu("Could not initialize inline editor on invalid inline target element",c):((d,m,f)=>{const g=new Ku(d,m,t);i.push(g),g.on("init",(()=>{++a===l.length&&r(i)})),g.targetElm=g.targetElm||f,g.render()})((d=>{let m=d.id;return m||(m=Ot(d,"name").filter((f=>!Xi.get(f))).getOrThunk(Xi.uniqueId),d.setAttribute("id",m)),m})(c),e,c)}))};return Xi.bind(window,"ready",s),new Promise((a=>{n?a(n):r=i=>{a(i)}}))},get(e){return arguments.length===0?eo.slice(0):we(e)?$t(eo,(t=>t.id===e)).getOr(null):x(e)&&eo[e]?eo[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&eo.push(e),N_(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Yu||(Yu=o=>{const r=t.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",Yu))),e},createEditor(e,t){return this.add(new Ku(e,t,this))},remove(e){const t=this;let n;if(e){if(!we(e))return n=e,Ye(t.get(n.id))?null:(A_(n)&&t.dispatch("RemoveEditor",{editor:n}),eo.length===0&&window.removeEventListener("beforeunload",Yu),n.remove(),N_(eo.length>0),n);Xu(Xi.select(e),(o=>{n=t.get(o.id),n&&t.remove(n)}))}else for(let o=eo.length-1;o>=0;o--)t.remove(eo[o])},execCommand(e,t,n){var o;const r=this,s=Ue(n)?(o=n.id)!==null&&o!==void 0?o:n.index:n;switch(e){case"mceAddEditor":if(!r.get(s)){const a=n.options;new Ku(s,a,r).render()}return!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:()=>{Xu(eo,(e=>{e.save()}))},addI18n:(e,t)=>{ir.add(e,t)},translate:e=>ir.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Qo(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Qo(this.baseURL)},_addLicenseKeyManager:e=>Gp.add(e)};Ms.setup();const iL=(()=>{const e=qo();return{FakeClipboardItem:t=>({items:t,types:fn(t),getType:n=>Ot(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),T_=Math.min,Yi=Math.max,Qu=Math.round,D_=(e,t,n)=>{let o=t.x,r=t.y;const s=e.w,a=e.h,i=t.w,l=t.h,c=(n||"").split("");return c[0]==="b"&&(r+=l),c[1]==="r"&&(o+=i),c[0]==="c"&&(r+=Qu(l/2)),c[1]==="c"&&(o+=Qu(i/2)),c[3]==="b"&&(r-=a),c[4]==="r"&&(o-=s),c[3]==="c"&&(r-=Qu(a/2)),c[4]==="c"&&(o-=Qu(s/2)),Gi(o,r,s,a)},Gi=(e,t,n,o)=>({x:e,y:t,w:n,h:o}),lL={inflate:(e,t,n)=>Gi(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:D_,findBestRelativePosition:(e,t,n,o)=>{for(let r=0;r<o.length;r++){const s=D_(e,t,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(e,t)=>{const n=Yi(e.x,t.x),o=Yi(e.y,t.y),r=T_(e.x+e.w,t.x+t.w),s=T_(e.y+e.h,t.y+t.h);return r-n<0||s-o<0?null:Gi(n,o,r-n,s-o)},clamp:(e,t,n)=>{let o=e.x,r=e.y,s=e.x+e.w,a=e.y+e.h;const i=t.x+t.w,l=t.y+t.h,c=Yi(0,t.x-o),d=Yi(0,t.y-r),m=Yi(0,s-i),f=Yi(0,a-l);return o+=c,r+=d,n&&(s+=c,a+=d,o-=m,r-=f),s-=m,a-=f,Gi(o,r,s-o,a-r)},create:Gi,fromClientRect:e=>Gi(e.left,e.top,e.width,e.height)},cL=(()=>{const e={},t={},n={};return{load:(o,r)=>{const s=`Script at URL "${r}" failed to load`,a=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(e[o]!==void 0)return e[o];{const i=new Promise(((l,c)=>{const d=((m,f,g=1e3)=>{let h=!1,b=null;const v=N=>(...D)=>{h||(h=!0,b!==null&&(window.clearTimeout(b),b=null),N.apply(null,D))},y=v(m),E=v(f);return{start:(...N)=>{h||b!==null||(b=window.setTimeout((()=>E.apply(null,N)),g))},resolve:y,reject:E}})(l,c);t[o]=d.resolve,Tr.ScriptLoader.loadScript(r).then((()=>d.start(a)),(()=>d.reject(s)))}));return e[o]=i,i}},add:(o,r)=>{t[o]!==void 0&&(t[o](r),delete t[o]),e[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete e[o],delete n[o]}}})();let Sc;try{const e="__storage_test__";Sc=window.localStorage,Sc.setItem(e,e),Sc.removeItem(e)}catch{Sc=(()=>{let t={},n=[];const o={getItem:r=>t[r]||null,setItem:(r,s)=>{n.push(r),t[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter((s=>s===r)),delete t[r]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const dL={geom:{Rect:lL},util:{Delay:Po,Tools:k,VK:me,URI:Qo,EventDispatcher:Th,Observable:Dh,I18n:ir,LocalStorage:Sc,ImageUploader:e=>{const t=Ox(),n=Px(e,t);return{upload:(o,r=!0)=>n.upload(o,r?Bx(e):void 0)}}},dom:{EventUtils:pa,TreeWalker:ln,TextSeeker:ha,DOMUtils:St,ScriptLoader:Tr,RangeUtils:Pr,Serializer:gx,StyleSheetLoader:m0,ControlSelection:Gv,BookmarkManager:Ei,Selection:px,Event:pa.Event},html:{Styles:Pm,Entities:fa,Node:Rn,Schema:Cs,DomParser:Ti,Writer:Sy,Serializer:As},Env:p,AddOnManager:jn,Annotator:zv,Formatter:Ix,UndoManager:jx,EditorCommands:h_,WindowManager:yx,NotificationManager:vx,EditorObservable:y_,Shortcuts:E_,Editor:Ku,FocusManager:Wv,EditorManager:Ms,DOM:St.DOM,ScriptLoader:Tr.ScriptLoader,PluginManager:Ri,ThemeManager:Aa,ModelManager:Di,IconManager:su,Resource:cL,FakeClipboard:iL,trim:k.trim,isArray:k.isArray,is:k.is,toArray:k.toArray,makeMap:k.makeMap,each:k.each,map:k.map,grep:k.grep,inArray:k.inArray,extend:k.extend,walk:k.walk,resolve:k.resolve,explode:k.explode,_addCacheSuffix:k._addCacheSuffix},R_=k.extend(Ms,dL);(e=>{window.tinymce=e,window.tinyMCE=e})(R_),(e=>{if(typeof module=="object")try{module.exports=e}catch{}})(R_)})();/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */(function(ve,Ke){"use strict";typeof module=="object"&&typeof module.exports=="object"?module.exports=ve.document?Ke(ve,!0):function(Xe){if(!Xe.document)throw new Error("jQuery requires a window with a document");return Ke(Xe)}:Ke(ve)})(typeof window<"u"?window:this,function(ve,Ke){"use strict";var Xe=[],$e=Object.getPrototypeOf,it=Xe.slice,Gt=Xe.flat?function(u){return Xe.flat.call(u)}:function(u){return Xe.concat.apply([],u)},Bn=Xe.push,rn=Xe.indexOf,Kn={},Co=Kn.toString,Pn=Kn.hasOwnProperty,xo=Pn.toString,we=xo.call(Object),Ue={},Be=function(u){return typeof u=="function"&&typeof u.nodeType!="number"&&typeof u.item!="function"},se=function(u){return u!=null&&u===u.window},Ye=ve.document,Cn={type:!0,src:!0,nonce:!0,noModule:!0};function jt(u,p,C){var w,T,k=(C=C||Ye).createElement("script");if(k.text=u,p)for(w in Cn)(T=p[w]||p.getAttribute&&p.getAttribute(w))&&k.setAttribute(w,T);C.head.appendChild(k).parentNode.removeChild(k)}function kt(u){return u==null?u+"":typeof u=="object"||typeof u=="function"?Kn[Co.call(u)]||"object":typeof u}var te="3.7.1",ht=/HTML$/i,x=function(u,p){return new x.fn.init(u,p)};function Ln(u){var p=!!u&&"length"in u&&u.length,C=kt(u);return!Be(u)&&!se(u)&&(C==="array"||p===0||typeof p=="number"&&0<p&&p-1 in u)}function Ee(u,p){return u.nodeName&&u.nodeName.toLowerCase()===p.toLowerCase()}x.fn=x.prototype={jquery:te,constructor:x,length:0,toArray:function(){return it.call(this)},get:function(u){return u==null?it.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var p=x.merge(this.constructor(),u);return p.prevObject=this,p},each:function(u){return x.each(this,u)},map:function(u){return this.pushStack(x.map(this,function(p,C){return u.call(p,C,p)}))},slice:function(){return this.pushStack(it.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(u,p){return(p+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(u,p){return p%2}))},eq:function(u){var p=this.length,C=+u+(u<0?p:0);return this.pushStack(0<=C&&C<p?[this[C]]:[])},end:function(){return this.prevObject||this.constructor()},push:Bn,sort:Xe.sort,splice:Xe.splice},x.extend=x.fn.extend=function(){var u,p,C,w,T,k,O=arguments[0]||{},S=1,U=arguments.length,V=!1;for(typeof O=="boolean"&&(V=O,O=arguments[S]||{},S++),typeof O=="object"||Be(O)||(O={}),S===U&&(O=this,S--);S<U;S++)if((u=arguments[S])!=null)for(p in u)w=u[p],p!=="__proto__"&&O!==w&&(V&&w&&(x.isPlainObject(w)||(T=Array.isArray(w)))?(C=O[p],k=T&&!Array.isArray(C)?[]:T||x.isPlainObject(C)?C:{},T=!1,O[p]=x.extend(V,k,w)):w!==void 0&&(O[p]=w));return O},x.extend({expando:"jQuery"+(te+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var p,C;return!(!u||Co.call(u)!=="[object Object]")&&(!(p=$e(u))||typeof(C=Pn.call(p,"constructor")&&p.constructor)=="function"&&xo.call(C)===we)},isEmptyObject:function(u){var p;for(p in u)return!1;return!0},globalEval:function(u,p,C){jt(u,{nonce:p&&p.nonce},C)},each:function(u,p){var C,w=0;if(Ln(u))for(C=u.length;w<C&&p.call(u[w],w,u[w])!==!1;w++);else for(w in u)if(p.call(u[w],w,u[w])===!1)break;return u},text:function(u){var p,C="",w=0,T=u.nodeType;if(!T)for(;p=u[w++];)C+=x.text(p);return T===1||T===11?u.textContent:T===9?u.documentElement.textContent:T===3||T===4?u.nodeValue:C},makeArray:function(u,p){var C=p||[];return u!=null&&(Ln(Object(u))?x.merge(C,typeof u=="string"?[u]:u):Bn.call(C,u)),C},inArray:function(u,p,C){return p==null?-1:rn.call(p,u,C)},isXMLDoc:function(u){var p=u&&u.namespaceURI,C=u&&(u.ownerDocument||u).documentElement;return!ht.test(p||C&&C.nodeName||"HTML")},merge:function(u,p){for(var C=+p.length,w=0,T=u.length;w<C;w++)u[T++]=p[w];return u.length=T,u},grep:function(u,p,C){for(var w=[],T=0,k=u.length,O=!C;T<k;T++)!p(u[T],T)!==O&&w.push(u[T]);return w},map:function(u,p,C){var w,T,k=0,O=[];if(Ln(u))for(w=u.length;k<w;k++)(T=p(u[k],k,C))!=null&&O.push(T);else for(k in u)(T=p(u[k],k,C))!=null&&O.push(T);return Gt(O)},guid:1,support:Ue}),typeof Symbol=="function"&&(x.fn[Symbol.iterator]=Xe[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,p){Kn["[object "+p+"]"]=p.toLowerCase()});var Mn=Xe.pop,Us=Xe.sort,ie=Xe.splice,bt="[\\x20\\t\\r\\n\\f]",Jo=new RegExp("^"+bt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+bt+"+$","g");x.contains=function(u,p){var C=p&&p.parentNode;return u===C||!(!C||C.nodeType!==1||!(u.contains?u.contains(C):u.compareDocumentPosition&&16&u.compareDocumentPosition(C)))};var Ce=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function $o(u,p){return p?u==="\0"?"\uFFFD":u.slice(0,-1)+"\\"+u.charCodeAt(u.length-1).toString(16)+" ":"\\"+u}x.escapeSelector=function(u){return(u+"").replace(Ce,$o)};var po=Ye,pr=Bn;(function(){var u,p,C,w,T,k,O,S,U,V,ee=pr,ae=x.expando,Z=0,de=0,pe=gt(),Ze=gt(),ut=gt(),nn=gt(),Le=function(M,q){return M===q&&(T=!0),0},Ao="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",so="(?:\\\\[\\da-fA-F]{1,6}"+bt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",xt="\\["+bt+"*("+so+")(?:"+bt+"*([*^$|!~]?=)"+bt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+so+"))|)"+bt+"*\\]",ao=":("+so+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+xt+")*)|.*)\\)|)",nt=new RegExp(bt+"+","g"),wt=new RegExp("^"+bt+"*,"+bt+"*"),ta=new RegExp("^"+bt+"*([>+~]|"+bt+")"+bt+"*"),ul=new RegExp(bt+"|>"),wn=new RegExp(ao),ps=new RegExp("^"+so+"$"),_n={ID:new RegExp("^#("+so+")"),CLASS:new RegExp("^\\.("+so+")"),TAG:new RegExp("^("+so+"|[*])"),ATTR:new RegExp("^"+xt),PSEUDO:new RegExp("^"+ao),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+bt+"*(even|odd|(([+-]|)(\\d*)n|)"+bt+"*(?:([+-]|)"+bt+"*(\\d+)|))"+bt+"*\\)|)","i"),bool:new RegExp("^(?:"+Ao+")$","i"),needsContext:new RegExp("^"+bt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+bt+"*((?:-\\d)?\\d*)"+bt+"*\\)|)(?=[^-]|$)","i")},bo=/^(?:input|select|textarea|button)$/i,bn=/^h\d$/i,Nn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,on=/[+~]/,an=new RegExp("\\\\[\\da-fA-F]{1,6}"+bt+"?|\\\\([^\\r\\n\\f])","g"),Xt=function(M,q){var X="0x"+M.slice(1)-65536;return q||(X<0?String.fromCharCode(X+65536):String.fromCharCode(X>>10|55296,1023&X|56320))},Gn=function(){Er()},In=Ja(function(M){return M.disabled===!0&&Ee(M,"fieldset")},{dir:"parentNode",next:"legend"});try{ee.apply(Xe=it.call(po.childNodes),po.childNodes),Xe[po.childNodes.length].nodeType}catch{ee={apply:function(q,X){pr.apply(q,it.call(X))},call:function(q){pr.apply(q,it.call(arguments,1))}}}function st(M,q,X,ne){var ce,Re,He,Te,Ae,ft,at,pt=q&&q.ownerDocument,ot=q?q.nodeType:9;if(X=X||[],typeof M!="string"||!M||ot!==1&&ot!==9&&ot!==11)return X;if(!ne&&(Er(q),q=q||k,S)){if(ot!==11&&(Ae=Nn.exec(M)))if(ce=Ae[1]){if(ot===9){if(!(He=q.getElementById(ce)))return X;if(He.id===ce)return ee.call(X,He),X}else if(pt&&(He=pt.getElementById(ce))&&st.contains(q,He)&&He.id===ce)return ee.call(X,He),X}else{if(Ae[2])return ee.apply(X,q.getElementsByTagName(M)),X;if((ce=Ae[3])&&q.getElementsByClassName)return ee.apply(X,q.getElementsByClassName(ce)),X}if(!(nn[M+" "]||U&&U.test(M))){if(at=M,pt=q,ot===1&&(ul.test(M)||ta.test(M))){for((pt=on.test(M)&&na(q.parentNode)||q)==q&&Ue.scope||((Te=q.getAttribute("id"))?Te=x.escapeSelector(Te):q.setAttribute("id",Te=ae)),Re=(ft=oa(M)).length;Re--;)ft[Re]=(Te?"#"+Te:":scope")+" "+Qa(ft[Re]);at=ft.join(",")}try{return ee.apply(X,pt.querySelectorAll(at)),X}catch{nn(M,!0)}finally{Te===ae&&q.removeAttribute("id")}}}return dn(M.replace(Jo,"$1"),q,X,ne)}function gt(){var M=[];return function q(X,ne){return M.push(X+" ")>p.cacheLength&&delete q[M.shift()],q[X+" "]=ne}}function Vt(M){return M[ae]=!0,M}function Bt(M){var q=k.createElement("fieldset");try{return!!M(q)}catch{return!1}finally{q.parentNode&&q.parentNode.removeChild(q),q=null}}function Wn(M){return function(q){return Ee(q,"input")&&q.type===M}}function Sr(M){return function(q){return(Ee(q,"input")||Ee(q,"button"))&&q.type===M}}function gs(M){return function(q){return"form"in q?q.parentNode&&q.disabled===!1?"label"in q?"label"in q.parentNode?q.parentNode.disabled===M:q.disabled===M:q.isDisabled===M||q.isDisabled!==!M&&In(q)===M:q.disabled===M:"label"in q&&q.disabled===M}}function Qn(M){return Vt(function(q){return q=+q,Vt(function(X,ne){for(var ce,Re=M([],X.length,q),He=Re.length;He--;)X[ce=Re[He]]&&(X[ce]=!(ne[ce]=X[ce]))})})}function na(M){return M&&typeof M.getElementsByTagName<"u"&&M}function Er(M){var q,X=M?M.ownerDocument||M:po;return X!=k&&X.nodeType===9&&X.documentElement&&(O=(k=X).documentElement,S=!x.isXMLDoc(k),V=O.matches||O.webkitMatchesSelector||O.msMatchesSelector,O.msMatchesSelector&&po!=k&&(q=k.defaultView)&&q.top!==q&&q.addEventListener("unload",Gn),Ue.getById=Bt(function(ne){return O.appendChild(ne).id=x.expando,!k.getElementsByName||!k.getElementsByName(x.expando).length}),Ue.disconnectedMatch=Bt(function(ne){return V.call(ne,"*")}),Ue.scope=Bt(function(){return k.querySelectorAll(":scope")}),Ue.cssHas=Bt(function(){try{return k.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Ue.getById?(p.filter.ID=function(ne){var ce=ne.replace(an,Xt);return function(Re){return Re.getAttribute("id")===ce}},p.find.ID=function(ne,ce){if(typeof ce.getElementById<"u"&&S){var Re=ce.getElementById(ne);return Re?[Re]:[]}}):(p.filter.ID=function(ne){var ce=ne.replace(an,Xt);return function(Re){var He=typeof Re.getAttributeNode<"u"&&Re.getAttributeNode("id");return He&&He.value===ce}},p.find.ID=function(ne,ce){if(typeof ce.getElementById<"u"&&S){var Re,He,Te,Ae=ce.getElementById(ne);if(Ae){if((Re=Ae.getAttributeNode("id"))&&Re.value===ne)return[Ae];for(Te=ce.getElementsByName(ne),He=0;Ae=Te[He++];)if((Re=Ae.getAttributeNode("id"))&&Re.value===ne)return[Ae]}return[]}}),p.find.TAG=function(ne,ce){return typeof ce.getElementsByTagName<"u"?ce.getElementsByTagName(ne):ce.querySelectorAll(ne)},p.find.CLASS=function(ne,ce){if(typeof ce.getElementsByClassName<"u"&&S)return ce.getElementsByClassName(ne)},U=[],Bt(function(ne){var ce;O.appendChild(ne).innerHTML="<a id='"+ae+"' href='' disabled='disabled'></a><select id='"+ae+"-\r\\' disabled='disabled'><option selected=''></option></select>",ne.querySelectorAll("[selected]").length||U.push("\\["+bt+"*(?:value|"+Ao+")"),ne.querySelectorAll("[id~="+ae+"-]").length||U.push("~="),ne.querySelectorAll("a#"+ae+"+*").length||U.push(".#.+[+~]"),ne.querySelectorAll(":checked").length||U.push(":checked"),(ce=k.createElement("input")).setAttribute("type","hidden"),ne.appendChild(ce).setAttribute("name","D"),O.appendChild(ne).disabled=!0,ne.querySelectorAll(":disabled").length!==2&&U.push(":enabled",":disabled"),(ce=k.createElement("input")).setAttribute("name",""),ne.appendChild(ce),ne.querySelectorAll("[name='']").length||U.push("\\["+bt+"*name"+bt+"*="+bt+`*(?:''|"")`)}),Ue.cssHas||U.push(":has"),U=U.length&&new RegExp(U.join("|")),Le=function(ne,ce){if(ne===ce)return T=!0,0;var Re=!ne.compareDocumentPosition-!ce.compareDocumentPosition;return Re||(1&(Re=(ne.ownerDocument||ne)==(ce.ownerDocument||ce)?ne.compareDocumentPosition(ce):1)||!Ue.sortDetached&&ce.compareDocumentPosition(ne)===Re?ne===k||ne.ownerDocument==po&&st.contains(po,ne)?-1:ce===k||ce.ownerDocument==po&&st.contains(po,ce)?1:w?rn.call(w,ne)-rn.call(w,ce):0:4&Re?-1:1)}),k}for(u in st.matches=function(M,q){return st(M,null,null,q)},st.matchesSelector=function(M,q){if(Er(M),S&&!nn[q+" "]&&(!U||!U.test(q)))try{var X=V.call(M,q);if(X||Ue.disconnectedMatch||M.document&&M.document.nodeType!==11)return X}catch{nn(q,!0)}return 0<st(q,k,null,[M]).length},st.contains=function(M,q){return(M.ownerDocument||M)!=k&&Er(M),x.contains(M,q)},st.attr=function(M,q){(M.ownerDocument||M)!=k&&Er(M);var X=p.attrHandle[q.toLowerCase()],ne=X&&Pn.call(p.attrHandle,q.toLowerCase())?X(M,q,!S):void 0;return ne!==void 0?ne:M.getAttribute(q)},st.error=function(M){throw new Error("Syntax error, unrecognized expression: "+M)},x.uniqueSort=function(M){var q,X=[],ne=0,ce=0;if(T=!Ue.sortStable,w=!Ue.sortStable&&it.call(M,0),Us.call(M,Le),T){for(;q=M[ce++];)q===M[ce]&&(ne=X.push(ce));for(;ne--;)ie.call(M,X[ne],1)}return w=null,M},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(it.apply(this)))},(p=x.expr={cacheLength:50,createPseudo:Vt,match:_n,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(M){return M[1]=M[1].replace(an,Xt),M[3]=(M[3]||M[4]||M[5]||"").replace(an,Xt),M[2]==="~="&&(M[3]=" "+M[3]+" "),M.slice(0,4)},CHILD:function(M){return M[1]=M[1].toLowerCase(),M[1].slice(0,3)==="nth"?(M[3]||st.error(M[0]),M[4]=+(M[4]?M[5]+(M[6]||1):2*(M[3]==="even"||M[3]==="odd")),M[5]=+(M[7]+M[8]||M[3]==="odd")):M[3]&&st.error(M[0]),M},PSEUDO:function(M){var q,X=!M[6]&&M[2];return _n.CHILD.test(M[0])?null:(M[3]?M[2]=M[4]||M[5]||"":X&&wn.test(X)&&(q=oa(X,!0))&&(q=X.indexOf(")",X.length-q)-X.length)&&(M[0]=M[0].slice(0,q),M[2]=X.slice(0,q)),M.slice(0,3))}},filter:{TAG:function(M){var q=M.replace(an,Xt).toLowerCase();return M==="*"?function(){return!0}:function(X){return Ee(X,q)}},CLASS:function(M){var q=pe[M+" "];return q||(q=new RegExp("(^|"+bt+")"+M+"("+bt+"|$)"))&&pe(M,function(X){return q.test(typeof X.className=="string"&&X.className||typeof X.getAttribute<"u"&&X.getAttribute("class")||"")})},ATTR:function(M,q,X){return function(ne){var ce=st.attr(ne,M);return ce==null?q==="!=":!q||(ce+="",q==="="?ce===X:q==="!="?ce!==X:q==="^="?X&&ce.indexOf(X)===0:q==="*="?X&&-1<ce.indexOf(X):q==="$="?X&&ce.slice(-X.length)===X:q==="~="?-1<(" "+ce.replace(nt," ")+" ").indexOf(X):q==="|="&&(ce===X||ce.slice(0,X.length+1)===X+"-"))}},CHILD:function(M,q,X,ne,ce){var Re=M.slice(0,3)!=="nth",He=M.slice(-4)!=="last",Te=q==="of-type";return ne===1&&ce===0?function(Ae){return!!Ae.parentNode}:function(Ae,ft,at){var pt,ot,mt,Zt,en,ct=Re!==He?"nextSibling":"previousSibling",Yt=Ae.parentNode,Jn=Te&&Ae.nodeName.toLowerCase(),vn=!at&&!Te,Ut=!1;if(Yt){if(Re){for(;ct;){for(mt=Ae;mt=mt[ct];)if(Te?Ee(mt,Jn):mt.nodeType===1)return!1;en=ct=M==="only"&&!en&&"nextSibling"}return!0}if(en=[He?Yt.firstChild:Yt.lastChild],He&&vn){for(Ut=(Zt=(pt=(ot=Yt[ae]||(Yt[ae]={}))[M]||[])[0]===Z&&pt[1])&&pt[2],mt=Zt&&Yt.childNodes[Zt];mt=++Zt&&mt&&mt[ct]||(Ut=Zt=0)||en.pop();)if(mt.nodeType===1&&++Ut&&mt===Ae){ot[M]=[Z,Zt,Ut];break}}else if(vn&&(Ut=Zt=(pt=(ot=Ae[ae]||(Ae[ae]={}))[M]||[])[0]===Z&&pt[1]),Ut===!1)for(;(mt=++Zt&&mt&&mt[ct]||(Ut=Zt=0)||en.pop())&&!((Te?Ee(mt,Jn):mt.nodeType===1)&&++Ut&&(vn&&((ot=mt[ae]||(mt[ae]={}))[M]=[Z,Ut]),mt===Ae)););return(Ut-=ce)===ne||Ut%ne==0&&0<=Ut/ne}}},PSEUDO:function(M,q){var X,ne=p.pseudos[M]||p.setFilters[M.toLowerCase()]||st.error("unsupported pseudo: "+M);return ne[ae]?ne(q):1<ne.length?(X=[M,M,"",q],p.setFilters.hasOwnProperty(M.toLowerCase())?Vt(function(ce,Re){for(var He,Te=ne(ce,q),Ae=Te.length;Ae--;)ce[He=rn.call(ce,Te[Ae])]=!(Re[He]=Te[Ae])}):function(ce){return ne(ce,0,X)}):ne}},pseudos:{not:Vt(function(M){var q=[],X=[],ne=kr(M.replace(Jo,"$1"));return ne[ae]?Vt(function(ce,Re,He,Te){for(var Ae,ft=ne(ce,null,Te,[]),at=ce.length;at--;)(Ae=ft[at])&&(ce[at]=!(Re[at]=Ae))}):function(ce,Re,He){return q[0]=ce,ne(q,null,He,X),q[0]=null,!X.pop()}}),has:Vt(function(M){return function(q){return 0<st(M,q).length}}),contains:Vt(function(M){return M=M.replace(an,Xt),function(q){return-1<(q.textContent||x.text(q)).indexOf(M)}}),lang:Vt(function(M){return ps.test(M||"")||st.error("unsupported lang: "+M),M=M.replace(an,Xt).toLowerCase(),function(q){var X;do if(X=S?q.lang:q.getAttribute("xml:lang")||q.getAttribute("lang"))return(X=X.toLowerCase())===M||X.indexOf(M+"-")===0;while((q=q.parentNode)&&q.nodeType===1);return!1}}),target:function(M){var q=ve.location&&ve.location.hash;return q&&q.slice(1)===M.id},root:function(M){return M===O},focus:function(M){return M===(function(){try{return k.activeElement}catch{}})()&&k.hasFocus()&&!!(M.type||M.href||~M.tabIndex)},enabled:gs(!1),disabled:gs(!0),checked:function(M){return Ee(M,"input")&&!!M.checked||Ee(M,"option")&&!!M.selected},selected:function(M){return M.parentNode&&M.parentNode.selectedIndex,M.selected===!0},empty:function(M){for(M=M.firstChild;M;M=M.nextSibling)if(M.nodeType<6)return!1;return!0},parent:function(M){return!p.pseudos.empty(M)},header:function(M){return bn.test(M.nodeName)},input:function(M){return bo.test(M.nodeName)},button:function(M){return Ee(M,"input")&&M.type==="button"||Ee(M,"button")},text:function(M){var q;return Ee(M,"input")&&M.type==="text"&&((q=M.getAttribute("type"))==null||q.toLowerCase()==="text")},first:Qn(function(){return[0]}),last:Qn(function(M,q){return[q-1]}),eq:Qn(function(M,q,X){return[X<0?X+q:X]}),even:Qn(function(M,q){for(var X=0;X<q;X+=2)M.push(X);return M}),odd:Qn(function(M,q){for(var X=1;X<q;X+=2)M.push(X);return M}),lt:Qn(function(M,q,X){var ne;for(ne=X<0?X+q:q<X?q:X;0<=--ne;)M.push(ne);return M}),gt:Qn(function(M,q,X){for(var ne=X<0?X+q:X;++ne<q;)M.push(ne);return M})}}).pseudos.nth=p.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})p.pseudos[u]=Wn(u);for(u in{submit:!0,reset:!0})p.pseudos[u]=Sr(u);function ml(){}function oa(M,q){var X,ne,ce,Re,He,Te,Ae,ft=Ze[M+" "];if(ft)return q?0:ft.slice(0);for(He=M,Te=[],Ae=p.preFilter;He;){for(Re in X&&!(ne=wt.exec(He))||(ne&&(He=He.slice(ne[0].length)||He),Te.push(ce=[])),X=!1,(ne=ta.exec(He))&&(X=ne.shift(),ce.push({value:X,type:ne[0].replace(Jo," ")}),He=He.slice(X.length)),p.filter)!(ne=_n[Re].exec(He))||Ae[Re]&&!(ne=Ae[Re](ne))||(X=ne.shift(),ce.push({value:X,type:Re,matches:ne}),He=He.slice(X.length));if(!X)break}return q?He.length:He?st.error(M):Ze(M,Te).slice(0)}function Qa(M){for(var q=0,X=M.length,ne="";q<X;q++)ne+=M[q].value;return ne}function Ja(M,q,X){var ne=q.dir,ce=q.next,Re=ce||ne,He=X&&Re==="parentNode",Te=de++;return q.first?function(Ae,ft,at){for(;Ae=Ae[ne];)if(Ae.nodeType===1||He)return M(Ae,ft,at);return!1}:function(Ae,ft,at){var pt,ot,mt=[Z,Te];if(at){for(;Ae=Ae[ne];)if((Ae.nodeType===1||He)&&M(Ae,ft,at))return!0}else for(;Ae=Ae[ne];)if(Ae.nodeType===1||He)if(ot=Ae[ae]||(Ae[ae]={}),ce&&Ee(Ae,ce))Ae=Ae[ne]||Ae;else{if((pt=ot[Re])&&pt[0]===Z&&pt[1]===Te)return mt[2]=pt[2];if((ot[Re]=mt)[2]=M(Ae,ft,at))return!0}return!1}}function fl(M){return 1<M.length?function(q,X,ne){for(var ce=M.length;ce--;)if(!M[ce](q,X,ne))return!1;return!0}:M[0]}function ra(M,q,X,ne,ce){for(var Re,He=[],Te=0,Ae=M.length,ft=q!=null;Te<Ae;Te++)(Re=M[Te])&&(X&&!X(Re,ne,ce)||(He.push(Re),ft&&q.push(Te)));return He}function hs(M,q,X,ne,ce,Re){return ne&&!ne[ae]&&(ne=hs(ne)),ce&&!ce[ae]&&(ce=hs(ce,Re)),Vt(function(He,Te,Ae,ft){var at,pt,ot,mt,Zt=[],en=[],ct=Te.length,Yt=He||(function(vn,Ut,Ko){for(var An=0,sa=Ut.length;An<sa;An++)st(vn,Ut[An],Ko);return Ko})(q||"*",Ae.nodeType?[Ae]:Ae,[]),Jn=!M||!He&&q?Yt:ra(Yt,Zt,M,Ae,ft);if(X?X(Jn,mt=ce||(He?M:ct||ne)?[]:Te,Ae,ft):mt=Jn,ne)for(at=ra(mt,en),ne(at,[],Ae,ft),pt=at.length;pt--;)(ot=at[pt])&&(mt[en[pt]]=!(Jn[en[pt]]=ot));if(He){if(ce||M){if(ce){for(at=[],pt=mt.length;pt--;)(ot=mt[pt])&&at.push(Jn[pt]=ot);ce(null,mt=[],at,ft)}for(pt=mt.length;pt--;)(ot=mt[pt])&&-1<(at=ce?rn.call(He,ot):Zt[pt])&&(He[at]=!(Te[at]=ot))}}else mt=ra(mt===Te?mt.splice(ct,mt.length):mt),ce?ce(null,Te,mt,ft):ee.apply(Te,mt)})}function Za(M){for(var q,X,ne,ce=M.length,Re=p.relative[M[0].type],He=Re||p.relative[" "],Te=Re?1:0,Ae=Ja(function(pt){return pt===q},He,!0),ft=Ja(function(pt){return-1<rn.call(q,pt)},He,!0),at=[function(pt,ot,mt){var Zt=!Re&&(mt||ot!=C)||((q=ot).nodeType?Ae(pt,ot,mt):ft(pt,ot,mt));return q=null,Zt}];Te<ce;Te++)if(X=p.relative[M[Te].type])at=[Ja(fl(at),X)];else{if((X=p.filter[M[Te].type].apply(null,M[Te].matches))[ae]){for(ne=++Te;ne<ce&&!p.relative[M[ne].type];ne++);return hs(1<Te&&fl(at),1<Te&&Qa(M.slice(0,Te-1).concat({value:M[Te-2].type===" "?"*":""})).replace(Jo,"$1"),X,Te<ne&&Za(M.slice(Te,ne)),ne<ce&&Za(M=M.slice(ne)),ne<ce&&Qa(M))}at.push(X)}return fl(at)}function kr(M,q){var X,ne,ce,Re,He,Te,Ae=[],ft=[],at=ut[M+" "];if(!at){for(q||(q=oa(M)),X=q.length;X--;)(at=Za(q[X]))[ae]?Ae.push(at):ft.push(at);(at=ut(M,(ne=ft,Re=0<(ce=Ae).length,He=0<ne.length,Te=function(pt,ot,mt,Zt,en){var ct,Yt,Jn,vn=0,Ut="0",Ko=pt&&[],An=[],sa=C,aa=pt||He&&p.find.TAG("*",en),bs=Z+=sa==null?1:Math.random()||.1,Yr=aa.length;for(en&&(C=ot==k||ot||en);Ut!==Yr&&(ct=aa[Ut])!=null;Ut++){if(He&&ct){for(Yt=0,ot||ct.ownerDocument==k||(Er(ct),mt=!S);Jn=ne[Yt++];)if(Jn(ct,ot||k,mt)){ee.call(Zt,ct);break}en&&(Z=bs)}Re&&((ct=!Jn&&ct)&&vn--,pt&&Ko.push(ct))}if(vn+=Ut,Re&&Ut!==vn){for(Yt=0;Jn=ce[Yt++];)Jn(Ko,An,ot,mt);if(pt){if(0<vn)for(;Ut--;)Ko[Ut]||An[Ut]||(An[Ut]=Mn.call(Zt));An=ra(An)}ee.apply(Zt,An),en&&!pt&&0<An.length&&1<vn+ce.length&&x.uniqueSort(Zt)}return en&&(Z=bs,C=sa),Ko},Re?Vt(Te):Te))).selector=M}return at}function dn(M,q,X,ne){var ce,Re,He,Te,Ae,ft=typeof M=="function"&&M,at=!ne&&oa(M=ft.selector||M);if(X=X||[],at.length===1){if(2<(Re=at[0]=at[0].slice(0)).length&&(He=Re[0]).type==="ID"&&q.nodeType===9&&S&&p.relative[Re[1].type]){if(!(q=(p.find.ID(He.matches[0].replace(an,Xt),q)||[])[0]))return X;ft&&(q=q.parentNode),M=M.slice(Re.shift().value.length)}for(ce=_n.needsContext.test(M)?0:Re.length;ce--&&(He=Re[ce],!p.relative[Te=He.type]);)if((Ae=p.find[Te])&&(ne=Ae(He.matches[0].replace(an,Xt),on.test(Re[0].type)&&na(q.parentNode)||q))){if(Re.splice(ce,1),!(M=ne.length&&Qa(Re)))return ee.apply(X,ne),X;break}}return(ft||kr(M,at))(ne,q,!S,X,!q||on.test(M)&&na(q.parentNode)||q),X}ml.prototype=p.filters=p.pseudos,p.setFilters=new ml,Ue.sortStable=ae.split("").sort(Le).join("")===ae,Er(),Ue.sortDetached=Bt(function(M){return 1&M.compareDocumentPosition(k.createElement("fieldset"))}),x.find=st,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,st.compile=kr,st.select=dn,st.setDocument=Er,st.tokenize=oa,st.escape=x.escapeSelector,st.getText=x.text,st.isXML=x.isXMLDoc,st.selectors=x.expr,st.support=x.support,st.uniqueSort=x.uniqueSort})();var Xn=function(u,p,C){for(var w=[],T=C!==void 0;(u=u[p])&&u.nodeType!==9;)if(u.nodeType===1){if(T&&x(u).is(C))break;w.push(u)}return w},_t=function(u,p){for(var C=[];u;u=u.nextSibling)u.nodeType===1&&u!==p&&C.push(u);return C},zt=x.expr.match.needsContext,_=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function gr(u,p,C){return Be(p)?x.grep(u,function(w,T){return!!p.call(w,T,w)!==C}):p.nodeType?x.grep(u,function(w){return w===p!==C}):typeof p!="string"?x.grep(u,function(w){return-1<rn.call(p,w)!==C}):x.filter(p,u,C)}x.filter=function(u,p,C){var w=p[0];return C&&(u=":not("+u+")"),p.length===1&&w.nodeType===1?x.find.matchesSelector(w,u)?[w]:[]:x.find.matches(u,x.grep(p,function(T){return T.nodeType===1}))},x.fn.extend({find:function(u){var p,C,w=this.length,T=this;if(typeof u!="string")return this.pushStack(x(u).filter(function(){for(p=0;p<w;p++)if(x.contains(T[p],this))return!0}));for(C=this.pushStack([]),p=0;p<w;p++)x.find(u,T[p],C);return 1<w?x.uniqueSort(C):C},filter:function(u){return this.pushStack(gr(this,u||[],!1))},not:function(u){return this.pushStack(gr(this,u||[],!0))},is:function(u){return!!gr(this,typeof u=="string"&&zt.test(u)?x(u):u||[],!1).length}});var ke,et=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(u,p,C){var w,T;if(!u)return this;if(C=C||ke,typeof u=="string"){if(!(w=u[0]==="<"&&u[u.length-1]===">"&&3<=u.length?[null,u,null]:et.exec(u))||!w[1]&&p)return!p||p.jquery?(p||C).find(u):this.constructor(p).find(u);if(w[1]){if(p=p instanceof x?p[0]:p,x.merge(this,x.parseHTML(w[1],p&&p.nodeType?p.ownerDocument||p:Ye,!0)),_.test(w[1])&&x.isPlainObject(p))for(w in p)Be(this[w])?this[w](p[w]):this.attr(w,p[w]);return this}return(T=Ye.getElementById(w[2]))&&(this[0]=T,this.length=1),this}return u.nodeType?(this[0]=u,this.length=1,this):Be(u)?C.ready!==void 0?C.ready(u):u(x):x.makeArray(u,this)}).prototype=x.fn,ke=x(Ye);var dt=/^(?:parents|prev(?:Until|All))/,Se={children:!0,contents:!0,next:!0,prev:!0};function yt(u,p){for(;(u=u[p])&&u.nodeType!==1;);return u}x.fn.extend({has:function(u){var p=x(u,this),C=p.length;return this.filter(function(){for(var w=0;w<C;w++)if(x.contains(this,p[w]))return!0})},closest:function(u,p){var C,w=0,T=this.length,k=[],O=typeof u!="string"&&x(u);if(!zt.test(u)){for(;w<T;w++)for(C=this[w];C&&C!==p;C=C.parentNode)if(C.nodeType<11&&(O?-1<O.index(C):C.nodeType===1&&x.find.matchesSelector(C,u))){k.push(C);break}}return this.pushStack(1<k.length?x.uniqueSort(k):k)},index:function(u){return u?typeof u=="string"?rn.call(x(u),this[0]):rn.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,p){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(u,p))))},addBack:function(u){return this.add(u==null?this.prevObject:this.prevObject.filter(u))}}),x.each({parent:function(u){var p=u.parentNode;return p&&p.nodeType!==11?p:null},parents:function(u){return Xn(u,"parentNode")},parentsUntil:function(u,p,C){return Xn(u,"parentNode",C)},next:function(u){return yt(u,"nextSibling")},prev:function(u){return yt(u,"previousSibling")},nextAll:function(u){return Xn(u,"nextSibling")},prevAll:function(u){return Xn(u,"previousSibling")},nextUntil:function(u,p,C){return Xn(u,"nextSibling",C)},prevUntil:function(u,p,C){return Xn(u,"previousSibling",C)},siblings:function(u){return _t((u.parentNode||{}).firstChild,u)},children:function(u){return _t(u.firstChild)},contents:function(u){return u.contentDocument!=null&&$e(u.contentDocument)?u.contentDocument:(Ee(u,"template")&&(u=u.content||u),x.merge([],u.childNodes))}},function(u,p){x.fn[u]=function(C,w){var T=x.map(this,p,C);return u.slice(-5)!=="Until"&&(w=C),w&&typeof w=="string"&&(T=x.filter(w,T)),1<this.length&&(Se[u]||x.uniqueSort(T),dt.test(u)&&T.reverse()),this.pushStack(T)}});var qe=/[^\x20\t\r\n\f]+/g;function K(u){return u}function hr(u){throw u}function Zo(u,p,C,w){var T;try{u&&Be(T=u.promise)?T.call(u).done(p).fail(C):u&&Be(T=u.then)?T.call(u,p,C):p.apply(void 0,[u].slice(w))}catch(k){C.apply(void 0,[k])}}x.Callbacks=function(u){var p,C;u=typeof u=="string"?(p=u,C={},x.each(p.match(qe)||[],function(Z,de){C[de]=!0}),C):x.extend({},u);var w,T,k,O,S=[],U=[],V=-1,ee=function(){for(O=O||u.once,k=w=!0;U.length;V=-1)for(T=U.shift();++V<S.length;)S[V].apply(T[0],T[1])===!1&&u.stopOnFalse&&(V=S.length,T=!1);u.memory||(T=!1),w=!1,O&&(S=T?[]:"")},ae={add:function(){return S&&(T&&!w&&(V=S.length-1,U.push(T)),(function Z(de){x.each(de,function(pe,Ze){Be(Ze)?u.unique&&ae.has(Ze)||S.push(Ze):Ze&&Ze.length&&kt(Ze)!=="string"&&Z(Ze)})})(arguments),T&&!w&&ee()),this},remove:function(){return x.each(arguments,function(Z,de){for(var pe;-1<(pe=x.inArray(de,S,pe));)S.splice(pe,1),pe<=V&&V--}),this},has:function(Z){return Z?-1<x.inArray(Z,S):0<S.length},empty:function(){return S&&(S=[]),this},disable:function(){return O=U=[],S=T="",this},disabled:function(){return!S},lock:function(){return O=U=[],T||w||(S=T=""),this},locked:function(){return!!O},fireWith:function(Z,de){return O||(de=[Z,(de=de||[]).slice?de.slice():de],U.push(de),w||ee()),this},fire:function(){return ae.fireWith(this,arguments),this},fired:function(){return!!k}};return ae},x.extend({Deferred:function(u){var p=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],C="pending",w={state:function(){return C},always:function(){return T.done(arguments).fail(arguments),this},catch:function(k){return w.then(null,k)},pipe:function(){var k=arguments;return x.Deferred(function(O){x.each(p,function(S,U){var V=Be(k[U[4]])&&k[U[4]];T[U[1]](function(){var ee=V&&V.apply(this,arguments);ee&&Be(ee.promise)?ee.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[U[0]+"With"](this,V?[ee]:arguments)})}),k=null}).promise()},then:function(k,O,S){var U=0;function V(ee,ae,Z,de){return function(){var pe=this,Ze=arguments,ut=function(){var Le,Ao;if(!(ee<U)){if((Le=Z.apply(pe,Ze))===ae.promise())throw new TypeError("Thenable self-resolution");Ao=Le&&(typeof Le=="object"||typeof Le=="function")&&Le.then,Be(Ao)?de?Ao.call(Le,V(U,ae,K,de),V(U,ae,hr,de)):(U++,Ao.call(Le,V(U,ae,K,de),V(U,ae,hr,de),V(U,ae,K,ae.notifyWith))):(Z!==K&&(pe=void 0,Ze=[Le]),(de||ae.resolveWith)(pe,Ze))}},nn=de?ut:function(){try{ut()}catch(Le){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(Le,nn.error),U<=ee+1&&(Z!==hr&&(pe=void 0,Ze=[Le]),ae.rejectWith(pe,Ze))}};ee?nn():(x.Deferred.getErrorHook?nn.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(nn.error=x.Deferred.getStackHook()),ve.setTimeout(nn))}}return x.Deferred(function(ee){p[0][3].add(V(0,ee,Be(S)?S:K,ee.notifyWith)),p[1][3].add(V(0,ee,Be(k)?k:K)),p[2][3].add(V(0,ee,Be(O)?O:hr))}).promise()},promise:function(k){return k!=null?x.extend(k,w):w}},T={};return x.each(p,function(k,O){var S=O[2],U=O[5];w[O[1]]=S.add,U&&S.add(function(){C=U},p[3-k][2].disable,p[3-k][3].disable,p[0][2].lock,p[0][3].lock),S.add(O[3].fire),T[O[0]]=function(){return T[O[0]+"With"](this===T?void 0:this,arguments),this},T[O[0]+"With"]=S.fireWith}),w.promise(T),u&&u.call(T,T),T},when:function(u){var p=arguments.length,C=p,w=Array(C),T=it.call(arguments),k=x.Deferred(),O=function(S){return function(U){w[S]=this,T[S]=1<arguments.length?it.call(arguments):U,--p||k.resolveWith(w,T)}};if(p<=1&&(Zo(u,k.done(O(C)).resolve,k.reject,!p),k.state()==="pending"||Be(T[C]&&T[C].then)))return k.then();for(;C--;)Zo(T[C],O(C),k.reject);return k.promise()}});var Pe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(u,p){ve.console&&ve.console.warn&&u&&Pe.test(u.name)&&ve.console.warn("jQuery.Deferred exception: "+u.message,u.stack,p)},x.readyException=function(u){ve.setTimeout(function(){throw u})};var qr=x.Deferred();function Qt(){Ye.removeEventListener("DOMContentLoaded",Qt),ve.removeEventListener("load",Qt),x.ready()}x.fn.ready=function(u){return qr.then(u).catch(function(p){x.readyException(p)}),this},x.extend({isReady:!1,readyWait:1,ready:function(u){(u===!0?--x.readyWait:x.isReady)||(x.isReady=!0)!==u&&0<--x.readyWait||qr.resolveWith(Ye,[x])}}),x.ready.then=qr.then,Ye.readyState==="complete"||Ye.readyState!=="loading"&&!Ye.documentElement.doScroll?ve.setTimeout(x.ready):(Ye.addEventListener("DOMContentLoaded",Qt),ve.addEventListener("load",Qt));var go=function(u,p,C,w,T,k,O){var S=0,U=u.length,V=C==null;if(kt(C)==="object")for(S in T=!0,C)go(u,p,S,C[S],!0,k,O);else if(w!==void 0&&(T=!0,Be(w)||(O=!0),V&&(O?(p.call(u,w),p=null):(V=p,p=function(ee,ae,Z){return V.call(x(ee),Z)})),p))for(;S<U;S++)p(u[S],C,O?w:w.call(u[S],S,p(u[S],C)));return T?u:V?p.call(u):U?p(u[0],C):k},$t=/^-ms-/,Hs=/-([a-z])/g;function Ec(u,p){return p.toUpperCase()}function qt(u){return u.replace($t,"ms-").replace(Hs,Ec)}var no=function(u){return u.nodeType===1||u.nodeType===9||!+u.nodeType};function wo(){this.expando=x.expando+wo.uid++}wo.uid=1,wo.prototype={cache:function(u){var p=u[this.expando];return p||(p={},no(u)&&(u.nodeType?u[this.expando]=p:Object.defineProperty(u,this.expando,{value:p,configurable:!0}))),p},set:function(u,p,C){var w,T=this.cache(u);if(typeof p=="string")T[qt(p)]=C;else for(w in p)T[qt(w)]=p[w];return T},get:function(u,p){return p===void 0?this.cache(u):u[this.expando]&&u[this.expando][qt(p)]},access:function(u,p,C){return p===void 0||p&&typeof p=="string"&&C===void 0?this.get(u,p):(this.set(u,p,C),C!==void 0?C:p)},remove:function(u,p){var C,w=u[this.expando];if(w!==void 0){if(p!==void 0)for(C=(p=Array.isArray(p)?p.map(qt):(p=qt(p))in w?[p]:p.match(qe)||[]).length;C--;)delete w[p[C]];(p===void 0||x.isEmptyObject(w))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var p=u[this.expando];return p!==void 0&&!x.isEmptyObject(p)}};var Ge=new wo,kn=new wo,Wr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$s=/[A-Z]/g;function sn(u,p,C){var w,T;if(C===void 0&&u.nodeType===1)if(w="data-"+p.replace($s,"-$&").toLowerCase(),typeof(C=u.getAttribute(w))=="string"){try{C=(T=C)==="true"||T!=="false"&&(T==="null"?null:T===+T+""?+T:Wr.test(T)?JSON.parse(T):T)}catch{}kn.set(u,p,C)}else C=void 0;return C}x.extend({hasData:function(u){return kn.hasData(u)||Ge.hasData(u)},data:function(u,p,C){return kn.access(u,p,C)},removeData:function(u,p){kn.remove(u,p)},_data:function(u,p,C){return Ge.access(u,p,C)},_removeData:function(u,p){Ge.remove(u,p)}}),x.fn.extend({data:function(u,p){var C,w,T,k=this[0],O=k&&k.attributes;if(u===void 0){if(this.length&&(T=kn.get(k),k.nodeType===1&&!Ge.get(k,"hasDataAttrs"))){for(C=O.length;C--;)O[C]&&(w=O[C].name).indexOf("data-")===0&&(w=qt(w.slice(5)),sn(k,w,T[w]));Ge.set(k,"hasDataAttrs",!0)}return T}return typeof u=="object"?this.each(function(){kn.set(this,u)}):go(this,function(S){var U;if(k&&S===void 0)return(U=kn.get(k,u))!==void 0||(U=sn(k,u))!==void 0?U:void 0;this.each(function(){kn.set(this,u,S)})},null,p,1<arguments.length,null,!0)},removeData:function(u){return this.each(function(){kn.remove(this,u)})}}),x.extend({queue:function(u,p,C){var w;if(u)return p=(p||"fx")+"queue",w=Ge.get(u,p),C&&(!w||Array.isArray(C)?w=Ge.access(u,p,x.makeArray(C)):w.push(C)),w||[]},dequeue:function(u,p){p=p||"fx";var C=x.queue(u,p),w=C.length,T=C.shift(),k=x._queueHooks(u,p);T==="inprogress"&&(T=C.shift(),w--),T&&(p==="fx"&&C.unshift("inprogress"),delete k.stop,T.call(u,function(){x.dequeue(u,p)},k)),!w&&k&&k.empty.fire()},_queueHooks:function(u,p){var C=p+"queueHooks";return Ge.get(u,C)||Ge.access(u,C,{empty:x.Callbacks("once memory").add(function(){Ge.remove(u,[p+"queue",C])})})}}),x.fn.extend({queue:function(u,p){var C=2;return typeof u!="string"&&(p=u,u="fx",C--),arguments.length<C?x.queue(this[0],u):p===void 0?this:this.each(function(){var w=x.queue(this,u,p);x._queueHooks(this,u),u==="fx"&&w[0]!=="inprogress"&&x.dequeue(this,u)})},dequeue:function(u){return this.each(function(){x.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,p){var C,w=1,T=x.Deferred(),k=this,O=this.length,S=function(){--w||T.resolveWith(k,[k])};for(typeof u!="string"&&(p=u,u=void 0),u=u||"fx";O--;)(C=Ge.get(k[O],u+"queueHooks"))&&C.empty&&(w++,C.empty.add(S));return S(),T.promise(p)}});var oo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xn=new RegExp("^(?:([+-])=|)("+oo+")([a-z%]*)$","i"),$n=["Top","Right","Bottom","Left"],So=Ye.documentElement,fn=function(u){return x.contains(u.ownerDocument,u)},Zu={composed:!0};So.getRootNode&&(fn=function(u){return x.contains(u.ownerDocument,u)||u.getRootNode(Zu)===u.ownerDocument});var Ct=function(u,p){return(u=p||u).style.display==="none"||u.style.display===""&&fn(u)&&x.css(u,"display")==="none"};function qs(u,p,C,w){var T,k,O=20,S=w?function(){return w.cur()}:function(){return x.css(u,p,"")},U=S(),V=C&&C[3]||(x.cssNumber[p]?"":"px"),ee=u.nodeType&&(x.cssNumber[p]||V!=="px"&&+U)&&xn.exec(x.css(u,p));if(ee&&ee[3]!==V){for(U/=2,V=V||ee[3],ee=+U||1;O--;)x.style(u,p,ee+V),(1-k)*(1-(k=S()/U||.5))<=0&&(O=0),ee/=k;ee*=2,x.style(u,p,ee+V),C=C||[]}return C&&(ee=+ee||+U||0,T=C[1]?ee+(C[1]+1)*C[2]:+C[2],w&&(w.unit=V,w.start=ee,w.end=T)),T}var kc={};function br(u,p){for(var C,w,T,k,O,S,U,V=[],ee=0,ae=u.length;ee<ae;ee++)(w=u[ee]).style&&(C=w.style.display,p?(C==="none"&&(V[ee]=Ge.get(w,"display")||null,V[ee]||(w.style.display="")),w.style.display===""&&Ct(w)&&(V[ee]=(U=O=k=void 0,O=(T=w).ownerDocument,S=T.nodeName,(U=kc[S])||(k=O.body.appendChild(O.createElement(S)),U=x.css(k,"display"),k.parentNode.removeChild(k),U==="none"&&(U="block"),kc[S]=U)))):C!=="none"&&(V[ee]="none",Ge.set(w,"display",C)));for(ee=0;ee<ae;ee++)V[ee]!=null&&(u[ee].style.display=V[ee]);return u}x.fn.extend({show:function(){return br(this,!0)},hide:function(){return br(this)},toggle:function(u){return typeof u=="boolean"?u?this.show():this.hide():this.each(function(){Ct(this)?x(this).show():x(this).hide()})}});var vr,er,yr=/^(?:checkbox|radio)$/i,Ua=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ot=/^$|^module$|\/(?:java|ecma)script/i;vr=Ye.createDocumentFragment().appendChild(Ye.createElement("div")),(er=Ye.createElement("input")).setAttribute("type","radio"),er.setAttribute("checked","checked"),er.setAttribute("name","t"),vr.appendChild(er),Ue.checkClone=vr.cloneNode(!0).cloneNode(!0).lastChild.checked,vr.innerHTML="<textarea>x</textarea>",Ue.noCloneChecked=!!vr.cloneNode(!0).lastChild.defaultValue,vr.innerHTML="<option></option>",Ue.option=!!vr.lastChild;var Me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pn(u,p){var C;return C=typeof u.getElementsByTagName<"u"?u.getElementsByTagName(p||"*"):typeof u.querySelectorAll<"u"?u.querySelectorAll(p||"*"):[],p===void 0||p&&Ee(u,p)?x.merge([u],C):C}function ho(u,p){for(var C=0,w=u.length;C<w;C++)Ge.set(u[C],"globalEval",!p||Ge.get(p[C],"globalEval"))}Me.tbody=Me.tfoot=Me.colgroup=Me.caption=Me.thead,Me.th=Me.td,Ue.option||(Me.optgroup=Me.option=[1,"<select multiple='multiple'>","</select>"]);var tn=/<|&#?\w+;/;function Zi(u,p,C,w,T){for(var k,O,S,U,V,ee,ae=p.createDocumentFragment(),Z=[],de=0,pe=u.length;de<pe;de++)if((k=u[de])||k===0)if(kt(k)==="object")x.merge(Z,k.nodeType?[k]:k);else if(tn.test(k)){for(O=O||ae.appendChild(p.createElement("div")),S=(Ua.exec(k)||["",""])[1].toLowerCase(),U=Me[S]||Me._default,O.innerHTML=U[1]+x.htmlPrefilter(k)+U[2],ee=U[0];ee--;)O=O.lastChild;x.merge(Z,O.childNodes),(O=ae.firstChild).textContent=""}else Z.push(p.createTextNode(k));for(ae.textContent="",de=0;k=Z[de++];)if(w&&-1<x.inArray(k,w))T&&T.push(k);else if(V=fn(k),O=pn(ae.appendChild(k),"script"),V&&ho(O),C)for(ee=0;k=O[ee++];)Ot.test(k.type||"")&&C.push(k);return ae}var el=/^([^.]*)(?:\.(.+)|)/;function gn(){return!0}function is(){return!1}function Ws(u,p,C,w,T,k){var O,S;if(typeof p=="object"){for(S in typeof C!="string"&&(w=w||C,C=void 0),p)Ws(u,S,C,w,p[S],k);return u}if(w==null&&T==null?(T=C,w=C=void 0):T==null&&(typeof C=="string"?(T=w,w=void 0):(T=w,w=C,C=void 0)),T===!1)T=is;else if(!T)return u;return k===1&&(O=T,(T=function(U){return x().off(U),O.apply(this,arguments)}).guid=O.guid||(O.guid=x.guid++)),u.each(function(){x.event.add(this,p,T,w,C)})}function Vs(u,p,C){C?(Ge.set(u,p,!1),x.event.add(u,p,{namespace:!1,handler:function(w){var T,k=Ge.get(this,p);if(1&w.isTrigger&&this[p]){if(k)(x.event.special[p]||{}).delegateType&&w.stopPropagation();else if(k=it.call(arguments),Ge.set(this,p,k),this[p](),T=Ge.get(this,p),Ge.set(this,p,!1),k!==T)return w.stopImmediatePropagation(),w.preventDefault(),T}else k&&(Ge.set(this,p,x.event.trigger(k[0],k.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=gn)}})):Ge.get(u,p)===void 0&&x.event.add(u,p,gn)}x.event={global:{},add:function(u,p,C,w,T){var k,O,S,U,V,ee,ae,Z,de,pe,Ze,ut=Ge.get(u);if(no(u))for(C.handler&&(C=(k=C).handler,T=k.selector),T&&x.find.matchesSelector(So,T),C.guid||(C.guid=x.guid++),(U=ut.events)||(U=ut.events=Object.create(null)),(O=ut.handle)||(O=ut.handle=function(nn){return typeof x<"u"&&x.event.triggered!==nn.type?x.event.dispatch.apply(u,arguments):void 0}),V=(p=(p||"").match(qe)||[""]).length;V--;)de=Ze=(S=el.exec(p[V])||[])[1],pe=(S[2]||"").split(".").sort(),de&&(ae=x.event.special[de]||{},de=(T?ae.delegateType:ae.bindType)||de,ae=x.event.special[de]||{},ee=x.extend({type:de,origType:Ze,data:w,handler:C,guid:C.guid,selector:T,needsContext:T&&x.expr.match.needsContext.test(T),namespace:pe.join(".")},k),(Z=U[de])||((Z=U[de]=[]).delegateCount=0,ae.setup&&ae.setup.call(u,w,pe,O)!==!1||u.addEventListener&&u.addEventListener(de,O)),ae.add&&(ae.add.call(u,ee),ee.handler.guid||(ee.handler.guid=C.guid)),T?Z.splice(Z.delegateCount++,0,ee):Z.push(ee),x.event.global[de]=!0)},remove:function(u,p,C,w,T){var k,O,S,U,V,ee,ae,Z,de,pe,Ze,ut=Ge.hasData(u)&&Ge.get(u);if(ut&&(U=ut.events)){for(V=(p=(p||"").match(qe)||[""]).length;V--;)if(de=Ze=(S=el.exec(p[V])||[])[1],pe=(S[2]||"").split(".").sort(),de){for(ae=x.event.special[de]||{},Z=U[de=(w?ae.delegateType:ae.bindType)||de]||[],S=S[2]&&new RegExp("(^|\\.)"+pe.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=k=Z.length;k--;)ee=Z[k],!T&&Ze!==ee.origType||C&&C.guid!==ee.guid||S&&!S.test(ee.namespace)||w&&w!==ee.selector&&(w!=="**"||!ee.selector)||(Z.splice(k,1),ee.selector&&Z.delegateCount--,ae.remove&&ae.remove.call(u,ee));O&&!Z.length&&(ae.teardown&&ae.teardown.call(u,pe,ut.handle)!==!1||x.removeEvent(u,de,ut.handle),delete U[de])}else for(de in U)x.event.remove(u,de+p[V],C,w,!0);x.isEmptyObject(U)&&Ge.remove(u,"handle events")}},dispatch:function(u){var p,C,w,T,k,O,S=new Array(arguments.length),U=x.event.fix(u),V=(Ge.get(this,"events")||Object.create(null))[U.type]||[],ee=x.event.special[U.type]||{};for(S[0]=U,p=1;p<arguments.length;p++)S[p]=arguments[p];if(U.delegateTarget=this,!ee.preDispatch||ee.preDispatch.call(this,U)!==!1){for(O=x.event.handlers.call(this,U,V),p=0;(T=O[p++])&&!U.isPropagationStopped();)for(U.currentTarget=T.elem,C=0;(k=T.handlers[C++])&&!U.isImmediatePropagationStopped();)U.rnamespace&&k.namespace!==!1&&!U.rnamespace.test(k.namespace)||(U.handleObj=k,U.data=k.data,(w=((x.event.special[k.origType]||{}).handle||k.handler).apply(T.elem,S))!==void 0&&(U.result=w)===!1&&(U.preventDefault(),U.stopPropagation()));return ee.postDispatch&&ee.postDispatch.call(this,U),U.result}},handlers:function(u,p){var C,w,T,k,O,S=[],U=p.delegateCount,V=u.target;if(U&&V.nodeType&&!(u.type==="click"&&1<=u.button)){for(;V!==this;V=V.parentNode||this)if(V.nodeType===1&&(u.type!=="click"||V.disabled!==!0)){for(k=[],O={},C=0;C<U;C++)O[T=(w=p[C]).selector+" "]===void 0&&(O[T]=w.needsContext?-1<x(T,this).index(V):x.find(T,this,null,[V]).length),O[T]&&k.push(w);k.length&&S.push({elem:V,handlers:k})}}return V=this,U<p.length&&S.push({elem:V,handlers:p.slice(U)}),S},addProp:function(u,p){Object.defineProperty(x.Event.prototype,u,{enumerable:!0,configurable:!0,get:Be(p)?function(){if(this.originalEvent)return p(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(C){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:C})}})},fix:function(u){return u[x.expando]?u:new x.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var p=this||u;return yr.test(p.type)&&p.click&&Ee(p,"input")&&Vs(p,"click",!0),!1},trigger:function(u){var p=this||u;return yr.test(p.type)&&p.click&&Ee(p,"input")&&Vs(p,"click"),!0},_default:function(u){var p=u.target;return yr.test(p.type)&&p.click&&Ee(p,"input")&&Ge.get(p,"click")||Ee(p,"a")}},beforeunload:{postDispatch:function(u){u.result!==void 0&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}},x.removeEvent=function(u,p,C){u.removeEventListener&&u.removeEventListener(p,C)},x.Event=function(u,p){if(!(this instanceof x.Event))return new x.Event(u,p);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||u.defaultPrevented===void 0&&u.returnValue===!1?gn:is,this.target=u.target&&u.target.nodeType===3?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,p&&x.extend(this,p),this.timeStamp=u&&u.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:is,isPropagationStopped:is,isImmediatePropagationStopped:is,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=gn,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=gn,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=gn,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(u,p){function C(w){if(Ye.documentMode){var T=Ge.get(this,"handle"),k=x.event.fix(w);k.type=w.type==="focusin"?"focus":"blur",k.isSimulated=!0,T(w),k.target===k.currentTarget&&T(k)}else x.event.simulate(p,w.target,x.event.fix(w))}x.event.special[u]={setup:function(){var w;if(Vs(this,u,!0),!Ye.documentMode)return!1;(w=Ge.get(this,p))||this.addEventListener(p,C),Ge.set(this,p,(w||0)+1)},trigger:function(){return Vs(this,u),!0},teardown:function(){var w;if(!Ye.documentMode)return!1;(w=Ge.get(this,p)-1)?Ge.set(this,p,w):(this.removeEventListener(p,C),Ge.remove(this,p))},_default:function(w){return Ge.get(w.target,u)},delegateType:p},x.event.special[p]={setup:function(){var w=this.ownerDocument||this.document||this,T=Ye.documentMode?this:w,k=Ge.get(T,p);k||(Ye.documentMode?this.addEventListener(p,C):w.addEventListener(u,C,!0)),Ge.set(T,p,(k||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,T=Ye.documentMode?this:w,k=Ge.get(T,p)-1;k?Ge.set(T,p,k):(Ye.documentMode?this.removeEventListener(p,C):w.removeEventListener(u,C,!0),Ge.remove(T,p))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,p){x.event.special[u]={delegateType:p,bindType:p,handle:function(C){var w,T=C.relatedTarget,k=C.handleObj;return T&&(T===this||x.contains(this,T))||(C.type=k.origType,w=k.handler.apply(this,arguments),C.type=p),w}}}),x.fn.extend({on:function(u,p,C,w){return Ws(this,u,p,C,w)},one:function(u,p,C,w){return Ws(this,u,p,C,w,1)},off:function(u,p,C){var w,T;if(u&&u.preventDefault&&u.handleObj)return w=u.handleObj,x(u.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if(typeof u=="object"){for(T in u)this.off(T,p,u[T]);return this}return p!==!1&&typeof p!="function"||(C=p,p=void 0),C===!1&&(C=is),this.each(function(){x.event.remove(this,u,C,p)})}});var Ks=/<script|<style|<link/i,_c=/checked\s*(?:[^=]|=\s*.checked.)/i,Nc=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ha(u,p){return Ee(u,"table")&&Ee(p.nodeType!==11?p:p.firstChild,"tr")&&x(u).children("tbody")[0]||u}function em(u){return u.type=(u.getAttribute("type")!==null)+"/"+u.type,u}function ls(u){return(u.type||"").slice(0,5)==="true/"?u.type=u.type.slice(5):u.removeAttribute("type"),u}function $a(u,p){var C,w,T,k,O,S;if(p.nodeType===1){if(Ge.hasData(u)&&(S=Ge.get(u).events))for(T in Ge.remove(p,"handle events"),S)for(C=0,w=S[T].length;C<w;C++)x.event.add(p,T,S[T][C]);kn.hasData(u)&&(k=kn.access(u),O=x.extend({},k),kn.set(p,O))}}function Wt(u,p,C,w){p=Gt(p);var T,k,O,S,U,V,ee=0,ae=u.length,Z=ae-1,de=p[0],pe=Be(de);if(pe||1<ae&&typeof de=="string"&&!Ue.checkClone&&_c.test(de))return u.each(function(Ze){var ut=u.eq(Ze);pe&&(p[0]=de.call(this,Ze,ut.html())),Wt(ut,p,C,w)});if(ae&&(k=(T=Zi(p,u[0].ownerDocument,!1,u,w)).firstChild,T.childNodes.length===1&&(T=k),k||w)){for(S=(O=x.map(pn(T,"script"),em)).length;ee<ae;ee++)U=T,ee!==Z&&(U=x.clone(U,!0,!0),S&&x.merge(O,pn(U,"script"))),C.call(u[ee],U,ee);if(S)for(V=O[O.length-1].ownerDocument,x.map(O,ls),ee=0;ee<S;ee++)U=O[ee],Ot.test(U.type||"")&&!Ge.access(U,"globalEval")&&x.contains(V,U)&&(U.src&&(U.type||"").toLowerCase()!=="module"?x._evalUrl&&!U.noModule&&x._evalUrl(U.src,{nonce:U.nonce||U.getAttribute("nonce")},V):jt(U.textContent.replace(Nc,""),U,V))}return u}function Vr(u,p,C){for(var w,T=p?x.filter(p,u):u,k=0;(w=T[k])!=null;k++)C||w.nodeType!==1||x.cleanData(pn(w)),w.parentNode&&(C&&fn(w)&&ho(pn(w,"script")),w.parentNode.removeChild(w));return u}x.extend({htmlPrefilter:function(u){return u},clone:function(u,p,C){var w,T,k,O,S,U,V,ee=u.cloneNode(!0),ae=fn(u);if(!(Ue.noCloneChecked||u.nodeType!==1&&u.nodeType!==11||x.isXMLDoc(u)))for(O=pn(ee),w=0,T=(k=pn(u)).length;w<T;w++)S=k[w],U=O[w],(V=U.nodeName.toLowerCase())==="input"&&yr.test(S.type)?U.checked=S.checked:V!=="input"&&V!=="textarea"||(U.defaultValue=S.defaultValue);if(p)if(C)for(k=k||pn(u),O=O||pn(ee),w=0,T=k.length;w<T;w++)$a(k[w],O[w]);else $a(u,ee);return 0<(O=pn(ee,"script")).length&&ho(O,!ae&&pn(u,"script")),ee},cleanData:function(u){for(var p,C,w,T=x.event.special,k=0;(C=u[k])!==void 0;k++)if(no(C)){if(p=C[Ge.expando]){if(p.events)for(w in p.events)T[w]?x.event.remove(C,w):x.removeEvent(C,w,p.handle);C[Ge.expando]=void 0}C[kn.expando]&&(C[kn.expando]=void 0)}}}),x.fn.extend({detach:function(u){return Vr(this,u,!0)},remove:function(u){return Vr(this,u)},text:function(u){return go(this,function(p){return p===void 0?x.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=p)})},null,u,arguments.length)},append:function(){return Wt(this,arguments,function(u){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||Ha(this,u).appendChild(u)})},prepend:function(){return Wt(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var p=Ha(this,u);p.insertBefore(u,p.firstChild)}})},before:function(){return Wt(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return Wt(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,p=0;(u=this[p])!=null;p++)u.nodeType===1&&(x.cleanData(pn(u,!1)),u.textContent="");return this},clone:function(u,p){return u=u!=null&&u,p=p??u,this.map(function(){return x.clone(this,u,p)})},html:function(u){return go(this,function(p){var C=this[0]||{},w=0,T=this.length;if(p===void 0&&C.nodeType===1)return C.innerHTML;if(typeof p=="string"&&!Ks.test(p)&&!Me[(Ua.exec(p)||["",""])[1].toLowerCase()]){p=x.htmlPrefilter(p);try{for(;w<T;w++)(C=this[w]||{}).nodeType===1&&(x.cleanData(pn(C,!1)),C.innerHTML=p);C=0}catch{}}C&&this.empty().append(p)},null,u,arguments.length)},replaceWith:function(){var u=[];return Wt(this,arguments,function(p){var C=this.parentNode;x.inArray(this,u)<0&&(x.cleanData(pn(this)),C&&C.replaceChild(p,this))},u)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,p){x.fn[u]=function(C){for(var w,T=[],k=x(C),O=k.length-1,S=0;S<=O;S++)w=S===O?this:this.clone(!0),x(k[S])[p](w),Bn.apply(T,w.get());return this.pushStack(T)}});var qa=new RegExp("^("+oo+")(?!px)[a-z%]+$","i"),Wa=/^--/,Va=function(u){var p=u.ownerDocument.defaultView;return p&&p.opener||(p=ve),p.getComputedStyle(u)},qo=function(u,p,C){var w,T,k={};for(T in p)k[T]=u.style[T],u.style[T]=p[T];for(T in w=C.call(u),p)u.style[T]=k[T];return w},Ac=new RegExp($n.join("|"),"i");function cs(u,p,C){var w,T,k,O,S=Wa.test(p),U=u.style;return(C=C||Va(u))&&(O=C.getPropertyValue(p)||C[p],S&&O&&(O=O.replace(Jo,"$1")||void 0),O!==""||fn(u)||(O=x.style(u,p)),!Ue.pixelBoxStyles()&&qa.test(O)&&Ac.test(p)&&(w=U.width,T=U.minWidth,k=U.maxWidth,U.minWidth=U.maxWidth=U.width=O,O=C.width,U.width=w,U.minWidth=T,U.maxWidth=k)),O!==void 0?O+"":O}function hn(u,p){return{get:function(){if(!u())return(this.get=p).apply(this,arguments);delete this.get}}}(function(){function u(){if(V){U.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",V.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",So.appendChild(U).appendChild(V);var ee=ve.getComputedStyle(V);C=ee.top!=="1%",S=p(ee.marginLeft)===12,V.style.right="60%",k=p(ee.right)===36,w=p(ee.width)===36,V.style.position="absolute",T=p(V.offsetWidth/3)===12,So.removeChild(U),V=null}}function p(ee){return Math.round(parseFloat(ee))}var C,w,T,k,O,S,U=Ye.createElement("div"),V=Ye.createElement("div");V.style&&(V.style.backgroundClip="content-box",V.cloneNode(!0).style.backgroundClip="",Ue.clearCloneStyle=V.style.backgroundClip==="content-box",x.extend(Ue,{boxSizingReliable:function(){return u(),w},pixelBoxStyles:function(){return u(),k},pixelPosition:function(){return u(),C},reliableMarginLeft:function(){return u(),S},scrollboxSize:function(){return u(),T},reliableTrDimensions:function(){var ee,ae,Z,de;return O==null&&(ee=Ye.createElement("table"),ae=Ye.createElement("tr"),Z=Ye.createElement("div"),ee.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ae.style.cssText="box-sizing:content-box;border:1px solid",ae.style.height="1px",Z.style.height="9px",Z.style.display="block",So.appendChild(ee).appendChild(ae).appendChild(Z),de=ve.getComputedStyle(ae),O=parseInt(de.height,10)+parseInt(de.borderTopWidth,10)+parseInt(de.borderBottomWidth,10)===ae.offsetHeight,So.removeChild(ee)),O}}))})();var Jt=["Webkit","Moz","ms"],Ka=Ye.createElement("div").style,Xa={};function Cr(u){var p=x.cssProps[u]||Xa[u];return p||(u in Ka?u:Xa[u]=(function(C){for(var w=C[0].toUpperCase()+C.slice(1),T=Jt.length;T--;)if((C=Jt[T]+w)in Ka)return C})(u)||u)}var tm=/^(none|table(?!-c[ea]).+)/,Tc={position:"absolute",visibility:"hidden",display:"block"},Eo={letterSpacing:"0",fontWeight:"400"};function ds(u,p,C){var w=xn.exec(p);return w?Math.max(0,w[2]-(C||0))+(w[3]||"px"):p}function us(u,p,C,w,T,k){var O=p==="width"?1:0,S=0,U=0,V=0;if(C===(w?"border":"content"))return 0;for(;O<4;O+=2)C==="margin"&&(V+=x.css(u,C+$n[O],!0,T)),w?(C==="content"&&(U-=x.css(u,"padding"+$n[O],!0,T)),C!=="margin"&&(U-=x.css(u,"border"+$n[O]+"Width",!0,T))):(U+=x.css(u,"padding"+$n[O],!0,T),C!=="padding"?U+=x.css(u,"border"+$n[O]+"Width",!0,T):S+=x.css(u,"border"+$n[O]+"Width",!0,T));return!w&&0<=k&&(U+=Math.max(0,Math.ceil(u["offset"+p[0].toUpperCase()+p.slice(1)]-k-U-S-.5))||0),U+V}function Xs(u,p,C){var w=Va(u),T=(!Ue.boxSizingReliable()||C)&&x.css(u,"boxSizing",!1,w)==="border-box",k=T,O=cs(u,p,w),S="offset"+p[0].toUpperCase()+p.slice(1);if(qa.test(O)){if(!C)return O;O="auto"}return(!Ue.boxSizingReliable()&&T||!Ue.reliableTrDimensions()&&Ee(u,"tr")||O==="auto"||!parseFloat(O)&&x.css(u,"display",!1,w)==="inline")&&u.getClientRects().length&&(T=x.css(u,"boxSizing",!1,w)==="border-box",(k=S in u)&&(O=u[S])),(O=parseFloat(O)||0)+us(u,p,C||(T?"border":"content"),k,w,O)+"px"}function ro(u,p,C,w,T){return new ro.prototype.init(u,p,C,w,T)}x.extend({cssHooks:{opacity:{get:function(u,p){if(p){var C=cs(u,"opacity");return C===""?"1":C}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(u,p,C,w){if(u&&u.nodeType!==3&&u.nodeType!==8&&u.style){var T,k,O,S=qt(p),U=Wa.test(p),V=u.style;if(U||(p=Cr(S)),O=x.cssHooks[p]||x.cssHooks[S],C===void 0)return O&&"get"in O&&(T=O.get(u,!1,w))!==void 0?T:V[p];(k=typeof C)=="string"&&(T=xn.exec(C))&&T[1]&&(C=qs(u,p,T),k="number"),C!=null&&C==C&&(k!=="number"||U||(C+=T&&T[3]||(x.cssNumber[S]?"":"px")),Ue.clearCloneStyle||C!==""||p.indexOf("background")!==0||(V[p]="inherit"),O&&"set"in O&&(C=O.set(u,C,w))===void 0||(U?V.setProperty(p,C):V[p]=C))}},css:function(u,p,C,w){var T,k,O,S=qt(p);return Wa.test(p)||(p=Cr(S)),(O=x.cssHooks[p]||x.cssHooks[S])&&"get"in O&&(T=O.get(u,!0,C)),T===void 0&&(T=cs(u,p,w)),T==="normal"&&p in Eo&&(T=Eo[p]),C===""||C?(k=parseFloat(T),C===!0||isFinite(k)?k||0:T):T}}),x.each(["height","width"],function(u,p){x.cssHooks[p]={get:function(C,w,T){if(w)return!tm.test(x.css(C,"display"))||C.getClientRects().length&&C.getBoundingClientRect().width?Xs(C,p,T):qo(C,Tc,function(){return Xs(C,p,T)})},set:function(C,w,T){var k,O=Va(C),S=!Ue.scrollboxSize()&&O.position==="absolute",U=(S||T)&&x.css(C,"boxSizing",!1,O)==="border-box",V=T?us(C,p,T,U,O):0;return U&&S&&(V-=Math.ceil(C["offset"+p[0].toUpperCase()+p.slice(1)]-parseFloat(O[p])-us(C,p,"border",!1,O)-.5)),V&&(k=xn.exec(w))&&(k[3]||"px")!=="px"&&(C.style[p]=w,w=x.css(C,p)),ds(0,w,V)}}}),x.cssHooks.marginLeft=hn(Ue.reliableMarginLeft,function(u,p){if(p)return(parseFloat(cs(u,"marginLeft"))||u.getBoundingClientRect().left-qo(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(u,p){x.cssHooks[u+p]={expand:function(C){for(var w=0,T={},k=typeof C=="string"?C.split(" "):[C];w<4;w++)T[u+$n[w]+p]=k[w]||k[w-2]||k[0];return T}},u!=="margin"&&(x.cssHooks[u+p].set=ds)}),x.fn.extend({css:function(u,p){return go(this,function(C,w,T){var k,O,S={},U=0;if(Array.isArray(w)){for(k=Va(C),O=w.length;U<O;U++)S[w[U]]=x.css(C,w[U],!1,k);return S}return T!==void 0?x.style(C,w,T):x.css(C,w)},u,p,1<arguments.length)}}),((x.Tween=ro).prototype={constructor:ro,init:function(u,p,C,w,T,k){this.elem=u,this.prop=C,this.easing=T||x.easing._default,this.options=p,this.start=this.now=this.cur(),this.end=w,this.unit=k||(x.cssNumber[C]?"":"px")},cur:function(){var u=ro.propHooks[this.prop];return u&&u.get?u.get(this):ro.propHooks._default.get(this)},run:function(u){var p,C=ro.propHooks[this.prop];return this.options.duration?this.pos=p=x.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):this.pos=p=u,this.now=(this.end-this.start)*p+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),C&&C.set?C.set(this):ro.propHooks._default.set(this),this}}).init.prototype=ro.prototype,(ro.propHooks={_default:{get:function(u){var p;return u.elem.nodeType!==1||u.elem[u.prop]!=null&&u.elem.style[u.prop]==null?u.elem[u.prop]:(p=x.css(u.elem,u.prop,""))&&p!=="auto"?p:0},set:function(u){x.fx.step[u.prop]?x.fx.step[u.prop](u):u.elem.nodeType!==1||!x.cssHooks[u.prop]&&u.elem.style[Cr(u.prop)]==null?u.elem[u.prop]=u.now:x.style(u.elem,u.prop,u.now+u.unit)}}}).scrollTop=ro.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},x.easing={linear:function(u){return u},swing:function(u){return .5-Math.cos(u*Math.PI)/2},_default:"swing"},x.fx=ro.prototype.init,x.fx.step={};var qn,xr,Ft,Kr,Dc=/^(?:toggle|show|hide)$/,Rc=/queueHooks$/;function Ys(){xr&&(Ye.hidden===!1&&ve.requestAnimationFrame?ve.requestAnimationFrame(Ys):ve.setTimeout(Ys,x.fx.interval),x.fx.tick())}function Gs(){return ve.setTimeout(function(){qn=void 0}),qn=Date.now()}function ms(u,p){var C,w=0,T={height:u};for(p=p?1:0;w<4;w+=2-p)T["margin"+(C=$n[w])]=T["padding"+C]=u;return p&&(T.opacity=T.width=u),T}function fs(u,p,C){for(var w,T=(Yn.tweeners[p]||[]).concat(Yn.tweeners["*"]),k=0,O=T.length;k<O;k++)if(w=T[k].call(C,p,u))return w}function Yn(u,p,C){var w,T,k=0,O=Yn.prefilters.length,S=x.Deferred().always(function(){delete U.elem}),U=function(){if(T)return!1;for(var ae=qn||Gs(),Z=Math.max(0,V.startTime+V.duration-ae),de=1-(Z/V.duration||0),pe=0,Ze=V.tweens.length;pe<Ze;pe++)V.tweens[pe].run(de);return S.notifyWith(u,[V,de,Z]),de<1&&Ze?Z:(Ze||S.notifyWith(u,[V,1,0]),S.resolveWith(u,[V]),!1)},V=S.promise({elem:u,props:x.extend({},p),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},C),originalProperties:p,originalOptions:C,startTime:qn||Gs(),duration:C.duration,tweens:[],createTween:function(ae,Z){var de=x.Tween(u,V.opts,ae,Z,V.opts.specialEasing[ae]||V.opts.easing);return V.tweens.push(de),de},stop:function(ae){var Z=0,de=ae?V.tweens.length:0;if(T)return this;for(T=!0;Z<de;Z++)V.tweens[Z].run(1);return ae?(S.notifyWith(u,[V,1,0]),S.resolveWith(u,[V,ae])):S.rejectWith(u,[V,ae]),this}}),ee=V.props;for(!(function(ae,Z){var de,pe,Ze,ut,nn;for(de in ae)if(Ze=Z[pe=qt(de)],ut=ae[de],Array.isArray(ut)&&(Ze=ut[1],ut=ae[de]=ut[0]),de!==pe&&(ae[pe]=ut,delete ae[de]),(nn=x.cssHooks[pe])&&"expand"in nn)for(de in ut=nn.expand(ut),delete ae[pe],ut)de in ae||(ae[de]=ut[de],Z[de]=Ze);else Z[pe]=Ze})(ee,V.opts.specialEasing);k<O;k++)if(w=Yn.prefilters[k].call(V,u,ee,V.opts))return Be(w.stop)&&(x._queueHooks(V.elem,V.opts.queue).stop=w.stop.bind(w)),w;return x.map(ee,fs,V),Be(V.opts.start)&&V.opts.start.call(u,V),V.progress(V.opts.progress).done(V.opts.done,V.opts.complete).fail(V.opts.fail).always(V.opts.always),x.fx.timer(x.extend(U,{elem:u,anim:V,queue:V.opts.queue})),V}x.Animation=x.extend(Yn,{tweeners:{"*":[function(u,p){var C=this.createTween(u,p);return qs(C.elem,u,xn.exec(p),C),C}]},tweener:function(u,p){Be(u)?(p=u,u=["*"]):u=u.match(qe);for(var C,w=0,T=u.length;w<T;w++)C=u[w],Yn.tweeners[C]=Yn.tweeners[C]||[],Yn.tweeners[C].unshift(p)},prefilters:[function(u,p,C){var w,T,k,O,S,U,V,ee,ae="width"in p||"height"in p,Z=this,de={},pe=u.style,Ze=u.nodeType&&Ct(u),ut=Ge.get(u,"fxshow");for(w in C.queue||((O=x._queueHooks(u,"fx")).unqueued==null&&(O.unqueued=0,S=O.empty.fire,O.empty.fire=function(){O.unqueued||S()}),O.unqueued++,Z.always(function(){Z.always(function(){O.unqueued--,x.queue(u,"fx").length||O.empty.fire()})})),p)if(T=p[w],Dc.test(T)){if(delete p[w],k=k||T==="toggle",T===(Ze?"hide":"show")){if(T!=="show"||!ut||ut[w]===void 0)continue;Ze=!0}de[w]=ut&&ut[w]||x.style(u,w)}if((U=!x.isEmptyObject(p))||!x.isEmptyObject(de))for(w in ae&&u.nodeType===1&&(C.overflow=[pe.overflow,pe.overflowX,pe.overflowY],(V=ut&&ut.display)==null&&(V=Ge.get(u,"display")),(ee=x.css(u,"display"))==="none"&&(V?ee=V:(br([u],!0),V=u.style.display||V,ee=x.css(u,"display"),br([u]))),(ee==="inline"||ee==="inline-block"&&V!=null)&&x.css(u,"float")==="none"&&(U||(Z.done(function(){pe.display=V}),V==null&&(ee=pe.display,V=ee==="none"?"":ee)),pe.display="inline-block")),C.overflow&&(pe.overflow="hidden",Z.always(function(){pe.overflow=C.overflow[0],pe.overflowX=C.overflow[1],pe.overflowY=C.overflow[2]})),U=!1,de)U||(ut?"hidden"in ut&&(Ze=ut.hidden):ut=Ge.access(u,"fxshow",{display:V}),k&&(ut.hidden=!Ze),Ze&&br([u],!0),Z.done(function(){for(w in Ze||br([u]),Ge.remove(u,"fxshow"),de)x.style(u,w,de[w])})),U=fs(Ze?ut[w]:0,w,Z),w in ut||(ut[w]=U.start,Ze&&(U.end=U.start,U.start=0))}],prefilter:function(u,p){p?Yn.prefilters.unshift(u):Yn.prefilters.push(u)}}),x.speed=function(u,p,C){var w=u&&typeof u=="object"?x.extend({},u):{complete:C||!C&&p||Be(u)&&u,duration:u,easing:C&&p||p&&!Be(p)&&p};return x.fx.off?w.duration=0:typeof w.duration!="number"&&(w.duration in x.fx.speeds?w.duration=x.fx.speeds[w.duration]:w.duration=x.fx.speeds._default),w.queue!=null&&w.queue!==!0||(w.queue="fx"),w.old=w.complete,w.complete=function(){Be(w.old)&&w.old.call(this),w.queue&&x.dequeue(this,w.queue)},w},x.fn.extend({fadeTo:function(u,p,C,w){return this.filter(Ct).css("opacity",0).show().end().animate({opacity:p},u,C,w)},animate:function(u,p,C,w){var T=x.isEmptyObject(u),k=x.speed(p,C,w),O=function(){var S=Yn(this,x.extend({},u),k);(T||Ge.get(this,"finish"))&&S.stop(!0)};return O.finish=O,T||k.queue===!1?this.each(O):this.queue(k.queue,O)},stop:function(u,p,C){var w=function(T){var k=T.stop;delete T.stop,k(C)};return typeof u!="string"&&(C=p,p=u,u=void 0),p&&this.queue(u||"fx",[]),this.each(function(){var T=!0,k=u!=null&&u+"queueHooks",O=x.timers,S=Ge.get(this);if(k)S[k]&&S[k].stop&&w(S[k]);else for(k in S)S[k]&&S[k].stop&&Rc.test(k)&&w(S[k]);for(k=O.length;k--;)O[k].elem!==this||u!=null&&O[k].queue!==u||(O[k].anim.stop(C),T=!1,O.splice(k,1));!T&&C||x.dequeue(this,u)})},finish:function(u){return u!==!1&&(u=u||"fx"),this.each(function(){var p,C=Ge.get(this),w=C[u+"queue"],T=C[u+"queueHooks"],k=x.timers,O=w?w.length:0;for(C.finish=!0,x.queue(this,u,[]),T&&T.stop&&T.stop.call(this,!0),p=k.length;p--;)k[p].elem===this&&k[p].queue===u&&(k[p].anim.stop(!0),k.splice(p,1));for(p=0;p<O;p++)w[p]&&w[p].finish&&w[p].finish.call(this);delete C.finish})}}),x.each(["toggle","show","hide"],function(u,p){var C=x.fn[p];x.fn[p]=function(w,T,k){return w==null||typeof w=="boolean"?C.apply(this,arguments):this.animate(ms(p,!0),w,T,k)}}),x.each({slideDown:ms("show"),slideUp:ms("hide"),slideToggle:ms("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,p){x.fn[u]=function(C,w,T){return this.animate(p,C,w,T)}}),x.timers=[],x.fx.tick=function(){var u,p=0,C=x.timers;for(qn=Date.now();p<C.length;p++)(u=C[p])()||C[p]!==u||C.splice(p--,1);C.length||x.fx.stop(),qn=void 0},x.fx.timer=function(u){x.timers.push(u),x.fx.start()},x.fx.interval=13,x.fx.start=function(){xr||(xr=!0,Ys())},x.fx.stop=function(){xr=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(u,p){return u=x.fx&&x.fx.speeds[u]||u,p=p||"fx",this.queue(p,function(C,w){var T=ve.setTimeout(C,u);w.stop=function(){ve.clearTimeout(T)}})},Ft=Ye.createElement("input"),Kr=Ye.createElement("select").appendChild(Ye.createElement("option")),Ft.type="checkbox",Ue.checkOn=Ft.value!=="",Ue.optSelected=Kr.selected,(Ft=Ye.createElement("input")).value="t",Ft.type="radio",Ue.radioValue=Ft.value==="t";var tl,ko=x.expr.attrHandle;x.fn.extend({attr:function(u,p){return go(this,x.attr,u,p,1<arguments.length)},removeAttr:function(u){return this.each(function(){x.removeAttr(this,u)})}}),x.extend({attr:function(u,p,C){var w,T,k=u.nodeType;if(k!==3&&k!==8&&k!==2)return typeof u.getAttribute>"u"?x.prop(u,p,C):(k===1&&x.isXMLDoc(u)||(T=x.attrHooks[p.toLowerCase()]||(x.expr.match.bool.test(p)?tl:void 0)),C!==void 0?C===null?void x.removeAttr(u,p):T&&"set"in T&&(w=T.set(u,C,p))!==void 0?w:(u.setAttribute(p,C+""),C):T&&"get"in T&&(w=T.get(u,p))!==null?w:(w=x.find.attr(u,p))==null?void 0:w)},attrHooks:{type:{set:function(u,p){if(!Ue.radioValue&&p==="radio"&&Ee(u,"input")){var C=u.value;return u.setAttribute("type",p),C&&(u.value=C),p}}}},removeAttr:function(u,p){var C,w=0,T=p&&p.match(qe);if(T&&u.nodeType===1)for(;C=T[w++];)u.removeAttribute(C)}}),tl={set:function(u,p,C){return p===!1?x.removeAttr(u,C):u.setAttribute(C,C),C}},x.each(x.expr.match.bool.source.match(/\w+/g),function(u,p){var C=ko[p]||x.find.attr;ko[p]=function(w,T,k){var O,S,U=T.toLowerCase();return k||(S=ko[U],ko[U]=O,O=C(w,T,k)!=null?U:null,ko[U]=S),O}});var Oc=/^(?:input|select|textarea|button)$/i,nl=/^(?:a|area)$/i;function _o(u){return(u.match(qe)||[]).join(" ")}function wr(u){return u.getAttribute&&u.getAttribute("class")||""}function Qs(u){return Array.isArray(u)?u:typeof u=="string"&&u.match(qe)||[]}x.fn.extend({prop:function(u,p){return go(this,x.prop,u,p,1<arguments.length)},removeProp:function(u){return this.each(function(){delete this[x.propFix[u]||u]})}}),x.extend({prop:function(u,p,C){var w,T,k=u.nodeType;if(k!==3&&k!==8&&k!==2)return k===1&&x.isXMLDoc(u)||(p=x.propFix[p]||p,T=x.propHooks[p]),C!==void 0?T&&"set"in T&&(w=T.set(u,C,p))!==void 0?w:u[p]=C:T&&"get"in T&&(w=T.get(u,p))!==null?w:u[p]},propHooks:{tabIndex:{get:function(u){var p=x.find.attr(u,"tabindex");return p?parseInt(p,10):Oc.test(u.nodeName)||nl.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Ue.optSelected||(x.propHooks.selected={get:function(u){var p=u.parentNode;return p&&p.parentNode&&p.parentNode.selectedIndex,null},set:function(u){var p=u.parentNode;p&&(p.selectedIndex,p.parentNode&&p.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(u){var p,C,w,T,k,O;return Be(u)?this.each(function(S){x(this).addClass(u.call(this,S,wr(this)))}):(p=Qs(u)).length?this.each(function(){if(w=wr(this),C=this.nodeType===1&&" "+_o(w)+" "){for(k=0;k<p.length;k++)T=p[k],C.indexOf(" "+T+" ")<0&&(C+=T+" ");O=_o(C),w!==O&&this.setAttribute("class",O)}}):this},removeClass:function(u){var p,C,w,T,k,O;return Be(u)?this.each(function(S){x(this).removeClass(u.call(this,S,wr(this)))}):arguments.length?(p=Qs(u)).length?this.each(function(){if(w=wr(this),C=this.nodeType===1&&" "+_o(w)+" "){for(k=0;k<p.length;k++)for(T=p[k];-1<C.indexOf(" "+T+" ");)C=C.replace(" "+T+" "," ");O=_o(C),w!==O&&this.setAttribute("class",O)}}):this:this.attr("class","")},toggleClass:function(u,p){var C,w,T,k,O=typeof u,S=O==="string"||Array.isArray(u);return Be(u)?this.each(function(U){x(this).toggleClass(u.call(this,U,wr(this),p),p)}):typeof p=="boolean"&&S?p?this.addClass(u):this.removeClass(u):(C=Qs(u),this.each(function(){if(S)for(k=x(this),T=0;T<C.length;T++)w=C[T],k.hasClass(w)?k.removeClass(w):k.addClass(w);else u!==void 0&&O!=="boolean"||((w=wr(this))&&Ge.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||u===!1?"":Ge.get(this,"__className__")||""))}))},hasClass:function(u){var p,C,w=0;for(p=" "+u+" ";C=this[w++];)if(C.nodeType===1&&-1<(" "+_o(wr(C))+" ").indexOf(p))return!0;return!1}});var tr=/\r/g;x.fn.extend({val:function(u){var p,C,w,T=this[0];return arguments.length?(w=Be(u),this.each(function(k){var O;this.nodeType===1&&((O=w?u.call(this,k,x(this).val()):u)==null?O="":typeof O=="number"?O+="":Array.isArray(O)&&(O=x.map(O,function(S){return S==null?"":S+""})),(p=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in p&&p.set(this,O,"value")!==void 0||(this.value=O))})):T?(p=x.valHooks[T.type]||x.valHooks[T.nodeName.toLowerCase()])&&"get"in p&&(C=p.get(T,"value"))!==void 0?C:typeof(C=T.value)=="string"?C.replace(tr,""):C??"":void 0}}),x.extend({valHooks:{option:{get:function(u){var p=x.find.attr(u,"value");return p??_o(x.text(u))}},select:{get:function(u){var p,C,w,T=u.options,k=u.selectedIndex,O=u.type==="select-one",S=O?null:[],U=O?k+1:T.length;for(w=k<0?U:O?k:0;w<U;w++)if(((C=T[w]).selected||w===k)&&!C.disabled&&(!C.parentNode.disabled||!Ee(C.parentNode,"optgroup"))){if(p=x(C).val(),O)return p;S.push(p)}return S},set:function(u,p){for(var C,w,T=u.options,k=x.makeArray(p),O=T.length;O--;)((w=T[O]).selected=-1<x.inArray(x.valHooks.option.get(w),k))&&(C=!0);return C||(u.selectedIndex=-1),k}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(u,p){if(Array.isArray(p))return u.checked=-1<x.inArray(x(u).val(),p)}},Ue.checkOn||(x.valHooks[this].get=function(u){return u.getAttribute("value")===null?"on":u.value})});var Js=ve.location,Bc={guid:Date.now()},Ya=/\?/;x.parseXML=function(u){var p,C;if(!u||typeof u!="string")return null;try{p=new ve.DOMParser().parseFromString(u,"text/xml")}catch{}return C=p&&p.getElementsByTagName("parsererror")[0],p&&!C||x.error("Invalid XML: "+(C?x.map(C.childNodes,function(w){return w.textContent}).join(`
`):u)),p};var ol=/^(?:focusinfocus|focusoutblur)$/,rl=function(u){u.stopPropagation()};x.extend(x.event,{trigger:function(u,p,C,w){var T,k,O,S,U,V,ee,ae,Z=[C||Ye],de=Pn.call(u,"type")?u.type:u,pe=Pn.call(u,"namespace")?u.namespace.split("."):[];if(k=ae=O=C=C||Ye,C.nodeType!==3&&C.nodeType!==8&&!ol.test(de+x.event.triggered)&&(-1<de.indexOf(".")&&(de=(pe=de.split(".")).shift(),pe.sort()),U=de.indexOf(":")<0&&"on"+de,(u=u[x.expando]?u:new x.Event(de,typeof u=="object"&&u)).isTrigger=w?2:3,u.namespace=pe.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+pe.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=C),p=p==null?[u]:x.makeArray(p,[u]),ee=x.event.special[de]||{},w||!ee.trigger||ee.trigger.apply(C,p)!==!1)){if(!w&&!ee.noBubble&&!se(C)){for(S=ee.delegateType||de,ol.test(S+de)||(k=k.parentNode);k;k=k.parentNode)Z.push(k),O=k;O===(C.ownerDocument||Ye)&&Z.push(O.defaultView||O.parentWindow||ve)}for(T=0;(k=Z[T++])&&!u.isPropagationStopped();)ae=k,u.type=1<T?S:ee.bindType||de,(V=(Ge.get(k,"events")||Object.create(null))[u.type]&&Ge.get(k,"handle"))&&V.apply(k,p),(V=U&&k[U])&&V.apply&&no(k)&&(u.result=V.apply(k,p),u.result===!1&&u.preventDefault());return u.type=de,w||u.isDefaultPrevented()||ee._default&&ee._default.apply(Z.pop(),p)!==!1||!no(C)||U&&Be(C[de])&&!se(C)&&((O=C[U])&&(C[U]=null),x.event.triggered=de,u.isPropagationStopped()&&ae.addEventListener(de,rl),C[de](),u.isPropagationStopped()&&ae.removeEventListener(de,rl),x.event.triggered=void 0,O&&(C[U]=O)),u.result}},simulate:function(u,p,C){var w=x.extend(new x.Event,C,{type:u,isSimulated:!0});x.event.trigger(w,null,p)}}),x.fn.extend({trigger:function(u,p){return this.each(function(){x.event.trigger(u,p,this)})},triggerHandler:function(u,p){var C=this[0];if(C)return x.event.trigger(u,p,C,!0)}});var Pc=/\[\]$/,sl=/\r?\n/g,Lc=/^(?:submit|button|image|reset|file)$/i,Mc=/^(?:input|select|textarea|keygen)/i;function al(u,p,C,w){var T;if(Array.isArray(p))x.each(p,function(k,O){C||Pc.test(u)?w(u,O):al(u+"["+(typeof O=="object"&&O!=null?k:"")+"]",O,C,w)});else if(C||kt(p)!=="object")w(u,p);else for(T in p)al(u+"["+T+"]",p[T],C,w)}x.param=function(u,p){var C,w=[],T=function(k,O){var S=Be(O)?O():O;w[w.length]=encodeURIComponent(k)+"="+encodeURIComponent(S??"")};if(u==null)return"";if(Array.isArray(u)||u.jquery&&!x.isPlainObject(u))x.each(u,function(){T(this.name,this.value)});else for(C in u)al(C,u[C],p,T);return w.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=x.prop(this,"elements");return u?x.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!x(this).is(":disabled")&&Mc.test(this.nodeName)&&!Lc.test(u)&&(this.checked||!yr.test(u))}).map(function(u,p){var C=x(this).val();return C==null?null:Array.isArray(C)?x.map(C,function(w){return{name:p.name,value:w.replace(sl,`\r
`)}}):{name:p.name,value:C.replace(sl,`\r
`)}}).get()}});var nm=/%20/g,Ic=/#.*$/,Fc=/([?&])_=[^&]*/,jc=/^(.*?):[ \t]*([^\r\n]*)$/gm,zc=/^(?:GET|HEAD)$/,Uc=/^\/\//,il={},Ga={},ll="*/".concat("*"),cl=Ye.createElement("a");function Hc(u){return function(p,C){typeof p!="string"&&(C=p,p="*");var w,T=0,k=p.toLowerCase().match(qe)||[];if(Be(C))for(;w=k[T++];)w[0]==="+"?(w=w.slice(1)||"*",(u[w]=u[w]||[]).unshift(C)):(u[w]=u[w]||[]).push(C)}}function $c(u,p,C,w){var T={},k=u===Ga;function O(S){var U;return T[S]=!0,x.each(u[S]||[],function(V,ee){var ae=ee(p,C,w);return typeof ae!="string"||k||T[ae]?k?!(U=ae):void 0:(p.dataTypes.unshift(ae),O(ae),!1)}),U}return O(p.dataTypes[0])||!T["*"]&&O("*")}function dl(u,p){var C,w,T=x.ajaxSettings.flatOptions||{};for(C in p)p[C]!==void 0&&((T[C]?u:w||(w={}))[C]=p[C]);return w&&x.extend(!0,u,w),u}cl.href=Js.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Js.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Js.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ll,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,p){return p?dl(dl(u,x.ajaxSettings),p):dl(x.ajaxSettings,u)},ajaxPrefilter:Hc(il),ajaxTransport:Hc(Ga),ajax:function(u,p){typeof u=="object"&&(p=u,u=void 0),p=p||{};var C,w,T,k,O,S,U,V,ee,ae,Z=x.ajaxSetup({},p),de=Z.context||Z,pe=Z.context&&(de.nodeType||de.jquery)?x(de):x.event,Ze=x.Deferred(),ut=x.Callbacks("once memory"),nn=Z.statusCode||{},Le={},Ao={},so="canceled",xt={readyState:0,getResponseHeader:function(nt){var wt;if(U){if(!k)for(k={};wt=jc.exec(T);)k[wt[1].toLowerCase()+" "]=(k[wt[1].toLowerCase()+" "]||[]).concat(wt[2]);wt=k[nt.toLowerCase()+" "]}return wt==null?null:wt.join(", ")},getAllResponseHeaders:function(){return U?T:null},setRequestHeader:function(nt,wt){return U==null&&(nt=Ao[nt.toLowerCase()]=Ao[nt.toLowerCase()]||nt,Le[nt]=wt),this},overrideMimeType:function(nt){return U==null&&(Z.mimeType=nt),this},statusCode:function(nt){var wt;if(nt)if(U)xt.always(nt[xt.status]);else for(wt in nt)nn[wt]=[nn[wt],nt[wt]];return this},abort:function(nt){var wt=nt||so;return C&&C.abort(wt),ao(0,wt),this}};if(Ze.promise(xt),Z.url=((u||Z.url||Js.href)+"").replace(Uc,Js.protocol+"//"),Z.type=p.method||p.type||Z.method||Z.type,Z.dataTypes=(Z.dataType||"*").toLowerCase().match(qe)||[""],Z.crossDomain==null){S=Ye.createElement("a");try{S.href=Z.url,S.href=S.href,Z.crossDomain=cl.protocol+"//"+cl.host!=S.protocol+"//"+S.host}catch{Z.crossDomain=!0}}if(Z.data&&Z.processData&&typeof Z.data!="string"&&(Z.data=x.param(Z.data,Z.traditional)),$c(il,Z,p,xt),U)return xt;for(ee in(V=x.event&&Z.global)&&x.active++==0&&x.event.trigger("ajaxStart"),Z.type=Z.type.toUpperCase(),Z.hasContent=!zc.test(Z.type),w=Z.url.replace(Ic,""),Z.hasContent?Z.data&&Z.processData&&(Z.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Z.data=Z.data.replace(nm,"+")):(ae=Z.url.slice(w.length),Z.data&&(Z.processData||typeof Z.data=="string")&&(w+=(Ya.test(w)?"&":"?")+Z.data,delete Z.data),Z.cache===!1&&(w=w.replace(Fc,"$1"),ae=(Ya.test(w)?"&":"?")+"_="+Bc.guid+++ae),Z.url=w+ae),Z.ifModified&&(x.lastModified[w]&&xt.setRequestHeader("If-Modified-Since",x.lastModified[w]),x.etag[w]&&xt.setRequestHeader("If-None-Match",x.etag[w])),(Z.data&&Z.hasContent&&Z.contentType!==!1||p.contentType)&&xt.setRequestHeader("Content-Type",Z.contentType),xt.setRequestHeader("Accept",Z.dataTypes[0]&&Z.accepts[Z.dataTypes[0]]?Z.accepts[Z.dataTypes[0]]+(Z.dataTypes[0]!=="*"?", "+ll+"; q=0.01":""):Z.accepts["*"]),Z.headers)xt.setRequestHeader(ee,Z.headers[ee]);if(Z.beforeSend&&(Z.beforeSend.call(de,xt,Z)===!1||U))return xt.abort();if(so="abort",ut.add(Z.complete),xt.done(Z.success),xt.fail(Z.error),C=$c(Ga,Z,p,xt)){if(xt.readyState=1,V&&pe.trigger("ajaxSend",[xt,Z]),U)return xt;Z.async&&0<Z.timeout&&(O=ve.setTimeout(function(){xt.abort("timeout")},Z.timeout));try{U=!1,C.send(Le,ao)}catch(nt){if(U)throw nt;ao(-1,nt)}}else ao(-1,"No Transport");function ao(nt,wt,ta,ul){var wn,ps,_n,bo,bn,Nn=wt;U||(U=!0,O&&ve.clearTimeout(O),C=void 0,T=ul||"",xt.readyState=0<nt?4:0,wn=200<=nt&&nt<300||nt===304,ta&&(bo=(function(on,an,Xt){for(var Gn,In,st,gt,Vt=on.contents,Bt=on.dataTypes;Bt[0]==="*";)Bt.shift(),Gn===void 0&&(Gn=on.mimeType||an.getResponseHeader("Content-Type"));if(Gn){for(In in Vt)if(Vt[In]&&Vt[In].test(Gn)){Bt.unshift(In);break}}if(Bt[0]in Xt)st=Bt[0];else{for(In in Xt){if(!Bt[0]||on.converters[In+" "+Bt[0]]){st=In;break}gt||(gt=In)}st=st||gt}if(st)return st!==Bt[0]&&Bt.unshift(st),Xt[st]})(Z,xt,ta)),!wn&&-1<x.inArray("script",Z.dataTypes)&&x.inArray("json",Z.dataTypes)<0&&(Z.converters["text script"]=function(){}),bo=(function(on,an,Xt,Gn){var In,st,gt,Vt,Bt,Wn={},Sr=on.dataTypes.slice();if(Sr[1])for(gt in on.converters)Wn[gt.toLowerCase()]=on.converters[gt];for(st=Sr.shift();st;)if(on.responseFields[st]&&(Xt[on.responseFields[st]]=an),!Bt&&Gn&&on.dataFilter&&(an=on.dataFilter(an,on.dataType)),Bt=st,st=Sr.shift()){if(st==="*")st=Bt;else if(Bt!=="*"&&Bt!==st){if(!(gt=Wn[Bt+" "+st]||Wn["* "+st])){for(In in Wn)if((Vt=In.split(" "))[1]===st&&(gt=Wn[Bt+" "+Vt[0]]||Wn["* "+Vt[0]])){gt===!0?gt=Wn[In]:Wn[In]!==!0&&(st=Vt[0],Sr.unshift(Vt[1]));break}}if(gt!==!0)if(gt&&on.throws)an=gt(an);else try{an=gt(an)}catch(gs){return{state:"parsererror",error:gt?gs:"No conversion from "+Bt+" to "+st}}}}return{state:"success",data:an}})(Z,bo,xt,wn),wn?(Z.ifModified&&((bn=xt.getResponseHeader("Last-Modified"))&&(x.lastModified[w]=bn),(bn=xt.getResponseHeader("etag"))&&(x.etag[w]=bn)),nt===204||Z.type==="HEAD"?Nn="nocontent":nt===304?Nn="notmodified":(Nn=bo.state,ps=bo.data,wn=!(_n=bo.error))):(_n=Nn,!nt&&Nn||(Nn="error",nt<0&&(nt=0))),xt.status=nt,xt.statusText=(wt||Nn)+"",wn?Ze.resolveWith(de,[ps,Nn,xt]):Ze.rejectWith(de,[xt,Nn,_n]),xt.statusCode(nn),nn=void 0,V&&pe.trigger(wn?"ajaxSuccess":"ajaxError",[xt,Z,wn?ps:_n]),ut.fireWith(de,[xt,Nn]),V&&(pe.trigger("ajaxComplete",[xt,Z]),--x.active||x.event.trigger("ajaxStop")))}return xt},getJSON:function(u,p,C){return x.get(u,p,C,"json")},getScript:function(u,p){return x.get(u,void 0,p,"script")}}),x.each(["get","post"],function(u,p){x[p]=function(C,w,T,k){return Be(w)&&(k=k||T,T=w,w=void 0),x.ajax(x.extend({url:C,type:p,dataType:k,data:w,success:T},x.isPlainObject(C)&&C))}}),x.ajaxPrefilter(function(u){var p;for(p in u.headers)p.toLowerCase()==="content-type"&&(u.contentType=u.headers[p]||"")}),x._evalUrl=function(u,p,C){return x.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){x.globalEval(w,p,C)}})},x.fn.extend({wrapAll:function(u){var p;return this[0]&&(Be(u)&&(u=u.call(this[0])),p=x(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&p.insertBefore(this[0]),p.map(function(){for(var C=this;C.firstElementChild;)C=C.firstElementChild;return C}).append(this)),this},wrapInner:function(u){return Be(u)?this.each(function(p){x(this).wrapInner(u.call(this,p))}):this.each(function(){var p=x(this),C=p.contents();C.length?C.wrapAll(u):p.append(u)})},wrap:function(u){var p=Be(u);return this.each(function(C){x(this).wrapAll(p?u.call(this,C):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(u){return!x.expr.pseudos.visible(u)},x.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new ve.XMLHttpRequest}catch{}};var No={0:200,1223:204},Zs=x.ajaxSettings.xhr();Ue.cors=!!Zs&&"withCredentials"in Zs,Ue.ajax=Zs=!!Zs,x.ajaxTransport(function(u){var p,C;if(Ue.cors||Zs&&!u.crossDomain)return{send:function(w,T){var k,O=u.xhr();if(O.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(k in u.xhrFields)O[k]=u.xhrFields[k];for(k in u.mimeType&&O.overrideMimeType&&O.overrideMimeType(u.mimeType),u.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)O.setRequestHeader(k,w[k]);p=function(S){return function(){p&&(p=C=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,S==="abort"?O.abort():S==="error"?typeof O.status!="number"?T(0,"error"):T(O.status,O.statusText):T(No[O.status]||O.status,O.statusText,(O.responseType||"text")!=="text"||typeof O.responseText!="string"?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=p(),C=O.onerror=O.ontimeout=p("error"),O.onabort!==void 0?O.onabort=C:O.onreadystatechange=function(){O.readyState===4&&ve.setTimeout(function(){p&&C()})},p=p("abort");try{O.send(u.hasContent&&u.data||null)}catch(S){if(p)throw S}},abort:function(){p&&p()}}}),x.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return x.globalEval(u),u}}}),x.ajaxPrefilter("script",function(u){u.cache===void 0&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),x.ajaxTransport("script",function(u){var p,C;if(u.crossDomain||u.scriptAttrs)return{send:function(w,T){p=x("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",C=function(k){p.remove(),C=null,k&&T(k.type==="error"?404:200,k.type)}),Ye.head.appendChild(p[0])},abort:function(){C&&C()}}});var qc,Wc=[],ea=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=Wc.pop()||x.expando+"_"+Bc.guid++;return this[u]=!0,u}}),x.ajaxPrefilter("json jsonp",function(u,p,C){var w,T,k,O=u.jsonp!==!1&&(ea.test(u.url)?"url":typeof u.data=="string"&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ea.test(u.data)&&"data");if(O||u.dataTypes[0]==="jsonp")return w=u.jsonpCallback=Be(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,O?u[O]=u[O].replace(ea,"$1"+w):u.jsonp!==!1&&(u.url+=(Ya.test(u.url)?"&":"?")+u.jsonp+"="+w),u.converters["script json"]=function(){return k||x.error(w+" was not called"),k[0]},u.dataTypes[0]="json",T=ve[w],ve[w]=function(){k=arguments},C.always(function(){T===void 0?x(ve).removeProp(w):ve[w]=T,u[w]&&(u.jsonpCallback=p.jsonpCallback,Wc.push(w)),k&&Be(T)&&T(k[0]),k=T=void 0}),"script"}),Ue.createHTMLDocument=((qc=Ye.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",qc.childNodes.length===2),x.parseHTML=function(u,p,C){return typeof u!="string"?[]:(typeof p=="boolean"&&(C=p,p=!1),p||(Ue.createHTMLDocument?((w=(p=Ye.implementation.createHTMLDocument("")).createElement("base")).href=Ye.location.href,p.head.appendChild(w)):p=Ye),k=!C&&[],(T=_.exec(u))?[p.createElement(T[1])]:(T=Zi([u],p,k),k&&k.length&&x(k).remove(),x.merge([],T.childNodes)));var w,T,k},x.fn.load=function(u,p,C){var w,T,k,O=this,S=u.indexOf(" ");return-1<S&&(w=_o(u.slice(S)),u=u.slice(0,S)),Be(p)?(C=p,p=void 0):p&&typeof p=="object"&&(T="POST"),0<O.length&&x.ajax({url:u,type:T||"GET",dataType:"html",data:p}).done(function(U){k=arguments,O.html(w?x("<div>").append(x.parseHTML(U)).find(w):U)}).always(C&&function(U,V){O.each(function(){C.apply(this,k||[U.responseText,V,U])})}),this},x.expr.pseudos.animated=function(u){return x.grep(x.timers,function(p){return u===p.elem}).length},x.offset={setOffset:function(u,p,C){var w,T,k,O,S,U,V=x.css(u,"position"),ee=x(u),ae={};V==="static"&&(u.style.position="relative"),S=ee.offset(),k=x.css(u,"top"),U=x.css(u,"left"),(V==="absolute"||V==="fixed")&&-1<(k+U).indexOf("auto")?(O=(w=ee.position()).top,T=w.left):(O=parseFloat(k)||0,T=parseFloat(U)||0),Be(p)&&(p=p.call(u,C,x.extend({},S))),p.top!=null&&(ae.top=p.top-S.top+O),p.left!=null&&(ae.left=p.left-S.left+T),"using"in p?p.using.call(u,ae):ee.css(ae)}},x.fn.extend({offset:function(u){if(arguments.length)return u===void 0?this:this.each(function(T){x.offset.setOffset(this,u,T)});var p,C,w=this[0];return w?w.getClientRects().length?(p=w.getBoundingClientRect(),C=w.ownerDocument.defaultView,{top:p.top+C.pageYOffset,left:p.left+C.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var u,p,C,w=this[0],T={top:0,left:0};if(x.css(w,"position")==="fixed")p=w.getBoundingClientRect();else{for(p=this.offset(),C=w.ownerDocument,u=w.offsetParent||C.documentElement;u&&(u===C.body||u===C.documentElement)&&x.css(u,"position")==="static";)u=u.parentNode;u&&u!==w&&u.nodeType===1&&((T=x(u).offset()).top+=x.css(u,"borderTopWidth",!0),T.left+=x.css(u,"borderLeftWidth",!0))}return{top:p.top-T.top-x.css(w,"marginTop",!0),left:p.left-T.left-x.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&x.css(u,"position")==="static";)u=u.offsetParent;return u||So})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,p){var C=p==="pageYOffset";x.fn[u]=function(w){return go(this,function(T,k,O){var S;if(se(T)?S=T:T.nodeType===9&&(S=T.defaultView),O===void 0)return S?S[p]:T[k];S?S.scrollTo(C?S.pageXOffset:O,C?O:S.pageYOffset):T[k]=O},u,w,arguments.length)}}),x.each(["top","left"],function(u,p){x.cssHooks[p]=hn(Ue.pixelPosition,function(C,w){if(w)return w=cs(C,p),qa.test(w)?x(C).position()[p]+"px":w})}),x.each({Height:"height",Width:"width"},function(u,p){x.each({padding:"inner"+u,content:p,"":"outer"+u},function(C,w){x.fn[w]=function(T,k){var O=arguments.length&&(C||typeof T!="boolean"),S=C||(T===!0||k===!0?"margin":"border");return go(this,function(U,V,ee){var ae;return se(U)?w.indexOf("outer")===0?U["inner"+u]:U.document.documentElement["client"+u]:U.nodeType===9?(ae=U.documentElement,Math.max(U.body["scroll"+u],ae["scroll"+u],U.body["offset"+u],ae["offset"+u],ae["client"+u])):ee===void 0?x.css(U,V,S):x.style(U,V,ee,S)},p,O?T:void 0,O)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,p){x.fn[p]=function(C){return this.on(p,C)}}),x.fn.extend({bind:function(u,p,C){return this.on(u,null,p,C)},unbind:function(u,p){return this.off(u,null,p)},delegate:function(u,p,C,w){return this.on(p,u,C,w)},undelegate:function(u,p,C){return arguments.length===1?this.off(u,"**"):this.off(p,u||"**",C)},hover:function(u,p){return this.on("mouseenter",u).on("mouseleave",p||u)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,p){x.fn[p]=function(C,w){return 0<arguments.length?this.on(p,null,C,w):this.trigger(p)}});var Wo=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(u,p){var C,w,T;if(typeof p=="string"&&(C=u[p],p=u,u=C),Be(u))return w=it.call(arguments,2),(T=function(){return u.apply(p||this,w.concat(it.call(arguments)))}).guid=u.guid=u.guid||x.guid++,T},x.holdReady=function(u){u?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=Ee,x.isFunction=Be,x.isWindow=se,x.camelCase=qt,x.type=kt,x.now=Date.now,x.isNumeric=function(u){var p=x.type(u);return(p==="number"||p==="string")&&!isNaN(u-parseFloat(u))},x.trim=function(u){return u==null?"":(u+"").replace(Wo,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return x});var Vo=ve.jQuery,Xr=ve.$;return x.noConflict=function(u){return ve.$===x&&(ve.$=Xr),u&&ve.jQuery===x&&(ve.jQuery=Vo),x},typeof Ke>"u"&&(ve.jQuery=ve.$=x),x}),(function(ve){ve.imageArea=function(Ke,Xe){var $e=Ke.options,it=Ke.$image,Gt=Ke.$trigger,Bn,rn,Kn,Co={},Pn,xo=!0,we=!0,Ue=[0,0],Be=[0,0],se={id:Xe,x:0,y:0,z:0,height:0,width:0},Ye=function(){se.z=0,ie("blur")},Cn=function(){Ke.blurAll(),se.z=100,ie()},jt=function(){return se},kt=function(ke){it.trigger(ke,[se.id,Ke.areas()])},te=function(ke){var et=ke||window.event||{};et.cancelBubble=!0,et.returnValue=!1,et.stopPropagation&&et.stopPropagation(),et.preventDefault&&et.preventDefault()},ht=function(){ve.each(arguments,function(ke,et){x(et)})},x=function(ke,et){var dt,Se;switch(ke){case"start":dt="mousedown",Se="touchstart";break;case"move":dt="mousemove",Se="touchmove";break;case"stop":dt="mouseup",Se="touchend";break;default:return}et&&jQuery.isFunction(et)?ve(window.document).on(dt,et).on(Se,et):ve(window.document).off(dt).off(Se)},Ln=function(){Bn.css({cursor:"default",width:se.width,height:se.height,left:se.x,top:se.y}),rn.css({backgroundPosition:-se.x-1+"px "+(-se.y-1)+"px",cursor:$e.allowMove?"move":"default",width:se.width-2>0?se.width-2:0,height:se.height-2>0?se.height-2:0,left:se.x+1,top:se.y+1}),Kn.css({width:se.width-2>0?se.width-2:0,left:se.x+2,top:se.y+1})},Ee=function(ke){$e.allowResize&&(ke?ve.each(Co,function(et,dt){var Se,yt,qe=Math.round(dt.width()/2),K=Math.round(dt.height()/2),hr=et[0],Zo=et[et.length-1];hr==="n"?Se=-K:hr==="s"?Se=se.height-K-1:Se=Math.round(se.height/2)-K-1,Zo==="e"?yt=se.width-qe-1:Zo==="w"?yt=-qe:yt=Math.round(se.width/2)-qe-1,dt.css({display:"block",left:se.x+yt,top:se.y+Se})}):ve(".select-areas-resize-handler").each(function(){ve(this).css({display:"none"})}))},Mn=function(ke){Pn&&Pn.css({display:ke?"block":"none",left:se.x+se.width+1,top:se.y-Pn.outerHeight()-1})},Us=function(ke){Bn.css({cursor:ke}),rn.css({cursor:ke})},ie=function(ke){switch(ke){case"startSelection":Ke._refresh(),Ln(),Ee(),Mn(!0);break;case"pickSelection":case"pickResizeHandler":Ee();break;case"resizeSelection":Ln(),Ee(),Us("crosshair"),Mn(!0);break;case"moveSelection":Ln(),Ee(),Us("move"),Mn(!0);break;case"blur":Ln(),Ee(),Mn();break;default:Ln(),Ee(!0),Mn(!0)}},bt=function(ke){te(ke),se.width=$e.minSize[0],se.height=$e.minSize[1],Cn(),x("move",$o),x("stop",Xn),Be=_(ke),Be[0]+se.width>it.width()&&(Be[0]=it.width()-se.width),Be[1]+se.height>it.height()&&(Be[1]=it.height()-se.height),se.x=Be[0],se.y=Be[1],ie("startSelection")},Jo=function(ke){te(ke),Cn(),x("move",po),x("stop",Xn);var et=_(ke);Ue[0]=et[0]-se.x,Ue[1]=et[1]-se.y,ie("pickSelection")},Ce=function(ke){te(ke),Cn();var et=ke.target.className.split(" ")[1];et[et.length-1]==="w"&&(Be[0]+=se.width,se.x=Be[0]-se.width),et[0]==="n"&&(Be[1]+=se.height,se.y=Be[1]-se.height),et==="n"||et==="s"?xo=!1:(et==="e"||et==="w")&&(we=!1),x("move",$o),x("stop",Xn),ie("pickResizeHandler")},$o=function(ke){te(ke),Cn();var et=_(ke),dt=et[1]-Be[1],Se=et[0]-Be[0];Math.abs(Se)<$e.minSize[0]&&(Se=Se>=0?$e.minSize[0]:-$e.minSize[0]),Math.abs(dt)<$e.minSize[1]&&(dt=dt>=0?$e.minSize[1]:-$e.minSize[1]),(Be[0]+Se<0||Be[0]+Se>it.width())&&(Se=-Se),(Be[1]+dt<0||Be[1]+dt>it.height())&&(dt=-dt),$e.maxSize[0]>$e.minSize[0]&&$e.maxSize[1]>$e.minSize[1]&&(Math.abs(Se)>$e.maxSize[0]&&(Se=Se>=0?$e.maxSize[0]:-$e.maxSize[0]),Math.abs(dt)>$e.maxSize[1]&&(dt=dt>=0?$e.maxSize[1]:-$e.maxSize[1])),xo&&(se.width=Se),we&&(se.height=dt),$e.aspectRatio&&(Se>0&&dt>0||Se<0&&dt<0?xo?dt=Math.round(Se/$e.aspectRatio):Se=Math.round(dt*$e.aspectRatio):xo?dt=-Math.round(Se/$e.aspectRatio):Se=-Math.round(dt*$e.aspectRatio),Be[0]+Se>it.width()&&(Se=it.width()-Be[0],dt=dt>0?Math.round(Se/$e.aspectRatio):-Math.round(Se/$e.aspectRatio)),Be[1]+dt<0&&(dt=-Be[1],Se=Se>0?-Math.round(dt*$e.aspectRatio):Math.round(dt*$e.aspectRatio)),Be[1]+dt>it.height()&&(dt=it.height()-Be[1],Se=Se>0?Math.round(dt*$e.aspectRatio):-Math.round(dt*$e.aspectRatio)),se.width=Se,se.height=dt),se.width<0?(se.width=Math.abs(se.width),se.x=Be[0]-se.width):se.x=Be[0],se.height<0?(se.height=Math.abs(se.height),se.y=Be[1]-se.height):se.y=Be[1],kt("changing"),ie("resizeSelection")},po=function(ke){if(te(ke),!!$e.allowMove){Cn();var et=_(ke);pr({x:et[0]-Ue[0],y:et[1]-Ue[1]}),kt("changing")}},pr=function(ke){ke.x>0?ke.x+se.width<it.width()?se.x=ke.x:se.x=it.width()-se.width:se.x=0,ke.y>0?ke.y+se.height<it.height()?se.y=ke.y:se.y=it.height()-se.height:se.y=0,ie("moveSelection")},Xn=function(ke,et){te(ke),ht("move","stop"),et&&(se.x=et.x,se.y=et.y,se.z=et.z,se.width=et.width,se.height=et.height,Ln()),Be[0]=se.x,Be[1]=se.y,xo=!0,we=!0,kt("changed"),ie("releaseSelection")},_t=function(ke){kt("deleted"),te(ke),rn.remove(),Bn.remove(),Kn.remove(),ve.each(Co,function(et,dt){dt.remove()}),Pn&&Pn.remove(),Ke._remove(Xe)},zt=function(ke){var et=ve(ke).offset();return[et.left,et.top]},_=function(ke){var et=zt(it);ke.pageX||(ke.originalEvent&&(ke=ke.originalEvent),ke.changedTouches&&(ke=ke.changedTouches[0]),ke.touches&&(ke=ke.touches[0]));var dt=ke.pageX-et[0],Se=ke.pageY-et[1];return dt=dt<0?0:dt>it.width()?it.width():dt,Se=Se<0?0:Se>it.height()?it.height():Se,[dt,Se]};if(Bn=ve("<div id='select-areas-outline_"+jt().id+`'  class="select-areas-outline"/>`).css({opacity:$e.outlineOpacity,position:"absolute"}).insertAfter(Gt),rn=ve("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+jt().id).css({position:"absolute"}).insertAfter(Bn),Kn=ve("<div id='select-areas-label-container_"+jt().id+`'  class="select-areas-label-container"/>`).css({position:"absolute"}).insertAfter(Gt),$e.allowResize&&ve.each(["nw","n","ne","e","se","s","sw","w"],function(ke,et){Co[et]=ve('<div class="select-areas-resize-handler '+et+" select-areas-resize-handler_"+jt().id+'"/>').css({opacity:.5,position:"absolute",cursor:et+"-resize"}).insertAfter(rn).mousedown(Ce).bind("touchstart",Ce)}),$e.allowDelete){var gr=function(ke){return ke.click(_t).bind("touchstart",_t).bind("tap",_t),ke};Pn=gr(ve("<div id='select-areas-delete_"+jt().id+`'  class="delete-area" />`)).append(gr(ve('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(rn)}return $e.allowMove&&rn.mousedown(Jo).bind("touchstart",Jo),Cn(),{getData:jt,startSelection:bt,deleteSelection:_t,options:$e,blur:Ye,focus:Cn,nudge:function(ke){ke.x=se.x,ke.y=se.y,ke.d&&(ke.y=se.y+ke.d),ke.u&&(ke.y=se.y-ke.u),ke.l&&(ke.x=se.x-ke.l),ke.r&&(ke.x=se.x+ke.r),pr(ke),kt("changed")},set:function(ke,et){se=ve.extend(se,ke),Be[0]=se.x,Be[1]=se.y,et||kt("changed")},contains:function(ke){return ke.x>=se.x&&ke.x<=se.x+se.width&&ke.y>=se.y&&ke.y<=se.y+se.height}}},ve.imageSelectAreas=function(){},ve.imageSelectAreas.prototype.init=function(Ke,Xe){var $e=this,it={allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null};this.options=ve.extend(it,Xe),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=ve(Ke),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=ve("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=ve('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=ve("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),ve.each(this.options.areas,function(Gt,Bn){$e._add(Bn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(ve.proxy(this.newArea,this)).on("touchstart",ve.proxy(this.newArea,this)),this.options.allowNudge&&ve("html").keydown(function(Gt){var Bn={37:"l",38:"u",39:"r",40:"d"},rn=Bn[Gt.which],Kn;if(rn&&($e._eachArea(function(Pn){if(Pn.getData().z===100)return Kn=Pn,!1}),Kn)){var Co={};Co[rn]=1,Kn.nudge(Co)}})},ve.imageSelectAreas.prototype._refresh=function(){var Ke=this.areas().length;this.$overlay.css({display:Ke?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},ve.imageSelectAreas.prototype._eachArea=function(Ke){ve.each(this._areas,function(Xe,$e){if($e)return Ke($e,Xe)})},ve.imageSelectAreas.prototype._remove=function(Ke){delete this._areas[Ke],this._refresh()},ve.imageSelectAreas.prototype.remove=function(Ke){this._areas[Ke]&&this._areas[Ke].deleteSelection()},ve.imageSelectAreas.prototype.newArea=function(Ke){var Xe=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function($e,it){Xe=Math.max(Xe,parseInt(it,10))}),Xe+=1,this._areas[Xe]=ve.imageArea(this,Xe),Ke&&this._areas[Xe].startSelection(Ke)),Xe},ve.imageSelectAreas.prototype.set=function(Ke,Xe,$e){this._areas[Ke]&&(Xe.id=Ke,this._areas[Ke].set(Xe,$e),this._areas[Ke].focus())},ve.imageSelectAreas.prototype._add=function(Ke,Xe){var $e=this.newArea();this.set($e,Ke,Xe)},ve.imageSelectAreas.prototype.add=function(Ke){var Xe=this;this.blurAll(),ve.isArray(Ke)?ve.each(Ke,function($e,it){Xe._add(it)}):this._add(Ke),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},ve.imageSelectAreas.prototype.reset=function(){var Ke=this;this._eachArea(function(Xe,$e){Ke.remove($e)}),this._refresh()},ve.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},ve.imageSelectAreas.prototype.areas=function(){var Ke=[];return this._eachArea(function(Xe){Ke.push(Xe.getData())}),Ke},ve.imageSelectAreas.prototype.relativeAreas=function(){for(var Ke=this.areas(),Xe=[],$e=this.ratio,it=function(Bn){return Math.floor(Bn/$e)},Gt=0;Gt<Ke.length;Gt++)Xe[Gt]=ve.extend({},Ke[Gt]),Xe[Gt].x=it(Xe[Gt].x),Xe[Gt].y=it(Xe[Gt].y),Xe[Gt].width=it(Xe[Gt].width),Xe[Gt].height=it(Xe[Gt].height);return Xe},ve.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(Ke){Ke.blur()})},ve.imageSelectAreas.prototype.contains=function(Ke){var Xe=!1;return this._eachArea(function($e){if($e.contains(Ke))return Xe=!0,!1}),Xe},ve.selectAreas=function(Ke,Xe){var $e=ve(Ke);if(!$e.data("mainImageSelectAreas")){var it=new ve.imageSelectAreas;it.init(Ke,Xe),$e.data("mainImageSelectAreas",it),$e.trigger("loaded")}return $e.data("mainImageSelectAreas")},ve.fn.selectAreas=function(Ke){if(ve.imageSelectAreas.prototype[Ke]){var Xe=ve.imageSelectAreas.prototype[Ke].apply(ve.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Xe>"u"?this:Xe}else{if(typeof Ke=="object"||!Ke)return this.each(function(){var $e=this,it=new Image;it.onload=function(){ve.selectAreas($e,Ke)},it.src=$e.src}),this;ve.error("Method "+Ke+" does not exist on jQuery.selectAreas")}}})(jQuery);

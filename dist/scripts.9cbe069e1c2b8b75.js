!function(){"use strict";var bt=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},qt=function(t){return{eq:t}},Wt=qt(function(t,e){return t===e}),Ht=function(t){return qt(function(e,n){if(e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t.eq(e[o],n[o]))return!1;return!0})},ne=function(t){return qt(function(e,n){var l,u,f,r=Object.keys(e),o=Object.keys(n);if(!(l=Wt,u=Ht(l),f=function(u){return Array.prototype.slice.call(u).sort(void 0)},qt(function(p,v){return u.eq(f(p),f(v))})).eq(r,o))return!1;for(var s=r.length,a=0;a<s;a++){var i=r[a];if(!t.eq(e[i],n[i]))return!1}return!0})},je=qt(function(t,e){if(t===e)return!0;var n=bt(t);return n===bt(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?Ht(je).eq(t,e):"object"===n&&ne(je).eq(t,e))});const kn=Object.getPrototypeOf,Ke=(t,e,n)=>{var r;return!!n(t,e.prototype)||(null===(r=t.constructor)||void 0===r?void 0:r.name)===e.name},Wn=t=>e=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&Ke(n,String,(o,s)=>s.isPrototypeOf(o))?"string":r})(e)===t,yr=t=>e=>typeof e===t,En=t=>e=>t===e,Cr=(t,e)=>Vt(t)&&Ke(t,e,(n,r)=>kn(n)===r),Dt=Wn("string"),Vt=Wn("object"),Pt=t=>Cr(t,Object),ct=Wn("array"),Qt=En(null),Mn=yr("boolean"),De=En(void 0),ye=t=>null==t,mt=t=>!ye(t),pe=yr("function"),x=yr("number"),In=(t,e)=>{if(ct(t)){for(let n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}return!1},Nt=()=>{},ir=(t,e)=>(...n)=>t(e.apply(null,n)),Ls=(t,e)=>n=>t(e(n)),pt=t=>()=>t,ue=t=>t,go=(t,e)=>t===e;function St(t,...e){return(...n)=>{const r=e.concat(n);return t.apply(null,r)}}const Fo=t=>e=>!t(e),fr=t=>()=>{throw new Error(t)},ho=t=>t(),Vn=t=>{t()},Ce=pt(!1),Be=pt(!0);class E{constructor(e,n){this.tag=e,this.value=n}static some(e){return new E(!0,e)}static none(){return E.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?E.some(e(this.value)):E.none()}bind(e){return this.tag?e(this.value):E.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:E.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return mt(e)?E.some(e):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}E.singletonNone=new E(!1);const vo=Array.prototype.slice,Et=Array.prototype.indexOf,ee=Array.prototype.push,ie=(t,e)=>Et.call(t,e),Tt=(t,e)=>ie(t,e)>-1,Ae=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},re=(t,e)=>{const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e(t[o],o);return r},rt=(t,e)=>{for(let n=0,r=t.length;n<r;n++)e(t[n],n)},bo=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Kr=(t,e)=>{const n=[],r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];(e(a,o)?n:r).push(a)}return{pass:n,fail:r}},$t=(t,e)=>{const n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];e(s,r)&&n.push(s)}return n},jo=(t,e,n)=>(bo(t,(r,o)=>{n=e(n,r,o)}),n),bn=(t,e,n)=>(rt(t,(r,o)=>{n=e(n,r,o)}),n),Lr=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++){const s=t[r];if(e(s,r))return E.some(s);if(n(s,r))break}return E.none()},qe=(t,e)=>Lr(t,e,Ce),Ms=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return E.some(n);return E.none()},Wl=t=>{const e=[];for(let n=0,r=t.length;n<r;++n){if(!ct(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);ee.apply(e,t[n])}return e},rn=(t,e)=>Wl(re(t,e)),mr=(t,e)=>{for(let n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0},Xr=t=>{const e=vo.call(t,0);return e.reverse(),e},Gt=(t,e)=>$t(t,n=>!Tt(e,n)),Nn=(t,e)=>{const n={};for(let r=0,o=t.length;r<o;r++){const s=t[r];n[String(s)]=e(s,r)}return n},zo=(t,e)=>{const n=vo.call(t,0);return n.sort(e),n},Na=(t,e)=>e>=0&&e<t.length?E.some(t[e]):E.none(),_n=t=>Na(t,0),yo=t=>Na(t,t.length-1),Ye=pe(Array.from)?Array.from:t=>vo.call(t),Kn=(t,e)=>{for(let n=0;n<t.length;n++){const r=e(t[n],n);if(r.isSome())return r}return E.none()},Qe=Object.keys,rs=Object.hasOwnProperty,Se=(t,e)=>{const n=Qe(t);for(let r=0,o=n.length;r<o;r++){const s=n[r];e(t[s],s)}},Ho=(t,e)=>Vl(t,(n,r)=>({k:r,v:e(n,r)})),Vl=(t,e)=>{const n={};return Se(t,(r,o)=>{const s=e(r,o);n[s.k]=s.v}),n},_a=t=>(e,n)=>{t[n]=e},Uo=(t,e,n,r)=>{Se(t,(o,s)=>{(e(o,s)?n:r)(o,s)})},xr=(t,e)=>{const n={};return Uo(t,e,_a(n),Nt),n},os=(t,e)=>{const n=[];return Se(t,(r,o)=>{n.push(e(r,o))}),n},qo=t=>os(t,ue),ke=(t,e)=>Zt(t,e)?E.from(t[e]):E.none(),Zt=(t,e)=>rs.call(t,e),yn=(t,e)=>Zt(t,e)&&null!=t[e],Fn=t=>{const e={};return rt(t,n=>{e[n]={}}),Qe(e)},Aa=t=>void 0!==t.length,yi=Array.isArray,Is=(t,e,n)=>{if(!t)return!1;if(n=n||t,Aa(t)){for(let r=0,o=t.length;r<o;r++)if(!1===e.call(n,t[r],r,t))return!1}else for(const r in t)if(Zt(t,r)&&!1===e.call(n,t[r],r,t))return!1;return!0},Ra=(t,e)=>{const n=[];return Is(t,(r,o)=>{n.push(e(r,o,t))}),n},Mr=(t,e)=>{const n=[];return Is(t,(r,o)=>{e&&!e(r,o,t)||n.push(r)}),n},Gr=(t,e,n,r)=>{let o=De(n)?t[0]:n;for(let s=0;s<t.length;s++)o=e.call(r,o,t[s],s);return o},Ta=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t))return r;return-1},Ir=t=>t[t.length-1],$o=t=>{let e,n=!1;return(...r)=>(n||(n=!0,e=t.apply(null,r)),e)},Kl=()=>Ci(0,0),Ci=(t,e)=>({major:t,minor:e}),ss={nu:Ci,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Kl():((r,o)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const u=i[c];if(u.test(l))return u}})(r,o);if(!s)return{major:0,minor:0};const a=i=>Number(o.replace(s,"$"+i));return Ci(a(1),a(2))})(t,n)},unknown:Kl},Xl=(t,e)=>{const n=String(e).toLowerCase();return qe(t,r=>r.search(n))},Gl=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,xi=(t,e)=>Je(t,e)?t.substring(e.length):t,ze=(t,e,n=0,r)=>{const o=t.indexOf(e,n);return-1!==o&&(!!De(r)||o+e.length<=r)},Je=(t,e)=>Gl(t,e,0),Fs=(t,e)=>Gl(t,e,t.length-e.length),js=t=>e=>e.replace(t,""),Yr=js(/^\s+|\s+$/g),Yl=js(/^\s+/g),Ql=js(/\s+$/g),Xn=t=>t.length>0,as=t=>!Xn(t),zs=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?E.none():E.some(n)},Oa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Fr=t=>e=>ze(e,t),wi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>ze(t,"edge/")&&ze(t,"chrome")&&ze(t,"safari")&&ze(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Oa],search:t=>ze(t,"chrome")&&!ze(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>ze(t,"msie")||ze(t,"trident")},{name:"Opera",versionRegexes:[Oa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Fr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Fr("firefox")},{name:"Safari",versionRegexes:[Oa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(ze(t,"safari")||ze(t,"mobile/"))&&ze(t,"applewebkit")}],su=[{name:"Windows",search:Fr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>ze(t,"iphone")||ze(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Fr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Fr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Fr("linux"),versionRegexes:[]},{name:"Solaris",search:Fr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Fr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Fr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Jl={browsers:pt(wi),oses:pt(su)},ki="Chromium",Ei="Firefox",Wo=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isEdge:r("Edge"),isChromium:r(ki),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(Ei),isSafari:r("Safari")}},Ba=()=>Wo({current:void 0,version:ss.unknown()}),is=Wo,Ni=(pt("Edge"),pt(ki),pt("IE"),pt("Opera"),pt(Ei),pt("Safari"),"Windows"),Zl="Android",_i="Solaris",Hs="FreeBSD",Ai="ChromeOS",gr=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isWindows:r(Ni),isiOS:r("iOS"),isAndroid:r(Zl),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(_i),isFreeBSD:r(Hs),isChromeOS:r(Ai)}},ec=()=>gr({current:void 0,version:ss.unknown()}),Us=gr,au=(pt(Ni),pt("iOS"),pt(Zl),pt("Linux"),pt("macOS"),pt(_i),pt(Hs),pt(Ai),t=>window.matchMedia(t).matches);let iu=$o(()=>((t,e,n)=>{const r=Jl.browsers(),o=Jl.oses(),s=e.bind(l=>{return c=r,Kn(l.brands,f=>{const p=f.brand.toLowerCase();return qe(c,v=>{var g;return p===(null===(g=v.brand)||void 0===g?void 0:g.toLowerCase())}).map(v=>({current:v.name,version:ss.nu(parseInt(f.version,10),0)}))});var c}).orThunk(()=>{return Xl(r,c=t).map(u=>{const f=ss.detect(u.versionRegexes,c);return{current:u.name,version:f}});var c}).fold(Ba,is),a=(l=o,c=t,Xl(l,c).map(u=>{const f=ss.detect(u.versionRegexes,c);return{current:u.name,version:f}})).fold(ec,Us),i=((l,c,u,f)=>{const p=l.isiOS()&&!0===/ipad/i.test(u),v=l.isiOS()&&!p,g=l.isiOS()||l.isAndroid(),b=g||f("(pointer:coarse)"),h=p||!v&&g&&f("(min-device-width:768px)"),C=v||g&&!h,S=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(u),k=!C&&!h&&!S;return{isiPad:pt(p),isiPhone:pt(v),isTablet:pt(h),isPhone:pt(C),isTouch:pt(b),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:pt(S),isDesktop:pt(k)}})(a,s,t,n);var l,c;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,E.from(navigator.userAgentData),au));const An=()=>iu(),Vo=navigator.userAgent,qs=An(),jr=qs.browser,Gn=qs.os,Co=qs.deviceType,Ri=-1!==Vo.indexOf("Windows Phone"),fe={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:jr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!jr.isIE(),windowsPhone:Ri,browser:{current:jr.current,version:jr.version,isChromium:jr.isChromium,isEdge:jr.isEdge,isFirefox:jr.isFirefox,isIE:jr.isIE,isOpera:jr.isOpera,isSafari:jr.isSafari},os:{current:Gn.current,version:Gn.version,isAndroid:Gn.isAndroid,isChromeOS:Gn.isChromeOS,isFreeBSD:Gn.isFreeBSD,isiOS:Gn.isiOS,isLinux:Gn.isLinux,isMacOS:Gn.isMacOS,isSolaris:Gn.isSolaris,isWindows:Gn.isWindows},deviceType:{isDesktop:Co.isDesktop,isiPad:Co.isiPad,isiPhone:Co.isiPhone,isPhone:Co.isPhone,isTablet:Co.isTablet,isTouch:Co.isTouch,isWebView:Co.isWebView}},nc=/^\s*|\s*$/g,rc=t=>ye(t)?"":(""+t).replace(nc,""),Ti=function(t,e,n,r){r=r||this,t&&(n&&(t=t[n]),Is(t,(o,s)=>!1!==e.call(r,o,s,n)&&(Ti(o,e,n,r),!0)))},dt={trim:rc,isArray:yi,is:(t,e)=>e?!("array"!==e||!yi(t))||typeof t===e:void 0!==t,toArray:t=>{if(yi(t))return t;{const e=[];for(let n=0,r=t.length;n<r;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const r=Dt(t)?t.split(e||","):t||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:Is,map:Ra,grep:Mr,inArray:(t,e)=>{if(t)for(let n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},hasOwn:Zt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(Zt(r,o)){const s=r[o];void 0!==s&&(t[o]=s)}}return t},walk:Ti,resolve:(t,e=window)=>{const n=t.split(".");for(let r=0,o=n.length;r<o&&(e=e[n[r]]);r++);return e},explode:(t,e)=>ct(t)?t:""===t?[]:Ra(t.split(e||","),rc),_addCacheSuffix:t=>{const e=fe.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},ls=(t,e,n=go)=>t.exists(r=>n(r,e)),pn=(t,e,n)=>t.isSome()&&e.isSome()?E.some(n(t.getOrDie(),e.getOrDie())):E.none(),$s=(t,e)=>t?E.some(e):E.none(),lu=typeof window<"u"?window:Function("return this;")(),oc=(t,e)=>((n,r)=>{let o=r??lu;for(let s=0;s<n.length&&null!=o;++s)o=o[n[s]];return o})(t.split("."),e),cu=Object.getPrototypeOf,Ee=t=>t.dom.nodeName.toLowerCase(),Oi=t=>t.dom.nodeType,cs=t=>e=>Oi(e)===t,La=t=>Cn(t)&&(t=>{const e=oc("ownerDocument.defaultView",t);return Vt(t)&&((n=e,((r,o)=>{const s=oc(r,o);if(null==s)throw new Error(r+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(cu(t).constructor.name));var n})(t.dom),Cn=cs(1),Yn=cs(3),sc=cs(9),Di=cs(11),Bi=t=>e=>Cn(e)&&Ee(e)===t,ds=(t,e,n)=>{if(!(Dt(n)||Mn(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Xe=(t,e,n)=>{ds(t.dom,e,n)},Qr=(t,e)=>{const n=t.dom;Se(e,(r,o)=>{ds(n,o,r)})},jn=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},Jr=(t,e)=>E.from(jn(t,e)),Ma=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},on=(t,e)=>{t.dom.removeAttribute(e)},d=t=>bn(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),m=(t,e)=>{const n=jn(t,e);return void 0===n||""===n?[]:n.split(" ")},y=t=>void 0!==t.dom.classList,w=t=>m(t,"class"),N=(t,e)=>((n,r,o)=>{const s=m(n,r).concat([o]);return Xe(n,r,s.join(" ")),!0})(t,"class",e),_=(t,e)=>((n,r,o)=>{const s=$t(m(n,r),a=>a!==o);return s.length>0?Xe(n,r,s.join(" ")):on(n,r),!1})(t,"class",e),T=(t,e)=>{y(t)?t.dom.classList.add(e):N(t,e)},H=t=>{0===(y(t)?t.dom.classList:w(t)).length&&on(t,"class")},F=(t,e)=>{y(t)?t.dom.classList.remove(e):_(t,e),H(t)},K=(t,e)=>y(t)&&t.dom.classList.contains(e),tt=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},st=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,t),new Error(r)}return tt(n.childNodes[0])},X=(t,e)=>{const n=(e||document).createElement(t);return tt(n)},ut=(t,e)=>{const n=(e||document).createTextNode(t);return tt(n)},O=tt,le=(t,e)=>{const n=[],r=s=>(n.push(s),e(s));let o=e(t);do{o=o.bind(r)}while(o.isSome());return n},Ne=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},sn=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,de=(t,e)=>t.dom===e.dom,gn=(t,e)=>{const n=t.dom,r=e.dom;return n!==r&&n.contains(r)},he=t=>O(t.dom.ownerDocument),zn=t=>sc(t)?t:he(t),ve=t=>O(zn(t).dom.defaultView),xe=t=>E.from(t.dom.parentNode).map(O),Ko=t=>E.from(t.dom.parentElement).map(O),Ia=(t,e)=>{const n=pe(e)?e:Ce;let r=t.dom;const o=[];for(;null!=r.parentNode;){const s=r.parentNode,a=O(s);if(o.push(a),!0===n(a))break;r=s}return o},Rn=t=>E.from(t.dom.previousSibling).map(O),Zr=t=>E.from(t.dom.nextSibling).map(O),zr=t=>Xr(le(t,Rn)),to=t=>le(t,Zr),Me=t=>re(t.dom.childNodes,O),xn=(t,e)=>E.from(t.dom.childNodes[e]).map(O),Ze=t=>xn(t,0),$e=t=>xn(t,t.dom.childNodes.length-1),wn=t=>t.dom.childNodes.length,Hr=t=>Di(t)&&mt(t.dom.host),Tn=pe(Element.prototype.attachShadow)&&pe(Node.prototype.getRootNode),oe=pt(Tn),Te=Tn?t=>O(t.dom.getRootNode()):zn,He=t=>Hr(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return O(n)})(zn(t)),Le=t=>O(t.dom.host),wr=t=>{if(oe()&&mt(t.target)){const e=O(t.target);if(Cn(e)&&us(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return _n(n)}}return E.from(t.target)},us=t=>mt(t.dom.shadowRoot),eo=t=>{const e=Yn(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(r=>{const o=Te(r);return Hr(o)?E.some(o):E.none()})(O(e)).fold(()=>n.body.contains(e),Ls(eo,Le))};var xo=(t,e,n,r,o)=>t(n,r)?E.some(n):pe(o)&&o(n)?E.none():e(n,r,o);const Sr=(t,e,n)=>{let r=t.dom;const o=pe(n)?n:Ce;for(;r.parentNode;){r=r.parentNode;const s=O(r);if(e(s))return E.some(s);if(o(s))break}return E.none()},Qn=(t,e,n)=>xo((r,o)=>o(r),Sr,t,e,n),fs=(t,e,n)=>Sr(t,r=>Ne(r,e),n),wo=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return sn(o)?E.none():E.from(o.querySelector(n)).map(O)})(e,t),Ur=(t,e,n)=>xo((r,o)=>Ne(r,o),fs,t,e,n),no=(t,e=!1)=>{return eo(t)?t.dom.isContentEditable:(n=t,Ur(n,"[contenteditable]")).fold(pt(e),r=>"true"===Pi(r));var n},Pi=t=>t.dom.contentEditable,So=t=>void 0!==t.style&&pe(t.style.getPropertyValue),Fa=(t,e,n)=>{if(!Dt(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);So(t)&&t.style.setProperty(e,n)},ja=(t,e,n)=>{Fa(t.dom,e,n)},ms=(t,e)=>{const n=t.dom;Se(e,(r,o)=>{Fa(n,o,r)})},kr=(t,e)=>{const n=t.dom,r=window.getComputedStyle(n).getPropertyValue(e);return""!==r||eo(t)?r:B(n,e)},B=(t,e)=>So(t)?t.style.getPropertyValue(e):"",q=(t,e)=>{const r=B(t.dom,e);return E.from(r).filter(o=>o.length>0)},et=t=>{const e={},n=t.dom;if(So(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);e[o]=n.style[o]}return e},ot=(t,e)=>{var n,r;r=e,So(n=t.dom)&&n.style.removeProperty(r),ls(Jr(t,"style").map(Yr),"")&&on(t,"style")},at=(t,e)=>{xe(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Bt=(t,e)=>{Zr(t).fold(()=>{xe(t).each(n=>{_t(n,e)})},n=>{at(n,e)})},Ft=(t,e)=>{Ze(t).fold(()=>{_t(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},_t=(t,e)=>{t.dom.appendChild(e.dom)},It=(t,e)=>{at(t,e),_t(e,t)},ge=(t,e)=>{rt(e,n=>{_t(t,n)})},se=t=>{t.dom.textContent="",rt(Me(t),e=>{Mt(e)})},Mt=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},me=t=>{const e=Me(t);var n,r;e.length>0&&(n=t,rt(r=e,(o,s)=>{Bt(0===s?n:r[s-1],o)})),Mt(t)},ae=t=>re(t,O),tn=t=>t.dom.innerHTML,an=(t,e)=>{const n=he(t).dom,r=O(n.createDocumentFragment()),o=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,Me(O(i))})(e,n);ge(r,o),se(t),_t(t,r)},Jn=(t,e,n,r)=>{t.dom.removeEventListener(e,n,r)},Zn=(t,e)=>({left:t,top:e,translate:(n,r)=>Zn(t+n,e+r)}),On=Zn,Oe=(t,e)=>void 0!==t?t:void 0!==e?e:0,ro=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?On(n.offsetLeft,n.offsetTop):eo(t)?(r=>{const o=r.getBoundingClientRect();return On(o.left,o.top)})(e):On(0,0)},lr=t=>{const e=void 0!==t?t.dom:document;return On(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Ws=(t,e)=>{An().browser.isSafari()&&pe(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Li=(t,e,n,r)=>({x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}),Mi=t=>{const e=void 0===t?window:t,r=lr(O(e.document));return(o=>{const s=void 0===o?window:o;return An().browser.isFirefox()?E.none():E.from(s.visualViewport)})(e).fold(()=>{const o=e.document.documentElement;return Li(r.left,r.top,o.clientWidth,o.clientHeight)},o=>Li(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},ac=(t,e)=>{let n=[];return rt(Me(t),r=>{e(r)&&(n=n.concat([r])),n=n.concat(ac(r,e))}),n},Dn=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return sn(o)?[]:re(o.querySelectorAll(n),O)})(e,t),lg=(t,e,n)=>fs(t,e,n).isSome();class en{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,r,o){if(e){if(!o&&e[n])return e[n];if(e!==this.rootNode){let s=e[r];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[r],s)return s}}}findPreviousNode(e,n){if(e){const r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let s=r.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return r}const o=e.parentNode;if(o&&o!==this.rootNode)return o}}}const Vs=t=>e=>!!e&&e.nodeType===t,ic=t=>!!t&&!Object.getPrototypeOf(t),xt=Vs(1),Ii=t=>{const e=t.toLowerCase();return n=>mt(n)&&n.nodeName.toLowerCase()===e},oo=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return Tt(e,r)}return!1}},lc=(t,e)=>{const n=e.toLowerCase().split(" ");return r=>{if(xt(r)){const o=r.ownerDocument.defaultView;if(o)for(let s=0;s<n.length;s++){const a=o.getComputedStyle(r,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},cg=t=>e=>xt(e)&&e.hasAttribute(t),Ks=t=>xt(t)&&t.hasAttribute("data-mce-bogus"),Xo=t=>xt(t)&&"TABLE"===t.tagName,dg=t=>e=>!(!xt(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),uu=oo(["textarea","input"]),lt=Vs(3),IS=Vs(4),FS=Vs(7),ps=Vs(8),Fi=Vs(9),fu=Vs(11),Ie=Ii("br"),ug=Ii("img"),so=dg("true"),Re=dg("false"),cc=oo(["td","th"]),jS=oo(["td","th","caption"]),ko=oo(["video","audio","object","embed"]),zS=Ii("li"),fg=Ii("details"),HS=Ii("summary"),ln="\xa0",mu=t=>"\ufeff"===t,pu=((t,e)=>{const n=r=>t(r)?E.from(r.dom.nodeValue):E.none();return{get:r=>{if(!t(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!t(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(Yn),dc=t=>pu.get(t),mg=t=>pu.getOption(t),US=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),gs=t=>{let e;return n=>(e=e||Nn(t,Be),Zt(e,Ee(n)))},Er=gs(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),uc=t=>Cn(t)&&!Er(t),Xs=t=>Cn(t)&&"br"===Ee(t),pg=gs(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),gu=gs(["ul","ol","dl"]),ji=gs(["li","dd","dt"]),qS=gs(["thead","tbody","tfoot"]),zi=gs(["td","th"]),fc=gs(["pre","script","textarea","style"]),$S=gs(US),WS=t=>$S(t)||uc(t),mc=()=>{const t=X("br");return Xe(t,"data-mce-bogus","1"),t},hs=t=>{se(t),_t(t,mc())},VS=t=>{$e(t).each(e=>{Rn(e).each(n=>{Er(t)&&Xs(e)&&Er(n)&&Mt(e)})})},Bn="\ufeff",pc=mu,Go=t=>t.replace(/\uFEFF/g,""),KS=xt,Ha=lt,Ua=t=>(Ha(t)&&(t=t.parentNode),KS(t)&&t.hasAttribute("data-mce-caret")),vs=t=>Ha(t)&&pc(t.data),Nr=t=>Ua(t)||vs(t),gg=t=>t.firstChild!==t.lastChild||!Ie(t.firstChild),hu=t=>{const e=t.container();return!!lt(e)&&(e.data.charAt(t.offset())===Bn||t.isAtStart()&&vs(e.previousSibling))},vu=t=>{const e=t.container();return!!lt(e)&&(e.data.charAt(t.offset()-1)===Bn||t.isAtEnd()&&vs(e.nextSibling))},gc=t=>Ha(t)&&t.data[0]===Bn,hc=t=>Ha(t)&&t.data[t.data.length-1]===Bn,bu=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const r=e.getElementsByTagName("br"),o=r[r.length-1];Ks(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,hg=t=>Ua(t.startContainer),vg=so,XS=Re,GS=Ie,YS=lt,QS=oo(["script","style","textarea"]),bg=oo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),JS=oo(["table"]),ZS=Nr,qr=t=>!ZS(t)&&(YS(t)?!QS(t.parentNode):bg(t)||GS(t)||JS(t)||yu(t)),yu=t=>{return!(xt(e=t)&&"true"===e.getAttribute("unselectable"))&&XS(t);var e},yg=(t,e)=>qr(t)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(yu(o))return!1;if(vg(o))return!0}return!0})(t,e),tk=/^[ \t\r\n]*$/,Gs=t=>tk.test(t),ek=t=>{for(const e of t)if(!mu(e))return!1;return!0},Cg=t=>"\n"===t||"\r"===t,xg=(t,e=4,n=!0,r=!0)=>{const o=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,o);var l;return bn(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===ln?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&r||(u=i.str.length+1)<(c=s).length&&u>=0&&Cg(c[u])?{pcIsSpace:!1,str:i.str+ln}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Cg(l),str:i.str+l};var c,u},{pcIsSpace:!1,str:""}).str},vc=(t,e)=>{return qr(t)&&(r=e,!(lt(n=t)&&Gs(n.data)&&!((o,s)=>{const a=O(s),i=O(o);return lg(i,"pre,code",St(de,a))})(n,r)))||(n=>xt(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||nk(t);var n,r},nk=cg("data-mce-bookmark"),rk=cg("data-mce-bogus"),ok=t=>xt(t)&&"all"===t.getAttribute("data-mce-bogus"),We=(t,e=!0)=>((n,r)=>{let o=0;if(vc(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const a=new en(s,n);do{if(r){if(ok(s)){s=a.next(!0);continue}if(rk(s)){s=a.next();continue}}if(Ie(s))o++,s=a.next();else{if(vc(s,n))return!1;s=a.next()}}while(s);return o<=1}})(t.dom,e),Hi="data-mce-block",Cu=t=>{return(e=t,$t(Qe(e),n=>!/[A-Z]/.test(n))).join(",");var e},wg=(t,e)=>mt(e.querySelector(t))?(e.setAttribute(Hi,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(Hi),!1),Sg=(t,e)=>{const n=Cu(t.getTransparentElements()),r=Cu(t.getBlockElements());return $t(e.querySelectorAll(n),o=>wg(r,o))},kg=(t,e)=>{var n;const r=e?"lastChild":"firstChild";for(let o=t[r];o;o=o[r])if(We(O(o)))return void(null===(n=o.parentNode)||void 0===n||n.removeChild(o))},xu=(t,e)=>{const n=Sg(t,e);var r,o,s;((t,e,n)=>{const r=t.getBlockElements(),o=O(e),s=i=>Ee(i)in r,a=i=>de(i,o);rt(ae(n),i=>{Sr(i,s,a).each(l=>{const c=$t(Me(i),p=>s(p)&&!t.isValidChild(Ee(l),Ee(p)));if(c.length>0){const u=Ko(l);rt(c,f=>{Sr(f,s,a).each(p=>{((v,g)=>{const b=document.createRange(),h=v.parentNode;if(h){b.setStartBefore(v),b.setEndBefore(g);const C=b.extractContents();kg(C,!0),b.setStartAfter(g),b.setEndAfter(v);const S=b.extractContents();kg(S,!1),We(O(C))||h.insertBefore(C,v),We(O(g))||h.insertBefore(g,v),We(O(S))||h.insertBefore(S,v),h.removeChild(v)}})(p.dom,f.dom)})}),u.each(f=>Sg(t,f.dom))}})})})(t,e,n),r=t,o=e,s=n,rt([...s,...Ys(r,o)?[o]:[]],a=>rt(Dn(O(a),a.nodeName.toLowerCase()),i=>{ik(r,i.dom)&&me(i)}))},ak=(t,e)=>{if(Su(t,e)){const n=Cu(t.getBlockElements());wg(n,e)}},wu=t=>t.hasAttribute(Hi),bc=(t,e)=>Zt(t.getTransparentElements(),e),Su=(t,e)=>xt(e)&&bc(t,e.nodeName),Ys=(t,e)=>Su(t,e)&&wu(e),ik=(t,e)=>Su(t,e)&&!wu(e),Eg=(t,e)=>1===e.type&&bc(t,e.name)&&Dt(e.attr(Hi)),lk=An().browser,Ng=t=>qe(t,Cn),_g=(t,e)=>t.children&&Tt(t.children,e),Ag=(t,e={})=>{let n=0;const r={},o=O(t),s=zn(o),a=l=>new Promise((c,u)=>{let f;const p=dt._addCacheSuffix(l),v=ke(r,p).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));r[p]=v,v.count++;const g=(k,A)=>{rt(k,Vn),v.status=A,v.passed=[],v.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},b=()=>g(v.passed,2),h=()=>g(v.failed,3);if(c&&v.passed.push(c),u&&v.failed.push(u),1===v.status)return;if(2===v.status)return void b();if(3===v.status)return void h();v.status=1;const C=X("link",s.dom);var S;Qr(C,{rel:"stylesheet",type:"text/css",id:v.id}),e.contentCssCors&&Xe(C,"crossOrigin","anonymous"),e.referrerPolicy&&Xe(C,"referrerpolicy",e.referrerPolicy),f=C.dom,f.onload=b,f.onerror=h,S=C,_t(He(o),S),Xe(C,"href",p)}),i=l=>{const c=dt._addCacheSuffix(l);ke(r,c).each(u=>{0==--u.count&&(delete r[c],(f=>{const p=He(o);wo(p,"#"+f).each(Mt)})(u.id))})};return{load:a,loadAll:l=>Promise.allSettled(re(l,c=>a(c).then(pt(c)))).then(c=>{const u=Kr(c,f=>"fulfilled"===f.status);return u.fail.length>0?Promise.reject(re(u.fail,f=>f.reason)):re(u.pass,f=>f.value)}),unload:i,unloadAll:l=>{rt(l,c=>{i(c)})},_setReferrerPolicy:l=>{e.referrerPolicy=l},_setContentCssCors:l=>{e.contentCssCors=l}}},Rg=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const r=Te(e).dom;return E.from(t.get(r)).getOrThunk(()=>{const o=Ag(r,n);return t.set(r,o),o})}}})(),Tg=(t,e)=>mt(t)&&(vc(t,e)||uc(O(t))),Og=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),ku=(t,e,n)=>{var r;const o=n||e;if(xt(e)&&Og(e))return e;const s=e.childNodes;for(let a=s.length-1;a>=0;a--)ku(t,s[a],o);if(xt(e)){const a=e.childNodes;1===a.length&&Og(a[0])&&(null===(r=e.parentNode)||void 0===r||r.insertBefore(a[0],e))}return fu(a=e)||Fi(a)||vc(e,o)||(a=>!!xt(a)&&a.childNodes.length>0)(e)||((a,i)=>lt(a)&&a.data.length>0&&((l,c)=>{const u=new en(l,c).prev(!1),f=new en(l,c).next(!1),p=De(u)||Tg(u,c),v=De(f)||Tg(f,c);return p&&v})(a,i))(e,o)||t.remove(e),e;var a},ck=dt.makeMap,yc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Cc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dk=/[<>&\"\']/g,uk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,fk={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Qs={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},mk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Dg=(t,e)=>{const n={};if(t){const r=t.split(",");e=e||10;for(let o=0;o<r.length;o+=2){const s=String.fromCharCode(parseInt(r[o],e));if(!Qs[s]){const a="&"+r[o+1]+";";n[s]=a,n[a]=s}}return n}},Eu=Dg("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Bg=(t,e)=>t.replace(e?yc:Cc,n=>Qs[n]||n),Pg=(t,e)=>t.replace(e?yc:Cc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Qs[n]||"&#"+n.charCodeAt(0)+";"),Nu=(t,e,n)=>{const r=n||Eu;return t.replace(e?yc:Cc,o=>Qs[o]||r[o]||o)},bs={encodeRaw:Bg,encodeAllRaw:t=>(""+t).replace(dk,e=>Qs[e]||e),encodeNumeric:Pg,encodeNamed:Nu,getEncodeFunc:(t,e)=>{const n=Dg(e)||Eu,r=ck(t.replace(/\+/g,","));return r.named&&r.numeric?(o,s)=>o.replace(s?yc:Cc,a=>void 0!==Qs[a]?Qs[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):r.named?e?(o,s)=>Nu(o,s,n):Nu:r.numeric?Pg:Bg},decode:t=>t.replace(uk,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):fk[n]||String.fromCharCode(n):mk[e]||Eu[e]||(r=>{const o=X("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(e))},xc={},wc={},pk={},qa=dt.makeMap,Pn=dt.each,_u=dt.extend,Lg=dt.explode,gk=dt.inArray,Sn=(t,e)=>(t=dt.trim(t))?t.split(e||" "):[],Mg=(t,e={})=>{const n=qa(t," ",qa(t.toUpperCase()," "));return _u(n,e)},Ig=t=>Mg("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Au=(t,e)=>{if(t){const n={};return Dt(t)&&(t={"*":t}),Pn(t,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===e?qa(r,/[, ]/):Lg(r,/[, ]/)}),n}},ys=(t={})=>{var e;const n={},r={};let o=[];const s={},a={},i=(Z,ft,At)=>{const Ct=t[Z];if(Ct)return qa(Ct,/[, ]/,qa(Ct.toUpperCase(),/[, ]/));{let zt=wc[Z];return zt||(zt=Mg(ft,At),wc[Z]=zt),zt}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(Z=>{const ft={};let At,Ct,zt,Ut;const vt=(Ve,Pe="",sr="")=>{const ar=Sn(sr),mo=Sn(Ve);let Vr=mo.length;for(;Vr--;){const vn=Sn([At,Pe].join(" "));ft[mo[Vr]]={attributes:Nn(vn,()=>({})),attributesOrder:vn,children:Nn(ar,pt(pk))}}},Jt=(Ve,Pe)=>{const sr=Sn(Ve),ar=Sn(Pe);let mo=sr.length;for(;mo--;){const Vr=ft[sr[mo]];for(let vn=0,ur=ar.length;vn<ur;vn++)Vr.attributes[ar[vn]]={},Vr.attributesOrder.push(ar[vn])}};if(xc[Z])return xc[Z];if(At="id accesskey class dir lang style tabindex title role",Ct="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",zt="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==Z&&(At+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",Ct+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",zt+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==Z){At+=" xml:lang";const Ve="acronym applet basefont big font strike tt";zt=[zt,Ve].join(" "),Pn(Sn(Ve),sr=>{vt(sr,"",zt)});const Pe="center dir isindex noframes";Ct=[Ct,Pe].join(" "),Ut=[Ct,zt].join(" "),Pn(Sn(Pe),sr=>{vt(sr,"",Ut)})}return Ut=Ut||[Ct,zt].join(" "),vt("html","manifest","head body"),vt("head","","base command link meta noscript script style title"),vt("title hr noscript br"),vt("base","href target"),vt("link","href rel media hreflang type sizes hreflang"),vt("meta","name http-equiv content charset"),vt("style","media type scoped"),vt("script","src async defer type charset"),vt("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Ut),vt("dd div","",Ut),vt("address dt caption","","html4"===Z?zt:Ut),vt("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",zt),vt("blockquote","cite",Ut),vt("ol","reversed start type","li"),vt("ul","","li"),vt("li","value",Ut),vt("dl","","dt dd"),vt("a","href target rel media hreflang type","html4"===Z?zt:Ut),vt("q","cite",zt),vt("ins del","cite datetime",Ut),vt("img","src sizes srcset alt usemap ismap width height"),vt("iframe","src name width height",Ut),vt("embed","src type width height"),vt("object","data type typemustmatch name usemap form width height",[Ut,"param"].join(" ")),vt("param","name value"),vt("map","name",[Ut,"area"].join(" ")),vt("area","alt coords shape href target rel media hreflang type"),vt("table","border","caption colgroup thead tfoot tbody tr"+("html4"===Z?" col":"")),vt("colgroup","span","col"),vt("col","span"),vt("tbody thead tfoot","","tr"),vt("tr","","td th"),vt("td","colspan rowspan headers",Ut),vt("th","colspan rowspan headers scope abbr",Ut),vt("form","accept-charset action autocomplete enctype method name novalidate target",Ut),vt("fieldset","disabled form name",[Ut,"legend"].join(" ")),vt("label","form for",zt),vt("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),vt("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===Z?Ut:zt),vt("select","disabled form multiple name required size","option optgroup"),vt("optgroup","disabled label","option"),vt("option","disabled label selected value"),vt("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),vt("menu","type label",[Ut,"li"].join(" ")),vt("noscript","",Ut),"html4"!==Z&&(vt("wbr"),vt("ruby","",[zt,"rt rp"].join(" ")),vt("figcaption","",Ut),vt("mark rt rp summary bdi","",zt),vt("canvas","width height",Ut),vt("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Ut,"track source"].join(" ")),vt("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Ut,"track source"].join(" ")),vt("picture","","img source"),vt("source","src srcset type media sizes"),vt("track","kind src srclang label default"),vt("datalist","",[zt,"option"].join(" ")),vt("article section nav aside main header footer","",Ut),vt("hgroup","","h1 h2 h3 h4 h5 h6"),vt("figure","",[Ut,"figcaption"].join(" ")),vt("time","datetime",zt),vt("dialog","open",Ut),vt("command","type label icon disabled checked radiogroup command"),vt("output","for form name",zt),vt("progress","value max",zt),vt("meter","value min max low high optimum",zt),vt("details","open",[Ut,"summary"].join(" ")),vt("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==Z&&(Jt("script","language xml:space"),Jt("style","xml:space"),Jt("object","declare classid code codebase codetype archive standby align border hspace vspace"),Jt("embed","align name hspace vspace"),Jt("param","valuetype type"),Jt("a","charset name rev shape coords"),Jt("br","clear"),Jt("applet","codebase archive code object alt name width height align hspace vspace"),Jt("img","name longdesc align border hspace vspace"),Jt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Jt("font basefont","size color face"),Jt("input","usemap align"),Jt("select"),Jt("textarea"),Jt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Jt("ul","type compact"),Jt("li","type"),Jt("ol dl menu dir","compact"),Jt("pre","width xml:space"),Jt("hr","align noshade size width"),Jt("isindex","prompt"),Jt("table","summary width frame rules cellspacing cellpadding align bgcolor"),Jt("col","width align char charoff valign"),Jt("colgroup","width align char charoff valign"),Jt("thead","align char charoff valign"),Jt("tr","align char charoff valign bgcolor"),Jt("th","axis align char charoff valign nowrap bgcolor width height"),Jt("form","accept"),Jt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Jt("tfoot","align char charoff valign"),Jt("tbody","align char charoff valign"),Jt("area","nohref"),Jt("body","background bgcolor text link vlink alink")),"html4"!==Z&&(Jt("input button select textarea","autofocus"),Jt("input textarea","placeholder"),Jt("a","download"),Jt("link script img","crossorigin"),Jt("img","loading"),Jt("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==Z&&rt([ft.video,ft.audio],Ve=>{delete Ve.children.audio,delete Ve.children.video}),Pn(Sn("a form meter progress dfn"),Ve=>{ft[Ve]&&delete ft[Ve].children[Ve]}),delete ft.caption.children.table,delete ft.script,xc[Z]=ft,ft})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const u=Au(t.valid_styles),f=Au(t.invalid_styles,"map"),p=Au(t.valid_classes,"map"),v=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),C="td th iframe video audio object script code",S=i("non_empty_elements",C+" pre",b),k=i("move_caret_before_on_enter_elements",C+" table",b),A=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),R=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",A),D=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),P=i("transparent_elements","a ins del canvas map");Pn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Z=>{a[Z]=new RegExp("</"+Z+"[^>]*>","gi")});const U=Z=>new RegExp("^"+Z.replace(/([?+*])/g,".$1")+"$"),Y=Z=>{const ft=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,At=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Ct=/[*?+]/;if(Z){const zt=Sn(Z,",");let Ut,vt;n["@"]&&(Ut=n["@"].attributes,vt=n["@"].attributesOrder);for(let Jt=0,Ve=zt.length;Jt<Ve;Jt++){let Pe=ft.exec(zt[Jt]);if(Pe){const sr=Pe[1],ar=Pe[2],mo=Pe[3],Vr=Pe[5],vn={},ur=[],Fe={attributes:vn,attributesOrder:ur};if("#"===sr&&(Fe.paddEmpty=!0),"-"===sr&&(Fe.removeEmpty=!0),"!"===Pe[4]&&(Fe.removeEmptyAttrs=!0),Ut&&(Se(Ut,(Mo,Bs)=>{vn[Bs]=Mo}),vt&&ur.push(...vt)),Vr){const Mo=Sn(Vr,"|");for(let Bs=0,nu=Mo.length;Bs<nu;Bs++)if(Pe=At.exec(Mo[Bs]),Pe){const Io={},ql=Pe[1],vr=Pe[2].replace(/[\\:]:/g,":"),Ps=Pe[3],br=Pe[4];if("!"===ql&&(Fe.attributesRequired=Fe.attributesRequired||[],Fe.attributesRequired.push(vr),Io.required=!0),"-"===ql){delete vn[vr],ur.splice(gk(ur,vr),1);continue}if(Ps&&("="===Ps&&(Fe.attributesDefault=Fe.attributesDefault||[],Fe.attributesDefault.push({name:vr,value:br}),Io.defaultValue=br),"~"===Ps&&(Fe.attributesForced=Fe.attributesForced||[],Fe.attributesForced.push({name:vr,value:br}),Io.forcedValue=br),"<"===Ps&&(Io.validValues=qa(br,"?"))),Ct.test(vr)){const ka=Io;Fe.attributePatterns=Fe.attributePatterns||[],ka.pattern=U(vr),Fe.attributePatterns.push(ka)}else vn[vr]||ur.push(vr),vn[vr]=Io}}if(Ut||"@"!==ar||(Ut=vn,vt=ur),mo&&(Fe.outputName=ar,n[mo]=Fe),Ct.test(ar)){const Mo=Fe;Mo.pattern=U(ar),o.push(Mo)}else n[ar]=Fe}}}},V=Z=>{o=[],rt(Qe(n),ft=>{delete n[ft]}),Y(Z),Pn(c,(ft,At)=>{r[At]=ft.children})},L=Z=>{const ft=/^(~)?(.+)$/;Z&&(delete wc.text_block_elements,delete wc.block_elements,Pn(Sn(Z,","),At=>{const Ct=ft.exec(At);if(Ct){const zt="~"===Ct[1],Ut=zt?"span":"div",vt=Ct[2];if(r[vt]=r[Ut],s[vt]=Ut,S[vt.toUpperCase()]={},S[vt]={},zt||(R[vt.toUpperCase()]={},R[vt]={}),!n[vt]){let Jt=n[Ut];Jt=_u({},Jt),delete Jt.removeEmptyAttrs,delete Jt.removeEmpty,n[vt]=Jt}Pn(r,(Jt,Ve)=>{Jt[Ut]&&(r[Ve]=Jt=_u({},r[Ve]),Jt[vt]=Jt[Ut])})}}))},z=Z=>{const ft=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete xc[l],Z&&Pn(Sn(Z,","),At=>{const Ct=ft.exec(At);if(Ct){const zt=Ct[1];let Ut;Ut=zt?r[Ct[2]]:r[Ct[2]]={"#comment":{}},Ut=r[Ct[2]],Pn(Sn(Ct[3],"|"),vt=>{"-"===zt?delete Ut[vt]:Ut[vt]={}})}})},I=Z=>{const ft=n[Z];if(ft)return ft;let At=o.length;for(;At--;){const Ct=o[At];if(Ct.pattern.test(Z))return Ct}};t.valid_elements?V(t.valid_elements):(Pn(c,(Z,ft)=>{n[ft]={attributes:Z.attributes,attributesOrder:Z.attributesOrder},r[ft]=Z.children}),Pn(Sn("strong/b em/i"),Z=>{const ft=Sn(Z,"/");n[ft[1]].outputName=ft[0]}),Pn(D,(Z,ft)=>{n[ft]&&(t.padd_empty_block_inline_children&&(n[ft].paddInEmptyBlock=!0),n[ft].removeEmpty=!0)}),Pn(Sn("ol ul blockquote a table tbody"),Z=>{n[Z]&&(n[Z].removeEmpty=!0)}),Pn(Sn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Z=>{n[Z]&&(n[Z].paddEmpty=!0)}),Pn(Sn("span"),Z=>{n[Z].removeEmptyAttrs=!0})),L(t.custom_elements),z(t.valid_children),Y(t.extended_valid_elements),z("+ol[ul|ol],+ul[ul|ol]"),Pn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Z,ft)=>{n[ft]&&(n[ft].parentsRequired=Sn(Z))}),t.invalid_elements&&Pn(Lg(t.invalid_elements),Z=>{n[Z]&&delete n[Z]}),I("span")||Y("span[!data-mce-type|*]");const $=pt(u),gt=pt(f),it=pt(p),Ot=pt(h),ht=pt(R),Kt=pt(A),Yt=pt(D),yt=pt(Object.seal(b)),Rt=pt(g),jt=pt(S),M=pt(k),j=pt(v),Q=pt(P),nt=pt(Object.seal(a)),J=pt(s);return{type:l,children:r,elements:n,getValidStyles:$,getValidClasses:it,getBlockElements:ht,getInvalidStyles:gt,getVoidElements:yt,getTextBlockElements:Kt,getTextInlineElements:Yt,getBoolAttrs:Ot,getElementRule:I,getSelfClosingElements:Rt,getNonEmptyElements:jt,getMoveCaretBeforeOnEnterElements:M,getWhitespaceElements:j,getTransparentElements:Q,getSpecialElements:nt,isValidChild:(Z,ft)=>{const At=r[Z.toLowerCase()];return!(!At||!At[ft.toLowerCase()])},isValid:(Z,ft)=>{const At=I(Z);if(At){if(!ft)return!0;{if(At.attributes[ft])return!0;const Ct=At.attributePatterns;if(Ct){let zt=Ct.length;for(;zt--;)if(Ct[zt].pattern.test(ft))return!0}}}return!1},getCustomElements:J,addValidElements:Y,setValidElements:V,addCustomElements:L,addValidChildren:z}},Ru=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let f=0;f<c.length;f++)s[c[f]]="\ufeff"+f,s["\ufeff"+f]=c[f];const u={parse:f=>{const p={};let v=!1;const g=t.url_converter,b=t.url_converter_scope||u,h=(V,L,z)=>{const I=p[V+"-top"+L];if(!I)return;const $=p[V+"-right"+L];if(!$)return;const gt=p[V+"-bottom"+L];if(!gt)return;const it=p[V+"-left"+L];if(!it)return;const Ot=[I,$,gt,it];let ht=Ot.length-1;for(;ht--&&Ot[ht]===Ot[ht+1];);ht>-1&&z||(p[V+L]=-1===ht?Ot[0]:Ot.join(" "),delete p[V+"-top"+L],delete p[V+"-right"+L],delete p[V+"-bottom"+L],delete p[V+"-left"+L])},C=V=>{const L=p[V];if(!L)return;const z=L.split(" ");let I=z.length;for(;I--;)if(z[I]!==z[0])return!1;return p[V]=z[0],!0},S=V=>(v=!0,s[V]),k=(V,L)=>(v&&(V=V.replace(/\uFEFF[0-9]/g,z=>s[z])),L||(V=V.replace(/\\([\'\";:])/g,"$1")),V),A=V=>String.fromCharCode(parseInt(V.slice(1),16)),R=V=>V.replace(/\\[0-9a-f]+/gi,A),D=(V,L,z,I,$,gt)=>{if($=$||gt)return"'"+($=k($)).replace(/\'/g,"\\'")+"'";if(L=k(L||z||I||""),!t.allow_script_urls){const it=L.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(it)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(it))return""}return g&&(L=g.call(b,L,"style")),"url('"+L.replace(/\'/g,"\\'")+"')"};if(f){let V;for(f=(f=f.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,S).replace(/\"[^\"]+\"|\'[^\']+\'/g,L=>L.replace(/[;:]/g,S));V=r.exec(f);){r.lastIndex=V.index+V[0].length;let L=V[1].replace(o,"").toLowerCase(),z=V[2].replace(o,"");if(L&&z){if(L=R(L),z=R(z),-1!==L.indexOf("\ufeff")||-1!==L.indexOf('"')||!t.allow_script_urls&&("behavior"===L||/expression\s*\(|\/\*|\*\//.test(z)))continue;"font-weight"===L&&"700"===z?z="bold":"color"!==L&&"background-color"!==L||(z=z.toLowerCase()),z=z.replace(n,D),p[L]=v?k(z,!0):z}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),U="border-style",Y="border-color",C(P="border-width")&&C(U)&&C(Y)&&(p.border=p[P]+" "+p[U]+" "+p[Y],delete p[P],delete p[U],delete p[Y]),"medium none"===p.border&&delete p.border,"none"===p["border-image"]&&delete p["border-image"]}var P,U,Y;return p},serialize:(f,p)=>{let v="";const g=(b,h)=>{const C=h[b];if(C)for(let S=0,k=C.length;S<k;S++){const A=C[S],R=f[A];R&&(v+=(v.length>0?" ":"")+A+": "+R+";")}};return p&&a?(g("*",a),g(p,a)):Se(f,(b,h)=>{b&&((C,S)=>{if(!i||!S)return!0;let k=i["*"];return!(k&&k[C]||(k=i[S],k&&k[C]))})(h,p)&&(v+=(v.length>0?" ":"")+h+": "+b+";")}),v}};return u},hk={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Fg=(t,e)=>{const n=e??{};for(const r in t)Zt(hk,r)||(n[r]=t[r]);return mt(t.composedPath)&&(n.composedPath=()=>t.composedPath()),n},Tu=(t,e,n,r)=>{var o;const s=Fg(e,r);return s.type=t,ye(s.target)&&(s.target=null!==(o=s.srcElement)&&void 0!==o?o:n),(ye((a=e).preventDefault)||(i=a)instanceof Event||pe(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Be,pe(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Be,pe(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Be,s.stopPropagation()},(a=>a.isDefaultPrevented===Be||a.isDefaultPrevented===Ce)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Be:Ce,s.isPropagationStopped=!0===s.cancelBubble?Be:Ce,s.isImmediatePropagationStopped=Ce)),s;var a,i},vk=/^(?:mouse|contextmenu)|click/,Ou=(t,e,n,r)=>{t.addEventListener(e,n,r||!1)},Sc=(t,e,n,r)=>{t.removeEventListener(e,n,r||!1)},Ui=(t,e)=>{const n=Tu(t.type,t,document,e);if(mt(r=t)&&vk.test(r.type)&&De(t.pageX)&&!De(t.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,s=r.body,a=n;a.pageX=t.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}var r;return n},bk=(t,e,n)=>{const r=t.document,o={type:"ready"};if(n.domLoaded)return void e(o);const s=()=>{Sc(t,"DOMContentLoaded",s),Sc(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(o)),t=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?s():Ou(t,"DOMContentLoaded",s),n.domLoaded||Ou(t,"load",s)};class Js{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,r,o){const s=this;let a;const i=window,l=p=>{s.executeHandlers(Ui(p||i.event),c)};if(!e||lt(e)||ps(e))return r;let c;e[s.expando]?c=e[s.expando]:(c=s.count++,e[s.expando]=c,s.events[c]={}),o=o||e;const u=n.split(" ");let f=u.length;for(;f--;){let p=u[f],v=l,g=!1,b=!1;"DOMContentLoaded"===p&&(p="ready"),s.domLoaded&&"ready"===p&&"complete"===e.readyState?r.call(o,Ui({type:p})):(s.hasFocusIn||"focusin"!==p&&"focusout"!==p||(g=!0,b="focusin"===p?"focus":"blur",v=h=>{const C=Ui(h||i.event);C.type="focus"===C.type?"focusin":"focusout",s.executeHandlers(C,c)}),a=s.events[c][p],a?"ready"===p&&s.domLoaded?r(Ui({type:p})):a.push({func:r,scope:o}):(s.events[c][p]=a=[{func:r,scope:o}],a.fakeName=b,a.capture=g,a.nativeHandler=v,"ready"===p?bk(e,v,s):Ou(e,b||p,v,g)))}return e=a=null,r}unbind(e,n,r){if(!e||lt(e)||ps(e))return this;const o=e[this.expando];if(o){let s=this.events[o];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(r){let u=c.length;for(;u--;)if(c[u].func===r){const f=c.nativeHandler,p=c.fakeName,v=c.capture,g=c.slice(0,u).concat(c.slice(u+1));g.nativeHandler=f,g.fakeName=p,g.capture=v,s[l]=g}}r&&0!==c.length||(delete s[l],Sc(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else Se(s,(a,i)=>{Sc(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(Zt(s,a))return this;delete this.events[o];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,r){return this.dispatch(e,n,r)}dispatch(e,n,r){if(!e||lt(e)||ps(e))return this;const o=Ui({type:n,target:e},r);do{const s=e[this.expando];s&&this.executeHandlers(o,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}clean(e){if(!e||lt(e)||ps(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let r=n.length;for(;r--;)(e=n[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const r=this.events[n],o=r&&r[e.type];if(o)for(let s=0,a=o.length;s<a;s++){const i=o[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Js.Event=new Js;const Du=dt.each,yk=dt.grep,Bu="data-mce-style",Ck=dt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),qi=(t,e,n)=>{ye(n)||""===n?on(t,e):Xe(t,e,n)},jg=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),$a=(t,e)=>{let n=0;if(t)for(let r=t.nodeType,o=t.previousSibling;o;o=o.previousSibling){const s=o.nodeType;(!e||!lt(o)||s!==r&&o.data.length)&&(n++,r=s)}return n},zg=(t,e)=>{const n=jn(e,"style"),r=t.serialize(t.parse(n),Ee(e));qi(e,Bu,r)},Hg=(t,e,n)=>{const r=jg(e);var o,s;ye(n)||""===n?ot(t,r):ja(t,r,(s=r,x(o=n)?Zt(Ck,s)?o+"":o+"px":o))},we=(t,e={})=>{const n={},r=window,o={};let s=0;const a=Rg.forElement(O(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:ys({}),c=Ru({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),u=e.ownEvents?new Js:Js.Event,f=l.getBlockElements(),p=M=>M&&t&&Dt(M)?t.getElementById(M):M,v=M=>{const j=p(M);return mt(j)?O(j):null},g=(M,j,Q="")=>{let nt;const J=v(M);if(mt(J)&&Cn(J)){const Z=jt[j];nt=Z&&Z.get?Z.get(J.dom,j):jn(J,j)}return mt(nt)?nt:Q},b=M=>{const j=p(M);return ye(j)?[]:j.attributes},h=(M,j,Q)=>{U(M,nt=>{if(xt(nt)){const J=O(nt),Z=""===Q?null:Q,ft=jn(J,j),At=jt[j];At&&At.set?At.set(J.dom,Z,j):qi(J,j,Z),ft!==Z&&e.onSetAttrib&&e.onSetAttrib({attrElm:J.dom,attrName:j,attrValue:Z})}})},C=()=>e.root_element||t.body,S=(M,j)=>((Q,nt,J)=>{let Z=0,ft=0;const At=Q.ownerDocument;if(J=J||Q,nt){if(J===Q&&nt.getBoundingClientRect&&"static"===kr(O(Q),"position")){const zt=nt.getBoundingClientRect();return Z=zt.left+(At.documentElement.scrollLeft||Q.scrollLeft)-At.documentElement.clientLeft,ft=zt.top+(At.documentElement.scrollTop||Q.scrollTop)-At.documentElement.clientTop,{x:Z,y:ft}}let Ct=nt;for(;Ct&&Ct!==J&&Ct.nodeType&&!_g(Ct,J);)Z+=Ct.offsetLeft||0,ft+=Ct.offsetTop||0,Ct=Ct.offsetParent;for(Ct=nt.parentNode;Ct&&Ct!==J&&Ct.nodeType&&!_g(Ct,J);)Z-=Ct.scrollLeft||0,ft-=Ct.scrollTop||0,Ct=Ct.parentNode;ft+=(zt=O(nt),lk.isFirefox()&&"table"===Ee(zt)?Ng(Me(zt)).filter(Ut=>"caption"===Ee(Ut)).bind(Ut=>Ng(to(Ut)).map(vt=>vt.dom.offsetTop<=Ut.dom.offsetTop?-Ut.dom.offsetHeight:0)).getOr(0):0)}var zt;return{x:Z,y:ft}})(t.body,p(M),j),k=(M,j,Q)=>{const nt=p(M);if(!ye(nt)&&xt(nt))return Q?kr(O(nt),jg(j)):("float"===(j=j.replace(/-(\D)/g,(J,Z)=>Z.toUpperCase()))&&(j="cssFloat"),nt.style?nt.style[j]:void 0)},A=M=>{const j=p(M);if(!j)return{w:0,h:0};let Q=k(j,"width"),nt=k(j,"height");return Q&&-1!==Q.indexOf("px")||(Q="0"),nt&&-1!==nt.indexOf("px")||(nt="0"),{w:parseInt(Q,10)||j.offsetWidth||j.clientWidth,h:parseInt(nt,10)||j.offsetHeight||j.clientHeight}},R=(M,j)=>{if(!M)return!1;const Q=ct(M)?M:[M];return Ae(Q,nt=>Ne(O(nt),j))},D=(M,j,Q,nt)=>{const J=[];let Z=p(M);nt=void 0===nt;const ft=Q||("BODY"!==C().nodeName?C().parentNode:null);if(Dt(j))if("*"===j)j=xt;else{const At=j;j=Ct=>R(Ct,At)}for(;Z&&!(Z===ft||ye(Z.nodeType)||Fi(Z)||fu(Z));){if(!j||j(Z)){if(!nt)return[Z];J.push(Z)}Z=Z.parentNode}return nt?J:null},P=(M,j,Q)=>{let nt=j;if(M){Dt(j)&&(nt=J=>R(J,j));for(let J=M[Q];J;J=J[Q])if(pe(nt)&&nt(J))return J}return null},U=function(M,j,Q){const nt=Q??this;if(ct(M)){const J=[];return Du(M,(Z,ft)=>{const At=p(Z);At&&J.push(j.call(nt,At,ft))}),J}{const J=p(M);return!!J&&j.call(nt,J)}},Y=(M,j)=>{U(M,Q=>{Se(j,(nt,J)=>{h(Q,J,nt)})})},V=(M,j)=>{U(M,Q=>{const nt=O(Q);an(nt,j)})},L=(M,j,Q,nt,J)=>U(M,Z=>{const ft=Dt(j)?t.createElement(j):j;return mt(Q)&&Y(ft,Q),nt&&(!Dt(nt)&&nt.nodeType?ft.appendChild(nt):Dt(nt)&&V(ft,nt)),J?ft:Z.appendChild(ft)}),z=(M,j,Q)=>L(t.createElement(M),M,j,Q,!0),I=bs.encodeAllRaw,$=(M,j)=>U(M,Q=>{const nt=O(Q);return j&&rt(Me(nt),J=>{Yn(J)&&0===J.dom.length?Mt(J):at(nt,J)}),Mt(nt),nt.dom}),gt=(M,j,Q)=>{U(M,nt=>{if(xt(nt)){const J=O(nt),Z=j.split(" ");rt(Z,ft=>{var At,Ct,Ut,vt;mt(Q)?(Q?T:F)(J,ft):(Ct=ft,y(At=J)?At.dom.classList.toggle(Ct):(vt=Ct,Tt(w(Ut=At),vt)?_(Ut,vt):N(Ut,vt)),H(At))})}})},it=(M,j,Q)=>U(j,nt=>{var J;const Z=ct(j)?M.cloneNode(!0):M;return Q&&Du(yk(nt.childNodes),ft=>{Z.appendChild(ft)}),null===(J=nt.parentNode)||void 0===J||J.replaceChild(Z,nt),nt}),Ot=M=>{if(xt(M)){const j="a"===M.nodeName.toLowerCase()&&!g(M,"href")&&g(M,"id");if(g(M,"name")||g(M,"data-mce-bookmark")||j)return!0}return!1},ht=()=>t.createRange(),Kt=(M,j,Q,nt)=>{if(ct(M)){let J=M.length;const Z=[];for(;J--;)Z[J]=Kt(M[J],j,Q,nt);return Z}return!e.collect||M!==t&&M!==r||i.push([M,j,Q,nt]),u.bind(M,j,Q,nt||Rt)},Yt=(M,j,Q)=>{if(ct(M)){let nt=M.length;const J=[];for(;nt--;)J[nt]=Yt(M[nt],j,Q);return J}if(i.length>0&&(M===t||M===r)){let nt=i.length;for(;nt--;){const[J,Z,ft]=i[nt];M!==J||j&&j!==Z||Q&&Q!==ft||u.unbind(J,Z,ft)}}return u.unbind(M,j,Q)},yt=M=>{if(M&&xt(M)){const j=M.getAttribute("data-mce-contenteditable");return j&&"inherit"!==j?j:"inherit"!==M.contentEditable?M.contentEditable:null}return null},Rt={doc:t,settings:e,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:u,isBlock:M=>Dt(M)?Zt(f,M):xt(M)&&(Zt(f,M.nodeName)||Ys(l,M)),root:null,clone:(M,j)=>M.cloneNode(j),getRoot:C,getViewPort:M=>{const j=Mi(M);return{x:j.x,y:j.y,w:j.width,h:j.height}},getRect:M=>{const j=p(M),Q=S(j),nt=A(j);return{x:Q.x,y:Q.y,w:nt.w,h:nt.h}},getSize:A,getParent:(M,j,Q)=>{const nt=D(M,j,Q,!1);return nt&&nt.length>0?nt[0]:null},getParents:D,get:p,getNext:(M,j)=>P(M,j,"nextSibling"),getPrev:(M,j)=>P(M,j,"previousSibling"),select:(M,j)=>{var Q,nt;const J=null!==(nt=null!==(Q=p(j))&&void 0!==Q?Q:e.root_element)&&void 0!==nt?nt:t;return pe(J.querySelectorAll)?Ye(J.querySelectorAll(M)):[]},is:R,add:L,create:z,createHTML:(M,j,Q="")=>{let nt="<"+M;for(const J in j)yn(j,J)&&(nt+=" "+J+'="'+I(j[J])+'"');return as(Q)&&Zt(l.getVoidElements(),M)?nt+" />":nt+">"+Q+"</"+M+">"},createFragment:M=>{const j=t.createElement("div"),Q=t.createDocumentFragment();let nt;for(Q.appendChild(j),M&&(j.innerHTML=M);nt=j.firstChild;)Q.appendChild(nt);return Q.removeChild(j),Q},remove:$,setStyle:(M,j,Q)=>{U(M,nt=>{const J=O(nt);Hg(J,j,Q),e.update_styles&&zg(c,J)})},getStyle:k,setStyles:(M,j)=>{U(M,Q=>{const nt=O(Q);Se(j,(J,Z)=>{Hg(nt,Z,J)}),e.update_styles&&zg(c,nt)})},removeAllAttribs:M=>U(M,j=>{const Q=j.attributes;for(let nt=Q.length-1;nt>=0;nt--)j.removeAttributeNode(Q.item(nt))}),setAttrib:h,setAttribs:Y,getAttrib:g,getPos:S,parseStyle:M=>c.parse(M),serializeStyle:(M,j)=>c.serialize(M,j),addStyle:M=>{if(Rt!==we.DOM&&t===document){if(n[M])return;n[M]=!0}let j=t.getElementById("mceDefaultStyles");if(!j){j=t.createElement("style"),j.id="mceDefaultStyles",j.type="text/css";const Q=t.head;Q.firstChild?Q.insertBefore(j,Q.firstChild):Q.appendChild(j)}j.styleSheet?j.styleSheet.cssText+=M:j.appendChild(t.createTextNode(M))},loadCSS:M=>{M||(M=""),rt(M.split(","),j=>{o[j]=!0,a.load(j).catch(Nt)})},addClass:(M,j)=>{gt(M,j,!0)},removeClass:(M,j)=>{gt(M,j,!1)},hasClass:(M,j)=>{const Q=v(M),nt=j.split(" ");return mt(Q)&&mr(nt,J=>K(Q,J))},toggleClass:gt,show:M=>{U(M,j=>ot(O(j),"display"))},hide:M=>{U(M,j=>ja(O(j),"display","none"))},isHidden:M=>{const j=v(M);return mt(j)&&ls(q(j,"display"),"none")},uniqueId:M=>(M||"mce_")+s++,setHTML:V,getOuterHTML:M=>{const j=v(M);return mt(j)?xt(j.dom)?j.dom.outerHTML:(Q=>{const nt=X("div"),J=O(Q.dom.cloneNode(!0));return _t(nt,J),tn(nt)})(j):""},setOuterHTML:(M,j)=>{U(M,Q=>{xt(Q)&&(Q.outerHTML=j)})},decode:bs.decode,encode:I,insertAfter:(M,j)=>{const Q=p(j);return U(M,nt=>{const J=Q?.parentNode,Z=Q?.nextSibling;return J&&(Z?J.insertBefore(nt,Z):J.appendChild(nt)),nt})},replace:it,rename:(M,j)=>{if(M.nodeName!==j.toUpperCase()){const Q=z(j);return Du(b(M),nt=>{h(Q,nt.nodeName,g(M,nt.nodeName))}),it(Q,M,!0),Q}return M},findCommonAncestor:(M,j)=>{let Q=M;for(;Q;){let nt=j;for(;nt&&Q!==nt;)nt=nt.parentNode;if(Q===nt)break;Q=Q.parentNode}return!Q&&M.ownerDocument?M.ownerDocument.documentElement:Q},run:U,getAttribs:b,isEmpty:(M,j,Q)=>{let nt=0;if(Ot(M))return!1;const J=M.firstChild;if(J){const Z=new en(J,M),ft=l?l.getWhitespaceElements():{},At=j||(l?l.getNonEmptyElements():null);let Ct=J;do{if(xt(Ct)){const zt=Ct.getAttribute("data-mce-bogus");if(zt){Ct=Z.next("all"===zt);continue}const Ut=Ct.nodeName.toLowerCase();if(At&&At[Ut]){if("br"===Ut){nt++,Ct=Z.next();continue}return!1}if(Ot(Ct))return!1}if(ps(Ct)||lt(Ct)&&!Gs(Ct.data)&&(!Q?.includeZwsp||!ek(Ct.data))||lt(Ct)&&Ct.parentNode&&ft[Ct.parentNode.nodeName]&&Gs(Ct.data))return!1;Ct=Z.next()}while(Ct)}return nt<=1},createRng:ht,nodeIndex:$a,split:(M,j,Q)=>{let nt,J,Z=ht();if(M&&j&&M.parentNode&&j.parentNode){const ft=M.parentNode;return Z.setStart(ft,$a(M)),Z.setEnd(j.parentNode,$a(j)),nt=Z.extractContents(),Z=ht(),Z.setStart(j.parentNode,$a(j)+1),Z.setEnd(ft,$a(M)+1),J=Z.extractContents(),ft.insertBefore(ku(Rt,nt),M),ft.insertBefore(Q||j,M),ft.insertBefore(ku(Rt,J),M),$(M),Q||j}},bind:Kt,unbind:Yt,fire:(M,j,Q)=>u.dispatch(M,j,Q),dispatch:(M,j,Q)=>u.dispatch(M,j,Q),getContentEditable:yt,getContentEditableParent:M=>{const j=C();let Q=null;for(let nt=M;nt&&nt!==j&&(Q=yt(nt),null===Q);nt=nt.parentNode);return Q},isEditable:M=>{if(mt(M)){const j=xt(M)?M:M.parentElement;return mt(j)&&no(O(j))}return!1},destroy:()=>{if(i.length>0){let M=i.length;for(;M--;){const[j,Q,nt]=i[M];u.unbind(j,Q,nt)}}Se(o,(M,j)=>{a.unload(j),delete o[j]})},isChildOf:(M,j)=>M===j||j.contains(M),dumpRng:M=>"startContainer: "+M.startContainer.nodeName+", startOffset: "+M.startOffset+", endContainer: "+M.endContainer.nodeName+", endOffset: "+M.endOffset},jt=((M,j,Q)=>{const nt=j.keep_values,Z={style:{set:(ft,At)=>{const Ct=O(ft);nt&&qi(Ct,Bu,At),on(Ct,"style"),Dt(At)&&ms(Ct,M.parse(At))},get:ft=>{const At=O(ft),Ct=jn(At,Bu)||jn(At,"style");return M.serialize(M.parse(Ct),Ee(At))}}};return nt&&(Z.href=Z.src={set:(ft,At,Ct)=>{const zt=O(ft);pe(j.url_converter)&&mt(At)&&(At=j.url_converter.call(j.url_converter_scope||Q(),String(At),Ct,ft)),qi(zt,"data-mce-"+Ct,At),qi(zt,Ct,At)},get:(ft,At)=>{const Ct=O(ft);return jn(Ct,"data-mce-"+At)||jn(Ct,At)}}),Z})(c,e,pt(Rt));return Rt};we.DOM=we(document),we.nodeIndex=$a;const xk=we.DOM;class Yo{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,r)=>{const o=xk;let s;const a=()=>{o.remove(i),s&&(s.onerror=s.onload=s=null)},i=o.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=dt._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:r,reject:o})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(l,c)=>{ke(n.scriptLoadedCallbacks,c).each(u=>{rt(u,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},o=l=>{const c=$t(l,u=>"rejected"===u.status);return c.length>0?Promise.reject(rn(c,({reason:u})=>ct(u)?u:[u])):Promise.resolve()},s=l=>Promise.allSettled(re(l,c=>2===n.states[c]?(r("resolve",c),Promise.resolve()):3===n.states[c]?(r("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,r("resolve",c);const u=n.queue;return u.length>0?(n.queue=[],s(u).then(o)):Promise.resolve()},()=>(n.states[c]=3,r("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return E.from(u).each(Vn),o(c)})),i=Fn(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,c)})}):a(i)}}Yo.ScriptLoader=new Yo;const cn=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},$i={},Pu=cn("en"),Ug=()=>ke($i,Pu.get()),ao={getData:()=>Ho($i,t=>({...t})),setCode:t=>{t&&Pu.set(t)},getCode:()=>Pu.get(),add:(t,e)=>{let n=$i[t];n||($i[t]=n={}),Se(e,(r,o)=>{n[o.toLowerCase()]=r})},translate:t=>{const e=Ug().getOr({}),n=i=>pe(i)?Object.prototype.toString.call(i):r(i)?"":""+i,r=i=>""===i||null==i,o=i=>{const l=n(i);return ke(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(r(t))return"";if(Vt(a=t)&&Zt(a,"raw"))return n(t.raw);var a,i;if(ct(i=t)&&i.length>1){const i=t.slice(1);return s(o(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>Zt(i,c)?n(i[c]):l))}return s(o(t))},isRtl:()=>Ug().bind(t=>ke(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>Zt($i,t)},Hn=()=>{const t=[],e={},n={},r=[],o=(l,c)=>{const u=$t(r,f=>f.name===l&&f.state===c);rt(u,f=>f.resolve())},s=l=>Zt(e,l),a=(l,c)=>{const u=ao.getCode();!u||c&&-1===(","+(c||"")+",").indexOf(","+u+",")||Yo.ScriptLoader.add(e[l]+"/langs/"+u+".js")},i=(l,c="added")=>"added"===c&&Zt(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(u=>{r.push({name:l,state:c,resolve:u})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==Hn.languageLoad&&(s(l)?a(l,c):i(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},o(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>Dt(c)?Dt(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let u=Dt(c)?c:c.prefix+c.resource+c.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=Hn.baseURL+"/"+u),e[l]=u.substring(0,u.lastIndexOf("/"));const f=()=>(o(l,"loaded"),Promise.resolve());return n[l]?f():Yo.ScriptLoader.add(u).then(f)},waitFor:i}};Hn.languageLoad=!0,Hn.baseURL="",Hn.PluginManager=Hn(),Hn.ThemeManager=Hn(),Hn.ModelManager=Hn();const wk=t=>{const e=cn(E.none()),n=()=>e.get().each(r=>clearInterval(r));return{clear:()=>{n(),e.set(E.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:r=>{n(),e.set(E.some(setInterval(r,t)))}}},Cs=()=>{const t=(e=>{const n=cn(E.none()),r=()=>n.get().each(e);return{clear:()=>{r(),n.set(E.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(E.some(o))}}})(Nt);return{...t,on:e=>t.get().each(e)}},kc=(t,e)=>{let n=null;return{cancel:()=>{Qt(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Qt(n)&&(n=setTimeout(()=>{n=null,t.apply(null,r)},e))}}},Lu=(t,e)=>{let n=null;const r=()=>{Qt(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,t.apply(null,o)},e)}}},Wi=pt("mce-annotation"),Zs=pt("data-mce-annotation"),Wa=pt("data-mce-annotation-uid"),Vi=pt("data-mce-annotation-active"),Ki=pt("data-mce-annotation-classes"),Xi=pt("data-mce-annotation-attrs"),qg=t=>e=>de(e,t),$g=(t,e)=>{const n=t.selection.getRng(),r=O(n.startContainer),o=O(t.getBody()),s=e.fold(()=>"."+Wi(),i=>`[${Zs()}="${i}"]`),a=xn(r,n.startOffset).getOr(r);return Ur(a,s,qg(o)).bind(i=>Jr(i,`${Wa()}`).bind(l=>Jr(i,`${Zs()}`).map(c=>{const u=Vg(t,l);return{uid:l,name:c,elements:u}})))},Wg=(t,e)=>Ma(t,"data-mce-bogus")||lg(t,'[data-mce-bogus="all"]',qg(e)),Vg=(t,e)=>{const n=O(t.getBody()),r=Dn(n,`[${Wa()}="${e}"]`);return $t(r,o=>!Wg(o,n))},Kg=(t,e)=>{const n=O(t.getBody()),r=Dn(n,`[${Zs()}="${e}"]`),o={};return rt(r,s=>{if(!Wg(s,n)){const a=jn(s,Wa()),i=ke(o,a).getOr([]);o[a]=i.concat([s])}}),o};let Xg=0;const Gi=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Xg++,t+"_"+n+Xg+String(e)},Gg=(t,e)=>O(t.dom.cloneNode(e)),ta=t=>Gg(t,!1),Yg=t=>Gg(t,!0),Qg=(t,e)=>{const n=((o,s)=>{const a=X(s),i=d(o);return Qr(a,i),a})(t,e);Bt(t,n);const r=Me(t);return ge(n,r),Mt(t),n},Jg=(t,e,n=Ce)=>{const r=new en(t,e),o=s=>{let a;do{a=r[s]()}while(a&&!lt(a)&&!n(a));return E.from(a).filter(lt)};return{current:()=>E.from(r.current()).filter(lt),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},ea=(t,e)=>{const n=e||(o=>t.isBlock(o)||Ie(o)||Re(o)),r=(o,s,a,i)=>{if(lt(o)){const l=i(o,s,o.data);if(-1!==l)return E.some({container:o,offset:l})}return a().bind(l=>r(l.container,l.offset,a,i))};return{backwards:(o,s,a,i)=>{const l=Jg(o,i??t.getRoot(),n);return r(o,s,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(o,s,a,i)=>{const l=Jg(o,i??t.getRoot(),n);return r(o,s,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},Va=Math.round,na=t=>t?{left:Va(t.left),top:Va(t.top),bottom:Va(t.bottom),right:Va(t.right),width:Va(t.width),height:Va(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Zg=(t,e)=>(t=na(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),th=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,Yi=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&th(e.top-t.bottom,t,e)},Qi=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&th(e.bottom-t.top,t,e),eh=(t,e,n)=>{const r=Math.max(Math.min(e,t.left+t.width),t.left),o=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-r)*(e-r)+(n-o)*(n-o))},Ec=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},xs=(t,e)=>{if(xt(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},Sk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),nh=t=>Dt(t)&&t.charCodeAt(0)>=768&&Sk.test(t),rh=xt,kk=qr,oh=lc("display","block table"),Ek=lc("float","left right"),Ji=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(rh,kk,Fo(Ek)),Nk=Fo(lc("white-space","pre pre-line pre-wrap")),Zi=lt,Mu=Ie,sh=we.nodeIndex,Nc=(t,e)=>e<0&&xt(t)&&t.hasChildNodes()?void 0:xs(t,e),Iu=t=>t?t.createRange():we.DOM.createRng(),Fu=t=>Dt(t)&&/[\r\n\t ]/.test(t),ah=t=>!!t.setStart&&!!t.setEnd,ju=t=>{const e=t.startContainer,n=t.startOffset;if(Fu(t.toString())&&Nk(e.parentNode)&&lt(e)){const r=e.data;if(Fu(r[n-1])||Fu(r[n+1]))return!0}return!1},ih=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,ws=t=>{var e;let n;const r=t.getClientRects();return n=na(r.length>0?r[0]:t.getBoundingClientRect()),!ah(t)&&Mu(t)&&ih(n)?(o=>{const s=o.ownerDocument,a=Iu(s),i=s.createTextNode(ln),l=o.parentNode;l.insertBefore(i,o),a.setStart(i,0),a.setEnd(i,1);const c=na(a.getBoundingClientRect());return l.removeChild(i),c})(t):ih(n)&&ah(t)&&null!==(e=(o=>{const a=o.endContainer,i=o.startOffset,l=o.endOffset;if(o.startContainer===a&&lt(a)&&0===i&&1===l){const c=o.cloneRange();return c.setEndAfter(a),ws(c)}return null})(t))&&void 0!==e?e:n},ra=(t,e)=>{const n=Zg(t,e);return n.width=1,n.right=n.left+1,n},G=(t,e,n)=>{const r=()=>(n||(n=(o=>{const s=[],a=u=>{var f,p;0!==u.height&&(s.length>0&&(f=u).left===(p=s[s.length-1]).left&&f.top===p.top&&f.bottom===p.bottom&&f.right===p.right||s.push(u))},i=(u,f)=>{const p=Iu(u.ownerDocument);if(f<u.data.length){if(nh(u.data[f]))return;if(nh(u.data[f-1])&&(p.setStart(u,f),p.setEnd(u,f+1),!ju(p)))return void a(ra(ws(p),!1))}f>0&&(p.setStart(u,f-1),p.setEnd(u,f),ju(p)||a(ra(ws(p),!1))),f<u.data.length&&(p.setStart(u,f),p.setEnd(u,f+1),ju(p)||a(ra(ws(p),!0)))},l=o.container(),c=o.offset();if(Zi(l))return i(l,c),s;if(rh(l))if(o.isAtEnd()){const u=Nc(l,c);Zi(u)&&i(u,u.data.length),Ji(u)&&!Mu(u)&&a(ra(ws(u),!1))}else{const u=Nc(l,c);if(Zi(u)&&i(u,0),Ji(u)&&o.isAtEnd())return a(ra(ws(u),!1)),s;const f=Nc(o.container(),o.offset()-1);Ji(f)&&!Mu(f)&&(oh(f)||oh(u)||!Ji(u))&&a(ra(ws(f),!1)),Ji(u)&&a(ra(ws(u),!0))}return s})(G(t,e))),n);return{container:pt(t),offset:pt(e),toRange:()=>{const o=Iu(t.ownerDocument);return o.setStart(t,e),o.setEnd(t,e),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(Zi(t),0===e),isAtEnd:()=>Zi(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:o=>o&&t===o.container()&&e===o.offset(),getNode:o=>Nc(t,o?e-1:e)}};G.fromRangeStart=t=>G(t.startContainer,t.startOffset),G.fromRangeEnd=t=>G(t.endContainer,t.endOffset),G.after=t=>G(t.parentNode,sh(t)+1),G.before=t=>G(t.parentNode,sh(t)),G.isAbove=(t,e)=>pn(_n(e.getClientRects()),yo(t.getClientRects()),Yi).getOr(!1),G.isBelow=(t,e)=>pn(yo(e.getClientRects()),_n(t.getClientRects()),Qi).getOr(!1),G.isAtStart=t=>!!t&&t.isAtStart(),G.isAtEnd=t=>!!t&&t.isAtEnd(),G.isTextPosition=t=>!!t&&lt(t.container()),G.isElementPosition=t=>!G.isTextPosition(t);const _c=(t,e)=>{lt(e)&&0===e.data.length&&t.remove(e)},zu=(t,e,n)=>{var r,s;fu(n)?((r,o,s)=>{const a=E.from(s.firstChild),i=E.from(s.lastChild);o.insertNode(s),a.each(l=>_c(r,l.previousSibling)),i.each(l=>_c(r,l.nextSibling))})(t,e,n):(r=t,e.insertNode(s=n),_c(r,s.previousSibling),_c(r,s.nextSibling))},io=lt,lh=Ks,ch=we.nodeIndex,dh=t=>{const e=t.parentNode;return lh(e)?dh(e):e},Hu=t=>t?Gr(t.childNodes,(e,n)=>(lh(n)&&"BR"!==n.nodeName?e=e.concat(Hu(n)):e.push(n),e),[]):[],uh=t=>e=>t===e,fh=t=>(io(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,r;n=Hu(dh(e)),r=Ta(n,uh(e),e),n=n.slice(0,r+1);const o=Gr(n,(s,a,i)=>(io(a)&&io(n[i-1])&&s++,s),0);return n=Mr(n,oo([e.nodeName])),r=Ta(n,uh(e),e),r-o})(t)+"]",mh=(t,e)=>{let n,r=[],o=e.container(),s=e.offset();if(io(o))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&io(c);)l+=c.data.length;return l})(o,s);else{const i=o.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",o=i[s]}r.push(fh(o));let a=((i,l,c)=>{const u=[];for(let f=l.parentNode;f&&f!==i;f=f.parentNode)u.push(f);return u})(t,o);return a=Mr(a,Fo(Ks)),r=r.concat(Ra(a,i=>fh(i))),r.reverse().join("/")+","+n},ph=(t,e)=>{if(!e)return null;const n=e.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",s=Gr(r,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((c,u,f)=>{let p=Hu(c);return p=Mr(p,(v,g)=>!io(v)||!io(p[g-1])),p=Mr(p,oo([u])),p[f]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!io(s)&&s.parentNode){let a;return a="after"===o?ch(s)+1:ch(s),G(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;io(l);){const u=l.data.length;if(i>=c&&i<=c+u){a=l,i-=c;break}if(!io(l.nextSibling)){a=l,i=u;break}c+=u,l=l.nextSibling}return io(a)&&i>a.data.length&&(i=a.data.length),G(a,i)})(s,parseInt(o,10))},Ac=Re,gh=(t,e,n,r,o)=>{const s=o?r.startContainer:r.endContainer;let a=o?r.startOffset:r.endOffset;const i=[],l=t.getRoot();if(lt(s))i.push(n?((c,u,f)=>{let p=c(u.data.slice(0,f)).length;for(let v=u.previousSibling;v&&lt(v);v=v.previousSibling)p+=c(v.data).length;return p})(e,s,a):a);else{let c=0;const u=s.childNodes;a>=u.length&&u.length&&(c=1,a=Math.max(0,u.length-1)),i.push(t.nodeIndex(u[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(t.nodeIndex(c,n));return i},Uu=(t,e,n)=>{let r=0;return dt.each(t.select(e),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},hh=(t,e)=>{let n=e?t.startContainer:t.endContainer,r=e?t.startOffset:t.endOffset;if(xt(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(e?r:r-1,o.length-1)],n&&(r=e?0:n.childNodes.length,e?t.setStart(n,r):t.setEnd(n,r))}},vh=t=>(hh(t,!0),hh(t,!1),t),bh=(t,e)=>{if(xt(t)&&(t=xs(t,e),Ac(t)))return t;if(Nr(t)){lt(t)&&Ua(t)&&(t=t.parentNode);let n=t.previousSibling;if(Ac(n)||(n=t.nextSibling,Ac(n)))return n}},yh=(t,e,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Ac(r)){const a=r.nodeName;return{name:a,index:Uu(n.dom,a,r)}}const s=bh((a=o).startContainer,a.startOffset)||bh(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:Uu(n.dom,a,s)}}return((a,i,l,c)=>{const u=i.dom,f=gh(u,a,l,c,!0),p=i.isForward(),v=hg(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:f,forward:p,...v}:{start:f,end:gh(u,a,l,c,!1),forward:p,...v}})(t,n,e,o)},Ch=(t,e,n)=>{const r={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",r,"&#xFEFF;"):t.create("span",r)},xh=(t,e)=>{const n=t.dom;let r=t.getRng();const o=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:Uu(n,i,a)};const c=vh(r.cloneRange());if(!s){c.collapse(!1);const f=Ch(n,o+"_end",e);zu(n,c,f)}r=vh(r),r.collapse(!0);const u=Ch(n,o+"_start",e);return zu(n,r,u),t.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},qu=St(yh,ue,!0),wh=t=>{const e=s=>s(t),n=pt(t),r=()=>o,o={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:Be,isError:Ce,map:s=>tr.value(s(t)),mapError:r,bind:e,exists:e,forall:e,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:s=>{s(t)},toOptional:()=>E.some(t)};return o},Sh=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,o)=>r(t),isValue:Ce,isError:Be,map:e,mapError:r=>tr.error(r(t)),bind:e,exists:Ce,forall:Be,getOr:ue,or:ue,getOrThunk:ho,orThunk:ho,getOrDie:fr(String(t)),each:Nt,toOptional:E.none};return n},tr={value:wh,error:Sh,fromOption:(t,e)=>t.fold(()=>Sh(e),wh)},Eo=t=>{if(!ct(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return rt(t,(r,o)=>{const s=Qe(r);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!ct(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...u)=>{if(u.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+u.length);return u[o].apply(null,l)},match:u=>{const f=Qe(u);if(e.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+f.join(","));if(!mr(e,p=>Tt(f,p)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+"\nRequired: "+e.join(", "));return u[a].apply(null,l)},log:u=>{console.log(u,{constructors:e,constructor:a,params:l})}}}}),n};Eo([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const _k=t=>"inline-command"===t.type||"inline-format"===t.type,Ak=t=>"block-command"===t.type||"block-format"===t.type,Rk=t=>{const e=r=>tr.error({message:r,pattern:t}),n=(r,o,s)=>{if(void 0!==t.format){let a;if(ct(t.format)){if(!mr(t.format,Dt))return e(r+" pattern has non-string items in the `format` array");a=t.format}else{if(!Dt(t.format))return e(r+" pattern has non-string `format` parameter");a=[t.format]}return tr.value(o(a))}return void 0!==t.cmd?Dt(t.cmd)?tr.value(s(t.cmd,t.value)):e(r+" pattern has non-string `cmd` parameter"):e(r+" pattern is missing both `format` and `cmd` parameters")};if(!Vt(t))return e("Raw pattern is not an object");if(!Dt(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!Dt(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let r=t.start,o=t.end;return 0===o.length&&(o=r,r=""),n("Inline",s=>({type:"inline-format",start:r,end:o,format:s}),(s,a)=>({type:"inline-command",start:r,end:o,cmd:s,value:a}))}return void 0!==t.replacement?Dt(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):tr.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:t.start,format:r[0]}),(r,o)=>({type:"block-command",start:t.start,cmd:r,value:o}))},kh=t=>$t(t,Ak),Eh=t=>$t(t,_k),Nh=t=>{const e=(n=>{const r=[],o=[];return rt(n,s=>{s.fold(a=>{r.push(a)},a=>{o.push(a)})}),{errors:r,values:o}})(re(t,Rk));return rt(e.errors,n=>console.error(n.message,n.pattern)),e.values},$u=An().deviceType,Tk=$u.isTouch(),Ok=we.DOM,_h=t=>Cr(t,RegExp),wt=t=>e=>e.options.get(t),Wu=t=>Dt(t)||Vt(t),Ah=(t,e="")=>n=>{const r=Dt(n);if(r){if(-1!==n.indexOf("=")){const o=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return bn(a,(i,l)=>{const c=l.split("="),u=c[0],f=c.length>1?c[1]:u;return i[Yr(u)]=Yr(f),i},{})})(n);return{value:ke(o,t.id).getOr(e),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},Dk=wt("iframe_attrs"),Bk=wt("doctype"),Rh=wt("document_base_url"),Pk=wt("body_id"),Lk=wt("body_class"),Th=wt("content_security_policy"),Mk=wt("br_in_pre"),er=wt("forced_root_block"),tl=wt("forced_root_block_attrs"),Ik=wt("newline_behavior"),Fk=wt("br_newline_selector"),jk=wt("no_newline_selector"),zk=wt("keep_styles"),Hk=wt("end_container_on_empty_block"),Oh=wt("automatic_uploads"),Dh=wt("images_reuse_filename"),Uk=wt("images_replace_blob_uris"),Bh=wt("icons"),qk=wt("icons_url"),$k=wt("images_upload_url"),Wk=wt("images_upload_base_path"),Vk=wt("images_upload_credentials"),Kk=wt("images_upload_handler"),Xk=wt("content_css_cors"),Vu=wt("referrer_policy"),Ph=wt("language"),Gk=wt("language_url"),Lh=wt("indent_use_margin"),Yk=wt("indentation"),Qk=wt("content_css"),Jk=wt("content_style"),Mh=wt("font_css"),Zk=wt("directionality"),tE=wt("inline_boundaries_selector"),Ih=wt("object_resizing"),eE=wt("resize_img_proportional"),nE=wt("placeholder"),Fh=wt("event_root"),rE=wt("service_message"),Ka=wt("theme"),oE=wt("theme_url"),Ku=wt("model"),sE=wt("model_url"),el=wt("inline_boundaries"),aE=wt("formats"),iE=wt("preview_styles"),lE=wt("format_empty_lines"),cE=wt("format_noneditable_selector"),dE=wt("custom_ui_selector"),Xu=wt("inline"),uE=wt("hidden_input"),fE=wt("submit_patch"),mE=wt("add_form_submit_trigger"),pE=wt("add_unload_trigger"),gE=wt("custom_undo_redo_levels"),hE=wt("disable_nodechange"),jh=wt("readonly"),vE=wt("editable_root"),zh=wt("content_css_cors"),Rc=wt("plugins"),bE=wt("external_plugins"),yE=wt("block_unsupported_drop"),CE=wt("visual"),xE=wt("visual_table_class"),Hh=wt("visual_anchor_class"),wE=wt("iframe_aria_text"),SE=wt("setup"),kE=wt("init_instance_callback"),EE=wt("urlconverter_callback"),NE=wt("auto_focus"),_E=wt("browser_spellcheck"),AE=wt("protect"),RE=wt("paste_block_drop"),Tc=wt("paste_data_images"),TE=wt("paste_preprocess"),OE=wt("paste_postprocess"),DE=wt("newdocument_content"),BE=wt("paste_webkit_styles"),PE=wt("paste_remove_styles_if_webkit"),LE=wt("paste_merge_formats"),ME=wt("smart_paste"),IE=wt("paste_as_text"),FE=wt("paste_tab_spaces"),jE=wt("allow_html_data_urls"),zE=wt("text_patterns"),HE=wt("text_patterns_lookup"),Uh=wt("noneditable_class"),UE=wt("editable_class"),qE=wt("noneditable_regexp"),$E=wt("preserve_cdata"),WE=wt("highlight_on_focus"),Gu=wt("xss_sanitization"),VE=wt("init_content_sync"),qh=t=>dt.explode(t.options.get("images_file_types")),KE=wt("table_tab_navigation"),XE=wt("details_initial_state"),GE=wt("details_serialized_state"),YE=xt,$h=lt,Wh=t=>{const e=t.parentNode;e&&e.removeChild(t)},Vh=t=>{const e=Go(t);return{count:t.length-e.length,text:e}},Kh=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(Bn));)t.deleteData(e,1)},Xh=(t,e)=>(oa(t),e),oa=t=>{YE(t)&&Nr(t)&&(gg(t)?t.removeAttribute("data-mce-caret"):Wh(t)),$h(t)&&(Kh(t),0===t.data.length&&Wh(t))},JE=Re,ZE=ko,tN=cc,Gh=(t,e,n)=>{const r=Zg(e.getBoundingClientRect(),n);let o,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;o=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();o=t.scrollLeft-i.left,s=t.scrollTop-i.top}r.left+=o,r.right+=o,r.top+=s,r.bottom+=s,r.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),r.left+=a,r.right+=a),r},Yh=()=>fe.browser.isFirefox(),nl=t=>JE(t)||ZE(t),rl=t=>(nl(t)||Xo(t)&&Yh())&&Ko(O(t)).exists(no),nN=so,Yu=Re,rN=ko,Qh=lc("display","block table table-cell table-caption list-item"),Jh=Nr,Zh=Ua,oN=xt,sN=lt,aN=qr,Xa=t=>t>0,sa=t=>t<0,Oc=(t,e)=>{let n;for(;n=t(e);)if(!Zh(n))return n;return null},ol=(t,e,n,r,o)=>{const s=new en(t,r),a=Yu(t)||Zh(t);let i;if(sa(e)){if(a&&(i=Oc(s.prev.bind(s),!0),n(i)))return i;for(;i=Oc(s.prev.bind(s),o);)if(n(i))return i}if(Xa(e)){if(a&&(i=Oc(s.next.bind(s),!0),n(i)))return i;for(;i=Oc(s.next.bind(s),o);)if(n(i))return i}return null},Ss=(t,e)=>{for(;t&&t!==e;){if(Qh(t))return t;t=t.parentNode}return null},No=(t,e,n)=>Ss(t.container(),n)===Ss(e.container(),n),Qu=(t,e)=>{if(!e)return E.none();const n=e.container(),r=e.offset();return oN(n)?E.from(n.childNodes[r+t]):E.none()},t0=(t,e)=>{var n;const r=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),r},iN=(t,e,n)=>Ss(e,t)===Ss(n,t),e0=(t,e,n)=>{const r=t?"previousSibling":"nextSibling";let o=n;for(;o&&o!==e;){let s=o[r];if(s&&Jh(s)&&(s=s[r]),Yu(s)||rN(s)){if(iN(e,s,o))return s;break}if(aN(s))break;o=o.parentNode}return null},sl=St(t0,!0),al=St(t0,!1),Ju=(t,e,n)=>{let r;const o=St(e0,!0,e),s=St(e0,!1,e),a=n.startContainer,i=n.startOffset;if(Ua(a)){const l=sN(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if("before"===c&&(r=l.nextSibling,rl(r)))return sl(r);if("after"===c&&(r=l.previousSibling,rl(r)))return al(r)}if(!n.collapsed)return n;if(lt(a)){if(Jh(a)){if(1===t){if(r=s(a),r)return sl(r);if(r=o(a),r)return al(r)}if(-1===t){if(r=o(a),r)return al(r);if(r=s(a),r)return sl(r)}return n}if(hc(a)&&i>=a.data.length-1)return 1===t&&(r=s(a),r)?sl(r):n;if(gc(a)&&i<=1)return-1===t&&(r=o(a),r)?al(r):n;if(i===a.data.length)return r=s(a),r?sl(r):n;if(0===i)return r=o(a),r?al(r):n}return n},n0=(t,e)=>Qu(t?0:-1,e).filter(Yu),il=(t,e,n)=>{const r=Ju(t,e,n);return-1===t?G.fromRangeStart(r):G.fromRangeEnd(r)},Dc=t=>E.from(t.getNode()).map(O),Zu=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},Bc=(t,e)=>{const n=No(t,e);return!(n||!Ie(t.getNode()))||n};var dn,t;(t=dn||(dn={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const lN=Re,_o=lt,r0=xt,tf=Ie,Ga=qr,o0=t=>{return bg(t)||!!yu(e=t)&&!bn(Ye(e.getElementsByTagName("*")),(n,r)=>n||vg(r),!1);var e},Pc=yg,s0=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,a0=(t,e)=>{if(Xa(t)){if(Ga(e.previousSibling)&&!_o(e.previousSibling))return G.before(e);if(_o(e))return G(e,0)}if(sa(t)){if(Ga(e.nextSibling)&&!_o(e.nextSibling))return G.after(e);if(_o(e))return G(e,e.data.length)}return sa(t)?tf(e)?G.before(e):G.after(e):G.before(e)},ef=(t,e,n)=>{let r,o,s,a;if(!r0(n)||!e)return null;if(e.isEqual(G.after(n))&&n.lastChild){if(a=G.after(n.lastChild),sa(t)&&Ga(n.lastChild)&&r0(n.lastChild))return tf(n.lastChild)?G.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(_o(i)){if(sa(t)&&l>0)return G(i,--l);if(Xa(t)&&l<i.length)return G(i,++l);r=i}else{if(sa(t)&&l>0&&(o=s0(i,l-1),Ga(o)))return!o0(o)&&(s=ol(o,t,Pc,o),s)?_o(s)?G(s,s.data.length):G.after(s):_o(o)?G(o,o.data.length):G.before(o);if(Xa(t)&&l<i.childNodes.length&&(o=s0(i,l),Ga(o)))return tf(o)?((u,f)=>{const p=f.nextSibling;return p&&Ga(p)?_o(p)?G(p,0):G.before(p):ef(dn.Forwards,G.after(f),u)})(n,o):!o0(o)&&(s=ol(o,t,Pc,o),s)?_o(s)?G(s,0):G.before(s):_o(o)?G(o,0):G.after(o);r=o||a.getNode()}if(r&&(Xa(t)&&a.isAtEnd()||sa(t)&&a.isAtStart())&&(r=ol(r,t,Be,n,!0),Pc(r,n)))return a0(t,r);o=r&&ol(r,t,Pc,n);const c=Ir($t(((u,f)=>{const p=[];let v=u;for(;v&&v!==f;)p.push(v),v=v.parentNode;return p})(i,n),lN));return!c||o&&c.contains(o)?o?a0(t,o):null:(a=Xa(t)?G.after(c):G.before(c),a)},Ao=t=>({next:e=>ef(dn.Forwards,e,t),prev:e=>ef(dn.Backwards,e,t)}),i0=t=>G.isTextPosition(t)?0===t.offset():qr(t.getNode()),l0=t=>{if(G.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return qr(t.getNode(!0))},c0=(t,e)=>!G.isTextPosition(t)&&!G.isTextPosition(e)&&t.getNode()===e.getNode(!0),_r=(t,e,n)=>{const r=Ao(e);return E.from(t?r.next(n):r.prev(n))},ll=(t,e,n)=>_r(t,e,n).bind(r=>{return No(n,r,e)&&(s=n,a=r,t?!c0(s,a)&&(G.isTextPosition(i=s)||!Ie(i.getNode()))&&l0(s)&&i0(a):!c0(a,s)&&i0(s)&&l0(a))?_r(t,e,r):E.some(r);var s,a,i}),d0=(t,e,n,r)=>ll(t,e,n).bind(o=>r(o)?d0(t,e,o,r):E.some(o)),Ya=(t,e)=>{const n=t?e.firstChild:e.lastChild;return lt(n)?E.some(G(n,t?0:n.data.length)):n?qr(n)?E.some(t?G.before(n):Ie(r=n)?G.before(r):G.after(r)):((o,s,a)=>{const i=o?G.before(a):G.after(a);return _r(o,s,i)})(t,e,n):E.none();var r},Un=St(_r,!0),nr=St(_r,!1),qn=St(Ya,!0),$r=St(Ya,!1),nf="_mce_caret",Wr=t=>xt(t)&&t.id===nf,aa=(t,e)=>{let n=e;for(;n&&n!==t;){if(Wr(n))return n;n=n.parentNode}return null},u0=t=>Zt(t,"name"),f0=t=>dt.isArray(t.start),Lc=t=>!(!u0(t)&&Mn(t.forward))||t.forward,m0=(t,e)=>(xt(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),cN=(t,e)=>$r(t).fold(Ce,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),p0=(t,e,n)=>!(e.hasChildNodes()||!aa(t,e)||(((r,o)=>{var s;const a=(null!==(s=r.ownerDocument)&&void 0!==s?s:document).createTextNode(Bn);r.appendChild(a),o.setStart(a,0),o.setEnd(a,0)})(e,n),0)),g0=(t,e,n,r)=>{const o=n[e?"start":"end"],s=t.getRoot();if(o){let a=s,i=o[0];for(let l=o.length-1;a&&l>=1;l--){const c=a.childNodes;if(p0(s,a,r))return!0;if(o[l]>c.length-1)return!!p0(s,a,r)||cN(a,r);a=c[o[l]]}lt(a)&&(i=Math.min(o[0],a.data.length)),xt(a)&&(i=Math.min(o[0],a.childNodes.length)),e?r.setStart(a,i):r.setEnd(a,i)}return!0},rf=t=>lt(t)&&t.data.length>0,h0=(t,e,n)=>{const r=t.get(n.id+"_"+e),o=r?.parentNode,s=n.keep;if(r&&o){let a,i;if("start"===e?s?r.hasChildNodes()?(a=r.firstChild,i=1):rf(r.nextSibling)?(a=r.nextSibling,i=0):rf(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)+1):(a=o,i=t.nodeIndex(r)):s?r.hasChildNodes()?(a=r.firstChild,i=1):rf(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)):(a=o,i=t.nodeIndex(r)),!s){const l=r.previousSibling,c=r.nextSibling;let u;for(dt.each(dt.grep(r.childNodes),f=>{lt(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});u=t.get(n.id+"_"+e);)t.remove(u,!0);if(lt(c)&&lt(l)&&!fe.browser.isOpera()){const f=l.data.length;l.appendData(c.data),t.remove(c),a=l,i=f}}return E.some(G(a,i))}return E.none()},dN=(t,e,n)=>((r,o,s=!1)=>{return 2===o?yh(Go,s,r):3===o?(a=>{const i=a.getRng();return{start:mh(a.dom.getRoot(),G.fromRangeStart(i)),end:mh(a.dom.getRoot(),G.fromRangeEnd(i)),forward:a.isForward()}})(r):o?{rng:(a=r).getRng(),forward:a.isForward()}:xh(r,!1);var a})(t,e,n),uN=(t,e)=>{((n,r)=>{const o=n.dom;if(r){if(f0(r))return((s,a)=>{const i=s.createRng();return g0(s,!0,a,i)&&g0(s,!1,a,i)?E.some({range:i,forward:Lc(a)}):E.none()})(o,r);if(Dt(r.start))return((s,a)=>{const i=E.from(ph(s.getRoot(),a.start)),l=E.from(ph(s.getRoot(),a.end));return pn(i,l,(c,u)=>{const f=s.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Lc(a)}})})(o,r);if(Zt(r,"id"))return((s,a)=>{const i=h0(s,"start",a),l=h0(s,"end",a);return pn(i,l.or(i),(c,u)=>{const f=s.createRng();return f.setStart(m0(s,c.container()),c.offset()),f.setEnd(m0(s,u.container()),u.offset()),{range:f,forward:Lc(a)}})})(o,r);if(u0(r))return((s,a)=>E.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(o,r);if((s=>Zt(s,"rng"))(r))return E.some({range:r.rng,forward:Lc(r)})}return E.none()})(t,e).each(({range:n,forward:r})=>{t.setRng(n,r)})},Ar=t=>xt(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Mc=(v0=ln,t=>v0===t);var v0;const Qa=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),of=t=>!Qa(t)&&!Mc(t)&&!mu(t),sf=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},fN=t=>{return{value:(n=sf(t.red)+sf(t.green)+sf(t.blue),xi(n,"#").toUpperCase())};var n},mN=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,pN=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,b0=(t,e,n,r)=>({red:t,green:e,blue:n,alpha:r}),y0=(t,e,n,r)=>{const o=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(r);return b0(o,s,a,i)},Ic=t=>(e=>{if("transparent"===e)return E.some(b0(0,0,0,0));const n=mN.exec(e);if(null!==n)return E.some(y0(n[1],n[2],n[3],"1"));const r=pN.exec(e);return null!==r?E.some(y0(r[1],r[2],r[3],r[4])):E.none()})(t).map(fN).map(e=>"#"+e.value).getOr(t),af=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},C0=(t,e)=>{const n=Dn(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:$t(rn(t,s=>{const a=Ec(s);return a?[O(a)]:[]}),zi)},Ja=t=>C0(af(t.selection.getSel()),O(t.getBody())),cl=(t,e)=>fs(t,"table",e),x0=t=>Ze(t).fold(pt([t]),e=>[t].concat(x0(e))),lf=t=>$e(t).fold(pt([t]),e=>"br"===Ee(e)?Rn(e).map(n=>[t].concat(lf(n))).getOr([]):[t].concat(lf(e))),cf=(t,e)=>pn((n=>{const r=n.startContainer,o=n.startOffset;return lt(r)?0===o?E.some(O(r)):E.none():E.from(r.childNodes[o]).map(O)})(e),(n=>{const r=n.endContainer,o=n.endOffset;return lt(r)?o===r.data.length?E.some(O(r)):E.none():E.from(r.childNodes[o-1]).map(O)})(e),(n,r)=>{const o=qe(x0(t),St(de,n)),s=qe(lf(t),St(de,r));return o.isSome()&&s.isSome()}).getOr(!1),df=(t,e,n,r)=>{const o=n,s=new en(n,o),a=xr(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Tt(["td","th","table"],c.toLowerCase()));let i=n;do{if(lt(i)&&0!==dt.trim(i.data).length)return void(r?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(r?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=r?s.next():s.prev());"BODY"===o.nodeName&&(r?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},Fc=t=>{const e=t.selection.getSel();return mt(e)&&e.rangeCount>0},uf=(t,e)=>{const n=Ja(t);n.length>0?rt(n,r=>{const o=r.dom,s=t.dom.createRng();s.setStartBefore(o),s.setEndAfter(o),e(s,!0)}):e(t.selection.getRng(),!1)},w0=(t,e,n)=>{const r=xh(t,e);n(r),t.moveToBookmark(r)},dl=t=>x(t?.nodeType),ff=t=>xt(t)&&!Ar(t)&&!Wr(t)&&!Ks(t),ia=t=>!0===t.isContentEditable,S0=(t,e,n)=>{const{selection:r,dom:o}=t,s=r.getNode(),a=Re(s);w0(r,!0,()=>{e()}),a&&Re(s)&&o.isChildOf(s,t.getBody())?t.selection.select(s):n(r.getStart())&&gN(o,r)},gN=(t,e)=>{var n,r;const o=e.getRng(),{startContainer:s,startOffset:a}=o;if(!((i,l)=>{if(ff(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),u=parseInt(c,10);return!isNaN(u)&&u>0}return!1})(t,e.getNode())&&xt(s)){const i=s.childNodes,l=t.getRoot();let c;if(a<i.length){const u=i[a];c=new en(u,null!==(n=t.getParent(u,t.isBlock))&&void 0!==n?n:l)}else{const u=i[i.length-1];c=new en(u,null!==(r=t.getParent(u,t.isBlock))&&void 0!==r?r:l),c.next(!0)}for(let u=c.current();u;u=c.next()){if("false"===t.getContentEditable(u))return;if(lt(u)&&!pf(u))return o.setStart(u,0),void e.setRng(o)}}},k0=(t,e,n)=>{if(t){const r=e?"nextSibling":"previousSibling";for(t=n?t:t[r];t;t=t[r])if(xt(t)||!pf(t))return t}},mf=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Ys(t,e),Za=(t,e,n)=>t.schema.isValidChild(e,n),pf=(t,e=!1)=>{if(mt(t)&&lt(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return Gs(n)}return!1},E0=(t,e)=>{const n=t.dom;return ff(e)&&"false"===n.getContentEditable(e)&&((r,o)=>{const s="[data-mce-cef-wrappable]",a=cE(r),i=as(a)?s:`${s},${a}`;return Ne(O(o),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},ks=(t,e)=>pe(t)?t(e):(mt(e)&&(t=t.replace(/%(\w+)/g,(n,r)=>e[r]||n)),t),gf=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),hf=(t,e)=>{if(ye(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=Ic(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},jc=(t,e,n)=>{const r=t.getStyle(e,n);return hf(r,n)},N0=(t,e)=>{let n;return t.getParent(e,r=>!!xt(r)&&(n=t.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},zc=(t,e,n)=>t.getParents(e,n,t.getRoot()),vf=(t,e,n)=>{const r=t.formatter.get(e);return mt(r)&&Ae(r,n)},Ro=t=>yn(t,"block"),Rr=t=>yn(t,"selector"),nn=t=>yn(t,"inline"),bf=t=>Rr(t)&&!1!==t.expand&&!nn(t),ti=Ar,_0=zc,A0=pf,hN=mf,R0=(t,e)=>{let n=e;for(;n;){if(xt(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},T0=(t,e,n,r)=>{const o=e.data;if(t){for(let s=n;s>0;s--)if(r(o.charAt(s-1)))return s}else for(let s=n;s<o.length;s++)if(r(o.charAt(s)))return s;return-1},vN=(t,e,n)=>T0(t,e,n,r=>Mc(r)||Qa(r)),bN=(t,e,n)=>T0(t,e,n,of),O0=(t,e,n,r,o,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(c,u,f)=>{const p=ea(t);return E.from((o?p.backwards:p.forwards)(c,u,(g,b)=>ti(g.parentNode)?-1:(a=g,f(o,g,b)),i))};return l(n,r,vN).bind(c=>s?l(c.container,c.offset+(o?-1:0),bN):E.some(c)).orThunk(()=>a?E.some({container:a,offset:o?0:a.length}):E.none())},D0=(t,e,n,r,o)=>{const s=r[o];lt(r)&&as(r.data)&&s&&(r=s);const a=_0(t,r);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const c=e[l];if((!mt(c.collapsed)||c.collapsed===n.collapsed)&&Rr(c)&&t.is(a[i],c.selector))return a[i]}return r},B0=(t,e,n,r)=>{var o;let s=n;const a=t.getRoot(),i=e[0];if(Ro(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(o=t.getParent(n,"LI,TD,TH"))&&void 0!==o?o:a;s=t.getParent(lt(n)?n.parentNode:n,c=>c!==a&&hN(t.schema,c),l)}if(s&&Ro(i)&&i.wrapper&&(s=_0(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[r]&&!t.isBlock(s[r])&&(s=s[r],!gf(s,"br")););return s||n},P0=(t,e,n,r)=>{const o=n.parentNode;return!mt(n[r])&&(!(o!==e&&!ye(o)&&!t.isBlock(o))||P0(t,e,o,r))},Hc=(t,e,n,r,o)=>{let s=n;const a=o?"previousSibling":"nextSibling",i=t.getRoot();if(lt(n)&&!A0(n)&&(o?r>0:r<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let c=s[a];c;c=c[a]){const u=lt(c)&&!P0(t,i,c,a);if(!ti(c)&&(!Ie(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!A0(c,u))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},L0=t=>ti(t.parentNode)||ti(t),la=(t,e,n,r=!1)=>{let{startContainer:o,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return xt(o)&&o.hasChildNodes()&&(o=xs(o,s),lt(o)&&(s=0)),xt(a)&&a.hasChildNodes()&&(a=xs(a,e.collapsed?i:i-1),lt(a)&&(i=a.data.length)),o=R0(t,o),a=R0(t,a),L0(o)&&(o=ti(o)?o:o.parentNode,o=e.collapsed?o.previousSibling||o:o.nextSibling||o,lt(o)&&(s=e.collapsed?o.length:0)),L0(a)&&(a=ti(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,lt(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(O0(t,t.getRoot(),o,s,!0,r).each(({container:c,offset:u})=>{o=c,s=u}),O0(t,t.getRoot(),a,i,!1,r).each(({container:c,offset:u})=>{a=c,i=u})),(nn(l)||l.block_expand)&&(nn(l)&&lt(o)&&0!==s||(o=Hc(t,n,o,s,!0)),nn(l)&&lt(a)&&i!==a.data.length||(a=Hc(t,n,a,i,!1))),bf(l)&&(o=D0(t,n,e,o,"previousSibling"),a=D0(t,n,e,a,"nextSibling")),(Ro(l)||Rr(l))&&(o=B0(t,n,o,"previousSibling"),a=B0(t,n,a,"nextSibling"),Ro(l)&&(t.isBlock(o)||(o=Hc(t,n,o,s,!0)),t.isBlock(a)||(a=Hc(t,n,a,i,!1)))),xt(o)&&o.parentNode&&(s=t.nodeIndex(o),o=o.parentNode),xt(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:s,endContainer:a,endOffset:i}},ul=(t,e,n)=>{var r;const o=e.startOffset,s=xs(e.startContainer,o),a=e.endOffset,i=xs(e.endContainer,a-1),l=h=>{const C=h[0];lt(C)&&C===s&&o>=C.data.length&&h.splice(0,1);const S=h[h.length-1];return 0===a&&h.length>0&&S===i&&lt(S)&&h.splice(h.length-1,1),h},c=(h,C,S)=>{const k=[];for(;h&&h!==S;h=h[C])k.push(h);return k},u=(h,C)=>t.getParent(h,S=>S.parentNode===C,C),f=(h,C,S)=>{const k=S?"nextSibling":"previousSibling";for(let A=h,R=A.parentNode;A&&A!==C;A=R){R=A.parentNode;const D=c(A===h?A:A[k],k);D.length&&(S||D.reverse(),n(l(D)))}};if(s===i)return n(l([s]));const p=null!==(r=t.findCommonAncestor(s,i))&&void 0!==r?r:t.getRoot();if(t.isChildOf(s,i))return f(s,p,!0);if(t.isChildOf(i,s))return f(i,p);const v=u(s,p)||s,g=u(i,p)||i;f(s,v,!0);const b=c(v===s?v:v.nextSibling,"nextSibling",g===i?g.nextSibling:g);b.length&&n(l(b)),f(i,g)},yN=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],M0=(t,e,n,r,o,s)=>{const{uid:a=e,...i}=n;T(t,Wi()),Xe(t,`${Wa()}`,a),Xe(t,`${Zs()}`,r);const{attributes:l={},classes:c=[]}=o(a,i);if(Qr(t,l),u=t,rt(c,p=>{T(u,p)}),s){c.length>0&&Xe(t,`${Ki()}`,c.join(","));const u=Qe(l);u.length>0&&Xe(t,`${Xi()}`,u.join(","))}var u},I0=(t,e,n,r,o)=>{const s=X("span",t);return M0(s,e,n,r,o,!1),s},F0=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>ke(s,a).map(i=>i.settings),getNames:()=>Qe(s)}})();((s,a)=>{const i=Zs(),l=u=>E.from(u.attr(i)).bind(a.lookup),c=u=>{var f,p;u.attr(Wa(),null),u.attr(Zs(),null),u.attr(Vi(),null);const v=E.from(u.attr(Xi())).map(C=>C.split(",")).getOr([]),g=E.from(u.attr(Ki())).map(C=>C.split(",")).getOr([]);rt(v,C=>u.attr(C,null));const b=null!==(p=null===(f=u.attr("class"))||void 0===f?void 0:f.split(" "))&&void 0!==p?p:[],h=Gt(b,[Wi()].concat(g));u.attr("class",h.length>0?h.join(" "):null),u.attr(Ki(),null),u.attr(Xi(),null)};s.serializer.addTempAttr(Vi()),s.serializer.addAttributeFilter(i,u=>{for(const f of u)l(f).each(p=>{!1===p.persistent&&("span"===f.name?f.unwrap():c(f))})})})(t,e);const n=((s,a)=>{const i=cn({}),l=()=>({listeners:[],previous:Cs()}),c=(v,g)=>{u(v,b=>(g(b),b))},u=(v,g)=>{const b=i.get(),h=g(ke(b,v).getOrThunk(l));b[v]=h,i.set(b)},f=(v,g)=>{rt(Vg(s,v),b=>{g?Xe(b,Vi(),"true"):on(b,Vi())})},p=Lu(()=>{const v=zo(a.getNames());rt(v,g=>{u(g,b=>{const h=b.previous.get();return $g(s,E.some(g)).fold(()=>{h.each(C=>{var S;c(S=g,k=>{rt(k.listeners,A=>A(!1,S))}),b.previous.clear(),f(C,!1)})},({uid:C,name:S,elements:k})=>{var A,R,D;ls(h,C)||(h.each(A=>f(A,!1)),R=C,D=k,c(A=S,P=>{rt(P.listeners,U=>U(!0,A,{uid:R,nodes:re(D,Y=>Y.dom)}))}),b.previous.set(C),f(C,!0))}),{previous:b.previous,listeners:b.listeners}})})},30);return s.on("remove",()=>{p.cancel()}),s.on("NodeChange",()=>{p.throttle()}),{addListener:(v,g)=>{u(v,b=>({previous:b.previous,listeners:b.listeners.concat([g])}))}}})(t,e),r=Bi("span"),o=s=>{rt(s,a=>{r(a)?me(a):(i=>{F(i,Wi()),on(i,`${Wa()}`),on(i,`${Zs()}`),on(i,`${Vi()}`);const l=Jr(i,`${Xi()}`).map(f=>f.split(",")).getOr([]),c=Jr(i,`${Ki()}`).map(f=>f.split(",")).getOr([]);var u;rt(l,f=>on(i,f)),u=i,rt(c,f=>{F(u,f)}),on(i,`${Ki()}`),on(i,`${Xi()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,c,u,f;c=s,u=i,f=a,(l=t).undoManager.transact(()=>{const p=l.selection,v=p.getRng(),g=Ja(l).length>0,b=Gi("mce-annotation");if(v.collapsed&&!g&&((h,C)=>{const S=la(h.dom,C,[{inline:"span"}]);C.setStart(S.startContainer,S.startOffset),C.setEnd(S.endContainer,S.endOffset),h.selection.setRng(C)})(l,v),p.getRng().collapsed&&!g){const h=I0(l.getDoc(),b,f,c,u.decorate);an(h,ln),p.getRng().insertNode(h.dom),p.select(h.dom)}else w0(p,!1,()=>{uf(l,h=>{((t,e,n,r,o,s)=>{const a=[],i=I0(t.getDoc(),n,s,r,o),l=Cs(),c=()=>{l.clear()},u=p=>{rt(p,f)},f=p=>{switch(v=t,g=p,b="span",h=Ee(p),xe(g).fold(()=>"skipping",C=>{return"br"===h||Yn(S=g)&&dc(S)===Bn?"valid":(S=>Cn(S)&&K(S,Wi()))(g)?"existing":Wr(g.dom)?"caret":Ae(yN,S=>Ne(g,S))?"valid-block":Za(v,b,h)&&Za(v,Ee(C),b)?"valid":"invalid-child";var S})){case"invalid-child":{c();const v=Me(p);u(v),c();break}case"valid-block":c(),M0(p,n,s,r,o,!0);break;case"valid":{const v=l.get().getOrThunk(()=>{const g=ta(i);return a.push(g),l.set(g),g});It(p,v);break}}var v,g,b,h};ul(t.dom,e,p=>{c(),(v=>{const g=re(v,O);u(g)})(p)})})(l,h,b,c,u.decorate,f)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{$g(t,E.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();o(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();Se(Kg(t,s),(i,l)=>{o(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=Kg(t,s);return Ho(a,i=>re(i,l=>l.dom))}}},fl=t=>({getBookmark:St(dN,t),moveToBookmark:St(uN,t)});fl.isBookmarkNode=Ar;const j0=(t,e,n)=>!n.collapsed&&Ae(n.getClientRects(),r=>{return a=e,(s=t)>=(o=r).left&&s<=o.right&&a>=o.top&&a<=o.bottom;var o,s,a}),z0=(t,e,n)=>{t.dispatch(e,n)},H0=(t,e,n,r)=>{t.dispatch("FormatApply",{format:e,node:n,vars:r})},U0=(t,e,n,r)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:r})},q0=(t,e)=>t.dispatch("SetContent",e),$0=(t,e)=>t.dispatch("GetContent",e),W0=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),kt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||kt.metaKeyPressed(t),metaKeyPressed:t=>fe.os.isMacOS()||fe.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},ca="data-mce-selected",V0=Math.abs,Uc=Math.round,yf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},K0=(t,e)=>{const n=e.dom,r=e.getDoc(),o=document,s=e.getBody();let a,i,l,c,u,f,p,v,g,b,h,C,S,k,A;const R=yt=>mt(yt)&&(ug(yt)||n.is(yt,"figure.image")),D=yt=>ko(yt)||n.hasClass(yt,"mce-preview-object"),P=yt=>{const Rt=yt.target;((jt,M)=>{if("longpress"===(j=jt).type||0===j.type.indexOf("touch")){const j=jt.touches[0];return R(jt.target)&&!j0(j.clientX,j.clientY,M)}var j;return R(jt.target)&&!j0(jt.clientX,jt.clientY,M)})(yt,e.selection.getRng())&&!yt.isDefaultPrevented()&&e.selection.select(Rt)},U=yt=>n.hasClass(yt,"mce-preview-object")&&mt(yt.firstElementChild)?[yt,yt.firstElementChild]:n.is(yt,"figure.image")?[yt.querySelector("img")]:[yt],Y=yt=>{const Rt=Ih(e);return!!Rt&&"false"!==yt.getAttribute("data-mce-resize")&&yt!==e.getBody()&&(n.hasClass(yt,"mce-preview-object")&&mt(yt.firstElementChild)?Ne(O(yt.firstElementChild),Rt):Ne(O(yt),Rt))},V=(yt,Rt,jt)=>{if(mt(jt)){const M=U(yt);rt(M,j=>{j.style[Rt]||!e.schema.isValid(j.nodeName.toLowerCase(),Rt)?n.setStyle(j,Rt,jt):n.setAttrib(j,Rt,""+jt)})}},L=(yt,Rt,jt)=>{V(yt,"width",Rt),V(yt,"height",jt)},z=yt=>{let Rt,jt,M,j,Q;Rt=yt.screenX-f,jt=yt.screenY-p,C=Rt*c[2]+v,S=jt*c[3]+g,C=C<5?5:C,S=S<5?5:S,M=(R(a)||D(a))&&!1!==eE(e)?!kt.modifierPressed(yt):kt.modifierPressed(yt),M&&(V0(Rt)>V0(jt)?(S=Uc(C*b),C=Uc(S/b)):(C=Uc(S/b),S=Uc(C*b))),L(i,C,S),j=c.startPos.x+Rt,Q=c.startPos.y+jt,j=j>0?j:0,Q=Q>0?Q:0,n.setStyles(l,{left:j,top:Q,display:"block"}),l.innerHTML=C+" &times; "+S,c[2]<0&&i.clientWidth<=C&&n.setStyle(i,"left",void 0+(v-C)),c[3]<0&&i.clientHeight<=S&&n.setStyle(i,"top",void 0+(g-S)),Rt=s.scrollWidth-k,jt=s.scrollHeight-A,Rt+jt!==0&&n.setStyles(l,{left:j-Rt,top:Q-jt}),h||(e.dispatch("ObjectResizeStart",{target:a,width:v,height:g,origin:"corner-"+c.name}),h=!0)},I=()=>{const yt=h;h=!1,yt&&(V(a,"width",C),V(a,"height",S)),n.unbind(r,"mousemove",z),n.unbind(r,"mouseup",I),o!==r&&(n.unbind(o,"mousemove",z),n.unbind(o,"mouseup",I)),n.remove(i),n.remove(l),n.remove(u),$(a),yt&&(e.dispatch("ObjectResized",{target:a,width:C,height:S,origin:"corner-"+c.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},$=yt=>{Kt();const Rt=n.getPos(yt,s),jt=Rt.x,M=Rt.y,j=yt.getBoundingClientRect(),Q=j.width||j.right-j.left,nt=j.height||j.bottom-j.top;a!==yt&&(it(),a=yt,C=S=0);const J=e.dispatch("ObjectSelected",{target:yt});Y(yt)&&!J.isDefaultPrevented()?Se(yf,(Z,ft)=>{let At=n.get("mceResizeHandle"+ft);At&&n.remove(At),At=n.add(s,"div",{id:"mceResizeHandle"+ft,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ft+"-resize; margin:0; padding:0"}),n.bind(At,"mousedown",Ct=>{Ct.stopImmediatePropagation(),Ct.preventDefault(),(zt=>{const Ut=U(a)[0];var vt;f=zt.screenX,p=zt.screenY,v=Ut.clientWidth,g=Ut.clientHeight,b=g/v,c=Z,c.name=ft,c.startPos={x:Q*Z[0]+jt,y:nt*Z[1]+M},k=s.scrollWidth,A=s.scrollHeight,u=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=D(vt=a)?n.create("img",{src:fe.transparentSrc}):vt.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:jt,top:M,margin:0}),L(i,Q,nt),i.removeAttribute(ca),s.appendChild(i),n.bind(r,"mousemove",z),n.bind(r,"mouseup",I),o!==r&&(n.bind(o,"mousemove",z),n.bind(o,"mouseup",I)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},v+" &times; "+g)})(Ct)}),Z.elm=At,n.setStyles(At,{left:Q*Z[0]+jt-At.offsetWidth/2,top:nt*Z[1]+M-At.offsetHeight/2})}):it(!1)},gt=kc($,0),it=(yt=!0)=>{gt.cancel(),Kt(),a&&yt&&a.removeAttribute(ca),Se(yf,(Rt,jt)=>{const M=n.get("mceResizeHandle"+jt);M&&(n.unbind(M),n.remove(M))})},Ot=(yt,Rt)=>n.isChildOf(yt,Rt),ht=yt=>{if(h||e.removed||e.composing)return;const Rt="mousedown"===yt.type?yt.target:t.getNode(),jt=Ur(O(Rt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(j=>j.dom).filter(j=>n.isEditable(j.parentElement)).getOrUndefined(),M=mt(jt)?n.getAttrib(jt,ca,"1"):"1";if(rt(n.select(`img[${ca}],hr[${ca}]`),j=>{j.removeAttribute(ca)}),mt(jt)&&Ot(jt,s)&&e.hasFocus()){Yt();const j=t.getStart(!0);if(Ot(j,jt)&&Ot(t.getEnd(!0),jt))return n.setAttrib(jt,ca,M),void gt.throttle(jt)}it()},Kt=()=>{Se(yf,yt=>{yt.elm&&(n.unbind(yt.elm),delete yt.elm)})},Yt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{Yt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",ht),e.on("keyup compositionend",yt=>{a&&"TABLE"===a.nodeName&&ht(yt)}),e.on("hide blur",it),e.on("contextmenu longpress",P,!0)}),e.on("remove",Kt),{isResizable:Y,showResizeRect:$,hideResizeRect:it,updateResizeRect:ht,destroy:()=>{gt.cancel(),a=i=u=null}}},X0=(t,e,n)=>{const r=t.document.createRange();var o,s;return o=r,e.fold(s=>{o.setStartBefore(s.dom)},(s,a)=>{o.setStart(s.dom,a)},s=>{o.setStartAfter(s.dom)}),s=r,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),r},Cf=(t,e,n,r,o)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(r.dom,o),s},ml=Eo([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),G0=(t,e,n)=>e(O(n.startContainer),n.startOffset,O(n.endContainer),n.endOffset),Y0=(t,e,n,r)=>({start:t,soffset:e,finish:n,foffset:r}),xN=document.caretPositionFromPoint?(t,e,n)=>{var r,o;return E.from(null===(o=(r=t.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,n)).bind(s=>{if(null===s.offsetNode)return E.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),E.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var r,o;return E.from(null===(o=(r=t.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,e,n))}:E.none,xf=Eo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Qo={before:xf.before,on:xf.on,after:xf.after,cata:(t,e,n,r)=>t.fold(e,n,r),getStart:t=>t.fold(ue,ue,ue)},qc=Eo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ei={domRange:qc.domRange,relative:qc.relative,exact:qc.exact,exactFromRange:t=>qc.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:r=>O(r.startContainer),relative:(r,o)=>Qo.getStart(r),exact:(r,o,s,a)=>r});return ve(e)},range:Y0},$c=(t,e)=>{const n=Ee(t);return"input"===n?Qo.after(t):Tt(["br","img"],n)?0===e?Qo.before(t):Qo.after(t):Qo.on(t,e)},wN=(t,e)=>{const n=t.fold(Qo.before,$c,Qo.after),r=e.fold(Qo.before,$c,Qo.after);return ei.relative(n,r)},Q0=(t,e,n,r)=>{const o=$c(t,e),s=$c(n,r);return ei.relative(o,s)},wf=(t,e)=>{const n=(e||document).createDocumentFragment();return rt(t,r=>{n.appendChild(r.dom)}),O(n)},J0=(t,e,n)=>{return(r=ve(O(n)).dom,o=t,s=e,((a,i,l)=>{const c=O(a.document);return xN(c,i,l).map(u=>Y0(O(u.startContainer),u.startOffset,O(u.endContainer),u.endOffset))})(r,o,s)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,s},Sf=(t,e)=>mt(t)&&mt(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,Z0=(t,e,n)=>null!==((r,o,s)=>{let a=r;for(;a&&a!==o;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),kN=(t,e,n)=>Z0(t,e,r=>r.nodeName===n),EN=(t,e)=>Nr(t)&&!Z0(t,e,Wr),tv=(t,e,n)=>{const r=e.parentNode;if(r){const o=new en(e,t.getParent(r,t.isBlock)||t.getRoot());let s;for(;s=o[n?"prev":"next"]();)if(Ie(s))return!0}return!1},kf=(t,e,n,r,o)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=o.parentNode;let l,c;if(!i)return E.none();const u=t.getParent(i,t.isBlock)||s;if(r&&Ie(o)&&e&&t.isEmpty(u))return E.some(G(i,t.nodeIndex(o)));const f=new en(o,u);for(;c=f[r?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||EN(c,s))return E.none();if(lt(c)&&c.data.length>0)return kN(c,s,"A")?E.none():E.some(G(c,r?c.data.length:0));if(t.isBlock(c)||a[c.nodeName.toLowerCase()])return E.none();l=c}return ps(l)?E.none():n&&l?E.some(G(l,0)):E.none()},ev=(t,e,n,r)=>{const o=t.getRoot();let s,a=!1,i=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const c=xt(i)&&l===i.childNodes.length,u=t.schema.getNonEmptyElements();let f=n;if(Nr(i))return E.none();if(xt(i)&&l>i.childNodes.length-1&&(f=!1),Fi(i)&&(i=o,l=0),i===o){if(f&&(s=i.childNodes[l>0?l-1:0],s)&&(Nr(s)||u[s.nodeName]||Xo(s)))return E.none();if(i.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=lt(i)&&c?i.data.length:0,!e&&i===o.lastChild&&Xo(i)||((p,v)=>{let g=v;for(;g&&g!==p;){if(Re(g))return!0;g=g.parentNode}return!1})(o,i)||Nr(i))return E.none();if(i.hasChildNodes()&&!Xo(i)){s=i;const p=new en(i,o);do{if(Re(s)||Nr(s)){a=!1;break}if(lt(s)&&s.data.length>0){l=f?0:s.data.length,i=s,a=!0;break}if(u[s.nodeName.toLowerCase()]&&!jS(s)){l=t.nodeIndex(s),i=s.parentNode,f||l++,a=!0;break}}while(s=f?p.next():p.prev())}}}return e&&(lt(i)&&0===l&&kf(t,c,e,!0,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),xt(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Ie(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||tv(t,s,!1)||tv(t,s,!0)||kf(t,c,e,!0,s).each(p=>{i=p.container(),l=p.offset(),a=!0}))),f&&!e&&lt(i)&&l===i.data.length&&kf(t,c,e,!1,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),a&&i?E.some(G(i,l)):E.none();var g},Wc=(t,e)=>{const n=e.collapsed,r=e.cloneRange(),o=G.fromRangeStart(e);return ev(t,n,!0,r).each(s=>{n&&G.isAbove(o,s)||r.setStart(s.container(),s.offset())}),n||ev(t,n,!1,r).each(s=>{r.setEnd(s.container(),s.offset())}),n&&r.collapse(!0),Sf(e,r)?E.none():E.some(r)},Vc=(t,e)=>t.splitText(e),Kc=t=>{let e=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset;if(e===r&&lt(e)){if(n>0&&n<e.data.length)if(r=Vc(e,n),e=r.previousSibling,o>n){o-=n;const s=Vc(r,o).previousSibling;e=r=s,o=s.data.length,n=0}else o=0}else if(lt(e)&&n>0&&n<e.data.length&&(e=Vc(e,n),n=0),lt(r)&&o>0&&o<r.data.length){const s=Vc(r,o).previousSibling;r=s,o=s.data.length}return{startContainer:e,startOffset:n,endContainer:r,endOffset:o}},da=t=>({walk:(e,n)=>ul(t,e,n),split:Kc,expand:(e,n={type:"word"})=>{if("word"===n.type){const r=la(t,e,[{inline:"span"}]),o=t.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return e},normalize:e=>Wc(t,e).fold(Ce,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});da.compareRanges=Sf,da.getCaretRangeFromPoint=J0,da.getSelectedNode=Ec,da.getNode=xs;const NN=((t,e)=>{const n=o=>{const s=(a=>{const i=a.dom;return eo(a)?i.getBoundingClientRect().height:i.offsetHeight})(o);if(s<=0||null===s){const a=kr(o,t);return parseFloat(a)||0}return s},r=(o,s)=>bn(s,(a,i)=>{const l=kr(o,i),c=void 0===l?0:parseInt(l,10);return isNaN(c)?a:a+c},0);return{set:(o,s)=>{if(!x(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=o.dom;So(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:r,max:(o,s,a)=>{const i=r(o,a);return s>i?s-i:0}}})("height"),nv=()=>O(document),rv=(t,e)=>t.view(e).fold(pt([]),n=>{const r=t.owner(n),o=rv(t,r);return[n].concat(o)});var _N=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?E.none():E.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(O)},owner:t=>zn(t)});const Ef=t=>"textarea"===Ee(t),ov=(t,e)=>{const n=(o=>{const s=o.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===o.dom)return On(a.offsetLeft,a.offsetTop);const c=Oe(i?.pageYOffset,l.scrollTop),u=Oe(i?.pageXOffset,l.scrollLeft),f=Oe(l.clientTop,a.clientTop),p=Oe(l.clientLeft,a.clientLeft);return ro(o).translate(u-p,c-f)})(t),r=NN.get(t);return{element:t,bottom:n.top+r,height:r,pos:n,cleanup:e}},sv=(t,e,n,r)=>{RN(t,(o,s)=>AN(t,e,n,r),n)},av=(t,e,n,r,o)=>{const s={elm:r.element.dom,alignToTop:o};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(e,lr(e).top,r,o),t.dispatch("AfterScrollIntoView",s))},AN=(t,e,n,r)=>{O(t.getBody());const s=O(t.getDoc()),a=((i,l)=>{const c=((f,p)=>{const v=Me(f);if(0===v.length||Ef(f))return{element:f,offset:p};if(p<v.length&&!Ef(v[p]))return{element:v[p],offset:0};{const g=v[v.length-1];return Ef(g)?{element:f,offset:p}:"img"===Ee(g)?{element:g,offset:1}:Yn(g)?{element:g,offset:dc(g).length}:{element:g,offset:Me(g).length}}})(i,l),u=st('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return at(c.element,u),ov(u,()=>Mt(u))})(O(n.startContainer),n.startOffset);av(t,s,e,a,r),a.cleanup()},iv=(t,e,n,r)=>{const o=O(t.getDoc());av(t,o,n,ov(O(e),Nt),r)},RN=(t,e,n)=>{const r=n.startContainer,o=n.startOffset,s=n.endContainer,a=n.endOffset;e(O(r),O(s));const i=t.dom.createRng();i.setStart(r,o),i.setEnd(s,a),t.selection.setRng(n)},Nf=(t,e)=>t.element.dom.scrollIntoView({block:e?"start":"end"}),lv=(t,e,n,r)=>{const o=e+t,s=n.pos.top,a=n.bottom,i=a-s>=e;s<t?Nf(n,!1!==r):s>o?Nf(n,i?!1!==r:!0===r):a>o&&!i&&Nf(n,!0===r)},cv=(t,e,n,r)=>{const o=ve(t).dom.innerHeight;lv(e,o,n,r)},dv=(t,e,n,r)=>{const o=ve(t).dom.innerHeight;lv(e,o,n,r);const s=(i=>{const l=nv(),c=lr(l),u=((v,g)=>{const b=g.owner(v);return rv(g,b)})(i,_N),f=ro(i),p=jo(u,(v,g)=>{const b=ro(g);return{left:v.left+b.left,top:v.top+b.top}},{left:0,top:0});return On(p.left+f.left+c.left,p.top+f.top+c.top)})(n.element),a=Mi(window);s.top<a.y?Ws(n.element,!1!==r):s.top>a.bottom&&Ws(n.element,!0===r)},TN=(t,e,n)=>sv(t,cv,e,n),ON=(t,e,n)=>iv(t,e,cv,n),DN=(t,e,n)=>sv(t,dv,e,n),BN=(t,e,n)=>iv(t,e,dv,n),pl=(t,e,n)=>{(t.inline?TN:DN)(t,e,n)},uv=t=>t.dom.focus(),fv=t=>{const e=Te(t).dom;return t.dom===e.activeElement},_f=(t=nv())=>E.from(t.dom.activeElement).map(O),mv=(t,e)=>{const n=Yn(e)?dc(e).length:Me(e).length+1;return t>n?n:t<0?0:t},PN=t=>ei.range(t.start,mv(t.soffset,t.start),t.finish,mv(t.foffset,t.finish)),pv=(t,e)=>!ic(e.dom)&&(gn(t,e)||de(t,e)),gv=t=>e=>pv(t,e.start)&&pv(t,e.finish),LN=t=>ei.range(O(t.startContainer),t.startOffset,O(t.endContainer),t.endOffset),MN=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),E.some(e)}catch{return E.none()}},Af=t=>{const e=t.inline||fe.browser.isFirefox()?(n=O(t.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?E.from(o.getRangeAt(0)):E.none()).map(LN)})(ve(n).dom).filter(gv(n))):E.none();var n;t.bookmark=e.isSome()?e:t.bookmark},Rf=t=>(t.bookmark?t.bookmark:E.none()).bind(e=>{return n=O(t.getBody()),E.from(e).filter(gv(n)).map(PN);var n}).bind(MN),hv={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Tr={setEditorTimeout:(t,e,n)=>{return x(o=n)||(o=0),setTimeout(()=>{t.removed||e()},o);var o},setEditorInterval:(t,e,n)=>{const r=(x(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(r):e()},s));var s;return r}};let ni;const Tf=we.DOM,Of=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Xc=(t,e)=>{const n=dE(t);return null!==Tf.getParent(e,o=>{return xt(s=o)&&hv.isEditorUIElement(s)||!!n&&t.dom.is(o,n);var s})},Df=t=>{try{const e=Te(O(t.getElement()));return _f(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},IN=(t,e)=>{const n=e.editor;(o=>{const s=kc(()=>{Af(o)},0);o.on("init",()=>{var a,c;o.inline&&((a,i)=>{const l=()=>{i.throttle()};we.DOM.bind(document,"mouseup",l),a.on("remove",()=>{we.DOM.unbind(document,"mouseup",l)})})(o,s),c=s,(a=o).on("mouseup touchend",u=>{c.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Af(a)})}),o.on("remove",()=>{s.cancel()})})(n);const r=(o,s)=>{WE(o)&&!0!==o.inline&&s(O(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=t.focusedEditor;Of(Df(n))&&r(n,T),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Tr.setEditorTimeout(n,()=>{const o=t.focusedEditor;Of(Df(n))&&o===n||r(n,F),Xc(n,Df(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),ni||(ni=o=>{const s=t.activeEditor;s&&wr(o).each(a=>{a.ownerDocument===document&&(a===document.body||Xc(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Tf.bind(document,"focusin",ni))},FN=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&ni&&(Tf.unbind(document,"focusin",ni),ni=null)},vv=(t,e)=>{var n,r,o;(n=O(t.getBody()),r=e,(o=r,o.collapsed?E.from(xs(o.startContainer,o.startOffset)).map(O):E.none()).bind(o=>qS(o)?E.some(o):gn(n,o)?E.none():E.some(n))).bind(n=>qn(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Bf=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},ua=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(r=O(n),fv(r)||(o=r,_f(Te(o)).filter(s=>o.dom.contains(s.dom))).isSome());var r,o})(t):mt((e=t).iframeElement)&&fv(O(e.iframeElement));var e},Pf=t=>t.editorManager.setActive(t),bv=(t,e,n,r,o)=>{const a=n?e.startOffset:e.endOffset;return E.from(n?e.startContainer:e.endContainer).map(O).map(i=>r&&e.collapsed?i:xn(i,o(i,a)).getOr(i)).bind(i=>Cn(i)?E.some(i):xe(i).filter(Cn)).map(i=>i.dom).getOr(t)},yv=(t,e,n=!1)=>bv(t,e,!0,n,(r,o)=>Math.min(wn(r),o)),Cv=(t,e,n=!1)=>bv(t,e,!1,n,(r,o)=>o>0?o-1:o),xv=(t,e)=>{const n=t;for(;t&&lt(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Lf=(t,e)=>re(e,n=>{const r=t.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),jN=["img","br"],wv=t=>{return mg(t).filter(n=>0!==n.trim().length||n.indexOf(ln)>-1).isSome()||Tt(jN,Ee(t))||La(n=t)&&"false"===jn(n,"contenteditable");var n},Sv="[data-mce-autocompleter]",kv=t=>wo(t,Sv),HN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Gc=(t,e,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(t[r])return t[r];if(t!==e){let s=t[o];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[o],s)return s}},UN=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Gs(n))return!1;const r=t.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},Ev=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class rr{static create(e,n){const r=new rr(e,HN[e]||1);return n&&Se(n,(o,s)=>{r.attr(s,o)}),r}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const r=this;if(!Dt(e))return mt(e)&&Se(e,(s,a)=>{r.attr(a,s)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(e in o.map){delete o.map[e];let s=o.length;for(;s--;)if(o[s].name===e)return o.splice(s,1),r}return r}if(e in o.map){let s=o.length;for(;s--;)if(o[s].name===e){o[s].value=n;break}}else o.push({name:e,value:n});return o.map[e]=n,r}return o.map[e]}}clone(){const e=this,n=new rr(e.name,e.type),r=e.attributes;if(r){const o=[];o.map={};for(let s=0,a=r.length;s<a;s++){const i=r[s];"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const r=n.next;e.insert(n,e,!0),n=r}e.remove()}remove(){const e=this,n=e.parent,r=e.next,o=e.prev;return n&&(n.firstChild===e?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===e?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const r=n.lastChild;return r?(r.next=e,e.prev=r,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,r){e.parent&&e.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===o.lastChild?o.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=o,e}getAll(e){const n=this,r=[];for(let o=n.firstChild;o;o=Gc(o,n))o.name===e&&r.push(o);return r}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let o=e.firstChild;o;o=Gc(o,e))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},r){var o;const s=this;let a=s.firstChild;if(Ev(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||Ev(a))return!1}if(8===a.type||3===a.type&&!UN(a)||3===a.type&&a.parent&&n[a.parent.name]&&Gs(null!==(o=a.value)&&void 0!==o?o:"")||r&&r(a))return!1}while(a=Gc(a,s));return!0}walk(e){return Gc(this,null,e)}}const Nv=(t,e,n=0)=>{const r=t.toLowerCase();if(-1!==r.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(r.substr(n))){const o=r.indexOf("[endif]",n);return r.indexOf(">",o)}if(e){const o=r.indexOf(">",n);return-1!==o?o:r.length}{const o=/--!?>/g;o.lastIndex=n;const s=o.exec(t);return s?s.index+s[0].length:r.length}},qN=(t,e,n)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,s=t.getVoidElements();let a=1,i=n;for(;0!==a;)for(r.lastIndex=i;;){const l=r.exec(e);if(null===l)return i;if("!"===l[1]){i=Je(l[2],"--")?Nv(e,!1,l.index+3):Nv(e,!0,l.index+1);break}{o.lastIndex=r.lastIndex;const c=o.exec(e);if(Qt(c)||c.index!==r.lastIndex)continue;"/"===l[1]?a-=1:Zt(s,l[2])||(a+=1),i=r.lastIndex+c[0].length;break}}return i},_v=(t,e)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=t.schema;let o=((i,l)=>{const c=new RegExp(["\\s?("+i.join("|")+')="[^"]+"'].join("|"),"gi");return l.replace(c,"")})(t.getTempAttrs(),e);const s=r.getVoidElements();let a;for(;a=n.exec(o);){const i=n.lastIndex,l=a[0].length;let c;c=s[a[1]]?i:qN(r,o,i),o=o.substring(0,i-l)+o.substring(c),n.lastIndex=i-l}return Go(o)},$N=_v,Av=t=>{const e=Dn(t,"[data-mce-bogus]");rt(e,n=>{"all"===jn(n,"data-mce-bogus")?Mt(n):Xs(n)?(at(n,ut("\ufeff")),Mt(n)):me(n)})},Rv=t=>{const e=Dn(t,"input");rt(e,n=>{on(n,"name")})},Tv=dt.makeMap,Ov=t=>{const e=[],n=(t=t||{}).indent,r=Tv(t.indent_before||""),o=Tv(t.indent_after||""),s=bs.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,c)=>{if(n&&r[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}if(e.push("<",i),l)for(let u=0,f=l.length;u<f;u++){const p=l[u];e.push(" ",p.name,'="',s(p.value,!0),'"')}if(e[e.length]=!c||a?">":" />",c&&n&&o[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&o[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},Es=(t={},e=ys())=>{const n=Ov(t);return t.validate=!("validate"in t)||t.validate,{serialize:r=>{const o=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const u=i.name,f=u in e.getVoidElements();let p=i.attributes;if(o&&p&&p.length>1){const v=[];v.map={};const g=e.getElementRule(i.name);if(g){for(let b=0,h=g.attributesOrder.length;b<h;b++){const C=g.attributesOrder[b];if(C in p.map){const S=p.map[C];v.map[C]=S,v.push({name:C,value:S})}}for(let b=0,h=p.length;b<h;b++){const C=p[b].name;if(!(C in v.map)){const S=p.map[C];v.map[C]=S,v.push({name:C,value:S})}}p=v}}if(n.start(u,p,f),!f){let v=i.firstChild;if(v){"pre"!==u&&"textarea"!==u||3!==v.type||"\n"!==(null===(l=v.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(v)}while(v=v.next)}n.end(u)}}};return 1!==r.type||t.inner?3===r.type?s[3](r):s[11](r):a(r),n.getContent()}}},Dv=new Set;rt(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{Dv.add(t)});const Bv=["font","text-decoration","text-emphasis"],Mf=(t,e)=>Qe(t.parseStyle(t.getAttrib(e,"style"))),VN=(t,e,n)=>{const r=Mf(t,e),o=Mf(t,n),s=a=>{var i,l;const c=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",u=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return Xn(c)&&Xn(u)&&c!==u};return Ae(r,a=>{const i=l=>Ae(l,c=>c===a);if(!i(o)&&i(Bv)){const l=$t(o,c=>Ae(Bv,u=>Je(c,u)));return Ae(l,s)}return s(a)})},Pv=(t,e,n)=>E.from(n.container()).filter(lt).exists(r=>{const o=t?0:-1;return e(r.data.charAt(n.offset()+o))}),If=St(Pv,!0,Qa),Ff=St(Pv,!1,Qa),KN=t=>{const e=t.container();return lt(e)&&(0===e.data.length||pc(e.data)&&fl.isBookmarkNode(e.parentNode))},Ns=(t,e)=>n=>Qu(t?0:-1,n).filter(e).isSome(),Lv=t=>ug(t)&&"block"===kr(O(t),"display"),Mv=t=>{return Re(t)&&!(xt(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},XN=Ns(!0,Lv),GN=Ns(!1,Lv),gl=Ns(!0,ko),hl=Ns(!1,ko),Iv=Ns(!0,Xo),Fv=Ns(!1,Xo),_s=Ns(!0,Mv),As=Ns(!1,Mv),jv=(t,e)=>{return o=Ce,gn(r=e,n=t)?Ia(n,s=>o(s)||de(s,r)).slice(0,-1):[];var n,r,o},Jo=(t,e)=>[t].concat(jv(t,e)),jf=(t,e,n)=>d0(t,e,n,KN),zv=(t,e)=>qe(Jo(O(e.container()),t),Er),Hv=(t,e,n)=>jf(t,e.dom,n).forall(r=>zv(e,n).fold(()=>!No(r,n,e.dom),o=>!No(r,n,e.dom)&&gn(o,O(r.container())))),Uv=(t,e,n)=>zv(e,n).fold(()=>jf(t,e.dom,n).forall(r=>!No(r,n,e.dom)),r=>jf(t,r.dom,n).isNone()),zf=St(Uv,!1),qv=St(Uv,!0),YN=St(Hv,!1),QN=St(Hv,!0),JN=t=>Dc(t).exists(Xs),Yc=(t,e,n)=>{const r=$t(Jo(O(n.container()),e),Er),o=_n(r).getOr(e);return _r(t,o.dom,n).filter(JN)},Hf=(t,e)=>Dc(e).exists(Xs)||Yc(!0,t,e).isSome(),Uf=(t,e)=>{return(n=e,E.from(n.getNode(!0)).map(O)).exists(Xs)||Yc(!1,t,e).isSome();var n},ZN=St(Yc,!1),t_=St(Yc,!0),$v=t=>G.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),Wv=(t,e)=>{const n=$t(Jo(O(e.container()),t),Er);return _n(n).getOr(t)},Vv=(t,e)=>$v(e)?Ff(e):Ff(e)||nr(Wv(t,e).dom,e).exists(Ff),Kv=(t,e)=>$v(e)?If(e):If(e)||Un(Wv(t,e).dom,e).exists(If),qf=t=>Dc(t).bind(e=>Qn(e,Cn)).exists(e=>{return n=kr(e,"white-space"),Tt(["pre","pre-wrap"],n);var n}),Xv=(t,e)=>n=>{return r=new en(n,t)[e](),mt(r)&&Re(r)&&Qh(r);var r},vl=(t,e)=>!qf(e)&&(zf(t,e)||YN(t,e)||Uf(t,e)||Vv(t,e)||((n,r)=>{const o=nr(n.dom,r).getOr(r),s=Xv(n.dom,"prev");return r.isAtStart()&&(s(r.container())||s(o.container()))})(t,e)),bl=(t,e)=>!qf(e)&&(qv(t,e)||QN(t,e)||Hf(t,e)||Kv(t,e)||((n,r)=>{const o=Un(n.dom,r).getOr(r),s=Xv(n.dom,"next");return r.isAtEnd()&&(s(r.container())||s(o.container()))})(t,e)),$f=(t,e)=>vl(t,e)||bl(t,(n=>{const r=n.container(),o=n.offset();return lt(r)&&o<r.data.length?G(r,o+1):n})(e)),Gv=(t,e)=>Mc(t.charAt(e)),Yv=(t,e)=>Qa(t.charAt(e)),Qv=(t,e,n)=>{const r=e.data,o=G(e,0);return n||!Gv(r,0)||$f(t,o)?!!(n&&Yv(r,0)&&vl(t,o))&&(e.data=ln+r.slice(1),!0):(e.data=" "+r.slice(1),!0)},Jv=(t,e,n)=>{const r=e.data,o=G(e,r.length-1);return n||!Gv(r,r.length-1)||$f(t,o)?!!(n&&Yv(r,r.length-1)&&bl(t,o))&&(e.data=r.slice(0,-1)+ln,!0):(e.data=r.slice(0,-1)+" ",!0)},Zv=(t,e,n)=>{if(0===n)return;const r=O(t),o=Sr(r,Er).getOr(r),s=t.data.slice(e,e+n),a=e+n>=t.data.length&&bl(o,G(t,t.data.length)),i=0===e&&vl(o,G(t,0));t.replaceData(e,n,xg(s,4,i,a))},Qc=(t,e)=>{const n=t.data.slice(e),r=n.length-Yl(n).length;Zv(t,e,r)},Wf=(t,e)=>{const n=t.data.slice(0,e),r=n.length-Ql(n).length;Zv(t,e-r,r)},Vf=(t,e,n,r=!0)=>{const o=Ql(t.data).length,s=r?t:e,a=r?e:t;return r?s.appendData(a.data):s.insertData(0,a.data),Mt(O(a)),n&&Qc(s,o),s},n_=(t,e)=>((n,r)=>{const o=n.container(),s=n.offset();return!G.isTextPosition(n)&&o===r.parentNode&&s>G.before(r).offset()})(e,t)?G(e.container(),e.offset()-1):e,tb=t=>{return qr(t.previousSibling)?E.some(lt(e=t.previousSibling)?G(e,e.data.length):G.after(e)):t.previousSibling?$r(t.previousSibling):E.none();var e},eb=t=>{return qr(t.nextSibling)?E.some(lt(e=t.nextSibling)?G(e,0):G.before(e)):t.nextSibling?qn(t.nextSibling):E.none();var e},nb=(t,e,n)=>{n.fold(()=>{t.focus()},r=>{t.selection.setRng(r.toRange(),e)})},o_=(t,e)=>e&&Zt(t.schema.getBlockElements(),Ee(e)),s_=t=>{if(We(t)){const e=st('<br data-mce-bogus="1">');return se(t),_t(t,e),E.some(G.before(e.dom))}return E.none()},fa=(t,e,n,r=!0)=>{const o=((t,e,n)=>{return(r=t,o=e,s=n,r?(a=o,eb(i=s).orThunk(()=>tb(i)).orThunk(()=>{return Un(l=a,G.after(c=i)).orThunk(()=>nr(l,G.before(c)));var l,c})):((a,i)=>tb(i).orThunk(()=>eb(i)).orThunk(()=>{return l=a,E.from((c=i).previousSibling?c.previousSibling:c.parentNode).bind(u=>nr(l,G.before(u))).orThunk(()=>Un(l,G.after(c)));var l,c}))(o,s)).map(St(n_,n));var r,o,s,a,i})(e,t.getBody(),n.dom),s=Sr(n,St(o_,t),(a=t.getBody(),l=>l.dom===a));var a;const i=((l,c,u)=>{const f=Rn(l).filter(Yn),p=Zr(l).filter(Yn);return Mt(l),(v=f,g=p,b=c,h=(C,S,k)=>{const A=C.dom,R=S.dom,D=A.data.length;return Vf(A,R,u),k.container()===R?G(A,D):k},v.isSome()&&g.isSome()&&b.isSome()?E.some(h(v.getOrDie(),g.getOrDie(),b.getOrDie())):E.none()).orThunk(()=>(u&&(f.each(C=>Wf(C.dom,C.dom.length)),p.each(C=>Qc(C.dom,0))),c));var v,g,b,h})(n,o,(c=n,Zt(t.schema.getTextInlineElements(),Ee(c))));var c;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(s_).fold(()=>{r&&nb(t,e,i)},l=>{r&&nb(t,e,E.some(l))})},a_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ma=(t,e)=>Ne(O(e),tE(t))&&!Ys(t.schema,e)&&t.dom.isEditable(e),rb=t=>{var e,n;return"rtl"===we.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",a_.test(n))},Rs=(t,e,n)=>{const r=(o=t,s=e,$t(we.DOM.getParents(n.container(),"*",s),o));var o,s;return E.from(r[r.length-1])},Or=(t,e)=>{const n=e.container(),r=e.offset();return t?vs(n)?lt(n.nextSibling)?G(n.nextSibling,0):G.after(n):hu(e)?G(n,r+1):e:vs(n)?lt(n.previousSibling)?G(n.previousSibling,n.previousSibling.data.length):G.before(n):vu(e)?G(n,r-1):e},ob=St(Or,!0),sb=St(Or,!1),ab=(t,e)=>{const n=r=>r.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},Kf=t=>ab(t,"Delete"),i_=t=>pg(t)||ji(t),Jc=(t,e)=>{return gn(t,e)?Qn(e,i_,(n=t,r=>ls(xe(r),n,de))):E.none();var n},Xf=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},ib=(t,e,n)=>pn(qn(n),$r(n),(r,o)=>{const s=Or(!0,r),a=Or(!1,o),i=Or(!1,e);return t?Un(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s)):nr(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a))}).getOr(!0),lb=t=>{var e;return(8===Oi(e=t)||"#comment"===Ee(e)?Rn(t):$e(t)).bind(lb).orThunk(()=>E.some(t))},cb=(t,e,n,r=!0)=>{var o;e.deleteContents();const s=lb(n).getOr(n),a=O(null!==(o=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==o?o:n.dom);if(a.dom===t.getBody()?Xf(t,r):We(a)&&(hs(a),r&&t.selection.setCursorLocation(a.dom,0)),!de(n,a)){const l=ls(xe(a),n)?[]:xe(i=a).map(Me).map(c=>$t(c,u=>!de(i,u))).getOr([]);rt(l.concat(Me(n)),c=>{de(c,a)||gn(c,a)||!We(c)||Mt(c)})}var i},Gf=t=>Dn(t,"td,th"),Yf=(t,e)=>({start:t,end:e}),yl=Eo([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Zc=(t,e)=>Ur(O(t),"td,th",e),db=t=>!de(t.start,t.end),ub=(t,e)=>cl(t.start,e).bind(n=>cl(t.end,e).bind(r=>$s(de(n,r),n))),Qf=t=>e=>ub(e,t).map(n=>({rng:e,table:n,cells:Gf(n)})),fb=(t,e,n,r)=>{if(n.collapsed||!t.forall(db))return E.none();if(e.isSameTable){const o=t.bind(Qf(r));return E.some({start:o,end:o})}{const o=Zc(n.startContainer,r),s=Zc(n.endContainer,r),a=o.bind((l=r,c=>cl(c,l).bind(u=>yo(Gf(u)).map(f=>Yf(c,f))))).bind(Qf(r)),i=s.bind((l=>c=>cl(c,l).bind(u=>_n(Gf(u)).map(f=>Yf(f,c))))(r)).bind(Qf(r));return E.some({start:a,end:i})}var l},mb=(t,e)=>Ms(t,n=>de(n,e)),Jf=t=>pn(mb(t.cells,t.rng.start),mb(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),pb=(t,e)=>{const{startTable:n,endTable:r}=e,o=t.cloneRange();return n.each(s=>o.setStartAfter(s.dom)),r.each(s=>o.setEndBefore(s.dom)),o},gb=t=>rt(t,e=>{on(e,"contenteditable"),hs(e)}),Zf=(t,e,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(e.dom.lastChild)):(o.setStartBefore(e.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),tm(t,o,e,!1).each(s=>s())},hb=t=>{const e=Ja(t),n=O(t.selection.getNode());cc(n.dom)&&We(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&Ae(e,r=>de(r,n))&&Xe(n,"data-mce-selected","1")},vb=(t,e,n)=>E.some(()=>{const r=t.selection.getRng(),o=n.bind(({rng:s,isStartInTable:a})=>{const i=E.from((c=t).dom.getParent(a?s.endContainer:s.startContainer,c.dom.isBlock)).map(O);var c;s.deleteContents(),((c,u,f)=>{f.each(p=>{u?Mt(p):(hs(p),c.selection.setCursorLocation(p.dom,0))})})(t,a,i.filter(We));const l=a?e[0]:e[e.length-1];return Zf(t,l,r,a),We(l)?E.none():E.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);gb(o),hb(t)}),c_=(t,e,n,r)=>E.some(()=>{const o=t.selection.getRng(),s=e[0],a=n[n.length-1];Zf(t,s,o,!0),Zf(t,a,o,!1);const i=We(s)?e:e.slice(1),l=We(a)?n:n.slice(0,-1);gb(i.concat(l)),r.deleteContents(),hb(t)}),tm=(t,e,n,r=!0)=>E.some(()=>{cb(t,e,n,r)}),d_=(t,e)=>E.some(()=>fa(t,!1,e)),bb=(t,e)=>qe(Jo(e,t),zi),em=(t,e)=>qe(Jo(e,t),Bi("caption")),td=(t,e)=>E.some(()=>{hs(e),t.selection.setCursorLocation(e.dom,0)}),yb=(t,e)=>t?Iv(e):Fv(e),nm=(t,e)=>{const n=O(t.selection.getStart(!0)),r=Ja(t);return t.selection.isCollapsed()&&0===r.length?((t,e,n)=>{const r=O(t.getBody());return em(r,n).fold(()=>((o,s,a,i)=>{const l=G.fromRangeStart(o.selection.getRng());return bb(a,i).bind(c=>{return We(c)?td(o,c):(f=a,v=c,g=l,ll(s,o.getBody(),g).bind(b=>bb(f,O(b.getNode())).bind(h=>de(h,v)?E.none():E.some(Nt))));var f,v,g})})(t,e,r,n).orThunk(()=>$s(((o,s)=>{const a=G.fromRangeStart(o.selection.getRng());return yb(s,a)||_r(s,o.getBody(),a).exists(i=>yb(s,i))})(t,e),Nt)),o=>((s,a,i,l)=>{const c=G.fromRangeStart(s.selection.getRng());return We(l)?td(s,l):(f=i,v=l,g=c,ll(p=a,(u=s).getBody(),g).fold(()=>E.some(Nt),b=>{return C=p,S=g,k=b,qn((h=v).dom).bind(A=>$r(h.dom).map(R=>C?S.isEqual(A)&&k.isEqual(R):S.isEqual(R)&&k.isEqual(A))).getOr(!0)?((h,C)=>td(h,C))(u,v):((h,C,S)=>em(h,O(S.getNode())).fold(()=>E.some(Nt),k=>$s(!de(k,C),Nt)))(f,v,b);var h,C,S,k}));var u,f,p,v,g})(t,e,r,o))})(t,e,n):((o,s,a)=>{const i=O(o.getBody()),l=o.selection.getRng();return 0!==a.length?vb(o,a,E.none()):(c=o,f=l,em(u=i,s).fold(()=>{return v=c,((t,e)=>{const n=(s=t,a=>de(s,a)),r=((s,a)=>{const i=Zc(s.startContainer,a),l=Zc(s.endContainer,a);return pn(i,l,Yf)})(e,n),o=((s,a)=>{const i=v=>cl(O(v),a),l=i(s.startContainer),c=i(s.endContainer),u=l.isSome(),f=c.isSome(),p=pn(l,c,de).getOr(!1);return{startTable:l,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:p,isMultiTable:!p&&u&&f}})(e,n);var s;return((s,a,i)=>s.exists(l=>{return u=i,!db(c=l)&&ub(c,u).exists(f=>{const p=f.dom.rows;return 1===p.length&&1===p[0].cells.length})&&cf(l.start,a);var c,u}))(r,e,n)?r.map(s=>yl.singleCellTable(e,s.start)):o.isMultiTable?((s,a,i,l)=>fb(s,a,i,l).bind(({start:c,end:u})=>{const f=c.bind(Jf).getOr([]),p=u.bind(Jf).getOr([]);if(f.length>0&&p.length>0){const v=pb(i,a);return E.some(yl.multiTable(f,p,v))}return E.none()}))(r,o,e,n):((s,a,i,l)=>fb(s,a,i,l).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=a,f=Jf(c).getOr([]);if(u&&c.cells.length===f.length)return E.some(yl.fullTable(c.table));if(f.length>0){if(u)return E.some(yl.partialTable(f,E.none()));{const p=pb(i,a);return E.some(yl.partialTable(f,E.some({...a,rng:p})))}}return E.none()}))(r,o,e,n)})(u,f).bind(h=>h.fold(St(tm,v),St(d_,v),St(vb,v),St(c_,v)));var v},v=>td(c,v)));var c,u,f})(t,n,r)},pa=(t,e)=>{let n=e;for(;n&&n!==t;){if(so(n)||Re(n))return n;n=n.parentNode}return null},f_=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],m_=dt.each,rm=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),r=o=>Ae(f_,s=>Je(o,s))||n.has(o);return{compare:(o,s)=>{if(o.nodeName!==s.nodeName||o.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return m_(e.getAttribs(l),u=>{const f=u.nodeName.toLowerCase();"style"===f||r(f)||(c[f]=e.getAttrib(l,f))}),c},i=(l,c)=>{for(const u in l)if(Zt(l,u)){const f=c[u];if(De(f)||l[u]!==f)return!1;delete c[u]}for(const u in c)if(Zt(c,u))return!1;return!0};return!(xt(o)&&xt(s)&&(!i(a(o),a(s))||!i(e.parseStyle(e.getAttrib(o,"style")),e.parseStyle(e.getAttrib(s,"style"))))||Ar(o)||Ar(s))},isAttributeInternal:r}},Cb=(t,e,n,r)=>{const o=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const c=r.attributes[l];c?c.nodes.push(n):r.attributes[l]={filter:i,nodes:[n]}}}},xb=(t,e)=>{const n=(r,o)=>{Se(r,s=>{const a=Ye(s.nodes);rt(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(o?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!ye(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},wb=(t,e,n,r={})=>{const o=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((c,u)=>{let f=c;for(;f=f.walk();)Cb(s,a,f,l)})(i),l})(t,e,n);xb(o,r)},om=(t,e,n)=>{if(t.insert&&e(n)){const r=new rr("br",1);r.attr("data-mce-bogus","1"),n.empty().append(r)}else n.empty().append(new rr("#text",3)).value=ln},Sb=(t,e)=>{const n=t?.firstChild;return mt(n)&&n===t.lastChild&&n.name===e},Cl=(t,e,n,r)=>r.isEmpty(e,n,o=>((s,a)=>{const i=s.getElementRule(a.name);return!0===i?.paddEmpty})(t,o)),p_=t=>{let e;for(let n=t;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(e=n)}return E.from(e)},sm=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const r=t.children();for(const o of r)n&&!e.isValidChild(n.name,o.name)&&sm(o,e,n);t.unwrap()}},am=(t,e,n,r=Nt)=>{const o=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=dt.makeMap("tr,td,th,tbody,thead,tfoot,table"),l=new Set,c=u=>u!==n&&!i[u.name];for(let u=0;u<t.length;u++){const f=t[u];let p,v,g;if(!f.parent||l.has(f))continue;if(o[f.name]&&"li"===f.parent.name){let h=f.next;for(;h&&o[h.name];)h.name="li",l.add(h),f.parent.insert(h,f.parent),h=h.next;f.unwrap();continue}const b=[f];for(p=f.parent;p&&!e.isValidChild(p.name,f.name)&&c(p);p=p.parent)b.push(p);if(p&&b.length>1)if(e.isValidChild(p.name,f.name)){b.reverse(),v=b[0].clone(),r(v);let h=v;for(let C=0;C<b.length-1;C++){e.isValidChild(h.name,b[C].name)&&C>0?(g=b[C].clone(),r(g),h.append(g)):g=h;for(let S=b[C].firstChild;S&&S!==b[C+1];){const k=S.next;g.append(S),S=k}h=g}Cl(e,s,a,v)?p.insert(f,b[0],!0):(p.insert(v,b[0],!0),p.insert(f,v)),p=b[0],(Cl(e,s,a,p)||Sb(p,"br"))&&p.empty().remove()}else sm(f,e);else if(f.parent){if("li"===f.name){let h=f.prev;if(h&&("ul"===h.name||"ol"===h.name)){h.append(f);continue}if(h=f.next,h&&("ul"===h.name||"ol"===h.name)&&h.firstChild){h.insert(f,h.firstChild,!0);continue}const C=new rr("ul",1);r(C),f.wrap(C);continue}if(e.isValidChild(f.parent.name,"div")&&e.isValidChild("div",f.name)){const h=new rr("div",1);r(h),f.wrap(h)}else sm(f,e)}}},kb=(t,e,n=e.parent)=>!(!n||!t.children[e.name]||t.isValidChild(n.name,e.name))||!(!n||"a"!==e.name||!((r,o)=>{let s=r;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n)),im=t=>t.collapsed?t:(e=>{const n=G.fromRangeStart(e),r=G.fromRangeEnd(e),o=e.commonAncestorContainer;return _r(!1,o,r).map(s=>!No(n,r,o)&&No(n,s,o)?((a,i,l,c)=>{const u=document.createRange();return u.setStart(a,i),u.setEnd(l,c),u})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),lm=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},Eb=(t,e)=>{const n=G.after(t),r=Ao(e).prev(n);return r?r.toRange():null},b_=["pre"],cm=cc,y_=(t,e,n)=>{var r,o;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,c=Es({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u);let f=s.getRng();const p=f.startContainer,v=t.getBody();var k,A;p===v&&s.isCollapsed()&&a.isBlock(v.firstChild)&&(k=t,mt(A=v.firstChild)&&!k.schema.getVoidElements()[A.nodeName])&&a.isEmpty(v.firstChild)&&(f=a.createRng(),f.setStart(v.firstChild,0),f.setEnd(v.firstChild,0),s.setRng(f)),s.isCollapsed()||(k=>{const A=k.dom,R=im(k.selection.getRng());k.selection.setRng(R);const D=A.getParent(R.startContainer,cm);var P,U,Y;P=A,U=R,mt(Y=D)&&Y===P.getParent(U.endContainer,cm)&&cf(O(Y),U)?tm(k,R,O(D)):R.startContainer===R.endContainer&&R.endOffset-R.startOffset==1&&lt(R.startContainer.childNodes[R.startOffset])?R.deleteContents():k.getDoc().execCommand("Delete",!1)})(t);const g=s.getNode(),b={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},h=i.parse(e,b);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,r=e.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,s)=>{const a=o.getNonEmptyElements();return mt(s)&&(s.isEmpty(a)||(l=s,o.getBlockElements()[l.name]&&mt((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===ln)(l.firstChild)));var l,c})(t,r)&&(r=r?.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(t.schema,h)&&((k,A)=>!!lm(k,A))(a,g))return f=((t,e,n,r)=>{const o=((f,p,v)=>{const g=p.serialize(v);return(b=>{var h,C;const S=b.firstChild,k=b.lastChild;return S&&"META"===S.nodeName&&(null===(h=S.parentNode)||void 0===h||h.removeChild(S)),k&&"mce_marker"===k.id&&(null===(C=k.parentNode)||void 0===C||C.removeChild(k)),b})(f.createFragment(g))})(e,t,r),s=lm(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||mt(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((r=e.firstChild).data===ln||Ie(r)))?t.slice(0,-1):t;var r,e,n})((i=o.firstChild,$t(null!==(l=i?.childNodes)&&void 0!==l?l:[],f=>"LI"===f.nodeName)));var i,l;const c=e.getRoot(),u=f=>{const p=G.fromRangeStart(n),v=Ao(e.getRoot()),g=1===f?v.prev(p):v.next(p),b=g?.getNode();return!b||lm(e,b)!==s};return s?u(1)?((f,p,v)=>{const g=f.parentNode;return g&&dt.each(p,b=>{g.insertBefore(b,f)}),((b,h)=>{const C=G.before(b),S=Ao(h).next(C);return S?S.toRange():null})(f,v)})(s,a,c):u(2)?(f=s,v=c,e.insertAfter((p=a).reverse(),f),Eb(p[0],v)):((f,p,v,g)=>{const b=((C,S)=>{const k=S.cloneRange(),A=S.cloneRange();return k.setStartBefore(C),A.setEndAfter(C),[k.cloneContents(),A.cloneContents()]})(f,g),h=f.parentNode;return h&&(h.insertBefore(b[0],f),dt.each(p,C=>{h.insertBefore(C,f)}),h.insertBefore(b[1],f),h.removeChild(f)),Eb(p[p.length-1],v)})(s,a,c,n):null;var f,p,v})(c,a,s.getRng(),h),f&&s.setRng(f),e;!0===n.paste&&((k,A,R,D)=>{var P;const U=A.firstChild,Y=A.lastChild,V=U===("bookmark"===Y.attr("data-mce-type")?Y.prev:Y),L=Tt(b_,U.name);if(V&&L){const z="false"!==U.attr("contenteditable"),I=(null===(P=k.getParent(R,k.isBlock))||void 0===P?void 0:P.nodeName.toLowerCase())===U.name,$=E.from(pa(D,R)).forall(so);return z&&I&&$}return!1})(a,h,g,t.getBody())&&(null===(r=h.firstChild)||void 0===r||r.unwrap()),(k=>{let A=k;for(;A=A.walk();)1===A.type&&A.attr("data-mce-fragment","1")})(h);let C=h.lastChild;if(C&&"mce_marker"===C.attr("id")){const k=C;for(C=C.prev;C;C=C.walk(!0))if(3===C.type||!a.isBlock(C.name)){C.parent&&t.schema.isValidChild(C.parent.name,"span")&&C.parent.insert(k,C,"br"===C.name);break}}if(t._selectionOverrides.showBlockCaretContainer(g),b.invalid){t.selection.setContent(u);let k,A=s.getNode();const R=t.getBody();for(Fi(A)?A=k=R:k=A;k&&k!==R;)A=k,k=k.parentNode;e=A===R?R.innerHTML:a.getOuterHTML(A);const D=i.parse(e),P=(z=>{for(let I=z;I;I=I.walk())if("mce_marker"===I.attr("id"))return E.some(I);return E.none()})(D),U=P.bind(p_).getOr(D);P.each(z=>z.replace(h));const Y=h.children(),V=null!==(o=h.parent)&&void 0!==o?o:D;h.unwrap();const L=$t(Y,z=>kb(t.schema,z,V));am(L,t.schema,U),wb(i.getNodeFilters(),i.getAttributeFilters(),D),e=c.serialize(D),A===R?a.setHTML(R,e):a.setOuterHTML(A,e)}else e=c.serialize(h),((k,A,R)=>{var D;if("all"===R.getAttribute("data-mce-bogus"))null===(D=R.parentNode)||void 0===D||D.insertBefore(k.dom.createFragment(A),R);else{const P=R.firstChild;!P||P===R.lastChild&&"BR"===P.nodeName?k.dom.setHTML(R,A):k.selection.setContent(A,{no_events:!0})}})(t,e,g);var S;return((k,A)=>{const R=k.schema.getTextInlineElements(),D=k.dom;if(A){const P=k.getBody(),U=rm(k);dt.each(D.select("*[data-mce-fragment]"),Y=>{if(mt(R[Y.nodeName.toLowerCase()])&&mr(Mf(D,Y),z=>!Dv.has(z)))for(let V=Y.parentElement;mt(V)&&V!==P&&!VN(D,Y,V);V=V.parentElement)if(U.compare(V,Y)){D.remove(Y,!0);break}})}})(t,l),((k,A)=>{var R,D,P;let U;const Y=k.dom,V=k.selection;if(!A)return;V.scrollIntoView(A);const L=pa(k.getBody(),A);if(L&&"false"===Y.getContentEditable(L))return Y.remove(A),void V.select(L);let z=Y.createRng();const I=A.previousSibling;if(lt(I)){z.setStart(I,null!==(D=null===(R=I.nodeValue)||void 0===R?void 0:R.length)&&void 0!==D?D:0);const gt=A.nextSibling;lt(gt)&&(I.appendData(gt.data),null===(P=gt.parentNode)||void 0===P||P.removeChild(gt))}else z.setStartBefore(A),z.setEndBefore(A);const $=Y.getParent(A,Y.isBlock);Y.remove(A),$&&Y.isEmpty($)&&(se(O($)),z.setStart($,0),z.setEnd($,0),cm($)||$.getAttribute("data-mce-fragment")||!(U=(gt=>{let it=G.fromRangeStart(gt);return it=Ao(k.getBody()).next(it),it?.toRange()})(z))?Y.add($,Y.create("br",{"data-mce-bogus":"1"})):(z=U,Y.remove($))),V.setRng(z)})(t,a.get("mce_marker")),S=t.getBody(),dt.each(S.getElementsByTagName("*"),k=>{k.removeAttribute("data-mce-fragment")}),((k,A)=>{E.from(k.getParent(A,"td,th")).map(O).each(VS)})(a,s.getStart()),(k=>{rt(Ye(k.getBody().querySelectorAll("details")),A=>{const R=$t(Ye(A.children),D=>"SUMMARY"===D.nodeName);R.length>1&&rt(R.slice(1),D=>{const P=O(D);F(P,"mce-accordion-summary"),Qg(P,"p")})})})(t),((k,A,R)=>{const D=Ia(O(R),P=>de(P,O(A)));Na(D,D.length-2).filter(Cn).fold(()=>xu(k,A),P=>xu(k,P.dom))})(t.schema,t.getBody(),s.getStart()),e},ed=t=>t instanceof rr,dm=(t,e,n)=>{var r;t.dom.setHTML(t.getBody(),e),!0!==n&&ua(r=t)&&qn(r.getBody()).each(o=>{const s=o.getNode(),a=Xo(s)?qn(s).getOr(o):o;r.selection.setRng(a.toRange())})},Nb=t=>pe(t)?t:Ce,um=(t,e,n)=>{const r=e(t),o=Nb(n);return r.orThunk(()=>o(t)?E.none():((s,a,i)=>{let l=s.dom;const c=Nb(i);for(;l.parentNode;){l=l.parentNode;const u=O(l),f=a(u);if(f.isSome())return f;if(c(u))break}return E.none()})(t,e,o))},fm=gf,_b=(t,e,n)=>{const r=t.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const s=r[o];if(Rr(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},mm=(t,e,n,r,o)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!_b(t,i,n)||i.parentNode===s||!!To(t,i,n,r,!0));return!!To(t,a,n,r,o)},nd=(t,e,n)=>!(!nn(n)||!fm(e,n.inline))||!(!Ro(n)||!fm(e,n.block))||!!Rr(n)&&xt(e)&&t.is(e,n.selector),Ab=(t,e,n,r,o,s)=>{const a=n[r],i="attributes"===r;if(pe(n.onmatch))return n.onmatch(e,n,r);if(a)if(Aa(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):jc(t,e,a[l]))return!0}else for(const l in a)if(Zt(a,l)){const c=i?t.getAttrib(e,l):jc(t,e,l),u=ks(a[l],s),f=ye(c)||as(c);if(f&&ye(u))continue;if(o&&f&&!n.exact||(!o||n.exact)&&!fm(c,hf(u,l)))return!1}return!0},To=(t,e,n,r,o)=>{const s=t.formatter.get(n),a=t.dom;if(s&&xt(e))for(let i=0;i<s.length;i++){const l=s[i];if(nd(t.dom,e,l)&&Ab(a,e,l,"attributes",o,r)&&Ab(a,e,l,"styles",o,r)){const c=l.classes;if(c)for(let u=0;u<c.length;u++)if(!t.dom.hasClass(e,ks(c[u],r)))return;return l}}},pm=(t,e,n,r,o)=>{if(r)return mm(t,r,e,n,o);if(r=t.selection.getNode(),mm(t,r,e,n,o))return!0;const s=t.selection.getStart();return!(s===r||!mm(t,s,e,n,o))},ri=Bn,Rb=t=>(e=>{const n=[];let r=e;for(;r;){if(lt(r)&&r.data!==ri||r.childNodes.length>1)return[];xt(r)&&n.push(r),r=r.firstChild}return n})(t).length>0,Tb=t=>{if(t){const e=new en(t,t);for(let n=e.current();n;n=e.next())if(lt(n))return n}return null},gm=t=>{const e=X("span");return Qr(e,{id:nf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&_t(e,ut(ri)),e},hm=(t,e,n=!0)=>{const r=t.dom,o=t.selection;if(Rb(e))fa(t,!1,O(e),n);else{const s=o.getRng(),a=r.getParent(e,r.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,u=s.endOffset,f=(p=>{const v=Tb(p);return v&&v.data.charAt(0)===ri&&v.deleteData(0,1),v})(e);r.remove(e,!0),i===f&&l>0&&s.setStart(f,l-1),c===f&&u>0&&s.setEnd(f,u-1),a&&r.isEmpty(a)&&hs(O(a)),o.setRng(s)}},vm=(t,e,n=!0)=>{const r=t.dom,o=t.selection;if(e)hm(t,e,n);else if(!(e=aa(t.getBody(),o.getStart())))for(;e=r.get(nf);)hm(t,e,n)},Ob=(t,e)=>(t.appendChild(e),e),Db=(t,e)=>{var n;const r=jo(t,(s,a)=>Ob(s,a.cloneNode(!1)),e),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return Ob(r,o.createTextNode(ri))},Bb=t=>{const e=gm(!1),n=Db(t,e.dom);return{caretContainer:e,caretPosition:G(n,0)}},Pb=(t,e)=>{const{caretContainer:n,caretPosition:r}=Bb(e);return at(O(t),n),Mt(O(t)),r},Lb=(t,e)=>{const n=t.schema.getTextInlineElements();return Zt(n,Ee(e))&&!Wr(e.dom)&&!Ks(e.dom)},Mb=t=>Wr(t.dom)&&Rb(t.dom),xl={},Ib=oo(["pre"]);((t,e)=>{xl[t]||(xl[t]=[]),xl[t].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=$t($t(r,Ib),(s=r,a=>{const i=a.previousSibling;return Ib(i)&&Tt(s,i)}));rt(o,s=>{((a,i)=>{const l=O(i),c=zn(l).dom;Mt(l),ge(O(a),[X("br",c),X("br",c),...Me(l)])})(s.previousSibling,s)})}var s})})("pre");const Fb=["fontWeight","fontStyle","color","fontSize","fontFamily"],jb=(t,e)=>{const n=t.get(e);return ct(n)?qe(n,r=>{return nn(r)&&"span"===r.inline&&Vt((o=r).styles)&&Ae(Qe(o.styles),s=>Tt(Fb,s));var o}):E.none()},zb=(t,e)=>nr(e,G.fromRangeStart(t)).isNone(),Hb=(t,e)=>!1===Un(e,G.fromRangeEnd(t)).exists(n=>!Ie(n.getNode())||Un(e,n).isSome()),Ub=t=>e=>zS(e)&&t.isEditable(e),qb=t=>$t(t.getSelectedBlocks(),Ub(t.dom)),bm=dt.each,ym=t=>xt(t)&&!Ar(t)&&!Wr(t)&&!Ks(t),$b=(t,e)=>{for(let n=t;n;n=n[e]){if(lt(n)&&Xn(n.data))return t;if(xt(n)&&!Ar(n))return n}return t},Wb=(t,e,n)=>{const r=rm(t),o=xt(e)&&ia(e),s=xt(n)&&ia(n);if(o&&s){const a=$b(e,"previousSibling"),i=$b(n,"nextSibling");if(r.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return t.dom.remove(i),dt.each(dt.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},Vb=(t,e,n,r)=>{var o;if(r&&!1!==e.merge_siblings){const s=null!==(o=Wb(t,k0(r),r))&&void 0!==o?o:r;Wb(t,s,k0(s,!0))}},Cm=(t,e,n)=>{bm(t.childNodes,r=>{ym(r)&&(e(r)&&n(r),r.hasChildNodes()&&Cm(r,e,n))})},Kb=(t,e)=>n=>!(!n||!jc(t,n,e)),Xb=(t,e,n)=>r=>{var o,s;t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=t,"SPAN"===(s=r).nodeName&&0===o.getAttribs(s).length&&o.remove(s,!0)},ga=Eo([{keep:[]},{rename:["name"]},{removed:[]}]),w_=/^(src|href|style)$/,xm=dt.each,rd=gf,Gb=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),Yb=(t,e,n)=>{let r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(xt(r)){const s=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>s?s:o]}return lt(r)&&n&&o>=r.data.length&&(r=new en(r,t.getBody()).next()||r),lt(r)&&!n&&0===o&&(r=new en(r,t.getBody()).prev()||r),r},Qb=(t,e)=>{const n=e?"firstChild":"lastChild",r=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&r?"TR"===t.nodeName&&r[n]||r:t},wm=(t,e,n,r)=>{var o;const s=t.create(n,r);return null===(o=e.parentNode)||void 0===o||o.insertBefore(s,e),s.appendChild(e),s},Jb=(t,e,n,r,o)=>{const s=O(e),a=O(t.create(r,o)),i=n?to(s):zr(s);return ge(a,i),n?(at(s,a),Ft(a,s)):(Bt(s,a),_t(a,s)),a.dom},Zb=(t,e,n)=>{const r=e.parentNode;let o;const s=t.dom,a=er(t);var i;Ro(n)&&r===s.getRoot()&&(n.list_block&&rd(e,n.list_block)||rt(Ye(e.childNodes),i=>{Za(t,a,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=wm(s,i,a),s.setAttribs(o,tl(t))):o=null})),Rr(i=n)&&nn(i)&&ls(ke(i,"mixed"),!0)&&!rd(n.inline,e)||s.remove(e,!0)},ty=(t,e,n)=>x(t)?{name:e,value:null}:{name:t,value:ks(e,n)},ey=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},ny=(t,e,n,r,o)=>{let s=!1;xm(n.styles,(a,i)=>{const{name:l,value:c}=ty(i,a,r),u=hf(c,l);(n.remove_similar||Qt(c)||!xt(o)||rd(jc(t,o,l),u))&&t.setStyle(e,l,""),s=!0}),s&&ey(t,e)},ry=(t,e,n,r,o)=>{const s=t.dom,a=rm(t),i=t.schema;if(nn(e)&&bc(i,e.inline)&&Ys(i,r)&&r.parentElement===t.getBody())return Zb(t,r,e),ga.removed();if(!e.ceFalseOverride&&r&&"false"===s.getContentEditableParent(r)||r&&!nd(s,r,e)&&(!e.links||"A"!==r.nodeName))return ga.keep();const l=r,c=e.preserve_attributes;if(nn(e)&&"all"===e.remove&&ct(c)){const u=$t(s.getAttribs(l),f=>Tt(c,f.name.toLowerCase()));if(s.removeAllAttribs(l),rt(u,f=>s.setAttrib(l,f.name,f.value)),u.length>0)return ga.rename("span")}if("all"!==e.remove){ny(s,l,e,n,o),xm(e.attributes,(f,p)=>{const{name:v,value:g}=ty(p,f,n);if(e.remove_similar||Qt(g)||!xt(o)||rd(s.getAttrib(o,v),g)){if("class"===v){const b=s.getAttrib(l,v);if(b){let h="";if(rt(b.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(h+=(h?" ":"")+C)}),h)return void s.setAttrib(l,v,h)}}if(w_.test(v)&&l.removeAttribute("data-mce-"+v),"style"===v&&oo(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(v),void s.setStyle(l,"list-style-type","none");"class"===v&&l.removeAttribute("className"),l.removeAttribute(v)}}),xm(e.classes,f=>{f=ks(f,n),xt(o)&&!s.hasClass(o,f)||s.removeClass(l,f)});const u=s.getAttribs(l);for(let f=0;f<u.length;f++)if(!a.isAttributeInternal(u[f].nodeName))return ga.keep()}return"none"!==e.remove?(Zb(t,l,e),ga.removed()):ga.keep()},S_=(t,e,n,r)=>ry(t,e,n,r,r).fold(pt(r),o=>(t.dom.createFragment().appendChild(r),t.dom.rename(r,o)),pt(null)),oy=(t,e,n,r,o)=>{(r||t.selection.isEditable())&&((s,a,i,l,c)=>{const u=s.formatter.get(a),f=u[0],p=s.dom,v=s.selection,g=k=>{const A=((R,D,P,U,Y)=>{let V;return D.parentNode&&rt(zc(R.dom,D.parentNode).reverse(),L=>{if(!V&&xt(L)&&"_start"!==L.id&&"_end"!==L.id){const z=To(R,L,P,U,Y);z&&!1!==z.split&&(V=L)}}),V})(s,k,a,i,c);return((R,D,P,U,Y,V,L,z)=>{var I,$;let gt,it;const Ot=R.dom;if(P){const ht=P.parentNode;for(let Kt=U.parentNode;Kt&&Kt!==ht;Kt=Kt.parentNode){let Yt=Ot.clone(Kt,!1);for(let yt=0;yt<D.length&&(Yt=S_(R,D[yt],z,Yt),null!==Yt);yt++);Yt&&(gt&&Yt.appendChild(gt),it||(it=Yt),gt=Yt)}L.mixed&&Ot.isBlock(P)||(U=null!==(I=Ot.split(P,U))&&void 0!==I?I:U),gt&&it&&(null===($=Y.parentNode)||void 0===$||$.insertBefore(gt,Y),it.appendChild(Y),nn(L)&&Vb(R,L,0,gt))}return U})(s,u,A,k,k,0,f,i)},b=k=>Ae(u,A=>wl(s,A,i,k,k)),h=k=>{const A=Ye(k.childNodes),R=b(k)||Ae(u,P=>nd(p,k,P)),D=k.parentNode;if(!R&&mt(D)&&bf(f)&&b(D),f.deep&&A.length)for(let P=0;P<A.length;P++)h(A[P]);rt(["underline","line-through","overline"],P=>{xt(k)&&s.dom.getStyle(k,"text-decoration")===P&&k.parentNode&&N0(p,k.parentNode)===P&&wl(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:P}},void 0,k)})},C=k=>{const A=p.get(k?"_start":"_end");if(A){let R=A[k?"firstChild":"lastChild"];return Ar(D=R)&&xt(D)&&("_start"===D.id||"_end"===D.id)&&(R=R[k?"firstChild":"lastChild"]),lt(R)&&0===R.data.length&&(R=k?A.previousSibling||A.nextSibling:A.nextSibling||A.previousSibling),p.remove(A,!0),R}var D;return null},S=k=>{let A,R,D=la(p,k,u,k.collapsed);if(f.split){if(D=Kc(D),A=Yb(s,D,!0),R=Yb(s,D),A!==R){if(A=Qb(A,!0),R=Qb(R,!1),Gb(p,A,R)){const U=E.from(A.firstChild).getOr(A);return g(Jb(p,U,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void C(!0)}if(Gb(p,R,A)){const U=E.from(R.lastChild).getOr(R);return g(Jb(p,U,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void C(!1)}A=wm(p,A,"span",{id:"_start","data-mce-type":"bookmark"}),R=wm(p,R,"span",{id:"_end","data-mce-type":"bookmark"});const P=p.createRng();P.setStartAfter(A),P.setEndBefore(R),ul(p,P,U=>{rt(U,Y=>{Ar(Y)||Ar(Y.parentNode)||g(Y)})}),g(A),g(R),A=C(!0),R=C()}else A=R=g(A);D.startContainer=A.parentNode?A.parentNode:A,D.startOffset=p.nodeIndex(A),D.endContainer=R.parentNode?R.parentNode:R,D.endOffset=p.nodeIndex(R)+1}ul(p,D,P=>{rt(P,h)})};if(l){if(dl(l)){const k=p.createRng();k.setStartBefore(l),k.setEndAfter(l),S(k)}else S(l);U0(s,a,l,i)}else v.isCollapsed()&&nn(f)&&!Ja(s).length?((t,e,n,r)=>{const o=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),c=l.startContainer,u=l.startOffset;let f=c;lt(c)&&(u!==c.data.length&&(a=!0),f=f.parentNode);const p=[];let v;for(;f;){if(To(t,f,e,n,r)){v=f;break}f.nextSibling&&(a=!0),p.push(f),f=f.parentNode}if(v)if(a){const g=s.getBookmark();l.collapse(!0);let b=la(o,l,i,!0);b=Kc(b),t.formatter.remove(e,n,b,r),s.moveToBookmark(g)}else{const g=aa(t.getBody(),v),b=gm(!1).dom;((S,k,A)=>{var R,D;const P=S.dom,U=P.getParent(A,St(mf,S.schema));U&&P.isEmpty(U)?null===(R=A.parentNode)||void 0===R||R.replaceChild(k,A):((Y=>{const V=Dn(Y,"br"),L=$t((z=>{const I=[];let $=z.dom;for(;$;)I.push(O($)),$=$.lastChild;return I})(Y).slice(-1),Xs);V.length===L.length&&rt(L,Mt)})(O(A)),P.isEmpty(A)?null===(D=A.parentNode)||void 0===D||D.replaceChild(k,A):P.insertAfter(k,A))})(t,b,g??v);const h=((S,k,A,R,D,P)=>{const U=S.formatter,Y=S.dom,V=$t(Qe(U.get()),z=>z!==R&&!ze(z,"removeformat")),L=(z=S,I=A,bn(V,(gt,it)=>{const Ot=vf(z,it,Yt=>{const yt=Rt=>pe(Rt)||Rt.length>1&&"%"===Rt.charAt(0);return Ae(["styles","attributes"],Rt=>ke(Yt,Rt).exists(jt=>{const M=ct(jt)?jt:qo(jt);return Ae(M,yt)}))});return z.formatter.matchNode(I,it,{},Ot)?gt.concat([it]):gt},[]));var z,I;if($t(L,z=>!((I,$,gt)=>{const it=["inline","block","selector","attributes","styles","classes"],Ot=ht=>xr(ht,(Kt,Yt)=>Ae(it,yt=>yt===Yt));return vf(I,$,ht=>{const Kt=Ot(ht);return vf(I,gt,Yt=>{const yt=Ot(Yt);return((Rt,jt,M=je)=>ne(M).eq(Rt,jt))(Kt,yt)})})})(S,z,R)).length>0){const z=A.cloneNode(!1);return Y.add(k,z),U.remove(R,D,z,P),Y.remove(z),E.some(z)}return E.none()})(t,b,v,e,n,r),C=Db(p.concat(h.toArray()),b);g&&hm(t,g,!1),s.setCursorLocation(C,1),o.isEmpty(v)&&o.remove(v)}})(s,a,i,c):(S0(s,()=>uf(s,S),k=>nn(f)&&pm(s,a,i,k)),s.nodeChanged()),k=s,R=i,"removeformat"===(A=a)?rt(qb(k.selection),D=>{rt(Fb,P=>k.dom.setStyle(D,P,"")),ey(k.dom,D)}):jb(k.formatter,A).each(D=>{rt(qb(k.selection),P=>ny(k.dom,P,D,R,null))}),U0(s,a,l,i);var k,A,R})(t,e,n,r,o)},wl=(t,e,n,r,o)=>ry(t,e,n,r,o).fold(Ce,s=>(t.dom.rename(r,s),!0),Be),sy=dt.each,od=dt.each,ay=(t,e,n,r)=>{if(od(n.styles,(o,s)=>{t.setStyle(e,s,ks(o,r))}),n.styles){const o=t.getAttrib(e,"style");o&&t.setAttrib(e,"data-mce-style",o)}},k_=(t,e,n,r)=>{const o=t.formatter.get(e),s=o[0],a=!r&&t.selection.isCollapsed(),i=t.dom,l=t.selection,c=(g,b=s)=>{pe(b.onformat)&&b.onformat(g,b,n,r),ay(i,g,b,n),od(b.attributes,(h,C)=>{i.setAttrib(g,C,ks(h,n))}),od(b.classes,h=>{const C=ks(h,n);i.hasClass(g,C)||i.addClass(g,C)})},u=(g,b)=>{let h=!1;return od(g,C=>!(!Rr(C)||("false"!==i.getContentEditable(b)||C.ceFalseOverride)&&(!mt(C.collapsed)||C.collapsed===a)&&i.is(b,C.selector)&&!Wr(b)&&(c(b,C),h=!0,1))),h},p=(g,b,h)=>{const C=[];let S=!0;const k=s.inline||s.block,A=(g=>{if(Dt(g)){const b=i.create(g);return c(b),b}return null})(k);ul(g,b,R=>{let D;const P=U=>{let Y=!1,V=S,L=!1;const z=U.parentNode,I=z.nodeName.toLowerCase(),$=g.getContentEditable(U);mt($)&&(V=S,S="true"===$,Y=!0,L=E0(t,U));const gt=S&&!Y;if(Ie(U)&&!((it,Ot,ht,Kt)=>{if(lE(it)&&nn(Ot)&&ht.parentNode){const Yt=Ig(it.schema),yt=((t,e)=>((n,r)=>{const o=n.dom;return o.parentNode?(s=O(o.parentNode),qe(s.dom.childNodes,i=>(s=>!de(n,s)&&r(s))(O(i))).map(O)):E.none();var s})(t,e).isSome())(O(ht),Rt=>Wr(Rt.dom));return yn(Yt,Kt)&&We(O(ht.parentNode),!1)&&!yt}return!1})(t,s,U,I))return D=null,void(Ro(s)&&g.remove(U));if(it=U,Ro(Ot=s)&&!0===Ot.wrapper&&To(t,it,e,n))D=null;else{if(((it,Ot,ht)=>{const Kt=Ro(Yt=s)&&!0!==Yt.wrapper&&mf(t.schema,it)&&Za(t,Ot,k);var Yt;return ht&&Kt})(U,I,gt)){const it=g.rename(U,k);return c(it),C.push(it),void(D=null)}if(Rr(s)){let it=u(o,U);if(!it&&mt(z)&&bf(s)&&(it=u(o,z)),!nn(s)||it)return void(D=null)}mt(A)&&((it,Ot,ht,Kt)=>{const Yt=it.nodeName.toLowerCase(),yt=Za(t,k,Yt)&&Za(t,Ot,k),Rt=!h&&lt(it)&&pc(it.data),jt=Wr(it),M=!nn(s)||!g.isBlock(it);return(ht||Kt)&&yt&&!Rt&&!jt&&M})(U,I,gt,L)?(D||(D=g.clone(A,!1),z.insertBefore(D,U),C.push(D)),L&&Y&&(S=V),D.appendChild(U)):(D=null,rt(Ye(U.childNodes),P),Y&&(S=V),D=null)}var it,Ot};rt(R,P)}),!0===s.links&&rt(C,R=>{const D=P=>{"A"===P.nodeName&&c(P,s),rt(Ye(P.childNodes),D)};D(R)}),rt(C,R=>{const D=(P=>{let U=0;return rt(P.childNodes,Y=>{var V;mt(V=Y)&&lt(V)&&0===V.length||Ar(Y)||U++}),U})(R);var P;!(C.length>1)&&g.isBlock(R)||0!==D?(nn(s)||Ro(s)&&s.wrapper)&&(s.exact||1!==D||(R=qe((P=R).childNodes,ff).filter(Y=>"false"!==g.getContentEditable(Y)&&nd(g,Y,s)).map(Y=>{const V=g.clone(Y,!1);return c(V),g.replace(V,P,!0),g.remove(Y,!0),V}).getOr(P)),((P,U,Y,V)=>{sy(U,L=>{var z,I,$;nn(L)&&sy(P.dom.select(L.inline,V),z=>{ym(z)&&wl(P,L,Y,z,L.exact?z:null)}),z=P.dom,$=V,(I=L).clear_child_styles&&bm(z.select(I.links?"*:not(a)":"*",$),it=>{ym(it)&&ia(it)&&bm(I.styles,(Ot,ht)=>{z.setStyle(it,ht,"")})})})})(t,o,n,R),((P,U,Y,V,L)=>{const z=L.parentNode;To(P,z,Y,V)&&wl(P,U,V,L)||U.merge_with_parents&&z&&P.dom.getParent(z,I=>!!To(P,I,Y,V)&&(wl(P,U,V,L),!0))})(t,s,e,n,R),((P,U,Y,V)=>{if(U.styles&&U.styles.backgroundColor){const L=Kb(P,"fontSize");Cm(V,z=>L(z)&&ia(z),Xb(P,"backgroundColor",ks(U.styles.backgroundColor,Y)))}})(g,s,n,R),((P,U,Y,V)=>{const L=z=>{if(xt(z)&&xt(z.parentNode)&&ia(z)){const I=N0(P,z.parentNode);P.getStyle(z,"color")&&I?P.setStyle(z,"text-decoration",I):P.getStyle(z,"text-decoration")===I&&P.setStyle(z,"text-decoration",null)}};U.styles&&(U.styles.color||U.styles.textDecoration)&&(dt.walk(V,L,"childNodes"),L(V))})(g,s,0,R),((P,U,Y,V)=>{if(nn(U)&&("sub"===U.inline||"sup"===U.inline)){const L=Kb(P,"fontSize");Cm(V,I=>L(I)&&ia(I),Xb(P,"fontSize",""));const z=$t(P.select("sup"===U.inline?"sub":"sup",V),ia);P.remove(z,!0)}})(g,s,0,R),Vb(t,s,0,R)):g.remove(R,!0)})},v=dl(r)?r:l.getNode();if("false"===i.getContentEditable(v)&&!E0(t,v))return u(o,r=v),void H0(t,e,r,n);if(s){if(r)if(dl(r)){if(!u(o,r)){const g=i.createRng();g.setStartBefore(r),g.setEndAfter(r),p(i,la(i,g,o),!0)}}else p(i,r,!0);else a&&nn(s)&&!Ja(t).length?((g,b,h)=>{let C;const S=g.selection,k=g.formatter.get(b);if(!k)return;const A=S.getRng();let R=A.startOffset;const D=A.startContainer.nodeValue;C=aa(g.getBody(),S.getStart());const P=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(D&&R>0&&R<D.length&&P.test(D.charAt(R))&&P.test(D.charAt(R-1))){const V=S.getBookmark();A.collapse(!0);let L=la(g.dom,A,k);L=Kc(L),g.formatter.apply(b,h,L),S.moveToBookmark(V)}else{let V=C?Tb(C):null;C&&V?.data===ri||(U=g.getDoc(),Y=gm(!0).dom,C=U.importNode(Y,!0),V=C.firstChild,A.insertNode(C),R=1),g.formatter.apply(b,h,C),S.setCursorLocation(V,R)}var U,Y})(t,e,n):(l.setRng(im(l.getRng())),S0(t,()=>{uf(t,(g,b)=>{const h=b?g:la(i,g,o);p(i,h,!1)})},Be),t.nodeChanged()),jb(t.formatter,e).each(g=>{var b;rt($t((h=>{const C=h.getSelectedBlocks(),S=h.getRng();if(h.isCollapsed())return[];if(1===C.length)return zb(S,C[0])&&Hb(S,C[0])?C:[];{const k=_n(C).filter(D=>zb(S,D)).toArray(),A=yo(C).filter(D=>Hb(S,D)).toArray(),R=C.slice(1,-1);return k.concat(R).concat(A)}})(b=t.selection),Ub(b.dom)),b=>ay(i,b,g,n))});b=t,Zt(xl,g=e)&&rt(xl[g],h=>{h(b)})}var g,b;H0(t,e,r,n)},iy=(t,e,n,r)=>{(r||t.selection.isEditable())&&k_(t,e,n,r)},ly=t=>Zt(t,"vars"),cy=t=>t.selection.getStart(),dy=(t,e,n,r,o)=>Lr(e,s=>{const a=t.formatter.matchNode(s,n,o??{},r);return!De(a)},s=>!!_b(t,s,n)||!r&&mt(t.formatter.matchNode(s,n,o,!0))),uy=(t,e)=>{const n=e??cy(t);return $t(zc(t.dom,n),r=>xt(r)&&!Ks(r))},fy=(t,e,n)=>{const r=uy(t,e);Se(n,(o,s)=>{const a=i=>{const l=dy(t,r,s,i.similar,ly(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const u=l.getOr(e);ly(i)?i.callback(c,{node:u,format:s,parents:r}):rt(i.callbacks,f=>f(c,{node:u,format:s,parents:r}))}};rt([o.withSimilar,o.withoutSimilar],a),rt(o.withVars,a)})},my=dt.explode,py=()=>{const t={};return{addFilter:(e,n)=>{rt(my(e),r=>{Zt(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>qo(t),removeFilter:(e,n)=>{rt(my(e),r=>{if(Zt(t,r))if(mt(n)){const o=t[r],s=$t(o.callbacks,a=>a!==n);s.length>0?o.callbacks=s:delete t[r]}else delete t[r]})}}},gy=(t,e)=>{t.addNodeFilter("br",(n,r,o)=>{const s=dt.extend({},e.getBlockElements()),a=e.getNonEmptyElements(),i=e.getWhitespaceElements();s.body=1;const l=c=>{return c.name in s&&(1===(f=c).type&&bc(e,f.name)&&De(f.attr(Hi)));var f};for(let c=0,u=n.length;c<u;c++){let f=n[c],p=f.parent;if(p&&s[p.name]&&f===p.lastChild){let v=f.prev;for(;v;){const g=v.name;if("span"!==g||"bookmark"!==v.attr("data-mce-type")){"br"===g&&(f=null);break}v=v.prev}if(f&&(f.remove(),Cl(e,a,i,p))){const g=e.getElementRule(p.name);g&&(g.removeEmpty?p.remove():g.paddEmpty&&om(o,l,p))}}else{let v=f;for(;p&&p.firstChild===v&&p.lastChild===v&&(v=p,!s[p.name]);)p=p.parent;if(v===p){const g=new rr("#text",3);g.value=ln,f.replace(g)}}}})},Sm=t=>{const[e,...n]=t.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(o){const s=";base64"===o[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(r):decodeURIComponent(r);return E.some({type:o[1],data:a,base64Encoded:s})}return E.none()},hy=(t,e,n=!0)=>{let r=e;if(n)try{r=atob(e)}catch{return E.none()}const o=new Uint8Array(r.length);for(let s=0;s<o.length;s++)o[s]=r.charCodeAt(s);return E.some(new Blob([o],{type:t}))},vy=t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(t)});let N_=0;const by=(t,e,n)=>Sm(t).bind(({data:r,type:o,base64Encoded:s})=>{if(e&&!s)return E.none();{const a=s?r:btoa(r);return n(a,o)}}),yy=(t,e,n)=>{const r=t.create("blobid"+N_++,e,n);return t.add(r),r},Cy=(t,e,n=!1)=>by(e,n,(r,o)=>E.from(t.getByData(r,o)).orThunk(()=>hy(o,r).map(s=>yy(t,s,r))));function ha(t){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function km(t,e){return(km=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(t,e)}function Em(t,e,n){return(Em=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(r,o,s){var a=[null];a.push.apply(a,o);var i=new(Function.bind.apply(r,a));return s&&km(i,s.prototype),i}).apply(null,arguments)}function lo(t){return function(e){if(Array.isArray(e))return Nm(e)}(t)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return Nm(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nm(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var A_=Object.hasOwnProperty,xy=Object.setPrototypeOf,R_=Object.isFrozen,T_=Object.getPrototypeOf,O_=Object.getOwnPropertyDescriptor,cr=Object.freeze,Oo=Object.seal,D_=Object.create,wy=typeof Reflect<"u"&&Reflect,sd=wy.apply,_m=wy.construct;sd||(sd=function(t,e,n){return t.apply(e,n)}),cr||(cr=function(t){return t}),Oo||(Oo=function(t){return t}),_m||(_m=function(t,e){return Em(t,lo(e))});var Sy,B_=co(Array.prototype.forEach),P_=co(Array.prototype.pop),Sl=co(Array.prototype.push),ad=co(String.prototype.toLowerCase),L_=co(String.prototype.match),Ts=co(String.prototype.replace),M_=co(String.prototype.indexOf),I_=co(String.prototype.trim),dr=co(RegExp.prototype.test),Am=(Sy=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return _m(Sy,e)});function co(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return sd(t,e,r)}}function be(t,e){xy&&xy(t,null);for(var n=e.length;n--;){var r=e[n];if("string"==typeof r){var o=ad(r);o!==r&&(R_(e)||(e[n]=o),r=o)}t[r]=!0}return t}function va(t){var e,n=D_(null);for(e in t)sd(A_,t,[e])&&(n[e]=t[e]);return n}function id(t,e){for(;null!==t;){var n=O_(t,e);if(n){if(n.get)return co(n.get);if("function"==typeof n.value)return co(n.value)}t=T_(t)}return function(r){return console.warn("fallback value for",r),null}}var ky=cr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Rm=cr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Tm=cr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),F_=cr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Om=cr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),j_=cr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ey=cr(["#text"]),Ny=cr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Dm=cr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_y=cr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ld=cr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z_=Oo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),H_=Oo(/<%[\w\W]*|[\w\W]*%>/gm),U_=Oo(/^data-[\-\w.\u00B7-\uFFFF]/),q_=Oo(/^aria-[\-\w]+$/),$_=Oo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),W_=Oo(/^(?:\w+script|data):/i),V_=Oo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),K_=Oo(/^html$/i),G_=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window,n=function(W){return t(W)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var r=e.document,o=e.document,s=e.DocumentFragment,a=e.HTMLTemplateElement,i=e.Node,l=e.Element,c=e.NodeFilter,u=e.NamedNodeMap,f=void 0===u?e.NamedNodeMap||e.MozNamedAttrMap:u,p=e.HTMLFormElement,v=e.DOMParser,g=e.trustedTypes,b=l.prototype,h=id(b,"cloneNode"),C=id(b,"nextSibling"),S=id(b,"childNodes"),k=id(b,"parentNode");if("function"==typeof a){var A=o.createElement("template");A.content&&A.content.ownerDocument&&(o=A.content.ownerDocument)}var R=function(W,Xt){if("object"!==ha(W)||"function"!=typeof W.createPolicy)return null;var Lt=null,_e="data-tt-policy-suffix";Xt.currentScript&&Xt.currentScript.hasAttribute(_e)&&(Lt=Xt.currentScript.getAttribute(_e));var Ge="dompurify"+(Lt?"#"+Lt:"");try{return W.createPolicy(Ge,{createHTML:function(Ln){return Ln}})}catch{return console.warn("TrustedTypes policy "+Ge+" could not be created."),null}}(g,r),D=R?R.createHTML(""):"",U=o.implementation,Y=o.createNodeIterator,V=o.createDocumentFragment,L=o.getElementsByTagName,z=r.importNode,I={};try{I=va(o).documentMode?o.documentMode:{}}catch{}var $={};n.isSupported="function"==typeof k&&U&&void 0!==U.createHTMLDocument&&9!==I;var gt,it,Ot=z_,ht=H_,Kt=U_,Yt=q_,yt=W_,Rt=V_,jt=$_,M=null,j=be({},[].concat(lo(ky),lo(Rm),lo(Tm),lo(Om),lo(Ey))),Q=null,nt=be({},[].concat(lo(Ny),lo(Dm),lo(_y),lo(ld))),J=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Z=null,ft=null,At=!0,Ct=!0,zt=!1,Ut=!1,vt=!1,Jt=!1,Ve=!1,Pe=!1,sr=!1,ar=!1,mo=!0,Vr=!0,vn=!1,ur={},Fe=null,Mo=be({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Bs=null,nu=be({},["audio","video","img","source","image","track"]),Io=null,ql=be({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vr="http://www.w3.org/1998/Math/MathML",Ps="http://www.w3.org/2000/svg",br="http://www.w3.org/1999/xhtml",ka=br,_S=!1,IO=["application/xhtml+xml","text/html"],bi=null,FO=o.createElement("form"),AS=function(W){return W instanceof RegExp||W instanceof Function},ag=function(W){bi&&bi===W||(W&&"object"===ha(W)||(W={}),W=va(W),M="ALLOWED_TAGS"in W?be({},W.ALLOWED_TAGS):j,Q="ALLOWED_ATTR"in W?be({},W.ALLOWED_ATTR):nt,Io="ADD_URI_SAFE_ATTR"in W?be(va(ql),W.ADD_URI_SAFE_ATTR):ql,Bs="ADD_DATA_URI_TAGS"in W?be(va(nu),W.ADD_DATA_URI_TAGS):nu,Fe="FORBID_CONTENTS"in W?be({},W.FORBID_CONTENTS):Mo,Z="FORBID_TAGS"in W?be({},W.FORBID_TAGS):{},ft="FORBID_ATTR"in W?be({},W.FORBID_ATTR):{},ur="USE_PROFILES"in W&&W.USE_PROFILES,At=!1!==W.ALLOW_ARIA_ATTR,Ct=!1!==W.ALLOW_DATA_ATTR,zt=W.ALLOW_UNKNOWN_PROTOCOLS||!1,Ut=W.SAFE_FOR_TEMPLATES||!1,vt=W.WHOLE_DOCUMENT||!1,Pe=W.RETURN_DOM||!1,sr=W.RETURN_DOM_FRAGMENT||!1,ar=W.RETURN_TRUSTED_TYPE||!1,Ve=W.FORCE_BODY||!1,mo=!1!==W.SANITIZE_DOM,Vr=!1!==W.KEEP_CONTENT,vn=W.IN_PLACE||!1,jt=W.ALLOWED_URI_REGEXP||jt,ka=W.NAMESPACE||br,W.CUSTOM_ELEMENT_HANDLING&&AS(W.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(J.tagNameCheck=W.CUSTOM_ELEMENT_HANDLING.tagNameCheck),W.CUSTOM_ELEMENT_HANDLING&&AS(W.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(J.attributeNameCheck=W.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),W.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof W.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(J.allowCustomizedBuiltInElements=W.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),gt=gt=-1===IO.indexOf(W.PARSER_MEDIA_TYPE)?"text/html":W.PARSER_MEDIA_TYPE,it="application/xhtml+xml"===gt?function(Xt){return Xt}:ad,Ut&&(Ct=!1),sr&&(Pe=!0),ur&&(M=be({},lo(Ey)),Q=[],!0===ur.html&&(be(M,ky),be(Q,Ny)),!0===ur.svg&&(be(M,Rm),be(Q,Dm),be(Q,ld)),!0===ur.svgFilters&&(be(M,Tm),be(Q,Dm),be(Q,ld)),!0===ur.mathMl&&(be(M,Om),be(Q,_y),be(Q,ld))),W.ADD_TAGS&&(M===j&&(M=va(M)),be(M,W.ADD_TAGS)),W.ADD_ATTR&&(Q===nt&&(Q=va(Q)),be(Q,W.ADD_ATTR)),W.ADD_URI_SAFE_ATTR&&be(Io,W.ADD_URI_SAFE_ATTR),W.FORBID_CONTENTS&&(Fe===Mo&&(Fe=va(Fe)),be(Fe,W.FORBID_CONTENTS)),Vr&&(M["#text"]=!0),vt&&be(M,["html","head","body"]),M.table&&(be(M,["tbody"]),delete Z.tbody),cr&&cr(W),bi=W)},RS=be({},["mi","mo","mn","ms","mtext"]),TS=be({},["foreignobject","desc","title","annotation-xml"]),jO=be({},["title","style","font","a","script"]),ru=be({},Rm);be(ru,Tm),be(ru,F_);var ig=be({},Om);be(ig,j_);var es=function(W){Sl(n.removed,{element:W});try{W.parentNode.removeChild(W)}catch{try{W.outerHTML=D}catch{W.remove()}}},ou=function(W,Xt){try{Sl(n.removed,{attribute:Xt.getAttributeNode(W),from:Xt})}catch{Sl(n.removed,{attribute:null,from:Xt})}if(Xt.removeAttribute(W),"is"===W&&!Q[W])if(Pe||sr)try{es(Xt)}catch{}else try{Xt.setAttribute(W,"")}catch{}},OS=function(W){var Xt,Lt;if(Ve)W="<remove></remove>"+W;else{var _e=L_(W,/^[\r\n\t ]+/);Lt=_e&&_e[0]}"application/xhtml+xml"===gt&&(W='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+W+"</body></html>");var Ge=R?R.createHTML(W):W;if(ka===br)try{Xt=(new v).parseFromString(Ge,gt)}catch{}if(!Xt||!Xt.documentElement){Xt=U.createDocument(ka,"template",null);try{Xt.documentElement.innerHTML=_S?"":Ge}catch{}}var Ln=Xt.body||Xt.documentElement;return W&&Lt&&Ln.insertBefore(o.createTextNode(Lt),Ln.childNodes[0]||null),ka===br?L.call(Xt,vt?"html":"body")[0]:vt?Xt.documentElement:Ln},DS=function(W){return Y.call(W.ownerDocument||W,W,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},$l=function(W){return"object"===ha(i)?W instanceof i:W&&"object"===ha(W)&&"number"==typeof W.nodeType&&"string"==typeof W.nodeName},ns=function(W,Xt,Lt){$[W]&&B_($[W],function(_e){_e.call(n,Xt,Lt,bi)})},BS=function(W){var Xt,Lt;if(ns("beforeSanitizeElements",W,null),(Lt=W)instanceof p&&("string"!=typeof Lt.nodeName||"string"!=typeof Lt.textContent||"function"!=typeof Lt.removeChild||!(Lt.attributes instanceof f)||"function"!=typeof Lt.removeAttribute||"function"!=typeof Lt.setAttribute||"string"!=typeof Lt.namespaceURI||"function"!=typeof Lt.insertBefore)||dr(/[\u0080-\uFFFF]/,W.nodeName))return es(W),!0;var _e=it(W.nodeName);if(ns("uponSanitizeElement",W,{tagName:_e,allowedTags:M}),W.hasChildNodes()&&!$l(W.firstElementChild)&&(!$l(W.content)||!$l(W.content.firstElementChild))&&dr(/<[/\w]/g,W.innerHTML)&&dr(/<[/\w]/g,W.textContent)||"select"===_e&&dr(/<template/i,W.innerHTML))return es(W),!0;if(!M[_e]||Z[_e]){if(!Z[_e]&&LS(_e)&&(J.tagNameCheck instanceof RegExp&&dr(J.tagNameCheck,_e)||J.tagNameCheck instanceof Function&&J.tagNameCheck(_e)))return!1;if(Vr&&!Fe[_e]){var Ge=k(W)||W.parentNode,Ln=S(W)||W.childNodes;if(Ln&&Ge)for(var un=Ln.length-1;un>=0;--un)Ge.insertBefore(h(Ln[un],!0),C(W))}return es(W),!0}return W instanceof l&&!function(po){var fn=k(po);fn&&fn.tagName||(fn={namespaceURI:br,tagName:"template"});var mn=ad(po.tagName),Ea=ad(fn.tagName);return po.namespaceURI===Ps?fn.namespaceURI===br?"svg"===mn:fn.namespaceURI===vr?"svg"===mn&&("annotation-xml"===Ea||RS[Ea]):!!ru[mn]:po.namespaceURI===vr?fn.namespaceURI===br?"math"===mn:fn.namespaceURI===Ps?"math"===mn&&TS[Ea]:!!ig[mn]:po.namespaceURI===br&&!(fn.namespaceURI===Ps&&!TS[Ea])&&!(fn.namespaceURI===vr&&!RS[Ea])&&!ig[mn]&&(jO[mn]||!ru[mn])}(W)?(es(W),!0):"noscript"!==_e&&"noembed"!==_e||!dr(/<\/no(script|embed)/i,W.innerHTML)?(Ut&&3===W.nodeType&&(Xt=Ts(Xt=W.textContent,Ot," "),Xt=Ts(Xt,ht," "),W.textContent!==Xt&&(Sl(n.removed,{element:W.cloneNode()}),W.textContent=Xt)),ns("afterSanitizeElements",W,null),!1):(es(W),!0)},PS=function(W,Xt,Lt){if(mo&&("id"===Xt||"name"===Xt)&&(Lt in o||Lt in FO))return!1;if((!Ct||ft[Xt]||!dr(Kt,Xt))&&(!At||!dr(Yt,Xt)))if(!Q[Xt]||ft[Xt]){if(!(LS(W)&&(J.tagNameCheck instanceof RegExp&&dr(J.tagNameCheck,W)||J.tagNameCheck instanceof Function&&J.tagNameCheck(W))&&(J.attributeNameCheck instanceof RegExp&&dr(J.attributeNameCheck,Xt)||J.attributeNameCheck instanceof Function&&J.attributeNameCheck(Xt))||"is"===Xt&&J.allowCustomizedBuiltInElements&&(J.tagNameCheck instanceof RegExp&&dr(J.tagNameCheck,Lt)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Lt))))return!1}else if(!Io[Xt]&&!dr(jt,Ts(Lt,Rt,""))&&("src"!==Xt&&"xlink:href"!==Xt&&"href"!==Xt||"script"===W||0!==M_(Lt,"data:")||!Bs[W])&&(!zt||dr(yt,Ts(Lt,Rt,"")))&&Lt)return!1;return!0},LS=function(W){return W.indexOf("-")>0},MS=function(W){var Xt,Lt,_e,Ge;ns("beforeSanitizeAttributes",W,null);var Ln=W.attributes;if(Ln){var un={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Q};for(Ge=Ln.length;Ge--;){var po=Xt=Ln[Ge],fn=po.name,mn=po.namespaceURI;Lt="value"===fn?Xt.value:I_(Xt.value),_e=it(fn);var Ea=Lt;if(un.attrName=_e,un.attrValue=Lt,un.keepAttr=!0,un.forceKeepAttr=void 0,ns("uponSanitizeAttribute",W,un),Lt=un.attrValue,!un.forceKeepAttr)if(un.keepAttr)if(dr(/\/>/i,Lt))ou(fn,W);else{Ut&&(Lt=Ts(Lt,Ot," "),Lt=Ts(Lt,ht," "));var HO=it(W.nodeName);if(PS(HO,_e,Lt)){if(Lt!==Ea)try{mn?W.setAttributeNS(mn,fn,Lt):W.setAttribute(fn,Lt)}catch{ou(fn,W)}}else ou(fn,W)}else ou(fn,W)}ns("afterSanitizeAttributes",W,null)}},zO=function W(Xt){var Lt,_e=DS(Xt);for(ns("beforeSanitizeShadowDOM",Xt,null);Lt=_e.nextNode();)ns("uponSanitizeShadowNode",Lt,null),BS(Lt)||(Lt.content instanceof s&&W(Lt.content),MS(Lt));ns("afterSanitizeShadowDOM",Xt,null)};return n.sanitize=function(W,Xt){var Lt,_e,Ge,Ln,un;if((_S=!W)&&(W="\x3c!--\x3e"),"string"!=typeof W&&!$l(W)){if("function"!=typeof W.toString)throw Am("toString is not a function");if("string"!=typeof(W=W.toString()))throw Am("dirty is not a string, aborting")}if(!n.isSupported){if("object"===ha(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof W)return e.toStaticHTML(W);if($l(W))return e.toStaticHTML(W.outerHTML)}return W}if(Jt||ag(Xt),n.removed=[],"string"==typeof W&&(vn=!1),vn){if(W.nodeName){var po=it(W.nodeName);if(!M[po]||Z[po])throw Am("root node is forbidden and cannot be sanitized in-place")}}else if(W instanceof i)1===(_e=(Lt=OS("\x3c!----\x3e")).ownerDocument.importNode(W,!0)).nodeType&&"BODY"===_e.nodeName||"HTML"===_e.nodeName?Lt=_e:Lt.appendChild(_e);else{if(!Pe&&!Ut&&!vt&&-1===W.indexOf("<"))return R&&ar?R.createHTML(W):W;if(!(Lt=OS(W)))return Pe?null:ar?D:""}Lt&&Ve&&es(Lt.firstChild);for(var fn=DS(vn?W:Lt);Ge=fn.nextNode();)3===Ge.nodeType&&Ge===Ln||BS(Ge)||(Ge.content instanceof s&&zO(Ge.content),MS(Ge),Ln=Ge);if(Ln=null,vn)return W;if(Pe){if(sr)for(un=V.call(Lt.ownerDocument);Lt.firstChild;)un.appendChild(Lt.firstChild);else un=Lt;return Q.shadowroot&&(un=z.call(r,un,!0)),un}var mn=vt?Lt.outerHTML:Lt.innerHTML;return vt&&M["!doctype"]&&Lt.ownerDocument&&Lt.ownerDocument.doctype&&Lt.ownerDocument.doctype.name&&dr(K_,Lt.ownerDocument.doctype.name)&&(mn="<!DOCTYPE "+Lt.ownerDocument.doctype.name+">\n"+mn),Ut&&(mn=Ts(mn,Ot," "),mn=Ts(mn,ht," ")),R&&ar?R.createHTML(mn):mn},n.setConfig=function(W){ag(W),Jt=!0},n.clearConfig=function(){bi=null,Jt=!1},n.isValidAttribute=function(W,Xt,Lt){bi||ag({});var _e=it(W),Ge=it(Xt);return PS(_e,Ge,Lt)},n.addHook=function(W,Xt){"function"==typeof Xt&&($[W]=$[W]||[],Sl($[W],Xt))},n.removeHook=function(W){if($[W])return P_($[W])},n.removeHooks=function(W){$[W]&&($[W]=[])},n.removeAllHooks=function(){$={}},n}();const Ay=dt.each,Y_=dt.trim,Q_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],J_={ftp:21,http:80,https:443,mailto:25},Z_=["img","video"],Ry=(t,e,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!t.allow_html_data_urls&&(/^data:image\//i.test(r)?(s=n,(mt(o=t.allow_svg_data_urls)?!o:!mt(s)||!Tt(Z_,s))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,s};class uo{static parseDataUri(e){let n;const r=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(e,n,r={}){if(r.allow_script_urls)return!0;{const o=bs.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Ry(r,o,n)}}static getDocumentBaseUrl(e){var n;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,n={}){this.path="",this.directory="",e=Y_(e),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=r?r.path:new uo(document.location.href).directory;if(""===r?.protocol)e="//mce_host"+o.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&Ay(Q_,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),o[i]=c}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),s&&(o.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new uo(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const r=new uo(e,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?J_[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let r,o,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(r=0,o=i.length;r<o;r++)if(r>=l.length||i[r]!==l[r]){s=r+1;break}if(i.length<l.length)for(r=0,o=l.length;r<o;r++)if(r>=i.length||i[r]!==l[r]){s=r+1;break}if(1===s)return n;for(r=0,o=i.length-(s-1);r<o;r++)a+="../";for(r=s-1,o=l.length;r<o;r++)a+=r!==s-1?"/"+l[r]:l[r];return a}toAbsPath(e,n){let r=0;const o=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];Ay(s,f=>{f&&i.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)0!==a[f].length&&"."!==a[f]&&(".."!==a[f]?r>0?r--:l.push(a[f]):r++);const c=i.length-r;let u;return u=c<=0?Xr(l).join("/"):i.slice(0,c).join("/")+"/"+Xr(l).join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const tA=dt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Bm="data-mce-type";let Ty=0;const Oy=(t,e,n,r)=>{var o,s,a,i;const l=e.validate,c=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(o=t.nodeValue)&&void 0!==o?o:"")&&(t.nodeValue=" "+t.nodeValue);const u=null!==(s=r?.tagName)&&void 0!==s?s:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===u)return;const f=O(t),p=Ma(f,Bm),v=jn(f,"data-mce-bogus");if(!p&&Dt(v))return void("all"===v?Mt(f):me(f));const g=n.getElementRule(u);if(!l||g){if(mt(r)&&(r.allowedTags[u]=!0),l&&g&&!p){if(rt(null!==(a=g.attributesForced)&&void 0!==a?a:[],b=>{Xe(f,b.name,"{$uid}"===b.value?"mce_"+Ty++:b.value)}),rt(null!==(i=g.attributesDefault)&&void 0!==i?i:[],b=>{Ma(f,b.name)||Xe(f,b.name,"{$uid}"===b.value?"mce_"+Ty++:b.value)}),g.attributesRequired&&!Ae(g.attributesRequired,b=>Ma(f,b))||g.removeEmptyAttrs&&(b=>{const h=b.dom.attributes;return null==h||0===h.length})(f))return void me(f);g.outputName&&g.outputName!==u&&Qg(f,g.outputName)}}else Zt(c,u)?Mt(f):me(f)},Dy=(t,e,n,r,o)=>!(r in tA&&Ry(t,o,n))&&(!t.validate||e.isValid(n,r)||Je(r,"data-")||Je(r,"aria-")),By=(t,e)=>t.hasAttribute(Bm)&&("id"===e||"class"===e||"style"===e),Py=(t,e)=>t in e.getBoolAttrs(),eA=(t,e,n)=>{const{attributes:r}=t;for(let o=r.length-1;o>=0;o--){const s=r[o],a=s.name,i=s.value;Dy(e,n,t.tagName.toLowerCase(),a,i)||By(t,a)?Py(a,n)&&t.setAttribute(a,a):t.removeAttribute(a)}},Ly=dt.makeMap,My=dt.extend,Iy=(t,e,n)=>{const r=t.name,o=r in n&&"title"!==r&&"textarea"!==r,s=e.childNodes;for(let a=0,i=s.length;a<i;a++){const l=s[a],c=new rr(l.nodeName.toLowerCase(),l.nodeType);if(xt(l)){const u=l.attributes;for(let f=0,p=u.length;f<p;f++){const v=u[f];c.attr(v.name,v.value)}}else lt(l)?(c.value=l.data,o&&(c.raw=!0)):(ps(l)||IS(l)||FS(l))&&(c.value=l.data);Iy(c,l,n),t.append(c)}},oi=(t={},e=ys())=>{const n=py(),r=py(),o={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((b,h)=>{if(b.sanitize){const C=((t,e)=>{const n=G_();return n.addHook("uponSanitizeElement",(r,o)=>{Oy(r,t,e,o)}),n.addHook("uponSanitizeAttribute",(r,o)=>{const s=r.tagName.toLowerCase(),{attrName:a,attrValue:i}=o;o.keepAttr=Dy(t,e,s,a,i),o.keepAttr?(o.allowedAttributes[a]=!0,Py(a,e)&&(o.attrValue=a),t.allow_svg_data_urls&&Je(i,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):By(r,a)&&(o.forceKeepAttr=!0)}),n})(b,h);return(S,k)=>{C.sanitize(S,((A,R)=>{const D={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return D.PARSER_MEDIA_TYPE=R,A.allow_script_urls?D.ALLOWED_URI_REGEXP=/.*/:A.allow_html_data_urls&&(D.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),D})(b,k)),C.removed=[]}}return(C,S)=>{const k=document.createNodeIterator(C,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let A;for(;A=k.nextNode();)Oy(A,b,h),xt(A)&&eA(A,b,h)}})(o,e),l=n.getFilters,f=r.getFilters,v=(b,h)=>{const C=Dt(h.attr(Bm)),S=1===h.type&&!Zt(b,h.name)&&!Eg(e,h);return 3===h.type||S&&!C},g={schema:e,addAttributeFilter:r.addFilter,getAttributeFilters:f,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(b,h={})=>{var C;const S=o.validate,k=null!==(C=h.context)&&void 0!==C?C:o.root_name,A=((I,$,gt="html")=>{const it="xhtml"===gt?"application/xhtml+xml":"text/html",Ot=Zt(e.getSpecialElements(),$.toLowerCase()),ht=Ot?`<${$}>${I}</${$}>`:I,Yt=s.parseFromString("xhtml"===gt?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ht}</body></html>`:`<body>${ht}</body>`,it).body;return a(Yt,it),Ot?Yt.firstChild:Yt})(b,k,h.format);xu(e,A);const R=new rr(k,11);Iy(R,A,e.getSpecialElements()),A.innerHTML="";const[D,P]=((I,$,gt,it)=>{const Ot=gt.validate,ht=$.getNonEmptyElements(),Kt=$.getWhitespaceElements(),Yt=My(Ly("script,style,head,html,body,title,meta,param"),$.getBlockElements()),yt=Ig($),Rt=/[ \t\r\n]+/g,jt=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,j=J=>{let Z=J.parent;for(;mt(Z);){if(Z.name in Kt)return!0;Z=Z.parent}return!1},Q=J=>J.name in Yt||Eg($,J),nt=(J,Z)=>!mt(Z?J.prev:J.next)&&!ye(J.parent)&&Q(J.parent)&&(J.parent!==I||!0===it.isRootContent);return[J=>{var Z,At,Ct;if(3===J.type&&!j(J)){let ft=null!==(Z=J.value)&&void 0!==Z?Z:"";ft=ft.replace(Rt," "),Ct=Q,(mt(At=J.prev)&&(Ct(At)||"br"===At.name)||nt(J,!0))&&(ft=ft.replace(jt,"")),0===ft.length?J.remove():J.value=ft}},J=>{var Z,Ct,zt;if(1===J.type){const ft=$.getElementRule(J.name);if(Ot&&ft){const At=Cl($,ht,Kt,J);ft.paddInEmptyBlock&&At&&(Ct=>{let zt=Ct;for(;mt(zt);){if(zt.name in yt)return Cl($,ht,Kt,zt);zt=zt.parent}return!1})(J)?om(it,Q,J):ft.removeEmpty&&At?Q(J)?J.remove():J.unwrap():ft.paddEmpty&&(At||Sb(Ct=J,"#text")&&(null===(zt=Ct?.firstChild)||void 0===zt?void 0:zt.value)===ln)&&om(it,Q,J)}}else if(3===J.type&&!j(J)){let ft=null!==(Z=J.value)&&void 0!==Z?Z:"";(J.next&&Q(J.next)||nt(J,!1))&&(ft=ft.replace(M,"")),0===ft.length?J.remove():J.value=ft}}]})(R,e,o,h),U=[],V={nodes:{},attributes:{}},L=I=>Cb(l(),f(),I,V);if(((I,$,gt)=>{const it=[];for(let Ot=I,ht=Ot;Ot;ht=Ot,Ot=Ot.walk()){const Kt=Ot;rt($,Yt=>Yt(Kt)),ye(Kt.parent)&&Kt!==I?Ot=ht:it.push(Kt)}for(let Ot=it.length-1;Ot>=0;Ot--){const ht=it[Ot];rt(gt,Kt=>Kt(ht))}})(R,[D,L],[P,S?I=>{return gt=U,void(kb(e,$=I)&&gt.push($));var $,gt}:Nt]),U.reverse(),S&&U.length>0)if(h.context){const{pass:I,fail:$}=Kr(U,gt=>gt.parent===R);am($,e,R,L),h.invalid=I.length>0}else am(U,e,R,L);const z=((I,$)=>{var gt;const it=null!==(gt=$.forced_root_block)&&void 0!==gt?gt:I.forced_root_block;return!1===it?"":!0===it?"p":it})(o,h);return z&&("body"===R.name||h.isRootContent)&&((I,$)=>{const gt=My(Ly("script,style,head,html,body,title,meta,param"),e.getBlockElements()),it=/^[ \t\r\n]+/,Ot=/[ \t\r\n]+$/;let ht=I.firstChild,Kt=null;const Yt=yt=>{var Rt,jt;yt&&(ht=yt.firstChild,ht&&3===ht.type&&(ht.value=null===(Rt=ht.value)||void 0===Rt?void 0:Rt.replace(it,"")),ht=yt.lastChild,ht&&3===ht.type&&(ht.value=null===(jt=ht.value)||void 0===jt?void 0:jt.replace(Ot,"")))};if(e.isValidChild(I.name,$.toLowerCase())){for(;ht;){const yt=ht.next;v(gt,ht)?(Kt||(Kt=new rr($,1),Kt.attr(o.forced_root_block_attrs),I.insert(Kt,ht)),Kt.append(ht)):(Yt(Kt),Kt=null),ht=yt}Yt(Kt)}})(R,z),h.invalid||xb(V,h),R}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&gy(t,n),t.addAttributeFilter("href",o=>{let s=o.length;const a=i=>{const l=i?dt.trim(i):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(u=>u.length>0).concat(["noopener"]).sort().join(" ")};if(!e.allow_unsafe_link_target)for(;s--;){const i=o[s];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",a(i.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",o=>{let s,a,i,l,c=o.length;for(;c--;)if(l=o[c],"a"===l.name&&l.firstChild&&!l.attr("href"))for(i=l.parent,s=l.lastChild;s&&i;)a=s.prev,i.insert(s,l),s=a}),e.fix_list_elements&&t.addNodeFilter("ul,ol",o=>{let s,a,i=o.length;for(;i--;)if(s=o[i],a=s.parent,a&&("ul"===a.name||"ol"===a.name))if(s.prev&&"li"===s.prev.name)s.prev.append(s);else{const l=new rr("li",1);l.attr("style","list-style-type: none"),s.wrap(l)}});const r=n.getValidClasses();e.validate&&r&&t.addAttributeFilter("class",o=>{var s;let a=o.length;for(;a--;){const i=o[a],l=null!==(s=i.attr("class"))&&void 0!==s?s:"",c=dt.explode(l," ");let u="";for(let f=0;f<c.length;f++){const p=c[f];let v=!1,g=r["*"];g&&g[p]&&(v=!0),g=r[i.name],!v&&g&&g[p]&&(v=!0),v&&(u&&(u+=" "),u+=p)}u.length||(u=null),i.attr("class",u)}}),((o,s)=>{const{blob_cache:a}=s;if(a){const i=l=>{const c=l.attr("src");var u;(u=l).attr("src")===fe.transparentSrc||mt(u.attr("data-mce-placeholder"))||(u=>mt(u.attr("data-mce-bogus")))(l)||ye(c)||Cy(a,c,!0).each(u=>{l.attr("src",u.blobUri())})};o.addAttributeFilter("src",l=>rt(l,i))}})(t,e)})(g,o),(h=o).inline_styles&&((t,e,n)=>{var r;const o=Ru();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=o,i=dt.explode(null!==(r=e.font_size_legacy_values)&&void 0!==r?r:""),s.addNodeFilter("font",l=>{rt(l,c=>{const u=a.parse(c.attr("style")),f=c.attr("color"),p=c.attr("face"),v=c.attr("size");var g;f&&(u.color=f),p&&(u["font-family"]=p),v&&zs(v).each(g=>{u["font-size"]=i[g-1]}),c.name="span",c.attr("style",a.serialize(u)),g=c,rt(["color","face","size"],h=>{g.attr(h,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const c="html4"!==a.type;rt(l,u=>{if(c)u.name="s";else{const f=i.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",i.serialize(f))}})})})(t,n,o)})(g,h,e),g;var h},Fy=(t,e,n)=>{const r=ed(s=t)?Es({validate:!1}).serialize(s):s,o=e(r);var s;if(o.isDefaultPrevented())return o;if(ed(t)){if(o.content!==r){const s=oi({validate:!1,forced_root_block:!1,sanitize:n}).parse(o.content,{context:t.name});return{...o,content:s}}return{...o,content:t}}return o},jy=(t,e)=>{if(e.no_events)return tr.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?tr.error($0(t,{content:"",...n}).content):tr.value(n)}},zy=(t,e,n)=>n.no_events?e:Fy(e,o=>$0(t,{...n,content:o}),Gu(t)).content,Pm=(t,e)=>{if(e.no_events)return tr.value(e);{const n=Fy(e.content,r=>{return o=t,s={...e,content:r},o.dispatch("BeforeSetContent",s);var o,s},Gu(t));return n.isDefaultPrevented()?(q0(t,n),tr.error(void 0)):tr.value(n)}},Lm=(t,e,n)=>{n.no_events||q0(t,{...n,content:e})},Mm=(t,e,n)=>({element:t,width:e,rows:n}),Hy=(t,e)=>({element:t,cells:e}),rA=(t,e)=>({x:t,y:e}),Uy=(t,e)=>Jr(t,e).bind(zs).getOr(1),oA=(t,e,n)=>{const r=t.rows;return!!(r[n]?r[n].cells:[])[e]},qy=t=>bn(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),$y=(t,e)=>{const n=t.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let s=0;s<o.length;s++)if(de(o[s],e))return E.some(rA(s,r))}return E.none()},Wy=(t,e,n,r,o)=>{const s=[],a=t.rows;for(let i=n;i<=o;i++){const l=a[i].cells,c=e<r?l.slice(e,r+1):l.slice(r,e+1);s.push(Hy(a[i].element,c))}return s},sA=t=>((e,n)=>{const r=ta(e.element),o=X("tbody");return ge(o,n),_t(r,o),r})(t,re(t.rows,n=>{const r=re(n.cells,s=>{const a=Yg(s);return on(a,"colspan"),on(a,"rowspan"),a}),o=ta(n.element);return ge(o,r),o})),Vy=()=>wf([]),cd=(t,e)=>e>=0&&e<t.length&&Qa(t.charAt(e)),Ky=t=>Go(t.innerText),Xy=t=>xt(t)?t.outerHTML:lt(t)?bs.encodeRaw(t.data,!1):ps(t)?"\x3c!--"+t.data+"--\x3e":"",dA=$o(()=>document.implementation.createHTMLDocument("undo")),dd=t=>{const e=(n=t.getBody(),$t(re(Ye(n.childNodes),Xy),s=>s.length>0));var n;const r=rn(e,s=>{const a=_v(t.serializer,s);return a.length>0?[a]:[]}),o=r.join("");return-1!==o.indexOf("</iframe>")?{type:"fragmented",fragments:r,content:"",bookmark:null,beforeBookmark:null}:(s=>({type:"complete",fragments:null,content:s,bookmark:null,beforeBookmark:null}))(o)},Im=(t,e,n)=>{const r=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,r)=>{let o=0;rt(n,s=>{var a,i;0===s[0]?o++:1===s[0]?(((a,i,l)=>{const c=(u=>{let f;const p=document.createElement("div"),v=document.createDocumentFragment();for(u&&(p.innerHTML=u);f=p.firstChild;)v.appendChild(f);return v})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(c,a.childNodes[l]):a.appendChild(c)})(r,s[1],o),o++):2===s[0]&&(i=o,(a=r).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,r)=>{const o=n.length+r.length+2,s=new Array(o),a=new Array(o),i=(f,p,v,g,b)=>{const h=c(f,p,v,g);if(null===h||h.start===p&&h.diag===p-g||h.end===f&&h.diag===f-v){let C=f,S=v;for(;C<p||S<g;)C<p&&S<g&&n[C]===r[S]?(b.push([0,n[C]]),++C,++S):p-f>g-v?(b.push([2,n[C]]),++C):(b.push([1,r[S]]),++S)}else{i(f,h.start,v,h.start-h.diag,b);for(let C=h.start;C<h.end;++C)b.push([0,n[C]]);i(h.end,p,h.end-h.diag,g,b)}},l=(f,p,v,g)=>{let b=f;for(;b-p<g&&b<v&&n[b]===r[b-p];)++b;return{start:f,end:b,diag:p}},c=(f,p,v,g)=>{const b=p-f,h=g-v;if(0===b||0===h)return null;const C=b-h,S=h+b,k=(S%2==0?S:S+1)/2;let A,R,D,P,U;for(s[1+k]=f,a[1+k]=p+1,A=0;A<=k;++A){for(R=-A;R<=A;R+=2){for(D=R+k,s[D]=R===-A||R!==A&&s[D-1]<s[D+1]?s[D+1]:s[D-1]+1,P=s[D],U=P-f+v-R;P<p&&U<g&&n[P]===r[U];)s[D]=++P,++U;if(C%2!=0&&C-A<=R&&R<=C+A&&a[D-C]<=s[D])return l(a[D-C],R+f-v,p,g)}for(R=C-A;R<=C+A;R+=2){for(D=R+k-C,a[D]=R===C-A||R!==C+A&&a[D+1]<=a[D-1]?a[D+1]-1:a[D-1],P=a[D]-1,U=P-f+v-R;P>=f&&U>=v&&n[P]===r[U];)a[D]=P--,U--;if(C%2==0&&-A<=R&&R<=A&&a[D]<=s[D+C])return l(a[D],R+f-v,p,g)}}return null},u=[];return i(0,n.length,0,r.length,u),u})(re(Ye(e.childNodes),Xy),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!mt(r)||!f0(r)||!r.isFakeCaret}),r&&(t.selection.moveToBookmark(r),t.selection.scrollIntoView())},Fm=t=>"fragmented"===t.type?t.fragments.join(""):t.content,Gy=t=>{const e=X("body",dA());return an(e,Fm(t)),rt(Dn(e,"*[data-mce-bogus]"),me),tn(e)},jm=(t,e)=>{return!(!t||!e)&&(r=e,!(Fm(t)!==Fm(r))||((n,r)=>Gy(n)===Gy(r))(t,e));var r},zm=t=>0===t.get(),ud=(t,e,n)=>{zm(n)&&(t.typing=e)},Yy=(t,e)=>{t.typing&&(ud(t,!1,e),t.add())},Qy=t=>({init:{bindEvents:Nt},undoManager:{beforeChange:(e,n)=>{return r=t,s=n,void(zm(e)&&s.set(qu(r.selection)));var r,s},add:(e,n,r,o,s,a)=>((i,l,c,u,f,p,v)=>{const g=dd(i),b=dt.extend(p||{},g);if(!zm(u)||i.removed)return null;const h=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:b,lastLevel:h,originalEvent:v}).isDefaultPrevented()||h&&jm(h,b))return null;l.data[c.get()]&&f.get().each(k=>{l.data[c.get()].beforeBookmark=k});const C=gE(i);if(C&&l.data.length>C){for(let k=0;k<l.data.length-1;k++)l.data[k]=l.data[k+1];l.data.length--,c.set(l.data.length)}b.bookmark=qu(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(b),c.set(l.data.length-1);const S={level:b,lastLevel:h,originalEvent:v};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",S),i.dispatch("change",S)):i.dispatch("AddUndo",S),b})(t,e,n,r,o,s,a),undo:(e,n,r)=>((o,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,ud(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],Im(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(t,e,n,r),redo:(e,n)=>((r,o,s)=>{let a;return o.get()<s.length-1&&(o.set(o.get()+1),a=s[o.get()],Im(r,a,!1),r.setDirty(!0),r.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return r=t,s=n,(o=e).data=[],s.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return r=t,o=e,n.get()>0||o.typing&&o.data[0]&&!jm(dd(r),o.data[0]);var r,o},hasRedo:(e,n)=>{return r=e,n.get()<r.data.length-1&&!r.typing;var r},transact:(e,n,r)=>{return a=r,Yy(o=e,n),o.beforeChange(),o.ignore(a),o.add();var o,a},ignore:(e,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(e,n),extra:(e,n,r,o)=>((s,a,i,l,c)=>{if(a.transact(l)){const u=a.data[i.get()].bookmark,f=a.data[i.get()-1];Im(s,f,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=u)}})(t,e,n,r,o)},formatter:{match:(e,n,r,o)=>pm(t,e,n,r,o),matchAll:(e,n)=>((r,o,s)=>{const a=[],i={},l=r.selection.getStart();return r.dom.getParent(l,c=>{for(let u=0;u<o.length;u++){const f=o[u];!i[f]&&To(r,c,f,s)&&(i[f]=!0,a.push(f))}},r.dom.getRoot()),a})(t,e,n),matchNode:(e,n,r,o)=>To(t,e,n,r,o),canApply:e=>((n,r)=>{const o=n.formatter.get(r),s=n.dom;if(o&&n.selection.isEditable()){const a=n.selection.getStart(),i=zc(s,a);for(let l=o.length-1;l>=0;l--){const c=o[l];if(!Rr(c))return!0;for(let u=i.length-1;u>=0;u--)if(s.is(i[u],c.selector))return!0}}return!1})(t,e),closest:e=>((n,r)=>{const o=s=>de(s,O(n.getBody()));return E.from(n.selection.getStart(!0)).bind(s=>um(O(s),a=>Kn(r,i=>{return To(n,a.dom,c=i)?E.some(c):E.none();var c}),o)).getOrNull()})(t,e),apply:(e,n,r)=>iy(t,e,n,r),remove:(e,n,r,o)=>oy(t,e,n,r,o),toggle:(e,n,r)=>((o,s,a,i)=>{const l=o.formatter.get(s);l&&(!pm(o,s,a,i)||"toggle"in l[0]&&!l[0].toggle?iy(o,s,a,i):oy(o,s,a,i))})(t,e,n,r),formatChanged:(e,n,r,o,s)=>{return((p,v,g,b,h,C)=>{const S=v.get();rt(g.split(","),k=>{const A=ke(S,k).getOrThunk(()=>{const D={withSimilar:{state:cn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:cn(!1),similar:!1,callbacks:[]},withVars:[]};return S[k]=D,D}),R=()=>{const D=uy(p);return dy(p,D,k,h,C).isSome()};if(De(C)){const D=h?A.withSimilar:A.withoutSimilar;D.callbacks.push(b),1===D.callbacks.length&&D.state.set(R())}else A.withVars.push({state:cn(R()),similar:h,vars:C,callback:b})}),v.set(S)})(t,i=e,l=n,c=r,o,s),{unbind:()=>((p,v,g)=>{const b=p.get();rt(v.split(","),h=>ke(b,h).each(C=>{b[h]={withSimilar:{...C.withSimilar,callbacks:$t(C.withSimilar.callbacks,S=>S!==g)},withoutSimilar:{...C.withoutSimilar,callbacks:$t(C.withoutSimilar.callbacks,S=>S!==g)},withVars:$t(C.withVars,S=>S.callback!==g)}})),p.set(b)})(i,l,c)};var i,l,c}},editor:{getContent:e=>{return r=e,E.from((n=t).getBody()).fold(pt("tree"===r.format?new rr("body",11):""),o=>((t,e,n)=>{let r;return r="raw"===e.format?dt.trim($N(t.serializer,n.innerHTML)):"text"===e.format?((o,s)=>{const a=o.getDoc(),i=Te(O(o.getBody())),l=X("div",a);Xe(l,"data-mce-bogus","all"),ms(l,{position:"fixed",left:"-9999999px",top:"0"}),an(l,s.innerHTML),Av(l),Rv(l);const c=Hr(f=i)?f:O(zn(f).dom.body);var f;_t(c,l);const u=Go(l.dom.innerText);return Mt(l),u})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((o,s)=>{const a=er(o),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!fc(O(n))&&Dt(r)?dt.trim(r):r})(n,r,o));var n,r},setContent:(e,n)=>{return o=e,s=n,E.from((r=t).getBody()).map(a=>ed(o)?((i,l,c,u)=>{wb(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const f=Es({validate:!1},i.schema).serialize(c),p=fc(O(l))?f:dt.trim(f);return dm(i,p,u.no_selection),{content:c,html:p}})(r,a,o,s):((i,l,c,u)=>{if(0===c.length||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const p=er(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),p.toLowerCase())?(c=f,c=i.dom.createHTML(p,tl(i),c)):c||(c=f),dm(i,c,u.no_selection),{content:c,html:c}}{"raw"!==u.format&&(c=Es({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const f=fc(O(l))?c:dt.trim(c);return dm(i,f,u.no_selection),{content:f,html:f}}})(r,a,o,s)).getOr({content:o,html:ed(s.content)?"":s.content});var r,o,s},insertContent:(e,n)=>y_(t,e,n),addVisual:e=>((n,r)=>{const o=n.dom,s=mt(r)?r:n.getBody();rt(o.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=xE(n),l=o.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?o.removeClass(a,i):o.addClass(a,i);break;case"A":if(!o.getAttrib(a,"href")){const c=o.getAttrib(a,"name")||a.id,u=Hh(n);c&&n.hasVisual?o.addClass(a,u):o.removeClass(a,u)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((r,o,s={})=>{const a=(i=s,l=o,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return jy(r,a).fold(ue,i=>{const l=((c,u)=>{if("text"===u.format)return E.from((f=c).selection.getRng()).map(p=>{var v;const g=E.from(f.dom.getParent(p.commonAncestorContainer,f.dom.isBlock)),b=f.getBody(),h=g.map(D=>D.nodeName).getOr("div").toLowerCase(),C=O(p.cloneContents());Av(C),Rv(C);const S=f.dom.add(b,h,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},C.dom),k=Ky(S),A=Go(null!==(v=S.textContent)&&void 0!==v?v:"");if(f.dom.remove(S),cd(A,0)||cd(A,A.length-1)){const R=g.getOr(b),D=Ky(R),P=D.indexOf(k);return-1===P?k:(cd(D,P-1)?" ":"")+k+(cd(D,P+k.length)?" ":"")}return k}).getOr("");var f;{const f=((p,v)=>{const g=p.selection.getRng(),b=p.dom.create("body"),h=p.selection.getSel(),C=Lf(p,af(h)),S=v.contextual?((t,e)=>{const n=C0(e,t);return n.length>0?((t,e)=>{return(n=t,r=e[0],fs(r,"table",St(de,n))).bind(n=>{const r=e[0],o=e[e.length-1],s=(a=>{const i=Mm(ta(a),0,[]);return rt(Dn(a,"tr"),(l,c)=>{rt(Dn(l,"td,th"),(u,f)=>{((p,v,g,b,h)=>{const C=Uy(h,"rowspan"),S=Uy(h,"colspan"),k=p.rows;for(let A=g;A<g+C;A++){k[A]||(k[A]=Hy(Yg(b),[]));for(let R=v;R<v+S;R++)k[A].cells[R]=A===g&&R===v?h:ta(h)}})(i,((p,v,g)=>{for(;oA(p,v,g);)v++;return v})(i,f,c),c,l,u)})}),Mm(i.element,qy(i.rows),i.rows)})(n);return(a=s,i=r,l=o,$y(a,i).bind(c=>$y(a,l).map(u=>((f,p,v)=>{const g=p.x,b=p.y,h=v.x,C=v.y,S=b<C?Wy(f,g,b,h,C):Wy(f,g,C,h,b);return Mm(f.element,qy(S),S)})(a,c,u)))).map(a=>wf([sA(a)]));var a,i,l}).getOrThunk(Vy);var n,r})(t,n):(r=t,(o=e).length>0&&o[0].collapsed?Vy():(s=r,((i,l)=>{const c=bn(l,(u,f)=>(_t(f,u),f),i);return l.length>0?wf([c]):c})(O((a=o[0]).cloneContents()),((t,e)=>{const n=O(e.commonAncestorContainer),r=Jo(n,t),o=$t(r,WS),s=(l=e,qe(i=r,c=>"li"===Ee(c)&&cf(c,l)).fold(pt([]),c=>{return(u=i,qe(u,f=>"ul"===Ee(f)||"ol"===Ee(f))).map(u=>{const f=X(Ee(u)),p=xr(et(u),(v,g)=>Je(g,"list-style"));return ms(f,p),[X("li"),f]}).getOr([]);var u})),a=o.concat(s.length?s:(i=>ji(i)?xe(i).filter(gu).fold(pt([]),l=>[i,l]):gu(i)?[i]:[])(n));var i,l;return re(a,ta)})(s,a))));var r,o,s,a})(O(p.getBody()),C).dom:g.cloneContents();return S&&b.appendChild(S),p.selection.serializer.serialize(b,v)})(c,u);return"tree"===u.format?f:c.selection.isCollapsed()?"":f}})(r,i);return zy(r,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(kv(O(t.getBody())).isNone()){const r=st('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());_t(r,O(e.extractContents())),e.insertNode(r.dom),xe(r).each(o=>o.dom.normalize()),(n=r,((o,s)=>{const a=i=>{const l=Me(i);for(let c=l.length-1;c>=0;c--){const u=l[c];if(s(u))return E.some(u);const f=a(u);if(f.isSome())return f}return E.none()};return a(o)})(n,wv)).map(o=>{var s;t.selection.setCursorLocation(o.dom,"img"===Ee(s=o)?1:mg(s).fold(()=>Me(s).length,a=>a.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=O(t.getBody()),kv(n).each(r=>{const o=e.selection.getBookmark();me(r),e.selection.moveToBookmark(o)});var e,n}},raw:{getModel:()=>E.none()}}),Do=t=>Zt(t.plugins,"rtc"),Hm=t=>t.rtcInstance?t.rtcInstance:Qy(t),Ue=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},Jy=t=>Ue(t).init.bindEvents(),Zy=t=>0===t.dom.length?(Mt(t),E.none()):E.some(t),t1=(t,e,n,r)=>{t.bind(o=>((r?Wf:Qc)(o.dom,r?o.dom.length:0),e.filter(Yn).map(s=>((a,i,l,c)=>{const u=a.dom,f=i.dom,p=c?u.length:f.length;c?(Vf(u,f,!1,!c),l.setStart(f,p)):(Vf(f,u,!1,!c),l.setEnd(f,p))})(o,s,n,r)))).orThunk(()=>{return(s=e,a=r,s.filter(i=>fl.isBookmarkNode(i.dom)).bind(a?Zr:Rn)).or(e).filter(Yn).map(s=>((a,i)=>{xe(a).each(l=>{const c=a.dom;i&&vl(l,G(c,0))?Qc(c,0):!i&&bl(l,G(c,c.length))&&Wf(c,c.length)})})(s,r));var s,a})},e1=(t,e,n)=>{if(Zt(t,e)){const r=$t(t[e],o=>o!==n);0===r.length?delete t[e]:t[e]=r}},n1=t=>!(!t||!t.ownerDocument)&&gn(O(t.ownerDocument),O(t)),r1=(t,e,n,r)=>{let o,s;const{selectorChangedWithUnbind:a}=((h,C)=>{let S,k;const A=(D,P)=>qe(P,U=>h.is(U,D)),R=D=>h.getParents(D,void 0,h.getRoot());return{selectorChangedWithUnbind:(D,P)=>(S||(S={},k={},C.on("NodeChange",U=>{const Y=U.element,V=R(Y),L={};Se(S,(z,I)=>{A(I,V).each($=>{k[I]||(rt(z,gt=>{gt(!0,{node:$,selector:I,parents:V})}),k[I]=z),L[I]=z})}),Se(k,(z,I)=>{L[I]||(delete k[I],rt(z,$=>{$(!1,{node:Y,selector:I,parents:V})}))})})),S[D]||(S[D]=[]),S[D].push(P),A(D,R(C.selection.getStart())).each(()=>{k[D]=S[D]}),{unbind:()=>{e1(S,D,P),e1(k,D,P)}})}})(t,r),i=(h,C)=>((S,k,A={})=>{const R=(D=A,P=k,{format:"html",...D,set:!0,selection:!0,content:P});var D,P;Pm(S,R).each(D=>{const P=((Y,V)=>{if("raw"!==V.format){const L=Y.selection.getRng(),z=Y.dom.getParent(L.commonAncestorContainer,Y.dom.isBlock),I=z?{context:z.nodeName.toLowerCase()}:{},$=Y.parser.parse(V.content,{forced_root_block:!1,...I,...V});return Es({validate:!1},Y.schema).serialize($)}return V.content})(S,D),U=S.selection.getRng();((Y,V)=>{const L=E.from(V.firstChild).map(O),z=E.from(V.lastChild).map(O);Y.deleteContents(),Y.insertNode(V);const I=L.bind(Rn).filter(Yn).bind(Zy),$=z.bind(Zr).filter(Yn).bind(Zy);t1(I,L,Y,!0),t1($,z,Y,!1),Y.collapse(!1)})(U,U.createContextualFragment(P)),S.selection.setRng(U),pl(S,U),Lm(S,P,D)})})(r,h,C),l=h=>{const C=u();C.collapse(!!h),f(C)},c=()=>e.getSelection?e.getSelection():e.document.selection,u=()=>{let h;const C=(k,A,R)=>{try{return A.compareBoundaryPoints(k,R)}catch{return-1}},S=e.document;if(mt(r.bookmark)&&!ua(r)){const k=Rf(r);if(k.isSome())return k.map(A=>Lf(r,[A])[0]).getOr(S.createRange())}try{const k=c();k&&!ic(k.anchorNode)&&(h=k.rangeCount>0?k.getRangeAt(0):S.createRange(),h=Lf(r,[h])[0])}catch{}if(h||(h=S.createRange()),Fi(h.startContainer)&&h.collapsed){const k=t.getRoot();h.setStart(k,0),h.setEnd(k,0)}return o&&s&&(0===C(h.START_TO_START,h,o)&&0===C(h.END_TO_END,h,o)?h=s:(o=null,s=null)),h},f=(h,C)=>{if(!((k=h)&&n1(k.startContainer)&&n1(k.endContainer)))return;var k;const S=c();if(h=r.dispatch("SetSelectionRange",{range:h,forward:C}).range,S){s=h;try{S.removeAllRanges(),S.addRange(h)}catch{}!1===C&&S.extend&&(S.collapse(h.endContainer,h.endOffset),S.extend(h.startContainer,h.startOffset)),o=S.rangeCount>0?S.getRangeAt(0):null}if(!h.collapsed&&h.startContainer===h.endContainer&&S?.setBaseAndExtent&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()){const k=h.startContainer.childNodes[h.startOffset];k&&"IMG"===k.nodeName&&(S.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),S.anchorNode===h.startContainer&&S.focusNode===h.endContainer||S.setBaseAndExtent(k,0,k,1))}r.dispatch("AfterSetSelectionRange",{range:h,forward:C})},p=()=>{const h=c(),C=h?.anchorNode,S=h?.focusNode;if(!h||!C||!S||ic(C)||ic(S))return!0;const k=t.createRng(),A=t.createRng();try{k.setStart(C,h.anchorOffset),k.collapse(!0),A.setStart(S,h.focusOffset),A.collapse(!0)}catch{return!0}return k.compareBoundaryPoints(k.START_TO_START,A)<=0},v={dom:t,win:e,serializer:n,editor:r,expand:(h={type:"word"})=>f(da(t).expand(u(),h)),collapse:l,setCursorLocation:(h,C)=>{const S=t.createRng();mt(h)&&mt(C)?(S.setStart(h,C),S.setEnd(h,C),f(S),l(!1)):(df(t,S,r.getBody(),!0),f(S))},getContent:h=>((C,S={})=>{return A=S.format?S.format:"html",R=S,Ue(C).selection.getContent(A,R);var A,R})(r,h),setContent:i,getBookmark:(h,C)=>g.getBookmark(h,C),moveToBookmark:h=>g.moveToBookmark(h),select:(h,C)=>{return(S=t,k=h,A=C,E.from(k).bind(R=>E.from(R.parentNode).map(D=>{const P=S.nodeIndex(R),U=S.createRng();return U.setStart(D,P),U.setEnd(D,P+1),A&&(df(S,U,R,!0),df(S,U,R,!1)),U}))).each(f),h;var S,k,A},isCollapsed:()=>{const h=u(),C=c();return!(!h||h.item)&&(h.compareEndPoints?0===h.compareEndPoints("StartToEnd",h):!C||h.collapsed)},isEditable:()=>{const h=u(),C=r.getBody().querySelectorAll('[data-mce-selected="1"]');return C.length>0?mr(C,S=>t.isEditable(S.parentElement)):h.startContainer===h.endContainer?t.isEditable(h.startContainer):t.isEditable(h.startContainer)&&t.isEditable(h.endContainer)},isForward:p,setNode:h=>(i(t.getOuterHTML(h)),h),getNode:()=>((h,C)=>{if(!C)return h;let S=C.startContainer,k=C.endContainer;const A=C.startOffset,R=C.endOffset;let D=C.commonAncestorContainer;C.collapsed||(S===k&&R-A<2&&S.hasChildNodes()&&(D=S.childNodes[A]),lt(S)&&lt(k)&&(S=S.length===A?xv(S.nextSibling,!0):S.parentNode,k=0===R?xv(k.previousSibling,!1):k.parentNode,S&&S===k&&(D=S)));const P=lt(D)?D.parentNode:D;return xt(P)?P:h})(r.getBody(),u()),getSel:c,setRng:f,getRng:u,getStart:h=>yv(r.getBody(),u(),h),getEnd:h=>Cv(r.getBody(),u(),h),getSelectedBlocks:(h,C)=>((S,k,A,R)=>{const D=[],P=S.getRoot(),U=S.getParent(A||yv(P,k,k.collapsed),S.isBlock),Y=S.getParent(R||Cv(P,k,k.collapsed),S.isBlock);if(U&&U!==P&&D.push(U),U&&Y&&U!==Y){let V;const L=new en(U,P);for(;(V=L.next())&&V!==Y;)S.isBlock(V)&&D.push(V)}return Y&&U!==Y&&Y!==P&&D.push(Y),D})(t,u(),h,C),normalize:()=>{const h=u(),C=c();if(!(af(C).length>1)&&Fc(r)){const S=Wc(t,h);return S.each(k=>{f(k,p())}),S.getOr(h)}return h},selectorChanged:(h,C)=>(a(h,C),v),selectorChangedWithUnbind:a,getScrollContainer:()=>{let h,C=t.getRoot();for(;C&&"BODY"!==C.nodeName;){if(C.scrollHeight>C.clientHeight){h=C;break}C=C.parentNode}return h},scrollIntoView:(h,C)=>{var S;mt(h)?((S=r).inline?ON:BN)(S,h,C):pl(r,u(),C)},placeCaretAt:(h,C)=>f(J0(h,C,r.getDoc())),getBoundingClientRect:()=>{const h=u();return h.collapsed?G.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:()=>{e=o=s=null,b.destroy()}},g=fl(v),b=K0(v,r);return v.bookmarkManager=g,v.controlSelection=b,v},uA=(t,e,n)=>{-1===dt.inArray(e,n)&&(t.addAttributeFilter(n,(r,o)=>{let s=r.length;for(;s--;)r[s].attr(o,null)}),e.push(n))},o1=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,...t},o=e&&e.dom?e.dom:we.DOM,s=e&&e.schema?e.schema:ys(r),a=oi(r,s);return l=r,c=o,(i=a).addAttributeFilter("data-mce-tabindex",(u,f)=>{let p=u.length;for(;p--;){const v=u[p];v.attr("tabindex",v.attr("data-mce-tabindex")),v.attr(f,null)}}),i.addAttributeFilter("src,href,style",(u,f)=>{const p="data-mce-"+f,v=l.url_converter,g=l.url_converter_scope;let b=u.length;for(;b--;){const h=u[b];let C=h.attr(p);void 0!==C?(h.attr(f,C.length>0?C:null),h.attr(p,null)):(C=h.attr(f),"style"===f?C=c.serializeStyle(c.parseStyle(C),h.name):v&&(C=v.call(g,C,f,h.name)),h.attr(f,C.length>0?C:null))}}),i.addAttributeFilter("class",u=>{let f=u.length;for(;f--;){const p=u[f];let v=p.attr("class");v&&(v=v.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),p.attr("class",v.length>0?v:null))}}),i.addAttributeFilter("data-mce-type",(u,f,p)=>{let v=u.length;for(;v--;){const g=u[v];"bookmark"===g.attr("data-mce-type")&&!p.cleanup&&(E.from(g.firstChild).exists(h=>{var C;return!pc(null!==(C=h.value)&&void 0!==C?C:"")})?g.unwrap():g.remove())}}),i.addNodeFilter("noscript",u=>{var f;let p=u.length;for(;p--;){const v=u[p].firstChild;v&&(v.value=bs.decode(null!==(f=v.value)&&void 0!==f?f:""))}}),i.addNodeFilter("script,style",(u,f)=>{var p;const v=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=u.length;for(;g--;){const b=u[g],h=b.firstChild,C=null!==(p=h?.value)&&void 0!==p?p:"";if("script"===f){const S=b.attr("type");S&&b.attr("type","mce-no/type"===S?null:S.replace(/^mce\-/,"")),"xhtml"===l.element_format&&h&&C.length>0&&(h.value="// <![CDATA[\n"+v(C)+"\n// ]]>")}else"xhtml"===l.element_format&&h&&C.length>0&&(h.value="\x3c!--\n"+v(C)+"\n--\x3e")}}),i.addNodeFilter("#comment",u=>{let f=u.length;for(;f--;){const p=u[f],v=p.value;l.preserve_cdata&&0===v?.indexOf("[CDATA[")?(p.name="#cdata",p.type=4,p.value=c.decode(v.replace(/^\[CDATA\[|\]\]$/g,""))):0===v?.indexOf("mce:protected ")&&(p.name="#text",p.type=3,p.raw=!0,p.value=unescape(v).substr(14))}}),i.addNodeFilter("xml:namespace,input",(u,f)=>{let p=u.length;for(;p--;){const v=u[p];7===v.type?v.remove():1===v.type&&("input"!==f||v.attr("type")||v.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",u=>{rt(u,f=>{"format-caret"===f.attr("data-mce-type")&&(f.isEmpty(i.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(u,f)=>{let p=u.length;for(;p--;)u[p].attr(f,null)}),l.remove_trailing_brs&&gy(i,i.schema),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},u=(g=i,C=b=c,mt(h=v=e)&&h.hasEventListeners("PreProcess")&&!C.no_events?((h,C,S)=>{let k;const A=h.dom;let R=C.cloneNode(!0);const D=document.implementation;if(D.createHTMLDocument){const P=D.createHTMLDocument("");dt.each("BODY"===R.nodeName?R.childNodes:[R],U=>{P.body.appendChild(P.importNode(U,!0))}),R="BODY"!==R.nodeName?P.body.firstChild:P.body,k=A.doc,A.doc=P}return U={...S,node:R},h.dispatch("PreProcess",U),k&&(A.doc=k),R;var U})(v,g,b):g),f=((v,g,b)=>{const h=Go(b.getInner?g.innerHTML:v.getOuterHTML(g));return b.selection||fc(O(g))?h:dt.trim(h)})(o,u,c),p=((v,g,b)=>{const h=b.selection?{forced_root_block:!1,...b}:b,C=v.parse(g,h);return(S=>{const k=R=>"br"===R?.name,A=S.lastChild;if(k(A)){const R=A.prev;k(R)&&(A.remove(),R.remove())}})(C),C})(a,f,c);var v,g,b,h,C;return"tree"===c.format?p:((v,g,b,h,C)=>{var R;return((k,A,R)=>{return!A.no_events&&k?(P=k,U={...A,content:R},P.dispatch("PostProcess",U)).content:R;var P,U})(v,C,(R=h,Es(g,b).serialize(R)))})(e,r,s,p,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:St(uA,a,n),getTempAttrs:pt(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var i,l,c})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Um=(t,e,n={})=>{const r=(o=n,s=e,{format:"html",...o,set:!0,content:s});var o,s;return Pm(t,r).map(o=>{const s=(i=o.content,l=o,Hm(t).editor.setContent(i,l));var i,l;return Lm(t,s.html,o),s.content}).getOr(e)},mA="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),pA="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),gA="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),s1=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],a1=(t,e)=>{const n=$t(e,r=>Zt(t,r));return zo(n)},i1=(t,e)=>{const n=dt.makeMap(t.plugins," "),r=$t(e,o=>Zt(n,o));return zo(r)},CA=t=>qe(s1,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),fd=we.DOM,md=t=>E.from(t).each(e=>e.destroy()),pd=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>Zt(t,e)}})(),si=Hn.ModelManager,l1=(t,e)=>e.dom[t],c1=(t,e)=>parseInt(kr(e,t),10),xA=St(l1,"clientWidth"),wA=St(l1,"clientHeight"),SA=St(c1,"margin-top"),kA=St(c1,"margin-left"),d1=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},r=()=>E.from(e[0]),o=()=>{rt(e,l=>{l.reposition()})},s=l=>{Ms(e,c=>c===l).each(c=>{e.splice(c,1)})},a=(l,c=!0)=>{return t.removed||!(f=(u=t).inline?u.getBody():u.getContentAreaContainer(),E.from(f).map(O)).map(eo).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),qe(e,u=>{return!((f=n().getArgs(u)).type!==(p=l).type||f.text!==p.text||f.progressBar||f.timeout||p.progressBar||p.timeout);var f,p}).getOrThunk(()=>{t.editorManager.setActive(t);const u=n().open(l,()=>{s(u),o(),r().fold(()=>t.focus(),f=>uv(O(f.getEl())))});return(f=>{e.push(f)})(u),o(),t.dispatch("OpenNotification",{notification:{...u}}),u}));var u,f},i=pt(e);return(l=t).on("SkinLoaded",()=>{const c=rE(l);c&&a({text:c,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{rt(e.slice(),c=>{n().close(c)})}),{open:a,close:()=>{r().each(l=>{n().close(l),s(l),o()})},getNotifications:i};var l},ai=Hn.PluginManager,ba=Hn.ThemeManager,u1=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},r=(a,i)=>(...l)=>i?i.apply(a,l):void 0,o=a=>{t.dispatch("CloseWindow",{dialog:a}),e=$t(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),Af(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{rt(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,o)),openUrl:a=>s(()=>n().openUrl(a,o)),alert:(a,i,l)=>{const c=n();c.alert(a,r(l||c,i))},confirm:(a,i,l)=>{const c=n();c.confirm(a,r(l||c,i))},close:()=>{E.from(e[e.length-1]).each(a=>{n().close(a),o(a)})}}},f1=(t,e)=>{t.notificationManager.open({type:"error",text:e})},gd=(t,e)=>{t._skinLoaded?f1(t,e):t.on("SkinLoaded",()=>{f1(t,e)})},kl=(t,e,n)=>{z0(t,e,{message:n}),console.error(n)},El=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,hd=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},m1=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",r=`content${t.editorManager.suffix}.css`;return re(e,o=>/^[a-z0-9\-]+$/i.test(o)&&!t.inline?`${n}/${o}/${r}`:t.documentBaseURI.toAbsolute(o))},p1=()=>{let t={};const e=(r,o)=>({status:r,resultUri:o}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{const o=t[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:r=>{t[r]=e(1,null)},markUploaded:(r,o)=>{t[r]=e(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}};let NA=0;const g1=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),h1=(t,e)=>((t,e)=>{const n={},r=(l,c)=>new Promise((u,f)=>{const p=new XMLHttpRequest;p.open("POST",e.url),p.withCredentials=e.credentials,p.upload.onprogress=g=>{c(g.loaded/g.total*100)},p.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+p.status)},p.onload=()=>{if(p.status<200||p.status>=300)return void f("HTTP Error: "+p.status);const g=JSON.parse(p.responseText);var b,h;g&&Dt(g.location)?u((h=g.location,(b=e.basePath)?b.replace(/\/$/,"")+"/"+h.replace(/^\//,""):h)):f("Invalid JSON: "+p.responseText)};const v=new FormData;v.append("file",l.blob(),l.filename()),p.send(v)}),o=pe(e.handler)?e.handler:r,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{dt.each(n[l],u=>{u(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||o!==r?(f=c,u=dt.grep(u=l,p=>!t.isUploaded(p.blobUri())),Promise.all(dt.map(u,p=>{return t.isPending(p.blobUri())?(v=>{const g=v.blobUri();return new Promise(b=>{n[g]=n[g]||[],n[g].push(b)})})(p):(g=o,b=f,t.markPending((v=p).blobUri()),new Promise(h=>{let C,S;try{const k=()=>{C&&(C.close(),S=Nt)},A=D=>{k(),t.markUploaded(v.blobUri(),D),i(v.blobUri(),s(v,D)),h(s(v,D))},R=D=>{k(),t.removeFailed(v.blobUri()),i(v.blobUri(),a(v,D)),h(a(v,D))};S=D=>{D<0||D>100||E.from(C).orThunk(()=>E.from(b).map(ho)).each(P=>{C=P,P.progressBar.value(D)})},g(v,S).then(A,D=>{R(Dt(D)?{message:D}:D)})}catch(k){h(a(v,k))}}));var v,g,b}))):new Promise(u=>{u([])});var u,f}}})(e,{url:$k(t),basePath:Wk(t),credentials:Vk(t),handler:Kk(t)}),v1={remove_similar:!0,inherit:!1},ii={selector:"td,th",...v1},RA={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ii},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ii},tablecellbordercolor:{styles:{borderColor:"%value"},...ii},tablecellclass:{classes:["%value"],...ii},tableclass:{selector:"table",classes:["%value"],...v1},tablecellborderstyle:{styles:{borderStyle:"%value"},...ii},tablecellborderwidth:{styles:{borderWidth:"%value"},...ii}},TA=pt(RA),vd=dt.each,Dr=we.DOM,qm=t=>mt(t)&&Vt(t),b1=(t,e)=>{const n=e&&e.schema||ys({}),r=a=>{const i=Dt(a)?{name:a,classes:[],attrs:{}}:a,l=Dr.create(i.name);return c=l,(u=i).classes.length>0&&Dr.addClass(c,u.classes.join(" ")),Dr.setAttribs(c,u.attrs),l;var c,u},o=(a,i,l)=>{let c;const u=i[0],f=qm(u)?u.name:void 0,p=((b,h)=>{const C=n.getElementRule(b.nodeName.toLowerCase()),S=C?.parentsRequired;return!(!S||!S.length)&&(h&&Tt(S,h)?h:S[0])})(a,f);if(p)f===p?(c=u,i=i.slice(1)):c=p;else if(u)c=u,i=i.slice(1);else if(!l)return a;const v=c?r(c):Dr.create("div");v.appendChild(a),l&&dt.each(l,b=>{const h=r(b);v.insertBefore(h,a)});const g=qm(c)?c.siblings:void 0;return o(v,i,g)},s=Dr.create("div");if(t.length>0){const a=t[0],i=r(a),l=qm(a)?a.siblings:void 0;s.appendChild(o(i,t.slice(1),l))}return s},OA=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=dt.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,s,a,i)=>{switch(o){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==dt.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},DA=(t,e)=>{let n="",r=iE(t);if(""===r)return"";const o=v=>Dt(v)?v.replace(/%(\w+)/g,""):"",s=(v,g)=>Dr.getStyle(g??t.getBody(),v,!0);if(Dt(e)){const v=t.formatter.get(e);if(!v)return"";e=v[0]}if("preview"in e){const v=e.preview;if(!1===v)return"";r=v||r}let a,i=e.block||e.inline||"span";const l=Dt(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),dt.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),v=>{const g=dt.map(v.split(/(?:~\+|~|\+)/),OA),b=g.pop();return g.length&&(b.siblings=g),b}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=b1(l,t)):a=b1([i],t);const u=Dr.select(i,a)[0]||a.firstChild;vd(e.styles,(v,g)=>{const b=o(v);b&&Dr.setStyle(u,g,b)}),vd(e.attributes,(v,g)=>{const b=o(v);b&&Dr.setAttrib(u,g,b)}),vd(e.classes,v=>{const g=o(v);Dr.hasClass(u,g)||Dr.addClass(u,g)}),t.dispatch("PreviewFormats"),Dr.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const f=s("fontSize"),p=/px$/.test(f)?parseInt(f,10):0;return vd(r.split(" "),v=>{let g=s(v,u);if(!("background-color"===v&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(v),"#ffffff"===Ic(g).toLowerCase())||"color"===v&&"#000000"===Ic(g).toLowerCase())){if("font-size"===v&&/em|%$/.test(g)){if(0===p)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*p+"px"}"border"===v&&g&&(n+="padding:0 2px;"),n+=v+":"+g+";"}}),t.dispatch("AfterPreviewFormats"),Dr.remove(a),n},y1=t=>{const e=(r=>{const o={},s=(a,i)=>{a&&(Dt(a)?(ct(i)||(i=[i]),rt(i,l=>{De(l.deep)&&(l.deep=!Rr(l)),De(l.split)&&(l.split=!Rr(l)||nn(l)),De(l.remove)&&Rr(l)&&!nn(l)&&(l.remove="none"),Rr(l)&&nn(l)&&(l.mixed=!0,l.block_expand=!0),Dt(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[a]=i):Se(a,(l,c)=>{s(c,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},p={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[p,u,f]:[u,p,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,p)=>xt(u)&&u.hasAttribute("href"),onformat:(u,f,p)=>{dt.each(p,(v,g)=>{i.setAttrib(u,g,v)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return null!==(f=u?.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return dt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{c[u]={block:u,remove:"all"}}),c})(r)),s(TA()),s(aE(r)),{get:a=>mt(a)?o[a]:o,has:a=>Zt(o,a),register:s,unregister:a=>(a&&o[a]&&delete o[a],o)}})(t),n=cn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(r=t).on("mouseup keydown",o=>{var s;((a,i,l)=>{const c=a.selection,u=a.getBody();vm(a,null,l),8!==i&&46!==i||!c.isCollapsed()||c.getStart().innerHTML!==ri||vm(a,aa(u,c.getStart())),37!==i&&39!==i||vm(a,aa(u,c.getStart()))})(r,o.keyCode,(s=r.selection.getRng().endContainer,lt(s)&&Fs(s.data,ln)))}),Do(t)||((r,o)=>{r.set({}),o.on("NodeChange",s=>{fy(o,s.element,r.get())}),o.on("FormatApply FormatRemove",s=>{const a=E.from(s.node).map(i=>dl(i)?i:i.startContainer).bind(i=>xt(i)?E.some(i):E.from(i.parentElement)).getOrThunk(()=>cy(o));fy(o,a,r.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,Ue(t).formatter.apply(i,l,c)},remove:(r,o,s,a)=>{var l,c,u,f;l=r,c=o,u=s,f=a,Ue(t).formatter.remove(l,c,u,f)},toggle:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,Ue(t).formatter.toggle(i,l,c)},match:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,Ue(t).formatter.match(l,c,u,f);var l,c,u,f},closest:r=>{return s=r,Ue(t).formatter.closest(s);var s},matchAll:(r,o)=>{return a=r,i=o,Ue(t).formatter.matchAll(a,i);var a,i},matchNode:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,Ue(t).formatter.matchNode(l,c,u,f);var l,c,u,f},canApply:r=>{return s=r,Ue(t).formatter.canApply(s);var s},formatChanged:(r,o,s,a)=>{return l=n,c=r,u=o,f=s,p=a,Ue(t).formatter.formatChanged(l,c,u,f,p);var l,c,u,f,p},getCssText:St(DA,t)};var r},C1=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},x1=t=>{const e=Cs(),n=cn(0),r=cn(0),o={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,Ue(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=o,c=r,u=n,f=e,p=s,v=a,Ue(t).undoManager.add(l,c,u,f,p,v);var l,c,u,f,p,v},dispatchChange:()=>{t.setDirty(!0);const s=dd(t);s.bookmark=qu(t.selection),t.dispatch("change",{level:s,lastLevel:Na(o.data,r.get()).getOrUndefined()})},undo:()=>{return a=o,i=n,l=r,Ue(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=r,i=o.data,Ue(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=o,i=r,Ue(t).undoManager.clear(a,i)},reset:()=>{var a;a=o,Ue(t).undoManager.reset(a)},hasUndo:()=>{return a=o,i=r,Ue(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=o,i=r,Ue(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=o,l=n,c=s,Ue(t).undoManager.transact(i,l,c);var i,l,c},ignore:s=>{var i,l;i=n,l=s,Ue(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,c,u,f;l=o,c=r,u=s,f=a,Ue(t).undoManager.extra(l,c,u,f)}};return Do(t)||((s,a,i)=>{const l=cn(!1),c=u=>{ud(a,!1,i),a.add({},u)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",u=>{C1(u.command)||(Yy(a,i),a.beforeChange())}),s.on("ExecCommand",u=>{C1(u.command)||c(u)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",u=>{const f=u.keyCode;if(u.isDefaultPrevented())return;const p=fe.os.isMacOS()&&"Meta"===u.key;(f>=33&&f<=36||f>=37&&f<=40||45===f||u.ctrlKey||p)&&(c(),s.nodeChanged()),46!==f&&8!==f||s.nodeChanged(),l.get()&&a.typing&&!jm(dd(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",u=>{const f=u.keyCode;if(!u.isDefaultPrevented()){if(!(f>=33&&f<=36||f>=37&&f<=40||45===f))return!(f<16||f>20)||224===f||91===f||a.typing||u.ctrlKey&&!u.altKey||u.metaKey?void((fe.os.isMacOS()?u.metaKey:u.ctrlKey&&!u.altKey)&&a.beforeChange()):(a.beforeChange(),ud(a,!0,i),a.add({},u),void l.set(!0));a.typing&&c(u)}}),s.on("mousedown",u=>{a.typing&&c(u)}),s.on("input",u=>{var f,p;u.inputType&&("insertReplacementText"===u.inputType||"insertText"===(f=u).inputType&&null===f.data||"insertFromPaste"===(p=u).inputType||"insertFromDrop"===p.inputType)&&c(u)}),s.on("AddUndo Undo Redo ClearUndos",u=>{u.isDefaultPrevented()||s.nodeChanged()})})(t,o,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),o;var s},BA=[9,27,kt.HOME,kt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,kt.DOWN,kt.UP,kt.LEFT,kt.RIGHT].concat(fe.browser.isFirefox()?[224]:[]),w1="data-mce-placeholder",S1=t=>"keydown"===t.type||"keyup"===t.type,k1=t=>{const e=t.keyCode;return e===kt.BACKSPACE||e===kt.DELETE},PA=(t,e)=>({from:t,to:e}),$m=(t,e)=>{const n=O(t),r=O(e.container());return Jc(n,r).map(o=>({block:o,position:e}))},E1=(t,e)=>Qn(e,n=>zi(n)||so(n.dom),n=>de(n,t)).filter(Cn).getOr(t),N1=t=>{const e=(n=>{const r=Me(n);return Ms(r,Er).fold(pt(r),o=>r.slice(0,o))})(t);return rt(e,Mt),e},_1=(t,e)=>{const n=Jo(e,t);return qe(n.reverse(),r=>We(r)).each(Mt)},LA=(t,e,n,r)=>{if(We(n))return hs(n),qn(n.dom);0===$t(zr(r),s=>!We(s)).length&&We(e)&&at(r,X("br"));const o=nr(n.dom,G.before(r.dom));return rt(N1(e),s=>{at(r,s)}),_1(t,e),o},MA=(t,e,n)=>{if(We(n)){if(We(e)){const s=jo((a=>{const i=(l,c)=>Ze(l).fold(()=>c,u=>uc(u)?i(u,c.concat(ta(u))):c);return i(a,[])})(n),(a,i)=>(It(a,i),i),mc());se(e),_t(e,s)}return Mt(n),qn(e.dom)}const r=$r(n.dom);return rt(N1(e),o=>{_t(n,o)}),_1(t,e),r},A1=(t,e)=>{Ya(t,e.dom).bind(n=>E.from(n.getNode())).map(O).filter(Xs).each(Mt)},R1=(t,e,n)=>{return A1(!0,e),A1(!1,n),(r=e,o=n,gn(o,r)?((s,a)=>{const i=Jo(a,s);return E.from(i[i.length-1])})(o,r):E.none()).fold(St(MA,t,e,n),St(LA,t,e,n));var r,o},T1=(t,e,n,r)=>e?R1(t,r,n):R1(t,n,r),Wm=(t,e)=>{const n=O(t.getBody());return(o=n.dom,s=e,a=t.selection.getRng(),a.collapsed?((i,l,c)=>{const u=$m(i,G.fromRangeStart(c)),f=u.bind(p=>_r(l,i,p.position).bind(v=>$m(i,v).map(g=>{return b=i,h=l,Ie((C=g).position.getNode())&&!We(C.block)?Ya(!1,C.block.dom).bind(S=>S.isEqual(C.position)?_r(h,b,S).bind(k=>$m(b,k)):E.some(C)).getOr(C):C;var b,h,C})));return pn(u,f,PA).filter(p=>{return!de((v=p).from.block,v.to.block)&&((v,g)=>{const b=O(v);return de(E1(b,g.from.block),E1(b,g.to.block))})(i,p)&&(v=>!1===Re(v.from.block.dom)&&!1===Re(v.to.block.dom))(p)&&(v=>{const g=b=>pg(b)||wu(b.dom);return g(v.from.block)&&g(v.to.block)})(p);var v})})(o,s,a):E.none()).map(o=>()=>{T1(n,e,o.from.block,o.to.block).each(s=>{t.selection.setRng(s.toRange())})});var o,s,a},O1=(t,e)=>{const n=O(e),r=St(de,t);return Sr(n,zi,r).isSome()},Vm=(t,e)=>t.selection.isCollapsed()?E.none():(t=>{const e=O(t.getBody());return((n,r)=>{const o=nr(n.dom,G.fromRangeStart(r)).isNone(),s=Un(n.dom,G.fromRangeEnd(r)).isNone();return!(O1(a=n,(i=r).startContainer)||O1(a,i.endContainer))&&o&&s;var a,i})(e,t.selection.getRng())?(n=t,E.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r)=>{const o=r.getRng();return pn(Jc(n,O(o.startContainer)),Jc(n,O(o.endContainer)),(s,a)=>de(s,a)?E.none():E.some(()=>{o.deleteContents(),T1(n,!0,s,a).each(i=>{r.setRng(i.toRange())})})).getOr(E.none())})(e,t.selection);var n})(t),Zo=(t,e,n,r,o)=>E.from(e._selectionOverrides.showCaret(t,n,r,o)),Nl=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?E.none():E.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(e)),Km=(t,e,n)=>e.collapsed?((r,o,s)=>{const a=Ju(1,r.getBody(),o),i=G.fromRangeStart(a),l=i.getNode();if(nl(l))return Zo(1,r,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(nl(c))return Zo(1,r,c,!1,!1);const u=pa(r.dom.getRoot(),i.getNode());return nl(u)?Zo(1,r,u,!1,s):E.none()})(t,e,n).getOr(e):e,FA=t=>_s(t)||gl(t),jA=t=>As(t)||hl(t),D1=(t,e,n,r,o,s)=>{var a,i;Zo(r,t,s.getNode(!o),o,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();o?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,lt(i=n)&&0===i.data.length&&a.remove(i)},Xm=(t,e)=>((n,r)=>{const o=n.selection.getRng();if(!lt(o.commonAncestorContainer))return E.none();const s=r?dn.Forwards:dn.Backwards,a=Ao(n.getBody()),i=St(Zu,r?a.next:a.prev),l=r?FA:jA,c=il(s,n.getBody(),o),u=i(c),f=u&&Or(r,u);if(!f||!Bc(c,f))return E.none();if(l(f))return E.some(()=>D1(n,o,c.getNode(),s,r,f));const p=i(f);return p&&l(p)&&Bc(f,p)?E.some(()=>D1(n,o,c.getNode(),s,r,p)):E.none()})(t,e),Gm=(t,e)=>{const n=t.getBody();return e?qn(n).filter(_s):$r(n).filter(As)},Ym=t=>{const e=t.selection.getRng();return!e.collapsed&&(Gm(t,!0).exists(n=>n.isEqual(G.fromRangeStart(e)))||Gm(t,!1).exists(n=>n.isEqual(G.fromRangeEnd(e))))},Br=Eo([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),B1=(t,e,n)=>_r(e,t,n).bind(r=>{return o=r.getNode(),mt(o)&&(zi(O(o))||ji(O(o)))||((s,a,i,l)=>{const c=u=>uc(O(u))&&!No(i,l,s);return n0(!a,i).fold(()=>n0(a,l).fold(Ce,c),c)})(t,e,n,r)?E.none():e&&Re(r.getNode())||!e&&Re(r.getNode(!0))?((s,a,i,l)=>{const c=l.getNode(!a);return Jc(O(s),O(i.getNode())).map(u=>We(u)?Br.remove(u.dom):Br.moveToElement(c)).orThunk(()=>E.some(Br.moveToElement(c)))})(t,e,n,r):e&&As(n)||!e&&_s(n)?E.some(Br.moveToPosition(r)):E.none();var o}),P1=(t,e)=>E.from(pa(t.getBody(),e)),L1=t=>{const e=t.dom,n=t.selection,r=pa(t.getBody(),n.getNode());if(so(r)&&e.isBlock(r)&&e.isEmpty(r)){const o=e.create("br",{"data-mce-bogus":"1"});e.setHTML(r,""),r.appendChild(o),n.setRng(G.before(o).toRange())}return!0},Qm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return P1(t,n).filter(Re).fold(()=>((r,o,s)=>{const a=Ju(o?1:-1,r,s),i=G.fromRangeStart(a),l=O(r);return!o&&As(i)?E.some(Br.remove(i.getNode(!0))):o&&_s(i)?E.some(Br.remove(i.getNode())):!o&&_s(i)&&Uf(l,i)?ZN(l,i).map(c=>Br.remove(c.getNode())):o&&As(i)&&Hf(l,i)?t_(l,i).map(c=>Br.remove(c.getNode())):(c=r,((p,v)=>{const g=v.getNode(!p),b=p?"after":"before";return xt(g)&&g.getAttribute("data-mce-caret")===b})(u=o,f=i)?(p=u,v=f.getNode(!u),ye(v)?E.none():p&&Re(v.nextSibling)?E.some(Br.moveToElement(v.nextSibling)):!p&&Re(v.previousSibling)?E.some(Br.moveToElement(v.previousSibling)):E.none()).orThunk(()=>B1(c,u,f)):B1(c,u,f).bind(p=>((v,g,b)=>b.fold(h=>E.some(Br.remove(h)),h=>E.some(Br.moveToElement(h)),h=>No(g,h,v)?E.none():E.some(Br.moveToPosition(h))))(c,f,p)));var c,u,f,p,v})(t.getBody(),e,t.selection.getRng()).map(r=>()=>{return r.fold((o=t,s=e,a=>(o._selectionOverrides.hideFakeCaret(),fa(o,s,O(a)),!0)),((o,s)=>a=>{const i=s?G.before(a):G.after(a);return o.selection.setRng(i.toRange()),!0})(t,e),(o=>s=>(o.selection.setRng(s.toRange()),!0))(t));var o,s}),()=>E.some(Nt))})(t,e):((n,r)=>{const o=n.selection.getNode();return Re(o)&&!cc(o)?P1(n,o.parentNode).filter(Re).fold(()=>E.some(()=>{var s;s=O(n.getBody()),rt(Dn(s,".mce-offscreen-selection"),Mt),fa(n,r,O(n.selection.getNode())),Xf(n)}),()=>E.some(Nt)):Ym(n)?E.some(()=>{cb(n,n.selection.getRng(),O(n.getBody()))}):E.none()})(t,e),Jm=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=G.fromRangeStart(n.selection.getRng());return _r(r,n.getBody(),o).filter(s=>r?XN(s):GN(s)).bind(s=>Qu(r?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):E.none(),li=lt,M1=t=>li(t)&&t.data[0]===Bn,I1=t=>li(t)&&t.data[t.data.length-1]===Bn,F1=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(Bn)},bd=(t,e)=>t?(n=>{var r;if(li(n.previousSibling))return I1(n.previousSibling)||n.previousSibling.appendData(Bn),n.previousSibling;if(li(n))return M1(n)||n.insertData(0,Bn),n;{const o=F1(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(e):(n=>{var r,o;if(li(n.nextSibling))return M1(n.nextSibling)||n.nextSibling.insertData(0,Bn),n.nextSibling;if(li(n))return I1(n)||n.appendData(Bn),n;{const s=F1(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(s,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(s),s}})(e),HA=St(bd,!0),UA=St(bd,!1),j1=(t,e)=>lt(t.container())?bd(e,t.container()):bd(e,t.getNode()),z1=(t,e)=>{const n=e.get();return n&&t.container()===n&&vs(n)},Zm=(t,e)=>e.fold(n=>{oa(t.get());const r=HA(n);return t.set(r),E.some(G(r,r.length-1))},n=>qn(n).map(r=>{if(z1(r,t)){const o=t.get();return G(o,1)}{oa(t.get());const o=j1(r,!0);return t.set(o),G(o,1)}}),n=>$r(n).map(r=>{if(z1(r,t)){const o=t.get();return G(o,o.length-1)}{oa(t.get());const o=j1(r,!1);return t.set(o),G(o,o.length-1)}}),n=>{oa(t.get());const r=UA(n);return t.set(r),E.some(G(r,1))}),H1=(t,e)=>{for(let n=0;n<t.length;n++){const r=t[n].apply(null,e);if(r.isSome())return r}return E.none()},$n=Eo([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),U1=(t,e)=>Ss(e,t)||t,qA=(t,e,n)=>{const r=ob(n),o=U1(e,r.container());return Rs(t,o,r).fold(()=>Un(o,r).bind(St(Rs,t,o)).map(s=>$n.before(s)),E.none)},$A=(t,e)=>null===aa(t,e),q1=(t,e,n)=>Rs(t,e,n).filter(St($A,e)),WA=(t,e,n)=>{const r=sb(n);return q1(t,e,r).bind(o=>nr(o,r).isNone()?E.some($n.start(o)):E.none())},VA=(t,e,n)=>{const r=ob(n);return q1(t,e,r).bind(o=>Un(o,r).isNone()?E.some($n.end(o)):E.none())},KA=(t,e,n)=>{const r=sb(n),o=U1(e,r.container());return Rs(t,o,r).fold(()=>nr(o,r).bind(St(Rs,t,o)).map(s=>$n.after(s)),E.none)},$1=t=>!rb(tp(t)),Bo=(t,e,n)=>H1([qA,WA,VA,KA],[t,e,n]).filter($1),tp=t=>t.fold(ue,ue,ue,ue),W1=t=>t.fold(pt("before"),pt("start"),pt("end"),pt("after")),yd=t=>t.fold($n.before,$n.before,$n.after,$n.after),ep=t=>t.fold($n.start,$n.start,$n.end,$n.end),XA=(t,e,n,r,o,s)=>pn(Rs(e,n,r),Rs(e,n,o),(a,i)=>a!==i&&((l,c,u)=>{const f=Ss(c,l),p=Ss(u,l);return mt(f)&&f===p})(n,a,i)?$n.after(t?a:i):s).getOr(s),GA=(t,e)=>t.fold(Be,n=>{return o=e,!(W1(r=n)===W1(o)&&tp(r)===tp(o));var r,o}),YA=(t,e)=>t?e.fold(ir(E.some,$n.start),E.none,ir(E.some,$n.after),E.none):e.fold(E.none,ir(E.some,$n.before),E.none,ir(E.some,$n.end)),V1=(t,e,n)=>{const r=t?1:-1;return e.setRng(G(n.container(),n.offset()+r).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Po;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Po||(Po={}));const Cd=(t,e)=>t===dn.Backwards?Xr(e):e,QA=(t,e,n)=>t===dn.Forwards?e.next(n):e.prev(n),JA=(t,e,n,r)=>Ie(r.getNode(e===dn.Forwards))?Po.Br:!1===No(n,r)?Po.Block:Po.Wrap,K1=(t,e,n,r)=>{const o=Ao(n);let s=r;const a=[];for(;s;){const i=QA(e,o,s);if(!i)break;if(Ie(i.getNode(!1)))return e===dn.Forwards?{positions:Cd(e,a).concat([i]),breakType:Po.Br,breakAt:E.some(i)}:{positions:Cd(e,a),breakType:Po.Br,breakAt:E.some(i)};if(i.isVisible()){if(t(s,i)){const l=JA(0,e,s,i);return{positions:Cd(e,a),breakType:l,breakAt:E.some(i)}}a.push(i),s=i}else s=i}return{positions:Cd(e,a),breakType:Po.Eol,breakAt:E.none()}},X1=(t,e,n,r)=>e(n,r).breakAt.map(o=>{const s=e(n,o).positions;return t===dn.Backwards?s.concat(o):[o].concat(s)}).getOr([]),np=(t,e)=>bn(t,(n,r)=>n.fold(()=>E.some(r),o=>pn(_n(o.getClientRects()),_n(r.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?r:o}).or(n)),E.none()),xd=(t,e)=>_n(e.getClientRects()).bind(n=>np(t,n.left)),_l=St(K1,G.isAbove,-1),Al=St(K1,G.isBelow,1),G1=St(X1,-1,_l),Y1=St(X1,1,Al),ZA=(t,e)=>xd(G1(t,e),e),tR=(t,e)=>xd(Y1(t,e),e),eR=Re,Q1=(t,e)=>Math.abs(t.left-e),J1=(t,e)=>Math.abs(t.right-e),Z1=(t,e)=>Gr(t,(n,r)=>{const o=Math.min(Q1(n,e),J1(n,e)),s=Math.min(Q1(r,e),J1(r,e));return s===o&&yn(r,"node")&&eR(r.node)||s<o?r:n}),nR=t=>{const e=n=>re(n,r=>{const o=na(r);return o.node=t,o});if(xt(t))return e(t.getClientRects());if(lt(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},tC=t=>rn(t,nR);var Rl;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Rl||(Rl={}));const eC=(t,e,n,r,o,s)=>{let a=0;const i=[],l=f=>{let p=tC([f]);-1===t&&(p=p.reverse());for(let v=0;v<p.length;v++){const g=p[v];if(!n(g,c)){if(i.length>0&&e(g,Ir(i))&&a++,g.line=a,o(g))return!0;i.push(g)}}return!1},c=Ir(s.getClientRects());if(!c)return i;const u=s.getNode();return u&&(l(u),((f,p,v,g)=>{let b=g;for(;b=ol(b,f,yg,p);)if(v(b))return})(t,r,l,u)),i},rR=St(eC,Rl.Up,Yi,Qi),oR=St(eC,Rl.Down,Qi,Yi),nC=t=>Ir(t.getClientRects()),rC=t=>e=>e.line>t,rp=t=>e=>e.line===t,ts=(t,e)=>{t.selection.setRng(e),pl(t,t.selection.getRng())},op=(t,e,n)=>E.some(Km(t,e,n)),oC=(t,e,n,r,o,s)=>{const a=e===dn.Forwards,i=Ao(t.getBody()),l=St(Zu,a?i.next:i.prev),c=a?r:o;if(!n.collapsed){const g=Ec(n);if(s(g))return Zo(e,t,g,e===dn.Backwards,!1);if(Ym(t)){const b=n.cloneRange();return b.collapse(e===dn.Backwards),E.from(b)}}const u=il(e,t.getBody(),n);if(c(u))return Nl(t,u.getNode(!a));let f=l(u);const p=hg(n);if(!f)return p?E.some(n):E.none();if(f=Or(a,f),c(f))return Zo(e,t,f.getNode(!a),a,!1);const v=l(f);return v&&c(v)&&Bc(f,v)?Zo(e,t,v.getNode(!a),a,!1):p?op(t,f.toRange(),!1):E.none()},sC=(t,e,n,r,o,s)=>{const a=il(e,t.getBody(),n),i=Ir(a.getClientRects()),l=e===Rl.Down,c=t.getBody();if(!i)return E.none();if(Ym(t)){const b=l?G.fromRangeEnd(n):G.fromRangeStart(n);return(l?tR:ZA)(c,b).orThunk(()=>E.from(b)).map(h=>h.toRange())}const u=(l?oR:rR)(c,rC(1),a),f=$t(u,rp(1)),p=i.left,v=Z1(f,p);if(v&&s(v.node)){const b=Math.abs(p-v.left),h=Math.abs(p-v.right);return Zo(e,t,v.node,b<h,!1)}let g;if(g=r(a)?a.getNode():o(a)?a.getNode(!0):Ec(n),g){const b=((C,S,k,A)=>{const R=Ao(S);let D,P,U,Y;const V=[];let L=0;1===C?(D=R.next,P=Qi,U=Yi,Y=G.after(A)):(D=R.prev,P=Yi,U=Qi,Y=G.before(A));const z=nC(Y);do{if(!Y.isVisible())continue;const I=nC(Y);if(U(I,z))continue;V.length>0&&P(I,Ir(V))&&L++;const $=na(I);if($.position=Y,$.line=L,k($))return V;V.push($)}while(Y=D(Y));return V})(e,c,rC(1),g);let h=Z1($t(b,rp(1)),p);if(h||(h=Ir($t(b,rp(0))),h))return op(t,h.position.toRange(),!1)}return 0===f.length?sp(t,l).filter(l?o:r).map(b=>Km(t,b.toRange(),!1)):E.none()},sp=(t,e)=>{const n=t.selection.getRng(),r=e?G.fromRangeEnd(n):G.fromRangeStart(n),o=(s=r.container(),a=t.getBody(),Sr(O(s),i=>nN(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=Al(o,r);return yo(i.positions)}{const i=_l(o,r);return _n(i.positions)}},aC=(t,e,n)=>sp(t,e).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),wd=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},iC=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},lC=(t,e,n)=>Zm(e,n).map(r=>(wd(t,r),n)),cC=(t,e,n)=>!!el(t)&&((t,e,n)=>{const r=t.getBody(),o=((s,a,i)=>{const l=G.fromRangeStart(s);if(s.collapsed)return l;{const c=G.fromRangeEnd(s);return i?nr(a,c).getOr(c):Un(a,l).getOr(l)}})(t.selection.getRng(),r,n);return((s,a,i,l)=>{const c=Or(s,l),u=Bo(a,i,c);return Bo(a,i,c).bind(St(YA,s)).orThunk(()=>((f,p,v,g,b)=>{const h=Or(f,b);return _r(f,v,h).map(St(Or,f)).fold(()=>g.map(yd),C=>Bo(p,v,C).map(St(XA,f,p,v,h,C)).filter(St(GA,g))).filter($1)})(s,a,i,u,l))})(n,St(ma,t),r,o).bind(s=>lC(t,e,s))})(t,e,n).isSome(),dC=(t,e,n)=>!!el(e)&&((r,o)=>{const s=o.selection.getRng(),a=r?G.fromRangeEnd(s):G.fromRangeStart(s);return!!pe(o.selection.getSel().modify)&&(r&&hu(a)?V1(!0,o.selection,a):!(r||!vu(a))&&V1(!1,o.selection,a))})(t,e),iR=St(dC,!0),lR=St(dC,!1),Sd=(t,e,n)=>{if(el(t)){const r=sp(t,e).getOrThunk(()=>{const o=t.selection.getRng();return e?G.fromRangeEnd(o):G.fromRangeStart(o)});return Bo(St(ma,t),t.getBody(),r).exists(o=>{const s=yd(o);return Zm(n,s).exists(a=>(wd(t,a),!0))})}return!1},uC=(t,e)=>n=>Zm(e,n).map(r=>()=>wd(t,r)),fC=(t,e,n,r)=>{const o=t.getBody(),s=St(ma,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,r)),Kf(t),Bo(s,o,G.fromRangeStart(t.selection.getRng())).map(ep).bind(uC(t,e)).each(Vn)}),t.nodeChanged()},ap=(t,e,n)=>{if(t.selection.isCollapsed()&&el(t)){const r=G.fromRangeStart(t.selection.getRng());return((o,s,a,i)=>{const l=(f=o.getBody(),p=i.container(),Ss(p,f)||f),c=St(ma,o),u=Bo(c,l,i);var f,p;return u.bind(f=>a?f.fold(pt(E.some(ep(f))),E.none,pt(E.some(yd(f))),E.none):f.fold(E.none,pt(E.some(yd(f))),E.none,pt(E.some(ep(f))))).map(uC(o,s)).getOrThunk(()=>{const f=ll(a,l,i),p=f.bind(v=>Bo(c,l,v));return pn(u,p,()=>Rs(c,l,i).bind(v=>{return pn(qn(g=v),$r(g),(b,h)=>{const C=Or(!0,b),S=Or(!1,h);return Un(g,C).forall(k=>k.isEqual(S))}).getOr(!0)?E.some(()=>{fa(o,a,O(v))}):E.none();var g})).getOrThunk(()=>p.bind(()=>f.map(v=>()=>{a?fC(o,s,i,v):fC(o,s,v,i)})))})})(t,e,n,r)}return E.none()},mC=(t,e)=>{const n=O(t.getBody()),r=O(t.selection.getStart()),o=Jo(r,n);return Ms(o,e).fold(pt(o),s=>o.slice(0,s))},cR=t=>1===wn(t),pC=(t,e)=>{const n=St(Lb,t);return rn(e,r=>n(r)?[r.dom]:[])},gC=t=>{const e=mC(t,Er);return pC(t,e)},hC=(t,e)=>{const n=t.selection.getStart(),r=((o,s)=>{const a=s.parentElement;return Ie(s)&&!Qt(a)&&o.dom.isEmpty(a)})(t,n)||Mb(O(n))?Pb(n,e):((o,s)=>{const{caretContainer:a,caretPosition:i}=Bb(s);return o.insertNode(a.dom),i})(t.selection.getRng(),e);t.selection.setRng(r.toRange())},vC=t=>lt(t.startContainer),ip=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=$t(mC(t,o=>Er(o)||wn(o)>1),cR);return yo(n).bind(r=>{const o=G.fromRangeStart(t.selection.getRng());return ib(e,o,r.dom)&&!Mb(r)?E.some(()=>((s,a,i,l)=>{const c=pC(a,l);if(0===c.length)fa(a,s,i);else{const u=Pb(i.dom,c);a.selection.setRng(u.toRange())}})(e,t,r,n)):E.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&vC(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!Qt(o)&&Lb(n,O(o))})(t,e)&&(n=>{return(o=>{const s=o.startContainer.parentNode,a=o.endContainer.parentNode;return!Qt(s)&&!Qt(a)&&s.isEqualNode(a)})(r=n)&&(o=>{const s=o.endContainer;return o.endOffset===(lt(s)?s.length:s.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(e);var n})(n)){const r=gC(n);return E.some(()=>{Kf(n),((o,s)=>{const a=Gt(s,gC(o));a.length>0&&hC(o,a)})(n,r)})}return E.none()})(t),Tl=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(vC(n)||e.dom.isEmpty(n.startContainer))&&!(t=>Sr(t,o=>Wr(o.dom),Er).isSome())(O(e.selection.getStart()))})(t)&&hC(t,[]),!0),lp=(t,e,n)=>mt(n)?E.some(()=>{t._selectionOverrides.hideFakeCaret(),fa(t,e,O(n))}):E.none(),cp=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=r?gl:hl,a=il(r?dn.Forwards:dn.Backwards,n.getBody(),n.selection.getRng());return o(a)?lp(n,r,a.getNode(!r)):E.from(Or(r,a)).filter(i=>o(i)&&Bc(a,i)).bind(i=>lp(n,r,i.getNode(!r)))})(t,e):((n,r)=>{const o=n.selection.getNode();return ko(o)?lp(n,r,o):E.none()})(t,e),dp=t=>zs(t??"").getOr(0),bC=(t,e)=>(t||"table"===Ee(e)?"margin":"padding")+("rtl"===kr(e,"direction")?"-right":"-left"),yC=t=>{const e=xC(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,mr(e,o=>{const s=bC(Lh(n),o),a=q(o,s).map(dp).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&a>0})));var n},CC=t=>gu(t)||ji(t),xC=t=>$t(ae(t.selection.getSelectedBlocks()),e=>!CC(e)&&!xe(e).exists(CC)&&Qn(e,n=>so(n.dom)||Re(n.dom)).exists(n=>so(n.dom))),wC=(t,e)=>{var n,r;const{dom:o}=t,s=Yk(t),a=null!==(r=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",i=dp(s),l=Lh(t);rt(xC(t),c=>{((u,f,p,v,g,b)=>{const h=bC(p,O(b)),C=dp(u.getStyle(b,h));if("outdent"===f){const S=Math.max(0,C-v);u.setStyle(b,h,S?S+g:"")}else u.setStyle(b,h,C+v+g)})(o,e,l,i,a,c.dom)})},SC=t=>wC(t,"outdent"),kC=t=>{if(t.selection.isCollapsed()&&yC(t)){const e=t.dom,n=t.selection.getRng(),r=G.fromRangeStart(n),o=e.getParent(n.startContainer,e.isBlock);if(null!==o&&zf(O(o),r))return E.some(()=>SC(t))}return E.none()},EC=(t,e,n)=>Kn([kC,Qm,Xm,(r,o)=>ap(r,e,o),Wm,nm,Jm,cp,Vm,ip],r=>r(t,n)).filter(r=>t.selection.isEditable()),NC=t=>void 0===t.touches||1!==t.touches.length?E.none():E.some(t.touches[0]),up=(t,e)=>Zt(t,e.nodeName),pR=(t,e)=>!!lt(e)||!!xt(e)&&!up(t.getBlockElements(),e)&&!Ar(e)&&!Ys(t,e),gR=(t,e)=>!(!lt(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!up(t,e.nextSibling))),_C=t=>t.dom.create(er(t),tl(t)),hR=t=>{const e=t.dom,n=t.selection,r=t.schema,o=r.getBlockElements(),s=n.getStart(),a=t.getBody();let i,l,c=!1;const u=er(t);if(!s||!xt(s))return;const f=a.nodeName.toLowerCase();if(!r.isValidChild(f,u.toLowerCase())||(k=o,A=a,Ae(jv(O(s),O(A)),D=>up(k,D.dom))))return;var k,A;const p=n.getRng(),{startContainer:v,startOffset:g,endContainer:b,endOffset:h}=p,C=ua(t);let S=a.firstChild;for(;S;)if(xt(S)&&ak(r,S),pR(r,S)){if(gR(o,S)){l=S,S=S.nextSibling,e.remove(l);continue}i||(i=_C(t),a.insertBefore(i,S),c=!0),l=S,S=S.nextSibling,i.appendChild(l)}else i=null,S=S.nextSibling;c&&C&&(p.setStart(v,g),p.setEnd(b,h),n.setRng(p),t.nodeChanged())},AC=(t,e,n)=>{const r=O(_C(t)),o=mc();_t(r,o),n(e,r);const s=document.createRange();return s.setStartBefore(o.dom),s.setEndBefore(o.dom),s},RC=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),vR=(t,e,n)=>function(r){const o=arguments,s=o[o.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return r;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(o[0])+'">'+t.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},TC=(t,e)=>{e.hasAttribute("data-mce-caret")&&(bu(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},bR=(t,e)=>{const n=wo(O(t.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void TC(t,n)):void(gg(n)&&(TC(t,n),t.undoManager.add()))},OC=Re,DC=(t,e,n)=>{const r=Ao(t.getBody()),o=St(Zu,1===e?r.next:r.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!o(G.fromRangeStart(n))){const a=O((i=>{const l=i.dom.create(er(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Bt(O(s),a):at(O(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},BC=(t,e)=>((n,r)=>{const o=r?dn.Forwards:dn.Backwards,s=n.selection.getRng();return(a=o,i=n,l=s,oC(i,a,l,_s,As,OC)).orThunk(()=>(DC(n,o,s),E.none()));var a,i,l})(t,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return rb(o)?!r:r})(t.selection,e)).exists(n=>(ts(t,n),!0)),PC=(t,e)=>((n,r)=>{const o=r?1:-1,s=n.selection.getRng();return(a=o,i=n,l=s,sC(i,a,l,c=>_s(c)||Iv(c),c=>As(c)||Fv(c),OC)).orThunk(()=>(DC(n,o,s),E.none()));var a,i,l})(t,e).exists(n=>(ts(t,n),!0)),LC=(t,e)=>aC(t,e,e?As:_s),kd=(t,e)=>Gm(t,!e).map(n=>{const r=n.toRange(),o=t.selection.getRng();return e?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(ts(t,n),!0)),yR=t=>Tt(["figcaption"],Ee(t)),MC=(t,e)=>!!t.selection.isCollapsed()&&((t,e)=>{const n=O(t.getBody()),r=G.fromRangeStart(t.selection.getRng());return((o,s)=>{const a=St(de,s);return Qn(O(o.container()),Er,a).filter(yR)})(r,n).exists(()=>{if(o=n,a=r,e?Al(o.dom,a).breakAt.isNone():_l(o.dom,a).breakAt.isNone()){const o=AC(t,n,e?_t:Ft);return t.selection.setRng(o),!0}var o,a;return!1})})(t,e),IC={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},FC=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,te=(t,...e)=>()=>t.apply(null,e),Ol=(t,e)=>{return qe((r=e,rn(re(t,s=>({...IC,...s})),o=>FC(o,r)?[o]:[])),n=>n.action());var r},jC=(t,e)=>{return Kn((r=e,rn(re(t,s=>({...IC,...s})),o=>FC(o,r)?[o]:[])),n=>n.action());var r},zC=(t,e)=>{const n=e?dn.Forwards:dn.Backwards,r=t.selection.getRng();return oC(t,n,r,gl,hl,ko).exists(o=>(ts(t,o),!0))},HC=(t,e)=>{const n=e?1:-1,r=t.selection.getRng();return sC(t,n,r,gl,hl,ko).exists(o=>(ts(t,o),!0))},UC=(t,e)=>aC(t,e,e?hl:gl),qC=Eo([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Dl={...qC,none:t=>qC.none(t)},$C=(t,e,n)=>rn(Me(t),r=>Ne(r,e)?n(r)?[r]:[]:$C(r,e,n)),WC=(t,e)=>Ur(t,"table",e),fp=(t,e,n,r,o=Be)=>{const s=1===r;if(!s&&n<=0)return Dl.first(t[0]);if(s&&n>=t.length-1)return Dl.last(t[t.length-1]);{const a=n+r,i=t[a];return o(i)?Dl.middle(e,i):fp(t,e,a,r,o)}},VC=(t,e)=>WC(t,e).bind(n=>{const r=$C(n,"th,td",Be);return Ms(r,o=>de(t,o)).map(o=>({index:o,all:r}))}),KC=(t,e,n,r,o)=>{const s=Dn(O(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,c)=>bn(i,(u,f)=>u.fold(()=>E.some(f),p=>{const v=Math.sqrt(Math.abs(p.x-l)+Math.abs(p.y-c)),g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return E.some(g<v?f:p)}),E.none()))($t((i=t,rn(s,c=>{const u={left:(f=na(c.getBoundingClientRect())).left- -1,top:f.top- -1,right:f.right+-2,bottom:f.bottom+-2,width:f.width+-1,height:f.height+-1};var f;return[{x:u.left,y:i(u),cell:c},{x:u.right,y:i(u),cell:c}]})),i=>e(i,o)),r,o).map(i=>i.cell)},xR=St(KC,t=>t.bottom,(t,e)=>t.y<e),wR=St(KC,t=>t.top,(t,e)=>t.y>e),XC=(t,e,n)=>{const r=t(e,n);return(o=r).breakType===Po.Wrap&&0===o.positions.length||!Ie(n.getNode())&&(o=>o.breakType===Po.Br&&1===o.positions.length)(r)?!((o,s,a)=>a.breakAt.exists(i=>o(s,i).breakAt.isSome()))(t,e,r):r.breakAt.isNone();var o},SR=St(XC,_l),kR=St(XC,Al),ER=(t,e,n,r)=>{const o=t.selection.getRng(),s=e?1:-1;return!(!Yh()||!((a,i,l)=>{const c=G.fromRangeStart(i);return Ya(!a,l).exists(u=>u.isEqual(c))})(e,o,n)||(Zo(s,t,n,!e,!1).each(a=>{ts(t,a)}),0))},GC=(t,e,n)=>{const r=((s,a)=>{const i=a.getNode(s);return Xo(i)?E.some(i):E.none()})(!!e,n),o=!1===e;r.fold(()=>ts(t,n.toRange()),s=>Ya(o,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>ts(t,n.toRange()),a=>{return i=e,c=s,void(l=t).undoManager.transact(()=>{const u=i?Bt:at,f=AC(l,O(c),u);ts(l,f)});var i,l,c}))},NR=(t,e,n,r)=>{const o=t.selection.getRng(),s=G.fromRangeStart(o),a=t.getBody();if(!e&&SR(r,s)){const i=(l=a,(f=c=n,p=u=s,_n(p.getClientRects()).bind(v=>xR(f,v.left,v.top)).bind(v=>{return xd($r(g=v).map(b=>_l(g,b).positions.concat(b)).getOr([]),p);var g})).orThunk(()=>_n(u.getClientRects()).bind(f=>np(G1(l,G.before(c)),f.left))).getOr(G.before(c)));return GC(t,e,i),!0}var l,c,u,f,p;if(e&&kR(r,s)){const i=((l,c,u)=>((f,p)=>yo(p.getClientRects()).bind(v=>wR(f,v.left,v.top)).bind(v=>{return xd(qn(g=v).map(b=>[b].concat(Al(g,b).positions)).getOr([]),p);var g}))(c,u).orThunk(()=>_n(u.getClientRects()).bind(f=>np(Y1(l,G.after(c)),f.left))).getOr(G.after(c)))(a,n,s);return GC(t,e,i),!0}return!1},YC=(t,e,n)=>E.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(r=>E.from(t.dom.getParent(r,"table")).map(o=>n(t,e,o,r))).getOr(!1),QC=(t,e)=>YC(t,e,ER),JC=(t,e)=>YC(t,e,NR),ZC=(t,e,n)=>n.fold(E.none,E.none,(r,o)=>{return(s=o,((a,i)=>{const l=c=>{for(let u=0;u<c.childNodes.length;u++){const f=O(c.childNodes[u]);if(i(f))return E.some(f);const p=l(c.childNodes[u]);if(p.isSome())return p}return E.none()};return l(a.dom)})(s,wv)).map(a=>{return(t=>{const e=ei.getWin(t).dom,n=(o,s,a,i)=>Cf(e,o,s,a,i),r=t.match({domRange:s=>{const a=O(s.startContainer),i=O(s.endContainer);return Q0(a,s.startOffset,i,s.endOffset)},relative:wN,exact:Q0});return((o,s)=>{var i;return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(u=>!1===u.collapsed).map(u=>ml.rtl(O(u.endContainer),u.endOffset,O(u.startContainer),u.startOffset)).getOrThunk(()=>G0(0,ml.ltr,c)):G0(0,ml.ltr,c)})(0,(i=o,s.match({domRange:c=>({ltr:pt(c),rtl:E.none}),relative:(c,u)=>({ltr:$o(()=>X0(i,c,u)),rtl:$o(()=>E.some(X0(i,u,c)))}),exact:(c,u,f,p)=>({ltr:$o(()=>Cf(i,c,u,f,p)),rtl:$o(()=>E.some(Cf(i,f,p,c,u)))})})))})(e,r).match({ltr:n,rtl:n})})(ei.exact(i=a,0,i,0));var i});var s},r=>(t.execCommand("mceTableInsertRowAfter"),tx(t,e,r))),tx=(t,e,n)=>{return ZC(t,e,(o=no,VC(r=n,void 0).fold(()=>Dl.none(r),s=>fp(s.all,r,s.index,1,o))));var r,o},_R=(t,e,n)=>{return ZC(t,e,(o=no,VC(r=n,void 0).fold(()=>Dl.none(),s=>fp(s.all,r,s.index,-1,o))));var r,o},ex=(t,e)=>{const n=["table","li","dl"],r=O(t.getBody()),o=a=>{const i=Ee(a);return de(a,r)||Tt(n,i)},s=t.selection.getRng();return(a=O(e?s.endContainer:s.startContainer),i=o,((l,c,u=Ce)=>u(c)?E.none():Tt(l,Ee(c))?E.some(c):fs(c,l.join(","),f=>Ne(f,"table")||u(f)))(["td","th"],a,i)).map(a=>(WC(a,o).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?tx:_R)(t,o,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},fo=(t,e)=>({container:t,offset:e}),Ed=we.DOM,Nd=t=>e=>t===e?-1:0,mp=(t,e,n)=>{if(lt(t)&&e>=0)return E.some(fo(t,e));{const r=ea(Ed);return E.from(r.backwards(t,e,Nd(t),n)).map(o=>fo(o.container,o.container.data.length))}},pp=(t,e,n)=>{if(!lt(t))return E.none();if(e>=0&&e<=t.data.length)return E.some(fo(t,e));{const o=ea(Ed);return E.from(o.backwards(t,e,Nd(t),n)).bind(s=>pp(s.container,e+s.container.data.length,n))}},nx=(t,e,n)=>{if(!lt(t))return E.none();const r=t.data;if(e<=r.length)return E.some(fo(t,e));{const o=ea(Ed);return E.from(o.forwards(t,e,Nd(t),n)).bind(s=>nx(s.container,e-r.length,n))}},gp=(t,e,n,r,o)=>{const s=ea(t,(a=t,i=>a.isBlock(i)||Tt(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i)));var a;return E.from(s.backwards(e,n,r,o))},rx=t=>Go(t.toString().replace(/\u00A0/g," ")),ox=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),hp=(t,e)=>t.substring(e.length),sx=(t,e,n,r=0)=>{return(o=O(e.startContainer),Ur(o,Sv)).fold(()=>((s,a,i,l=0)=>{if(!(c=a).collapsed||!lt(c.startContainer))return E.none();var c;const u={text:"",offset:0},f=s.getParent(a.startContainer,s.isBlock)||s.getRoot();return gp(s,a.startContainer,a.startOffset,(p,v,g)=>(u.text=g+u.text,u.offset+=v,((b,h,C)=>{let S;const k=C.charAt(0);for(S=h-1;S>=0;S--){const A=b.charAt(S);if(ox(A))return E.none();if(k===A&&ze(b,C,S,h))break}return E.some(S)})(u.text,u.offset,i).getOr(v)),f).bind(p=>{const v=a.cloneRange();if(v.setStart(p.container,p.offset),v.setEnd(a.endContainer,a.endOffset),v.collapsed)return E.none();const g=rx(v);return 0!==g.lastIndexOf(i)||hp(g,i).length<l?E.none():E.some({text:hp(g,i),range:v,trigger:i})})})(t,e,n,r),s=>{const a=t.createRng();a.selectNode(s.dom);const i=rx(a);return E.some({range:a,text:hp(i,n),trigger:n})});var o},ax=t=>{if(3===t.nodeType)return fo(t,t.data.length);{const e=t.childNodes;return e.length>0?ax(e[e.length-1]):fo(t,e.length)}},ix=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?ix(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?ax(n[n.length-1]):fo(t,e)},lx=(t,e,n,r={})=>{var o;const s=e(),a=null!==(o=t.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=$t(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>{return u=t.dom,f=>{const p=ix(f.startContainer,f.startOffset);return!((v,g)=>{var b;const h=null!==(b=v.getParent(g.container,v.isBlock))&&void 0!==b?b:v.getRoot();return gp(v,g.container,g.offset,(C,S)=>0===S?-1:S,h).filter(C=>{const S=C.container.data.charAt(C.offset-1);return!ox(S)}).isSome()})(u,p)};var u})(n.range,a,n.text));if(0===i.length)return E.none();const l=Promise.all(re(i,c=>c.fetch(n.text,c.maxResults,r).then(u=>({matchText:n.text,items:u,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return E.some({lookupData:l,context:n})};var Lo;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Lo||(Lo={}));const vp=(t,e,n)=>t.stype===Lo.Error?e(t.serror):n(t.svalue),ci=t=>({stype:Lo.Value,svalue:t}),Bl=t=>({stype:Lo.Error,serror:t}),AR=vp,bp=t=>Vt(t)&&Qe(t).length>100?" removed due to size":JSON.stringify(t,null,2),_d=(t,e)=>Bl([{path:t,getErrorInfo:e}]),cx=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const s in o)Zt(o,s)&&(n[s]=t(n[s],o[s]))}return n},yp=cx((t,e)=>Pt(t)&&Pt(e)?yp(t,e):e),dx=(cx((t,e)=>e),t=>({tag:"defaultedThunk",process:pt(t)})),ux=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Cp=t=>({extract:(e,n)=>{return(r=t(n)).stype===Lo.Error?_d(e,pt(r.serror)):r;var r},toString:pt("val")}),OR=Cp(ci),fx=(t,e,n,r)=>r(ke(t,e).getOrThunk(()=>n(t))),DR=(t,e,n,r,o)=>{const s=i=>o.extract(e.concat([r]),i),a=i=>i.fold(()=>ci(E.none()),l=>{return(u=o.extract(e.concat([r]),l)).stype===Lo.Value?{stype:Lo.Value,svalue:(0,E.some)(u.svalue)}:u;var u});switch(t.tag){case"required":return i=e,u=s,ke(l=n,c=r).fold(()=>{return p=c,v=l,_d(i,()=>'Could not find valid *required* value for "'+p+'" in '+bp(v));var p,v},u);case"defaultedThunk":return fx(n,r,t.process,s);case"option":return((i,l,c)=>c(ke(i,l)))(n,r,a);case"defaultedOptionThunk":return((i,l,c,u)=>u(ke(i,l).map(f=>!0===f?c(i):f)))(n,r,t.process,a);case"mergeWithThunk":return fx(n,r,pt({}),i=>{const l=yp(t.process(n),i);return s(l)})}var i,l,c,u},xp=t=>({extract:(e,n)=>((r,o,s)=>{const a={},i=[];for(const l of s)ux(l,(c,u,f,p)=>{const v=DR(f,r,o,c,p);AR(v,g=>{i.push(...g)},g=>{a[u]=g})},(c,u)=>{a[c]=u(o)});return i.length>0?Bl(i):ci(a)})(e,n,t),toString:()=>"obj{\n"+re(t,n=>ux(n,(r,o,s,a)=>r+" -> "+a.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),mx=t=>({extract:(e,n)=>(t=>{const e=(r=>{const o=[],s=[];return rt(r,a=>{vp(a,i=>s.push(i),i=>o.push(i))}),{values:o,errors:s}})(t);return e.errors.length>0?(n=e.errors,ir(Bl,Wl)(n)):ci(e.values);var n})(re(n,(o,s)=>t.extract(e.concat(["["+s+"]"]),o))),toString:()=>"array("+t.toString()+")"}),px=(t,e)=>((t,e)=>({extract:(n,r)=>ke(r,t).fold(()=>{return s=t,_d(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},o=>{return s=n,a=r,ke(i=e,l=o).fold(()=>{return u=i,f=l,_d(s,()=>'The chosen schema: "'+f+'" did not exist in branches: '+bp(u));var u,f},c=>c.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Qe(e)}))(t,Ho(e,xp)),PR=pt(OR),Ad=(t,e)=>Cp(n=>{const r=typeof n;return t(n)?ci(n):Bl(`Expected type: ${e} but got: ${r}`)}),LR=Ad(x,"number"),Rd=Ad(Dt,"string"),MR=Ad(Mn,"boolean"),wp=Ad(pe,"function"),Pl=(t,e,n,r)=>({tag:"field",key:t,newKey:e,presence:n,prop:r}),gx=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),hx=(t,e)=>Pl(t,t,{tag:"required",process:{}},e),vx=t=>hx(t,Rd),bx=t=>hx(t,wp),Sp=(t,e)=>Pl(t,t,{tag:"option",process:{}},e),Td=t=>Sp(t,Rd),di=(t,e,n)=>Pl(t,t,dx(e),n),yx=(t,e)=>di(t,e,LR),Cx=(t,e,n)=>{return di(t,e,(r=n,o=s=>Tt(r,s)?tr.value(s):tr.error(`Unsupported value: "${s}", choose one of "${r.join(", ")}".`),Cp(s=>o(s).fold(Bl,ci))));var r,o},kp=(t,e)=>di(t,e,MR),Ep=(t,e)=>di(t,e,wp),IR=vx("type"),FR=bx("fetch"),Np=bx("onAction"),jR=Ep("onSetup",()=>Nt),zR=Td("text"),HR=Td("icon"),UR=Td("tooltip"),qR=Td("label"),$R=kp("active",!1),WR=kp("enabled",!0),xx=kp("primary",!1),Ll=t=>di("type",t,Rd),VR=xp([IR,vx("trigger"),yx("minChars",1),((t,e)=>Pl(t,t,dx(1),PR()))("columns"),yx("maxResults",10),Sp("matches",wp),FR,Np,(wx=Rd,di("highlightOn",[],mx(wx)))]);var wx;const _p=[WR,UR,HR,zR,jR],Sx=[$R].concat(_p),KR=[Ep("predicate",Ce),Cx("scope","node",["node","editor"]),Cx("position","selection",["node","selection","line"])],XR=_p.concat([Ll("contextformbutton"),xx,Np,gx("original",ue)]),GR=Sx.concat([Ll("contextformbutton"),xx,Np,gx("original",ue)]),YR=_p.concat([Ll("contextformbutton")]),QR=Sx.concat([Ll("contextformtogglebutton")]),JR=px("type",{contextformbutton:XR,contextformtogglebutton:GR});xp([Ll("contextform"),Ep("initValue",pt("")),qR,((t,e)=>Pl(t,t,{tag:"required",process:{}},mx(e)))("commands",JR),Sp("launch",px("type",{contextformbutton:YR,contextformtogglebutton:QR}))].concat(KR));const tT=t=>{const e=Cs(),n=cn(!1),r=e.isSet,o=()=>{r()&&(Ue(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=$o(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Ho(e,s=>{return(a=s,((t,e,n)=>{return r=(i=e.extract([t],a=n)).stype===Lo.Error?{stype:Lo.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,vp(r,tr.error,tr.value);var a,i,r})("Autocompleter",VR,{trigger:a.ch,...a})).fold(i=>{throw new Error("Errors: \n"+(c=>{const u=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:pt("... (only showing first ten failures)")}]):c;return re(u,f=>"Failed path: ("+f.path.join(" > ")+")\n"+f.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+bp(l.input));var l},ue);var a}),r=Fn(os(n,s=>s.trigger)),o=qo(n);return{dataset:n,triggers:r,lookupByTrigger:s=>$t(o,a=>a.trigger===s)}})(t)),a=i=>{var l;(l=i,e.get().map(c=>sx(t.dom,t.selection.getRng(),c.trigger).bind(u=>lx(t,s,u,l))).getOrThunk(()=>((c,u)=>{const f=u(),p=c.selection.getRng();return(v=c.dom,g=p,b=f,Kn(b.triggers,h=>sx(v,g,h))).bind(v=>lx(c,u,v));var v,g,b})(t,s))).fold(o,l=>{var c,f;c=l.context,r()||(f=c.range,Ue(t).autocompleter.addDecoration(f),e.set({trigger:c.trigger,matchLength:c.text.length})),l.lookupData.then(c=>{e.get().map(u=>{const f=l.context;u.trigger===f.trigger&&(f.text.length-u.matchLength>=10?o():(e.set({...u,matchLength:f.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:c}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:c}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const c=Vt(l)?l.fetchOptions:{};a(c)}),t.addCommand("mceAutocompleterClose",o),((i,l)=>{const c=Lu(l.load,50);i.on("keypress compositionend",u=>{27!==u.which&&c.throttle()}),i.on("keydown",u=>{const f=u.which;8===f?c.throttle():27===f&&l.cancelIfNecessary()}),i.on("remove",c.cancel)})(t,{cancelIfNecessary:o,load:a})},kx=t=>(e,n,r={})=>{const o=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Nt,inputType:n},a=Fg(new InputEvent(t));return e.dispatch(t,{...a,...s,...r})},Od=kx("input"),Dd=kx("beforeinput"),ui=(t,e)=>{const n=t.dom,r=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(xt(a)||lt(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(ln),e.firstChild)}const o=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new en(e,e);let a,i=e;for(;a=s.current();){if(lt(a)){o.setStart(a,0),o.setEnd(a,0);break}if(r[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}i=a,a=s.next()}a||(o.setStart(i,0),o.setEnd(i,0))}else Ie(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)):(o.setStart(e,0),o.setEnd(e,0));t.selection.setRng(o),pl(t,o)},Bd=(t,e)=>{const n=t.getRoot();let r,o=e;for(;o!==n&&o&&"false"!==t.getContentEditable(o);)"true"===t.getContentEditable(o)&&(r=o),o=o.parentNode;return o!==n?r:n},Ap=t=>E.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Ex=(t,e)=>{const n=t?.parentNode;return mt(n)&&n.nodeName===e},Nx=t=>mt(t)&&/^(OL|UL|LI)$/.test(t.nodeName),Pd=t=>{const e=t.parentNode;return mt(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},Ld=(t,e,n)=>{let r=t[n?"firstChild":"lastChild"];for(;r&&!xt(r);)r=r[n?"nextSibling":"previousSibling"];return r===e},eT=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Rp=t=>{t.innerHTML='<br data-mce-bogus="1">'},Tp=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Op=(t,e)=>mt(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Dp=(t,e,n)=>lt(e)?t?1===n&&e.data.charAt(n-1)===Bn?0:n:n===e.data.length-1&&e.data.charAt(n)===Bn?e.data.length:n:n,Ml=(t,e)=>{er(t).toLowerCase()===e.tagName.toLowerCase()&&((n,r,o)=>{const s=n.dom;E.from(o.style).map(s.parseStyle).each(u=>{const f={...et(O(r)),...u};s.setStyles(r,f)});const a=E.from(o.class).map(u=>u.split(/\s+/)),i=E.from(r.className).map(u=>$t(u.split(/\s+/),f=>""!==f));pn(a,i,(u,f)=>{const p=$t(f,g=>!Tt(u,g)),v=[...u,...p];s.setAttrib(r,"class",v.join(" "))});const l=["style","class"],c=xr(o,(u,f)=>!Tt(l,f));s.setAttribs(r,c)})(t,e,tl(t))},_x={insert:(t,e)=>{let n,r,o,s,a=!1;const i=t.dom,l=t.schema,c=l.getNonEmptyElements(),u=t.selection.getRng(),f=er(t),p=u.collapsed&&u.startContainer===t.dom.getRoot(),v=O(u.startContainer),g=xn(v,u.startOffset),b=g.exists(L=>La(L)&&!no(L)),h=p&&b,C=L=>{let z=n;const I=l.getTextInlineElements();let $;$=L||"TABLE"===o||"HR"===o?i.create(L||f):P.cloneNode(!1);let gt=$;if(!1===zk(t))i.setAttrib($,"style",null),i.setAttrib($,"class",null);else do{if(I[z.nodeName]){if(Wr(z)||Ar(z))continue;const it=z.cloneNode(!1);i.setAttrib(it,"id",""),$.hasChildNodes()?(it.appendChild($.firstChild),$.appendChild(it)):(gt=it,$.appendChild(it))}}while((z=z.parentNode)&&z!==D);return Ml(t,$),Rp(gt),$},S=L=>{const z=Dp(L,n,r);if(lt(n)&&(L?z>0:z<n.data.length))return!1;if(n.parentNode===P&&a&&!L||L&&xt(n)&&n===P.firstChild)return!0;if(Tp(n,"TABLE")||Tp(n,"HR"))return a&&!L||!a&&L;const I=new en(n,P);let $;for(lt(n)&&(L&&0===z?I.prev():L||z!==n.data.length||I.next());$=I.current();){if(xt($)){if(!$.getAttribute("data-mce-bogus")){const gt=$.nodeName.toLowerCase();if(c[gt]&&"br"!==gt)return!1}}else if(lt($)&&!Gs($.data))return!1;L?I.prev():I.next()}return!0},k=()=>{let L;return L=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==U?C(f):C(),((z,I)=>{const $=Hk(z);return!ye(I)&&(Dt($)?Tt(dt.explode($),I.nodeName.toLowerCase()):$)})(t,s)&&Op(i,s)&&i.isEmpty(P,void 0,{includeZwsp:!0})?L=i.split(s,P):i.insertAfter(L,P),ui(t,L),L};Wc(i,u).each(L=>{u.setStart(L.startContainer,L.startOffset),u.setEnd(L.endContainer,L.endOffset)}),n=u.startContainer,r=u.startOffset;const A=!(!e||!e.shiftKey),R=!(!e||!e.ctrlKey);xt(n)&&n.hasChildNodes()&&!h&&(a=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=a&&lt(n)?n.data.length:0);const D=Bd(i,n);if(!D||((L,z)=>{const I=L.dom.getParent(z,"ol,ul,dl");return null!==I&&"false"===L.dom.getContentEditableParent(I)})(t,n))return;A||(n=((L,z,I,$,gt)=>{var it,Ot;const ht=L.dom,Kt=null!==(it=Bd(ht,$))&&void 0!==it?it:ht.getRoot();let Yt=ht.getParent($,ht.isBlock);if(!Yt||!Op(ht,Yt)){if(Yt=Yt||Kt,!Yt.hasChildNodes()){const M=ht.create(z);return Ml(L,M),Yt.appendChild(M),I.setStart(M,0),I.setEnd(M,0),M}let yt,Rt=$;for(;Rt&&Rt.parentNode!==Yt;)Rt=Rt.parentNode;for(;Rt&&!ht.isBlock(Rt);)yt=Rt,Rt=Rt.previousSibling;const jt=null===(Ot=yt?.parentElement)||void 0===Ot?void 0:Ot.nodeName;if(yt&&jt&&L.schema.isValidChild(jt,z.toLowerCase())){const M=yt.parentNode,j=ht.create(z);for(Ml(L,j),M.insertBefore(j,yt),Rt=yt;Rt&&!ht.isBlock(Rt);){const Q=Rt.nextSibling;j.appendChild(Rt),Rt=Q}I.setStart($,gt),I.setEnd($,gt)}}return $})(t,f,u,n,r));let P=i.getParent(n,i.isBlock)||i.getRoot();s=mt(P?.parentNode)?i.getParent(P.parentNode,i.isBlock):null,o=P?P.nodeName.toUpperCase():"";const U=s?s.nodeName.toUpperCase():"";if("LI"!==U||R||(P=s,s=s.parentNode,o=U),xt(s)&&(L=t,I=P,!A&&I.nodeName.toLowerCase()===er(L)&&L.dom.isEmpty(I)&&(($,gt,it)=>{let Ot=gt;for(;Ot&&Ot!==$&&Qt(Ot.nextSibling);){const Kt=Ot.parentElement;if(!Kt||(ht=Kt,!Zt(L.schema.getTextBlockElements(),ht.nodeName.toLowerCase())))return fg(Kt);Ot=Kt}var ht;return!1})(L.getBody(),I)))return((L,z,I)=>{var $,gt,it;const Ot=z(er(L)),ht=L.dom.getParent(I,fg);ht&&(L.dom.insertAfter(Ot,ht),ui(L,Ot),(null!==(it=null===(gt=null===($=I.parentElement)||void 0===$?void 0:$.childNodes)||void 0===gt?void 0:gt.length)&&void 0!==it?it:0)>1&&L.dom.remove(I))})(t,C,P);var L,I;if(/^(LI|DT|DD)$/.test(o)&&xt(s)&&i.isEmpty(P))return void((L,z,I,$,gt)=>{const it=L.dom,Ot=L.selection.getRng(),ht=I.parentNode;if(I===L.getBody()||!ht)return;var Kt;Nx(Kt=I)&&Nx(Kt.parentNode)&&(gt="LI");let Yt=z(gt);if(Ld(I,$,!0)&&Ld(I,$,!1))if(Ex(I,"LI")){const yt=Pd(I);it.insertAfter(Yt,yt),(null===(jt=(Rt=I).parentNode)||void 0===jt?void 0:jt.firstChild)===Rt?it.remove(yt):it.remove(I)}else it.replace(Yt,I);else if(Ld(I,$,!0))Ex(I,"LI")?(it.insertAfter(Yt,Pd(I)),Yt.appendChild(it.doc.createTextNode(" ")),Yt.appendChild(I)):ht.insertBefore(Yt,I),it.remove($);else if(Ld(I,$,!1))it.insertAfter(Yt,Pd(I)),it.remove($);else{I=Pd(I);const yt=Ot.cloneRange();yt.setStartAfter($),yt.setEndAfter(I);const Rt=yt.extractContents();"LI"===gt&&((jt,M)=>jt.firstChild&&"LI"===jt.firstChild.nodeName)(Rt)?(Yt=Rt.firstChild,it.insertAfter(Rt,I)):(it.insertAfter(Rt,I),it.insertAfter(Yt,I)),it.remove($)}var Rt,jt;ui(L,Yt)})(t,C,s,P,f);if(!(h||P!==t.getBody()&&Op(i,P)))return;const Y=P.parentNode;let V;if(h)V=C(f),g.fold(()=>{_t(v,O(V))},L=>{at(L,O(V))}),t.selection.setCursorLocation(V,0);else if(Ua(P))V=bu(P),i.isEmpty(P)&&Rp(P),Ml(t,V),ui(t,V);else if(S(!1))V=k();else if(S(!0)&&Y){V=Y.insertBefore(C(),P);const L=O(u.startContainer).dom.hasChildNodes()&&u.collapsed;ui(t,Tp(P,"HR")||L?V:P)}else{const L=(I=>{const $=I.cloneRange();return $.setStart(I.startContainer,Dp(!0,I.startContainer,I.startOffset)),$.setEnd(I.endContainer,Dp(!1,I.endContainer,I.endOffset)),$})(u).cloneRange();L.setEndAfter(P);const z=L.extractContents();(I=>{rt(ac(O(I),Yn),$=>{const gt=$.dom;gt.nodeValue=Go(gt.data)})})(z),(I=>{let $=I;do{lt($)&&($.data=$.data.replace(/^[\r\n]+/,"")),$=$.firstChild}while($)})(z),V=z.firstChild,i.insertAfter(z,P),((I,$,gt)=>{var it;const Ot=[];if(!gt)return;let ht=gt;for(;ht=ht.firstChild;){if(I.isBlock(ht))return;xt(ht)&&!$[ht.nodeName.toLowerCase()]&&Ot.push(ht)}let Kt=Ot.length;for(;Kt--;)ht=Ot[Kt],(!ht.hasChildNodes()||ht.firstChild===ht.lastChild&&""===(null===(it=ht.firstChild)||void 0===it?void 0:it.nodeValue)||eT(I,ht))&&I.remove(ht)})(i,c,V),((I,$)=>{$.normalize();const gt=$.lastChild;(!gt||xt(gt)&&/^(left|right)$/gi.test(I.getStyle(gt,"float",!0)))&&I.add($,"br")})(i,P),i.isEmpty(P)&&Rp(P),V.normalize(),i.isEmpty(V)?(i.remove(V),k()):(Ml(t,V),ui(t,V))}i.setAttrib(V,"id",""),t.dispatch("NewBlock",{newBlock:V})},fakeEventName:"insertParagraph"},Ax=(t,e,n)=>{const r=t.dom.createRng();n?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),t.selection.setRng(r),pl(t,r)},nT=(t,e)=>{const n=X("br");at(O(e),n),t.undoManager.add()},rT=(t,e)=>{oT(t.getBody(),e)||Bt(O(e),X("br"));const n=X("br");Bt(O(e),n),Ax(t,n.dom,!1),t.undoManager.add()},oT=(t,e)=>{return n=G.after(e),!!Ie(n.getNode())||Un(t,G.after(e)).map(r=>Ie(r.getNode())).getOr(!1);var n},Rx=t=>t&&"A"===t.nodeName&&"href"in t,sT=t=>t.fold(Ce,Rx,Rx,Ce),aT=(t,e)=>{e.fold(Nt,St(nT,t),St(rT,t),Nt)},Tx={insert:(t,e)=>{const n=(r=>{const o=St(ma,r),s=G.fromRangeStart(r.selection.getRng());return Bo(o,r.getBody(),s).filter(sT)})(t);n.isSome()?n.each(St(aT,t)):((r,o)=>{const a=r.dom,i=r.selection.getRng();let l,c=!1;Wc(a,i).each(h=>{i.setStart(h.startContainer,h.startOffset),i.setEnd(h.endContainer,h.endOffset)});let u=i.startOffset,f=i.startContainer;if(xt(f)&&f.hasChildNodes()){const h=u>f.childNodes.length-1;f=f.childNodes[Math.min(u,f.childNodes.length-1)]||f,u=h&&lt(f)?f.data.length:0}let p=a.getParent(f,a.isBlock);const v=p&&p.parentNode?a.getParent(p.parentNode,a.isBlock):null;"LI"!==(v?v.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(p=v),lt(f)&&u>=f.data.length&&(((h,C,S)=>{const k=new en(C,S);let A;const R=h.getNonEmptyElements();for(;A=k.next();)if(R[A.nodeName.toLowerCase()]||lt(A)&&A.length>0)return!0;return!1})(r.schema,f,p||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),zu(a,i,l),Ax(r,l,c),r.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},Ox=(t,e)=>Ap(t).filter(n=>e.length>0&&Ne(O(n),e)).isSome(),hr=Eo([{br:[]},{block:[]},{none:[]}]),iT=(t,e)=>{return Ox(n=t,jk(n));var n},Dx=t=>(e,n)=>Ap(e).filter(o=>ji(O(o))).isSome()===t,Bx=(t,e)=>(n,r)=>Ap(n).fold(pt(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,lT=t=>{const e=Bd(t.dom,t.selection.getStart());return ye(e)},Il=t=>Bx("pre",t),Md=t=>(e,n)=>Mk(e)===t,cT=(t,e)=>{return Ox(n=t,Fk(n));var n},Id=(t,e)=>e,dT=t=>{const e=er(t),n=Bd(t.dom,t.selection.getStart());return mt(n)&&t.schema.isValidChild(n.nodeName,e)},uT=t=>{const e=t.selection.getRng(),n=e.collapsed&&e.startContainer===t.dom.getRoot(),r=O(e.startContainer),o=xn(r,e.startOffset).map(s=>La(s)&&!no(s));return n&&o.getOr(!0)},Pr=(t,e)=>(n,r)=>bn(t,(o,s)=>o&&s(n,r),!0)?E.some(e):E.none(),Fd=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),mt(n)&&Dd(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),mt(n)&&Od(e,t.fakeEventName))},Px=(t,e)=>{const n=()=>Fd(Tx,t,e),r=()=>Fd(_x,t,e),o=(s=t,a=e,H1([Pr([iT],hr.none()),Pr([Il(!0),lT],hr.none()),Pr([Bx("summary",!0)],hr.br()),Pr([Il(!0),Md(!1),Id],hr.br()),Pr([Il(!0),Md(!1)],hr.block()),Pr([Il(!0),Md(!0),Id],hr.block()),Pr([Il(!0),Md(!0)],hr.br()),Pr([Dx(!0),Id],hr.br()),Pr([Dx(!0)],hr.block()),Pr([cT],hr.br()),Pr([Id],hr.br()),Pr([dT],hr.block()),Pr([uT],hr.block())],[s,!(!a||!a.shiftKey)]).getOr(hr.none()));var s,a;switch(Ik(t)){case"linebreak":o.fold(n,n,Nt);break;case"block":o.fold(r,r,Nt);break;case"invert":o.fold(r,n,Nt);break;default:o.fold(n,r,Nt)}},Lx=An(),fT=Lx.os.isiOS()&&Lx.browser.isSafari(),Mx=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{Px(t,e)}))},mT=An(),Ix=t=>t.stopImmediatePropagation(),Fx=t=>t.keyCode===kt.PAGE_UP||t.keyCode===kt.PAGE_DOWN,jx=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",Ix,!0):!n&&t.get()&&e.off("NodeChange",Ix),t.set(n)},zx=(t,e)=>{const n=e.container(),r=e.offset();return lt(n)?(n.insertData(r,t),E.some(G(n,r+t.length))):Dc(e).map(o=>{const s=ut(t);return e.isAtEnd()?Bt(o,s):at(o,s),G(s.dom,t.length)})},pT=St(zx,ln),gT=St(zx," "),vT=t=>{const e=G.fromRangeStart(t.selection.getRng()),n=O(t.getBody());if(t.selection.isCollapsed()){const r=St(ma,t),o=G.fromRangeStart(t.selection.getRng());return Bo(r,t.getBody(),o).bind((s=n,a=>a.fold(i=>nr(s.dom,G.before(i)),i=>qn(i),i=>$r(i),i=>Un(s.dom,G.after(i))))).map(s=>()=>{return((t,e)=>n=>{return r=t,!qf(o=n)&&(nr((s=r).dom,a=o).isNone()||Un(s.dom,a).isNone()||zf(s,a)||qv(s,a)||Uf(s,a)||Hf(s,a)||Vv(r,o)||Kv(r,o))?pT(e):gT(e);var r,o,s,a})(n,e)(s).each((a=t,i=>(a.selection.setRng(i.toRange()),a.nodeChanged(),!0)));var a})}var s;return E.none()},bT=t=>KE(t)?[{keyCode:kt.TAB,action:te(ex,t,!0)},{keyCode:kt.TAB,shiftKey:!0,action:te(ex,t,!1)}]:[],yT=t=>{if(t.addShortcut("Meta+P","","mcePrint"),tT(t),Do(t))return cn(null);{const e=(t=>{const e=cn(null),n=St(ma,t);return t.on("NodeChange",r=>{el(t)&&(((o,s,a)=>{const i=re(Dn(O(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),u=>u.dom),l=$t(i,o),c=$t(a,o);rt(Gt(l,c),St(iC,!1)),rt(Gt(c,l),St(iC,!0))})(n,t.dom,r.parents),((o,s)=>{const a=s.get();if(o.selection.isCollapsed()&&!o.composing&&a){const i=G.fromRangeStart(o.selection.getRng());G.isTextPosition(i)&&!hu(l=i)&&!vu(l)&&(wd(o,((t,e)=>{return G.isTextPosition(e)?(r=e,$h(n=t)&&r.container()===n?((o,s)=>{const a=Vh(o.data.substr(0,s.offset())),i=Vh(o.data.substr(s.offset()));return(a.text+i.text).length>0?(Kh(o),G(o,s.offset()-a.count)):s})(n,r):Xh(n,r)):((n,r)=>r.container()===n.parentNode?((o,s)=>{const a=s.container(),i=((l,c)=>{const u=ie(l,c);return-1===u?E.none():E.some(u)})(Ye(a.childNodes),o).map(l=>l<s.offset()?G(a,s.offset()-1):s).getOr(s);return oa(o),i})(n,r):Xh(n,r))(t,e);var n,r})(a,i)),s.set(null))}var l})(t,e),((o,s,a,i)=>{if(s.selection.isCollapsed()){const l=$t(i,o);rt(l,c=>{const u=G.fromRangeStart(s.selection.getRng());Bo(o,s.getBody(),u).bind(f=>lC(s,a,f))})}})(n,t,e,r.parents))}),e})(t);return(n=t).on("keyup compositionstart",St(bR,n)),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=fe.os.isMacOS()||fe.os.isiOS();Ol([{keyCode:kt.RIGHT,action:te(BC,s,!0)},{keyCode:kt.LEFT,action:te(BC,s,!1)},{keyCode:kt.UP,action:te(PC,s,!1)},{keyCode:kt.DOWN,action:te(PC,s,!0)},...l?[{keyCode:kt.UP,action:te(kd,s,!1),metaKey:!0,shiftKey:!0},{keyCode:kt.DOWN,action:te(kd,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:kt.RIGHT,action:te(QC,s,!0)},{keyCode:kt.LEFT,action:te(QC,s,!1)},{keyCode:kt.UP,action:te(JC,s,!1)},{keyCode:kt.DOWN,action:te(JC,s,!0)},{keyCode:kt.RIGHT,action:te(zC,s,!0)},{keyCode:kt.LEFT,action:te(zC,s,!1)},{keyCode:kt.UP,action:te(HC,s,!1)},{keyCode:kt.DOWN,action:te(HC,s,!0)},{keyCode:kt.RIGHT,action:te(cC,s,a,!0)},{keyCode:kt.LEFT,action:te(cC,s,a,!1)},{keyCode:kt.RIGHT,ctrlKey:!l,altKey:l,action:te(iR,s,a)},{keyCode:kt.LEFT,ctrlKey:!l,altKey:l,action:te(lR,s,a)},{keyCode:kt.UP,action:te(MC,s,!1)},{keyCode:kt.DOWN,action:te(MC,s,!0)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{let o=!1;n.on("keydown",s=>{o=s.keyCode===kt.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===kt.BACKSPACE?"deleteContentBackward":"deleteContentForward";jC([{keyCode:kt.BACKSPACE,action:te(kC,a)},{keyCode:kt.BACKSPACE,action:te(Qm,a,!1)},{keyCode:kt.DELETE,action:te(Qm,a,!0)},{keyCode:kt.BACKSPACE,action:te(Xm,a,!1)},{keyCode:kt.DELETE,action:te(Xm,a,!0)},{keyCode:kt.BACKSPACE,action:te(ap,a,i,!1)},{keyCode:kt.DELETE,action:te(ap,a,i,!0)},{keyCode:kt.BACKSPACE,action:te(nm,a,!1)},{keyCode:kt.DELETE,action:te(nm,a,!0)},{keyCode:kt.BACKSPACE,action:te(Jm,a,!1)},{keyCode:kt.DELETE,action:te(Jm,a,!0)},{keyCode:kt.BACKSPACE,action:te(cp,a,!1)},{keyCode:kt.DELETE,action:te(cp,a,!0)},{keyCode:kt.BACKSPACE,action:te(Vm,a,!1)},{keyCode:kt.DELETE,action:te(Vm,a,!0)},{keyCode:kt.BACKSPACE,action:te(Wm,a,!1)},{keyCode:kt.DELETE,action:te(Wm,a,!0)},{keyCode:kt.BACKSPACE,action:te(ip,a,!1)},{keyCode:kt.DELETE,action:te(ip,a,!0)}],l).filter(u=>a.selection.isEditable()).each(u=>{l.preventDefault(),Dd(a,c).isDefaultPrevented()||(u(),Od(a,c))})})(n,r,s)}),n.on("keyup",s=>{s.isDefaultPrevented()||((a,i,l)=>{const c=An(),u=c.os,f=c.browser,p=u.isMacOS()?[{keyCode:kt.BACKSPACE,altKey:!0,action:te(Tl,a)},{keyCode:kt.DELETE,altKey:!0,action:te(Tl,a)}]:[{keyCode:kt.BACKSPACE,ctrlKey:!0,action:te(Tl,a)},{keyCode:kt.DELETE,ctrlKey:!0,action:te(Tl,a)}];u.isMacOS()&&l&&p.push({keyCode:f.isFirefox()?224:91,action:te(Tl,a)}),Ol([{keyCode:kt.BACKSPACE,action:te(L1,a)},{keyCode:kt.DELETE,action:te(L1,a)},...p],i)})(n,s,o),o=!1})})(t,e),(n=>{let r=E.none();n.on("keydown",o=>{var s;o.keyCode===kt.ENTER&&(fT&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(lt(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(r=E.some((s=n).selection.getBookmark()),s.undoManager.add()):Mx(n,o))}),n.on("keyup",o=>{o.keyCode===kt.ENTER&&r.each(()=>{return a=o,(s=n).undoManager.undo(),r.fold(Nt,i=>s.selection.moveToBookmark(i)),Mx(s,a),void(r=E.none());var s,a})})})(t),(n=>{n.on("keydown",r=>{var o,s;r.isDefaultPrevented()||(s=r,jC([{keyCode:kt.SPACEBAR,action:te(vT,o=n)}],s).each(a=>{s.preventDefault(),Dd(o,"insertText",{data:" "}).isDefaultPrevented()||(a(),Od(o,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",r=>{r.isComposing||(o=>{const s=O(o.getBody());o.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!lt(n))return E.none();if((r=>{const o=r.container();return lt(o)&&ze(o.data,ln)})(e)){const r=Qv(t,n,!1)||(o=>{const s=o.data,a=(i=>{const l=i.split("");return re(l,(c,u)=>Mc(c)&&u>0&&u<l.length-1&&of(l[u-1])&&of(l[u+1])?" ":c).join("")})(s);return a!==s&&(o.data=a,!0)})(n)||Jv(t,n,!1);return $s(r,e)}if($f(t,e)){const r=Qv(t,n,!0)||Jv(t,n,!0);return $s(r,e)}return E.none()})(s,G.fromRangeStart(o.selection.getRng())).each(a=>{o.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",r=>{var s;r.isDefaultPrevented()||(s=r,Ol([...bT(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=fe.os.isMacOS()||fe.os.isiOS();Ol([{keyCode:kt.END,action:te(LC,s,!0)},{keyCode:kt.HOME,action:te(LC,s,!1)},...l?[]:[{keyCode:kt.HOME,action:te(kd,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:kt.END,action:te(kd,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:kt.END,action:te(UC,s,!0)},{keyCode:kt.HOME,action:te(UC,s,!1)},{keyCode:kt.END,action:te(Sd,s,!0,a)},{keyCode:kt.HOME,action:te(Sd,s,!1,a)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{if(mT.os.isMacOS())return;const o=cn(!1);n.on("keydown",s=>{Fx(s)&&jx(o,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,Ol([{keyCode:kt.PAGE_UP,action:te(Sd,a=n,!1,i=r)},{keyCode:kt.PAGE_DOWN,action:te(Sd,a,!0,i)}],l)),Fx(s)&&o.get()&&(jx(o,n,!1),n.nodeChanged())})})(t,e),e}var n};class CT{constructor(e){let n;this.lastPath=[],this.editor=e;const r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",o=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==o.type&&Sf(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const o=e.selection.getStart(!0);o&&Fc(e)&&!r.isSameElementPath(o)&&e.dom.isChildOf(o,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",o=>{!o.isDefaultPrevented()&&Fc(e)&&("IMG"===e.selection.getNode().nodeName?Tr.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!hE(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const s=[];this.editor.dom.getParent(r,a=>a===o||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:s})}}isSameElementPath(e){let n;const r=this.editor,o=Xr(r.dom.getParents(e,Be,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const Hx=Gi("image"),Bp=Gi("event"),jd=t=>e=>{e[Bp]=t},Ux=jd(0),xT=jd(2),wT=jd(1),Pp=Gi("mode"),zd=t=>e=>{e[Pp]=t},qx=(t,e)=>zd(e)(t),$x=zd(0),Lp=zd(2),kT=zd(1),Wx=t=>e=>E.from(e[Pp]).exists(r=>r===t),fi=Wx(0),Vx=Wx(1),ET=["none","copy","link","move"],NT=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Mp=()=>{const t=new window.DataTransfer;let e="move",n="all";const r={get dropEffect(){return e},set dropEffect(o){Tt(ET,o)&&(e=o)},get effectAllowed(){return n},set effectAllowed(o){(t=>E.from(t[Bp]).exists(n=>0===n))(r)&&Tt(NT,o)&&(n=o)},get items(){return o=r,s=t.items,{...s,get length(){return s.length},add:(a,i)=>{if(fi(o)){if(!Dt(a))return s.add(a);if(!De(i))return s.add(a,i)}return null},remove:a=>{fi(o)&&s.remove(a)},clear:()=>{fi(o)&&s.clear()}};var o,s},get files(){return Vx(r)?Object.freeze({length:0,item:o=>null}):t.files},get types(){return t.types},setDragImage:(o,s,a)=>{fi(r)&&(r[Hx]={image:o,x:s,y:a},t.setDragImage(o,s,a))},getData:o=>Vx(r)?"":t.getData(o),setData:(o,s)=>{fi(r)&&t.setData(o,s)},clearData:o=>{fi(r)&&t.clearData(o)}};return $x(r),r},Kx=(t,e)=>t.setData("text/html",e),Xx="x-tinymce/html",Hd=pt(Xx),Ip="\x3c!-- "+Xx+" --\x3e",_T=t=>Ip+t,Gx=t=>-1!==t.indexOf(Ip),Yx="%MCEPASTEBIN%",Fp=t=>t.dom.get("mcepastebin"),AT=t=>mt(t)&&"mcepastebin"===t.id,Qx=t=>t===Yx,Jx=(t,e)=>(dt.each(e,n=>{t=Cr(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),Zx=t=>Jx(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,r)=>n||r?ln:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),tw=(t,e)=>({content:t,cancelled:e}),jp=(t,e)=>(t.insertContent(e,{merge:LE(t),paste:!0}),!0),zp=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),RT=(t,e,n)=>{return!(t.selection.isCollapsed()||!zp(e)||(r=t,o=e,s=n,r.undoManager.extra(()=>{s(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,s},TT=(t,e,n)=>{return r=t,!(!zp(o=e)||!Ae(qh(r),s=>Fs(o.toLowerCase(),`.${s.toLowerCase()}`)))&&((r,o,s)=>(r.undoManager.extra(()=>{s(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(t,e,n);var r,o},OT=(t=>{let e=0;return()=>"mceclip"+e++})(),DT=t=>{const e=Mp();return Kx(e,t),Lp(e),e},ew=(t,e,n,r)=>{const o=((l,c,u)=>{const f=l.dispatch("PastePreProcess",{content:c,internal:u}),p=((v,g)=>{const b=oi({sanitize:Gu(v)},v.schema);b.addNodeFilter("meta",C=>{dt.each(C,S=>{S.remove()})});const h=b.parse(g,{forced_root_block:!1,isRootContent:!0});return Es({validate:!0},v.schema).serialize(h)})(l,f.content);return l.hasEventListeners("PastePostProcess")&&!f.isDefaultPrevented()?((v,g,b)=>{const h=v.dom.create("div",{style:"display:none"},g),C=v.dispatch("PastePostProcess",{node:h,internal:b});return tw(C.node.innerHTML,C.isDefaultPrevented())})(l,p,u):tw(p,f.isDefaultPrevented())})(t,e,n);if(!o.cancelled){const s=o.content;Dd(t,"insertFromPaste",{dataTransfer:DT(s)}).isDefaultPrevented()||(a=t,i=s,r||!ME(a)?jp(a,i):(c=a,u=i,dt.each([RT,TT,jp],f=>!f(c,u,jp))),Od(t,"insertFromPaste"))}var a,i,c,u},Ud=(t,e,n)=>{const r=n||Gx(e);ew(t,e.replace(Ip,""),r,!1)},Hp=(t,e)=>{const n=t.dom.encode(e).replace(/\r\n/g,"\n"),r=((o,s,a)=>{const i=o.split(/\n\n/),l=((f,p)=>{let v="<"+f;const g=os(p,(b,h)=>h+'="'+bs.encodeAllRaw(b)+'"');return g.length&&(v+=" "+g.join(" ")),v+">"})(s,a),c="</"+s+">",u=re(i,f=>f.split(/\n/).join("<br />"));return 1===u.length?u[0]:re(u,f=>l+f+c).join("")})(xg(n,FE(t)),er(t),tl(t));ew(t,r,!1,!0)},nw=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const r=t.types[n];try{e[r]=t.getData(r)}catch{e[r]=""}}return e},Os=(t,e)=>e in t&&t[e].length>0,rw=t=>Os(t,"text/html")||Os(t,"text/plain"),ow=(t,e,n)=>{const r="paste"===e.type?e.clipboardData:e.dataTransfer;var o;if(Tc(t)&&r){const s=((a,i)=>{const l=i.items?rn(Ye(i.items),u=>"file"===u.kind?[u.getAsFile()]:[]):[],c=i.files?Ye(i.files):[];return $t(l.length>0?l:c,(u=>{const f=qh(u);return p=>Je(p.type,"image/")&&Ae(f,v=>(g=>{const b=g.toLowerCase(),h={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return dt.hasOwn(h,b)?"image/"+h[b]:"image/"+b})(v)===p.type)})(a))})(t,r);if(s.length>0)return e.preventDefault(),(o=s,Promise.all(re(o,a=>vy(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),rt(a,i=>{var l,c;l=t,Sm((c=i).uri).each(({data:u,type:f,base64Encoded:p})=>{const v=p?u:btoa(u),g=c.file,b=l.editorUpload.blobCache,C=b.getByData(v,f)??((S,k,A,R)=>{const D=OT(),P=Dh(S)&&mt(A.name),U=P?((L,z)=>{const I=z.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return mt(I)?L.dom.encode(I[1]):void 0})(S,A.name):D,V=k.create(D,A,R,U,P?A.name:void 0);return k.add(V),V})(l,b,g,v);Ud(l,`<img src="${C.blobUri()}">`,!1)})})}),!0}return!1},Up=(t,e,n,r)=>{let o=Zx(n);const s=Os(e,Hd())||Gx(n),a=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(o),i=zp(o);(Qx(o)||!o.length||a&&!i)&&(r=!0),(r||i)&&(o=Os(e,"text/plain")&&a?e["text/plain"]:(l=>{const c=ys(),u=oi({},c);let f="";const p=c.getVoidElements(),v=dt.makeMap("script noscript style textarea video audio iframe object"," "),g=c.getBlockElements(),b=h=>{const C=h.name,S=h;if("br"!==C){if("wbr"!==C)if(p[C]&&(f+=" "),v[C])f+=" ";else{if(3===h.type&&(f+=h.value),!(h.name in c.getVoidElements())){let k=h.firstChild;if(k)do{b(k)}while(k=k.next)}g[C]&&S.next&&(f+="\n","p"===C&&(f+="\n"))}}else f+="\n"};return l=Jx(l,[/<!\[[^\]]+\]>/g]),b(u.parse(l)),f})(o)),Qx(o)||(r?Hp(t,o):Ud(t,o,s))},sw=(t,e,n,r)=>{((o,s,a)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",s),o.setData("text/plain",a),o.setData(Hd(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),r()):n(e.html,r)},aw=t=>(e,n)=>{const{dom:r,selection:o}=t,s=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},e);r.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),r.add(t.getBody(),s);const i=o.getRng();a.focus();const l=r.createRng();l.selectNodeContents(a),o.setRng(l),Tr.setEditorTimeout(t,()=>{o.setRng(i),r.remove(s),n()},0)},iw=t=>({html:_T(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),lw=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},cw=(t,e)=>{var n,r;return da.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(r=e.clientY)&&void 0!==r?r:0,t.getDoc())},dw=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},PT=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,uw=t=>dt.trim(t).replace(PT,Ic).toLowerCase(),LT=(t,e,n)=>{const r=BE(t);if(n||"all"===r||!PE(t))return e;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,u)=>{const f=s.parseStyle(s.decode(c)),p={};for(let g=0;g<o.length;g++){const b=f[o[g]];let h=b,C=s.getStyle(a,o[g],!0);/color/.test(o[g])&&(h=uw(h),C=uw(C)),C!==h&&(p[o[g]]=b)}const v=s.serializeStyle(p,"span");return v?l+' style="'+v+'"'+u:l+u})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},fw=t=>hs(O(t)),mw=(t,e)=>{const n=e.getNode();De(n)||t.selection.setCursorLocation(n,e.offset())},pw=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},gw=An(),hw=gw.os,FT=gw.browser.isSafari(),vw=hw.isMacOS()||hw.isiOS(),qp=(t,e)=>mt(t.getParent(e.container(),"details")),bw=(t,e)=>{const n=t.dom.getParent(e.container(),"details");if(n&&!n.open){const r=t.dom.select("summary",n)[0];r&&$r(r).each(o=>mw(t,o))}else mw(t,e)},HT=Ie,yw=lt,UT=t=>Re(t.dom),Cw=t=>e=>de(O(t),e),xw=(t,e)=>Qn(O(t),UT,Cw(e)),ww=(t,e,n)=>{const r=new en(t,e),o=n?r.next.bind(r):r.prev.bind(r);let s=t;for(let a=n?t:o();a&&!HT(a);a=o())qr(a)&&(s=a);return s};var mi;!function(t){t.Before="before",t.After="after"}(mi||(mi={}));const $T=(t,e)=>Math.abs(t.left-e),WT=(t,e)=>Math.abs(t.right-e),KT=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),$p=(t,e,n)=>{const r=c=>qr(c.node)?E.some(c):xt(c.node)?$p(Ye(c.node.childNodes),e,n):E.none(),o=(c,u)=>{const f=zo(c,(p,v)=>u(p,e,n)-u(v,e,n));return((p,v)=>{if(p.length>=2){const g=r(p[0]).getOr(p[0]),b=r(p[1]).getOr(p[1]);if(Math.abs(v(g,e,n)-v(b,e,n))<2){if(lt(g.node))return E.some(g);if(lt(b.node))return E.some(b)}}return E.none()})(f,u).orThunk(()=>Kn(f,r))},[s,a]=((t,e)=>{return(n=$t(t,n=>{return(r=e)>=(o=n).top&&r<=o.bottom;var r,o}),bn(n,(r,o)=>r.fold(()=>E.some(o),s=>{const a=Math.min(o.left,s.left),i=Math.min(o.top,s.top),l=Math.max(o.right,s.right),c=Math.max(o.bottom,s.bottom);return E.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}),E.none())).fold(()=>[[],t],n=>{const{pass:r,fail:o}=Kr(t,s=>((a,i)=>{const l=(c=a,u=i,Math.max(0,Math.min(c.bottom,u.bottom)-Math.max(c.top,u.top))/Math.min(a.height,i.height));var c,u;return((c,u)=>c.top<u.bottom&&c.bottom>u.top)(a,i)&&l>.5})(s,n));return[r,o]});var n})(tC(t),n),{pass:i,fail:l}=Kr(a,c=>c.top<n);return o(s,KT).orThunk(()=>o(l,eh)).orThunk(()=>o(i,eh))},Sw=(t,e,n)=>((r,o,s)=>{const a=O(r),l=((t,e,n)=>E.from(t.dom.elementFromPoint(e,n)).map(tt))(zn(a),o,s).filter(c=>gn(a,c)).getOr(a);return((c,u,f,p)=>{const v=(g,b)=>{const h=$t(g.dom.childNodes,Fo(C=>xt(C)&&C.classList.contains("mce-drag-container")));return b.fold(()=>$p(h,f,p),C=>{const S=$t(h,k=>k!==C.dom);return $p(S,f,p)}).orThunk(()=>(de(g,c)?E.none():Ko(g)).bind(C=>v(C,E.some(g))))};return v(u,E.none())})(a,l,o,s)})(t,e,n).filter(r=>rl(r.node)).map(r=>{return{node:(o=r).node,position:$T(o,s=e)<WT(o,s)?mi.Before:mi.After};var o,s}),kw=t=>{var e,n;const r=t.getBoundingClientRect(),o=t.ownerDocument,s=o.documentElement,a=o.defaultView;return{top:r.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:r.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},Ew=t=>({target:t,srcElement:t}),Nw=Re,GT=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(Nw,so),YT=(t,e,n,r)=>{const o=t.dom,s=e.cloneNode(!0);o.setStyles(s,{width:n,height:r}),o.setAttrib(s,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},qd=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},_w=qd("left",-32),Aw=qd("left",32),Rw=qd("top",-32),Tw=qd("top",32),Ow=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Fl=(t,e,n,r,o)=>{"dragstart"===e&&Kx(r,t.dom.getOuterHTML(n));const s=((t,e,n,r)=>{const o=((s,a)=>{const i=(l=>{const c=Mp(),u=E.from(l[Pp]);return Lp(l),Ux(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(f=l,E.from(f[Hx])).each(f=>c.setDragImage(f.image,f.x,f.y)),rt(l.types,f=>{"Files"!==f&&c.setData(f,l.getData(f))}),rt(l.files,f=>c.items.add(f)),(f=>E.from(f[Bp]))(l).each(f=>{var p;p=c,jd(f)(p)}),u.each(f=>{qx(l,f),qx(c,f)}),c;var f})(s);return"dragstart"===a?(Ux(i),$x(i)):"drop"===a?(xT(i),Lp(i)):(wT(i),kT(i)),i})(n,t);return De(r)?((s,a,i)=>{const l=fr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:Nt,stopImmediatePropagation:Nt,stopPropagation:Nt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...Ew(a)}})(t,e,o):(s=t,a=r,i=e,l=o,{...a,dataTransfer:l,type:s,...Ew(i)});var s,a,i,l})(e,n,r,o);return t.dispatch(e,s)},Dw=(t,e,n)=>{t.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>Fl(e,"dragend",r.element,r.dataTransfer),o=>Fl(e,"dragend",r.element,r.dataTransfer,o))}),Bw(t)},Bw=t=>{t.on(e=>{e.intervalId.clear(),Ow(e.ghost)}),t.clear()},jl=Re,Pw=(t,e)=>pa(t.getBody(),e),ZT=t=>{const e=t.selection,n=t.dom,r=t.getBody(),o=((t,e,n,r)=>{const o=Cs();let s,a;const i=er(t),l=t.dom,c=()=>{(u=>{var f,p;const v=Dn(O(u),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<v.length;g++){const b=v[g].dom;let h=b.previousSibling;if(hc(h)){const C=h.data;1===C.length?null===(f=h.parentNode)||void 0===f||f.removeChild(h):h.deleteData(C.length-1,1)}h=b.nextSibling,gc(h)&&(1===h.data.length?null===(p=h.parentNode)||void 0===p||p.removeChild(h):h.deleteData(0,1))}})(e),a&&(oa(a),a=null),o.on(u=>{l.remove(u.caret),o.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(u,f)=>{let p;if(c(),tN(f))return null;if(!n(f))return a=((v,g)=>{var b;const h=(null!==(b=v.ownerDocument)&&void 0!==b?b:document).createTextNode(Bn),C=v.parentNode;if(g){const S=v.previousSibling;if(Ha(S)){if(Nr(S))return S;if(hc(S))return S.splitText(S.data.length-1)}C?.insertBefore(h,v)}else{const S=v.nextSibling;if(Ha(S)){if(Nr(S))return S;if(gc(S))return S.splitText(1),S}v.nextSibling?C?.insertBefore(h,v.nextSibling):C?.appendChild(h)}return h})(f,u),p=f.ownerDocument.createRange(),nl(a.nextSibling)?(p.setStart(a,0),p.setEnd(a,0)):(p.setStart(a,1),p.setEnd(a,1)),p;{const v=((h,C,S)=>{var k;const A=(null!==(k=C.ownerDocument)&&void 0!==k?k:document).createElement(h);A.setAttribute("data-mce-caret",S?"before":"after"),A.setAttribute("data-mce-bogus","all"),A.appendChild(mc().dom);const R=C.parentNode;return S?R?.insertBefore(A,C):C.nextSibling?R?.insertBefore(A,C.nextSibling):R?.appendChild(A),A})(i,f,u),g=Gh(e,f,u);l.setStyle(v,"top",g.top),a=v;const b=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(b,{...g}),l.add(e,b),o.set({caret:b,element:f,before:u}),u&&l.addClass(b,"mce-visual-caret-before"),s=setInterval(()=>{o.on(h=>{r()?l.toggleClass(h.caret,"mce-visual-caret-hidden"):l.addClass(h.caret,"mce-visual-caret-hidden")})},500),p=f.ownerDocument.createRange(),p.setStart(v,0),p.setEnd(v,0)}return p},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(u=>{const f=Gh(e,u.element,u.before);l.setStyles(u.caret,{...f})})},destroy:()=>clearInterval(s)}})(t,r,n.isBlock,()=>ua(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=h=>h!==r&&(jl(h)||ko(h))&&n.isChildOf(h,r)&&n.isEditable(h.parentNode),c=(h,C,S,k=!0)=>t.dispatch("ShowCaret",{target:C,direction:h,before:S}).isDefaultPrevented()?null:(k&&e.scrollIntoView(C,-1===h),o.show(S,C)),u=h=>Nr(h)||gc(h)||hc(h),f=h=>u(h.startContainer)||u(h.endContainer),v=(h,C)=>{if(!h)return null;if(h.collapsed){if(!f(h)){const R=C?1:-1,D=il(R,r,h),P=D.getNode(!C);if(mt(P)){if(rl(P))return c(R,P,!!C&&!D.isAtEnd(),!1);if(vs(P)&&Re(P.nextSibling)){const Y=n.createRng();return Y.setStart(P,0),Y.setEnd(P,0),Y}}const U=D.getNode(C);if(mt(U)){if(rl(U))return c(R,U,!C&&!D.isAtEnd(),!1);if(vs(U)&&Re(U.previousSibling)){const Y=n.createRng();return Y.setStart(U,1),Y.setEnd(U,1),Y}}}return null}let S=h.startContainer,k=h.startOffset;const A=h.endOffset;if(lt(S)&&0===k&&jl(S.parentNode)&&(S=S.parentNode,k=n.nodeIndex(S),S=S.parentNode),!xt(S))return null;if(A===k+1&&S===h.endContainer){const R=S.childNodes[k];if(l(R))return(D=>{const P=D.cloneNode(!0),U=t.dispatch("ObjectSelected",{target:D,targetClone:P});if(U.isDefaultPrevented())return null;const Y=((L,z)=>{const I=O(t.getBody()),$=t.getDoc(),gt=wo(I,"#"+s).getOrThunk(()=>{const ht=st('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',$);return Xe(ht,"id",s),_t(I,ht),ht}),it=n.createRng();se(gt),ge(gt,[ut(ln,$),O(z),ut(ln,$)]),it.setStart(gt.dom.firstChild,1),it.setEnd(gt.dom.lastChild,0),ms(gt,{top:n.getPos(L,t.getBody()).y+"px"}),uv(gt);const Ot=e.getSel();return Ot&&(Ot.removeAllRanges(),Ot.addRange(it)),it})(D,U.targetClone),V=O(D);return rt(Dn(O(t.getBody()),`*[${a}]`),L=>{de(V,L)||on(L,a)}),n.getAttrib(D,a)||D.setAttribute(a,"1"),i=D,b(),Y})(R)}return null},g=()=>{i&&i.removeAttribute(a),wo(O(t.getBody()),"#"+s).each(Mt),i=null},b=()=>{o.hide()};return Do(t)||(t.on("click",h=>{n.isEditable(h.target)||(h.preventDefault(),t.focus())}),t.on("blur NewBlock",g),t.on("ResizeWindow FullscreenStateChanged",o.reposition),t.on("tap",h=>{const C=h.target,S=Pw(t,C);jl(S)?(h.preventDefault(),Nl(t,S).each(v)):l(C)&&Nl(t,C).each(v)},!0),t.on("mousedown",h=>{const C=h.target;if(C!==r&&"HTML"!==C.nodeName&&!n.isChildOf(C,r)||!((k,A,R)=>{const D=O(k.getBody()),P=k.inline?D:O(zn(D).dom.documentElement),U=((Y,V,L,z)=>{const I=V.dom.getBoundingClientRect();return{x:L-(Y?I.left+V.dom.clientLeft+kA(V):0),y:z-(Y?I.top+V.dom.clientTop+SA(V):0)}})(k.inline,P,A,R);return((Y,V,L)=>{const z=xA(Y),I=wA(Y);return V>=0&&L>=0&&V<=z&&L<=I})(P,U.x,U.y)})(t,h.clientX,h.clientY))return;g(),b();const S=Pw(t,C);jl(S)?(h.preventDefault(),Nl(t,S).each(v)):Sw(r,h.clientX,h.clientY).each(k=>{var A;h.preventDefault(),(A=c(1,k.node,k.position===mi.Before,!1))&&e.setRng(A),xt(S)?S.focus():t.getBody().focus()})}),t.on("keypress",h=>{kt.modifierPressed(h)||jl(e.getNode())&&h.preventDefault()}),t.on("GetSelectionRange",h=>{let C=h.range;if(i){if(!i.parentNode)return void(i=null);C=C.cloneRange(),C.selectNode(i),h.range=C}}),t.on("SetSelectionRange",h=>{h.range=(h=>{const C=t.schema.getVoidElements(),S=n.createRng(),k=h.startContainer,A=h.startOffset,R=h.endContainer,D=h.endOffset;return Zt(C,k.nodeName.toLowerCase())?0===A?S.setStartBefore(k):S.setStartAfter(k):S.setStart(k,A),Zt(C,R.nodeName.toLowerCase())?0===D?S.setEndBefore(R):S.setEndAfter(R):S.setEnd(R,D),S})(h.range);const C=v(h.range,h.forward);C&&(h.range=C)}),t.on("AfterSetSelectionRange",h=>{const C=h.range,S=C.startContainer.parentElement;var k,A;f(C)||xt(k=S)&&"mcepastebin"===k.id||b(),mt(A=S)&&n.hasClass(A,"mce-offscreen-selection")||g()}),(t=>{const e=Cs(),n=we.DOM,r=document,o=(l=e,c=t,u=>{if(0===u.button){const f=qe(c.dom.getParents(u.target),GT).getOr(null);if(mt(f)&&(p=c.dom,v=c.getBody(),Nw(g=f)&&g!==v&&p.isEditable(g.parentElement))){const p=c.dom.getPos(f),v=c.getBody(),g=c.getDoc().documentElement;l.set({element:f,dataTransfer:Mp(),dragging:!1,screenX:u.screenX,screenY:u.screenY,maxX:(c.inline?v.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?v.scrollHeight:g.offsetHeight)-2,relX:u.pageX-p.x,relY:u.pageY-p.y,width:f.offsetWidth,height:f.offsetHeight,ghost:YT(c,f,f.offsetWidth,f.offsetHeight),intervalId:wk(100)})}}var p,v,g}),s=((t,e)=>{const n=kc((o,s)=>{return i=o,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void Sw(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),c=>{const u=a._selectionOverrides.showCaret(1,c.node,c.position===mi.Before,!1);u?a.selection.setRng(u):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const r=t;return o=>t.on(s=>{const a=Math.max(Math.abs(o.screenX-s.screenX),Math.abs(o.screenY-s.screenY));if(!s.dragging&&a>10){const c=Fl(e,"dragstart",s.element,s.dataTransfer,o);if(mt(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const c=o.currentTarget===e.getDoc().documentElement,u=((f,p)=>({pageX:p.pageX-f.relX,pageY:p.pageY+5}))(s,(p=o,v=(h=f=e).inline?kw(h.getBody()):{left:0,top:0},g=(h=>{const C=h.getBody();return h.inline?{left:C.scrollLeft,top:C.scrollTop}:{left:0,top:0}})(f),b=((h,C)=>{if(C.target.ownerDocument!==h.getDoc()){const S=kw(h.getContentAreaContainer()),k=(A=>{const R=A.getBody(),D=A.getDoc().documentElement;return A.inline?{left:R.scrollLeft,top:R.scrollTop}:{left:R.scrollLeft||D.scrollLeft,top:R.scrollTop||D.scrollTop}})(h);return{left:C.pageX-S.left+k.left,top:C.pageY-S.top+k.top}}return{left:C.pageX,top:C.pageY}})(f,p),{pageX:b.left-v.left+g.left,pageY:b.top-v.top+g.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((f,p,v,g,b,h,C,S,k,A,R,D)=>{let P=0,U=0;f.style.left=p.pageX+"px",f.style.top=p.pageY+"px",p.pageX+v>b&&(P=p.pageX+v-b),p.pageY+g>h&&(U=p.pageY+g-h),f.style.width=v-P+"px",f.style.height=g-U+"px";const Y=k.clientHeight,V=k.clientWidth,L=C+k.getBoundingClientRect().top,z=S+k.getBoundingClientRect().left;R.on(I=>{I.intervalId.clear(),I.dragging&&D&&(C+8>=Y?I.intervalId.set(Tw(A)):C-8<=0?I.intervalId.set(Rw(A)):S+8>=V?I.intervalId.set(Aw(A)):S-8<=0?I.intervalId.set(_w(A)):L+16>=window.innerHeight?I.intervalId.set(Tw(window)):L-16<=0?I.intervalId.set(Rw(window)):z+16>=window.innerWidth?I.intervalId.set(Aw(window)):z-16<=0&&I.intervalId.set(_w(window)))})})(s.ghost,u,s.width,s.height,s.maxX,s.maxY,o.clientY,o.clientX,e.getContentAreaContainer(),e.getWin(),r,c),n.throttle(o.clientX,o.clientY)}var f,p,h,v,g,b,i,l})})(e,t),a=((l,c)=>u=>{l.on(f=>{var p,v,g,b;if(f.intervalId.clear(),f.dragging){if(v=c,g=(v=>{const g=v.getSel();if(mt(g)){const b=g.getRangeAt(0).startContainer;return lt(b)?b.parentNode:b}return null})(c.selection),b=f.element,!ye(g)&&g!==b&&!v.dom.isChildOf(g,b)&&v.dom.isEditable(g)){const v=null!==(p=c.getDoc().elementFromPoint(u.clientX,u.clientY))&&void 0!==p?p:c.getBody();Fl(c,"drop",v,f.dataTransfer,u).isDefaultPrevented()||c.undoManager.transact(()=>{((g,b)=>{const h=g.getParent(b.parentNode,g.isBlock);Ow(b),h&&h!==g.getRoot()&&g.isEmpty(h)&&hs(O(h))})(c.dom,f.element),(g=>{const b=g.getData("text/html");return""===b?E.none():E.some(b)})(f.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}Fl(c,"dragend",c.getBody(),f.dataTransfer,u)}}),Bw(l)})(e,t),i=((l,c)=>u=>Dw(l,c,E.some(u)))(e,t);var l,c;t.on("mousedown",o),t.on("mousemove",s),t.on("mouseup",a),n.bind(r,"mousemove",s),n.bind(r,"mouseup",i),t.on("remove",()=>{n.unbind(r,"mousemove",s),n.unbind(r,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===kt.ESC&&Dw(e,t,E.none())})})(h=t),yE(h)&&(C=>{const S=R=>{if(!R.isDefaultPrevented()){const D=R.dataTransfer;D&&(Tt(D.types,"Files")||D.files.length>0)&&(R.preventDefault(),"drop"===R.type&&gd(C,"Dropped file type is not supported"))}},k=R=>{Xc(C,R.target)&&S(R)},A=()=>{const R=we.DOM,D=C.dom,P=document,U=C.inline?C.getBody():C.getDoc(),Y=["drop","dragover"];rt(Y,V=>{R.bind(P,V,k),D.bind(U,V,S)}),C.on("remove",()=>{rt(Y,V=>{R.unbind(P,V,k),D.unbind(U,V,S)})})};C.on("init",()=>{Tr.setEditorTimeout(C,A,0)})})(h),(h=>{const C=kc(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const S=h.selection.getRng();if(S.collapsed){const k=Km(h,S,!1);h.selection.setRng(k)}}},0);h.on("focus",()=>{C.throttle()}),h.on("blur",()=>{C.cancel()})})(t),(h=>{h.on("init",()=>{h.on("focusin",C=>{const S=C.target;if(ko(S)){const k=pa(h.getBody(),S),A=Re(k)?k:S;h.selection.getNode()!==A&&Nl(h,A).each(R=>h.selection.setRng(R))}})})})(t)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&(bu(h),e.scrollIntoView(h))},hideFakeCaret:b,destroy:()=>{o.destroy(),i=null}};var h},tO=(t,e)=>{let n=e;for(let r=t.previousSibling;lt(r);r=r.previousSibling)n+=r.data.length;return n},Lw=(t,e,n,r,o)=>{if(lt(n)&&(r<0||r>n.data.length))return[];const s=o&&lt(n)?[tO(n,r)]:[r];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,o)),a=a.parentNode;return a===e?s.reverse():[]},Wp=(t,e,n,r,o,s,a=!1)=>({start:Lw(t,e,n,r,a),end:Lw(t,e,o,s,a)}),Mw=(t,e)=>{const n=e.slice(),r=n.pop();return x(r)?bn(n,(o,s)=>o.bind(a=>E.from(a.childNodes[s])),E.some(t)).bind(o=>lt(o)&&(r<0||r>o.data.length)?E.none():E.some({node:o,offset:r})):E.none()},Iw=(t,e)=>Mw(t,e.start).bind(({node:n,offset:r})=>Mw(t,e.end).map(({node:o,offset:s})=>{const a=document.createRange();return a.setStart(n,r),a.setEnd(o,s),a})),pi=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const r=e.parentNode;t.remove(e),pi(t,r,n)}},$d=(t,e,n,r=!0)=>{const o=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),r&&!n(e.startContainer)&&(lt(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),lt(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),pi(t,o,n),o!==s&&pi(t,s,n))},Vp=(t,e)=>E.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),Fw=(t,e,n)=>{const r=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:kh(r).concat(t.blockPatterns),inlinePatterns:Eh(r).concat(t.inlinePatterns)}},jw=(t,e,n,r)=>{const o=t.createRng();return o.setStart(e,0),o.setEnd(n,r),o.toString()},zw=(t,e,n)=>{((r,o,s)=>{if(lt(r)&&0>=r.length)return E.some(fo(r,0));{const a=ea(Ed);return E.from(a.forwards(r,0,Nd(r),s)).map(i=>fo(i.container,0))}})(e,0,e).each(r=>{const o=r.container;nx(o,n.start.length,e).each(i=>{const l=t.createRng();l.setStart(o,0),l.setEnd(i.container,i.offset),$d(t,l,c=>c===e)});const s=O(o),a=dc(s);var i,l;/^\s[^\s]/.test(a)&&(i=s,l=a.slice(1),pu.set(i,l))})},Hw=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),Wd=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},Uw=(t,e,n)=>{const r=Iw(t.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,s=r.endContainer,a=0===r.endOffset?s:s.splitText(r.endOffset),i=0===r.startOffset?o:o.splitText(r.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(Hw(t,e+"-end"),a),start:l.insertBefore(Hw(t,e+"-start"),i)}},qw=(t,e,n)=>{pi(t,t.get(e.prefix+"-end"),n),pi(t,t.get(e.prefix+"-start"),n)},Kp=t=>0===t.start.length,$w=(t,e,n,r)=>{const o=e.start;var s;return gp(t,r.container,r.offset,(s=o,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),u=l.lastIndexOf(s);return-1!==u?u+s.length:-1!==c?c+1:-1}),n).bind(a=>{var i,l;const c=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(o))&&void 0!==l?l:-1;if(-1!==c&&a.offset>=c+o.length){const u=t.createRng();return u.setStart(a.container,a.offset-o.length),u.setEnd(a.container,a.offset),E.some(u)}return pp(a.container,a.offset-o.length,n).map(f=>{const p=t.createRng();return p.setStart(f.container,f.offset),p.setEnd(a.container,a.offset),p}).filter(f=>f.toString()===o).orThunk(()=>$w(t,e,n,fo(a.container,0)))})},eO=(t,e,n,r)=>{const o=t.dom,s=o.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return pp(i,l-n.pattern.end.length,e).bind(c=>{const u=Wp(o,s,c.container,c.offset,i,l,r);if(Kp(a))return E.some({matches:[{pattern:a,startRng:u,endRng:u}],position:c});{const f=Vd(t,n.remainingPatterns,c.container,c.offset,e,r),p=f.getOr({matches:[],position:c}),v=p.position;return((b,h,C,S,k,A=!1)=>{if(0===h.start.length&&!A){const R=b.createRng();return R.setStart(C,S),R.setEnd(C,S),E.some(R)}return mp(C,S,k).bind(R=>$w(b,h,k,R).bind(D=>{var P;return A&&(D.endContainer===R.container&&D.endOffset===R.offset||0===R.offset&&(null===(P=D.endContainer.textContent)||void 0===P?void 0:P.length)===D.endOffset)?E.none():E.some(D)}))})(o,a,v.container,v.offset,e,f.isNone()).map(b=>{const h=((C,S,k,A=!1)=>Wp(C,S,k.startContainer,k.startOffset,k.endContainer,k.endOffset,A))(o,s,b,r);return{matches:p.matches.concat([{pattern:a,startRng:h,endRng:u}]),position:fo(b.startContainer,b.startOffset)}})}})},Vd=(t,e,n,r,o,s)=>{const a=t.dom;return mp(n,r,a.getRoot()).bind(i=>{const l=jw(a,o,n,r);for(let c=0;c<e.length;c++){const u=e[c];if(!Fs(l,u.end))continue;const f=e.slice();f.splice(c,1);const p=eO(t,o,{pattern:u,remainingPatterns:f,position:i},s);if(p.isNone()&&r>0)return Vd(t,e,n,r-1,o,s);if(p.isSome())return p}return E.none()})},Ww=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?rt(e.format,r=>{t.formatter.apply(r)}):t.execCommand(e.cmd,!1,e.value)},Vw=(t,e,n,r,o,s)=>{var a;return((i,l)=>{const c=mr(i,u=>Ae(l,f=>u.pattern.start===f.pattern.start&&u.pattern.end===f.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(Vd(t,o.inlinePatterns,n,r,e,s).fold(()=>[],i=>i.matches),Vd(t,(a=o.inlinePatterns,zo(a,(i,l)=>l.end.length-i.end.length)),n,r,e,s).fold(()=>[],i=>i.matches))},Kw=(t,e)=>{if(0===e.length)return;const n=t.dom,r=t.selection.getBookmark(),o=((s,a)=>{const i=Gi("mce_textpattern"),l=jo(a,(c,u)=>{const f=Uw(s,i+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return jo(l,(c,u)=>{const f=l.length-c.length-1,p=Kp(u.pattern)?u.endMarker:Uw(s,i+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:p}])},[])})(n,e);rt(o,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;Kp(s.pattern)?((l,c,u,f)=>{const p=Wd(l.dom,u);$d(l.dom,p,f),Ww(l,c,p)})(t,s.pattern,s.endMarker,i):((l,c,u,f,p)=>{const v=l.dom,g=Wd(v,f),b=Wd(v,u);$d(v,b,p),$d(v,g,p);const C=Wd(v,{prefix:u.prefix,start:u.end,end:f.start});Ww(l,c,C)})(t,s.pattern,s.startMarker,s.endMarker,i),qw(n,s.endMarker,i),qw(n,s.startMarker,i)}),t.selection.moveToBookmark(r)},Xw=(t,e,n)=>{for(let r=0;r<t.length;r++)if(n(t[r],e))return!0;return!1},Xp=we.DOM,oO=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,Gp=t=>xr(t,e=>!1===De(e)),Gw=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return Gp({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:oO(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},Yw=t=>{const e=t.options.get;return Gp({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},Qw=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,Jw=t=>{const e=Qw(t),n=Mh(t),r=t.contentCSS,o=()=>{e.unloadAll(r),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?o():t.on("remove",o)};if(t.contentStyles.length>0){let l="";dt.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,c,u)=>{const f=[Qw(l).loadAll(c)];return l.inline?f:f.concat([l.ui.styleSheetLoader.loadAll(u)])})(t,r,n)).then(s).catch(s),i=Jk(t);return i&&((l,c)=>{const u=O(l.getBody()),f=He(Te(u)),p=X("style");Xe(p,"type","text/css"),_t(p,ut(c)),_t(f,p),l.on("remove",()=>{Mt(p)})})(t,i),a},Yp=t=>{var e;!0!==t.removed&&(Do(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||Fc(r)&&r.selection.getStart(!0)!==o||qn(o).each(s=>{const a=s.getNode(),i=Xo(a)?qn(a).getOr(s):s;r.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=kE(e);pe(n)&&n.call(e,e),(r=>{const o=NE(r);o&&Tr.setEditorTimeout(r,()=>{let s;s=!0===o?r:r.editorManager.get(o),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},Zw=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(Xp.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const r=t.getBody();var a;r.disabled=!0,t.readonly=jh(t),t._editableRoot=vE(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===Xp.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let b=[];const h=k=>{if(!k.blob||!k.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const A=k.id||"blobid"+NA+++(()=>{const U=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+U()+U()+U()})(),R=k.name||A,D=k.blob;var P;return{id:pt(A),name:pt(R),filename:pt(k.filename||R+"."+(P=D.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[P.toLowerCase()]||"dat")),blob:pt(D),base64:pt(k.base64),blobUri:pt(k.blobUri||URL.createObjectURL(D)),uri:pt(k.uri)}},C=k=>qe(b,k).getOrUndefined(),S=k=>C(A=>A.id()===k);return{create:(k,A,R,D,P)=>{if(Dt(k))return h({id:k,name:D,filename:P,blob:A,base64:R});if(Vt(k))return h(k);throw new Error("Unknown input type")},add:k=>{S(k.id())||b.push(k)},get:S,getByUri:k=>C(A=>A.blobUri()===k),getByData:(k,A)=>C(R=>R.base64()===k&&R.blob().type===A),findFirst:C,removeByUri:k=>{b=$t(b,A=>A.blobUri()!==k||(URL.revokeObjectURL(A.blobUri()),!1))},destroy:()=>{rt(b,k=>{URL.revokeObjectURL(k.blobUri())}),b=[]}}})();let n,r;const o=p1(),s=[],a=b=>h=>t.selection?b(h):[],i=(b,h,C)=>{let S=0;do{S=b.indexOf(h,S),-1!==S&&(b=b.substring(0,S)+C+b.substr(S+h.length),S+=C.length-h.length+1)}while(-1!==S);return b},l=(b,h,C)=>(b=i(b,`src="${h}"`,`src="${C}"${C===fe.transparentSrc?' data-mce-placeholder="1"':""}`),i(b,'data-mce-src="'+h+'"','data-mce-src="'+C+'"')),c=(b,h)=>{rt(t.undoManager.data,C=>{"fragmented"===C.type?C.fragments=re(C.fragments,S=>l(S,b,h)):C.content=l(C.content,b,h)})},u=()=>(n||(n=h1(t,o)),v().then(a(b=>{const h=re(b,C=>C.blobInfo);return n.upload(h,g1(t)).then(a(C=>{const S=[];let k=!1;const A=re(C,(R,D)=>{const{blobInfo:P,image:U}=b[D];let Y=!1;return R.status&&Uk(t)?(R.url&&!ze(U.src,R.url)&&(k=!0),e.removeByUri(U.src),Do(t)||((V,L)=>{const z=t.convertURL(L,"src");var I;c(V.src,L),Qr(O(V),{src:Dh(t)?(I=L,I+(-1===I.indexOf("?")?"?":"&")+(new Date).getTime()):L,"data-mce-src":z})})(U,R.url)):R.error&&(R.error.remove&&(c(U.src,fe.transparentSrc),S.push(U),Y=!0),gd(t,ao.translate(["Failed to upload image: {0}",R.error.message]))),{element:U,status:R.status,uploadUri:R.url,blobInfo:P,removed:Y}});return S.length>0&&!Do(t)?t.undoManager.transact(()=>{rt(ae(S),R=>{const D=xe(R);var P;Mt(R),D.each((P=t,U=>{var Y,V;(Y=P).dom.isEmpty((V=U).dom)&&mt(Y.schema.getTextBlockElements()[Ee(V)])&&_t(U,st('<br data-mce-bogus="1" />'))})),e.removeByUri(R.dom.src)})}):k&&t.undoManager.dispatchChange(),A}))}))),f=()=>Oh(t)?u():Promise.resolve([]),p=b=>mr(s,h=>h(b)),v=()=>(r||(r=((t,e)=>{const n={};return{findAll:(r,o=Be)=>{const s=$t((i=r)?Ye(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===fe.transparentSrc)&&(Je(l,"blob:")?!t.isUploaded(l)&&o(i):!!Je(l,"data:")&&o(i))}),a=re(s,i=>{const l=i.src;if(Zt(n,l))return n[l].then(c=>Dt(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((u,f)=>{const p=()=>Promise.reject("Invalid data URI");if(Je(f,"blob:")){const b=u.getByUri(f);return mt(b)?Promise.resolve(b):(v=f,Je(v,"blob:")?(h=v,fetch(h).then(C=>C.ok?C.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${h} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Je(v,"data:")?(g=v,new Promise((h,C)=>{Sm(g).bind(({type:S,data:k,base64Encoded:A})=>hy(S,k,A)).fold(()=>C("Invalid data URI"),h)})):Promise.reject("Unknown URI format")).then(h=>vy(h).then(C=>by(C,!1,S=>E.some(yy(u,h,S))).getOrThunk(p)))}var h,v,g;return Je(f,"data:")?Cy(u,f).fold(p,b=>Promise.resolve(b)):Promise.reject("Unknown image data format")})(e,l).then(u=>(delete n[l],{image:i,blobInfo:u})).catch(u=>(delete n[l],u));return n[l]=c,c}});var i;return Promise.all(a)}}})(o,e)),r.findAll(t.getBody(),p).then(a(b=>{const h=$t(b,C=>Dt(C)?(gd(t,C),!1):"blob"!==C.uriType);return Do(t)||rt(h,C=>{c(C.image.src,C.blobInfo.blobUri()),C.image.src=C.blobInfo.blobUri(),C.image.removeAttribute("data-mce-src")}),h}))),g=b=>b.replace(/src="(blob:[^"]+)"/g,(h,C)=>{const S=o.getResultUri(C);if(S)return'src="'+S+'"';let k=e.getByUri(C);return k||(k=bn(t.editorManager.get(),(A,R)=>A||R.editorUpload&&R.editorUpload.blobCache.getByUri(C),void 0)),k?'src="data:'+k.blob().type+";base64,"+k.base64()+'"':h});return t.on("SetContent",()=>{Oh(t)?f():v()}),t.on("RawSaveContent",b=>{b.content=g(b.content)}),t.on("GetContent",b=>{b.source_view||"raw"===b.format||"tree"===b.format||(b.content=g(b.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",b=>{rt(b,h=>{const C=h.attr("src");if(!C||e.getByUri(C))return;const S=o.getResultUri(C);S&&h.attr("src",S)})})}),{blobCache:e,addFilter:b=>{s.push(b)},uploadImages:u,uploadImagesAuto:f,scanForImages:v,destroy:()=>{e.destroy(),o.destroy(),r=n=null}}})(t),t.schema=ys(Yw(t)),t.dom=we(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Xk(t),referrerPolicy:Vu(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=oi(Gw(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const u=a.dom,f="data-mce-"+c;let p=l.length;for(;p--;){const v=l[p];let g=v.attr(c);if(g&&!v.attr(f)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===c?(g=u.serializeStyle(u.parseStyle(g),v.name),g.length||(g=null),v.attr(f,g),v.attr(c,g)):"tabindex"===c?(v.attr(f,g),v.attr(c,null)):v.attr(f,a.convertURL(g,c,v.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const u=l[c],f=u.attr("type")||"no/type";0!==f.indexOf("mce-")&&u.attr("type","mce-"+f)}}),$E(a)&&i.addNodeFilter("#cdata",l=>{var c;let u=l.length;for(;u--;){const f=l[u];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode(null!==(c=f.value)&&void 0!==c?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const u=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(u)&&0===f.getAll("br").length&&f.append(new rr("br",1))}}),i})(t),t.serializer=o1((a=>{const i=a.options.get;return{...Gw(a),...Yw(a),...Gp({remove_trailing_brs:i("remove_trailing_brs"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=r1(t.dom,t.getWin(),t.serializer,t),t.annotator=F0(t),t.formatter=y1(t),t.undoManager=x1(t),t._nodeChangeDispatcher=new CT(t),t._selectionOverrides=ZT(t),(a=>{const i=Cs(),l=cn(!1),c=Lu(u=>{a.dispatch("longpress",{...u,type:"longpress"}),l.set(!0)},400);a.on("touchstart",u=>{NC(u).each(f=>{c.cancel();const p={x:f.clientX,y:f.clientY,target:u.target};c.throttle(u),l.set(!1),i.set(p)})},!0),a.on("touchmove",u=>{c.cancel(),NC(u).each(f=>{i.on(p=>{((v,g)=>{const b=Math.abs(v.clientX-g.x),h=Math.abs(v.clientY-g.y);return b>5||h>5})(f,p)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",u=>{c.cancel(),"touchcancel"!==u.type&&i.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{l.get()?u.preventDefault():a.dispatch("tap",{...u,type:"tap"})})},!0)})(t),(t=>{var e;(e=t).on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()}),(e=>{e.parser.addNodeFilter("details",n=>{const r=XE(e);rt(n,o=>{"expanded"===r?o.attr("open","open"):"collapsed"===r&&o.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const r=GE(e);rt(n,o=>{"expanded"===r?o.attr("open","open"):"collapsed"===r&&o.attr("open",null)})})})(t),(e=>{e.on("keydown",n=>{n.keyCode!==kt.BACKSPACE&&n.keyCode!==kt.DELETE||((r,o)=>{const s=E.from(r.getParent(o.startContainer,"details")),a=E.from(r.getParent(o.endContainer,"details"));if(s.isSome()||a.isSome()){const i=s.bind(l=>E.from(r.select("summary",l)[0]));return E.some({startSummary:i,startDetails:s,endDetails:a})}return E.none()})(e.dom,e.selection.getRng()).fold(()=>{((r,o)=>{const{dom:s,selection:a}=r,i=r.getBody();if(r.selection.isCollapsed()){const l=G.fromRangeStart(a.getRng()),c=s.getParent(l.container(),s.isBlock);if(c&&s.isEmpty(c))if(Qt(c.nextSibling)){const u=nr(i,l).filter(f=>qp(s,f));if(u.isSome())return u.each(f=>{o||bw(r,f)}),!0}else if(Qt(c.previousSibling)&&Un(i,l).filter(u=>qp(s,u)))return!0;return ll(o,i,l).fold(Ce,u=>!!qp(s,u)&&(c&&s.isEmpty(c)&&r.dom.remove(c),o||bw(r,u),!0))}return!1})(e,n.keyCode===kt.DELETE)&&n.preventDefault()},r=>{((t,e,n)=>{const r=t.selection,o=r.getNode(),s=r.getRng(),a=n.keyCode===kt.BACKSPACE,i=n.keyCode===kt.DELETE,l=t.selection.isCollapsed(),c=G.fromRangeStart(s),u=t.getBody();return!((l||!((f,p)=>{const v=p.startSummary.exists(h=>h.contains(f.startContainer)),g=p.startSummary.exists(h=>h.contains(f.endContainer)),b=p.startDetails.forall(h=>p.endDetails.forall(C=>h!==C));return(v||g)&&!(v&&g)||b})(s,e))&&!(l&&a&&(f=c,p=e,p.startSummary.exists(v=>{return g=f,qn(v).exists(h=>h.isEqual(g));var g})))&&!(l&&i&&((f,p)=>p.startSummary.exists(v=>{return g=f,$r(b=v).exists(h=>Ie(h.getNode())&&nr(b,h).exists(C=>C.isEqual(g))||h.isEqual(g));var g,b}))(c,e))&&!(l&&a&&((f,p)=>p.startDetails.exists(v=>nr(v,f).forall(g=>p.startSummary.exists(b=>!b.contains(f.container())&&b.contains(g.container())))))(c,e))&&!(l&&i&&((f,p,v)=>v.startDetails.exists(g=>Un(f,p).forall(b=>!g.contains(b.container()))))(u,c,e))&&(!FT||!HS(o)||(!l&&pw(s,o)||ib(i,c,o)?fw(o):t.undoManager.transact(()=>{const f=r.getSel();let{anchorNode:p,anchorOffset:v,focusNode:g,focusOffset:b}=f??{};const h=()=>{mt(p)&&mt(v)&&mt(g)&&mt(b)&&f?.setBaseAndExtent(p,v,g,b)},C=(k,A)=>{rt(k.childNodes,R=>{dl(R)&&A.appendChild(R)})},S=t.dom.create("span",{"data-mce-bogus":"all"});C(o,S),o.appendChild(S),h(),l&&(vw&&(n.altKey||a&&n.metaKey)||!vw&&n.ctrlKey)&&f?.modify("extend",a?"left":"right",n.metaKey?"line":"word"),!r.isCollapsed()&&pw(r.getRng(),S)?fw(o):(t.execCommand(a?"Delete":"ForwardDelete"),p=f?.anchorNode,v=f?.anchorOffset,g=f?.focusNode,b=f?.focusOffset,C(S,o),h()),t.dom.remove(S)}),0)));var f,p})(e,r,n)&&n.preventDefault()})})})(t)})(t),(a=>{const i="contenteditable",l=" "+dt.trim(UE(a))+" ",c=" "+dt.trim(Uh(a))+" ",u=RC(l),f=RC(c),p=qE(a);p.length>0&&a.on("BeforeSetContent",v=>{((g,b,h)=>{let C=b.length,S=h.content;if("raw"!==h.format){for(;C--;)S=S.replace(b[C],vR(g,S,Uh(g)));h.content=S}})(a,p,v)}),a.parser.addAttributeFilter("class",v=>{let g=v.length;for(;g--;){const b=v[g];u(b)?b.attr(i,"true"):f(b)&&b.attr(i,"false")}}),a.serializer.addAttributeFilter(i,v=>{let g=v.length;for(;g--;){const b=v[g];(u(b)||f(b))&&(p.length>0&&b.attr("data-mce-content")?(b.name="#text",b.type=3,b.raw=!0,b.value=b.attr("data-mce-content")):b.attr(i,null))}})})(t),Do(t)||((a=t).on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,r)=>{const o=G.fromRangeStart(n).getNode(),s=(u=r,Qn(O(o),f=>so(f.dom)||Er(f),Cw(u)).getOr(O(u)).dom),a=ww(o,s,!1),i=ww(o,s,!0),l=document.createRange();var u;return xw(a,s).fold(()=>{yw(a)?l.setStart(a,0):l.setStartBefore(a)},c=>l.setStartBefore(c.dom)),xw(i,s).fold(()=>{yw(i)?l.setEnd(i,i.data.length):l.setEndAfter(i)},c=>l.setEndAfter(c.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(im(e))})(a))}),(a=>{(i=>{const l=[",",".",";",":","!","?"],c=[32],u=()=>{return v=zE(i),g=HE(i),{inlinePatterns:Eh(v),blockPatterns:kh(v),dynamicPatternsLookup:g};var v,g},f=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",v=>{if(13===v.keyCode&&!kt.modifierPressed(v)&&i.selection.isCollapsed()){const g=u();(g.inlinePatterns.length>0||g.blockPatterns.length>0||f())&&((t,e)=>{const n=t.selection.getRng();return Vp(t,n).map(r=>{var o;const s=Math.max(0,n.startOffset),a=Fw(e,r,null!==(o=r.textContent)&&void 0!==o?o:""),i=Vw(t,r,n.startContainer,s,a,!0),l=((c,u,f,p)=>{var v;const g=c.dom,b=er(c);if(!g.is(u,b))return[];const h=null!==(v=u.textContent)&&void 0!==v?v:"";return((C,S)=>{const k=zo(C,(D,P)=>P.start.length-D.start.length),A=S.replace(ln," ");return qe(k,R=>0===S.indexOf(R.start)||0===A.indexOf(R.start))})(f.blockPatterns,h).map(C=>dt.trim(h).length===C.start.length?[]:[{pattern:C,range:Wp(g,g.getRoot(),u,0,u,0,!0)}]).getOr([])})(t,r,a);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),Kw(t,i),((f,p)=>{if(0===p.length)return;const v=f.selection.getBookmark();rt(p,g=>((b,h)=>{const S=h.pattern,k=Iw(b.dom.getRoot(),h.range).getOrDie("Unable to resolve path range");return Vp(b,k).each(A=>{"block-format"===S.type?((R,D)=>{const P=D.get(R);return ct(P)&&_n(P).exists(U=>Zt(U,"block"))})(S.format,b.formatter)&&b.undoManager.transact(()=>{zw(b.dom,A,S),b.formatter.apply(S.format)}):"block-command"===S.type&&b.undoManager.transact(()=>{zw(b.dom,A,S),b.execCommand(S.cmd,!1,S.value)})}),!0})(f,g)),f.selection.moveToBookmark(v)})(t,l);const c=t.selection.getRng(),u=mp(c.startContainer,c.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),u.each(f=>{const p=f.container;"\ufeff"===p.data.charAt(f.offset-1)&&(p.deleteData(f.offset-1,1),pi(t.dom,p.parentNode,v=>v===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,g)&&v.preventDefault()}},!0);const p=()=>{if(i.selection.isCollapsed()){const v=u();(v.inlinePatterns.length>0||f())&&((g,b)=>{const h=g.selection.getRng();Vp(g,h).map(C=>{const S=Math.max(0,h.startOffset-1),k=jw(g.dom,C,h.startContainer,S),A=Fw(b,C,k),R=Vw(g,C,h.startContainer,S,A,!1);R.length>0&&g.undoManager.transact(()=>{Kw(g,R)})})})(i,v)}};i.on("keyup",v=>{Xw(c,v,(g,b)=>g===b.keyCode&&!kt.modifierPressed(b))&&p()}),i.on("keypress",v=>{Xw(l,v,(g,b)=>g.charCodeAt(0)===b.charCode)&&Tr.setEditorTimeout(i,p)})})(a)})(t));const o=yT(t);((t,e)=>{t.addCommand("delete",()=>{var n;EC(n=t,e,!1).fold(()=>{Kf(n),Xf(n)},Vn)}),t.addCommand("forwardDelete",()=>{var n;EC(n=t,e,!0).fold(()=>ab(n,"ForwardDelete"),Vn)})})(t,o),(a=>{a.on("NodeChange",St(hR,a))})(t),(a=>{var i;const l=a.dom,c=er(a),u=null!==(i=nE(a))&&void 0!==i?i:"",f=(p,v)=>{if((h=>{if(S1(h)){const C=h.keyCode;return!k1(h)&&(kt.metaKeyPressed(h)||h.altKey||C>=112&&C<=123||Tt(BA,C))}return!1})(p))return;const g=a.getBody(),b=!(S1(h=p)&&!(k1(h)||"keyup"===h.type&&229===h.keyCode))&&((h,C,S)=>{if(We(O(C),!1)){const k=C.firstElementChild;return!k||!h.getStyle(C.firstElementChild,"padding-left")&&!h.getStyle(C.firstElementChild,"padding-right")&&S===k.nodeName.toLowerCase()}return!1})(l,g,c);var h;(""!==l.getAttrib(g,w1)!==b||v)&&(l.setAttrib(g,w1,b?u:null),l.setAttrib(g,"aria-placeholder",b?u:null),((h,C)=>{h.dispatch("PlaceholderToggle",{state:C})})(a,b),a.on(b?"keydown":"keyup",f),a.off(b?"keyup":"keydown",f))};Xn(u)&&a.on("init",p=>{f(p,!0),a.on("change SetContent ExecCommand",f),a.on("paste",v=>Tr.setEditorTimeout(a,()=>f(v)))})})(t),(t=>{const e=cn(!1),n=cn(IE(t)?"text":"html"),r=(o=>{const s=cn(null);return{create:()=>((a,i)=>{const{dom:l,selection:c}=a,u=a.getBody();i.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Yx);fe.browser.isFirefox()&&l.setStyle(f,"left","rtl"===l.getStyle(u,"direction",!0)?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",p=>{p.stopPropagation()}),f.focus(),c.select(f,!0)})(o,s),remove:()=>((a,i)=>{const l=a.dom;if(Fp(a)){let c;const u=i.get();for(;c=Fp(a);)l.remove(c),l.unbind(c);u&&a.selection.setRng(u)}i.set(null)})(o,s),getEl:()=>Fp(o),getHtml:()=>(a=>{const i=a.dom,l=(p,v)=>{p.appendChild(v),i.remove(v,!0)},[c,...u]=$t(a.getBody().childNodes,AT);rt(u,p=>{l(c,p)});const f=i.select("div[id=mcepastebin]",c);for(let p=f.length-1;p>=0;p--){const v=i.create("div");c.insertBefore(v,f[p]),l(v,f[p])}return c?c.innerHTML:""})(o),getLastRng:s.get}})(t);var o,s,a;o=t,(fe.browser.isChromium()||fe.browser.isSafari())&&(a=LT,(s=o).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((o,s)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),W0(a,!1)):(i.set("text"),W0(a,!0)),a.focus()})(o,s)}),o.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Ud(o,i.html,i.internal),i.text&&Hp(o,i.text)})})(t,n),(o=>{const s=l=>c=>{l(o,c)},a=TE(o);pe(a)&&o.on("PastePreProcess",s(a));const i=OE(o);pe(i)&&o.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(o=>{o.on("cut",(s=>a=>{!a.isDefaultPrevented()&&lw(s)&&sw(a,iw(s),aw(s),()=>{if(fe.browser.isChromium()||fe.browser.isFirefox()){const i=s.selection.getRng();Tr.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(o)),o.on("copy",(s=>a=>{!a.isDefaultPrevented()&&lw(s)&&sw(a,iw(s),aw(s),Nt)})(o))})(t),((o,s)=>{RE(o)&&o.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Tc(o)||o.on("drop",a=>{const i=a.dataTransfer;i&&Ae(i.files,c=>/^image\//.test(c.type))&&a.preventDefault()}),o.on("drop",a=>{if(a.isDefaultPrevented())return;const i=cw(o,a);if(ye(i))return;const l=nw(a.dataTransfer),c=Os(l,Hd());if((!rw(l)||(v=>{const g=v["text/plain"];return!!g&&0===g.indexOf("file://")})(l))&&ow(o,a,i))return;const u=l[Hd()],f=u||l["text/html"]||l["text/plain"],p=((v,g,b,h)=>{const C=v.getParent(b,S=>Ys(g,S));if(C&&Zt(h,"text/html")){const S=(new DOMParser).parseFromString(h["text/html"],"text/html").body;return!Qt(S.querySelector(C.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,i.startContainer,l);s.get()&&!p||f&&(a.preventDefault(),Tr.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{u&&o.execCommand("Delete"),dw(o,i);const v=Zx(f);l["text/html"]?Ud(o,v,c):Hp(o,v)})}))}),o.on("dragstart",a=>{s.set(!0)}),o.on("dragover dragend",a=>{Tc(o)&&!s.get()&&(a.preventDefault(),dw(o,cw(o,a))),"dragend"===a.type&&s.set(!1)})})(t,e),((t,e,n)=>{((r,o,s)=>{let a;r.on("keydown",i=>{var l;(kt.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),r.on("paste",i=>{if(i.isDefaultPrevented()||(u=i,fe.os.isAndroid()&&0===(null===(p=null===(f=u.clipboardData)||void 0===f?void 0:f.items)||void 0===p?void 0:p.length)))return;var u,f,p;const l="text"===s.get()||a;a=!1;const c=nw(i.clipboardData);!rw(c)&&ow(r,i,o.getLastRng()||r.selection.getRng())||(i.preventDefault(),Os(c,"text/html")?Up(r,c,c["text/html"],l):Os(c,"text/plain")&&Os(c,"text/uri-list")?Up(r,c,c["text/plain"],l):(o.create(),Tr.setEditorTimeout(r,()=>{const u=o.getHtml();o.remove(),Up(r,c,u,l)},0)))})})(t,e,n),(r=>{const o=a=>Je(a,"webkit-fake-url"),s=a=>Je(a,"data:");r.parser.addNodeFilter("img",(a,i,l)=>{if(!Tc(r)&&!0===(null===(u=l.data)||void 0===u?void 0:u.paste))for(const c of a){const u=c.attr("src");Dt(u)&&!c.attr("data-mce-object")&&u!==fe.transparentSrc&&(o(u)||!jE(r)&&s(u))&&c.remove()}var u})})(t)})(t,r,n)})})(t);const s=(a=>{const i=a;return(l=a,ke(l.plugins,"rtc").bind(c=>E.from(c.setup))).fold(()=>(i.rtcInstance=Qy(a),E.none()),l=>(i.rtcInstance=(()=>{const c=pt(null),u=pt("");return{init:{bindEvents:Nt},undoManager:{beforeChange:Nt,add:c,undo:c,redo:c,clear:Nt,reset:Nt,hasUndo:Ce,hasRedo:Ce,transact:c,ignore:Nt,extra:Nt},formatter:{match:Ce,matchAll:pt([]),matchNode:pt(void 0),canApply:Ce,closest:u,apply:Nt,remove:Nt,toggle:Nt,formatChanged:pt({unbind:Nt})},editor:{getContent:u,setContent:pt({content:"",html:""}),insertContent:pt(""),addVisual:Nt},selection:{getContent:u},autocompleter:{addDecoration:Nt,removeDecoration:Nt},raw:{getModel:pt(E.none())}}})(),E.some(()=>l().then(c=>(i.rtcInstance=(u=>{const f=k=>Vt(k)?k:{},{init:p,undoManager:v,formatter:g,editor:b,selection:h,autocompleter:C,raw:S}=u;return{init:{bindEvents:p.bindEvents},undoManager:{beforeChange:v.beforeChange,add:v.add,undo:v.undo,redo:v.redo,clear:v.clear,reset:v.reset,hasUndo:v.hasUndo,hasRedo:v.hasRedo,transact:(k,A,R)=>v.transact(R),ignore:(k,A)=>v.ignore(A),extra:(k,A,R,D)=>v.extra(R,D)},formatter:{match:(k,A,R,D)=>g.match(k,f(A),D),matchAll:g.matchAll,matchNode:g.matchNode,canApply:k=>g.canApply(k),closest:k=>g.closest(k),apply:(k,A,R)=>g.apply(k,f(A)),remove:(k,A,R,D)=>g.remove(k,f(A)),toggle:(k,A,R)=>g.toggle(k,f(A)),formatChanged:(k,A,R,D,P)=>g.formatChanged(A,R,D,P)},editor:{getContent:k=>b.getContent(k),setContent:(k,A)=>({content:b.setContent(k,A),html:""}),insertContent:(k,A)=>(b.insertContent(k),""),addVisual:b.addVisual},selection:{getContent:(k,A)=>h.getContent(A)},autocompleter:{addDecoration:C.addDecoration,removeDecoration:C.removeDecoration},raw:{getModel:()=>E.some(S.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),_E(a)||(i.body.spellcheck=!1,Xp.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=dt.each,n=kt.BACKSPACE,r=kt.DELETE,o=t.dom,s=t.selection,a=t.parser,i=fe.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),u=fe.deviceType.isiPhone()||fe.deviceType.isiPad(),f=fe.os.isMacOS()||fe.os.isiOS(),p=(L,z)=>{try{t.getDoc().execCommand(L,!1,String(z))}catch{}},v=L=>L.isDefaultPrevented(),g=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{t.inline||o.bind(t.getDoc(),"mousedown mouseup",L=>{let z;if(L.target===t.getDoc().documentElement)if(z=s.getRng(),t.getBody().focus(),"mousedown"===L.type){if(Nr(z.startContainer))return;s.placeCaretAt(L.clientX,L.clientY)}else s.setRng(z)})},h=()=>{Range.prototype.getClientRects||t.on("mousedown",L=>{if(!v(L)&&"HTML"===L.target.nodeName){const z=t.getBody();z.blur(),Tr.setEditorTimeout(t,()=>{z.focus()})}})},C=()=>{const L=Hh(t);t.on("click",z=>{const I=z.target;/^(IMG|HR)$/.test(I.nodeName)&&o.isEditable(I.parentNode)&&(z.preventDefault(),t.selection.select(I),t.nodeChanged()),"A"===I.nodeName&&o.hasClass(I,L)&&0===I.childNodes.length&&o.isEditable(I.parentNode)&&(z.preventDefault(),s.select(I))})},S=()=>{t.on("keydown",L=>{if(!v(L)&&L.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const z=s.getNode().previousSibling;if(z&&z.nodeName&&"table"===z.nodeName.toLowerCase())return L.preventDefault(),!1}return!0})},k=()=>{jh(t)||t.on("BeforeExecCommand mousedown",()=>{p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),Ih(t)||p("enableObjectResizing",!1)})},A=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},R=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},D=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",L=>{let z;"HTML"===L.target.nodeName&&(z=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(z),t.selection.normalize(),t.nodeChanged())}))},P=()=>{f&&t.on("keydown",L=>{!kt.metaKeyPressed(L)||L.shiftKey||37!==L.keyCode&&39!==L.keyCode||(L.preventDefault(),t.selection.getSel().modify("move",37===L.keyCode?"backward":"forward","lineboundary"))})},U=()=>{t.on("click",L=>{let z=L.target;do{if("A"===z.tagName)return void L.preventDefault()}while(z=z.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Y=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",L=>{L.preventDefault()})})},V=Nt;return Do(t)?(c&&(b(),C(),Y(),g(),u&&(R(),D(),U())),l&&(h(),k(),A(),P())):(t.on("keydown",L=>{if(v(L)||L.keyCode!==kt.BACKSPACE)return;let z=s.getRng();const I=z.startContainer,$=z.startOffset,gt=o.getRoot();let it=I;if(z.collapsed&&0===$){for(;it.parentNode&&it.parentNode.firstChild===it&&it.parentNode!==gt;)it=it.parentNode;"BLOCKQUOTE"===it.nodeName&&(t.formatter.toggle("blockquote",void 0,it),z=o.createRng(),z.setStart(I,0),z.setEnd(I,0),s.setRng(z))}}),(()=>{const L=z=>{const I=o.create("body"),$=z.cloneContents();return I.appendChild($),s.serializer.serialize(I,{format:"html"})};t.on("keydown",z=>{const I=z.keyCode;if(!v(z)&&(I===r||I===n)&&t.selection.isEditable()){const $=t.selection.isCollapsed(),gt=t.getBody();if($&&!o.isEmpty(gt)||!$&&!(it=>{const Ot=L(it),ht=o.createRng();return ht.selectNode(t.getBody()),Ot===L(ht)})(t.selection.getRng()))return;z.preventDefault(),t.setContent(""),gt.firstChild&&o.isBlock(gt.firstChild)?t.selection.setCursorLocation(gt.firstChild,0):t.selection.setCursorLocation(gt,0),t.nodeChanged()}})})(),fe.windowsPhone||t.on("keyup focusin mouseup",L=>{kt.modifierPressed(L)||(z=>{const I=z.getBody(),$=z.selection.getRng();return $.startContainer===$.endContainer&&$.startContainer===I&&0===$.startOffset&&$.endOffset===I.childNodes.length})(t)||s.normalize()},!0),c&&(b(),C(),t.on("init",()=>{p("DefaultParagraphSeparator",er(t))}),Y(),S(),a.addNodeFilter("br",L=>{let z=L.length;for(;z--;)"Apple-interchange-newline"===L[z].attr("class")&&L[z].remove()}),u?(R(),D(),U()):g()),l&&(t.on("keydown",L=>{if(!v(L)&&L.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const z=s.getNode(),I=z.previousSibling;if("HR"===z.nodeName)return o.remove(z),void L.preventDefault();I&&I.nodeName&&"hr"===I.nodeName.toLowerCase()&&(o.remove(I),L.preventDefault())}}}),h(),(()=>{const L=()=>{const I=o.getAttribs(s.getStart().cloneNode(!1));return()=>{const $=s.getStart();$!==t.getBody()&&(o.setAttrib($,"style",null),e(I,gt=>{$.setAttributeNode(gt.cloneNode(!0))}))}},z=()=>!s.isCollapsed()&&o.getParent(s.getStart(),o.isBlock)!==o.getParent(s.getEnd(),o.isBlock);t.on("keypress",I=>{let $;return!(!(v(I)||8!==I.keyCode&&46!==I.keyCode)&&z()&&($=L(),t.getDoc().execCommand("delete",!1),$(),I.preventDefault(),1))}),o.bind(t.getDoc(),"cut",I=>{if(!v(I)&&z()){const $=L();Tr.setEditorTimeout(t,()=>{$()})}})})(),k(),t.on("SetContent ExecCommand",L=>{"setcontent"!==L.type&&"mceInsertLink"!==L.command||e(o.select("a:not([data-mce-block])"),z=>{var I;let $=z.parentNode;const gt=o.getRoot();if($?.lastChild===z){for(;$&&!o.isBlock($);){if((null===(I=$.parentNode)||void 0===I?void 0:I.lastChild)!==$||$===gt)return;$=$.parentNode}o.add($,"br",{"data-mce-bogus":1})}})}),A(),P(),S(),t.on("drop",L=>{var z;const I=null===(z=L.dataTransfer)||void 0===z?void 0:z.getData("text/html");Dt(I)&&/^<img[^>]*>$/.test(I)&&t.dispatch("dragend",new window.DragEvent("dragend",L))}))),{refreshContentEditable:V,isHidden:()=>{if(!l||t.removed)return!1;const L=t.selection.getSel();return!L||!L.rangeCount||0===L.rangeCount}}})(a),a.dispatch("PostRender");const c=Zk(a);void 0!==c&&(l.dir=c);const u=AE(a);u&&a.on("BeforeSetContent",f=>{dt.each(u,p=>{f.content=f.content.replace(p,v=>"\x3c!--mce:protected "+escape(v)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing="compositionstart"===f.type})})(t),s.fold(()=>{Jw(t).then(()=>Yp(t))},a=>{t.setProgressState(!0),Jw(t).then(()=>{a().then(i=>{t.setProgressState(!1),Yp(t),Jy(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),Yp(t),Jy(t)})})})},sO=Be,Qp=we.DOM,tS=we.DOM,eS=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),nS=t=>{const e=t.getElement();return t.inline?eS(null):(n=>{const r=tS.create("div");return tS.insertAfter(r,n),eS(r,r)})(e)},aO=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const r=dt.trim(Bh(n)),o=n.ui.registry.getAll().icons,s={...pd.get("default").icons,...pd.get(r).icons};Se(s,(a,i)=>{Zt(o,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const r=Ka(n);if(Dt(r)){const o=ba.get(r);n.theme=o(n,ba.urls[r])||{},pe(n.theme.init)&&n.theme.init(n,ba.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const r=Ku(n),o=si.get(r);n.model=o(n,si.urls[r])})(t),(n=>{const r=[];rt(Rc(n),o=>{((s,a,i)=>{const l=ai.get(i),c=ai.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=dt.trim(i),l&&-1===dt.inArray(a,i)){if(s.plugins[i])return;try{const u=l(s,c)||{};s.plugins[i]=u,pe(u.init)&&(u.init(s,c),a.push(i))}catch(u){((f,p,v)=>{const g=ao.translate(["Failed to initialize plugin: {0}",p]);z0(f,"PluginLoadError",{message:g}),hd(g,v),gd(f,g)})(s,i,u)}}})(n,r,o.replace(/^\-/,""))})})(t);const e=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,Dt(Ka(n))?(o=>{const s=o.theme.renderUI;return s?s():nS(o)})(n):pe(Ka(n))?(o=>{const s=o.getElement(),a=Ka(o)(o,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||o.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||o.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):nS(n)})(t);var n,r;((n,r)=>{const o={show:E.from(r.show).getOr(Nt),hide:E.from(r.hide).getOr(Nt),isEnabled:E.from(r.isEnabled).getOr(Be),setEnabled:s=>{n.mode.isReadOnly()||E.from(r.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...o}})(t,E.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(m1(r=n,Qk(r)),(r=>m1(r,Mh(r)))(n)),t.inline?Zw(t):((n,r)=>{((o,s)=>{const a=o.translate("Rich Text Area"),i=Jr(O(o.getElement()),"tabindex").bind(zs),l=((c,u,f,p)=>{const v=X("iframe");return p.each(g=>Xe(v,"tabindex",g)),Qr(v,f),Qr(v,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:u}),T(v,"tox-edit-area__iframe"),v})(o.id,a,Dk(o),i).dom;l.onload=()=>{l.onload=null,o.dispatch("load")},o.contentAreaContainer=s.iframeContainer,o.iframeElement=l,o.iframeHTML=(c=>{let u=Bk(c)+"<html><head>";Rh(c)!==c.documentBaseUrl&&(u+='<base href="'+c.documentBaseURI.getURI()+'" />'),u+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const f=Pk(c),p=Lk(c),v=c.translate(wE(c));return Th(c)&&(u+='<meta http-equiv="Content-Security-Policy" content="'+Th(c)+'" />'),u+=`</head><body id="${f}" class="mce-content-body ${p}" data-id="${c.id}" aria-label="${v}"><br></body></html>`,u})(o),Qp.add(s.iframeContainer,l)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=Qp.isHidden(r.editorContainer)),n.getElement().style.display="none",Qp.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const s=o.iframeElement,a=()=>{o.contentDocument=s.contentDocument,Zw(o)};if(VE(o)||fe.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close(),a()}else{const l=((t,e,n,r)=>((o,s,a,i,l)=>{const c=(u=a,f=i,p=>{u(p)&&f((v=>{const g=O(wr(v).getOr(v.target)),b=()=>v.stopPropagation(),h=()=>v.preventDefault(),C=ir(h,b);return{target:g,x:v.clientX,y:v.clientY,stop:b,prevent:h,kill:C,raw:v}})(p))});var u,f;return o.dom.addEventListener(s,c,!1),{unbind:St(Jn,o,s,c,!1)}})(t,"load",n,()=>{l.unbind(),a()}))(O(s),0,sO);s.srcdoc=o.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},ya=we.DOM,rS=t=>"-"===t.charAt(0),oS=(t,e,n)=>E.from(e).filter(r=>Xn(r)&&!pd.has(r)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:E.some(r)})),sS=An().deviceType,aS=sS.isPhone(),lO=sS.isTablet(),zl=t=>{if(ye(t))return[];{const e=ct(t)?t:t.split(/[ ,]/),n=re(e,Yr);return $t(n,Xn)}},Jp=(t,e)=>Zt(t.sections(),e),dO=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ke(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),uO=(t,e)=>{var n;const r=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?dt.extend({},t.external_plugins,r):r},pO=(t,e)=>{const n=t.selection,r=t.dom;return/^ | $/.test(e)?((o,s,a)=>{const i=O(o.getRoot());return a=vl(i,G.fromRangeStart(s))?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),bl(i,G.fromRangeEnd(s))?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),e):e},Kd=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const s=dt.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:s}}return{content:o,details:{}}})(e);Pm(t,{...r,content:pO(t,n),format:"html",set:!1,selection:!0}).each(o=>{const s=(i=o.content,l=r,Hm(t).editor.insertContent(i,l));var i,l;Lm(t,s,o),t.addVisual()})}},gO={"font-size":"size","font-family":"face"},hO=Bi("font"),iS=t=>(e,n)=>E.from(n).map(O).filter(Cn).bind(r=>{return(o=t,s=e,a=r.dom,um(O(a),i=>{return q(l=i,o).orThunk(()=>hO(l)?ke(gO,o).bind(c=>Jr(l,c)):E.none());var l},i=>de(O(s),i))).or(((o,s)=>E.from(we.DOM.getStyle(s,o,!0)))(t,r.dom));var o,s,a}).getOr(""),vO=iS("font-size"),bO=ir(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),iS("font-family")),yO=t=>qn(t.getBody()).bind(e=>{const n=e.container();return E.from(lt(n)?n.parentNode:n)}),Zp=(t,e)=>{return n=t,r=Ls(E.some,e),(o=n,E.from(o.selection.getRng()).bind(s=>{const a=o.getBody();return s.startContainer===a&&0===s.startOffset?E.none():E.from(o.selection.getStart(!0))})).orThunk(St(yO,n)).map(O).filter(Cn).bind(r);var n,r,o},lS=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const r=dt.explode(t.options.get("font_size_style_values")),o=dt.explode(t.options.get("font_size_classes"));return o.length>0?o[n-1]||e:r[n-1]||e}return e}return e},CO=t=>{const e=t.split(/\s*,\s*/);return re(e,n=>-1===n.indexOf(" ")||Je(n,'"')||Je(n,"'")?n:`'${n}'`).join(",")},wO=["toggleview"],cS=t=>Tt(wO,t.toLowerCase());class dS{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,r,o){const s=this.editor,a=e.toLowerCase(),i=o?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?Rf(c=s).each(u=>c.selection.setRng(u)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:r}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[a];return!!pe(l)&&(l(a,n,r),s.dispatch("ExecCommand",{command:e,ui:n,value:r}),!0)}queryCommandState(e){if(!cS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),r=this.commands.state[n];return!!pe(r)&&r(n)}queryCommandValue(e){if(!cS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),r=this.commands.value[n];return pe(r)?r(n):""}addCommands(e,n="exec"){const r=this.commands;Se(e,(o,s)=>{rt(s.toLowerCase().split(","),a=>{r[n][a]=o})})}addCommand(e,n,r){const o=e.toLowerCase();this.commands.exec[o]=(s,a,i)=>n.call(r??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,r){this.commands.state[e.toLowerCase()]=()=>n.call(r??this.editor)}addQueryValueHandler(e,n,r){this.commands.value[e.toLowerCase()]=()=>n.call(r??this.editor)}}const Ca="data-mce-contenteditable",tg=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Xd=(t,e)=>{t.dom.contentEditable=e?"true":"false"},xa=t=>t.readonly,uS=t=>{t.parser.addAttributeFilter("contenteditable",e=>{xa(t)&&rt(e,n=>{n.attr(Ca,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(Ca,e=>{xa(t)&&rt(e,n=>{n.attr("contenteditable",n.attr(Ca))})}),t.serializer.addTempAttr(Ca)},kO=["copy"],EO=dt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class eg{static isNative(e){return!!EO[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ce}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const r=e.toLowerCase(),o=Tu(r,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const s=this.bindings[r];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(!1===l.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(e,n,r,o){if(!1===n&&(n=Ce),n){const s={func:n,removed:!1};o&&dt.extend(s,o);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=r?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(e,n){if(e){const r=e.toLowerCase().split(" ");let o=r.length;for(;o--;){const s=r[o];let a=this.bindings[s];if(!s)return Se(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=Kr(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,rt(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else Se(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(e,n,r){return this.on(e,n,r,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const Hl=t=>(t._eventDispatcher||(t._eventDispatcher=new eg({scope:t,toggleEvent:(e,n)=>{eg.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),ng={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const r=this;if(r.removed&&"remove"!==t&&"detach"!==t)return Tu(t.toLowerCase(),e??{},r);const o=Hl(r).dispatch(t,e);if(!1!==n&&r.parent){let s=r.parent();for(;s&&!o.isPropagationStopped();)s.dispatch(t,o,!1),s=s.parent?s.parent():void 0}return o},on(t,e,n){return Hl(this).on(t,e,n)},off(t,e){return Hl(this).off(t,e)},once(t,e){return Hl(this).once(t,e)},hasEventListeners(t){return Hl(this).has(t)}},Gd=we.DOM;let wa;const Yd=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=Fh(t);return n?(t.eventRoot||(t.eventRoot=Gd.select(n)[0]),t.eventRoot):t.getBody()},fS=(t,e,n)=>{var r;(r=t).hidden||xa(r)?xa(t)&&((r,o)=>{if("click"!==o.type||kt.metaKeyPressed(o))Tt(kO,o.type)&&r.dispatch(o.type,o);else{const s=O(o.target);(a=r,i=s,Ur(i,"a",l=>de(l,O(a.getBody()))).bind(l=>Jr(l,"href"))).each(a=>{if(o.preventDefault(),/^#/.test(a)){const i=r.dom.select(`${a},[name="${xi(a,"#")}"]`);i.length&&r.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},mS=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=Yd(t,e);if(Fh(t)){if(wa||(wa={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||wa&&(Se(wa,(o,s)=>{t.dom.unbind(Yd(t,s))}),wa=null)})),wa[e])return;const r=o=>{const s=o.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||Gd.isChildOf(s,l))&&fS(a[i],e,o)}};wa[e]=r,Gd.bind(n,e,r)}else{const r=o=>{fS(t,e,o)};Gd.bind(n,e,r),t.delegates[e]=r}},pS={...ng,bindPendingEventDelegates(){const t=this;dt.each(t._pendingNativeEvents,e=>{mS(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?mS(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(Yd(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Se(t.delegates,(r,o)=>{t.dom.unbind(Yd(t,o),o,r)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},NO=t=>Dt(t)?{value:t.split(/[ ,]/),valid:!0}:In(t,Dt)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},gS=(t,e)=>t+(as(e.message)?"":`. ${e.message}`),hS=t=>t.valid,rg=(t,e,n="")=>{const r=e(t);return Mn(r)?r?{value:t,valid:!0}:{valid:!1,message:n}:r},_O=["design","readonly"],vS=(t,e,n,r)=>{const o=n[e.get()],s=n[r];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${r}:`,a)}var a;o.deactivate(),o.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=O(t.getBody());var r,o,s;s=e,K(r=n,o="mce-content-readonly")&&!s?F(r,o):s&&T(r,o),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(r=>{E.from(r.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,Xd(n,!1),rt(Dn(n,'*[contenteditable="true"]'),r=>{Xe(r,Ca,"true"),Xd(r,!1)})):(t.readonly=!1,t.hasEditableRoot()&&Xd(n,!0),rt(Dn(n,`*[${Ca}="true"]`),r=>{on(r,Ca),Xd(r,!0)}),tg(t,"StyleWithCSS",!1),tg(t,"enableInlineTableEditing",!1),tg(t,"enableObjectResizing",!1),(r=>ua(r)||(o=>{const s=Te(O(o.getElement()));return _f(s).filter(a=>!Of(a.dom)&&Xc(o,a.dom)).isSome()})(r))(t)&&t.focus(),(r=>{r.selection.setRng(r.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(r),(a=t).dispatch("SwitchMode",{mode:r})},og=dt.each,sg=dt.explode,AO={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},bS=dt.makeMap("alt,ctrl,shift,meta,access"),RO=t=>{const e={},n=fe.os.isMacOS()||fe.os.isiOS();og(sg(t.toLowerCase(),"+"),s=>{s in bS?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=AO[s]||s.toUpperCase().charCodeAt(0))});const r=[e.keyCode];let o;for(o in bS)e[o]?r.push(o):e[o]=!1;return e.id=r.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class yS{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(og(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,r,o){const s=this,a=s.normalizeCommandFunc(r);return og(sg(dt.trim(e)),i=>{const l=s.createShortcut(i,n,a,o);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,r=e;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:dt.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,n,r,o){const s=dt.map(sg(e,">"),RO);return s[s.length-1]=dt.extend(s[s.length-1],{func:r,scope:o||this.editor}),dt.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const TO=()=>{const t=(()=>{const e={},n={},r={},o={},s={},a={},i={},l={},c=(u,f)=>(p,v)=>{u[p.toLowerCase()]={...v,type:f}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(r,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(a,"contexttoolbar"),addContextForm:c(a,"contextform"),addSidebar:c(i,"sidebar"),addView:c(l,"views"),addIcon:(u,f)=>o[u.toLowerCase()]=f,getAll:()=>({buttons:e,menuItems:n,icons:o,popups:r,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Sa=we.DOM,CS=dt.extend,OO=dt.each;class Qd{constructor(e,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,CS(this,pS);const o=this;this.id=e,this.hidden=!1;const s=((t,e,n,r,o)=>{var s;const a=t?{mobile:dO(null!==(s=o.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return Uo(s,(c,u)=>Tt(t,u),_a(i),_a(l)),{t:i,f:l}})(e);return o=n.f,{sections:pt(n.t),options:pt(o)};var o})(["mobile"],yp(a,o)),l=dt.extend(n,r,i.options(),t&&Jp(i,"mobile")?((c,u,f={})=>{const p=c.sections(),v=ke(p,u).getOr({});return dt.extend({},f,v)})(i,"mobile"):{},{external_plugins:uO(r,i.options())});return((c,u,f,p)=>{const v=zl(f.forced_plugins),g=zl(p.plugins),b=Jp(S=u,"mobile")?S.sections().mobile:{},h=((S,k,A,R)=>S&&Jp(k,"mobile")?R:A)(c,u,g,b.plugins?zl(b.plugins):g),C=((S,k)=>[...zl(S),...zl(k)])(v,h);var S;return dt.extend(p,{forced_plugins:v,plugins:C})})(t,i,r,l)})(aS||lO,aS,g=n,r.defaultOptions,g);var g;this.options=((v,g)=>{const b={},h={},C=(k,A,R)=>{const D=rg(A,R);return hS(D)?(h[k]=D.value,!0):(console.warn(gS(`Invalid value passed for the ${k} option`,D)),!1)},S=k=>Zt(b,k);return{register:(k,A)=>{const R=Dt(A.processor)?(P=>{const U=(()=>{switch(P){case"array":return ct;case"boolean":return Mn;case"function":return pe;case"number":return x;case"object":return Vt;case"string":return Dt;case"string[]":return NO;case"object[]":return Y=>In(Y,Vt);case"regexp":return Y=>Cr(Y,RegExp);default:return Be}})();return Y=>rg(Y,U,`The value must be a ${P}.`)})(A.processor):A.processor,D=((P,U,Y)=>{if(!De(U)){const V=rg(U,Y);if(hS(V))return V.value;console.error(gS(`Invalid default value passed for the "${P}" option`,V))}})(k,A.default,R);b[k]={...A,default:D,processor:R},ke(h,k).orThunk(()=>ke(g,k)).each(P=>C(k,P,R))},isRegistered:S,get:k=>ke(h,k).orThunk(()=>ke(b,k).map(A=>A.default)).getOrUndefined(),set:(k,A)=>{if(S(k)){const R=b[k];return R.immutable?(console.error(`"${k}" is an immutable option and cannot be updated`),!1):C(k,A,R.processor)}return console.warn(`"${k}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:k=>{const A=S(k);return A&&delete h[k],A},isSet:k=>Zt(h,k)}})(0,s),(v=>{const g=v.options.register;g("id",{processor:"string",default:v.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:v.documentBaseUrl}),g("body_id",{processor:Ah(v,"tinymce"),default:"tinymce"}),g("body_class",{processor:Ah(v),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:b=>{const h=Dt(b)&&Xn(b);return h?{value:b,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:b=>{const h=Tt(["block","linebreak","invert","default"],b);return h?{value:b,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:b=>Mn(b)||Dt(b)?{valid:!0,value:b}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:b=>{const h=!1===b||Dt(b)||In(b,Dt);return h?Dt(b)?{value:re(b.split(","),Yr),valid:h}:ct(b)?{value:b,valid:h}:!1===b?{value:[],valid:h}:{value:b,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Xu(v)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:b=>{const h=Dt(b)||In(b,Dt);return h?{value:ct(b)?b:re(b.split(","),Yr),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:b=>{const h=Mn(b)||Dt(b);return h?!1===b||$u.isiPhone()||$u.isiPad()?{value:"",valid:h}:{value:!0===b?"table,img,figure.image,div,video,iframe":b,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!Tk}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"object"}),g("service_message",{processor:"string"}),g("theme",{processor:b=>!1===b||Dt(b)||pe(b),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:b=>{const h=!1===b||Dt(b);return h?{value:!1===b?"":b,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:v.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:v.convertURL}),g("url_converter_scope",{processor:"object",default:v}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:"string"}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:Wu}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:Wu}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:Wu}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:b=>Dt(b)||!0===b}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:b=>In(b,Vt)||!1===b?{value:Nh(!1===b?[]:b),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),g("text_patterns_lookup",{processor:b=>{return pe(b)?{value:(h=b,C=>{const S=h(C);return Nh(S)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:b=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:b=>In(b,_h)?{value:b,valid:!0}:_h(b)?{value:[b],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!1}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:b=>{const h=Tt(["inherited","collapsed","expanded"],b);return h?{value:b,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:b=>{const h=Tt(["inherited","collapsed","expanded"],b);return h?{value:b,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),v.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:ao.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:Ok.getAttrib(v.getElement(),"placeholder")})})})(o);const a=this.options.get;a("deprecation_warnings")&&((v,g)=>{((b,h)=>{const C=(t=>{const e=a1(t,mA),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),zo(e)})(b),S=(t=>i1(t,gA))(h),k=S.length>0,A=C.length>0,R="mobile"===h.theme;if(k||A||R){const D="\n- ",P=R?`\n\nThemes:${D}mobile`:"",U=k?`\n\nPlugins:${D}${S.join(D)}`:"",Y=A?`\n\nOptions:${D}${C.join(D)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+P+U+Y)}})(v,g),((b,h)=>{const C=(t=>a1(t,pA))(b),S=(t=>i1(t,s1.map(e=>e.name)))(h),k=S.length>0,A=C.length>0;if(k||A){const R="\n- ",D=k?`\n\nPlugins:${R}${S.map(CA).join(R)}`:"",P=A?`\n\nOptions:${R}${C.join(R)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+D+P)}})(v,g)})(n,s);const i=a("suffix");i&&(r.suffix=i),this.suffix=r.suffix;const l=a("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const c=Vu(o);c&&(Yo.ScriptLoader._setReferrerPolicy(c),we.DOM.styleSheetLoader._setReferrerPolicy(c));const u=zh(o);mt(u)&&we.DOM.styleSheetLoader._setContentCssCors(u),Hn.languageLoad=a("language_load"),Hn.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new uo(Rh(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Xu(o),this.hasVisual=CE(o),this.shortcuts=new yS(this),this.editorCommands=new dS(this),(t=>{var e;(t=>{(e=>{const n=r=>()=>{rt("left,center,right,justify".split(","),o=>{r!==o&&e.formatter.remove("align"+o)}),"none"!==r&&(e.formatter.toggle("align"+r,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=r=>()=>{const o=e.selection,s=o.isCollapsed()?[e.dom.getParent(o.getNode(),e.dom.isBlock)]:o.getSelectedBlocks();return Ae(s,a=>mt(e.formatter.matchNode(a,r)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=e.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(fe.os.isMacOS()||fe.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!xt(a)||s++!==o||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,r,o)=>{e.selection.select(o)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),so);if(n){const r=e.dom.createRng();r.selectNodeContents(n),e.selection.setRng(r)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{Kd(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{Kd(e,e.dom.encode(o))},insertHTML:(n,r,o)=>{Kd(e,o)},mceInsertContent:(n,r,o)=>{Kd(e,o)},mceSetContent:(n,r,o)=>{e.setContent(o)},mceReplaceContent:(n,r,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(DE(e))}})})(t),(e=>{const n=(r,o,s)=>{const a=Dt(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");Vt(a)&&Dt(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const r=e.dom.getParent(e.selection.getStart(),"a");return void(r&&e.dom.remove(r,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{wC(e,"indent")},Outdent:()=>{SC(e)}}),e.editorCommands.addCommands({Outdent:()=>yC(e)},"state")})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Fd(_x,e)},mceInsertNewLine:(n,r,o)=>{Px(e,o)},InsertLineBreak:(n,r,o)=>{Fd(Tx,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{n.getDoc().execCommand(r);const o=n.dom.getParent(n.selection.getNode(),"ol,ul");if(o){const s=o.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=n.selection.getBookmark();n.dom.split(s,o),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{const o=n.dom.getParent(n.selection.getNode(),"ul,ol");return o&&("insertunorderedlist"===r&&"UL"===o.tagName||"insertorderedlist"===r&&"OL"===o.tagName)}},"state")})(e)})(t),(e=>{(n=>{const r=(o,s)=>{n.formatter.toggle(o,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,s,a)=>{r(o,{value:a})},BackColor:(o,s,a)=>{r("hilitecolor",{value:a})},FontName:(o,s,a)=>{((i,l)=>{const c=lS(i,l);i.formatter.toggle("fontname",{value:CO(c)}),i.nodeChanged()})(n,a)},FontSize:(o,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:lS(i,a)}),i.nodeChanged()},LineHeight:(o,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(o,s,a)=>{var i;r(o,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,s,a)=>{r(Dt(a)?a:"p")},mceToggleFormat:(o,s,a)=>{r(a)}})})(e),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return Zp(o=n,s=>bO(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return Zp(o=n,s=>vO(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return Zp(o=n,s=>{const a=O(o.getBody());return um(s,l=>q(l,"line-height"),St(de,a)).getOrThunk(()=>{const l=parseFloat(kr(s,"line-height")),c=parseFloat(kr(s,"font-size"));return String(l/c)})}).getOr("");var o})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const s=o??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,r,o)=>{var s;(s=e).removed||(!0===o?Pf(s):(i=>{const l=i.selection,c=i.getBody();let u=l.getRng();i.quirks.refreshContentEditable(),mt(i.bookmark)&&!ua(i)&&Rf(i).each(p=>{i.selection.setRng(p),u=p});const f=(p=i,v=l.getNode(),p.dom.getParent(v,g=>"true"===p.dom.getContentEditable(g)));var p,v;if(f&&i.dom.isChildOf(f,c))return Bf(f),vv(i,u),void Pf(i);i.inline||(fe.browser.isOpera()||Bf(c),i.getWin().focus()),(fe.browser.isFirefox()||i.inline)&&(Bf(c),vv(i,u)),Pf(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const f=a("cache_suffix");f&&(fe.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:TO(),styleSheetLoader:void 0,show:Nt,hide:Nt,setEnabled:Nt,isEnabled:Be},this.mode=(v=>{const g=cn("design"),b=cn({design:{activate:Nt,deactivate:Nt,editorReadOnly:!1},readonly:{activate:Nt,deactivate:Nt,editorReadOnly:!0}});return(h=v).serializer?uS(h):h.on("PreInit",()=>{uS(h)}),(h=>{h.on("ShowCaret",C=>{xa(h)&&C.preventDefault()}),h.on("ObjectSelected",C=>{xa(h)&&C.preventDefault()})})(v),{isReadOnly:()=>xa(v),set:h=>((C,S,k,A)=>{if(A!==k.get()){if(!Zt(S,A))throw new Error(`Editor mode '${A}' is invalid`);C.initialized?vS(C,k,S,A):C.on("init",()=>vS(C,k,S,A))}})(v,b.get(),g,h),get:()=>g.get(),register:(h,C)=>{b.set(((S,k,A)=>{if(Tt(_O,k))throw new Error(`Cannot override default mode ${k}`);return{...S,[k]:{...A,deactivate:()=>{try{A.deactivate()}catch(R){console.error(`problem while deactivating editor mode ${k}:`,R)}}}}})(b.get(),h,C))}};var h})(o),r.dispatch("SetupEditor",{editor:this});const p=SE(o);pe(p)&&p.call(o,o)}render(){(e=>{const n=e.id;ao.setCode(Ph(e));const r=()=>{ya.unbind(window,"ready",r),e.render()};if(!Js.Event.domLoaded)return void ya.bind(window,"ready",r);if(!e.getElement())return;const o=O(e.getElement()),s=d(o);var l;e.on("remove",()=>{bo(o.dom.attributes,i=>on(o,i.name)),Qr(o,s)}),e.ui.styleSheetLoader=Rg.forElement(o,{contentCssCors:zh(l=e),referrerPolicy:Vu(l)}),Xu(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||ya.getParent(n,"form");a&&(e.formElement=a,uE(e)&&!uu(e.getElement())&&(ya.insertAfter(ya.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},ya.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!fE(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=u1(e),e.notificationManager=d1(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=ya.encode(i.content))}),mE(e)&&e.on("submit",()=>{e.initialized&&e.save()}),pE(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Yo.ScriptLoader,r=()=>{!t.removed&&(o=>{const s=Ka(o);return!Dt(s)||mt(ba.get(s))})(t)&&(o=>{const s=Ku(o);return mt(si.get(s))})(t)&&aO(t)};((o,s)=>{const a=Ka(o);if(Dt(a)&&!rS(a)&&!Zt(ba.urls,a)){const i=oE(o),l=i?o.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;ba.load(a,l).catch(()=>{kl(o,"ThemeLoadError",El("theme",l,a))})}})(t,e),((o,s)=>{const a=Ku(o);if("plugin"!==a&&!Zt(si.urls,a)){const i=sE(o),l=Dt(i)?o.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;si.load(a,l).catch(()=>{kl(o,"ModelLoadError",El("model",l,a))})}})(t,e),((o,s)=>{const a=Ph(s),i=Gk(s);if(!ao.hasCode(a)&&"en"!==a){const l=Xn(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;o.add(l).catch(()=>{kl(s,"LanguageLoadError",El("language",l,a))})}})(n,t),((o,s,a)=>{const i=oS(s,"default",a),l=(c=s,E.from(qk(c)).filter(Xn).map(u=>({url:u,name:E.none()}))).orThunk(()=>oS(s,Bh(s),""));var c;rt((c=>{const u=[],f=p=>{u.push(p)};for(let p=0;p<c.length;p++)c[p].each(f);return u})([i,l]),c=>{o.add(c.url).catch(()=>{var u,f,p;u=s,f=c.url,p=c.name.getOrUndefined(),kl(u,"IconsLoadError",El("icons",f,p))})})})(n,t,e),((o,s)=>{const a=(i,l)=>{ai.load(i,l).catch(()=>{kl(o,"PluginLoadError",El("plugin",l,i))})};Se(bE(o),(i,l)=>{a(l,i),o.options.set("plugins",Rc(o).concat(l))}),rt(Rc(o),i=>{!(i=dt.trim(i))||ai.urls[i]||rS(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(r,r)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return ua(this)}translate(e){return ao.translate(e)}getParam(e,n,r){const o=this.options;return o.isRegistered(e)||(mt(r)?o.register(e,{processor:r,default:n}):o.register(e,{processor:Be,default:n})),o.isSet(e)||De(n)?o.get(e):n}hasPlugin(e,n){return!(!Tt(Rc(this),e)||n&&void 0===ai.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,r){this.editorCommands.addCommand(e,n,r)}addQueryStateHandler(e,n,r){this.editorCommands.addQueryStateHandler(e,n,r)}addQueryValueHandler(e,n,r){this.editorCommands.addQueryValueHandler(e,n,r)}addShortcut(e,n,r,o){this.shortcuts.add(e,n,r,o)}execCommand(e,n,r,o){return this.editorCommands.execCommand(e,n,r,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(Sa.show(e.getContainer()),Sa.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Sa.hide(e.getContainer()),Sa.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...e,load:!0},s=uu(r)?r.value:r.innerHTML,a=n.setContent(s,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),a}return""}save(e={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...e,save:!0,element:r};let s=n.getContent(o);const a={...o,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,uu(r))r.value=s;else{!e.is_removing&&n.inline||(r.innerHTML=s);const i=Sa.getParent(n.id,"form");i&&OO(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=o.element=r=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return Um(this,e,n)}getContent(e){return((n,r={})=>{const o=(s=r,a=r.format?r.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return jy(n,o).fold(ue,s=>{const a=(l=s,Hm(n).editor.getContent(l));var l;return zy(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=CS({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Um(this,this.startContent,{format:"raw"}):Um(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||Sa.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Sa.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const r=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:r?.body)&&void 0!==n?n:null}convertURL(e,n,r){const o=this,s=o.options.get,a=EE(o);return pe(a)?a.call(o,e,r,!0,n):!s("convert_urls")||"link"===r||Vt(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,r)=>{var s;s=r,Ue(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,r;(n=this)._editableRoot!==(r=e)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:r}=e,o=e.getBody(),s=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&mt(s?.nextSibling)&&fd.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&o&&fd.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),fd.remove(e.getContainer()),md(n),md(r),e.destroy()}var a})(this)}destroy(e){((n,r)=>{const{selection:o,dom:s}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),md(o),md(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),fd.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const gi=we.DOM,Jd=dt.each;let Zd,xS=!1,or=[];const tu=t=>{const e=t.type;Jd(Ds.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},wS=t=>{if(t!==xS){const e=we.DOM;t?(e.bind(window,"resize",tu),e.bind(window,"scroll",tu)):(e.unbind(window,"resize",tu),e.unbind(window,"scroll",tu)),xS=t}},SS=t=>{const e=or;return or=$t(or,n=>t!==n),Ds.activeEditor===t&&(Ds.activeEditor=or.length>0?or[0]:null),Ds.focusedEditor===t&&(Ds.focusedEditor=null),e.length!==or.length},DO="CSS1Compat"!==document.compatMode,Ds={...ng,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"5.0",releaseDate:"2023-06-12",i18n:ao,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",r=uo.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)e=o.base||o.baseURL,n=o.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new uo(r).toAbsolute(e),t.documentBaseURL=r,t.baseURI=new uo(t.baseURL),t.suffix=n,(s=t).on("AddEditor",St(IN,s)),s.on("RemoveEditor",St(FN,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const r=t.plugin_base_urls;void 0!==r&&Se(r,(o,s)=>{Hn.PluginManager.urls[s]=o})},init(t){const e=this;let n;const r=dt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var c;gi.unbind(window,"ready",s),(c=>{const u=t.onpageload;u&&u.apply(e,[])})(),l=((c,u)=>{const f=[],p=pe(u)?v=>Ae(f,g=>u(g,v)):v=>Tt(f,v);for(let v=0,g=c.length;v<g;v++){const b=c[v];p(b)||f.push(b)}return f})((c=t,fe.browser.isIE()||fe.browser.isEdge()?(hd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):DO?(hd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Dt(c.selector)?gi.select(c.selector):mt(c.target)?[c.target]:[])),dt.each(l,c=>{var u;(u=e.get(c.id))&&u.initialized&&!(u.getContainer()||u.getBody()).parentNode&&(SS(u),u.unbindAllNativeEvents(),u.destroy(!0),u.removed=!0)}),l=dt.grep(l,c=>!e.get(c.id)),0===l.length?o([]):Jd(l,c=>{t.inline&&c.tagName.toLowerCase()in r?hd("Could not initialize inline editor on invalid inline target element",c):((u,f,p)=>{const v=new Qd(u,f,e);i.push(v),v.on("init",()=>{++a===l.length&&o(i)}),v.targetElm=v.targetElm||p,v.render()})((u=>{let f=u.id;return f||(f=ke(u,"name").filter(p=>!gi.get(p)).getOrThunk(gi.uniqueId),u.setAttribute("id",f)),f})(c),t,c)})};return gi.bind(window,"ready",s),new Promise(a=>{n?a(n):o=i=>{a(i)}})},get(t){return 0===arguments.length?or.slice(0):Dt(t)?qe(or,e=>e.id===t).getOr(null):x(t)&&or[t]?or[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&or.push(t),wS(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),Zd||(Zd=r=>{const o=e.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",Zd))),t},createEditor(t,e){return this.add(new Qd(t,e,this))},remove(t){const e=this;let n;if(t){if(!Dt(t))return n=t,Qt(e.get(n.id))?null:(SS(n)&&e.dispatch("RemoveEditor",{editor:n}),0===or.length&&window.removeEventListener("beforeunload",Zd),n.remove(),wS(or.length>0),n);Jd(gi.select(t),r=>{n=e.get(r.id),n&&e.remove(n)})}else for(let r=or.length-1;r>=0;r--)e.remove(or[r])},execCommand(t,e,n){var r;const o=this,s=Vt(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(t){case"mceAddEditor":return o.get(s)||new Qd(s,n.options,o).render(),!0;case"mceRemoveEditor":{const a=o.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Jd(or,t=>{t.save()})},addI18n:(t,e)=>{ao.add(t,e)},translate:t=>ao.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new uo(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new uo(this.baseURL)}};Ds.setup();const BO=(()=>{const t=Cs();return{FakeClipboardItem:e=>({items:e,types:Qe(e),getType:n=>ke(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),kS=Math.min,hi=Math.max,eu=Math.round,ES=(t,e,n)=>{let r=e.x,o=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(o+=l),"r"===c[1]&&(r+=i),"c"===c[0]&&(o+=eu(l/2)),"c"===c[1]&&(r+=eu(i/2)),"b"===c[3]&&(o-=a),"r"===c[4]&&(r-=s),"c"===c[3]&&(o-=eu(a/2)),"c"===c[4]&&(r-=eu(s/2)),vi(r,o,s,a)},vi=(t,e,n,r)=>({x:t,y:e,w:n,h:r}),PO={inflate:(t,e,n)=>vi(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:ES,findBestRelativePosition:(t,e,n,r)=>{for(let o=0;o<r.length;o++){const s=ES(t,e,r[o]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return r[o]}return null},intersect:(t,e)=>{const n=hi(t.x,e.x),r=hi(t.y,e.y),o=kS(t.x+t.w,e.x+e.w),s=kS(t.y+t.h,e.y+e.h);return o-n<0||s-r<0?null:vi(n,r,o-n,s-r)},clamp:(t,e,n)=>{let r=t.x,o=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,c=hi(0,e.x-r),u=hi(0,e.y-o),f=hi(0,s-i),p=hi(0,a-l);return r+=c,o+=u,n&&(s+=c,a+=u,r-=f,o-=p),s-=f,a-=p,vi(r,o,s-r,a-o)},create:vi,fromClientRect:t=>vi(t.left,t.top,t.width,t.height)},LO=(()=>{const t={},e={};return{load:(n,r)=>{const o=`Script at URL "${r}" failed to load`,s=`Script at URL "${r}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const a=new Promise((i,l)=>{const c=((u,f,p=1e3)=>{let v=!1,g=null;const b=S=>(...k)=>{v||(v=!0,null!==g&&(clearTimeout(g),g=null),S.apply(null,k))},h=b(u),C=b(f);return{start:(...S)=>{v||null!==g||(g=setTimeout(()=>C.apply(null,S),p))},resolve:h,reject:C}})(i,l);e[n]=c.resolve,Yo.ScriptLoader.loadScript(r).then(()=>c.start(s),()=>c.reject(o))});return t[n]=a,a}},add:(n,r)=>{void 0!==e[n]&&(e[n](r),delete e[n]),t[n]=Promise.resolve(r)},unload:n=>{delete t[n]}}})();let Ul;try{const t="__storage_test__";Ul=window.localStorage,Ul.setItem(t,t),Ul.removeItem(t)}catch{Ul=(()=>{let e={},n=[];const r={getItem:o=>e[o]||null,setItem:(o,s)=>{n.push(o),e[o]=String(s)},key:o=>n[o],removeItem:o=>{n=n.filter(s=>s===o),delete e[o]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const MO={geom:{Rect:PO},util:{Delay:Tr,Tools:dt,VK:kt,URI:uo,EventDispatcher:eg,Observable:ng,I18n:ao,LocalStorage:Ul,ImageUploader:t=>{const e=p1(),n=h1(t,e);return{upload:(r,o=!0)=>n.upload(r,o?g1(t):void 0)}}},dom:{EventUtils:Js,TreeWalker:en,TextSeeker:ea,DOMUtils:we,ScriptLoader:Yo,RangeUtils:da,Serializer:o1,StyleSheetLoader:Ag,ControlSelection:K0,BookmarkManager:fl,Selection:r1,Event:Js.Event},html:{Styles:Ru,Entities:bs,Node:rr,Schema:ys,DomParser:oi,Writer:Ov,Serializer:Es},Env:fe,AddOnManager:Hn,Annotator:F0,Formatter:y1,UndoManager:x1,EditorCommands:dS,WindowManager:u1,NotificationManager:d1,EditorObservable:pS,Shortcuts:yS,Editor:Qd,FocusManager:hv,EditorManager:Ds,DOM:we.DOM,ScriptLoader:Yo.ScriptLoader,PluginManager:ai,ThemeManager:ba,ModelManager:si,IconManager:pd,Resource:LO,FakeClipboard:BO,trim:dt.trim,isArray:dt.isArray,is:dt.is,toArray:dt.toArray,makeMap:dt.makeMap,each:dt.each,map:dt.map,grep:dt.grep,inArray:dt.inArray,extend:dt.extend,walk:dt.walk,resolve:dt.resolve,explode:dt.explode,_addCacheSuffix:dt._addCacheSuffix},NS=dt.extend(Ds,MO);(t=>{window.tinymce=t,window.tinyMCE=t})(NS),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(NS)}(),function(bt,qt){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=bt.document?qt(bt,!0):function(Wt){if(!Wt.document)throw new Error("jQuery requires a window with a document");return qt(Wt)}:qt(bt)}(typeof window<"u"?window:this,function(bt,qt){"use strict";var Wt=[],Ht=Object.getPrototypeOf,ne=Wt.slice,je=Wt.flat?function(d){return Wt.flat.call(d)}:function(d){return Wt.concat.apply([],d)},kn=Wt.push,Ke=Wt.indexOf,Wn={},yr=Wn.toString,En=Wn.hasOwnProperty,Cr=En.toString,Dt=Cr.call(Object),Vt={},Pt=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},ct=function(d){return null!=d&&d===d.window},Qt=bt.document,Mn={type:!0,src:!0,nonce:!0,noModule:!0};function De(d,m,y){var w,N,_=(y=y||Qt).createElement("script");if(_.text=d,m)for(w in Mn)(N=m[w]||m.getAttribute&&m.getAttribute(w))&&_.setAttribute(w,N);y.head.appendChild(_).parentNode.removeChild(_)}function ye(d){return null==d?d+"":"object"==typeof d||"function"==typeof d?Wn[yr.call(d)]||"object":typeof d}var pe=/HTML$/i,x=function(d,m){return new x.fn.init(d,m)};function In(d){var m=!!d&&"length"in d&&d.length,y=ye(d);return!Pt(d)&&!ct(d)&&("array"===y||0===m||"number"==typeof m&&0<m&&m-1 in d)}function Nt(d,m){return d.nodeName&&d.nodeName.toLowerCase()===m.toLowerCase()}x.fn=x.prototype={jquery:"3.7.0",constructor:x,length:0,toArray:function(){return ne.call(this)},get:function(d){return null==d?ne.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var m=x.merge(this.constructor(),d);return m.prevObject=this,m},each:function(d){return x.each(this,d)},map:function(d){return this.pushStack(x.map(this,function(m,y){return d.call(m,y,m)}))},slice:function(){return this.pushStack(ne.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(d,m){return(m+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(d,m){return m%2}))},eq:function(d){var m=this.length,y=+d+(d<0?m:0);return this.pushStack(0<=y&&y<m?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:kn,sort:Wt.sort,splice:Wt.splice},x.extend=x.fn.extend=function(){var d,m,y,w,N,_,T=arguments[0]||{},H=1,F=arguments.length,K=!1;for("boolean"==typeof T&&(K=T,T=arguments[H]||{},H++),"object"==typeof T||Pt(T)||(T={}),H===F&&(T=this,H--);H<F;H++)if(null!=(d=arguments[H]))for(m in d)w=d[m],"__proto__"!==m&&T!==w&&(K&&w&&(x.isPlainObject(w)||(N=Array.isArray(w)))?(y=T[m],_=N&&!Array.isArray(y)?[]:N||x.isPlainObject(y)?y:{},N=!1,T[m]=x.extend(K,_,w)):void 0!==w&&(T[m]=w));return T},x.extend({expando:"jQuery"+("3.7.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var m,y;return!(!d||"[object Object]"!==yr.call(d)||(m=Ht(d))&&("function"!=typeof(y=En.call(m,"constructor")&&m.constructor)||Cr.call(y)!==Dt))},isEmptyObject:function(d){var m;for(m in d)return!1;return!0},globalEval:function(d,m,y){De(d,{nonce:m&&m.nonce},y)},each:function(d,m){var y,w=0;if(In(d))for(y=d.length;w<y&&!1!==m.call(d[w],w,d[w]);w++);else for(w in d)if(!1===m.call(d[w],w,d[w]))break;return d},text:function(d){var m,y="",w=0,N=d.nodeType;if(N){if(1===N||9===N||11===N)return d.textContent;if(3===N||4===N)return d.nodeValue}else for(;m=d[w++];)y+=x.text(m);return y},makeArray:function(d,m){var y=m||[];return null!=d&&(In(Object(d))?x.merge(y,"string"==typeof d?[d]:d):kn.call(y,d)),y},inArray:function(d,m,y){return null==m?-1:Ke.call(m,d,y)},isXMLDoc:function(d){var y=d&&(d.ownerDocument||d).documentElement;return!pe.test(d&&d.namespaceURI||y&&y.nodeName||"HTML")},merge:function(d,m){for(var y=+m.length,w=0,N=d.length;w<y;w++)d[N++]=m[w];return d.length=N,d},grep:function(d,m,y){for(var w=[],N=0,_=d.length,T=!y;N<_;N++)!m(d[N],N)!==T&&w.push(d[N]);return w},map:function(d,m,y){var w,N,_=0,T=[];if(In(d))for(w=d.length;_<w;_++)null!=(N=m(d[_],_,y))&&T.push(N);else for(_ in d)null!=(N=m(d[_],_,y))&&T.push(N);return je(T)},guid:1,support:Vt}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=Wt[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,m){Wn["[object "+m+"]"]=m.toLowerCase()});var ir=Wt.pop,Ls=Wt.sort,pt=Wt.splice,ue="[\\x20\\t\\r\\n\\f]",go=new RegExp("^"+ue+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ue+"+$","g");x.contains=function(d,m){var y=m&&m.parentNode;return d===y||!(!y||1!==y.nodeType||!(d.contains?d.contains(y):d.compareDocumentPosition&&16&d.compareDocumentPosition(y)))};var St=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Fo(d,m){return m?"\0"===d?"\ufffd":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}x.escapeSelector=function(d){return(d+"").replace(St,Fo)};var fr=Qt,ho=kn;!function(){var d,m,y,w,N,_,T,H,F,K,tt=ho,st=x.expando,X=0,ut=0,O=Te(),ce=Te(),le=Te(),Ne=Te(),sn=function(B,q){return B===q&&(N=!0),0},de="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",gn="(?:\\\\[\\da-fA-F]{1,6}"+ue+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",he="\\["+ue+"*("+gn+")(?:"+ue+"*([*^$|!~]?=)"+ue+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+gn+"))|)"+ue+"*\\]",zn=":("+gn+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+he+")*)|.*)\\)|)",ve=new RegExp(ue+"+","g"),xe=new RegExp("^"+ue+"*,"+ue+"*"),Ko=new RegExp("^"+ue+"*([>+~]|"+ue+")"+ue+"*"),Ia=new RegExp(ue+"|>"),Rn=new RegExp(zn),Zr=new RegExp("^"+gn+"$"),zr={ID:new RegExp("^#("+gn+")"),CLASS:new RegExp("^\\.("+gn+")"),TAG:new RegExp("^("+gn+"|[*])"),ATTR:new RegExp("^"+he),PSEUDO:new RegExp("^"+zn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ue+"*(even|odd|(([+-]|)(\\d*)n|)"+ue+"*(?:([+-]|)"+ue+"*(\\d+)|))"+ue+"*\\)|)","i"),bool:new RegExp("^(?:"+de+")$","i"),needsContext:new RegExp("^"+ue+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ue+"*((?:-\\d)?\\d*)"+ue+"*\\)|)(?=[^-]|$)","i")},to=/^(?:input|select|textarea|button)$/i,Me=/^h\d$/i,xn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ze=/[+~]/,$e=new RegExp("\\\\[\\da-fA-F]{1,6}"+ue+"?|\\\\([^\\r\\n\\f])","g"),wn=function(B,q){var et="0x"+B.slice(1)-65536;return q||(et<0?String.fromCharCode(et+65536):String.fromCharCode(et>>10|55296,1023&et|56320))},Hr=function(){Qn()},Tn=no(function(B){return!0===B.disabled&&Nt(B,"fieldset")},{dir:"parentNode",next:"legend"});try{tt.apply(Wt=ne.call(fr.childNodes),fr.childNodes)}catch{tt={apply:function(q,et){ho.apply(q,ne.call(et))},call:function(q){ho.apply(q,ne.call(arguments,1))}}}function oe(B,q,et,ot){var at,Bt,Ft,_t,It,ge,se,Mt=q&&q.ownerDocument,me=q?q.nodeType:9;if(et=et||[],"string"!=typeof B||!B||1!==me&&9!==me&&11!==me)return et;if(!ot&&(Qn(q),q=q||_,H)){if(11!==me&&(It=xn.exec(B)))if(at=It[1]){if(9===me){if(!(Ft=q.getElementById(at)))return et;if(Ft.id===at)return tt.call(et,Ft),et}else if(Mt&&(Ft=Mt.getElementById(at))&&oe.contains(q,Ft)&&Ft.id===at)return tt.call(et,Ft),et}else{if(It[2])return tt.apply(et,q.getElementsByTagName(B)),et;if((at=It[3])&&q.getElementsByClassName)return tt.apply(et,q.getElementsByClassName(at)),et}if(!(Ne[B+" "]||F&&F.test(B))){if(se=B,Mt=q,1===me&&(Ia.test(B)||Ko.test(B))){for((Mt=Ze.test(B)&&Sr(q.parentNode)||q)==q&&Vt.scope||((_t=q.getAttribute("id"))?_t=x.escapeSelector(_t):q.setAttribute("id",_t=st)),Bt=(ge=wo(B)).length;Bt--;)ge[Bt]=(_t?"#"+_t:":scope")+" "+Ur(ge[Bt]);se=ge.join(",")}try{return tt.apply(et,Mt.querySelectorAll(se)),et}catch{Ne(B,!0)}finally{_t===st&&q.removeAttribute("id")}}}return kr(B.replace(go,"$1"),q,et,ot)}function Te(){var B=[];return function q(et,ot){return B.push(et+" ")>m.cacheLength&&delete q[B.shift()],q[et+" "]=ot}}function He(B){return B[st]=!0,B}function Le(B){var q=_.createElement("fieldset");try{return!!B(q)}catch{return!1}finally{q.parentNode&&q.parentNode.removeChild(q),q=null}}function wr(B){return function(q){return Nt(q,"input")&&q.type===B}}function us(B){return function(q){return(Nt(q,"input")||Nt(q,"button"))&&q.type===B}}function eo(B){return function(q){return"form"in q?q.parentNode&&!1===q.disabled?"label"in q?"label"in q.parentNode?q.parentNode.disabled===B:q.disabled===B:q.isDisabled===B||q.isDisabled!==!B&&Tn(q)===B:q.disabled===B:"label"in q&&q.disabled===B}}function xo(B){return He(function(q){return q=+q,He(function(et,ot){for(var at,Bt=B([],et.length,q),Ft=Bt.length;Ft--;)et[at=Bt[Ft]]&&(et[at]=!(ot[at]=et[at]))})})}function Sr(B){return B&&typeof B.getElementsByTagName<"u"&&B}function Qn(B){var q,et=B?B.ownerDocument||B:fr;return et!=_&&9===et.nodeType&&et.documentElement&&(T=(_=et).documentElement,H=!x.isXMLDoc(_),K=T.matches||T.webkitMatchesSelector||T.msMatchesSelector,fr!=_&&(q=_.defaultView)&&q.top!==q&&q.addEventListener("unload",Hr),Vt.getById=Le(function(ot){return T.appendChild(ot).id=x.expando,!_.getElementsByName||!_.getElementsByName(x.expando).length}),Vt.disconnectedMatch=Le(function(ot){return K.call(ot,"*")}),Vt.scope=Le(function(){return _.querySelectorAll(":scope")}),Vt.cssHas=Le(function(){try{return _.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Vt.getById?(m.filter.ID=function(ot){var at=ot.replace($e,wn);return function(Bt){return Bt.getAttribute("id")===at}},m.find.ID=function(ot,at){if(typeof at.getElementById<"u"&&H){var Bt=at.getElementById(ot);return Bt?[Bt]:[]}}):(m.filter.ID=function(ot){var at=ot.replace($e,wn);return function(Bt){var Ft=typeof Bt.getAttributeNode<"u"&&Bt.getAttributeNode("id");return Ft&&Ft.value===at}},m.find.ID=function(ot,at){if(typeof at.getElementById<"u"&&H){var Bt,Ft,_t,It=at.getElementById(ot);if(It){if((Bt=It.getAttributeNode("id"))&&Bt.value===ot)return[It];for(_t=at.getElementsByName(ot),Ft=0;It=_t[Ft++];)if((Bt=It.getAttributeNode("id"))&&Bt.value===ot)return[It]}return[]}}),m.find.TAG=function(ot,at){return typeof at.getElementsByTagName<"u"?at.getElementsByTagName(ot):at.querySelectorAll(ot)},m.find.CLASS=function(ot,at){if(typeof at.getElementsByClassName<"u"&&H)return at.getElementsByClassName(ot)},F=[],Le(function(ot){var at;T.appendChild(ot).innerHTML="<a id='"+st+"' href='' disabled='disabled'></a><select id='"+st+"-\r\\' disabled='disabled'><option selected=''></option></select>",ot.querySelectorAll("[selected]").length||F.push("\\["+ue+"*(?:value|"+de+")"),ot.querySelectorAll("[id~="+st+"-]").length||F.push("~="),ot.querySelectorAll("a#"+st+"+*").length||F.push(".#.+[+~]"),ot.querySelectorAll(":checked").length||F.push(":checked"),(at=_.createElement("input")).setAttribute("type","hidden"),ot.appendChild(at).setAttribute("name","D"),T.appendChild(ot).disabled=!0,2!==ot.querySelectorAll(":disabled").length&&F.push(":enabled",":disabled"),(at=_.createElement("input")).setAttribute("name",""),ot.appendChild(at),ot.querySelectorAll("[name='']").length||F.push("\\["+ue+"*name"+ue+"*="+ue+"*(?:''|\"\")")}),Vt.cssHas||F.push(":has"),F=F.length&&new RegExp(F.join("|")),sn=function(ot,at){if(ot===at)return N=!0,0;var Bt=!ot.compareDocumentPosition-!at.compareDocumentPosition;return Bt||(1&(Bt=(ot.ownerDocument||ot)==(at.ownerDocument||at)?ot.compareDocumentPosition(at):1)||!Vt.sortDetached&&at.compareDocumentPosition(ot)===Bt?ot===_||ot.ownerDocument==fr&&oe.contains(fr,ot)?-1:at===_||at.ownerDocument==fr&&oe.contains(fr,at)?1:w?Ke.call(w,ot)-Ke.call(w,at):0:4&Bt?-1:1)}),_}for(d in oe.matches=function(B,q){return oe(B,null,null,q)},oe.matchesSelector=function(B,q){if(Qn(B),H&&!Ne[q+" "]&&(!F||!F.test(q)))try{var et=K.call(B,q);if(et||Vt.disconnectedMatch||B.document&&11!==B.document.nodeType)return et}catch{Ne(q,!0)}return 0<oe(q,_,null,[B]).length},oe.contains=function(B,q){return(B.ownerDocument||B)!=_&&Qn(B),x.contains(B,q)},oe.attr=function(B,q){(B.ownerDocument||B)!=_&&Qn(B);var et=m.attrHandle[q.toLowerCase()],ot=et&&En.call(m.attrHandle,q.toLowerCase())?et(B,q,!H):void 0;return void 0!==ot?ot:B.getAttribute(q)},oe.error=function(B){throw new Error("Syntax error, unrecognized expression: "+B)},x.uniqueSort=function(B){var q,et=[],ot=0,at=0;if(N=!Vt.sortStable,w=!Vt.sortStable&&ne.call(B,0),Ls.call(B,sn),N){for(;q=B[at++];)q===B[at]&&(ot=et.push(at));for(;ot--;)pt.call(B,et[ot],1)}return w=null,B},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(ne.apply(this)))},(m=x.expr={cacheLength:50,createPseudo:He,match:zr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(B){return B[1]=B[1].replace($e,wn),B[3]=(B[3]||B[4]||B[5]||"").replace($e,wn),"~="===B[2]&&(B[3]=" "+B[3]+" "),B.slice(0,4)},CHILD:function(B){return B[1]=B[1].toLowerCase(),"nth"===B[1].slice(0,3)?(B[3]||oe.error(B[0]),B[4]=+(B[4]?B[5]+(B[6]||1):2*("even"===B[3]||"odd"===B[3])),B[5]=+(B[7]+B[8]||"odd"===B[3])):B[3]&&oe.error(B[0]),B},PSEUDO:function(B){var q,et=!B[6]&&B[2];return zr.CHILD.test(B[0])?null:(B[3]?B[2]=B[4]||B[5]||"":et&&Rn.test(et)&&(q=wo(et,!0))&&(q=et.indexOf(")",et.length-q)-et.length)&&(B[0]=B[0].slice(0,q),B[2]=et.slice(0,q)),B.slice(0,3))}},filter:{TAG:function(B){var q=B.replace($e,wn).toLowerCase();return"*"===B?function(){return!0}:function(et){return Nt(et,q)}},CLASS:function(B){var q=O[B+" "];return q||(q=new RegExp("(^|"+ue+")"+B+"("+ue+"|$)"))&&O(B,function(et){return q.test("string"==typeof et.className&&et.className||typeof et.getAttribute<"u"&&et.getAttribute("class")||"")})},ATTR:function(B,q,et){return function(ot){var at=oe.attr(ot,B);return null==at?"!="===q:!q||(at+="","="===q?at===et:"!="===q?at!==et:"^="===q?et&&0===at.indexOf(et):"*="===q?et&&-1<at.indexOf(et):"$="===q?et&&at.slice(-et.length)===et:"~="===q?-1<(" "+at.replace(ve," ")+" ").indexOf(et):"|="===q&&(at===et||at.slice(0,et.length+1)===et+"-"))}},CHILD:function(B,q,et,ot,at){var Bt="nth"!==B.slice(0,3),Ft="last"!==B.slice(-4),_t="of-type"===q;return 1===ot&&0===at?function(It){return!!It.parentNode}:function(It,ge,se){var Mt,me,ae,tn,an,hn=Bt!==Ft?"nextSibling":"previousSibling",Jn=It.parentNode,Zn=_t&&It.nodeName.toLowerCase(),On=!se&&!_t,Oe=!1;if(Jn){if(Bt){for(;hn;){for(ae=It;ae=ae[hn];)if(_t?Nt(ae,Zn):1===ae.nodeType)return!1;an=hn="only"===B&&!an&&"nextSibling"}return!0}if(an=[Ft?Jn.firstChild:Jn.lastChild],Ft&&On){for(Oe=(tn=(Mt=(me=Jn[st]||(Jn[st]={}))[B]||[])[0]===X&&Mt[1])&&Mt[2],ae=tn&&Jn.childNodes[tn];ae=++tn&&ae&&ae[hn]||(Oe=tn=0)||an.pop();)if(1===ae.nodeType&&++Oe&&ae===It){me[B]=[X,tn,Oe];break}}else if(On&&(Oe=tn=(Mt=(me=It[st]||(It[st]={}))[B]||[])[0]===X&&Mt[1]),!1===Oe)for(;(ae=++tn&&ae&&ae[hn]||(Oe=tn=0)||an.pop())&&(!(_t?Nt(ae,Zn):1===ae.nodeType)||!++Oe||(On&&((me=ae[st]||(ae[st]={}))[B]=[X,Oe]),ae!==It)););return(Oe-=at)===ot||Oe%ot==0&&0<=Oe/ot}}},PSEUDO:function(B,q){var et,ot=m.pseudos[B]||m.setFilters[B.toLowerCase()]||oe.error("unsupported pseudo: "+B);return ot[st]?ot(q):1<ot.length?(et=[B,B,"",q],m.setFilters.hasOwnProperty(B.toLowerCase())?He(function(at,Bt){for(var Ft,_t=ot(at,q),It=_t.length;It--;)at[Ft=Ke.call(at,_t[It])]=!(Bt[Ft]=_t[It])}):function(at){return ot(at,0,et)}):ot}},pseudos:{not:He(function(B){var q=[],et=[],ot=ms(B.replace(go,"$1"));return ot[st]?He(function(at,Bt,Ft,_t){for(var It,ge=ot(at,null,_t,[]),se=at.length;se--;)(It=ge[se])&&(at[se]=!(Bt[se]=It))}):function(at,Bt,Ft){return q[0]=at,ot(q,null,Ft,et),q[0]=null,!et.pop()}}),has:He(function(B){return function(q){return 0<oe(B,q).length}}),contains:He(function(B){return B=B.replace($e,wn),function(q){return-1<(q.textContent||x.text(q)).indexOf(B)}}),lang:He(function(B){return Zr.test(B||"")||oe.error("unsupported lang: "+B),B=B.replace($e,wn).toLowerCase(),function(q){var et;do{if(et=H?q.lang:q.getAttribute("xml:lang")||q.getAttribute("lang"))return(et=et.toLowerCase())===B||0===et.indexOf(B+"-")}while((q=q.parentNode)&&1===q.nodeType);return!1}}),target:function(B){var q=bt.location&&bt.location.hash;return q&&q.slice(1)===B.id},root:function(B){return B===T},focus:function(B){return B===function(){try{return _.activeElement}catch{}}()&&_.hasFocus()&&!!(B.type||B.href||~B.tabIndex)},enabled:eo(!1),disabled:eo(!0),checked:function(B){return Nt(B,"input")&&!!B.checked||Nt(B,"option")&&!!B.selected},selected:function(B){return!0===B.selected},empty:function(B){for(B=B.firstChild;B;B=B.nextSibling)if(B.nodeType<6)return!1;return!0},parent:function(B){return!m.pseudos.empty(B)},header:function(B){return Me.test(B.nodeName)},input:function(B){return to.test(B.nodeName)},button:function(B){return Nt(B,"input")&&"button"===B.type||Nt(B,"button")},text:function(B){var q;return Nt(B,"input")&&"text"===B.type&&(null==(q=B.getAttribute("type"))||"text"===q.toLowerCase())},first:xo(function(){return[0]}),last:xo(function(B,q){return[q-1]}),eq:xo(function(B,q,et){return[et<0?et+q:et]}),even:xo(function(B,q){for(var et=0;et<q;et+=2)B.push(et);return B}),odd:xo(function(B,q){for(var et=1;et<q;et+=2)B.push(et);return B}),lt:xo(function(B,q,et){var ot;for(ot=et<0?et+q:q<et?q:et;0<=--ot;)B.push(ot);return B}),gt:xo(function(B,q,et){for(var ot=et<0?et+q:et;++ot<q;)B.push(ot);return B})}}).pseudos.nth=m.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})m.pseudos[d]=wr(d);for(d in{submit:!0,reset:!0})m.pseudos[d]=us(d);function fs(){}function wo(B,q){var et,ot,at,Bt,Ft,_t,It,ge=ce[B+" "];if(ge)return q?0:ge.slice(0);for(Ft=B,_t=[],It=m.preFilter;Ft;){for(Bt in et&&!(ot=xe.exec(Ft))||(ot&&(Ft=Ft.slice(ot[0].length)||Ft),_t.push(at=[])),et=!1,(ot=Ko.exec(Ft))&&(et=ot.shift(),at.push({value:et,type:ot[0].replace(go," ")}),Ft=Ft.slice(et.length)),m.filter)!(ot=zr[Bt].exec(Ft))||It[Bt]&&!(ot=It[Bt](ot))||(et=ot.shift(),at.push({value:et,type:Bt,matches:ot}),Ft=Ft.slice(et.length));if(!et)break}return q?Ft.length:Ft?oe.error(B):ce(B,_t).slice(0)}function Ur(B){for(var q=0,et=B.length,ot="";q<et;q++)ot+=B[q].value;return ot}function no(B,q,et){var ot=q.dir,at=q.next,Bt=at||ot,Ft=et&&"parentNode"===Bt,_t=ut++;return q.first?function(It,ge,se){for(;It=It[ot];)if(1===It.nodeType||Ft)return B(It,ge,se);return!1}:function(It,ge,se){var Mt,me,ae=[X,_t];if(se){for(;It=It[ot];)if((1===It.nodeType||Ft)&&B(It,ge,se))return!0}else for(;It=It[ot];)if(1===It.nodeType||Ft)if(me=It[st]||(It[st]={}),at&&Nt(It,at))It=It[ot]||It;else{if((Mt=me[Bt])&&Mt[0]===X&&Mt[1]===_t)return ae[2]=Mt[2];if((me[Bt]=ae)[2]=B(It,ge,se))return!0}return!1}}function Pi(B){return 1<B.length?function(q,et,ot){for(var at=B.length;at--;)if(!B[at](q,et,ot))return!1;return!0}:B[0]}function So(B,q,et,ot,at){for(var Bt,Ft=[],_t=0,It=B.length,ge=null!=q;_t<It;_t++)(Bt=B[_t])&&(et&&!et(Bt,ot,at)||(Ft.push(Bt),ge&&q.push(_t)));return Ft}function Fa(B,q,et,ot,at,Bt){return ot&&!ot[st]&&(ot=Fa(ot)),at&&!at[st]&&(at=Fa(at,Bt)),He(function(Ft,_t,It,ge){var se,Mt,me,ae,tn=[],an=[],hn=_t.length,Jn=Ft||function(On,Oe,ro){for(var lr=0,Ws=Oe.length;lr<Ws;lr++)oe(On,Oe[lr],ro);return ro}(q||"*",It.nodeType?[It]:It,[]),Zn=!B||!Ft&&q?Jn:So(Jn,tn,B,It,ge);if(et?et(Zn,ae=at||(Ft?B:hn||ot)?[]:_t,It,ge):ae=Zn,ot)for(se=So(ae,an),ot(se,[],It,ge),Mt=se.length;Mt--;)(me=se[Mt])&&(ae[an[Mt]]=!(Zn[an[Mt]]=me));if(Ft){if(at||B){if(at){for(se=[],Mt=ae.length;Mt--;)(me=ae[Mt])&&se.push(Zn[Mt]=me);at(null,ae=[],se,ge)}for(Mt=ae.length;Mt--;)(me=ae[Mt])&&-1<(se=at?Ke.call(Ft,me):tn[Mt])&&(Ft[se]=!(_t[se]=me))}}else ae=So(ae===_t?ae.splice(hn,ae.length):ae),at?at(null,_t,ae,ge):tt.apply(_t,ae)})}function ja(B){for(var q,et,ot,at=B.length,Bt=m.relative[B[0].type],Ft=Bt||m.relative[" "],_t=Bt?1:0,It=no(function(Mt){return Mt===q},Ft,!0),ge=no(function(Mt){return-1<Ke.call(q,Mt)},Ft,!0),se=[function(Mt,me,ae){var tn=!Bt&&(ae||me!=y)||((q=me).nodeType?It(Mt,me,ae):ge(Mt,me,ae));return q=null,tn}];_t<at;_t++)if(et=m.relative[B[_t].type])se=[no(Pi(se),et)];else{if((et=m.filter[B[_t].type].apply(null,B[_t].matches))[st]){for(ot=++_t;ot<at&&!m.relative[B[ot].type];ot++);return Fa(1<_t&&Pi(se),1<_t&&Ur(B.slice(0,_t-1).concat({value:" "===B[_t-2].type?"*":""})).replace(go,"$1"),et,_t<ot&&ja(B.slice(_t,ot)),ot<at&&ja(B=B.slice(ot)),ot<at&&Ur(B))}se.push(et)}return Pi(se)}function ms(B,q){var et,ot,at,Bt,Ft,_t,It=[],ge=[],se=le[B+" "];if(!se){for(q||(q=wo(B)),et=q.length;et--;)(se=ja(q[et]))[st]?It.push(se):ge.push(se);(se=le(B,(ot=ge,Bt=0<(at=It).length,Ft=0<ot.length,_t=function(Mt,me,ae,tn,an){var hn,Jn,Zn,On=0,Oe="0",ro=Mt&&[],lr=[],Ws=y,Li=Mt||Ft&&m.find.TAG("*",an),Mi=X+=null==Ws?1:Math.random()||.1,ac=Li.length;for(an&&(y=me==_||me||an);Oe!==ac&&null!=(hn=Li[Oe]);Oe++){if(Ft&&hn){for(Jn=0,me||hn.ownerDocument==_||(Qn(hn),ae=!H);Zn=ot[Jn++];)if(Zn(hn,me||_,ae)){tt.call(tn,hn);break}an&&(X=Mi)}Bt&&((hn=!Zn&&hn)&&On--,Mt&&ro.push(hn))}if(On+=Oe,Bt&&Oe!==On){for(Jn=0;Zn=at[Jn++];)Zn(ro,lr,me,ae);if(Mt){if(0<On)for(;Oe--;)ro[Oe]||lr[Oe]||(lr[Oe]=ir.call(tn));lr=So(lr)}tt.apply(tn,lr),an&&!Mt&&0<lr.length&&1<On+at.length&&x.uniqueSort(tn)}return an&&(X=Mi,y=Ws),ro},Bt?He(_t):_t))).selector=B}return se}function kr(B,q,et,ot){var at,Bt,Ft,_t,It,ge="function"==typeof B&&B,se=!ot&&wo(B=ge.selector||B);if(et=et||[],1===se.length){if(2<(Bt=se[0]=se[0].slice(0)).length&&"ID"===(Ft=Bt[0]).type&&9===q.nodeType&&H&&m.relative[Bt[1].type]){if(!(q=(m.find.ID(Ft.matches[0].replace($e,wn),q)||[])[0]))return et;ge&&(q=q.parentNode),B=B.slice(Bt.shift().value.length)}for(at=zr.needsContext.test(B)?0:Bt.length;at--&&!m.relative[_t=(Ft=Bt[at]).type];)if((It=m.find[_t])&&(ot=It(Ft.matches[0].replace($e,wn),Ze.test(Bt[0].type)&&Sr(q.parentNode)||q))){if(Bt.splice(at,1),!(B=ot.length&&Ur(Bt)))return tt.apply(et,ot),et;break}}return(ge||ms(B,se))(ot,q,!H,et,!q||Ze.test(B)&&Sr(q.parentNode)||q),et}fs.prototype=m.filters=m.pseudos,m.setFilters=new fs,Vt.sortStable=st.split("").sort(sn).join("")===st,Qn(),Vt.sortDetached=Le(function(B){return 1&B.compareDocumentPosition(_.createElement("fieldset"))}),x.find=oe,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,oe.compile=ms,oe.select=kr,oe.setDocument=Qn,oe.escape=x.escapeSelector,oe.getText=x.text,oe.isXML=x.isXMLDoc,oe.selectors=x.expr,oe.support=x.support,oe.uniqueSort=x.uniqueSort}();var Vn=function(d,m,y){for(var w=[],N=void 0!==y;(d=d[m])&&9!==d.nodeType;)if(1===d.nodeType){if(N&&x(d).is(y))break;w.push(d)}return w},Ce=function(d,m){for(var y=[];d;d=d.nextSibling)1===d.nodeType&&d!==m&&y.push(d);return y},Be=x.expr.match.needsContext,E=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function vo(d,m,y){return Pt(m)?x.grep(d,function(w,N){return!!m.call(w,N,w)!==y}):m.nodeType?x.grep(d,function(w){return w===m!==y}):"string"!=typeof m?x.grep(d,function(w){return-1<Ke.call(m,w)!==y}):x.filter(m,d,y)}x.filter=function(d,m,y){var w=m[0];return y&&(d=":not("+d+")"),1===m.length&&1===w.nodeType?x.find.matchesSelector(w,d)?[w]:[]:x.find.matches(d,x.grep(m,function(N){return 1===N.nodeType}))},x.fn.extend({find:function(d){var m,y,w=this.length,N=this;if("string"!=typeof d)return this.pushStack(x(d).filter(function(){for(m=0;m<w;m++)if(x.contains(N[m],this))return!0}));for(y=this.pushStack([]),m=0;m<w;m++)x.find(d,N[m],y);return 1<w?x.uniqueSort(y):y},filter:function(d){return this.pushStack(vo(this,d||[],!1))},not:function(d){return this.pushStack(vo(this,d||[],!0))},is:function(d){return!!vo(this,"string"==typeof d&&Be.test(d)?x(d):d||[],!1).length}});var Et,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(d,m,y){var w,N;if(!d)return this;if(y=y||Et,"string"==typeof d){if(!(w="<"===d[0]&&">"===d[d.length-1]&&3<=d.length?[null,d,null]:ee.exec(d))||!w[1]&&m)return!m||m.jquery?(m||y).find(d):this.constructor(m).find(d);if(w[1]){if(x.merge(this,x.parseHTML(w[1],(m=m instanceof x?m[0]:m)&&m.nodeType?m.ownerDocument||m:Qt,!0)),E.test(w[1])&&x.isPlainObject(m))for(w in m)Pt(this[w])?this[w](m[w]):this.attr(w,m[w]);return this}return(N=Qt.getElementById(w[2]))&&(this[0]=N,this.length=1),this}return d.nodeType?(this[0]=d,this.length=1,this):Pt(d)?void 0!==y.ready?y.ready(d):d(x):x.makeArray(d,this)}).prototype=x.fn,Et=x(Qt);var ie=/^(?:parents|prev(?:Until|All))/,Tt={children:!0,contents:!0,next:!0,prev:!0};function Ae(d,m){for(;(d=d[m])&&1!==d.nodeType;);return d}x.fn.extend({has:function(d){var m=x(d,this),y=m.length;return this.filter(function(){for(var w=0;w<y;w++)if(x.contains(this,m[w]))return!0})},closest:function(d,m){var y,w=0,N=this.length,_=[],T="string"!=typeof d&&x(d);if(!Be.test(d))for(;w<N;w++)for(y=this[w];y&&y!==m;y=y.parentNode)if(y.nodeType<11&&(T?-1<T.index(y):1===y.nodeType&&x.find.matchesSelector(y,d))){_.push(y);break}return this.pushStack(1<_.length?x.uniqueSort(_):_)},index:function(d){return d?"string"==typeof d?Ke.call(x(d),this[0]):Ke.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,m){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(d,m))))},addBack:function(d){return this.add(null==d?this.prevObject:this.prevObject.filter(d))}}),x.each({parent:function(d){var m=d.parentNode;return m&&11!==m.nodeType?m:null},parents:function(d){return Vn(d,"parentNode")},parentsUntil:function(d,m,y){return Vn(d,"parentNode",y)},next:function(d){return Ae(d,"nextSibling")},prev:function(d){return Ae(d,"previousSibling")},nextAll:function(d){return Vn(d,"nextSibling")},prevAll:function(d){return Vn(d,"previousSibling")},nextUntil:function(d,m,y){return Vn(d,"nextSibling",y)},prevUntil:function(d,m,y){return Vn(d,"previousSibling",y)},siblings:function(d){return Ce((d.parentNode||{}).firstChild,d)},children:function(d){return Ce(d.firstChild)},contents:function(d){return null!=d.contentDocument&&Ht(d.contentDocument)?d.contentDocument:(Nt(d,"template")&&(d=d.content||d),x.merge([],d.childNodes))}},function(d,m){x.fn[d]=function(y,w){var N=x.map(this,m,y);return"Until"!==d.slice(-5)&&(w=y),w&&"string"==typeof w&&(N=x.filter(w,N)),1<this.length&&(Tt[d]||x.uniqueSort(N),ie.test(d)&&N.reverse()),this.pushStack(N)}});var re=/[^\x20\t\r\n\f]+/g;function rt(d){return d}function bo(d){throw d}function Kr(d,m,y,w){var N;try{d&&Pt(N=d.promise)?N.call(d).done(m).fail(y):d&&Pt(N=d.then)?N.call(d,m,y):m.apply(void 0,[d].slice(w))}catch(_){y.apply(void 0,[_])}}x.Callbacks=function(d){var y;d="string"==typeof d?(y={},x.each(d.match(re)||[],function(X,ut){y[ut]=!0}),y):x.extend({},d);var w,N,_,T,H=[],F=[],K=-1,tt=function(){for(T=T||d.once,_=w=!0;F.length;K=-1)for(N=F.shift();++K<H.length;)!1===H[K].apply(N[0],N[1])&&d.stopOnFalse&&(K=H.length,N=!1);d.memory||(N=!1),w=!1,T&&(H=N?[]:"")},st={add:function(){return H&&(N&&!w&&(K=H.length-1,F.push(N)),function X(ut){x.each(ut,function(O,ce){Pt(ce)?d.unique&&st.has(ce)||H.push(ce):ce&&ce.length&&"string"!==ye(ce)&&X(ce)})}(arguments),N&&!w&&tt()),this},remove:function(){return x.each(arguments,function(X,ut){for(var O;-1<(O=x.inArray(ut,H,O));)H.splice(O,1),O<=K&&K--}),this},has:function(X){return X?-1<x.inArray(X,H):0<H.length},empty:function(){return H&&(H=[]),this},disable:function(){return T=F=[],H=N="",this},disabled:function(){return!H},lock:function(){return T=F=[],N||w||(H=N=""),this},locked:function(){return!!T},fireWith:function(X,ut){return T||(ut=[X,(ut=ut||[]).slice?ut.slice():ut],F.push(ut),w||tt()),this},fire:function(){return st.fireWith(this,arguments),this},fired:function(){return!!_}};return st},x.extend({Deferred:function(d){var m=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],y="pending",w={state:function(){return y},always:function(){return N.done(arguments).fail(arguments),this},catch:function(_){return w.then(null,_)},pipe:function(){var _=arguments;return x.Deferred(function(T){x.each(m,function(H,F){var K=Pt(_[F[4]])&&_[F[4]];N[F[1]](function(){var tt=K&&K.apply(this,arguments);tt&&Pt(tt.promise)?tt.promise().progress(T.notify).done(T.resolve).fail(T.reject):T[F[0]+"With"](this,K?[tt]:arguments)})}),_=null}).promise()},then:function(_,T,H){var F=0;function K(tt,st,X,ut){return function(){var O=this,ce=arguments,le=function(){var sn,de;if(!(tt<F)){if((sn=X.apply(O,ce))===st.promise())throw new TypeError("Thenable self-resolution");Pt(de=sn&&("object"==typeof sn||"function"==typeof sn)&&sn.then)?ut?de.call(sn,K(F,st,rt,ut),K(F,st,bo,ut)):(F++,de.call(sn,K(F,st,rt,ut),K(F,st,bo,ut),K(F,st,rt,st.notifyWith))):(X!==rt&&(O=void 0,ce=[sn]),(ut||st.resolveWith)(O,ce))}},Ne=ut?le:function(){try{le()}catch(sn){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(sn,Ne.error),F<=tt+1&&(X!==bo&&(O=void 0,ce=[sn]),st.rejectWith(O,ce))}};tt?Ne():(x.Deferred.getErrorHook?Ne.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(Ne.error=x.Deferred.getStackHook()),bt.setTimeout(Ne))}}return x.Deferred(function(tt){m[0][3].add(K(0,tt,Pt(H)?H:rt,tt.notifyWith)),m[1][3].add(K(0,tt,Pt(_)?_:rt)),m[2][3].add(K(0,tt,Pt(T)?T:bo))}).promise()},promise:function(_){return null!=_?x.extend(_,w):w}},N={};return x.each(m,function(_,T){var H=T[2],F=T[5];w[T[1]]=H.add,F&&H.add(function(){y=F},m[3-_][2].disable,m[3-_][3].disable,m[0][2].lock,m[0][3].lock),H.add(T[3].fire),N[T[0]]=function(){return N[T[0]+"With"](this===N?void 0:this,arguments),this},N[T[0]+"With"]=H.fireWith}),w.promise(N),d&&d.call(N,N),N},when:function(d){var m=arguments.length,y=m,w=Array(y),N=ne.call(arguments),_=x.Deferred(),T=function(H){return function(F){w[H]=this,N[H]=1<arguments.length?ne.call(arguments):F,--m||_.resolveWith(w,N)}};if(m<=1&&(Kr(d,_.done(T(y)).resolve,_.reject,!m),"pending"===_.state()||Pt(N[y]&&N[y].then)))return _.then();for(;y--;)Kr(N[y],T(y),_.reject);return _.promise()}});var $t=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(d,m){bt.console&&bt.console.warn&&d&&$t.test(d.name)&&bt.console.warn("jQuery.Deferred exception: "+d.message,d.stack,m)},x.readyException=function(d){bt.setTimeout(function(){throw d})};var jo=x.Deferred();function bn(){Qt.removeEventListener("DOMContentLoaded",bn),bt.removeEventListener("load",bn),x.ready()}x.fn.ready=function(d){return jo.then(d).catch(function(m){x.readyException(m)}),this},x.extend({isReady:!1,readyWait:1,ready:function(d){(!0===d?--x.readyWait:x.isReady)||(x.isReady=!0)!==d&&0<--x.readyWait||jo.resolveWith(Qt,[x])}}),x.ready.then=jo.then,"complete"===Qt.readyState||"loading"!==Qt.readyState&&!Qt.documentElement.doScroll?bt.setTimeout(x.ready):(Qt.addEventListener("DOMContentLoaded",bn),bt.addEventListener("load",bn));var Lr=function(d,m,y,w,N,_,T){var H=0,F=d.length,K=null==y;if("object"===ye(y))for(H in N=!0,y)Lr(d,m,H,y[H],!0,_,T);else if(void 0!==w&&(N=!0,Pt(w)||(T=!0),K&&(T?(m.call(d,w),m=null):(K=m,m=function(tt,st,X){return K.call(x(tt),X)})),m))for(;H<F;H++)m(d[H],y,T?w:w.call(d[H],H,m(d[H],y)));return N?d:K?m.call(d):F?m(d[0],y):_},qe=/^-ms-/,Ms=/-([a-z])/g;function Wl(d,m){return m.toUpperCase()}function rn(d){return d.replace(qe,"ms-").replace(Ms,Wl)}var mr=function(d){return 1===d.nodeType||9===d.nodeType||!+d.nodeType};function Xr(){this.expando=x.expando+Xr.uid++}Xr.uid=1,Xr.prototype={cache:function(d){var m=d[this.expando];return m||(m={},mr(d)&&(d.nodeType?d[this.expando]=m:Object.defineProperty(d,this.expando,{value:m,configurable:!0}))),m},set:function(d,m,y){var w,N=this.cache(d);if("string"==typeof m)N[rn(m)]=y;else for(w in m)N[rn(w)]=m[w];return N},get:function(d,m){return void 0===m?this.cache(d):d[this.expando]&&d[this.expando][rn(m)]},access:function(d,m,y){return void 0===m||m&&"string"==typeof m&&void 0===y?this.get(d,m):(this.set(d,m,y),void 0!==y?y:m)},remove:function(d,m){var y,w=d[this.expando];if(void 0!==w){if(void 0!==m)for((y=(m=Array.isArray(m)?m.map(rn):(m=rn(m))in w?[m]:m.match(re)||[]).length);y--;)delete w[m[y]];(void 0===m||x.isEmptyObject(w))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var m=d[this.expando];return void 0!==m&&!x.isEmptyObject(m)}};var Gt=new Xr,Nn=new Xr,zo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Na=/[A-Z]/g;function _n(d,m,y){var w,N;if(void 0===y&&1===d.nodeType)if(w="data-"+m.replace(Na,"-$&").toLowerCase(),"string"==typeof(y=d.getAttribute(w))){try{y="true"===(N=y)||"false"!==N&&("null"===N?null:N===+N+""?+N:zo.test(N)?JSON.parse(N):N)}catch{}Nn.set(d,m,y)}else y=void 0;return y}x.extend({hasData:function(d){return Nn.hasData(d)||Gt.hasData(d)},data:function(d,m,y){return Nn.access(d,m,y)},removeData:function(d,m){Nn.remove(d,m)},_data:function(d,m,y){return Gt.access(d,m,y)},_removeData:function(d,m){Gt.remove(d,m)}}),x.fn.extend({data:function(d,m){var y,w,N,_=this[0],T=_&&_.attributes;if(void 0===d){if(this.length&&(N=Nn.get(_),1===_.nodeType&&!Gt.get(_,"hasDataAttrs"))){for(y=T.length;y--;)T[y]&&0===(w=T[y].name).indexOf("data-")&&(w=rn(w.slice(5)),_n(_,w,N[w]));Gt.set(_,"hasDataAttrs",!0)}return N}return"object"==typeof d?this.each(function(){Nn.set(this,d)}):Lr(this,function(H){var F;if(_&&void 0===H)return void 0!==(F=Nn.get(_,d))||void 0!==(F=_n(_,d))?F:void 0;this.each(function(){Nn.set(this,d,H)})},null,m,1<arguments.length,null,!0)},removeData:function(d){return this.each(function(){Nn.remove(this,d)})}}),x.extend({queue:function(d,m,y){var w;if(d)return w=Gt.get(d,m=(m||"fx")+"queue"),y&&(!w||Array.isArray(y)?w=Gt.access(d,m,x.makeArray(y)):w.push(y)),w||[]},dequeue:function(d,m){var y=x.queue(d,m=m||"fx"),w=y.length,N=y.shift(),_=x._queueHooks(d,m);"inprogress"===N&&(N=y.shift(),w--),N&&("fx"===m&&y.unshift("inprogress"),delete _.stop,N.call(d,function(){x.dequeue(d,m)},_)),!w&&_&&_.empty.fire()},_queueHooks:function(d,m){var y=m+"queueHooks";return Gt.get(d,y)||Gt.access(d,y,{empty:x.Callbacks("once memory").add(function(){Gt.remove(d,[m+"queue",y])})})}}),x.fn.extend({queue:function(d,m){var y=2;return"string"!=typeof d&&(m=d,d="fx",y--),arguments.length<y?x.queue(this[0],d):void 0===m?this:this.each(function(){var w=x.queue(this,d,m);x._queueHooks(this,d),"fx"===d&&"inprogress"!==w[0]&&x.dequeue(this,d)})},dequeue:function(d){return this.each(function(){x.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,m){var y,w=1,N=x.Deferred(),_=this,T=this.length,H=function(){--w||N.resolveWith(_,[_])};for("string"!=typeof d&&(m=d,d=void 0),d=d||"fx";T--;)(y=Gt.get(_[T],d+"queueHooks"))&&y.empty&&(w++,y.empty.add(H));return H(),N.promise(m)}});var yo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ye=new RegExp("^(?:([+-])=|)("+yo+")([a-z%]*)$","i"),Kn=["Top","Right","Bottom","Left"],Qe=Qt.documentElement,rs=function(d){return x.contains(d.ownerDocument,d)},Se={composed:!0};Qe.getRootNode&&(rs=function(d){return x.contains(d.ownerDocument,d)||d.getRootNode(Se)===d.ownerDocument});var Ho=function(d,m){return"none"===(d=m||d).style.display||""===d.style.display&&rs(d)&&"none"===x.css(d,"display")};function Vl(d,m,y,w){var N,_,T=20,H=w?function(){return w.cur()}:function(){return x.css(d,m,"")},F=H(),K=y&&y[3]||(x.cssNumber[m]?"":"px"),tt=d.nodeType&&(x.cssNumber[m]||"px"!==K&&+F)&&Ye.exec(x.css(d,m));if(tt&&tt[3]!==K){for(K=K||tt[3],tt=+(F/=2)||1;T--;)x.style(d,m,tt+K),(1-_)*(1-(_=H()/F||.5))<=0&&(T=0),tt/=_;x.style(d,m,(tt*=2)+K),y=y||[]}return y&&(tt=+tt||+F||0,N=y[1]?tt+(y[1]+1)*y[2]:+y[2],w&&(w.unit=K,w.start=tt,w.end=N)),N}var _a={};function Uo(d,m){for(var y,w,N,_,T,H,F,K=[],tt=0,st=d.length;tt<st;tt++)(w=d[tt]).style&&(y=w.style.display,m?("none"===y&&(K[tt]=Gt.get(w,"display")||null,K[tt]||(w.style.display="")),""===w.style.display&&Ho(w)&&(K[tt]=(F=T=_=void 0,T=(N=w).ownerDocument,(F=_a[H=N.nodeName])||(_=T.body.appendChild(T.createElement(H)),F=x.css(_,"display"),_.parentNode.removeChild(_),"none"===F&&(F="block"),_a[H]=F)))):"none"!==y&&(K[tt]="none",Gt.set(w,"display",y)));for(tt=0;tt<st;tt++)null!=K[tt]&&(d[tt].style.display=K[tt]);return d}x.fn.extend({show:function(){return Uo(this,!0)},hide:function(){return Uo(this)},toggle:function(d){return"boolean"==typeof d?d?this.show():this.hide():this.each(function(){Ho(this)?x(this).show():x(this).hide()})}});var xr,os,qo=/^(?:checkbox|radio)$/i,ke=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Zt=/^$|^module$|\/(?:java|ecma)script/i;xr=Qt.createDocumentFragment().appendChild(Qt.createElement("div")),(os=Qt.createElement("input")).setAttribute("type","radio"),os.setAttribute("checked","checked"),os.setAttribute("name","t"),xr.appendChild(os),Vt.checkClone=xr.cloneNode(!0).cloneNode(!0).lastChild.checked,xr.innerHTML="<textarea>x</textarea>",Vt.noCloneChecked=!!xr.cloneNode(!0).lastChild.defaultValue,xr.innerHTML="<option></option>",Vt.option=!!xr.lastChild;var yn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Fn(d,m){var y;return y=typeof d.getElementsByTagName<"u"?d.getElementsByTagName(m||"*"):typeof d.querySelectorAll<"u"?d.querySelectorAll(m||"*"):[],void 0===m||m&&Nt(d,m)?x.merge([d],y):y}function Aa(d,m){for(var y=0,w=d.length;y<w;y++)Gt.set(d[y],"globalEval",!m||Gt.get(m[y],"globalEval"))}yn.tbody=yn.tfoot=yn.colgroup=yn.caption=yn.thead,yn.th=yn.td,Vt.option||(yn.optgroup=yn.option=[1,"<select multiple='multiple'>","</select>"]);var yi=/<|&#?\w+;/;function Is(d,m,y,w,N){for(var _,T,H,F,K,tt,st=m.createDocumentFragment(),X=[],ut=0,O=d.length;ut<O;ut++)if((_=d[ut])||0===_)if("object"===ye(_))x.merge(X,_.nodeType?[_]:_);else if(yi.test(_)){for(T=T||st.appendChild(m.createElement("div")),H=(ke.exec(_)||["",""])[1].toLowerCase(),T.innerHTML=(F=yn[H]||yn._default)[1]+x.htmlPrefilter(_)+F[2],tt=F[0];tt--;)T=T.lastChild;x.merge(X,T.childNodes),(T=st.firstChild).textContent=""}else X.push(m.createTextNode(_));for(st.textContent="",ut=0;_=X[ut++];)if(w&&-1<x.inArray(_,w))N&&N.push(_);else if(K=rs(_),T=Fn(st.appendChild(_),"script"),K&&Aa(T),y)for(tt=0;_=T[tt++];)Zt.test(_.type||"")&&y.push(_);return st}var Ra=/^([^.]*)(?:\.(.+)|)/;function Mr(){return!0}function Gr(){return!1}function Ta(d,m,y,w,N,_){var T,H;if("object"==typeof m){for(H in"string"!=typeof y&&(w=w||y,y=void 0),m)Ta(d,H,y,w,m[H],_);return d}if(null==w&&null==N?(N=y,w=y=void 0):null==N&&("string"==typeof y?(N=w,w=void 0):(N=w,w=y,y=void 0)),!1===N)N=Gr;else if(!N)return d;return 1===_&&(T=N,(N=function(F){return x().off(F),T.apply(this,arguments)}).guid=T.guid||(T.guid=x.guid++)),d.each(function(){x.event.add(this,m,N,w,y)})}function Ir(d,m,y){y?(Gt.set(d,m,!1),x.event.add(d,m,{namespace:!1,handler:function(w){var N,_=Gt.get(this,m);if(1&w.isTrigger&&this[m]){if(_)(x.event.special[m]||{}).delegateType&&w.stopPropagation();else if(_=ne.call(arguments),Gt.set(this,m,_),this[m](),N=Gt.get(this,m),Gt.set(this,m,!1),_!==N)return w.stopImmediatePropagation(),w.preventDefault(),N}else _&&(Gt.set(this,m,x.event.trigger(_[0],_.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=Mr)}})):void 0===Gt.get(d,m)&&x.event.add(d,m,Mr)}x.event={global:{},add:function(d,m,y,w,N){var _,T,H,F,K,tt,st,X,ut,O,ce,le=Gt.get(d);if(mr(d))for(y.handler&&(y=(_=y).handler,N=_.selector),N&&x.find.matchesSelector(Qe,N),y.guid||(y.guid=x.guid++),(F=le.events)||(F=le.events=Object.create(null)),(T=le.handle)||(T=le.handle=function(Ne){return typeof x<"u"&&x.event.triggered!==Ne.type?x.event.dispatch.apply(d,arguments):void 0}),K=(m=(m||"").match(re)||[""]).length;K--;)ut=ce=(H=Ra.exec(m[K])||[])[1],O=(H[2]||"").split(".").sort(),ut&&(st=x.event.special[ut]||{},st=x.event.special[ut=(N?st.delegateType:st.bindType)||ut]||{},tt=x.extend({type:ut,origType:ce,data:w,handler:y,guid:y.guid,selector:N,needsContext:N&&x.expr.match.needsContext.test(N),namespace:O.join(".")},_),(X=F[ut])||((X=F[ut]=[]).delegateCount=0,st.setup&&!1!==st.setup.call(d,w,O,T)||d.addEventListener&&d.addEventListener(ut,T)),st.add&&(st.add.call(d,tt),tt.handler.guid||(tt.handler.guid=y.guid)),N?X.splice(X.delegateCount++,0,tt):X.push(tt),x.event.global[ut]=!0)},remove:function(d,m,y,w,N){var _,T,H,F,K,tt,st,X,ut,O,ce,le=Gt.hasData(d)&&Gt.get(d);if(le&&(F=le.events)){for(K=(m=(m||"").match(re)||[""]).length;K--;)if(ut=ce=(H=Ra.exec(m[K])||[])[1],O=(H[2]||"").split(".").sort(),ut){for(st=x.event.special[ut]||{},X=F[ut=(w?st.delegateType:st.bindType)||ut]||[],H=H[2]&&new RegExp("(^|\\.)"+O.join("\\.(?:.*\\.|)")+"(\\.|$)"),T=_=X.length;_--;)tt=X[_],!N&&ce!==tt.origType||y&&y.guid!==tt.guid||H&&!H.test(tt.namespace)||w&&w!==tt.selector&&("**"!==w||!tt.selector)||(X.splice(_,1),tt.selector&&X.delegateCount--,st.remove&&st.remove.call(d,tt));T&&!X.length&&(st.teardown&&!1!==st.teardown.call(d,O,le.handle)||x.removeEvent(d,ut,le.handle),delete F[ut])}else for(ut in F)x.event.remove(d,ut+m[K],y,w,!0);x.isEmptyObject(F)&&Gt.remove(d,"handle events")}},dispatch:function(d){var m,y,w,N,_,T,H=new Array(arguments.length),F=x.event.fix(d),K=(Gt.get(this,"events")||Object.create(null))[F.type]||[],tt=x.event.special[F.type]||{};for(H[0]=F,m=1;m<arguments.length;m++)H[m]=arguments[m];if(F.delegateTarget=this,!tt.preDispatch||!1!==tt.preDispatch.call(this,F)){for(T=x.event.handlers.call(this,F,K),m=0;(N=T[m++])&&!F.isPropagationStopped();)for(F.currentTarget=N.elem,y=0;(_=N.handlers[y++])&&!F.isImmediatePropagationStopped();)F.rnamespace&&!1!==_.namespace&&!F.rnamespace.test(_.namespace)||(F.handleObj=_,F.data=_.data,void 0!==(w=((x.event.special[_.origType]||{}).handle||_.handler).apply(N.elem,H))&&!1===(F.result=w)&&(F.preventDefault(),F.stopPropagation()));return tt.postDispatch&&tt.postDispatch.call(this,F),F.result}},handlers:function(d,m){var y,w,N,_,T,H=[],F=m.delegateCount,K=d.target;if(F&&K.nodeType&&!("click"===d.type&&1<=d.button))for(;K!==this;K=K.parentNode||this)if(1===K.nodeType&&("click"!==d.type||!0!==K.disabled)){for(_=[],T={},y=0;y<F;y++)void 0===T[N=(w=m[y]).selector+" "]&&(T[N]=w.needsContext?-1<x(N,this).index(K):x.find(N,this,null,[K]).length),T[N]&&_.push(w);_.length&&H.push({elem:K,handlers:_})}return K=this,F<m.length&&H.push({elem:K,handlers:m.slice(F)}),H},addProp:function(d,m){Object.defineProperty(x.Event.prototype,d,{enumerable:!0,configurable:!0,get:Pt(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(y){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(d){return d[x.expando]?d:new x.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var m=this||d;return qo.test(m.type)&&m.click&&Nt(m,"input")&&Ir(m,"click",!0),!1},trigger:function(d){var m=this||d;return qo.test(m.type)&&m.click&&Nt(m,"input")&&Ir(m,"click"),!0},_default:function(d){var m=d.target;return qo.test(m.type)&&m.click&&Nt(m,"input")&&Gt.get(m,"click")||Nt(m,"a")}},beforeunload:{postDispatch:function(d){void 0!==d.result&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}},x.removeEvent=function(d,m,y){d.removeEventListener&&d.removeEventListener(m,y)},x.Event=function(d,m){if(!(this instanceof x.Event))return new x.Event(d,m);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||void 0===d.defaultPrevented&&!1===d.returnValue?Mr:Gr,this.target=d.target&&3===d.target.nodeType?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,m&&x.extend(this,m),this.timeStamp=d&&d.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Gr,isPropagationStopped:Gr,isImmediatePropagationStopped:Gr,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=Mr,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=Mr,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=Mr,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(d,m){function y(w){if(Qt.documentMode){var N=Gt.get(this,"handle"),_=x.event.fix(w);_.type="focusin"===w.type?"focus":"blur",_.isSimulated=!0,N(w),_.target===_.currentTarget&&N(_)}else x.event.simulate(m,w.target,x.event.fix(w))}x.event.special[d]={setup:function(){var w;if(Ir(this,d,!0),!Qt.documentMode)return!1;(w=Gt.get(this,m))||this.addEventListener(m,y),Gt.set(this,m,(w||0)+1)},trigger:function(){return Ir(this,d),!0},teardown:function(){var w;if(!Qt.documentMode)return!1;(w=Gt.get(this,m)-1)?Gt.set(this,m,w):(this.removeEventListener(m,y),Gt.remove(this,m))},_default:function(w){return Gt.get(w.target,d)},delegateType:m},x.event.special[m]={setup:function(){var w=this.ownerDocument||this.document||this,N=Qt.documentMode?this:w,_=Gt.get(N,m);_||(Qt.documentMode?this.addEventListener(m,y):w.addEventListener(d,y,!0)),Gt.set(N,m,(_||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,N=Qt.documentMode?this:w,_=Gt.get(N,m)-1;_?Gt.set(N,m,_):(Qt.documentMode?this.removeEventListener(m,y):w.removeEventListener(d,y,!0),Gt.remove(N,m))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,m){x.event.special[d]={delegateType:m,bindType:m,handle:function(y){var w,N=y.relatedTarget,_=y.handleObj;return N&&(N===this||x.contains(this,N))||(y.type=_.origType,w=_.handler.apply(this,arguments),y.type=m),w}}}),x.fn.extend({on:function(d,m,y,w){return Ta(this,d,m,y,w)},one:function(d,m,y,w){return Ta(this,d,m,y,w,1)},off:function(d,m,y){var w,N;if(d&&d.preventDefault&&d.handleObj)return w=d.handleObj,x(d.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof d){for(N in d)this.off(N,m,d[N]);return this}return!1!==m&&"function"!=typeof m||(y=m,m=void 0),!1===y&&(y=Gr),this.each(function(){x.event.remove(this,d,y,m)})}});var $o=/<script|<style|<link/i,Kl=/checked\s*(?:[^=]|=\s*.checked.)/i,Ci=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ss(d,m){return Nt(d,"table")&&Nt(11!==m.nodeType?m:m.firstChild,"tr")&&x(d).children("tbody")[0]||d}function Xl(d){return d.type=(null!==d.getAttribute("type"))+"/"+d.type,d}function Gl(d){return"true/"===(d.type||"").slice(0,5)?d.type=d.type.slice(5):d.removeAttribute("type"),d}function xi(d,m){var y,w,N,_,T,H;if(1===m.nodeType){if(Gt.hasData(d)&&(H=Gt.get(d).events))for(N in Gt.remove(m,"handle events"),H)for(y=0,w=H[N].length;y<w;y++)x.event.add(m,N,H[N][y]);Nn.hasData(d)&&(_=Nn.access(d),T=x.extend({},_),Nn.set(m,T))}}function ze(d,m,y,w){m=je(m);var N,_,T,H,F,K,tt=0,st=d.length,X=st-1,ut=m[0],O=Pt(ut);if(O||1<st&&"string"==typeof ut&&!Vt.checkClone&&Kl.test(ut))return d.each(function(ce){var le=d.eq(ce);O&&(m[0]=ut.call(this,ce,le.html())),ze(le,m,y,w)});if(st&&(_=(N=Is(m,d[0].ownerDocument,!1,d,w)).firstChild,1===N.childNodes.length&&(N=_),_||w)){for(H=(T=x.map(Fn(N,"script"),Xl)).length;tt<st;tt++)F=N,tt!==X&&(F=x.clone(F,!0,!0),H&&x.merge(T,Fn(F,"script"))),y.call(d[tt],F,tt);if(H)for(K=T[T.length-1].ownerDocument,x.map(T,Gl),tt=0;tt<H;tt++)Zt.test((F=T[tt]).type||"")&&!Gt.access(F,"globalEval")&&x.contains(K,F)&&(F.src&&"module"!==(F.type||"").toLowerCase()?x._evalUrl&&!F.noModule&&x._evalUrl(F.src,{nonce:F.nonce||F.getAttribute("nonce")},K):De(F.textContent.replace(Ci,""),F,K))}return d}function Je(d,m,y){for(var w,N=m?x.filter(m,d):d,_=0;null!=(w=N[_]);_++)y||1!==w.nodeType||x.cleanData(Fn(w)),w.parentNode&&(y&&rs(w)&&Aa(Fn(w,"script")),w.parentNode.removeChild(w));return d}x.extend({htmlPrefilter:function(d){return d},clone:function(d,m,y){var w,N,_,T,H,F,K,tt=d.cloneNode(!0),st=rs(d);if(!(Vt.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||x.isXMLDoc(d)))for(T=Fn(tt),w=0,N=(_=Fn(d)).length;w<N;w++)H=_[w],"input"===(K=(F=T[w]).nodeName.toLowerCase())&&qo.test(H.type)?F.checked=H.checked:"input"!==K&&"textarea"!==K||(F.defaultValue=H.defaultValue);if(m)if(y)for(_=_||Fn(d),T=T||Fn(tt),w=0,N=_.length;w<N;w++)xi(_[w],T[w]);else xi(d,tt);return 0<(T=Fn(tt,"script")).length&&Aa(T,!st&&Fn(d,"script")),tt},cleanData:function(d){for(var m,y,w,N=x.event.special,_=0;void 0!==(y=d[_]);_++)if(mr(y)){if(m=y[Gt.expando]){if(m.events)for(w in m.events)N[w]?x.event.remove(y,w):x.removeEvent(y,w,m.handle);y[Gt.expando]=void 0}y[Nn.expando]&&(y[Nn.expando]=void 0)}}}),x.fn.extend({detach:function(d){return Je(this,d,!0)},remove:function(d){return Je(this,d)},text:function(d){return Lr(this,function(m){return void 0===m?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=m)})},null,d,arguments.length)},append:function(){return ze(this,arguments,function(d){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ss(this,d).appendChild(d)})},prepend:function(){return ze(this,arguments,function(d){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var m=ss(this,d);m.insertBefore(d,m.firstChild)}})},before:function(){return ze(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return ze(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,m=0;null!=(d=this[m]);m++)1===d.nodeType&&(x.cleanData(Fn(d,!1)),d.textContent="");return this},clone:function(d,m){return d=null!=d&&d,m=m??d,this.map(function(){return x.clone(this,d,m)})},html:function(d){return Lr(this,function(m){var y=this[0]||{},w=0,N=this.length;if(void 0===m&&1===y.nodeType)return y.innerHTML;if("string"==typeof m&&!$o.test(m)&&!yn[(ke.exec(m)||["",""])[1].toLowerCase()]){m=x.htmlPrefilter(m);try{for(;w<N;w++)1===(y=this[w]||{}).nodeType&&(x.cleanData(Fn(y,!1)),y.innerHTML=m);y=0}catch{}}y&&this.empty().append(m)},null,d,arguments.length)},replaceWith:function(){var d=[];return ze(this,arguments,function(m){var y=this.parentNode;x.inArray(this,d)<0&&(x.cleanData(Fn(this)),y&&y.replaceChild(m,this))},d)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,m){x.fn[d]=function(y){for(var w,N=[],_=x(y),T=_.length-1,H=0;H<=T;H++)w=H===T?this:this.clone(!0),x(_[H])[m](w),kn.apply(N,w.get());return this.pushStack(N)}});var Fs=new RegExp("^("+yo+")(?!px)[a-z%]+$","i"),js=/^--/,Yr=function(d){var m=d.ownerDocument.defaultView;return m&&m.opener||(m=bt),m.getComputedStyle(d)},Yl=function(d,m,y){var w,N,_={};for(N in m)_[N]=d.style[N],d.style[N]=m[N];for(N in w=y.call(d),m)d.style[N]=_[N];return w},Ql=new RegExp(Kn.join("|"),"i");function Xn(d,m,y){var w,N,_,T,H=js.test(m),F=d.style;return(y=y||Yr(d))&&(T=y.getPropertyValue(m)||y[m],H&&T&&(T=T.replace(go,"$1")||void 0),""!==T||rs(d)||(T=x.style(d,m)),!Vt.pixelBoxStyles()&&Fs.test(T)&&Ql.test(m)&&(w=F.width,N=F.minWidth,_=F.maxWidth,F.minWidth=F.maxWidth=F.width=T,T=y.width,F.width=w,F.minWidth=N,F.maxWidth=_)),void 0!==T?T+"":T}function as(d,m){return{get:function(){if(!d())return(this.get=m).apply(this,arguments);delete this.get}}}!function(){function d(){if(K){F.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Qe.appendChild(F).appendChild(K);var tt=bt.getComputedStyle(K);y="1%"!==tt.top,H=12===m(tt.marginLeft),K.style.right="60%",_=36===m(tt.right),w=36===m(tt.width),K.style.position="absolute",N=12===m(K.offsetWidth/3),Qe.removeChild(F),K=null}}function m(tt){return Math.round(parseFloat(tt))}var y,w,N,_,T,H,F=Qt.createElement("div"),K=Qt.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",Vt.clearCloneStyle="content-box"===K.style.backgroundClip,x.extend(Vt,{boxSizingReliable:function(){return d(),w},pixelBoxStyles:function(){return d(),_},pixelPosition:function(){return d(),y},reliableMarginLeft:function(){return d(),H},scrollboxSize:function(){return d(),N},reliableTrDimensions:function(){var tt,st,X,ut;return null==T&&(tt=Qt.createElement("table"),st=Qt.createElement("tr"),X=Qt.createElement("div"),tt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",st.style.cssText="border:1px solid",st.style.height="1px",X.style.height="9px",X.style.display="block",Qe.appendChild(tt).appendChild(st).appendChild(X),ut=bt.getComputedStyle(st),T=parseInt(ut.height,10)+parseInt(ut.borderTopWidth,10)+parseInt(ut.borderBottomWidth,10)===st.offsetHeight,Qe.removeChild(tt)),T}}))}();var zs=["Webkit","Moz","ms"],Oa=Qt.createElement("div").style,Fr={};function wi(d){return x.cssProps[d]||Fr[d]||(d in Oa?d:Fr[d]=function(y){for(var w=y[0].toUpperCase()+y.slice(1),N=zs.length;N--;)if((y=zs[N]+w)in Oa)return y}(d)||d)}var su=/^(none|table(?!-c[ea]).+)/,Jl={position:"absolute",visibility:"hidden",display:"block"},Si={letterSpacing:"0",fontWeight:"400"};function ki(d,m,y){var w=Ye.exec(m);return w?Math.max(0,w[2]-(y||0))+(w[3]||"px"):m}function Da(d,m,y,w,N,_){var T="width"===m?1:0,H=0,F=0,K=0;if(y===(w?"border":"content"))return 0;for(;T<4;T+=2)"margin"===y&&(K+=x.css(d,y+Kn[T],!0,N)),w?("content"===y&&(F-=x.css(d,"padding"+Kn[T],!0,N)),"margin"!==y&&(F-=x.css(d,"border"+Kn[T]+"Width",!0,N))):(F+=x.css(d,"padding"+Kn[T],!0,N),"padding"!==y?F+=x.css(d,"border"+Kn[T]+"Width",!0,N):H+=x.css(d,"border"+Kn[T]+"Width",!0,N));return!w&&0<=_&&(F+=Math.max(0,Math.ceil(d["offset"+m[0].toUpperCase()+m.slice(1)]-_-F-H-.5))||0),F+K}function Ei(d,m,y){var w=Yr(d),N=(!Vt.boxSizingReliable()||y)&&"border-box"===x.css(d,"boxSizing",!1,w),_=N,T=Xn(d,m,w),H="offset"+m[0].toUpperCase()+m.slice(1);if(Fs.test(T)){if(!y)return T;T="auto"}return(!Vt.boxSizingReliable()&&N||!Vt.reliableTrDimensions()&&Nt(d,"tr")||"auto"===T||!parseFloat(T)&&"inline"===x.css(d,"display",!1,w))&&d.getClientRects().length&&(N="border-box"===x.css(d,"boxSizing",!1,w),(_=H in d)&&(T=d[H])),(T=parseFloat(T)||0)+Da(d,m,y||(N?"border":"content"),_,w,T)+"px"}function pr(d,m,y,w,N){return new pr.prototype.init(d,m,y,w,N)}x.extend({cssHooks:{opacity:{get:function(d,m){if(m){var y=Xn(d,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,m,y,w){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var N,_,T,H=rn(m),F=js.test(m),K=d.style;if(F||(m=wi(H)),T=x.cssHooks[m]||x.cssHooks[H],void 0===y)return T&&"get"in T&&void 0!==(N=T.get(d,!1,w))?N:K[m];"string"==(_=typeof y)&&(N=Ye.exec(y))&&N[1]&&(y=Vl(d,m,N),_="number"),null!=y&&y==y&&("number"!==_||F||(y+=N&&N[3]||(x.cssNumber[H]?"":"px")),Vt.clearCloneStyle||""!==y||0!==m.indexOf("background")||(K[m]="inherit"),T&&"set"in T&&void 0===(y=T.set(d,y,w))||(F?K.setProperty(m,y):K[m]=y))}},css:function(d,m,y,w){var N,_,T,H=rn(m);return js.test(m)||(m=wi(H)),(T=x.cssHooks[m]||x.cssHooks[H])&&"get"in T&&(N=T.get(d,!0,y)),void 0===N&&(N=Xn(d,m,w)),"normal"===N&&m in Si&&(N=Si[m]),""===y||y?(_=parseFloat(N),!0===y||isFinite(_)?_||0:N):N}}),x.each(["height","width"],function(d,m){x.cssHooks[m]={get:function(y,w,N){if(w)return!su.test(x.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?Ei(y,m,N):Yl(y,Jl,function(){return Ei(y,m,N)})},set:function(y,w,N){var _,T=Yr(y),H=!Vt.scrollboxSize()&&"absolute"===T.position,F=(H||N)&&"border-box"===x.css(y,"boxSizing",!1,T),K=N?Da(y,m,N,F,T):0;return F&&H&&(K-=Math.ceil(y["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(T[m])-Da(y,m,"border",!1,T)-.5)),K&&(_=Ye.exec(w))&&"px"!==(_[3]||"px")&&(y.style[m]=w,w=x.css(y,m)),ki(0,w,K)}}}),x.cssHooks.marginLeft=as(Vt.reliableMarginLeft,function(d,m){if(m)return(parseFloat(Xn(d,"marginLeft"))||d.getBoundingClientRect().left-Yl(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(d,m){x.cssHooks[d+m]={expand:function(y){for(var w=0,N={},_="string"==typeof y?y.split(" "):[y];w<4;w++)N[d+Kn[w]+m]=_[w]||_[w-2]||_[0];return N}},"margin"!==d&&(x.cssHooks[d+m].set=ki)}),x.fn.extend({css:function(d,m){return Lr(this,function(y,w,N){var _,T,H={},F=0;if(Array.isArray(w)){for(_=Yr(y),T=w.length;F<T;F++)H[w[F]]=x.css(y,w[F],!1,_);return H}return void 0!==N?x.style(y,w,N):x.css(y,w)},d,m,1<arguments.length)}}),((x.Tween=pr).prototype={constructor:pr,init:function(d,m,y,w,N,_){this.elem=d,this.prop=y,this.easing=N||x.easing._default,this.options=m,this.start=this.now=this.cur(),this.end=w,this.unit=_||(x.cssNumber[y]?"":"px")},cur:function(){var d=pr.propHooks[this.prop];return d&&d.get?d.get(this):pr.propHooks._default.get(this)},run:function(d){var m,y=pr.propHooks[this.prop];return this.pos=m=this.options.duration?x.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):d,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):pr.propHooks._default.set(this),this}}).init.prototype=pr.prototype,(pr.propHooks={_default:{get:function(d){var m;return 1!==d.elem.nodeType||null!=d.elem[d.prop]&&null==d.elem.style[d.prop]?d.elem[d.prop]:(m=x.css(d.elem,d.prop,""))&&"auto"!==m?m:0},set:function(d){x.fx.step[d.prop]?x.fx.step[d.prop](d):1!==d.elem.nodeType||!x.cssHooks[d.prop]&&null==d.elem.style[wi(d.prop)]?d.elem[d.prop]=d.now:x.style(d.elem,d.prop,d.now+d.unit)}}}).scrollTop=pr.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},x.easing={linear:function(d){return d},swing:function(d){return.5-Math.cos(d*Math.PI)/2},_default:"swing"},x.fx=pr.prototype.init,x.fx.step={};var Wo,Ba,is,Ni,Zl=/^(?:toggle|show|hide)$/,tc=/queueHooks$/;function Pa(){Ba&&(!1===Qt.hidden&&bt.requestAnimationFrame?bt.requestAnimationFrame(Pa):bt.setTimeout(Pa,x.fx.interval),x.fx.tick())}function _i(){return bt.setTimeout(function(){Wo=void 0}),Wo=Date.now()}function Hs(d,m){var y,w=0,N={height:d};for(m=m?1:0;w<4;w+=2-m)N["margin"+(y=Kn[w])]=N["padding"+y]=d;return m&&(N.opacity=N.width=d),N}function Ai(d,m,y){for(var w,N=(gr.tweeners[m]||[]).concat(gr.tweeners["*"]),_=0,T=N.length;_<T;_++)if(w=N[_].call(y,m,d))return w}function gr(d,m,y){var w,N,_=0,T=gr.prefilters.length,H=x.Deferred().always(function(){delete F.elem}),F=function(){if(N)return!1;for(var st=Wo||_i(),X=Math.max(0,K.startTime+K.duration-st),ut=1-(X/K.duration||0),O=0,ce=K.tweens.length;O<ce;O++)K.tweens[O].run(ut);return H.notifyWith(d,[K,ut,X]),ut<1&&ce?X:(ce||H.notifyWith(d,[K,1,0]),H.resolveWith(d,[K]),!1)},K=H.promise({elem:d,props:x.extend({},m),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},y),originalProperties:m,originalOptions:y,startTime:Wo||_i(),duration:y.duration,tweens:[],createTween:function(st,X){var ut=x.Tween(d,K.opts,st,X,K.opts.specialEasing[st]||K.opts.easing);return K.tweens.push(ut),ut},stop:function(st){var X=0,ut=st?K.tweens.length:0;if(N)return this;for(N=!0;X<ut;X++)K.tweens[X].run(1);return st?(H.notifyWith(d,[K,1,0]),H.resolveWith(d,[K,st])):H.rejectWith(d,[K,st]),this}}),tt=K.props;for(function(st,X){var ut,O,ce,le,Ne;for(ut in st)if(ce=X[O=rn(ut)],le=st[ut],Array.isArray(le)&&(ce=le[1],le=st[ut]=le[0]),ut!==O&&(st[O]=le,delete st[ut]),(Ne=x.cssHooks[O])&&"expand"in Ne)for(ut in le=Ne.expand(le),delete st[O],le)ut in st||(st[ut]=le[ut],X[ut]=ce);else X[O]=ce}(tt,K.opts.specialEasing);_<T;_++)if(w=gr.prefilters[_].call(K,d,tt,K.opts))return Pt(w.stop)&&(x._queueHooks(K.elem,K.opts.queue).stop=w.stop.bind(w)),w;return x.map(tt,Ai,K),Pt(K.opts.start)&&K.opts.start.call(d,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),x.fx.timer(x.extend(F,{elem:d,anim:K,queue:K.opts.queue})),K}x.Animation=x.extend(gr,{tweeners:{"*":[function(d,m){var y=this.createTween(d,m);return Vl(y.elem,d,Ye.exec(m),y),y}]},tweener:function(d,m){Pt(d)?(m=d,d=["*"]):d=d.match(re);for(var y,w=0,N=d.length;w<N;w++)(gr.tweeners[y=d[w]]=gr.tweeners[y]||[]).unshift(m)},prefilters:[function(d,m,y){var w,N,_,T,H,F,K,tt,st="width"in m||"height"in m,X=this,ut={},O=d.style,ce=d.nodeType&&Ho(d),le=Gt.get(d,"fxshow");for(w in y.queue||(null==(T=x._queueHooks(d,"fx")).unqueued&&(T.unqueued=0,H=T.empty.fire,T.empty.fire=function(){T.unqueued||H()}),T.unqueued++,X.always(function(){X.always(function(){T.unqueued--,x.queue(d,"fx").length||T.empty.fire()})})),m)if(Zl.test(N=m[w])){if(delete m[w],_=_||"toggle"===N,N===(ce?"hide":"show")){if("show"!==N||!le||void 0===le[w])continue;ce=!0}ut[w]=le&&le[w]||x.style(d,w)}if((F=!x.isEmptyObject(m))||!x.isEmptyObject(ut))for(w in st&&1===d.nodeType&&(y.overflow=[O.overflow,O.overflowX,O.overflowY],null==(K=le&&le.display)&&(K=Gt.get(d,"display")),"none"===(tt=x.css(d,"display"))&&(K?tt=K:(Uo([d],!0),K=d.style.display||K,tt=x.css(d,"display"),Uo([d]))),("inline"===tt||"inline-block"===tt&&null!=K)&&"none"===x.css(d,"float")&&(F||(X.done(function(){O.display=K}),null==K&&(K="none"===(tt=O.display)?"":tt)),O.display="inline-block")),y.overflow&&(O.overflow="hidden",X.always(function(){O.overflow=y.overflow[0],O.overflowX=y.overflow[1],O.overflowY=y.overflow[2]})),F=!1,ut)F||(le?"hidden"in le&&(ce=le.hidden):le=Gt.access(d,"fxshow",{display:K}),_&&(le.hidden=!ce),ce&&Uo([d],!0),X.done(function(){for(w in ce||Uo([d]),Gt.remove(d,"fxshow"),ut)x.style(d,w,ut[w])})),F=Ai(ce?le[w]:0,w,X),w in le||(le[w]=F.start,ce&&(F.end=F.start,F.start=0))}],prefilter:function(d,m){m?gr.prefilters.unshift(d):gr.prefilters.push(d)}}),x.speed=function(d,m,y){var w=d&&"object"==typeof d?x.extend({},d):{complete:y||!y&&m||Pt(d)&&d,duration:d,easing:y&&m||m&&!Pt(m)&&m};return x.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in x.fx.speeds?x.fx.speeds[w.duration]:x.fx.speeds._default),null!=w.queue&&!0!==w.queue||(w.queue="fx"),w.old=w.complete,w.complete=function(){Pt(w.old)&&w.old.call(this),w.queue&&x.dequeue(this,w.queue)},w},x.fn.extend({fadeTo:function(d,m,y,w){return this.filter(Ho).css("opacity",0).show().end().animate({opacity:m},d,y,w)},animate:function(d,m,y,w){var N=x.isEmptyObject(d),_=x.speed(m,y,w),T=function(){var H=gr(this,x.extend({},d),_);(N||Gt.get(this,"finish"))&&H.stop(!0)};return T.finish=T,N||!1===_.queue?this.each(T):this.queue(_.queue,T)},stop:function(d,m,y){var w=function(N){var _=N.stop;delete N.stop,_(y)};return"string"!=typeof d&&(y=m,m=d,d=void 0),m&&this.queue(d||"fx",[]),this.each(function(){var N=!0,_=null!=d&&d+"queueHooks",T=x.timers,H=Gt.get(this);if(_)H[_]&&H[_].stop&&w(H[_]);else for(_ in H)H[_]&&H[_].stop&&tc.test(_)&&w(H[_]);for(_=T.length;_--;)T[_].elem!==this||null!=d&&T[_].queue!==d||(T[_].anim.stop(y),N=!1,T.splice(_,1));!N&&y||x.dequeue(this,d)})},finish:function(d){return!1!==d&&(d=d||"fx"),this.each(function(){var m,y=Gt.get(this),w=y[d+"queue"],N=y[d+"queueHooks"],_=x.timers,T=w?w.length:0;for(y.finish=!0,x.queue(this,d,[]),N&&N.stop&&N.stop.call(this,!0),m=_.length;m--;)_[m].elem===this&&_[m].queue===d&&(_[m].anim.stop(!0),_.splice(m,1));for(m=0;m<T;m++)w[m]&&w[m].finish&&w[m].finish.call(this);delete y.finish})}}),x.each(["toggle","show","hide"],function(d,m){var y=x.fn[m];x.fn[m]=function(w,N,_){return null==w||"boolean"==typeof w?y.apply(this,arguments):this.animate(Hs(m,!0),w,N,_)}}),x.each({slideDown:Hs("show"),slideUp:Hs("hide"),slideToggle:Hs("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,m){x.fn[d]=function(y,w,N){return this.animate(m,y,w,N)}}),x.timers=[],x.fx.tick=function(){var d,m=0,y=x.timers;for(Wo=Date.now();m<y.length;m++)(d=y[m])()||y[m]!==d||y.splice(m--,1);y.length||x.fx.stop(),Wo=void 0},x.fx.timer=function(d){x.timers.push(d),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Ba||(Ba=!0,Pa())},x.fx.stop=function(){Ba=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(d,m){return d=x.fx&&x.fx.speeds[d]||d,this.queue(m=m||"fx",function(y,w){var N=bt.setTimeout(y,d);w.stop=function(){bt.clearTimeout(N)}})},is=Qt.createElement("input"),Ni=Qt.createElement("select").appendChild(Qt.createElement("option")),is.type="checkbox",Vt.checkOn=""!==is.value,Vt.optSelected=Ni.selected,(is=Qt.createElement("input")).value="t",is.type="radio",Vt.radioValue="t"===is.value;var ec,Us=x.expr.attrHandle;x.fn.extend({attr:function(d,m){return Lr(this,x.attr,d,m,1<arguments.length)},removeAttr:function(d){return this.each(function(){x.removeAttr(this,d)})}}),x.extend({attr:function(d,m,y){var w,N,_=d.nodeType;if(3!==_&&8!==_&&2!==_)return typeof d.getAttribute>"u"?x.prop(d,m,y):(1===_&&x.isXMLDoc(d)||(N=x.attrHooks[m.toLowerCase()]||(x.expr.match.bool.test(m)?ec:void 0)),void 0!==y?null===y?void x.removeAttr(d,m):N&&"set"in N&&void 0!==(w=N.set(d,y,m))?w:(d.setAttribute(m,y+""),y):N&&"get"in N&&null!==(w=N.get(d,m))?w:null==(w=x.find.attr(d,m))?void 0:w)},attrHooks:{type:{set:function(d,m){if(!Vt.radioValue&&"radio"===m&&Nt(d,"input")){var y=d.value;return d.setAttribute("type",m),y&&(d.value=y),m}}}},removeAttr:function(d,m){var y,w=0,N=m&&m.match(re);if(N&&1===d.nodeType)for(;y=N[w++];)d.removeAttribute(y)}}),ec={set:function(d,m,y){return!1===m?x.removeAttr(d,y):d.setAttribute(y,y),y}},x.each(x.expr.match.bool.source.match(/\w+/g),function(d,m){var y=Us[m]||x.find.attr;Us[m]=function(w,N,_){var T,H,F=N.toLowerCase();return _||(H=Us[F],Us[F]=T,T=null!=y(w,N,_)?F:null,Us[F]=H),T}});var au=/^(?:input|select|textarea|button)$/i,iu=/^(?:a|area)$/i;function An(d){return(d.match(re)||[]).join(" ")}function Vo(d){return d.getAttribute&&d.getAttribute("class")||""}function qs(d){return Array.isArray(d)?d:"string"==typeof d&&d.match(re)||[]}x.fn.extend({prop:function(d,m){return Lr(this,x.prop,d,m,1<arguments.length)},removeProp:function(d){return this.each(function(){delete this[x.propFix[d]||d]})}}),x.extend({prop:function(d,m,y){var w,N,_=d.nodeType;if(3!==_&&8!==_&&2!==_)return 1===_&&x.isXMLDoc(d)||(N=x.propHooks[m=x.propFix[m]||m]),void 0!==y?N&&"set"in N&&void 0!==(w=N.set(d,y,m))?w:d[m]=y:N&&"get"in N&&null!==(w=N.get(d,m))?w:d[m]},propHooks:{tabIndex:{get:function(d){var m=x.find.attr(d,"tabindex");return m?parseInt(m,10):au.test(d.nodeName)||iu.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Vt.optSelected||(x.propHooks.selected={get:function(d){return null},set:function(d){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(d){var m,y,w,N,_,T;return Pt(d)?this.each(function(H){x(this).addClass(d.call(this,H,Vo(this)))}):(m=qs(d)).length?this.each(function(){if(w=Vo(this),y=1===this.nodeType&&" "+An(w)+" "){for(_=0;_<m.length;_++)y.indexOf(" "+(N=m[_])+" ")<0&&(y+=N+" ");T=An(y),w!==T&&this.setAttribute("class",T)}}):this},removeClass:function(d){var m,y,w,N,_,T;return Pt(d)?this.each(function(H){x(this).removeClass(d.call(this,H,Vo(this)))}):arguments.length?(m=qs(d)).length?this.each(function(){if(w=Vo(this),y=1===this.nodeType&&" "+An(w)+" "){for(_=0;_<m.length;_++)for(N=m[_];-1<y.indexOf(" "+N+" ");)y=y.replace(" "+N+" "," ");T=An(y),w!==T&&this.setAttribute("class",T)}}):this:this.attr("class","")},toggleClass:function(d,m){var y,w,N,_,T=typeof d,H="string"===T||Array.isArray(d);return Pt(d)?this.each(function(F){x(this).toggleClass(d.call(this,F,Vo(this),m),m)}):"boolean"==typeof m&&H?m?this.addClass(d):this.removeClass(d):(y=qs(d),this.each(function(){if(H)for(_=x(this),N=0;N<y.length;N++)_.hasClass(w=y[N])?_.removeClass(w):_.addClass(w);else void 0!==d&&"boolean"!==T||((w=Vo(this))&&Gt.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||!1===d?"":Gt.get(this,"__className__")||""))}))},hasClass:function(d){var m,y,w=0;for(m=" "+d+" ";y=this[w++];)if(1===y.nodeType&&-1<(" "+An(Vo(y))+" ").indexOf(m))return!0;return!1}});var jr=/\r/g;x.fn.extend({val:function(d){var m,y,w,N=this[0];return arguments.length?(w=Pt(d),this.each(function(_){var T;1===this.nodeType&&(null==(T=w?d.call(this,_,x(this).val()):d)?T="":"number"==typeof T?T+="":Array.isArray(T)&&(T=x.map(T,function(H){return null==H?"":H+""})),(m=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in m&&void 0!==m.set(this,T,"value")||(this.value=T))})):N?(m=x.valHooks[N.type]||x.valHooks[N.nodeName.toLowerCase()])&&"get"in m&&void 0!==(y=m.get(N,"value"))?y:"string"==typeof(y=N.value)?y.replace(jr,""):y??"":void 0}}),x.extend({valHooks:{option:{get:function(d){return x.find.attr(d,"value")??An(x.text(d))}},select:{get:function(d){var m,y,w,N=d.options,_=d.selectedIndex,T="select-one"===d.type,H=T?null:[],F=T?_+1:N.length;for(w=_<0?F:T?_:0;w<F;w++)if(((y=N[w]).selected||w===_)&&!y.disabled&&(!y.parentNode.disabled||!Nt(y.parentNode,"optgroup"))){if(m=x(y).val(),T)return m;H.push(m)}return H},set:function(d,m){for(var y,w,N=d.options,_=x.makeArray(m),T=N.length;T--;)((w=N[T]).selected=-1<x.inArray(x.valHooks.option.get(w),_))&&(y=!0);return y||(d.selectedIndex=-1),_}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(d,m){if(Array.isArray(m))return d.checked=-1<x.inArray(x(d).val(),m)}},Vt.checkOn||(x.valHooks[this].get=function(d){return null===d.getAttribute("value")?"on":d.value})});var Gn=bt.location,Co={guid:Date.now()},Ri=/\?/;x.parseXML=function(d){var m,y;if(!d||"string"!=typeof d)return null;try{m=(new bt.DOMParser).parseFromString(d,"text/xml")}catch{}return y=m&&m.getElementsByTagName("parsererror")[0],m&&!y||x.error("Invalid XML: "+(y?x.map(y.childNodes,function(w){return w.textContent}).join("\n"):d)),m};var fe=/^(?:focusinfocus|focusoutblur)$/,nc=function(d){d.stopPropagation()};x.extend(x.event,{trigger:function(d,m,y,w){var N,_,T,H,F,K,tt,st,X=[y||Qt],ut=En.call(d,"type")?d.type:d,O=En.call(d,"namespace")?d.namespace.split("."):[];if(_=st=T=y=y||Qt,3!==y.nodeType&&8!==y.nodeType&&!fe.test(ut+x.event.triggered)&&(-1<ut.indexOf(".")&&(ut=(O=ut.split(".")).shift(),O.sort()),F=ut.indexOf(":")<0&&"on"+ut,(d=d[x.expando]?d:new x.Event(ut,"object"==typeof d&&d)).isTrigger=w?2:3,d.namespace=O.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+O.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=y),m=null==m?[d]:x.makeArray(m,[d]),tt=x.event.special[ut]||{},w||!tt.trigger||!1!==tt.trigger.apply(y,m))){if(!w&&!tt.noBubble&&!ct(y)){for(fe.test((H=tt.delegateType||ut)+ut)||(_=_.parentNode);_;_=_.parentNode)X.push(_),T=_;T===(y.ownerDocument||Qt)&&X.push(T.defaultView||T.parentWindow||bt)}for(N=0;(_=X[N++])&&!d.isPropagationStopped();)st=_,d.type=1<N?H:tt.bindType||ut,(K=(Gt.get(_,"events")||Object.create(null))[d.type]&&Gt.get(_,"handle"))&&K.apply(_,m),(K=F&&_[F])&&K.apply&&mr(_)&&(d.result=K.apply(_,m),!1===d.result&&d.preventDefault());return d.type=ut,w||d.isDefaultPrevented()||tt._default&&!1!==tt._default.apply(X.pop(),m)||!mr(y)||F&&Pt(y[ut])&&!ct(y)&&((T=y[F])&&(y[F]=null),x.event.triggered=ut,d.isPropagationStopped()&&st.addEventListener(ut,nc),y[ut](),d.isPropagationStopped()&&st.removeEventListener(ut,nc),x.event.triggered=void 0,T&&(y[F]=T)),d.result}},simulate:function(d,m,y){var w=x.extend(new x.Event,y,{type:d,isSimulated:!0});x.event.trigger(w,null,m)}}),x.fn.extend({trigger:function(d,m){return this.each(function(){x.event.trigger(d,m,this)})},triggerHandler:function(d,m){var y=this[0];if(y)return x.event.trigger(d,m,y,!0)}});var rc=/\[\]$/,Ti=/\r?\n/g,dt=/^(?:submit|button|image|reset|file)$/i,ls=/^(?:input|select|textarea|keygen)/i;function pn(d,m,y,w){var N;if(Array.isArray(m))x.each(m,function(_,T){y||rc.test(d)?w(d,T):pn(d+"["+("object"==typeof T&&null!=T?_:"")+"]",T,y,w)});else if(y||"object"!==ye(m))w(d,m);else for(N in m)pn(d+"["+N+"]",m[N],y,w)}x.param=function(d,m){var y,w=[],N=function(_,T){var H=Pt(T)?T():T;w[w.length]=encodeURIComponent(_)+"="+encodeURIComponent(H??"")};if(null==d)return"";if(Array.isArray(d)||d.jquery&&!x.isPlainObject(d))x.each(d,function(){N(this.name,this.value)});else for(y in d)pn(y,d[y],m,N);return w.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=x.prop(this,"elements");return d?x.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!x(this).is(":disabled")&&ls.test(this.nodeName)&&!dt.test(d)&&(this.checked||!qo.test(d))}).map(function(d,m){var y=x(this).val();return null==y?null:Array.isArray(y)?x.map(y,function(w){return{name:m.name,value:w.replace(Ti,"\r\n")}}):{name:m.name,value:y.replace(Ti,"\r\n")}}).get()}});var $s=/%20/g,lu=/#.*$/,oc=/([?&])_=[^&]*/,cu=/^(.*?):[ \t]*([^\r\n]*)$/gm,du=/^(?:GET|HEAD)$/,Ee=/^\/\//,Oi={},cs={},La="*/".concat("*"),Cn=Qt.createElement("a");function Yn(d){return function(m,y){"string"!=typeof m&&(y=m,m="*");var w,N=0,_=m.toLowerCase().match(re)||[];if(Pt(y))for(;w=_[N++];)"+"===w[0]?(w=w.slice(1)||"*",(d[w]=d[w]||[]).unshift(y)):(d[w]=d[w]||[]).push(y)}}function sc(d,m,y,w){var N={},_=d===cs;function T(H){var F;return N[H]=!0,x.each(d[H]||[],function(K,tt){var st=tt(m,y,w);return"string"!=typeof st||_||N[st]?_?!(F=st):void 0:(m.dataTypes.unshift(st),T(st),!1)}),F}return T(m.dataTypes[0])||!N["*"]&&T("*")}function Di(d,m){var y,w,N=x.ajaxSettings.flatOptions||{};for(y in m)void 0!==m[y]&&((N[y]?d:w||(w={}))[y]=m[y]);return w&&x.extend(!0,d,w),d}Cn.href=Gn.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Gn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Gn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":La,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,m){return m?Di(Di(d,x.ajaxSettings),m):Di(x.ajaxSettings,d)},ajaxPrefilter:Yn(Oi),ajaxTransport:Yn(cs),ajax:function(d,m){"object"==typeof d&&(m=d,d=void 0);var y,w,N,_,T,H,F,K,tt,st,X=x.ajaxSetup({},m=m||{}),ut=X.context||X,O=X.context&&(ut.nodeType||ut.jquery)?x(ut):x.event,ce=x.Deferred(),le=x.Callbacks("once memory"),Ne=X.statusCode||{},sn={},de={},gn="canceled",he={readyState:0,getResponseHeader:function(ve){var xe;if(F){if(!_)for(_={};xe=cu.exec(N);)_[xe[1].toLowerCase()+" "]=(_[xe[1].toLowerCase()+" "]||[]).concat(xe[2]);xe=_[ve.toLowerCase()+" "]}return null==xe?null:xe.join(", ")},getAllResponseHeaders:function(){return F?N:null},setRequestHeader:function(ve,xe){return null==F&&(ve=de[ve.toLowerCase()]=de[ve.toLowerCase()]||ve,sn[ve]=xe),this},overrideMimeType:function(ve){return null==F&&(X.mimeType=ve),this},statusCode:function(ve){var xe;if(ve)if(F)he.always(ve[he.status]);else for(xe in ve)Ne[xe]=[Ne[xe],ve[xe]];return this},abort:function(ve){var xe=ve||gn;return y&&y.abort(xe),zn(0,xe),this}};if(ce.promise(he),X.url=((d||X.url||Gn.href)+"").replace(Ee,Gn.protocol+"//"),X.type=m.method||m.type||X.method||X.type,X.dataTypes=(X.dataType||"*").toLowerCase().match(re)||[""],null==X.crossDomain){H=Qt.createElement("a");try{H.href=X.url,H.href=H.href,X.crossDomain=Cn.protocol+"//"+Cn.host!=H.protocol+"//"+H.host}catch{X.crossDomain=!0}}if(X.data&&X.processData&&"string"!=typeof X.data&&(X.data=x.param(X.data,X.traditional)),sc(Oi,X,m,he),F)return he;for(tt in(K=x.event&&X.global)&&0==x.active++&&x.event.trigger("ajaxStart"),X.type=X.type.toUpperCase(),X.hasContent=!du.test(X.type),w=X.url.replace(lu,""),X.hasContent?X.data&&X.processData&&0===(X.contentType||"").indexOf("application/x-www-form-urlencoded")&&(X.data=X.data.replace($s,"+")):(st=X.url.slice(w.length),X.data&&(X.processData||"string"==typeof X.data)&&(w+=(Ri.test(w)?"&":"?")+X.data,delete X.data),!1===X.cache&&(w=w.replace(oc,"$1"),st=(Ri.test(w)?"&":"?")+"_="+Co.guid+++st),X.url=w+st),X.ifModified&&(x.lastModified[w]&&he.setRequestHeader("If-Modified-Since",x.lastModified[w]),x.etag[w]&&he.setRequestHeader("If-None-Match",x.etag[w])),(X.data&&X.hasContent&&!1!==X.contentType||m.contentType)&&he.setRequestHeader("Content-Type",X.contentType),he.setRequestHeader("Accept",X.dataTypes[0]&&X.accepts[X.dataTypes[0]]?X.accepts[X.dataTypes[0]]+("*"!==X.dataTypes[0]?", "+La+"; q=0.01":""):X.accepts["*"]),X.headers)he.setRequestHeader(tt,X.headers[tt]);if(X.beforeSend&&(!1===X.beforeSend.call(ut,he,X)||F))return he.abort();if(gn="abort",le.add(X.complete),he.done(X.success),he.fail(X.error),y=sc(cs,X,m,he)){if(he.readyState=1,K&&O.trigger("ajaxSend",[he,X]),F)return he;X.async&&0<X.timeout&&(T=bt.setTimeout(function(){he.abort("timeout")},X.timeout));try{F=!1,y.send(sn,zn)}catch(ve){if(F)throw ve;zn(-1,ve)}}else zn(-1,"No Transport");function zn(ve,xe,Ko,Ia){var Rn,Zr,zr,to,Me,xn=xe;F||(F=!0,T&&bt.clearTimeout(T),y=void 0,N=Ia||"",he.readyState=0<ve?4:0,Rn=200<=ve&&ve<300||304===ve,Ko&&(to=function(Ze,$e,wn){for(var Hr,Tn,oe,Te,He=Ze.contents,Le=Ze.dataTypes;"*"===Le[0];)Le.shift(),void 0===Hr&&(Hr=Ze.mimeType||$e.getResponseHeader("Content-Type"));if(Hr)for(Tn in He)if(He[Tn]&&He[Tn].test(Hr)){Le.unshift(Tn);break}if(Le[0]in wn)oe=Le[0];else{for(Tn in wn){if(!Le[0]||Ze.converters[Tn+" "+Le[0]]){oe=Tn;break}Te||(Te=Tn)}oe=oe||Te}if(oe)return oe!==Le[0]&&Le.unshift(oe),wn[oe]}(X,he,Ko)),!Rn&&-1<x.inArray("script",X.dataTypes)&&x.inArray("json",X.dataTypes)<0&&(X.converters["text script"]=function(){}),to=function(Ze,$e,wn,Hr){var Tn,oe,Te,He,Le,wr={},us=Ze.dataTypes.slice();if(us[1])for(Te in Ze.converters)wr[Te.toLowerCase()]=Ze.converters[Te];for(oe=us.shift();oe;)if(Ze.responseFields[oe]&&(wn[Ze.responseFields[oe]]=$e),!Le&&Hr&&Ze.dataFilter&&($e=Ze.dataFilter($e,Ze.dataType)),Le=oe,oe=us.shift())if("*"===oe)oe=Le;else if("*"!==Le&&Le!==oe){if(!(Te=wr[Le+" "+oe]||wr["* "+oe]))for(Tn in wr)if((He=Tn.split(" "))[1]===oe&&(Te=wr[Le+" "+He[0]]||wr["* "+He[0]])){!0===Te?Te=wr[Tn]:!0!==wr[Tn]&&(oe=He[0],us.unshift(He[1]));break}if(!0!==Te)if(Te&&Ze.throws)$e=Te($e);else try{$e=Te($e)}catch(eo){return{state:"parsererror",error:Te?eo:"No conversion from "+Le+" to "+oe}}}return{state:"success",data:$e}}(X,to,he,Rn),Rn?(X.ifModified&&((Me=he.getResponseHeader("Last-Modified"))&&(x.lastModified[w]=Me),(Me=he.getResponseHeader("etag"))&&(x.etag[w]=Me)),204===ve||"HEAD"===X.type?xn="nocontent":304===ve?xn="notmodified":(xn=to.state,Zr=to.data,Rn=!(zr=to.error))):(zr=xn,!ve&&xn||(xn="error",ve<0&&(ve=0))),he.status=ve,he.statusText=(xe||xn)+"",Rn?ce.resolveWith(ut,[Zr,xn,he]):ce.rejectWith(ut,[he,xn,zr]),he.statusCode(Ne),Ne=void 0,K&&O.trigger(Rn?"ajaxSuccess":"ajaxError",[he,X,Rn?Zr:zr]),le.fireWith(ut,[he,xn]),K&&(O.trigger("ajaxComplete",[he,X]),--x.active||x.event.trigger("ajaxStop")))}return he},getJSON:function(d,m,y){return x.get(d,m,y,"json")},getScript:function(d,m){return x.get(d,void 0,m,"script")}}),x.each(["get","post"],function(d,m){x[m]=function(y,w,N,_){return Pt(w)&&(_=_||N,N=w,w=void 0),x.ajax(x.extend({url:y,type:m,dataType:_,data:w,success:N},x.isPlainObject(y)&&y))}}),x.ajaxPrefilter(function(d){var m;for(m in d.headers)"content-type"===m.toLowerCase()&&(d.contentType=d.headers[m]||"")}),x._evalUrl=function(d,m,y){return x.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){x.globalEval(w,m,y)}})},x.fn.extend({wrapAll:function(d){var m;return this[0]&&(Pt(d)&&(d=d.call(this[0])),m=x(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(d){return Pt(d)?this.each(function(m){x(this).wrapInner(d.call(this,m))}):this.each(function(){var m=x(this),y=m.contents();y.length?y.wrapAll(d):m.append(d)})},wrap:function(d){var m=Pt(d);return this.each(function(y){x(this).wrapAll(m?d.call(this,y):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(d){return!x.expr.pseudos.visible(d)},x.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new bt.XMLHttpRequest}catch{}};var Bi={0:200,1223:204},ds=x.ajaxSettings.xhr();Vt.cors=!!ds&&"withCredentials"in ds,Vt.ajax=ds=!!ds,x.ajaxTransport(function(d){var m,y;if(Vt.cors||ds&&!d.crossDomain)return{send:function(w,N){var _,T=d.xhr();if(T.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(_ in d.xhrFields)T[_]=d.xhrFields[_];for(_ in d.mimeType&&T.overrideMimeType&&T.overrideMimeType(d.mimeType),d.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)T.setRequestHeader(_,w[_]);m=function(H){return function(){m&&(m=y=T.onload=T.onerror=T.onabort=T.ontimeout=T.onreadystatechange=null,"abort"===H?T.abort():"error"===H?"number"!=typeof T.status?N(0,"error"):N(T.status,T.statusText):N(Bi[T.status]||T.status,T.statusText,"text"!==(T.responseType||"text")||"string"!=typeof T.responseText?{binary:T.response}:{text:T.responseText},T.getAllResponseHeaders()))}},T.onload=m(),y=T.onerror=T.ontimeout=m("error"),void 0!==T.onabort?T.onabort=y:T.onreadystatechange=function(){4===T.readyState&&bt.setTimeout(function(){m&&y()})},m=m("abort");try{T.send(d.hasContent&&d.data||null)}catch(H){if(m)throw H}},abort:function(){m&&m()}}}),x.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return x.globalEval(d),d}}}),x.ajaxPrefilter("script",function(d){void 0===d.cache&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),x.ajaxTransport("script",function(d){var m,y;if(d.crossDomain||d.scriptAttrs)return{send:function(w,N){m=x("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",y=function(_){m.remove(),y=null,_&&N("error"===_.type?404:200,_.type)}),Qt.head.appendChild(m[0])},abort:function(){y&&y()}}});var Xe,Qr=[],jn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=Qr.pop()||x.expando+"_"+Co.guid++;return this[d]=!0,d}}),x.ajaxPrefilter("json jsonp",function(d,m,y){var w,N,_,T=!1!==d.jsonp&&(jn.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&jn.test(d.data)&&"data");if(T||"jsonp"===d.dataTypes[0])return w=d.jsonpCallback=Pt(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,T?d[T]=d[T].replace(jn,"$1"+w):!1!==d.jsonp&&(d.url+=(Ri.test(d.url)?"&":"?")+d.jsonp+"="+w),d.converters["script json"]=function(){return _||x.error(w+" was not called"),_[0]},d.dataTypes[0]="json",N=bt[w],bt[w]=function(){_=arguments},y.always(function(){void 0===N?x(bt).removeProp(w):bt[w]=N,d[w]&&(d.jsonpCallback=m.jsonpCallback,Qr.push(w)),_&&Pt(N)&&N(_[0]),_=N=void 0}),"script"}),Vt.createHTMLDocument=((Xe=Qt.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xe.childNodes.length),x.parseHTML=function(d,m,y){return"string"!=typeof d?[]:("boolean"==typeof m&&(y=m,m=!1),m||(Vt.createHTMLDocument?((w=(m=Qt.implementation.createHTMLDocument("")).createElement("base")).href=Qt.location.href,m.head.appendChild(w)):m=Qt),_=!y&&[],(N=E.exec(d))?[m.createElement(N[1])]:(N=Is([d],m,_),_&&_.length&&x(_).remove(),x.merge([],N.childNodes)));var w,N,_},x.fn.load=function(d,m,y){var w,N,_,T=this,H=d.indexOf(" ");return-1<H&&(w=An(d.slice(H)),d=d.slice(0,H)),Pt(m)?(y=m,m=void 0):m&&"object"==typeof m&&(N="POST"),0<T.length&&x.ajax({url:d,type:N||"GET",dataType:"html",data:m}).done(function(F){_=arguments,T.html(w?x("<div>").append(x.parseHTML(F)).find(w):F)}).always(y&&function(F,K){T.each(function(){y.apply(this,_||[F.responseText,K,F])})}),this},x.expr.pseudos.animated=function(d){return x.grep(x.timers,function(m){return d===m.elem}).length},x.offset={setOffset:function(d,m,y){var w,N,_,T,H,F,K=x.css(d,"position"),tt=x(d),st={};"static"===K&&(d.style.position="relative"),H=tt.offset(),_=x.css(d,"top"),F=x.css(d,"left"),("absolute"===K||"fixed"===K)&&-1<(_+F).indexOf("auto")?(T=(w=tt.position()).top,N=w.left):(T=parseFloat(_)||0,N=parseFloat(F)||0),Pt(m)&&(m=m.call(d,y,x.extend({},H))),null!=m.top&&(st.top=m.top-H.top+T),null!=m.left&&(st.left=m.left-H.left+N),"using"in m?m.using.call(d,st):tt.css(st)}},x.fn.extend({offset:function(d){if(arguments.length)return void 0===d?this:this.each(function(N){x.offset.setOffset(this,d,N)});var m,y,w=this[0];return w?w.getClientRects().length?{top:(m=w.getBoundingClientRect()).top+(y=w.ownerDocument.defaultView).pageYOffset,left:m.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var d,m,y,w=this[0],N={top:0,left:0};if("fixed"===x.css(w,"position"))m=w.getBoundingClientRect();else{for(m=this.offset(),y=w.ownerDocument,d=w.offsetParent||y.documentElement;d&&(d===y.body||d===y.documentElement)&&"static"===x.css(d,"position");)d=d.parentNode;d&&d!==w&&1===d.nodeType&&((N=x(d).offset()).top+=x.css(d,"borderTopWidth",!0),N.left+=x.css(d,"borderLeftWidth",!0))}return{top:m.top-N.top-x.css(w,"marginTop",!0),left:m.left-N.left-x.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&"static"===x.css(d,"position");)d=d.offsetParent;return d||Qe})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,m){var y="pageYOffset"===m;x.fn[d]=function(w){return Lr(this,function(N,_,T){var H;if(ct(N)?H=N:9===N.nodeType&&(H=N.defaultView),void 0===T)return H?H[m]:N[_];H?H.scrollTo(y?H.pageXOffset:T,y?T:H.pageYOffset):N[_]=T},d,w,arguments.length)}}),x.each(["top","left"],function(d,m){x.cssHooks[m]=as(Vt.pixelPosition,function(y,w){if(w)return w=Xn(y,m),Fs.test(w)?x(y).position()[m]+"px":w})}),x.each({Height:"height",Width:"width"},function(d,m){x.each({padding:"inner"+d,content:m,"":"outer"+d},function(y,w){x.fn[w]=function(N,_){var T=arguments.length&&(y||"boolean"!=typeof N),H=y||(!0===N||!0===_?"margin":"border");return Lr(this,function(F,K,tt){var st;return ct(F)?0===w.indexOf("outer")?F["inner"+d]:F.document.documentElement["client"+d]:9===F.nodeType?(st=F.documentElement,Math.max(F.body["scroll"+d],st["scroll"+d],F.body["offset"+d],st["offset"+d],st["client"+d])):void 0===tt?x.css(F,K,H):x.style(F,K,tt,H)},m,T?N:void 0,T)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,m){x.fn[m]=function(y){return this.on(m,y)}}),x.fn.extend({bind:function(d,m,y){return this.on(d,null,m,y)},unbind:function(d,m){return this.off(d,null,m)},delegate:function(d,m,y,w){return this.on(m,d,y,w)},undelegate:function(d,m,y){return 1===arguments.length?this.off(d,"**"):this.off(m,d||"**",y)},hover:function(d,m){return this.mouseenter(d).mouseleave(m||d)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,m){x.fn[m]=function(y,w){return 0<arguments.length?this.on(m,null,y,w):this.trigger(m)}});var Jr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(d,m){var y,w,N;if("string"==typeof m&&(y=d[m],m=d,d=y),Pt(d))return w=ne.call(arguments,2),(N=function(){return d.apply(m||this,w.concat(ne.call(arguments)))}).guid=d.guid=d.guid||x.guid++,N},x.holdReady=function(d){d?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=Nt,x.isFunction=Pt,x.isWindow=ct,x.camelCase=rn,x.type=ye,x.now=Date.now,x.isNumeric=function(d){var m=x.type(d);return("number"===m||"string"===m)&&!isNaN(d-parseFloat(d))},x.trim=function(d){return null==d?"":(d+"").replace(Jr,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var Ma=bt.jQuery,on=bt.$;return x.noConflict=function(d){return bt.$===x&&(bt.$=on),d&&bt.jQuery===x&&(bt.jQuery=Ma),x},typeof qt>"u"&&(bt.jQuery=bt.$=x),x}),function(bt){bt.imageArea=function(qt,Wt){var kn,Ke,Wn,En,Ht=qt.options,ne=qt.$image,je=qt.$trigger,yr={},Cr=!0,Dt=!0,Vt=[0,0],Pt=[0,0],ct={id:Wt,x:0,y:0,z:0,height:0,width:0},Mn=function(){qt.blurAll(),ct.z=100,pt()},De=function(){return ct},ye=function(Et){ne.trigger(Et,[ct.id,qt.areas()])},mt=function(Et){var ee=Et||window.event||{};ee.cancelBubble=!0,ee.returnValue=!1,ee.stopPropagation&&ee.stopPropagation(),ee.preventDefault&&ee.preventDefault()},x=function(Et,ee){var ie,Tt;switch(Et){case"start":ie="mousedown",Tt="touchstart";break;case"move":ie="mousemove",Tt="touchmove";break;case"stop":ie="mouseup",Tt="touchend";break;default:return}ee&&jQuery.isFunction(ee)?bt(window.document).on(ie,ee).on(Tt,ee):bt(window.document).off(ie).off(Tt)},In=function(){kn.css({cursor:"default",width:ct.width,height:ct.height,left:ct.x,top:ct.y}),Ke.css({backgroundPosition:-ct.x-1+"px "+(-ct.y-1)+"px",cursor:Ht.allowMove?"move":"default",width:ct.width-2>0?ct.width-2:0,height:ct.height-2>0?ct.height-2:0,left:ct.x+1,top:ct.y+1}),Wn.css({width:ct.width-2>0?ct.width-2:0,left:ct.x+2,top:ct.y+1})},Nt=function(Et){Ht.allowResize&&(Et?bt.each(yr,function(ee,ie){var Tt,Ae,re=Math.round(ie.width()/2),rt=Math.round(ie.height()/2),bo=ee[0],Kr=ee[ee.length-1];Tt="n"===bo?-rt:"s"===bo?ct.height-rt-1:Math.round(ct.height/2)-rt-1,Ae="e"===Kr?ct.width-re-1:"w"===Kr?-re:Math.round(ct.width/2)-re-1,ie.css({display:"block",left:ct.x+Ae,top:ct.y+Tt})}):bt(".select-areas-resize-handler").each(function(){bt(this).css({display:"none"})}))},ir=function(Et){En&&En.css({display:Et?"block":"none",left:ct.x+ct.width+1,top:ct.y-En.outerHeight()-1})},Ls=function(Et){kn.css({cursor:Et}),Ke.css({cursor:Et})},pt=function(Et){switch(Et){case"startSelection":qt._refresh(),In(),Nt(),ir(!0);break;case"pickSelection":case"pickResizeHandler":Nt();break;case"resizeSelection":In(),Nt(),Ls("crosshair"),ir(!0);break;case"moveSelection":In(),Nt(),Ls("move"),ir(!0);break;case"blur":In(),Nt(),ir();break;default:In(),Nt(!0),ir(!0)}},go=function(Et){mt(Et),Mn(),x("move",fr),x("stop",Vn);var ee=E(Et);Vt[0]=ee[0]-ct.x,Vt[1]=ee[1]-ct.y,pt("pickSelection")},St=function(Et){mt(Et),Mn();var ee=Et.target.className.split(" ")[1];"w"===ee[ee.length-1]&&(Pt[0]+=ct.width,ct.x=Pt[0]-ct.width),"n"===ee[0]&&(Pt[1]+=ct.height,ct.y=Pt[1]-ct.height),"n"===ee||"s"===ee?Cr=!1:("e"===ee||"w"===ee)&&(Dt=!1),x("move",Fo),x("stop",Vn),pt("pickResizeHandler")},Fo=function(Et){mt(Et),Mn();var ee=E(Et),ie=ee[1]-Pt[1],Tt=ee[0]-Pt[0];Math.abs(Tt)<Ht.minSize[0]&&(Tt=Tt>=0?Ht.minSize[0]:-Ht.minSize[0]),Math.abs(ie)<Ht.minSize[1]&&(ie=ie>=0?Ht.minSize[1]:-Ht.minSize[1]),(Pt[0]+Tt<0||Pt[0]+Tt>ne.width())&&(Tt=-Tt),(Pt[1]+ie<0||Pt[1]+ie>ne.height())&&(ie=-ie),Ht.maxSize[0]>Ht.minSize[0]&&Ht.maxSize[1]>Ht.minSize[1]&&(Math.abs(Tt)>Ht.maxSize[0]&&(Tt=Tt>=0?Ht.maxSize[0]:-Ht.maxSize[0]),Math.abs(ie)>Ht.maxSize[1]&&(ie=ie>=0?Ht.maxSize[1]:-Ht.maxSize[1])),Cr&&(ct.width=Tt),Dt&&(ct.height=ie),Ht.aspectRatio&&(Tt>0&&ie>0||Tt<0&&ie<0?Cr?ie=Math.round(Tt/Ht.aspectRatio):Tt=Math.round(ie*Ht.aspectRatio):Cr?ie=-Math.round(Tt/Ht.aspectRatio):Tt=-Math.round(ie*Ht.aspectRatio),Pt[0]+Tt>ne.width()&&(Tt=ne.width()-Pt[0],ie=ie>0?Math.round(Tt/Ht.aspectRatio):-Math.round(Tt/Ht.aspectRatio)),Pt[1]+ie<0&&(ie=-Pt[1],Tt=Tt>0?-Math.round(ie*Ht.aspectRatio):Math.round(ie*Ht.aspectRatio)),Pt[1]+ie>ne.height()&&(ie=ne.height()-Pt[1],Tt=Tt>0?Math.round(ie*Ht.aspectRatio):-Math.round(ie*Ht.aspectRatio)),ct.width=Tt,ct.height=ie),ct.width<0?(ct.width=Math.abs(ct.width),ct.x=Pt[0]-ct.width):ct.x=Pt[0],ct.height<0?(ct.height=Math.abs(ct.height),ct.y=Pt[1]-ct.height):ct.y=Pt[1],ye("changing"),pt("resizeSelection")},fr=function(Et){if(mt(Et),Ht.allowMove){Mn();var ee=E(Et);ho({x:ee[0]-Vt[0],y:ee[1]-Vt[1]}),ye("changing")}},ho=function(Et){ct.x=Et.x>0?Et.x+ct.width<ne.width()?Et.x:ne.width()-ct.width:0,ct.y=Et.y>0?Et.y+ct.height<ne.height()?Et.y:ne.height()-ct.height:0,pt("moveSelection")},Vn=function(Et,ee){mt(Et),function(){bt.each(arguments,function(Et,ee){x(ee)})}("move","stop"),ee&&(ct.x=ee.x,ct.y=ee.y,ct.z=ee.z,ct.width=ee.width,ct.height=ee.height,In()),Pt[0]=ct.x,Pt[1]=ct.y,Cr=!0,Dt=!0,ye("changed"),pt("releaseSelection")},Ce=function(Et){ye("deleted"),mt(Et),Ke.remove(),kn.remove(),Wn.remove(),bt.each(yr,function(ee,ie){ie.remove()}),En&&En.remove(),qt._remove(Wt)},E=function(Et){var ee=function(Et){var ee=bt(Et).offset();return[ee.left,ee.top]}(ne);Et.pageX||(Et.originalEvent&&(Et=Et.originalEvent),Et.changedTouches&&(Et=Et.changedTouches[0]),Et.touches&&(Et=Et.touches[0]));var ie=Et.pageX-ee[0],Tt=Et.pageY-ee[1];return[ie=ie<0?0:ie>ne.width()?ne.width():ie,Tt=Tt<0?0:Tt>ne.height()?ne.height():Tt]};if(kn=bt("<div id='select-areas-outline_"+De().id+'\'  class="select-areas-outline"/>').css({opacity:Ht.outlineOpacity,position:"absolute"}).insertAfter(je),Ke=bt("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+De().id).css({position:"absolute"}).insertAfter(kn),Wn=bt("<div id='select-areas-label-container_"+De().id+'\'  class="select-areas-label-container"/>').css({position:"absolute"}).insertAfter(je),Ht.allowResize&&bt.each(["nw","n","ne","e","se","s","sw","w"],function(Et,ee){yr[ee]=bt('<div class="select-areas-resize-handler '+ee+" select-areas-resize-handler_"+De().id+'"/>').css({opacity:.5,position:"absolute",cursor:ee+"-resize"}).insertAfter(Ke).mousedown(St).bind("touchstart",St)}),Ht.allowDelete){var vo=function(Et){return Et.click(Ce).bind("touchstart",Ce).bind("tap",Ce),Et};En=vo(bt("<div id='select-areas-delete_"+De().id+'\'  class="delete-area" />')).append(vo(bt('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(Ke)}return Ht.allowMove&&Ke.mousedown(go).bind("touchstart",go),Mn(),{getData:De,startSelection:function(Et){mt(Et),ct.width=Ht.minSize[0],ct.height=Ht.minSize[1],Mn(),x("move",Fo),x("stop",Vn),(Pt=E(Et))[0]+ct.width>ne.width()&&(Pt[0]=ne.width()-ct.width),Pt[1]+ct.height>ne.height()&&(Pt[1]=ne.height()-ct.height),ct.x=Pt[0],ct.y=Pt[1],pt("startSelection")},deleteSelection:Ce,options:Ht,blur:function(){ct.z=0,pt("blur")},focus:Mn,nudge:function(Et){Et.x=ct.x,Et.y=ct.y,Et.d&&(Et.y=ct.y+Et.d),Et.u&&(Et.y=ct.y-Et.u),Et.l&&(Et.x=ct.x-Et.l),Et.r&&(Et.x=ct.x+Et.r),ho(Et),ye("changed")},set:function(Et,ee){ct=bt.extend(ct,Et),Pt[0]=ct.x,Pt[1]=ct.y,ee||ye("changed")},contains:function(Et){return Et.x>=ct.x&&Et.x<=ct.x+ct.width&&Et.y>=ct.y&&Et.y<=ct.y+ct.height}}},bt.imageSelectAreas=function(){},bt.imageSelectAreas.prototype.init=function(qt,Wt){var Ht=this;this.options=bt.extend({allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null},Wt),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=bt(qt),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=bt("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=bt('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=bt("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),bt.each(this.options.areas,function(je,kn){Ht._add(kn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(bt.proxy(this.newArea,this)).on("touchstart",bt.proxy(this.newArea,this)),this.options.allowNudge&&bt("html").keydown(function(je){var Wn,Ke={37:"l",38:"u",39:"r",40:"d"}[je.which];if(Ke&&(Ht._eachArea(function(En){if(100===En.getData().z)return Wn=En,!1}),Wn)){var yr={};yr[Ke]=1,Wn.nudge(yr)}})},bt.imageSelectAreas.prototype._refresh=function(){var qt=this.areas().length;this.$overlay.css({display:qt?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},bt.imageSelectAreas.prototype._eachArea=function(qt){bt.each(this._areas,function(Wt,Ht){if(Ht)return qt(Ht,Wt)})},bt.imageSelectAreas.prototype._remove=function(qt){delete this._areas[qt],this._refresh()},bt.imageSelectAreas.prototype.remove=function(qt){this._areas[qt]&&this._areas[qt].deleteSelection()},bt.imageSelectAreas.prototype.newArea=function(qt){var Wt=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(Ht,ne){Wt=Math.max(Wt,parseInt(ne,10))}),this._areas[Wt+=1]=bt.imageArea(this,Wt),qt&&this._areas[Wt].startSelection(qt)),Wt},bt.imageSelectAreas.prototype.set=function(qt,Wt,Ht){this._areas[qt]&&(Wt.id=qt,this._areas[qt].set(Wt,Ht),this._areas[qt].focus())},bt.imageSelectAreas.prototype._add=function(qt,Wt){var Ht=this.newArea();this.set(Ht,qt,Wt)},bt.imageSelectAreas.prototype.add=function(qt){var Wt=this;this.blurAll(),bt.isArray(qt)?bt.each(qt,function(Ht,ne){Wt._add(ne)}):this._add(qt),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},bt.imageSelectAreas.prototype.reset=function(){var qt=this;this._eachArea(function(Wt,Ht){qt.remove(Ht)}),this._refresh()},bt.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},bt.imageSelectAreas.prototype.areas=function(){var qt=[];return this._eachArea(function(Wt){qt.push(Wt.getData())}),qt},bt.imageSelectAreas.prototype.relativeAreas=function(){for(var qt=this.areas(),Wt=[],Ht=this.ratio,ne=function(kn){return Math.floor(kn/Ht)},je=0;je<qt.length;je++)Wt[je]=bt.extend({},qt[je]),Wt[je].x=ne(Wt[je].x),Wt[je].y=ne(Wt[je].y),Wt[je].width=ne(Wt[je].width),Wt[je].height=ne(Wt[je].height);return Wt},bt.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(qt){qt.blur()})},bt.imageSelectAreas.prototype.contains=function(qt){var Wt=!1;return this._eachArea(function(Ht){if(Ht.contains(qt))return Wt=!0,!1}),Wt},bt.selectAreas=function(qt,Wt){var Ht=bt(qt);if(!Ht.data("mainImageSelectAreas")){var ne=new bt.imageSelectAreas;ne.init(qt,Wt),Ht.data("mainImageSelectAreas",ne),Ht.trigger("loaded")}return Ht.data("mainImageSelectAreas")},bt.fn.selectAreas=function(qt){if(bt.imageSelectAreas.prototype[qt]){var Wt=bt.imageSelectAreas.prototype[qt].apply(bt.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Wt>"u"?this:Wt}if("object"==typeof qt||!qt)return this.each(function(){var Ht=this,ne=new Image;ne.onload=function(){bt.selectAreas(Ht,qt)},ne.src=Ht.src}),this;bt.error("Method "+qt+" does not exist on jQuery.selectAreas")}}(jQuery);
!function(){"use strict";var bt=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},Qt=function(t){return{eq:t}},Zt=Qt(function(t,e){return t===e}),Vt=function(t){return Qt(function(e,n){if(e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t.eq(e[o],n[o]))return!1;return!0})},ie=function(t){return Qt(function(e,n){var l,u,f,r=Object.keys(e),o=Object.keys(n);if(!(l=Zt,u=Vt(l),f=function(u){return void 0,Array.prototype.slice.call(u).sort(undefined)},Qt(function(p,b){return u.eq(f(p),f(b))})).eq(r,o))return!1;for(var s=r.length,a=0;a<s;a++){var i=r[a];if(!t.eq(e[i],n[i]))return!1}return!0})},Xe=Qt(function(t,e){if(t===e)return!0;var n=bt(t);return n===bt(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?Vt(Xe).eq(t,e):"object"===n&&ie(Xe).eq(t,e))});const Tn=Object.getPrototypeOf,en=(t,e,n)=>{var r;return!!n(t,e.prototype)||(null===(r=t.constructor)||void 0===r?void 0:r.name)===e.name},Gn=t=>e=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&en(n,String,(o,s)=>s.isPrototypeOf(o))?"string":r})(e)===t,xr=t=>e=>typeof e===t,Rn=t=>e=>t===e,wr=(t,e)=>Yt(t)&&en(t,e,(n,r)=>Tn(n)===r),Tt=Gn("string"),Yt=Gn("object"),Mt=t=>wr(t,Object),it=Gn("array"),Jt=Rn(null),En=xr("boolean"),Ie=Rn(void 0),Se=t=>null==t,ct=t=>!Se(t),he=xr("function"),x=xr("number"),Un=(t,e)=>{if(it(t)){for(let n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}return!1},kt=()=>{},On=(t,e)=>(...n)=>t(e.apply(null,n)),zs=(t,e)=>n=>t(e(n)),mt=t=>()=>t,me=t=>t,Zr=(t,e)=>t===e;function St(t,...e){return(...n)=>{const r=e.concat(n);return t.apply(null,r)}}const bo=t=>e=>!t(e),fr=t=>()=>{throw new Error(t)},vo=t=>t(),Qn=t=>{t()},xe=mt(!1),je=mt(!0);class k{constructor(e,n){this.tag=e,this.value=n}static some(e){return new k(!0,e)}static none(){return k.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?k.some(e(this.value)):k.none()}bind(e){return this.tag?e(this.value):k.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:k.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return ct(e)?k.some(e):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const yo=Array.prototype.slice,Nt=Array.prototype.indexOf,oe=Array.prototype.push,de=(t,e)=>Nt.call(t,e),Rt=(t,e)=>de(t,e)>-1,Ae=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},re=(t,e)=>{const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e(t[o],o);return r},Z=(t,e)=>{for(let n=0,r=t.length;n<r;n++)e(t[n],n)},Co=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},zr=(t,e)=>{const n=[],r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];(e(a,o)?n:r).push(a)}return{pass:n,fail:r}},Xt=(t,e)=>{const n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];e(s,r)&&n.push(s)}return n},Wo=(t,e,n)=>(Co(t,(r,o)=>{n=e(n,r,o)}),n),xn=(t,e,n)=>(Z(t,(r,o)=>{n=e(n,r,o)}),n),Ur=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++){const s=t[r];if(e(s,r))return k.some(s);if(n(s,r))break}return k.none()},Ge=(t,e)=>Ur(t,e,xe),us=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return k.some(n);return k.none()},Jl=t=>{const e=[];for(let n=0,r=t.length;n<r;++n){if(!it(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);oe.apply(e,t[n])}return e},Qe=(t,e)=>Jl(re(t,e)),ar=(t,e)=>{for(let n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0},Jr=t=>{const e=yo.call(t,0);return e.reverse(),e},ne=(t,e)=>Xt(t,n=>!Rt(e,n)),Bn=(t,e)=>{const n={};for(let r=0,o=t.length;r<o;r++){const s=t[r];n[String(s)]=e(s,r)}return n},Vo=(t,e)=>{const n=yo.call(t,0);return n.sort(e),n},Us=(t,e)=>e>=0&&e<t.length?k.some(t[e]):k.none(),kn=t=>Us(t,0),to=t=>Us(t,t.length-1),wn=he(Array.from)?Array.from:t=>yo.call(t),Zn=(t,e)=>{for(let n=0;n<t.length;n++){const r=e(t[n],n);if(r.isSome())return r}return k.none()},xo=(t,e)=>{const n=[],r=he(e)?o=>Ae(n,s=>e(s,o)):o=>Rt(n,o);for(let o=0,s=t.length;o<s;o++){const a=t[o];r(a)||n.push(a)}return n},ln=Object.keys,cu=Object.hasOwnProperty,we=(t,e)=>{const n=ln(t);for(let r=0,o=n.length;r<o;r++){const s=n[r];e(t[s],s)}},fs=(t,e)=>tc(t,(n,r)=>({k:r,v:e(n,r)})),tc=(t,e)=>{const n={};return we(t,(r,o)=>{const s=e(r,o);n[s.k]=s.v}),n},wo=t=>(e,n)=>{t[n]=e},So=(t,e,n,r)=>{we(t,(o,s)=>{(e(o,s)?n:r)(o,s)})},Eo=(t,e)=>{const n={};return So(t,e,wo(n),kt),n},ko=(t,e)=>{const n=[];return we(t,(r,o)=>{n.push(e(r,o))}),n},Da=t=>ko(t,me),Re=(t,e)=>zt(t,e)?k.from(t[e]):k.none(),zt=(t,e)=>cu.call(t,e),fn=(t,e)=>zt(t,e)&&null!=t[e],Pa=t=>{const e={};return Z(t,n=>{e[n]={}}),ln(e)},ec=t=>void 0!==t.length,La=Array.isArray,Hs=(t,e,n)=>{if(!t)return!1;if(n=n||t,ec(t)){for(let r=0,o=t.length;r<o;r++)if(!1===e.call(n,t[r],r,t))return!1}else for(const r in t)if(zt(t,r)&&!1===e.call(n,t[r],r,t))return!1;return!0},_o=(t,e)=>{const n=[];return Hs(t,(r,o)=>{n.push(e(r,o,t))}),n},Hr=(t,e)=>{const n=[];return Hs(t,(r,o)=>{e&&!e(r,o,t)||n.push(r)}),n},ms=(t,e,n,r)=>{let o=Ie(n)?t[0]:n;for(let s=0;s<t.length;s++)o=e.call(r,o,t[s],s);return o},qs=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t))return r;return-1},Ko=t=>t[t.length-1],qr=t=>{let e,n=!1;return(...r)=>(n||(n=!0,e=t.apply(null,r)),e)},nc=()=>Ma(0,0),Ma=(t,e)=>({major:t,minor:e}),$s={nu:Ma,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?nc():((r,o)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const u=i[c];if(u.test(l))return u}})(r,o);if(!s)return{major:0,minor:0};const a=i=>Number(o.replace(s,"$"+i));return Ma(a(1),a(2))})(t,n)},unknown:nc},rc=(t,e)=>{const n=String(e).toLowerCase();return Ge(t,r=>r.search(n))},Ai=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,Xo=(t,e)=>Ve(t,e)?t.substring(e.length):t,mn=(t,e,n=0,r)=>{const o=t.indexOf(e,n);return-1!==o&&(!!Ie(r)||o+e.length<=r)},Ve=(t,e)=>Ai(t,e,0),Ws=(t,e)=>Ai(t,e,t.length-e.length),ps=t=>e=>e.replace(t,""),Yo=ps(/^\s+|\s+$/g),du=ps(/^\s+/g),gs=ps(/\s+$/g),Sr=t=>t.length>0,hs=t=>!Sr(t),Vs=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?k.none():k.some(n)},Ia=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Er=t=>e=>mn(e,t),uu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>mn(t,"edge/")&&mn(t,"chrome")&&mn(t,"safari")&&mn(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ia],search:t=>mn(t,"chrome")&&!mn(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>mn(t,"msie")||mn(t,"trident")},{name:"Opera",versionRegexes:[Ia,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Er("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Er("firefox")},{name:"Safari",versionRegexes:[Ia,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(mn(t,"safari")||mn(t,"mobile/"))&&mn(t,"applewebkit")}],fu=[{name:"Windows",search:Er("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>mn(t,"iphone")||mn(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Er("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Er("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Er("linux"),versionRegexes:[]},{name:"Solaris",search:Er("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Er("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Er("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ti={browsers:mt(uu),oses:mt(fu)},Fa="Chromium",mr="Firefox",Ks=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isEdge:r("Edge"),isChromium:r(Fa),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(mr),isSafari:r("Safari")}},bs=()=>Ks({current:void 0,version:$s.unknown()}),oc=Ks,sc=(mt("Edge"),mt(Fa),mt("IE"),mt("Opera"),mt(mr),mt("Safari"),"Windows"),ac="Android",Xs="Solaris",Di="FreeBSD",pr="ChromeOS",Pi=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isWindows:r(sc),isiOS:r("iOS"),isAndroid:r(ac),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(Xs),isFreeBSD:r(Di),isChromeOS:r(pr)}},Ys=()=>Pi({current:void 0,version:$s.unknown()}),mu=Pi,pu=(mt(sc),mt("iOS"),mt(ac),mt("Linux"),mt("macOS"),mt(Xs),mt(Di),mt(pr),t=>window.matchMedia(t).matches);let Qo=qr(()=>((t,e,n)=>{const r=Ti.browsers(),o=Ti.oses(),s=e.bind(l=>{return c=r,Zn(l.brands,f=>{const p=f.brand.toLowerCase();return Ge(c,b=>{var g;return p===(null===(g=b.brand)||void 0===g?void 0:g.toLowerCase())}).map(b=>({current:b.name,version:$s.nu(parseInt(f.version,10),0)}))});var c}).orThunk(()=>{return rc(r,c=t).map(u=>{const f=$s.detect(u.versionRegexes,c);return{current:u.name,version:f}});var c}).fold(bs,oc),a=(l=o,c=t,rc(l,c).map(u=>{const f=$s.detect(u.versionRegexes,c);return{current:u.name,version:f}})).fold(Ys,mu),i=((l,c,u,f)=>{const p=l.isiOS()&&!0===/ipad/i.test(u),b=l.isiOS()&&!p,g=l.isiOS()||l.isAndroid(),v=g||f("(pointer:coarse)"),h=p||!b&&g&&f("(min-device-width:768px)"),C=b||g&&!h,S=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(u),E=!C&&!h&&!S;return{isiPad:mt(p),isiPhone:mt(b),isTablet:mt(h),isPhone:mt(C),isTouch:mt(v),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:mt(S),isDesktop:mt(E)}})(a,s,t,n);var l,c;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,k.from(navigator.userAgentData),pu));const Dn=()=>Qo(),Li=navigator.userAgent,Mi=Dn(),Jn=Mi.browser,kr=Mi.os,eo=Mi.deviceType,ic=-1!==Li.indexOf("Windows Phone"),pe={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Jn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Jn.isIE(),windowsPhone:ic,browser:{current:Jn.current,version:Jn.version,isChromium:Jn.isChromium,isEdge:Jn.isEdge,isFirefox:Jn.isFirefox,isIE:Jn.isIE,isOpera:Jn.isOpera,isSafari:Jn.isSafari},os:{current:kr.current,version:kr.version,isAndroid:kr.isAndroid,isChromeOS:kr.isChromeOS,isFreeBSD:kr.isFreeBSD,isiOS:kr.isiOS,isLinux:kr.isLinux,isMacOS:kr.isMacOS,isSolaris:kr.isSolaris,isWindows:kr.isWindows},deviceType:{isDesktop:eo.isDesktop,isiPad:eo.isiPad,isiPhone:eo.isiPhone,isPhone:eo.isPhone,isTablet:eo.isTablet,isTouch:eo.isTouch,isWebView:eo.isWebView}},gu=/^\s*|\s*$/g,Ii=t=>Se(t)?"":(""+t).replace(gu,""),lc=function(t,e,n,r){r=r||this,t&&(n&&(t=t[n]),Hs(t,(o,s)=>!1!==e.call(r,o,s,n)&&(lc(o,e,n,r),!0)))},lt={trim:Ii,isArray:La,is:(t,e)=>e?!("array"!==e||!La(t))||typeof t===e:void 0!==t,toArray:t=>{if(La(t))return t;{const e=[];for(let n=0,r=t.length;n<r;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const r=Tt(t)?t.split(e||","):t||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:Hs,map:_o,grep:Hr,inArray:(t,e)=>{if(t)for(let n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},hasOwn:zt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(zt(r,o)){const s=r[o];void 0!==s&&(t[o]=s)}}return t},walk:lc,resolve:(t,e=window)=>{const n=t.split(".");for(let r=0,o=n.length;r<o&&(e=e[n[r]]);r++);return e},explode:(t,e)=>it(t)?t:""===t?[]:_o(t.split(e||","),Ii),_addCacheSuffix:t=>{const e=pe.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},No=(t,e,n=Zr)=>t.exists(r=>n(r,e)),cc=(t,e,n=Zr)=>Sn(t,e,n).getOr(t.isNone()&&e.isNone()),Sn=(t,e,n)=>t.isSome()&&e.isSome()?k.some(n(t.getOrDie(),e.getOrDie())):k.none(),vs=(t,e)=>t?k.some(e):k.none(),hu=typeof window<"u"?window:Function("return this;")(),dc=(t,e)=>((n,r)=>{let o=r??hu;for(let s=0;s<n.length&&null!=o;++s)o=o[n[s]];return o})(t.split("."),e),bu=Object.getPrototypeOf,fe=t=>t.dom.nodeName.toLowerCase(),Fi=t=>t.dom.nodeType,ys=t=>e=>Fi(e)===t,Gs=t=>Hn(t)&&(t=>{const e=dc("ownerDocument.defaultView",t);return Yt(t)&&((n=e,((r,o)=>{const s=dc(r,o);if(null==s)throw new Error(r+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(bu(t).constructor.name));var n})(t.dom),Hn=ys(1),qn=ys(3),vu=ys(9),Qs=ys(11),Zs=t=>e=>Hn(e)&&fe(e)===t,ji=(t,e,n)=>{if(!(Tt(n)||En(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Ze=(t,e,n)=>{ji(t.dom,e,n)},no=(t,e)=>{const n=t.dom;we(e,(r,o)=>{ji(n,o,r)})},tr=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},ro=(t,e)=>k.from(tr(t,e)),d=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},m=(t,e)=>{t.dom.removeAttribute(e)},y=t=>xn(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),w=(t,e)=>{const n=tr(t,e);return void 0===n||""===n?[]:n.split(" ")},_=t=>void 0!==t.dom.classList,T=t=>w(t,"class"),O=(t,e)=>((n,r,o)=>{const s=w(n,r).concat([o]);return Ze(n,r,s.join(" ")),!0})(t,"class",e),q=(t,e)=>((n,r,o)=>{const s=Xt(w(n,r),a=>a!==o);return s.length>0?Ze(n,r,s.join(" ")):m(n,r),!1})(t,"class",e),H=(t,e)=>{_(t)?t.dom.classList.add(e):O(t,e)},K=t=>{0===(_(t)?t.dom.classList:T(t)).length&&m(t,"class")},et=(t,e)=>{_(t)?t.dom.classList.remove(e):q(t,e),K(t)},at=(t,e)=>_(t)&&t.dom.classList.contains(e),J=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},ut=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,t),new Error(r)}return J(n.childNodes[0])},Pt=(t,e)=>{const n=(e||document).createElement(t);return J(n)},le=(t,e)=>{const n=(e||document).createTextNode(t);return J(n)},D=J,pn=(t,e)=>{const n=[],r=s=>(n.push(s),e(s));let o=e(t);do{o=o.bind(r)}while(o.isSome());return n},cn=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},_r=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,Ft=(t,e)=>t.dom===e.dom,Je=(t,e)=>{const n=t.dom,r=e.dom;return n!==r&&n.contains(r)},Te=t=>D(t.dom.ownerDocument),Le=t=>vu(t)?t:Te(t),oo=t=>D(Le(t).dom.defaultView),ir=t=>k.from(t.dom.parentNode).map(D),lr=t=>k.from(t.dom.parentElement).map(D),Cs=(t,e)=>{const n=he(e)?e:xe;let r=t.dom;const o=[];for(;null!=r.parentNode;){const s=r.parentNode,a=D(s);if(o.push(a),!0===n(a))break;r=s}return o},$n=t=>k.from(t.dom.previousSibling).map(D),gr=t=>k.from(t.dom.nextSibling).map(D),Ao=t=>Jr(pn(t,$n)),er=t=>pn(t,gr),Ee=t=>re(t.dom.childNodes,D),$e=(t,e)=>k.from(t.dom.childNodes[e]).map(D),_n=t=>$e(t,0),$r=t=>$e(t,t.dom.childNodes.length-1),Nn=t=>t.dom.childNodes.length,se=t=>Qs(t)&&ct(t.dom.host),tn=he(Element.prototype.attachShadow)&&he(Node.prototype.getRootNode),rn=mt(tn),Oe=tn?t=>D(t.dom.getRootNode()):Le,hr=t=>se(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return D(n)})(Le(t)),xs=t=>D(t.dom.host),Js=t=>{if(rn()&&ct(t.target)){const e=D(t.target);if(Hn(e)&&Zo(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return kn(n)}}return k.from(t.target)},Zo=t=>ct(t.dom.shadowRoot),To=t=>{const e=qn(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(r=>{const o=Oe(r);return se(o)?k.some(o):k.none()})(D(e)).fold(()=>n.body.contains(e),zs(To,xs))};var so=(t,e,n,r,o)=>t(n,r)?k.some(n):he(o)&&o(n)?k.none():e(n,r,o);const Wr=(t,e,n)=>{let r=t.dom;const o=he(n)?n:xe;for(;r.parentNode;){r=r.parentNode;const s=D(r);if(e(s))return k.some(s);if(o(s))break}return k.none()},Nr=(t,e,n)=>so((r,o)=>o(r),Wr,t,e,n),ta=(t,e)=>{const n=r=>{for(let o=0;o<r.childNodes.length;o++){const s=D(r.childNodes[o]);if(e(s))return k.some(s);const a=n(r.childNodes[o]);if(a.isSome())return a}return k.none()};return n(t.dom)},Ro=(t,e,n)=>Wr(t,r=>cn(r,e),n),ws=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return _r(o)?k.none():k.from(o.querySelector(n)).map(D)})(e,t),ao=(t,e,n)=>so((r,o)=>cn(r,o),Ro,t,e,n),io=(t,e=!1)=>{return To(t)?t.dom.isContentEditable:(n=t,ao(n,"[contenteditable]")).fold(mt(e),r=>"true"===zi(r));var n},zi=t=>t.dom.contentEditable,Jo=t=>void 0!==t.style&&he(t.style.getPropertyValue),Ui=(t,e,n)=>{if(!Tt(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Jo(t)&&t.style.setProperty(e,n)},M=(t,e,n)=>{Ui(t.dom,e,n)},$=(t,e)=>{const n=t.dom;we(e,(r,o)=>{Ui(n,o,r)})},tt=(t,e)=>{const n=t.dom,r=window.getComputedStyle(n).getPropertyValue(e);return""!==r||To(t)?r:nt(n,e)},nt=(t,e)=>Jo(t)?t.style.getPropertyValue(e):"",dt=(t,e)=>{const r=nt(t.dom,e);return k.from(r).filter(o=>o.length>0)},Ht=t=>{const e={},n=t.dom;if(Jo(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);e[o]=n.style[o]}return e},$t=(t,e)=>{var n,r;r=e,Jo(n=t.dom)&&n.style.removeProperty(r),No(ro(t,"style").map(Yo),"")&&m(t,"style")},jt=(t,e)=>{ir(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Lt=(t,e)=>{gr(t).fold(()=>{ir(t).each(n=>{Kt(n,e)})},n=>{jt(n,e)})},ke=(t,e)=>{_n(t).fold(()=>{Kt(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Kt=(t,e)=>{t.dom.appendChild(e.dom)},ge=(t,e)=>{jt(t,e),Kt(e,t)},be=(t,e)=>{Z(e,n=>{Kt(t,n)})},ae=t=>{t.dom.textContent="",Z(Ee(t),e=>{ue(e)})},ue=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Ye=t=>{const e=Ee(t);var n,r;e.length>0&&(n=t,Z(r=e,(o,s)=>{Lt(0===s?n:r[s-1],o)})),ue(t)},dn=t=>re(t,D),Wn=t=>t.dom.innerHTML,Pn=(t,e)=>{const n=Te(t).dom,r=D(n.createDocumentFragment()),o=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,Ee(D(i))})(e,n);be(r,o),ae(t),Kt(t,r)},We=(t,e,n,r)=>{t.dom.removeEventListener(e,n,r)},Oo=(t,e)=>({left:t,top:e,translate:(n,r)=>Oo(t+n,e+r)}),Ln=Oo,ts=(t,e)=>void 0!==t?t:void 0!==e?e:0,za=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Ln(n.offsetLeft,n.offsetTop):To(t)?(r=>{const o=r.getBoundingClientRect();return Ln(o.left,o.top)})(e):Ln(0,0)},Ua=t=>{const e=void 0!==t?t.dom:document;return Ln(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},fc=(t,e,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(t,e)},Ag=(t,e)=>{Dn().browser.isSafari()&&he(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Tg=(t,e,n,r)=>({x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}),Rg=t=>{const e=void 0===t?window:t,r=Ua(D(e.document));return(o=>{const s=void 0===o?window:o;return Dn().browser.isFirefox()?k.none():k.from(s.visualViewport)})(e).fold(()=>{const o=e.document.documentElement;return Tg(r.left,r.top,o.clientWidth,o.clientHeight)},o=>Tg(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},Og=(t,e)=>{let n=[];return Z(Ee(t),r=>{e(r)&&(n=n.concat([r])),n=n.concat(Og(r,e))}),n},Mn=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return _r(o)?[]:re(o.querySelectorAll(n),D)})(e,t),Bg=(t,e,n)=>Wr(t,e,n).isSome(),Dg=(t,e)=>ta(t,e).isSome();class gn{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,r,o){if(e){if(!o&&e[n])return e[n];if(e!==this.rootNode){let s=e[r];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[r],s)return s}}}findPreviousNode(e,n){if(e){const r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let s=r.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return r}const o=e.parentNode;if(o&&o!==this.rootNode)return o}}}const hn="\xa0",yu=t=>"\ufeff"===t,jE=/^[ \t\r\n]*$/,Ha=t=>jE.test(t),Pg=t=>"\n"===t||"\r"===t,Lg=(t,e=4,n=!0,r=!0)=>{const o=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,o);var l;return xn(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===hn?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&r||(u=i.str.length+1)<(c=s).length&&u>=0&&Pg(c[u])?{pcIsSpace:!1,str:i.str+hn}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Pg(l),str:i.str+l};var c,u},{pcIsSpace:!1,str:""}).str},ea=t=>e=>!!e&&e.nodeType===t,mc=t=>!!t&&!Object.getPrototypeOf(t),_t=ea(1),es=t=>_t(t)&&Gs(D(t)),qi=t=>{const e=t.toLowerCase();return n=>ct(n)&&n.nodeName.toLowerCase()===e},lo=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return Rt(e,r)}return!1}},pc=(t,e)=>{const n=e.toLowerCase().split(" ");return r=>{if(_t(r)){const o=r.ownerDocument.defaultView;if(o)for(let s=0;s<n.length;s++){const a=o.getComputedStyle(r,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},na=t=>_t(t)&&t.hasAttribute("data-mce-bogus"),Bo=t=>_t(t)&&"TABLE"===t.tagName,Mg=t=>e=>!(!es(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),Cu=lo(["textarea","input"]),ot=ea(3),zE=ea(4),UE=ea(7),Ss=ea(8),$i=ea(9),xu=ea(11),He=qi("br"),Ig=qi("img"),Vr=Mg("true"),Me=Mg("false"),gc=lo(["td","th"]),HE=lo(["td","th","caption"]),Do=lo(["video","audio","object","embed"]),qE=qi("li"),wu=qi("details"),$E=qi("summary"),Fg={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Su=(t,e,n,r)=>{return he(r.isContent)&&r.isContent(e)||(s=t,_t(o=e)&&zt(s.getNonEmptyElements(),o.nodeName))||(t=>_t(t)&&t.hasAttribute("data-mce-bookmark"))(e)||(o=>_t(o)&&"A"===o.nodeName&&!o.hasAttribute("href")&&(o.hasAttribute("name")||o.hasAttribute("id")))(e)||((t,e,n,r)=>{return ot(t)&&(s=e,a=n,!(Ha((o=t).data)&&!((i,l,c)=>{const u=D(l),f=D(i),p=c.getWhitespaceElements();return Bg(f,b=>zt(p,fe(b)),St(Ft,u))})(o,s,a)))&&(!r.includeZwsp||!(o=>{for(const s of o)if(!yu(s))return!1;return!0})(t.data));var o,s,a})(e,n,t,r)||Me(e)||Vr(e)&&(o=>lr(D(o)).exists(s=>!io(s)))(e);var o,s},ns=(t,e,n)=>{const r={...Fg,...n};if(r.checkRootAsContent&&Su(t,e,e,r))return!1;let o=e.firstChild,s=0;if(!o)return!0;const a=new gn(o,e);do{if(r.skipBogus&&_t(o)){const i=o.getAttribute("data-mce-bogus");if(i){o=a.next("all"===i);continue}}if(Ss(o))o=a.next(!0);else if(He(o))s++,o=a.next();else{if(Su(t,o,e,r))return!1;o=a.next()}}while(o);return s<=1},In=(t,e,n)=>ns(t,e.dom,{checkRootAsContent:!0,...n}),jg=(t,e,n)=>Su(t,e,e,{includeZwsp:Fg.includeZwsp,...n}),bn=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},KE=t=>{const e=bn(k.none()),n=()=>e.get().each(r=>clearInterval(r));return{clear:()=>{n(),e.set(k.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:r=>{n(),e.set(k.some(setInterval(r,t)))}}},rs=()=>{const t=(e=>{const n=bn(k.none()),r=()=>n.get().each(e);return{clear:()=>{r(),n.set(k.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(k.some(o))}}})(kt);return{...t,on:e=>t.get().each(e)}},zg=t=>{const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":"html"},ra=t=>"html"!==zg(t),Eu=t=>ra(t.nodeName),Ug=t=>zg(t.nodeName),XE=["svg","math"],hc="data-mce-block",ku=t=>{return re((e=t,Xt(ln(e),n=>!/[A-Z]/.test(n))),e=>{const n=CSS.escape(e);return`${n}:`+re(XE,r=>`not(${r} ${n})`).join(":")}).join(",");var e},Hg=(t,e)=>ct(e.querySelector(t))?(e.setAttribute(hc,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(hc),!1),qg=(t,e)=>{const n=ku(t.getTransparentElements()),r=ku(t.getBlockElements());return Xt(e.querySelectorAll(n),o=>Hg(r,o))},$g=(t,e,n)=>{var r;const o=n?"lastChild":"firstChild";for(let s=e[o];s;s=s[o])if(ns(t,s,{checkRootAsContent:!0}))return void(null===(r=s.parentNode)||void 0===r||r.removeChild(s))},_u=(t,e)=>{const n=qg(t,e);var r,o,s;((t,e,n)=>{const r=t.getBlockElements(),o=D(e),s=i=>fe(i)in r,a=i=>Ft(i,o);Z(dn(n),i=>{Wr(i,s,a).each(l=>{const c=Xt(Ee(i),p=>s(p)&&!t.isValidChild(fe(l),fe(p)));if(c.length>0){const u=lr(l);Z(c,f=>{Wr(f,s,a).each(p=>{((b,g,v)=>{const h=document.createRange(),C=g.parentNode;if(C){h.setStartBefore(g),h.setEndBefore(v);const S=h.extractContents();$g(b,S,!0),h.setStartAfter(v),h.setEndAfter(g);const E=h.extractContents();$g(b,E,!1),ns(b,S,{checkRootAsContent:!0})||C.insertBefore(S,g),ns(b,v,{checkRootAsContent:!0})||C.insertBefore(v,g),ns(b,E,{checkRootAsContent:!0})||C.insertBefore(E,g),C.removeChild(g)}})(t,p.dom,f.dom)})}),u.each(f=>qg(t,f.dom))}})})})(t,e,n),r=t,o=e,s=n,Z([...s,...oa(r,o)?[o]:[]],a=>Z(Mn(D(a),a.nodeName.toLowerCase()),i=>{QE(r,i.dom)&&Ye(i)}))},GE=(t,e)=>{if(Tu(t,e)){const n=ku(t.getBlockElements());Hg(n,e)}},Nu=t=>t.hasAttribute(hc),Au=(t,e)=>zt(t.getTransparentElements(),e),Tu=(t,e)=>_t(e)&&Au(t,e.nodeName),oa=(t,e)=>Tu(t,e)&&Nu(e),QE=(t,e)=>Tu(t,e)&&!Nu(e),Ru=(t,e)=>1===e.type&&Au(t,e.name)&&Tt(e.attr(hc)),ZE=Dn().browser,Wg=t=>Ge(t,Hn),Vg=(t,e)=>t.children&&Rt(t.children,e),Kg=(t,e={})=>{let n=0;const r={},o=D(t),s=Le(o),a=f=>{Kt(hr(o),f)},i=f=>{const p=hr(o);ws(p,"#"+f).each(ue)},l=f=>Re(r,f).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=f=>new Promise((p,b)=>{let g;const v=lt._addCacheSuffix(f),h=l(v);r[v]=h,h.count++;const C=(A,R)=>{Z(A,Qn),h.status=R,h.passed=[],h.failed=[],g&&(g.onload=null,g.onerror=null,g=null)},S=()=>C(h.passed,2),E=()=>C(h.failed,3);if(p&&h.passed.push(p),b&&h.failed.push(b),1===h.status)return;if(2===h.status)return void S();if(3===h.status)return void E();h.status=1;const N=Pt("link",s.dom);no(N,{rel:"stylesheet",type:"text/css",id:h.id}),e.contentCssCors&&Ze(N,"crossOrigin","anonymous"),e.referrerPolicy&&Ze(N,"referrerpolicy",e.referrerPolicy),g=N.dom,g.onload=S,g.onerror=E,a(N),Ze(N,"href",v)}),u=f=>{const p=lt._addCacheSuffix(f);Re(r,p).each(b=>{0==--b.count&&(delete r[p],i(b.id))})};return{load:c,loadRawCss:(f,p)=>{const b=l(f);r[f]=b,b.count++;const g=Pt("style",s.dom);no(g,{rel:"stylesheet",type:"text/css",id:b.id}),g.dom.innerHTML=p,a(g)},loadAll:f=>Promise.allSettled(re(f,p=>c(p).then(mt(p)))).then(p=>{const b=zr(p,g=>"fulfilled"===g.status);return b.fail.length>0?Promise.reject(re(b.fail,g=>g.reason)):re(b.pass,g=>g.value)}),unload:u,unloadRawCss:f=>{Re(r,f).each(p=>{0==--p.count&&(delete r[f],i(p.id))})},unloadAll:f=>{Z(f,p=>{u(p)})},_setReferrerPolicy:f=>{e.referrerPolicy=f},_setContentCssCors:f=>{e.contentCssCors=f}}},Xg=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const r=Oe(e).dom;return k.from(t.get(r)).getOrThunk(()=>{const o=Kg(r,n);return t.set(r,o),o})}}})(),Yg=(t,e)=>ct(t)&&(jg(e,t)||e.isInline(t.nodeName.toLowerCase())),Gg=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Ou=(t,e,n,r)=>{var o;const s=r||e;if(_t(e)&&Gg(e))return e;const a=e.childNodes;for(let i=a.length-1;i>=0;i--)Ou(t,a[i],n,s);if(_t(e)){const i=e.childNodes;1===i.length&&Gg(i[0])&&(null===(o=e.parentNode)||void 0===o||o.insertBefore(i[0],e))}return xu(i=e)||$i(i)||jg(n,e)||(i=>!!_t(i)&&i.childNodes.length>0)(e)||((i,l,c)=>ot(i)&&i.data.length>0&&((u,f,p)=>{const b=new gn(u,f).prev(!1),g=new gn(u,f).next(!1),v=Ie(b)||Yg(b,p),h=Ie(g)||Yg(g,p);return v&&h})(i,l,c))(e,s,n)||t.remove(e),e;var i},JE=lt.makeMap,bc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tk=/[<>&\"\']/g,ek=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,nk={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},sa={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},rk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Qg=(t,e)=>{const n={};if(t){const r=t.split(",");e=e||10;for(let o=0;o<r.length;o+=2){const s=String.fromCharCode(parseInt(r[o],e));if(!sa[s]){const a="&"+r[o+1]+";";n[s]=a,n[a]=s}}return n}},Bu=Qg("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Zg=(t,e)=>t.replace(e?bc:vc,n=>sa[n]||n),Jg=(t,e)=>t.replace(e?bc:vc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":sa[n]||"&#"+n.charCodeAt(0)+";"),Du=(t,e,n)=>{const r=n||Bu;return t.replace(e?bc:vc,o=>sa[o]||r[o]||o)},aa={encodeRaw:Zg,encodeAllRaw:t=>(""+t).replace(tk,e=>sa[e]||e),encodeNumeric:Jg,encodeNamed:Du,getEncodeFunc:(t,e)=>{const n=Qg(e)||Bu,r=JE(t.replace(/\+/g,","));return r.named&&r.numeric?(o,s)=>o.replace(s?bc:vc,a=>void 0!==sa[a]?sa[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):r.named?e?(o,s)=>Du(o,s,n):Du:r.numeric?Jg:Zg},decode:t=>t.replace(ek,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):nk[n]||String.fromCharCode(n):rk[e]||Bu[e]||(r=>{const o=Pt("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(e))},An=(t,e)=>(t=lt.trim(t))?t.split(e||" "):[],th=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),eh=t=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==t?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==t?["xml:lang"]:[]]),nh=t=>{let e,n;e="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(e+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==t&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),e=[e,"center dir isindex noframes"].join(" "));const r=[e,n].join(" ");return{blockContent:e,phrasingContent:n,flowContent:r}},Pu=t=>{const{blockContent:e,phrasingContent:n,flowContent:r}=nh(t),o=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:o(e),phrasingContent:o(n),flowContent:o(r)})},ok={html4:qr(()=>Pu("html4")),html5:qr(()=>Pu("html5")),"html5-strict":qr(()=>Pu("html5-strict"))},rh=(t,e)=>{const{blockContent:n,phrasingContent:r,flowContent:o}=ok[t]();return"blocks"===e?k.some(n):"phrasing"===e?k.some(r):"flow"===e?k.some(o):k.none()},Lu=t=>k.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(t)).map(e=>({preset:"@"===e[1],name:e[2]})),yc={},Wi=lt.makeMap,co=lt.each,oh=lt.extend,sh=lt.explode,ah=(t,e={})=>{const n=Wi(t," ",Wi(t.toUpperCase()," "));return oh(n,e)},ih=t=>ah("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Mu=(t,e)=>{if(t){const n={};return Tt(t)&&(t={"*":t}),co(t,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===e?Wi(r,/[, ]/):sh(r,/[, ]/)}),n}},Es=(t={})=>{var e;const n={},r={};let o=[];const s={},a={},i=(yt,te,ce)=>{const ee=t[yt];if(ee)return Wi(ee,/[, ]/,Wi(ee.toUpperCase(),/[, ]/));{let ve=yc[yt];return ve||(ve=ah(te,ce),yc[yt]=ve),ve}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(yt=>{const te=eh(yt),{phrasingContent:ce,flowContent:ee}=nh(yt),ve={},De=(Ce,Pe,sn)=>{ve[Ce]={attributes:Bn(Pe,mt({})),attributesOrder:Pe,children:Bn(sn,mt({}))}},ht=(Ce,Pe="",sn="")=>{const sr=An(sn),Gr=An(Ce);let zn=Gr.length;const ur=[...te,...An(Pe)];for(;zn--;)De(Gr[zn],ur.slice(),sr)},It=(Ce,Pe)=>{const sn=An(Ce),sr=An(Pe);let Gr=sn.length;for(;Gr--;){const zn=ve[sn[Gr]];for(let ur=0,an=sr.length;ur<an;ur++)zn.attributes[sr[ur]]={},zn.attributesOrder.push(sr[ur])}};return"html5-strict"!==yt&&(Z(An("acronym applet basefont big font strike tt"),Ce=>{ht(Ce,"",ce)}),Z(An("center dir isindex noframes"),Ce=>{ht(Ce,"",ee)})),ht("html","manifest","head body"),ht("head","","base command link meta noscript script style title"),ht("title hr noscript br"),ht("base","href target"),ht("link","href rel media hreflang type sizes hreflang"),ht("meta","name http-equiv content charset"),ht("style","media type scoped"),ht("script","src async defer type charset"),ht("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",ee),ht("dd div","",ee),ht("address dt caption","","html4"===yt?ce:ee),ht("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",ce),ht("blockquote","cite",ee),ht("ol","reversed start type","li"),ht("ul","","li"),ht("li","value",ee),ht("dl","","dt dd"),ht("a","href target rel media hreflang type","html4"===yt?ce:ee),ht("q","cite",ce),ht("ins del","cite datetime",ee),ht("img","src sizes srcset alt usemap ismap width height"),ht("iframe","src name width height",ee),ht("embed","src type width height"),ht("object","data type typemustmatch name usemap form width height",[ee,"param"].join(" ")),ht("param","name value"),ht("map","name",[ee,"area"].join(" ")),ht("area","alt coords shape href target rel media hreflang type"),ht("table","border","caption colgroup thead tfoot tbody tr"+("html4"===yt?" col":"")),ht("colgroup","span","col"),ht("col","span"),ht("tbody thead tfoot","","tr"),ht("tr","","td th"),ht("td","colspan rowspan headers",ee),ht("th","colspan rowspan headers scope abbr",ee),ht("form","accept-charset action autocomplete enctype method name novalidate target",ee),ht("fieldset","disabled form name",[ee,"legend"].join(" ")),ht("label","form for",ce),ht("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ht("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===yt?ee:ce),ht("select","disabled form multiple name required size","option optgroup"),ht("optgroup","disabled label","option"),ht("option","disabled label selected value"),ht("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ht("menu","type label",[ee,"li"].join(" ")),ht("noscript","",ee),"html4"!==yt&&(ht("wbr"),ht("ruby","",[ce,"rt rp"].join(" ")),ht("figcaption","",ee),ht("mark rt rp bdi","",ce),ht("summary","",[ce,"h1 h2 h3 h4 h5 h6"].join(" ")),ht("canvas","width height",ee),ht("data","value",ce),ht("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[ee,"track source"].join(" ")),ht("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[ee,"track source"].join(" ")),ht("picture","","img source"),ht("source","src srcset type media sizes"),ht("track","kind src srclang label default"),ht("datalist","",[ce,"option"].join(" ")),ht("article section nav aside main header footer","",ee),ht("hgroup","","h1 h2 h3 h4 h5 h6"),ht("figure","",[ee,"figcaption"].join(" ")),ht("time","datetime",ce),ht("dialog","open",ee),ht("command","type label icon disabled checked radiogroup command"),ht("output","for form name",ce),ht("progress","value max",ce),ht("meter","value min max low high optimum",ce),ht("details","open",[ee,"summary"].join(" ")),ht("keygen","autofocus challenge disabled form keytype name"),De("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==yt&&(It("script","language xml:space"),It("style","xml:space"),It("object","declare classid code codebase codetype archive standby align border hspace vspace"),It("embed","align name hspace vspace"),It("param","valuetype type"),It("a","charset name rev shape coords"),It("br","clear"),It("applet","codebase archive code object alt name width height align hspace vspace"),It("img","name longdesc align border hspace vspace"),It("iframe","longdesc frameborder marginwidth marginheight scrolling align"),It("font basefont","size color face"),It("input","usemap align"),It("select"),It("textarea"),It("h1 h2 h3 h4 h5 h6 div p legend caption","align"),It("ul","type compact"),It("li","type"),It("ol dl menu dir","compact"),It("pre","width xml:space"),It("hr","align noshade size width"),It("isindex","prompt"),It("table","summary width frame rules cellspacing cellpadding align bgcolor"),It("col","width align char charoff valign"),It("colgroup","width align char charoff valign"),It("thead","align char charoff valign"),It("tr","align char charoff valign bgcolor"),It("th","axis align char charoff valign nowrap bgcolor width height"),It("form","accept"),It("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),It("tfoot","align char charoff valign"),It("tbody","align char charoff valign"),It("area","nohref"),It("body","background bgcolor text link vlink alink")),"html4"!==yt&&(It("input button select textarea","autofocus"),It("input textarea","placeholder"),It("a","download"),It("link script img","crossorigin"),It("img","loading"),It("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),"html4"!==yt&&Z([ve.video,ve.audio],Ce=>{delete Ce.children.audio,delete Ce.children.video}),Z(An("a form meter progress dfn"),Ce=>{ve[Ce]&&delete ve[Ce].children[Ce]}),delete ve.caption.children.table,delete ve.script,ve})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const u=Mu(t.valid_styles),f=Mu(t.invalid_styles,"map"),p=Mu(t.valid_classes,"map"),b=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),C="td th iframe video audio object script code",S=i("non_empty_elements",C+" pre svg textarea summary",v),E=i("move_caret_before_on_enter_elements",C+" table",v),N="h1 h2 h3 h4 h5 h6",A=i("text_block_elements",N+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),R=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",A),L=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),P=i("transparent_elements","a ins del canvas map"),j=i("wrap_block_elements","pre "+N);co("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),yt=>{a[yt]=new RegExp("</"+yt+"[^>]*>","gi")});const W=yt=>{const te=k.from(n["@"]),ce=/[*?+]/;Z(((ee,ve)=>{const De=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Qe(An(ve,","),ht=>{const It=De.exec(ht);if(It){const Ce=It[1],Pe=It[2],sn=It[3],sr=It[4],Gr=It[5],zn={attributes:{},attributesOrder:[]};if(ee.each(ur=>{return Cr=zn,we((an=ur).attributes,($o,cs)=>{Cr.attributes[cs]=$o}),void Cr.attributesOrder.push(...an.attributesOrder);var an,Cr}),"#"===Ce?zn.paddEmpty=!0:"-"===Ce&&(zn.removeEmpty=!0),"!"===sr&&(zn.removeEmptyAttrs=!0),Gr&&((ur,an)=>{const Cr=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,$o=/[*?+]/,{attributes:cs,attributesOrder:Oa}=an;Z(An(ur,"|"),_g=>{const Qr=Cr.exec(_g);if(Qr){const Fs={},Cn=Qr[1],Yn=Qr[2].replace(/[\\:]:/g,":"),ki=Qr[3],js=Qr[4];if("!"===Cn&&(an.attributesRequired=an.attributesRequired||[],an.attributesRequired.push(Yn),Fs.required=!0),"-"===Cn)return delete cs[Yn],void Oa.splice(lt.inArray(Oa,Yn),1);if(ki&&("="===ki?(an.attributesDefault=an.attributesDefault||[],an.attributesDefault.push({name:Yn,value:js}),Fs.defaultValue=js):"~"===ki?(an.attributesForced=an.attributesForced||[],an.attributesForced.push({name:Yn,value:js}),Fs.forcedValue=js):"<"===ki&&(Fs.validValues=lt.makeMap(js,"?"))),$o.test(Yn)){const _i=Fs;an.attributePatterns=an.attributePatterns||[],_i.pattern=th(Yn),an.attributePatterns.push(_i)}else cs[Yn]||Oa.push(Yn),cs[Yn]=Fs}})})(Gr,zn),sn&&(zn.outputName=Pe),"@"===Pe){if(!ee.isNone())return[];ee=k.some(zn)}return[sn?{name:Pe,element:zn,aliasName:sn}:{name:Pe,element:zn}]}return[]})})(te,yt??""),({name:ee,element:ve,aliasName:De})=>{if(De&&(n[De]=ve),ce.test(ee)){const ht=ve;ht.pattern=th(ee),o.push(ht)}else n[ee]=ve})},B=yt=>{o=[],Z(ln(n),te=>{delete n[te]}),W(yt)},I=(yt,te)=>{var ce,ee;delete yc.text_block_elements,delete yc.block_elements;const ve=!!te.extends&&!_e(te.extends),De=te.extends;if(r[yt]=De?r[De]:{},s[yt]=De??yt,S[yt.toUpperCase()]={},S[yt]={},ve||(R[yt.toUpperCase()]={},R[yt]={}),De&&!n[yt]&&n[De]){const ht=(It=>{const Ce=Pe=>{return it(Pe)?re(Pe,Ce):Yt(sn=Pe)&&sn.source&&"[object RegExp]"===Object.prototype.toString.call(sn)?new RegExp(Pe.source,Pe.flags):Yt(Pe)?fs(Pe,Ce):Pe;var sn};return Ce(It)})(n[De]);delete ht.removeEmptyAttrs,delete ht.removeEmpty,n[yt]=ht}else n[yt]={attributesOrder:[],attributes:{}};if(it(te.attributes)){const ht=Ce=>{It.attributesOrder.push(Ce),It.attributes[Ce]={}},It=null!==(ce=n[yt])&&void 0!==ce?ce:{};delete It.attributesDefault,delete It.attributesForced,delete It.attributePatterns,delete It.attributesRequired,It.attributesOrder=[],It.attributes={},Z(te.attributes,Ce=>{const Pe=eh(l);Lu(Ce).each(({preset:sn,name:sr})=>{sn?"global"===sr&&Z(Pe,ht):ht(sr)})}),n[yt]=It}if(En(te.padEmpty)){const ht=null!==(ee=n[yt])&&void 0!==ee?ee:{};ht.paddEmpty=te.padEmpty,n[yt]=ht}if(it(te.children)){const ht={},It=Pe=>{ht[Pe]={}},Ce=Pe=>{rh(l,Pe).each(sn=>{Z(sn,It)})};Z(te.children,Pe=>{Lu(Pe).each(({preset:sn,name:sr})=>{sn?Ce(sr):It(sr)})}),r[yt]=ht}De&&we(r,(ht,It)=>{ht[De]&&(r[It]=ht=oh({},r[It]),ht[yt]=ht[De])})},z=yt=>{Yt(yt)?we(yt,(te,ce)=>I(ce,te)):Tt(yt)&&Z((ce=>{const ee=/^(~)?(.+)$/;return Qe(An(ce,","),ve=>{const De=ee.exec(ve);return De?[{cloneName:"~"===De[1]?"span":"div",name:De[2]}]:[]})})(yt??""),({name:ce,cloneName:ee})=>{I(ce,{extends:ee})})},G=yt=>{Z((te=>{const ce=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Qe(An(te,","),ee=>{const ve=ce.exec(ee);if(ve){const De=ve[1];return[{operation:De?(It=>"-"===It?"remove":"add")(De):"replace",name:ve[2],validChildren:Qe(An(ve[3],"|"),It=>Lu(It).toArray())}]}return[]})})(yt??""),({operation:te,name:ce,validChildren:ee})=>{const ve="replace"===te?{"#comment":{}}:r[ce],De=ht=>{"remove"===te?delete ve[ht]:ve[ht]={}};Z(ee,({preset:ht,name:It})=>{ht?rh(l,It).each(Pe=>{Z(Pe,De)}):De(It)}),r[ce]=ve})},st=yt=>{const te=n[yt];if(te)return te;let ce=o.length;for(;ce--;){const ee=o[ce];if(ee.pattern.test(yt))return ee}},rt=mt(u),wt=mt(f),At=mt(p),Bt=mt(h),xt=mt(R),pt=mt(A),Et=mt(L),F=mt(Object.seal(v)),U=mt(g),X=mt(S),Q=mt(E),gt=mt(b),ft=mt(P),Dt=mt(j),Ut=mt(Object.seal(a)),Gt=(yt,te)=>{const ce=st(yt);if(ce){if(!te)return!0;{if(ce.attributes[te])return!0;const ee=ce.attributePatterns;if(ee){let ve=ee.length;for(;ve--;)if(ee[ve].pattern.test(te))return!0}}}return!1},_e=yt=>zt(xt(),yt),ze=yt=>!Ve(yt,"#")&&Gt(yt)&&!_e(yt),yr=mt(s);return t.valid_elements?(B(t.valid_elements),co(c,(yt,te)=>{r[te]=yt.children})):(co(c,(yt,te)=>{n[te]={attributes:yt.attributes,attributesOrder:yt.attributesOrder},r[te]=yt.children}),co(An("strong/b em/i"),yt=>{const te=An(yt,"/");n[te[1]].outputName=te[0]}),co(L,(yt,te)=>{n[te]&&(t.padd_empty_block_inline_children&&(n[te].paddInEmptyBlock=!0),n[te].removeEmpty=!0)}),co(An("ol ul blockquote a table tbody"),yt=>{n[yt]&&(n[yt].removeEmpty=!0)}),co(An("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),yt=>{n[yt]&&(n[yt].paddEmpty=!0)}),co(An("span"),yt=>{n[yt].removeEmptyAttrs=!0})),delete n.svg,z(t.custom_elements),G(t.valid_children),W(t.extended_valid_elements),G("+ol[ul|ol],+ul[ul|ol]"),co({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(yt,te)=>{n[te]&&(n[te].parentsRequired=An(yt))}),t.invalid_elements&&co(sh(t.invalid_elements),yt=>{n[yt]&&delete n[yt]}),st("span")||W("span[!data-mce-type|*]"),{type:l,children:r,elements:n,getValidStyles:rt,getValidClasses:At,getBlockElements:xt,getInvalidStyles:wt,getVoidElements:F,getTextBlockElements:pt,getTextInlineElements:Et,getBoolAttrs:Bt,getElementRule:st,getSelfClosingElements:U,getNonEmptyElements:X,getMoveCaretBeforeOnEnterElements:Q,getWhitespaceElements:gt,getTransparentElements:ft,getSpecialElements:Ut,isValidChild:(yt,te)=>{const ce=r[yt.toLowerCase()];return!(!ce||!ce[te.toLowerCase()])},isValid:Gt,isBlock:_e,isInline:ze,isWrapper:yt=>zt(Dt(),yt)||ze(yt),getCustomElements:yr,addValidElements:W,setValidElements:B,addCustomElements:z,addValidChildren:G}},Iu=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},sk=t=>{return{value:(n=Iu(t.red)+Iu(t.green)+Iu(t.blue),Xo(n,"#").toUpperCase())};var n},lh=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,ch=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,dh=(t,e,n,r)=>((o,s,a,i)=>({red:o,green:s,blue:a,alpha:i}))(parseInt(t,10),parseInt(e,10),parseInt(n,10),parseFloat(r)),uh=t=>{const e=lh.exec(t);if(null!==e)return k.some(dh(e[1],e[2],e[3],"1"));const n=ch.exec(t);return null!==n?k.some(dh(n[1],n[2],n[3],n[4])):k.none()},ak=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,Vi=t=>uh(t).map(sk).map(e=>"#"+e.value).getOr(t),Fu=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let f=0;f<c.length;f++)s[c[f]]="\ufeff"+f,s["\ufeff"+f]=c[f];const u={parse:f=>{const p={};let b=!1;const g=t.url_converter,v=t.url_converter_scope||u,h=(B,I,z)=>{const G=p[B+"-top"+I];if(!G)return;const st=p[B+"-right"+I];if(!st)return;const rt=p[B+"-bottom"+I];if(!rt)return;const wt=p[B+"-left"+I];if(!wt)return;const At=[G,st,rt,wt];let Bt=At.length-1;for(;Bt--&&At[Bt]===At[Bt+1];);Bt>-1&&z||(p[B+I]=-1===Bt?At[0]:At.join(" "),delete p[B+"-top"+I],delete p[B+"-right"+I],delete p[B+"-bottom"+I],delete p[B+"-left"+I])},C=B=>{const I=p[B];if(!I)return;const z=I.indexOf(",")>-1?[I]:I.split(" ");let G=z.length;for(;G--;)if(z[G]!==z[0])return!1;return p[B]=z[0],!0},S=B=>(b=!0,s[B]),E=(B,I)=>(b&&(B=B.replace(/\uFEFF[0-9]/g,z=>s[z])),I||(B=B.replace(/\\([\'\";:])/g,"$1")),B),N=B=>String.fromCharCode(parseInt(B.slice(1),16)),A=B=>B.replace(/\\[0-9a-f]+/gi,N),R=(B,I,z,G,st,rt)=>{if(st=st||rt)return"'"+(st=E(st)).replace(/\'/g,"\\'")+"'";if(I=E(I||z||G||""),!t.allow_script_urls){const wt=I.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(wt)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(wt))return""}return g&&(I=g.call(v,I,"style")),"url('"+I.replace(/\'/g,"\\'")+"')"};if(f){let B;for(f=(f=f.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,S).replace(/\"[^\"]+\"|\'[^\']+\'/g,I=>I.replace(/[;:]/g,S));B=r.exec(f);){r.lastIndex=B.index+B[0].length;let I=B[1].replace(o,"").toLowerCase(),z=B[2].replace(o,"");if(I&&z){if(I=A(I),z=A(z),-1!==I.indexOf("\ufeff")||-1!==I.indexOf('"')||!t.allow_script_urls&&("behavior"===I||/expression\s*\(|\/\*|\*\//.test(z)))continue;"font-weight"===I&&"700"===z?z="bold":"color"!==I&&"background-color"!==I||(z=z.toLowerCase()),"rgb"==(lh.test(W=z)?"rgb":ch.test(W)?"rgba":"other")&&uh(z).each(G=>{z=Vi(ak(G)).toLowerCase()}),z=z.replace(n,R),p[I]=b?E(z,!0):z}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),P="border-style",j="border-color",C(L="border-width")&&C(P)&&C(j)&&(p.border=p[L]+" "+p[P]+" "+p[j],delete p[L],delete p[P],delete p[j]),"medium none"===p.border&&delete p.border,"none"===p["border-image"]&&delete p["border-image"]}var L,P,j,W;return p},serialize:(f,p)=>{let b="";const g=(v,h)=>{const C=h[v];if(C)for(let S=0,E=C.length;S<E;S++){const N=C[S],A=f[N];A&&(b+=(b.length>0?" ":"")+N+": "+A+";")}};return p&&a?(g("*",a),g(p,a)):we(f,(v,h)=>{v&&((C,S)=>{if(!i||!S)return!0;let E=i["*"];return!(E&&E[C]||(E=i[S],E&&E[C]))})(h,p)&&(b+=(b.length>0?" ":"")+h+": "+v+";")}),b}};return u},ik={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},fh=(t,e)=>{const n=e??{};for(const r in t)zt(ik,r)||(n[r]=t[r]);return ct(t.composedPath)&&(n.composedPath=()=>t.composedPath()),ct(t.getModifierState)&&(n.getModifierState=r=>t.getModifierState(r)),ct(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},ju=(t,e,n,r)=>{var o;const s=fh(e,r);return s.type=t,Se(s.target)&&(s.target=null!==(o=s.srcElement)&&void 0!==o?o:n),(Se((a=e).preventDefault)||(i=a)instanceof Event||he(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=je,he(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=je,he(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=je,s.stopPropagation()},(a=>a.isDefaultPrevented===je||a.isDefaultPrevented===xe)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?je:xe,s.isPropagationStopped=!0===s.cancelBubble?je:xe,s.isImmediatePropagationStopped=xe)),s;var a,i},lk=/^(?:mouse|contextmenu)|click/,zu=(t,e,n,r)=>{t.addEventListener(e,n,r||!1)},Cc=(t,e,n,r)=>{t.removeEventListener(e,n,r||!1)},Ki=(t,e)=>{const n=ju(t.type,t,document,e);if(ct(r=t)&&lk.test(r.type)&&Ie(t.pageX)&&!Ie(t.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,s=r.body,a=n;a.pageX=t.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}var r;return n},ck=(t,e,n)=>{const r=t.document,o={type:"ready"};if(n.domLoaded)return void e(o);const s=()=>{Cc(t,"DOMContentLoaded",s),Cc(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(o)),t=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?s():zu(t,"DOMContentLoaded",s),n.domLoaded||zu(t,"load",s)};class ia{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,r,o){const s=this;let a;const i=window,l=p=>{s.executeHandlers(Ki(p||i.event),c)};if(!e||ot(e)||Ss(e))return r;let c;e[s.expando]?c=e[s.expando]:(c=s.count++,e[s.expando]=c,s.events[c]={}),o=o||e;const u=n.split(" ");let f=u.length;for(;f--;){let p=u[f],b=l,g=!1,v=!1;"DOMContentLoaded"===p&&(p="ready"),s.domLoaded&&"ready"===p&&"complete"===e.readyState?r.call(o,Ki({type:p})):(s.hasFocusIn||"focusin"!==p&&"focusout"!==p||(g=!0,v="focusin"===p?"focus":"blur",b=h=>{const C=Ki(h||i.event);C.type="focus"===C.type?"focusin":"focusout",s.executeHandlers(C,c)}),a=s.events[c][p],a?"ready"===p&&s.domLoaded?r(Ki({type:p})):a.push({func:r,scope:o}):(s.events[c][p]=a=[{func:r,scope:o}],a.fakeName=v,a.capture=g,a.nativeHandler=b,"ready"===p?ck(e,b,s):zu(e,v||p,b,g)))}return e=a=null,r}unbind(e,n,r){if(!e||ot(e)||Ss(e))return this;const o=e[this.expando];if(o){let s=this.events[o];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(r){let u=c.length;for(;u--;)if(c[u].func===r){const f=c.nativeHandler,p=c.fakeName,b=c.capture,g=c.slice(0,u).concat(c.slice(u+1));g.nativeHandler=f,g.fakeName=p,g.capture=b,s[l]=g}}r&&0!==c.length||(delete s[l],Cc(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else we(s,(a,i)=>{Cc(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(zt(s,a))return this;delete this.events[o];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,r){return this.dispatch(e,n,r)}dispatch(e,n,r){if(!e||ot(e)||Ss(e))return this;const o=Ki({type:n,target:e},r);do{const s=e[this.expando];s&&this.executeHandlers(o,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}clean(e){if(!e||ot(e)||Ss(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let r=n.length;for(;r--;)(e=n[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const r=this.events[n],o=r&&r[e.type];if(o)for(let s=0,a=o.length;s<a;s++){const i=o[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}ia.Event=new ia;const Uu=lt.each,dk=lt.grep,Hu="data-mce-style",uk=lt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Xi=(t,e,n)=>{Se(n)||""===n?m(t,e):Ze(t,e,n)},mh=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),qa=(t,e)=>{let n=0;if(t)for(let r=t.nodeType,o=t.previousSibling;o;o=o.previousSibling){const s=o.nodeType;(!e||!ot(o)||s!==r&&o.data.length)&&(n++,r=s)}return n},ph=(t,e)=>{const n=tr(e,"style"),r=t.serialize(t.parse(n),fe(e));Xi(e,Hu,r)},gh=(t,e,n)=>{const r=mh(e);var o,s;Se(n)||""===n?$t(t,r):M(t,r,(s=r,x(o=n)?zt(uk,s)?o+"":o+"px":o))},Be=(t,e={})=>{const n={},r=window,o={};let s=0;const a=Xg.forElement(D(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:Es({}),c=Fu({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),u=e.ownEvents?new ia:ia.Event,f=l.getBlockElements(),p=F=>F&&t&&Tt(F)?t.getElementById(F):F,b=F=>{const U=p(F);return ct(U)?D(U):null},g=(F,U,X="")=>{let Q;const gt=b(F);if(ct(gt)&&Hn(gt)){const ft=Et[U];Q=ft&&ft.get?ft.get(gt.dom,U):tr(gt,U)}return ct(Q)?Q:X},v=F=>{const U=p(F);return Se(U)?[]:U.attributes},h=(F,U,X)=>{P(F,Q=>{if(_t(Q)){const gt=D(Q),ft=""===X?null:X,Dt=tr(gt,U),Ut=Et[U];Ut&&Ut.set?Ut.set(gt.dom,ft,U):Xi(gt,U,ft),Dt!==ft&&e.onSetAttrib&&e.onSetAttrib({attrElm:gt.dom,attrName:U,attrValue:ft})}})},C=()=>e.root_element||t.body,S=(F,U)=>((X,Q,gt)=>{let ft=0,Dt=0;const Ut=X.ownerDocument;if(gt=gt||X,Q){if(gt===X&&Q.getBoundingClientRect&&"static"===tt(D(X),"position")){const _e=Q.getBoundingClientRect();return ft=_e.left+(Ut.documentElement.scrollLeft||X.scrollLeft)-Ut.documentElement.clientLeft,Dt=_e.top+(Ut.documentElement.scrollTop||X.scrollTop)-Ut.documentElement.clientTop,{x:ft,y:Dt}}let Gt=Q;for(;Gt&&Gt!==gt&&Gt.nodeType&&!Vg(Gt,gt);)ft+=Gt.offsetLeft||0,Dt+=Gt.offsetTop||0,Gt=Gt.offsetParent;for(Gt=Q.parentNode;Gt&&Gt!==gt&&Gt.nodeType&&!Vg(Gt,gt);)ft-=Gt.scrollLeft||0,Dt-=Gt.scrollTop||0,Gt=Gt.parentNode;Dt+=(_e=D(Q),ZE.isFirefox()&&"table"===fe(_e)?Wg(Ee(_e)).filter(ze=>"caption"===fe(ze)).bind(ze=>Wg(er(ze)).map(yr=>yr.dom.offsetTop<=ze.dom.offsetTop?-ze.dom.offsetHeight:0)).getOr(0):0)}var _e;return{x:ft,y:Dt}})(t.body,p(F),U),E=(F,U,X)=>{const Q=p(F);var gt;if(!Se(Q)&&(es(Q)||_t(gt=Q)&&"http://www.w3.org/2000/svg"===gt.namespaceURI))return X?tt(D(Q),mh(U)):("float"===(U=U.replace(/-(\D)/g,(ft,Dt)=>Dt.toUpperCase()))&&(U="cssFloat"),Q.style?Q.style[U]:void 0)},N=F=>{const U=p(F);if(!U)return{w:0,h:0};let X=E(U,"width"),Q=E(U,"height");return X&&-1!==X.indexOf("px")||(X="0"),Q&&-1!==Q.indexOf("px")||(Q="0"),{w:parseInt(X,10)||U.offsetWidth||U.clientWidth,h:parseInt(Q,10)||U.offsetHeight||U.clientHeight}},A=(F,U)=>{if(!F)return!1;const X=it(F)?F:[F];return Ae(X,Q=>cn(D(Q),U))},R=(F,U,X,Q)=>{const gt=[];let ft=p(F);Q=void 0===Q;const Dt=X||("BODY"!==C().nodeName?C().parentNode:null);if(Tt(U))if("*"===U)U=_t;else{const Ut=U;U=Gt=>A(Gt,Ut)}for(;ft&&!(ft===Dt||Se(ft.nodeType)||$i(ft)||xu(ft));){if(!U||U(ft)){if(!Q)return[ft];gt.push(ft)}ft=ft.parentNode}return Q?gt:null},L=(F,U,X)=>{let Q=U;if(F){Tt(U)&&(Q=gt=>A(gt,U));for(let gt=F[X];gt;gt=gt[X])if(he(Q)&&Q(gt))return gt}return null},P=function(F,U,X){const Q=X??this;if(it(F)){const gt=[];return Uu(F,(ft,Dt)=>{const Ut=p(ft);Ut&&gt.push(U.call(Q,Ut,Dt))}),gt}{const gt=p(F);return!!gt&&U.call(Q,gt)}},j=(F,U)=>{P(F,X=>{we(U,(Q,gt)=>{h(X,gt,Q)})})},W=(F,U)=>{P(F,X=>{const Q=D(X);Pn(Q,U)})},B=(F,U,X,Q,gt)=>P(F,ft=>{const Dt=Tt(U)?t.createElement(U):U;return ct(X)&&j(Dt,X),Q&&(!Tt(Q)&&Q.nodeType?Dt.appendChild(Q):Tt(Q)&&W(Dt,Q)),gt?Dt:ft.appendChild(Dt)}),I=(F,U,X)=>B(t.createElement(F),F,U,X,!0),z=aa.encodeAllRaw,G=(F,U)=>P(F,X=>{const Q=D(X);return U&&Z(Ee(Q),gt=>{qn(gt)&&0===gt.dom.length?ue(gt):jt(Q,gt)}),ue(Q),Q.dom}),st=(F,U,X)=>{P(F,Q=>{if(_t(Q)){const gt=D(Q),ft=U.split(" ");Z(ft,Dt=>{var Ut,Gt,ze,yr;ct(X)?(X?H:et)(gt,Dt):(Gt=Dt,_(Ut=gt)?Ut.dom.classList.toggle(Gt):(yr=Gt,Rt(T(ze=Ut),yr)?q(ze,yr):O(ze,yr)),K(Ut))})}})},rt=(F,U,X)=>P(U,Q=>{var gt;const ft=it(U)?F.cloneNode(!0):F;return X&&Uu(dk(Q.childNodes),Dt=>{ft.appendChild(Dt)}),null===(gt=Q.parentNode)||void 0===gt||gt.replaceChild(ft,Q),Q}),wt=()=>t.createRange(),At=(F,U,X,Q)=>{if(it(F)){let gt=F.length;const ft=[];for(;gt--;)ft[gt]=At(F[gt],U,X,Q);return ft}return!e.collect||F!==t&&F!==r||i.push([F,U,X,Q]),u.bind(F,U,X,Q||pt)},Bt=(F,U,X)=>{if(it(F)){let Q=F.length;const gt=[];for(;Q--;)gt[Q]=Bt(F[Q],U,X);return gt}if(i.length>0&&(F===t||F===r)){let Q=i.length;for(;Q--;){const[gt,ft,Dt]=i[Q];F!==gt||U&&U!==ft||X&&X!==Dt||u.unbind(gt,ft,Dt)}}return u.unbind(F,U,X)},xt=F=>{if(F&&es(F)){const U=F.getAttribute("data-mce-contenteditable");return U&&"inherit"!==U?U:"inherit"!==F.contentEditable?F.contentEditable:null}return null},pt={doc:t,settings:e,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:u,isBlock:F=>Tt(F)?zt(f,F):_t(F)&&(zt(f,F.nodeName)||oa(l,F)),root:null,clone:(F,U)=>F.cloneNode(U),getRoot:C,getViewPort:F=>{const U=Rg(F);return{x:U.x,y:U.y,w:U.width,h:U.height}},getRect:F=>{const U=p(F),X=S(U),Q=N(U);return{x:X.x,y:X.y,w:Q.w,h:Q.h}},getSize:N,getParent:(F,U,X)=>{const Q=R(F,U,X,!1);return Q&&Q.length>0?Q[0]:null},getParents:R,get:p,getNext:(F,U)=>L(F,U,"nextSibling"),getPrev:(F,U)=>L(F,U,"previousSibling"),select:(F,U)=>{var X,Q;const gt=null!==(Q=null!==(X=p(U))&&void 0!==X?X:e.root_element)&&void 0!==Q?Q:t;return he(gt.querySelectorAll)?wn(gt.querySelectorAll(F)):[]},is:A,add:B,create:I,createHTML:(F,U,X="")=>{let Q="<"+F;for(const gt in U)fn(U,gt)&&(Q+=" "+gt+'="'+z(U[gt])+'"');return hs(X)&&zt(l.getVoidElements(),F)?Q+" />":Q+">"+X+"</"+F+">"},createFragment:F=>{const U=t.createElement("div"),X=t.createDocumentFragment();let Q;for(X.appendChild(U),F&&(U.innerHTML=F);Q=U.firstChild;)X.appendChild(Q);return X.removeChild(U),X},remove:G,setStyle:(F,U,X)=>{P(F,Q=>{const gt=D(Q);gh(gt,U,X),e.update_styles&&ph(c,gt)})},getStyle:E,setStyles:(F,U)=>{P(F,X=>{const Q=D(X);we(U,(gt,ft)=>{gh(Q,ft,gt)}),e.update_styles&&ph(c,Q)})},removeAllAttribs:F=>P(F,U=>{const X=U.attributes;for(let Q=X.length-1;Q>=0;Q--)U.removeAttributeNode(X.item(Q))}),setAttrib:h,setAttribs:j,getAttrib:g,getPos:S,parseStyle:F=>c.parse(F),serializeStyle:(F,U)=>c.serialize(F,U),addStyle:F=>{if(pt!==Be.DOM&&t===document){if(n[F])return;n[F]=!0}let U=t.getElementById("mceDefaultStyles");if(!U){U=t.createElement("style"),U.id="mceDefaultStyles",U.type="text/css";const X=t.head;X.firstChild?X.insertBefore(U,X.firstChild):X.appendChild(U)}U.styleSheet?U.styleSheet.cssText+=F:U.appendChild(t.createTextNode(F))},loadCSS:F=>{F||(F=""),Z(F.split(","),U=>{o[U]=!0,a.load(U).catch(kt)})},addClass:(F,U)=>{st(F,U,!0)},removeClass:(F,U)=>{st(F,U,!1)},hasClass:(F,U)=>{const X=b(F),Q=U.split(" ");return ct(X)&&ar(Q,gt=>at(X,gt))},toggleClass:st,show:F=>{P(F,U=>$t(D(U),"display"))},hide:F=>{P(F,U=>M(D(U),"display","none"))},isHidden:F=>{const U=b(F);return ct(U)&&No(dt(U,"display"),"none")},uniqueId:F=>(F||"mce_")+s++,setHTML:W,getOuterHTML:F=>{const U=b(F);return ct(U)?_t(U.dom)?U.dom.outerHTML:(X=>{const Q=Pt("div"),gt=D(X.dom.cloneNode(!0));return Kt(Q,gt),Wn(Q)})(U):""},setOuterHTML:(F,U)=>{P(F,X=>{_t(X)&&(X.outerHTML=U)})},decode:aa.decode,encode:z,insertAfter:(F,U)=>{const X=p(U);return P(F,Q=>{const gt=X?.parentNode,ft=X?.nextSibling;return gt&&(ft?gt.insertBefore(Q,ft):gt.appendChild(Q)),Q})},replace:rt,rename:(F,U)=>{if(F.nodeName!==U.toUpperCase()){const X=I(U);return Uu(v(F),Q=>{h(X,Q.nodeName,g(F,Q.nodeName))}),rt(X,F,!0),X}return F},findCommonAncestor:(F,U)=>{let X=F;for(;X;){let Q=U;for(;Q&&X!==Q;)Q=Q.parentNode;if(X===Q)break;X=X.parentNode}return!X&&F.ownerDocument?F.ownerDocument.documentElement:X},run:P,getAttribs:v,isEmpty:(F,U,X)=>Mt(U)?ns(l,F,{...X,isContent:gt=>{const ft=gt.nodeName.toLowerCase();return!!U[ft]}}):ns(l,F,X),createRng:wt,nodeIndex:qa,split:(F,U,X)=>{let Q,gt,ft=wt();if(F&&U&&F.parentNode&&U.parentNode){const Dt=F.parentNode;return ft.setStart(Dt,qa(F)),ft.setEnd(U.parentNode,qa(U)),Q=ft.extractContents(),ft=wt(),ft.setStart(U.parentNode,qa(U)+1),ft.setEnd(Dt,qa(F)+1),gt=ft.extractContents(),Dt.insertBefore(Ou(pt,Q,l),F),Dt.insertBefore(X||U,F),Dt.insertBefore(Ou(pt,gt,l),F),G(F),X||U}},bind:At,unbind:Bt,fire:(F,U,X)=>u.dispatch(F,U,X),dispatch:(F,U,X)=>u.dispatch(F,U,X),getContentEditable:xt,getContentEditableParent:F=>{const U=C();let X=null;for(let Q=F;Q&&Q!==U&&(X=xt(Q),null===X);Q=Q.parentNode);return X},isEditable:F=>{if(ct(F)){const U=_t(F)?F:F.parentElement;return ct(U)&&es(U)&&io(D(U))}return!1},destroy:()=>{if(i.length>0){let F=i.length;for(;F--;){const[U,X,Q]=i[F];u.unbind(U,X,Q)}}we(o,(F,U)=>{a.unload(U),delete o[U]})},isChildOf:(F,U)=>F===U||U.contains(F),dumpRng:F=>"startContainer: "+F.startContainer.nodeName+", startOffset: "+F.startOffset+", endContainer: "+F.endContainer.nodeName+", endOffset: "+F.endOffset},Et=((F,U,X)=>{const Q=U.keep_values,ft={style:{set:(Dt,Ut)=>{const Gt=D(Dt);Q&&Xi(Gt,Hu,Ut),m(Gt,"style"),Tt(Ut)&&$(Gt,F.parse(Ut))},get:Dt=>{const Ut=D(Dt),Gt=tr(Ut,Hu)||tr(Ut,"style");return F.serialize(F.parse(Gt),fe(Ut))}}};return Q&&(ft.href=ft.src={set:(Dt,Ut,Gt)=>{const _e=D(Dt);he(U.url_converter)&&ct(Ut)&&(Ut=U.url_converter.call(U.url_converter_scope||X(),String(Ut),Gt,Dt)),Xi(_e,"data-mce-"+Gt,Ut),Xi(_e,Gt,Ut)},get:(Dt,Ut)=>{const Gt=D(Dt);return tr(Gt,"data-mce-"+Ut)||tr(Gt,Ut)}}),ft})(c,e,mt(pt));return pt};Be.DOM=Be(document),Be.nodeIndex=qa;const fk=Be.DOM;class os{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,r)=>{const o=fk;let s;const a=()=>{o.remove(i),s&&(s.onerror=s.onload=s=null)},i=o.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=lt._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:r,reject:o})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(l,c)=>{Re(n.scriptLoadedCallbacks,c).each(u=>{Z(u,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},o=l=>{const c=Xt(l,u=>"rejected"===u.status);return c.length>0?Promise.reject(Qe(c,({reason:u})=>it(u)?u:[u])):Promise.resolve()},s=l=>Promise.allSettled(re(l,c=>2===n.states[c]?(r("resolve",c),Promise.resolve()):3===n.states[c]?(r("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,r("resolve",c);const u=n.queue;return u.length>0?(n.queue=[],s(u).then(o)):Promise.resolve()},()=>(n.states[c]=3,r("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return k.from(u).each(Qn),o(c)})),i=Pa(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,c)})}):a(i)}}os.ScriptLoader=new os;const Yi={},qu=bn("en"),hh=()=>Re(Yi,qu.get()),uo={getData:()=>fs(Yi,t=>({...t})),setCode:t=>{t&&qu.set(t)},getCode:()=>qu.get(),add:(t,e)=>{let n=Yi[t];n||(Yi[t]=n={});const r=re(ln(e),o=>o.toLowerCase());we(e,(o,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const c=i.indexOf(l);return-1!==c&&i.indexOf(l,c+1)>c})(r,a)?(zt(e,a)||(n[a]=o),n[s]=o):n[a]=o})},translate:t=>{const e=hh().getOr({}),n=i=>he(i)?Object.prototype.toString.call(i):r(i)?"":""+i,r=i=>""===i||null==i,o=i=>{const l=n(i);return zt(e,l)?n(e[l]):Re(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(r(t))return"";if(Yt(a=t)&&zt(a,"raw"))return n(t.raw);var a,i;if(it(i=t)&&i.length>1){const i=t.slice(1);return s(o(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>zt(i,c)?n(i[c]):l))}return s(o(t))},isRtl:()=>hh().bind(t=>Re(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>zt(Yi,t)},Vn=()=>{const t=[],e={},n={},r=[],o=(l,c)=>{const u=Xt(r,f=>f.name===l&&f.state===c);Z(u,f=>f.resolve())},s=l=>zt(e,l),a=(l,c)=>{const u=uo.getCode();!u||c&&-1===(","+(c||"")+",").indexOf(","+u+",")||os.ScriptLoader.add(e[l]+"/langs/"+u+".js")},i=(l,c="added")=>"added"===c&&zt(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(u=>{r.push({name:l,state:c,resolve:u})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==Vn.languageLoad&&(s(l)?a(l,c):i(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},o(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>Tt(c)?Tt(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let u=Tt(c)?c:c.prefix+c.resource+c.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=Vn.baseURL+"/"+u),e[l]=u.substring(0,u.lastIndexOf("/"));const f=()=>(o(l,"loaded"),Promise.resolve());return n[l]?f():os.ScriptLoader.add(u).then(f)},waitFor:i}};Vn.languageLoad=!0,Vn.baseURL="",Vn.PluginManager=Vn(),Vn.ThemeManager=Vn(),Vn.ModelManager=Vn();const xc=(t,e)=>{let n=null;return{cancel:()=>{Jt(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Jt(n)&&(n=setTimeout(()=>{n=null,t.apply(null,r)},e))}}},$u=(t,e)=>{let n=null;const r=()=>{Jt(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,t.apply(null,o)},e)}}},Gi=mt("mce-annotation"),la=mt("data-mce-annotation"),$a=mt("data-mce-annotation-uid"),Qi=mt("data-mce-annotation-active"),Zi=mt("data-mce-annotation-classes"),Ji=mt("data-mce-annotation-attrs"),bh=t=>e=>Ft(e,t),vh=(t,e)=>{const n=t.selection.getRng(),r=D(n.startContainer),o=D(t.getBody()),s=e.fold(()=>"."+Gi(),i=>`[${la()}="${i}"]`),a=$e(r,n.startOffset).getOr(r);return ao(a,s,bh(o)).bind(i=>ro(i,`${$a()}`).bind(l=>ro(i,`${la()}`).map(c=>{const u=Ch(t,l);return{uid:l,name:c,elements:u}})))},yh=(t,e)=>{return d(t,"data-mce-bogus")||(n=t,o=bh(e),Ro(n,'[data-mce-bogus="all"]',o).isSome());var n,o},Ch=(t,e)=>{const n=D(t.getBody()),r=Mn(n,`[${$a()}="${e}"]`);return Xt(r,o=>!yh(o,n))},xh=(t,e)=>{const n=D(t.getBody()),r=Mn(n,`[${la()}="${e}"]`),o={};return Z(r,s=>{if(!yh(s,n)){const a=tr(s,$a()),i=Re(o,a).getOr([]);o[a]=i.concat([s])}}),o};let wh=0;const tl=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return wh++,t+"_"+n+wh+String(e)},Sh=(t,e)=>D(t.dom.cloneNode(e)),ca=t=>Sh(t,!1),Eh=t=>Sh(t,!0),kh=(t,e,n=xe)=>{const r=new gn(t,e),o=s=>{let a;do{a=r[s]()}while(a&&!ot(a)&&!n(a));return k.from(a).filter(ot)};return{current:()=>k.from(r.current()).filter(ot),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},da=(t,e)=>{const n=e||(o=>t.isBlock(o)||He(o)||Me(o)),r=(o,s,a,i)=>{if(ot(o)){const l=i(o,s,o.data);if(-1!==l)return k.some({container:o,offset:l})}return a().bind(l=>r(l.container,l.offset,a,i))};return{backwards:(o,s,a,i)=>{const l=kh(o,i??t.getRoot(),n);return r(o,s,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(o,s,a,i)=>{const l=kh(o,i??t.getRoot(),n);return r(o,s,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},Wu=((t,e)=>{const n=r=>t(r)?k.from(r.dom.nodeValue):k.none();return{get:r=>{if(!t(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!t(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(qn),wc=t=>Wu.get(t),Wa=t=>{let e;return n=>(e=e||Bn(t,je),zt(e,fe(n)))},ua=t=>Hn(t)&&"br"===fe(t),_h=Wa(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Vu=Wa(["ul","ol","dl"]),Va=Wa(["li","dd","dt"]),mk=Wa(["thead","tbody","tfoot"]),el=Wa(["td","th"]),Sc=Wa(["pre","script","textarea","style"]),Ka=()=>{const t=Pt("br");return Ze(t,"data-mce-bogus","1"),t},ks=t=>{ae(t),Kt(t,Ka())},vn="\ufeff",Ec=yu,br=t=>t.replace(/\uFEFF/g,""),pk=_t,Xa=ot,Ya=t=>(Xa(t)&&(t=t.parentNode),pk(t)&&t.hasAttribute("data-mce-caret")),_s=t=>Xa(t)&&Ec(t.data),Tr=t=>Ya(t)||_s(t),Nh=t=>t.firstChild!==t.lastChild||!He(t.firstChild),Ku=t=>{const e=t.container();return!!ot(e)&&(e.data.charAt(t.offset())===vn||t.isAtStart()&&_s(e.previousSibling))},Xu=t=>{const e=t.container();return!!ot(e)&&(e.data.charAt(t.offset()-1)===vn||t.isAtEnd()&&_s(e.nextSibling))},kc=t=>Xa(t)&&t.data[0]===vn,_c=t=>Xa(t)&&t.data[t.data.length-1]===vn,Yu=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const r=e.getElementsByTagName("br"),o=r[r.length-1];na(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Ah=t=>Ya(t.startContainer),Ga=Math.round,fa=t=>t?{left:Ga(t.left),top:Ga(t.top),bottom:Ga(t.bottom),right:Ga(t.right),width:Ga(t.width),height:Ga(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Th=(t,e)=>(t=fa(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Rh=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,nl=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Rh(e.top-t.bottom,t,e)},rl=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&Rh(e.bottom-t.top,t,e),Oh=(t,e,n)=>{const r=Math.max(Math.min(e,t.left+t.width),t.left),o=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-r)*(e-r)+(n-o)*(n-o))},Nc=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},Ns=(t,e)=>{if(_t(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},gk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Bh=t=>Tt(t)&&t.charCodeAt(0)>=768&&gk.test(t),Dh=Vr,hk=Me,bk=He,vk=ot,yk=lo(["script","style","textarea"]),Ph=lo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Ck=lo(["table"]),xk=Tr,fo=t=>!xk(t)&&(vk(t)?!yk(t.parentNode):Ph(t)||bk(t)||Ck(t)||Gu(t)),Gu=t=>{return!(_t(e=t)&&"true"===e.getAttribute("unselectable"))&&hk(t);var e},Lh=(t,e)=>fo(t)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(Gu(o))return!1;if(Dh(o))return!0}return!0})(t,e),Mh=_t,wk=fo,Ih=pc("display","block table"),Sk=pc("float","left right"),ol=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Mh,wk,bo(Sk)),Ek=bo(pc("white-space","pre pre-line pre-wrap")),sl=ot,Qu=He,Fh=Be.nodeIndex,Ac=(t,e)=>e<0&&_t(t)&&t.hasChildNodes()?void 0:Ns(t,e),Zu=t=>t?t.createRange():Be.DOM.createRng(),Ju=t=>Tt(t)&&/[\r\n\t ]/.test(t),jh=t=>!!t.setStart&&!!t.setEnd,tf=t=>{const e=t.startContainer,n=t.startOffset;if(Ju(t.toString())&&Ek(e.parentNode)&&ot(e)){const r=e.data;if(Ju(r[n-1])||Ju(r[n+1]))return!0}return!1},zh=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,As=t=>{var e;let n;const r=t.getClientRects();return n=fa(r.length>0?r[0]:t.getBoundingClientRect()),!jh(t)&&Qu(t)&&zh(n)?(o=>{const s=o.ownerDocument,a=Zu(s),i=s.createTextNode(hn),l=o.parentNode;l.insertBefore(i,o),a.setStart(i,0),a.setEnd(i,1);const c=fa(a.getBoundingClientRect());return l.removeChild(i),c})(t):zh(n)&&jh(t)&&null!==(e=(o=>{const a=o.endContainer,i=o.startOffset,l=o.endOffset;if(o.startContainer===a&&ot(a)&&0===i&&1===l){const c=o.cloneRange();return c.setEndAfter(a),As(c)}return null})(t))&&void 0!==e?e:n},ma=(t,e)=>{const n=Th(t,e);return n.width=1,n.right=n.left+1,n},Y=(t,e,n)=>{const r=()=>(n||(n=(o=>{const s=[],a=u=>{var f,p;0!==u.height&&(s.length>0&&(f=u).left===(p=s[s.length-1]).left&&f.top===p.top&&f.bottom===p.bottom&&f.right===p.right||s.push(u))},i=(u,f)=>{const p=Zu(u.ownerDocument);if(f<u.data.length){if(Bh(u.data[f]))return;if(Bh(u.data[f-1])&&(p.setStart(u,f),p.setEnd(u,f+1),!tf(p)))return void a(ma(As(p),!1))}f>0&&(p.setStart(u,f-1),p.setEnd(u,f),tf(p)||a(ma(As(p),!1))),f<u.data.length&&(p.setStart(u,f),p.setEnd(u,f+1),tf(p)||a(ma(As(p),!0)))},l=o.container(),c=o.offset();if(sl(l))return i(l,c),s;if(Mh(l))if(o.isAtEnd()){const u=Ac(l,c);sl(u)&&i(u,u.data.length),ol(u)&&!Qu(u)&&a(ma(As(u),!1))}else{const u=Ac(l,c);if(sl(u)&&i(u,0),ol(u)&&o.isAtEnd())return a(ma(As(u),!1)),s;const f=Ac(o.container(),o.offset()-1);ol(f)&&!Qu(f)&&(Ih(f)||Ih(u)||!ol(u))&&a(ma(As(f),!1)),ol(u)&&a(ma(As(u),!0))}return s})(Y(t,e))),n);return{container:mt(t),offset:mt(e),toRange:()=>{const o=Zu(t.ownerDocument);return o.setStart(t,e),o.setEnd(t,e),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(sl(t),0===e),isAtEnd:()=>sl(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:o=>o&&t===o.container()&&e===o.offset(),getNode:o=>Ac(t,o?e-1:e)}};Y.fromRangeStart=t=>Y(t.startContainer,t.startOffset),Y.fromRangeEnd=t=>Y(t.endContainer,t.endOffset),Y.after=t=>Y(t.parentNode,Fh(t)+1),Y.before=t=>Y(t.parentNode,Fh(t)),Y.isAbove=(t,e)=>Sn(kn(e.getClientRects()),to(t.getClientRects()),nl).getOr(!1),Y.isBelow=(t,e)=>Sn(to(e.getClientRects()),kn(t.getClientRects()),rl).getOr(!1),Y.isAtStart=t=>!!t&&t.isAtStart(),Y.isAtEnd=t=>!!t&&t.isAtEnd(),Y.isTextPosition=t=>!!t&&ot(t.container()),Y.isElementPosition=t=>!Y.isTextPosition(t);const Tc=(t,e)=>{ot(e)&&0===e.data.length&&t.remove(e)},ef=(t,e,n)=>{var r,s;xu(n)?((r,o,s)=>{const a=k.from(s.firstChild),i=k.from(s.lastChild);o.insertNode(s),a.each(l=>Tc(r,l.previousSibling)),i.each(l=>Tc(r,l.nextSibling))})(t,e,n):(r=t,e.insertNode(s=n),Tc(r,s.previousSibling),Tc(r,s.nextSibling))},mo=ot,Uh=na,Hh=Be.nodeIndex,qh=t=>{const e=t.parentNode;return Uh(e)?qh(e):e},nf=t=>t?ms(t.childNodes,(e,n)=>(Uh(n)&&"BR"!==n.nodeName?e=e.concat(nf(n)):e.push(n),e),[]):[],$h=t=>e=>t===e,Wh=t=>(mo(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,r;n=nf(qh(e)),r=qs(n,$h(e),e),n=n.slice(0,r+1);const o=ms(n,(s,a,i)=>(mo(a)&&mo(n[i-1])&&s++,s),0);return n=Hr(n,lo([e.nodeName])),r=qs(n,$h(e),e),r-o})(t)+"]",Vh=(t,e)=>{let n,r=[],o=e.container(),s=e.offset();if(mo(o))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&mo(c);)l+=c.data.length;return l})(o,s);else{const i=o.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",o=i[s]}r.push(Wh(o));let a=((i,l,c)=>{const u=[];for(let f=l.parentNode;f&&f!==i;f=f.parentNode)u.push(f);return u})(t,o);return a=Hr(a,bo(na)),r=r.concat(_o(a,i=>Wh(i))),r.reverse().join("/")+","+n},Kh=(t,e)=>{if(!e)return null;const n=e.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",s=ms(r,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((c,u,f)=>{let p=nf(c);return p=Hr(p,(b,g)=>!mo(b)||!mo(p[g-1])),p=Hr(p,lo([u])),p[f]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!mo(s)&&s.parentNode){let a;return a="after"===o?Hh(s)+1:Hh(s),Y(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;mo(l);){const u=l.data.length;if(i>=c&&i<=c+u){a=l,i-=c;break}if(!mo(l.nextSibling)){a=l,i=u;break}c+=u,l=l.nextSibling}return mo(a)&&i>a.data.length&&(i=a.data.length),Y(a,i)})(s,parseInt(o,10))},Rc=Me,Xh=(t,e,n,r,o)=>{const s=o?r.startContainer:r.endContainer;let a=o?r.startOffset:r.endOffset;const i=[],l=t.getRoot();if(ot(s))i.push(n?((c,u,f)=>{let p=c(u.data.slice(0,f)).length;for(let b=u.previousSibling;b&&ot(b);b=b.previousSibling)p+=c(b.data).length;return p})(e,s,a):a);else{let c=0;const u=s.childNodes;a>=u.length&&u.length&&(c=1,a=Math.max(0,u.length-1)),i.push(t.nodeIndex(u[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(t.nodeIndex(c,n));return i},rf=(t,e,n)=>{let r=0;return lt.each(t.select(e),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},Yh=(t,e)=>{let n=e?t.startContainer:t.endContainer,r=e?t.startOffset:t.endOffset;if(_t(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(e?r:r-1,o.length-1)],n&&(r=e?0:n.childNodes.length,e?t.setStart(n,r):t.setEnd(n,r))}},Gh=t=>(Yh(t,!0),Yh(t,!1),t),Qh=(t,e)=>{if(_t(t)&&(t=Ns(t,e),Rc(t)))return t;if(Tr(t)){ot(t)&&Ya(t)&&(t=t.parentNode);let n=t.previousSibling;if(Rc(n)||(n=t.nextSibling,Rc(n)))return n}},Zh=(t,e,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Rc(r)){const a=r.nodeName;return{name:a,index:rf(n.dom,a,r)}}const s=Qh((a=o).startContainer,a.startOffset)||Qh(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:rf(n.dom,a,s)}}return((a,i,l,c)=>{const u=i.dom,f=Xh(u,a,l,c,!0),p=i.isForward(),b=Ah(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:f,forward:p,...b}:{start:f,end:Xh(u,a,l,c,!1),forward:p,...b}})(t,n,e,o)},Jh=(t,e,n)=>{const r={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",r,"&#xFEFF;"):t.create("span",r)},t0=(t,e)=>{const n=t.dom;let r=t.getRng();const o=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:rf(n,i,a)};const c=Gh(r.cloneRange());if(!s){c.collapse(!1);const f=Jh(n,o+"_end",e);ef(n,c,f)}r=Gh(r),r.collapse(!0);const u=Jh(n,o+"_start",e);return ef(n,r,u),t.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},of=St(Zh,me,!0),e0=t=>{const e=s=>s(t),n=mt(t),r=()=>o,o={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:je,isError:xe,map:s=>nr.value(s(t)),mapError:r,bind:e,exists:e,forall:e,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:s=>{s(t)},toOptional:()=>k.some(t)};return o},n0=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,o)=>r(t),isValue:xe,isError:je,map:e,mapError:r=>nr.error(r(t)),bind:e,exists:xe,forall:je,getOr:me,or:me,getOrThunk:vo,orThunk:vo,getOrDie:fr(String(t)),each:kt,toOptional:k.none};return n},nr={value:e0,error:n0,fromOption:(t,e)=>t.fold(()=>n0(e),e0)},Po=t=>{if(!it(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return Z(t,(r,o)=>{const s=ln(r);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!it(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...u)=>{if(u.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+u.length);return u[o].apply(null,l)},match:u=>{const f=ln(u);if(e.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+f.join(","));if(!ar(e,p=>Rt(f,p)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+"\nRequired: "+e.join(", "));return u[a].apply(null,l)},log:u=>{console.log(u,{constructors:e,constructor:a,params:l})}}}}),n};Po([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const kk=t=>"inline-command"===t.type||"inline-format"===t.type,_k=t=>"block-command"===t.type||"block-format"===t.type,Nk=t=>{var e;const n=o=>nr.error({message:o,pattern:t}),r=(o,s,a)=>{if(void 0!==t.format){let i;if(it(t.format)){if(!ar(t.format,Tt))return n(o+" pattern has non-string items in the `format` array");i=t.format}else{if(!Tt(t.format))return n(o+" pattern has non-string `format` parameter");i=[t.format]}return nr.value(s(i))}return void 0!==t.cmd?Tt(t.cmd)?nr.value(a(t.cmd,t.value)):n(o+" pattern has non-string `cmd` parameter"):n(o+" pattern is missing both `format` and `cmd` parameters")};if(!Yt(t))return n("Raw pattern is not an object");if(!Tt(t.start))return n("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!Tt(t.end))return n("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return n("Inline pattern has empty `start` and `end` parameters");let o=t.start,s=t.end;return 0===s.length&&(s=o,o=""),r("Inline",a=>({type:"inline-format",start:o,end:s,format:a}),(a,i)=>({type:"inline-command",start:o,end:s,cmd:a,value:i}))}if(void 0!==t.replacement)return Tt(t.replacement)?0===t.start.length?n("Replacement pattern has empty `start` parameter"):nr.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const o=null!==(e=t.trigger)&&void 0!==e?e:"space";return 0===t.start.length?n("Block pattern has empty `start` parameter"):r("Block",s=>({type:"block-format",start:t.start,format:s[0],trigger:o}),(s,a)=>({type:"block-command",start:t.start,cmd:s,value:a,trigger:o}))}},r0=t=>Xt(t,_k),o0=t=>Xt(t,kk),sf=(t,e)=>({...t,blockPatterns:Xt(t.blockPatterns,n=>{return("block-command"===(r=n).type||"block-format"===r.type)&&r.trigger===e;var r})}),s0=t=>{const e=(n=>{const r=[],o=[];return Z(n,s=>{s.fold(a=>{r.push(a)},a=>{o.push(a)})}),{errors:r,values:o}})(re(t,Nk));return Z(e.errors,n=>console.error(n.message,n.pattern)),e.values},af=Dn().deviceType,Ak=af.isTouch(),Tk=Be.DOM,a0=t=>wr(t,RegExp),Ct=t=>e=>e.options.get(t),Oc=t=>Tt(t)||Yt(t),i0=(t,e="")=>n=>{const r=Tt(n);if(r){if(-1!==n.indexOf("=")){const o=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return xn(a,(i,l)=>{const c=l.split("="),u=c[0],f=c.length>1?c[1]:u;return i[Yo(u)]=Yo(f),i},{})})(n);return{value:Re(o,t.id).getOr(e),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},Rk=Ct("iframe_attrs"),Ok=Ct("doctype"),l0=Ct("document_base_url"),Bk=Ct("body_id"),Dk=Ct("body_class"),c0=Ct("content_security_policy"),Pk=Ct("br_in_pre"),Fn=Ct("forced_root_block"),al=Ct("forced_root_block_attrs"),Lk=Ct("newline_behavior"),Mk=Ct("br_newline_selector"),Ik=Ct("no_newline_selector"),Fk=Ct("keep_styles"),jk=Ct("end_container_on_empty_block"),d0=Ct("automatic_uploads"),u0=Ct("images_reuse_filename"),zk=Ct("images_replace_blob_uris"),f0=Ct("icons"),Uk=Ct("icons_url"),Hk=Ct("images_upload_url"),qk=Ct("images_upload_base_path"),$k=Ct("images_upload_credentials"),Wk=Ct("images_upload_handler"),Vk=Ct("content_css_cors"),lf=Ct("referrer_policy"),m0=Ct("language"),Kk=Ct("language_url"),p0=Ct("indent_use_margin"),Xk=Ct("indentation"),Yk=Ct("content_css"),Gk=Ct("content_style"),g0=Ct("font_css"),Qk=Ct("directionality"),Zk=Ct("inline_boundaries_selector"),h0=Ct("object_resizing"),Jk=Ct("resize_img_proportional"),t_=Ct("placeholder"),b0=Ct("event_root"),e_=Ct("service_message"),Qa=Ct("theme"),n_=Ct("theme_url"),cf=Ct("model"),r_=Ct("model_url"),il=Ct("inline_boundaries"),o_=Ct("formats"),s_=Ct("preview_styles"),a_=Ct("format_empty_lines"),i_=Ct("format_noneditable_selector"),l_=Ct("custom_ui_selector"),df=Ct("inline"),c_=Ct("hidden_input"),d_=Ct("submit_patch"),u_=Ct("add_form_submit_trigger"),f_=Ct("add_unload_trigger"),m_=Ct("custom_undo_redo_levels"),p_=Ct("disable_nodechange"),v0=Ct("readonly"),g_=Ct("editable_root"),y0=Ct("content_css_cors"),Bc=Ct("plugins"),h_=Ct("external_plugins"),b_=Ct("block_unsupported_drop"),v_=Ct("visual"),y_=Ct("visual_table_class"),C0=Ct("visual_anchor_class"),x0=Ct("iframe_aria_text"),C_=Ct("setup"),x_=Ct("init_instance_callback"),w_=Ct("urlconverter_callback"),S_=Ct("auto_focus"),E_=Ct("browser_spellcheck"),k_=Ct("protect"),__=Ct("paste_block_drop"),Dc=Ct("paste_data_images"),N_=Ct("paste_preprocess"),A_=Ct("paste_postprocess"),T_=Ct("newdocument_content"),R_=Ct("paste_webkit_styles"),O_=Ct("paste_remove_styles_if_webkit"),B_=Ct("paste_merge_formats"),D_=Ct("smart_paste"),P_=Ct("paste_as_text"),L_=Ct("paste_tab_spaces"),M_=Ct("allow_html_data_urls"),I_=Ct("text_patterns"),F_=Ct("text_patterns_lookup"),w0=Ct("noneditable_class"),j_=Ct("editable_class"),z_=Ct("noneditable_regexp"),U_=Ct("preserve_cdata"),H_=Ct("highlight_on_focus"),S0=Ct("xss_sanitization"),q_=Ct("init_content_sync"),E0=t=>lt.explode(t.options.get("images_file_types")),$_=Ct("table_tab_navigation"),W_=Ct("details_initial_state"),V_=Ct("details_serialized_state"),k0=Ct("sandbox_iframes"),uf=t=>t.options.get("sandbox_iframes_exclusions"),K_=Ct("convert_unsafe_embeds"),X_=Ct("license_key"),Y_=Ct("api_key"),G_=_t,_0=ot,N0=t=>{const e=t.parentNode;e&&e.removeChild(t)},A0=t=>{const e=br(t);return{count:t.length-e.length,text:e}},T0=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(vn));)t.deleteData(e,1)},R0=(t,e)=>(pa(t),e),pa=t=>{G_(t)&&Tr(t)&&(Nh(t)?t.removeAttribute("data-mce-caret"):N0(t)),_0(t)&&(T0(t),0===t.data.length&&N0(t))},Z_=Me,J_=Do,tN=gc,O0=(t,e,n)=>{const r=Th(e.getBoundingClientRect(),n);let o,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;o=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();o=t.scrollLeft-i.left,s=t.scrollTop-i.top}r.left+=o,r.right+=o,r.top+=s,r.bottom+=s,r.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),r.left+=a,r.right+=a),r},B0=()=>pe.browser.isFirefox(),ll=t=>Z_(t)||J_(t),cl=t=>(ll(t)||Bo(t)&&B0())&&lr(D(t)).exists(io),nN=Vr,ff=Me,rN=Do,D0=pc("display","block table table-cell table-caption list-item"),P0=Tr,L0=Ya,oN=_t,sN=ot,aN=fo,Za=t=>t>0,ga=t=>t<0,Pc=(t,e)=>{let n;for(;n=t(e);)if(!L0(n))return n;return null},dl=(t,e,n,r,o)=>{const s=new gn(t,r),a=ff(t)||L0(t);let i;if(ga(e)){if(a&&(i=Pc(s.prev.bind(s),!0),n(i)))return i;for(;i=Pc(s.prev.bind(s),o);)if(n(i))return i}if(Za(e)){if(a&&(i=Pc(s.next.bind(s),!0),n(i)))return i;for(;i=Pc(s.next.bind(s),o);)if(n(i))return i}return null},Ts=(t,e)=>{for(;t&&t!==e;){if(D0(t))return t;t=t.parentNode}return null},Lo=(t,e,n)=>Ts(t.container(),n)===Ts(e.container(),n),mf=(t,e)=>{if(!e)return k.none();const n=e.container(),r=e.offset();return oN(n)?k.from(n.childNodes[r+t]):k.none()},M0=(t,e)=>{var n;const r=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),r},iN=(t,e,n)=>Ts(e,t)===Ts(n,t),I0=(t,e,n)=>{const r=t?"previousSibling":"nextSibling";let o=n;for(;o&&o!==e;){let s=o[r];if(s&&P0(s)&&(s=s[r]),ff(s)||rN(s)){if(iN(e,s,o))return s;break}if(aN(s))break;o=o.parentNode}return null},ul=St(M0,!0),fl=St(M0,!1),pf=(t,e,n)=>{let r;const o=St(I0,!0,e),s=St(I0,!1,e),a=n.startContainer,i=n.startOffset;if(Ya(a)){const l=sN(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if("before"===c&&(r=l.nextSibling,cl(r)))return ul(r);if("after"===c&&(r=l.previousSibling,cl(r)))return fl(r)}if(!n.collapsed)return n;if(ot(a)){if(P0(a)){if(1===t){if(r=s(a),r)return ul(r);if(r=o(a),r)return fl(r)}if(-1===t){if(r=o(a),r)return fl(r);if(r=s(a),r)return ul(r)}return n}if(_c(a)&&i>=a.data.length-1)return 1===t&&(r=s(a),r)?ul(r):n;if(kc(a)&&i<=1)return-1===t&&(r=o(a),r)?fl(r):n;if(i===a.data.length)return r=s(a),r?ul(r):n;if(0===i)return r=o(a),r?fl(r):n}return n},F0=(t,e)=>mf(t?0:-1,e).filter(ff),ml=(t,e,n)=>{const r=pf(t,e,n);return-1===t?Y.fromRangeStart(r):Y.fromRangeEnd(r)},Lc=t=>k.from(t.getNode()).map(D),gf=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},Mc=(t,e)=>{const n=Lo(t,e);return!(n||!He(t.getNode()))||n};var yn,t;(t=yn||(yn={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const lN=Me,Mo=ot,j0=_t,hf=He,Ja=fo,z0=t=>{return Ph(t)||!!Gu(e=t)&&!xn(wn(e.getElementsByTagName("*")),(n,r)=>n||Dh(r),!1);var e},Ic=Lh,U0=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,H0=(t,e)=>{if(Za(t)){if(Ja(e.previousSibling)&&!Mo(e.previousSibling))return Y.before(e);if(Mo(e))return Y(e,0)}if(ga(t)){if(Ja(e.nextSibling)&&!Mo(e.nextSibling))return Y.after(e);if(Mo(e))return Y(e,e.data.length)}return ga(t)?hf(e)?Y.before(e):Y.after(e):Y.before(e)},bf=(t,e,n)=>{let r,o,s,a;if(!j0(n)||!e)return null;if(e.isEqual(Y.after(n))&&n.lastChild){if(a=Y.after(n.lastChild),ga(t)&&Ja(n.lastChild)&&j0(n.lastChild))return hf(n.lastChild)?Y.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(Mo(i)){if(ga(t)&&l>0)return Y(i,--l);if(Za(t)&&l<i.length)return Y(i,++l);r=i}else{if(ga(t)&&l>0&&(o=U0(i,l-1),Ja(o)))return!z0(o)&&(s=dl(o,t,Ic,o),s)?Mo(s)?Y(s,s.data.length):Y.after(s):Mo(o)?Y(o,o.data.length):Y.before(o);if(Za(t)&&l<i.childNodes.length&&(o=U0(i,l),Ja(o)))return hf(o)?((u,f)=>{const p=f.nextSibling;return p&&Ja(p)?Mo(p)?Y(p,0):Y.before(p):bf(yn.Forwards,Y.after(f),u)})(n,o):!z0(o)&&(s=dl(o,t,Ic,o),s)?Mo(s)?Y(s,0):Y.before(s):Mo(o)?Y(o,0):Y.after(o);r=o||a.getNode()}if(r&&(Za(t)&&a.isAtEnd()||ga(t)&&a.isAtStart())&&(r=dl(r,t,je,n,!0),Ic(r,n)))return H0(t,r);o=r&&dl(r,t,Ic,n);const c=Ko(Xt(((u,f)=>{const p=[];let b=u;for(;b&&b!==f;)p.push(b),b=b.parentNode;return p})(i,n),lN));return!c||o&&c.contains(o)?o?H0(t,o):null:(a=Za(t)?Y.after(c):Y.before(c),a)},Io=t=>({next:e=>bf(yn.Forwards,e,t),prev:e=>bf(yn.Backwards,e,t)}),q0=t=>Y.isTextPosition(t)?0===t.offset():fo(t.getNode()),$0=t=>{if(Y.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return fo(t.getNode(!0))},W0=(t,e)=>!Y.isTextPosition(t)&&!Y.isTextPosition(e)&&t.getNode()===e.getNode(!0),Rr=(t,e,n)=>{const r=Io(e);return k.from(t?r.next(n):r.prev(n))},ti=(t,e,n)=>Rr(t,e,n).bind(r=>{return Lo(n,r,e)&&(s=n,a=r,t?!W0(s,a)&&(Y.isTextPosition(i=s)||!He(i.getNode()))&&$0(s)&&q0(a):!W0(a,s)&&q0(s)&&$0(a))?Rr(t,e,r):k.some(r);var s,a,i}),V0=(t,e,n,r)=>ti(t,e,n).bind(o=>r(o)?V0(t,e,o,r):k.some(o)),ei=(t,e)=>{const n=t?e.firstChild:e.lastChild;return ot(n)?k.some(Y(n,t?0:n.data.length)):n?fo(n)?k.some(t?Y.before(n):He(r=n)?Y.before(r):Y.after(r)):((o,s,a)=>{const i=o?Y.before(a):Y.after(a);return Rr(o,s,i)})(t,e,n):k.none();var r},rr=St(Rr,!0),cr=St(Rr,!1),jn=St(ei,!0),Kr=St(ei,!1),vf="_mce_caret",Or=t=>_t(t)&&t.id===vf,ha=(t,e)=>{let n=e;for(;n&&n!==t;){if(Or(n))return n;n=n.parentNode}return null},K0=t=>zt(t,"name"),X0=t=>lt.isArray(t.start),Fc=t=>!(!K0(t)&&En(t.forward))||t.forward,Y0=(t,e)=>(_t(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),cN=(t,e)=>Kr(t).fold(xe,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),G0=(t,e,n)=>!(e.hasChildNodes()||!ha(t,e)||(((r,o)=>{var s;const a=(null!==(s=r.ownerDocument)&&void 0!==s?s:document).createTextNode(vn);r.appendChild(a),o.setStart(a,0),o.setEnd(a,0)})(e,n),0)),Q0=(t,e,n,r)=>{const o=n[e?"start":"end"],s=t.getRoot();if(o){let a=s,i=o[0];for(let l=o.length-1;a&&l>=1;l--){const c=a.childNodes;if(G0(s,a,r))return!0;if(o[l]>c.length-1)return!!G0(s,a,r)||cN(a,r);a=c[o[l]]}ot(a)&&(i=Math.min(o[0],a.data.length)),_t(a)&&(i=Math.min(o[0],a.childNodes.length)),e?r.setStart(a,i):r.setEnd(a,i)}return!0},yf=t=>ot(t)&&t.data.length>0,Z0=(t,e,n)=>{const r=t.get(n.id+"_"+e),o=r?.parentNode,s=n.keep;if(r&&o){let a,i;if("start"===e?s?r.hasChildNodes()?(a=r.firstChild,i=1):yf(r.nextSibling)?(a=r.nextSibling,i=0):yf(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)+1):(a=o,i=t.nodeIndex(r)):s?r.hasChildNodes()?(a=r.firstChild,i=1):yf(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)):(a=o,i=t.nodeIndex(r)),!s){const l=r.previousSibling,c=r.nextSibling;let u;for(lt.each(lt.grep(r.childNodes),f=>{ot(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});u=t.get(n.id+"_"+e);)t.remove(u,!0);if(ot(c)&&ot(l)&&!pe.browser.isOpera()){const f=l.data.length;l.appendData(c.data),t.remove(c),a=l,i=f}}return k.some(Y(a,i))}return k.none()},dN=(t,e,n)=>((r,o,s=!1)=>{return 2===o?Zh(br,s,r):3===o?(a=>{const i=a.getRng();return{start:Vh(a.dom.getRoot(),Y.fromRangeStart(i)),end:Vh(a.dom.getRoot(),Y.fromRangeEnd(i)),forward:a.isForward()}})(r):o?{rng:(a=r).getRng(),forward:a.isForward()}:t0(r,!1);var a})(t,e,n),uN=(t,e)=>{((n,r)=>{const o=n.dom;if(r){if(X0(r))return((s,a)=>{const i=s.createRng();return Q0(s,!0,a,i)&&Q0(s,!1,a,i)?k.some({range:i,forward:Fc(a)}):k.none()})(o,r);if(Tt(r.start))return((s,a)=>{const i=k.from(Kh(s.getRoot(),a.start)),l=k.from(Kh(s.getRoot(),a.end));return Sn(i,l,(c,u)=>{const f=s.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Fc(a)}})})(o,r);if(zt(r,"id"))return((s,a)=>{const i=Z0(s,"start",a),l=Z0(s,"end",a);return Sn(i,l.or(i),(c,u)=>{const f=s.createRng();return f.setStart(Y0(s,c.container()),c.offset()),f.setEnd(Y0(s,u.container()),u.offset()),{range:f,forward:Fc(a)}})})(o,r);if(K0(r))return((s,a)=>k.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(o,r);if((s=>zt(s,"rng"))(r))return k.some({range:r.rng,forward:Fc(r)})}return k.none()})(t,e).each(({range:n,forward:r})=>{t.setRng(n,r)})},Br=t=>_t(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),jc=(J0=hn,t=>J0===t);var J0;const ni=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),Cf=t=>!ni(t)&&!jc(t)&&!yu(t),xf=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},tb=(t,e)=>{const n=Mn(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Xt(Qe(t,s=>{const a=Nc(s);return a?[D(a)]:[]}),el)},ri=t=>tb(xf(t.selection.getSel()),D(t.getBody())),pl=(t,e)=>Ro(t,"table",e),eb=t=>_n(t).fold(mt([t]),e=>[t].concat(eb(e))),wf=t=>$r(t).fold(mt([t]),e=>"br"===fe(e)?$n(e).map(n=>[t].concat(wf(n))).getOr([]):[t].concat(wf(e))),Sf=(t,e)=>Sn((n=>{const r=n.startContainer,o=n.startOffset;return ot(r)?0===o?k.some(D(r)):k.none():k.from(r.childNodes[o]).map(D)})(e),(n=>{const r=n.endContainer,o=n.endOffset;return ot(r)?o===r.data.length?k.some(D(r)):k.none():k.from(r.childNodes[o-1]).map(D)})(e),(n,r)=>{const o=Ge(eb(t),St(Ft,n)),s=Ge(wf(t),St(Ft,r));return o.isSome()&&s.isSome()}).getOr(!1),Ef=(t,e,n,r)=>{const o=n,s=new gn(n,o),a=Eo(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Rt(["td","th","table"],c.toLowerCase()));let i=n;do{if(ot(i)&&0!==lt.trim(i.data).length)return void(r?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(r?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=r?s.next():s.prev());"BODY"===o.nodeName&&(r?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},zc=t=>{const e=t.selection.getSel();return ct(e)&&e.rangeCount>0},kf=(t,e)=>{const n=ri(t);n.length>0?Z(n,r=>{const o=r.dom,s=t.dom.createRng();s.setStartBefore(o),s.setEndAfter(o),e(s,!0)}):e(t.selection.getRng(),!1)},nb=(t,e,n)=>{const r=t0(t,e);n(r),t.moveToBookmark(r)},gl=t=>x(t?.nodeType),_f=t=>_t(t)&&!Br(t)&&!Or(t)&&!na(t),rb=(t,e,n)=>{const{selection:r,dom:o}=t,s=r.getNode(),a=Me(s);nb(r,!0,()=>{e()}),a&&Me(s)&&o.isChildOf(s,t.getBody())?t.selection.select(s):n(r.getStart())&&fN(o,r)},fN=(t,e)=>{var n,r;const o=e.getRng(),{startContainer:s,startOffset:a}=o;if(!((i,l)=>{if(_f(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),u=parseInt(c,10);return!isNaN(u)&&u>0}return!1})(t,e.getNode())&&_t(s)){const i=s.childNodes,l=t.getRoot();let c;if(a<i.length){const u=i[a];c=new gn(u,null!==(n=t.getParent(u,t.isBlock))&&void 0!==n?n:l)}else{const u=i[i.length-1];c=new gn(u,null!==(r=t.getParent(u,t.isBlock))&&void 0!==r?r:l),c.next(!0)}for(let u=c.current();u;u=c.next()){if("false"===t.getContentEditable(u))return;if(ot(u)&&!Af(u))return o.setStart(u,0),void e.setRng(o)}}},ob=(t,e,n)=>{if(t){const r=e?"nextSibling":"previousSibling";for(t=n?t:t[r];t;t=t[r])if(_t(t)||!Af(t))return t}},Nf=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||oa(t,e),oi=(t,e,n)=>t.schema.isValidChild(e,n),Af=(t,e=!1)=>{if(ct(t)&&ot(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return Ha(n)}return!1},sb=(t,e)=>{const n=t.dom;return _f(e)&&"false"===n.getContentEditable(e)&&((r,o)=>{const s="[data-mce-cef-wrappable]",a=i_(r),i=hs(a)?s:`${s},${a}`;return cn(D(o),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},Rs=(t,e)=>he(t)?t(e):(ct(e)&&(t=t.replace(/%(\w+)/g,(n,r)=>e[r]||n)),t),Tf=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),Rf=(t,e)=>{if(Se(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=Vi(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Uc=(t,e,n)=>{const r=t.getStyle(e,n);return Rf(r,n)},ab=(t,e)=>{let n;return t.getParent(e,r=>!!_t(r)&&(n=t.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},Hc=(t,e,n)=>t.getParents(e,n,t.getRoot()),Of=(t,e,n)=>{const r=t.formatter.get(e);return ct(r)&&Ae(r,n)},Fo=t=>fn(t,"block"),Dr=t=>fn(t,"selector"),un=t=>fn(t,"inline"),Bf=t=>Dr(t)&&!1!==t.expand&&!un(t),ib=t=>(e=>{const n=[];let r=e;for(;r;){if(ot(r)&&r.data!==vn||r.childNodes.length>1)return[];_t(r)&&n.push(r),r=r.firstChild}return n})(t).length>0,Df=t=>Or(t.dom)&&ib(t.dom),si=Br,lb=Hc,cb=Af,mN=Nf,db=(t,e)=>{let n=e;for(;n;){if(_t(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},ub=(t,e,n,r)=>{const o=e.data;if(t){for(let s=n;s>0;s--)if(r(o.charAt(s-1)))return s}else for(let s=n;s<o.length;s++)if(r(o.charAt(s)))return s;return-1},pN=(t,e,n)=>ub(t,e,n,r=>jc(r)||ni(r)),gN=(t,e,n)=>ub(t,e,n,Cf),fb=(t,e,n,r,o,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(c,u,f)=>{const p=da(t);return k.from((o?p.backwards:p.forwards)(c,u,(g,v)=>si(g.parentNode)?-1:(a=g,f(o,g,v)),i))};return l(n,r,pN).bind(c=>s?l(c.container,c.offset+(o?-1:0),gN):k.some(c)).orThunk(()=>a?k.some({container:a,offset:o?0:a.length}):k.none())},mb=(t,e,n,r,o)=>{const s=r[o];ot(r)&&hs(r.data)&&s&&(r=s);const a=lb(t,r);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const c=e[l];if((!ct(c.collapsed)||c.collapsed===n.collapsed)&&Dr(c)&&t.is(a[i],c.selector))return a[i]}return r},pb=(t,e,n,r)=>{var o;let s=n;const a=t.getRoot(),i=e[0];if(Fo(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(o=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==o?o:a;s=t.getParent(ot(n)?n.parentNode:n,c=>c!==a&&mN(t.schema,c),l)}if(s&&Fo(i)&&i.wrapper&&(s=lb(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[r]&&!t.isBlock(s[r])&&(s=s[r],!Tf(s,"br")););return s||n},gb=(t,e,n,r)=>{const o=n.parentNode;return!ct(n[r])&&(!(o!==e&&!Se(o)&&!t.isBlock(o))||gb(t,e,o,r))},qc=(t,e,n,r,o)=>{let s=n;const a=o?"previousSibling":"nextSibling",i=t.getRoot();if(ot(n)&&!cb(n)&&(o?r>0:r<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let c=s[a];c;c=c[a]){const u=ot(c)&&!gb(t,i,c,a);if(!si(c)&&(!He(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!cb(c,u))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},hb=t=>si(t.parentNode)||si(t),ba=(t,e,n,r=!1)=>{let{startContainer:o,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return _t(o)&&o.hasChildNodes()&&(o=Ns(o,s),ot(o)&&(s=0)),_t(a)&&a.hasChildNodes()&&(a=Ns(a,e.collapsed?i:i-1),ot(a)&&(i=a.data.length)),o=db(t,o),a=db(t,a),hb(o)&&(o=si(o)?o:o.parentNode,o=e.collapsed?o.previousSibling||o:o.nextSibling||o,ot(o)&&(s=e.collapsed?o.length:0)),hb(a)&&(a=si(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,ot(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(fb(t,t.getRoot(),o,s,!0,r).each(({container:c,offset:u})=>{o=c,s=u}),fb(t,t.getRoot(),a,i,!1,r).each(({container:c,offset:u})=>{a=c,i=u})),(un(l)||l.block_expand)&&(un(l)&&ot(o)&&0!==s||(o=qc(t,n,o,s,!0)),un(l)&&ot(a)&&i!==a.data.length||(a=qc(t,n,a,i,!1))),Bf(l)&&(o=mb(t,n,e,o,"previousSibling"),a=mb(t,n,e,a,"nextSibling")),(Fo(l)||Dr(l))&&(o=pb(t,n,o,"previousSibling"),a=pb(t,n,a,"nextSibling"),Fo(l)&&(t.isBlock(o)||(o=qc(t,n,o,s,!0),ot(o)&&(s=0)),t.isBlock(a)||(a=qc(t,n,a,i,!1),ot(a)&&(i=a.data.length)))),_t(o)&&o.parentNode&&(s=t.nodeIndex(o),o=o.parentNode),_t(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:s,endContainer:a,endOffset:i}},hl=(t,e,n)=>{var r;const o=e.startOffset,s=Ns(e.startContainer,o),a=e.endOffset,i=Ns(e.endContainer,a-1),l=h=>{const C=h[0];ot(C)&&C===s&&o>=C.data.length&&h.splice(0,1);const S=h[h.length-1];return 0===a&&h.length>0&&S===i&&ot(S)&&h.splice(h.length-1,1),h},c=(h,C,S)=>{const E=[];for(;h&&h!==S;h=h[C])E.push(h);return E},u=(h,C)=>t.getParent(h,S=>S.parentNode===C,C),f=(h,C,S)=>{const E=S?"nextSibling":"previousSibling";for(let N=h,A=N.parentNode;N&&N!==C;N=A){A=N.parentNode;const R=c(N===h?N:N[E],E);R.length&&(S||R.reverse(),n(l(R)))}};if(s===i)return n(l([s]));const p=null!==(r=t.findCommonAncestor(s,i))&&void 0!==r?r:t.getRoot();if(t.isChildOf(s,i))return f(s,p,!0);if(t.isChildOf(i,s))return f(i,p);const b=u(s,p)||s,g=u(i,p)||i;f(s,b,!0);const v=c(b===s?b:b.nextSibling,"nextSibling",g===i?g.nextSibling:g);v.length&&n(l(v)),f(i,g)},hN=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],bb=(t,e,n,r,o,s)=>{const{uid:a=e,...i}=n;H(t,Gi()),Ze(t,`${$a()}`,a),Ze(t,`${la()}`,r);const{attributes:l={},classes:c=[]}=o(a,i);if(no(t,l),u=t,Z(c,p=>{H(u,p)}),s){c.length>0&&Ze(t,`${Zi()}`,c.join(","));const u=ln(l);u.length>0&&Ze(t,`${Ji()}`,u.join(","))}var u},vb=(t,e,n,r,o)=>{const s=Pt("span",t);return bb(s,e,n,r,o,!1),s},yb=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Re(s,a).map(i=>i.settings),getNames:()=>ln(s)}})();((s,a)=>{const i=la(),l=u=>k.from(u.attr(i)).bind(a.lookup),c=u=>{var f,p;u.attr($a(),null),u.attr(la(),null),u.attr(Qi(),null);const b=k.from(u.attr(Ji())).map(C=>C.split(",")).getOr([]),g=k.from(u.attr(Zi())).map(C=>C.split(",")).getOr([]);Z(b,C=>u.attr(C,null));const v=null!==(p=null===(f=u.attr("class"))||void 0===f?void 0:f.split(" "))&&void 0!==p?p:[],h=ne(v,[Gi()].concat(g));u.attr("class",h.length>0?h.join(" "):null),u.attr(Zi(),null),u.attr(Ji(),null)};s.serializer.addTempAttr(Qi()),s.serializer.addAttributeFilter(i,u=>{for(const f of u)l(f).each(p=>{!1===p.persistent&&("span"===f.name?f.unwrap():c(f))})})})(t,e);const n=((s,a)=>{const i=bn({}),l=()=>({listeners:[],previous:rs()}),c=(b,g)=>{u(b,v=>(g(v),v))},u=(b,g)=>{const v=i.get(),h=g(Re(v,b).getOrThunk(l));v[b]=h,i.set(v)},f=(b,g)=>{Z(Ch(s,b),v=>{g?Ze(v,Qi(),"true"):m(v,Qi())})},p=$u(()=>{const b=Vo(a.getNames());Z(b,g=>{u(g,v=>{const h=v.previous.get();return vh(s,k.some(g)).fold(()=>{h.each(C=>{var S;c(S=g,E=>{Z(E.listeners,N=>N(!1,S))}),v.previous.clear(),f(C,!1)})},({uid:C,name:S,elements:E})=>{var N,A,R;No(h,C)||(h.each(N=>f(N,!1)),A=C,R=E,c(N=S,L=>{Z(L.listeners,P=>P(!0,N,{uid:A,nodes:re(R,j=>j.dom)}))}),v.previous.set(C),f(C,!0))}),{previous:v.previous,listeners:v.listeners}})})},30);return s.on("remove",()=>{p.cancel()}),s.on("NodeChange",()=>{p.throttle()}),{addListener:(b,g)=>{u(b,v=>({previous:v.previous,listeners:v.listeners.concat([g])}))}}})(t,e),r=Zs("span"),o=s=>{Z(s,a=>{r(a)?Ye(a):(i=>{et(i,Gi()),m(i,`${$a()}`),m(i,`${la()}`),m(i,`${Qi()}`);const l=ro(i,`${Ji()}`).map(f=>f.split(",")).getOr([]),c=ro(i,`${Zi()}`).map(f=>f.split(",")).getOr([]);var u;Z(l,f=>m(i,f)),u=i,Z(c,f=>{et(u,f)}),m(i,`${Zi()}`),m(i,`${Ji()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,c,u,f;c=s,u=i,f=a,(l=t).undoManager.transact(()=>{const p=l.selection,b=p.getRng(),g=ri(l).length>0,v=tl("mce-annotation");if(b.collapsed&&!g&&((h,C)=>{const S=ba(h.dom,C,[{inline:"span"}]);C.setStart(S.startContainer,S.startOffset),C.setEnd(S.endContainer,S.endOffset),h.selection.setRng(C)})(l,b),p.getRng().collapsed&&!g){const h=vb(l.getDoc(),v,f,c,u.decorate);Pn(h,hn),p.getRng().insertNode(h.dom),p.select(h.dom)}else nb(p,!1,()=>{kf(l,h=>{((t,e,n,r,o,s)=>{const a=[],i=vb(t.getDoc(),n,s,r,o),l=rs(),c=()=>{l.clear()},u=p=>{Z(p,f)},f=p=>{switch(b=t,g=p,v="span",h=fe(p),ir(g).fold(()=>"skipping",C=>{return"br"===h||qn(S=g)&&wc(S)===vn?"valid":(S=>Hn(S)&&at(S,Gi()))(g)?"existing":Or(g.dom)?"caret":Ae(hN,S=>cn(g,S))?"valid-block":oi(b,v,h)&&oi(b,fe(C),v)?"valid":"invalid-child";var S})){case"invalid-child":{c();const b=Ee(p);u(b),c();break}case"valid-block":c(),bb(p,n,s,r,o,!0);break;case"valid":{const b=l.get().getOrThunk(()=>{const g=ca(i);return a.push(g),l.set(g),g});ge(p,b);break}}var b,g,v,h};hl(t.dom,e,p=>{c(),(b=>{const g=re(b,D);u(g)})(p)})})(l,h,v,c,u.decorate,f)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{vh(t,k.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();o(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();we(xh(t,s),(i,l)=>{o(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=xh(t,s);return fs(a,i=>re(i,l=>l.dom))}}},bl=t=>({getBookmark:St(dN,t),moveToBookmark:St(uN,t)});bl.isBookmarkNode=Br;const Cb=(t,e,n)=>!n.collapsed&&Ae(n.getClientRects(),r=>{return a=e,(s=t)>=(o=r).left&&s<=o.right&&a>=o.top&&a<=o.bottom;var o,s,a}),xb=(t,e,n)=>{t.dispatch(e,n)},wb=(t,e,n,r)=>{t.dispatch("FormatApply",{format:e,node:n,vars:r})},Sb=(t,e,n,r)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:r})},Eb=(t,e)=>t.dispatch("SetContent",e),kb=(t,e)=>t.dispatch("GetContent",e),Pf=(t,e)=>{t.dispatch("AutocompleterUpdateActiveRange",e)},_b=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),vt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||vt.metaKeyPressed(t),metaKeyPressed:t=>pe.os.isMacOS()||pe.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},va="data-mce-selected",Nb=Math.abs,$c=Math.round,Lf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Ab=(t,e)=>{const n=e.dom,r=e.getDoc(),o=document,s=e.getBody();let a,i,l,c,u,f,p,b,g,v,h,C,S,E,N;const A=pt=>ct(pt)&&(Ig(pt)||n.is(pt,"figure.image")),R=pt=>Do(pt)||n.hasClass(pt,"mce-preview-object"),L=pt=>{const Et=pt.target;((F,U)=>{if("longpress"===(X=F).type||0===X.type.indexOf("touch")){const X=F.touches[0];return A(F.target)&&!Cb(X.clientX,X.clientY,U)}var X;return A(F.target)&&!Cb(F.clientX,F.clientY,U)})(pt,e.selection.getRng())&&!pt.isDefaultPrevented()&&e.selection.select(Et)},P=pt=>n.hasClass(pt,"mce-preview-object")&&ct(pt.firstElementChild)?[pt,pt.firstElementChild]:n.is(pt,"figure.image")?[pt.querySelector("img")]:[pt],j=pt=>{const Et=h0(e);return!!Et&&"false"!==pt.getAttribute("data-mce-resize")&&pt!==e.getBody()&&(n.hasClass(pt,"mce-preview-object")&&ct(pt.firstElementChild)?cn(D(pt.firstElementChild),Et):cn(D(pt),Et))},W=(pt,Et,F)=>{if(ct(F)){const U=P(pt);Z(U,X=>{X.style[Et]||!e.schema.isValid(X.nodeName.toLowerCase(),Et)?n.setStyle(X,Et,F):n.setAttrib(X,Et,""+F)})}},B=(pt,Et,F)=>{W(pt,"width",Et),W(pt,"height",F)},I=pt=>{let Et,F,U,X,Q;Et=pt.screenX-f,F=pt.screenY-p,C=Et*c[2]+b,S=F*c[3]+g,C=C<5?5:C,S=S<5?5:S,U=(A(a)||R(a))&&!1!==Jk(e)?!vt.modifierPressed(pt):vt.modifierPressed(pt),U&&(Nb(Et)>Nb(F)?(S=$c(C*v),C=$c(S/v)):(C=$c(S/v),S=$c(C*v))),B(i,C,S),X=c.startPos.x+Et,Q=c.startPos.y+F,X=X>0?X:0,Q=Q>0?Q:0,n.setStyles(l,{left:X,top:Q,display:"block"}),l.innerHTML=C+" &times; "+S,c[2]<0&&i.clientWidth<=C&&n.setStyle(i,"left",void 0+(b-C)),c[3]<0&&i.clientHeight<=S&&n.setStyle(i,"top",void 0+(g-S)),Et=s.scrollWidth-E,F=s.scrollHeight-N,Et+F!==0&&n.setStyles(l,{left:X-Et,top:Q-F}),h||(e.dispatch("ObjectResizeStart",{target:a,width:b,height:g,origin:"corner-"+c.name}),h=!0)},z=()=>{const pt=h;h=!1,pt&&(W(a,"width",C),W(a,"height",S)),n.unbind(r,"mousemove",I),n.unbind(r,"mouseup",z),o!==r&&(n.unbind(o,"mousemove",I),n.unbind(o,"mouseup",z)),n.remove(i),n.remove(l),n.remove(u),G(a),pt&&(e.dispatch("ObjectResized",{target:a,width:C,height:S,origin:"corner-"+c.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},G=pt=>{Bt();const Et=n.getPos(pt,s),F=Et.x,U=Et.y,X=pt.getBoundingClientRect(),Q=X.width||X.right-X.left,gt=X.height||X.bottom-X.top;a!==pt&&(rt(),a=pt,C=S=0);const ft=e.dispatch("ObjectSelected",{target:pt});j(pt)&&!ft.isDefaultPrevented()?we(Lf,(Dt,Ut)=>{let Gt=n.get("mceResizeHandle"+Ut);Gt&&n.remove(Gt),Gt=n.add(s,"div",{id:"mceResizeHandle"+Ut,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Ut+"-resize; margin:0; padding:0"}),n.bind(Gt,"mousedown",_e=>{_e.stopImmediatePropagation(),_e.preventDefault(),(ze=>{const yr=P(a)[0];f=ze.screenX,p=ze.screenY,b=yr.clientWidth,g=yr.clientHeight,v=g/b,c=Dt,c.name=Ut,c.startPos={x:Q*Dt[0]+F,y:gt*Dt[1]+U},E=s.scrollWidth,N=s.scrollHeight,u=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=((yt,te)=>{if(R(te))return yt.create("img",{src:pe.transparentSrc});if(Bo(te)){const ce=Ve(c.name,"n")?kn:to,ee=te.cloneNode(!0);return ce(yt.select("tr",ee)).each(ve=>{const De=yt.select("td,th",ve);yt.setStyle(ve,"height",null),Z(De,ht=>yt.setStyle(ht,"height",null))}),ee}return te.cloneNode(!0)})(n,a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:F,top:U,margin:0}),B(i,Q,gt),i.removeAttribute(va),s.appendChild(i),n.bind(r,"mousemove",I),n.bind(r,"mouseup",z),o!==r&&(n.bind(o,"mousemove",I),n.bind(o,"mouseup",z)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},b+" &times; "+g)})(_e)}),Dt.elm=Gt,n.setStyles(Gt,{left:Q*Dt[0]+F-Gt.offsetWidth/2,top:gt*Dt[1]+U-Gt.offsetHeight/2})}):rt(!1)},st=xc(G,0),rt=(pt=!0)=>{st.cancel(),Bt(),a&&pt&&a.removeAttribute(va),we(Lf,(Et,F)=>{const U=n.get("mceResizeHandle"+F);U&&(n.unbind(U),n.remove(U))})},wt=(pt,Et)=>n.isChildOf(pt,Et),At=pt=>{if(h||e.removed||e.composing)return;const Et="mousedown"===pt.type?pt.target:t.getNode(),F=ao(D(Et),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(X=>X.dom).filter(X=>n.isEditable(X.parentElement)||"IMG"===X.nodeName&&n.isEditable(X)).getOrUndefined(),U=ct(F)?n.getAttrib(F,va,"1"):"1";if(Z(n.select(`img[${va}],hr[${va}]`),X=>{X.removeAttribute(va)}),ct(F)&&wt(F,s)&&e.hasFocus()){xt();const X=t.getStart(!0);if(wt(X,F)&&wt(t.getEnd(!0),F))return n.setAttrib(F,va,U),void st.throttle(F)}rt()},Bt=()=>{we(Lf,pt=>{pt.elm&&(n.unbind(pt.elm),delete pt.elm)})},xt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{xt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",At),e.on("keyup compositionend",pt=>{a&&"TABLE"===a.nodeName&&At(pt)}),e.on("hide blur",rt),e.on("contextmenu longpress",L,!0)}),e.on("remove",Bt),{isResizable:j,showResizeRect:G,hideResizeRect:rt,updateResizeRect:At,destroy:()=>{st.cancel(),a=i=u=null}}},Tb=(t,e,n)=>{const r=t.document.createRange();var o,s;return o=r,e.fold(s=>{o.setStartBefore(s.dom)},(s,a)=>{o.setStart(s.dom,a)},s=>{o.setStartAfter(s.dom)}),s=r,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),r},Mf=(t,e,n,r,o)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(r.dom,o),s},vl=Po([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Rb=(t,e,n)=>e(D(n.startContainer),n.startOffset,D(n.endContainer),n.endOffset),Ob=(t,e,n,r)=>({start:t,soffset:e,finish:n,foffset:r}),vN=document.caretPositionFromPoint?(t,e,n)=>{var r,o;return k.from(null===(o=(r=t.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,n)).bind(s=>{if(null===s.offsetNode)return k.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),k.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var r,o;return k.from(null===(o=(r=t.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,e,n))}:k.none,If=Po([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ss={before:If.before,on:If.on,after:If.after,cata:(t,e,n,r)=>t.fold(e,n,r),getStart:t=>t.fold(me,me,me)},Wc=Po([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ai={domRange:Wc.domRange,relative:Wc.relative,exact:Wc.exact,exactFromRange:t=>Wc.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:r=>D(r.startContainer),relative:(r,o)=>ss.getStart(r),exact:(r,o,s,a)=>r});return oo(e)},range:Ob},Vc=(t,e)=>{const n=fe(t);return"input"===n?ss.after(t):Rt(["br","img"],n)?0===e?ss.before(t):ss.after(t):ss.on(t,e)},yN=(t,e)=>{const n=t.fold(ss.before,Vc,ss.after),r=e.fold(ss.before,Vc,ss.after);return ai.relative(n,r)},Bb=(t,e,n,r)=>{const o=Vc(t,e),s=Vc(n,r);return ai.relative(o,s)},Ff=(t,e)=>{const n=(e||document).createDocumentFragment();return Z(t,r=>{n.appendChild(r.dom)}),D(n)},Db=(t,e,n)=>{return(r=oo(D(n)).dom,o=t,s=e,((a,i,l)=>{const c=D(a.document);return vN(c,i,l).map(u=>Ob(D(u.startContainer),u.startOffset,D(u.endContainer),u.endOffset))})(r,o,s)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,s},jf=(t,e)=>ct(t)&&ct(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,Pb=(t,e,n)=>null!==((r,o,s)=>{let a=r;for(;a&&a!==o;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),xN=(t,e,n)=>Pb(t,e,r=>r.nodeName===n),wN=(t,e)=>Tr(t)&&!Pb(t,e,Or),Lb=(t,e,n)=>{const r=e.parentNode;if(r){const o=new gn(e,t.getParent(r,t.isBlock)||t.getRoot());let s;for(;s=o[n?"prev":"next"]();)if(He(s))return!0}return!1},zf=(t,e,n,r,o)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=o.parentNode;let l,c;if(!i)return k.none();const u=t.getParent(i,t.isBlock)||s;if(r&&He(o)&&e&&t.isEmpty(u))return k.some(Y(i,t.nodeIndex(o)));const f=new gn(o,u);for(;c=f[r?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||wN(c,s))return k.none();if(ot(c)&&c.data.length>0)return xN(c,s,"A")?k.none():k.some(Y(c,r?c.data.length:0));if(t.isBlock(c)||a[c.nodeName.toLowerCase()])return k.none();l=c}return Ss(l)?k.none():n&&l?k.some(Y(l,0)):k.none()},Mb=(t,e,n,r)=>{const o=t.getRoot();let s,a=!1,i=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const c=_t(i)&&l===i.childNodes.length,u=t.schema.getNonEmptyElements();let f=n;if(Tr(i))return k.none();if(_t(i)&&l>i.childNodes.length-1&&(f=!1),$i(i)&&(i=o,l=0),i===o){if(f&&(s=i.childNodes[l>0?l-1:0],s)&&(Tr(s)||u[s.nodeName]||Bo(s)))return k.none();if(i.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=ot(i)&&c?i.data.length:0,!e&&i===o.lastChild&&Bo(i)||((p,b)=>{let g=b;for(;g&&g!==p;){if(Me(g))return!0;g=g.parentNode}return!1})(o,i)||Tr(i)||wu(i))return k.none();if(i.hasChildNodes()&&!Bo(i)){s=i;const p=new gn(i,o);do{if(Me(s)||Tr(s)){a=!1;break}if(ot(s)&&s.data.length>0){l=f?0:s.data.length,i=s,a=!0;break}if(u[s.nodeName.toLowerCase()]&&!HE(s)){l=t.nodeIndex(s),i=s.parentNode,f||l++,a=!0;break}}while(s=f?p.next():p.prev())}}}return e&&(ot(i)&&0===l&&zf(t,c,e,!0,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),_t(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!He(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||Lb(t,s,!1)||Lb(t,s,!0)||zf(t,c,e,!0,s).each(p=>{i=p.container(),l=p.offset(),a=!0}))),f&&!e&&ot(i)&&l===i.data.length&&zf(t,c,e,!1,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),a&&i?k.some(Y(i,l)):k.none();var g},Kc=(t,e)=>{const n=e.collapsed,r=e.cloneRange(),o=Y.fromRangeStart(e);return Mb(t,n,!0,r).each(s=>{n&&Y.isAbove(o,s)||r.setStart(s.container(),s.offset())}),n||Mb(t,n,!1,r).each(s=>{r.setEnd(s.container(),s.offset())}),n&&r.collapse(!0),jf(e,r)?k.none():k.some(r)},Xc=(t,e)=>t.splitText(e),Yc=t=>{let e=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset;if(e===r&&ot(e)){if(n>0&&n<e.data.length)if(r=Xc(e,n),e=r.previousSibling,o>n){o-=n;const s=Xc(r,o).previousSibling;e=r=s,o=s.data.length,n=0}else o=0}else if(ot(e)&&n>0&&n<e.data.length&&(e=Xc(e,n),n=0),ot(r)&&o>0&&o<r.data.length){const s=Xc(r,o).previousSibling;r=s,o=s.data.length}return{startContainer:e,startOffset:n,endContainer:r,endOffset:o}},ya=t=>({walk:(e,n)=>hl(t,e,n),split:Yc,expand:(e,n={type:"word"})=>{if("word"===n.type){const r=ba(t,e,[{inline:"span"}]),o=t.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return e},normalize:e=>Kc(t,e).fold(xe,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});ya.compareRanges=jf,ya.getCaretRangeFromPoint=Db,ya.getSelectedNode=Nc,ya.getNode=Ns;const SN=((t,e)=>{const n=o=>{const s=(a=>{const i=a.dom;return To(a)?i.getBoundingClientRect().height:i.offsetHeight})(o);if(s<=0||null===s){const a=tt(o,t);return parseFloat(a)||0}return s},r=(o,s)=>xn(s,(a,i)=>{const l=tt(o,i),c=void 0===l?0:parseInt(l,10);return isNaN(c)?a:a+c},0);return{set:(o,s)=>{if(!x(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=o.dom;Jo(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:r,max:(o,s,a)=>{const i=r(o,a);return s>i?s-i:0}}})("height"),Ib=()=>D(document),Fb=(t,e)=>t.view(e).fold(mt([]),n=>{const r=t.owner(n),o=Fb(t,r);return[n].concat(o)});var EN=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?k.none():k.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(D)},owner:t=>Le(t)});const Uf=t=>"textarea"===fe(t),jb=(t,e)=>{const n=(o=>{const s=o.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===o.dom)return Ln(a.offsetLeft,a.offsetTop);const c=ts(i?.pageYOffset,l.scrollTop),u=ts(i?.pageXOffset,l.scrollLeft),f=ts(l.clientTop,a.clientTop),p=ts(l.clientLeft,a.clientLeft);return za(o).translate(u-p,c-f)})(t),r=SN.get(t);return{element:t,bottom:n.top+r,height:r,pos:n,cleanup:e}},zb=(t,e,n,r)=>{_N(t,(o,s)=>kN(t,e,n,r),n)},Ub=(t,e,n,r,o)=>{const s={elm:r.element.dom,alignToTop:o};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(t,e,Ua(e).top,r,o),t.dispatch("AfterScrollIntoView",s))},kN=(t,e,n,r)=>{D(t.getBody());const s=D(t.getDoc()),a=((i,l)=>{const c=((f,p)=>{const b=Ee(f);if(0===b.length||Uf(f))return{element:f,offset:p};if(p<b.length&&!Uf(b[p]))return{element:b[p],offset:0};{const g=b[b.length-1];return Uf(g)?{element:f,offset:p}:"img"===fe(g)?{element:g,offset:1}:qn(g)?{element:g,offset:wc(g).length}:{element:g,offset:Ee(g).length}}})(i,l),u=ut('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return jt(c.element,u),jb(u,()=>ue(u))})(D(n.startContainer),n.startOffset);Ub(t,s,e,a,r),a.cleanup()},Hb=(t,e,n,r)=>{const o=D(t.getDoc());Ub(t,o,n,jb(D(e),kt),r)},_N=(t,e,n)=>{const r=n.startContainer,o=n.startOffset,s=n.endContainer,a=n.endOffset;e(D(r),D(s));const i=t.dom.createRng();i.setStart(r,o),i.setEnd(s,a),t.selection.setRng(n)},Hf=(t,e,n,r,o)=>{const s=e.pos;if(r)fc(s.left,s.top,o);else{const a=s.top-n+e.height;fc(-t.getBody().getBoundingClientRect().left,a,o)}},qb=(t,e,n,r,o,s)=>{const a=r+n,i=o.pos.top,l=o.bottom,c=l-i>=r;i<n?Hf(t,o,r,!1!==s,e):i>a?Hf(t,o,r,c?!1!==s:!0===s,e):l>a&&!c&&Hf(t,o,r,!0===s,e)},$b=(t,e,n,r,o)=>{const s=oo(e).dom.innerHeight;qb(t,e,n,s,r,o)},Wb=(t,e,n,r,o)=>{const s=oo(e).dom.innerHeight;qb(t,e,n,s,r,o);const a=(l=>{const c=Ib(),u=Ua(c),f=((g,v)=>{const h=v.owner(g);return Fb(v,h)})(l,EN),p=za(l),b=Wo(f,(g,v)=>{const h=za(v);return{left:g.left+h.left,top:g.top+h.top}},{left:0,top:0});return Ln(b.left+p.left+u.left,b.top+p.top+u.top)})(r.element),i=Rg(window);a.top<i.y?Ag(r.element,!1!==o):a.top>i.bottom&&Ag(r.element,!0===o)},NN=(t,e,n)=>zb(t,$b,e,n),AN=(t,e,n)=>Hb(t,e,$b,n),TN=(t,e,n)=>zb(t,Wb,e,n),RN=(t,e,n)=>Hb(t,e,Wb,n),yl=(t,e,n)=>{(t.inline?NN:TN)(t,e,n)},Vb=(t,e=!1)=>t.dom.focus({preventScroll:e}),Kb=t=>{const e=Oe(t).dom;return t.dom===e.activeElement},qf=(t=Ib())=>k.from(t.dom.activeElement).map(D),Xb=(t,e)=>{const n=qn(e)?wc(e).length:Ee(e).length+1;return t>n?n:t<0?0:t},ON=t=>ai.range(t.start,Xb(t.soffset,t.start),t.finish,Xb(t.foffset,t.finish)),Yb=(t,e)=>!mc(e.dom)&&(Je(t,e)||Ft(t,e)),Gb=t=>e=>Yb(t,e.start)&&Yb(t,e.finish),BN=t=>ai.range(D(t.startContainer),t.startOffset,D(t.endContainer),t.endOffset),DN=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),k.some(e)}catch{return k.none()}},Gc=t=>{const e=t.inline||pe.browser.isFirefox()?(n=D(t.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?k.from(o.getRangeAt(0)):k.none()).map(BN)})(oo(n).dom).filter(Gb(n))):k.none();var n;t.bookmark=e.isSome()?e:t.bookmark},$f=t=>(t.bookmark?t.bookmark:k.none()).bind(e=>{return n=D(t.getBody()),k.from(e).filter(Gb(n)).map(ON);var n}).bind(DN),Qb={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Pr={setEditorTimeout:(t,e,n)=>{return x(o=n)||(o=0),setTimeout(()=>{t.removed||e()},o);var o},setEditorInterval:(t,e,n)=>{const r=(x(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(r):e()},s));var s;return r}};let ii;const Wf=Be.DOM,Vf=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Qc=(t,e)=>{const n=l_(t);return null!==Wf.getParent(e,o=>{return _t(s=o)&&Qb.isEditorUIElement(s)||!!n&&t.dom.is(o,n);var s})},Kf=t=>{try{const e=Oe(D(t.getElement()));return qf(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},PN=(t,e)=>{const n=e.editor;(o=>{const s=xc(()=>{Gc(o)},0);o.on("init",()=>{var a,c;o.inline&&((a,i)=>{const l=()=>{i.throttle()};Be.DOM.bind(document,"mouseup",l),a.on("remove",()=>{Be.DOM.unbind(document,"mouseup",l)})})(o,s),c=s,(a=o).on("mouseup touchend",u=>{c.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Gc(a)})}),o.on("remove",()=>{s.cancel()})})(n);const r=(o,s)=>{H_(o)&&!0!==o.inline&&s(D(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=t.focusedEditor;Vf(Kf(n))&&r(n,H),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Pr.setEditorTimeout(n,()=>{const o=t.focusedEditor;Vf(Kf(n))&&o===n||r(n,et),Qc(n,Kf(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),ii||(ii=o=>{const s=t.activeEditor;s&&Js(o).each(a=>{a.ownerDocument===document&&(a===document.body||Qc(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Wf.bind(document,"focusin",ii))},LN=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&ii&&(Wf.unbind(document,"focusin",ii),ii=null)},Zb=(t,e)=>{var n,r,o;(n=D(t.getBody()),r=e,(o=r,o.collapsed?k.from(Ns(o.startContainer,o.startOffset)).map(D):k.none()).bind(o=>mk(o)?k.some(o):Je(n,o)?k.none():k.some(n))).bind(n=>jn(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Xf=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},li=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(r=D(n),Kb(r)||(o=r,qf(Oe(o)).filter(s=>o.dom.contains(s.dom))).isSome());var r,o})(t):ct((e=t).iframeElement)&&Kb(D(e.iframeElement));var e},Jb=t=>li(t)||(e=>{const n=Oe(D(e.getElement()));return qf(n).filter(r=>!Vf(r.dom)&&Qc(e,r.dom)).isSome()})(t),Yf=t=>t.editorManager.setActive(t),tv=(t,e)=>e.collapsed?t.isEditable(e.startContainer):t.isEditable(e.startContainer)&&t.isEditable(e.endContainer),ev=(t,e,n,r,o)=>{const a=n?e.startOffset:e.endOffset;return k.from(n?e.startContainer:e.endContainer).map(D).map(i=>r&&e.collapsed?i:$e(i,o(i,a)).getOr(i)).bind(i=>Hn(i)?k.some(i):ir(i).filter(Hn)).map(i=>i.dom).getOr(t)},nv=(t,e,n=!1)=>ev(t,e,!0,n,(r,o)=>Math.min(Nn(r),o)),rv=(t,e,n=!1)=>ev(t,e,!1,n,(r,o)=>o>0?o-1:o),ov=(t,e)=>{const n=t;for(;t&&ot(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Gf=(t,e)=>re(e,n=>{const r=t.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),MN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Zc=(t,e,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(t[r])return t[r];if(t!==e){let s=t[o];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[o],s)return s}},IN=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Ha(n))return!1;const r=t.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},sv=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Kn{static create(e,n){const r=new Kn(e,MN[e]||1);return n&&we(n,(o,s)=>{r.attr(s,o)}),r}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const r=this;if(!Tt(e))return ct(e)&&we(e,(s,a)=>{r.attr(a,s)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(e in o.map){delete o.map[e];let s=o.length;for(;s--;)if(o[s].name===e)return o.splice(s,1),r}return r}if(e in o.map){let s=o.length;for(;s--;)if(o[s].name===e){o[s].value=n;break}}else o.push({name:e,value:n});return o.map[e]=n,r}return o.map[e]}}clone(){const e=this,n=new Kn(e.name,e.type),r=e.attributes;if(r){const o=[];o.map={};for(let s=0,a=r.length;s<a;s++){const i=r[s];"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const r=n.next;e.insert(n,e,!0),n=r}e.remove()}remove(){const e=this,n=e.parent,r=e.next,o=e.prev;return n&&(n.firstChild===e?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===e?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const r=n.lastChild;return r?(r.next=e,e.prev=r,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,r){e.parent&&e.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===o.lastChild?o.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=o,e}getAll(e){const n=this,r=[];for(let o=n.firstChild;o;o=Zc(o,n))o.name===e&&r.push(o);return r}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let o=e.firstChild;o;o=Zc(o,e))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},r){var o;const s=this;let a=s.firstChild;if(sv(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||sv(a))return!1}if(8===a.type||3===a.type&&!IN(a)||3===a.type&&a.parent&&n[a.parent.name]&&Ha(null!==(o=a.value)&&void 0!==o?o:"")||r&&r(a))return!1}while(a=Zc(a,s));return!0}walk(e){return Zc(this,null,e)}}const FN=lt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),av=t=>Tt(t.nodeValue)&&t.nodeValue.includes(vn),iv=t=>(0===t.length?"":`${re(t,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',lv=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>av(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),cv=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,e=>{if(av(e)){const n=e.parentNode;return n&&zt(FN,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),jN=t=>null!==lv(t).nextNode(),zN=t=>null!==cv(t).nextNode(),UN=(t,e)=>null!==e.querySelector(iv(t)),HN=(t,e)=>{Z(e.querySelectorAll(iv(t)),n=>{const r=D(n);"all"===tr(r,"data-mce-bogus")?ue(r):Z(t,o=>{d(r,o)&&m(r,o)})})},dv=t=>{let e=t.nextNode();for(;null!==e;)e.nodeValue=null,e=t.nextNode()},qN=On(dv,lv),$N=On(dv,cv),uv=(t,e)=>{const n=[{condition:St(UN,e),action:St(HN,e)},{condition:jN,action:qN},{condition:zN,action:$N}];let r=t,o=!1;return Z(n,({condition:s,action:a})=>{s(r)&&(o||(r=t.cloneNode(!0),o=!0),a(r))}),r},fv=t=>{const e=Mn(t,"[data-mce-bogus]");Z(e,n=>{"all"===tr(n,"data-mce-bogus")?ue(n):ua(n)?(jt(n,le("\ufeff")),ue(n)):Ye(n)})},mv=t=>{const e=Mn(t,"input");Z(e,n=>{m(n,"name")})},pv=lt.makeMap,gv=t=>{const e=[],n=(t=t||{}).indent,r=pv(t.indent_before||""),o=pv(t.indent_after||""),s=aa.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,c)=>{if(n&&r[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}if(e.push("<",i),l)for(let u=0,f=l.length;u<f;u++){const p=l[u];e.push(" ",p.name,'="',s(p.value,!0),'"')}if(e[e.length]=!c||a?">":" />",c&&n&&o[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&o[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},Os=(t={},e=Es())=>{const n=gv(t);return t.validate=!("validate"in t)||t.validate,{serialize:r=>{const o=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const u=i.name,f=u in e.getVoidElements();let p=i.attributes;if(o&&p&&p.length>1){const b=[];b.map={};const g=e.getElementRule(i.name);if(g){for(let v=0,h=g.attributesOrder.length;v<h;v++){const C=g.attributesOrder[v];if(C in p.map){const S=p.map[C];b.map[C]=S,b.push({name:C,value:S})}}for(let v=0,h=p.length;v<h;v++){const C=p[v].name;if(!(C in b.map)){const S=p.map[C];b.map[C]=S,b.push({name:C,value:S})}}p=b}}if(n.start(u,p,f),ra(u))Tt(i.value)&&n.text(i.value,!0),n.end(u);else if(!f){let b=i.firstChild;if(b){"pre"!==u&&"textarea"!==u||3!==b.type||"\n"!==(null===(l=b.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(b)}while(b=b.next)}n.end(u)}}};return 1!==r.type||t.inner?3===r.type?s[3](r):s[11](r):a(r),n.getContent()}}},hv=new Set;Z(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{hv.add(t)});const bv=new Set;Z(["background-color"],t=>{bv.add(t)});const vv=["font","text-decoration","text-emphasis"],ci=(t,e)=>{return ln((n=t).parseStyle(n.getAttrib(e,"style")));var n},yv=(t,e)=>Ae(ci(t,e),n=>hv.has(n)),Cv=(t,e,n)=>k.from(n.container()).filter(ot).exists(r=>{const o=t?0:-1;return e(r.data.charAt(n.offset()+o))}),Qf=St(Cv,!0,ni),Zf=St(Cv,!1,ni),VN=t=>{const e=t.container();return ot(e)&&(0===e.data.length||Ec(e.data)&&bl.isBookmarkNode(e.parentNode))},Bs=(t,e)=>n=>mf(t?0:-1,n).filter(e).isSome(),xv=t=>Ig(t)&&"block"===tt(D(t),"display"),wv=t=>{return Me(t)&&!(_t(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},KN=Bs(!0,xv),XN=Bs(!1,xv),Cl=Bs(!0,Do),xl=Bs(!1,Do),Sv=Bs(!0,Bo),Jf=Bs(!1,Bo),Ds=Bs(!0,wv),Ps=Bs(!1,wv),Ev=(t,e)=>{return o=xe,Je(r=e,n=t)?Cs(n,s=>o(s)||Ft(s,r)).slice(0,-1):[];var n,r,o},as=(t,e)=>[t].concat(Ev(t,e)),tm=(t,e,n)=>V0(t,e,n,VN),kv=(t,e,n)=>Ge(as(D(e.container()),t),(r=>o=>r.isBlock(fe(o)))(n)),_v=(t,e,n,r)=>tm(t,e.dom,n).forall(o=>kv(e,n,r).fold(()=>!Lo(o,n,e.dom),s=>!Lo(o,n,e.dom)&&Je(s,D(o.container())))),Nv=(t,e,n,r)=>kv(e,n,r).fold(()=>tm(t,e.dom,n).forall(o=>!Lo(o,n,e.dom)),o=>tm(t,o.dom,n).isNone()),em=St(Nv,!1),Av=St(Nv,!0),YN=St(_v,!1),GN=St(_v,!0),QN=t=>Lc(t).exists(ua),Jc=(t,e,n,r)=>{const o=Xt(as(D(n.container()),e),a=>r.isBlock(fe(a))),s=kn(o).getOr(e);return Rr(t,s.dom,n).filter(QN)},nm=(t,e,n)=>Lc(e).exists(ua)||Jc(!0,t,e,n).isSome(),td=(t,e,n)=>{return(r=e,k.from(r.getNode(!0)).map(D)).exists(ua)||Jc(!1,t,e,n).isSome();var r},Tv=St(Jc,!1),ZN=St(Jc,!0),Rv=t=>Y.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),Ov=(t,e,n)=>{const r=Xt(as(D(e.container()),t),o=>n.isBlock(fe(o)));return kn(r).getOr(t)},Bv=(t,e,n)=>Rv(e)?Zf(e):Zf(e)||cr(Ov(t,e,n).dom,e).exists(Zf),Dv=(t,e,n)=>Rv(e)?Qf(e):Qf(e)||rr(Ov(t,e,n).dom,e).exists(Qf),rm=t=>Lc(t).bind(e=>Nr(e,Hn)).exists(e=>{return n=tt(e,"white-space"),Rt(["pre","pre-wrap"],n);var n}),Pv=(t,e)=>n=>{return r=new gn(n,t)[e](),ct(r)&&Me(r)&&D0(r);var r},Lv=(t,e,n)=>{return!rm(e)&&(s=n,cr((r=t).dom,o=e).isNone()||rr(r.dom,o).isNone()||em(r,o,s)||Av(r,o,s)||td(r,o,s)||nm(r,o,s)||Bv(t,e,n)||Dv(t,e,n));var r,o,s},wl=(t,e,n)=>!rm(e)&&(em(t,e,n)||YN(t,e,n)||td(t,e,n)||Bv(t,e,n)||((r,o)=>{const s=cr(r.dom,o).getOr(o),a=Pv(r.dom,"prev");return o.isAtStart()&&(a(o.container())||a(s.container()))})(t,e)),Sl=(t,e,n)=>!rm(e)&&(Av(t,e,n)||GN(t,e,n)||nm(t,e,n)||Dv(t,e,n)||((r,o)=>{const s=rr(r.dom,o).getOr(o),a=Pv(r.dom,"next");return o.isAtEnd()&&(a(o.container())||a(s.container()))})(t,e)),om=(t,e,n)=>wl(t,e,n)||Sl(t,(r=>{const o=r.container(),s=r.offset();return ot(o)&&s<o.data.length?Y(o,s+1):r})(e),n),Mv=(t,e)=>jc(t.charAt(e)),Iv=(t,e)=>ni(t.charAt(e)),Fv=(t,e,n,r)=>{const o=e.data,s=Y(e,0);return n||!Mv(o,0)||om(t,s,r)?!!(n&&Iv(o,0)&&wl(t,s,r))&&(e.data=hn+o.slice(1),!0):(e.data=" "+o.slice(1),!0)},jv=(t,e,n,r)=>{const o=e.data,s=Y(e,o.length-1);return n||!Mv(o,o.length-1)||om(t,s,r)?!!(n&&Iv(o,o.length-1)&&Sl(t,s,r))&&(e.data=o.slice(0,-1)+hn,!0):(e.data=o.slice(0,-1)+" ",!0)},zv=(t,e,n,r)=>{if(0===n)return;const o=D(t),s=Wr(o,c=>r.isBlock(fe(c))).getOr(o),a=t.data.slice(e,e+n),i=e+n>=t.data.length&&Sl(s,Y(t,t.data.length),r),l=0===e&&wl(s,Y(t,0),r);t.replaceData(e,n,Lg(a,4,l,i))},ed=(t,e,n)=>{const r=t.data.slice(e),o=r.length-du(r).length;zv(t,e,o,n)},sm=(t,e,n)=>{const r=t.data.slice(0,e),o=r.length-gs(r).length;zv(t,e-o,o,n)},am=(t,e,n,r,o=!0)=>{const s=gs(t.data).length,a=o?t:e,i=o?e:t;return o?a.appendData(i.data):a.insertData(0,i.data),ue(D(i)),r&&ed(a,s,n),a},tA=(t,e)=>((n,r)=>{const o=n.container(),s=n.offset();return!Y.isTextPosition(n)&&o===r.parentNode&&s>Y.before(r).offset()})(e,t)?Y(e.container(),e.offset()-1):e,Uv=t=>{return fo(t.previousSibling)?k.some(ot(e=t.previousSibling)?Y(e,e.data.length):Y.after(e)):t.previousSibling?Kr(t.previousSibling):k.none();var e},Hv=t=>{return fo(t.nextSibling)?k.some(ot(e=t.nextSibling)?Y(e,0):Y.before(e)):t.nextSibling?jn(t.nextSibling):k.none();var e},qv=(t,e,n)=>{n.fold(()=>{t.focus()},r=>{t.selection.setRng(r.toRange(),e)})},nA=(t,e)=>e&&zt(t.schema.getBlockElements(),fe(e)),Ca=(t,e,n,r=!0,o=!1)=>{const s=((t,e,n)=>{return(r=t,o=e,s=n,r?(a=o,Hv(i=s).orThunk(()=>Uv(i)).orThunk(()=>{return rr(l=a,Y.after(c=i)).orThunk(()=>cr(l,Y.before(c)));var l,c})):((a,i)=>Uv(i).orThunk(()=>Hv(i)).orThunk(()=>{return l=a,k.from((c=i).previousSibling?c.previousSibling:c.parentNode).bind(u=>cr(l,Y.before(u))).orThunk(()=>rr(l,Y.after(c)));var l,c}))(o,s)).map(St(tA,n));var r,o,s,a,i})(e,t.getBody(),n.dom),a=Wr(n,St(nA,t),(i=t.getBody(),c=>c.dom===i));var i;const l=((c,u,f,p)=>{const b=$n(c).filter(qn),g=gr(c).filter(qn);return ue(c),(v=b,h=g,C=u,S=(E,N,A)=>{const R=E.dom,L=N.dom,P=R.data.length;return am(R,L,f,p),A.container()===L?Y(R,P):A},v.isSome()&&h.isSome()&&C.isSome()?k.some(S(v.getOrDie(),h.getOrDie(),C.getOrDie())):k.none()).orThunk(()=>(p&&(b.each(E=>sm(E.dom,E.dom.length,f)),g.each(E=>ed(E.dom,0,f))),u));var v,h,C,S})(n,s,t.schema,(u=n,zt(t.schema.getTextInlineElements(),fe(u))));var u;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(c=>((u,f,p)=>{if(In(u,f)){const b=ut('<br data-mce-bogus="1">');return p?Z(Ee(f),g=>{Df(g)||ue(g)}):ae(f),Kt(f,b),k.some(Y.before(b.dom))}return k.none()})(t.schema,c,o)).fold(()=>{r&&qv(t,e,l)},c=>{r&&qv(t,e,k.some(c))})},rA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,xa=(t,e)=>cn(D(e),Zk(t))&&!oa(t.schema,e)&&t.dom.isEditable(e),$v=t=>{var e,n;return"rtl"===Be.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",rA.test(n))},Ls=(t,e,n)=>{const r=(o=t,s=e,Xt(Be.DOM.getParents(n.container(),"*",s),o));var o,s;return k.from(r[r.length-1])},Lr=(t,e)=>{const n=e.container(),r=e.offset();return t?_s(n)?ot(n.nextSibling)?Y(n.nextSibling,0):Y.after(n):Ku(e)?Y(n,r+1):e:_s(n)?ot(n.previousSibling)?Y(n.previousSibling,n.previousSibling.data.length):Y.before(n):Xu(e)?Y(n,r-1):e},Wv=St(Lr,!0),Vv=St(Lr,!1),Kv=(t,e)=>{const n=r=>r.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},nd=t=>Kv(t,"Delete"),Xv=t=>Kv(t,"ForwardDelete"),oA=t=>_h(t)||Va(t),rd=(t,e)=>Je(t,e)?Nr(e,oA,(n=>r=>No(ir(r),n,Ft))(t)):k.none(),im=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},Yv=(t,e,n)=>Sn(jn(n),Kr(n),(r,o)=>{const s=Lr(!0,r),a=Lr(!1,o),i=Lr(!1,e);return t?rr(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s)):cr(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a))}).getOr(!0),Gv=t=>{var e;return(8===Fi(e=t)||"#comment"===fe(e)?$n(t):$r(t)).bind(Gv).orThunk(()=>k.some(t))},Qv=(t,e,n,r=!0)=>{var o;e.deleteContents();const s=Gv(n).getOr(n),a=D(null!==(o=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==o?o:n.dom);if(a.dom===t.getBody()?im(t,r):In(t.schema,a,{checkRootAsContent:!1})&&(ks(a),r&&t.selection.setCursorLocation(a.dom,0)),!Ft(n,a)){const l=No(ir(a),n)?[]:ir(i=a).map(Ee).map(c=>Xt(c,u=>!Ft(i,u))).getOr([]);Z(l.concat(Ee(n)),c=>{Ft(c,a)||Je(c,a)||!In(t.schema,c)||ue(c)})}var i},lm=t=>Mn(t,"td,th"),Zv=(t,e)=>pl(D(t),e),cm=(t,e)=>({start:t,end:e}),El=Po([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),od=(t,e)=>ao(D(t),"td,th",e),Jv=t=>!Ft(t.start,t.end),ty=(t,e)=>pl(t.start,e).bind(n=>pl(t.end,e).bind(r=>vs(Ft(n,r),n))),dm=t=>e=>ty(e,t).map(n=>((r,o,s)=>({rng:r,table:o,cells:s}))(e,n,lm(n))),ey=(t,e,n,r)=>{if(n.collapsed||!t.forall(Jv))return k.none();if(e.isSameTable){const o=t.bind(dm(r));return k.some({start:o,end:o})}{const o=od(n.startContainer,r),s=od(n.endContainer,r),a=o.bind((l=>c=>pl(c,l).bind(u=>to(lm(u)).map(f=>cm(c,f))))(r)).bind(dm(r)),i=s.bind((l=>c=>pl(c,l).bind(u=>kn(lm(u)).map(f=>cm(f,c))))(r)).bind(dm(r));return k.some({start:a,end:i})}},ny=(t,e)=>us(t,n=>Ft(n,e)),um=t=>Sn(ny(t.cells,t.rng.start),ny(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),ry=(t,e)=>{const{startTable:n,endTable:r}=e,o=t.cloneRange();return n.each(s=>o.setStartAfter(s.dom)),r.each(s=>o.setEndBefore(s.dom)),o},oy=t=>Z(t,e=>{m(e,"contenteditable"),ks(e)}),fm=(t,e,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(e.dom.lastChild)):(o.setStartBefore(e.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),mm(t,o,e,!1).each(s=>s())},sy=t=>{const e=ri(t),n=D(t.selection.getNode());gc(n.dom)&&In(t.schema,n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&Ae(e,r=>Ft(r,n))&&Ze(n,"data-mce-selected","1")},ay=(t,e,n)=>k.some(()=>{const r=t.selection.getRng(),o=n.bind(({rng:s,isStartInTable:a})=>{const i=k.from((c=t).dom.getParent(a?s.endContainer:s.startContainer,c.dom.isBlock)).map(D);var c;s.deleteContents(),((c,u,f)=>{f.each(p=>{u?ue(p):(ks(p),c.selection.setCursorLocation(p.dom,0))})})(t,a,i.filter(St(In,t.schema)));const l=a?e[0]:e[e.length-1];return fm(t,l,r,a),In(t.schema,l)?k.none():k.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);oy(o),sy(t)}),aA=(t,e,n,r)=>k.some(()=>{const o=t.selection.getRng(),s=e[0],a=n[n.length-1];fm(t,s,o,!0),fm(t,a,o,!1);const i=In(t.schema,s)?e:e.slice(1),l=In(t.schema,a)?n:n.slice(0,-1);oy(i.concat(l)),r.deleteContents(),sy(t)}),mm=(t,e,n,r=!0)=>k.some(()=>{Qv(t,e,n,r)}),iA=(t,e)=>k.some(()=>Ca(t,!1,e)),iy=(t,e)=>Ge(as(e,t),el),pm=(t,e)=>Ge(as(e,t),Zs("caption")),sd=(t,e)=>k.some(()=>{ks(e),t.selection.setCursorLocation(e.dom,0)}),ly=(t,e)=>t?Sv(e):Jf(e),gm=(t,e)=>{const n=D(t.selection.getStart(!0)),r=ri(t);return t.selection.isCollapsed()&&0===r.length?((t,e,n)=>{const r=D(t.getBody());return pm(r,n).fold(()=>((o,s,a,i)=>{const l=Y.fromRangeStart(o.selection.getRng());return iy(a,i).bind(c=>{return In(o.schema,c,{checkRootAsContent:!1})?sd(o,c):(f=a,b=c,g=l,ti(s,o.getBody(),g).bind(v=>iy(f,D(v.getNode())).bind(h=>Ft(h,b)?k.none():k.some(kt))));var f,b,g})})(t,e,r,n).orThunk(()=>vs(((o,s)=>{const a=Y.fromRangeStart(o.selection.getRng());return ly(s,a)||Rr(s,o.getBody(),a).exists(i=>ly(s,i))})(t,e),kt)),o=>((s,a,i,l)=>{const c=Y.fromRangeStart(s.selection.getRng());return In(s.schema,l)?sd(s,l):(f=i,b=l,g=c,ti(p=a,(u=s).getBody(),g).fold(()=>k.some(kt),v=>{return C=p,S=g,E=v,jn((h=b).dom).bind(N=>Kr(h.dom).map(A=>C?S.isEqual(N)&&E.isEqual(A):S.isEqual(A)&&E.isEqual(N))).getOr(!0)?((h,C)=>sd(h,C))(u,b):((h,C,S)=>pm(h,D(S.getNode())).fold(()=>k.some(kt),E=>vs(!Ft(E,C),kt)))(f,b,v);var h,C,S,E}));var u,f,p,b,g})(t,e,r,o))})(t,e,n):((o,s,a)=>{const i=D(o.getBody()),l=o.selection.getRng();return 0!==a.length?ay(o,a,k.none()):(c=o,f=l,pm(u=i,s).fold(()=>{return b=c,((t,e)=>{const n=(s=>a=>Ft(s,a))(t),r=((s,a)=>{const i=od(s.startContainer,a),l=od(s.endContainer,a);return Sn(i,l,cm)})(e,n),o=((s,a)=>{const i=Zv(s.startContainer,a),l=Zv(s.endContainer,a),c=i.isSome(),u=l.isSome(),f=Sn(i,l,Ft).getOr(!1);return Sn((p={startTable:i,endTable:l,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u}).startTable,p.endTable,(b,g)=>{const v=Dg(b,C=>Ft(C,g)),h=Dg(g,C=>Ft(C,b));return v||h?{...p,startTable:v?k.none():p.startTable,endTable:h?k.none():p.endTable,isSameTable:!1,isMultiTable:!1}:p}).getOr(p);var p})(e,n);return a=e,i=n,r.exists(l=>{return u=i,!Jv(c=l)&&ty(c,u).exists(f=>{const p=f.dom.rows;return 1===p.length&&1===p[0].cells.length})&&Sf(l.start,a);var c,u})?r.map(s=>El.singleCellTable(e,s.start)):o.isMultiTable?((s,a,i,l)=>ey(s,a,i,l).bind(({start:c,end:u})=>{const f=c.bind(um).getOr([]),p=u.bind(um).getOr([]);if(f.length>0&&p.length>0){const b=ry(i,a);return k.some(El.multiTable(f,p,b))}return k.none()}))(r,o,e,n):((s,a,i,l)=>ey(s,a,i,l).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=a,f=um(c).getOr([]);if(u&&c.cells.length===f.length)return k.some(El.fullTable(c.table));if(f.length>0){if(u)return k.some(El.partialTable(f,k.none()));{const p=ry(i,a);return k.some(El.partialTable(f,k.some({...a,rng:p})))}}return k.none()}))(r,o,e,n);var a,i})(u,f).bind(h=>h.fold(St(mm,b),St(iA,b),St(ay,b),St(aA,b)));var b},b=>sd(c,b)));var c,u,f})(t,n,r)},wa=(t,e)=>{let n=e;for(;n&&n!==t;){if(Vr(n)||Me(n))return n;n=n.parentNode}return null},cA=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],dA=lt.each,hm=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),r=o=>Ae(cA,s=>Ve(o,s))||n.has(o);return{compare:(o,s)=>{if(o.nodeName!==s.nodeName||o.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return dA(e.getAttribs(l),u=>{const f=u.nodeName.toLowerCase();"style"===f||r(f)||(c[f]=e.getAttrib(l,f))}),c},i=(l,c)=>{for(const u in l)if(zt(l,u)){const f=c[u];if(Ie(f)||l[u]!==f)return!1;delete c[u]}for(const u in c)if(zt(c,u))return!1;return!0};return!(_t(o)&&_t(s)&&(!i(a(o),a(s))||!i(e.parseStyle(e.getAttrib(o,"style")),e.parseStyle(e.getAttrib(s,"style"))))||Br(o)||Br(s))},isAttributeInternal:r}},cy=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),dy=(t,e,n,r)=>{const o=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const c=r.attributes[l];c?c.nodes.push(n):r.attributes[l]={filter:i,nodes:[n]}}}},uy=(t,e)=>{const n=(r,o)=>{we(r,s=>{const a=wn(s.nodes);Z(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(o?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!Se(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},fy=(t,e,n,r={})=>{const o=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((c,u)=>{let f=c;for(;f=f.walk();)dy(s,a,f,l)})(i),l})(t,e,n);uy(o,r)},bm=(t,e,n,r)=>{if((t.pad_empty_with_br||e.insert)&&n(r)){const o=new Kn("br",1);e.insert&&o.attr("data-mce-bogus","1"),r.empty().append(o)}else r.empty().append(new Kn("#text",3)).value=hn},my=(t,e)=>{const n=t?.firstChild;return ct(n)&&n===t.lastChild&&n.name===e},kl=(t,e,n,r)=>r.isEmpty(e,n,o=>((s,a)=>{const i=s.getElementRule(a.name);return!0===i?.paddEmpty})(t,o)),uA=t=>{let e;for(let n=t;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(e=n)}return k.from(e)},vm=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const r=t.children();for(const o of r)n&&!e.isValidChild(n.name,o.name)&&vm(o,e,n);t.unwrap()}},ym=(t,e,n,r=kt)=>{const o=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=lt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=u=>u!==n&&!i[u.name];for(let u=0;u<t.length;u++){const f=t[u];let p,b,g;if(!f.parent||l.has(f))continue;if(o[f.name]&&"li"===f.parent.name){let h=f.next;for(;h&&o[h.name];)h.name="li",l.add(h),f.parent.insert(h,f.parent),h=h.next;f.unwrap();continue}const v=[f];for(p=f.parent;p&&!e.isValidChild(p.name,f.name)&&c(p);p=p.parent)v.push(p);if(p&&v.length>1)if(Cm(e,f,p))vm(f,e);else{v.reverse(),b=v[0].clone(),r(b);let h=b;for(let C=0;C<v.length-1;C++){e.isValidChild(h.name,v[C].name)&&C>0?(g=v[C].clone(),r(g),h.append(g)):g=h;for(let S=v[C].firstChild;S&&S!==v[C+1];){const E=S.next;g.append(S),S=E}h=g}kl(e,s,a,b)?p.insert(f,v[0],!0):(p.insert(b,v[0],!0),p.insert(f,b)),p=v[0],(kl(e,s,a,p)||my(p,"br"))&&p.empty().remove()}else if(f.parent){if("li"===f.name){let h=f.prev;if(h&&("ul"===h.name||"ol"===h.name)){h.append(f);continue}if(h=f.next,h&&("ul"===h.name||"ol"===h.name)&&h.firstChild){h.insert(f,h.firstChild,!0);continue}const C=new Kn("ul",1);r(C),f.wrap(C);continue}if(e.isValidChild(f.parent.name,"div")&&e.isValidChild("div",f.name)){const h=new Kn("div",1);r(h),f.wrap(h)}else vm(f,e)}}},Cm=(t,e,n=e.parent)=>{return!(!n||(!t.children[e.name]||t.isValidChild(n.name,e.name))&&("a"!==e.name||!((r,o)=>{let s=r;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n))&&(r=n,"summary"!==r.name||!cy(e)||n?.firstChild===e&&n?.lastChild===e));var r},xm=t=>t.collapsed?t:(e=>{const n=Y.fromRangeStart(e),r=Y.fromRangeEnd(e),o=e.commonAncestorContainer;return Rr(!1,o,r).map(s=>!Lo(n,r,o)&&Lo(n,s,o)?((a,i,l,c)=>{const u=document.createRange();return u.setStart(a,i),u.setEnd(l,c),u})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),wm=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},py=(t,e)=>{const n=Y.after(t),r=Io(e).prev(n);return r?r.toRange():null},gA=["pre"],Sm=gc,hA=(t,e,n)=>{var r,o;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,c=Os({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=br(e)),-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u);let f=s.getRng();const p=f.startContainer,b=t.getBody();var E,N;p===b&&s.isCollapsed()&&a.isBlock(b.firstChild)&&(E=t,ct(N=b.firstChild)&&!E.schema.getVoidElements()[N.nodeName])&&a.isEmpty(b.firstChild)&&(f=a.createRng(),f.setStart(b.firstChild,0),f.setEnd(b.firstChild,0),s.setRng(f)),s.isCollapsed()||(E=>{const N=E.dom,A=xm(E.selection.getRng());E.selection.setRng(A);const R=N.getParent(A.startContainer,Sm);var L,P,j;L=N,P=A,ct(j=R)&&j===L.getParent(P.endContainer,Sm)&&Sf(D(j),P)?mm(E,A,D(R)):A.startContainer===A.endContainer&&A.endOffset-A.startOffset==1&&ot(A.startContainer.childNodes[A.startOffset])?A.deleteContents():E.getDoc().execCommand("Delete",!1)})(t);const g=s.getNode(),v={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},h=i.parse(e,v);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,r=e.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,s)=>{const a=o.getNonEmptyElements();return ct(s)&&(s.isEmpty(a)||(l=s,o.getBlockElements()[l.name]&&ct((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===hn)(l.firstChild)));var l,c})(t,r)&&(r=r?.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(t.schema,h)&&((E,N)=>!!wm(E,N))(a,g))return f=((t,e,n,r)=>{const o=((f,p,b)=>{const g=p.serialize(b);return(v=>{var h,C;const S=v.firstChild,E=v.lastChild;return S&&"META"===S.nodeName&&(null===(h=S.parentNode)||void 0===h||h.removeChild(S)),E&&"mce_marker"===E.id&&(null===(C=E.parentNode)||void 0===C||C.removeChild(E)),v})(f.createFragment(g))})(e,t,r),s=wm(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||ct(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((r=e.firstChild).data===hn||He(r)))?t.slice(0,-1):t;var r,e,n})((i=o.firstChild,Xt(null!==(l=i?.childNodes)&&void 0!==l?l:[],f=>"LI"===f.nodeName)));var i,l;const c=e.getRoot(),u=f=>{const p=Y.fromRangeStart(n),b=Io(e.getRoot()),g=1===f?b.prev(p):b.next(p),v=g?.getNode();return!v||wm(e,v)!==s};return s?u(1)?((f,p,b)=>{const g=f.parentNode;return g&&lt.each(p,v=>{g.insertBefore(v,f)}),((v,h)=>{const C=Y.before(v),S=Io(h).next(C);return S?S.toRange():null})(f,b)})(s,a,c):u(2)?(f=s,b=c,e.insertAfter((p=a).reverse(),f),py(p[0],b)):((f,p,b,g)=>{const v=((C,S)=>{const E=S.cloneRange(),N=S.cloneRange();return E.setStartBefore(C),N.setEndAfter(C),[E.cloneContents(),N.cloneContents()]})(f,g),h=f.parentNode;return h&&(h.insertBefore(v[0],f),lt.each(p,C=>{h.insertBefore(C,f)}),h.insertBefore(v[1],f),h.removeChild(f)),py(p[p.length-1],b)})(s,a,c,n):null;var f,p,b})(c,a,s.getRng(),h),f&&s.setRng(f),e;!0===n.paste&&((E,N,A,R)=>{var L;const P=N.firstChild,j=N.lastChild,W=P===("bookmark"===j.attr("data-mce-type")?j.prev:j),B=Rt(gA,P.name);if(W&&B){const I="false"!==P.attr("contenteditable"),z=(null===(L=E.getParent(A,E.isBlock))||void 0===L?void 0:L.nodeName.toLowerCase())===P.name,G=k.from(wa(R,A)).forall(Vr);return I&&z&&G}return!1})(a,h,g,t.getBody())&&(null===(r=h.firstChild)||void 0===r||r.unwrap()),(E=>{let N=E;for(;N=N.walk();)1===N.type&&N.attr("data-mce-fragment","1")})(h);let C=h.lastChild;if(C&&"mce_marker"===C.attr("id")){const E=C;for(C=C.prev;C;C=C.walk(!0))if(3===C.type||!a.isBlock(C.name)){C.parent&&t.schema.isValidChild(C.parent.name,"span")&&C.parent.insert(E,C,"br"===C.name);break}}if(t._selectionOverrides.showBlockCaretContainer(g),v.invalid||((E,N,A)=>{var R;return Ae(A.children(),cy)&&"SUMMARY"===(null===(R=E.getParent(N,E.isBlock))||void 0===R?void 0:R.nodeName)})(a,g,h)){t.selection.setContent(u);let E,N=s.getNode();const A=t.getBody();for($i(N)?N=E=A:E=N;E&&E!==A;)N=E,E=E.parentNode;e=N===A?A.innerHTML:a.getOuterHTML(N);const R=i.parse(e),L=(I=>{for(let z=I;z;z=z.walk())if("mce_marker"===z.attr("id"))return k.some(z);return k.none()})(R),P=L.bind(uA).getOr(R);L.each(I=>I.replace(h));const j=h.children(),W=null!==(o=h.parent)&&void 0!==o?o:R;h.unwrap();const B=Xt(j,I=>Cm(t.schema,I,W));ym(B,t.schema,P),fy(i.getNodeFilters(),i.getAttributeFilters(),R),e=c.serialize(R),N===A?a.setHTML(A,e):a.setOuterHTML(N,e)}else e=c.serialize(h),((E,N,A)=>{var R;if("all"===A.getAttribute("data-mce-bogus"))null===(R=A.parentNode)||void 0===R||R.insertBefore(E.dom.createFragment(N),A);else{const L=A.firstChild;!L||L===A.lastChild&&"BR"===L.nodeName?E.dom.setHTML(A,N):E.selection.setContent(N,{no_events:!0})}})(t,e,g);var S;return((E,N)=>{const A=E.schema.getTextInlineElements(),R=E.dom;if(N){const L=E.getBody(),P=hm(E),j="*[data-mce-fragment]",W=R.select(j);lt.each(W,B=>{const I=st=>ct(A[st.nodeName.toLowerCase()]),z=st=>1===st.childNodes.length;if(!yv(R,G=B)&&(!yv(st=R,rt=G)||!Ae(ci(st,rt),wt=>bv.has(wt)))&&I(B)&&z(B)){const st=ci(R,B),rt=(xt,pt)=>ar(xt,Et=>Rt(pt,Et)),wt=xt=>z(B)&&R.is(xt,j)&&I(xt)&&(xt.nodeName===B.nodeName&&rt(st,ci(R,xt))||wt(xt.children[0])),At=xt=>ct(xt)&&xt!==L&&(P.compare(B,xt)||At(xt.parentElement)),Bt=xt=>ct(xt)&&xt!==L&&R.is(xt,j)&&(((pt,Et,F)=>{const U=ci(pt,Et),X=ci(pt,F),Q=gt=>{var ft,Dt;const Ut=null!==(ft=pt.getStyle(Et,gt))&&void 0!==ft?ft:"",Gt=null!==(Dt=pt.getStyle(F,gt))&&void 0!==Dt?Dt:"";return Sr(Ut)&&Sr(Gt)&&Ut!==Gt};return Ae(U,gt=>{const ft=Dt=>Ae(Dt,Ut=>Ut===gt);if(!ft(X)&&ft(vv)){const Dt=Xt(X,Ut=>Ae(vv,Gt=>Ve(Ut,Gt)));return Ae(Dt,Q)}return Q(gt)})})(R,B,xt)||Bt(xt.parentElement));(wt(B.children[0])||At(B.parentElement)&&!Bt(B.parentElement))&&R.remove(B,!0)}var st,rt,G})}})(t,l),((E,N)=>{var A,R,L;let P;const j=E.dom,W=E.selection;if(!N)return;W.scrollIntoView(N);const B=wa(E.getBody(),N);if(B&&"false"===j.getContentEditable(B))return j.remove(N),void W.select(B);let I=j.createRng();const z=N.previousSibling;if(ot(z)){I.setStart(z,null!==(R=null===(A=z.nodeValue)||void 0===A?void 0:A.length)&&void 0!==R?R:0);const st=N.nextSibling;ot(st)&&(z.appendData(st.data),null===(L=st.parentNode)||void 0===L||L.removeChild(st))}else I.setStartBefore(N),I.setEndBefore(N);const G=j.getParent(N,j.isBlock);if(j.remove(N),G&&j.isEmpty(G)){const st=Sm(G);ae(D(G)),I.setStart(G,0),I.setEnd(G,0),st||G.getAttribute("data-mce-fragment")||!(P=(rt=>{let wt=Y.fromRangeStart(rt);return wt=Io(E.getBody()).next(wt),wt?.toRange()})(I))?j.add(G,j.create("br",st?{}:{"data-mce-bogus":"1"})):(I=P,j.remove(G))}W.setRng(I)})(t,a.get("mce_marker")),S=t.getBody(),lt.each(S.getElementsByTagName("*"),E=>{E.removeAttribute("data-mce-fragment")}),((E,N,A)=>{k.from(E.getParent(N,"td,th")).map(D).each(R=>{return P=A,void $r(L=R).each(j=>{$n(j).each(W=>{P.isBlock(fe(L))&&ua(j)&&P.isBlock(fe(W))&&ue(j)})});var L,P})})(a,s.getStart(),t.schema),((E,N,A)=>{const R=Cs(D(A),L=>Ft(L,D(N)));Us(R,R.length-2).filter(Hn).fold(()=>_u(E,N),L=>_u(E,L.dom))})(t.schema,t.getBody(),s.getStart()),e},ad=t=>t instanceof Kn,Em=(t,e,n)=>{var r;t.dom.setHTML(t.getBody(),e),!0!==n&&li(r=t)&&jn(r.getBody()).each(o=>{const s=o.getNode(),a=Bo(s)?jn(s).getOr(o):o;r.selection.setRng(a.toRange())})},gy=t=>he(t)?t:xe,km=(t,e,n)=>{const r=e(t),o=gy(n);return r.orThunk(()=>o(t)?k.none():((s,a,i)=>{let l=s.dom;const c=gy(i);for(;l.parentNode;){l=l.parentNode;const u=D(l),f=a(u);if(f.isSome())return f;if(c(u))break}return k.none()})(t,e,o))},_m=Tf,hy=(t,e,n)=>{const r=t.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const s=r[o];if(Dr(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},Nm=(t,e,n,r,o)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!hy(t,i,n)||i.parentNode===s||!!jo(t,i,n,r,!0));return!!jo(t,a,n,r,o)},id=(t,e,n)=>!(!un(n)||!_m(e,n.inline))||!(!Fo(n)||!_m(e,n.block))||!!Dr(n)&&_t(e)&&t.is(e,n.selector),by=(t,e,n,r,o,s)=>{const a=n[r],i="attributes"===r;if(he(n.onmatch))return n.onmatch(e,n,r);if(a)if(ec(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):Uc(t,e,a[l]))return!0}else for(const l in a)if(zt(a,l)){const c=i?t.getAttrib(e,l):Uc(t,e,l),u=Rs(a[l],s),f=Se(c)||hs(c);if(f&&Se(u))continue;if(o&&f&&!n.exact||(!o||n.exact)&&!_m(c,Rf(u,l)))return!1}return!0},jo=(t,e,n,r,o)=>{const s=t.formatter.get(n),a=t.dom;if(s&&_t(e))for(let i=0;i<s.length;i++){const l=s[i];if(id(t.dom,e,l)&&by(a,e,l,"attributes",o,r)&&by(a,e,l,"styles",o,r)){const c=l.classes;if(c)for(let u=0;u<c.length;u++)if(!t.dom.hasClass(e,Rs(c[u],r)))return;return l}}},Am=(t,e,n,r,o)=>{if(r)return Nm(t,r,e,n,o);if(r=t.selection.getNode(),Nm(t,r,e,n,o))return!0;const s=t.selection.getStart();return!(s===r||!Nm(t,s,e,n,o))},_l=vn,vy=t=>{if(t){const e=new gn(t,t);for(let n=e.current();n;n=e.next())if(ot(n))return n}return null},Tm=t=>{const e=Pt("span");return no(e,{id:vf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Kt(e,le(_l)),e},Rm=(t,e,n)=>{const r=t.dom,o=t.selection;if(ib(e))Ca(t,!1,D(e),n,!0);else{const s=o.getRng(),a=r.getParent(e,r.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,u=s.endOffset,f=(p=>{const b=vy(p);return b&&b.data.charAt(0)===_l&&b.deleteData(0,1),b})(e);r.remove(e,!0),i===f&&l>0&&s.setStart(f,l-1),c===f&&u>0&&s.setEnd(f,u-1),a&&r.isEmpty(a)&&ks(D(a)),o.setRng(s)}},Om=(t,e,n)=>{const r=t.dom,o=t.selection;if(e)Rm(t,e,n);else if(!(e=ha(t.getBody(),o.getStart())))for(;e=r.get(vf);)Rm(t,e,n)},yy=(t,e)=>(t.appendChild(e),e),Cy=(t,e)=>{var n;const r=Wo(t,(s,a)=>yy(s,a.cloneNode(!1)),e),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return yy(r,o.createTextNode(_l))},xy=t=>{const e=Tm(!1),n=Cy(t,e.dom);return{caretContainer:e,caretPosition:Y(n,0)}},wy=(t,e)=>{const{caretContainer:n,caretPosition:r}=xy(e);return jt(D(t),n),ue(D(t)),r},Sy=(t,e)=>{if(Or(e.dom))return!1;const n=t.schema.getTextInlineElements();return zt(n,fe(e))&&!Or(e.dom)&&!na(e.dom)},Nl={},Ey=lo(["pre"]);((t,e)=>{Nl[t]||(Nl[t]=[]),Nl[t].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=Xt(Xt(r,Ey),(s=>a=>{const i=a.previousSibling;return Ey(i)&&Rt(s,i)})(r));Z(o,s=>{((a,i)=>{const l=D(i),c=Le(l).dom;ue(l),be(D(a),[Pt("br",c),Pt("br",c),...Ee(l)])})(s.previousSibling,s)})}})})("pre");const ky=["fontWeight","fontStyle","color","fontSize","fontFamily"],_y=(t,e)=>{const n=t.get(e);return it(n)?Ge(n,r=>{return un(r)&&"span"===r.inline&&Yt((o=r).styles)&&Ae(ln(o.styles),s=>Rt(ky,s));var o}):k.none()},Ny=(t,e)=>cr(e,Y.fromRangeStart(t)).isNone(),Ay=(t,e)=>!1===rr(e,Y.fromRangeEnd(t)).exists(n=>!He(n.getNode())||rr(e,n).isSome()),Ty=t=>e=>qE(e)&&t.isEditable(e),Ry=t=>Xt(t.getSelectedBlocks(),Ty(t.dom)),Bm=lt.each,Dm=t=>_t(t)&&!Br(t)&&!Or(t)&&!na(t),Oy=(t,e)=>{for(let n=t;n;n=n[e]){if(ot(n)&&Sr(n.data))return t;if(_t(n)&&!Br(n))return n}return t},By=(t,e,n)=>{const r=hm(t),o=es(e)&&t.dom.isEditable(e),s=es(n)&&t.dom.isEditable(n);if(o&&s){const a=Oy(e,"previousSibling"),i=Oy(n,"nextSibling");if(r.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return t.dom.remove(i),lt.each(lt.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},Dy=(t,e,n,r)=>{var o;if(r&&!1!==e.merge_siblings){const s=null!==(o=By(t,ob(r),r))&&void 0!==o?o:r;By(t,s,ob(s,!0))}},Pm=(t,e,n)=>{Bm(t.childNodes,r=>{Dm(r)&&(e(r)&&n(r),r.hasChildNodes()&&Pm(r,e,n))})},Py=(t,e)=>n=>!(!n||!Uc(t,n,e)),Ly=(t,e,n)=>r=>{var o,s;t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=t,"SPAN"===(s=r).nodeName&&0===o.getAttribs(s).length&&o.remove(s,!0)},Sa=Po([{keep:[]},{rename:["name"]},{removed:[]}]),vA=/^(src|href|style)$/,Lm=lt.each,ld=Tf,My=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),Iy=(t,e,n)=>{let r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(_t(r)){const s=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>s?s:o]}return ot(r)&&n&&o>=r.data.length&&(r=new gn(r,t.getBody()).next()||r),ot(r)&&!n&&0===o&&(r=new gn(r,t.getBody()).prev()||r),r},Fy=(t,e)=>{const n=e?"firstChild":"lastChild",r=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&r?"TR"===t.nodeName&&r[n]||r:t},Mm=(t,e,n,r)=>{var o;const s=t.create(n,r);return null===(o=e.parentNode)||void 0===o||o.insertBefore(s,e),s.appendChild(e),s},jy=(t,e,n,r,o)=>{const s=D(e),a=D(t.create(r,o)),i=n?er(s):Ao(s);return be(a,i),n?(jt(s,a),ke(a,s)):(Lt(s,a),Kt(a,s)),a.dom},zy=(t,e,n)=>{const r=e.parentNode;let o;const s=t.dom,a=Fn(t);var i;Fo(n)&&r===s.getRoot()&&(n.list_block&&ld(e,n.list_block)||Z(wn(e.childNodes),i=>{oi(t,a,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=Mm(s,i,a),s.setAttribs(o,al(t))):o=null})),Dr(i=n)&&un(i)&&No(Re(i,"mixed"),!0)&&!ld(n.inline,e)||s.remove(e,!0)},Uy=(t,e,n)=>x(t)?{name:e,value:null}:{name:t,value:Rs(e,n)},Hy=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},qy=(t,e,n,r,o)=>{let s=!1;Lm(n.styles,(a,i)=>{const{name:l,value:c}=Uy(i,a,r),u=Rf(c,l);(n.remove_similar||Jt(c)||!_t(o)||ld(Uc(t,o,l),u))&&t.setStyle(e,l,""),s=!0}),s&&Hy(t,e)},$y=(t,e,n,r,o)=>{const s=t.dom,a=hm(t),i=t.schema;if(un(e)&&Au(i,e.inline)&&oa(i,r)&&r.parentElement===t.getBody())return zy(t,r,e),Sa.removed();if(!e.ceFalseOverride&&r&&"false"===s.getContentEditableParent(r)||r&&!id(s,r,e)&&(!e.links||"A"!==r.nodeName))return Sa.keep();const l=r,c=e.preserve_attributes;if(un(e)&&"all"===e.remove&&it(c)){const u=Xt(s.getAttribs(l),f=>Rt(c,f.name.toLowerCase()));if(s.removeAllAttribs(l),Z(u,f=>s.setAttrib(l,f.name,f.value)),u.length>0)return Sa.rename("span")}if("all"!==e.remove){qy(s,l,e,n,o),Lm(e.attributes,(f,p)=>{const{name:b,value:g}=Uy(p,f,n);if(e.remove_similar||Jt(g)||!_t(o)||ld(s.getAttrib(o,b),g)){if("class"===b){const v=s.getAttrib(l,b);if(v){let h="";if(Z(v.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(h+=(h?" ":"")+C)}),h)return void s.setAttrib(l,b,h)}}if(vA.test(b)&&l.removeAttribute("data-mce-"+b),"style"===b&&lo(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(b),void s.setStyle(l,"list-style-type","none");"class"===b&&l.removeAttribute("className"),l.removeAttribute(b)}}),Lm(e.classes,f=>{f=Rs(f,n),_t(o)&&!s.hasClass(o,f)||s.removeClass(l,f)});const u=s.getAttribs(l);for(let f=0;f<u.length;f++)if(!a.isAttributeInternal(u[f].nodeName))return Sa.keep()}return"none"!==e.remove?(zy(t,l,e),Sa.removed()):Sa.keep()},yA=(t,e,n,r)=>$y(t,e,n,r,r).fold(mt(r),o=>(t.dom.createFragment().appendChild(r),t.dom.rename(r,o)),mt(null)),Wy=(t,e,n,r,o)=>{(r||t.selection.isEditable())&&((s,a,i,l,c)=>{const u=s.formatter.get(a),f=u[0],p=s.dom,b=s.selection,g=E=>{const N=((A,R,L,P,j)=>{let W;return R.parentNode&&Z(Hc(A.dom,R.parentNode).reverse(),B=>{if(!W&&_t(B)&&"_start"!==B.id&&"_end"!==B.id){const I=jo(A,B,L,P,j);I&&!1!==I.split&&(W=B)}}),W})(s,E,a,i,c);return((A,R,L,P,j,W,B,I)=>{var z,G;let st,rt;const wt=A.dom;if(L){const At=L.parentNode;for(let Bt=P.parentNode;Bt&&Bt!==At;Bt=Bt.parentNode){let xt=wt.clone(Bt,!1);for(let pt=0;pt<R.length&&(xt=yA(A,R[pt],I,xt),null!==xt);pt++);xt&&(st&&xt.appendChild(st),rt||(rt=xt),st=xt)}B.mixed&&wt.isBlock(L)||(P=null!==(z=wt.split(L,P))&&void 0!==z?z:P),st&&rt&&(null===(G=j.parentNode)||void 0===G||G.insertBefore(st,j),rt.appendChild(j),un(B)&&Dy(A,B,0,st))}return P})(s,u,N,E,E,0,f,i)},v=E=>Ae(u,N=>Al(s,N,i,E,E)),h=E=>{const N=wn(E.childNodes),A=v(E)||Ae(u,L=>id(p,E,L)),R=E.parentNode;if(!A&&ct(R)&&Bf(f)&&v(R),f.deep&&N.length)for(let L=0;L<N.length;L++)h(N[L]);Z(["underline","line-through","overline"],L=>{_t(E)&&s.dom.getStyle(E,"text-decoration")===L&&E.parentNode&&ab(p,E.parentNode)===L&&Al(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:L}},void 0,E)})},C=E=>{const N=p.get(E?"_start":"_end");if(N){let A=N[E?"firstChild":"lastChild"];return Br(R=A)&&_t(R)&&("_start"===R.id||"_end"===R.id)&&(A=A[E?"firstChild":"lastChild"]),ot(A)&&0===A.data.length&&(A=E?N.previousSibling||N.nextSibling:N.nextSibling||N.previousSibling),p.remove(N,!0),A}var R;return null},S=E=>{let N,A,R=ba(p,E,u,E.collapsed);if(f.split){if(R=Yc(R),N=Iy(s,R,!0),A=Iy(s,R),N!==A){if(N=Fy(N,!0),A=Fy(A,!1),My(p,N,A)){const P=k.from(N.firstChild).getOr(N);return g(jy(p,P,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void C(!0)}if(My(p,A,N)){const P=k.from(A.lastChild).getOr(A);return g(jy(p,P,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void C(!1)}N=Mm(p,N,"span",{id:"_start","data-mce-type":"bookmark"}),A=Mm(p,A,"span",{id:"_end","data-mce-type":"bookmark"});const L=p.createRng();L.setStartAfter(N),L.setEndBefore(A),hl(p,L,P=>{Z(P,j=>{Br(j)||Br(j.parentNode)||g(j)})}),g(N),g(A),N=C(!0),A=C()}else N=A=g(N);R.startContainer=N.parentNode?N.parentNode:N,R.startOffset=p.nodeIndex(N),R.endContainer=A.parentNode?A.parentNode:A,R.endOffset=p.nodeIndex(A)+1}hl(p,R,L=>{Z(L,h)})};if(l){if(gl(l)){const E=p.createRng();E.setStartBefore(l),E.setEndAfter(l),S(E)}else S(l);Sb(s,a,l,i)}else b.isCollapsed()&&un(f)&&!ri(s).length?((t,e,n,r)=>{const o=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),c=l.startContainer,u=l.startOffset;let f=c;ot(c)&&(u!==c.data.length&&(a=!0),f=f.parentNode);const p=[];let b;for(;f;){if(jo(t,f,e,n,r)){b=f;break}f.nextSibling&&(a=!0),p.push(f),f=f.parentNode}if(b)if(a){const g=s.getBookmark();l.collapse(!0);let v=ba(o,l,i,!0);v=Yc(v),t.formatter.remove(e,n,v,r),s.moveToBookmark(g)}else{const g=ha(t.getBody(),b),v=ct(g)?o.getParents(b.parentNode,je,g):[],h=Tm(!1).dom;((E,N,A)=>{var R,L;const P=E.dom,j=P.getParent(A,St(Nf,E.schema));j&&P.isEmpty(j)?null===(R=A.parentNode)||void 0===R||R.replaceChild(N,A):((W=>{const B=Mn(W,"br"),I=Xt((z=>{const G=[];let st=z.dom;for(;st;)G.push(D(st)),st=st.lastChild;return G})(W).slice(-1),ua);B.length===I.length&&Z(I,ue)})(D(A)),P.isEmpty(A)?null===(L=A.parentNode)||void 0===L||L.replaceChild(N,A):P.insertAfter(N,A))})(t,h,g??b);const C=((E,N,A,R,L,P)=>{const j=E.formatter,W=E.dom,B=Xt(ln(j.get()),z=>z!==R&&!mn(z,"removeformat")),I=(z=E,G=A,xn(B,(rt,wt)=>{const At=Of(z,wt,pt=>{const Et=F=>he(F)||F.length>1&&"%"===F.charAt(0);return Ae(["styles","attributes"],F=>Re(pt,F).exists(U=>{const X=it(U)?U:Da(U);return Ae(X,Et)}))});return z.formatter.matchNode(G,wt,{},At)?rt.concat([wt]):rt},[]));var z,G;if(Xt(I,z=>!((G,st,rt)=>{const wt=["inline","block","selector","attributes","styles","classes"],At=Bt=>Eo(Bt,(xt,pt)=>Ae(wt,Et=>Et===pt));return Of(G,st,Bt=>{const xt=At(Bt);return Of(G,rt,pt=>{const Et=At(pt);return((F,U,X=Xe)=>ie(X).eq(F,U))(xt,Et)})})})(E,z,R)).length>0){const z=A.cloneNode(!1);return W.add(N,z),j.remove(R,L,z,P),W.remove(z),k.some(z)}return k.none()})(t,h,b,e,n,r),S=Cy([...p,...C.toArray(),...v],h);g&&Rm(t,g,ct(g)),s.setCursorLocation(S,1),o.isEmpty(b)&&o.remove(b)}})(s,a,i,c):(rb(s,()=>kf(s,S),E=>un(f)&&Am(s,a,i,E)),s.nodeChanged()),E=s,A=i,"removeformat"===(N=a)?Z(Ry(E.selection),R=>{Z(ky,L=>E.dom.setStyle(R,L,"")),Hy(E.dom,R)}):_y(E.formatter,N).each(R=>{Z(Ry(E.selection),L=>qy(E.dom,L,R,A,null))}),Sb(s,a,l,i);var E,N,A})(t,e,n,r,o)},Al=(t,e,n,r,o)=>$y(t,e,n,r,o).fold(xe,s=>(t.dom.rename(r,s),!0),je),Vy=lt.each,cd=lt.each,Ky=(t,e,n,r)=>{if(cd(n.styles,(o,s)=>{t.setStyle(e,s,Rs(o,r))}),n.styles){const o=t.getAttrib(e,"style");o&&t.setAttrib(e,"data-mce-style",o)}},CA=(t,e,n,r)=>{const o=t.formatter.get(e),s=o[0],a=!r&&t.selection.isCollapsed(),i=t.dom,l=t.selection,c=(g,v=s)=>{he(v.onformat)&&v.onformat(g,v,n,r),Ky(i,g,v,n),cd(v.attributes,(h,C)=>{i.setAttrib(g,C,Rs(h,n))}),cd(v.classes,h=>{const C=Rs(h,n);i.hasClass(g,C)||i.addClass(g,C)})},u=(g,v)=>{let h=!1;return cd(g,C=>!(!Dr(C)||("false"!==i.getContentEditable(v)||C.ceFalseOverride)&&(!ct(C.collapsed)||C.collapsed===a)&&i.is(v,C.selector)&&!Or(v)&&(c(v,C),h=!0,1))),h},p=(g,v,h)=>{const C=[];let S=!0;const E=s.inline||s.block,N=(g=>{if(Tt(g)){const v=i.create(g);return c(v),v}return null})(E);hl(g,v,A=>{let R;const L=P=>{let j=!1,W=S,B=!1;const I=P.parentNode,z=I.nodeName.toLowerCase(),G=g.getContentEditable(P);ct(G)&&(W=S,S="true"===G,j=!0,B=sb(t,P));const st=S&&!j;if(He(P)&&!((rt,wt,At,Bt)=>{if(a_(rt)&&un(wt)&&At.parentNode){const xt=ih(rt.schema),pt=((t,e)=>((n,r)=>{const o=n.dom;return o.parentNode?(s=D(o.parentNode),Ge(s.dom.childNodes,i=>(s=>!Ft(n,s)&&r(s))(D(i))).map(D)):k.none();var s})(t,e).isSome())(D(At),Et=>Or(Et.dom));return fn(xt,Bt)&&ns(rt.schema,At.parentNode,{skipBogus:!1,includeZwsp:!0})&&!pt}return!1})(t,s,P,z))return R=null,void(Fo(s)&&g.remove(P));if(rt=P,Fo(wt=s)&&!0===wt.wrapper&&jo(t,rt,e,n))R=null;else{if(((rt,wt,At)=>{const Bt=Fo(xt=s)&&!0!==xt.wrapper&&Nf(t.schema,rt)&&oi(t,wt,E);var xt;return At&&Bt})(P,z,st)){const rt=g.rename(P,E);return c(rt),C.push(rt),void(R=null)}if(Dr(s)){let rt=u(o,P);if(!rt&&ct(I)&&Bf(s)&&(rt=u(o,I)),!un(s)||rt)return void(R=null)}ct(N)&&((rt,wt,At,Bt)=>{const xt=rt.nodeName.toLowerCase(),pt=oi(t,E,xt)&&oi(t,wt,E),Et=!h&&ot(rt)&&Ec(rt.data),F=Or(rt),U=!un(s)||!g.isBlock(rt);return(At||Bt)&&pt&&!Et&&!F&&U})(P,z,st,B)?(R||(R=g.clone(N,!1),I.insertBefore(R,P),C.push(R)),B&&j&&(S=W),R.appendChild(P)):(R=null,Z(wn(P.childNodes),L),j&&(S=W),R=null)}var rt,wt};Z(A,L)}),!0===s.links&&Z(C,A=>{const R=L=>{"A"===L.nodeName&&c(L,s),Z(wn(L.childNodes),R)};R(A)}),Z(C,A=>{const R=(L=>{let P=0;return Z(L.childNodes,j=>{var W;ct(W=j)&&ot(W)&&0===W.length||Br(j)||P++}),P})(A);var L;!(C.length>1)&&g.isBlock(A)||0!==R?(un(s)||Fo(s)&&s.wrapper)&&(s.exact||1!==R||(A=Ge((L=A).childNodes,_f).filter(j=>"false"!==g.getContentEditable(j)&&id(g,j,s)).map(j=>{const W=g.clone(j,!1);return c(W),g.replace(W,L,!0),g.remove(j,!0),W}).getOr(L)),((L,P,j,W)=>{Vy(P,B=>{var I,z,G;un(B)&&Vy(L.dom.select(B.inline,W),I=>{Dm(I)&&Al(L,B,j,I,B.exact?I:null)}),I=L.dom,G=W,(z=B).clear_child_styles&&Bm(I.select(z.links?"*:not(a)":"*",G),rt=>{Dm(rt)&&I.isEditable(rt)&&Bm(z.styles,(wt,At)=>{I.setStyle(rt,At,"")})})})})(t,o,n,A),((L,P,j,W,B)=>{const I=B.parentNode;jo(L,I,j,W)&&Al(L,P,W,B)||P.merge_with_parents&&I&&L.dom.getParent(I,z=>!!jo(L,z,j,W)&&(Al(L,P,W,B),!0))})(t,s,e,n,A),((L,P,j,W)=>{if(P.styles&&P.styles.backgroundColor){const B=Py(L,"fontSize");Pm(W,I=>B(I)&&L.isEditable(I),Ly(L,"backgroundColor",Rs(P.styles.backgroundColor,j)))}})(g,s,n,A),((L,P,j,W)=>{const B=I=>{if(es(I)&&_t(I.parentNode)&&L.isEditable(I)){const z=ab(L,I.parentNode);L.getStyle(I,"color")&&z?L.setStyle(I,"text-decoration",z):L.getStyle(I,"text-decoration")===z&&L.setStyle(I,"text-decoration",null)}};P.styles&&(P.styles.color||P.styles.textDecoration)&&(lt.walk(W,B,"childNodes"),B(W))})(g,s,0,A),((L,P,j,W)=>{if(un(P)&&("sub"===P.inline||"sup"===P.inline)){const B=Py(L,"fontSize");Pm(W,z=>B(z)&&L.isEditable(z),Ly(L,"fontSize",""));const I=Xt(L.select("sup"===P.inline?"sub":"sup",W),L.isEditable);L.remove(I,!0)}})(g,s,0,A),Dy(t,s,0,A)):g.remove(A,!0)})},b=gl(r)?r:l.getNode();if("false"===i.getContentEditable(b)&&!sb(t,b))return u(o,r=b),void wb(t,e,r,n);if(s){if(r)if(gl(r)){if(!u(o,r)){const g=i.createRng();g.setStartBefore(r),g.setEndAfter(r),p(i,ba(i,g,o),!0)}}else p(i,r,!0);else a&&un(s)&&!ri(t).length?((g,v,h)=>{let C;const S=g.selection,E=g.formatter.get(v);if(!E)return;const N=S.getRng();let A=N.startOffset;const R=N.startContainer.nodeValue;C=ha(g.getBody(),S.getStart());const L=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(R&&A>0&&A<R.length&&L.test(R.charAt(A))&&L.test(R.charAt(A-1))){const W=S.getBookmark();N.collapse(!0);let B=ba(g.dom,N,E);B=Yc(B),g.formatter.apply(v,h,B),S.moveToBookmark(W)}else{let W=C?vy(C):null;C&&W?.data===_l||(P=g.getDoc(),j=Tm(!0).dom,C=P.importNode(j,!0),W=C.firstChild,N.insertNode(C),A=1),g.formatter.apply(v,h,C),S.setCursorLocation(W,A)}var P,j})(t,e,n):(l.setRng(xm(l.getRng())),rb(t,()=>{kf(t,(g,v)=>{const h=v?g:ba(i,g,o);p(i,h,!1)})},je),t.nodeChanged()),_y(t.formatter,e).each(g=>{var v;Z(Xt((h=>{const C=h.getSelectedBlocks(),S=h.getRng();if(h.isCollapsed())return[];if(1===C.length)return Ny(S,C[0])&&Ay(S,C[0])?C:[];{const E=kn(C).filter(R=>Ny(S,R)).toArray(),N=to(C).filter(R=>Ay(S,R)).toArray(),A=C.slice(1,-1);return E.concat(A).concat(N)}})(v=t.selection),Ty(v.dom)),v=>Ky(i,v,g,n))});v=t,zt(Nl,g=e)&&Z(Nl[g],h=>{h(v)})}var g,v;wb(t,e,r,n)},Xy=(t,e,n,r)=>{(r||t.selection.isEditable())&&CA(t,e,n,r)},Yy=t=>zt(t,"vars"),Gy=t=>t.selection.getStart(),Qy=(t,e,n,r,o)=>Ur(e,s=>{const a=t.formatter.matchNode(s,n,o??{},r);return!Ie(a)},s=>!!hy(t,s,n)||!r&&ct(t.formatter.matchNode(s,n,o,!0))),Zy=(t,e)=>{const n=e??Gy(t);return Xt(Hc(t.dom,n),r=>_t(r)&&!na(r))},Jy=(t,e,n)=>{const r=Zy(t,e);we(n,(o,s)=>{const a=i=>{const l=Qy(t,r,s,i.similar,Yy(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const u=l.getOr(e);Yy(i)?i.callback(c,{node:u,format:s,parents:r}):Z(i.callbacks,f=>f(c,{node:u,format:s,parents:r}))}};Z([o.withSimilar,o.withoutSimilar],a),Z(o.withVars,a)})},tC=lt.explode,eC=()=>{const t={};return{addFilter:(e,n)=>{Z(tC(e),r=>{zt(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>Da(t),removeFilter:(e,n)=>{Z(tC(e),r=>{if(zt(t,r))if(ct(n)){const o=t[r],s=Xt(o.callbacks,a=>a!==n);s.length>0?o.callbacks=s:delete t[r]}else delete t[r]})}}},Im=t=>{const[e,...n]=t.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(o){const s=";base64"===o[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(r):decodeURIComponent(r);return k.some({type:o[1],data:a,base64Encoded:s})}return k.none()},nC=(t,e,n=!0)=>{let r=e;if(n)try{r=atob(e)}catch{return k.none()}const o=new Uint8Array(r.length);for(let s=0;s<o.length;s++)o[s]=r.charCodeAt(s);return k.some(new Blob([o],{type:t}))},rC=t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(t)});let wA=0;const oC=(t,e,n)=>Im(t).bind(({data:r,type:o,base64Encoded:s})=>{if(e&&!s)return k.none();{const a=s?r:btoa(r);return n(a,o)}}),sC=(t,e,n)=>{const r=t.create("blobid"+wA++,e,n);return t.add(r),r},aC=(t,e,n=!1)=>oC(e,n,(r,o)=>k.from(t.getByData(r,o)).orThunk(()=>nC(o,r).map(s=>sC(t,s,r)))),SA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,EA=t=>k.from(t.match(SA)).bind(e=>Us(e,1)).map(e=>Ve(e,"www.")?e.substring(4):e),iC=(t,e)=>{k.from(t.attr("src")).bind(EA).forall(n=>!Rt(e,n))&&t.attr("sandbox","")},Fm=(t,e)=>Ve(t,`${e}/`),{entries:lC,setPrototypeOf:cC,isFrozen:kA,getPrototypeOf:_A,getOwnPropertyDescriptor:NA}=Object;let{freeze:dr,seal:po,create:AA}=Object,{apply:jm,construct:zm}=typeof Reflect<"u"&&Reflect;jm||(jm=function(t,e,n){return t.apply(e,n)}),dr||(dr=function(t){return t}),po||(po=function(t){return t}),zm||(zm=function(t,e){return new t(...e)});const TA=Xr(Array.prototype.forEach),RA=Xr(Array.prototype.pop),Tl=Xr(Array.prototype.push),dd=Xr(String.prototype.toLowerCase),Um=Xr(String.prototype.toString),OA=Xr(String.prototype.match),go=Xr(String.prototype.replace),BA=Xr(String.prototype.indexOf),DA=Xr(String.prototype.trim),Mr=Xr(RegExp.prototype.test),Rl=(dC=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return zm(dC,e)});var dC;function Xr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return jm(t,e,r)}}function ye(t,e,n){var r;n=null!==(r=n)&&void 0!==r?r:dd,cC&&cC(t,null);let o=e.length;for(;o--;){let s=e[o];if("string"==typeof s){const a=n(s);a!==s&&(kA(e)||(e[o]=a),s=a)}t[s]=!0}return t}function di(t){const e=AA(null);for(const[n,r]of lC(t))e[n]=r;return e}function ud(t,e){for(;null!==t;){const n=NA(t,e);if(n){if(n.get)return Xr(n.get);if("function"==typeof n.value)return Xr(n.value)}t=_A(t)}return function(n){return console.warn("fallback value for",n),null}}const uC=dr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Hm=dr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qm=dr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),PA=dr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$m=dr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),LA=dr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),fC=dr(["#text"]),mC=dr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Wm=dr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),pC=dr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fd=dr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MA=po(/\{\{[\w\W]*|[\w\W]*\}\}/gm),IA=po(/<%[\w\W]*|[\w\W]*%>/gm),FA=po(/\${[\w\W]*}/gm),jA=po(/^data-[\-\w.\u00B7-\uFFFF]/),zA=po(/^aria-[\-\w]+$/),gC=po(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),UA=po(/^(?:\w+script|data):/i),HA=po(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hC=po(/^html$/i);var bC=Object.freeze({__proto__:null,MUSTACHE_EXPR:MA,ERB_EXPR:IA,TMPLIT_EXPR:FA,DATA_ATTR:jA,ARIA_ATTR:zA,IS_ALLOWED_URI:gC,IS_SCRIPT_OR_DATA:UA,ATTR_WHITESPACE:HA,DOCTYPE_NAME:hC}),Vm=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=V=>t(V);if(n.version="3.0.5",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;const r=e.document,o=r.currentScript;let{document:s}=e;const{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:c,NodeFilter:u,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:b,trustedTypes:g}=e,v=c.prototype,h=ud(v,"cloneNode"),C=ud(v,"nextSibling"),S=ud(v,"childNodes"),E=ud(v,"parentNode");if("function"==typeof i){const V=s.createElement("template");V.content&&V.content.ownerDocument&&(s=V.content.ownerDocument)}let N,A="";const{implementation:R,createNodeIterator:L,createDocumentFragment:P,getElementsByTagName:j}=s,{importNode:W}=r;let B={};n.isSupported="function"==typeof lC&&"function"==typeof E&&R&&void 0!==R.createHTMLDocument;const{MUSTACHE_EXPR:I,ERB_EXPR:z,TMPLIT_EXPR:G,DATA_ATTR:st,ARIA_ATTR:rt,IS_SCRIPT_OR_DATA:wt,ATTR_WHITESPACE:At}=bC;let{IS_ALLOWED_URI:Bt}=bC,xt=null;const pt=ye({},[...uC,...Hm,...qm,...$m,...fC]);let Et=null;const F=ye({},[...mC,...Wm,...pC,...fd]);let U=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),X=null,Q=null,gt=!0,ft=!0,Dt=!1,Ut=!0,Gt=!1,_e=!1,ze=!1,yr=!1,yt=!1,te=!1,ce=!1,ee=!0,ve=!1,De=!0,ht=!1,It={},Ce=null;const Pe=ye({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let sn=null;const sr=ye({},["audio","video","img","source","image","track"]);let Gr=null;const zn=ye({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ur="http://www.w3.org/1998/Math/MathML",an="http://www.w3.org/2000/svg",Cr="http://www.w3.org/1999/xhtml";let $o=Cr,cs=!1,Oa=null;const _g=ye({},[ur,an,Cr],Um);let Qr;const Fs=["application/xhtml+xml","text/html"];let Cn,Yn=null;const ki=s.createElement("form"),js=function(V){return V instanceof RegExp||V instanceof Function},_i=function(V){if(!Yn||Yn!==V){if(V&&"object"==typeof V||(V={}),V=di(V),Qr=Qr=-1===Fs.indexOf(V.PARSER_MEDIA_TYPE)?"text/html":V.PARSER_MEDIA_TYPE,Cn="application/xhtml+xml"===Qr?Um:dd,xt="ALLOWED_TAGS"in V?ye({},V.ALLOWED_TAGS,Cn):pt,Et="ALLOWED_ATTR"in V?ye({},V.ALLOWED_ATTR,Cn):F,Oa="ALLOWED_NAMESPACES"in V?ye({},V.ALLOWED_NAMESPACES,Um):_g,Gr="ADD_URI_SAFE_ATTR"in V?ye(di(zn),V.ADD_URI_SAFE_ATTR,Cn):zn,sn="ADD_DATA_URI_TAGS"in V?ye(di(sr),V.ADD_DATA_URI_TAGS,Cn):sr,Ce="FORBID_CONTENTS"in V?ye({},V.FORBID_CONTENTS,Cn):Pe,X="FORBID_TAGS"in V?ye({},V.FORBID_TAGS,Cn):{},Q="FORBID_ATTR"in V?ye({},V.FORBID_ATTR,Cn):{},It="USE_PROFILES"in V&&V.USE_PROFILES,gt=!1!==V.ALLOW_ARIA_ATTR,ft=!1!==V.ALLOW_DATA_ATTR,Dt=V.ALLOW_UNKNOWN_PROTOCOLS||!1,Ut=!1!==V.ALLOW_SELF_CLOSE_IN_ATTR,Gt=V.SAFE_FOR_TEMPLATES||!1,_e=V.WHOLE_DOCUMENT||!1,yt=V.RETURN_DOM||!1,te=V.RETURN_DOM_FRAGMENT||!1,ce=V.RETURN_TRUSTED_TYPE||!1,yr=V.FORCE_BODY||!1,ee=!1!==V.SANITIZE_DOM,ve=V.SANITIZE_NAMED_PROPS||!1,De=!1!==V.KEEP_CONTENT,ht=V.IN_PLACE||!1,Bt=V.ALLOWED_URI_REGEXP||gC,$o=V.NAMESPACE||Cr,U=V.CUSTOM_ELEMENT_HANDLING||{},V.CUSTOM_ELEMENT_HANDLING&&js(V.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=V.CUSTOM_ELEMENT_HANDLING.tagNameCheck),V.CUSTOM_ELEMENT_HANDLING&&js(V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),V.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(U.allowCustomizedBuiltInElements=V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Gt&&(ft=!1),te&&(yt=!0),It&&(xt=ye({},[...fC]),Et=[],!0===It.html&&(ye(xt,uC),ye(Et,mC)),!0===It.svg&&(ye(xt,Hm),ye(Et,Wm),ye(Et,fd)),!0===It.svgFilters&&(ye(xt,qm),ye(Et,Wm),ye(Et,fd)),!0===It.mathMl&&(ye(xt,$m),ye(Et,pC),ye(Et,fd))),V.ADD_TAGS&&(xt===pt&&(xt=di(xt)),ye(xt,V.ADD_TAGS,Cn)),V.ADD_ATTR&&(Et===F&&(Et=di(Et)),ye(Et,V.ADD_ATTR,Cn)),V.ADD_URI_SAFE_ATTR&&ye(Gr,V.ADD_URI_SAFE_ATTR,Cn),V.FORBID_CONTENTS&&(Ce===Pe&&(Ce=di(Ce)),ye(Ce,V.FORBID_CONTENTS,Cn)),De&&(xt["#text"]=!0),_e&&ye(xt,["html","head","body"]),xt.table&&(ye(xt,["tbody"]),delete X.tbody),V.TRUSTED_TYPES_POLICY){if("function"!=typeof V.TRUSTED_TYPES_POLICY.createHTML)throw Rl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof V.TRUSTED_TYPES_POLICY.createScriptURL)throw Rl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=V.TRUSTED_TYPES_POLICY,A=N.createHTML("")}else void 0===N&&(N=function(Ot,Wt){if("object"!=typeof Ot||"function"!=typeof Ot.createPolicy)return null;let Ne=null;const Fe="data-tt-policy-suffix";Wt&&Wt.hasAttribute(Fe)&&(Ne=Wt.getAttribute(Fe));const qe="dompurify"+(Ne?"#"+Ne:"");try{return Ot.createPolicy(qe,{createHTML:Ue=>Ue,createScriptURL:Ue=>Ue})}catch{return console.warn("TrustedTypes policy "+qe+" could not be created."),null}}(g,o)),null!==N&&"string"==typeof A&&(A=N.createHTML(""));dr&&dr(V),Yn=V}},TE=ye({},["mi","mo","mn","ms","mtext"]),RE=ye({},["foreignobject","desc","title","annotation-xml"]),LB=ye({},["title","style","font","a","script"]),iu=ye({},Hm);ye(iu,qm),ye(iu,PA);const Ng=ye({},$m);ye(Ng,LA);const Ba=function(V){Tl(n.removed,{element:V});try{V.parentNode.removeChild(V)}catch{V.remove()}},Zl=function(V,Ot){try{Tl(n.removed,{attribute:Ot.getAttributeNode(V),from:Ot})}catch{Tl(n.removed,{attribute:null,from:Ot})}if(Ot.removeAttribute(V),"is"===V&&!Et[V])if(yt||te)try{Ba(Ot)}catch{}else try{Ot.setAttribute(V,"")}catch{}},OE=function(V){let Ot,Wt;if(yr)V="<remove></remove>"+V;else{const qe=OA(V,/^[\r\n\t ]+/);Wt=qe&&qe[0]}"application/xhtml+xml"===Qr&&$o===Cr&&(V='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+V+"</body></html>");const Ne=N?N.createHTML(V):V;if($o===Cr)try{Ot=(new b).parseFromString(Ne,Qr)}catch{}if(!Ot||!Ot.documentElement){Ot=R.createDocument($o,"template",null);try{Ot.documentElement.innerHTML=cs?A:Ne}catch{}}const Fe=Ot.body||Ot.documentElement;return V&&Wt&&Fe.insertBefore(s.createTextNode(Wt),Fe.childNodes[0]||null),$o===Cr?j.call(Ot,_e?"html":"body")[0]:_e?Ot.documentElement:Fe},BE=function(V){return L.call(V.ownerDocument||V,V,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},lu=function(V){return"object"==typeof l?V instanceof l:V&&"object"==typeof V&&"number"==typeof V.nodeType&&"string"==typeof V.nodeName},ds=function(V,Ot,Wt){B[V]&&TA(B[V],Ne=>{Ne.call(n,Ot,Wt,Yn)})},DE=function(V){let Ot;if(ds("beforeSanitizeElements",V,null),(Wt=V)instanceof p&&("string"!=typeof Wt.nodeName||"string"!=typeof Wt.textContent||"function"!=typeof Wt.removeChild||!(Wt.attributes instanceof f)||"function"!=typeof Wt.removeAttribute||"function"!=typeof Wt.setAttribute||"string"!=typeof Wt.namespaceURI||"function"!=typeof Wt.insertBefore||"function"!=typeof Wt.hasChildNodes))return Ba(V),!0;var Wt;const Ne=Cn(V.nodeName);if(ds("uponSanitizeElement",V,{tagName:Ne,allowedTags:xt}),V.hasChildNodes()&&!lu(V.firstElementChild)&&(!lu(V.content)||!lu(V.content.firstElementChild))&&Mr(/<[/\w]/g,V.innerHTML)&&Mr(/<[/\w]/g,V.textContent))return Ba(V),!0;if(!xt[Ne]||X[Ne]){if(!X[Ne]&&LE(Ne)&&(U.tagNameCheck instanceof RegExp&&Mr(U.tagNameCheck,Ne)||U.tagNameCheck instanceof Function&&U.tagNameCheck(Ne)))return!1;if(De&&!Ce[Ne]){const Fe=E(V)||V.parentNode,qe=S(V)||V.childNodes;if(qe&&Fe)for(let Ue=qe.length-1;Ue>=0;--Ue)Fe.insertBefore(h(qe[Ue],!0),C(V))}return Ba(V),!0}return V instanceof c&&!function(Fe){let qe=E(Fe);qe&&qe.tagName||(qe={namespaceURI:$o,tagName:"template"});const Ue=dd(Fe.tagName),Ke=dd(qe.tagName);return!!Oa[Fe.namespaceURI]&&(Fe.namespaceURI===an?qe.namespaceURI===Cr?"svg"===Ue:qe.namespaceURI===ur?"svg"===Ue&&("annotation-xml"===Ke||TE[Ke]):!!iu[Ue]:Fe.namespaceURI===ur?qe.namespaceURI===Cr?"math"===Ue:qe.namespaceURI===an?"math"===Ue&&RE[Ke]:!!Ng[Ue]:Fe.namespaceURI===Cr?!(qe.namespaceURI===an&&!RE[Ke])&&!(qe.namespaceURI===ur&&!TE[Ke])&&!Ng[Ue]&&(LB[Ue]||!iu[Ue]):!("application/xhtml+xml"!==Qr||!Oa[Fe.namespaceURI]))}(V)?(Ba(V),!0):"noscript"!==Ne&&"noembed"!==Ne&&"noframes"!==Ne||!Mr(/<\/no(script|embed|frames)/i,V.innerHTML)?(Gt&&3===V.nodeType&&(Ot=V.textContent,Ot=go(Ot,I," "),Ot=go(Ot,z," "),Ot=go(Ot,G," "),V.textContent!==Ot&&(Tl(n.removed,{element:V.cloneNode()}),V.textContent=Ot)),ds("afterSanitizeElements",V,null),!1):(Ba(V),!0)},PE=function(V,Ot,Wt){if(ee&&("id"===Ot||"name"===Ot)&&(Wt in s||Wt in ki))return!1;if((!ft||Q[Ot]||!Mr(st,Ot))&&(!gt||!Mr(rt,Ot)))if(!Et[Ot]||Q[Ot]){if(!(LE(V)&&(U.tagNameCheck instanceof RegExp&&Mr(U.tagNameCheck,V)||U.tagNameCheck instanceof Function&&U.tagNameCheck(V))&&(U.attributeNameCheck instanceof RegExp&&Mr(U.attributeNameCheck,Ot)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(Ot))||"is"===Ot&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&Mr(U.tagNameCheck,Wt)||U.tagNameCheck instanceof Function&&U.tagNameCheck(Wt))))return!1}else if(!Gr[Ot]&&!Mr(Bt,go(Wt,At,""))&&("src"!==Ot&&"xlink:href"!==Ot&&"href"!==Ot||"script"===V||0!==BA(Wt,"data:")||!sn[V])&&(!Dt||Mr(wt,go(Wt,At,"")))&&Wt)return!1;return!0},LE=function(V){return V.indexOf("-")>0},ME=function(V){let Ot,Wt,Ne,Fe;ds("beforeSanitizeAttributes",V,null);const{attributes:qe}=V;if(!qe)return;const Ue={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Et};for(Fe=qe.length;Fe--;){Ot=qe[Fe];const{name:Ke,namespaceURI:Ni}=Ot;Wt="value"===Ke?Ot.value:DA(Ot.value);const IB=Wt;if(Ne=Cn(Ke),Ue.attrName=Ne,Ue.attrValue=Wt,Ue.keepAttr=!0,Ue.forceKeepAttr=void 0,ds("uponSanitizeAttribute",V,Ue),Wt=Ue.attrValue,Ue.forceKeepAttr)continue;if(!Ue.keepAttr){Zl(Ke,V);continue}if(!Ut&&Mr(/\/>/i,Wt)){Zl(Ke,V);continue}Gt&&(Wt=go(Wt,I," "),Wt=go(Wt,z," "),Wt=go(Wt,G," "));const IE=Cn(V.nodeName);if(PE(IE,Ne,Wt)){if(!ve||"id"!==Ne&&"name"!==Ne||(Zl(Ke,V),Wt="user-content-"+Wt),N&&"object"==typeof g&&"function"==typeof g.getAttributeType&&!Ni)switch(g.getAttributeType(IE,Ne)){case"TrustedHTML":Wt=N.createHTML(Wt);break;case"TrustedScriptURL":Wt=N.createScriptURL(Wt)}if(Wt!==IB)try{Ni?V.setAttributeNS(Ni,Ke,Wt):V.setAttribute(Ke,Wt)}catch{Zl(Ke,V)}}else Zl(Ke,V)}ds("afterSanitizeAttributes",V,null)},MB=function V(Ot){let Wt;const Ne=BE(Ot);for(ds("beforeSanitizeShadowDOM",Ot,null);Wt=Ne.nextNode();)ds("uponSanitizeShadowNode",Wt,null),DE(Wt)||(Wt.content instanceof a&&V(Wt.content),ME(Wt));ds("afterSanitizeShadowDOM",Ot,null)};return n.sanitize=function(V){let Ot,Wt,Ne,Fe,qe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(cs=!V,cs&&(V="\x3c!--\x3e"),"string"!=typeof V&&!lu(V)){if("function"!=typeof V.toString)throw Rl("toString is not a function");if("string"!=typeof(V=V.toString()))throw Rl("dirty is not a string, aborting")}if(!n.isSupported)return V;if(ze||_i(qe),n.removed=[],"string"==typeof V&&(ht=!1),ht){if(V.nodeName){const Ni=Cn(V.nodeName);if(!xt[Ni]||X[Ni])throw Rl("root node is forbidden and cannot be sanitized in-place")}}else if(V instanceof l)Ot=OE("\x3c!----\x3e"),Wt=Ot.ownerDocument.importNode(V,!0),1===Wt.nodeType&&"BODY"===Wt.nodeName||"HTML"===Wt.nodeName?Ot=Wt:Ot.appendChild(Wt);else{if(!yt&&!Gt&&!_e&&-1===V.indexOf("<"))return N&&ce?N.createHTML(V):V;if(Ot=OE(V),!Ot)return yt?null:ce?A:""}Ot&&yr&&Ba(Ot.firstChild);const Ue=BE(ht?V:Ot);for(;Ne=Ue.nextNode();)DE(Ne)||(Ne.content instanceof a&&MB(Ne.content),ME(Ne));if(ht)return V;if(yt){if(te)for(Fe=P.call(Ot.ownerDocument);Ot.firstChild;)Fe.appendChild(Ot.firstChild);else Fe=Ot;return(Et.shadowroot||Et.shadowrootmode)&&(Fe=W.call(r,Fe,!0)),Fe}let Ke=_e?Ot.outerHTML:Ot.innerHTML;return _e&&xt["!doctype"]&&Ot.ownerDocument&&Ot.ownerDocument.doctype&&Ot.ownerDocument.doctype.name&&Mr(hC,Ot.ownerDocument.doctype.name)&&(Ke="<!DOCTYPE "+Ot.ownerDocument.doctype.name+">\n"+Ke),Gt&&(Ke=go(Ke,I," "),Ke=go(Ke,z," "),Ke=go(Ke,G," ")),N&&ce?N.createHTML(Ke):Ke},n.setConfig=function(V){_i(V),ze=!0},n.clearConfig=function(){Yn=null,ze=!1},n.isValidAttribute=function(V,Ot,Wt){Yn||_i({});const Ne=Cn(V),Fe=Cn(Ot);return PE(Ne,Fe,Wt)},n.addHook=function(V,Ot){"function"==typeof Ot&&(B[V]=B[V]||[],Tl(B[V],Ot))},n.removeHook=function(V){if(B[V])return RA(B[V])},n.removeHooks=function(V){B[V]&&(B[V]=[])},n.removeAllHooks=function(){B={}},n}();const vC=lt.each,$A=lt.trim,WA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],VA={ftp:21,http:80,https:443,mailto:25},KA=["img","video"],yC=(t,e,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!t.allow_html_data_urls&&(/^data:image\//i.test(r)?(s=n,(ct(o=t.allow_svg_data_urls)?!o:!ct(s)||!Rt(KA,s))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,s};class Yr{static parseDataUri(e){let n;const r=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(e,n,r={}){if(r.allow_script_urls)return!0;{const o=aa.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!yC(r,o,n)}}static getDocumentBaseUrl(e){var n;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,n={}){this.path="",this.directory="",e=$A(e),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=r?r.path:new Yr(document.location.href).directory;if(""===r?.protocol)e="//mce_host"+o.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&vC(WA,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),o[i]=c}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),s&&(o.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new Yr(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const r=new Yr(e,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?VA[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let r,o,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(r=0,o=i.length;r<o;r++)if(r>=l.length||i[r]!==l[r]){s=r+1;break}if(i.length<l.length)for(r=0,o=l.length;r<o;r++)if(r>=i.length||i[r]!==l[r]){s=r+1;break}if(1===s)return n;for(r=0,o=i.length-(s-1);r<o;r++)a+="../";for(r=s-1,o=l.length;r<o;r++)a+=r!==s-1?"/"+l[r]:l[r];return a}toAbsPath(e,n){let r=0;const o=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];vC(s,f=>{f&&i.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)0!==a[f].length&&"."!==a[f]&&(".."!==a[f]?r>0?r--:l.push(a[f]):r++);const c=i.length-r;let u;return u=c<=0?Jr(l).join("/"):i.slice(0,c).join("/")+"/"+Jr(l).join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const XA=lt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Km="data-mce-type";let CC=0;const xC=(t,e,n,r,o)=>{var s,a,i,l;const c=e.validate,u=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(s=t.nodeValue)&&void 0!==s?s:"")&&(t.nodeValue=" "+t.nodeValue);const f=null!==(a=o?.tagName)&&void 0!==a?a:t.nodeName.toLowerCase();if("html"!==r&&n.isValid(r))return void(ct(o)&&(o.allowedTags[f]=!0));if(1!==t.nodeType||"body"===f)return;const p=D(t),b=d(p,Km),g=tr(p,"data-mce-bogus");if(!b&&Tt(g))return void("all"===g?ue(p):Ye(p));const v=n.getElementRule(f);if(!c||v){if(ct(o)&&(o.allowedTags[f]=!0),c&&v&&!b){if(Z(null!==(i=v.attributesForced)&&void 0!==i?i:[],h=>{Ze(p,h.name,"{$uid}"===h.value?"mce_"+CC++:h.value)}),Z(null!==(l=v.attributesDefault)&&void 0!==l?l:[],h=>{d(p,h.name)||Ze(p,h.name,"{$uid}"===h.value?"mce_"+CC++:h.value)}),v.attributesRequired&&!Ae(v.attributesRequired,h=>d(p,h))||v.removeEmptyAttrs&&(h=>{const C=h.dom.attributes;return null==C||0===C.length})(p))return void Ye(p);v.outputName&&v.outputName!==f&&((h,C)=>{const S=((N,A)=>{const R=Pt(A),L=y(N);return no(R,L),R})(h,C);Lt(h,S);const E=Ee(h);be(S,E),ue(h)})(p,v.outputName)}}else zt(u,f)?ue(p):Ye(p)},wC=(t,e,n,r,o,s)=>"html"!==n&&!ra(r)||!(o in XA&&yC(t,s,r))&&(!t.validate||e.isValid(r,o)||Ve(o,"data-")||Ve(o,"aria-")),SC=(t,e)=>t.hasAttribute(Km)&&("id"===e||"class"===e||"style"===e),EC=(t,e)=>t in e.getBoolAttrs(),YA=(t,e,n,r)=>{const{attributes:o}=t;for(let s=o.length-1;s>=0;s--){const a=o[s],i=a.name,l=a.value;wC(e,n,r,t.tagName.toLowerCase(),i,l)||SC(t,i)?EC(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},QA=t=>{const e=Ug(t);if("svg"===e){const r={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(o=>`xlink:${o}`)};Vm().sanitize(t,r)}else{if("math"!==e)throw new Error("Not a namespace element");{const n={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};Vm().sanitize(t,n)}}},kC=lt.makeMap,_C=lt.extend,NC=(t,e,n,r)=>{const o=t.name,s=o in n&&"title"!==o&&"textarea"!==o&&"noscript"!==o,a=e.childNodes;for(let i=0,l=a.length;i<l;i++){const c=a[i],u=new Kn(c.nodeName.toLowerCase(),c.nodeType);if(_t(c)){const f=c.attributes;for(let p=0,b=f.length;p<b;p++){const g=f[p];u.attr(g.name,g.value)}ra(u.name)&&(r(c),u.value=c.innerHTML)}else ot(c)?(u.value=c.data,s&&(u.raw=!0)):(Ss(c)||zE(c)||UE(c))&&(u.value=c.data);ra(u.name)||NC(u,c,n,r),t.append(u)}},ui=(t={},e=Es())=>{const n=eC(),r=eC(),o={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((v,h)=>{const C=(()=>{const S=rs(),E=()=>S.get().map(Ug).getOr("html");return{track:N=>(Eu(N)?S.set(N):S.get().exists(A=>!A.contains(N))&&S.clear(),E()),current:E,reset:()=>{S.clear()}}})();if(v.sanitize){const S=((t,e,n)=>{const r=Vm();return r.addHook("uponSanitizeElement",(o,s)=>{xC(o,t,e,n.track(o),s)}),r.addHook("uponSanitizeAttribute",(o,s)=>{((a,i,l,c,u)=>{const f=a.tagName.toLowerCase(),{attrName:p,attrValue:b}=u;u.keepAttr=wC(i,l,c,f,p,b),u.keepAttr?(u.allowedAttributes[p]=!0,EC(p,l)&&(u.attrValue=p),i.allow_svg_data_urls&&Ve(b,"data:image/svg+xml")&&(u.forceKeepAttr=!0)):SC(a,p)&&(u.forceKeepAttr=!0)})(o,t,e,n.current(),s)}),r})(v,h,C);return{sanitizeHtmlElement:(N,A)=>{S.sanitize(N,((R,L)=>{const P={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return P.PARSER_MEDIA_TYPE=L,R.allow_script_urls?P.ALLOWED_URI_REGEXP=/.*/:R.allow_html_data_urls&&(P.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),P})(v,A)),S.removed=[],C.reset()},sanitizeNamespaceElement:QA}}return{sanitizeHtmlElement:(S,E)=>{const N=document.createNodeIterator(S,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let A;for(;A=N.nextNode();){const R=C.track(A);xC(A,v,h,R),_t(A)&&YA(A,v,h,R)}C.reset()},sanitizeNamespaceElement:kt}})(o,e),l=n.getFilters,f=r.getFilters,b=(v,h)=>{const C=Tt(h.attr(Km)),S=1===h.type&&!zt(v,h.name)&&!Ru(e,h)&&!ra(h.name);return 3===h.type||S&&!C},g={schema:e,addAttributeFilter:r.addFilter,getAttributeFilters:f,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(v,h={})=>{var C;const S=o.validate,E=null!==(C=h.context)&&void 0!==C?C:o.root_name,N=((z,G,st="html")=>{const rt="xhtml"===st?"application/xhtml+xml":"text/html",wt=zt(e.getSpecialElements(),G.toLowerCase()),At=wt?`<${G}>${z}</${G}>`:z,xt=s.parseFromString("xhtml"===st?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${At}</body></html>`:`<body>${At}</body>`,rt).body;return a.sanitizeHtmlElement(xt,rt),wt?xt.firstChild:xt})(v,E,h.format);_u(e,N);const A=new Kn(E,11);NC(A,N,e.getSpecialElements(),a.sanitizeNamespaceElement),N.innerHTML="";const[R,L]=((z,G,st,rt)=>{const wt=st.validate,At=G.getNonEmptyElements(),Bt=G.getWhitespaceElements(),xt=_C(kC("script,style,head,html,body,title,meta,param"),G.getBlockElements()),pt=ih(G),Et=/[ \t\r\n]+/g,F=/^[ \t\r\n]+/,U=/[ \t\r\n]+$/,X=ft=>{let Dt=ft.parent;for(;ct(Dt);){if(Dt.name in Bt)return!0;Dt=Dt.parent}return!1},Q=ft=>ft.name in xt||Ru(G,ft)||ra(ft.name)&&ft.parent===z,gt=(ft,Dt)=>!ct(Dt?ft.prev:ft.next)&&!Se(ft.parent)&&Q(ft.parent)&&(ft.parent!==z||!0===rt.isRootContent);return[ft=>{var Dt,Gt,_e;if(3===ft.type&&!X(ft)){let Ut=null!==(Dt=ft.value)&&void 0!==Dt?Dt:"";Ut=Ut.replace(Et," "),_e=Q,(ct(Gt=ft.prev)&&(_e(Gt)||"br"===Gt.name)||gt(ft,!0))&&(Ut=Ut.replace(F,"")),0===Ut.length?ft.remove():ft.value=Ut}},ft=>{var Dt,_e,ze;if(1===ft.type){const Ut=G.getElementRule(ft.name);if(wt&&Ut){const Gt=kl(G,At,Bt,ft);Ut.paddInEmptyBlock&&Gt&&(_e=>{let ze=_e;for(;ct(ze);){if(ze.name in pt)return kl(G,At,Bt,ze);ze=ze.parent}return!1})(ft)?bm(st,rt,Q,ft):Ut.removeEmpty&&Gt?Q(ft)?ft.remove():ft.unwrap():Ut.paddEmpty&&(Gt||my(_e=ft,"#text")&&(null===(ze=_e?.firstChild)||void 0===ze?void 0:ze.value)===hn)&&bm(st,rt,Q,ft)}}else if(3===ft.type&&!X(ft)){let Ut=null!==(Dt=ft.value)&&void 0!==Dt?Dt:"";(ft.next&&Q(ft.next)||gt(ft,!1))&&(Ut=Ut.replace(U,"")),0===Ut.length?ft.remove():ft.value=Ut}}]})(A,e,o,h),P=[],W={nodes:{},attributes:{}},B=z=>dy(l(),f(),z,W);if(((z,G,st)=>{const rt=[];for(let wt=z,At=wt;wt;At=wt,wt=wt.walk()){const Bt=wt;Z(G,xt=>xt(Bt)),Se(Bt.parent)&&Bt!==z?wt=At:rt.push(Bt)}for(let wt=rt.length-1;wt>=0;wt--){const At=rt[wt];Z(st,Bt=>Bt(At))}})(A,[R,B],[L,S?z=>{return st=P,void(Cm(e,G=z)&&st.push(G));var G,st}:kt]),P.reverse(),S&&P.length>0)if(h.context){const{pass:z,fail:G}=zr(P,st=>st.parent===A);ym(G,e,A,B),h.invalid=z.length>0}else ym(P,e,A,B);const I=((z,G)=>{var st;const rt=null!==(st=G.forced_root_block)&&void 0!==st?st:z.forced_root_block;return!1===rt?"":!0===rt?"p":rt})(o,h);return I&&("body"===A.name||h.isRootContent)&&((z,G)=>{const st=_C(kC("script,style,head,html,body,title,meta,param"),e.getBlockElements()),rt=/^[ \t\r\n]+/,wt=/[ \t\r\n]+$/;let At=z.firstChild,Bt=null;const xt=pt=>{var Et,F;pt&&(At=pt.firstChild,At&&3===At.type&&(At.value=null===(Et=At.value)||void 0===Et?void 0:Et.replace(rt,"")),At=pt.lastChild,At&&3===At.type&&(At.value=null===(F=At.value)||void 0===F?void 0:F.replace(wt,"")))};if(e.isValidChild(z.name,G.toLowerCase())){for(;At;){const pt=At.next;b(st,At)?(Bt||(Bt=new Kn(G,1),Bt.attr(o.forced_root_block_attrs),z.insert(Bt,At)),Bt.append(At)):(xt(Bt),Bt=null),At=pt}xt(Bt)}})(A,I),h.invalid||uy(W,h),A}};return((v,h)=>{var C,S;const E=v.schema;v.addAttributeFilter("href",L=>{let P=L.length;const j=W=>{const B=W?lt.trim(W):"";return/\b(noopener)\b/g.test(B)?B:B.split(" ").filter(z=>z.length>0).concat(["noopener"]).sort().join(" ")};if(!h.allow_unsafe_link_target)for(;P--;){const W=L[P];"a"===W.name&&"_blank"===W.attr("target")&&W.attr("rel",j(W.attr("rel")))}}),h.allow_html_in_named_anchor||v.addAttributeFilter("id,name",L=>{let P,j,W,B,I=L.length;for(;I--;)if(B=L[I],"a"===B.name&&B.firstChild&&!B.attr("href"))for(W=B.parent,P=B.lastChild;P&&W;)j=P.prev,W.insert(P,B),P=j}),h.fix_list_elements&&v.addNodeFilter("ul,ol",L=>{let P,j,W=L.length;for(;W--;)if(P=L[W],j=P.parent,j&&("ul"===j.name||"ol"===j.name))if(P.prev&&"li"===P.prev.name)P.prev.append(P);else{const B=new Kn("li",1);B.attr("style","list-style-type: none"),P.wrap(B)}});const N=E.getValidClasses();h.validate&&N&&v.addAttributeFilter("class",L=>{var P;let j=L.length;for(;j--;){const W=L[j],B=null!==(P=W.attr("class"))&&void 0!==P?P:"",I=lt.explode(B," ");let z="";for(let G=0;G<I.length;G++){const st=I[G];let rt=!1,wt=N["*"];wt&&wt[st]&&(rt=!0),wt=N[W.name],!rt&&wt&&wt[st]&&(rt=!0),rt&&(z&&(z+=" "),z+=st)}z.length||(z=null),W.attr("class",z)}}),((L,P)=>{const{blob_cache:j}=P;if(j){const W=B=>{const I=B.attr("src");var z;(z=B).attr("src")===pe.transparentSrc||ct(z.attr("data-mce-placeholder"))||(z=>ct(z.attr("data-mce-bogus")))(B)||Se(I)||aC(j,I,!0).each(z=>{B.attr("src",z.blobUri())})};L.addAttributeFilter("src",B=>Z(B,W))}})(v,h);const A=null!==(C=h.sandbox_iframes)&&void 0!==C&&C,R=xo(null!==(S=h.sandbox_iframes_exclusions)&&void 0!==S?S:[]);h.convert_unsafe_embeds&&v.addNodeFilter("object,embed",L=>Z(L,P=>{P.replace((({type:j,src:W,width:B,height:I}={},z,G)=>{const st=Ie(wt=j)?"iframe":Fm(wt,"image")?"img":Fm(wt,"video")?"video":Fm(wt,"audio")?"audio":"iframe",rt=new Kn(st,1);var wt;return rt.attr("audio"===st?{src:W}:{src:W,width:B,height:I}),"audio"!==st&&"video"!==st||rt.attr("controls",""),"iframe"===st&&z&&iC(rt,G),rt})({type:P.attr("type"),src:P.attr("object"===P.name?"data":"src"),width:P.attr("width"),height:P.attr("height")},A,R))})),A&&v.addNodeFilter("iframe",L=>Z(L,P=>iC(P,R)))})(g,o),(h=o).inline_styles&&((t,e,n)=>{var r;const o=Fu();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=o,i=lt.explode(null!==(r=e.font_size_legacy_values)&&void 0!==r?r:""),s.addNodeFilter("font",l=>{Z(l,c=>{const u=a.parse(c.attr("style")),f=c.attr("color"),p=c.attr("face"),b=c.attr("size");var g;f&&(u.color=f),p&&(u["font-family"]=p),b&&Vs(b).each(g=>{u["font-size"]=i[g-1]}),c.name="span",c.attr("style",a.serialize(u)),g=c,Z(["color","face","size"],h=>{g.attr(h,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const c="html4"!==a.type;Z(l,u=>{if(c)u.name="s";else{const f=i.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",i.serialize(f))}})})})(t,n,o)})(g,h,e),g;var h},AC=(t,e,n)=>{const r=ad(s=t)?Os({validate:!1}).serialize(s):s,o=e(r);var s;if(o.isDefaultPrevented())return o;if(ad(t)){if(o.content!==r){const s=ui({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:t.name});return{...o,content:s}}return{...o,content:t}}return o},TC=t=>({sanitize:S0(t),sandbox_iframes:k0(t),sandbox_iframes_exclusions:uf(t)}),RC=(t,e)=>{if(e.no_events)return nr.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?nr.error(kb(t,{content:"",...n}).content):nr.value(n)}},OC=(t,e,n)=>n.no_events?e:AC(e,o=>kb(t,{...n,content:o}),TC(t)).content,Xm=(t,e)=>{if(e.no_events)return nr.value(e);{const n=AC(e.content,r=>{return o=t,s={...e,content:r},o.dispatch("BeforeSetContent",s);var o,s},TC(t));return n.isDefaultPrevented()?(Eb(t,n),nr.error(void 0)):nr.value(n)}},Ym=(t,e,n)=>{n.no_events||Eb(t,{...n,content:e})},Gm=(t,e,n)=>({element:t,width:e,rows:n}),BC=(t,e)=>({element:t,cells:e}),ZA=(t,e)=>({x:t,y:e}),DC=(t,e)=>ro(t,e).bind(Vs).getOr(1),JA=(t,e,n)=>{const r=t.rows;return!!(r[n]?r[n].cells:[])[e]},PC=t=>xn(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),LC=(t,e)=>{const n=t.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let s=0;s<o.length;s++)if(Ft(o[s],e))return k.some(ZA(s,r))}return k.none()},MC=(t,e,n,r,o)=>{const s=[],a=t.rows;for(let i=n;i<=o;i++){const l=a[i].cells,c=e<r?l.slice(e,r+1):l.slice(r,e+1);s.push(BC(a[i].element,c))}return s},tT=t=>((e,n)=>{const r=ca(e.element),o=Pt("tbody");return be(o,n),Kt(r,o),r})(t,re(t.rows,n=>{const r=re(n.cells,s=>{const a=Eh(s);return m(a,"colspan"),m(a,"rowspan"),a}),o=ca(n.element);return be(o,r),o})),IC=()=>Ff([]),md=(t,e)=>e>=0&&e<t.length&&ni(t.charAt(e)),FC=t=>br(t.innerText),jC=t=>_t(t)?t.outerHTML:ot(t)?aa.encodeRaw(t.data,!1):Ss(t)?"\x3c!--"+t.data+"--\x3e":"",sT=qr(()=>document.implementation.createHTMLDocument("undo")),pd=t=>{const e=t.serializer.getTempAttrs(),n=uv(t.getBody(),e);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:Xt(re(wn(n.childNodes),On(br,jC)),r=>r.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:br(n.innerHTML),bookmark:null,beforeBookmark:null}},Qm=(t,e,n)=>{const r=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,r)=>{let o=0;Z(n,s=>{var a,i;0===s[0]?o++:1===s[0]?(((a,i,l)=>{const c=(u=>{let f;const p=document.createElement("div"),b=document.createDocumentFragment();for(u&&(p.innerHTML=u);f=p.firstChild;)b.appendChild(f);return b})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(c,a.childNodes[l]):a.appendChild(c)})(r,s[1],o),o++):2===s[0]&&(i=o,(a=r).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,r)=>{const o=n.length+r.length+2,s=new Array(o),a=new Array(o),i=(f,p,b,g,v)=>{const h=c(f,p,b,g);if(null===h||h.start===p&&h.diag===p-g||h.end===f&&h.diag===f-b){let C=f,S=b;for(;C<p||S<g;)C<p&&S<g&&n[C]===r[S]?(v.push([0,n[C]]),++C,++S):p-f>g-b?(v.push([2,n[C]]),++C):(v.push([1,r[S]]),++S)}else{i(f,h.start,b,h.start-h.diag,v);for(let C=h.start;C<h.end;++C)v.push([0,n[C]]);i(h.end,p,h.end-h.diag,g,v)}},l=(f,p,b,g)=>{let v=f;for(;v-p<g&&v<b&&n[v]===r[v-p];)++v;return((h,C,S)=>({start:h,end:C,diag:S}))(f,v,p)},c=(f,p,b,g)=>{const v=p-f,h=g-b;if(0===v||0===h)return null;const C=v-h,S=h+v,E=(S%2==0?S:S+1)/2;let N,A,R,L,P;for(s[1+E]=f,a[1+E]=p+1,N=0;N<=E;++N){for(A=-N;A<=N;A+=2){for(R=A+E,s[R]=A===-N||A!==N&&s[R-1]<s[R+1]?s[R+1]:s[R-1]+1,L=s[R],P=L-f+b-A;L<p&&P<g&&n[L]===r[P];)s[R]=++L,++P;if(C%2!=0&&C-N<=A&&A<=C+N&&a[R-C]<=s[R])return l(a[R-C],A+f-b,p,g)}for(A=C-N;A<=C+N;A+=2){for(R=A+E-C,a[R]=A===C-N||A!==C+N&&a[R+1]<=a[R-1]?a[R+1]-1:a[R-1],L=a[R]-1,P=L-f+b-A;L>=f&&P>=b&&n[L]===r[P];)a[R]=L--,P--;if(C%2==0&&-N<=A&&A<=N&&a[R]<=s[R+C])return l(a[R],A+f-b,p,g)}}return null},u=[];return i(0,n.length,0,r.length,u),u})(re(wn(e.childNodes),jC),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!ct(r)||!X0(r)||!r.isFakeCaret}),r&&(t.selection.moveToBookmark(r),t.selection.scrollIntoView())},Zm=t=>"fragmented"===t.type?t.fragments.join(""):t.content,zC=t=>{const e=Pt("body",sT());return Pn(e,Zm(t)),Z(Mn(e,"*[data-mce-bogus]"),Ye),Wn(e)},Jm=(t,e)=>{return!(!t||!e)&&(r=e,!(Zm(t)!==Zm(r))||((n,r)=>zC(n)===zC(r))(t,e));var r},tp=t=>0===t.get(),gd=(t,e,n)=>{tp(n)&&(t.typing=e)},UC=(t,e)=>{t.typing&&(gd(t,!1,e),t.add())},HC=t=>({init:{bindEvents:kt},undoManager:{beforeChange:(e,n)=>{return r=t,s=n,void(tp(e)&&s.set(of(r.selection)));var r,s},add:(e,n,r,o,s,a)=>((i,l,c,u,f,p,b)=>{const g=pd(i),v=lt.extend(p||{},g);if(!tp(u)||i.removed)return null;const h=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:v,lastLevel:h,originalEvent:b}).isDefaultPrevented()||h&&Jm(h,v))return null;l.data[c.get()]&&f.get().each(E=>{l.data[c.get()].beforeBookmark=E});const C=m_(i);if(C&&l.data.length>C){for(let E=0;E<l.data.length-1;E++)l.data[E]=l.data[E+1];l.data.length--,c.set(l.data.length)}v.bookmark=of(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(v),c.set(l.data.length-1);const S={level:v,lastLevel:h,originalEvent:b};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",S),i.dispatch("change",S)):i.dispatch("AddUndo",S),v})(t,e,n,r,o,s,a),undo:(e,n,r)=>((o,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,gd(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],Qm(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(t,e,n,r),redo:(e,n)=>((r,o,s)=>{let a;return o.get()<s.length-1&&(o.set(o.get()+1),a=s[o.get()],Qm(r,a,!1),r.setDirty(!0),r.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return r=t,s=n,(o=e).data=[],s.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return r=t,o=e,n.get()>0||o.typing&&o.data[0]&&!Jm(pd(r),o.data[0]);var r,o},hasRedo:(e,n)=>{return r=e,n.get()<r.data.length-1&&!r.typing;var r},transact:(e,n,r)=>{return a=r,UC(o=e,n),o.beforeChange(),o.ignore(a),o.add();var o,a},ignore:(e,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(e,n),extra:(e,n,r,o)=>((s,a,i,l,c)=>{if(a.transact(l)){const u=a.data[i.get()].bookmark,f=a.data[i.get()-1];Qm(s,f,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=u)}})(t,e,n,r,o)},formatter:{match:(e,n,r,o)=>Am(t,e,n,r,o),matchAll:(e,n)=>((r,o,s)=>{const a=[],i={},l=r.selection.getStart();return r.dom.getParent(l,c=>{for(let u=0;u<o.length;u++){const f=o[u];!i[f]&&jo(r,c,f,s)&&(i[f]=!0,a.push(f))}},r.dom.getRoot()),a})(t,e,n),matchNode:(e,n,r,o)=>jo(t,e,n,r,o),canApply:e=>((n,r)=>{const o=n.formatter.get(r),s=n.dom;if(o&&n.selection.isEditable()){const a=n.selection.getStart(),i=Hc(s,a);for(let l=o.length-1;l>=0;l--){const c=o[l];if(!Dr(c))return!0;for(let u=i.length-1;u>=0;u--)if(s.is(i[u],c.selector))return!0}}return!1})(t,e),closest:e=>((n,r)=>{const o=s=>Ft(s,D(n.getBody()));return k.from(n.selection.getStart(!0)).bind(s=>km(D(s),a=>Zn(r,i=>{return jo(n,a.dom,c=i)?k.some(c):k.none();var c}),o)).getOrNull()})(t,e),apply:(e,n,r)=>Xy(t,e,n,r),remove:(e,n,r,o)=>Wy(t,e,n,r,o),toggle:(e,n,r)=>((o,s,a,i)=>{const l=o.formatter.get(s);l&&(!Am(o,s,a,i)||"toggle"in l[0]&&!l[0].toggle?Xy(o,s,a,i):Wy(o,s,a,i))})(t,e,n,r),formatChanged:(e,n,r,o,s)=>{return((p,b,g,v,h,C)=>{const S=b.get();Z(g.split(","),E=>{const N=Re(S,E).getOrThunk(()=>{const R={withSimilar:{state:bn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:bn(!1),similar:!1,callbacks:[]},withVars:[]};return S[E]=R,R}),A=()=>{const R=Zy(p);return Qy(p,R,E,h,C).isSome()};if(Ie(C)){const R=h?N.withSimilar:N.withoutSimilar;R.callbacks.push(v),1===R.callbacks.length&&R.state.set(A())}else N.withVars.push({state:bn(A()),similar:h,vars:C,callback:v})}),b.set(S)})(t,i=e,l=n,c=r,o,s),{unbind:()=>((p,b,g)=>{const v=p.get();Z(b.split(","),h=>Re(v,h).each(C=>{v[h]={withSimilar:{...C.withSimilar,callbacks:Xt(C.withSimilar.callbacks,S=>S!==g)},withoutSimilar:{...C.withoutSimilar,callbacks:Xt(C.withoutSimilar.callbacks,S=>S!==g)},withVars:Xt(C.withVars,S=>S.callback!==g)}})),p.set(v)})(i,l,c)};var i,l,c}},editor:{getContent:e=>{return r=e,k.from((n=t).getBody()).fold(mt("tree"===r.format?new Kn("body",11):""),o=>((t,e,n)=>{let r;return r="raw"===e.format?lt.trim(br(uv(n,t.serializer.getTempAttrs()).innerHTML)):"text"===e.format?((o,s)=>{const a=o.getDoc(),i=Oe(D(o.getBody())),l=Pt("div",a);Ze(l,"data-mce-bogus","all"),$(l,{position:"fixed",left:"-9999999px",top:"0"}),Pn(l,s.innerHTML),fv(l),mv(l);const c=se(f=i)?f:D(Le(f).dom.body);var f;Kt(c,l);const u=br(l.dom.innerText);return ue(l),u})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((o,s)=>{const a=Fn(o),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!Sc(D(n))&&Tt(r)?lt.trim(r):r})(n,r,o));var n,r},setContent:(e,n)=>{return o=e,s=n,k.from((r=t).getBody()).map(a=>ad(o)?((i,l,c,u)=>{fy(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const f=Os({validate:!1},i.schema).serialize(c),p=br(Sc(D(l))?f:lt.trim(f));return Em(i,p,u.no_selection),{content:c,html:p}})(r,a,o,s):((i,l,c,u)=>{if(0===(c=br(c)).length||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const p=Fn(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),p.toLowerCase())?(c=f,c=i.dom.createHTML(p,al(i),c)):c||(c=f),Em(i,c,u.no_selection),{content:c,html:c}}{"raw"!==u.format&&(c=Os({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const f=Sc(D(l))?c:lt.trim(c);return Em(i,f,u.no_selection),{content:f,html:f}}})(r,a,o,s)).getOr({content:o,html:ad(s.content)?"":s.content});var r,o,s},insertContent:(e,n)=>hA(t,e,n),addVisual:e=>((n,r)=>{const o=n.dom,s=ct(r)?r:n.getBody();Z(o.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=y_(n),l=o.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?o.removeClass(a,i):o.addClass(a,i);break;case"A":if(!o.getAttrib(a,"href")){const c=o.getAttrib(a,"name")||a.id,u=C0(n);c&&n.hasVisual?o.addClass(a,u):o.removeClass(a,u)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((r,o,s={})=>{const a=(i=s,l=o,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return RC(r,a).fold(me,i=>{const l=((c,u)=>{if("text"===u.format)return k.from((f=c).selection.getRng()).map(p=>{var b;const g=k.from(f.dom.getParent(p.commonAncestorContainer,f.dom.isBlock)),v=f.getBody(),h=g.map(R=>R.nodeName).getOr("div").toLowerCase(),C=D(p.cloneContents());fv(C),mv(C);const S=f.dom.add(v,h,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},C.dom),E=FC(S),N=br(null!==(b=S.textContent)&&void 0!==b?b:"");if(f.dom.remove(S),md(N,0)||md(N,N.length-1)){const A=g.getOr(v),R=FC(A),L=R.indexOf(E);return-1===L?E:(md(R,L-1)?" ":"")+E+(md(R,L+E.length)?" ":"")}return E}).getOr("");var f;{const f=((p,b)=>{const g=p.selection.getRng(),v=p.dom.create("body"),h=p.selection.getSel(),C=Gf(p,xf(h)),S=b.contextual?((t,e,n)=>{const r=tb(e,t);return r.length>0?((t,e)=>{return(n=t,r=e[0],Ro(r,"table",St(Ft,n))).bind(n=>{const r=e[0],o=e[e.length-1],s=(a=>{const i=Gm(ca(a),0,[]);return Z(Mn(a,"tr"),(l,c)=>{Z(Mn(l,"td,th"),(u,f)=>{((p,b,g,v,h)=>{const C=DC(h,"rowspan"),S=DC(h,"colspan"),E=p.rows;for(let N=g;N<g+C;N++){E[N]||(E[N]=BC(Eh(v),[]));for(let A=b;A<b+S;A++)E[N].cells[A]=N===g&&A===b?h:ca(h)}})(i,((p,b,g)=>{for(;JA(p,b,g);)b++;return b})(i,f,c),c,l,u)})}),Gm(i.element,PC(i.rows),i.rows)})(n);return(a=s,i=r,l=o,LC(a,i).bind(c=>LC(a,l).map(u=>((f,p,b)=>{const g=p.x,v=p.y,h=b.x,C=b.y,S=v<C?MC(f,g,v,h,C):MC(f,g,C,h,v);return Gm(f.element,PC(S),S)})(a,c,u)))).map(a=>Ff([tT(a)]));var a,i,l}).getOrThunk(IC);var n,r})(t,r):(o=t,a=n,(s=e).length>0&&s[0].collapsed?IC():(i=o,c=a,((u,f)=>{const p=xn(f,(b,g)=>(Kt(g,b),g),u);return f.length>0?Ff([p]):p})(D((l=s[0]).cloneContents()),((t,e,n)=>{const r=D(e.commonAncestorContainer),o=as(r,t),s=Xt(o,l=>n.isWrapper(fe(l))),a=(c=e,Ge(l=o,u=>"li"===fe(u)&&Sf(u,c)).fold(mt([]),u=>{return(f=l,Ge(f,p=>"ul"===fe(p)||"ol"===fe(p))).map(f=>{const p=Pt(fe(f)),b=Eo(Ht(f),(g,v)=>Ve(v,"list-style"));return $(p,b),[Pt("li"),p]}).getOr([]);var f})),i=s.concat(a.length?a:(l=>Va(l)?ir(l).filter(Vu).fold(mt([]),c=>[l,c]):Vu(l)?[l]:[])(r));var l,c;return re(i,ca)})(i,l,c))));var o,s,a,i,l,c})(D(p.getBody()),C,p.schema).dom:g.cloneContents();return S&&v.appendChild(S),p.selection.serializer.serialize(v,b)})(c,u);return"tree"===u.format?f:c.selection.isCollapsed()?"":f}})(r,i);return OC(r,l,i)})})(t,e,n)},autocompleter:{addDecoration:kt,removeDecoration:kt},raw:{getModel:()=>k.none()}}),zo=t=>zt(t.plugins,"rtc"),ep=t=>t.rtcInstance?t.rtcInstance:HC(t),on=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},qC=t=>on(t).init.bindEvents(),$C=t=>0===t.dom.length?(ue(t),k.none()):k.some(t),WC=(t,e,n,r,o)=>{t.bind(s=>((r?sm:ed)(s.dom,r?s.dom.length:0,o),e.filter(qn).map(a=>((i,l,c,u,f)=>{const p=i.dom,b=l.dom,g=u?p.length:b.length;u?(am(p,b,f,!1,!u),c.setStart(b,g)):(am(b,p,f,!1,!u),c.setEnd(b,g))})(s,a,n,r,o)))).orThunk(()=>{return(a=e,i=r,a.filter(l=>bl.isBookmarkNode(l.dom)).bind(i?gr:$n)).or(e).filter(qn).map(a=>((i,l,c)=>{ir(i).each(u=>{const f=i.dom;l&&wl(u,Y(f,0),c)?ed(f,0,c):!l&&Sl(u,Y(f,f.length),c)&&sm(f,f.length,c)})})(a,r,o));var a,i})},VC=(t,e,n)=>{if(zt(t,e)){const r=Xt(t[e],o=>o!==n);0===r.length?delete t[e]:t[e]=r}},KC=t=>!(!t||!t.ownerDocument)&&Je(D(t.ownerDocument),D(t)),XC=(t,e,n,r)=>{let o,s;const{selectorChangedWithUnbind:a}=((h,C)=>{let S,E;const N=(R,L)=>Ge(L,P=>h.is(P,R)),A=R=>h.getParents(R,void 0,h.getRoot());return{selectorChangedWithUnbind:(R,L)=>(S||(S={},E={},C.on("NodeChange",P=>{const j=P.element,W=A(j),B={};we(S,(I,z)=>{N(z,W).each(G=>{E[z]||(Z(I,st=>{st(!0,{node:G,selector:z,parents:W})}),E[z]=I),B[z]=I})}),we(E,(I,z)=>{B[z]||(delete E[z],Z(I,G=>{G(!1,{node:j,selector:z,parents:W})}))})})),S[R]||(S[R]=[]),S[R].push(L),N(R,A(C.selection.getStart())).each(()=>{E[R]=S[R]}),{unbind:()=>{VC(S,R,L),VC(E,R,L)}})}})(t,r),i=(h,C)=>((S,E,N={})=>{const A=(R=N,L=E,{format:"html",...R,set:!0,selection:!0,content:L});var R,L;Xm(S,A).each(R=>{const L=((j,W)=>{if("raw"!==W.format){const B=j.selection.getRng(),I=j.dom.getParent(B.commonAncestorContainer,j.dom.isBlock),z=I?{context:I.nodeName.toLowerCase()}:{},G=j.parser.parse(W.content,{forced_root_block:!1,...z,...W});return Os({validate:!1},j.schema).serialize(G)}return W.content})(S,R),P=S.selection.getRng();((j,W,B)=>{const I=k.from(W.firstChild).map(D),z=k.from(W.lastChild).map(D);j.deleteContents(),j.insertNode(W);const G=I.bind($n).filter(qn).bind($C),st=z.bind(gr).filter(qn).bind($C);WC(G,I,j,!0,B),WC(st,z,j,!1,B),j.collapse(!1)})(P,P.createContextualFragment(L),S.schema),S.selection.setRng(P),yl(S,P),Ym(S,L,R)})})(r,h,C),l=h=>{const C=u();C.collapse(!!h),f(C)},c=()=>e.getSelection?e.getSelection():e.document.selection,u=()=>{let h;const C=(E,N,A)=>{try{return N.compareBoundaryPoints(E,A)}catch{return-1}},S=e.document;if(ct(r.bookmark)&&!li(r)){const E=$f(r);if(E.isSome())return E.map(N=>Gf(r,[N])[0]).getOr(S.createRange())}try{const E=c();E&&!mc(E.anchorNode)&&(h=E.rangeCount>0?E.getRangeAt(0):S.createRange(),h=Gf(r,[h])[0])}catch{}if(h||(h=S.createRange()),$i(h.startContainer)&&h.collapsed){const E=t.getRoot();h.setStart(E,0),h.setEnd(E,0)}return o&&s&&(0===C(h.START_TO_START,h,o)&&0===C(h.END_TO_END,h,o)?h=s:(o=null,s=null)),h},f=(h,C)=>{if(!((E=h)&&KC(E.startContainer)&&KC(E.endContainer)))return;var E;const S=c();if(h=r.dispatch("SetSelectionRange",{range:h,forward:C}).range,S){s=h;try{S.removeAllRanges(),S.addRange(h)}catch{}!1===C&&S.extend&&(S.collapse(h.endContainer,h.endOffset),S.extend(h.startContainer,h.startOffset)),o=S.rangeCount>0?S.getRangeAt(0):null}if(!h.collapsed&&h.startContainer===h.endContainer&&S?.setBaseAndExtent&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()){const E=h.startContainer.childNodes[h.startOffset];E&&"IMG"===E.nodeName&&(S.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),S.anchorNode===h.startContainer&&S.focusNode===h.endContainer||S.setBaseAndExtent(E,0,E,1))}r.dispatch("AfterSetSelectionRange",{range:h,forward:C})},p=()=>{const h=c(),C=h?.anchorNode,S=h?.focusNode;if(!h||!C||!S||mc(C)||mc(S))return!0;const E=t.createRng(),N=t.createRng();try{E.setStart(C,h.anchorOffset),E.collapse(!0),N.setStart(S,h.focusOffset),N.collapse(!0)}catch{return!0}return E.compareBoundaryPoints(E.START_TO_START,N)<=0},b={dom:t,win:e,serializer:n,editor:r,expand:(h={type:"word"})=>f(ya(t).expand(u(),h)),collapse:l,setCursorLocation:(h,C)=>{const S=t.createRng();ct(h)&&ct(C)?(S.setStart(h,C),S.setEnd(h,C),f(S),l(!1)):(Ef(t,S,r.getBody(),!0),f(S))},getContent:h=>((C,S={})=>{return N=S.format?S.format:"html",A=S,on(C).selection.getContent(N,A);var N,A})(r,h),setContent:i,getBookmark:(h,C)=>g.getBookmark(h,C),moveToBookmark:h=>g.moveToBookmark(h),select:(h,C)=>{return(S=t,E=h,N=C,k.from(E).bind(A=>k.from(A.parentNode).map(R=>{const L=S.nodeIndex(A),P=S.createRng();return P.setStart(R,L),P.setEnd(R,L+1),N&&(Ef(S,P,A,!0),Ef(S,P,A,!1)),P}))).each(f),h;var S,E,N},isCollapsed:()=>{const h=u(),C=c();return!(!h||h.item)&&(h.compareEndPoints?0===h.compareEndPoints("StartToEnd",h):!C||h.collapsed)},isEditable:()=>{const h=u(),C=r.getBody().querySelectorAll('[data-mce-selected="1"]');return C.length>0?ar(C,S=>t.isEditable(S.parentElement)):tv(t,h)},isForward:p,setNode:h=>(i(t.getOuterHTML(h)),h),getNode:()=>((h,C)=>{if(!C)return h;let S=C.startContainer,E=C.endContainer;const N=C.startOffset,A=C.endOffset;let R=C.commonAncestorContainer;C.collapsed||(S===E&&A-N<2&&S.hasChildNodes()&&(R=S.childNodes[N]),ot(S)&&ot(E)&&(S=S.length===N?ov(S.nextSibling,!0):S.parentNode,E=0===A?ov(E.previousSibling,!1):E.parentNode,S&&S===E&&(R=S)));const L=ot(R)?R.parentNode:R;return es(L)?L:h})(r.getBody(),u()),getSel:c,setRng:f,getRng:u,getStart:h=>nv(r.getBody(),u(),h),getEnd:h=>rv(r.getBody(),u(),h),getSelectedBlocks:(h,C)=>((S,E,N,A)=>{const R=[],L=S.getRoot(),P=S.getParent(N||nv(L,E,E.collapsed),S.isBlock),j=S.getParent(A||rv(L,E,E.collapsed),S.isBlock);if(P&&P!==L&&R.push(P),P&&j&&P!==j){let W;const B=new gn(P,L);for(;(W=B.next())&&W!==j;)S.isBlock(W)&&R.push(W)}return j&&P!==j&&j!==L&&R.push(j),R})(t,u(),h,C),normalize:()=>{const h=u(),C=c();if(!(xf(C).length>1)&&zc(r)){const S=Kc(t,h);return S.each(E=>{f(E,p())}),S.getOr(h)}return h},selectorChanged:(h,C)=>(a(h,C),b),selectorChangedWithUnbind:a,getScrollContainer:()=>{let h,C=t.getRoot();for(;C&&"BODY"!==C.nodeName;){if(C.scrollHeight>C.clientHeight){h=C;break}C=C.parentNode}return h},scrollIntoView:(h,C)=>{var S;ct(h)?((S=r).inline?AN:RN)(S,h,C):yl(r,u(),C)},placeCaretAt:(h,C)=>f(Db(h,C,r.getDoc())),getBoundingClientRect:()=>{const h=u();return h.collapsed?Y.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:()=>{e=o=s=null,v.destroy()}},g=bl(b),v=Ab(b,r);return b.bookmarkManager=g,b.controlSelection=v,b},aT=(t,e,n)=>{-1===lt.inArray(e,n)&&(t.addAttributeFilter(n,(r,o)=>{let s=r.length;for(;s--;)r[s].attr(o,null)}),e.push(n))},YC=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},o=e&&e.dom?e.dom:Be.DOM,s=e&&e.schema?e.schema:Es(r),a=ui(r,s);return l=r,c=o,(i=a).addAttributeFilter("data-mce-tabindex",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];b.attr("tabindex",b.attr("data-mce-tabindex")),b.attr(f,null)}}),i.addAttributeFilter("src,href,style",(u,f)=>{const p="data-mce-"+f,b=l.url_converter,g=l.url_converter_scope;let v=u.length;for(;v--;){const h=u[v];let C=h.attr(p);void 0!==C?(h.attr(f,C.length>0?C:null),h.attr(p,null)):(C=h.attr(f),"style"===f?C=c.serializeStyle(c.parseStyle(C),h.name):b&&(C=b.call(g,C,f,h.name)),h.attr(f,C.length>0?C:null))}}),i.addAttributeFilter("class",u=>{let f=u.length;for(;f--;){const p=u[f];let b=p.attr("class");b&&(b=b.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),p.attr("class",b.length>0?b:null))}}),i.addAttributeFilter("data-mce-type",(u,f,p)=>{let b=u.length;for(;b--;){const g=u[b];"bookmark"===g.attr("data-mce-type")&&!p.cleanup&&(k.from(g.firstChild).exists(h=>{var C;return!Ec(null!==(C=h.value)&&void 0!==C?C:"")})?g.unwrap():g.remove())}}),i.addNodeFilter("script,style",(u,f)=>{var p;const b=v=>v.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=u.length;for(;g--;){const v=u[g],h=v.firstChild,C=null!==(p=h?.value)&&void 0!==p?p:"";if("script"===f){const S=v.attr("type");S&&v.attr("type","mce-no/type"===S?null:S.replace(/^mce\-/,"")),"xhtml"===l.element_format&&h&&C.length>0&&(h.value="// <![CDATA[\n"+b(C)+"\n// ]]>")}else"xhtml"===l.element_format&&h&&C.length>0&&(h.value="\x3c!--\n"+b(C)+"\n--\x3e")}}),i.addNodeFilter("#comment",u=>{let f=u.length;for(;f--;){const p=u[f],b=p.value;l.preserve_cdata&&0===b?.indexOf("[CDATA[")?(p.name="#cdata",p.type=4,p.value=c.decode(b.replace(/^\[CDATA\[|\]\]$/g,""))):0===b?.indexOf("mce:protected ")&&(p.name="#text",p.type=3,p.raw=!0,p.value=unescape(b).substr(14))}}),i.addNodeFilter("xml:namespace,input",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];7===b.type?b.remove():1===b.type&&("input"!==f||b.attr("type")||b.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",u=>{Z(u,f=>{"format-caret"===f.attr("data-mce-type")&&(f.isEmpty(i.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(u,f)=>{let p=u.length;for(;p--;)u[p].attr(f,null)}),l.remove_trailing_brs&&(u=l,p=i.schema,i.addNodeFilter("br",(b,g,v)=>{const h=lt.extend({},p.getBlockElements()),C=p.getNonEmptyElements(),S=p.getWhitespaceElements();h.body=1;const E=N=>N.name in h||Ru(p,N);for(let N=0,A=b.length;N<A;N++){let R=b[N],L=R.parent;if(L&&E(L)&&R===L.lastChild){let P=R.prev;for(;P;){const j=P.name;if("span"!==j||"bookmark"!==P.attr("data-mce-type")){"br"===j&&(R=null);break}P=P.prev}if(R&&(R.remove(),kl(p,C,S,L))){const j=p.getElementRule(L.name);j&&(j.removeEmpty?L.remove():j.paddEmpty&&bm(u,v,E,L))}}else{let P=R;for(;L&&L.firstChild===P&&L.lastChild===P&&(P=L,!h[L.name]);)L=L.parent;if(P===L){const j=new Kn("#text",3);j.value=hn,R.replace(j)}}}})),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},u=(g=i,C=v=c,ct(h=b=e)&&h.hasEventListeners("PreProcess")&&!C.no_events?((h,C,S)=>{let E;const N=h.dom;let A=C.cloneNode(!0);const R=document.implementation;if(R.createHTMLDocument){const L=R.createHTMLDocument("");lt.each("BODY"===A.nodeName?A.childNodes:[A],P=>{L.body.appendChild(L.importNode(P,!0))}),A="BODY"!==A.nodeName?L.body.firstChild:L.body,E=N.doc,N.doc=L}return P={...S,node:A},h.dispatch("PreProcess",P),E&&(N.doc=E),A;var P})(b,g,v):g),f=((b,g,v)=>{const h=br(v.getInner?g.innerHTML:b.getOuterHTML(g));return v.selection||Sc(D(g))?h:lt.trim(h)})(o,u,c),p=((b,g,v)=>{const h=v.selection?{forced_root_block:!1,...v}:v,C=b.parse(g,h);return(S=>{const E=A=>"br"===A?.name,N=S.lastChild;if(E(N)){const A=N.prev;E(A)&&(N.remove(),A.remove())}})(C),C})(a,f,c);var b,g,v,h,C;return"tree"===c.format?p:((b,g,v,h,C)=>{var A;return((E,N,A)=>{return!N.no_events&&E?(L=E,P={...N,content:A},L.dispatch("PostProcess",P)).content:A;var L,P})(b,C,(A=h,Os(g,v).serialize(A)))})(e,r,s,p,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:St(aT,a,n),getTempAttrs:mt(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var i,l,c,u,p})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},np=(t,e,n={})=>{const r=(o=n,s=e,{format:"html",...o,set:!0,content:s});var o,s;return Xm(t,r).map(o=>{const s=(i=o.content,l=o,ep(t).editor.setContent(i,l));var i,l;return Ym(t,s.html,o),s.content}).getOr(e)},lT="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),cT=[],dT="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),GC=[],QC=(t,e)=>{const n=Xt(e,r=>zt(t,r));return Vo(n)},ZC=(t,e)=>{const n=lt.makeMap(t.plugins," "),r=Xt(e,o=>zt(n,o));return Vo(r)},gT=t=>Ge(GC,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),hd=Be.DOM,bd=t=>k.from(t).each(e=>e.destroy()),vd=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>zt(t,e)}})(),fi=Vn.ModelManager,JC=(t,e)=>e.dom[t],t1=(t,e)=>parseInt(tt(e,t),10),hT=St(JC,"clientWidth"),bT=St(JC,"clientHeight"),vT=St(t1,"margin-top"),yT=St(t1,"margin-left"),e1=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},r=()=>k.from(e[0]),o=()=>{r().each(l=>{l.reposition()})},s=l=>{us(e,c=>c===l).each(c=>{e.splice(c,1)})},a=(l,c=!0)=>{return t.removed||!(f=(u=t).inline?u.getBody():u.getContentAreaContainer(),k.from(f).map(D)).map(To).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),Ge(e,u=>{return!((f=n().getArgs(u)).type!==(p=l).type||f.text!==p.text||f.progressBar||f.timeout||p.progressBar||p.timeout);var f,p}).getOrThunk(()=>{t.editorManager.setActive(t);const u=n().open(l,()=>{s(u)},()=>Jb(t));return(f=>{e.push(f)})(u),o(),t.dispatch("OpenNotification",{notification:{...u}}),u}));var u,f},i=mt(e);return(l=t).on("SkinLoaded",()=>{const c=e_(l);c&&a({text:c,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor NodeChange",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{Z(e.slice(),c=>{n().close(c)})}),l.addShortcut("alt+F12","Focus to notification",()=>r().map(c=>D(c.getEl())).each(c=>Vb(c))),{open:a,close:()=>{r().each(l=>{n().close(l),s(l),o()})},getNotifications:i};var l},mi=Vn.PluginManager,Ea=Vn.ThemeManager,n1=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},r=(a,i)=>(...l)=>i?i.apply(a,l):void 0,o=a=>{t.dispatch("CloseWindow",{dialog:a}),e=Xt(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),Gc(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{Z(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,o)),openUrl:a=>s(()=>n().openUrl(a,o)),alert:(a,i,l)=>{const c=n();c.alert(a,r(l||c,i))},confirm:(a,i,l)=>{const c=n();c.confirm(a,r(l||c,i))},close:()=>{k.from(e[e.length-1]).each(a=>{n().close(a),o(a)})}}},r1=(t,e)=>{t.notificationManager.open({type:"error",text:e})},yd=(t,e)=>{t._skinLoaded?r1(t,e):t.on("SkinLoaded",()=>{r1(t,e)})},Ol=(t,e,n)=>{xb(t,e,{message:n}),console.error(n)},Bl=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,Cd=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},rp=t=>"content/"+t+"/content.css",o1=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",r=`content${t.editorManager.suffix}.css`;return re(e,o=>tinymce.Resource.has(rp(o))?o:/^[a-z0-9\-]+$/i.test(o)&&!t.inline?`${n}/${o}/${r}`:t.documentBaseURI.toAbsolute(o))},s1=()=>{let t={};const e=(r,o)=>({status:r,resultUri:o}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{const o=t[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:r=>{t[r]=e(1,null)},markUploaded:(r,o)=>{t[r]=e(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}};let xT=0;const a1=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),i1=(t,e)=>((t,e)=>{const n={},r=(l,c)=>new Promise((u,f)=>{const p=new XMLHttpRequest;p.open("POST",e.url),p.withCredentials=e.credentials,p.upload.onprogress=g=>{c(g.loaded/g.total*100)},p.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+p.status)},p.onload=()=>{if(p.status<200||p.status>=300)return void f("HTTP Error: "+p.status);const g=JSON.parse(p.responseText);var v,h;g&&Tt(g.location)?u((h=g.location,(v=e.basePath)?v.replace(/\/$/,"")+"/"+h.replace(/^\//,""):h)):f("Invalid JSON: "+p.responseText)};const b=new FormData;b.append("file",l.blob(),l.filename()),p.send(b)}),o=he(e.handler)?e.handler:r,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{lt.each(n[l],u=>{u(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||o!==r?(f=c,u=lt.grep(u=l,p=>!t.isUploaded(p.blobUri())),Promise.all(lt.map(u,p=>{return t.isPending(p.blobUri())?(b=>{const g=b.blobUri();return new Promise(v=>{n[g]=n[g]||[],n[g].push(v)})})(p):(g=o,v=f,t.markPending((b=p).blobUri()),new Promise(h=>{let C,S;try{const E=()=>{C&&(C.close(),S=kt)},N=R=>{E(),t.markUploaded(b.blobUri(),R),i(b.blobUri(),s(b,R)),h(s(b,R))},A=R=>{E(),t.removeFailed(b.blobUri()),i(b.blobUri(),a(b,R)),h(a(b,R))};S=R=>{R<0||R>100||k.from(C).orThunk(()=>k.from(v).map(vo)).each(L=>{C=L,L.progressBar.value(R)})},g(b,S).then(N,R=>{A(Tt(R)?{message:R}:R)})}catch(E){h(a(b,E))}}));var b,g,v}))):new Promise(u=>{u([])});var u,f}}})(e,{url:Hk(t),basePath:qk(t),credentials:$k(t),handler:Wk(t)}),l1={remove_similar:!0,inherit:!1},pi={selector:"td,th",...l1},ET={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...pi},tablecellverticalalign:{styles:{"vertical-align":"%value"},...pi},tablecellbordercolor:{styles:{borderColor:"%value"},...pi},tablecellclass:{classes:["%value"],...pi},tableclass:{selector:"table",classes:["%value"],...l1},tablecellborderstyle:{styles:{borderStyle:"%value"},...pi},tablecellborderwidth:{styles:{borderWidth:"%value"},...pi}},kT=mt(ET),xd=lt.each,Ir=Be.DOM,op=t=>ct(t)&&Yt(t),c1=(t,e)=>{const n=e&&e.schema||Es({}),r=a=>{const i=Tt(a)?{name:a,classes:[],attrs:{}}:a,l=Ir.create(i.name);return c=l,(u=i).classes.length>0&&Ir.addClass(c,u.classes.join(" ")),Ir.setAttribs(c,u.attrs),l;var c,u},o=(a,i,l)=>{let c;const u=i[0],f=op(u)?u.name:void 0,p=((v,h)=>{const C=n.getElementRule(v.nodeName.toLowerCase()),S=C?.parentsRequired;return!(!S||!S.length)&&(h&&Rt(S,h)?h:S[0])})(a,f);if(p)f===p?(c=u,i=i.slice(1)):c=p;else if(u)c=u,i=i.slice(1);else if(!l)return a;const b=c?r(c):Ir.create("div");b.appendChild(a),l&&lt.each(l,v=>{const h=r(v);b.insertBefore(h,a)});const g=op(c)?c.siblings:void 0;return o(b,i,g)},s=Ir.create("div");if(t.length>0){const a=t[0],i=r(a),l=op(a)?a.siblings:void 0;s.appendChild(o(i,t.slice(1),l))}return s},_T=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=lt.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,s,a,i)=>{switch(o){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==lt.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},NT=(t,e)=>{let n="",r=s_(t);if(""===r)return"";const o=b=>Tt(b)?b.replace(/%(\w+)/g,""):"",s=(b,g)=>Ir.getStyle(g??t.getBody(),b,!0);if(Tt(e)){const b=t.formatter.get(e);if(!b)return"";e=b[0]}if("preview"in e){const b=e.preview;if(!1===b)return"";r=b||r}let a,i=e.block||e.inline||"span";const l=Tt(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),lt.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),b=>{const g=lt.map(b.split(/(?:~\+|~|\+)/),_T),v=g.pop();return g.length&&(v.siblings=g),v}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=c1(l,t)):a=c1([i],t);const u=Ir.select(i,a)[0]||a.firstChild;xd(e.styles,(b,g)=>{const v=o(b);v&&Ir.setStyle(u,g,v)}),xd(e.attributes,(b,g)=>{const v=o(b);v&&Ir.setAttrib(u,g,v)}),xd(e.classes,b=>{const g=o(b);Ir.hasClass(u,g)||Ir.addClass(u,g)}),t.dispatch("PreviewFormats"),Ir.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const f=s("fontSize"),p=/px$/.test(f)?parseInt(f,10):0;return xd(r.split(" "),b=>{let g=s(b,u);if(!("background-color"===b&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(b),"#ffffff"===Vi(g).toLowerCase())||"color"===b&&"#000000"===Vi(g).toLowerCase())){if("font-size"===b&&/em|%$/.test(g)){if(0===p)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*p+"px"}"border"===b&&g&&(n+="padding:0 2px;"),n+=b+":"+g+";"}}),t.dispatch("AfterPreviewFormats"),Ir.remove(a),n},d1=t=>{const e=(r=>{const o={},s=(a,i)=>{a&&(Tt(a)?(it(i)||(i=[i]),Z(i,l=>{Ie(l.deep)&&(l.deep=!Dr(l)),Ie(l.split)&&(l.split=!Dr(l)||un(l)),Ie(l.remove)&&Dr(l)&&!un(l)&&(l.remove="none"),Dr(l)&&un(l)&&(l.mixed=!0,l.block_expand=!0),Tt(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[a]=i):we(a,(l,c)=>{s(c,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},p={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[p,u,f]:[u,p,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,p)=>_t(u)&&u.hasAttribute("href"),onformat:(u,f,p)=>{lt.each(p,(b,g)=>{i.setAttrib(u,g,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return null!==(f=u?.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return lt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{c[u]={block:u,remove:"all"}}),c})(r)),s(kT()),s(o_(r)),{get:a=>ct(a)?o[a]:o,has:a=>zt(o,a),register:s,unregister:a=>(a&&o[a]&&delete o[a],o)}})(t),n=bn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(r=t).on("mouseup keydown",o=>{var s;((a,i,l)=>{const c=a.selection,u=a.getBody();Om(a,null,l),8!==i&&46!==i||!c.isCollapsed()||c.getStart().innerHTML!==_l||Om(a,ha(u,c.getStart()),!0),37!==i&&39!==i||Om(a,ha(u,c.getStart()),!0)})(r,o.keyCode,(s=r.selection.getRng().endContainer,ot(s)&&Ws(s.data,hn)))}),zo(t)||((r,o)=>{r.set({}),o.on("NodeChange",s=>{Jy(o,s.element,r.get())}),o.on("FormatApply FormatRemove",s=>{const a=k.from(s.node).map(i=>gl(i)?i:i.startContainer).bind(i=>_t(i)?k.some(i):k.from(i.parentElement)).getOrThunk(()=>Gy(o));Jy(o,a,r.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,on(t).formatter.apply(i,l,c)},remove:(r,o,s,a)=>{var l,c,u,f;l=r,c=o,u=s,f=a,on(t).formatter.remove(l,c,u,f)},toggle:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,on(t).formatter.toggle(i,l,c)},match:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,on(t).formatter.match(l,c,u,f);var l,c,u,f},closest:r=>{return s=r,on(t).formatter.closest(s);var s},matchAll:(r,o)=>{return a=r,i=o,on(t).formatter.matchAll(a,i);var a,i},matchNode:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,on(t).formatter.matchNode(l,c,u,f);var l,c,u,f},canApply:r=>{return s=r,on(t).formatter.canApply(s);var s},formatChanged:(r,o,s,a)=>{return l=n,c=r,u=o,f=s,p=a,on(t).formatter.formatChanged(l,c,u,f,p);var l,c,u,f,p},getCssText:St(NT,t)};var r},u1=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},f1=t=>{const e=rs(),n=bn(0),r=bn(0),o={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,on(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=o,c=r,u=n,f=e,p=s,b=a,on(t).undoManager.add(l,c,u,f,p,b);var l,c,u,f,p,b},dispatchChange:()=>{t.setDirty(!0);const s=pd(t);s.bookmark=of(t.selection),t.dispatch("change",{level:s,lastLevel:Us(o.data,r.get()).getOrUndefined()})},undo:()=>{return a=o,i=n,l=r,on(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=r,i=o.data,on(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=o,i=r,on(t).undoManager.clear(a,i)},reset:()=>{var a;a=o,on(t).undoManager.reset(a)},hasUndo:()=>{return a=o,i=r,on(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=o,i=r,on(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=o,l=n,c=s,on(t).undoManager.transact(i,l,c);var i,l,c},ignore:s=>{var i,l;i=n,l=s,on(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,c,u,f;l=o,c=r,u=s,f=a,on(t).undoManager.extra(l,c,u,f)}};return zo(t)||((s,a,i)=>{const l=bn(!1),c=u=>{gd(a,!1,i),a.add({},u)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",u=>{u1(u.command)||(UC(a,i),a.beforeChange())}),s.on("ExecCommand",u=>{u1(u.command)||c(u)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",u=>{const f=u.keyCode;if(u.isDefaultPrevented())return;const p=pe.os.isMacOS()&&"Meta"===u.key;(f>=33&&f<=36||f>=37&&f<=40||45===f||u.ctrlKey||p)&&(c(),s.nodeChanged()),46!==f&&8!==f||s.nodeChanged(),l.get()&&a.typing&&!Jm(pd(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",u=>{const f=u.keyCode;if(!u.isDefaultPrevented()){if(!(f>=33&&f<=36||f>=37&&f<=40||45===f))return!(f<16||f>20)||224===f||91===f||a.typing||u.ctrlKey&&!u.altKey||u.metaKey?void((pe.os.isMacOS()?u.metaKey:u.ctrlKey&&!u.altKey)&&a.beforeChange()):(a.beforeChange(),gd(a,!0,i),a.add({},u),void l.set(!0));a.typing&&c(u)}}),s.on("mousedown",u=>{a.typing&&c(u)}),s.on("input",u=>{var f,p;u.inputType&&("insertReplacementText"===u.inputType||"insertText"===(f=u).inputType&&null===f.data||"insertFromPaste"===(p=u).inputType||"insertFromDrop"===p.inputType)&&c(u)}),s.on("AddUndo Undo Redo ClearUndos",u=>{u.isDefaultPrevented()||s.nodeChanged()})})(t,o,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),o;var s},AT=[9,27,vt.HOME,vt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,vt.DOWN,vt.UP,vt.LEFT,vt.RIGHT].concat(pe.browser.isFirefox()?[224]:[]),m1="data-mce-placeholder",p1=t=>"keydown"===t.type||"keyup"===t.type,g1=t=>{const e=t.keyCode;return e===vt.BACKSPACE||e===vt.DELETE},TT=(t,e)=>({from:t,to:e}),sp=(t,e)=>{const n=D(t),r=D(e.container());return rd(n,r).map(o=>((s,a)=>({block:s,position:a}))(o,e))},h1=(t,e)=>Nr(e,n=>el(n)||Vr(n.dom),n=>Ft(n,t)).filter(Hn).getOr(t),b1=(t,e,n)=>{const r=n?Ao(t).reverse():er(t),o=us(r,s=>e.isBlock(fe(s))).fold(mt(r),s=>r.slice(0,s));return n?o.reverse():o},v1=(t,e,n,r,o)=>{const s=((a,i,l,c,u)=>{if(u&&Je(a,i))return b1(i,l,c);if(u&&Je(i,a))return b1(a,l,c);{const f=Ee(i);return us(f,p=>l.isBlock(fe(p))).fold(mt(f),p=>f.slice(0,p))}})(t,e,n,r,o);return Z(s,ue),s},y1=(t,e,n)=>{const r=as(n,e);return Ge(r.reverse(),o=>In(t,o)).each(ue)},RT=(t,e,n,r,o,s)=>{if(In(r,n))return ks(n),jn(n.dom);var i;i=r,0===Xt(Ao(s),c=>!In(i,c)).length&&In(r,e)&&jt(s,Pt("br"));const a=cr(n.dom,Y.before(s.dom));return Z(v1(n,e,r,o,!1),i=>{jt(s,i)}),y1(r,t,e),a},OT=(t,e,n,r,o)=>{if(In(r,n)){if(In(r,e)){const i=Wo((l=>{const c=(u,f)=>_n(u).fold(()=>f,p=>r.isInline(fe(p))?c(p,f.concat(ca(p))):f);return c(l,[])})(n),(l,c)=>(ge(l,c),c),Ka());ae(e),Kt(e,i)}return ue(n),jn(e.dom)}const s=Kr(n.dom);return Z(v1(n,e,r,o,!0),a=>{o&&Je(e,n)?ke(n,a):Kt(n,a)}),y1(r,t,e),s},C1=(t,e)=>{ei(t,e.dom).bind(n=>k.from(n.getNode())).map(D).filter(ua).each(ue)},wd=(t,e,n,r,o)=>{return C1(!0,e),C1(!1,n),(s=e,a=n,Je(a,s)?((i,l)=>{const c=as(l,i);return k.from(c[c.length-1])})(a,s):k.none()).fold(St(OT,t,e,n,r,o),St(RT,t,e,n,r,o));var s,a},x1=(t,e,n,r,o,s=!1)=>{if(s){if(Je(r,n))return wd(t,r,n,o,!e);if(Je(n,r))return wd(t,n,r,o,e)}return e?wd(t,r,n,o,e):wd(t,n,r,o,!e)},ap=(t,e)=>{const n=D(t.getBody());return(o=t.schema,s=n.dom,a=e,i=t.selection.getRng(),i.collapsed?((l,c,u,f)=>{const p=sp(c,Y.fromRangeStart(f)),b=p.bind(g=>Rr(u,c,g.position).bind(v=>sp(c,v).map(h=>{return C=l,S=c,E=u,He((N=h).position.getNode())&&!In(C,N.block)?ei(!1,N.block.dom).bind(A=>A.isEqual(N.position)?Rr(E,S,A).bind(R=>sp(S,R)):k.some(N)).getOr(N):N;var C,S,E,N})));return Sn(p,b,TT).filter(g=>{return!Ft((v=g).from.block,v.to.block)&&((v,h)=>{const C=D(v);return Ft(h1(C,h.from.block),h1(C,h.to.block))})(c,g)&&(v=>!1===Me(v.from.block.dom)&&!1===Me(v.to.block.dom))(g)&&(v=>{const h=C=>_h(C)||Nu(C.dom)||Va(C);return h(v.from.block)&&h(v.to.block)})(g)&&(v=>!(Je(v.to.block,v.from.block)||Je(v.from.block,v.to.block)))(g);var v})})(o,s,a,i):k.none()).map(o=>()=>{x1(n,e,o.from.block,o.to.block,t.schema,!0).each(s=>{t.selection.setRng(s.toRange())})});var o,s,a,i},w1=(t,e)=>{const n=D(e),r=St(Ft,t);return Wr(n,el,r).isSome()},ip=(t,e)=>t.selection.isCollapsed()?k.none():(t=>{const e=D(t.getBody());return((n,r)=>{const o=cr(n.dom,Y.fromRangeStart(r)).isNone(),s=rr(n.dom,Y.fromRangeEnd(r)).isNone();return!(w1(a=n,(i=r).startContainer)||w1(a,i.endContainer))&&o&&s;var a,i})(e,t.selection.getRng())?(n=t,k.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r,o)=>{const s=r.getRng();return Sn(rd(n,D(s.startContainer)),rd(n,D(s.endContainer)),(a,i)=>Ft(a,i)?k.none():k.some(()=>{s.deleteContents(),x1(n,!0,a,i,o).each(l=>{r.setRng(l.toRange())})})).getOr(k.none())})(e,t.selection,t.schema);var n})(t),is=(t,e,n,r,o)=>k.from(e._selectionOverrides.showCaret(t,n,r,o)),Dl=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?k.none():k.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(e)),lp=(t,e,n)=>e.collapsed?((r,o,s)=>{const a=pf(1,r.getBody(),o),i=Y.fromRangeStart(a),l=i.getNode();if(ll(l))return is(1,r,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(ll(c))return is(1,r,c,!1,!1);const u=wa(r.dom.getRoot(),i.getNode());return ll(u)?is(1,r,u,!1,s):k.none()})(t,e,n).getOr(e):e,DT=t=>Ds(t)||Cl(t),PT=t=>Ps(t)||xl(t),S1=(t,e,n,r,o,s)=>{var a,i;is(r,t,s.getNode(!o),o,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();o?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,ot(i=n)&&0===i.data.length&&a.remove(i)},cp=(t,e)=>((n,r)=>{const o=n.selection.getRng();if(!ot(o.commonAncestorContainer))return k.none();const s=r?yn.Forwards:yn.Backwards,a=Io(n.getBody()),i=St(gf,r?a.next:a.prev),l=r?DT:PT,c=ml(s,n.getBody(),o),u=i(c),f=u&&Lr(r,u);if(!f||!Mc(c,f))return k.none();if(l(f))return k.some(()=>S1(n,o,c.getNode(),s,r,f));const p=i(f);return p&&l(p)&&Mc(f,p)?k.some(()=>S1(n,o,c.getNode(),s,r,p)):k.none()})(t,e),dp=(t,e)=>{const n=t.getBody();return e?jn(n).filter(Ds):Kr(n).filter(Ps)},up=t=>{const e=t.selection.getRng();return!e.collapsed&&(dp(t,!0).exists(n=>n.isEqual(Y.fromRangeStart(e)))||dp(t,!1).exists(n=>n.isEqual(Y.fromRangeEnd(e))))},Fr=Po([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),E1=(t,e,n,r)=>Rr(e,t,n).bind(o=>{return s=o.getNode(),ct(s)&&(el(D(s))||Va(D(s)))||((a,i,l,c,u)=>{const f=p=>u.isInline(p.nodeName.toLowerCase())&&!Lo(l,c,a);return F0(!i,l).fold(()=>F0(i,c).fold(xe,f),f)})(t,e,n,o,r)?k.none():e&&Me(o.getNode())||!e&&Me(o.getNode(!0))?((a,i,l,c,u)=>{const f=u.getNode(!l);return rd(D(i),D(c.getNode())).map(p=>In(a,p)?Fr.remove(p.dom):Fr.moveToElement(f)).orThunk(()=>k.some(Fr.moveToElement(f)))})(r,t,e,n,o):e&&Ps(n)||!e&&Ds(n)?k.some(Fr.moveToPosition(o)):k.none();var s}),k1=(t,e)=>k.from(wa(t.getBody(),e)),_1=t=>{const e=t.dom,n=t.selection,r=wa(t.getBody(),n.getNode());if(Vr(r)&&e.isBlock(r)&&e.isEmpty(r)){const o=e.create("br",{"data-mce-bogus":"1"});e.setHTML(r,""),r.appendChild(o),n.setRng(Y.before(o).toRange())}return!0},fp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return k1(t,n).filter(Me).fold(()=>((r,o,s,a)=>{const i=pf(o?1:-1,r,s),l=Y.fromRangeStart(i),c=D(r);return!o&&Ps(l)?k.some(Fr.remove(l.getNode(!0))):o&&Ds(l)?k.some(Fr.remove(l.getNode())):!o&&Ds(l)&&td(c,l,a)?Tv(c,l,a).map(u=>Fr.remove(u.getNode())):o&&Ps(l)&&nm(c,l,a)?ZN(c,l,a).map(u=>Fr.remove(u.getNode())):(u=r,b=a,((g,v)=>{const h=v.getNode(!g),C=g?"after":"before";return _t(h)&&h.getAttribute("data-mce-caret")===C})(f=o,p=l)?(g=f,v=p.getNode(!f),Se(v)?k.none():g&&Me(v.nextSibling)?k.some(Fr.moveToElement(v.nextSibling)):!g&&Me(v.previousSibling)?k.some(Fr.moveToElement(v.previousSibling)):k.none()).orThunk(()=>E1(u,f,p,b)):E1(u,f,p,b).bind(g=>((v,h,C)=>C.fold(S=>k.some(Fr.remove(S)),S=>k.some(Fr.moveToElement(S)),S=>Lo(h,S,v)?k.none():k.some(Fr.moveToPosition(S))))(u,p,g)));var u,f,p,b,g,v})(t.getBody(),e,t.selection.getRng(),t.schema).map(r=>()=>r.fold(((o,s)=>a=>(o._selectionOverrides.hideFakeCaret(),Ca(o,s,D(a)),!0))(t,e),((o,s)=>a=>{const i=s?Y.before(a):Y.after(a);return o.selection.setRng(i.toRange()),!0})(t,e),(o=>s=>(o.selection.setRng(s.toRange()),!0))(t))),()=>k.some(kt))})(t,e):((n,r)=>{const o=n.selection.getNode();return Me(o)&&!gc(o)?k1(n,o.parentNode).filter(Me).fold(()=>k.some(()=>{var s;s=D(n.getBody()),Z(Mn(s,".mce-offscreen-selection"),ue),Ca(n,r,D(n.selection.getNode())),im(n)}),()=>k.some(kt)):up(n)?k.some(()=>{Qv(n,n.selection.getRng(),D(n.getBody()))}):k.none()})(t,e),N1=t=>t.hasOwnProperty("text"),A1=t=>t.hasOwnProperty("marker"),T1=(t,e)=>{const n=(o,s)=>{if(ot(o))return{text:o,offset:s};{const a=e(),i=o.childNodes;return s<i.length?(o.insertBefore(a,i[s]),{marker:a,before:!0}):(o.appendChild(a),{marker:a,before:!1})}},r=n(t.endContainer,t.endOffset);return{start:n(t.startContainer,t.startOffset),end:r}},R1=t=>{var e,n;const{start:r,end:o}=t,s=new window.Range;return N1(r)?s.setStart(r.text,r.offset):A1(r)&&(r.before?s.setStartBefore(r.marker):s.setStartAfter(r.marker),null===(e=r.marker.parentNode)||void 0===e||e.removeChild(r.marker)),N1(o)?s.setEnd(o.text,o.offset):A1(o)&&(o.before?s.setEndBefore(o.marker):s.setEndAfter(o.marker),null===(n=o.marker.parentNode)||void 0===n||n.removeChild(o.marker)),s},mp=(t,e)=>{var n;const r=t.dom,o=r.getParent(t.selection.getStart(),r.isBlock),s=r.getParent(t.selection.getEnd(),r.isBlock),a=t.getBody();if("div"===(null===(n=o?.nodeName)||void 0===n?void 0:n.toLowerCase())&&o&&s&&o===a.firstChild&&s===a.lastChild&&!r.isEmpty(a)){const i=o.cloneNode(!1);return k.some(()=>{if(e?Xv(t):nd(t),a.firstChild!==o){const c=T1(t.selection.getRng(),()=>document.createElement("span"));Array.from(a.childNodes).forEach(u=>i.appendChild(u)),a.appendChild(i),t.selection.setRng(R1(c))}})}return k.none()},pp=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=Y.fromRangeStart(n.selection.getRng());return Rr(r,n.getBody(),o).filter(s=>r?KN(s):XN(s)).bind(s=>mf(r?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):k.none(),gi=ot,O1=t=>gi(t)&&t.data[0]===vn,B1=t=>gi(t)&&t.data[t.data.length-1]===vn,D1=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(vn)},Sd=(t,e)=>t?(n=>{var r;if(gi(n.previousSibling))return B1(n.previousSibling)||n.previousSibling.appendData(vn),n.previousSibling;if(gi(n))return O1(n)||n.insertData(0,vn),n;{const o=D1(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(e):(n=>{var r,o;if(gi(n.nextSibling))return O1(n.nextSibling)||n.nextSibling.insertData(0,vn),n.nextSibling;if(gi(n))return B1(n)||n.appendData(vn),n;{const s=D1(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(s,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(s),s}})(e),MT=St(Sd,!0),IT=St(Sd,!1),P1=(t,e)=>ot(t.container())?Sd(e,t.container()):Sd(e,t.getNode()),L1=(t,e)=>{const n=e.get();return n&&t.container()===n&&_s(n)},gp=(t,e)=>e.fold(n=>{pa(t.get());const r=MT(n);return t.set(r),k.some(Y(r,r.length-1))},n=>jn(n).map(r=>{if(L1(r,t)){const o=t.get();return Y(o,1)}{pa(t.get());const o=P1(r,!0);return t.set(o),Y(o,1)}}),n=>Kr(n).map(r=>{if(L1(r,t)){const o=t.get();return Y(o,o.length-1)}{pa(t.get());const o=P1(r,!1);return t.set(o),Y(o,o.length-1)}}),n=>{pa(t.get());const r=IT(n);return t.set(r),k.some(Y(r,1))}),M1=(t,e)=>{for(let n=0;n<t.length;n++){const r=t[n].apply(null,e);if(r.isSome())return r}return k.none()},Xn=Po([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),I1=(t,e)=>Ts(e,t)||t,FT=(t,e,n)=>{const r=Wv(n),o=I1(e,r.container());return Ls(t,o,r).fold(()=>rr(o,r).bind(St(Ls,t,o)).map(s=>Xn.before(s)),k.none)},jT=(t,e)=>null===ha(t,e),F1=(t,e,n)=>Ls(t,e,n).filter(St(jT,e)),zT=(t,e,n)=>{const r=Vv(n);return F1(t,e,r).bind(o=>cr(o,r).isNone()?k.some(Xn.start(o)):k.none())},UT=(t,e,n)=>{const r=Wv(n);return F1(t,e,r).bind(o=>rr(o,r).isNone()?k.some(Xn.end(o)):k.none())},HT=(t,e,n)=>{const r=Vv(n),o=I1(e,r.container());return Ls(t,o,r).fold(()=>cr(o,r).bind(St(Ls,t,o)).map(s=>Xn.after(s)),k.none)},j1=t=>!$v(hp(t)),Uo=(t,e,n)=>M1([FT,zT,UT,HT],[t,e,n]).filter(j1),hp=t=>t.fold(me,me,me,me),z1=t=>t.fold(mt("before"),mt("start"),mt("end"),mt("after")),Ed=t=>t.fold(Xn.before,Xn.before,Xn.after,Xn.after),bp=t=>t.fold(Xn.start,Xn.start,Xn.end,Xn.end),qT=(t,e,n,r,o,s)=>Sn(Ls(e,n,r),Ls(e,n,o),(a,i)=>a!==i&&((l,c,u)=>{const f=Ts(c,l),p=Ts(u,l);return ct(f)&&f===p})(n,a,i)?Xn.after(t?a:i):s).getOr(s),$T=(t,e)=>t.fold(je,n=>{return o=e,!(z1(r=n)===z1(o)&&hp(r)===hp(o));var r,o}),WT=(t,e)=>t?e.fold(On(k.some,Xn.start),k.none,On(k.some,Xn.after),k.none):e.fold(k.none,On(k.some,Xn.before),k.none,On(k.some,Xn.end)),U1=(t,e,n)=>{const r=t?1:-1;return e.setRng(Y(n.container(),n.offset()+r).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Ho;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Ho||(Ho={}));const kd=(t,e)=>t===yn.Backwards?Jr(e):e,VT=(t,e,n)=>t===yn.Forwards?e.next(n):e.prev(n),KT=(t,e,n,r)=>He(r.getNode(e===yn.Forwards))?Ho.Br:!1===Lo(n,r)?Ho.Block:Ho.Wrap,H1=(t,e,n,r)=>{const o=Io(n);let s=r;const a=[];for(;s;){const i=VT(e,o,s);if(!i)break;if(He(i.getNode(!1)))return e===yn.Forwards?{positions:kd(e,a).concat([i]),breakType:Ho.Br,breakAt:k.some(i)}:{positions:kd(e,a),breakType:Ho.Br,breakAt:k.some(i)};if(i.isVisible()){if(t(s,i)){const l=KT(0,e,s,i);return{positions:kd(e,a),breakType:l,breakAt:k.some(i)}}a.push(i),s=i}else s=i}return{positions:kd(e,a),breakType:Ho.Eol,breakAt:k.none()}},q1=(t,e,n,r)=>e(n,r).breakAt.map(o=>{const s=e(n,o).positions;return t===yn.Backwards?s.concat(o):[o].concat(s)}).getOr([]),vp=(t,e)=>xn(t,(n,r)=>n.fold(()=>k.some(r),o=>Sn(kn(o.getClientRects()),kn(r.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?r:o}).or(n)),k.none()),_d=(t,e)=>kn(e.getClientRects()).bind(n=>vp(t,n.left)),Pl=St(H1,Y.isAbove,-1),Ll=St(H1,Y.isBelow,1),$1=St(q1,-1,Pl),W1=St(q1,1,Ll),V1=(t,e)=>Pl(t,e).breakAt.isNone(),K1=(t,e)=>Ll(t,e).breakAt.isNone(),XT=(t,e)=>_d($1(t,e),e),YT=(t,e)=>_d(W1(t,e),e),GT=Me,X1=(t,e)=>Math.abs(t.left-e),Y1=(t,e)=>Math.abs(t.right-e),G1=(t,e)=>ms(t,(n,r)=>{const o=Math.min(X1(n,e),Y1(n,e)),s=Math.min(X1(r,e),Y1(r,e));return s===o&&fn(r,"node")&&GT(r.node)||s<o?r:n}),QT=t=>{const e=n=>re(n,r=>{const o=fa(r);return o.node=t,o});if(_t(t))return e(t.getClientRects());if(ot(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},Q1=t=>Qe(t,QT);var Ml;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Ml||(Ml={}));const Z1=(t,e,n,r,o,s)=>{let a=0;const i=[],l=f=>{let p=Q1([f]);-1===t&&(p=p.reverse());for(let b=0;b<p.length;b++){const g=p[b];if(!n(g,c)){if(i.length>0&&e(g,Ko(i))&&a++,g.line=a,o(g))return!0;i.push(g)}}return!1},c=Ko(s.getClientRects());if(!c)return i;const u=s.getNode();return u&&(l(u),((f,p,b,g)=>{let v=g;for(;v=dl(v,f,Lh,p);)if(b(v))return})(t,r,l,u)),i},ZT=St(Z1,Ml.Up,nl,rl),JT=St(Z1,Ml.Down,rl,nl),J1=t=>Ko(t.getClientRects()),tx=t=>e=>e.line>t,yp=t=>e=>e.line===t,ls=(t,e)=>{t.selection.setRng(e),yl(t,t.selection.getRng())},Cp=(t,e,n)=>k.some(lp(t,e,n)),ex=(t,e,n,r,o,s)=>{const a=e===yn.Forwards,i=Io(t.getBody()),l=St(gf,a?i.next:i.prev),c=a?r:o;if(!n.collapsed){const g=Nc(n);if(s(g))return is(e,t,g,e===yn.Backwards,!1);if(up(t)){const v=n.cloneRange();return v.collapse(e===yn.Backwards),k.from(v)}}const u=ml(e,t.getBody(),n);if(c(u))return Dl(t,u.getNode(!a));let f=l(u);const p=Ah(n);if(!f)return p?k.some(n):k.none();if(f=Lr(a,f),c(f))return is(e,t,f.getNode(!a),a,!1);const b=l(f);return b&&c(b)&&Mc(f,b)?is(e,t,b.getNode(!a),a,!1):p?Cp(t,f.toRange(),!1):k.none()},nx=(t,e,n,r,o,s)=>{const a=ml(e,t.getBody(),n),i=Ko(a.getClientRects()),l=e===Ml.Down,c=t.getBody();if(!i)return k.none();if(up(t)){const v=l?Y.fromRangeEnd(n):Y.fromRangeStart(n);return(l?YT:XT)(c,v).orThunk(()=>k.from(v)).map(h=>h.toRange())}const u=(l?JT:ZT)(c,tx(1),a),f=Xt(u,yp(1)),p=i.left,b=G1(f,p);if(b&&s(b.node)){const v=Math.abs(p-b.left),h=Math.abs(p-b.right);return is(e,t,b.node,v<h,!1)}let g;if(g=r(a)?a.getNode():o(a)?a.getNode(!0):Nc(n),g){const v=((C,S,E,N)=>{const A=Io(S);let R,L,P,j;const W=[];let B=0;1===C?(R=A.next,L=rl,P=nl,j=Y.after(N)):(R=A.prev,L=nl,P=rl,j=Y.before(N));const I=J1(j);do{if(!j.isVisible())continue;const z=J1(j);if(P(z,I))continue;W.length>0&&L(z,Ko(W))&&B++;const G=fa(z);if(G.position=j,G.line=B,E(G))return W;W.push(G)}while(j=R(j));return W})(e,c,tx(1),g);let h=G1(Xt(v,yp(1)),p);if(h||(h=Ko(Xt(v,yp(0))),h))return Cp(t,h.position.toRange(),!1)}return 0===f.length?xp(t,l).filter(l?o:r).map(v=>lp(t,v.toRange(),!1)):k.none()},xp=(t,e)=>{const n=t.selection.getRng(),r=e?Y.fromRangeEnd(n):Y.fromRangeStart(n),o=(s=r.container(),a=t.getBody(),Wr(D(s),i=>nN(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=Ll(o,r);return to(i.positions)}{const i=Pl(o,r);return kn(i.positions)}},rx=(t,e,n)=>xp(t,e).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),Nd=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},ox=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},sx=(t,e,n)=>gp(e,n).map(r=>(Nd(t,r),n)),ax=(t,e,n)=>!!il(t)&&((t,e,n)=>{const r=t.getBody(),o=((s,a,i)=>{const l=Y.fromRangeStart(s);if(s.collapsed)return l;{const c=Y.fromRangeEnd(s);return i?cr(a,c).getOr(c):rr(a,l).getOr(l)}})(t.selection.getRng(),r,n);return((s,a,i,l)=>{const c=Lr(s,l),u=Uo(a,i,c);return Uo(a,i,c).bind(St(WT,s)).orThunk(()=>((f,p,b,g,v)=>{const h=Lr(f,v);return Rr(f,b,h).map(St(Lr,f)).fold(()=>g.map(Ed),C=>Uo(p,b,C).map(St(qT,f,p,b,h,C)).filter(St($T,g))).filter(j1)})(s,a,i,u,l))})(n,St(xa,t),r,o).bind(s=>sx(t,e,s))})(t,e,n).isSome(),ix=(t,e,n)=>!!il(e)&&((r,o)=>{const s=o.selection.getRng(),a=r?Y.fromRangeEnd(s):Y.fromRangeStart(s);return!!he(o.selection.getSel().modify)&&(r&&Ku(a)?U1(!0,o.selection,a):!(r||!Xu(a))&&U1(!1,o.selection,a))})(t,e),nR=St(ix,!0),rR=St(ix,!1),Ad=(t,e,n)=>{if(il(t)){const r=xp(t,e).getOrThunk(()=>{const o=t.selection.getRng();return e?Y.fromRangeEnd(o):Y.fromRangeStart(o)});return Uo(St(xa,t),t.getBody(),r).exists(o=>{const s=Ed(o);return gp(n,s).exists(a=>(Nd(t,a),!0))})}return!1},lx=(t,e)=>n=>gp(e,n).map(r=>()=>Nd(t,r)),cx=(t,e,n,r)=>{const o=t.getBody(),s=St(xa,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,r)),nd(t),Uo(s,o,Y.fromRangeStart(t.selection.getRng())).map(bp).bind(lx(t,e)).each(Qn)}),t.nodeChanged()},wp=(t,e,n)=>{if(t.selection.isCollapsed()&&il(t)){const r=Y.fromRangeStart(t.selection.getRng());return((o,s,a,i)=>{const l=(f=o.getBody(),p=i.container(),Ts(p,f)||f),c=St(xa,o),u=Uo(c,l,i);var f,p;return u.bind(f=>a?f.fold(mt(k.some(bp(f))),k.none,mt(k.some(Ed(f))),k.none):f.fold(k.none,mt(k.some(Ed(f))),k.none,mt(k.some(bp(f))))).map(lx(o,s)).getOrThunk(()=>{const f=ti(a,l,i),p=f.bind(b=>Uo(c,l,b));return Sn(u,p,()=>Ls(c,l,i).bind(b=>{return Sn(jn(g=b),Kr(g),(v,h)=>{const C=Lr(!0,v),S=Lr(!1,h);return rr(g,C).forall(E=>E.isEqual(S))}).getOr(!0)?k.some(()=>{Ca(o,a,D(b))}):k.none();var g})).getOrThunk(()=>p.bind(()=>f.map(b=>()=>{a?cx(o,s,i,b):cx(o,s,b,i)})))})})(t,e,n,r)}return k.none()},dx=(t,e)=>{const n=D(t.getBody()),r=D(t.selection.getStart()),o=as(r,n);return us(o,e).fold(mt(o),s=>o.slice(0,s))},oR=t=>1===Nn(t),ux=(t,e)=>{const n=St(Sy,t);return Qe(e,r=>n(r)?[r.dom]:[])},fx=t=>{const e=dx(n=t,r=>n.schema.isBlock(fe(r)));var n;return ux(t,e)},mx=(t,e)=>{const n=t.selection.getStart(),r=((o,s)=>{const a=s.parentElement;return He(s)&&!Jt(a)&&o.dom.isEmpty(a)})(t,n)||Df(D(n))?wy(n,e):((o,s)=>{const{caretContainer:a,caretPosition:i}=xy(s);return o.insertNode(a.dom),i})(t.selection.getRng(),e);t.selection.setRng(r.toRange())},px=t=>ot(t.startContainer),Sp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=Xt(dx(r=t,o=>r.schema.isBlock(fe(o))||Nn(o)>1),oR);var r;return to(n).bind(r=>{const o=Y.fromRangeStart(t.selection.getRng());return Yv(e,o,r.dom)&&!Df(r)?k.some(()=>((s,a,i,l)=>{const c=ux(a,l);if(0===c.length)Ca(a,s,i);else{const u=wy(i.dom,c);a.selection.setRng(u.toRange())}})(e,t,r,n)):k.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&px(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!Jt(o)&&Sy(n,D(o))})(t,e)&&(n=>{return(o=>{const s=o.startContainer.parentNode,a=o.endContainer.parentNode;return!Jt(s)&&!Jt(a)&&s.isEqualNode(a)})(r=n)&&(o=>{const s=o.endContainer;return o.endOffset===(ot(s)?s.length:s.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(e);var n})(n)){const r=fx(n);return k.some(()=>{nd(n),((o,s)=>{const a=ne(s,fx(o));a.length>0&&mx(o,a)})(n,r)})}return k.none()})(t),Il=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(px(n)||e.dom.isEmpty(n.startContainer))&&(o=D((r=e).selection.getStart()),s=r.schema,!Bg(o,a=>Or(a.dom),a=>s.isBlock(fe(a))));var r,o,s})(t)&&mx(t,[]),!0),Ep=(t,e,n)=>ct(n)?k.some(()=>{t._selectionOverrides.hideFakeCaret(),Ca(t,e,D(n))}):k.none(),kp=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=r?Cl:xl,a=ml(r?yn.Forwards:yn.Backwards,n.getBody(),n.selection.getRng());return o(a)?Ep(n,r,a.getNode(!r)):k.from(Lr(r,a)).filter(i=>o(i)&&Mc(a,i)).bind(i=>Ep(n,r,i.getNode(!r)))})(t,e):((n,r)=>{const o=n.selection.getNode();return Do(o)?Ep(n,r,o):k.none()})(t,e),_p=t=>Vs(t??"").getOr(0),gx=(t,e)=>(t||"table"===fe(e)?"margin":"padding")+("rtl"===tt(e,"direction")?"-right":"-left"),hx=t=>{const e=vx(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,ar(e,o=>{const s=gx(p0(n),o),a=dt(o,s).map(_p).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&a>0})));var n},bx=t=>Vu(t)||Va(t),vx=t=>Xt(dn(t.selection.getSelectedBlocks()),e=>!bx(e)&&!ir(e).exists(bx)&&Nr(e,n=>Vr(n.dom)||Me(n.dom)).exists(n=>Vr(n.dom))),yx=(t,e)=>{var n,r;const{dom:o}=t,s=Xk(t),a=null!==(r=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",i=_p(s),l=p0(t);Z(vx(t),c=>{((u,f,p,b,g,v)=>{const h=gx(p,D(v)),C=_p(u.getStyle(v,h));if("outdent"===f){const S=Math.max(0,C-b);u.setStyle(v,h,S?S+g:"")}else u.setStyle(v,h,C+b+g)})(o,e,l,i,a,c.dom)})},Cx=t=>yx(t,"outdent"),xx=t=>{if(t.selection.isCollapsed()&&hx(t)){const e=t.dom,n=t.selection.getRng(),r=Y.fromRangeStart(n),o=e.getParent(n.startContainer,e.isBlock);if(null!==o&&em(D(o),r,t.schema))return k.some(()=>Cx(t))}return k.none()},wx=(t,e,n)=>Zn([xx,fp,cp,(r,o)=>wp(r,e,o),ap,gm,pp,kp,ip,Sp,mp],r=>r(t,n)).filter(r=>t.selection.isEditable()),Sx=t=>void 0===t.touches||1!==t.touches.length?k.none():k.some(t.touches[0]),Np=(t,e)=>zt(t,e.nodeName),iR=(t,e)=>!!ot(e)||!!_t(e)&&!(Np(t.getBlockElements(),e)||Br(e)||oa(t,e)||Eu(e)),lR=(t,e)=>{if(ot(e)){if(0===e.data.length)return!0;if(/^\s+$/.test(e.data))return!e.nextSibling||Np(t,e.nextSibling)||Eu(e.nextSibling)}return!1},Ap=t=>t.dom.create(Fn(t),al(t)),Ex=(t,e,n)=>{const r=D(Ap(t)),o=Ka();Kt(r,o),n(e,r);const s=document.createRange();return s.setStartBefore(o.dom),s.setEndBefore(o.dom),s},kx=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),cR=(t,e,n)=>function(r){const o=arguments,s=o[o.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return r;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(o[0])+'">'+t.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},dR=(t,e)=>ar(t,n=>{const r=e.match(n);return null!==r&&r[0].length===e.length}),_x=(t,e)=>{e.hasAttribute("data-mce-caret")&&(Yu(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},uR=(t,e)=>{const n=ws(D(t.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void _x(t,n)):void(Nh(n)&&(_x(t,n),t.undoManager.add()))},Nx=Me,Ax=(t,e,n)=>{const r=Io(t.getBody()),o=St(gf,1===e?r.next:r.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!o(Y.fromRangeStart(n))){const a=D((i=>{const l=i.dom.create(Fn(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Lt(D(s),a):jt(D(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},Tx=(t,e)=>((n,r)=>{const o=r?yn.Forwards:yn.Backwards,s=n.selection.getRng();return(a=o,i=n,l=s,ex(i,a,l,Ds,Ps,Nx)).orThunk(()=>(Ax(n,o,s),k.none()));var a,i,l})(t,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return $v(o)?!r:r})(t.selection,e)).exists(n=>(ls(t,n),!0)),Rx=(t,e)=>((n,r)=>{const o=r?1:-1,s=n.selection.getRng();return(a=o,i=n,l=s,nx(i,a,l,c=>Ds(c)||Sv(c),c=>Ps(c)||Jf(c),Nx)).orThunk(()=>(Ax(n,o,s),k.none()));var a,i,l})(t,e).exists(n=>(ls(t,n),!0)),Ox=(t,e)=>rx(t,e,e?Ps:Ds),Td=(t,e)=>dp(t,!e).map(n=>{const r=n.toRange(),o=t.selection.getRng();return e?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(ls(t,n),!0)),fR=t=>Rt(["figcaption"],fe(t)),Bx=(t,e)=>!!t.selection.isCollapsed()&&((n,r)=>{const o=D(n.getBody()),s=Y.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const c=St(Ft,i);return Nr(D(a.container()),u=>l.isBlock(fe(u)),c).filter(fR)})(s,o,n.schema).exists(()=>{if(a=o,l=s,r?K1(a.dom,l):V1(a.dom,l)){const a=Ex(n,o,r?Kt:ke);return n.selection.setRng(a),!0}var a,l;return!1})})(t,e),Dx=(t,e)=>{return n=t,e?k.from(n.dom.getParent(n.selection.getNode(),"details")).map(o=>((s,a)=>{const i=s.selection.getRng(),l=Y.fromRangeStart(i);return!(s.getBody().lastChild!==a||!K1(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,o)).getOr(!1):k.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(o=>k.from(n.dom.getParent(o,"details")).map(s=>((a,i,l)=>{const c=a.selection.getRng(),u=Y.fromRangeStart(c);return!(a.getBody().firstChild!==i||!V1(l,u)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,o))).getOr(!1);var n},Px={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Lx=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,qt=(t,...e)=>()=>t.apply(null,e),Fl=(t,e)=>{return Ge((r=e,Qe(re(t,s=>({...Px,...s})),o=>Lx(o,r)?[o]:[])),n=>n.action());var r},Mx=(t,e)=>{return Zn((r=e,Qe(re(t,s=>({...Px,...s})),o=>Lx(o,r)?[o]:[])),n=>n.action());var r},Ix=(t,e)=>{const n=e?yn.Forwards:yn.Backwards,r=t.selection.getRng();return ex(t,n,r,Cl,xl,Do).exists(o=>(ls(t,o),!0))},Fx=(t,e)=>{const n=e?1:-1,r=t.selection.getRng();return nx(t,n,r,Cl,xl,Do).exists(o=>(ls(t,o),!0))},jx=(t,e)=>rx(t,e,e?xl:Cl),zx=Po([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),jl={...zx,none:t=>zx.none(t)},Ux=(t,e,n)=>Qe(Ee(t),r=>cn(r,e)?n(r)?[r]:[]:Ux(r,e,n)),Hx=(t,e)=>ao(t,"table",e),Tp=(t,e,n,r,o=je)=>{const s=1===r;if(!s&&n<=0)return jl.first(t[0]);if(s&&n>=t.length-1)return jl.last(t[t.length-1]);{const a=n+r,i=t[a];return o(i)?jl.middle(e,i):Tp(t,e,a,r,o)}},qx=(t,e)=>Hx(t,e).bind(n=>{const r=Ux(n,"th,td",je);return us(r,o=>Ft(t,o)).map(o=>({index:o,all:r}))}),mR=["img","br"],pR=t=>{return(e=t,Wu.getOption(e)).filter(n=>0!==n.trim().length||n.indexOf(hn)>-1).isSome()||Rt(mR,fe(t))||Gs(n=t)&&"false"===tr(n,"contenteditable");var n,e},$x=(t,e,n,r,o)=>{const s=Mn(D(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,c)=>xn(i,(u,f)=>u.fold(()=>k.some(f),p=>{const b=Math.sqrt(Math.abs(p.x-l)+Math.abs(p.y-c)),g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return k.some(g<b?f:p)}),k.none()))(Xt((i=t,Qe(s,c=>{const u={left:(f=fa(c.getBoundingClientRect())).left- -1,top:f.top- -1,right:f.right+-2,bottom:f.bottom+-2,width:f.width+-1,height:f.height+-1};var f;return[{x:u.left,y:i(u),cell:c},{x:u.right,y:i(u),cell:c}]})),i=>e(i,o)),r,o).map(i=>i.cell)},gR=St($x,t=>t.bottom,(t,e)=>t.y<e),hR=St($x,t=>t.top,(t,e)=>t.y>e),Wx=(t,e,n)=>{const r=t(e,n);return(o=r).breakType===Ho.Wrap&&0===o.positions.length||!He(n.getNode())&&(o=>o.breakType===Ho.Br&&1===o.positions.length)(r)?!((o,s,a)=>a.breakAt.exists(i=>o(s,i).breakAt.isSome()))(t,e,r):r.breakAt.isNone();var o},bR=St(Wx,Pl),vR=St(Wx,Ll),yR=(t,e,n,r)=>{const o=t.selection.getRng(),s=e?1:-1;return!(!B0()||!((a,i,l)=>{const c=Y.fromRangeStart(i);return ei(!a,l).exists(u=>u.isEqual(c))})(e,o,n)||(is(s,t,n,!e,!1).each(a=>{ls(t,a)}),0))},Vx=(t,e,n)=>{const r=((s,a)=>{const i=a.getNode(s);return Bo(i)?k.some(i):k.none()})(!!e,n),o=!1===e;r.fold(()=>ls(t,n.toRange()),s=>ei(o,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>ls(t,n.toRange()),a=>{return i=e,c=s,void(l=t).undoManager.transact(()=>{const u=i?Lt:jt,f=Ex(l,D(c),u);ls(l,f)});var i,l,c}))},CR=(t,e,n,r)=>{const o=t.selection.getRng(),s=Y.fromRangeStart(o),a=t.getBody();if(!e&&bR(r,s)){const i=(l=a,(f=c=n,p=u=s,kn(p.getClientRects()).bind(b=>gR(f,b.left,b.top)).bind(b=>{return _d(Kr(g=b).map(v=>Pl(g,v).positions.concat(v)).getOr([]),p);var g})).orThunk(()=>kn(u.getClientRects()).bind(f=>vp($1(l,Y.before(c)),f.left))).getOr(Y.before(c)));return Vx(t,e,i),!0}var l,c,u,f,p;if(e&&vR(r,s)){const i=((l,c,u)=>((f,p)=>to(p.getClientRects()).bind(b=>hR(f,b.left,b.top)).bind(b=>{return _d(jn(g=b).map(v=>[v].concat(Ll(g,v).positions)).getOr([]),p);var g}))(c,u).orThunk(()=>kn(u.getClientRects()).bind(f=>vp(W1(l,Y.after(c)),f.left))).getOr(Y.after(c)))(a,n,s);return Vx(t,e,i),!0}return!1},Kx=(t,e,n)=>k.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(r=>k.from(t.dom.getParent(r,"table")).map(o=>n(t,e,o,r))).getOr(!1),Xx=(t,e)=>Kx(t,e,yR),Rp=(t,e)=>Kx(t,e,CR),Yx=(t,e,n)=>n.fold(k.none,k.none,(r,o)=>{return(s=o,ta(s,pR)).map(a=>{return(t=>{const e=ai.getWin(t).dom,n=(o,s,a,i)=>Mf(e,o,s,a,i),r=t.match({domRange:s=>{const a=D(s.startContainer),i=D(s.endContainer);return Bb(a,s.startOffset,i,s.endOffset)},relative:yN,exact:Bb});return((o,s)=>{var i;return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(u=>!1===u.collapsed).map(u=>vl.rtl(D(u.endContainer),u.endOffset,D(u.startContainer),u.startOffset)).getOrThunk(()=>Rb(0,vl.ltr,c)):Rb(0,vl.ltr,c)})(0,(i=o,s.match({domRange:c=>({ltr:mt(c),rtl:k.none}),relative:(c,u)=>({ltr:qr(()=>Tb(i,c,u)),rtl:qr(()=>k.some(Tb(i,u,c)))}),exact:(c,u,f,p)=>({ltr:qr(()=>Mf(i,c,u,f,p)),rtl:qr(()=>k.some(Mf(i,f,p,c,u)))})})))})(e,r).match({ltr:n,rtl:n})})(ai.exact(i=a,0,i,0));var i});var s},r=>(t.execCommand("mceTableInsertRowAfter"),Gx(t,e,r))),Gx=(t,e,n)=>{return Yx(t,e,(o=io,qx(r=n,void 0).fold(()=>jl.none(r),s=>Tp(s.all,r,s.index,1,o))));var r,o},xR=(t,e,n)=>{return Yx(t,e,(o=io,qx(r=n,void 0).fold(()=>jl.none(),s=>Tp(s.all,r,s.index,-1,o))));var r,o},Qx=(t,e)=>{const n=["table","li","dl"],r=D(t.getBody()),o=a=>{const i=fe(a);return Ft(a,r)||Rt(n,i)},s=t.selection.getRng();return(a=D(e?s.endContainer:s.startContainer),i=o,((l,c,u=xe)=>u(c)?k.none():Rt(l,fe(c))?k.some(c):Ro(c,l.join(","),f=>cn(f,"table")||u(f)))(["td","th"],a,i)).map(a=>(Hx(a,o).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?Gx:xR)(t,o,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},ho=(t,e)=>({container:t,offset:e}),Rd=Be.DOM,Od=t=>e=>t===e?-1:0,Op=(t,e,n)=>{if(ot(t)&&e>=0)return k.some(ho(t,e));{const r=da(Rd);return k.from(r.backwards(t,e,Od(t),n)).map(o=>ho(o.container,o.container.data.length))}},Bp=(t,e,n)=>{if(!ot(t))return k.none();if(e>=0&&e<=t.data.length)return k.some(ho(t,e));{const o=da(Rd);return k.from(o.backwards(t,e,Od(t),n)).bind(s=>Bp(s.container,e+s.container.data.length,n))}},Zx=(t,e,n)=>{if(!ot(t))return k.none();const r=t.data;if(e<=r.length)return k.some(ho(t,e));{const o=da(Rd);return k.from(o.forwards(t,e,Od(t),n)).bind(s=>Zx(s.container,e-r.length,n))}},Dp=(t,e,n,r,o)=>{const s=da(t,(a=>i=>a.isBlock(i)||Rt(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i))(t));return k.from(s.backwards(e,n,r,o))},Jx=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),wR=(t,e)=>t.substring(e.length),Pp=(t,e,n,r=!1)=>{if(!(o=e).collapsed||!ot(o.startContainer))return k.none();var o;const s={text:"",offset:0},a=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return Dp(t,e.startContainer,e.startOffset,(i,l,c)=>(s.text=c+s.text,s.offset+=l,((u,f,p,b=!1)=>{let g;const v=p.charAt(0);for(g=f-1;g>=0;g--){const h=u.charAt(g);if(!b&&Jx(h))return k.none();if(v===h&&mn(u,p,g,f))break}return k.some(g)})(s.text,s.offset,n,r).getOr(l)),a).bind(i=>{const l=e.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(e.endContainer,e.endOffset),l.collapsed)return k.none();const c=br(l.toString().replace(/\u00A0/g," "));return 0!==c.lastIndexOf(n)?k.none():k.some({text:wR(c,n),range:l,trigger:n})})},tw=t=>{if(3===t.nodeType)return ho(t,t.data.length);{const e=t.childNodes;return e.length>0?tw(e[e.length-1]):ho(t,e.length)}},ew=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?ew(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?tw(n[n.length-1]):ho(t,e)},nw=(t,e,n,r={})=>{var o;const s=e(),a=null!==(o=t.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=Xt(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>(u=>f=>{const p=ew(f.startContainer,f.startOffset);return!((b,g)=>{var v;const h=null!==(v=b.getParent(g.container,b.isBlock))&&void 0!==v?v:b.getRoot();return Dp(b,g.container,g.offset,(C,S)=>0===S?-1:S,h).filter(C=>{const S=C.container.data.charAt(C.offset-1);return!Jx(S)}).isSome()})(u,p)})(t.dom))(n.range,a,n.text));if(0===i.length)return k.none();const l=Promise.all(re(i,c=>c.fetch(n.text,c.maxResults,r).then(u=>({matchText:n.text,items:u,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return k.some({lookupData:l,context:n})};var qo;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(qo||(qo={}));const Lp=(t,e,n)=>t.stype===qo.Error?e(t.serror):n(t.svalue),hi=t=>({stype:qo.Value,svalue:t}),zl=t=>({stype:qo.Error,serror:t}),SR=Lp,Mp=t=>Yt(t)&&ln(t).length>100?" removed due to size":JSON.stringify(t,null,2),Bd=(t,e)=>zl([{path:t,getErrorInfo:e}]),rw=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const s in o)zt(o,s)&&(n[s]=t(n[s],o[s]))}return n},Ip=rw((t,e)=>Mt(t)&&Mt(e)?Ip(t,e):e),kR=rw((t,e)=>e),ow=t=>({tag:"defaultedThunk",process:mt(t)}),sw=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Fp=t=>({extract:(e,n)=>{return(r=t(n)).stype===qo.Error?Bd(e,mt(r.serror)):r;var r},toString:mt("val")}),NR=Fp(hi),aw=(t,e,n,r)=>r(Re(t,e).getOrThunk(()=>n(t))),AR=(t,e,n,r,o)=>{const s=i=>o.extract(e.concat([r]),i),a=i=>i.fold(()=>hi(k.none()),l=>{return(u=o.extract(e.concat([r]),l)).stype===qo.Value?{stype:qo.Value,svalue:(0,k.some)(u.svalue)}:u;var u});switch(t.tag){case"required":return i=e,u=s,Re(l=n,c=r).fold(()=>{return p=c,b=l,Bd(i,()=>'Could not find valid *required* value for "'+p+'" in '+Mp(b));var p,b},u);case"defaultedThunk":return aw(n,r,t.process,s);case"option":return((i,l,c)=>c(Re(i,l)))(n,r,a);case"defaultedOptionThunk":return((i,l,c,u)=>u(Re(i,l).map(f=>!0===f?c(i):f)))(n,r,t.process,a);case"mergeWithThunk":return aw(n,r,mt({}),i=>{const l=Ip(t.process(n),i);return s(l)})}var i,l,c,u},jp=t=>({extract:(e,n)=>((r,o,s)=>{const a={},i=[];for(const l of s)sw(l,(c,u,f,p)=>{const b=AR(f,r,o,c,p);SR(b,g=>{i.push(...g)},g=>{a[u]=g})},(c,u)=>{a[c]=u(o)});return i.length>0?zl(i):hi(a)})(e,n,t),toString:()=>"obj{\n"+re(t,n=>sw(n,(r,o,s,a)=>r+" -> "+a.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),iw=t=>({extract:(e,n)=>(t=>{const e=(r=>{const o=[],s=[];return Z(r,a=>{Lp(a,i=>s.push(i),i=>o.push(i))}),{values:o,errors:s}})(t);return e.errors.length>0?(n=e.errors,On(zl,Jl)(n)):hi(e.values);var n})(re(n,(o,s)=>t.extract(e.concat(["["+s+"]"]),o))),toString:()=>"array("+t.toString()+")"}),lw=(t,e)=>((t,e)=>({extract:(n,r)=>Re(r,t).fold(()=>{return s=t,Bd(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},o=>{return s=n,a=r,Re(i=e,l=o).fold(()=>{return u=i,f=l,Bd(s,()=>'The chosen schema: "'+f+'" did not exist in branches: '+Mp(u));var u,f},c=>c.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+ln(e)}))(t,fs(e,jp)),RR=mt(NR),Dd=(t,e)=>Fp(n=>{const r=typeof n;return t(n)?hi(n):zl(`Expected type: ${e} but got: ${r}`)}),OR=Dd(x,"number"),Pd=Dd(Tt,"string"),BR=Dd(En,"boolean"),zp=Dd(he,"function"),Ul=(t,e,n,r)=>({tag:"field",key:t,newKey:e,presence:n,prop:r}),cw=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),dw=(t,e)=>Ul(t,t,{tag:"required",process:{}},e),uw=t=>dw(t,Pd),fw=t=>dw(t,zp),Up=(t,e)=>Ul(t,t,{tag:"option",process:{}},e),Ld=t=>Up(t,Pd),bi=(t,e,n)=>Ul(t,t,ow(e),n),mw=(t,e)=>bi(t,e,OR),pw=(t,e,n)=>{return bi(t,e,(r=n,o=s=>Rt(r,s)?nr.value(s):nr.error(`Unsupported value: "${s}", choose one of "${r.join(", ")}".`),Fp(s=>o(s).fold(zl,hi))));var r,o},Hp=(t,e)=>bi(t,e,BR),qp=(t,e)=>bi(t,e,zp),DR=uw("type"),PR=fw("fetch"),$p=fw("onAction"),LR=qp("onSetup",()=>kt),MR=Ld("text"),IR=Ld("icon"),FR=Ld("tooltip"),jR=Ld("label"),zR=Hp("active",!1),UR=Hp("enabled",!0),gw=Hp("primary",!1),Hl=t=>bi("type",t,Pd),HR=jp([DR,uw("trigger"),mw("minChars",1),((t,e)=>Ul(t,t,ow(1),RR()))("columns"),mw("maxResults",10),Up("matches",zp),PR,$p,(hw=Pd,bi("highlightOn",[],iw(hw)))]);var hw;const Wp=[UR,FR,IR,MR,LR],bw=[zR].concat(Wp),qR=[qp("predicate",xe),pw("scope","node",["node","editor"]),pw("position","selection",["node","selection","line"])],$R=Wp.concat([Hl("contextformbutton"),gw,$p,cw("original",me)]),WR=bw.concat([Hl("contextformbutton"),gw,$p,cw("original",me)]),VR=Wp.concat([Hl("contextformbutton")]),KR=bw.concat([Hl("contextformtogglebutton")]),XR=lw("type",{contextformbutton:$R,contextformtogglebutton:WR});jp([Hl("contextform"),qp("initValue",mt("")),jR,((t,e)=>Ul(t,t,{tag:"required",process:{}},iw(e)))("commands",XR),Up("launch",lw("type",{contextformbutton:VR,contextformtogglebutton:KR}))].concat(qR));const GR=t=>{const e=rs(),n=bn(!1),r=e.isSet,o=()=>{r()&&(t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=qr(()=>(t=>{const e=t.ui.registry.getAll().popups,n=fs(e,s=>{return(a=s,((t,e,n)=>{return r=(i=e.extract([t],a=n)).stype===qo.Error?{stype:qo.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,Lp(r,nr.error,nr.value);var a,i,r})("Autocompleter",HR,a)).fold(i=>{throw new Error("Errors: \n"+(c=>{const u=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:mt("... (only showing first ten failures)")}]):c;return re(u,f=>"Failed path: ("+f.path.join(" > ")+")\n"+f.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+Mp(l.input));var l},me);var a}),r=Pa(ko(n,s=>s.trigger)),o=Da(n);return{dataset:n,triggers:r,lookupByTrigger:s=>Xt(o,a=>a.trigger===s)}})(t)),a=l=>{var c;(c=l,e.get().map(u=>Pp(t.dom,t.selection.getRng(),u.trigger,!0).bind(f=>nw(t,s,f,c))).getOrThunk(()=>((u,f)=>{const p=f(),b=u.selection.getRng();return(g=u.dom,v=b,h=p,Zn(h.triggers,C=>Pp(g,v,C))).bind(g=>nw(u,f,g));var g,v,h})(t,s))).fold(o,c=>{var u;u=c.context,r()||e.set({trigger:u.trigger,matchLength:u.text.length}),c.lookupData.then(u=>{e.get().map(f=>{const p=c.context;f.trigger===p.trigger&&(e.set({...f,matchLength:p.text.length}),n.get()?(Pf(t,{range:p.range}),t.dispatch("AutocompleterUpdate",{lookupData:u})):(n.set(!0),Pf(t,{range:p.range}),t.dispatch("AutocompleterStart",{lookupData:u})))})})})},i=()=>e.get().bind(({trigger:l})=>{const c=t.selection.getRng();return Pp(t.dom,c,l,n.get()).filter(({range:u})=>((f,p)=>{const b=f.compareBoundaryPoints(window.Range.START_TO_START,p),g=f.compareBoundaryPoints(window.Range.END_TO_END,p);return b>=0&&g<=0})(c,u)).map(({range:u})=>u)});t.addCommand("mceAutocompleterReload",(l,c)=>{const u=Yt(c)?c.fetchOptions:{};a(u)}),t.addCommand("mceAutocompleterClose",o),t.addCommand("mceAutocompleterRefreshActiveRange",()=>{i().each(l=>{Pf(t,{range:l})})}),t.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>i().isSome()),((l,c)=>{const u=$u(c.load,50);l.on("input",f=>{("insertCompositionText"!==f.inputType||l.composing)&&u.throttle()}),l.on("keydown",f=>{const p=f.which;8===p?u.throttle():27===p?(u.cancel(),c.cancelIfNecessary()):38!==p&&40!==p||u.cancel()},!0),l.on("remove",u.cancel)})(t,{cancelIfNecessary:o,load:a})},QR=Dn().browser.isSafari(),vw=t=>ks(D(t)),yw=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},Md=(t,e)=>k.from(t.getParent(e.container(),"details")),Cw=(t,e)=>Md(t,e).isSome(),xw=(t,e)=>{const n=e.getNode();Ie(n)||t.selection.setCursorLocation(n,e.offset())},ww=(t,e,n)=>{const r=t.dom.getParent(e.container(),"details");if(r&&!r.open){const o=t.dom.select("summary",r)[0];o&&(n?jn(o):Kr(o)).each(s=>xw(t,s))}else xw(t,e)},Sw=(t,e,n)=>{const{dom:r,selection:o}=t,s=t.getBody();if("character"===n){const a=Y.fromRangeStart(o.getRng()),i=r.getParent(a.container(),r.isBlock),l=Md(r,a),c=i&&r.isEmpty(i),u=Jt(i?.previousSibling),f=Jt(i?.nextSibling);return!!(c&&(e?f:u)&&ti(!e,s,a).exists(p=>Cw(r,p)&&!cc(l,Md(r,p))))||ti(e,s,a).fold(xe,p=>{const b=Md(r,p);if(Cw(r,p)&&!cc(l,b)){if(e||ww(t,p,!1),i&&c){if(e&&u||!e&&f)return!0;ww(t,p,e),t.dom.remove(i)}return!0}return!1})}return!1},ka=(t,e,n)=>{return o=e,s=n,((a,i)=>{const l=k.from(a.getParent(i.startContainer,"details")),c=k.from(a.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const u=l.bind(f=>k.from(a.select("summary",f)[0]));return k.some({startSummary:u,startDetails:l,endDetails:c})}return k.none()})((r=t).dom,r.selection.getRng()).fold(()=>Sw(r,o,s),a=>((t,e,n,r)=>{const o=t.selection.getRng(),s=Y.fromRangeStart(o),a=t.getBody();return"selection"===r?((i,l)=>{const c=l.startSummary.exists(p=>p.contains(i.startContainer)),u=l.startSummary.exists(p=>p.contains(i.endContainer)),f=l.startDetails.forall(p=>l.endDetails.forall(b=>p!==b));return(c||u)&&!(c&&u)||f})(o,e):n?(i=s,e.startSummary.exists(c=>{return u=i,Kr(f=c).exists(p=>He(p.getNode())&&cr(f,p).exists(b=>b.isEqual(u))||p.isEqual(u));var u,f})||((i,l,c)=>c.startDetails.exists(u=>rr(i,l).forall(f=>!u.contains(f.container()))))(a,s,e)):((i,l)=>l.startSummary.exists(c=>{return u=i,jn(c).exists(p=>p.isEqual(u));var u}))(s,e)||((i,l)=>l.startDetails.exists(c=>cr(c,i).forall(u=>l.startSummary.exists(f=>!f.contains(i.container())&&f.contains(u.container())))))(s,e);var i})(r,a,o,s)||Sw(r,o,s))||QR&&((r,o,s)=>{const a=r.selection,i=a.getNode(),l=a.getRng(),c=Y.fromRangeStart(l);return!!$E(i)&&("selection"===s&&yw(l,i)||Yv(o,c,i)?vw(i):r.undoManager.transact(()=>{const u=a.getSel();let{anchorNode:f,anchorOffset:p,focusNode:b,focusOffset:g}=u??{};const v=()=>{ct(f)&&ct(p)&&ct(b)&&ct(g)&&u?.setBaseAndExtent(f,p,b,g)},h=(S,E)=>{Z(S.childNodes,N=>{gl(N)&&E.appendChild(N)})},C=r.dom.create("span",{"data-mce-bogus":"1"});h(i,C),i.appendChild(C),v(),"word"!==s&&"line"!==s||null==u||u.modify("extend",o?"right":"left",s),!a.isCollapsed()&&yw(a.getRng(),C)?vw(i):(r.execCommand(o?"ForwardDelete":"Delete"),f=u?.anchorNode,p=u?.anchorOffset,b=u?.focusNode,g=u?.focusOffset,h(C,i),v()),r.dom.remove(C)}),!0)})(t,e,n)?k.some(kt):k.none();var r,o,s},Ew=t=>(e,n,r={})=>{const o=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:kt,inputType:n},a=fh(new InputEvent(t));return e.dispatch(t,{...a,...s,...r})},ql=Ew("input"),Id=Ew("beforeinput"),kw=Dn(),_w=kw.os,Nw=_w.isMacOS()||_w.isiOS(),JR=kw.browser.isFirefox(),vi=(t,e)=>{const n=t.dom,r=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(_t(a)||ot(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(hn),e.firstChild)}const o=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new gn(e,e);let a,i=e;for(;a=s.current();){if(ot(a)){o.setStart(a,0),o.setEnd(a,0);break}if(r[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}i=a,a=s.next()}a||(o.setStart(i,0),o.setEnd(i,0))}else He(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)):(o.setStart(e,0),o.setEnd(e,0));t.selection.setRng(o),yl(t,o)},$l=(t,e)=>{const n=t.getRoot();let r,o=e;for(;o!==n&&o&&"false"!==t.getContentEditable(o);){if("true"===t.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},Vp=t=>k.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Kp=t=>{t.innerHTML='<br data-mce-bogus="1">'},Wl=(t,e)=>{Fn(t).toLowerCase()===e.tagName.toLowerCase()&&((n,r,o)=>{const s=n.dom;k.from(o.style).map(s.parseStyle).each(u=>{const f={...Ht(D(r)),...u};s.setStyles(r,f)});const a=k.from(o.class).map(u=>u.split(/\s+/)),i=k.from(r.className).map(u=>Xt(u.split(/\s+/),f=>""!==f));Sn(a,i,(u,f)=>{const p=Xt(f,g=>!Rt(u,g)),b=[...u,...p];s.setAttrib(r,"class",b.join(" "))});const l=["style","class"],c=Eo(o,(u,f)=>!Rt(l,f));s.setAttribs(r,c)})(t,e,al(t))},Aw=(t,e,n,r,o=!0,s,a)=>{const i=t.dom,l=t.schema,c=Fn(t),u=n?n.nodeName.toUpperCase():"";let f=e;const p=l.getTextInlineElements();let b;b=s||"TABLE"===u||"HR"===u?i.create(s||c,a||{}):n.cloneNode(!1);let g=b;if(o){do{if(p[f.nodeName]){if(Or(f)||Br(f))continue;const v=f.cloneNode(!1);i.setAttrib(v,"id",""),b.hasChildNodes()?(v.appendChild(b.firstChild),b.appendChild(v)):(g=v,b.appendChild(v))}}while((f=f.parentNode)&&f!==r)}else i.setAttrib(b,"style",null),i.setAttrib(b,"class",null);return Wl(t,b),Kp(g),b},Tw=(t,e)=>{const n=t?.parentNode;return ct(n)&&n.nodeName===e},Rw=t=>ct(t)&&/^(OL|UL|LI)$/.test(t.nodeName),Xp=t=>ct(t)&&/^(LI|DT|DD)$/.test(t.nodeName),Fd=t=>{const e=t.parentNode;return Xp(e)?e:t},jd=(t,e,n)=>{let r=t[n?"firstChild":"lastChild"];for(;r&&!_t(r);)r=r[n?"nextSibling":"previousSibling"];return r===e},Ow=t=>xn(ko(Ht(D(t)),(e,n)=>`${n}: ${e};`),(e,n)=>e+n,""),tO=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Yp=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Gp=(t,e)=>ct(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Qp=(t,e,n)=>ot(e)?t?1===n&&e.data.charAt(n-1)===vn?0:n:n===e.data.length-1&&e.data.charAt(n)===vn?e.data.length:n:n,Bw={insert:(t,e)=>{let n,r,o,s,a=!1;const i=t.dom,l=t.schema.getNonEmptyElements(),c=t.selection.getRng(),u=Fn(t),f=D(c.startContainer),p=$e(f,c.startOffset),b=p.exists(j=>Gs(j)&&!io(j)),g=c.collapsed&&b,v=(j,W)=>Aw(t,n,A,N,Fk(t),j,W),h=j=>{const W=Qp(j,n,r);if(ot(n)&&(j?W>0:W<n.data.length))return!1;if((n.parentNode===A||n===A)&&a&&!j||j&&_t(n)&&n===A.firstChild)return!0;if(Yp(n,"TABLE")||Yp(n,"HR"))return a&&!j||!a&&j;const B=new gn(n,A);let I;for(ot(n)&&(j&&0===W?B.prev():j||W!==n.data.length||B.next());I=B.current();){if(_t(I)){if(!I.getAttribute("data-mce-bogus")){const z=I.nodeName.toLowerCase();if(l[z]&&"br"!==z)return!1}}else if(ot(I)&&!Ha(I.data))return!1;j?B.prev():B.next()}return!0},C=()=>{let j;return j=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==R?v(u):v(),((W,B)=>{const I=jk(W);return!Se(B)&&(Tt(I)?Rt(lt.explode(I),B.nodeName.toLowerCase()):I)})(t,s)&&Gp(i,s)&&i.isEmpty(A,void 0,{includeZwsp:!0})?j=i.split(s,A):i.insertAfter(j,A),vi(t,j),j};Kc(i,c).each(j=>{c.setStart(j.startContainer,j.startOffset),c.setEnd(j.endContainer,j.endOffset)}),n=c.startContainer,r=c.startOffset;const S=!(!e||!e.shiftKey),E=!(!e||!e.ctrlKey);_t(n)&&n.hasChildNodes()&&!g&&(a=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=a&&ot(n)?n.data.length:0);const N=$l(i,n);if(!N||((j,W)=>{const B=j.dom.getParent(W,"ol,ul,dl");return null!==B&&"false"===j.dom.getContentEditableParent(B)})(t,n))return;S||(n=((j,W,B,I,z)=>{var G,st;const rt=j.dom,wt=null!==(G=$l(rt,I))&&void 0!==G?G:rt.getRoot();let At=rt.getParent(I,rt.isBlock);if(!At||!Gp(rt,At)){if(At=At||wt,!At.hasChildNodes()){const Et=rt.create(W);return Wl(j,Et),At.appendChild(Et),B.setStart(Et,0),B.setEnd(Et,0),Et}let Bt,xt=I;for(;xt&&xt.parentNode!==At;)xt=xt.parentNode;for(;xt&&!rt.isBlock(xt);)Bt=xt,xt=xt.previousSibling;const pt=null===(st=Bt?.parentElement)||void 0===st?void 0:st.nodeName;if(Bt&&pt&&j.schema.isValidChild(pt,W.toLowerCase())){const Et=Bt.parentNode,F=rt.create(W);for(Wl(j,F),Et.insertBefore(F,Bt),xt=Bt;xt&&!rt.isBlock(xt);){const U=xt.nextSibling;F.appendChild(xt),xt=U}B.setStart(I,z),B.setEnd(I,z)}}return I})(t,u,c,n,r));let A=i.getParent(n,i.isBlock)||i.getRoot();s=ct(A?.parentNode)?i.getParent(A.parentNode,i.isBlock):null,o=A?A.nodeName.toUpperCase():"";const R=s?s.nodeName.toUpperCase():"";if("LI"!==R||E||(A=s,s=s.parentNode,o=R),_t(s)&&(j=t,B=A,!S&&B.nodeName.toLowerCase()===Fn(j)&&j.dom.isEmpty(B)&&((I,z,G)=>{let st=z;for(;st&&st!==I&&Jt(st.nextSibling);){const wt=st.parentElement;if(!wt||(rt=wt,!zt(j.schema.getTextBlockElements(),rt.nodeName.toLowerCase())))return wu(wt);st=wt}var rt;return!1})(j.getBody(),B)))return((j,W,B)=>{var I,z,G;const st=W(Fn(j)),rt=j.dom.getParent(B,wu);rt&&(j.dom.insertAfter(st,rt),vi(j,st),(null!==(G=null===(z=null===(I=B.parentElement)||void 0===I?void 0:I.childNodes)||void 0===z?void 0:z.length)&&void 0!==G?G:0)>1&&j.dom.remove(B))})(t,v,A);var j,B;if(/^(LI|DT|DD)$/.test(o)&&_t(s)&&i.isEmpty(A))return void((j,W,B,I,z)=>{const G=j.dom,st=j.selection.getRng(),rt=B.parentNode;if(B===j.getBody()||!rt)return;var wt;Rw(wt=B)&&Rw(wt.parentNode)&&(z="LI");const At=Xp(I)?Ow(I):void 0;let Bt=Xp(I)&&At?W(z,{style:Ow(I)}):W(z);if(jd(B,I,!0)&&jd(B,I,!1))if(Tw(B,"LI")){const xt=Fd(B);G.insertAfter(Bt,xt),(null===(Et=(pt=B).parentNode)||void 0===Et?void 0:Et.firstChild)===pt?G.remove(xt):G.remove(B)}else G.replace(Bt,B);else if(jd(B,I,!0))Tw(B,"LI")?(G.insertAfter(Bt,Fd(B)),Bt.appendChild(G.doc.createTextNode(" ")),Bt.appendChild(B)):rt.insertBefore(Bt,B),G.remove(I);else if(jd(B,I,!1))G.insertAfter(Bt,Fd(B)),G.remove(I);else{B=Fd(B);const xt=st.cloneRange();xt.setStartAfter(I),xt.setEndAfter(B);const pt=xt.extractContents();if("LI"===z&&((Et,F)=>Et.firstChild&&"LI"===Et.firstChild.nodeName)(pt)){const Et=Xt(re(Bt.children,D),bo(Zs("br")));Bt=pt.firstChild,G.insertAfter(pt,B),Z(Et,F=>ke(D(Bt),F)),At&&Bt.setAttribute("style",At)}else G.insertAfter(pt,B),G.insertAfter(Bt,B);G.remove(I)}var pt,Et;vi(j,Bt)})(t,v,s,A,u);if(!(g||A!==t.getBody()&&Gp(i,A)))return;const L=A.parentNode;let P;if(g)P=v(u),p.fold(()=>{Kt(f,D(P))},j=>{jt(j,D(P))}),t.selection.setCursorLocation(P,0);else if(Ya(A))P=Yu(A),i.isEmpty(A)&&Kp(A),Wl(t,P),vi(t,P);else if(h(!1))P=C();else if(h(!0)&&L){const j=Y.fromRangeStart(c),W=Jf(j),B=D(A),I=td(B,j,t.schema)?Tv(B,j,t.schema).bind(G=>k.from(G.getNode())):k.none();P=L.insertBefore(v(),A);const z=Yp(A,"HR")||W?P:I.getOr(A);vi(t,z)}else{const j=(B=>{const I=B.cloneRange();return I.setStart(B.startContainer,Qp(!0,B.startContainer,B.startOffset)),I.setEnd(B.endContainer,Qp(!1,B.endContainer,B.endOffset)),I})(c).cloneRange();j.setEndAfter(A);const W=j.extractContents();(B=>{Z(Og(D(B),qn),I=>{const z=I.dom;z.nodeValue=br(z.data)})})(W),(B=>{let I=B;do{ot(I)&&(I.data=I.data.replace(/^[\r\n]+/,"")),I=I.firstChild}while(I)})(W),P=W.firstChild,i.insertAfter(W,A),((B,I,z)=>{var G;const st=[];if(!z)return;let rt=z;for(;rt=rt.firstChild;){if(B.isBlock(rt))return;_t(rt)&&!I[rt.nodeName.toLowerCase()]&&st.push(rt)}let wt=st.length;for(;wt--;)rt=st[wt],(!rt.hasChildNodes()||rt.firstChild===rt.lastChild&&""===(null===(G=rt.firstChild)||void 0===G?void 0:G.nodeValue)||tO(B,rt))&&B.remove(rt)})(i,l,P),((B,I)=>{I.normalize();const z=I.lastChild;(!z||_t(z)&&/^(left|right)$/gi.test(B.getStyle(z,"float",!0)))&&B.add(I,"br")})(i,A),i.isEmpty(A)&&Kp(A),P.normalize(),i.isEmpty(P)?(i.remove(P),C()):(Wl(t,P),vi(t,P))}i.setAttrib(P,"id",""),t.dispatch("NewBlock",{newBlock:P})},fakeEventName:"insertParagraph"},Dw=(t,e,n)=>{const r=t.dom.createRng();n?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),t.selection.setRng(r),yl(t,r)},eO=(t,e)=>{const n=Pt("br");jt(D(e),n),t.undoManager.add()},nO=(t,e)=>{rO(t.getBody(),e)||Lt(D(e),Pt("br"));const n=Pt("br");Lt(D(e),n),Dw(t,n.dom,!1),t.undoManager.add()},rO=(t,e)=>{return n=Y.after(e),!!He(n.getNode())||rr(t,Y.after(e)).map(r=>He(r.getNode())).getOr(!1);var n},Pw=t=>t&&"A"===t.nodeName&&"href"in t,oO=t=>t.fold(xe,Pw,Pw,xe),sO=(t,e)=>{e.fold(kt,St(eO,t),St(nO,t),kt)},Lw={insert:(t,e)=>{const n=(r=>{const o=St(xa,r),s=Y.fromRangeStart(r.selection.getRng());return Uo(o,r.getBody(),s).filter(oO)})(t);n.isSome()?n.each(St(sO,t)):((r,o)=>{const a=r.dom,i=r.selection.getRng();let l,c=!1;Kc(a,i).each(h=>{i.setStart(h.startContainer,h.startOffset),i.setEnd(h.endContainer,h.endOffset)});let u=i.startOffset,f=i.startContainer;if(_t(f)&&f.hasChildNodes()){const h=u>f.childNodes.length-1;f=f.childNodes[Math.min(u,f.childNodes.length-1)]||f,u=h&&ot(f)?f.data.length:0}let p=a.getParent(f,a.isBlock);const b=p&&p.parentNode?a.getParent(p.parentNode,a.isBlock):null;"LI"!==(b?b.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(p=b),ot(f)&&u>=f.data.length&&(((h,C,S)=>{const E=new gn(C,S);let N;const A=h.getNonEmptyElements();for(;N=E.next();)if(A[N.nodeName.toLowerCase()]||ot(N)&&N.length>0)return!0;return!1})(r.schema,f,p||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),ef(a,i,l),Dw(r,l,c),r.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},Mw=(t,e)=>Vp(t).filter(n=>e.length>0&&cn(D(n),e)).isSome(),vr=Po([{br:[]},{block:[]},{none:[]}]),aO=(t,e)=>{return Mw(n=t,Ik(n));var n},Iw=t=>(e,n)=>Vp(e).filter(o=>Va(D(o))).isSome()===t,Fw=(t,e)=>(n,r)=>Vp(n).fold(mt(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,iO=t=>{const e=$l(t.dom,t.selection.getStart());return Se(e)},Vl=t=>Fw("pre",t),zd=t=>(e,n)=>Pk(e)===t,lO=(t,e)=>{return Mw(n=t,Mk(n));var n},Ud=(t,e)=>e,cO=t=>{const e=Fn(t),n=$l(t.dom,t.selection.getStart());return ct(n)&&t.schema.isValidChild(n.nodeName,e)},dO=t=>{const e=t.selection.getRng(),n=D(e.startContainer),r=$e(n,e.startOffset).map(o=>Gs(o)&&!io(o));return e.collapsed&&r.getOr(!0)},jr=(t,e)=>(n,r)=>xn(t,(o,s)=>o&&s(n,r),!0)?k.some(e):k.none(),Hd=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),ct(n)&&Id(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),ct(n)&&ql(e,t.fakeEventName))},jw=(t,e)=>{const n=()=>Hd(Lw,t,e),r=()=>Hd(Bw,t,e),o=(s=t,a=e,M1([jr([aO],vr.none()),jr([Vl(!0),iO],vr.none()),jr([Fw("summary",!0)],vr.br()),jr([Vl(!0),zd(!1),Ud],vr.br()),jr([Vl(!0),zd(!1)],vr.block()),jr([Vl(!0),zd(!0),Ud],vr.block()),jr([Vl(!0),zd(!0)],vr.br()),jr([Iw(!0),Ud],vr.br()),jr([Iw(!0)],vr.block()),jr([lO],vr.br()),jr([Ud],vr.br()),jr([cO],vr.block()),jr([dO],vr.block())],[s,!(!a||!a.shiftKey)]).getOr(vr.none()));var s,a;switch(Lk(t)){case"linebreak":o.fold(n,n,kt);break;case"block":o.fold(r,r,kt);break;case"invert":o.fold(r,n,kt);break;default:o.fold(n,r,kt)}},zw=Dn(),uO=zw.os.isiOS()&&zw.browser.isSafari(),Uw=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{jw(t,e)}))},fO=Dn(),Hw=t=>t.stopImmediatePropagation(),qw=t=>t.keyCode===vt.PAGE_UP||t.keyCode===vt.PAGE_DOWN,$w=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",Hw,!0):!n&&t.get()&&e.off("NodeChange",Hw),t.set(n)},Ww=(t,e)=>{const n=e.container(),r=e.offset();return ot(n)?(n.insertData(r,t),k.some(Y(n,r+t.length))):Lc(e).map(o=>{const s=le(t);return e.isAtEnd()?Lt(o,s):jt(o,s),Y(s.dom,t.length)})},Vw=St(Ww,hn),Kw=St(Ww," "),Xw=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},mO=t=>{const e=Y.fromRangeStart(t.selection.getRng()),n=D(t.getBody());if(t.selection.isCollapsed()){const r=St(xa,t),o=Y.fromRangeStart(t.selection.getRng());return Uo(r,t.getBody(),o).bind((s=>a=>a.fold(i=>cr(s.dom,Y.before(i)),i=>jn(i),i=>Kr(i),i=>rr(s.dom,Y.after(i))))(n)).map(s=>()=>((a,i,l)=>c=>Lv(a,c,l)?Vw(i):Kw(i))(n,e,t.schema)(s).each(Xw(t)))}return k.none()},pO=t=>{return vs(pe.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const r=D(t.getBody());var o,s,a;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(o=r,s=Y.fromRangeStart(t.selection.getRng()),a=t.schema,Lv(o,s,a)?Vw(s):Kw(s)).each(Xw(t))});var e,n},gO=t=>$_(t)?[{keyCode:vt.TAB,action:qt(Qx,t,!0)},{keyCode:vt.TAB,shiftKey:!0,action:qt(Qx,t,!1)}]:[],hO=t=>{if(t.addShortcut("Meta+P","","mcePrint"),GR(t),zo(t))return bn(null);{const e=(t=>{const e=bn(null),n=St(xa,t);return t.on("NodeChange",r=>{il(t)&&(((o,s,a)=>{const i=re(Mn(D(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),u=>u.dom),l=Xt(i,o),c=Xt(a,o);Z(ne(l,c),St(ox,!1)),Z(ne(c,l),St(ox,!0))})(n,t.dom,r.parents),((o,s)=>{const a=s.get();if(o.selection.isCollapsed()&&!o.composing&&a){const i=Y.fromRangeStart(o.selection.getRng());Y.isTextPosition(i)&&!Ku(l=i)&&!Xu(l)&&(Nd(o,((t,e)=>{return Y.isTextPosition(e)?(r=e,_0(n=t)&&r.container()===n?((o,s)=>{const a=A0(o.data.substr(0,s.offset())),i=A0(o.data.substr(s.offset()));return(a.text+i.text).length>0?(T0(o),Y(o,s.offset()-a.count)):s})(n,r):R0(n,r)):((n,r)=>r.container()===n.parentNode?((o,s)=>{const a=s.container(),i=((l,c)=>{const u=de(l,c);return-1===u?k.none():k.some(u)})(wn(a.childNodes),o).map(l=>l<s.offset()?Y(a,s.offset()-1):s).getOr(s);return pa(o),i})(n,r):R0(n,r))(t,e);var n,r})(a,i)),s.set(null))}var l})(t,e),((o,s,a,i)=>{if(s.selection.isCollapsed()){const l=Xt(i,o);Z(l,c=>{const u=Y.fromRangeStart(s.selection.getRng());Uo(o,s.getBody(),u).bind(f=>sx(s,a,f))})}})(n,t,e,r.parents))}),e})(t);return(n=t).on("beforeinput",r=>{n.selection.isEditable()&&!Ae(r.getTargetRanges(),o=>!tv(n.dom,o))||r.preventDefault()}),(n=>{n.on("keyup compositionstart",St(uR,n))})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=pe.os.isMacOS()||pe.os.isiOS();Fl([{keyCode:vt.RIGHT,action:qt(Tx,s,!0)},{keyCode:vt.LEFT,action:qt(Tx,s,!1)},{keyCode:vt.UP,action:qt(Rx,s,!1)},{keyCode:vt.DOWN,action:qt(Rx,s,!0)},...l?[{keyCode:vt.UP,action:qt(Td,s,!1),metaKey:!0,shiftKey:!0},{keyCode:vt.DOWN,action:qt(Td,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:vt.RIGHT,action:qt(Xx,s,!0)},{keyCode:vt.LEFT,action:qt(Xx,s,!1)},{keyCode:vt.UP,action:qt(Rp,s,!1)},{keyCode:vt.DOWN,action:qt(Rp,s,!0)},{keyCode:vt.UP,action:qt(Rp,s,!1)},{keyCode:vt.UP,action:qt(Dx,s,!1)},{keyCode:vt.DOWN,action:qt(Dx,s,!0)},{keyCode:vt.RIGHT,action:qt(Ix,s,!0)},{keyCode:vt.LEFT,action:qt(Ix,s,!1)},{keyCode:vt.UP,action:qt(Fx,s,!1)},{keyCode:vt.DOWN,action:qt(Fx,s,!0)},{keyCode:vt.RIGHT,action:qt(ax,s,a,!0)},{keyCode:vt.LEFT,action:qt(ax,s,a,!1)},{keyCode:vt.RIGHT,ctrlKey:!l,altKey:l,action:qt(nR,s,a)},{keyCode:vt.LEFT,ctrlKey:!l,altKey:l,action:qt(rR,s,a)},{keyCode:vt.UP,action:qt(Bx,s,!1)},{keyCode:vt.DOWN,action:qt(Bx,s,!0)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{let o=!1;n.on("keydown",s=>{o=s.keyCode===vt.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===vt.BACKSPACE?"deleteContentBackward":"deleteContentForward",u=a.selection.isCollapsed(),f=u?"character":"selection",p=b=>u?b?"word":"line":"selection";Mx([{keyCode:vt.BACKSPACE,action:qt(xx,a)},{keyCode:vt.BACKSPACE,action:qt(fp,a,!1)},{keyCode:vt.DELETE,action:qt(fp,a,!0)},{keyCode:vt.BACKSPACE,action:qt(cp,a,!1)},{keyCode:vt.DELETE,action:qt(cp,a,!0)},{keyCode:vt.BACKSPACE,action:qt(wp,a,i,!1)},{keyCode:vt.DELETE,action:qt(wp,a,i,!0)},{keyCode:vt.BACKSPACE,action:qt(gm,a,!1)},{keyCode:vt.DELETE,action:qt(gm,a,!0)},{keyCode:vt.BACKSPACE,action:qt(ka,a,!1,f)},{keyCode:vt.DELETE,action:qt(ka,a,!0,f)},...Nw?[{keyCode:vt.BACKSPACE,altKey:!0,action:qt(ka,a,!1,p(!0))},{keyCode:vt.DELETE,altKey:!0,action:qt(ka,a,!0,p(!0))},{keyCode:vt.BACKSPACE,metaKey:!0,action:qt(ka,a,!1,p(!1))}]:[{keyCode:vt.BACKSPACE,ctrlKey:!0,action:qt(ka,a,!1,p(!0))},{keyCode:vt.DELETE,ctrlKey:!0,action:qt(ka,a,!0,p(!0))}],{keyCode:vt.BACKSPACE,action:qt(pp,a,!1)},{keyCode:vt.DELETE,action:qt(pp,a,!0)},{keyCode:vt.BACKSPACE,action:qt(kp,a,!1)},{keyCode:vt.DELETE,action:qt(kp,a,!0)},{keyCode:vt.BACKSPACE,action:qt(ip,a,!1)},{keyCode:vt.DELETE,action:qt(ip,a,!0)},{keyCode:vt.BACKSPACE,action:qt(ap,a,!1)},{keyCode:vt.DELETE,action:qt(ap,a,!0)},{keyCode:vt.BACKSPACE,action:qt(Sp,a,!1)},{keyCode:vt.DELETE,action:qt(Sp,a,!0)},{keyCode:vt.BACKSPACE,action:qt(mp,a,!1)},{keyCode:vt.DELETE,action:qt(mp,a,!0)}],l).filter(b=>a.selection.isEditable()).each(b=>{l.preventDefault(),Id(a,c).isDefaultPrevented()||(b(),ql(a,c))})})(n,r,s)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(i=s,l=o,Fl([{keyCode:vt.BACKSPACE,action:qt(_1,a=n)},{keyCode:vt.DELETE,action:qt(_1,a)},...Nw?[{keyCode:vt.BACKSPACE,altKey:!0,action:qt(Il,a)},{keyCode:vt.DELETE,altKey:!0,action:qt(Il,a)},...l?[{keyCode:JR?224:91,action:qt(Il,a)}]:[]]:[{keyCode:vt.BACKSPACE,ctrlKey:!0,action:qt(Il,a)},{keyCode:vt.DELETE,ctrlKey:!0,action:qt(Il,a)}]],i)),o=!1})})(t,e),(n=>{let r=k.none();n.on("keydown",o=>{var s;o.keyCode===vt.ENTER&&(uO&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(ot(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(r=k.some((s=n).selection.getBookmark()),s.undoManager.add()):Uw(n,o))}),n.on("keyup",o=>{o.keyCode===vt.ENTER&&r.each(()=>{return a=o,(s=n).undoManager.undo(),r.fold(kt,i=>s.selection.moveToBookmark(i)),Uw(s,a),void(r=k.none());var s,a})})})(t),(n=>{n.on("keydown",r=>{var o,s;r.isDefaultPrevented()||(s=r,Mx([{keyCode:vt.SPACEBAR,action:qt(mO,o=n)},{keyCode:vt.SPACEBAR,action:qt(pO,o)}],s).each(a=>{s.preventDefault(),Id(o,"insertText",{data:" "}).isDefaultPrevented()||(a(),ql(o,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",r=>{r.isComposing||(o=>{const s=D(o.getBody());o.selection.isCollapsed()&&((t,e,n)=>{const r=e.container();if(!ot(r))return k.none();if((o=>{const s=o.container();return ot(s)&&mn(s.data,hn)})(e)){const o=Fv(t,r,!1,n)||(s=>{const a=s.data,i=(l=>{const c=l.split("");return re(c,(u,f)=>jc(u)&&f>0&&f<c.length-1&&Cf(c[f-1])&&Cf(c[f+1])?" ":u).join("")})(a);return i!==a&&(s.data=i,!0)})(r)||jv(t,r,!1,n);return vs(o,e)}if(om(t,e,n)){const o=Fv(t,r,!0,n)||jv(t,r,!0,n);return vs(o,e)}return k.none()})(s,Y.fromRangeStart(o.selection.getRng()),o.schema).each(a=>{o.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",r=>{var s;r.isDefaultPrevented()||(s=r,Fl([...gO(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=pe.os.isMacOS()||pe.os.isiOS();Fl([{keyCode:vt.END,action:qt(Ox,s,!0)},{keyCode:vt.HOME,action:qt(Ox,s,!1)},...l?[]:[{keyCode:vt.HOME,action:qt(Td,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:vt.END,action:qt(Td,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:vt.END,action:qt(jx,s,!0)},{keyCode:vt.HOME,action:qt(jx,s,!1)},{keyCode:vt.END,action:qt(Ad,s,!0,a)},{keyCode:vt.HOME,action:qt(Ad,s,!1,a)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{if(fO.os.isMacOS())return;const o=bn(!1);n.on("keydown",s=>{qw(s)&&$w(o,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,Fl([{keyCode:vt.PAGE_UP,action:qt(Ad,a=n,!1,i=r)},{keyCode:vt.PAGE_DOWN,action:qt(Ad,a,!0,i)}],l)),qw(s)&&o.get()&&($w(o,n,!1),n.nodeChanged())})})(t,e),e}var n};class bO{constructor(e){let n;this.lastPath=[],this.editor=e;const r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",o=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==o.type&&jf(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{Gc(e),e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const o=e.selection.getStart(!0);o&&zc(e)&&!r.isSameElementPath(o)&&e.dom.isChildOf(o,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",o=>{!o.isDefaultPrevented()&&zc(e)&&("IMG"===e.selection.getNode().nodeName?Pr.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!p_(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const s=[];this.editor.dom.getParent(r,a=>a===o||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:s})}}isSameElementPath(e){let n;const r=this.editor,o=Jr(r.dom.getParents(e,je,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const Yw=tl("image"),Zp=tl("event"),qd=t=>e=>{e[Zp]=t},Gw=qd(0),vO=qd(2),yO=qd(1),Jp=tl("mode"),$d=t=>e=>{e[Jp]=t},Qw=(t,e)=>$d(e)(t),Zw=$d(0),tg=$d(2),xO=$d(1),Jw=t=>e=>k.from(e[Jp]).exists(r=>r===t),yi=Jw(0),tS=Jw(1),wO=["none","copy","link","move"],SO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],eg=()=>{const t=new window.DataTransfer;let e="move",n="all";const r={get dropEffect(){return e},set dropEffect(o){Rt(wO,o)&&(e=o)},get effectAllowed(){return n},set effectAllowed(o){(t=>k.from(t[Zp]).exists(n=>0===n))(r)&&Rt(SO,o)&&(n=o)},get items(){return o=r,s=t.items,{...s,get length(){return s.length},add:(a,i)=>{if(yi(o)){if(!Tt(a))return s.add(a);if(!Ie(i))return s.add(a,i)}return null},remove:a=>{yi(o)&&s.remove(a)},clear:()=>{yi(o)&&s.clear()}};var o,s},get files(){return tS(r)?Object.freeze({length:0,item:o=>null}):t.files},get types(){return t.types},setDragImage:(o,s,a)=>{yi(r)&&(r[Yw]={image:o,x:s,y:a},t.setDragImage(o,s,a))},getData:o=>tS(r)?"":t.getData(o),setData:(o,s)=>{yi(r)&&t.setData(o,s)},clearData:o=>{yi(r)&&t.clearData(o)}};return Zw(r),r},eS=(t,e)=>t.setData("text/html",e),nS="x-tinymce/html",Wd=mt(nS),ng="\x3c!-- "+nS+" --\x3e",EO=t=>ng+t,rS=t=>-1!==t.indexOf(ng),oS="%MCEPASTEBIN%",rg=t=>t.dom.get("mcepastebin"),kO=t=>ct(t)&&"mcepastebin"===t.id,sS=t=>t===oS,aS=(t,e)=>(lt.each(e,n=>{t=wr(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),iS=t=>aS(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,r)=>n||r?hn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),lS=(t,e)=>({content:t,cancelled:e}),og=(t,e)=>(t.insertContent(e,{merge:B_(t),paste:!0}),!0),sg=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),_O=(t,e,n)=>{return!(t.selection.isCollapsed()||!sg(e)||(r=t,o=e,s=n,r.undoManager.extra(()=>{s(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,s},NO=(t,e,n)=>{return r=t,!(!sg(o=e)||!Ae(E0(r),s=>Ws(o.toLowerCase(),`.${s.toLowerCase()}`)))&&((r,o,s)=>(r.undoManager.extra(()=>{s(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(t,e,n);var r,o},AO=(t=>{let e=0;return()=>"mceclip"+e++})(),TO=t=>{const e=eg();return eS(e,t),tg(e),e},cS=(t,e,n,r,o)=>{const s=((c,u,f)=>{const p=c.dispatch("PastePreProcess",{content:u,internal:f}),b=((g,v)=>{const h=ui({sanitize:S0(g),sandbox_iframes:k0(g),sandbox_iframes_exclusions:uf(g),convert_unsafe_embeds:K_(g)},g.schema);h.addNodeFilter("meta",S=>{lt.each(S,E=>{E.remove()})});const C=h.parse(v,{forced_root_block:!1,isRootContent:!0});return Os({validate:!0},g.schema).serialize(C)})(c,p.content);return c.hasEventListeners("PastePostProcess")&&!p.isDefaultPrevented()?((g,v,h)=>{const C=g.dom.create("div",{style:"display:none"},v),S=g.dispatch("PastePostProcess",{node:C,internal:h});return lS(S.node.innerHTML,S.isDefaultPrevented())})(c,b,f):lS(b,p.isDefaultPrevented())})(t,e,n);if(!s.cancelled){const a=s.content,i=()=>{return l=t,c=a,void(r||!D_(l)?og(l,c):(f=l,p=c,lt.each([_O,NO,og],b=>!b(f,p,og))));var l,c,f,p};o?Id(t,"insertFromPaste",{dataTransfer:TO(a)}).isDefaultPrevented()||(i(),ql(t,"insertFromPaste")):i()}},Vd=(t,e,n,r)=>{const o=n||rS(e);cS(t,e.replace(ng,""),o,!1,r)},ag=(t,e,n)=>{const r=t.dom.encode(e).replace(/\r\n/g,"\n"),o=((s,a,i)=>{const l=s.split(/\n\n/),c=((p,b)=>{let g="<"+p;const v=ko(b,(h,C)=>C+'="'+aa.encodeAllRaw(h)+'"');return v.length&&(g+=" "+v.join(" ")),g+">"})(a,i),u="</"+a+">",f=re(l,p=>p.split(/\n/).join("<br />"));return 1===f.length?f[0]:re(f,p=>c+p+u).join("")})(Lg(r,L_(t)),Fn(t),al(t));cS(t,o,!1,!0,n)},dS=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const r=t.types[n];try{e[r]=t.getData(r)}catch{e[r]=""}}return e},Ms=(t,e)=>e in t&&t[e].length>0,uS=t=>Ms(t,"text/html")||Ms(t,"text/plain"),fS=(t,e,n)=>{const r="paste"===e.type?e.clipboardData:e.dataTransfer;var o;if(Dc(t)&&r){const s=((a,i)=>{const l=i.items?Qe(wn(i.items),u=>"file"===u.kind?[u.getAsFile()]:[]):[],c=i.files?wn(i.files):[];return Xt(l.length>0?l:c,(u=>{const f=E0(u);return p=>Ve(p.type,"image/")&&Ae(f,b=>(g=>{const v=g.toLowerCase(),h={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return lt.hasOwn(h,v)?"image/"+h[v]:"image/"+v})(b)===p.type)})(a))})(t,r);if(s.length>0)return e.preventDefault(),(o=s,Promise.all(re(o,a=>rC(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),Z(a,i=>{var l,c;l=t,Im((c=i).uri).each(({data:u,type:f,base64Encoded:p})=>{const b=p?u:btoa(u),g=c.file,v=l.editorUpload.blobCache,C=v.getByData(b,f)??((S,E,N,A)=>{const R=AO(),L=u0(S)&&ct(N.name),P=L?((B,I)=>{const z=I.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ct(z)?B.dom.encode(z[1]):void 0})(S,N.name):R,W=E.create(R,N,A,P,L?N.name:void 0);return E.add(W),W})(l,v,g,b);Vd(l,`<img src="${C.blobUri()}">`,!1,!0)})})}),!0}return!1},ig=(t,e,n,r,o)=>{let s=iS(n);const a=Ms(e,Wd())||rS(n),i=!a&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=sg(s);(sS(s)||!s.length||i&&!l)&&(r=!0),(r||l)&&(s=Ms(e,"text/plain")&&i?e["text/plain"]:(c=>{const u=Es(),f=ui({},u);let p="";const b=u.getVoidElements(),g=lt.makeMap("script noscript style textarea video audio iframe object"," "),v=u.getBlockElements(),h=C=>{const S=C.name,E=C;if("br"!==S){if("wbr"!==S)if(b[S]&&(p+=" "),g[S])p+=" ";else{if(3===C.type&&(p+=C.value),!(C.name in u.getVoidElements())){let N=C.firstChild;if(N)do{h(N)}while(N=N.next)}v[S]&&E.next&&(p+="\n","p"===S&&(p+="\n"))}}else p+="\n"};return c=aS(c,[/<!\[[^\]]+\]>/g]),h(f.parse(c)),p})(s)),sS(s)||(r?ag(t,s,o):Vd(t,s,a,o))},mS=(t,e,n,r)=>{((o,s,a)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",s),o.setData("text/plain",a),o.setData(Wd(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),r()):n(e.html,r)},pS=t=>(e,n)=>{const{dom:r,selection:o}=t,s=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},e);r.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),r.add(t.getBody(),s);const i=o.getRng();a.focus();const l=r.createRng();l.selectNodeContents(a),o.setRng(l),Pr.setEditorTimeout(t,()=>{o.setRng(i),r.remove(s),n()},0)},gS=t=>({html:EO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),hS=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},bS=(t,e)=>{var n,r;return ya.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(r=e.clientY)&&void 0!==r?r:0,t.getDoc())},vS=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},OO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,yS=t=>lt.trim(t).replace(OO,Vi).toLowerCase(),BO=(t,e,n)=>{const r=R_(t);if(n||"all"===r||!O_(t))return e;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,u)=>{const f=s.parseStyle(s.decode(c)),p={};for(let g=0;g<o.length;g++){const v=f[o[g]];let h=v,C=s.getStyle(a,o[g],!0);/color/.test(o[g])&&(h=yS(h),C=yS(C)),C!==h&&(p[o[g]]=v)}const b=s.serializeStyle(p,"span");return b?l+' style="'+b+'"'+u:l+u})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},PO=He,CS=ot,LO=t=>Me(t.dom),xS=t=>e=>Ft(D(t),e),wS=(t,e)=>Nr(D(t),LO,xS(e)),SS=(t,e,n)=>{const r=new gn(t,e),o=n?r.next.bind(r):r.prev.bind(r);let s=t;for(let a=n?t:o();a&&!PO(a);a=o())fo(a)&&(s=a);return s};var Ci;!function(t){t.Before="before",t.After="after"}(Ci||(Ci={}));const IO=(t,e)=>Math.abs(t.left-e),FO=(t,e)=>Math.abs(t.right-e),zO=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),lg=(t,e,n,r)=>{const o=u=>fo(u.node)?k.some(u):_t(u.node)?lg(wn(u.node.childNodes),e,n,!1):k.none(),s=(u,f)=>{const p=Vo(u,(b,g)=>f(b,e,n)-f(g,e,n));return Zn(p,o).map(b=>{return r&&!ot(b.node)&&p.length>1?(g=b,v=p[1],h=f,o(v).filter(C=>Math.abs(h(g,e,n)-h(C,e,n))<2&&ot(C.node))).getOr(b):b;var g,v,h})},[a,i]=((t,e)=>{return(n=Xt(t,n=>{return(r=e)>=(o=n).top&&r<=o.bottom;var r,o}),xn(n,(r,o)=>r.fold(()=>k.some(o),s=>{const a=Math.min(o.left,s.left),i=Math.min(o.top,s.top),l=Math.max(o.right,s.right),c=Math.max(o.bottom,s.bottom);return k.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}),k.none())).fold(()=>[[],t],n=>{const{pass:r,fail:o}=zr(t,s=>((a,i)=>{const l=(c=a,u=i,Math.max(0,Math.min(c.bottom,u.bottom)-Math.max(c.top,u.top))/Math.min(a.height,i.height));var c,u;return((c,u)=>c.top<u.bottom&&c.bottom>u.top)(a,i)&&l>.5})(s,n));return[r,o]});var n})(Q1(t),n),{pass:l,fail:c}=zr(i,u=>u.top<n);return s(a,zO).orThunk(()=>s(c,Oh)).orThunk(()=>s(l,Oh))},ES=(t,e,n)=>((r,o,s)=>{const a=D(r),l=((t,e,n)=>k.from(t.dom.elementFromPoint(e,n)).map(J))(Le(a),o,s).filter(c=>Je(a,c)).getOr(a);return((c,u,f,p)=>{const b=(g,v)=>{const h=Xt(g.dom.childNodes,bo(C=>_t(C)&&C.classList.contains("mce-drag-container")));return v.fold(()=>lg(h,f,p,!0),C=>{const S=Xt(h,E=>E!==C.dom);return lg(S,f,p,!0)}).orThunk(()=>(Ft(g,c)?k.none():lr(g)).bind(C=>b(C,k.some(g))))};return b(u,k.none())})(a,l,o,s)})(t,e,n).filter(r=>cl(r.node)).map(r=>{return{node:(o=r).node,position:IO(o,s=e)<FO(o,s)?Ci.Before:Ci.After};var o,s}),kS=t=>{var e,n;const r=t.getBoundingClientRect(),o=t.ownerDocument,s=o.documentElement,a=o.defaultView;return{top:r.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:r.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},_S=t=>({target:t,srcElement:t}),NS=Me,HO=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(NS,Vr),qO=(t,e,n,r)=>{const o=t.dom,s=e.cloneNode(!0);o.setStyles(s,{width:n,height:r}),o.setAttrib(s,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},Kd=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},AS=Kd("left",-32),TS=Kd("left",32),RS=Kd("top",-32),OS=Kd("top",32),BS=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Kl=(t,e,n,r,o)=>{"dragstart"===e&&eS(r,t.dom.getOuterHTML(n));const s=((t,e,n,r)=>{const o=((s,a)=>{const i=(l=>{const c=eg(),u=k.from(l[Jp]);return tg(l),Gw(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(f=l,k.from(f[Yw])).each(f=>c.setDragImage(f.image,f.x,f.y)),Z(l.types,f=>{"Files"!==f&&c.setData(f,l.getData(f))}),Z(l.files,f=>c.items.add(f)),(f=>k.from(f[Zp]))(l).each(f=>{var p;p=c,qd(f)(p)}),u.each(f=>{Qw(l,f),Qw(c,f)}),c;var f})(s);return"dragstart"===a?(Gw(i),Zw(i)):"drop"===a?(vO(i),tg(i)):(yO(i),xO(i)),i})(n,t);return Ie(r)?((s,a,i)=>{const l=fr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:kt,stopImmediatePropagation:kt,stopPropagation:kt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,..._S(a)}})(t,e,o):(s=t,a=r,i=e,l=o,{...a,dataTransfer:l,type:s,..._S(i)});var s,a,i,l})(e,n,r,o);return t.dispatch(e,s)},DS=(t,e,n)=>{t.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>Kl(e,"dragend",r.element,r.dataTransfer),o=>Kl(e,"dragend",r.element,r.dataTransfer,o))}),PS(t)},PS=t=>{t.on(e=>{e.intervalId.clear(),BS(e.ghost)}),t.clear()},Xl=Me,LS=(t,e)=>wa(t.getBody(),e),VO=t=>{const e=t.selection,n=t.dom,r=t.getBody(),o=((t,e,n,r)=>{const o=rs();let s,a;const i=Fn(t),l=t.dom,c=()=>{(u=>{var f,p;const b=Mn(D(u),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<b.length;g++){const v=b[g].dom;let h=v.previousSibling;if(_c(h)){const C=h.data;1===C.length?null===(f=h.parentNode)||void 0===f||f.removeChild(h):h.deleteData(C.length-1,1)}h=v.nextSibling,kc(h)&&(1===h.data.length?null===(p=h.parentNode)||void 0===p||p.removeChild(h):h.deleteData(0,1))}})(e),a&&(pa(a),a=null),o.on(u=>{l.remove(u.caret),o.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(u,f)=>{let p;if(c(),tN(f))return null;if(!n(f))return a=((b,g)=>{var v;const h=(null!==(v=b.ownerDocument)&&void 0!==v?v:document).createTextNode(vn),C=b.parentNode;if(g){const S=b.previousSibling;if(Xa(S)){if(Tr(S))return S;if(_c(S))return S.splitText(S.data.length-1)}C?.insertBefore(h,b)}else{const S=b.nextSibling;if(Xa(S)){if(Tr(S))return S;if(kc(S))return S.splitText(1),S}b.nextSibling?C?.insertBefore(h,b.nextSibling):C?.appendChild(h)}return h})(f,u),p=f.ownerDocument.createRange(),ll(a.nextSibling)?(p.setStart(a,0),p.setEnd(a,0)):(p.setStart(a,1),p.setEnd(a,1)),p;{const b=((h,C,S)=>{var E;const N=(null!==(E=C.ownerDocument)&&void 0!==E?E:document).createElement(h);N.setAttribute("data-mce-caret",S?"before":"after"),N.setAttribute("data-mce-bogus","all"),N.appendChild(Ka().dom);const A=C.parentNode;return S?A?.insertBefore(N,C):C.nextSibling?A?.insertBefore(N,C.nextSibling):A?.appendChild(N),N})(i,f,u),g=O0(e,f,u);l.setStyle(b,"top",g.top),l.setStyle(b,"caret-color","transparent"),a=b;const v=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(v,{...g}),l.add(e,v),o.set({caret:v,element:f,before:u}),u&&l.addClass(v,"mce-visual-caret-before"),s=setInterval(()=>{o.on(h=>{r()?l.toggleClass(h.caret,"mce-visual-caret-hidden"):l.addClass(h.caret,"mce-visual-caret-hidden")})},500),p=f.ownerDocument.createRange(),p.setStart(b,0),p.setEnd(b,0)}return p},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(u=>{const f=O0(e,u.element,u.before);l.setStyles(u.caret,{...f})})},destroy:()=>clearInterval(s)}})(t,r,n.isBlock,()=>li(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=h=>h!==r&&(Xl(h)||Do(h))&&n.isChildOf(h,r)&&n.isEditable(h.parentNode),c=(h,C,S,E=!0)=>t.dispatch("ShowCaret",{target:C,direction:h,before:S}).isDefaultPrevented()?null:(E&&e.scrollIntoView(C,-1===h),o.show(S,C)),u=h=>Tr(h)||kc(h)||_c(h),f=h=>u(h.startContainer)||u(h.endContainer),b=(h,C)=>{if(!h)return null;if(h.collapsed){if(!f(h)){const A=C?1:-1,R=ml(A,r,h),L=R.getNode(!C);if(ct(L)){if(cl(L))return c(A,L,!!C&&!R.isAtEnd(),!1);if(_s(L)&&Me(L.nextSibling)){const j=n.createRng();return j.setStart(L,0),j.setEnd(L,0),j}}const P=R.getNode(C);if(ct(P)){if(cl(P))return c(A,P,!C&&!R.isAtEnd(),!1);if(_s(P)&&Me(P.previousSibling)){const j=n.createRng();return j.setStart(P,1),j.setEnd(P,1),j}}}return null}let S=h.startContainer,E=h.startOffset;const N=h.endOffset;if(ot(S)&&0===E&&Xl(S.parentNode)&&(S=S.parentNode,E=n.nodeIndex(S),S=S.parentNode),!_t(S))return null;if(N===E+1&&S===h.endContainer){const A=S.childNodes[E];if(l(A))return(R=>{const L=R.cloneNode(!0),P=t.dispatch("ObjectSelected",{target:R,targetClone:L});if(P.isDefaultPrevented())return null;const j=((B,I)=>{const z=D(t.getBody()),G=t.getDoc(),st=ws(z,"#"+s).getOrThunk(()=>{const At=ut('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',G);return Ze(At,"id",s),Kt(z,At),At}),rt=n.createRng();ae(st),be(st,[le(hn,G),D(I),le(hn,G)]),rt.setStart(st.dom.firstChild,1),rt.setEnd(st.dom.lastChild,0),$(st,{top:n.getPos(B,t.getBody()).y+"px"}),Vb(st);const wt=e.getSel();return wt&&(wt.removeAllRanges(),wt.addRange(rt)),rt})(R,P.targetClone),W=D(R);return Z(Mn(D(t.getBody()),`*[${a}]`),B=>{Ft(W,B)||m(B,a)}),n.getAttrib(R,a)||R.setAttribute(a,"1"),i=R,v(),j})(A)}return null},g=()=>{i&&i.removeAttribute(a),ws(D(t.getBody()),"#"+s).each(ue),i=null},v=()=>{o.hide()};return zo(t)||(t.on("click",h=>{n.isEditable(h.target)||(h.preventDefault(),t.focus())}),t.on("blur NewBlock",g),t.on("ResizeWindow FullscreenStateChanged",o.reposition),t.on("tap",h=>{const C=h.target,S=LS(t,C);Xl(S)?(h.preventDefault(),Dl(t,S).each(b)):l(C)&&Dl(t,C).each(b)},!0),t.on("mousedown",h=>{const C=h.target;if(C!==r&&"HTML"!==C.nodeName&&!n.isChildOf(C,r)||!((E,N,A)=>{const R=D(E.getBody()),L=E.inline?R:D(Le(R).dom.documentElement),P=((j,W,B,I)=>{const z=W.dom.getBoundingClientRect();return{x:B-(j?z.left+W.dom.clientLeft+yT(W):0),y:I-(j?z.top+W.dom.clientTop+vT(W):0)}})(E.inline,L,N,A);return((j,W,B)=>{const I=hT(j),z=bT(j);return W>=0&&B>=0&&W<=I&&B<=z})(L,P.x,P.y)})(t,h.clientX,h.clientY))return;g(),v();const S=LS(t,C);Xl(S)?(h.preventDefault(),Dl(t,S).each(b)):ES(r,h.clientX,h.clientY).each(E=>{var N;h.preventDefault(),(N=c(1,E.node,E.position===Ci.Before,!1))&&e.setRng(N),es(S)?S.focus():t.getBody().focus()})}),t.on("keypress",h=>{vt.modifierPressed(h)||Xl(e.getNode())&&h.preventDefault()}),t.on("GetSelectionRange",h=>{let C=h.range;if(i){if(!i.parentNode)return void(i=null);C=C.cloneRange(),C.selectNode(i),h.range=C}}),t.on("SetSelectionRange",h=>{h.range=(h=>{const C=t.schema.getVoidElements(),S=n.createRng(),E=h.startContainer,N=h.startOffset,A=h.endContainer,R=h.endOffset;return zt(C,E.nodeName.toLowerCase())?0===N?S.setStartBefore(E):S.setStartAfter(E):S.setStart(E,N),zt(C,A.nodeName.toLowerCase())?0===R?S.setEndBefore(A):S.setEndAfter(A):S.setEnd(A,R),S})(h.range);const C=b(h.range,h.forward);C&&(h.range=C)}),t.on("AfterSetSelectionRange",h=>{const C=h.range,S=C.startContainer.parentElement;var E,N;f(C)||_t(E=S)&&"mcepastebin"===E.id||v(),ct(N=S)&&n.hasClass(N,"mce-offscreen-selection")||g()}),(t=>{const e=rs(),n=Be.DOM,r=document,o=((l,c)=>u=>{if(0===u.button){const f=Ge(c.dom.getParents(u.target),HO).getOr(null);if(ct(f)&&(p=c.dom,b=c.getBody(),NS(g=f)&&g!==b&&p.isEditable(g.parentElement))){const p=c.dom.getPos(f),b=c.getBody(),g=c.getDoc().documentElement;l.set({element:f,dataTransfer:eg(),dragging:!1,screenX:u.screenX,screenY:u.screenY,maxX:(c.inline?b.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?b.scrollHeight:g.offsetHeight)-2,relX:u.pageX-p.x,relY:u.pageY-p.y,width:f.offsetWidth,height:f.offsetHeight,ghost:qO(c,f,f.offsetWidth,f.offsetHeight),intervalId:KE(100)})}}var p,b,g})(e,t),s=((t,e)=>{const n=xc((o,s)=>{return i=o,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void ES(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),c=>{const u=a._selectionOverrides.showCaret(1,c.node,c.position===Ci.Before,!1);u?a.selection.setRng(u):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const r=t;return o=>t.on(s=>{const a=Math.max(Math.abs(o.screenX-s.screenX),Math.abs(o.screenY-s.screenY));if(!s.dragging&&a>10){const c=Kl(e,"dragstart",s.element,s.dataTransfer,o);if(ct(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const c=o.currentTarget===e.getDoc().documentElement,u=((f,p)=>({pageX:p.pageX-f.relX,pageY:p.pageY+5}))(s,(p=o,b=(h=f=e).inline?kS(h.getBody()):{left:0,top:0},g=(h=>{const C=h.getBody();return h.inline?{left:C.scrollLeft,top:C.scrollTop}:{left:0,top:0}})(f),v=((h,C)=>{if(C.target.ownerDocument!==h.getDoc()){const S=kS(h.getContentAreaContainer()),E=(N=>{const A=N.getBody(),R=N.getDoc().documentElement;return N.inline?{left:A.scrollLeft,top:A.scrollTop}:{left:A.scrollLeft||R.scrollLeft,top:A.scrollTop||R.scrollTop}})(h);return{left:C.pageX-S.left+E.left,top:C.pageY-S.top+E.top}}return{left:C.pageX,top:C.pageY}})(f,p),{pageX:v.left-b.left+g.left,pageY:v.top-b.top+g.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((f,p,b,g,v,h,C,S,E,N,A,R)=>{let L=0,P=0;f.style.left=p.pageX+"px",f.style.top=p.pageY+"px",p.pageX+b>v&&(L=p.pageX+b-v),p.pageY+g>h&&(P=p.pageY+g-h),f.style.width=b-L+"px",f.style.height=g-P+"px";const j=E.clientHeight,W=E.clientWidth,B=C+E.getBoundingClientRect().top,I=S+E.getBoundingClientRect().left;A.on(z=>{z.intervalId.clear(),z.dragging&&R&&(C+8>=j?z.intervalId.set(OS(N)):C-8<=0?z.intervalId.set(RS(N)):S+8>=W?z.intervalId.set(TS(N)):S-8<=0?z.intervalId.set(AS(N)):B+16>=window.innerHeight?z.intervalId.set(OS(window)):B-16<=0?z.intervalId.set(RS(window)):I+16>=window.innerWidth?z.intervalId.set(TS(window)):I-16<=0&&z.intervalId.set(AS(window)))})})(s.ghost,u,s.width,s.height,s.maxX,s.maxY,o.clientY,o.clientX,e.getContentAreaContainer(),e.getWin(),r,c),n.throttle(o.clientX,o.clientY)}var f,p,h,b,g,v,i,l})})(e,t),a=((l,c)=>u=>{l.on(f=>{var p,b,g,v;if(f.intervalId.clear(),f.dragging){if(b=c,g=(b=>{const g=b.getSel();if(ct(g)){const v=g.getRangeAt(0).startContainer;return ot(v)?v.parentNode:v}return null})(c.selection),v=f.element,!Se(g)&&g!==v&&!b.dom.isChildOf(g,v)&&b.dom.isEditable(g)){const b=null!==(p=c.getDoc().elementFromPoint(u.clientX,u.clientY))&&void 0!==p?p:c.getBody();Kl(c,"drop",b,f.dataTransfer,u).isDefaultPrevented()||c.undoManager.transact(()=>{((g,v)=>{const h=g.getParent(v.parentNode,g.isBlock);BS(v),h&&h!==g.getRoot()&&g.isEmpty(h)&&ks(D(h))})(c.dom,f.element),(g=>{const v=g.getData("text/html");return""===v?k.none():k.some(v)})(f.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}Kl(c,"dragend",c.getBody(),f.dataTransfer,u)}}),PS(l)})(e,t),i=((l,c)=>u=>DS(l,c,k.some(u)))(e,t);t.on("mousedown",o),t.on("mousemove",s),t.on("mouseup",a),n.bind(r,"mousemove",s),n.bind(r,"mouseup",i),t.on("remove",()=>{n.unbind(r,"mousemove",s),n.unbind(r,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===vt.ESC&&DS(e,t,k.none())})})(h=t),b_(h)&&(C=>{const S=A=>{if(!A.isDefaultPrevented()){const R=A.dataTransfer;R&&(Rt(R.types,"Files")||R.files.length>0)&&(A.preventDefault(),"drop"===A.type&&yd(C,"Dropped file type is not supported"))}},E=A=>{Qc(C,A.target)&&S(A)},N=()=>{const A=Be.DOM,R=C.dom,L=document,P=C.inline?C.getBody():C.getDoc(),j=["drop","dragover"];Z(j,W=>{A.bind(L,W,E),R.bind(P,W,S)}),C.on("remove",()=>{Z(j,W=>{A.unbind(L,W,E),R.unbind(P,W,S)})})};C.on("init",()=>{Pr.setEditorTimeout(C,N,0)})})(h),(h=>{const C=xc(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const S=h.selection.getRng();if(S.collapsed){const E=lp(h,S,!1);h.selection.setRng(E)}}},0);h.on("focus",()=>{C.throttle()}),h.on("blur",()=>{C.cancel()})})(t),(h=>{h.on("init",()=>{h.on("focusin",C=>{const S=C.target;if(Do(S)){const E=wa(h.getBody(),S),N=Me(E)?E:S;h.selection.getNode()!==N&&Dl(h,N).each(A=>h.selection.setRng(A))}})})})(t)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&(Yu(h),e.scrollIntoView(h))},hideFakeCaret:v,destroy:()=>{o.destroy(),i=null}};var h},KO=(t,e)=>{let n=e;for(let r=t.previousSibling;ot(r);r=r.previousSibling)n+=r.data.length;return n},MS=(t,e,n,r,o)=>{if(ot(n)&&(r<0||r>n.data.length))return[];const s=o&&ot(n)?[KO(n,r)]:[r];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,o)),a=a.parentNode;return a===e?s.reverse():[]},cg=(t,e,n,r,o,s,a=!1)=>({start:MS(t,e,n,r,a),end:MS(t,e,o,s,a)}),IS=(t,e)=>{const n=e.slice(),r=n.pop();return x(r)?xn(n,(o,s)=>o.bind(a=>k.from(a.childNodes[s])),k.some(t)).bind(o=>ot(o)&&(r<0||r>o.data.length)?k.none():k.some({node:o,offset:r})):k.none()},FS=(t,e)=>IS(t,e.start).bind(({node:n,offset:r})=>IS(t,e.end).map(({node:o,offset:s})=>{const a=document.createRange();return a.setStart(n,r),a.setEnd(o,s),a})),xi=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const r=e.parentNode;t.remove(e,ot(e.firstChild)&&Ha(e.firstChild.data)),xi(t,r,n)}},Xd=(t,e,n,r=!0)=>{const o=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),r&&!n(e.startContainer)&&(ot(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),ot(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),xi(t,o,n),o!==s&&xi(t,s,n))},Yd=(t,e)=>k.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),dg=(t,e,n)=>{const r=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:r0(r).concat(t.blockPatterns),inlinePatterns:o0(r).concat(t.inlinePatterns)}},ug=(t,e,n,r)=>{const o=t.createRng();return o.setStart(e,0),o.setEnd(n,r),o.toString()},jS=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),Gd=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},zS=(t,e,n)=>{const r=FS(t.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,s=r.endContainer,a=0===r.endOffset?s:s.splitText(r.endOffset),i=0===r.startOffset?o:o.splitText(r.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(jS(t,e+"-end"),a),start:l.insertBefore(jS(t,e+"-start"),i)}},US=(t,e,n)=>{xi(t,t.get(e.prefix+"-end"),n),xi(t,t.get(e.prefix+"-start"),n)},fg=t=>0===t.start.length,HS=(t,e,n,r)=>{const o=e.start;var s;return Dp(t,r.container,r.offset,(s=o,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),u=l.lastIndexOf(s);return-1!==u?u+s.length:-1!==c?c+1:-1}),n).bind(a=>{var i,l;const c=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(o))&&void 0!==l?l:-1;if(-1!==c&&a.offset>=c+o.length){const u=t.createRng();return u.setStart(a.container,a.offset-o.length),u.setEnd(a.container,a.offset),k.some(u)}return Bp(a.container,a.offset-o.length,n).map(f=>{const p=t.createRng();return p.setStart(f.container,f.offset),p.setEnd(a.container,a.offset),p}).filter(f=>f.toString()===o).orThunk(()=>HS(t,e,n,ho(a.container,0)))})},XO=(t,e,n,r)=>{const o=t.dom,s=o.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Bp(i,l-n.pattern.end.length,e).bind(c=>{const u=cg(o,s,c.container,c.offset,i,l,r);if(fg(a))return k.some({matches:[{pattern:a,startRng:u,endRng:u}],position:c});{const f=Qd(t,n.remainingPatterns,c.container,c.offset,e,r),p=f.getOr({matches:[],position:c}),b=p.position;return((v,h,C,S,E,N=!1)=>{if(0===h.start.length&&!N){const A=v.createRng();return A.setStart(C,S),A.setEnd(C,S),k.some(A)}return Op(C,S,E).bind(A=>HS(v,h,E,A).bind(R=>{var L;return N&&(R.endContainer===A.container&&R.endOffset===A.offset||0===A.offset&&(null===(L=R.endContainer.textContent)||void 0===L?void 0:L.length)===R.endOffset)?k.none():k.some(R)}))})(o,a,b.container,b.offset,e,f.isNone()).map(v=>{const h=((C,S,E,N=!1)=>cg(C,S,E.startContainer,E.startOffset,E.endContainer,E.endOffset,N))(o,s,v,r);return{matches:p.matches.concat([{pattern:a,startRng:h,endRng:u}]),position:ho(v.startContainer,v.startOffset)}})}})},Qd=(t,e,n,r,o,s)=>{const a=t.dom;return Op(n,r,a.getRoot()).bind(i=>{const l=ug(a,o,n,r);for(let c=0;c<e.length;c++){const u=e[c];if(!Ws(l,u.end))continue;const f=e.slice();f.splice(c,1);const p=XO(t,o,{pattern:u,remainingPatterns:f,position:i},s);if(p.isNone()&&r>0)return Qd(t,e,n,r-1,o,s);if(p.isSome())return p}return k.none()})},qS=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?Z(e.format,r=>{t.formatter.apply(r)}):t.execCommand(e.cmd,!1,e.value)},$S=(t,e,n,r,o,s)=>{var a;return((i,l)=>{const c=ar(i,u=>Ae(l,f=>u.pattern.start===f.pattern.start&&u.pattern.end===f.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(Qd(t,o.inlinePatterns,n,r,e,s).fold(()=>[],i=>i.matches),Qd(t,(a=o.inlinePatterns,Vo(a,(i,l)=>l.end.length-i.end.length)),n,r,e,s).fold(()=>[],i=>i.matches))},WS=(t,e)=>{if(0===e.length)return;const n=t.dom,r=t.selection.getBookmark(),o=((s,a)=>{const i=tl("mce_textpattern"),l=Wo(a,(c,u)=>{const f=zS(s,i+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Wo(l,(c,u)=>{const f=l.length-c.length-1,p=fg(u.pattern)?u.endMarker:zS(s,i+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:p}])},[])})(n,e);Z(o,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;fg(s.pattern)?((l,c,u,f)=>{const p=Gd(l.dom,u);Xd(l.dom,p,f),qS(l,c,p)})(t,s.pattern,s.endMarker,i):((l,c,u,f,p)=>{const b=l.dom,g=Gd(b,f),v=Gd(b,u);Xd(b,v,p),Xd(b,g,p);const C=Gd(b,{prefix:u.prefix,start:u.end,end:f.start});qS(l,c,C)})(t,s.pattern,s.startMarker,s.endMarker,i),US(n,s.endMarker,i),US(n,s.startMarker,i)}),t.selection.moveToBookmark(r)},VS=(t,e,n)=>((r,o,s)=>{if(ot(r)&&0>=r.length)return k.some(ho(r,0));{const a=da(Rd);return k.from(a.forwards(r,0,Od(r),s)).map(i=>ho(i.container,0))}})(e,0,e).map(r=>{const o=r.container;return Zx(o,n.start.length,e).each(s=>{const a=t.createRng();a.setStart(o,0),a.setEnd(s.container,s.offset),Xd(t,a,i=>i===e)}),o}),KS=t=>(e,n)=>{const o=n.pattern,s=FS(e.dom.getRoot(),n.range).getOrDie("Unable to resolve path range");return Yd(e,s).each(a=>{"block-format"===o.type?((i,l)=>{const c=l.get(i);return it(c)&&kn(c).exists(u=>zt(u,"block"))})(o.format,e.formatter)&&e.undoManager.transact(()=>{t(e.dom,a,o),e.formatter.apply(o.format)}):"block-command"===o.type&&e.undoManager.transact(()=>{t(e.dom,a,o),e.execCommand(o.cmd,!1,o.value)})}),!0},XS=t=>(e,n)=>{const r=Vo(e,(a,i)=>i.start.length-a.start.length),o=n.replace(hn," ");return Ge(r,s=>t(s,n,o))},YS=(t,e)=>(n,r,o,s,a)=>{var i;void 0===a&&(a=null!==(i=r.textContent)&&void 0!==i?i:"");const l=n.dom,c=Fn(n);return l.is(r,c)?t(o.blockPatterns,a).map(u=>e&&lt.trim(a).length===u.start.length?[]:[{pattern:u,range:cg(l,l.getRoot(),r,0,r,0,s)}]).getOr([]):[]},YO=KS((t,e,n)=>{VS(t,e,n).each(r=>{const o=D(r),s=wc(o);var a,i;/^\s[^\s]/.test(s)&&(a=o,i=s.slice(1),Wu.set(a,i))})}),GO=XS((t,e,n)=>0===e.indexOf(t.start)||0===n.indexOf(t.start)),QO=YS(GO,!0),ZO=KS(VS),JO=XS((t,e,n)=>e===t.start||n===t.start),tB=YS(JO,!1),GS=(t,e,n)=>{for(let r=0;r<t.length;r++)if(n(t[r],e))return!0;return!1},mg=Be.DOM,rB=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,pg=t=>Eo(t,e=>!1===Ie(e)),QS=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return pg({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_unsafe_embeds:e("convert_unsafe_embeds"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:rB(t),sandbox_iframes:e("sandbox_iframes"),sandbox_iframes_exclusions:uf(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},ZS=t=>{const e=t.options.get;return pg({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},gg=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,JS=t=>{const e=gg(t),n=g0(t),r=t.contentCSS,o=()=>{e.unloadAll(r),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?o():t.on("remove",o)};if(t.contentStyles.length>0){let l="";lt.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,c,u)=>{const{pass:f,fail:p}=zr(c,v=>tinymce.Resource.has(rp(v))),g=[...f.map(v=>{const h=tinymce.Resource.get(rp(v));return Tt(h)?Promise.resolve(gg(l).loadRawCss(v,h)):Promise.resolve()}),gg(l).loadAll(p)];return l.inline?g:g.concat([l.ui.styleSheetLoader.loadAll(u)])})(t,r,n)).then(s).catch(s),i=Gk(t);return i&&((l,c)=>{const u=D(l.getBody()),f=hr(Oe(u)),p=Pt("style");Ze(p,"type","text/css"),Kt(p,le(c)),Kt(f,p),l.on("remove",()=>{ue(p)})})(t,i),a},hg=t=>{var e;!0!==t.removed&&(zo(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||zc(r)&&r.selection.getStart(!0)!==o||jn(o).each(s=>{const a=s.getNode(),i=Bo(a)?jn(a).getOr(s):s;r.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=x_(e);he(n)&&n.call(e,e),(r=>{const o=S_(r);o&&Pr.setEditorTimeout(r,()=>{let s;s=!0===o?r:r.editorManager.get(o),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},tE=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(mg.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const r=t.getBody();var a,i;r.disabled=!0,t.readonly=v0(t),t._editableRoot=g_(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===mg.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let v=[];const h=E=>{if(!E.blob||!E.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const N=E.id||"blobid"+xT+++(()=>{const P=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+P()+P()+P()})(),A=E.name||N,R=E.blob;var L;return{id:mt(N),name:mt(A),filename:mt(E.filename||A+"."+(L=R.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[L.toLowerCase()]||"dat")),blob:mt(R),base64:mt(E.base64),blobUri:mt(E.blobUri||URL.createObjectURL(R)),uri:mt(E.uri)}},C=E=>Ge(v,E).getOrUndefined(),S=E=>C(N=>N.id()===E);return{create:(E,N,A,R,L)=>{if(Tt(E))return h({id:E,name:R,filename:L,blob:N,base64:A});if(Yt(E))return h(E);throw new Error("Unknown input type")},add:E=>{S(E.id())||v.push(E)},get:S,getByUri:E=>C(N=>N.blobUri()===E),getByData:(E,N)=>C(A=>A.base64()===E&&A.blob().type===N),findFirst:C,removeByUri:E=>{v=Xt(v,N=>N.blobUri()!==E||(URL.revokeObjectURL(N.blobUri()),!1))},destroy:()=>{Z(v,E=>{URL.revokeObjectURL(E.blobUri())}),v=[]}}})();let n,r;const o=s1(),s=[],a=v=>h=>t.selection?v(h):[],i=(v,h,C)=>{let S=0;do{S=v.indexOf(h,S),-1!==S&&(v=v.substring(0,S)+C+v.substr(S+h.length),S+=C.length-h.length+1)}while(-1!==S);return v},l=(v,h,C)=>(v=i(v,`src="${h}"`,`src="${C}"${C===pe.transparentSrc?' data-mce-placeholder="1"':""}`),i(v,'data-mce-src="'+h+'"','data-mce-src="'+C+'"')),c=(v,h)=>{Z(t.undoManager.data,C=>{"fragmented"===C.type?C.fragments=re(C.fragments,S=>l(S,v,h)):C.content=l(C.content,v,h)})},u=()=>(n||(n=i1(t,o)),b().then(a(v=>{const h=re(v,C=>C.blobInfo);return n.upload(h,a1(t)).then(a(C=>{const S=[];let E=!1;const N=re(C,(A,R)=>{const{blobInfo:L,image:P}=v[R];let j=!1;return A.status&&zk(t)?(A.url&&!mn(P.src,A.url)&&(E=!0),e.removeByUri(P.src),zo(t)||((W,B)=>{const I=t.convertURL(B,"src");var z;c(W.src,B),no(D(W),{src:u0(t)?(z=B,z+(-1===z.indexOf("?")?"?":"&")+(new Date).getTime()):B,"data-mce-src":I})})(P,A.url)):A.error&&(A.error.remove&&(c(P.src,pe.transparentSrc),S.push(P),j=!0),yd(t,uo.translate(["Failed to upload image: {0}",A.error.message]))),{element:P,status:A.status,uploadUri:A.url,blobInfo:L,removed:j}});return S.length>0&&!zo(t)?t.undoManager.transact(()=>{Z(dn(S),A=>{const R=ir(A);ue(A),R.each((L=>P=>{var j,W;(j=L).dom.isEmpty((W=P).dom)&&ct(j.schema.getTextBlockElements()[fe(W)])&&Kt(P,ut('<br data-mce-bogus="1" />'))})(t)),e.removeByUri(A.dom.src)})}):E&&t.undoManager.dispatchChange(),N}))}))),f=()=>d0(t)?u():Promise.resolve([]),p=v=>ar(s,h=>h(v)),b=()=>(r||(r=((t,e)=>{const n={};return{findAll:(r,o=je)=>{const s=Xt((i=r)?wn(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===pe.transparentSrc)&&(Ve(l,"blob:")?!t.isUploaded(l)&&o(i):!!Ve(l,"data:")&&o(i))}),a=re(s,i=>{const l=i.src;if(zt(n,l))return n[l].then(c=>Tt(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((u,f)=>{const p=()=>Promise.reject("Invalid data URI");if(Ve(f,"blob:")){const v=u.getByUri(f);return ct(v)?Promise.resolve(v):(b=f,Ve(b,"blob:")?(h=b,fetch(h).then(C=>C.ok?C.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${h} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Ve(b,"data:")?(g=b,new Promise((h,C)=>{Im(g).bind(({type:S,data:E,base64Encoded:N})=>nC(S,E,N)).fold(()=>C("Invalid data URI"),h)})):Promise.reject("Unknown URI format")).then(h=>rC(h).then(C=>oC(C,!1,S=>k.some(sC(u,h,S))).getOrThunk(p)))}var h,b,g;return Ve(f,"data:")?aC(u,f).fold(p,v=>Promise.resolve(v)):Promise.reject("Unknown image data format")})(e,l).then(u=>(delete n[l],{image:i,blobInfo:u})).catch(u=>(delete n[l],u));return n[l]=c,c}});var i;return Promise.all(a)}}})(o,e)),r.findAll(t.getBody(),p).then(a(v=>{const h=Xt(v,C=>Tt(C)?(yd(t,C),!1):"blob"!==C.uriType);return zo(t)||Z(h,C=>{c(C.image.src,C.blobInfo.blobUri()),C.image.src=C.blobInfo.blobUri(),C.image.removeAttribute("data-mce-src")}),h}))),g=v=>v.replace(/src="(blob:[^"]+)"/g,(h,C)=>{const S=o.getResultUri(C);if(S)return'src="'+S+'"';let E=e.getByUri(C);return E||(E=xn(t.editorManager.get(),(N,A)=>N||A.editorUpload&&A.editorUpload.blobCache.getByUri(C),void 0)),E?'src="data:'+E.blob().type+";base64,"+E.base64()+'"':h});return t.on("SetContent",()=>{d0(t)?f():b()}),t.on("RawSaveContent",v=>{v.content=g(v.content)}),t.on("GetContent",v=>{v.source_view||"raw"===v.format||"tree"===v.format||(v.content=g(v.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",v=>{Z(v,h=>{const C=h.attr("src");if(!C||e.getByUri(C))return;const S=o.getResultUri(C);S&&h.attr("src",S)})})}),{blobCache:e,addFilter:v=>{s.push(v)},uploadImages:u,uploadImagesAuto:f,scanForImages:b,destroy:()=>{e.destroy(),o.destroy(),r=n=null}}})(t),t.schema=Es(ZS(t)),t.dom=Be(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Vk(t),referrerPolicy:lf(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=ui(QS(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const u=a.dom,f="data-mce-"+c;let p=l.length;for(;p--;){const b=l[p];let g=b.attr(c);if(g&&!b.attr(f)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===c?(g=u.serializeStyle(u.parseStyle(g),b.name),g.length||(g=null),b.attr(f,g),b.attr(c,g)):"tabindex"===c?(b.attr(f,g),b.attr(c,null)):b.attr(f,a.convertURL(g,c,b.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const u=l[c],f=u.attr("type")||"no/type";0!==f.indexOf("mce-")&&u.attr("type","mce-"+f)}}),U_(a)&&i.addNodeFilter("#cdata",l=>{var c;let u=l.length;for(;u--;){const f=l[u];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode(null!==(c=f.value)&&void 0!==c?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const u=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(u)&&0===f.getAll("br").length&&f.append(new Kn("br",1))}}),i})(t),t.serializer=YC((a=>{const i=a.options.get;return{...QS(a),...ZS(a),...pg({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=XC(t.dom,t.getWin(),t.serializer,t),t.annotator=yb(t),t.formatter=d1(t),t.undoManager=f1(t),t._nodeChangeDispatcher=new bO(t),t._selectionOverrides=VO(t),(a=>{const i=rs(),l=bn(!1),c=$u(u=>{a.dispatch("longpress",{...u,type:"longpress"}),l.set(!0)},400);a.on("touchstart",u=>{Sx(u).each(f=>{c.cancel();const p={x:f.clientX,y:f.clientY,target:u.target};c.throttle(u),l.set(!1),i.set(p)})},!0),a.on("touchmove",u=>{c.cancel(),Sx(u).each(f=>{i.on(p=>{((b,g)=>{const v=Math.abs(b.clientX-g.x),h=Math.abs(b.clientY-g.y);return v>5||h>5})(f,p)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",u=>{c.cancel(),"touchcancel"!==u.type&&i.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{l.get()?u.preventDefault():a.dispatch("tap",{...u,type:"tap"})})},!0)})(t),(i=a=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{const c=W_(i);Z(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const c=V_(i);Z(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})})})(a),(a=>{const i="contenteditable",l=" "+lt.trim(j_(a))+" ",c=" "+lt.trim(w0(a))+" ",u=kx(l),f=kx(c),p=z_(a);p.length>0&&a.on("BeforeSetContent",b=>{((g,v,h)=>{let C=v.length,S=h.content;if("raw"!==h.format){for(;C--;)S=S.replace(v[C],cR(g,S,w0(g)));h.content=S}})(a,p,b)}),a.parser.addAttributeFilter("class",b=>{let g=b.length;for(;g--;){const v=b[g];u(v)?v.attr(i,"true"):f(v)&&v.attr(i,"false")}}),a.serializer.addAttributeFilter(i,b=>{let g=b.length;for(;g--;){const v=b[g];if(!u(v)&&!f(v))continue;const h=v.attr("data-mce-content");p.length>0&&h?dR(p,h)?(v.name="#text",v.type=3,v.raw=!0,v.value=h):v.remove():v.attr(i,null)}})})(t),zo(t)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,r,o)=>{const s=Y.fromRangeStart(n).getNode(),a=(f=r,p=o,Nr(D(s),b=>Vr(b.dom)||p.isBlock(fe(b)),xS(f)).getOr(D(f)).dom),i=SS(s,a,!1),l=SS(s,a,!0),c=document.createRange();var f,p;return wS(i,a).fold(()=>{CS(i)?c.setStart(i,0):c.setStartBefore(i)},u=>c.setStartBefore(u.dom)),wS(l,a).fold(()=>{CS(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)},u=>c.setEndAfter(u.dom)),c})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(xm(e))})(a))})})(t),(a=>{(t=>{const e=[",",".",";",":","!","?"],n=[32],r=()=>{return a=I_(t),i=F_(t),{inlinePatterns:o0(a),blockPatterns:r0(a),dynamicPatternsLookup:i};var a,i},o=()=>t.options.isSet("text_patterns_lookup");t.on("keydown",a=>{if(13===a.keyCode&&!vt.modifierPressed(a)&&t.selection.isCollapsed()){const i=sf(r(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||o())&&((u,f)=>{const p=u.selection.getRng();return Yd(u,p).map(b=>{var g;const v=Math.max(0,p.startOffset),h=dg(f,b,null!==(g=b.textContent)&&void 0!==g?g:"");return{inlineMatches:$S(u,b,p.startContainer,v,h,!0),blockMatches:QO(u,b,h,!0)}}).filter(({inlineMatches:b,blockMatches:g})=>g.length>0||b.length>0)})(l=t,i).fold(xe,({inlineMatches:u,blockMatches:f})=>(l.undoManager.add(),l.undoManager.extra(()=>{l.execCommand("mceInsertNewLine")},()=>{l.insertContent(vn,{preserve_zwsp:!0}),WS(l,u),((g,v)=>{if(0===v.length)return;const h=g.selection.getBookmark();Z(v,C=>YO(g,C)),g.selection.moveToBookmark(h)})(l,f);const p=l.selection.getRng(),b=Op(p.startContainer,p.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),b.each(g=>{const v=g.container;"\ufeff"===v.data.charAt(g.offset-1)&&(v.deleteData(g.offset-1,1),xi(l.dom,v.parentNode,h=>h===l.dom.getRoot()))})}),!0))&&a.preventDefault()}var l},!0),t.on("keydown",a=>{if(32===a.keyCode&&t.selection.isCollapsed()){const i=sf(r(),"space");(i.blockPatterns.length>0||o())&&((u,f)=>{const p=u.selection.getRng();return Yd(u,p).map(b=>{const g=Math.max(0,p.startOffset),v=ug(u.dom,b,p.startContainer,g),h=dg(f,b,v);return tB(u,b,h,!1,v)}).filter(b=>b.length>0)})(l=t,i).fold(xe,u=>(l.undoManager.transact(()=>{var f;f=l,Z(u,b=>ZO(f,b))}),!0))&&a.preventDefault()}var l},!0);const s=()=>{if(t.selection.isCollapsed()){const a=sf(r(),"space");(a.inlinePatterns.length>0||o())&&((i,l)=>{const c=i.selection.getRng();Yd(i,c).map(u=>{const f=Math.max(0,c.startOffset-1),p=ug(i.dom,u,c.startContainer,f),b=dg(l,u,p),g=$S(i,u,c.startContainer,f,b,!1);g.length>0&&i.undoManager.transact(()=>{WS(i,g)})})})(t,a)}};t.on("keyup",a=>{GS(n,a,(i,l)=>i===l.keyCode&&!vt.modifierPressed(l))&&s()}),t.on("keypress",a=>{GS(e,a,(i,l)=>i.charCodeAt(0)===l.charCode)&&Pr.setEditorTimeout(t,s)})})(a)})(t));const o=hO(t);((a,i)=>{a.addCommand("delete",()=>{var l;wx(l=a,i,!1).fold(()=>{l.selection.isEditable()&&(nd(l),im(l))},Qn)}),a.addCommand("forwardDelete",()=>{var l;wx(l=a,i,!0).fold(()=>{l.selection.isEditable()&&Xv(l)},Qn)})})(t,o),(a=>{a.on("NodeChange",()=>(i=>{const l=i.dom,c=i.selection,u=i.schema,f=u.getBlockElements(),p=c.getStart(),b=i.getBody();let g,v,h=null;const C=Fn(i);if(!p||!_t(p))return;const S=b.nodeName.toLowerCase();if(!u.isValidChild(S,C.toLowerCase())||(N=f,A=b,Ae(Ev(D(p),D(A)),L=>Np(N,L.dom))))return;var N,A;if(b.firstChild===b.lastChild&&He(b.firstChild))return g=Ap(i),g.appendChild(Ka().dom),b.replaceChild(g,b.firstChild),i.selection.setCursorLocation(g,0),void i.nodeChanged();let E=b.firstChild;for(;E;)if(_t(E)&&GE(u,E),iR(u,E)){if(lR(f,E)){v=E,E=E.nextSibling,l.remove(v);continue}if(!g){if(!h&&i.hasFocus()&&(h=T1(i.selection.getRng(),()=>document.createElement("span"))),!E.parentNode){E=null;break}g=Ap(i),b.insertBefore(g,E)}v=E,E=E.nextSibling,g.appendChild(v)}else g=null,E=E.nextSibling;h&&(i.selection.setRng(R1(h)),i.nodeChanged())})(a))})(t),(a=>{var i;const l=a.dom,c=Fn(a),u=null!==(i=t_(a))&&void 0!==i?i:"",f=(p,b)=>{if((h=>{if(p1(h)){const C=h.keyCode;return!g1(h)&&(vt.metaKeyPressed(h)||h.altKey||C>=112&&C<=123||Rt(AT,C))}return!1})(p))return;const g=a.getBody(),v=!(p1(h=p)&&!(g1(h)||"keyup"===h.type&&229===h.keyCode))&&((h,C,S)=>{if(h.isEmpty(C,void 0,{skipBogus:!1,includeZwsp:!0})){const E=C.firstElementChild;return!E||!h.getStyle(C.firstElementChild,"padding-left")&&!h.getStyle(C.firstElementChild,"padding-right")&&S===E.nodeName.toLowerCase()}return!1})(l,g,c);var h;(""!==l.getAttrib(g,m1)!==v||b)&&(l.setAttrib(g,m1,v?u:null),((h,C)=>{h.dispatch("PlaceholderToggle",{state:C})})(a,v),a.on(v?"keydown":"keyup",f),a.off(v?"keyup":"keydown",f))};Sr(u)&&a.on("init",p=>{f(p,!0),a.on("change SetContent ExecCommand",f),a.on("paste",b=>Pr.setEditorTimeout(a,()=>f(b)))})})(t),(t=>{const e=bn(!1),n=bn(P_(t)?"text":"html"),r=(o=>{const s=bn(null);return{create:()=>((a,i)=>{const{dom:l,selection:c}=a,u=a.getBody();i.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},oS);pe.browser.isFirefox()&&l.setStyle(f,"left","rtl"===l.getStyle(u,"direction",!0)?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",p=>{p.stopPropagation()}),f.focus(),c.select(f,!0)})(o,s),remove:()=>((a,i)=>{const l=a.dom;if(rg(a)){let c;const u=i.get();for(;c=rg(a);)l.remove(c),l.unbind(c);u&&a.selection.setRng(u)}i.set(null)})(o,s),getEl:()=>rg(o),getHtml:()=>(a=>{const i=a.dom,l=(p,b)=>{p.appendChild(b),i.remove(b,!0)},[c,...u]=Xt(a.getBody().childNodes,kO);Z(u,p=>{l(c,p)});const f=i.select("div[id=mcepastebin]",c);for(let p=f.length-1;p>=0;p--){const b=i.create("div");c.insertBefore(b,f[p]),l(b,f[p])}return c?c.innerHTML:""})(o),getLastRng:s.get}})(t);var o,s,a;o=t,(pe.browser.isChromium()||pe.browser.isSafari())&&(a=BO,(s=o).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((o,s)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),_b(a,!1)):(i.set("text"),_b(a,!0)),a.focus()})(o,s)}),o.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Vd(o,i.html,i.internal,!1),i.text&&ag(o,i.text,!1)})})(t,n),(o=>{const s=l=>c=>{l(o,c)},a=N_(o);he(a)&&o.on("PastePreProcess",s(a));const i=A_(o);he(i)&&o.on("PastePostProcess",s(i))})(t),t.addQueryStateHandler("mceTogglePlainTextPaste",()=>"text"===n.get()),t.on("PreInit",()=>{(o=>{o.on("cut",(s=>a=>{!a.isDefaultPrevented()&&hS(s)&&s.selection.isEditable()&&mS(a,gS(s),pS(s),()=>{if(pe.browser.isChromium()||pe.browser.isFirefox()){const i=s.selection.getRng();Pr.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(o)),o.on("copy",(s=>a=>{!a.isDefaultPrevented()&&hS(s)&&mS(a,gS(s),pS(s),kt)})(o))})(t),((o,s)=>{__(o)&&o.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Dc(o)||o.on("drop",a=>{const i=a.dataTransfer;i&&Ae(i.files,c=>/^image\//.test(c.type))&&a.preventDefault()}),o.on("drop",a=>{if(a.isDefaultPrevented())return;const i=bS(o,a);if(Se(i))return;const l=dS(a.dataTransfer),c=Ms(l,Wd());if((!uS(l)||(g=>{const v=g["text/plain"];return!!v&&0===v.indexOf("file://")})(l))&&fS(o,a,i))return;const u=l[Wd()],f=u||l["text/html"]||l["text/plain"],p=((g,v,h,C)=>{const S=g.getParent(h,E=>oa(v,E));if(!Jt(g.getParent(h,"summary")))return!0;if(S&&zt(C,"text/html")){const E=(new DOMParser).parseFromString(C["text/html"],"text/html").body;return!Jt(E.querySelector(S.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,i.startContainer,l),b=s.get();b&&!p||f&&(a.preventDefault(),Pr.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{(u||b&&p)&&o.execCommand("Delete"),vS(o,i);const g=iS(f);l["text/html"]?Vd(o,g,c,!0):ag(o,g,!0)})}))}),o.on("dragstart",a=>{s.set(!0)}),o.on("dragover dragend",a=>{Dc(o)&&!s.get()&&(a.preventDefault(),vS(o,bS(o,a))),"dragend"===a.type&&s.set(!1)}),(a=>{a.on("input",i=>{const l=c=>Jt(c.querySelector("summary"));if("deleteByDrag"===i.inputType){const c=Xt(a.dom.select("details"),l);Z(c,u=>{He(u.firstChild)&&u.firstChild.remove();const f=a.dom.create("summary");f.appendChild(Ka().dom),u.prepend(f)})}})})(o)})(t,e),((t,e,n)=>{((r,o,s)=>{let a;r.on("keydown",i=>{var l;(vt.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),r.on("paste",i=>{if(i.isDefaultPrevented()||(u=i,pe.os.isAndroid()&&0===(null===(p=null===(f=u.clipboardData)||void 0===f?void 0:f.items)||void 0===p?void 0:p.length)))return;var u,f,p;const l="text"===s.get()||a;a=!1;const c=dS(i.clipboardData);!uS(c)&&fS(r,i,o.getLastRng()||r.selection.getRng())||(Ms(c,"text/html")?(i.preventDefault(),ig(r,c,c["text/html"],l,!0)):Ms(c,"text/plain")&&Ms(c,"text/uri-list")?(i.preventDefault(),ig(r,c,c["text/plain"],l,!0)):(o.create(),Pr.setEditorTimeout(r,()=>{const u=o.getHtml();o.remove(),ig(r,c,u,l,!1)},0)))})})(t,e,n),(r=>{const o=a=>Ve(a,"webkit-fake-url"),s=a=>Ve(a,"data:");r.parser.addNodeFilter("img",(a,i,l)=>{if(!Dc(r)&&!0===(null===(u=l.data)||void 0===u?void 0:u.paste))for(const c of a){const u=c.attr("src");Tt(u)&&!c.attr("data-mce-object")&&u!==pe.transparentSrc&&(o(u)||!M_(r)&&s(u))&&c.remove()}var u})})(t)})(t,r,n)})})(t);const s=(a=>{const i=a;return(l=a,Re(l.plugins,"rtc").bind(c=>k.from(c.setup))).fold(()=>(i.rtcInstance=HC(a),k.none()),l=>(i.rtcInstance=(()=>{const c=mt(null),u=mt("");return{init:{bindEvents:kt},undoManager:{beforeChange:kt,add:c,undo:c,redo:c,clear:kt,reset:kt,hasUndo:xe,hasRedo:xe,transact:c,ignore:kt,extra:kt},formatter:{match:xe,matchAll:mt([]),matchNode:mt(void 0),canApply:xe,closest:u,apply:kt,remove:kt,toggle:kt,formatChanged:mt({unbind:kt})},editor:{getContent:u,setContent:mt({content:"",html:""}),insertContent:mt(""),addVisual:kt},selection:{getContent:u},autocompleter:{addDecoration:kt,removeDecoration:kt},raw:{getModel:mt(k.none())}}})(),k.some(()=>l().then(c=>(i.rtcInstance=(u=>{const f=E=>Yt(E)?E:{},{init:p,undoManager:b,formatter:g,editor:v,selection:h,autocompleter:C,raw:S}=u;return{init:{bindEvents:p.bindEvents},undoManager:{beforeChange:b.beforeChange,add:b.add,undo:b.undo,redo:b.redo,clear:b.clear,reset:b.reset,hasUndo:b.hasUndo,hasRedo:b.hasRedo,transact:(E,N,A)=>b.transact(A),ignore:(E,N)=>b.ignore(N),extra:(E,N,A,R)=>b.extra(A,R)},formatter:{match:(E,N,A,R)=>g.match(E,f(N),R),matchAll:g.matchAll,matchNode:g.matchNode,canApply:E=>g.canApply(E),closest:E=>g.closest(E),apply:(E,N,A)=>g.apply(E,f(N)),remove:(E,N,A,R)=>g.remove(E,f(N)),toggle:(E,N,A)=>g.toggle(E,f(N)),formatChanged:(E,N,A,R,L)=>g.formatChanged(N,A,R,L)},editor:{getContent:E=>v.getContent(E),setContent:(E,N)=>({content:v.setContent(E,N),html:""}),insertContent:(E,N)=>(v.insertContent(E),""),addVisual:v.addVisual},selection:{getContent:(E,N)=>h.getContent(N)},autocompleter:{addDecoration:C.addDecoration,removeDecoration:C.removeDecoration},raw:{getModel:()=>k.some(S.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),E_(a)||(i.body.spellcheck=!1,mg.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=lt.each,n=vt.BACKSPACE,r=vt.DELETE,o=t.dom,s=t.selection,a=t.parser,i=pe.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),u=pe.deviceType.isiPhone()||pe.deviceType.isiPad(),f=pe.os.isMacOS()||pe.os.isiOS(),p=(B,I)=>{try{t.getDoc().execCommand(B,!1,String(I))}catch{}},b=B=>B.isDefaultPrevented(),g=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},v=()=>{t.inline||o.bind(t.getDoc(),"mousedown mouseup",B=>{let I;if(B.target===t.getDoc().documentElement)if(I=s.getRng(),t.getBody().focus(),"mousedown"===B.type){if(Tr(I.startContainer))return;s.placeCaretAt(B.clientX,B.clientY)}else s.setRng(I)})},h=()=>{Range.prototype.getClientRects||t.on("mousedown",B=>{if(!b(B)&&"HTML"===B.target.nodeName){const I=t.getBody();I.blur(),Pr.setEditorTimeout(t,()=>{I.focus()})}})},C=()=>{const B=C0(t);t.on("click",I=>{const z=I.target;/^(IMG|HR)$/.test(z.nodeName)&&o.isEditable(z)&&(I.preventDefault(),t.selection.select(z),t.nodeChanged()),"A"===z.nodeName&&o.hasClass(z,B)&&0===z.childNodes.length&&o.isEditable(z.parentNode)&&(I.preventDefault(),s.select(z))})},S=()=>{t.on("keydown",B=>{if(!b(B)&&B.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const I=s.getNode().previousSibling;if(I&&I.nodeName&&"table"===I.nodeName.toLowerCase())return B.preventDefault(),!1}return!0})},E=()=>{v0(t)||t.on("BeforeExecCommand mousedown",()=>{p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),h0(t)||p("enableObjectResizing",!1)})},N=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},A=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},R=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",B=>{let I;"HTML"===B.target.nodeName&&(I=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(I),t.selection.normalize(),t.nodeChanged())}))},L=()=>{f&&t.on("keydown",B=>{!vt.metaKeyPressed(B)||B.shiftKey||37!==B.keyCode&&39!==B.keyCode||(B.preventDefault(),t.selection.getSel().modify("move",37===B.keyCode?"backward":"forward","lineboundary"))})},P=()=>{t.on("click",B=>{let I=B.target;do{if("A"===I.tagName)return void B.preventDefault()}while(I=I.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},j=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",B=>{B.preventDefault()})})},W=kt;return zo(t)?(c&&(v(),C(),j(),g(),u&&(A(),R(),P())),l&&(h(),E(),N(),L())):(t.on("keydown",B=>{if(b(B)||B.keyCode!==vt.BACKSPACE)return;let I=s.getRng();const z=I.startContainer,G=I.startOffset,st=o.getRoot();let rt=z;if(I.collapsed&&0===G){for(;rt.parentNode&&rt.parentNode.firstChild===rt&&rt.parentNode!==st;)rt=rt.parentNode;"BLOCKQUOTE"===rt.nodeName&&(t.formatter.toggle("blockquote",void 0,rt),I=o.createRng(),I.setStart(z,0),I.setEnd(z,0),s.setRng(I))}}),(()=>{const B=I=>{const z=o.create("body"),G=I.cloneContents();return z.appendChild(G),s.serializer.serialize(z,{format:"html"})};t.on("keydown",I=>{const z=I.keyCode;if(!b(I)&&(z===r||z===n)&&t.selection.isEditable()){const G=t.selection.isCollapsed(),st=t.getBody();if(G&&!ns(t.schema,st)||!G&&!(rt=>{const wt=B(rt),At=o.createRng();return At.selectNode(t.getBody()),wt===B(At)})(t.selection.getRng()))return;I.preventDefault(),t.setContent(""),st.firstChild&&o.isBlock(st.firstChild)?t.selection.setCursorLocation(st.firstChild,0):t.selection.setCursorLocation(st,0),t.nodeChanged()}})})(),pe.windowsPhone||t.on("keyup focusin mouseup",B=>{vt.modifierPressed(B)||(I=>{const z=I.getBody(),G=I.selection.getRng();return G.startContainer===G.endContainer&&G.startContainer===z&&0===G.startOffset&&G.endOffset===z.childNodes.length})(t)||s.normalize()},!0),c&&(v(),C(),t.on("init",()=>{p("DefaultParagraphSeparator",Fn(t))}),j(),S(),a.addNodeFilter("br",B=>{let I=B.length;for(;I--;)"Apple-interchange-newline"===B[I].attr("class")&&B[I].remove()}),u?(A(),R(),P()):g()),l&&(t.on("keydown",B=>{if(!b(B)&&B.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const I=s.getNode(),z=I.previousSibling;if("HR"===I.nodeName)return o.remove(I),void B.preventDefault();z&&z.nodeName&&"hr"===z.nodeName.toLowerCase()&&(o.remove(z),B.preventDefault())}}}),h(),(()=>{const B=()=>{const z=o.getAttribs(s.getStart().cloneNode(!1));return()=>{const G=s.getStart();G!==t.getBody()&&(o.setAttrib(G,"style",null),e(z,st=>{G.setAttributeNode(st.cloneNode(!0))}))}},I=()=>!s.isCollapsed()&&o.getParent(s.getStart(),o.isBlock)!==o.getParent(s.getEnd(),o.isBlock);t.on("keypress",z=>{let G;return!(!(b(z)||8!==z.keyCode&&46!==z.keyCode)&&I()&&(G=B(),t.getDoc().execCommand("delete",!1),G(),z.preventDefault(),1))}),o.bind(t.getDoc(),"cut",z=>{if(!b(z)&&I()){const G=B();Pr.setEditorTimeout(t,()=>{G()})}})})(),E(),t.on("SetContent ExecCommand",B=>{"setcontent"!==B.type&&"mceInsertLink"!==B.command||e(o.select("a:not([data-mce-block])"),I=>{var z;let G=I.parentNode;const st=o.getRoot();if(G?.lastChild===I){for(;G&&!o.isBlock(G);){if((null===(z=G.parentNode)||void 0===z?void 0:z.lastChild)!==G||G===st)return;G=G.parentNode}o.add(G,"br",{"data-mce-bogus":1})}})}),N(),L(),S())),{refreshContentEditable:W,isHidden:()=>{if(!l||t.removed)return!1;const B=t.selection.getSel();return!B||!B.rangeCount||0===B.rangeCount}}})(a),a.dispatch("PostRender");const c=Qk(a);void 0!==c&&(l.dir=c);const u=k_(a);u&&a.on("BeforeSetContent",f=>{lt.each(u,p=>{f.content=f.content.replace(p,b=>"\x3c!--mce:protected "+escape(b)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing="compositionstart"===f.type})})(t),(a=>{const i=X_(a);var c,l;Tt(Y_(a))||!Ie(i)&&"INVALID"!=("gpl"===(l=i).toLowerCase()||(c=l).length>=64&&c.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(t),s.fold(()=>{const a=(i=>{let l=!1;const c=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(t);JS(t).then(()=>{hg(t),a()})},a=>{t.setProgressState(!0),JS(t).then(()=>{a().then(i=>{t.setProgressState(!1),hg(t),qC(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),hg(t),qC(t)})})})},oB=je,bg=Be.DOM,eE=Be.DOM,nE=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),rE=t=>{const e=t.getElement();return t.inline?nE(null):(n=>{const r=eE.create("div");return eE.insertAfter(r,n),nE(r,r)})(e)},sB=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const r=lt.trim(f0(n)),o=n.ui.registry.getAll().icons,s={...vd.get("default").icons,...vd.get(r).icons};we(s,(a,i)=>{zt(o,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const r=Qa(n);if(Tt(r)){const o=Ea.get(r);n.theme=o(n,Ea.urls[r])||{},he(n.theme.init)&&n.theme.init(n,Ea.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const r=cf(n),o=fi.get(r);n.model=o(n,fi.urls[r])})(t),(n=>{const r=[];Z(Bc(n),o=>{((s,a,i)=>{const l=mi.get(i),c=mi.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=lt.trim(i),l&&-1===lt.inArray(a,i)){if(s.plugins[i])return;try{const u=l(s,c)||{};s.plugins[i]=u,he(u.init)&&(u.init(s,c),a.push(i))}catch(u){((f,p,b)=>{const g=uo.translate(["Failed to initialize plugin: {0}",p]);xb(f,"PluginLoadError",{message:g}),Cd(g,b),yd(f,g)})(s,i,u)}}})(n,r,o.replace(/^\-/,""))})})(t);const e=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,Tt(Qa(n))?(o=>{const s=o.theme.renderUI;return s?s():rE(o)})(n):he(Qa(n))?(o=>{const s=o.getElement(),a=Qa(o)(o,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||o.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||o.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):rE(n)})(t);var n,r;((n,r)=>{const o={show:k.from(r.show).getOr(kt),hide:k.from(r.hide).getOr(kt),isEnabled:k.from(r.isEnabled).getOr(je),setEnabled:s=>{n.mode.isReadOnly()||k.from(r.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...o}})(t,k.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(o1(r=n,Yk(r)),(r=>o1(r,g0(r)))(n)),t.inline?tE(t):((n,r)=>{((o,s)=>{const a=pe.browser.isFirefox()?x0(o):"Rich Text Area",i=o.translate(a),l=ro(D(o.getElement()),"tabindex").bind(Vs),c=((u,f,p,b)=>{const g=Pt("iframe");return b.each(v=>Ze(g,"tabindex",v)),no(g,p),no(g,{id:u+"_ifr",frameBorder:"0",allowTransparency:"true",title:f}),H(g,"tox-edit-area__iframe"),g})(o.id,i,Rk(o),l).dom;c.onload=()=>{c.onload=null,o.dispatch("load")},o.contentAreaContainer=s.iframeContainer,o.iframeElement=c,o.iframeHTML=(u=>{let f=Ok(u)+"<html><head>";l0(u)!==u.documentBaseUrl&&(f+='<base href="'+u.documentBaseURI.getURI()+'" />'),f+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const p=Bk(u),b=Dk(u),g=u.translate(x0(u));return c0(u)&&(f+='<meta http-equiv="Content-Security-Policy" content="'+c0(u)+'" />'),f+=`</head><body id="${p}" class="mce-content-body ${b}" data-id="${u.id}" aria-label="${g}"><br></body></html>`,f})(o),bg.add(s.iframeContainer,c)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=bg.isHidden(r.editorContainer)),n.getElement().style.display="none",bg.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const s=o.iframeElement,a=()=>{o.contentDocument=s.contentDocument,tE(o)};if(q_(o)||pe.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close(),a()}else{const l=((t,e,n,r)=>((o,s,a,i,l)=>{const c=((u,f)=>p=>{u(p)&&f((b=>{const g=D(Js(b).getOr(b.target)),v=()=>b.stopPropagation(),h=()=>b.preventDefault(),C=On(h,v);return((S,E,N,A,R,L,P)=>({target:S,x:E,y:N,stop:A,prevent:R,kill:L,raw:P}))(g,b.clientX,b.clientY,v,h,C,b)})(p))})(a,i);return o.dom.addEventListener(s,c,!1),{unbind:St(We,o,s,c,!1)}})(t,"load",n,()=>{l.unbind(),a()}))(D(s),0,oB);s.srcdoc=o.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},_a=Be.DOM,oE=t=>"-"===t.charAt(0),sE=(t,e,n)=>k.from(e).filter(r=>Sr(r)&&!vd.has(r)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:k.some(r)})),aE=Dn().deviceType,iE=aE.isPhone(),iB=aE.isTablet(),Yl=t=>{if(Se(t))return[];{const e=it(t)?t:t.split(/[ ,]/),n=re(e,Yo);return Xt(n,Sr)}},vg=(t,e)=>zt(t.sections(),e),cB=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Re(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),dB=(t,e)=>{var n;const r=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?lt.extend({},t.external_plugins,r):r},mB=(t,e)=>{const n=t.selection,r=t.dom;return/^ | $/.test(e)?((o,s,a,i)=>{const l=D(o.getRoot());return a=wl(l,Y.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Sl(l,Y.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),e,t.schema):e},Zd=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const s=lt.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:s}}return{content:o,details:{}}})(e);Xm(t,{...r,content:mB(t,n),format:"html",set:!1,selection:!0}).each(o=>{const s=(i=o.content,l=r,ep(t).editor.insertContent(i,l));var i,l;Ym(t,s,o),t.addVisual()})}},pB={"font-size":"size","font-family":"face"},gB=Zs("font"),lE=t=>(e,n)=>k.from(n).map(D).filter(Hn).bind(r=>{return(o=t,s=e,a=r.dom,km(D(a),i=>{return dt(l=i,o).orThunk(()=>gB(l)?Re(pB,o).bind(c=>ro(l,c)):k.none());var l},i=>Ft(D(s),i))).or(((o,s)=>k.from(Be.DOM.getStyle(s,o,!0)))(t,r.dom));var o,s,a}).getOr(""),hB=lE("font-size"),bB=On(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),lE("font-family")),vB=t=>jn(t.getBody()).bind(e=>{const n=e.container();return k.from(ot(n)?n.parentNode:n)}),yg=(t,e)=>{return n=t,r=zs(k.some,e),(o=n,k.from(o.selection.getRng()).bind(s=>{const a=o.getBody();return s.startContainer===a&&0===s.startOffset?k.none():k.from(o.selection.getStart(!0))})).orThunk(St(vB,n)).map(D).filter(Hn).bind(r);var n,r,o},cE=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const r=lt.explode(t.options.get("font_size_style_values")),o=lt.explode(t.options.get("font_size_classes"));return o.length>0?o[n-1]||e:r[n-1]||e}return e}return e},yB=t=>{const e=t.split(/\s*,\s*/);return re(e,n=>-1===n.indexOf(" ")||Ve(n,'"')||Ve(n,"'")?n:`'${n}'`).join(",")},dE=(t,e)=>{const n=t.dom,r=t.selection.getRng(),o=e?t.selection.getStart():t.selection.getEnd(),s=e?r.startContainer:r.endContainer,a=$l(n,s);if(!a||!a.isContentEditable)return;const i=e?jt:Lt,l=Fn(t);((c,u,f,p)=>{const b=c.dom,g=h=>b.isBlock(h)&&h.parentElement===f,v=g(u)?u:b.getParent(p,g,f);return k.from(v).map(D)})(t,o,a,s).each(c=>{const u=Aw(t,s,c.dom,a,!1,l);i(c,D(u)),t.selection.setCursorLocation(u,0),t.dispatch("NewBlock",{newBlock:u}),ql(t,"insertParagraph")})},xB=["toggleview"],uE=t=>Rt(xB,t.toLowerCase());class fE{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,r,o){const s=this.editor,a=e.toLowerCase(),i=o?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?$f(c=s).each(u=>c.selection.setRng(u)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:r}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[a];return!!he(l)&&(l(a,n,r),s.dispatch("ExecCommand",{command:e,ui:n,value:r}),!0)}queryCommandState(e){if(!uE(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),r=this.commands.state[n];return!!he(r)&&r(n)}queryCommandValue(e){if(!uE(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),r=this.commands.value[n];return he(r)?r(n):""}addCommands(e,n="exec"){const r=this.commands;we(e,(o,s)=>{Z(s.toLowerCase().split(","),a=>{r[n][a]=o})})}addCommand(e,n,r){const o=e.toLowerCase();this.commands.exec[o]=(s,a,i)=>n.call(r??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,r){this.commands.state[e.toLowerCase()]=()=>n.call(r??this.editor)}addQueryValueHandler(e,n,r){this.commands.value[e.toLowerCase()]=()=>n.call(r??this.editor)}}const Na="data-mce-contenteditable",Cg=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Jd=(t,e)=>{t.dom.contentEditable=e?"true":"false"},Aa=t=>t.readonly,mE=t=>{t.parser.addAttributeFilter("contenteditable",e=>{Aa(t)&&Z(e,n=>{n.attr(Na,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(Na,e=>{Aa(t)&&Z(e,n=>{n.attr("contenteditable",n.attr(Na))})}),t.serializer.addTempAttr(Na)},wB=["copy"],SB=lt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class xg{static isNative(e){return!!SB[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||xe}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const r=e.toLowerCase(),o=ju(r,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const s=this.bindings[r];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(!1===l.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(e,n,r,o){if(!1===n&&(n=xe),n){const s={func:n,removed:!1};o&&lt.extend(s,o);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=r?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(e,n){if(e){const r=e.toLowerCase().split(" ");let o=r.length;for(;o--;){const s=r[o];let a=this.bindings[s];if(!s)return we(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=zr(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,Z(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else we(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(e,n,r){return this.on(e,n,r,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const Gl=t=>(t._eventDispatcher||(t._eventDispatcher=new xg({scope:t,toggleEvent:(e,n)=>{xg.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),wg={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const r=this;if(r.removed&&"remove"!==t&&"detach"!==t)return ju(t.toLowerCase(),e??{},r);const o=Gl(r).dispatch(t,e);if(!1!==n&&r.parent){let s=r.parent();for(;s&&!o.isPropagationStopped();)s.dispatch(t,o,!1),s=s.parent?s.parent():void 0}return o},on(t,e,n){return Gl(this).on(t,e,n)},off(t,e){return Gl(this).off(t,e)},once(t,e){return Gl(this).once(t,e)},hasEventListeners(t){return Gl(this).has(t)}},tu=Be.DOM;let Ta;const eu=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=b0(t);return n?(t.eventRoot||(t.eventRoot=tu.select(n)[0]),t.eventRoot):t.getBody()},pE=(t,e,n)=>{var r;(r=t).hidden||Aa(r)?Aa(t)&&((r,o)=>{if("click"!==o.type||vt.metaKeyPressed(o))Rt(wB,o.type)&&r.dispatch(o.type,o);else{const s=D(o.target);(a=r,i=s,ao(i,"a",l=>Ft(l,D(a.getBody()))).bind(l=>ro(l,"href"))).each(a=>{if(o.preventDefault(),/^#/.test(a)){const i=r.dom.select(`${a},[name="${Xo(a,"#")}"]`);i.length&&r.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},gE=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=eu(t,e);if(b0(t)){if(Ta||(Ta={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Ta&&(we(Ta,(o,s)=>{t.dom.unbind(eu(t,s))}),Ta=null)})),Ta[e])return;const r=o=>{const s=o.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||tu.isChildOf(s,l))&&pE(a[i],e,o)}};Ta[e]=r,tu.bind(n,e,r)}else{const r=o=>{pE(t,e,o)};tu.bind(n,e,r),t.delegates[e]=r}},hE={...wg,bindPendingEventDelegates(){const t=this;lt.each(t._pendingNativeEvents,e=>{gE(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?gE(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(eu(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(we(t.delegates,(r,o)=>{t.dom.unbind(eu(t,o),o,r)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},EB=t=>Tt(t)?{value:t.split(/[ ,]/),valid:!0}:Un(t,Tt)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},bE=(t,e)=>t+(hs(e.message)?"":`. ${e.message}`),vE=t=>t.valid,Sg=(t,e,n="")=>{const r=e(t);return En(r)?r?{value:t,valid:!0}:{valid:!1,message:n}:r},kB=["design","readonly"],yE=(t,e,n,r)=>{const o=n[e.get()],s=n[r];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${r}:`,a)}var a;o.deactivate(),o.editorReadOnly!==s.editorReadOnly&&((a,i)=>{const l=D(a.getBody());var c,u,f;f=i,at(c=l,u="mce-content-readonly")&&!f?et(c,u):f&&H(c,u),i?(a.selection.controlSelection.hideResizeRect(),a._selectionOverrides.hideFakeCaret(),(c=>{k.from(c.selection.getNode()).each(u=>{u.removeAttribute("data-mce-selected")})})(a),a.readonly=!0,Jd(l,!1),Z(Mn(l,'*[contenteditable="true"]'),c=>{Ze(c,Na,"true"),Jd(c,!1)})):(a.readonly=!1,a.hasEditableRoot()&&Jd(l,!0),Z(Mn(l,`*[${Na}="true"]`),c=>{m(c,Na),Jd(c,!0)}),Cg(a,"StyleWithCSS",!1),Cg(a,"enableInlineTableEditing",!1),Cg(a,"enableObjectResizing",!1),Jb(a)&&a.focus(),(c=>{c.selection.setRng(c.selection.getRng())})(a),a.nodeChanged())})(t,s.editorReadOnly),e.set(r),(a=t).dispatch("SwitchMode",{mode:r})},Eg=lt.each,kg=lt.explode,_B={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},CE=lt.makeMap("alt,ctrl,shift,meta,access"),NB=t=>{const e={},n=pe.os.isMacOS()||pe.os.isiOS();Eg(kg(t.toLowerCase(),"+"),s=>{s in CE?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=_B[s]||s.toUpperCase().charCodeAt(0))});const r=[e.keyCode];let o;for(o in CE)e[o]?r.push(o):e[o]=!1;return e.id=r.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class xE{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(Eg(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,r,o){const s=this,a=s.normalizeCommandFunc(r);return Eg(kg(lt.trim(e)),i=>{const l=s.createShortcut(i,n,a,o);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,r=e;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:lt.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,n,r,o){const s=lt.map(kg(e,">"),NB);return s[s.length-1]=lt.extend(s[s.length-1],{func:r,scope:o||this.editor}),lt.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const AB=()=>{const t=(()=>{const e={},n={},r={},o={},s={},a={},i={},l={},c=(u,f)=>(p,b)=>{u[p.toLowerCase()]={...b,type:f}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(r,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(a,"contexttoolbar"),addContextForm:c(a,"contextform"),addSidebar:c(i,"sidebar"),addView:c(l,"views"),addIcon:(u,f)=>o[u.toLowerCase()]=f,getAll:()=>({buttons:e,menuItems:n,icons:o,popups:r,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Ra=Be.DOM,wE=lt.extend,TB=lt.each;class nu{constructor(e,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,wE(this,hE);const o=this;this.id=e,this.hidden=!1;const s=((b,g)=>{const v=kR(g);return((t,e,n,r,o)=>{var s;const a=t?{mobile:cB(null!==(s=o.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return So(s,(c,u)=>Rt(t,u),wo(i),wo(l)),{t:i,f:l}})(e);return o=n.f,{sections:mt(n.t),options:mt(o)};var o})(["mobile"],Ip(a,o)),l=lt.extend(n,r,i.options(),t&&vg(i,"mobile")?((c,u,f={})=>{const p=c.sections(),b=Re(p,u).getOr({});return lt.extend({},f,b)})(i,"mobile"):{},{external_plugins:dB(r,i.options())});return((c,u,f,p)=>{const b=Yl(f.forced_plugins),g=Yl(p.plugins),v=vg(S=u,"mobile")?S.sections().mobile:{},h=((S,E,N,A)=>S&&vg(E,"mobile")?A:N)(c,u,g,v.plugins?Yl(v.plugins):g),C=((S,E)=>[...Yl(S),...Yl(E)])(b,h);var S;return lt.extend(p,{forced_plugins:b,plugins:C})})(t,i,r,l)})(iE||iB,iE,v,b,v)})(r.defaultOptions,n);this.options=((b,g,v=g)=>{const h={},C={},S=(N,A,R)=>{const L=Sg(A,R);return vE(L)?(C[N]=L.value,!0):(console.warn(bE(`Invalid value passed for the ${N} option`,L)),!1)},E=N=>zt(h,N);return{register:(N,A)=>{const R=Tt(A.processor)?(P=>{const j=(()=>{switch(P){case"array":return it;case"boolean":return En;case"function":return he;case"number":return x;case"object":return Yt;case"string":return Tt;case"string[]":return EB;case"object[]":return W=>Un(W,Yt);case"regexp":return W=>wr(W,RegExp);default:return je}})();return W=>Sg(W,j,`The value must be a ${P}.`)})(A.processor):A.processor,L=((P,j,W)=>{if(!Ie(j)){const B=Sg(j,W);if(vE(B))return B.value;console.error(bE(`Invalid default value passed for the "${P}" option`,B))}})(N,A.default,R);h[N]={...A,default:L,processor:R},Re(C,N).orThunk(()=>Re(g,N)).each(P=>S(N,P,R))},isRegistered:E,get:N=>Re(C,N).orThunk(()=>Re(h,N).map(A=>A.default)).getOrUndefined(),set:(N,A)=>{if(E(N)){const R=h[N];return R.immutable?(console.error(`"${N}" is an immutable option and cannot be updated`),!1):S(N,A,R.processor)}return console.warn(`"${N}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:N=>{const A=E(N);return A&&delete C[N],A},isSet:N=>zt(C,N),debug:()=>{try{console.log(JSON.parse(JSON.stringify(v,(N,A)=>En(A)||x(A)||Tt(A)||Jt(A)||it(A)||Mt(A)?A:Object.prototype.toString.call(A))))}catch(N){console.error(N)}}}})(0,s,n),(b=>{const g=b.options.register;g("id",{processor:"string",default:b.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:b.documentBaseUrl}),g("body_id",{processor:i0(b,"tinymce"),default:"tinymce"}),g("body_class",{processor:i0(b),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:v=>{const h=Tt(v)&&Sr(v);return h?{value:v,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:v=>{const h=Rt(["block","linebreak","invert","default"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:v=>En(v)||Tt(v)?{valid:!0,value:v}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:v=>{const h=!1===v||Tt(v)||Un(v,Tt);return h?Tt(v)?{value:re(v.split(","),Yo),valid:h}:it(v)?{value:v,valid:h}:!1===v?{value:[],valid:h}:{value:v,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:df(b)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:v=>{const h=Tt(v)||Un(v,Tt);return h?{value:it(v)?v:re(v.split(","),Yo),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:v=>{const h=En(v)||Tt(v);return h?!1===v||af.isiPhone()||af.isiPad()?{value:"",valid:h}:{value:!0===v?"table,img,figure.image,div,video,iframe":v,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!Ak}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"string"}),g("service_message",{processor:"string"}),g("theme",{processor:v=>!1===v||Tt(v)||he(v),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:v=>{const h=!1===v||Tt(v);return h?{value:!1===v?"":v,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:b.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:b.convertURL}),g("url_converter_scope",{processor:"object",default:b}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:Oc}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:Oc}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:Oc}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:Oc}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:v=>Tt(v)||!0===v}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("license_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:v=>Un(v,Yt)||!1===v?{value:s0(!1===v?[]:v),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),g("text_patterns_lookup",{processor:v=>{return he(v)?{value:(h=v,C=>{const S=h(C);return s0(S)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:v=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:v=>Un(v,a0)?{value:v,valid:!0}:a0(v)?{value:[v],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!0}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:v=>{const h=Rt(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:v=>{const h=Rt(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("sandbox_iframes",{processor:"boolean",default:!0}),g("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),g("convert_unsafe_embeds",{processor:"boolean",default:!0}),b.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:uo.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:Tk.getAttrib(b.getElement(),"placeholder")})})})(o);const a=this.options.get;var b,g;a("deprecation_warnings")&&(((v,h)=>{const C=(t=>{const e=QC(t,lT),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),Vo(e)})(v),S=(t=>ZC(t,dT))(h),E=S.length>0,N=C.length>0,A="mobile"===h.theme;if(E||N||A){const R="\n- ",L=A?`\n\nThemes:${R}mobile`:"",P=E?`\n\nPlugins:${R}${S.join(R)}`:"",j=N?`\n\nOptions:${R}${C.join(R)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+L+P+j)}})(b=n,g=s),((v,h)=>{const C=(t=>QC(t,cT))(v),S=(t=>ZC(t,GC.map(e=>e.name)))(h),E=S.length>0,N=C.length>0;if(E||N){const A="\n- ",R=E?`\n\nPlugins:${A}${S.map(gT).join(A)}`:"",L=N?`\n\nOptions:${A}${C.join(A)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+R+L)}})(b,g));const i=a("suffix");i&&(r.suffix=i),this.suffix=r.suffix;const l=a("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const c=lf(o);c&&(os.ScriptLoader._setReferrerPolicy(c),Be.DOM.styleSheetLoader._setReferrerPolicy(c));const u=y0(o);ct(u)&&Be.DOM.styleSheetLoader._setContentCssCors(u),Vn.languageLoad=a("language_load"),Vn.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Yr(l0(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=df(o),this.hasVisual=v_(o),this.shortcuts=new xE(this),this.editorCommands=new fE(this),(t=>{var e;(t=>{(e=>{const n=r=>()=>{Z("left,center,right,justify".split(","),o=>{r!==o&&e.formatter.remove("align"+o)}),"none"!==r&&(e.formatter.toggle("align"+r,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=r=>()=>{const o=e.selection,s=o.isCollapsed()?[e.dom.getParent(o.getNode(),e.dom.isBlock)]:o.getSelectedBlocks();return Ae(s,a=>ct(e.formatter.matchNode(a,r)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=e.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(pe.os.isMacOS()||pe.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!_t(a)||s++!==o||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,r,o)=>{e.selection.select(o)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Vr);if(n){const r=e.dom.createRng();r.selectNodeContents(n),e.selection.setRng(r)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{Zd(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{Zd(e,e.dom.encode(o))},insertHTML:(n,r,o)=>{Zd(e,o)},mceInsertContent:(n,r,o)=>{Zd(e,o)},mceSetContent:(n,r,o)=>{e.setContent(o)},mceReplaceContent:(n,r,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(T_(e))}})})(t),(e=>{const n=(r,o,s)=>{const a=Tt(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");Yt(a)&&Tt(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const r=e.dom.getParent(e.selection.getStart(),"a");return void(r&&e.dom.remove(r,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{yx(e,"indent")},Outdent:()=>{Cx(e)}}),e.editorCommands.addCommands({Outdent:()=>hx(e)},"state")})(t),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{dE(e,!0)},InsertNewBlockAfter:()=>{dE(e,!1)}})})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Hd(Bw,e)},mceInsertNewLine:(n,r,o)=>{jw(e,o)},InsertLineBreak:(n,r,o)=>{Hd(Lw,e)}})})(t),(e=>{(n=>{const r=(o,s)=>{n.formatter.toggle(o,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,s,a)=>{r(o,{value:a})},BackColor:(o,s,a)=>{r("hilitecolor",{value:a})},FontName:(o,s,a)=>{((i,l)=>{const c=cE(i,l);i.formatter.toggle("fontname",{value:yB(c)}),i.nodeChanged()})(n,a)},FontSize:(o,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:cE(i,a)}),i.nodeChanged()},LineHeight:(o,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(o,s,a)=>{var i;r(o,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,s,a)=>{r(Tt(a)?a:"p")},mceToggleFormat:(o,s,a)=>{r(a)}})})(e),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return yg(o=n,s=>bB(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return yg(o=n,s=>hB(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return yg(o=n,s=>{const a=D(o.getBody());return km(s,l=>dt(l,"line-height"),St(Ft,a)).getOrThunk(()=>{const l=parseFloat(tt(s,"line-height")),c=parseFloat(tt(s,"font-size"));return String(l/c)})}).getOr("");var o})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const s=o??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,r,o)=>{var s;(s=e).removed||(!0===o?Yf(s):(i=>{const l=i.selection,c=i.getBody();let u=l.getRng();i.quirks.refreshContentEditable();const f=b=>{$f(b).each(g=>{b.selection.setRng(g),u=g})};!li(i)&&i.hasEditableRoot()&&f(i);const p=(b=i,g=l.getNode(),b.dom.getParent(g,v=>"true"===b.dom.getContentEditable(v)));var b,g;if(p&&i.dom.isChildOf(p,c))return Xf(p),i.hasEditableRoot()||f(i),Zb(i,u),void Yf(i);i.inline||(pe.browser.isOpera()||Xf(c),i.getWin().focus()),(pe.browser.isFirefox()||i.inline)&&(Xf(c),Zb(i,u)),Yf(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const f=a("cache_suffix");f&&(pe.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:AB(),styleSheetLoader:void 0,show:kt,hide:kt,setEnabled:kt,isEnabled:je},this.mode=(b=>{const g=bn("design"),v=bn({design:{activate:kt,deactivate:kt,editorReadOnly:!1},readonly:{activate:kt,deactivate:kt,editorReadOnly:!0}});return(h=b).serializer?mE(h):h.on("PreInit",()=>{mE(h)}),(h=>{h.on("ShowCaret",C=>{Aa(h)&&C.preventDefault()}),h.on("ObjectSelected",C=>{Aa(h)&&C.preventDefault()})})(b),{isReadOnly:()=>Aa(b),set:h=>((C,S,E,N)=>{if(N!==E.get()){if(!zt(S,N))throw new Error(`Editor mode '${N}' is invalid`);C.initialized?yE(C,E,S,N):C.on("init",()=>yE(C,E,S,N))}})(b,v.get(),g,h),get:()=>g.get(),register:(h,C)=>{v.set(((S,E,N)=>{if(Rt(kB,E))throw new Error(`Cannot override default mode ${E}`);return{...S,[E]:{...N,deactivate:()=>{try{N.deactivate()}catch(A){console.error(`problem while deactivating editor mode ${E}:`,A)}}}}})(v.get(),h,C))}};var h})(o),r.dispatch("SetupEditor",{editor:this});const p=C_(o);he(p)&&p.call(o,o)}render(){(e=>{const n=e.id;uo.setCode(m0(e));const r=()=>{_a.unbind(window,"ready",r),e.render()};if(!ia.Event.domLoaded)return void _a.bind(window,"ready",r);if(!e.getElement())return;const o=D(e.getElement()),s=y(o);var l;e.on("remove",()=>{Co(o.dom.attributes,i=>m(o,i.name)),no(o,s)}),e.ui.styleSheetLoader=Xg.forElement(o,{contentCssCors:y0(l=e),referrerPolicy:lf(l)}),df(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||_a.getParent(n,"form");a&&(e.formElement=a,c_(e)&&!Cu(e.getElement())&&(_a.insertAfter(_a.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},_a.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!d_(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=n1(e),e.notificationManager=e1(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=_a.encode(i.content))}),u_(e)&&e.on("submit",()=>{e.initialized&&e.save()}),f_(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=os.ScriptLoader,r=()=>{!t.removed&&(o=>{const s=Qa(o);return!Tt(s)||ct(Ea.get(s))})(t)&&(o=>{const s=cf(o);return ct(fi.get(s))})(t)&&sB(t)};((o,s)=>{const a=Qa(o);if(Tt(a)&&!oE(a)&&!zt(Ea.urls,a)){const i=n_(o),l=i?o.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;Ea.load(a,l).catch(()=>{Ol(o,"ThemeLoadError",Bl("theme",l,a))})}})(t,e),((o,s)=>{const a=cf(o);if("plugin"!==a&&!zt(fi.urls,a)){const i=r_(o),l=Tt(i)?o.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;fi.load(a,l).catch(()=>{Ol(o,"ModelLoadError",Bl("model",l,a))})}})(t,e),((o,s)=>{const a=m0(s),i=Kk(s);if(!uo.hasCode(a)&&"en"!==a){const l=Sr(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;o.add(l).catch(()=>{Ol(s,"LanguageLoadError",Bl("language",l,a))})}})(n,t),((o,s,a)=>{const i=sE(s,"default",a),l=(c=s,k.from(Uk(c)).filter(Sr).map(u=>({url:u,name:k.none()}))).orThunk(()=>sE(s,f0(s),""));var c;Z((c=>{const u=[],f=p=>{u.push(p)};for(let p=0;p<c.length;p++)c[p].each(f);return u})([i,l]),c=>{o.add(c.url).catch(()=>{var u,f,p;u=s,f=c.url,p=c.name.getOrUndefined(),Ol(u,"IconsLoadError",Bl("icons",f,p))})})})(n,t,e),((o,s)=>{const a=(i,l)=>{mi.load(i,l).catch(()=>{Ol(o,"PluginLoadError",Bl("plugin",l,i))})};we(h_(o),(i,l)=>{a(l,i),o.options.set("plugins",Bc(o).concat(l))}),Z(Bc(o),i=>{!(i=lt.trim(i))||mi.urls[i]||oE(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(r,r)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return li(this)}translate(e){return uo.translate(e)}getParam(e,n,r){const o=this.options;return o.isRegistered(e)||(ct(r)?o.register(e,{processor:r,default:n}):o.register(e,{processor:je,default:n})),o.isSet(e)||Ie(n)?o.get(e):n}hasPlugin(e,n){return!(!Rt(Bc(this),e)||n&&void 0===mi.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,r){this.editorCommands.addCommand(e,n,r)}addQueryStateHandler(e,n,r){this.editorCommands.addQueryStateHandler(e,n,r)}addQueryValueHandler(e,n,r){this.editorCommands.addQueryValueHandler(e,n,r)}addShortcut(e,n,r,o){this.shortcuts.add(e,n,r,o)}execCommand(e,n,r,o){return this.editorCommands.execCommand(e,n,r,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(Ra.show(e.getContainer()),Ra.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Ra.hide(e.getContainer()),Ra.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...e,load:!0},s=Cu(r)?r.value:r.innerHTML,a=n.setContent(s,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),a}return""}save(e={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...e,save:!0,element:r};let s=n.getContent(o);const a={...o,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,Cu(r))r.value=s;else{!e.is_removing&&n.inline||(r.innerHTML=s);const i=Ra.getParent(n.id,"form");i&&TB(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=o.element=r=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return np(this,e,n)}getContent(e){return((n,r={})=>{const o=(s=r,a=r.format?r.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return RC(n,o).fold(me,s=>{const a=(l=s,ep(n).editor.getContent(l));var l;return OC(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=wE({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?np(this,this.startContent,{format:"raw"}):np(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||Ra.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ra.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const r=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:r?.body)&&void 0!==n?n:null}convertURL(e,n,r){const o=this,s=o.options.get,a=w_(o);if(he(a))return a.call(o,e,r,!0,n);if(!s("convert_urls")||"link"===r||Yt(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length)return e;const i=new Yr(e);return"http"!==i.protocol&&"https"!==i.protocol&&""!==i.protocol?e:s("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,r)=>{var s;s=r,on(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,r;(n=this)._editableRoot!==(r=e)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:r}=e,o=e.getBody(),s=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ct(s?.nextSibling)&&hd.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&o&&hd.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),hd.remove(e.getContainer()),bd(n),bd(r),e.destroy()}var a})(this)}destroy(e){((n,r)=>{const{selection:o,dom:s}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),bd(o),bd(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),hd.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const wi=Be.DOM,ru=lt.each;let ou,SE=!1,or=[];const su=t=>{const e=t.type;ru(Is.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},EE=t=>{if(t!==SE){const e=Be.DOM;t?(e.bind(window,"resize",su),e.bind(window,"scroll",su)):(e.unbind(window,"resize",su),e.unbind(window,"scroll",su)),SE=t}},kE=t=>{const e=or;return or=Xt(or,n=>t!==n),Is.activeEditor===t&&(Is.activeEditor=or.length>0?or[0]:null),Is.focusedEditor===t&&(Is.focusedEditor=null),e.length!==or.length},RB="CSS1Compat"!==document.compatMode,Is={...wg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"2.1",releaseDate:"2024-07-03",i18n:uo,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",r=Yr.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)e=o.base||o.baseURL,n=o.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new Yr(r).toAbsolute(e),t.documentBaseURL=r,t.baseURI=new Yr(t.baseURL),t.suffix=n,(s=t).on("AddEditor",St(PN,s)),s.on("RemoveEditor",St(LN,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const r=t.plugin_base_urls;void 0!==r&&we(r,(o,s)=>{Vn.PluginManager.urls[s]=o})},init(t){const e=this;let n;const r=lt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var c;wi.unbind(window,"ready",s),(c=>{const u=t.onpageload;u&&u.apply(e,[])})(),l=xo((c=t,pe.browser.isIE()||pe.browser.isEdge()?(Cd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):RB?(Cd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Tt(c.selector)?wi.select(c.selector):ct(c.target)?[c.target]:[])),lt.each(l,c=>{var u;(u=e.get(c.id))&&u.initialized&&!(u.getContainer()||u.getBody()).parentNode&&(kE(u),u.unbindAllNativeEvents(),u.destroy(!0),u.removed=!0)}),l=lt.grep(l,c=>!e.get(c.id)),0===l.length?o([]):ru(l,c=>{t.inline&&c.tagName.toLowerCase()in r?Cd("Could not initialize inline editor on invalid inline target element",c):((u,f,p)=>{const b=new nu(u,f,e);i.push(b),b.on("init",()=>{++a===l.length&&o(i)}),b.targetElm=b.targetElm||p,b.render()})((u=>{let f=u.id;return f||(f=Re(u,"name").filter(p=>!wi.get(p)).getOrThunk(wi.uniqueId),u.setAttribute("id",f)),f})(c),t,c)})};return wi.bind(window,"ready",s),new Promise(a=>{n?a(n):o=i=>{a(i)}})},get(t){return 0===arguments.length?or.slice(0):Tt(t)?Ge(or,e=>e.id===t).getOr(null):x(t)&&or[t]?or[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&or.push(t),EE(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),ou||(ou=r=>{const o=e.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",ou))),t},createEditor(t,e){return this.add(new nu(t,e,this))},remove(t){const e=this;let n;if(t){if(!Tt(t))return n=t,Jt(e.get(n.id))?null:(kE(n)&&e.dispatch("RemoveEditor",{editor:n}),0===or.length&&window.removeEventListener("beforeunload",ou),n.remove(),EE(or.length>0),n);ru(wi.select(t),r=>{n=e.get(r.id),n&&e.remove(n)})}else for(let r=or.length-1;r>=0;r--)e.remove(or[r])},execCommand(t,e,n){var r;const o=this,s=Yt(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(t){case"mceAddEditor":return o.get(s)||new nu(s,n.options,o).render(),!0;case"mceRemoveEditor":{const a=o.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(t,e,n)},triggerSave:()=>{ru(or,t=>{t.save()})},addI18n:(t,e)=>{uo.add(t,e)},translate:t=>uo.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new Yr(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Yr(this.baseURL)}};Is.setup();const OB=(()=>{const t=rs();return{FakeClipboardItem:e=>({items:e,types:ln(e),getType:n=>Re(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),_E=Math.min,Si=Math.max,au=Math.round,NE=(t,e,n)=>{let r=e.x,o=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(o+=l),"r"===c[1]&&(r+=i),"c"===c[0]&&(o+=au(l/2)),"c"===c[1]&&(r+=au(i/2)),"b"===c[3]&&(o-=a),"r"===c[4]&&(r-=s),"c"===c[3]&&(o-=au(a/2)),"c"===c[4]&&(r-=au(s/2)),Ei(r,o,s,a)},Ei=(t,e,n,r)=>({x:t,y:e,w:n,h:r}),BB={inflate:(t,e,n)=>Ei(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:NE,findBestRelativePosition:(t,e,n,r)=>{for(let o=0;o<r.length;o++){const s=NE(t,e,r[o]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return r[o]}return null},intersect:(t,e)=>{const n=Si(t.x,e.x),r=Si(t.y,e.y),o=_E(t.x+t.w,e.x+e.w),s=_E(t.y+t.h,e.y+e.h);return o-n<0||s-r<0?null:Ei(n,r,o-n,s-r)},clamp:(t,e,n)=>{let r=t.x,o=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,c=Si(0,e.x-r),u=Si(0,e.y-o),f=Si(0,s-i),p=Si(0,a-l);return r+=c,o+=u,n&&(s+=c,a+=u,r-=f,o-=p),s-=f,a-=p,Ei(r,o,s-r,a-o)},create:Ei,fromClientRect:t=>Ei(t.left,t.top,t.width,t.height)},DB=(()=>{const t={},e={},n={};return{load:(r,o)=>{const s=`Script at URL "${o}" failed to load`,a=`Script at URL "${o}" did not call \`tinymce.Resource.add('${r}', data)\` within 1 second`;if(void 0!==t[r])return t[r];{const i=new Promise((l,c)=>{const u=((f,p,b=1e3)=>{let g=!1,v=null;const h=E=>(...N)=>{g||(g=!0,null!==v&&(clearTimeout(v),v=null),E.apply(null,N))},C=h(f),S=h(p);return{start:(...E)=>{g||null!==v||(v=setTimeout(()=>S.apply(null,E),b))},resolve:C,reject:S}})(l,c);e[r]=u.resolve,os.ScriptLoader.loadScript(o).then(()=>u.start(a),()=>u.reject(s))});return t[r]=i,i}},add:(r,o)=>{void 0!==e[r]&&(e[r](o),delete e[r]),t[r]=Promise.resolve(o),n[r]=o},has:r=>r in n,get:r=>n[r],unload:r=>{delete t[r],delete n[r]}}})();let Ql;try{const t="__storage_test__";Ql=window.localStorage,Ql.setItem(t,t),Ql.removeItem(t)}catch{Ql=(()=>{let e={},n=[];const r={getItem:o=>e[o]||null,setItem:(o,s)=>{n.push(o),e[o]=String(s)},key:o=>n[o],removeItem:o=>{n=n.filter(s=>s===o),delete e[o]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const PB={geom:{Rect:BB},util:{Delay:Pr,Tools:lt,VK:vt,URI:Yr,EventDispatcher:xg,Observable:wg,I18n:uo,LocalStorage:Ql,ImageUploader:t=>{const e=s1(),n=i1(t,e);return{upload:(r,o=!0)=>n.upload(r,o?a1(t):void 0)}}},dom:{EventUtils:ia,TreeWalker:gn,TextSeeker:da,DOMUtils:Be,ScriptLoader:os,RangeUtils:ya,Serializer:YC,StyleSheetLoader:Kg,ControlSelection:Ab,BookmarkManager:bl,Selection:XC,Event:ia.Event},html:{Styles:Fu,Entities:aa,Node:Kn,Schema:Es,DomParser:ui,Writer:gv,Serializer:Os},Env:pe,AddOnManager:Vn,Annotator:yb,Formatter:d1,UndoManager:f1,EditorCommands:fE,WindowManager:n1,NotificationManager:e1,EditorObservable:hE,Shortcuts:xE,Editor:nu,FocusManager:Qb,EditorManager:Is,DOM:Be.DOM,ScriptLoader:os.ScriptLoader,PluginManager:mi,ThemeManager:Ea,ModelManager:fi,IconManager:vd,Resource:DB,FakeClipboard:OB,trim:lt.trim,isArray:lt.isArray,is:lt.is,toArray:lt.toArray,makeMap:lt.makeMap,each:lt.each,map:lt.map,grep:lt.grep,inArray:lt.inArray,extend:lt.extend,walk:lt.walk,resolve:lt.resolve,explode:lt.explode,_addCacheSuffix:lt._addCacheSuffix},AE=lt.extend(Is,PB);(t=>{window.tinymce=t,window.tinyMCE=t})(AE),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(AE)}(),function(bt,Qt){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=bt.document?Qt(bt,!0):function(Zt){if(!Zt.document)throw new Error("jQuery requires a window with a document");return Qt(Zt)}:Qt(bt)}(typeof window<"u"?window:this,function(bt,Qt){"use strict";var Zt=[],Vt=Object.getPrototypeOf,ie=Zt.slice,Xe=Zt.flat?function(d){return Zt.flat.call(d)}:function(d){return Zt.concat.apply([],d)},Tn=Zt.push,en=Zt.indexOf,Gn={},xr=Gn.toString,Rn=Gn.hasOwnProperty,wr=Rn.toString,Tt=wr.call(Object),Yt={},Mt=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},it=function(d){return null!=d&&d===d.window},Jt=bt.document,En={type:!0,src:!0,nonce:!0,noModule:!0};function Ie(d,m,y){var w,_,T=(y=y||Jt).createElement("script");if(T.text=d,m)for(w in En)(_=m[w]||m.getAttribute&&m.getAttribute(w))&&T.setAttribute(w,_);y.head.appendChild(T).parentNode.removeChild(T)}function Se(d){return null==d?d+"":"object"==typeof d||"function"==typeof d?Gn[xr.call(d)]||"object":typeof d}var he=/HTML$/i,x=function(d,m){return new x.fn.init(d,m)};function Un(d){var m=!!d&&"length"in d&&d.length,y=Se(d);return!Mt(d)&&!it(d)&&("array"===y||0===m||"number"==typeof m&&0<m&&m-1 in d)}function kt(d,m){return d.nodeName&&d.nodeName.toLowerCase()===m.toLowerCase()}x.fn=x.prototype={jquery:"3.7.1",constructor:x,length:0,toArray:function(){return ie.call(this)},get:function(d){return null==d?ie.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var m=x.merge(this.constructor(),d);return m.prevObject=this,m},each:function(d){return x.each(this,d)},map:function(d){return this.pushStack(x.map(this,function(m,y){return d.call(m,y,m)}))},slice:function(){return this.pushStack(ie.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(d,m){return(m+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(d,m){return m%2}))},eq:function(d){var m=this.length,y=+d+(d<0?m:0);return this.pushStack(0<=y&&y<m?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:Tn,sort:Zt.sort,splice:Zt.splice},x.extend=x.fn.extend=function(){var d,m,y,w,_,T,O=arguments[0]||{},q=1,H=arguments.length,K=!1;for("boolean"==typeof O&&(K=O,O=arguments[q]||{},q++),"object"==typeof O||Mt(O)||(O={}),q===H&&(O=this,q--);q<H;q++)if(null!=(d=arguments[q]))for(m in d)w=d[m],"__proto__"!==m&&O!==w&&(K&&w&&(x.isPlainObject(w)||(_=Array.isArray(w)))?(y=O[m],T=_&&!Array.isArray(y)?[]:_||x.isPlainObject(y)?y:{},_=!1,O[m]=x.extend(K,T,w)):void 0!==w&&(O[m]=w));return O},x.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var m,y;return!(!d||"[object Object]"!==xr.call(d)||(m=Vt(d))&&("function"!=typeof(y=Rn.call(m,"constructor")&&m.constructor)||wr.call(y)!==Tt))},isEmptyObject:function(d){var m;for(m in d)return!1;return!0},globalEval:function(d,m,y){Ie(d,{nonce:m&&m.nonce},y)},each:function(d,m){var y,w=0;if(Un(d))for(y=d.length;w<y&&!1!==m.call(d[w],w,d[w]);w++);else for(w in d)if(!1===m.call(d[w],w,d[w]))break;return d},text:function(d){var m,y="",w=0,_=d.nodeType;if(!_)for(;m=d[w++];)y+=x.text(m);return 1===_||11===_?d.textContent:9===_?d.documentElement.textContent:3===_||4===_?d.nodeValue:y},makeArray:function(d,m){var y=m||[];return null!=d&&(Un(Object(d))?x.merge(y,"string"==typeof d?[d]:d):Tn.call(y,d)),y},inArray:function(d,m,y){return null==m?-1:en.call(m,d,y)},isXMLDoc:function(d){var y=d&&(d.ownerDocument||d).documentElement;return!he.test(d&&d.namespaceURI||y&&y.nodeName||"HTML")},merge:function(d,m){for(var y=+m.length,w=0,_=d.length;w<y;w++)d[_++]=m[w];return d.length=_,d},grep:function(d,m,y){for(var w=[],_=0,T=d.length,O=!y;_<T;_++)!m(d[_],_)!==O&&w.push(d[_]);return w},map:function(d,m,y){var w,_,T=0,O=[];if(Un(d))for(w=d.length;T<w;T++)null!=(_=m(d[T],T,y))&&O.push(_);else for(T in d)null!=(_=m(d[T],T,y))&&O.push(_);return Xe(O)},guid:1,support:Yt}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=Zt[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,m){Gn["[object "+m+"]"]=m.toLowerCase()});var On=Zt.pop,zs=Zt.sort,mt=Zt.splice,me="[\\x20\\t\\r\\n\\f]",Zr=new RegExp("^"+me+"+|((?:^|[^\\\\])(?:\\\\.)*)"+me+"+$","g");x.contains=function(d,m){var y=m&&m.parentNode;return d===y||!(!y||1!==y.nodeType||!(d.contains?d.contains(y):d.compareDocumentPosition&&16&d.compareDocumentPosition(y)))};var St=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function bo(d,m){return m?"\0"===d?"\ufffd":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}x.escapeSelector=function(d){return(d+"").replace(St,bo)};var fr=Jt,vo=Tn;!function(){var d,m,y,w,_,T,O,q,H,K,et=vo,at=x.expando,J=0,ut=0,Pt=tn(),le=tn(),D=tn(),nn=tn(),pn=function(M,$){return M===$&&(_=!0),0},cn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",_r="(?:\\\\[\\da-fA-F]{1,6}"+me+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ft="\\["+me+"*("+_r+")(?:"+me+"*([*^$|!~]?=)"+me+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+_r+"))|)"+me+"*\\]",Je=":("+_r+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Ft+")*)|.*)\\)|)",Te=new RegExp(me+"+","g"),Le=new RegExp("^"+me+"*,"+me+"*"),oo=new RegExp("^"+me+"*([>+~]|"+me+")"+me+"*"),ir=new RegExp(me+"|>"),lr=new RegExp(Je),Cs=new RegExp("^"+_r+"$"),$n={ID:new RegExp("^#("+_r+")"),CLASS:new RegExp("^\\.("+_r+")"),TAG:new RegExp("^("+_r+"|[*])"),ATTR:new RegExp("^"+Ft),PSEUDO:new RegExp("^"+Je),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+me+"*(even|odd|(([+-]|)(\\d*)n|)"+me+"*(?:([+-]|)"+me+"*(\\d+)|))"+me+"*\\)|)","i"),bool:new RegExp("^(?:"+cn+")$","i"),needsContext:new RegExp("^"+me+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+me+"*((?:-\\d)?\\d*)"+me+"*\\)|)(?=[^-]|$)","i")},gr=/^(?:input|select|textarea|button)$/i,Ao=/^h\d$/i,er=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ee=/[+~]/,$e=new RegExp("\\\\[\\da-fA-F]{1,6}"+me+"?|\\\\([^\\r\\n\\f])","g"),_n=function(M,$){var tt="0x"+M.slice(1)-65536;return $||(tt<0?String.fromCharCode(tt+65536):String.fromCharCode(tt>>10|55296,1023&tt|56320))},$r=function(){so()},Nn=Ro(function(M){return!0===M.disabled&&kt(M,"fieldset")},{dir:"parentNode",next:"legend"});try{et.apply(Zt=ie.call(fr.childNodes),fr.childNodes)}catch{et={apply:function($,tt){vo.apply($,ie.call(tt))},call:function($){vo.apply($,ie.call(arguments,1))}}}function se(M,$,tt,nt){var dt,Ht,$t,jt,Lt,ke,Kt,ge=$&&$.ownerDocument,be=$?$.nodeType:9;if(tt=tt||[],"string"!=typeof M||!M||1!==be&&9!==be&&11!==be)return tt;if(!nt&&(so($),$=$||T,q)){if(11!==be&&(Lt=er.exec(M)))if(dt=Lt[1]){if(9===be){if(!($t=$.getElementById(dt)))return tt;if($t.id===dt)return et.call(tt,$t),tt}else if(ge&&($t=ge.getElementById(dt))&&se.contains($,$t)&&$t.id===dt)return et.call(tt,$t),tt}else{if(Lt[2])return et.apply(tt,$.getElementsByTagName(M)),tt;if((dt=Lt[3])&&$.getElementsByClassName)return et.apply(tt,$.getElementsByClassName(dt)),tt}if(!(nn[M+" "]||H&&H.test(M))){if(Kt=M,ge=$,1===be&&(ir.test(M)||oo.test(M))){for((ge=Ee.test(M)&&To($.parentNode)||$)==$&&Yt.scope||((jt=$.getAttribute("id"))?jt=x.escapeSelector(jt):$.setAttribute("id",jt=at)),Ht=(ke=Nr(M)).length;Ht--;)ke[Ht]=(jt?"#"+jt:":scope")+" "+ta(ke[Ht]);Kt=ke.join(",")}try{return et.apply(tt,ge.querySelectorAll(Kt)),tt}catch{nn(M,!0)}finally{jt===at&&$.removeAttribute("id")}}}return Ui(M.replace(Zr,"$1"),$,tt,nt)}function tn(){var M=[];return function $(tt,nt){return M.push(tt+" ")>m.cacheLength&&delete $[M.shift()],$[tt+" "]=nt}}function rn(M){return M[at]=!0,M}function Oe(M){var $=T.createElement("fieldset");try{return!!M($)}catch{return!1}finally{$.parentNode&&$.parentNode.removeChild($),$=null}}function hr(M){return function($){return kt($,"input")&&$.type===M}}function xs(M){return function($){return(kt($,"input")||kt($,"button"))&&$.type===M}}function Js(M){return function($){return"form"in $?$.parentNode&&!1===$.disabled?"label"in $?"label"in $.parentNode?$.parentNode.disabled===M:$.disabled===M:$.isDisabled===M||$.isDisabled!==!M&&Nn($)===M:$.disabled===M:"label"in $&&$.disabled===M}}function Zo(M){return rn(function($){return $=+$,rn(function(tt,nt){for(var dt,Ht=M([],tt.length,$),$t=Ht.length;$t--;)tt[dt=Ht[$t]]&&(tt[dt]=!(nt[dt]=tt[dt]))})})}function To(M){return M&&typeof M.getElementsByTagName<"u"&&M}function so(M){var $,tt=M?M.ownerDocument||M:fr;return tt!=T&&9===tt.nodeType&&tt.documentElement&&(O=(T=tt).documentElement,q=!x.isXMLDoc(T),K=O.matches||O.webkitMatchesSelector||O.msMatchesSelector,O.msMatchesSelector&&fr!=T&&($=T.defaultView)&&$.top!==$&&$.addEventListener("unload",$r),Yt.getById=Oe(function(nt){return O.appendChild(nt).id=x.expando,!T.getElementsByName||!T.getElementsByName(x.expando).length}),Yt.disconnectedMatch=Oe(function(nt){return K.call(nt,"*")}),Yt.scope=Oe(function(){return T.querySelectorAll(":scope")}),Yt.cssHas=Oe(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Yt.getById?(m.filter.ID=function(nt){var dt=nt.replace($e,_n);return function(Ht){return Ht.getAttribute("id")===dt}},m.find.ID=function(nt,dt){if(typeof dt.getElementById<"u"&&q){var Ht=dt.getElementById(nt);return Ht?[Ht]:[]}}):(m.filter.ID=function(nt){var dt=nt.replace($e,_n);return function(Ht){var $t=typeof Ht.getAttributeNode<"u"&&Ht.getAttributeNode("id");return $t&&$t.value===dt}},m.find.ID=function(nt,dt){if(typeof dt.getElementById<"u"&&q){var Ht,$t,jt,Lt=dt.getElementById(nt);if(Lt){if((Ht=Lt.getAttributeNode("id"))&&Ht.value===nt)return[Lt];for(jt=dt.getElementsByName(nt),$t=0;Lt=jt[$t++];)if((Ht=Lt.getAttributeNode("id"))&&Ht.value===nt)return[Lt]}return[]}}),m.find.TAG=function(nt,dt){return typeof dt.getElementsByTagName<"u"?dt.getElementsByTagName(nt):dt.querySelectorAll(nt)},m.find.CLASS=function(nt,dt){if(typeof dt.getElementsByClassName<"u"&&q)return dt.getElementsByClassName(nt)},H=[],Oe(function(nt){var dt;O.appendChild(nt).innerHTML="<a id='"+at+"' href='' disabled='disabled'></a><select id='"+at+"-\r\\' disabled='disabled'><option selected=''></option></select>",nt.querySelectorAll("[selected]").length||H.push("\\["+me+"*(?:value|"+cn+")"),nt.querySelectorAll("[id~="+at+"-]").length||H.push("~="),nt.querySelectorAll("a#"+at+"+*").length||H.push(".#.+[+~]"),nt.querySelectorAll(":checked").length||H.push(":checked"),(dt=T.createElement("input")).setAttribute("type","hidden"),nt.appendChild(dt).setAttribute("name","D"),O.appendChild(nt).disabled=!0,2!==nt.querySelectorAll(":disabled").length&&H.push(":enabled",":disabled"),(dt=T.createElement("input")).setAttribute("name",""),nt.appendChild(dt),nt.querySelectorAll("[name='']").length||H.push("\\["+me+"*name"+me+"*="+me+"*(?:''|\"\")")}),Yt.cssHas||H.push(":has"),H=H.length&&new RegExp(H.join("|")),pn=function(nt,dt){if(nt===dt)return _=!0,0;var Ht=!nt.compareDocumentPosition-!dt.compareDocumentPosition;return Ht||(1&(Ht=(nt.ownerDocument||nt)==(dt.ownerDocument||dt)?nt.compareDocumentPosition(dt):1)||!Yt.sortDetached&&dt.compareDocumentPosition(nt)===Ht?nt===T||nt.ownerDocument==fr&&se.contains(fr,nt)?-1:dt===T||dt.ownerDocument==fr&&se.contains(fr,dt)?1:w?en.call(w,nt)-en.call(w,dt):0:4&Ht?-1:1)}),T}for(d in se.matches=function(M,$){return se(M,null,null,$)},se.matchesSelector=function(M,$){if(so(M),q&&!nn[$+" "]&&(!H||!H.test($)))try{var tt=K.call(M,$);if(tt||Yt.disconnectedMatch||M.document&&11!==M.document.nodeType)return tt}catch{nn($,!0)}return 0<se($,T,null,[M]).length},se.contains=function(M,$){return(M.ownerDocument||M)!=T&&so(M),x.contains(M,$)},se.attr=function(M,$){(M.ownerDocument||M)!=T&&so(M);var tt=m.attrHandle[$.toLowerCase()],nt=tt&&Rn.call(m.attrHandle,$.toLowerCase())?tt(M,$,!q):void 0;return void 0!==nt?nt:M.getAttribute($)},se.error=function(M){throw new Error("Syntax error, unrecognized expression: "+M)},x.uniqueSort=function(M){var $,tt=[],nt=0,dt=0;if(_=!Yt.sortStable,w=!Yt.sortStable&&ie.call(M,0),zs.call(M,pn),_){for(;$=M[dt++];)$===M[dt]&&(nt=tt.push(dt));for(;nt--;)mt.call(M,tt[nt],1)}return w=null,M},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(ie.apply(this)))},(m=x.expr={cacheLength:50,createPseudo:rn,match:$n,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(M){return M[1]=M[1].replace($e,_n),M[3]=(M[3]||M[4]||M[5]||"").replace($e,_n),"~="===M[2]&&(M[3]=" "+M[3]+" "),M.slice(0,4)},CHILD:function(M){return M[1]=M[1].toLowerCase(),"nth"===M[1].slice(0,3)?(M[3]||se.error(M[0]),M[4]=+(M[4]?M[5]+(M[6]||1):2*("even"===M[3]||"odd"===M[3])),M[5]=+(M[7]+M[8]||"odd"===M[3])):M[3]&&se.error(M[0]),M},PSEUDO:function(M){var $,tt=!M[6]&&M[2];return $n.CHILD.test(M[0])?null:(M[3]?M[2]=M[4]||M[5]||"":tt&&lr.test(tt)&&($=Nr(tt,!0))&&($=tt.indexOf(")",tt.length-$)-tt.length)&&(M[0]=M[0].slice(0,$),M[2]=tt.slice(0,$)),M.slice(0,3))}},filter:{TAG:function(M){var $=M.replace($e,_n).toLowerCase();return"*"===M?function(){return!0}:function(tt){return kt(tt,$)}},CLASS:function(M){var $=Pt[M+" "];return $||($=new RegExp("(^|"+me+")"+M+"("+me+"|$)"))&&Pt(M,function(tt){return $.test("string"==typeof tt.className&&tt.className||typeof tt.getAttribute<"u"&&tt.getAttribute("class")||"")})},ATTR:function(M,$,tt){return function(nt){var dt=se.attr(nt,M);return null==dt?"!="===$:!$||(dt+="","="===$?dt===tt:"!="===$?dt!==tt:"^="===$?tt&&0===dt.indexOf(tt):"*="===$?tt&&-1<dt.indexOf(tt):"$="===$?tt&&dt.slice(-tt.length)===tt:"~="===$?-1<(" "+dt.replace(Te," ")+" ").indexOf(tt):"|="===$&&(dt===tt||dt.slice(0,tt.length+1)===tt+"-"))}},CHILD:function(M,$,tt,nt,dt){var Ht="nth"!==M.slice(0,3),$t="last"!==M.slice(-4),jt="of-type"===$;return 1===nt&&0===dt?function(Lt){return!!Lt.parentNode}:function(Lt,ke,Kt){var ge,be,ae,ue,Ye,dn=Ht!==$t?"nextSibling":"previousSibling",Wn=Lt.parentNode,Pn=jt&&Lt.nodeName.toLowerCase(),Ar=!Kt&&!jt,We=!1;if(Wn){if(Ht){for(;dn;){for(ae=Lt;ae=ae[dn];)if(jt?kt(ae,Pn):1===ae.nodeType)return!1;Ye=dn="only"===M&&!Ye&&"nextSibling"}return!0}if(Ye=[$t?Wn.firstChild:Wn.lastChild],$t&&Ar){for(We=(ue=(ge=(be=Wn[at]||(Wn[at]={}))[M]||[])[0]===J&&ge[1])&&ge[2],ae=ue&&Wn.childNodes[ue];ae=++ue&&ae&&ae[dn]||(We=ue=0)||Ye.pop();)if(1===ae.nodeType&&++We&&ae===Lt){be[M]=[J,ue,We];break}}else if(Ar&&(We=ue=(ge=(be=Lt[at]||(Lt[at]={}))[M]||[])[0]===J&&ge[1]),!1===We)for(;(ae=++ue&&ae&&ae[dn]||(We=ue=0)||Ye.pop())&&(!(jt?kt(ae,Pn):1===ae.nodeType)||!++We||(Ar&&((be=ae[at]||(ae[at]={}))[M]=[J,We]),ae!==Lt)););return(We-=dt)===nt||We%nt==0&&0<=We/nt}}},PSEUDO:function(M,$){var tt,nt=m.pseudos[M]||m.setFilters[M.toLowerCase()]||se.error("unsupported pseudo: "+M);return nt[at]?nt($):1<nt.length?(tt=[M,M,"",$],m.setFilters.hasOwnProperty(M.toLowerCase())?rn(function(dt,Ht){for(var $t,jt=nt(dt,$),Lt=jt.length;Lt--;)dt[$t=en.call(dt,jt[Lt])]=!(Ht[$t]=jt[Lt])}):function(dt){return nt(dt,0,tt)}):nt}},pseudos:{not:rn(function(M){var $=[],tt=[],nt=Jo(M.replace(Zr,"$1"));return nt[at]?rn(function(dt,Ht,$t,jt){for(var Lt,ke=nt(dt,null,jt,[]),Kt=dt.length;Kt--;)(Lt=ke[Kt])&&(dt[Kt]=!(Ht[Kt]=Lt))}):function(dt,Ht,$t){return $[0]=dt,nt($,null,$t,tt),$[0]=null,!tt.pop()}}),has:rn(function(M){return function($){return 0<se(M,$).length}}),contains:rn(function(M){return M=M.replace($e,_n),function($){return-1<($.textContent||x.text($)).indexOf(M)}}),lang:rn(function(M){return Cs.test(M||"")||se.error("unsupported lang: "+M),M=M.replace($e,_n).toLowerCase(),function($){var tt;do{if(tt=q?$.lang:$.getAttribute("xml:lang")||$.getAttribute("lang"))return(tt=tt.toLowerCase())===M||0===tt.indexOf(M+"-")}while(($=$.parentNode)&&1===$.nodeType);return!1}}),target:function(M){var $=bt.location&&bt.location.hash;return $&&$.slice(1)===M.id},root:function(M){return M===O},focus:function(M){return M===function(){try{return T.activeElement}catch{}}()&&T.hasFocus()&&!!(M.type||M.href||~M.tabIndex)},enabled:Js(!1),disabled:Js(!0),checked:function(M){return kt(M,"input")&&!!M.checked||kt(M,"option")&&!!M.selected},selected:function(M){return!0===M.selected},empty:function(M){for(M=M.firstChild;M;M=M.nextSibling)if(M.nodeType<6)return!1;return!0},parent:function(M){return!m.pseudos.empty(M)},header:function(M){return Ao.test(M.nodeName)},input:function(M){return gr.test(M.nodeName)},button:function(M){return kt(M,"input")&&"button"===M.type||kt(M,"button")},text:function(M){var $;return kt(M,"input")&&"text"===M.type&&(null==($=M.getAttribute("type"))||"text"===$.toLowerCase())},first:Zo(function(){return[0]}),last:Zo(function(M,$){return[$-1]}),eq:Zo(function(M,$,tt){return[tt<0?tt+$:tt]}),even:Zo(function(M,$){for(var tt=0;tt<$;tt+=2)M.push(tt);return M}),odd:Zo(function(M,$){for(var tt=1;tt<$;tt+=2)M.push(tt);return M}),lt:Zo(function(M,$,tt){var nt;for(nt=tt<0?tt+$:$<tt?$:tt;0<=--nt;)M.push(nt);return M}),gt:Zo(function(M,$,tt){for(var nt=tt<0?tt+$:tt;++nt<$;)M.push(nt);return M})}}).pseudos.nth=m.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})m.pseudos[d]=hr(d);for(d in{submit:!0,reset:!0})m.pseudos[d]=xs(d);function Wr(){}function Nr(M,$){var tt,nt,dt,Ht,$t,jt,Lt,ke=le[M+" "];if(ke)return $?0:ke.slice(0);for($t=M,jt=[],Lt=m.preFilter;$t;){for(Ht in tt&&!(nt=Le.exec($t))||(nt&&($t=$t.slice(nt[0].length)||$t),jt.push(dt=[])),tt=!1,(nt=oo.exec($t))&&(tt=nt.shift(),dt.push({value:tt,type:nt[0].replace(Zr," ")}),$t=$t.slice(tt.length)),m.filter)!(nt=$n[Ht].exec($t))||Lt[Ht]&&!(nt=Lt[Ht](nt))||(tt=nt.shift(),dt.push({value:tt,type:Ht,matches:nt}),$t=$t.slice(tt.length));if(!tt)break}return $?$t.length:$t?se.error(M):le(M,jt).slice(0)}function ta(M){for(var $=0,tt=M.length,nt="";$<tt;$++)nt+=M[$].value;return nt}function Ro(M,$,tt){var nt=$.dir,dt=$.next,Ht=dt||nt,$t=tt&&"parentNode"===Ht,jt=ut++;return $.first?function(Lt,ke,Kt){for(;Lt=Lt[nt];)if(1===Lt.nodeType||$t)return M(Lt,ke,Kt);return!1}:function(Lt,ke,Kt){var ge,be,ae=[J,jt];if(Kt){for(;Lt=Lt[nt];)if((1===Lt.nodeType||$t)&&M(Lt,ke,Kt))return!0}else for(;Lt=Lt[nt];)if(1===Lt.nodeType||$t)if(be=Lt[at]||(Lt[at]={}),dt&&kt(Lt,dt))Lt=Lt[nt]||Lt;else{if((ge=be[Ht])&&ge[0]===J&&ge[1]===jt)return ae[2]=ge[2];if((be[Ht]=ae)[2]=M(Lt,ke,Kt))return!0}return!1}}function ws(M){return 1<M.length?function($,tt,nt){for(var dt=M.length;dt--;)if(!M[dt]($,tt,nt))return!1;return!0}:M[0]}function ao(M,$,tt,nt,dt){for(var Ht,$t=[],jt=0,Lt=M.length,ke=null!=$;jt<Lt;jt++)(Ht=M[jt])&&(tt&&!tt(Ht,nt,dt)||($t.push(Ht),ke&&$.push(jt)));return $t}function io(M,$,tt,nt,dt,Ht){return nt&&!nt[at]&&(nt=io(nt)),dt&&!dt[at]&&(dt=io(dt,Ht)),rn(function($t,jt,Lt,ke){var Kt,ge,be,ae,ue=[],Ye=[],dn=jt.length,Wn=$t||function(Ar,We,Oo){for(var Ln=0,ts=We.length;Ln<ts;Ln++)se(Ar,We[Ln],Oo);return Oo}($||"*",Lt.nodeType?[Lt]:Lt,[]),Pn=!M||!$t&&$?Wn:ao(Wn,ue,M,Lt,ke);if(tt?tt(Pn,ae=dt||($t?M:dn||nt)?[]:jt,Lt,ke):ae=Pn,nt)for(Kt=ao(ae,Ye),nt(Kt,[],Lt,ke),ge=Kt.length;ge--;)(be=Kt[ge])&&(ae[Ye[ge]]=!(Pn[Ye[ge]]=be));if($t){if(dt||M){if(dt){for(Kt=[],ge=ae.length;ge--;)(be=ae[ge])&&Kt.push(Pn[ge]=be);dt(null,ae=[],Kt,ke)}for(ge=ae.length;ge--;)(be=ae[ge])&&-1<(Kt=dt?en.call($t,be):ue[ge])&&($t[Kt]=!(jt[Kt]=be))}}else ae=ao(ae===jt?ae.splice(dn,ae.length):ae),dt?dt(null,jt,ae,ke):et.apply(jt,ae)})}function zi(M){for(var $,tt,nt,dt=M.length,Ht=m.relative[M[0].type],$t=Ht||m.relative[" "],jt=Ht?1:0,Lt=Ro(function(ge){return ge===$},$t,!0),ke=Ro(function(ge){return-1<en.call($,ge)},$t,!0),Kt=[function(ge,be,ae){var ue=!Ht&&(ae||be!=y)||(($=be).nodeType?Lt(ge,be,ae):ke(ge,be,ae));return $=null,ue}];jt<dt;jt++)if(tt=m.relative[M[jt].type])Kt=[Ro(ws(Kt),tt)];else{if((tt=m.filter[M[jt].type].apply(null,M[jt].matches))[at]){for(nt=++jt;nt<dt&&!m.relative[M[nt].type];nt++);return io(1<jt&&ws(Kt),1<jt&&ta(M.slice(0,jt-1).concat({value:" "===M[jt-2].type?"*":""})).replace(Zr,"$1"),tt,jt<nt&&zi(M.slice(jt,nt)),nt<dt&&zi(M=M.slice(nt)),nt<dt&&ta(M))}Kt.push(tt)}return ws(Kt)}function Jo(M,$){var tt,nt,dt,Ht,$t,jt,Lt=[],ke=[],Kt=D[M+" "];if(!Kt){for($||($=Nr(M)),tt=$.length;tt--;)(Kt=zi($[tt]))[at]?Lt.push(Kt):ke.push(Kt);(Kt=D(M,(nt=ke,Ht=0<(dt=Lt).length,$t=0<nt.length,jt=function(ge,be,ae,ue,Ye){var dn,Wn,Pn,Ar=0,We="0",Oo=ge&&[],Ln=[],ts=y,za=ge||$t&&m.find.TAG("*",Ye),Ua=J+=null==ts?1:Math.random()||.1,fc=za.length;for(Ye&&(y=be==T||be||Ye);We!==fc&&null!=(dn=za[We]);We++){if($t&&dn){for(Wn=0,be||dn.ownerDocument==T||(so(dn),ae=!q);Pn=nt[Wn++];)if(Pn(dn,be||T,ae)){et.call(ue,dn);break}Ye&&(J=Ua)}Ht&&((dn=!Pn&&dn)&&Ar--,ge&&Oo.push(dn))}if(Ar+=We,Ht&&We!==Ar){for(Wn=0;Pn=dt[Wn++];)Pn(Oo,Ln,be,ae);if(ge){if(0<Ar)for(;We--;)Oo[We]||Ln[We]||(Ln[We]=On.call(ue));Ln=ao(Ln)}et.apply(ue,Ln),Ye&&!ge&&0<Ln.length&&1<Ar+dt.length&&x.uniqueSort(ue)}return Ye&&(J=Ua,y=ts),Oo},Ht?rn(jt):jt))).selector=M}return Kt}function Ui(M,$,tt,nt){var dt,Ht,$t,jt,Lt,ke="function"==typeof M&&M,Kt=!nt&&Nr(M=ke.selector||M);if(tt=tt||[],1===Kt.length){if(2<(Ht=Kt[0]=Kt[0].slice(0)).length&&"ID"===($t=Ht[0]).type&&9===$.nodeType&&q&&m.relative[Ht[1].type]){if(!($=(m.find.ID($t.matches[0].replace($e,_n),$)||[])[0]))return tt;ke&&($=$.parentNode),M=M.slice(Ht.shift().value.length)}for(dt=$n.needsContext.test(M)?0:Ht.length;dt--&&!m.relative[jt=($t=Ht[dt]).type];)if((Lt=m.find[jt])&&(nt=Lt($t.matches[0].replace($e,_n),Ee.test(Ht[0].type)&&To($.parentNode)||$))){if(Ht.splice(dt,1),!(M=nt.length&&ta(Ht)))return et.apply(tt,nt),tt;break}}return(ke||Jo(M,Kt))(nt,$,!q,tt,!$||Ee.test(M)&&To($.parentNode)||$),tt}Wr.prototype=m.filters=m.pseudos,m.setFilters=new Wr,Yt.sortStable=at.split("").sort(pn).join("")===at,so(),Yt.sortDetached=Oe(function(M){return 1&M.compareDocumentPosition(T.createElement("fieldset"))}),x.find=se,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,se.compile=Jo,se.select=Ui,se.setDocument=so,se.tokenize=Nr,se.escape=x.escapeSelector,se.getText=x.text,se.isXML=x.isXMLDoc,se.selectors=x.expr,se.support=x.support,se.uniqueSort=x.uniqueSort}();var Qn=function(d,m,y){for(var w=[],_=void 0!==y;(d=d[m])&&9!==d.nodeType;)if(1===d.nodeType){if(_&&x(d).is(y))break;w.push(d)}return w},xe=function(d,m){for(var y=[];d;d=d.nextSibling)1===d.nodeType&&d!==m&&y.push(d);return y},je=x.expr.match.needsContext,k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function yo(d,m,y){return Mt(m)?x.grep(d,function(w,_){return!!m.call(w,_,w)!==y}):m.nodeType?x.grep(d,function(w){return w===m!==y}):"string"!=typeof m?x.grep(d,function(w){return-1<en.call(m,w)!==y}):x.filter(m,d,y)}x.filter=function(d,m,y){var w=m[0];return y&&(d=":not("+d+")"),1===m.length&&1===w.nodeType?x.find.matchesSelector(w,d)?[w]:[]:x.find.matches(d,x.grep(m,function(_){return 1===_.nodeType}))},x.fn.extend({find:function(d){var m,y,w=this.length,_=this;if("string"!=typeof d)return this.pushStack(x(d).filter(function(){for(m=0;m<w;m++)if(x.contains(_[m],this))return!0}));for(y=this.pushStack([]),m=0;m<w;m++)x.find(d,_[m],y);return 1<w?x.uniqueSort(y):y},filter:function(d){return this.pushStack(yo(this,d||[],!1))},not:function(d){return this.pushStack(yo(this,d||[],!0))},is:function(d){return!!yo(this,"string"==typeof d&&je.test(d)?x(d):d||[],!1).length}});var Nt,oe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(d,m,y){var w,_;if(!d)return this;if(y=y||Nt,"string"==typeof d){if(!(w="<"===d[0]&&">"===d[d.length-1]&&3<=d.length?[null,d,null]:oe.exec(d))||!w[1]&&m)return!m||m.jquery?(m||y).find(d):this.constructor(m).find(d);if(w[1]){if(x.merge(this,x.parseHTML(w[1],(m=m instanceof x?m[0]:m)&&m.nodeType?m.ownerDocument||m:Jt,!0)),k.test(w[1])&&x.isPlainObject(m))for(w in m)Mt(this[w])?this[w](m[w]):this.attr(w,m[w]);return this}return(_=Jt.getElementById(w[2]))&&(this[0]=_,this.length=1),this}return d.nodeType?(this[0]=d,this.length=1,this):Mt(d)?void 0!==y.ready?y.ready(d):d(x):x.makeArray(d,this)}).prototype=x.fn,Nt=x(Jt);var de=/^(?:parents|prev(?:Until|All))/,Rt={children:!0,contents:!0,next:!0,prev:!0};function Ae(d,m){for(;(d=d[m])&&1!==d.nodeType;);return d}x.fn.extend({has:function(d){var m=x(d,this),y=m.length;return this.filter(function(){for(var w=0;w<y;w++)if(x.contains(this,m[w]))return!0})},closest:function(d,m){var y,w=0,_=this.length,T=[],O="string"!=typeof d&&x(d);if(!je.test(d))for(;w<_;w++)for(y=this[w];y&&y!==m;y=y.parentNode)if(y.nodeType<11&&(O?-1<O.index(y):1===y.nodeType&&x.find.matchesSelector(y,d))){T.push(y);break}return this.pushStack(1<T.length?x.uniqueSort(T):T)},index:function(d){return d?"string"==typeof d?en.call(x(d),this[0]):en.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,m){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(d,m))))},addBack:function(d){return this.add(null==d?this.prevObject:this.prevObject.filter(d))}}),x.each({parent:function(d){var m=d.parentNode;return m&&11!==m.nodeType?m:null},parents:function(d){return Qn(d,"parentNode")},parentsUntil:function(d,m,y){return Qn(d,"parentNode",y)},next:function(d){return Ae(d,"nextSibling")},prev:function(d){return Ae(d,"previousSibling")},nextAll:function(d){return Qn(d,"nextSibling")},prevAll:function(d){return Qn(d,"previousSibling")},nextUntil:function(d,m,y){return Qn(d,"nextSibling",y)},prevUntil:function(d,m,y){return Qn(d,"previousSibling",y)},siblings:function(d){return xe((d.parentNode||{}).firstChild,d)},children:function(d){return xe(d.firstChild)},contents:function(d){return null!=d.contentDocument&&Vt(d.contentDocument)?d.contentDocument:(kt(d,"template")&&(d=d.content||d),x.merge([],d.childNodes))}},function(d,m){x.fn[d]=function(y,w){var _=x.map(this,m,y);return"Until"!==d.slice(-5)&&(w=y),w&&"string"==typeof w&&(_=x.filter(w,_)),1<this.length&&(Rt[d]||x.uniqueSort(_),de.test(d)&&_.reverse()),this.pushStack(_)}});var re=/[^\x20\t\r\n\f]+/g;function Z(d){return d}function Co(d){throw d}function zr(d,m,y,w){var _;try{d&&Mt(_=d.promise)?_.call(d).done(m).fail(y):d&&Mt(_=d.then)?_.call(d,m,y):m.apply(void 0,[d].slice(w))}catch(T){y.apply(void 0,[T])}}x.Callbacks=function(d){var y;d="string"==typeof d?(y={},x.each(d.match(re)||[],function(J,ut){y[ut]=!0}),y):x.extend({},d);var w,_,T,O,q=[],H=[],K=-1,et=function(){for(O=O||d.once,T=w=!0;H.length;K=-1)for(_=H.shift();++K<q.length;)!1===q[K].apply(_[0],_[1])&&d.stopOnFalse&&(K=q.length,_=!1);d.memory||(_=!1),w=!1,O&&(q=_?[]:"")},at={add:function(){return q&&(_&&!w&&(K=q.length-1,H.push(_)),function J(ut){x.each(ut,function(Pt,le){Mt(le)?d.unique&&at.has(le)||q.push(le):le&&le.length&&"string"!==Se(le)&&J(le)})}(arguments),_&&!w&&et()),this},remove:function(){return x.each(arguments,function(J,ut){for(var Pt;-1<(Pt=x.inArray(ut,q,Pt));)q.splice(Pt,1),Pt<=K&&K--}),this},has:function(J){return J?-1<x.inArray(J,q):0<q.length},empty:function(){return q&&(q=[]),this},disable:function(){return O=H=[],q=_="",this},disabled:function(){return!q},lock:function(){return O=H=[],_||w||(q=_=""),this},locked:function(){return!!O},fireWith:function(J,ut){return O||(ut=[J,(ut=ut||[]).slice?ut.slice():ut],H.push(ut),w||et()),this},fire:function(){return at.fireWith(this,arguments),this},fired:function(){return!!T}};return at},x.extend({Deferred:function(d){var m=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],y="pending",w={state:function(){return y},always:function(){return _.done(arguments).fail(arguments),this},catch:function(T){return w.then(null,T)},pipe:function(){var T=arguments;return x.Deferred(function(O){x.each(m,function(q,H){var K=Mt(T[H[4]])&&T[H[4]];_[H[1]](function(){var et=K&&K.apply(this,arguments);et&&Mt(et.promise)?et.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[H[0]+"With"](this,K?[et]:arguments)})}),T=null}).promise()},then:function(T,O,q){var H=0;function K(et,at,J,ut){return function(){var Pt=this,le=arguments,D=function(){var pn,cn;if(!(et<H)){if((pn=J.apply(Pt,le))===at.promise())throw new TypeError("Thenable self-resolution");Mt(cn=pn&&("object"==typeof pn||"function"==typeof pn)&&pn.then)?ut?cn.call(pn,K(H,at,Z,ut),K(H,at,Co,ut)):(H++,cn.call(pn,K(H,at,Z,ut),K(H,at,Co,ut),K(H,at,Z,at.notifyWith))):(J!==Z&&(Pt=void 0,le=[pn]),(ut||at.resolveWith)(Pt,le))}},nn=ut?D:function(){try{D()}catch(pn){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(pn,nn.error),H<=et+1&&(J!==Co&&(Pt=void 0,le=[pn]),at.rejectWith(Pt,le))}};et?nn():(x.Deferred.getErrorHook?nn.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(nn.error=x.Deferred.getStackHook()),bt.setTimeout(nn))}}return x.Deferred(function(et){m[0][3].add(K(0,et,Mt(q)?q:Z,et.notifyWith)),m[1][3].add(K(0,et,Mt(T)?T:Z)),m[2][3].add(K(0,et,Mt(O)?O:Co))}).promise()},promise:function(T){return null!=T?x.extend(T,w):w}},_={};return x.each(m,function(T,O){var q=O[2],H=O[5];w[O[1]]=q.add,H&&q.add(function(){y=H},m[3-T][2].disable,m[3-T][3].disable,m[0][2].lock,m[0][3].lock),q.add(O[3].fire),_[O[0]]=function(){return _[O[0]+"With"](this===_?void 0:this,arguments),this},_[O[0]+"With"]=q.fireWith}),w.promise(_),d&&d.call(_,_),_},when:function(d){var m=arguments.length,y=m,w=Array(y),_=ie.call(arguments),T=x.Deferred(),O=function(q){return function(H){w[q]=this,_[q]=1<arguments.length?ie.call(arguments):H,--m||T.resolveWith(w,_)}};if(m<=1&&(zr(d,T.done(O(y)).resolve,T.reject,!m),"pending"===T.state()||Mt(_[y]&&_[y].then)))return T.then();for(;y--;)zr(_[y],O(y),T.reject);return T.promise()}});var Xt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(d,m){bt.console&&bt.console.warn&&d&&Xt.test(d.name)&&bt.console.warn("jQuery.Deferred exception: "+d.message,d.stack,m)},x.readyException=function(d){bt.setTimeout(function(){throw d})};var Wo=x.Deferred();function xn(){Jt.removeEventListener("DOMContentLoaded",xn),bt.removeEventListener("load",xn),x.ready()}x.fn.ready=function(d){return Wo.then(d).catch(function(m){x.readyException(m)}),this},x.extend({isReady:!1,readyWait:1,ready:function(d){(!0===d?--x.readyWait:x.isReady)||(x.isReady=!0)!==d&&0<--x.readyWait||Wo.resolveWith(Jt,[x])}}),x.ready.then=Wo.then,"complete"===Jt.readyState||"loading"!==Jt.readyState&&!Jt.documentElement.doScroll?bt.setTimeout(x.ready):(Jt.addEventListener("DOMContentLoaded",xn),bt.addEventListener("load",xn));var Ur=function(d,m,y,w,_,T,O){var q=0,H=d.length,K=null==y;if("object"===Se(y))for(q in _=!0,y)Ur(d,m,q,y[q],!0,T,O);else if(void 0!==w&&(_=!0,Mt(w)||(O=!0),K&&(O?(m.call(d,w),m=null):(K=m,m=function(et,at,J){return K.call(x(et),J)})),m))for(;q<H;q++)m(d[q],y,O?w:w.call(d[q],q,m(d[q],y)));return _?d:K?m.call(d):H?m(d[0],y):T},Ge=/^-ms-/,us=/-([a-z])/g;function Jl(d,m){return m.toUpperCase()}function Qe(d){return d.replace(Ge,"ms-").replace(us,Jl)}var ar=function(d){return 1===d.nodeType||9===d.nodeType||!+d.nodeType};function Jr(){this.expando=x.expando+Jr.uid++}Jr.uid=1,Jr.prototype={cache:function(d){var m=d[this.expando];return m||(m={},ar(d)&&(d.nodeType?d[this.expando]=m:Object.defineProperty(d,this.expando,{value:m,configurable:!0}))),m},set:function(d,m,y){var w,_=this.cache(d);if("string"==typeof m)_[Qe(m)]=y;else for(w in m)_[Qe(w)]=m[w];return _},get:function(d,m){return void 0===m?this.cache(d):d[this.expando]&&d[this.expando][Qe(m)]},access:function(d,m,y){return void 0===m||m&&"string"==typeof m&&void 0===y?this.get(d,m):(this.set(d,m,y),void 0!==y?y:m)},remove:function(d,m){var y,w=d[this.expando];if(void 0!==w){if(void 0!==m)for((y=(m=Array.isArray(m)?m.map(Qe):(m=Qe(m))in w?[m]:m.match(re)||[]).length);y--;)delete w[m[y]];(void 0===m||x.isEmptyObject(w))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var m=d[this.expando];return void 0!==m&&!x.isEmptyObject(m)}};var ne=new Jr,Bn=new Jr,Vo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Us=/[A-Z]/g;function kn(d,m,y){var w,_;if(void 0===y&&1===d.nodeType)if(w="data-"+m.replace(Us,"-$&").toLowerCase(),"string"==typeof(y=d.getAttribute(w))){try{y="true"===(_=y)||"false"!==_&&("null"===_?null:_===+_+""?+_:Vo.test(_)?JSON.parse(_):_)}catch{}Bn.set(d,m,y)}else y=void 0;return y}x.extend({hasData:function(d){return Bn.hasData(d)||ne.hasData(d)},data:function(d,m,y){return Bn.access(d,m,y)},removeData:function(d,m){Bn.remove(d,m)},_data:function(d,m,y){return ne.access(d,m,y)},_removeData:function(d,m){ne.remove(d,m)}}),x.fn.extend({data:function(d,m){var y,w,_,T=this[0],O=T&&T.attributes;if(void 0===d){if(this.length&&(_=Bn.get(T),1===T.nodeType&&!ne.get(T,"hasDataAttrs"))){for(y=O.length;y--;)O[y]&&0===(w=O[y].name).indexOf("data-")&&(w=Qe(w.slice(5)),kn(T,w,_[w]));ne.set(T,"hasDataAttrs",!0)}return _}return"object"==typeof d?this.each(function(){Bn.set(this,d)}):Ur(this,function(q){var H;if(T&&void 0===q)return void 0!==(H=Bn.get(T,d))||void 0!==(H=kn(T,d))?H:void 0;this.each(function(){Bn.set(this,d,q)})},null,m,1<arguments.length,null,!0)},removeData:function(d){return this.each(function(){Bn.remove(this,d)})}}),x.extend({queue:function(d,m,y){var w;if(d)return w=ne.get(d,m=(m||"fx")+"queue"),y&&(!w||Array.isArray(y)?w=ne.access(d,m,x.makeArray(y)):w.push(y)),w||[]},dequeue:function(d,m){var y=x.queue(d,m=m||"fx"),w=y.length,_=y.shift(),T=x._queueHooks(d,m);"inprogress"===_&&(_=y.shift(),w--),_&&("fx"===m&&y.unshift("inprogress"),delete T.stop,_.call(d,function(){x.dequeue(d,m)},T)),!w&&T&&T.empty.fire()},_queueHooks:function(d,m){var y=m+"queueHooks";return ne.get(d,y)||ne.access(d,y,{empty:x.Callbacks("once memory").add(function(){ne.remove(d,[m+"queue",y])})})}}),x.fn.extend({queue:function(d,m){var y=2;return"string"!=typeof d&&(m=d,d="fx",y--),arguments.length<y?x.queue(this[0],d):void 0===m?this:this.each(function(){var w=x.queue(this,d,m);x._queueHooks(this,d),"fx"===d&&"inprogress"!==w[0]&&x.dequeue(this,d)})},dequeue:function(d){return this.each(function(){x.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,m){var y,w=1,_=x.Deferred(),T=this,O=this.length,q=function(){--w||_.resolveWith(T,[T])};for("string"!=typeof d&&(m=d,d=void 0),d=d||"fx";O--;)(y=ne.get(T[O],d+"queueHooks"))&&y.empty&&(w++,y.empty.add(q));return q(),_.promise(m)}});var to=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wn=new RegExp("^(?:([+-])=|)("+to+")([a-z%]*)$","i"),Zn=["Top","Right","Bottom","Left"],xo=Jt.documentElement,ln=function(d){return x.contains(d.ownerDocument,d)},cu={composed:!0};xo.getRootNode&&(ln=function(d){return x.contains(d.ownerDocument,d)||d.getRootNode(cu)===d.ownerDocument});var we=function(d,m){return"none"===(d=m||d).style.display||""===d.style.display&&ln(d)&&"none"===x.css(d,"display")};function fs(d,m,y,w){var _,T,O=20,q=w?function(){return w.cur()}:function(){return x.css(d,m,"")},H=q(),K=y&&y[3]||(x.cssNumber[m]?"":"px"),et=d.nodeType&&(x.cssNumber[m]||"px"!==K&&+H)&&wn.exec(x.css(d,m));if(et&&et[3]!==K){for(K=K||et[3],et=+(H/=2)||1;O--;)x.style(d,m,et+K),(1-T)*(1-(T=q()/H||.5))<=0&&(O=0),et/=T;x.style(d,m,(et*=2)+K),y=y||[]}return y&&(et=+et||+H||0,_=y[1]?et+(y[1]+1)*y[2]:+y[2],w&&(w.unit=K,w.start=et,w.end=_)),_}var tc={};function wo(d,m){for(var y,w,_,T,O,q,H,K=[],et=0,at=d.length;et<at;et++)(w=d[et]).style&&(y=w.style.display,m?("none"===y&&(K[et]=ne.get(w,"display")||null,K[et]||(w.style.display="")),""===w.style.display&&we(w)&&(K[et]=(H=O=T=void 0,O=(_=w).ownerDocument,(H=tc[q=_.nodeName])||(T=O.body.appendChild(O.createElement(q)),H=x.css(T,"display"),T.parentNode.removeChild(T),"none"===H&&(H="block"),tc[q]=H)))):"none"!==y&&(K[et]="none",ne.set(w,"display",y)));for(et=0;et<at;et++)null!=K[et]&&(d[et].style.display=K[et]);return d}x.fn.extend({show:function(){return wo(this,!0)},hide:function(){return wo(this)},toggle:function(d){return"boolean"==typeof d?d?this.show():this.hide():this.each(function(){we(this)?x(this).show():x(this).hide()})}});var So,Eo,ko=/^(?:checkbox|radio)$/i,Da=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Re=/^$|^module$|\/(?:java|ecma)script/i;So=Jt.createDocumentFragment().appendChild(Jt.createElement("div")),(Eo=Jt.createElement("input")).setAttribute("type","radio"),Eo.setAttribute("checked","checked"),Eo.setAttribute("name","t"),So.appendChild(Eo),Yt.checkClone=So.cloneNode(!0).cloneNode(!0).lastChild.checked,So.innerHTML="<textarea>x</textarea>",Yt.noCloneChecked=!!So.cloneNode(!0).lastChild.defaultValue,So.innerHTML="<option></option>",Yt.option=!!So.lastChild;var zt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function fn(d,m){var y;return y=typeof d.getElementsByTagName<"u"?d.getElementsByTagName(m||"*"):typeof d.querySelectorAll<"u"?d.querySelectorAll(m||"*"):[],void 0===m||m&&kt(d,m)?x.merge([d],y):y}function Pa(d,m){for(var y=0,w=d.length;y<w;y++)ne.set(d[y],"globalEval",!m||ne.get(m[y],"globalEval"))}zt.tbody=zt.tfoot=zt.colgroup=zt.caption=zt.thead,zt.th=zt.td,Yt.option||(zt.optgroup=zt.option=[1,"<select multiple='multiple'>","</select>"]);var ec=/<|&#?\w+;/;function La(d,m,y,w,_){for(var T,O,q,H,K,et,at=m.createDocumentFragment(),J=[],ut=0,Pt=d.length;ut<Pt;ut++)if((T=d[ut])||0===T)if("object"===Se(T))x.merge(J,T.nodeType?[T]:T);else if(ec.test(T)){for(O=O||at.appendChild(m.createElement("div")),q=(Da.exec(T)||["",""])[1].toLowerCase(),O.innerHTML=(H=zt[q]||zt._default)[1]+x.htmlPrefilter(T)+H[2],et=H[0];et--;)O=O.lastChild;x.merge(J,O.childNodes),(O=at.firstChild).textContent=""}else J.push(m.createTextNode(T));for(at.textContent="",ut=0;T=J[ut++];)if(w&&-1<x.inArray(T,w))_&&_.push(T);else if(K=ln(T),O=fn(at.appendChild(T),"script"),K&&Pa(O),y)for(et=0;T=O[et++];)Re.test(T.type||"")&&y.push(T);return at}var Hs=/^([^.]*)(?:\.(.+)|)/;function _o(){return!0}function Hr(){return!1}function ms(d,m,y,w,_,T){var O,q;if("object"==typeof m){for(q in"string"!=typeof y&&(w=w||y,y=void 0),m)ms(d,q,y,w,m[q],T);return d}if(null==w&&null==_?(_=y,w=y=void 0):null==_&&("string"==typeof y?(_=w,w=void 0):(_=w,w=y,y=void 0)),!1===_)_=Hr;else if(!_)return d;return 1===T&&(O=_,(_=function(H){return x().off(H),O.apply(this,arguments)}).guid=O.guid||(O.guid=x.guid++)),d.each(function(){x.event.add(this,m,_,w,y)})}function qs(d,m,y){y?(ne.set(d,m,!1),x.event.add(d,m,{namespace:!1,handler:function(w){var _,T=ne.get(this,m);if(1&w.isTrigger&&this[m]){if(T)(x.event.special[m]||{}).delegateType&&w.stopPropagation();else if(T=ie.call(arguments),ne.set(this,m,T),this[m](),_=ne.get(this,m),ne.set(this,m,!1),T!==_)return w.stopImmediatePropagation(),w.preventDefault(),_}else T&&(ne.set(this,m,x.event.trigger(T[0],T.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=_o)}})):void 0===ne.get(d,m)&&x.event.add(d,m,_o)}x.event={global:{},add:function(d,m,y,w,_){var T,O,q,H,K,et,at,J,ut,Pt,le,D=ne.get(d);if(ar(d))for(y.handler&&(y=(T=y).handler,_=T.selector),_&&x.find.matchesSelector(xo,_),y.guid||(y.guid=x.guid++),(H=D.events)||(H=D.events=Object.create(null)),(O=D.handle)||(O=D.handle=function(nn){return typeof x<"u"&&x.event.triggered!==nn.type?x.event.dispatch.apply(d,arguments):void 0}),K=(m=(m||"").match(re)||[""]).length;K--;)ut=le=(q=Hs.exec(m[K])||[])[1],Pt=(q[2]||"").split(".").sort(),ut&&(at=x.event.special[ut]||{},at=x.event.special[ut=(_?at.delegateType:at.bindType)||ut]||{},et=x.extend({type:ut,origType:le,data:w,handler:y,guid:y.guid,selector:_,needsContext:_&&x.expr.match.needsContext.test(_),namespace:Pt.join(".")},T),(J=H[ut])||((J=H[ut]=[]).delegateCount=0,at.setup&&!1!==at.setup.call(d,w,Pt,O)||d.addEventListener&&d.addEventListener(ut,O)),at.add&&(at.add.call(d,et),et.handler.guid||(et.handler.guid=y.guid)),_?J.splice(J.delegateCount++,0,et):J.push(et),x.event.global[ut]=!0)},remove:function(d,m,y,w,_){var T,O,q,H,K,et,at,J,ut,Pt,le,D=ne.hasData(d)&&ne.get(d);if(D&&(H=D.events)){for(K=(m=(m||"").match(re)||[""]).length;K--;)if(ut=le=(q=Hs.exec(m[K])||[])[1],Pt=(q[2]||"").split(".").sort(),ut){for(at=x.event.special[ut]||{},J=H[ut=(w?at.delegateType:at.bindType)||ut]||[],q=q[2]&&new RegExp("(^|\\.)"+Pt.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=T=J.length;T--;)et=J[T],!_&&le!==et.origType||y&&y.guid!==et.guid||q&&!q.test(et.namespace)||w&&w!==et.selector&&("**"!==w||!et.selector)||(J.splice(T,1),et.selector&&J.delegateCount--,at.remove&&at.remove.call(d,et));O&&!J.length&&(at.teardown&&!1!==at.teardown.call(d,Pt,D.handle)||x.removeEvent(d,ut,D.handle),delete H[ut])}else for(ut in H)x.event.remove(d,ut+m[K],y,w,!0);x.isEmptyObject(H)&&ne.remove(d,"handle events")}},dispatch:function(d){var m,y,w,_,T,O,q=new Array(arguments.length),H=x.event.fix(d),K=(ne.get(this,"events")||Object.create(null))[H.type]||[],et=x.event.special[H.type]||{};for(q[0]=H,m=1;m<arguments.length;m++)q[m]=arguments[m];if(H.delegateTarget=this,!et.preDispatch||!1!==et.preDispatch.call(this,H)){for(O=x.event.handlers.call(this,H,K),m=0;(_=O[m++])&&!H.isPropagationStopped();)for(H.currentTarget=_.elem,y=0;(T=_.handlers[y++])&&!H.isImmediatePropagationStopped();)H.rnamespace&&!1!==T.namespace&&!H.rnamespace.test(T.namespace)||(H.handleObj=T,H.data=T.data,void 0!==(w=((x.event.special[T.origType]||{}).handle||T.handler).apply(_.elem,q))&&!1===(H.result=w)&&(H.preventDefault(),H.stopPropagation()));return et.postDispatch&&et.postDispatch.call(this,H),H.result}},handlers:function(d,m){var y,w,_,T,O,q=[],H=m.delegateCount,K=d.target;if(H&&K.nodeType&&!("click"===d.type&&1<=d.button))for(;K!==this;K=K.parentNode||this)if(1===K.nodeType&&("click"!==d.type||!0!==K.disabled)){for(T=[],O={},y=0;y<H;y++)void 0===O[_=(w=m[y]).selector+" "]&&(O[_]=w.needsContext?-1<x(_,this).index(K):x.find(_,this,null,[K]).length),O[_]&&T.push(w);T.length&&q.push({elem:K,handlers:T})}return K=this,H<m.length&&q.push({elem:K,handlers:m.slice(H)}),q},addProp:function(d,m){Object.defineProperty(x.Event.prototype,d,{enumerable:!0,configurable:!0,get:Mt(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(y){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(d){return d[x.expando]?d:new x.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var m=this||d;return ko.test(m.type)&&m.click&&kt(m,"input")&&qs(m,"click",!0),!1},trigger:function(d){var m=this||d;return ko.test(m.type)&&m.click&&kt(m,"input")&&qs(m,"click"),!0},_default:function(d){var m=d.target;return ko.test(m.type)&&m.click&&kt(m,"input")&&ne.get(m,"click")||kt(m,"a")}},beforeunload:{postDispatch:function(d){void 0!==d.result&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}},x.removeEvent=function(d,m,y){d.removeEventListener&&d.removeEventListener(m,y)},x.Event=function(d,m){if(!(this instanceof x.Event))return new x.Event(d,m);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||void 0===d.defaultPrevented&&!1===d.returnValue?_o:Hr,this.target=d.target&&3===d.target.nodeType?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,m&&x.extend(this,m),this.timeStamp=d&&d.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Hr,isPropagationStopped:Hr,isImmediatePropagationStopped:Hr,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=_o,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=_o,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=_o,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(d,m){function y(w){if(Jt.documentMode){var _=ne.get(this,"handle"),T=x.event.fix(w);T.type="focusin"===w.type?"focus":"blur",T.isSimulated=!0,_(w),T.target===T.currentTarget&&_(T)}else x.event.simulate(m,w.target,x.event.fix(w))}x.event.special[d]={setup:function(){var w;if(qs(this,d,!0),!Jt.documentMode)return!1;(w=ne.get(this,m))||this.addEventListener(m,y),ne.set(this,m,(w||0)+1)},trigger:function(){return qs(this,d),!0},teardown:function(){var w;if(!Jt.documentMode)return!1;(w=ne.get(this,m)-1)?ne.set(this,m,w):(this.removeEventListener(m,y),ne.remove(this,m))},_default:function(w){return ne.get(w.target,d)},delegateType:m},x.event.special[m]={setup:function(){var w=this.ownerDocument||this.document||this,_=Jt.documentMode?this:w,T=ne.get(_,m);T||(Jt.documentMode?this.addEventListener(m,y):w.addEventListener(d,y,!0)),ne.set(_,m,(T||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,_=Jt.documentMode?this:w,T=ne.get(_,m)-1;T?ne.set(_,m,T):(Jt.documentMode?this.removeEventListener(m,y):w.removeEventListener(d,y,!0),ne.remove(_,m))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,m){x.event.special[d]={delegateType:m,bindType:m,handle:function(y){var w,_=y.relatedTarget,T=y.handleObj;return _&&(_===this||x.contains(this,_))||(y.type=T.origType,w=T.handler.apply(this,arguments),y.type=m),w}}}),x.fn.extend({on:function(d,m,y,w){return ms(this,d,m,y,w)},one:function(d,m,y,w){return ms(this,d,m,y,w,1)},off:function(d,m,y){var w,_;if(d&&d.preventDefault&&d.handleObj)return w=d.handleObj,x(d.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof d){for(_ in d)this.off(_,m,d[_]);return this}return!1!==m&&"function"!=typeof m||(y=m,m=void 0),!1===y&&(y=Hr),this.each(function(){x.event.remove(this,d,y,m)})}});var Ko=/<script|<style|<link/i,qr=/checked\s*(?:[^=]|=\s*.checked.)/i,nc=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ma(d,m){return kt(d,"table")&&kt(11!==m.nodeType?m:m.firstChild,"tr")&&x(d).children("tbody")[0]||d}function $s(d){return d.type=(null!==d.getAttribute("type"))+"/"+d.type,d}function rc(d){return"true/"===(d.type||"").slice(0,5)?d.type=d.type.slice(5):d.removeAttribute("type"),d}function Ai(d,m){var y,w,_,T,O,q;if(1===m.nodeType){if(ne.hasData(d)&&(q=ne.get(d).events))for(_ in ne.remove(m,"handle events"),q)for(y=0,w=q[_].length;y<w;y++)x.event.add(m,_,q[_][y]);Bn.hasData(d)&&(T=Bn.access(d),O=x.extend({},T),Bn.set(m,O))}}function Xo(d,m,y,w){m=Xe(m);var _,T,O,q,H,K,et=0,at=d.length,J=at-1,ut=m[0],Pt=Mt(ut);if(Pt||1<at&&"string"==typeof ut&&!Yt.checkClone&&qr.test(ut))return d.each(function(le){var D=d.eq(le);Pt&&(m[0]=ut.call(this,le,D.html())),Xo(D,m,y,w)});if(at&&(T=(_=La(m,d[0].ownerDocument,!1,d,w)).firstChild,1===_.childNodes.length&&(_=T),T||w)){for(q=(O=x.map(fn(_,"script"),$s)).length;et<at;et++)H=_,et!==J&&(H=x.clone(H,!0,!0),q&&x.merge(O,fn(H,"script"))),y.call(d[et],H,et);if(q)for(K=O[O.length-1].ownerDocument,x.map(O,rc),et=0;et<q;et++)Re.test((H=O[et]).type||"")&&!ne.access(H,"globalEval")&&x.contains(K,H)&&(H.src&&"module"!==(H.type||"").toLowerCase()?x._evalUrl&&!H.noModule&&x._evalUrl(H.src,{nonce:H.nonce||H.getAttribute("nonce")},K):Ie(H.textContent.replace(nc,""),H,K))}return d}function mn(d,m,y){for(var w,_=m?x.filter(m,d):d,T=0;null!=(w=_[T]);T++)y||1!==w.nodeType||x.cleanData(fn(w)),w.parentNode&&(y&&ln(w)&&Pa(fn(w,"script")),w.parentNode.removeChild(w));return d}x.extend({htmlPrefilter:function(d){return d},clone:function(d,m,y){var w,_,T,O,q,H,K,et=d.cloneNode(!0),at=ln(d);if(!(Yt.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||x.isXMLDoc(d)))for(O=fn(et),w=0,_=(T=fn(d)).length;w<_;w++)q=T[w],"input"===(K=(H=O[w]).nodeName.toLowerCase())&&ko.test(q.type)?H.checked=q.checked:"input"!==K&&"textarea"!==K||(H.defaultValue=q.defaultValue);if(m)if(y)for(T=T||fn(d),O=O||fn(et),w=0,_=T.length;w<_;w++)Ai(T[w],O[w]);else Ai(d,et);return 0<(O=fn(et,"script")).length&&Pa(O,!at&&fn(d,"script")),et},cleanData:function(d){for(var m,y,w,_=x.event.special,T=0;void 0!==(y=d[T]);T++)if(ar(y)){if(m=y[ne.expando]){if(m.events)for(w in m.events)_[w]?x.event.remove(y,w):x.removeEvent(y,w,m.handle);y[ne.expando]=void 0}y[Bn.expando]&&(y[Bn.expando]=void 0)}}}),x.fn.extend({detach:function(d){return mn(this,d,!0)},remove:function(d){return mn(this,d)},text:function(d){return Ur(this,function(m){return void 0===m?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=m)})},null,d,arguments.length)},append:function(){return Xo(this,arguments,function(d){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ma(this,d).appendChild(d)})},prepend:function(){return Xo(this,arguments,function(d){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var m=Ma(this,d);m.insertBefore(d,m.firstChild)}})},before:function(){return Xo(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return Xo(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,m=0;null!=(d=this[m]);m++)1===d.nodeType&&(x.cleanData(fn(d,!1)),d.textContent="");return this},clone:function(d,m){return d=null!=d&&d,m=m??d,this.map(function(){return x.clone(this,d,m)})},html:function(d){return Ur(this,function(m){var y=this[0]||{},w=0,_=this.length;if(void 0===m&&1===y.nodeType)return y.innerHTML;if("string"==typeof m&&!Ko.test(m)&&!zt[(Da.exec(m)||["",""])[1].toLowerCase()]){m=x.htmlPrefilter(m);try{for(;w<_;w++)1===(y=this[w]||{}).nodeType&&(x.cleanData(fn(y,!1)),y.innerHTML=m);y=0}catch{}}y&&this.empty().append(m)},null,d,arguments.length)},replaceWith:function(){var d=[];return Xo(this,arguments,function(m){var y=this.parentNode;x.inArray(this,d)<0&&(x.cleanData(fn(this)),y&&y.replaceChild(m,this))},d)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,m){x.fn[d]=function(y){for(var w,_=[],T=x(y),O=T.length-1,q=0;q<=O;q++)w=q===O?this:this.clone(!0),x(T[q])[m](w),Tn.apply(_,w.get());return this.pushStack(_)}});var Ve=new RegExp("^("+to+")(?!px)[a-z%]+$","i"),Ws=/^--/,ps=function(d){var m=d.ownerDocument.defaultView;return m&&m.opener||(m=bt),m.getComputedStyle(d)},Yo=function(d,m,y){var w,_,T={};for(_ in m)T[_]=d.style[_],d.style[_]=m[_];for(_ in w=y.call(d),m)d.style[_]=T[_];return w},du=new RegExp(Zn.join("|"),"i");function gs(d,m,y){var w,_,T,O,q=Ws.test(m),H=d.style;return(y=y||ps(d))&&(O=y.getPropertyValue(m)||y[m],q&&O&&(O=O.replace(Zr,"$1")||void 0),""!==O||ln(d)||(O=x.style(d,m)),!Yt.pixelBoxStyles()&&Ve.test(O)&&du.test(m)&&(w=H.width,_=H.minWidth,T=H.maxWidth,H.minWidth=H.maxWidth=H.width=O,O=y.width,H.width=w,H.minWidth=_,H.maxWidth=T)),void 0!==O?O+"":O}function Sr(d,m){return{get:function(){if(!d())return(this.get=m).apply(this,arguments);delete this.get}}}!function(){function d(){if(K){H.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",xo.appendChild(H).appendChild(K);var et=bt.getComputedStyle(K);y="1%"!==et.top,q=12===m(et.marginLeft),K.style.right="60%",T=36===m(et.right),w=36===m(et.width),K.style.position="absolute",_=12===m(K.offsetWidth/3),xo.removeChild(H),K=null}}function m(et){return Math.round(parseFloat(et))}var y,w,_,T,O,q,H=Jt.createElement("div"),K=Jt.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",Yt.clearCloneStyle="content-box"===K.style.backgroundClip,x.extend(Yt,{boxSizingReliable:function(){return d(),w},pixelBoxStyles:function(){return d(),T},pixelPosition:function(){return d(),y},reliableMarginLeft:function(){return d(),q},scrollboxSize:function(){return d(),_},reliableTrDimensions:function(){var et,at,J,ut;return null==O&&(et=Jt.createElement("table"),at=Jt.createElement("tr"),J=Jt.createElement("div"),et.style.cssText="position:absolute;left:-11111px;border-collapse:separate",at.style.cssText="box-sizing:content-box;border:1px solid",at.style.height="1px",J.style.height="9px",J.style.display="block",xo.appendChild(et).appendChild(at).appendChild(J),ut=bt.getComputedStyle(at),O=parseInt(ut.height,10)+parseInt(ut.borderTopWidth,10)+parseInt(ut.borderBottomWidth,10)===at.offsetHeight,xo.removeChild(et)),O}}))}();var hs=["Webkit","Moz","ms"],Vs=Jt.createElement("div").style,Ia={};function Er(d){return x.cssProps[d]||Ia[d]||(d in Vs?d:Ia[d]=function(y){for(var w=y[0].toUpperCase()+y.slice(1),_=hs.length;_--;)if((y=hs[_]+w)in Vs)return y}(d)||d)}var uu=/^(none|table(?!-c[ea]).+)/,fu={position:"absolute",visibility:"hidden",display:"block"},Ti={letterSpacing:"0",fontWeight:"400"};function Ri(d,m,y){var w=wn.exec(m);return w?Math.max(0,w[2]-(y||0))+(w[3]||"px"):m}function Fa(d,m,y,w,_,T){var O="width"===m?1:0,q=0,H=0,K=0;if(y===(w?"border":"content"))return 0;for(;O<4;O+=2)"margin"===y&&(K+=x.css(d,y+Zn[O],!0,_)),w?("content"===y&&(H-=x.css(d,"padding"+Zn[O],!0,_)),"margin"!==y&&(H-=x.css(d,"border"+Zn[O]+"Width",!0,_))):(H+=x.css(d,"padding"+Zn[O],!0,_),"padding"!==y?H+=x.css(d,"border"+Zn[O]+"Width",!0,_):q+=x.css(d,"border"+Zn[O]+"Width",!0,_));return!w&&0<=T&&(H+=Math.max(0,Math.ceil(d["offset"+m[0].toUpperCase()+m.slice(1)]-T-H-q-.5))||0),H+K}function Oi(d,m,y){var w=ps(d),_=(!Yt.boxSizingReliable()||y)&&"border-box"===x.css(d,"boxSizing",!1,w),T=_,O=gs(d,m,w),q="offset"+m[0].toUpperCase()+m.slice(1);if(Ve.test(O)){if(!y)return O;O="auto"}return(!Yt.boxSizingReliable()&&_||!Yt.reliableTrDimensions()&&kt(d,"tr")||"auto"===O||!parseFloat(O)&&"inline"===x.css(d,"display",!1,w))&&d.getClientRects().length&&(_="border-box"===x.css(d,"boxSizing",!1,w),(T=q in d)&&(O=d[q])),(O=parseFloat(O)||0)+Fa(d,m,y||(_?"border":"content"),T,w,O)+"px"}function mr(d,m,y,w,_){return new mr.prototype.init(d,m,y,w,_)}x.extend({cssHooks:{opacity:{get:function(d,m){if(m){var y=gs(d,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,m,y,w){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var _,T,O,q=Qe(m),H=Ws.test(m),K=d.style;if(H||(m=Er(q)),O=x.cssHooks[m]||x.cssHooks[q],void 0===y)return O&&"get"in O&&void 0!==(_=O.get(d,!1,w))?_:K[m];"string"==(T=typeof y)&&(_=wn.exec(y))&&_[1]&&(y=fs(d,m,_),T="number"),null!=y&&y==y&&("number"!==T||H||(y+=_&&_[3]||(x.cssNumber[q]?"":"px")),Yt.clearCloneStyle||""!==y||0!==m.indexOf("background")||(K[m]="inherit"),O&&"set"in O&&void 0===(y=O.set(d,y,w))||(H?K.setProperty(m,y):K[m]=y))}},css:function(d,m,y,w){var _,T,O,q=Qe(m);return Ws.test(m)||(m=Er(q)),(O=x.cssHooks[m]||x.cssHooks[q])&&"get"in O&&(_=O.get(d,!0,y)),void 0===_&&(_=gs(d,m,w)),"normal"===_&&m in Ti&&(_=Ti[m]),""===y||y?(T=parseFloat(_),!0===y||isFinite(T)?T||0:_):_}}),x.each(["height","width"],function(d,m){x.cssHooks[m]={get:function(y,w,_){if(w)return!uu.test(x.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?Oi(y,m,_):Yo(y,fu,function(){return Oi(y,m,_)})},set:function(y,w,_){var T,O=ps(y),q=!Yt.scrollboxSize()&&"absolute"===O.position,H=(q||_)&&"border-box"===x.css(y,"boxSizing",!1,O),K=_?Fa(y,m,_,H,O):0;return H&&q&&(K-=Math.ceil(y["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(O[m])-Fa(y,m,"border",!1,O)-.5)),K&&(T=wn.exec(w))&&"px"!==(T[3]||"px")&&(y.style[m]=w,w=x.css(y,m)),Ri(0,w,K)}}}),x.cssHooks.marginLeft=Sr(Yt.reliableMarginLeft,function(d,m){if(m)return(parseFloat(gs(d,"marginLeft"))||d.getBoundingClientRect().left-Yo(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(d,m){x.cssHooks[d+m]={expand:function(y){for(var w=0,_={},T="string"==typeof y?y.split(" "):[y];w<4;w++)_[d+Zn[w]+m]=T[w]||T[w-2]||T[0];return _}},"margin"!==d&&(x.cssHooks[d+m].set=Ri)}),x.fn.extend({css:function(d,m){return Ur(this,function(y,w,_){var T,O,q={},H=0;if(Array.isArray(w)){for(T=ps(y),O=w.length;H<O;H++)q[w[H]]=x.css(y,w[H],!1,T);return q}return void 0!==_?x.style(y,w,_):x.css(y,w)},d,m,1<arguments.length)}}),((x.Tween=mr).prototype={constructor:mr,init:function(d,m,y,w,_,T){this.elem=d,this.prop=y,this.easing=_||x.easing._default,this.options=m,this.start=this.now=this.cur(),this.end=w,this.unit=T||(x.cssNumber[y]?"":"px")},cur:function(){var d=mr.propHooks[this.prop];return d&&d.get?d.get(this):mr.propHooks._default.get(this)},run:function(d){var m,y=mr.propHooks[this.prop];return this.pos=m=this.options.duration?x.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):d,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):mr.propHooks._default.set(this),this}}).init.prototype=mr.prototype,(mr.propHooks={_default:{get:function(d){var m;return 1!==d.elem.nodeType||null!=d.elem[d.prop]&&null==d.elem.style[d.prop]?d.elem[d.prop]:(m=x.css(d.elem,d.prop,""))&&"auto"!==m?m:0},set:function(d){x.fx.step[d.prop]?x.fx.step[d.prop](d):1!==d.elem.nodeType||!x.cssHooks[d.prop]&&null==d.elem.style[Er(d.prop)]?d.elem[d.prop]=d.now:x.style(d.elem,d.prop,d.now+d.unit)}}}).scrollTop=mr.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},x.easing={linear:function(d){return d},swing:function(d){return.5-Math.cos(d*Math.PI)/2},_default:"swing"},x.fx=mr.prototype.init,x.fx.step={};var Go,Ks,bs,oc,sc=/^(?:toggle|show|hide)$/,ac=/queueHooks$/;function ja(){Ks&&(!1===Jt.hidden&&bt.requestAnimationFrame?bt.requestAnimationFrame(ja):bt.setTimeout(ja,x.fx.interval),x.fx.tick())}function Bi(){return bt.setTimeout(function(){Go=void 0}),Go=Date.now()}function Xs(d,m){var y,w=0,_={height:d};for(m=m?1:0;w<4;w+=2-m)_["margin"+(y=Zn[w])]=_["padding"+y]=d;return m&&(_.opacity=_.width=d),_}function Di(d,m,y){for(var w,_=(pr.tweeners[m]||[]).concat(pr.tweeners["*"]),T=0,O=_.length;T<O;T++)if(w=_[T].call(y,m,d))return w}function pr(d,m,y){var w,_,T=0,O=pr.prefilters.length,q=x.Deferred().always(function(){delete H.elem}),H=function(){if(_)return!1;for(var at=Go||Bi(),J=Math.max(0,K.startTime+K.duration-at),ut=1-(J/K.duration||0),Pt=0,le=K.tweens.length;Pt<le;Pt++)K.tweens[Pt].run(ut);return q.notifyWith(d,[K,ut,J]),ut<1&&le?J:(le||q.notifyWith(d,[K,1,0]),q.resolveWith(d,[K]),!1)},K=q.promise({elem:d,props:x.extend({},m),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},y),originalProperties:m,originalOptions:y,startTime:Go||Bi(),duration:y.duration,tweens:[],createTween:function(at,J){var ut=x.Tween(d,K.opts,at,J,K.opts.specialEasing[at]||K.opts.easing);return K.tweens.push(ut),ut},stop:function(at){var J=0,ut=at?K.tweens.length:0;if(_)return this;for(_=!0;J<ut;J++)K.tweens[J].run(1);return at?(q.notifyWith(d,[K,1,0]),q.resolveWith(d,[K,at])):q.rejectWith(d,[K,at]),this}}),et=K.props;for(function(at,J){var ut,Pt,le,D,nn;for(ut in at)if(le=J[Pt=Qe(ut)],D=at[ut],Array.isArray(D)&&(le=D[1],D=at[ut]=D[0]),ut!==Pt&&(at[Pt]=D,delete at[ut]),(nn=x.cssHooks[Pt])&&"expand"in nn)for(ut in D=nn.expand(D),delete at[Pt],D)ut in at||(at[ut]=D[ut],J[ut]=le);else J[Pt]=le}(et,K.opts.specialEasing);T<O;T++)if(w=pr.prefilters[T].call(K,d,et,K.opts))return Mt(w.stop)&&(x._queueHooks(K.elem,K.opts.queue).stop=w.stop.bind(w)),w;return x.map(et,Di,K),Mt(K.opts.start)&&K.opts.start.call(d,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),x.fx.timer(x.extend(H,{elem:d,anim:K,queue:K.opts.queue})),K}x.Animation=x.extend(pr,{tweeners:{"*":[function(d,m){var y=this.createTween(d,m);return fs(y.elem,d,wn.exec(m),y),y}]},tweener:function(d,m){Mt(d)?(m=d,d=["*"]):d=d.match(re);for(var y,w=0,_=d.length;w<_;w++)(pr.tweeners[y=d[w]]=pr.tweeners[y]||[]).unshift(m)},prefilters:[function(d,m,y){var w,_,T,O,q,H,K,et,at="width"in m||"height"in m,J=this,ut={},Pt=d.style,le=d.nodeType&&we(d),D=ne.get(d,"fxshow");for(w in y.queue||(null==(O=x._queueHooks(d,"fx")).unqueued&&(O.unqueued=0,q=O.empty.fire,O.empty.fire=function(){O.unqueued||q()}),O.unqueued++,J.always(function(){J.always(function(){O.unqueued--,x.queue(d,"fx").length||O.empty.fire()})})),m)if(sc.test(_=m[w])){if(delete m[w],T=T||"toggle"===_,_===(le?"hide":"show")){if("show"!==_||!D||void 0===D[w])continue;le=!0}ut[w]=D&&D[w]||x.style(d,w)}if((H=!x.isEmptyObject(m))||!x.isEmptyObject(ut))for(w in at&&1===d.nodeType&&(y.overflow=[Pt.overflow,Pt.overflowX,Pt.overflowY],null==(K=D&&D.display)&&(K=ne.get(d,"display")),"none"===(et=x.css(d,"display"))&&(K?et=K:(wo([d],!0),K=d.style.display||K,et=x.css(d,"display"),wo([d]))),("inline"===et||"inline-block"===et&&null!=K)&&"none"===x.css(d,"float")&&(H||(J.done(function(){Pt.display=K}),null==K&&(K="none"===(et=Pt.display)?"":et)),Pt.display="inline-block")),y.overflow&&(Pt.overflow="hidden",J.always(function(){Pt.overflow=y.overflow[0],Pt.overflowX=y.overflow[1],Pt.overflowY=y.overflow[2]})),H=!1,ut)H||(D?"hidden"in D&&(le=D.hidden):D=ne.access(d,"fxshow",{display:K}),T&&(D.hidden=!le),le&&wo([d],!0),J.done(function(){for(w in le||wo([d]),ne.remove(d,"fxshow"),ut)x.style(d,w,ut[w])})),H=Di(le?D[w]:0,w,J),w in D||(D[w]=H.start,le&&(H.end=H.start,H.start=0))}],prefilter:function(d,m){m?pr.prefilters.unshift(d):pr.prefilters.push(d)}}),x.speed=function(d,m,y){var w=d&&"object"==typeof d?x.extend({},d):{complete:y||!y&&m||Mt(d)&&d,duration:d,easing:y&&m||m&&!Mt(m)&&m};return x.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in x.fx.speeds?x.fx.speeds[w.duration]:x.fx.speeds._default),null!=w.queue&&!0!==w.queue||(w.queue="fx"),w.old=w.complete,w.complete=function(){Mt(w.old)&&w.old.call(this),w.queue&&x.dequeue(this,w.queue)},w},x.fn.extend({fadeTo:function(d,m,y,w){return this.filter(we).css("opacity",0).show().end().animate({opacity:m},d,y,w)},animate:function(d,m,y,w){var _=x.isEmptyObject(d),T=x.speed(m,y,w),O=function(){var q=pr(this,x.extend({},d),T);(_||ne.get(this,"finish"))&&q.stop(!0)};return O.finish=O,_||!1===T.queue?this.each(O):this.queue(T.queue,O)},stop:function(d,m,y){var w=function(_){var T=_.stop;delete _.stop,T(y)};return"string"!=typeof d&&(y=m,m=d,d=void 0),m&&this.queue(d||"fx",[]),this.each(function(){var _=!0,T=null!=d&&d+"queueHooks",O=x.timers,q=ne.get(this);if(T)q[T]&&q[T].stop&&w(q[T]);else for(T in q)q[T]&&q[T].stop&&ac.test(T)&&w(q[T]);for(T=O.length;T--;)O[T].elem!==this||null!=d&&O[T].queue!==d||(O[T].anim.stop(y),_=!1,O.splice(T,1));!_&&y||x.dequeue(this,d)})},finish:function(d){return!1!==d&&(d=d||"fx"),this.each(function(){var m,y=ne.get(this),w=y[d+"queue"],_=y[d+"queueHooks"],T=x.timers,O=w?w.length:0;for(y.finish=!0,x.queue(this,d,[]),_&&_.stop&&_.stop.call(this,!0),m=T.length;m--;)T[m].elem===this&&T[m].queue===d&&(T[m].anim.stop(!0),T.splice(m,1));for(m=0;m<O;m++)w[m]&&w[m].finish&&w[m].finish.call(this);delete y.finish})}}),x.each(["toggle","show","hide"],function(d,m){var y=x.fn[m];x.fn[m]=function(w,_,T){return null==w||"boolean"==typeof w?y.apply(this,arguments):this.animate(Xs(m,!0),w,_,T)}}),x.each({slideDown:Xs("show"),slideUp:Xs("hide"),slideToggle:Xs("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,m){x.fn[d]=function(y,w,_){return this.animate(m,y,w,_)}}),x.timers=[],x.fx.tick=function(){var d,m=0,y=x.timers;for(Go=Date.now();m<y.length;m++)(d=y[m])()||y[m]!==d||y.splice(m--,1);y.length||x.fx.stop(),Go=void 0},x.fx.timer=function(d){x.timers.push(d),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Ks||(Ks=!0,ja())},x.fx.stop=function(){Ks=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(d,m){return d=x.fx&&x.fx.speeds[d]||d,this.queue(m=m||"fx",function(y,w){var _=bt.setTimeout(y,d);w.stop=function(){bt.clearTimeout(_)}})},bs=Jt.createElement("input"),oc=Jt.createElement("select").appendChild(Jt.createElement("option")),bs.type="checkbox",Yt.checkOn=""!==bs.value,Yt.optSelected=oc.selected,(bs=Jt.createElement("input")).value="t",bs.type="radio",Yt.radioValue="t"===bs.value;var Pi,Ys=x.expr.attrHandle;x.fn.extend({attr:function(d,m){return Ur(this,x.attr,d,m,1<arguments.length)},removeAttr:function(d){return this.each(function(){x.removeAttr(this,d)})}}),x.extend({attr:function(d,m,y){var w,_,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return typeof d.getAttribute>"u"?x.prop(d,m,y):(1===T&&x.isXMLDoc(d)||(_=x.attrHooks[m.toLowerCase()]||(x.expr.match.bool.test(m)?Pi:void 0)),void 0!==y?null===y?void x.removeAttr(d,m):_&&"set"in _&&void 0!==(w=_.set(d,y,m))?w:(d.setAttribute(m,y+""),y):_&&"get"in _&&null!==(w=_.get(d,m))?w:null==(w=x.find.attr(d,m))?void 0:w)},attrHooks:{type:{set:function(d,m){if(!Yt.radioValue&&"radio"===m&&kt(d,"input")){var y=d.value;return d.setAttribute("type",m),y&&(d.value=y),m}}}},removeAttr:function(d,m){var y,w=0,_=m&&m.match(re);if(_&&1===d.nodeType)for(;y=_[w++];)d.removeAttribute(y)}}),Pi={set:function(d,m,y){return!1===m?x.removeAttr(d,y):d.setAttribute(y,y),y}},x.each(x.expr.match.bool.source.match(/\w+/g),function(d,m){var y=Ys[m]||x.find.attr;Ys[m]=function(w,_,T){var O,q,H=_.toLowerCase();return T||(q=Ys[H],Ys[H]=O,O=null!=y(w,_,T)?H:null,Ys[H]=q),O}});var mu=/^(?:input|select|textarea|button)$/i,pu=/^(?:a|area)$/i;function Qo(d){return(d.match(re)||[]).join(" ")}function Dn(d){return d.getAttribute&&d.getAttribute("class")||""}function Li(d){return Array.isArray(d)?d:"string"==typeof d&&d.match(re)||[]}x.fn.extend({prop:function(d,m){return Ur(this,x.prop,d,m,1<arguments.length)},removeProp:function(d){return this.each(function(){delete this[x.propFix[d]||d]})}}),x.extend({prop:function(d,m,y){var w,_,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return 1===T&&x.isXMLDoc(d)||(_=x.propHooks[m=x.propFix[m]||m]),void 0!==y?_&&"set"in _&&void 0!==(w=_.set(d,y,m))?w:d[m]=y:_&&"get"in _&&null!==(w=_.get(d,m))?w:d[m]},propHooks:{tabIndex:{get:function(d){var m=x.find.attr(d,"tabindex");return m?parseInt(m,10):mu.test(d.nodeName)||pu.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Yt.optSelected||(x.propHooks.selected={get:function(d){return null},set:function(d){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(d){var m,y,w,_,T,O;return Mt(d)?this.each(function(q){x(this).addClass(d.call(this,q,Dn(this)))}):(m=Li(d)).length?this.each(function(){if(w=Dn(this),y=1===this.nodeType&&" "+Qo(w)+" "){for(T=0;T<m.length;T++)y.indexOf(" "+(_=m[T])+" ")<0&&(y+=_+" ");O=Qo(y),w!==O&&this.setAttribute("class",O)}}):this},removeClass:function(d){var m,y,w,_,T,O;return Mt(d)?this.each(function(q){x(this).removeClass(d.call(this,q,Dn(this)))}):arguments.length?(m=Li(d)).length?this.each(function(){if(w=Dn(this),y=1===this.nodeType&&" "+Qo(w)+" "){for(T=0;T<m.length;T++)for(_=m[T];-1<y.indexOf(" "+_+" ");)y=y.replace(" "+_+" "," ");O=Qo(y),w!==O&&this.setAttribute("class",O)}}):this:this.attr("class","")},toggleClass:function(d,m){var y,w,_,T,O=typeof d,q="string"===O||Array.isArray(d);return Mt(d)?this.each(function(H){x(this).toggleClass(d.call(this,H,Dn(this),m),m)}):"boolean"==typeof m&&q?m?this.addClass(d):this.removeClass(d):(y=Li(d),this.each(function(){if(q)for(T=x(this),_=0;_<y.length;_++)T.hasClass(w=y[_])?T.removeClass(w):T.addClass(w);else void 0!==d&&"boolean"!==O||((w=Dn(this))&&ne.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||!1===d?"":ne.get(this,"__className__")||""))}))},hasClass:function(d){var m,y,w=0;for(m=" "+d+" ";y=this[w++];)if(1===y.nodeType&&-1<(" "+Qo(Dn(y))+" ").indexOf(m))return!0;return!1}});var Mi=/\r/g;x.fn.extend({val:function(d){var m,y,w,_=this[0];return arguments.length?(w=Mt(d),this.each(function(T){var O;1===this.nodeType&&(null==(O=w?d.call(this,T,x(this).val()):d)?O="":"number"==typeof O?O+="":Array.isArray(O)&&(O=x.map(O,function(q){return null==q?"":q+""})),(m=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in m&&void 0!==m.set(this,O,"value")||(this.value=O))})):_?(m=x.valHooks[_.type]||x.valHooks[_.nodeName.toLowerCase()])&&"get"in m&&void 0!==(y=m.get(_,"value"))?y:"string"==typeof(y=_.value)?y.replace(Mi,""):y??"":void 0}}),x.extend({valHooks:{option:{get:function(d){return x.find.attr(d,"value")??Qo(x.text(d))}},select:{get:function(d){var m,y,w,_=d.options,T=d.selectedIndex,O="select-one"===d.type,q=O?null:[],H=O?T+1:_.length;for(w=T<0?H:O?T:0;w<H;w++)if(((y=_[w]).selected||w===T)&&!y.disabled&&(!y.parentNode.disabled||!kt(y.parentNode,"optgroup"))){if(m=x(y).val(),O)return m;q.push(m)}return q},set:function(d,m){for(var y,w,_=d.options,T=x.makeArray(m),O=_.length;O--;)((w=_[O]).selected=-1<x.inArray(x.valHooks.option.get(w),T))&&(y=!0);return y||(d.selectedIndex=-1),T}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(d,m){if(Array.isArray(m))return d.checked=-1<x.inArray(x(d).val(),m)}},Yt.checkOn||(x.valHooks[this].get=function(d){return null===d.getAttribute("value")?"on":d.value})});var Jn=bt.location,kr={guid:Date.now()},eo=/\?/;x.parseXML=function(d){var m,y;if(!d||"string"!=typeof d)return null;try{m=(new bt.DOMParser).parseFromString(d,"text/xml")}catch{}return y=m&&m.getElementsByTagName("parsererror")[0],m&&!y||x.error("Invalid XML: "+(y?x.map(y.childNodes,function(w){return w.textContent}).join("\n"):d)),m};var ic=/^(?:focusinfocus|focusoutblur)$/,pe=function(d){d.stopPropagation()};x.extend(x.event,{trigger:function(d,m,y,w){var _,T,O,q,H,K,et,at,J=[y||Jt],ut=Rn.call(d,"type")?d.type:d,Pt=Rn.call(d,"namespace")?d.namespace.split("."):[];if(T=at=O=y=y||Jt,3!==y.nodeType&&8!==y.nodeType&&!ic.test(ut+x.event.triggered)&&(-1<ut.indexOf(".")&&(ut=(Pt=ut.split(".")).shift(),Pt.sort()),H=ut.indexOf(":")<0&&"on"+ut,(d=d[x.expando]?d:new x.Event(ut,"object"==typeof d&&d)).isTrigger=w?2:3,d.namespace=Pt.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+Pt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=y),m=null==m?[d]:x.makeArray(m,[d]),et=x.event.special[ut]||{},w||!et.trigger||!1!==et.trigger.apply(y,m))){if(!w&&!et.noBubble&&!it(y)){for(ic.test((q=et.delegateType||ut)+ut)||(T=T.parentNode);T;T=T.parentNode)J.push(T),O=T;O===(y.ownerDocument||Jt)&&J.push(O.defaultView||O.parentWindow||bt)}for(_=0;(T=J[_++])&&!d.isPropagationStopped();)at=T,d.type=1<_?q:et.bindType||ut,(K=(ne.get(T,"events")||Object.create(null))[d.type]&&ne.get(T,"handle"))&&K.apply(T,m),(K=H&&T[H])&&K.apply&&ar(T)&&(d.result=K.apply(T,m),!1===d.result&&d.preventDefault());return d.type=ut,w||d.isDefaultPrevented()||et._default&&!1!==et._default.apply(J.pop(),m)||!ar(y)||H&&Mt(y[ut])&&!it(y)&&((O=y[H])&&(y[H]=null),x.event.triggered=ut,d.isPropagationStopped()&&at.addEventListener(ut,pe),y[ut](),d.isPropagationStopped()&&at.removeEventListener(ut,pe),x.event.triggered=void 0,O&&(y[H]=O)),d.result}},simulate:function(d,m,y){var w=x.extend(new x.Event,y,{type:d,isSimulated:!0});x.event.trigger(w,null,m)}}),x.fn.extend({trigger:function(d,m){return this.each(function(){x.event.trigger(d,m,this)})},triggerHandler:function(d,m){var y=this[0];if(y)return x.event.trigger(d,m,y,!0)}});var gu=/\[\]$/,Ii=/\r?\n/g,lc=/^(?:submit|button|image|reset|file)$/i,lt=/^(?:input|select|textarea|keygen)/i;function No(d,m,y,w){var _;if(Array.isArray(m))x.each(m,function(T,O){y||gu.test(d)?w(d,O):No(d+"["+("object"==typeof O&&null!=O?T:"")+"]",O,y,w)});else if(y||"object"!==Se(m))w(d,m);else for(_ in m)No(d+"["+_+"]",m[_],y,w)}x.param=function(d,m){var y,w=[],_=function(T,O){var q=Mt(O)?O():O;w[w.length]=encodeURIComponent(T)+"="+encodeURIComponent(q??"")};if(null==d)return"";if(Array.isArray(d)||d.jquery&&!x.isPlainObject(d))x.each(d,function(){_(this.name,this.value)});else for(y in d)No(y,d[y],m,_);return w.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=x.prop(this,"elements");return d?x.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!x(this).is(":disabled")&&lt.test(this.nodeName)&&!lc.test(d)&&(this.checked||!ko.test(d))}).map(function(d,m){var y=x(this).val();return null==y?null:Array.isArray(y)?x.map(y,function(w){return{name:m.name,value:w.replace(Ii,"\r\n")}}):{name:m.name,value:y.replace(Ii,"\r\n")}}).get()}});var cc=/%20/g,Sn=/#.*$/,vs=/([?&])_=[^&]*/,hu=/^(.*?):[ \t]*([^\r\n]*)$/gm,dc=/^(?:GET|HEAD)$/,bu=/^\/\//,uc={},fe={},Fi="*/".concat("*"),ys=Jt.createElement("a");function Gs(d){return function(m,y){"string"!=typeof m&&(y=m,m="*");var w,_=0,T=m.toLowerCase().match(re)||[];if(Mt(y))for(;w=T[_++];)"+"===w[0]?(w=w.slice(1)||"*",(d[w]=d[w]||[]).unshift(y)):(d[w]=d[w]||[]).push(y)}}function Hn(d,m,y,w){var _={},T=d===fe;function O(q){var H;return _[q]=!0,x.each(d[q]||[],function(K,et){var at=et(m,y,w);return"string"!=typeof at||T||_[at]?T?!(H=at):void 0:(m.dataTypes.unshift(at),O(at),!1)}),H}return O(m.dataTypes[0])||!_["*"]&&O("*")}function qn(d,m){var y,w,_=x.ajaxSettings.flatOptions||{};for(y in m)void 0!==m[y]&&((_[y]?d:w||(w={}))[y]=m[y]);return w&&x.extend(!0,d,w),d}ys.href=Jn.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Jn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Jn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,m){return m?qn(qn(d,x.ajaxSettings),m):qn(x.ajaxSettings,d)},ajaxPrefilter:Gs(uc),ajaxTransport:Gs(fe),ajax:function(d,m){"object"==typeof d&&(m=d,d=void 0);var y,w,_,T,O,q,H,K,et,at,J=x.ajaxSetup({},m=m||{}),ut=J.context||J,Pt=J.context&&(ut.nodeType||ut.jquery)?x(ut):x.event,le=x.Deferred(),D=x.Callbacks("once memory"),nn=J.statusCode||{},pn={},cn={},_r="canceled",Ft={readyState:0,getResponseHeader:function(Te){var Le;if(H){if(!T)for(T={};Le=hu.exec(_);)T[Le[1].toLowerCase()+" "]=(T[Le[1].toLowerCase()+" "]||[]).concat(Le[2]);Le=T[Te.toLowerCase()+" "]}return null==Le?null:Le.join(", ")},getAllResponseHeaders:function(){return H?_:null},setRequestHeader:function(Te,Le){return null==H&&(Te=cn[Te.toLowerCase()]=cn[Te.toLowerCase()]||Te,pn[Te]=Le),this},overrideMimeType:function(Te){return null==H&&(J.mimeType=Te),this},statusCode:function(Te){var Le;if(Te)if(H)Ft.always(Te[Ft.status]);else for(Le in Te)nn[Le]=[nn[Le],Te[Le]];return this},abort:function(Te){var Le=Te||_r;return y&&y.abort(Le),Je(0,Le),this}};if(le.promise(Ft),J.url=((d||J.url||Jn.href)+"").replace(bu,Jn.protocol+"//"),J.type=m.method||m.type||J.method||J.type,J.dataTypes=(J.dataType||"*").toLowerCase().match(re)||[""],null==J.crossDomain){q=Jt.createElement("a");try{q.href=J.url,q.href=q.href,J.crossDomain=ys.protocol+"//"+ys.host!=q.protocol+"//"+q.host}catch{J.crossDomain=!0}}if(J.data&&J.processData&&"string"!=typeof J.data&&(J.data=x.param(J.data,J.traditional)),Hn(uc,J,m,Ft),H)return Ft;for(et in(K=x.event&&J.global)&&0==x.active++&&x.event.trigger("ajaxStart"),J.type=J.type.toUpperCase(),J.hasContent=!dc.test(J.type),w=J.url.replace(Sn,""),J.hasContent?J.data&&J.processData&&0===(J.contentType||"").indexOf("application/x-www-form-urlencoded")&&(J.data=J.data.replace(cc,"+")):(at=J.url.slice(w.length),J.data&&(J.processData||"string"==typeof J.data)&&(w+=(eo.test(w)?"&":"?")+J.data,delete J.data),!1===J.cache&&(w=w.replace(vs,"$1"),at=(eo.test(w)?"&":"?")+"_="+kr.guid+++at),J.url=w+at),J.ifModified&&(x.lastModified[w]&&Ft.setRequestHeader("If-Modified-Since",x.lastModified[w]),x.etag[w]&&Ft.setRequestHeader("If-None-Match",x.etag[w])),(J.data&&J.hasContent&&!1!==J.contentType||m.contentType)&&Ft.setRequestHeader("Content-Type",J.contentType),Ft.setRequestHeader("Accept",J.dataTypes[0]&&J.accepts[J.dataTypes[0]]?J.accepts[J.dataTypes[0]]+("*"!==J.dataTypes[0]?", "+Fi+"; q=0.01":""):J.accepts["*"]),J.headers)Ft.setRequestHeader(et,J.headers[et]);if(J.beforeSend&&(!1===J.beforeSend.call(ut,Ft,J)||H))return Ft.abort();if(_r="abort",D.add(J.complete),Ft.done(J.success),Ft.fail(J.error),y=Hn(fe,J,m,Ft)){if(Ft.readyState=1,K&&Pt.trigger("ajaxSend",[Ft,J]),H)return Ft;J.async&&0<J.timeout&&(O=bt.setTimeout(function(){Ft.abort("timeout")},J.timeout));try{H=!1,y.send(pn,Je)}catch(Te){if(H)throw Te;Je(-1,Te)}}else Je(-1,"No Transport");function Je(Te,Le,oo,ir){var lr,Cs,$n,gr,Ao,er=Le;H||(H=!0,O&&bt.clearTimeout(O),y=void 0,_=ir||"",Ft.readyState=0<Te?4:0,lr=200<=Te&&Te<300||304===Te,oo&&(gr=function(Ee,$e,_n){for(var $r,Nn,se,tn,rn=Ee.contents,Oe=Ee.dataTypes;"*"===Oe[0];)Oe.shift(),void 0===$r&&($r=Ee.mimeType||$e.getResponseHeader("Content-Type"));if($r)for(Nn in rn)if(rn[Nn]&&rn[Nn].test($r)){Oe.unshift(Nn);break}if(Oe[0]in _n)se=Oe[0];else{for(Nn in _n){if(!Oe[0]||Ee.converters[Nn+" "+Oe[0]]){se=Nn;break}tn||(tn=Nn)}se=se||tn}if(se)return se!==Oe[0]&&Oe.unshift(se),_n[se]}(J,Ft,oo)),!lr&&-1<x.inArray("script",J.dataTypes)&&x.inArray("json",J.dataTypes)<0&&(J.converters["text script"]=function(){}),gr=function(Ee,$e,_n,$r){var Nn,se,tn,rn,Oe,hr={},xs=Ee.dataTypes.slice();if(xs[1])for(tn in Ee.converters)hr[tn.toLowerCase()]=Ee.converters[tn];for(se=xs.shift();se;)if(Ee.responseFields[se]&&(_n[Ee.responseFields[se]]=$e),!Oe&&$r&&Ee.dataFilter&&($e=Ee.dataFilter($e,Ee.dataType)),Oe=se,se=xs.shift())if("*"===se)se=Oe;else if("*"!==Oe&&Oe!==se){if(!(tn=hr[Oe+" "+se]||hr["* "+se]))for(Nn in hr)if((rn=Nn.split(" "))[1]===se&&(tn=hr[Oe+" "+rn[0]]||hr["* "+rn[0]])){!0===tn?tn=hr[Nn]:!0!==hr[Nn]&&(se=rn[0],xs.unshift(rn[1]));break}if(!0!==tn)if(tn&&Ee.throws)$e=tn($e);else try{$e=tn($e)}catch(Js){return{state:"parsererror",error:tn?Js:"No conversion from "+Oe+" to "+se}}}return{state:"success",data:$e}}(J,gr,Ft,lr),lr?(J.ifModified&&((Ao=Ft.getResponseHeader("Last-Modified"))&&(x.lastModified[w]=Ao),(Ao=Ft.getResponseHeader("etag"))&&(x.etag[w]=Ao)),204===Te||"HEAD"===J.type?er="nocontent":304===Te?er="notmodified":(er=gr.state,Cs=gr.data,lr=!($n=gr.error))):($n=er,!Te&&er||(er="error",Te<0&&(Te=0))),Ft.status=Te,Ft.statusText=(Le||er)+"",lr?le.resolveWith(ut,[Cs,er,Ft]):le.rejectWith(ut,[Ft,er,$n]),Ft.statusCode(nn),nn=void 0,K&&Pt.trigger(lr?"ajaxSuccess":"ajaxError",[Ft,J,lr?Cs:$n]),D.fireWith(ut,[Ft,er]),K&&(Pt.trigger("ajaxComplete",[Ft,J]),--x.active||x.event.trigger("ajaxStop")))}return Ft},getJSON:function(d,m,y){return x.get(d,m,y,"json")},getScript:function(d,m){return x.get(d,void 0,m,"script")}}),x.each(["get","post"],function(d,m){x[m]=function(y,w,_,T){return Mt(w)&&(T=T||_,_=w,w=void 0),x.ajax(x.extend({url:y,type:m,dataType:T,data:w,success:_},x.isPlainObject(y)&&y))}}),x.ajaxPrefilter(function(d){var m;for(m in d.headers)"content-type"===m.toLowerCase()&&(d.contentType=d.headers[m]||"")}),x._evalUrl=function(d,m,y){return x.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){x.globalEval(w,m,y)}})},x.fn.extend({wrapAll:function(d){var m;return this[0]&&(Mt(d)&&(d=d.call(this[0])),m=x(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(d){return Mt(d)?this.each(function(m){x(this).wrapInner(d.call(this,m))}):this.each(function(){var m=x(this),y=m.contents();y.length?y.wrapAll(d):m.append(d)})},wrap:function(d){var m=Mt(d);return this.each(function(y){x(this).wrapAll(m?d.call(this,y):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(d){return!x.expr.pseudos.visible(d)},x.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new bt.XMLHttpRequest}catch{}};var vu={0:200,1223:204},Qs=x.ajaxSettings.xhr();Yt.cors=!!Qs&&"withCredentials"in Qs,Yt.ajax=Qs=!!Qs,x.ajaxTransport(function(d){var m,y;if(Yt.cors||Qs&&!d.crossDomain)return{send:function(w,_){var T,O=d.xhr();if(O.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(T in d.xhrFields)O[T]=d.xhrFields[T];for(T in d.mimeType&&O.overrideMimeType&&O.overrideMimeType(d.mimeType),d.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)O.setRequestHeader(T,w[T]);m=function(q){return function(){m&&(m=y=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,"abort"===q?O.abort():"error"===q?"number"!=typeof O.status?_(0,"error"):_(O.status,O.statusText):_(vu[O.status]||O.status,O.statusText,"text"!==(O.responseType||"text")||"string"!=typeof O.responseText?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=m(),y=O.onerror=O.ontimeout=m("error"),void 0!==O.onabort?O.onabort=y:O.onreadystatechange=function(){4===O.readyState&&bt.setTimeout(function(){m&&y()})},m=m("abort");try{O.send(d.hasContent&&d.data||null)}catch(q){if(m)throw q}},abort:function(){m&&m()}}}),x.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return x.globalEval(d),d}}}),x.ajaxPrefilter("script",function(d){void 0===d.cache&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),x.ajaxTransport("script",function(d){var m,y;if(d.crossDomain||d.scriptAttrs)return{send:function(w,_){m=x("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",y=function(T){m.remove(),y=null,T&&_("error"===T.type?404:200,T.type)}),Jt.head.appendChild(m[0])},abort:function(){y&&y()}}});var Zs,ji=[],Ze=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=ji.pop()||x.expando+"_"+kr.guid++;return this[d]=!0,d}}),x.ajaxPrefilter("json jsonp",function(d,m,y){var w,_,T,O=!1!==d.jsonp&&(Ze.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ze.test(d.data)&&"data");if(O||"jsonp"===d.dataTypes[0])return w=d.jsonpCallback=Mt(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,O?d[O]=d[O].replace(Ze,"$1"+w):!1!==d.jsonp&&(d.url+=(eo.test(d.url)?"&":"?")+d.jsonp+"="+w),d.converters["script json"]=function(){return T||x.error(w+" was not called"),T[0]},d.dataTypes[0]="json",_=bt[w],bt[w]=function(){T=arguments},y.always(function(){void 0===_?x(bt).removeProp(w):bt[w]=_,d[w]&&(d.jsonpCallback=m.jsonpCallback,ji.push(w)),T&&Mt(_)&&_(T[0]),T=_=void 0}),"script"}),Yt.createHTMLDocument=((Zs=Jt.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Zs.childNodes.length),x.parseHTML=function(d,m,y){return"string"!=typeof d?[]:("boolean"==typeof m&&(y=m,m=!1),m||(Yt.createHTMLDocument?((w=(m=Jt.implementation.createHTMLDocument("")).createElement("base")).href=Jt.location.href,m.head.appendChild(w)):m=Jt),T=!y&&[],(_=k.exec(d))?[m.createElement(_[1])]:(_=La([d],m,T),T&&T.length&&x(T).remove(),x.merge([],_.childNodes)));var w,_,T},x.fn.load=function(d,m,y){var w,_,T,O=this,q=d.indexOf(" ");return-1<q&&(w=Qo(d.slice(q)),d=d.slice(0,q)),Mt(m)?(y=m,m=void 0):m&&"object"==typeof m&&(_="POST"),0<O.length&&x.ajax({url:d,type:_||"GET",dataType:"html",data:m}).done(function(H){T=arguments,O.html(w?x("<div>").append(x.parseHTML(H)).find(w):H)}).always(y&&function(H,K){O.each(function(){y.apply(this,T||[H.responseText,K,H])})}),this},x.expr.pseudos.animated=function(d){return x.grep(x.timers,function(m){return d===m.elem}).length},x.offset={setOffset:function(d,m,y){var w,_,T,O,q,H,K=x.css(d,"position"),et=x(d),at={};"static"===K&&(d.style.position="relative"),q=et.offset(),T=x.css(d,"top"),H=x.css(d,"left"),("absolute"===K||"fixed"===K)&&-1<(T+H).indexOf("auto")?(O=(w=et.position()).top,_=w.left):(O=parseFloat(T)||0,_=parseFloat(H)||0),Mt(m)&&(m=m.call(d,y,x.extend({},q))),null!=m.top&&(at.top=m.top-q.top+O),null!=m.left&&(at.left=m.left-q.left+_),"using"in m?m.using.call(d,at):et.css(at)}},x.fn.extend({offset:function(d){if(arguments.length)return void 0===d?this:this.each(function(_){x.offset.setOffset(this,d,_)});var m,y,w=this[0];return w?w.getClientRects().length?{top:(m=w.getBoundingClientRect()).top+(y=w.ownerDocument.defaultView).pageYOffset,left:m.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var d,m,y,w=this[0],_={top:0,left:0};if("fixed"===x.css(w,"position"))m=w.getBoundingClientRect();else{for(m=this.offset(),y=w.ownerDocument,d=w.offsetParent||y.documentElement;d&&(d===y.body||d===y.documentElement)&&"static"===x.css(d,"position");)d=d.parentNode;d&&d!==w&&1===d.nodeType&&((_=x(d).offset()).top+=x.css(d,"borderTopWidth",!0),_.left+=x.css(d,"borderLeftWidth",!0))}return{top:m.top-_.top-x.css(w,"marginTop",!0),left:m.left-_.left-x.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&"static"===x.css(d,"position");)d=d.offsetParent;return d||xo})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,m){var y="pageYOffset"===m;x.fn[d]=function(w){return Ur(this,function(_,T,O){var q;if(it(_)?q=_:9===_.nodeType&&(q=_.defaultView),void 0===O)return q?q[m]:_[T];q?q.scrollTo(y?q.pageXOffset:O,y?O:q.pageYOffset):_[T]=O},d,w,arguments.length)}}),x.each(["top","left"],function(d,m){x.cssHooks[m]=Sr(Yt.pixelPosition,function(y,w){if(w)return w=gs(y,m),Ve.test(w)?x(y).position()[m]+"px":w})}),x.each({Height:"height",Width:"width"},function(d,m){x.each({padding:"inner"+d,content:m,"":"outer"+d},function(y,w){x.fn[w]=function(_,T){var O=arguments.length&&(y||"boolean"!=typeof _),q=y||(!0===_||!0===T?"margin":"border");return Ur(this,function(H,K,et){var at;return it(H)?0===w.indexOf("outer")?H["inner"+d]:H.document.documentElement["client"+d]:9===H.nodeType?(at=H.documentElement,Math.max(H.body["scroll"+d],at["scroll"+d],H.body["offset"+d],at["offset"+d],at["client"+d])):void 0===et?x.css(H,K,q):x.style(H,K,et,q)},m,O?_:void 0,O)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,m){x.fn[m]=function(y){return this.on(m,y)}}),x.fn.extend({bind:function(d,m,y){return this.on(d,null,m,y)},unbind:function(d,m){return this.off(d,null,m)},delegate:function(d,m,y,w){return this.on(m,d,y,w)},undelegate:function(d,m,y){return 1===arguments.length?this.off(d,"**"):this.off(m,d||"**",y)},hover:function(d,m){return this.on("mouseenter",d).on("mouseleave",m||d)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,m){x.fn[m]=function(y,w){return 0<arguments.length?this.on(m,null,y,w):this.trigger(m)}});var no=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(d,m){var y,w,_;if("string"==typeof m&&(y=d[m],m=d,d=y),Mt(d))return w=ie.call(arguments,2),(_=function(){return d.apply(m||this,w.concat(ie.call(arguments)))}).guid=d.guid=d.guid||x.guid++,_},x.holdReady=function(d){d?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=kt,x.isFunction=Mt,x.isWindow=it,x.camelCase=Qe,x.type=Se,x.now=Date.now,x.isNumeric=function(d){var m=x.type(d);return("number"===m||"string"===m)&&!isNaN(d-parseFloat(d))},x.trim=function(d){return null==d?"":(d+"").replace(no,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var tr=bt.jQuery,ro=bt.$;return x.noConflict=function(d){return bt.$===x&&(bt.$=ro),d&&bt.jQuery===x&&(bt.jQuery=tr),x},typeof Qt>"u"&&(bt.jQuery=bt.$=x),x}),function(bt){bt.imageArea=function(Qt,Zt){var Tn,en,Gn,Rn,Vt=Qt.options,ie=Qt.$image,Xe=Qt.$trigger,xr={},wr=!0,Tt=!0,Yt=[0,0],Mt=[0,0],it={id:Zt,x:0,y:0,z:0,height:0,width:0},En=function(){Qt.blurAll(),it.z=100,mt()},Ie=function(){return it},Se=function(Nt){ie.trigger(Nt,[it.id,Qt.areas()])},ct=function(Nt){var oe=Nt||window.event||{};oe.cancelBubble=!0,oe.returnValue=!1,oe.stopPropagation&&oe.stopPropagation(),oe.preventDefault&&oe.preventDefault()},x=function(Nt,oe){var de,Rt;switch(Nt){case"start":de="mousedown",Rt="touchstart";break;case"move":de="mousemove",Rt="touchmove";break;case"stop":de="mouseup",Rt="touchend";break;default:return}oe&&jQuery.isFunction(oe)?bt(window.document).on(de,oe).on(Rt,oe):bt(window.document).off(de).off(Rt)},Un=function(){Tn.css({cursor:"default",width:it.width,height:it.height,left:it.x,top:it.y}),en.css({backgroundPosition:-it.x-1+"px "+(-it.y-1)+"px",cursor:Vt.allowMove?"move":"default",width:it.width-2>0?it.width-2:0,height:it.height-2>0?it.height-2:0,left:it.x+1,top:it.y+1}),Gn.css({width:it.width-2>0?it.width-2:0,left:it.x+2,top:it.y+1})},kt=function(Nt){Vt.allowResize&&(Nt?bt.each(xr,function(oe,de){var Rt,Ae,re=Math.round(de.width()/2),Z=Math.round(de.height()/2),Co=oe[0],zr=oe[oe.length-1];Rt="n"===Co?-Z:"s"===Co?it.height-Z-1:Math.round(it.height/2)-Z-1,Ae="e"===zr?it.width-re-1:"w"===zr?-re:Math.round(it.width/2)-re-1,de.css({display:"block",left:it.x+Ae,top:it.y+Rt})}):bt(".select-areas-resize-handler").each(function(){bt(this).css({display:"none"})}))},On=function(Nt){Rn&&Rn.css({display:Nt?"block":"none",left:it.x+it.width+1,top:it.y-Rn.outerHeight()-1})},zs=function(Nt){Tn.css({cursor:Nt}),en.css({cursor:Nt})},mt=function(Nt){switch(Nt){case"startSelection":Qt._refresh(),Un(),kt(),On(!0);break;case"pickSelection":case"pickResizeHandler":kt();break;case"resizeSelection":Un(),kt(),zs("crosshair"),On(!0);break;case"moveSelection":Un(),kt(),zs("move"),On(!0);break;case"blur":Un(),kt(),On();break;default:Un(),kt(!0),On(!0)}},Zr=function(Nt){ct(Nt),En(),x("move",fr),x("stop",Qn);var oe=k(Nt);Yt[0]=oe[0]-it.x,Yt[1]=oe[1]-it.y,mt("pickSelection")},St=function(Nt){ct(Nt),En();var oe=Nt.target.className.split(" ")[1];"w"===oe[oe.length-1]&&(Mt[0]+=it.width,it.x=Mt[0]-it.width),"n"===oe[0]&&(Mt[1]+=it.height,it.y=Mt[1]-it.height),"n"===oe||"s"===oe?wr=!1:("e"===oe||"w"===oe)&&(Tt=!1),x("move",bo),x("stop",Qn),mt("pickResizeHandler")},bo=function(Nt){ct(Nt),En();var oe=k(Nt),de=oe[1]-Mt[1],Rt=oe[0]-Mt[0];Math.abs(Rt)<Vt.minSize[0]&&(Rt=Rt>=0?Vt.minSize[0]:-Vt.minSize[0]),Math.abs(de)<Vt.minSize[1]&&(de=de>=0?Vt.minSize[1]:-Vt.minSize[1]),(Mt[0]+Rt<0||Mt[0]+Rt>ie.width())&&(Rt=-Rt),(Mt[1]+de<0||Mt[1]+de>ie.height())&&(de=-de),Vt.maxSize[0]>Vt.minSize[0]&&Vt.maxSize[1]>Vt.minSize[1]&&(Math.abs(Rt)>Vt.maxSize[0]&&(Rt=Rt>=0?Vt.maxSize[0]:-Vt.maxSize[0]),Math.abs(de)>Vt.maxSize[1]&&(de=de>=0?Vt.maxSize[1]:-Vt.maxSize[1])),wr&&(it.width=Rt),Tt&&(it.height=de),Vt.aspectRatio&&(Rt>0&&de>0||Rt<0&&de<0?wr?de=Math.round(Rt/Vt.aspectRatio):Rt=Math.round(de*Vt.aspectRatio):wr?de=-Math.round(Rt/Vt.aspectRatio):Rt=-Math.round(de*Vt.aspectRatio),Mt[0]+Rt>ie.width()&&(Rt=ie.width()-Mt[0],de=de>0?Math.round(Rt/Vt.aspectRatio):-Math.round(Rt/Vt.aspectRatio)),Mt[1]+de<0&&(de=-Mt[1],Rt=Rt>0?-Math.round(de*Vt.aspectRatio):Math.round(de*Vt.aspectRatio)),Mt[1]+de>ie.height()&&(de=ie.height()-Mt[1],Rt=Rt>0?Math.round(de*Vt.aspectRatio):-Math.round(de*Vt.aspectRatio)),it.width=Rt,it.height=de),it.width<0?(it.width=Math.abs(it.width),it.x=Mt[0]-it.width):it.x=Mt[0],it.height<0?(it.height=Math.abs(it.height),it.y=Mt[1]-it.height):it.y=Mt[1],Se("changing"),mt("resizeSelection")},fr=function(Nt){if(ct(Nt),Vt.allowMove){En();var oe=k(Nt);vo({x:oe[0]-Yt[0],y:oe[1]-Yt[1]}),Se("changing")}},vo=function(Nt){it.x=Nt.x>0?Nt.x+it.width<ie.width()?Nt.x:ie.width()-it.width:0,it.y=Nt.y>0?Nt.y+it.height<ie.height()?Nt.y:ie.height()-it.height:0,mt("moveSelection")},Qn=function(Nt,oe){ct(Nt),function(){bt.each(arguments,function(Nt,oe){x(oe)})}("move","stop"),oe&&(it.x=oe.x,it.y=oe.y,it.z=oe.z,it.width=oe.width,it.height=oe.height,Un()),Mt[0]=it.x,Mt[1]=it.y,wr=!0,Tt=!0,Se("changed"),mt("releaseSelection")},xe=function(Nt){Se("deleted"),ct(Nt),en.remove(),Tn.remove(),Gn.remove(),bt.each(xr,function(oe,de){de.remove()}),Rn&&Rn.remove(),Qt._remove(Zt)},k=function(Nt){var oe=function(Nt){var oe=bt(Nt).offset();return[oe.left,oe.top]}(ie);Nt.pageX||(Nt.originalEvent&&(Nt=Nt.originalEvent),Nt.changedTouches&&(Nt=Nt.changedTouches[0]),Nt.touches&&(Nt=Nt.touches[0]));var de=Nt.pageX-oe[0],Rt=Nt.pageY-oe[1];return[de=de<0?0:de>ie.width()?ie.width():de,Rt=Rt<0?0:Rt>ie.height()?ie.height():Rt]};if(Tn=bt("<div id='select-areas-outline_"+Ie().id+'\'  class="select-areas-outline"/>').css({opacity:Vt.outlineOpacity,position:"absolute"}).insertAfter(Xe),en=bt("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+Ie().id).css({position:"absolute"}).insertAfter(Tn),Gn=bt("<div id='select-areas-label-container_"+Ie().id+'\'  class="select-areas-label-container"/>').css({position:"absolute"}).insertAfter(Xe),Vt.allowResize&&bt.each(["nw","n","ne","e","se","s","sw","w"],function(Nt,oe){xr[oe]=bt('<div class="select-areas-resize-handler '+oe+" select-areas-resize-handler_"+Ie().id+'"/>').css({opacity:.5,position:"absolute",cursor:oe+"-resize"}).insertAfter(en).mousedown(St).bind("touchstart",St)}),Vt.allowDelete){var yo=function(Nt){return Nt.click(xe).bind("touchstart",xe).bind("tap",xe),Nt};Rn=yo(bt("<div id='select-areas-delete_"+Ie().id+'\'  class="delete-area" />')).append(yo(bt('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(en)}return Vt.allowMove&&en.mousedown(Zr).bind("touchstart",Zr),En(),{getData:Ie,startSelection:function(Nt){ct(Nt),it.width=Vt.minSize[0],it.height=Vt.minSize[1],En(),x("move",bo),x("stop",Qn),(Mt=k(Nt))[0]+it.width>ie.width()&&(Mt[0]=ie.width()-it.width),Mt[1]+it.height>ie.height()&&(Mt[1]=ie.height()-it.height),it.x=Mt[0],it.y=Mt[1],mt("startSelection")},deleteSelection:xe,options:Vt,blur:function(){it.z=0,mt("blur")},focus:En,nudge:function(Nt){Nt.x=it.x,Nt.y=it.y,Nt.d&&(Nt.y=it.y+Nt.d),Nt.u&&(Nt.y=it.y-Nt.u),Nt.l&&(Nt.x=it.x-Nt.l),Nt.r&&(Nt.x=it.x+Nt.r),vo(Nt),Se("changed")},set:function(Nt,oe){it=bt.extend(it,Nt),Mt[0]=it.x,Mt[1]=it.y,oe||Se("changed")},contains:function(Nt){return Nt.x>=it.x&&Nt.x<=it.x+it.width&&Nt.y>=it.y&&Nt.y<=it.y+it.height}}},bt.imageSelectAreas=function(){},bt.imageSelectAreas.prototype.init=function(Qt,Zt){var Vt=this;this.options=bt.extend({allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null},Zt),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=bt(Qt),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=bt("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=bt('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=bt("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),bt.each(this.options.areas,function(Xe,Tn){Vt._add(Tn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(bt.proxy(this.newArea,this)).on("touchstart",bt.proxy(this.newArea,this)),this.options.allowNudge&&bt("html").keydown(function(Xe){var Gn,en={37:"l",38:"u",39:"r",40:"d"}[Xe.which];if(en&&(Vt._eachArea(function(Rn){if(100===Rn.getData().z)return Gn=Rn,!1}),Gn)){var xr={};xr[en]=1,Gn.nudge(xr)}})},bt.imageSelectAreas.prototype._refresh=function(){var Qt=this.areas().length;this.$overlay.css({display:Qt?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},bt.imageSelectAreas.prototype._eachArea=function(Qt){bt.each(this._areas,function(Zt,Vt){if(Vt)return Qt(Vt,Zt)})},bt.imageSelectAreas.prototype._remove=function(Qt){delete this._areas[Qt],this._refresh()},bt.imageSelectAreas.prototype.remove=function(Qt){this._areas[Qt]&&this._areas[Qt].deleteSelection()},bt.imageSelectAreas.prototype.newArea=function(Qt){var Zt=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(Vt,ie){Zt=Math.max(Zt,parseInt(ie,10))}),this._areas[Zt+=1]=bt.imageArea(this,Zt),Qt&&this._areas[Zt].startSelection(Qt)),Zt},bt.imageSelectAreas.prototype.set=function(Qt,Zt,Vt){this._areas[Qt]&&(Zt.id=Qt,this._areas[Qt].set(Zt,Vt),this._areas[Qt].focus())},bt.imageSelectAreas.prototype._add=function(Qt,Zt){var Vt=this.newArea();this.set(Vt,Qt,Zt)},bt.imageSelectAreas.prototype.add=function(Qt){var Zt=this;this.blurAll(),bt.isArray(Qt)?bt.each(Qt,function(Vt,ie){Zt._add(ie)}):this._add(Qt),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},bt.imageSelectAreas.prototype.reset=function(){var Qt=this;this._eachArea(function(Zt,Vt){Qt.remove(Vt)}),this._refresh()},bt.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},bt.imageSelectAreas.prototype.areas=function(){var Qt=[];return this._eachArea(function(Zt){Qt.push(Zt.getData())}),Qt},bt.imageSelectAreas.prototype.relativeAreas=function(){for(var Qt=this.areas(),Zt=[],Vt=this.ratio,ie=function(Tn){return Math.floor(Tn/Vt)},Xe=0;Xe<Qt.length;Xe++)Zt[Xe]=bt.extend({},Qt[Xe]),Zt[Xe].x=ie(Zt[Xe].x),Zt[Xe].y=ie(Zt[Xe].y),Zt[Xe].width=ie(Zt[Xe].width),Zt[Xe].height=ie(Zt[Xe].height);return Zt},bt.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(Qt){Qt.blur()})},bt.imageSelectAreas.prototype.contains=function(Qt){var Zt=!1;return this._eachArea(function(Vt){if(Vt.contains(Qt))return Zt=!0,!1}),Zt},bt.selectAreas=function(Qt,Zt){var Vt=bt(Qt);if(!Vt.data("mainImageSelectAreas")){var ie=new bt.imageSelectAreas;ie.init(Qt,Zt),Vt.data("mainImageSelectAreas",ie),Vt.trigger("loaded")}return Vt.data("mainImageSelectAreas")},bt.fn.selectAreas=function(Qt){if(bt.imageSelectAreas.prototype[Qt]){var Zt=bt.imageSelectAreas.prototype[Qt].apply(bt.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Zt>"u"?this:Zt}if("object"==typeof Qt||!Qt)return this.each(function(){var Vt=this,ie=new Image;ie.onload=function(){bt.selectAreas(Vt,Qt)},ie.src=Vt.src}),this;bt.error("Method "+Qt+" does not exist on jQuery.selectAreas")}}(jQuery);
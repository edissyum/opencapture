(function(){"use strict";var ge=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},Ye=function(e){return{eq:e}},Qe=Ye(function(e,t){return e===t}),We=function(e){return Ye(function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e.eq(t[r],n[r]))return!1;return!0})},at=function(e){return Ye(function(t,n){var o=Object.keys(t),r=Object.keys(n);if(!function(l,c){return function(d,f){return Ye(function(m,b){return d.eq(f(m),f(b))})}(We(l),function(d){return function(f,m){return Array.prototype.slice.call(f).sort(m)}(d,c)})}(Qe).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!e.eq(t[i],n[i]))return!1}return!0})},Yt=Ye(function(e,t){if(e===t)return!0;var n=ge(e);return n===ge(t)&&(function(o){return["undefined","boolean","number","string","function","xml","null"].indexOf(o)!==-1}(n)?e===t:n==="array"?We(Yt).eq(e,t):n==="object"&&at(Yt).eq(e,t))});const kn=Object.getPrototypeOf,Zt=(e,t,n)=>{var o;return!!n(e,t.prototype)||((o=e.constructor)===null||o===void 0?void 0:o.name)===t.name},Yn=e=>t=>(n=>{const o=typeof n;return n===null?"null":o==="object"&&Array.isArray(n)?"array":o==="object"&&Zt(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(t)===e,vo=e=>t=>typeof t===e,_n=e=>t=>e===t,yo=(e,t)=>Ke(e)&&Zt(e,t,(n,o)=>kn(n)===o),Ae=Yn("string"),Ke=Yn("object"),Le=e=>yo(e,Object),re=Yn("array"),Je=_n(null),pn=vo("boolean"),It=_n(void 0),xt=e=>e==null,ie=e=>!xt(e),gt=vo("function"),x=vo("number"),Nn=(e,t)=>{if(re(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},Se=()=>{},An=(e,t)=>(...n)=>e(t.apply(null,n)),Ts=(e,t)=>n=>e(t(n)),ue=e=>()=>e,mt=e=>e,Yo=(e,t)=>e===t;function ye(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const dr=e=>t=>!e(t),io=e=>()=>{throw new Error(e)},ur=e=>e(),Gn=e=>{e()},St=ue(!1),jt=ue(!0);class _{constructor(t,n){this.tag=t,this.value=n}static some(t){return new _(!0,t)}static none(){return _.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?_.some(t(this.value)):_.none()}bind(t){return this.tag?t(this.value):_.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:_.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return ie(t)?_.some(t):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_.singletonNone=new _(!1);const fr=Array.prototype.slice,ke=Array.prototype.indexOf,rt=Array.prototype.push,lt=(e,t)=>ke.call(e,t),Te=(e,t)=>lt(e,t)>-1,Et=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},ot=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const s=e[r];o[r]=t(s,r)}return o},Q=(e,t)=>{for(let n=0,o=e.length;n<o;n++)t(e[n],n)},mr=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},zo=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];(t(a,r)?n:o).push(a)}return{pass:n,fail:o}},Ve=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const s=e[o];t(s,o)&&n.push(s)}return n},Mr=(e,t,n)=>(mr(e,(o,r)=>{n=t(n,o,r)}),n),gn=(e,t,n)=>(Q(e,(o,r)=>{n=t(n,o,r)}),n),Uo=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const s=e[o];if(t(s,o))return _.some(s);if(n(s,o))break}return _.none()},Qt=(e,t)=>Uo(e,t,St),Rs=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return _.some(n);return _.none()},ac=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!re(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);rt.apply(t,e[n])}return t},Jt=(e,t)=>ac(ot(e,t)),to=(e,t)=>{for(let n=0,o=e.length;n<o;++n)if(t(e[n],n)!==!0)return!1;return!0},Go=e=>{const t=fr.call(e,0);return t.reverse(),t},et=(e,t)=>Ve(e,n=>!Te(t,n)),Tn=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const s=e[o];n[String(s)]=t(s,o)}return n},Ir=(e,t)=>{const n=fr.call(e,0);return n.sort(t),n},Os=(e,t)=>t>=0&&t<e.length?_.some(e[t]):_.none(),yn=e=>Os(e,0),Qo=e=>Os(e,e.length-1),hn=gt(Array.from)?Array.from:e=>fr.call(e),Qn=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return _.none()},pr=(e,t)=>{const n=[],o=gt(t)?r=>Et(n,s=>t(s,r)):r=>Te(n,r);for(let r=0,s=e.length;r<s;r++){const a=e[r];o(a)||n.push(a)}return n},sn=Object.keys,wu=Object.hasOwnProperty,yt=(e,t)=>{const n=sn(e);for(let o=0,r=n.length;o<r;o++){const s=n[o];t(e[s],s)}},Bs=(e,t)=>ic(e,(n,o)=>({k:o,v:t(n,o)})),ic=(e,t)=>{const n={};return yt(e,(o,r)=>{const s=t(o,r);n[s.k]=s.v}),n},gr=e=>(t,n)=>{e[n]=t},hr=(e,t,n,o)=>{yt(e,(r,s)=>{(t(r,s)?n:o)(r,s)})},br=(e,t)=>{const n={};return hr(e,t,gr(n),Se),n},vr=(e,t)=>{const n=[];return yt(e,(o,r)=>{n.push(t(o,r))}),n},Aa=e=>vr(e,mt),Bt=(e,t)=>Ie(e,t)?_.from(e[t]):_.none(),Ie=(e,t)=>wu.call(e,t),an=(e,t)=>Ie(e,t)&&e[t]!==void 0&&e[t]!==null,lo=e=>{if(!re(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return Q(e,(o,r)=>{const s=sn(o);if(s.length!==1)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(n[a]!==void 0)throw new Error("duplicate key detected:"+a);if(a==="cata")throw new Error("cannot have a case named cata (sorry)");if(!re(i))throw new Error("case arguments must be an array");t.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...d)=>{if(d.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+d.length);return d[r].apply(null,l)},match:d=>{const f=sn(d);if(t.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+f.join(","));if(!to(t,m=>Te(f,m)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+`
Required: `+t.join(", "));return d[a].apply(null,l)},log:d=>{console.log(d,{constructors:t,constructor:a,params:l})}}}}),n},en=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},Ni=e=>{const t=s=>s(e),n=ue(e),o=()=>r,r={tag:!0,inner:e,fold:(s,a)=>a(e),isValue:jt,isError:St,map:s=>ln.value(s(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(e)},toOptional:()=>_.some(e)};return r},Ai=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(o,r)=>o(e),isValue:St,isError:jt,map:t,mapError:o=>ln.error(o(e)),bind:t,exists:St,forall:jt,getOr:mt,or:mt,getOrThunk:ur,orThunk:ur,getOrDie:io(String(e)),each:Se,toOptional:_.none};return n},ln={value:Ni,error:Ai,fromOption:(e,t)=>e.fold(()=>Ai(t),Ni)},ns=typeof window<"u"?window:Function("return this;")(),Ta=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ds=0;const Ps=e=>{const t=new Date().getTime(),n=Math.floor(1e9*Ta());return Ds++,e+"_"+n+Ds+String(t)},lc=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const s in r)Ie(r,s)&&(n[s]=e(n[s],r[s]))}return n},Ti=lc((e,t)=>Le(e)&&Le(t)?Ti(e,t):t),cc=lc((e,t)=>t),os=(e,t,n=Yo)=>e.exists(o=>n(o,t)),dc=(e,t,n=Yo)=>nn(e,t,n).getOr(e.isNone()&&t.isNone()),nn=(e,t,n)=>e.isSome()&&t.isSome()?_.some(n(e.getOrDie(),t.getOrDie())):_.none(),Co=(e,t)=>e?_.some(t):_.none(),Ri=(e,t)=>((n,o)=>{let r=o??ns;for(let s=0;s<n.length&&r!=null;++s)r=r[n[s]];return r})(e.split("."),t);lo([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Oi=e=>{const t=en(_.none()),n=()=>t.get().each(o=>clearInterval(o));return{clear:()=>{n(),t.set(_.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:o=>{n(),t.set(_.some(setInterval(o,e)))}}},wo=()=>{const e=(t=>{const n=en(_.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(_.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(_.some(r))}}})(Se);return{...e,on:t=>e.get().each(t)}},Ls=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,Bi=(e,t)=>$t(e,t)?((n,o)=>n.substring(o))(e,t.length):e,bn=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return r!==-1&&(!!It(o)||r+t.length<=o)},$t=(e,t)=>Ls(e,t,0),Ra=(e,t)=>Ls(e,t,e.length-t.length),Oa=e=>t=>t.replace(e,""),Fr=Oa(/^\s+|\s+$/g),uc=Oa(/^\s+/g),Ba=Oa(/\s+$/g),Ho=e=>e.length>0,Ms=e=>!Ho(e),Is=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?_.none():_.some(n)},Fs=(e,t)=>{let n=null;return{cancel:()=>{Je(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Je(n)&&(n=setTimeout(()=>{n=null,e.apply(null,o)},t))}}},js=(e,t)=>{let n=null;const o=()=>{Je(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},xo=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},zn="\uFEFF",zt="\xA0",rs=e=>e===zn,jr=e=>{const t={};return Q(e,n=>{t[n]={}}),sn(t)},Di=e=>e.length!==void 0,Pi=Array.isArray,Da=(e,t,n)=>{if(!e)return!1;if(n=n||e,Di(e)){for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e)===!1)return!1}else for(const o in e)if(Ie(e,o)&&t.call(n,e[o],o,e)===!1)return!1;return!0},zs=(e,t)=>{const n=[];return Da(e,(o,r)=>{n.push(t(o,r,e))}),n},ss=(e,t)=>{const n=[];return Da(e,(o,r)=>{t&&!t(o,r,e)||n.push(o)}),n},zr=(e,t,n,o)=>{let r=It(n)?e[0]:n;for(let s=0;s<e.length;s++)r=t.call(o,r,e[s],s);return r},Li=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},Cn=e=>e[e.length-1],Mi=()=>Ur(0,0),Ur=(e,t)=>({major:e,minor:t}),Us={nu:Ur,detect:(e,t)=>{const n=String(t).toLowerCase();return e.length===0?Mi():((o,r)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const d=i[c];if(d.test(l))return d}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return Ur(a(1),a(2))})(e,n)},unknown:Mi},fc=(e,t)=>{const n=String(t).toLowerCase();return Qt(e,o=>o.search(n))},Jo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Un=e=>t=>bn(t,e),Ii=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>bn(e,"edge/")&&bn(e,"chrome")&&bn(e,"safari")&&bn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Jo],search:e=>bn(e,"chrome")&&!bn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>bn(e,"msie")||bn(e,"trident")},{name:"Opera",versionRegexes:[Jo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Un("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Un("firefox")},{name:"Safari",versionRegexes:[Jo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(bn(e,"safari")||bn(e,"mobile/"))&&bn(e,"applewebkit")}],xu=[{name:"Windows",search:Un("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>bn(e,"iphone")||bn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Un("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Un("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Un("linux"),versionRegexes:[]},{name:"Solaris",search:Un("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Un("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Un("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],as={browsers:ue(Ii),oses:ue(xu)},Fi="Edge",Pa="Chromium",ji="Opera",zi="Firefox",mc="Safari",Ui=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isEdge:o(Fi),isChromium:o(Pa),isIE:o("IE"),isOpera:o(ji),isFirefox:o(zi),isSafari:o(mc)}},Su=()=>Ui({current:void 0,version:Us.unknown()}),Eu=Ui,La=(ue(Fi),ue(Pa),ue("IE"),ue(ji),ue(zi),ue(mc),"Windows"),pc="Android",gc="Linux",hc="macOS",bc="Solaris",vc="FreeBSD",yc="ChromeOS",Hi=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isWindows:o(La),isiOS:o("iOS"),isAndroid:o(pc),isMacOS:o(hc),isLinux:o(gc),isSolaris:o(bc),isFreeBSD:o(vc),isChromeOS:o(yc)}},qi=()=>Hi({current:void 0,version:Us.unknown()}),Cc=Hi,$i=(ue(La),ue("iOS"),ue(pc),ue(gc),ue(hc),ue(bc),ue(vc),ue(yc),e=>window.matchMedia(e).matches);let wc=xo(()=>((e,t,n)=>{const o=as.browsers(),r=as.oses(),s=t.bind(l=>((c,d)=>Qn(d.brands,f=>{const m=f.brand.toLowerCase();return Qt(c,b=>{var g;return m===((g=b.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(b=>({current:b.name,version:Us.nu(parseInt(f.version,10),0)}))}))(o,l)).orThunk(()=>((l,c)=>fc(l,c).map(d=>{const f=Us.detect(d.versionRegexes,c);return{current:d.name,version:f}}))(o,e)).fold(Su,Eu),a=((l,c)=>fc(l,c).map(d=>{const f=Us.detect(d.versionRegexes,c);return{current:d.name,version:f}}))(r,e).fold(qi,Cc),i=((l,c,d,f)=>{const m=l.isiOS()&&/ipad/i.test(d)===!0,b=l.isiOS()&&!m,g=l.isiOS()||l.isAndroid(),y=g||f("(pointer:coarse)"),h=m||!b&&g&&f("(min-device-width:768px)"),w=b||g&&!h,E=c.isSafari()&&l.isiOS()&&/safari/i.test(d)===!1,k=!w&&!h&&!E;return{isiPad:ue(m),isiPhone:ue(b),isTablet:ue(h),isPhone:ue(w),isTouch:ue(y),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ue(E),isDesktop:ue(k)}})(a,s,e,n);return{browser:s,os:a,deviceType:i}})(window.navigator.userAgent,_.from(window.navigator.userAgentData),$i));const co=()=>wc(),Wi=Object.getPrototypeOf,ku=e=>{const t=Ri("ownerDocument.defaultView",e);return Ke(e)&&((n=>((o,r)=>{const s=((a,i)=>Ri(a,i))(o,r);if(s==null)throw new Error(o+" not available on this browser");return s})("HTMLElement",n))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Wi(e).constructor.name))},Hs=window.navigator.userAgent,Ma=co(),So=Ma.browser,uo=Ma.os,Hr=Ma.deviceType,_u=Hs.indexOf("Windows Phone")!==-1,ut={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:So.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!So.isIE(),windowsPhone:_u,browser:{current:So.current,version:So.version,isChromium:So.isChromium,isEdge:So.isEdge,isFirefox:So.isFirefox,isIE:So.isIE,isOpera:So.isOpera,isSafari:So.isSafari},os:{current:uo.current,version:uo.version,isAndroid:uo.isAndroid,isChromeOS:uo.isChromeOS,isFreeBSD:uo.isFreeBSD,isiOS:uo.isiOS,isLinux:uo.isLinux,isMacOS:uo.isMacOS,isSolaris:uo.isSolaris,isWindows:uo.isWindows},deviceType:{isDesktop:Hr.isDesktop,isiPad:Hr.isiPad,isiPhone:Hr.isiPhone,isPhone:Hr.isPhone,isTablet:Hr.isTablet,isTouch:Hr.isTouch,isWebView:Hr.isWebView}},u=/^\s*|\s*$/g,p=e=>xt(e)?"":(""+e).replace(u,""),C=function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),Da(e,(r,s)=>t.call(o,r,s,n)!==!1&&(C(r,t,n,o),!0)))},v={trim:p,isArray:Pi,is:(e,t)=>t?!(t!=="array"||!Pi(e))||typeof e===t:e!==void 0,toArray:e=>{if(Pi(e))return e;{const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const o=Ae(e)?e.split(t||","):e||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:Da,map:zs,grep:ss,inArray:(e,t)=>{if(e){for(let n=0,o=e.length;n<o;n++)if(e[n]===t)return n}return-1},hasOwn:Ie,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const o=t[n];for(const r in o)if(Ie(o,r)){const s=o[r];s!==void 0&&(e[r]=s)}}return e},walk:C,resolve:(e,t=window)=>{const n=e.split(".");for(let o=0,r=n.length;o<r&&(t=t[n[o]]);o++);return t},explode:(e,t)=>re(e)?e:e===""?[]:zs(e.split(t||","),p),_addCacheSuffix:e=>{const t=ut.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},N=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},R=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return N(n.childNodes[0])},O=(e,t)=>{const n=(t||document).createElement(e);return N(n)},H=(e,t)=>{const n=(t||document).createTextNode(e);return N(n)},S=N,K=(e,t,n)=>_.from(e.dom.elementFromPoint(t,n)).map(N),ee=(e,t,n)=>{const o=e.document.createRange();var r;return r=o,t.fold(s=>{r.setStartBefore(s.dom)},(s,a)=>{r.setStart(s.dom,a)},s=>{r.setStartAfter(s.dom)}),((s,a)=>{a.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)})})(o,n),o},ae=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},J=lo([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),de=(e,t,n)=>t(S(n.startContainer),n.startOffset,S(n.endContainer),n.endOffset);J.ltr,J.rtl;const $e=(e,t)=>{const n=e.dom;if(n.nodeType!==1)return!1;{const o=n;if(o.matches!==void 0)return o.matches(t);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(t);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(t);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},ct=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,_e=(e,t)=>e.dom===t.dom,Ot=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},cn=(e,t)=>{const n=[],o=s=>(n.push(s),t(s));let r=t(e);do r=r.bind(o);while(r.isSome());return n},st=e=>e.dom.nodeName.toLowerCase(),Eo=e=>e.dom.nodeType,ht=e=>t=>Eo(t)===e,ko=e=>dt(e)&&ku(e.dom),dt=ht(1),vt=ht(3),qs=ht(9),Vi=ht(11),Jn=e=>t=>dt(t)&&st(t)===e,is=e=>S(e.dom.ownerDocument),Rn=e=>qs(e)?e:is(e),fo=e=>S(Rn(e).dom.defaultView),Hn=e=>_.from(e.dom.parentNode).map(S),On=e=>_.from(e.dom.parentElement).map(S),dn=(e,t)=>{const n=gt(t)?t:St;let o=e.dom;const r=[];for(;o.parentNode!==null&&o.parentNode!==void 0;){const s=o.parentNode,a=S(s);if(r.push(a),n(a)===!0)break;o=s}return r},Ut=e=>_.from(e.dom.previousSibling).map(S),un=e=>_.from(e.dom.nextSibling).map(S),Zo=e=>Go(cn(e,Ut)),Bn=e=>cn(e,un),He=e=>ot(e.dom.childNodes,S),Wt=(e,t)=>{const n=e.dom.childNodes;return _.from(n[t]).map(S)},Gt=e=>Wt(e,0),Ht=e=>Wt(e,e.dom.childNodes.length-1),mo=e=>e.dom.childNodes.length,yr=e=>Vi(e)&&ie(e.dom.host),_o=e=>S(e.dom.getRootNode()),er=e=>yr(e)?e:(t=>{const n=t.dom.head;if(n==null)throw new Error("Head is not available yet");return S(n)})(Rn(e)),Ki=e=>S(e.dom.host),tr=e=>{if(ie(e.target)){const t=S(e.target);if(dt(t)&&xc(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return yn(n)}}return _.from(e.target)},xc=e=>ie(e.dom.shadowRoot),$s=(e,t,n,o)=>((r,s,a,i,l)=>{const c=((d,f)=>m=>{d(m)&&f((b=>{const g=S(tr(b).getOr(b.target)),y=()=>b.stopPropagation(),h=()=>b.preventDefault(),w=An(h,y);return((E,k,T,A,B,M,P)=>({target:E,x:k,y:T,stop:A,prevent:B,kill:M,raw:P}))(g,b.clientX,b.clientY,y,h,w,b)})(m))})(a,i);return r.dom.addEventListener(s,c,l),{unbind:ye(Ia,r,s,c,l)}})(e,t,n,o,!1),Ia=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},Fa=jt,ja=()=>S(document),Ws=(e,t=!1)=>e.dom.focus({preventScroll:t}),za=e=>{const t=_o(e).dom;return e.dom===t.activeElement},Vs=(e=ja())=>_.from(e.dom.activeElement).map(S),wn=(e,t)=>{Hn(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},qo=(e,t)=>{un(e).fold(()=>{Hn(e).each(n=>{q(n,t)})},n=>{wn(n,t)})},I=(e,t)=>{Gt(e).fold(()=>{q(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},q=(e,t)=>{e.dom.appendChild(t.dom)},Z=(e,t)=>{wn(e,t),q(t,e)},ne=(e,t)=>{Q(t,n=>{q(e,n)})},ce=(e,t,n)=>{if(!(Ae(n)||pn(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Ee=(e,t,n)=>{ce(e.dom,t,n)},Me=(e,t)=>{const n=e.dom;yt(t,(o,r)=>{ce(n,r,o)})},Fe=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},De=(e,t)=>_.from(Fe(e,t)),Ct=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Ge=(e,t)=>{e.dom.removeAttribute(t)},ft=e=>gn(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),bt=e=>{e.dom.textContent="",Q(He(e),t=>{Be(t)})},Be=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Vt=e=>{const t=He(e);var n,o;t.length>0&&(n=e,Q(o=t,(r,s)=>{const a=s===0?n:o[s-1];qo(a,r)})),Be(e)},xn=(e,t)=>S(e.dom.cloneNode(t)),Xt=e=>xn(e,!1),qn=e=>xn(e,!0),$n=e=>ot(e,S),po=e=>e.dom.innerHTML,Ft=(e,t)=>{const n=is(e).dom,o=S(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,He(S(i))})(t,n);ne(o,r),bt(e),q(e,o)},No=e=>e.style!==void 0&&gt(e.style.getPropertyValue),Dn=e=>{const t=vt(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return(o=>{const r=_o(o);return yr(r)?_.some(r):_.none()})(S(t)).fold(()=>n.body.contains(t),Ts(Dn,Ki))},Ks=(e,t,n)=>{if(!Ae(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);No(e)&&e.style.setProperty(t,n)},Xi=(e,t,n)=>{const o=e.dom;Ks(o,t,n)},Xs=(e,t)=>{const n=e.dom;yt(t,(o,r)=>{Ks(n,r,o)})},$o=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o!==""||Dn(e)?o:Pg(n,t)},Pg=(e,t)=>No(e)?e.style.getPropertyValue(t):"",Sc=(e,t)=>{const n=e.dom,o=Pg(n,t);return _.from(o).filter(r=>r.length>0)},Nu=e=>{const t={},n=e.dom;if(No(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);t[r]=n.style[r]}return t},Lg=(e,t)=>{((n,o)=>{No(n)&&n.style.removeProperty(o)})(e.dom,t),os(De(e,"style").map(Fr),"")&&Ge(e,"style")},nk=(e=>{const t=o=>{const r=(s=>{const a=s.dom;return Dn(s)?a.getBoundingClientRect().height:a.offsetHeight})(o);if(r<=0||r===null){const s=$o(o,e);return parseFloat(s)||0}return r},n=(o,r)=>gn(r,(s,a)=>{const i=$o(o,a),l=i===void 0?0:parseInt(i,10);return isNaN(l)?s:s+l},0);return{set:(o,r)=>{if(!x(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);const s=o.dom;No(s)&&(s.style[e]=r+"px")},get:t,getOuter:t,aggregate:n,max:(o,r,s)=>{const a=n(o,s);return r>a?r-a:0}}})("height"),Mg=(e,t)=>({left:e,top:t,translate:(n,o)=>Mg(e+n,t+o)}),Ua=Mg,Ec=(e,t)=>e!==void 0?e:t!==void 0?t:0,Au=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?Ua(n.offsetLeft,n.offsetTop):Dn(e)?(o=>{const r=o.getBoundingClientRect();return Ua(r.left,r.top)})(t):Ua(0,0)},Tu=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return Ua(n,o)},Ig=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Fg=(e,t)=>{co().browser.isSafari()&&gt(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Ru=(e,t)=>{const n=(t||document).createDocumentFragment();return Q(e,o=>{n.appendChild(o.dom)}),S(n)},Ou=(e=>{const t=n=>e(n)?_.from(n.dom.nodeValue):_.none();return{get:n=>{if(!e(n))throw new Error("Can only get text value of a text node");return t(n).getOr("")},getOption:t,set:(n,o)=>{if(!e(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=o}}})(vt),Yi=e=>Ou.get(e),jg=(e,t)=>Ou.set(e,t),Bu=(e,t)=>{const n=Fe(e,t);return n===void 0||n===""?[]:n.split(" ")};var zg=(e,t,n,o,r)=>e(n,o)?_.some(n):gt(r)&&r(n)?_.none():t(n,o,r);const qr=(e,t,n)=>{let o=e.dom;const r=gt(n)?n:St;for(;o.parentNode;){o=o.parentNode;const s=S(o);if(t(s))return _.some(s);if(r(s))break}return _.none()},ls=(e,t,n)=>zg((o,r)=>r(o),qr,e,t,n),Du=(e,t)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const s=S(o.childNodes[r]);if(t(s))return _.some(s);const a=n(o.childNodes[r]);if(a.isSome())return a}return _.none()};return n(e.dom)},Gi=(e,t,n)=>qr(e,o=>$e(o,t),n),kc=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return ct(r)?_.none():_.from(r.querySelector(n)).map(S)})(t,e),Ha=(e,t,n)=>zg((o,r)=>$e(o,r),Gi,e,t,n),Qi=e=>e.dom.classList!==void 0,Ug=e=>Bu(e,"class"),Hg=(e,t)=>((n,o,r)=>{const s=Bu(n,o).concat([r]);return Ee(n,o,s.join(" ")),!0})(e,"class",t),qg=(e,t)=>((n,o,r)=>{const s=Ve(Bu(n,o),a=>a!==r);return s.length>0?Ee(n,o,s.join(" ")):Ge(n,o),!1})(e,"class",t),qa=(e,t)=>{Qi(e)?e.dom.classList.add(t):Hg(e,t)},$g=e=>{(Qi(e)?e.dom.classList:Ug(e)).length===0&&Ge(e,"class")},Ji=(e,t)=>{Qi(e)?e.dom.classList.remove(t):qg(e,t),$g(e)},Pu=(e,t)=>Qi(e)&&e.dom.classList.contains(t),cs=(e,t=!1)=>{return Dn(e)?e.dom.isContentEditable:(n=e,Ha(n,"[contenteditable]")).fold(ue(t),o=>ok(o)==="true");var n},ok=e=>e.dom.contentEditable,_c=(e,t)=>{e.dom.contentEditable=t?"true":"false"},Wg=(e,t)=>{let n=[];return Q(He(e),o=>{t(o)&&(n=n.concat([o])),n=n.concat(Wg(o,t))}),n},Pn=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return ct(r)?[]:ot(r.querySelectorAll(n),S)})(t,e),Vg=(e,t,n)=>qr(e,t,n).isSome(),rk=(e,t)=>((n,o)=>{const r=n.dom;return r.parentNode?((s,a)=>Qt(s.dom.childNodes,i=>a(S(i))).map(S))(S(r.parentNode),s=>!_e(n,s)&&o(s)):_.none()})(e,t).isSome(),Lu=(e,t)=>Du(e,t).isSome(),Kg=e=>gt(e)?e:St,Mu=(e,t,n)=>{const o=t(e),r=Kg(n);return o.orThunk(()=>r(e)?_.none():((s,a,i)=>{let l=s.dom;const c=Kg(i);for(;l.parentNode;){l=l.parentNode;const d=S(l),f=a(d);if(f.isSome())return f;if(c(d))break}return _.none()})(e,t,r))},sk=["img","br"],ak=e=>{return(t=e,Ou.getOption(t)).filter(n=>n.trim().length!==0||n.indexOf(zt)>-1).isSome()||Te(sk,st(e))||(n=>ko(n)&&Fe(n,"contenteditable")==="false")(e);var t},Xg=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),Iu=lo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$r={before:Iu.before,on:Iu.on,after:Iu.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(mt,mt,mt)},Nc=lo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$a={domRange:Nc.domRange,relative:Nc.relative,exact:Nc.exact,exactFromRange:e=>Nc.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(n=>n.match({domRange:o=>S(o.startContainer),relative:(o,r)=>$r.getStart(o),exact:(o,r,s,a)=>o}))(e);return fo(t)},range:Xg},Ac=(e,t)=>{const n=st(e);return n==="input"?$r.after(e):Te(["br","img"],n)?t===0?$r.before(e):$r.after(e):$r.on(e,t)},ik=(e,t)=>{const n=e.fold($r.before,Ac,$r.after),o=t.fold($r.before,Ac,$r.after);return $a.relative(n,o)},Yg=(e,t,n,o)=>{const r=Ac(e,t),s=Ac(n,o);return $a.relative(r,s)},lk=e=>{const t=$a.getWin(e).dom,n=(r,s,a,i)=>ae(t,r,s,a,i),o=(r=>r.match({domRange:s=>{const a=S(s.startContainer),i=S(s.endContainer);return Yg(a,s.startOffset,i,s.endOffset)},relative:ik,exact:Yg}))(e);return((r,s)=>{const a=((i,l)=>l.match({domRange:c=>({ltr:ue(c),rtl:_.none}),relative:(c,d)=>({ltr:xo(()=>ee(i,c,d)),rtl:xo(()=>_.some(ee(i,d,c)))}),exact:(c,d,f,m)=>({ltr:xo(()=>ae(i,c,d,f,m)),rtl:xo(()=>_.some(ae(i,f,m,c,d)))})}))(r,s);return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(d=>d.collapsed===!1).map(d=>J.rtl(S(d.endContainer),d.endOffset,S(d.startContainer),d.startOffset)).getOrThunk(()=>de(0,J.ltr,c)):de(0,J.ltr,c)})(0,a)})(t,o).match({ltr:n,rtl:n})},ck=(e,t,n)=>((o,r,s)=>((a,i,l)=>a.caretPositionFromPoint?((c,d,f)=>{var m;return _.from((m=c.caretPositionFromPoint)===null||m===void 0?void 0:m.call(c,d,f)).bind(b=>{if(b.offsetNode===null)return _.none();const g=c.createRange();return g.setStart(b.offsetNode,b.offset),g.collapse(),_.some(g)})})(a,i,l):a.caretRangeFromPoint?((c,d,f)=>{var m;return _.from((m=c.caretRangeFromPoint)===null||m===void 0?void 0:m.call(c,d,f))})(a,i,l):_.none())(o.document,r,s).map(a=>Xg(S(a.startContainer),a.startOffset,S(a.endContainer),a.endOffset)))(e,t,n),Gg=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),Fu=e=>{const t=e===void 0?window:e,n=t.document,o=Tu(S(n));return(r=>{const s=r===void 0?window:r;return co().browser.isFirefox()?_.none():_.from(s.visualViewport)})(t).fold(()=>{const r=t.document.documentElement,s=r.clientWidth,a=r.clientHeight;return Gg(o.left,o.top,s,a)},r=>Gg(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))};class fn{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,o,r){if(t){if(!r&&t[n])return t[n];if(t!==this.rootNode){let s=t[o];if(s)return s;for(let a=t.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(t,n){if(t){const o=t.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n){for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s}return o}const r=t.parentNode;if(r&&r!==this.rootNode)return r}}}const dk=/^[ \t\r\n]*$/,Wa=e=>dk.test(e),Qg=e=>e===`
`||e==="\r",Jg=(e,t=4,n=!0,o=!0)=>{const r=((i,l)=>l<=0?"":new Array(l+1).join(" "))(0,t),s=e.replace(/\t/g,r);return gn(s,(i,l)=>(c=>" \f	\v".indexOf(c)!==-1)(l)||l===zt?i.pcIsSpace||i.str===""&&n||i.str.length===s.length-1&&o||((c,d)=>d<c.length&&d>=0&&Qg(c[d]))(s,i.str.length+1)?{pcIsSpace:!1,str:i.str+zt}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Qg(l),str:i.str+l},{pcIsSpace:!1,str:""}).str},Ys=e=>t=>!!t&&t.nodeType===e,Tc=e=>!!e&&!Object.getPrototypeOf(e),xe=Ys(1),Cr=e=>xe(e)&&ko(S(e)),Va=e=>{const t=e.toLowerCase();return n=>ie(n)&&n.nodeName.toLowerCase()===t},nr=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Te(t,o)}return!1}},Rc=(e,t)=>{const n=t.toLowerCase().split(" ");return o=>{if(xe(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(e):null)===n[s])return!0}}return!1}},Gs=e=>xe(e)&&e.hasAttribute("data-mce-bogus"),wr=e=>xe(e)&&e.tagName==="TABLE",Zg=e=>t=>!!(Cr(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),ju=nr(["textarea","input"]),se=Ys(3),uk=Ys(4),fk=Ys(7),ds=Ys(8),Zi=Ys(9),zu=Ys(11),qt=Va("br"),eh=Va("img"),mk=Va("a"),Wo=Zg("true"),Dt=Zg("false"),Uu=e=>Cr(e)&&e.isContentEditable&&ie(e.parentElement)&&!e.parentElement.isContentEditable,Oc=nr(["td","th"]),pk=nr(["td","th","caption"]),xr=nr(["video","audio","object","embed"]),gk=Va("li"),Hu=Va("details"),hk=Va("summary"),th={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},bk=e=>xe(e)&&e.hasAttribute("data-mce-bookmark"),vk=(e,t,n,o)=>se(e)&&!((r,s,a)=>Wa(r.data)&&!((i,l,c)=>{const d=S(l),f=S(i),m=c.getWhitespaceElements();return Vg(f,b=>Ie(m,st(b)),ye(_e,d))})(r,s,a))(e,t,n)&&(!o.includeZwsp||!(r=>{for(const s of r)if(!rs(s))return!1;return!0})(e.data)),qu=(e,t,n,o)=>gt(o.isContent)&&o.isContent(t)||((r,s)=>xe(r)&&Ie(s.getNonEmptyElements(),r.nodeName))(t,e)||bk(t)||(r=>xe(r)&&r.nodeName==="A"&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id")))(t)||vk(t,n,e,o)||Dt(t)||Wo(t)&&(r=>On(S(r)).exists(s=>!cs(s)))(t),Wr=(e,t,n)=>{const o={...th,...n};if(o.checkRootAsContent&&qu(e,t,t,o))return!1;let r=t.firstChild,s=0;if(!r)return!0;const a=new fn(r,t);do{if(o.skipBogus&&xe(r)){const i=r.getAttribute("data-mce-bogus");if(i){r=a.next(i==="all");continue}}if(ds(r))r=a.next(!0);else if(qt(r))s++,r=a.next();else{if(qu(e,r,t,o))return!1;r=a.next()}}while(r);return s<=1},Ln=(e,t,n)=>Wr(e,t.dom,{checkRootAsContent:!0,...n}),nh=(e,t,n)=>qu(e,t,t,{includeZwsp:th.includeZwsp,...n}),oh=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},Qs=e=>oh(e)!=="html",$u=e=>Qs(e.nodeName),rh=e=>oh(e.nodeName),yk=["svg","math"],Bc="data-mce-block",Wu=e=>ot((t=>Ve(sn(t),n=>!/[A-Z]/.test(n)))(e),t=>{const n=CSS.escape(t);return`${n}:`+ot(yk,o=>`not(${o} ${n})`).join(":")}).join(","),sh=(e,t)=>ie(t.querySelector(e))?(t.setAttribute(Bc,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Bc),!1),ah=(e,t)=>{const n=Wu(e.getTransparentElements()),o=Wu(e.getBlockElements());return Ve(t.querySelectorAll(n),r=>sh(o,r))},ih=(e,t,n)=>{var o;const r=n?"lastChild":"firstChild";for(let s=t[r];s;s=s[r])if(Wr(e,s,{checkRootAsContent:!0}))return void((o=s.parentNode)===null||o===void 0||o.removeChild(s))},Ck=(e,t,n)=>{const o=e.getBlockElements(),r=S(t),s=i=>st(i)in o,a=i=>_e(i,r);Q($n(n),i=>{qr(i,s,a).each(l=>{const c=(d=>Ve(He(d),f=>s(f)&&!e.isValidChild(st(l),st(f))))(i);if(c.length>0){const d=On(l);Q(c,f=>{qr(f,s,a).each(m=>{((b,g,y)=>{const h=document.createRange(),w=g.parentNode;if(w){h.setStartBefore(g),h.setEndBefore(y);const E=h.extractContents();ih(b,E,!0),h.setStartAfter(y),h.setEndAfter(g);const k=h.extractContents();ih(b,k,!1),Wr(b,E,{checkRootAsContent:!0})||w.insertBefore(E,g),Wr(b,y,{checkRootAsContent:!0})||w.insertBefore(y,g),Wr(b,k,{checkRootAsContent:!0})||w.insertBefore(k,g),w.removeChild(g)}})(e,m.dom,f.dom)})}),d.each(f=>ah(e,f.dom))}})})},Vu=(e,t)=>{const n=ah(e,t);Ck(e,t,n),((o,r,s)=>{Q([...s,...Js(o,r)?[r]:[]],a=>Q(Pn(S(a),a.nodeName.toLowerCase()),i=>{xk(o,i.dom)&&Vt(i)}))})(e,t,n)},wk=(e,t)=>{if(Yu(e,t)){const n=Wu(e.getBlockElements());sh(n,t)}},Ku=e=>e.hasAttribute(Bc),Xu=(e,t)=>Ie(e.getTransparentElements(),t),Yu=(e,t)=>xe(t)&&Xu(e,t.nodeName),Js=(e,t)=>Yu(e,t)&&Ku(t),xk=(e,t)=>Yu(e,t)&&!Ku(t),Gu=(e,t)=>t.type===1&&Xu(e,t.name)&&Ae(t.attr(Bc)),Sk=co().browser,lh=e=>Qt(e,dt),ch=(e,t)=>e.children&&Te(e.children,t),dh=(e,t={})=>{let n=0;const o={},r=S(e),s=Rn(r),a=f=>{q(er(r),f)},i=f=>{const m=er(r);kc(m,"#"+f).each(Be)},l=f=>Bt(o,f).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=f=>new Promise((m,b)=>{let g;const y=v._addCacheSuffix(f),h=l(y);o[y]=h,h.count++;const w=(A,B)=>{Q(A,Gn),h.status=B,h.passed=[],h.failed=[],g&&(g.onload=null,g.onerror=null,g=null)},E=()=>w(h.passed,2),k=()=>w(h.failed,3);if(m&&h.passed.push(m),b&&h.failed.push(b),h.status===1)return;if(h.status===2)return void E();if(h.status===3)return void k();h.status=1;const T=O("link",s.dom);Me(T,{rel:"stylesheet",type:"text/css",id:h.id}),t.contentCssCors&&Ee(T,"crossOrigin","anonymous"),t.referrerPolicy&&Ee(T,"referrerpolicy",t.referrerPolicy),g=T.dom,g.onload=E,g.onerror=k,a(T),Ee(T,"href",y)}),d=f=>{const m=v._addCacheSuffix(f);Bt(o,m).each(b=>{--b.count==0&&(delete o[m],i(b.id))})};return{load:c,loadRawCss:(f,m)=>{const b=l(f);o[f]=b,b.count++;const g=O("style",s.dom);Me(g,{rel:"stylesheet",type:"text/css",id:b.id,"data-mce-key":f}),g.dom.innerHTML=m,a(g)},loadAll:f=>Promise.allSettled(ot(f,m=>c(m).then(ue(m)))).then(m=>{const b=zo(m,g=>g.status==="fulfilled");return b.fail.length>0?Promise.reject(ot(b.fail,g=>g.reason)):ot(b.pass,g=>g.value)}),unload:d,unloadRawCss:f=>{Bt(o,f).each(m=>{--m.count==0&&(delete o[f],i(m.id))})},unloadAll:f=>{Q(f,m=>{d(m)})},_setReferrerPolicy:f=>{t.referrerPolicy=f},_setContentCssCors:f=>{t.contentCssCors=f}}},uh=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const o=_o(t).dom;return _.from(e.get(o)).getOrThunk(()=>{const r=dh(o,n);return e.set(o,r),r})}}})(),fh=(e,t)=>ie(e)&&(nh(t,e)||t.isInline(e.nodeName.toLowerCase())),mh=e=>(t=>t.nodeName.toLowerCase()==="span")(e)&&e.getAttribute("data-mce-type")==="bookmark",Qu=(e,t,n,o)=>{var r;const s=o||t;if(xe(t)&&mh(t))return t;const a=t.childNodes;for(let i=a.length-1;i>=0;i--)Qu(e,a[i],n,s);if(xe(t)){const i=t.childNodes;i.length===1&&mh(i[0])&&((r=t.parentNode)===null||r===void 0||r.insertBefore(i[0],t))}return(i=>zu(i)||Zi(i))(t)||nh(n,t)||(i=>!!xe(i)&&i.childNodes.length>0)(t)||((i,l,c)=>se(i)&&i.data.length>0&&((d,f,m)=>{const b=new fn(d,f).prev(!1),g=new fn(d,f).next(!1),y=It(b)||fh(b,m),h=It(g)||fh(g,m);return y&&h})(i,l,c))(t,s,n)||e.remove(t),t},Ek=v.makeMap,Dc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Pc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kk=/[<>&\"\']/g,_k=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Nk={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},Zs={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ak={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ph=(e,t)=>{const n={};if(e){const o=e.split(",");t=t||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],t));if(!Zs[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},Ju=ph("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),gh=(e,t)=>e.replace(t?Dc:Pc,n=>Zs[n]||n),hh=(e,t)=>e.replace(t?Dc:Pc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Zs[n]||"&#"+n.charCodeAt(0)+";"),Zu=(e,t,n)=>{const o=n||Ju;return e.replace(t?Dc:Pc,r=>Zs[r]||o[r]||r)},ea={encodeRaw:gh,encodeAllRaw:e=>(""+e).replace(kk,t=>Zs[t]||t),encodeNumeric:hh,encodeNamed:Zu,getEncodeFunc:(e,t)=>{const n=ph(t)||Ju,o=Ek(e.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?Dc:Pc,a=>Zs[a]!==void 0?Zs[a]:n[a]!==void 0?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):o.named?t?(r,s)=>Zu(r,s,n):Zu:o.numeric?hh:gh},decode:e=>e.replace(_k,(t,n)=>n?(n=n.charAt(0).toLowerCase()==="x"?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):Nk[n]||String.fromCharCode(n):Ak[t]||Ju[t]||(o=>{const r=O("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(t))},Sn=(e,t)=>(e=v.trim(e))?e.split(t||" "):[],bh=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),vh=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),yh=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const o=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:o}},ef=e=>{const{blockContent:t,phrasingContent:n,flowContent:o}=yh(e),r=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:r(t),phrasingContent:r(n),flowContent:r(o)})},Tk={html4:xo(()=>ef("html4")),html5:xo(()=>ef("html5")),"html5-strict":xo(()=>ef("html5-strict"))},Ch=(e,t)=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Tk[e]();return t==="blocks"?_.some(n):t==="phrasing"?_.some(o):t==="flow"?_.some(r):_.none()},tf=e=>_.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map(t=>({preset:t[1]==="@",name:t[2]})),Lc={},el=v.makeMap,or=v.each,wh=v.extend,xh=v.explode,Sh=(e,t={})=>{const n=el(e," ",el(e.toUpperCase()," "));return wh(n,t)},Eh=e=>Sh("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),nf=(e,t)=>{if(e){const n={};return Ae(e)&&(e={"*":e}),or(e,(o,r)=>{n[r]=n[r.toUpperCase()]=t==="map"?el(o,/[, ]/):xh(o,/[, ]/)}),n}},us=(e={})=>{var t;const n={},o={};let r=[];const s={},a={},i=(he,tt,it)=>{const Xe=e[he];if(Xe)return el(Xe,/[, ]/,el(Xe.toUpperCase(),/[, ]/));{let pt=Lc[he];return pt||(pt=Sh(tt,it),Lc[he]=pt),pt}},l=(t=e.schema)!==null&&t!==void 0?t:"html5",c=(he=>{const tt=vh(he),{phrasingContent:it,flowContent:Xe}=yh(he),pt={},At=(_t,Nt,Kt)=>{pt[_t]={attributes:Tn(Nt,ue({})),attributesOrder:Nt,children:Tn(Kt,ue({}))}},pe=(_t,Nt="",Kt="")=>{const vn=Sn(Kt),cr=Sn(_t);let Fn=cr.length;const Fo=[...tt,...Sn(Nt)];for(;Fn--;)At(cr[Fn],Fo.slice(),vn)},Ue=(_t,Nt)=>{const Kt=Sn(_t),vn=Sn(Nt);let cr=Kt.length;for(;cr--;){const Fn=pt[Kt[cr]];for(let Fo=0,rn=vn.length;Fo<rn;Fo++)Fn.attributes[vn[Fo]]={},Fn.attributesOrder.push(vn[Fo])}};return he!=="html5-strict"&&(Q(Sn("acronym applet basefont big font strike tt"),_t=>{pe(_t,"",it)}),Q(Sn("center dir isindex noframes"),_t=>{pe(_t,"",Xe)})),pe("html","manifest","head body"),pe("head","","base command link meta noscript script style title"),pe("title hr noscript br"),pe("base","href target"),pe("link","href rel media hreflang type sizes hreflang"),pe("meta","name http-equiv content charset"),pe("style","media type scoped"),pe("script","src async defer type charset"),pe("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Xe),pe("dd div","",Xe),pe("address dt caption","",he==="html4"?it:Xe),pe("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",it),pe("blockquote","cite",Xe),pe("ol","reversed start type","li"),pe("ul","","li"),pe("li","value",Xe),pe("dl","","dt dd"),pe("a","href target rel media hreflang type",he==="html4"?it:Xe),pe("q","cite",it),pe("ins del","cite datetime",Xe),pe("img","src sizes srcset alt usemap ismap width height"),pe("iframe","src name width height",Xe),pe("embed","src type width height"),pe("object","data type typemustmatch name usemap form width height",[Xe,"param"].join(" ")),pe("param","name value"),pe("map","name",[Xe,"area"].join(" ")),pe("area","alt coords shape href target rel media hreflang type"),pe("table","border","caption colgroup thead tfoot tbody tr"+(he==="html4"?" col":"")),pe("colgroup","span","col"),pe("col","span"),pe("tbody thead tfoot","","tr"),pe("tr","","td th"),pe("td","colspan rowspan headers",Xe),pe("th","colspan rowspan headers scope abbr",Xe),pe("form","accept-charset action autocomplete enctype method name novalidate target",Xe),pe("fieldset","disabled form name",[Xe,"legend"].join(" ")),pe("label","form for",it),pe("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),pe("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",he==="html4"?Xe:it),pe("select","disabled form multiple name required size","option optgroup"),pe("optgroup","disabled label","option"),pe("option","disabled label selected value"),pe("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),pe("menu","type label",[Xe,"li"].join(" ")),pe("noscript","",Xe),he!=="html4"&&(pe("wbr"),pe("ruby","",[it,"rt rp"].join(" ")),pe("figcaption","",Xe),pe("mark rt rp bdi","",it),pe("summary","",[it,"h1 h2 h3 h4 h5 h6"].join(" ")),pe("canvas","width height",Xe),pe("data","value",it),pe("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Xe,"track source"].join(" ")),pe("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Xe,"track source"].join(" ")),pe("picture","","img source"),pe("source","src srcset type media sizes"),pe("track","kind src srclang label default"),pe("datalist","",[it,"option"].join(" ")),pe("article section nav aside main header footer","",Xe),pe("hgroup","","h1 h2 h3 h4 h5 h6"),pe("figure","",[Xe,"figcaption"].join(" ")),pe("time","datetime",it),pe("dialog","open",Xe),pe("command","type label icon disabled checked radiogroup command"),pe("output","for form name",it),pe("progress","value max",it),pe("meter","value min max low high optimum",it),pe("details","open",[Xe,"summary"].join(" ")),pe("keygen","autofocus challenge disabled form keytype name"),At("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),he!=="html5-strict"&&(Ue("script","language xml:space"),Ue("style","xml:space"),Ue("object","declare classid code codebase codetype archive standby align border hspace vspace"),Ue("embed","align name hspace vspace"),Ue("param","valuetype type"),Ue("a","charset name rev shape coords"),Ue("br","clear"),Ue("applet","codebase archive code object alt name width height align hspace vspace"),Ue("img","name longdesc align border hspace vspace"),Ue("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Ue("font basefont","size color face"),Ue("input","usemap align"),Ue("select"),Ue("textarea"),Ue("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Ue("ul","type compact"),Ue("li","type"),Ue("ol dl menu dir","compact"),Ue("pre","width xml:space"),Ue("hr","align noshade size width"),Ue("isindex","prompt"),Ue("table","summary width frame rules cellspacing cellpadding align bgcolor"),Ue("col","width align char charoff valign"),Ue("colgroup","width align char charoff valign"),Ue("thead","align char charoff valign"),Ue("tr","align char charoff valign bgcolor"),Ue("th","axis align char charoff valign nowrap bgcolor width height"),Ue("form","accept"),Ue("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Ue("tfoot","align char charoff valign"),Ue("tbody","align char charoff valign"),Ue("area","nohref"),Ue("body","background bgcolor text link vlink alink")),he!=="html4"&&(Ue("input button select textarea","autofocus"),Ue("input textarea","placeholder"),Ue("a","download"),Ue("link script img","crossorigin"),Ue("img","loading"),Ue("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),he!=="html4"&&Q([pt.video,pt.audio],_t=>{delete _t.children.audio,delete _t.children.video}),Q(Sn("a form meter progress dfn"),_t=>{pt[_t]&&delete pt[_t].children[_t]}),delete pt.caption.children.table,delete pt.script,pt})(l);e.verify_html===!1&&(e.valid_elements="*[*]");const d=nf(e.valid_styles),f=nf(e.invalid_styles,"map"),m=nf(e.valid_classes,"map"),b=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),y=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),w="td th iframe video audio object script code",E=i("non_empty_elements",w+" pre svg textarea summary",y),k=i("move_caret_before_on_enter_elements",w+" table",y),T="h1 h2 h3 h4 h5 h6",A=i("text_block_elements",T+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),B=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",A),M=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),P=i("transparent_elements","a ins del canvas map"),z=i("wrap_block_elements","pre "+T);or("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),he=>{a[he]=new RegExp("</"+he+"[^>]*>","gi")});const W=he=>{const tt=_.from(n["@"]),it=/[*?+]/;Q(((Xe,pt)=>{const At=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Jt(Sn(pt,","),pe=>{const Ue=At.exec(pe);if(Ue){const _t=Ue[1],Nt=Ue[2],Kt=Ue[3],vn=Ue[4],cr=Ue[5],Fn={attributes:{},attributesOrder:[]};if(Xe.each(Fo=>((rn,_a)=>{yt(rn.attributes,(_s,Br)=>{_a.attributes[Br]=_s}),_a.attributesOrder.push(...rn.attributesOrder)})(Fo,Fn)),_t==="#"?Fn.paddEmpty=!0:_t==="-"&&(Fn.removeEmpty=!0),vn==="!"&&(Fn.removeEmptyAttrs=!0),cr&&((Fo,rn)=>{const _a=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,_s=/[*?+]/,{attributes:Br,attributesOrder:jo}=rn;Q(Sn(Fo,"|"),Ns=>{const Jr=_a.exec(Ns);if(Jr){const Dr={},Cu=Jr[1],ao=Jr[2].replace(/[\\:]:/g,":"),Zr=Jr[3],Na=Jr[4];if(Cu==="!"&&(rn.attributesRequired=rn.attributesRequired||[],rn.attributesRequired.push(ao),Dr.required=!0),Cu==="-")return delete Br[ao],void jo.splice(v.inArray(jo,ao),1);if(Zr&&(Zr==="="?(rn.attributesDefault=rn.attributesDefault||[],rn.attributesDefault.push({name:ao,value:Na}),Dr.defaultValue=Na):Zr==="~"?(rn.attributesForced=rn.attributesForced||[],rn.attributesForced.push({name:ao,value:Na}),Dr.forcedValue=Na):Zr==="<"&&(Dr.validValues=v.makeMap(Na,"?"))),_s.test(ao)){const As=Dr;rn.attributePatterns=rn.attributePatterns||[],As.pattern=bh(ao),rn.attributePatterns.push(As)}else Br[ao]||jo.push(ao),Br[ao]=Dr}})})(cr,Fn),Kt&&(Fn.outputName=Nt),Nt==="@"){if(!Xe.isNone())return[];Xe=_.some(Fn)}return[Kt?{name:Nt,element:Fn,aliasName:Kt}:{name:Nt,element:Fn}]}return[]})})(tt,he??""),({name:Xe,element:pt,aliasName:At})=>{if(At&&(n[At]=pt),it.test(Xe)){const pe=pt;pe.pattern=bh(Xe),r.push(pe)}else n[Xe]=pt})},D=he=>{r=[],Q(sn(n),tt=>{delete n[tt]}),W(he)},L=(he,tt)=>{var it,Xe;delete Lc.text_block_elements,delete Lc.block_elements;const pt=!!tt.extends&&!Pt(tt.extends),At=tt.extends;if(o[he]=At?o[At]:{},s[he]=At??he,E[he.toUpperCase()]={},E[he]={},pt||(B[he.toUpperCase()]={},B[he]={}),At&&!n[he]&&n[At]){const pe=(Ue=>{const _t=Nt=>re(Nt)?ot(Nt,_t):(Kt=>Ke(Kt)&&Kt.source&&Object.prototype.toString.call(Kt)==="[object RegExp]")(Nt)?new RegExp(Nt.source,Nt.flags):Ke(Nt)?Bs(Nt,_t):Nt;return _t(Ue)})(n[At]);delete pe.removeEmptyAttrs,delete pe.removeEmpty,n[he]=pe}else n[he]={attributesOrder:[],attributes:{}};if(re(tt.attributes)){const pe=_t=>{Ue.attributesOrder.push(_t),Ue.attributes[_t]={}},Ue=(it=n[he])!==null&&it!==void 0?it:{};delete Ue.attributesDefault,delete Ue.attributesForced,delete Ue.attributePatterns,delete Ue.attributesRequired,Ue.attributesOrder=[],Ue.attributes={},Q(tt.attributes,_t=>{const Nt=vh(l);tf(_t).each(({preset:Kt,name:vn})=>{Kt?vn==="global"&&Q(Nt,pe):pe(vn)})}),n[he]=Ue}if(pn(tt.padEmpty)){const pe=(Xe=n[he])!==null&&Xe!==void 0?Xe:{};pe.paddEmpty=tt.padEmpty,n[he]=pe}if(re(tt.children)){const pe={},Ue=Nt=>{pe[Nt]={}},_t=Nt=>{Ch(l,Nt).each(Kt=>{Q(Kt,Ue)})};Q(tt.children,Nt=>{tf(Nt).each(({preset:Kt,name:vn})=>{Kt?_t(vn):Ue(vn)})}),o[he]=pe}At&&yt(o,(pe,Ue)=>{pe[At]&&(o[Ue]=pe=wh({},o[Ue]),pe[he]=pe[At])})},F=he=>{Ke(he)?yt(he,(tt,it)=>L(it,tt)):Ae(he)&&(tt=>{Q((it=>{const Xe=/^(~)?(.+)$/;return Jt(Sn(it,","),pt=>{const At=Xe.exec(pt);return At?[{cloneName:At[1]==="~"?"span":"div",name:At[2]}]:[]})})(tt??""),({name:it,cloneName:Xe})=>{L(it,{extends:Xe})})})(he)},X=he=>{Q((tt=>{const it=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Jt(Sn(tt,","),Xe=>{const pt=it.exec(Xe);if(pt){const At=pt[1];return[{operation:At?(Ue=>Ue==="-"?"remove":"add")(At):"replace",name:pt[2],validChildren:Jt(Sn(pt[3],"|"),Ue=>tf(Ue).toArray())}]}return[]})})(he??""),({operation:tt,name:it,validChildren:Xe})=>{const pt=tt==="replace"?{"#comment":{}}:o[it],At=pe=>{tt==="remove"?delete pt[pe]:pt[pe]={}};Q(Xe,({preset:pe,name:Ue})=>{pe?(_t=>{Ch(l,_t).each(Nt=>{Q(Nt,At)})})(Ue):At(Ue)}),o[it]=pt})},oe=he=>{const tt=n[he];if(tt)return tt;let it=r.length;for(;it--;){const Xe=r[it];if(Xe.pattern.test(he))return Xe}},te=ue(d),Ce=ue(f),Ne=ue(m),Re=ue(h),Pe=ue(B),me=ue(A),we=ue(M),j=ue(Object.seal(y)),U=ue(g),Y=ue(E),V=ue(k),fe=ue(b),le=ue(P),Oe=ue(z),je=ue(Object.seal(a)),Ze=(he,tt)=>{const it=oe(he);if(it){if(!tt)return!0;{if(it.attributes[tt])return!0;const Xe=it.attributePatterns;if(Xe){let pt=Xe.length;for(;pt--;)if(Xe[pt].pattern.test(tt))return!0}}}return!1},Pt=he=>Ie(Pe(),he),Lt=he=>!$t(he,"#")&&Ze(he)&&!Pt(he),bo=ue(s);return e.valid_elements?(D(e.valid_elements),or(c,(he,tt)=>{o[tt]=he.children})):(or(c,(he,tt)=>{n[tt]={attributes:he.attributes,attributesOrder:he.attributesOrder},o[tt]=he.children}),or(Sn("strong/b em/i"),he=>{const tt=Sn(he,"/");n[tt[1]].outputName=tt[0]}),or(M,(he,tt)=>{n[tt]&&(e.padd_empty_block_inline_children&&(n[tt].paddInEmptyBlock=!0),n[tt].removeEmpty=!0)}),or(Sn("ol ul blockquote a table tbody"),he=>{n[he]&&(n[he].removeEmpty=!0)}),or(Sn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),he=>{n[he]&&(n[he].paddEmpty=!0)}),or(Sn("span"),he=>{n[he].removeEmptyAttrs=!0})),delete n.svg,F(e.custom_elements),X(e.valid_children),W(e.extended_valid_elements),X("+ol[ul|ol],+ul[ul|ol]"),or({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(he,tt)=>{n[tt]&&(n[tt].parentsRequired=Sn(he))}),e.invalid_elements&&or(xh(e.invalid_elements),he=>{n[he]&&delete n[he]}),oe("span")||W("span[!data-mce-type|*]"),{type:l,children:o,elements:n,getValidStyles:te,getValidClasses:Ne,getBlockElements:Pe,getInvalidStyles:Ce,getVoidElements:j,getTextBlockElements:me,getTextInlineElements:we,getBoolAttrs:Re,getElementRule:oe,getSelfClosingElements:U,getNonEmptyElements:Y,getMoveCaretBeforeOnEnterElements:V,getWhitespaceElements:fe,getTransparentElements:le,getSpecialElements:je,isValidChild:(he,tt)=>{const it=o[he.toLowerCase()];return!(!it||!it[tt.toLowerCase()])},isValid:Ze,isBlock:Pt,isInline:Lt,isWrapper:he=>Ie(Oe(),he)||Lt(he),getCustomElements:bo,addValidElements:W,setValidElements:D,addCustomElements:F,addValidChildren:X}},of=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},Rk=e=>(t=>{return{value:(n=t,Bi(n,"#").toUpperCase())};var n})(of(e.red)+of(e.green)+of(e.blue)),kh=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,_h=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Nh=(e,t,n,o)=>((r,s,a,i)=>({red:r,green:s,blue:a,alpha:i}))(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(o)),Ah=e=>{const t=kh.exec(e);if(t!==null)return _.some(Nh(t[1],t[2],t[3],"1"));const n=_h.exec(e);return n!==null?_.some(Nh(n[1],n[2],n[3],n[4])):_.none()},Ok=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,tl=e=>Ah(e).map(Rk).map(t=>"#"+t.value).getOr(e),rf=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;const l=zn;t&&(a=t.getValidStyles(),i=t.getInvalidStyles());const c=`\\" \\' \\; \\: ; : \uFEFF`.split(" ");for(let f=0;f<c.length;f++)s[c[f]]=l+f,s[l+f]=c[f];const d={parse:f=>{const m={};let b=!1;const g=e.url_converter,y=e.url_converter_scope||d,h=(D,L,F)=>{const X=m[D+"-top"+L];if(!X)return;const oe=m[D+"-right"+L];if(!oe)return;const te=m[D+"-bottom"+L];if(!te)return;const Ce=m[D+"-left"+L];if(!Ce)return;const Ne=[X,oe,te,Ce];let Re=Ne.length-1;for(;Re--&&Ne[Re]===Ne[Re+1];);Re>-1&&F||(m[D+L]=Re===-1?Ne[0]:Ne.join(" "),delete m[D+"-top"+L],delete m[D+"-right"+L],delete m[D+"-bottom"+L],delete m[D+"-left"+L])},w=D=>{const L=m[D];if(!L)return;const F=L.indexOf(",")>-1?[L]:L.split(" ");let X=F.length;for(;X--;)if(F[X]!==F[0])return!1;return m[D]=F[0],!0},E=D=>(b=!0,s[D]),k=(D,L)=>(b&&(D=D.replace(/\uFEFF[0-9]/g,F=>s[F])),L||(D=D.replace(/\\([\'\";:])/g,"$1")),D),T=D=>String.fromCharCode(parseInt(D.slice(1),16)),A=D=>D.replace(/\\[0-9a-f]+/gi,T),B=(D,L,F,X,oe,te)=>{if(oe=oe||te)return"'"+(oe=k(oe)).replace(/\'/g,"\\'")+"'";if(L=k(L||F||X||""),!e.allow_script_urls){const Ce=L.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Ce)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Ce))return""}return g&&(L=g.call(y,L,"style")),"url('"+L.replace(/\'/g,"\\'")+"')"};if(f){let D;for(f=(f=f.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,E).replace(/\"[^\"]+\"|\'[^\']+\'/g,L=>L.replace(/[;:]/g,E));D=o.exec(f);){o.lastIndex=D.index+D[0].length;let L=D[1].replace(r,"").toLowerCase(),F=D[2].replace(r,"");if(L&&F){if(L=A(L),F=A(F),L.indexOf(l)!==-1||L.indexOf('"')!==-1||!e.allow_script_urls&&(L==="behavior"||/expression\s*\(|\/\*|\*\//.test(F)))continue;L==="font-weight"&&F==="700"?F="bold":L!=="color"&&L!=="background-color"||(F=F.toLowerCase()),W=F,(kh.test(W)?"rgb":_h.test(W)?"rgba":"other")=="rgb"&&Ah(F).each(X=>{F=tl(Ok(X)).toLowerCase()}),F=F.replace(n,B),m[L]=b?k(F,!0):F}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),P="border-style",z="border-color",w(M="border-width")&&w(P)&&w(z)&&(m.border=m[M]+" "+m[P]+" "+m[z],delete m[M],delete m[P],delete m[z]),m.border==="medium none"&&delete m.border,m["border-image"]==="none"&&delete m["border-image"]}var M,P,z,W;return m},serialize:(f,m)=>{let b="";const g=(y,h)=>{const w=h[y];if(w)for(let E=0,k=w.length;E<k;E++){const T=w[E],A=f[T];A&&(b+=(b.length>0?" ":"")+T+": "+A+";")}};return m&&a?(g("*",a),g(m,a)):yt(f,(y,h)=>{y&&((w,E)=>{if(!i||!E)return!0;let k=i["*"];return!(k&&k[w]||(k=i[E],k&&k[w]))})(h,m)&&(b+=(b.length>0?" ":"")+h+": "+y+";")}),b}};return d},Bk={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Th=(e,t)=>{const n=t??{};for(const o in e)Ie(Bk,o)||(n[o]=e[o]);return ie(e.composedPath)&&(n.composedPath=()=>e.composedPath()),ie(e.getModifierState)&&(n.getModifierState=o=>e.getModifierState(o)),ie(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},sf=(e,t,n,o)=>{var r;const s=Th(t,o);return s.type=e,xt(s.target)&&(s.target=(r=s.srcElement)!==null&&r!==void 0?r:n),(a=>xt(a.preventDefault)||(i=>i instanceof Event||gt(i.initEvent))(a))(t)&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=jt,gt(t.preventDefault)&&t.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=jt,gt(t.stopPropagation)&&t.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=jt,s.stopPropagation()},(a=>a.isDefaultPrevented===jt||a.isDefaultPrevented===St)(s)||(s.isDefaultPrevented=s.defaultPrevented===!0?jt:St,s.isPropagationStopped=s.cancelBubble===!0?jt:St,s.isImmediatePropagationStopped=St)),s},Dk=/^(?:mouse|contextmenu)|click/,af=(e,t,n,o)=>{e.addEventListener(t,n,o||!1)},Mc=(e,t,n,o)=>{e.removeEventListener(t,n,o||!1)},nl=(e,t)=>{const n=sf(e.type,e,document,t);if((o=>ie(o)&&Dk.test(o.type))(e)&&It(e.pageX)&&!It(e.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=e.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=e.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}return n},Pk=(e,t,n)=>{const o=e.document,r={type:"ready"};if(n.domLoaded)return void t(r);const s=()=>{Mc(e,"DOMContentLoaded",s),Mc(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(r)),e=null};o.readyState==="complete"||o.readyState==="interactive"&&o.body?s():af(e,"DOMContentLoaded",s),n.domLoaded||af(e,"load",s)};class ta{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,o,r){const s=this;let a;const i=window,l=m=>{s.executeHandlers(nl(m||i.event),c)};if(!t||se(t)||ds(t))return o;let c;t[s.expando]?c=t[s.expando]:(c=s.count++,t[s.expando]=c,s.events[c]={}),r=r||t;const d=n.split(" ");let f=d.length;for(;f--;){let m=d[f],b=l,g=!1,y=!1;m==="DOMContentLoaded"&&(m="ready"),s.domLoaded&&m==="ready"&&t.readyState==="complete"?o.call(r,nl({type:m})):(s.hasFocusIn||m!=="focusin"&&m!=="focusout"||(g=!0,y=m==="focusin"?"focus":"blur",b=h=>{const w=nl(h||i.event);w.type=w.type==="focus"?"focusin":"focusout",s.executeHandlers(w,c)}),a=s.events[c][m],a?m==="ready"&&s.domLoaded?o(nl({type:m})):a.push({func:o,scope:r}):(s.events[c][m]=a=[{func:o,scope:r}],a.fakeName=y,a.capture=g,a.nativeHandler=b,m==="ready"?Pk(t,b,s):af(t,y||m,b,g)))}return t=a=null,o}unbind(t,n,o){if(!t||se(t)||ds(t))return this;const r=t[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(o){let d=c.length;for(;d--;)if(c[d].func===o){const f=c.nativeHandler,m=c.fakeName,b=c.capture,g=c.slice(0,d).concat(c.slice(d+1));g.nativeHandler=f,g.fakeName=m,g.capture=b,s[l]=g}}o&&c.length!==0||(delete s[l],Mc(t,c.fakeName||l,c.nativeHandler,c.capture))}}}else yt(s,(a,i)=>{Mc(t,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(Ie(s,a))return this;delete this.events[r];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,o){return this.dispatch(t,n,o)}dispatch(t,n,o){if(!t||se(t)||ds(t))return this;const r=nl({type:n,target:t},o);do{const s=t[this.expando];s&&this.executeHandlers(r,s),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!r.isPropagationStopped());return this}clean(t){if(!t||se(t)||ds(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let o=n.length;for(;o--;)(t=n[o])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const o=this.events[n],r=o&&o[t.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&i.func.call(i.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ta.Event=new ta;const lf=v.each,Lk=v.grep,cf="data-mce-style",Mk=v.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ol=(e,t,n)=>{xt(n)||n===""?Ge(e,t):Ee(e,t,n)},Rh=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Ka=(e,t)=>{let n=0;if(e)for(let o=e.nodeType,r=e.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!t||!se(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},Oh=(e,t)=>{const n=Fe(t,"style"),o=e.serialize(e.parse(n),st(t));ol(t,cf,o)},Bh=(e,t,n)=>{const o=Rh(t);xt(n)||n===""?Lg(e,o):Xi(e,o,((r,s)=>x(r)?Ie(Mk,s)?r+"":r+"px":r)(n,o))},Rt=(e,t={})=>{const n={},o=window,r={};let s=0;const a=uh.forElement(S(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),i=[],l=t.schema?t.schema:us({}),c=rf({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new ta:ta.Event,f=l.getBlockElements(),m=j=>j&&e&&Ae(j)?e.getElementById(j):j,b=j=>{const U=m(j);return ie(U)?S(U):null},g=(j,U,Y="")=>{let V;const fe=b(j);if(ie(fe)&&dt(fe)){const le=we[U];V=le&&le.get?le.get(fe.dom,U):Fe(fe,U)}return ie(V)?V:Y},y=j=>{const U=m(j);return xt(U)?[]:U.attributes},h=(j,U,Y)=>{P(j,V=>{if(xe(V)){const fe=S(V),le=Y===""?null:Y,Oe=Fe(fe,U),je=we[U];je&&je.set?je.set(fe.dom,le,U):ol(fe,U,le),Oe!==le&&t.onSetAttrib&&t.onSetAttrib({attrElm:fe.dom,attrName:U,attrValue:le})}})},w=()=>t.root_element||e.body,E=(j,U)=>((Y,V,fe)=>{let le=0,Oe=0;const je=Y.ownerDocument;if(fe=fe||Y,V){if(fe===Y&&V.getBoundingClientRect&&$o(S(Y),"position")==="static"){const Pt=V.getBoundingClientRect();return le=Pt.left+(je.documentElement.scrollLeft||Y.scrollLeft)-je.documentElement.clientLeft,Oe=Pt.top+(je.documentElement.scrollTop||Y.scrollTop)-je.documentElement.clientTop,{x:le,y:Oe}}let Ze=V;for(;Ze&&Ze!==fe&&Ze.nodeType&&!ch(Ze,fe);){const Pt=Ze;le+=Pt.offsetLeft||0,Oe+=Pt.offsetTop||0,Ze=Pt.offsetParent}for(Ze=V.parentNode;Ze&&Ze!==fe&&Ze.nodeType&&!ch(Ze,fe);)le-=Ze.scrollLeft||0,Oe-=Ze.scrollTop||0,Ze=Ze.parentNode;Oe+=(Pt=>Sk.isFirefox()&&st(Pt)==="table"?lh(He(Pt)).filter(Lt=>st(Lt)==="caption").bind(Lt=>lh(Bn(Lt)).map(bo=>{const he=bo.dom.offsetTop,tt=Lt.dom.offsetTop,it=Lt.dom.offsetHeight;return he<=tt?-it:0})).getOr(0):0)(S(V))}return{x:le,y:Oe}})(e.body,m(j),U),k=(j,U,Y)=>{const V=m(j);var fe;if(!xt(V)&&(Cr(V)||xe(fe=V)&&fe.namespaceURI==="http://www.w3.org/2000/svg"))return Y?$o(S(V),Rh(U)):((U=U.replace(/-(\D)/g,(le,Oe)=>Oe.toUpperCase()))==="float"&&(U="cssFloat"),V.style?V.style[U]:void 0)},T=j=>{const U=m(j);if(!U)return{w:0,h:0};let Y=k(U,"width"),V=k(U,"height");return Y&&Y.indexOf("px")!==-1||(Y="0"),V&&V.indexOf("px")!==-1||(V="0"),{w:parseInt(Y,10)||U.offsetWidth||U.clientWidth,h:parseInt(V,10)||U.offsetHeight||U.clientHeight}},A=(j,U)=>{if(!j)return!1;const Y=re(j)?j:[j];return Et(Y,V=>$e(S(V),U))},B=(j,U,Y,V)=>{const fe=[];let le=m(j);V=V===void 0;const Oe=Y||(w().nodeName!=="BODY"?w().parentNode:null);if(Ae(U))if(U==="*")U=xe;else{const je=U;U=Ze=>A(Ze,je)}for(;le&&!(le===Oe||xt(le.nodeType)||Zi(le)||zu(le));){if(!U||U(le)){if(!V)return[le];fe.push(le)}le=le.parentNode}return V?fe:null},M=(j,U,Y)=>{let V=U;if(j){Ae(U)&&(V=fe=>A(fe,U));for(let fe=j[Y];fe;fe=fe[Y])if(gt(V)&&V(fe))return fe}return null},P=function(j,U,Y){const V=Y??this;if(re(j)){const fe=[];return lf(j,(le,Oe)=>{const je=m(le);je&&fe.push(U.call(V,je,Oe))}),fe}{const fe=m(j);return!!fe&&U.call(V,fe)}},z=(j,U)=>{P(j,Y=>{yt(U,(V,fe)=>{h(Y,fe,V)})})},W=(j,U)=>{P(j,Y=>{const V=S(Y);Ft(V,U)})},D=(j,U,Y,V,fe)=>P(j,le=>{const Oe=Ae(U)?e.createElement(U):U;return ie(Y)&&z(Oe,Y),V&&(!Ae(V)&&V.nodeType?Oe.appendChild(V):Ae(V)&&W(Oe,V)),fe?Oe:le.appendChild(Oe)}),L=(j,U,Y)=>D(e.createElement(j),j,U,Y,!0),F=ea.encodeAllRaw,X=(j,U)=>P(j,Y=>{const V=S(Y);return U&&Q(He(V),fe=>{vt(fe)&&fe.dom.length===0?Be(fe):wn(V,fe)}),Be(V),V.dom}),oe=(j,U,Y)=>{P(j,V=>{if(xe(V)){const fe=S(V),le=U.split(" ");Q(le,Oe=>{ie(Y)?(Y?qa:Ji)(fe,Oe):((je,Ze)=>{const Pt=Qi(je)?je.dom.classList.toggle(Ze):((Lt,bo)=>Te(Ug(Lt),bo)?qg(Lt,bo):Hg(Lt,bo))(je,Ze);$g(je)})(fe,Oe)})}})},te=(j,U,Y)=>P(U,V=>{var fe;const le=re(U)?j.cloneNode(!0):j;return Y&&lf(Lk(V.childNodes),Oe=>{le.appendChild(Oe)}),(fe=V.parentNode)===null||fe===void 0||fe.replaceChild(le,V),V}),Ce=()=>e.createRange(),Ne=(j,U,Y,V)=>{if(re(j)){let fe=j.length;const le=[];for(;fe--;)le[fe]=Ne(j[fe],U,Y,V);return le}return!t.collect||j!==e&&j!==o||i.push([j,U,Y,V]),d.bind(j,U,Y,V||me)},Re=(j,U,Y)=>{if(re(j)){let V=j.length;const fe=[];for(;V--;)fe[V]=Re(j[V],U,Y);return fe}if(i.length>0&&(j===e||j===o)){let V=i.length;for(;V--;){const[fe,le,Oe]=i[V];j!==fe||U&&U!==le||Y&&Y!==Oe||d.unbind(fe,le,Oe)}}return d.unbind(j,U,Y)},Pe=j=>{if(j&&Cr(j)){const U=j.getAttribute("data-mce-contenteditable");return U&&U!=="inherit"?U:j.contentEditable!=="inherit"?j.contentEditable:null}return null},me={doc:e,settings:t,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:d,isBlock:j=>Ae(j)?Ie(f,j):xe(j)&&(Ie(f,j.nodeName)||Js(l,j)),root:null,clone:(j,U)=>j.cloneNode(U),getRoot:w,getViewPort:j=>{const U=Fu(j);return{x:U.x,y:U.y,w:U.width,h:U.height}},getRect:j=>{const U=m(j),Y=E(U),V=T(U);return{x:Y.x,y:Y.y,w:V.w,h:V.h}},getSize:T,getParent:(j,U,Y)=>{const V=B(j,U,Y,!1);return V&&V.length>0?V[0]:null},getParents:B,get:m,getNext:(j,U)=>M(j,U,"nextSibling"),getPrev:(j,U)=>M(j,U,"previousSibling"),select:(j,U)=>{var Y,V;const fe=(V=(Y=m(U))!==null&&Y!==void 0?Y:t.root_element)!==null&&V!==void 0?V:e;return gt(fe.querySelectorAll)?hn(fe.querySelectorAll(j)):[]},is:A,add:D,create:L,createHTML:(j,U,Y="")=>{let V="<"+j;for(const fe in U)an(U,fe)&&(V+=" "+fe+'="'+F(U[fe])+'"');return Ms(Y)&&Ie(l.getVoidElements(),j)?V+" />":V+">"+Y+"</"+j+">"},createFragment:j=>{const U=e.createElement("div"),Y=e.createDocumentFragment();let V;for(Y.appendChild(U),j&&(U.innerHTML=j);V=U.firstChild;)Y.appendChild(V);return Y.removeChild(U),Y},remove:X,setStyle:(j,U,Y)=>{P(j,V=>{const fe=S(V);Bh(fe,U,Y),t.update_styles&&Oh(c,fe)})},getStyle:k,setStyles:(j,U)=>{P(j,Y=>{const V=S(Y);yt(U,(fe,le)=>{Bh(V,le,fe)}),t.update_styles&&Oh(c,V)})},removeAllAttribs:j=>P(j,U=>{const Y=U.attributes;for(let V=Y.length-1;V>=0;V--)U.removeAttributeNode(Y.item(V))}),setAttrib:h,setAttribs:z,getAttrib:g,getPos:E,parseStyle:j=>c.parse(j),serializeStyle:(j,U)=>c.serialize(j,U),addStyle:j=>{if(me!==Rt.DOM&&e===document){if(n[j])return;n[j]=!0}let U=e.getElementById("mceDefaultStyles");if(!U){U=e.createElement("style"),U.id="mceDefaultStyles",U.type="text/css";const Y=e.head;Y.firstChild?Y.insertBefore(U,Y.firstChild):Y.appendChild(U)}U.styleSheet?U.styleSheet.cssText+=j:U.appendChild(e.createTextNode(j))},loadCSS:j=>{j||(j=""),Q(j.split(","),U=>{r[U]=!0,a.load(U).catch(Se)})},addClass:(j,U)=>{oe(j,U,!0)},removeClass:(j,U)=>{oe(j,U,!1)},hasClass:(j,U)=>{const Y=b(j),V=U.split(" ");return ie(Y)&&to(V,fe=>Pu(Y,fe))},toggleClass:oe,show:j=>{P(j,U=>Lg(S(U),"display"))},hide:j=>{P(j,U=>Xi(S(U),"display","none"))},isHidden:j=>{const U=b(j);return ie(U)&&os(Sc(U,"display"),"none")},uniqueId:j=>(j||"mce_")+s++,setHTML:W,getOuterHTML:j=>{const U=b(j);return ie(U)?xe(U.dom)?U.dom.outerHTML:(Y=>{const V=O("div"),fe=S(Y.dom.cloneNode(!0));return q(V,fe),po(V)})(U):""},setOuterHTML:(j,U)=>{P(j,Y=>{xe(Y)&&(Y.outerHTML=U)})},decode:ea.decode,encode:F,insertAfter:(j,U)=>{const Y=m(U);return P(j,V=>{const fe=Y?.parentNode,le=Y?.nextSibling;return fe&&(le?fe.insertBefore(V,le):fe.appendChild(V)),V})},replace:te,rename:(j,U)=>{if(j.nodeName!==U.toUpperCase()){const Y=L(U);return lf(y(j),V=>{h(Y,V.nodeName,g(j,V.nodeName))}),te(Y,j,!0),Y}return j},findCommonAncestor:(j,U)=>{let Y=j;for(;Y;){let V=U;for(;V&&Y!==V;)V=V.parentNode;if(Y===V)break;Y=Y.parentNode}return!Y&&j.ownerDocument?j.ownerDocument.documentElement:Y},run:P,getAttribs:y,isEmpty:(j,U,Y)=>Le(U)?Wr(l,j,{...Y,isContent:fe=>{const le=fe.nodeName.toLowerCase();return!!U[le]}}):Wr(l,j,Y),createRng:Ce,nodeIndex:Ka,split:(j,U,Y)=>{let V,fe,le=Ce();if(j&&U&&j.parentNode&&U.parentNode){const Oe=j.parentNode;return le.setStart(Oe,Ka(j)),le.setEnd(U.parentNode,Ka(U)),V=le.extractContents(),le=Ce(),le.setStart(U.parentNode,Ka(U)+1),le.setEnd(Oe,Ka(j)+1),fe=le.extractContents(),Oe.insertBefore(Qu(me,V,l),j),Y?Oe.insertBefore(Y,j):Oe.insertBefore(U,j),Oe.insertBefore(Qu(me,fe,l),j),X(j),Y||U}},bind:Ne,unbind:Re,fire:(j,U,Y)=>d.dispatch(j,U,Y),dispatch:(j,U,Y)=>d.dispatch(j,U,Y),getContentEditable:Pe,getContentEditableParent:j=>{const U=w();let Y=null;for(let V=j;V&&V!==U&&(Y=Pe(V),Y===null);V=V.parentNode);return Y},isEditable:j=>{if(ie(j)){const U=xe(j)?j:j.parentElement;return ie(U)&&Cr(U)&&cs(S(U))}return!1},destroy:()=>{if(i.length>0){let j=i.length;for(;j--;){const[U,Y,V]=i[j];d.unbind(U,Y,V)}}yt(r,(j,U)=>{a.unload(U),delete r[U]})},isChildOf:(j,U)=>j===U||U.contains(j),dumpRng:j=>"startContainer: "+j.startContainer.nodeName+", startOffset: "+j.startOffset+", endContainer: "+j.endContainer.nodeName+", endOffset: "+j.endOffset},we=((j,U,Y)=>{const V=U.keep_values,fe={set:(Oe,je,Ze)=>{const Pt=S(Oe);gt(U.url_converter)&&ie(je)&&(je=U.url_converter.call(U.url_converter_scope||Y(),String(je),Ze,Oe)),ol(Pt,"data-mce-"+Ze,je),ol(Pt,Ze,je)},get:(Oe,je)=>{const Ze=S(Oe);return Fe(Ze,"data-mce-"+je)||Fe(Ze,je)}},le={style:{set:(Oe,je)=>{const Ze=S(Oe);V&&ol(Ze,cf,je),Ge(Ze,"style"),Ae(je)&&Xs(Ze,j.parse(je))},get:Oe=>{const je=S(Oe),Ze=Fe(je,cf)||Fe(je,"style");return j.serialize(j.parse(Ze),st(je))}}};return V&&(le.href=le.src=fe),le})(c,t,ue(me));return me};Rt.DOM=Rt(document),Rt.nodeIndex=Ka;const Ik=Rt.DOM;class Vr{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,o)=>{const r=Ik;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=v._addCacheSuffix(t),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(t){return this.states[t]===2}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,o=(l,c)=>{Bt(n.scriptLoadedCallbacks,c).each(d=>{Q(d,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=Ve(l,d=>d.status==="rejected");return c.length>0?Promise.reject(Jt(c,({reason:d})=>re(d)?d:[d])):Promise.resolve()},s=l=>Promise.allSettled(ot(l,c=>n.states[c]===2?(o("resolve",c),Promise.resolve()):n.states[c]===3?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,o("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],s(d).then(r)):Promise.resolve()},()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return _.from(d).each(Gn),r(c)})),i=jr(t);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,c)})}):a(i)}}Vr.ScriptLoader=new Vr;const rl={},df=en("en"),Dh=()=>Bt(rl,df.get()),rr={getData:()=>Bs(rl,e=>({...e})),setCode:e=>{e&&df.set(e)},getCode:()=>df.get(),add:(e,t)=>{let n=rl[e];n||(rl[e]=n={});const o=ot(sn(t),r=>r.toLowerCase());yt(t,(r,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const c=i.indexOf(l);return c!==-1&&i.indexOf(l,c+1)>c})(o,a)?(Ie(t,a)||(n[a]=r),n[s]=r):n[a]=r})},translate:e=>{const t=Dh().getOr({}),n=i=>gt(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>i===""||i==null,r=i=>{const l=n(i);return Ie(t,l)?n(t[l]):Bt(t,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(o(e))return"";if(Ke(a=e)&&Ie(a,"raw"))return n(e.raw);var a;if((i=>re(i)&&i.length>1)(e)){const i=e.slice(1);return s(r(e[0]).replace(/\{([0-9]+)\}/g,(l,c)=>Ie(i,c)?n(i[c]):l))}return s(r(e))},isRtl:()=>Dh().bind(e=>Bt(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Ie(rl,e)},Wn=()=>{const e=[],t={},n={},o=[],r=(l,c)=>{const d=Ve(o,f=>f.name===l&&f.state===c);Q(d,f=>f.resolve())},s=l=>Ie(t,l),a=(l,c)=>{const d=rr.getCode();!d||c&&(","+(c||"")+",").indexOf(","+d+",")===-1||Vr.ScriptLoader.add(t[l]+"/langs/"+d+".js")},i=(l,c="added")=>c==="added"&&(d=>Ie(n,d))(l)||c==="loaded"&&s(l)?Promise.resolve():new Promise(d=>{o.push({name:l,state:c,resolve:d})});return{items:e,urls:t,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{Wn.languageLoad!==!1&&(s(l)?a(l,c):i(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(e.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete t[l],delete n[l]},createUrl:(l,c)=>Ae(c)?Ae(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(t[l])return Promise.resolve();let d=Ae(c)?c:c.prefix+c.resource+c.suffix;d.indexOf("/")!==0&&d.indexOf("://")===-1&&(d=Wn.baseURL+"/"+d),t[l]=d.substring(0,d.lastIndexOf("/"));const f=()=>(r(l,"loaded"),Promise.resolve());return n[l]?f():Vr.ScriptLoader.add(d).then(f)},waitFor:i}};Wn.languageLoad=!0,Wn.baseURL="",Wn.PluginManager=Wn(),Wn.ThemeManager=Wn(),Wn.ModelManager=Wn();const sl=ue("mce-annotation"),na=ue("data-mce-annotation"),Xa=ue("data-mce-annotation-uid"),al=ue("data-mce-annotation-active"),il=ue("data-mce-annotation-classes"),ll=ue("data-mce-annotation-attrs"),Ph=e=>t=>_e(t,e),Lh=(e,t)=>{const n=e.selection.getRng(),o=S(n.startContainer),r=S(e.getBody()),s=t.fold(()=>"."+sl(),i=>`[${na()}="${i}"]`),a=Wt(o,n.startOffset).getOr(o);return Ha(a,s,Ph(r)).bind(i=>De(i,`${Xa()}`).bind(l=>De(i,`${na()}`).map(c=>{const d=Ih(e,l);return{uid:l,name:c,elements:d}})))},Mh=(e,t)=>Ct(e,"data-mce-bogus")||((n,o,r)=>Gi(n,'[data-mce-bogus="all"]',r).isSome())(e,0,Ph(t)),Ih=(e,t)=>{const n=S(e.getBody()),o=Pn(n,`[${Xa()}="${t}"]`);return Ve(o,r=>!Mh(r,n))},Fh=(e,t)=>{const n=S(e.getBody()),o=Pn(n,`[${na()}="${t}"]`),r={};return Q(o,s=>{if(!Mh(s,n)){const a=Fe(s,Xa()),i=Bt(r,a).getOr([]);r[a]=i.concat([s])}}),r},jh=(e,t,n=St)=>{const o=new fn(e,t),r=s=>{let a;do a=o[s]();while(a&&!se(a)&&!n(a));return _.from(a).filter(se)};return{current:()=>_.from(o.current()).filter(se),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},oa=(e,t)=>{const n=t||(r=>e.isBlock(r)||qt(r)||Dt(r)),o=(r,s,a,i)=>{if(se(r)){const l=i(r,s,r.data);if(l!==-1)return _.some({container:r,offset:l})}return a().bind(l=>o(l.container,l.offset,a,i))};return{backwards:(r,s,a,i)=>{const l=jh(r,i??e.getRoot(),n);return o(r,s,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(r,s,a,i)=>{const l=jh(r,i??e.getRoot(),n);return o(r,s,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},Ya=e=>{let t;return n=>(t=t||Tn(e,jt),Ie(t,st(n)))},ra=e=>dt(e)&&st(e)==="br",zh=Ya(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),uf=Ya(["ul","ol","dl"]),Ga=Ya(["li","dd","dt"]),Fk=Ya(["thead","tbody","tfoot"]),cl=Ya(["td","th"]),Ic=Ya(["pre","script","textarea","style"]),Qa=()=>{const e=O("br");return Ee(e,"data-mce-bogus","1"),e},fs=e=>{bt(e),q(e,Qa())},mn=zn,Fc=rs,go=e=>e.replace(/\uFEFF/g,""),jk=xe,Ja=se,Za=e=>(Ja(e)&&(e=e.parentNode),jk(e)&&e.hasAttribute("data-mce-caret")),ms=e=>Ja(e)&&Fc(e.data),Ao=e=>Za(e)||ms(e),Uh=e=>e.firstChild!==e.lastChild||!qt(e.firstChild),ff=e=>{const t=e.container();return!!se(t)&&(t.data.charAt(e.offset())===mn||e.isAtStart()&&ms(t.previousSibling))},mf=e=>{const t=e.container();return!!se(t)&&(t.data.charAt(e.offset()-1)===mn||e.isAtEnd()&&ms(t.nextSibling))},jc=e=>Ja(e)&&e.data[0]===mn,zc=e=>Ja(e)&&e.data[e.data.length-1]===mn,pf=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const o=t.getElementsByTagName("br"),r=o[o.length-1];Gs(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Hh=e=>Za(e.startContainer),ei=Math.round,sa=e=>e?{left:ei(e.left),top:ei(e.top),bottom:ei(e.bottom),right:ei(e.right),width:ei(e.width),height:ei(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},qh=(e,t)=>(e=sa(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),$h=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,dl=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&$h(t.top-e.bottom,e,t)},ul=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&$h(t.bottom-e.top,e,t),Wh=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left),r=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-r)*(n-r))},Uc=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},ps=(e,t)=>{if(xe(e)&&e.hasChildNodes()){const n=e.childNodes,o=((r,s,a)=>Math.min(Math.max(r,0),a))(t,0,n.length-1);return n[o]}return e},zk=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),Vh=e=>Ae(e)&&e.charCodeAt(0)>=768&&zk.test(e),Kh=Wo,Uk=Dt,Hk=qt,qk=se,$k=nr(["script","style","textarea"]),Xh=nr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Wk=nr(["table"]),Vk=Ao,sr=e=>!Vk(e)&&(qk(e)?!$k(e.parentNode):Xh(e)||Hk(e)||Wk(e)||gf(e)),gf=e=>!(t=>xe(t)&&t.getAttribute("unselectable")==="true")(e)&&Uk(e),Yh=(e,t)=>sr(e)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(gf(r))return!1;if(Kh(r))return!0}return!0})(e,t),Gh=xe,Kk=sr,Qh=Rc("display","block table"),Xk=Rc("float","left right"),fl=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(Gh,Kk,dr(Xk)),Yk=dr(Rc("white-space","pre pre-line pre-wrap")),ml=se,hf=qt,Jh=Rt.nodeIndex,Hc=(e,t)=>t<0&&xe(e)&&e.hasChildNodes()?void 0:ps(e,t),bf=e=>e?e.createRange():Rt.DOM.createRng(),vf=e=>Ae(e)&&/[\r\n\t ]/.test(e),Zh=e=>!!e.setStart&&!!e.setEnd,yf=e=>{const t=e.startContainer,n=e.startOffset;if(vf(e.toString())&&Yk(t.parentNode)&&se(t)){const o=t.data;if(vf(o[n-1])||vf(o[n+1]))return!0}return!1},e0=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,gs=e=>{var t;let n;const o=e.getClientRects();return n=o.length>0?sa(o[0]):sa(e.getBoundingClientRect()),!Zh(e)&&hf(e)&&e0(n)?(r=>{const s=r.ownerDocument,a=bf(s),i=s.createTextNode(zt),l=r.parentNode;l.insertBefore(i,r),a.setStart(i,0),a.setEnd(i,1);const c=sa(a.getBoundingClientRect());return l.removeChild(i),c})(e):e0(n)&&Zh(e)&&(t=(r=>{const s=r.startContainer,a=r.endContainer,i=r.startOffset,l=r.endOffset;if(s===a&&se(a)&&i===0&&l===1){const c=r.cloneRange();return c.setEndAfter(a),gs(c)}return null})(e))!==null&&t!==void 0?t:n},aa=(e,t)=>{const n=qh(e,t);return n.width=1,n.right=n.left+1,n},G=(e,t,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=d=>{var f,m;d.height!==0&&(s.length>0&&(f=d,m=s[s.length-1],f.left===m.left&&f.top===m.top&&f.bottom===m.bottom&&f.right===m.right)||s.push(d))},i=(d,f)=>{const m=bf(d.ownerDocument);if(f<d.data.length){if(Vh(d.data[f]))return;if(Vh(d.data[f-1])&&(m.setStart(d,f),m.setEnd(d,f+1),!yf(m)))return void a(aa(gs(m),!1))}f>0&&(m.setStart(d,f-1),m.setEnd(d,f),yf(m)||a(aa(gs(m),!1))),f<d.data.length&&(m.setStart(d,f),m.setEnd(d,f+1),yf(m)||a(aa(gs(m),!0)))},l=r.container(),c=r.offset();if(ml(l))return i(l,c),s;if(Gh(l))if(r.isAtEnd()){const d=Hc(l,c);ml(d)&&i(d,d.data.length),fl(d)&&!hf(d)&&a(aa(gs(d),!1))}else{const d=Hc(l,c);if(ml(d)&&i(d,0),fl(d)&&r.isAtEnd())return a(aa(gs(d),!1)),s;const f=Hc(r.container(),r.offset()-1);fl(f)&&!hf(f)&&(Qh(f)||Qh(d)||!fl(d))&&a(aa(gs(f),!1)),fl(d)&&a(aa(gs(d),!0))}return s})(G(e,t))),n);return{container:ue(e),offset:ue(t),toRange:()=>{const r=bf(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(ml(e),t===0),isAtEnd:()=>ml(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>Hc(e,r?t-1:t)}};G.fromRangeStart=e=>G(e.startContainer,e.startOffset),G.fromRangeEnd=e=>G(e.endContainer,e.endOffset),G.after=e=>G(e.parentNode,Jh(e)+1),G.before=e=>G(e.parentNode,Jh(e)),G.isAbove=(e,t)=>nn(yn(t.getClientRects()),Qo(e.getClientRects()),dl).getOr(!1),G.isBelow=(e,t)=>nn(Qo(t.getClientRects()),yn(e.getClientRects()),ul).getOr(!1),G.isAtStart=e=>!!e&&e.isAtStart(),G.isAtEnd=e=>!!e&&e.isAtEnd(),G.isTextPosition=e=>!!e&&se(e.container()),G.isElementPosition=e=>!G.isTextPosition(e);const qc=(e,t)=>{se(t)&&t.data.length===0&&e.remove(t)},Cf=(e,t,n)=>{zu(n)?((o,r,s)=>{const a=_.from(s.firstChild),i=_.from(s.lastChild);r.insertNode(s),a.each(l=>qc(o,l.previousSibling)),i.each(l=>qc(o,l.nextSibling))})(e,t,n):((o,r,s)=>{r.insertNode(s),qc(o,s.previousSibling),qc(o,s.nextSibling)})(e,t,n)},ar=se,t0=Gs,n0=Rt.nodeIndex,o0=e=>{const t=e.parentNode;return t0(t)?o0(t):t},wf=e=>e?zr(e.childNodes,(t,n)=>(t0(n)&&n.nodeName!=="BR"?t=t.concat(wf(n)):t.push(n),t),[]):[],r0=e=>t=>e===t,s0=e=>(ar(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,o;n=wf(o0(t)),o=Li(n,r0(t),t),n=n.slice(0,o+1);const r=zr(n,(s,a,i)=>(ar(a)&&ar(n[i-1])&&s++,s),0);return n=ss(n,nr([t.nodeName])),o=Li(n,r0(t),t),o-r})(e)+"]",a0=(e,t)=>{let n,o=[],r=t.container(),s=t.offset();if(ar(r))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&ar(c);)l+=c.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(s0(r));let a=((i,l)=>{const c=[];for(let d=l.parentNode;d&&d!==i;d=d.parentNode)c.push(d);return c})(e,r);return a=ss(a,dr(Gs)),o=o.concat(zs(a,i=>s0(i))),o.reverse().join("/")+","+n},i0=(e,t)=>{if(!t)return null;const n=t.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=zr(o,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?(l[1]==="text()"&&(l[1]="#text"),((c,d,f)=>{let m=wf(c);return m=ss(m,(b,g)=>!ar(b)||!ar(m[g-1])),m=ss(m,nr([d])),m[f]})(a,l[1],parseInt(l[2],10))):null},e);if(!s)return null;if(!ar(s)&&s.parentNode){let a;return a=r==="after"?n0(s)+1:n0(s),G(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;ar(l);){const d=l.data.length;if(i>=c&&i<=c+d){a=l,i-=c;break}if(!ar(l.nextSibling)){a=l,i=d;break}c+=d,l=l.nextSibling}return ar(a)&&i>a.data.length&&(i=a.data.length),G(a,i)})(s,parseInt(r,10))},$c=Dt,l0=(e,t,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=e.getRoot();if(se(s))i.push(n?((c,d,f)=>{let m=c(d.data.slice(0,f)).length;for(let b=d.previousSibling;b&&se(b);b=b.previousSibling)m+=c(b.data).length;return m})(t,s,a):a);else{let c=0;const d=s.childNodes;a>=d.length&&d.length&&(c=1,a=Math.max(0,d.length-1)),i.push(e.nodeIndex(d[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(e.nodeIndex(c,n));return i},xf=(e,t,n)=>{let o=0;return v.each(e.select(t),r=>r.getAttribute("data-mce-bogus")==="all"?void 0:r!==n&&void o++),o},c0=(e,t)=>{let n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;if(xe(n)&&n.nodeName==="TR"){const r=n.childNodes;n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))}},d0=e=>(c0(e,!0),c0(e,!1),e),u0=(e,t)=>{if(xe(e)&&(e=ps(e,t),$c(e)))return e;if(Ao(e)){se(e)&&Za(e)&&(e=e.parentNode);let n=e.previousSibling;if($c(n)||(n=e.nextSibling,$c(n)))return n}},f0=(e,t,n)=>{const o=n.getNode(),r=n.getRng();if(o.nodeName==="IMG"||$c(o)){const a=o.nodeName;return{name:a,index:xf(n.dom,a,o)}}const s=(a=>u0(a.startContainer,a.startOffset)||u0(a.endContainer,a.endOffset))(r);if(s){const a=s.tagName;return{name:a,index:xf(n.dom,a,s)}}return((a,i,l,c)=>{const d=i.dom,f=l0(d,a,l,c,!0),m=i.isForward(),b=Hh(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:f,forward:m,...b}:{start:f,end:l0(d,a,l,c,!1),forward:m,...b}})(e,n,t,r)},m0=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},p0=(e,t)=>{const n=e.dom;let o=e.getRng();const r=n.uniqueId(),s=e.isCollapsed(),a=e.getNode(),i=a.nodeName,l=e.isForward();if(i==="IMG")return{name:i,index:xf(n,i,a)};const c=d0(o.cloneRange());if(!s){c.collapse(!1);const f=m0(n,r+"_end",t);Cf(n,c,f)}o=d0(o),o.collapse(!0);const d=m0(n,r+"_start",t);return Cf(n,o,d),e.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},Sf=ye(f0,mt,!0),Gk=e=>e.type==="inline-command"||e.type==="inline-format",Qk=e=>e.type==="block-command"||e.type==="block-format",Jk=e=>{var t;const n=r=>ln.error({message:r,pattern:e}),o=(r,s,a)=>{if(e.format!==void 0){let i;if(re(e.format)){if(!to(e.format,Ae))return n(r+" pattern has non-string items in the `format` array");i=e.format}else{if(!Ae(e.format))return n(r+" pattern has non-string `format` parameter");i=[e.format]}return ln.value(s(i))}return e.cmd!==void 0?Ae(e.cmd)?ln.value(a(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Ke(e))return n("Raw pattern is not an object");if(!Ae(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Ae(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,s=e.end;return s.length===0&&(s=r,r=""),o("Inline",a=>({type:"inline-format",start:r,end:s,format:a}),(a,i)=>({type:"inline-command",start:r,end:s,cmd:a,value:i}))}if(e.replacement!==void 0)return Ae(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):ln.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const r=(t=e.trigger)!==null&&t!==void 0?t:"space";return e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",s=>({type:"block-format",start:e.start,format:s[0],trigger:r}),(s,a)=>({type:"block-command",start:e.start,cmd:s,value:a,trigger:r}))}},g0=e=>Ve(e,Qk),h0=e=>Ve(e,Gk),Ef=(e,t)=>({...e,blockPatterns:Ve(e.blockPatterns,n=>((o,r)=>(o.type==="block-command"||o.type==="block-format")&&o.trigger===r)(n,t))}),b0=e=>{const t=(n=>{const o=[],r=[];return Q(n,s=>{s.fold(a=>{o.push(a)},a=>{r.push(a)})}),{errors:o,values:r}})(ot(e,Jk));return Q(t.errors,n=>console.error(n.message,n.pattern)),t.values},v0=(e,t,n)=>{e.dispatch(t,n)},y0=(e,t,n,o)=>{e.dispatch("FormatApply",{format:t,node:n,vars:o})},C0=(e,t,n,o)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:o})},w0=(e,t)=>e.dispatch("SetContent",t),x0=(e,t)=>e.dispatch("GetContent",t),kf=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},S0=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),_f=co().deviceType,Zk=_f.isTouch(),e_=Rt.DOM,E0=e=>yo(e,RegExp),be=e=>t=>t.options.get(e),Wc=e=>Ae(e)||Ke(e),k0=(e,t="")=>n=>{const o=Ae(n);if(o){if(n.indexOf("=")!==-1){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return gn(a,(i,l)=>{const c=l.split("="),d=c[0],f=c.length>1?c[1]:d;return i[Fr(d)]=Fr(f),i},{})})(n);return{value:Bt(r,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},t_=be("iframe_attrs"),n_=be("doctype"),_0=be("document_base_url"),o_=be("body_id"),r_=be("body_class"),N0=be("content_security_policy"),s_=be("br_in_pre"),Mn=be("forced_root_block"),pl=be("forced_root_block_attrs"),a_=be("newline_behavior"),i_=be("br_newline_selector"),l_=be("no_newline_selector"),c_=be("keep_styles"),d_=be("end_container_on_empty_block"),A0=be("automatic_uploads"),T0=be("images_reuse_filename"),u_=be("images_replace_blob_uris"),R0=be("icons"),f_=be("icons_url"),m_=be("images_upload_url"),p_=be("images_upload_base_path"),g_=be("images_upload_credentials"),h_=be("images_upload_handler"),b_=be("content_css_cors"),Nf=be("referrer_policy"),O0=be("language"),v_=be("language_url"),B0=be("indent_use_margin"),y_=be("indentation"),C_=be("content_css"),w_=be("content_style"),D0=be("font_css"),x_=be("directionality"),S_=be("inline_boundaries_selector"),P0=be("object_resizing"),E_=be("resize_img_proportional"),k_=be("placeholder"),L0=be("event_root"),__=be("service_message"),ti=be("theme"),N_=be("theme_url"),Af=be("model"),A_=be("model_url"),gl=be("inline_boundaries"),T_=be("formats"),R_=be("preview_styles"),O_=be("format_empty_lines"),B_=be("format_noneditable_selector"),D_=be("custom_ui_selector"),Tf=be("inline"),P_=be("hidden_input"),L_=be("submit_patch"),M_=be("add_form_submit_trigger"),I_=be("add_unload_trigger"),F_=be("custom_undo_redo_levels"),j_=be("disable_nodechange"),M0=be("readonly"),z_=be("editable_root"),I0=be("content_css_cors"),Vc=be("plugins"),U_=be("external_plugins"),H_=be("block_unsupported_drop"),q_=be("visual"),$_=be("visual_table_class"),F0=be("visual_anchor_class"),j0=be("iframe_aria_text"),W_=be("setup"),V_=be("init_instance_callback"),K_=be("urlconverter_callback"),X_=be("auto_focus"),Y_=be("browser_spellcheck"),G_=be("protect"),Q_=be("paste_block_drop"),Kc=be("paste_data_images"),J_=be("paste_preprocess"),Z_=be("paste_postprocess"),eN=be("newdocument_content"),tN=be("paste_webkit_styles"),nN=be("paste_remove_styles_if_webkit"),oN=be("paste_merge_formats"),rN=be("smart_paste"),sN=be("paste_as_text"),aN=be("paste_tab_spaces"),iN=be("allow_html_data_urls"),lN=be("text_patterns"),cN=be("text_patterns_lookup"),z0=be("noneditable_class"),dN=be("editable_class"),uN=be("noneditable_regexp"),fN=be("preserve_cdata"),mN=be("highlight_on_focus"),U0=be("xss_sanitization"),pN=be("init_content_sync"),H0=e=>v.explode(e.options.get("images_file_types")),gN=be("table_tab_navigation"),hN=be("details_initial_state"),bN=be("details_serialized_state"),q0=be("sandbox_iframes"),Rf=e=>e.options.get("sandbox_iframes_exclusions"),vN=be("convert_unsafe_embeds"),yN=be("license_key"),CN=be("api_key"),Xc=be("disabled"),wN=xe,$0=se,W0=e=>{const t=e.parentNode;t&&t.removeChild(e)},V0=e=>{const t=go(e);return{count:e.length-t.length,text:t}},K0=e=>{let t;for(;(t=e.data.lastIndexOf(mn))!==-1;)e.deleteData(t,1)},X0=(e,t)=>(ia(e),t),xN=(e,t)=>G.isTextPosition(t)?((n,o)=>$0(n)&&o.container()===n?((r,s)=>{const a=V0(r.data.substr(0,s.offset())),i=V0(r.data.substr(s.offset()));return(a.text+i.text).length>0?(K0(r),G(r,s.offset()-a.count)):s})(n,o):X0(n,o))(e,t):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,c)=>{const d=lt(l,c);return d===-1?_.none():_.some(d)})(hn(a.childNodes),r).map(l=>l<s.offset()?G(a,s.offset()-1):s).getOr(s);return ia(r),i})(n,o):X0(n,o))(e,t),ia=e=>{wN(e)&&Ao(e)&&(Uh(e)?e.removeAttribute("data-mce-caret"):W0(e)),$0(e)&&(K0(e),e.data.length===0&&W0(e))},SN=Dt,EN=xr,kN=Oc,Y0=(e,t,n)=>{const o=qh(t.getBoundingClientRect(),n);let r,s;if(e.tagName==="BODY"){const i=e.ownerDocument.documentElement;r=e.scrollLeft||i.scrollLeft,s=e.scrollTop||i.scrollTop}else{const i=e.getBoundingClientRect();r=e.scrollLeft-i.left,s=e.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},_N=(e,t,n,o)=>{const r=wo();let s,a;const i=Mn(e),l=e.dom,c=()=>{(d=>{var f,m;const b=Pn(S(d),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<b.length;g++){const y=b[g].dom;let h=y.previousSibling;if(zc(h)){const w=h.data;w.length===1?(f=h.parentNode)===null||f===void 0||f.removeChild(h):h.deleteData(w.length-1,1)}h=y.nextSibling,jc(h)&&(h.data.length===1?(m=h.parentNode)===null||m===void 0||m.removeChild(h):h.deleteData(0,1))}})(t),a&&(ia(a),a=null),r.on(d=>{l.remove(d.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{isShowing:r.isSet,show:(d,f)=>{let m;if(c(),kN(f))return null;if(!n(f))return a=((b,g)=>{var y;const h=((y=b.ownerDocument)!==null&&y!==void 0?y:document).createTextNode(mn),w=b.parentNode;if(g){const E=b.previousSibling;if(Ja(E)){if(Ao(E))return E;if(zc(E))return E.splitText(E.data.length-1)}w?.insertBefore(h,b)}else{const E=b.nextSibling;if(Ja(E)){if(Ao(E))return E;if(jc(E))return E.splitText(1),E}b.nextSibling?w?.insertBefore(h,b.nextSibling):w?.appendChild(h)}return h})(f,d),m=f.ownerDocument.createRange(),hl(a.nextSibling)?(m.setStart(a,0),m.setEnd(a,0)):(m.setStart(a,1),m.setEnd(a,1)),m;{const b=((h,w,E)=>{var k;const T=((k=w.ownerDocument)!==null&&k!==void 0?k:document).createElement(h);T.setAttribute("data-mce-caret",E?"before":"after"),T.setAttribute("data-mce-bogus","all"),T.appendChild(Qa().dom);const A=w.parentNode;return E?A?.insertBefore(T,w):w.nextSibling?A?.insertBefore(T,w.nextSibling):A?.appendChild(T),T})(i,f,d),g=Y0(t,f,d);l.setStyle(b,"top",g.top),l.setStyle(b,"caret-color","transparent"),a=b;const y=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(y,{...g}),l.add(t,y),r.set({caret:y,element:f,before:d}),d&&l.addClass(y,"mce-visual-caret-before"),s=window.setInterval(()=>{r.on(h=>{o()?l.toggleClass(h.caret,"mce-visual-caret-hidden"):l.addClass(h.caret,"mce-visual-caret-hidden")})},500),m=f.ownerDocument.createRange(),m.setStart(b,0),m.setEnd(b,0)}return m},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(d=>{const f=Y0(t,d.element,d.before);l.setStyles(d.caret,{...f})})},destroy:()=>clearInterval(s)}},G0=()=>ut.browser.isFirefox(),hl=e=>SN(e)||EN(e),bl=e=>(hl(e)||wr(e)&&G0())&&On(S(e)).exists(cs),NN=Wo,Of=Dt,AN=xr,Q0=Rc("display","block table table-cell table-row table-caption list-item"),J0=Ao,Z0=Za,TN=xe,RN=se,ON=sr,ni=e=>e===1,la=e=>e===-1,Yc=(e,t)=>{let n;for(;n=e(t);)if(!Z0(n))return n;return null},vl=(e,t,n,o,r)=>{const s=new fn(e,o),a=Of(e)||Z0(e);let i;if(la(t)){if(a&&(i=Yc(s.prev.bind(s),!0),n(i)))return i;for(;i=Yc(s.prev.bind(s),r);)if(n(i))return i}if(ni(t)){if(a&&(i=Yc(s.next.bind(s),!0),n(i)))return i;for(;i=Yc(s.next.bind(s),r);)if(n(i))return i}return null},hs=(e,t)=>{for(;e&&e!==t;){if(Q0(e))return e;e=e.parentNode}return null},Sr=(e,t,n)=>hs(e.container(),n)===hs(t.container(),n),Bf=(e,t)=>{if(!t)return _.none();const n=t.container(),o=t.offset();return TN(n)?_.from(n.childNodes[o+e]):_.none()},eb=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},BN=(e,t,n)=>hs(t,e)===hs(n,e),tb=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let r=n;for(;r&&r!==t;){let s=r[o];if(s&&J0(s)&&(s=s[o]),Of(s)||AN(s)){if(BN(t,s,r))return s;break}if(ON(s))break;r=r.parentNode}return null},yl=ye(eb,!0),Cl=ye(eb,!1),Df=(e,t,n)=>{let o;const r=ye(tb,!0,t),s=ye(tb,!1,t),a=n.startContainer,i=n.startOffset;if(Za(a)){const l=RN(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if(c==="before"&&(o=l.nextSibling,bl(o)))return yl(o);if(c==="after"&&(o=l.previousSibling,bl(o)))return Cl(o)}if(!n.collapsed)return n;if(se(a)){if(J0(a)){if(e===1){if(o=s(a),o)return yl(o);if(o=r(a),o)return Cl(o)}if(e===-1){if(o=r(a),o)return Cl(o);if(o=s(a),o)return yl(o)}return n}if(zc(a)&&i>=a.data.length-1)return e===1&&(o=s(a),o)?yl(o):n;if(jc(a)&&i<=1)return e===-1&&(o=r(a),o)?Cl(o):n;if(i===a.data.length)return o=s(a),o?yl(o):n;if(i===0)return o=r(a),o?Cl(o):n}return n},nb=(e,t)=>Bf(e?0:-1,t).filter(Of),wl=(e,t,n)=>{const o=Df(e,t,n);return e===-1?G.fromRangeStart(o):G.fromRangeEnd(o)},Gc=e=>_.from(e.getNode()).map(S),Pf=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Qc=(e,t)=>{const n=Sr(e,t);return!(n||!qt(e.getNode()))||n},DN=Dt,Er=se,ob=xe,Lf=qt,oi=sr,rb=e=>Xh(e)||(t=>!!gf(t)&&!gn(hn(t.getElementsByTagName("*")),(n,o)=>n||Kh(o),!1))(e),Jc=Yh,sb=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,ab=(e,t)=>{if(ni(e)){if(oi(t.previousSibling)&&!Er(t.previousSibling))return G.before(t);if(Er(t))return G(t,0)}if(la(e)){if(oi(t.nextSibling)&&!Er(t.nextSibling))return G.after(t);if(Er(t))return G(t,t.data.length)}return la(e)?Lf(t)?G.before(t):G.after(t):G.before(t)},Mf=(e,t,n)=>{let o,r,s,a;if(!ob(n)||!t)return null;if(t.isEqual(G.after(n))&&n.lastChild){if(a=G.after(n.lastChild),la(e)&&oi(n.lastChild)&&ob(n.lastChild))return Lf(n.lastChild)?G.before(n.lastChild):a}else a=t;const i=a.container();let l=a.offset();if(Er(i)){if(la(e)&&l>0)return G(i,--l);if(ni(e)&&l<i.length)return G(i,++l);o=i}else{if(la(e)&&l>0&&(r=sb(i,l-1),oi(r)))return!rb(r)&&(s=vl(r,e,Jc,r),s)?Er(s)?G(s,s.data.length):G.after(s):Er(r)?G(r,r.data.length):G.before(r);if(ni(e)&&l<i.childNodes.length&&(r=sb(i,l),oi(r)))return Lf(r)?((d,f)=>{const m=f.nextSibling;return m&&oi(m)?Er(m)?G(m,0):G.before(m):Mf(1,G.after(f),d)})(n,r):!rb(r)&&(s=vl(r,e,Jc,r),s)?Er(s)?G(s,0):G.before(s):Er(r)?G(r,0):G.after(r);o=r||a.getNode()}if(o&&(ni(e)&&a.isAtEnd()||la(e)&&a.isAtStart())&&(o=vl(o,e,jt,n,!0),Jc(o,n)))return ab(e,o);r=o&&vl(o,e,Jc,n);const c=Cn(Ve(((d,f)=>{const m=[];let b=d;for(;b&&b!==f;)m.push(b),b=b.parentNode;return m})(i,n),DN));return!c||r&&c.contains(r)?r?ab(e,r):null:(a=ni(e)?G.after(c):G.before(c),a)},kr=e=>({next:t=>Mf(1,t,e),prev:t=>Mf(-1,t,e)}),ib=e=>G.isTextPosition(e)?e.offset()===0:sr(e.getNode()),lb=e=>{if(G.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return sr(e.getNode(!0))},cb=(e,t)=>!G.isTextPosition(e)&&!G.isTextPosition(t)&&e.getNode()===t.getNode(!0),To=(e,t,n)=>{const o=kr(t);return _.from(e?o.next(n):o.prev(n))},ri=(e,t,n)=>To(e,t,n).bind(o=>Sr(n,o,t)&&((r,s,a)=>{return r?!cb(s,a)&&(i=s,!(!G.isTextPosition(i)&&qt(i.getNode())))&&lb(s)&&ib(a):!cb(a,s)&&ib(s)&&lb(a);var i})(e,n,o)?To(e,t,o):_.some(o)),db=(e,t,n,o)=>ri(e,t,n).bind(r=>o(r)?db(e,t,r,o):_.some(r)),si=(e,t)=>{const n=e?t.firstChild:t.lastChild;return se(n)?_.some(G(n,e?0:n.data.length)):n?sr(n)?_.some(e?G.before(n):qt(o=n)?G.before(o):G.after(o)):((r,s,a)=>{const i=r?G.before(a):G.after(a);return To(r,s,i)})(e,t,n):_.none();var o},Zn=ye(To,!0),no=ye(To,!1),In=ye(si,!0),Vo=ye(si,!1),If="_mce_caret",Ro=e=>xe(e)&&e.id===If,ca=(e,t)=>{let n=t;for(;n&&n!==e;){if(Ro(n))return n;n=n.parentNode}return null},ub=e=>Ie(e,"name"),fb=e=>v.isArray(e.start),Zc=e=>!(!ub(e)&&pn(e.forward))||e.forward,mb=(e,t)=>(xe(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),PN=(e,t)=>Vo(e).fold(St,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),pb=(e,t,n)=>!(!(o=>!o.hasChildNodes())(t)||!ca(e,t)||(((o,r)=>{var s;const a=((s=o.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(mn);o.appendChild(a),r.setStart(a,0),r.setEnd(a,0)})(t,n),0)),gb=(e,t,n,o)=>{const r=n[t?"start":"end"],s=e.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const c=a.childNodes;if(pb(s,a,o))return!0;if(r[l]>c.length-1)return!!pb(s,a,o)||PN(a,o);a=c[r[l]]}se(a)&&(i=Math.min(r[0],a.data.length)),xe(a)&&(i=Math.min(r[0],a.childNodes.length)),t?o.setStart(a,i):o.setEnd(a,i)}return!0},Ff=e=>se(e)&&e.data.length>0,hb=(e,t,n)=>{const o=e.get(n.id+"_"+t),r=o?.parentNode,s=n.keep;if(o&&r){let a,i;if(t==="start"?s?o.hasChildNodes()?(a=o.firstChild,i=1):Ff(o.nextSibling)?(a=o.nextSibling,i=0):Ff(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)+1):(a=r,i=e.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):Ff(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=e.nodeIndex(o)):(a=r,i=e.nodeIndex(o)),!s){const l=o.previousSibling,c=o.nextSibling;let d;for(v.each(v.grep(o.childNodes),f=>{se(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});d=e.get(n.id+"_"+t);)e.remove(d,!0);if(se(c)&&se(l)&&!ut.browser.isOpera()){const f=l.data.length;l.appendData(c.data),e.remove(c),a=l,i=f}}return _.some(G(a,i))}return _.none()},LN=(e,t,n)=>((o,r,s=!1)=>r===2?f0(go,s,o):r===3?(a=>{const i=a.getRng();return{start:a0(a.dom.getRoot(),G.fromRangeStart(i)),end:a0(a.dom.getRoot(),G.fromRangeEnd(i)),forward:a.isForward()}})(o):r?(a=>({rng:a.getRng(),forward:a.isForward()}))(o):p0(o,!1))(e,t,n),MN=(e,t)=>{((n,o)=>{const r=n.dom;if(o){if(fb(o))return((s,a)=>{const i=s.createRng();return gb(s,!0,a,i)&&gb(s,!1,a,i)?_.some({range:i,forward:Zc(a)}):_.none()})(r,o);if((s=>Ae(s.start))(o))return((s,a)=>{const i=_.from(i0(s.getRoot(),a.start)),l=_.from(i0(s.getRoot(),a.end));return nn(i,l,(c,d)=>{const f=s.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(d.container(),d.offset()),{range:f,forward:Zc(a)}})})(r,o);if((s=>Ie(s,"id"))(o))return((s,a)=>{const i=hb(s,"start",a),l=hb(s,"end",a);return nn(i,l.or(i),(c,d)=>{const f=s.createRng();return f.setStart(mb(s,c.container()),c.offset()),f.setEnd(mb(s,d.container()),d.offset()),{range:f,forward:Zc(a)}})})(r,o);if(ub(o))return((s,a)=>_.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(r,o);if((s=>Ie(s,"rng"))(o))return _.some({range:o.rng,forward:Zc(o)})}return _.none()})(e,t).each(({range:n,forward:o})=>{e.setRng(n,o)})},Oo=e=>xe(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",ed=(bb=zt,e=>bb===e);var bb;const da=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,jf=e=>!da(e)&&!ed(e)&&!rs(e),zf=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},vb=(e,t)=>{const n=Pn(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:(o=>Ve((r=>Jt(r,s=>{const a=Uc(s);return a?[S(a)]:[]}))(o),cl))(e)},ai=e=>vb(zf(e.selection.getSel()),S(e.getBody())),xl=(e,t)=>Gi(e,"table",t),yb=e=>Gt(e).fold(ue([e]),t=>[e].concat(yb(t))),Uf=e=>Ht(e).fold(ue([e]),t=>st(t)==="br"?Ut(t).map(n=>[e].concat(Uf(n))).getOr([]):[e].concat(Uf(t))),Hf=(e,t)=>nn((n=>{const o=n.startContainer,r=n.startOffset;return se(o)?r===0?_.some(S(o)):_.none():_.from(o.childNodes[r]).map(S)})(t),(n=>{const o=n.endContainer,r=n.endOffset;return se(o)?r===o.data.length?_.some(S(o)):_.none():_.from(o.childNodes[r-1]).map(S)})(t),(n,o)=>{const r=Qt(yb(e),ye(_e,n)),s=Qt(Uf(e),ye(_e,o));return r.isSome()&&s.isSome()}).getOr(!1),qf=(e,t,n,o)=>{const r=n,s=new fn(n,r),a=br(e.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Te(["td","th","table"],c.toLowerCase()));let i=n;do{if(se(i)&&v.trim(i.data).length!==0)return void(o?t.setStart(i,0):t.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?t.setStartBefore(i):i.nodeName==="BR"?t.setEndBefore(i):t.setEndAfter(i))}while(i=o?s.next():s.prev());r.nodeName==="BODY"&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},td=e=>{const t=e.selection.getSel();return ie(t)&&t.rangeCount>0},$f=(e,t)=>{const n=ai(e);n.length>0?Q(n,o=>{const r=o.dom,s=e.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),t(s,!0)}):t(e.selection.getRng(),!1)},Cb=(e,t,n)=>{const o=p0(e,t);n(o),e.moveToBookmark(o)},Sl=e=>x(e?.nodeType),Wf=e=>xe(e)&&!Oo(e)&&!Ro(e)&&!Gs(e),wb=(e,t,n)=>{const{selection:o,dom:r}=e,s=o.getNode(),a=Dt(s);Cb(o,!0,()=>{t()}),a&&Dt(s)&&r.isChildOf(s,e.getBody())?e.selection.select(s):n(o.getStart())&&IN(r,o)},IN=(e,t)=>{var n,o;const r=t.getRng(),{startContainer:s,startOffset:a}=r;if(!((i,l)=>{if(Wf(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),d=parseInt(c,10);return!isNaN(d)&&d>0}return!1})(e,t.getNode())&&xe(s)){const i=s.childNodes,l=e.getRoot();let c;if(a<i.length){const d=i[a];c=new fn(d,(n=e.getParent(d,e.isBlock))!==null&&n!==void 0?n:l)}else{const d=i[i.length-1];c=new fn(d,(o=e.getParent(d,e.isBlock))!==null&&o!==void 0?o:l),c.next(!0)}for(let d=c.current();d;d=c.next()){if(e.getContentEditable(d)==="false")return;if(se(d)&&!Kf(d))return r.setStart(d,0),void t.setRng(r)}}},xb=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(xe(e)||!Kf(e))return e}},Vf=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Js(e,t),ii=(e,t,n)=>e.schema.isValidChild(t,n),Kf=(e,t=!1)=>{if(ie(e)&&se(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return Wa(n)}return!1},Sb=(e,t)=>{const n=e.dom;return Wf(t)&&n.getContentEditable(t)==="false"&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=B_(o),i=Ms(a)?s:`${s},${a}`;return $e(S(r),i)})(e,t)&&n.select('[contenteditable="true"]',t).length===0},bs=(e,t)=>gt(e)?e(t):(ie(t)&&(e=e.replace(/%(\w+)/g,(n,o)=>t[o]||n)),e),Xf=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Yf=(e,t)=>{if(xt(e))return null;{let n=String(e);return t!=="color"&&t!=="backgroundColor"||(n=tl(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},nd=(e,t,n)=>{const o=e.getStyle(t,n);return Yf(o,n)},Eb=(e,t)=>{let n;return e.getParent(t,o=>!!xe(o)&&(n=e.getStyle(o,"text-decoration"),!!n&&n!=="none")),n},od=(e,t,n)=>e.getParents(t,n,e.getRoot()),Gf=(e,t,n)=>{const o=e.formatter.get(t);return ie(o)&&Et(o,n)},_r=e=>an(e,"block"),Bo=e=>an(e,"selector"),on=e=>an(e,"inline"),Qf=e=>Bo(e)&&e.expand!==!1&&!on(e),kb=e=>(t=>{const n=[];let o=t;for(;o;){if(se(o)&&o.data!==mn||o.childNodes.length>1)return[];xe(o)&&n.push(o),o=o.firstChild}return n})(e).length>0,Jf=e=>Ro(e.dom)&&kb(e.dom),li=Oo,_b=od,Nb=Kf,FN=Vf,Ab=(e,t)=>{let n=t;for(;n;){if(xe(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},Tb=(e,t,n,o)=>{const r=t.data;if(e){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},jN=(e,t,n)=>Tb(e,t,n,o=>ed(o)||da(o)),zN=(e,t,n)=>Tb(e,t,n,jf),Rb=(e,t,n,o,r,s)=>{let a;const i=e.getParent(n,d=>Uu(d)||e.isBlock(d)),l=ie(i)?i:t,c=(d,f,m)=>{const b=oa(e),g=r?b.backwards:b.forwards;return _.from(g(d,f,(y,h)=>li(y.parentNode)?-1:(a=y,m(r,y,h)),l))};return c(n,o,jN).bind(d=>s?c(d.container,d.offset+(r?-1:0),zN):_.some(d)).orThunk(()=>a?_.some({container:a,offset:r?0:a.length}):_.none())},Ob=(e,t,n,o,r)=>{const s=o[r];se(o)&&Ms(o.data)&&s&&(o=s);const a=_b(e,o);for(let i=0;i<a.length;i++)for(let l=0;l<t.length;l++){const c=t[l];if((!ie(c.collapsed)||c.collapsed===n.collapsed)&&Bo(c)&&e.is(a[i],c.selector))return a[i]}return o},Bb=(e,t,n,o)=>{var r;let s=n;const a=e.getRoot(),i=t[0];if(_r(i)&&(s=i.wrapper?null:e.getParent(n,i.block,a)),!s){const l=(r=e.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&r!==void 0?r:a;s=e.getParent(se(n)?n.parentNode:n,c=>c!==a&&FN(e.schema,c),l)}if(s&&_r(i)&&i.wrapper&&(s=_b(e,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!e.isBlock(s[o])&&(s=s[o],!Xf(s,"br")););return s||n},Db=(e,t,n,o)=>{const r=n.parentNode;return!ie(n[o])&&(!(r!==t&&!xt(r)&&!e.isBlock(r))||Db(e,t,r,o))},rd=(e,t,n,o,r,s)=>{let a=n;const i=r?"previousSibling":"nextSibling",l=e.getRoot();if(se(n)&&!Nb(n)&&(r?o>0:o<n.data.length))return n;for(;a;){if(Uu(a))return n;if(!t[0].block_expand&&e.isBlock(a))return s?a:n;for(let d=a[i];d;d=d[i]){const f=se(d)&&!Db(e,l,d,i);if(!li(d)&&(!qt(c=d)||!c.getAttribute("data-mce-bogus")||c.nextSibling)&&!Nb(d,f))return a}if(a===l||a.parentNode===l){n=a;break}a=a.parentNode}var c;return n},Pb=e=>li(e.parentNode)||li(e),ua=(e,t,n,o={})=>{const{includeTrailingSpace:r=!1,expandToBlock:s=!0}=o,a=e.getParent(t.commonAncestorContainer,b=>Uu(b)),i=ie(a)?a:e.getRoot();let{startContainer:l,startOffset:c,endContainer:d,endOffset:f}=t;const m=n[0];return xe(l)&&l.hasChildNodes()&&(l=ps(l,c),se(l)&&(c=0)),xe(d)&&d.hasChildNodes()&&(d=ps(d,t.collapsed?f:f-1),se(d)&&(f=d.data.length)),l=Ab(e,l),d=Ab(e,d),Pb(l)&&(l=li(l)?l:l.parentNode,l=t.collapsed?l.previousSibling||l:l.nextSibling||l,se(l)&&(c=t.collapsed?l.length:0)),Pb(d)&&(d=li(d)?d:d.parentNode,d=t.collapsed?d.nextSibling||d:d.previousSibling||d,se(d)&&(f=t.collapsed?0:d.length)),t.collapsed&&(Rb(e,i,l,c,!0,r).each(({container:b,offset:g})=>{l=b,c=g}),Rb(e,i,d,f,!1,r).each(({container:b,offset:g})=>{d=b,f=g})),(on(m)||m.block_expand)&&(on(m)&&se(l)&&c!==0||(l=rd(e,n,l,c,!0,s)),on(m)&&se(d)&&f!==d.data.length||(d=rd(e,n,d,f,!1,s))),Qf(m)&&(l=Ob(e,n,t,l,"previousSibling"),d=Ob(e,n,t,d,"nextSibling")),(_r(m)||Bo(m))&&(l=Bb(e,n,l,"previousSibling"),d=Bb(e,n,d,"nextSibling"),_r(m)&&(e.isBlock(l)||(l=rd(e,n,l,c,!0,s),se(l)&&(c=0)),e.isBlock(d)||(d=rd(e,n,d,f,!1,s),se(d)&&(f=d.data.length)))),xe(l)&&l.parentNode&&(c=e.nodeIndex(l),l=l.parentNode),xe(d)&&d.parentNode&&(f=e.nodeIndex(d)+1,d=d.parentNode),{startContainer:l,startOffset:c,endContainer:d,endOffset:f}},El=(e,t,n)=>{var o;const r=t.startOffset,s=ps(t.startContainer,r),a=t.endOffset,i=ps(t.endContainer,a-1),l=h=>{const w=h[0];se(w)&&w===s&&r>=w.data.length&&h.splice(0,1);const E=h[h.length-1];return a===0&&h.length>0&&E===i&&se(E)&&h.splice(h.length-1,1),h},c=(h,w,E)=>{const k=[];for(;h&&h!==E;h=h[w])k.push(h);return k},d=(h,w)=>e.getParent(h,E=>E.parentNode===w,w),f=(h,w,E)=>{const k=E?"nextSibling":"previousSibling";for(let T=h,A=T.parentNode;T&&T!==w;T=A){A=T.parentNode;const B=c(T===h?T:T[k],k);B.length&&(E||B.reverse(),n(l(B)))}};if(s===i)return n(l([s]));const m=(o=e.findCommonAncestor(s,i))!==null&&o!==void 0?o:e.getRoot();if(e.isChildOf(s,i))return f(s,m,!0);if(e.isChildOf(i,s))return f(i,m);const b=d(s,m)||s,g=d(i,m)||i;f(s,b,!0);const y=c(b===s?b:b.nextSibling,"nextSibling",g===i?g.nextSibling:g);y.length&&n(l(y)),f(i,g)},UN=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],Lb=(e,t,n,o,r,s)=>{const{uid:a=t,...i}=n;qa(e,sl()),Ee(e,`${Xa()}`,a),Ee(e,`${na()}`,o);const{attributes:l={},classes:c=[]}=r(a,i);if(Me(e,l),((d,f)=>{Q(f,m=>{qa(d,m)})})(e,c),s){c.length>0&&Ee(e,`${il()}`,c.join(","));const d=sn(l);d.length>0&&Ee(e,`${ll()}`,d.join(","))}},Mb=(e,t,n,o,r)=>{const s=O("span",e);return Lb(s,t,n,o,r,!1),s},HN=(e,t,n,o,r,s)=>{const a=[],i=Mb(e.getDoc(),n,s,o,r),l=wo(),c=()=>{l.clear()},d=m=>{Q(m,f)},f=m=>{switch(((b,g,y,h)=>On(g).fold(()=>"skipping",w=>h==="br"||(E=>vt(E)&&Yi(E)===mn)(g)?"valid":(E=>dt(E)&&Pu(E,sl()))(g)?"existing":Ro(g.dom)?"caret":Et(UN,E=>$e(g,E))?"valid-block":ii(b,y,h)&&ii(b,st(w),y)?"valid":"invalid-child"))(e,m,"span",st(m))){case"invalid-child":{c();const b=He(m);d(b),c();break}case"valid-block":c(),Lb(m,n,s,o,r,!0);break;case"valid":{const b=l.get().getOrThunk(()=>{const g=Xt(i);return a.push(g),l.set(g),g});Z(m,b);break}}};return El(e.dom,t,m=>{c(),(b=>{const g=ot(b,S);d(g)})(m)}),a},Ib=e=>{const t=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Bt(s,a).map(i=>i.settings),getNames:()=>sn(s)}})();((s,a)=>{const i=na(),l=d=>_.from(d.attr(i)).bind(a.lookup),c=d=>{var f,m;d.attr(Xa(),null),d.attr(na(),null),d.attr(al(),null);const b=_.from(d.attr(ll())).map(w=>w.split(",")).getOr([]),g=_.from(d.attr(il())).map(w=>w.split(",")).getOr([]);Q(b,w=>d.attr(w,null));const y=(m=(f=d.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&m!==void 0?m:[],h=et(y,[sl()].concat(g));d.attr("class",h.length>0?h.join(" "):null),d.attr(il(),null),d.attr(ll(),null)};s.serializer.addTempAttr(al()),s.serializer.addAttributeFilter(i,d=>{for(const f of d)l(f).each(m=>{m.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})})(e,t);const n=((s,a)=>{const i=en({}),l=()=>({listeners:[],previous:wo()}),c=(b,g)=>{d(b,y=>(g(y),y))},d=(b,g)=>{const y=i.get(),h=g(Bt(y,b).getOrThunk(l));y[b]=h,i.set(y)},f=(b,g)=>{Q(Ih(s,b),y=>{g?Ee(y,al(),"true"):Ge(y,al())})},m=js(()=>{const b=Ir(a.getNames());Q(b,g=>{d(g,y=>{const h=y.previous.get();return Lh(s,_.some(g)).fold(()=>{h.each(w=>{(E=>{c(E,k=>{Q(k.listeners,T=>T(!1,E))})})(g),y.previous.clear(),f(w,!1)})},({uid:w,name:E,elements:k})=>{os(h,w)||(h.each(T=>f(T,!1)),((T,A,B)=>{c(T,M=>{Q(M.listeners,P=>P(!0,T,{uid:A,nodes:ot(B,z=>z.dom)}))})})(E,w,k),y.previous.set(w),f(w,!0))}),{previous:y.previous,listeners:y.listeners}})})},30);return s.on("remove",()=>{m.cancel()}),s.on("NodeChange",()=>{m.throttle()}),{addListener:(b,g)=>{d(b,y=>({previous:y.previous,listeners:y.listeners.concat([g])}))}}})(e,t),o=Jn("span"),r=s=>{Q(s,a=>{o(a)?Vt(a):(i=>{Ji(i,sl()),Ge(i,`${Xa()}`),Ge(i,`${na()}`),Ge(i,`${al()}`);const l=De(i,`${ll()}`).map(f=>f.split(",")).getOr([]),c=De(i,`${il()}`).map(f=>f.split(",")).getOr([]);var d;Q(l,f=>Ge(i,f)),d=i,Q(c,f=>{Ji(d,f)}),Ge(i,`${il()}`),Ge(i,`${ll()}`)})(a)})};return{register:(s,a)=>{t.register(s,a)},annotate:(s,a)=>{t.lookup(s).each(i=>{((l,c,d,f)=>{l.undoManager.transact(()=>{const m=l.selection,b=m.getRng(),g=ai(l).length>0,y=Ps("mce-annotation");if(b.collapsed&&!g&&((h,w)=>{const E=ua(h.dom,w,[{inline:"span"}]);w.setStart(E.startContainer,E.startOffset),w.setEnd(E.endContainer,E.endOffset),h.selection.setRng(w)})(l,b),m.getRng().collapsed&&!g){const h=Mb(l.getDoc(),y,f,c,d.decorate);Ft(h,zt),m.getRng().insertNode(h.dom),m.select(h.dom)}else Cb(m,!1,()=>{$f(l,h=>{HN(l,h,y,c,d.decorate,f)})})})})(e,s,i,a)})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{Lh(e,_.some(s)).each(({elements:a})=>{const i=e.selection.getBookmark();r(a),e.selection.moveToBookmark(i)})},removeAll:s=>{const a=e.selection.getBookmark();yt(Fh(e,s),(i,l)=>{r(i)}),e.selection.moveToBookmark(a)},getAll:s=>{const a=Fh(e,s);return Bs(a,i=>ot(i,l=>l.dom))}}},kl=e=>({getBookmark:ye(LN,e),moveToBookmark:ye(MN,e)});kl.isBookmarkNode=Oo;const Fb=(e,t,n)=>!n.collapsed&&Et(n.getClientRects(),o=>((r,s,a)=>s>=r.left&&s<=r.right&&a>=r.top&&a<=r.bottom)(o,e,t)),jb=(e,t)=>{const n=vt(t)?Yi(t).length:He(t).length+1;return e>n?n:e<0?0:e},qN=e=>$a.range(e.start,jb(e.soffset,e.start),e.finish,jb(e.foffset,e.finish)),zb=(e,t)=>!Tc(t.dom)&&(Ot(e,t)||_e(e,t)),Ub=e=>t=>zb(e,t.start)&&zb(e,t.finish),$N=e=>$a.range(S(e.startContainer),e.startOffset,S(e.endContainer),e.endOffset),WN=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),_.some(t)}catch{return _.none()}},sd=e=>{const t=(o=>o.inline||ut.browser.isFirefox())(e)?(n=S(e.getBody()),(o=>{const r=o.getSelection();return(r&&r.rangeCount!==0?_.from(r.getRangeAt(0)):_.none()).map($N)})(fo(n).dom).filter(Ub(n))):_.none();var n;e.bookmark=t.isSome()?t:e.bookmark},Zf=e=>(e.bookmark?e.bookmark:_.none()).bind(t=>{return n=S(e.getBody()),o=t,_.from(o).filter(Ub(n)).map(qN);var n,o}).bind(WN),Hb={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},Do={setEditorTimeout:(e,t,n)=>((o,r)=>(x(r)||(r=0),window.setTimeout(o,r)))(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const o=((r,s)=>(x(s)||(s=0),window.setInterval(r,s)))(()=>{e.removed?window.clearInterval(o):t()},n);return o}},qb=(e,t)=>e.view(t).fold(ue([]),n=>{const o=e.owner(n),r=qb(e,o);return[n].concat(r)});var VN=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?_.none():_.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(S)},owner:e=>Rn(e)});const $b=e=>{const t=ja(),n=Tu(t),o=((a,i)=>{const l=i.owner(a);return qb(i,l)})(e,VN),r=Au(e),s=Mr(o,(a,i)=>{const l=Au(i);return{left:a.left+l.left,top:a.top+l.top}},{left:0,top:0});return Ua(s.left+r.left+n.left,s.top+r.top+n.top)};let ci;const em=Rt.DOM,tm=e=>{const t=e.classList;return t!==void 0&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},ad=(e,t)=>{const n=D_(e);return em.getParent(t,r=>(s=>xe(s)&&Hb.isEditorUIElement(s))(r)||!!n&&e.dom.is(r,n))!==null},nm=e=>{try{const t=_o(S(e.getElement()));return Vs(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},KN=(e,t)=>{const n=t.editor;(r=>{const s=Fs(()=>{sd(r)},0);r.on("init",()=>{r.inline&&((a,i)=>{const l=()=>{i.throttle()};Rt.DOM.bind(document,"mouseup",l),a.on("remove",()=>{Rt.DOM.unbind(document,"mouseup",l)})})(r,s),((a,i)=>{((l,c)=>{l.on("mouseup touchend",d=>{c.throttle()})})(a,i),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>c.type==="nodechange"&&c.selectionChange)(l)||sd(a)})})(r,s)}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{mN(r)&&r.inline!==!0&&s(S(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=e.focusedEditor;if(tm(nm(n))&&o(n,qa),r!==n){r&&r.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0);const s=co().browser;n.inline!==!0&&(s.isSafari()||s.isChromium())&&(a=>{if(!a.iframeElement)return;const i=S(a.iframeElement),l=$b(i),c=Fu(window);(l.top<c.y||l.top>c.bottom-25)&&i.dom.scrollIntoView({block:"center"})})(n)}}),n.on("focusout",()=>{Do.setEditorTimeout(n,()=>{const r=e.focusedEditor;tm(nm(n))&&r===n||o(n,Ji),ad(n,nm(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),ci||(ci=r=>{const s=e.activeEditor;s&&tr(r).each(a=>{const i=a;i.ownerDocument===document&&(i===document.body||ad(s,i)||e.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},em.bind(document,"focusin",ci))},XN=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&ci&&(em.unbind(document,"focusin",ci),ci=null)},Wb=(e,t)=>{((n,o)=>(r=>r.collapsed?_.from(ps(r.startContainer,r.startOffset)).map(S):_.none())(o).bind(r=>Fk(r)?_.some(r):Ot(n,r)?_.none():_.some(n)))(S(e.getBody()),t).bind(n=>In(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},id=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},di=e=>e.inline?(t=>{const n=t.getBody();return n&&(o=S(n),za(o)||(r=o,Vs(_o(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(e):(t=>ie(t.iframeElement)&&za(S(t.iframeElement)))(e),om=e=>di(e)||(t=>{const n=_o(S(t.getElement()));return Vs(n).filter(o=>!tm(o.dom)&&ad(t,o.dom)).isSome()})(e),rm=e=>e.editorManager.setActive(e),ve={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ve.metaKeyPressed(e),metaKeyPressed:e=>ut.os.isMacOS()||ut.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},fa="data-mce-selected",Vb=Math.abs,ld=Math.round,sm={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Kb=(e,t)=>{const n=t.dom,o=t.getDoc(),r=document,s=t.getBody();let a,i,l,c,d,f,m,b,g,y,h,w,E,k,T;const A=me=>ie(me)&&(eh(me)||n.is(me,"figure.image")),B=me=>xr(me)||n.hasClass(me,"mce-preview-object"),M=me=>{const we=me.target;((j,U)=>{if((Y=>Y.type==="longpress"||Y.type.indexOf("touch")===0)(j)){const Y=j.touches[0];return A(j.target)&&!Fb(Y.clientX,Y.clientY,U)}return A(j.target)&&!Fb(j.clientX,j.clientY,U)})(me,t.selection.getRng())&&!me.isDefaultPrevented()&&t.selection.select(we)},P=me=>n.hasClass(me,"mce-preview-object")&&ie(me.firstElementChild)?[me,me.firstElementChild]:n.is(me,"figure.image")?[me.querySelector("img")]:[me],z=me=>{const we=P0(t);return!(!we||t.mode.isReadOnly())&&me.getAttribute("data-mce-resize")!=="false"&&me!==t.getBody()&&(n.hasClass(me,"mce-preview-object")&&ie(me.firstElementChild)?$e(S(me.firstElementChild),we):$e(S(me),we))},W=(me,we,j)=>{if(ie(j)){const U=P(me);Q(U,Y=>{Y.style[we]||!t.schema.isValid(Y.nodeName.toLowerCase(),we)?n.setStyle(Y,we,j):n.setAttrib(Y,we,""+j)})}},D=(me,we,j)=>{W(me,"width",we),W(me,"height",j)},L=me=>{let we,j,U,Y,V;we=me.screenX-f,j=me.screenY-m,w=we*c[2]+b,E=j*c[3]+g,w=w<5?5:w,E=E<5?5:E,U=(A(a)||B(a))&&E_(t)!==!1?!ve.modifierPressed(me):ve.modifierPressed(me),U&&(Vb(we)>Vb(j)?(E=ld(w*y),w=ld(E/y)):(w=ld(E/y),E=ld(w*y))),D(i,w,E),Y=c.startPos.x+we,V=c.startPos.y+j,Y=Y>0?Y:0,V=V>0?V:0,n.setStyles(l,{left:Y,top:V,display:"block"}),l.innerHTML=w+" &times; "+E,we=s.scrollWidth-k,j=s.scrollHeight-T,we+j!==0&&n.setStyles(l,{left:Y-we,top:V-j}),h||(((fe,le,Oe,je,Ze)=>{fe.dispatch("ObjectResizeStart",{target:le,width:Oe,height:je,origin:Ze})})(t,a,b,g,"corner-"+c.name),h=!0)},F=()=>{const me=h;h=!1,me&&(W(a,"width",w),W(a,"height",E)),n.unbind(o,"mousemove",L),n.unbind(o,"mouseup",F),r!==o&&(n.unbind(r,"mousemove",L),n.unbind(r,"mouseup",F)),n.remove(i),n.remove(l),n.remove(d),X(a),me&&(((we,j,U,Y,V)=>{we.dispatch("ObjectResized",{target:j,width:U,height:Y,origin:V})})(t,a,w,E,"corner-"+c.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},X=me=>{Re();const we=n.getPos(me,s),j=we.x,U=we.y,Y=me.getBoundingClientRect(),V=Y.width||Y.right-Y.left,fe=Y.height||Y.bottom-Y.top;a!==me&&(te(),a=me,w=E=0);const le=t.dispatch("ObjectSelected",{target:me});z(me)&&!le.isDefaultPrevented()?yt(sm,(Oe,je)=>{let Ze=n.get("mceResizeHandle"+je);Ze&&n.remove(Ze),Ze=n.add(s,"div",{id:"mceResizeHandle"+je,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+je+"-resize; margin:0; padding:0"}),n.bind(Ze,"mousedown",Pt=>{Pt.stopImmediatePropagation(),Pt.preventDefault(),(Lt=>{const bo=P(a)[0];f=Lt.screenX,m=Lt.screenY,b=bo.clientWidth,g=bo.clientHeight,y=g/b,c=Oe,c.name=je,c.startPos={x:V*Oe[0]+j,y:fe*Oe[1]+U},k=s.scrollWidth,T=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=((he,tt)=>{if(B(tt))return he.create("img",{src:ut.transparentSrc});if(wr(tt)){const it=$t(c.name,"n")?yn:Qo,Xe=tt.cloneNode(!0);return it(he.select("tr",Xe)).each(pt=>{const At=he.select("td,th",pt);he.setStyle(pt,"height",null),Q(At,pe=>he.setStyle(pe,"height",null))}),Xe}return tt.cloneNode(!0)})(n,a),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:j,top:U,margin:0}),D(i,V,fe),i.removeAttribute(fa),s.appendChild(i),n.bind(o,"mousemove",L),n.bind(o,"mouseup",F),r!==o&&(n.bind(r,"mousemove",L),n.bind(r,"mouseup",F)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},b+" &times; "+g)})(Pt)}),Oe.elm=Ze,n.setStyles(Ze,{left:V*Oe[0]+j-Ze.offsetWidth/2,top:fe*Oe[1]+U-Ze.offsetHeight/2})}):te(!1)},oe=Fs(X,0),te=(me=!0)=>{oe.cancel(),Re(),a&&me&&a.removeAttribute(fa),yt(sm,(we,j)=>{const U=n.get("mceResizeHandle"+j);U&&(n.unbind(U),n.remove(U))})},Ce=(me,we)=>n.isChildOf(me,we),Ne=me=>{if(h||t.removed||t.composing)return;const we=me.type==="mousedown"?me.target:e.getNode(),j=Ha(S(we),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(Y=>Y.dom).filter(Y=>n.isEditable(Y.parentElement)||Y.nodeName==="IMG"&&n.isEditable(Y)).getOrUndefined(),U=ie(j)?n.getAttrib(j,fa,"1"):"1";if(Q(n.select(`img[${fa}],hr[${fa}]`),Y=>{Y.removeAttribute(fa)}),ie(j)&&Ce(j,s)&&om(t)){Pe();const Y=e.getStart(!0);if(Ce(Y,j)&&Ce(e.getEnd(!0),j))return n.setAttrib(j,fa,U),void oe.throttle(j)}te()},Re=()=>{yt(sm,me=>{me.elm&&(n.unbind(me.elm),delete me.elm)})},Pe=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Pe(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Ne),t.on("keyup compositionend",me=>{a&&a.nodeName==="TABLE"&&Ne(me)}),t.on("hide blur",te),t.on("contextmenu longpress",M,!0)}),t.on("remove",Re),{isResizable:z,showResizeRect:X,hideResizeRect:te,updateResizeRect:Ne,destroy:()=>{oe.cancel(),a=i=d=null}}},Xb=(e,t,n)=>{const o=fo(S(n));return ck(o.dom,e,t).map(r=>{const s=n.createRange();return s.setStart(r.start.dom,r.soffset),s.setEnd(r.finish.dom,r.foffset),s}).getOrUndefined()},am=(e,t)=>ie(e)&&ie(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Yb=(e,t,n)=>((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(e,t,n)!==null,YN=(e,t,n)=>Yb(e,t,o=>o.nodeName===n),GN=(e,t)=>Ao(e)&&!Yb(e,t,Ro),Gb=(e,t,n)=>{const o=t.parentNode;if(o){const r=new fn(t,e.getParent(o,e.isBlock)||e.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(qt(s))return!0}return!1},im=(e,t,n,o,r)=>{const s=e.getRoot(),a=e.schema.getNonEmptyElements(),i=r.parentNode;let l,c;if(!i)return _.none();const d=e.getParent(i,e.isBlock)||s;if(o&&qt(r)&&t&&e.isEmpty(d))return _.some(G(i,e.nodeIndex(r)));const f=new fn(r,d);for(;c=f[o?"prev":"next"]();){if(e.getContentEditableParent(c)==="false"||GN(c,s))return _.none();if(se(c)&&c.data.length>0)return YN(c,s,"A")?_.none():_.some(G(c,o?c.data.length:0));if(e.isBlock(c)||a[c.nodeName.toLowerCase()])return _.none();l=c}return ds(l)?_.none():n&&l?_.some(G(l,0)):_.none()},Qb=(e,t,n,o)=>{const r=e.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=xe(i)&&l===i.childNodes.length,d=e.schema.getNonEmptyElements();let f=n;if(Ao(i))return _.none();if(xe(i)&&l>i.childNodes.length-1&&(f=!1),Zi(i)&&(i=r,l=0),i===r){if(f&&(s=i.childNodes[l>0?l-1:0],s)&&(Ao(s)||d[s.nodeName]||wr(s)))return _.none();if(i.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=se(i)&&c?i.data.length:0,!t&&i===r.lastChild&&wr(i)||((m,b)=>{let g=b;for(;g&&g!==m;){if(Dt(g))return!0;g=g.parentNode}return!1})(r,i)||Ao(i)||Hu(i))return _.none();if(i.hasChildNodes()&&!wr(i)){s=i;const m=new fn(i,r);do{if(Dt(s)||Ao(s)){a=!1;break}if(se(s)&&s.data.length>0){l=f?0:s.data.length,i=s,a=!0;break}if(d[s.nodeName.toLowerCase()]&&!pk(s)){l=e.nodeIndex(s),i=s.parentNode,f||l++,a=!0;break}}while(s=f?m.next():m.prev())}}}return t&&(se(i)&&l===0&&im(e,c,t,!0,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),xe(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!qt(s)||(m=>{var b;return((b=m.previousSibling)===null||b===void 0?void 0:b.nodeName)==="A"})(s)||Gb(e,s,!1)||Gb(e,s,!0)||im(e,c,t,!0,s).each(m=>{i=m.container(),l=m.offset(),a=!0}))),f&&!t&&se(i)&&l===i.data.length&&im(e,c,t,!1,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),a&&i?_.some(G(i,l)):_.none()},cd=(e,t)=>{const n=t.collapsed,o=t.cloneRange(),r=G.fromRangeStart(t);return Qb(e,n,!0,o).each(s=>{n&&G.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||Qb(e,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),am(t,o)?_.none():_.some(o)},dd=(e,t)=>e.splitText(t),ud=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset;if(t===o&&se(t)){if(n>0&&n<t.data.length)if(o=dd(t,n),t=o.previousSibling,r>n){r-=n;const s=dd(o,r).previousSibling;t=o=s,r=s.data.length,n=0}else r=0}else if(se(t)&&n>0&&n<t.data.length&&(t=dd(t,n),n=0),se(o)&&r>0&&r<o.data.length){const s=dd(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:r}},ma=e=>({walk:(t,n)=>El(e,t,n),split:ud,expand:(t,n={type:"word"})=>{if(n.type==="word"){const o=ua(e,t,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),r=e.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return t},normalize:t=>cd(e,t).fold(St,n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0))});ma.compareRanges=am,ma.getCaretRangeFromPoint=Xb,ma.getSelectedNode=Uc,ma.getNode=ps;const lm=e=>st(e)==="textarea",Jb=(e,t)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return Ua(a.offsetLeft,a.offsetTop);const c=Ec(i?.pageYOffset,l.scrollTop),d=Ec(i?.pageXOffset,l.scrollLeft),f=Ec(l.clientTop,a.clientTop),m=Ec(l.clientLeft,a.clientLeft);return Au(r).translate(d-m,c-f)})(e),o=(r=>nk.get(r))(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},Zb=(e,t,n,o)=>{JN(e,(r,s)=>QN(e,t,n,o),n)},ev=(e,t,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};((a,i)=>a.dispatch("ScrollIntoView",i).isDefaultPrevented())(e,s)||(n(e,t,Tu(t).top,o,r),((a,i)=>{a.dispatch("AfterScrollIntoView",i)})(e,s))},QN=(e,t,n,o)=>{const r=S(e.getBody()),s=S(e.getDoc());r.dom.offsetWidth;const a=((i,l)=>{const c=((f,m)=>{const b=He(f);if(b.length===0||lm(f))return{element:f,offset:m};if(m<b.length&&!lm(b[m]))return{element:b[m],offset:0};{const g=b[b.length-1];return lm(g)?{element:f,offset:m}:st(g)==="img"?{element:g,offset:1}:vt(g)?{element:g,offset:Yi(g).length}:{element:g,offset:He(g).length}}})(i,l),d=R('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return wn(c.element,d),Jb(d,()=>Be(d))})(S(n.startContainer),n.startOffset);ev(e,s,t,a,o),a.cleanup()},tv=(e,t,n,o)=>{const r=S(e.getDoc());ev(e,r,n,(s=>Jb(S(s),Se))(t),o)},JN=(e,t,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;t(S(o),S(s));const i=e.dom.createRng();i.setStart(o,r),i.setEnd(s,a),e.selection.setRng(n)},cm=(e,t,n,o,r)=>{const s=t.pos;if(o)Ig(s.left,Math.max(0,s.top-30),r);else{const a=s.top-n+t.height+30;Ig(-e.getBody().getBoundingClientRect().left,a,r)}},nv=(e,t,n,o,r,s)=>{const a=o+n,i=r.pos.top,l=r.bottom,c=l-i>=o;i<n?cm(e,r,o,s!==!1,t):i>a?cm(e,r,o,c?s!==!1:s===!0,t):l>a&&!c&&cm(e,r,o,s===!0,t)},ov=(e,t,n,o,r)=>{const s=fo(t).dom.innerHeight;nv(e,t,n,s,o,r)},rv=(e,t,n,o,r)=>{const s=fo(t).dom.innerHeight;nv(e,t,n,s,o,r);const a=$b(o.element),i=Fu(window);a.top<i.y?Fg(o.element,r!==!1):a.top>i.bottom&&Fg(o.element,r===!0)},ZN=(e,t,n)=>Zb(e,ov,t,n),eA=(e,t,n)=>tv(e,t,ov,n),tA=(e,t,n)=>Zb(e,rv,t,n),nA=(e,t,n)=>tv(e,t,rv,n),_l=(e,t,n)=>{(e.inline?ZN:tA)(e,t,n)},sv=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),av=(e,t,n,o,r)=>{const s=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return _.from(s).map(S).map(i=>o&&t.collapsed?i:Wt(i,r(i,a)).getOr(i)).bind(i=>dt(i)?_.some(i):Hn(i).filter(dt)).map(i=>i.dom).getOr(e)},iv=(e,t,n=!1)=>av(e,t,!0,n,(o,r)=>Math.min(mo(o),r)),lv=(e,t,n=!1)=>av(e,t,!1,n,(o,r)=>r>0?r-1:r),cv=(e,t)=>{const n=e;for(;e&&se(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},dm=(e,t)=>ot(t,n=>{const o=e.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),oA={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},fd=(e,t,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[o])return e[o];if(e!==t){let s=e[r];if(s)return s;for(let a=e.parent;a&&a!==t;a=a.parent)if(s=a[r],s)return s}},rA=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!Wa(n))return!1;const o=e.parent;return!o||o.name==="span"&&!o.attr("style")||!/^[ ]+$/.test(n)},dv=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Vn{static create(t,n){const o=new Vn(t,oA[t]||1);return n&&yt(n,(r,s)=>{o.attr(s,r)}),o}constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const o=this;if(!Ae(t))return ie(t)&&yt(t,(s,a)=>{o.attr(a,s)}),o;const r=o.attributes;if(r){if(n!==void 0){if(n===null){if(t in r.map){delete r.map[t];let s=r.length;for(;s--;)if(r[s].name===t)return r.splice(s,1),o}return o}if(t in r.map){let s=r.length;for(;s--;)if(r[s].name===t){r[s].value=n;break}}else r.push({name:t,value:n});return r.map[t]=n,o}return r.map[t]}}clone(){const t=this,n=new Vn(t.name,t.type),o=t.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];i.name!=="id"&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const o=n.next;t.insert(n,t,!0),n=o}t.remove()}remove(){const t=this,n=t.parent,o=t.next,r=t.prev;return n&&(n.firstChild===t?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===t?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const o=n.lastChild;return o?(o.next=t,t.prev=o,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,o){t.parent&&t.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===r.lastChild?r.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=r,t}getAll(t){const n=this,o=[];for(let r=n.firstChild;r;r=fd(r,n))r.name===t&&o.push(r);return o}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let r=t.firstChild;r;r=fd(r,t))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},o){var r;const s=this;let a=s.firstChild;if(dv(s))return!1;if(a)do{if(a.type===1){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||dv(a))return!1}if(a.type===8||a.type===3&&!rA(a)||a.type===3&&a.parent&&n[a.parent.name]&&Wa((r=a.value)!==null&&r!==void 0?r:"")||o&&o(a))return!1}while(a=fd(a,s));return!0}walk(t){return fd(this,null,t)}}const sA=v.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),uv=e=>Ae(e.nodeValue)&&e.nodeValue.includes(mn),fv=e=>(e.length===0?"":`${ot(e,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',mv=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>uv(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),pv=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(uv(t)){const n=t.parentNode;return n&&Ie(sA,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),aA=e=>mv(e).nextNode()!==null,iA=e=>pv(e).nextNode()!==null,lA=(e,t)=>t.querySelector(fv(e))!==null,cA=(e,t)=>{Q(((n,o)=>o.querySelectorAll(fv(n)))(e,t),n=>{const o=S(n);Fe(o,"data-mce-bogus")==="all"?Be(o):Q(e,r=>{Ct(o,r)&&Ge(o,r)})})},gv=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},dA=An(gv,mv),uA=An(gv,pv),hv=(e,t)=>{const n=[{condition:ye(lA,t),action:ye(cA,t)},{condition:aA,action:dA},{condition:iA,action:uA}];let o=e,r=!1;return Q(n,({condition:s,action:a})=>{s(o)&&(r||(o=e.cloneNode(!0),r=!0),a(o))}),o},bv=e=>{const t=Pn(e,"[data-mce-bogus]");Q(t,n=>{Fe(n,"data-mce-bogus")==="all"?Be(n):ra(n)?(wn(n,H(zn)),Be(n)):Vt(n)})},vv=e=>{const t=Pn(e,"input");Q(t,n=>{Ge(n,"name")})},fA=(e,t,n)=>{let o;return o=t.format==="raw"?v.trim(go(hv(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?((r,s)=>{const a=r.getDoc(),i=_o(S(r.getBody())),l=O("div",a);Ee(l,"data-mce-bogus","all"),Xs(l,{position:"fixed",left:"-9999999px",top:"0"}),Ft(l,s.innerHTML),bv(l),vv(l);const c=(f=>yr(f)?f:S(Rn(f).dom.body))(i);q(c,l);const d=go(l.dom.innerText);return Be(l),d})(e,n):t.format==="tree"?e.serializer.serialize(n,t):((r,s)=>{const a=Mn(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${a}>[\r
]*|<br \\/>[\r
]*)$`);return s.replace(i,"")})(e,e.serializer.serialize(n,t)),t.format!=="text"&&!Ic(S(n))&&Ae(o)?v.trim(o):o},yv=v.makeMap,Cv=e=>{const t=[],n=(e=e||{}).indent,o=yv(e.indent_before||""),r=yv(e.indent_after||""),s=ea.getEncodeFunc(e.entity_encoding||"raw",e.entities),a=e.element_format!=="xhtml";return{start:(i,l,c)=>{if(n&&o[i]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}if(t.push("<",i),l)for(let d=0,f=l.length;d<f;d++){const m=l[d];t.push(" ",m.name,'="',s(m.value,!0),'"')}if(t[t.length]=!c||a?">":" />",c&&n&&r[i]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}},end:i=>{let l;t.push("</",i,">"),n&&r[i]&&t.length>0&&(l=t[t.length-1],l.length>0&&l!==`
`&&t.push(`
`))},text:(i,l)=>{i.length>0&&(t[t.length]=l?i:s(i))},cdata:i=>{t.push("<![CDATA[",i,"]]>")},comment:i=>{t.push("<!--",i,"-->")},pi:(i,l)=>{l?t.push("<?",i," ",s(l),"?>"):t.push("<?",i,"?>"),n&&t.push(`
`)},doctype:i=>{t.push("<!DOCTYPE",i,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},vs=(e={},t=us())=>{const n=Cv(e);return e.validate=!("validate"in e)||e.validate,{serialize:o=>{const r=e.validate,s={3:i=>{var l;n.text((l=i.value)!==null&&l!==void 0?l:"",i.raw)},8:i=>{var l;n.comment((l=i.value)!==null&&l!==void 0?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype((l=i.value)!==null&&l!==void 0?l:"")},4:i=>{var l;n.cdata((l=i.value)!==null&&l!==void 0?l:"")},11:i=>{let l=i;if(l=l.firstChild)do a(l);while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const d=i.name,f=d in t.getVoidElements();let m=i.attributes;if(r&&m&&m.length>1){const b=[];b.map={};const g=t.getElementRule(i.name);if(g){for(let y=0,h=g.attributesOrder.length;y<h;y++){const w=g.attributesOrder[y];if(w in m.map){const E=m.map[w];b.map[w]=E,b.push({name:w,value:E})}}for(let y=0,h=m.length;y<h;y++){const w=m[y].name;if(!(w in b.map)){const E=m.map[w];b.map[w]=E,b.push({name:w,value:E})}}m=b}}if(n.start(d,m,f),Qs(d))Ae(i.value)&&n.text(i.value,!0),n.end(d);else if(!f){let b=i.firstChild;if(b){d!=="pre"&&d!=="textarea"||b.type!==3||((l=b.value)===null||l===void 0?void 0:l[0])!==`
`||n.text(`
`,!0);do a(b);while(b=b.next)}n.end(d)}}};return o.type!==1||e.inner?o.type===3?s[3](o):s[11](o):a(o),n.getContent()}}},wv=new Set;Q(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{wv.add(e)});const xv=new Set;Q(["background-color"],e=>{xv.add(e)});const Sv=["font","text-decoration","text-emphasis"],ui=(e,t)=>sn(((n,o)=>n.parseStyle(n.getAttrib(o,"style")))(e,t)),Ev=(e,t)=>Et(ui(e,t),n=>(o=>wv.has(o))(n)),kv=(e,t,n)=>_.from(n.container()).filter(se).exists(o=>{const r=e?0:-1;return t(o.data.charAt(n.offset()+r))}),um=ye(kv,!0,da),fm=ye(kv,!1,da),mA=e=>{const t=e.container();return se(t)&&(t.data.length===0||Fc(t.data)&&kl.isBookmarkNode(t.parentNode))},ys=(e,t)=>n=>Bf(e?0:-1,n).filter(t).isSome(),_v=e=>eh(e)&&$o(S(e),"display")==="block",Nv=e=>Dt(e)&&!(t=>xe(t)&&t.getAttribute("data-mce-bogus")==="all")(e),pA=ys(!0,_v),gA=ys(!1,_v),Nl=ys(!0,xr),Al=ys(!1,xr),Av=ys(!0,wr),mm=ys(!1,wr),Cs=ys(!0,Nv),ws=ys(!1,Nv),Tv=(e,t)=>((n,o,r)=>Ot(o,n)?dn(n,s=>r(s)||_e(s,o)).slice(0,-1):[])(e,t,St),Kr=(e,t)=>[e].concat(Tv(e,t)),pm=(e,t,n)=>db(e,t,n,mA),Rv=(e,t,n)=>Qt(Kr(S(t.container()),e),(o=>r=>o.isBlock(st(r)))(n)),Ov=(e,t,n,o)=>pm(e,t.dom,n).forall(r=>Rv(t,n,o).fold(()=>!Sr(r,n,t.dom),s=>!Sr(r,n,t.dom)&&Ot(s,S(r.container())))),Bv=(e,t,n,o)=>Rv(t,n,o).fold(()=>pm(e,t.dom,n).forall(r=>!Sr(r,n,t.dom)),r=>pm(e,r.dom,n).isNone()),gm=ye(Bv,!1),Dv=ye(Bv,!0),hA=ye(Ov,!1),bA=ye(Ov,!0),vA=e=>Gc(e).exists(ra),md=(e,t,n,o)=>{const r=Ve(Kr(S(n.container()),t),a=>o.isBlock(st(a))),s=yn(r).getOr(t);return To(e,s.dom,n).filter(vA)},hm=(e,t,n)=>Gc(t).exists(ra)||md(!0,e,t,n).isSome(),pd=(e,t,n)=>(o=>_.from(o.getNode(!0)).map(S))(t).exists(ra)||md(!1,e,t,n).isSome(),Pv=ye(md,!1),yA=ye(md,!0),Lv=e=>G.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Mv=(e,t,n)=>{const o=Ve(Kr(S(t.container()),e),r=>n.isBlock(st(r)));return yn(o).getOr(e)},Iv=(e,t,n)=>Lv(t)?fm(t):fm(t)||no(Mv(e,t,n).dom,t).exists(fm),Fv=(e,t,n)=>Lv(t)?um(t):um(t)||Zn(Mv(e,t,n).dom,t).exists(um),bm=e=>Gc(e).bind(t=>ls(t,dt)).exists(t=>(n=>Te(["pre","pre-wrap"],n))($o(t,"white-space"))),jv=(e,t)=>n=>{return o=new fn(n,e)[t](),ie(o)&&Dt(o)&&Q0(o);var o},zv=(e,t,n)=>!bm(t)&&(((o,r,s)=>((a,i)=>no(a.dom,i).isNone())(o,r)||((a,i)=>Zn(a.dom,i).isNone())(o,r)||gm(o,r,s)||Dv(o,r,s)||pd(o,r,s)||hm(o,r,s))(e,t,n)||Iv(e,t,n)||Fv(e,t,n)),Tl=(e,t,n)=>!bm(t)&&(gm(e,t,n)||hA(e,t,n)||pd(e,t,n)||Iv(e,t,n)||((o,r)=>{const s=no(o.dom,r).getOr(r),a=jv(o.dom,"prev");return r.isAtStart()&&(a(r.container())||a(s.container()))})(e,t)),Rl=(e,t,n)=>!bm(t)&&(Dv(e,t,n)||bA(e,t,n)||hm(e,t,n)||Fv(e,t,n)||((o,r)=>{const s=Zn(o.dom,r).getOr(r),a=jv(o.dom,"next");return r.isAtEnd()&&(a(r.container())||a(s.container()))})(e,t)),vm=(e,t,n)=>Tl(e,t,n)||Rl(e,(o=>{const r=o.container(),s=o.offset();return se(r)&&s<r.data.length?G(r,s+1):o})(t),n),Uv=(e,t)=>ed(e.charAt(t)),Hv=(e,t)=>da(e.charAt(t)),qv=(e,t,n,o)=>{const r=t.data,s=G(t,0);return n||!Uv(r,0)||vm(e,s,o)?!!(n&&Hv(r,0)&&Tl(e,s,o))&&(t.data=zt+r.slice(1),!0):(t.data=" "+r.slice(1),!0)},$v=(e,t,n,o)=>{const r=t.data,s=G(t,r.length-1);return n||!Uv(r,r.length-1)||vm(e,s,o)?!!(n&&Hv(r,r.length-1)&&Rl(e,s,o))&&(t.data=r.slice(0,-1)+zt,!0):(t.data=r.slice(0,-1)+" ",!0)},CA=(e,t,n)=>{const o=t.container();if(!se(o))return _.none();if((r=>{const s=r.container();return se(s)&&bn(s.data,zt)})(t)){const r=qv(e,o,!1,n)||(s=>{const a=s.data,i=(l=>{const c=l.split("");return ot(c,(d,f)=>ed(d)&&f>0&&f<c.length-1&&jf(c[f-1])&&jf(c[f+1])?" ":d).join("")})(a);return i!==a&&(s.data=i,!0)})(o)||$v(e,o,!1,n);return Co(r,t)}if(vm(e,t,n)){const r=qv(e,o,!0,n)||$v(e,o,!0,n);return Co(r,t)}return _.none()},Wv=(e,t,n,o)=>{if(n===0)return;const r=S(e),s=qr(r,c=>o.isBlock(st(c))).getOr(r),a=e.data.slice(t,t+n),i=t+n>=e.data.length&&Rl(s,G(e,e.data.length),o),l=t===0&&Tl(s,G(e,0),o);e.replaceData(t,n,Jg(a,4,l,i))},gd=(e,t,n)=>{const o=e.data.slice(t),r=o.length-uc(o).length;Wv(e,t,r,n)},ym=(e,t,n)=>{const o=e.data.slice(0,t),r=o.length-Ba(o).length;Wv(e,t-r,r,n)},Cm=(e,t,n,o,r=!0)=>{const s=Ba(e.data).length,a=r?e:t,i=r?t:e;return r?a.appendData(i.data):a.insertData(0,i.data),Be(S(i)),o&&gd(a,s,n),a},wA=(e,t)=>((n,o)=>{const r=n.container(),s=n.offset();return!G.isTextPosition(n)&&r===o.parentNode&&s>G.before(o).offset()})(t,e)?G(t.container(),t.offset()-1):t,Vv=e=>{return sr(e.previousSibling)?_.some((t=e.previousSibling,se(t)?G(t,t.data.length):G.after(t))):e.previousSibling?Vo(e.previousSibling):_.none();var t},Kv=e=>{return sr(e.nextSibling)?_.some((t=e.nextSibling,se(t)?G(t,0):G.before(t))):e.nextSibling?In(e.nextSibling):_.none();var t},xA=(e,t,n)=>((o,r,s)=>o?((a,i)=>Kv(i).orThunk(()=>Vv(i)).orThunk(()=>((l,c)=>Zn(l,G.after(c)).orThunk(()=>no(l,G.before(c))))(a,i)))(r,s):((a,i)=>Vv(i).orThunk(()=>Kv(i)).orThunk(()=>((l,c)=>_.from(c.previousSibling?c.previousSibling:c.parentNode).bind(d=>no(l,G.before(d))).orThunk(()=>Zn(l,G.after(c))))(a,i)))(r,s))(e,t,n).map(ye(wA,n)),Xv=(e,t,n)=>{n.fold(()=>{e.focus()},o=>{e.selection.setRng(o.toRange(),t)})},SA=(e,t)=>t&&Ie(e.schema.getBlockElements(),st(t)),pa=(e,t,n,o=!0,r=!1)=>{const s=xA(t,e.getBody(),n.dom),a=qr(n,ye(SA,e),(i=e.getBody(),c=>c.dom===i));var i;const l=((c,d,f,m)=>{const b=Ut(c).filter(vt),g=un(c).filter(vt);return Be(c),(y=b,h=g,w=d,E=(k,T,A)=>{const B=k.dom,M=T.dom,P=B.data.length;return Cm(B,M,f,m),A.container()===M?G(B,P):A},y.isSome()&&h.isSome()&&w.isSome()?_.some(E(y.getOrDie(),h.getOrDie(),w.getOrDie())):_.none()).orThunk(()=>(m&&(b.each(k=>ym(k.dom,k.dom.length,f)),g.each(k=>gd(k.dom,0,f))),d));var y,h,w,E})(n,s,e.schema,((c,d)=>Ie(c.schema.getTextInlineElements(),st(d)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind(c=>((d,f,m)=>{if(Ln(d,f)){const b=R('<br data-mce-bogus="1">');return m?Q(He(f),g=>{Jf(g)||Be(g)}):bt(f),q(f,b),_.some(G.before(b.dom))}return _.none()})(e.schema,c,r)).fold(()=>{o&&Xv(e,t,l)},c=>{o&&Xv(e,t,_.some(c))})},EA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ga=(e,t)=>$e(S(t),S_(e))&&!Js(e.schema,t)&&e.dom.isEditable(t),Yv=e=>{var t;return Rt.DOM.getStyle(e,"direction",!0)==="rtl"||(n=>EA.test(n))((t=e.textContent)!==null&&t!==void 0?t:"")},xs=(e,t,n)=>{const o=((r,s,a)=>Ve(Rt.DOM.getParents(a.container(),"*",s),r))(e,t,n);return _.from(o[o.length-1])},Po=(e,t)=>{const n=t.container(),o=t.offset();return e?ms(n)?se(n.nextSibling)?G(n.nextSibling,0):G.after(n):ff(t)?G(n,o+1):t:ms(n)?se(n.previousSibling)?G(n.previousSibling,n.previousSibling.data.length):G.before(n):mf(t)?G(n,o-1):t},Gv=ye(Po,!0),Qv=ye(Po,!1),Jv=(e,t)=>{const n=o=>o.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},hd=e=>Jv(e,"Delete"),Zv=e=>Jv(e,"ForwardDelete"),kA=e=>zh(e)||Ga(e),bd=(e,t)=>Ot(e,t)?ls(t,kA,(n=>o=>os(Hn(o),n,_e))(e)):_.none(),wm=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},ey=(e,t,n)=>nn(In(n),Vo(n),(o,r)=>{const s=Po(!0,o),a=Po(!1,r),i=Po(!1,t);return e?Zn(n,i).exists(l=>l.isEqual(a)&&t.isEqual(s)):no(n,i).exists(l=>l.isEqual(s)&&t.isEqual(a))}).getOr(!0),ty=e=>{var t;return(Eo(t=e)===8||st(t)==="#comment"?Ut(e):Ht(e)).bind(ty).orThunk(()=>_.some(e))},ny=(e,t,n,o=!0)=>{var r;t.deleteContents();const s=ty(n).getOr(n),a=S((r=e.dom.getParent(s.dom,e.dom.isBlock))!==null&&r!==void 0?r:n.dom);if(a.dom===e.getBody()?wm(e,o):Ln(e.schema,a,{checkRootAsContent:!1})&&(fs(a),o&&e.selection.setCursorLocation(a.dom,0)),!_e(n,a)){const l=os(Hn(a),n)?[]:Hn(i=a).map(He).map(c=>Ve(c,d=>!_e(i,d))).getOr([]);Q(l.concat(He(n)),c=>{_e(c,a)||Ot(c,a)||!Ln(e.schema,c)||Be(c)})}var i},xm=e=>Pn(e,"td,th"),oy=(e,t)=>xl(S(e),t),Sm=(e,t)=>({start:e,end:t}),Ol=lo([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),vd=(e,t)=>Ha(S(e),"td,th",t),ry=e=>!_e(e.start,e.end),sy=(e,t)=>xl(e.start,t).bind(n=>xl(e.end,t).bind(o=>Co(_e(n,o),n))),Em=e=>t=>sy(t,e).map(n=>((o,r,s)=>({rng:o,table:r,cells:s}))(t,n,xm(n))),ay=(e,t,n,o)=>{if(n.collapsed||!e.forall(ry))return _.none();if(t.isSameTable){const r=e.bind(Em(o));return _.some({start:r,end:r})}{const r=vd(n.startContainer,o),s=vd(n.endContainer,o),a=r.bind((l=>c=>xl(c,l).bind(d=>Qo(xm(d)).map(f=>Sm(c,f))))(o)).bind(Em(o)),i=s.bind((l=>c=>xl(c,l).bind(d=>yn(xm(d)).map(f=>Sm(f,c))))(o)).bind(Em(o));return _.some({start:a,end:i})}},iy=(e,t)=>Rs(e,n=>_e(n,t)),km=e=>nn(iy(e.cells,e.rng.start),iy(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),ly=(e,t)=>{const{startTable:n,endTable:o}=t,r=e.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},_A=(e,t)=>{const n=(s=>a=>_e(s,a))(e),o=((s,a)=>{const i=vd(s.startContainer,a),l=vd(s.endContainer,a);return nn(i,l,Sm)})(t,n),r=((s,a)=>{const i=oy(s.startContainer,a),l=oy(s.endContainer,a),c=i.isSome(),d=l.isSome(),f=nn(i,l,_e).getOr(!1);return(m=>nn(m.startTable,m.endTable,(b,g)=>{const y=Lu(b,w=>_e(w,g)),h=Lu(g,w=>_e(w,b));return y||h?{...m,startTable:y?_.none():m.startTable,endTable:h?_.none():m.endTable,isSameTable:!1,isMultiTable:!1}:m}).getOr(m))({startTable:i,endTable:l,isStartInTable:c,isEndInTable:d,isSameTable:f,isMultiTable:!f&&c&&d})})(t,n);return((s,a,i)=>s.exists(l=>((c,d)=>!ry(c)&&sy(c,d).exists(f=>{const m=f.dom.rows;return m.length===1&&m[0].cells.length===1}))(l,i)&&Hf(l.start,a)))(o,t,n)?o.map(s=>Ol.singleCellTable(t,s.start)):r.isMultiTable?((s,a,i,l)=>ay(s,a,i,l).bind(({start:c,end:d})=>{const f=c.bind(km).getOr([]),m=d.bind(km).getOr([]);if(f.length>0&&m.length>0){const b=ly(i,a);return _.some(Ol.multiTable(f,m,b))}return _.none()}))(o,r,t,n):((s,a,i,l)=>ay(s,a,i,l).bind(({start:c,end:d})=>c.or(d)).bind(c=>{const{isSameTable:d}=a,f=km(c).getOr([]);if(d&&c.cells.length===f.length)return _.some(Ol.fullTable(c.table));if(f.length>0){if(d)return _.some(Ol.partialTable(f,_.none()));{const m=ly(i,a);return _.some(Ol.partialTable(f,_.some({...a,rng:m})))}}return _.none()}))(o,r,t,n)},cy=e=>Q(e,t=>{Ge(t,"contenteditable"),fs(t)}),_m=(e,t,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(t.dom.lastChild)):(r.setStartBefore(t.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Nm(e,r,t,!1).each(s=>s())},dy=e=>{const t=ai(e),n=S(e.selection.getNode());Oc(n.dom)&&Ln(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&Et(t,o=>_e(o,n))&&Ee(n,"data-mce-selected","1")},uy=(e,t,n)=>_.some(()=>{const o=e.selection.getRng(),r=n.bind(({rng:s,isStartInTable:a})=>{const i=((c,d)=>_.from(c.dom.getParent(d,c.dom.isBlock)).map(S))(e,a?s.endContainer:s.startContainer);s.deleteContents(),((c,d,f)=>{f.each(m=>{d?Be(m):(fs(m),c.selection.setCursorLocation(m.dom,0))})})(e,a,i.filter(ye(Ln,e.schema)));const l=a?t[0]:t[t.length-1];return _m(e,l,o,a),Ln(e.schema,l)?_.none():_.some(a?t.slice(1):t.slice(0,-1))}).getOr(t);cy(r),dy(e)}),NA=(e,t,n,o)=>_.some(()=>{const r=e.selection.getRng(),s=t[0],a=n[n.length-1];_m(e,s,r,!0),_m(e,a,r,!1);const i=Ln(e.schema,s)?t:t.slice(1),l=Ln(e.schema,a)?n:n.slice(0,-1);cy(i.concat(l)),o.deleteContents(),dy(e)}),Nm=(e,t,n,o=!0)=>_.some(()=>{ny(e,t,n,o)}),AA=(e,t)=>_.some(()=>pa(e,!1,t)),fy=(e,t)=>Qt(Kr(t,e),cl),Am=(e,t)=>Qt(Kr(t,e),Jn("caption")),yd=(e,t)=>_.some(()=>{fs(t),e.selection.setCursorLocation(t.dom,0)}),my=(e,t)=>e?Av(t):mm(t),TA=(e,t,n)=>{const o=S(e.getBody());return Am(o,n).fold(()=>((r,s,a,i)=>{const l=G.fromRangeStart(r.selection.getRng());return fy(a,i).bind(c=>Ln(r.schema,c,{checkRootAsContent:!1})?yd(r,c):((d,f,m,b,g)=>ri(m,d.getBody(),g).bind(y=>fy(f,S(y.getNode())).bind(h=>_e(h,b)?_.none():_.some(Se))))(r,a,s,c,l))})(e,t,o,n).orThunk(()=>Co(((r,s)=>{const a=G.fromRangeStart(r.selection.getRng());return my(s,a)||To(s,r.getBody(),a).exists(i=>my(s,i))})(e,t),Se)),r=>((s,a,i,l)=>{const c=G.fromRangeStart(s.selection.getRng());return Ln(s.schema,l)?yd(s,l):((d,f,m,b,g)=>ri(m,d.getBody(),g).fold(()=>_.some(Se),y=>((h,w,E,k)=>In(h.dom).bind(T=>Vo(h.dom).map(A=>w?E.isEqual(T)&&k.isEqual(A):E.isEqual(A)&&k.isEqual(T))).getOr(!0))(b,m,g,y)?((h,w)=>yd(h,w))(d,b):((h,w,E)=>Am(h,S(E.getNode())).fold(()=>_.some(Se),k=>Co(!_e(k,w),Se)))(f,b,y)))(s,i,a,l,c)})(e,t,o,r))},Tm=(e,t)=>{const n=S(e.selection.getStart(!0)),o=ai(e);return e.selection.isCollapsed()&&o.length===0?TA(e,t,n):((r,s,a)=>{const i=S(r.getBody()),l=r.selection.getRng();return a.length!==0?uy(r,a,_.none()):((c,d,f,m)=>Am(d,m).fold(()=>((b,g,y)=>_A(g,y).bind(h=>h.fold(ye(Nm,b),ye(AA,b),ye(uy,b),ye(NA,b))))(c,d,f),b=>((g,y)=>yd(g,y))(c,b)))(r,i,l,s)})(e,n,o)},ha=(e,t)=>{let n=t;for(;n&&n!==e;){if(Wo(n)||Dt(n))return n;n=n.parentNode}return null},RA=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],OA=v.each,Rm=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),o=r=>Et(RA,s=>$t(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return OA(t.getAttribs(l),d=>{const f=d.nodeName.toLowerCase();f==="style"||o(f)||(c[f]=t.getAttrib(l,f))}),c},i=(l,c)=>{for(const d in l)if(Ie(l,d)){const f=c[d];if(It(f)||l[d]!==f)return!1;delete c[d]}for(const d in c)if(Ie(c,d))return!1;return!0};return xe(r)&&xe(s)&&(!i(a(r),a(s))||!i(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(s,"style"))))?!1:!Oo(r)&&!Oo(s)},isAttributeInternal:o}},py=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),gy=(e,t,n,o)=>{const r=n.name;for(let s=0,a=e.length;s<a;s++){const i=e[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=t.length;s<a;s++){const i=t[s],l=i.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},hy=(e,t)=>{const n=(o,r)=>{yt(o,s=>{const a=hn(s.nodes);Q(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(r?c.attr(s.filter.name)!==void 0:c.name===s.filter.name)&&!xt(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},by=(e,t,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&(c=>{let d=c;for(;d=d.walk();)gy(s,a,d,l)})(i),l})(e,t,n);hy(r,o)},Om=(e,t,n,o)=>{if((e.pad_empty_with_br||t.insert)&&n(o)){const r=new Vn("br",1);t.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Vn("#text",3)).value=zt},vy=(e,t)=>{const n=e?.firstChild;return ie(n)&&n===e.lastChild&&n.name===t},Bl=(e,t,n,o)=>o.isEmpty(t,n,r=>((s,a)=>{const i=s.getElementRule(a.name);return i?.paddEmpty===!0})(e,r)),BA=e=>{let t;for(let n=e;n;n=n.parent){const o=n.attr("contenteditable");if(o==="false")break;o==="true"&&(t=n)}return _.from(t)},Bm=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const o=e.children();for(const r of o)n&&!t.isValidChild(n.name,r.name)&&Bm(r,t,n);e.unwrap()}},Dm=(e,t,n,o=Se)=>{const r=t.getTextBlockElements(),s=t.getNonEmptyElements(),a=t.getWhitespaceElements(),i=v.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=d=>d!==n&&!i[d.name];for(let d=0;d<e.length;d++){const f=e[d];let m,b,g;if(!f.parent||l.has(f))continue;if(r[f.name]&&f.parent.name==="li"){let h=f.next;for(;h&&r[h.name];)h.name="li",l.add(h),f.parent.insert(h,f.parent),h=h.next;f.unwrap();continue}const y=[f];for(m=f.parent;m&&!t.isValidChild(m.name,f.name)&&c(m);m=m.parent)y.push(m);if(m&&y.length>1)if(Pm(t,f,m))Bm(f,t);else{y.reverse(),b=y[0].clone(),o(b);let h=b;for(let w=0;w<y.length-1;w++){t.isValidChild(h.name,y[w].name)&&w>0?(g=y[w].clone(),o(g),h.append(g)):g=h;for(let E=y[w].firstChild;E&&E!==y[w+1];){const k=E.next;g.append(E),E=k}h=g}Bl(t,s,a,b)?m.insert(f,y[0],!0):(m.insert(b,y[0],!0),m.insert(f,b)),m=y[0],(Bl(t,s,a,m)||vy(m,"br"))&&m.empty().remove()}else if(f.parent){if(f.name==="li"){let h=f.prev;if(h&&(h.name==="ul"||h.name==="ol")){h.append(f);continue}if(h=f.next,h&&(h.name==="ul"||h.name==="ol")&&h.firstChild){h.insert(f,h.firstChild,!0);continue}const w=new Vn("ul",1);o(w),f.wrap(w);continue}if(t.isValidChild(f.parent.name,"div")&&t.isValidChild("div",f.name)){const h=new Vn("div",1);o(h),f.wrap(h)}else Bm(f,t)}}},Pm=(e,t,n=t.parent)=>!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&(t.name!=="a"||!(o=>{let r=o;for(;r;){if(r.name==="a")return!0;r=r.parent}return!1})(n))&&(!(o=>o.name==="summary")(n)||!py(t)||n?.firstChild===t&&n?.lastChild===t)),Lm=e=>e.collapsed?e:(t=>{const n=G.fromRangeStart(t),o=G.fromRangeEnd(t),r=t.commonAncestorContainer;return To(!1,r,o).map(s=>!Sr(n,o,r)&&Sr(n,s,r)?((a,i,l,c)=>{const d=document.createRange();return d.setStart(a,i),d.setEnd(l,c),d})(n.container(),n.offset(),s.container(),s.offset()):t).getOr(t)})(e),DA=(e,t)=>{let n=t.firstChild,o=t.lastChild;return n&&n.name==="meta"&&(n=n.next),o&&o.attr("id")==="mce_marker"&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return ie(s)&&(s.isEmpty(a)||((i,l)=>i.getBlockElements()[l.name]&&(c=>ie(c.firstChild)&&c.firstChild===c.lastChild)(l)&&(c=>c.name==="br"||c.value===zt)(l.firstChild))(r,s))})(e,o)&&(o=o?.prev),!(!n||n!==o||n.name!=="ul"&&n.name!=="ol")},PA=e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||ie((t=n)==null?void 0:t.firstChild)&&t.firstChild===t.lastChild&&(o=>o.data===zt||qt(o))(t.firstChild))?e.slice(0,-1):e;var t,n},Mm=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},yy=(e,t)=>{const n=G.after(e),o=kr(t).prev(n);return o?o.toRange():null},LA=(e,t,n,o)=>{const r=((f,m,b)=>{const g=m.serialize(b);return(y=>{var h,w;const E=y.firstChild,k=y.lastChild;return E&&E.nodeName==="META"&&((h=E.parentNode)===null||h===void 0||h.removeChild(E)),k&&k.id==="mce_marker"&&((w=k.parentNode)===null||w===void 0||w.removeChild(k)),y})(f.createFragment(g))})(t,e,o),s=Mm(t,n.startContainer),a=PA((i=r.firstChild,Ve((l=i?.childNodes)!==null&&l!==void 0?l:[],f=>f.nodeName==="LI")));var i,l;const c=t.getRoot(),d=f=>{const m=G.fromRangeStart(n),b=kr(t.getRoot()),g=f===1?b.prev(m):b.next(m),y=g?.getNode();return!y||Mm(t,y)!==s};return s?d(1)?((f,m,b)=>{const g=f.parentNode;return g&&v.each(m,y=>{g.insertBefore(y,f)}),((y,h)=>{const w=G.before(y),E=kr(h).next(w);return E?E.toRange():null})(f,b)})(s,a,c):d(2)?((f,m,b,g)=>(g.insertAfter(m.reverse(),f),yy(m[0],b)))(s,a,c,t):((f,m,b,g)=>{const y=((w,E)=>{const k=E.cloneRange(),T=E.cloneRange();return k.setStartBefore(w),T.setEndAfter(w),[k.cloneContents(),T.cloneContents()]})(f,g),h=f.parentNode;return h&&(h.insertBefore(y[0],f),v.each(m,w=>{h.insertBefore(w,f)}),h.insertBefore(y[1],f),h.removeChild(f)),yy(m[m.length-1],b)})(s,a,c,n):null},MA=["pre"],Im=Oc,IA=e=>Cy(e,se),FA=e=>Cy(e,mk),Cy=(e,t)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset==1&&t(e.startContainer.childNodes[e.startOffset]),jA=(e,t,n)=>{var o,r;const s=e.selection,a=e.dom,i=e.parser,l=n.merge,c=vs({validate:!0},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=go(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);let f=s.getRng();const m=f.startContainer,b=e.getBody();m===b&&s.isCollapsed()&&a.isBlock(b.firstChild)&&((k,T)=>ie(T)&&!k.schema.getVoidElements()[T.nodeName])(e,b.firstChild)&&a.isEmpty(b.firstChild)&&(f=a.createRng(),f.setStart(b.firstChild,0),f.setEnd(b.firstChild,0),s.setRng(f)),s.isCollapsed()||(k=>{const T=k.dom,A=Lm(k.selection.getRng());k.selection.setRng(A);const B=T.getParent(A.startContainer,Im);((M,P,z)=>!!ie(z)&&z===M.getParent(P.endContainer,Im)&&Hf(S(z),P))(T,A,B)?Nm(k,A,S(B)):FA(A)||IA(A)?A.deleteContents():k.getDoc().execCommand("Delete",!1)})(e);const g=s.getNode(),y={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},h=i.parse(t,y);if(n.paste===!0&&DA(e.schema,h)&&((k,T)=>!!Mm(k,T))(a,g))return f=LA(c,a,s.getRng(),h),f&&s.setRng(f),t;n.paste===!0&&((k,T,A,B)=>{var M;const P=T.firstChild,z=T.lastChild,W=P===(z.attr("data-mce-type")==="bookmark"?z.prev:z),D=Te(MA,P.name);if(W&&D){const L=P.attr("contenteditable")!=="false",F=((M=k.getParent(A,k.isBlock))===null||M===void 0?void 0:M.nodeName.toLowerCase())===P.name,X=_.from(ha(B,A)).forall(Wo);return L&&F&&X}return!1})(a,h,g,e.getBody())&&((o=h.firstChild)===null||o===void 0||o.unwrap()),(k=>{let T=k;for(;T=T.walk();)T.type===1&&T.attr("data-mce-fragment","1")})(h);let w=h.lastChild;if(w&&w.attr("id")==="mce_marker"){const k=w;for(w=w.prev;w&&w.name!=="table";w=w.walk(!0))if(w.type===3||!a.isBlock(w.name)){w.parent&&e.schema.isValidChild(w.parent.name,"span")&&w.parent.insert(k,w,w.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(g),y.invalid||((k,T,A)=>{var B;return Et(A.children(),py)&&((B=k.getParent(T,k.isBlock))===null||B===void 0?void 0:B.nodeName)==="SUMMARY"})(a,g,h)){e.selection.setContent(d);let k,T=s.getNode();const A=e.getBody();for(Zi(T)?T=k=A:k=T;k&&k!==A;)T=k,k=k.parentNode;t=T===A?A.innerHTML:a.getOuterHTML(T);const B=i.parse(t),M=(L=>{for(let F=L;F;F=F.walk())if(F.attr("id")==="mce_marker")return _.some(F);return _.none()})(B),P=M.bind(BA).getOr(B);M.each(L=>L.replace(h));const z=h.children(),W=(r=h.parent)!==null&&r!==void 0?r:B;h.unwrap();const D=Ve(z,L=>Pm(e.schema,L,W));Dm(D,e.schema,P),by(i.getNodeFilters(),i.getAttributeFilters(),B),t=c.serialize(B),T===A?a.setHTML(A,t):a.setOuterHTML(T,t)}else t=c.serialize(h),((k,T,A)=>{var B;A.getAttribute("data-mce-bogus")==="all"?(B=A.parentNode)===null||B===void 0||B.insertBefore(k.dom.createFragment(T),A):((M,P)=>{if(M.isBlock(P)&&M.isEditable(P)){const z=P.childNodes;return z.length===1&&qt(z[0])||z.length===0}return!1})(k.dom,A)?k.dom.setHTML(A,T):k.selection.setContent(T,{no_events:!0})})(e,t,g);var E;return((k,T)=>{const A=k.schema.getTextInlineElements(),B=k.dom;if(T){const M=k.getBody(),P=Rm(k),z="*[data-mce-fragment]",W=B.select(z);v.each(W,D=>{const L=oe=>ie(A[oe.nodeName.toLowerCase()]),F=oe=>oe.childNodes.length===1;if(!Ev(B,X=D)&&!((oe,te)=>Ev(oe,te)&&Et(ui(oe,te),Ce=>(Ne=>xv.has(Ne))(Ce)))(B,X)&&L(D)&&F(D)){const oe=ui(B,D),te=(Pe,me)=>to(Pe,we=>Te(me,we)),Ce=Pe=>F(D)&&B.is(Pe,z)&&L(Pe)&&(Pe.nodeName===D.nodeName&&te(oe,ui(B,Pe))||Ce(Pe.children[0])),Ne=Pe=>ie(Pe)&&Pe!==M&&(P.compare(D,Pe)||Ne(Pe.parentElement)),Re=Pe=>ie(Pe)&&Pe!==M&&B.is(Pe,z)&&(((me,we,j)=>{const U=ui(me,we),Y=ui(me,j),V=fe=>{var le,Oe;const je=(le=me.getStyle(we,fe))!==null&&le!==void 0?le:"",Ze=(Oe=me.getStyle(j,fe))!==null&&Oe!==void 0?Oe:"";return Ho(je)&&Ho(Ze)&&je!==Ze};return Et(U,fe=>{const le=Oe=>Et(Oe,je=>je===fe);if(!le(Y)&&le(Sv)){const Oe=Ve(Y,je=>Et(Sv,Ze=>$t(je,Ze)));return Et(Oe,V)}return V(fe)})})(B,D,Pe)||Re(Pe.parentElement));(Ce(D.children[0])||Ne(D.parentElement)&&!Re(D.parentElement))&&B.remove(D,!0)}var X})}})(e,l),((k,T)=>{var A,B,M;let P;const z=k.dom,W=k.selection;if(!T)return;W.scrollIntoView(T);const D=ha(k.getBody(),T);if(D&&z.getContentEditable(D)==="false")return z.remove(T),void W.select(D);let L=z.createRng();const F=T.previousSibling;if(se(F)){L.setStart(F,(B=(A=F.nodeValue)===null||A===void 0?void 0:A.length)!==null&&B!==void 0?B:0);const oe=T.nextSibling;se(oe)&&(F.appendData(oe.data),(M=oe.parentNode)===null||M===void 0||M.removeChild(oe))}else L.setStartBefore(T),L.setEndBefore(T);const X=z.getParent(T,z.isBlock);if(z.remove(T),X&&z.isEmpty(X)){const oe=Im(X);bt(S(X)),L.setStart(X,0),L.setEnd(X,0),oe||(te=>!!te.getAttribute("data-mce-fragment"))(X)||!(P=(te=>{let Ce=G.fromRangeStart(te);return Ce=kr(k.getBody()).next(Ce),Ce?.toRange()})(L))?z.add(X,z.create("br",oe?{}:{"data-mce-bogus":"1"})):(L=P,z.remove(X))}W.setRng(L)})(e,a.get("mce_marker")),E=e.getBody(),v.each(E.getElementsByTagName("*"),k=>{k.removeAttribute("data-mce-fragment")}),((k,T,A)=>{_.from(k.getParent(T,"td,th")).map(S).each(B=>((M,P)=>{Ht(M).each(z=>{Ut(z).each(W=>{P.isBlock(st(M))&&ra(z)&&P.isBlock(st(W))&&Be(z)})})})(B,A))})(a,s.getStart(),e.schema),((k,T,A)=>{const B=dn(S(A),M=>_e(M,S(T)));Os(B,B.length-2).filter(dt).fold(()=>Vu(k,T),M=>Vu(k,M.dom))})(e.schema,e.getBody(),s.getStart()),t},Cd=e=>e instanceof Vn,Fm=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&(o=>{di(o)&&In(o.getBody()).each(r=>{const s=r.getNode(),a=wr(s)?In(s).getOr(r):r;o.selection.setRng(a.toRange())})})(e)},jm=Xf,wy=(e,t,n)=>{const o=e.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(Bo(s)&&s.inherit===!1&&e.dom.is(t,s.selector))return!0}return!1},zm=(e,t,n,o,r)=>{const s=e.dom.getRoot();if(t===s)return!1;const a=e.dom.getParent(t,i=>!!wy(e,i,n)||i.parentNode===s||!!Nr(e,i,n,o,!0));return!!Nr(e,a,n,o,r)},wd=(e,t,n)=>!(!on(n)||!jm(t,n.inline))||!(!_r(n)||!jm(t,n.block))||!!Bo(n)&&xe(t)&&e.is(t,n.selector),xy=(e,t,n,o,r,s)=>{const a=n[o],i=o==="attributes";if(gt(n.onmatch))return n.onmatch(t,n,o);if(a){if(Di(a)){for(let l=0;l<a.length;l++)if(i?e.getAttrib(t,a[l]):nd(e,t,a[l]))return!0}else for(const l in a)if(Ie(a,l)){const c=i?e.getAttrib(t,l):nd(e,t,l),d=bs(a[l],s),f=xt(c)||Ms(c);if(f&&xt(d))continue;if(r&&f&&!n.exact||(!r||n.exact)&&!jm(c,Yf(d,l)))return!1}}return!0},Nr=(e,t,n,o,r)=>{const s=e.formatter.get(n),a=e.dom;if(s&&xe(t))for(let i=0;i<s.length;i++){const l=s[i];if(wd(e.dom,t,l)&&xy(a,t,l,"attributes",r,o)&&xy(a,t,l,"styles",r,o)){const c=l.classes;if(c){for(let d=0;d<c.length;d++)if(!e.dom.hasClass(t,bs(c[d],o)))return}return l}}},Um=(e,t,n,o,r)=>{if(o)return zm(e,o,t,n,r);if(o=e.selection.getNode(),zm(e,o,t,n,r))return!0;const s=e.selection.getStart();return!(s===o||!zm(e,s,t,n,r))},Dl=mn,Sy=e=>{if(e){const t=new fn(e,e);for(let n=t.current();n;n=t.next())if(se(n))return n}return null},Hm=e=>{const t=O("span");return Me(t,{id:If,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&q(t,H(Dl)),t},qm=(e,t,n)=>{const o=e.dom,r=e.selection;if(kb(t))pa(e,!1,S(t),n,!0);else{const s=r.getRng(),a=o.getParent(t,o.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,d=s.endOffset,f=(m=>{const b=Sy(m);return b&&b.data.charAt(0)===Dl&&b.deleteData(0,1),b})(t);o.remove(t,!0),i===f&&l>0&&s.setStart(f,l-1),c===f&&d>0&&s.setEnd(f,d-1),a&&o.isEmpty(a)&&fs(S(a)),r.setRng(s)}},$m=(e,t,n)=>{const o=e.dom,r=e.selection;if(t)qm(e,t,n);else if(!(t=ca(e.getBody(),r.getStart())))for(;t=o.get(If);)qm(e,t,n)},Ey=(e,t)=>(e.appendChild(t),t),ky=(e,t)=>{var n;const o=Mr(e,(s,a)=>Ey(s,a.cloneNode(!1)),t),r=(n=o.ownerDocument)!==null&&n!==void 0?n:document;return Ey(o,r.createTextNode(Dl))},_y=e=>jg(e,Yi(e).replace(new RegExp(`${zt}$`)," ")),Ny=(e,t)=>{const n=()=>{t===null||e.dom.isEmpty(t)||Ut(S(t)).each(o=>{vt(o)?_y(o):Du(o,r=>vt(r)).each(r=>{vt(r)&&_y(r)})})};e.once("input",o=>{o.data&&!da(o.data)&&(o.isComposing?e.once("compositionend",()=>{n()}):n())})},zA=(e,t,n,o)=>{const r=e.dom,s=e.selection;let a=!1;const i=e.formatter.get(t);if(!i)return;const l=s.getRng(),c=l.startContainer,d=l.startOffset;let f=c;se(c)&&(d!==c.data.length&&(a=!0),f=f.parentNode);const m=[];let b;for(;f;){if(Nr(e,f,t,n,o)){b=f;break}f.nextSibling&&(a=!0),m.push(f),f=f.parentNode}if(b)if(a){const g=s.getBookmark();l.collapse(!0);let y=ua(r,l,i,{includeTrailingSpace:!0});y=ud(y),e.formatter.remove(t,n,y,o),s.moveToBookmark(g)}else{const g=ca(e.getBody(),b),y=ie(g)?r.getParents(b.parentNode,jt,g):[],h=Hm(!1).dom;((k,T,A)=>{var B,M;const P=k.dom,z=P.getParent(A,ye(Vf,k.schema));z&&P.isEmpty(z)?(B=A.parentNode)===null||B===void 0||B.replaceChild(T,A):((W=>{const D=Pn(W,"br"),L=Ve((F=>{const X=[];let oe=F.dom;for(;oe;)X.push(S(oe)),oe=oe.lastChild;return X})(W).slice(-1),ra);D.length===L.length&&Q(L,Be)})(S(A)),P.isEmpty(A)?(M=A.parentNode)===null||M===void 0||M.replaceChild(T,A):P.insertAfter(T,A))})(e,h,g??b);const w=((k,T,A,B,M,P)=>{const z=k.formatter,W=k.dom,D=Ve(sn(z.get()),F=>F!==B&&!bn(F,"removeformat")),L=((F,X,oe)=>gn(oe,(te,Ce)=>{const Ne=((Re,Pe)=>Gf(Re,Pe,me=>{const we=j=>gt(j)||j.length>1&&j.charAt(0)==="%";return Et(["styles","attributes"],j=>Bt(me,j).exists(U=>{const Y=re(U)?U:Aa(U);return Et(Y,we)}))}))(F,Ce);return F.formatter.matchNode(X,Ce,{},Ne)?te.concat([Ce]):te},[]))(k,A,D);if(Ve(L,F=>!((X,oe,te)=>{const Ce=["inline","block","selector","attributes","styles","classes"],Ne=Re=>br(Re,(Pe,me)=>Et(Ce,we=>we===me));return Gf(X,oe,Re=>{const Pe=Ne(Re);return Gf(X,te,me=>{const we=Ne(me);return((j,U,Y=Yt)=>at(Y).eq(j,U))(Pe,we)})})})(k,F,B)).length>0){const F=A.cloneNode(!1);return W.add(T,F),z.remove(B,M,F,P),W.remove(F),_.some(F)}return _.none()})(e,h,b,t,n,o),E=ky([...m,...w.toArray(),...y],h);g&&qm(e,g,ie(g)),s.setCursorLocation(E,1),Ny(e,h),r.isEmpty(b)&&r.remove(b)}},Ay=e=>{const t=Hm(!1),n=ky(e,t.dom);return{caretContainer:t,caretPosition:G(n,0)}},Ty=(e,t)=>{const{caretContainer:n,caretPosition:o}=Ay(t);return wn(S(e),n),Be(S(e)),o},Ry=(e,t)=>{if(Ro(t.dom))return!1;const n=e.schema.getTextInlineElements();return Ie(n,st(t))&&!Ro(t.dom)&&!Gs(t.dom)},Pl={},Oy=nr(["pre"]);(e=>{Pl[e]||(Pl[e]=[]),Pl[e].push(t=>{if(!t.selection.getRng().collapsed){const n=t.selection.getSelectedBlocks(),o=Ve(Ve(n,Oy),(r=>s=>{const a=s.previousSibling;return Oy(a)&&Te(r,a)})(n));Q(o,r=>{((s,a)=>{const i=S(a),l=Rn(i).dom;Be(i),ne(S(s),[O("br",l),O("br",l),...He(i)])})(r.previousSibling,r)})}})})("pre");const By=["fontWeight","fontStyle","color","fontSize","fontFamily"],Dy=(e,t)=>{const n=e.get(t);return re(n)?Qt(n,o=>on(o)&&o.inline==="span"&&(r=>Ke(r.styles)&&Et(sn(r.styles),s=>Te(By,s)))(o)):_.none()},Py=(e,t)=>no(t,G.fromRangeStart(e)).isNone(),Ly=(e,t)=>Zn(t,G.fromRangeEnd(e)).exists(n=>!qt(n.getNode())||Zn(t,n).isSome())===!1,My=e=>t=>gk(t)&&e.isEditable(t),Iy=e=>Ve(e.getSelectedBlocks(),My(e.dom)),Wm=v.each,Vm=e=>xe(e)&&!Oo(e)&&!Ro(e)&&!Gs(e),Fy=(e,t)=>{for(let n=e;n;n=n[t]){if(se(n)&&Ho(n.data))return e;if(xe(n)&&!Oo(n))return n}return e},jy=(e,t,n)=>{const o=Rm(e),r=Cr(t)&&e.dom.isEditable(t),s=Cr(n)&&e.dom.isEditable(n);if(r&&s){const a=Fy(t,"previousSibling"),i=Fy(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return e.dom.remove(i),v.each(v.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},zy=(e,t,n,o)=>{var r;if(o&&t.merge_siblings!==!1){const s=(r=jy(e,xb(o),o))!==null&&r!==void 0?r:o;jy(e,s,xb(s,!0))}},Km=(e,t,n)=>{Wm(e.childNodes,o=>{Vm(o)&&(t(o)&&n(o),o.hasChildNodes()&&Km(o,t,n))})},Uy=(e,t)=>n=>!(!n||!nd(e,n,t)),Hy=(e,t,n)=>o=>{e.setStyle(o,t,n),o.getAttribute("style")===""&&o.removeAttribute("style"),((r,s)=>{s.nodeName==="SPAN"&&r.getAttribs(s).length===0&&r.remove(s,!0)})(e,o)},ba=lo([{keep:[]},{rename:["name"]},{removed:[]}]),UA=/^(src|href|style)$/,Xm=v.each,xd=Xf,qy=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),$y=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"];if(xe(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return se(o)&&n&&r>=o.data.length&&(o=new fn(o,e.getBody()).next()||o),se(o)&&!n&&r===0&&(o=new fn(o,e.getBody()).prev()||o),o},Wy=(e,t)=>{const n=t?"firstChild":"lastChild",o=e[n];return(r=>/^(TR|TH|TD)$/.test(r.nodeName))(e)&&o?e.nodeName==="TR"&&o[n]||o:e},Ym=(e,t,n,o)=>{var r;const s=e.create(n,o);return(r=t.parentNode)===null||r===void 0||r.insertBefore(s,t),s.appendChild(t),s},Vy=(e,t,n,o,r)=>{const s=S(t),a=S(e.create(o,r)),i=n?Bn(s):Zo(s);return ne(a,i),n?(wn(s,a),I(a,s)):(qo(s,a),q(a,s)),a.dom},Ky=(e,t,n)=>{const o=t.parentNode;let r;const s=e.dom,a=Mn(e);_r(n)&&o===s.getRoot()&&(n.list_block&&xd(t,n.list_block)||Q(hn(t.childNodes),i=>{ii(e,a,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=Ym(s,i,a),s.setAttribs(r,pl(e))):r=null})),(i=>Bo(i)&&on(i)&&os(Bt(i,"mixed"),!0))(n)&&!xd(n.inline,t)||s.remove(t,!0)},Xy=(e,t,n)=>x(e)?{name:t,value:null}:{name:e,value:bs(t,n)},Yy=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Gy=(e,t,n,o,r)=>{let s=!1;Xm(n.styles,(a,i)=>{const{name:l,value:c}=Xy(i,a,o),d=Yf(c,l);(n.remove_similar||Je(c)||!xe(r)||xd(nd(e,r,l),d))&&e.setStyle(t,l,""),s=!0}),s&&Yy(e,t)},Qy=(e,t,n,o,r)=>{const s=e.dom,a=Rm(e),i=e.schema;if(on(t)&&Xu(i,t.inline)&&Js(i,o)&&o.parentElement===e.getBody())return Ky(e,o,t),ba.removed();if(!t.ceFalseOverride&&o&&s.getContentEditableParent(o)==="false"||o&&!wd(s,o,t)&&!((d,f)=>f.links&&d.nodeName==="A")(o,t))return ba.keep();const l=o,c=t.preserve_attributes;if(on(t)&&t.remove==="all"&&re(c)){const d=Ve(s.getAttribs(l),f=>Te(c,f.name.toLowerCase()));if(s.removeAllAttribs(l),Q(d,f=>s.setAttrib(l,f.name,f.value)),d.length>0)return ba.rename("span")}if(t.remove!=="all"){Gy(s,l,t,n,r),Xm(t.attributes,(f,m)=>{const{name:b,value:g}=Xy(m,f,n);if(t.remove_similar||Je(g)||!xe(r)||xd(s.getAttrib(r,b),g)){if(b==="class"){const y=s.getAttrib(l,b);if(y){let h="";if(Q(y.split(/\s+/),w=>{/mce\-\w+/.test(w)&&(h+=(h?" ":"")+w)}),h)return void s.setAttrib(l,b,h)}}if(UA.test(b)&&l.removeAttribute("data-mce-"+b),b==="style"&&nr(["li"])(l)&&s.getStyle(l,"list-style-type")==="none")return l.removeAttribute(b),void s.setStyle(l,"list-style-type","none");b==="class"&&l.removeAttribute("className"),l.removeAttribute(b)}}),Xm(t.classes,f=>{f=bs(f,n),xe(r)&&!s.hasClass(r,f)||s.removeClass(l,f)});const d=s.getAttribs(l);for(let f=0;f<d.length;f++){const m=d[f].nodeName;if(!a.isAttributeInternal(m))return ba.keep()}}return t.remove!=="none"?(Ky(e,l,t),ba.removed()):ba.keep()},HA=(e,t,n,o)=>Qy(e,t,n,o,o).fold(ue(o),r=>(e.dom.createFragment().appendChild(o),e.dom.rename(o,r)),ue(null)),Jy=(e,t,n,o,r)=>{(o||e.selection.isEditable())&&((s,a,i,l,c)=>{const d=s.formatter.get(a),f=d[0],m=s.dom,b=s.selection,g=k=>{const T=((A,B,M,P,z)=>{let W;return B.parentNode&&Q(od(A.dom,B.parentNode).reverse(),D=>{if(!W&&xe(D)&&D.id!=="_start"&&D.id!=="_end"){const L=Nr(A,D,M,P,z);L&&L.split!==!1&&(W=D)}}),W})(s,k,a,i,c);return((A,B,M,P,z,W,D,L)=>{var F,X;let oe,te;const Ce=A.dom;if(M){const Ne=M.parentNode;for(let Re=P.parentNode;Re&&Re!==Ne;Re=Re.parentNode){let Pe=Ce.clone(Re,!1);for(let me=0;me<B.length&&(Pe=HA(A,B[me],L,Pe),Pe!==null);me++);Pe&&(oe&&Pe.appendChild(oe),te||(te=Pe),oe=Pe)}D.mixed&&Ce.isBlock(M)||(P=(F=Ce.split(M,P))!==null&&F!==void 0?F:P),oe&&te&&((X=z.parentNode)===null||X===void 0||X.insertBefore(oe,z),te.appendChild(z),on(D)&&zy(A,D,0,oe))}return P})(s,d,T,k,k,0,f,i)},y=k=>Et(d,T=>Ll(s,T,i,k,k)),h=k=>{const T=hn(k.childNodes),A=y(k)||Et(d,M=>wd(m,k,M)),B=k.parentNode;if(!A&&ie(B)&&Qf(f)&&y(B),f.deep&&T.length)for(let M=0;M<T.length;M++)h(T[M]);Q(["underline","line-through","overline"],M=>{xe(k)&&s.dom.getStyle(k,"text-decoration")===M&&k.parentNode&&Eb(m,k.parentNode)===M&&Ll(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:M}},void 0,k)})},w=k=>{const T=m.get(k?"_start":"_end");if(T){let A=T[k?"firstChild":"lastChild"];return(B=>Oo(B)&&xe(B)&&(B.id==="_start"||B.id==="_end"))(A)&&(A=A[k?"firstChild":"lastChild"]),se(A)&&A.data.length===0&&(A=k?T.previousSibling||T.nextSibling:T.nextSibling||T.previousSibling),m.remove(T,!0),A}return null},E=k=>{let T,A,B=ua(m,k,d,{includeTrailingSpace:k.collapsed});if(f.split){if(B=ud(B),T=$y(s,B,!0),A=$y(s,B),T!==A){if(T=Wy(T,!0),A=Wy(A,!1),qy(m,T,A)){const P=_.from(T.firstChild).getOr(T);return g(Vy(m,P,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void w(!0)}if(qy(m,A,T)){const P=_.from(A.lastChild).getOr(A);return g(Vy(m,P,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void w(!1)}T=Ym(m,T,"span",{id:"_start","data-mce-type":"bookmark"}),A=Ym(m,A,"span",{id:"_end","data-mce-type":"bookmark"});const M=m.createRng();M.setStartAfter(T),M.setEndBefore(A),El(m,M,P=>{Q(P,z=>{Oo(z)||Oo(z.parentNode)||g(z)})}),g(T),g(A),T=w(!0),A=w()}else T=A=g(T);B.startContainer=T.parentNode?T.parentNode:T,B.startOffset=m.nodeIndex(T),B.endContainer=A.parentNode?A.parentNode:A,B.endOffset=m.nodeIndex(A)+1}El(m,B,M=>{Q(M,h)})};if(l){if(Sl(l)){const k=m.createRng();k.setStartBefore(l),k.setEndAfter(l),E(k)}else E(l);C0(s,a,l,i)}else b.isCollapsed()&&on(f)&&!ai(s).length?zA(s,a,i,c):(wb(s,()=>$f(s,E),k=>on(f)&&Um(s,a,i,k)),s.nodeChanged()),((k,T,A)=>{T==="removeformat"?Q(Iy(k.selection),B=>{Q(By,M=>k.dom.setStyle(B,M,"")),Yy(k.dom,B)}):Dy(k.formatter,T).each(B=>{Q(Iy(k.selection),M=>Gy(k.dom,M,B,A,null))})})(s,a,i),C0(s,a,l,i)})(e,t,n,o,r)},Ll=(e,t,n,o,r)=>Qy(e,t,n,o,r).fold(St,s=>(e.dom.rename(o,s),!0),jt),Zy=v.each,Sd=v.each,eC=(e,t,n,o)=>{if(Sd(n.styles,(r,s)=>{e.setStyle(t,s,bs(r,o))}),n.styles){const r=e.getAttrib(t,"style");r&&e.setAttrib(t,"data-mce-style",r)}},qA=(e,t,n,o)=>{const r=e.formatter.get(t),s=r[0],a=!o&&e.selection.isCollapsed(),i=e.dom,l=e.selection,c=(g,y=s)=>{gt(y.onformat)&&y.onformat(g,y,n,o),eC(i,g,y,n),Sd(y.attributes,(h,w)=>{i.setAttrib(g,w,bs(h,n))}),Sd(y.classes,h=>{const w=bs(h,n);i.hasClass(g,w)||i.addClass(g,w)})},d=(g,y)=>{let h=!1;return Sd(g,w=>!(!Bo(w)||(i.getContentEditable(y)!=="false"||w.ceFalseOverride)&&(!ie(w.collapsed)||w.collapsed===a)&&i.is(y,w.selector)&&!Ro(y)&&(c(y,w),h=!0,1))),h},f=g=>{if(Ae(g)){const y=i.create(g);return c(y),y}return null},m=(g,y,h)=>{const w=[];let E=!0;const k=s.inline||s.block,T=f(k);El(g,y,A=>{let B;const M=P=>{let z=!1,W=E,D=!1;const L=P.parentNode,F=L.nodeName.toLowerCase(),X=g.getContentEditable(P);ie(X)&&(W=E,E=X==="true",z=!0,D=Sb(e,P));const oe=E&&!z;if(qt(P)&&!((te,Ce,Ne,Re)=>{if(O_(te)&&on(Ce)&&Ne.parentNode){const Pe=Eh(te.schema),me=rk(S(Ne),we=>Ro(we.dom));return an(Pe,Re)&&Wr(te.schema,Ne.parentNode,{skipBogus:!1,includeZwsp:!0})&&!me}return!1})(e,s,P,F))return B=null,void(_r(s)&&g.remove(P));if((te=>(Ce=>_r(Ce)&&Ce.wrapper===!0)(s)&&Nr(e,te,t,n))(P))B=null;else{if(((te,Ce,Ne)=>{const Re=(Pe=>_r(Pe)&&Pe.wrapper!==!0)(s)&&Vf(e.schema,te)&&ii(e,Ce,k);return Ne&&Re})(P,F,oe)){const te=g.rename(P,k);return c(te),w.push(te),void(B=null)}if(Bo(s)){let te=d(r,P);if(!te&&ie(L)&&Qf(s)&&(te=d(r,L)),!on(s)||te)return void(B=null)}ie(T)&&((te,Ce,Ne,Re)=>{const Pe=te.nodeName.toLowerCase(),me=ii(e,k,Pe)&&ii(e,Ce,k),we=!h&&se(te)&&Fc(te.data),j=Ro(te),U=!on(s)||!g.isBlock(te);return(Ne||Re)&&me&&!we&&!j&&U})(P,F,oe,D)?(B||(B=g.clone(T,!1),L.insertBefore(B,P),w.push(B)),D&&z&&(E=W),B.appendChild(P)):(B=null,Q(hn(P.childNodes),M),z&&(E=W),B=null)}};Q(A,M)}),s.links===!0&&Q(w,A=>{const B=M=>{M.nodeName==="A"&&c(M,s),Q(hn(M.childNodes),B)};B(A)}),Q(w,A=>{const B=(M=>{let P=0;return Q(M.childNodes,z=>{(W=>ie(W)&&se(W)&&W.length===0)(z)||Oo(z)||P++}),P})(A);!(w.length>1)&&g.isBlock(A)||B!==0?(on(s)||_r(s)&&s.wrapper)&&(s.exact||B!==1||(A=(M=>Qt(M.childNodes,Wf).filter(z=>g.getContentEditable(z)!=="false"&&wd(g,z,s)).map(z=>{const W=g.clone(z,!1);return c(W),g.replace(W,M,!0),g.remove(z,!0),W}).getOr(M))(A)),((M,P,z,W)=>{Zy(P,D=>{on(D)&&Zy(M.dom.select(D.inline,W),L=>{Vm(L)&&Ll(M,D,z,L,D.exact?L:null)}),((L,F,X)=>{if(F.clear_child_styles){const oe=F.links?"*:not(a)":"*";Wm(L.select(oe,X),te=>{Vm(te)&&L.isEditable(te)&&Wm(F.styles,(Ce,Ne)=>{L.setStyle(te,Ne,"")})})}})(M.dom,D,W)})})(e,r,n,A),((M,P,z,W,D)=>{const L=D.parentNode;Nr(M,L,z,W)&&Ll(M,P,W,D)||P.merge_with_parents&&L&&M.dom.getParent(L,F=>!!Nr(M,F,z,W)&&(Ll(M,P,W,D),!0))})(e,s,t,n,A),((M,P,z,W)=>{if(P.styles&&P.styles.backgroundColor){const D=Uy(M,"fontSize");Km(W,L=>D(L)&&M.isEditable(L),Hy(M,"backgroundColor",bs(P.styles.backgroundColor,z)))}})(g,s,n,A),((M,P,z,W)=>{const D=L=>{if(Cr(L)&&xe(L.parentNode)&&M.isEditable(L)){const F=Eb(M,L.parentNode);M.getStyle(L,"color")&&F?M.setStyle(L,"text-decoration",F):M.getStyle(L,"text-decoration")===F&&M.setStyle(L,"text-decoration",null)}};P.styles&&(P.styles.color||P.styles.textDecoration)&&(v.walk(W,D,"childNodes"),D(W))})(g,s,0,A),((M,P,z,W)=>{if(on(P)&&(P.inline==="sub"||P.inline==="sup")){const D=Uy(M,"fontSize");Km(W,F=>D(F)&&M.isEditable(F),Hy(M,"fontSize",""));const L=Ve(M.select(P.inline==="sup"?"sub":"sup",W),M.isEditable);M.remove(L,!0)}})(g,s,0,A),zy(e,s,0,A)):g.remove(A,!0)})},b=Sl(o)?o:l.getNode();if(i.getContentEditable(b)==="false"&&!Sb(e,b))return d(r,o=b),void y0(e,t,o,n);if(s){if(o)if(Sl(o)){if(!d(r,o)){const g=i.createRng();g.setStartBefore(o),g.setEndAfter(o),m(i,ua(i,g,r),!0)}}else m(i,o,!0);else a&&on(s)&&!ai(e).length?((g,y,h)=>{let w;const E=g.selection,k=g.formatter.get(y);if(!k)return;const T=E.getRng();let A=T.startOffset;const B=T.startContainer.nodeValue;w=ca(g.getBody(),E.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(B&&A>0&&A<B.length&&M.test(B.charAt(A))&&M.test(B.charAt(A-1))){const W=E.getBookmark();T.collapse(!0);let D=ua(g.dom,T,k);D=ud(D),g.formatter.apply(y,h,D),E.moveToBookmark(W)}else{let W=w?Sy(w):null;w&&W?.data===Dl||(P=g.getDoc(),z=Hm(!0).dom,w=P.importNode(z,!0),W=w.firstChild,T.insertNode(w),A=1,Ny(g,w)),g.formatter.apply(y,h,w),E.setCursorLocation(W,A)}var P,z})(e,t,n):(l.setRng(Lm(l.getRng())),wb(e,()=>{$f(e,(g,y)=>{const h=y?g:ua(i,g,r);m(i,h,!1)})},jt),e.nodeChanged()),Dy(e.formatter,t).each(g=>{Q((y=>Ve((h=>{const w=h.getSelectedBlocks(),E=h.getRng();if(h.isCollapsed())return[];if(w.length===1)return Py(E,w[0])&&Ly(E,w[0])?w:[];{const k=yn(w).filter(B=>Py(E,B)).toArray(),T=Qo(w).filter(B=>Ly(E,B)).toArray(),A=w.slice(1,-1);return k.concat(A).concat(T)}})(y),My(y.dom)))(e.selection),y=>eC(i,y,g,n))});((g,y)=>{Ie(Pl,g)&&Q(Pl[g],h=>{h(y)})})(t,e)}y0(e,t,o,n)},tC=(e,t,n,o)=>{(o||e.selection.isEditable())&&qA(e,t,n,o)},nC=e=>Ie(e,"vars"),oC=e=>e.selection.getStart(),rC=(e,t,n,o,r)=>Uo(t,s=>{const a=e.formatter.matchNode(s,n,r??{},o);return!It(a)},s=>!!wy(e,s,n)||!o&&ie(e.formatter.matchNode(s,n,r,!0))),sC=(e,t)=>{const n=t??oC(e);return Ve(od(e.dom,n),o=>xe(o)&&!Gs(o))},aC=(e,t,n)=>{const o=sC(e,t);yt(n,(r,s)=>{const a=i=>{const l=rC(e,o,s,i.similar,nC(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const d=l.getOr(t);nC(i)?i.callback(c,{node:d,format:s,parents:o}):Q(i.callbacks,f=>f(c,{node:d,format:s,parents:o}))}};Q([r.withSimilar,r.withoutSimilar],a),Q(r.withVars,a)})},iC=v.explode,lC=()=>{const e={};return{addFilter:(t,n)=>{Q(iC(t),o=>{Ie(e,o)||(e[o]={name:o,callbacks:[]}),e[o].callbacks.push(n)})},getFilters:()=>Aa(e),removeFilter:(t,n)=>{Q(iC(t),o=>{if(Ie(e,o))if(ie(n)){const r=e[o],s=Ve(r.callbacks,a=>a!==n);s.length>0?r.callbacks=s:delete e[o]}else delete e[o]})}}},$A=(e,t,n)=>{var o;const r=rf();t.convert_fonts_to_spans&&((s,a,i)=>{s.addNodeFilter("font",l=>{Q(l,c=>{const d=a.parse(c.attr("style")),f=c.attr("color"),m=c.attr("face"),b=c.attr("size");f&&(d.color=f),m&&(d["font-family"]=m),b&&Is(b).each(g=>{d["font-size"]=i[g-1]}),c.name="span",c.attr("style",a.serialize(d)),(g=>{Q(["color","face","size"],y=>{g.attr(y,null)})})(c)})})})(e,r,v.explode((o=t.font_size_legacy_values)!==null&&o!==void 0?o:"")),((s,a,i)=>{s.addNodeFilter("strike",l=>{const c=a.type!=="html4";Q(l,d=>{if(c)d.name="s";else{const f=i.parse(d.attr("style"));f["text-decoration"]="line-through",d.name="span",d.attr("style",i.serialize(f))}})})})(e,n,r)},Gm=e=>{const[t,...n]=e.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(r){const s=r[2]===";base64",a=(l=>{try{return decodeURIComponent(l)}catch{return l}})(o),i=s?(l=>{const c=/([a-z0-9+\/=\s]+)/i.exec(l);return c?c[1]:""})(a):a;return _.some({type:r[1],data:i,base64Encoded:s})}return _.none()},cC=(e,t,n=!0)=>{let o=t;if(n)try{o=atob(t)}catch{return _.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return _.some(new Blob([r],{type:e}))},dC=e=>new Promise((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result)},o.onerror=()=>{var r;n((r=o.error)===null||r===void 0?void 0:r.message)},o.readAsDataURL(e)});let WA=0;const uC=(e,t,n)=>Gm(e).bind(({data:o,type:r,base64Encoded:s})=>{if(t&&!s)return _.none();{const a=s?o:btoa(o);return n(a,r)}}),fC=(e,t,n)=>{const o=e.create("blobid"+WA++,t,n);return e.add(o),o},mC=(e,t,n=!1)=>uC(t,n,(o,r)=>_.from(e.getByData(o,r)).orThunk(()=>cC(r,o).map(s=>fC(e,s,o)))),VA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,KA=e=>_.from(e.match(VA)).bind(t=>Os(t,1)).map(t=>$t(t,"www.")?t.substring(4):t),pC=(e,t)=>{_.from(e.attr("src")).bind(KA).forall(n=>!Te(t,n))&&e.attr("sandbox","")},Qm=(e,t)=>$t(e,`${t}/`),{entries:gC,setPrototypeOf:hC,isFrozen:XA,getPrototypeOf:YA,getOwnPropertyDescriptor:GA}=Object;let{freeze:oo,seal:Ko,create:bC}=Object,{apply:Jm,construct:Zm}=typeof Reflect<"u"&&Reflect;oo||(oo=function(e){return e}),Ko||(Ko=function(e){return e}),Jm||(Jm=function(e,t,n){return e.apply(t,n)}),Zm||(Zm=function(e,t){return new e(...t)});const Ed=so(Array.prototype.forEach),QA=so(Array.prototype.lastIndexOf),vC=so(Array.prototype.pop),Ml=so(Array.prototype.push),JA=so(Array.prototype.splice),kd=so(String.prototype.toLowerCase),ep=so(String.prototype.toString),yC=so(String.prototype.match),Il=so(String.prototype.replace),ZA=so(String.prototype.indexOf),eT=so(String.prototype.trim),ir=so(Object.prototype.hasOwnProperty),ro=so(RegExp.prototype.test),Fl=(CC=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zm(CC,t)});var CC;function so(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Jm(e,t,o)}}function kt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kd;hC&&hC(e,null);let o=t.length;for(;o--;){let r=t[o];if(typeof r=="string"){const s=n(r);s!==r&&(XA(t)||(t[o]=s),r=s)}e[r]=!0}return e}function tT(e){for(let t=0;t<e.length;t++)ir(e,t)||(e[t]=null);return e}function va(e){const t=bC(null);for(const[n,o]of gC(e))ir(e,n)&&(Array.isArray(o)?t[n]=tT(o):o&&typeof o=="object"&&o.constructor===Object?t[n]=va(o):t[n]=o);return t}function jl(e,t){for(;e!==null;){const n=GA(e,t);if(n){if(n.get)return so(n.get);if(typeof n.value=="function")return so(n.value)}e=YA(e)}return function(){return null}}const wC=oo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),tp=oo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),np=oo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),nT=oo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),op=oo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),oT=oo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xC=oo(["#text"]),SC=oo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),rp=oo(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),EC=oo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_d=oo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),rT=Ko(/\{\{[\w\W]*|[\w\W]*\}\}/gm),sT=Ko(/<%[\w\W]*|[\w\W]*%>/gm),aT=Ko(/\$\{[\w\W]*/gm),iT=Ko(/^data-[\-\w.\u00B7-\uFFFF]+$/),lT=Ko(/^aria-[\-\w]+$/),kC=Ko(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),cT=Ko(/^(?:\w+script|data):/i),dT=Ko(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_C=Ko(/^html$/i),uT=Ko(/^[a-z][.\w]*(-[.\w]+)+$/i);var NC=Object.freeze({__proto__:null,ARIA_ATTR:lT,ATTR_WHITESPACE:dT,CUSTOM_ELEMENT:uT,DATA_ATTR:iT,DOCTYPE_NAME:_C,ERB_EXPR:sT,IS_ALLOWED_URI:kC,IS_SCRIPT_OR_DATA:cT,MUSTACHE_EXPR:rT,TMPLIT_EXPR:aT});const fT=function(){return typeof window>"u"?null:window};var sp=function e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fT();const n=$=>e($);if(n.version="3.2.4",n.removed=[],!t||!t.document||t.document.nodeType!==9||!t.Element)return n.isSupported=!1,n;let{document:o}=t;const r=o,s=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:c,NodeFilter:d,NamedNodeMap:f=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:b,trustedTypes:g}=t,y=c.prototype,h=jl(y,"cloneNode"),w=jl(y,"remove"),E=jl(y,"nextSibling"),k=jl(y,"childNodes"),T=jl(y,"parentNode");if(typeof i=="function"){const $=o.createElement("template");$.content&&$.content.ownerDocument&&(o=$.content.ownerDocument)}let A,B="";const{implementation:M,createNodeIterator:P,createDocumentFragment:z,getElementsByTagName:W}=o,{importNode:D}=r;let L={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported=typeof gC=="function"&&typeof T=="function"&&M&&M.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:F,ERB_EXPR:X,TMPLIT_EXPR:oe,DATA_ATTR:te,ARIA_ATTR:Ce,IS_SCRIPT_OR_DATA:Ne,ATTR_WHITESPACE:Re,CUSTOM_ELEMENT:Pe}=NC;let{IS_ALLOWED_URI:me}=NC,we=null;const j=kt({},[...wC,...tp,...np,...op,...xC]);let U=null;const Y=kt({},[...SC,...rp,...EC,..._d]);let V=Object.seal(bC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),fe=null,le=null,Oe=!0,je=!0,Ze=!1,Pt=!0,Lt=!1,bo=!0,he=!1,tt=!1,it=!1,Xe=!1,pt=!1,At=!1,pe=!0,Ue=!1,_t=!0,Nt=!1,Kt={},vn=null;const cr=kt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Fn=null;const Fo=kt({},["audio","video","img","source","image","track"]);let rn=null;const _a=kt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_s="http://www.w3.org/1998/Math/MathML",Br="http://www.w3.org/2000/svg",jo="http://www.w3.org/1999/xhtml";let Ns=jo,Jr=!1,Dr=null;const Cu=kt({},[_s,Br,jo],ep);let ao=kt({},["mi","mo","mn","ms","mtext"]),Zr=kt({},["annotation-xml"]);const Na=kt({},["title","style","font","a","script"]);let As=null;const QB=["application/xhtml+xml","text/html"];let jn=null,_i=null;const JB=o.createElement("form"),$E=function($){return $ instanceof RegExp||$ instanceof Function},Bg=function(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!_i||_i!==$){if($&&typeof $=="object"||($={}),$=va($),As=QB.indexOf($.PARSER_MEDIA_TYPE)===-1?"text/html":$.PARSER_MEDIA_TYPE,jn=As==="application/xhtml+xml"?ep:kd,we=ir($,"ALLOWED_TAGS")?kt({},$.ALLOWED_TAGS,jn):j,U=ir($,"ALLOWED_ATTR")?kt({},$.ALLOWED_ATTR,jn):Y,Dr=ir($,"ALLOWED_NAMESPACES")?kt({},$.ALLOWED_NAMESPACES,ep):Cu,rn=ir($,"ADD_URI_SAFE_ATTR")?kt(va(_a),$.ADD_URI_SAFE_ATTR,jn):_a,Fn=ir($,"ADD_DATA_URI_TAGS")?kt(va(Fo),$.ADD_DATA_URI_TAGS,jn):Fo,vn=ir($,"FORBID_CONTENTS")?kt({},$.FORBID_CONTENTS,jn):cr,fe=ir($,"FORBID_TAGS")?kt({},$.FORBID_TAGS,jn):{},le=ir($,"FORBID_ATTR")?kt({},$.FORBID_ATTR,jn):{},Kt=!!ir($,"USE_PROFILES")&&$.USE_PROFILES,Oe=$.ALLOW_ARIA_ATTR!==!1,je=$.ALLOW_DATA_ATTR!==!1,Ze=$.ALLOW_UNKNOWN_PROTOCOLS||!1,Pt=$.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Lt=$.SAFE_FOR_TEMPLATES||!1,bo=$.SAFE_FOR_XML!==!1,he=$.WHOLE_DOCUMENT||!1,Xe=$.RETURN_DOM||!1,pt=$.RETURN_DOM_FRAGMENT||!1,At=$.RETURN_TRUSTED_TYPE||!1,it=$.FORCE_BODY||!1,pe=$.SANITIZE_DOM!==!1,Ue=$.SANITIZE_NAMED_PROPS||!1,_t=$.KEEP_CONTENT!==!1,Nt=$.IN_PLACE||!1,me=$.ALLOWED_URI_REGEXP||kC,Ns=$.NAMESPACE||jo,ao=$.MATHML_TEXT_INTEGRATION_POINTS||ao,Zr=$.HTML_INTEGRATION_POINTS||Zr,V=$.CUSTOM_ELEMENT_HANDLING||{},$.CUSTOM_ELEMENT_HANDLING&&$E($.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$.CUSTOM_ELEMENT_HANDLING&&$E($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$.CUSTOM_ELEMENT_HANDLING&&typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(V.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Lt&&(je=!1),pt&&(Xe=!0),Kt&&(we=kt({},xC),U=[],Kt.html===!0&&(kt(we,wC),kt(U,SC)),Kt.svg===!0&&(kt(we,tp),kt(U,rp),kt(U,_d)),Kt.svgFilters===!0&&(kt(we,np),kt(U,rp),kt(U,_d)),Kt.mathMl===!0&&(kt(we,op),kt(U,EC),kt(U,_d))),$.ADD_TAGS&&(we===j&&(we=va(we)),kt(we,$.ADD_TAGS,jn)),$.ADD_ATTR&&(U===Y&&(U=va(U)),kt(U,$.ADD_ATTR,jn)),$.ADD_URI_SAFE_ATTR&&kt(rn,$.ADD_URI_SAFE_ATTR,jn),$.FORBID_CONTENTS&&(vn===cr&&(vn=va(vn)),kt(vn,$.FORBID_CONTENTS,jn)),_t&&(we["#text"]=!0),he&&kt(we,["html","head","body"]),we.table&&(kt(we,["tbody"]),delete fe.tbody),$.TRUSTED_TYPES_POLICY){if(typeof $.TRUSTED_TYPES_POLICY.createHTML!="function")throw Fl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Fl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=$.TRUSTED_TYPES_POLICY,B=A.createHTML("")}else A===void 0&&(A=function(nt,ze){if(typeof nt!="object"||typeof nt.createPolicy!="function")return null;let Tt=null;const Mt="data-tt-policy-suffix";ze&&ze.hasAttribute(Mt)&&(Tt=ze.getAttribute(Mt));const wt="dompurify"+(Tt?"#"+Tt:"");try{return nt.createPolicy(wt,{createHTML:En=>En,createScriptURL:En=>En})}catch{return console.warn("TrustedTypes policy "+wt+" could not be created."),null}}(g,s)),A!==null&&typeof B=="string"&&(B=A.createHTML(""));oo&&oo($),_i=$}},WE=kt({},[...tp,...np,...nT]),VE=kt({},[...op,...oT]),Pr=function($){Ml(n.removed,{element:$});try{T($).removeChild($)}catch{w($)}},sc=function($,nt){try{Ml(n.removed,{attribute:nt.getAttributeNode($),from:nt})}catch{Ml(n.removed,{attribute:null,from:nt})}if(nt.removeAttribute($),$==="is")if(Xe||pt)try{Pr(nt)}catch{}else try{nt.setAttribute($,"")}catch{}},KE=function($){let nt=null,ze=null;if(it)$="<remove></remove>"+$;else{const wt=yC($,/^[\r\n\t ]+/);ze=wt&&wt[0]}As==="application/xhtml+xml"&&Ns===jo&&($='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>");const Tt=A?A.createHTML($):$;if(Ns===jo)try{nt=new b().parseFromString(Tt,As)}catch{}if(!nt||!nt.documentElement){nt=M.createDocument(Ns,"template",null);try{nt.documentElement.innerHTML=Jr?B:Tt}catch{}}const Mt=nt.body||nt.documentElement;return $&&ze&&Mt.insertBefore(o.createTextNode(ze),Mt.childNodes[0]||null),Ns===jo?W.call(nt,he?"html":"body")[0]:he?nt.documentElement:Mt},XE=function($){return P.call($.ownerDocument||$,$,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Dg=function($){return $ instanceof m&&(typeof $.nodeName!="string"||typeof $.textContent!="string"||typeof $.removeChild!="function"||!($.attributes instanceof f)||typeof $.removeAttribute!="function"||typeof $.setAttribute!="function"||typeof $.namespaceURI!="string"||typeof $.insertBefore!="function"||typeof $.hasChildNodes!="function")},YE=function($){return typeof l=="function"&&$ instanceof l};function es($,nt,ze){Ed($,Tt=>{Tt.call(n,nt,ze,_i)})}const GE=function($){let nt=null;if(es(L.beforeSanitizeElements,$,null),Dg($))return Pr($),!0;const ze=jn($.nodeName);if(es(L.uponSanitizeElement,$,{tagName:ze,allowedTags:we}),$.hasChildNodes()&&!YE($.firstElementChild)&&ro(/<[/\w]/g,$.innerHTML)&&ro(/<[/\w]/g,$.textContent)||$.nodeType===7||bo&&$.nodeType===8&&ro(/<[/\w]/g,$.data))return Pr($),!0;if(!we[ze]||fe[ze]){if(!fe[ze]&&JE(ze)&&(V.tagNameCheck instanceof RegExp&&ro(V.tagNameCheck,ze)||V.tagNameCheck instanceof Function&&V.tagNameCheck(ze)))return!1;if(_t&&!vn[ze]){const Tt=T($)||$.parentNode,Mt=k($)||$.childNodes;if(Mt&&Tt)for(let wt=Mt.length-1;wt>=0;--wt){const En=h(Mt[wt],!0);En.__removalCount=($.__removalCount||0)+1,Tt.insertBefore(En,E($))}}return Pr($),!0}return $ instanceof c&&!function(Tt){let Mt=T(Tt);Mt&&Mt.tagName||(Mt={namespaceURI:Ns,tagName:"template"});const wt=kd(Tt.tagName),En=kd(Mt.tagName);return!!Dr[Tt.namespaceURI]&&(Tt.namespaceURI===Br?Mt.namespaceURI===jo?wt==="svg":Mt.namespaceURI===_s?wt==="svg"&&(En==="annotation-xml"||ao[En]):!!WE[wt]:Tt.namespaceURI===_s?Mt.namespaceURI===jo?wt==="math":Mt.namespaceURI===Br?wt==="math"&&Zr[En]:!!VE[wt]:Tt.namespaceURI===jo?!(Mt.namespaceURI===Br&&!Zr[En])&&!(Mt.namespaceURI===_s&&!ao[En])&&!VE[wt]&&(Na[wt]||!WE[wt]):!(As!=="application/xhtml+xml"||!Dr[Tt.namespaceURI]))}($)?(Pr($),!0):ze!=="noscript"&&ze!=="noembed"&&ze!=="noframes"||!ro(/<\/no(script|embed|frames)/i,$.innerHTML)?(Lt&&$.nodeType===3&&(nt=$.textContent,Ed([F,X,oe],Tt=>{nt=Il(nt,Tt," ")}),$.textContent!==nt&&(Ml(n.removed,{element:$.cloneNode()}),$.textContent=nt)),es(L.afterSanitizeElements,$,null),!1):(Pr($),!0)},QE=function($,nt,ze){if(pe&&(nt==="id"||nt==="name")&&(ze in o||ze in JB))return!1;if(!(je&&!le[nt]&&ro(te,nt))){if(!(Oe&&ro(Ce,nt))){if(!U[nt]||le[nt]){if(!(JE($)&&(V.tagNameCheck instanceof RegExp&&ro(V.tagNameCheck,$)||V.tagNameCheck instanceof Function&&V.tagNameCheck($))&&(V.attributeNameCheck instanceof RegExp&&ro(V.attributeNameCheck,nt)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(nt))||nt==="is"&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&ro(V.tagNameCheck,ze)||V.tagNameCheck instanceof Function&&V.tagNameCheck(ze))))return!1}else if(!rn[nt]){if(!ro(me,Il(ze,Re,""))){if((nt!=="src"&&nt!=="xlink:href"&&nt!=="href"||$==="script"||ZA(ze,"data:")!==0||!Fn[$])&&!(Ze&&!ro(Ne,Il(ze,Re,"")))){if(ze)return!1}}}}}return!0},JE=function($){return $!=="annotation-xml"&&yC($,Pe)},ZE=function($){es(L.beforeSanitizeAttributes,$,null);const{attributes:nt}=$;if(!nt||Dg($))return;const ze={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let Tt=nt.length;for(;Tt--;){const Mt=nt[Tt],{name:wt,namespaceURI:En,value:ts}=Mt,Lr=jn(wt);let Xn=wt==="value"?ts:eT(ts);const eD=Xn;if(ze.attrName=Lr,ze.attrValue=Xn,ze.keepAttr=!0,ze.forceKeepAttr=void 0,es(L.uponSanitizeAttribute,$,ze),Xn=ze.attrValue,!Ue||Lr!=="id"&&Lr!=="name"||(sc(wt,$),Xn="user-content-"+Xn),bo&&ro(/((--!?|])>)|<\/(style|title)/i,Xn)){sc(wt,$);continue}if(ze.forceKeepAttr)continue;if(!ze.keepAttr){sc(wt,$);continue}if(!Pt&&ro(/\/>/i,Xn)){sc(wt,$);continue}Lt&&Ed([F,X,oe],tk=>{Xn=Il(Xn,tk," ")});const ek=jn($.nodeName);if(QE(ek,Lr,Xn)){if(A&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!En)switch(g.getAttributeType(ek,Lr)){case"TrustedHTML":Xn=A.createHTML(Xn);break;case"TrustedScriptURL":Xn=A.createScriptURL(Xn)}if(Xn!==eD)try{En?$.setAttributeNS(En,wt,Xn):$.setAttribute(wt,Xn),Dg($)?Pr($):vC(n.removed)}catch{}}else sc(wt,$)}es(L.afterSanitizeAttributes,$,null)},ZB=function $(nt){let ze=null;const Tt=XE(nt);for(es(L.beforeSanitizeShadowDOM,nt,null);ze=Tt.nextNode();)es(L.uponSanitizeShadowNode,ze,null),GE(ze),ZE(ze),ze.content instanceof a&&$(ze.content);es(L.afterSanitizeShadowDOM,nt,null)};return n.sanitize=function($){let nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ze=null,Tt=null,Mt=null,wt=null;if(Jr=!$,Jr&&($="<!-->"),typeof $!="string"&&!YE($)){if(typeof $.toString!="function")throw Fl("toString is not a function");if(typeof($=$.toString())!="string")throw Fl("dirty is not a string, aborting")}if(!n.isSupported)return $;if(tt||Bg(nt),n.removed=[],typeof $=="string"&&(Nt=!1),Nt){if($.nodeName){const Lr=jn($.nodeName);if(!we[Lr]||fe[Lr])throw Fl("root node is forbidden and cannot be sanitized in-place")}}else if($ instanceof l)ze=KE("<!---->"),Tt=ze.ownerDocument.importNode($,!0),Tt.nodeType===1&&Tt.nodeName==="BODY"||Tt.nodeName==="HTML"?ze=Tt:ze.appendChild(Tt);else{if(!Xe&&!Lt&&!he&&$.indexOf("<")===-1)return A&&At?A.createHTML($):$;if(ze=KE($),!ze)return Xe?null:At?B:""}ze&&it&&Pr(ze.firstChild);const En=XE(Nt?$:ze);for(;Mt=En.nextNode();)GE(Mt),ZE(Mt),Mt.content instanceof a&&ZB(Mt.content);if(Nt)return $;if(Xe){if(pt)for(wt=z.call(ze.ownerDocument);ze.firstChild;)wt.appendChild(ze.firstChild);else wt=ze;return(U.shadowroot||U.shadowrootmode)&&(wt=D.call(r,wt,!0)),wt}let ts=he?ze.outerHTML:ze.innerHTML;return he&&we["!doctype"]&&ze.ownerDocument&&ze.ownerDocument.doctype&&ze.ownerDocument.doctype.name&&ro(_C,ze.ownerDocument.doctype.name)&&(ts="<!DOCTYPE "+ze.ownerDocument.doctype.name+`>
`+ts),Lt&&Ed([F,X,oe],Lr=>{ts=Il(ts,Lr," ")}),A&&At?A.createHTML(ts):ts},n.setConfig=function(){Bg(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),tt=!0},n.clearConfig=function(){_i=null,tt=!1},n.isValidAttribute=function($,nt,ze){_i||Bg({});const Tt=jn($),Mt=jn(nt);return QE(Tt,Mt,ze)},n.addHook=function($,nt){typeof nt=="function"&&Ml(L[$],nt)},n.removeHook=function($,nt){if(nt!==void 0){const ze=QA(L[$],nt);return ze===-1?void 0:JA(L[$],ze,1)[0]}return vC(L[$])},n.removeHooks=function($){L[$]=[]},n.removeAllHooks=function(){L={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();const AC=v.each,mT=v.trim,pT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],gT={ftp:21,http:80,https:443,mailto:25},hT=["img","video"],TC=(e,t,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?((r,s)=>ie(r)?!r:!ie(s)||!Te(hT,s))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))};class Xo{static parseDataUri(t){let n;const o=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(t,n,o={}){if(o.allow_script_urls)return!0;{const r=ea.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!TC(o,r,n)}}static getDocumentBaseUrl(t){var n;let o;return o=t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?(n=t.href)!==null&&n!==void 0?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(t,n={}){this.path="",this.directory="",t=mT(t),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(r.source=t);const s=t.indexOf("//")===0;if(t.indexOf("/")!==0||s||(t=(o&&o.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const i=o?o.path:new Xo(document.location.href).directory;if(o?.protocol==="")t="//mce_host"+r.toAbsPath(i,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);a&&AC(pT,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[i]=c}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||r.host!=="mce_host"||(r.port=o.port),r.host&&r.host!=="mce_host"||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new Xo(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(t,n){const o=new Xo(t,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?gT[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let o,r,s=0,a="";const i=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length){for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}}if(i.length<l.length){for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}}if(s===1)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(t,n){let o=0;const r=/\/$/.test(n)?"/":"",s=t.split("/"),a=n.split("/"),i=[];AC(s,f=>{f&&i.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)a[f].length!==0&&a[f]!=="."&&(a[f]!==".."?o>0?o--:l.push(a[f]):o++);const c=i.length-o;let d;return d=c<=0?Go(l).join("/"):i.slice(0,c).join("/")+"/"+Go(l).join("/"),d.indexOf("/")!==0&&(d="/"+d),r&&d.lastIndexOf("/")!==d.length-1&&(d+=r),d}getURI(t=!1){let n;return this.source&&!t||(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const bT=v.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),ap="data-mce-type";let RC=0;const OC=(e,t,n,o,r)=>{var s,a,i,l;const c=t.validate,d=n.getSpecialElements();e.nodeType===8&&!t.allow_conditional_comments&&/^\[if/i.test((s=e.nodeValue)!==null&&s!==void 0?s:"")&&(e.nodeValue=" "+e.nodeValue);const f=(a=r?.tagName)!==null&&a!==void 0?a:e.nodeName.toLowerCase();if(o!=="html"&&n.isValid(o))return void(ie(r)&&(r.allowedTags[f]=!0));if(e.nodeType!==1||f==="body")return;const m=S(e),b=Ct(m,ap),g=Fe(m,"data-mce-bogus");if(!b&&Ae(g))return void(g==="all"?Be(m):Vt(m));const y=n.getElementRule(f);if(!c||y){if(ie(r)&&(r.allowedTags[f]=!0),c&&y&&!b){if(Q((i=y.attributesForced)!==null&&i!==void 0?i:[],h=>{Ee(m,h.name,h.value==="{$uid}"?"mce_"+RC++:h.value)}),Q((l=y.attributesDefault)!==null&&l!==void 0?l:[],h=>{Ct(m,h.name)||Ee(m,h.name,h.value==="{$uid}"?"mce_"+RC++:h.value)}),y.attributesRequired&&!Et(y.attributesRequired,h=>Ct(m,h))||y.removeEmptyAttrs&&(h=>{const w=h.dom.attributes;return w==null||w.length===0})(m))return void Vt(m);y.outputName&&y.outputName!==f&&((h,w)=>{const E=((T,A)=>{const B=O(A),M=ft(T);return Me(B,M),B})(h,w);qo(h,E);const k=He(h);ne(E,k),Be(h)})(m,y.outputName)}}else Ie(d,f)?Be(m):Vt(m)},BC=(e,t,n,o,r,s)=>n!=="html"&&!Qs(o)||!(r in bT&&TC(e,s,o))&&(!e.validate||t.isValid(o,r)||$t(r,"data-")||$t(r,"aria-")),DC=(e,t)=>e.hasAttribute(ap)&&(t==="id"||t==="class"||t==="style"),PC=(e,t)=>e in t.getBoolAttrs(),vT=(e,t,n,o)=>{const{attributes:r}=e;for(let s=r.length-1;s>=0;s--){const a=r[s],i=a.name,l=a.value;BC(t,n,o,e.tagName.toLowerCase(),i,l)||DC(e,i)?PC(i,n)&&e.setAttribute(i,i):e.removeAttribute(i)}},yT=(e,t,n)=>{const o=sp();return o.addHook("uponSanitizeElement",(r,s)=>{OC(r,e,t,n.track(r),s)}),o.addHook("uponSanitizeAttribute",(r,s)=>{((a,i,l,c,d)=>{const f=a.tagName.toLowerCase(),{attrName:m,attrValue:b}=d;d.keepAttr=BC(i,l,c,f,m,b),d.keepAttr?(d.allowedAttributes[m]=!0,PC(m,l)&&(d.attrValue=m),i.allow_svg_data_urls&&$t(b,"data:image/svg+xml")&&(d.forceKeepAttr=!0)):DC(a,m)&&(d.forceKeepAttr=!0)})(r,e,t,n.current(),s)}),o},CT=(e,t)=>{const n=sp(),o=t.allow_mathml_annotation_encodings,r=re(o)&&o.length>0;n.addHook("uponSanitizeElement",(s,a)=>{var i;const l=(i=a.tagName)!==null&&i!==void 0?i:s.nodeName.toLowerCase();((c,d)=>r&&d==="semantics"?_.some(!0):d==="annotation"?_.some(xe(c)&&(f=>{const m=f.getAttribute("encoding");return r&&Ae(m)&&Te(o,m)})(c)):re(t.extended_mathml_elements)&&t.extended_mathml_elements.includes(d)?_.from(!0):_.none())(s,l).each(c=>{a.allowedTags[l]=c,!c&&t.sanitize&&xe(s)&&s.remove()})}),n.addHook("uponSanitizeAttribute",(s,a)=>{re(t.extended_mathml_attributes)&&t.extended_mathml_attributes.includes(a.attrName)&&(a.forceKeepAttr=!0)}),n.sanitize(e,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})},wT=e=>t=>{const n=rh(t);if(n==="svg")(o=>{const r=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(a=>`xlink:${a}`),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:r};sp().sanitize(o,s)})(t);else{if(n!=="math")throw new Error("Not a namespace element");CT(t,e)}},LC=v.makeMap,MC=v.extend,IC=(e,t,n,o)=>{const r=e.name,s=r in n&&r!=="title"&&r!=="textarea"&&r!=="noscript",a=t.childNodes;for(let i=0,l=a.length;i<l;i++){const c=a[i],d=new Vn(c.nodeName.toLowerCase(),c.nodeType);if(xe(c)){const f=c.attributes;for(let m=0,b=f.length;m<b;m++){const g=f[m];d.attr(g.name,g.value)}Qs(d.name)&&(o(c),d.value=c.innerHTML)}else se(c)?(d.value=c.data,s&&(d.raw=!0)):(ds(c)||uk(c)||fk(c))&&(d.value=c.data);Qs(d.name)||IC(d,c,n,o),e.append(d)}},fi=(e={},t=us())=>{const n=lC(),o=lC(),r={validate:!0,root_name:"body",sanitize:!0,...e},s=new DOMParser,a=((y,h)=>{const w=(()=>{const E=wo(),k=()=>E.get().map(rh).getOr("html");return{track:T=>($u(T)?E.set(T):E.get().exists(A=>!A.contains(T))&&E.clear(),k()),current:k,reset:()=>{E.clear()}}})();if(y.sanitize){const E=yT(y,h,w);return{sanitizeHtmlElement:(T,A)=>{E.sanitize(T,((B,M)=>{const P={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1};return P.PARSER_MEDIA_TYPE=M,B.allow_script_urls?P.ALLOWED_URI_REGEXP=/.*/:B.allow_html_data_urls&&(P.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),P})(y,A)),E.removed=[],w.reset()},sanitizeNamespaceElement:wT(y)}}return{sanitizeHtmlElement:(E,k)=>{const T=document.createNodeIterator(E,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let A;for(;A=T.nextNode();){const B=w.track(A);OC(A,y,h,B),xe(A)&&vT(A,y,h,B)}w.reset()},sanitizeNamespaceElement:Se}})(r,t),i=n.addFilter,l=n.getFilters,c=n.removeFilter,d=o.addFilter,f=o.getFilters,m=o.removeFilter,b=(y,h)=>{const w=Ae(h.attr(ap)),E=h.type===1&&!Ie(y,h.name)&&!Gu(t,h)&&!Qs(h.name);return h.type===3||E&&!w},g={schema:t,addAttributeFilter:d,getAttributeFilters:f,removeAttributeFilter:m,addNodeFilter:i,getNodeFilters:l,removeNodeFilter:c,parse:(y,h={})=>{var w;const E=r.validate,k=(w=h.context)!==null&&w!==void 0?w:r.root_name,T=((F,X,oe="html")=>{const te=oe==="xhtml"?"application/xhtml+xml":"text/html",Ce=Ie(t.getSpecialElements(),X.toLowerCase()),Ne=Ce?`<${X}>${F}</${X}>`:F,Re=s.parseFromString(oe==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ne}</body></html>`:/^[\s]*<head/i.test(F)||/^[\s]*<html/i.test(F)||/^[\s]*<!DOCTYPE/i.test(F)?`<html>${Ne}</html>`:`<body>${Ne}</body>`,te).body;return a.sanitizeHtmlElement(Re,te),Ce?Re.firstChild:Re})(y,k,h.format);Vu(t,T);const A=new Vn(k,11);IC(A,T,t.getSpecialElements(),a.sanitizeNamespaceElement),T.innerHTML="";const[B,M]=((F,X,oe,te)=>{const Ce=oe.validate,Ne=X.getNonEmptyElements(),Re=X.getWhitespaceElements(),Pe=MC(LC("script,style,head,html,body,title,meta,param"),X.getBlockElements()),me=Eh(X),we=/[ \t\r\n]+/g,j=/^[ \t\r\n]+/,U=/[ \t\r\n]+$/,Y=le=>{let Oe=le.parent;for(;ie(Oe);){if(Oe.name in Re)return!0;Oe=Oe.parent}return!1},V=le=>le.name in Pe||Gu(X,le)||Qs(le.name)&&le.parent===F,fe=(le,Oe)=>{const je=Oe?le.prev:le.next;return!ie(je)&&!xt(le.parent)&&V(le.parent)&&(le.parent!==F||te.isRootContent===!0)};return[le=>{var Oe;if(le.type===3&&!Y(le)){let je=(Oe=le.value)!==null&&Oe!==void 0?Oe:"";je=je.replace(we," "),(((Ze,Pt)=>ie(Ze)&&(Pt(Ze)||Ze.name==="br"))(le.prev,V)||fe(le,!0))&&(je=je.replace(j,"")),je.length===0||je===" "&&le.prev&&le.prev.type===8&&le.next&&le.next.type===8?le.remove():le.value=je}},le=>{var Oe;if(le.type===1){const je=X.getElementRule(le.name);if(Ce&&je){const Ze=Bl(X,Ne,Re,le);je.paddInEmptyBlock&&Ze&&(Pt=>{let Lt=Pt;for(;ie(Lt);){if(Lt.name in me)return Bl(X,Ne,Re,Lt);Lt=Lt.parent}return!1})(le)?Om(oe,te,V,le):je.removeEmpty&&Ze?V(le)?le.remove():le.unwrap():je.paddEmpty&&(Ze||(Pt=>{var Lt;return vy(Pt,"#text")&&((Lt=Pt?.firstChild)===null||Lt===void 0?void 0:Lt.value)===zt})(le))&&Om(oe,te,V,le)}}else if(le.type===3&&!Y(le)){let je=(Oe=le.value)!==null&&Oe!==void 0?Oe:"";(le.next&&V(le.next)||fe(le,!1))&&(je=je.replace(U,"")),je.length===0?le.remove():le.value=je}}]})(A,t,r,h),P=[],z=E?F=>((X,oe)=>{Pm(t,X)&&oe.push(X)})(F,P):Se,W={nodes:{},attributes:{}},D=F=>gy(l(),f(),F,W);if(((F,X,oe)=>{const te=[];for(let Ce=F,Ne=Ce;Ce;Ne=Ce,Ce=Ce.walk()){const Re=Ce;Q(X,Pe=>Pe(Re)),xt(Re.parent)&&Re!==F?Ce=Ne:te.push(Re)}for(let Ce=te.length-1;Ce>=0;Ce--){const Ne=te[Ce];Q(oe,Re=>Re(Ne))}})(A,[B,D],[M,z]),P.reverse(),E&&P.length>0)if(h.context){const{pass:F,fail:X}=zo(P,oe=>oe.parent===A);Dm(X,t,A,D),h.invalid=F.length>0}else Dm(P,t,A,D);const L=((F,X)=>{var oe;const te=(oe=X.forced_root_block)!==null&&oe!==void 0?oe:F.forced_root_block;return te===!1?"":te===!0?"p":te})(r,h);return L&&(A.name==="body"||h.isRootContent)&&((F,X)=>{const oe=MC(LC("script,style,head,html,body,title,meta,param"),t.getBlockElements()),te=/^[ \t\r\n]+/,Ce=/[ \t\r\n]+$/;let Ne=F.firstChild,Re=null;const Pe=me=>{var we,j;me&&(Ne=me.firstChild,Ne&&Ne.type===3&&(Ne.value=(we=Ne.value)===null||we===void 0?void 0:we.replace(te,"")),Ne=me.lastChild,Ne&&Ne.type===3&&(Ne.value=(j=Ne.value)===null||j===void 0?void 0:j.replace(Ce,"")))};if(t.isValidChild(F.name,X.toLowerCase())){for(;Ne;){const me=Ne.next;b(oe,Ne)?(Re||(Re=new Vn(X,1),Re.attr(r.forced_root_block_attrs),F.insert(Re,Ne)),Re.append(Ne)):(Pe(Re),Re=null),Ne=me}Pe(Re)}})(A,L),h.invalid||hy(W,h),A}};return((y,h)=>{var w,E;const k=y.schema;y.addAttributeFilter("href",M=>{let P=M.length;const z=W=>{const D=W?v.trim(W):"";return/\b(noopener)\b/g.test(D)?D:(L=>L.split(" ").filter(F=>F.length>0).concat(["noopener"]).sort().join(" "))(D)};if(!h.allow_unsafe_link_target)for(;P--;){const W=M[P];W.name==="a"&&W.attr("target")==="_blank"&&W.attr("rel",z(W.attr("rel")))}}),h.allow_html_in_named_anchor||y.addAttributeFilter("id,name",M=>{let P,z,W,D,L=M.length;for(;L--;)if(D=M[L],D.name==="a"&&D.firstChild&&!D.attr("href"))for(W=D.parent,P=D.lastChild;P&&W;)z=P.prev,W.insert(P,D),P=z}),h.fix_list_elements&&y.addNodeFilter("ul,ol",M=>{let P,z,W=M.length;for(;W--;)if(P=M[W],z=P.parent,z&&(z.name==="ul"||z.name==="ol"))if(P.prev&&P.prev.name==="li")P.prev.append(P);else{const D=new Vn("li",1);D.attr("style","list-style-type: none"),P.wrap(D)}});const T=k.getValidClasses();h.validate&&T&&y.addAttributeFilter("class",M=>{var P;let z=M.length;for(;z--;){const W=M[z],D=(P=W.attr("class"))!==null&&P!==void 0?P:"",L=v.explode(D," ");let F="";for(let X=0;X<L.length;X++){const oe=L[X];let te=!1,Ce=T["*"];Ce&&Ce[oe]&&(te=!0),Ce=T[W.name],!te&&Ce&&Ce[oe]&&(te=!0),te&&(F&&(F+=" "),F+=oe)}F.length||(F=null),W.attr("class",F)}}),((M,P)=>{const{blob_cache:z}=P;if(z){const W=D=>{const L=D.attr("src");(F=>F.attr("src")===ut.transparentSrc||ie(F.attr("data-mce-placeholder")))(D)||(F=>ie(F.attr("data-mce-bogus")))(D)||xt(L)||mC(z,L,!0).each(F=>{D.attr("src",F.blobUri())})};M.addAttributeFilter("src",D=>Q(D,W))}})(y,h);const A=(w=h.sandbox_iframes)!==null&&w!==void 0&&w,B=pr((E=h.sandbox_iframes_exclusions)!==null&&E!==void 0?E:[]);h.convert_unsafe_embeds&&y.addNodeFilter("object,embed",M=>Q(M,P=>{P.replace((({type:z,src:W,width:D,height:L}={},F,X)=>{const oe=(Ce=>It(Ce)?"iframe":Qm(Ce,"image")?"img":Qm(Ce,"video")?"video":Qm(Ce,"audio")?"audio":"iframe")(z),te=new Vn(oe,1);return te.attr(oe==="audio"?{src:W}:{src:W,width:D,height:L}),oe!=="audio"&&oe!=="video"||te.attr("controls",""),oe==="iframe"&&F&&pC(te,X),te})({type:P.attr("type"),src:P.name==="object"?P.attr("data"):P.attr("src"),width:P.attr("width"),height:P.attr("height")},A,B))})),A&&y.addNodeFilter("iframe",M=>Q(M,P=>pC(P,B)))})(g,r),((y,h,w)=>{h.inline_styles&&$A(y,h,w)})(g,r,t),g},FC=(e,t,n)=>{const o=(s=>Cd(s)?vs({validate:!1}).serialize(s):s)(e),r=t(o);if(r.isDefaultPrevented())return r;if(Cd(e)){if(r.content!==o){const s=fi({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:e.name});return{...r,content:s}}return{...r,content:e}}return r},jC=e=>({sanitize:U0(e),sandbox_iframes:q0(e),sandbox_iframes_exclusions:Rf(e)}),zC=(e,t)=>{if(t.no_events)return ln.value(t);{const n=((o,r)=>o.dispatch("BeforeGetContent",r))(e,t);return n.isDefaultPrevented()?ln.error(x0(e,{content:"",...n}).content):ln.value(n)}},UC=(e,t,n)=>n.no_events?t:FC(t,r=>x0(e,{...n,content:r}),jC(e)).content,ip=(e,t)=>{if(t.no_events)return ln.value(t);{const n=FC(t.content,o=>((r,s)=>r.dispatch("BeforeSetContent",s))(e,{...t,content:o}),jC(e));return n.isDefaultPrevented()?(w0(e,n),ln.error(void 0)):ln.value(n)}},lp=(e,t,n)=>{n.no_events||w0(e,{...n,content:t})},cp=(e,t,n)=>({element:e,width:t,rows:n}),HC=(e,t)=>({element:e,cells:t}),xT=(e,t)=>({x:e,y:t}),qC=(e,t)=>De(e,t).bind(Is).getOr(1),ST=(e,t,n)=>{const o=e.rows;return!!(o[n]?o[n].cells:[])[t]},$C=e=>gn(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),WC=(e,t)=>{const n=e.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(_e(r[s],t))return _.some(xT(s,o))}return _.none()},VC=(e,t,n,o,r)=>{const s=[],a=e.rows;for(let i=n;i<=r;i++){const l=a[i].cells,c=t<o?l.slice(t,o+1):l.slice(o,t+1);s.push(HC(a[i].element,c))}return s},ET=e=>((t,n)=>{const o=Xt(t.element),r=O("tbody");return ne(r,n),q(o,r),o})(e,(t=>ot(t.rows,n=>{const o=ot(n.cells,s=>{const a=qn(s);return Ge(a,"colspan"),Ge(a,"rowspan"),a}),r=Xt(n.element);return ne(r,o),r}))(e)),kT=(e,t,n)=>{const o=S(t.commonAncestorContainer),r=Kr(o,e),s=Ve(r,l=>n.isWrapper(st(l))),a=((l,c)=>Qt(l,d=>st(d)==="li"&&Hf(d,c)).fold(ue([]),d=>(f=>Qt(f,m=>st(m)==="ul"||st(m)==="ol"))(l).map(f=>{const m=O(st(f)),b=br(Nu(f),(g,y)=>$t(y,"list-style"));return Xs(m,b),[O("li"),m]}).getOr([])))(r,t),i=s.concat(a.length?a:(l=>Ga(l)?Hn(l).filter(uf).fold(ue([]),c=>[l,c]):uf(l)?[l]:[])(o));return ot(i,Xt)},KC=()=>Ru([]),_T=(e,t)=>((n,o)=>Gi(o,"table",ye(_e,n)))(e,t[0]).bind(n=>{const o=t[0],r=t[t.length-1],s=(a=>{const i=cp(Xt(a),0,[]);return Q(Pn(a,"tr"),(l,c)=>{Q(Pn(l,"td,th"),(d,f)=>{((m,b,g,y,h)=>{const w=qC(h,"rowspan"),E=qC(h,"colspan"),k=m.rows;for(let T=g;T<g+w;T++){k[T]||(k[T]=HC(qn(y),[]));for(let A=b;A<b+E;A++)k[T].cells[A]=T===g&&A===b?h:Xt(h)}})(i,((m,b,g)=>{for(;ST(m,b,g);)b++;return b})(i,f,c),c,l,d)})}),cp(i.element,$C(i.rows),i.rows)})(n);return((a,i,l)=>WC(a,i).bind(c=>WC(a,l).map(d=>((f,m,b)=>{const g=m.x,y=m.y,h=b.x,w=b.y,E=y<w?VC(f,g,y,h,w):VC(f,g,w,h,y);return cp(f.element,$C(E),E)})(a,c,d))))(s,o,r).map(a=>Ru([ET(a)]))}).getOrThunk(KC),NT=(e,t,n)=>{const o=vb(t,e);return o.length>0?_T(e,o):((r,s,a)=>s.length>0&&s[0].collapsed?KC():((i,l,c)=>((d,f)=>{const m=gn(f,(b,g)=>(q(g,b),g),d);return f.length>0?Ru([m]):m})(S(l.cloneContents()),kT(i,l,c)))(r,s[0],a))(e,t,n)},Nd=(e,t)=>t>=0&&t<e.length&&da(e.charAt(t)),XC=e=>go(e.innerText),YC=e=>xe(e)?e.outerHTML:se(e)?ea.encodeRaw(e.data,!1):ds(e)?"<!--"+e.data+"-->":"",AT=(e,t)=>(((n,o)=>{let r=0;Q(n,s=>{s[0]===0?r++:s[0]===1?(((a,i,l)=>{const c=(d=>{let f;const m=document.createElement("div"),b=document.createDocumentFragment();for(d&&(m.innerHTML=d);f=m.firstChild;)b.appendChild(f);return b})(i);if(a.hasChildNodes()&&l<a.childNodes.length){const d=a.childNodes[l];a.insertBefore(c,d)}else a.appendChild(c)})(o,s[1],r),r++):s[0]===2&&((a,i)=>{if(a.hasChildNodes()&&i<a.childNodes.length){const l=a.childNodes[i];a.removeChild(l)}})(o,r)})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(f,m,b,g,y)=>{const h=c(f,m,b,g);if(h===null||h.start===m&&h.diag===m-g||h.end===f&&h.diag===f-b){let w=f,E=b;for(;w<m||E<g;)w<m&&E<g&&n[w]===o[E]?(y.push([0,n[w]]),++w,++E):m-f>g-b?(y.push([2,n[w]]),++w):(y.push([1,o[E]]),++E)}else{i(f,h.start,b,h.start-h.diag,y);for(let w=h.start;w<h.end;++w)y.push([0,n[w]]);i(h.end,m,h.end-h.diag,g,y)}},l=(f,m,b,g)=>{let y=f;for(;y-m<g&&y<b&&n[y]===o[y-m];)++y;return((h,w,E)=>({start:h,end:w,diag:E}))(f,y,m)},c=(f,m,b,g)=>{const y=m-f,h=g-b;if(y===0||h===0)return null;const w=y-h,E=h+y,k=(E%2==0?E:E+1)/2;let T,A,B,M,P;for(s[1+k]=f,a[1+k]=m+1,T=0;T<=k;++T){for(A=-T;A<=T;A+=2){for(B=A+k,A===-T||A!==T&&s[B-1]<s[B+1]?s[B]=s[B+1]:s[B]=s[B-1]+1,M=s[B],P=M-f+b-A;M<m&&P<g&&n[M]===o[P];)s[B]=++M,++P;if(w%2!=0&&w-T<=A&&A<=w+T&&a[B-w]<=s[B])return l(a[B-w],A+f-b,m,g)}for(A=w-T;A<=w+T;A+=2){for(B=A+k-w,A===w-T||A!==w+T&&a[B+1]<=a[B-1]?a[B]=a[B+1]-1:a[B]=a[B-1],M=a[B]-1,P=M-f+b-A;M>=f&&P>=b&&n[M]===o[P];)a[B]=M--,P--;if(w%2==0&&-T<=A&&A<=T&&a[B]<=s[B+w])return l(a[B],A+f-b,m,g)}}return null},d=[];return i(0,n.length,0,o.length,d),d})(ot(hn(t.childNodes),YC),e),t),t),TT=xo(()=>document.implementation.createHTMLDocument("undo")),Ad=e=>{const t=e.serializer.getTempAttrs(),n=hv(e.getBody(),t);return(o=>o.querySelector("iframe")!==null)(n)?{type:"fragmented",fragments:Ve(ot(hn(n.childNodes),An(go,YC)),o=>o.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:go(n.innerHTML),bookmark:null,beforeBookmark:null}},dp=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?AT(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!ie(o)||!fb(o)||!o.isFakeCaret}),o&&(e.selection.moveToBookmark(o),e.selection.scrollIntoView())},up=e=>e.type==="fragmented"?e.fragments.join(""):e.content,GC=e=>{const t=O("body",TT());return Ft(t,up(e)),Q(Pn(t,"*[data-mce-bogus]"),Vt),po(t)},fp=(e,t)=>!(!e||!t)&&(!!((n,o)=>up(n)===up(o))(e,t)||((n,o)=>GC(n)===GC(o))(e,t)),mp=e=>e.get()===0,Td=(e,t,n)=>{mp(n)&&(e.typing=t)},QC=(e,t)=>{e.typing&&(Td(e,!1,t),e.add())},JC=e=>({init:{bindEvents:Se},undoManager:{beforeChange:(t,n)=>((o,r,s)=>{mp(r)&&s.set(Sf(o.selection))})(e,t,n),add:(t,n,o,r,s,a)=>((i,l,c,d,f,m,b)=>{const g=Ad(i),y=v.extend(m||{},g);if(!mp(d)||i.removed)return null;const h=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:y,lastLevel:h,originalEvent:b}).isDefaultPrevented()||h&&fp(h,y))return null;l.data[c.get()]&&f.get().each(k=>{l.data[c.get()].beforeBookmark=k});const w=F_(i);if(w&&l.data.length>w){for(let k=0;k<l.data.length-1;k++)l.data[k]=l.data[k+1];l.data.length--,c.set(l.data.length)}y.bookmark=Sf(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(y),c.set(l.data.length-1);const E={level:y,lastLevel:h,originalEvent:b};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",E),i.dispatch("change",E)):i.dispatch("AddUndo",E),y})(e,t,n,o,r,s,a),undo:(t,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,Td(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],dp(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(e,t,n,o),redo:(t,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],dp(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(e,t,n),clear:(t,n)=>((o,r,s)=>{r.data=[],s.set(0),r.typing=!1,o.dispatch("ClearUndos")})(e,t,n),reset:t=>(n=>{n.clear(),n.add()})(t),hasUndo:(t,n)=>((o,r,s)=>s.get()>0||r.typing&&r.data[0]&&!fp(Ad(o),r.data[0]))(e,t,n),hasRedo:(t,n)=>((o,r)=>r.get()<o.data.length-1&&!o.typing)(t,n),transact:(t,n,o)=>((r,s,a)=>(QC(r,s),r.beforeChange(),r.ignore(a),r.add()))(t,n,o),ignore:(t,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(t,n),extra:(t,n,o,r)=>((s,a,i,l,c)=>{if(a.transact(l)){const d=a.data[i.get()].bookmark,f=a.data[i.get()-1];dp(s,f,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=d)}})(e,t,n,o,r)},formatter:{match:(t,n,o,r)=>Um(e,t,n,o,r),matchAll:(t,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,c=>{for(let d=0;d<r.length;d++){const f=r[d];!i[f]&&Nr(o,c,f,s)&&(i[f]=!0,a.push(f))}},o.dom.getRoot()),a})(e,t,n),matchNode:(t,n,o,r)=>Nr(e,t,n,o,r),canApply:t=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const a=n.selection.getStart(),i=od(s,a);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!Bo(c))return!0;for(let d=i.length-1;d>=0;d--)if(s.is(i[d],c.selector))return!0}}return!1})(e,t),closest:t=>((n,o)=>{const r=s=>_e(s,S(n.getBody()));return _.from(n.selection.getStart(!0)).bind(s=>Mu(S(s),a=>Qn(o,i=>((l,c)=>Nr(n,l.dom,c)?_.some(c):_.none())(a,i)),r)).getOrNull()})(e,t),apply:(t,n,o)=>tC(e,t,n,o),remove:(t,n,o,r)=>Jy(e,t,n,o,r),toggle:(t,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!Um(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?tC(r,s,a,i):Jy(r,s,a,i))})(e,t,n,o),formatChanged:(t,n,o,r,s)=>((a,i,l,c,d,f)=>(((m,b,g,y,h,w)=>{const E=b.get();Q(g.split(","),k=>{const T=Bt(E,k).getOrThunk(()=>{const B={withSimilar:{state:en(!1),similar:!0,callbacks:[]},withoutSimilar:{state:en(!1),similar:!1,callbacks:[]},withVars:[]};return E[k]=B,B}),A=()=>{const B=sC(m);return rC(m,B,k,h,w).isSome()};if(It(w)){const B=h?T.withSimilar:T.withoutSimilar;B.callbacks.push(y),B.callbacks.length===1&&B.state.set(A())}else T.withVars.push({state:en(A()),similar:h,vars:w,callback:y})}),b.set(E)})(a,i,l,c,d,f),{unbind:()=>((m,b,g)=>{const y=m.get();Q(b.split(","),h=>Bt(y,h).each(w=>{y[h]={withSimilar:{...w.withSimilar,callbacks:Ve(w.withSimilar.callbacks,E=>E!==g)},withoutSimilar:{...w.withoutSimilar,callbacks:Ve(w.withoutSimilar.callbacks,E=>E!==g)},withVars:Ve(w.withVars,E=>E.callback!==g)}})),m.set(y)})(i,l,c)}))(e,t,n,o,r,s)},editor:{getContent:t=>((n,o)=>_.from(n.getBody()).fold(ue(o.format==="tree"?new Vn("body",11):""),r=>fA(n,o,r)))(e,t),setContent:(t,n)=>((o,r,s)=>_.from(o.getBody()).map(a=>Cd(r)?((i,l,c,d)=>{by(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const f=vs({validate:!1},i.schema).serialize(c),m=go(Ic(S(l))?f:v.trim(f));return Fm(i,m,d.no_selection),{content:c,html:m}})(o,a,r,s):((i,l,c,d)=>{if((c=go(c)).length===0||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';l.nodeName==="TABLE"?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const m=Mn(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),m.toLowerCase())?(c=f,c=i.dom.createHTML(m,pl(i),c)):c||(c=f),Fm(i,c,d.no_selection),{content:c,html:c}}{d.format!=="raw"&&(c=vs({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const f=Ic(S(l))?c:v.trim(c);return Fm(i,f,d.no_selection),{content:f,html:f}}})(o,a,r,s)).getOr({content:r,html:Cd(s.content)?"":s.content}))(e,t,n),insertContent:(t,n)=>jA(e,t,n),addVisual:t=>((n,o)=>{const r=n.dom,s=ie(o)?o:n.getBody();Q(r.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=$_(n),l=r.getAttrib(a,"border");l&&l!=="0"||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const c=r.getAttrib(a,"name")||a.id,d=F0(n);c&&n.hasVisual?r.addClass(a,d):r.removeClass(a,d)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((o,r,s={})=>{const a=((i,l)=>({...i,format:l,get:!0,selection:!0,getInner:!0}))(s,r);return zC(o,a).fold(mt,i=>{const l=((c,d)=>{if(d.format==="text")return(f=>_.from(f.selection.getRng()).map(m=>{var b;const g=_.from(f.dom.getParent(m.commonAncestorContainer,f.dom.isBlock)),y=f.getBody(),h=(A=>A.map(B=>B.nodeName).getOr("div").toLowerCase())(g),w=S(m.cloneContents());bv(w),vv(w);const E=f.dom.add(y,h,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},w.dom),k=XC(E),T=go((b=E.textContent)!==null&&b!==void 0?b:"");if(f.dom.remove(E),Nd(T,0)||Nd(T,T.length-1)){const A=g.getOr(y),B=XC(A),M=B.indexOf(k);return M===-1?k:(Nd(B,M-1)?" ":"")+k+(Nd(B,M+k.length)?" ":"")}return k}).getOr(""))(c);{const f=((m,b)=>{const g=m.selection.getRng(),y=m.dom.create("body"),h=m.selection.getSel(),w=dm(m,zf(h)),E=b.contextual?NT(S(m.getBody()),w,m.schema).dom:g.cloneContents();return E&&y.appendChild(E),m.selection.serializer.serialize(y,b)})(c,d);return d.format==="tree"?f:c.selection.isCollapsed()?"":f}})(o,i);return UC(o,l,i)})})(e,t,n)},autocompleter:{addDecoration:Se,removeDecoration:Se},raw:{getModel:()=>_.none()}}),Ar=e=>Ie(e.plugins,"rtc"),pp=e=>e.rtcInstance?e.rtcInstance:JC(e),tn=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},ZC=e=>tn(e).init.bindEvents(),e1=e=>e.dom.length===0?(Be(e),_.none()):_.some(e),t1=(e,t,n,o,r)=>{e.bind(s=>((o?ym:gd)(s.dom,o?s.dom.length:0,r),t.filter(vt).map(a=>((i,l,c,d,f)=>{const m=i.dom,b=l.dom,g=d?m.length:b.length;d?(Cm(m,b,f,!1,!d),c.setStart(b,g)):(Cm(b,m,f,!1,!d),c.setEnd(b,g))})(s,a,n,o,r)))).orThunk(()=>((a,i)=>a.filter(l=>kl.isBookmarkNode(l.dom)).bind(i?un:Ut))(t,o).or(t).filter(vt).map(a=>((i,l,c)=>{Hn(i).each(d=>{const f=i.dom;l&&Tl(d,G(f,0),c)?gd(f,0,c):!l&&Rl(d,G(f,f.length),c)&&ym(f,f.length,c)})})(a,o,r)))},n1=(e,t,n)=>{if(Ie(e,t)){const o=Ve(e[t],r=>r!==n);o.length===0?delete e[t]:e[t]=o}},o1=e=>!(!e||!e.ownerDocument)&&Ot(S(e.ownerDocument),S(e)),r1=(e,t,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((h,w)=>{let E,k;const T=(B,M)=>Qt(M,P=>h.is(P,B)),A=B=>h.getParents(B,void 0,h.getRoot());return{selectorChangedWithUnbind:(B,M)=>(E||(E={},k={},w.on("NodeChange",P=>{const z=P.element,W=A(z),D={};yt(E,(L,F)=>{T(F,W).each(X=>{k[F]||(Q(L,oe=>{oe(!0,{node:X,selector:F,parents:W})}),k[F]=L),D[F]=L})}),yt(k,(L,F)=>{D[F]||(delete k[F],Q(L,X=>{X(!1,{node:z,selector:F,parents:W})}))})})),E[B]||(E[B]=[]),E[B].push(M),T(B,A(w.selection.getStart())).each(()=>{k[B]=E[B]}),{unbind:()=>{n1(E,B,M),n1(k,B,M)}})}})(e,o),i=(h,w)=>((E,k,T={})=>{const A=((B,M)=>({format:"html",...B,set:!0,selection:!0,content:M}))(T,k);ip(E,A).each(B=>{const M=((z,W)=>{if(W.format!=="raw"){const D=z.selection.getRng(),L=z.dom.getParent(D.commonAncestorContainer,z.dom.isBlock),F=L?{context:L.nodeName.toLowerCase()}:{},X=z.parser.parse(W.content,{forced_root_block:!1,...F,...W});return vs({validate:!1},z.schema).serialize(X)}return W.content})(E,B),P=E.selection.getRng();((z,W,D)=>{const L=_.from(W.firstChild).map(S),F=_.from(W.lastChild).map(S);z.deleteContents(),z.insertNode(W);const X=L.bind(Ut).filter(vt).bind(e1),oe=F.bind(un).filter(vt).bind(e1);t1(X,L,z,!0,D),t1(oe,F,z,!1,D),z.collapse(!1)})(P,P.createContextualFragment(M),E.schema),E.selection.setRng(P),_l(E,P),lp(E,M,B)})})(o,h,w),l=h=>{const w=d();w.collapse(!!h),f(w)},c=()=>t.getSelection?t.getSelection():t.document.selection,d=()=>{let h;const w=(k,T,A)=>{try{return T.compareBoundaryPoints(k,A)}catch{return-1}},E=t.document;if(ie(o.bookmark)&&!di(o)){const k=Zf(o);if(k.isSome())return k.map(T=>dm(o,[T])[0]).getOr(E.createRange())}try{const k=c();k&&!Tc(k.anchorNode)&&(h=k.rangeCount>0?k.getRangeAt(0):E.createRange(),h=dm(o,[h])[0])}catch{}if(h||(h=E.createRange()),Zi(h.startContainer)&&h.collapsed){const k=e.getRoot();h.setStart(k,0),h.setEnd(k,0)}return r&&s&&(w(h.START_TO_START,h,r)===0&&w(h.END_TO_END,h,r)===0?h=s:(r=null,s=null)),h},f=(h,w)=>{if(!(k=>!!k&&o1(k.startContainer)&&o1(k.endContainer))(h))return;const E=c();if(h=o.dispatch("SetSelectionRange",{range:h,forward:w}).range,E){s=h;try{E.removeAllRanges(),E.addRange(h)}catch{}w===!1&&E.extend&&(E.collapse(h.endContainer,h.endOffset),E.extend(h.startContainer,h.startOffset)),r=E.rangeCount>0?E.getRangeAt(0):null}if(!h.collapsed&&h.startContainer===h.endContainer&&E?.setBaseAndExtent&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()){const k=h.startContainer.childNodes[h.startOffset];k&&k.nodeName==="IMG"&&(E.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),E.anchorNode===h.startContainer&&E.focusNode===h.endContainer||E.setBaseAndExtent(k,0,k,1))}o.dispatch("AfterSetSelectionRange",{range:h,forward:w})},m=()=>{const h=c(),w=h?.anchorNode,E=h?.focusNode;if(!h||!w||!E||Tc(w)||Tc(E))return!0;const k=e.createRng(),T=e.createRng();try{k.setStart(w,h.anchorOffset),k.collapse(!0),T.setStart(E,h.focusOffset),T.collapse(!0)}catch{return!0}return k.compareBoundaryPoints(k.START_TO_START,T)<=0},b={dom:e,win:t,serializer:n,editor:o,expand:(h={type:"word"})=>f(ma(e).expand(d(),h)),collapse:l,setCursorLocation:(h,w)=>{const E=e.createRng();ie(h)&&ie(w)?(E.setStart(h,w),E.setEnd(h,w),f(E),l(!1)):(qf(e,E,o.getBody(),!0),f(E))},getContent:h=>((w,E={})=>((k,T,A)=>tn(k).selection.getContent(T,A))(w,E.format?E.format:"html",E))(o,h),setContent:i,getBookmark:(h,w)=>g.getBookmark(h,w),moveToBookmark:h=>g.moveToBookmark(h),select:(h,w)=>(((E,k,T)=>_.from(k).bind(A=>_.from(A.parentNode).map(B=>{const M=E.nodeIndex(A),P=E.createRng();return P.setStart(B,M),P.setEnd(B,M+1),T&&(qf(E,P,A,!0),qf(E,P,A,!1)),P})))(e,h,w).each(f),h),isCollapsed:()=>{const h=d(),w=c();return!(!h||h.item)&&(h.compareEndPoints?h.compareEndPoints("StartToEnd",h)===0:!w||h.collapsed)},isEditable:()=>{if(o.mode.isReadOnly())return!1;const h=d(),w=o.getBody().querySelectorAll('[data-mce-selected="1"]');return w.length>0?to(w,E=>e.isEditable(E.parentElement)):sv(e,h)},isForward:m,setNode:h=>(i(e.getOuterHTML(h)),h),getNode:()=>((h,w)=>{if(!w)return h;let E=w.startContainer,k=w.endContainer;const T=w.startOffset,A=w.endOffset;let B=w.commonAncestorContainer;w.collapsed||(E===k&&A-T<2&&E.hasChildNodes()&&(B=E.childNodes[T]),se(E)&&se(k)&&(E=E.length===T?cv(E.nextSibling,!0):E.parentNode,k=A===0?cv(k.previousSibling,!1):k.parentNode,E&&E===k&&(B=E)));const M=se(B)?B.parentNode:B;return Cr(M)?M:h})(o.getBody(),d()),getSel:c,setRng:f,getRng:d,getStart:h=>iv(o.getBody(),d(),h),getEnd:h=>lv(o.getBody(),d(),h),getSelectedBlocks:(h,w)=>((E,k,T,A)=>{const B=[],M=E.getRoot(),P=E.getParent(T||iv(M,k,k.collapsed),E.isBlock),z=E.getParent(A||lv(M,k,k.collapsed),E.isBlock);if(P&&P!==M&&B.push(P),P&&z&&P!==z){let W;const D=new fn(P,M);for(;(W=D.next())&&W!==z;)E.isBlock(W)&&B.push(W)}return z&&P!==z&&z!==M&&B.push(z),B})(e,d(),h,w),normalize:()=>{const h=d(),w=c();if(!(zf(w).length>1)&&td(o)){const E=cd(e,h);return E.each(k=>{f(k,m())}),E.getOr(h)}return h},selectorChanged:(h,w)=>(a(h,w),b),selectorChangedWithUnbind:a,getScrollContainer:()=>{let h,w=e.getRoot();for(;w&&w.nodeName!=="BODY";){if(w.scrollHeight>w.clientHeight){h=w;break}w=w.parentNode}return h},scrollIntoView:(h,w)=>{ie(h)?((E,k,T)=>{(E.inline?eA:nA)(E,k,T)})(o,h,w):_l(o,d(),w)},placeCaretAt:(h,w)=>f(Xb(h,w,o.getDoc())),getBoundingClientRect:()=>{const h=d();return h.collapsed?G.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:()=>{t=r=s=null,y.destroy()}},g=kl(b),y=Kb(b,o);return b.bookmarkManager=g,b.controlSelection=y,b},RT=(e,t,n)=>{v.inArray(t,n)===-1&&(e.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),t.push(n))},OT=(e,t)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},r=t&&t.dom?t.dom:Rt.DOM,s=t&&t.schema?t.schema:us(o),a=fi(o,s);return((i,l,c)=>{i.addAttributeFilter("data-mce-tabindex",(d,f)=>{let m=d.length;for(;m--;){const b=d[m];b.attr("tabindex",b.attr("data-mce-tabindex")),b.attr(f,null)}}),i.addAttributeFilter("src,href,style",(d,f)=>{const m="data-mce-"+f,b=l.url_converter,g=l.url_converter_scope;let y=d.length;for(;y--;){const h=d[y];let w=h.attr(m);w!==void 0?(h.attr(f,w.length>0?w:null),h.attr(m,null)):(w=h.attr(f),f==="style"?w=c.serializeStyle(c.parseStyle(w),h.name):b&&(w=b.call(g,w,f,h.name)),h.attr(f,w.length>0?w:null))}}),i.addAttributeFilter("class",d=>{let f=d.length;for(;f--;){const m=d[f];let b=m.attr("class");b&&(b=b.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",b.length>0?b:null))}}),i.addAttributeFilter("data-mce-type",(d,f,m)=>{let b=d.length;for(;b--;){const g=d[b];g.attr("data-mce-type")==="bookmark"&&!m.cleanup&&(_.from(g.firstChild).exists(h=>{var w;return!Fc((w=h.value)!==null&&w!==void 0?w:"")})?g.unwrap():g.remove())}}),i.addNodeFilter("script,style",(d,f)=>{var m;const b=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=d.length;for(;g--;){const y=d[g],h=y.firstChild,w=(m=h?.value)!==null&&m!==void 0?m:"";if(f==="script"){const E=y.attr("type");E&&y.attr("type",E==="mce-no/type"?null:E.replace(/^mce\-/,"")),l.element_format==="xhtml"&&h&&w.length>0&&(h.value=`// <![CDATA[
`+b(w)+`
// ]]>`)}else l.element_format==="xhtml"&&h&&w.length>0&&(h.value=`<!--
`+b(w)+`
-->`)}}),i.addNodeFilter("#comment",d=>{let f=d.length;for(;f--;){const m=d[f],b=m.value;l.preserve_cdata&&b?.indexOf("[CDATA[")===0?(m.name="#cdata",m.type=4,m.value=c.decode(b.replace(/^\[CDATA\[|\]\]$/g,""))):b?.indexOf("mce:protected ")===0&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(b).substr(14))}}),i.addNodeFilter("xml:namespace,input",(d,f)=>{let m=d.length;for(;m--;){const b=d[m];b.type===7?b.remove():b.type===1&&(f!=="input"||b.attr("type")||b.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",d=>{Q(d,f=>{f.attr("data-mce-type")==="format-caret"&&(f.isEmpty(i.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(d,f)=>{let m=d.length;for(;m--;)d[m].attr(f,null)}),l.remove_trailing_brs&&((d,f,m)=>{f.addNodeFilter("br",(b,g,y)=>{const h=v.extend({},m.getBlockElements()),w=m.getNonEmptyElements(),E=m.getWhitespaceElements();h.body=1;const k=T=>T.name in h||Gu(m,T);for(let T=0,A=b.length;T<A;T++){let B=b[T],M=B.parent;if(M&&k(M)&&B===M.lastChild){let P=B.prev;for(;P;){const z=P.name;if(z!=="span"||P.attr("data-mce-type")!=="bookmark"){z==="br"&&(B=null);break}P=P.prev}if(B&&(B.remove(),Bl(m,w,E,M))){const z=m.getElementRule(M.name);z&&(z.removeEmpty?M.remove():z.paddEmpty&&Om(d,y,k,M))}}else{let P=B;for(;M&&M.firstChild===P&&M.lastChild===P&&(P=M,!h[M.name]);)M=M.parent;if(P===M){const z=new Vn("#text",3);z.value=zt,B.replace(z)}}}})})(l,i,i.schema)})(a,o,r),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},d=((b,g,y)=>((h,w)=>ie(h)&&h.hasEventListeners("PreProcess")&&!w.no_events)(b,y)?((h,w,E)=>{let k;const T=h.dom;let A=w.cloneNode(!0);const B=document.implementation;if(B.createHTMLDocument){const M=B.createHTMLDocument("");v.each(A.nodeName==="BODY"?A.childNodes:[A],P=>{M.body.appendChild(M.importNode(P,!0))}),A=A.nodeName!=="BODY"?M.body.firstChild:M.body,k=T.doc,T.doc=M}return((M,P)=>{M.dispatch("PreProcess",P)})(h,{...E,node:A}),k&&(T.doc=k),A})(b,g,y):g)(t,i,c),f=((b,g,y)=>{const h=go(y.getInner?g.innerHTML:b.getOuterHTML(g));return y.selection||Ic(S(g))?h:v.trim(h)})(r,d,c),m=((b,g,y)=>{const h=y.selection?{forced_root_block:!1,...y}:y,w=b.parse(g,h);return(E=>{const k=A=>A?.name==="br",T=E.lastChild;if(k(T)){const A=T.prev;k(A)&&(T.remove(),A.remove())}})(w),w})(a,f,c);return c.format==="tree"?m:((b,g,y,h,w)=>{const E=((k,T,A)=>vs(k,T).serialize(A))(g,y,h);return((k,T,A)=>!T.no_events&&k?((M,P)=>M.dispatch("PostProcess",P))(k,{...T,content:A}).content:A)(b,w,E)})(t,o,s,m,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:ye(RT,a,n),getTempAttrs:ue(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}},s1=(e,t)=>{const n=OT(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},gp=(e,t,n={})=>{const o=((r,s)=>({format:"html",...r,set:!0,content:s}))(n,t);return ip(e,o).map(r=>{const s=((a,i,l)=>pp(a).editor.setContent(i,l))(e,r.content,r);return lp(e,s.html,r),s.content}).getOr(t)},BT="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),DT=[],PT="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),a1=[{name:"export",replacedWith:"Export to PDF"}],i1=(e,t)=>{const n=Ve(t,o=>Ie(e,o));return Ir(n)},LT=e=>{const t=i1(e,BT),n=e.forced_root_block;return n!==!1&&n!==""||t.push("forced_root_block (false only)"),Ir(t)},MT=e=>i1(e,DT),l1=(e,t)=>{const n=v.makeMap(e.plugins," "),o=Ve(t,r=>Ie(n,r));return Ir(o)},IT=e=>l1(e,PT),FT=e=>l1(e,a1.map(t=>t.name)),jT=e=>Qt(a1,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),Rd=Rt.DOM,Od=e=>_.from(e).each(t=>t.destroy()),Bd=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Ie(e,t)}})(),mi=Wn.ModelManager,c1=(e,t)=>t.dom[e],d1=(e,t)=>parseInt($o(t,e),10),zT=ye(c1,"clientWidth"),UT=ye(c1,"clientHeight"),HT=ye(d1,"margin-top"),qT=ye(d1,"margin-left"),u1=e=>{const t=[],n=()=>{const l=e.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>_.from(t[0]),r=()=>{o().each(l=>{l.reposition()})},s=l=>{Rs(t,c=>c===l).each(c=>{t.splice(c,1)})},a=(l,c=!0)=>e.removed||!(d=>{return(f=d.inline?d.getBody():d.getContentAreaContainer(),_.from(f).map(S)).map(Dn).getOr(!1);var f})(e)?{}:(c&&e.dispatch("BeforeOpenNotification",{notification:l}),Qt(t,d=>{return f=n().getArgs(d),m=l,!(f.type!==m.type||f.text!==m.text||f.progressBar||f.timeout||m.progressBar||m.timeout);var f,m}).getOrThunk(()=>{e.editorManager.setActive(e);const d=n().open(l,()=>{s(d)},()=>om(e));return(f=>{t.push(f)})(d),r(),e.dispatch("OpenNotification",{notification:{...d}}),d})),i=ue(t);return(l=>{l.on("SkinLoaded",()=>{const c=__(l);c&&a({text:c,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{Q(t.slice(),c=>{n().close(c)})}),l.on("keydown",c=>{var d;const f=((d=c.key)===null||d===void 0?void 0:d.toLowerCase())==="f12"||c.keyCode===123;c.altKey&&f&&(c.preventDefault(),o().map(m=>S(m.getEl())).each(m=>Ws(m)))})})(e),{open:a,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:i}},pi=Wn.PluginManager,ya=Wn.ThemeManager,f1=e=>{let t=[];const n=()=>{const a=e.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},o=(a,i)=>(...l)=>i?i.apply(a,l):void 0,r=a=>{(i=>{e.dispatch("CloseWindow",{dialog:i})})(a),t=Ve(t,i=>i!==a),t.length===0&&e.focus()},s=a=>{e.editorManager.setActive(e),sd(e),e.ui.show();const i=a();return(l=>{t.push(l),(c=>{e.dispatch("OpenWindow",{dialog:c})})(l)})(i),i};return e.on("remove",()=>{Q(t,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,r)),openUrl:a=>s(()=>n().openUrl(a,r)),alert:(a,i,l)=>{const c=n();c.alert(a,o(l||c,i))},confirm:(a,i,l)=>{const c=n();c.confirm(a,o(l||c,i))},close:()=>{_.from(t[t.length-1]).each(a=>{n().close(a),r(a)})}}},m1=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Dd=(e,t)=>{e._skinLoaded?m1(e,t):e.on("SkinLoaded",()=>{m1(e,t)})},zl=(e,t,n)=>{v0(e,t,{message:n}),console.error(n)},Ul=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,Pd=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},hp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},p1=(e,t,n)=>{Pu(e,t)&&!n?Ji(e,t):n&&qa(e,t)},g1=e=>{const t=S(e.getBody());p1(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(n=>{_.from(n.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})})(e)},h1=e=>{const t=S(e.getBody());p1(t,"mce-content-readonly",!1),e.hasEditableRoot()&&_c(t,!0),((n,o)=>{hp(n,"StyleWithCSS",o),hp(n,"enableInlineTableEditing",o),hp(n,"enableObjectResizing",o)})(e,!1),om(e)&&e.focus(),(n=>{n.selection.setRng(n.selection.getRng())})(e),e.nodeChanged()},Xr=e=>Xc(e),Ca="data-mce-contenteditable",b1=(e,t)=>{const n=S(e.getBody());t?(g1(e),_c(n,!1),Q(Pn(n,'*[contenteditable="true"]'),o=>{Ee(o,Ca,"true"),_c(o,!1)})):(Q(Pn(n,`*[${Ca}="true"]`),o=>{Ge(o,Ca),_c(o,!0)}),h1(e))},v1=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Xr(e)&&Q(t,n=>{n.attr(Ca,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Ca,t=>{Xr(e)&&Q(t,n=>{n.attr("contenteditable",n.attr(Ca))})}),e.serializer.addTempAttr(Ca)},$T=["copy"],bp=e=>"content/"+e+"/content.css",y1=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return ot(t,r=>(s=>tinymce.Resource.has(bp(s)))(r)?r:(s=>/^[a-z0-9\-]+$/i.test(s))(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},WT=(e,t)=>{const n={};return{findAll:(o,r=jt)=>{const s=Ve((i=>i?hn(i.getElementsByTagName("img")):[])(o),i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===ut.transparentSrc)&&($t(l,"blob:")?!e.isUploaded(l)&&r(i):!!$t(l,"data:")&&r(i))}),a=ot(s,i=>{const l=i.src;if(Ie(n,l))return n[l].then(c=>Ae(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((d,f)=>{const m=()=>Promise.reject("Invalid data URI");if($t(f,"blob:")){const y=d.getByUri(f);return ie(y)?Promise.resolve(y):(b=f,$t(b,"blob:")?(h=>fetch(h).then(w=>w.ok?w.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${h} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})))(b):$t(b,"data:")?(g=b,new Promise((h,w)=>{Gm(g).bind(({type:E,data:k,base64Encoded:T})=>cC(E,k,T)).fold(()=>w("Invalid data URI"),h)})):Promise.reject("Unknown URI format")).then(h=>dC(h).then(w=>uC(w,!1,E=>_.some(fC(d,h,E))).getOrThunk(m)))}var b,g;return $t(f,"data:")?mC(d,f).fold(m,y=>Promise.resolve(y)):Promise.reject("Unknown image data format")})(t,l).then(d=>(delete n[l],{image:i,blobInfo:d})).catch(d=>(delete n[l],d));return n[l]=c,c}});return Promise.all(a)}}},C1=()=>{let e={};const t=(o,r)=>({status:o,resultUri:r}),n=o=>o in e;return{hasBlobUri:n,getResultUri:o=>{const r=e[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&e[o].status===1,isUploaded:o=>!!n(o)&&e[o].status===2,markPending:o=>{e[o]=t(1,null)},markUploaded:(o,r)=>{e[o]=t(2,r)},removeFailed:o=>{delete e[o]},destroy:()=>{e={}}}};let VT=0;const KT=(e,t)=>{const n={},o=(l,c)=>new Promise((d,f)=>{const m=new XMLHttpRequest;m.open("POST",t.url),m.withCredentials=t.credentials,m.upload.onprogress=g=>{c(g.loaded/g.total*100)},m.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+m.status)},m.onload=()=>{if(m.status<200||m.status>=300)return void f("HTTP Error: "+m.status);const g=JSON.parse(m.responseText);var y,h;g&&Ae(g.location)?d((y=t.basePath,h=g.location,y?y.replace(/\/$/,"")+"/"+h.replace(/^\//,""):h)):f("Invalid JSON: "+m.responseText)};const b=new FormData;b.append("file",l.blob(),l.filename()),m.send(b)}),r=gt(t.handler)?t.handler:o,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{v.each(n[l],d=>{d(c)}),delete n[l]};return{upload:(l,c)=>t.url||r!==o?((d,f)=>(d=v.grep(d,m=>!e.isUploaded(m.blobUri())),Promise.all(v.map(d,m=>e.isPending(m.blobUri())?(b=>{const g=b.blobUri();return new Promise(y=>{n[g]=n[g]||[],n[g].push(y)})})(m):((b,g,y)=>(e.markPending(b.blobUri()),new Promise(h=>{let w,E;try{const k=()=>{w&&(w.close(),E=Se)},T=B=>{k(),e.markUploaded(b.blobUri(),B),i(b.blobUri(),s(b,B)),h(s(b,B))},A=B=>{k(),e.removeFailed(b.blobUri()),i(b.blobUri(),a(b,B)),h(a(b,B))};E=B=>{B<0||B>100||_.from(w).orThunk(()=>_.from(y).map(ur)).each(M=>{w=M,M.progressBar.value(B)})},g(b,E).then(T,B=>{A(Ae(B)?{message:B}:B)})}catch(k){h(a(b,k))}})))(m,r,f)))))(l,c):new Promise(d=>{d([])})}},w1=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),x1=(e,t)=>KT(t,{url:m_(e),basePath:p_(e),credentials:g_(e),handler:h_(e)}),XT=e=>{const t=(()=>{let y=[];const h=k=>{if(!k.blob||!k.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const T=k.id||"blobid"+VT+++(()=>{const P=()=>Math.round(4294967295*Ta()).toString(36);return"s"+new Date().getTime().toString(36)+P()+P()+P()})(),A=k.name||T,B=k.blob;var M;return{id:ue(T),name:ue(A),filename:ue(k.filename||A+"."+(M=B.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[M.toLowerCase()]||"dat")),blob:ue(B),base64:ue(k.base64),blobUri:ue(k.blobUri||URL.createObjectURL(B)),uri:ue(k.uri)}},w=k=>Qt(y,k).getOrUndefined(),E=k=>w(T=>T.id()===k);return{create:(k,T,A,B,M)=>{if(Ae(k))return h({id:k,name:B,filename:M,blob:T,base64:A});if(Ke(k))return h(k);throw new Error("Unknown input type")},add:k=>{E(k.id())||y.push(k)},get:E,getByUri:k=>w(T=>T.blobUri()===k),getByData:(k,T)=>w(A=>A.base64()===k&&A.blob().type===T),findFirst:w,removeByUri:k=>{y=Ve(y,T=>T.blobUri()!==k||(URL.revokeObjectURL(T.blobUri()),!1))},destroy:()=>{Q(y,k=>{URL.revokeObjectURL(k.blobUri())}),y=[]}}})();let n,o;const r=C1(),s=[],a=y=>h=>e.selection?y(h):[],i=(y,h,w)=>{let E=0;do E=y.indexOf(h,E),E!==-1&&(y=y.substring(0,E)+w+y.substr(E+h.length),E+=w.length-h.length+1);while(E!==-1);return y},l=(y,h,w)=>{const E=`src="${w}"${w===ut.transparentSrc?' data-mce-placeholder="1"':""}`;return y=i(y,`src="${h}"`,E),i(y,'data-mce-src="'+h+'"','data-mce-src="'+w+'"')},c=(y,h)=>{Q(e.undoManager.data,w=>{w.type==="fragmented"?w.fragments=ot(w.fragments,E=>l(E,y,h)):w.content=l(w.content,y,h)})},d=()=>(n||(n=x1(e,r)),b().then(a(y=>{const h=ot(y,w=>w.blobInfo);return n.upload(h,w1(e)).then(a(w=>{const E=[];let k=!1;const T=ot(w,(A,B)=>{const{blobInfo:M,image:P}=y[B];let z=!1;return A.status&&u_(e)?(A.url&&!bn(P.src,A.url)&&(k=!0),t.removeByUri(P.src),Ar(e)||((W,D)=>{const L=e.convertURL(D,"src");var F;c(W.src,D),Me(S(W),{src:T0(e)?(F=D,F+(F.indexOf("?")===-1?"?":"&")+new Date().getTime()):D,"data-mce-src":L})})(P,A.url)):A.error&&(A.error.remove&&(c(P.src,ut.transparentSrc),E.push(P),z=!0),((W,D)=>{Dd(W,rr.translate(["Failed to upload image: {0}",D]))})(e,A.error.message)),{element:P,status:A.status,uploadUri:A.url,blobInfo:M,removed:z}});return E.length>0&&!Ar(e)?e.undoManager.transact(()=>{Q($n(E),A=>{const B=Hn(A);Be(A),B.each((M=>P=>{((z,W)=>z.dom.isEmpty(W.dom)&&ie(z.schema.getTextBlockElements()[st(W)]))(M,P)&&q(P,R('<br data-mce-bogus="1" />'))})(e)),t.removeByUri(A.dom.src)})}):k&&e.undoManager.dispatchChange(),T}))}))),f=()=>A0(e)?d():Promise.resolve([]),m=y=>to(s,h=>h(y)),b=()=>(o||(o=WT(r,t)),o.findAll(e.getBody(),m).then(a(y=>{const h=Ve(y,w=>Ae(w)?(Dd(e,w),!1):w.uriType!=="blob");return Ar(e)||Q(h,w=>{c(w.image.src,w.blobInfo.blobUri()),w.image.src=w.blobInfo.blobUri(),w.image.removeAttribute("data-mce-src")}),h}))),g=y=>y.replace(/src="(blob:[^"]+)"/g,(h,w)=>{const E=r.getResultUri(w);if(E)return'src="'+E+'"';let k=t.getByUri(w);return k||(k=gn(e.editorManager.get(),(T,A)=>T||A.editorUpload&&A.editorUpload.blobCache.getByUri(w),void 0)),k?'src="data:'+k.blob().type+";base64,"+k.base64()+'"':h});return e.on("SetContent",()=>{A0(e)?f():b()}),e.on("RawSaveContent",y=>{y.content=g(y.content)}),e.on("GetContent",y=>{y.source_view||y.format==="raw"||y.format==="tree"||(y.content=g(y.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",y=>{Q(y,h=>{const w=h.attr("src");if(!w||t.getByUri(w))return;const E=r.getResultUri(w);E&&h.attr("src",E)})})}),{blobCache:t,addFilter:y=>{s.push(y)},uploadImages:d,uploadImagesAuto:f,scanForImages:b,destroy:()=>{t.destroy(),r.destroy(),o=n=null}}},S1={remove_similar:!0,inherit:!1},gi={selector:"td,th",...S1},YT={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...gi},tablecellverticalalign:{styles:{"vertical-align":"%value"},...gi},tablecellbordercolor:{styles:{borderColor:"%value"},...gi},tablecellclass:{classes:["%value"],...gi},tableclass:{selector:"table",classes:["%value"],...S1},tablecellborderstyle:{styles:{borderStyle:"%value"},...gi},tablecellborderwidth:{styles:{borderWidth:"%value"},...gi}},GT=ue(YT),Ld=v.each,Lo=Rt.DOM,vp=e=>ie(e)&&Ke(e),E1=(e,t)=>{const n=t&&t.schema||us({}),o=a=>{const i=Ae(a)?{name:a,classes:[],attrs:{}}:a,l=Lo.create(i.name);return((c,d)=>{d.classes.length>0&&Lo.addClass(c,d.classes.join(" ")),Lo.setAttribs(c,d.attrs)})(l,i),l},r=(a,i,l)=>{let c;const d=i[0],f=vp(d)?d.name:void 0,m=((y,h)=>{const w=n.getElementRule(y.nodeName.toLowerCase()),E=w?.parentsRequired;return!(!E||!E.length)&&(h&&Te(E,h)?h:E[0])})(a,f);if(m)f===m?(c=d,i=i.slice(1)):c=m;else if(d)c=d,i=i.slice(1);else if(!l)return a;const b=c?o(c):Lo.create("div");b.appendChild(a),l&&v.each(l,y=>{const h=o(y);b.insertBefore(h,a)});const g=vp(c)?c.siblings:void 0;return r(b,i,g)},s=Lo.create("div");if(e.length>0){const a=e[0],i=o(a),l=vp(a)?a.siblings:void 0;s.appendChild(r(i,e.slice(1),l))}return s},QT=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=v.trim(e)};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":v.inArray("checked disabled enabled read-only required".split(" "),s)!==-1&&(n.attrs[s]=s)}if(a==="["){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},JT=(e,t)=>{let n="",o=R_(e);if(o==="")return"";const r=b=>Ae(b)?b.replace(/%(\w+)/g,""):"",s=(b,g)=>Lo.getStyle(g??e.getBody(),b,!0);if(Ae(t)){const b=e.formatter.get(t);if(!b)return"";t=b[0]}if("preview"in t){const b=t.preview;if(b===!1)return"";o=b||o}let a,i=t.block||t.inline||"span";const l=(c=t.selector,Ae(c)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),v.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),b=>{const g=v.map(b.split(/(?:~\+|~|\+)/),QT),y=g.pop();return g.length&&(y.siblings=g),y}).reverse()):[]);var c;l.length>0?(l[0].name||(l[0].name=i),i=t.selector,a=E1(l,e)):a=E1([i],e);const d=Lo.select(i,a)[0]||a.firstChild;Ld(t.styles,(b,g)=>{const y=r(b);y&&Lo.setStyle(d,g,y)}),Ld(t.attributes,(b,g)=>{const y=r(b);y&&Lo.setAttrib(d,g,y)}),Ld(t.classes,b=>{const g=r(b);Lo.hasClass(d,g)||Lo.addClass(d,g)}),e.dispatch("PreviewFormats"),Lo.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const f=s("fontSize"),m=/px$/.test(f)?parseInt(f,10):0;return Ld(o.split(" "),b=>{let g=s(b,d);if(!(b==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(b),tl(g).toLowerCase()==="#ffffff")||b==="color"&&tl(g).toLowerCase()==="#000000")){if(b==="font-size"&&/em|%$/.test(g)){if(m===0)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*m+"px"}b==="border"&&g&&(n+="padding:0 2px;"),n+=b+":"+g+";"}}),e.dispatch("AfterPreviewFormats"),Lo.remove(a),n},k1=e=>{const t=(o=>{const r={},s=(a,i)=>{a&&(Ae(a)?(re(i)||(i=[i]),Q(i,l=>{It(l.deep)&&(l.deep=!Bo(l)),It(l.split)&&(l.split=!Bo(l)||on(l)),It(l.remove)&&Bo(l)&&!on(l)&&(l.remove="none"),Bo(l)&&on(l)&&(l.mixed=!0,l.block_expand=!0),Ae(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[a]=i):yt(a,(l,c)=>{s(c,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return l!=="html4"?[m,d,f]:[d,m,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,f,m)=>xe(d)&&d.hasAttribute("href"),onformat:(d,f,m)=>{v.each(m,(b,g)=>{i.setAttrib(d,g,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>{var f;return(f=d?.customValue)!==null&&f!==void 0?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return v.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),d=>{c[d]={block:d,remove:"all"}}),c})(o)),s(GT()),s(T_(o)),{get:a=>ie(a)?r[a]:r,has:a=>Ie(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(e),n=en({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(o=>{o.on("mouseup keydown",r=>{var s;((a,i,l)=>{const c=a.selection,d=a.getBody();$m(a,null,l),i!==8&&i!==46||!c.isCollapsed()||c.getStart().innerHTML!==Dl||$m(a,ca(d,c.getStart()),!0),i!==37&&i!==39||$m(a,ca(d,c.getStart()),!0)})(o,r.keyCode,(s=o.selection.getRng().endContainer,se(s)&&Ra(s.data,zt)))})})(e),Ar(e)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{aC(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const a=_.from(s.node).map(i=>Sl(i)?i:i.startContainer).bind(i=>xe(i)?_.some(i):_.from(i.parentElement)).getOrThunk(()=>oC(r));aC(r,a,o.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(o,r,s)=>{((a,i,l,c)=>{tn(a).formatter.apply(i,l,c)})(e,o,r,s)},remove:(o,r,s,a)=>{((i,l,c,d,f)=>{tn(i).formatter.remove(l,c,d,f)})(e,o,r,s,a)},toggle:(o,r,s)=>{((a,i,l,c)=>{tn(a).formatter.toggle(i,l,c)})(e,o,r,s)},match:(o,r,s,a)=>((i,l,c,d,f)=>tn(i).formatter.match(l,c,d,f))(e,o,r,s,a),closest:o=>((r,s)=>tn(r).formatter.closest(s))(e,o),matchAll:(o,r)=>((s,a,i)=>tn(s).formatter.matchAll(a,i))(e,o,r),matchNode:(o,r,s,a)=>((i,l,c,d,f)=>tn(i).formatter.matchNode(l,c,d,f))(e,o,r,s,a),canApply:o=>((r,s)=>tn(r).formatter.canApply(s))(e,o),formatChanged:(o,r,s,a)=>((i,l,c,d,f,m)=>tn(i).formatter.formatChanged(l,c,d,f,m))(e,n,o,r,s,a),getCssText:ye(JT,e)}},_1=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},N1=e=>{const t=wo(),n=en(0),o=en(0),r={data:[],typing:!1,beforeChange:()=>{((s,a,i)=>{tn(s).undoManager.beforeChange(a,i)})(e,n,t)},add:(s,a)=>((i,l,c,d,f,m,b)=>tn(i).undoManager.add(l,c,d,f,m,b))(e,r,o,n,t,s,a),dispatchChange:()=>{e.setDirty(!0);const s=Ad(e);s.bookmark=Sf(e.selection),e.dispatch("change",{level:s,lastLevel:Os(r.data,o.get()).getOrUndefined()})},undo:()=>((s,a,i,l)=>tn(s).undoManager.undo(a,i,l))(e,r,n,o),redo:()=>((s,a,i)=>tn(s).undoManager.redo(a,i))(e,o,r.data),clear:()=>{((s,a,i)=>{tn(s).undoManager.clear(a,i)})(e,r,o)},reset:()=>{((s,a)=>{tn(s).undoManager.reset(a)})(e,r)},hasUndo:()=>((s,a,i)=>tn(s).undoManager.hasUndo(a,i))(e,r,o),hasRedo:()=>((s,a,i)=>tn(s).undoManager.hasRedo(a,i))(e,r,o),transact:s=>((a,i,l,c)=>tn(a).undoManager.transact(i,l,c))(e,r,n,s),ignore:s=>{((a,i,l)=>{tn(a).undoManager.ignore(i,l)})(e,n,s)},extra:(s,a)=>{((i,l,c,d,f)=>{tn(i).undoManager.extra(l,c,d,f)})(e,r,o,s,a)}};return Ar(e)||((s,a,i)=>{const l=en(!1),c=d=>{Td(a,!1,i),a.add({},d)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",d=>{const f=d.command;_1(f)||(QC(a,i),a.beforeChange())}),s.on("ExecCommand",d=>{const f=d.command;_1(f)||c(d)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",d=>{const f=d.keyCode;if(d.isDefaultPrevented())return;const m=ut.os.isMacOS()&&d.key==="Meta";(f>=33&&f<=36||f>=37&&f<=40||f===45||d.ctrlKey||m)&&(c(),s.nodeChanged()),f!==46&&f!==8||s.nodeChanged(),l.get()&&a.typing&&!fp(Ad(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",d=>{const f=d.keyCode;if(d.isDefaultPrevented())return;if(f>=33&&f<=36||f>=37&&f<=40||f===45)return void(a.typing&&c(d));const m=d.ctrlKey&&!d.altKey||d.metaKey;if((f<16||f>20)&&f!==224&&f!==91&&!a.typing&&!m)return a.beforeChange(),Td(a,!0,i),a.add({},d),void l.set(!0);(ut.os.isMacOS()?d.metaKey:d.ctrlKey&&!d.altKey)&&a.beforeChange()}),s.on("mousedown",d=>{a.typing&&c(d)}),s.on("input",d=>{var f;d.inputType&&(d.inputType==="insertReplacementText"||(f=d).inputType==="insertText"&&f.data===null||(m=>m.inputType==="insertFromPaste"||m.inputType==="insertFromDrop")(d))&&c(d)}),s.on("AddUndo Undo Redo ClearUndos",d=>{d.isDefaultPrevented()||s.nodeChanged()})})(e,r,n),(s=>{s.addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo")})(e),r},ZT=[9,27,ve.HOME,ve.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ve.DOWN,ve.UP,ve.LEFT,ve.RIGHT].concat(ut.browser.isFirefox()?[224]:[]),A1="data-mce-placeholder",T1=e=>e.type==="keydown"||e.type==="keyup",R1=e=>{const t=e.keyCode;return t===ve.BACKSPACE||t===ve.DELETE},eR=(e,t)=>({from:e,to:t}),yp=(e,t)=>{const n=S(e),o=S(t.container());return bd(n,o).map(r=>((s,a)=>({block:s,position:a}))(r,t))},O1=(e,t)=>ls(t,n=>cl(n)||Wo(n.dom),n=>_e(n,e)).filter(dt).getOr(e),B1=(e,t)=>{const n=((o,r)=>{const s=He(o);return Rs(s,a=>r.isBlock(st(a))).fold(ue(s),a=>s.slice(0,a))})(e,t);return Q(n,Be),n},D1=(e,t,n)=>{const o=Kr(n,t);return Qt(o.reverse(),r=>Ln(e,r)).each(Be)},tR=(e,t,n,o,r)=>{if(Ln(o,n))return fs(n),In(n.dom);((a,i)=>Ve(Zo(i),l=>!Ln(a,l)).length===0)(o,r)&&Ln(o,t)&&wn(r,O("br"));const s=no(n.dom,G.before(r.dom));return Q(B1(t,o),a=>{wn(r,a)}),D1(o,e,t),s},nR=(e,t,n,o)=>{if(Ln(o,n)){if(Ln(o,t)){const s=i=>{const l=(c,d)=>Gt(c).fold(()=>d,f=>((m,b)=>m.isInline(st(b)))(o,f)?l(f,d.concat(Xt(f))):d);return l(i,[])},a=Mr(s(n),(i,l)=>(Z(i,l),l),Qa());bt(t),q(t,a)}return Be(n),In(t.dom)}const r=Vo(n.dom);return Q(B1(t,o),s=>{q(n,s)}),D1(o,e,t),r},P1=(e,t)=>{si(e,t.dom).bind(n=>_.from(n.getNode())).map(S).filter(ra).each(Be)},L1=(e,t,n,o)=>(P1(!0,t),P1(!1,n),((r,s)=>Ot(s,r)?((a,i)=>{const l=Kr(i,a);return _.from(l[l.length-1])})(s,r):_.none())(t,n).fold(ye(nR,e,t,n,o),ye(tR,e,t,n,o))),M1=(e,t,n,o,r)=>t?L1(e,o,n,r):L1(e,n,o,r),Cp=(e,t)=>{const n=S(e.getBody());return((r,s,a,i)=>i.collapsed?((l,c,d,f)=>{const m=yp(c,G.fromRangeStart(f)),b=m.bind(g=>To(d,c,g.position).bind(y=>yp(c,y).map(h=>((w,E,k,T)=>qt(T.position.getNode())&&!Ln(w,T.block)?si(!1,T.block.dom).bind(A=>A.isEqual(T.position)?To(k,E,A).bind(B=>yp(E,B)):_.some(T)).getOr(T):T)(l,c,d,h))));return nn(m,b,eR).filter(g=>(y=>!_e(y.from.block,y.to.block))(g)&&((y,h)=>{const w=S(y);return _e(O1(w,h.from.block),O1(w,h.to.block))})(c,g)&&(y=>Dt(y.from.block.dom)===!1&&Dt(y.to.block.dom)===!1)(g)&&(y=>{const h=w=>zh(w)||Ku(w.dom)||Ga(w);return h(y.from.block)&&h(y.to.block)})(g)&&(y=>!(Ot(y.to.block,y.from.block)||Ot(y.from.block,y.to.block)))(g))})(r,s,a,i):_.none())(e.schema,n.dom,t,e.selection.getRng()).map(r=>()=>{M1(n,t,r.from.block,r.to.block,e.schema).each(s=>{e.selection.setRng(s.toRange())})})},I1=(e,t)=>{const n=S(t),o=ye(_e,e);return qr(n,cl,o).isSome()},oR=e=>{const t=S(e.getBody());return((n,o)=>{const r=no(n.dom,G.fromRangeStart(o)).isNone(),s=Zn(n.dom,G.fromRangeEnd(o)).isNone();return!((a,i)=>I1(a,i.startContainer)||I1(a,i.endContainer))(n,o)&&r&&s})(t,e.selection.getRng())?(n=>_.some(()=>{n.setContent(""),n.selection.setCursorLocation()}))(e):((n,o,r)=>{const s=o.getRng();return nn(bd(n,S(s.startContainer)),bd(n,S(s.endContainer)),(a,i)=>_e(a,i)?_.none():_.some(()=>{s.deleteContents(),M1(n,!0,a,i,r).each(l=>{o.setRng(l.toRange())})})).getOr(_.none())})(t,e.selection,e.schema)},wp=(e,t)=>e.selection.isCollapsed()?_.none():oR(e),Yr=(e,t,n,o,r)=>_.from(t._selectionOverrides.showCaret(e,n,o,r)),Hl=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?_.none():_.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(t)),xp=(e,t,n)=>t.collapsed?((o,r,s)=>{const a=Df(1,o.getBody(),r),i=G.fromRangeStart(a),l=i.getNode();if(hl(l))return Yr(1,o,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(hl(c))return Yr(1,o,c,!1,!1);const d=ha(o.dom.getRoot(),i.getNode());return hl(d)?Yr(1,o,d,!1,s):_.none()})(e,t,n).getOr(t):t,rR=e=>Cs(e)||Nl(e),sR=e=>ws(e)||Al(e),F1=(e,t,n,o,r,s)=>{Yr(o,e,s.getNode(!r),r,!0).each(a=>{if(t.collapsed){const i=t.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else t.deleteContents();e.selection.setRng(a)}),((a,i)=>{se(i)&&i.data.length===0&&a.remove(i)})(e.dom,n)},Sp=(e,t)=>((n,o)=>{const r=n.selection.getRng();if(!se(r.commonAncestorContainer))return _.none();const s=o?1:-1,a=kr(n.getBody()),i=ye(Pf,o?a.next:a.prev),l=o?rR:sR,c=wl(s,n.getBody(),r),d=i(c),f=d&&Po(o,d);if(!f||!Qc(c,f))return _.none();if(l(f))return _.some(()=>F1(n,r,c.getNode(),s,o,f));const m=i(f);return m&&l(m)&&Qc(f,m)?_.some(()=>F1(n,r,c.getNode(),s,o,m)):_.none()})(e,t),Ep=(e,t)=>{const n=e.getBody();return t?In(n).filter(Cs):Vo(n).filter(ws)},kp=e=>{const t=e.selection.getRng();return!t.collapsed&&(Ep(e,!0).exists(n=>n.isEqual(G.fromRangeStart(t)))||Ep(e,!1).exists(n=>n.isEqual(G.fromRangeEnd(t))))},Mo=lo([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),j1=(e,t,n,o)=>To(t,e,n).bind(r=>{return s=r.getNode(),ie(s)&&(cl(S(s))||Ga(S(s)))||((a,i,l,c,d)=>{const f=m=>d.isInline(m.nodeName.toLowerCase())&&!Sr(l,c,a);return nb(!i,l).fold(()=>nb(i,c).fold(St,f),f)})(e,t,n,r,o)?_.none():t&&Dt(r.getNode())||!t&&Dt(r.getNode(!0))?((a,i,l,c,d)=>{const f=d.getNode(!l);return bd(S(i),S(c.getNode())).map(m=>Ln(a,m)?Mo.remove(m.dom):Mo.moveToElement(f)).orThunk(()=>_.some(Mo.moveToElement(f)))})(o,e,t,n,r):t&&ws(n)||!t&&Cs(n)?_.some(Mo.moveToPosition(r)):_.none();var s}),z1=(e,t)=>_.from(ha(e.getBody(),t)),aR=(e,t)=>{const n=e.selection.getNode();return z1(e,n).filter(Dt).fold(()=>((o,r,s,a)=>{const i=Df(r?1:-1,o,s),l=G.fromRangeStart(i),c=S(o);return!r&&ws(l)?_.some(Mo.remove(l.getNode(!0))):r&&Cs(l)?_.some(Mo.remove(l.getNode())):!r&&Cs(l)&&pd(c,l,a)?Pv(c,l,a).map(d=>Mo.remove(d.getNode())):r&&ws(l)&&hm(c,l,a)?yA(c,l,a).map(d=>Mo.remove(d.getNode())):((d,f,m,b)=>((g,y)=>{const h=y.getNode(!g),w=g?"after":"before";return xe(h)&&h.getAttribute("data-mce-caret")===w})(f,m)?((g,y)=>xt(y)?_.none():g&&Dt(y.nextSibling)?_.some(Mo.moveToElement(y.nextSibling)):!g&&Dt(y.previousSibling)?_.some(Mo.moveToElement(y.previousSibling)):_.none())(f,m.getNode(!f)).orThunk(()=>j1(d,f,m,b)):j1(d,f,m,b).bind(g=>((y,h,w)=>w.fold(E=>_.some(Mo.remove(E)),E=>_.some(Mo.moveToElement(E)),E=>Sr(h,E,y)?_.none():_.some(Mo.moveToPosition(E))))(d,m,g)))(o,r,l,a)})(e.getBody(),t,e.selection.getRng(),e.schema).map(o=>()=>o.fold(((r,s)=>a=>(r._selectionOverrides.hideFakeCaret(),pa(r,s,S(a)),!0))(e,t),((r,s)=>a=>{const i=s?G.before(a):G.after(a);return r.selection.setRng(i.toRange()),!0})(e,t),(r=>s=>(r.selection.setRng(s.toRange()),!0))(e))),()=>_.some(Se))},U1=e=>{const t=e.dom,n=e.selection,o=ha(e.getBody(),n.getNode());if(Wo(o)&&t.isBlock(o)&&t.isEmpty(o)){const r=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(r),n.setRng(G.before(r).toRange())}return!0},_p=(e,t)=>e.selection.isCollapsed()?aR(e,t):((n,o)=>{const r=n.selection.getNode();return Dt(r)&&!Oc(r)?z1(n,r.parentNode).filter(Dt).fold(()=>_.some(()=>{var s;s=S(n.getBody()),Q(Pn(s,".mce-offscreen-selection"),Be),pa(n,o,S(n.selection.getNode())),wm(n)}),()=>_.some(Se)):kp(n)?_.some(()=>{ny(n,n.selection.getRng(),S(n.getBody()))}):_.none()})(e,t),H1=e=>e.hasOwnProperty("text"),q1=e=>e.hasOwnProperty("marker"),$1=(e,t)=>{const n=(r,s)=>{if(se(r))return{text:r,offset:s};{const a=t(),i=r.childNodes;return s<i.length?(r.insertBefore(a,i[s]),{marker:a,before:!0}):(r.appendChild(a),{marker:a,before:!1})}},o=n(e.endContainer,e.endOffset);return{start:n(e.startContainer,e.startOffset),end:o}},W1=e=>{var t,n;const{start:o,end:r}=e,s=new window.Range;return H1(o)?s.setStart(o.text,o.offset):q1(o)&&(o.before?s.setStartBefore(o.marker):s.setStartAfter(o.marker),(t=o.marker.parentNode)===null||t===void 0||t.removeChild(o.marker)),H1(r)?s.setEnd(r.text,r.offset):q1(r)&&(r.before?s.setEndBefore(r.marker):s.setEndAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),s},Np=(e,t)=>{var n;const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),s=o.getParent(e.selection.getEnd(),o.isBlock),a=e.getBody();if(((n=r?.nodeName)===null||n===void 0?void 0:n.toLowerCase())==="div"&&r&&s&&r===a.firstChild&&s===a.lastChild&&!o.isEmpty(a)){const i=r.cloneNode(!1),l=()=>{if(t?Zv(e):hd(e),a.firstChild!==r){const c=$1(e.selection.getRng(),()=>document.createElement("span"));Array.from(a.childNodes).forEach(d=>i.appendChild(d)),a.appendChild(i),e.selection.setRng(W1(c))}};return _.some(l)}return _.none()},Ap=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=G.fromRangeStart(n.selection.getRng());return To(o,n.getBody(),r).filter(s=>o?pA(s):gA(s)).bind(s=>Bf(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(e,t):_.none(),hi=se,V1=e=>hi(e)&&e.data[0]===mn,K1=e=>hi(e)&&e.data[e.data.length-1]===mn,X1=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(mn)},Md=(e,t)=>e?(n=>{var o;if(hi(n.previousSibling))return K1(n.previousSibling)||n.previousSibling.appendData(mn),n.previousSibling;if(hi(n))return V1(n)||n.insertData(0,mn),n;{const r=X1(n);return(o=n.parentNode)===null||o===void 0||o.insertBefore(r,n),r}})(t):(n=>{var o,r;if(hi(n.nextSibling))return V1(n.nextSibling)||n.nextSibling.insertData(0,mn),n.nextSibling;if(hi(n))return K1(n)||n.appendData(mn),n;{const s=X1(n);return n.nextSibling?(o=n.parentNode)===null||o===void 0||o.insertBefore(s,n.nextSibling):(r=n.parentNode)===null||r===void 0||r.appendChild(s),s}})(t),iR=ye(Md,!0),lR=ye(Md,!1),Y1=(e,t)=>se(e.container())?Md(t,e.container()):Md(t,e.getNode()),G1=(e,t)=>{const n=t.get();return n&&e.container()===n&&ms(n)},Tp=(e,t)=>t.fold(n=>{ia(e.get());const o=iR(n);return e.set(o),_.some(G(o,o.length-1))},n=>In(n).map(o=>{if(G1(o,e)){const r=e.get();return G(r,1)}{ia(e.get());const r=Y1(o,!0);return e.set(r),G(r,1)}}),n=>Vo(n).map(o=>{if(G1(o,e)){const r=e.get();return G(r,r.length-1)}{ia(e.get());const r=Y1(o,!1);return e.set(r),G(r,r.length-1)}}),n=>{ia(e.get());const o=lR(n);return e.set(o),_.some(G(o,1))}),Q1=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n].apply(null,t);if(o.isSome())return o}return _.none()},Kn=lo([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),J1=(e,t)=>hs(t,e)||e,cR=(e,t,n)=>{const o=Gv(n),r=J1(t,o.container());return xs(e,r,o).fold(()=>Zn(r,o).bind(ye(xs,e,r)).map(s=>Kn.before(s)),_.none)},dR=(e,t)=>ca(e,t)===null,Z1=(e,t,n)=>xs(e,t,n).filter(ye(dR,t)),uR=(e,t,n)=>{const o=Qv(n);return Z1(e,t,o).bind(r=>no(r,o).isNone()?_.some(Kn.start(r)):_.none())},fR=(e,t,n)=>{const o=Gv(n);return Z1(e,t,o).bind(r=>Zn(r,o).isNone()?_.some(Kn.end(r)):_.none())},mR=(e,t,n)=>{const o=Qv(n),r=J1(t,o.container());return xs(e,r,o).fold(()=>no(r,o).bind(ye(xs,e,r)).map(s=>Kn.after(s)),_.none)},ew=e=>!Yv(Rp(e)),Tr=(e,t,n)=>Q1([cR,uR,fR,mR],[e,t,n]).filter(ew),Rp=e=>e.fold(mt,mt,mt,mt),tw=e=>e.fold(ue("before"),ue("start"),ue("end"),ue("after")),Id=e=>e.fold(Kn.before,Kn.before,Kn.after,Kn.after),Op=e=>e.fold(Kn.start,Kn.start,Kn.end,Kn.end),pR=(e,t,n,o,r,s)=>nn(xs(t,n,o),xs(t,n,r),(a,i)=>a!==i&&((l,c,d)=>{const f=hs(c,l),m=hs(d,l);return ie(f)&&f===m})(n,a,i)?Kn.after(e?a:i):s).getOr(s),gR=(e,t)=>e.fold(jt,n=>{return r=t,!(tw(o=n)===tw(r)&&Rp(o)===Rp(r));var o,r}),hR=(e,t)=>e?t.fold(An(_.some,Kn.start),_.none,An(_.some,Kn.after),_.none):t.fold(_.none,An(_.some,Kn.before),_.none,An(_.some,Kn.end)),nw=(e,t,n)=>{const o=e?1:-1;return t.setRng(G(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var Rr;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Rr||(Rr={}));const Fd=(e,t)=>e===-1?Go(t):t,bR=(e,t,n)=>e===1?t.next(n):t.prev(n),vR=(e,t,n,o)=>qt(o.getNode(t===1))?Rr.Br:Sr(n,o)===!1?Rr.Block:Rr.Wrap,ow=(e,t,n,o)=>{const r=kr(n);let s=o;const a=[];for(;s;){const i=bR(t,r,s);if(!i)break;if(qt(i.getNode(!1)))return t===1?{positions:Fd(t,a).concat([i]),breakType:Rr.Br,breakAt:_.some(i)}:{positions:Fd(t,a),breakType:Rr.Br,breakAt:_.some(i)};if(i.isVisible()){if(e(s,i)){const l=vR(0,t,s,i);return{positions:Fd(t,a),breakType:l,breakAt:_.some(i)}}a.push(i),s=i}else s=i}return{positions:Fd(t,a),breakType:Rr.Eol,breakAt:_.none()}},rw=(e,t,n,o)=>t(n,o).breakAt.map(r=>{const s=t(n,r).positions;return e===-1?s.concat(r):[r].concat(s)}).getOr([]),Bp=(e,t)=>gn(e,(n,o)=>n.fold(()=>_.some(o),r=>nn(yn(r.getClientRects()),yn(o.getClientRects()),(s,a)=>{const i=Math.abs(t-s.left);return Math.abs(t-a.left)<=i?o:r}).or(n)),_.none()),jd=(e,t)=>yn(t.getClientRects()).bind(n=>Bp(e,n.left)),ql=ye(ow,G.isAbove,-1),$l=ye(ow,G.isBelow,1),sw=ye(rw,-1,ql),aw=ye(rw,1,$l),iw=(e,t)=>ql(e,t).breakAt.isNone(),lw=(e,t)=>$l(e,t).breakAt.isNone(),yR=(e,t)=>jd(sw(e,t),t),CR=(e,t)=>jd(aw(e,t),t),wR=Dt,cw=(e,t)=>Math.abs(e.left-t),dw=(e,t)=>Math.abs(e.right-t),uw=(e,t)=>zr(e,(n,o)=>{const r=Math.min(cw(n,t),dw(n,t)),s=Math.min(cw(o,t),dw(o,t));return s===r&&an(o,"node")&&wR(o.node)||s<r?o:n}),xR=e=>{const t=n=>ot(n,o=>{const r=sa(o);return r.node=e,r});if(xe(e))return t(e.getClientRects());if(se(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},fw=e=>Jt(e,xR);var wa;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(wa||(wa={}));const mw=(e,t,n,o,r,s)=>{let a=0;const i=[],l=f=>{let m=fw([f]);e===wa.Up&&(m=m.reverse());for(let b=0;b<m.length;b++){const g=m[b];if(!n(g,c)){if(i.length>0&&t(g,Cn(i))&&a++,g.line=a,r(g))return!0;i.push(g)}}return!1},c=Cn(s.getClientRects());if(!c)return i;const d=s.getNode();return d&&(l(d),((f,m,b,g)=>{let y=g;for(;y=vl(y,f,Yh,m);)if(b(y))return})(e,o,l,d)),i},SR=ye(mw,wa.Up,dl,ul),ER=ye(mw,wa.Down,ul,dl),pw=e=>Cn(e.getClientRects()),gw=e=>t=>((n,o)=>o.line>n)(e,t),Dp=e=>t=>((n,o)=>o.line===n)(e,t),Gr=(e,t)=>{e.selection.setRng(t),_l(e,e.selection.getRng())},Pp=(e,t,n)=>_.some(xp(e,t,n)),hw=(e,t,n,o,r,s)=>{const a=t===1,i=kr(e.getBody()),l=ye(Pf,a?i.next:i.prev),c=a?o:r;if(!n.collapsed){const g=Uc(n);if(s(g))return Yr(t,e,g,t===-1,!1);if(kp(e)){const y=n.cloneRange();return y.collapse(t===-1),_.from(y)}}const d=wl(t,e.getBody(),n);if(c(d))return Hl(e,d.getNode(!a));let f=l(d);const m=Hh(n);if(!f)return m?_.some(n):_.none();if(f=Po(a,f),c(f))return Yr(t,e,f.getNode(!a),a,!1);const b=l(f);return b&&c(b)&&Qc(f,b)?Yr(t,e,b.getNode(!a),a,!1):m?Pp(e,f.toRange(),!1):_.none()},bw=(e,t,n,o,r,s)=>{const a=wl(t,e.getBody(),n),i=Cn(a.getClientRects()),l=t===wa.Down,c=e.getBody();if(!i)return _.none();if(kp(e)){const y=l?G.fromRangeEnd(n):G.fromRangeStart(n);return(l?CR:yR)(c,y).orThunk(()=>_.from(y)).map(h=>h.toRange())}const d=(l?ER:SR)(c,gw(1),a),f=Ve(d,Dp(1)),m=i.left,b=uw(f,m);if(b&&s(b.node)){const y=Math.abs(m-b.left),h=Math.abs(m-b.right);return Yr(t,e,b.node,y<h,!1)}let g;if(g=o(a)?a.getNode():r(a)?a.getNode(!0):Uc(n),g){const y=((w,E,k,T)=>{const A=kr(E);let B,M,P,z;const W=[];let D=0;w===wa.Down?(B=A.next,M=ul,P=dl,z=G.after(T)):(B=A.prev,M=dl,P=ul,z=G.before(T));const L=pw(z);do{if(!z.isVisible())continue;const F=pw(z);if(P(F,L))continue;W.length>0&&M(F,Cn(W))&&D++;const X=sa(F);if(X.position=z,X.line=D,k(X))return W;W.push(X)}while(z=B(z));return W})(t,c,gw(1),g);let h=uw(Ve(y,Dp(1)),m);if(h||(h=Cn(Ve(y,Dp(0))),h))return Pp(e,h.position.toRange(),!1)}return f.length===0?Lp(e,l).filter(l?r:o).map(y=>xp(e,y.toRange(),!1)):_.none()},Lp=(e,t)=>{const n=e.selection.getRng(),o=t?G.fromRangeEnd(n):G.fromRangeStart(n),r=(s=o.container(),a=e.getBody(),qr(S(s),i=>NN(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(t){const i=$l(r,o);return Qo(i.positions)}{const i=ql(r,o);return yn(i.positions)}},vw=(e,t,n)=>Lp(e,t).filter(n).exists(o=>(e.selection.setRng(o.toRange()),!0)),zd=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},yw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Cw=(e,t,n)=>Tp(t,n).map(o=>(zd(e,o),n)),kR=(e,t,n)=>{const o=e.getBody(),r=((s,a,i)=>{const l=G.fromRangeStart(s);if(s.collapsed)return l;{const c=G.fromRangeEnd(s);return i?no(a,c).getOr(c):Zn(a,l).getOr(l)}})(e.selection.getRng(),o,n);return((s,a,i,l)=>{const c=Po(s,l),d=Tr(a,i,c);return Tr(a,i,c).bind(ye(hR,s)).orThunk(()=>((f,m,b,g,y)=>{const h=Po(f,y);return To(f,b,h).map(ye(Po,f)).fold(()=>g.map(Id),w=>Tr(m,b,w).map(ye(pR,f,m,b,h,w)).filter(ye(gR,g))).filter(ew)})(s,a,i,d,l))})(n,ye(ga,e),o,r).bind(s=>Cw(e,t,s))},ww=(e,t,n)=>!!gl(e)&&kR(e,t,n).isSome(),xw=(e,t,n)=>!!gl(t)&&((o,r)=>{const s=r.selection.getRng(),a=o?G.fromRangeEnd(s):G.fromRangeStart(s);return!!(i=>gt(i.selection.getSel().modify))(r)&&(o&&ff(a)?nw(!0,r.selection,a):!(o||!mf(a))&&nw(!1,r.selection,a))})(e,t),_R=e=>{const t=en(null),n=ye(ga,e);return e.on("NodeChange",o=>{gl(e)&&(((r,s,a)=>{const i=ot(Pn(S(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),l=Ve(i,r),c=Ve(a,r);Q(et(l,c),ye(yw,!1)),Q(et(c,l),ye(yw,!0))})(n,e.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=G.fromRangeStart(r.selection.getRng());G.isTextPosition(i)&&!(l=>ff(l)||mf(l))(i)&&(zd(r,xN(a,i)),s.set(null))}})(e,t),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=Ve(i,r);Q(l,c=>{const d=G.fromRangeStart(s.selection.getRng());Tr(r,s.getBody(),d).bind(f=>Cw(s,a,f))})}})(n,e,t,o.parents))}),t},NR=ye(xw,!0),AR=ye(xw,!1),Ud=(e,t,n)=>{if(gl(e)){const o=Lp(e,t).getOrThunk(()=>{const r=e.selection.getRng();return t?G.fromRangeEnd(r):G.fromRangeStart(r)});return Tr(ye(ga,e),e.getBody(),o).exists(r=>{const s=Id(r);return Tp(n,s).exists(a=>(zd(e,a),!0))})}return!1},Sw=(e,t)=>n=>Tp(t,n).map(o=>()=>zd(e,o)),Ew=(e,t,n,o)=>{const r=e.getBody(),s=ye(ga,e);e.undoManager.ignore(()=>{e.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),hd(e),Tr(s,r,G.fromRangeStart(e.selection.getRng())).map(Op).bind(Sw(e,t)).each(Gn)}),e.nodeChanged()},Mp=(e,t,n)=>{if(e.selection.isCollapsed()&&gl(e)){const o=G.fromRangeStart(e.selection.getRng());return((r,s,a,i)=>{const l=((f,m)=>hs(m,f)||f)(r.getBody(),i.container()),c=ye(ga,r),d=Tr(c,l,i);return d.bind(f=>a?f.fold(ue(_.some(Op(f))),_.none,ue(_.some(Id(f))),_.none):f.fold(_.none,ue(_.some(Id(f))),_.none,ue(_.some(Op(f))))).map(Sw(r,s)).getOrThunk(()=>{const f=ri(a,l,i),m=f.bind(b=>Tr(c,l,b));return nn(d,m,()=>xs(c,l,i).bind(b=>(g=>nn(In(g),Vo(g),(y,h)=>{const w=Po(!0,y),E=Po(!1,h);return Zn(g,w).forall(k=>k.isEqual(E))}).getOr(!0))(b)?_.some(()=>{pa(r,a,S(b))}):_.none())).getOrThunk(()=>m.bind(()=>f.map(b=>()=>{a?Ew(r,s,i,b):Ew(r,s,b,i)})))})})(e,t,n,o)}return _.none()},kw=(e,t)=>{const n=S(e.getBody()),o=S(e.selection.getStart()),r=Kr(o,n);return Rs(r,t).fold(ue(r),s=>r.slice(0,s))},TR=e=>mo(e)===1,_w=(e,t)=>{const n=ye(Ry,e);return Jt(t,o=>n(o)?[o.dom]:[])},Nw=e=>{const t=(n=>kw(n,o=>n.schema.isBlock(st(o))))(e);return _w(e,t)},RR=(e,t)=>{const n=Ve((o=>kw(o,r=>o.schema.isBlock(st(r))||(s=>mo(s)>1)(r)))(e),TR);return Qo(n).bind(o=>{const r=G.fromRangeStart(e.selection.getRng());return ey(t,r,o.dom)&&!Jf(o)?_.some(()=>((s,a,i,l)=>{const c=_w(a,l);if(c.length===0)pa(a,s,i);else{const d=Ty(i.dom,c);a.selection.setRng(d.toRange())}})(t,e,o,n)):_.none()})},Aw=(e,t)=>{const n=e.selection.getStart(),o=((r,s)=>{const a=s.parentElement;return qt(s)&&!Je(a)&&r.dom.isEmpty(a)})(e,n)||Jf(S(n))?Ty(n,t):((r,s)=>{const{caretContainer:a,caretPosition:i}=Ay(s);return r.insertNode(a.dom),i})(e.selection.getRng(),t);e.selection.setRng(o.toRange())},Tw=e=>se(e.startContainer),OR=e=>{const t=e.selection.getRng();return(n=>n.startOffset===0&&Tw(n))(t)&&((n,o)=>{const r=o.startContainer.parentElement;return!Je(r)&&Ry(n,S(r))})(e,t)&&(n=>(o=>(r=>{const s=r.startContainer.parentNode,a=r.endContainer.parentNode;return!Je(s)&&!Je(a)&&s.isEqualNode(a)})(o)&&(r=>{const s=r.endContainer;return r.endOffset===(se(s)?s.length:s.childNodes.length)})(o))(n)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n))(t)},Ip=(e,t)=>e.selection.isCollapsed()?RR(e,t):(n=>{if(OR(n)){const o=Nw(n);return _.some(()=>{hd(n),((r,s)=>{const a=et(s,Nw(r));a.length>0&&Aw(r,a)})(n,o)})}return _.none()})(e),Wl=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(Tw(n)||t.dom.isEmpty(n.startContainer))&&!(o=>{return r=S(o.selection.getStart()),s=o.schema,Vg(r,a=>Ro(a.dom),a=>s.isBlock(st(a)));var r,s})(t)})(e)&&Aw(e,[]),!0),Fp=(e,t,n)=>ie(n)?_.some(()=>{e._selectionOverrides.hideFakeCaret(),pa(e,t,S(n))}):_.none(),jp=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=o?Nl:Al,s=wl(o?1:-1,n.getBody(),n.selection.getRng());return r(s)?Fp(n,o,s.getNode(!o)):_.from(Po(o,s)).filter(a=>r(a)&&Qc(s,a)).bind(a=>Fp(n,o,a.getNode(!o)))})(e,t):((n,o)=>{const r=n.selection.getNode();return xr(r)?Fp(n,o,r):_.none()})(e,t),zp=e=>Is(e??"").getOr(0),Rw=(e,t)=>(e||st(t)==="table"?"margin":"padding")+($o(t,"direction")==="rtl"?"-right":"-left"),Ow=e=>{const t=Dw(e);return!e.mode.isReadOnly()&&(t.length>1||((n,o)=>to(o,r=>{const s=Rw(B0(n),r),a=Sc(r,s).map(zp).getOr(0);return n.dom.getContentEditable(r.dom)!=="false"&&a>0}))(e,t))},Bw=e=>uf(e)||Ga(e),Dw=e=>Ve($n(e.selection.getSelectedBlocks()),t=>!Bw(t)&&!(n=>Hn(n).exists(Bw))(t)&&ls(t,n=>Wo(n.dom)||Dt(n.dom)).exists(n=>Wo(n.dom))),Pw=(e,t)=>{var n,o;if(e.mode.isReadOnly())return;const{dom:r}=e,s=y_(e),a=(o=(n=/[a-z%]+$/i.exec(s))===null||n===void 0?void 0:n[0])!==null&&o!==void 0?o:"px",i=zp(s),l=B0(e);Q(Dw(e),c=>{((d,f,m,b,g,y)=>{const h=Rw(m,S(y)),w=zp(d.getStyle(y,h));if(f==="outdent"){const E=Math.max(0,w-b);d.setStyle(y,h,E?E+g:"")}else{const E=w+b+g;d.setStyle(y,h,E)}})(r,t,l,i,a,c.dom)})},Lw=e=>Pw(e,"outdent"),Mw=e=>{if(e.selection.isCollapsed()&&Ow(e)){const t=e.dom,n=e.selection.getRng(),o=G.fromRangeStart(n),r=t.getParent(n.startContainer,t.isBlock);if(r!==null&&gm(S(r),o,e.schema))return _.some(()=>Lw(e))}return _.none()},Iw=(e,t,n)=>Qn([Mw,_p,Sp,(o,r)=>Mp(o,t,r),Cp,Tm,Ap,jp,wp,Ip,Np],o=>o(e,n)).filter(o=>e.selection.isEditable()),Fw=e=>e.touches===void 0||e.touches.length!==1?_.none():_.some(e.touches[0]),Up=(e,t)=>Ie(e,t.nodeName),BR=(e,t)=>!!se(t)||!!xe(t)&&!(Up(e.getBlockElements(),t)||Oo(t)||Js(e,t)||$u(t)),DR=(e,t)=>{if(se(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||Up(e,t.nextSibling)||$u(t.nextSibling)}return!1},Hp=e=>e.dom.create(Mn(e),pl(e)),jw=(e,t,n)=>{const o=S(Hp(e)),r=Qa();q(o,r),n(t,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},zw=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,PR=(e,t,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?t.charAt(s-1):"";if(a==='"')return o;if(a===">"){const i=t.lastIndexOf("<",s);if(i!==-1&&t.substring(i,s).indexOf('contenteditable="false"')!==-1)return o}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode(typeof r[1]=="string"?r[1]:r[0])+"</span>"},LR=(e,t)=>to(e,n=>{const o=t.match(n);return o!==null&&o[0].length===t.length}),Uw=(e,t)=>{t.hasAttribute("data-mce-caret")&&(pf(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},MR=(e,t)=>{const n=(o=>kc(S(o.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull())(e);if(n)return t.type==="compositionstart"?(t.preventDefault(),t.stopPropagation(),void Uw(e,n)):void(Uh(n)&&(Uw(e,n),e.undoManager.add()))},Hw=Dt,qw=(e,t,n)=>{const o=kr(e.getBody()),r=ye(Pf,t===1?o.next:o.prev);if(n.collapsed){const s=e.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(G.fromRangeStart(n))){const a=S((i=>{const l=i.dom.create(Mn(i));return l.innerHTML='<br data-mce-bogus="1">',l})(e));t===1?qo(S(s),a):wn(S(s),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},$w=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((a,i,l)=>hw(i,a,l,Cs,ws,Hw))(r,n,s).orThunk(()=>(qw(n,r,s),_.none()))})(e,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return Yv(r)?!o:o})(e.selection,t)).exists(n=>(Gr(e,n),!0)),Ww=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((a,i,l)=>bw(i,a,l,c=>Cs(c)||Av(c),c=>ws(c)||mm(c),Hw))(r,n,s).orThunk(()=>(qw(n,r,s),_.none()))})(e,t).exists(n=>(Gr(e,n),!0)),Vw=(e,t)=>vw(e,t,t?ws:Cs),Hd=(e,t)=>Ep(e,!t).map(n=>{const o=n.toRange(),r=e.selection.getRng();return t?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(Gr(e,n),!0)),IR=e=>Te(["figcaption"],st(e)),Kw=(e,t)=>!!e.selection.isCollapsed()&&((n,o)=>{const r=S(n.getBody()),s=G.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const c=ye(_e,i);return ls(S(a.container()),d=>l.isBlock(st(d)),c).filter(IR)})(s,r,n.schema).exists(()=>{if(((a,i,l)=>i?lw(a.dom,l):iw(a.dom,l))(r,o,s)){const a=jw(n,r,o?q:I);return n.selection.setRng(a),!0}return!1})})(e,t),Xw=(e,t)=>((n,o)=>o?_.from(n.dom.getParent(n.selection.getNode(),"details")).map(r=>((s,a)=>{const i=s.selection.getRng(),l=G.fromRangeStart(i);return!(s.getBody().lastChild!==a||!lw(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r)).getOr(!1):_.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(r=>_.from(n.dom.getParent(r,"details")).map(s=>((a,i,l)=>{const c=a.selection.getRng(),d=G.fromRangeStart(c);return!(a.getBody().firstChild!==i||!iw(l,d)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,r))).getOr(!1))(e,t),Yw={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Gw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,qe=(e,...t)=>()=>e.apply(null,t),Vl=(e,t)=>Qt(((n,o)=>Jt((r=>ot(r,s=>({...Yw,...s})))(n),r=>Gw(r,o)?[r]:[]))(e,t),n=>n.action()),Qw=(e,t)=>Qn(((n,o)=>Jt((r=>ot(r,s=>({...Yw,...s})))(n),r=>Gw(r,o)?[r]:[]))(e,t),n=>n.action()),Jw=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return hw(e,n,o,Nl,Al,xr).exists(r=>(Gr(e,r),!0))},Zw=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return bw(e,n,o,Nl,Al,xr).exists(r=>(Gr(e,r),!0))},ex=(e,t)=>vw(e,t,t?Al:Nl),tx=(e,t,n)=>Jt(He(e),o=>$e(o,t)?n(o)?[o]:[]:tx(o,t,n)),nx=(e,t)=>Ha(e,"table",t),ox=lo([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Kl={...ox,none:e=>ox.none(e)},qp=(e,t,n,o,r=jt)=>{const s=o===1;if(!s&&n<=0)return Kl.first(e[0]);if(s&&n>=e.length-1)return Kl.last(e[e.length-1]);{const a=n+o,i=e[a];return r(i)?Kl.middle(t,i):qp(e,t,a,o,r)}},rx=(e,t)=>nx(e,t).bind(n=>{const o=tx(n,"th,td",jt);return Rs(o,r=>_e(e,r)).map(r=>({index:r,all:o}))}),sx=Ps("image"),$p=Ps("event"),qd=e=>t=>{t[$p]=e},ax=qd(0),FR=qd(2),jR=qd(1),zR=e=>{const t=e;return _.from(t[$p]).exists(n=>n===0)},Wp=Ps("mode"),$d=e=>t=>{t[Wp]=e},ix=(e,t)=>$d(t)(e),lx=$d(0),Vp=$d(2),UR=$d(1),cx=e=>t=>{const n=t;return _.from(n[Wp]).exists(o=>o===e)},bi=cx(0),dx=cx(1),HR=["none","copy","link","move"],qR=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Kp=()=>{const e=new window.DataTransfer;let t="move",n="all";const o={get dropEffect(){return t},set dropEffect(r){Te(HR,r)&&(t=r)},get effectAllowed(){return n},set effectAllowed(r){zR(o)&&Te(qR,r)&&(n=r)},get items(){return((r,s)=>({...s,get length(){return s.length},add:(a,i)=>{if(bi(r)){if(!Ae(a))return s.add(a);if(!It(i))return s.add(a,i)}return null},remove:a=>{bi(r)&&s.remove(a)},clear:()=>{bi(r)&&s.clear()}}))(o,e.items)},get files(){return dx(o)?Object.freeze({length:0,item:r=>null}):e.files},get types(){return e.types},setDragImage:(r,s,a)=>{var i;bi(o)&&(i={image:r,x:s,y:a},o[sx]=i,e.setDragImage(r,s,a))},getData:r=>dx(o)?"":e.getData(r),setData:(r,s)=>{bi(o)&&e.setData(r,s)},clearData:r=>{bi(o)&&e.clearData(r)}};return lx(o),o},ux=(e,t)=>e.setData("text/html",t),fx=(e,t,n,o,r)=>{const s=Pn(S(n),"td,th,caption").map(i=>i.dom),a=Ve(((i,l)=>Jt(l,c=>{const d=((f,m)=>({left:f.left-m,top:f.top-m,right:f.right+-2,bottom:f.bottom+-2,width:f.width+m,height:f.height+m}))(sa(c.getBoundingClientRect()),-1);return[{x:d.left,y:i(d),cell:c},{x:d.right,y:i(d),cell:c}]}))(e,s),i=>t(i,r));return((i,l,c)=>gn(i,(d,f)=>d.fold(()=>_.some(f),m=>{const b=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-c)),g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return _.some(g<b?f:m)}),_.none()))(a,o,r).map(i=>i.cell)},$R=ye(fx,e=>e.bottom,(e,t)=>e.y<t),WR=ye(fx,e=>e.top,(e,t)=>e.y>t),mx=(e,t,n)=>{const o=e(t,n);return(r=>r.breakType===Rr.Wrap&&r.positions.length===0)(o)||!qt(n.getNode())&&(r=>r.breakType===Rr.Br&&r.positions.length===1)(o)?!((r,s,a)=>a.breakAt.exists(i=>r(s,i).breakAt.isSome()))(e,t,o):o.breakAt.isNone()},VR=ye(mx,ql),KR=ye(mx,$l),XR=(e,t,n,o)=>{const r=e.selection.getRng(),s=t?1:-1;return!(!G0()||!((a,i,l)=>{const c=G.fromRangeStart(i);return si(!a,l).exists(d=>d.isEqual(c))})(t,r,n)||(Yr(s,e,n,!t,!1).each(a=>{Gr(e,a)}),0))},px=(e,t,n)=>{const o=((s,a)=>{const i=a.getNode(s);return wr(i)?_.some(i):_.none()})(!!t,n),r=t===!1;o.fold(()=>Gr(e,n.toRange()),s=>si(r,e.getBody()).filter(a=>a.isEqual(n)).fold(()=>Gr(e,n.toRange()),a=>((i,l,c)=>{l.undoManager.transact(()=>{const d=i?qo:wn,f=jw(l,S(c),d);Gr(l,f)})})(t,e,s)))},YR=(e,t,n,o)=>{const r=e.selection.getRng(),s=G.fromRangeStart(r),a=e.getBody();if(!t&&VR(o,s)){const i=((l,c,d)=>((f,m)=>yn(m.getClientRects()).bind(b=>$R(f,b.left,b.top)).bind(b=>{return jd(Vo(g=b).map(y=>ql(g,y).positions.concat(y)).getOr([]),m);var g}))(c,d).orThunk(()=>yn(d.getClientRects()).bind(f=>Bp(sw(l,G.before(c)),f.left))).getOr(G.before(c)))(a,n,s);return px(e,t,i),!0}if(t&&KR(o,s)){const i=((l,c,d)=>((f,m)=>Qo(m.getClientRects()).bind(b=>WR(f,b.left,b.top)).bind(b=>{return jd(In(g=b).map(y=>[y].concat($l(g,y).positions)).getOr([]),m);var g}))(c,d).orThunk(()=>yn(d.getClientRects()).bind(f=>Bp(aw(l,G.after(c)),f.left))).getOr(G.after(c)))(a,n,s);return px(e,t,i),!0}return!1},gx=(e,t,n)=>_.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(o=>_.from(e.dom.getParent(o,"table")).map(r=>n(e,t,r,o))).getOr(!1),hx=(e,t)=>gx(e,t,XR),Xp=(e,t)=>gx(e,t,YR),bx=(e,t,n)=>n.fold(_.none,_.none,(o,r)=>{return(s=r,Du(s,ak)).map(a=>(i=>{const l=$a.exact(i,0,i,0);return lk(l)})(a));var s},o=>e.mode.isReadOnly()||!GR(o)?_.none():(e.execCommand("mceTableInsertRowAfter"),vx(e,t,o))),GR=e=>ls(e,Jn("table")).exists(cs),vx=(e,t,n)=>{return bx(e,t,(r=yx,rx(o=n,void 0).fold(()=>Kl.none(o),s=>qp(s.all,o,s.index,1,r))));var o,r},QR=(e,t,n)=>{return bx(e,t,(r=yx,rx(o=n,void 0).fold(()=>Kl.none(),s=>qp(s.all,o,s.index,-1,r))));var o,r},yx=e=>cs(e)||Lu(e,JR),JR=e=>ko(e)&&cs(e),Cx=(e,t)=>{const n=["table","li","dl"],o=S(e.getBody()),r=a=>{const i=st(a);return _e(a,o)||Te(n,i)},s=e.selection.getRng();return((a,i)=>((l,c,d=St)=>d(c)?_.none():Te(l,st(c))?_.some(c):Gi(c,l.join(","),f=>$e(f,"table")||d(f)))(["td","th"],a,i))(S(t?s.endContainer:s.startContainer),r).map(a=>(nx(a,r).each(i=>{e.model.table.clearSelectedCells(i.dom)}),e.selection.collapse(!t),(t?vx:QR)(e,r,a).each(i=>{e.selection.setRng(i)}),!0)).getOr(!1)},lr=(e,t)=>({container:e,offset:t}),Wd=Rt.DOM,Vd=e=>t=>e===t?-1:0,Yp=(e,t,n)=>{if(se(e)&&t>=0)return _.some(lr(e,t));{const o=oa(Wd);return _.from(o.backwards(e,t,Vd(e),n)).map(r=>lr(r.container,r.container.data.length))}},Gp=(e,t,n)=>{if(!se(e))return _.none();const o=e.data;if(t>=0&&t<=o.length)return _.some(lr(e,t));{const r=oa(Wd);return _.from(r.backwards(e,t,Vd(e),n)).bind(s=>{const a=s.container.data;return Gp(s.container,t+a.length,n)})}},wx=(e,t,n)=>{if(!se(e))return _.none();const o=e.data;if(t<=o.length)return _.some(lr(e,t));{const r=oa(Wd);return _.from(r.forwards(e,t,Vd(e),n)).bind(s=>wx(s.container,t-o.length,n))}},Qp=(e,t,n,o,r)=>{const s=oa(e,(a=>i=>a.isBlock(i)||Te(["BR","IMG","HR","INPUT"],i.nodeName)||a.getContentEditable(i)==="false")(e));return _.from(s.backwards(t,n,o,r))},xx=e=>e!==""&&` \xA0\uFEFF\f
\r	\v`.indexOf(e)!==-1,ZR=(e,t)=>e.substring(t.length),Jp=(e,t,n,o=!1)=>{if(!(r=t).collapsed||!se(r.startContainer))return _.none();var r;const s={text:"",offset:0},a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return Qp(e,t.startContainer,t.startOffset,(i,l,c)=>(s.text=c+s.text,s.offset+=l,((d,f,m,b=!1)=>{let g;const y=m.charAt(0);for(g=f-1;g>=0;g--){const h=d.charAt(g);if(!b&&xx(h))return _.none();if(y===h&&bn(d,m,g,f))break}return _.some(g)})(s.text,s.offset,n,o).getOr(l)),a).bind(i=>{const l=t.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(t.endContainer,t.endOffset),l.collapsed)return _.none();const c=(d=>go(d.toString().replace(/\u00A0/g," ")))(l);return c.lastIndexOf(n)!==0?_.none():_.some({text:ZR(c,n),range:l,trigger:n})})},Sx=e=>{if((t=>t.nodeType===3)(e))return lr(e,e.data.length);{const t=e.childNodes;return t.length>0?Sx(t[t.length-1]):lr(e,t.length)}},Ex=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?Ex(n[t],0):n.length>0&&(o=>o.nodeType===1)(e)&&n.length===t?Sx(n[n.length-1]):lr(e,t)},kx=(e,t,n,o={})=>{var r;const s=t(),a=(r=e.selection.getRng().startContainer.nodeValue)!==null&&r!==void 0?r:"",i=Ve(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>(d=>f=>{const m=Ex(f.startContainer,f.startOffset);return!((b,g)=>{var y;const h=(y=b.getParent(g.container,b.isBlock))!==null&&y!==void 0?y:b.getRoot();return Qp(b,g.container,g.offset,(w,E)=>E===0?-1:E,h).filter(w=>{const E=w.container.data.charAt(w.offset-1);return!xx(E)}).isSome()})(d,m)})(e.dom))(n.range,a,n.text));if(i.length===0)return _.none();const l=Promise.all(ot(i,c=>c.fetch(n.text,c.maxResults,o).then(d=>({matchText:n.text,items:d,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return _.some({lookupData:l,context:n})};var Or;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Or||(Or={}));const Zp=(e,t,n)=>e.stype===Or.Error?t(e.serror):n(e.svalue),vi=e=>({stype:Or.Value,svalue:e}),Xl=e=>({stype:Or.Error,serror:e}),eO=Zp,_x=e=>Ke(e)&&sn(e).length>100?" removed due to size":JSON.stringify(e,null,2),Nx=(e,t)=>Xl([{path:e,getErrorInfo:t}]),eg=e=>({extract:(t,n)=>{return o=e(n),r=s=>((a,i)=>Nx(a,ue(i)))(t,s),o.stype===Or.Error?r(o.serror):o;var o,r},toString:ue("val")}),tO=eg(vi),nO=ue(tO),Kd=(e,t)=>eg(n=>{const o=typeof n;return e(n)?vi(n):Xl(`Expected type: ${t} but got: ${o}`)}),oO=Kd(x,"number"),Xd=Kd(Ae,"string"),rO=Kd(pn,"boolean"),tg=Kd(gt,"function"),Ax=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every(t=>Ax(e[t]));default:return!1}};eg(e=>Ax(e)?vi(e):Xl("Expected value to be acceptable for sending via postMessage"));const Tx=e=>({tag:"defaultedThunk",process:ue(e)}),Rx=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},sO=e=>{const t=(o=>{const r=[],s=[];return Q(o,a=>{Zp(a,i=>s.push(i),i=>r.push(i))}),{values:r,errors:s}})(e);return t.errors.length>0?(n=t.errors,An(Xl,ac)(n)):vi(t.values);var n},Ox=(e,t,n,o)=>o(Bt(e,t).getOrThunk(()=>n(e))),aO=(e,t,n,o,r)=>{const s=i=>r.extract(t.concat([o]),i),a=i=>i.fold(()=>vi(_.none()),l=>{return d=r.extract(t.concat([o]),l),f=_.some,d.stype===Or.Value?{stype:Or.Value,svalue:f(d.svalue)}:d;var d,f});switch(e.tag){case"required":return((i,l,c,d)=>Bt(l,c).fold(()=>((f,m,b)=>Nx(f,()=>'Could not find valid *required* value for "'+m+'" in '+_x(b)))(i,c,l),d))(t,n,o,s);case"defaultedThunk":return Ox(n,o,e.process,s);case"option":return((i,l,c)=>c(Bt(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,c,d)=>d(Bt(i,l).map(f=>f===!0?c(i):f)))(n,o,e.process,a);case"mergeWithThunk":return Ox(n,o,ue({}),i=>{const l=Ti(e.process(n),i);return s(l)})}},Bx=e=>({extract:(t,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)Rx(l,(c,d,f,m)=>{const b=aO(f,o,r,c,m);eO(b,g=>{i.push(...g)},g=>{a[d]=g})},(c,d)=>{a[c]=d(r)});return i.length>0?Xl(i):vi(a)})(t,n,e),toString:()=>`obj{
`+ot(e,n=>Rx(n,(o,r,s,a)=>o+" -> "+a.toString(),(o,r)=>"state("+o+")")).join(`
`)+"}"}),iO=(e,t,n)=>{return o=((r,s,a)=>((i,l)=>i.stype===Or.Error?{stype:Or.Error,serror:l(i.serror)}:i)(s.extract([r],a),i=>({input:a,errors:i})))(e,t,n),Zp(o,ln.error,ln.value);var o},Yd=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),Dx=(e,t)=>Yd(e,e,{tag:"required",process:{}},t),Qr=e=>Dx(e,Xd),Gd=e=>Dx(e,tg),Px=(e,t)=>Yd(e,e,{tag:"option",process:{}},t),Ss=e=>Px(e,Xd),Lx=e=>Px(e,tg),Mx=(e,t)=>Yd(e,e,Tx(t),nO()),Yl=(e,t,n)=>Yd(e,e,Tx(t),n),Ix=(e,t)=>Yl(e,t,oO),Qd=(e,t)=>Yl(e,t,rO),Fx=(e,t)=>Yl(e,t,tg),lO=Qr("type");Qr("name"),Qr("label"),Qr("text"),Qr("title"),Qr("icon"),Qr("url");const cO=Qr("value"),dO=Gd("fetch");Gd("getSubmenuItems");const uO=Gd("onAction");Gd("onItemAction"),Fx("onSetup",()=>Se),Ss("name");const fO=Ss("text");Ss("role");const mO=Ss("icon");Ss("url"),Ss("tooltip"),Ss("label"),Ss("shortcut"),Lx("select");const pO=Qd("active",!1);Qd("borderless",!1);const gO=Qd("enabled",!0);Qd("primary",!1);const hO=Mx("meta",{});Fx("onAction",Se),Bx([(()=>Yl("type","autocompleteitem",Xd))(0,"autocompleteitem"),pO,gO,hO,cO,fO,mO]);const bO=Bx([lO,Qr("trigger"),Ix("minChars",1),Mx("columns",1),Ix("maxResults",10),Lx("matches"),dO,uO,(jx=Xd,Yl("highlightOn",[],(ng=jx,{extract:(e,t)=>{const n=ot(t,(o,r)=>ng.extract(e.concat(["["+r+"]"]),o));return sO(n)},toString:()=>"array("+ng.toString()+")"})))]);var jx,ng;const vO=e=>{const t=e.ui.registry.getAll().popups,n=Bs(t,s=>{return(a=s,iO("Autocompleter",bO,a)).fold(i=>{throw new Error(`Errors: 
`+(c=>{const d=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:ue("... (only showing first ten failures)")}]):c;return ot(d,f=>"Failed path: ("+f.path.join(" > ")+`)
`+f.getErrorInfo())})((l=i).errors).join(`
`)+`

Input object: `+_x(l.input));var l},mt);var a}),o=jr(vr(n,s=>s.trigger)),r=Aa(n);return{dataset:n,triggers:o,lookupByTrigger:s=>Ve(r,a=>a.trigger===s)}},yO=e=>{const t=wo(),n=en(!1),o=t.isSet,r=()=>{o()&&((l=>{l.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},s=xo(()=>vO(e)),a=l=>{(c=>t.get().map(d=>Jp(e.dom,e.selection.getRng(),d.trigger,!0).bind(f=>kx(e,s,f,c))).getOrThunk(()=>((d,f)=>{const m=f(),b=d.selection.getRng();return((g,y,h)=>Qn(h.triggers,w=>Jp(g,y,w)))(d.dom,b,m).bind(g=>kx(d,f,g))})(e,s)))(l).fold(r,c=>{(d=>{o()||t.set({trigger:d.trigger,matchLength:d.text.length})})(c.context),c.lookupData.then(d=>{t.get().map(f=>{const m=c.context;f.trigger===m.trigger&&(t.set({...f,matchLength:m.text.length}),n.get()?(kf(e,{range:m.range}),((b,g)=>{b.dispatch("AutocompleterUpdate",g)})(e,{lookupData:d})):(n.set(!0),kf(e,{range:m.range}),((b,g)=>{b.dispatch("AutocompleterStart",g)})(e,{lookupData:d})))})})})},i=()=>t.get().bind(({trigger:l})=>{const c=e.selection.getRng();return Jp(e.dom,c,l,n.get()).filter(({range:d})=>((f,m)=>{const b=f.compareBoundaryPoints(window.Range.START_TO_START,m),g=f.compareBoundaryPoints(window.Range.END_TO_END,m);return b>=0&&g<=0})(c,d)).map(({range:d})=>d)});e.addCommand("mceAutocompleterReload",(l,c)=>{const d=Ke(c)?c.fetchOptions:{};a(d)}),e.addCommand("mceAutocompleterClose",r),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{i().each(l=>{kf(e,{range:l})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>i().isSome()),((l,c)=>{const d=js(c.load,50);l.on("input",f=>{(f.inputType!=="insertCompositionText"||l.composing)&&d.throttle()}),l.on("keydown",f=>{const m=f.which;m===8?d.throttle():m===27?(d.cancel(),c.cancelIfNecessary()):m!==38&&m!==40||d.cancel()},!0),l.on("remove",d.cancel)})(e,{cancelIfNecessary:r,load:a})},CO=co().browser.isSafari(),zx=e=>fs(S(e)),Ux=(e,t)=>{var n;return e.startOffset===0&&e.endOffset===((n=t.textContent)===null||n===void 0?void 0:n.length)},Jd=(e,t)=>_.from(e.getParent(t.container(),"details")),Hx=(e,t)=>Jd(e,t).isSome(),qx=(e,t)=>{const n=t.getNode();It(n)||e.selection.setCursorLocation(n,t.offset())},$x=(e,t,n)=>{const o=e.dom.getParent(t.container(),"details");if(o&&!o.open){const r=e.dom.select("summary",o)[0];r&&(n?In(r):Vo(r)).each(s=>qx(e,s))}else qx(e,t)},Wx=(e,t,n)=>{const{dom:o,selection:r}=e,s=e.getBody();if(n==="character"){const a=G.fromRangeStart(r.getRng()),i=o.getParent(a.container(),o.isBlock),l=Jd(o,a),c=i&&o.isEmpty(i),d=Je(i?.previousSibling),f=Je(i?.nextSibling);return!!(c&&(t?f:d)&&ri(!t,s,a).exists(m=>Hx(o,m)&&!dc(l,Jd(o,m))))||ri(t,s,a).fold(St,m=>{const b=Jd(o,m);if(Hx(o,m)&&!dc(l,b)){if(t||$x(e,m,!1),i&&c){if(t&&d||!t&&f)return!0;$x(e,m,t),e.dom.remove(i)}return!0}return!1})}return!1},wO=(e,t,n,o)=>{const r=e.selection.getRng(),s=G.fromRangeStart(r),a=e.getBody();return o==="selection"?((i,l)=>{const c=l.startSummary.exists(m=>m.contains(i.startContainer)),d=l.startSummary.exists(m=>m.contains(i.endContainer)),f=l.startDetails.forall(m=>l.endDetails.forall(b=>m!==b));return(c||d)&&!(c&&d)||f})(r,t):n?((i,l)=>l.startSummary.exists(c=>((d,f)=>Vo(f).exists(m=>qt(m.getNode())&&no(f,m).exists(b=>b.isEqual(d))||m.isEqual(d)))(i,c)))(s,t)||((i,l,c)=>c.startDetails.exists(d=>Zn(i,l).forall(f=>!d.contains(f.container()))))(a,s,t):((i,l)=>l.startSummary.exists(c=>((d,f)=>In(f).exists(m=>m.isEqual(d)))(i,c)))(s,t)||((i,l)=>l.startDetails.exists(c=>no(c,i).forall(d=>l.startSummary.exists(f=>!f.contains(i.container())&&f.contains(d.container())))))(s,t)},xa=(e,t,n)=>((o,r,s)=>((a,i)=>{const l=_.from(a.getParent(i.startContainer,"details")),c=_.from(a.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const d=l.bind(f=>_.from(a.select("summary",f)[0]));return _.some({startSummary:d,startDetails:l,endDetails:c})}return _.none()})(o.dom,o.selection.getRng()).fold(()=>Wx(o,r,s),a=>wO(o,a,r,s)||Wx(o,r,s)))(e,t,n)||CO&&((o,r,s)=>{const a=o.selection,i=a.getNode(),l=a.getRng(),c=G.fromRangeStart(l);return!!hk(i)&&(s==="selection"&&Ux(l,i)||ey(r,c,i)?zx(i):o.undoManager.transact(()=>{const d=a.getSel();let{anchorNode:f,anchorOffset:m,focusNode:b,focusOffset:g}=d??{};const y=()=>{ie(f)&&ie(m)&&ie(b)&&ie(g)&&d?.setBaseAndExtent(f,m,b,g)},h=(E,k)=>{Q(E.childNodes,T=>{Sl(T)&&k.appendChild(T)})},w=o.dom.create("span",{"data-mce-bogus":"1"});h(i,w),i.appendChild(w),y(),s!=="word"&&s!=="line"||d==null||d.modify("extend",r?"right":"left",s),!a.isCollapsed()&&Ux(a.getRng(),w)?zx(i):(o.execCommand(r?"ForwardDelete":"Delete"),f=d?.anchorNode,m=d?.anchorOffset,b=d?.focusNode,g=d?.focusOffset,h(w,i),y()),o.dom.remove(w)}),!0)})(e,t,n)?_.some(Se):_.none(),Vx=e=>(t,n,o={})=>{const r=t.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:Se,inputType:n},a=Th(new InputEvent(e));return t.dispatch(e,{...a,...s,...o})},Gl=Vx("input"),Zd=Vx("beforeinput"),Kx=co(),Xx=Kx.os,Yx=Xx.isMacOS()||Xx.isiOS(),xO=Kx.browser.isFirefox(),yi=(e,t)=>{const n=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const s=(a=>{for(;a;){if(xe(a)||se(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(t.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&t.insertBefore(n.doc.createTextNode(zt),t.firstChild)}const r=n.createRng();if(t.normalize(),t.hasChildNodes()){const s=new fn(t,t);let a,i=t;for(;a=s.current();){if(se(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else qt(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));e.selection.setRng(r),_l(e,r)},Ql=(e,t)=>{const n=e.getRoot();let o,r=t;for(;r!==n&&r&&e.getContentEditable(r)!=="false";){if(e.getContentEditable(r)==="true"){o=r;break}r=r.parentNode}return r!==n?o:n},og=e=>_.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),rg=e=>{e.innerHTML='<br data-mce-bogus="1">'},Jl=(e,t)=>{Mn(e).toLowerCase()===t.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;_.from(r.style).map(s.parseStyle).each(d=>{const f={...Nu(S(o)),...d};s.setStyles(o,f)});const a=_.from(r.class).map(d=>d.split(/\s+/)),i=_.from(o.className).map(d=>Ve(d.split(/\s+/),f=>f!==""));nn(a,i,(d,f)=>{const m=Ve(f,g=>!Te(d,g)),b=[...d,...m];s.setAttrib(o,"class",b.join(" "))});const l=["style","class"],c=br(r,(d,f)=>!Te(l,f));s.setAttribs(o,c)})(e,t,pl(e))},Gx=(e,t,n,o,r=!0,s,a)=>{const i=e.dom,l=e.schema,c=Mn(e),d=n?n.nodeName.toUpperCase():"";let f=t;const m=l.getTextInlineElements();let b;b=s||d==="TABLE"||d==="HR"?i.create(s||c,a||{}):n.cloneNode(!1);let g=b;if(r)do if(m[f.nodeName]){if(Ro(f)||Oo(f))continue;const y=f.cloneNode(!1);i.setAttrib(y,"id",""),b.hasChildNodes()?(y.appendChild(b.firstChild),b.appendChild(y)):(g=y,b.appendChild(y))}while((f=f.parentNode)&&f!==o);else i.setAttrib(b,"style",null),i.setAttrib(b,"class",null);return Jl(e,b),rg(g),b},Qx=(e,t)=>{const n=e?.parentNode;return ie(n)&&n.nodeName===t},Jx=e=>ie(e)&&/^(OL|UL|LI)$/.test(e.nodeName),sg=e=>ie(e)&&/^(LI|DT|DD)$/.test(e.nodeName),eu=e=>{const t=e.parentNode;return sg(t)?t:e},tu=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];for(;o&&!xe(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},Zx=e=>gn(vr(Nu(S(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),SO=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),ag=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,ig=(e,t)=>ie(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",lg=(e,t,n)=>se(t)?e?n===1&&t.data.charAt(n-1)===mn?0:n:n===t.data.length-1&&t.data.charAt(n)===mn?t.data.length:n:n,eS={insert:(e,t)=>{let n,o,r,s,a=!1;const i=e.dom,l=e.schema.getNonEmptyElements(),c=e.selection.getRng(),d=Mn(e),f=S(c.startContainer),m=Wt(f,c.startOffset),b=m.exists(z=>ko(z)&&!cs(z)),g=c.collapsed&&b,y=(z,W)=>Gx(e,n,A,T,c_(e),z,W),h=z=>{const W=lg(z,n,o);if(se(n)&&(z?W>0:W<n.data.length))return!1;if((n.parentNode===A||n===A)&&a&&!z||z&&xe(n)&&n===A.firstChild)return!0;if(ag(n,"TABLE")||ag(n,"HR"))return(F=>F.nodeName==="BR"||F.nextSibling&&F.nextSibling.nodeName==="BR")(n)?!z:a&&!z||!a&&z;const D=new fn(n,A);let L;for(se(n)&&(z&&W===0?D.prev():z||W!==n.data.length||D.next());L=D.current();){if(xe(L)){if(!L.getAttribute("data-mce-bogus")){const F=L.nodeName.toLowerCase();if(l[F]&&F!=="br")return!1}}else if(se(L)&&!Wa(L.data))return!1;z?D.prev():D.next()}return!0},w=()=>{let z;return z=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&B!=="HGROUP"?y(d):y(),((W,D)=>{const L=d_(W);return!xt(D)&&(Ae(L)?Te(v.explode(L),D.nodeName.toLowerCase()):L)})(e,s)&&ig(i,s)&&i.isEmpty(A,void 0,{includeZwsp:!0})?z=i.split(s,A):i.insertAfter(z,A),yi(e,z),z};cd(i,c).each(z=>{c.setStart(z.startContainer,z.startOffset),c.setEnd(z.endContainer,z.endOffset)}),n=c.startContainer,o=c.startOffset;const E=!(!t||!t.shiftKey),k=!(!t||!t.ctrlKey);xe(n)&&n.hasChildNodes()&&!g&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&se(n)?n.data.length:0);const T=Ql(i,n);if(!T||((z,W)=>{const D=z.dom.getParent(W,"ol,ul,dl");return D!==null&&z.dom.getContentEditableParent(D)==="false"})(e,n))return;E||(n=((z,W,D,L,F)=>{var X,oe;const te=z.dom,Ce=(X=Ql(te,L))!==null&&X!==void 0?X:te.getRoot();let Ne=te.getParent(L,te.isBlock);if(!Ne||!ig(te,Ne)){if(Ne=Ne||Ce,!Ne.hasChildNodes()){const we=te.create(W);return Jl(z,we),Ne.appendChild(we),D.setStart(we,0),D.setEnd(we,0),we}let Re,Pe=L;for(;Pe&&Pe.parentNode!==Ne;)Pe=Pe.parentNode;for(;Pe&&!te.isBlock(Pe);)Re=Pe,Pe=Pe.previousSibling;const me=(oe=Re?.parentElement)===null||oe===void 0?void 0:oe.nodeName;if(Re&&me&&z.schema.isValidChild(me,W.toLowerCase())){const we=Re.parentNode,j=te.create(W);for(Jl(z,j),we.insertBefore(j,Re),Pe=Re;Pe&&!te.isBlock(Pe);){const U=Pe.nextSibling;j.appendChild(Pe),Pe=U}D.setStart(L,F),D.setEnd(L,F)}}return L})(e,d,c,n,o));let A=i.getParent(n,i.isBlock)||i.getRoot();s=ie(A?.parentNode)?i.getParent(A.parentNode,i.isBlock):null,r=A?A.nodeName.toUpperCase():"";const B=s?s.nodeName.toUpperCase():"";if(B!=="LI"||k||(A=s,s=s.parentNode,r=B),xe(s)&&((z,W,D)=>!W&&D.nodeName.toLowerCase()===Mn(z)&&z.dom.isEmpty(D)&&((L,F)=>{let X=F;for(;X&&X!==L&&Je(X.nextSibling);){const te=X.parentElement;if(!te||(oe=te,!Ie(z.schema.getTextBlockElements(),oe.nodeName.toLowerCase())))return Hu(te);X=te}var oe;return!1})(z.getBody(),D))(e,E,A))return((z,W,D)=>{var L,F,X;const oe=W(Mn(z)),te=((Ce,Ne)=>Ce.dom.getParent(Ne,Hu))(z,D);te&&(z.dom.insertAfter(oe,te),yi(z,oe),((X=(F=(L=D.parentElement)===null||L===void 0?void 0:L.childNodes)===null||F===void 0?void 0:F.length)!==null&&X!==void 0?X:0)>1&&z.dom.remove(D))})(e,y,A);if(/^(LI|DT|DD)$/.test(r)&&xe(s)&&i.isEmpty(A))return void((z,W,D,L,F)=>{const X=z.dom,oe=z.selection.getRng(),te=D.parentNode;if(D===z.getBody()||!te)return;var Ce;Jx(Ce=D)&&Jx(Ce.parentNode)&&(F="LI");const Ne=sg(L)?Zx(L):void 0;let Re=sg(L)&&Ne?W(F,{style:Zx(L)}):W(F);if(tu(D,L,!0)&&tu(D,L,!1))if(Qx(D,"LI")){const Pe=eu(D);X.insertAfter(Re,Pe),(me=>{var we;return((we=me.parentNode)===null||we===void 0?void 0:we.firstChild)===me})(D)?X.remove(Pe):X.remove(D)}else X.replace(Re,D);else if(tu(D,L,!0))Qx(D,"LI")?(X.insertAfter(Re,eu(D)),Re.appendChild(X.doc.createTextNode(" ")),Re.appendChild(D)):te.insertBefore(Re,D),X.remove(L);else if(tu(D,L,!1))X.insertAfter(Re,eu(D)),X.remove(L);else{D=eu(D);const Pe=oe.cloneRange();Pe.setStartAfter(L),Pe.setEndAfter(D);const me=Pe.extractContents();if(F==="LI"&&(we=>we.firstChild&&we.firstChild.nodeName==="LI")(me)){const we=Ve(ot(Re.children,S),dr(Jn("br")));Re=me.firstChild,X.insertAfter(me,D),Q(we,j=>I(S(Re),j)),Ne&&Re.setAttribute("style",Ne)}else X.insertAfter(me,D),X.insertAfter(Re,D);X.remove(L)}yi(z,Re)})(e,y,s,A,d);if(!(g||A!==e.getBody()&&ig(i,A)))return;const M=A.parentNode;let P;if(g)P=y(d),m.fold(()=>{q(f,S(P))},z=>{wn(z,S(P))}),e.selection.setCursorLocation(P,0);else if(Za(A))P=pf(A),i.isEmpty(A)&&rg(A),Jl(e,P),yi(e,P);else if(h(!1))P=w();else if(h(!0)&&M){const z=G.fromRangeStart(c),W=mm(z),D=S(A),L=pd(D,z,e.schema)?Pv(D,z,e.schema).bind(X=>_.from(X.getNode())):_.none();P=M.insertBefore(y(),A);const F=ag(A,"HR")||W?P:L.getOr(A);yi(e,F)}else{const z=(D=>{const L=D.cloneRange();return L.setStart(D.startContainer,lg(!0,D.startContainer,D.startOffset)),L.setEnd(D.endContainer,lg(!1,D.endContainer,D.endOffset)),L})(c).cloneRange();z.setEndAfter(A);const W=z.extractContents();(D=>{Q(Wg(S(D),vt),L=>{const F=L.dom;F.nodeValue=go(F.data)})})(W),(D=>{let L=D;do se(L)&&(L.data=L.data.replace(/^[\r\n]+/,"")),L=L.firstChild;while(L)})(W),P=W.firstChild,i.insertAfter(W,A),((D,L,F)=>{var X;const oe=[];if(!F)return;let te=F;for(;te=te.firstChild;){if(D.isBlock(te))return;xe(te)&&!L[te.nodeName.toLowerCase()]&&oe.push(te)}let Ce=oe.length;for(;Ce--;)te=oe[Ce],(!te.hasChildNodes()||te.firstChild===te.lastChild&&((X=te.firstChild)===null||X===void 0?void 0:X.nodeValue)===""||SO(D,te))&&D.remove(te)})(i,l,P),((D,L)=>{L.normalize();const F=L.lastChild;(!F||xe(F)&&/^(left|right)$/gi.test(D.getStyle(F,"float",!0)))&&D.add(L,"br")})(i,A),i.isEmpty(A)&&rg(A),P.normalize(),i.isEmpty(P)?(i.remove(P),w()):(Jl(e,P),yi(e,P))}i.setAttrib(P,"id",""),e.dispatch("NewBlock",{newBlock:P})},fakeEventName:"insertParagraph"},tS=(e,t,n)=>{const o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),_l(e,o)},EO=(e,t)=>{const n=O("br");wn(S(t),n),e.undoManager.add()},kO=(e,t)=>{_O(e.getBody(),t)||qo(S(t),O("br"));const n=O("br");qo(S(t),n),tS(e,n.dom,!1),e.undoManager.add()},_O=(e,t)=>{return n=G.after(t),!!qt(n.getNode())||Zn(e,G.after(t)).map(o=>qt(o.getNode())).getOr(!1);var n},nS=e=>e&&e.nodeName==="A"&&"href"in e,NO=e=>e.fold(St,nS,nS,St),AO=(e,t)=>{t.fold(Se,ye(EO,e),ye(kO,e),Se)},oS={insert:(e,t)=>{const n=(o=>{const r=ye(ga,o),s=G.fromRangeStart(o.selection.getRng());return Tr(r,o.getBody(),s).filter(NO)})(e);n.isSome()?n.each(ye(AO,e)):((o,r)=>{const s=o.selection,a=o.dom,i=s.getRng();let l,c=!1;cd(a,i).each(h=>{i.setStart(h.startContainer,h.startOffset),i.setEnd(h.endContainer,h.endOffset)});let d=i.startOffset,f=i.startContainer;if(xe(f)&&f.hasChildNodes()){const h=d>f.childNodes.length-1;f=f.childNodes[Math.min(d,f.childNodes.length-1)]||f,d=h&&se(f)?f.data.length:0}let m=a.getParent(f,a.isBlock);const b=m&&m.parentNode?a.getParent(m.parentNode,a.isBlock):null,g=b?b.nodeName.toUpperCase():"",y=!(!r||!r.ctrlKey);g!=="LI"||y||(m=b),se(f)&&d>=f.data.length&&(((h,w,E)=>{const k=new fn(w,E);let T;const A=h.getNonEmptyElements();for(;T=k.next();)if(A[T.nodeName.toLowerCase()]||se(T)&&T.length>0)return!0;return!1})(o.schema,f,m||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),Cf(a,i,l),tS(o,l,c),o.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},rS=(e,t)=>og(e).filter(n=>t.length>0&&$e(S(n),t)).isSome(),ho=lo([{br:[]},{block:[]},{none:[]}]),TO=(e,t)=>(n=>rS(n,l_(n)))(e),sS=e=>(t,n)=>(o=>og(o).filter(r=>Ga(S(r))).isSome())(t)===e,aS=(e,t)=>(n,o)=>(s=>og(s).fold(ue(""),a=>a.nodeName.toUpperCase()))(n)===e.toUpperCase()===t,RO=e=>{const t=Ql(e.dom,e.selection.getStart());return xt(t)},Zl=e=>aS("pre",e),nu=e=>(t,n)=>s_(t)===e,OO=(e,t)=>(n=>rS(n,i_(n)))(e),ou=(e,t)=>t,BO=e=>{const t=Mn(e),n=Ql(e.dom,e.selection.getStart());return ie(n)&&e.schema.isValidChild(n.nodeName,t)},DO=e=>{const t=e.selection.getRng(),n=S(t.startContainer),o=Wt(n,t.startOffset).map(r=>ko(r)&&!cs(r));return t.collapsed&&o.getOr(!0)},Io=(e,t)=>(n,o)=>gn(e,(r,s)=>r&&s(n,o),!0)?_.some(t):_.none(),ru=(e,t,n)=>{if(!t.mode.isReadOnly()){if(t.selection.isCollapsed()||(o=>{o.execCommand("delete")})(t),ie(n)&&Zd(t,e.fakeEventName).isDefaultPrevented())return;e.insert(t,n),ie(n)&&Gl(t,e.fakeEventName)}},iS=(e,t)=>{if(e.mode.isReadOnly())return;const n=()=>ru(oS,e,t),o=()=>ru(eS,e,t),r=((s,a)=>Q1([Io([TO],ho.none()),Io([Zl(!0),RO],ho.none()),Io([aS("summary",!0)],ho.br()),Io([Zl(!0),nu(!1),ou],ho.br()),Io([Zl(!0),nu(!1)],ho.block()),Io([Zl(!0),nu(!0),ou],ho.block()),Io([Zl(!0),nu(!0)],ho.br()),Io([sS(!0),ou],ho.br()),Io([sS(!0)],ho.block()),Io([OO],ho.br()),Io([ou],ho.br()),Io([BO],ho.block()),Io([DO],ho.block())],[s,!(!a||!a.shiftKey)]).getOr(ho.none()))(e,t);switch(a_(e)){case"linebreak":r.fold(n,n,Se);break;case"block":r.fold(o,o,Se);break;case"invert":r.fold(o,n,Se);break;default:r.fold(n,o,Se)}},lS=co(),PO=lS.os.isiOS()&&lS.browser.isSafari(),cS=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{iS(e,t)}))},LO=co(),dS=e=>e.stopImmediatePropagation(),uS=e=>e.keyCode===ve.PAGE_UP||e.keyCode===ve.PAGE_DOWN,fS=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",dS,!0):!n&&e.get()&&t.off("NodeChange",dS),e.set(n)},mS=(e,t)=>e===t||e.contains(t),pS=(e,t)=>{const n=t.container(),o=t.offset();return se(n)?(n.insertData(o,e),_.some(G(n,o+e.length))):Gc(t).map(r=>{const s=H(e);return t.isAtEnd()?qo(r,s):wn(r,s),G(s.dom,e.length)})},gS=ye(pS,zt),hS=ye(pS," "),bS=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},MO=e=>{const t=G.fromRangeStart(e.selection.getRng()),n=S(e.getBody());if(e.selection.isCollapsed()){const o=ye(ga,e),r=G.fromRangeStart(e.selection.getRng());return Tr(o,e.getBody(),r).bind((s=>a=>a.fold(i=>no(s.dom,G.before(i)),i=>In(i),i=>Vo(i),i=>Zn(s.dom,G.after(i))))(n)).map(s=>()=>((a,i,l)=>c=>zv(a,c,l)?gS(i):hS(i))(n,t,e.schema)(s).each(bS(e)))}return _.none()},IO=e=>{return Co(ut.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const o=S(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((r,s,a)=>zv(r,s,a)?gS(s):hS(s))(o,G.fromRangeStart(e.selection.getRng()),e.schema).each(bS(e))});var t,n},FO=e=>gN(e)?[{keyCode:ve.TAB,action:qe(Cx,e,!0)},{keyCode:ve.TAB,shiftKey:!0,action:qe(Cx,e,!1)}]:[],jO=e=>{if(e.addShortcut("Meta+P","","mcePrint"),yO(e),Ar(e))return en(null);{const t=_R(e);return(n=>{n.on("beforeinput",o=>{n.selection.isEditable()&&!Et(o.getTargetRanges(),r=>!((s,a)=>!mS(s.getBody(),a.startContainer)||!mS(s.getBody(),a.endContainer)||sv(s.dom,a))(n,r))||o.preventDefault()})})(e),(n=>{n.on("keyup compositionstart",ye(MR,n))})(e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=ut.os.isMacOS()||ut.os.isiOS();Vl([{keyCode:ve.RIGHT,action:qe($w,s,!0)},{keyCode:ve.LEFT,action:qe($w,s,!1)},{keyCode:ve.UP,action:qe(Ww,s,!1)},{keyCode:ve.DOWN,action:qe(Ww,s,!0)},...l?[{keyCode:ve.UP,action:qe(Hd,s,!1),metaKey:!0,shiftKey:!0},{keyCode:ve.DOWN,action:qe(Hd,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ve.RIGHT,action:qe(hx,s,!0)},{keyCode:ve.LEFT,action:qe(hx,s,!1)},{keyCode:ve.UP,action:qe(Xp,s,!1)},{keyCode:ve.DOWN,action:qe(Xp,s,!0)},{keyCode:ve.UP,action:qe(Xp,s,!1)},{keyCode:ve.UP,action:qe(Xw,s,!1)},{keyCode:ve.DOWN,action:qe(Xw,s,!0)},{keyCode:ve.RIGHT,action:qe(Jw,s,!0)},{keyCode:ve.LEFT,action:qe(Jw,s,!1)},{keyCode:ve.UP,action:qe(Zw,s,!1)},{keyCode:ve.DOWN,action:qe(Zw,s,!0)},{keyCode:ve.RIGHT,action:qe(ww,s,a,!0)},{keyCode:ve.LEFT,action:qe(ww,s,a,!1)},{keyCode:ve.RIGHT,ctrlKey:!l,altKey:l,action:qe(NR,s,a)},{keyCode:ve.LEFT,ctrlKey:!l,altKey:l,action:qe(AR,s,a)},{keyCode:ve.UP,action:qe(Kw,s,!1)},{keyCode:ve.DOWN,action:qe(Kw,s,!0)}],i).each(c=>{i.preventDefault()})})(n,o,r)})})(e,t),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===ve.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===ve.BACKSPACE?"deleteContentBackward":"deleteContentForward",d=a.selection.isCollapsed(),f=d?"character":"selection",m=b=>d?b?"word":"line":"selection";Qw([{keyCode:ve.BACKSPACE,action:qe(Mw,a)},{keyCode:ve.BACKSPACE,action:qe(_p,a,!1)},{keyCode:ve.DELETE,action:qe(_p,a,!0)},{keyCode:ve.BACKSPACE,action:qe(Sp,a,!1)},{keyCode:ve.DELETE,action:qe(Sp,a,!0)},{keyCode:ve.BACKSPACE,action:qe(Mp,a,i,!1)},{keyCode:ve.DELETE,action:qe(Mp,a,i,!0)},{keyCode:ve.BACKSPACE,action:qe(Tm,a,!1)},{keyCode:ve.DELETE,action:qe(Tm,a,!0)},{keyCode:ve.BACKSPACE,action:qe(xa,a,!1,f)},{keyCode:ve.DELETE,action:qe(xa,a,!0,f)},...Yx?[{keyCode:ve.BACKSPACE,altKey:!0,action:qe(xa,a,!1,m(!0))},{keyCode:ve.DELETE,altKey:!0,action:qe(xa,a,!0,m(!0))},{keyCode:ve.BACKSPACE,metaKey:!0,action:qe(xa,a,!1,m(!1))}]:[{keyCode:ve.BACKSPACE,ctrlKey:!0,action:qe(xa,a,!1,m(!0))},{keyCode:ve.DELETE,ctrlKey:!0,action:qe(xa,a,!0,m(!0))}],{keyCode:ve.BACKSPACE,action:qe(Ap,a,!1)},{keyCode:ve.DELETE,action:qe(Ap,a,!0)},{keyCode:ve.BACKSPACE,action:qe(jp,a,!1)},{keyCode:ve.DELETE,action:qe(jp,a,!0)},{keyCode:ve.BACKSPACE,action:qe(wp,a,!1)},{keyCode:ve.DELETE,action:qe(wp,a,!0)},{keyCode:ve.BACKSPACE,action:qe(Cp,a,!1)},{keyCode:ve.DELETE,action:qe(Cp,a,!0)},{keyCode:ve.BACKSPACE,action:qe(Ip,a,!1)},{keyCode:ve.DELETE,action:qe(Ip,a,!0)},{keyCode:ve.BACKSPACE,action:qe(Np,a,!1)},{keyCode:ve.DELETE,action:qe(Np,a,!0)}],l).filter(b=>a.selection.isEditable()).each(b=>{l.preventDefault(),Zd(a,c).isDefaultPrevented()||(b(),Gl(a,c))})})(n,o,s)}),n.on("keyup",s=>{s.isDefaultPrevented()||((a,i,l)=>{Vl([{keyCode:ve.BACKSPACE,action:qe(U1,a)},{keyCode:ve.DELETE,action:qe(U1,a)},...Yx?[{keyCode:ve.BACKSPACE,altKey:!0,action:qe(Wl,a)},{keyCode:ve.DELETE,altKey:!0,action:qe(Wl,a)},...l?[{keyCode:xO?224:91,action:qe(Wl,a)}]:[]]:[{keyCode:ve.BACKSPACE,ctrlKey:!0,action:qe(Wl,a)},{keyCode:ve.DELETE,ctrlKey:!0,action:qe(Wl,a)}]],i)})(n,s,r),r=!1})})(e,t),(n=>{let o=_.none();n.on("keydown",r=>{r.keyCode===ve.ENTER&&(PO&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(se(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(s=>{o=_.some(s.selection.getBookmark()),s.undoManager.add()})(n):cS(n,r))}),n.on("keyup",r=>{r.keyCode===ve.ENTER&&o.each(()=>((s,a)=>{s.undoManager.undo(),o.fold(Se,i=>s.selection.moveToBookmark(i)),cS(s,a),o=_.none()})(n,r))})})(e),(n=>{n.on("keydown",o=>{o.isDefaultPrevented()||((r,s)=>{Qw([{keyCode:ve.SPACEBAR,action:qe(MO,r)},{keyCode:ve.SPACEBAR,action:qe(IO,r)}],s).each(a=>{s.preventDefault(),Zd(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),Gl(r,"insertText",{data:" "}))})})(n,o)})})(e),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=S(r.getBody());r.selection.isCollapsed()&&CA(s,G.fromRangeStart(r.selection.getRng()),r.schema).each(a=>{r.selection.setRng(a.toRange())})})(n)})})(e),(n=>{n.on("keydown",o=>{o.isDefaultPrevented()||((r,s)=>{Vl([...FO(r)],s).each(a=>{s.preventDefault()})})(n,o)})})(e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=ut.os.isMacOS()||ut.os.isiOS();Vl([{keyCode:ve.END,action:qe(Vw,s,!0)},{keyCode:ve.HOME,action:qe(Vw,s,!1)},...l?[]:[{keyCode:ve.HOME,action:qe(Hd,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ve.END,action:qe(Hd,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ve.END,action:qe(ex,s,!0)},{keyCode:ve.HOME,action:qe(ex,s,!1)},{keyCode:ve.END,action:qe(Ud,s,!0,a)},{keyCode:ve.HOME,action:qe(Ud,s,!1,a)}],i).each(c=>{i.preventDefault()})})(n,o,r)})})(e,t),((n,o)=>{if(LO.os.isMacOS())return;const r=en(!1);n.on("keydown",s=>{uS(s)&&fS(r,n,!0)}),n.on("keyup",s=>{s.isDefaultPrevented()||((a,i,l)=>{Vl([{keyCode:ve.PAGE_UP,action:qe(Ud,a,!1,i)},{keyCode:ve.PAGE_DOWN,action:qe(Ud,a,!0,i)}],l)})(n,o,s),uS(s)&&r.get()&&(fS(r,n,!1),n.nodeChanged())})})(e,t),t}};class zO{constructor(t){let n;this.lastPath=[],this.editor=t;const o=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",r=>{const s=t.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};r.type!=="nodechange"&&am(a,n)||t.dispatch("SelectionChange"),n=a}),t.on("contextmenu",()=>{sd(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const r=t.selection.getStart(!0);r&&td(t)&&!o.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",r=>{!r.isDefaultPrevented()&&td(t)&&(t.selection.getNode().nodeName==="IMG"?Do.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor,o=n.selection;let r;if(n.initialized&&o&&!j_(n)&&!Xc(n)){const s=n.getBody();r=o.getStart(!0)||s,r.ownerDocument===n.getDoc()&&n.dom.isChildOf(r,s)||(r=s);const a=[];n.dom.getParent(r,i=>i===s||(a.push(i),!1)),n.dispatch("NodeChange",{...t,element:r,parents:a})}}isSameElementPath(t){let n;const o=this.editor,r=Go(o.dom.getParents(t,jt,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=r,!0}return this.lastPath=r,!1}}const vS="x-tinymce/html",su=ue(vS),cg="<!-- "+vS+" -->",UO=e=>cg+e,yS=e=>e.indexOf(cg)!==-1,CS="%MCEPASTEBIN%",dg=e=>e.dom.get("mcepastebin"),HO=e=>ie(e)&&e.id==="mcepastebin",wS=e=>e===CS,xS=(e,t)=>(v.each(t,n=>{e=yo(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])}),e),SS=e=>xS(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,o)=>n||o?zt:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),ES=(e,t)=>({content:e,cancelled:t}),ug=(e,t)=>(e.insertContent(t,{merge:oN(e),paste:!0}),!0),fg=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),qO=(e,t,n)=>!(e.selection.isCollapsed()||!fg(t))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),!0))(e,t,n),$O=(e,t,n)=>!!((o,r)=>fg(r)&&Et(H0(o),s=>Ra(r.toLowerCase(),`.${s.toLowerCase()}`)))(e,t)&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(e,t,n),WO=(()=>{let e=0;return()=>"mceclip"+e++})(),VO=e=>{const t=Kp();return ux(t,e),Vp(t),t},kS=(e,t,n,o,r)=>{const s=((a,i,l)=>((c,d,f)=>{const m=((g,y,h)=>g.dispatch("PastePreProcess",{content:y,internal:h}))(c,d,f),b=((g,y)=>{const h=fi({sanitize:U0(g),sandbox_iframes:q0(g),sandbox_iframes_exclusions:Rf(g),convert_unsafe_embeds:vN(g)},g.schema);h.addNodeFilter("meta",E=>{v.each(E,k=>{k.remove()})});const w=h.parse(y,{forced_root_block:!1,isRootContent:!0});return vs({validate:!0},g.schema).serialize(w)})(c,m.content);return c.hasEventListeners("PastePostProcess")&&!m.isDefaultPrevented()?((g,y,h)=>{const w=g.dom.create("div",{style:"display:none"},y),E=((k,T,A)=>k.dispatch("PastePostProcess",{node:T,internal:A}))(g,w,h);return ES(E.node.innerHTML,E.isDefaultPrevented())})(c,b,f):ES(b,m.isDefaultPrevented())})(a,i,l))(e,t,n);if(!s.cancelled){const a=s.content,i=()=>((l,c,d)=>{d||!rN(l)?ug(l,c):((f,m)=>{v.each([qO,$O,ug],b=>!b(f,m,ug))})(l,c)})(e,a,o);r?Zd(e,"insertFromPaste",{dataTransfer:VO(a)}).isDefaultPrevented()||(i(),Gl(e,"insertFromPaste")):i()}},au=(e,t,n,o)=>{const r=n||yS(t);kS(e,(s=>s.replace(cg,""))(t),r,!1,o)},mg=(e,t,n)=>{const o=e.dom.encode(t).replace(/\r\n/g,`
`),r=((s,a,i)=>{const l=s.split(/\n\n/),c=((m,b)=>{let g="<"+m;const y=vr(b,(h,w)=>w+'="'+ea.encodeAllRaw(h)+'"');return y.length&&(g+=" "+y.join(" ")),g+">"})(a,i),d="</"+a+">",f=ot(l,m=>m.split(/\n/).join("<br />"));return f.length===1?f[0]:ot(f,m=>c+m+d).join("")})(Jg(o,aN(e)),Mn(e),pl(e));kS(e,r,!1,!0,n)},_S=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const o=e.types[n];try{t[o]=e.getData(o)}catch{t[o]=""}}return t},Es=(e,t)=>t in e&&e[t].length>0,NS=e=>Es(e,"text/html")||Es(e,"text/plain"),AS=(e,t,n)=>{const o=t.type==="paste"?t.clipboardData:t.dataTransfer;var r;if(Kc(e)&&o){const s=((a,i)=>{const l=i.items?Jt(hn(i.items),d=>d.kind==="file"?[d.getAsFile()]:[]):[],c=i.files?hn(i.files):[];return Ve(l.length>0?l:c,(d=>{const f=H0(d);return m=>$t(m.type,"image/")&&Et(f,b=>(g=>{const y=g.toLowerCase(),h={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return v.hasOwn(h,y)?"image/"+h[y]:"image/"+y})(b)===m.type)})(a))})(e,o);if(s.length>0)return t.preventDefault(),(r=s,Promise.all(ot(r,a=>dC(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&e.selection.setRng(n),Q(a,i=>{((l,c)=>{Gm(c.uri).each(({data:d,type:f,base64Encoded:m})=>{const b=m?d:btoa(d),g=c.file,y=l.editorUpload.blobCache,h=y.getByData(b,f),w=h??((E,k,T,A)=>{const B=WO(),M=T0(E)&&ie(T.name),P=M?((D,L)=>{const F=L.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ie(F)?D.dom.encode(F[1]):void 0})(E,T.name):B,z=M?T.name:void 0,W=k.create(B,T,A,P,z);return k.add(W),W})(l,y,g,b);au(l,`<img src="${w.blobUri()}">`,!1,!0)})})(e,i)})}),!0}return!1},pg=(e,t,n,o,r)=>{let s=SS(n);const a=Es(t,su())||yS(n),i=!a&&(c=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c))(s),l=fg(s);(wS(s)||!s.length||i&&!l)&&(o=!0),(o||l)&&(s=Es(t,"text/plain")&&i?t["text/plain"]:(c=>{const d=us(),f=fi({},d);let m="";const b=d.getVoidElements(),g=v.makeMap("script noscript style textarea video audio iframe object"," "),y=d.getBlockElements(),h=w=>{const E=w.name,k=w;if(E!=="br"){if(E!=="wbr")if(b[E]&&(m+=" "),g[E])m+=" ";else{if(w.type===3&&(m+=w.value),!(w.name in d.getVoidElements())){let T=w.firstChild;if(T)do h(T);while(T=T.next)}y[E]&&k.next&&(m+=`
`,E==="p"&&(m+=`
`))}}else m+=`
`};return c=xS(c,[/<!\[[^\]]+\]>/g]),h(f.parse(c)),m})(s)),wS(s)||(o?mg(e,s,r):au(e,s,a,r))},KO=(e,t,n)=>{((o,r,s)=>{let a;o.on("keydown",i=>{(l=>ve.metaKeyPressed(l)&&l.keyCode===86||l.shiftKey&&l.keyCode===45)(i)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&i.keyCode===86)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(d=>{var f,m;return ut.os.isAndroid()&&((m=(f=d.clipboardData)===null||f===void 0?void 0:f.items)===null||m===void 0?void 0:m.length)===0})(i))return;const l=s.get()==="text"||a;a=!1;const c=_S(i.clipboardData);!NS(c)&&AS(o,i,r.getLastRng()||o.selection.getRng())||(Es(c,"text/html")?(i.preventDefault(),pg(o,c,c["text/html"],l,!0)):Es(c,"text/plain")&&Es(c,"text/uri-list")?(i.preventDefault(),pg(o,c,c["text/plain"],l,!0)):(r.create(),Do.setEditorTimeout(o,()=>{const d=r.getHtml();r.remove(),pg(o,c,d,l,!1)},0)))})})(e,t,n),(o=>{const r=a=>$t(a,"webkit-fake-url"),s=a=>$t(a,"data:");o.parser.addNodeFilter("img",(a,i,l)=>{if(!Kc(o)&&(c=>{var d;return((d=c.data)===null||d===void 0?void 0:d.paste)===!0})(l))for(const c of a){const d=c.attr("src");Ae(d)&&!c.attr("data-mce-object")&&d!==ut.transparentSrc&&(r(d)||!iN(o)&&s(d))&&c.remove()}})})(e)},TS=(e,t,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(su(),s),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},RS=e=>(t,n)=>{const{dom:o,selection:r}=e,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},t);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(e.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),Do.setEditorTimeout(e,()=>{r.setRng(i),o.remove(s),n()},0)},OS=e=>({html:UO(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),BS=e=>!e.selection.isCollapsed()||(t=>!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()))(e),DS=(e,t)=>{var n,o;return ma.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(o=t.clientY)!==null&&o!==void 0?o:0,e.getDoc())},PS=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},XO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,LS=e=>v.trim(e).replace(XO,tl).toLowerCase(),YO=(e,t,n)=>{const o=tN(e);if(n||o==="all"||!nN(e))return t;const r=o?o.split(/[, ]/):[];if(r&&o!=="none"){const s=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,d)=>{const f=s.parseStyle(s.decode(c)),m={};for(let g=0;g<r.length;g++){const y=f[r[g]];let h=y,w=s.getStyle(a,r[g],!0);/color/.test(r[g])&&(h=LS(h),w=LS(w)),w!==h&&(m[r[g]]=y)}const b=s.serializeStyle(m,"span");return b?l+' style="'+b+'"'+d:l+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l),t},GO=e=>{const t=en(!1),n=en(sN(e)?"text":"html"),o=(r=>{const s=en(null);return{create:()=>((a,i)=>{const{dom:l,selection:c}=a,d=a.getBody();i.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},CS);ut.browser.isFirefox()&&l.setStyle(f,"left",l.getStyle(d,"direction",!0)==="rtl"?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),f.focus(),c.select(f,!0)})(r,s),remove:()=>((a,i)=>{const l=a.dom;if(dg(a)){let c;const d=i.get();for(;c=dg(a);)l.remove(c),l.unbind(c);d&&a.selection.setRng(d)}i.set(null)})(r,s),getEl:()=>dg(r),getHtml:()=>(a=>{const i=a.dom,l=(m,b)=>{m.appendChild(b),i.remove(b,!0)},[c,...d]=Ve(a.getBody().childNodes,HO);Q(d,m=>{l(c,m)});const f=i.select("div[id=mcepastebin]",c);for(let m=f.length-1;m>=0;m--){const b=i.create("div");c.insertBefore(b,f[m]),l(b,f[m])}return c?c.innerHTML:""})(r),getLastRng:s.get}})(e);(r=>{(ut.browser.isChromium()||ut.browser.isSafari())&&((s,a)=>{s.on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})})(r,YO)})(e),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{i.get()==="text"?(i.set("html"),S0(a,!1)):(i.set("text"),S0(a,!0)),a.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&au(r,i.html,i.internal,!1),i.text&&mg(r,i.text,!1)})})(e,n),(r=>{const s=l=>c=>{l(r,c)},a=J_(r);gt(a)&&r.on("PastePreProcess",s(a));const i=Z_(r);gt(i)&&r.on("PastePostProcess",s(i))})(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>n.get()==="text"),e.on("PreInit",()=>{(r=>{r.on("cut",(s=>a=>{!a.isDefaultPrevented()&&BS(s)&&s.selection.isEditable()&&TS(a,OS(s),RS(s),()=>{if(ut.browser.isChromium()||ut.browser.isFirefox()){const i=s.selection.getRng();Do.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>a=>{!a.isDefaultPrevented()&&BS(s)&&TS(a,OS(s),RS(s),Se)})(r))})(e),((r,s)=>{Q_(r)&&r.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Kc(r)||r.on("drop",a=>{const i=a.dataTransfer;i&&(l=>Et(l.files,c=>/^image\//.test(c.type)))(i)&&a.preventDefault()}),r.on("drop",a=>{if(a.isDefaultPrevented())return;const i=DS(r,a);if(xt(i))return;const l=_S(a.dataTransfer),c=Es(l,su());if((!NS(l)||(g=>{const y=g["text/plain"];return!!y&&y.indexOf("file://")===0})(l))&&AS(r,a,i))return;const d=l[su()],f=d||l["text/html"]||l["text/plain"],m=((g,y,h,w)=>{const E=g.getParent(h,k=>Js(y,k));if(!Je(g.getParent(h,"summary")))return!0;if(E&&Ie(w,"text/html")){const k=new DOMParser().parseFromString(w["text/html"],"text/html").body;return!Je(k.querySelector(E.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,i.startContainer,l),b=s.get();b&&!m||f&&(a.preventDefault(),Do.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{(d||b&&m)&&r.execCommand("Delete"),PS(r,i);const g=SS(f);l["text/html"]?au(r,g,c,!0):mg(r,g,!0)})}))}),r.on("dragstart",a=>{s.set(!0)}),r.on("dragover dragend",a=>{Kc(r)&&!s.get()&&(a.preventDefault(),PS(r,DS(r,a))),a.type==="dragend"&&s.set(!1)}),(a=>{a.on("input",i=>{const l=c=>Je(c.querySelector("summary"));if(i.inputType==="deleteByDrag"){const c=Ve(a.dom.select("details"),l);Q(c,d=>{qt(d.firstChild)&&d.firstChild.remove();const f=a.dom.create("summary");f.appendChild(Qa().dom),d.prepend(f)})}})})(r)})(e,t),KO(e,o,n)})},QO=qt,MS=se,JO=e=>Dt(e.dom),IS=e=>t=>_e(S(e),t),FS=(e,t)=>ls(S(e),JO,IS(t)),jS=(e,t,n)=>{const o=new fn(e,t),r=n?o.next.bind(o):o.prev.bind(o);let s=e;for(let a=n?e:r();a&&!QO(a);a=r())sr(a)&&(s=a);return s},ZO=e=>{const t=((n,o,r)=>{const s=G.fromRangeStart(n).getNode(),a=((d,f,m)=>ls(S(d),b=>(g=>Wo(g.dom))(b)||m.isBlock(st(b)),IS(f)).getOr(S(f)).dom)(s,o,r),i=jS(s,a,!1),l=jS(s,a,!0),c=document.createRange();return FS(i,a).fold(()=>{MS(i)?c.setStart(i,0):c.setStartBefore(i)},d=>c.setStartBefore(d.dom)),FS(l,a).fold(()=>{MS(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)},d=>c.setEndAfter(d.dom)),c})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Lm(t))};var Ci;(function(e){e.Before="before",e.After="after"})(Ci||(Ci={}));const eB=(e,t)=>Math.abs(e.left-t),tB=(e,t)=>Math.abs(e.right-t),nB=(e,t)=>(n=>gn(n,(o,r)=>o.fold(()=>_.some(r),s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),c=Math.max(r.bottom,s.bottom);return _.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}),_.none()))(Ve(e,n=>{return(o=t)>=(r=n).top&&o<=r.bottom;var o,r})).fold(()=>[[],e],n=>{const{pass:o,fail:r}=zo(e,s=>((a,i)=>{const l=((c,d)=>Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top)))(a,i)/Math.min(a.height,i.height);return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(a,i)&&l>.5})(s,n));return[o,r]}),oB=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),gg=(e,t,n,o)=>{const r=d=>sr(d.node)?_.some(d):xe(d.node)?gg(hn(d.node.childNodes),t,n,!1):_.none(),s=(d,f)=>{const m=Ir(d,(b,g)=>f(b,t,n)-f(g,t,n));return Qn(m,r).map(b=>o&&!se(b.node)&&m.length>1?((g,y,h)=>r(y).filter(w=>Math.abs(h(g,t,n)-h(w,t,n))<2&&se(w.node)))(b,m[1],f).getOr(b):b)},[a,i]=nB(fw(e),n),{pass:l,fail:c}=zo(i,d=>d.top<n);return s(a,oB).orThunk(()=>s(c,Wh)).orThunk(()=>s(l,Wh))},zS=(e,t,n)=>((o,r,s)=>{const a=S(o),i=Rn(a),l=K(i,r,s).filter(c=>Ot(a,c)).getOr(a);return((c,d,f,m)=>{const b=(g,y)=>{const h=Ve(g.dom.childNodes,dr(w=>xe(w)&&w.classList.contains("mce-drag-container")));return y.fold(()=>gg(h,f,m,!0),w=>{const E=Ve(h,k=>k!==w.dom);return gg(E,f,m,!0)}).orThunk(()=>(_e(g,c)?_.none():On(g)).bind(w=>b(w,_.some(g))))};return b(d,_.none())})(a,l,r,s)})(e,t,n).filter(o=>bl(o.node)).map(o=>((r,s)=>({node:r.node,position:eB(r,s)<tB(r,s)?Ci.Before:Ci.After}))(o,t)),US=e=>{var t,n;const o=e.getBoundingClientRect(),r=e.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+((t=a?.scrollY)!==null&&t!==void 0?t:0)-s.clientTop,left:o.left+((n=a?.scrollX)!==null&&n!==void 0?n:0)-s.clientLeft}},HS=e=>({target:e,srcElement:e}),rB=(e,t,n,o)=>{const r=((s,a)=>{const i=(l=>{const c=Kp(),d=(f=>{const m=f;return _.from(m[Wp])})(l);return Vp(l),ax(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(f=>{const m=f;return _.from(m[sx])})(l).each(f=>c.setDragImage(f.image,f.x,f.y)),Q(l.types,f=>{f!=="Files"&&c.setData(f,l.getData(f))}),Q(l.files,f=>c.items.add(f)),(f=>{const m=f;return _.from(m[$p])})(l).each(f=>{((m,b)=>{qd(b)(m)})(c,f)}),d.each(f=>{ix(l,f),ix(c,f)}),c})(s);return a==="dragstart"?(ax(i),lx(i)):a==="drop"?(FR(i),Vp(i)):(jR(i),UR(i)),i})(n,e);return It(o)?((s,a,i)=>{const l=io("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:Se,stopImmediatePropagation:Se,stopPropagation:Se,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...HS(a)}})(e,t,r):((s,a,i,l)=>({...a,dataTransfer:l,type:s,...HS(i)}))(e,o,t,r)},qS=Dt,sB=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(qS,Wo),aB=(e,t,n,o)=>{const r=e.dom,s=t.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},iu=(e,t)=>n=>()=>{const o=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:o+t,behavior:"smooth"})},$S=iu("left",-32),WS=iu("left",32),VS=iu("top",-32),KS=iu("top",32),XS=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},ec=(e,t,n,o,r)=>{t==="dragstart"&&ux(o,e.dom.getOuterHTML(n));const s=rB(t,n,o,r);return e.dispatch(t,s)},iB=(e,t)=>{const n=Fs((r,s)=>((a,i,l)=>{a._selectionOverrides.hideFakeCaret(),zS(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),c=>{const d=a._selectionOverrides.showCaret(1,c.node,c.position===Ci.Before,!1);d?a.selection.setRng(d):a.selection.placeCaretAt(i,l)})})(t,r,s),0);t.on("remove",n.cancel);const o=e;return r=>e.on(s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){const c=ec(t,"dragstart",s.element,s.dataTransfer,r);if(ie(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,t.focus()}if(s.dragging){const c=r.currentTarget===t.getDoc().documentElement,d=((f,m)=>({pageX:m.pageX-f.relX,pageY:m.pageY+5}))(s,((f,m)=>{return b=(h=>h.inline?US(h.getBody()):{left:0,top:0})(f),g=(h=>{const w=h.getBody();return h.inline?{left:w.scrollLeft,top:w.scrollTop}:{left:0,top:0}})(f),y=((h,w)=>{if(w.target.ownerDocument!==h.getDoc()){const E=US(h.getContentAreaContainer()),k=(T=>{const A=T.getBody(),B=T.getDoc().documentElement,M={left:A.scrollLeft,top:A.scrollTop},P={left:A.scrollLeft||B.scrollLeft,top:A.scrollTop||B.scrollTop};return T.inline?M:P})(h);return{left:w.pageX-E.left+k.left,top:w.pageY-E.top+k.top}}return{left:w.pageX,top:w.pageY}})(f,m),{pageX:y.left-b.left+g.left,pageY:y.top-b.top+g.top};var b,g,y})(t,r));i=s.ghost,l=t.getBody(),i.parentNode!==l&&l.appendChild(i),((f,m,b,g,y,h,w,E,k,T,A,B)=>{let M=0,P=0;f.style.left=m.pageX+"px",f.style.top=m.pageY+"px",m.pageX+b>y&&(M=m.pageX+b-y),m.pageY+g>h&&(P=m.pageY+g-h),f.style.width=b-M+"px",f.style.height=g-P+"px";const z=k.clientHeight,W=k.clientWidth,D=w+k.getBoundingClientRect().top,L=E+k.getBoundingClientRect().left;A.on(F=>{F.intervalId.clear(),F.dragging&&B&&(w+8>=z?F.intervalId.set(KS(T)):w-8<=0?F.intervalId.set(VS(T)):E+8>=W?F.intervalId.set(WS(T)):E-8<=0?F.intervalId.set($S(T)):D+16>=window.innerHeight?F.intervalId.set(KS(window)):D-16<=0?F.intervalId.set(VS(window)):L+16>=window.innerWidth?F.intervalId.set(WS(window)):L-16<=0&&F.intervalId.set($S(window)))})})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,t.getContentAreaContainer(),t.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var i,l})},YS=(e,t,n)=>{e.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>ec(t,"dragend",o.element,o.dataTransfer),r=>ec(t,"dragend",o.element,o.dataTransfer,r))}),GS(e)},GS=e=>{e.on(t=>{t.intervalId.clear(),XS(t.ghost)}),e.clear()},lB=e=>{const t=wo(),n=Rt.DOM,o=document,r=((l,c)=>d=>{if((f=>f.button===0)(d)){const f=Qt(c.dom.getParents(d.target),sB).getOr(null);if(ie(f)&&((m,b,g)=>qS(g)&&g!==b&&m.isEditable(g.parentElement))(c.dom,c.getBody(),f)){const m=c.dom.getPos(f),b=c.getBody(),g=c.getDoc().documentElement;l.set({element:f,dataTransfer:Kp(),dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?b.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?b.scrollHeight:g.offsetHeight)-2,relX:d.pageX-m.x,relY:d.pageY-m.y,width:f.offsetWidth,height:f.offsetHeight,ghost:aB(c,f,f.offsetWidth,f.offsetHeight),intervalId:Oi(100)})}}})(t,e),s=iB(t,e),a=((l,c)=>d=>{l.on(f=>{var m;if(f.intervalId.clear(),f.dragging){if(((b,g,y)=>!xt(g)&&g!==y&&!b.dom.isChildOf(g,y)&&b.dom.isEditable(g))(c,(b=>{const g=b.getSel();if(ie(g)){const y=g.getRangeAt(0).startContainer;return se(y)?y.parentNode:y}return null})(c.selection),f.element)){const b=(m=c.getDoc().elementFromPoint(d.clientX,d.clientY))!==null&&m!==void 0?m:c.getBody();ec(c,"drop",b,f.dataTransfer,d).isDefaultPrevented()||c.undoManager.transact(()=>{((g,y)=>{const h=g.getParent(y.parentNode,g.isBlock);XS(y),h&&h!==g.getRoot()&&g.isEmpty(h)&&fs(S(h))})(c.dom,f.element),(g=>{const y=g.getData("text/html");return y===""?_.none():_.some(y)})(f.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}ec(c,"dragend",c.getBody(),f.dataTransfer,d)}}),GS(l)})(t,e),i=((l,c)=>d=>YS(l,c,_.some(d)))(t,e);e.on("mousedown",r),e.on("mousemove",s),e.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),e.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)}),e.on("keydown",l=>{l.keyCode===ve.ESC&&YS(t,e,_.none())})},tc=Dt,QS=(e,t)=>ha(e.getBody(),t),cB=e=>{const t=e.selection,n=e.dom,o=e.getBody(),r=_N(e,o,n.isBlock,()=>di(e)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=h=>h!==o&&(tc(h)||xr(h))&&n.isChildOf(h,o)&&n.isEditable(h.parentNode),c=(h,w,E,k=!0)=>e.dispatch("ShowCaret",{target:w,direction:h,before:E}).isDefaultPrevented()?null:(k&&t.scrollIntoView(w,h===-1),r.show(E,w)),d=h=>Ao(h)||jc(h)||zc(h),f=h=>d(h.startContainer)||d(h.endContainer),m=h=>{const w=e.schema.getVoidElements(),E=n.createRng(),k=h.startContainer,T=h.startOffset,A=h.endContainer,B=h.endOffset;return Ie(w,k.nodeName.toLowerCase())?T===0?E.setStartBefore(k):E.setStartAfter(k):E.setStart(k,T),Ie(w,A.nodeName.toLowerCase())?B===0?E.setEndBefore(A):E.setEndAfter(A):E.setEnd(A,B),E},b=(h,w)=>{if(!h)return null;if(h.collapsed){if(!f(h)){const A=w?1:-1,B=wl(A,o,h),M=B.getNode(!w);if(ie(M)){if(bl(M))return c(A,M,!!w&&!B.isAtEnd(),!1);if(ms(M)&&Dt(M.nextSibling)){const z=n.createRng();return z.setStart(M,0),z.setEnd(M,0),z}}const P=B.getNode(w);if(ie(P)){if(bl(P))return c(A,P,!w&&!B.isAtEnd(),!1);if(ms(P)&&Dt(P.previousSibling)){const z=n.createRng();return z.setStart(P,1),z.setEnd(P,1),z}}}return null}let E=h.startContainer,k=h.startOffset;const T=h.endOffset;if(se(E)&&k===0&&tc(E.parentNode)&&(E=E.parentNode,k=n.nodeIndex(E),E=E.parentNode),!xe(E))return null;if(T===k+1&&E===h.endContainer){const A=E.childNodes[k];if(l(A))return(B=>{const M=B.cloneNode(!0),P=e.dispatch("ObjectSelected",{target:B,targetClone:M});if(P.isDefaultPrevented())return null;const z=((D,L)=>{const F=S(e.getBody()),X=e.getDoc(),oe=kc(F,"#"+s).getOrThunk(()=>{const Ne=R('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',X);return Ee(Ne,"id",s),q(F,Ne),Ne}),te=n.createRng();bt(oe),ne(oe,[H(zt,X),S(L),H(zt,X)]),te.setStart(oe.dom.firstChild,1),te.setEnd(oe.dom.lastChild,0),Xs(oe,{top:n.getPos(D,e.getBody()).y+"px"}),Ws(oe);const Ce=t.getSel();return Ce&&(Ce.removeAllRanges(),Ce.addRange(te)),te})(B,P.targetClone),W=S(B);return Q(Pn(S(e.getBody()),`*[${a}]`),D=>{_e(W,D)||Ge(D,a)}),n.getAttrib(B,a)||B.setAttribute(a,"1"),i=B,y(),z})(A)}return null},g=()=>{i&&i.removeAttribute(a),kc(S(e.getBody()),"#"+s).each(Be),i=null},y=()=>{r.hide()};return Ar(e)||(e.on("click",h=>{n.isEditable(h.target)||(h.preventDefault(),e.focus())}),e.on("blur NewBlock",g),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",h=>{const w=h.target,E=QS(e,w);tc(E)?(h.preventDefault(),Hl(e,E).each(b)):l(w)&&Hl(e,w).each(b)},!0),e.on("mousedown",h=>{const w=h.target;if(w!==o&&w.nodeName!=="HTML"&&!n.isChildOf(w,o)||!((k,T,A)=>{const B=S(k.getBody()),M=k.inline?B:S(Rn(B).dom.documentElement),P=((z,W,D,L)=>{const F=(X=>X.dom.getBoundingClientRect())(W);return{x:D-(z?F.left+W.dom.clientLeft+qT(W):0),y:L-(z?F.top+W.dom.clientTop+HT(W):0)}})(k.inline,M,T,A);return((z,W,D)=>{const L=zT(z),F=UT(z);return W>=0&&D>=0&&W<=L&&D<=F})(M,P.x,P.y)})(e,h.clientX,h.clientY))return;g(),y();const E=QS(e,w);tc(E)?(h.preventDefault(),Hl(e,E).each(b)):zS(o,h.clientX,h.clientY).each(k=>{var T;h.preventDefault(),(T=c(1,k.node,k.position===Ci.Before,!1))&&t.setRng(T),Cr(E)?E.focus():e.getBody().focus()})}),e.on("keypress",h=>{ve.modifierPressed(h)||tc(t.getNode())&&h.preventDefault()}),e.on("GetSelectionRange",h=>{let w=h.range;if(i){if(!i.parentNode)return void(i=null);w=w.cloneRange(),w.selectNode(i),h.range=w}}),e.on("focusin",h=>{if(r.isShowing()&&e.getBody().contains(h.target)&&h.target!==e.getBody()&&!e.dom.isEditable(h.target.parentNode)){r.hide(),h.target.contains(e.selection.getNode())||(e.selection.select(h.target,!0),e.selection.collapse(!0));const w=b(e.selection.getRng(),!0);w&&e.selection.setRng(w)}}),e.on("SetSelectionRange",h=>{h.range=m(h.range);const w=b(h.range,h.forward);w&&(h.range=w)}),e.on("AfterSetSelectionRange",h=>{const w=h.range,E=w.startContainer.parentElement;var k;f(w)||xe(k=E)&&k.id==="mcepastebin"||y(),(T=>ie(T)&&n.hasClass(T,"mce-offscreen-selection"))(E)||g()}),(h=>{lB(h),H_(h)&&(w=>{const E=A=>{if(!A.isDefaultPrevented()){const B=A.dataTransfer;B&&(Te(B.types,"Files")||B.files.length>0)&&(A.preventDefault(),A.type==="drop"&&Dd(w,"Dropped file type is not supported"))}},k=A=>{ad(w,A.target)&&E(A)},T=()=>{const A=Rt.DOM,B=w.dom,M=document,P=w.inline?w.getBody():w.getDoc(),z=["drop","dragover"];Q(z,W=>{A.bind(M,W,k),B.bind(P,W,E)}),w.on("remove",()=>{Q(z,W=>{A.unbind(M,W,k),B.unbind(P,W,E)})})};w.on("init",()=>{Do.setEditorTimeout(w,T,0)})})(h)})(e),(h=>{const w=Fs(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const E=h.selection.getRng();if(E.collapsed){const k=xp(h,E,!1);h.selection.setRng(k)}}},0);h.on("focus",()=>{w.throttle()}),h.on("blur",()=>{w.cancel()})})(e),(h=>{h.on("init",()=>{h.on("focusin",w=>{const E=w.target;if(xr(E)){const k=ha(h.getBody(),E),T=Dt(k)?k:E;h.selection.getNode()!==T&&Hl(h,T).each(A=>h.selection.setRng(A))}})})})(e)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&(pf(h),t.scrollIntoView(h))},hideFakeCaret:y,destroy:()=>{r.destroy(),i=null}}},dB=(e,t)=>{let n=t;for(let o=e.previousSibling;se(o);o=o.previousSibling)n+=o.data.length;return n},JS=(e,t,n,o,r)=>{if(se(n)&&(o<0||o>n.data.length))return[];const s=r&&se(n)?[dB(n,o)]:[o];let a=n;for(;a!==t&&a.parentNode;)s.push(e.nodeIndex(a,r)),a=a.parentNode;return a===t?s.reverse():[]},hg=(e,t,n,o,r,s,a=!1)=>({start:JS(e,t,n,o,a),end:JS(e,t,r,s,a)}),ZS=(e,t)=>{const n=t.slice(),o=n.pop();return x(o)?gn(n,(r,s)=>r.bind(a=>_.from(a.childNodes[s])),_.some(e)).bind(r=>se(r)&&(o<0||o>r.data.length)?_.none():_.some({node:r,offset:o})):_.none()},eE=(e,t)=>ZS(e,t.start).bind(({node:n,offset:o})=>ZS(e,t.end).map(({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})),wi=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const o=t.parentNode;e.remove(t,se(t.firstChild)&&Wa(t.firstChild.data)),wi(e,o,n)}},lu=(e,t,n,o=!0)=>{const r=t.startContainer.parentNode,s=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(se(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),se(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),wi(e,r,n),r!==s&&wi(e,s,n))},cu=(e,t)=>_.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),bg=(e,t,n)=>{const o=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:g0(o).concat(e.blockPatterns),inlinePatterns:h0(o).concat(e.inlinePatterns)}},vg=(e,t,n,o)=>{const r=e.createRng();return r.setStart(t,0),r.setEnd(n,o),r.toString()},tE=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),du=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},nE=(e,t,n)=>{const o=eE(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=o.endOffset===0?s:s.splitText(o.endOffset),i=o.startOffset===0?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:t,end:a.parentNode.insertBefore(tE(e,t+"-end"),a),start:l.insertBefore(tE(e,t+"-start"),i)}},oE=(e,t,n)=>{wi(e,e.get(t.prefix+"-end"),n),wi(e,e.get(t.prefix+"-start"),n)},yg=e=>e.start.length===0,rE=(e,t,n,o)=>{const r=t.start;var s;return Qp(e,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),d=l.lastIndexOf(s);return d!==-1?d+s.length:c!==-1?c+1:-1}),n).bind(a=>{var i,l;const c=(l=(i=n.textContent)===null||i===void 0?void 0:i.indexOf(r))!==null&&l!==void 0?l:-1;if(c!==-1&&a.offset>=c+r.length){const d=e.createRng();return d.setStart(a.container,a.offset-r.length),d.setEnd(a.container,a.offset),_.some(d)}{const d=a.offset-r.length;return Gp(a.container,d,n).map(f=>{const m=e.createRng();return m.setStart(f.container,f.offset),m.setEnd(a.container,a.offset),m}).filter(f=>f.toString()===r).orThunk(()=>rE(e,t,n,lr(a.container,0)))}})},uB=(e,t,n,o)=>{const r=e.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Gp(i,l-n.pattern.end.length,t).bind(c=>{const d=hg(r,s,c.container,c.offset,i,l,o);if(yg(a))return _.some({matches:[{pattern:a,startRng:d,endRng:d}],position:c});{const f=uu(e,n.remainingPatterns,c.container,c.offset,t,o),m=f.getOr({matches:[],position:c}),b=m.position;return((y,h,w,E,k,T=!1)=>{if(h.start.length===0&&!T){const A=y.createRng();return A.setStart(w,E),A.setEnd(w,E),_.some(A)}return Yp(w,E,k).bind(A=>rE(y,h,k,A).bind(B=>{var M;return T&&(B.endContainer===A.container&&B.endOffset===A.offset||A.offset===0&&((M=B.endContainer.textContent)===null||M===void 0?void 0:M.length)===B.endOffset)?_.none():_.some(B)}))})(r,a,b.container,b.offset,t,f.isNone()).map(y=>{const h=((w,E,k,T=!1)=>hg(w,E,k.startContainer,k.startOffset,k.endContainer,k.endOffset,T))(r,s,y,o);return{matches:m.matches.concat([{pattern:a,startRng:h,endRng:d}]),position:lr(y.startContainer,y.startOffset)}})}})},uu=(e,t,n,o,r,s)=>{const a=e.dom;return Yp(n,o,a.getRoot()).bind(i=>{const l=vg(a,r,n,o);for(let c=0;c<t.length;c++){const d=t[c];if(!Ra(l,d.end))continue;const f=t.slice();f.splice(c,1);const m=uB(e,r,{pattern:d,remainingPatterns:f,position:i},s);if(m.isNone()&&o>0)return uu(e,t,n,o-1,r,s);if(m.isSome())return m}return _.none()})},sE=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?Q(t.format,o=>{e.formatter.apply(o)}):e.execCommand(t.cmd,!1,t.value)},aE=(e,t,n,o,r,s)=>{var a;return((i,l)=>{const c=to(i,d=>Et(l,f=>d.pattern.start===f.pattern.start&&d.pattern.end===f.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(uu(e,r.inlinePatterns,n,o,t,s).fold(()=>[],i=>i.matches),uu(e,(a=r.inlinePatterns,Ir(a,(i,l)=>l.end.length-i.end.length)),n,o,t,s).fold(()=>[],i=>i.matches))},iE=(e,t)=>{if(t.length===0)return;const n=e.dom,o=e.selection.getBookmark(),r=((s,a)=>{const i=Ps("mce_textpattern"),l=Mr(a,(c,d)=>{const f=nE(s,i+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:f}])},[]);return Mr(l,(c,d)=>{const f=l.length-c.length-1,m=yg(d.pattern)?d.endMarker:nE(s,i+`_start${f}`,d.startRng);return c.concat([{...d,startMarker:m}])},[])})(n,t);Q(r,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;yg(s.pattern)?((l,c,d,f)=>{const m=du(l.dom,d);lu(l.dom,m,f),sE(l,c,m)})(e,s.pattern,s.endMarker,i):((l,c,d,f,m)=>{const b=l.dom,g=du(b,f),y=du(b,d);lu(b,y,m),lu(b,g,m);const h={prefix:d.prefix,start:d.end,end:f.start},w=du(b,h);sE(l,c,w)})(e,s.pattern,s.startMarker,s.endMarker,i),oE(n,s.endMarker,i),oE(n,s.startMarker,i)}),e.selection.moveToBookmark(o)},lE=(e,t,n)=>((o,r,s)=>{if(se(o)&&0>=o.length)return _.some(lr(o,0));{const a=oa(Wd);return _.from(a.forwards(o,0,Vd(o),s)).map(i=>lr(i.container,0))}})(t,0,t).map(o=>{const r=o.container;return wx(r,n.start.length,t).each(s=>{const a=e.createRng();a.setStart(r,0),a.setEnd(s.container,s.offset),lu(e,a,i=>i===t)}),r}),cE=e=>(t,n)=>{const o=t.dom,r=n.pattern,s=eE(o.getRoot(),n.range).getOrDie("Unable to resolve path range");return cu(t,s).each(a=>{r.type==="block-format"?((i,l)=>{const c=l.get(i);return re(c)&&yn(c).exists(d=>Ie(d,"block"))})(r.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,a,r),t.formatter.apply(r.format)}):r.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,a,r),t.execCommand(r.cmd,!1,r.value)})}),!0},dE=e=>(t,n)=>{const o=(s=>Ir(s,(a,i)=>i.start.length-a.start.length))(t),r=n.replace(zt," ");return Qt(o,s=>e(s,n,r))},uE=(e,t)=>(n,o,r,s,a)=>{var i;a===void 0&&(a=(i=o.textContent)!==null&&i!==void 0?i:"");const l=n.dom,c=Mn(n);return l.is(o,c)?e(r.blockPatterns,a).map(d=>t&&v.trim(a).length===d.start.length?[]:[{pattern:d,range:hg(l,l.getRoot(),o,0,o,0,s)}]).getOr([]):[]},fB=cE((e,t,n)=>{lE(e,t,n).each(o=>{const r=S(o),s=Yi(r);/^\s[^\s]/.test(s)&&jg(r,s.slice(1))})}),mB=dE((e,t,n)=>t.indexOf(e.start)===0||n.indexOf(e.start)===0),pB=uE(mB,!0),gB=cE(lE),hB=dE((e,t,n)=>t===e.start||n===e.start),bB=uE(hB,!1),fE=(e,t,n)=>{for(let o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},vB=e=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>{return a=lN(e).filter(l=>l.type!=="inline-command"&&l.type!=="block-command"||e.queryCommandSupported(l.cmd)),i=cN(e),{inlinePatterns:h0(a),blockPatterns:g0(a),dynamicPatternsLookup:i};var a,i},r=()=>(a=>a.options.isSet("text_patterns_lookup"))(e);e.on("keydown",a=>{if(a.keyCode===13&&!ve.modifierPressed(a)&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=Ef(o(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||r())&&((l,c)=>((d,f)=>{const m=d.selection.getRng();return cu(d,m).map(b=>{var g;const y=Math.max(0,m.startOffset),h=bg(f,b,(g=b.textContent)!==null&&g!==void 0?g:"");return{inlineMatches:aE(d,b,m.startContainer,y,h,!0),blockMatches:pB(d,b,h,!0)}}).filter(({inlineMatches:b,blockMatches:g})=>g.length>0||b.length>0)})(l,c).fold(St,({inlineMatches:d,blockMatches:f})=>(l.undoManager.add(),l.undoManager.extra(()=>{l.execCommand("mceInsertNewLine")},()=>{(g=>{g.insertContent(mn,{preserve_zwsp:!0})})(l),iE(l,d),((g,y)=>{if(y.length===0)return;const h=g.selection.getBookmark();Q(y,w=>fB(g,w)),g.selection.moveToBookmark(h)})(l,f);const m=l.selection.getRng(),b=Yp(m.startContainer,m.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),b.each(g=>{const y=g.container;y.data.charAt(g.offset-1)===zn&&(y.deleteData(g.offset-1,1),wi(l.dom,y.parentNode,h=>h===l.dom.getRoot()))})}),!0)))(e,i)&&a.preventDefault()}},!0),e.on("keydown",a=>{if(a.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const i=Ef(o(),"space");(i.blockPatterns.length>0||r())&&((l,c)=>((d,f)=>{const m=d.selection.getRng();return cu(d,m).map(b=>{const g=Math.max(0,m.startOffset),y=vg(d.dom,b,m.startContainer,g),h=bg(f,b,y);return bB(d,b,h,!1,y)}).filter(b=>b.length>0)})(l,c).fold(St,d=>(l.undoManager.transact(()=>{((f,m)=>{Q(m,b=>gB(f,b))})(l,d)}),!0)))(e,i)&&a.preventDefault()}},!0);const s=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const a=Ef(o(),"space");(a.inlinePatterns.length>0||r())&&((i,l)=>{const c=i.selection.getRng();cu(i,c).map(d=>{const f=Math.max(0,c.startOffset-1),m=vg(i.dom,d,c.startContainer,f),b=bg(l,d,m),g=aE(i,d,c.startContainer,f,b,!1);g.length>0&&i.undoManager.transact(()=>{iE(i,g)})})})(e,a)}};e.on("keyup",a=>{fE(n,a,(i,l)=>i===l.keyCode&&!ve.modifierPressed(l))&&s()}),e.on("keypress",a=>{fE(t,a,(i,l)=>i.charCodeAt(0)===l.charCode)&&Do.setEditorTimeout(e,s)})},yB=e=>{const t=v.each,n=ve.BACKSPACE,o=ve.DELETE,r=e.dom,s=e.selection,a=e.parser,i=ut.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),d=ut.deviceType.isiPhone()||ut.deviceType.isiPad(),f=ut.os.isMacOS()||ut.os.isiOS(),m=(D,L)=>{try{e.getDoc().execCommand(D,!1,String(L))}catch{}},b=D=>D.isDefaultPrevented(),g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},y=()=>{e.inline||r.bind(e.getDoc(),"mousedown mouseup",D=>{let L;if(D.target===e.getDoc().documentElement)if(L=s.getRng(),e.getBody().focus(),D.type==="mousedown"){if(Ao(L.startContainer))return;s.placeCaretAt(D.clientX,D.clientY)}else s.setRng(L)})},h=()=>{Range.prototype.getClientRects||e.on("mousedown",D=>{if(!b(D)&&D.target.nodeName==="HTML"){const L=e.getBody();L.blur(),Do.setEditorTimeout(e,()=>{L.focus()})}})},w=()=>{const D=F0(e);e.on("click",L=>{const F=L.target;/^(IMG|HR)$/.test(F.nodeName)&&r.isEditable(F)&&(L.preventDefault(),e.selection.select(F),e.nodeChanged()),F.nodeName==="A"&&r.hasClass(F,D)&&F.childNodes.length===0&&r.isEditable(F.parentNode)&&(L.preventDefault(),s.select(F))})},E=()=>{e.on("keydown",D=>{if(!b(D)&&D.keyCode===n&&s.isCollapsed()&&s.getRng().startOffset===0){const L=s.getNode().previousSibling;if(L&&L.nodeName&&L.nodeName.toLowerCase()==="table")return D.preventDefault(),!1}return!0})},k=()=>{M0(e)||e.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),P0(e)||m("enableObjectResizing",!1)})},T=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},A=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},B=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",D=>{let L;D.target.nodeName==="HTML"&&(L=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(L),e.selection.normalize(),e.nodeChanged())}))},M=()=>{f&&e.on("keydown",D=>{!ve.metaKeyPressed(D)||D.shiftKey||D.keyCode!==37&&D.keyCode!==39||(D.preventDefault(),e.selection.getSel().modify("move",D.keyCode===37?"backward":"forward","lineboundary"))})},P=()=>{e.on("click",D=>{let L=D.target;do if(L.tagName==="A")return void D.preventDefault();while(L=L.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},z=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",D=>{D.preventDefault()})})},W=Se;return Ar(e)?(c&&(y(),w(),z(),g(),d&&(A(),B(),P())),l&&(h(),k(),T(),M())):(e.on("keydown",D=>{if(b(D)||D.keyCode!==ve.BACKSPACE)return;let L=s.getRng();const F=L.startContainer,X=L.startOffset,oe=r.getRoot();let te=F;if(L.collapsed&&X===0){for(;te.parentNode&&te.parentNode.firstChild===te&&te.parentNode!==oe;)te=te.parentNode;te.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,te),L=r.createRng(),L.setStart(F,0),L.setEnd(F,0),s.setRng(L))}}),(()=>{const D=L=>{const F=r.create("body"),X=L.cloneContents();return F.appendChild(X),s.serializer.serialize(F,{format:"html"})};e.on("keydown",L=>{const F=L.keyCode;if(!b(L)&&(F===o||F===n)&&e.selection.isEditable()){const X=e.selection.isCollapsed(),oe=e.getBody();if(X&&!Wr(e.schema,oe)||!X&&!(te=>{const Ce=D(te),Ne=r.createRng();return Ne.selectNode(e.getBody()),Ce===D(Ne)})(e.selection.getRng()))return;L.preventDefault(),e.setContent(""),oe.firstChild&&r.isBlock(oe.firstChild)?e.selection.setCursorLocation(oe.firstChild,0):e.selection.setCursorLocation(oe,0),e.nodeChanged()}})})(),ut.windowsPhone||e.on("keyup focusin mouseup",D=>{ve.modifierPressed(D)||(L=>{const F=L.getBody(),X=L.selection.getRng();return X.startContainer===X.endContainer&&X.startContainer===F&&X.startOffset===0&&X.endOffset===F.childNodes.length})(e)||s.normalize()},!0),c&&(y(),w(),e.on("init",()=>{m("DefaultParagraphSeparator",Mn(e))}),z(),E(),a.addNodeFilter("br",D=>{let L=D.length;for(;L--;)D[L].attr("class")==="Apple-interchange-newline"&&D[L].remove()}),d?(A(),B(),P()):g()),l&&(e.on("mousedown",D=>{nn(_.from(D.clientX),_.from(D.clientY),(L,F)=>{const X=e.getDoc().caretPositionFromPoint(L,F);if(X&&(oe=X.offsetNode).nodeName==="IMG"&&e.dom.isEditable(oe)){const te=X.offsetNode.getBoundingClientRect();D.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(X.offsetNode),D.clientX<te.left||D.clientY<te.top?e.selection.collapse(!0):(D.clientX>te.right||D.clientY>te.bottom)&&e.selection.collapse(!1)}var oe})}),e.on("keydown",D=>{if(!b(D)&&D.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&s.getRng().startOffset===0){const L=s.getNode(),F=L.previousSibling;if(L.nodeName==="HR")return r.remove(L),void D.preventDefault();F&&F.nodeName&&F.nodeName.toLowerCase()==="hr"&&(r.remove(F),D.preventDefault())}}}),h(),(()=>{const D=()=>{const F=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const X=s.getStart();X!==e.getBody()&&(r.setAttrib(X,"style",null),t(F,oe=>{X.setAttributeNode(oe.cloneNode(!0))}))}},L=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);e.on("keypress",F=>{let X;return!(!(b(F)||F.keyCode!==8&&F.keyCode!==46)&&L()&&(X=D(),e.getDoc().execCommand("delete",!1),X(),F.preventDefault(),1))}),r.bind(e.getDoc(),"cut",F=>{if(!b(F)&&L()){const X=D();Do.setEditorTimeout(e,()=>{X()})}})})(),k(),e.on("SetContent ExecCommand",D=>{D.type!=="setcontent"&&D.command!=="mceInsertLink"||t(r.select("a:not([data-mce-block])"),L=>{var F;let X=L.parentNode;const oe=r.getRoot();if(X?.lastChild===L){for(;X&&!r.isBlock(X);){if(((F=X.parentNode)===null||F===void 0?void 0:F.lastChild)!==X||X===oe)return;X=X.parentNode}r.add(X,"br",{"data-mce-bogus":1})}})}),T(),M(),E())),{refreshContentEditable:W,isHidden:()=>{if(!l||e.removed)return!1;const D=e.selection.getSel();return!D||!D.rangeCount||D.rangeCount===0}}},Cg=Rt.DOM,CB=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,wg=e=>br(e,t=>It(t)===!1),mE=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return wg({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),extended_mathml_attributes:t("extended_mathml_attributes"),extended_mathml_elements:t("extended_mathml_elements"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:CB(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:Rf(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},pE=e=>{const t=e.options.get;return wg({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},xg=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,gE=e=>{const t=xg(e),n=D0(e),o=e.contentCSS,r=()=>{t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},s=()=>{e.removed?r():e.on("remove",r)};if(e.contentStyles.length>0){let l="";v.each(e.contentStyles,c=>{l+=c+`\r
`}),e.dom.addStyle(l)}const a=Promise.all(((l,c,d)=>{const{pass:f,fail:m}=zo(c,y=>tinymce.Resource.has(bp(y))),b=f.map(y=>{const h=tinymce.Resource.get(bp(y));return Ae(h)?Promise.resolve(xg(l).loadRawCss(y,h)):Promise.resolve()}),g=[...b,xg(l).loadAll(m)];return l.inline?g:g.concat([l.ui.styleSheetLoader.loadAll(d)])})(e,o,n)).then(s).catch(s),i=w_(e);return i&&((l,c)=>{const d=S(l.getBody()),f=er(_o(d)),m=O("style");Ee(m,"type","text/css"),q(m,H(c)),q(f,m),l.on("remove",()=>{Be(m)})})(e,i),a},Sg=e=>{e.removed!==!0&&((t=>{Ar(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})})(e),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(o=>{o.dispatch("Init")})(t),t.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||td(o)&&o.selection.getStart(!0)!==r||In(r).each(s=>{const a=s.getNode(),i=wr(a)?In(a).getOr(s):s;o.selection.setRng(i.toRange())})})(t),t.nodeChanged({initial:!0});const n=V_(t);gt(n)&&n.call(t,t),(o=>{const r=X_(o);r&&Do.setEditorTimeout(o,()=>{let s;s=r===!0?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(t),Xr(t)&&b1(t,!0)})(e))},hE=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Cg.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const o=e.getBody();o.disabled=!0,e.readonly=M0(e),e._editableRoot=z_(e),!Xc(e)&&e.hasEditableRoot()&&(e.inline&&Cg.getStyle(o,"position",!0)==="static"&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=XT(e),e.schema=us(pE(e)),e.dom=Rt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:b_(e),referrerPolicy:Nf(e),onSetAttrib:a=>{e.dispatch("SetAttrib",a)}}),e.parser=(a=>{const i=fi(mE(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const d=a.dom,f="data-mce-"+c;let m=l.length;for(;m--;){const b=l[m];let g=b.attr(c);if(g&&!b.attr(f)){if(g.indexOf("data:")===0||g.indexOf("blob:")===0)continue;c==="style"?(g=d.serializeStyle(d.parseStyle(g),b.name),g.length||(g=null),b.attr(f,g),b.attr(c,g)):c==="tabindex"?(b.attr(f,g),b.attr(c,null)):b.attr(f,a.convertURL(g,c,b.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const d=l[c],f=d.attr("type")||"no/type";f.indexOf("mce-")!==0&&d.attr("type","mce-"+f)}}),fN(a)&&i.addNodeFilter("#cdata",l=>{var c;let d=l.length;for(;d--;){const f=l[d];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode((c=f.value)!==null&&c!==void 0?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const d=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(d)&&f.getAll("br").length===0&&f.append(new Vn("br",1))}}),i})(e),e.serializer=s1((a=>{const i=a.options.get;return{...mE(a),...pE(a),...wg({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(e),e),e.selection=r1(e.dom,e.getWin(),e.serializer,e),e.annotator=Ib(e),e.formatter=k1(e),e.undoManager=N1(e),e._nodeChangeDispatcher=new zO(e),e._selectionOverrides=cB(e),(a=>{const i=wo(),l=en(!1),c=js(d=>{a.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)},400);a.on("touchstart",d=>{Fw(d).each(f=>{c.cancel();const m={x:f.clientX,y:f.clientY,target:d.target};c.throttle(d),l.set(!1),i.set(m)})},!0),a.on("touchmove",d=>{c.cancel(),Fw(d).each(f=>{i.on(m=>{((b,g)=>{const y=Math.abs(b.clientX-g.x),h=Math.abs(b.clientY-g.y);return y>5||h>5})(f,m)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",d=>{c.cancel(),d.type!=="touchcancel"&&i.get().filter(f=>f.target.isEqualNode(d.target)).each(()=>{l.get()?d.preventDefault():a.dispatch("tap",{...d,type:"tap"})})},!0)})(e),(a=>{(i=>{i.on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()})})(a),(i=>{i.parser.addNodeFilter("details",l=>{const c=hN(i);Q(l,d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const c=bN(i);Q(l,d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)})})})(a)})(e),(a=>{const i="contenteditable",l=" "+v.trim(dN(a))+" ",c=" "+v.trim(z0(a))+" ",d=zw(l),f=zw(c),m=uN(a);m.length>0&&a.on("BeforeSetContent",b=>{((g,y,h)=>{let w=y.length,E=h.content;if(h.format!=="raw"){for(;w--;)E=E.replace(y[w],PR(g,E,z0(g)));h.content=E}})(a,m,b)}),a.parser.addAttributeFilter("class",b=>{let g=b.length;for(;g--;){const y=b[g];d(y)?y.attr(i,"true"):f(y)&&y.attr(i,"false")}}),a.serializer.addAttributeFilter(i,b=>{let g=b.length;for(;g--;){const y=b[g];if(!d(y)&&!f(y))continue;const h=y.attr("data-mce-content");m.length>0&&h?LR(m,h)?(y.name="#text",y.type=3,y.raw=!0,y.value=h):y.remove():y.attr(i,null)}})})(e),Ar(e)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),ZO(a))})})(e),(a=>{vB(a)})(e));const r=jO(e);((a,i)=>{a.addCommand("delete",()=>{((l,c)=>{Iw(l,c,!1).fold(()=>{l.selection.isEditable()&&(hd(l),wm(l))},Gn)})(a,i)}),a.addCommand("forwardDelete",()=>{((l,c)=>{Iw(l,c,!0).fold(()=>{l.selection.isEditable()&&Zv(l)},Gn)})(a,i)})})(e,r),(a=>{a.on("NodeChange",()=>(i=>{const l=i.dom,c=i.selection,d=i.schema,f=d.getBlockElements(),m=c.getStart(),b=i.getBody();let g,y,h=null;const w=Mn(i);if(!m||!xe(m))return;const E=b.nodeName.toLowerCase();if(!d.isValidChild(E,w.toLowerCase())||((T,A,B)=>Et(Tv(S(B),S(A)),M=>Up(T,M.dom)))(f,b,m))return;if(b.firstChild===b.lastChild&&qt(b.firstChild))return g=Hp(i),g.appendChild(Qa().dom),b.replaceChild(g,b.firstChild),i.selection.setCursorLocation(g,0),void i.nodeChanged();let k=b.firstChild;for(;k;)if(xe(k)&&wk(d,k),BR(d,k)){if(DR(f,k)){y=k,k=k.nextSibling,l.remove(y);continue}if(!g){if(!h&&i.hasFocus()&&(h=$1(i.selection.getRng(),()=>document.createElement("span"))),!k.parentNode){k=null;break}g=Hp(i),b.insertBefore(g,k)}y=k,k=k.nextSibling,g.appendChild(y)}else g=null,k=k.nextSibling;h&&(i.selection.setRng(W1(h)),i.nodeChanged())})(a))})(e),(a=>{var i;const l=a.dom,c=Mn(a),d=(i=k_(a))!==null&&i!==void 0?i:"",f=(m,b)=>{if((h=>{if(T1(h)){const w=h.keyCode;return!R1(h)&&(ve.metaKeyPressed(h)||h.altKey||w>=112&&w<=123||Te(ZT,w))}return!1})(m))return;const g=a.getBody(),y=!(h=>T1(h)&&!(R1(h)||h.type==="keyup"&&h.keyCode===229))(m)&&((h,w,E)=>{if(h.isEmpty(w,void 0,{skipBogus:!1,includeZwsp:!0})){const k=w.firstElementChild;return!k||!h.getStyle(w.firstElementChild,"padding-left")&&!h.getStyle(w.firstElementChild,"padding-right")&&E===k.nodeName.toLowerCase()}return!1})(l,g,c);(l.getAttrib(g,A1)!==""!==y||b)&&(l.setAttrib(g,A1,y?d:null),((h,w)=>{h.dispatch("PlaceholderToggle",{state:w})})(a,y),a.on(y?"keydown":"keyup",f),a.off(y?"keyup":"keydown",f))};Ho(d)&&a.on("init",m=>{f(m,!0),a.on("change SetContent ExecCommand",f),a.on("paste",b=>Do.setEditorTimeout(a,()=>f(b)))})})(e),GO(e);const s=(a=>{const i=a;return(l=>Bt(l.plugins,"rtc").bind(c=>_.from(c.setup)))(a).fold(()=>(i.rtcInstance=JC(a),_.none()),l=>(i.rtcInstance=(()=>{const c=ue(null),d=ue("");return{init:{bindEvents:Se},undoManager:{beforeChange:Se,add:c,undo:c,redo:c,clear:Se,reset:Se,hasUndo:St,hasRedo:St,transact:c,ignore:Se,extra:Se},formatter:{match:St,matchAll:ue([]),matchNode:ue(void 0),canApply:St,closest:d,apply:Se,remove:Se,toggle:Se,formatChanged:ue({unbind:Se})},editor:{getContent:d,setContent:ue({content:"",html:""}),insertContent:ue(""),addVisual:Se},selection:{getContent:d},autocompleter:{addDecoration:Se,removeDecoration:Se},raw:{getModel:ue(_.none())}}})(),_.some(()=>l().then(c=>(i.rtcInstance=(d=>{const f=k=>Ke(k)?k:{},{init:m,undoManager:b,formatter:g,editor:y,selection:h,autocompleter:w,raw:E}=d;return{init:{bindEvents:m.bindEvents},undoManager:{beforeChange:b.beforeChange,add:b.add,undo:b.undo,redo:b.redo,clear:b.clear,reset:b.reset,hasUndo:b.hasUndo,hasRedo:b.hasRedo,transact:(k,T,A)=>b.transact(A),ignore:(k,T)=>b.ignore(T),extra:(k,T,A,B)=>b.extra(A,B)},formatter:{match:(k,T,A,B)=>g.match(k,f(T),B),matchAll:g.matchAll,matchNode:g.matchNode,canApply:k=>g.canApply(k),closest:k=>g.closest(k),apply:(k,T,A)=>g.apply(k,f(T)),remove:(k,T,A,B)=>g.remove(k,f(T)),toggle:(k,T,A)=>g.toggle(k,f(T)),formatChanged:(k,T,A,B,M)=>g.formatChanged(T,A,B,M)},editor:{getContent:k=>y.getContent(k),setContent:(k,T)=>({content:y.setContent(k,T),html:""}),insertContent:(k,T)=>(y.insertContent(k),""),addVisual:y.addVisual},selection:{getContent:(k,T)=>h.getContent(T)},autocompleter:{addDecoration:w.addDecoration,removeDecoration:w.removeDecoration},raw:{getModel:()=>_.some(E.getRawModel())}}})(c),c.rtc.isRemote)))))})(e);(a=>{const i=a.getDoc(),l=a.getBody();(f=>{f.dispatch("PreInit")})(a),Y_(a)||(i.body.spellcheck=!1,Cg.setAttrib(l,"spellcheck","false")),a.quirks=yB(a),(f=>{f.dispatch("PostRender")})(a);const c=x_(a);c!==void 0&&(l.dir=c);const d=G_(a);d&&a.on("BeforeSetContent",f=>{v.each(d,m=>{f.content=f.content.replace(m,b=>"<!--mce:protected "+escape(b)+"-->")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing=f.type==="compositionstart"})})(e),(a=>{const i=yN(a);var l;Ae(CN(a))||!It(i)&&((c=>c.toLowerCase()==="gpl")(l=i)||(c=>c.length>=64&&c.length<=255)(l)?"VALID":"INVALID")!="INVALID"||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(e),s.fold(()=>{const a=(i=>{let l=!1;const c=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(e);gE(e).then(()=>{Sg(e),a()})},a=>{e.setProgressState(!0),gE(e).then(()=>{a().then(i=>{e.setProgressState(!1),Sg(e),ZC(e)},i=>{e.notificationManager.open({type:"error",text:String(i)}),Sg(e),ZC(e)})})})},Eg=Rt.DOM,bE=Rt.DOM,vE=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),yE=e=>{const t=e.getElement();return e.inline?vE(null):(n=>{const o=bE.create("div");return bE.insertAfter(o,n),vE(o,o)})(t)},wB=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const o=v.trim(R0(n)),r=n.ui.registry.getAll().icons,s={...Bd.get("default").icons,...Bd.get(o).icons};yt(s,(a,i)=>{Ie(r,i)||n.ui.registry.addIcon(i,a)})})(e),(n=>{const o=ti(n);if(Ae(o)){const r=ya.get(o);n.theme=r(n,ya.urls[o])||{},gt(n.theme.init)&&n.theme.init(n,ya.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const o=Af(n),r=mi.get(o);n.model=r(n,mi.urls[o])})(e),(n=>{const o=[];Q(Vc(n),r=>{((s,a,i)=>{const l=pi.get(i),c=pi.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=v.trim(i),l&&v.inArray(a,i)===-1){if(s.plugins[i])return;try{const d=l(s,c)||{};s.plugins[i]=d,gt(d.init)&&(d.init(s,c),a.push(i))}catch(d){((f,m,b)=>{const g=rr.translate(["Failed to initialize plugin: {0}",m]);v0(f,"PluginLoadError",{message:g}),Pd(g,b),Dd(f,g)})(s,i,d)}}})(n,o,(s=>s.replace(/^\-/,""))(r))})})(e);const t=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,Ae(ti(n))?(r=>{const s=r.theme.renderUI;return s?s():yE(r)})(n):gt(ti(n))?(r=>{const s=r.getElement(),a=ti(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):yE(n)})(e);((n,o)=>{const r={show:_.from(o.show).getOr(Se),hide:_.from(o.hide).getOr(Se),isEnabled:_.from(o.isEnabled).getOr(jt),setEnabled:s=>{s&&(n.mode.get()==="readonly"||Xr(n))||_.from(o.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...r}})(e,_.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=>{n.contentCSS=n.contentCSS.concat((o=>y1(o,C_(o)))(n),(o=>y1(o,D0(o)))(n))})(e),e.inline?hE(e):((n,o)=>{((r,s)=>{const a=ut.browser.isFirefox()?j0(r):"Rich Text Area",i=r.translate(a),l=De(S(r.getElement()),"tabindex").bind(Is),c=((d,f,m,b)=>{const g=O("iframe");return b.each(y=>Ee(g,"tabindex",y)),Me(g,m),Me(g,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:f}),qa(g,"tox-edit-area__iframe"),g})(r.id,i,t_(r),l).dom;c.onload=()=>{c.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=c,r.iframeHTML=(d=>{let f=n_(d)+"<html><head>";_0(d)!==d.documentBaseUrl&&(f+='<base href="'+d.documentBaseURI.getURI()+'" />'),f+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const m=o_(d),b=r_(d),g=d.translate(j0(d));return N0(d)&&(f+='<meta http-equiv="Content-Security-Policy" content="'+N0(d)+'" />'),f+=`</head><body id="${m}" class="mce-content-body ${b}" data-id="${d.id}" aria-label="${g}"><br></body></html>`,f})(r),Eg.add(s.iframeContainer,c)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=Eg.isHidden(o.editorContainer)),n.getElement().style.display="none",Eg.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,a=()=>{r.contentDocument=s.contentDocument,hE(r)};if(pN(r)||ut.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),a()}else{const l=(i=S(s),$s(i,"load",Fa,()=>{l.unbind(),a()}));s.srcdoc=r.iframeHTML}var i})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Sa=Rt.DOM,CE=e=>e.charAt(0)==="-",wE=(e,t,n)=>_.from(t).filter(o=>Ho(o)&&!Bd.has(o)).map(o=>({url:`${e.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:_.some(o)})),xB=(e,t)=>{const n=Vr.ScriptLoader,o=()=>{!e.removed&&(r=>{const s=ti(r);return!Ae(s)||ie(ya.get(s))})(e)&&(r=>{const s=Af(r);return ie(mi.get(s))})(e)&&wB(e)};((r,s)=>{const a=ti(r);if(Ae(a)&&!CE(a)&&!Ie(ya.urls,a)){const i=N_(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;ya.load(a,l).catch(()=>{((c,d,f)=>{zl(c,"ThemeLoadError",Ul("theme",d,f))})(r,l,a)})}})(e,t),((r,s)=>{const a=Af(r);if(a!=="plugin"&&!Ie(mi.urls,a)){const i=A_(r),l=Ae(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;mi.load(a,l).catch(()=>{((c,d,f)=>{zl(c,"ModelLoadError",Ul("model",d,f))})(r,l,a)})}})(e,t),((r,s)=>{const a=O0(s),i=v_(s);if(!rr.hasCode(a)&&a!=="en"){const l=Ho(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch(()=>{((c,d,f)=>{zl(c,"LanguageLoadError",Ul("language",d,f))})(s,l,a)})}})(n,e),((r,s,a)=>{const i=wE(s,"default",a),l=(c=>_.from(f_(c)).filter(Ho).map(d=>({url:d,name:_.none()})))(s).orThunk(()=>wE(s,R0(s),""));Q((c=>{const d=[],f=m=>{d.push(m)};for(let m=0;m<c.length;m++)c[m].each(f);return d})([i,l]),c=>{r.add(c.url).catch(()=>{((d,f,m)=>{zl(d,"IconsLoadError",Ul("icons",f,m))})(s,c.url,c.name.getOrUndefined())})})})(n,e,t),((r,s)=>{const a=(i,l)=>{pi.load(i,l).catch(()=>{((c,d,f)=>{zl(c,"PluginLoadError",Ul("plugin",d,f))})(r,l,i)})};yt(U_(r),(i,l)=>{a(l,i),r.options.set("plugins",Vc(r).concat(l))}),Q(Vc(r),i=>{!(i=v.trim(i))||pi.urls[i]||CE(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(e,t),n.loadQueue().then(o,o)},xE=co().deviceType,SE=xE.isPhone(),SB=xE.isTablet(),nc=e=>{if(xt(e))return[];{const t=re(e)?e:e.split(/[ ,]/),n=ot(t,Fr);return Ve(n,Ho)}},EB=(e,t)=>{const n=(s=>{const a={},i={};return hr(s,(l,c)=>Te(e,c),gr(a),gr(i)),{t:a,f:i}})(t);return o=n.t,r=n.f,{sections:ue(o),options:ue(r)};var o,r},kg=(e,t)=>Ie(e.sections(),t),kB=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Bt(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),_B=(e,t)=>{var n;const o=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?v.extend({},e.external_plugins,o):o},NB=(e,t,n,o,r)=>{var s;const a=e?{mobile:kB((s=r.mobile)!==null&&s!==void 0?s:{},t)}:{},i=EB(["mobile"],Ti(a,r)),l=v.extend(n,o,i.options(),((c,d)=>c&&kg(d,"mobile"))(e,i)?((c,d,f={})=>{const m=c.sections(),b=Bt(m,d).getOr({});return v.extend({},f,b)})(i,"mobile"):{},{external_plugins:_B(o,i.options())});return((c,d,f,m)=>{const b=nc(f.forced_plugins),g=nc(m.plugins),y=((E,k)=>kg(E,k)?E.sections()[k]:{})(d,"mobile"),h=((E,k,T,A)=>E&&kg(k,"mobile")?A:T)(c,d,g,y.plugins?nc(y.plugins):g),w=((E,k)=>[...nc(E),...nc(k)])(b,h);return v.extend(m,{forced_plugins:b,plugins:w})})(e,i,o,l)},AB=e=>{(t=>{const n=o=>()=>{Q("left,center,right,justify".split(","),r=>{o!==r&&t.formatter.remove("align"+r)}),o!=="none"&&(r=>{t.formatter.toggle(r,void 0),t.nodeChanged()})("align"+o)};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=o=>()=>{const r=t.selection,s=r.isCollapsed()?[t.dom.getParent(r.getNode(),t.dom.isBlock)]:r.getSelectedBlocks();return Et(s,a=>ie(t.formatter.matchNode(a,o)))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)},TB=(e,t)=>{const n=e.selection,o=e.dom;return/^ | $/.test(t)?((r,s,a,i)=>{const l=S(r.getRoot());return a=Tl(l,G.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Rl(l,G.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),t,e.schema):t},fu=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:o}=(r=>{if(typeof r!="string"){const s=v.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(t);ip(e,{...o,content:TB(e,n),format:"html",set:!1,selection:!0}).each(r=>{const s=((a,i,l)=>pp(a).editor.insertContent(i,l))(e,r.content,o);lp(e,s,r),e.addVisual()})}},RB={"font-size":"size","font-family":"face"},OB=Jn("font"),EE=e=>(t,n)=>_.from(n).map(S).filter(dt).bind(o=>((r,s,a)=>Mu(S(a),i=>(l=>Sc(l,r).orThunk(()=>OB(l)?Bt(RB,r).bind(c=>De(l,c)):_.none()))(i),i=>_e(S(s),i)))(e,t,o.dom).or(((r,s)=>_.from(Rt.DOM.getStyle(s,r,!0)))(e,o.dom))).getOr(""),BB=EE("font-size"),DB=An(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),EE("font-family")),PB=e=>In(e.getBody()).bind(t=>{const n=t.container();return _.from(se(n)?n.parentNode:n)}),_g=(e,t)=>((n,o)=>(r=>_.from(r.selection.getRng()).bind(s=>{const a=r.getBody();return s.startContainer===a&&s.startOffset===0?_.none():_.from(r.selection.getStart(!0))}))(n).orThunk(ye(PB,n)).map(S).filter(dt).bind(o))(e,Ts(_.some,t)),kE=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=(s=>v.explode(s.options.get("font_size_style_values")))(e),r=(s=>v.explode(s.options.get("font_size_classes")))(e);return r.length>0?r[n-1]||t:o[n-1]||t}return t}return t},LB=e=>{const t=e.split(/\s*,\s*/);return ot(t,n=>n.indexOf(" ")===-1||$t(n,'"')||$t(n,"'")?n:`'${n}'`).join(",")},_E=(e,t)=>{if(e.mode.isReadOnly())return;const n=e.dom,o=e.selection.getRng(),r=t?e.selection.getStart():e.selection.getEnd(),s=t?o.startContainer:o.endContainer,a=Ql(n,s);if(!a||!a.isContentEditable)return;const i=t?wn:qo,l=Mn(e);((c,d,f,m)=>{const b=c.dom,g=h=>b.isBlock(h)&&h.parentElement===f,y=g(d)?d:b.getParent(m,g,f);return _.from(y).map(S)})(e,r,a,s).each(c=>{const d=Gx(e,s,c.dom,a,!1,l);i(c,S(d)),e.selection.setCursorLocation(d,0),e.dispatch("NewBlock",{newBlock:d}),Gl(e,"insertParagraph")})},MB=e=>{AB(e),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=t.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n!=="paste"||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(ut.os.isMacOS()||ut.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:s,type:"error"})}}})})(e),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;t.dom.getParent(t.selection.getNode(),a=>!xe(a)||s++!==r||(t.selection.select(a),!1),t.getBody())},mceSelectNode:(n,o,r)=>{t.selection.select(r)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),Wo);if(n){const o=t.dom.createRng();o.selectNodeContents(n),t.selection.setRng(o)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{fu(t,t.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{fu(t,t.dom.encode(r))},insertHTML:(n,o,r)=>{fu(t,r)},mceInsertContent:(n,o,r)=>{fu(t,r)},mceSetContent:(n,o,r)=>{t.setContent(r)},mceReplaceContent:(n,o,r)=>{t.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(eN(t))}})})(e),(t=>{const n=(o,r,s)=>{if(t.mode.isReadOnly())return;const a=Ae(s)?{href:s}:s,i=t.dom.getParent(t.selection.getNode(),"a");Ke(a)&&Ae(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,i))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const o=t.dom.getParent(t.selection.getStart(),"a");return void(o&&t.dom.remove(o,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),(t=>{t.editorCommands.addCommands({Indent:()=>{(n=>{Pw(n,"indent")})(t)},Outdent:()=>{Lw(t)}}),t.editorCommands.addCommands({Outdent:()=>Ow(t)},"state")})(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{(n=>{_E(n,!0)})(t)},InsertNewBlockAfter:()=>{(n=>{_E(n,!1)})(t)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{ru(eS,t)},mceInsertNewLine:(n,o,r)=>{iS(t,r)},InsertLineBreak:(n,o,r)=>{ru(oS,t)}})})(e),(t=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const c=kE(i,l);i.formatter.toggle("fontname",{value:LB(c)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{((i,l)=>{i.formatter.toggle("fontsize",{value:kE(i,l)}),i.nodeChanged()})(n,a)},LineHeight:(r,s,a)=>{((i,l)=>{i.formatter.toggle("lineheight",{value:String(l)}),i.nodeChanged()})(n,a)},Lang:(r,s,a)=>{var i;o(r,{value:a.code,customValue:(i=a.customCode)!==null&&i!==void 0?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(Ae(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(t),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>(r=>_g(r,s=>DB(r.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("FontSize",()=>(r=>_g(r,s=>BB(r.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("LineHeight",()=>(r=>_g(r,s=>{const a=S(r.getBody());return Mu(s,l=>Sc(l,"line-height"),ye(_e,a)).getOrThunk(()=>{const l=parseFloat($o(s,"line-height")),c=parseFloat($o(s,"font-size"));return String(l/c)})}).getOr(""))(n))})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??t.selection.getNode();if(s!==t.getBody()){const a=t.selection.getBookmark();t.dom.remove(s,!0),t.selection.moveToBookmark(a)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,o,r)=>{((s,a)=>{s.removed||(a?rm(s):(i=>{const l=i.selection,c=i.getBody();let d=l.getRng();i.quirks.refreshContentEditable();const f=b=>{Zf(b).each(g=>{b.selection.setRng(g),d=g})};!di(i)&&i.hasEditableRoot()&&f(i);const m=((b,g)=>b.dom.getParent(g,y=>b.dom.getContentEditable(y)==="true"))(i,l.getNode());if(m&&i.dom.isChildOf(m,c))return((b,g)=>b.dom.getParent(g,y=>b.dom.getContentEditable(y)==="false")!==null)(i,m)||id(c),id(m),i.hasEditableRoot()||f(i),Wb(i,d),void rm(i);i.inline||(ut.browser.isOpera()||id(c),i.getWin().focus()),(ut.browser.isFirefox()||i.inline)&&(id(c),Wb(i,d)),rm(i)})(s))})(t,r===!0)},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)},IB=["toggleview"],NE=e=>Te(IB,e.toLowerCase());class AE{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,o,r){const s=this.editor,a=t.toLowerCase(),i=r?.skip_focus;if(s.removed||(a!=="mcefocus"&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?(c=>{Zf(c).each(d=>c.selection.setRng(d))})(s):s.focus()),s.dispatch("BeforeExecCommand",{command:t,ui:n,value:o}).isDefaultPrevented()))return!1;const l=this.commands.exec[a];return!!gt(l)&&(l(a,n,o),s.dispatch("ExecCommand",{command:t,ui:n,value:o}),!0)}queryCommandState(t){if(!NE(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),o=this.commands.state[n];return!!gt(o)&&o(n)}queryCommandValue(t){if(!NE(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),o=this.commands.value[n];return gt(o)?o(n):""}addCommands(t,n="exec"){const o=this.commands;yt(t,(r,s)=>{Q(s.toLowerCase().split(","),a=>{o[n][a]=r})})}addCommand(t,n,o){const r=t.toLowerCase();this.commands.exec[r]=(s,a,i)=>n.call(o??this.editor,a,i)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,o){this.commands.state[t.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(t,n,o){this.commands.value[t.toLowerCase()]=()=>n.call(o??this.editor)}}const FB=v.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ng{static isNative(t){return!!FB[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||St}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const o=t.toLowerCase(),r=sf(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(l.func.call(this.scope,r)===!1)return r.preventDefault(),r}}return r}on(t,n,o,r){if(n===!1&&(n=St),n){const s={func:n,removed:!1};r&&v.extend(s,r);const a=t.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(t,n){if(t){const o=t.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return yt(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=zo(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,Q(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(t,!1),delete this.bindings[s])}}}else yt(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(t,n,o){return this.on(t,n,o,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const oc=e=>(e._eventDispatcher||(e._eventDispatcher=new Ng({scope:e,toggleEvent:(t,n)=>{Ng.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Ag={fire(e,t,n){return console.warn('The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',new Error().stack),this.dispatch(e,t,n)},dispatch(e,t,n){const o=this;if(o.removed&&e!=="remove"&&e!=="detach")return sf(e.toLowerCase(),t??{},o);const r=oc(o).dispatch(e,t);if(n!==!1&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(e,r,!1),s=s.parent?s.parent():void 0}return r},on(e,t,n){return oc(this).on(e,t,n)},off(e,t){return oc(this).off(e,t)},once(e,t){return oc(this).once(e,t)},hasEventListeners(e){return oc(this).has(e)}},mu=Rt.DOM;let Ea;const pu=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=L0(e);return n?(e.eventRoot||(e.eventRoot=mu.select(n)[0]),e.eventRoot):e.getBody()},TE=(e,t,n)=>{(o=>!o.hidden&&!Xr(o))(e)?e.dispatch(t,n):Xr(e)&&((o,r)=>{if((s=>s.type==="click")(r)&&!ve.metaKeyPressed(r)){const s=S(r.target);((a,i)=>Ha(i,"a",l=>_e(l,S(a.getBody()))).bind(l=>De(l,"href")))(o,s).each(a=>{if(r.preventDefault(),/^#/.test(a)){const i=o.dom.select(`${a},[name="${Bi(a,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else(s=>Te($T,s.type))(r)&&o.dispatch(r.type,r)})(e,n)},RE=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=pu(e,t);if(L0(e)){if(Ea||(Ea={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Ea&&(yt(Ea,(r,s)=>{e.dom.unbind(pu(e,s))}),Ea=null)})),Ea[t])return;const o=r=>{const s=r.target,a=e.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||mu.isChildOf(s,l))&&TE(a[i],t,r)}};Ea[t]=o,mu.bind(n,t,o)}else{const o=r=>{TE(e,t,r)};mu.bind(n,t,o),e.delegates[t]=o}},OE={...Ag,bindPendingEventDelegates(){const e=this;v.each(e._pendingNativeEvents,t=>{RE(e,t)})},toggleNativeEvent(e,t){const n=this;e!=="focus"&&e!=="blur"&&(n.removed||(t?n.initialized?RE(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(pu(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(yt(e.delegates,(o,r)=>{e.dom.unbind(pu(e,r),r,o)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},jB=e=>Ae(e)?{value:e.split(/[ ,]/),valid:!0}:Nn(e,Ae)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},BE=(e,t)=>e+(Ms(t.message)?"":`. ${t.message}`),DE=e=>e.valid,Tg=(e,t,n="")=>{const o=t(e);return pn(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},xi=e=>e.readonly,zB=["design","readonly"],PE=(e,t,n,o)=>{const r=n[t.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((a,i)=>{const l=S(a.getBody());i?(a.readonly=!0,a.hasEditableRoot()&&(l.dom.contentEditable="true"),g1(a)):(a.readonly=!1,h1(a))})(e,s.editorReadOnly),t.set(o),((a,i)=>{a.dispatch("SwitchMode",{mode:i})})(e,o)},UB=e=>{const t=en("design"),n=en({design:{activate:Se,deactivate:Se,editorReadOnly:!1},readonly:{activate:Se,deactivate:Se,editorReadOnly:!0}});return(o=>{const r=a=>{xi(o)&&(i=>Et(i,l=>l.type==="characterData"||l.type==="childList"))(a)&&(i=>{const l=i.undoManager.add();ie(l)&&(i.undoManager.undo(),i.undoManager.reset())})(o)},s=new MutationObserver(r);o.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",a=>{xi(o)&&a.preventDefault()}),o.on("BeforeExecCommand",a=>{a.command!=="Undo"&&a.command!=="Redo"||!xi(o)||a.preventDefault()}),o.on("compositionstart",()=>{xi(o)&&s.observe(o.getBody(),{characterData:!0,childList:!0,subtree:!0})}),o.on("compositionend",()=>{if(xi(o)){const a=s.takeRecords();r(a)}s.disconnect()})})(e),(o=>{(r=>{r.serializer?v1(r):r.on("PreInit",()=>{v1(r)})})(o),(r=>{r.on("ShowCaret ObjectSelected",s=>{Xr(r)&&s.preventDefault()}),r.on("DisabledStateChange",s=>{s.isDefaultPrevented()||b1(r,s.state)})})(o)})(e),{isReadOnly:()=>xi(e),set:o=>((r,s,a,i)=>{if(!(i===a.get()||r.initialized&&Xr(r))){if(!Ie(s,i))throw new Error(`Editor mode '${i}' is invalid`);r.initialized?PE(r,a,s,i):r.on("init",()=>PE(r,a,s,i))}})(e,n.get(),t,o),get:()=>t.get(),register:(o,r)=>{n.set(((s,a,i)=>{if(Te(zB,a))throw new Error(`Cannot override default mode ${a}`);return{...s,[a]:{...i,deactivate:()=>{try{i.deactivate()}catch(l){console.error(`problem while deactivating editor mode ${a}:`,l)}}}}})(n.get(),o,r))}}},Rg=v.each,Og=v.explode,HB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},LE=v.makeMap("alt,ctrl,shift,meta,access"),qB=e=>{const t={},n=ut.os.isMacOS()||ut.os.isiOS();Rg(Og(e.toLowerCase(),"+"),s=>{(a=>a in LE)(s)?t[s]=!0:/^[0-9]{2,}$/.test(s)?t.keyCode=parseInt(s,10):(t.charCode=s.charCodeAt(0),t.keyCode=HB[s]||s.toUpperCase().charCodeAt(0))});const o=[t.keyCode];let r;for(r in LE)t[r]?o.push(r):t[r]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class ME{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Rg(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),o.type==="keydown"&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&o.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return Rg(Og(v.trim(t)),i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l}),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,o=t;return typeof o=="string"?()=>{n.editor.execCommand(o,!1,null)}:v.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(t,n,o,r){const s=v.map(Og(t,">"),qB);return s[s.length-1]=v.extend(s[s.length-1],{func:o,scope:r||this.editor}),v.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const $B=()=>{const e=(()=>{const t={},n={},o={},r={},s={},a={},i={},l={},c={},d=(m,b)=>(g,y)=>{m[g.toLowerCase()]={...y,type:b}};return{addButton:d(t,"button"),addGroupToolbarButton:d(t,"grouptoolbarbutton"),addToggleButton:d(t,"togglebutton"),addMenuButton:d(t,"menubutton"),addSplitButton:d(t,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(o,"autocompleter"),addContextMenu:d(s,"contextmenu"),addContextToolbar:d(a,"contexttoolbar"),addContextForm:(f=a,(m,b)=>{f[m.toLowerCase()]={type:"contextform",...b}}),addSidebar:d(l,"sidebar"),addView:d(c,"views"),addIcon:(m,b)=>r[m.toLowerCase()]=b,addContext:(m,b)=>i[m.toLowerCase()]=b,getAll:()=>({buttons:t,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:l,views:c,contexts:i})};var f})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},ka=Rt.DOM,IE=v.extend,WB=v.each;class gu{constructor(t,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,IE(this,OE);const r=this;this.id=t,this.hidden=!1;const s=((b,g)=>{const y=cc(g);return NB(SE||SB,SE,y,b,y)})(o.defaultOptions,n);this.options=((b,g,y=g)=>{const h={},w={},E=(T,A,B)=>{const M=Tg(A,B);return DE(M)?(w[T]=M.value,!0):(console.warn(BE(`Invalid value passed for the ${T} option`,M)),!1)},k=T=>Ie(h,T);return{register:(T,A)=>{const B=(P=>Ae(P.processor))(A)?(P=>{const z=(()=>{switch(P){case"array":return re;case"boolean":return pn;case"function":return gt;case"number":return x;case"object":return Ke;case"string":return Ae;case"string[]":return jB;case"object[]":return W=>Nn(W,Ke);case"regexp":return W=>yo(W,RegExp);default:return jt}})();return W=>Tg(W,z,`The value must be a ${P}.`)})(A.processor):A.processor,M=((P,z,W)=>{if(!It(z)){const D=Tg(z,W);if(DE(D))return D.value;console.error(BE(`Invalid default value passed for the "${P}" option`,D))}})(T,A.default,B);h[T]={...A,default:M,processor:B},Bt(w,T).orThunk(()=>Bt(g,T)).each(P=>E(T,P,B))},isRegistered:k,get:T=>Bt(w,T).orThunk(()=>Bt(h,T).map(A=>A.default)).getOrUndefined(),set:(T,A)=>{if(k(T)){const B=h[T];return B.immutable?(console.error(`"${T}" is an immutable option and cannot be updated`),!1):E(T,A,B.processor)}return console.warn(`"${T}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:T=>{const A=k(T);return A&&delete w[T],A},isSet:T=>Ie(w,T),debug:()=>{try{console.log(JSON.parse(JSON.stringify(y,(T,A)=>pn(A)||x(A)||Ae(A)||Je(A)||re(A)||Le(A)?A:Object.prototype.toString.call(A))))}catch(T){console.error(T)}}}})(0,s,n),(b=>{const g=b.options.register;g("id",{processor:"string",default:b.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:b.documentBaseUrl}),g("body_id",{processor:k0(b,"tinymce"),default:"tinymce"}),g("body_class",{processor:k0(b),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:y=>{const h=Ae(y)&&Ho(y);return h?{value:y,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:y=>{const h=Te(["block","linebreak","invert","default"],y);return h?{value:y,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:y=>pn(y)||Ae(y)?{valid:!0,value:y}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:y=>{const h=y===!1||Ae(y)||Nn(y,Ae);return h?Ae(y)?{value:ot(y.split(","),Fr),valid:h}:re(y)?{value:y,valid:h}:y===!1?{value:[],valid:h}:{value:y,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Tf(b)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:y=>{const h=Ae(y)||Nn(y,Ae);return h?{value:re(y)?y:ot(y.split(","),Fr),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("extended_mathml_attributes",{processor:"string[]"}),g("extended_mathml_elements",{processor:"string[]"}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:y=>{const h=pn(y)||Ae(y);return h?y===!1||_f.isiPhone()||_f.isiPad()?{value:"",valid:h}:{value:y===!0?"table,img,figure.image,div,video,iframe":y,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!Zk}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"string"}),g("service_message",{processor:"string"}),g("onboarding",{processor:"boolean",default:!0}),g("tiny_cloud_entry_url",{processor:"string"}),g("theme",{processor:y=>y===!1||Ae(y)||gt(y),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:y=>{const h=y===!1||Ae(y);return h?{value:y===!1?"":y,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("disabled",{processor:y=>pn(y)?(b.initialized&&Xc(b)!==y&&Promise.resolve().then(()=>{((h,w)=>{h.dispatch("DisabledStateChange",{state:w})})(b,y)}),{valid:!0,value:y}):{valid:!1,message:"The value must be a boolean."},default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:b.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(b.hasPlugin("help")?". Press ALT-0 for help.":"")}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:b.convertURL}),g("url_converter_scope",{processor:"object",default:b}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("allow_mathml_annotation_encodings",{processor:y=>{const h=Nn(y,Ae);return h?{value:y,valid:h}:{valid:!1,message:"Must be an array of strings."}},default:[]}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:Wc}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:Wc}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:Wc}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:Wc}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:y=>Ae(y)||y===!0}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("license_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:y=>Nn(y,Ke)||y===!1?{value:b0(y===!1?[]:y),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),g("text_patterns_lookup",{processor:y=>{return gt(y)?{value:(h=y,w=>{const E=h(w);return b0(E)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:y=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:y=>Nn(y,E0)?{value:y,valid:!0}:E0(y)?{value:[y],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!0}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:y=>{const h=Te(["inherited","collapsed","expanded"],y);return h?{value:y,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:y=>{const h=Te(["inherited","collapsed","expanded"],y);return h?{value:y,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("sandbox_iframes",{processor:"boolean",default:!0}),g("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),g("convert_unsafe_embeds",{processor:"boolean",default:!0}),b.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:rr.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:e_.getAttrib(b.getElement(),"placeholder")})})})(r);const a=this.options.get;a("deprecation_warnings")&&((b,g)=>{((y,h)=>{const w=LT(y),E=IT(h),k=E.length>0,T=w.length>0,A=h.theme==="mobile";if(k||T||A){const B=`
- `,M=A?`

Themes:${B}mobile`:"",P=k?`

Plugins:${B}${E.join(B)}`:"",z=T?`

Options:${B}${w.join(B)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+M+P+z)}})(b,g),((y,h)=>{const w=MT(y),E=FT(h),k=E.length>0,T=w.length>0;if(k||T){const A=`
- `,B=k?`

Plugins:${A}${E.map(jT).join(A)}`:"",M=T?`

Options:${A}${w.join(A)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+B+M)}})(b,g)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=Nf(r);c&&(Vr.ScriptLoader._setReferrerPolicy(c),Rt.DOM.styleSheetLoader._setReferrerPolicy(c));const d=I0(r);ie(d)&&Rt.DOM.styleSheetLoader._setContentCssCors(d),Wn.languageLoad=a("language_load"),Wn.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new Xo(_0(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Tf(r),this.hasVisual=q_(r),this.shortcuts=new ME(this),this.editorCommands=new AE(this),MB(this);const f=a("cache_suffix");f&&(ut.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:$B(),styleSheetLoader:void 0,show:Se,hide:Se,setEnabled:Se,isEnabled:jt},this.mode=UB(r),o.dispatch("SetupEditor",{editor:this});const m=W_(r);gt(m)&&m.call(r,r)}render(){(t=>{const n=t.id;rr.setCode(O0(t));const o=()=>{Sa.unbind(window,"ready",o),t.render()};if(!ta.Event.domLoaded)return void Sa.bind(window,"ready",o);if(!t.getElement())return;const r=S(t.getElement()),s=ft(r);t.on("remove",()=>{mr(r.dom.attributes,i=>Ge(r,i.name)),Me(r,s)}),t.ui.styleSheetLoader=((i,l)=>uh.forElement(i,{contentCssCors:I0(l),referrerPolicy:Nf(l)}))(r,t),Tf(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const a=t.getElement().form||Sa.getParent(n,"form");a&&(t.formElement=a,P_(t)&&!ju(t.getElement())&&(Sa.insertAfter(Sa.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=i=>{t.dispatch(i.type,i)},Sa.bind(a,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!L_(t)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),a._mceOldSubmit(a)))),t.windowManager=f1(t),t.notificationManager=u1(t),(i=>i.options.get("encoding")==="xml")(t)&&t.on("GetContent",i=>{i.save&&(i.content=Sa.encode(i.content))}),M_(t)&&t.on("submit",()=>{t.initialized&&t.save()}),I_(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),xB(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return di(this)}translate(t){return rr.translate(t)}getParam(t,n,o){const r=this.options;return r.isRegistered(t)||(ie(o)?r.register(t,{processor:o,default:n}):r.register(t,{processor:jt,default:n})),r.isSet(t)||It(n)?r.get(t):n}hasPlugin(t,n){return!(!Te(Vc(this),t)||n&&pi.get(t)===void 0)}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,o){this.editorCommands.addCommand(t,n,o)}addQueryStateHandler(t,n,o){this.editorCommands.addQueryStateHandler(t,n,o)}addQueryValueHandler(t,n,o){this.editorCommands.addQueryValueHandler(t,n,o)}addShortcut(t,n,o,r){this.shortcuts.add(t,n,o,r)}execCommand(t,n,o,r){return this.editorCommands.execCommand(t,n,o,r)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(ka.show(t.getContainer()),ka.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(ka.hide(t.getContainer()),ka.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...t,load:!0},s=ju(o)?o.value:o.innerHTML,a=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),a}return""}save(t={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...t,save:!0,element:o};let s=n.getContent(r);const a={...r,content:s};if(a.no_events||n.dispatch("SaveContent",a),a.format==="raw"&&n.dispatch("RawSaveContent",a),s=a.content,ju(o))o.value=s;else{!t.is_removing&&n.inline||(o.innerHTML=s);const i=ka.getParent(n.id,"form");i&&WB(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=r.element=o=null,a.set_dirty!==!1&&n.setDirty(!1),s}setContent(t,n){return gp(this,t,n)}getContent(t){return((n,o={})=>{const r=((s,a)=>({...s,format:a,get:!0,getInner:!0}))(o,o.format?o.format:"html");return zC(n,r).fold(mt,s=>{const a=((i,l)=>pp(i).editor.getContent(l))(n,s);return UC(n,a,s)})})(this,t)}insertContent(t,n){n&&(t=IE({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?gp(this,this.startContent,{format:"raw"}):gp(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||ka.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ka.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const o=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:o?.body)!==null&&n!==void 0?n:null}convertURL(t,n,o){const r=this,s=r.options.get,a=K_(r);if(gt(a))return a.call(r,t,o,!0,n);if(!s("convert_urls")||o==="link"||Ke(o)&&o.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const i=new Xo(t);return i.protocol!=="http"&&i.protocol!=="https"&&i.protocol!==""?t:s("relative_urls")?r.documentBaseURI.toRelative(t):t=r.documentBaseURI.toAbsolute(t,s("remove_script_host"))}addVisual(t){((n,o)=>{((r,s)=>{tn(r).editor.addVisual(s)})(n,o)})(this,t)}setEditableRoot(t){((n,o)=>{n._editableRoot!==o&&(n._editableRoot=o,Xr(n)||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),((r,s)=>{r.dispatch("EditableRootStateChange",{state:s})})(n,o))})(this,t)}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:o}=t,r=t.getBody(),s=t.getElement();r&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&ie(s?.nextSibling)&&Rd.remove(s.nextSibling),(a=>{a.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&r&&(a=>{Rd.setStyle(a.id,"display",a.orgDisplay)})(t),(a=>{a.dispatch("detach")})(t),Rd.remove(t.getContainer()),Od(n),Od(o),t.destroy()}})(this)}destroy(t){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Od(r),Od(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),Rd.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;if(l){const c=l.dom;i.selection=l.win=l.dom=c.doc=null}})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Si=Rt.DOM,hu=v.each;let bu,FE=!1,eo=[];const vu=e=>{const t=e.type;hu(ks.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},jE=e=>{if(e!==FE){const t=Rt.DOM;e?(t.bind(window,"resize",vu),t.bind(window,"scroll",vu)):(t.unbind(window,"resize",vu),t.unbind(window,"scroll",vu)),FE=e}},zE=e=>{const t=eo;return eo=Ve(eo,n=>e!==n),ks.activeEditor===e&&(ks.activeEditor=eo.length>0?eo[0]:null),ks.focusedEditor===e&&(ks.focusedEditor=null),t.length!==eo.length},VB=document.compatMode!=="CSS1Compat",ks={...Ag,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"9.0",releaseDate:"2025-05-15",i18n:rr,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",o=Xo.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(l==="")continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){c.indexOf(".min")!==-1&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}var s;e.baseURL=new Xo(o).toAbsolute(t),e.documentBaseURL=o,e.baseURI=new Xo(e.baseURL),e.suffix=n,(s=e).on("AddEditor",ye(KN,s)),s.on("RemoveEditor",ye(XN,s))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const o=e.plugin_base_urls;o!==void 0&&yt(o,(r,s)=>{Wn.PluginManager.urls[s]=r})},init(e){const t=this;let n;const o=v.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;Si.unbind(window,"ready",s),(()=>{const c=e.onpageload;c&&c.apply(t,[])})(),l=pr((c=>ut.browser.isIE()||ut.browser.isEdge()?(Pd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):VB?(Pd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Ae(c.selector)?Si.select(c.selector):ie(c.target)?[c.target]:[])(e)),v.each(l,c=>{var d;(d=t.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(zE(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)}),l=v.grep(l,c=>!t.get(c.id)),l.length===0?r([]):hu(l,c=>{((d,f)=>d.inline&&f.tagName.toLowerCase()in o)(e,c)?Pd("Could not initialize inline editor on invalid inline target element",c):((d,f,m)=>{const b=new gu(d,f,t);i.push(b),b.on("init",()=>{++a===l.length&&r(i)}),b.targetElm=b.targetElm||m,b.render()})((d=>{let f=d.id;return f||(f=Bt(d,"name").filter(m=>!Si.get(m)).getOrThunk(Si.uniqueId),d.setAttribute("id",f)),f})(c),e,c)})};return Si.bind(window,"ready",s),new Promise(a=>{n?a(n):r=i=>{a(i)}})},get(e){return arguments.length===0?eo.slice(0):Ae(e)?Qt(eo,t=>t.id===e).getOr(null):x(e)&&eo[e]?eo[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&eo.push(e),jE(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),bu||(bu=o=>{const r=t.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",bu))),e},createEditor(e,t){return this.add(new gu(e,t,this))},remove(e){const t=this;let n;if(e){if(!Ae(e))return n=e,Je(t.get(n.id))?null:(zE(n)&&t.dispatch("RemoveEditor",{editor:n}),eo.length===0&&window.removeEventListener("beforeunload",bu),n.remove(),jE(eo.length>0),n);hu(Si.select(e),o=>{n=t.get(o.id),n&&t.remove(n)})}else for(let o=eo.length-1;o>=0;o--)t.remove(eo[o])},execCommand(e,t,n){var o;const r=this,s=Ke(n)?(o=n.id)!==null&&o!==void 0?o:n.index:n;switch(e){case"mceAddEditor":if(!r.get(s)){const a=n.options;new gu(s,a,r).render()}return!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:()=>{hu(eo,e=>{e.save()})},addI18n:(e,t)=>{rr.add(e,t)},translate:e=>rr.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Xo(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Xo(this.baseURL)}};ks.setup();const KB=(()=>{const e=wo();return{FakeClipboardItem:t=>({items:t,types:sn(t),getType:n=>Bt(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),UE=Math.min,Ei=Math.max,yu=Math.round,HE=(e,t,n)=>{let o=t.x,r=t.y;const s=e.w,a=e.h,i=t.w,l=t.h,c=(n||"").split("");return c[0]==="b"&&(r+=l),c[1]==="r"&&(o+=i),c[0]==="c"&&(r+=yu(l/2)),c[1]==="c"&&(o+=yu(i/2)),c[3]==="b"&&(r-=a),c[4]==="r"&&(o-=s),c[3]==="c"&&(r-=yu(a/2)),c[4]==="c"&&(o-=yu(s/2)),ki(o,r,s,a)},ki=(e,t,n,o)=>({x:e,y:t,w:n,h:o}),XB={inflate:(e,t,n)=>ki(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:HE,findBestRelativePosition:(e,t,n,o)=>{for(let r=0;r<o.length;r++){const s=HE(e,t,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(e,t)=>{const n=Ei(e.x,t.x),o=Ei(e.y,t.y),r=UE(e.x+e.w,t.x+t.w),s=UE(e.y+e.h,t.y+t.h);return r-n<0||s-o<0?null:ki(n,o,r-n,s-o)},clamp:(e,t,n)=>{let o=e.x,r=e.y,s=e.x+e.w,a=e.y+e.h;const i=t.x+t.w,l=t.y+t.h,c=Ei(0,t.x-o),d=Ei(0,t.y-r),f=Ei(0,s-i),m=Ei(0,a-l);return o+=c,r+=d,n&&(s+=c,a+=d,o-=f,r-=m),s-=f,a-=m,ki(o,r,s-o,a-r)},create:ki,fromClientRect:e=>ki(e.left,e.top,e.width,e.height)},YB=(()=>{const e={},t={},n={};return{load:(o,r)=>{const s=`Script at URL "${r}" failed to load`,a=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(e[o]!==void 0)return e[o];{const i=new Promise((l,c)=>{const d=((f,m,b=1e3)=>{let g=!1,y=null;const h=k=>(...T)=>{g||(g=!0,y!==null&&(window.clearTimeout(y),y=null),k.apply(null,T))},w=h(f),E=h(m);return{start:(...k)=>{g||y!==null||(y=window.setTimeout(()=>E.apply(null,k),b))},resolve:w,reject:E}})(l,c);t[o]=d.resolve,Vr.ScriptLoader.loadScript(r).then(()=>d.start(a),()=>d.reject(s))});return e[o]=i,i}},add:(o,r)=>{t[o]!==void 0&&(t[o](r),delete t[o]),e[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete e[o],delete n[o]}}})();let rc;try{const e="__storage_test__";rc=window.localStorage,rc.setItem(e,e),rc.removeItem(e)}catch{rc=(()=>{let t={},n=[];const o={getItem:r=>t[r]||null,setItem:(r,s)=>{n.push(r),t[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete t[r]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const GB={geom:{Rect:XB},util:{Delay:Do,Tools:v,VK:ve,URI:Xo,EventDispatcher:Ng,Observable:Ag,I18n:rr,LocalStorage:rc,ImageUploader:e=>{const t=C1(),n=x1(e,t);return{upload:(o,r=!0)=>n.upload(o,r?w1(e):void 0)}}},dom:{EventUtils:ta,TreeWalker:fn,TextSeeker:oa,DOMUtils:Rt,ScriptLoader:Vr,RangeUtils:ma,Serializer:s1,StyleSheetLoader:dh,ControlSelection:Kb,BookmarkManager:kl,Selection:r1,Event:ta.Event},html:{Styles:rf,Entities:ea,Node:Vn,Schema:us,DomParser:fi,Writer:Cv,Serializer:vs},Env:ut,AddOnManager:Wn,Annotator:Ib,Formatter:k1,UndoManager:N1,EditorCommands:AE,WindowManager:f1,NotificationManager:u1,EditorObservable:OE,Shortcuts:ME,Editor:gu,FocusManager:Hb,EditorManager:ks,DOM:Rt.DOM,ScriptLoader:Vr.ScriptLoader,PluginManager:pi,ThemeManager:ya,ModelManager:mi,IconManager:Bd,Resource:YB,FakeClipboard:KB,trim:v.trim,isArray:v.isArray,is:v.is,toArray:v.toArray,makeMap:v.makeMap,each:v.each,map:v.map,grep:v.grep,inArray:v.inArray,extend:v.extend,walk:v.walk,resolve:v.resolve,explode:v.explode,_addCacheSuffix:v._addCacheSuffix},qE=v.extend(ks,GB);(e=>{window.tinymce=e,window.tinyMCE=e})(qE),(e=>{if(typeof module=="object")try{module.exports=e}catch{}})(qE)})();/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */(function(ge,Ye){"use strict";typeof module=="object"&&typeof module.exports=="object"?module.exports=ge.document?Ye(ge,!0):function(Qe){if(!Qe.document)throw new Error("jQuery requires a window with a document");return Ye(Qe)}:Ye(ge)})(typeof window<"u"?window:this,function(ge,Ye){"use strict";var Qe=[],We=Object.getPrototypeOf,at=Qe.slice,Yt=Qe.flat?function(u){return Qe.flat.call(u)}:function(u){return Qe.concat.apply([],u)},kn=Qe.push,Zt=Qe.indexOf,Yn={},vo=Yn.toString,_n=Yn.hasOwnProperty,yo=_n.toString,Ae=yo.call(Object),Ke={},Le=function(u){return typeof u=="function"&&typeof u.nodeType!="number"&&typeof u.item!="function"},re=function(u){return u!=null&&u===u.window},Je=ge.document,pn={type:!0,src:!0,nonce:!0,noModule:!0};function It(u,p,C){var v,N,R=(C=C||Je).createElement("script");if(R.text=u,p)for(v in pn)(N=p[v]||p.getAttribute&&p.getAttribute(v))&&R.setAttribute(v,N);C.head.appendChild(R).parentNode.removeChild(R)}function xt(u){return u==null?u+"":typeof u=="object"||typeof u=="function"?Yn[vo.call(u)]||"object":typeof u}var ie="3.7.1",gt=/HTML$/i,x=function(u,p){return new x.fn.init(u,p)};function Nn(u){var p=!!u&&"length"in u&&u.length,C=xt(u);return!Le(u)&&!re(u)&&(C==="array"||p===0||typeof p=="number"&&0<p&&p-1 in u)}function Se(u,p){return u.nodeName&&u.nodeName.toLowerCase()===p.toLowerCase()}x.fn=x.prototype={jquery:ie,constructor:x,length:0,toArray:function(){return at.call(this)},get:function(u){return u==null?at.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var p=x.merge(this.constructor(),u);return p.prevObject=this,p},each:function(u){return x.each(this,u)},map:function(u){return this.pushStack(x.map(this,function(p,C){return u.call(p,C,p)}))},slice:function(){return this.pushStack(at.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(u,p){return(p+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(u,p){return p%2}))},eq:function(u){var p=this.length,C=+u+(u<0?p:0);return this.pushStack(0<=C&&C<p?[this[C]]:[])},end:function(){return this.prevObject||this.constructor()},push:kn,sort:Qe.sort,splice:Qe.splice},x.extend=x.fn.extend=function(){var u,p,C,v,N,R,O=arguments[0]||{},H=1,S=arguments.length,K=!1;for(typeof O=="boolean"&&(K=O,O=arguments[H]||{},H++),typeof O=="object"||Le(O)||(O={}),H===S&&(O=this,H--);H<S;H++)if((u=arguments[H])!=null)for(p in u)v=u[p],p!=="__proto__"&&O!==v&&(K&&v&&(x.isPlainObject(v)||(N=Array.isArray(v)))?(C=O[p],R=N&&!Array.isArray(C)?[]:N||x.isPlainObject(C)?C:{},N=!1,O[p]=x.extend(K,R,v)):v!==void 0&&(O[p]=v));return O},x.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var p,C;return!(!u||vo.call(u)!=="[object Object]")&&(!(p=We(u))||typeof(C=_n.call(p,"constructor")&&p.constructor)=="function"&&yo.call(C)===Ae)},isEmptyObject:function(u){var p;for(p in u)return!1;return!0},globalEval:function(u,p,C){It(u,{nonce:p&&p.nonce},C)},each:function(u,p){var C,v=0;if(Nn(u))for(C=u.length;v<C&&p.call(u[v],v,u[v])!==!1;v++);else for(v in u)if(p.call(u[v],v,u[v])===!1)break;return u},text:function(u){var p,C="",v=0,N=u.nodeType;if(!N)for(;p=u[v++];)C+=x.text(p);return N===1||N===11?u.textContent:N===9?u.documentElement.textContent:N===3||N===4?u.nodeValue:C},makeArray:function(u,p){var C=p||[];return u!=null&&(Nn(Object(u))?x.merge(C,typeof u=="string"?[u]:u):kn.call(C,u)),C},inArray:function(u,p,C){return p==null?-1:Zt.call(p,u,C)},isXMLDoc:function(u){var p=u&&u.namespaceURI,C=u&&(u.ownerDocument||u).documentElement;return!gt.test(p||C&&C.nodeName||"HTML")},merge:function(u,p){for(var C=+p.length,v=0,N=u.length;v<C;v++)u[N++]=p[v];return u.length=N,u},grep:function(u,p,C){for(var v=[],N=0,R=u.length,O=!C;N<R;N++)!p(u[N],N)!==O&&v.push(u[N]);return v},map:function(u,p,C){var v,N,R=0,O=[];if(Nn(u))for(v=u.length;R<v;R++)(N=p(u[R],R,C))!=null&&O.push(N);else for(R in u)(N=p(u[R],R,C))!=null&&O.push(N);return Yt(O)},guid:1,support:Ke}),typeof Symbol=="function"&&(x.fn[Symbol.iterator]=Qe[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,p){Yn["[object "+p+"]"]=p.toLowerCase()});var An=Qe.pop,Ts=Qe.sort,ue=Qe.splice,mt="[\\x20\\t\\r\\n\\f]",Yo=new RegExp("^"+mt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+mt+"+$","g");x.contains=function(u,p){var C=p&&p.parentNode;return u===C||!(!C||C.nodeType!==1||!(u.contains?u.contains(C):u.compareDocumentPosition&&16&u.compareDocumentPosition(C)))};var ye=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function dr(u,p){return p?u==="\0"?"\uFFFD":u.slice(0,-1)+"\\"+u.charCodeAt(u.length-1).toString(16)+" ":"\\"+u}x.escapeSelector=function(u){return(u+"").replace(ye,dr)};var io=Je,ur=kn;(function(){var u,p,C,v,N,R,O,H,S,K,ee=ur,ae=x.expando,J=0,de=0,$e=Wt(),ct=Wt(),_e=Wt(),Ot=Wt(),cn=function(I,q){return I===q&&(N=!0),0},st="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Eo="(?:\\\\[\\da-fA-F]{1,6}"+mt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ht="\\["+mt+"*("+Eo+")(?:"+mt+"*([*^$|!~]?=)"+mt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Eo+"))|)"+mt+"*\\]",ko=":("+Eo+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ht+")*)|.*)\\)|)",dt=new RegExp(mt+"+","g"),vt=new RegExp("^"+mt+"*,"+mt+"*"),qs=new RegExp("^"+mt+"*([>+~]|"+mt+")"+mt+"*"),Vi=new RegExp(mt+"|>"),Jn=new RegExp(ko),is=new RegExp("^"+Eo+"$"),Rn={ID:new RegExp("^#("+Eo+")"),CLASS:new RegExp("^\\.("+Eo+")"),TAG:new RegExp("^("+Eo+"|[*])"),ATTR:new RegExp("^"+ht),PSEUDO:new RegExp("^"+ko),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+mt+"*(even|odd|(([+-]|)(\\d*)n|)"+mt+"*(?:([+-]|)"+mt+"*(\\d+)|))"+mt+"*\\)|)","i"),bool:new RegExp("^(?:"+st+")$","i"),needsContext:new RegExp("^"+mt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+mt+"*((?:-\\d)?\\d*)"+mt+"*\\)|)(?=[^-]|$)","i")},fo=/^(?:input|select|textarea|button)$/i,Hn=/^h\d$/i,On=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,dn=/[+~]/,Ut=new RegExp("\\\\[\\da-fA-F]{1,6}"+mt+"?|\\\\([^\\r\\n\\f])","g"),un=function(I,q){var Z="0x"+I.slice(1)-65536;return q||(Z<0?String.fromCharCode(Z+65536):String.fromCharCode(Z>>10|55296,1023&Z|56320))},Zo=function(){tr()},Bn=Fa(function(I){return I.disabled===!0&&Se(I,"fieldset")},{dir:"parentNode",next:"legend"});try{ee.apply(Qe=at.call(io.childNodes),io.childNodes),Qe[io.childNodes.length].nodeType}catch{ee={apply:function(q,Z){ur.apply(q,at.call(Z))},call:function(q){ur.apply(q,at.call(arguments,1))}}}function He(I,q,Z,ne){var ce,Ee,Me,Fe,De,Ct,Ge,ft=q&&q.ownerDocument,bt=q?q.nodeType:9;if(Z=Z||[],typeof I!="string"||!I||bt!==1&&bt!==9&&bt!==11)return Z;if(!ne&&(tr(q),q=q||R,H)){if(bt!==11&&(De=On.exec(I)))if(ce=De[1]){if(bt===9){if(!(Me=q.getElementById(ce)))return Z;if(Me.id===ce)return ee.call(Z,Me),Z}else if(ft&&(Me=ft.getElementById(ce))&&He.contains(q,Me)&&Me.id===ce)return ee.call(Z,Me),Z}else{if(De[2])return ee.apply(Z,q.getElementsByTagName(I)),Z;if((ce=De[3])&&q.getElementsByClassName)return ee.apply(Z,q.getElementsByClassName(ce)),Z}if(!(Ot[I+" "]||S&&S.test(I))){if(Ge=I,ft=q,bt===1&&(Vi.test(I)||qs.test(I))){for((ft=dn.test(I)&&Ki(q.parentNode)||q)==q&&Ke.scope||((Fe=q.getAttribute("id"))?Fe=x.escapeSelector(Fe):q.setAttribute("id",Fe=ae)),Ee=(Ct=$s(I)).length;Ee--;)Ct[Ee]=(Fe?"#"+Fe:":scope")+" "+Ia(Ct[Ee]);Ge=Ct.join(",")}try{return ee.apply(Z,ft.querySelectorAll(Ge)),Z}catch{Ot(I,!0)}finally{Fe===ae&&q.removeAttribute("id")}}}return qo(I.replace(Yo,"$1"),q,Z,ne)}function Wt(){var I=[];return function q(Z,ne){return I.push(Z+" ")>p.cacheLength&&delete q[I.shift()],q[Z+" "]=ne}}function Gt(I){return I[ae]=!0,I}function Ht(I){var q=R.createElement("fieldset");try{return!!I(q)}catch{return!1}finally{q.parentNode&&q.parentNode.removeChild(q),q=null}}function mo(I){return function(q){return Se(q,"input")&&q.type===I}}function yr(I){return function(q){return(Se(q,"input")||Se(q,"button"))&&q.type===I}}function _o(I){return function(q){return"form"in q?q.parentNode&&q.disabled===!1?"label"in q?"label"in q.parentNode?q.parentNode.disabled===I:q.disabled===I:q.isDisabled===I||q.isDisabled!==!I&&Bn(q)===I:q.disabled===I:"label"in q&&q.disabled===I}}function er(I){return Gt(function(q){return q=+q,Gt(function(Z,ne){for(var ce,Ee=I([],Z.length,q),Me=Ee.length;Me--;)Z[ce=Ee[Me]]&&(Z[ce]=!(ne[ce]=Z[ce]))})})}function Ki(I){return I&&typeof I.getElementsByTagName<"u"&&I}function tr(I){var q,Z=I?I.ownerDocument||I:io;return Z!=R&&Z.nodeType===9&&Z.documentElement&&(O=(R=Z).documentElement,H=!x.isXMLDoc(R),K=O.matches||O.webkitMatchesSelector||O.msMatchesSelector,O.msMatchesSelector&&io!=R&&(q=R.defaultView)&&q.top!==q&&q.addEventListener("unload",Zo),Ke.getById=Ht(function(ne){return O.appendChild(ne).id=x.expando,!R.getElementsByName||!R.getElementsByName(x.expando).length}),Ke.disconnectedMatch=Ht(function(ne){return K.call(ne,"*")}),Ke.scope=Ht(function(){return R.querySelectorAll(":scope")}),Ke.cssHas=Ht(function(){try{return R.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Ke.getById?(p.filter.ID=function(ne){var ce=ne.replace(Ut,un);return function(Ee){return Ee.getAttribute("id")===ce}},p.find.ID=function(ne,ce){if(typeof ce.getElementById<"u"&&H){var Ee=ce.getElementById(ne);return Ee?[Ee]:[]}}):(p.filter.ID=function(ne){var ce=ne.replace(Ut,un);return function(Ee){var Me=typeof Ee.getAttributeNode<"u"&&Ee.getAttributeNode("id");return Me&&Me.value===ce}},p.find.ID=function(ne,ce){if(typeof ce.getElementById<"u"&&H){var Ee,Me,Fe,De=ce.getElementById(ne);if(De){if((Ee=De.getAttributeNode("id"))&&Ee.value===ne)return[De];for(Fe=ce.getElementsByName(ne),Me=0;De=Fe[Me++];)if((Ee=De.getAttributeNode("id"))&&Ee.value===ne)return[De]}return[]}}),p.find.TAG=function(ne,ce){return typeof ce.getElementsByTagName<"u"?ce.getElementsByTagName(ne):ce.querySelectorAll(ne)},p.find.CLASS=function(ne,ce){if(typeof ce.getElementsByClassName<"u"&&H)return ce.getElementsByClassName(ne)},S=[],Ht(function(ne){var ce;O.appendChild(ne).innerHTML="<a id='"+ae+"' href='' disabled='disabled'></a><select id='"+ae+"-\r\\' disabled='disabled'><option selected=''></option></select>",ne.querySelectorAll("[selected]").length||S.push("\\["+mt+"*(?:value|"+st+")"),ne.querySelectorAll("[id~="+ae+"-]").length||S.push("~="),ne.querySelectorAll("a#"+ae+"+*").length||S.push(".#.+[+~]"),ne.querySelectorAll(":checked").length||S.push(":checked"),(ce=R.createElement("input")).setAttribute("type","hidden"),ne.appendChild(ce).setAttribute("name","D"),O.appendChild(ne).disabled=!0,ne.querySelectorAll(":disabled").length!==2&&S.push(":enabled",":disabled"),(ce=R.createElement("input")).setAttribute("name",""),ne.appendChild(ce),ne.querySelectorAll("[name='']").length||S.push("\\["+mt+"*name"+mt+"*="+mt+`*(?:''|"")`)}),Ke.cssHas||S.push(":has"),S=S.length&&new RegExp(S.join("|")),cn=function(ne,ce){if(ne===ce)return N=!0,0;var Ee=!ne.compareDocumentPosition-!ce.compareDocumentPosition;return Ee||(1&(Ee=(ne.ownerDocument||ne)==(ce.ownerDocument||ce)?ne.compareDocumentPosition(ce):1)||!Ke.sortDetached&&ce.compareDocumentPosition(ne)===Ee?ne===R||ne.ownerDocument==io&&He.contains(io,ne)?-1:ce===R||ce.ownerDocument==io&&He.contains(io,ce)?1:v?Zt.call(v,ne)-Zt.call(v,ce):0:4&Ee?-1:1)}),R}for(u in He.matches=function(I,q){return He(I,null,null,q)},He.matchesSelector=function(I,q){if(tr(I),H&&!Ot[q+" "]&&(!S||!S.test(q)))try{var Z=K.call(I,q);if(Z||Ke.disconnectedMatch||I.document&&I.document.nodeType!==11)return Z}catch{Ot(q,!0)}return 0<He(q,R,null,[I]).length},He.contains=function(I,q){return(I.ownerDocument||I)!=R&&tr(I),x.contains(I,q)},He.attr=function(I,q){(I.ownerDocument||I)!=R&&tr(I);var Z=p.attrHandle[q.toLowerCase()],ne=Z&&_n.call(p.attrHandle,q.toLowerCase())?Z(I,q,!H):void 0;return ne!==void 0?ne:I.getAttribute(q)},He.error=function(I){throw new Error("Syntax error, unrecognized expression: "+I)},x.uniqueSort=function(I){var q,Z=[],ne=0,ce=0;if(N=!Ke.sortStable,v=!Ke.sortStable&&at.call(I,0),Ts.call(I,cn),N){for(;q=I[ce++];)q===I[ce]&&(ne=Z.push(ce));for(;ne--;)ue.call(I,Z[ne],1)}return v=null,I},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(at.apply(this)))},(p=x.expr={cacheLength:50,createPseudo:Gt,match:Rn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(I){return I[1]=I[1].replace(Ut,un),I[3]=(I[3]||I[4]||I[5]||"").replace(Ut,un),I[2]==="~="&&(I[3]=" "+I[3]+" "),I.slice(0,4)},CHILD:function(I){return I[1]=I[1].toLowerCase(),I[1].slice(0,3)==="nth"?(I[3]||He.error(I[0]),I[4]=+(I[4]?I[5]+(I[6]||1):2*(I[3]==="even"||I[3]==="odd")),I[5]=+(I[7]+I[8]||I[3]==="odd")):I[3]&&He.error(I[0]),I},PSEUDO:function(I){var q,Z=!I[6]&&I[2];return Rn.CHILD.test(I[0])?null:(I[3]?I[2]=I[4]||I[5]||"":Z&&Jn.test(Z)&&(q=$s(Z,!0))&&(q=Z.indexOf(")",Z.length-q)-Z.length)&&(I[0]=I[0].slice(0,q),I[2]=Z.slice(0,q)),I.slice(0,3))}},filter:{TAG:function(I){var q=I.replace(Ut,un).toLowerCase();return I==="*"?function(){return!0}:function(Z){return Se(Z,q)}},CLASS:function(I){var q=$e[I+" "];return q||(q=new RegExp("(^|"+mt+")"+I+"("+mt+"|$)"))&&$e(I,function(Z){return q.test(typeof Z.className=="string"&&Z.className||typeof Z.getAttribute<"u"&&Z.getAttribute("class")||"")})},ATTR:function(I,q,Z){return function(ne){var ce=He.attr(ne,I);return ce==null?q==="!=":!q||(ce+="",q==="="?ce===Z:q==="!="?ce!==Z:q==="^="?Z&&ce.indexOf(Z)===0:q==="*="?Z&&-1<ce.indexOf(Z):q==="$="?Z&&ce.slice(-Z.length)===Z:q==="~="?-1<(" "+ce.replace(dt," ")+" ").indexOf(Z):q==="|="&&(ce===Z||ce.slice(0,Z.length+1)===Z+"-"))}},CHILD:function(I,q,Z,ne,ce){var Ee=I.slice(0,3)!=="nth",Me=I.slice(-4)!=="last",Fe=q==="of-type";return ne===1&&ce===0?function(De){return!!De.parentNode}:function(De,Ct,Ge){var ft,bt,Be,Vt,xn,Xt=Ee!==Me?"nextSibling":"previousSibling",qn=De.parentNode,$n=Fe&&De.nodeName.toLowerCase(),po=!Ge&&!Fe,Ft=!1;if(qn){if(Ee){for(;Xt;){for(Be=De;Be=Be[Xt];)if(Fe?Se(Be,$n):Be.nodeType===1)return!1;xn=Xt=I==="only"&&!xn&&"nextSibling"}return!0}if(xn=[Me?qn.firstChild:qn.lastChild],Me&&po){for(Ft=(Vt=(ft=(bt=qn[ae]||(qn[ae]={}))[I]||[])[0]===J&&ft[1])&&ft[2],Be=Vt&&qn.childNodes[Vt];Be=++Vt&&Be&&Be[Xt]||(Ft=Vt=0)||xn.pop();)if(Be.nodeType===1&&++Ft&&Be===De){bt[I]=[J,Vt,Ft];break}}else if(po&&(Ft=Vt=(ft=(bt=De[ae]||(De[ae]={}))[I]||[])[0]===J&&ft[1]),Ft===!1)for(;(Be=++Vt&&Be&&Be[Xt]||(Ft=Vt=0)||xn.pop())&&!((Fe?Se(Be,$n):Be.nodeType===1)&&++Ft&&(po&&((bt=Be[ae]||(Be[ae]={}))[I]=[J,Ft]),Be===De)););return(Ft-=ce)===ne||Ft%ne==0&&0<=Ft/ne}}},PSEUDO:function(I,q){var Z,ne=p.pseudos[I]||p.setFilters[I.toLowerCase()]||He.error("unsupported pseudo: "+I);return ne[ae]?ne(q):1<ne.length?(Z=[I,I,"",q],p.setFilters.hasOwnProperty(I.toLowerCase())?Gt(function(ce,Ee){for(var Me,Fe=ne(ce,q),De=Fe.length;De--;)ce[Me=Zt.call(ce,Fe[De])]=!(Ee[Me]=Fe[De])}):function(ce){return ne(ce,0,Z)}):ne}},pseudos:{not:Gt(function(I){var q=[],Z=[],ne=wn(I.replace(Yo,"$1"));return ne[ae]?Gt(function(ce,Ee,Me,Fe){for(var De,Ct=ne(ce,null,Fe,[]),Ge=ce.length;Ge--;)(De=Ct[Ge])&&(ce[Ge]=!(Ee[Ge]=De))}):function(ce,Ee,Me){return q[0]=ce,ne(q,null,Me,Z),q[0]=null,!Z.pop()}}),has:Gt(function(I){return function(q){return 0<He(I,q).length}}),contains:Gt(function(I){return I=I.replace(Ut,un),function(q){return-1<(q.textContent||x.text(q)).indexOf(I)}}),lang:Gt(function(I){return is.test(I||"")||He.error("unsupported lang: "+I),I=I.replace(Ut,un).toLowerCase(),function(q){var Z;do if(Z=H?q.lang:q.getAttribute("xml:lang")||q.getAttribute("lang"))return(Z=Z.toLowerCase())===I||Z.indexOf(I+"-")===0;while((q=q.parentNode)&&q.nodeType===1);return!1}}),target:function(I){var q=ge.location&&ge.location.hash;return q&&q.slice(1)===I.id},root:function(I){return I===O},focus:function(I){return I===function(){try{return R.activeElement}catch{}}()&&R.hasFocus()&&!!(I.type||I.href||~I.tabIndex)},enabled:_o(!1),disabled:_o(!0),checked:function(I){return Se(I,"input")&&!!I.checked||Se(I,"option")&&!!I.selected},selected:function(I){return I.parentNode&&I.parentNode.selectedIndex,I.selected===!0},empty:function(I){for(I=I.firstChild;I;I=I.nextSibling)if(I.nodeType<6)return!1;return!0},parent:function(I){return!p.pseudos.empty(I)},header:function(I){return Hn.test(I.nodeName)},input:function(I){return fo.test(I.nodeName)},button:function(I){return Se(I,"input")&&I.type==="button"||Se(I,"button")},text:function(I){var q;return Se(I,"input")&&I.type==="text"&&((q=I.getAttribute("type"))==null||q.toLowerCase()==="text")},first:er(function(){return[0]}),last:er(function(I,q){return[q-1]}),eq:er(function(I,q,Z){return[Z<0?Z+q:Z]}),even:er(function(I,q){for(var Z=0;Z<q;Z+=2)I.push(Z);return I}),odd:er(function(I,q){for(var Z=1;Z<q;Z+=2)I.push(Z);return I}),lt:er(function(I,q,Z){var ne;for(ne=Z<0?Z+q:q<Z?q:Z;0<=--ne;)I.push(ne);return I}),gt:er(function(I,q,Z){for(var ne=Z<0?Z+q:Z;++ne<q;)I.push(ne);return I})}}).pseudos.nth=p.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})p.pseudos[u]=mo(u);for(u in{submit:!0,reset:!0})p.pseudos[u]=yr(u);function xc(){}function $s(I,q){var Z,ne,ce,Ee,Me,Fe,De,Ct=ct[I+" "];if(Ct)return q?0:Ct.slice(0);for(Me=I,Fe=[],De=p.preFilter;Me;){for(Ee in Z&&!(ne=vt.exec(Me))||(ne&&(Me=Me.slice(ne[0].length)||Me),Fe.push(ce=[])),Z=!1,(ne=qs.exec(Me))&&(Z=ne.shift(),ce.push({value:Z,type:ne[0].replace(Yo," ")}),Me=Me.slice(Z.length)),p.filter)!(ne=Rn[Ee].exec(Me))||De[Ee]&&!(ne=De[Ee](ne))||(Z=ne.shift(),ce.push({value:Z,type:Ee,matches:ne}),Me=Me.slice(Z.length));if(!Z)break}return q?Me.length:Me?He.error(I):ct(I,Fe).slice(0)}function Ia(I){for(var q=0,Z=I.length,ne="";q<Z;q++)ne+=I[q].value;return ne}function Fa(I,q,Z){var ne=q.dir,ce=q.next,Ee=ce||ne,Me=Z&&Ee==="parentNode",Fe=de++;return q.first?function(De,Ct,Ge){for(;De=De[ne];)if(De.nodeType===1||Me)return I(De,Ct,Ge);return!1}:function(De,Ct,Ge){var ft,bt,Be=[J,Fe];if(Ge){for(;De=De[ne];)if((De.nodeType===1||Me)&&I(De,Ct,Ge))return!0}else for(;De=De[ne];)if(De.nodeType===1||Me)if(bt=De[ae]||(De[ae]={}),ce&&Se(De,ce))De=De[ne]||De;else{if((ft=bt[Ee])&&ft[0]===J&&ft[1]===Fe)return Be[2]=ft[2];if((bt[Ee]=Be)[2]=I(De,Ct,Ge))return!0}return!1}}function ja(I){return 1<I.length?function(q,Z,ne){for(var ce=I.length;ce--;)if(!I[ce](q,Z,ne))return!1;return!0}:I[0]}function Ws(I,q,Z,ne,ce){for(var Ee,Me=[],Fe=0,De=I.length,Ct=q!=null;Fe<De;Fe++)(Ee=I[Fe])&&(Z&&!Z(Ee,ne,ce)||(Me.push(Ee),Ct&&q.push(Fe)));return Me}function za(I,q,Z,ne,ce,Ee){return ne&&!ne[ae]&&(ne=za(ne)),ce&&!ce[ae]&&(ce=za(ce,Ee)),Gt(function(Me,Fe,De,Ct){var Ge,ft,bt,Be,Vt=[],xn=[],Xt=Fe.length,qn=Me||function(po,Ft,No){for(var Dn=0,Ks=Ft.length;Dn<Ks;Dn++)He(po,Ft[Dn],No);return No}(q||"*",De.nodeType?[De]:De,[]),$n=!I||!Me&&q?qn:Ws(qn,Vt,I,De,Ct);if(Z?Z($n,Be=ce||(Me?I:Xt||ne)?[]:Fe,De,Ct):Be=$n,ne)for(Ge=Ws(Be,xn),ne(Ge,[],De,Ct),ft=Ge.length;ft--;)(bt=Ge[ft])&&(Be[xn[ft]]=!($n[xn[ft]]=bt));if(Me){if(ce||I){if(ce){for(Ge=[],ft=Be.length;ft--;)(bt=Be[ft])&&Ge.push($n[ft]=bt);ce(null,Be=[],Ge,Ct)}for(ft=Be.length;ft--;)(bt=Be[ft])&&-1<(Ge=ce?Zt.call(Me,bt):Vt[ft])&&(Me[Ge]=!(Fe[Ge]=bt))}}else Be=Ws(Be===Fe?Be.splice(Xt,Be.length):Be),ce?ce(null,Fe,Be,Ct):ee.apply(Fe,Be)})}function Vs(I){for(var q,Z,ne,ce=I.length,Ee=p.relative[I[0].type],Me=Ee||p.relative[" "],Fe=Ee?1:0,De=Fa(function(ft){return ft===q},Me,!0),Ct=Fa(function(ft){return-1<Zt.call(q,ft)},Me,!0),Ge=[function(ft,bt,Be){var Vt=!Ee&&(Be||bt!=C)||((q=bt).nodeType?De(ft,bt,Be):Ct(ft,bt,Be));return q=null,Vt}];Fe<ce;Fe++)if(Z=p.relative[I[Fe].type])Ge=[Fa(ja(Ge),Z)];else{if((Z=p.filter[I[Fe].type].apply(null,I[Fe].matches))[ae]){for(ne=++Fe;ne<ce&&!p.relative[I[ne].type];ne++);return za(1<Fe&&ja(Ge),1<Fe&&Ia(I.slice(0,Fe-1).concat({value:I[Fe-2].type===" "?"*":""})).replace(Yo,"$1"),Z,Fe<ne&&Vs(I.slice(Fe,ne)),ne<ce&&Vs(I=I.slice(ne)),ne<ce&&Ia(I))}Ge.push(Z)}return ja(Ge)}function wn(I,q){var Z,ne,ce,Ee,Me,Fe,De=[],Ct=[],Ge=_e[I+" "];if(!Ge){for(q||(q=$s(I)),Z=q.length;Z--;)(Ge=Vs(q[Z]))[ae]?De.push(Ge):Ct.push(Ge);(Ge=_e(I,(ne=Ct,Ee=0<(ce=De).length,Me=0<ne.length,Fe=function(ft,bt,Be,Vt,xn){var Xt,qn,$n,po=0,Ft="0",No=ft&&[],Dn=[],Ks=C,Xi=ft||Me&&p.find.TAG("*",xn),Xs=J+=Ks==null?1:Math.random()||.1,$o=Xi.length;for(xn&&(C=bt==R||bt||xn);Ft!==$o&&(Xt=Xi[Ft])!=null;Ft++){if(Me&&Xt){for(qn=0,bt||Xt.ownerDocument==R||(tr(Xt),Be=!H);$n=ne[qn++];)if($n(Xt,bt||R,Be)){ee.call(Vt,Xt);break}xn&&(J=Xs)}Ee&&((Xt=!$n&&Xt)&&po--,ft&&No.push(Xt))}if(po+=Ft,Ee&&Ft!==po){for(qn=0;$n=ce[qn++];)$n(No,Dn,bt,Be);if(ft){if(0<po)for(;Ft--;)No[Ft]||Dn[Ft]||(Dn[Ft]=An.call(Vt));Dn=Ws(Dn)}ee.apply(Vt,Dn),xn&&!ft&&0<Dn.length&&1<po+ce.length&&x.uniqueSort(Vt)}return xn&&(J=Xs,C=Ks),No},Ee?Gt(Fe):Fe))).selector=I}return Ge}function qo(I,q,Z,ne){var ce,Ee,Me,Fe,De,Ct=typeof I=="function"&&I,Ge=!ne&&$s(I=Ct.selector||I);if(Z=Z||[],Ge.length===1){if(2<(Ee=Ge[0]=Ge[0].slice(0)).length&&(Me=Ee[0]).type==="ID"&&q.nodeType===9&&H&&p.relative[Ee[1].type]){if(!(q=(p.find.ID(Me.matches[0].replace(Ut,un),q)||[])[0]))return Z;Ct&&(q=q.parentNode),I=I.slice(Ee.shift().value.length)}for(ce=Rn.needsContext.test(I)?0:Ee.length;ce--&&(Me=Ee[ce],!p.relative[Fe=Me.type]);)if((De=p.find[Fe])&&(ne=De(Me.matches[0].replace(Ut,un),dn.test(Ee[0].type)&&Ki(q.parentNode)||q))){if(Ee.splice(ce,1),!(I=ne.length&&Ia(Ee)))return ee.apply(Z,ne),Z;break}}return(Ct||wn(I,Ge))(ne,q,!H,Z,!q||dn.test(I)&&Ki(q.parentNode)||q),Z}xc.prototype=p.filters=p.pseudos,p.setFilters=new xc,Ke.sortStable=ae.split("").sort(cn).join("")===ae,tr(),Ke.sortDetached=Ht(function(I){return 1&I.compareDocumentPosition(R.createElement("fieldset"))}),x.find=He,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,He.compile=wn,He.select=qo,He.setDocument=tr,He.tokenize=$s,He.escape=x.escapeSelector,He.getText=x.text,He.isXML=x.isXMLDoc,He.selectors=x.expr,He.support=x.support,He.uniqueSort=x.uniqueSort})();var Gn=function(u,p,C){for(var v=[],N=C!==void 0;(u=u[p])&&u.nodeType!==9;)if(u.nodeType===1){if(N&&x(u).is(C))break;v.push(u)}return v},St=function(u,p){for(var C=[];u;u=u.nextSibling)u.nodeType===1&&u!==p&&C.push(u);return C},jt=x.expr.match.needsContext,_=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function fr(u,p,C){return Le(p)?x.grep(u,function(v,N){return!!p.call(v,N,v)!==C}):p.nodeType?x.grep(u,function(v){return v===p!==C}):typeof p!="string"?x.grep(u,function(v){return-1<Zt.call(p,v)!==C}):x.filter(p,u,C)}x.filter=function(u,p,C){var v=p[0];return C&&(u=":not("+u+")"),p.length===1&&v.nodeType===1?x.find.matchesSelector(v,u)?[v]:[]:x.find.matches(u,x.grep(p,function(N){return N.nodeType===1}))},x.fn.extend({find:function(u){var p,C,v=this.length,N=this;if(typeof u!="string")return this.pushStack(x(u).filter(function(){for(p=0;p<v;p++)if(x.contains(N[p],this))return!0}));for(C=this.pushStack([]),p=0;p<v;p++)x.find(u,N[p],C);return 1<v?x.uniqueSort(C):C},filter:function(u){return this.pushStack(fr(this,u||[],!1))},not:function(u){return this.pushStack(fr(this,u||[],!0))},is:function(u){return!!fr(this,typeof u=="string"&&jt.test(u)?x(u):u||[],!1).length}});var ke,rt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(u,p,C){var v,N;if(!u)return this;if(C=C||ke,typeof u=="string"){if(!(v=u[0]==="<"&&u[u.length-1]===">"&&3<=u.length?[null,u,null]:rt.exec(u))||!v[1]&&p)return!p||p.jquery?(p||C).find(u):this.constructor(p).find(u);if(v[1]){if(p=p instanceof x?p[0]:p,x.merge(this,x.parseHTML(v[1],p&&p.nodeType?p.ownerDocument||p:Je,!0)),_.test(v[1])&&x.isPlainObject(p))for(v in p)Le(this[v])?this[v](p[v]):this.attr(v,p[v]);return this}return(N=Je.getElementById(v[2]))&&(this[0]=N,this.length=1),this}return u.nodeType?(this[0]=u,this.length=1,this):Le(u)?C.ready!==void 0?C.ready(u):u(x):x.makeArray(u,this)}).prototype=x.fn,ke=x(Je);var lt=/^(?:parents|prev(?:Until|All))/,Te={children:!0,contents:!0,next:!0,prev:!0};function Et(u,p){for(;(u=u[p])&&u.nodeType!==1;);return u}x.fn.extend({has:function(u){var p=x(u,this),C=p.length;return this.filter(function(){for(var v=0;v<C;v++)if(x.contains(this,p[v]))return!0})},closest:function(u,p){var C,v=0,N=this.length,R=[],O=typeof u!="string"&&x(u);if(!jt.test(u)){for(;v<N;v++)for(C=this[v];C&&C!==p;C=C.parentNode)if(C.nodeType<11&&(O?-1<O.index(C):C.nodeType===1&&x.find.matchesSelector(C,u))){R.push(C);break}}return this.pushStack(1<R.length?x.uniqueSort(R):R)},index:function(u){return u?typeof u=="string"?Zt.call(x(u),this[0]):Zt.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,p){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(u,p))))},addBack:function(u){return this.add(u==null?this.prevObject:this.prevObject.filter(u))}}),x.each({parent:function(u){var p=u.parentNode;return p&&p.nodeType!==11?p:null},parents:function(u){return Gn(u,"parentNode")},parentsUntil:function(u,p,C){return Gn(u,"parentNode",C)},next:function(u){return Et(u,"nextSibling")},prev:function(u){return Et(u,"previousSibling")},nextAll:function(u){return Gn(u,"nextSibling")},prevAll:function(u){return Gn(u,"previousSibling")},nextUntil:function(u,p,C){return Gn(u,"nextSibling",C)},prevUntil:function(u,p,C){return Gn(u,"previousSibling",C)},siblings:function(u){return St((u.parentNode||{}).firstChild,u)},children:function(u){return St(u.firstChild)},contents:function(u){return u.contentDocument!=null&&We(u.contentDocument)?u.contentDocument:(Se(u,"template")&&(u=u.content||u),x.merge([],u.childNodes))}},function(u,p){x.fn[u]=function(C,v){var N=x.map(this,p,C);return u.slice(-5)!=="Until"&&(v=C),v&&typeof v=="string"&&(N=x.filter(v,N)),1<this.length&&(Te[u]||x.uniqueSort(N),lt.test(u)&&N.reverse()),this.pushStack(N)}});var ot=/[^\x20\t\r\n\f]+/g;function Q(u){return u}function mr(u){throw u}function zo(u,p,C,v){var N;try{u&&Le(N=u.promise)?N.call(u).done(p).fail(C):u&&Le(N=u.then)?N.call(u,p,C):p.apply(void 0,[u].slice(v))}catch(R){C.apply(void 0,[R])}}x.Callbacks=function(u){var p,C;u=typeof u=="string"?(p=u,C={},x.each(p.match(ot)||[],function(J,de){C[de]=!0}),C):x.extend({},u);var v,N,R,O,H=[],S=[],K=-1,ee=function(){for(O=O||u.once,R=v=!0;S.length;K=-1)for(N=S.shift();++K<H.length;)H[K].apply(N[0],N[1])===!1&&u.stopOnFalse&&(K=H.length,N=!1);u.memory||(N=!1),v=!1,O&&(H=N?[]:"")},ae={add:function(){return H&&(N&&!v&&(K=H.length-1,S.push(N)),function J(de){x.each(de,function($e,ct){Le(ct)?u.unique&&ae.has(ct)||H.push(ct):ct&&ct.length&&xt(ct)!=="string"&&J(ct)})}(arguments),N&&!v&&ee()),this},remove:function(){return x.each(arguments,function(J,de){for(var $e;-1<($e=x.inArray(de,H,$e));)H.splice($e,1),$e<=K&&K--}),this},has:function(J){return J?-1<x.inArray(J,H):0<H.length},empty:function(){return H&&(H=[]),this},disable:function(){return O=S=[],H=N="",this},disabled:function(){return!H},lock:function(){return O=S=[],N||v||(H=N=""),this},locked:function(){return!!O},fireWith:function(J,de){return O||(de=[J,(de=de||[]).slice?de.slice():de],S.push(de),v||ee()),this},fire:function(){return ae.fireWith(this,arguments),this},fired:function(){return!!R}};return ae},x.extend({Deferred:function(u){var p=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],C="pending",v={state:function(){return C},always:function(){return N.done(arguments).fail(arguments),this},catch:function(R){return v.then(null,R)},pipe:function(){var R=arguments;return x.Deferred(function(O){x.each(p,function(H,S){var K=Le(R[S[4]])&&R[S[4]];N[S[1]](function(){var ee=K&&K.apply(this,arguments);ee&&Le(ee.promise)?ee.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[S[0]+"With"](this,K?[ee]:arguments)})}),R=null}).promise()},then:function(R,O,H){var S=0;function K(ee,ae,J,de){return function(){var $e=this,ct=arguments,_e=function(){var cn,st;if(!(ee<S)){if((cn=J.apply($e,ct))===ae.promise())throw new TypeError("Thenable self-resolution");st=cn&&(typeof cn=="object"||typeof cn=="function")&&cn.then,Le(st)?de?st.call(cn,K(S,ae,Q,de),K(S,ae,mr,de)):(S++,st.call(cn,K(S,ae,Q,de),K(S,ae,mr,de),K(S,ae,Q,ae.notifyWith))):(J!==Q&&($e=void 0,ct=[cn]),(de||ae.resolveWith)($e,ct))}},Ot=de?_e:function(){try{_e()}catch(cn){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(cn,Ot.error),S<=ee+1&&(J!==mr&&($e=void 0,ct=[cn]),ae.rejectWith($e,ct))}};ee?Ot():(x.Deferred.getErrorHook?Ot.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(Ot.error=x.Deferred.getStackHook()),ge.setTimeout(Ot))}}return x.Deferred(function(ee){p[0][3].add(K(0,ee,Le(H)?H:Q,ee.notifyWith)),p[1][3].add(K(0,ee,Le(R)?R:Q)),p[2][3].add(K(0,ee,Le(O)?O:mr))}).promise()},promise:function(R){return R!=null?x.extend(R,v):v}},N={};return x.each(p,function(R,O){var H=O[2],S=O[5];v[O[1]]=H.add,S&&H.add(function(){C=S},p[3-R][2].disable,p[3-R][3].disable,p[0][2].lock,p[0][3].lock),H.add(O[3].fire),N[O[0]]=function(){return N[O[0]+"With"](this===N?void 0:this,arguments),this},N[O[0]+"With"]=H.fireWith}),v.promise(N),u&&u.call(N,N),N},when:function(u){var p=arguments.length,C=p,v=Array(C),N=at.call(arguments),R=x.Deferred(),O=function(H){return function(S){v[H]=this,N[H]=1<arguments.length?at.call(arguments):S,--p||R.resolveWith(v,N)}};if(p<=1&&(zo(u,R.done(O(C)).resolve,R.reject,!p),R.state()==="pending"||Le(N[C]&&N[C].then)))return R.then();for(;C--;)zo(N[C],O(C),R.reject);return R.promise()}});var Ve=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(u,p){ge.console&&ge.console.warn&&u&&Ve.test(u.name)&&ge.console.warn("jQuery.Deferred exception: "+u.message,u.stack,p)},x.readyException=function(u){ge.setTimeout(function(){throw u})};var Mr=x.Deferred();function gn(){Je.removeEventListener("DOMContentLoaded",gn),ge.removeEventListener("load",gn),x.ready()}x.fn.ready=function(u){return Mr.then(u).catch(function(p){x.readyException(p)}),this},x.extend({isReady:!1,readyWait:1,ready:function(u){(u===!0?--x.readyWait:x.isReady)||(x.isReady=!0)!==u&&0<--x.readyWait||Mr.resolveWith(Je,[x])}}),x.ready.then=Mr.then,Je.readyState==="complete"||Je.readyState!=="loading"&&!Je.documentElement.doScroll?ge.setTimeout(x.ready):(Je.addEventListener("DOMContentLoaded",gn),ge.addEventListener("load",gn));var Uo=function(u,p,C,v,N,R,O){var H=0,S=u.length,K=C==null;if(xt(C)==="object")for(H in N=!0,C)Uo(u,p,H,C[H],!0,R,O);else if(v!==void 0&&(N=!0,Le(v)||(O=!0),K&&(O?(p.call(u,v),p=null):(K=p,p=function(ee,ae,J){return K.call(x(ee),J)})),p))for(;H<S;H++)p(u[H],C,O?v:v.call(u[H],H,p(u[H],C)));return N?u:K?p.call(u):S?p(u[0],C):R},Qt=/^-ms-/,Rs=/-([a-z])/g;function ac(u,p){return p.toUpperCase()}function Jt(u){return u.replace(Qt,"ms-").replace(Rs,ac)}var to=function(u){return u.nodeType===1||u.nodeType===9||!+u.nodeType};function Go(){this.expando=x.expando+Go.uid++}Go.uid=1,Go.prototype={cache:function(u){var p=u[this.expando];return p||(p={},to(u)&&(u.nodeType?u[this.expando]=p:Object.defineProperty(u,this.expando,{value:p,configurable:!0}))),p},set:function(u,p,C){var v,N=this.cache(u);if(typeof p=="string")N[Jt(p)]=C;else for(v in p)N[Jt(v)]=p[v];return N},get:function(u,p){return p===void 0?this.cache(u):u[this.expando]&&u[this.expando][Jt(p)]},access:function(u,p,C){return p===void 0||p&&typeof p=="string"&&C===void 0?this.get(u,p):(this.set(u,p,C),C!==void 0?C:p)},remove:function(u,p){var C,v=u[this.expando];if(v!==void 0){if(p!==void 0)for(C=(p=Array.isArray(p)?p.map(Jt):(p=Jt(p))in v?[p]:p.match(ot)||[]).length;C--;)delete v[p[C]];(p===void 0||x.isEmptyObject(v))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var p=u[this.expando];return p!==void 0&&!x.isEmptyObject(p)}};var et=new Go,Tn=new Go,Ir=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Os=/[A-Z]/g;function yn(u,p,C){var v,N;if(C===void 0&&u.nodeType===1)if(v="data-"+p.replace(Os,"-$&").toLowerCase(),typeof(C=u.getAttribute(v))=="string"){try{C=(N=C)==="true"||N!=="false"&&(N==="null"?null:N===+N+""?+N:Ir.test(N)?JSON.parse(N):N)}catch{}Tn.set(u,p,C)}else C=void 0;return C}x.extend({hasData:function(u){return Tn.hasData(u)||et.hasData(u)},data:function(u,p,C){return Tn.access(u,p,C)},removeData:function(u,p){Tn.remove(u,p)},_data:function(u,p,C){return et.access(u,p,C)},_removeData:function(u,p){et.remove(u,p)}}),x.fn.extend({data:function(u,p){var C,v,N,R=this[0],O=R&&R.attributes;if(u===void 0){if(this.length&&(N=Tn.get(R),R.nodeType===1&&!et.get(R,"hasDataAttrs"))){for(C=O.length;C--;)O[C]&&(v=O[C].name).indexOf("data-")===0&&(v=Jt(v.slice(5)),yn(R,v,N[v]));et.set(R,"hasDataAttrs",!0)}return N}return typeof u=="object"?this.each(function(){Tn.set(this,u)}):Uo(this,function(H){var S;if(R&&H===void 0)return(S=Tn.get(R,u))!==void 0||(S=yn(R,u))!==void 0?S:void 0;this.each(function(){Tn.set(this,u,H)})},null,p,1<arguments.length,null,!0)},removeData:function(u){return this.each(function(){Tn.remove(this,u)})}}),x.extend({queue:function(u,p,C){var v;if(u)return p=(p||"fx")+"queue",v=et.get(u,p),C&&(!v||Array.isArray(C)?v=et.access(u,p,x.makeArray(C)):v.push(C)),v||[]},dequeue:function(u,p){p=p||"fx";var C=x.queue(u,p),v=C.length,N=C.shift(),R=x._queueHooks(u,p);N==="inprogress"&&(N=C.shift(),v--),N&&(p==="fx"&&C.unshift("inprogress"),delete R.stop,N.call(u,function(){x.dequeue(u,p)},R)),!v&&R&&R.empty.fire()},_queueHooks:function(u,p){var C=p+"queueHooks";return et.get(u,C)||et.access(u,C,{empty:x.Callbacks("once memory").add(function(){et.remove(u,[p+"queue",C])})})}}),x.fn.extend({queue:function(u,p){var C=2;return typeof u!="string"&&(p=u,u="fx",C--),arguments.length<C?x.queue(this[0],u):p===void 0?this:this.each(function(){var v=x.queue(this,u,p);x._queueHooks(this,u),u==="fx"&&v[0]!=="inprogress"&&x.dequeue(this,u)})},dequeue:function(u){return this.each(function(){x.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,p){var C,v=1,N=x.Deferred(),R=this,O=this.length,H=function(){--v||N.resolveWith(R,[R])};for(typeof u!="string"&&(p=u,u=void 0),u=u||"fx";O--;)(C=et.get(R[O],u+"queueHooks"))&&C.empty&&(v++,C.empty.add(H));return H(),N.promise(p)}});var Qo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,hn=new RegExp("^(?:([+-])=|)("+Qo+")([a-z%]*)$","i"),Qn=["Top","Right","Bottom","Left"],pr=Je.documentElement,sn=function(u){return x.contains(u.ownerDocument,u)},wu={composed:!0};pr.getRootNode&&(sn=function(u){return x.contains(u.ownerDocument,u)||u.getRootNode(wu)===u.ownerDocument});var yt=function(u,p){return(u=p||u).style.display==="none"||u.style.display===""&&sn(u)&&x.css(u,"display")==="none"};function Bs(u,p,C,v){var N,R,O=20,H=v?function(){return v.cur()}:function(){return x.css(u,p,"")},S=H(),K=C&&C[3]||(x.cssNumber[p]?"":"px"),ee=u.nodeType&&(x.cssNumber[p]||K!=="px"&&+S)&&hn.exec(x.css(u,p));if(ee&&ee[3]!==K){for(S/=2,K=K||ee[3],ee=+S||1;O--;)x.style(u,p,ee+K),(1-R)*(1-(R=H()/S||.5))<=0&&(O=0),ee/=R;ee*=2,x.style(u,p,ee+K),C=C||[]}return C&&(ee=+ee||+S||0,N=C[1]?ee+(C[1]+1)*C[2]:+C[2],v&&(v.unit=K,v.start=ee,v.end=N)),N}var ic={};function gr(u,p){for(var C,v,N,R,O,H,S,K=[],ee=0,ae=u.length;ee<ae;ee++)(v=u[ee]).style&&(C=v.style.display,p?(C==="none"&&(K[ee]=et.get(v,"display")||null,K[ee]||(v.style.display="")),v.style.display===""&&yt(v)&&(K[ee]=(S=O=R=void 0,O=(N=v).ownerDocument,H=N.nodeName,(S=ic[H])||(R=O.body.appendChild(O.createElement(H)),S=x.css(R,"display"),R.parentNode.removeChild(R),S==="none"&&(S="block"),ic[H]=S)))):C!=="none"&&(K[ee]="none",et.set(v,"display",C)));for(ee=0;ee<ae;ee++)K[ee]!=null&&(u[ee].style.display=K[ee]);return u}x.fn.extend({show:function(){return gr(this,!0)},hide:function(){return gr(this)},toggle:function(u){return typeof u=="boolean"?u?this.show():this.hide():this.each(function(){yt(this)?x(this).show():x(this).hide()})}});var hr,br,vr=/^(?:checkbox|radio)$/i,Aa=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Bt=/^$|^module$|\/(?:java|ecma)script/i;hr=Je.createDocumentFragment().appendChild(Je.createElement("div")),(br=Je.createElement("input")).setAttribute("type","radio"),br.setAttribute("checked","checked"),br.setAttribute("name","t"),hr.appendChild(br),Ke.checkClone=hr.cloneNode(!0).cloneNode(!0).lastChild.checked,hr.innerHTML="<textarea>x</textarea>",Ke.noCloneChecked=!!hr.cloneNode(!0).lastChild.defaultValue,hr.innerHTML="<option></option>",Ke.option=!!hr.lastChild;var Ie={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function an(u,p){var C;return C=typeof u.getElementsByTagName<"u"?u.getElementsByTagName(p||"*"):typeof u.querySelectorAll<"u"?u.querySelectorAll(p||"*"):[],p===void 0||p&&Se(u,p)?x.merge([u],C):C}function lo(u,p){for(var C=0,v=u.length;C<v;C++)et.set(u[C],"globalEval",!p||et.get(p[C],"globalEval"))}Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,Ke.option||(Ie.optgroup=Ie.option=[1,"<select multiple='multiple'>","</select>"]);var en=/<|&#?\w+;/;function Ni(u,p,C,v,N){for(var R,O,H,S,K,ee,ae=p.createDocumentFragment(),J=[],de=0,$e=u.length;de<$e;de++)if((R=u[de])||R===0)if(xt(R)==="object")x.merge(J,R.nodeType?[R]:R);else if(en.test(R)){for(O=O||ae.appendChild(p.createElement("div")),H=(Aa.exec(R)||["",""])[1].toLowerCase(),S=Ie[H]||Ie._default,O.innerHTML=S[1]+x.htmlPrefilter(R)+S[2],ee=S[0];ee--;)O=O.lastChild;x.merge(J,O.childNodes),(O=ae.firstChild).textContent=""}else J.push(p.createTextNode(R));for(ae.textContent="",de=0;R=J[de++];)if(v&&-1<x.inArray(R,v))N&&N.push(R);else if(K=sn(R),O=an(ae.appendChild(R),"script"),K&&lo(O),C)for(ee=0;R=O[ee++];)Bt.test(R.type||"")&&C.push(R);return ae}var Ai=/^([^.]*)(?:\.(.+)|)/;function ln(){return!0}function ns(){return!1}function Ta(u,p,C,v,N,R){var O,H;if(typeof p=="object"){for(H in typeof C!="string"&&(v=v||C,C=void 0),p)Ta(u,H,C,v,p[H],R);return u}if(v==null&&N==null?(N=C,v=C=void 0):N==null&&(typeof C=="string"?(N=v,v=void 0):(N=v,v=C,C=void 0)),N===!1)N=ns;else if(!N)return u;return R===1&&(O=N,(N=function(S){return x().off(S),O.apply(this,arguments)}).guid=O.guid||(O.guid=x.guid++)),u.each(function(){x.event.add(this,p,N,v,C)})}function Ds(u,p,C){C?(et.set(u,p,!1),x.event.add(u,p,{namespace:!1,handler:function(v){var N,R=et.get(this,p);if(1&v.isTrigger&&this[p]){if(R)(x.event.special[p]||{}).delegateType&&v.stopPropagation();else if(R=at.call(arguments),et.set(this,p,R),this[p](),N=et.get(this,p),et.set(this,p,!1),R!==N)return v.stopImmediatePropagation(),v.preventDefault(),N}else R&&(et.set(this,p,x.event.trigger(R[0],R.slice(1),this)),v.stopPropagation(),v.isImmediatePropagationStopped=ln)}})):et.get(u,p)===void 0&&x.event.add(u,p,ln)}x.event={global:{},add:function(u,p,C,v,N){var R,O,H,S,K,ee,ae,J,de,$e,ct,_e=et.get(u);if(to(u))for(C.handler&&(C=(R=C).handler,N=R.selector),N&&x.find.matchesSelector(pr,N),C.guid||(C.guid=x.guid++),(S=_e.events)||(S=_e.events=Object.create(null)),(O=_e.handle)||(O=_e.handle=function(Ot){return typeof x<"u"&&x.event.triggered!==Ot.type?x.event.dispatch.apply(u,arguments):void 0}),K=(p=(p||"").match(ot)||[""]).length;K--;)de=ct=(H=Ai.exec(p[K])||[])[1],$e=(H[2]||"").split(".").sort(),de&&(ae=x.event.special[de]||{},de=(N?ae.delegateType:ae.bindType)||de,ae=x.event.special[de]||{},ee=x.extend({type:de,origType:ct,data:v,handler:C,guid:C.guid,selector:N,needsContext:N&&x.expr.match.needsContext.test(N),namespace:$e.join(".")},R),(J=S[de])||((J=S[de]=[]).delegateCount=0,ae.setup&&ae.setup.call(u,v,$e,O)!==!1||u.addEventListener&&u.addEventListener(de,O)),ae.add&&(ae.add.call(u,ee),ee.handler.guid||(ee.handler.guid=C.guid)),N?J.splice(J.delegateCount++,0,ee):J.push(ee),x.event.global[de]=!0)},remove:function(u,p,C,v,N){var R,O,H,S,K,ee,ae,J,de,$e,ct,_e=et.hasData(u)&&et.get(u);if(_e&&(S=_e.events)){for(K=(p=(p||"").match(ot)||[""]).length;K--;)if(de=ct=(H=Ai.exec(p[K])||[])[1],$e=(H[2]||"").split(".").sort(),de){for(ae=x.event.special[de]||{},J=S[de=(v?ae.delegateType:ae.bindType)||de]||[],H=H[2]&&new RegExp("(^|\\.)"+$e.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=R=J.length;R--;)ee=J[R],!N&&ct!==ee.origType||C&&C.guid!==ee.guid||H&&!H.test(ee.namespace)||v&&v!==ee.selector&&(v!=="**"||!ee.selector)||(J.splice(R,1),ee.selector&&J.delegateCount--,ae.remove&&ae.remove.call(u,ee));O&&!J.length&&(ae.teardown&&ae.teardown.call(u,$e,_e.handle)!==!1||x.removeEvent(u,de,_e.handle),delete S[de])}else for(de in S)x.event.remove(u,de+p[K],C,v,!0);x.isEmptyObject(S)&&et.remove(u,"handle events")}},dispatch:function(u){var p,C,v,N,R,O,H=new Array(arguments.length),S=x.event.fix(u),K=(et.get(this,"events")||Object.create(null))[S.type]||[],ee=x.event.special[S.type]||{};for(H[0]=S,p=1;p<arguments.length;p++)H[p]=arguments[p];if(S.delegateTarget=this,!ee.preDispatch||ee.preDispatch.call(this,S)!==!1){for(O=x.event.handlers.call(this,S,K),p=0;(N=O[p++])&&!S.isPropagationStopped();)for(S.currentTarget=N.elem,C=0;(R=N.handlers[C++])&&!S.isImmediatePropagationStopped();)S.rnamespace&&R.namespace!==!1&&!S.rnamespace.test(R.namespace)||(S.handleObj=R,S.data=R.data,(v=((x.event.special[R.origType]||{}).handle||R.handler).apply(N.elem,H))!==void 0&&(S.result=v)===!1&&(S.preventDefault(),S.stopPropagation()));return ee.postDispatch&&ee.postDispatch.call(this,S),S.result}},handlers:function(u,p){var C,v,N,R,O,H=[],S=p.delegateCount,K=u.target;if(S&&K.nodeType&&!(u.type==="click"&&1<=u.button)){for(;K!==this;K=K.parentNode||this)if(K.nodeType===1&&(u.type!=="click"||K.disabled!==!0)){for(R=[],O={},C=0;C<S;C++)O[N=(v=p[C]).selector+" "]===void 0&&(O[N]=v.needsContext?-1<x(N,this).index(K):x.find(N,this,null,[K]).length),O[N]&&R.push(v);R.length&&H.push({elem:K,handlers:R})}}return K=this,S<p.length&&H.push({elem:K,handlers:p.slice(S)}),H},addProp:function(u,p){Object.defineProperty(x.Event.prototype,u,{enumerable:!0,configurable:!0,get:Le(p)?function(){if(this.originalEvent)return p(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(C){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:C})}})},fix:function(u){return u[x.expando]?u:new x.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var p=this||u;return vr.test(p.type)&&p.click&&Se(p,"input")&&Ds(p,"click",!0),!1},trigger:function(u){var p=this||u;return vr.test(p.type)&&p.click&&Se(p,"input")&&Ds(p,"click"),!0},_default:function(u){var p=u.target;return vr.test(p.type)&&p.click&&Se(p,"input")&&et.get(p,"click")||Se(p,"a")}},beforeunload:{postDispatch:function(u){u.result!==void 0&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}},x.removeEvent=function(u,p,C){u.removeEventListener&&u.removeEventListener(p,C)},x.Event=function(u,p){if(!(this instanceof x.Event))return new x.Event(u,p);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||u.defaultPrevented===void 0&&u.returnValue===!1?ln:ns,this.target=u.target&&u.target.nodeType===3?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,p&&x.extend(this,p),this.timeStamp=u&&u.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:ns,isPropagationStopped:ns,isImmediatePropagationStopped:ns,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=ln,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=ln,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=ln,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(u,p){function C(v){if(Je.documentMode){var N=et.get(this,"handle"),R=x.event.fix(v);R.type=v.type==="focusin"?"focus":"blur",R.isSimulated=!0,N(v),R.target===R.currentTarget&&N(R)}else x.event.simulate(p,v.target,x.event.fix(v))}x.event.special[u]={setup:function(){var v;if(Ds(this,u,!0),!Je.documentMode)return!1;(v=et.get(this,p))||this.addEventListener(p,C),et.set(this,p,(v||0)+1)},trigger:function(){return Ds(this,u),!0},teardown:function(){var v;if(!Je.documentMode)return!1;(v=et.get(this,p)-1)?et.set(this,p,v):(this.removeEventListener(p,C),et.remove(this,p))},_default:function(v){return et.get(v.target,u)},delegateType:p},x.event.special[p]={setup:function(){var v=this.ownerDocument||this.document||this,N=Je.documentMode?this:v,R=et.get(N,p);R||(Je.documentMode?this.addEventListener(p,C):v.addEventListener(u,C,!0)),et.set(N,p,(R||0)+1)},teardown:function(){var v=this.ownerDocument||this.document||this,N=Je.documentMode?this:v,R=et.get(N,p)-1;R?et.set(N,p,R):(Je.documentMode?this.removeEventListener(p,C):v.removeEventListener(u,C,!0),et.remove(N,p))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,p){x.event.special[u]={delegateType:p,bindType:p,handle:function(C){var v,N=C.relatedTarget,R=C.handleObj;return N&&(N===this||x.contains(this,N))||(C.type=R.origType,v=R.handler.apply(this,arguments),C.type=p),v}}}),x.fn.extend({on:function(u,p,C,v){return Ta(this,u,p,C,v)},one:function(u,p,C,v){return Ta(this,u,p,C,v,1)},off:function(u,p,C){var v,N;if(u&&u.preventDefault&&u.handleObj)return v=u.handleObj,x(u.delegateTarget).off(v.namespace?v.origType+"."+v.namespace:v.origType,v.selector,v.handler),this;if(typeof u=="object"){for(N in u)this.off(N,p,u[N]);return this}return p!==!1&&typeof p!="function"||(C=p,p=void 0),C===!1&&(C=ns),this.each(function(){x.event.remove(this,u,C,p)})}});var Ps=/<script|<style|<link/i,lc=/checked\s*(?:[^=]|=\s*.checked.)/i,Ti=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function cc(u,p){return Se(u,"table")&&Se(p.nodeType!==11?p:p.firstChild,"tr")&&x(u).children("tbody")[0]||u}function os(u){return u.type=(u.getAttribute("type")!==null)+"/"+u.type,u}function dc(u){return(u.type||"").slice(0,5)==="true/"?u.type=u.type.slice(5):u.removeAttribute("type"),u}function nn(u,p){var C,v,N,R,O,H;if(p.nodeType===1){if(et.hasData(u)&&(H=et.get(u).events))for(N in et.remove(p,"handle events"),H)for(C=0,v=H[N].length;C<v;C++)x.event.add(p,N,H[N][C]);Tn.hasData(u)&&(R=Tn.access(u),O=x.extend({},R),Tn.set(p,O))}}function Co(u,p,C,v){p=Yt(p);var N,R,O,H,S,K,ee=0,ae=u.length,J=ae-1,de=p[0],$e=Le(de);if($e||1<ae&&typeof de=="string"&&!Ke.checkClone&&lc.test(de))return u.each(function(ct){var _e=u.eq(ct);$e&&(p[0]=de.call(this,ct,_e.html())),Co(_e,p,C,v)});if(ae&&(R=(N=Ni(p,u[0].ownerDocument,!1,u,v)).firstChild,N.childNodes.length===1&&(N=R),R||v)){for(H=(O=x.map(an(N,"script"),os)).length;ee<ae;ee++)S=N,ee!==J&&(S=x.clone(S,!0,!0),H&&x.merge(O,an(S,"script"))),C.call(u[ee],S,ee);if(H)for(K=O[O.length-1].ownerDocument,x.map(O,dc),ee=0;ee<H;ee++)S=O[ee],Bt.test(S.type||"")&&!et.access(S,"globalEval")&&x.contains(K,S)&&(S.src&&(S.type||"").toLowerCase()!=="module"?x._evalUrl&&!S.noModule&&x._evalUrl(S.src,{nonce:S.nonce||S.getAttribute("nonce")},K):It(S.textContent.replace(Ti,""),S,K))}return u}function Ri(u,p,C){for(var v,N=p?x.filter(p,u):u,R=0;(v=N[R])!=null;R++)C||v.nodeType!==1||x.cleanData(an(v)),v.parentNode&&(C&&sn(v)&&lo(an(v,"script")),v.parentNode.removeChild(v));return u}x.extend({htmlPrefilter:function(u){return u},clone:function(u,p,C){var v,N,R,O,H,S,K,ee=u.cloneNode(!0),ae=sn(u);if(!(Ke.noCloneChecked||u.nodeType!==1&&u.nodeType!==11||x.isXMLDoc(u)))for(O=an(ee),v=0,N=(R=an(u)).length;v<N;v++)H=R[v],S=O[v],(K=S.nodeName.toLowerCase())==="input"&&vr.test(H.type)?S.checked=H.checked:K!=="input"&&K!=="textarea"||(S.defaultValue=H.defaultValue);if(p)if(C)for(R=R||an(u),O=O||an(ee),v=0,N=R.length;v<N;v++)nn(R[v],O[v]);else nn(u,ee);return 0<(O=an(ee,"script")).length&&lo(O,!ae&&an(u,"script")),ee},cleanData:function(u){for(var p,C,v,N=x.event.special,R=0;(C=u[R])!==void 0;R++)if(to(C)){if(p=C[et.expando]){if(p.events)for(v in p.events)N[v]?x.event.remove(C,v):x.removeEvent(C,v,p.handle);C[et.expando]=void 0}C[Tn.expando]&&(C[Tn.expando]=void 0)}}}),x.fn.extend({detach:function(u){return Ri(this,u,!0)},remove:function(u){return Ri(this,u)},text:function(u){return Uo(this,function(p){return p===void 0?x.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=p)})},null,u,arguments.length)},append:function(){return Co(this,arguments,function(u){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||cc(this,u).appendChild(u)})},prepend:function(){return Co(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var p=cc(this,u);p.insertBefore(u,p.firstChild)}})},before:function(){return Co(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return Co(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,p=0;(u=this[p])!=null;p++)u.nodeType===1&&(x.cleanData(an(u,!1)),u.textContent="");return this},clone:function(u,p){return u=u!=null&&u,p=p??u,this.map(function(){return x.clone(this,u,p)})},html:function(u){return Uo(this,function(p){var C=this[0]||{},v=0,N=this.length;if(p===void 0&&C.nodeType===1)return C.innerHTML;if(typeof p=="string"&&!Ps.test(p)&&!Ie[(Aa.exec(p)||["",""])[1].toLowerCase()]){p=x.htmlPrefilter(p);try{for(;v<N;v++)(C=this[v]||{}).nodeType===1&&(x.cleanData(an(C,!1)),C.innerHTML=p);C=0}catch{}}C&&this.empty().append(p)},null,u,arguments.length)},replaceWith:function(){var u=[];return Co(this,arguments,function(p){var C=this.parentNode;x.inArray(this,u)<0&&(x.cleanData(an(this)),C&&C.replaceChild(p,this))},u)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,p){x.fn[u]=function(C){for(var v,N=[],R=x(C),O=R.length-1,H=0;H<=O;H++)v=H===O?this:this.clone(!0),x(R[H])[p](v),kn.apply(N,v.get());return this.pushStack(N)}});var Oi=new RegExp("^("+Qo+")(?!px)[a-z%]+$","i"),wo=/^--/,Ls=function(u){var p=u.ownerDocument.defaultView;return p&&p.opener||(p=ge),p.getComputedStyle(u)},Bi=function(u,p,C){var v,N,R={};for(N in p)R[N]=u.style[N],u.style[N]=p[N];for(N in v=C.call(u),p)u.style[N]=R[N];return v},bn=new RegExp(Qn.join("|"),"i");function $t(u,p,C){var v,N,R,O,H=wo.test(p),S=u.style;return(C=C||Ls(u))&&(O=C.getPropertyValue(p)||C[p],H&&O&&(O=O.replace(Yo,"$1")||void 0),O!==""||sn(u)||(O=x.style(u,p)),!Ke.pixelBoxStyles()&&Oi.test(O)&&bn.test(p)&&(v=S.width,N=S.minWidth,R=S.maxWidth,S.minWidth=S.maxWidth=S.width=O,O=C.width,S.width=v,S.minWidth=N,S.maxWidth=R)),O!==void 0?O+"":O}function Ra(u,p){return{get:function(){if(!u())return(this.get=p).apply(this,arguments);delete this.get}}}(function(){function u(){if(K){S.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pr.appendChild(S).appendChild(K);var ee=ge.getComputedStyle(K);C=ee.top!=="1%",H=p(ee.marginLeft)===12,K.style.right="60%",R=p(ee.right)===36,v=p(ee.width)===36,K.style.position="absolute",N=p(K.offsetWidth/3)===12,pr.removeChild(S),K=null}}function p(ee){return Math.round(parseFloat(ee))}var C,v,N,R,O,H,S=Je.createElement("div"),K=Je.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",Ke.clearCloneStyle=K.style.backgroundClip==="content-box",x.extend(Ke,{boxSizingReliable:function(){return u(),v},pixelBoxStyles:function(){return u(),R},pixelPosition:function(){return u(),C},reliableMarginLeft:function(){return u(),H},scrollboxSize:function(){return u(),N},reliableTrDimensions:function(){var ee,ae,J,de;return O==null&&(ee=Je.createElement("table"),ae=Je.createElement("tr"),J=Je.createElement("div"),ee.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ae.style.cssText="box-sizing:content-box;border:1px solid",ae.style.height="1px",J.style.height="9px",J.style.display="block",pr.appendChild(ee).appendChild(ae).appendChild(J),de=ge.getComputedStyle(ae),O=parseInt(de.height,10)+parseInt(de.borderTopWidth,10)+parseInt(de.borderBottomWidth,10)===ae.offsetHeight,pr.removeChild(ee)),O}}))})();var Oa=["Webkit","Moz","ms"],Fr=Je.createElement("div").style,uc={};function Ba(u){var p=x.cssProps[u]||uc[u];return p||(u in Fr?u:uc[u]=function(C){for(var v=C[0].toUpperCase()+C.slice(1),N=Oa.length;N--;)if((C=Oa[N]+v)in Fr)return C}(u)||u)}var Ho=/^(none|table(?!-c[ea]).+)/,Ms={position:"absolute",visibility:"hidden",display:"block"},Is={letterSpacing:"0",fontWeight:"400"};function Fs(u,p,C){var v=hn.exec(p);return v?Math.max(0,v[2]-(C||0))+(v[3]||"px"):p}function js(u,p,C,v,N,R){var O=p==="width"?1:0,H=0,S=0,K=0;if(C===(v?"border":"content"))return 0;for(;O<4;O+=2)C==="margin"&&(K+=x.css(u,C+Qn[O],!0,N)),v?(C==="content"&&(S-=x.css(u,"padding"+Qn[O],!0,N)),C!=="margin"&&(S-=x.css(u,"border"+Qn[O]+"Width",!0,N))):(S+=x.css(u,"padding"+Qn[O],!0,N),C!=="padding"?S+=x.css(u,"border"+Qn[O]+"Width",!0,N):H+=x.css(u,"border"+Qn[O]+"Width",!0,N));return!v&&0<=R&&(S+=Math.max(0,Math.ceil(u["offset"+p[0].toUpperCase()+p.slice(1)]-R-S-H-.5))||0),S+K}function xo(u,p,C){var v=Ls(u),N=(!Ke.boxSizingReliable()||C)&&x.css(u,"boxSizing",!1,v)==="border-box",R=N,O=$t(u,p,v),H="offset"+p[0].toUpperCase()+p.slice(1);if(Oi.test(O)){if(!C)return O;O="auto"}return(!Ke.boxSizingReliable()&&N||!Ke.reliableTrDimensions()&&Se(u,"tr")||O==="auto"||!parseFloat(O)&&x.css(u,"display",!1,v)==="inline")&&u.getClientRects().length&&(N=x.css(u,"boxSizing",!1,v)==="border-box",(R=H in u)&&(O=u[H])),(O=parseFloat(O)||0)+js(u,p,C||(N?"border":"content"),R,v,O)+"px"}function zn(u,p,C,v,N){return new zn.prototype.init(u,p,C,v,N)}x.extend({cssHooks:{opacity:{get:function(u,p){if(p){var C=$t(u,"opacity");return C===""?"1":C}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(u,p,C,v){if(u&&u.nodeType!==3&&u.nodeType!==8&&u.style){var N,R,O,H=Jt(p),S=wo.test(p),K=u.style;if(S||(p=Ba(H)),O=x.cssHooks[p]||x.cssHooks[H],C===void 0)return O&&"get"in O&&(N=O.get(u,!1,v))!==void 0?N:K[p];(R=typeof C)=="string"&&(N=hn.exec(C))&&N[1]&&(C=Bs(u,p,N),R="number"),C!=null&&C==C&&(R!=="number"||S||(C+=N&&N[3]||(x.cssNumber[H]?"":"px")),Ke.clearCloneStyle||C!==""||p.indexOf("background")!==0||(K[p]="inherit"),O&&"set"in O&&(C=O.set(u,C,v))===void 0||(S?K.setProperty(p,C):K[p]=C))}},css:function(u,p,C,v){var N,R,O,H=Jt(p);return wo.test(p)||(p=Ba(H)),(O=x.cssHooks[p]||x.cssHooks[H])&&"get"in O&&(N=O.get(u,!0,C)),N===void 0&&(N=$t(u,p,v)),N==="normal"&&p in Is&&(N=Is[p]),C===""||C?(R=parseFloat(N),C===!0||isFinite(R)?R||0:N):N}}),x.each(["height","width"],function(u,p){x.cssHooks[p]={get:function(C,v,N){if(v)return!Ho.test(x.css(C,"display"))||C.getClientRects().length&&C.getBoundingClientRect().width?xo(C,p,N):Bi(C,Ms,function(){return xo(C,p,N)})},set:function(C,v,N){var R,O=Ls(C),H=!Ke.scrollboxSize()&&O.position==="absolute",S=(H||N)&&x.css(C,"boxSizing",!1,O)==="border-box",K=N?js(C,p,N,S,O):0;return S&&H&&(K-=Math.ceil(C["offset"+p[0].toUpperCase()+p.slice(1)]-parseFloat(O[p])-js(C,p,"border",!1,O)-.5)),K&&(R=hn.exec(v))&&(R[3]||"px")!=="px"&&(C.style[p]=v,v=x.css(C,p)),Fs(0,v,K)}}}),x.cssHooks.marginLeft=Ra(Ke.reliableMarginLeft,function(u,p){if(p)return(parseFloat($t(u,"marginLeft"))||u.getBoundingClientRect().left-Bi(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(u,p){x.cssHooks[u+p]={expand:function(C){for(var v=0,N={},R=typeof C=="string"?C.split(" "):[C];v<4;v++)N[u+Qn[v]+p]=R[v]||R[v-2]||R[0];return N}},u!=="margin"&&(x.cssHooks[u+p].set=Fs)}),x.fn.extend({css:function(u,p){return Uo(this,function(C,v,N){var R,O,H={},S=0;if(Array.isArray(v)){for(R=Ls(C),O=v.length;S<O;S++)H[v[S]]=x.css(C,v[S],!1,R);return H}return N!==void 0?x.style(C,v,N):x.css(C,v)},u,p,1<arguments.length)}}),((x.Tween=zn).prototype={constructor:zn,init:function(u,p,C,v,N,R){this.elem=u,this.prop=C,this.easing=N||x.easing._default,this.options=p,this.start=this.now=this.cur(),this.end=v,this.unit=R||(x.cssNumber[C]?"":"px")},cur:function(){var u=zn.propHooks[this.prop];return u&&u.get?u.get(this):zn.propHooks._default.get(this)},run:function(u){var p,C=zn.propHooks[this.prop];return this.options.duration?this.pos=p=x.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):this.pos=p=u,this.now=(this.end-this.start)*p+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),C&&C.set?C.set(this):zn.propHooks._default.set(this),this}}).init.prototype=zn.prototype,(zn.propHooks={_default:{get:function(u){var p;return u.elem.nodeType!==1||u.elem[u.prop]!=null&&u.elem.style[u.prop]==null?u.elem[u.prop]:(p=x.css(u.elem,u.prop,""))&&p!=="auto"?p:0},set:function(u){x.fx.step[u.prop]?x.fx.step[u.prop](u):u.elem.nodeType!==1||!x.cssHooks[u.prop]&&u.elem.style[Ba(u.prop)]==null?u.elem[u.prop]=u.now:x.style(u.elem,u.prop,u.now+u.unit)}}}).scrollTop=zn.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},x.easing={linear:function(u){return u},swing:function(u){return .5-Math.cos(u*Math.PI)/2},_default:"swing"},x.fx=zn.prototype.init,x.fx.step={};var zt,rs,jr,Di,Pi=/^(?:toggle|show|hide)$/,Da=/queueHooks$/;function zs(){rs&&(Je.hidden===!1&&ge.requestAnimationFrame?ge.requestAnimationFrame(zs):ge.setTimeout(zs,x.fx.interval),x.fx.tick())}function ss(){return ge.setTimeout(function(){zt=void 0}),zt=Date.now()}function zr(u,p){var C,v=0,N={height:u};for(p=p?1:0;v<4;v+=2-p)N["margin"+(C=Qn[v])]=N["padding"+C]=u;return p&&(N.opacity=N.width=u),N}function Li(u,p,C){for(var v,N=(Cn.tweeners[p]||[]).concat(Cn.tweeners["*"]),R=0,O=N.length;R<O;R++)if(v=N[R].call(C,p,u))return v}function Cn(u,p,C){var v,N,R=0,O=Cn.prefilters.length,H=x.Deferred().always(function(){delete S.elem}),S=function(){if(N)return!1;for(var ae=zt||ss(),J=Math.max(0,K.startTime+K.duration-ae),de=1-(J/K.duration||0),$e=0,ct=K.tweens.length;$e<ct;$e++)K.tweens[$e].run(de);return H.notifyWith(u,[K,de,J]),de<1&&ct?J:(ct||H.notifyWith(u,[K,1,0]),H.resolveWith(u,[K]),!1)},K=H.promise({elem:u,props:x.extend({},p),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},C),originalProperties:p,originalOptions:C,startTime:zt||ss(),duration:C.duration,tweens:[],createTween:function(ae,J){var de=x.Tween(u,K.opts,ae,J,K.opts.specialEasing[ae]||K.opts.easing);return K.tweens.push(de),de},stop:function(ae){var J=0,de=ae?K.tweens.length:0;if(N)return this;for(N=!0;J<de;J++)K.tweens[J].run(1);return ae?(H.notifyWith(u,[K,1,0]),H.resolveWith(u,[K,ae])):H.rejectWith(u,[K,ae]),this}}),ee=K.props;for(!function(ae,J){var de,$e,ct,_e,Ot;for(de in ae)if(ct=J[$e=Jt(de)],_e=ae[de],Array.isArray(_e)&&(ct=_e[1],_e=ae[de]=_e[0]),de!==$e&&(ae[$e]=_e,delete ae[de]),(Ot=x.cssHooks[$e])&&"expand"in Ot)for(de in _e=Ot.expand(_e),delete ae[$e],_e)de in ae||(ae[de]=_e[de],J[de]=ct);else J[$e]=ct}(ee,K.opts.specialEasing);R<O;R++)if(v=Cn.prefilters[R].call(K,u,ee,K.opts))return Le(v.stop)&&(x._queueHooks(K.elem,K.opts.queue).stop=v.stop.bind(v)),v;return x.map(ee,Li,K),Le(K.opts.start)&&K.opts.start.call(u,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),x.fx.timer(x.extend(S,{elem:u,anim:K,queue:K.opts.queue})),K}x.Animation=x.extend(Cn,{tweeners:{"*":[function(u,p){var C=this.createTween(u,p);return Bs(C.elem,u,hn.exec(p),C),C}]},tweener:function(u,p){Le(u)?(p=u,u=["*"]):u=u.match(ot);for(var C,v=0,N=u.length;v<N;v++)C=u[v],Cn.tweeners[C]=Cn.tweeners[C]||[],Cn.tweeners[C].unshift(p)},prefilters:[function(u,p,C){var v,N,R,O,H,S,K,ee,ae="width"in p||"height"in p,J=this,de={},$e=u.style,ct=u.nodeType&&yt(u),_e=et.get(u,"fxshow");for(v in C.queue||((O=x._queueHooks(u,"fx")).unqueued==null&&(O.unqueued=0,H=O.empty.fire,O.empty.fire=function(){O.unqueued||H()}),O.unqueued++,J.always(function(){J.always(function(){O.unqueued--,x.queue(u,"fx").length||O.empty.fire()})})),p)if(N=p[v],Pi.test(N)){if(delete p[v],R=R||N==="toggle",N===(ct?"hide":"show")){if(N!=="show"||!_e||_e[v]===void 0)continue;ct=!0}de[v]=_e&&_e[v]||x.style(u,v)}if((S=!x.isEmptyObject(p))||!x.isEmptyObject(de))for(v in ae&&u.nodeType===1&&(C.overflow=[$e.overflow,$e.overflowX,$e.overflowY],(K=_e&&_e.display)==null&&(K=et.get(u,"display")),(ee=x.css(u,"display"))==="none"&&(K?ee=K:(gr([u],!0),K=u.style.display||K,ee=x.css(u,"display"),gr([u]))),(ee==="inline"||ee==="inline-block"&&K!=null)&&x.css(u,"float")==="none"&&(S||(J.done(function(){$e.display=K}),K==null&&(ee=$e.display,K=ee==="none"?"":ee)),$e.display="inline-block")),C.overflow&&($e.overflow="hidden",J.always(function(){$e.overflow=C.overflow[0],$e.overflowX=C.overflow[1],$e.overflowY=C.overflow[2]})),S=!1,de)S||(_e?"hidden"in _e&&(ct=_e.hidden):_e=et.access(u,"fxshow",{display:K}),R&&(_e.hidden=!ct),ct&&gr([u],!0),J.done(function(){for(v in ct||gr([u]),et.remove(u,"fxshow"),de)x.style(u,v,de[v])})),S=Li(ct?_e[v]:0,v,J),v in _e||(_e[v]=S.start,ct&&(S.end=S.start,S.start=0))}],prefilter:function(u,p){p?Cn.prefilters.unshift(u):Cn.prefilters.push(u)}}),x.speed=function(u,p,C){var v=u&&typeof u=="object"?x.extend({},u):{complete:C||!C&&p||Le(u)&&u,duration:u,easing:C&&p||p&&!Le(p)&&p};return x.fx.off?v.duration=0:typeof v.duration!="number"&&(v.duration in x.fx.speeds?v.duration=x.fx.speeds[v.duration]:v.duration=x.fx.speeds._default),v.queue!=null&&v.queue!==!0||(v.queue="fx"),v.old=v.complete,v.complete=function(){Le(v.old)&&v.old.call(this),v.queue&&x.dequeue(this,v.queue)},v},x.fn.extend({fadeTo:function(u,p,C,v){return this.filter(yt).css("opacity",0).show().end().animate({opacity:p},u,C,v)},animate:function(u,p,C,v){var N=x.isEmptyObject(u),R=x.speed(p,C,v),O=function(){var H=Cn(this,x.extend({},u),R);(N||et.get(this,"finish"))&&H.stop(!0)};return O.finish=O,N||R.queue===!1?this.each(O):this.queue(R.queue,O)},stop:function(u,p,C){var v=function(N){var R=N.stop;delete N.stop,R(C)};return typeof u!="string"&&(C=p,p=u,u=void 0),p&&this.queue(u||"fx",[]),this.each(function(){var N=!0,R=u!=null&&u+"queueHooks",O=x.timers,H=et.get(this);if(R)H[R]&&H[R].stop&&v(H[R]);else for(R in H)H[R]&&H[R].stop&&Da.test(R)&&v(H[R]);for(R=O.length;R--;)O[R].elem!==this||u!=null&&O[R].queue!==u||(O[R].anim.stop(C),N=!1,O.splice(R,1));!N&&C||x.dequeue(this,u)})},finish:function(u){return u!==!1&&(u=u||"fx"),this.each(function(){var p,C=et.get(this),v=C[u+"queue"],N=C[u+"queueHooks"],R=x.timers,O=v?v.length:0;for(C.finish=!0,x.queue(this,u,[]),N&&N.stop&&N.stop.call(this,!0),p=R.length;p--;)R[p].elem===this&&R[p].queue===u&&(R[p].anim.stop(!0),R.splice(p,1));for(p=0;p<O;p++)v[p]&&v[p].finish&&v[p].finish.call(this);delete C.finish})}}),x.each(["toggle","show","hide"],function(u,p){var C=x.fn[p];x.fn[p]=function(v,N,R){return v==null||typeof v=="boolean"?C.apply(this,arguments):this.animate(zr(p,!0),v,N,R)}}),x.each({slideDown:zr("show"),slideUp:zr("hide"),slideToggle:zr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,p){x.fn[u]=function(C,v,N){return this.animate(p,C,v,N)}}),x.timers=[],x.fx.tick=function(){var u,p=0,C=x.timers;for(zt=Date.now();p<C.length;p++)(u=C[p])()||C[p]!==u||C.splice(p--,1);C.length||x.fx.stop(),zt=void 0},x.fx.timer=function(u){x.timers.push(u),x.fx.start()},x.fx.interval=13,x.fx.start=function(){rs||(rs=!0,zs())},x.fx.stop=function(){rs=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(u,p){return u=x.fx&&x.fx.speeds[u]||u,p=p||"fx",this.queue(p,function(C,v){var N=ge.setTimeout(C,u);v.stop=function(){ge.clearTimeout(N)}})},jr=Je.createElement("input"),Di=Je.createElement("select").appendChild(Je.createElement("option")),jr.type="checkbox",Ke.checkOn=jr.value!=="",Ke.optSelected=Di.selected,(jr=Je.createElement("input")).value="t",jr.type="radio",Ke.radioValue=jr.value==="t";var Mi,Ur=x.expr.attrHandle;x.fn.extend({attr:function(u,p){return Uo(this,x.attr,u,p,1<arguments.length)},removeAttr:function(u){return this.each(function(){x.removeAttr(this,u)})}}),x.extend({attr:function(u,p,C){var v,N,R=u.nodeType;if(R!==3&&R!==8&&R!==2)return typeof u.getAttribute>"u"?x.prop(u,p,C):(R===1&&x.isXMLDoc(u)||(N=x.attrHooks[p.toLowerCase()]||(x.expr.match.bool.test(p)?Mi:void 0)),C!==void 0?C===null?void x.removeAttr(u,p):N&&"set"in N&&(v=N.set(u,C,p))!==void 0?v:(u.setAttribute(p,C+""),C):N&&"get"in N&&(v=N.get(u,p))!==null?v:(v=x.find.attr(u,p))==null?void 0:v)},attrHooks:{type:{set:function(u,p){if(!Ke.radioValue&&p==="radio"&&Se(u,"input")){var C=u.value;return u.setAttribute("type",p),C&&(u.value=C),p}}}},removeAttr:function(u,p){var C,v=0,N=p&&p.match(ot);if(N&&u.nodeType===1)for(;C=N[v++];)u.removeAttribute(C)}}),Mi={set:function(u,p,C){return p===!1?x.removeAttr(u,C):u.setAttribute(C,C),C}},x.each(x.expr.match.bool.source.match(/\w+/g),function(u,p){var C=Ur[p]||x.find.attr;Ur[p]=function(v,N,R){var O,H,S=N.toLowerCase();return R||(H=Ur[S],Ur[S]=O,O=C(v,N,R)!=null?S:null,Ur[S]=H),O}});var Us=/^(?:input|select|textarea|button)$/i,fc=/^(?:a|area)$/i;function Jo(u){return(u.match(ot)||[]).join(" ")}function Un(u){return u.getAttribute&&u.getAttribute("class")||""}function Ii(u){return Array.isArray(u)?u:typeof u=="string"&&u.match(ot)||[]}x.fn.extend({prop:function(u,p){return Uo(this,x.prop,u,p,1<arguments.length)},removeProp:function(u){return this.each(function(){delete this[x.propFix[u]||u]})}}),x.extend({prop:function(u,p,C){var v,N,R=u.nodeType;if(R!==3&&R!==8&&R!==2)return R===1&&x.isXMLDoc(u)||(p=x.propFix[p]||p,N=x.propHooks[p]),C!==void 0?N&&"set"in N&&(v=N.set(u,C,p))!==void 0?v:u[p]=C:N&&"get"in N&&(v=N.get(u,p))!==null?v:u[p]},propHooks:{tabIndex:{get:function(u){var p=x.find.attr(u,"tabindex");return p?parseInt(p,10):Us.test(u.nodeName)||fc.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Ke.optSelected||(x.propHooks.selected={get:function(u){var p=u.parentNode;return p&&p.parentNode&&p.parentNode.selectedIndex,null},set:function(u){var p=u.parentNode;p&&(p.selectedIndex,p.parentNode&&p.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(u){var p,C,v,N,R,O;return Le(u)?this.each(function(H){x(this).addClass(u.call(this,H,Un(this)))}):(p=Ii(u)).length?this.each(function(){if(v=Un(this),C=this.nodeType===1&&" "+Jo(v)+" "){for(R=0;R<p.length;R++)N=p[R],C.indexOf(" "+N+" ")<0&&(C+=N+" ");O=Jo(C),v!==O&&this.setAttribute("class",O)}}):this},removeClass:function(u){var p,C,v,N,R,O;return Le(u)?this.each(function(H){x(this).removeClass(u.call(this,H,Un(this)))}):arguments.length?(p=Ii(u)).length?this.each(function(){if(v=Un(this),C=this.nodeType===1&&" "+Jo(v)+" "){for(R=0;R<p.length;R++)for(N=p[R];-1<C.indexOf(" "+N+" ");)C=C.replace(" "+N+" "," ");O=Jo(C),v!==O&&this.setAttribute("class",O)}}):this:this.attr("class","")},toggleClass:function(u,p){var C,v,N,R,O=typeof u,H=O==="string"||Array.isArray(u);return Le(u)?this.each(function(S){x(this).toggleClass(u.call(this,S,Un(this),p),p)}):typeof p=="boolean"&&H?p?this.addClass(u):this.removeClass(u):(C=Ii(u),this.each(function(){if(H)for(R=x(this),N=0;N<C.length;N++)v=C[N],R.hasClass(v)?R.removeClass(v):R.addClass(v);else u!==void 0&&O!=="boolean"||((v=Un(this))&&et.set(this,"__className__",v),this.setAttribute&&this.setAttribute("class",v||u===!1?"":et.get(this,"__className__")||""))}))},hasClass:function(u){var p,C,v=0;for(p=" "+u+" ";C=this[v++];)if(C.nodeType===1&&-1<(" "+Jo(Un(C))+" ").indexOf(p))return!0;return!1}});var xu=/\r/g;x.fn.extend({val:function(u){var p,C,v,N=this[0];return arguments.length?(v=Le(u),this.each(function(R){var O;this.nodeType===1&&((O=v?u.call(this,R,x(this).val()):u)==null?O="":typeof O=="number"?O+="":Array.isArray(O)&&(O=x.map(O,function(H){return H==null?"":H+""})),(p=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in p&&p.set(this,O,"value")!==void 0||(this.value=O))})):N?(p=x.valHooks[N.type]||x.valHooks[N.nodeName.toLowerCase()])&&"get"in p&&(C=p.get(N,"value"))!==void 0?C:typeof(C=N.value)=="string"?C.replace(xu,""):C??"":void 0}}),x.extend({valHooks:{option:{get:function(u){var p=x.find.attr(u,"value");return p??Jo(x.text(u))}},select:{get:function(u){var p,C,v,N=u.options,R=u.selectedIndex,O=u.type==="select-one",H=O?null:[],S=O?R+1:N.length;for(v=R<0?S:O?R:0;v<S;v++)if(((C=N[v]).selected||v===R)&&!C.disabled&&(!C.parentNode.disabled||!Se(C.parentNode,"optgroup"))){if(p=x(C).val(),O)return p;H.push(p)}return H},set:function(u,p){for(var C,v,N=u.options,R=x.makeArray(p),O=N.length;O--;)((v=N[O]).selected=-1<x.inArray(x.valHooks.option.get(v),R))&&(C=!0);return C||(u.selectedIndex=-1),R}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(u,p){if(Array.isArray(p))return u.checked=-1<x.inArray(x(u).val(),p)}},Ke.checkOn||(x.valHooks[this].get=function(u){return u.getAttribute("value")===null?"on":u.value})});var as=ge.location,Fi={guid:Date.now()},Pa=/\?/;x.parseXML=function(u){var p,C;if(!u||typeof u!="string")return null;try{p=new ge.DOMParser().parseFromString(u,"text/xml")}catch{}return C=p&&p.getElementsByTagName("parsererror")[0],p&&!C||x.error("Invalid XML: "+(C?x.map(C.childNodes,function(v){return v.textContent}).join(`
`):u)),p};var ji=/^(?:focusinfocus|focusoutblur)$/,zi=function(u){u.stopPropagation()};x.extend(x.event,{trigger:function(u,p,C,v){var N,R,O,H,S,K,ee,ae,J=[C||Je],de=_n.call(u,"type")?u.type:u,$e=_n.call(u,"namespace")?u.namespace.split("."):[];if(R=ae=O=C=C||Je,C.nodeType!==3&&C.nodeType!==8&&!ji.test(de+x.event.triggered)&&(-1<de.indexOf(".")&&(de=($e=de.split(".")).shift(),$e.sort()),S=de.indexOf(":")<0&&"on"+de,(u=u[x.expando]?u:new x.Event(de,typeof u=="object"&&u)).isTrigger=v?2:3,u.namespace=$e.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+$e.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=C),p=p==null?[u]:x.makeArray(p,[u]),ee=x.event.special[de]||{},v||!ee.trigger||ee.trigger.apply(C,p)!==!1)){if(!v&&!ee.noBubble&&!re(C)){for(H=ee.delegateType||de,ji.test(H+de)||(R=R.parentNode);R;R=R.parentNode)J.push(R),O=R;O===(C.ownerDocument||Je)&&J.push(O.defaultView||O.parentWindow||ge)}for(N=0;(R=J[N++])&&!u.isPropagationStopped();)ae=R,u.type=1<N?H:ee.bindType||de,(K=(et.get(R,"events")||Object.create(null))[u.type]&&et.get(R,"handle"))&&K.apply(R,p),(K=S&&R[S])&&K.apply&&to(R)&&(u.result=K.apply(R,p),u.result===!1&&u.preventDefault());return u.type=de,v||u.isDefaultPrevented()||ee._default&&ee._default.apply(J.pop(),p)!==!1||!to(C)||S&&Le(C[de])&&!re(C)&&((O=C[S])&&(C[S]=null),x.event.triggered=de,u.isPropagationStopped()&&ae.addEventListener(de,zi),C[de](),u.isPropagationStopped()&&ae.removeEventListener(de,zi),x.event.triggered=void 0,O&&(C[S]=O)),u.result}},simulate:function(u,p,C){var v=x.extend(new x.Event,C,{type:u,isSimulated:!0});x.event.trigger(v,null,p)}}),x.fn.extend({trigger:function(u,p){return this.each(function(){x.event.trigger(u,p,this)})},triggerHandler:function(u,p){var C=this[0];if(C)return x.event.trigger(u,p,C,!0)}});var mc=/\[\]$/,Ui=/\r?\n/g,Su=/^(?:submit|button|image|reset|file)$/i,Eu=/^(?:input|select|textarea|keygen)/i;function La(u,p,C,v){var N;if(Array.isArray(p))x.each(p,function(R,O){C||mc.test(u)?v(u,O):La(u+"["+(typeof O=="object"&&O!=null?R:"")+"]",O,C,v)});else if(C||xt(p)!=="object")v(u,p);else for(N in p)La(u+"["+N+"]",p[N],C,v)}x.param=function(u,p){var C,v=[],N=function(R,O){var H=Le(O)?O():O;v[v.length]=encodeURIComponent(R)+"="+encodeURIComponent(H??"")};if(u==null)return"";if(Array.isArray(u)||u.jquery&&!x.isPlainObject(u))x.each(u,function(){N(this.name,this.value)});else for(C in u)La(C,u[C],p,N);return v.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=x.prop(this,"elements");return u?x.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!x(this).is(":disabled")&&Eu.test(this.nodeName)&&!Su.test(u)&&(this.checked||!vr.test(u))}).map(function(u,p){var C=x(this).val();return C==null?null:Array.isArray(C)?x.map(C,function(v){return{name:p.name,value:v.replace(Ui,`\r
`)}}):{name:p.name,value:C.replace(Ui,`\r
`)}}).get()}});var pc=/%20/g,gc=/#.*$/,hc=/([?&])_=[^&]*/,bc=/^(.*?):[ \t]*([^\r\n]*)$/gm,vc=/^(?:GET|HEAD)$/,yc=/^\/\//,Hi={},qi={},Cc="*/".concat("*"),$i=Je.createElement("a");function wc(u){return function(p,C){typeof p!="string"&&(C=p,p="*");var v,N=0,R=p.toLowerCase().match(ot)||[];if(Le(C))for(;v=R[N++];)v[0]==="+"?(v=v.slice(1)||"*",(u[v]=u[v]||[]).unshift(C)):(u[v]=u[v]||[]).push(C)}}function co(u,p,C,v){var N={},R=u===qi;function O(H){var S;return N[H]=!0,x.each(u[H]||[],function(K,ee){var ae=ee(p,C,v);return typeof ae!="string"||R||N[ae]?R?!(S=ae):void 0:(p.dataTypes.unshift(ae),O(ae),!1)}),S}return O(p.dataTypes[0])||!N["*"]&&O("*")}function Wi(u,p){var C,v,N=x.ajaxSettings.flatOptions||{};for(C in p)p[C]!==void 0&&((N[C]?u:v||(v={}))[C]=p[C]);return v&&x.extend(!0,u,v),u}$i.href=as.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:as.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(as.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Cc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,p){return p?Wi(Wi(u,x.ajaxSettings),p):Wi(x.ajaxSettings,u)},ajaxPrefilter:wc(Hi),ajaxTransport:wc(qi),ajax:function(u,p){typeof u=="object"&&(p=u,u=void 0),p=p||{};var C,v,N,R,O,H,S,K,ee,ae,J=x.ajaxSetup({},p),de=J.context||J,$e=J.context&&(de.nodeType||de.jquery)?x(de):x.event,ct=x.Deferred(),_e=x.Callbacks("once memory"),Ot=J.statusCode||{},cn={},st={},Eo="canceled",ht={readyState:0,getResponseHeader:function(dt){var vt;if(S){if(!R)for(R={};vt=bc.exec(N);)R[vt[1].toLowerCase()+" "]=(R[vt[1].toLowerCase()+" "]||[]).concat(vt[2]);vt=R[dt.toLowerCase()+" "]}return vt==null?null:vt.join(", ")},getAllResponseHeaders:function(){return S?N:null},setRequestHeader:function(dt,vt){return S==null&&(dt=st[dt.toLowerCase()]=st[dt.toLowerCase()]||dt,cn[dt]=vt),this},overrideMimeType:function(dt){return S==null&&(J.mimeType=dt),this},statusCode:function(dt){var vt;if(dt)if(S)ht.always(dt[ht.status]);else for(vt in dt)Ot[vt]=[Ot[vt],dt[vt]];return this},abort:function(dt){var vt=dt||Eo;return C&&C.abort(vt),ko(0,vt),this}};if(ct.promise(ht),J.url=((u||J.url||as.href)+"").replace(yc,as.protocol+"//"),J.type=p.method||p.type||J.method||J.type,J.dataTypes=(J.dataType||"*").toLowerCase().match(ot)||[""],J.crossDomain==null){H=Je.createElement("a");try{H.href=J.url,H.href=H.href,J.crossDomain=$i.protocol+"//"+$i.host!=H.protocol+"//"+H.host}catch{J.crossDomain=!0}}if(J.data&&J.processData&&typeof J.data!="string"&&(J.data=x.param(J.data,J.traditional)),co(Hi,J,p,ht),S)return ht;for(ee in(K=x.event&&J.global)&&x.active++==0&&x.event.trigger("ajaxStart"),J.type=J.type.toUpperCase(),J.hasContent=!vc.test(J.type),v=J.url.replace(gc,""),J.hasContent?J.data&&J.processData&&(J.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(J.data=J.data.replace(pc,"+")):(ae=J.url.slice(v.length),J.data&&(J.processData||typeof J.data=="string")&&(v+=(Pa.test(v)?"&":"?")+J.data,delete J.data),J.cache===!1&&(v=v.replace(hc,"$1"),ae=(Pa.test(v)?"&":"?")+"_="+Fi.guid+++ae),J.url=v+ae),J.ifModified&&(x.lastModified[v]&&ht.setRequestHeader("If-Modified-Since",x.lastModified[v]),x.etag[v]&&ht.setRequestHeader("If-None-Match",x.etag[v])),(J.data&&J.hasContent&&J.contentType!==!1||p.contentType)&&ht.setRequestHeader("Content-Type",J.contentType),ht.setRequestHeader("Accept",J.dataTypes[0]&&J.accepts[J.dataTypes[0]]?J.accepts[J.dataTypes[0]]+(J.dataTypes[0]!=="*"?", "+Cc+"; q=0.01":""):J.accepts["*"]),J.headers)ht.setRequestHeader(ee,J.headers[ee]);if(J.beforeSend&&(J.beforeSend.call(de,ht,J)===!1||S))return ht.abort();if(Eo="abort",_e.add(J.complete),ht.done(J.success),ht.fail(J.error),C=co(qi,J,p,ht)){if(ht.readyState=1,K&&$e.trigger("ajaxSend",[ht,J]),S)return ht;J.async&&0<J.timeout&&(O=ge.setTimeout(function(){ht.abort("timeout")},J.timeout));try{S=!1,C.send(cn,ko)}catch(dt){if(S)throw dt;ko(-1,dt)}}else ko(-1,"No Transport");function ko(dt,vt,qs,Vi){var Jn,is,Rn,fo,Hn,On=vt;S||(S=!0,O&&ge.clearTimeout(O),C=void 0,N=Vi||"",ht.readyState=0<dt?4:0,Jn=200<=dt&&dt<300||dt===304,qs&&(fo=function(dn,Ut,un){for(var Zo,Bn,He,Wt,Gt=dn.contents,Ht=dn.dataTypes;Ht[0]==="*";)Ht.shift(),Zo===void 0&&(Zo=dn.mimeType||Ut.getResponseHeader("Content-Type"));if(Zo){for(Bn in Gt)if(Gt[Bn]&&Gt[Bn].test(Zo)){Ht.unshift(Bn);break}}if(Ht[0]in un)He=Ht[0];else{for(Bn in un){if(!Ht[0]||dn.converters[Bn+" "+Ht[0]]){He=Bn;break}Wt||(Wt=Bn)}He=He||Wt}if(He)return He!==Ht[0]&&Ht.unshift(He),un[He]}(J,ht,qs)),!Jn&&-1<x.inArray("script",J.dataTypes)&&x.inArray("json",J.dataTypes)<0&&(J.converters["text script"]=function(){}),fo=function(dn,Ut,un,Zo){var Bn,He,Wt,Gt,Ht,mo={},yr=dn.dataTypes.slice();if(yr[1])for(Wt in dn.converters)mo[Wt.toLowerCase()]=dn.converters[Wt];for(He=yr.shift();He;)if(dn.responseFields[He]&&(un[dn.responseFields[He]]=Ut),!Ht&&Zo&&dn.dataFilter&&(Ut=dn.dataFilter(Ut,dn.dataType)),Ht=He,He=yr.shift()){if(He==="*")He=Ht;else if(Ht!=="*"&&Ht!==He){if(!(Wt=mo[Ht+" "+He]||mo["* "+He])){for(Bn in mo)if((Gt=Bn.split(" "))[1]===He&&(Wt=mo[Ht+" "+Gt[0]]||mo["* "+Gt[0]])){Wt===!0?Wt=mo[Bn]:mo[Bn]!==!0&&(He=Gt[0],yr.unshift(Gt[1]));break}}if(Wt!==!0)if(Wt&&dn.throws)Ut=Wt(Ut);else try{Ut=Wt(Ut)}catch(_o){return{state:"parsererror",error:Wt?_o:"No conversion from "+Ht+" to "+He}}}}return{state:"success",data:Ut}}(J,fo,ht,Jn),Jn?(J.ifModified&&((Hn=ht.getResponseHeader("Last-Modified"))&&(x.lastModified[v]=Hn),(Hn=ht.getResponseHeader("etag"))&&(x.etag[v]=Hn)),dt===204||J.type==="HEAD"?On="nocontent":dt===304?On="notmodified":(On=fo.state,is=fo.data,Jn=!(Rn=fo.error))):(Rn=On,!dt&&On||(On="error",dt<0&&(dt=0))),ht.status=dt,ht.statusText=(vt||On)+"",Jn?ct.resolveWith(de,[is,On,ht]):ct.rejectWith(de,[ht,On,Rn]),ht.statusCode(Ot),Ot=void 0,K&&$e.trigger(Jn?"ajaxSuccess":"ajaxError",[ht,J,Jn?is:Rn]),_e.fireWith(de,[ht,On]),K&&($e.trigger("ajaxComplete",[ht,J]),--x.active||x.event.trigger("ajaxStop")))}return ht},getJSON:function(u,p,C){return x.get(u,p,C,"json")},getScript:function(u,p){return x.get(u,void 0,p,"script")}}),x.each(["get","post"],function(u,p){x[p]=function(C,v,N,R){return Le(v)&&(R=R||N,N=v,v=void 0),x.ajax(x.extend({url:C,type:p,dataType:R,data:v,success:N},x.isPlainObject(C)&&C))}}),x.ajaxPrefilter(function(u){var p;for(p in u.headers)p.toLowerCase()==="content-type"&&(u.contentType=u.headers[p]||"")}),x._evalUrl=function(u,p,C){return x.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(v){x.globalEval(v,p,C)}})},x.fn.extend({wrapAll:function(u){var p;return this[0]&&(Le(u)&&(u=u.call(this[0])),p=x(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&p.insertBefore(this[0]),p.map(function(){for(var C=this;C.firstElementChild;)C=C.firstElementChild;return C}).append(this)),this},wrapInner:function(u){return Le(u)?this.each(function(p){x(this).wrapInner(u.call(this,p))}):this.each(function(){var p=x(this),C=p.contents();C.length?C.wrapAll(u):p.append(u)})},wrap:function(u){var p=Le(u);return this.each(function(C){x(this).wrapAll(p?u.call(this,C):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(u){return!x.expr.pseudos.visible(u)},x.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new ge.XMLHttpRequest}catch{}};var ku={0:200,1223:204},Hs=x.ajaxSettings.xhr();Ke.cors=!!Hs&&"withCredentials"in Hs,Ke.ajax=Hs=!!Hs,x.ajaxTransport(function(u){var p,C;if(Ke.cors||Hs&&!u.crossDomain)return{send:function(v,N){var R,O=u.xhr();if(O.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(R in u.xhrFields)O[R]=u.xhrFields[R];for(R in u.mimeType&&O.overrideMimeType&&O.overrideMimeType(u.mimeType),u.crossDomain||v["X-Requested-With"]||(v["X-Requested-With"]="XMLHttpRequest"),v)O.setRequestHeader(R,v[R]);p=function(H){return function(){p&&(p=C=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,H==="abort"?O.abort():H==="error"?typeof O.status!="number"?N(0,"error"):N(O.status,O.statusText):N(ku[O.status]||O.status,O.statusText,(O.responseType||"text")!=="text"||typeof O.responseText!="string"?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=p(),C=O.onerror=O.ontimeout=p("error"),O.onabort!==void 0?O.onabort=C:O.onreadystatechange=function(){O.readyState===4&&ge.setTimeout(function(){p&&C()})},p=p("abort");try{O.send(u.hasContent&&u.data||null)}catch(H){if(p)throw H}},abort:function(){p&&p()}}}),x.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return x.globalEval(u),u}}}),x.ajaxPrefilter("script",function(u){u.cache===void 0&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),x.ajaxTransport("script",function(u){var p,C;if(u.crossDomain||u.scriptAttrs)return{send:function(v,N){p=x("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",C=function(R){p.remove(),C=null,R&&N(R.type==="error"?404:200,R.type)}),Je.head.appendChild(p[0])},abort:function(){C&&C()}}});var Ma,So=[],uo=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=So.pop()||x.expando+"_"+Fi.guid++;return this[u]=!0,u}}),x.ajaxPrefilter("json jsonp",function(u,p,C){var v,N,R,O=u.jsonp!==!1&&(uo.test(u.url)?"url":typeof u.data=="string"&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&uo.test(u.data)&&"data");if(O||u.dataTypes[0]==="jsonp")return v=u.jsonpCallback=Le(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,O?u[O]=u[O].replace(uo,"$1"+v):u.jsonp!==!1&&(u.url+=(Pa.test(u.url)?"&":"?")+u.jsonp+"="+v),u.converters["script json"]=function(){return R||x.error(v+" was not called"),R[0]},u.dataTypes[0]="json",N=ge[v],ge[v]=function(){R=arguments},C.always(function(){N===void 0?x(ge).removeProp(v):ge[v]=N,u[v]&&(u.jsonpCallback=p.jsonpCallback,So.push(v)),R&&Le(N)&&N(R[0]),R=N=void 0}),"script"}),Ke.createHTMLDocument=((Ma=Je.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",Ma.childNodes.length===2),x.parseHTML=function(u,p,C){return typeof u!="string"?[]:(typeof p=="boolean"&&(C=p,p=!1),p||(Ke.createHTMLDocument?((v=(p=Je.implementation.createHTMLDocument("")).createElement("base")).href=Je.location.href,p.head.appendChild(v)):p=Je),R=!C&&[],(N=_.exec(u))?[p.createElement(N[1])]:(N=Ni([u],p,R),R&&R.length&&x(R).remove(),x.merge([],N.childNodes)));var v,N,R},x.fn.load=function(u,p,C){var v,N,R,O=this,H=u.indexOf(" ");return-1<H&&(v=Jo(u.slice(H)),u=u.slice(0,H)),Le(p)?(C=p,p=void 0):p&&typeof p=="object"&&(N="POST"),0<O.length&&x.ajax({url:u,type:N||"GET",dataType:"html",data:p}).done(function(S){R=arguments,O.html(v?x("<div>").append(x.parseHTML(S)).find(v):S)}).always(C&&function(S,K){O.each(function(){C.apply(this,R||[S.responseText,K,S])})}),this},x.expr.pseudos.animated=function(u){return x.grep(x.timers,function(p){return u===p.elem}).length},x.offset={setOffset:function(u,p,C){var v,N,R,O,H,S,K=x.css(u,"position"),ee=x(u),ae={};K==="static"&&(u.style.position="relative"),H=ee.offset(),R=x.css(u,"top"),S=x.css(u,"left"),(K==="absolute"||K==="fixed")&&-1<(R+S).indexOf("auto")?(O=(v=ee.position()).top,N=v.left):(O=parseFloat(R)||0,N=parseFloat(S)||0),Le(p)&&(p=p.call(u,C,x.extend({},H))),p.top!=null&&(ae.top=p.top-H.top+O),p.left!=null&&(ae.left=p.left-H.left+N),"using"in p?p.using.call(u,ae):ee.css(ae)}},x.fn.extend({offset:function(u){if(arguments.length)return u===void 0?this:this.each(function(N){x.offset.setOffset(this,u,N)});var p,C,v=this[0];return v?v.getClientRects().length?(p=v.getBoundingClientRect(),C=v.ownerDocument.defaultView,{top:p.top+C.pageYOffset,left:p.left+C.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var u,p,C,v=this[0],N={top:0,left:0};if(x.css(v,"position")==="fixed")p=v.getBoundingClientRect();else{for(p=this.offset(),C=v.ownerDocument,u=v.offsetParent||C.documentElement;u&&(u===C.body||u===C.documentElement)&&x.css(u,"position")==="static";)u=u.parentNode;u&&u!==v&&u.nodeType===1&&((N=x(u).offset()).top+=x.css(u,"borderTopWidth",!0),N.left+=x.css(u,"borderLeftWidth",!0))}return{top:p.top-N.top-x.css(v,"marginTop",!0),left:p.left-N.left-x.css(v,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&x.css(u,"position")==="static";)u=u.offsetParent;return u||pr})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,p){var C=p==="pageYOffset";x.fn[u]=function(v){return Uo(this,function(N,R,O){var H;if(re(N)?H=N:N.nodeType===9&&(H=N.defaultView),O===void 0)return H?H[p]:N[R];H?H.scrollTo(C?H.pageXOffset:O,C?O:H.pageYOffset):N[R]=O},u,v,arguments.length)}}),x.each(["top","left"],function(u,p){x.cssHooks[p]=Ra(Ke.pixelPosition,function(C,v){if(v)return v=$t(C,p),Oi.test(v)?x(C).position()[p]+"px":v})}),x.each({Height:"height",Width:"width"},function(u,p){x.each({padding:"inner"+u,content:p,"":"outer"+u},function(C,v){x.fn[v]=function(N,R){var O=arguments.length&&(C||typeof N!="boolean"),H=C||(N===!0||R===!0?"margin":"border");return Uo(this,function(S,K,ee){var ae;return re(S)?v.indexOf("outer")===0?S["inner"+u]:S.document.documentElement["client"+u]:S.nodeType===9?(ae=S.documentElement,Math.max(S.body["scroll"+u],ae["scroll"+u],S.body["offset"+u],ae["offset"+u],ae["client"+u])):ee===void 0?x.css(S,K,H):x.style(S,K,ee,H)},p,O?N:void 0,O)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,p){x.fn[p]=function(C){return this.on(p,C)}}),x.fn.extend({bind:function(u,p,C){return this.on(u,null,p,C)},unbind:function(u,p){return this.off(u,null,p)},delegate:function(u,p,C,v){return this.on(p,u,C,v)},undelegate:function(u,p,C){return arguments.length===1?this.off(u,"**"):this.off(p,u||"**",C)},hover:function(u,p){return this.on("mouseenter",u).on("mouseleave",p||u)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,p){x.fn[p]=function(C,v){return 0<arguments.length?this.on(p,null,C,v):this.trigger(p)}});var Hr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(u,p){var C,v,N;if(typeof p=="string"&&(C=u[p],p=u,u=C),Le(u))return v=at.call(arguments,2),(N=function(){return u.apply(p||this,v.concat(at.call(arguments)))}).guid=u.guid=u.guid||x.guid++,N},x.holdReady=function(u){u?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=Se,x.isFunction=Le,x.isWindow=re,x.camelCase=Jt,x.type=xt,x.now=Date.now,x.isNumeric=function(u){var p=x.type(u);return(p==="number"||p==="string")&&!isNaN(u-parseFloat(u))},x.trim=function(u){return u==null?"":(u+"").replace(Hr,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return x});var _u=ge.jQuery,ut=ge.$;return x.noConflict=function(u){return ge.$===x&&(ge.$=ut),u&&ge.jQuery===x&&(ge.jQuery=_u),x},typeof Ye>"u"&&(ge.jQuery=ge.$=x),x}),function(ge){ge.imageArea=function(Ye,Qe){var We=Ye.options,at=Ye.$image,Yt=Ye.$trigger,kn,Zt,Yn,vo={},_n,yo=!0,Ae=!0,Ke=[0,0],Le=[0,0],re={id:Qe,x:0,y:0,z:0,height:0,width:0},Je=function(){re.z=0,ue("blur")},pn=function(){Ye.blurAll(),re.z=100,ue()},It=function(){return re},xt=function(ke){at.trigger(ke,[re.id,Ye.areas()])},ie=function(ke){var rt=ke||window.event||{};rt.cancelBubble=!0,rt.returnValue=!1,rt.stopPropagation&&rt.stopPropagation(),rt.preventDefault&&rt.preventDefault()},gt=function(){ge.each(arguments,function(ke,rt){x(rt)})},x=function(ke,rt){var lt,Te;switch(ke){case"start":lt="mousedown",Te="touchstart";break;case"move":lt="mousemove",Te="touchmove";break;case"stop":lt="mouseup",Te="touchend";break;default:return}rt&&jQuery.isFunction(rt)?ge(window.document).on(lt,rt).on(Te,rt):ge(window.document).off(lt).off(Te)},Nn=function(){kn.css({cursor:"default",width:re.width,height:re.height,left:re.x,top:re.y}),Zt.css({backgroundPosition:-re.x-1+"px "+(-re.y-1)+"px",cursor:We.allowMove?"move":"default",width:re.width-2>0?re.width-2:0,height:re.height-2>0?re.height-2:0,left:re.x+1,top:re.y+1}),Yn.css({width:re.width-2>0?re.width-2:0,left:re.x+2,top:re.y+1})},Se=function(ke){We.allowResize&&(ke?ge.each(vo,function(rt,lt){var Te,Et,ot=Math.round(lt.width()/2),Q=Math.round(lt.height()/2),mr=rt[0],zo=rt[rt.length-1];mr==="n"?Te=-Q:mr==="s"?Te=re.height-Q-1:Te=Math.round(re.height/2)-Q-1,zo==="e"?Et=re.width-ot-1:zo==="w"?Et=-ot:Et=Math.round(re.width/2)-ot-1,lt.css({display:"block",left:re.x+Et,top:re.y+Te})}):ge(".select-areas-resize-handler").each(function(){ge(this).css({display:"none"})}))},An=function(ke){_n&&_n.css({display:ke?"block":"none",left:re.x+re.width+1,top:re.y-_n.outerHeight()-1})},Ts=function(ke){kn.css({cursor:ke}),Zt.css({cursor:ke})},ue=function(ke){switch(ke){case"startSelection":Ye._refresh(),Nn(),Se(),An(!0);break;case"pickSelection":case"pickResizeHandler":Se();break;case"resizeSelection":Nn(),Se(),Ts("crosshair"),An(!0);break;case"moveSelection":Nn(),Se(),Ts("move"),An(!0);break;case"blur":Nn(),Se(),An();break;default:Nn(),Se(!0),An(!0)}},mt=function(ke){ie(ke),re.width=We.minSize[0],re.height=We.minSize[1],pn(),x("move",dr),x("stop",Gn),Le=_(ke),Le[0]+re.width>at.width()&&(Le[0]=at.width()-re.width),Le[1]+re.height>at.height()&&(Le[1]=at.height()-re.height),re.x=Le[0],re.y=Le[1],ue("startSelection")},Yo=function(ke){ie(ke),pn(),x("move",io),x("stop",Gn);var rt=_(ke);Ke[0]=rt[0]-re.x,Ke[1]=rt[1]-re.y,ue("pickSelection")},ye=function(ke){ie(ke),pn();var rt=ke.target.className.split(" ")[1];rt[rt.length-1]==="w"&&(Le[0]+=re.width,re.x=Le[0]-re.width),rt[0]==="n"&&(Le[1]+=re.height,re.y=Le[1]-re.height),rt==="n"||rt==="s"?yo=!1:(rt==="e"||rt==="w")&&(Ae=!1),x("move",dr),x("stop",Gn),ue("pickResizeHandler")},dr=function(ke){ie(ke),pn();var rt=_(ke),lt=rt[1]-Le[1],Te=rt[0]-Le[0];Math.abs(Te)<We.minSize[0]&&(Te=Te>=0?We.minSize[0]:-We.minSize[0]),Math.abs(lt)<We.minSize[1]&&(lt=lt>=0?We.minSize[1]:-We.minSize[1]),(Le[0]+Te<0||Le[0]+Te>at.width())&&(Te=-Te),(Le[1]+lt<0||Le[1]+lt>at.height())&&(lt=-lt),We.maxSize[0]>We.minSize[0]&&We.maxSize[1]>We.minSize[1]&&(Math.abs(Te)>We.maxSize[0]&&(Te=Te>=0?We.maxSize[0]:-We.maxSize[0]),Math.abs(lt)>We.maxSize[1]&&(lt=lt>=0?We.maxSize[1]:-We.maxSize[1])),yo&&(re.width=Te),Ae&&(re.height=lt),We.aspectRatio&&(Te>0&&lt>0||Te<0&&lt<0?yo?lt=Math.round(Te/We.aspectRatio):Te=Math.round(lt*We.aspectRatio):yo?lt=-Math.round(Te/We.aspectRatio):Te=-Math.round(lt*We.aspectRatio),Le[0]+Te>at.width()&&(Te=at.width()-Le[0],lt=lt>0?Math.round(Te/We.aspectRatio):-Math.round(Te/We.aspectRatio)),Le[1]+lt<0&&(lt=-Le[1],Te=Te>0?-Math.round(lt*We.aspectRatio):Math.round(lt*We.aspectRatio)),Le[1]+lt>at.height()&&(lt=at.height()-Le[1],Te=Te>0?Math.round(lt*We.aspectRatio):-Math.round(lt*We.aspectRatio)),re.width=Te,re.height=lt),re.width<0?(re.width=Math.abs(re.width),re.x=Le[0]-re.width):re.x=Le[0],re.height<0?(re.height=Math.abs(re.height),re.y=Le[1]-re.height):re.y=Le[1],xt("changing"),ue("resizeSelection")},io=function(ke){if(ie(ke),!!We.allowMove){pn();var rt=_(ke);ur({x:rt[0]-Ke[0],y:rt[1]-Ke[1]}),xt("changing")}},ur=function(ke){ke.x>0?ke.x+re.width<at.width()?re.x=ke.x:re.x=at.width()-re.width:re.x=0,ke.y>0?ke.y+re.height<at.height()?re.y=ke.y:re.y=at.height()-re.height:re.y=0,ue("moveSelection")},Gn=function(ke,rt){ie(ke),gt("move","stop"),rt&&(re.x=rt.x,re.y=rt.y,re.z=rt.z,re.width=rt.width,re.height=rt.height,Nn()),Le[0]=re.x,Le[1]=re.y,yo=!0,Ae=!0,xt("changed"),ue("releaseSelection")},St=function(ke){xt("deleted"),ie(ke),Zt.remove(),kn.remove(),Yn.remove(),ge.each(vo,function(rt,lt){lt.remove()}),_n&&_n.remove(),Ye._remove(Qe)},jt=function(ke){var rt=ge(ke).offset();return[rt.left,rt.top]},_=function(ke){var rt=jt(at);ke.pageX||(ke.originalEvent&&(ke=ke.originalEvent),ke.changedTouches&&(ke=ke.changedTouches[0]),ke.touches&&(ke=ke.touches[0]));var lt=ke.pageX-rt[0],Te=ke.pageY-rt[1];return lt=lt<0?0:lt>at.width()?at.width():lt,Te=Te<0?0:Te>at.height()?at.height():Te,[lt,Te]};if(kn=ge("<div id='select-areas-outline_"+It().id+`'  class="select-areas-outline"/>`).css({opacity:We.outlineOpacity,position:"absolute"}).insertAfter(Yt),Zt=ge("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+It().id).css({position:"absolute"}).insertAfter(kn),Yn=ge("<div id='select-areas-label-container_"+It().id+`'  class="select-areas-label-container"/>`).css({position:"absolute"}).insertAfter(Yt),We.allowResize&&ge.each(["nw","n","ne","e","se","s","sw","w"],function(ke,rt){vo[rt]=ge('<div class="select-areas-resize-handler '+rt+" select-areas-resize-handler_"+It().id+'"/>').css({opacity:.5,position:"absolute",cursor:rt+"-resize"}).insertAfter(Zt).mousedown(ye).bind("touchstart",ye)}),We.allowDelete){var fr=function(ke){return ke.click(St).bind("touchstart",St).bind("tap",St),ke};_n=fr(ge("<div id='select-areas-delete_"+It().id+`'  class="delete-area" />`)).append(fr(ge('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(Zt)}return We.allowMove&&Zt.mousedown(Yo).bind("touchstart",Yo),pn(),{getData:It,startSelection:mt,deleteSelection:St,options:We,blur:Je,focus:pn,nudge:function(ke){ke.x=re.x,ke.y=re.y,ke.d&&(ke.y=re.y+ke.d),ke.u&&(ke.y=re.y-ke.u),ke.l&&(ke.x=re.x-ke.l),ke.r&&(ke.x=re.x+ke.r),ur(ke),xt("changed")},set:function(ke,rt){re=ge.extend(re,ke),Le[0]=re.x,Le[1]=re.y,rt||xt("changed")},contains:function(ke){return ke.x>=re.x&&ke.x<=re.x+re.width&&ke.y>=re.y&&ke.y<=re.y+re.height}}},ge.imageSelectAreas=function(){},ge.imageSelectAreas.prototype.init=function(Ye,Qe){var We=this,at={allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null};this.options=ge.extend(at,Qe),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=ge(Ye),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=ge("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=ge('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=ge("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),ge.each(this.options.areas,function(Yt,kn){We._add(kn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(ge.proxy(this.newArea,this)).on("touchstart",ge.proxy(this.newArea,this)),this.options.allowNudge&&ge("html").keydown(function(Yt){var kn={37:"l",38:"u",39:"r",40:"d"},Zt=kn[Yt.which],Yn;if(Zt&&(We._eachArea(function(_n){if(_n.getData().z===100)return Yn=_n,!1}),Yn)){var vo={};vo[Zt]=1,Yn.nudge(vo)}})},ge.imageSelectAreas.prototype._refresh=function(){var Ye=this.areas().length;this.$overlay.css({display:Ye?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},ge.imageSelectAreas.prototype._eachArea=function(Ye){ge.each(this._areas,function(Qe,We){if(We)return Ye(We,Qe)})},ge.imageSelectAreas.prototype._remove=function(Ye){delete this._areas[Ye],this._refresh()},ge.imageSelectAreas.prototype.remove=function(Ye){this._areas[Ye]&&this._areas[Ye].deleteSelection()},ge.imageSelectAreas.prototype.newArea=function(Ye){var Qe=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(We,at){Qe=Math.max(Qe,parseInt(at,10))}),Qe+=1,this._areas[Qe]=ge.imageArea(this,Qe),Ye&&this._areas[Qe].startSelection(Ye)),Qe},ge.imageSelectAreas.prototype.set=function(Ye,Qe,We){this._areas[Ye]&&(Qe.id=Ye,this._areas[Ye].set(Qe,We),this._areas[Ye].focus())},ge.imageSelectAreas.prototype._add=function(Ye,Qe){var We=this.newArea();this.set(We,Ye,Qe)},ge.imageSelectAreas.prototype.add=function(Ye){var Qe=this;this.blurAll(),ge.isArray(Ye)?ge.each(Ye,function(We,at){Qe._add(at)}):this._add(Ye),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},ge.imageSelectAreas.prototype.reset=function(){var Ye=this;this._eachArea(function(Qe,We){Ye.remove(We)}),this._refresh()},ge.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},ge.imageSelectAreas.prototype.areas=function(){var Ye=[];return this._eachArea(function(Qe){Ye.push(Qe.getData())}),Ye},ge.imageSelectAreas.prototype.relativeAreas=function(){for(var Ye=this.areas(),Qe=[],We=this.ratio,at=function(kn){return Math.floor(kn/We)},Yt=0;Yt<Ye.length;Yt++)Qe[Yt]=ge.extend({},Ye[Yt]),Qe[Yt].x=at(Qe[Yt].x),Qe[Yt].y=at(Qe[Yt].y),Qe[Yt].width=at(Qe[Yt].width),Qe[Yt].height=at(Qe[Yt].height);return Qe},ge.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(Ye){Ye.blur()})},ge.imageSelectAreas.prototype.contains=function(Ye){var Qe=!1;return this._eachArea(function(We){if(We.contains(Ye))return Qe=!0,!1}),Qe},ge.selectAreas=function(Ye,Qe){var We=ge(Ye);if(!We.data("mainImageSelectAreas")){var at=new ge.imageSelectAreas;at.init(Ye,Qe),We.data("mainImageSelectAreas",at),We.trigger("loaded")}return We.data("mainImageSelectAreas")},ge.fn.selectAreas=function(Ye){if(ge.imageSelectAreas.prototype[Ye]){var Qe=ge.imageSelectAreas.prototype[Ye].apply(ge.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Qe>"u"?this:Qe}else{if(typeof Ye=="object"||!Ye)return this.each(function(){var We=this,at=new Image;at.onload=function(){ge.selectAreas(We,Ye)},at.src=We.src}),this;ge.error("Method "+Ye+" does not exist on jQuery.selectAreas")}}}(jQuery);

!function(){"use strict";var yt=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},zt=function(t){return{eq:t}},Vt=zt(function(t,e){return t===e}),It=function(t){return zt(function(e,n){if(e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t.eq(e[o],n[o]))return!1;return!0})},oe=function(t){return zt(function(e,n){var l,u,f,r=Object.keys(e),o=Object.keys(n);if(!(l=Vt,u=It(l),f=function(u){return Array.prototype.slice.call(u).sort(void 0)},zt(function(p,b){return u.eq(f(p),f(b))})).eq(r,o))return!1;for(var s=r.length,a=0;a<s;a++){var i=r[a];if(!t.eq(e[i],n[i]))return!1}return!0})},Ie=zt(function(t,e){if(t===e)return!0;var n=yt(t);return n===yt(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?It(Ie).eq(t,e):"object"===n&&oe(Ie).eq(t,e))});const wn=Object.getPrototypeOf,We=(t,e,n)=>{var r;return!!n(t,e.prototype)||(null===(r=t.constructor)||void 0===r?void 0:r.name)===e.name},Hn=t=>e=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&We(n,String,(o,s)=>s.isPrototypeOf(o))?"string":r})(e)===t,pr=t=>e=>typeof e===t,Sn=t=>e=>t===e,gr=(t,e)=>Kt(t)&&We(t,e,(n,r)=>wn(n)===r),Dt=Hn("string"),Kt=Hn("object"),Pt=t=>gr(t,Object),ct=Hn("array"),Qt=Sn(null),Pn=pr("boolean"),De=Sn(void 0),be=t=>null==t,gt=t=>!be(t),ge=pr("function"),x=pr("number"),Ln=(t,e)=>{if(ct(t)){for(let n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}return!1},At=()=>{},kn=(t,e)=>(...n)=>t(e.apply(null,n)),Ps=(t,e)=>n=>t(e(n)),ht=t=>()=>t,de=t=>t,Wr=(t,e)=>t===e;function kt(t,...e){return(...n)=>{const r=e.concat(n);return t.apply(null,r)}}const Po=t=>e=>!t(e),sr=t=>()=>{throw new Error(t)},fo=t=>t(),Un=t=>{t()},ve=ht(!1),Be=ht(!0);class E{constructor(e,n){this.tag=e,this.value=n}static some(e){return new E(!0,e)}static none(){return E.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?E.some(e(this.value)):E.none()}bind(e){return this.tag?e(this.value):E.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:E.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return gt(e)?E.some(e):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}E.singletonNone=new E(!1);const mo=Array.prototype.slice,_t=Array.prototype.indexOf,te=Array.prototype.push,ae=(t,e)=>_t.call(t,e),Ot=(t,e)=>ae(t,e)>-1,Se=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},ne=(t,e)=>{const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e(t[o],o);return r},tt=(t,e)=>{for(let n=0,r=t.length;n<r;n++)e(t[n],n)},po=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Vr=(t,e)=>{const n=[],r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];(e(a,o)?n:r).push(a)}return{pass:n,fail:r}},Ht=(t,e)=>{const n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];e(s,r)&&n.push(s)}return n},Lo=(t,e,n)=>(po(t,(r,o)=>{n=e(n,r,o)}),n),pn=(t,e,n)=>(tt(t,(r,o)=>{n=e(n,r,o)}),n),Dr=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++){const s=t[r];if(e(s,r))return E.some(s);if(n(s,r))break}return E.none()},He=(t,e)=>Dr(t,e,ve),Ls=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return E.some(n);return E.none()},Gl=t=>{const e=[];for(let n=0,r=t.length;n<r;++n){if(!ct(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);te.apply(e,t[n])}return e},Ve=(t,e)=>Gl(ne(t,e)),ar=(t,e)=>{for(let n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0},Kr=t=>{const e=mo.call(t,0);return e.reverse(),e},Jt=(t,e)=>Ht(t,n=>!Ot(e,n)),En=(t,e)=>{const n={};for(let r=0,o=t.length;r<o;r++){const s=t[r];n[String(s)]=e(s,r)}return n},Mo=(t,e)=>{const n=mo.call(t,0);return n.sort(e),n},Na=(t,e)=>e>=0&&e<t.length?E.some(t[e]):E.none(),Nn=t=>Na(t,0),go=t=>Na(t,t.length-1),un=ge(Array.from)?Array.from:t=>mo.call(t),qn=(t,e)=>{for(let n=0;n<t.length;n++){const r=e(t[n],n);if(r.isSome())return r}return E.none()},Ke=Object.keys,os=Object.hasOwnProperty,Ce=(t,e)=>{const n=Ke(t);for(let r=0,o=n.length;r<o;r++){const s=n[r];e(t[s],s)}},Io=(t,e)=>Yl(t,(n,r)=>({k:r,v:e(n,r)})),Yl=(t,e)=>{const n={};return Ce(t,(r,o)=>{const s=e(r,o);n[s.k]=s.v}),n},_a=t=>(e,n)=>{t[n]=e},Fo=(t,e,n,r)=>{Ce(t,(o,s)=>{(e(o,s)?n:r)(o,s)})},hr=(t,e)=>{const n={};return Fo(t,e,_a(n),At),n},ss=(t,e)=>{const n=[];return Ce(t,(r,o)=>{n.push(e(r,o))}),n},jo=t=>ss(t,de),ke=(t,e)=>Zt(t,e)?E.from(t[e]):E.none(),Zt=(t,e)=>os.call(t,e),gn=(t,e)=>Zt(t,e)&&null!=t[e],Mn=t=>{const e={};return tt(t,n=>{e[n]={}}),Ke(e)},Aa=t=>void 0!==t.length,wi=Array.isArray,Ms=(t,e,n)=>{if(!t)return!1;if(n=n||t,Aa(t)){for(let r=0,o=t.length;r<o;r++)if(!1===e.call(n,t[r],r,t))return!1}else for(const r in t)if(Zt(t,r)&&!1===e.call(n,t[r],r,t))return!1;return!0},Ta=(t,e)=>{const n=[];return Ms(t,(r,o)=>{n.push(e(r,o,t))}),n},Br=(t,e)=>{const n=[];return Ms(t,(r,o)=>{e&&!e(r,o,t)||n.push(r)}),n},Xr=(t,e,n,r)=>{let o=De(n)?t[0]:n;for(let s=0;s<t.length;s++)o=e.call(r,o,t[s],s);return o},Ra=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t))return r;return-1},Pr=t=>t[t.length-1],zo=t=>{let e,n=!1;return(...r)=>(n||(n=!0,e=t.apply(null,r)),e)},Ql=()=>Si(0,0),Si=(t,e)=>({major:t,minor:e}),as={nu:Si,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Ql():((r,o)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const u=i[c];if(u.test(l))return u}})(r,o);if(!s)return{major:0,minor:0};const a=i=>Number(o.replace(s,"$"+i));return Si(a(1),a(2))})(t,n)},unknown:Ql},Jl=(t,e)=>{const n=String(e).toLowerCase();return He(t,r=>r.search(n))},Zl=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,ki=(t,e)=>rn(t,e)?t.substring(e.length):t,Fe=(t,e,n=0,r)=>{const o=t.indexOf(e,n);return-1!==o&&(!!De(r)||o+e.length<=r)},rn=(t,e)=>Zl(t,e,0),Is=(t,e)=>Zl(t,e,t.length-e.length),Fs=t=>e=>e.replace(t,""),Gr=Fs(/^\s+|\s+$/g),tc=Fs(/^\s+/g),ec=Fs(/\s+$/g),$n=t=>t.length>0,is=t=>!$n(t),js=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?E.none():E.some(n)},Oa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Lr=t=>e=>Fe(e,t),Ei=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Fe(t,"edge/")&&Fe(t,"chrome")&&Fe(t,"safari")&&Fe(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Oa],search:t=>Fe(t,"chrome")&&!Fe(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Fe(t,"msie")||Fe(t,"trident")},{name:"Opera",versionRegexes:[Oa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Lr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Lr("firefox")},{name:"Safari",versionRegexes:[Oa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Fe(t,"safari")||Fe(t,"mobile/"))&&Fe(t,"applewebkit")}],su=[{name:"Windows",search:Lr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Fe(t,"iphone")||Fe(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Lr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Lr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Lr("linux"),versionRegexes:[]},{name:"Solaris",search:Lr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Lr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Lr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],nc={browsers:ht(Ei),oses:ht(su)},_i="Chromium",Ai="Firefox",Ho=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isEdge:r("Edge"),isChromium:r(_i),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(Ai),isSafari:r("Safari")}},Ba=()=>Ho({current:void 0,version:as.unknown()}),ls=Ho,Ti=(ht("Edge"),ht(_i),ht("IE"),ht("Opera"),ht(Ai),ht("Safari"),"Windows"),rc="Android",Ri="Solaris",zs="FreeBSD",Oi="ChromeOS",lr=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isWindows:r(Ti),isiOS:r("iOS"),isAndroid:r(rc),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(Ri),isFreeBSD:r(zs),isChromeOS:r(Oi)}},sc=()=>lr({current:void 0,version:as.unknown()}),Hs=lr,au=(ht(Ti),ht("iOS"),ht(rc),ht("Linux"),ht("macOS"),ht(Ri),ht(zs),ht(Oi),t=>window.matchMedia(t).matches);let iu=zo(()=>((t,e,n)=>{const r=nc.browsers(),o=nc.oses(),s=e.bind(l=>{return c=r,qn(l.brands,f=>{const p=f.brand.toLowerCase();return He(c,b=>{var g;return p===(null===(g=b.brand)||void 0===g?void 0:g.toLowerCase())}).map(b=>({current:b.name,version:as.nu(parseInt(f.version,10),0)}))});var c}).orThunk(()=>{return Jl(r,c=t).map(u=>{const f=as.detect(u.versionRegexes,c);return{current:u.name,version:f}});var c}).fold(Ba,ls),a=(l=o,c=t,Jl(l,c).map(u=>{const f=as.detect(u.versionRegexes,c);return{current:u.name,version:f}})).fold(sc,Hs),i=((l,c,u,f)=>{const p=l.isiOS()&&!0===/ipad/i.test(u),b=l.isiOS()&&!p,g=l.isiOS()||l.isAndroid(),v=g||f("(pointer:coarse)"),h=p||!b&&g&&f("(min-device-width:768px)"),C=b||g&&!h,S=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(u),k=!C&&!h&&!S;return{isiPad:ht(p),isiPhone:ht(b),isTablet:ht(h),isPhone:ht(C),isTouch:ht(v),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ht(S),isDesktop:ht(k)}})(a,s,t,n);var l,c;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,E.from(navigator.userAgentData),au));const _n=()=>iu(),Uo=navigator.userAgent,Us=_n(),Mr=Us.browser,Wn=Us.os,ho=Us.deviceType,Di=-1!==Uo.indexOf("Windows Phone"),ue={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Mr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Mr.isIE(),windowsPhone:Di,browser:{current:Mr.current,version:Mr.version,isChromium:Mr.isChromium,isEdge:Mr.isEdge,isFirefox:Mr.isFirefox,isIE:Mr.isIE,isOpera:Mr.isOpera,isSafari:Mr.isSafari},os:{current:Wn.current,version:Wn.version,isAndroid:Wn.isAndroid,isChromeOS:Wn.isChromeOS,isFreeBSD:Wn.isFreeBSD,isiOS:Wn.isiOS,isLinux:Wn.isLinux,isMacOS:Wn.isMacOS,isSolaris:Wn.isSolaris,isWindows:Wn.isWindows},deviceType:{isDesktop:ho.isDesktop,isiPad:ho.isiPad,isiPhone:ho.isiPhone,isPhone:ho.isPhone,isTablet:ho.isTablet,isTouch:ho.isTouch,isWebView:ho.isWebView}},ac=/^\s*|\s*$/g,ic=t=>be(t)?"":(""+t).replace(ac,""),Bi=function(t,e,n,r){r=r||this,t&&(n&&(t=t[n]),Ms(t,(o,s)=>!1!==e.call(r,o,s,n)&&(Bi(o,e,n,r),!0)))},dt={trim:ic,isArray:wi,is:(t,e)=>e?!("array"!==e||!wi(t))||typeof t===e:void 0!==t,toArray:t=>{if(wi(t))return t;{const e=[];for(let n=0,r=t.length;n<r;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const r=Dt(t)?t.split(e||","):t||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:Ms,map:Ta,grep:Br,inArray:(t,e)=>{if(t)for(let n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},hasOwn:Zt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(Zt(r,o)){const s=r[o];void 0!==s&&(t[o]=s)}}return t},walk:Bi,resolve:(t,e=window)=>{const n=t.split(".");for(let r=0,o=n.length;r<o&&(e=e[n[r]]);r++);return e},explode:(t,e)=>ct(t)?t:""===t?[]:Ta(t.split(e||","),ic),_addCacheSuffix:t=>{const e=ue.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},cs=(t,e,n=Wr)=>t.exists(r=>n(r,e)),La=(t,e,n=Wr)=>hn(t,e,n).getOr(t.isNone()&&e.isNone()),hn=(t,e,n)=>t.isSome()&&e.isSome()?E.some(n(t.getOrDie(),e.getOrDie())):E.none(),ds=(t,e)=>t?E.some(e):E.none(),lu=typeof window<"u"?window:Function("return this;")(),lc=(t,e)=>((n,r)=>{let o=r??lu;for(let s=0;s<n.length&&null!=o;++s)o=o[n[s]];return o})(t.split("."),e),cu=Object.getPrototypeOf,xe=t=>t.dom.nodeName.toLowerCase(),Ma=t=>t.dom.nodeType,qs=t=>e=>Ma(e)===t,$s=t=>An(t)&&(t=>{const e=lc("ownerDocument.defaultView",t);return Kt(t)&&((n=e,((r,o)=>{const s=lc(r,o);if(null==s)throw new Error(r+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(cu(t).constructor.name));var n})(t.dom),An=qs(1),Vn=qs(3),Pi=qs(9),uu=qs(11),qo=t=>e=>An(e)&&xe(e)===t,Li=(t,e,n)=>{if(!(Dt(n)||Pn(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Xe=(t,e,n)=>{Li(t.dom,e,n)},Ir=(t,e)=>{const n=t.dom;Ce(e,(r,o)=>{Li(n,o,r)})},Kn=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},Yr=(t,e)=>E.from(Kn(t,e)),Ws=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},d=(t,e)=>{t.dom.removeAttribute(e)},m=t=>pn(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),y=(t,e)=>{const n=Kn(t,e);return void 0===n||""===n?[]:n.split(" ")},w=t=>void 0!==t.dom.classList,N=t=>y(t,"class"),T=(t,e)=>((n,r,o)=>{const s=y(n,r).concat([o]);return Xe(n,r,s.join(" ")),!0})(t,"class",e),R=(t,e)=>((n,r,o)=>{const s=Ht(y(n,r),a=>a!==o);return s.length>0?Xe(n,r,s.join(" ")):d(n,r),!1})(t,"class",e),H=(t,e)=>{w(t)?t.dom.classList.add(e):T(t,e)},F=t=>{0===(w(t)?t.dom.classList:N(t)).length&&d(t,"class")},X=(t,e)=>{w(t)?t.dom.classList.remove(e):R(t,e),F(t)},et=(t,e)=>w(t)&&t.dom.classList.contains(e),at=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},J=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,t),new Error(r)}return at(n.childNodes[0])},ot=(t,e)=>{const n=(e||document).createElement(t);return at(n)},qt=(t,e)=>{const n=(e||document).createTextNode(t);return at(n)},O=at,Ue=(t,e)=>{const n=[],r=s=>(n.push(s),e(s));let o=e(t);do{o=o.bind(r)}while(o.isSome());return n},Te=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},br=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,ce=(t,e)=>t.dom===e.dom,fe=(t,e)=>{const n=t.dom,r=e.dom;return n!==r&&n.contains(r)},bo=t=>O(t.dom.ownerDocument),me=t=>Pi(t)?t:bo(t),Pe=t=>O(me(t).dom.defaultView),Tn=t=>E.from(t.dom.parentNode).map(O),us=t=>E.from(t.dom.parentElement).map(O),vr=(t,e)=>{const n=ge(e)?e:ve;let r=t.dom;const o=[];for(;null!=r.parentNode;){const s=r.parentNode,a=O(s);if(o.push(a),!0===n(a))break;r=s}return o},yr=t=>E.from(t.dom.previousSibling).map(O),Zn=t=>E.from(t.dom.nextSibling).map(O),Qr=t=>Kr(Ue(t,yr)),$o=t=>Ue(t,Zn),Ne=t=>ne(t.dom.childNodes,O),je=(t,e)=>E.from(t.dom.childNodes[e]).map(O),qe=t=>je(t,0),bn=t=>je(t,t.dom.childNodes.length-1),Fr=t=>t.dom.childNodes.length,vn=t=>uu(t)&&gt(t.dom.host),re=ge(Element.prototype.attachShadow)&&ge(Node.prototype.getRootNode),Ge=ht(re),Re=re?t=>O(t.dom.getRootNode()):me,Oe=t=>vn(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return O(n)})(me(t)),jr=t=>O(t.dom.host),Wo=t=>{if(Ge()&&gt(t.target)){const e=O(t.target);if(An(e)&&Ia(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Nn(n)}}return E.from(t.target)},Ia=t=>gt(t.dom.shadowRoot),cr=t=>{const e=Vn(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(r=>{const o=Re(r);return vn(o)?E.some(o):E.none()})(O(e)).fold(()=>n.body.contains(e),Ps(cr,jr))};var Fa=(t,e,n,r,o)=>t(n,r)?E.some(n):ge(o)&&o(n)?E.none():e(n,r,o);const Rn=(t,e,n)=>{let r=t.dom;const o=ge(n)?n:ve;for(;r.parentNode;){r=r.parentNode;const s=O(r);if(e(s))return E.some(s);if(o(s))break}return E.none()},vo=(t,e,n)=>Fa((r,o)=>o(r),Rn,t,e,n),Jr=(t,e,n)=>Rn(t,r=>Te(r,e),n),yo=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return br(o)?E.none():E.from(o.querySelector(n)).map(O)})(e,t),zr=(t,e,n)=>Fa((r,o)=>Te(r,o),Jr,t,e,n),Zr=(t,e=!1)=>{return cr(t)?t.dom.isContentEditable:(n=t,zr(n,"[contenteditable]")).fold(ht(e),r=>"true"===ja(r));var n},ja=t=>t.dom.contentEditable,Vo=t=>void 0!==t.style&&ge(t.style.getPropertyValue),za=(t,e,n)=>{if(!Dt(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Vo(t)&&t.style.setProperty(e,n)},Ha=(t,e,n)=>{za(t.dom,e,n)},Vs=(t,e)=>{const n=t.dom;Ce(e,(r,o)=>{za(n,o,r)})},B=(t,e)=>{const n=t.dom,r=window.getComputedStyle(n).getPropertyValue(e);return""!==r||cr(t)?r:W(n,e)},W=(t,e)=>Vo(t)?t.style.getPropertyValue(e):"",Z=(t,e)=>{const r=W(t.dom,e);return E.from(r).filter(o=>o.length>0)},rt=t=>{const e={},n=t.dom;if(Vo(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);e[o]=n.style[o]}return e},mt=(t,e)=>{var n,r;r=e,Vo(n=t.dom)&&n.style.removeProperty(r),cs(Yr(t,"style").map(Gr),"")&&d(t,"style")},Tt=(t,e)=>{Tn(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Bt=(t,e)=>{Zn(t).fold(()=>{Tn(t).each(n=>{Nt(n,e)})},n=>{Tt(n,e)})},Gt=(t,e)=>{qe(t).fold(()=>{Nt(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Nt=(t,e)=>{t.dom.appendChild(e.dom)},ye=(t,e)=>{Tt(t,e),Nt(e,t)},se=(t,e)=>{tt(e,n=>{Nt(t,n)})},ie=t=>{t.dom.textContent="",tt(Ne(t),e=>{$t(e)})},$t=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},ee=t=>{const e=Ne(t);var n,r;e.length>0&&(n=t,tt(r=e,(o,s)=>{Bt(0===s?n:r[s-1],o)})),$t(t)},Ye=t=>ne(t,O),yn=t=>t.dom.innerHTML,Qe=(t,e)=>{const n=bo(t).dom,r=O(n.createDocumentFragment()),o=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,Ne(O(i))})(e,n);se(r,o),ie(t),Nt(t,r)},tr=(t,e,n,r)=>{t.dom.removeEventListener(e,n,r)},dr=(t,e)=>({left:t,top:e,translate:(n,r)=>dr(t+n,e+r)}),_e=dr,Hr=(t,e)=>void 0!==t?t:void 0!==e?e:0,er=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?_e(n.offsetLeft,n.offsetTop):cr(t)?(r=>{const o=r.getBoundingClientRect();return _e(o.left,o.top)})(e):_e(0,0)},fs=t=>{const e=void 0!==t?t.dom:document;return _e(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Mi=(t,e,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(t,e)},Ii=(t,e)=>{_n().browser.isSafari()&&ge(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},cc=(t,e,n,r)=>({x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}),ug=t=>{const e=void 0===t?window:t,r=fs(O(e.document));return(o=>{const s=void 0===o?window:o;return _n().browser.isFirefox()?E.none():E.from(s.visualViewport)})(e).fold(()=>{const o=e.document.documentElement;return cc(r.left,r.top,o.clientWidth,o.clientHeight)},o=>cc(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},fg=(t,e)=>{let n=[];return tt(Ne(t),r=>{e(r)&&(n=n.concat([r])),n=n.concat(fg(r,e))}),n},Cn=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return br(o)?[]:ne(o.querySelectorAll(n),O)})(e,t),mg=(t,e,n)=>Jr(t,e,n).isSome();class tn{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,r,o){if(e){if(!o&&e[n])return e[n];if(e!==this.rootNode){let s=e[r];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[r],s)return s}}}findPreviousNode(e,n){if(e){const r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let s=r.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return r}const o=e.parentNode;if(o&&o!==this.rootNode)return o}}}const Ks=t=>e=>!!e&&e.nodeType===t,dc=t=>!!t&&!Object.getPrototypeOf(t),wt=Ks(1),Fi=t=>{const e=t.toLowerCase();return n=>gt(n)&&n.nodeName.toLowerCase()===e},to=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return Ot(e,r)}return!1}},uc=(t,e)=>{const n=e.toLowerCase().split(" ");return r=>{if(wt(r)){const o=r.ownerDocument.defaultView;if(o)for(let s=0;s<n.length;s++){const a=o.getComputedStyle(r,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},pg=t=>e=>wt(e)&&e.hasAttribute(t),Xs=t=>wt(t)&&t.hasAttribute("data-mce-bogus"),Ko=t=>wt(t)&&"TABLE"===t.tagName,gg=t=>e=>!(!wt(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),fu=to(["textarea","input"]),lt=Ks(3),tk=Ks(4),ek=Ks(7),ms=Ks(8),ji=Ks(9),mu=Ks(11),Le=Fi("br"),hg=Fi("img"),eo=gg("true"),Ae=gg("false"),fc=to(["td","th"]),nk=to(["td","th","caption"]),Co=to(["video","audio","object","embed"]),rk=Fi("li"),bg=Fi("details"),ok=Fi("summary"),on="\xa0",pu=t=>"\ufeff"===t,gu=((t,e)=>{const n=r=>t(r)?E.from(r.dom.nodeValue):E.none();return{get:r=>{if(!t(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!t(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(Vn),mc=t=>gu.get(t),vg=t=>gu.getOption(t),sk=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),ps=t=>{let e;return n=>(e=e||En(t,Be),Zt(e,xe(n)))},Cr=ps(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),pc=t=>An(t)&&!Cr(t),Gs=t=>An(t)&&"br"===xe(t),yg=ps(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),hu=ps(["ul","ol","dl"]),Hi=ps(["li","dd","dt"]),ak=ps(["thead","tbody","tfoot"]),Ui=ps(["td","th"]),gc=ps(["pre","script","textarea","style"]),ik=ps(sk),lk=t=>ik(t)||pc(t),qi=()=>{const t=ot("br");return Xe(t,"data-mce-bogus","1"),t},gs=t=>{ie(t),Nt(t,qi())},ck=t=>{bn(t).each(e=>{yr(e).each(n=>{Cr(t)&&Gs(e)&&Cr(n)&&$t(e)})})},fn="\ufeff",hc=pu,ur=t=>t.replace(/\uFEFF/g,""),dk=wt,Ua=lt,qa=t=>(Ua(t)&&(t=t.parentNode),dk(t)&&t.hasAttribute("data-mce-caret")),hs=t=>Ua(t)&&hc(t.data),xr=t=>qa(t)||hs(t),Cg=t=>t.firstChild!==t.lastChild||!Le(t.firstChild),bu=t=>{const e=t.container();return!!lt(e)&&(e.data.charAt(t.offset())===fn||t.isAtStart()&&hs(e.previousSibling))},vu=t=>{const e=t.container();return!!lt(e)&&(e.data.charAt(t.offset()-1)===fn||t.isAtEnd()&&hs(e.nextSibling))},bc=t=>Ua(t)&&t.data[0]===fn,vc=t=>Ua(t)&&t.data[t.data.length-1]===fn,yu=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const r=e.getElementsByTagName("br"),o=r[r.length-1];Xs(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,xg=t=>qa(t.startContainer),wg=eo,uk=Ae,fk=Le,mk=lt,pk=to(["script","style","textarea"]),Sg=to(["img","input","textarea","hr","iframe","video","audio","object","embed"]),gk=to(["table"]),hk=xr,Ur=t=>!hk(t)&&(mk(t)?!pk(t.parentNode):Sg(t)||fk(t)||gk(t)||Cu(t)),Cu=t=>{return!(wt(e=t)&&"true"===e.getAttribute("unselectable"))&&uk(t);var e},kg=(t,e)=>Ur(t)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(Cu(o))return!1;if(wg(o))return!0}return!0})(t,e),bk=/^[ \t\r\n]*$/,bs=t=>bk.test(t),vk=t=>{for(const e of t)if(!pu(e))return!1;return!0},Eg=t=>"\n"===t||"\r"===t,Ng=(t,e=4,n=!0,r=!0)=>{const o=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,o);var l;return pn(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===on?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&r||(u=i.str.length+1)<(c=s).length&&u>=0&&Eg(c[u])?{pcIsSpace:!1,str:i.str+on}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Eg(l),str:i.str+l};var c,u},{pcIsSpace:!1,str:""}).str},yc=(t,e)=>{return Ur(t)&&(r=e,!(lt(n=t)&&bs(n.data)&&!((o,s)=>{const a=O(s),i=O(o);return mg(i,"pre,code",kt(ce,a))})(n,r)))||(n=>wt(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||yk(t);var n,r},yk=pg("data-mce-bookmark"),Ck=pg("data-mce-bogus"),xk=t=>wt(t)&&"all"===t.getAttribute("data-mce-bogus"),$e=(t,e=!0)=>((n,r)=>{let o=0;if(yc(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const a=new tn(s,n);do{if(r){if(xk(s)){s=a.next(!0);continue}if(Ck(s)){s=a.next();continue}}if(Le(s))o++,s=a.next();else{if(yc(s,n))return!1;s=a.next()}}while(s);return o<=1}})(t.dom,e),Cc="data-mce-block",xu=t=>{return(e=t,Ht(Ke(e),n=>!/[A-Z]/.test(n))).join(",");var e},_g=(t,e)=>gt(e.querySelector(t))?(e.setAttribute(Cc,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(Cc),!1),Ag=(t,e)=>{const n=xu(t.getTransparentElements()),r=xu(t.getBlockElements());return Ht(e.querySelectorAll(n),o=>_g(r,o))},Tg=(t,e)=>{var n;const r=e?"lastChild":"firstChild";for(let o=t[r];o;o=o[r])if($e(O(o)))return void(null===(n=o.parentNode)||void 0===n||n.removeChild(o))},wu=(t,e)=>{const n=Ag(t,e);var r,o,s;((t,e,n)=>{const r=t.getBlockElements(),o=O(e),s=i=>xe(i)in r,a=i=>ce(i,o);tt(Ye(n),i=>{Rn(i,s,a).each(l=>{const c=Ht(Ne(i),p=>s(p)&&!t.isValidChild(xe(l),xe(p)));if(c.length>0){const u=us(l);tt(c,f=>{Rn(f,s,a).each(p=>{((b,g)=>{const v=document.createRange(),h=b.parentNode;if(h){v.setStartBefore(b),v.setEndBefore(g);const C=v.extractContents();Tg(C,!0),v.setStartAfter(g),v.setEndAfter(b);const S=v.extractContents();Tg(S,!1),$e(O(C))||h.insertBefore(C,b),$e(O(g))||h.insertBefore(g,b),$e(O(S))||h.insertBefore(S,b),h.removeChild(b)}})(p.dom,f.dom)})}),u.each(f=>Ag(t,f.dom))}})})})(t,e,n),r=t,o=e,s=n,tt([...s,...Ys(r,o)?[o]:[]],a=>tt(Cn(O(a),a.nodeName.toLowerCase()),i=>{kk(r,i.dom)&&ee(i)}))},Sk=(t,e)=>{if(Eu(t,e)){const n=xu(t.getBlockElements());_g(n,e)}},Su=t=>t.hasAttribute(Cc),ku=(t,e)=>Zt(t.getTransparentElements(),e),Eu=(t,e)=>wt(e)&&ku(t,e.nodeName),Ys=(t,e)=>Eu(t,e)&&Su(e),kk=(t,e)=>Eu(t,e)&&!Su(e),Nu=(t,e)=>1===e.type&&ku(t,e.name)&&Dt(e.attr(Cc)),Ek=_n().browser,Rg=t=>He(t,An),Og=(t,e)=>t.children&&Ot(t.children,e),Dg=(t,e={})=>{let n=0;const r={},o=O(t),s=me(o),a=l=>new Promise((c,u)=>{let f;const p=dt._addCacheSuffix(l),b=ke(r,p).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));r[p]=b,b.count++;const g=(k,A)=>{tt(k,Un),b.status=A,b.passed=[],b.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},v=()=>g(b.passed,2),h=()=>g(b.failed,3);if(c&&b.passed.push(c),u&&b.failed.push(u),1===b.status)return;if(2===b.status)return void v();if(3===b.status)return void h();b.status=1;const C=ot("link",s.dom);var S;Ir(C,{rel:"stylesheet",type:"text/css",id:b.id}),e.contentCssCors&&Xe(C,"crossOrigin","anonymous"),e.referrerPolicy&&Xe(C,"referrerpolicy",e.referrerPolicy),f=C.dom,f.onload=v,f.onerror=h,S=C,Nt(Oe(o),S),Xe(C,"href",p)}),i=l=>{const c=dt._addCacheSuffix(l);ke(r,c).each(u=>{0==--u.count&&(delete r[c],(f=>{const p=Oe(o);yo(p,"#"+f).each($t)})(u.id))})};return{load:a,loadAll:l=>Promise.allSettled(ne(l,c=>a(c).then(ht(c)))).then(c=>{const u=Vr(c,f=>"fulfilled"===f.status);return u.fail.length>0?Promise.reject(ne(u.fail,f=>f.reason)):ne(u.pass,f=>f.value)}),unload:i,unloadAll:l=>{tt(l,c=>{i(c)})},_setReferrerPolicy:l=>{e.referrerPolicy=l},_setContentCssCors:l=>{e.contentCssCors=l}}},Bg=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const r=Re(e).dom;return E.from(t.get(r)).getOrThunk(()=>{const o=Dg(r,n);return t.set(r,o),o})}}})(),Pg=(t,e)=>gt(t)&&(yc(t,e)||pc(O(t))),Lg=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),_u=(t,e,n)=>{var r;const o=n||e;if(wt(e)&&Lg(e))return e;const s=e.childNodes;for(let a=s.length-1;a>=0;a--)_u(t,s[a],o);if(wt(e)){const a=e.childNodes;1===a.length&&Lg(a[0])&&(null===(r=e.parentNode)||void 0===r||r.insertBefore(a[0],e))}return mu(a=e)||ji(a)||yc(e,o)||(a=>!!wt(a)&&a.childNodes.length>0)(e)||((a,i)=>lt(a)&&a.data.length>0&&((l,c)=>{const u=new tn(l,c).prev(!1),f=new tn(l,c).next(!1),p=De(u)||Pg(u,c),b=De(f)||Pg(f,c);return p&&b})(a,i))(e,o)||t.remove(e),e;var a},Nk=dt.makeMap,xc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_k=/[<>&\"\']/g,Ak=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Tk={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Qs={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Rk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Mg=(t,e)=>{const n={};if(t){const r=t.split(",");e=e||10;for(let o=0;o<r.length;o+=2){const s=String.fromCharCode(parseInt(r[o],e));if(!Qs[s]){const a="&"+r[o+1]+";";n[s]=a,n[a]=s}}return n}},Au=Mg("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ig=(t,e)=>t.replace(e?xc:wc,n=>Qs[n]||n),Fg=(t,e)=>t.replace(e?xc:wc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Qs[n]||"&#"+n.charCodeAt(0)+";"),Tu=(t,e,n)=>{const r=n||Au;return t.replace(e?xc:wc,o=>Qs[o]||r[o]||o)},vs={encodeRaw:Ig,encodeAllRaw:t=>(""+t).replace(_k,e=>Qs[e]||e),encodeNumeric:Fg,encodeNamed:Tu,getEncodeFunc:(t,e)=>{const n=Mg(e)||Au,r=Nk(t.replace(/\+/g,","));return r.named&&r.numeric?(o,s)=>o.replace(s?xc:wc,a=>void 0!==Qs[a]?Qs[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):r.named?e?(o,s)=>Tu(o,s,n):Tu:r.numeric?Fg:Ig},decode:t=>t.replace(Ak,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):Tk[n]||String.fromCharCode(n):Rk[e]||Au[e]||(r=>{const o=ot("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(e))},xn=(t,e)=>(t=dt.trim(t))?t.split(e||" "):[],jg=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),Sc={},$i=dt.makeMap,no=dt.each,Ru=dt.extend,zg=dt.explode,Hg=(t,e={})=>{const n=$i(t," ",$i(t.toUpperCase()," "));return Ru(n,e)},Ug=t=>Hg("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Ou=(t,e)=>{if(t){const n={};return Dt(t)&&(t={"*":t}),no(t,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===e?$i(r,/[, ]/):zg(r,/[, ]/)}),n}},ys=(t={})=>{var e;const n={},r={};let o=[];const s={},a={},i=(q,st,ut)=>{const pt=t[q];if(pt)return $i(pt,/[, ]/,$i(pt.toUpperCase(),/[, ]/));{let bt=Sc[q];return bt||(bt=Hg(st,ut),Sc[q]=bt),bt}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(q=>{const{globalAttributes:st,phrasingContent:ut,flowContent:pt}=(pe=>{let jn,Je,Me,zn;return jn="id accesskey class dir lang style tabindex title role",Je="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",Me="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==pe&&(jn+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",Je+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",Me+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==pe&&(jn+=" xml:lang",Me=[Me,"acronym applet basefont big font strike tt"].join(" "),Je=[Je,"center dir isindex noframes"].join(" "),zn=[Je,Me].join(" ")),zn=zn||[Je,Me].join(" "),{globalAttributes:jn,blockContent:Je,phrasingContent:Me,flowContent:zn}})(q),bt={},ft=(pe,jn="",Je="")=>{const Me=xn(Je),zn=xn(pe);let Rr=zn.length;for(;Rr--;){const mn=xn([st,jn].join(" "));bt[zn[Rr]]={attributes:En(mn,ht({})),attributesOrder:mn,children:En(Me,ht({}))}}},jt=(pe,jn)=>{const Je=xn(pe),Me=xn(jn);let zn=Je.length;for(;zn--;){const Rr=bt[Je[zn]];for(let mn=0,Zo=Me.length;mn<Zo;mn++)Rr.attributes[Me[mn]]={},Rr.attributesOrder.push(Me[mn])}};return"html5-strict"!==q&&(tt(xn("acronym applet basefont big font strike tt"),pe=>{ft(pe,"",ut)}),tt(xn("center dir isindex noframes"),pe=>{ft(pe,"",pt)})),ft("html","manifest","head body"),ft("head","","base command link meta noscript script style title"),ft("title hr noscript br"),ft("base","href target"),ft("link","href rel media hreflang type sizes hreflang"),ft("meta","name http-equiv content charset"),ft("style","media type scoped"),ft("script","src async defer type charset"),ft("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",pt),ft("dd div","",pt),ft("address dt caption","","html4"===q?ut:pt),ft("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",ut),ft("blockquote","cite",pt),ft("ol","reversed start type","li"),ft("ul","","li"),ft("li","value",pt),ft("dl","","dt dd"),ft("a","href target rel media hreflang type","html4"===q?ut:pt),ft("q","cite",ut),ft("ins del","cite datetime",pt),ft("img","src sizes srcset alt usemap ismap width height"),ft("iframe","src name width height",pt),ft("embed","src type width height"),ft("object","data type typemustmatch name usemap form width height",[pt,"param"].join(" ")),ft("param","name value"),ft("map","name",[pt,"area"].join(" ")),ft("area","alt coords shape href target rel media hreflang type"),ft("table","border","caption colgroup thead tfoot tbody tr"+("html4"===q?" col":"")),ft("colgroup","span","col"),ft("col","span"),ft("tbody thead tfoot","","tr"),ft("tr","","td th"),ft("td","colspan rowspan headers",pt),ft("th","colspan rowspan headers scope abbr",pt),ft("form","accept-charset action autocomplete enctype method name novalidate target",pt),ft("fieldset","disabled form name",[pt,"legend"].join(" ")),ft("label","form for",ut),ft("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ft("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===q?pt:ut),ft("select","disabled form multiple name required size","option optgroup"),ft("optgroup","disabled label","option"),ft("option","disabled label selected value"),ft("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ft("menu","type label",[pt,"li"].join(" ")),ft("noscript","",pt),"html4"!==q&&(ft("wbr"),ft("ruby","",[ut,"rt rp"].join(" ")),ft("figcaption","",pt),ft("mark rt rp summary bdi","",ut),ft("canvas","width height",pt),ft("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[pt,"track source"].join(" ")),ft("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[pt,"track source"].join(" ")),ft("picture","","img source"),ft("source","src srcset type media sizes"),ft("track","kind src srclang label default"),ft("datalist","",[ut,"option"].join(" ")),ft("article section nav aside main header footer","",pt),ft("hgroup","","h1 h2 h3 h4 h5 h6"),ft("figure","",[pt,"figcaption"].join(" ")),ft("time","datetime",ut),ft("dialog","open",pt),ft("command","type label icon disabled checked radiogroup command"),ft("output","for form name",ut),ft("progress","value max",ut),ft("meter","value min max low high optimum",ut),ft("details","open",[pt,"summary"].join(" ")),ft("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==q&&(jt("script","language xml:space"),jt("style","xml:space"),jt("object","declare classid code codebase codetype archive standby align border hspace vspace"),jt("embed","align name hspace vspace"),jt("param","valuetype type"),jt("a","charset name rev shape coords"),jt("br","clear"),jt("applet","codebase archive code object alt name width height align hspace vspace"),jt("img","name longdesc align border hspace vspace"),jt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),jt("font basefont","size color face"),jt("input","usemap align"),jt("select"),jt("textarea"),jt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),jt("ul","type compact"),jt("li","type"),jt("ol dl menu dir","compact"),jt("pre","width xml:space"),jt("hr","align noshade size width"),jt("isindex","prompt"),jt("table","summary width frame rules cellspacing cellpadding align bgcolor"),jt("col","width align char charoff valign"),jt("colgroup","width align char charoff valign"),jt("thead","align char charoff valign"),jt("tr","align char charoff valign bgcolor"),jt("th","axis align char charoff valign nowrap bgcolor width height"),jt("form","accept"),jt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),jt("tfoot","align char charoff valign"),jt("tbody","align char charoff valign"),jt("area","nohref"),jt("body","background bgcolor text link vlink alink")),"html4"!==q&&(jt("input button select textarea","autofocus"),jt("input textarea","placeholder"),jt("a","download"),jt("link script img","crossorigin"),jt("img","loading"),jt("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==q&&tt([bt.video,bt.audio],pe=>{delete pe.children.audio,delete pe.children.video}),tt(xn("a form meter progress dfn"),pe=>{bt[pe]&&delete bt[pe].children[pe]}),delete bt.caption.children.table,delete bt.script,bt})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const u=Ou(t.valid_styles),f=Ou(t.invalid_styles,"map"),p=Ou(t.valid_classes,"map"),b=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),C="td th iframe video audio object script code",S=i("non_empty_elements",C+" pre",v),k=i("move_caret_before_on_enter_elements",C+" table",v),A=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),_=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",A),D=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),I=i("transparent_elements","a ins del canvas map");no("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),q=>{a[q]=new RegExp("</"+q+"[^>]*>","gi")});const j=q=>{const st=E.from(n["@"]),ut=/[*?+]/;tt(((pt,bt)=>{const ft=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Ve(xn(bt,","),jt=>{const pe=ft.exec(jt);if(pe){const jn=pe[1],Je=pe[2],Me=pe[3],zn=pe[4],Rr=pe[5],mn={attributes:{},attributesOrder:[]};if(pt.each(Zo=>{return co=mn,Ce((nn=Zo).attributes,(Do,Bs)=>{co.attributes[Bs]=Do}),void co.attributesOrder.push(...nn.attributesOrder);var nn,co}),"#"===jn?mn.paddEmpty=!0:"-"===jn&&(mn.removeEmpty=!0),"!"===zn&&(mn.removeEmptyAttrs=!0),Rr&&((Zo,nn)=>{const co=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Do=/[*?+]/,{attributes:Bs,attributesOrder:yi}=nn;tt(xn(Zo,"|"),nu=>{const ts=co.exec(nu);if(ts){const es={},Ci=ts[1],mr=ts[2].replace(/[\\:]:/g,":"),Or=ts[3],Bo=ts[4];if("!"===Ci&&(nn.attributesRequired=nn.attributesRequired||[],nn.attributesRequired.push(mr),es.required=!0),"-"===Ci)return delete Bs[mr],void yi.splice(dt.inArray(yi,mr),1);if(Or&&("="===Or?(nn.attributesDefault=nn.attributesDefault||[],nn.attributesDefault.push({name:mr,value:Bo}),es.defaultValue=Bo):"~"===Or?(nn.attributesForced=nn.attributesForced||[],nn.attributesForced.push({name:mr,value:Bo}),es.forcedValue=Bo):"<"===Or&&(es.validValues=dt.makeMap(Bo,"?"))),Do.test(mr)){const Kl=es;nn.attributePatterns=nn.attributePatterns||[],Kl.pattern=jg(mr),nn.attributePatterns.push(Kl)}else Bs[mr]||yi.push(mr),Bs[mr]=es}})})(Rr,mn),Me&&(mn.outputName=Je),"@"===Je){if(!pt.isNone())return[];pt=E.some(mn)}return[Me?{name:Je,element:mn,aliasName:Me}:{name:Je,element:mn}]}return[]})})(st,q??""),({name:pt,element:bt,aliasName:ft})=>{if(ft&&(n[ft]=bt),ut.test(pt)){const jt=bt;jt.pattern=jg(pt),o.push(jt)}else n[pt]=bt})},U=q=>{o=[],tt(Ke(n),st=>{delete n[st]}),j(q)},K=q=>{delete Sc.text_block_elements,delete Sc.block_elements,tt((st=>{const ut=/^(~)?(.+)$/;return Ve(xn(st,","),pt=>{const bt=ut.exec(pt);if(bt){const ft="~"===bt[1];return[{inline:ft,cloneName:ft?"span":"div",name:bt[2]}]}return[]})})(q??""),({inline:st,name:ut,cloneName:pt})=>{if(r[ut]=r[pt],s[ut]=pt,S[ut.toUpperCase()]={},S[ut]={},st||(_[ut.toUpperCase()]={},_[ut]={}),!n[ut]){let bt=n[pt];bt=Ru({},bt),delete bt.removeEmptyAttrs,delete bt.removeEmpty,n[ut]=bt}Ce(r,(bt,ft)=>{bt[pt]&&(r[ft]=bt=Ru({},r[ft]),bt[ut]=bt[pt])})})},P=q=>{tt((st=>{const ut=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Ve(xn(st,","),pt=>{const bt=ut.exec(pt);if(bt){const ft=bt[1];return[{operation:ft?(pe=ft,"-"===pe?"remove":"add"):"replace",name:bt[2],validChildren:xn(bt[3],"|")}]}var pe;return[]})})(q??""),({operation:st,name:ut,validChildren:pt})=>{const bt="replace"===st?{"#comment":{}}:r[ut];tt(pt,ft=>{"remove"===st?delete bt[ft]:bt[ft]={}}),r[ut]=bt})},L=q=>{const st=n[q];if(st)return st;let ut=o.length;for(;ut--;){const pt=o[ut];if(pt.pattern.test(q))return pt}};t.valid_elements?(U(t.valid_elements),no(c,(q,st)=>{r[st]=q.children})):(no(c,(q,st)=>{n[st]={attributes:q.attributes,attributesOrder:q.attributesOrder},r[st]=q.children}),no(xn("strong/b em/i"),q=>{const st=xn(q,"/");n[st[1]].outputName=st[0]}),no(D,(q,st)=>{n[st]&&(t.padd_empty_block_inline_children&&(n[st].paddInEmptyBlock=!0),n[st].removeEmpty=!0)}),no(xn("ol ul blockquote a table tbody"),q=>{n[q]&&(n[q].removeEmpty=!0)}),no(xn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),q=>{n[q]&&(n[q].paddEmpty=!0)}),no(xn("span"),q=>{n[q].removeEmptyAttrs=!0})),K(t.custom_elements),P(t.valid_children),j(t.extended_valid_elements),P("+ol[ul|ol],+ul[ul|ol]"),no({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(q,st)=>{n[st]&&(n[st].parentsRequired=xn(q))}),t.invalid_elements&&no(zg(t.invalid_elements),q=>{n[q]&&delete n[q]}),L("span")||j("span[!data-mce-type|*]");const $=ht(u),Q=ht(f),vt=ht(p),it=ht(h),Rt=ht(_),Et=ht(A),Ut=ht(D),Wt=ht(Object.seal(v)),xt=ht(g),Ft=ht(S),Xt=ht(k),M=ht(b),z=ht(I),Y=ht(Object.seal(a)),nt=ht(s);return{type:l,children:r,elements:n,getValidStyles:$,getValidClasses:vt,getBlockElements:Rt,getInvalidStyles:Q,getVoidElements:Wt,getTextBlockElements:Et,getTextInlineElements:Ut,getBoolAttrs:it,getElementRule:L,getSelfClosingElements:xt,getNonEmptyElements:Ft,getMoveCaretBeforeOnEnterElements:Xt,getWhitespaceElements:M,getTransparentElements:z,getSpecialElements:Y,isValidChild:(q,st)=>{const ut=r[q.toLowerCase()];return!(!ut||!ut[st.toLowerCase()])},isValid:(q,st)=>{const ut=L(q);if(ut){if(!st)return!0;{if(ut.attributes[st])return!0;const pt=ut.attributePatterns;if(pt){let bt=pt.length;for(;bt--;)if(pt[bt].pattern.test(st))return!0}}}return!1},getCustomElements:nt,addValidElements:j,setValidElements:U,addCustomElements:K,addValidChildren:P}},Du=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let f=0;f<c.length;f++)s[c[f]]="\ufeff"+f,s["\ufeff"+f]=c[f];const u={parse:f=>{const p={};let b=!1;const g=t.url_converter,v=t.url_converter_scope||u,h=(K,P,L)=>{const $=p[K+"-top"+P];if(!$)return;const Q=p[K+"-right"+P];if(!Q)return;const vt=p[K+"-bottom"+P];if(!vt)return;const it=p[K+"-left"+P];if(!it)return;const Rt=[$,Q,vt,it];let Et=Rt.length-1;for(;Et--&&Rt[Et]===Rt[Et+1];);Et>-1&&L||(p[K+P]=-1===Et?Rt[0]:Rt.join(" "),delete p[K+"-top"+P],delete p[K+"-right"+P],delete p[K+"-bottom"+P],delete p[K+"-left"+P])},C=K=>{const P=p[K];if(!P)return;const L=P.indexOf(",")>-1?[P]:P.split(" ");let $=L.length;for(;$--;)if(L[$]!==L[0])return!1;return p[K]=L[0],!0},S=K=>(b=!0,s[K]),k=(K,P)=>(b&&(K=K.replace(/\uFEFF[0-9]/g,L=>s[L])),P||(K=K.replace(/\\([\'\";:])/g,"$1")),K),A=K=>String.fromCharCode(parseInt(K.slice(1),16)),_=K=>K.replace(/\\[0-9a-f]+/gi,A),D=(K,P,L,$,Q,vt)=>{if(Q=Q||vt)return"'"+(Q=k(Q)).replace(/\'/g,"\\'")+"'";if(P=k(P||L||$||""),!t.allow_script_urls){const it=P.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(it)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(it))return""}return g&&(P=g.call(v,P,"style")),"url('"+P.replace(/\'/g,"\\'")+"')"};if(f){let K;for(f=(f=f.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,S).replace(/\"[^\"]+\"|\'[^\']+\'/g,P=>P.replace(/[;:]/g,S));K=r.exec(f);){r.lastIndex=K.index+K[0].length;let P=K[1].replace(o,"").toLowerCase(),L=K[2].replace(o,"");if(P&&L){if(P=_(P),L=_(L),-1!==P.indexOf("\ufeff")||-1!==P.indexOf('"')||!t.allow_script_urls&&("behavior"===P||/expression\s*\(|\/\*|\*\//.test(L)))continue;"font-weight"===P&&"700"===L?L="bold":"color"!==P&&"background-color"!==P||(L=L.toLowerCase()),L=L.replace(n,D),p[P]=b?k(L,!0):L}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),j="border-style",U="border-color",C(I="border-width")&&C(j)&&C(U)&&(p.border=p[I]+" "+p[j]+" "+p[U],delete p[I],delete p[j],delete p[U]),"medium none"===p.border&&delete p.border,"none"===p["border-image"]&&delete p["border-image"]}var I,j,U;return p},serialize:(f,p)=>{let b="";const g=(v,h)=>{const C=h[v];if(C)for(let S=0,k=C.length;S<k;S++){const A=C[S],_=f[A];_&&(b+=(b.length>0?" ":"")+A+": "+_+";")}};return p&&a?(g("*",a),g(p,a)):Ce(f,(v,h)=>{v&&((C,S)=>{if(!i||!S)return!0;let k=i["*"];return!(k&&k[C]||(k=i[S],k&&k[C]))})(h,p)&&(b+=(b.length>0?" ":"")+h+": "+v+";")}),b}};return u},Ok={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},qg=(t,e)=>{const n=e??{};for(const r in t)Zt(Ok,r)||(n[r]=t[r]);return gt(t.composedPath)&&(n.composedPath=()=>t.composedPath()),gt(t.getModifierState)&&(n.getModifierState=r=>t.getModifierState(r)),n},Bu=(t,e,n,r)=>{var o;const s=qg(e,r);return s.type=t,be(s.target)&&(s.target=null!==(o=s.srcElement)&&void 0!==o?o:n),(be((a=e).preventDefault)||(i=a)instanceof Event||ge(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Be,ge(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Be,ge(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Be,s.stopPropagation()},(a=>a.isDefaultPrevented===Be||a.isDefaultPrevented===ve)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Be:ve,s.isPropagationStopped=!0===s.cancelBubble?Be:ve,s.isImmediatePropagationStopped=ve)),s;var a,i},Dk=/^(?:mouse|contextmenu)|click/,Pu=(t,e,n,r)=>{t.addEventListener(e,n,r||!1)},kc=(t,e,n,r)=>{t.removeEventListener(e,n,r||!1)},Wi=(t,e)=>{const n=Bu(t.type,t,document,e);if(gt(r=t)&&Dk.test(r.type)&&De(t.pageX)&&!De(t.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,s=r.body,a=n;a.pageX=t.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}var r;return n},Bk=(t,e,n)=>{const r=t.document,o={type:"ready"};if(n.domLoaded)return void e(o);const s=()=>{kc(t,"DOMContentLoaded",s),kc(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(o)),t=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?s():Pu(t,"DOMContentLoaded",s),n.domLoaded||Pu(t,"load",s)};class Js{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,r,o){const s=this;let a;const i=window,l=p=>{s.executeHandlers(Wi(p||i.event),c)};if(!e||lt(e)||ms(e))return r;let c;e[s.expando]?c=e[s.expando]:(c=s.count++,e[s.expando]=c,s.events[c]={}),o=o||e;const u=n.split(" ");let f=u.length;for(;f--;){let p=u[f],b=l,g=!1,v=!1;"DOMContentLoaded"===p&&(p="ready"),s.domLoaded&&"ready"===p&&"complete"===e.readyState?r.call(o,Wi({type:p})):(s.hasFocusIn||"focusin"!==p&&"focusout"!==p||(g=!0,v="focusin"===p?"focus":"blur",b=h=>{const C=Wi(h||i.event);C.type="focus"===C.type?"focusin":"focusout",s.executeHandlers(C,c)}),a=s.events[c][p],a?"ready"===p&&s.domLoaded?r(Wi({type:p})):a.push({func:r,scope:o}):(s.events[c][p]=a=[{func:r,scope:o}],a.fakeName=v,a.capture=g,a.nativeHandler=b,"ready"===p?Bk(e,b,s):Pu(e,v||p,b,g)))}return e=a=null,r}unbind(e,n,r){if(!e||lt(e)||ms(e))return this;const o=e[this.expando];if(o){let s=this.events[o];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(r){let u=c.length;for(;u--;)if(c[u].func===r){const f=c.nativeHandler,p=c.fakeName,b=c.capture,g=c.slice(0,u).concat(c.slice(u+1));g.nativeHandler=f,g.fakeName=p,g.capture=b,s[l]=g}}r&&0!==c.length||(delete s[l],kc(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else Ce(s,(a,i)=>{kc(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(Zt(s,a))return this;delete this.events[o];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,r){return this.dispatch(e,n,r)}dispatch(e,n,r){if(!e||lt(e)||ms(e))return this;const o=Wi({type:n,target:e},r);do{const s=e[this.expando];s&&this.executeHandlers(o,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}clean(e){if(!e||lt(e)||ms(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let r=n.length;for(;r--;)(e=n[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const r=this.events[n],o=r&&r[e.type];if(o)for(let s=0,a=o.length;s<a;s++){const i=o[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Js.Event=new Js;const Lu=dt.each,Pk=dt.grep,Mu="data-mce-style",Lk=dt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Vi=(t,e,n)=>{be(n)||""===n?d(t,e):Xe(t,e,n)},$g=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),$a=(t,e)=>{let n=0;if(t)for(let r=t.nodeType,o=t.previousSibling;o;o=o.previousSibling){const s=o.nodeType;(!e||!lt(o)||s!==r&&o.data.length)&&(n++,r=s)}return n},Wg=(t,e)=>{const n=Kn(e,"style"),r=t.serialize(t.parse(n),xe(e));Vi(e,Mu,r)},Vg=(t,e,n)=>{const r=$g(e);var o,s;be(n)||""===n?mt(t,r):Ha(t,r,(s=r,x(o=n)?Zt(Lk,s)?o+"":o+"px":o))},we=(t,e={})=>{const n={},r=window,o={};let s=0;const a=Bg.forElement(O(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:ys({}),c=Du({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),u=e.ownEvents?new Js:Js.Event,f=l.getBlockElements(),p=M=>M&&t&&Dt(M)?t.getElementById(M):M,b=M=>{const z=p(M);return gt(z)?O(z):null},g=(M,z,Y="")=>{let nt;const q=b(M);if(gt(q)&&An(q)){const st=Xt[z];nt=st&&st.get?st.get(q.dom,z):Kn(q,z)}return gt(nt)?nt:Y},v=M=>{const z=p(M);return be(z)?[]:z.attributes},h=(M,z,Y)=>{j(M,nt=>{if(wt(nt)){const q=O(nt),st=""===Y?null:Y,ut=Kn(q,z),pt=Xt[z];pt&&pt.set?pt.set(q.dom,st,z):Vi(q,z,st),ut!==st&&e.onSetAttrib&&e.onSetAttrib({attrElm:q.dom,attrName:z,attrValue:st})}})},C=()=>e.root_element||t.body,S=(M,z)=>((Y,nt,q)=>{let st=0,ut=0;const pt=Y.ownerDocument;if(q=q||Y,nt){if(q===Y&&nt.getBoundingClientRect&&"static"===B(O(Y),"position")){const ft=nt.getBoundingClientRect();return st=ft.left+(pt.documentElement.scrollLeft||Y.scrollLeft)-pt.documentElement.clientLeft,ut=ft.top+(pt.documentElement.scrollTop||Y.scrollTop)-pt.documentElement.clientTop,{x:st,y:ut}}let bt=nt;for(;bt&&bt!==q&&bt.nodeType&&!Og(bt,q);)st+=bt.offsetLeft||0,ut+=bt.offsetTop||0,bt=bt.offsetParent;for(bt=nt.parentNode;bt&&bt!==q&&bt.nodeType&&!Og(bt,q);)st-=bt.scrollLeft||0,ut-=bt.scrollTop||0,bt=bt.parentNode;ut+=(ft=O(nt),Ek.isFirefox()&&"table"===xe(ft)?Rg(Ne(ft)).filter(jt=>"caption"===xe(jt)).bind(jt=>Rg($o(jt)).map(pe=>pe.dom.offsetTop<=jt.dom.offsetTop?-jt.dom.offsetHeight:0)).getOr(0):0)}var ft;return{x:st,y:ut}})(t.body,p(M),z),k=(M,z,Y)=>{const nt=p(M);if(!be(nt)&&wt(nt))return Y?B(O(nt),$g(z)):("float"===(z=z.replace(/-(\D)/g,(q,st)=>st.toUpperCase()))&&(z="cssFloat"),nt.style?nt.style[z]:void 0)},A=M=>{const z=p(M);if(!z)return{w:0,h:0};let Y=k(z,"width"),nt=k(z,"height");return Y&&-1!==Y.indexOf("px")||(Y="0"),nt&&-1!==nt.indexOf("px")||(nt="0"),{w:parseInt(Y,10)||z.offsetWidth||z.clientWidth,h:parseInt(nt,10)||z.offsetHeight||z.clientHeight}},_=(M,z)=>{if(!M)return!1;const Y=ct(M)?M:[M];return Se(Y,nt=>Te(O(nt),z))},D=(M,z,Y,nt)=>{const q=[];let st=p(M);nt=void 0===nt;const ut=Y||("BODY"!==C().nodeName?C().parentNode:null);if(Dt(z))if("*"===z)z=wt;else{const pt=z;z=bt=>_(bt,pt)}for(;st&&!(st===ut||be(st.nodeType)||ji(st)||mu(st));){if(!z||z(st)){if(!nt)return[st];q.push(st)}st=st.parentNode}return nt?q:null},I=(M,z,Y)=>{let nt=z;if(M){Dt(z)&&(nt=q=>_(q,z));for(let q=M[Y];q;q=q[Y])if(ge(nt)&&nt(q))return q}return null},j=function(M,z,Y){const nt=Y??this;if(ct(M)){const q=[];return Lu(M,(st,ut)=>{const pt=p(st);pt&&q.push(z.call(nt,pt,ut))}),q}{const q=p(M);return!!q&&z.call(nt,q)}},U=(M,z)=>{j(M,Y=>{Ce(z,(nt,q)=>{h(Y,q,nt)})})},K=(M,z)=>{j(M,Y=>{const nt=O(Y);Qe(nt,z)})},P=(M,z,Y,nt,q)=>j(M,st=>{const ut=Dt(z)?t.createElement(z):z;return gt(Y)&&U(ut,Y),nt&&(!Dt(nt)&&nt.nodeType?ut.appendChild(nt):Dt(nt)&&K(ut,nt)),q?ut:st.appendChild(ut)}),L=(M,z,Y)=>P(t.createElement(M),M,z,Y,!0),$=vs.encodeAllRaw,Q=(M,z)=>j(M,Y=>{const nt=O(Y);return z&&tt(Ne(nt),q=>{Vn(q)&&0===q.dom.length?$t(q):Tt(nt,q)}),$t(nt),nt.dom}),vt=(M,z,Y)=>{j(M,nt=>{if(wt(nt)){const q=O(nt),st=z.split(" ");tt(st,ut=>{var pt,bt,jt,pe;gt(Y)?(Y?H:X)(q,ut):(bt=ut,w(pt=q)?pt.dom.classList.toggle(bt):(pe=bt,Ot(N(jt=pt),pe)?R(jt,pe):T(jt,pe)),F(pt))})}})},it=(M,z,Y)=>j(z,nt=>{var q;const st=ct(z)?M.cloneNode(!0):M;return Y&&Lu(Pk(nt.childNodes),ut=>{st.appendChild(ut)}),null===(q=nt.parentNode)||void 0===q||q.replaceChild(st,nt),nt}),Rt=M=>{if(wt(M)){const z="a"===M.nodeName.toLowerCase()&&!g(M,"href")&&g(M,"id");if(g(M,"name")||g(M,"data-mce-bookmark")||z)return!0}return!1},Et=()=>t.createRange(),Ut=(M,z,Y,nt)=>{if(ct(M)){let q=M.length;const st=[];for(;q--;)st[q]=Ut(M[q],z,Y,nt);return st}return!e.collect||M!==t&&M!==r||i.push([M,z,Y,nt]),u.bind(M,z,Y,nt||Ft)},Wt=(M,z,Y)=>{if(ct(M)){let nt=M.length;const q=[];for(;nt--;)q[nt]=Wt(M[nt],z,Y);return q}if(i.length>0&&(M===t||M===r)){let nt=i.length;for(;nt--;){const[q,st,ut]=i[nt];M!==q||z&&z!==st||Y&&Y!==ut||u.unbind(q,st,ut)}}return u.unbind(M,z,Y)},xt=M=>{if(M&&wt(M)){const z=M.getAttribute("data-mce-contenteditable");return z&&"inherit"!==z?z:"inherit"!==M.contentEditable?M.contentEditable:null}return null},Ft={doc:t,settings:e,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:u,isBlock:M=>Dt(M)?Zt(f,M):wt(M)&&(Zt(f,M.nodeName)||Ys(l,M)),root:null,clone:(M,z)=>M.cloneNode(z),getRoot:C,getViewPort:M=>{const z=ug(M);return{x:z.x,y:z.y,w:z.width,h:z.height}},getRect:M=>{const z=p(M),Y=S(z),nt=A(z);return{x:Y.x,y:Y.y,w:nt.w,h:nt.h}},getSize:A,getParent:(M,z,Y)=>{const nt=D(M,z,Y,!1);return nt&&nt.length>0?nt[0]:null},getParents:D,get:p,getNext:(M,z)=>I(M,z,"nextSibling"),getPrev:(M,z)=>I(M,z,"previousSibling"),select:(M,z)=>{var Y,nt;const q=null!==(nt=null!==(Y=p(z))&&void 0!==Y?Y:e.root_element)&&void 0!==nt?nt:t;return ge(q.querySelectorAll)?un(q.querySelectorAll(M)):[]},is:_,add:P,create:L,createHTML:(M,z,Y="")=>{let nt="<"+M;for(const q in z)gn(z,q)&&(nt+=" "+q+'="'+$(z[q])+'"');return is(Y)&&Zt(l.getVoidElements(),M)?nt+" />":nt+">"+Y+"</"+M+">"},createFragment:M=>{const z=t.createElement("div"),Y=t.createDocumentFragment();let nt;for(Y.appendChild(z),M&&(z.innerHTML=M);nt=z.firstChild;)Y.appendChild(nt);return Y.removeChild(z),Y},remove:Q,setStyle:(M,z,Y)=>{j(M,nt=>{const q=O(nt);Vg(q,z,Y),e.update_styles&&Wg(c,q)})},getStyle:k,setStyles:(M,z)=>{j(M,Y=>{const nt=O(Y);Ce(z,(q,st)=>{Vg(nt,st,q)}),e.update_styles&&Wg(c,nt)})},removeAllAttribs:M=>j(M,z=>{const Y=z.attributes;for(let nt=Y.length-1;nt>=0;nt--)z.removeAttributeNode(Y.item(nt))}),setAttrib:h,setAttribs:U,getAttrib:g,getPos:S,parseStyle:M=>c.parse(M),serializeStyle:(M,z)=>c.serialize(M,z),addStyle:M=>{if(Ft!==we.DOM&&t===document){if(n[M])return;n[M]=!0}let z=t.getElementById("mceDefaultStyles");if(!z){z=t.createElement("style"),z.id="mceDefaultStyles",z.type="text/css";const Y=t.head;Y.firstChild?Y.insertBefore(z,Y.firstChild):Y.appendChild(z)}z.styleSheet?z.styleSheet.cssText+=M:z.appendChild(t.createTextNode(M))},loadCSS:M=>{M||(M=""),tt(M.split(","),z=>{o[z]=!0,a.load(z).catch(At)})},addClass:(M,z)=>{vt(M,z,!0)},removeClass:(M,z)=>{vt(M,z,!1)},hasClass:(M,z)=>{const Y=b(M),nt=z.split(" ");return gt(Y)&&ar(nt,q=>et(Y,q))},toggleClass:vt,show:M=>{j(M,z=>mt(O(z),"display"))},hide:M=>{j(M,z=>Ha(O(z),"display","none"))},isHidden:M=>{const z=b(M);return gt(z)&&cs(Z(z,"display"),"none")},uniqueId:M=>(M||"mce_")+s++,setHTML:K,getOuterHTML:M=>{const z=b(M);return gt(z)?wt(z.dom)?z.dom.outerHTML:(Y=>{const nt=ot("div"),q=O(Y.dom.cloneNode(!0));return Nt(nt,q),yn(nt)})(z):""},setOuterHTML:(M,z)=>{j(M,Y=>{wt(Y)&&(Y.outerHTML=z)})},decode:vs.decode,encode:$,insertAfter:(M,z)=>{const Y=p(z);return j(M,nt=>{const q=Y?.parentNode,st=Y?.nextSibling;return q&&(st?q.insertBefore(nt,st):q.appendChild(nt)),nt})},replace:it,rename:(M,z)=>{if(M.nodeName!==z.toUpperCase()){const Y=L(z);return Lu(v(M),nt=>{h(Y,nt.nodeName,g(M,nt.nodeName))}),it(Y,M,!0),Y}return M},findCommonAncestor:(M,z)=>{let Y=M;for(;Y;){let nt=z;for(;nt&&Y!==nt;)nt=nt.parentNode;if(Y===nt)break;Y=Y.parentNode}return!Y&&M.ownerDocument?M.ownerDocument.documentElement:Y},run:j,getAttribs:v,isEmpty:(M,z,Y)=>{let nt=0;if(Rt(M))return!1;const q=M.firstChild;if(q){const st=new tn(q,M),ut=l?l.getWhitespaceElements():{},pt=z||(l?l.getNonEmptyElements():null);let bt=q;do{if(wt(bt)){const ft=bt.getAttribute("data-mce-bogus");if(ft){bt=st.next("all"===ft);continue}const jt=bt.nodeName.toLowerCase();if(pt&&pt[jt]){if("br"===jt){nt++,bt=st.next();continue}return!1}if(Rt(bt))return!1}if(ms(bt)||lt(bt)&&!bs(bt.data)&&(!Y?.includeZwsp||!vk(bt.data))||lt(bt)&&bt.parentNode&&ut[bt.parentNode.nodeName]&&bs(bt.data))return!1;bt=st.next()}while(bt)}return nt<=1},createRng:Et,nodeIndex:$a,split:(M,z,Y)=>{let nt,q,st=Et();if(M&&z&&M.parentNode&&z.parentNode){const ut=M.parentNode;return st.setStart(ut,$a(M)),st.setEnd(z.parentNode,$a(z)),nt=st.extractContents(),st=Et(),st.setStart(z.parentNode,$a(z)+1),st.setEnd(ut,$a(M)+1),q=st.extractContents(),ut.insertBefore(_u(Ft,nt),M),ut.insertBefore(Y||z,M),ut.insertBefore(_u(Ft,q),M),Q(M),Y||z}},bind:Ut,unbind:Wt,fire:(M,z,Y)=>u.dispatch(M,z,Y),dispatch:(M,z,Y)=>u.dispatch(M,z,Y),getContentEditable:xt,getContentEditableParent:M=>{const z=C();let Y=null;for(let nt=M;nt&&nt!==z&&(Y=xt(nt),null===Y);nt=nt.parentNode);return Y},isEditable:M=>{if(gt(M)){const z=wt(M)?M:M.parentElement;return gt(z)&&Zr(O(z))}return!1},destroy:()=>{if(i.length>0){let M=i.length;for(;M--;){const[z,Y,nt]=i[M];u.unbind(z,Y,nt)}}Ce(o,(M,z)=>{a.unload(z),delete o[z]})},isChildOf:(M,z)=>M===z||z.contains(M),dumpRng:M=>"startContainer: "+M.startContainer.nodeName+", startOffset: "+M.startOffset+", endContainer: "+M.endContainer.nodeName+", endOffset: "+M.endOffset},Xt=((M,z,Y)=>{const nt=z.keep_values,st={style:{set:(ut,pt)=>{const bt=O(ut);nt&&Vi(bt,Mu,pt),d(bt,"style"),Dt(pt)&&Vs(bt,M.parse(pt))},get:ut=>{const pt=O(ut),bt=Kn(pt,Mu)||Kn(pt,"style");return M.serialize(M.parse(bt),xe(pt))}}};return nt&&(st.href=st.src={set:(ut,pt,bt)=>{const ft=O(ut);ge(z.url_converter)&&gt(pt)&&(pt=z.url_converter.call(z.url_converter_scope||Y(),String(pt),bt,ut)),Vi(ft,"data-mce-"+bt,pt),Vi(ft,bt,pt)},get:(ut,pt)=>{const bt=O(ut);return Kn(bt,"data-mce-"+pt)||Kn(bt,pt)}}),st})(c,e,ht(Ft));return Ft};we.DOM=we(document),we.nodeIndex=$a;const Mk=we.DOM;class Xo{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,r)=>{const o=Mk;let s;const a=()=>{o.remove(i),s&&(s.onerror=s.onload=s=null)},i=o.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=dt._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:r,reject:o})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(l,c)=>{ke(n.scriptLoadedCallbacks,c).each(u=>{tt(u,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},o=l=>{const c=Ht(l,u=>"rejected"===u.status);return c.length>0?Promise.reject(Ve(c,({reason:u})=>ct(u)?u:[u])):Promise.resolve()},s=l=>Promise.allSettled(ne(l,c=>2===n.states[c]?(r("resolve",c),Promise.resolve()):3===n.states[c]?(r("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,r("resolve",c);const u=n.queue;return u.length>0?(n.queue=[],s(u).then(o)):Promise.resolve()},()=>(n.states[c]=3,r("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return E.from(u).each(Un),o(c)})),i=Mn(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,c)})}):a(i)}}Xo.ScriptLoader=new Xo;const sn=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},Ki={},Iu=sn("en"),Kg=()=>ke(Ki,Iu.get()),ro={getData:()=>Io(Ki,t=>({...t})),setCode:t=>{t&&Iu.set(t)},getCode:()=>Iu.get(),add:(t,e)=>{let n=Ki[t];n||(Ki[t]=n={});const r=ne(Ke(e),o=>o.toLowerCase());Ce(e,(o,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const c=i.indexOf(l);return-1!==c&&i.indexOf(l,c+1)>c})(r,a)?(Zt(e,a)||(n[a]=o),n[s]=o):n[a]=o})},translate:t=>{const e=Kg().getOr({}),n=i=>ge(i)?Object.prototype.toString.call(i):r(i)?"":""+i,r=i=>""===i||null==i,o=i=>{const l=n(i);return Zt(e,l)?n(e[l]):ke(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(r(t))return"";if(Kt(a=t)&&Zt(a,"raw"))return n(t.raw);var a,i;if(ct(i=t)&&i.length>1){const i=t.slice(1);return s(o(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>Zt(i,c)?n(i[c]):l))}return s(o(t))},isRtl:()=>Kg().bind(t=>ke(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>Zt(Ki,t)},In=()=>{const t=[],e={},n={},r=[],o=(l,c)=>{const u=Ht(r,f=>f.name===l&&f.state===c);tt(u,f=>f.resolve())},s=l=>Zt(e,l),a=(l,c)=>{const u=ro.getCode();!u||c&&-1===(","+(c||"")+",").indexOf(","+u+",")||Xo.ScriptLoader.add(e[l]+"/langs/"+u+".js")},i=(l,c="added")=>"added"===c&&Zt(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(u=>{r.push({name:l,state:c,resolve:u})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==In.languageLoad&&(s(l)?a(l,c):i(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},o(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>Dt(c)?Dt(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let u=Dt(c)?c:c.prefix+c.resource+c.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=In.baseURL+"/"+u),e[l]=u.substring(0,u.lastIndexOf("/"));const f=()=>(o(l,"loaded"),Promise.resolve());return n[l]?f():Xo.ScriptLoader.add(u).then(f)},waitFor:i}};In.languageLoad=!0,In.baseURL="",In.PluginManager=In(),In.ThemeManager=In(),In.ModelManager=In();const Ik=t=>{const e=sn(E.none()),n=()=>e.get().each(r=>clearInterval(r));return{clear:()=>{n(),e.set(E.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:r=>{n(),e.set(E.some(setInterval(r,t)))}}},Cs=()=>{const t=(e=>{const n=sn(E.none()),r=()=>n.get().each(e);return{clear:()=>{r(),n.set(E.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(E.some(o))}}})(At);return{...t,on:e=>t.get().each(e)}},Ec=(t,e)=>{let n=null;return{cancel:()=>{Qt(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Qt(n)&&(n=setTimeout(()=>{n=null,t.apply(null,r)},e))}}},Fu=(t,e)=>{let n=null;const r=()=>{Qt(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,t.apply(null,o)},e)}}},Xi=ht("mce-annotation"),Zs=ht("data-mce-annotation"),Wa=ht("data-mce-annotation-uid"),Gi=ht("data-mce-annotation-active"),Yi=ht("data-mce-annotation-classes"),Qi=ht("data-mce-annotation-attrs"),Xg=t=>e=>ce(e,t),Gg=(t,e)=>{const n=t.selection.getRng(),r=O(n.startContainer),o=O(t.getBody()),s=e.fold(()=>"."+Xi(),i=>`[${Zs()}="${i}"]`),a=je(r,n.startOffset).getOr(r);return zr(a,s,Xg(o)).bind(i=>Yr(i,`${Wa()}`).bind(l=>Yr(i,`${Zs()}`).map(c=>{const u=Qg(t,l);return{uid:l,name:c,elements:u}})))},Yg=(t,e)=>Ws(t,"data-mce-bogus")||mg(t,'[data-mce-bogus="all"]',Xg(e)),Qg=(t,e)=>{const n=O(t.getBody()),r=Cn(n,`[${Wa()}="${e}"]`);return Ht(r,o=>!Yg(o,n))},Jg=(t,e)=>{const n=O(t.getBody()),r=Cn(n,`[${Zs()}="${e}"]`),o={};return tt(r,s=>{if(!Yg(s,n)){const a=Kn(s,Wa()),i=ke(o,a).getOr([]);o[a]=i.concat([s])}}),o};let Zg=0;const Ji=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Zg++,t+"_"+n+Zg+String(e)},th=(t,e)=>O(t.dom.cloneNode(e)),ta=t=>th(t,!1),eh=t=>th(t,!0),nh=(t,e,n=ve)=>{const r=new tn(t,e),o=s=>{let a;do{a=r[s]()}while(a&&!lt(a)&&!n(a));return E.from(a).filter(lt)};return{current:()=>E.from(r.current()).filter(lt),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},ea=(t,e)=>{const n=e||(o=>t.isBlock(o)||Le(o)||Ae(o)),r=(o,s,a,i)=>{if(lt(o)){const l=i(o,s,o.data);if(-1!==l)return E.some({container:o,offset:l})}return a().bind(l=>r(l.container,l.offset,a,i))};return{backwards:(o,s,a,i)=>{const l=nh(o,i??t.getRoot(),n);return r(o,s,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(o,s,a,i)=>{const l=nh(o,i??t.getRoot(),n);return r(o,s,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},Va=Math.round,na=t=>t?{left:Va(t.left),top:Va(t.top),bottom:Va(t.bottom),right:Va(t.right),width:Va(t.width),height:Va(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},rh=(t,e)=>(t=na(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),oh=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,Zi=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&oh(e.top-t.bottom,t,e)},tl=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&oh(e.bottom-t.top,t,e),sh=(t,e,n)=>{const r=Math.max(Math.min(e,t.left+t.width),t.left),o=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-r)*(e-r)+(n-o)*(n-o))},Nc=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},xs=(t,e)=>{if(wt(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},Fk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),ah=t=>Dt(t)&&t.charCodeAt(0)>=768&&Fk.test(t),ih=wt,jk=Ur,lh=uc("display","block table"),zk=uc("float","left right"),el=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(ih,jk,Po(zk)),Hk=Po(uc("white-space","pre pre-line pre-wrap")),nl=lt,ju=Le,ch=we.nodeIndex,_c=(t,e)=>e<0&&wt(t)&&t.hasChildNodes()?void 0:xs(t,e),zu=t=>t?t.createRange():we.DOM.createRng(),Hu=t=>Dt(t)&&/[\r\n\t ]/.test(t),dh=t=>!!t.setStart&&!!t.setEnd,Uu=t=>{const e=t.startContainer,n=t.startOffset;if(Hu(t.toString())&&Hk(e.parentNode)&&lt(e)){const r=e.data;if(Hu(r[n-1])||Hu(r[n+1]))return!0}return!1},uh=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,ws=t=>{var e;let n;const r=t.getClientRects();return n=na(r.length>0?r[0]:t.getBoundingClientRect()),!dh(t)&&ju(t)&&uh(n)?(o=>{const s=o.ownerDocument,a=zu(s),i=s.createTextNode(on),l=o.parentNode;l.insertBefore(i,o),a.setStart(i,0),a.setEnd(i,1);const c=na(a.getBoundingClientRect());return l.removeChild(i),c})(t):uh(n)&&dh(t)&&null!==(e=(o=>{const a=o.endContainer,i=o.startOffset,l=o.endOffset;if(o.startContainer===a&&lt(a)&&0===i&&1===l){const c=o.cloneRange();return c.setEndAfter(a),ws(c)}return null})(t))&&void 0!==e?e:n},ra=(t,e)=>{const n=rh(t,e);return n.width=1,n.right=n.left+1,n},G=(t,e,n)=>{const r=()=>(n||(n=(o=>{const s=[],a=u=>{var f,p;0!==u.height&&(s.length>0&&(f=u).left===(p=s[s.length-1]).left&&f.top===p.top&&f.bottom===p.bottom&&f.right===p.right||s.push(u))},i=(u,f)=>{const p=zu(u.ownerDocument);if(f<u.data.length){if(ah(u.data[f]))return;if(ah(u.data[f-1])&&(p.setStart(u,f),p.setEnd(u,f+1),!Uu(p)))return void a(ra(ws(p),!1))}f>0&&(p.setStart(u,f-1),p.setEnd(u,f),Uu(p)||a(ra(ws(p),!1))),f<u.data.length&&(p.setStart(u,f),p.setEnd(u,f+1),Uu(p)||a(ra(ws(p),!0)))},l=o.container(),c=o.offset();if(nl(l))return i(l,c),s;if(ih(l))if(o.isAtEnd()){const u=_c(l,c);nl(u)&&i(u,u.data.length),el(u)&&!ju(u)&&a(ra(ws(u),!1))}else{const u=_c(l,c);if(nl(u)&&i(u,0),el(u)&&o.isAtEnd())return a(ra(ws(u),!1)),s;const f=_c(o.container(),o.offset()-1);el(f)&&!ju(f)&&(lh(f)||lh(u)||!el(u))&&a(ra(ws(f),!1)),el(u)&&a(ra(ws(u),!0))}return s})(G(t,e))),n);return{container:ht(t),offset:ht(e),toRange:()=>{const o=zu(t.ownerDocument);return o.setStart(t,e),o.setEnd(t,e),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(nl(t),0===e),isAtEnd:()=>nl(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:o=>o&&t===o.container()&&e===o.offset(),getNode:o=>_c(t,o?e-1:e)}};G.fromRangeStart=t=>G(t.startContainer,t.startOffset),G.fromRangeEnd=t=>G(t.endContainer,t.endOffset),G.after=t=>G(t.parentNode,ch(t)+1),G.before=t=>G(t.parentNode,ch(t)),G.isAbove=(t,e)=>hn(Nn(e.getClientRects()),go(t.getClientRects()),Zi).getOr(!1),G.isBelow=(t,e)=>hn(go(e.getClientRects()),Nn(t.getClientRects()),tl).getOr(!1),G.isAtStart=t=>!!t&&t.isAtStart(),G.isAtEnd=t=>!!t&&t.isAtEnd(),G.isTextPosition=t=>!!t&&lt(t.container()),G.isElementPosition=t=>!G.isTextPosition(t);const Ac=(t,e)=>{lt(e)&&0===e.data.length&&t.remove(e)},qu=(t,e,n)=>{var r,s;mu(n)?((r,o,s)=>{const a=E.from(s.firstChild),i=E.from(s.lastChild);o.insertNode(s),a.each(l=>Ac(r,l.previousSibling)),i.each(l=>Ac(r,l.nextSibling))})(t,e,n):(r=t,e.insertNode(s=n),Ac(r,s.previousSibling),Ac(r,s.nextSibling))},oo=lt,fh=Xs,mh=we.nodeIndex,ph=t=>{const e=t.parentNode;return fh(e)?ph(e):e},$u=t=>t?Xr(t.childNodes,(e,n)=>(fh(n)&&"BR"!==n.nodeName?e=e.concat($u(n)):e.push(n),e),[]):[],gh=t=>e=>t===e,hh=t=>(oo(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,r;n=$u(ph(e)),r=Ra(n,gh(e),e),n=n.slice(0,r+1);const o=Xr(n,(s,a,i)=>(oo(a)&&oo(n[i-1])&&s++,s),0);return n=Br(n,to([e.nodeName])),r=Ra(n,gh(e),e),r-o})(t)+"]",bh=(t,e)=>{let n,r=[],o=e.container(),s=e.offset();if(oo(o))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&oo(c);)l+=c.data.length;return l})(o,s);else{const i=o.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",o=i[s]}r.push(hh(o));let a=((i,l,c)=>{const u=[];for(let f=l.parentNode;f&&f!==i;f=f.parentNode)u.push(f);return u})(t,o);return a=Br(a,Po(Xs)),r=r.concat(Ta(a,i=>hh(i))),r.reverse().join("/")+","+n},vh=(t,e)=>{if(!e)return null;const n=e.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",s=Xr(r,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((c,u,f)=>{let p=$u(c);return p=Br(p,(b,g)=>!oo(b)||!oo(p[g-1])),p=Br(p,to([u])),p[f]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!oo(s)&&s.parentNode){let a;return a="after"===o?mh(s)+1:mh(s),G(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;oo(l);){const u=l.data.length;if(i>=c&&i<=c+u){a=l,i-=c;break}if(!oo(l.nextSibling)){a=l,i=u;break}c+=u,l=l.nextSibling}return oo(a)&&i>a.data.length&&(i=a.data.length),G(a,i)})(s,parseInt(o,10))},Tc=Ae,yh=(t,e,n,r,o)=>{const s=o?r.startContainer:r.endContainer;let a=o?r.startOffset:r.endOffset;const i=[],l=t.getRoot();if(lt(s))i.push(n?((c,u,f)=>{let p=c(u.data.slice(0,f)).length;for(let b=u.previousSibling;b&&lt(b);b=b.previousSibling)p+=c(b.data).length;return p})(e,s,a):a);else{let c=0;const u=s.childNodes;a>=u.length&&u.length&&(c=1,a=Math.max(0,u.length-1)),i.push(t.nodeIndex(u[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(t.nodeIndex(c,n));return i},Wu=(t,e,n)=>{let r=0;return dt.each(t.select(e),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},Ch=(t,e)=>{let n=e?t.startContainer:t.endContainer,r=e?t.startOffset:t.endOffset;if(wt(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(e?r:r-1,o.length-1)],n&&(r=e?0:n.childNodes.length,e?t.setStart(n,r):t.setEnd(n,r))}},xh=t=>(Ch(t,!0),Ch(t,!1),t),wh=(t,e)=>{if(wt(t)&&(t=xs(t,e),Tc(t)))return t;if(xr(t)){lt(t)&&qa(t)&&(t=t.parentNode);let n=t.previousSibling;if(Tc(n)||(n=t.nextSibling,Tc(n)))return n}},Sh=(t,e,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Tc(r)){const a=r.nodeName;return{name:a,index:Wu(n.dom,a,r)}}const s=wh((a=o).startContainer,a.startOffset)||wh(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:Wu(n.dom,a,s)}}return((a,i,l,c)=>{const u=i.dom,f=yh(u,a,l,c,!0),p=i.isForward(),b=xg(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:f,forward:p,...b}:{start:f,end:yh(u,a,l,c,!1),forward:p,...b}})(t,n,e,o)},kh=(t,e,n)=>{const r={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",r,"&#xFEFF;"):t.create("span",r)},Eh=(t,e)=>{const n=t.dom;let r=t.getRng();const o=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:Wu(n,i,a)};const c=xh(r.cloneRange());if(!s){c.collapse(!1);const f=kh(n,o+"_end",e);qu(n,c,f)}r=xh(r),r.collapse(!0);const u=kh(n,o+"_start",e);return qu(n,r,u),t.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},Vu=kt(Sh,de,!0),Nh=t=>{const e=s=>s(t),n=ht(t),r=()=>o,o={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:Be,isError:ve,map:s=>Gn.value(s(t)),mapError:r,bind:e,exists:e,forall:e,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:s=>{s(t)},toOptional:()=>E.some(t)};return o},_h=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,o)=>r(t),isValue:ve,isError:Be,map:e,mapError:r=>Gn.error(r(t)),bind:e,exists:ve,forall:Be,getOr:de,or:de,getOrThunk:fo,orThunk:fo,getOrDie:sr(String(t)),each:At,toOptional:E.none};return n},Gn={value:Nh,error:_h,fromOption:(t,e)=>t.fold(()=>_h(e),Nh)},xo=t=>{if(!ct(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return tt(t,(r,o)=>{const s=Ke(r);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!ct(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...u)=>{if(u.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+u.length);return u[o].apply(null,l)},match:u=>{const f=Ke(u);if(e.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+f.join(","));if(!ar(e,p=>Ot(f,p)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+"\nRequired: "+e.join(", "));return u[a].apply(null,l)},log:u=>{console.log(u,{constructors:e,constructor:a,params:l})}}}}),n};xo([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Uk=t=>"inline-command"===t.type||"inline-format"===t.type,qk=t=>"block-command"===t.type||"block-format"===t.type,$k=t=>{const e=r=>Gn.error({message:r,pattern:t}),n=(r,o,s)=>{if(void 0!==t.format){let a;if(ct(t.format)){if(!ar(t.format,Dt))return e(r+" pattern has non-string items in the `format` array");a=t.format}else{if(!Dt(t.format))return e(r+" pattern has non-string `format` parameter");a=[t.format]}return Gn.value(o(a))}return void 0!==t.cmd?Dt(t.cmd)?Gn.value(s(t.cmd,t.value)):e(r+" pattern has non-string `cmd` parameter"):e(r+" pattern is missing both `format` and `cmd` parameters")};if(!Kt(t))return e("Raw pattern is not an object");if(!Dt(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!Dt(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let r=t.start,o=t.end;return 0===o.length&&(o=r,r=""),n("Inline",s=>({type:"inline-format",start:r,end:o,format:s}),(s,a)=>({type:"inline-command",start:r,end:o,cmd:s,value:a}))}return void 0!==t.replacement?Dt(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):Gn.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:t.start,format:r[0]}),(r,o)=>({type:"block-command",start:t.start,cmd:r,value:o}))},Ah=t=>Ht(t,qk),Th=t=>Ht(t,Uk),Rh=t=>{const e=(n=>{const r=[],o=[];return tt(n,s=>{s.fold(a=>{r.push(a)},a=>{o.push(a)})}),{errors:r,values:o}})(ne(t,$k));return tt(e.errors,n=>console.error(n.message,n.pattern)),e.values},Ku=_n().deviceType,Wk=Ku.isTouch(),Vk=we.DOM,Oh=t=>gr(t,RegExp),St=t=>e=>e.options.get(t),Xu=t=>Dt(t)||Kt(t),Dh=(t,e="")=>n=>{const r=Dt(n);if(r){if(-1!==n.indexOf("=")){const o=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return pn(a,(i,l)=>{const c=l.split("="),u=c[0],f=c.length>1?c[1]:u;return i[Gr(u)]=Gr(f),i},{})})(n);return{value:ke(o,t.id).getOr(e),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},Kk=St("iframe_attrs"),Xk=St("doctype"),Bh=St("document_base_url"),Gk=St("body_id"),Yk=St("body_class"),Ph=St("content_security_policy"),Qk=St("br_in_pre"),On=St("forced_root_block"),rl=St("forced_root_block_attrs"),Jk=St("newline_behavior"),Zk=St("br_newline_selector"),tE=St("no_newline_selector"),eE=St("keep_styles"),nE=St("end_container_on_empty_block"),Lh=St("automatic_uploads"),Mh=St("images_reuse_filename"),rE=St("images_replace_blob_uris"),Ih=St("icons"),oE=St("icons_url"),sE=St("images_upload_url"),aE=St("images_upload_base_path"),iE=St("images_upload_credentials"),lE=St("images_upload_handler"),cE=St("content_css_cors"),Gu=St("referrer_policy"),Fh=St("language"),dE=St("language_url"),jh=St("indent_use_margin"),uE=St("indentation"),fE=St("content_css"),mE=St("content_style"),zh=St("font_css"),pE=St("directionality"),gE=St("inline_boundaries_selector"),Hh=St("object_resizing"),hE=St("resize_img_proportional"),bE=St("placeholder"),Uh=St("event_root"),vE=St("service_message"),Ka=St("theme"),yE=St("theme_url"),Yu=St("model"),CE=St("model_url"),ol=St("inline_boundaries"),xE=St("formats"),wE=St("preview_styles"),SE=St("format_empty_lines"),kE=St("format_noneditable_selector"),EE=St("custom_ui_selector"),Qu=St("inline"),NE=St("hidden_input"),_E=St("submit_patch"),AE=St("add_form_submit_trigger"),TE=St("add_unload_trigger"),RE=St("custom_undo_redo_levels"),OE=St("disable_nodechange"),qh=St("readonly"),DE=St("editable_root"),$h=St("content_css_cors"),Rc=St("plugins"),BE=St("external_plugins"),PE=St("block_unsupported_drop"),LE=St("visual"),ME=St("visual_table_class"),Wh=St("visual_anchor_class"),IE=St("iframe_aria_text"),FE=St("setup"),jE=St("init_instance_callback"),zE=St("urlconverter_callback"),HE=St("auto_focus"),UE=St("browser_spellcheck"),qE=St("protect"),$E=St("paste_block_drop"),Oc=St("paste_data_images"),WE=St("paste_preprocess"),VE=St("paste_postprocess"),KE=St("newdocument_content"),XE=St("paste_webkit_styles"),GE=St("paste_remove_styles_if_webkit"),YE=St("paste_merge_formats"),QE=St("smart_paste"),JE=St("paste_as_text"),ZE=St("paste_tab_spaces"),tN=St("allow_html_data_urls"),eN=St("text_patterns"),nN=St("text_patterns_lookup"),Vh=St("noneditable_class"),rN=St("editable_class"),oN=St("noneditable_regexp"),sN=St("preserve_cdata"),aN=St("highlight_on_focus"),Ju=St("xss_sanitization"),iN=St("init_content_sync"),Kh=t=>dt.explode(t.options.get("images_file_types")),lN=St("table_tab_navigation"),cN=St("details_initial_state"),dN=St("details_serialized_state"),uN=wt,Xh=lt,Gh=t=>{const e=t.parentNode;e&&e.removeChild(t)},Yh=t=>{const e=ur(t);return{count:t.length-e.length,text:e}},Qh=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(fn));)t.deleteData(e,1)},Jh=(t,e)=>(oa(t),e),oa=t=>{uN(t)&&xr(t)&&(Cg(t)?t.removeAttribute("data-mce-caret"):Gh(t)),Xh(t)&&(Qh(t),0===t.data.length&&Gh(t))},mN=Ae,pN=Co,gN=fc,Zh=(t,e,n)=>{const r=rh(e.getBoundingClientRect(),n);let o,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;o=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();o=t.scrollLeft-i.left,s=t.scrollTop-i.top}r.left+=o,r.right+=o,r.top+=s,r.bottom+=s,r.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),r.left+=a,r.right+=a),r},t0=()=>ue.browser.isFirefox(),sl=t=>mN(t)||pN(t),al=t=>(sl(t)||Ko(t)&&t0())&&us(O(t)).exists(Zr),bN=eo,Zu=Ae,vN=Co,e0=uc("display","block table table-cell table-caption list-item"),n0=xr,r0=qa,yN=wt,CN=lt,xN=Ur,Xa=t=>t>0,sa=t=>t<0,Dc=(t,e)=>{let n;for(;n=t(e);)if(!r0(n))return n;return null},il=(t,e,n,r,o)=>{const s=new tn(t,r),a=Zu(t)||r0(t);let i;if(sa(e)){if(a&&(i=Dc(s.prev.bind(s),!0),n(i)))return i;for(;i=Dc(s.prev.bind(s),o);)if(n(i))return i}if(Xa(e)){if(a&&(i=Dc(s.next.bind(s),!0),n(i)))return i;for(;i=Dc(s.next.bind(s),o);)if(n(i))return i}return null},Ss=(t,e)=>{for(;t&&t!==e;){if(e0(t))return t;t=t.parentNode}return null},wo=(t,e,n)=>Ss(t.container(),n)===Ss(e.container(),n),tf=(t,e)=>{if(!e)return E.none();const n=e.container(),r=e.offset();return yN(n)?E.from(n.childNodes[r+t]):E.none()},o0=(t,e)=>{var n;const r=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),r},wN=(t,e,n)=>Ss(e,t)===Ss(n,t),s0=(t,e,n)=>{const r=t?"previousSibling":"nextSibling";let o=n;for(;o&&o!==e;){let s=o[r];if(s&&n0(s)&&(s=s[r]),Zu(s)||vN(s)){if(wN(e,s,o))return s;break}if(xN(s))break;o=o.parentNode}return null},ll=kt(o0,!0),cl=kt(o0,!1),ef=(t,e,n)=>{let r;const o=kt(s0,!0,e),s=kt(s0,!1,e),a=n.startContainer,i=n.startOffset;if(qa(a)){const l=CN(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if("before"===c&&(r=l.nextSibling,al(r)))return ll(r);if("after"===c&&(r=l.previousSibling,al(r)))return cl(r)}if(!n.collapsed)return n;if(lt(a)){if(n0(a)){if(1===t){if(r=s(a),r)return ll(r);if(r=o(a),r)return cl(r)}if(-1===t){if(r=o(a),r)return cl(r);if(r=s(a),r)return ll(r)}return n}if(vc(a)&&i>=a.data.length-1)return 1===t&&(r=s(a),r)?ll(r):n;if(bc(a)&&i<=1)return-1===t&&(r=o(a),r)?cl(r):n;if(i===a.data.length)return r=s(a),r?ll(r):n;if(0===i)return r=o(a),r?cl(r):n}return n},a0=(t,e)=>tf(t?0:-1,e).filter(Zu),dl=(t,e,n)=>{const r=ef(t,e,n);return-1===t?G.fromRangeStart(r):G.fromRangeEnd(r)},Bc=t=>E.from(t.getNode()).map(O),nf=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},Pc=(t,e)=>{const n=wo(t,e);return!(n||!Le(t.getNode()))||n};var an,t;(t=an||(an={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const SN=Ae,So=lt,i0=wt,rf=Le,Ga=Ur,l0=t=>{return Sg(t)||!!Cu(e=t)&&!pn(un(e.getElementsByTagName("*")),(n,r)=>n||wg(r),!1);var e},Lc=kg,c0=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,d0=(t,e)=>{if(Xa(t)){if(Ga(e.previousSibling)&&!So(e.previousSibling))return G.before(e);if(So(e))return G(e,0)}if(sa(t)){if(Ga(e.nextSibling)&&!So(e.nextSibling))return G.after(e);if(So(e))return G(e,e.data.length)}return sa(t)?rf(e)?G.before(e):G.after(e):G.before(e)},of=(t,e,n)=>{let r,o,s,a;if(!i0(n)||!e)return null;if(e.isEqual(G.after(n))&&n.lastChild){if(a=G.after(n.lastChild),sa(t)&&Ga(n.lastChild)&&i0(n.lastChild))return rf(n.lastChild)?G.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(So(i)){if(sa(t)&&l>0)return G(i,--l);if(Xa(t)&&l<i.length)return G(i,++l);r=i}else{if(sa(t)&&l>0&&(o=c0(i,l-1),Ga(o)))return!l0(o)&&(s=il(o,t,Lc,o),s)?So(s)?G(s,s.data.length):G.after(s):So(o)?G(o,o.data.length):G.before(o);if(Xa(t)&&l<i.childNodes.length&&(o=c0(i,l),Ga(o)))return rf(o)?((u,f)=>{const p=f.nextSibling;return p&&Ga(p)?So(p)?G(p,0):G.before(p):of(an.Forwards,G.after(f),u)})(n,o):!l0(o)&&(s=il(o,t,Lc,o),s)?So(s)?G(s,0):G.before(s):So(o)?G(o,0):G.after(o);r=o||a.getNode()}if(r&&(Xa(t)&&a.isAtEnd()||sa(t)&&a.isAtStart())&&(r=il(r,t,Be,n,!0),Lc(r,n)))return d0(t,r);o=r&&il(r,t,Lc,n);const c=Pr(Ht(((u,f)=>{const p=[];let b=u;for(;b&&b!==f;)p.push(b),b=b.parentNode;return p})(i,n),SN));return!c||o&&c.contains(o)?o?d0(t,o):null:(a=Xa(t)?G.after(c):G.before(c),a)},ko=t=>({next:e=>of(an.Forwards,e,t),prev:e=>of(an.Backwards,e,t)}),u0=t=>G.isTextPosition(t)?0===t.offset():Ur(t.getNode()),f0=t=>{if(G.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return Ur(t.getNode(!0))},m0=(t,e)=>!G.isTextPosition(t)&&!G.isTextPosition(e)&&t.getNode()===e.getNode(!0),wr=(t,e,n)=>{const r=ko(e);return E.from(t?r.next(n):r.prev(n))},Ya=(t,e,n)=>wr(t,e,n).bind(r=>{return wo(n,r,e)&&(s=n,a=r,t?!m0(s,a)&&(G.isTextPosition(i=s)||!Le(i.getNode()))&&f0(s)&&u0(a):!m0(a,s)&&u0(s)&&f0(a))?wr(t,e,r):E.some(r);var s,a,i}),p0=(t,e,n,r)=>Ya(t,e,n).bind(o=>r(o)?p0(t,e,o,r):E.some(o)),Qa=(t,e)=>{const n=t?e.firstChild:e.lastChild;return lt(n)?E.some(G(n,t?0:n.data.length)):n?Ur(n)?E.some(t?G.before(n):Le(r=n)?G.before(r):G.after(r)):((o,s,a)=>{const i=o?G.before(a):G.after(a);return wr(o,s,i)})(t,e,n):E.none();var r},Yn=kt(wr,!0),nr=kt(wr,!1),Dn=kt(Qa,!0),qr=kt(Qa,!1),sf="_mce_caret",$r=t=>wt(t)&&t.id===sf,aa=(t,e)=>{let n=e;for(;n&&n!==t;){if($r(n))return n;n=n.parentNode}return null},g0=t=>Zt(t,"name"),h0=t=>dt.isArray(t.start),Mc=t=>!(!g0(t)&&Pn(t.forward))||t.forward,b0=(t,e)=>(wt(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),kN=(t,e)=>qr(t).fold(ve,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),v0=(t,e,n)=>!(e.hasChildNodes()||!aa(t,e)||(((r,o)=>{var s;const a=(null!==(s=r.ownerDocument)&&void 0!==s?s:document).createTextNode(fn);r.appendChild(a),o.setStart(a,0),o.setEnd(a,0)})(e,n),0)),y0=(t,e,n,r)=>{const o=n[e?"start":"end"],s=t.getRoot();if(o){let a=s,i=o[0];for(let l=o.length-1;a&&l>=1;l--){const c=a.childNodes;if(v0(s,a,r))return!0;if(o[l]>c.length-1)return!!v0(s,a,r)||kN(a,r);a=c[o[l]]}lt(a)&&(i=Math.min(o[0],a.data.length)),wt(a)&&(i=Math.min(o[0],a.childNodes.length)),e?r.setStart(a,i):r.setEnd(a,i)}return!0},af=t=>lt(t)&&t.data.length>0,C0=(t,e,n)=>{const r=t.get(n.id+"_"+e),o=r?.parentNode,s=n.keep;if(r&&o){let a,i;if("start"===e?s?r.hasChildNodes()?(a=r.firstChild,i=1):af(r.nextSibling)?(a=r.nextSibling,i=0):af(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)+1):(a=o,i=t.nodeIndex(r)):s?r.hasChildNodes()?(a=r.firstChild,i=1):af(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)):(a=o,i=t.nodeIndex(r)),!s){const l=r.previousSibling,c=r.nextSibling;let u;for(dt.each(dt.grep(r.childNodes),f=>{lt(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});u=t.get(n.id+"_"+e);)t.remove(u,!0);if(lt(c)&&lt(l)&&!ue.browser.isOpera()){const f=l.data.length;l.appendData(c.data),t.remove(c),a=l,i=f}}return E.some(G(a,i))}return E.none()},EN=(t,e,n)=>((r,o,s=!1)=>{return 2===o?Sh(ur,s,r):3===o?(a=>{const i=a.getRng();return{start:bh(a.dom.getRoot(),G.fromRangeStart(i)),end:bh(a.dom.getRoot(),G.fromRangeEnd(i)),forward:a.isForward()}})(r):o?{rng:(a=r).getRng(),forward:a.isForward()}:Eh(r,!1);var a})(t,e,n),NN=(t,e)=>{((n,r)=>{const o=n.dom;if(r){if(h0(r))return((s,a)=>{const i=s.createRng();return y0(s,!0,a,i)&&y0(s,!1,a,i)?E.some({range:i,forward:Mc(a)}):E.none()})(o,r);if(Dt(r.start))return((s,a)=>{const i=E.from(vh(s.getRoot(),a.start)),l=E.from(vh(s.getRoot(),a.end));return hn(i,l,(c,u)=>{const f=s.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Mc(a)}})})(o,r);if(Zt(r,"id"))return((s,a)=>{const i=C0(s,"start",a),l=C0(s,"end",a);return hn(i,l.or(i),(c,u)=>{const f=s.createRng();return f.setStart(b0(s,c.container()),c.offset()),f.setEnd(b0(s,u.container()),u.offset()),{range:f,forward:Mc(a)}})})(o,r);if(g0(r))return((s,a)=>E.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(o,r);if((s=>Zt(s,"rng"))(r))return E.some({range:r.rng,forward:Mc(r)})}return E.none()})(t,e).each(({range:n,forward:r})=>{t.setRng(n,r)})},Sr=t=>wt(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Ic=(x0=on,t=>x0===t);var x0;const Ja=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),lf=t=>!Ja(t)&&!Ic(t)&&!pu(t),cf=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},_N=t=>{return{value:(n=cf(t.red)+cf(t.green)+cf(t.blue),ki(n,"#").toUpperCase())};var n},AN=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,TN=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,w0=(t,e,n,r)=>({red:t,green:e,blue:n,alpha:r}),S0=(t,e,n,r)=>{const o=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(r);return w0(o,s,a,i)},Fc=t=>(e=>{if("transparent"===e)return E.some(w0(0,0,0,0));const n=AN.exec(e);if(null!==n)return E.some(S0(n[1],n[2],n[3],"1"));const r=TN.exec(e);return null!==r?E.some(S0(r[1],r[2],r[3],r[4])):E.none()})(t).map(_N).map(e=>"#"+e.value).getOr(t),df=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},k0=(t,e)=>{const n=Cn(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Ht(Ve(t,s=>{const a=Nc(s);return a?[O(a)]:[]}),Ui)},Za=t=>k0(df(t.selection.getSel()),O(t.getBody())),ul=(t,e)=>Jr(t,"table",e),E0=t=>qe(t).fold(ht([t]),e=>[t].concat(E0(e))),uf=t=>bn(t).fold(ht([t]),e=>"br"===xe(e)?yr(e).map(n=>[t].concat(uf(n))).getOr([]):[t].concat(uf(e))),ff=(t,e)=>hn((n=>{const r=n.startContainer,o=n.startOffset;return lt(r)?0===o?E.some(O(r)):E.none():E.from(r.childNodes[o]).map(O)})(e),(n=>{const r=n.endContainer,o=n.endOffset;return lt(r)?o===r.data.length?E.some(O(r)):E.none():E.from(r.childNodes[o-1]).map(O)})(e),(n,r)=>{const o=He(E0(t),kt(ce,n)),s=He(uf(t),kt(ce,r));return o.isSome()&&s.isSome()}).getOr(!1),mf=(t,e,n,r)=>{const o=n,s=new tn(n,o),a=hr(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Ot(["td","th","table"],c.toLowerCase()));let i=n;do{if(lt(i)&&0!==dt.trim(i.data).length)return void(r?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(r?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=r?s.next():s.prev());"BODY"===o.nodeName&&(r?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},jc=t=>{const e=t.selection.getSel();return gt(e)&&e.rangeCount>0},pf=(t,e)=>{const n=Za(t);n.length>0?tt(n,r=>{const o=r.dom,s=t.dom.createRng();s.setStartBefore(o),s.setEndAfter(o),e(s,!0)}):e(t.selection.getRng(),!1)},N0=(t,e,n)=>{const r=Eh(t,e);n(r),t.moveToBookmark(r)},fl=t=>x(t?.nodeType),gf=t=>wt(t)&&!Sr(t)&&!$r(t)&&!Xs(t),ia=t=>!0===t.isContentEditable,_0=(t,e,n)=>{const{selection:r,dom:o}=t,s=r.getNode(),a=Ae(s);N0(r,!0,()=>{e()}),a&&Ae(s)&&o.isChildOf(s,t.getBody())?t.selection.select(s):n(r.getStart())&&RN(o,r)},RN=(t,e)=>{var n,r;const o=e.getRng(),{startContainer:s,startOffset:a}=o;if(!((i,l)=>{if(gf(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),u=parseInt(c,10);return!isNaN(u)&&u>0}return!1})(t,e.getNode())&&wt(s)){const i=s.childNodes,l=t.getRoot();let c;if(a<i.length){const u=i[a];c=new tn(u,null!==(n=t.getParent(u,t.isBlock))&&void 0!==n?n:l)}else{const u=i[i.length-1];c=new tn(u,null!==(r=t.getParent(u,t.isBlock))&&void 0!==r?r:l),c.next(!0)}for(let u=c.current();u;u=c.next()){if("false"===t.getContentEditable(u))return;if(lt(u)&&!bf(u))return o.setStart(u,0),void e.setRng(o)}}},A0=(t,e,n)=>{if(t){const r=e?"nextSibling":"previousSibling";for(t=n?t:t[r];t;t=t[r])if(wt(t)||!bf(t))return t}},hf=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Ys(t,e),ti=(t,e,n)=>t.schema.isValidChild(e,n),bf=(t,e=!1)=>{if(gt(t)&&lt(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return bs(n)}return!1},T0=(t,e)=>{const n=t.dom;return gf(e)&&"false"===n.getContentEditable(e)&&((r,o)=>{const s="[data-mce-cef-wrappable]",a=kE(r),i=is(a)?s:`${s},${a}`;return Te(O(o),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},ks=(t,e)=>ge(t)?t(e):(gt(e)&&(t=t.replace(/%(\w+)/g,(n,r)=>e[r]||n)),t),vf=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),yf=(t,e)=>{if(be(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=Fc(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},zc=(t,e,n)=>{const r=t.getStyle(e,n);return yf(r,n)},R0=(t,e)=>{let n;return t.getParent(e,r=>!!wt(r)&&(n=t.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},Hc=(t,e,n)=>t.getParents(e,n,t.getRoot()),Cf=(t,e,n)=>{const r=t.formatter.get(e);return gt(r)&&Se(r,n)},Eo=t=>gn(t,"block"),kr=t=>gn(t,"selector"),en=t=>gn(t,"inline"),xf=t=>kr(t)&&!1!==t.expand&&!en(t),ei=Sr,O0=Hc,D0=bf,ON=hf,B0=(t,e)=>{let n=e;for(;n;){if(wt(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},P0=(t,e,n,r)=>{const o=e.data;if(t){for(let s=n;s>0;s--)if(r(o.charAt(s-1)))return s}else for(let s=n;s<o.length;s++)if(r(o.charAt(s)))return s;return-1},DN=(t,e,n)=>P0(t,e,n,r=>Ic(r)||Ja(r)),BN=(t,e,n)=>P0(t,e,n,lf),L0=(t,e,n,r,o,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(c,u,f)=>{const p=ea(t);return E.from((o?p.backwards:p.forwards)(c,u,(g,v)=>ei(g.parentNode)?-1:(a=g,f(o,g,v)),i))};return l(n,r,DN).bind(c=>s?l(c.container,c.offset+(o?-1:0),BN):E.some(c)).orThunk(()=>a?E.some({container:a,offset:o?0:a.length}):E.none())},M0=(t,e,n,r,o)=>{const s=r[o];lt(r)&&is(r.data)&&s&&(r=s);const a=O0(t,r);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const c=e[l];if((!gt(c.collapsed)||c.collapsed===n.collapsed)&&kr(c)&&t.is(a[i],c.selector))return a[i]}return r},I0=(t,e,n,r)=>{var o;let s=n;const a=t.getRoot(),i=e[0];if(Eo(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(o=t.getParent(n,"LI,TD,TH"))&&void 0!==o?o:a;s=t.getParent(lt(n)?n.parentNode:n,c=>c!==a&&ON(t.schema,c),l)}if(s&&Eo(i)&&i.wrapper&&(s=O0(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[r]&&!t.isBlock(s[r])&&(s=s[r],!vf(s,"br")););return s||n},F0=(t,e,n,r)=>{const o=n.parentNode;return!gt(n[r])&&(!(o!==e&&!be(o)&&!t.isBlock(o))||F0(t,e,o,r))},Uc=(t,e,n,r,o)=>{let s=n;const a=o?"previousSibling":"nextSibling",i=t.getRoot();if(lt(n)&&!D0(n)&&(o?r>0:r<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let c=s[a];c;c=c[a]){const u=lt(c)&&!F0(t,i,c,a);if(!ei(c)&&(!Le(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!D0(c,u))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},j0=t=>ei(t.parentNode)||ei(t),la=(t,e,n,r=!1)=>{let{startContainer:o,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return wt(o)&&o.hasChildNodes()&&(o=xs(o,s),lt(o)&&(s=0)),wt(a)&&a.hasChildNodes()&&(a=xs(a,e.collapsed?i:i-1),lt(a)&&(i=a.data.length)),o=B0(t,o),a=B0(t,a),j0(o)&&(o=ei(o)?o:o.parentNode,o=e.collapsed?o.previousSibling||o:o.nextSibling||o,lt(o)&&(s=e.collapsed?o.length:0)),j0(a)&&(a=ei(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,lt(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(L0(t,t.getRoot(),o,s,!0,r).each(({container:c,offset:u})=>{o=c,s=u}),L0(t,t.getRoot(),a,i,!1,r).each(({container:c,offset:u})=>{a=c,i=u})),(en(l)||l.block_expand)&&(en(l)&&lt(o)&&0!==s||(o=Uc(t,n,o,s,!0)),en(l)&&lt(a)&&i!==a.data.length||(a=Uc(t,n,a,i,!1))),xf(l)&&(o=M0(t,n,e,o,"previousSibling"),a=M0(t,n,e,a,"nextSibling")),(Eo(l)||kr(l))&&(o=I0(t,n,o,"previousSibling"),a=I0(t,n,a,"nextSibling"),Eo(l)&&(t.isBlock(o)||(o=Uc(t,n,o,s,!0)),t.isBlock(a)||(a=Uc(t,n,a,i,!1)))),wt(o)&&o.parentNode&&(s=t.nodeIndex(o),o=o.parentNode),wt(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:s,endContainer:a,endOffset:i}},ml=(t,e,n)=>{var r;const o=e.startOffset,s=xs(e.startContainer,o),a=e.endOffset,i=xs(e.endContainer,a-1),l=h=>{const C=h[0];lt(C)&&C===s&&o>=C.data.length&&h.splice(0,1);const S=h[h.length-1];return 0===a&&h.length>0&&S===i&&lt(S)&&h.splice(h.length-1,1),h},c=(h,C,S)=>{const k=[];for(;h&&h!==S;h=h[C])k.push(h);return k},u=(h,C)=>t.getParent(h,S=>S.parentNode===C,C),f=(h,C,S)=>{const k=S?"nextSibling":"previousSibling";for(let A=h,_=A.parentNode;A&&A!==C;A=_){_=A.parentNode;const D=c(A===h?A:A[k],k);D.length&&(S||D.reverse(),n(l(D)))}};if(s===i)return n(l([s]));const p=null!==(r=t.findCommonAncestor(s,i))&&void 0!==r?r:t.getRoot();if(t.isChildOf(s,i))return f(s,p,!0);if(t.isChildOf(i,s))return f(i,p);const b=u(s,p)||s,g=u(i,p)||i;f(s,b,!0);const v=c(b===s?b:b.nextSibling,"nextSibling",g===i?g.nextSibling:g);v.length&&n(l(v)),f(i,g)},PN=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],z0=(t,e,n,r,o,s)=>{const{uid:a=e,...i}=n;H(t,Xi()),Xe(t,`${Wa()}`,a),Xe(t,`${Zs()}`,r);const{attributes:l={},classes:c=[]}=o(a,i);if(Ir(t,l),u=t,tt(c,p=>{H(u,p)}),s){c.length>0&&Xe(t,`${Yi()}`,c.join(","));const u=Ke(l);u.length>0&&Xe(t,`${Qi()}`,u.join(","))}var u},H0=(t,e,n,r,o)=>{const s=ot("span",t);return z0(s,e,n,r,o,!1),s},U0=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>ke(s,a).map(i=>i.settings),getNames:()=>Ke(s)}})();((s,a)=>{const i=Zs(),l=u=>E.from(u.attr(i)).bind(a.lookup),c=u=>{var f,p;u.attr(Wa(),null),u.attr(Zs(),null),u.attr(Gi(),null);const b=E.from(u.attr(Qi())).map(C=>C.split(",")).getOr([]),g=E.from(u.attr(Yi())).map(C=>C.split(",")).getOr([]);tt(b,C=>u.attr(C,null));const v=null!==(p=null===(f=u.attr("class"))||void 0===f?void 0:f.split(" "))&&void 0!==p?p:[],h=Jt(v,[Xi()].concat(g));u.attr("class",h.length>0?h.join(" "):null),u.attr(Yi(),null),u.attr(Qi(),null)};s.serializer.addTempAttr(Gi()),s.serializer.addAttributeFilter(i,u=>{for(const f of u)l(f).each(p=>{!1===p.persistent&&("span"===f.name?f.unwrap():c(f))})})})(t,e);const n=((s,a)=>{const i=sn({}),l=()=>({listeners:[],previous:Cs()}),c=(b,g)=>{u(b,v=>(g(v),v))},u=(b,g)=>{const v=i.get(),h=g(ke(v,b).getOrThunk(l));v[b]=h,i.set(v)},f=(b,g)=>{tt(Qg(s,b),v=>{g?Xe(v,Gi(),"true"):d(v,Gi())})},p=Fu(()=>{const b=Mo(a.getNames());tt(b,g=>{u(g,v=>{const h=v.previous.get();return Gg(s,E.some(g)).fold(()=>{h.each(C=>{var S;c(S=g,k=>{tt(k.listeners,A=>A(!1,S))}),v.previous.clear(),f(C,!1)})},({uid:C,name:S,elements:k})=>{var A,_,D;cs(h,C)||(h.each(A=>f(A,!1)),_=C,D=k,c(A=S,I=>{tt(I.listeners,j=>j(!0,A,{uid:_,nodes:ne(D,U=>U.dom)}))}),v.previous.set(C),f(C,!0))}),{previous:v.previous,listeners:v.listeners}})})},30);return s.on("remove",()=>{p.cancel()}),s.on("NodeChange",()=>{p.throttle()}),{addListener:(b,g)=>{u(b,v=>({previous:v.previous,listeners:v.listeners.concat([g])}))}}})(t,e),r=qo("span"),o=s=>{tt(s,a=>{r(a)?ee(a):(i=>{X(i,Xi()),d(i,`${Wa()}`),d(i,`${Zs()}`),d(i,`${Gi()}`);const l=Yr(i,`${Qi()}`).map(f=>f.split(",")).getOr([]),c=Yr(i,`${Yi()}`).map(f=>f.split(",")).getOr([]);var u;tt(l,f=>d(i,f)),u=i,tt(c,f=>{X(u,f)}),d(i,`${Yi()}`),d(i,`${Qi()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,c,u,f;c=s,u=i,f=a,(l=t).undoManager.transact(()=>{const p=l.selection,b=p.getRng(),g=Za(l).length>0,v=Ji("mce-annotation");if(b.collapsed&&!g&&((h,C)=>{const S=la(h.dom,C,[{inline:"span"}]);C.setStart(S.startContainer,S.startOffset),C.setEnd(S.endContainer,S.endOffset),h.selection.setRng(C)})(l,b),p.getRng().collapsed&&!g){const h=H0(l.getDoc(),v,f,c,u.decorate);Qe(h,on),p.getRng().insertNode(h.dom),p.select(h.dom)}else N0(p,!1,()=>{pf(l,h=>{((t,e,n,r,o,s)=>{const a=[],i=H0(t.getDoc(),n,s,r,o),l=Cs(),c=()=>{l.clear()},u=p=>{tt(p,f)},f=p=>{switch(b=t,g=p,v="span",h=xe(p),Tn(g).fold(()=>"skipping",C=>{return"br"===h||Vn(S=g)&&mc(S)===fn?"valid":(S=>An(S)&&et(S,Xi()))(g)?"existing":$r(g.dom)?"caret":Se(PN,S=>Te(g,S))?"valid-block":ti(b,v,h)&&ti(b,xe(C),v)?"valid":"invalid-child";var S})){case"invalid-child":{c();const b=Ne(p);u(b),c();break}case"valid-block":c(),z0(p,n,s,r,o,!0);break;case"valid":{const b=l.get().getOrThunk(()=>{const g=ta(i);return a.push(g),l.set(g),g});ye(p,b);break}}var b,g,v,h};ml(t.dom,e,p=>{c(),(b=>{const g=ne(b,O);u(g)})(p)})})(l,h,v,c,u.decorate,f)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{Gg(t,E.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();o(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();Ce(Jg(t,s),(i,l)=>{o(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=Jg(t,s);return Io(a,i=>ne(i,l=>l.dom))}}},pl=t=>({getBookmark:kt(EN,t),moveToBookmark:kt(NN,t)});pl.isBookmarkNode=Sr;const q0=(t,e,n)=>!n.collapsed&&Se(n.getClientRects(),r=>{return a=e,(s=t)>=(o=r).left&&s<=o.right&&a>=o.top&&a<=o.bottom;var o,s,a}),$0=(t,e,n)=>{t.dispatch(e,n)},W0=(t,e,n,r)=>{t.dispatch("FormatApply",{format:e,node:n,vars:r})},V0=(t,e,n,r)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:r})},K0=(t,e)=>t.dispatch("SetContent",e),X0=(t,e)=>t.dispatch("GetContent",e),G0=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),Ct={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||Ct.metaKeyPressed(t),metaKeyPressed:t=>ue.os.isMacOS()||ue.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},ca="data-mce-selected",Y0=Math.abs,qc=Math.round,wf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Q0=(t,e)=>{const n=e.dom,r=e.getDoc(),o=document,s=e.getBody();let a,i,l,c,u,f,p,b,g,v,h,C,S,k,A;const _=xt=>gt(xt)&&(hg(xt)||n.is(xt,"figure.image")),D=xt=>Co(xt)||n.hasClass(xt,"mce-preview-object"),I=xt=>{const Ft=xt.target;((Xt,M)=>{if("longpress"===(z=Xt).type||0===z.type.indexOf("touch")){const z=Xt.touches[0];return _(Xt.target)&&!q0(z.clientX,z.clientY,M)}var z;return _(Xt.target)&&!q0(Xt.clientX,Xt.clientY,M)})(xt,e.selection.getRng())&&!xt.isDefaultPrevented()&&e.selection.select(Ft)},j=xt=>n.hasClass(xt,"mce-preview-object")&&gt(xt.firstElementChild)?[xt,xt.firstElementChild]:n.is(xt,"figure.image")?[xt.querySelector("img")]:[xt],U=xt=>{const Ft=Hh(e);return!!Ft&&"false"!==xt.getAttribute("data-mce-resize")&&xt!==e.getBody()&&(n.hasClass(xt,"mce-preview-object")&&gt(xt.firstElementChild)?Te(O(xt.firstElementChild),Ft):Te(O(xt),Ft))},K=(xt,Ft,Xt)=>{if(gt(Xt)){const M=j(xt);tt(M,z=>{z.style[Ft]||!e.schema.isValid(z.nodeName.toLowerCase(),Ft)?n.setStyle(z,Ft,Xt):n.setAttrib(z,Ft,""+Xt)})}},P=(xt,Ft,Xt)=>{K(xt,"width",Ft),K(xt,"height",Xt)},L=xt=>{let Ft,Xt,M,z,Y;Ft=xt.screenX-f,Xt=xt.screenY-p,C=Ft*c[2]+b,S=Xt*c[3]+g,C=C<5?5:C,S=S<5?5:S,M=(_(a)||D(a))&&!1!==hE(e)?!Ct.modifierPressed(xt):Ct.modifierPressed(xt),M&&(Y0(Ft)>Y0(Xt)?(S=qc(C*v),C=qc(S/v)):(C=qc(S/v),S=qc(C*v))),P(i,C,S),z=c.startPos.x+Ft,Y=c.startPos.y+Xt,z=z>0?z:0,Y=Y>0?Y:0,n.setStyles(l,{left:z,top:Y,display:"block"}),l.innerHTML=C+" &times; "+S,c[2]<0&&i.clientWidth<=C&&n.setStyle(i,"left",void 0+(b-C)),c[3]<0&&i.clientHeight<=S&&n.setStyle(i,"top",void 0+(g-S)),Ft=s.scrollWidth-k,Xt=s.scrollHeight-A,Ft+Xt!==0&&n.setStyles(l,{left:z-Ft,top:Y-Xt}),h||(e.dispatch("ObjectResizeStart",{target:a,width:b,height:g,origin:"corner-"+c.name}),h=!0)},$=()=>{const xt=h;h=!1,xt&&(K(a,"width",C),K(a,"height",S)),n.unbind(r,"mousemove",L),n.unbind(r,"mouseup",$),o!==r&&(n.unbind(o,"mousemove",L),n.unbind(o,"mouseup",$)),n.remove(i),n.remove(l),n.remove(u),Q(a),xt&&(e.dispatch("ObjectResized",{target:a,width:C,height:S,origin:"corner-"+c.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},Q=xt=>{Ut();const Ft=n.getPos(xt,s),Xt=Ft.x,M=Ft.y,z=xt.getBoundingClientRect(),Y=z.width||z.right-z.left,nt=z.height||z.bottom-z.top;a!==xt&&(it(),a=xt,C=S=0);const q=e.dispatch("ObjectSelected",{target:xt});U(xt)&&!q.isDefaultPrevented()?Ce(wf,(st,ut)=>{let pt=n.get("mceResizeHandle"+ut);pt&&n.remove(pt),pt=n.add(s,"div",{id:"mceResizeHandle"+ut,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ut+"-resize; margin:0; padding:0"}),n.bind(pt,"mousedown",bt=>{bt.stopImmediatePropagation(),bt.preventDefault(),(ft=>{const jt=j(a)[0];var pe;f=ft.screenX,p=ft.screenY,b=jt.clientWidth,g=jt.clientHeight,v=g/b,c=st,c.name=ut,c.startPos={x:Y*st[0]+Xt,y:nt*st[1]+M},k=s.scrollWidth,A=s.scrollHeight,u=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=D(pe=a)?n.create("img",{src:ue.transparentSrc}):pe.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:Xt,top:M,margin:0}),P(i,Y,nt),i.removeAttribute(ca),s.appendChild(i),n.bind(r,"mousemove",L),n.bind(r,"mouseup",$),o!==r&&(n.bind(o,"mousemove",L),n.bind(o,"mouseup",$)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},b+" &times; "+g)})(bt)}),st.elm=pt,n.setStyles(pt,{left:Y*st[0]+Xt-pt.offsetWidth/2,top:nt*st[1]+M-pt.offsetHeight/2})}):it(!1)},vt=Ec(Q,0),it=(xt=!0)=>{vt.cancel(),Ut(),a&&xt&&a.removeAttribute(ca),Ce(wf,(Ft,Xt)=>{const M=n.get("mceResizeHandle"+Xt);M&&(n.unbind(M),n.remove(M))})},Rt=(xt,Ft)=>n.isChildOf(xt,Ft),Et=xt=>{if(h||e.removed||e.composing)return;const Ft="mousedown"===xt.type?xt.target:t.getNode(),Xt=zr(O(Ft),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(z=>z.dom).filter(z=>n.isEditable(z.parentElement)).getOrUndefined(),M=gt(Xt)?n.getAttrib(Xt,ca,"1"):"1";if(tt(n.select(`img[${ca}],hr[${ca}]`),z=>{z.removeAttribute(ca)}),gt(Xt)&&Rt(Xt,s)&&e.hasFocus()){Wt();const z=t.getStart(!0);if(Rt(z,Xt)&&Rt(t.getEnd(!0),Xt))return n.setAttrib(Xt,ca,M),void vt.throttle(Xt)}it()},Ut=()=>{Ce(wf,xt=>{xt.elm&&(n.unbind(xt.elm),delete xt.elm)})},Wt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{Wt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Et),e.on("keyup compositionend",xt=>{a&&"TABLE"===a.nodeName&&Et(xt)}),e.on("hide blur",it),e.on("contextmenu longpress",I,!0)}),e.on("remove",Ut),{isResizable:U,showResizeRect:Q,hideResizeRect:it,updateResizeRect:Et,destroy:()=>{vt.cancel(),a=i=u=null}}},J0=(t,e,n)=>{const r=t.document.createRange();var o,s;return o=r,e.fold(s=>{o.setStartBefore(s.dom)},(s,a)=>{o.setStart(s.dom,a)},s=>{o.setStartAfter(s.dom)}),s=r,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),r},Sf=(t,e,n,r,o)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(r.dom,o),s},gl=xo([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Z0=(t,e,n)=>e(O(n.startContainer),n.startOffset,O(n.endContainer),n.endOffset),tb=(t,e,n,r)=>({start:t,soffset:e,finish:n,foffset:r}),MN=document.caretPositionFromPoint?(t,e,n)=>{var r,o;return E.from(null===(o=(r=t.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,n)).bind(s=>{if(null===s.offsetNode)return E.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),E.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var r,o;return E.from(null===(o=(r=t.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,e,n))}:E.none,kf=xo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Go={before:kf.before,on:kf.on,after:kf.after,cata:(t,e,n,r)=>t.fold(e,n,r),getStart:t=>t.fold(de,de,de)},$c=xo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ni={domRange:$c.domRange,relative:$c.relative,exact:$c.exact,exactFromRange:t=>$c.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:r=>O(r.startContainer),relative:(r,o)=>Go.getStart(r),exact:(r,o,s,a)=>r});return Pe(e)},range:tb},Wc=(t,e)=>{const n=xe(t);return"input"===n?Go.after(t):Ot(["br","img"],n)?0===e?Go.before(t):Go.after(t):Go.on(t,e)},IN=(t,e)=>{const n=t.fold(Go.before,Wc,Go.after),r=e.fold(Go.before,Wc,Go.after);return ni.relative(n,r)},eb=(t,e,n,r)=>{const o=Wc(t,e),s=Wc(n,r);return ni.relative(o,s)},Ef=(t,e)=>{const n=(e||document).createDocumentFragment();return tt(t,r=>{n.appendChild(r.dom)}),O(n)},nb=(t,e,n)=>{return(r=Pe(O(n)).dom,o=t,s=e,((a,i,l)=>{const c=O(a.document);return MN(c,i,l).map(u=>tb(O(u.startContainer),u.startOffset,O(u.endContainer),u.endOffset))})(r,o,s)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,s},Nf=(t,e)=>gt(t)&&gt(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,rb=(t,e,n)=>null!==((r,o,s)=>{let a=r;for(;a&&a!==o;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),jN=(t,e,n)=>rb(t,e,r=>r.nodeName===n),zN=(t,e)=>xr(t)&&!rb(t,e,$r),ob=(t,e,n)=>{const r=e.parentNode;if(r){const o=new tn(e,t.getParent(r,t.isBlock)||t.getRoot());let s;for(;s=o[n?"prev":"next"]();)if(Le(s))return!0}return!1},_f=(t,e,n,r,o)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=o.parentNode;let l,c;if(!i)return E.none();const u=t.getParent(i,t.isBlock)||s;if(r&&Le(o)&&e&&t.isEmpty(u))return E.some(G(i,t.nodeIndex(o)));const f=new tn(o,u);for(;c=f[r?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||zN(c,s))return E.none();if(lt(c)&&c.data.length>0)return jN(c,s,"A")?E.none():E.some(G(c,r?c.data.length:0));if(t.isBlock(c)||a[c.nodeName.toLowerCase()])return E.none();l=c}return ms(l)?E.none():n&&l?E.some(G(l,0)):E.none()},sb=(t,e,n,r)=>{const o=t.getRoot();let s,a=!1,i=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const c=wt(i)&&l===i.childNodes.length,u=t.schema.getNonEmptyElements();let f=n;if(xr(i))return E.none();if(wt(i)&&l>i.childNodes.length-1&&(f=!1),ji(i)&&(i=o,l=0),i===o){if(f&&(s=i.childNodes[l>0?l-1:0],s)&&(xr(s)||u[s.nodeName]||Ko(s)))return E.none();if(i.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=lt(i)&&c?i.data.length:0,!e&&i===o.lastChild&&Ko(i)||((p,b)=>{let g=b;for(;g&&g!==p;){if(Ae(g))return!0;g=g.parentNode}return!1})(o,i)||xr(i))return E.none();if(i.hasChildNodes()&&!Ko(i)){s=i;const p=new tn(i,o);do{if(Ae(s)||xr(s)){a=!1;break}if(lt(s)&&s.data.length>0){l=f?0:s.data.length,i=s,a=!0;break}if(u[s.nodeName.toLowerCase()]&&!nk(s)){l=t.nodeIndex(s),i=s.parentNode,f||l++,a=!0;break}}while(s=f?p.next():p.prev())}}}return e&&(lt(i)&&0===l&&_f(t,c,e,!0,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),wt(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Le(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||ob(t,s,!1)||ob(t,s,!0)||_f(t,c,e,!0,s).each(p=>{i=p.container(),l=p.offset(),a=!0}))),f&&!e&&lt(i)&&l===i.data.length&&_f(t,c,e,!1,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),a&&i?E.some(G(i,l)):E.none();var g},Vc=(t,e)=>{const n=e.collapsed,r=e.cloneRange(),o=G.fromRangeStart(e);return sb(t,n,!0,r).each(s=>{n&&G.isAbove(o,s)||r.setStart(s.container(),s.offset())}),n||sb(t,n,!1,r).each(s=>{r.setEnd(s.container(),s.offset())}),n&&r.collapse(!0),Nf(e,r)?E.none():E.some(r)},Kc=(t,e)=>t.splitText(e),Xc=t=>{let e=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset;if(e===r&&lt(e)){if(n>0&&n<e.data.length)if(r=Kc(e,n),e=r.previousSibling,o>n){o-=n;const s=Kc(r,o).previousSibling;e=r=s,o=s.data.length,n=0}else o=0}else if(lt(e)&&n>0&&n<e.data.length&&(e=Kc(e,n),n=0),lt(r)&&o>0&&o<r.data.length){const s=Kc(r,o).previousSibling;r=s,o=s.data.length}return{startContainer:e,startOffset:n,endContainer:r,endOffset:o}},da=t=>({walk:(e,n)=>ml(t,e,n),split:Xc,expand:(e,n={type:"word"})=>{if("word"===n.type){const r=la(t,e,[{inline:"span"}]),o=t.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return e},normalize:e=>Vc(t,e).fold(ve,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});da.compareRanges=Nf,da.getCaretRangeFromPoint=nb,da.getSelectedNode=Nc,da.getNode=xs;const HN=((t,e)=>{const n=o=>{const s=(a=>{const i=a.dom;return cr(a)?i.getBoundingClientRect().height:i.offsetHeight})(o);if(s<=0||null===s){const a=B(o,t);return parseFloat(a)||0}return s},r=(o,s)=>pn(s,(a,i)=>{const l=B(o,i),c=void 0===l?0:parseInt(l,10);return isNaN(c)?a:a+c},0);return{set:(o,s)=>{if(!x(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=o.dom;Vo(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:r,max:(o,s,a)=>{const i=r(o,a);return s>i?s-i:0}}})("height"),ab=()=>O(document),ib=(t,e)=>t.view(e).fold(ht([]),n=>{const r=t.owner(n),o=ib(t,r);return[n].concat(o)});var UN=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?E.none():E.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(O)},owner:t=>me(t)});const Af=t=>"textarea"===xe(t),lb=(t,e)=>{const n=(o=>{const s=o.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===o.dom)return _e(a.offsetLeft,a.offsetTop);const c=Hr(i?.pageYOffset,l.scrollTop),u=Hr(i?.pageXOffset,l.scrollLeft),f=Hr(l.clientTop,a.clientTop),p=Hr(l.clientLeft,a.clientLeft);return er(o).translate(u-p,c-f)})(t),r=HN.get(t);return{element:t,bottom:n.top+r,height:r,pos:n,cleanup:e}},cb=(t,e,n,r)=>{$N(t,(o,s)=>qN(t,e,n,r),n)},db=(t,e,n,r,o)=>{const s={elm:r.element.dom,alignToTop:o};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(t,e,fs(e).top,r,o),t.dispatch("AfterScrollIntoView",s))},qN=(t,e,n,r)=>{O(t.getBody());const s=O(t.getDoc()),a=((i,l)=>{const c=((f,p)=>{const b=Ne(f);if(0===b.length||Af(f))return{element:f,offset:p};if(p<b.length&&!Af(b[p]))return{element:b[p],offset:0};{const g=b[b.length-1];return Af(g)?{element:f,offset:p}:"img"===xe(g)?{element:g,offset:1}:Vn(g)?{element:g,offset:mc(g).length}:{element:g,offset:Ne(g).length}}})(i,l),u=J('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Tt(c.element,u),lb(u,()=>$t(u))})(O(n.startContainer),n.startOffset);db(t,s,e,a,r),a.cleanup()},ub=(t,e,n,r)=>{const o=O(t.getDoc());db(t,o,n,lb(O(e),At),r)},$N=(t,e,n)=>{const r=n.startContainer,o=n.startOffset,s=n.endContainer,a=n.endOffset;e(O(r),O(s));const i=t.dom.createRng();i.setStart(r,o),i.setEnd(s,a),t.selection.setRng(n)},Tf=(t,e,n,r,o)=>{const s=e.pos;if(r)Mi(s.left,s.top,o);else{const a=s.top-n+e.height;Mi(-t.getBody().getBoundingClientRect().left,a,o)}},fb=(t,e,n,r,o,s)=>{const a=r+n,i=o.pos.top,l=o.bottom,c=l-i>=r;i<n?Tf(t,o,r,!1!==s,e):i>a?Tf(t,o,r,c?!1!==s:!0===s,e):l>a&&!c&&Tf(t,o,r,!0===s,e)},mb=(t,e,n,r,o)=>{const s=Pe(e).dom.innerHeight;fb(t,e,n,s,r,o)},pb=(t,e,n,r,o)=>{const s=Pe(e).dom.innerHeight;fb(t,e,n,s,r,o);const a=(l=>{const c=ab(),u=fs(c),f=((g,v)=>{const h=v.owner(g);return ib(v,h)})(l,UN),p=er(l),b=Lo(f,(g,v)=>{const h=er(v);return{left:g.left+h.left,top:g.top+h.top}},{left:0,top:0});return _e(b.left+p.left+u.left,b.top+p.top+u.top)})(r.element),i=ug(window);a.top<i.y?Ii(r.element,!1!==o):a.top>i.bottom&&Ii(r.element,!0===o)},WN=(t,e,n)=>cb(t,mb,e,n),VN=(t,e,n)=>ub(t,e,mb,n),KN=(t,e,n)=>cb(t,pb,e,n),XN=(t,e,n)=>ub(t,e,pb,n),hl=(t,e,n)=>{(t.inline?WN:KN)(t,e,n)},gb=t=>t.dom.focus(),hb=t=>{const e=Re(t).dom;return t.dom===e.activeElement},Rf=(t=ab())=>E.from(t.dom.activeElement).map(O),bb=(t,e)=>{const n=Vn(e)?mc(e).length:Ne(e).length+1;return t>n?n:t<0?0:t},GN=t=>ni.range(t.start,bb(t.soffset,t.start),t.finish,bb(t.foffset,t.finish)),vb=(t,e)=>!dc(e.dom)&&(fe(t,e)||ce(t,e)),yb=t=>e=>vb(t,e.start)&&vb(t,e.finish),YN=t=>ni.range(O(t.startContainer),t.startOffset,O(t.endContainer),t.endOffset),QN=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),E.some(e)}catch{return E.none()}},Of=t=>{const e=t.inline||ue.browser.isFirefox()?(n=O(t.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?E.from(o.getRangeAt(0)):E.none()).map(YN)})(Pe(n).dom).filter(yb(n))):E.none();var n;t.bookmark=e.isSome()?e:t.bookmark},Df=t=>(t.bookmark?t.bookmark:E.none()).bind(e=>{return n=O(t.getBody()),E.from(e).filter(yb(n)).map(GN);var n}).bind(QN),Cb={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Er={setEditorTimeout:(t,e,n)=>{return x(o=n)||(o=0),setTimeout(()=>{t.removed||e()},o);var o},setEditorInterval:(t,e,n)=>{const r=(x(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(r):e()},s));var s;return r}};let ri;const Bf=we.DOM,Pf=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Gc=(t,e)=>{const n=EE(t);return null!==Bf.getParent(e,o=>{return wt(s=o)&&Cb.isEditorUIElement(s)||!!n&&t.dom.is(o,n);var s})},Lf=t=>{try{const e=Re(O(t.getElement()));return Rf(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},JN=(t,e)=>{const n=e.editor;(o=>{const s=Ec(()=>{Of(o)},0);o.on("init",()=>{var a,c;o.inline&&((a,i)=>{const l=()=>{i.throttle()};we.DOM.bind(document,"mouseup",l),a.on("remove",()=>{we.DOM.unbind(document,"mouseup",l)})})(o,s),c=s,(a=o).on("mouseup touchend",u=>{c.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Of(a)})}),o.on("remove",()=>{s.cancel()})})(n);const r=(o,s)=>{aN(o)&&!0!==o.inline&&s(O(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=t.focusedEditor;Pf(Lf(n))&&r(n,H),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Er.setEditorTimeout(n,()=>{const o=t.focusedEditor;Pf(Lf(n))&&o===n||r(n,X),Gc(n,Lf(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),ri||(ri=o=>{const s=t.activeEditor;s&&Wo(o).each(a=>{a.ownerDocument===document&&(a===document.body||Gc(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Bf.bind(document,"focusin",ri))},ZN=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&ri&&(Bf.unbind(document,"focusin",ri),ri=null)},xb=(t,e)=>{var n,r,o;(n=O(t.getBody()),r=e,(o=r,o.collapsed?E.from(xs(o.startContainer,o.startOffset)).map(O):E.none()).bind(o=>ak(o)?E.some(o):fe(n,o)?E.none():E.some(n))).bind(n=>Dn(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Mf=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},ua=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(r=O(n),hb(r)||(o=r,Rf(Re(o)).filter(s=>o.dom.contains(s.dom))).isSome());var r,o})(t):gt((e=t).iframeElement)&&hb(O(e.iframeElement));var e},If=t=>t.editorManager.setActive(t),wb=(t,e,n,r,o)=>{const a=n?e.startOffset:e.endOffset;return E.from(n?e.startContainer:e.endContainer).map(O).map(i=>r&&e.collapsed?i:je(i,o(i,a)).getOr(i)).bind(i=>An(i)?E.some(i):Tn(i).filter(An)).map(i=>i.dom).getOr(t)},Sb=(t,e,n=!1)=>wb(t,e,!0,n,(r,o)=>Math.min(Fr(r),o)),kb=(t,e,n=!1)=>wb(t,e,!1,n,(r,o)=>o>0?o-1:o),Eb=(t,e)=>{const n=t;for(;t&&lt(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Ff=(t,e)=>ne(e,n=>{const r=t.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),t_=["img","br"],Nb=t=>{return vg(t).filter(n=>0!==n.trim().length||n.indexOf(on)>-1).isSome()||Ot(t_,xe(t))||$s(n=t)&&"false"===Kn(n,"contenteditable");var n},_b="[data-mce-autocompleter]",Ab=t=>yo(t,_b),n_={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Yc=(t,e,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(t[r])return t[r];if(t!==e){let s=t[o];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[o],s)return s}},r_=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!bs(n))return!1;const r=t.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},Tb=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Qn{static create(e,n){const r=new Qn(e,n_[e]||1);return n&&Ce(n,(o,s)=>{r.attr(s,o)}),r}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const r=this;if(!Dt(e))return gt(e)&&Ce(e,(s,a)=>{r.attr(a,s)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(e in o.map){delete o.map[e];let s=o.length;for(;s--;)if(o[s].name===e)return o.splice(s,1),r}return r}if(e in o.map){let s=o.length;for(;s--;)if(o[s].name===e){o[s].value=n;break}}else o.push({name:e,value:n});return o.map[e]=n,r}return o.map[e]}}clone(){const e=this,n=new Qn(e.name,e.type),r=e.attributes;if(r){const o=[];o.map={};for(let s=0,a=r.length;s<a;s++){const i=r[s];"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const r=n.next;e.insert(n,e,!0),n=r}e.remove()}remove(){const e=this,n=e.parent,r=e.next,o=e.prev;return n&&(n.firstChild===e?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===e?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const r=n.lastChild;return r?(r.next=e,e.prev=r,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,r){e.parent&&e.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===o.lastChild?o.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=o,e}getAll(e){const n=this,r=[];for(let o=n.firstChild;o;o=Yc(o,n))o.name===e&&r.push(o);return r}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let o=e.firstChild;o;o=Yc(o,e))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},r){var o;const s=this;let a=s.firstChild;if(Tb(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||Tb(a))return!1}if(8===a.type||3===a.type&&!r_(a)||3===a.type&&a.parent&&n[a.parent.name]&&bs(null!==(o=a.value)&&void 0!==o?o:"")||r&&r(a))return!1}while(a=Yc(a,s));return!0}walk(e){return Yc(this,null,e)}}const o_=dt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),Rb=t=>Dt(t.nodeValue)&&t.nodeValue.includes(fn),Ob=t=>(0===t.length?"":`${ne(t,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',Db=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>Rb(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),Bb=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,e=>{if(Rb(e)){const n=e.parentNode;return n&&Zt(o_,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),s_=t=>null!==Db(t).nextNode(),a_=t=>null!==Bb(t).nextNode(),i_=(t,e)=>null!==e.querySelector(Ob(t)),l_=(t,e)=>{tt(e.querySelectorAll(Ob(t)),n=>{const r=O(n);"all"===Kn(r,"data-mce-bogus")?$t(r):tt(t,o=>{Ws(r,o)&&d(r,o)})})},Pb=t=>{let e=t.nextNode();for(;null!==e;)e.nodeValue=null,e=t.nextNode()},c_=kn(Pb,Db),d_=kn(Pb,Bb),Lb=(t,e)=>{const n=[{condition:kt(i_,e),action:kt(l_,e)},{condition:s_,action:c_},{condition:a_,action:d_}];let r=t,o=!1;return tt(n,({condition:s,action:a})=>{s(r)&&(o||(r=t.cloneNode(!0),o=!0),a(r))}),r},Mb=t=>{const e=Cn(t,"[data-mce-bogus]");tt(e,n=>{"all"===Kn(n,"data-mce-bogus")?$t(n):Gs(n)?(Tt(n,qt("\ufeff")),$t(n)):ee(n)})},Ib=t=>{const e=Cn(t,"input");tt(e,n=>{d(n,"name")})},Fb=dt.makeMap,jb=t=>{const e=[],n=(t=t||{}).indent,r=Fb(t.indent_before||""),o=Fb(t.indent_after||""),s=vs.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,c)=>{if(n&&r[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}if(e.push("<",i),l)for(let u=0,f=l.length;u<f;u++){const p=l[u];e.push(" ",p.name,'="',s(p.value,!0),'"')}if(e[e.length]=!c||a?">":" />",c&&n&&o[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&o[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},Es=(t={},e=ys())=>{const n=jb(t);return t.validate=!("validate"in t)||t.validate,{serialize:r=>{const o=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const u=i.name,f=u in e.getVoidElements();let p=i.attributes;if(o&&p&&p.length>1){const b=[];b.map={};const g=e.getElementRule(i.name);if(g){for(let v=0,h=g.attributesOrder.length;v<h;v++){const C=g.attributesOrder[v];if(C in p.map){const S=p.map[C];b.map[C]=S,b.push({name:C,value:S})}}for(let v=0,h=p.length;v<h;v++){const C=p[v].name;if(!(C in b.map)){const S=p.map[C];b.map[C]=S,b.push({name:C,value:S})}}p=b}}if(n.start(u,p,f),!f){let b=i.firstChild;if(b){"pre"!==u&&"textarea"!==u||3!==b.type||"\n"!==(null===(l=b.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(b)}while(b=b.next)}n.end(u)}}};return 1!==r.type||t.inner?3===r.type?s[3](r):s[11](r):a(r),n.getContent()}}},zb=new Set;tt(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{zb.add(t)});const Hb=["font","text-decoration","text-emphasis"],jf=(t,e)=>Ke(t.parseStyle(t.getAttrib(e,"style"))),f_=(t,e,n)=>{const r=jf(t,e),o=jf(t,n),s=a=>{var i,l;const c=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",u=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return $n(c)&&$n(u)&&c!==u};return Se(r,a=>{const i=l=>Se(l,c=>c===a);if(!i(o)&&i(Hb)){const l=Ht(o,c=>Se(Hb,u=>rn(c,u)));return Se(l,s)}return s(a)})},Ub=(t,e,n)=>E.from(n.container()).filter(lt).exists(r=>{const o=t?0:-1;return e(r.data.charAt(n.offset()+o))}),zf=kt(Ub,!0,Ja),Hf=kt(Ub,!1,Ja),m_=t=>{const e=t.container();return lt(e)&&(0===e.data.length||hc(e.data)&&pl.isBookmarkNode(e.parentNode))},Ns=(t,e)=>n=>tf(t?0:-1,n).filter(e).isSome(),qb=t=>hg(t)&&"block"===B(O(t),"display"),$b=t=>{return Ae(t)&&!(wt(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},p_=Ns(!0,qb),g_=Ns(!1,qb),bl=Ns(!0,Co),vl=Ns(!1,Co),Wb=Ns(!0,Ko),Vb=Ns(!1,Ko),_s=Ns(!0,$b),As=Ns(!1,$b),Kb=(t,e)=>{return o=ve,fe(r=e,n=t)?vr(n,s=>o(s)||ce(s,r)).slice(0,-1):[];var n,r,o},Yo=(t,e)=>[t].concat(Kb(t,e)),Uf=(t,e,n)=>p0(t,e,n,m_),Xb=(t,e)=>He(Yo(O(e.container()),t),Cr),Gb=(t,e,n)=>Uf(t,e.dom,n).forall(r=>Xb(e,n).fold(()=>!wo(r,n,e.dom),o=>!wo(r,n,e.dom)&&fe(o,O(r.container())))),Yb=(t,e,n)=>Xb(e,n).fold(()=>Uf(t,e.dom,n).forall(r=>!wo(r,n,e.dom)),r=>Uf(t,r.dom,n).isNone()),qf=kt(Yb,!1),Qb=kt(Yb,!0),h_=kt(Gb,!1),b_=kt(Gb,!0),v_=t=>Bc(t).exists(Gs),Qc=(t,e,n)=>{const r=Ht(Yo(O(n.container()),e),Cr),o=Nn(r).getOr(e);return wr(t,o.dom,n).filter(v_)},$f=(t,e)=>Bc(e).exists(Gs)||Qc(!0,t,e).isSome(),Wf=(t,e)=>{return(n=e,E.from(n.getNode(!0)).map(O)).exists(Gs)||Qc(!1,t,e).isSome();var n},y_=kt(Qc,!1),C_=kt(Qc,!0),Jb=t=>G.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),Zb=(t,e)=>{const n=Ht(Yo(O(e.container()),t),Cr);return Nn(n).getOr(t)},tv=(t,e)=>Jb(e)?Hf(e):Hf(e)||nr(Zb(t,e).dom,e).exists(Hf),ev=(t,e)=>Jb(e)?zf(e):zf(e)||Yn(Zb(t,e).dom,e).exists(zf),Vf=t=>Bc(t).bind(e=>vo(e,An)).exists(e=>{return n=B(e,"white-space"),Ot(["pre","pre-wrap"],n);var n}),nv=(t,e)=>n=>{return r=new tn(n,t)[e](),gt(r)&&Ae(r)&&e0(r);var r},rv=(t,e)=>{return!Vf(e)&&(nr((n=t).dom,r=e).isNone()||Yn(n.dom,r).isNone()||qf(n,r)||Qb(n,r)||Wf(n,r)||$f(n,r)||tv(t,e)||ev(t,e));var n,r},yl=(t,e)=>!Vf(e)&&(qf(t,e)||h_(t,e)||Wf(t,e)||tv(t,e)||((n,r)=>{const o=nr(n.dom,r).getOr(r),s=nv(n.dom,"prev");return r.isAtStart()&&(s(r.container())||s(o.container()))})(t,e)),Cl=(t,e)=>!Vf(e)&&(Qb(t,e)||b_(t,e)||$f(t,e)||ev(t,e)||((n,r)=>{const o=Yn(n.dom,r).getOr(r),s=nv(n.dom,"next");return r.isAtEnd()&&(s(r.container())||s(o.container()))})(t,e)),Kf=(t,e)=>yl(t,e)||Cl(t,(n=>{const r=n.container(),o=n.offset();return lt(r)&&o<r.data.length?G(r,o+1):n})(e)),ov=(t,e)=>Ic(t.charAt(e)),sv=(t,e)=>Ja(t.charAt(e)),av=(t,e,n)=>{const r=e.data,o=G(e,0);return n||!ov(r,0)||Kf(t,o)?!!(n&&sv(r,0)&&yl(t,o))&&(e.data=on+r.slice(1),!0):(e.data=" "+r.slice(1),!0)},iv=(t,e,n)=>{const r=e.data,o=G(e,r.length-1);return n||!ov(r,r.length-1)||Kf(t,o)?!!(n&&sv(r,r.length-1)&&Cl(t,o))&&(e.data=r.slice(0,-1)+on,!0):(e.data=r.slice(0,-1)+" ",!0)},lv=(t,e,n)=>{if(0===n)return;const r=O(t),o=Rn(r,Cr).getOr(r),s=t.data.slice(e,e+n),a=e+n>=t.data.length&&Cl(o,G(t,t.data.length)),i=0===e&&yl(o,G(t,0));t.replaceData(e,n,Ng(s,4,i,a))},Jc=(t,e)=>{const n=t.data.slice(e),r=n.length-tc(n).length;lv(t,e,r)},Xf=(t,e)=>{const n=t.data.slice(0,e),r=n.length-ec(n).length;lv(t,e-r,r)},Gf=(t,e,n,r=!0)=>{const o=ec(t.data).length,s=r?t:e,a=r?e:t;return r?s.appendData(a.data):s.insertData(0,a.data),$t(O(a)),n&&Jc(s,o),s},w_=(t,e)=>((n,r)=>{const o=n.container(),s=n.offset();return!G.isTextPosition(n)&&o===r.parentNode&&s>G.before(r).offset()})(e,t)?G(e.container(),e.offset()-1):e,cv=t=>{return Ur(t.previousSibling)?E.some(lt(e=t.previousSibling)?G(e,e.data.length):G.after(e)):t.previousSibling?qr(t.previousSibling):E.none();var e},dv=t=>{return Ur(t.nextSibling)?E.some(lt(e=t.nextSibling)?G(e,0):G.before(e)):t.nextSibling?Dn(t.nextSibling):E.none();var e},uv=(t,e,n)=>{n.fold(()=>{t.focus()},r=>{t.selection.setRng(r.toRange(),e)})},k_=(t,e)=>e&&Zt(t.schema.getBlockElements(),xe(e)),E_=t=>{if($e(t)){const e=J('<br data-mce-bogus="1">');return ie(t),Nt(t,e),E.some(G.before(e.dom))}return E.none()},fa=(t,e,n,r=!0)=>{const o=((t,e,n)=>{return(r=t,o=e,s=n,r?(a=o,dv(i=s).orThunk(()=>cv(i)).orThunk(()=>{return Yn(l=a,G.after(c=i)).orThunk(()=>nr(l,G.before(c)));var l,c})):((a,i)=>cv(i).orThunk(()=>dv(i)).orThunk(()=>{return l=a,E.from((c=i).previousSibling?c.previousSibling:c.parentNode).bind(u=>nr(l,G.before(u))).orThunk(()=>Yn(l,G.after(c)));var l,c}))(o,s)).map(kt(w_,n));var r,o,s,a,i})(e,t.getBody(),n.dom),s=Rn(n,kt(k_,t),(a=t.getBody(),l=>l.dom===a));var a;const i=((l,c,u)=>{const f=yr(l).filter(Vn),p=Zn(l).filter(Vn);return $t(l),(b=f,g=p,v=c,h=(C,S,k)=>{const A=C.dom,_=S.dom,D=A.data.length;return Gf(A,_,u),k.container()===_?G(A,D):k},b.isSome()&&g.isSome()&&v.isSome()?E.some(h(b.getOrDie(),g.getOrDie(),v.getOrDie())):E.none()).orThunk(()=>(u&&(f.each(C=>Xf(C.dom,C.dom.length)),p.each(C=>Jc(C.dom,0))),c));var b,g,v,h})(n,o,(c=n,Zt(t.schema.getTextInlineElements(),xe(c))));var c;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(E_).fold(()=>{r&&uv(t,e,i)},l=>{r&&uv(t,e,E.some(l))})},N_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ma=(t,e)=>Te(O(e),gE(t))&&!Ys(t.schema,e)&&t.dom.isEditable(e),fv=t=>{var e,n;return"rtl"===we.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",N_.test(n))},Ts=(t,e,n)=>{const r=(o=t,s=e,Ht(we.DOM.getParents(n.container(),"*",s),o));var o,s;return E.from(r[r.length-1])},Nr=(t,e)=>{const n=e.container(),r=e.offset();return t?hs(n)?lt(n.nextSibling)?G(n.nextSibling,0):G.after(n):bu(e)?G(n,r+1):e:hs(n)?lt(n.previousSibling)?G(n.previousSibling,n.previousSibling.data.length):G.before(n):vu(e)?G(n,r-1):e},mv=kt(Nr,!0),pv=kt(Nr,!1),gv=(t,e)=>{const n=r=>r.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},Yf=t=>gv(t,"Delete"),__=t=>yg(t)||Hi(t),Zc=(t,e)=>{return fe(t,e)?vo(e,__,(n=t,r=>cs(Tn(r),n,ce))):E.none();var n},Qf=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},hv=(t,e,n)=>hn(Dn(n),qr(n),(r,o)=>{const s=Nr(!0,r),a=Nr(!1,o),i=Nr(!1,e);return t?Yn(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s)):nr(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a))}).getOr(!0),bv=t=>{var e;return(8===Ma(e=t)||"#comment"===xe(e)?yr(t):bn(t)).bind(bv).orThunk(()=>E.some(t))},vv=(t,e,n,r=!0)=>{var o;e.deleteContents();const s=bv(n).getOr(n),a=O(null!==(o=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==o?o:n.dom);if(a.dom===t.getBody()?Qf(t,r):$e(a)&&(gs(a),r&&t.selection.setCursorLocation(a.dom,0)),!ce(n,a)){const l=cs(Tn(a),n)?[]:Tn(i=a).map(Ne).map(c=>Ht(c,u=>!ce(i,u))).getOr([]);tt(l.concat(Ne(n)),c=>{ce(c,a)||fe(c,a)||!$e(c)||$t(c)})}var i},Jf=t=>Cn(t,"td,th"),Zf=(t,e)=>({start:t,end:e}),xl=xo([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),td=(t,e)=>zr(O(t),"td,th",e),yv=t=>!ce(t.start,t.end),Cv=(t,e)=>ul(t.start,e).bind(n=>ul(t.end,e).bind(r=>ds(ce(n,r),n))),tm=t=>e=>Cv(e,t).map(n=>({rng:e,table:n,cells:Jf(n)})),xv=(t,e,n,r)=>{if(n.collapsed||!t.forall(yv))return E.none();if(e.isSameTable){const o=t.bind(tm(r));return E.some({start:o,end:o})}{const o=td(n.startContainer,r),s=td(n.endContainer,r),a=o.bind((l=r,c=>ul(c,l).bind(u=>go(Jf(u)).map(f=>Zf(c,f))))).bind(tm(r)),i=s.bind((l=>c=>ul(c,l).bind(u=>Nn(Jf(u)).map(f=>Zf(f,c))))(r)).bind(tm(r));return E.some({start:a,end:i})}var l},wv=(t,e)=>Ls(t,n=>ce(n,e)),em=t=>hn(wv(t.cells,t.rng.start),wv(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),Sv=(t,e)=>{const{startTable:n,endTable:r}=e,o=t.cloneRange();return n.each(s=>o.setStartAfter(s.dom)),r.each(s=>o.setEndBefore(s.dom)),o},kv=t=>tt(t,e=>{d(e,"contenteditable"),gs(e)}),nm=(t,e,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(e.dom.lastChild)):(o.setStartBefore(e.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),rm(t,o,e,!1).each(s=>s())},Ev=t=>{const e=Za(t),n=O(t.selection.getNode());fc(n.dom)&&$e(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&Se(e,r=>ce(r,n))&&Xe(n,"data-mce-selected","1")},Nv=(t,e,n)=>E.some(()=>{const r=t.selection.getRng(),o=n.bind(({rng:s,isStartInTable:a})=>{const i=E.from((c=t).dom.getParent(a?s.endContainer:s.startContainer,c.dom.isBlock)).map(O);var c;s.deleteContents(),((c,u,f)=>{f.each(p=>{u?$t(p):(gs(p),c.selection.setCursorLocation(p.dom,0))})})(t,a,i.filter($e));const l=a?e[0]:e[e.length-1];return nm(t,l,r,a),$e(l)?E.none():E.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);kv(o),Ev(t)}),T_=(t,e,n,r)=>E.some(()=>{const o=t.selection.getRng(),s=e[0],a=n[n.length-1];nm(t,s,o,!0),nm(t,a,o,!1);const i=$e(s)?e:e.slice(1),l=$e(a)?n:n.slice(0,-1);kv(i.concat(l)),r.deleteContents(),Ev(t)}),rm=(t,e,n,r=!0)=>E.some(()=>{vv(t,e,n,r)}),R_=(t,e)=>E.some(()=>fa(t,!1,e)),_v=(t,e)=>He(Yo(e,t),Ui),om=(t,e)=>He(Yo(e,t),qo("caption")),ed=(t,e)=>E.some(()=>{gs(e),t.selection.setCursorLocation(e.dom,0)}),Av=(t,e)=>t?Wb(e):Vb(e),sm=(t,e)=>{const n=O(t.selection.getStart(!0)),r=Za(t);return t.selection.isCollapsed()&&0===r.length?((t,e,n)=>{const r=O(t.getBody());return om(r,n).fold(()=>((o,s,a,i)=>{const l=G.fromRangeStart(o.selection.getRng());return _v(a,i).bind(c=>{return $e(c)?ed(o,c):(f=a,b=c,g=l,Ya(s,o.getBody(),g).bind(v=>_v(f,O(v.getNode())).bind(h=>ce(h,b)?E.none():E.some(At))));var f,b,g})})(t,e,r,n).orThunk(()=>ds(((o,s)=>{const a=G.fromRangeStart(o.selection.getRng());return Av(s,a)||wr(s,o.getBody(),a).exists(i=>Av(s,i))})(t,e),At)),o=>((s,a,i,l)=>{const c=G.fromRangeStart(s.selection.getRng());return $e(l)?ed(s,l):(f=i,b=l,g=c,Ya(p=a,(u=s).getBody(),g).fold(()=>E.some(At),v=>{return C=p,S=g,k=v,Dn((h=b).dom).bind(A=>qr(h.dom).map(_=>C?S.isEqual(A)&&k.isEqual(_):S.isEqual(_)&&k.isEqual(A))).getOr(!0)?((h,C)=>ed(h,C))(u,b):((h,C,S)=>om(h,O(S.getNode())).fold(()=>E.some(At),k=>ds(!ce(k,C),At)))(f,b,v);var h,C,S,k}));var u,f,p,b,g})(t,e,r,o))})(t,e,n):((o,s,a)=>{const i=O(o.getBody()),l=o.selection.getRng();return 0!==a.length?Nv(o,a,E.none()):(c=o,f=l,om(u=i,s).fold(()=>{return b=c,((t,e)=>{const n=(s=t,a=>ce(s,a)),r=((s,a)=>{const i=td(s.startContainer,a),l=td(s.endContainer,a);return hn(i,l,Zf)})(e,n),o=((s,a)=>{const i=b=>ul(O(b),a),l=i(s.startContainer),c=i(s.endContainer),u=l.isSome(),f=c.isSome(),p=hn(l,c,ce).getOr(!1);return{startTable:l,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:p,isMultiTable:!p&&u&&f}})(e,n);var s;return((s,a,i)=>s.exists(l=>{return u=i,!yv(c=l)&&Cv(c,u).exists(f=>{const p=f.dom.rows;return 1===p.length&&1===p[0].cells.length})&&ff(l.start,a);var c,u}))(r,e,n)?r.map(s=>xl.singleCellTable(e,s.start)):o.isMultiTable?((s,a,i,l)=>xv(s,a,i,l).bind(({start:c,end:u})=>{const f=c.bind(em).getOr([]),p=u.bind(em).getOr([]);if(f.length>0&&p.length>0){const b=Sv(i,a);return E.some(xl.multiTable(f,p,b))}return E.none()}))(r,o,e,n):((s,a,i,l)=>xv(s,a,i,l).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=a,f=em(c).getOr([]);if(u&&c.cells.length===f.length)return E.some(xl.fullTable(c.table));if(f.length>0){if(u)return E.some(xl.partialTable(f,E.none()));{const p=Sv(i,a);return E.some(xl.partialTable(f,E.some({...a,rng:p})))}}return E.none()}))(r,o,e,n)})(u,f).bind(h=>h.fold(kt(rm,b),kt(R_,b),kt(Nv,b),kt(T_,b)));var b},b=>ed(c,b)));var c,u,f})(t,n,r)},pa=(t,e)=>{let n=e;for(;n&&n!==t;){if(eo(n)||Ae(n))return n;n=n.parentNode}return null},D_=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],B_=dt.each,am=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),r=o=>Se(D_,s=>rn(o,s))||n.has(o);return{compare:(o,s)=>{if(o.nodeName!==s.nodeName||o.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return B_(e.getAttribs(l),u=>{const f=u.nodeName.toLowerCase();"style"===f||r(f)||(c[f]=e.getAttrib(l,f))}),c},i=(l,c)=>{for(const u in l)if(Zt(l,u)){const f=c[u];if(De(f)||l[u]!==f)return!1;delete c[u]}for(const u in c)if(Zt(c,u))return!1;return!0};return!(wt(o)&&wt(s)&&(!i(a(o),a(s))||!i(e.parseStyle(e.getAttrib(o,"style")),e.parseStyle(e.getAttrib(s,"style"))))||Sr(o)||Sr(s))},isAttributeInternal:r}},Tv=(t,e,n,r)=>{const o=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const c=r.attributes[l];c?c.nodes.push(n):r.attributes[l]={filter:i,nodes:[n]}}}},Rv=(t,e)=>{const n=(r,o)=>{Ce(r,s=>{const a=un(s.nodes);tt(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(o?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!be(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},Ov=(t,e,n,r={})=>{const o=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((c,u)=>{let f=c;for(;f=f.walk();)Tv(s,a,f,l)})(i),l})(t,e,n);Rv(o,r)},im=(t,e,n,r)=>{if((t.pad_empty_with_br||e.insert)&&n(r)){const o=new Qn("br",1);e.insert&&o.attr("data-mce-bogus","1"),r.empty().append(o)}else r.empty().append(new Qn("#text",3)).value=on},Dv=(t,e)=>{const n=t?.firstChild;return gt(n)&&n===t.lastChild&&n.name===e},wl=(t,e,n,r)=>r.isEmpty(e,n,o=>((s,a)=>{const i=s.getElementRule(a.name);return!0===i?.paddEmpty})(t,o)),P_=t=>{let e;for(let n=t;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(e=n)}return E.from(e)},lm=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const r=t.children();for(const o of r)n&&!e.isValidChild(n.name,o.name)&&lm(o,e,n);t.unwrap()}},cm=(t,e,n,r=At)=>{const o=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=dt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=u=>u!==n&&!i[u.name];for(let u=0;u<t.length;u++){const f=t[u];let p,b,g;if(!f.parent||l.has(f))continue;if(o[f.name]&&"li"===f.parent.name){let h=f.next;for(;h&&o[h.name];)h.name="li",l.add(h),f.parent.insert(h,f.parent),h=h.next;f.unwrap();continue}const v=[f];for(p=f.parent;p&&!e.isValidChild(p.name,f.name)&&c(p);p=p.parent)v.push(p);if(p&&v.length>1)if(e.isValidChild(p.name,f.name)){v.reverse(),b=v[0].clone(),r(b);let h=b;for(let C=0;C<v.length-1;C++){e.isValidChild(h.name,v[C].name)&&C>0?(g=v[C].clone(),r(g),h.append(g)):g=h;for(let S=v[C].firstChild;S&&S!==v[C+1];){const k=S.next;g.append(S),S=k}h=g}wl(e,s,a,b)?p.insert(f,v[0],!0):(p.insert(b,v[0],!0),p.insert(f,b)),p=v[0],(wl(e,s,a,p)||Dv(p,"br"))&&p.empty().remove()}else lm(f,e);else if(f.parent){if("li"===f.name){let h=f.prev;if(h&&("ul"===h.name||"ol"===h.name)){h.append(f);continue}if(h=f.next,h&&("ul"===h.name||"ol"===h.name)&&h.firstChild){h.insert(f,h.firstChild,!0);continue}const C=new Qn("ul",1);r(C),f.wrap(C);continue}if(e.isValidChild(f.parent.name,"div")&&e.isValidChild("div",f.name)){const h=new Qn("div",1);r(h),f.wrap(h)}else lm(f,e)}}},Bv=(t,e,n=e.parent)=>!(!n||!t.children[e.name]||t.isValidChild(n.name,e.name))||!(!n||"a"!==e.name||!((r,o)=>{let s=r;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n)),dm=t=>t.collapsed?t:(e=>{const n=G.fromRangeStart(e),r=G.fromRangeEnd(e),o=e.commonAncestorContainer;return wr(!1,o,r).map(s=>!wo(n,r,o)&&wo(n,s,o)?((a,i,l,c)=>{const u=document.createRange();return u.setStart(a,i),u.setEnd(l,c),u})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),um=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},Pv=(t,e)=>{const n=G.after(t),r=ko(e).prev(n);return r?r.toRange():null},F_=["pre"],fm=fc,j_=(t,e,n)=>{var r,o;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,c=Es({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=ur(e)),-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u);let f=s.getRng();const p=f.startContainer,b=t.getBody();var k,A;p===b&&s.isCollapsed()&&a.isBlock(b.firstChild)&&(k=t,gt(A=b.firstChild)&&!k.schema.getVoidElements()[A.nodeName])&&a.isEmpty(b.firstChild)&&(f=a.createRng(),f.setStart(b.firstChild,0),f.setEnd(b.firstChild,0),s.setRng(f)),s.isCollapsed()||(k=>{const A=k.dom,_=dm(k.selection.getRng());k.selection.setRng(_);const D=A.getParent(_.startContainer,fm);var I,j,U;I=A,j=_,gt(U=D)&&U===I.getParent(j.endContainer,fm)&&ff(O(U),j)?rm(k,_,O(D)):_.startContainer===_.endContainer&&_.endOffset-_.startOffset==1&&lt(_.startContainer.childNodes[_.startOffset])?_.deleteContents():k.getDoc().execCommand("Delete",!1)})(t);const g=s.getNode(),v={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},h=i.parse(e,v);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,r=e.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,s)=>{const a=o.getNonEmptyElements();return gt(s)&&(s.isEmpty(a)||(l=s,o.getBlockElements()[l.name]&&gt((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===on)(l.firstChild)));var l,c})(t,r)&&(r=r?.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(t.schema,h)&&((k,A)=>!!um(k,A))(a,g))return f=((t,e,n,r)=>{const o=((f,p,b)=>{const g=p.serialize(b);return(v=>{var h,C;const S=v.firstChild,k=v.lastChild;return S&&"META"===S.nodeName&&(null===(h=S.parentNode)||void 0===h||h.removeChild(S)),k&&"mce_marker"===k.id&&(null===(C=k.parentNode)||void 0===C||C.removeChild(k)),v})(f.createFragment(g))})(e,t,r),s=um(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||gt(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((r=e.firstChild).data===on||Le(r)))?t.slice(0,-1):t;var r,e,n})((i=o.firstChild,Ht(null!==(l=i?.childNodes)&&void 0!==l?l:[],f=>"LI"===f.nodeName)));var i,l;const c=e.getRoot(),u=f=>{const p=G.fromRangeStart(n),b=ko(e.getRoot()),g=1===f?b.prev(p):b.next(p),v=g?.getNode();return!v||um(e,v)!==s};return s?u(1)?((f,p,b)=>{const g=f.parentNode;return g&&dt.each(p,v=>{g.insertBefore(v,f)}),((v,h)=>{const C=G.before(v),S=ko(h).next(C);return S?S.toRange():null})(f,b)})(s,a,c):u(2)?(f=s,b=c,e.insertAfter((p=a).reverse(),f),Pv(p[0],b)):((f,p,b,g)=>{const v=((C,S)=>{const k=S.cloneRange(),A=S.cloneRange();return k.setStartBefore(C),A.setEndAfter(C),[k.cloneContents(),A.cloneContents()]})(f,g),h=f.parentNode;return h&&(h.insertBefore(v[0],f),dt.each(p,C=>{h.insertBefore(C,f)}),h.insertBefore(v[1],f),h.removeChild(f)),Pv(p[p.length-1],b)})(s,a,c,n):null;var f,p,b})(c,a,s.getRng(),h),f&&s.setRng(f),e;!0===n.paste&&((k,A,_,D)=>{var I;const j=A.firstChild,U=A.lastChild,K=j===("bookmark"===U.attr("data-mce-type")?U.prev:U),P=Ot(F_,j.name);if(K&&P){const L="false"!==j.attr("contenteditable"),$=(null===(I=k.getParent(_,k.isBlock))||void 0===I?void 0:I.nodeName.toLowerCase())===j.name,Q=E.from(pa(D,_)).forall(eo);return L&&$&&Q}return!1})(a,h,g,t.getBody())&&(null===(r=h.firstChild)||void 0===r||r.unwrap()),(k=>{let A=k;for(;A=A.walk();)1===A.type&&A.attr("data-mce-fragment","1")})(h);let C=h.lastChild;if(C&&"mce_marker"===C.attr("id")){const k=C;for(C=C.prev;C;C=C.walk(!0))if(3===C.type||!a.isBlock(C.name)){C.parent&&t.schema.isValidChild(C.parent.name,"span")&&C.parent.insert(k,C,"br"===C.name);break}}if(t._selectionOverrides.showBlockCaretContainer(g),v.invalid){t.selection.setContent(u);let k,A=s.getNode();const _=t.getBody();for(ji(A)?A=k=_:k=A;k&&k!==_;)A=k,k=k.parentNode;e=A===_?_.innerHTML:a.getOuterHTML(A);const D=i.parse(e),I=(L=>{for(let $=L;$;$=$.walk())if("mce_marker"===$.attr("id"))return E.some($);return E.none()})(D),j=I.bind(P_).getOr(D);I.each(L=>L.replace(h));const U=h.children(),K=null!==(o=h.parent)&&void 0!==o?o:D;h.unwrap();const P=Ht(U,L=>Bv(t.schema,L,K));cm(P,t.schema,j),Ov(i.getNodeFilters(),i.getAttributeFilters(),D),e=c.serialize(D),A===_?a.setHTML(_,e):a.setOuterHTML(A,e)}else e=c.serialize(h),((k,A,_)=>{var D;if("all"===_.getAttribute("data-mce-bogus"))null===(D=_.parentNode)||void 0===D||D.insertBefore(k.dom.createFragment(A),_);else{const I=_.firstChild;!I||I===_.lastChild&&"BR"===I.nodeName?k.dom.setHTML(_,A):k.selection.setContent(A,{no_events:!0})}})(t,e,g);var S;return((k,A)=>{const _=k.schema.getTextInlineElements(),D=k.dom;if(A){const I=k.getBody(),j=am(k);dt.each(D.select("*[data-mce-fragment]"),U=>{if(gt(_[U.nodeName.toLowerCase()])&&ar(jf(D,U),L=>!zb.has(L)))for(let K=U.parentElement;gt(K)&&K!==I&&!f_(D,U,K);K=K.parentElement)if(j.compare(K,U)){D.remove(U,!0);break}})}})(t,l),((k,A)=>{var _,D,I;let j;const U=k.dom,K=k.selection;if(!A)return;K.scrollIntoView(A);const P=pa(k.getBody(),A);if(P&&"false"===U.getContentEditable(P))return U.remove(A),void K.select(P);let L=U.createRng();const $=A.previousSibling;if(lt($)){L.setStart($,null!==(D=null===(_=$.nodeValue)||void 0===_?void 0:_.length)&&void 0!==D?D:0);const vt=A.nextSibling;lt(vt)&&($.appendData(vt.data),null===(I=vt.parentNode)||void 0===I||I.removeChild(vt))}else L.setStartBefore(A),L.setEndBefore(A);const Q=U.getParent(A,U.isBlock);if(U.remove(A),Q&&U.isEmpty(Q)){const vt=fm(Q);ie(O(Q)),L.setStart(Q,0),L.setEnd(Q,0),vt||Q.getAttribute("data-mce-fragment")||!(j=(it=>{let Rt=G.fromRangeStart(it);return Rt=ko(k.getBody()).next(Rt),Rt?.toRange()})(L))?U.add(Q,U.create("br",vt?{}:{"data-mce-bogus":"1"})):(L=j,U.remove(Q))}K.setRng(L)})(t,a.get("mce_marker")),S=t.getBody(),dt.each(S.getElementsByTagName("*"),k=>{k.removeAttribute("data-mce-fragment")}),((k,A)=>{E.from(k.getParent(A,"td,th")).map(O).each(ck)})(a,s.getStart()),((k,A,_)=>{const D=vr(O(_),I=>ce(I,O(A)));Na(D,D.length-2).filter(An).fold(()=>wu(k,A),I=>wu(k,I.dom))})(t.schema,t.getBody(),s.getStart()),e},nd=t=>t instanceof Qn,mm=(t,e,n)=>{var r;t.dom.setHTML(t.getBody(),e),!0!==n&&ua(r=t)&&Dn(r.getBody()).each(o=>{const s=o.getNode(),a=Ko(s)?Dn(s).getOr(o):o;r.selection.setRng(a.toRange())})},Lv=t=>ge(t)?t:ve,pm=(t,e,n)=>{const r=e(t),o=Lv(n);return r.orThunk(()=>o(t)?E.none():((s,a,i)=>{let l=s.dom;const c=Lv(i);for(;l.parentNode;){l=l.parentNode;const u=O(l),f=a(u);if(f.isSome())return f;if(c(u))break}return E.none()})(t,e,o))},gm=vf,Mv=(t,e,n)=>{const r=t.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const s=r[o];if(kr(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},hm=(t,e,n,r,o)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!Mv(t,i,n)||i.parentNode===s||!!No(t,i,n,r,!0));return!!No(t,a,n,r,o)},rd=(t,e,n)=>!(!en(n)||!gm(e,n.inline))||!(!Eo(n)||!gm(e,n.block))||!!kr(n)&&wt(e)&&t.is(e,n.selector),Iv=(t,e,n,r,o,s)=>{const a=n[r],i="attributes"===r;if(ge(n.onmatch))return n.onmatch(e,n,r);if(a)if(Aa(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):zc(t,e,a[l]))return!0}else for(const l in a)if(Zt(a,l)){const c=i?t.getAttrib(e,l):zc(t,e,l),u=ks(a[l],s),f=be(c)||is(c);if(f&&be(u))continue;if(o&&f&&!n.exact||(!o||n.exact)&&!gm(c,yf(u,l)))return!1}return!0},No=(t,e,n,r,o)=>{const s=t.formatter.get(n),a=t.dom;if(s&&wt(e))for(let i=0;i<s.length;i++){const l=s[i];if(rd(t.dom,e,l)&&Iv(a,e,l,"attributes",o,r)&&Iv(a,e,l,"styles",o,r)){const c=l.classes;if(c)for(let u=0;u<c.length;u++)if(!t.dom.hasClass(e,ks(c[u],r)))return;return l}}},bm=(t,e,n,r,o)=>{if(r)return hm(t,r,e,n,o);if(r=t.selection.getNode(),hm(t,r,e,n,o))return!0;const s=t.selection.getStart();return!(s===r||!hm(t,s,e,n,o))},oi=fn,Fv=t=>(e=>{const n=[];let r=e;for(;r;){if(lt(r)&&r.data!==oi||r.childNodes.length>1)return[];wt(r)&&n.push(r),r=r.firstChild}return n})(t).length>0,jv=t=>{if(t){const e=new tn(t,t);for(let n=e.current();n;n=e.next())if(lt(n))return n}return null},vm=t=>{const e=ot("span");return Ir(e,{id:sf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Nt(e,qt(oi)),e},ym=(t,e,n=!0)=>{const r=t.dom,o=t.selection;if(Fv(e))fa(t,!1,O(e),n);else{const s=o.getRng(),a=r.getParent(e,r.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,u=s.endOffset,f=(p=>{const b=jv(p);return b&&b.data.charAt(0)===oi&&b.deleteData(0,1),b})(e);r.remove(e,!0),i===f&&l>0&&s.setStart(f,l-1),c===f&&u>0&&s.setEnd(f,u-1),a&&r.isEmpty(a)&&gs(O(a)),o.setRng(s)}},Cm=(t,e,n=!0)=>{const r=t.dom,o=t.selection;if(e)ym(t,e,n);else if(!(e=aa(t.getBody(),o.getStart())))for(;e=r.get(sf);)ym(t,e,n)},zv=(t,e)=>(t.appendChild(e),e),Hv=(t,e)=>{var n;const r=Lo(t,(s,a)=>zv(s,a.cloneNode(!1)),e),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return zv(r,o.createTextNode(oi))},Uv=t=>{const e=vm(!1),n=Hv(t,e.dom);return{caretContainer:e,caretPosition:G(n,0)}},qv=(t,e)=>{const{caretContainer:n,caretPosition:r}=Uv(e);return Tt(O(t),n),$t(O(t)),r},$v=(t,e)=>{const n=t.schema.getTextInlineElements();return Zt(n,xe(e))&&!$r(e.dom)&&!Xs(e.dom)},Wv=t=>$r(t.dom)&&Fv(t.dom),Sl={},Vv=to(["pre"]);((t,e)=>{Sl[t]||(Sl[t]=[]),Sl[t].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=Ht(Ht(r,Vv),(s=r,a=>{const i=a.previousSibling;return Vv(i)&&Ot(s,i)}));tt(o,s=>{((a,i)=>{const l=O(i),c=me(l).dom;$t(l),se(O(a),[ot("br",c),ot("br",c),...Ne(l)])})(s.previousSibling,s)})}var s})})("pre");const Kv=["fontWeight","fontStyle","color","fontSize","fontFamily"],Xv=(t,e)=>{const n=t.get(e);return ct(n)?He(n,r=>{return en(r)&&"span"===r.inline&&Kt((o=r).styles)&&Se(Ke(o.styles),s=>Ot(Kv,s));var o}):E.none()},Gv=(t,e)=>nr(e,G.fromRangeStart(t)).isNone(),Yv=(t,e)=>!1===Yn(e,G.fromRangeEnd(t)).exists(n=>!Le(n.getNode())||Yn(e,n).isSome()),Qv=t=>e=>rk(e)&&t.isEditable(e),Jv=t=>Ht(t.getSelectedBlocks(),Qv(t.dom)),xm=dt.each,wm=t=>wt(t)&&!Sr(t)&&!$r(t)&&!Xs(t),Zv=(t,e)=>{for(let n=t;n;n=n[e]){if(lt(n)&&$n(n.data))return t;if(wt(n)&&!Sr(n))return n}return t},ty=(t,e,n)=>{const r=am(t),o=wt(e)&&ia(e),s=wt(n)&&ia(n);if(o&&s){const a=Zv(e,"previousSibling"),i=Zv(n,"nextSibling");if(r.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return t.dom.remove(i),dt.each(dt.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},ey=(t,e,n,r)=>{var o;if(r&&!1!==e.merge_siblings){const s=null!==(o=ty(t,A0(r),r))&&void 0!==o?o:r;ty(t,s,A0(s,!0))}},Sm=(t,e,n)=>{xm(t.childNodes,r=>{wm(r)&&(e(r)&&n(r),r.hasChildNodes()&&Sm(r,e,n))})},ny=(t,e)=>n=>!(!n||!zc(t,n,e)),ry=(t,e,n)=>r=>{var o,s;t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=t,"SPAN"===(s=r).nodeName&&0===o.getAttribs(s).length&&o.remove(s,!0)},ga=xo([{keep:[]},{rename:["name"]},{removed:[]}]),U_=/^(src|href|style)$/,km=dt.each,od=vf,oy=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),sy=(t,e,n)=>{let r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(wt(r)){const s=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>s?s:o]}return lt(r)&&n&&o>=r.data.length&&(r=new tn(r,t.getBody()).next()||r),lt(r)&&!n&&0===o&&(r=new tn(r,t.getBody()).prev()||r),r},ay=(t,e)=>{const n=e?"firstChild":"lastChild",r=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&r?"TR"===t.nodeName&&r[n]||r:t},Em=(t,e,n,r)=>{var o;const s=t.create(n,r);return null===(o=e.parentNode)||void 0===o||o.insertBefore(s,e),s.appendChild(e),s},iy=(t,e,n,r,o)=>{const s=O(e),a=O(t.create(r,o)),i=n?$o(s):Qr(s);return se(a,i),n?(Tt(s,a),Gt(a,s)):(Bt(s,a),Nt(a,s)),a.dom},ly=(t,e,n)=>{const r=e.parentNode;let o;const s=t.dom,a=On(t);var i;Eo(n)&&r===s.getRoot()&&(n.list_block&&od(e,n.list_block)||tt(un(e.childNodes),i=>{ti(t,a,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=Em(s,i,a),s.setAttribs(o,rl(t))):o=null})),kr(i=n)&&en(i)&&cs(ke(i,"mixed"),!0)&&!od(n.inline,e)||s.remove(e,!0)},cy=(t,e,n)=>x(t)?{name:e,value:null}:{name:t,value:ks(e,n)},dy=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},uy=(t,e,n,r,o)=>{let s=!1;km(n.styles,(a,i)=>{const{name:l,value:c}=cy(i,a,r),u=yf(c,l);(n.remove_similar||Qt(c)||!wt(o)||od(zc(t,o,l),u))&&t.setStyle(e,l,""),s=!0}),s&&dy(t,e)},fy=(t,e,n,r,o)=>{const s=t.dom,a=am(t),i=t.schema;if(en(e)&&ku(i,e.inline)&&Ys(i,r)&&r.parentElement===t.getBody())return ly(t,r,e),ga.removed();if(!e.ceFalseOverride&&r&&"false"===s.getContentEditableParent(r)||r&&!rd(s,r,e)&&(!e.links||"A"!==r.nodeName))return ga.keep();const l=r,c=e.preserve_attributes;if(en(e)&&"all"===e.remove&&ct(c)){const u=Ht(s.getAttribs(l),f=>Ot(c,f.name.toLowerCase()));if(s.removeAllAttribs(l),tt(u,f=>s.setAttrib(l,f.name,f.value)),u.length>0)return ga.rename("span")}if("all"!==e.remove){uy(s,l,e,n,o),km(e.attributes,(f,p)=>{const{name:b,value:g}=cy(p,f,n);if(e.remove_similar||Qt(g)||!wt(o)||od(s.getAttrib(o,b),g)){if("class"===b){const v=s.getAttrib(l,b);if(v){let h="";if(tt(v.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(h+=(h?" ":"")+C)}),h)return void s.setAttrib(l,b,h)}}if(U_.test(b)&&l.removeAttribute("data-mce-"+b),"style"===b&&to(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(b),void s.setStyle(l,"list-style-type","none");"class"===b&&l.removeAttribute("className"),l.removeAttribute(b)}}),km(e.classes,f=>{f=ks(f,n),wt(o)&&!s.hasClass(o,f)||s.removeClass(l,f)});const u=s.getAttribs(l);for(let f=0;f<u.length;f++)if(!a.isAttributeInternal(u[f].nodeName))return ga.keep()}return"none"!==e.remove?(ly(t,l,e),ga.removed()):ga.keep()},q_=(t,e,n,r)=>fy(t,e,n,r,r).fold(ht(r),o=>(t.dom.createFragment().appendChild(r),t.dom.rename(r,o)),ht(null)),my=(t,e,n,r,o)=>{(r||t.selection.isEditable())&&((s,a,i,l,c)=>{const u=s.formatter.get(a),f=u[0],p=s.dom,b=s.selection,g=k=>{const A=((_,D,I,j,U)=>{let K;return D.parentNode&&tt(Hc(_.dom,D.parentNode).reverse(),P=>{if(!K&&wt(P)&&"_start"!==P.id&&"_end"!==P.id){const L=No(_,P,I,j,U);L&&!1!==L.split&&(K=P)}}),K})(s,k,a,i,c);return((_,D,I,j,U,K,P,L)=>{var $,Q;let vt,it;const Rt=_.dom;if(I){const Et=I.parentNode;for(let Ut=j.parentNode;Ut&&Ut!==Et;Ut=Ut.parentNode){let Wt=Rt.clone(Ut,!1);for(let xt=0;xt<D.length&&(Wt=q_(_,D[xt],L,Wt),null!==Wt);xt++);Wt&&(vt&&Wt.appendChild(vt),it||(it=Wt),vt=Wt)}P.mixed&&Rt.isBlock(I)||(j=null!==($=Rt.split(I,j))&&void 0!==$?$:j),vt&&it&&(null===(Q=U.parentNode)||void 0===Q||Q.insertBefore(vt,U),it.appendChild(U),en(P)&&ey(_,P,0,vt))}return j})(s,u,A,k,k,0,f,i)},v=k=>Se(u,A=>kl(s,A,i,k,k)),h=k=>{const A=un(k.childNodes),_=v(k)||Se(u,I=>rd(p,k,I)),D=k.parentNode;if(!_&&gt(D)&&xf(f)&&v(D),f.deep&&A.length)for(let I=0;I<A.length;I++)h(A[I]);tt(["underline","line-through","overline"],I=>{wt(k)&&s.dom.getStyle(k,"text-decoration")===I&&k.parentNode&&R0(p,k.parentNode)===I&&kl(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:I}},void 0,k)})},C=k=>{const A=p.get(k?"_start":"_end");if(A){let _=A[k?"firstChild":"lastChild"];return Sr(D=_)&&wt(D)&&("_start"===D.id||"_end"===D.id)&&(_=_[k?"firstChild":"lastChild"]),lt(_)&&0===_.data.length&&(_=k?A.previousSibling||A.nextSibling:A.nextSibling||A.previousSibling),p.remove(A,!0),_}var D;return null},S=k=>{let A,_,D=la(p,k,u,k.collapsed);if(f.split){if(D=Xc(D),A=sy(s,D,!0),_=sy(s,D),A!==_){if(A=ay(A,!0),_=ay(_,!1),oy(p,A,_)){const j=E.from(A.firstChild).getOr(A);return g(iy(p,j,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void C(!0)}if(oy(p,_,A)){const j=E.from(_.lastChild).getOr(_);return g(iy(p,j,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void C(!1)}A=Em(p,A,"span",{id:"_start","data-mce-type":"bookmark"}),_=Em(p,_,"span",{id:"_end","data-mce-type":"bookmark"});const I=p.createRng();I.setStartAfter(A),I.setEndBefore(_),ml(p,I,j=>{tt(j,U=>{Sr(U)||Sr(U.parentNode)||g(U)})}),g(A),g(_),A=C(!0),_=C()}else A=_=g(A);D.startContainer=A.parentNode?A.parentNode:A,D.startOffset=p.nodeIndex(A),D.endContainer=_.parentNode?_.parentNode:_,D.endOffset=p.nodeIndex(_)+1}ml(p,D,I=>{tt(I,h)})};if(l){if(fl(l)){const k=p.createRng();k.setStartBefore(l),k.setEndAfter(l),S(k)}else S(l);V0(s,a,l,i)}else b.isCollapsed()&&en(f)&&!Za(s).length?((t,e,n,r)=>{const o=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),c=l.startContainer,u=l.startOffset;let f=c;lt(c)&&(u!==c.data.length&&(a=!0),f=f.parentNode);const p=[];let b;for(;f;){if(No(t,f,e,n,r)){b=f;break}f.nextSibling&&(a=!0),p.push(f),f=f.parentNode}if(b)if(a){const g=s.getBookmark();l.collapse(!0);let v=la(o,l,i,!0);v=Xc(v),t.formatter.remove(e,n,v,r),s.moveToBookmark(g)}else{const g=aa(t.getBody(),b),v=vm(!1).dom;((S,k,A)=>{var _,D;const I=S.dom,j=I.getParent(A,kt(hf,S.schema));j&&I.isEmpty(j)?null===(_=A.parentNode)||void 0===_||_.replaceChild(k,A):((U=>{const K=Cn(U,"br"),P=Ht((L=>{const $=[];let Q=L.dom;for(;Q;)$.push(O(Q)),Q=Q.lastChild;return $})(U).slice(-1),Gs);K.length===P.length&&tt(P,$t)})(O(A)),I.isEmpty(A)?null===(D=A.parentNode)||void 0===D||D.replaceChild(k,A):I.insertAfter(k,A))})(t,v,g??b);const h=((S,k,A,_,D,I)=>{const j=S.formatter,U=S.dom,K=Ht(Ke(j.get()),L=>L!==_&&!Fe(L,"removeformat")),P=(L=S,$=A,pn(K,(vt,it)=>{const Rt=Cf(L,it,Wt=>{const xt=Ft=>ge(Ft)||Ft.length>1&&"%"===Ft.charAt(0);return Se(["styles","attributes"],Ft=>ke(Wt,Ft).exists(Xt=>{const M=ct(Xt)?Xt:jo(Xt);return Se(M,xt)}))});return L.formatter.matchNode($,it,{},Rt)?vt.concat([it]):vt},[]));var L,$;if(Ht(P,L=>!(($,Q,vt)=>{const it=["inline","block","selector","attributes","styles","classes"],Rt=Et=>hr(Et,(Ut,Wt)=>Se(it,xt=>xt===Wt));return Cf($,Q,Et=>{const Ut=Rt(Et);return Cf($,vt,Wt=>{const xt=Rt(Wt);return((Ft,Xt,M=Ie)=>oe(M).eq(Ft,Xt))(Ut,xt)})})})(S,L,_)).length>0){const L=A.cloneNode(!1);return U.add(k,L),j.remove(_,D,L,I),U.remove(L),E.some(L)}return E.none()})(t,v,b,e,n,r),C=Hv(p.concat(h.toArray()),v);g&&ym(t,g,!1),s.setCursorLocation(C,1),o.isEmpty(b)&&o.remove(b)}})(s,a,i,c):(_0(s,()=>pf(s,S),k=>en(f)&&bm(s,a,i,k)),s.nodeChanged()),k=s,_=i,"removeformat"===(A=a)?tt(Jv(k.selection),D=>{tt(Kv,I=>k.dom.setStyle(D,I,"")),dy(k.dom,D)}):Xv(k.formatter,A).each(D=>{tt(Jv(k.selection),I=>uy(k.dom,I,D,_,null))}),V0(s,a,l,i);var k,A,_})(t,e,n,r,o)},kl=(t,e,n,r,o)=>fy(t,e,n,r,o).fold(ve,s=>(t.dom.rename(r,s),!0),Be),py=dt.each,sd=dt.each,gy=(t,e,n,r)=>{if(sd(n.styles,(o,s)=>{t.setStyle(e,s,ks(o,r))}),n.styles){const o=t.getAttrib(e,"style");o&&t.setAttrib(e,"data-mce-style",o)}},$_=(t,e,n,r)=>{const o=t.formatter.get(e),s=o[0],a=!r&&t.selection.isCollapsed(),i=t.dom,l=t.selection,c=(g,v=s)=>{ge(v.onformat)&&v.onformat(g,v,n,r),gy(i,g,v,n),sd(v.attributes,(h,C)=>{i.setAttrib(g,C,ks(h,n))}),sd(v.classes,h=>{const C=ks(h,n);i.hasClass(g,C)||i.addClass(g,C)})},u=(g,v)=>{let h=!1;return sd(g,C=>!(!kr(C)||("false"!==i.getContentEditable(v)||C.ceFalseOverride)&&(!gt(C.collapsed)||C.collapsed===a)&&i.is(v,C.selector)&&!$r(v)&&(c(v,C),h=!0,1))),h},p=(g,v,h)=>{const C=[];let S=!0;const k=s.inline||s.block,A=(g=>{if(Dt(g)){const v=i.create(g);return c(v),v}return null})(k);ml(g,v,_=>{let D;const I=j=>{let U=!1,K=S,P=!1;const L=j.parentNode,$=L.nodeName.toLowerCase(),Q=g.getContentEditable(j);gt(Q)&&(K=S,S="true"===Q,U=!0,P=T0(t,j));const vt=S&&!U;if(Le(j)&&!((it,Rt,Et,Ut)=>{if(SE(it)&&en(Rt)&&Et.parentNode){const Wt=Ug(it.schema),xt=((t,e)=>((n,r)=>{const o=n.dom;return o.parentNode?(s=O(o.parentNode),He(s.dom.childNodes,i=>(s=>!ce(n,s)&&r(s))(O(i))).map(O)):E.none();var s})(t,e).isSome())(O(Et),Ft=>$r(Ft.dom));return gn(Wt,Ut)&&$e(O(Et.parentNode),!1)&&!xt}return!1})(t,s,j,$))return D=null,void(Eo(s)&&g.remove(j));if(it=j,Eo(Rt=s)&&!0===Rt.wrapper&&No(t,it,e,n))D=null;else{if(((it,Rt,Et)=>{const Ut=Eo(Wt=s)&&!0!==Wt.wrapper&&hf(t.schema,it)&&ti(t,Rt,k);var Wt;return Et&&Ut})(j,$,vt)){const it=g.rename(j,k);return c(it),C.push(it),void(D=null)}if(kr(s)){let it=u(o,j);if(!it&&gt(L)&&xf(s)&&(it=u(o,L)),!en(s)||it)return void(D=null)}gt(A)&&((it,Rt,Et,Ut)=>{const Wt=it.nodeName.toLowerCase(),xt=ti(t,k,Wt)&&ti(t,Rt,k),Ft=!h&&lt(it)&&hc(it.data),Xt=$r(it),M=!en(s)||!g.isBlock(it);return(Et||Ut)&&xt&&!Ft&&!Xt&&M})(j,$,vt,P)?(D||(D=g.clone(A,!1),L.insertBefore(D,j),C.push(D)),P&&U&&(S=K),D.appendChild(j)):(D=null,tt(un(j.childNodes),I),U&&(S=K),D=null)}var it,Rt};tt(_,I)}),!0===s.links&&tt(C,_=>{const D=I=>{"A"===I.nodeName&&c(I,s),tt(un(I.childNodes),D)};D(_)}),tt(C,_=>{const D=(I=>{let j=0;return tt(I.childNodes,U=>{var K;gt(K=U)&&lt(K)&&0===K.length||Sr(U)||j++}),j})(_);var I;!(C.length>1)&&g.isBlock(_)||0!==D?(en(s)||Eo(s)&&s.wrapper)&&(s.exact||1!==D||(_=He((I=_).childNodes,gf).filter(U=>"false"!==g.getContentEditable(U)&&rd(g,U,s)).map(U=>{const K=g.clone(U,!1);return c(K),g.replace(K,I,!0),g.remove(U,!0),K}).getOr(I)),((I,j,U,K)=>{py(j,P=>{var L,$,Q;en(P)&&py(I.dom.select(P.inline,K),L=>{wm(L)&&kl(I,P,U,L,P.exact?L:null)}),L=I.dom,Q=K,($=P).clear_child_styles&&xm(L.select($.links?"*:not(a)":"*",Q),it=>{wm(it)&&ia(it)&&xm($.styles,(Rt,Et)=>{L.setStyle(it,Et,"")})})})})(t,o,n,_),((I,j,U,K,P)=>{const L=P.parentNode;No(I,L,U,K)&&kl(I,j,K,P)||j.merge_with_parents&&L&&I.dom.getParent(L,$=>!!No(I,$,U,K)&&(kl(I,j,K,P),!0))})(t,s,e,n,_),((I,j,U,K)=>{if(j.styles&&j.styles.backgroundColor){const P=ny(I,"fontSize");Sm(K,L=>P(L)&&ia(L),ry(I,"backgroundColor",ks(j.styles.backgroundColor,U)))}})(g,s,n,_),((I,j,U,K)=>{const P=L=>{if(wt(L)&&wt(L.parentNode)&&ia(L)){const $=R0(I,L.parentNode);I.getStyle(L,"color")&&$?I.setStyle(L,"text-decoration",$):I.getStyle(L,"text-decoration")===$&&I.setStyle(L,"text-decoration",null)}};j.styles&&(j.styles.color||j.styles.textDecoration)&&(dt.walk(K,P,"childNodes"),P(K))})(g,s,0,_),((I,j,U,K)=>{if(en(j)&&("sub"===j.inline||"sup"===j.inline)){const P=ny(I,"fontSize");Sm(K,$=>P($)&&ia($),ry(I,"fontSize",""));const L=Ht(I.select("sup"===j.inline?"sub":"sup",K),ia);I.remove(L,!0)}})(g,s,0,_),ey(t,s,0,_)):g.remove(_,!0)})},b=fl(r)?r:l.getNode();if("false"===i.getContentEditable(b)&&!T0(t,b))return u(o,r=b),void W0(t,e,r,n);if(s){if(r)if(fl(r)){if(!u(o,r)){const g=i.createRng();g.setStartBefore(r),g.setEndAfter(r),p(i,la(i,g,o),!0)}}else p(i,r,!0);else a&&en(s)&&!Za(t).length?((g,v,h)=>{let C;const S=g.selection,k=g.formatter.get(v);if(!k)return;const A=S.getRng();let _=A.startOffset;const D=A.startContainer.nodeValue;C=aa(g.getBody(),S.getStart());const I=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(D&&_>0&&_<D.length&&I.test(D.charAt(_))&&I.test(D.charAt(_-1))){const K=S.getBookmark();A.collapse(!0);let P=la(g.dom,A,k);P=Xc(P),g.formatter.apply(v,h,P),S.moveToBookmark(K)}else{let K=C?jv(C):null;C&&K?.data===oi||(j=g.getDoc(),U=vm(!0).dom,C=j.importNode(U,!0),K=C.firstChild,A.insertNode(C),_=1),g.formatter.apply(v,h,C),S.setCursorLocation(K,_)}var j,U})(t,e,n):(l.setRng(dm(l.getRng())),_0(t,()=>{pf(t,(g,v)=>{const h=v?g:la(i,g,o);p(i,h,!1)})},Be),t.nodeChanged()),Xv(t.formatter,e).each(g=>{var v;tt(Ht((h=>{const C=h.getSelectedBlocks(),S=h.getRng();if(h.isCollapsed())return[];if(1===C.length)return Gv(S,C[0])&&Yv(S,C[0])?C:[];{const k=Nn(C).filter(D=>Gv(S,D)).toArray(),A=go(C).filter(D=>Yv(S,D)).toArray(),_=C.slice(1,-1);return k.concat(_).concat(A)}})(v=t.selection),Qv(v.dom)),v=>gy(i,v,g,n))});v=t,Zt(Sl,g=e)&&tt(Sl[g],h=>{h(v)})}var g,v;W0(t,e,r,n)},hy=(t,e,n,r)=>{(r||t.selection.isEditable())&&$_(t,e,n,r)},by=t=>Zt(t,"vars"),vy=t=>t.selection.getStart(),yy=(t,e,n,r,o)=>Dr(e,s=>{const a=t.formatter.matchNode(s,n,o??{},r);return!De(a)},s=>!!Mv(t,s,n)||!r&&gt(t.formatter.matchNode(s,n,o,!0))),Cy=(t,e)=>{const n=e??vy(t);return Ht(Hc(t.dom,n),r=>wt(r)&&!Xs(r))},xy=(t,e,n)=>{const r=Cy(t,e);Ce(n,(o,s)=>{const a=i=>{const l=yy(t,r,s,i.similar,by(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const u=l.getOr(e);by(i)?i.callback(c,{node:u,format:s,parents:r}):tt(i.callbacks,f=>f(c,{node:u,format:s,parents:r}))}};tt([o.withSimilar,o.withoutSimilar],a),tt(o.withVars,a)})},wy=dt.explode,Sy=()=>{const t={};return{addFilter:(e,n)=>{tt(wy(e),r=>{Zt(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>jo(t),removeFilter:(e,n)=>{tt(wy(e),r=>{if(Zt(t,r))if(gt(n)){const o=t[r],s=Ht(o.callbacks,a=>a!==n);s.length>0?o.callbacks=s:delete t[r]}else delete t[r]})}}},ky=(t,e,n)=>{e.addNodeFilter("br",(r,o,s)=>{const a=dt.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),l=n.getWhitespaceElements();a.body=1;const c=u=>u.name in a||Nu(n,u);for(let u=0,f=r.length;u<f;u++){let p=r[u],b=p.parent;if(b&&c(b)&&p===b.lastChild){let g=p.prev;for(;g;){const v=g.name;if("span"!==v||"bookmark"!==g.attr("data-mce-type")){"br"===v&&(p=null);break}g=g.prev}if(p&&(p.remove(),wl(n,i,l,b))){const v=n.getElementRule(b.name);v&&(v.removeEmpty?b.remove():v.paddEmpty&&im(t,s,c,b))}}else{let g=p;for(;b&&b.firstChild===g&&b.lastChild===g&&(g=b,!a[b.name]);)b=b.parent;if(g===b){const v=new Qn("#text",3);v.value=on,p.replace(v)}}}})},Nm=t=>{const[e,...n]=t.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(o){const s=";base64"===o[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(r):decodeURIComponent(r);return E.some({type:o[1],data:a,base64Encoded:s})}return E.none()},Ey=(t,e,n=!0)=>{let r=e;if(n)try{r=atob(e)}catch{return E.none()}const o=new Uint8Array(r.length);for(let s=0;s<o.length;s++)o[s]=r.charCodeAt(s);return E.some(new Blob([o],{type:t}))},Ny=t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(t)});let V_=0;const _y=(t,e,n)=>Nm(t).bind(({data:r,type:o,base64Encoded:s})=>{if(e&&!s)return E.none();{const a=s?r:btoa(r);return n(a,o)}}),Ay=(t,e,n)=>{const r=t.create("blobid"+V_++,e,n);return t.add(r),r},Ty=(t,e,n=!1)=>_y(e,n,(r,o)=>E.from(t.getByData(r,o)).orThunk(()=>Ey(o,r).map(s=>Ay(t,s,r))));function ha(t){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function _m(t,e){return(_m=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(t,e)}function Am(t,e,n){return(Am=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(r,o,s){var a=[null];a.push.apply(a,o);var i=new(Function.bind.apply(r,a));return s&&_m(i,s.prototype),i}).apply(null,arguments)}function so(t){return function(e){if(Array.isArray(e))return Tm(e)}(t)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return Tm(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tm(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X_=Object.hasOwnProperty,Ry=Object.setPrototypeOf,G_=Object.isFrozen,Y_=Object.getPrototypeOf,Q_=Object.getOwnPropertyDescriptor,rr=Object.freeze,_o=Object.seal,J_=Object.create,Oy=typeof Reflect<"u"&&Reflect,ad=Oy.apply,Rm=Oy.construct;ad||(ad=function(t,e,n){return t.apply(e,n)}),rr||(rr=function(t){return t}),_o||(_o=function(t){return t}),Rm||(Rm=function(t,e){return Am(t,so(e))});var Dy,Z_=ao(Array.prototype.forEach),tA=ao(Array.prototype.pop),El=ao(Array.prototype.push),id=ao(String.prototype.toLowerCase),eA=ao(String.prototype.match),Rs=ao(String.prototype.replace),nA=ao(String.prototype.indexOf),rA=ao(String.prototype.trim),or=ao(RegExp.prototype.test),Om=(Dy=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Rm(Dy,e)});function ao(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return ad(t,e,r)}}function he(t,e){Ry&&Ry(t,null);for(var n=e.length;n--;){var r=e[n];if("string"==typeof r){var o=id(r);o!==r&&(G_(e)||(e[n]=o),r=o)}t[r]=!0}return t}function ba(t){var e,n=J_(null);for(e in t)ad(X_,t,[e])&&(n[e]=t[e]);return n}function ld(t,e){for(;null!==t;){var n=Q_(t,e);if(n){if(n.get)return ao(n.get);if("function"==typeof n.value)return ao(n.value)}t=Y_(t)}return function(r){return console.warn("fallback value for",r),null}}var By=rr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Dm=rr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Bm=rr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),oA=rr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Pm=rr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),sA=rr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Py=rr(["#text"]),Ly=rr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Lm=rr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),My=rr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),cd=rr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),aA=_o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),iA=_o(/<%[\w\W]*|[\w\W]*%>/gm),lA=_o(/^data-[\-\w.\u00B7-\uFFFF]/),cA=_o(/^aria-[\-\w]+$/),dA=_o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),uA=_o(/^(?:\w+script|data):/i),fA=_o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mA=_o(/^html$/i),gA=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window,n=function(V){return t(V)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var r=e.document,o=e.document,s=e.DocumentFragment,a=e.HTMLTemplateElement,i=e.Node,l=e.Element,c=e.NodeFilter,u=e.NamedNodeMap,f=void 0===u?e.NamedNodeMap||e.MozNamedAttrMap:u,p=e.HTMLFormElement,b=e.DOMParser,g=e.trustedTypes,v=l.prototype,h=ld(v,"cloneNode"),C=ld(v,"nextSibling"),S=ld(v,"childNodes"),k=ld(v,"parentNode");if("function"==typeof a){var A=o.createElement("template");A.content&&A.content.ownerDocument&&(o=A.content.ownerDocument)}var _=function(V,Yt){if("object"!==ha(V)||"function"!=typeof V.createPolicy)return null;var Lt=null,Ee="data-tt-policy-suffix";Yt.currentScript&&Yt.currentScript.hasAttribute(Ee)&&(Lt=Yt.currentScript.getAttribute(Ee));var Ze="dompurify"+(Lt?"#"+Lt:"");try{return V.createPolicy(Ze,{createHTML:function(Bn){return Bn}})}catch{return console.warn("TrustedTypes policy "+Ze+" could not be created."),null}}(g,r),D=_?_.createHTML(""):"",j=o.implementation,U=o.createNodeIterator,K=o.createDocumentFragment,P=o.getElementsByTagName,L=r.importNode,$={};try{$=ba(o).documentMode?o.documentMode:{}}catch{}var Q={};n.isSupported="function"==typeof k&&j&&void 0!==j.createHTMLDocument&&9!==$;var vt,it,Rt=aA,Et=iA,Ut=lA,Wt=cA,xt=uA,Ft=fA,Xt=dA,M=null,z=he({},[].concat(so(By),so(Dm),so(Bm),so(Pm),so(Py))),Y=null,nt=he({},[].concat(so(Ly),so(Lm),so(My),so(cd))),q=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),st=null,ut=null,pt=!0,bt=!0,ft=!1,jt=!1,pe=!1,jn=!1,Je=!1,Me=!1,zn=!1,Rr=!1,mn=!0,Zo=!0,nn=!1,co={},Do=null,Bs=he({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),yi=null,nu=he({},["audio","video","img","source","image","track"]),ts=null,es=he({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ci="http://www.w3.org/1998/Math/MathML",mr="http://www.w3.org/2000/svg",Or="http://www.w3.org/1999/xhtml",Bo=Or,Kl=!1,ZO=["application/xhtml+xml","text/html"],xi=null,tD=o.createElement("form"),WS=function(V){return V instanceof RegExp||V instanceof Function},cg=function(V){xi&&xi===V||(V&&"object"===ha(V)||(V={}),V=ba(V),M="ALLOWED_TAGS"in V?he({},V.ALLOWED_TAGS):z,Y="ALLOWED_ATTR"in V?he({},V.ALLOWED_ATTR):nt,ts="ADD_URI_SAFE_ATTR"in V?he(ba(es),V.ADD_URI_SAFE_ATTR):es,yi="ADD_DATA_URI_TAGS"in V?he(ba(nu),V.ADD_DATA_URI_TAGS):nu,Do="FORBID_CONTENTS"in V?he({},V.FORBID_CONTENTS):Bs,st="FORBID_TAGS"in V?he({},V.FORBID_TAGS):{},ut="FORBID_ATTR"in V?he({},V.FORBID_ATTR):{},co="USE_PROFILES"in V&&V.USE_PROFILES,pt=!1!==V.ALLOW_ARIA_ATTR,bt=!1!==V.ALLOW_DATA_ATTR,ft=V.ALLOW_UNKNOWN_PROTOCOLS||!1,jt=V.SAFE_FOR_TEMPLATES||!1,pe=V.WHOLE_DOCUMENT||!1,Me=V.RETURN_DOM||!1,zn=V.RETURN_DOM_FRAGMENT||!1,Rr=V.RETURN_TRUSTED_TYPE||!1,Je=V.FORCE_BODY||!1,mn=!1!==V.SANITIZE_DOM,Zo=!1!==V.KEEP_CONTENT,nn=V.IN_PLACE||!1,Xt=V.ALLOWED_URI_REGEXP||Xt,Bo=V.NAMESPACE||Or,V.CUSTOM_ELEMENT_HANDLING&&WS(V.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=V.CUSTOM_ELEMENT_HANDLING.tagNameCheck),V.CUSTOM_ELEMENT_HANDLING&&WS(V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),V.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),vt=vt=-1===ZO.indexOf(V.PARSER_MEDIA_TYPE)?"text/html":V.PARSER_MEDIA_TYPE,it="application/xhtml+xml"===vt?function(Yt){return Yt}:id,jt&&(bt=!1),zn&&(Me=!0),co&&(M=he({},so(Py)),Y=[],!0===co.html&&(he(M,By),he(Y,Ly)),!0===co.svg&&(he(M,Dm),he(Y,Lm),he(Y,cd)),!0===co.svgFilters&&(he(M,Bm),he(Y,Lm),he(Y,cd)),!0===co.mathMl&&(he(M,Pm),he(Y,My),he(Y,cd))),V.ADD_TAGS&&(M===z&&(M=ba(M)),he(M,V.ADD_TAGS)),V.ADD_ATTR&&(Y===nt&&(Y=ba(Y)),he(Y,V.ADD_ATTR)),V.ADD_URI_SAFE_ATTR&&he(ts,V.ADD_URI_SAFE_ATTR),V.FORBID_CONTENTS&&(Do===Bs&&(Do=ba(Do)),he(Do,V.FORBID_CONTENTS)),Zo&&(M["#text"]=!0),pe&&he(M,["html","head","body"]),M.table&&(he(M,["tbody"]),delete st.tbody),rr&&rr(V),xi=V)},VS=he({},["mi","mo","mn","ms","mtext"]),KS=he({},["foreignobject","desc","title","annotation-xml"]),eD=he({},["title","style","font","a","script"]),ru=he({},Dm);he(ru,Bm),he(ru,oA);var dg=he({},Pm);he(dg,sA);var ns=function(V){El(n.removed,{element:V});try{V.parentNode.removeChild(V)}catch{try{V.outerHTML=D}catch{V.remove()}}},ou=function(V,Yt){try{El(n.removed,{attribute:Yt.getAttributeNode(V),from:Yt})}catch{El(n.removed,{attribute:null,from:Yt})}if(Yt.removeAttribute(V),"is"===V&&!Y[V])if(Me||zn)try{ns(Yt)}catch{}else try{Yt.setAttribute(V,"")}catch{}},XS=function(V){var Yt,Lt;if(Je)V="<remove></remove>"+V;else{var Ee=eA(V,/^[\r\n\t ]+/);Lt=Ee&&Ee[0]}"application/xhtml+xml"===vt&&(V='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+V+"</body></html>");var Ze=_?_.createHTML(V):V;if(Bo===Or)try{Yt=(new b).parseFromString(Ze,vt)}catch{}if(!Yt||!Yt.documentElement){Yt=j.createDocument(Bo,"template",null);try{Yt.documentElement.innerHTML=Kl?"":Ze}catch{}}var Bn=Yt.body||Yt.documentElement;return V&&Lt&&Bn.insertBefore(o.createTextNode(Lt),Bn.childNodes[0]||null),Bo===Or?P.call(Yt,pe?"html":"body")[0]:pe?Yt.documentElement:Bn},GS=function(V){return U.call(V.ownerDocument||V,V,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Xl=function(V){return"object"===ha(i)?V instanceof i:V&&"object"===ha(V)&&"number"==typeof V.nodeType&&"string"==typeof V.nodeName},rs=function(V,Yt,Lt){Q[V]&&Z_(Q[V],function(Ee){Ee.call(n,Yt,Lt,xi)})},YS=function(V){var Yt,Lt;if(rs("beforeSanitizeElements",V,null),(Lt=V)instanceof p&&("string"!=typeof Lt.nodeName||"string"!=typeof Lt.textContent||"function"!=typeof Lt.removeChild||!(Lt.attributes instanceof f)||"function"!=typeof Lt.removeAttribute||"function"!=typeof Lt.setAttribute||"string"!=typeof Lt.namespaceURI||"function"!=typeof Lt.insertBefore)||or(/[\u0080-\uFFFF]/,V.nodeName))return ns(V),!0;var Ee=it(V.nodeName);if(rs("uponSanitizeElement",V,{tagName:Ee,allowedTags:M}),V.hasChildNodes()&&!Xl(V.firstElementChild)&&(!Xl(V.content)||!Xl(V.content.firstElementChild))&&or(/<[/\w]/g,V.innerHTML)&&or(/<[/\w]/g,V.textContent)||"select"===Ee&&or(/<template/i,V.innerHTML))return ns(V),!0;if(!M[Ee]||st[Ee]){if(!st[Ee]&&JS(Ee)&&(q.tagNameCheck instanceof RegExp&&or(q.tagNameCheck,Ee)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Ee)))return!1;if(Zo&&!Do[Ee]){var Ze=k(V)||V.parentNode,Bn=S(V)||V.childNodes;if(Bn&&Ze)for(var ln=Bn.length-1;ln>=0;--ln)Ze.insertBefore(h(Bn[ln],!0),C(V))}return ns(V),!0}return V instanceof l&&!function(uo){var cn=k(uo);cn&&cn.tagName||(cn={namespaceURI:Or,tagName:"template"});var dn=id(uo.tagName),Ea=id(cn.tagName);return uo.namespaceURI===mr?cn.namespaceURI===Or?"svg"===dn:cn.namespaceURI===Ci?"svg"===dn&&("annotation-xml"===Ea||VS[Ea]):!!ru[dn]:uo.namespaceURI===Ci?cn.namespaceURI===Or?"math"===dn:cn.namespaceURI===mr?"math"===dn&&KS[Ea]:!!dg[dn]:uo.namespaceURI===Or&&!(cn.namespaceURI===mr&&!KS[Ea])&&!(cn.namespaceURI===Ci&&!VS[Ea])&&!dg[dn]&&(eD[dn]||!ru[dn])}(V)?(ns(V),!0):"noscript"!==Ee&&"noembed"!==Ee||!or(/<\/no(script|embed)/i,V.innerHTML)?(jt&&3===V.nodeType&&(Yt=Rs(Yt=V.textContent,Rt," "),Yt=Rs(Yt,Et," "),V.textContent!==Yt&&(El(n.removed,{element:V.cloneNode()}),V.textContent=Yt)),rs("afterSanitizeElements",V,null),!1):(ns(V),!0)},QS=function(V,Yt,Lt){if(mn&&("id"===Yt||"name"===Yt)&&(Lt in o||Lt in tD))return!1;if((!bt||ut[Yt]||!or(Ut,Yt))&&(!pt||!or(Wt,Yt)))if(!Y[Yt]||ut[Yt]){if(!(JS(V)&&(q.tagNameCheck instanceof RegExp&&or(q.tagNameCheck,V)||q.tagNameCheck instanceof Function&&q.tagNameCheck(V))&&(q.attributeNameCheck instanceof RegExp&&or(q.attributeNameCheck,Yt)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(Yt))||"is"===Yt&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&or(q.tagNameCheck,Lt)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Lt))))return!1}else if(!ts[Yt]&&!or(Xt,Rs(Lt,Ft,""))&&("src"!==Yt&&"xlink:href"!==Yt&&"href"!==Yt||"script"===V||0!==nA(Lt,"data:")||!yi[V])&&(!ft||or(xt,Rs(Lt,Ft,"")))&&Lt)return!1;return!0},JS=function(V){return V.indexOf("-")>0},ZS=function(V){var Yt,Lt,Ee,Ze;rs("beforeSanitizeAttributes",V,null);var Bn=V.attributes;if(Bn){var ln={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Y};for(Ze=Bn.length;Ze--;){var uo=Yt=Bn[Ze],cn=uo.name,dn=uo.namespaceURI;Lt="value"===cn?Yt.value:rA(Yt.value),Ee=it(cn);var Ea=Lt;if(ln.attrName=Ee,ln.attrValue=Lt,ln.keepAttr=!0,ln.forceKeepAttr=void 0,rs("uponSanitizeAttribute",V,ln),Lt=ln.attrValue,!ln.forceKeepAttr)if(ln.keepAttr)if(or(/\/>/i,Lt))ou(cn,V);else{jt&&(Lt=Rs(Lt,Rt," "),Lt=Rs(Lt,Et," "));var rD=it(V.nodeName);if(QS(rD,Ee,Lt)){if(Lt!==Ea)try{dn?V.setAttributeNS(dn,cn,Lt):V.setAttribute(cn,Lt)}catch{ou(cn,V)}}else ou(cn,V)}else ou(cn,V)}rs("afterSanitizeAttributes",V,null)}},nD=function V(Yt){var Lt,Ee=GS(Yt);for(rs("beforeSanitizeShadowDOM",Yt,null);Lt=Ee.nextNode();)rs("uponSanitizeShadowNode",Lt,null),YS(Lt)||(Lt.content instanceof s&&V(Lt.content),ZS(Lt));rs("afterSanitizeShadowDOM",Yt,null)};return n.sanitize=function(V,Yt){var Lt,Ee,Ze,Bn,ln;if((Kl=!V)&&(V="\x3c!--\x3e"),"string"!=typeof V&&!Xl(V)){if("function"!=typeof V.toString)throw Om("toString is not a function");if("string"!=typeof(V=V.toString()))throw Om("dirty is not a string, aborting")}if(!n.isSupported){if("object"===ha(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof V)return e.toStaticHTML(V);if(Xl(V))return e.toStaticHTML(V.outerHTML)}return V}if(jn||cg(Yt),n.removed=[],"string"==typeof V&&(nn=!1),nn){if(V.nodeName){var uo=it(V.nodeName);if(!M[uo]||st[uo])throw Om("root node is forbidden and cannot be sanitized in-place")}}else if(V instanceof i)1===(Ee=(Lt=XS("\x3c!----\x3e")).ownerDocument.importNode(V,!0)).nodeType&&"BODY"===Ee.nodeName||"HTML"===Ee.nodeName?Lt=Ee:Lt.appendChild(Ee);else{if(!Me&&!jt&&!pe&&-1===V.indexOf("<"))return _&&Rr?_.createHTML(V):V;if(!(Lt=XS(V)))return Me?null:Rr?D:""}Lt&&Je&&ns(Lt.firstChild);for(var cn=GS(nn?V:Lt);Ze=cn.nextNode();)3===Ze.nodeType&&Ze===Bn||YS(Ze)||(Ze.content instanceof s&&nD(Ze.content),ZS(Ze),Bn=Ze);if(Bn=null,nn)return V;if(Me){if(zn)for(ln=K.call(Lt.ownerDocument);Lt.firstChild;)ln.appendChild(Lt.firstChild);else ln=Lt;return Y.shadowroot&&(ln=L.call(r,ln,!0)),ln}var dn=pe?Lt.outerHTML:Lt.innerHTML;return pe&&M["!doctype"]&&Lt.ownerDocument&&Lt.ownerDocument.doctype&&Lt.ownerDocument.doctype.name&&or(mA,Lt.ownerDocument.doctype.name)&&(dn="<!DOCTYPE "+Lt.ownerDocument.doctype.name+">\n"+dn),jt&&(dn=Rs(dn,Rt," "),dn=Rs(dn,Et," ")),_&&Rr?_.createHTML(dn):dn},n.setConfig=function(V){cg(V),jn=!0},n.clearConfig=function(){xi=null,jn=!1},n.isValidAttribute=function(V,Yt,Lt){xi||cg({});var Ee=it(V),Ze=it(Yt);return QS(Ee,Ze,Lt)},n.addHook=function(V,Yt){"function"==typeof Yt&&(Q[V]=Q[V]||[],El(Q[V],Yt))},n.removeHook=function(V){if(Q[V])return tA(Q[V])},n.removeHooks=function(V){Q[V]&&(Q[V]=[])},n.removeAllHooks=function(){Q={}},n}();const Iy=dt.each,hA=dt.trim,bA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],vA={ftp:21,http:80,https:443,mailto:25},yA=["img","video"],Fy=(t,e,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!t.allow_html_data_urls&&(/^data:image\//i.test(r)?(s=n,(gt(o=t.allow_svg_data_urls)?!o:!gt(s)||!Ot(yA,s))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,s};class io{static parseDataUri(e){let n;const r=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(e,n,r={}){if(r.allow_script_urls)return!0;{const o=vs.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Fy(r,o,n)}}static getDocumentBaseUrl(e){var n;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,n={}){this.path="",this.directory="",e=hA(e),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=r?r.path:new io(document.location.href).directory;if(""===r?.protocol)e="//mce_host"+o.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&Iy(bA,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),o[i]=c}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),s&&(o.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new io(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const r=new io(e,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?vA[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let r,o,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(r=0,o=i.length;r<o;r++)if(r>=l.length||i[r]!==l[r]){s=r+1;break}if(i.length<l.length)for(r=0,o=l.length;r<o;r++)if(r>=i.length||i[r]!==l[r]){s=r+1;break}if(1===s)return n;for(r=0,o=i.length-(s-1);r<o;r++)a+="../";for(r=s-1,o=l.length;r<o;r++)a+=r!==s-1?"/"+l[r]:l[r];return a}toAbsPath(e,n){let r=0;const o=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];Iy(s,f=>{f&&i.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)0!==a[f].length&&"."!==a[f]&&(".."!==a[f]?r>0?r--:l.push(a[f]):r++);const c=i.length-r;let u;return u=c<=0?Kr(l).join("/"):i.slice(0,c).join("/")+"/"+Kr(l).join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const CA=dt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Mm="data-mce-type";let jy=0;const zy=(t,e,n,r)=>{var o,s,a,i;const l=e.validate,c=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(o=t.nodeValue)&&void 0!==o?o:"")&&(t.nodeValue=" "+t.nodeValue);const u=null!==(s=r?.tagName)&&void 0!==s?s:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===u)return;const f=O(t),p=Ws(f,Mm),b=Kn(f,"data-mce-bogus");if(!p&&Dt(b))return void("all"===b?$t(f):ee(f));const g=n.getElementRule(u);if(!l||g){if(gt(r)&&(r.allowedTags[u]=!0),l&&g&&!p){if(tt(null!==(a=g.attributesForced)&&void 0!==a?a:[],v=>{Xe(f,v.name,"{$uid}"===v.value?"mce_"+jy++:v.value)}),tt(null!==(i=g.attributesDefault)&&void 0!==i?i:[],v=>{Ws(f,v.name)||Xe(f,v.name,"{$uid}"===v.value?"mce_"+jy++:v.value)}),g.attributesRequired&&!Se(g.attributesRequired,v=>Ws(f,v))||g.removeEmptyAttrs&&(v=>{const h=v.dom.attributes;return null==h||0===h.length})(f))return void ee(f);g.outputName&&g.outputName!==u&&((v,h)=>{const C=((k,A)=>{const _=ot(A),D=m(k);return Ir(_,D),_})(v,h);Bt(v,C);const S=Ne(v);se(C,S),$t(v)})(f,g.outputName)}}else Zt(c,u)?$t(f):ee(f)},Hy=(t,e,n,r,o)=>!(r in CA&&Fy(t,o,n))&&(!t.validate||e.isValid(n,r)||rn(r,"data-")||rn(r,"aria-")),Uy=(t,e)=>t.hasAttribute(Mm)&&("id"===e||"class"===e||"style"===e),qy=(t,e)=>t in e.getBoolAttrs(),xA=(t,e,n)=>{const{attributes:r}=t;for(let o=r.length-1;o>=0;o--){const s=r[o],a=s.name,i=s.value;Hy(e,n,t.tagName.toLowerCase(),a,i)||Uy(t,a)?qy(a,n)&&t.setAttribute(a,a):t.removeAttribute(a)}},$y=dt.makeMap,Wy=dt.extend,Vy=(t,e,n)=>{const r=t.name,o=r in n&&"title"!==r&&"textarea"!==r,s=e.childNodes;for(let a=0,i=s.length;a<i;a++){const l=s[a],c=new Qn(l.nodeName.toLowerCase(),l.nodeType);if(wt(l)){const u=l.attributes;for(let f=0,p=u.length;f<p;f++){const b=u[f];c.attr(b.name,b.value)}}else lt(l)?(c.value=l.data,o&&(c.raw=!0)):(ms(l)||tk(l)||ek(l))&&(c.value=l.data);Vy(c,l,n),t.append(c)}},si=(t={},e=ys())=>{const n=Sy(),r=Sy(),o={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((v,h)=>{if(v.sanitize){const C=((t,e)=>{const n=gA();return n.addHook("uponSanitizeElement",(r,o)=>{zy(r,t,e,o)}),n.addHook("uponSanitizeAttribute",(r,o)=>{const s=r.tagName.toLowerCase(),{attrName:a,attrValue:i}=o;o.keepAttr=Hy(t,e,s,a,i),o.keepAttr?(o.allowedAttributes[a]=!0,qy(a,e)&&(o.attrValue=a),t.allow_svg_data_urls&&rn(i,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):Uy(r,a)&&(o.forceKeepAttr=!0)}),n})(v,h);return(S,k)=>{C.sanitize(S,((A,_)=>{const D={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return D.PARSER_MEDIA_TYPE=_,A.allow_script_urls?D.ALLOWED_URI_REGEXP=/.*/:A.allow_html_data_urls&&(D.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),D})(v,k)),C.removed=[]}}return(C,S)=>{const k=document.createNodeIterator(C,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let A;for(;A=k.nextNode();)zy(A,v,h),wt(A)&&xA(A,v,h)}})(o,e),l=n.getFilters,f=r.getFilters,b=(v,h)=>{const C=Dt(h.attr(Mm)),S=1===h.type&&!Zt(v,h.name)&&!Nu(e,h);return 3===h.type||S&&!C},g={schema:e,addAttributeFilter:r.addFilter,getAttributeFilters:f,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(v,h={})=>{var C;const S=o.validate,k=null!==(C=h.context)&&void 0!==C?C:o.root_name,A=(($,Q,vt="html")=>{const it="xhtml"===vt?"application/xhtml+xml":"text/html",Rt=Zt(e.getSpecialElements(),Q.toLowerCase()),Et=Rt?`<${Q}>${$}</${Q}>`:$,Wt=s.parseFromString("xhtml"===vt?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Et}</body></html>`:`<body>${Et}</body>`,it).body;return a(Wt,it),Rt?Wt.firstChild:Wt})(v,k,h.format);wu(e,A);const _=new Qn(k,11);Vy(_,A,e.getSpecialElements()),A.innerHTML="";const[D,I]=(($,Q,vt,it)=>{const Rt=vt.validate,Et=Q.getNonEmptyElements(),Ut=Q.getWhitespaceElements(),Wt=Wy($y("script,style,head,html,body,title,meta,param"),Q.getBlockElements()),xt=Ug(Q),Ft=/[ \t\r\n]+/g,Xt=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,z=q=>{let st=q.parent;for(;gt(st);){if(st.name in Ut)return!0;st=st.parent}return!1},Y=q=>q.name in Wt||Nu(Q,q),nt=(q,st)=>!gt(st?q.prev:q.next)&&!be(q.parent)&&Y(q.parent)&&(q.parent!==$||!0===it.isRootContent);return[q=>{var st,pt,bt;if(3===q.type&&!z(q)){let ut=null!==(st=q.value)&&void 0!==st?st:"";ut=ut.replace(Ft," "),bt=Y,(gt(pt=q.prev)&&(bt(pt)||"br"===pt.name)||nt(q,!0))&&(ut=ut.replace(Xt,"")),0===ut.length?q.remove():q.value=ut}},q=>{var st,bt,ft;if(1===q.type){const ut=Q.getElementRule(q.name);if(Rt&&ut){const pt=wl(Q,Et,Ut,q);ut.paddInEmptyBlock&&pt&&(bt=>{let ft=bt;for(;gt(ft);){if(ft.name in xt)return wl(Q,Et,Ut,ft);ft=ft.parent}return!1})(q)?im(vt,it,Y,q):ut.removeEmpty&&pt?Y(q)?q.remove():q.unwrap():ut.paddEmpty&&(pt||Dv(bt=q,"#text")&&(null===(ft=bt?.firstChild)||void 0===ft?void 0:ft.value)===on)&&im(vt,it,Y,q)}}else if(3===q.type&&!z(q)){let ut=null!==(st=q.value)&&void 0!==st?st:"";(q.next&&Y(q.next)||nt(q,!1))&&(ut=ut.replace(M,"")),0===ut.length?q.remove():q.value=ut}}]})(_,e,o,h),j=[],K={nodes:{},attributes:{}},P=$=>Tv(l(),f(),$,K);if((($,Q,vt)=>{const it=[];for(let Rt=$,Et=Rt;Rt;Et=Rt,Rt=Rt.walk()){const Ut=Rt;tt(Q,Wt=>Wt(Ut)),be(Ut.parent)&&Ut!==$?Rt=Et:it.push(Ut)}for(let Rt=it.length-1;Rt>=0;Rt--){const Et=it[Rt];tt(vt,Ut=>Ut(Et))}})(_,[D,P],[I,S?$=>{return vt=j,void(Bv(e,Q=$)&&vt.push(Q));var Q,vt}:At]),j.reverse(),S&&j.length>0)if(h.context){const{pass:$,fail:Q}=Vr(j,vt=>vt.parent===_);cm(Q,e,_,P),h.invalid=$.length>0}else cm(j,e,_,P);const L=(($,Q)=>{var vt;const it=null!==(vt=Q.forced_root_block)&&void 0!==vt?vt:$.forced_root_block;return!1===it?"":!0===it?"p":it})(o,h);return L&&("body"===_.name||h.isRootContent)&&(($,Q)=>{const vt=Wy($y("script,style,head,html,body,title,meta,param"),e.getBlockElements()),it=/^[ \t\r\n]+/,Rt=/[ \t\r\n]+$/;let Et=$.firstChild,Ut=null;const Wt=xt=>{var Ft,Xt;xt&&(Et=xt.firstChild,Et&&3===Et.type&&(Et.value=null===(Ft=Et.value)||void 0===Ft?void 0:Ft.replace(it,"")),Et=xt.lastChild,Et&&3===Et.type&&(Et.value=null===(Xt=Et.value)||void 0===Xt?void 0:Xt.replace(Rt,"")))};if(e.isValidChild($.name,Q.toLowerCase())){for(;Et;){const xt=Et.next;b(vt,Et)?(Ut||(Ut=new Qn(Q,1),Ut.attr(o.forced_root_block_attrs),$.insert(Ut,Et)),Ut.append(Et)):(Wt(Ut),Ut=null),Et=xt}Wt(Ut)}})(_,L),h.invalid||Rv(K,h),_}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&ky(e,t,n),t.addAttributeFilter("href",o=>{let s=o.length;const a=i=>{const l=i?dt.trim(i):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(u=>u.length>0).concat(["noopener"]).sort().join(" ")};if(!e.allow_unsafe_link_target)for(;s--;){const i=o[s];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",a(i.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",o=>{let s,a,i,l,c=o.length;for(;c--;)if(l=o[c],"a"===l.name&&l.firstChild&&!l.attr("href"))for(i=l.parent,s=l.lastChild;s&&i;)a=s.prev,i.insert(s,l),s=a}),e.fix_list_elements&&t.addNodeFilter("ul,ol",o=>{let s,a,i=o.length;for(;i--;)if(s=o[i],a=s.parent,a&&("ul"===a.name||"ol"===a.name))if(s.prev&&"li"===s.prev.name)s.prev.append(s);else{const l=new Qn("li",1);l.attr("style","list-style-type: none"),s.wrap(l)}});const r=n.getValidClasses();e.validate&&r&&t.addAttributeFilter("class",o=>{var s;let a=o.length;for(;a--;){const i=o[a],l=null!==(s=i.attr("class"))&&void 0!==s?s:"",c=dt.explode(l," ");let u="";for(let f=0;f<c.length;f++){const p=c[f];let b=!1,g=r["*"];g&&g[p]&&(b=!0),g=r[i.name],!b&&g&&g[p]&&(b=!0),b&&(u&&(u+=" "),u+=p)}u.length||(u=null),i.attr("class",u)}}),((o,s)=>{const{blob_cache:a}=s;if(a){const i=l=>{const c=l.attr("src");var u;(u=l).attr("src")===ue.transparentSrc||gt(u.attr("data-mce-placeholder"))||(u=>gt(u.attr("data-mce-bogus")))(l)||be(c)||Ty(a,c,!0).each(u=>{l.attr("src",u.blobUri())})};o.addAttributeFilter("src",l=>tt(l,i))}})(t,e)})(g,o),(h=o).inline_styles&&((t,e,n)=>{var r;const o=Du();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=o,i=dt.explode(null!==(r=e.font_size_legacy_values)&&void 0!==r?r:""),s.addNodeFilter("font",l=>{tt(l,c=>{const u=a.parse(c.attr("style")),f=c.attr("color"),p=c.attr("face"),b=c.attr("size");var g;f&&(u.color=f),p&&(u["font-family"]=p),b&&js(b).each(g=>{u["font-size"]=i[g-1]}),c.name="span",c.attr("style",a.serialize(u)),g=c,tt(["color","face","size"],h=>{g.attr(h,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const c="html4"!==a.type;tt(l,u=>{if(c)u.name="s";else{const f=i.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",i.serialize(f))}})})})(t,n,o)})(g,h,e),g;var h},Ky=(t,e,n)=>{const r=nd(s=t)?Es({validate:!1}).serialize(s):s,o=e(r);var s;if(o.isDefaultPrevented())return o;if(nd(t)){if(o.content!==r){const s=si({validate:!1,forced_root_block:!1,sanitize:n}).parse(o.content,{context:t.name});return{...o,content:s}}return{...o,content:t}}return o},Xy=(t,e)=>{if(e.no_events)return Gn.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?Gn.error(X0(t,{content:"",...n}).content):Gn.value(n)}},Gy=(t,e,n)=>n.no_events?e:Ky(e,o=>X0(t,{...n,content:o}),Ju(t)).content,Im=(t,e)=>{if(e.no_events)return Gn.value(e);{const n=Ky(e.content,r=>{return o=t,s={...e,content:r},o.dispatch("BeforeSetContent",s);var o,s},Ju(t));return n.isDefaultPrevented()?(K0(t,n),Gn.error(void 0)):Gn.value(n)}},Fm=(t,e,n)=>{n.no_events||K0(t,{...n,content:e})},jm=(t,e,n)=>({element:t,width:e,rows:n}),Yy=(t,e)=>({element:t,cells:e}),SA=(t,e)=>({x:t,y:e}),Qy=(t,e)=>Yr(t,e).bind(js).getOr(1),kA=(t,e,n)=>{const r=t.rows;return!!(r[n]?r[n].cells:[])[e]},Jy=t=>pn(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),Zy=(t,e)=>{const n=t.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let s=0;s<o.length;s++)if(ce(o[s],e))return E.some(SA(s,r))}return E.none()},t1=(t,e,n,r,o)=>{const s=[],a=t.rows;for(let i=n;i<=o;i++){const l=a[i].cells,c=e<r?l.slice(e,r+1):l.slice(r,e+1);s.push(Yy(a[i].element,c))}return s},EA=t=>((e,n)=>{const r=ta(e.element),o=ot("tbody");return se(o,n),Nt(r,o),r})(t,ne(t.rows,n=>{const r=ne(n.cells,s=>{const a=eh(s);return d(a,"colspan"),d(a,"rowspan"),a}),o=ta(n.element);return se(o,r),o})),e1=()=>Ef([]),dd=(t,e)=>e>=0&&e<t.length&&Ja(t.charAt(e)),n1=t=>ur(t.innerText),r1=t=>wt(t)?t.outerHTML:lt(t)?vs.encodeRaw(t.data,!1):ms(t)?"\x3c!--"+t.data+"--\x3e":"",RA=zo(()=>document.implementation.createHTMLDocument("undo")),ud=t=>{const e=t.serializer.getTempAttrs(),n=Lb(t.getBody(),e);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:Ht(ne(un(n.childNodes),kn(ur,r1)),r=>r.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:ur(n.innerHTML),bookmark:null,beforeBookmark:null}},zm=(t,e,n)=>{const r=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,r)=>{let o=0;tt(n,s=>{var a,i;0===s[0]?o++:1===s[0]?(((a,i,l)=>{const c=(u=>{let f;const p=document.createElement("div"),b=document.createDocumentFragment();for(u&&(p.innerHTML=u);f=p.firstChild;)b.appendChild(f);return b})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(c,a.childNodes[l]):a.appendChild(c)})(r,s[1],o),o++):2===s[0]&&(i=o,(a=r).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,r)=>{const o=n.length+r.length+2,s=new Array(o),a=new Array(o),i=(f,p,b,g,v)=>{const h=c(f,p,b,g);if(null===h||h.start===p&&h.diag===p-g||h.end===f&&h.diag===f-b){let C=f,S=b;for(;C<p||S<g;)C<p&&S<g&&n[C]===r[S]?(v.push([0,n[C]]),++C,++S):p-f>g-b?(v.push([2,n[C]]),++C):(v.push([1,r[S]]),++S)}else{i(f,h.start,b,h.start-h.diag,v);for(let C=h.start;C<h.end;++C)v.push([0,n[C]]);i(h.end,p,h.end-h.diag,g,v)}},l=(f,p,b,g)=>{let v=f;for(;v-p<g&&v<b&&n[v]===r[v-p];)++v;return{start:f,end:v,diag:p}},c=(f,p,b,g)=>{const v=p-f,h=g-b;if(0===v||0===h)return null;const C=v-h,S=h+v,k=(S%2==0?S:S+1)/2;let A,_,D,I,j;for(s[1+k]=f,a[1+k]=p+1,A=0;A<=k;++A){for(_=-A;_<=A;_+=2){for(D=_+k,s[D]=_===-A||_!==A&&s[D-1]<s[D+1]?s[D+1]:s[D-1]+1,I=s[D],j=I-f+b-_;I<p&&j<g&&n[I]===r[j];)s[D]=++I,++j;if(C%2!=0&&C-A<=_&&_<=C+A&&a[D-C]<=s[D])return l(a[D-C],_+f-b,p,g)}for(_=C-A;_<=C+A;_+=2){for(D=_+k-C,a[D]=_===C-A||_!==C+A&&a[D+1]<=a[D-1]?a[D+1]-1:a[D-1],I=a[D]-1,j=I-f+b-_;I>=f&&j>=b&&n[I]===r[j];)a[D]=I--,j--;if(C%2==0&&-A<=_&&_<=A&&a[D]<=s[D+C])return l(a[D],_+f-b,p,g)}}return null},u=[];return i(0,n.length,0,r.length,u),u})(ne(un(e.childNodes),r1),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!gt(r)||!h0(r)||!r.isFakeCaret}),r&&(t.selection.moveToBookmark(r),t.selection.scrollIntoView())},Hm=t=>"fragmented"===t.type?t.fragments.join(""):t.content,o1=t=>{const e=ot("body",RA());return Qe(e,Hm(t)),tt(Cn(e,"*[data-mce-bogus]"),ee),yn(e)},Um=(t,e)=>{return!(!t||!e)&&(r=e,!(Hm(t)!==Hm(r))||((n,r)=>o1(n)===o1(r))(t,e));var r},qm=t=>0===t.get(),fd=(t,e,n)=>{qm(n)&&(t.typing=e)},s1=(t,e)=>{t.typing&&(fd(t,!1,e),t.add())},a1=t=>({init:{bindEvents:At},undoManager:{beforeChange:(e,n)=>{return r=t,s=n,void(qm(e)&&s.set(Vu(r.selection)));var r,s},add:(e,n,r,o,s,a)=>((i,l,c,u,f,p,b)=>{const g=ud(i),v=dt.extend(p||{},g);if(!qm(u)||i.removed)return null;const h=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:v,lastLevel:h,originalEvent:b}).isDefaultPrevented()||h&&Um(h,v))return null;l.data[c.get()]&&f.get().each(k=>{l.data[c.get()].beforeBookmark=k});const C=RE(i);if(C&&l.data.length>C){for(let k=0;k<l.data.length-1;k++)l.data[k]=l.data[k+1];l.data.length--,c.set(l.data.length)}v.bookmark=Vu(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(v),c.set(l.data.length-1);const S={level:v,lastLevel:h,originalEvent:b};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",S),i.dispatch("change",S)):i.dispatch("AddUndo",S),v})(t,e,n,r,o,s,a),undo:(e,n,r)=>((o,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,fd(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],zm(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(t,e,n,r),redo:(e,n)=>((r,o,s)=>{let a;return o.get()<s.length-1&&(o.set(o.get()+1),a=s[o.get()],zm(r,a,!1),r.setDirty(!0),r.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return r=t,s=n,(o=e).data=[],s.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return r=t,o=e,n.get()>0||o.typing&&o.data[0]&&!Um(ud(r),o.data[0]);var r,o},hasRedo:(e,n)=>{return r=e,n.get()<r.data.length-1&&!r.typing;var r},transact:(e,n,r)=>{return a=r,s1(o=e,n),o.beforeChange(),o.ignore(a),o.add();var o,a},ignore:(e,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(e,n),extra:(e,n,r,o)=>((s,a,i,l,c)=>{if(a.transact(l)){const u=a.data[i.get()].bookmark,f=a.data[i.get()-1];zm(s,f,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=u)}})(t,e,n,r,o)},formatter:{match:(e,n,r,o)=>bm(t,e,n,r,o),matchAll:(e,n)=>((r,o,s)=>{const a=[],i={},l=r.selection.getStart();return r.dom.getParent(l,c=>{for(let u=0;u<o.length;u++){const f=o[u];!i[f]&&No(r,c,f,s)&&(i[f]=!0,a.push(f))}},r.dom.getRoot()),a})(t,e,n),matchNode:(e,n,r,o)=>No(t,e,n,r,o),canApply:e=>((n,r)=>{const o=n.formatter.get(r),s=n.dom;if(o&&n.selection.isEditable()){const a=n.selection.getStart(),i=Hc(s,a);for(let l=o.length-1;l>=0;l--){const c=o[l];if(!kr(c))return!0;for(let u=i.length-1;u>=0;u--)if(s.is(i[u],c.selector))return!0}}return!1})(t,e),closest:e=>((n,r)=>{const o=s=>ce(s,O(n.getBody()));return E.from(n.selection.getStart(!0)).bind(s=>pm(O(s),a=>qn(r,i=>{return No(n,a.dom,c=i)?E.some(c):E.none();var c}),o)).getOrNull()})(t,e),apply:(e,n,r)=>hy(t,e,n,r),remove:(e,n,r,o)=>my(t,e,n,r,o),toggle:(e,n,r)=>((o,s,a,i)=>{const l=o.formatter.get(s);l&&(!bm(o,s,a,i)||"toggle"in l[0]&&!l[0].toggle?hy(o,s,a,i):my(o,s,a,i))})(t,e,n,r),formatChanged:(e,n,r,o,s)=>{return((p,b,g,v,h,C)=>{const S=b.get();tt(g.split(","),k=>{const A=ke(S,k).getOrThunk(()=>{const D={withSimilar:{state:sn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:sn(!1),similar:!1,callbacks:[]},withVars:[]};return S[k]=D,D}),_=()=>{const D=Cy(p);return yy(p,D,k,h,C).isSome()};if(De(C)){const D=h?A.withSimilar:A.withoutSimilar;D.callbacks.push(v),1===D.callbacks.length&&D.state.set(_())}else A.withVars.push({state:sn(_()),similar:h,vars:C,callback:v})}),b.set(S)})(t,i=e,l=n,c=r,o,s),{unbind:()=>((p,b,g)=>{const v=p.get();tt(b.split(","),h=>ke(v,h).each(C=>{v[h]={withSimilar:{...C.withSimilar,callbacks:Ht(C.withSimilar.callbacks,S=>S!==g)},withoutSimilar:{...C.withoutSimilar,callbacks:Ht(C.withoutSimilar.callbacks,S=>S!==g)},withVars:Ht(C.withVars,S=>S.callback!==g)}})),p.set(v)})(i,l,c)};var i,l,c}},editor:{getContent:e=>{return r=e,E.from((n=t).getBody()).fold(ht("tree"===r.format?new Qn("body",11):""),o=>((t,e,n)=>{let r;return r="raw"===e.format?dt.trim(ur(Lb(n,t.serializer.getTempAttrs()).innerHTML)):"text"===e.format?((o,s)=>{const a=o.getDoc(),i=Re(O(o.getBody())),l=ot("div",a);Xe(l,"data-mce-bogus","all"),Vs(l,{position:"fixed",left:"-9999999px",top:"0"}),Qe(l,s.innerHTML),Mb(l),Ib(l);const c=vn(f=i)?f:O(me(f).dom.body);var f;Nt(c,l);const u=ur(l.dom.innerText);return $t(l),u})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((o,s)=>{const a=On(o),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!gc(O(n))&&Dt(r)?dt.trim(r):r})(n,r,o));var n,r},setContent:(e,n)=>{return o=e,s=n,E.from((r=t).getBody()).map(a=>nd(o)?((i,l,c,u)=>{Ov(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const f=Es({validate:!1},i.schema).serialize(c),p=ur(gc(O(l))?f:dt.trim(f));return mm(i,p,u.no_selection),{content:c,html:p}})(r,a,o,s):((i,l,c,u)=>{if(0===(c=ur(c)).length||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const p=On(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),p.toLowerCase())?(c=f,c=i.dom.createHTML(p,rl(i),c)):c||(c=f),mm(i,c,u.no_selection),{content:c,html:c}}{"raw"!==u.format&&(c=Es({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const f=gc(O(l))?c:dt.trim(c);return mm(i,f,u.no_selection),{content:f,html:f}}})(r,a,o,s)).getOr({content:o,html:nd(s.content)?"":s.content});var r,o,s},insertContent:(e,n)=>j_(t,e,n),addVisual:e=>((n,r)=>{const o=n.dom,s=gt(r)?r:n.getBody();tt(o.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=ME(n),l=o.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?o.removeClass(a,i):o.addClass(a,i);break;case"A":if(!o.getAttrib(a,"href")){const c=o.getAttrib(a,"name")||a.id,u=Wh(n);c&&n.hasVisual?o.addClass(a,u):o.removeClass(a,u)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((r,o,s={})=>{const a=(i=s,l=o,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return Xy(r,a).fold(de,i=>{const l=((c,u)=>{if("text"===u.format)return E.from((f=c).selection.getRng()).map(p=>{var b;const g=E.from(f.dom.getParent(p.commonAncestorContainer,f.dom.isBlock)),v=f.getBody(),h=g.map(D=>D.nodeName).getOr("div").toLowerCase(),C=O(p.cloneContents());Mb(C),Ib(C);const S=f.dom.add(v,h,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},C.dom),k=n1(S),A=ur(null!==(b=S.textContent)&&void 0!==b?b:"");if(f.dom.remove(S),dd(A,0)||dd(A,A.length-1)){const _=g.getOr(v),D=n1(_),I=D.indexOf(k);return-1===I?k:(dd(D,I-1)?" ":"")+k+(dd(D,I+k.length)?" ":"")}return k}).getOr("");var f;{const f=((p,b)=>{const g=p.selection.getRng(),v=p.dom.create("body"),h=p.selection.getSel(),C=Ff(p,df(h)),S=b.contextual?((t,e)=>{const n=k0(e,t);return n.length>0?((t,e)=>{return(n=t,r=e[0],Jr(r,"table",kt(ce,n))).bind(n=>{const r=e[0],o=e[e.length-1],s=(a=>{const i=jm(ta(a),0,[]);return tt(Cn(a,"tr"),(l,c)=>{tt(Cn(l,"td,th"),(u,f)=>{((p,b,g,v,h)=>{const C=Qy(h,"rowspan"),S=Qy(h,"colspan"),k=p.rows;for(let A=g;A<g+C;A++){k[A]||(k[A]=Yy(eh(v),[]));for(let _=b;_<b+S;_++)k[A].cells[_]=A===g&&_===b?h:ta(h)}})(i,((p,b,g)=>{for(;kA(p,b,g);)b++;return b})(i,f,c),c,l,u)})}),jm(i.element,Jy(i.rows),i.rows)})(n);return(a=s,i=r,l=o,Zy(a,i).bind(c=>Zy(a,l).map(u=>((f,p,b)=>{const g=p.x,v=p.y,h=b.x,C=b.y,S=v<C?t1(f,g,v,h,C):t1(f,g,C,h,v);return jm(f.element,Jy(S),S)})(a,c,u)))).map(a=>Ef([EA(a)]));var a,i,l}).getOrThunk(e1);var n,r})(t,n):(r=t,(o=e).length>0&&o[0].collapsed?e1():(s=r,((i,l)=>{const c=pn(l,(u,f)=>(Nt(f,u),f),i);return l.length>0?Ef([c]):c})(O((a=o[0]).cloneContents()),((t,e)=>{const n=O(e.commonAncestorContainer),r=Yo(n,t),o=Ht(r,lk),s=(l=e,He(i=r,c=>"li"===xe(c)&&ff(c,l)).fold(ht([]),c=>{return(u=i,He(u,f=>"ul"===xe(f)||"ol"===xe(f))).map(u=>{const f=ot(xe(u)),p=hr(rt(u),(b,g)=>rn(g,"list-style"));return Vs(f,p),[ot("li"),f]}).getOr([]);var u})),a=o.concat(s.length?s:(i=>Hi(i)?Tn(i).filter(hu).fold(ht([]),l=>[i,l]):hu(i)?[i]:[])(n));var i,l;return ne(a,ta)})(s,a))));var r,o,s,a})(O(p.getBody()),C).dom:g.cloneContents();return S&&v.appendChild(S),p.selection.serializer.serialize(v,b)})(c,u);return"tree"===u.format?f:c.selection.isCollapsed()?"":f}})(r,i);return Gy(r,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(Ab(O(t.getBody())).isNone()){const r=J('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());Nt(r,O(e.extractContents())),e.insertNode(r.dom),Tn(r).each(o=>o.dom.normalize()),(n=r,((o,s)=>{const a=i=>{const l=Ne(i);for(let c=l.length-1;c>=0;c--){const u=l[c];if(s(u))return E.some(u);const f=a(u);if(f.isSome())return f}return E.none()};return a(o)})(n,Nb)).map(o=>{var s;t.selection.setCursorLocation(o.dom,"img"===xe(s=o)?1:vg(s).fold(()=>Ne(s).length,a=>a.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=O(t.getBody()),Ab(n).each(r=>{const o=e.selection.getBookmark();ee(r),e.selection.moveToBookmark(o)});var e,n}},raw:{getModel:()=>E.none()}}),Ao=t=>Zt(t.plugins,"rtc"),$m=t=>t.rtcInstance?t.rtcInstance:a1(t),ze=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},i1=t=>ze(t).init.bindEvents(),l1=t=>0===t.dom.length?($t(t),E.none()):E.some(t),c1=(t,e,n,r)=>{t.bind(o=>((r?Xf:Jc)(o.dom,r?o.dom.length:0),e.filter(Vn).map(s=>((a,i,l,c)=>{const u=a.dom,f=i.dom,p=c?u.length:f.length;c?(Gf(u,f,!1,!c),l.setStart(f,p)):(Gf(f,u,!1,!c),l.setEnd(f,p))})(o,s,n,r)))).orThunk(()=>{return(s=e,a=r,s.filter(i=>pl.isBookmarkNode(i.dom)).bind(a?Zn:yr)).or(e).filter(Vn).map(s=>((a,i)=>{Tn(a).each(l=>{const c=a.dom;i&&yl(l,G(c,0))?Jc(c,0):!i&&Cl(l,G(c,c.length))&&Xf(c,c.length)})})(s,r));var s,a})},d1=(t,e,n)=>{if(Zt(t,e)){const r=Ht(t[e],o=>o!==n);0===r.length?delete t[e]:t[e]=r}},u1=t=>!(!t||!t.ownerDocument)&&fe(O(t.ownerDocument),O(t)),f1=(t,e,n,r)=>{let o,s;const{selectorChangedWithUnbind:a}=((h,C)=>{let S,k;const A=(D,I)=>He(I,j=>h.is(j,D)),_=D=>h.getParents(D,void 0,h.getRoot());return{selectorChangedWithUnbind:(D,I)=>(S||(S={},k={},C.on("NodeChange",j=>{const U=j.element,K=_(U),P={};Ce(S,(L,$)=>{A($,K).each(Q=>{k[$]||(tt(L,vt=>{vt(!0,{node:Q,selector:$,parents:K})}),k[$]=L),P[$]=L})}),Ce(k,(L,$)=>{P[$]||(delete k[$],tt(L,Q=>{Q(!1,{node:U,selector:$,parents:K})}))})})),S[D]||(S[D]=[]),S[D].push(I),A(D,_(C.selection.getStart())).each(()=>{k[D]=S[D]}),{unbind:()=>{d1(S,D,I),d1(k,D,I)}})}})(t,r),i=(h,C)=>((S,k,A={})=>{const _=(D=A,I=k,{format:"html",...D,set:!0,selection:!0,content:I});var D,I;Im(S,_).each(D=>{const I=((U,K)=>{if("raw"!==K.format){const P=U.selection.getRng(),L=U.dom.getParent(P.commonAncestorContainer,U.dom.isBlock),$=L?{context:L.nodeName.toLowerCase()}:{},Q=U.parser.parse(K.content,{forced_root_block:!1,...$,...K});return Es({validate:!1},U.schema).serialize(Q)}return K.content})(S,D),j=S.selection.getRng();((U,K)=>{const P=E.from(K.firstChild).map(O),L=E.from(K.lastChild).map(O);U.deleteContents(),U.insertNode(K);const $=P.bind(yr).filter(Vn).bind(l1),Q=L.bind(Zn).filter(Vn).bind(l1);c1($,P,U,!0),c1(Q,L,U,!1),U.collapse(!1)})(j,j.createContextualFragment(I)),S.selection.setRng(j),hl(S,j),Fm(S,I,D)})})(r,h,C),l=h=>{const C=u();C.collapse(!!h),f(C)},c=()=>e.getSelection?e.getSelection():e.document.selection,u=()=>{let h;const C=(k,A,_)=>{try{return A.compareBoundaryPoints(k,_)}catch{return-1}},S=e.document;if(gt(r.bookmark)&&!ua(r)){const k=Df(r);if(k.isSome())return k.map(A=>Ff(r,[A])[0]).getOr(S.createRange())}try{const k=c();k&&!dc(k.anchorNode)&&(h=k.rangeCount>0?k.getRangeAt(0):S.createRange(),h=Ff(r,[h])[0])}catch{}if(h||(h=S.createRange()),ji(h.startContainer)&&h.collapsed){const k=t.getRoot();h.setStart(k,0),h.setEnd(k,0)}return o&&s&&(0===C(h.START_TO_START,h,o)&&0===C(h.END_TO_END,h,o)?h=s:(o=null,s=null)),h},f=(h,C)=>{if(!((k=h)&&u1(k.startContainer)&&u1(k.endContainer)))return;var k;const S=c();if(h=r.dispatch("SetSelectionRange",{range:h,forward:C}).range,S){s=h;try{S.removeAllRanges(),S.addRange(h)}catch{}!1===C&&S.extend&&(S.collapse(h.endContainer,h.endOffset),S.extend(h.startContainer,h.startOffset)),o=S.rangeCount>0?S.getRangeAt(0):null}if(!h.collapsed&&h.startContainer===h.endContainer&&S?.setBaseAndExtent&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()){const k=h.startContainer.childNodes[h.startOffset];k&&"IMG"===k.nodeName&&(S.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),S.anchorNode===h.startContainer&&S.focusNode===h.endContainer||S.setBaseAndExtent(k,0,k,1))}r.dispatch("AfterSetSelectionRange",{range:h,forward:C})},p=()=>{const h=c(),C=h?.anchorNode,S=h?.focusNode;if(!h||!C||!S||dc(C)||dc(S))return!0;const k=t.createRng(),A=t.createRng();try{k.setStart(C,h.anchorOffset),k.collapse(!0),A.setStart(S,h.focusOffset),A.collapse(!0)}catch{return!0}return k.compareBoundaryPoints(k.START_TO_START,A)<=0},b={dom:t,win:e,serializer:n,editor:r,expand:(h={type:"word"})=>f(da(t).expand(u(),h)),collapse:l,setCursorLocation:(h,C)=>{const S=t.createRng();gt(h)&&gt(C)?(S.setStart(h,C),S.setEnd(h,C),f(S),l(!1)):(mf(t,S,r.getBody(),!0),f(S))},getContent:h=>((C,S={})=>{return A=S.format?S.format:"html",_=S,ze(C).selection.getContent(A,_);var A,_})(r,h),setContent:i,getBookmark:(h,C)=>g.getBookmark(h,C),moveToBookmark:h=>g.moveToBookmark(h),select:(h,C)=>{return(S=t,k=h,A=C,E.from(k).bind(_=>E.from(_.parentNode).map(D=>{const I=S.nodeIndex(_),j=S.createRng();return j.setStart(D,I),j.setEnd(D,I+1),A&&(mf(S,j,_,!0),mf(S,j,_,!1)),j}))).each(f),h;var S,k,A},isCollapsed:()=>{const h=u(),C=c();return!(!h||h.item)&&(h.compareEndPoints?0===h.compareEndPoints("StartToEnd",h):!C||h.collapsed)},isEditable:()=>{const h=u(),C=r.getBody().querySelectorAll('[data-mce-selected="1"]');return C.length>0?ar(C,S=>t.isEditable(S.parentElement)):h.startContainer===h.endContainer?t.isEditable(h.startContainer):t.isEditable(h.startContainer)&&t.isEditable(h.endContainer)},isForward:p,setNode:h=>(i(t.getOuterHTML(h)),h),getNode:()=>((h,C)=>{if(!C)return h;let S=C.startContainer,k=C.endContainer;const A=C.startOffset,_=C.endOffset;let D=C.commonAncestorContainer;C.collapsed||(S===k&&_-A<2&&S.hasChildNodes()&&(D=S.childNodes[A]),lt(S)&&lt(k)&&(S=S.length===A?Eb(S.nextSibling,!0):S.parentNode,k=0===_?Eb(k.previousSibling,!1):k.parentNode,S&&S===k&&(D=S)));const I=lt(D)?D.parentNode:D;return wt(I)?I:h})(r.getBody(),u()),getSel:c,setRng:f,getRng:u,getStart:h=>Sb(r.getBody(),u(),h),getEnd:h=>kb(r.getBody(),u(),h),getSelectedBlocks:(h,C)=>((S,k,A,_)=>{const D=[],I=S.getRoot(),j=S.getParent(A||Sb(I,k,k.collapsed),S.isBlock),U=S.getParent(_||kb(I,k,k.collapsed),S.isBlock);if(j&&j!==I&&D.push(j),j&&U&&j!==U){let K;const P=new tn(j,I);for(;(K=P.next())&&K!==U;)S.isBlock(K)&&D.push(K)}return U&&j!==U&&U!==I&&D.push(U),D})(t,u(),h,C),normalize:()=>{const h=u(),C=c();if(!(df(C).length>1)&&jc(r)){const S=Vc(t,h);return S.each(k=>{f(k,p())}),S.getOr(h)}return h},selectorChanged:(h,C)=>(a(h,C),b),selectorChangedWithUnbind:a,getScrollContainer:()=>{let h,C=t.getRoot();for(;C&&"BODY"!==C.nodeName;){if(C.scrollHeight>C.clientHeight){h=C;break}C=C.parentNode}return h},scrollIntoView:(h,C)=>{var S;gt(h)?((S=r).inline?VN:XN)(S,h,C):hl(r,u(),C)},placeCaretAt:(h,C)=>f(nb(h,C,r.getDoc())),getBoundingClientRect:()=>{const h=u();return h.collapsed?G.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:()=>{e=o=s=null,v.destroy()}},g=pl(b),v=Q0(b,r);return b.bookmarkManager=g,b.controlSelection=v,b},OA=(t,e,n)=>{-1===dt.inArray(e,n)&&(t.addAttributeFilter(n,(r,o)=>{let s=r.length;for(;s--;)r[s].attr(o,null)}),e.push(n))},m1=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},o=e&&e.dom?e.dom:we.DOM,s=e&&e.schema?e.schema:ys(r),a=si(r,s);return l=r,c=o,(i=a).addAttributeFilter("data-mce-tabindex",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];b.attr("tabindex",b.attr("data-mce-tabindex")),b.attr(f,null)}}),i.addAttributeFilter("src,href,style",(u,f)=>{const p="data-mce-"+f,b=l.url_converter,g=l.url_converter_scope;let v=u.length;for(;v--;){const h=u[v];let C=h.attr(p);void 0!==C?(h.attr(f,C.length>0?C:null),h.attr(p,null)):(C=h.attr(f),"style"===f?C=c.serializeStyle(c.parseStyle(C),h.name):b&&(C=b.call(g,C,f,h.name)),h.attr(f,C.length>0?C:null))}}),i.addAttributeFilter("class",u=>{let f=u.length;for(;f--;){const p=u[f];let b=p.attr("class");b&&(b=b.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),p.attr("class",b.length>0?b:null))}}),i.addAttributeFilter("data-mce-type",(u,f,p)=>{let b=u.length;for(;b--;){const g=u[b];"bookmark"===g.attr("data-mce-type")&&!p.cleanup&&(E.from(g.firstChild).exists(h=>{var C;return!hc(null!==(C=h.value)&&void 0!==C?C:"")})?g.unwrap():g.remove())}}),i.addNodeFilter("noscript",u=>{var f;let p=u.length;for(;p--;){const b=u[p].firstChild;b&&(b.value=vs.decode(null!==(f=b.value)&&void 0!==f?f:""))}}),i.addNodeFilter("script,style",(u,f)=>{var p;const b=v=>v.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=u.length;for(;g--;){const v=u[g],h=v.firstChild,C=null!==(p=h?.value)&&void 0!==p?p:"";if("script"===f){const S=v.attr("type");S&&v.attr("type","mce-no/type"===S?null:S.replace(/^mce\-/,"")),"xhtml"===l.element_format&&h&&C.length>0&&(h.value="// <![CDATA[\n"+b(C)+"\n// ]]>")}else"xhtml"===l.element_format&&h&&C.length>0&&(h.value="\x3c!--\n"+b(C)+"\n--\x3e")}}),i.addNodeFilter("#comment",u=>{let f=u.length;for(;f--;){const p=u[f],b=p.value;l.preserve_cdata&&0===b?.indexOf("[CDATA[")?(p.name="#cdata",p.type=4,p.value=c.decode(b.replace(/^\[CDATA\[|\]\]$/g,""))):0===b?.indexOf("mce:protected ")&&(p.name="#text",p.type=3,p.raw=!0,p.value=unescape(b).substr(14))}}),i.addNodeFilter("xml:namespace,input",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];7===b.type?b.remove():1===b.type&&("input"!==f||b.attr("type")||b.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",u=>{tt(u,f=>{"format-caret"===f.attr("data-mce-type")&&(f.isEmpty(i.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(u,f)=>{let p=u.length;for(;p--;)u[p].attr(f,null)}),l.remove_trailing_brs&&ky(l,i,i.schema),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},u=(g=i,C=v=c,gt(h=b=e)&&h.hasEventListeners("PreProcess")&&!C.no_events?((h,C,S)=>{let k;const A=h.dom;let _=C.cloneNode(!0);const D=document.implementation;if(D.createHTMLDocument){const I=D.createHTMLDocument("");dt.each("BODY"===_.nodeName?_.childNodes:[_],j=>{I.body.appendChild(I.importNode(j,!0))}),_="BODY"!==_.nodeName?I.body.firstChild:I.body,k=A.doc,A.doc=I}return j={...S,node:_},h.dispatch("PreProcess",j),k&&(A.doc=k),_;var j})(b,g,v):g),f=((b,g,v)=>{const h=ur(v.getInner?g.innerHTML:b.getOuterHTML(g));return v.selection||gc(O(g))?h:dt.trim(h)})(o,u,c),p=((b,g,v)=>{const h=v.selection?{forced_root_block:!1,...v}:v,C=b.parse(g,h);return(S=>{const k=_=>"br"===_?.name,A=S.lastChild;if(k(A)){const _=A.prev;k(_)&&(A.remove(),_.remove())}})(C),C})(a,f,c);var b,g,v,h,C;return"tree"===c.format?p:((b,g,v,h,C)=>{var _;return((k,A,_)=>{return!A.no_events&&k?(I=k,j={...A,content:_},I.dispatch("PostProcess",j)).content:_;var I,j})(b,C,(_=h,Es(g,v).serialize(_)))})(e,r,s,p,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:kt(OA,a,n),getTempAttrs:ht(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var i,l,c})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Wm=(t,e,n={})=>{const r=(o=n,s=e,{format:"html",...o,set:!0,content:s});var o,s;return Im(t,r).map(o=>{const s=(i=o.content,l=o,$m(t).editor.setContent(i,l));var i,l;return Fm(t,s.html,o),s.content}).getOr(e)},BA="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),PA="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),LA="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),p1=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],g1=(t,e)=>{const n=Ht(e,r=>Zt(t,r));return Mo(n)},h1=(t,e)=>{const n=dt.makeMap(t.plugins," "),r=Ht(e,o=>Zt(n,o));return Mo(r)},zA=t=>He(p1,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),md=we.DOM,pd=t=>E.from(t).each(e=>e.destroy()),gd=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>Zt(t,e)}})(),ai=In.ModelManager,b1=(t,e)=>e.dom[t],v1=(t,e)=>parseInt(B(e,t),10),HA=kt(b1,"clientWidth"),UA=kt(b1,"clientHeight"),qA=kt(v1,"margin-top"),$A=kt(v1,"margin-left"),y1=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},r=()=>E.from(e[0]),o=()=>{tt(e,l=>{l.reposition()})},s=l=>{Ls(e,c=>c===l).each(c=>{e.splice(c,1)})},a=(l,c=!0)=>{return t.removed||!(f=(u=t).inline?u.getBody():u.getContentAreaContainer(),E.from(f).map(O)).map(cr).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),He(e,u=>{return!((f=n().getArgs(u)).type!==(p=l).type||f.text!==p.text||f.progressBar||f.timeout||p.progressBar||p.timeout);var f,p}).getOrThunk(()=>{t.editorManager.setActive(t);const u=n().open(l,()=>{s(u),o(),r().fold(()=>t.focus(),f=>gb(O(f.getEl())))});return(f=>{e.push(f)})(u),o(),t.dispatch("OpenNotification",{notification:{...u}}),u}));var u,f},i=ht(e);return(l=t).on("SkinLoaded",()=>{const c=vE(l);c&&a({text:c,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{tt(e.slice(),c=>{n().close(c)})}),{open:a,close:()=>{r().each(l=>{n().close(l),s(l),o()})},getNotifications:i};var l},ii=In.PluginManager,va=In.ThemeManager,C1=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},r=(a,i)=>(...l)=>i?i.apply(a,l):void 0,o=a=>{t.dispatch("CloseWindow",{dialog:a}),e=Ht(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),Of(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{tt(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,o)),openUrl:a=>s(()=>n().openUrl(a,o)),alert:(a,i,l)=>{const c=n();c.alert(a,r(l||c,i))},confirm:(a,i,l)=>{const c=n();c.confirm(a,r(l||c,i))},close:()=>{E.from(e[e.length-1]).each(a=>{n().close(a),o(a)})}}},x1=(t,e)=>{t.notificationManager.open({type:"error",text:e})},hd=(t,e)=>{t._skinLoaded?x1(t,e):t.on("SkinLoaded",()=>{x1(t,e)})},Nl=(t,e,n)=>{$0(t,e,{message:n}),console.error(n)},_l=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,bd=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},w1=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",r=`content${t.editorManager.suffix}.css`;return ne(e,o=>/^[a-z0-9\-]+$/i.test(o)&&!t.inline?`${n}/${o}/${r}`:t.documentBaseURI.toAbsolute(o))},S1=()=>{let t={};const e=(r,o)=>({status:r,resultUri:o}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{const o=t[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:r=>{t[r]=e(1,null)},markUploaded:(r,o)=>{t[r]=e(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}};let VA=0;const k1=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),E1=(t,e)=>((t,e)=>{const n={},r=(l,c)=>new Promise((u,f)=>{const p=new XMLHttpRequest;p.open("POST",e.url),p.withCredentials=e.credentials,p.upload.onprogress=g=>{c(g.loaded/g.total*100)},p.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+p.status)},p.onload=()=>{if(p.status<200||p.status>=300)return void f("HTTP Error: "+p.status);const g=JSON.parse(p.responseText);var v,h;g&&Dt(g.location)?u((h=g.location,(v=e.basePath)?v.replace(/\/$/,"")+"/"+h.replace(/^\//,""):h)):f("Invalid JSON: "+p.responseText)};const b=new FormData;b.append("file",l.blob(),l.filename()),p.send(b)}),o=ge(e.handler)?e.handler:r,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{dt.each(n[l],u=>{u(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||o!==r?(f=c,u=dt.grep(u=l,p=>!t.isUploaded(p.blobUri())),Promise.all(dt.map(u,p=>{return t.isPending(p.blobUri())?(b=>{const g=b.blobUri();return new Promise(v=>{n[g]=n[g]||[],n[g].push(v)})})(p):(g=o,v=f,t.markPending((b=p).blobUri()),new Promise(h=>{let C,S;try{const k=()=>{C&&(C.close(),S=At)},A=D=>{k(),t.markUploaded(b.blobUri(),D),i(b.blobUri(),s(b,D)),h(s(b,D))},_=D=>{k(),t.removeFailed(b.blobUri()),i(b.blobUri(),a(b,D)),h(a(b,D))};S=D=>{D<0||D>100||E.from(C).orThunk(()=>E.from(v).map(fo)).each(I=>{C=I,I.progressBar.value(D)})},g(b,S).then(A,D=>{_(Dt(D)?{message:D}:D)})}catch(k){h(a(b,k))}}));var b,g,v}))):new Promise(u=>{u([])});var u,f}}})(e,{url:sE(t),basePath:aE(t),credentials:iE(t),handler:lE(t)}),N1={remove_similar:!0,inherit:!1},li={selector:"td,th",...N1},GA={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...li},tablecellverticalalign:{styles:{"vertical-align":"%value"},...li},tablecellbordercolor:{styles:{borderColor:"%value"},...li},tablecellclass:{classes:["%value"],...li},tableclass:{selector:"table",classes:["%value"],...N1},tablecellborderstyle:{styles:{borderStyle:"%value"},...li},tablecellborderwidth:{styles:{borderWidth:"%value"},...li}},YA=ht(GA),vd=dt.each,_r=we.DOM,Vm=t=>gt(t)&&Kt(t),_1=(t,e)=>{const n=e&&e.schema||ys({}),r=a=>{const i=Dt(a)?{name:a,classes:[],attrs:{}}:a,l=_r.create(i.name);return c=l,(u=i).classes.length>0&&_r.addClass(c,u.classes.join(" ")),_r.setAttribs(c,u.attrs),l;var c,u},o=(a,i,l)=>{let c;const u=i[0],f=Vm(u)?u.name:void 0,p=((v,h)=>{const C=n.getElementRule(v.nodeName.toLowerCase()),S=C?.parentsRequired;return!(!S||!S.length)&&(h&&Ot(S,h)?h:S[0])})(a,f);if(p)f===p?(c=u,i=i.slice(1)):c=p;else if(u)c=u,i=i.slice(1);else if(!l)return a;const b=c?r(c):_r.create("div");b.appendChild(a),l&&dt.each(l,v=>{const h=r(v);b.insertBefore(h,a)});const g=Vm(c)?c.siblings:void 0;return o(b,i,g)},s=_r.create("div");if(t.length>0){const a=t[0],i=r(a),l=Vm(a)?a.siblings:void 0;s.appendChild(o(i,t.slice(1),l))}return s},QA=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=dt.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,s,a,i)=>{switch(o){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==dt.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},JA=(t,e)=>{let n="",r=wE(t);if(""===r)return"";const o=b=>Dt(b)?b.replace(/%(\w+)/g,""):"",s=(b,g)=>_r.getStyle(g??t.getBody(),b,!0);if(Dt(e)){const b=t.formatter.get(e);if(!b)return"";e=b[0]}if("preview"in e){const b=e.preview;if(!1===b)return"";r=b||r}let a,i=e.block||e.inline||"span";const l=Dt(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),dt.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),b=>{const g=dt.map(b.split(/(?:~\+|~|\+)/),QA),v=g.pop();return g.length&&(v.siblings=g),v}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=_1(l,t)):a=_1([i],t);const u=_r.select(i,a)[0]||a.firstChild;vd(e.styles,(b,g)=>{const v=o(b);v&&_r.setStyle(u,g,v)}),vd(e.attributes,(b,g)=>{const v=o(b);v&&_r.setAttrib(u,g,v)}),vd(e.classes,b=>{const g=o(b);_r.hasClass(u,g)||_r.addClass(u,g)}),t.dispatch("PreviewFormats"),_r.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const f=s("fontSize"),p=/px$/.test(f)?parseInt(f,10):0;return vd(r.split(" "),b=>{let g=s(b,u);if(!("background-color"===b&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(b),"#ffffff"===Fc(g).toLowerCase())||"color"===b&&"#000000"===Fc(g).toLowerCase())){if("font-size"===b&&/em|%$/.test(g)){if(0===p)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*p+"px"}"border"===b&&g&&(n+="padding:0 2px;"),n+=b+":"+g+";"}}),t.dispatch("AfterPreviewFormats"),_r.remove(a),n},A1=t=>{const e=(r=>{const o={},s=(a,i)=>{a&&(Dt(a)?(ct(i)||(i=[i]),tt(i,l=>{De(l.deep)&&(l.deep=!kr(l)),De(l.split)&&(l.split=!kr(l)||en(l)),De(l.remove)&&kr(l)&&!en(l)&&(l.remove="none"),kr(l)&&en(l)&&(l.mixed=!0,l.block_expand=!0),Dt(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[a]=i):Ce(a,(l,c)=>{s(c,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},p={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[p,u,f]:[u,p,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,p)=>wt(u)&&u.hasAttribute("href"),onformat:(u,f,p)=>{dt.each(p,(b,g)=>{i.setAttrib(u,g,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return null!==(f=u?.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return dt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{c[u]={block:u,remove:"all"}}),c})(r)),s(YA()),s(xE(r)),{get:a=>gt(a)?o[a]:o,has:a=>Zt(o,a),register:s,unregister:a=>(a&&o[a]&&delete o[a],o)}})(t),n=sn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(r=t).on("mouseup keydown",o=>{var s;((a,i,l)=>{const c=a.selection,u=a.getBody();Cm(a,null,l),8!==i&&46!==i||!c.isCollapsed()||c.getStart().innerHTML!==oi||Cm(a,aa(u,c.getStart())),37!==i&&39!==i||Cm(a,aa(u,c.getStart()))})(r,o.keyCode,(s=r.selection.getRng().endContainer,lt(s)&&Is(s.data,on)))}),Ao(t)||((r,o)=>{r.set({}),o.on("NodeChange",s=>{xy(o,s.element,r.get())}),o.on("FormatApply FormatRemove",s=>{const a=E.from(s.node).map(i=>fl(i)?i:i.startContainer).bind(i=>wt(i)?E.some(i):E.from(i.parentElement)).getOrThunk(()=>vy(o));xy(o,a,r.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,ze(t).formatter.apply(i,l,c)},remove:(r,o,s,a)=>{var l,c,u,f;l=r,c=o,u=s,f=a,ze(t).formatter.remove(l,c,u,f)},toggle:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,ze(t).formatter.toggle(i,l,c)},match:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,ze(t).formatter.match(l,c,u,f);var l,c,u,f},closest:r=>{return s=r,ze(t).formatter.closest(s);var s},matchAll:(r,o)=>{return a=r,i=o,ze(t).formatter.matchAll(a,i);var a,i},matchNode:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,ze(t).formatter.matchNode(l,c,u,f);var l,c,u,f},canApply:r=>{return s=r,ze(t).formatter.canApply(s);var s},formatChanged:(r,o,s,a)=>{return l=n,c=r,u=o,f=s,p=a,ze(t).formatter.formatChanged(l,c,u,f,p);var l,c,u,f,p},getCssText:kt(JA,t)};var r},T1=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},R1=t=>{const e=Cs(),n=sn(0),r=sn(0),o={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,ze(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=o,c=r,u=n,f=e,p=s,b=a,ze(t).undoManager.add(l,c,u,f,p,b);var l,c,u,f,p,b},dispatchChange:()=>{t.setDirty(!0);const s=ud(t);s.bookmark=Vu(t.selection),t.dispatch("change",{level:s,lastLevel:Na(o.data,r.get()).getOrUndefined()})},undo:()=>{return a=o,i=n,l=r,ze(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=r,i=o.data,ze(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=o,i=r,ze(t).undoManager.clear(a,i)},reset:()=>{var a;a=o,ze(t).undoManager.reset(a)},hasUndo:()=>{return a=o,i=r,ze(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=o,i=r,ze(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=o,l=n,c=s,ze(t).undoManager.transact(i,l,c);var i,l,c},ignore:s=>{var i,l;i=n,l=s,ze(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,c,u,f;l=o,c=r,u=s,f=a,ze(t).undoManager.extra(l,c,u,f)}};return Ao(t)||((s,a,i)=>{const l=sn(!1),c=u=>{fd(a,!1,i),a.add({},u)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",u=>{T1(u.command)||(s1(a,i),a.beforeChange())}),s.on("ExecCommand",u=>{T1(u.command)||c(u)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",u=>{const f=u.keyCode;if(u.isDefaultPrevented())return;const p=ue.os.isMacOS()&&"Meta"===u.key;(f>=33&&f<=36||f>=37&&f<=40||45===f||u.ctrlKey||p)&&(c(),s.nodeChanged()),46!==f&&8!==f||s.nodeChanged(),l.get()&&a.typing&&!Um(ud(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",u=>{const f=u.keyCode;if(!u.isDefaultPrevented()){if(!(f>=33&&f<=36||f>=37&&f<=40||45===f))return!(f<16||f>20)||224===f||91===f||a.typing||u.ctrlKey&&!u.altKey||u.metaKey?void((ue.os.isMacOS()?u.metaKey:u.ctrlKey&&!u.altKey)&&a.beforeChange()):(a.beforeChange(),fd(a,!0,i),a.add({},u),void l.set(!0));a.typing&&c(u)}}),s.on("mousedown",u=>{a.typing&&c(u)}),s.on("input",u=>{var f,p;u.inputType&&("insertReplacementText"===u.inputType||"insertText"===(f=u).inputType&&null===f.data||"insertFromPaste"===(p=u).inputType||"insertFromDrop"===p.inputType)&&c(u)}),s.on("AddUndo Undo Redo ClearUndos",u=>{u.isDefaultPrevented()||s.nodeChanged()})})(t,o,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),o;var s},ZA=[9,27,Ct.HOME,Ct.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Ct.DOWN,Ct.UP,Ct.LEFT,Ct.RIGHT].concat(ue.browser.isFirefox()?[224]:[]),O1="data-mce-placeholder",D1=t=>"keydown"===t.type||"keyup"===t.type,B1=t=>{const e=t.keyCode;return e===Ct.BACKSPACE||e===Ct.DELETE},tT=(t,e)=>({from:t,to:e}),Km=(t,e)=>{const n=O(t),r=O(e.container());return Zc(n,r).map(o=>({block:o,position:e}))},P1=(t,e)=>vo(e,n=>Ui(n)||eo(n.dom),n=>ce(n,t)).filter(An).getOr(t),L1=t=>{const e=(n=>{const r=Ne(n);return Ls(r,Cr).fold(ht(r),o=>r.slice(0,o))})(t);return tt(e,$t),e},M1=(t,e)=>{const n=Yo(e,t);return He(n.reverse(),r=>$e(r)).each($t)},eT=(t,e,n,r)=>{if($e(n))return gs(n),Dn(n.dom);0===Ht(Qr(r),s=>!$e(s)).length&&$e(e)&&Tt(r,ot("br"));const o=nr(n.dom,G.before(r.dom));return tt(L1(e),s=>{Tt(r,s)}),M1(t,e),o},nT=(t,e,n)=>{if($e(n)){if($e(e)){const s=Lo((a=>{const i=(l,c)=>qe(l).fold(()=>c,u=>pc(u)?i(u,c.concat(ta(u))):c);return i(a,[])})(n),(a,i)=>(ye(a,i),i),qi());ie(e),Nt(e,s)}return $t(n),Dn(e.dom)}const r=qr(n.dom);return tt(L1(e),o=>{Nt(n,o)}),M1(t,e),r},I1=(t,e)=>{Qa(t,e.dom).bind(n=>E.from(n.getNode())).map(O).filter(Gs).each($t)},F1=(t,e,n)=>{return I1(!0,e),I1(!1,n),(r=e,o=n,fe(o,r)?((s,a)=>{const i=Yo(a,s);return E.from(i[i.length-1])})(o,r):E.none()).fold(kt(nT,t,e,n),kt(eT,t,e,n));var r,o},j1=(t,e,n,r)=>e?F1(t,r,n):F1(t,n,r),Xm=(t,e)=>{const n=O(t.getBody());return(o=n.dom,s=e,a=t.selection.getRng(),a.collapsed?((i,l,c)=>{const u=Km(i,G.fromRangeStart(c)),f=u.bind(p=>wr(l,i,p.position).bind(b=>Km(i,b).map(g=>{return v=i,h=l,Le((C=g).position.getNode())&&!$e(C.block)?Qa(!1,C.block.dom).bind(S=>S.isEqual(C.position)?wr(h,v,S).bind(k=>Km(v,k)):E.some(C)).getOr(C):C;var v,h,C})));return hn(u,f,tT).filter(p=>{return!ce((b=p).from.block,b.to.block)&&((b,g)=>{const v=O(b);return ce(P1(v,g.from.block),P1(v,g.to.block))})(i,p)&&(b=>!1===Ae(b.from.block.dom)&&!1===Ae(b.to.block.dom))(p)&&(b=>{const g=v=>yg(v)||Su(v.dom);return g(b.from.block)&&g(b.to.block)})(p);var b})})(o,s,a):E.none()).map(o=>()=>{j1(n,e,o.from.block,o.to.block).each(s=>{t.selection.setRng(s.toRange())})});var o,s,a},z1=(t,e)=>{const n=O(e),r=kt(ce,t);return Rn(n,Ui,r).isSome()},Gm=(t,e)=>t.selection.isCollapsed()?E.none():(t=>{const e=O(t.getBody());return((n,r)=>{const o=nr(n.dom,G.fromRangeStart(r)).isNone(),s=Yn(n.dom,G.fromRangeEnd(r)).isNone();return!(z1(a=n,(i=r).startContainer)||z1(a,i.endContainer))&&o&&s;var a,i})(e,t.selection.getRng())?(n=t,E.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r)=>{const o=r.getRng();return hn(Zc(n,O(o.startContainer)),Zc(n,O(o.endContainer)),(s,a)=>ce(s,a)?E.none():E.some(()=>{o.deleteContents(),j1(n,!0,s,a).each(i=>{r.setRng(i.toRange())})})).getOr(E.none())})(e,t.selection);var n})(t),Qo=(t,e,n,r,o)=>E.from(e._selectionOverrides.showCaret(t,n,r,o)),Al=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?E.none():E.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(e)),Ym=(t,e,n)=>e.collapsed?((r,o,s)=>{const a=ef(1,r.getBody(),o),i=G.fromRangeStart(a),l=i.getNode();if(sl(l))return Qo(1,r,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(sl(c))return Qo(1,r,c,!1,!1);const u=pa(r.dom.getRoot(),i.getNode());return sl(u)?Qo(1,r,u,!1,s):E.none()})(t,e,n).getOr(e):e,oT=t=>_s(t)||bl(t),sT=t=>As(t)||vl(t),H1=(t,e,n,r,o,s)=>{var a,i;Qo(r,t,s.getNode(!o),o,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();o?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,lt(i=n)&&0===i.data.length&&a.remove(i)},Qm=(t,e)=>((n,r)=>{const o=n.selection.getRng();if(!lt(o.commonAncestorContainer))return E.none();const s=r?an.Forwards:an.Backwards,a=ko(n.getBody()),i=kt(nf,r?a.next:a.prev),l=r?oT:sT,c=dl(s,n.getBody(),o),u=i(c),f=u&&Nr(r,u);if(!f||!Pc(c,f))return E.none();if(l(f))return E.some(()=>H1(n,o,c.getNode(),s,r,f));const p=i(f);return p&&l(p)&&Pc(f,p)?E.some(()=>H1(n,o,c.getNode(),s,r,p)):E.none()})(t,e),Jm=(t,e)=>{const n=t.getBody();return e?Dn(n).filter(_s):qr(n).filter(As)},Zm=t=>{const e=t.selection.getRng();return!e.collapsed&&(Jm(t,!0).exists(n=>n.isEqual(G.fromRangeStart(e)))||Jm(t,!1).exists(n=>n.isEqual(G.fromRangeEnd(e))))},Ar=xo([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),U1=(t,e,n)=>wr(e,t,n).bind(r=>{return o=r.getNode(),gt(o)&&(Ui(O(o))||Hi(O(o)))||((s,a,i,l)=>{const c=u=>pc(O(u))&&!wo(i,l,s);return a0(!a,i).fold(()=>a0(a,l).fold(ve,c),c)})(t,e,n,r)?E.none():e&&Ae(r.getNode())||!e&&Ae(r.getNode(!0))?((s,a,i,l)=>{const c=l.getNode(!a);return Zc(O(s),O(i.getNode())).map(u=>$e(u)?Ar.remove(u.dom):Ar.moveToElement(c)).orThunk(()=>E.some(Ar.moveToElement(c)))})(t,e,n,r):e&&As(n)||!e&&_s(n)?E.some(Ar.moveToPosition(r)):E.none();var o}),q1=(t,e)=>E.from(pa(t.getBody(),e)),$1=t=>{const e=t.dom,n=t.selection,r=pa(t.getBody(),n.getNode());if(eo(r)&&e.isBlock(r)&&e.isEmpty(r)){const o=e.create("br",{"data-mce-bogus":"1"});e.setHTML(r,""),r.appendChild(o),n.setRng(G.before(o).toRange())}return!0},tp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return q1(t,n).filter(Ae).fold(()=>((r,o,s)=>{const a=ef(o?1:-1,r,s),i=G.fromRangeStart(a),l=O(r);return!o&&As(i)?E.some(Ar.remove(i.getNode(!0))):o&&_s(i)?E.some(Ar.remove(i.getNode())):!o&&_s(i)&&Wf(l,i)?y_(l,i).map(c=>Ar.remove(c.getNode())):o&&As(i)&&$f(l,i)?C_(l,i).map(c=>Ar.remove(c.getNode())):(c=r,((p,b)=>{const g=b.getNode(!p),v=p?"after":"before";return wt(g)&&g.getAttribute("data-mce-caret")===v})(u=o,f=i)?(p=u,b=f.getNode(!u),be(b)?E.none():p&&Ae(b.nextSibling)?E.some(Ar.moveToElement(b.nextSibling)):!p&&Ae(b.previousSibling)?E.some(Ar.moveToElement(b.previousSibling)):E.none()).orThunk(()=>U1(c,u,f)):U1(c,u,f).bind(p=>((b,g,v)=>v.fold(h=>E.some(Ar.remove(h)),h=>E.some(Ar.moveToElement(h)),h=>wo(g,h,b)?E.none():E.some(Ar.moveToPosition(h))))(c,f,p)));var c,u,f,p,b})(t.getBody(),e,t.selection.getRng()).map(r=>()=>{return r.fold((o=t,s=e,a=>(o._selectionOverrides.hideFakeCaret(),fa(o,s,O(a)),!0)),((o,s)=>a=>{const i=s?G.before(a):G.after(a);return o.selection.setRng(i.toRange()),!0})(t,e),(o=>s=>(o.selection.setRng(s.toRange()),!0))(t));var o,s}),()=>E.some(At))})(t,e):((n,r)=>{const o=n.selection.getNode();return Ae(o)&&!fc(o)?q1(n,o.parentNode).filter(Ae).fold(()=>E.some(()=>{var s;s=O(n.getBody()),tt(Cn(s,".mce-offscreen-selection"),$t),fa(n,r,O(n.selection.getNode())),Qf(n)}),()=>E.some(At)):Zm(n)?E.some(()=>{vv(n,n.selection.getRng(),O(n.getBody()))}):E.none()})(t,e),ep=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=G.fromRangeStart(n.selection.getRng());return wr(r,n.getBody(),o).filter(s=>r?p_(s):g_(s)).bind(s=>tf(r?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):E.none(),ci=lt,W1=t=>ci(t)&&t.data[0]===fn,V1=t=>ci(t)&&t.data[t.data.length-1]===fn,K1=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(fn)},yd=(t,e)=>t?(n=>{var r;if(ci(n.previousSibling))return V1(n.previousSibling)||n.previousSibling.appendData(fn),n.previousSibling;if(ci(n))return W1(n)||n.insertData(0,fn),n;{const o=K1(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(e):(n=>{var r,o;if(ci(n.nextSibling))return W1(n.nextSibling)||n.nextSibling.insertData(0,fn),n.nextSibling;if(ci(n))return V1(n)||n.appendData(fn),n;{const s=K1(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(s,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(s),s}})(e),iT=kt(yd,!0),lT=kt(yd,!1),X1=(t,e)=>lt(t.container())?yd(e,t.container()):yd(e,t.getNode()),G1=(t,e)=>{const n=e.get();return n&&t.container()===n&&hs(n)},np=(t,e)=>e.fold(n=>{oa(t.get());const r=iT(n);return t.set(r),E.some(G(r,r.length-1))},n=>Dn(n).map(r=>{if(G1(r,t)){const o=t.get();return G(o,1)}{oa(t.get());const o=X1(r,!0);return t.set(o),G(o,1)}}),n=>qr(n).map(r=>{if(G1(r,t)){const o=t.get();return G(o,o.length-1)}{oa(t.get());const o=X1(r,!1);return t.set(o),G(o,o.length-1)}}),n=>{oa(t.get());const r=lT(n);return t.set(r),E.some(G(r,1))}),Y1=(t,e)=>{for(let n=0;n<t.length;n++){const r=t[n].apply(null,e);if(r.isSome())return r}return E.none()},Fn=xo([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Q1=(t,e)=>Ss(e,t)||t,cT=(t,e,n)=>{const r=mv(n),o=Q1(e,r.container());return Ts(t,o,r).fold(()=>Yn(o,r).bind(kt(Ts,t,o)).map(s=>Fn.before(s)),E.none)},dT=(t,e)=>null===aa(t,e),J1=(t,e,n)=>Ts(t,e,n).filter(kt(dT,e)),uT=(t,e,n)=>{const r=pv(n);return J1(t,e,r).bind(o=>nr(o,r).isNone()?E.some(Fn.start(o)):E.none())},fT=(t,e,n)=>{const r=mv(n);return J1(t,e,r).bind(o=>Yn(o,r).isNone()?E.some(Fn.end(o)):E.none())},mT=(t,e,n)=>{const r=pv(n),o=Q1(e,r.container());return Ts(t,o,r).fold(()=>nr(o,r).bind(kt(Ts,t,o)).map(s=>Fn.after(s)),E.none)},Z1=t=>!fv(rp(t)),To=(t,e,n)=>Y1([cT,uT,fT,mT],[t,e,n]).filter(Z1),rp=t=>t.fold(de,de,de,de),tC=t=>t.fold(ht("before"),ht("start"),ht("end"),ht("after")),Cd=t=>t.fold(Fn.before,Fn.before,Fn.after,Fn.after),op=t=>t.fold(Fn.start,Fn.start,Fn.end,Fn.end),pT=(t,e,n,r,o,s)=>hn(Ts(e,n,r),Ts(e,n,o),(a,i)=>a!==i&&((l,c,u)=>{const f=Ss(c,l),p=Ss(u,l);return gt(f)&&f===p})(n,a,i)?Fn.after(t?a:i):s).getOr(s),gT=(t,e)=>t.fold(Be,n=>{return o=e,!(tC(r=n)===tC(o)&&rp(r)===rp(o));var r,o}),hT=(t,e)=>t?e.fold(kn(E.some,Fn.start),E.none,kn(E.some,Fn.after),E.none):e.fold(E.none,kn(E.some,Fn.before),E.none,kn(E.some,Fn.end)),eC=(t,e,n)=>{const r=t?1:-1;return e.setRng(G(n.container(),n.offset()+r).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Ro;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Ro||(Ro={}));const xd=(t,e)=>t===an.Backwards?Kr(e):e,bT=(t,e,n)=>t===an.Forwards?e.next(n):e.prev(n),vT=(t,e,n,r)=>Le(r.getNode(e===an.Forwards))?Ro.Br:!1===wo(n,r)?Ro.Block:Ro.Wrap,nC=(t,e,n,r)=>{const o=ko(n);let s=r;const a=[];for(;s;){const i=bT(e,o,s);if(!i)break;if(Le(i.getNode(!1)))return e===an.Forwards?{positions:xd(e,a).concat([i]),breakType:Ro.Br,breakAt:E.some(i)}:{positions:xd(e,a),breakType:Ro.Br,breakAt:E.some(i)};if(i.isVisible()){if(t(s,i)){const l=vT(0,e,s,i);return{positions:xd(e,a),breakType:l,breakAt:E.some(i)}}a.push(i),s=i}else s=i}return{positions:xd(e,a),breakType:Ro.Eol,breakAt:E.none()}},rC=(t,e,n,r)=>e(n,r).breakAt.map(o=>{const s=e(n,o).positions;return t===an.Backwards?s.concat(o):[o].concat(s)}).getOr([]),sp=(t,e)=>pn(t,(n,r)=>n.fold(()=>E.some(r),o=>hn(Nn(o.getClientRects()),Nn(r.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?r:o}).or(n)),E.none()),wd=(t,e)=>Nn(e.getClientRects()).bind(n=>sp(t,n.left)),Tl=kt(nC,G.isAbove,-1),Rl=kt(nC,G.isBelow,1),oC=kt(rC,-1,Tl),sC=kt(rC,1,Rl),aC=(t,e)=>Tl(t,e).breakAt.isNone(),iC=(t,e)=>Rl(t,e).breakAt.isNone(),yT=(t,e)=>wd(oC(t,e),e),CT=(t,e)=>wd(sC(t,e),e),xT=Ae,lC=(t,e)=>Math.abs(t.left-e),cC=(t,e)=>Math.abs(t.right-e),dC=(t,e)=>Xr(t,(n,r)=>{const o=Math.min(lC(n,e),cC(n,e)),s=Math.min(lC(r,e),cC(r,e));return s===o&&gn(r,"node")&&xT(r.node)||s<o?r:n}),wT=t=>{const e=n=>ne(n,r=>{const o=na(r);return o.node=t,o});if(wt(t))return e(t.getClientRects());if(lt(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},uC=t=>Ve(t,wT);var Ol;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Ol||(Ol={}));const fC=(t,e,n,r,o,s)=>{let a=0;const i=[],l=f=>{let p=uC([f]);-1===t&&(p=p.reverse());for(let b=0;b<p.length;b++){const g=p[b];if(!n(g,c)){if(i.length>0&&e(g,Pr(i))&&a++,g.line=a,o(g))return!0;i.push(g)}}return!1},c=Pr(s.getClientRects());if(!c)return i;const u=s.getNode();return u&&(l(u),((f,p,b,g)=>{let v=g;for(;v=il(v,f,kg,p);)if(b(v))return})(t,r,l,u)),i},ST=kt(fC,Ol.Up,Zi,tl),kT=kt(fC,Ol.Down,tl,Zi),mC=t=>Pr(t.getClientRects()),pC=t=>e=>e.line>t,ap=t=>e=>e.line===t,Jo=(t,e)=>{t.selection.setRng(e),hl(t,t.selection.getRng())},ip=(t,e,n)=>E.some(Ym(t,e,n)),gC=(t,e,n,r,o,s)=>{const a=e===an.Forwards,i=ko(t.getBody()),l=kt(nf,a?i.next:i.prev),c=a?r:o;if(!n.collapsed){const g=Nc(n);if(s(g))return Qo(e,t,g,e===an.Backwards,!1);if(Zm(t)){const v=n.cloneRange();return v.collapse(e===an.Backwards),E.from(v)}}const u=dl(e,t.getBody(),n);if(c(u))return Al(t,u.getNode(!a));let f=l(u);const p=xg(n);if(!f)return p?E.some(n):E.none();if(f=Nr(a,f),c(f))return Qo(e,t,f.getNode(!a),a,!1);const b=l(f);return b&&c(b)&&Pc(f,b)?Qo(e,t,b.getNode(!a),a,!1):p?ip(t,f.toRange(),!1):E.none()},hC=(t,e,n,r,o,s)=>{const a=dl(e,t.getBody(),n),i=Pr(a.getClientRects()),l=e===Ol.Down,c=t.getBody();if(!i)return E.none();if(Zm(t)){const v=l?G.fromRangeEnd(n):G.fromRangeStart(n);return(l?CT:yT)(c,v).orThunk(()=>E.from(v)).map(h=>h.toRange())}const u=(l?kT:ST)(c,pC(1),a),f=Ht(u,ap(1)),p=i.left,b=dC(f,p);if(b&&s(b.node)){const v=Math.abs(p-b.left),h=Math.abs(p-b.right);return Qo(e,t,b.node,v<h,!1)}let g;if(g=r(a)?a.getNode():o(a)?a.getNode(!0):Nc(n),g){const v=((C,S,k,A)=>{const _=ko(S);let D,I,j,U;const K=[];let P=0;1===C?(D=_.next,I=tl,j=Zi,U=G.after(A)):(D=_.prev,I=Zi,j=tl,U=G.before(A));const L=mC(U);do{if(!U.isVisible())continue;const $=mC(U);if(j($,L))continue;K.length>0&&I($,Pr(K))&&P++;const Q=na($);if(Q.position=U,Q.line=P,k(Q))return K;K.push(Q)}while(U=D(U));return K})(e,c,pC(1),g);let h=dC(Ht(v,ap(1)),p);if(h||(h=Pr(Ht(v,ap(0))),h))return ip(t,h.position.toRange(),!1)}return 0===f.length?lp(t,l).filter(l?o:r).map(v=>Ym(t,v.toRange(),!1)):E.none()},lp=(t,e)=>{const n=t.selection.getRng(),r=e?G.fromRangeEnd(n):G.fromRangeStart(n),o=(s=r.container(),a=t.getBody(),Rn(O(s),i=>bN(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=Rl(o,r);return go(i.positions)}{const i=Tl(o,r);return Nn(i.positions)}},bC=(t,e,n)=>lp(t,e).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),Sd=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},vC=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},yC=(t,e,n)=>np(e,n).map(r=>(Sd(t,r),n)),CC=(t,e,n)=>!!ol(t)&&((t,e,n)=>{const r=t.getBody(),o=((s,a,i)=>{const l=G.fromRangeStart(s);if(s.collapsed)return l;{const c=G.fromRangeEnd(s);return i?nr(a,c).getOr(c):Yn(a,l).getOr(l)}})(t.selection.getRng(),r,n);return((s,a,i,l)=>{const c=Nr(s,l),u=To(a,i,c);return To(a,i,c).bind(kt(hT,s)).orThunk(()=>((f,p,b,g,v)=>{const h=Nr(f,v);return wr(f,b,h).map(kt(Nr,f)).fold(()=>g.map(Cd),C=>To(p,b,C).map(kt(pT,f,p,b,h,C)).filter(kt(gT,g))).filter(Z1)})(s,a,i,u,l))})(n,kt(ma,t),r,o).bind(s=>yC(t,e,s))})(t,e,n).isSome(),xC=(t,e,n)=>!!ol(e)&&((r,o)=>{const s=o.selection.getRng(),a=r?G.fromRangeEnd(s):G.fromRangeStart(s);return!!ge(o.selection.getSel().modify)&&(r&&bu(a)?eC(!0,o.selection,a):!(r||!vu(a))&&eC(!1,o.selection,a))})(t,e),_T=kt(xC,!0),AT=kt(xC,!1),kd=(t,e,n)=>{if(ol(t)){const r=lp(t,e).getOrThunk(()=>{const o=t.selection.getRng();return e?G.fromRangeEnd(o):G.fromRangeStart(o)});return To(kt(ma,t),t.getBody(),r).exists(o=>{const s=Cd(o);return np(n,s).exists(a=>(Sd(t,a),!0))})}return!1},wC=(t,e)=>n=>np(e,n).map(r=>()=>Sd(t,r)),SC=(t,e,n,r)=>{const o=t.getBody(),s=kt(ma,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,r)),Yf(t),To(s,o,G.fromRangeStart(t.selection.getRng())).map(op).bind(wC(t,e)).each(Un)}),t.nodeChanged()},cp=(t,e,n)=>{if(t.selection.isCollapsed()&&ol(t)){const r=G.fromRangeStart(t.selection.getRng());return((o,s,a,i)=>{const l=(f=o.getBody(),p=i.container(),Ss(p,f)||f),c=kt(ma,o),u=To(c,l,i);var f,p;return u.bind(f=>a?f.fold(ht(E.some(op(f))),E.none,ht(E.some(Cd(f))),E.none):f.fold(E.none,ht(E.some(Cd(f))),E.none,ht(E.some(op(f))))).map(wC(o,s)).getOrThunk(()=>{const f=Ya(a,l,i),p=f.bind(b=>To(c,l,b));return hn(u,p,()=>Ts(c,l,i).bind(b=>{return hn(Dn(g=b),qr(g),(v,h)=>{const C=Nr(!0,v),S=Nr(!1,h);return Yn(g,C).forall(k=>k.isEqual(S))}).getOr(!0)?E.some(()=>{fa(o,a,O(b))}):E.none();var g})).getOrThunk(()=>p.bind(()=>f.map(b=>()=>{a?SC(o,s,i,b):SC(o,s,b,i)})))})})(t,e,n,r)}return E.none()},kC=(t,e)=>{const n=O(t.getBody()),r=O(t.selection.getStart()),o=Yo(r,n);return Ls(o,e).fold(ht(o),s=>o.slice(0,s))},TT=t=>1===Fr(t),EC=(t,e)=>{const n=kt($v,t);return Ve(e,r=>n(r)?[r.dom]:[])},NC=t=>{const e=kC(t,Cr);return EC(t,e)},_C=(t,e)=>{const n=t.selection.getStart(),r=((o,s)=>{const a=s.parentElement;return Le(s)&&!Qt(a)&&o.dom.isEmpty(a)})(t,n)||Wv(O(n))?qv(n,e):((o,s)=>{const{caretContainer:a,caretPosition:i}=Uv(s);return o.insertNode(a.dom),i})(t.selection.getRng(),e);t.selection.setRng(r.toRange())},AC=t=>lt(t.startContainer),dp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=Ht(kC(t,o=>Cr(o)||Fr(o)>1),TT);return go(n).bind(r=>{const o=G.fromRangeStart(t.selection.getRng());return hv(e,o,r.dom)&&!Wv(r)?E.some(()=>((s,a,i,l)=>{const c=EC(a,l);if(0===c.length)fa(a,s,i);else{const u=qv(i.dom,c);a.selection.setRng(u.toRange())}})(e,t,r,n)):E.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&AC(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!Qt(o)&&$v(n,O(o))})(t,e)&&(n=>{return(o=>{const s=o.startContainer.parentNode,a=o.endContainer.parentNode;return!Qt(s)&&!Qt(a)&&s.isEqualNode(a)})(r=n)&&(o=>{const s=o.endContainer;return o.endOffset===(lt(s)?s.length:s.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(e);var n})(n)){const r=NC(n);return E.some(()=>{Yf(n),((o,s)=>{const a=Jt(s,NC(o));a.length>0&&_C(o,a)})(n,r)})}return E.none()})(t),Dl=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(AC(n)||e.dom.isEmpty(n.startContainer))&&!(t=>Rn(t,o=>$r(o.dom),Cr).isSome())(O(e.selection.getStart()))})(t)&&_C(t,[]),!0),up=(t,e,n)=>gt(n)?E.some(()=>{t._selectionOverrides.hideFakeCaret(),fa(t,e,O(n))}):E.none(),fp=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=r?bl:vl,a=dl(r?an.Forwards:an.Backwards,n.getBody(),n.selection.getRng());return o(a)?up(n,r,a.getNode(!r)):E.from(Nr(r,a)).filter(i=>o(i)&&Pc(a,i)).bind(i=>up(n,r,i.getNode(!r)))})(t,e):((n,r)=>{const o=n.selection.getNode();return Co(o)?up(n,r,o):E.none()})(t,e),mp=t=>js(t??"").getOr(0),TC=(t,e)=>(t||"table"===xe(e)?"margin":"padding")+("rtl"===B(e,"direction")?"-right":"-left"),RC=t=>{const e=DC(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,ar(e,o=>{const s=TC(jh(n),o),a=Z(o,s).map(mp).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&a>0})));var n},OC=t=>hu(t)||Hi(t),DC=t=>Ht(Ye(t.selection.getSelectedBlocks()),e=>!OC(e)&&!Tn(e).exists(OC)&&vo(e,n=>eo(n.dom)||Ae(n.dom)).exists(n=>eo(n.dom))),BC=(t,e)=>{var n,r;const{dom:o}=t,s=uE(t),a=null!==(r=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",i=mp(s),l=jh(t);tt(DC(t),c=>{((u,f,p,b,g,v)=>{const h=TC(p,O(v)),C=mp(u.getStyle(v,h));if("outdent"===f){const S=Math.max(0,C-b);u.setStyle(v,h,S?S+g:"")}else u.setStyle(v,h,C+b+g)})(o,e,l,i,a,c.dom)})},PC=t=>BC(t,"outdent"),LC=t=>{if(t.selection.isCollapsed()&&RC(t)){const e=t.dom,n=t.selection.getRng(),r=G.fromRangeStart(n),o=e.getParent(n.startContainer,e.isBlock);if(null!==o&&qf(O(o),r))return E.some(()=>PC(t))}return E.none()},MC=(t,e,n)=>qn([LC,tp,Qm,(r,o)=>cp(r,e,o),Xm,sm,ep,fp,Gm,dp],r=>r(t,n)).filter(r=>t.selection.isEditable()),IC=t=>void 0===t.touches||1!==t.touches.length?E.none():E.some(t.touches[0]),pp=(t,e)=>Zt(t,e.nodeName),PT=(t,e)=>!!lt(e)||!!wt(e)&&!pp(t.getBlockElements(),e)&&!Sr(e)&&!Ys(t,e),LT=(t,e)=>!(!lt(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!pp(t,e.nextSibling))),FC=t=>t.dom.create(On(t),rl(t)),MT=t=>{const e=t.dom,n=t.selection,r=t.schema,o=r.getBlockElements(),s=n.getStart(),a=t.getBody();let i,l,c=!1;const u=On(t);if(!s||!wt(s))return;const f=a.nodeName.toLowerCase();if(!r.isValidChild(f,u.toLowerCase())||(k=o,A=a,Se(Kb(O(s),O(A)),D=>pp(k,D.dom))))return;var k,A;const p=n.getRng(),{startContainer:b,startOffset:g,endContainer:v,endOffset:h}=p,C=ua(t);let S=a.firstChild;for(;S;)if(wt(S)&&Sk(r,S),PT(r,S)){if(LT(o,S)){l=S,S=S.nextSibling,e.remove(l);continue}i||(i=FC(t),a.insertBefore(i,S),c=!0),l=S,S=S.nextSibling,i.appendChild(l)}else i=null,S=S.nextSibling;c&&C&&(p.setStart(b,g),p.setEnd(v,h),n.setRng(p),t.nodeChanged())},jC=(t,e,n)=>{const r=O(FC(t)),o=qi();Nt(r,o),n(e,r);const s=document.createRange();return s.setStartBefore(o.dom),s.setEndBefore(o.dom),s},zC=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),IT=(t,e,n)=>function(r){const o=arguments,s=o[o.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return r;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(o[0])+'">'+t.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},HC=(t,e)=>{e.hasAttribute("data-mce-caret")&&(yu(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},FT=(t,e)=>{const n=yo(O(t.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void HC(t,n)):void(Cg(n)&&(HC(t,n),t.undoManager.add()))},UC=Ae,qC=(t,e,n)=>{const r=ko(t.getBody()),o=kt(nf,1===e?r.next:r.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!o(G.fromRangeStart(n))){const a=O((i=>{const l=i.dom.create(On(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Bt(O(s),a):Tt(O(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},$C=(t,e)=>((n,r)=>{const o=r?an.Forwards:an.Backwards,s=n.selection.getRng();return(a=o,i=n,l=s,gC(i,a,l,_s,As,UC)).orThunk(()=>(qC(n,o,s),E.none()));var a,i,l})(t,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return fv(o)?!r:r})(t.selection,e)).exists(n=>(Jo(t,n),!0)),WC=(t,e)=>((n,r)=>{const o=r?1:-1,s=n.selection.getRng();return(a=o,i=n,l=s,hC(i,a,l,c=>_s(c)||Wb(c),c=>As(c)||Vb(c),UC)).orThunk(()=>(qC(n,o,s),E.none()));var a,i,l})(t,e).exists(n=>(Jo(t,n),!0)),VC=(t,e)=>bC(t,e,e?As:_s),Ed=(t,e)=>Jm(t,!e).map(n=>{const r=n.toRange(),o=t.selection.getRng();return e?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(Jo(t,n),!0)),jT=t=>Ot(["figcaption"],xe(t)),KC=(t,e)=>!!t.selection.isCollapsed()&&((n,r)=>{const o=O(n.getBody()),s=G.fromRangeStart(n.selection.getRng());return((a,i)=>{const l=kt(ce,i);return vo(O(a.container()),Cr,l).filter(jT)})(s,o).exists(()=>{if(a=o,l=s,r?iC(a.dom,l):aC(a.dom,l)){const a=jC(n,o,r?Nt:Gt);return n.selection.setRng(a),!0}var a,l;return!1})})(t,e),XC=(t,e)=>{return n=t,e?E.from(n.dom.getParent(n.selection.getNode(),"details")).map(o=>((s,a)=>{const i=s.selection.getRng(),l=G.fromRangeStart(i);return!(s.getBody().lastChild!==a||!iC(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,o)).getOr(!1):E.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(o=>E.from(n.dom.getParent(o,"details")).map(s=>((a,i,l)=>{const c=a.selection.getRng(),u=G.fromRangeStart(c);return!(a.getBody().firstChild!==i||!aC(l,u)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,o))).getOr(!1);var n},GC={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},YC=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,Mt=(t,...e)=>()=>t.apply(null,e),Bl=(t,e)=>{return He((r=e,Ve(ne(t,s=>({...GC,...s})),o=>YC(o,r)?[o]:[])),n=>n.action());var r},QC=(t,e)=>{return qn((r=e,Ve(ne(t,s=>({...GC,...s})),o=>YC(o,r)?[o]:[])),n=>n.action());var r},JC=(t,e)=>{const n=e?an.Forwards:an.Backwards,r=t.selection.getRng();return gC(t,n,r,bl,vl,Co).exists(o=>(Jo(t,o),!0))},ZC=(t,e)=>{const n=e?1:-1,r=t.selection.getRng();return hC(t,n,r,bl,vl,Co).exists(o=>(Jo(t,o),!0))},tx=(t,e)=>bC(t,e,e?vl:bl),ex=xo([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Pl={...ex,none:t=>ex.none(t)},nx=(t,e,n)=>Ve(Ne(t),r=>Te(r,e)?n(r)?[r]:[]:nx(r,e,n)),rx=(t,e)=>zr(t,"table",e),gp=(t,e,n,r,o=Be)=>{const s=1===r;if(!s&&n<=0)return Pl.first(t[0]);if(s&&n>=t.length-1)return Pl.last(t[t.length-1]);{const a=n+r,i=t[a];return o(i)?Pl.middle(e,i):gp(t,e,a,r,o)}},ox=(t,e)=>rx(t,e).bind(n=>{const r=nx(n,"th,td",Be);return Ls(r,o=>ce(t,o)).map(o=>({index:o,all:r}))}),sx=(t,e,n,r,o)=>{const s=Cn(O(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,c)=>pn(i,(u,f)=>u.fold(()=>E.some(f),p=>{const b=Math.sqrt(Math.abs(p.x-l)+Math.abs(p.y-c)),g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return E.some(g<b?f:p)}),E.none()))(Ht((i=t,Ve(s,c=>{const u={left:(f=na(c.getBoundingClientRect())).left- -1,top:f.top- -1,right:f.right+-2,bottom:f.bottom+-2,width:f.width+-1,height:f.height+-1};var f;return[{x:u.left,y:i(u),cell:c},{x:u.right,y:i(u),cell:c}]})),i=>e(i,o)),r,o).map(i=>i.cell)},zT=kt(sx,t=>t.bottom,(t,e)=>t.y<e),HT=kt(sx,t=>t.top,(t,e)=>t.y>e),ax=(t,e,n)=>{const r=t(e,n);return(o=r).breakType===Ro.Wrap&&0===o.positions.length||!Le(n.getNode())&&(o=>o.breakType===Ro.Br&&1===o.positions.length)(r)?!((o,s,a)=>a.breakAt.exists(i=>o(s,i).breakAt.isSome()))(t,e,r):r.breakAt.isNone();var o},UT=kt(ax,Tl),qT=kt(ax,Rl),$T=(t,e,n,r)=>{const o=t.selection.getRng(),s=e?1:-1;return!(!t0()||!((a,i,l)=>{const c=G.fromRangeStart(i);return Qa(!a,l).exists(u=>u.isEqual(c))})(e,o,n)||(Qo(s,t,n,!e,!1).each(a=>{Jo(t,a)}),0))},ix=(t,e,n)=>{const r=((s,a)=>{const i=a.getNode(s);return Ko(i)?E.some(i):E.none()})(!!e,n),o=!1===e;r.fold(()=>Jo(t,n.toRange()),s=>Qa(o,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>Jo(t,n.toRange()),a=>{return i=e,c=s,void(l=t).undoManager.transact(()=>{const u=i?Bt:Tt,f=jC(l,O(c),u);Jo(l,f)});var i,l,c}))},WT=(t,e,n,r)=>{const o=t.selection.getRng(),s=G.fromRangeStart(o),a=t.getBody();if(!e&&UT(r,s)){const i=(l=a,(f=c=n,p=u=s,Nn(p.getClientRects()).bind(b=>zT(f,b.left,b.top)).bind(b=>{return wd(qr(g=b).map(v=>Tl(g,v).positions.concat(v)).getOr([]),p);var g})).orThunk(()=>Nn(u.getClientRects()).bind(f=>sp(oC(l,G.before(c)),f.left))).getOr(G.before(c)));return ix(t,e,i),!0}var l,c,u,f,p;if(e&&qT(r,s)){const i=((l,c,u)=>((f,p)=>go(p.getClientRects()).bind(b=>HT(f,b.left,b.top)).bind(b=>{return wd(Dn(g=b).map(v=>[v].concat(Rl(g,v).positions)).getOr([]),p);var g}))(c,u).orThunk(()=>Nn(u.getClientRects()).bind(f=>sp(sC(l,G.after(c)),f.left))).getOr(G.after(c)))(a,n,s);return ix(t,e,i),!0}return!1},lx=(t,e,n)=>E.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(r=>E.from(t.dom.getParent(r,"table")).map(o=>n(t,e,o,r))).getOr(!1),cx=(t,e)=>lx(t,e,$T),hp=(t,e)=>lx(t,e,WT),dx=(t,e,n)=>n.fold(E.none,E.none,(r,o)=>{return(s=o,((a,i)=>{const l=c=>{for(let u=0;u<c.childNodes.length;u++){const f=O(c.childNodes[u]);if(i(f))return E.some(f);const p=l(c.childNodes[u]);if(p.isSome())return p}return E.none()};return l(a.dom)})(s,Nb)).map(a=>{return(t=>{const e=ni.getWin(t).dom,n=(o,s,a,i)=>Sf(e,o,s,a,i),r=t.match({domRange:s=>{const a=O(s.startContainer),i=O(s.endContainer);return eb(a,s.startOffset,i,s.endOffset)},relative:IN,exact:eb});return((o,s)=>{var i;return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(u=>!1===u.collapsed).map(u=>gl.rtl(O(u.endContainer),u.endOffset,O(u.startContainer),u.startOffset)).getOrThunk(()=>Z0(0,gl.ltr,c)):Z0(0,gl.ltr,c)})(0,(i=o,s.match({domRange:c=>({ltr:ht(c),rtl:E.none}),relative:(c,u)=>({ltr:zo(()=>J0(i,c,u)),rtl:zo(()=>E.some(J0(i,u,c)))}),exact:(c,u,f,p)=>({ltr:zo(()=>Sf(i,c,u,f,p)),rtl:zo(()=>E.some(Sf(i,f,p,c,u)))})})))})(e,r).match({ltr:n,rtl:n})})(ni.exact(i=a,0,i,0));var i});var s},r=>(t.execCommand("mceTableInsertRowAfter"),ux(t,e,r))),ux=(t,e,n)=>{return dx(t,e,(o=Zr,ox(r=n,void 0).fold(()=>Pl.none(r),s=>gp(s.all,r,s.index,1,o))));var r,o},VT=(t,e,n)=>{return dx(t,e,(o=Zr,ox(r=n,void 0).fold(()=>Pl.none(),s=>gp(s.all,r,s.index,-1,o))));var r,o},fx=(t,e)=>{const n=["table","li","dl"],r=O(t.getBody()),o=a=>{const i=xe(a);return ce(a,r)||Ot(n,i)},s=t.selection.getRng();return(a=O(e?s.endContainer:s.startContainer),i=o,((l,c,u=ve)=>u(c)?E.none():Ot(l,xe(c))?E.some(c):Jr(c,l.join(","),f=>Te(f,"table")||u(f)))(["td","th"],a,i)).map(a=>(rx(a,o).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?ux:VT)(t,o,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},lo=(t,e)=>({container:t,offset:e}),Nd=we.DOM,_d=t=>e=>t===e?-1:0,bp=(t,e,n)=>{if(lt(t)&&e>=0)return E.some(lo(t,e));{const r=ea(Nd);return E.from(r.backwards(t,e,_d(t),n)).map(o=>lo(o.container,o.container.data.length))}},vp=(t,e,n)=>{if(!lt(t))return E.none();if(e>=0&&e<=t.data.length)return E.some(lo(t,e));{const o=ea(Nd);return E.from(o.backwards(t,e,_d(t),n)).bind(s=>vp(s.container,e+s.container.data.length,n))}},mx=(t,e,n)=>{if(!lt(t))return E.none();const r=t.data;if(e<=r.length)return E.some(lo(t,e));{const o=ea(Nd);return E.from(o.forwards(t,e,_d(t),n)).bind(s=>mx(s.container,e-r.length,n))}},yp=(t,e,n,r,o)=>{const s=ea(t,(a=t,i=>a.isBlock(i)||Ot(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i)));var a;return E.from(s.backwards(e,n,r,o))},px=t=>ur(t.toString().replace(/\u00A0/g," ")),gx=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),Cp=(t,e)=>t.substring(e.length),hx=(t,e,n,r=0)=>{return(o=O(e.startContainer),zr(o,_b)).fold(()=>((s,a,i,l=0)=>{if(!(c=a).collapsed||!lt(c.startContainer))return E.none();var c;const u={text:"",offset:0},f=s.getParent(a.startContainer,s.isBlock)||s.getRoot();return yp(s,a.startContainer,a.startOffset,(p,b,g)=>(u.text=g+u.text,u.offset+=b,((v,h,C)=>{let S;const k=C.charAt(0);for(S=h-1;S>=0;S--){const A=v.charAt(S);if(gx(A))return E.none();if(k===A&&Fe(v,C,S,h))break}return E.some(S)})(u.text,u.offset,i).getOr(b)),f).bind(p=>{const b=a.cloneRange();if(b.setStart(p.container,p.offset),b.setEnd(a.endContainer,a.endOffset),b.collapsed)return E.none();const g=px(b);return 0!==g.lastIndexOf(i)||Cp(g,i).length<l?E.none():E.some({text:Cp(g,i),range:b,trigger:i})})})(t,e,n,r),s=>{const a=t.createRng();a.selectNode(s.dom);const i=px(a);return E.some({range:a,text:Cp(i,n),trigger:n})});var o},bx=t=>{if(3===t.nodeType)return lo(t,t.data.length);{const e=t.childNodes;return e.length>0?bx(e[e.length-1]):lo(t,e.length)}},vx=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?vx(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?bx(n[n.length-1]):lo(t,e)},yx=(t,e,n,r={})=>{var o;const s=e(),a=null!==(o=t.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=Ht(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>{return u=t.dom,f=>{const p=vx(f.startContainer,f.startOffset);return!((b,g)=>{var v;const h=null!==(v=b.getParent(g.container,b.isBlock))&&void 0!==v?v:b.getRoot();return yp(b,g.container,g.offset,(C,S)=>0===S?-1:S,h).filter(C=>{const S=C.container.data.charAt(C.offset-1);return!gx(S)}).isSome()})(u,p)};var u})(n.range,a,n.text));if(0===i.length)return E.none();const l=Promise.all(ne(i,c=>c.fetch(n.text,c.maxResults,r).then(u=>({matchText:n.text,items:u,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return E.some({lookupData:l,context:n})};var Oo;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Oo||(Oo={}));const xp=(t,e,n)=>t.stype===Oo.Error?e(t.serror):n(t.svalue),di=t=>({stype:Oo.Value,svalue:t}),Ll=t=>({stype:Oo.Error,serror:t}),KT=xp,wp=t=>Kt(t)&&Ke(t).length>100?" removed due to size":JSON.stringify(t,null,2),Ad=(t,e)=>Ll([{path:t,getErrorInfo:e}]),Cx=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const s in o)Zt(o,s)&&(n[s]=t(n[s],o[s]))}return n},Sp=Cx((t,e)=>Pt(t)&&Pt(e)?Sp(t,e):e),xx=(Cx((t,e)=>e),t=>({tag:"defaultedThunk",process:ht(t)})),wx=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},kp=t=>({extract:(e,n)=>{return(r=t(n)).stype===Oo.Error?Ad(e,ht(r.serror)):r;var r},toString:ht("val")}),YT=kp(di),Sx=(t,e,n,r)=>r(ke(t,e).getOrThunk(()=>n(t))),QT=(t,e,n,r,o)=>{const s=i=>o.extract(e.concat([r]),i),a=i=>i.fold(()=>di(E.none()),l=>{return(u=o.extract(e.concat([r]),l)).stype===Oo.Value?{stype:Oo.Value,svalue:(0,E.some)(u.svalue)}:u;var u});switch(t.tag){case"required":return i=e,u=s,ke(l=n,c=r).fold(()=>{return p=c,b=l,Ad(i,()=>'Could not find valid *required* value for "'+p+'" in '+wp(b));var p,b},u);case"defaultedThunk":return Sx(n,r,t.process,s);case"option":return((i,l,c)=>c(ke(i,l)))(n,r,a);case"defaultedOptionThunk":return((i,l,c,u)=>u(ke(i,l).map(f=>!0===f?c(i):f)))(n,r,t.process,a);case"mergeWithThunk":return Sx(n,r,ht({}),i=>{const l=Sp(t.process(n),i);return s(l)})}var i,l,c,u},Ep=t=>({extract:(e,n)=>((r,o,s)=>{const a={},i=[];for(const l of s)wx(l,(c,u,f,p)=>{const b=QT(f,r,o,c,p);KT(b,g=>{i.push(...g)},g=>{a[u]=g})},(c,u)=>{a[c]=u(o)});return i.length>0?Ll(i):di(a)})(e,n,t),toString:()=>"obj{\n"+ne(t,n=>wx(n,(r,o,s,a)=>r+" -> "+a.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),kx=t=>({extract:(e,n)=>(t=>{const e=(r=>{const o=[],s=[];return tt(r,a=>{xp(a,i=>s.push(i),i=>o.push(i))}),{values:o,errors:s}})(t);return e.errors.length>0?(n=e.errors,kn(Ll,Gl)(n)):di(e.values);var n})(ne(n,(o,s)=>t.extract(e.concat(["["+s+"]"]),o))),toString:()=>"array("+t.toString()+")"}),Ex=(t,e)=>((t,e)=>({extract:(n,r)=>ke(r,t).fold(()=>{return s=t,Ad(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},o=>{return s=n,a=r,ke(i=e,l=o).fold(()=>{return u=i,f=l,Ad(s,()=>'The chosen schema: "'+f+'" did not exist in branches: '+wp(u));var u,f},c=>c.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Ke(e)}))(t,Io(e,Ep)),ZT=ht(YT),Td=(t,e)=>kp(n=>{const r=typeof n;return t(n)?di(n):Ll(`Expected type: ${e} but got: ${r}`)}),tR=Td(x,"number"),Rd=Td(Dt,"string"),eR=Td(Pn,"boolean"),Np=Td(ge,"function"),Ml=(t,e,n,r)=>({tag:"field",key:t,newKey:e,presence:n,prop:r}),Nx=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),_x=(t,e)=>Ml(t,t,{tag:"required",process:{}},e),Ax=t=>_x(t,Rd),Tx=t=>_x(t,Np),_p=(t,e)=>Ml(t,t,{tag:"option",process:{}},e),Od=t=>_p(t,Rd),ui=(t,e,n)=>Ml(t,t,xx(e),n),Rx=(t,e)=>ui(t,e,tR),Ox=(t,e,n)=>{return ui(t,e,(r=n,o=s=>Ot(r,s)?Gn.value(s):Gn.error(`Unsupported value: "${s}", choose one of "${r.join(", ")}".`),kp(s=>o(s).fold(Ll,di))));var r,o},Ap=(t,e)=>ui(t,e,eR),Tp=(t,e)=>ui(t,e,Np),nR=Ax("type"),rR=Tx("fetch"),Rp=Tx("onAction"),oR=Tp("onSetup",()=>At),sR=Od("text"),aR=Od("icon"),iR=Od("tooltip"),lR=Od("label"),cR=Ap("active",!1),dR=Ap("enabled",!0),Dx=Ap("primary",!1),Il=t=>ui("type",t,Rd),uR=Ep([nR,Ax("trigger"),Rx("minChars",1),((t,e)=>Ml(t,t,xx(1),ZT()))("columns"),Rx("maxResults",10),_p("matches",Np),rR,Rp,(Bx=Rd,ui("highlightOn",[],kx(Bx)))]);var Bx;const Op=[dR,iR,aR,sR,oR],Px=[cR].concat(Op),fR=[Tp("predicate",ve),Ox("scope","node",["node","editor"]),Ox("position","selection",["node","selection","line"])],mR=Op.concat([Il("contextformbutton"),Dx,Rp,Nx("original",de)]),pR=Px.concat([Il("contextformbutton"),Dx,Rp,Nx("original",de)]),gR=Op.concat([Il("contextformbutton")]),hR=Px.concat([Il("contextformtogglebutton")]),bR=Ex("type",{contextformbutton:mR,contextformtogglebutton:pR});Ep([Il("contextform"),Tp("initValue",ht("")),lR,((t,e)=>Ml(t,t,{tag:"required",process:{}},kx(e)))("commands",bR),_p("launch",Ex("type",{contextformbutton:gR,contextformtogglebutton:hR}))].concat(fR));const yR=t=>{const e=Cs(),n=sn(!1),r=e.isSet,o=()=>{r()&&(ze(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=zo(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Io(e,s=>{return(a=s,((t,e,n)=>{return r=(i=e.extract([t],a=n)).stype===Oo.Error?{stype:Oo.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,xp(r,Gn.error,Gn.value);var a,i,r})("Autocompleter",uR,{trigger:a.ch,...a})).fold(i=>{throw new Error("Errors: \n"+(c=>{const u=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:ht("... (only showing first ten failures)")}]):c;return ne(u,f=>"Failed path: ("+f.path.join(" > ")+")\n"+f.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+wp(l.input));var l},de);var a}),r=Mn(ss(n,s=>s.trigger)),o=jo(n);return{dataset:n,triggers:r,lookupByTrigger:s=>Ht(o,a=>a.trigger===s)}})(t)),a=i=>{var l;(l=i,e.get().map(c=>hx(t.dom,t.selection.getRng(),c.trigger).bind(u=>yx(t,s,u,l))).getOrThunk(()=>((c,u)=>{const f=u(),p=c.selection.getRng();return(b=c.dom,g=p,v=f,qn(v.triggers,h=>hx(b,g,h))).bind(b=>yx(c,u,b));var b,g,v})(t,s))).fold(o,l=>{var c,f;c=l.context,r()||(f=c.range,ze(t).autocompleter.addDecoration(f),e.set({trigger:c.trigger,matchLength:c.text.length})),l.lookupData.then(c=>{e.get().map(u=>{const f=l.context;u.trigger===f.trigger&&(f.text.length-u.matchLength>=10?o():(e.set({...u,matchLength:f.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:c}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:c}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const c=Kt(l)?l.fetchOptions:{};a(c)}),t.addCommand("mceAutocompleterClose",o),((i,l)=>{const c=Fu(l.load,50);i.on("keypress compositionend",u=>{27!==u.which&&c.throttle()}),i.on("keydown",u=>{const f=u.which;8===f?c.throttle():27===f&&l.cancelIfNecessary()}),i.on("remove",c.cancel)})(t,{cancelIfNecessary:o,load:a})},CR=_n().browser.isSafari(),Lx=t=>gs(O(t)),Mx=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},Dd=(t,e)=>E.from(t.getParent(e.container(),"details")),Ix=(t,e)=>Dd(t,e).isSome(),Fx=(t,e)=>{const n=e.getNode();De(n)||t.selection.setCursorLocation(n,e.offset())},jx=(t,e,n)=>{const r=t.dom.getParent(e.container(),"details");if(r&&!r.open){const o=t.dom.select("summary",r)[0];o&&(n?Dn(o):qr(o)).each(s=>Fx(t,s))}else Fx(t,e)},zx=(t,e,n)=>{const{dom:r,selection:o}=t,s=t.getBody();if("character"===n){const a=G.fromRangeStart(o.getRng()),i=r.getParent(a.container(),r.isBlock),l=Dd(r,a),c=i&&r.isEmpty(i),u=Qt(i?.previousSibling),f=Qt(i?.nextSibling);return!!(c&&(e?f:u)&&Ya(!e,s,a).exists(p=>Ix(r,p)&&!La(l,Dd(r,p))))||Ya(e,s,a).fold(ve,p=>{const b=Dd(r,p);if(Ix(r,p)&&!La(l,b)){if(e||jx(t,p,!1),i&&c){if(e&&u||!e&&f)return!0;jx(t,p,e),t.dom.remove(i)}return!0}return!1})}return!1},ya=(t,e,n)=>{return o=e,s=n,((a,i)=>{const l=E.from(a.getParent(i.startContainer,"details")),c=E.from(a.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const u=l.bind(f=>E.from(a.select("summary",f)[0]));return E.some({startSummary:u,startDetails:l,endDetails:c})}return E.none()})((r=t).dom,r.selection.getRng()).fold(()=>zx(r,o,s),a=>((t,e,n,r)=>{const o=t.selection.getRng(),s=G.fromRangeStart(o),a=t.getBody();return"selection"===r?((i,l)=>{const c=l.startSummary.exists(p=>p.contains(i.startContainer)),u=l.startSummary.exists(p=>p.contains(i.endContainer)),f=l.startDetails.forall(p=>l.endDetails.forall(b=>p!==b));return(c||u)&&!(c&&u)||f})(o,e):n?(i=s,e.startSummary.exists(c=>{return u=i,qr(f=c).exists(p=>Le(p.getNode())&&nr(f,p).exists(b=>b.isEqual(u))||p.isEqual(u));var u,f})||((i,l,c)=>c.startDetails.exists(u=>Yn(i,l).forall(f=>!u.contains(f.container()))))(a,s,e)):((i,l)=>l.startSummary.exists(c=>{return u=i,Dn(c).exists(p=>p.isEqual(u));var u}))(s,e)||((i,l)=>l.startDetails.exists(c=>nr(c,i).forall(u=>l.startSummary.exists(f=>!f.contains(i.container())&&f.contains(u.container())))))(s,e);var i})(r,a,o,s)||zx(r,o,s))||CR&&((r,o,s)=>{const a=r.selection,i=a.getNode(),l=a.getRng(),c=G.fromRangeStart(l);return!!ok(i)&&("selection"===s&&Mx(l,i)||hv(o,c,i)?Lx(i):r.undoManager.transact(()=>{const u=a.getSel();let{anchorNode:f,anchorOffset:p,focusNode:b,focusOffset:g}=u??{};const v=()=>{gt(f)&&gt(p)&&gt(b)&&gt(g)&&u?.setBaseAndExtent(f,p,b,g)},h=(S,k)=>{tt(S.childNodes,A=>{fl(A)&&k.appendChild(A)})},C=r.dom.create("span",{"data-mce-bogus":"1"});h(i,C),i.appendChild(C),v(),"word"!==s&&"line"!==s||null==u||u.modify("extend",o?"right":"left",s),!a.isCollapsed()&&Mx(a.getRng(),C)?Lx(i):(r.execCommand(o?"ForwardDelete":"Delete"),f=u?.anchorNode,p=u?.anchorOffset,b=u?.focusNode,g=u?.focusOffset,h(C,i),v()),r.dom.remove(C)}),!0)})(t,e,n)?E.some(At):E.none();var r,o,s},Hx=t=>(e,n,r={})=>{const o=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:At,inputType:n},a=qg(new InputEvent(t));return e.dispatch(t,{...a,...s,...r})},Fl=Hx("input"),Bd=Hx("beforeinput"),Ux=_n(),qx=Ux.os,$x=qx.isMacOS()||qx.isiOS(),wR=Ux.browser.isFirefox(),fi=(t,e)=>{const n=t.dom,r=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(wt(a)||lt(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(on),e.firstChild)}const o=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new tn(e,e);let a,i=e;for(;a=s.current();){if(lt(a)){o.setStart(a,0),o.setEnd(a,0);break}if(r[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}i=a,a=s.next()}a||(o.setStart(i,0),o.setEnd(i,0))}else Le(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)):(o.setStart(e,0),o.setEnd(e,0));t.selection.setRng(o),hl(t,o)},jl=(t,e)=>{const n=t.getRoot();let r,o=e;for(;o!==n&&o&&"false"!==t.getContentEditable(o);){if("true"===t.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},Dp=t=>E.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Bp=t=>{t.innerHTML='<br data-mce-bogus="1">'},zl=(t,e)=>{On(t).toLowerCase()===e.tagName.toLowerCase()&&((n,r,o)=>{const s=n.dom;E.from(o.style).map(s.parseStyle).each(u=>{const f={...rt(O(r)),...u};s.setStyles(r,f)});const a=E.from(o.class).map(u=>u.split(/\s+/)),i=E.from(r.className).map(u=>Ht(u.split(/\s+/),f=>""!==f));hn(a,i,(u,f)=>{const p=Ht(f,g=>!Ot(u,g)),b=[...u,...p];s.setAttrib(r,"class",b.join(" "))});const l=["style","class"],c=hr(o,(u,f)=>!Ot(l,f));s.setAttribs(r,c)})(t,e,rl(t))},Wx=(t,e,n,r,o=!0,s)=>{const a=t.dom,i=t.schema,l=On(t),c=n?n.nodeName.toUpperCase():"";let u=e;const f=i.getTextInlineElements();let p;p=s||"TABLE"===c||"HR"===c?a.create(s||l):n.cloneNode(!1);let b=p;if(o){do{if(f[u.nodeName]){if($r(u)||Sr(u))continue;const g=u.cloneNode(!1);a.setAttrib(g,"id",""),p.hasChildNodes()?(g.appendChild(p.firstChild),p.appendChild(g)):(b=g,p.appendChild(g))}}while((u=u.parentNode)&&u!==r)}else a.setAttrib(p,"style",null),a.setAttrib(p,"class",null);return zl(t,p),Bp(b),p},Vx=(t,e)=>{const n=t?.parentNode;return gt(n)&&n.nodeName===e},Kx=t=>gt(t)&&/^(OL|UL|LI)$/.test(t.nodeName),Pd=t=>{const e=t.parentNode;return gt(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},Ld=(t,e,n)=>{let r=t[n?"firstChild":"lastChild"];for(;r&&!wt(r);)r=r[n?"nextSibling":"previousSibling"];return r===e},SR=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Pp=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Lp=(t,e)=>gt(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Mp=(t,e,n)=>lt(e)?t?1===n&&e.data.charAt(n-1)===fn?0:n:n===e.data.length-1&&e.data.charAt(n)===fn?e.data.length:n:n,Xx={insert:(t,e)=>{let n,r,o,s,a=!1;const i=t.dom,l=t.schema.getNonEmptyElements(),c=t.selection.getRng(),u=On(t),f=O(c.startContainer),p=je(f,c.startOffset),b=p.exists(U=>$s(U)&&!Zr(U)),g=c.collapsed&&b,v=U=>Wx(t,n,_,A,eE(t),U),h=U=>{const K=Mp(U,n,r);if(lt(n)&&(U?K>0:K<n.data.length))return!1;if(n.parentNode===_&&a&&!U||U&&wt(n)&&n===_.firstChild)return!0;if(Pp(n,"TABLE")||Pp(n,"HR"))return a&&!U||!a&&U;const P=new tn(n,_);let L;for(lt(n)&&(U&&0===K?P.prev():U||K!==n.data.length||P.next());L=P.current();){if(wt(L)){if(!L.getAttribute("data-mce-bogus")){const $=L.nodeName.toLowerCase();if(l[$]&&"br"!==$)return!1}}else if(lt(L)&&!bs(L.data))return!1;U?P.prev():P.next()}return!0},C=()=>{let U;return U=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==D?v(u):v(),((K,P)=>{const L=nE(K);return!be(P)&&(Dt(L)?Ot(dt.explode(L),P.nodeName.toLowerCase()):L)})(t,s)&&Lp(i,s)&&i.isEmpty(_,void 0,{includeZwsp:!0})?U=i.split(s,_):i.insertAfter(U,_),fi(t,U),U};Vc(i,c).each(U=>{c.setStart(U.startContainer,U.startOffset),c.setEnd(U.endContainer,U.endOffset)}),n=c.startContainer,r=c.startOffset;const S=!(!e||!e.shiftKey),k=!(!e||!e.ctrlKey);wt(n)&&n.hasChildNodes()&&!g&&(a=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=a&&lt(n)?n.data.length:0);const A=jl(i,n);if(!A||((U,K)=>{const P=U.dom.getParent(K,"ol,ul,dl");return null!==P&&"false"===U.dom.getContentEditableParent(P)})(t,n))return;S||(n=((U,K,P,L,$)=>{var Q,vt;const it=U.dom,Rt=null!==(Q=jl(it,L))&&void 0!==Q?Q:it.getRoot();let Et=it.getParent(L,it.isBlock);if(!Et||!Lp(it,Et)){if(Et=Et||Rt,!Et.hasChildNodes()){const Ft=it.create(K);return zl(U,Ft),Et.appendChild(Ft),P.setStart(Ft,0),P.setEnd(Ft,0),Ft}let Ut,Wt=L;for(;Wt&&Wt.parentNode!==Et;)Wt=Wt.parentNode;for(;Wt&&!it.isBlock(Wt);)Ut=Wt,Wt=Wt.previousSibling;const xt=null===(vt=Ut?.parentElement)||void 0===vt?void 0:vt.nodeName;if(Ut&&xt&&U.schema.isValidChild(xt,K.toLowerCase())){const Ft=Ut.parentNode,Xt=it.create(K);for(zl(U,Xt),Ft.insertBefore(Xt,Ut),Wt=Ut;Wt&&!it.isBlock(Wt);){const M=Wt.nextSibling;Xt.appendChild(Wt),Wt=M}P.setStart(L,$),P.setEnd(L,$)}}return L})(t,u,c,n,r));let _=i.getParent(n,i.isBlock)||i.getRoot();s=gt(_?.parentNode)?i.getParent(_.parentNode,i.isBlock):null,o=_?_.nodeName.toUpperCase():"";const D=s?s.nodeName.toUpperCase():"";if("LI"!==D||k||(_=s,s=s.parentNode,o=D),wt(s)&&(U=t,P=_,!S&&P.nodeName.toLowerCase()===On(U)&&U.dom.isEmpty(P)&&((L,$,Q)=>{let vt=$;for(;vt&&vt!==L&&Qt(vt.nextSibling);){const Rt=vt.parentElement;if(!Rt||(it=Rt,!Zt(U.schema.getTextBlockElements(),it.nodeName.toLowerCase())))return bg(Rt);vt=Rt}var it;return!1})(U.getBody(),P)))return((U,K,P)=>{var L,$,Q;const vt=K(On(U)),it=U.dom.getParent(P,bg);it&&(U.dom.insertAfter(vt,it),fi(U,vt),(null!==(Q=null===($=null===(L=P.parentElement)||void 0===L?void 0:L.childNodes)||void 0===$?void 0:$.length)&&void 0!==Q?Q:0)>1&&U.dom.remove(P))})(t,v,_);var U,P;if(/^(LI|DT|DD)$/.test(o)&&wt(s)&&i.isEmpty(_))return void((U,K,P,L,$)=>{const Q=U.dom,vt=U.selection.getRng(),it=P.parentNode;if(P===U.getBody()||!it)return;var Rt;Kx(Rt=P)&&Kx(Rt.parentNode)&&($="LI");let Et=K($);if(Ld(P,L,!0)&&Ld(P,L,!1))if(Vx(P,"LI")){const Ut=Pd(P);Q.insertAfter(Et,Ut),(null===(xt=(Wt=P).parentNode)||void 0===xt?void 0:xt.firstChild)===Wt?Q.remove(Ut):Q.remove(P)}else Q.replace(Et,P);else if(Ld(P,L,!0))Vx(P,"LI")?(Q.insertAfter(Et,Pd(P)),Et.appendChild(Q.doc.createTextNode(" ")),Et.appendChild(P)):it.insertBefore(Et,P),Q.remove(L);else if(Ld(P,L,!1))Q.insertAfter(Et,Pd(P)),Q.remove(L);else{P=Pd(P);const Ut=vt.cloneRange();Ut.setStartAfter(L),Ut.setEndAfter(P);const Wt=Ut.extractContents();"LI"===$&&((xt,Ft)=>xt.firstChild&&"LI"===xt.firstChild.nodeName)(Wt)?(Et=Wt.firstChild,Q.insertAfter(Wt,P)):(Q.insertAfter(Wt,P),Q.insertAfter(Et,P)),Q.remove(L)}var Wt,xt;fi(U,Et)})(t,v,s,_,u);if(!(g||_!==t.getBody()&&Lp(i,_)))return;const I=_.parentNode;let j;if(g)j=v(u),p.fold(()=>{Nt(f,O(j))},U=>{Tt(U,O(j))}),t.selection.setCursorLocation(j,0);else if(qa(_))j=yu(_),i.isEmpty(_)&&Bp(_),zl(t,j),fi(t,j);else if(h(!1))j=C();else if(h(!0)&&I){j=I.insertBefore(v(),_);const U=O(c.startContainer).dom.hasChildNodes()&&c.collapsed;fi(t,Pp(_,"HR")||U?j:_)}else{const U=(P=>{const L=P.cloneRange();return L.setStart(P.startContainer,Mp(!0,P.startContainer,P.startOffset)),L.setEnd(P.endContainer,Mp(!1,P.endContainer,P.endOffset)),L})(c).cloneRange();U.setEndAfter(_);const K=U.extractContents();(P=>{tt(fg(O(P),Vn),L=>{const $=L.dom;$.nodeValue=ur($.data)})})(K),(P=>{let L=P;do{lt(L)&&(L.data=L.data.replace(/^[\r\n]+/,"")),L=L.firstChild}while(L)})(K),j=K.firstChild,i.insertAfter(K,_),((P,L,$)=>{var Q;const vt=[];if(!$)return;let it=$;for(;it=it.firstChild;){if(P.isBlock(it))return;wt(it)&&!L[it.nodeName.toLowerCase()]&&vt.push(it)}let Rt=vt.length;for(;Rt--;)it=vt[Rt],(!it.hasChildNodes()||it.firstChild===it.lastChild&&""===(null===(Q=it.firstChild)||void 0===Q?void 0:Q.nodeValue)||SR(P,it))&&P.remove(it)})(i,l,j),((P,L)=>{L.normalize();const $=L.lastChild;(!$||wt($)&&/^(left|right)$/gi.test(P.getStyle($,"float",!0)))&&P.add(L,"br")})(i,_),i.isEmpty(_)&&Bp(_),j.normalize(),i.isEmpty(j)?(i.remove(j),C()):(zl(t,j),fi(t,j))}i.setAttrib(j,"id",""),t.dispatch("NewBlock",{newBlock:j})},fakeEventName:"insertParagraph"},Gx=(t,e,n)=>{const r=t.dom.createRng();n?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),t.selection.setRng(r),hl(t,r)},kR=(t,e)=>{const n=ot("br");Tt(O(e),n),t.undoManager.add()},ER=(t,e)=>{NR(t.getBody(),e)||Bt(O(e),ot("br"));const n=ot("br");Bt(O(e),n),Gx(t,n.dom,!1),t.undoManager.add()},NR=(t,e)=>{return n=G.after(e),!!Le(n.getNode())||Yn(t,G.after(e)).map(r=>Le(r.getNode())).getOr(!1);var n},Yx=t=>t&&"A"===t.nodeName&&"href"in t,_R=t=>t.fold(ve,Yx,Yx,ve),AR=(t,e)=>{e.fold(At,kt(kR,t),kt(ER,t),At)},Qx={insert:(t,e)=>{const n=(r=>{const o=kt(ma,r),s=G.fromRangeStart(r.selection.getRng());return To(o,r.getBody(),s).filter(_R)})(t);n.isSome()?n.each(kt(AR,t)):((r,o)=>{const a=r.dom,i=r.selection.getRng();let l,c=!1;Vc(a,i).each(h=>{i.setStart(h.startContainer,h.startOffset),i.setEnd(h.endContainer,h.endOffset)});let u=i.startOffset,f=i.startContainer;if(wt(f)&&f.hasChildNodes()){const h=u>f.childNodes.length-1;f=f.childNodes[Math.min(u,f.childNodes.length-1)]||f,u=h&&lt(f)?f.data.length:0}let p=a.getParent(f,a.isBlock);const b=p&&p.parentNode?a.getParent(p.parentNode,a.isBlock):null;"LI"!==(b?b.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(p=b),lt(f)&&u>=f.data.length&&(((h,C,S)=>{const k=new tn(C,S);let A;const _=h.getNonEmptyElements();for(;A=k.next();)if(_[A.nodeName.toLowerCase()]||lt(A)&&A.length>0)return!0;return!1})(r.schema,f,p||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),qu(a,i,l),Gx(r,l,c),r.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},Jx=(t,e)=>Dp(t).filter(n=>e.length>0&&Te(O(n),e)).isSome(),fr=xo([{br:[]},{block:[]},{none:[]}]),TR=(t,e)=>{return Jx(n=t,tE(n));var n},Zx=t=>(e,n)=>Dp(e).filter(o=>Hi(O(o))).isSome()===t,tw=(t,e)=>(n,r)=>Dp(n).fold(ht(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,RR=t=>{const e=jl(t.dom,t.selection.getStart());return be(e)},Hl=t=>tw("pre",t),Md=t=>(e,n)=>Qk(e)===t,OR=(t,e)=>{return Jx(n=t,Zk(n));var n},Id=(t,e)=>e,DR=t=>{const e=On(t),n=jl(t.dom,t.selection.getStart());return gt(n)&&t.schema.isValidChild(n.nodeName,e)},BR=t=>{const e=t.selection.getRng(),n=O(e.startContainer),r=je(n,e.startOffset).map(o=>$s(o)&&!Zr(o));return e.collapsed&&r.getOr(!0)},Tr=(t,e)=>(n,r)=>pn(t,(o,s)=>o&&s(n,r),!0)?E.some(e):E.none(),Fd=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),gt(n)&&Bd(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),gt(n)&&Fl(e,t.fakeEventName))},ew=(t,e)=>{const n=()=>Fd(Qx,t,e),r=()=>Fd(Xx,t,e),o=(s=t,a=e,Y1([Tr([TR],fr.none()),Tr([Hl(!0),RR],fr.none()),Tr([tw("summary",!0)],fr.br()),Tr([Hl(!0),Md(!1),Id],fr.br()),Tr([Hl(!0),Md(!1)],fr.block()),Tr([Hl(!0),Md(!0),Id],fr.block()),Tr([Hl(!0),Md(!0)],fr.br()),Tr([Zx(!0),Id],fr.br()),Tr([Zx(!0)],fr.block()),Tr([OR],fr.br()),Tr([Id],fr.br()),Tr([DR],fr.block()),Tr([BR],fr.block())],[s,!(!a||!a.shiftKey)]).getOr(fr.none()));var s,a;switch(Jk(t)){case"linebreak":o.fold(n,n,At);break;case"block":o.fold(r,r,At);break;case"invert":o.fold(r,n,At);break;default:o.fold(n,r,At)}},nw=_n(),PR=nw.os.isiOS()&&nw.browser.isSafari(),rw=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{ew(t,e)}))},LR=_n(),ow=t=>t.stopImmediatePropagation(),sw=t=>t.keyCode===Ct.PAGE_UP||t.keyCode===Ct.PAGE_DOWN,aw=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",ow,!0):!n&&t.get()&&e.off("NodeChange",ow),t.set(n)},iw=(t,e)=>{const n=e.container(),r=e.offset();return lt(n)?(n.insertData(r,t),E.some(G(n,r+t.length))):Bc(e).map(o=>{const s=qt(t);return e.isAtEnd()?Bt(o,s):Tt(o,s),G(s.dom,t.length)})},lw=kt(iw,on),cw=kt(iw," "),dw=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},MR=t=>{const e=G.fromRangeStart(t.selection.getRng()),n=O(t.getBody());if(t.selection.isCollapsed()){const r=kt(ma,t),o=G.fromRangeStart(t.selection.getRng());return To(r,t.getBody(),o).bind((s=n,a=>a.fold(i=>nr(s.dom,G.before(i)),i=>Dn(i),i=>qr(i),i=>Yn(s.dom,G.after(i))))).map(s=>()=>{return(a=n,i=e,l=>rv(a,l)?lw(i):cw(i))(s).each(dw(t));var a,i})}var s;return E.none()},IR=t=>{return ds(ue.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const r=O(t.getBody());var o,s;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(o=r,s=G.fromRangeStart(t.selection.getRng()),rv(o,s)?lw(s):cw(s)).each(dw(t))});var e,n},FR=t=>lN(t)?[{keyCode:Ct.TAB,action:Mt(fx,t,!0)},{keyCode:Ct.TAB,shiftKey:!0,action:Mt(fx,t,!1)}]:[],jR=t=>{if(t.addShortcut("Meta+P","","mcePrint"),yR(t),Ao(t))return sn(null);{const e=(t=>{const e=sn(null),n=kt(ma,t);return t.on("NodeChange",r=>{ol(t)&&(((o,s,a)=>{const i=ne(Cn(O(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),u=>u.dom),l=Ht(i,o),c=Ht(a,o);tt(Jt(l,c),kt(vC,!1)),tt(Jt(c,l),kt(vC,!0))})(n,t.dom,r.parents),((o,s)=>{const a=s.get();if(o.selection.isCollapsed()&&!o.composing&&a){const i=G.fromRangeStart(o.selection.getRng());G.isTextPosition(i)&&!bu(l=i)&&!vu(l)&&(Sd(o,((t,e)=>{return G.isTextPosition(e)?(r=e,Xh(n=t)&&r.container()===n?((o,s)=>{const a=Yh(o.data.substr(0,s.offset())),i=Yh(o.data.substr(s.offset()));return(a.text+i.text).length>0?(Qh(o),G(o,s.offset()-a.count)):s})(n,r):Jh(n,r)):((n,r)=>r.container()===n.parentNode?((o,s)=>{const a=s.container(),i=((l,c)=>{const u=ae(l,c);return-1===u?E.none():E.some(u)})(un(a.childNodes),o).map(l=>l<s.offset()?G(a,s.offset()-1):s).getOr(s);return oa(o),i})(n,r):Jh(n,r))(t,e);var n,r})(a,i)),s.set(null))}var l})(t,e),((o,s,a,i)=>{if(s.selection.isCollapsed()){const l=Ht(i,o);tt(l,c=>{const u=G.fromRangeStart(s.selection.getRng());To(o,s.getBody(),u).bind(f=>yC(s,a,f))})}})(n,t,e,r.parents))}),e})(t);return(n=t).on("keyup compositionstart",kt(FT,n)),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=ue.os.isMacOS()||ue.os.isiOS();Bl([{keyCode:Ct.RIGHT,action:Mt($C,s,!0)},{keyCode:Ct.LEFT,action:Mt($C,s,!1)},{keyCode:Ct.UP,action:Mt(WC,s,!1)},{keyCode:Ct.DOWN,action:Mt(WC,s,!0)},...l?[{keyCode:Ct.UP,action:Mt(Ed,s,!1),metaKey:!0,shiftKey:!0},{keyCode:Ct.DOWN,action:Mt(Ed,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Ct.RIGHT,action:Mt(cx,s,!0)},{keyCode:Ct.LEFT,action:Mt(cx,s,!1)},{keyCode:Ct.UP,action:Mt(hp,s,!1)},{keyCode:Ct.DOWN,action:Mt(hp,s,!0)},{keyCode:Ct.UP,action:Mt(hp,s,!1)},{keyCode:Ct.UP,action:Mt(XC,s,!1)},{keyCode:Ct.DOWN,action:Mt(XC,s,!0)},{keyCode:Ct.RIGHT,action:Mt(JC,s,!0)},{keyCode:Ct.LEFT,action:Mt(JC,s,!1)},{keyCode:Ct.UP,action:Mt(ZC,s,!1)},{keyCode:Ct.DOWN,action:Mt(ZC,s,!0)},{keyCode:Ct.RIGHT,action:Mt(CC,s,a,!0)},{keyCode:Ct.LEFT,action:Mt(CC,s,a,!1)},{keyCode:Ct.RIGHT,ctrlKey:!l,altKey:l,action:Mt(_T,s,a)},{keyCode:Ct.LEFT,ctrlKey:!l,altKey:l,action:Mt(AT,s,a)},{keyCode:Ct.UP,action:Mt(KC,s,!1)},{keyCode:Ct.DOWN,action:Mt(KC,s,!0)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{let o=!1;n.on("keydown",s=>{o=s.keyCode===Ct.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===Ct.BACKSPACE?"deleteContentBackward":"deleteContentForward",u=a.selection.isCollapsed(),f=u?"character":"selection",p=b=>u?b?"word":"line":"selection";QC([{keyCode:Ct.BACKSPACE,action:Mt(LC,a)},{keyCode:Ct.BACKSPACE,action:Mt(tp,a,!1)},{keyCode:Ct.DELETE,action:Mt(tp,a,!0)},{keyCode:Ct.BACKSPACE,action:Mt(Qm,a,!1)},{keyCode:Ct.DELETE,action:Mt(Qm,a,!0)},{keyCode:Ct.BACKSPACE,action:Mt(cp,a,i,!1)},{keyCode:Ct.DELETE,action:Mt(cp,a,i,!0)},{keyCode:Ct.BACKSPACE,action:Mt(sm,a,!1)},{keyCode:Ct.DELETE,action:Mt(sm,a,!0)},{keyCode:Ct.BACKSPACE,action:Mt(ya,a,!1,f)},{keyCode:Ct.DELETE,action:Mt(ya,a,!0,f)},...$x?[{keyCode:Ct.BACKSPACE,altKey:!0,action:Mt(ya,a,!1,p(!0))},{keyCode:Ct.DELETE,altKey:!0,action:Mt(ya,a,!0,p(!0))},{keyCode:Ct.BACKSPACE,metaKey:!0,action:Mt(ya,a,!1,p(!1))}]:[{keyCode:Ct.BACKSPACE,ctrlKey:!0,action:Mt(ya,a,!1,p(!0))},{keyCode:Ct.DELETE,ctrlKey:!0,action:Mt(ya,a,!0,p(!0))}],{keyCode:Ct.BACKSPACE,action:Mt(ep,a,!1)},{keyCode:Ct.DELETE,action:Mt(ep,a,!0)},{keyCode:Ct.BACKSPACE,action:Mt(fp,a,!1)},{keyCode:Ct.DELETE,action:Mt(fp,a,!0)},{keyCode:Ct.BACKSPACE,action:Mt(Gm,a,!1)},{keyCode:Ct.DELETE,action:Mt(Gm,a,!0)},{keyCode:Ct.BACKSPACE,action:Mt(Xm,a,!1)},{keyCode:Ct.DELETE,action:Mt(Xm,a,!0)},{keyCode:Ct.BACKSPACE,action:Mt(dp,a,!1)},{keyCode:Ct.DELETE,action:Mt(dp,a,!0)}],l).filter(b=>a.selection.isEditable()).each(b=>{l.preventDefault(),Bd(a,c).isDefaultPrevented()||(b(),Fl(a,c))})})(n,r,s)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(i=s,l=o,Bl([{keyCode:Ct.BACKSPACE,action:Mt($1,a=n)},{keyCode:Ct.DELETE,action:Mt($1,a)},...$x?[{keyCode:Ct.BACKSPACE,altKey:!0,action:Mt(Dl,a)},{keyCode:Ct.DELETE,altKey:!0,action:Mt(Dl,a)},...l?[{keyCode:wR?224:91,action:Mt(Dl,a)}]:[]]:[{keyCode:Ct.BACKSPACE,ctrlKey:!0,action:Mt(Dl,a)},{keyCode:Ct.DELETE,ctrlKey:!0,action:Mt(Dl,a)}]],i)),o=!1})})(t,e),(n=>{let r=E.none();n.on("keydown",o=>{var s;o.keyCode===Ct.ENTER&&(PR&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(lt(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(r=E.some((s=n).selection.getBookmark()),s.undoManager.add()):rw(n,o))}),n.on("keyup",o=>{o.keyCode===Ct.ENTER&&r.each(()=>{return a=o,(s=n).undoManager.undo(),r.fold(At,i=>s.selection.moveToBookmark(i)),rw(s,a),void(r=E.none());var s,a})})})(t),(n=>{n.on("keydown",r=>{var o,s;r.isDefaultPrevented()||(s=r,QC([{keyCode:Ct.SPACEBAR,action:Mt(MR,o=n)},{keyCode:Ct.SPACEBAR,action:Mt(IR,o)}],s).each(a=>{s.preventDefault(),Bd(o,"insertText",{data:" "}).isDefaultPrevented()||(a(),Fl(o,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",r=>{r.isComposing||(o=>{const s=O(o.getBody());o.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!lt(n))return E.none();if((r=>{const o=r.container();return lt(o)&&Fe(o.data,on)})(e)){const r=av(t,n,!1)||(o=>{const s=o.data,a=(i=>{const l=i.split("");return ne(l,(c,u)=>Ic(c)&&u>0&&u<l.length-1&&lf(l[u-1])&&lf(l[u+1])?" ":c).join("")})(s);return a!==s&&(o.data=a,!0)})(n)||iv(t,n,!1);return ds(r,e)}if(Kf(t,e)){const r=av(t,n,!0)||iv(t,n,!0);return ds(r,e)}return E.none()})(s,G.fromRangeStart(o.selection.getRng())).each(a=>{o.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",r=>{var s;r.isDefaultPrevented()||(s=r,Bl([...FR(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=ue.os.isMacOS()||ue.os.isiOS();Bl([{keyCode:Ct.END,action:Mt(VC,s,!0)},{keyCode:Ct.HOME,action:Mt(VC,s,!1)},...l?[]:[{keyCode:Ct.HOME,action:Mt(Ed,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Ct.END,action:Mt(Ed,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Ct.END,action:Mt(tx,s,!0)},{keyCode:Ct.HOME,action:Mt(tx,s,!1)},{keyCode:Ct.END,action:Mt(kd,s,!0,a)},{keyCode:Ct.HOME,action:Mt(kd,s,!1,a)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{if(LR.os.isMacOS())return;const o=sn(!1);n.on("keydown",s=>{sw(s)&&aw(o,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,Bl([{keyCode:Ct.PAGE_UP,action:Mt(kd,a=n,!1,i=r)},{keyCode:Ct.PAGE_DOWN,action:Mt(kd,a,!0,i)}],l)),sw(s)&&o.get()&&(aw(o,n,!1),n.nodeChanged())})})(t,e),e}var n};class zR{constructor(e){let n;this.lastPath=[],this.editor=e;const r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",o=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==o.type&&Nf(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const o=e.selection.getStart(!0);o&&jc(e)&&!r.isSameElementPath(o)&&e.dom.isChildOf(o,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",o=>{!o.isDefaultPrevented()&&jc(e)&&("IMG"===e.selection.getNode().nodeName?Er.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!OE(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const s=[];this.editor.dom.getParent(r,a=>a===o||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:s})}}isSameElementPath(e){let n;const r=this.editor,o=Kr(r.dom.getParents(e,Be,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const uw=Ji("image"),Ip=Ji("event"),jd=t=>e=>{e[Ip]=t},fw=jd(0),HR=jd(2),UR=jd(1),Fp=Ji("mode"),zd=t=>e=>{e[Fp]=t},mw=(t,e)=>zd(e)(t),pw=zd(0),jp=zd(2),$R=zd(1),gw=t=>e=>E.from(e[Fp]).exists(r=>r===t),mi=gw(0),hw=gw(1),WR=["none","copy","link","move"],VR=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],zp=()=>{const t=new window.DataTransfer;let e="move",n="all";const r={get dropEffect(){return e},set dropEffect(o){Ot(WR,o)&&(e=o)},get effectAllowed(){return n},set effectAllowed(o){(t=>E.from(t[Ip]).exists(n=>0===n))(r)&&Ot(VR,o)&&(n=o)},get items(){return o=r,s=t.items,{...s,get length(){return s.length},add:(a,i)=>{if(mi(o)){if(!Dt(a))return s.add(a);if(!De(i))return s.add(a,i)}return null},remove:a=>{mi(o)&&s.remove(a)},clear:()=>{mi(o)&&s.clear()}};var o,s},get files(){return hw(r)?Object.freeze({length:0,item:o=>null}):t.files},get types(){return t.types},setDragImage:(o,s,a)=>{mi(r)&&(r[uw]={image:o,x:s,y:a},t.setDragImage(o,s,a))},getData:o=>hw(r)?"":t.getData(o),setData:(o,s)=>{mi(r)&&t.setData(o,s)},clearData:o=>{mi(r)&&t.clearData(o)}};return pw(r),r},bw=(t,e)=>t.setData("text/html",e),vw="x-tinymce/html",Hd=ht(vw),Hp="\x3c!-- "+vw+" --\x3e",KR=t=>Hp+t,yw=t=>-1!==t.indexOf(Hp),Cw="%MCEPASTEBIN%",Up=t=>t.dom.get("mcepastebin"),XR=t=>gt(t)&&"mcepastebin"===t.id,xw=t=>t===Cw,ww=(t,e)=>(dt.each(e,n=>{t=gr(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),Sw=t=>ww(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,r)=>n||r?on:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),kw=(t,e)=>({content:t,cancelled:e}),qp=(t,e)=>(t.insertContent(e,{merge:YE(t),paste:!0}),!0),$p=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),GR=(t,e,n)=>{return!(t.selection.isCollapsed()||!$p(e)||(r=t,o=e,s=n,r.undoManager.extra(()=>{s(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,s},YR=(t,e,n)=>{return r=t,!(!$p(o=e)||!Se(Kh(r),s=>Is(o.toLowerCase(),`.${s.toLowerCase()}`)))&&((r,o,s)=>(r.undoManager.extra(()=>{s(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(t,e,n);var r,o},QR=(t=>{let e=0;return()=>"mceclip"+e++})(),JR=t=>{const e=zp();return bw(e,t),jp(e),e},Ew=(t,e,n,r,o)=>{const s=((c,u,f)=>{const p=c.dispatch("PastePreProcess",{content:u,internal:f}),b=((g,v)=>{const h=si({sanitize:Ju(g)},g.schema);h.addNodeFilter("meta",S=>{dt.each(S,k=>{k.remove()})});const C=h.parse(v,{forced_root_block:!1,isRootContent:!0});return Es({validate:!0},g.schema).serialize(C)})(c,p.content);return c.hasEventListeners("PastePostProcess")&&!p.isDefaultPrevented()?((g,v,h)=>{const C=g.dom.create("div",{style:"display:none"},v),S=g.dispatch("PastePostProcess",{node:C,internal:h});return kw(S.node.innerHTML,S.isDefaultPrevented())})(c,b,f):kw(b,p.isDefaultPrevented())})(t,e,n);if(!s.cancelled){const a=s.content,i=()=>{return l=t,c=a,void(r||!QE(l)?qp(l,c):(f=l,p=c,dt.each([GR,YR,qp],b=>!b(f,p,qp))));var l,c,f,p};o?Bd(t,"insertFromPaste",{dataTransfer:JR(a)}).isDefaultPrevented()||(i(),Fl(t,"insertFromPaste")):i()}},Ud=(t,e,n,r)=>{const o=n||yw(e);Ew(t,e.replace(Hp,""),o,!1,r)},Wp=(t,e,n)=>{const r=t.dom.encode(e).replace(/\r\n/g,"\n"),o=((s,a,i)=>{const l=s.split(/\n\n/),c=((p,b)=>{let g="<"+p;const v=ss(b,(h,C)=>C+'="'+vs.encodeAllRaw(h)+'"');return v.length&&(g+=" "+v.join(" ")),g+">"})(a,i),u="</"+a+">",f=ne(l,p=>p.split(/\n/).join("<br />"));return 1===f.length?f[0]:ne(f,p=>c+p+u).join("")})(Ng(r,ZE(t)),On(t),rl(t));Ew(t,o,!1,!0,n)},Nw=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const r=t.types[n];try{e[r]=t.getData(r)}catch{e[r]=""}}return e},Os=(t,e)=>e in t&&t[e].length>0,_w=t=>Os(t,"text/html")||Os(t,"text/plain"),Aw=(t,e,n)=>{const r="paste"===e.type?e.clipboardData:e.dataTransfer;var o;if(Oc(t)&&r){const s=((a,i)=>{const l=i.items?Ve(un(i.items),u=>"file"===u.kind?[u.getAsFile()]:[]):[],c=i.files?un(i.files):[];return Ht(l.length>0?l:c,(u=>{const f=Kh(u);return p=>rn(p.type,"image/")&&Se(f,b=>(g=>{const v=g.toLowerCase(),h={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return dt.hasOwn(h,v)?"image/"+h[v]:"image/"+v})(b)===p.type)})(a))})(t,r);if(s.length>0)return e.preventDefault(),(o=s,Promise.all(ne(o,a=>Ny(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),tt(a,i=>{var l,c;l=t,Nm((c=i).uri).each(({data:u,type:f,base64Encoded:p})=>{const b=p?u:btoa(u),g=c.file,v=l.editorUpload.blobCache,C=v.getByData(b,f)??((S,k,A,_)=>{const D=QR(),I=Mh(S)&&gt(A.name),j=I?((P,L)=>{const $=L.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return gt($)?P.dom.encode($[1]):void 0})(S,A.name):D,K=k.create(D,A,_,j,I?A.name:void 0);return k.add(K),K})(l,v,g,b);Ud(l,`<img src="${C.blobUri()}">`,!1,!0)})})}),!0}return!1},Vp=(t,e,n,r,o)=>{let s=Sw(n);const a=Os(e,Hd())||yw(n),i=!a&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=$p(s);(xw(s)||!s.length||i&&!l)&&(r=!0),(r||l)&&(s=Os(e,"text/plain")&&i?e["text/plain"]:(c=>{const u=ys(),f=si({},u);let p="";const b=u.getVoidElements(),g=dt.makeMap("script noscript style textarea video audio iframe object"," "),v=u.getBlockElements(),h=C=>{const S=C.name,k=C;if("br"!==S){if("wbr"!==S)if(b[S]&&(p+=" "),g[S])p+=" ";else{if(3===C.type&&(p+=C.value),!(C.name in u.getVoidElements())){let A=C.firstChild;if(A)do{h(A)}while(A=A.next)}v[S]&&k.next&&(p+="\n","p"===S&&(p+="\n"))}}else p+="\n"};return c=ww(c,[/<!\[[^\]]+\]>/g]),h(f.parse(c)),p})(s)),xw(s)||(r?Wp(t,s,o):Ud(t,s,a,o))},Tw=(t,e,n,r)=>{((o,s,a)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",s),o.setData("text/plain",a),o.setData(Hd(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),r()):n(e.html,r)},Rw=t=>(e,n)=>{const{dom:r,selection:o}=t,s=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},e);r.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),r.add(t.getBody(),s);const i=o.getRng();a.focus();const l=r.createRng();l.selectNodeContents(a),o.setRng(l),Er.setEditorTimeout(t,()=>{o.setRng(i),r.remove(s),n()},0)},Ow=t=>({html:KR(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),Dw=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},Bw=(t,e)=>{var n,r;return da.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(r=e.clientY)&&void 0!==r?r:0,t.getDoc())},Pw=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},tO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Lw=t=>dt.trim(t).replace(tO,Fc).toLowerCase(),eO=(t,e,n)=>{const r=XE(t);if(n||"all"===r||!GE(t))return e;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,u)=>{const f=s.parseStyle(s.decode(c)),p={};for(let g=0;g<o.length;g++){const v=f[o[g]];let h=v,C=s.getStyle(a,o[g],!0);/color/.test(o[g])&&(h=Lw(h),C=Lw(C)),C!==h&&(p[o[g]]=v)}const b=s.serializeStyle(p,"span");return b?l+' style="'+b+'"'+u:l+u})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},rO=Le,Mw=lt,oO=t=>Ae(t.dom),Iw=t=>e=>ce(O(t),e),Fw=(t,e)=>vo(O(t),oO,Iw(e)),jw=(t,e,n)=>{const r=new tn(t,e),o=n?r.next.bind(r):r.prev.bind(r);let s=t;for(let a=n?t:o();a&&!rO(a);a=o())Ur(a)&&(s=a);return s};var pi;!function(t){t.Before="before",t.After="after"}(pi||(pi={}));const aO=(t,e)=>Math.abs(t.left-e),iO=(t,e)=>Math.abs(t.right-e),cO=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),Kp=(t,e,n)=>{const r=c=>Ur(c.node)?E.some(c):wt(c.node)?Kp(un(c.node.childNodes),e,n):E.none(),o=(c,u)=>{const f=Mo(c,(p,b)=>u(p,e,n)-u(b,e,n));return((p,b)=>{if(p.length>=2){const g=r(p[0]).getOr(p[0]),v=r(p[1]).getOr(p[1]);if(Math.abs(b(g,e,n)-b(v,e,n))<2){if(lt(g.node))return E.some(g);if(lt(v.node))return E.some(v)}}return E.none()})(f,u).orThunk(()=>qn(f,r))},[s,a]=((t,e)=>{return(n=Ht(t,n=>{return(r=e)>=(o=n).top&&r<=o.bottom;var r,o}),pn(n,(r,o)=>r.fold(()=>E.some(o),s=>{const a=Math.min(o.left,s.left),i=Math.min(o.top,s.top),l=Math.max(o.right,s.right),c=Math.max(o.bottom,s.bottom);return E.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}),E.none())).fold(()=>[[],t],n=>{const{pass:r,fail:o}=Vr(t,s=>((a,i)=>{const l=(c=a,u=i,Math.max(0,Math.min(c.bottom,u.bottom)-Math.max(c.top,u.top))/Math.min(a.height,i.height));var c,u;return((c,u)=>c.top<u.bottom&&c.bottom>u.top)(a,i)&&l>.5})(s,n));return[r,o]});var n})(uC(t),n),{pass:i,fail:l}=Vr(a,c=>c.top<n);return o(s,cO).orThunk(()=>o(l,sh)).orThunk(()=>o(i,sh))},zw=(t,e,n)=>((r,o,s)=>{const a=O(r),l=((t,e,n)=>E.from(t.dom.elementFromPoint(e,n)).map(at))(me(a),o,s).filter(c=>fe(a,c)).getOr(a);return((c,u,f,p)=>{const b=(g,v)=>{const h=Ht(g.dom.childNodes,Po(C=>wt(C)&&C.classList.contains("mce-drag-container")));return v.fold(()=>Kp(h,f,p),C=>{const S=Ht(h,k=>k!==C.dom);return Kp(S,f,p)}).orThunk(()=>(ce(g,c)?E.none():us(g)).bind(C=>b(C,E.some(g))))};return b(u,E.none())})(a,l,o,s)})(t,e,n).filter(r=>al(r.node)).map(r=>{return{node:(o=r).node,position:aO(o,s=e)<iO(o,s)?pi.Before:pi.After};var o,s}),Hw=t=>{var e,n;const r=t.getBoundingClientRect(),o=t.ownerDocument,s=o.documentElement,a=o.defaultView;return{top:r.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:r.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},Uw=t=>({target:t,srcElement:t}),qw=Ae,uO=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(qw,eo),fO=(t,e,n,r)=>{const o=t.dom,s=e.cloneNode(!0);o.setStyles(s,{width:n,height:r}),o.setAttrib(s,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},qd=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},$w=qd("left",-32),Ww=qd("left",32),Vw=qd("top",-32),Kw=qd("top",32),Xw=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Ul=(t,e,n,r,o)=>{"dragstart"===e&&bw(r,t.dom.getOuterHTML(n));const s=((t,e,n,r)=>{const o=((s,a)=>{const i=(l=>{const c=zp(),u=E.from(l[Fp]);return jp(l),fw(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(f=l,E.from(f[uw])).each(f=>c.setDragImage(f.image,f.x,f.y)),tt(l.types,f=>{"Files"!==f&&c.setData(f,l.getData(f))}),tt(l.files,f=>c.items.add(f)),(f=>E.from(f[Ip]))(l).each(f=>{var p;p=c,jd(f)(p)}),u.each(f=>{mw(l,f),mw(c,f)}),c;var f})(s);return"dragstart"===a?(fw(i),pw(i)):"drop"===a?(HR(i),jp(i)):(UR(i),$R(i)),i})(n,t);return De(r)?((s,a,i)=>{const l=sr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:At,stopImmediatePropagation:At,stopPropagation:At,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...Uw(a)}})(t,e,o):(s=t,a=r,i=e,l=o,{...a,dataTransfer:l,type:s,...Uw(i)});var s,a,i,l})(e,n,r,o);return t.dispatch(e,s)},Gw=(t,e,n)=>{t.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>Ul(e,"dragend",r.element,r.dataTransfer),o=>Ul(e,"dragend",r.element,r.dataTransfer,o))}),Yw(t)},Yw=t=>{t.on(e=>{e.intervalId.clear(),Xw(e.ghost)}),t.clear()},ql=Ae,Qw=(t,e)=>pa(t.getBody(),e),gO=t=>{const e=t.selection,n=t.dom,r=t.getBody(),o=((t,e,n,r)=>{const o=Cs();let s,a;const i=On(t),l=t.dom,c=()=>{(u=>{var f,p;const b=Cn(O(u),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<b.length;g++){const v=b[g].dom;let h=v.previousSibling;if(vc(h)){const C=h.data;1===C.length?null===(f=h.parentNode)||void 0===f||f.removeChild(h):h.deleteData(C.length-1,1)}h=v.nextSibling,bc(h)&&(1===h.data.length?null===(p=h.parentNode)||void 0===p||p.removeChild(h):h.deleteData(0,1))}})(e),a&&(oa(a),a=null),o.on(u=>{l.remove(u.caret),o.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(u,f)=>{let p;if(c(),gN(f))return null;if(!n(f))return a=((b,g)=>{var v;const h=(null!==(v=b.ownerDocument)&&void 0!==v?v:document).createTextNode(fn),C=b.parentNode;if(g){const S=b.previousSibling;if(Ua(S)){if(xr(S))return S;if(vc(S))return S.splitText(S.data.length-1)}C?.insertBefore(h,b)}else{const S=b.nextSibling;if(Ua(S)){if(xr(S))return S;if(bc(S))return S.splitText(1),S}b.nextSibling?C?.insertBefore(h,b.nextSibling):C?.appendChild(h)}return h})(f,u),p=f.ownerDocument.createRange(),sl(a.nextSibling)?(p.setStart(a,0),p.setEnd(a,0)):(p.setStart(a,1),p.setEnd(a,1)),p;{const b=((h,C,S)=>{var k;const A=(null!==(k=C.ownerDocument)&&void 0!==k?k:document).createElement(h);A.setAttribute("data-mce-caret",S?"before":"after"),A.setAttribute("data-mce-bogus","all"),A.appendChild(qi().dom);const _=C.parentNode;return S?_?.insertBefore(A,C):C.nextSibling?_?.insertBefore(A,C.nextSibling):_?.appendChild(A),A})(i,f,u),g=Zh(e,f,u);l.setStyle(b,"top",g.top),a=b;const v=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(v,{...g}),l.add(e,v),o.set({caret:v,element:f,before:u}),u&&l.addClass(v,"mce-visual-caret-before"),s=setInterval(()=>{o.on(h=>{r()?l.toggleClass(h.caret,"mce-visual-caret-hidden"):l.addClass(h.caret,"mce-visual-caret-hidden")})},500),p=f.ownerDocument.createRange(),p.setStart(b,0),p.setEnd(b,0)}return p},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(u=>{const f=Zh(e,u.element,u.before);l.setStyles(u.caret,{...f})})},destroy:()=>clearInterval(s)}})(t,r,n.isBlock,()=>ua(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=h=>h!==r&&(ql(h)||Co(h))&&n.isChildOf(h,r)&&n.isEditable(h.parentNode),c=(h,C,S,k=!0)=>t.dispatch("ShowCaret",{target:C,direction:h,before:S}).isDefaultPrevented()?null:(k&&e.scrollIntoView(C,-1===h),o.show(S,C)),u=h=>xr(h)||bc(h)||vc(h),f=h=>u(h.startContainer)||u(h.endContainer),b=(h,C)=>{if(!h)return null;if(h.collapsed){if(!f(h)){const _=C?1:-1,D=dl(_,r,h),I=D.getNode(!C);if(gt(I)){if(al(I))return c(_,I,!!C&&!D.isAtEnd(),!1);if(hs(I)&&Ae(I.nextSibling)){const U=n.createRng();return U.setStart(I,0),U.setEnd(I,0),U}}const j=D.getNode(C);if(gt(j)){if(al(j))return c(_,j,!C&&!D.isAtEnd(),!1);if(hs(j)&&Ae(j.previousSibling)){const U=n.createRng();return U.setStart(j,1),U.setEnd(j,1),U}}}return null}let S=h.startContainer,k=h.startOffset;const A=h.endOffset;if(lt(S)&&0===k&&ql(S.parentNode)&&(S=S.parentNode,k=n.nodeIndex(S),S=S.parentNode),!wt(S))return null;if(A===k+1&&S===h.endContainer){const _=S.childNodes[k];if(l(_))return(D=>{const I=D.cloneNode(!0),j=t.dispatch("ObjectSelected",{target:D,targetClone:I});if(j.isDefaultPrevented())return null;const U=((P,L)=>{const $=O(t.getBody()),Q=t.getDoc(),vt=yo($,"#"+s).getOrThunk(()=>{const Et=J('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Q);return Xe(Et,"id",s),Nt($,Et),Et}),it=n.createRng();ie(vt),se(vt,[qt(on,Q),O(L),qt(on,Q)]),it.setStart(vt.dom.firstChild,1),it.setEnd(vt.dom.lastChild,0),Vs(vt,{top:n.getPos(P,t.getBody()).y+"px"}),gb(vt);const Rt=e.getSel();return Rt&&(Rt.removeAllRanges(),Rt.addRange(it)),it})(D,j.targetClone),K=O(D);return tt(Cn(O(t.getBody()),`*[${a}]`),P=>{ce(K,P)||d(P,a)}),n.getAttrib(D,a)||D.setAttribute(a,"1"),i=D,v(),U})(_)}return null},g=()=>{i&&i.removeAttribute(a),yo(O(t.getBody()),"#"+s).each($t),i=null},v=()=>{o.hide()};return Ao(t)||(t.on("click",h=>{n.isEditable(h.target)||(h.preventDefault(),t.focus())}),t.on("blur NewBlock",g),t.on("ResizeWindow FullscreenStateChanged",o.reposition),t.on("tap",h=>{const C=h.target,S=Qw(t,C);ql(S)?(h.preventDefault(),Al(t,S).each(b)):l(C)&&Al(t,C).each(b)},!0),t.on("mousedown",h=>{const C=h.target;if(C!==r&&"HTML"!==C.nodeName&&!n.isChildOf(C,r)||!((k,A,_)=>{const D=O(k.getBody()),I=k.inline?D:O(me(D).dom.documentElement),j=((U,K,P,L)=>{const $=K.dom.getBoundingClientRect();return{x:P-(U?$.left+K.dom.clientLeft+$A(K):0),y:L-(U?$.top+K.dom.clientTop+qA(K):0)}})(k.inline,I,A,_);return((U,K,P)=>{const L=HA(U),$=UA(U);return K>=0&&P>=0&&K<=L&&P<=$})(I,j.x,j.y)})(t,h.clientX,h.clientY))return;g(),v();const S=Qw(t,C);ql(S)?(h.preventDefault(),Al(t,S).each(b)):zw(r,h.clientX,h.clientY).each(k=>{var A;h.preventDefault(),(A=c(1,k.node,k.position===pi.Before,!1))&&e.setRng(A),wt(S)?S.focus():t.getBody().focus()})}),t.on("keypress",h=>{Ct.modifierPressed(h)||ql(e.getNode())&&h.preventDefault()}),t.on("GetSelectionRange",h=>{let C=h.range;if(i){if(!i.parentNode)return void(i=null);C=C.cloneRange(),C.selectNode(i),h.range=C}}),t.on("SetSelectionRange",h=>{h.range=(h=>{const C=t.schema.getVoidElements(),S=n.createRng(),k=h.startContainer,A=h.startOffset,_=h.endContainer,D=h.endOffset;return Zt(C,k.nodeName.toLowerCase())?0===A?S.setStartBefore(k):S.setStartAfter(k):S.setStart(k,A),Zt(C,_.nodeName.toLowerCase())?0===D?S.setEndBefore(_):S.setEndAfter(_):S.setEnd(_,D),S})(h.range);const C=b(h.range,h.forward);C&&(h.range=C)}),t.on("AfterSetSelectionRange",h=>{const C=h.range,S=C.startContainer.parentElement;var k,A;f(C)||wt(k=S)&&"mcepastebin"===k.id||v(),gt(A=S)&&n.hasClass(A,"mce-offscreen-selection")||g()}),(t=>{const e=Cs(),n=we.DOM,r=document,o=(l=e,c=t,u=>{if(0===u.button){const f=He(c.dom.getParents(u.target),uO).getOr(null);if(gt(f)&&(p=c.dom,b=c.getBody(),qw(g=f)&&g!==b&&p.isEditable(g.parentElement))){const p=c.dom.getPos(f),b=c.getBody(),g=c.getDoc().documentElement;l.set({element:f,dataTransfer:zp(),dragging:!1,screenX:u.screenX,screenY:u.screenY,maxX:(c.inline?b.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?b.scrollHeight:g.offsetHeight)-2,relX:u.pageX-p.x,relY:u.pageY-p.y,width:f.offsetWidth,height:f.offsetHeight,ghost:fO(c,f,f.offsetWidth,f.offsetHeight),intervalId:Ik(100)})}}var p,b,g}),s=((t,e)=>{const n=Ec((o,s)=>{return i=o,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void zw(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),c=>{const u=a._selectionOverrides.showCaret(1,c.node,c.position===pi.Before,!1);u?a.selection.setRng(u):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const r=t;return o=>t.on(s=>{const a=Math.max(Math.abs(o.screenX-s.screenX),Math.abs(o.screenY-s.screenY));if(!s.dragging&&a>10){const c=Ul(e,"dragstart",s.element,s.dataTransfer,o);if(gt(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const c=o.currentTarget===e.getDoc().documentElement,u=((f,p)=>({pageX:p.pageX-f.relX,pageY:p.pageY+5}))(s,(p=o,b=(h=f=e).inline?Hw(h.getBody()):{left:0,top:0},g=(h=>{const C=h.getBody();return h.inline?{left:C.scrollLeft,top:C.scrollTop}:{left:0,top:0}})(f),v=((h,C)=>{if(C.target.ownerDocument!==h.getDoc()){const S=Hw(h.getContentAreaContainer()),k=(A=>{const _=A.getBody(),D=A.getDoc().documentElement;return A.inline?{left:_.scrollLeft,top:_.scrollTop}:{left:_.scrollLeft||D.scrollLeft,top:_.scrollTop||D.scrollTop}})(h);return{left:C.pageX-S.left+k.left,top:C.pageY-S.top+k.top}}return{left:C.pageX,top:C.pageY}})(f,p),{pageX:v.left-b.left+g.left,pageY:v.top-b.top+g.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((f,p,b,g,v,h,C,S,k,A,_,D)=>{let I=0,j=0;f.style.left=p.pageX+"px",f.style.top=p.pageY+"px",p.pageX+b>v&&(I=p.pageX+b-v),p.pageY+g>h&&(j=p.pageY+g-h),f.style.width=b-I+"px",f.style.height=g-j+"px";const U=k.clientHeight,K=k.clientWidth,P=C+k.getBoundingClientRect().top,L=S+k.getBoundingClientRect().left;_.on($=>{$.intervalId.clear(),$.dragging&&D&&(C+8>=U?$.intervalId.set(Kw(A)):C-8<=0?$.intervalId.set(Vw(A)):S+8>=K?$.intervalId.set(Ww(A)):S-8<=0?$.intervalId.set($w(A)):P+16>=window.innerHeight?$.intervalId.set(Kw(window)):P-16<=0?$.intervalId.set(Vw(window)):L+16>=window.innerWidth?$.intervalId.set(Ww(window)):L-16<=0&&$.intervalId.set($w(window)))})})(s.ghost,u,s.width,s.height,s.maxX,s.maxY,o.clientY,o.clientX,e.getContentAreaContainer(),e.getWin(),r,c),n.throttle(o.clientX,o.clientY)}var f,p,h,b,g,v,i,l})})(e,t),a=((l,c)=>u=>{l.on(f=>{var p,b,g,v;if(f.intervalId.clear(),f.dragging){if(b=c,g=(b=>{const g=b.getSel();if(gt(g)){const v=g.getRangeAt(0).startContainer;return lt(v)?v.parentNode:v}return null})(c.selection),v=f.element,!be(g)&&g!==v&&!b.dom.isChildOf(g,v)&&b.dom.isEditable(g)){const b=null!==(p=c.getDoc().elementFromPoint(u.clientX,u.clientY))&&void 0!==p?p:c.getBody();Ul(c,"drop",b,f.dataTransfer,u).isDefaultPrevented()||c.undoManager.transact(()=>{((g,v)=>{const h=g.getParent(v.parentNode,g.isBlock);Xw(v),h&&h!==g.getRoot()&&g.isEmpty(h)&&gs(O(h))})(c.dom,f.element),(g=>{const v=g.getData("text/html");return""===v?E.none():E.some(v)})(f.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}Ul(c,"dragend",c.getBody(),f.dataTransfer,u)}}),Yw(l)})(e,t),i=((l,c)=>u=>Gw(l,c,E.some(u)))(e,t);var l,c;t.on("mousedown",o),t.on("mousemove",s),t.on("mouseup",a),n.bind(r,"mousemove",s),n.bind(r,"mouseup",i),t.on("remove",()=>{n.unbind(r,"mousemove",s),n.unbind(r,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===Ct.ESC&&Gw(e,t,E.none())})})(h=t),PE(h)&&(C=>{const S=_=>{if(!_.isDefaultPrevented()){const D=_.dataTransfer;D&&(Ot(D.types,"Files")||D.files.length>0)&&(_.preventDefault(),"drop"===_.type&&hd(C,"Dropped file type is not supported"))}},k=_=>{Gc(C,_.target)&&S(_)},A=()=>{const _=we.DOM,D=C.dom,I=document,j=C.inline?C.getBody():C.getDoc(),U=["drop","dragover"];tt(U,K=>{_.bind(I,K,k),D.bind(j,K,S)}),C.on("remove",()=>{tt(U,K=>{_.unbind(I,K,k),D.unbind(j,K,S)})})};C.on("init",()=>{Er.setEditorTimeout(C,A,0)})})(h),(h=>{const C=Ec(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const S=h.selection.getRng();if(S.collapsed){const k=Ym(h,S,!1);h.selection.setRng(k)}}},0);h.on("focus",()=>{C.throttle()}),h.on("blur",()=>{C.cancel()})})(t),(h=>{h.on("init",()=>{h.on("focusin",C=>{const S=C.target;if(Co(S)){const k=pa(h.getBody(),S),A=Ae(k)?k:S;h.selection.getNode()!==A&&Al(h,A).each(_=>h.selection.setRng(_))}})})})(t)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&(yu(h),e.scrollIntoView(h))},hideFakeCaret:v,destroy:()=>{o.destroy(),i=null}};var h},hO=(t,e)=>{let n=e;for(let r=t.previousSibling;lt(r);r=r.previousSibling)n+=r.data.length;return n},Jw=(t,e,n,r,o)=>{if(lt(n)&&(r<0||r>n.data.length))return[];const s=o&&lt(n)?[hO(n,r)]:[r];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,o)),a=a.parentNode;return a===e?s.reverse():[]},Xp=(t,e,n,r,o,s,a=!1)=>({start:Jw(t,e,n,r,a),end:Jw(t,e,o,s,a)}),Zw=(t,e)=>{const n=e.slice(),r=n.pop();return x(r)?pn(n,(o,s)=>o.bind(a=>E.from(a.childNodes[s])),E.some(t)).bind(o=>lt(o)&&(r<0||r>o.data.length)?E.none():E.some({node:o,offset:r})):E.none()},tS=(t,e)=>Zw(t,e.start).bind(({node:n,offset:r})=>Zw(t,e.end).map(({node:o,offset:s})=>{const a=document.createRange();return a.setStart(n,r),a.setEnd(o,s),a})),gi=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const r=e.parentNode;t.remove(e,lt(e.firstChild)&&bs(e.firstChild.data)),gi(t,r,n)}},$d=(t,e,n,r=!0)=>{const o=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),r&&!n(e.startContainer)&&(lt(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),lt(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),gi(t,o,n),o!==s&&gi(t,s,n))},Gp=(t,e)=>E.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),eS=(t,e,n)=>{const r=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:Ah(r).concat(t.blockPatterns),inlinePatterns:Th(r).concat(t.inlinePatterns)}},nS=(t,e,n,r)=>{const o=t.createRng();return o.setStart(e,0),o.setEnd(n,r),o.toString()},rS=(t,e,n)=>{((r,o,s)=>{if(lt(r)&&0>=r.length)return E.some(lo(r,0));{const a=ea(Nd);return E.from(a.forwards(r,0,_d(r),s)).map(i=>lo(i.container,0))}})(e,0,e).each(r=>{const o=r.container;mx(o,n.start.length,e).each(i=>{const l=t.createRng();l.setStart(o,0),l.setEnd(i.container,i.offset),$d(t,l,c=>c===e)});const s=O(o),a=mc(s);var i,l;/^\s[^\s]/.test(a)&&(i=s,l=a.slice(1),gu.set(i,l))})},oS=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),Wd=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},sS=(t,e,n)=>{const r=tS(t.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,s=r.endContainer,a=0===r.endOffset?s:s.splitText(r.endOffset),i=0===r.startOffset?o:o.splitText(r.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(oS(t,e+"-end"),a),start:l.insertBefore(oS(t,e+"-start"),i)}},aS=(t,e,n)=>{gi(t,t.get(e.prefix+"-end"),n),gi(t,t.get(e.prefix+"-start"),n)},Yp=t=>0===t.start.length,iS=(t,e,n,r)=>{const o=e.start;var s;return yp(t,r.container,r.offset,(s=o,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),u=l.lastIndexOf(s);return-1!==u?u+s.length:-1!==c?c+1:-1}),n).bind(a=>{var i,l;const c=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(o))&&void 0!==l?l:-1;if(-1!==c&&a.offset>=c+o.length){const u=t.createRng();return u.setStart(a.container,a.offset-o.length),u.setEnd(a.container,a.offset),E.some(u)}return vp(a.container,a.offset-o.length,n).map(f=>{const p=t.createRng();return p.setStart(f.container,f.offset),p.setEnd(a.container,a.offset),p}).filter(f=>f.toString()===o).orThunk(()=>iS(t,e,n,lo(a.container,0)))})},bO=(t,e,n,r)=>{const o=t.dom,s=o.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return vp(i,l-n.pattern.end.length,e).bind(c=>{const u=Xp(o,s,c.container,c.offset,i,l,r);if(Yp(a))return E.some({matches:[{pattern:a,startRng:u,endRng:u}],position:c});{const f=Vd(t,n.remainingPatterns,c.container,c.offset,e,r),p=f.getOr({matches:[],position:c}),b=p.position;return((v,h,C,S,k,A=!1)=>{if(0===h.start.length&&!A){const _=v.createRng();return _.setStart(C,S),_.setEnd(C,S),E.some(_)}return bp(C,S,k).bind(_=>iS(v,h,k,_).bind(D=>{var I;return A&&(D.endContainer===_.container&&D.endOffset===_.offset||0===_.offset&&(null===(I=D.endContainer.textContent)||void 0===I?void 0:I.length)===D.endOffset)?E.none():E.some(D)}))})(o,a,b.container,b.offset,e,f.isNone()).map(v=>{const h=((C,S,k,A=!1)=>Xp(C,S,k.startContainer,k.startOffset,k.endContainer,k.endOffset,A))(o,s,v,r);return{matches:p.matches.concat([{pattern:a,startRng:h,endRng:u}]),position:lo(v.startContainer,v.startOffset)}})}})},Vd=(t,e,n,r,o,s)=>{const a=t.dom;return bp(n,r,a.getRoot()).bind(i=>{const l=nS(a,o,n,r);for(let c=0;c<e.length;c++){const u=e[c];if(!Is(l,u.end))continue;const f=e.slice();f.splice(c,1);const p=bO(t,o,{pattern:u,remainingPatterns:f,position:i},s);if(p.isNone()&&r>0)return Vd(t,e,n,r-1,o,s);if(p.isSome())return p}return E.none()})},lS=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?tt(e.format,r=>{t.formatter.apply(r)}):t.execCommand(e.cmd,!1,e.value)},cS=(t,e,n,r,o,s)=>{var a;return((i,l)=>{const c=ar(i,u=>Se(l,f=>u.pattern.start===f.pattern.start&&u.pattern.end===f.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(Vd(t,o.inlinePatterns,n,r,e,s).fold(()=>[],i=>i.matches),Vd(t,(a=o.inlinePatterns,Mo(a,(i,l)=>l.end.length-i.end.length)),n,r,e,s).fold(()=>[],i=>i.matches))},dS=(t,e)=>{if(0===e.length)return;const n=t.dom,r=t.selection.getBookmark(),o=((s,a)=>{const i=Ji("mce_textpattern"),l=Lo(a,(c,u)=>{const f=sS(s,i+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Lo(l,(c,u)=>{const f=l.length-c.length-1,p=Yp(u.pattern)?u.endMarker:sS(s,i+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:p}])},[])})(n,e);tt(o,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;Yp(s.pattern)?((l,c,u,f)=>{const p=Wd(l.dom,u);$d(l.dom,p,f),lS(l,c,p)})(t,s.pattern,s.endMarker,i):((l,c,u,f,p)=>{const b=l.dom,g=Wd(b,f),v=Wd(b,u);$d(b,v,p),$d(b,g,p);const C=Wd(b,{prefix:u.prefix,start:u.end,end:f.start});lS(l,c,C)})(t,s.pattern,s.startMarker,s.endMarker,i),aS(n,s.endMarker,i),aS(n,s.startMarker,i)}),t.selection.moveToBookmark(r)},uS=(t,e,n)=>{for(let r=0;r<t.length;r++)if(n(t[r],e))return!0;return!1},Qp=we.DOM,CO=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,Jp=t=>hr(t,e=>!1===De(e)),fS=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return Jp({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:CO(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},mS=t=>{const e=t.options.get;return Jp({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},pS=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,gS=t=>{const e=pS(t),n=zh(t),r=t.contentCSS,o=()=>{e.unloadAll(r),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?o():t.on("remove",o)};if(t.contentStyles.length>0){let l="";dt.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,c,u)=>{const f=[pS(l).loadAll(c)];return l.inline?f:f.concat([l.ui.styleSheetLoader.loadAll(u)])})(t,r,n)).then(s).catch(s),i=mE(t);return i&&((l,c)=>{const u=O(l.getBody()),f=Oe(Re(u)),p=ot("style");Xe(p,"type","text/css"),Nt(p,qt(c)),Nt(f,p),l.on("remove",()=>{$t(p)})})(t,i),a},Zp=t=>{var e;!0!==t.removed&&(Ao(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||jc(r)&&r.selection.getStart(!0)!==o||Dn(o).each(s=>{const a=s.getNode(),i=Ko(a)?Dn(a).getOr(s):s;r.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=jE(e);ge(n)&&n.call(e,e),(r=>{const o=HE(r);o&&Er.setEditorTimeout(r,()=>{let s;s=!0===o?r:r.editorManager.get(o),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},hS=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(Qp.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const r=t.getBody();var a,i;r.disabled=!0,t.readonly=qh(t),t._editableRoot=DE(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===Qp.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let v=[];const h=k=>{if(!k.blob||!k.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const A=k.id||"blobid"+VA+++(()=>{const j=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+j()+j()+j()})(),_=k.name||A,D=k.blob;var I;return{id:ht(A),name:ht(_),filename:ht(k.filename||_+"."+(I=D.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[I.toLowerCase()]||"dat")),blob:ht(D),base64:ht(k.base64),blobUri:ht(k.blobUri||URL.createObjectURL(D)),uri:ht(k.uri)}},C=k=>He(v,k).getOrUndefined(),S=k=>C(A=>A.id()===k);return{create:(k,A,_,D,I)=>{if(Dt(k))return h({id:k,name:D,filename:I,blob:A,base64:_});if(Kt(k))return h(k);throw new Error("Unknown input type")},add:k=>{S(k.id())||v.push(k)},get:S,getByUri:k=>C(A=>A.blobUri()===k),getByData:(k,A)=>C(_=>_.base64()===k&&_.blob().type===A),findFirst:C,removeByUri:k=>{v=Ht(v,A=>A.blobUri()!==k||(URL.revokeObjectURL(A.blobUri()),!1))},destroy:()=>{tt(v,k=>{URL.revokeObjectURL(k.blobUri())}),v=[]}}})();let n,r;const o=S1(),s=[],a=v=>h=>t.selection?v(h):[],i=(v,h,C)=>{let S=0;do{S=v.indexOf(h,S),-1!==S&&(v=v.substring(0,S)+C+v.substr(S+h.length),S+=C.length-h.length+1)}while(-1!==S);return v},l=(v,h,C)=>(v=i(v,`src="${h}"`,`src="${C}"${C===ue.transparentSrc?' data-mce-placeholder="1"':""}`),i(v,'data-mce-src="'+h+'"','data-mce-src="'+C+'"')),c=(v,h)=>{tt(t.undoManager.data,C=>{"fragmented"===C.type?C.fragments=ne(C.fragments,S=>l(S,v,h)):C.content=l(C.content,v,h)})},u=()=>(n||(n=E1(t,o)),b().then(a(v=>{const h=ne(v,C=>C.blobInfo);return n.upload(h,k1(t)).then(a(C=>{const S=[];let k=!1;const A=ne(C,(_,D)=>{const{blobInfo:I,image:j}=v[D];let U=!1;return _.status&&rE(t)?(_.url&&!Fe(j.src,_.url)&&(k=!0),e.removeByUri(j.src),Ao(t)||((K,P)=>{const L=t.convertURL(P,"src");var $;c(K.src,P),Ir(O(K),{src:Mh(t)?($=P,$+(-1===$.indexOf("?")?"?":"&")+(new Date).getTime()):P,"data-mce-src":L})})(j,_.url)):_.error&&(_.error.remove&&(c(j.src,ue.transparentSrc),S.push(j),U=!0),hd(t,ro.translate(["Failed to upload image: {0}",_.error.message]))),{element:j,status:_.status,uploadUri:_.url,blobInfo:I,removed:U}});return S.length>0&&!Ao(t)?t.undoManager.transact(()=>{tt(Ye(S),_=>{const D=Tn(_);var I;$t(_),D.each((I=t,j=>{var U,K;(U=I).dom.isEmpty((K=j).dom)&&gt(U.schema.getTextBlockElements()[xe(K)])&&Nt(j,J('<br data-mce-bogus="1" />'))})),e.removeByUri(_.dom.src)})}):k&&t.undoManager.dispatchChange(),A}))}))),f=()=>Lh(t)?u():Promise.resolve([]),p=v=>ar(s,h=>h(v)),b=()=>(r||(r=((t,e)=>{const n={};return{findAll:(r,o=Be)=>{const s=Ht((i=r)?un(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===ue.transparentSrc)&&(rn(l,"blob:")?!t.isUploaded(l)&&o(i):!!rn(l,"data:")&&o(i))}),a=ne(s,i=>{const l=i.src;if(Zt(n,l))return n[l].then(c=>Dt(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((u,f)=>{const p=()=>Promise.reject("Invalid data URI");if(rn(f,"blob:")){const v=u.getByUri(f);return gt(v)?Promise.resolve(v):(b=f,rn(b,"blob:")?(h=b,fetch(h).then(C=>C.ok?C.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${h} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):rn(b,"data:")?(g=b,new Promise((h,C)=>{Nm(g).bind(({type:S,data:k,base64Encoded:A})=>Ey(S,k,A)).fold(()=>C("Invalid data URI"),h)})):Promise.reject("Unknown URI format")).then(h=>Ny(h).then(C=>_y(C,!1,S=>E.some(Ay(u,h,S))).getOrThunk(p)))}var h,b,g;return rn(f,"data:")?Ty(u,f).fold(p,v=>Promise.resolve(v)):Promise.reject("Unknown image data format")})(e,l).then(u=>(delete n[l],{image:i,blobInfo:u})).catch(u=>(delete n[l],u));return n[l]=c,c}});var i;return Promise.all(a)}}})(o,e)),r.findAll(t.getBody(),p).then(a(v=>{const h=Ht(v,C=>Dt(C)?(hd(t,C),!1):"blob"!==C.uriType);return Ao(t)||tt(h,C=>{c(C.image.src,C.blobInfo.blobUri()),C.image.src=C.blobInfo.blobUri(),C.image.removeAttribute("data-mce-src")}),h}))),g=v=>v.replace(/src="(blob:[^"]+)"/g,(h,C)=>{const S=o.getResultUri(C);if(S)return'src="'+S+'"';let k=e.getByUri(C);return k||(k=pn(t.editorManager.get(),(A,_)=>A||_.editorUpload&&_.editorUpload.blobCache.getByUri(C),void 0)),k?'src="data:'+k.blob().type+";base64,"+k.base64()+'"':h});return t.on("SetContent",()=>{Lh(t)?f():b()}),t.on("RawSaveContent",v=>{v.content=g(v.content)}),t.on("GetContent",v=>{v.source_view||"raw"===v.format||"tree"===v.format||(v.content=g(v.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",v=>{tt(v,h=>{const C=h.attr("src");if(!C||e.getByUri(C))return;const S=o.getResultUri(C);S&&h.attr("src",S)})})}),{blobCache:e,addFilter:v=>{s.push(v)},uploadImages:u,uploadImagesAuto:f,scanForImages:b,destroy:()=>{e.destroy(),o.destroy(),r=n=null}}})(t),t.schema=ys(mS(t)),t.dom=we(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:cE(t),referrerPolicy:Gu(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=si(fS(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const u=a.dom,f="data-mce-"+c;let p=l.length;for(;p--;){const b=l[p];let g=b.attr(c);if(g&&!b.attr(f)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===c?(g=u.serializeStyle(u.parseStyle(g),b.name),g.length||(g=null),b.attr(f,g),b.attr(c,g)):"tabindex"===c?(b.attr(f,g),b.attr(c,null)):b.attr(f,a.convertURL(g,c,b.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const u=l[c],f=u.attr("type")||"no/type";0!==f.indexOf("mce-")&&u.attr("type","mce-"+f)}}),sN(a)&&i.addNodeFilter("#cdata",l=>{var c;let u=l.length;for(;u--;){const f=l[u];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode(null!==(c=f.value)&&void 0!==c?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const u=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(u)&&0===f.getAll("br").length&&f.append(new Qn("br",1))}}),i})(t),t.serializer=m1((a=>{const i=a.options.get;return{...fS(a),...mS(a),...Jp({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=f1(t.dom,t.getWin(),t.serializer,t),t.annotator=U0(t),t.formatter=A1(t),t.undoManager=R1(t),t._nodeChangeDispatcher=new zR(t),t._selectionOverrides=gO(t),(a=>{const i=Cs(),l=sn(!1),c=Fu(u=>{a.dispatch("longpress",{...u,type:"longpress"}),l.set(!0)},400);a.on("touchstart",u=>{IC(u).each(f=>{c.cancel();const p={x:f.clientX,y:f.clientY,target:u.target};c.throttle(u),l.set(!1),i.set(p)})},!0),a.on("touchmove",u=>{c.cancel(),IC(u).each(f=>{i.on(p=>{((b,g)=>{const v=Math.abs(b.clientX-g.x),h=Math.abs(b.clientY-g.y);return v>5||h>5})(f,p)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",u=>{c.cancel(),"touchcancel"!==u.type&&i.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{l.get()?u.preventDefault():a.dispatch("tap",{...u,type:"tap"})})},!0)})(t),(i=a=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{const c=cN(i);tt(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const c=dN(i);tt(l,u=>{"expanded"===c?u.attr("open","open"):"collapsed"===c&&u.attr("open",null)})})})(a),(a=>{const i="contenteditable",l=" "+dt.trim(rN(a))+" ",c=" "+dt.trim(Vh(a))+" ",u=zC(l),f=zC(c),p=oN(a);p.length>0&&a.on("BeforeSetContent",b=>{((g,v,h)=>{let C=v.length,S=h.content;if("raw"!==h.format){for(;C--;)S=S.replace(v[C],IT(g,S,Vh(g)));h.content=S}})(a,p,b)}),a.parser.addAttributeFilter("class",b=>{let g=b.length;for(;g--;){const v=b[g];u(v)?v.attr(i,"true"):f(v)&&v.attr(i,"false")}}),a.serializer.addAttributeFilter(i,b=>{let g=b.length;for(;g--;){const v=b[g];(u(v)||f(v))&&(p.length>0&&v.attr("data-mce-content")?(v.name="#text",v.type=3,v.raw=!0,v.value=v.attr("data-mce-content")):v.attr(i,null))}})})(t),Ao(t)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,r)=>{const o=G.fromRangeStart(n).getNode(),s=(u=r,vo(O(o),f=>eo(f.dom)||Cr(f),Iw(u)).getOr(O(u)).dom),a=jw(o,s,!1),i=jw(o,s,!0),l=document.createRange();var u;return Fw(a,s).fold(()=>{Mw(a)?l.setStart(a,0):l.setStartBefore(a)},c=>l.setStartBefore(c.dom)),Fw(i,s).fold(()=>{Mw(i)?l.setEnd(i,i.data.length):l.setEndAfter(i)},c=>l.setEndAfter(c.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(dm(e))})(a))})})(t),(a=>{(i=>{const l=[",",".",";",":","!","?"],c=[32],u=()=>{return b=eN(i),g=nN(i),{inlinePatterns:Th(b),blockPatterns:Ah(b),dynamicPatternsLookup:g};var b,g},f=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",b=>{if(13===b.keyCode&&!Ct.modifierPressed(b)&&i.selection.isCollapsed()){const g=u();(g.inlinePatterns.length>0||g.blockPatterns.length>0||f())&&((t,e)=>{const n=t.selection.getRng();return Gp(t,n).map(r=>{var o;const s=Math.max(0,n.startOffset),a=eS(e,r,null!==(o=r.textContent)&&void 0!==o?o:""),i=cS(t,r,n.startContainer,s,a,!0),l=((c,u,f,p)=>{var b;const g=c.dom,v=On(c);if(!g.is(u,v))return[];const h=null!==(b=u.textContent)&&void 0!==b?b:"";return((C,S)=>{const k=Mo(C,(D,I)=>I.start.length-D.start.length),A=S.replace(on," ");return He(k,_=>0===S.indexOf(_.start)||0===A.indexOf(_.start))})(f.blockPatterns,h).map(C=>dt.trim(h).length===C.start.length?[]:[{pattern:C,range:Xp(g,g.getRoot(),u,0,u,0,!0)}]).getOr([])})(t,r,a);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent(fn,{preserve_zwsp:!0}),dS(t,i),((f,p)=>{if(0===p.length)return;const b=f.selection.getBookmark();tt(p,g=>((v,h)=>{const S=h.pattern,k=tS(v.dom.getRoot(),h.range).getOrDie("Unable to resolve path range");return Gp(v,k).each(A=>{"block-format"===S.type?((_,D)=>{const I=D.get(_);return ct(I)&&Nn(I).exists(j=>Zt(j,"block"))})(S.format,v.formatter)&&v.undoManager.transact(()=>{rS(v.dom,A,S),v.formatter.apply(S.format)}):"block-command"===S.type&&v.undoManager.transact(()=>{rS(v.dom,A,S),v.execCommand(S.cmd,!1,S.value)})}),!0})(f,g)),f.selection.moveToBookmark(b)})(t,l);const c=t.selection.getRng(),u=bp(c.startContainer,c.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),u.each(f=>{const p=f.container;"\ufeff"===p.data.charAt(f.offset-1)&&(p.deleteData(f.offset-1,1),gi(t.dom,p.parentNode,b=>b===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,g)&&b.preventDefault()}},!0);const p=()=>{if(i.selection.isCollapsed()){const b=u();(b.inlinePatterns.length>0||f())&&((g,v)=>{const h=g.selection.getRng();Gp(g,h).map(C=>{const S=Math.max(0,h.startOffset-1),k=nS(g.dom,C,h.startContainer,S),A=eS(v,C,k),_=cS(g,C,h.startContainer,S,A,!1);_.length>0&&g.undoManager.transact(()=>{dS(g,_)})})})(i,b)}};i.on("keyup",b=>{uS(c,b,(g,v)=>g===v.keyCode&&!Ct.modifierPressed(v))&&p()}),i.on("keypress",b=>{uS(l,b,(g,v)=>g.charCodeAt(0)===v.charCode)&&Er.setEditorTimeout(i,p)})})(a)})(t));const o=jR(t);((t,e)=>{t.addCommand("delete",()=>{var n;MC(n=t,e,!1).fold(()=>{Yf(n),Qf(n)},Un)}),t.addCommand("forwardDelete",()=>{var n;MC(n=t,e,!0).fold(()=>gv(n,"ForwardDelete"),Un)})})(t,o),(a=>{a.on("NodeChange",kt(MT,a))})(t),(a=>{var i;const l=a.dom,c=On(a),u=null!==(i=bE(a))&&void 0!==i?i:"",f=(p,b)=>{if((h=>{if(D1(h)){const C=h.keyCode;return!B1(h)&&(Ct.metaKeyPressed(h)||h.altKey||C>=112&&C<=123||Ot(ZA,C))}return!1})(p))return;const g=a.getBody(),v=!(D1(h=p)&&!(B1(h)||"keyup"===h.type&&229===h.keyCode))&&((h,C,S)=>{if($e(O(C),!1)){const k=C.firstElementChild;return!k||!h.getStyle(C.firstElementChild,"padding-left")&&!h.getStyle(C.firstElementChild,"padding-right")&&S===k.nodeName.toLowerCase()}return!1})(l,g,c);var h;(""!==l.getAttrib(g,O1)!==v||b)&&(l.setAttrib(g,O1,v?u:null),l.setAttrib(g,"aria-placeholder",v?u:null),((h,C)=>{h.dispatch("PlaceholderToggle",{state:C})})(a,v),a.on(v?"keydown":"keyup",f),a.off(v?"keyup":"keydown",f))};$n(u)&&a.on("init",p=>{f(p,!0),a.on("change SetContent ExecCommand",f),a.on("paste",b=>Er.setEditorTimeout(a,()=>f(b)))})})(t),(t=>{const e=sn(!1),n=sn(JE(t)?"text":"html"),r=(o=>{const s=sn(null);return{create:()=>((a,i)=>{const{dom:l,selection:c}=a,u=a.getBody();i.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Cw);ue.browser.isFirefox()&&l.setStyle(f,"left","rtl"===l.getStyle(u,"direction",!0)?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",p=>{p.stopPropagation()}),f.focus(),c.select(f,!0)})(o,s),remove:()=>((a,i)=>{const l=a.dom;if(Up(a)){let c;const u=i.get();for(;c=Up(a);)l.remove(c),l.unbind(c);u&&a.selection.setRng(u)}i.set(null)})(o,s),getEl:()=>Up(o),getHtml:()=>(a=>{const i=a.dom,l=(p,b)=>{p.appendChild(b),i.remove(b,!0)},[c,...u]=Ht(a.getBody().childNodes,XR);tt(u,p=>{l(c,p)});const f=i.select("div[id=mcepastebin]",c);for(let p=f.length-1;p>=0;p--){const b=i.create("div");c.insertBefore(b,f[p]),l(b,f[p])}return c?c.innerHTML:""})(o),getLastRng:s.get}})(t);var o,s,a;o=t,(ue.browser.isChromium()||ue.browser.isSafari())&&(a=eO,(s=o).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((o,s)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),G0(a,!1)):(i.set("text"),G0(a,!0)),a.focus()})(o,s)}),o.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Ud(o,i.html,i.internal,!1),i.text&&Wp(o,i.text,!1)})})(t,n),(o=>{const s=l=>c=>{l(o,c)},a=WE(o);ge(a)&&o.on("PastePreProcess",s(a));const i=VE(o);ge(i)&&o.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(o=>{o.on("cut",(s=>a=>{!a.isDefaultPrevented()&&Dw(s)&&Tw(a,Ow(s),Rw(s),()=>{if(ue.browser.isChromium()||ue.browser.isFirefox()){const i=s.selection.getRng();Er.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(o)),o.on("copy",(s=>a=>{!a.isDefaultPrevented()&&Dw(s)&&Tw(a,Ow(s),Rw(s),At)})(o))})(t),((o,s)=>{$E(o)&&o.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Oc(o)||o.on("drop",a=>{const i=a.dataTransfer;i&&Se(i.files,c=>/^image\//.test(c.type))&&a.preventDefault()}),o.on("drop",a=>{if(a.isDefaultPrevented())return;const i=Bw(o,a);if(be(i))return;const l=Nw(a.dataTransfer),c=Os(l,Hd());if((!_w(l)||(g=>{const v=g["text/plain"];return!!v&&0===v.indexOf("file://")})(l))&&Aw(o,a,i))return;const u=l[Hd()],f=u||l["text/html"]||l["text/plain"],p=((g,v,h,C)=>{const S=g.getParent(h,k=>Ys(v,k));if(!Qt(g.getParent(h,"summary")))return!0;if(S&&Zt(C,"text/html")){const k=(new DOMParser).parseFromString(C["text/html"],"text/html").body;return!Qt(k.querySelector(S.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,i.startContainer,l),b=s.get();b&&!p||f&&(a.preventDefault(),Er.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{(u||b&&p)&&o.execCommand("Delete"),Pw(o,i);const g=Sw(f);l["text/html"]?Ud(o,g,c,!0):Wp(o,g,!0)})}))}),o.on("dragstart",a=>{s.set(!0)}),o.on("dragover dragend",a=>{Oc(o)&&!s.get()&&(a.preventDefault(),Pw(o,Bw(o,a))),"dragend"===a.type&&s.set(!1)}),(a=>{a.on("input",i=>{const l=c=>Qt(c.querySelector("summary"));if("deleteByDrag"===i.inputType){const c=Ht(a.dom.select("details"),l);tt(c,u=>{Le(u.firstChild)&&u.firstChild.remove();const f=a.dom.create("summary");f.appendChild(qi().dom),u.prepend(f)})}})})(o)})(t,e),((t,e,n)=>{((r,o,s)=>{let a;r.on("keydown",i=>{var l;(Ct.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),r.on("paste",i=>{if(i.isDefaultPrevented()||(u=i,ue.os.isAndroid()&&0===(null===(p=null===(f=u.clipboardData)||void 0===f?void 0:f.items)||void 0===p?void 0:p.length)))return;var u,f,p;const l="text"===s.get()||a;a=!1;const c=Nw(i.clipboardData);!_w(c)&&Aw(r,i,o.getLastRng()||r.selection.getRng())||(Os(c,"text/html")?(i.preventDefault(),Vp(r,c,c["text/html"],l,!0)):Os(c,"text/plain")&&Os(c,"text/uri-list")?(i.preventDefault(),Vp(r,c,c["text/plain"],l,!0)):(o.create(),Er.setEditorTimeout(r,()=>{const u=o.getHtml();o.remove(),Vp(r,c,u,l,!1)},0)))})})(t,e,n),(r=>{const o=a=>rn(a,"webkit-fake-url"),s=a=>rn(a,"data:");r.parser.addNodeFilter("img",(a,i,l)=>{if(!Oc(r)&&!0===(null===(u=l.data)||void 0===u?void 0:u.paste))for(const c of a){const u=c.attr("src");Dt(u)&&!c.attr("data-mce-object")&&u!==ue.transparentSrc&&(o(u)||!tN(r)&&s(u))&&c.remove()}var u})})(t)})(t,r,n)})})(t);const s=(a=>{const i=a;return(l=a,ke(l.plugins,"rtc").bind(c=>E.from(c.setup))).fold(()=>(i.rtcInstance=a1(a),E.none()),l=>(i.rtcInstance=(()=>{const c=ht(null),u=ht("");return{init:{bindEvents:At},undoManager:{beforeChange:At,add:c,undo:c,redo:c,clear:At,reset:At,hasUndo:ve,hasRedo:ve,transact:c,ignore:At,extra:At},formatter:{match:ve,matchAll:ht([]),matchNode:ht(void 0),canApply:ve,closest:u,apply:At,remove:At,toggle:At,formatChanged:ht({unbind:At})},editor:{getContent:u,setContent:ht({content:"",html:""}),insertContent:ht(""),addVisual:At},selection:{getContent:u},autocompleter:{addDecoration:At,removeDecoration:At},raw:{getModel:ht(E.none())}}})(),E.some(()=>l().then(c=>(i.rtcInstance=(u=>{const f=k=>Kt(k)?k:{},{init:p,undoManager:b,formatter:g,editor:v,selection:h,autocompleter:C,raw:S}=u;return{init:{bindEvents:p.bindEvents},undoManager:{beforeChange:b.beforeChange,add:b.add,undo:b.undo,redo:b.redo,clear:b.clear,reset:b.reset,hasUndo:b.hasUndo,hasRedo:b.hasRedo,transact:(k,A,_)=>b.transact(_),ignore:(k,A)=>b.ignore(A),extra:(k,A,_,D)=>b.extra(_,D)},formatter:{match:(k,A,_,D)=>g.match(k,f(A),D),matchAll:g.matchAll,matchNode:g.matchNode,canApply:k=>g.canApply(k),closest:k=>g.closest(k),apply:(k,A,_)=>g.apply(k,f(A)),remove:(k,A,_,D)=>g.remove(k,f(A)),toggle:(k,A,_)=>g.toggle(k,f(A)),formatChanged:(k,A,_,D,I)=>g.formatChanged(A,_,D,I)},editor:{getContent:k=>v.getContent(k),setContent:(k,A)=>({content:v.setContent(k,A),html:""}),insertContent:(k,A)=>(v.insertContent(k),""),addVisual:v.addVisual},selection:{getContent:(k,A)=>h.getContent(A)},autocompleter:{addDecoration:C.addDecoration,removeDecoration:C.removeDecoration},raw:{getModel:()=>E.some(S.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),UE(a)||(i.body.spellcheck=!1,Qp.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=dt.each,n=Ct.BACKSPACE,r=Ct.DELETE,o=t.dom,s=t.selection,a=t.parser,i=ue.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),u=ue.deviceType.isiPhone()||ue.deviceType.isiPad(),f=ue.os.isMacOS()||ue.os.isiOS(),p=(P,L)=>{try{t.getDoc().execCommand(P,!1,String(L))}catch{}},b=P=>P.isDefaultPrevented(),g=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},v=()=>{t.inline||o.bind(t.getDoc(),"mousedown mouseup",P=>{let L;if(P.target===t.getDoc().documentElement)if(L=s.getRng(),t.getBody().focus(),"mousedown"===P.type){if(xr(L.startContainer))return;s.placeCaretAt(P.clientX,P.clientY)}else s.setRng(L)})},h=()=>{Range.prototype.getClientRects||t.on("mousedown",P=>{if(!b(P)&&"HTML"===P.target.nodeName){const L=t.getBody();L.blur(),Er.setEditorTimeout(t,()=>{L.focus()})}})},C=()=>{const P=Wh(t);t.on("click",L=>{const $=L.target;/^(IMG|HR)$/.test($.nodeName)&&o.isEditable($.parentNode)&&(L.preventDefault(),t.selection.select($),t.nodeChanged()),"A"===$.nodeName&&o.hasClass($,P)&&0===$.childNodes.length&&o.isEditable($.parentNode)&&(L.preventDefault(),s.select($))})},S=()=>{t.on("keydown",P=>{if(!b(P)&&P.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const L=s.getNode().previousSibling;if(L&&L.nodeName&&"table"===L.nodeName.toLowerCase())return P.preventDefault(),!1}return!0})},k=()=>{qh(t)||t.on("BeforeExecCommand mousedown",()=>{p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),Hh(t)||p("enableObjectResizing",!1)})},A=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},_=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},D=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",P=>{let L;"HTML"===P.target.nodeName&&(L=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(L),t.selection.normalize(),t.nodeChanged())}))},I=()=>{f&&t.on("keydown",P=>{!Ct.metaKeyPressed(P)||P.shiftKey||37!==P.keyCode&&39!==P.keyCode||(P.preventDefault(),t.selection.getSel().modify("move",37===P.keyCode?"backward":"forward","lineboundary"))})},j=()=>{t.on("click",P=>{let L=P.target;do{if("A"===L.tagName)return void P.preventDefault()}while(L=L.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},U=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",P=>{P.preventDefault()})})},K=At;return Ao(t)?(c&&(v(),C(),U(),g(),u&&(_(),D(),j())),l&&(h(),k(),A(),I())):(t.on("keydown",P=>{if(b(P)||P.keyCode!==Ct.BACKSPACE)return;let L=s.getRng();const $=L.startContainer,Q=L.startOffset,vt=o.getRoot();let it=$;if(L.collapsed&&0===Q){for(;it.parentNode&&it.parentNode.firstChild===it&&it.parentNode!==vt;)it=it.parentNode;"BLOCKQUOTE"===it.nodeName&&(t.formatter.toggle("blockquote",void 0,it),L=o.createRng(),L.setStart($,0),L.setEnd($,0),s.setRng(L))}}),(()=>{const P=L=>{const $=o.create("body"),Q=L.cloneContents();return $.appendChild(Q),s.serializer.serialize($,{format:"html"})};t.on("keydown",L=>{const $=L.keyCode;if(!b(L)&&($===r||$===n)&&t.selection.isEditable()){const Q=t.selection.isCollapsed(),vt=t.getBody();if(Q&&(!o.isEmpty(vt)||(it=>{const Rt=O(it);return Se(Cn(Rt,'[contenteditable="true"]'),Et=>us(Et).exists(Ut=>!Zr(Ut)))})(vt))||!Q&&!(it=>{const Rt=P(it),Et=o.createRng();return Et.selectNode(t.getBody()),Rt===P(Et)})(t.selection.getRng()))return;L.preventDefault(),t.setContent(""),vt.firstChild&&o.isBlock(vt.firstChild)?t.selection.setCursorLocation(vt.firstChild,0):t.selection.setCursorLocation(vt,0),t.nodeChanged()}})})(),ue.windowsPhone||t.on("keyup focusin mouseup",P=>{Ct.modifierPressed(P)||(L=>{const $=L.getBody(),Q=L.selection.getRng();return Q.startContainer===Q.endContainer&&Q.startContainer===$&&0===Q.startOffset&&Q.endOffset===$.childNodes.length})(t)||s.normalize()},!0),c&&(v(),C(),t.on("init",()=>{p("DefaultParagraphSeparator",On(t))}),U(),S(),a.addNodeFilter("br",P=>{let L=P.length;for(;L--;)"Apple-interchange-newline"===P[L].attr("class")&&P[L].remove()}),u?(_(),D(),j()):g()),l&&(t.on("keydown",P=>{if(!b(P)&&P.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const L=s.getNode(),$=L.previousSibling;if("HR"===L.nodeName)return o.remove(L),void P.preventDefault();$&&$.nodeName&&"hr"===$.nodeName.toLowerCase()&&(o.remove($),P.preventDefault())}}}),h(),(()=>{const P=()=>{const $=o.getAttribs(s.getStart().cloneNode(!1));return()=>{const Q=s.getStart();Q!==t.getBody()&&(o.setAttrib(Q,"style",null),e($,vt=>{Q.setAttributeNode(vt.cloneNode(!0))}))}},L=()=>!s.isCollapsed()&&o.getParent(s.getStart(),o.isBlock)!==o.getParent(s.getEnd(),o.isBlock);t.on("keypress",$=>{let Q;return!(!(b($)||8!==$.keyCode&&46!==$.keyCode)&&L()&&(Q=P(),t.getDoc().execCommand("delete",!1),Q(),$.preventDefault(),1))}),o.bind(t.getDoc(),"cut",$=>{if(!b($)&&L()){const Q=P();Er.setEditorTimeout(t,()=>{Q()})}})})(),k(),t.on("SetContent ExecCommand",P=>{"setcontent"!==P.type&&"mceInsertLink"!==P.command||e(o.select("a:not([data-mce-block])"),L=>{var $;let Q=L.parentNode;const vt=o.getRoot();if(Q?.lastChild===L){for(;Q&&!o.isBlock(Q);){if((null===($=Q.parentNode)||void 0===$?void 0:$.lastChild)!==Q||Q===vt)return;Q=Q.parentNode}o.add(Q,"br",{"data-mce-bogus":1})}})}),A(),I(),S(),t.on("drop",P=>{var L;const $=null===(L=P.dataTransfer)||void 0===L?void 0:L.getData("text/html");Dt($)&&/^<img[^>]*>$/.test($)&&t.dispatch("dragend",new window.DragEvent("dragend",P))}))),{refreshContentEditable:K,isHidden:()=>{if(!l||t.removed)return!1;const P=t.selection.getSel();return!P||!P.rangeCount||0===P.rangeCount}}})(a),a.dispatch("PostRender");const c=pE(a);void 0!==c&&(l.dir=c);const u=qE(a);u&&a.on("BeforeSetContent",f=>{dt.each(u,p=>{f.content=f.content.replace(p,b=>"\x3c!--mce:protected "+escape(b)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing="compositionstart"===f.type})})(t),s.fold(()=>{const a=(i=>{let l=!1;const c=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(t);gS(t).then(()=>{Zp(t),a()})},a=>{t.setProgressState(!0),gS(t).then(()=>{a().then(i=>{t.setProgressState(!1),Zp(t),i1(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),Zp(t),i1(t)})})})},xO=Be,tg=we.DOM,bS=we.DOM,vS=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),yS=t=>{const e=t.getElement();return t.inline?vS(null):(n=>{const r=bS.create("div");return bS.insertAfter(r,n),vS(r,r)})(e)},wO=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const r=dt.trim(Ih(n)),o=n.ui.registry.getAll().icons,s={...gd.get("default").icons,...gd.get(r).icons};Ce(s,(a,i)=>{Zt(o,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const r=Ka(n);if(Dt(r)){const o=va.get(r);n.theme=o(n,va.urls[r])||{},ge(n.theme.init)&&n.theme.init(n,va.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const r=Yu(n),o=ai.get(r);n.model=o(n,ai.urls[r])})(t),(n=>{const r=[];tt(Rc(n),o=>{((s,a,i)=>{const l=ii.get(i),c=ii.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=dt.trim(i),l&&-1===dt.inArray(a,i)){if(s.plugins[i])return;try{const u=l(s,c)||{};s.plugins[i]=u,ge(u.init)&&(u.init(s,c),a.push(i))}catch(u){((f,p,b)=>{const g=ro.translate(["Failed to initialize plugin: {0}",p]);$0(f,"PluginLoadError",{message:g}),bd(g,b),hd(f,g)})(s,i,u)}}})(n,r,o.replace(/^\-/,""))})})(t);const e=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,Dt(Ka(n))?(o=>{const s=o.theme.renderUI;return s?s():yS(o)})(n):ge(Ka(n))?(o=>{const s=o.getElement(),a=Ka(o)(o,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||o.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||o.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):yS(n)})(t);var n,r;((n,r)=>{const o={show:E.from(r.show).getOr(At),hide:E.from(r.hide).getOr(At),isEnabled:E.from(r.isEnabled).getOr(Be),setEnabled:s=>{n.mode.isReadOnly()||E.from(r.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...o}})(t,E.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(w1(r=n,fE(r)),(r=>w1(r,zh(r)))(n)),t.inline?hS(t):((n,r)=>{((o,s)=>{const a=o.translate("Rich Text Area"),i=Yr(O(o.getElement()),"tabindex").bind(js),l=((c,u,f,p)=>{const b=ot("iframe");return p.each(g=>Xe(b,"tabindex",g)),Ir(b,f),Ir(b,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:u}),H(b,"tox-edit-area__iframe"),b})(o.id,a,Kk(o),i).dom;l.onload=()=>{l.onload=null,o.dispatch("load")},o.contentAreaContainer=s.iframeContainer,o.iframeElement=l,o.iframeHTML=(c=>{let u=Xk(c)+"<html><head>";Bh(c)!==c.documentBaseUrl&&(u+='<base href="'+c.documentBaseURI.getURI()+'" />'),u+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const f=Gk(c),p=Yk(c),b=c.translate(IE(c));return Ph(c)&&(u+='<meta http-equiv="Content-Security-Policy" content="'+Ph(c)+'" />'),u+=`</head><body id="${f}" class="mce-content-body ${p}" data-id="${c.id}" aria-label="${b}"><br></body></html>`,u})(o),tg.add(s.iframeContainer,l)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=tg.isHidden(r.editorContainer)),n.getElement().style.display="none",tg.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const s=o.iframeElement,a=()=>{o.contentDocument=s.contentDocument,hS(o)};if(iN(o)||ue.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close(),a()}else{const l=((t,e,n,r)=>((o,s,a,i,l)=>{const c=(u=a,f=i,p=>{u(p)&&f((b=>{const g=O(Wo(b).getOr(b.target)),v=()=>b.stopPropagation(),h=()=>b.preventDefault(),C=kn(h,v);return{target:g,x:b.clientX,y:b.clientY,stop:v,prevent:h,kill:C,raw:b}})(p))});var u,f;return o.dom.addEventListener(s,c,!1),{unbind:kt(tr,o,s,c,!1)}})(t,"load",n,()=>{l.unbind(),a()}))(O(s),0,xO);s.srcdoc=o.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},Ca=we.DOM,CS=t=>"-"===t.charAt(0),xS=(t,e,n)=>E.from(e).filter(r=>$n(r)&&!gd.has(r)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:E.some(r)})),wS=_n().deviceType,SS=wS.isPhone(),kO=wS.isTablet(),$l=t=>{if(be(t))return[];{const e=ct(t)?t:t.split(/[ ,]/),n=ne(e,Gr);return Ht(n,$n)}},eg=(t,e)=>Zt(t.sections(),e),NO=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ke(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),_O=(t,e)=>{var n;const r=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?dt.extend({},t.external_plugins,r):r},RO=(t,e)=>{const n=t.selection,r=t.dom;return/^ | $/.test(e)?((o,s,a)=>{const i=O(o.getRoot());return a=yl(i,G.fromRangeStart(s))?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Cl(i,G.fromRangeEnd(s))?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),e):e},Kd=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const s=dt.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:s}}return{content:o,details:{}}})(e);Im(t,{...r,content:RO(t,n),format:"html",set:!1,selection:!0}).each(o=>{const s=(i=o.content,l=r,$m(t).editor.insertContent(i,l));var i,l;Fm(t,s,o),t.addVisual()})}},OO={"font-size":"size","font-family":"face"},DO=qo("font"),kS=t=>(e,n)=>E.from(n).map(O).filter(An).bind(r=>{return(o=t,s=e,a=r.dom,pm(O(a),i=>{return Z(l=i,o).orThunk(()=>DO(l)?ke(OO,o).bind(c=>Yr(l,c)):E.none());var l},i=>ce(O(s),i))).or(((o,s)=>E.from(we.DOM.getStyle(s,o,!0)))(t,r.dom));var o,s,a}).getOr(""),BO=kS("font-size"),PO=kn(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),kS("font-family")),LO=t=>Dn(t.getBody()).bind(e=>{const n=e.container();return E.from(lt(n)?n.parentNode:n)}),ng=(t,e)=>{return n=t,r=Ps(E.some,e),(o=n,E.from(o.selection.getRng()).bind(s=>{const a=o.getBody();return s.startContainer===a&&0===s.startOffset?E.none():E.from(o.selection.getStart(!0))})).orThunk(kt(LO,n)).map(O).filter(An).bind(r);var n,r,o},ES=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const r=dt.explode(t.options.get("font_size_style_values")),o=dt.explode(t.options.get("font_size_classes"));return o.length>0?o[n-1]||e:r[n-1]||e}return e}return e},MO=t=>{const e=t.split(/\s*,\s*/);return ne(e,n=>-1===n.indexOf(" ")||rn(n,'"')||rn(n,"'")?n:`'${n}'`).join(",")},NS=(t,e)=>{const n=t.dom,r=t.selection.getRng(),o=e?t.selection.getStart():t.selection.getEnd(),s=e?r.startContainer:r.endContainer,a=jl(n,s);if(!a||!a.isContentEditable)return;const i=e?Tt:Bt,l=On(t);((c,u,f,p)=>{const b=c.dom,g=h=>b.isBlock(h)&&h.parentElement===f,v=g(u)?u:b.getParent(p,g,f);return E.from(v).map(O)})(t,o,a,s).each(c=>{const u=Wx(t,s,c.dom,a,!1,l);i(c,O(u)),t.selection.setCursorLocation(u,0),t.dispatch("NewBlock",{newBlock:u}),Fl(t,"insertParagraph")})},FO=["toggleview"],_S=t=>Ot(FO,t.toLowerCase());class AS{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,r,o){const s=this.editor,a=e.toLowerCase(),i=o?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?Df(c=s).each(u=>c.selection.setRng(u)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:r}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[a];return!!ge(l)&&(l(a,n,r),s.dispatch("ExecCommand",{command:e,ui:n,value:r}),!0)}queryCommandState(e){if(!_S(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),r=this.commands.state[n];return!!ge(r)&&r(n)}queryCommandValue(e){if(!_S(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),r=this.commands.value[n];return ge(r)?r(n):""}addCommands(e,n="exec"){const r=this.commands;Ce(e,(o,s)=>{tt(s.toLowerCase().split(","),a=>{r[n][a]=o})})}addCommand(e,n,r){const o=e.toLowerCase();this.commands.exec[o]=(s,a,i)=>n.call(r??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,r){this.commands.state[e.toLowerCase()]=()=>n.call(r??this.editor)}addQueryValueHandler(e,n,r){this.commands.value[e.toLowerCase()]=()=>n.call(r??this.editor)}}const xa="data-mce-contenteditable",rg=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Xd=(t,e)=>{t.dom.contentEditable=e?"true":"false"},wa=t=>t.readonly,TS=t=>{t.parser.addAttributeFilter("contenteditable",e=>{wa(t)&&tt(e,n=>{n.attr(xa,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(xa,e=>{wa(t)&&tt(e,n=>{n.attr("contenteditable",n.attr(xa))})}),t.serializer.addTempAttr(xa)},zO=["copy"],HO=dt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class og{static isNative(e){return!!HO[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ve}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const r=e.toLowerCase(),o=Bu(r,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const s=this.bindings[r];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(!1===l.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(e,n,r,o){if(!1===n&&(n=ve),n){const s={func:n,removed:!1};o&&dt.extend(s,o);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=r?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(e,n){if(e){const r=e.toLowerCase().split(" ");let o=r.length;for(;o--;){const s=r[o];let a=this.bindings[s];if(!s)return Ce(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=Vr(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,tt(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else Ce(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(e,n,r){return this.on(e,n,r,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const Wl=t=>(t._eventDispatcher||(t._eventDispatcher=new og({scope:t,toggleEvent:(e,n)=>{og.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),sg={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const r=this;if(r.removed&&"remove"!==t&&"detach"!==t)return Bu(t.toLowerCase(),e??{},r);const o=Wl(r).dispatch(t,e);if(!1!==n&&r.parent){let s=r.parent();for(;s&&!o.isPropagationStopped();)s.dispatch(t,o,!1),s=s.parent?s.parent():void 0}return o},on(t,e,n){return Wl(this).on(t,e,n)},off(t,e){return Wl(this).off(t,e)},once(t,e){return Wl(this).once(t,e)},hasEventListeners(t){return Wl(this).has(t)}},Gd=we.DOM;let Sa;const Yd=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=Uh(t);return n?(t.eventRoot||(t.eventRoot=Gd.select(n)[0]),t.eventRoot):t.getBody()},RS=(t,e,n)=>{var r;(r=t).hidden||wa(r)?wa(t)&&((r,o)=>{if("click"!==o.type||Ct.metaKeyPressed(o))Ot(zO,o.type)&&r.dispatch(o.type,o);else{const s=O(o.target);(a=r,i=s,zr(i,"a",l=>ce(l,O(a.getBody()))).bind(l=>Yr(l,"href"))).each(a=>{if(o.preventDefault(),/^#/.test(a)){const i=r.dom.select(`${a},[name="${ki(a,"#")}"]`);i.length&&r.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},OS=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=Yd(t,e);if(Uh(t)){if(Sa||(Sa={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Sa&&(Ce(Sa,(o,s)=>{t.dom.unbind(Yd(t,s))}),Sa=null)})),Sa[e])return;const r=o=>{const s=o.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||Gd.isChildOf(s,l))&&RS(a[i],e,o)}};Sa[e]=r,Gd.bind(n,e,r)}else{const r=o=>{RS(t,e,o)};Gd.bind(n,e,r),t.delegates[e]=r}},DS={...sg,bindPendingEventDelegates(){const t=this;dt.each(t._pendingNativeEvents,e=>{OS(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?OS(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(Yd(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Ce(t.delegates,(r,o)=>{t.dom.unbind(Yd(t,o),o,r)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},UO=t=>Dt(t)?{value:t.split(/[ ,]/),valid:!0}:Ln(t,Dt)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},BS=(t,e)=>t+(is(e.message)?"":`. ${e.message}`),PS=t=>t.valid,ag=(t,e,n="")=>{const r=e(t);return Pn(r)?r?{value:t,valid:!0}:{valid:!1,message:n}:r},qO=["design","readonly"],LS=(t,e,n,r)=>{const o=n[e.get()],s=n[r];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${r}:`,a)}var a;o.deactivate(),o.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=O(t.getBody());var r,o,s;s=e,et(r=n,o="mce-content-readonly")&&!s?X(r,o):s&&H(r,o),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(r=>{E.from(r.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,Xd(n,!1),tt(Cn(n,'*[contenteditable="true"]'),r=>{Xe(r,xa,"true"),Xd(r,!1)})):(t.readonly=!1,t.hasEditableRoot()&&Xd(n,!0),tt(Cn(n,`*[${xa}="true"]`),r=>{d(r,xa),Xd(r,!0)}),rg(t,"StyleWithCSS",!1),rg(t,"enableInlineTableEditing",!1),rg(t,"enableObjectResizing",!1),(r=>ua(r)||(o=>{const s=Re(O(o.getElement()));return Rf(s).filter(a=>!Pf(a.dom)&&Gc(o,a.dom)).isSome()})(r))(t)&&t.focus(),(r=>{r.selection.setRng(r.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(r),(a=t).dispatch("SwitchMode",{mode:r})},ig=dt.each,lg=dt.explode,$O={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},MS=dt.makeMap("alt,ctrl,shift,meta,access"),WO=t=>{const e={},n=ue.os.isMacOS()||ue.os.isiOS();ig(lg(t.toLowerCase(),"+"),s=>{s in MS?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=$O[s]||s.toUpperCase().charCodeAt(0))});const r=[e.keyCode];let o;for(o in MS)e[o]?r.push(o):e[o]=!1;return e.id=r.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class IS{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(ig(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,r,o){const s=this,a=s.normalizeCommandFunc(r);return ig(lg(dt.trim(e)),i=>{const l=s.createShortcut(i,n,a,o);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,r=e;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:dt.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,n,r,o){const s=dt.map(lg(e,">"),WO);return s[s.length-1]=dt.extend(s[s.length-1],{func:r,scope:o||this.editor}),dt.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const VO=()=>{const t=(()=>{const e={},n={},r={},o={},s={},a={},i={},l={},c=(u,f)=>(p,b)=>{u[p.toLowerCase()]={...b,type:f}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(r,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(a,"contexttoolbar"),addContextForm:c(a,"contextform"),addSidebar:c(i,"sidebar"),addView:c(l,"views"),addIcon:(u,f)=>o[u.toLowerCase()]=f,getAll:()=>({buttons:e,menuItems:n,icons:o,popups:r,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},ka=we.DOM,FS=dt.extend,KO=dt.each;class Qd{constructor(e,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,FS(this,DS);const o=this;this.id=e,this.hidden=!1;const s=((t,e,n,r,o)=>{var s;const a=t?{mobile:NO(null!==(s=o.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return Fo(s,(c,u)=>Ot(t,u),_a(i),_a(l)),{t:i,f:l}})(e);return o=n.f,{sections:ht(n.t),options:ht(o)};var o})(["mobile"],Sp(a,o)),l=dt.extend(n,r,i.options(),t&&eg(i,"mobile")?((c,u,f={})=>{const p=c.sections(),b=ke(p,u).getOr({});return dt.extend({},f,b)})(i,"mobile"):{},{external_plugins:_O(r,i.options())});return((c,u,f,p)=>{const b=$l(f.forced_plugins),g=$l(p.plugins),v=eg(S=u,"mobile")?S.sections().mobile:{},h=((S,k,A,_)=>S&&eg(k,"mobile")?_:A)(c,u,g,v.plugins?$l(v.plugins):g),C=((S,k)=>[...$l(S),...$l(k)])(b,h);var S;return dt.extend(p,{forced_plugins:b,plugins:C})})(t,i,r,l)})(SS||kO,SS,g=n,r.defaultOptions,g);var g;this.options=((b,g)=>{const v={},h={},C=(k,A,_)=>{const D=ag(A,_);return PS(D)?(h[k]=D.value,!0):(console.warn(BS(`Invalid value passed for the ${k} option`,D)),!1)},S=k=>Zt(v,k);return{register:(k,A)=>{const _=Dt(A.processor)?(I=>{const j=(()=>{switch(I){case"array":return ct;case"boolean":return Pn;case"function":return ge;case"number":return x;case"object":return Kt;case"string":return Dt;case"string[]":return UO;case"object[]":return U=>Ln(U,Kt);case"regexp":return U=>gr(U,RegExp);default:return Be}})();return U=>ag(U,j,`The value must be a ${I}.`)})(A.processor):A.processor,D=((I,j,U)=>{if(!De(j)){const K=ag(j,U);if(PS(K))return K.value;console.error(BS(`Invalid default value passed for the "${I}" option`,K))}})(k,A.default,_);v[k]={...A,default:D,processor:_},ke(h,k).orThunk(()=>ke(g,k)).each(I=>C(k,I,_))},isRegistered:S,get:k=>ke(h,k).orThunk(()=>ke(v,k).map(A=>A.default)).getOrUndefined(),set:(k,A)=>{if(S(k)){const _=v[k];return _.immutable?(console.error(`"${k}" is an immutable option and cannot be updated`),!1):C(k,A,_.processor)}return console.warn(`"${k}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:k=>{const A=S(k);return A&&delete h[k],A},isSet:k=>Zt(h,k)}})(0,s),(b=>{const g=b.options.register;g("id",{processor:"string",default:b.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:b.documentBaseUrl}),g("body_id",{processor:Dh(b,"tinymce"),default:"tinymce"}),g("body_class",{processor:Dh(b),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:v=>{const h=Dt(v)&&$n(v);return h?{value:v,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:v=>{const h=Ot(["block","linebreak","invert","default"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:v=>Pn(v)||Dt(v)?{valid:!0,value:v}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:v=>{const h=!1===v||Dt(v)||Ln(v,Dt);return h?Dt(v)?{value:ne(v.split(","),Gr),valid:h}:ct(v)?{value:v,valid:h}:!1===v?{value:[],valid:h}:{value:v,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Qu(b)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:v=>{const h=Dt(v)||Ln(v,Dt);return h?{value:ct(v)?v:ne(v.split(","),Gr),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:v=>{const h=Pn(v)||Dt(v);return h?!1===v||Ku.isiPhone()||Ku.isiPad()?{value:"",valid:h}:{value:!0===v?"table,img,figure.image,div,video,iframe":v,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!Wk}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"object"}),g("service_message",{processor:"string"}),g("theme",{processor:v=>!1===v||Dt(v)||ge(v),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:v=>{const h=!1===v||Dt(v);return h?{value:!1===v?"":v,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:b.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:b.convertURL}),g("url_converter_scope",{processor:"object",default:b}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:"string"}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:Xu}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:Xu}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:Xu}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:v=>Dt(v)||!0===v}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:v=>Ln(v,Kt)||!1===v?{value:Rh(!1===v?[]:v),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),g("text_patterns_lookup",{processor:v=>{return ge(v)?{value:(h=v,C=>{const S=h(C);return Rh(S)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:v=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:v=>Ln(v,Oh)?{value:v,valid:!0}:Oh(v)?{value:[v],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!1}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:v=>{const h=Ot(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:v=>{const h=Ot(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),b.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:ro.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:Vk.getAttrib(b.getElement(),"placeholder")})})})(o);const a=this.options.get;a("deprecation_warnings")&&((b,g)=>{((v,h)=>{const C=(t=>{const e=g1(t,BA),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),Mo(e)})(v),S=(t=>h1(t,LA))(h),k=S.length>0,A=C.length>0,_="mobile"===h.theme;if(k||A||_){const D="\n- ",I=_?`\n\nThemes:${D}mobile`:"",j=k?`\n\nPlugins:${D}${S.join(D)}`:"",U=A?`\n\nOptions:${D}${C.join(D)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+I+j+U)}})(b,g),((v,h)=>{const C=(t=>g1(t,PA))(v),S=(t=>h1(t,p1.map(e=>e.name)))(h),k=S.length>0,A=C.length>0;if(k||A){const _="\n- ",D=k?`\n\nPlugins:${_}${S.map(zA).join(_)}`:"",I=A?`\n\nOptions:${_}${C.join(_)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+D+I)}})(b,g)})(n,s);const i=a("suffix");i&&(r.suffix=i),this.suffix=r.suffix;const l=a("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const c=Gu(o);c&&(Xo.ScriptLoader._setReferrerPolicy(c),we.DOM.styleSheetLoader._setReferrerPolicy(c));const u=$h(o);gt(u)&&we.DOM.styleSheetLoader._setContentCssCors(u),In.languageLoad=a("language_load"),In.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new io(Bh(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Qu(o),this.hasVisual=LE(o),this.shortcuts=new IS(this),this.editorCommands=new AS(this),(t=>{var e;(t=>{(e=>{const n=r=>()=>{tt("left,center,right,justify".split(","),o=>{r!==o&&e.formatter.remove("align"+o)}),"none"!==r&&(e.formatter.toggle("align"+r,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=r=>()=>{const o=e.selection,s=o.isCollapsed()?[e.dom.getParent(o.getNode(),e.dom.isBlock)]:o.getSelectedBlocks();return Se(s,a=>gt(e.formatter.matchNode(a,r)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=e.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(ue.os.isMacOS()||ue.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!wt(a)||s++!==o||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,r,o)=>{e.selection.select(o)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),eo);if(n){const r=e.dom.createRng();r.selectNodeContents(n),e.selection.setRng(r)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{Kd(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{Kd(e,e.dom.encode(o))},insertHTML:(n,r,o)=>{Kd(e,o)},mceInsertContent:(n,r,o)=>{Kd(e,o)},mceSetContent:(n,r,o)=>{e.setContent(o)},mceReplaceContent:(n,r,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(KE(e))}})})(t),(e=>{const n=(r,o,s)=>{const a=Dt(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");Kt(a)&&Dt(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const r=e.dom.getParent(e.selection.getStart(),"a");return void(r&&e.dom.remove(r,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{BC(e,"indent")},Outdent:()=>{PC(e)}}),e.editorCommands.addCommands({Outdent:()=>RC(e)},"state")})(t),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{NS(e,!0)},InsertNewBlockAfter:()=>{NS(e,!1)}})})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Fd(Xx,e)},mceInsertNewLine:(n,r,o)=>{ew(e,o)},InsertLineBreak:(n,r,o)=>{Fd(Qx,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{n.getDoc().execCommand(r);const o=n.dom.getParent(n.selection.getNode(),"ol,ul");if(o){const s=o.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=n.selection.getBookmark();n.dom.split(s,o),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{const o=n.dom.getParent(n.selection.getNode(),"ul,ol");return o&&("insertunorderedlist"===r&&"UL"===o.tagName||"insertorderedlist"===r&&"OL"===o.tagName)}},"state")})(e)})(t),(e=>{(n=>{const r=(o,s)=>{n.formatter.toggle(o,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,s,a)=>{r(o,{value:a})},BackColor:(o,s,a)=>{r("hilitecolor",{value:a})},FontName:(o,s,a)=>{((i,l)=>{const c=ES(i,l);i.formatter.toggle("fontname",{value:MO(c)}),i.nodeChanged()})(n,a)},FontSize:(o,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:ES(i,a)}),i.nodeChanged()},LineHeight:(o,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(o,s,a)=>{var i;r(o,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,s,a)=>{r(Dt(a)?a:"p")},mceToggleFormat:(o,s,a)=>{r(a)}})})(e),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return ng(o=n,s=>PO(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return ng(o=n,s=>BO(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return ng(o=n,s=>{const a=O(o.getBody());return pm(s,l=>Z(l,"line-height"),kt(ce,a)).getOrThunk(()=>{const l=parseFloat(B(s,"line-height")),c=parseFloat(B(s,"font-size"));return String(l/c)})}).getOr("");var o})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const s=o??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,r,o)=>{var s;(s=e).removed||(!0===o?If(s):(i=>{const l=i.selection,c=i.getBody();let u=l.getRng();i.quirks.refreshContentEditable(),gt(i.bookmark)&&!ua(i)&&Df(i).each(p=>{i.selection.setRng(p),u=p});const f=(p=i,b=l.getNode(),p.dom.getParent(b,g=>"true"===p.dom.getContentEditable(g)));var p,b;if(f&&i.dom.isChildOf(f,c))return Mf(f),xb(i,u),void If(i);i.inline||(ue.browser.isOpera()||Mf(c),i.getWin().focus()),(ue.browser.isFirefox()||i.inline)&&(Mf(c),xb(i,u)),If(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const f=a("cache_suffix");f&&(ue.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:VO(),styleSheetLoader:void 0,show:At,hide:At,setEnabled:At,isEnabled:Be},this.mode=(b=>{const g=sn("design"),v=sn({design:{activate:At,deactivate:At,editorReadOnly:!1},readonly:{activate:At,deactivate:At,editorReadOnly:!0}});return(h=b).serializer?TS(h):h.on("PreInit",()=>{TS(h)}),(h=>{h.on("ShowCaret",C=>{wa(h)&&C.preventDefault()}),h.on("ObjectSelected",C=>{wa(h)&&C.preventDefault()})})(b),{isReadOnly:()=>wa(b),set:h=>((C,S,k,A)=>{if(A!==k.get()){if(!Zt(S,A))throw new Error(`Editor mode '${A}' is invalid`);C.initialized?LS(C,k,S,A):C.on("init",()=>LS(C,k,S,A))}})(b,v.get(),g,h),get:()=>g.get(),register:(h,C)=>{v.set(((S,k,A)=>{if(Ot(qO,k))throw new Error(`Cannot override default mode ${k}`);return{...S,[k]:{...A,deactivate:()=>{try{A.deactivate()}catch(_){console.error(`problem while deactivating editor mode ${k}:`,_)}}}}})(v.get(),h,C))}};var h})(o),r.dispatch("SetupEditor",{editor:this});const p=FE(o);ge(p)&&p.call(o,o)}render(){(e=>{const n=e.id;ro.setCode(Fh(e));const r=()=>{Ca.unbind(window,"ready",r),e.render()};if(!Js.Event.domLoaded)return void Ca.bind(window,"ready",r);if(!e.getElement())return;const o=O(e.getElement()),s=m(o);var l;e.on("remove",()=>{po(o.dom.attributes,i=>d(o,i.name)),Ir(o,s)}),e.ui.styleSheetLoader=Bg.forElement(o,{contentCssCors:$h(l=e),referrerPolicy:Gu(l)}),Qu(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||Ca.getParent(n,"form");a&&(e.formElement=a,NE(e)&&!fu(e.getElement())&&(Ca.insertAfter(Ca.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},Ca.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!_E(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=C1(e),e.notificationManager=y1(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=Ca.encode(i.content))}),AE(e)&&e.on("submit",()=>{e.initialized&&e.save()}),TE(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Xo.ScriptLoader,r=()=>{!t.removed&&(o=>{const s=Ka(o);return!Dt(s)||gt(va.get(s))})(t)&&(o=>{const s=Yu(o);return gt(ai.get(s))})(t)&&wO(t)};((o,s)=>{const a=Ka(o);if(Dt(a)&&!CS(a)&&!Zt(va.urls,a)){const i=yE(o),l=i?o.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;va.load(a,l).catch(()=>{Nl(o,"ThemeLoadError",_l("theme",l,a))})}})(t,e),((o,s)=>{const a=Yu(o);if("plugin"!==a&&!Zt(ai.urls,a)){const i=CE(o),l=Dt(i)?o.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;ai.load(a,l).catch(()=>{Nl(o,"ModelLoadError",_l("model",l,a))})}})(t,e),((o,s)=>{const a=Fh(s),i=dE(s);if(!ro.hasCode(a)&&"en"!==a){const l=$n(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;o.add(l).catch(()=>{Nl(s,"LanguageLoadError",_l("language",l,a))})}})(n,t),((o,s,a)=>{const i=xS(s,"default",a),l=(c=s,E.from(oE(c)).filter($n).map(u=>({url:u,name:E.none()}))).orThunk(()=>xS(s,Ih(s),""));var c;tt((c=>{const u=[],f=p=>{u.push(p)};for(let p=0;p<c.length;p++)c[p].each(f);return u})([i,l]),c=>{o.add(c.url).catch(()=>{var u,f,p;u=s,f=c.url,p=c.name.getOrUndefined(),Nl(u,"IconsLoadError",_l("icons",f,p))})})})(n,t,e),((o,s)=>{const a=(i,l)=>{ii.load(i,l).catch(()=>{Nl(o,"PluginLoadError",_l("plugin",l,i))})};Ce(BE(o),(i,l)=>{a(l,i),o.options.set("plugins",Rc(o).concat(l))}),tt(Rc(o),i=>{!(i=dt.trim(i))||ii.urls[i]||CS(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(r,r)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return ua(this)}translate(e){return ro.translate(e)}getParam(e,n,r){const o=this.options;return o.isRegistered(e)||(gt(r)?o.register(e,{processor:r,default:n}):o.register(e,{processor:Be,default:n})),o.isSet(e)||De(n)?o.get(e):n}hasPlugin(e,n){return!(!Ot(Rc(this),e)||n&&void 0===ii.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,r){this.editorCommands.addCommand(e,n,r)}addQueryStateHandler(e,n,r){this.editorCommands.addQueryStateHandler(e,n,r)}addQueryValueHandler(e,n,r){this.editorCommands.addQueryValueHandler(e,n,r)}addShortcut(e,n,r,o){this.shortcuts.add(e,n,r,o)}execCommand(e,n,r,o){return this.editorCommands.execCommand(e,n,r,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(ka.show(e.getContainer()),ka.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(ka.hide(e.getContainer()),ka.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...e,load:!0},s=fu(r)?r.value:r.innerHTML,a=n.setContent(s,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),a}return""}save(e={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...e,save:!0,element:r};let s=n.getContent(o);const a={...o,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,fu(r))r.value=s;else{!e.is_removing&&n.inline||(r.innerHTML=s);const i=ka.getParent(n.id,"form");i&&KO(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=o.element=r=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return Wm(this,e,n)}getContent(e){return((n,r={})=>{const o=(s=r,a=r.format?r.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return Xy(n,o).fold(de,s=>{const a=(l=s,$m(n).editor.getContent(l));var l;return Gy(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=FS({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Wm(this,this.startContent,{format:"raw"}):Wm(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||ka.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ka.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const r=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:r?.body)&&void 0!==n?n:null}convertURL(e,n,r){const o=this,s=o.options.get,a=zE(o);return ge(a)?a.call(o,e,r,!0,n):!s("convert_urls")||"link"===r||Kt(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,r)=>{var s;s=r,ze(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,r;(n=this)._editableRoot!==(r=e)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:r}=e,o=e.getBody(),s=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&gt(s?.nextSibling)&&md.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&o&&md.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),md.remove(e.getContainer()),pd(n),pd(r),e.destroy()}var a})(this)}destroy(e){((n,r)=>{const{selection:o,dom:s}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),pd(o),pd(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),md.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const hi=we.DOM,Jd=dt.each;let Zd,jS=!1,Jn=[];const tu=t=>{const e=t.type;Jd(Ds.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},zS=t=>{if(t!==jS){const e=we.DOM;t?(e.bind(window,"resize",tu),e.bind(window,"scroll",tu)):(e.unbind(window,"resize",tu),e.unbind(window,"scroll",tu)),jS=t}},HS=t=>{const e=Jn;return Jn=Ht(Jn,n=>t!==n),Ds.activeEditor===t&&(Ds.activeEditor=Jn.length>0?Jn[0]:null),Ds.focusedEditor===t&&(Ds.focusedEditor=null),e.length!==Jn.length},XO="CSS1Compat"!==document.compatMode,Ds={...sg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.3",releaseDate:"2023-11-15",i18n:ro,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",r=io.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)e=o.base||o.baseURL,n=o.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new io(r).toAbsolute(e),t.documentBaseURL=r,t.baseURI=new io(t.baseURL),t.suffix=n,(s=t).on("AddEditor",kt(JN,s)),s.on("RemoveEditor",kt(ZN,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const r=t.plugin_base_urls;void 0!==r&&Ce(r,(o,s)=>{In.PluginManager.urls[s]=o})},init(t){const e=this;let n;const r=dt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var c;hi.unbind(window,"ready",s),(c=>{const u=t.onpageload;u&&u.apply(e,[])})(),l=((c,u)=>{const f=[],p=ge(u)?b=>Se(f,g=>u(g,b)):b=>Ot(f,b);for(let b=0,g=c.length;b<g;b++){const v=c[b];p(v)||f.push(v)}return f})((c=t,ue.browser.isIE()||ue.browser.isEdge()?(bd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):XO?(bd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Dt(c.selector)?hi.select(c.selector):gt(c.target)?[c.target]:[])),dt.each(l,c=>{var u;(u=e.get(c.id))&&u.initialized&&!(u.getContainer()||u.getBody()).parentNode&&(HS(u),u.unbindAllNativeEvents(),u.destroy(!0),u.removed=!0)}),l=dt.grep(l,c=>!e.get(c.id)),0===l.length?o([]):Jd(l,c=>{t.inline&&c.tagName.toLowerCase()in r?bd("Could not initialize inline editor on invalid inline target element",c):((u,f,p)=>{const b=new Qd(u,f,e);i.push(b),b.on("init",()=>{++a===l.length&&o(i)}),b.targetElm=b.targetElm||p,b.render()})((u=>{let f=u.id;return f||(f=ke(u,"name").filter(p=>!hi.get(p)).getOrThunk(hi.uniqueId),u.setAttribute("id",f)),f})(c),t,c)})};return hi.bind(window,"ready",s),new Promise(a=>{n?a(n):o=i=>{a(i)}})},get(t){return 0===arguments.length?Jn.slice(0):Dt(t)?He(Jn,e=>e.id===t).getOr(null):x(t)&&Jn[t]?Jn[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&Jn.push(t),zS(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),Zd||(Zd=r=>{const o=e.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",Zd))),t},createEditor(t,e){return this.add(new Qd(t,e,this))},remove(t){const e=this;let n;if(t){if(!Dt(t))return n=t,Qt(e.get(n.id))?null:(HS(n)&&e.dispatch("RemoveEditor",{editor:n}),0===Jn.length&&window.removeEventListener("beforeunload",Zd),n.remove(),zS(Jn.length>0),n);Jd(hi.select(t),r=>{n=e.get(r.id),n&&e.remove(n)})}else for(let r=Jn.length-1;r>=0;r--)e.remove(Jn[r])},execCommand(t,e,n){var r;const o=this,s=Kt(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(t){case"mceAddEditor":return o.get(s)||new Qd(s,n.options,o).render(),!0;case"mceRemoveEditor":{const a=o.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Jd(Jn,t=>{t.save()})},addI18n:(t,e)=>{ro.add(t,e)},translate:t=>ro.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new io(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new io(this.baseURL)}};Ds.setup();const GO=(()=>{const t=Cs();return{FakeClipboardItem:e=>({items:e,types:Ke(e),getType:n=>ke(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),US=Math.min,bi=Math.max,eu=Math.round,qS=(t,e,n)=>{let r=e.x,o=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(o+=l),"r"===c[1]&&(r+=i),"c"===c[0]&&(o+=eu(l/2)),"c"===c[1]&&(r+=eu(i/2)),"b"===c[3]&&(o-=a),"r"===c[4]&&(r-=s),"c"===c[3]&&(o-=eu(a/2)),"c"===c[4]&&(r-=eu(s/2)),vi(r,o,s,a)},vi=(t,e,n,r)=>({x:t,y:e,w:n,h:r}),YO={inflate:(t,e,n)=>vi(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:qS,findBestRelativePosition:(t,e,n,r)=>{for(let o=0;o<r.length;o++){const s=qS(t,e,r[o]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return r[o]}return null},intersect:(t,e)=>{const n=bi(t.x,e.x),r=bi(t.y,e.y),o=US(t.x+t.w,e.x+e.w),s=US(t.y+t.h,e.y+e.h);return o-n<0||s-r<0?null:vi(n,r,o-n,s-r)},clamp:(t,e,n)=>{let r=t.x,o=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,c=bi(0,e.x-r),u=bi(0,e.y-o),f=bi(0,s-i),p=bi(0,a-l);return r+=c,o+=u,n&&(s+=c,a+=u,r-=f,o-=p),s-=f,a-=p,vi(r,o,s-r,a-o)},create:vi,fromClientRect:t=>vi(t.left,t.top,t.width,t.height)},QO=(()=>{const t={},e={};return{load:(n,r)=>{const o=`Script at URL "${r}" failed to load`,s=`Script at URL "${r}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const a=new Promise((i,l)=>{const c=((u,f,p=1e3)=>{let b=!1,g=null;const v=S=>(...k)=>{b||(b=!0,null!==g&&(clearTimeout(g),g=null),S.apply(null,k))},h=v(u),C=v(f);return{start:(...S)=>{b||null!==g||(g=setTimeout(()=>C.apply(null,S),p))},resolve:h,reject:C}})(i,l);e[n]=c.resolve,Xo.ScriptLoader.loadScript(r).then(()=>c.start(s),()=>c.reject(o))});return t[n]=a,a}},add:(n,r)=>{void 0!==e[n]&&(e[n](r),delete e[n]),t[n]=Promise.resolve(r)},unload:n=>{delete t[n]}}})();let Vl;try{const t="__storage_test__";Vl=window.localStorage,Vl.setItem(t,t),Vl.removeItem(t)}catch{Vl=(()=>{let e={},n=[];const r={getItem:o=>e[o]||null,setItem:(o,s)=>{n.push(o),e[o]=String(s)},key:o=>n[o],removeItem:o=>{n=n.filter(s=>s===o),delete e[o]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const JO={geom:{Rect:YO},util:{Delay:Er,Tools:dt,VK:Ct,URI:io,EventDispatcher:og,Observable:sg,I18n:ro,LocalStorage:Vl,ImageUploader:t=>{const e=S1(),n=E1(t,e);return{upload:(r,o=!0)=>n.upload(r,o?k1(t):void 0)}}},dom:{EventUtils:Js,TreeWalker:tn,TextSeeker:ea,DOMUtils:we,ScriptLoader:Xo,RangeUtils:da,Serializer:m1,StyleSheetLoader:Dg,ControlSelection:Q0,BookmarkManager:pl,Selection:f1,Event:Js.Event},html:{Styles:Du,Entities:vs,Node:Qn,Schema:ys,DomParser:si,Writer:jb,Serializer:Es},Env:ue,AddOnManager:In,Annotator:U0,Formatter:A1,UndoManager:R1,EditorCommands:AS,WindowManager:C1,NotificationManager:y1,EditorObservable:DS,Shortcuts:IS,Editor:Qd,FocusManager:Cb,EditorManager:Ds,DOM:we.DOM,ScriptLoader:Xo.ScriptLoader,PluginManager:ii,ThemeManager:va,ModelManager:ai,IconManager:gd,Resource:QO,FakeClipboard:GO,trim:dt.trim,isArray:dt.isArray,is:dt.is,toArray:dt.toArray,makeMap:dt.makeMap,each:dt.each,map:dt.map,grep:dt.grep,inArray:dt.inArray,extend:dt.extend,walk:dt.walk,resolve:dt.resolve,explode:dt.explode,_addCacheSuffix:dt._addCacheSuffix},$S=dt.extend(Ds,JO);(t=>{window.tinymce=t,window.tinyMCE=t})($S),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})($S)}(),function(yt,zt){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=yt.document?zt(yt,!0):function(Vt){if(!Vt.document)throw new Error("jQuery requires a window with a document");return zt(Vt)}:zt(yt)}(typeof window<"u"?window:this,function(yt,zt){"use strict";var Vt=[],It=Object.getPrototypeOf,oe=Vt.slice,Ie=Vt.flat?function(d){return Vt.flat.call(d)}:function(d){return Vt.concat.apply([],d)},wn=Vt.push,We=Vt.indexOf,Hn={},pr=Hn.toString,Sn=Hn.hasOwnProperty,gr=Sn.toString,Dt=gr.call(Object),Kt={},Pt=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},ct=function(d){return null!=d&&d===d.window},Qt=yt.document,Pn={type:!0,src:!0,nonce:!0,noModule:!0};function De(d,m,y){var w,N,T=(y=y||Qt).createElement("script");if(T.text=d,m)for(w in Pn)(N=m[w]||m.getAttribute&&m.getAttribute(w))&&T.setAttribute(w,N);y.head.appendChild(T).parentNode.removeChild(T)}function be(d){return null==d?d+"":"object"==typeof d||"function"==typeof d?Hn[pr.call(d)]||"object":typeof d}var ge=/HTML$/i,x=function(d,m){return new x.fn.init(d,m)};function Ln(d){var m=!!d&&"length"in d&&d.length,y=be(d);return!Pt(d)&&!ct(d)&&("array"===y||0===m||"number"==typeof m&&0<m&&m-1 in d)}function At(d,m){return d.nodeName&&d.nodeName.toLowerCase()===m.toLowerCase()}x.fn=x.prototype={jquery:"3.7.1",constructor:x,length:0,toArray:function(){return oe.call(this)},get:function(d){return null==d?oe.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var m=x.merge(this.constructor(),d);return m.prevObject=this,m},each:function(d){return x.each(this,d)},map:function(d){return this.pushStack(x.map(this,function(m,y){return d.call(m,y,m)}))},slice:function(){return this.pushStack(oe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(d,m){return(m+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(d,m){return m%2}))},eq:function(d){var m=this.length,y=+d+(d<0?m:0);return this.pushStack(0<=y&&y<m?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:wn,sort:Vt.sort,splice:Vt.splice},x.extend=x.fn.extend=function(){var d,m,y,w,N,T,R=arguments[0]||{},H=1,F=arguments.length,X=!1;for("boolean"==typeof R&&(X=R,R=arguments[H]||{},H++),"object"==typeof R||Pt(R)||(R={}),H===F&&(R=this,H--);H<F;H++)if(null!=(d=arguments[H]))for(m in d)w=d[m],"__proto__"!==m&&R!==w&&(X&&w&&(x.isPlainObject(w)||(N=Array.isArray(w)))?(y=R[m],T=N&&!Array.isArray(y)?[]:N||x.isPlainObject(y)?y:{},N=!1,R[m]=x.extend(X,T,w)):void 0!==w&&(R[m]=w));return R},x.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var m,y;return!(!d||"[object Object]"!==pr.call(d)||(m=It(d))&&("function"!=typeof(y=Sn.call(m,"constructor")&&m.constructor)||gr.call(y)!==Dt))},isEmptyObject:function(d){var m;for(m in d)return!1;return!0},globalEval:function(d,m,y){De(d,{nonce:m&&m.nonce},y)},each:function(d,m){var y,w=0;if(Ln(d))for(y=d.length;w<y&&!1!==m.call(d[w],w,d[w]);w++);else for(w in d)if(!1===m.call(d[w],w,d[w]))break;return d},text:function(d){var m,y="",w=0,N=d.nodeType;if(!N)for(;m=d[w++];)y+=x.text(m);return 1===N||11===N?d.textContent:9===N?d.documentElement.textContent:3===N||4===N?d.nodeValue:y},makeArray:function(d,m){var y=m||[];return null!=d&&(Ln(Object(d))?x.merge(y,"string"==typeof d?[d]:d):wn.call(y,d)),y},inArray:function(d,m,y){return null==m?-1:We.call(m,d,y)},isXMLDoc:function(d){var y=d&&(d.ownerDocument||d).documentElement;return!ge.test(d&&d.namespaceURI||y&&y.nodeName||"HTML")},merge:function(d,m){for(var y=+m.length,w=0,N=d.length;w<y;w++)d[N++]=m[w];return d.length=N,d},grep:function(d,m,y){for(var w=[],N=0,T=d.length,R=!y;N<T;N++)!m(d[N],N)!==R&&w.push(d[N]);return w},map:function(d,m,y){var w,N,T=0,R=[];if(Ln(d))for(w=d.length;T<w;T++)null!=(N=m(d[T],T,y))&&R.push(N);else for(T in d)null!=(N=m(d[T],T,y))&&R.push(N);return Ie(R)},guid:1,support:Kt}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=Vt[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,m){Hn["[object "+m+"]"]=m.toLowerCase()});var kn=Vt.pop,Ps=Vt.sort,ht=Vt.splice,de="[\\x20\\t\\r\\n\\f]",Wr=new RegExp("^"+de+"+|((?:^|[^\\\\])(?:\\\\.)*)"+de+"+$","g");x.contains=function(d,m){var y=m&&m.parentNode;return d===y||!(!y||1!==y.nodeType||!(d.contains?d.contains(y):d.compareDocumentPosition&&16&d.compareDocumentPosition(y)))};var kt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Po(d,m){return m?"\0"===d?"\ufffd":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}x.escapeSelector=function(d){return(d+"").replace(kt,Po)};var sr=Qt,fo=wn;!function(){var d,m,y,w,N,T,R,H,F,X,et=fo,at=x.expando,J=0,ot=0,qt=Ge(),O=Ge(),le=Ge(),Ue=Ge(),Te=function(B,W){return B===W&&(N=!0),0},br="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ce="(?:\\\\[\\da-fA-F]{1,6}"+de+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",fe="\\["+de+"*("+ce+")(?:"+de+"*([*^$|!~]?=)"+de+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ce+"))|)"+de+"*\\]",bo=":("+ce+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fe+")*)|.*)\\)|)",me=new RegExp(de+"+","g"),Pe=new RegExp("^"+de+"*,"+de+"*"),Tn=new RegExp("^"+de+"*([>+~]|"+de+")"+de+"*"),us=new RegExp(de+"|>"),vr=new RegExp(bo),yr=new RegExp("^"+ce+"$"),Zn={ID:new RegExp("^#("+ce+")"),CLASS:new RegExp("^\\.("+ce+")"),TAG:new RegExp("^("+ce+"|[*])"),ATTR:new RegExp("^"+fe),PSEUDO:new RegExp("^"+bo),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+de+"*(even|odd|(([+-]|)(\\d*)n|)"+de+"*(?:([+-]|)"+de+"*(\\d+)|))"+de+"*\\)|)","i"),bool:new RegExp("^(?:"+br+")$","i"),needsContext:new RegExp("^"+de+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+de+"*((?:-\\d)?\\d*)"+de+"*\\)|)(?=[^-]|$)","i")},Qr=/^(?:input|select|textarea|button)$/i,$o=/^h\d$/i,Ne=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,je=/[+~]/,qe=new RegExp("\\\\[\\da-fA-F]{1,6}"+de+"?|\\\\([^\\r\\n\\f])","g"),bn=function(B,W){var Z="0x"+B.slice(1)-65536;return W||(Z<0?String.fromCharCode(Z+65536):String.fromCharCode(Z>>10|55296,1023&Z|56320))},Fr=function(){Rn()},vn=zr(function(B){return!0===B.disabled&&At(B,"fieldset")},{dir:"parentNode",next:"legend"});try{et.apply(Vt=oe.call(sr.childNodes),sr.childNodes)}catch{et={apply:function(W,Z){fo.apply(W,oe.call(Z))},call:function(W){fo.apply(W,oe.call(arguments,1))}}}function re(B,W,Z,rt){var mt,Tt,Bt,Gt,Nt,ye,se,ie=W&&W.ownerDocument,$t=W?W.nodeType:9;if(Z=Z||[],"string"!=typeof B||!B||1!==$t&&9!==$t&&11!==$t)return Z;if(!rt&&(Rn(W),W=W||T,H)){if(11!==$t&&(Nt=Ne.exec(B)))if(mt=Nt[1]){if(9===$t){if(!(Bt=W.getElementById(mt)))return Z;if(Bt.id===mt)return et.call(Z,Bt),Z}else if(ie&&(Bt=ie.getElementById(mt))&&re.contains(W,Bt)&&Bt.id===mt)return et.call(Z,Bt),Z}else{if(Nt[2])return et.apply(Z,W.getElementsByTagName(B)),Z;if((mt=Nt[3])&&W.getElementsByClassName)return et.apply(Z,W.getElementsByClassName(mt)),Z}if(!(Ue[B+" "]||F&&F.test(B))){if(se=B,ie=W,1===$t&&(us.test(B)||Tn.test(B))){for((ie=je.test(B)&&Fa(W.parentNode)||W)==W&&Kt.scope||((Gt=W.getAttribute("id"))?Gt=x.escapeSelector(Gt):W.setAttribute("id",Gt=at)),Tt=(ye=Jr(B)).length;Tt--;)ye[Tt]=(Gt?"#"+Gt:":scope")+" "+yo(ye[Tt]);se=ye.join(",")}try{return et.apply(Z,ie.querySelectorAll(se)),Z}catch{Ue(B,!0)}finally{Gt===at&&W.removeAttribute("id")}}}return Vs(B.replace(Wr,"$1"),W,Z,rt)}function Ge(){var B=[];return function W(Z,rt){return B.push(Z+" ")>m.cacheLength&&delete W[B.shift()],W[Z+" "]=rt}}function Re(B){return B[at]=!0,B}function Oe(B){var W=T.createElement("fieldset");try{return!!B(W)}catch{return!1}finally{W.parentNode&&W.parentNode.removeChild(W),W=null}}function jr(B){return function(W){return At(W,"input")&&W.type===B}}function Wo(B){return function(W){return(At(W,"input")||At(W,"button"))&&W.type===B}}function Ia(B){return function(W){return"form"in W?W.parentNode&&!1===W.disabled?"label"in W?"label"in W.parentNode?W.parentNode.disabled===B:W.disabled===B:W.isDisabled===B||W.isDisabled!==!B&&vn(W)===B:W.disabled===B:"label"in W&&W.disabled===B}}function cr(B){return Re(function(W){return W=+W,Re(function(Z,rt){for(var mt,Tt=B([],Z.length,W),Bt=Tt.length;Bt--;)Z[mt=Tt[Bt]]&&(Z[mt]=!(rt[mt]=Z[mt]))})})}function Fa(B){return B&&typeof B.getElementsByTagName<"u"&&B}function Rn(B){var W,Z=B?B.ownerDocument||B:sr;return Z!=T&&9===Z.nodeType&&Z.documentElement&&(R=(T=Z).documentElement,H=!x.isXMLDoc(T),X=R.matches||R.webkitMatchesSelector||R.msMatchesSelector,R.msMatchesSelector&&sr!=T&&(W=T.defaultView)&&W.top!==W&&W.addEventListener("unload",Fr),Kt.getById=Oe(function(rt){return R.appendChild(rt).id=x.expando,!T.getElementsByName||!T.getElementsByName(x.expando).length}),Kt.disconnectedMatch=Oe(function(rt){return X.call(rt,"*")}),Kt.scope=Oe(function(){return T.querySelectorAll(":scope")}),Kt.cssHas=Oe(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Kt.getById?(m.filter.ID=function(rt){var mt=rt.replace(qe,bn);return function(Tt){return Tt.getAttribute("id")===mt}},m.find.ID=function(rt,mt){if(typeof mt.getElementById<"u"&&H){var Tt=mt.getElementById(rt);return Tt?[Tt]:[]}}):(m.filter.ID=function(rt){var mt=rt.replace(qe,bn);return function(Tt){var Bt=typeof Tt.getAttributeNode<"u"&&Tt.getAttributeNode("id");return Bt&&Bt.value===mt}},m.find.ID=function(rt,mt){if(typeof mt.getElementById<"u"&&H){var Tt,Bt,Gt,Nt=mt.getElementById(rt);if(Nt){if((Tt=Nt.getAttributeNode("id"))&&Tt.value===rt)return[Nt];for(Gt=mt.getElementsByName(rt),Bt=0;Nt=Gt[Bt++];)if((Tt=Nt.getAttributeNode("id"))&&Tt.value===rt)return[Nt]}return[]}}),m.find.TAG=function(rt,mt){return typeof mt.getElementsByTagName<"u"?mt.getElementsByTagName(rt):mt.querySelectorAll(rt)},m.find.CLASS=function(rt,mt){if(typeof mt.getElementsByClassName<"u"&&H)return mt.getElementsByClassName(rt)},F=[],Oe(function(rt){var mt;R.appendChild(rt).innerHTML="<a id='"+at+"' href='' disabled='disabled'></a><select id='"+at+"-\r\\' disabled='disabled'><option selected=''></option></select>",rt.querySelectorAll("[selected]").length||F.push("\\["+de+"*(?:value|"+br+")"),rt.querySelectorAll("[id~="+at+"-]").length||F.push("~="),rt.querySelectorAll("a#"+at+"+*").length||F.push(".#.+[+~]"),rt.querySelectorAll(":checked").length||F.push(":checked"),(mt=T.createElement("input")).setAttribute("type","hidden"),rt.appendChild(mt).setAttribute("name","D"),R.appendChild(rt).disabled=!0,2!==rt.querySelectorAll(":disabled").length&&F.push(":enabled",":disabled"),(mt=T.createElement("input")).setAttribute("name",""),rt.appendChild(mt),rt.querySelectorAll("[name='']").length||F.push("\\["+de+"*name"+de+"*="+de+"*(?:''|\"\")")}),Kt.cssHas||F.push(":has"),F=F.length&&new RegExp(F.join("|")),Te=function(rt,mt){if(rt===mt)return N=!0,0;var Tt=!rt.compareDocumentPosition-!mt.compareDocumentPosition;return Tt||(1&(Tt=(rt.ownerDocument||rt)==(mt.ownerDocument||mt)?rt.compareDocumentPosition(mt):1)||!Kt.sortDetached&&mt.compareDocumentPosition(rt)===Tt?rt===T||rt.ownerDocument==sr&&re.contains(sr,rt)?-1:mt===T||mt.ownerDocument==sr&&re.contains(sr,mt)?1:w?We.call(w,rt)-We.call(w,mt):0:4&Tt?-1:1)}),T}for(d in re.matches=function(B,W){return re(B,null,null,W)},re.matchesSelector=function(B,W){if(Rn(B),H&&!Ue[W+" "]&&(!F||!F.test(W)))try{var Z=X.call(B,W);if(Z||Kt.disconnectedMatch||B.document&&11!==B.document.nodeType)return Z}catch{Ue(W,!0)}return 0<re(W,T,null,[B]).length},re.contains=function(B,W){return(B.ownerDocument||B)!=T&&Rn(B),x.contains(B,W)},re.attr=function(B,W){(B.ownerDocument||B)!=T&&Rn(B);var Z=m.attrHandle[W.toLowerCase()],rt=Z&&Sn.call(m.attrHandle,W.toLowerCase())?Z(B,W,!H):void 0;return void 0!==rt?rt:B.getAttribute(W)},re.error=function(B){throw new Error("Syntax error, unrecognized expression: "+B)},x.uniqueSort=function(B){var W,Z=[],rt=0,mt=0;if(N=!Kt.sortStable,w=!Kt.sortStable&&oe.call(B,0),Ps.call(B,Te),N){for(;W=B[mt++];)W===B[mt]&&(rt=Z.push(mt));for(;rt--;)ht.call(B,Z[rt],1)}return w=null,B},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(oe.apply(this)))},(m=x.expr={cacheLength:50,createPseudo:Re,match:Zn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(B){return B[1]=B[1].replace(qe,bn),B[3]=(B[3]||B[4]||B[5]||"").replace(qe,bn),"~="===B[2]&&(B[3]=" "+B[3]+" "),B.slice(0,4)},CHILD:function(B){return B[1]=B[1].toLowerCase(),"nth"===B[1].slice(0,3)?(B[3]||re.error(B[0]),B[4]=+(B[4]?B[5]+(B[6]||1):2*("even"===B[3]||"odd"===B[3])),B[5]=+(B[7]+B[8]||"odd"===B[3])):B[3]&&re.error(B[0]),B},PSEUDO:function(B){var W,Z=!B[6]&&B[2];return Zn.CHILD.test(B[0])?null:(B[3]?B[2]=B[4]||B[5]||"":Z&&vr.test(Z)&&(W=Jr(Z,!0))&&(W=Z.indexOf(")",Z.length-W)-Z.length)&&(B[0]=B[0].slice(0,W),B[2]=Z.slice(0,W)),B.slice(0,3))}},filter:{TAG:function(B){var W=B.replace(qe,bn).toLowerCase();return"*"===B?function(){return!0}:function(Z){return At(Z,W)}},CLASS:function(B){var W=qt[B+" "];return W||(W=new RegExp("(^|"+de+")"+B+"("+de+"|$)"))&&qt(B,function(Z){return W.test("string"==typeof Z.className&&Z.className||typeof Z.getAttribute<"u"&&Z.getAttribute("class")||"")})},ATTR:function(B,W,Z){return function(rt){var mt=re.attr(rt,B);return null==mt?"!="===W:!W||(mt+="","="===W?mt===Z:"!="===W?mt!==Z:"^="===W?Z&&0===mt.indexOf(Z):"*="===W?Z&&-1<mt.indexOf(Z):"$="===W?Z&&mt.slice(-Z.length)===Z:"~="===W?-1<(" "+mt.replace(me," ")+" ").indexOf(Z):"|="===W&&(mt===Z||mt.slice(0,Z.length+1)===Z+"-"))}},CHILD:function(B,W,Z,rt,mt){var Tt="nth"!==B.slice(0,3),Bt="last"!==B.slice(-4),Gt="of-type"===W;return 1===rt&&0===mt?function(Nt){return!!Nt.parentNode}:function(Nt,ye,se){var ie,$t,ee,Ye,yn,Qe=Tt!==Bt?"nextSibling":"previousSibling",Xn=Nt.parentNode,tr=Gt&&Nt.nodeName.toLowerCase(),dr=!se&&!Gt,_e=!1;if(Xn){if(Tt){for(;Qe;){for(ee=Nt;ee=ee[Qe];)if(Gt?At(ee,tr):1===ee.nodeType)return!1;yn=Qe="only"===B&&!yn&&"nextSibling"}return!0}if(yn=[Bt?Xn.firstChild:Xn.lastChild],Bt&&dr){for(_e=(Ye=(ie=($t=Xn[at]||(Xn[at]={}))[B]||[])[0]===J&&ie[1])&&ie[2],ee=Ye&&Xn.childNodes[Ye];ee=++Ye&&ee&&ee[Qe]||(_e=Ye=0)||yn.pop();)if(1===ee.nodeType&&++_e&&ee===Nt){$t[B]=[J,Ye,_e];break}}else if(dr&&(_e=Ye=(ie=($t=Nt[at]||(Nt[at]={}))[B]||[])[0]===J&&ie[1]),!1===_e)for(;(ee=++Ye&&ee&&ee[Qe]||(_e=Ye=0)||yn.pop())&&(!(Gt?At(ee,tr):1===ee.nodeType)||!++_e||(dr&&(($t=ee[at]||(ee[at]={}))[B]=[J,_e]),ee!==Nt)););return(_e-=mt)===rt||_e%rt==0&&0<=_e/rt}}},PSEUDO:function(B,W){var Z,rt=m.pseudos[B]||m.setFilters[B.toLowerCase()]||re.error("unsupported pseudo: "+B);return rt[at]?rt(W):1<rt.length?(Z=[B,B,"",W],m.setFilters.hasOwnProperty(B.toLowerCase())?Re(function(mt,Tt){for(var Bt,Gt=rt(mt,W),Nt=Gt.length;Nt--;)mt[Bt=We.call(mt,Gt[Nt])]=!(Tt[Bt]=Gt[Nt])}):function(mt){return rt(mt,0,Z)}):rt}},pseudos:{not:Re(function(B){var W=[],Z=[],rt=Ha(B.replace(Wr,"$1"));return rt[at]?Re(function(mt,Tt,Bt,Gt){for(var Nt,ye=rt(mt,null,Gt,[]),se=mt.length;se--;)(Nt=ye[se])&&(mt[se]=!(Tt[se]=Nt))}):function(mt,Tt,Bt){return W[0]=mt,rt(W,null,Bt,Z),W[0]=null,!Z.pop()}}),has:Re(function(B){return function(W){return 0<re(B,W).length}}),contains:Re(function(B){return B=B.replace(qe,bn),function(W){return-1<(W.textContent||x.text(W)).indexOf(B)}}),lang:Re(function(B){return yr.test(B||"")||re.error("unsupported lang: "+B),B=B.replace(qe,bn).toLowerCase(),function(W){var Z;do{if(Z=H?W.lang:W.getAttribute("xml:lang")||W.getAttribute("lang"))return(Z=Z.toLowerCase())===B||0===Z.indexOf(B+"-")}while((W=W.parentNode)&&1===W.nodeType);return!1}}),target:function(B){var W=yt.location&&yt.location.hash;return W&&W.slice(1)===B.id},root:function(B){return B===R},focus:function(B){return B===function(){try{return T.activeElement}catch{}}()&&T.hasFocus()&&!!(B.type||B.href||~B.tabIndex)},enabled:Ia(!1),disabled:Ia(!0),checked:function(B){return At(B,"input")&&!!B.checked||At(B,"option")&&!!B.selected},selected:function(B){return!0===B.selected},empty:function(B){for(B=B.firstChild;B;B=B.nextSibling)if(B.nodeType<6)return!1;return!0},parent:function(B){return!m.pseudos.empty(B)},header:function(B){return $o.test(B.nodeName)},input:function(B){return Qr.test(B.nodeName)},button:function(B){return At(B,"input")&&"button"===B.type||At(B,"button")},text:function(B){var W;return At(B,"input")&&"text"===B.type&&(null==(W=B.getAttribute("type"))||"text"===W.toLowerCase())},first:cr(function(){return[0]}),last:cr(function(B,W){return[W-1]}),eq:cr(function(B,W,Z){return[Z<0?Z+W:Z]}),even:cr(function(B,W){for(var Z=0;Z<W;Z+=2)B.push(Z);return B}),odd:cr(function(B,W){for(var Z=1;Z<W;Z+=2)B.push(Z);return B}),lt:cr(function(B,W,Z){var rt;for(rt=Z<0?Z+W:W<Z?W:Z;0<=--rt;)B.push(rt);return B}),gt:cr(function(B,W,Z){for(var rt=Z<0?Z+W:Z;++rt<W;)B.push(rt);return B})}}).pseudos.nth=m.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})m.pseudos[d]=jr(d);for(d in{submit:!0,reset:!0})m.pseudos[d]=Wo(d);function vo(){}function Jr(B,W){var Z,rt,mt,Tt,Bt,Gt,Nt,ye=O[B+" "];if(ye)return W?0:ye.slice(0);for(Bt=B,Gt=[],Nt=m.preFilter;Bt;){for(Tt in Z&&!(rt=Pe.exec(Bt))||(rt&&(Bt=Bt.slice(rt[0].length)||Bt),Gt.push(mt=[])),Z=!1,(rt=Tn.exec(Bt))&&(Z=rt.shift(),mt.push({value:Z,type:rt[0].replace(Wr," ")}),Bt=Bt.slice(Z.length)),m.filter)!(rt=Zn[Tt].exec(Bt))||Nt[Tt]&&!(rt=Nt[Tt](rt))||(Z=rt.shift(),mt.push({value:Z,type:Tt,matches:rt}),Bt=Bt.slice(Z.length));if(!Z)break}return W?Bt.length:Bt?re.error(B):O(B,Gt).slice(0)}function yo(B){for(var W=0,Z=B.length,rt="";W<Z;W++)rt+=B[W].value;return rt}function zr(B,W,Z){var rt=W.dir,mt=W.next,Tt=mt||rt,Bt=Z&&"parentNode"===Tt,Gt=ot++;return W.first?function(Nt,ye,se){for(;Nt=Nt[rt];)if(1===Nt.nodeType||Bt)return B(Nt,ye,se);return!1}:function(Nt,ye,se){var ie,$t,ee=[J,Gt];if(se){for(;Nt=Nt[rt];)if((1===Nt.nodeType||Bt)&&B(Nt,ye,se))return!0}else for(;Nt=Nt[rt];)if(1===Nt.nodeType||Bt)if($t=Nt[at]||(Nt[at]={}),mt&&At(Nt,mt))Nt=Nt[rt]||Nt;else{if((ie=$t[Tt])&&ie[0]===J&&ie[1]===Gt)return ee[2]=ie[2];if(($t[Tt]=ee)[2]=B(Nt,ye,se))return!0}return!1}}function Zr(B){return 1<B.length?function(W,Z,rt){for(var mt=B.length;mt--;)if(!B[mt](W,Z,rt))return!1;return!0}:B[0]}function ja(B,W,Z,rt,mt){for(var Tt,Bt=[],Gt=0,Nt=B.length,ye=null!=W;Gt<Nt;Gt++)(Tt=B[Gt])&&(Z&&!Z(Tt,rt,mt)||(Bt.push(Tt),ye&&W.push(Gt)));return Bt}function Vo(B,W,Z,rt,mt,Tt){return rt&&!rt[at]&&(rt=Vo(rt)),mt&&!mt[at]&&(mt=Vo(mt,Tt)),Re(function(Bt,Gt,Nt,ye){var se,ie,$t,ee,Ye=[],yn=[],Qe=Gt.length,Xn=Bt||function(dr,_e,Hr){for(var er=0,fs=_e.length;er<fs;er++)re(dr,_e[er],Hr);return Hr}(W||"*",Nt.nodeType?[Nt]:Nt,[]),tr=!B||!Bt&&W?Xn:ja(Xn,Ye,B,Nt,ye);if(Z?Z(tr,ee=mt||(Bt?B:Qe||rt)?[]:Gt,Nt,ye):ee=tr,rt)for(se=ja(ee,yn),rt(se,[],Nt,ye),ie=se.length;ie--;)($t=se[ie])&&(ee[yn[ie]]=!(tr[yn[ie]]=$t));if(Bt){if(mt||B){if(mt){for(se=[],ie=ee.length;ie--;)($t=ee[ie])&&se.push(tr[ie]=$t);mt(null,ee=[],se,ye)}for(ie=ee.length;ie--;)($t=ee[ie])&&-1<(se=mt?We.call(Bt,$t):Ye[ie])&&(Bt[se]=!(Gt[se]=$t))}}else ee=ja(ee===Gt?ee.splice(Qe,ee.length):ee),mt?mt(null,Gt,ee,ye):et.apply(Gt,ee)})}function za(B){for(var W,Z,rt,mt=B.length,Tt=m.relative[B[0].type],Bt=Tt||m.relative[" "],Gt=Tt?1:0,Nt=zr(function(ie){return ie===W},Bt,!0),ye=zr(function(ie){return-1<We.call(W,ie)},Bt,!0),se=[function(ie,$t,ee){var Ye=!Tt&&(ee||$t!=y)||((W=$t).nodeType?Nt(ie,$t,ee):ye(ie,$t,ee));return W=null,Ye}];Gt<mt;Gt++)if(Z=m.relative[B[Gt].type])se=[zr(Zr(se),Z)];else{if((Z=m.filter[B[Gt].type].apply(null,B[Gt].matches))[at]){for(rt=++Gt;rt<mt&&!m.relative[B[rt].type];rt++);return Vo(1<Gt&&Zr(se),1<Gt&&yo(B.slice(0,Gt-1).concat({value:" "===B[Gt-2].type?"*":""})).replace(Wr,"$1"),Z,Gt<rt&&za(B.slice(Gt,rt)),rt<mt&&za(B=B.slice(rt)),rt<mt&&yo(B))}se.push(Z)}return Zr(se)}function Ha(B,W){var Z,rt,mt,Tt,Bt,Gt,Nt=[],ye=[],se=le[B+" "];if(!se){for(W||(W=Jr(B)),Z=W.length;Z--;)(se=za(W[Z]))[at]?Nt.push(se):ye.push(se);(se=le(B,(rt=ye,Tt=0<(mt=Nt).length,Bt=0<rt.length,Gt=function(ie,$t,ee,Ye,yn){var Qe,Xn,tr,dr=0,_e="0",Hr=ie&&[],er=[],fs=y,Mi=ie||Bt&&m.find.TAG("*",yn),Ii=J+=null==fs?1:Math.random()||.1,cc=Mi.length;for(yn&&(y=$t==T||$t||yn);_e!==cc&&null!=(Qe=Mi[_e]);_e++){if(Bt&&Qe){for(Xn=0,$t||Qe.ownerDocument==T||(Rn(Qe),ee=!H);tr=rt[Xn++];)if(tr(Qe,$t||T,ee)){et.call(Ye,Qe);break}yn&&(J=Ii)}Tt&&((Qe=!tr&&Qe)&&dr--,ie&&Hr.push(Qe))}if(dr+=_e,Tt&&_e!==dr){for(Xn=0;tr=mt[Xn++];)tr(Hr,er,$t,ee);if(ie){if(0<dr)for(;_e--;)Hr[_e]||er[_e]||(er[_e]=kn.call(Ye));er=ja(er)}et.apply(Ye,er),yn&&!ie&&0<er.length&&1<dr+mt.length&&x.uniqueSort(Ye)}return yn&&(J=Ii,y=fs),Hr},Tt?Re(Gt):Gt))).selector=B}return se}function Vs(B,W,Z,rt){var mt,Tt,Bt,Gt,Nt,ye="function"==typeof B&&B,se=!rt&&Jr(B=ye.selector||B);if(Z=Z||[],1===se.length){if(2<(Tt=se[0]=se[0].slice(0)).length&&"ID"===(Bt=Tt[0]).type&&9===W.nodeType&&H&&m.relative[Tt[1].type]){if(!(W=(m.find.ID(Bt.matches[0].replace(qe,bn),W)||[])[0]))return Z;ye&&(W=W.parentNode),B=B.slice(Tt.shift().value.length)}for(mt=Zn.needsContext.test(B)?0:Tt.length;mt--&&!m.relative[Gt=(Bt=Tt[mt]).type];)if((Nt=m.find[Gt])&&(rt=Nt(Bt.matches[0].replace(qe,bn),je.test(Tt[0].type)&&Fa(W.parentNode)||W))){if(Tt.splice(mt,1),!(B=rt.length&&yo(Tt)))return et.apply(Z,rt),Z;break}}return(ye||Ha(B,se))(rt,W,!H,Z,!W||je.test(B)&&Fa(W.parentNode)||W),Z}vo.prototype=m.filters=m.pseudos,m.setFilters=new vo,Kt.sortStable=at.split("").sort(Te).join("")===at,Rn(),Kt.sortDetached=Oe(function(B){return 1&B.compareDocumentPosition(T.createElement("fieldset"))}),x.find=re,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,re.compile=Ha,re.select=Vs,re.setDocument=Rn,re.tokenize=Jr,re.escape=x.escapeSelector,re.getText=x.text,re.isXML=x.isXMLDoc,re.selectors=x.expr,re.support=x.support,re.uniqueSort=x.uniqueSort}();var Un=function(d,m,y){for(var w=[],N=void 0!==y;(d=d[m])&&9!==d.nodeType;)if(1===d.nodeType){if(N&&x(d).is(y))break;w.push(d)}return w},ve=function(d,m){for(var y=[];d;d=d.nextSibling)1===d.nodeType&&d!==m&&y.push(d);return y},Be=x.expr.match.needsContext,E=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function mo(d,m,y){return Pt(m)?x.grep(d,function(w,N){return!!m.call(w,N,w)!==y}):m.nodeType?x.grep(d,function(w){return w===m!==y}):"string"!=typeof m?x.grep(d,function(w){return-1<We.call(m,w)!==y}):x.filter(m,d,y)}x.filter=function(d,m,y){var w=m[0];return y&&(d=":not("+d+")"),1===m.length&&1===w.nodeType?x.find.matchesSelector(w,d)?[w]:[]:x.find.matches(d,x.grep(m,function(N){return 1===N.nodeType}))},x.fn.extend({find:function(d){var m,y,w=this.length,N=this;if("string"!=typeof d)return this.pushStack(x(d).filter(function(){for(m=0;m<w;m++)if(x.contains(N[m],this))return!0}));for(y=this.pushStack([]),m=0;m<w;m++)x.find(d,N[m],y);return 1<w?x.uniqueSort(y):y},filter:function(d){return this.pushStack(mo(this,d||[],!1))},not:function(d){return this.pushStack(mo(this,d||[],!0))},is:function(d){return!!mo(this,"string"==typeof d&&Be.test(d)?x(d):d||[],!1).length}});var _t,te=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(d,m,y){var w,N;if(!d)return this;if(y=y||_t,"string"==typeof d){if(!(w="<"===d[0]&&">"===d[d.length-1]&&3<=d.length?[null,d,null]:te.exec(d))||!w[1]&&m)return!m||m.jquery?(m||y).find(d):this.constructor(m).find(d);if(w[1]){if(x.merge(this,x.parseHTML(w[1],(m=m instanceof x?m[0]:m)&&m.nodeType?m.ownerDocument||m:Qt,!0)),E.test(w[1])&&x.isPlainObject(m))for(w in m)Pt(this[w])?this[w](m[w]):this.attr(w,m[w]);return this}return(N=Qt.getElementById(w[2]))&&(this[0]=N,this.length=1),this}return d.nodeType?(this[0]=d,this.length=1,this):Pt(d)?void 0!==y.ready?y.ready(d):d(x):x.makeArray(d,this)}).prototype=x.fn,_t=x(Qt);var ae=/^(?:parents|prev(?:Until|All))/,Ot={children:!0,contents:!0,next:!0,prev:!0};function Se(d,m){for(;(d=d[m])&&1!==d.nodeType;);return d}x.fn.extend({has:function(d){var m=x(d,this),y=m.length;return this.filter(function(){for(var w=0;w<y;w++)if(x.contains(this,m[w]))return!0})},closest:function(d,m){var y,w=0,N=this.length,T=[],R="string"!=typeof d&&x(d);if(!Be.test(d))for(;w<N;w++)for(y=this[w];y&&y!==m;y=y.parentNode)if(y.nodeType<11&&(R?-1<R.index(y):1===y.nodeType&&x.find.matchesSelector(y,d))){T.push(y);break}return this.pushStack(1<T.length?x.uniqueSort(T):T)},index:function(d){return d?"string"==typeof d?We.call(x(d),this[0]):We.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,m){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(d,m))))},addBack:function(d){return this.add(null==d?this.prevObject:this.prevObject.filter(d))}}),x.each({parent:function(d){var m=d.parentNode;return m&&11!==m.nodeType?m:null},parents:function(d){return Un(d,"parentNode")},parentsUntil:function(d,m,y){return Un(d,"parentNode",y)},next:function(d){return Se(d,"nextSibling")},prev:function(d){return Se(d,"previousSibling")},nextAll:function(d){return Un(d,"nextSibling")},prevAll:function(d){return Un(d,"previousSibling")},nextUntil:function(d,m,y){return Un(d,"nextSibling",y)},prevUntil:function(d,m,y){return Un(d,"previousSibling",y)},siblings:function(d){return ve((d.parentNode||{}).firstChild,d)},children:function(d){return ve(d.firstChild)},contents:function(d){return null!=d.contentDocument&&It(d.contentDocument)?d.contentDocument:(At(d,"template")&&(d=d.content||d),x.merge([],d.childNodes))}},function(d,m){x.fn[d]=function(y,w){var N=x.map(this,m,y);return"Until"!==d.slice(-5)&&(w=y),w&&"string"==typeof w&&(N=x.filter(w,N)),1<this.length&&(Ot[d]||x.uniqueSort(N),ae.test(d)&&N.reverse()),this.pushStack(N)}});var ne=/[^\x20\t\r\n\f]+/g;function tt(d){return d}function po(d){throw d}function Vr(d,m,y,w){var N;try{d&&Pt(N=d.promise)?N.call(d).done(m).fail(y):d&&Pt(N=d.then)?N.call(d,m,y):m.apply(void 0,[d].slice(w))}catch(T){y.apply(void 0,[T])}}x.Callbacks=function(d){var y;d="string"==typeof d?(y={},x.each(d.match(ne)||[],function(J,ot){y[ot]=!0}),y):x.extend({},d);var w,N,T,R,H=[],F=[],X=-1,et=function(){for(R=R||d.once,T=w=!0;F.length;X=-1)for(N=F.shift();++X<H.length;)!1===H[X].apply(N[0],N[1])&&d.stopOnFalse&&(X=H.length,N=!1);d.memory||(N=!1),w=!1,R&&(H=N?[]:"")},at={add:function(){return H&&(N&&!w&&(X=H.length-1,F.push(N)),function J(ot){x.each(ot,function(qt,O){Pt(O)?d.unique&&at.has(O)||H.push(O):O&&O.length&&"string"!==be(O)&&J(O)})}(arguments),N&&!w&&et()),this},remove:function(){return x.each(arguments,function(J,ot){for(var qt;-1<(qt=x.inArray(ot,H,qt));)H.splice(qt,1),qt<=X&&X--}),this},has:function(J){return J?-1<x.inArray(J,H):0<H.length},empty:function(){return H&&(H=[]),this},disable:function(){return R=F=[],H=N="",this},disabled:function(){return!H},lock:function(){return R=F=[],N||w||(H=N=""),this},locked:function(){return!!R},fireWith:function(J,ot){return R||(ot=[J,(ot=ot||[]).slice?ot.slice():ot],F.push(ot),w||et()),this},fire:function(){return at.fireWith(this,arguments),this},fired:function(){return!!T}};return at},x.extend({Deferred:function(d){var m=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],y="pending",w={state:function(){return y},always:function(){return N.done(arguments).fail(arguments),this},catch:function(T){return w.then(null,T)},pipe:function(){var T=arguments;return x.Deferred(function(R){x.each(m,function(H,F){var X=Pt(T[F[4]])&&T[F[4]];N[F[1]](function(){var et=X&&X.apply(this,arguments);et&&Pt(et.promise)?et.promise().progress(R.notify).done(R.resolve).fail(R.reject):R[F[0]+"With"](this,X?[et]:arguments)})}),T=null}).promise()},then:function(T,R,H){var F=0;function X(et,at,J,ot){return function(){var qt=this,O=arguments,le=function(){var Te,br;if(!(et<F)){if((Te=J.apply(qt,O))===at.promise())throw new TypeError("Thenable self-resolution");Pt(br=Te&&("object"==typeof Te||"function"==typeof Te)&&Te.then)?ot?br.call(Te,X(F,at,tt,ot),X(F,at,po,ot)):(F++,br.call(Te,X(F,at,tt,ot),X(F,at,po,ot),X(F,at,tt,at.notifyWith))):(J!==tt&&(qt=void 0,O=[Te]),(ot||at.resolveWith)(qt,O))}},Ue=ot?le:function(){try{le()}catch(Te){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(Te,Ue.error),F<=et+1&&(J!==po&&(qt=void 0,O=[Te]),at.rejectWith(qt,O))}};et?Ue():(x.Deferred.getErrorHook?Ue.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(Ue.error=x.Deferred.getStackHook()),yt.setTimeout(Ue))}}return x.Deferred(function(et){m[0][3].add(X(0,et,Pt(H)?H:tt,et.notifyWith)),m[1][3].add(X(0,et,Pt(T)?T:tt)),m[2][3].add(X(0,et,Pt(R)?R:po))}).promise()},promise:function(T){return null!=T?x.extend(T,w):w}},N={};return x.each(m,function(T,R){var H=R[2],F=R[5];w[R[1]]=H.add,F&&H.add(function(){y=F},m[3-T][2].disable,m[3-T][3].disable,m[0][2].lock,m[0][3].lock),H.add(R[3].fire),N[R[0]]=function(){return N[R[0]+"With"](this===N?void 0:this,arguments),this},N[R[0]+"With"]=H.fireWith}),w.promise(N),d&&d.call(N,N),N},when:function(d){var m=arguments.length,y=m,w=Array(y),N=oe.call(arguments),T=x.Deferred(),R=function(H){return function(F){w[H]=this,N[H]=1<arguments.length?oe.call(arguments):F,--m||T.resolveWith(w,N)}};if(m<=1&&(Vr(d,T.done(R(y)).resolve,T.reject,!m),"pending"===T.state()||Pt(N[y]&&N[y].then)))return T.then();for(;y--;)Vr(N[y],R(y),T.reject);return T.promise()}});var Ht=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(d,m){yt.console&&yt.console.warn&&d&&Ht.test(d.name)&&yt.console.warn("jQuery.Deferred exception: "+d.message,d.stack,m)},x.readyException=function(d){yt.setTimeout(function(){throw d})};var Lo=x.Deferred();function pn(){Qt.removeEventListener("DOMContentLoaded",pn),yt.removeEventListener("load",pn),x.ready()}x.fn.ready=function(d){return Lo.then(d).catch(function(m){x.readyException(m)}),this},x.extend({isReady:!1,readyWait:1,ready:function(d){(!0===d?--x.readyWait:x.isReady)||(x.isReady=!0)!==d&&0<--x.readyWait||Lo.resolveWith(Qt,[x])}}),x.ready.then=Lo.then,"complete"===Qt.readyState||"loading"!==Qt.readyState&&!Qt.documentElement.doScroll?yt.setTimeout(x.ready):(Qt.addEventListener("DOMContentLoaded",pn),yt.addEventListener("load",pn));var Dr=function(d,m,y,w,N,T,R){var H=0,F=d.length,X=null==y;if("object"===be(y))for(H in N=!0,y)Dr(d,m,H,y[H],!0,T,R);else if(void 0!==w&&(N=!0,Pt(w)||(R=!0),X&&(R?(m.call(d,w),m=null):(X=m,m=function(et,at,J){return X.call(x(et),J)})),m))for(;H<F;H++)m(d[H],y,R?w:w.call(d[H],H,m(d[H],y)));return N?d:X?m.call(d):F?m(d[0],y):T},He=/^-ms-/,Ls=/-([a-z])/g;function Gl(d,m){return m.toUpperCase()}function Ve(d){return d.replace(He,"ms-").replace(Ls,Gl)}var ar=function(d){return 1===d.nodeType||9===d.nodeType||!+d.nodeType};function Kr(){this.expando=x.expando+Kr.uid++}Kr.uid=1,Kr.prototype={cache:function(d){var m=d[this.expando];return m||(m={},ar(d)&&(d.nodeType?d[this.expando]=m:Object.defineProperty(d,this.expando,{value:m,configurable:!0}))),m},set:function(d,m,y){var w,N=this.cache(d);if("string"==typeof m)N[Ve(m)]=y;else for(w in m)N[Ve(w)]=m[w];return N},get:function(d,m){return void 0===m?this.cache(d):d[this.expando]&&d[this.expando][Ve(m)]},access:function(d,m,y){return void 0===m||m&&"string"==typeof m&&void 0===y?this.get(d,m):(this.set(d,m,y),void 0!==y?y:m)},remove:function(d,m){var y,w=d[this.expando];if(void 0!==w){if(void 0!==m)for((y=(m=Array.isArray(m)?m.map(Ve):(m=Ve(m))in w?[m]:m.match(ne)||[]).length);y--;)delete w[m[y]];(void 0===m||x.isEmptyObject(w))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var m=d[this.expando];return void 0!==m&&!x.isEmptyObject(m)}};var Jt=new Kr,En=new Kr,Mo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Na=/[A-Z]/g;function Nn(d,m,y){var w,N;if(void 0===y&&1===d.nodeType)if(w="data-"+m.replace(Na,"-$&").toLowerCase(),"string"==typeof(y=d.getAttribute(w))){try{y="true"===(N=y)||"false"!==N&&("null"===N?null:N===+N+""?+N:Mo.test(N)?JSON.parse(N):N)}catch{}En.set(d,m,y)}else y=void 0;return y}x.extend({hasData:function(d){return En.hasData(d)||Jt.hasData(d)},data:function(d,m,y){return En.access(d,m,y)},removeData:function(d,m){En.remove(d,m)},_data:function(d,m,y){return Jt.access(d,m,y)},_removeData:function(d,m){Jt.remove(d,m)}}),x.fn.extend({data:function(d,m){var y,w,N,T=this[0],R=T&&T.attributes;if(void 0===d){if(this.length&&(N=En.get(T),1===T.nodeType&&!Jt.get(T,"hasDataAttrs"))){for(y=R.length;y--;)R[y]&&0===(w=R[y].name).indexOf("data-")&&(w=Ve(w.slice(5)),Nn(T,w,N[w]));Jt.set(T,"hasDataAttrs",!0)}return N}return"object"==typeof d?this.each(function(){En.set(this,d)}):Dr(this,function(H){var F;if(T&&void 0===H)return void 0!==(F=En.get(T,d))||void 0!==(F=Nn(T,d))?F:void 0;this.each(function(){En.set(this,d,H)})},null,m,1<arguments.length,null,!0)},removeData:function(d){return this.each(function(){En.remove(this,d)})}}),x.extend({queue:function(d,m,y){var w;if(d)return w=Jt.get(d,m=(m||"fx")+"queue"),y&&(!w||Array.isArray(y)?w=Jt.access(d,m,x.makeArray(y)):w.push(y)),w||[]},dequeue:function(d,m){var y=x.queue(d,m=m||"fx"),w=y.length,N=y.shift(),T=x._queueHooks(d,m);"inprogress"===N&&(N=y.shift(),w--),N&&("fx"===m&&y.unshift("inprogress"),delete T.stop,N.call(d,function(){x.dequeue(d,m)},T)),!w&&T&&T.empty.fire()},_queueHooks:function(d,m){var y=m+"queueHooks";return Jt.get(d,y)||Jt.access(d,y,{empty:x.Callbacks("once memory").add(function(){Jt.remove(d,[m+"queue",y])})})}}),x.fn.extend({queue:function(d,m){var y=2;return"string"!=typeof d&&(m=d,d="fx",y--),arguments.length<y?x.queue(this[0],d):void 0===m?this:this.each(function(){var w=x.queue(this,d,m);x._queueHooks(this,d),"fx"===d&&"inprogress"!==w[0]&&x.dequeue(this,d)})},dequeue:function(d){return this.each(function(){x.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,m){var y,w=1,N=x.Deferred(),T=this,R=this.length,H=function(){--w||N.resolveWith(T,[T])};for("string"!=typeof d&&(m=d,d=void 0),d=d||"fx";R--;)(y=Jt.get(T[R],d+"queueHooks"))&&y.empty&&(w++,y.empty.add(H));return H(),N.promise(m)}});var go=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,un=new RegExp("^(?:([+-])=|)("+go+")([a-z%]*)$","i"),qn=["Top","Right","Bottom","Left"],Ke=Qt.documentElement,os=function(d){return x.contains(d.ownerDocument,d)},Ce={composed:!0};Ke.getRootNode&&(os=function(d){return x.contains(d.ownerDocument,d)||d.getRootNode(Ce)===d.ownerDocument});var Io=function(d,m){return"none"===(d=m||d).style.display||""===d.style.display&&os(d)&&"none"===x.css(d,"display")};function Yl(d,m,y,w){var N,T,R=20,H=w?function(){return w.cur()}:function(){return x.css(d,m,"")},F=H(),X=y&&y[3]||(x.cssNumber[m]?"":"px"),et=d.nodeType&&(x.cssNumber[m]||"px"!==X&&+F)&&un.exec(x.css(d,m));if(et&&et[3]!==X){for(X=X||et[3],et=+(F/=2)||1;R--;)x.style(d,m,et+X),(1-T)*(1-(T=H()/F||.5))<=0&&(R=0),et/=T;x.style(d,m,(et*=2)+X),y=y||[]}return y&&(et=+et||+F||0,N=y[1]?et+(y[1]+1)*y[2]:+y[2],w&&(w.unit=X,w.start=et,w.end=N)),N}var _a={};function Fo(d,m){for(var y,w,N,T,R,H,F,X=[],et=0,at=d.length;et<at;et++)(w=d[et]).style&&(y=w.style.display,m?("none"===y&&(X[et]=Jt.get(w,"display")||null,X[et]||(w.style.display="")),""===w.style.display&&Io(w)&&(X[et]=(F=R=T=void 0,R=(N=w).ownerDocument,(F=_a[H=N.nodeName])||(T=R.body.appendChild(R.createElement(H)),F=x.css(T,"display"),T.parentNode.removeChild(T),"none"===F&&(F="block"),_a[H]=F)))):"none"!==y&&(X[et]="none",Jt.set(w,"display",y)));for(et=0;et<at;et++)null!=X[et]&&(d[et].style.display=X[et]);return d}x.fn.extend({show:function(){return Fo(this,!0)},hide:function(){return Fo(this)},toggle:function(d){return"boolean"==typeof d?d?this.show():this.hide():this.each(function(){Io(this)?x(this).show():x(this).hide()})}});var hr,ss,jo=/^(?:checkbox|radio)$/i,ke=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Zt=/^$|^module$|\/(?:java|ecma)script/i;hr=Qt.createDocumentFragment().appendChild(Qt.createElement("div")),(ss=Qt.createElement("input")).setAttribute("type","radio"),ss.setAttribute("checked","checked"),ss.setAttribute("name","t"),hr.appendChild(ss),Kt.checkClone=hr.cloneNode(!0).cloneNode(!0).lastChild.checked,hr.innerHTML="<textarea>x</textarea>",Kt.noCloneChecked=!!hr.cloneNode(!0).lastChild.defaultValue,hr.innerHTML="<option></option>",Kt.option=!!hr.lastChild;var gn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Mn(d,m){var y;return y=typeof d.getElementsByTagName<"u"?d.getElementsByTagName(m||"*"):typeof d.querySelectorAll<"u"?d.querySelectorAll(m||"*"):[],void 0===m||m&&At(d,m)?x.merge([d],y):y}function Aa(d,m){for(var y=0,w=d.length;y<w;y++)Jt.set(d[y],"globalEval",!m||Jt.get(m[y],"globalEval"))}gn.tbody=gn.tfoot=gn.colgroup=gn.caption=gn.thead,gn.th=gn.td,Kt.option||(gn.optgroup=gn.option=[1,"<select multiple='multiple'>","</select>"]);var wi=/<|&#?\w+;/;function Ms(d,m,y,w,N){for(var T,R,H,F,X,et,at=m.createDocumentFragment(),J=[],ot=0,qt=d.length;ot<qt;ot++)if((T=d[ot])||0===T)if("object"===be(T))x.merge(J,T.nodeType?[T]:T);else if(wi.test(T)){for(R=R||at.appendChild(m.createElement("div")),H=(ke.exec(T)||["",""])[1].toLowerCase(),R.innerHTML=(F=gn[H]||gn._default)[1]+x.htmlPrefilter(T)+F[2],et=F[0];et--;)R=R.lastChild;x.merge(J,R.childNodes),(R=at.firstChild).textContent=""}else J.push(m.createTextNode(T));for(at.textContent="",ot=0;T=J[ot++];)if(w&&-1<x.inArray(T,w))N&&N.push(T);else if(X=os(T),R=Mn(at.appendChild(T),"script"),X&&Aa(R),y)for(et=0;T=R[et++];)Zt.test(T.type||"")&&y.push(T);return at}var Ta=/^([^.]*)(?:\.(.+)|)/;function Br(){return!0}function Xr(){return!1}function Ra(d,m,y,w,N,T){var R,H;if("object"==typeof m){for(H in"string"!=typeof y&&(w=w||y,y=void 0),m)Ra(d,H,y,w,m[H],T);return d}if(null==w&&null==N?(N=y,w=y=void 0):null==N&&("string"==typeof y?(N=w,w=void 0):(N=w,w=y,y=void 0)),!1===N)N=Xr;else if(!N)return d;return 1===T&&(R=N,(N=function(F){return x().off(F),R.apply(this,arguments)}).guid=R.guid||(R.guid=x.guid++)),d.each(function(){x.event.add(this,m,N,w,y)})}function Pr(d,m,y){y?(Jt.set(d,m,!1),x.event.add(d,m,{namespace:!1,handler:function(w){var N,T=Jt.get(this,m);if(1&w.isTrigger&&this[m]){if(T)(x.event.special[m]||{}).delegateType&&w.stopPropagation();else if(T=oe.call(arguments),Jt.set(this,m,T),this[m](),N=Jt.get(this,m),Jt.set(this,m,!1),T!==N)return w.stopImmediatePropagation(),w.preventDefault(),N}else T&&(Jt.set(this,m,x.event.trigger(T[0],T.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=Br)}})):void 0===Jt.get(d,m)&&x.event.add(d,m,Br)}x.event={global:{},add:function(d,m,y,w,N){var T,R,H,F,X,et,at,J,ot,qt,O,le=Jt.get(d);if(ar(d))for(y.handler&&(y=(T=y).handler,N=T.selector),N&&x.find.matchesSelector(Ke,N),y.guid||(y.guid=x.guid++),(F=le.events)||(F=le.events=Object.create(null)),(R=le.handle)||(R=le.handle=function(Ue){return typeof x<"u"&&x.event.triggered!==Ue.type?x.event.dispatch.apply(d,arguments):void 0}),X=(m=(m||"").match(ne)||[""]).length;X--;)ot=O=(H=Ta.exec(m[X])||[])[1],qt=(H[2]||"").split(".").sort(),ot&&(at=x.event.special[ot]||{},at=x.event.special[ot=(N?at.delegateType:at.bindType)||ot]||{},et=x.extend({type:ot,origType:O,data:w,handler:y,guid:y.guid,selector:N,needsContext:N&&x.expr.match.needsContext.test(N),namespace:qt.join(".")},T),(J=F[ot])||((J=F[ot]=[]).delegateCount=0,at.setup&&!1!==at.setup.call(d,w,qt,R)||d.addEventListener&&d.addEventListener(ot,R)),at.add&&(at.add.call(d,et),et.handler.guid||(et.handler.guid=y.guid)),N?J.splice(J.delegateCount++,0,et):J.push(et),x.event.global[ot]=!0)},remove:function(d,m,y,w,N){var T,R,H,F,X,et,at,J,ot,qt,O,le=Jt.hasData(d)&&Jt.get(d);if(le&&(F=le.events)){for(X=(m=(m||"").match(ne)||[""]).length;X--;)if(ot=O=(H=Ta.exec(m[X])||[])[1],qt=(H[2]||"").split(".").sort(),ot){for(at=x.event.special[ot]||{},J=F[ot=(w?at.delegateType:at.bindType)||ot]||[],H=H[2]&&new RegExp("(^|\\.)"+qt.join("\\.(?:.*\\.|)")+"(\\.|$)"),R=T=J.length;T--;)et=J[T],!N&&O!==et.origType||y&&y.guid!==et.guid||H&&!H.test(et.namespace)||w&&w!==et.selector&&("**"!==w||!et.selector)||(J.splice(T,1),et.selector&&J.delegateCount--,at.remove&&at.remove.call(d,et));R&&!J.length&&(at.teardown&&!1!==at.teardown.call(d,qt,le.handle)||x.removeEvent(d,ot,le.handle),delete F[ot])}else for(ot in F)x.event.remove(d,ot+m[X],y,w,!0);x.isEmptyObject(F)&&Jt.remove(d,"handle events")}},dispatch:function(d){var m,y,w,N,T,R,H=new Array(arguments.length),F=x.event.fix(d),X=(Jt.get(this,"events")||Object.create(null))[F.type]||[],et=x.event.special[F.type]||{};for(H[0]=F,m=1;m<arguments.length;m++)H[m]=arguments[m];if(F.delegateTarget=this,!et.preDispatch||!1!==et.preDispatch.call(this,F)){for(R=x.event.handlers.call(this,F,X),m=0;(N=R[m++])&&!F.isPropagationStopped();)for(F.currentTarget=N.elem,y=0;(T=N.handlers[y++])&&!F.isImmediatePropagationStopped();)F.rnamespace&&!1!==T.namespace&&!F.rnamespace.test(T.namespace)||(F.handleObj=T,F.data=T.data,void 0!==(w=((x.event.special[T.origType]||{}).handle||T.handler).apply(N.elem,H))&&!1===(F.result=w)&&(F.preventDefault(),F.stopPropagation()));return et.postDispatch&&et.postDispatch.call(this,F),F.result}},handlers:function(d,m){var y,w,N,T,R,H=[],F=m.delegateCount,X=d.target;if(F&&X.nodeType&&!("click"===d.type&&1<=d.button))for(;X!==this;X=X.parentNode||this)if(1===X.nodeType&&("click"!==d.type||!0!==X.disabled)){for(T=[],R={},y=0;y<F;y++)void 0===R[N=(w=m[y]).selector+" "]&&(R[N]=w.needsContext?-1<x(N,this).index(X):x.find(N,this,null,[X]).length),R[N]&&T.push(w);T.length&&H.push({elem:X,handlers:T})}return X=this,F<m.length&&H.push({elem:X,handlers:m.slice(F)}),H},addProp:function(d,m){Object.defineProperty(x.Event.prototype,d,{enumerable:!0,configurable:!0,get:Pt(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(y){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(d){return d[x.expando]?d:new x.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var m=this||d;return jo.test(m.type)&&m.click&&At(m,"input")&&Pr(m,"click",!0),!1},trigger:function(d){var m=this||d;return jo.test(m.type)&&m.click&&At(m,"input")&&Pr(m,"click"),!0},_default:function(d){var m=d.target;return jo.test(m.type)&&m.click&&At(m,"input")&&Jt.get(m,"click")||At(m,"a")}},beforeunload:{postDispatch:function(d){void 0!==d.result&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}},x.removeEvent=function(d,m,y){d.removeEventListener&&d.removeEventListener(m,y)},x.Event=function(d,m){if(!(this instanceof x.Event))return new x.Event(d,m);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||void 0===d.defaultPrevented&&!1===d.returnValue?Br:Xr,this.target=d.target&&3===d.target.nodeType?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,m&&x.extend(this,m),this.timeStamp=d&&d.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Xr,isPropagationStopped:Xr,isImmediatePropagationStopped:Xr,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=Br,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=Br,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=Br,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(d,m){function y(w){if(Qt.documentMode){var N=Jt.get(this,"handle"),T=x.event.fix(w);T.type="focusin"===w.type?"focus":"blur",T.isSimulated=!0,N(w),T.target===T.currentTarget&&N(T)}else x.event.simulate(m,w.target,x.event.fix(w))}x.event.special[d]={setup:function(){var w;if(Pr(this,d,!0),!Qt.documentMode)return!1;(w=Jt.get(this,m))||this.addEventListener(m,y),Jt.set(this,m,(w||0)+1)},trigger:function(){return Pr(this,d),!0},teardown:function(){var w;if(!Qt.documentMode)return!1;(w=Jt.get(this,m)-1)?Jt.set(this,m,w):(this.removeEventListener(m,y),Jt.remove(this,m))},_default:function(w){return Jt.get(w.target,d)},delegateType:m},x.event.special[m]={setup:function(){var w=this.ownerDocument||this.document||this,N=Qt.documentMode?this:w,T=Jt.get(N,m);T||(Qt.documentMode?this.addEventListener(m,y):w.addEventListener(d,y,!0)),Jt.set(N,m,(T||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,N=Qt.documentMode?this:w,T=Jt.get(N,m)-1;T?Jt.set(N,m,T):(Qt.documentMode?this.removeEventListener(m,y):w.removeEventListener(d,y,!0),Jt.remove(N,m))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,m){x.event.special[d]={delegateType:m,bindType:m,handle:function(y){var w,N=y.relatedTarget,T=y.handleObj;return N&&(N===this||x.contains(this,N))||(y.type=T.origType,w=T.handler.apply(this,arguments),y.type=m),w}}}),x.fn.extend({on:function(d,m,y,w){return Ra(this,d,m,y,w)},one:function(d,m,y,w){return Ra(this,d,m,y,w,1)},off:function(d,m,y){var w,N;if(d&&d.preventDefault&&d.handleObj)return w=d.handleObj,x(d.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof d){for(N in d)this.off(N,m,d[N]);return this}return!1!==m&&"function"!=typeof m||(y=m,m=void 0),!1===y&&(y=Xr),this.each(function(){x.event.remove(this,d,y,m)})}});var zo=/<script|<style|<link/i,Ql=/checked\s*(?:[^=]|=\s*.checked.)/i,Si=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function as(d,m){return At(d,"table")&&At(11!==m.nodeType?m:m.firstChild,"tr")&&x(d).children("tbody")[0]||d}function Jl(d){return d.type=(null!==d.getAttribute("type"))+"/"+d.type,d}function Zl(d){return"true/"===(d.type||"").slice(0,5)?d.type=d.type.slice(5):d.removeAttribute("type"),d}function ki(d,m){var y,w,N,T,R,H;if(1===m.nodeType){if(Jt.hasData(d)&&(H=Jt.get(d).events))for(N in Jt.remove(m,"handle events"),H)for(y=0,w=H[N].length;y<w;y++)x.event.add(m,N,H[N][y]);En.hasData(d)&&(T=En.access(d),R=x.extend({},T),En.set(m,R))}}function Fe(d,m,y,w){m=Ie(m);var N,T,R,H,F,X,et=0,at=d.length,J=at-1,ot=m[0],qt=Pt(ot);if(qt||1<at&&"string"==typeof ot&&!Kt.checkClone&&Ql.test(ot))return d.each(function(O){var le=d.eq(O);qt&&(m[0]=ot.call(this,O,le.html())),Fe(le,m,y,w)});if(at&&(T=(N=Ms(m,d[0].ownerDocument,!1,d,w)).firstChild,1===N.childNodes.length&&(N=T),T||w)){for(H=(R=x.map(Mn(N,"script"),Jl)).length;et<at;et++)F=N,et!==J&&(F=x.clone(F,!0,!0),H&&x.merge(R,Mn(F,"script"))),y.call(d[et],F,et);if(H)for(X=R[R.length-1].ownerDocument,x.map(R,Zl),et=0;et<H;et++)Zt.test((F=R[et]).type||"")&&!Jt.access(F,"globalEval")&&x.contains(X,F)&&(F.src&&"module"!==(F.type||"").toLowerCase()?x._evalUrl&&!F.noModule&&x._evalUrl(F.src,{nonce:F.nonce||F.getAttribute("nonce")},X):De(F.textContent.replace(Si,""),F,X))}return d}function rn(d,m,y){for(var w,N=m?x.filter(m,d):d,T=0;null!=(w=N[T]);T++)y||1!==w.nodeType||x.cleanData(Mn(w)),w.parentNode&&(y&&os(w)&&Aa(Mn(w,"script")),w.parentNode.removeChild(w));return d}x.extend({htmlPrefilter:function(d){return d},clone:function(d,m,y){var w,N,T,R,H,F,X,et=d.cloneNode(!0),at=os(d);if(!(Kt.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||x.isXMLDoc(d)))for(R=Mn(et),w=0,N=(T=Mn(d)).length;w<N;w++)H=T[w],"input"===(X=(F=R[w]).nodeName.toLowerCase())&&jo.test(H.type)?F.checked=H.checked:"input"!==X&&"textarea"!==X||(F.defaultValue=H.defaultValue);if(m)if(y)for(T=T||Mn(d),R=R||Mn(et),w=0,N=T.length;w<N;w++)ki(T[w],R[w]);else ki(d,et);return 0<(R=Mn(et,"script")).length&&Aa(R,!at&&Mn(d,"script")),et},cleanData:function(d){for(var m,y,w,N=x.event.special,T=0;void 0!==(y=d[T]);T++)if(ar(y)){if(m=y[Jt.expando]){if(m.events)for(w in m.events)N[w]?x.event.remove(y,w):x.removeEvent(y,w,m.handle);y[Jt.expando]=void 0}y[En.expando]&&(y[En.expando]=void 0)}}}),x.fn.extend({detach:function(d){return rn(this,d,!0)},remove:function(d){return rn(this,d)},text:function(d){return Dr(this,function(m){return void 0===m?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=m)})},null,d,arguments.length)},append:function(){return Fe(this,arguments,function(d){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||as(this,d).appendChild(d)})},prepend:function(){return Fe(this,arguments,function(d){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var m=as(this,d);m.insertBefore(d,m.firstChild)}})},before:function(){return Fe(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return Fe(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,m=0;null!=(d=this[m]);m++)1===d.nodeType&&(x.cleanData(Mn(d,!1)),d.textContent="");return this},clone:function(d,m){return d=null!=d&&d,m=m??d,this.map(function(){return x.clone(this,d,m)})},html:function(d){return Dr(this,function(m){var y=this[0]||{},w=0,N=this.length;if(void 0===m&&1===y.nodeType)return y.innerHTML;if("string"==typeof m&&!zo.test(m)&&!gn[(ke.exec(m)||["",""])[1].toLowerCase()]){m=x.htmlPrefilter(m);try{for(;w<N;w++)1===(y=this[w]||{}).nodeType&&(x.cleanData(Mn(y,!1)),y.innerHTML=m);y=0}catch{}}y&&this.empty().append(m)},null,d,arguments.length)},replaceWith:function(){var d=[];return Fe(this,arguments,function(m){var y=this.parentNode;x.inArray(this,d)<0&&(x.cleanData(Mn(this)),y&&y.replaceChild(m,this))},d)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,m){x.fn[d]=function(y){for(var w,N=[],T=x(y),R=T.length-1,H=0;H<=R;H++)w=H===R?this:this.clone(!0),x(T[H])[m](w),wn.apply(N,w.get());return this.pushStack(N)}});var Is=new RegExp("^("+go+")(?!px)[a-z%]+$","i"),Fs=/^--/,Gr=function(d){var m=d.ownerDocument.defaultView;return m&&m.opener||(m=yt),m.getComputedStyle(d)},tc=function(d,m,y){var w,N,T={};for(N in m)T[N]=d.style[N],d.style[N]=m[N];for(N in w=y.call(d),m)d.style[N]=T[N];return w},ec=new RegExp(qn.join("|"),"i");function $n(d,m,y){var w,N,T,R,H=Fs.test(m),F=d.style;return(y=y||Gr(d))&&(R=y.getPropertyValue(m)||y[m],H&&R&&(R=R.replace(Wr,"$1")||void 0),""!==R||os(d)||(R=x.style(d,m)),!Kt.pixelBoxStyles()&&Is.test(R)&&ec.test(m)&&(w=F.width,N=F.minWidth,T=F.maxWidth,F.minWidth=F.maxWidth=F.width=R,R=y.width,F.width=w,F.minWidth=N,F.maxWidth=T)),void 0!==R?R+"":R}function is(d,m){return{get:function(){if(!d())return(this.get=m).apply(this,arguments);delete this.get}}}!function(){function d(){if(X){F.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",X.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ke.appendChild(F).appendChild(X);var et=yt.getComputedStyle(X);y="1%"!==et.top,H=12===m(et.marginLeft),X.style.right="60%",T=36===m(et.right),w=36===m(et.width),X.style.position="absolute",N=12===m(X.offsetWidth/3),Ke.removeChild(F),X=null}}function m(et){return Math.round(parseFloat(et))}var y,w,N,T,R,H,F=Qt.createElement("div"),X=Qt.createElement("div");X.style&&(X.style.backgroundClip="content-box",X.cloneNode(!0).style.backgroundClip="",Kt.clearCloneStyle="content-box"===X.style.backgroundClip,x.extend(Kt,{boxSizingReliable:function(){return d(),w},pixelBoxStyles:function(){return d(),T},pixelPosition:function(){return d(),y},reliableMarginLeft:function(){return d(),H},scrollboxSize:function(){return d(),N},reliableTrDimensions:function(){var et,at,J,ot;return null==R&&(et=Qt.createElement("table"),at=Qt.createElement("tr"),J=Qt.createElement("div"),et.style.cssText="position:absolute;left:-11111px;border-collapse:separate",at.style.cssText="box-sizing:content-box;border:1px solid",at.style.height="1px",J.style.height="9px",J.style.display="block",Ke.appendChild(et).appendChild(at).appendChild(J),ot=yt.getComputedStyle(at),R=parseInt(ot.height,10)+parseInt(ot.borderTopWidth,10)+parseInt(ot.borderBottomWidth,10)===at.offsetHeight,Ke.removeChild(et)),R}}))}();var js=["Webkit","Moz","ms"],Oa=Qt.createElement("div").style,Lr={};function Ei(d){return x.cssProps[d]||Lr[d]||(d in Oa?d:Lr[d]=function(y){for(var w=y[0].toUpperCase()+y.slice(1),N=js.length;N--;)if((y=js[N]+w)in Oa)return y}(d)||d)}var su=/^(none|table(?!-c[ea]).+)/,nc={position:"absolute",visibility:"hidden",display:"block"},Ni={letterSpacing:"0",fontWeight:"400"};function _i(d,m,y){var w=un.exec(m);return w?Math.max(0,w[2]-(y||0))+(w[3]||"px"):m}function Da(d,m,y,w,N,T){var R="width"===m?1:0,H=0,F=0,X=0;if(y===(w?"border":"content"))return 0;for(;R<4;R+=2)"margin"===y&&(X+=x.css(d,y+qn[R],!0,N)),w?("content"===y&&(F-=x.css(d,"padding"+qn[R],!0,N)),"margin"!==y&&(F-=x.css(d,"border"+qn[R]+"Width",!0,N))):(F+=x.css(d,"padding"+qn[R],!0,N),"padding"!==y?F+=x.css(d,"border"+qn[R]+"Width",!0,N):H+=x.css(d,"border"+qn[R]+"Width",!0,N));return!w&&0<=T&&(F+=Math.max(0,Math.ceil(d["offset"+m[0].toUpperCase()+m.slice(1)]-T-F-H-.5))||0),F+X}function Ai(d,m,y){var w=Gr(d),N=(!Kt.boxSizingReliable()||y)&&"border-box"===x.css(d,"boxSizing",!1,w),T=N,R=$n(d,m,w),H="offset"+m[0].toUpperCase()+m.slice(1);if(Is.test(R)){if(!y)return R;R="auto"}return(!Kt.boxSizingReliable()&&N||!Kt.reliableTrDimensions()&&At(d,"tr")||"auto"===R||!parseFloat(R)&&"inline"===x.css(d,"display",!1,w))&&d.getClientRects().length&&(N="border-box"===x.css(d,"boxSizing",!1,w),(T=H in d)&&(R=d[H])),(R=parseFloat(R)||0)+Da(d,m,y||(N?"border":"content"),T,w,R)+"px"}function ir(d,m,y,w,N){return new ir.prototype.init(d,m,y,w,N)}x.extend({cssHooks:{opacity:{get:function(d,m){if(m){var y=$n(d,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,m,y,w){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var N,T,R,H=Ve(m),F=Fs.test(m),X=d.style;if(F||(m=Ei(H)),R=x.cssHooks[m]||x.cssHooks[H],void 0===y)return R&&"get"in R&&void 0!==(N=R.get(d,!1,w))?N:X[m];"string"==(T=typeof y)&&(N=un.exec(y))&&N[1]&&(y=Yl(d,m,N),T="number"),null!=y&&y==y&&("number"!==T||F||(y+=N&&N[3]||(x.cssNumber[H]?"":"px")),Kt.clearCloneStyle||""!==y||0!==m.indexOf("background")||(X[m]="inherit"),R&&"set"in R&&void 0===(y=R.set(d,y,w))||(F?X.setProperty(m,y):X[m]=y))}},css:function(d,m,y,w){var N,T,R,H=Ve(m);return Fs.test(m)||(m=Ei(H)),(R=x.cssHooks[m]||x.cssHooks[H])&&"get"in R&&(N=R.get(d,!0,y)),void 0===N&&(N=$n(d,m,w)),"normal"===N&&m in Ni&&(N=Ni[m]),""===y||y?(T=parseFloat(N),!0===y||isFinite(T)?T||0:N):N}}),x.each(["height","width"],function(d,m){x.cssHooks[m]={get:function(y,w,N){if(w)return!su.test(x.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?Ai(y,m,N):tc(y,nc,function(){return Ai(y,m,N)})},set:function(y,w,N){var T,R=Gr(y),H=!Kt.scrollboxSize()&&"absolute"===R.position,F=(H||N)&&"border-box"===x.css(y,"boxSizing",!1,R),X=N?Da(y,m,N,F,R):0;return F&&H&&(X-=Math.ceil(y["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(R[m])-Da(y,m,"border",!1,R)-.5)),X&&(T=un.exec(w))&&"px"!==(T[3]||"px")&&(y.style[m]=w,w=x.css(y,m)),_i(0,w,X)}}}),x.cssHooks.marginLeft=is(Kt.reliableMarginLeft,function(d,m){if(m)return(parseFloat($n(d,"marginLeft"))||d.getBoundingClientRect().left-tc(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(d,m){x.cssHooks[d+m]={expand:function(y){for(var w=0,N={},T="string"==typeof y?y.split(" "):[y];w<4;w++)N[d+qn[w]+m]=T[w]||T[w-2]||T[0];return N}},"margin"!==d&&(x.cssHooks[d+m].set=_i)}),x.fn.extend({css:function(d,m){return Dr(this,function(y,w,N){var T,R,H={},F=0;if(Array.isArray(w)){for(T=Gr(y),R=w.length;F<R;F++)H[w[F]]=x.css(y,w[F],!1,T);return H}return void 0!==N?x.style(y,w,N):x.css(y,w)},d,m,1<arguments.length)}}),((x.Tween=ir).prototype={constructor:ir,init:function(d,m,y,w,N,T){this.elem=d,this.prop=y,this.easing=N||x.easing._default,this.options=m,this.start=this.now=this.cur(),this.end=w,this.unit=T||(x.cssNumber[y]?"":"px")},cur:function(){var d=ir.propHooks[this.prop];return d&&d.get?d.get(this):ir.propHooks._default.get(this)},run:function(d){var m,y=ir.propHooks[this.prop];return this.pos=m=this.options.duration?x.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):d,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):ir.propHooks._default.set(this),this}}).init.prototype=ir.prototype,(ir.propHooks={_default:{get:function(d){var m;return 1!==d.elem.nodeType||null!=d.elem[d.prop]&&null==d.elem.style[d.prop]?d.elem[d.prop]:(m=x.css(d.elem,d.prop,""))&&"auto"!==m?m:0},set:function(d){x.fx.step[d.prop]?x.fx.step[d.prop](d):1!==d.elem.nodeType||!x.cssHooks[d.prop]&&null==d.elem.style[Ei(d.prop)]?d.elem[d.prop]=d.now:x.style(d.elem,d.prop,d.now+d.unit)}}}).scrollTop=ir.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},x.easing={linear:function(d){return d},swing:function(d){return.5-Math.cos(d*Math.PI)/2},_default:"swing"},x.fx=ir.prototype.init,x.fx.step={};var Ho,Ba,ls,Ti,rc=/^(?:toggle|show|hide)$/,oc=/queueHooks$/;function Pa(){Ba&&(!1===Qt.hidden&&yt.requestAnimationFrame?yt.requestAnimationFrame(Pa):yt.setTimeout(Pa,x.fx.interval),x.fx.tick())}function Ri(){return yt.setTimeout(function(){Ho=void 0}),Ho=Date.now()}function zs(d,m){var y,w=0,N={height:d};for(m=m?1:0;w<4;w+=2-m)N["margin"+(y=qn[w])]=N["padding"+y]=d;return m&&(N.opacity=N.width=d),N}function Oi(d,m,y){for(var w,N=(lr.tweeners[m]||[]).concat(lr.tweeners["*"]),T=0,R=N.length;T<R;T++)if(w=N[T].call(y,m,d))return w}function lr(d,m,y){var w,N,T=0,R=lr.prefilters.length,H=x.Deferred().always(function(){delete F.elem}),F=function(){if(N)return!1;for(var at=Ho||Ri(),J=Math.max(0,X.startTime+X.duration-at),ot=1-(J/X.duration||0),qt=0,O=X.tweens.length;qt<O;qt++)X.tweens[qt].run(ot);return H.notifyWith(d,[X,ot,J]),ot<1&&O?J:(O||H.notifyWith(d,[X,1,0]),H.resolveWith(d,[X]),!1)},X=H.promise({elem:d,props:x.extend({},m),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},y),originalProperties:m,originalOptions:y,startTime:Ho||Ri(),duration:y.duration,tweens:[],createTween:function(at,J){var ot=x.Tween(d,X.opts,at,J,X.opts.specialEasing[at]||X.opts.easing);return X.tweens.push(ot),ot},stop:function(at){var J=0,ot=at?X.tweens.length:0;if(N)return this;for(N=!0;J<ot;J++)X.tweens[J].run(1);return at?(H.notifyWith(d,[X,1,0]),H.resolveWith(d,[X,at])):H.rejectWith(d,[X,at]),this}}),et=X.props;for(function(at,J){var ot,qt,O,le,Ue;for(ot in at)if(O=J[qt=Ve(ot)],le=at[ot],Array.isArray(le)&&(O=le[1],le=at[ot]=le[0]),ot!==qt&&(at[qt]=le,delete at[ot]),(Ue=x.cssHooks[qt])&&"expand"in Ue)for(ot in le=Ue.expand(le),delete at[qt],le)ot in at||(at[ot]=le[ot],J[ot]=O);else J[qt]=O}(et,X.opts.specialEasing);T<R;T++)if(w=lr.prefilters[T].call(X,d,et,X.opts))return Pt(w.stop)&&(x._queueHooks(X.elem,X.opts.queue).stop=w.stop.bind(w)),w;return x.map(et,Oi,X),Pt(X.opts.start)&&X.opts.start.call(d,X),X.progress(X.opts.progress).done(X.opts.done,X.opts.complete).fail(X.opts.fail).always(X.opts.always),x.fx.timer(x.extend(F,{elem:d,anim:X,queue:X.opts.queue})),X}x.Animation=x.extend(lr,{tweeners:{"*":[function(d,m){var y=this.createTween(d,m);return Yl(y.elem,d,un.exec(m),y),y}]},tweener:function(d,m){Pt(d)?(m=d,d=["*"]):d=d.match(ne);for(var y,w=0,N=d.length;w<N;w++)(lr.tweeners[y=d[w]]=lr.tweeners[y]||[]).unshift(m)},prefilters:[function(d,m,y){var w,N,T,R,H,F,X,et,at="width"in m||"height"in m,J=this,ot={},qt=d.style,O=d.nodeType&&Io(d),le=Jt.get(d,"fxshow");for(w in y.queue||(null==(R=x._queueHooks(d,"fx")).unqueued&&(R.unqueued=0,H=R.empty.fire,R.empty.fire=function(){R.unqueued||H()}),R.unqueued++,J.always(function(){J.always(function(){R.unqueued--,x.queue(d,"fx").length||R.empty.fire()})})),m)if(rc.test(N=m[w])){if(delete m[w],T=T||"toggle"===N,N===(O?"hide":"show")){if("show"!==N||!le||void 0===le[w])continue;O=!0}ot[w]=le&&le[w]||x.style(d,w)}if((F=!x.isEmptyObject(m))||!x.isEmptyObject(ot))for(w in at&&1===d.nodeType&&(y.overflow=[qt.overflow,qt.overflowX,qt.overflowY],null==(X=le&&le.display)&&(X=Jt.get(d,"display")),"none"===(et=x.css(d,"display"))&&(X?et=X:(Fo([d],!0),X=d.style.display||X,et=x.css(d,"display"),Fo([d]))),("inline"===et||"inline-block"===et&&null!=X)&&"none"===x.css(d,"float")&&(F||(J.done(function(){qt.display=X}),null==X&&(X="none"===(et=qt.display)?"":et)),qt.display="inline-block")),y.overflow&&(qt.overflow="hidden",J.always(function(){qt.overflow=y.overflow[0],qt.overflowX=y.overflow[1],qt.overflowY=y.overflow[2]})),F=!1,ot)F||(le?"hidden"in le&&(O=le.hidden):le=Jt.access(d,"fxshow",{display:X}),T&&(le.hidden=!O),O&&Fo([d],!0),J.done(function(){for(w in O||Fo([d]),Jt.remove(d,"fxshow"),ot)x.style(d,w,ot[w])})),F=Oi(O?le[w]:0,w,J),w in le||(le[w]=F.start,O&&(F.end=F.start,F.start=0))}],prefilter:function(d,m){m?lr.prefilters.unshift(d):lr.prefilters.push(d)}}),x.speed=function(d,m,y){var w=d&&"object"==typeof d?x.extend({},d):{complete:y||!y&&m||Pt(d)&&d,duration:d,easing:y&&m||m&&!Pt(m)&&m};return x.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in x.fx.speeds?x.fx.speeds[w.duration]:x.fx.speeds._default),null!=w.queue&&!0!==w.queue||(w.queue="fx"),w.old=w.complete,w.complete=function(){Pt(w.old)&&w.old.call(this),w.queue&&x.dequeue(this,w.queue)},w},x.fn.extend({fadeTo:function(d,m,y,w){return this.filter(Io).css("opacity",0).show().end().animate({opacity:m},d,y,w)},animate:function(d,m,y,w){var N=x.isEmptyObject(d),T=x.speed(m,y,w),R=function(){var H=lr(this,x.extend({},d),T);(N||Jt.get(this,"finish"))&&H.stop(!0)};return R.finish=R,N||!1===T.queue?this.each(R):this.queue(T.queue,R)},stop:function(d,m,y){var w=function(N){var T=N.stop;delete N.stop,T(y)};return"string"!=typeof d&&(y=m,m=d,d=void 0),m&&this.queue(d||"fx",[]),this.each(function(){var N=!0,T=null!=d&&d+"queueHooks",R=x.timers,H=Jt.get(this);if(T)H[T]&&H[T].stop&&w(H[T]);else for(T in H)H[T]&&H[T].stop&&oc.test(T)&&w(H[T]);for(T=R.length;T--;)R[T].elem!==this||null!=d&&R[T].queue!==d||(R[T].anim.stop(y),N=!1,R.splice(T,1));!N&&y||x.dequeue(this,d)})},finish:function(d){return!1!==d&&(d=d||"fx"),this.each(function(){var m,y=Jt.get(this),w=y[d+"queue"],N=y[d+"queueHooks"],T=x.timers,R=w?w.length:0;for(y.finish=!0,x.queue(this,d,[]),N&&N.stop&&N.stop.call(this,!0),m=T.length;m--;)T[m].elem===this&&T[m].queue===d&&(T[m].anim.stop(!0),T.splice(m,1));for(m=0;m<R;m++)w[m]&&w[m].finish&&w[m].finish.call(this);delete y.finish})}}),x.each(["toggle","show","hide"],function(d,m){var y=x.fn[m];x.fn[m]=function(w,N,T){return null==w||"boolean"==typeof w?y.apply(this,arguments):this.animate(zs(m,!0),w,N,T)}}),x.each({slideDown:zs("show"),slideUp:zs("hide"),slideToggle:zs("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,m){x.fn[d]=function(y,w,N){return this.animate(m,y,w,N)}}),x.timers=[],x.fx.tick=function(){var d,m=0,y=x.timers;for(Ho=Date.now();m<y.length;m++)(d=y[m])()||y[m]!==d||y.splice(m--,1);y.length||x.fx.stop(),Ho=void 0},x.fx.timer=function(d){x.timers.push(d),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Ba||(Ba=!0,Pa())},x.fx.stop=function(){Ba=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(d,m){return d=x.fx&&x.fx.speeds[d]||d,this.queue(m=m||"fx",function(y,w){var N=yt.setTimeout(y,d);w.stop=function(){yt.clearTimeout(N)}})},ls=Qt.createElement("input"),Ti=Qt.createElement("select").appendChild(Qt.createElement("option")),ls.type="checkbox",Kt.checkOn=""!==ls.value,Kt.optSelected=Ti.selected,(ls=Qt.createElement("input")).value="t",ls.type="radio",Kt.radioValue="t"===ls.value;var sc,Hs=x.expr.attrHandle;x.fn.extend({attr:function(d,m){return Dr(this,x.attr,d,m,1<arguments.length)},removeAttr:function(d){return this.each(function(){x.removeAttr(this,d)})}}),x.extend({attr:function(d,m,y){var w,N,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return typeof d.getAttribute>"u"?x.prop(d,m,y):(1===T&&x.isXMLDoc(d)||(N=x.attrHooks[m.toLowerCase()]||(x.expr.match.bool.test(m)?sc:void 0)),void 0!==y?null===y?void x.removeAttr(d,m):N&&"set"in N&&void 0!==(w=N.set(d,y,m))?w:(d.setAttribute(m,y+""),y):N&&"get"in N&&null!==(w=N.get(d,m))?w:null==(w=x.find.attr(d,m))?void 0:w)},attrHooks:{type:{set:function(d,m){if(!Kt.radioValue&&"radio"===m&&At(d,"input")){var y=d.value;return d.setAttribute("type",m),y&&(d.value=y),m}}}},removeAttr:function(d,m){var y,w=0,N=m&&m.match(ne);if(N&&1===d.nodeType)for(;y=N[w++];)d.removeAttribute(y)}}),sc={set:function(d,m,y){return!1===m?x.removeAttr(d,y):d.setAttribute(y,y),y}},x.each(x.expr.match.bool.source.match(/\w+/g),function(d,m){var y=Hs[m]||x.find.attr;Hs[m]=function(w,N,T){var R,H,F=N.toLowerCase();return T||(H=Hs[F],Hs[F]=R,R=null!=y(w,N,T)?F:null,Hs[F]=H),R}});var au=/^(?:input|select|textarea|button)$/i,iu=/^(?:a|area)$/i;function _n(d){return(d.match(ne)||[]).join(" ")}function Uo(d){return d.getAttribute&&d.getAttribute("class")||""}function Us(d){return Array.isArray(d)?d:"string"==typeof d&&d.match(ne)||[]}x.fn.extend({prop:function(d,m){return Dr(this,x.prop,d,m,1<arguments.length)},removeProp:function(d){return this.each(function(){delete this[x.propFix[d]||d]})}}),x.extend({prop:function(d,m,y){var w,N,T=d.nodeType;if(3!==T&&8!==T&&2!==T)return 1===T&&x.isXMLDoc(d)||(N=x.propHooks[m=x.propFix[m]||m]),void 0!==y?N&&"set"in N&&void 0!==(w=N.set(d,y,m))?w:d[m]=y:N&&"get"in N&&null!==(w=N.get(d,m))?w:d[m]},propHooks:{tabIndex:{get:function(d){var m=x.find.attr(d,"tabindex");return m?parseInt(m,10):au.test(d.nodeName)||iu.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Kt.optSelected||(x.propHooks.selected={get:function(d){return null},set:function(d){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(d){var m,y,w,N,T,R;return Pt(d)?this.each(function(H){x(this).addClass(d.call(this,H,Uo(this)))}):(m=Us(d)).length?this.each(function(){if(w=Uo(this),y=1===this.nodeType&&" "+_n(w)+" "){for(T=0;T<m.length;T++)y.indexOf(" "+(N=m[T])+" ")<0&&(y+=N+" ");R=_n(y),w!==R&&this.setAttribute("class",R)}}):this},removeClass:function(d){var m,y,w,N,T,R;return Pt(d)?this.each(function(H){x(this).removeClass(d.call(this,H,Uo(this)))}):arguments.length?(m=Us(d)).length?this.each(function(){if(w=Uo(this),y=1===this.nodeType&&" "+_n(w)+" "){for(T=0;T<m.length;T++)for(N=m[T];-1<y.indexOf(" "+N+" ");)y=y.replace(" "+N+" "," ");R=_n(y),w!==R&&this.setAttribute("class",R)}}):this:this.attr("class","")},toggleClass:function(d,m){var y,w,N,T,R=typeof d,H="string"===R||Array.isArray(d);return Pt(d)?this.each(function(F){x(this).toggleClass(d.call(this,F,Uo(this),m),m)}):"boolean"==typeof m&&H?m?this.addClass(d):this.removeClass(d):(y=Us(d),this.each(function(){if(H)for(T=x(this),N=0;N<y.length;N++)T.hasClass(w=y[N])?T.removeClass(w):T.addClass(w);else void 0!==d&&"boolean"!==R||((w=Uo(this))&&Jt.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||!1===d?"":Jt.get(this,"__className__")||""))}))},hasClass:function(d){var m,y,w=0;for(m=" "+d+" ";y=this[w++];)if(1===y.nodeType&&-1<(" "+_n(Uo(y))+" ").indexOf(m))return!0;return!1}});var Mr=/\r/g;x.fn.extend({val:function(d){var m,y,w,N=this[0];return arguments.length?(w=Pt(d),this.each(function(T){var R;1===this.nodeType&&(null==(R=w?d.call(this,T,x(this).val()):d)?R="":"number"==typeof R?R+="":Array.isArray(R)&&(R=x.map(R,function(H){return null==H?"":H+""})),(m=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in m&&void 0!==m.set(this,R,"value")||(this.value=R))})):N?(m=x.valHooks[N.type]||x.valHooks[N.nodeName.toLowerCase()])&&"get"in m&&void 0!==(y=m.get(N,"value"))?y:"string"==typeof(y=N.value)?y.replace(Mr,""):y??"":void 0}}),x.extend({valHooks:{option:{get:function(d){return x.find.attr(d,"value")??_n(x.text(d))}},select:{get:function(d){var m,y,w,N=d.options,T=d.selectedIndex,R="select-one"===d.type,H=R?null:[],F=R?T+1:N.length;for(w=T<0?F:R?T:0;w<F;w++)if(((y=N[w]).selected||w===T)&&!y.disabled&&(!y.parentNode.disabled||!At(y.parentNode,"optgroup"))){if(m=x(y).val(),R)return m;H.push(m)}return H},set:function(d,m){for(var y,w,N=d.options,T=x.makeArray(m),R=N.length;R--;)((w=N[R]).selected=-1<x.inArray(x.valHooks.option.get(w),T))&&(y=!0);return y||(d.selectedIndex=-1),T}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(d,m){if(Array.isArray(m))return d.checked=-1<x.inArray(x(d).val(),m)}},Kt.checkOn||(x.valHooks[this].get=function(d){return null===d.getAttribute("value")?"on":d.value})});var Wn=yt.location,ho={guid:Date.now()},Di=/\?/;x.parseXML=function(d){var m,y;if(!d||"string"!=typeof d)return null;try{m=(new yt.DOMParser).parseFromString(d,"text/xml")}catch{}return y=m&&m.getElementsByTagName("parsererror")[0],m&&!y||x.error("Invalid XML: "+(y?x.map(y.childNodes,function(w){return w.textContent}).join("\n"):d)),m};var ue=/^(?:focusinfocus|focusoutblur)$/,ac=function(d){d.stopPropagation()};x.extend(x.event,{trigger:function(d,m,y,w){var N,T,R,H,F,X,et,at,J=[y||Qt],ot=Sn.call(d,"type")?d.type:d,qt=Sn.call(d,"namespace")?d.namespace.split("."):[];if(T=at=R=y=y||Qt,3!==y.nodeType&&8!==y.nodeType&&!ue.test(ot+x.event.triggered)&&(-1<ot.indexOf(".")&&(ot=(qt=ot.split(".")).shift(),qt.sort()),F=ot.indexOf(":")<0&&"on"+ot,(d=d[x.expando]?d:new x.Event(ot,"object"==typeof d&&d)).isTrigger=w?2:3,d.namespace=qt.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+qt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=y),m=null==m?[d]:x.makeArray(m,[d]),et=x.event.special[ot]||{},w||!et.trigger||!1!==et.trigger.apply(y,m))){if(!w&&!et.noBubble&&!ct(y)){for(ue.test((H=et.delegateType||ot)+ot)||(T=T.parentNode);T;T=T.parentNode)J.push(T),R=T;R===(y.ownerDocument||Qt)&&J.push(R.defaultView||R.parentWindow||yt)}for(N=0;(T=J[N++])&&!d.isPropagationStopped();)at=T,d.type=1<N?H:et.bindType||ot,(X=(Jt.get(T,"events")||Object.create(null))[d.type]&&Jt.get(T,"handle"))&&X.apply(T,m),(X=F&&T[F])&&X.apply&&ar(T)&&(d.result=X.apply(T,m),!1===d.result&&d.preventDefault());return d.type=ot,w||d.isDefaultPrevented()||et._default&&!1!==et._default.apply(J.pop(),m)||!ar(y)||F&&Pt(y[ot])&&!ct(y)&&((R=y[F])&&(y[F]=null),x.event.triggered=ot,d.isPropagationStopped()&&at.addEventListener(ot,ac),y[ot](),d.isPropagationStopped()&&at.removeEventListener(ot,ac),x.event.triggered=void 0,R&&(y[F]=R)),d.result}},simulate:function(d,m,y){var w=x.extend(new x.Event,y,{type:d,isSimulated:!0});x.event.trigger(w,null,m)}}),x.fn.extend({trigger:function(d,m){return this.each(function(){x.event.trigger(d,m,this)})},triggerHandler:function(d,m){var y=this[0];if(y)return x.event.trigger(d,m,y,!0)}});var ic=/\[\]$/,Bi=/\r?\n/g,dt=/^(?:submit|button|image|reset|file)$/i,cs=/^(?:input|select|textarea|keygen)/i;function La(d,m,y,w){var N;if(Array.isArray(m))x.each(m,function(T,R){y||ic.test(d)?w(d,R):La(d+"["+("object"==typeof R&&null!=R?T:"")+"]",R,y,w)});else if(y||"object"!==be(m))w(d,m);else for(N in m)La(d+"["+N+"]",m[N],y,w)}x.param=function(d,m){var y,w=[],N=function(T,R){var H=Pt(R)?R():R;w[w.length]=encodeURIComponent(T)+"="+encodeURIComponent(H??"")};if(null==d)return"";if(Array.isArray(d)||d.jquery&&!x.isPlainObject(d))x.each(d,function(){N(this.name,this.value)});else for(y in d)La(y,d[y],m,N);return w.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=x.prop(this,"elements");return d?x.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!x(this).is(":disabled")&&cs.test(this.nodeName)&&!dt.test(d)&&(this.checked||!jo.test(d))}).map(function(d,m){var y=x(this).val();return null==y?null:Array.isArray(y)?x.map(y,function(w){return{name:m.name,value:w.replace(Bi,"\r\n")}}):{name:m.name,value:y.replace(Bi,"\r\n")}}).get()}});var hn=/%20/g,ds=/#.*$/,lu=/([?&])_=[^&]*/,lc=/^(.*?):[ \t]*([^\r\n]*)$/gm,cu=/^(?:GET|HEAD)$/,du=/^\/\//,xe={},Ma={},qs="*/".concat("*"),$s=Qt.createElement("a");function An(d){return function(m,y){"string"!=typeof m&&(y=m,m="*");var w,N=0,T=m.toLowerCase().match(ne)||[];if(Pt(y))for(;w=T[N++];)"+"===w[0]?(w=w.slice(1)||"*",(d[w]=d[w]||[]).unshift(y)):(d[w]=d[w]||[]).push(y)}}function Vn(d,m,y,w){var N={},T=d===Ma;function R(H){var F;return N[H]=!0,x.each(d[H]||[],function(X,et){var at=et(m,y,w);return"string"!=typeof at||T||N[at]?T?!(F=at):void 0:(m.dataTypes.unshift(at),R(at),!1)}),F}return R(m.dataTypes[0])||!N["*"]&&R("*")}function Pi(d,m){var y,w,N=x.ajaxSettings.flatOptions||{};for(y in m)void 0!==m[y]&&((N[y]?d:w||(w={}))[y]=m[y]);return w&&x.extend(!0,d,w),d}$s.href=Wn.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Wn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Wn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qs,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,m){return m?Pi(Pi(d,x.ajaxSettings),m):Pi(x.ajaxSettings,d)},ajaxPrefilter:An(xe),ajaxTransport:An(Ma),ajax:function(d,m){"object"==typeof d&&(m=d,d=void 0);var y,w,N,T,R,H,F,X,et,at,J=x.ajaxSetup({},m=m||{}),ot=J.context||J,qt=J.context&&(ot.nodeType||ot.jquery)?x(ot):x.event,O=x.Deferred(),le=x.Callbacks("once memory"),Ue=J.statusCode||{},Te={},br={},ce="canceled",fe={readyState:0,getResponseHeader:function(me){var Pe;if(F){if(!T)for(T={};Pe=lc.exec(N);)T[Pe[1].toLowerCase()+" "]=(T[Pe[1].toLowerCase()+" "]||[]).concat(Pe[2]);Pe=T[me.toLowerCase()+" "]}return null==Pe?null:Pe.join(", ")},getAllResponseHeaders:function(){return F?N:null},setRequestHeader:function(me,Pe){return null==F&&(me=br[me.toLowerCase()]=br[me.toLowerCase()]||me,Te[me]=Pe),this},overrideMimeType:function(me){return null==F&&(J.mimeType=me),this},statusCode:function(me){var Pe;if(me)if(F)fe.always(me[fe.status]);else for(Pe in me)Ue[Pe]=[Ue[Pe],me[Pe]];return this},abort:function(me){var Pe=me||ce;return y&&y.abort(Pe),bo(0,Pe),this}};if(O.promise(fe),J.url=((d||J.url||Wn.href)+"").replace(du,Wn.protocol+"//"),J.type=m.method||m.type||J.method||J.type,J.dataTypes=(J.dataType||"*").toLowerCase().match(ne)||[""],null==J.crossDomain){H=Qt.createElement("a");try{H.href=J.url,H.href=H.href,J.crossDomain=$s.protocol+"//"+$s.host!=H.protocol+"//"+H.host}catch{J.crossDomain=!0}}if(J.data&&J.processData&&"string"!=typeof J.data&&(J.data=x.param(J.data,J.traditional)),Vn(xe,J,m,fe),F)return fe;for(et in(X=x.event&&J.global)&&0==x.active++&&x.event.trigger("ajaxStart"),J.type=J.type.toUpperCase(),J.hasContent=!cu.test(J.type),w=J.url.replace(ds,""),J.hasContent?J.data&&J.processData&&0===(J.contentType||"").indexOf("application/x-www-form-urlencoded")&&(J.data=J.data.replace(hn,"+")):(at=J.url.slice(w.length),J.data&&(J.processData||"string"==typeof J.data)&&(w+=(Di.test(w)?"&":"?")+J.data,delete J.data),!1===J.cache&&(w=w.replace(lu,"$1"),at=(Di.test(w)?"&":"?")+"_="+ho.guid+++at),J.url=w+at),J.ifModified&&(x.lastModified[w]&&fe.setRequestHeader("If-Modified-Since",x.lastModified[w]),x.etag[w]&&fe.setRequestHeader("If-None-Match",x.etag[w])),(J.data&&J.hasContent&&!1!==J.contentType||m.contentType)&&fe.setRequestHeader("Content-Type",J.contentType),fe.setRequestHeader("Accept",J.dataTypes[0]&&J.accepts[J.dataTypes[0]]?J.accepts[J.dataTypes[0]]+("*"!==J.dataTypes[0]?", "+qs+"; q=0.01":""):J.accepts["*"]),J.headers)fe.setRequestHeader(et,J.headers[et]);if(J.beforeSend&&(!1===J.beforeSend.call(ot,fe,J)||F))return fe.abort();if(ce="abort",le.add(J.complete),fe.done(J.success),fe.fail(J.error),y=Vn(Ma,J,m,fe)){if(fe.readyState=1,X&&qt.trigger("ajaxSend",[fe,J]),F)return fe;J.async&&0<J.timeout&&(R=yt.setTimeout(function(){fe.abort("timeout")},J.timeout));try{F=!1,y.send(Te,bo)}catch(me){if(F)throw me;bo(-1,me)}}else bo(-1,"No Transport");function bo(me,Pe,Tn,us){var vr,yr,Zn,Qr,$o,Ne=Pe;F||(F=!0,R&&yt.clearTimeout(R),y=void 0,N=us||"",fe.readyState=0<me?4:0,vr=200<=me&&me<300||304===me,Tn&&(Qr=function(je,qe,bn){for(var Fr,vn,re,Ge,Re=je.contents,Oe=je.dataTypes;"*"===Oe[0];)Oe.shift(),void 0===Fr&&(Fr=je.mimeType||qe.getResponseHeader("Content-Type"));if(Fr)for(vn in Re)if(Re[vn]&&Re[vn].test(Fr)){Oe.unshift(vn);break}if(Oe[0]in bn)re=Oe[0];else{for(vn in bn){if(!Oe[0]||je.converters[vn+" "+Oe[0]]){re=vn;break}Ge||(Ge=vn)}re=re||Ge}if(re)return re!==Oe[0]&&Oe.unshift(re),bn[re]}(J,fe,Tn)),!vr&&-1<x.inArray("script",J.dataTypes)&&x.inArray("json",J.dataTypes)<0&&(J.converters["text script"]=function(){}),Qr=function(je,qe,bn,Fr){var vn,re,Ge,Re,Oe,jr={},Wo=je.dataTypes.slice();if(Wo[1])for(Ge in je.converters)jr[Ge.toLowerCase()]=je.converters[Ge];for(re=Wo.shift();re;)if(je.responseFields[re]&&(bn[je.responseFields[re]]=qe),!Oe&&Fr&&je.dataFilter&&(qe=je.dataFilter(qe,je.dataType)),Oe=re,re=Wo.shift())if("*"===re)re=Oe;else if("*"!==Oe&&Oe!==re){if(!(Ge=jr[Oe+" "+re]||jr["* "+re]))for(vn in jr)if((Re=vn.split(" "))[1]===re&&(Ge=jr[Oe+" "+Re[0]]||jr["* "+Re[0]])){!0===Ge?Ge=jr[vn]:!0!==jr[vn]&&(re=Re[0],Wo.unshift(Re[1]));break}if(!0!==Ge)if(Ge&&je.throws)qe=Ge(qe);else try{qe=Ge(qe)}catch(Ia){return{state:"parsererror",error:Ge?Ia:"No conversion from "+Oe+" to "+re}}}return{state:"success",data:qe}}(J,Qr,fe,vr),vr?(J.ifModified&&(($o=fe.getResponseHeader("Last-Modified"))&&(x.lastModified[w]=$o),($o=fe.getResponseHeader("etag"))&&(x.etag[w]=$o)),204===me||"HEAD"===J.type?Ne="nocontent":304===me?Ne="notmodified":(Ne=Qr.state,yr=Qr.data,vr=!(Zn=Qr.error))):(Zn=Ne,!me&&Ne||(Ne="error",me<0&&(me=0))),fe.status=me,fe.statusText=(Pe||Ne)+"",vr?O.resolveWith(ot,[yr,Ne,fe]):O.rejectWith(ot,[fe,Ne,Zn]),fe.statusCode(Ue),Ue=void 0,X&&qt.trigger(vr?"ajaxSuccess":"ajaxError",[fe,J,vr?yr:Zn]),le.fireWith(ot,[fe,Ne]),X&&(qt.trigger("ajaxComplete",[fe,J]),--x.active||x.event.trigger("ajaxStop")))}return fe},getJSON:function(d,m,y){return x.get(d,m,y,"json")},getScript:function(d,m){return x.get(d,void 0,m,"script")}}),x.each(["get","post"],function(d,m){x[m]=function(y,w,N,T){return Pt(w)&&(T=T||N,N=w,w=void 0),x.ajax(x.extend({url:y,type:m,dataType:T,data:w,success:N},x.isPlainObject(y)&&y))}}),x.ajaxPrefilter(function(d){var m;for(m in d.headers)"content-type"===m.toLowerCase()&&(d.contentType=d.headers[m]||"")}),x._evalUrl=function(d,m,y){return x.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){x.globalEval(w,m,y)}})},x.fn.extend({wrapAll:function(d){var m;return this[0]&&(Pt(d)&&(d=d.call(this[0])),m=x(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(d){return Pt(d)?this.each(function(m){x(this).wrapInner(d.call(this,m))}):this.each(function(){var m=x(this),y=m.contents();y.length?y.wrapAll(d):m.append(d)})},wrap:function(d){var m=Pt(d);return this.each(function(y){x(this).wrapAll(m?d.call(this,y):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(d){return!x.expr.pseudos.visible(d)},x.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new yt.XMLHttpRequest}catch{}};var uu={0:200,1223:204},qo=x.ajaxSettings.xhr();Kt.cors=!!qo&&"withCredentials"in qo,Kt.ajax=qo=!!qo,x.ajaxTransport(function(d){var m,y;if(Kt.cors||qo&&!d.crossDomain)return{send:function(w,N){var T,R=d.xhr();if(R.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(T in d.xhrFields)R[T]=d.xhrFields[T];for(T in d.mimeType&&R.overrideMimeType&&R.overrideMimeType(d.mimeType),d.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)R.setRequestHeader(T,w[T]);m=function(H){return function(){m&&(m=y=R.onload=R.onerror=R.onabort=R.ontimeout=R.onreadystatechange=null,"abort"===H?R.abort():"error"===H?"number"!=typeof R.status?N(0,"error"):N(R.status,R.statusText):N(uu[R.status]||R.status,R.statusText,"text"!==(R.responseType||"text")||"string"!=typeof R.responseText?{binary:R.response}:{text:R.responseText},R.getAllResponseHeaders()))}},R.onload=m(),y=R.onerror=R.ontimeout=m("error"),void 0!==R.onabort?R.onabort=y:R.onreadystatechange=function(){4===R.readyState&&yt.setTimeout(function(){m&&y()})},m=m("abort");try{R.send(d.hasContent&&d.data||null)}catch(H){if(m)throw H}},abort:function(){m&&m()}}}),x.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return x.globalEval(d),d}}}),x.ajaxPrefilter("script",function(d){void 0===d.cache&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),x.ajaxTransport("script",function(d){var m,y;if(d.crossDomain||d.scriptAttrs)return{send:function(w,N){m=x("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",y=function(T){m.remove(),y=null,T&&N("error"===T.type?404:200,T.type)}),Qt.head.appendChild(m[0])},abort:function(){y&&y()}}});var Li,Xe=[],Ir=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=Xe.pop()||x.expando+"_"+ho.guid++;return this[d]=!0,d}}),x.ajaxPrefilter("json jsonp",function(d,m,y){var w,N,T,R=!1!==d.jsonp&&(Ir.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ir.test(d.data)&&"data");if(R||"jsonp"===d.dataTypes[0])return w=d.jsonpCallback=Pt(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,R?d[R]=d[R].replace(Ir,"$1"+w):!1!==d.jsonp&&(d.url+=(Di.test(d.url)?"&":"?")+d.jsonp+"="+w),d.converters["script json"]=function(){return T||x.error(w+" was not called"),T[0]},d.dataTypes[0]="json",N=yt[w],yt[w]=function(){T=arguments},y.always(function(){void 0===N?x(yt).removeProp(w):yt[w]=N,d[w]&&(d.jsonpCallback=m.jsonpCallback,Xe.push(w)),T&&Pt(N)&&N(T[0]),T=N=void 0}),"script"}),Kt.createHTMLDocument=((Li=Qt.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Li.childNodes.length),x.parseHTML=function(d,m,y){return"string"!=typeof d?[]:("boolean"==typeof m&&(y=m,m=!1),m||(Kt.createHTMLDocument?((w=(m=Qt.implementation.createHTMLDocument("")).createElement("base")).href=Qt.location.href,m.head.appendChild(w)):m=Qt),T=!y&&[],(N=E.exec(d))?[m.createElement(N[1])]:(N=Ms([d],m,T),T&&T.length&&x(T).remove(),x.merge([],N.childNodes)));var w,N,T},x.fn.load=function(d,m,y){var w,N,T,R=this,H=d.indexOf(" ");return-1<H&&(w=_n(d.slice(H)),d=d.slice(0,H)),Pt(m)?(y=m,m=void 0):m&&"object"==typeof m&&(N="POST"),0<R.length&&x.ajax({url:d,type:N||"GET",dataType:"html",data:m}).done(function(F){T=arguments,R.html(w?x("<div>").append(x.parseHTML(F)).find(w):F)}).always(y&&function(F,X){R.each(function(){y.apply(this,T||[F.responseText,X,F])})}),this},x.expr.pseudos.animated=function(d){return x.grep(x.timers,function(m){return d===m.elem}).length},x.offset={setOffset:function(d,m,y){var w,N,T,R,H,F,X=x.css(d,"position"),et=x(d),at={};"static"===X&&(d.style.position="relative"),H=et.offset(),T=x.css(d,"top"),F=x.css(d,"left"),("absolute"===X||"fixed"===X)&&-1<(T+F).indexOf("auto")?(R=(w=et.position()).top,N=w.left):(R=parseFloat(T)||0,N=parseFloat(F)||0),Pt(m)&&(m=m.call(d,y,x.extend({},H))),null!=m.top&&(at.top=m.top-H.top+R),null!=m.left&&(at.left=m.left-H.left+N),"using"in m?m.using.call(d,at):et.css(at)}},x.fn.extend({offset:function(d){if(arguments.length)return void 0===d?this:this.each(function(N){x.offset.setOffset(this,d,N)});var m,y,w=this[0];return w?w.getClientRects().length?{top:(m=w.getBoundingClientRect()).top+(y=w.ownerDocument.defaultView).pageYOffset,left:m.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var d,m,y,w=this[0],N={top:0,left:0};if("fixed"===x.css(w,"position"))m=w.getBoundingClientRect();else{for(m=this.offset(),y=w.ownerDocument,d=w.offsetParent||y.documentElement;d&&(d===y.body||d===y.documentElement)&&"static"===x.css(d,"position");)d=d.parentNode;d&&d!==w&&1===d.nodeType&&((N=x(d).offset()).top+=x.css(d,"borderTopWidth",!0),N.left+=x.css(d,"borderLeftWidth",!0))}return{top:m.top-N.top-x.css(w,"marginTop",!0),left:m.left-N.left-x.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&"static"===x.css(d,"position");)d=d.offsetParent;return d||Ke})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,m){var y="pageYOffset"===m;x.fn[d]=function(w){return Dr(this,function(N,T,R){var H;if(ct(N)?H=N:9===N.nodeType&&(H=N.defaultView),void 0===R)return H?H[m]:N[T];H?H.scrollTo(y?H.pageXOffset:R,y?R:H.pageYOffset):N[T]=R},d,w,arguments.length)}}),x.each(["top","left"],function(d,m){x.cssHooks[m]=is(Kt.pixelPosition,function(y,w){if(w)return w=$n(y,m),Is.test(w)?x(y).position()[m]+"px":w})}),x.each({Height:"height",Width:"width"},function(d,m){x.each({padding:"inner"+d,content:m,"":"outer"+d},function(y,w){x.fn[w]=function(N,T){var R=arguments.length&&(y||"boolean"!=typeof N),H=y||(!0===N||!0===T?"margin":"border");return Dr(this,function(F,X,et){var at;return ct(F)?0===w.indexOf("outer")?F["inner"+d]:F.document.documentElement["client"+d]:9===F.nodeType?(at=F.documentElement,Math.max(F.body["scroll"+d],at["scroll"+d],F.body["offset"+d],at["offset"+d],at["client"+d])):void 0===et?x.css(F,X,H):x.style(F,X,et,H)},m,R?N:void 0,R)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,m){x.fn[m]=function(y){return this.on(m,y)}}),x.fn.extend({bind:function(d,m,y){return this.on(d,null,m,y)},unbind:function(d,m){return this.off(d,null,m)},delegate:function(d,m,y,w){return this.on(m,d,y,w)},undelegate:function(d,m,y){return 1===arguments.length?this.off(d,"**"):this.off(m,d||"**",y)},hover:function(d,m){return this.on("mouseenter",d).on("mouseleave",m||d)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,m){x.fn[m]=function(y,w){return 0<arguments.length?this.on(m,null,y,w):this.trigger(m)}});var Kn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(d,m){var y,w,N;if("string"==typeof m&&(y=d[m],m=d,d=y),Pt(d))return w=oe.call(arguments,2),(N=function(){return d.apply(m||this,w.concat(oe.call(arguments)))}).guid=d.guid=d.guid||x.guid++,N},x.holdReady=function(d){d?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=At,x.isFunction=Pt,x.isWindow=ct,x.camelCase=Ve,x.type=be,x.now=Date.now,x.isNumeric=function(d){var m=x.type(d);return("number"===m||"string"===m)&&!isNaN(d-parseFloat(d))},x.trim=function(d){return null==d?"":(d+"").replace(Kn,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var Yr=yt.jQuery,Ws=yt.$;return x.noConflict=function(d){return yt.$===x&&(yt.$=Ws),d&&yt.jQuery===x&&(yt.jQuery=Yr),x},typeof zt>"u"&&(yt.jQuery=yt.$=x),x}),function(yt){yt.imageArea=function(zt,Vt){var wn,We,Hn,Sn,It=zt.options,oe=zt.$image,Ie=zt.$trigger,pr={},gr=!0,Dt=!0,Kt=[0,0],Pt=[0,0],ct={id:Vt,x:0,y:0,z:0,height:0,width:0},Pn=function(){zt.blurAll(),ct.z=100,ht()},De=function(){return ct},be=function(_t){oe.trigger(_t,[ct.id,zt.areas()])},gt=function(_t){var te=_t||window.event||{};te.cancelBubble=!0,te.returnValue=!1,te.stopPropagation&&te.stopPropagation(),te.preventDefault&&te.preventDefault()},x=function(_t,te){var ae,Ot;switch(_t){case"start":ae="mousedown",Ot="touchstart";break;case"move":ae="mousemove",Ot="touchmove";break;case"stop":ae="mouseup",Ot="touchend";break;default:return}te&&jQuery.isFunction(te)?yt(window.document).on(ae,te).on(Ot,te):yt(window.document).off(ae).off(Ot)},Ln=function(){wn.css({cursor:"default",width:ct.width,height:ct.height,left:ct.x,top:ct.y}),We.css({backgroundPosition:-ct.x-1+"px "+(-ct.y-1)+"px",cursor:It.allowMove?"move":"default",width:ct.width-2>0?ct.width-2:0,height:ct.height-2>0?ct.height-2:0,left:ct.x+1,top:ct.y+1}),Hn.css({width:ct.width-2>0?ct.width-2:0,left:ct.x+2,top:ct.y+1})},At=function(_t){It.allowResize&&(_t?yt.each(pr,function(te,ae){var Ot,Se,ne=Math.round(ae.width()/2),tt=Math.round(ae.height()/2),po=te[0],Vr=te[te.length-1];Ot="n"===po?-tt:"s"===po?ct.height-tt-1:Math.round(ct.height/2)-tt-1,Se="e"===Vr?ct.width-ne-1:"w"===Vr?-ne:Math.round(ct.width/2)-ne-1,ae.css({display:"block",left:ct.x+Se,top:ct.y+Ot})}):yt(".select-areas-resize-handler").each(function(){yt(this).css({display:"none"})}))},kn=function(_t){Sn&&Sn.css({display:_t?"block":"none",left:ct.x+ct.width+1,top:ct.y-Sn.outerHeight()-1})},Ps=function(_t){wn.css({cursor:_t}),We.css({cursor:_t})},ht=function(_t){switch(_t){case"startSelection":zt._refresh(),Ln(),At(),kn(!0);break;case"pickSelection":case"pickResizeHandler":At();break;case"resizeSelection":Ln(),At(),Ps("crosshair"),kn(!0);break;case"moveSelection":Ln(),At(),Ps("move"),kn(!0);break;case"blur":Ln(),At(),kn();break;default:Ln(),At(!0),kn(!0)}},Wr=function(_t){gt(_t),Pn(),x("move",sr),x("stop",Un);var te=E(_t);Kt[0]=te[0]-ct.x,Kt[1]=te[1]-ct.y,ht("pickSelection")},kt=function(_t){gt(_t),Pn();var te=_t.target.className.split(" ")[1];"w"===te[te.length-1]&&(Pt[0]+=ct.width,ct.x=Pt[0]-ct.width),"n"===te[0]&&(Pt[1]+=ct.height,ct.y=Pt[1]-ct.height),"n"===te||"s"===te?gr=!1:("e"===te||"w"===te)&&(Dt=!1),x("move",Po),x("stop",Un),ht("pickResizeHandler")},Po=function(_t){gt(_t),Pn();var te=E(_t),ae=te[1]-Pt[1],Ot=te[0]-Pt[0];Math.abs(Ot)<It.minSize[0]&&(Ot=Ot>=0?It.minSize[0]:-It.minSize[0]),Math.abs(ae)<It.minSize[1]&&(ae=ae>=0?It.minSize[1]:-It.minSize[1]),(Pt[0]+Ot<0||Pt[0]+Ot>oe.width())&&(Ot=-Ot),(Pt[1]+ae<0||Pt[1]+ae>oe.height())&&(ae=-ae),It.maxSize[0]>It.minSize[0]&&It.maxSize[1]>It.minSize[1]&&(Math.abs(Ot)>It.maxSize[0]&&(Ot=Ot>=0?It.maxSize[0]:-It.maxSize[0]),Math.abs(ae)>It.maxSize[1]&&(ae=ae>=0?It.maxSize[1]:-It.maxSize[1])),gr&&(ct.width=Ot),Dt&&(ct.height=ae),It.aspectRatio&&(Ot>0&&ae>0||Ot<0&&ae<0?gr?ae=Math.round(Ot/It.aspectRatio):Ot=Math.round(ae*It.aspectRatio):gr?ae=-Math.round(Ot/It.aspectRatio):Ot=-Math.round(ae*It.aspectRatio),Pt[0]+Ot>oe.width()&&(Ot=oe.width()-Pt[0],ae=ae>0?Math.round(Ot/It.aspectRatio):-Math.round(Ot/It.aspectRatio)),Pt[1]+ae<0&&(ae=-Pt[1],Ot=Ot>0?-Math.round(ae*It.aspectRatio):Math.round(ae*It.aspectRatio)),Pt[1]+ae>oe.height()&&(ae=oe.height()-Pt[1],Ot=Ot>0?Math.round(ae*It.aspectRatio):-Math.round(ae*It.aspectRatio)),ct.width=Ot,ct.height=ae),ct.width<0?(ct.width=Math.abs(ct.width),ct.x=Pt[0]-ct.width):ct.x=Pt[0],ct.height<0?(ct.height=Math.abs(ct.height),ct.y=Pt[1]-ct.height):ct.y=Pt[1],be("changing"),ht("resizeSelection")},sr=function(_t){if(gt(_t),It.allowMove){Pn();var te=E(_t);fo({x:te[0]-Kt[0],y:te[1]-Kt[1]}),be("changing")}},fo=function(_t){ct.x=_t.x>0?_t.x+ct.width<oe.width()?_t.x:oe.width()-ct.width:0,ct.y=_t.y>0?_t.y+ct.height<oe.height()?_t.y:oe.height()-ct.height:0,ht("moveSelection")},Un=function(_t,te){gt(_t),function(){yt.each(arguments,function(_t,te){x(te)})}("move","stop"),te&&(ct.x=te.x,ct.y=te.y,ct.z=te.z,ct.width=te.width,ct.height=te.height,Ln()),Pt[0]=ct.x,Pt[1]=ct.y,gr=!0,Dt=!0,be("changed"),ht("releaseSelection")},ve=function(_t){be("deleted"),gt(_t),We.remove(),wn.remove(),Hn.remove(),yt.each(pr,function(te,ae){ae.remove()}),Sn&&Sn.remove(),zt._remove(Vt)},E=function(_t){var te=function(_t){var te=yt(_t).offset();return[te.left,te.top]}(oe);_t.pageX||(_t.originalEvent&&(_t=_t.originalEvent),_t.changedTouches&&(_t=_t.changedTouches[0]),_t.touches&&(_t=_t.touches[0]));var ae=_t.pageX-te[0],Ot=_t.pageY-te[1];return[ae=ae<0?0:ae>oe.width()?oe.width():ae,Ot=Ot<0?0:Ot>oe.height()?oe.height():Ot]};if(wn=yt("<div id='select-areas-outline_"+De().id+'\'  class="select-areas-outline"/>').css({opacity:It.outlineOpacity,position:"absolute"}).insertAfter(Ie),We=yt("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+De().id).css({position:"absolute"}).insertAfter(wn),Hn=yt("<div id='select-areas-label-container_"+De().id+'\'  class="select-areas-label-container"/>').css({position:"absolute"}).insertAfter(Ie),It.allowResize&&yt.each(["nw","n","ne","e","se","s","sw","w"],function(_t,te){pr[te]=yt('<div class="select-areas-resize-handler '+te+" select-areas-resize-handler_"+De().id+'"/>').css({opacity:.5,position:"absolute",cursor:te+"-resize"}).insertAfter(We).mousedown(kt).bind("touchstart",kt)}),It.allowDelete){var mo=function(_t){return _t.click(ve).bind("touchstart",ve).bind("tap",ve),_t};Sn=mo(yt("<div id='select-areas-delete_"+De().id+'\'  class="delete-area" />')).append(mo(yt('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(We)}return It.allowMove&&We.mousedown(Wr).bind("touchstart",Wr),Pn(),{getData:De,startSelection:function(_t){gt(_t),ct.width=It.minSize[0],ct.height=It.minSize[1],Pn(),x("move",Po),x("stop",Un),(Pt=E(_t))[0]+ct.width>oe.width()&&(Pt[0]=oe.width()-ct.width),Pt[1]+ct.height>oe.height()&&(Pt[1]=oe.height()-ct.height),ct.x=Pt[0],ct.y=Pt[1],ht("startSelection")},deleteSelection:ve,options:It,blur:function(){ct.z=0,ht("blur")},focus:Pn,nudge:function(_t){_t.x=ct.x,_t.y=ct.y,_t.d&&(_t.y=ct.y+_t.d),_t.u&&(_t.y=ct.y-_t.u),_t.l&&(_t.x=ct.x-_t.l),_t.r&&(_t.x=ct.x+_t.r),fo(_t),be("changed")},set:function(_t,te){ct=yt.extend(ct,_t),Pt[0]=ct.x,Pt[1]=ct.y,te||be("changed")},contains:function(_t){return _t.x>=ct.x&&_t.x<=ct.x+ct.width&&_t.y>=ct.y&&_t.y<=ct.y+ct.height}}},yt.imageSelectAreas=function(){},yt.imageSelectAreas.prototype.init=function(zt,Vt){var It=this;this.options=yt.extend({allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null},Vt),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=yt(zt),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=yt("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=yt('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=yt("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),yt.each(this.options.areas,function(Ie,wn){It._add(wn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(yt.proxy(this.newArea,this)).on("touchstart",yt.proxy(this.newArea,this)),this.options.allowNudge&&yt("html").keydown(function(Ie){var Hn,We={37:"l",38:"u",39:"r",40:"d"}[Ie.which];if(We&&(It._eachArea(function(Sn){if(100===Sn.getData().z)return Hn=Sn,!1}),Hn)){var pr={};pr[We]=1,Hn.nudge(pr)}})},yt.imageSelectAreas.prototype._refresh=function(){var zt=this.areas().length;this.$overlay.css({display:zt?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},yt.imageSelectAreas.prototype._eachArea=function(zt){yt.each(this._areas,function(Vt,It){if(It)return zt(It,Vt)})},yt.imageSelectAreas.prototype._remove=function(zt){delete this._areas[zt],this._refresh()},yt.imageSelectAreas.prototype.remove=function(zt){this._areas[zt]&&this._areas[zt].deleteSelection()},yt.imageSelectAreas.prototype.newArea=function(zt){var Vt=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(It,oe){Vt=Math.max(Vt,parseInt(oe,10))}),this._areas[Vt+=1]=yt.imageArea(this,Vt),zt&&this._areas[Vt].startSelection(zt)),Vt},yt.imageSelectAreas.prototype.set=function(zt,Vt,It){this._areas[zt]&&(Vt.id=zt,this._areas[zt].set(Vt,It),this._areas[zt].focus())},yt.imageSelectAreas.prototype._add=function(zt,Vt){var It=this.newArea();this.set(It,zt,Vt)},yt.imageSelectAreas.prototype.add=function(zt){var Vt=this;this.blurAll(),yt.isArray(zt)?yt.each(zt,function(It,oe){Vt._add(oe)}):this._add(zt),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},yt.imageSelectAreas.prototype.reset=function(){var zt=this;this._eachArea(function(Vt,It){zt.remove(It)}),this._refresh()},yt.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},yt.imageSelectAreas.prototype.areas=function(){var zt=[];return this._eachArea(function(Vt){zt.push(Vt.getData())}),zt},yt.imageSelectAreas.prototype.relativeAreas=function(){for(var zt=this.areas(),Vt=[],It=this.ratio,oe=function(wn){return Math.floor(wn/It)},Ie=0;Ie<zt.length;Ie++)Vt[Ie]=yt.extend({},zt[Ie]),Vt[Ie].x=oe(Vt[Ie].x),Vt[Ie].y=oe(Vt[Ie].y),Vt[Ie].width=oe(Vt[Ie].width),Vt[Ie].height=oe(Vt[Ie].height);return Vt},yt.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(zt){zt.blur()})},yt.imageSelectAreas.prototype.contains=function(zt){var Vt=!1;return this._eachArea(function(It){if(It.contains(zt))return Vt=!0,!1}),Vt},yt.selectAreas=function(zt,Vt){var It=yt(zt);if(!It.data("mainImageSelectAreas")){var oe=new yt.imageSelectAreas;oe.init(zt,Vt),It.data("mainImageSelectAreas",oe),It.trigger("loaded")}return It.data("mainImageSelectAreas")},yt.fn.selectAreas=function(zt){if(yt.imageSelectAreas.prototype[zt]){var Vt=yt.imageSelectAreas.prototype[zt].apply(yt.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Vt>"u"?this:Vt}if("object"==typeof zt||!zt)return this.each(function(){var It=this,oe=new Image;oe.onload=function(){yt.selectAreas(It,zt)},oe.src=It.src}),this;yt.error("Method "+zt+" does not exist on jQuery.selectAreas")}}(jQuery);
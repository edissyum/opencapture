!function(){"use strict";var vt=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},qt=function(t){return{eq:t}},Wt=qt(function(t,e){return t===e}),Ht=function(t){return qt(function(e,n){if(e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t.eq(e[o],n[o]))return!1;return!0})},ne=function(t){return qt(function(e,n){var l,u,f,r=Object.keys(e),o=Object.keys(n);if(!(l=Wt,u=Ht(l),f=function(u){return Array.prototype.slice.call(u).sort(void 0)},qt(function(p,b){return u.eq(f(p),f(b))})).eq(r,o))return!1;for(var s=r.length,a=0;a<s;a++){var i=r[a];if(!t.eq(e[i],n[i]))return!1}return!0})},je=qt(function(t,e){if(t===e)return!0;var n=vt(t);return n===vt(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?Ht(je).eq(t,e):"object"===n&&ne(je).eq(t,e))});const kn=Object.getPrototypeOf,Ke=(t,e,n)=>{var r;return!!n(t,e.prototype)||(null===(r=t.constructor)||void 0===r?void 0:r.name)===e.name},Wn=t=>e=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&Ke(n,String,(o,s)=>s.isPrototypeOf(o))?"string":r})(e)===t,yr=t=>e=>typeof e===t,En=t=>e=>t===e,Cr=(t,e)=>Vt(t)&&Ke(t,e,(n,r)=>kn(n)===r),Dt=Wn("string"),Vt=Wn("object"),Pt=t=>Cr(t,Object),ct=Wn("array"),Qt=En(null),Mn=yr("boolean"),De=En(void 0),ye=t=>null==t,mt=t=>!ye(t),pe=yr("function"),x=yr("number"),In=(t,e)=>{if(ct(t)){for(let n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}return!1},_t=()=>{},ir=(t,e)=>(...n)=>t(e.apply(null,n)),Ms=(t,e)=>n=>t(e(n)),gt=t=>()=>t,ue=t=>t,go=(t,e)=>t===e;function kt(t,...e){return(...n)=>{const r=e.concat(n);return t.apply(null,r)}}const Fo=t=>e=>!t(e),fr=t=>()=>{throw new Error(t)},ho=t=>t(),Vn=t=>{t()},Ce=gt(!1),Be=gt(!0);class E{constructor(e,n){this.tag=e,this.value=n}static some(e){return new E(!0,e)}static none(){return E.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?E.some(e(this.value)):E.none()}bind(e){return this.tag?e(this.value):E.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:E.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return mt(e)?E.some(e):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}E.singletonNone=new E(!1);const bo=Array.prototype.slice,Et=Array.prototype.indexOf,ee=Array.prototype.push,ie=(t,e)=>Et.call(t,e),Tt=(t,e)=>ie(t,e)>-1,Ae=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1},re=(t,e)=>{const n=t.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=e(t[o],o);return r},rt=(t,e)=>{for(let n=0,r=t.length;n<r;n++)e(t[n],n)},vo=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Kr=(t,e)=>{const n=[],r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];(e(a,o)?n:r).push(a)}return{pass:n,fail:r}},$t=(t,e)=>{const n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];e(s,r)&&n.push(s)}return n},jo=(t,e,n)=>(vo(t,(r,o)=>{n=e(n,r,o)}),n),vn=(t,e,n)=>(rt(t,(r,o)=>{n=e(n,r,o)}),n),Lr=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++){const s=t[r];if(e(s,r))return E.some(s);if(n(s,r))break}return E.none()},qe=(t,e)=>Lr(t,e,Ce),Is=(t,e)=>{for(let n=0,r=t.length;n<r;n++)if(e(t[n],n))return E.some(n);return E.none()},$l=t=>{const e=[];for(let n=0,r=t.length;n<r;++n){if(!ct(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);ee.apply(e,t[n])}return e},rn=(t,e)=>$l(re(t,e)),mr=(t,e)=>{for(let n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n))return!1;return!0},Xr=t=>{const e=bo.call(t,0);return e.reverse(),e},Gt=(t,e)=>$t(t,n=>!Tt(e,n)),_n=(t,e)=>{const n={};for(let r=0,o=t.length;r<o;r++){const s=t[r];n[String(s)]=e(s,r)}return n},zo=(t,e)=>{const n=bo.call(t,0);return n.sort(e),n},_a=(t,e)=>e>=0&&e<t.length?E.some(t[e]):E.none(),Nn=t=>_a(t,0),yo=t=>_a(t,t.length-1),Ye=pe(Array.from)?Array.from:t=>bo.call(t),Kn=(t,e)=>{for(let n=0;n<t.length;n++){const r=e(t[n],n);if(r.isSome())return r}return E.none()},Qe=Object.keys,rs=Object.hasOwnProperty,Se=(t,e)=>{const n=Qe(t);for(let r=0,o=n.length;r<o;r++){const s=n[r];e(t[s],s)}},Ho=(t,e)=>Wl(t,(n,r)=>({k:r,v:e(n,r)})),Wl=(t,e)=>{const n={};return Se(t,(r,o)=>{const s=e(r,o);n[s.k]=s.v}),n},Na=t=>(e,n)=>{t[n]=e},Uo=(t,e,n,r)=>{Se(t,(o,s)=>{(e(o,s)?n:r)(o,s)})},xr=(t,e)=>{const n={};return Uo(t,e,Na(n),_t),n},os=(t,e)=>{const n=[];return Se(t,(r,o)=>{n.push(e(r,o))}),n},qo=t=>os(t,ue),ke=(t,e)=>te(t,e)?E.from(t[e]):E.none(),te=(t,e)=>rs.call(t,e),yn=(t,e)=>te(t,e)&&null!=t[e],Fn=t=>{const e={};return rt(t,n=>{e[n]={}}),Qe(e)},Aa=t=>void 0!==t.length,yi=Array.isArray,Fs=(t,e,n)=>{if(!t)return!1;if(n=n||t,Aa(t)){for(let r=0,o=t.length;r<o;r++)if(!1===e.call(n,t[r],r,t))return!1}else for(const r in t)if(te(t,r)&&!1===e.call(n,t[r],r,t))return!1;return!0},Ra=(t,e)=>{const n=[];return Fs(t,(r,o)=>{n.push(e(r,o,t))}),n},Mr=(t,e)=>{const n=[];return Fs(t,(r,o)=>{e&&!e(r,o,t)||n.push(r)}),n},Gr=(t,e,n,r)=>{let o=De(n)?t[0]:n;for(let s=0;s<t.length;s++)o=e.call(r,o,t[s],s);return o},Ta=(t,e,n)=>{for(let r=0,o=t.length;r<o;r++)if(e.call(n,t[r],r,t))return r;return-1},Ir=t=>t[t.length-1],$o=t=>{let e,n=!1;return(...r)=>(n||(n=!0,e=t.apply(null,r)),e)},Vl=()=>Ci(0,0),Ci=(t,e)=>({major:t,minor:e}),ss={nu:Ci,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Vl():((r,o)=>{const s=((i,l)=>{for(let c=0;c<i.length;c++){const u=i[c];if(u.test(l))return u}})(r,o);if(!s)return{major:0,minor:0};const a=i=>Number(o.replace(s,"$"+i));return Ci(a(1),a(2))})(t,n)},unknown:Vl},Kl=(t,e)=>{const n=String(e).toLowerCase();return qe(t,r=>r.search(n))},Xl=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,xi=(t,e)=>Je(t,e)?t.substring(e.length):t,ze=(t,e,n=0,r)=>{const o=t.indexOf(e,n);return-1!==o&&(!!De(r)||o+e.length<=r)},Je=(t,e)=>Xl(t,e,0),js=(t,e)=>Xl(t,e,t.length-e.length),zs=t=>e=>e.replace(t,""),Yr=zs(/^\s+|\s+$/g),Gl=zs(/^\s+/g),Yl=zs(/\s+$/g),Xn=t=>t.length>0,as=t=>!Xn(t),Hs=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?E.none():E.some(n)},Oa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Fr=t=>e=>ze(e,t),wi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>ze(t,"edge/")&&ze(t,"chrome")&&ze(t,"safari")&&ze(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Oa],search:t=>ze(t,"chrome")&&!ze(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>ze(t,"msie")||ze(t,"trident")},{name:"Opera",versionRegexes:[Oa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Fr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Fr("firefox")},{name:"Safari",versionRegexes:[Oa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(ze(t,"safari")||ze(t,"mobile/"))&&ze(t,"applewebkit")}],ou=[{name:"Windows",search:Fr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>ze(t,"iphone")||ze(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Fr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Fr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Fr("linux"),versionRegexes:[]},{name:"Solaris",search:Fr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Fr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Fr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ql={browsers:gt(wi),oses:gt(ou)},ki="Chromium",Ei="Firefox",Wo=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isEdge:r("Edge"),isChromium:r(ki),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(Ei),isSafari:r("Safari")}},Ba=()=>Wo({current:void 0,version:ss.unknown()}),is=Wo,_i=(gt("Edge"),gt(ki),gt("IE"),gt("Opera"),gt(Ei),gt("Safari"),"Windows"),Jl="Android",Ni="Solaris",Us="FreeBSD",Ai="ChromeOS",gr=t=>{const e=t.current,r=o=>()=>e===o;return{current:e,version:t.version,isWindows:r(_i),isiOS:r("iOS"),isAndroid:r(Jl),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(Ni),isFreeBSD:r(Us),isChromeOS:r(Ai)}},tc=()=>gr({current:void 0,version:ss.unknown()}),qs=gr,su=(gt(_i),gt("iOS"),gt(Jl),gt("Linux"),gt("macOS"),gt(Ni),gt(Us),gt(Ai),t=>window.matchMedia(t).matches);let au=$o(()=>((t,e,n)=>{const r=Ql.browsers(),o=Ql.oses(),s=e.bind(l=>{return c=r,Kn(l.brands,f=>{const p=f.brand.toLowerCase();return qe(c,b=>{var g;return p===(null===(g=b.brand)||void 0===g?void 0:g.toLowerCase())}).map(b=>({current:b.name,version:ss.nu(parseInt(f.version,10),0)}))});var c}).orThunk(()=>{return Kl(r,c=t).map(u=>{const f=ss.detect(u.versionRegexes,c);return{current:u.name,version:f}});var c}).fold(Ba,is),a=(l=o,c=t,Kl(l,c).map(u=>{const f=ss.detect(u.versionRegexes,c);return{current:u.name,version:f}})).fold(tc,qs),i=((l,c,u,f)=>{const p=l.isiOS()&&!0===/ipad/i.test(u),b=l.isiOS()&&!p,g=l.isiOS()||l.isAndroid(),v=g||f("(pointer:coarse)"),h=p||!b&&g&&f("(min-device-width:768px)"),C=b||g&&!h,S=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(u),k=!C&&!h&&!S;return{isiPad:gt(p),isiPhone:gt(b),isTablet:gt(h),isPhone:gt(C),isTouch:gt(v),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:gt(S),isDesktop:gt(k)}})(a,s,t,n);var l,c;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,E.from(navigator.userAgentData),su));const An=()=>au(),Vo=navigator.userAgent,$s=An(),jr=$s.browser,Gn=$s.os,Co=$s.deviceType,Ri=-1!==Vo.indexOf("Windows Phone"),fe={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:jr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!jr.isIE(),windowsPhone:Ri,browser:{current:jr.current,version:jr.version,isChromium:jr.isChromium,isEdge:jr.isEdge,isFirefox:jr.isFirefox,isIE:jr.isIE,isOpera:jr.isOpera,isSafari:jr.isSafari},os:{current:Gn.current,version:Gn.version,isAndroid:Gn.isAndroid,isChromeOS:Gn.isChromeOS,isFreeBSD:Gn.isFreeBSD,isiOS:Gn.isiOS,isLinux:Gn.isLinux,isMacOS:Gn.isMacOS,isSolaris:Gn.isSolaris,isWindows:Gn.isWindows},deviceType:{isDesktop:Co.isDesktop,isiPad:Co.isiPad,isiPhone:Co.isiPhone,isPhone:Co.isPhone,isTablet:Co.isTablet,isTouch:Co.isTouch,isWebView:Co.isWebView}},ec=/^\s*|\s*$/g,nc=t=>ye(t)?"":(""+t).replace(ec,""),Ti=function(t,e,n,r){r=r||this,t&&(n&&(t=t[n]),Fs(t,(o,s)=>!1!==e.call(r,o,s,n)&&(Ti(o,e,n,r),!0)))},dt={trim:nc,isArray:yi,is:(t,e)=>e?!("array"!==e||!yi(t))||typeof t===e:void 0!==t,toArray:t=>{if(yi(t))return t;{const e=[];for(let n=0,r=t.length;n<r;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const r=Dt(t)?t.split(e||","):t||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:Fs,map:Ra,grep:Mr,inArray:(t,e)=>{if(t)for(let n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},hasOwn:te,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(te(r,o)){const s=r[o];void 0!==s&&(t[o]=s)}}return t},walk:Ti,resolve:(t,e=window)=>{const n=t.split(".");for(let r=0,o=n.length;r<o&&(e=e[n[r]]);r++);return e},explode:(t,e)=>ct(t)?t:""===t?[]:Ra(t.split(e||","),nc),_addCacheSuffix:t=>{const e=fe.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},ls=(t,e,n=go)=>t.exists(r=>n(r,e)),pn=(t,e,n)=>t.isSome()&&e.isSome()?E.some(n(t.getOrDie(),e.getOrDie())):E.none(),cs=(t,e)=>t?E.some(e):E.none(),iu=typeof window<"u"?window:Function("return this;")(),rc=(t,e)=>((n,r)=>{let o=r??iu;for(let s=0;s<n.length&&null!=o;++s)o=o[n[s]];return o})(t.split("."),e),lu=Object.getPrototypeOf,Ee=t=>t.dom.nodeName.toLowerCase(),Oi=t=>t.dom.nodeType,ds=t=>e=>Oi(e)===t,La=t=>Cn(t)&&(t=>{const e=rc("ownerDocument.defaultView",t);return Vt(t)&&((n=e,((r,o)=>{const s=rc(r,o);if(null==s)throw new Error(r+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(lu(t).constructor.name));var n})(t.dom),Cn=ds(1),Yn=ds(3),oc=ds(9),Di=ds(11),Bi=t=>e=>Cn(e)&&Ee(e)===t,us=(t,e,n)=>{if(!(Dt(n)||Mn(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Xe=(t,e,n)=>{us(t.dom,e,n)},Qr=(t,e)=>{const n=t.dom;Se(e,(r,o)=>{us(n,o,r)})},jn=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},Jr=(t,e)=>E.from(jn(t,e)),Ma=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},on=(t,e)=>{t.dom.removeAttribute(e)},d=t=>vn(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),m=(t,e)=>{const n=jn(t,e);return void 0===n||""===n?[]:n.split(" ")},y=t=>void 0!==t.dom.classList,w=t=>m(t,"class"),_=(t,e)=>((n,r,o)=>{const s=m(n,r).concat([o]);return Xe(n,r,s.join(" ")),!0})(t,"class",e),A=(t,e)=>((n,r,o)=>{const s=$t(m(n,r),a=>a!==o);return s.length>0?Xe(n,r,s.join(" ")):on(n,r),!1})(t,"class",e),T=(t,e)=>{y(t)?t.dom.classList.add(e):_(t,e)},H=t=>{0===(y(t)?t.dom.classList:w(t)).length&&on(t,"class")},F=(t,e)=>{y(t)?t.dom.classList.remove(e):A(t,e),H(t)},K=(t,e)=>y(t)&&t.dom.classList.contains(e),tt=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},st=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,t),new Error(r)}return tt(n.childNodes[0])},X=(t,e)=>{const n=(e||document).createElement(t);return tt(n)},ut=(t,e)=>{const n=(e||document).createTextNode(t);return tt(n)},O=tt,le=(t,e)=>{const n=[],r=s=>(n.push(s),e(s));let o=e(t);do{o=o.bind(r)}while(o.isSome());return n},_e=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},sn=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,de=(t,e)=>t.dom===e.dom,gn=(t,e)=>{const n=t.dom,r=e.dom;return n!==r&&n.contains(r)},he=t=>O(t.dom.ownerDocument),zn=t=>oc(t)?t:he(t),be=t=>O(zn(t).dom.defaultView),xe=t=>E.from(t.dom.parentNode).map(O),Ko=t=>E.from(t.dom.parentElement).map(O),Ia=(t,e)=>{const n=pe(e)?e:Ce;let r=t.dom;const o=[];for(;null!=r.parentNode;){const s=r.parentNode,a=O(s);if(o.push(a),!0===n(a))break;r=s}return o},Rn=t=>E.from(t.dom.previousSibling).map(O),Zr=t=>E.from(t.dom.nextSibling).map(O),zr=t=>Xr(le(t,Rn)),to=t=>le(t,Zr),Me=t=>re(t.dom.childNodes,O),xn=(t,e)=>E.from(t.dom.childNodes[e]).map(O),Ze=t=>xn(t,0),$e=t=>xn(t,t.dom.childNodes.length-1),wn=t=>t.dom.childNodes.length,Hr=t=>Di(t)&&mt(t.dom.host),Tn=pe(Element.prototype.attachShadow)&&pe(Node.prototype.getRootNode),oe=gt(Tn),Te=Tn?t=>O(t.dom.getRootNode()):zn,He=t=>Hr(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return O(n)})(zn(t)),Le=t=>O(t.dom.host),wr=t=>{if(oe()&&mt(t.target)){const e=O(t.target);if(Cn(e)&&fs(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Nn(n)}}return E.from(t.target)},fs=t=>mt(t.dom.shadowRoot),eo=t=>{const e=Yn(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(r=>{const o=Te(r);return Hr(o)?E.some(o):E.none()})(O(e)).fold(()=>n.body.contains(e),Ms(eo,Le))};var xo=(t,e,n,r,o)=>t(n,r)?E.some(n):pe(o)&&o(n)?E.none():e(n,r,o);const Sr=(t,e,n)=>{let r=t.dom;const o=pe(n)?n:Ce;for(;r.parentNode;){r=r.parentNode;const s=O(r);if(e(s))return E.some(s);if(o(s))break}return E.none()},Qn=(t,e,n)=>xo((r,o)=>o(r),Sr,t,e,n),ms=(t,e,n)=>Sr(t,r=>_e(r,e),n),wo=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return sn(o)?E.none():E.from(o.querySelector(n)).map(O)})(e,t),Ur=(t,e,n)=>xo((r,o)=>_e(r,o),ms,t,e,n),no=(t,e=!1)=>{return eo(t)?t.dom.isContentEditable:(n=t,Ur(n,"[contenteditable]")).fold(gt(e),r=>"true"===Pi(r));var n},Pi=t=>t.dom.contentEditable,So=t=>void 0!==t.style&&pe(t.style.getPropertyValue),Fa=(t,e,n)=>{if(!Dt(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);So(t)&&t.style.setProperty(e,n)},ja=(t,e,n)=>{Fa(t.dom,e,n)},ps=(t,e)=>{const n=t.dom;Se(e,(r,o)=>{Fa(n,o,r)})},kr=(t,e)=>{const n=t.dom,r=window.getComputedStyle(n).getPropertyValue(e);return""!==r||eo(t)?r:B(n,e)},B=(t,e)=>So(t)?t.style.getPropertyValue(e):"",q=(t,e)=>{const r=B(t.dom,e);return E.from(r).filter(o=>o.length>0)},et=t=>{const e={},n=t.dom;if(So(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);e[o]=n.style[o]}return e},ot=(t,e)=>{var n,r;r=e,So(n=t.dom)&&n.style.removeProperty(r),ls(Jr(t,"style").map(Yr),"")&&on(t,"style")},at=(t,e)=>{xe(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Bt=(t,e)=>{Zr(t).fold(()=>{xe(t).each(n=>{Nt(n,e)})},n=>{at(n,e)})},Ft=(t,e)=>{Ze(t).fold(()=>{Nt(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Nt=(t,e)=>{t.dom.appendChild(e.dom)},It=(t,e)=>{at(t,e),Nt(e,t)},ge=(t,e)=>{rt(e,n=>{Nt(t,n)})},se=t=>{t.dom.textContent="",rt(Me(t),e=>{Mt(e)})},Mt=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},me=t=>{const e=Me(t);var n,r;e.length>0&&(n=t,rt(r=e,(o,s)=>{Bt(0===s?n:r[s-1],o)})),Mt(t)},ae=t=>re(t,O),tn=t=>t.dom.innerHTML,an=(t,e)=>{const n=he(t).dom,r=O(n.createDocumentFragment()),o=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,Me(O(i))})(e,n);ge(r,o),se(t),Nt(t,r)},Jn=(t,e,n,r)=>{t.dom.removeEventListener(e,n,r)},Zn=(t,e)=>({left:t,top:e,translate:(n,r)=>Zn(t+n,e+r)}),On=Zn,Oe=(t,e)=>void 0!==t?t:void 0!==e?e:0,ro=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?On(n.offsetLeft,n.offsetTop):eo(t)?(r=>{const o=r.getBoundingClientRect();return On(o.left,o.top)})(e):On(0,0)},lr=t=>{const e=void 0!==t?t.dom:document;return On(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Ws=(t,e)=>{An().browser.isSafari()&&pe(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Li=(t,e,n,r)=>({x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}),Mi=t=>{const e=void 0===t?window:t,r=lr(O(e.document));return(o=>{const s=void 0===o?window:o;return An().browser.isFirefox()?E.none():E.from(s.visualViewport)})(e).fold(()=>{const o=e.document.documentElement;return Li(r.left,r.top,o.clientWidth,o.clientHeight)},o=>Li(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},sc=(t,e)=>{let n=[];return rt(Me(t),r=>{e(r)&&(n=n.concat([r])),n=n.concat(sc(r,e))}),n},Dn=(t,e)=>((n,r)=>{const o=void 0===r?document:r.dom;return sn(o)?[]:re(o.querySelectorAll(n),O)})(e,t),cg=(t,e,n)=>ms(t,e,n).isSome();class en{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,r,o){if(e){if(!o&&e[n])return e[n];if(e!==this.rootNode){let s=e[r];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[r],s)return s}}}findPreviousNode(e,n){if(e){const r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let s=r.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return r}const o=e.parentNode;if(o&&o!==this.rootNode)return o}}}const Vs=t=>e=>!!e&&e.nodeType===t,ac=t=>!!t&&!Object.getPrototypeOf(t),xt=Vs(1),Ii=t=>{const e=t.toLowerCase();return n=>mt(n)&&n.nodeName.toLowerCase()===e},oo=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return Tt(e,r)}return!1}},ic=(t,e)=>{const n=e.toLowerCase().split(" ");return r=>{if(xt(r)){const o=r.ownerDocument.defaultView;if(o)for(let s=0;s<n.length;s++){const a=o.getComputedStyle(r,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},dg=t=>e=>xt(e)&&e.hasAttribute(t),Ks=t=>xt(t)&&t.hasAttribute("data-mce-bogus"),Xo=t=>xt(t)&&"TABLE"===t.tagName,ug=t=>e=>!(!xt(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),du=oo(["textarea","input"]),lt=Vs(3),HS=Vs(4),US=Vs(7),gs=Vs(8),Fi=Vs(9),uu=Vs(11),Ie=Ii("br"),fg=Ii("img"),so=ug("true"),Re=ug("false"),lc=oo(["td","th"]),qS=oo(["td","th","caption"]),ko=oo(["video","audio","object","embed"]),$S=Ii("li"),mg=Ii("details"),WS=Ii("summary"),ln="\xa0",fu=t=>"\ufeff"===t,mu=((t,e)=>{const n=r=>t(r)?E.from(r.dom.nodeValue):E.none();return{get:r=>{if(!t(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!t(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(Yn),cc=t=>mu.get(t),pg=t=>mu.getOption(t),VS=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),hs=t=>{let e;return n=>(e=e||_n(t,Be),te(e,Ee(n)))},Er=hs(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),dc=t=>Cn(t)&&!Er(t),Xs=t=>Cn(t)&&"br"===Ee(t),gg=hs(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),pu=hs(["ul","ol","dl"]),ji=hs(["li","dd","dt"]),KS=hs(["thead","tbody","tfoot"]),zi=hs(["td","th"]),uc=hs(["pre","script","textarea","style"]),XS=hs(VS),GS=t=>XS(t)||dc(t),fc=()=>{const t=X("br");return Xe(t,"data-mce-bogus","1"),t},bs=t=>{se(t),Nt(t,fc())},YS=t=>{$e(t).each(e=>{Rn(e).each(n=>{Er(t)&&Xs(e)&&Er(n)&&Mt(e)})})},Bn="\ufeff",mc=fu,Go=t=>t.replace(/\uFEFF/g,""),QS=xt,Ha=lt,Ua=t=>(Ha(t)&&(t=t.parentNode),QS(t)&&t.hasAttribute("data-mce-caret")),vs=t=>Ha(t)&&mc(t.data),_r=t=>Ua(t)||vs(t),hg=t=>t.firstChild!==t.lastChild||!Ie(t.firstChild),gu=t=>{const e=t.container();return!!lt(e)&&(e.data.charAt(t.offset())===Bn||t.isAtStart()&&vs(e.previousSibling))},hu=t=>{const e=t.container();return!!lt(e)&&(e.data.charAt(t.offset()-1)===Bn||t.isAtEnd()&&vs(e.nextSibling))},pc=t=>Ha(t)&&t.data[0]===Bn,gc=t=>Ha(t)&&t.data[t.data.length-1]===Bn,bu=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const r=e.getElementsByTagName("br"),o=r[r.length-1];Ks(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,bg=t=>Ua(t.startContainer),vg=so,JS=Re,ZS=Ie,tk=lt,ek=oo(["script","style","textarea"]),yg=oo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),nk=oo(["table"]),rk=_r,qr=t=>!rk(t)&&(tk(t)?!ek(t.parentNode):yg(t)||ZS(t)||nk(t)||vu(t)),vu=t=>{return!(xt(e=t)&&"true"===e.getAttribute("unselectable"))&&JS(t);var e},Cg=(t,e)=>qr(t)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(vu(o))return!1;if(vg(o))return!0}return!0})(t,e),ok=/^[ \t\r\n]*$/,Gs=t=>ok.test(t),sk=t=>{for(const e of t)if(!fu(e))return!1;return!0},xg=t=>"\n"===t||"\r"===t,wg=(t,e=4,n=!0,r=!0)=>{const o=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,o);var l;return vn(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===ln?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&r||(u=i.str.length+1)<(c=s).length&&u>=0&&xg(c[u])?{pcIsSpace:!1,str:i.str+ln}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:xg(l),str:i.str+l};var c,u},{pcIsSpace:!1,str:""}).str},hc=(t,e)=>{return qr(t)&&(r=e,!(lt(n=t)&&Gs(n.data)&&!((o,s)=>{const a=O(s),i=O(o);return cg(i,"pre,code",kt(de,a))})(n,r)))||(n=>xt(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||ak(t);var n,r},ak=dg("data-mce-bookmark"),ik=dg("data-mce-bogus"),lk=t=>xt(t)&&"all"===t.getAttribute("data-mce-bogus"),We=(t,e=!0)=>((n,r)=>{let o=0;if(hc(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const a=new en(s,n);do{if(r){if(lk(s)){s=a.next(!0);continue}if(ik(s)){s=a.next();continue}}if(Ie(s))o++,s=a.next();else{if(hc(s,n))return!1;s=a.next()}}while(s);return o<=1}})(t.dom,e),bc="data-mce-block",yu=t=>{return(e=t,$t(Qe(e),n=>!/[A-Z]/.test(n))).join(",");var e},Sg=(t,e)=>mt(e.querySelector(t))?(e.setAttribute(bc,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(bc),!1),kg=(t,e)=>{const n=yu(t.getTransparentElements()),r=yu(t.getBlockElements());return $t(e.querySelectorAll(n),o=>Sg(r,o))},Eg=(t,e)=>{var n;const r=e?"lastChild":"firstChild";for(let o=t[r];o;o=o[r])if(We(O(o)))return void(null===(n=o.parentNode)||void 0===n||n.removeChild(o))},Cu=(t,e)=>{const n=kg(t,e);var r,o,s;((t,e,n)=>{const r=t.getBlockElements(),o=O(e),s=i=>Ee(i)in r,a=i=>de(i,o);rt(ae(n),i=>{Sr(i,s,a).each(l=>{const c=$t(Me(i),p=>s(p)&&!t.isValidChild(Ee(l),Ee(p)));if(c.length>0){const u=Ko(l);rt(c,f=>{Sr(f,s,a).each(p=>{((b,g)=>{const v=document.createRange(),h=b.parentNode;if(h){v.setStartBefore(b),v.setEndBefore(g);const C=v.extractContents();Eg(C,!0),v.setStartAfter(g),v.setEndAfter(b);const S=v.extractContents();Eg(S,!1),We(O(C))||h.insertBefore(C,b),We(O(g))||h.insertBefore(g,b),We(O(S))||h.insertBefore(S,b),h.removeChild(b)}})(p.dom,f.dom)})}),u.each(f=>kg(t,f.dom))}})})})(t,e,n),r=t,o=e,s=n,rt([...s,...Ys(r,o)?[o]:[]],a=>rt(Dn(O(a),a.nodeName.toLowerCase()),i=>{uk(r,i.dom)&&me(i)}))},dk=(t,e)=>{if(Su(t,e)){const n=yu(t.getBlockElements());Sg(n,e)}},xu=t=>t.hasAttribute(bc),wu=(t,e)=>te(t.getTransparentElements(),e),Su=(t,e)=>xt(e)&&wu(t,e.nodeName),Ys=(t,e)=>Su(t,e)&&xu(e),uk=(t,e)=>Su(t,e)&&!xu(e),ku=(t,e)=>1===e.type&&wu(t,e.name)&&Dt(e.attr(bc)),fk=An().browser,_g=t=>qe(t,Cn),Ng=(t,e)=>t.children&&Tt(t.children,e),Ag=(t,e={})=>{let n=0;const r={},o=O(t),s=zn(o),a=l=>new Promise((c,u)=>{let f;const p=dt._addCacheSuffix(l),b=ke(r,p).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));r[p]=b,b.count++;const g=(k,N)=>{rt(k,Vn),b.status=N,b.passed=[],b.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},v=()=>g(b.passed,2),h=()=>g(b.failed,3);if(c&&b.passed.push(c),u&&b.failed.push(u),1===b.status)return;if(2===b.status)return void v();if(3===b.status)return void h();b.status=1;const C=X("link",s.dom);var S;Qr(C,{rel:"stylesheet",type:"text/css",id:b.id}),e.contentCssCors&&Xe(C,"crossOrigin","anonymous"),e.referrerPolicy&&Xe(C,"referrerpolicy",e.referrerPolicy),f=C.dom,f.onload=v,f.onerror=h,S=C,Nt(He(o),S),Xe(C,"href",p)}),i=l=>{const c=dt._addCacheSuffix(l);ke(r,c).each(u=>{0==--u.count&&(delete r[c],(f=>{const p=He(o);wo(p,"#"+f).each(Mt)})(u.id))})};return{load:a,loadAll:l=>Promise.allSettled(re(l,c=>a(c).then(gt(c)))).then(c=>{const u=Kr(c,f=>"fulfilled"===f.status);return u.fail.length>0?Promise.reject(re(u.fail,f=>f.reason)):re(u.pass,f=>f.value)}),unload:i,unloadAll:l=>{rt(l,c=>{i(c)})},_setReferrerPolicy:l=>{e.referrerPolicy=l},_setContentCssCors:l=>{e.contentCssCors=l}}},Rg=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const r=Te(e).dom;return E.from(t.get(r)).getOrThunk(()=>{const o=Ag(r,n);return t.set(r,o),o})}}})(),Tg=(t,e)=>mt(t)&&(hc(t,e)||dc(O(t))),Og=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Eu=(t,e,n)=>{var r;const o=n||e;if(xt(e)&&Og(e))return e;const s=e.childNodes;for(let a=s.length-1;a>=0;a--)Eu(t,s[a],o);if(xt(e)){const a=e.childNodes;1===a.length&&Og(a[0])&&(null===(r=e.parentNode)||void 0===r||r.insertBefore(a[0],e))}return uu(a=e)||Fi(a)||hc(e,o)||(a=>!!xt(a)&&a.childNodes.length>0)(e)||((a,i)=>lt(a)&&a.data.length>0&&((l,c)=>{const u=new en(l,c).prev(!1),f=new en(l,c).next(!1),p=De(u)||Tg(u,c),b=De(f)||Tg(f,c);return p&&b})(a,i))(e,o)||t.remove(e),e;var a},mk=dt.makeMap,vc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pk=/[<>&\"\']/g,gk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,hk={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Qs={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},bk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Dg=(t,e)=>{const n={};if(t){const r=t.split(",");e=e||10;for(let o=0;o<r.length;o+=2){const s=String.fromCharCode(parseInt(r[o],e));if(!Qs[s]){const a="&"+r[o+1]+";";n[s]=a,n[a]=s}}return n}},_u=Dg("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Bg=(t,e)=>t.replace(e?vc:yc,n=>Qs[n]||n),Pg=(t,e)=>t.replace(e?vc:yc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Qs[n]||"&#"+n.charCodeAt(0)+";"),Nu=(t,e,n)=>{const r=n||_u;return t.replace(e?vc:yc,o=>Qs[o]||r[o]||o)},ys={encodeRaw:Bg,encodeAllRaw:t=>(""+t).replace(pk,e=>Qs[e]||e),encodeNumeric:Pg,encodeNamed:Nu,getEncodeFunc:(t,e)=>{const n=Dg(e)||_u,r=mk(t.replace(/\+/g,","));return r.named&&r.numeric?(o,s)=>o.replace(s?vc:yc,a=>void 0!==Qs[a]?Qs[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):r.named?e?(o,s)=>Nu(o,s,n):Nu:r.numeric?Pg:Bg},decode:t=>t.replace(gk,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):hk[n]||String.fromCharCode(n):bk[e]||_u[e]||(r=>{const o=X("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(e))},Cc={},xc={},vk={},qa=dt.makeMap,Pn=dt.each,Au=dt.extend,Lg=dt.explode,yk=dt.inArray,Sn=(t,e)=>(t=dt.trim(t))?t.split(e||" "):[],Mg=(t,e={})=>{const n=qa(t," ",qa(t.toUpperCase()," "));return Au(n,e)},Ig=t=>Mg("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Ru=(t,e)=>{if(t){const n={};return Dt(t)&&(t={"*":t}),Pn(t,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===e?qa(r,/[, ]/):Lg(r,/[, ]/)}),n}},Cs=(t={})=>{var e;const n={},r={};let o=[];const s={},a={},i=(Z,ft,At)=>{const Ct=t[Z];if(Ct)return qa(Ct,/[, ]/,qa(Ct.toUpperCase(),/[, ]/));{let zt=xc[Z];return zt||(zt=Mg(ft,At),xc[Z]=zt),zt}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(Z=>{const ft={};let At,Ct,zt,Ut;const bt=(Ve,Pe="",sr="")=>{const ar=Sn(sr),mo=Sn(Ve);let Vr=mo.length;for(;Vr--;){const bn=Sn([At,Pe].join(" "));ft[mo[Vr]]={attributes:_n(bn,()=>({})),attributesOrder:bn,children:_n(ar,gt(vk))}}},Zt=(Ve,Pe)=>{const sr=Sn(Ve),ar=Sn(Pe);let mo=sr.length;for(;mo--;){const Vr=ft[sr[mo]];for(let bn=0,ur=ar.length;bn<ur;bn++)Vr.attributes[ar[bn]]={},Vr.attributesOrder.push(ar[bn])}};if(Cc[Z])return Cc[Z];if(At="id accesskey class dir lang style tabindex title role",Ct="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",zt="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==Z&&(At+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",Ct+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",zt+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==Z){At+=" xml:lang";const Ve="acronym applet basefont big font strike tt";zt=[zt,Ve].join(" "),Pn(Sn(Ve),sr=>{bt(sr,"",zt)});const Pe="center dir isindex noframes";Ct=[Ct,Pe].join(" "),Ut=[Ct,zt].join(" "),Pn(Sn(Pe),sr=>{bt(sr,"",Ut)})}return Ut=Ut||[Ct,zt].join(" "),bt("html","manifest","head body"),bt("head","","base command link meta noscript script style title"),bt("title hr noscript br"),bt("base","href target"),bt("link","href rel media hreflang type sizes hreflang"),bt("meta","name http-equiv content charset"),bt("style","media type scoped"),bt("script","src async defer type charset"),bt("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Ut),bt("dd div","",Ut),bt("address dt caption","","html4"===Z?zt:Ut),bt("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",zt),bt("blockquote","cite",Ut),bt("ol","reversed start type","li"),bt("ul","","li"),bt("li","value",Ut),bt("dl","","dt dd"),bt("a","href target rel media hreflang type","html4"===Z?zt:Ut),bt("q","cite",zt),bt("ins del","cite datetime",Ut),bt("img","src sizes srcset alt usemap ismap width height"),bt("iframe","src name width height",Ut),bt("embed","src type width height"),bt("object","data type typemustmatch name usemap form width height",[Ut,"param"].join(" ")),bt("param","name value"),bt("map","name",[Ut,"area"].join(" ")),bt("area","alt coords shape href target rel media hreflang type"),bt("table","border","caption colgroup thead tfoot tbody tr"+("html4"===Z?" col":"")),bt("colgroup","span","col"),bt("col","span"),bt("tbody thead tfoot","","tr"),bt("tr","","td th"),bt("td","colspan rowspan headers",Ut),bt("th","colspan rowspan headers scope abbr",Ut),bt("form","accept-charset action autocomplete enctype method name novalidate target",Ut),bt("fieldset","disabled form name",[Ut,"legend"].join(" ")),bt("label","form for",zt),bt("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),bt("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===Z?Ut:zt),bt("select","disabled form multiple name required size","option optgroup"),bt("optgroup","disabled label","option"),bt("option","disabled label selected value"),bt("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),bt("menu","type label",[Ut,"li"].join(" ")),bt("noscript","",Ut),"html4"!==Z&&(bt("wbr"),bt("ruby","",[zt,"rt rp"].join(" ")),bt("figcaption","",Ut),bt("mark rt rp summary bdi","",zt),bt("canvas","width height",Ut),bt("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Ut,"track source"].join(" ")),bt("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Ut,"track source"].join(" ")),bt("picture","","img source"),bt("source","src srcset type media sizes"),bt("track","kind src srclang label default"),bt("datalist","",[zt,"option"].join(" ")),bt("article section nav aside main header footer","",Ut),bt("hgroup","","h1 h2 h3 h4 h5 h6"),bt("figure","",[Ut,"figcaption"].join(" ")),bt("time","datetime",zt),bt("dialog","open",Ut),bt("command","type label icon disabled checked radiogroup command"),bt("output","for form name",zt),bt("progress","value max",zt),bt("meter","value min max low high optimum",zt),bt("details","open",[Ut,"summary"].join(" ")),bt("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==Z&&(Zt("script","language xml:space"),Zt("style","xml:space"),Zt("object","declare classid code codebase codetype archive standby align border hspace vspace"),Zt("embed","align name hspace vspace"),Zt("param","valuetype type"),Zt("a","charset name rev shape coords"),Zt("br","clear"),Zt("applet","codebase archive code object alt name width height align hspace vspace"),Zt("img","name longdesc align border hspace vspace"),Zt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Zt("font basefont","size color face"),Zt("input","usemap align"),Zt("select"),Zt("textarea"),Zt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Zt("ul","type compact"),Zt("li","type"),Zt("ol dl menu dir","compact"),Zt("pre","width xml:space"),Zt("hr","align noshade size width"),Zt("isindex","prompt"),Zt("table","summary width frame rules cellspacing cellpadding align bgcolor"),Zt("col","width align char charoff valign"),Zt("colgroup","width align char charoff valign"),Zt("thead","align char charoff valign"),Zt("tr","align char charoff valign bgcolor"),Zt("th","axis align char charoff valign nowrap bgcolor width height"),Zt("form","accept"),Zt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Zt("tfoot","align char charoff valign"),Zt("tbody","align char charoff valign"),Zt("area","nohref"),Zt("body","background bgcolor text link vlink alink")),"html4"!==Z&&(Zt("input button select textarea","autofocus"),Zt("input textarea","placeholder"),Zt("a","download"),Zt("link script img","crossorigin"),Zt("img","loading"),Zt("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==Z&&rt([ft.video,ft.audio],Ve=>{delete Ve.children.audio,delete Ve.children.video}),Pn(Sn("a form meter progress dfn"),Ve=>{ft[Ve]&&delete ft[Ve].children[Ve]}),delete ft.caption.children.table,delete ft.script,Cc[Z]=ft,ft})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const u=Ru(t.valid_styles),f=Ru(t.invalid_styles,"map"),p=Ru(t.valid_classes,"map"),b=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),C="td th iframe video audio object script code",S=i("non_empty_elements",C+" pre",v),k=i("move_caret_before_on_enter_elements",C+" table",v),N=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),R=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",N),D=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),P=i("transparent_elements","a ins del canvas map");Pn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Z=>{a[Z]=new RegExp("</"+Z+"[^>]*>","gi")});const U=Z=>new RegExp("^"+Z.replace(/([?+*])/g,".$1")+"$"),Y=Z=>{const ft=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,At=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Ct=/[*?+]/;if(Z){const zt=Sn(Z,",");let Ut,bt;n["@"]&&(Ut=n["@"].attributes,bt=n["@"].attributesOrder);for(let Zt=0,Ve=zt.length;Zt<Ve;Zt++){let Pe=ft.exec(zt[Zt]);if(Pe){const sr=Pe[1],ar=Pe[2],mo=Pe[3],Vr=Pe[5],bn={},ur=[],Fe={attributes:bn,attributesOrder:ur};if("#"===sr&&(Fe.paddEmpty=!0),"-"===sr&&(Fe.removeEmpty=!0),"!"===Pe[4]&&(Fe.removeEmptyAttrs=!0),Ut&&(Se(Ut,(Mo,Ps)=>{bn[Ps]=Mo}),bt&&ur.push(...bt)),Vr){const Mo=Sn(Vr,"|");for(let Ps=0,eu=Mo.length;Ps<eu;Ps++)if(Pe=At.exec(Mo[Ps]),Pe){const Io={},Ul=Pe[1],br=Pe[2].replace(/[\\:]:/g,":"),Ls=Pe[3],vr=Pe[4];if("!"===Ul&&(Fe.attributesRequired=Fe.attributesRequired||[],Fe.attributesRequired.push(br),Io.required=!0),"-"===Ul){delete bn[br],ur.splice(yk(ur,br),1);continue}if(Ls&&("="===Ls&&(Fe.attributesDefault=Fe.attributesDefault||[],Fe.attributesDefault.push({name:br,value:vr}),Io.defaultValue=vr),"~"===Ls&&(Fe.attributesForced=Fe.attributesForced||[],Fe.attributesForced.push({name:br,value:vr}),Io.forcedValue=vr),"<"===Ls&&(Io.validValues=qa(vr,"?"))),Ct.test(br)){const ka=Io;Fe.attributePatterns=Fe.attributePatterns||[],ka.pattern=U(br),Fe.attributePatterns.push(ka)}else bn[br]||ur.push(br),bn[br]=Io}}if(Ut||"@"!==ar||(Ut=bn,bt=ur),mo&&(Fe.outputName=ar,n[mo]=Fe),Ct.test(ar)){const Mo=Fe;Mo.pattern=U(ar),o.push(Mo)}else n[ar]=Fe}}}},V=Z=>{o=[],rt(Qe(n),ft=>{delete n[ft]}),Y(Z),Pn(c,(ft,At)=>{r[At]=ft.children})},L=Z=>{const ft=/^(~)?(.+)$/;Z&&(delete xc.text_block_elements,delete xc.block_elements,Pn(Sn(Z,","),At=>{const Ct=ft.exec(At);if(Ct){const zt="~"===Ct[1],Ut=zt?"span":"div",bt=Ct[2];if(r[bt]=r[Ut],s[bt]=Ut,S[bt.toUpperCase()]={},S[bt]={},zt||(R[bt.toUpperCase()]={},R[bt]={}),!n[bt]){let Zt=n[Ut];Zt=Au({},Zt),delete Zt.removeEmptyAttrs,delete Zt.removeEmpty,n[bt]=Zt}Pn(r,(Zt,Ve)=>{Zt[Ut]&&(r[Ve]=Zt=Au({},r[Ve]),Zt[bt]=Zt[Ut])})}}))},z=Z=>{const ft=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Cc[l],Z&&Pn(Sn(Z,","),At=>{const Ct=ft.exec(At);if(Ct){const zt=Ct[1];let Ut;Ut=zt?r[Ct[2]]:r[Ct[2]]={"#comment":{}},Ut=r[Ct[2]],Pn(Sn(Ct[3],"|"),bt=>{"-"===zt?delete Ut[bt]:Ut[bt]={}})}})},I=Z=>{const ft=n[Z];if(ft)return ft;let At=o.length;for(;At--;){const Ct=o[At];if(Ct.pattern.test(Z))return Ct}};t.valid_elements?V(t.valid_elements):(Pn(c,(Z,ft)=>{n[ft]={attributes:Z.attributes,attributesOrder:Z.attributesOrder},r[ft]=Z.children}),Pn(Sn("strong/b em/i"),Z=>{const ft=Sn(Z,"/");n[ft[1]].outputName=ft[0]}),Pn(D,(Z,ft)=>{n[ft]&&(t.padd_empty_block_inline_children&&(n[ft].paddInEmptyBlock=!0),n[ft].removeEmpty=!0)}),Pn(Sn("ol ul blockquote a table tbody"),Z=>{n[Z]&&(n[Z].removeEmpty=!0)}),Pn(Sn("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Z=>{n[Z]&&(n[Z].paddEmpty=!0)}),Pn(Sn("span"),Z=>{n[Z].removeEmptyAttrs=!0})),L(t.custom_elements),z(t.valid_children),Y(t.extended_valid_elements),z("+ol[ul|ol],+ul[ul|ol]"),Pn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Z,ft)=>{n[ft]&&(n[ft].parentsRequired=Sn(Z))}),t.invalid_elements&&Pn(Lg(t.invalid_elements),Z=>{n[Z]&&delete n[Z]}),I("span")||Y("span[!data-mce-type|*]");const $=gt(u),pt=gt(f),it=gt(p),Ot=gt(h),ht=gt(R),Kt=gt(N),Yt=gt(D),yt=gt(Object.seal(v)),Rt=gt(g),jt=gt(S),M=gt(k),j=gt(b),Q=gt(P),nt=gt(Object.seal(a)),J=gt(s);return{type:l,children:r,elements:n,getValidStyles:$,getValidClasses:it,getBlockElements:ht,getInvalidStyles:pt,getVoidElements:yt,getTextBlockElements:Kt,getTextInlineElements:Yt,getBoolAttrs:Ot,getElementRule:I,getSelfClosingElements:Rt,getNonEmptyElements:jt,getMoveCaretBeforeOnEnterElements:M,getWhitespaceElements:j,getTransparentElements:Q,getSpecialElements:nt,isValidChild:(Z,ft)=>{const At=r[Z.toLowerCase()];return!(!At||!At[ft.toLowerCase()])},isValid:(Z,ft)=>{const At=I(Z);if(At){if(!ft)return!0;{if(At.attributes[ft])return!0;const Ct=At.attributePatterns;if(Ct){let zt=Ct.length;for(;zt--;)if(Ct[zt].pattern.test(ft))return!0}}}return!1},getCustomElements:J,addValidElements:Y,setValidElements:V,addCustomElements:L,addValidChildren:z}},Tu=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let f=0;f<c.length;f++)s[c[f]]="\ufeff"+f,s["\ufeff"+f]=c[f];const u={parse:f=>{const p={};let b=!1;const g=t.url_converter,v=t.url_converter_scope||u,h=(V,L,z)=>{const I=p[V+"-top"+L];if(!I)return;const $=p[V+"-right"+L];if(!$)return;const pt=p[V+"-bottom"+L];if(!pt)return;const it=p[V+"-left"+L];if(!it)return;const Ot=[I,$,pt,it];let ht=Ot.length-1;for(;ht--&&Ot[ht]===Ot[ht+1];);ht>-1&&z||(p[V+L]=-1===ht?Ot[0]:Ot.join(" "),delete p[V+"-top"+L],delete p[V+"-right"+L],delete p[V+"-bottom"+L],delete p[V+"-left"+L])},C=V=>{const L=p[V];if(!L)return;const z=L.split(" ");let I=z.length;for(;I--;)if(z[I]!==z[0])return!1;return p[V]=z[0],!0},S=V=>(b=!0,s[V]),k=(V,L)=>(b&&(V=V.replace(/\uFEFF[0-9]/g,z=>s[z])),L||(V=V.replace(/\\([\'\";:])/g,"$1")),V),N=V=>String.fromCharCode(parseInt(V.slice(1),16)),R=V=>V.replace(/\\[0-9a-f]+/gi,N),D=(V,L,z,I,$,pt)=>{if($=$||pt)return"'"+($=k($)).replace(/\'/g,"\\'")+"'";if(L=k(L||z||I||""),!t.allow_script_urls){const it=L.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(it)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(it))return""}return g&&(L=g.call(v,L,"style")),"url('"+L.replace(/\'/g,"\\'")+"')"};if(f){let V;for(f=(f=f.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,S).replace(/\"[^\"]+\"|\'[^\']+\'/g,L=>L.replace(/[;:]/g,S));V=r.exec(f);){r.lastIndex=V.index+V[0].length;let L=V[1].replace(o,"").toLowerCase(),z=V[2].replace(o,"");if(L&&z){if(L=R(L),z=R(z),-1!==L.indexOf("\ufeff")||-1!==L.indexOf('"')||!t.allow_script_urls&&("behavior"===L||/expression\s*\(|\/\*|\*\//.test(z)))continue;"font-weight"===L&&"700"===z?z="bold":"color"!==L&&"background-color"!==L||(z=z.toLowerCase()),z=z.replace(n,D),p[L]=b?k(z,!0):z}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),U="border-style",Y="border-color",C(P="border-width")&&C(U)&&C(Y)&&(p.border=p[P]+" "+p[U]+" "+p[Y],delete p[P],delete p[U],delete p[Y]),"medium none"===p.border&&delete p.border,"none"===p["border-image"]&&delete p["border-image"]}var P,U,Y;return p},serialize:(f,p)=>{let b="";const g=(v,h)=>{const C=h[v];if(C)for(let S=0,k=C.length;S<k;S++){const N=C[S],R=f[N];R&&(b+=(b.length>0?" ":"")+N+": "+R+";")}};return p&&a?(g("*",a),g(p,a)):Se(f,(v,h)=>{v&&((C,S)=>{if(!i||!S)return!0;let k=i["*"];return!(k&&k[C]||(k=i[S],k&&k[C]))})(h,p)&&(b+=(b.length>0?" ":"")+h+": "+v+";")}),b}};return u},Ck={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Fg=(t,e)=>{const n=e??{};for(const r in t)te(Ck,r)||(n[r]=t[r]);return mt(t.composedPath)&&(n.composedPath=()=>t.composedPath()),n},Ou=(t,e,n,r)=>{var o;const s=Fg(e,r);return s.type=t,ye(s.target)&&(s.target=null!==(o=s.srcElement)&&void 0!==o?o:n),(ye((a=e).preventDefault)||(i=a)instanceof Event||pe(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Be,pe(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Be,pe(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Be,s.stopPropagation()},(a=>a.isDefaultPrevented===Be||a.isDefaultPrevented===Ce)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Be:Ce,s.isPropagationStopped=!0===s.cancelBubble?Be:Ce,s.isImmediatePropagationStopped=Ce)),s;var a,i},xk=/^(?:mouse|contextmenu)|click/,Du=(t,e,n,r)=>{t.addEventListener(e,n,r||!1)},wc=(t,e,n,r)=>{t.removeEventListener(e,n,r||!1)},Hi=(t,e)=>{const n=Ou(t.type,t,document,e);if(mt(r=t)&&xk.test(r.type)&&De(t.pageX)&&!De(t.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,s=r.body,a=n;a.pageX=t.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)}var r;return n},wk=(t,e,n)=>{const r=t.document,o={type:"ready"};if(n.domLoaded)return void e(o);const s=()=>{wc(t,"DOMContentLoaded",s),wc(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(o)),t=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?s():Du(t,"DOMContentLoaded",s),n.domLoaded||Du(t,"load",s)};class Js{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,r,o){const s=this;let a;const i=window,l=p=>{s.executeHandlers(Hi(p||i.event),c)};if(!e||lt(e)||gs(e))return r;let c;e[s.expando]?c=e[s.expando]:(c=s.count++,e[s.expando]=c,s.events[c]={}),o=o||e;const u=n.split(" ");let f=u.length;for(;f--;){let p=u[f],b=l,g=!1,v=!1;"DOMContentLoaded"===p&&(p="ready"),s.domLoaded&&"ready"===p&&"complete"===e.readyState?r.call(o,Hi({type:p})):(s.hasFocusIn||"focusin"!==p&&"focusout"!==p||(g=!0,v="focusin"===p?"focus":"blur",b=h=>{const C=Hi(h||i.event);C.type="focus"===C.type?"focusin":"focusout",s.executeHandlers(C,c)}),a=s.events[c][p],a?"ready"===p&&s.domLoaded?r(Hi({type:p})):a.push({func:r,scope:o}):(s.events[c][p]=a=[{func:r,scope:o}],a.fakeName=v,a.capture=g,a.nativeHandler=b,"ready"===p?wk(e,b,s):Du(e,v||p,b,g)))}return e=a=null,r}unbind(e,n,r){if(!e||lt(e)||gs(e))return this;const o=e[this.expando];if(o){let s=this.events[o];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],c=s[l];if(c){if(r){let u=c.length;for(;u--;)if(c[u].func===r){const f=c.nativeHandler,p=c.fakeName,b=c.capture,g=c.slice(0,u).concat(c.slice(u+1));g.nativeHandler=f,g.fakeName=p,g.capture=b,s[l]=g}}r&&0!==c.length||(delete s[l],wc(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else Se(s,(a,i)=>{wc(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(te(s,a))return this;delete this.events[o];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,r){return this.dispatch(e,n,r)}dispatch(e,n,r){if(!e||lt(e)||gs(e))return this;const o=Hi({type:n,target:e},r);do{const s=e[this.expando];s&&this.executeHandlers(o,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}clean(e){if(!e||lt(e)||gs(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let r=n.length;for(;r--;)(e=n[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const r=this.events[n],o=r&&r[e.type];if(o)for(let s=0,a=o.length;s<a;s++){const i=o[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Js.Event=new Js;const Bu=dt.each,Sk=dt.grep,Pu="data-mce-style",kk=dt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ui=(t,e,n)=>{ye(n)||""===n?on(t,e):Xe(t,e,n)},jg=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),$a=(t,e)=>{let n=0;if(t)for(let r=t.nodeType,o=t.previousSibling;o;o=o.previousSibling){const s=o.nodeType;(!e||!lt(o)||s!==r&&o.data.length)&&(n++,r=s)}return n},zg=(t,e)=>{const n=jn(e,"style"),r=t.serialize(t.parse(n),Ee(e));Ui(e,Pu,r)},Hg=(t,e,n)=>{const r=jg(e);var o,s;ye(n)||""===n?ot(t,r):ja(t,r,(s=r,x(o=n)?te(kk,s)?o+"":o+"px":o))},we=(t,e={})=>{const n={},r=window,o={};let s=0;const a=Rg.forElement(O(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:Cs({}),c=Tu({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),u=e.ownEvents?new Js:Js.Event,f=l.getBlockElements(),p=M=>M&&t&&Dt(M)?t.getElementById(M):M,b=M=>{const j=p(M);return mt(j)?O(j):null},g=(M,j,Q="")=>{let nt;const J=b(M);if(mt(J)&&Cn(J)){const Z=jt[j];nt=Z&&Z.get?Z.get(J.dom,j):jn(J,j)}return mt(nt)?nt:Q},v=M=>{const j=p(M);return ye(j)?[]:j.attributes},h=(M,j,Q)=>{U(M,nt=>{if(xt(nt)){const J=O(nt),Z=""===Q?null:Q,ft=jn(J,j),At=jt[j];At&&At.set?At.set(J.dom,Z,j):Ui(J,j,Z),ft!==Z&&e.onSetAttrib&&e.onSetAttrib({attrElm:J.dom,attrName:j,attrValue:Z})}})},C=()=>e.root_element||t.body,S=(M,j)=>((Q,nt,J)=>{let Z=0,ft=0;const At=Q.ownerDocument;if(J=J||Q,nt){if(J===Q&&nt.getBoundingClientRect&&"static"===kr(O(Q),"position")){const zt=nt.getBoundingClientRect();return Z=zt.left+(At.documentElement.scrollLeft||Q.scrollLeft)-At.documentElement.clientLeft,ft=zt.top+(At.documentElement.scrollTop||Q.scrollTop)-At.documentElement.clientTop,{x:Z,y:ft}}let Ct=nt;for(;Ct&&Ct!==J&&Ct.nodeType&&!Ng(Ct,J);)Z+=Ct.offsetLeft||0,ft+=Ct.offsetTop||0,Ct=Ct.offsetParent;for(Ct=nt.parentNode;Ct&&Ct!==J&&Ct.nodeType&&!Ng(Ct,J);)Z-=Ct.scrollLeft||0,ft-=Ct.scrollTop||0,Ct=Ct.parentNode;ft+=(zt=O(nt),fk.isFirefox()&&"table"===Ee(zt)?_g(Me(zt)).filter(Ut=>"caption"===Ee(Ut)).bind(Ut=>_g(to(Ut)).map(bt=>bt.dom.offsetTop<=Ut.dom.offsetTop?-Ut.dom.offsetHeight:0)).getOr(0):0)}var zt;return{x:Z,y:ft}})(t.body,p(M),j),k=(M,j,Q)=>{const nt=p(M);if(!ye(nt)&&xt(nt))return Q?kr(O(nt),jg(j)):("float"===(j=j.replace(/-(\D)/g,(J,Z)=>Z.toUpperCase()))&&(j="cssFloat"),nt.style?nt.style[j]:void 0)},N=M=>{const j=p(M);if(!j)return{w:0,h:0};let Q=k(j,"width"),nt=k(j,"height");return Q&&-1!==Q.indexOf("px")||(Q="0"),nt&&-1!==nt.indexOf("px")||(nt="0"),{w:parseInt(Q,10)||j.offsetWidth||j.clientWidth,h:parseInt(nt,10)||j.offsetHeight||j.clientHeight}},R=(M,j)=>{if(!M)return!1;const Q=ct(M)?M:[M];return Ae(Q,nt=>_e(O(nt),j))},D=(M,j,Q,nt)=>{const J=[];let Z=p(M);nt=void 0===nt;const ft=Q||("BODY"!==C().nodeName?C().parentNode:null);if(Dt(j))if("*"===j)j=xt;else{const At=j;j=Ct=>R(Ct,At)}for(;Z&&!(Z===ft||ye(Z.nodeType)||Fi(Z)||uu(Z));){if(!j||j(Z)){if(!nt)return[Z];J.push(Z)}Z=Z.parentNode}return nt?J:null},P=(M,j,Q)=>{let nt=j;if(M){Dt(j)&&(nt=J=>R(J,j));for(let J=M[Q];J;J=J[Q])if(pe(nt)&&nt(J))return J}return null},U=function(M,j,Q){const nt=Q??this;if(ct(M)){const J=[];return Bu(M,(Z,ft)=>{const At=p(Z);At&&J.push(j.call(nt,At,ft))}),J}{const J=p(M);return!!J&&j.call(nt,J)}},Y=(M,j)=>{U(M,Q=>{Se(j,(nt,J)=>{h(Q,J,nt)})})},V=(M,j)=>{U(M,Q=>{const nt=O(Q);an(nt,j)})},L=(M,j,Q,nt,J)=>U(M,Z=>{const ft=Dt(j)?t.createElement(j):j;return mt(Q)&&Y(ft,Q),nt&&(!Dt(nt)&&nt.nodeType?ft.appendChild(nt):Dt(nt)&&V(ft,nt)),J?ft:Z.appendChild(ft)}),z=(M,j,Q)=>L(t.createElement(M),M,j,Q,!0),I=ys.encodeAllRaw,$=(M,j)=>U(M,Q=>{const nt=O(Q);return j&&rt(Me(nt),J=>{Yn(J)&&0===J.dom.length?Mt(J):at(nt,J)}),Mt(nt),nt.dom}),pt=(M,j,Q)=>{U(M,nt=>{if(xt(nt)){const J=O(nt),Z=j.split(" ");rt(Z,ft=>{var At,Ct,Ut,bt;mt(Q)?(Q?T:F)(J,ft):(Ct=ft,y(At=J)?At.dom.classList.toggle(Ct):(bt=Ct,Tt(w(Ut=At),bt)?A(Ut,bt):_(Ut,bt)),H(At))})}})},it=(M,j,Q)=>U(j,nt=>{var J;const Z=ct(j)?M.cloneNode(!0):M;return Q&&Bu(Sk(nt.childNodes),ft=>{Z.appendChild(ft)}),null===(J=nt.parentNode)||void 0===J||J.replaceChild(Z,nt),nt}),Ot=M=>{if(xt(M)){const j="a"===M.nodeName.toLowerCase()&&!g(M,"href")&&g(M,"id");if(g(M,"name")||g(M,"data-mce-bookmark")||j)return!0}return!1},ht=()=>t.createRange(),Kt=(M,j,Q,nt)=>{if(ct(M)){let J=M.length;const Z=[];for(;J--;)Z[J]=Kt(M[J],j,Q,nt);return Z}return!e.collect||M!==t&&M!==r||i.push([M,j,Q,nt]),u.bind(M,j,Q,nt||Rt)},Yt=(M,j,Q)=>{if(ct(M)){let nt=M.length;const J=[];for(;nt--;)J[nt]=Yt(M[nt],j,Q);return J}if(i.length>0&&(M===t||M===r)){let nt=i.length;for(;nt--;){const[J,Z,ft]=i[nt];M!==J||j&&j!==Z||Q&&Q!==ft||u.unbind(J,Z,ft)}}return u.unbind(M,j,Q)},yt=M=>{if(M&&xt(M)){const j=M.getAttribute("data-mce-contenteditable");return j&&"inherit"!==j?j:"inherit"!==M.contentEditable?M.contentEditable:null}return null},Rt={doc:t,settings:e,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:c,schema:l,events:u,isBlock:M=>Dt(M)?te(f,M):xt(M)&&(te(f,M.nodeName)||Ys(l,M)),root:null,clone:(M,j)=>M.cloneNode(j),getRoot:C,getViewPort:M=>{const j=Mi(M);return{x:j.x,y:j.y,w:j.width,h:j.height}},getRect:M=>{const j=p(M),Q=S(j),nt=N(j);return{x:Q.x,y:Q.y,w:nt.w,h:nt.h}},getSize:N,getParent:(M,j,Q)=>{const nt=D(M,j,Q,!1);return nt&&nt.length>0?nt[0]:null},getParents:D,get:p,getNext:(M,j)=>P(M,j,"nextSibling"),getPrev:(M,j)=>P(M,j,"previousSibling"),select:(M,j)=>{var Q,nt;const J=null!==(nt=null!==(Q=p(j))&&void 0!==Q?Q:e.root_element)&&void 0!==nt?nt:t;return pe(J.querySelectorAll)?Ye(J.querySelectorAll(M)):[]},is:R,add:L,create:z,createHTML:(M,j,Q="")=>{let nt="<"+M;for(const J in j)yn(j,J)&&(nt+=" "+J+'="'+I(j[J])+'"');return as(Q)&&te(l.getVoidElements(),M)?nt+" />":nt+">"+Q+"</"+M+">"},createFragment:M=>{const j=t.createElement("div"),Q=t.createDocumentFragment();let nt;for(Q.appendChild(j),M&&(j.innerHTML=M);nt=j.firstChild;)Q.appendChild(nt);return Q.removeChild(j),Q},remove:$,setStyle:(M,j,Q)=>{U(M,nt=>{const J=O(nt);Hg(J,j,Q),e.update_styles&&zg(c,J)})},getStyle:k,setStyles:(M,j)=>{U(M,Q=>{const nt=O(Q);Se(j,(J,Z)=>{Hg(nt,Z,J)}),e.update_styles&&zg(c,nt)})},removeAllAttribs:M=>U(M,j=>{const Q=j.attributes;for(let nt=Q.length-1;nt>=0;nt--)j.removeAttributeNode(Q.item(nt))}),setAttrib:h,setAttribs:Y,getAttrib:g,getPos:S,parseStyle:M=>c.parse(M),serializeStyle:(M,j)=>c.serialize(M,j),addStyle:M=>{if(Rt!==we.DOM&&t===document){if(n[M])return;n[M]=!0}let j=t.getElementById("mceDefaultStyles");if(!j){j=t.createElement("style"),j.id="mceDefaultStyles",j.type="text/css";const Q=t.head;Q.firstChild?Q.insertBefore(j,Q.firstChild):Q.appendChild(j)}j.styleSheet?j.styleSheet.cssText+=M:j.appendChild(t.createTextNode(M))},loadCSS:M=>{M||(M=""),rt(M.split(","),j=>{o[j]=!0,a.load(j).catch(_t)})},addClass:(M,j)=>{pt(M,j,!0)},removeClass:(M,j)=>{pt(M,j,!1)},hasClass:(M,j)=>{const Q=b(M),nt=j.split(" ");return mt(Q)&&mr(nt,J=>K(Q,J))},toggleClass:pt,show:M=>{U(M,j=>ot(O(j),"display"))},hide:M=>{U(M,j=>ja(O(j),"display","none"))},isHidden:M=>{const j=b(M);return mt(j)&&ls(q(j,"display"),"none")},uniqueId:M=>(M||"mce_")+s++,setHTML:V,getOuterHTML:M=>{const j=b(M);return mt(j)?xt(j.dom)?j.dom.outerHTML:(Q=>{const nt=X("div"),J=O(Q.dom.cloneNode(!0));return Nt(nt,J),tn(nt)})(j):""},setOuterHTML:(M,j)=>{U(M,Q=>{xt(Q)&&(Q.outerHTML=j)})},decode:ys.decode,encode:I,insertAfter:(M,j)=>{const Q=p(j);return U(M,nt=>{const J=Q?.parentNode,Z=Q?.nextSibling;return J&&(Z?J.insertBefore(nt,Z):J.appendChild(nt)),nt})},replace:it,rename:(M,j)=>{if(M.nodeName!==j.toUpperCase()){const Q=z(j);return Bu(v(M),nt=>{h(Q,nt.nodeName,g(M,nt.nodeName))}),it(Q,M,!0),Q}return M},findCommonAncestor:(M,j)=>{let Q=M;for(;Q;){let nt=j;for(;nt&&Q!==nt;)nt=nt.parentNode;if(Q===nt)break;Q=Q.parentNode}return!Q&&M.ownerDocument?M.ownerDocument.documentElement:Q},run:U,getAttribs:v,isEmpty:(M,j,Q)=>{let nt=0;if(Ot(M))return!1;const J=M.firstChild;if(J){const Z=new en(J,M),ft=l?l.getWhitespaceElements():{},At=j||(l?l.getNonEmptyElements():null);let Ct=J;do{if(xt(Ct)){const zt=Ct.getAttribute("data-mce-bogus");if(zt){Ct=Z.next("all"===zt);continue}const Ut=Ct.nodeName.toLowerCase();if(At&&At[Ut]){if("br"===Ut){nt++,Ct=Z.next();continue}return!1}if(Ot(Ct))return!1}if(gs(Ct)||lt(Ct)&&!Gs(Ct.data)&&(!Q?.includeZwsp||!sk(Ct.data))||lt(Ct)&&Ct.parentNode&&ft[Ct.parentNode.nodeName]&&Gs(Ct.data))return!1;Ct=Z.next()}while(Ct)}return nt<=1},createRng:ht,nodeIndex:$a,split:(M,j,Q)=>{let nt,J,Z=ht();if(M&&j&&M.parentNode&&j.parentNode){const ft=M.parentNode;return Z.setStart(ft,$a(M)),Z.setEnd(j.parentNode,$a(j)),nt=Z.extractContents(),Z=ht(),Z.setStart(j.parentNode,$a(j)+1),Z.setEnd(ft,$a(M)+1),J=Z.extractContents(),ft.insertBefore(Eu(Rt,nt),M),ft.insertBefore(Q||j,M),ft.insertBefore(Eu(Rt,J),M),$(M),Q||j}},bind:Kt,unbind:Yt,fire:(M,j,Q)=>u.dispatch(M,j,Q),dispatch:(M,j,Q)=>u.dispatch(M,j,Q),getContentEditable:yt,getContentEditableParent:M=>{const j=C();let Q=null;for(let nt=M;nt&&nt!==j&&(Q=yt(nt),null===Q);nt=nt.parentNode);return Q},isEditable:M=>{if(mt(M)){const j=xt(M)?M:M.parentElement;return mt(j)&&no(O(j))}return!1},destroy:()=>{if(i.length>0){let M=i.length;for(;M--;){const[j,Q,nt]=i[M];u.unbind(j,Q,nt)}}Se(o,(M,j)=>{a.unload(j),delete o[j]})},isChildOf:(M,j)=>M===j||j.contains(M),dumpRng:M=>"startContainer: "+M.startContainer.nodeName+", startOffset: "+M.startOffset+", endContainer: "+M.endContainer.nodeName+", endOffset: "+M.endOffset},jt=((M,j,Q)=>{const nt=j.keep_values,Z={style:{set:(ft,At)=>{const Ct=O(ft);nt&&Ui(Ct,Pu,At),on(Ct,"style"),Dt(At)&&ps(Ct,M.parse(At))},get:ft=>{const At=O(ft),Ct=jn(At,Pu)||jn(At,"style");return M.serialize(M.parse(Ct),Ee(At))}}};return nt&&(Z.href=Z.src={set:(ft,At,Ct)=>{const zt=O(ft);pe(j.url_converter)&&mt(At)&&(At=j.url_converter.call(j.url_converter_scope||Q(),String(At),Ct,ft)),Ui(zt,"data-mce-"+Ct,At),Ui(zt,Ct,At)},get:(ft,At)=>{const Ct=O(ft);return jn(Ct,"data-mce-"+At)||jn(Ct,At)}}),Z})(c,e,gt(Rt));return Rt};we.DOM=we(document),we.nodeIndex=$a;const Ek=we.DOM;class Yo{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,r)=>{const o=Ek;let s;const a=()=>{o.remove(i),s&&(s.onerror=s.onload=s=null)},i=o.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=dt._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:r,reject:o})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(l,c)=>{ke(n.scriptLoadedCallbacks,c).each(u=>{rt(u,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},o=l=>{const c=$t(l,u=>"rejected"===u.status);return c.length>0?Promise.reject(rn(c,({reason:u})=>ct(u)?u:[u])):Promise.resolve()},s=l=>Promise.allSettled(re(l,c=>2===n.states[c]?(r("resolve",c),Promise.resolve()):3===n.states[c]?(r("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,r("resolve",c);const u=n.queue;return u.length>0?(n.queue=[],s(u).then(o)):Promise.resolve()},()=>(n.states[c]=3,r("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return E.from(u).each(Vn),o(c)})),i=Fn(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,c)})}):a(i)}}Yo.ScriptLoader=new Yo;const cn=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},qi={},Lu=cn("en"),Ug=()=>ke(qi,Lu.get()),ao={getData:()=>Ho(qi,t=>({...t})),setCode:t=>{t&&Lu.set(t)},getCode:()=>Lu.get(),add:(t,e)=>{let n=qi[t];n||(qi[t]=n={}),Se(e,(r,o)=>{n[o.toLowerCase()]=r})},translate:t=>{const e=Ug().getOr({}),n=i=>pe(i)?Object.prototype.toString.call(i):r(i)?"":""+i,r=i=>""===i||null==i,o=i=>{const l=n(i);return ke(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(r(t))return"";if(Vt(a=t)&&te(a,"raw"))return n(t.raw);var a,i;if(ct(i=t)&&i.length>1){const i=t.slice(1);return s(o(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>te(i,c)?n(i[c]):l))}return s(o(t))},isRtl:()=>Ug().bind(t=>ke(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>te(qi,t)},Hn=()=>{const t=[],e={},n={},r=[],o=(l,c)=>{const u=$t(r,f=>f.name===l&&f.state===c);rt(u,f=>f.resolve())},s=l=>te(e,l),a=(l,c)=>{const u=ao.getCode();!u||c&&-1===(","+(c||"")+",").indexOf(","+u+",")||Yo.ScriptLoader.add(e[l]+"/langs/"+u+".js")},i=(l,c="added")=>"added"===c&&te(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(u=>{r.push({name:l,state:c,resolve:u})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==Hn.languageLoad&&(s(l)?a(l,c):i(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},o(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>Dt(c)?Dt(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let u=Dt(c)?c:c.prefix+c.resource+c.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=Hn.baseURL+"/"+u),e[l]=u.substring(0,u.lastIndexOf("/"));const f=()=>(o(l,"loaded"),Promise.resolve());return n[l]?f():Yo.ScriptLoader.add(u).then(f)},waitFor:i}};Hn.languageLoad=!0,Hn.baseURL="",Hn.PluginManager=Hn(),Hn.ThemeManager=Hn(),Hn.ModelManager=Hn();const _k=t=>{const e=cn(E.none()),n=()=>e.get().each(r=>clearInterval(r));return{clear:()=>{n(),e.set(E.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:r=>{n(),e.set(E.some(setInterval(r,t)))}}},xs=()=>{const t=(e=>{const n=cn(E.none()),r=()=>n.get().each(e);return{clear:()=>{r(),n.set(E.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(E.some(o))}}})(_t);return{...t,on:e=>t.get().each(e)}},Sc=(t,e)=>{let n=null;return{cancel:()=>{Qt(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Qt(n)&&(n=setTimeout(()=>{n=null,t.apply(null,r)},e))}}},Mu=(t,e)=>{let n=null;const r=()=>{Qt(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,t.apply(null,o)},e)}}},$i=gt("mce-annotation"),Zs=gt("data-mce-annotation"),Wa=gt("data-mce-annotation-uid"),Wi=gt("data-mce-annotation-active"),Vi=gt("data-mce-annotation-classes"),Ki=gt("data-mce-annotation-attrs"),qg=t=>e=>de(e,t),$g=(t,e)=>{const n=t.selection.getRng(),r=O(n.startContainer),o=O(t.getBody()),s=e.fold(()=>"."+$i(),i=>`[${Zs()}="${i}"]`),a=xn(r,n.startOffset).getOr(r);return Ur(a,s,qg(o)).bind(i=>Jr(i,`${Wa()}`).bind(l=>Jr(i,`${Zs()}`).map(c=>{const u=Vg(t,l);return{uid:l,name:c,elements:u}})))},Wg=(t,e)=>Ma(t,"data-mce-bogus")||cg(t,'[data-mce-bogus="all"]',qg(e)),Vg=(t,e)=>{const n=O(t.getBody()),r=Dn(n,`[${Wa()}="${e}"]`);return $t(r,o=>!Wg(o,n))},Kg=(t,e)=>{const n=O(t.getBody()),r=Dn(n,`[${Zs()}="${e}"]`),o={};return rt(r,s=>{if(!Wg(s,n)){const a=jn(s,Wa()),i=ke(o,a).getOr([]);o[a]=i.concat([s])}}),o};let Xg=0;const Xi=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Xg++,t+"_"+n+Xg+String(e)},Gg=(t,e)=>O(t.dom.cloneNode(e)),ta=t=>Gg(t,!1),Yg=t=>Gg(t,!0),Qg=(t,e)=>{const n=((o,s)=>{const a=X(s),i=d(o);return Qr(a,i),a})(t,e);Bt(t,n);const r=Me(t);return ge(n,r),Mt(t),n},Jg=(t,e,n=Ce)=>{const r=new en(t,e),o=s=>{let a;do{a=r[s]()}while(a&&!lt(a)&&!n(a));return E.from(a).filter(lt)};return{current:()=>E.from(r.current()).filter(lt),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},ea=(t,e)=>{const n=e||(o=>t.isBlock(o)||Ie(o)||Re(o)),r=(o,s,a,i)=>{if(lt(o)){const l=i(o,s,o.data);if(-1!==l)return E.some({container:o,offset:l})}return a().bind(l=>r(l.container,l.offset,a,i))};return{backwards:(o,s,a,i)=>{const l=Jg(o,i??t.getRoot(),n);return r(o,s,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(o,s,a,i)=>{const l=Jg(o,i??t.getRoot(),n);return r(o,s,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},Va=Math.round,na=t=>t?{left:Va(t.left),top:Va(t.top),bottom:Va(t.bottom),right:Va(t.right),width:Va(t.width),height:Va(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Zg=(t,e)=>(t=na(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),th=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,Gi=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&th(e.top-t.bottom,t,e)},Yi=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&th(e.bottom-t.top,t,e),eh=(t,e,n)=>{const r=Math.max(Math.min(e,t.left+t.width),t.left),o=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-r)*(e-r)+(n-o)*(n-o))},kc=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},ws=(t,e)=>{if(xt(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},Nk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),nh=t=>Dt(t)&&t.charCodeAt(0)>=768&&Nk.test(t),rh=xt,Ak=qr,oh=ic("display","block table"),Rk=ic("float","left right"),Qi=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(rh,Ak,Fo(Rk)),Tk=Fo(ic("white-space","pre pre-line pre-wrap")),Ji=lt,Iu=Ie,sh=we.nodeIndex,Ec=(t,e)=>e<0&&xt(t)&&t.hasChildNodes()?void 0:ws(t,e),Fu=t=>t?t.createRange():we.DOM.createRng(),ju=t=>Dt(t)&&/[\r\n\t ]/.test(t),ah=t=>!!t.setStart&&!!t.setEnd,zu=t=>{const e=t.startContainer,n=t.startOffset;if(ju(t.toString())&&Tk(e.parentNode)&&lt(e)){const r=e.data;if(ju(r[n-1])||ju(r[n+1]))return!0}return!1},ih=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,Ss=t=>{var e;let n;const r=t.getClientRects();return n=na(r.length>0?r[0]:t.getBoundingClientRect()),!ah(t)&&Iu(t)&&ih(n)?(o=>{const s=o.ownerDocument,a=Fu(s),i=s.createTextNode(ln),l=o.parentNode;l.insertBefore(i,o),a.setStart(i,0),a.setEnd(i,1);const c=na(a.getBoundingClientRect());return l.removeChild(i),c})(t):ih(n)&&ah(t)&&null!==(e=(o=>{const a=o.endContainer,i=o.startOffset,l=o.endOffset;if(o.startContainer===a&&lt(a)&&0===i&&1===l){const c=o.cloneRange();return c.setEndAfter(a),Ss(c)}return null})(t))&&void 0!==e?e:n},ra=(t,e)=>{const n=Zg(t,e);return n.width=1,n.right=n.left+1,n},G=(t,e,n)=>{const r=()=>(n||(n=(o=>{const s=[],a=u=>{var f,p;0!==u.height&&(s.length>0&&(f=u).left===(p=s[s.length-1]).left&&f.top===p.top&&f.bottom===p.bottom&&f.right===p.right||s.push(u))},i=(u,f)=>{const p=Fu(u.ownerDocument);if(f<u.data.length){if(nh(u.data[f]))return;if(nh(u.data[f-1])&&(p.setStart(u,f),p.setEnd(u,f+1),!zu(p)))return void a(ra(Ss(p),!1))}f>0&&(p.setStart(u,f-1),p.setEnd(u,f),zu(p)||a(ra(Ss(p),!1))),f<u.data.length&&(p.setStart(u,f),p.setEnd(u,f+1),zu(p)||a(ra(Ss(p),!0)))},l=o.container(),c=o.offset();if(Ji(l))return i(l,c),s;if(rh(l))if(o.isAtEnd()){const u=Ec(l,c);Ji(u)&&i(u,u.data.length),Qi(u)&&!Iu(u)&&a(ra(Ss(u),!1))}else{const u=Ec(l,c);if(Ji(u)&&i(u,0),Qi(u)&&o.isAtEnd())return a(ra(Ss(u),!1)),s;const f=Ec(o.container(),o.offset()-1);Qi(f)&&!Iu(f)&&(oh(f)||oh(u)||!Qi(u))&&a(ra(Ss(f),!1)),Qi(u)&&a(ra(Ss(u),!0))}return s})(G(t,e))),n);return{container:gt(t),offset:gt(e),toRange:()=>{const o=Fu(t.ownerDocument);return o.setStart(t,e),o.setEnd(t,e),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(Ji(t),0===e),isAtEnd:()=>Ji(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:o=>o&&t===o.container()&&e===o.offset(),getNode:o=>Ec(t,o?e-1:e)}};G.fromRangeStart=t=>G(t.startContainer,t.startOffset),G.fromRangeEnd=t=>G(t.endContainer,t.endOffset),G.after=t=>G(t.parentNode,sh(t)+1),G.before=t=>G(t.parentNode,sh(t)),G.isAbove=(t,e)=>pn(Nn(e.getClientRects()),yo(t.getClientRects()),Gi).getOr(!1),G.isBelow=(t,e)=>pn(yo(e.getClientRects()),Nn(t.getClientRects()),Yi).getOr(!1),G.isAtStart=t=>!!t&&t.isAtStart(),G.isAtEnd=t=>!!t&&t.isAtEnd(),G.isTextPosition=t=>!!t&&lt(t.container()),G.isElementPosition=t=>!G.isTextPosition(t);const _c=(t,e)=>{lt(e)&&0===e.data.length&&t.remove(e)},Hu=(t,e,n)=>{var r,s;uu(n)?((r,o,s)=>{const a=E.from(s.firstChild),i=E.from(s.lastChild);o.insertNode(s),a.each(l=>_c(r,l.previousSibling)),i.each(l=>_c(r,l.nextSibling))})(t,e,n):(r=t,e.insertNode(s=n),_c(r,s.previousSibling),_c(r,s.nextSibling))},io=lt,lh=Ks,ch=we.nodeIndex,dh=t=>{const e=t.parentNode;return lh(e)?dh(e):e},Uu=t=>t?Gr(t.childNodes,(e,n)=>(lh(n)&&"BR"!==n.nodeName?e=e.concat(Uu(n)):e.push(n),e),[]):[],uh=t=>e=>t===e,fh=t=>(io(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,r;n=Uu(dh(e)),r=Ta(n,uh(e),e),n=n.slice(0,r+1);const o=Gr(n,(s,a,i)=>(io(a)&&io(n[i-1])&&s++,s),0);return n=Mr(n,oo([e.nodeName])),r=Ta(n,uh(e),e),r-o})(t)+"]",mh=(t,e)=>{let n,r=[],o=e.container(),s=e.offset();if(io(o))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&io(c);)l+=c.data.length;return l})(o,s);else{const i=o.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",o=i[s]}r.push(fh(o));let a=((i,l,c)=>{const u=[];for(let f=l.parentNode;f&&f!==i;f=f.parentNode)u.push(f);return u})(t,o);return a=Mr(a,Fo(Ks)),r=r.concat(Ra(a,i=>fh(i))),r.reverse().join("/")+","+n},ph=(t,e)=>{if(!e)return null;const n=e.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",s=Gr(r,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((c,u,f)=>{let p=Uu(c);return p=Mr(p,(b,g)=>!io(b)||!io(p[g-1])),p=Mr(p,oo([u])),p[f]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!io(s)&&s.parentNode){let a;return a="after"===o?ch(s)+1:ch(s),G(s.parentNode,a)}return((a,i)=>{let l=a,c=0;for(;io(l);){const u=l.data.length;if(i>=c&&i<=c+u){a=l,i-=c;break}if(!io(l.nextSibling)){a=l,i=u;break}c+=u,l=l.nextSibling}return io(a)&&i>a.data.length&&(i=a.data.length),G(a,i)})(s,parseInt(o,10))},Nc=Re,gh=(t,e,n,r,o)=>{const s=o?r.startContainer:r.endContainer;let a=o?r.startOffset:r.endOffset;const i=[],l=t.getRoot();if(lt(s))i.push(n?((c,u,f)=>{let p=c(u.data.slice(0,f)).length;for(let b=u.previousSibling;b&&lt(b);b=b.previousSibling)p+=c(b.data).length;return p})(e,s,a):a);else{let c=0;const u=s.childNodes;a>=u.length&&u.length&&(c=1,a=Math.max(0,u.length-1)),i.push(t.nodeIndex(u[a],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)i.push(t.nodeIndex(c,n));return i},qu=(t,e,n)=>{let r=0;return dt.each(t.select(e),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},hh=(t,e)=>{let n=e?t.startContainer:t.endContainer,r=e?t.startOffset:t.endOffset;if(xt(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(e?r:r-1,o.length-1)],n&&(r=e?0:n.childNodes.length,e?t.setStart(n,r):t.setEnd(n,r))}},bh=t=>(hh(t,!0),hh(t,!1),t),vh=(t,e)=>{if(xt(t)&&(t=ws(t,e),Nc(t)))return t;if(_r(t)){lt(t)&&Ua(t)&&(t=t.parentNode);let n=t.previousSibling;if(Nc(n)||(n=t.nextSibling,Nc(n)))return n}},yh=(t,e,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Nc(r)){const a=r.nodeName;return{name:a,index:qu(n.dom,a,r)}}const s=vh((a=o).startContainer,a.startOffset)||vh(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:qu(n.dom,a,s)}}return((a,i,l,c)=>{const u=i.dom,f=gh(u,a,l,c,!0),p=i.isForward(),b=bg(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:f,forward:p,...b}:{start:f,end:gh(u,a,l,c,!1),forward:p,...b}})(t,n,e,o)},Ch=(t,e,n)=>{const r={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",r,"&#xFEFF;"):t.create("span",r)},xh=(t,e)=>{const n=t.dom;let r=t.getRng();const o=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:qu(n,i,a)};const c=bh(r.cloneRange());if(!s){c.collapse(!1);const f=Ch(n,o+"_end",e);Hu(n,c,f)}r=bh(r),r.collapse(!0);const u=Ch(n,o+"_start",e);return Hu(n,r,u),t.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},$u=kt(yh,ue,!0),wh=t=>{const e=s=>s(t),n=gt(t),r=()=>o,o={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:Be,isError:Ce,map:s=>tr.value(s(t)),mapError:r,bind:e,exists:e,forall:e,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:s=>{s(t)},toOptional:()=>E.some(t)};return o},Sh=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,o)=>r(t),isValue:Ce,isError:Be,map:e,mapError:r=>tr.error(r(t)),bind:e,exists:Ce,forall:Be,getOr:ue,or:ue,getOrThunk:ho,orThunk:ho,getOrDie:fr(String(t)),each:_t,toOptional:E.none};return n},tr={value:wh,error:Sh,fromOption:(t,e)=>t.fold(()=>Sh(e),wh)},Eo=t=>{if(!ct(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return rt(t,(r,o)=>{const s=Qe(r);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!ct(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...u)=>{if(u.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+u.length);return u[o].apply(null,l)},match:u=>{const f=Qe(u);if(e.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+f.join(","));if(!mr(e,p=>Tt(f,p)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+"\nRequired: "+e.join(", "));return u[a].apply(null,l)},log:u=>{console.log(u,{constructors:e,constructor:a,params:l})}}}}),n};Eo([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ok=t=>"inline-command"===t.type||"inline-format"===t.type,Dk=t=>"block-command"===t.type||"block-format"===t.type,Bk=t=>{const e=r=>tr.error({message:r,pattern:t}),n=(r,o,s)=>{if(void 0!==t.format){let a;if(ct(t.format)){if(!mr(t.format,Dt))return e(r+" pattern has non-string items in the `format` array");a=t.format}else{if(!Dt(t.format))return e(r+" pattern has non-string `format` parameter");a=[t.format]}return tr.value(o(a))}return void 0!==t.cmd?Dt(t.cmd)?tr.value(s(t.cmd,t.value)):e(r+" pattern has non-string `cmd` parameter"):e(r+" pattern is missing both `format` and `cmd` parameters")};if(!Vt(t))return e("Raw pattern is not an object");if(!Dt(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!Dt(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let r=t.start,o=t.end;return 0===o.length&&(o=r,r=""),n("Inline",s=>({type:"inline-format",start:r,end:o,format:s}),(s,a)=>({type:"inline-command",start:r,end:o,cmd:s,value:a}))}return void 0!==t.replacement?Dt(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):tr.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:t.start,format:r[0]}),(r,o)=>({type:"block-command",start:t.start,cmd:r,value:o}))},kh=t=>$t(t,Dk),Eh=t=>$t(t,Ok),_h=t=>{const e=(n=>{const r=[],o=[];return rt(n,s=>{s.fold(a=>{r.push(a)},a=>{o.push(a)})}),{errors:r,values:o}})(re(t,Bk));return rt(e.errors,n=>console.error(n.message,n.pattern)),e.values},Wu=An().deviceType,Pk=Wu.isTouch(),Lk=we.DOM,Nh=t=>Cr(t,RegExp),wt=t=>e=>e.options.get(t),Vu=t=>Dt(t)||Vt(t),Ah=(t,e="")=>n=>{const r=Dt(n);if(r){if(-1!==n.indexOf("=")){const o=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return vn(a,(i,l)=>{const c=l.split("="),u=c[0],f=c.length>1?c[1]:u;return i[Yr(u)]=Yr(f),i},{})})(n);return{value:ke(o,t.id).getOr(e),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},Mk=wt("iframe_attrs"),Ik=wt("doctype"),Rh=wt("document_base_url"),Fk=wt("body_id"),jk=wt("body_class"),Th=wt("content_security_policy"),zk=wt("br_in_pre"),er=wt("forced_root_block"),Zi=wt("forced_root_block_attrs"),Hk=wt("newline_behavior"),Uk=wt("br_newline_selector"),qk=wt("no_newline_selector"),$k=wt("keep_styles"),Wk=wt("end_container_on_empty_block"),Oh=wt("automatic_uploads"),Dh=wt("images_reuse_filename"),Vk=wt("images_replace_blob_uris"),Bh=wt("icons"),Kk=wt("icons_url"),Xk=wt("images_upload_url"),Gk=wt("images_upload_base_path"),Yk=wt("images_upload_credentials"),Qk=wt("images_upload_handler"),Jk=wt("content_css_cors"),Ku=wt("referrer_policy"),Ph=wt("language"),Zk=wt("language_url"),Lh=wt("indent_use_margin"),tE=wt("indentation"),eE=wt("content_css"),nE=wt("content_style"),Mh=wt("font_css"),rE=wt("directionality"),oE=wt("inline_boundaries_selector"),Ih=wt("object_resizing"),sE=wt("resize_img_proportional"),aE=wt("placeholder"),Fh=wt("event_root"),iE=wt("service_message"),Ka=wt("theme"),lE=wt("theme_url"),Xu=wt("model"),cE=wt("model_url"),tl=wt("inline_boundaries"),dE=wt("formats"),uE=wt("preview_styles"),fE=wt("format_empty_lines"),mE=wt("format_noneditable_selector"),pE=wt("custom_ui_selector"),Gu=wt("inline"),gE=wt("hidden_input"),hE=wt("submit_patch"),bE=wt("add_form_submit_trigger"),vE=wt("add_unload_trigger"),yE=wt("custom_undo_redo_levels"),CE=wt("disable_nodechange"),jh=wt("readonly"),xE=wt("editable_root"),zh=wt("content_css_cors"),Ac=wt("plugins"),wE=wt("external_plugins"),SE=wt("block_unsupported_drop"),kE=wt("visual"),EE=wt("visual_table_class"),Hh=wt("visual_anchor_class"),_E=wt("iframe_aria_text"),NE=wt("setup"),AE=wt("init_instance_callback"),RE=wt("urlconverter_callback"),TE=wt("auto_focus"),OE=wt("browser_spellcheck"),DE=wt("protect"),BE=wt("paste_block_drop"),Rc=wt("paste_data_images"),PE=wt("paste_preprocess"),LE=wt("paste_postprocess"),ME=wt("newdocument_content"),IE=wt("paste_webkit_styles"),FE=wt("paste_remove_styles_if_webkit"),jE=wt("paste_merge_formats"),zE=wt("smart_paste"),HE=wt("paste_as_text"),UE=wt("paste_tab_spaces"),qE=wt("allow_html_data_urls"),$E=wt("text_patterns"),WE=wt("text_patterns_lookup"),Uh=wt("noneditable_class"),VE=wt("editable_class"),KE=wt("noneditable_regexp"),XE=wt("preserve_cdata"),GE=wt("highlight_on_focus"),Yu=wt("xss_sanitization"),YE=wt("init_content_sync"),qh=t=>dt.explode(t.options.get("images_file_types")),QE=wt("table_tab_navigation"),JE=wt("details_initial_state"),ZE=wt("details_serialized_state"),t_=xt,$h=lt,Wh=t=>{const e=t.parentNode;e&&e.removeChild(t)},Vh=t=>{const e=Go(t);return{count:t.length-e.length,text:e}},Kh=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(Bn));)t.deleteData(e,1)},Xh=(t,e)=>(oa(t),e),oa=t=>{t_(t)&&_r(t)&&(hg(t)?t.removeAttribute("data-mce-caret"):Wh(t)),$h(t)&&(Kh(t),0===t.data.length&&Wh(t))},n_=Re,r_=ko,o_=lc,Gh=(t,e,n)=>{const r=Zg(e.getBoundingClientRect(),n);let o,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;o=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();o=t.scrollLeft-i.left,s=t.scrollTop-i.top}r.left+=o,r.right+=o,r.top+=s,r.bottom+=s,r.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),r.left+=a,r.right+=a),r},Yh=()=>fe.browser.isFirefox(),el=t=>n_(t)||r_(t),nl=t=>(el(t)||Xo(t)&&Yh())&&Ko(O(t)).exists(no),a_=so,Qu=Re,i_=ko,Qh=ic("display","block table table-cell table-caption list-item"),Jh=_r,Zh=Ua,l_=xt,c_=lt,d_=qr,Xa=t=>t>0,sa=t=>t<0,Tc=(t,e)=>{let n;for(;n=t(e);)if(!Zh(n))return n;return null},rl=(t,e,n,r,o)=>{const s=new en(t,r),a=Qu(t)||Zh(t);let i;if(sa(e)){if(a&&(i=Tc(s.prev.bind(s),!0),n(i)))return i;for(;i=Tc(s.prev.bind(s),o);)if(n(i))return i}if(Xa(e)){if(a&&(i=Tc(s.next.bind(s),!0),n(i)))return i;for(;i=Tc(s.next.bind(s),o);)if(n(i))return i}return null},ks=(t,e)=>{for(;t&&t!==e;){if(Qh(t))return t;t=t.parentNode}return null},_o=(t,e,n)=>ks(t.container(),n)===ks(e.container(),n),Ju=(t,e)=>{if(!e)return E.none();const n=e.container(),r=e.offset();return l_(n)?E.from(n.childNodes[r+t]):E.none()},t0=(t,e)=>{var n;const r=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),r},u_=(t,e,n)=>ks(e,t)===ks(n,t),e0=(t,e,n)=>{const r=t?"previousSibling":"nextSibling";let o=n;for(;o&&o!==e;){let s=o[r];if(s&&Jh(s)&&(s=s[r]),Qu(s)||i_(s)){if(u_(e,s,o))return s;break}if(d_(s))break;o=o.parentNode}return null},ol=kt(t0,!0),sl=kt(t0,!1),Zu=(t,e,n)=>{let r;const o=kt(e0,!0,e),s=kt(e0,!1,e),a=n.startContainer,i=n.startOffset;if(Ua(a)){const l=c_(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if("before"===c&&(r=l.nextSibling,nl(r)))return ol(r);if("after"===c&&(r=l.previousSibling,nl(r)))return sl(r)}if(!n.collapsed)return n;if(lt(a)){if(Jh(a)){if(1===t){if(r=s(a),r)return ol(r);if(r=o(a),r)return sl(r)}if(-1===t){if(r=o(a),r)return sl(r);if(r=s(a),r)return ol(r)}return n}if(gc(a)&&i>=a.data.length-1)return 1===t&&(r=s(a),r)?ol(r):n;if(pc(a)&&i<=1)return-1===t&&(r=o(a),r)?sl(r):n;if(i===a.data.length)return r=s(a),r?ol(r):n;if(0===i)return r=o(a),r?sl(r):n}return n},n0=(t,e)=>Ju(t?0:-1,e).filter(Qu),al=(t,e,n)=>{const r=Zu(t,e,n);return-1===t?G.fromRangeStart(r):G.fromRangeEnd(r)},Oc=t=>E.from(t.getNode()).map(O),tf=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},Dc=(t,e)=>{const n=_o(t,e);return!(n||!Ie(t.getNode()))||n};var dn,t;(t=dn||(dn={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const f_=Re,No=lt,r0=xt,ef=Ie,Ga=qr,o0=t=>{return yg(t)||!!vu(e=t)&&!vn(Ye(e.getElementsByTagName("*")),(n,r)=>n||vg(r),!1);var e},Bc=Cg,s0=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,a0=(t,e)=>{if(Xa(t)){if(Ga(e.previousSibling)&&!No(e.previousSibling))return G.before(e);if(No(e))return G(e,0)}if(sa(t)){if(Ga(e.nextSibling)&&!No(e.nextSibling))return G.after(e);if(No(e))return G(e,e.data.length)}return sa(t)?ef(e)?G.before(e):G.after(e):G.before(e)},nf=(t,e,n)=>{let r,o,s,a;if(!r0(n)||!e)return null;if(e.isEqual(G.after(n))&&n.lastChild){if(a=G.after(n.lastChild),sa(t)&&Ga(n.lastChild)&&r0(n.lastChild))return ef(n.lastChild)?G.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(No(i)){if(sa(t)&&l>0)return G(i,--l);if(Xa(t)&&l<i.length)return G(i,++l);r=i}else{if(sa(t)&&l>0&&(o=s0(i,l-1),Ga(o)))return!o0(o)&&(s=rl(o,t,Bc,o),s)?No(s)?G(s,s.data.length):G.after(s):No(o)?G(o,o.data.length):G.before(o);if(Xa(t)&&l<i.childNodes.length&&(o=s0(i,l),Ga(o)))return ef(o)?((u,f)=>{const p=f.nextSibling;return p&&Ga(p)?No(p)?G(p,0):G.before(p):nf(dn.Forwards,G.after(f),u)})(n,o):!o0(o)&&(s=rl(o,t,Bc,o),s)?No(s)?G(s,0):G.before(s):No(o)?G(o,0):G.after(o);r=o||a.getNode()}if(r&&(Xa(t)&&a.isAtEnd()||sa(t)&&a.isAtStart())&&(r=rl(r,t,Be,n,!0),Bc(r,n)))return a0(t,r);o=r&&rl(r,t,Bc,n);const c=Ir($t(((u,f)=>{const p=[];let b=u;for(;b&&b!==f;)p.push(b),b=b.parentNode;return p})(i,n),f_));return!c||o&&c.contains(o)?o?a0(t,o):null:(a=Xa(t)?G.after(c):G.before(c),a)},Ao=t=>({next:e=>nf(dn.Forwards,e,t),prev:e=>nf(dn.Backwards,e,t)}),i0=t=>G.isTextPosition(t)?0===t.offset():qr(t.getNode()),l0=t=>{if(G.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return qr(t.getNode(!0))},c0=(t,e)=>!G.isTextPosition(t)&&!G.isTextPosition(e)&&t.getNode()===e.getNode(!0),Nr=(t,e,n)=>{const r=Ao(e);return E.from(t?r.next(n):r.prev(n))},il=(t,e,n)=>Nr(t,e,n).bind(r=>{return _o(n,r,e)&&(s=n,a=r,t?!c0(s,a)&&(G.isTextPosition(i=s)||!Ie(i.getNode()))&&l0(s)&&i0(a):!c0(a,s)&&i0(s)&&l0(a))?Nr(t,e,r):E.some(r);var s,a,i}),d0=(t,e,n,r)=>il(t,e,n).bind(o=>r(o)?d0(t,e,o,r):E.some(o)),Ya=(t,e)=>{const n=t?e.firstChild:e.lastChild;return lt(n)?E.some(G(n,t?0:n.data.length)):n?qr(n)?E.some(t?G.before(n):Ie(r=n)?G.before(r):G.after(r)):((o,s,a)=>{const i=o?G.before(a):G.after(a);return Nr(o,s,i)})(t,e,n):E.none();var r},Un=kt(Nr,!0),nr=kt(Nr,!1),qn=kt(Ya,!0),$r=kt(Ya,!1),rf="_mce_caret",Wr=t=>xt(t)&&t.id===rf,aa=(t,e)=>{let n=e;for(;n&&n!==t;){if(Wr(n))return n;n=n.parentNode}return null},u0=t=>te(t,"name"),f0=t=>dt.isArray(t.start),Pc=t=>!(!u0(t)&&Mn(t.forward))||t.forward,m0=(t,e)=>(xt(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),m_=(t,e)=>$r(t).fold(Ce,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),p0=(t,e,n)=>!(e.hasChildNodes()||!aa(t,e)||(((r,o)=>{var s;const a=(null!==(s=r.ownerDocument)&&void 0!==s?s:document).createTextNode(Bn);r.appendChild(a),o.setStart(a,0),o.setEnd(a,0)})(e,n),0)),g0=(t,e,n,r)=>{const o=n[e?"start":"end"],s=t.getRoot();if(o){let a=s,i=o[0];for(let l=o.length-1;a&&l>=1;l--){const c=a.childNodes;if(p0(s,a,r))return!0;if(o[l]>c.length-1)return!!p0(s,a,r)||m_(a,r);a=c[o[l]]}lt(a)&&(i=Math.min(o[0],a.data.length)),xt(a)&&(i=Math.min(o[0],a.childNodes.length)),e?r.setStart(a,i):r.setEnd(a,i)}return!0},of=t=>lt(t)&&t.data.length>0,h0=(t,e,n)=>{const r=t.get(n.id+"_"+e),o=r?.parentNode,s=n.keep;if(r&&o){let a,i;if("start"===e?s?r.hasChildNodes()?(a=r.firstChild,i=1):of(r.nextSibling)?(a=r.nextSibling,i=0):of(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)+1):(a=o,i=t.nodeIndex(r)):s?r.hasChildNodes()?(a=r.firstChild,i=1):of(r.previousSibling)?(a=r.previousSibling,i=r.previousSibling.data.length):(a=o,i=t.nodeIndex(r)):(a=o,i=t.nodeIndex(r)),!s){const l=r.previousSibling,c=r.nextSibling;let u;for(dt.each(dt.grep(r.childNodes),f=>{lt(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});u=t.get(n.id+"_"+e);)t.remove(u,!0);if(lt(c)&&lt(l)&&!fe.browser.isOpera()){const f=l.data.length;l.appendData(c.data),t.remove(c),a=l,i=f}}return E.some(G(a,i))}return E.none()},p_=(t,e,n)=>((r,o,s=!1)=>{return 2===o?yh(Go,s,r):3===o?(a=>{const i=a.getRng();return{start:mh(a.dom.getRoot(),G.fromRangeStart(i)),end:mh(a.dom.getRoot(),G.fromRangeEnd(i)),forward:a.isForward()}})(r):o?{rng:(a=r).getRng(),forward:a.isForward()}:xh(r,!1);var a})(t,e,n),g_=(t,e)=>{((n,r)=>{const o=n.dom;if(r){if(f0(r))return((s,a)=>{const i=s.createRng();return g0(s,!0,a,i)&&g0(s,!1,a,i)?E.some({range:i,forward:Pc(a)}):E.none()})(o,r);if(Dt(r.start))return((s,a)=>{const i=E.from(ph(s.getRoot(),a.start)),l=E.from(ph(s.getRoot(),a.end));return pn(i,l,(c,u)=>{const f=s.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Pc(a)}})})(o,r);if(te(r,"id"))return((s,a)=>{const i=h0(s,"start",a),l=h0(s,"end",a);return pn(i,l.or(i),(c,u)=>{const f=s.createRng();return f.setStart(m0(s,c.container()),c.offset()),f.setEnd(m0(s,u.container()),u.offset()),{range:f,forward:Pc(a)}})})(o,r);if(u0(r))return((s,a)=>E.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(o,r);if((s=>te(s,"rng"))(r))return E.some({range:r.rng,forward:Pc(r)})}return E.none()})(t,e).each(({range:n,forward:r})=>{t.setRng(n,r)})},Ar=t=>xt(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Lc=(b0=ln,t=>b0===t);var b0;const Qa=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),sf=t=>!Qa(t)&&!Lc(t)&&!fu(t),af=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},h_=t=>{return{value:(n=af(t.red)+af(t.green)+af(t.blue),xi(n,"#").toUpperCase())};var n},b_=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,v_=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,v0=(t,e,n,r)=>({red:t,green:e,blue:n,alpha:r}),y0=(t,e,n,r)=>{const o=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(r);return v0(o,s,a,i)},Mc=t=>(e=>{if("transparent"===e)return E.some(v0(0,0,0,0));const n=b_.exec(e);if(null!==n)return E.some(y0(n[1],n[2],n[3],"1"));const r=v_.exec(e);return null!==r?E.some(y0(r[1],r[2],r[3],r[4])):E.none()})(t).map(h_).map(e=>"#"+e.value).getOr(t),lf=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},C0=(t,e)=>{const n=Dn(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:$t(rn(t,s=>{const a=kc(s);return a?[O(a)]:[]}),zi)},Ja=t=>C0(lf(t.selection.getSel()),O(t.getBody())),ll=(t,e)=>ms(t,"table",e),x0=t=>Ze(t).fold(gt([t]),e=>[t].concat(x0(e))),cf=t=>$e(t).fold(gt([t]),e=>"br"===Ee(e)?Rn(e).map(n=>[t].concat(cf(n))).getOr([]):[t].concat(cf(e))),df=(t,e)=>pn((n=>{const r=n.startContainer,o=n.startOffset;return lt(r)?0===o?E.some(O(r)):E.none():E.from(r.childNodes[o]).map(O)})(e),(n=>{const r=n.endContainer,o=n.endOffset;return lt(r)?o===r.data.length?E.some(O(r)):E.none():E.from(r.childNodes[o-1]).map(O)})(e),(n,r)=>{const o=qe(x0(t),kt(de,n)),s=qe(cf(t),kt(de,r));return o.isSome()&&s.isSome()}).getOr(!1),uf=(t,e,n,r)=>{const o=n,s=new en(n,o),a=xr(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Tt(["td","th","table"],c.toLowerCase()));let i=n;do{if(lt(i)&&0!==dt.trim(i.data).length)return void(r?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(r?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=r?s.next():s.prev());"BODY"===o.nodeName&&(r?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},Ic=t=>{const e=t.selection.getSel();return mt(e)&&e.rangeCount>0},ff=(t,e)=>{const n=Ja(t);n.length>0?rt(n,r=>{const o=r.dom,s=t.dom.createRng();s.setStartBefore(o),s.setEndAfter(o),e(s,!0)}):e(t.selection.getRng(),!1)},w0=(t,e,n)=>{const r=xh(t,e);n(r),t.moveToBookmark(r)},cl=t=>x(t?.nodeType),mf=t=>xt(t)&&!Ar(t)&&!Wr(t)&&!Ks(t),ia=t=>!0===t.isContentEditable,S0=(t,e,n)=>{const{selection:r,dom:o}=t,s=r.getNode(),a=Re(s);w0(r,!0,()=>{e()}),a&&Re(s)&&o.isChildOf(s,t.getBody())?t.selection.select(s):n(r.getStart())&&y_(o,r)},y_=(t,e)=>{var n,r;const o=e.getRng(),{startContainer:s,startOffset:a}=o;if(!((i,l)=>{if(mf(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),u=parseInt(c,10);return!isNaN(u)&&u>0}return!1})(t,e.getNode())&&xt(s)){const i=s.childNodes,l=t.getRoot();let c;if(a<i.length){const u=i[a];c=new en(u,null!==(n=t.getParent(u,t.isBlock))&&void 0!==n?n:l)}else{const u=i[i.length-1];c=new en(u,null!==(r=t.getParent(u,t.isBlock))&&void 0!==r?r:l),c.next(!0)}for(let u=c.current();u;u=c.next()){if("false"===t.getContentEditable(u))return;if(lt(u)&&!gf(u))return o.setStart(u,0),void e.setRng(o)}}},k0=(t,e,n)=>{if(t){const r=e?"nextSibling":"previousSibling";for(t=n?t:t[r];t;t=t[r])if(xt(t)||!gf(t))return t}},pf=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Ys(t,e),Za=(t,e,n)=>t.schema.isValidChild(e,n),gf=(t,e=!1)=>{if(mt(t)&&lt(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return Gs(n)}return!1},E0=(t,e)=>{const n=t.dom;return mf(e)&&"false"===n.getContentEditable(e)&&((r,o)=>{const s="[data-mce-cef-wrappable]",a=mE(r),i=as(a)?s:`${s},${a}`;return _e(O(o),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},Es=(t,e)=>pe(t)?t(e):(mt(e)&&(t=t.replace(/%(\w+)/g,(n,r)=>e[r]||n)),t),hf=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),bf=(t,e)=>{if(ye(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=Mc(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Fc=(t,e,n)=>{const r=t.getStyle(e,n);return bf(r,n)},_0=(t,e)=>{let n;return t.getParent(e,r=>!!xt(r)&&(n=t.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},jc=(t,e,n)=>t.getParents(e,n,t.getRoot()),vf=(t,e,n)=>{const r=t.formatter.get(e);return mt(r)&&Ae(r,n)},Ro=t=>yn(t,"block"),Rr=t=>yn(t,"selector"),nn=t=>yn(t,"inline"),yf=t=>Rr(t)&&!1!==t.expand&&!nn(t),ti=Ar,N0=jc,A0=gf,C_=pf,R0=(t,e)=>{let n=e;for(;n;){if(xt(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},T0=(t,e,n,r)=>{const o=e.data;if(t){for(let s=n;s>0;s--)if(r(o.charAt(s-1)))return s}else for(let s=n;s<o.length;s++)if(r(o.charAt(s)))return s;return-1},x_=(t,e,n)=>T0(t,e,n,r=>Lc(r)||Qa(r)),w_=(t,e,n)=>T0(t,e,n,sf),O0=(t,e,n,r,o,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(c,u,f)=>{const p=ea(t);return E.from((o?p.backwards:p.forwards)(c,u,(g,v)=>ti(g.parentNode)?-1:(a=g,f(o,g,v)),i))};return l(n,r,x_).bind(c=>s?l(c.container,c.offset+(o?-1:0),w_):E.some(c)).orThunk(()=>a?E.some({container:a,offset:o?0:a.length}):E.none())},D0=(t,e,n,r,o)=>{const s=r[o];lt(r)&&as(r.data)&&s&&(r=s);const a=N0(t,r);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const c=e[l];if((!mt(c.collapsed)||c.collapsed===n.collapsed)&&Rr(c)&&t.is(a[i],c.selector))return a[i]}return r},B0=(t,e,n,r)=>{var o;let s=n;const a=t.getRoot(),i=e[0];if(Ro(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(o=t.getParent(n,"LI,TD,TH"))&&void 0!==o?o:a;s=t.getParent(lt(n)?n.parentNode:n,c=>c!==a&&C_(t.schema,c),l)}if(s&&Ro(i)&&i.wrapper&&(s=N0(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[r]&&!t.isBlock(s[r])&&(s=s[r],!hf(s,"br")););return s||n},P0=(t,e,n,r)=>{const o=n.parentNode;return!mt(n[r])&&(!(o!==e&&!ye(o)&&!t.isBlock(o))||P0(t,e,o,r))},zc=(t,e,n,r,o)=>{let s=n;const a=o?"previousSibling":"nextSibling",i=t.getRoot();if(lt(n)&&!A0(n)&&(o?r>0:r<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let c=s[a];c;c=c[a]){const u=lt(c)&&!P0(t,i,c,a);if(!ti(c)&&(!Ie(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!A0(c,u))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},L0=t=>ti(t.parentNode)||ti(t),la=(t,e,n,r=!1)=>{let{startContainer:o,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return xt(o)&&o.hasChildNodes()&&(o=ws(o,s),lt(o)&&(s=0)),xt(a)&&a.hasChildNodes()&&(a=ws(a,e.collapsed?i:i-1),lt(a)&&(i=a.data.length)),o=R0(t,o),a=R0(t,a),L0(o)&&(o=ti(o)?o:o.parentNode,o=e.collapsed?o.previousSibling||o:o.nextSibling||o,lt(o)&&(s=e.collapsed?o.length:0)),L0(a)&&(a=ti(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,lt(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(O0(t,t.getRoot(),o,s,!0,r).each(({container:c,offset:u})=>{o=c,s=u}),O0(t,t.getRoot(),a,i,!1,r).each(({container:c,offset:u})=>{a=c,i=u})),(nn(l)||l.block_expand)&&(nn(l)&&lt(o)&&0!==s||(o=zc(t,n,o,s,!0)),nn(l)&&lt(a)&&i!==a.data.length||(a=zc(t,n,a,i,!1))),yf(l)&&(o=D0(t,n,e,o,"previousSibling"),a=D0(t,n,e,a,"nextSibling")),(Ro(l)||Rr(l))&&(o=B0(t,n,o,"previousSibling"),a=B0(t,n,a,"nextSibling"),Ro(l)&&(t.isBlock(o)||(o=zc(t,n,o,s,!0)),t.isBlock(a)||(a=zc(t,n,a,i,!1)))),xt(o)&&o.parentNode&&(s=t.nodeIndex(o),o=o.parentNode),xt(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:s,endContainer:a,endOffset:i}},dl=(t,e,n)=>{var r;const o=e.startOffset,s=ws(e.startContainer,o),a=e.endOffset,i=ws(e.endContainer,a-1),l=h=>{const C=h[0];lt(C)&&C===s&&o>=C.data.length&&h.splice(0,1);const S=h[h.length-1];return 0===a&&h.length>0&&S===i&&lt(S)&&h.splice(h.length-1,1),h},c=(h,C,S)=>{const k=[];for(;h&&h!==S;h=h[C])k.push(h);return k},u=(h,C)=>t.getParent(h,S=>S.parentNode===C,C),f=(h,C,S)=>{const k=S?"nextSibling":"previousSibling";for(let N=h,R=N.parentNode;N&&N!==C;N=R){R=N.parentNode;const D=c(N===h?N:N[k],k);D.length&&(S||D.reverse(),n(l(D)))}};if(s===i)return n(l([s]));const p=null!==(r=t.findCommonAncestor(s,i))&&void 0!==r?r:t.getRoot();if(t.isChildOf(s,i))return f(s,p,!0);if(t.isChildOf(i,s))return f(i,p);const b=u(s,p)||s,g=u(i,p)||i;f(s,b,!0);const v=c(b===s?b:b.nextSibling,"nextSibling",g===i?g.nextSibling:g);v.length&&n(l(v)),f(i,g)},S_=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],M0=(t,e,n,r,o,s)=>{const{uid:a=e,...i}=n;T(t,$i()),Xe(t,`${Wa()}`,a),Xe(t,`${Zs()}`,r);const{attributes:l={},classes:c=[]}=o(a,i);if(Qr(t,l),u=t,rt(c,p=>{T(u,p)}),s){c.length>0&&Xe(t,`${Vi()}`,c.join(","));const u=Qe(l);u.length>0&&Xe(t,`${Ki()}`,u.join(","))}var u},I0=(t,e,n,r,o)=>{const s=X("span",t);return M0(s,e,n,r,o,!1),s},F0=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>ke(s,a).map(i=>i.settings),getNames:()=>Qe(s)}})();((s,a)=>{const i=Zs(),l=u=>E.from(u.attr(i)).bind(a.lookup),c=u=>{var f,p;u.attr(Wa(),null),u.attr(Zs(),null),u.attr(Wi(),null);const b=E.from(u.attr(Ki())).map(C=>C.split(",")).getOr([]),g=E.from(u.attr(Vi())).map(C=>C.split(",")).getOr([]);rt(b,C=>u.attr(C,null));const v=null!==(p=null===(f=u.attr("class"))||void 0===f?void 0:f.split(" "))&&void 0!==p?p:[],h=Gt(v,[$i()].concat(g));u.attr("class",h.length>0?h.join(" "):null),u.attr(Vi(),null),u.attr(Ki(),null)};s.serializer.addTempAttr(Wi()),s.serializer.addAttributeFilter(i,u=>{for(const f of u)l(f).each(p=>{!1===p.persistent&&("span"===f.name?f.unwrap():c(f))})})})(t,e);const n=((s,a)=>{const i=cn({}),l=()=>({listeners:[],previous:xs()}),c=(b,g)=>{u(b,v=>(g(v),v))},u=(b,g)=>{const v=i.get(),h=g(ke(v,b).getOrThunk(l));v[b]=h,i.set(v)},f=(b,g)=>{rt(Vg(s,b),v=>{g?Xe(v,Wi(),"true"):on(v,Wi())})},p=Mu(()=>{const b=zo(a.getNames());rt(b,g=>{u(g,v=>{const h=v.previous.get();return $g(s,E.some(g)).fold(()=>{h.each(C=>{var S;c(S=g,k=>{rt(k.listeners,N=>N(!1,S))}),v.previous.clear(),f(C,!1)})},({uid:C,name:S,elements:k})=>{var N,R,D;ls(h,C)||(h.each(N=>f(N,!1)),R=C,D=k,c(N=S,P=>{rt(P.listeners,U=>U(!0,N,{uid:R,nodes:re(D,Y=>Y.dom)}))}),v.previous.set(C),f(C,!0))}),{previous:v.previous,listeners:v.listeners}})})},30);return s.on("remove",()=>{p.cancel()}),s.on("NodeChange",()=>{p.throttle()}),{addListener:(b,g)=>{u(b,v=>({previous:v.previous,listeners:v.listeners.concat([g])}))}}})(t,e),r=Bi("span"),o=s=>{rt(s,a=>{r(a)?me(a):(i=>{F(i,$i()),on(i,`${Wa()}`),on(i,`${Zs()}`),on(i,`${Wi()}`);const l=Jr(i,`${Ki()}`).map(f=>f.split(",")).getOr([]),c=Jr(i,`${Vi()}`).map(f=>f.split(",")).getOr([]);var u;rt(l,f=>on(i,f)),u=i,rt(c,f=>{F(u,f)}),on(i,`${Vi()}`),on(i,`${Ki()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,c,u,f;c=s,u=i,f=a,(l=t).undoManager.transact(()=>{const p=l.selection,b=p.getRng(),g=Ja(l).length>0,v=Xi("mce-annotation");if(b.collapsed&&!g&&((h,C)=>{const S=la(h.dom,C,[{inline:"span"}]);C.setStart(S.startContainer,S.startOffset),C.setEnd(S.endContainer,S.endOffset),h.selection.setRng(C)})(l,b),p.getRng().collapsed&&!g){const h=I0(l.getDoc(),v,f,c,u.decorate);an(h,ln),p.getRng().insertNode(h.dom),p.select(h.dom)}else w0(p,!1,()=>{ff(l,h=>{((t,e,n,r,o,s)=>{const a=[],i=I0(t.getDoc(),n,s,r,o),l=xs(),c=()=>{l.clear()},u=p=>{rt(p,f)},f=p=>{switch(b=t,g=p,v="span",h=Ee(p),xe(g).fold(()=>"skipping",C=>{return"br"===h||Yn(S=g)&&cc(S)===Bn?"valid":(S=>Cn(S)&&K(S,$i()))(g)?"existing":Wr(g.dom)?"caret":Ae(S_,S=>_e(g,S))?"valid-block":Za(b,v,h)&&Za(b,Ee(C),v)?"valid":"invalid-child";var S})){case"invalid-child":{c();const b=Me(p);u(b),c();break}case"valid-block":c(),M0(p,n,s,r,o,!0);break;case"valid":{const b=l.get().getOrThunk(()=>{const g=ta(i);return a.push(g),l.set(g),g});It(p,b);break}}var b,g,v,h};dl(t.dom,e,p=>{c(),(b=>{const g=re(b,O);u(g)})(p)})})(l,h,v,c,u.decorate,f)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{$g(t,E.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();o(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();Se(Kg(t,s),(i,l)=>{o(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=Kg(t,s);return Ho(a,i=>re(i,l=>l.dom))}}},ul=t=>({getBookmark:kt(p_,t),moveToBookmark:kt(g_,t)});ul.isBookmarkNode=Ar;const j0=(t,e,n)=>!n.collapsed&&Ae(n.getClientRects(),r=>{return a=e,(s=t)>=(o=r).left&&s<=o.right&&a>=o.top&&a<=o.bottom;var o,s,a}),z0=(t,e,n)=>{t.dispatch(e,n)},H0=(t,e,n,r)=>{t.dispatch("FormatApply",{format:e,node:n,vars:r})},U0=(t,e,n,r)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:r})},q0=(t,e)=>t.dispatch("SetContent",e),$0=(t,e)=>t.dispatch("GetContent",e),W0=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),St={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||St.metaKeyPressed(t),metaKeyPressed:t=>fe.os.isMacOS()||fe.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},ca="data-mce-selected",V0=Math.abs,Hc=Math.round,Cf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},K0=(t,e)=>{const n=e.dom,r=e.getDoc(),o=document,s=e.getBody();let a,i,l,c,u,f,p,b,g,v,h,C,S,k,N;const R=yt=>mt(yt)&&(fg(yt)||n.is(yt,"figure.image")),D=yt=>ko(yt)||n.hasClass(yt,"mce-preview-object"),P=yt=>{const Rt=yt.target;((jt,M)=>{if("longpress"===(j=jt).type||0===j.type.indexOf("touch")){const j=jt.touches[0];return R(jt.target)&&!j0(j.clientX,j.clientY,M)}var j;return R(jt.target)&&!j0(jt.clientX,jt.clientY,M)})(yt,e.selection.getRng())&&!yt.isDefaultPrevented()&&e.selection.select(Rt)},U=yt=>n.hasClass(yt,"mce-preview-object")&&mt(yt.firstElementChild)?[yt,yt.firstElementChild]:n.is(yt,"figure.image")?[yt.querySelector("img")]:[yt],Y=yt=>{const Rt=Ih(e);return!!Rt&&"false"!==yt.getAttribute("data-mce-resize")&&yt!==e.getBody()&&(n.hasClass(yt,"mce-preview-object")&&mt(yt.firstElementChild)?_e(O(yt.firstElementChild),Rt):_e(O(yt),Rt))},V=(yt,Rt,jt)=>{if(mt(jt)){const M=U(yt);rt(M,j=>{j.style[Rt]||!e.schema.isValid(j.nodeName.toLowerCase(),Rt)?n.setStyle(j,Rt,jt):n.setAttrib(j,Rt,""+jt)})}},L=(yt,Rt,jt)=>{V(yt,"width",Rt),V(yt,"height",jt)},z=yt=>{let Rt,jt,M,j,Q;Rt=yt.screenX-f,jt=yt.screenY-p,C=Rt*c[2]+b,S=jt*c[3]+g,C=C<5?5:C,S=S<5?5:S,M=(R(a)||D(a))&&!1!==sE(e)?!St.modifierPressed(yt):St.modifierPressed(yt),M&&(V0(Rt)>V0(jt)?(S=Hc(C*v),C=Hc(S/v)):(C=Hc(S/v),S=Hc(C*v))),L(i,C,S),j=c.startPos.x+Rt,Q=c.startPos.y+jt,j=j>0?j:0,Q=Q>0?Q:0,n.setStyles(l,{left:j,top:Q,display:"block"}),l.innerHTML=C+" &times; "+S,c[2]<0&&i.clientWidth<=C&&n.setStyle(i,"left",void 0+(b-C)),c[3]<0&&i.clientHeight<=S&&n.setStyle(i,"top",void 0+(g-S)),Rt=s.scrollWidth-k,jt=s.scrollHeight-N,Rt+jt!==0&&n.setStyles(l,{left:j-Rt,top:Q-jt}),h||(e.dispatch("ObjectResizeStart",{target:a,width:b,height:g,origin:"corner-"+c.name}),h=!0)},I=()=>{const yt=h;h=!1,yt&&(V(a,"width",C),V(a,"height",S)),n.unbind(r,"mousemove",z),n.unbind(r,"mouseup",I),o!==r&&(n.unbind(o,"mousemove",z),n.unbind(o,"mouseup",I)),n.remove(i),n.remove(l),n.remove(u),$(a),yt&&(e.dispatch("ObjectResized",{target:a,width:C,height:S,origin:"corner-"+c.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},$=yt=>{Kt();const Rt=n.getPos(yt,s),jt=Rt.x,M=Rt.y,j=yt.getBoundingClientRect(),Q=j.width||j.right-j.left,nt=j.height||j.bottom-j.top;a!==yt&&(it(),a=yt,C=S=0);const J=e.dispatch("ObjectSelected",{target:yt});Y(yt)&&!J.isDefaultPrevented()?Se(Cf,(Z,ft)=>{let At=n.get("mceResizeHandle"+ft);At&&n.remove(At),At=n.add(s,"div",{id:"mceResizeHandle"+ft,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ft+"-resize; margin:0; padding:0"}),n.bind(At,"mousedown",Ct=>{Ct.stopImmediatePropagation(),Ct.preventDefault(),(zt=>{const Ut=U(a)[0];var bt;f=zt.screenX,p=zt.screenY,b=Ut.clientWidth,g=Ut.clientHeight,v=g/b,c=Z,c.name=ft,c.startPos={x:Q*Z[0]+jt,y:nt*Z[1]+M},k=s.scrollWidth,N=s.scrollHeight,u=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=D(bt=a)?n.create("img",{src:fe.transparentSrc}):bt.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:jt,top:M,margin:0}),L(i,Q,nt),i.removeAttribute(ca),s.appendChild(i),n.bind(r,"mousemove",z),n.bind(r,"mouseup",I),o!==r&&(n.bind(o,"mousemove",z),n.bind(o,"mouseup",I)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},b+" &times; "+g)})(Ct)}),Z.elm=At,n.setStyles(At,{left:Q*Z[0]+jt-At.offsetWidth/2,top:nt*Z[1]+M-At.offsetHeight/2})}):it(!1)},pt=Sc($,0),it=(yt=!0)=>{pt.cancel(),Kt(),a&&yt&&a.removeAttribute(ca),Se(Cf,(Rt,jt)=>{const M=n.get("mceResizeHandle"+jt);M&&(n.unbind(M),n.remove(M))})},Ot=(yt,Rt)=>n.isChildOf(yt,Rt),ht=yt=>{if(h||e.removed||e.composing)return;const Rt="mousedown"===yt.type?yt.target:t.getNode(),jt=Ur(O(Rt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(j=>j.dom).filter(j=>n.isEditable(j.parentElement)).getOrUndefined(),M=mt(jt)?n.getAttrib(jt,ca,"1"):"1";if(rt(n.select(`img[${ca}],hr[${ca}]`),j=>{j.removeAttribute(ca)}),mt(jt)&&Ot(jt,s)&&e.hasFocus()){Yt();const j=t.getStart(!0);if(Ot(j,jt)&&Ot(t.getEnd(!0),jt))return n.setAttrib(jt,ca,M),void pt.throttle(jt)}it()},Kt=()=>{Se(Cf,yt=>{yt.elm&&(n.unbind(yt.elm),delete yt.elm)})},Yt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{Yt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",ht),e.on("keyup compositionend",yt=>{a&&"TABLE"===a.nodeName&&ht(yt)}),e.on("hide blur",it),e.on("contextmenu longpress",P,!0)}),e.on("remove",Kt),{isResizable:Y,showResizeRect:$,hideResizeRect:it,updateResizeRect:ht,destroy:()=>{pt.cancel(),a=i=u=null}}},X0=(t,e,n)=>{const r=t.document.createRange();var o,s;return o=r,e.fold(s=>{o.setStartBefore(s.dom)},(s,a)=>{o.setStart(s.dom,a)},s=>{o.setStartAfter(s.dom)}),s=r,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),r},xf=(t,e,n,r,o)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(r.dom,o),s},fl=Eo([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),G0=(t,e,n)=>e(O(n.startContainer),n.startOffset,O(n.endContainer),n.endOffset),Y0=(t,e,n,r)=>({start:t,soffset:e,finish:n,foffset:r}),E_=document.caretPositionFromPoint?(t,e,n)=>{var r,o;return E.from(null===(o=(r=t.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,e,n)).bind(s=>{if(null===s.offsetNode)return E.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),E.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var r,o;return E.from(null===(o=(r=t.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,e,n))}:E.none,wf=Eo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Qo={before:wf.before,on:wf.on,after:wf.after,cata:(t,e,n,r)=>t.fold(e,n,r),getStart:t=>t.fold(ue,ue,ue)},Uc=Eo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ei={domRange:Uc.domRange,relative:Uc.relative,exact:Uc.exact,exactFromRange:t=>Uc.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:r=>O(r.startContainer),relative:(r,o)=>Qo.getStart(r),exact:(r,o,s,a)=>r});return be(e)},range:Y0},qc=(t,e)=>{const n=Ee(t);return"input"===n?Qo.after(t):Tt(["br","img"],n)?0===e?Qo.before(t):Qo.after(t):Qo.on(t,e)},__=(t,e)=>{const n=t.fold(Qo.before,qc,Qo.after),r=e.fold(Qo.before,qc,Qo.after);return ei.relative(n,r)},Q0=(t,e,n,r)=>{const o=qc(t,e),s=qc(n,r);return ei.relative(o,s)},Sf=(t,e)=>{const n=(e||document).createDocumentFragment();return rt(t,r=>{n.appendChild(r.dom)}),O(n)},J0=(t,e,n)=>{return(r=be(O(n)).dom,o=t,s=e,((a,i,l)=>{const c=O(a.document);return E_(c,i,l).map(u=>Y0(O(u.startContainer),u.startOffset,O(u.endContainer),u.endOffset))})(r,o,s)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,s},kf=(t,e)=>mt(t)&&mt(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,Z0=(t,e,n)=>null!==((r,o,s)=>{let a=r;for(;a&&a!==o;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),A_=(t,e,n)=>Z0(t,e,r=>r.nodeName===n),R_=(t,e)=>_r(t)&&!Z0(t,e,Wr),tb=(t,e,n)=>{const r=e.parentNode;if(r){const o=new en(e,t.getParent(r,t.isBlock)||t.getRoot());let s;for(;s=o[n?"prev":"next"]();)if(Ie(s))return!0}return!1},Ef=(t,e,n,r,o)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=o.parentNode;let l,c;if(!i)return E.none();const u=t.getParent(i,t.isBlock)||s;if(r&&Ie(o)&&e&&t.isEmpty(u))return E.some(G(i,t.nodeIndex(o)));const f=new en(o,u);for(;c=f[r?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||R_(c,s))return E.none();if(lt(c)&&c.data.length>0)return A_(c,s,"A")?E.none():E.some(G(c,r?c.data.length:0));if(t.isBlock(c)||a[c.nodeName.toLowerCase()])return E.none();l=c}return gs(l)?E.none():n&&l?E.some(G(l,0)):E.none()},eb=(t,e,n,r)=>{const o=t.getRoot();let s,a=!1,i=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const c=xt(i)&&l===i.childNodes.length,u=t.schema.getNonEmptyElements();let f=n;if(_r(i))return E.none();if(xt(i)&&l>i.childNodes.length-1&&(f=!1),Fi(i)&&(i=o,l=0),i===o){if(f&&(s=i.childNodes[l>0?l-1:0],s)&&(_r(s)||u[s.nodeName]||Xo(s)))return E.none();if(i.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=lt(i)&&c?i.data.length:0,!e&&i===o.lastChild&&Xo(i)||((p,b)=>{let g=b;for(;g&&g!==p;){if(Re(g))return!0;g=g.parentNode}return!1})(o,i)||_r(i))return E.none();if(i.hasChildNodes()&&!Xo(i)){s=i;const p=new en(i,o);do{if(Re(s)||_r(s)){a=!1;break}if(lt(s)&&s.data.length>0){l=f?0:s.data.length,i=s,a=!0;break}if(u[s.nodeName.toLowerCase()]&&!qS(s)){l=t.nodeIndex(s),i=s.parentNode,f||l++,a=!0;break}}while(s=f?p.next():p.prev())}}}return e&&(lt(i)&&0===l&&Ef(t,c,e,!0,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),xt(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Ie(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||tb(t,s,!1)||tb(t,s,!0)||Ef(t,c,e,!0,s).each(p=>{i=p.container(),l=p.offset(),a=!0}))),f&&!e&&lt(i)&&l===i.data.length&&Ef(t,c,e,!1,i).each(p=>{i=p.container(),l=p.offset(),a=!0}),a&&i?E.some(G(i,l)):E.none();var g},$c=(t,e)=>{const n=e.collapsed,r=e.cloneRange(),o=G.fromRangeStart(e);return eb(t,n,!0,r).each(s=>{n&&G.isAbove(o,s)||r.setStart(s.container(),s.offset())}),n||eb(t,n,!1,r).each(s=>{r.setEnd(s.container(),s.offset())}),n&&r.collapse(!0),kf(e,r)?E.none():E.some(r)},Wc=(t,e)=>t.splitText(e),Vc=t=>{let e=t.startContainer,n=t.startOffset,r=t.endContainer,o=t.endOffset;if(e===r&&lt(e)){if(n>0&&n<e.data.length)if(r=Wc(e,n),e=r.previousSibling,o>n){o-=n;const s=Wc(r,o).previousSibling;e=r=s,o=s.data.length,n=0}else o=0}else if(lt(e)&&n>0&&n<e.data.length&&(e=Wc(e,n),n=0),lt(r)&&o>0&&o<r.data.length){const s=Wc(r,o).previousSibling;r=s,o=s.data.length}return{startContainer:e,startOffset:n,endContainer:r,endOffset:o}},da=t=>({walk:(e,n)=>dl(t,e,n),split:Vc,expand:(e,n={type:"word"})=>{if("word"===n.type){const r=la(t,e,[{inline:"span"}]),o=t.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return e},normalize:e=>$c(t,e).fold(Ce,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});da.compareRanges=kf,da.getCaretRangeFromPoint=J0,da.getSelectedNode=kc,da.getNode=ws;const T_=((t,e)=>{const n=o=>{const s=(a=>{const i=a.dom;return eo(a)?i.getBoundingClientRect().height:i.offsetHeight})(o);if(s<=0||null===s){const a=kr(o,t);return parseFloat(a)||0}return s},r=(o,s)=>vn(s,(a,i)=>{const l=kr(o,i),c=void 0===l?0:parseInt(l,10);return isNaN(c)?a:a+c},0);return{set:(o,s)=>{if(!x(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=o.dom;So(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:r,max:(o,s,a)=>{const i=r(o,a);return s>i?s-i:0}}})("height"),nb=()=>O(document),rb=(t,e)=>t.view(e).fold(gt([]),n=>{const r=t.owner(n),o=rb(t,r);return[n].concat(o)});var O_=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?E.none():E.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(O)},owner:t=>zn(t)});const _f=t=>"textarea"===Ee(t),ob=(t,e)=>{const n=(o=>{const s=o.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===o.dom)return On(a.offsetLeft,a.offsetTop);const c=Oe(i?.pageYOffset,l.scrollTop),u=Oe(i?.pageXOffset,l.scrollLeft),f=Oe(l.clientTop,a.clientTop),p=Oe(l.clientLeft,a.clientLeft);return ro(o).translate(u-p,c-f)})(t),r=T_.get(t);return{element:t,bottom:n.top+r,height:r,pos:n,cleanup:e}},sb=(t,e,n,r)=>{B_(t,(o,s)=>D_(t,e,n,r),n)},ab=(t,e,n,r,o)=>{const s={elm:r.element.dom,alignToTop:o};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(e,lr(e).top,r,o),t.dispatch("AfterScrollIntoView",s))},D_=(t,e,n,r)=>{O(t.getBody());const s=O(t.getDoc()),a=((i,l)=>{const c=((f,p)=>{const b=Me(f);if(0===b.length||_f(f))return{element:f,offset:p};if(p<b.length&&!_f(b[p]))return{element:b[p],offset:0};{const g=b[b.length-1];return _f(g)?{element:f,offset:p}:"img"===Ee(g)?{element:g,offset:1}:Yn(g)?{element:g,offset:cc(g).length}:{element:g,offset:Me(g).length}}})(i,l),u=st('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return at(c.element,u),ob(u,()=>Mt(u))})(O(n.startContainer),n.startOffset);ab(t,s,e,a,r),a.cleanup()},ib=(t,e,n,r)=>{const o=O(t.getDoc());ab(t,o,n,ob(O(e),_t),r)},B_=(t,e,n)=>{const r=n.startContainer,o=n.startOffset,s=n.endContainer,a=n.endOffset;e(O(r),O(s));const i=t.dom.createRng();i.setStart(r,o),i.setEnd(s,a),t.selection.setRng(n)},Nf=(t,e)=>t.element.dom.scrollIntoView({block:e?"start":"end"}),lb=(t,e,n,r)=>{const o=e+t,s=n.pos.top,a=n.bottom,i=a-s>=e;s<t?Nf(n,!1!==r):s>o?Nf(n,i?!1!==r:!0===r):a>o&&!i&&Nf(n,!0===r)},cb=(t,e,n,r)=>{const o=be(t).dom.innerHeight;lb(e,o,n,r)},db=(t,e,n,r)=>{const o=be(t).dom.innerHeight;lb(e,o,n,r);const s=(i=>{const l=nb(),c=lr(l),u=((b,g)=>{const v=g.owner(b);return rb(g,v)})(i,O_),f=ro(i),p=jo(u,(b,g)=>{const v=ro(g);return{left:b.left+v.left,top:b.top+v.top}},{left:0,top:0});return On(p.left+f.left+c.left,p.top+f.top+c.top)})(n.element),a=Mi(window);s.top<a.y?Ws(n.element,!1!==r):s.top>a.bottom&&Ws(n.element,!0===r)},P_=(t,e,n)=>sb(t,cb,e,n),L_=(t,e,n)=>ib(t,e,cb,n),M_=(t,e,n)=>sb(t,db,e,n),I_=(t,e,n)=>ib(t,e,db,n),ml=(t,e,n)=>{(t.inline?P_:M_)(t,e,n)},ub=t=>t.dom.focus(),fb=t=>{const e=Te(t).dom;return t.dom===e.activeElement},Af=(t=nb())=>E.from(t.dom.activeElement).map(O),mb=(t,e)=>{const n=Yn(e)?cc(e).length:Me(e).length+1;return t>n?n:t<0?0:t},F_=t=>ei.range(t.start,mb(t.soffset,t.start),t.finish,mb(t.foffset,t.finish)),pb=(t,e)=>!ac(e.dom)&&(gn(t,e)||de(t,e)),gb=t=>e=>pb(t,e.start)&&pb(t,e.finish),j_=t=>ei.range(O(t.startContainer),t.startOffset,O(t.endContainer),t.endOffset),z_=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),E.some(e)}catch{return E.none()}},Rf=t=>{const e=t.inline||fe.browser.isFirefox()?(n=O(t.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?E.from(o.getRangeAt(0)):E.none()).map(j_)})(be(n).dom).filter(gb(n))):E.none();var n;t.bookmark=e.isSome()?e:t.bookmark},Tf=t=>(t.bookmark?t.bookmark:E.none()).bind(e=>{return n=O(t.getBody()),E.from(e).filter(gb(n)).map(F_);var n}).bind(z_),hb={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Tr={setEditorTimeout:(t,e,n)=>{return x(o=n)||(o=0),setTimeout(()=>{t.removed||e()},o);var o},setEditorInterval:(t,e,n)=>{const r=(x(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(r):e()},s));var s;return r}};let ni;const Of=we.DOM,Df=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Kc=(t,e)=>{const n=pE(t);return null!==Of.getParent(e,o=>{return xt(s=o)&&hb.isEditorUIElement(s)||!!n&&t.dom.is(o,n);var s})},Bf=t=>{try{const e=Te(O(t.getElement()));return Af(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},H_=(t,e)=>{const n=e.editor;(o=>{const s=Sc(()=>{Rf(o)},0);o.on("init",()=>{var a,c;o.inline&&((a,i)=>{const l=()=>{i.throttle()};we.DOM.bind(document,"mouseup",l),a.on("remove",()=>{we.DOM.unbind(document,"mouseup",l)})})(o,s),c=s,(a=o).on("mouseup touchend",u=>{c.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Rf(a)})}),o.on("remove",()=>{s.cancel()})})(n);const r=(o,s)=>{GE(o)&&!0!==o.inline&&s(O(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=t.focusedEditor;Df(Bf(n))&&r(n,T),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Tr.setEditorTimeout(n,()=>{const o=t.focusedEditor;Df(Bf(n))&&o===n||r(n,F),Kc(n,Bf(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),ni||(ni=o=>{const s=t.activeEditor;s&&wr(o).each(a=>{a.ownerDocument===document&&(a===document.body||Kc(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Of.bind(document,"focusin",ni))},U_=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&ni&&(Of.unbind(document,"focusin",ni),ni=null)},bb=(t,e)=>{var n,r,o;(n=O(t.getBody()),r=e,(o=r,o.collapsed?E.from(ws(o.startContainer,o.startOffset)).map(O):E.none()).bind(o=>KS(o)?E.some(o):gn(n,o)?E.none():E.some(n))).bind(n=>qn(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Pf=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},ua=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(r=O(n),fb(r)||(o=r,Af(Te(o)).filter(s=>o.dom.contains(s.dom))).isSome());var r,o})(t):mt((e=t).iframeElement)&&fb(O(e.iframeElement));var e},Lf=t=>t.editorManager.setActive(t),vb=(t,e,n,r,o)=>{const a=n?e.startOffset:e.endOffset;return E.from(n?e.startContainer:e.endContainer).map(O).map(i=>r&&e.collapsed?i:xn(i,o(i,a)).getOr(i)).bind(i=>Cn(i)?E.some(i):xe(i).filter(Cn)).map(i=>i.dom).getOr(t)},yb=(t,e,n=!1)=>vb(t,e,!0,n,(r,o)=>Math.min(wn(r),o)),Cb=(t,e,n=!1)=>vb(t,e,!1,n,(r,o)=>o>0?o-1:o),xb=(t,e)=>{const n=t;for(;t&&lt(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Mf=(t,e)=>re(e,n=>{const r=t.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),q_=["img","br"],wb=t=>{return pg(t).filter(n=>0!==n.trim().length||n.indexOf(ln)>-1).isSome()||Tt(q_,Ee(t))||La(n=t)&&"false"===jn(n,"contenteditable");var n},Sb="[data-mce-autocompleter]",kb=t=>wo(t,Sb),W_={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Xc=(t,e,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(t[r])return t[r];if(t!==e){let s=t[o];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[o],s)return s}},V_=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Gs(n))return!1;const r=t.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},Eb=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class rr{static create(e,n){const r=new rr(e,W_[e]||1);return n&&Se(n,(o,s)=>{r.attr(s,o)}),r}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const r=this;if(!Dt(e))return mt(e)&&Se(e,(s,a)=>{r.attr(a,s)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(e in o.map){delete o.map[e];let s=o.length;for(;s--;)if(o[s].name===e)return o.splice(s,1),r}return r}if(e in o.map){let s=o.length;for(;s--;)if(o[s].name===e){o[s].value=n;break}}else o.push({name:e,value:n});return o.map[e]=n,r}return o.map[e]}}clone(){const e=this,n=new rr(e.name,e.type),r=e.attributes;if(r){const o=[];o.map={};for(let s=0,a=r.length;s<a;s++){const i=r[s];"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value)}n.attributes=o}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const r=n.next;e.insert(n,e,!0),n=r}e.remove()}remove(){const e=this,n=e.parent,r=e.next,o=e.prev;return n&&(n.firstChild===e?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===e?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const r=n.lastChild;return r?(r.next=e,e.prev=r,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,r){e.parent&&e.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===o.lastChild?o.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=o,e}getAll(e){const n=this,r=[];for(let o=n.firstChild;o;o=Xc(o,n))o.name===e&&r.push(o);return r}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let o=e.firstChild;o;o=Xc(o,e))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},r){var o;const s=this;let a=s.firstChild;if(Eb(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||Eb(a))return!1}if(8===a.type||3===a.type&&!V_(a)||3===a.type&&a.parent&&n[a.parent.name]&&Gs(null!==(o=a.value)&&void 0!==o?o:"")||r&&r(a))return!1}while(a=Xc(a,s));return!0}walk(e){return Xc(this,null,e)}}const _b=(t,e,n=0)=>{const r=t.toLowerCase();if(-1!==r.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(r.substr(n))){const o=r.indexOf("[endif]",n);return r.indexOf(">",o)}if(e){const o=r.indexOf(">",n);return-1!==o?o:r.length}{const o=/--!?>/g;o.lastIndex=n;const s=o.exec(t);return s?s.index+s[0].length:r.length}},K_=(t,e,n)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,s=t.getVoidElements();let a=1,i=n;for(;0!==a;)for(r.lastIndex=i;;){const l=r.exec(e);if(null===l)return i;if("!"===l[1]){i=Je(l[2],"--")?_b(e,!1,l.index+3):_b(e,!0,l.index+1);break}{o.lastIndex=r.lastIndex;const c=o.exec(e);if(Qt(c)||c.index!==r.lastIndex)continue;"/"===l[1]?a-=1:te(s,l[2])||(a+=1),i=r.lastIndex+c[0].length;break}}return i},Nb=(t,e)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=t.schema;let o=((i,l)=>{const c=new RegExp(["\\s?("+i.join("|")+')="[^"]+"'].join("|"),"gi");return l.replace(c,"")})(t.getTempAttrs(),e);const s=r.getVoidElements();let a;for(;a=n.exec(o);){const i=n.lastIndex,l=a[0].length;let c;c=s[a[1]]?i:K_(r,o,i),o=o.substring(0,i-l)+o.substring(c),n.lastIndex=i-l}return Go(o)},X_=Nb,Ab=t=>{const e=Dn(t,"[data-mce-bogus]");rt(e,n=>{"all"===jn(n,"data-mce-bogus")?Mt(n):Xs(n)?(at(n,ut("\ufeff")),Mt(n)):me(n)})},Rb=t=>{const e=Dn(t,"input");rt(e,n=>{on(n,"name")})},Tb=dt.makeMap,Ob=t=>{const e=[],n=(t=t||{}).indent,r=Tb(t.indent_before||""),o=Tb(t.indent_after||""),s=ys.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,c)=>{if(n&&r[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}if(e.push("<",i),l)for(let u=0,f=l.length;u<f;u++){const p=l[u];e.push(" ",p.name,'="',s(p.value,!0),'"')}if(e[e.length]=!c||a?">":" />",c&&n&&o[i]&&e.length>0){const u=e[e.length-1];u.length>0&&"\n"!==u&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&o[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},_s=(t={},e=Cs())=>{const n=Ob(t);return t.validate=!("validate"in t)||t.validate,{serialize:r=>{const o=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const c=s[i.type];if(c)c(i);else{const u=i.name,f=u in e.getVoidElements();let p=i.attributes;if(o&&p&&p.length>1){const b=[];b.map={};const g=e.getElementRule(i.name);if(g){for(let v=0,h=g.attributesOrder.length;v<h;v++){const C=g.attributesOrder[v];if(C in p.map){const S=p.map[C];b.map[C]=S,b.push({name:C,value:S})}}for(let v=0,h=p.length;v<h;v++){const C=p[v].name;if(!(C in b.map)){const S=p.map[C];b.map[C]=S,b.push({name:C,value:S})}}p=b}}if(n.start(u,p,f),!f){let b=i.firstChild;if(b){"pre"!==u&&"textarea"!==u||3!==b.type||"\n"!==(null===(l=b.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(b)}while(b=b.next)}n.end(u)}}};return 1!==r.type||t.inner?3===r.type?s[3](r):s[11](r):a(r),n.getContent()}}},Db=new Set;rt(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{Db.add(t)});const Bb=["font","text-decoration","text-emphasis"],If=(t,e)=>Qe(t.parseStyle(t.getAttrib(e,"style"))),Y_=(t,e,n)=>{const r=If(t,e),o=If(t,n),s=a=>{var i,l;const c=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",u=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return Xn(c)&&Xn(u)&&c!==u};return Ae(r,a=>{const i=l=>Ae(l,c=>c===a);if(!i(o)&&i(Bb)){const l=$t(o,c=>Ae(Bb,u=>Je(c,u)));return Ae(l,s)}return s(a)})},Pb=(t,e,n)=>E.from(n.container()).filter(lt).exists(r=>{const o=t?0:-1;return e(r.data.charAt(n.offset()+o))}),Ff=kt(Pb,!0,Qa),jf=kt(Pb,!1,Qa),Q_=t=>{const e=t.container();return lt(e)&&(0===e.data.length||mc(e.data)&&ul.isBookmarkNode(e.parentNode))},Ns=(t,e)=>n=>Ju(t?0:-1,n).filter(e).isSome(),Lb=t=>fg(t)&&"block"===kr(O(t),"display"),Mb=t=>{return Re(t)&&!(xt(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},J_=Ns(!0,Lb),Z_=Ns(!1,Lb),pl=Ns(!0,ko),gl=Ns(!1,ko),Ib=Ns(!0,Xo),Fb=Ns(!1,Xo),As=Ns(!0,Mb),Rs=Ns(!1,Mb),jb=(t,e)=>{return o=Ce,gn(r=e,n=t)?Ia(n,s=>o(s)||de(s,r)).slice(0,-1):[];var n,r,o},Jo=(t,e)=>[t].concat(jb(t,e)),zf=(t,e,n)=>d0(t,e,n,Q_),zb=(t,e)=>qe(Jo(O(e.container()),t),Er),Hb=(t,e,n)=>zf(t,e.dom,n).forall(r=>zb(e,n).fold(()=>!_o(r,n,e.dom),o=>!_o(r,n,e.dom)&&gn(o,O(r.container())))),Ub=(t,e,n)=>zb(e,n).fold(()=>zf(t,e.dom,n).forall(r=>!_o(r,n,e.dom)),r=>zf(t,r.dom,n).isNone()),Hf=kt(Ub,!1),qb=kt(Ub,!0),tN=kt(Hb,!1),eN=kt(Hb,!0),nN=t=>Oc(t).exists(Xs),Gc=(t,e,n)=>{const r=$t(Jo(O(n.container()),e),Er),o=Nn(r).getOr(e);return Nr(t,o.dom,n).filter(nN)},Uf=(t,e)=>Oc(e).exists(Xs)||Gc(!0,t,e).isSome(),qf=(t,e)=>{return(n=e,E.from(n.getNode(!0)).map(O)).exists(Xs)||Gc(!1,t,e).isSome();var n},rN=kt(Gc,!1),oN=kt(Gc,!0),$b=t=>G.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),Wb=(t,e)=>{const n=$t(Jo(O(e.container()),t),Er);return Nn(n).getOr(t)},Vb=(t,e)=>$b(e)?jf(e):jf(e)||nr(Wb(t,e).dom,e).exists(jf),Kb=(t,e)=>$b(e)?Ff(e):Ff(e)||Un(Wb(t,e).dom,e).exists(Ff),$f=t=>Oc(t).bind(e=>Qn(e,Cn)).exists(e=>{return n=kr(e,"white-space"),Tt(["pre","pre-wrap"],n);var n}),Xb=(t,e)=>n=>{return r=new en(n,t)[e](),mt(r)&&Re(r)&&Qh(r);var r},Gb=(t,e)=>{return!$f(e)&&(nr((n=t).dom,r=e).isNone()||Un(n.dom,r).isNone()||Hf(n,r)||qb(n,r)||qf(n,r)||Uf(n,r)||Vb(t,e)||Kb(t,e));var n,r},hl=(t,e)=>!$f(e)&&(Hf(t,e)||tN(t,e)||qf(t,e)||Vb(t,e)||((n,r)=>{const o=nr(n.dom,r).getOr(r),s=Xb(n.dom,"prev");return r.isAtStart()&&(s(r.container())||s(o.container()))})(t,e)),bl=(t,e)=>!$f(e)&&(qb(t,e)||eN(t,e)||Uf(t,e)||Kb(t,e)||((n,r)=>{const o=Un(n.dom,r).getOr(r),s=Xb(n.dom,"next");return r.isAtEnd()&&(s(r.container())||s(o.container()))})(t,e)),Wf=(t,e)=>hl(t,e)||bl(t,(n=>{const r=n.container(),o=n.offset();return lt(r)&&o<r.data.length?G(r,o+1):n})(e)),Yb=(t,e)=>Lc(t.charAt(e)),Qb=(t,e)=>Qa(t.charAt(e)),Jb=(t,e,n)=>{const r=e.data,o=G(e,0);return n||!Yb(r,0)||Wf(t,o)?!!(n&&Qb(r,0)&&hl(t,o))&&(e.data=ln+r.slice(1),!0):(e.data=" "+r.slice(1),!0)},Zb=(t,e,n)=>{const r=e.data,o=G(e,r.length-1);return n||!Yb(r,r.length-1)||Wf(t,o)?!!(n&&Qb(r,r.length-1)&&bl(t,o))&&(e.data=r.slice(0,-1)+ln,!0):(e.data=r.slice(0,-1)+" ",!0)},tv=(t,e,n)=>{if(0===n)return;const r=O(t),o=Sr(r,Er).getOr(r),s=t.data.slice(e,e+n),a=e+n>=t.data.length&&bl(o,G(t,t.data.length)),i=0===e&&hl(o,G(t,0));t.replaceData(e,n,wg(s,4,i,a))},Yc=(t,e)=>{const n=t.data.slice(e),r=n.length-Gl(n).length;tv(t,e,r)},Vf=(t,e)=>{const n=t.data.slice(0,e),r=n.length-Yl(n).length;tv(t,e-r,r)},Kf=(t,e,n,r=!0)=>{const o=Yl(t.data).length,s=r?t:e,a=r?e:t;return r?s.appendData(a.data):s.insertData(0,a.data),Mt(O(a)),n&&Yc(s,o),s},aN=(t,e)=>((n,r)=>{const o=n.container(),s=n.offset();return!G.isTextPosition(n)&&o===r.parentNode&&s>G.before(r).offset()})(e,t)?G(e.container(),e.offset()-1):e,ev=t=>{return qr(t.previousSibling)?E.some(lt(e=t.previousSibling)?G(e,e.data.length):G.after(e)):t.previousSibling?$r(t.previousSibling):E.none();var e},nv=t=>{return qr(t.nextSibling)?E.some(lt(e=t.nextSibling)?G(e,0):G.before(e)):t.nextSibling?qn(t.nextSibling):E.none();var e},rv=(t,e,n)=>{n.fold(()=>{t.focus()},r=>{t.selection.setRng(r.toRange(),e)})},lN=(t,e)=>e&&te(t.schema.getBlockElements(),Ee(e)),cN=t=>{if(We(t)){const e=st('<br data-mce-bogus="1">');return se(t),Nt(t,e),E.some(G.before(e.dom))}return E.none()},fa=(t,e,n,r=!0)=>{const o=((t,e,n)=>{return(r=t,o=e,s=n,r?(a=o,nv(i=s).orThunk(()=>ev(i)).orThunk(()=>{return Un(l=a,G.after(c=i)).orThunk(()=>nr(l,G.before(c)));var l,c})):((a,i)=>ev(i).orThunk(()=>nv(i)).orThunk(()=>{return l=a,E.from((c=i).previousSibling?c.previousSibling:c.parentNode).bind(u=>nr(l,G.before(u))).orThunk(()=>Un(l,G.after(c)));var l,c}))(o,s)).map(kt(aN,n));var r,o,s,a,i})(e,t.getBody(),n.dom),s=Sr(n,kt(lN,t),(a=t.getBody(),l=>l.dom===a));var a;const i=((l,c,u)=>{const f=Rn(l).filter(Yn),p=Zr(l).filter(Yn);return Mt(l),(b=f,g=p,v=c,h=(C,S,k)=>{const N=C.dom,R=S.dom,D=N.data.length;return Kf(N,R,u),k.container()===R?G(N,D):k},b.isSome()&&g.isSome()&&v.isSome()?E.some(h(b.getOrDie(),g.getOrDie(),v.getOrDie())):E.none()).orThunk(()=>(u&&(f.each(C=>Vf(C.dom,C.dom.length)),p.each(C=>Yc(C.dom,0))),c));var b,g,v,h})(n,o,(c=n,te(t.schema.getTextInlineElements(),Ee(c))));var c;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(cN).fold(()=>{r&&rv(t,e,i)},l=>{r&&rv(t,e,E.some(l))})},dN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ma=(t,e)=>_e(O(e),oE(t))&&!Ys(t.schema,e)&&t.dom.isEditable(e),ov=t=>{var e,n;return"rtl"===we.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",dN.test(n))},Ts=(t,e,n)=>{const r=(o=t,s=e,$t(we.DOM.getParents(n.container(),"*",s),o));var o,s;return E.from(r[r.length-1])},Or=(t,e)=>{const n=e.container(),r=e.offset();return t?vs(n)?lt(n.nextSibling)?G(n.nextSibling,0):G.after(n):gu(e)?G(n,r+1):e:vs(n)?lt(n.previousSibling)?G(n.previousSibling,n.previousSibling.data.length):G.before(n):hu(e)?G(n,r-1):e},sv=kt(Or,!0),av=kt(Or,!1),iv=(t,e)=>{const n=r=>r.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},Xf=t=>iv(t,"Delete"),uN=t=>gg(t)||ji(t),Qc=(t,e)=>{return gn(t,e)?Qn(e,uN,(n=t,r=>ls(xe(r),n,de))):E.none();var n},Gf=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},lv=(t,e,n)=>pn(qn(n),$r(n),(r,o)=>{const s=Or(!0,r),a=Or(!1,o),i=Or(!1,e);return t?Un(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s)):nr(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a))}).getOr(!0),cv=t=>{var e;return(8===Oi(e=t)||"#comment"===Ee(e)?Rn(t):$e(t)).bind(cv).orThunk(()=>E.some(t))},dv=(t,e,n,r=!0)=>{var o;e.deleteContents();const s=cv(n).getOr(n),a=O(null!==(o=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==o?o:n.dom);if(a.dom===t.getBody()?Gf(t,r):We(a)&&(bs(a),r&&t.selection.setCursorLocation(a.dom,0)),!de(n,a)){const l=ls(xe(a),n)?[]:xe(i=a).map(Me).map(c=>$t(c,u=>!de(i,u))).getOr([]);rt(l.concat(Me(n)),c=>{de(c,a)||gn(c,a)||!We(c)||Mt(c)})}var i},Yf=t=>Dn(t,"td,th"),Qf=(t,e)=>({start:t,end:e}),vl=Eo([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Jc=(t,e)=>Ur(O(t),"td,th",e),uv=t=>!de(t.start,t.end),fv=(t,e)=>ll(t.start,e).bind(n=>ll(t.end,e).bind(r=>cs(de(n,r),n))),Jf=t=>e=>fv(e,t).map(n=>({rng:e,table:n,cells:Yf(n)})),mv=(t,e,n,r)=>{if(n.collapsed||!t.forall(uv))return E.none();if(e.isSameTable){const o=t.bind(Jf(r));return E.some({start:o,end:o})}{const o=Jc(n.startContainer,r),s=Jc(n.endContainer,r),a=o.bind((l=r,c=>ll(c,l).bind(u=>yo(Yf(u)).map(f=>Qf(c,f))))).bind(Jf(r)),i=s.bind((l=>c=>ll(c,l).bind(u=>Nn(Yf(u)).map(f=>Qf(f,c))))(r)).bind(Jf(r));return E.some({start:a,end:i})}var l},pv=(t,e)=>Is(t,n=>de(n,e)),Zf=t=>pn(pv(t.cells,t.rng.start),pv(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),gv=(t,e)=>{const{startTable:n,endTable:r}=e,o=t.cloneRange();return n.each(s=>o.setStartAfter(s.dom)),r.each(s=>o.setEndBefore(s.dom)),o},hv=t=>rt(t,e=>{on(e,"contenteditable"),bs(e)}),tm=(t,e,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(e.dom.lastChild)):(o.setStartBefore(e.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),em(t,o,e,!1).each(s=>s())},bv=t=>{const e=Ja(t),n=O(t.selection.getNode());lc(n.dom)&&We(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&Ae(e,r=>de(r,n))&&Xe(n,"data-mce-selected","1")},vv=(t,e,n)=>E.some(()=>{const r=t.selection.getRng(),o=n.bind(({rng:s,isStartInTable:a})=>{const i=E.from((c=t).dom.getParent(a?s.endContainer:s.startContainer,c.dom.isBlock)).map(O);var c;s.deleteContents(),((c,u,f)=>{f.each(p=>{u?Mt(p):(bs(p),c.selection.setCursorLocation(p.dom,0))})})(t,a,i.filter(We));const l=a?e[0]:e[e.length-1];return tm(t,l,r,a),We(l)?E.none():E.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);hv(o),bv(t)}),mN=(t,e,n,r)=>E.some(()=>{const o=t.selection.getRng(),s=e[0],a=n[n.length-1];tm(t,s,o,!0),tm(t,a,o,!1);const i=We(s)?e:e.slice(1),l=We(a)?n:n.slice(0,-1);hv(i.concat(l)),r.deleteContents(),bv(t)}),em=(t,e,n,r=!0)=>E.some(()=>{dv(t,e,n,r)}),pN=(t,e)=>E.some(()=>fa(t,!1,e)),yv=(t,e)=>qe(Jo(e,t),zi),nm=(t,e)=>qe(Jo(e,t),Bi("caption")),Zc=(t,e)=>E.some(()=>{bs(e),t.selection.setCursorLocation(e.dom,0)}),Cv=(t,e)=>t?Ib(e):Fb(e),rm=(t,e)=>{const n=O(t.selection.getStart(!0)),r=Ja(t);return t.selection.isCollapsed()&&0===r.length?((t,e,n)=>{const r=O(t.getBody());return nm(r,n).fold(()=>((o,s,a,i)=>{const l=G.fromRangeStart(o.selection.getRng());return yv(a,i).bind(c=>{return We(c)?Zc(o,c):(f=a,b=c,g=l,il(s,o.getBody(),g).bind(v=>yv(f,O(v.getNode())).bind(h=>de(h,b)?E.none():E.some(_t))));var f,b,g})})(t,e,r,n).orThunk(()=>cs(((o,s)=>{const a=G.fromRangeStart(o.selection.getRng());return Cv(s,a)||Nr(s,o.getBody(),a).exists(i=>Cv(s,i))})(t,e),_t)),o=>((s,a,i,l)=>{const c=G.fromRangeStart(s.selection.getRng());return We(l)?Zc(s,l):(f=i,b=l,g=c,il(p=a,(u=s).getBody(),g).fold(()=>E.some(_t),v=>{return C=p,S=g,k=v,qn((h=b).dom).bind(N=>$r(h.dom).map(R=>C?S.isEqual(N)&&k.isEqual(R):S.isEqual(R)&&k.isEqual(N))).getOr(!0)?((h,C)=>Zc(h,C))(u,b):((h,C,S)=>nm(h,O(S.getNode())).fold(()=>E.some(_t),k=>cs(!de(k,C),_t)))(f,b,v);var h,C,S,k}));var u,f,p,b,g})(t,e,r,o))})(t,e,n):((o,s,a)=>{const i=O(o.getBody()),l=o.selection.getRng();return 0!==a.length?vv(o,a,E.none()):(c=o,f=l,nm(u=i,s).fold(()=>{return b=c,((t,e)=>{const n=(s=t,a=>de(s,a)),r=((s,a)=>{const i=Jc(s.startContainer,a),l=Jc(s.endContainer,a);return pn(i,l,Qf)})(e,n),o=((s,a)=>{const i=b=>ll(O(b),a),l=i(s.startContainer),c=i(s.endContainer),u=l.isSome(),f=c.isSome(),p=pn(l,c,de).getOr(!1);return{startTable:l,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:p,isMultiTable:!p&&u&&f}})(e,n);var s;return((s,a,i)=>s.exists(l=>{return u=i,!uv(c=l)&&fv(c,u).exists(f=>{const p=f.dom.rows;return 1===p.length&&1===p[0].cells.length})&&df(l.start,a);var c,u}))(r,e,n)?r.map(s=>vl.singleCellTable(e,s.start)):o.isMultiTable?((s,a,i,l)=>mv(s,a,i,l).bind(({start:c,end:u})=>{const f=c.bind(Zf).getOr([]),p=u.bind(Zf).getOr([]);if(f.length>0&&p.length>0){const b=gv(i,a);return E.some(vl.multiTable(f,p,b))}return E.none()}))(r,o,e,n):((s,a,i,l)=>mv(s,a,i,l).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=a,f=Zf(c).getOr([]);if(u&&c.cells.length===f.length)return E.some(vl.fullTable(c.table));if(f.length>0){if(u)return E.some(vl.partialTable(f,E.none()));{const p=gv(i,a);return E.some(vl.partialTable(f,E.some({...a,rng:p})))}}return E.none()}))(r,o,e,n)})(u,f).bind(h=>h.fold(kt(em,b),kt(pN,b),kt(vv,b),kt(mN,b)));var b},b=>Zc(c,b)));var c,u,f})(t,n,r)},pa=(t,e)=>{let n=e;for(;n&&n!==t;){if(so(n)||Re(n))return n;n=n.parentNode}return null},hN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],bN=dt.each,om=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),r=o=>Ae(hN,s=>Je(o,s))||n.has(o);return{compare:(o,s)=>{if(o.nodeName!==s.nodeName||o.nodeType!==s.nodeType)return!1;const a=l=>{const c={};return bN(e.getAttribs(l),u=>{const f=u.nodeName.toLowerCase();"style"===f||r(f)||(c[f]=e.getAttrib(l,f))}),c},i=(l,c)=>{for(const u in l)if(te(l,u)){const f=c[u];if(De(f)||l[u]!==f)return!1;delete c[u]}for(const u in c)if(te(c,u))return!1;return!0};return!(xt(o)&&xt(s)&&(!i(a(o),a(s))||!i(e.parseStyle(e.getAttrib(o,"style")),e.parseStyle(e.getAttrib(s,"style"))))||Ar(o)||Ar(s))},isAttributeInternal:r}},xv=(t,e,n,r)=>{const o=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const c=r.attributes[l];c?c.nodes.push(n):r.attributes[l]={filter:i,nodes:[n]}}}},wv=(t,e)=>{const n=(r,o)=>{Se(r,s=>{const a=Ye(s.nodes);rt(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(o?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!ye(c.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},Sv=(t,e,n,r={})=>{const o=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((c,u)=>{let f=c;for(;f=f.walk();)xv(s,a,f,l)})(i),l})(t,e,n);wv(o,r)},sm=(t,e,n,r)=>{if((t.pad_empty_with_br||e.insert)&&n(r)){const o=new rr("br",1);e.insert&&o.attr("data-mce-bogus","1"),r.empty().append(o)}else r.empty().append(new rr("#text",3)).value=ln},kv=(t,e)=>{const n=t?.firstChild;return mt(n)&&n===t.lastChild&&n.name===e},yl=(t,e,n,r)=>r.isEmpty(e,n,o=>((s,a)=>{const i=s.getElementRule(a.name);return!0===i?.paddEmpty})(t,o)),vN=t=>{let e;for(let n=t;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(e=n)}return E.from(e)},am=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const r=t.children();for(const o of r)n&&!e.isValidChild(n.name,o.name)&&am(o,e,n);t.unwrap()}},im=(t,e,n,r=_t)=>{const o=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=dt.makeMap("tr,td,th,tbody,thead,tfoot,table"),l=new Set,c=u=>u!==n&&!i[u.name];for(let u=0;u<t.length;u++){const f=t[u];let p,b,g;if(!f.parent||l.has(f))continue;if(o[f.name]&&"li"===f.parent.name){let h=f.next;for(;h&&o[h.name];)h.name="li",l.add(h),f.parent.insert(h,f.parent),h=h.next;f.unwrap();continue}const v=[f];for(p=f.parent;p&&!e.isValidChild(p.name,f.name)&&c(p);p=p.parent)v.push(p);if(p&&v.length>1)if(e.isValidChild(p.name,f.name)){v.reverse(),b=v[0].clone(),r(b);let h=b;for(let C=0;C<v.length-1;C++){e.isValidChild(h.name,v[C].name)&&C>0?(g=v[C].clone(),r(g),h.append(g)):g=h;for(let S=v[C].firstChild;S&&S!==v[C+1];){const k=S.next;g.append(S),S=k}h=g}yl(e,s,a,b)?p.insert(f,v[0],!0):(p.insert(b,v[0],!0),p.insert(f,b)),p=v[0],(yl(e,s,a,p)||kv(p,"br"))&&p.empty().remove()}else am(f,e);else if(f.parent){if("li"===f.name){let h=f.prev;if(h&&("ul"===h.name||"ol"===h.name)){h.append(f);continue}if(h=f.next,h&&("ul"===h.name||"ol"===h.name)&&h.firstChild){h.insert(f,h.firstChild,!0);continue}const C=new rr("ul",1);r(C),f.wrap(C);continue}if(e.isValidChild(f.parent.name,"div")&&e.isValidChild("div",f.name)){const h=new rr("div",1);r(h),f.wrap(h)}else am(f,e)}}},Ev=(t,e,n=e.parent)=>!(!n||!t.children[e.name]||t.isValidChild(n.name,e.name))||!(!n||"a"!==e.name||!((r,o)=>{let s=r;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n)),lm=t=>t.collapsed?t:(e=>{const n=G.fromRangeStart(e),r=G.fromRangeEnd(e),o=e.commonAncestorContainer;return Nr(!1,o,r).map(s=>!_o(n,r,o)&&_o(n,s,o)?((a,i,l,c)=>{const u=document.createRange();return u.setStart(a,i),u.setEnd(l,c),u})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),cm=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},_v=(t,e)=>{const n=G.after(t),r=Ao(e).prev(n);return r?r.toRange():null},wN=["pre"],dm=lc,SN=(t,e,n)=>{var r,o;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,c=_s({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u);let f=s.getRng();const p=f.startContainer,b=t.getBody();var k,N;p===b&&s.isCollapsed()&&a.isBlock(b.firstChild)&&(k=t,mt(N=b.firstChild)&&!k.schema.getVoidElements()[N.nodeName])&&a.isEmpty(b.firstChild)&&(f=a.createRng(),f.setStart(b.firstChild,0),f.setEnd(b.firstChild,0),s.setRng(f)),s.isCollapsed()||(k=>{const N=k.dom,R=lm(k.selection.getRng());k.selection.setRng(R);const D=N.getParent(R.startContainer,dm);var P,U,Y;P=N,U=R,mt(Y=D)&&Y===P.getParent(U.endContainer,dm)&&df(O(Y),U)?em(k,R,O(D)):R.startContainer===R.endContainer&&R.endOffset-R.startOffset==1&&lt(R.startContainer.childNodes[R.startOffset])?R.deleteContents():k.getDoc().execCommand("Delete",!1)})(t);const g=s.getNode(),v={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},h=i.parse(e,v);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,r=e.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,s)=>{const a=o.getNonEmptyElements();return mt(s)&&(s.isEmpty(a)||(l=s,o.getBlockElements()[l.name]&&mt((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===ln)(l.firstChild)));var l,c})(t,r)&&(r=r?.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(t.schema,h)&&((k,N)=>!!cm(k,N))(a,g))return f=((t,e,n,r)=>{const o=((f,p,b)=>{const g=p.serialize(b);return(v=>{var h,C;const S=v.firstChild,k=v.lastChild;return S&&"META"===S.nodeName&&(null===(h=S.parentNode)||void 0===h||h.removeChild(S)),k&&"mce_marker"===k.id&&(null===(C=k.parentNode)||void 0===C||C.removeChild(k)),v})(f.createFragment(g))})(e,t,r),s=cm(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||mt(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((r=e.firstChild).data===ln||Ie(r)))?t.slice(0,-1):t;var r,e,n})((i=o.firstChild,$t(null!==(l=i?.childNodes)&&void 0!==l?l:[],f=>"LI"===f.nodeName)));var i,l;const c=e.getRoot(),u=f=>{const p=G.fromRangeStart(n),b=Ao(e.getRoot()),g=1===f?b.prev(p):b.next(p),v=g?.getNode();return!v||cm(e,v)!==s};return s?u(1)?((f,p,b)=>{const g=f.parentNode;return g&&dt.each(p,v=>{g.insertBefore(v,f)}),((v,h)=>{const C=G.before(v),S=Ao(h).next(C);return S?S.toRange():null})(f,b)})(s,a,c):u(2)?(f=s,b=c,e.insertAfter((p=a).reverse(),f),_v(p[0],b)):((f,p,b,g)=>{const v=((C,S)=>{const k=S.cloneRange(),N=S.cloneRange();return k.setStartBefore(C),N.setEndAfter(C),[k.cloneContents(),N.cloneContents()]})(f,g),h=f.parentNode;return h&&(h.insertBefore(v[0],f),dt.each(p,C=>{h.insertBefore(C,f)}),h.insertBefore(v[1],f),h.removeChild(f)),_v(p[p.length-1],b)})(s,a,c,n):null;var f,p,b})(c,a,s.getRng(),h),f&&s.setRng(f),e;!0===n.paste&&((k,N,R,D)=>{var P;const U=N.firstChild,Y=N.lastChild,V=U===("bookmark"===Y.attr("data-mce-type")?Y.prev:Y),L=Tt(wN,U.name);if(V&&L){const z="false"!==U.attr("contenteditable"),I=(null===(P=k.getParent(R,k.isBlock))||void 0===P?void 0:P.nodeName.toLowerCase())===U.name,$=E.from(pa(D,R)).forall(so);return z&&I&&$}return!1})(a,h,g,t.getBody())&&(null===(r=h.firstChild)||void 0===r||r.unwrap()),(k=>{let N=k;for(;N=N.walk();)1===N.type&&N.attr("data-mce-fragment","1")})(h);let C=h.lastChild;if(C&&"mce_marker"===C.attr("id")){const k=C;for(C=C.prev;C;C=C.walk(!0))if(3===C.type||!a.isBlock(C.name)){C.parent&&t.schema.isValidChild(C.parent.name,"span")&&C.parent.insert(k,C,"br"===C.name);break}}if(t._selectionOverrides.showBlockCaretContainer(g),v.invalid){t.selection.setContent(u);let k,N=s.getNode();const R=t.getBody();for(Fi(N)?N=k=R:k=N;k&&k!==R;)N=k,k=k.parentNode;e=N===R?R.innerHTML:a.getOuterHTML(N);const D=i.parse(e),P=(z=>{for(let I=z;I;I=I.walk())if("mce_marker"===I.attr("id"))return E.some(I);return E.none()})(D),U=P.bind(vN).getOr(D);P.each(z=>z.replace(h));const Y=h.children(),V=null!==(o=h.parent)&&void 0!==o?o:D;h.unwrap();const L=$t(Y,z=>Ev(t.schema,z,V));im(L,t.schema,U),Sv(i.getNodeFilters(),i.getAttributeFilters(),D),e=c.serialize(D),N===R?a.setHTML(R,e):a.setOuterHTML(N,e)}else e=c.serialize(h),((k,N,R)=>{var D;if("all"===R.getAttribute("data-mce-bogus"))null===(D=R.parentNode)||void 0===D||D.insertBefore(k.dom.createFragment(N),R);else{const P=R.firstChild;!P||P===R.lastChild&&"BR"===P.nodeName?k.dom.setHTML(R,N):k.selection.setContent(N,{no_events:!0})}})(t,e,g);var S;return((k,N)=>{const R=k.schema.getTextInlineElements(),D=k.dom;if(N){const P=k.getBody(),U=om(k);dt.each(D.select("*[data-mce-fragment]"),Y=>{if(mt(R[Y.nodeName.toLowerCase()])&&mr(If(D,Y),z=>!Db.has(z)))for(let V=Y.parentElement;mt(V)&&V!==P&&!Y_(D,Y,V);V=V.parentElement)if(U.compare(V,Y)){D.remove(Y,!0);break}})}})(t,l),((k,N)=>{var R,D,P;let U;const Y=k.dom,V=k.selection;if(!N)return;V.scrollIntoView(N);const L=pa(k.getBody(),N);if(L&&"false"===Y.getContentEditable(L))return Y.remove(N),void V.select(L);let z=Y.createRng();const I=N.previousSibling;if(lt(I)){z.setStart(I,null!==(D=null===(R=I.nodeValue)||void 0===R?void 0:R.length)&&void 0!==D?D:0);const pt=N.nextSibling;lt(pt)&&(I.appendData(pt.data),null===(P=pt.parentNode)||void 0===P||P.removeChild(pt))}else z.setStartBefore(N),z.setEndBefore(N);const $=Y.getParent(N,Y.isBlock);Y.remove(N),$&&Y.isEmpty($)&&(se(O($)),z.setStart($,0),z.setEnd($,0),dm($)||$.getAttribute("data-mce-fragment")||!(U=(pt=>{let it=G.fromRangeStart(pt);return it=Ao(k.getBody()).next(it),it?.toRange()})(z))?Y.add($,Y.create("br",{"data-mce-bogus":"1"})):(z=U,Y.remove($))),V.setRng(z)})(t,a.get("mce_marker")),S=t.getBody(),dt.each(S.getElementsByTagName("*"),k=>{k.removeAttribute("data-mce-fragment")}),((k,N)=>{E.from(k.getParent(N,"td,th")).map(O).each(YS)})(a,s.getStart()),(k=>{rt(Ye(k.getBody().querySelectorAll("details")),N=>{const R=$t(Ye(N.children),D=>"SUMMARY"===D.nodeName);R.length>1&&rt(R.slice(1),D=>{const P=O(D);F(P,"mce-accordion-summary"),Qg(P,"p")})})})(t),((k,N,R)=>{const D=Ia(O(R),P=>de(P,O(N)));_a(D,D.length-2).filter(Cn).fold(()=>Cu(k,N),P=>Cu(k,P.dom))})(t.schema,t.getBody(),s.getStart()),e},td=t=>t instanceof rr,um=(t,e,n)=>{var r;t.dom.setHTML(t.getBody(),e),!0!==n&&ua(r=t)&&qn(r.getBody()).each(o=>{const s=o.getNode(),a=Xo(s)?qn(s).getOr(o):o;r.selection.setRng(a.toRange())})},Nv=t=>pe(t)?t:Ce,fm=(t,e,n)=>{const r=e(t),o=Nv(n);return r.orThunk(()=>o(t)?E.none():((s,a,i)=>{let l=s.dom;const c=Nv(i);for(;l.parentNode;){l=l.parentNode;const u=O(l),f=a(u);if(f.isSome())return f;if(c(u))break}return E.none()})(t,e,o))},mm=hf,Av=(t,e,n)=>{const r=t.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const s=r[o];if(Rr(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},pm=(t,e,n,r,o)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!Av(t,i,n)||i.parentNode===s||!!To(t,i,n,r,!0));return!!To(t,a,n,r,o)},ed=(t,e,n)=>!(!nn(n)||!mm(e,n.inline))||!(!Ro(n)||!mm(e,n.block))||!!Rr(n)&&xt(e)&&t.is(e,n.selector),Rv=(t,e,n,r,o,s)=>{const a=n[r],i="attributes"===r;if(pe(n.onmatch))return n.onmatch(e,n,r);if(a)if(Aa(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):Fc(t,e,a[l]))return!0}else for(const l in a)if(te(a,l)){const c=i?t.getAttrib(e,l):Fc(t,e,l),u=Es(a[l],s),f=ye(c)||as(c);if(f&&ye(u))continue;if(o&&f&&!n.exact||(!o||n.exact)&&!mm(c,bf(u,l)))return!1}return!0},To=(t,e,n,r,o)=>{const s=t.formatter.get(n),a=t.dom;if(s&&xt(e))for(let i=0;i<s.length;i++){const l=s[i];if(ed(t.dom,e,l)&&Rv(a,e,l,"attributes",o,r)&&Rv(a,e,l,"styles",o,r)){const c=l.classes;if(c)for(let u=0;u<c.length;u++)if(!t.dom.hasClass(e,Es(c[u],r)))return;return l}}},gm=(t,e,n,r,o)=>{if(r)return pm(t,r,e,n,o);if(r=t.selection.getNode(),pm(t,r,e,n,o))return!0;const s=t.selection.getStart();return!(s===r||!pm(t,s,e,n,o))},ri=Bn,Tv=t=>(e=>{const n=[];let r=e;for(;r;){if(lt(r)&&r.data!==ri||r.childNodes.length>1)return[];xt(r)&&n.push(r),r=r.firstChild}return n})(t).length>0,Ov=t=>{if(t){const e=new en(t,t);for(let n=e.current();n;n=e.next())if(lt(n))return n}return null},hm=t=>{const e=X("span");return Qr(e,{id:rf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Nt(e,ut(ri)),e},bm=(t,e,n=!0)=>{const r=t.dom,o=t.selection;if(Tv(e))fa(t,!1,O(e),n);else{const s=o.getRng(),a=r.getParent(e,r.isBlock),i=s.startContainer,l=s.startOffset,c=s.endContainer,u=s.endOffset,f=(p=>{const b=Ov(p);return b&&b.data.charAt(0)===ri&&b.deleteData(0,1),b})(e);r.remove(e,!0),i===f&&l>0&&s.setStart(f,l-1),c===f&&u>0&&s.setEnd(f,u-1),a&&r.isEmpty(a)&&bs(O(a)),o.setRng(s)}},vm=(t,e,n=!0)=>{const r=t.dom,o=t.selection;if(e)bm(t,e,n);else if(!(e=aa(t.getBody(),o.getStart())))for(;e=r.get(rf);)bm(t,e,n)},Dv=(t,e)=>(t.appendChild(e),e),Bv=(t,e)=>{var n;const r=jo(t,(s,a)=>Dv(s,a.cloneNode(!1)),e),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return Dv(r,o.createTextNode(ri))},Pv=t=>{const e=hm(!1),n=Bv(t,e.dom);return{caretContainer:e,caretPosition:G(n,0)}},Lv=(t,e)=>{const{caretContainer:n,caretPosition:r}=Pv(e);return at(O(t),n),Mt(O(t)),r},Mv=(t,e)=>{const n=t.schema.getTextInlineElements();return te(n,Ee(e))&&!Wr(e.dom)&&!Ks(e.dom)},Iv=t=>Wr(t.dom)&&Tv(t.dom),Cl={},Fv=oo(["pre"]);((t,e)=>{Cl[t]||(Cl[t]=[]),Cl[t].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=$t($t(r,Fv),(s=r,a=>{const i=a.previousSibling;return Fv(i)&&Tt(s,i)}));rt(o,s=>{((a,i)=>{const l=O(i),c=zn(l).dom;Mt(l),ge(O(a),[X("br",c),X("br",c),...Me(l)])})(s.previousSibling,s)})}var s})})("pre");const jv=["fontWeight","fontStyle","color","fontSize","fontFamily"],zv=(t,e)=>{const n=t.get(e);return ct(n)?qe(n,r=>{return nn(r)&&"span"===r.inline&&Vt((o=r).styles)&&Ae(Qe(o.styles),s=>Tt(jv,s));var o}):E.none()},Hv=(t,e)=>nr(e,G.fromRangeStart(t)).isNone(),Uv=(t,e)=>!1===Un(e,G.fromRangeEnd(t)).exists(n=>!Ie(n.getNode())||Un(e,n).isSome()),qv=t=>e=>$S(e)&&t.isEditable(e),$v=t=>$t(t.getSelectedBlocks(),qv(t.dom)),ym=dt.each,Cm=t=>xt(t)&&!Ar(t)&&!Wr(t)&&!Ks(t),Wv=(t,e)=>{for(let n=t;n;n=n[e]){if(lt(n)&&Xn(n.data))return t;if(xt(n)&&!Ar(n))return n}return t},Vv=(t,e,n)=>{const r=om(t),o=xt(e)&&ia(e),s=xt(n)&&ia(n);if(o&&s){const a=Wv(e,"previousSibling"),i=Wv(n,"nextSibling");if(r.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,a.appendChild(c)}return t.dom.remove(i),dt.each(dt.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},Kv=(t,e,n,r)=>{var o;if(r&&!1!==e.merge_siblings){const s=null!==(o=Vv(t,k0(r),r))&&void 0!==o?o:r;Vv(t,s,k0(s,!0))}},xm=(t,e,n)=>{ym(t.childNodes,r=>{Cm(r)&&(e(r)&&n(r),r.hasChildNodes()&&xm(r,e,n))})},Xv=(t,e)=>n=>!(!n||!Fc(t,n,e)),Gv=(t,e,n)=>r=>{var o,s;t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=t,"SPAN"===(s=r).nodeName&&0===o.getAttribs(s).length&&o.remove(s,!0)},ga=Eo([{keep:[]},{rename:["name"]},{removed:[]}]),_N=/^(src|href|style)$/,wm=dt.each,nd=hf,Yv=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),Qv=(t,e,n)=>{let r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(xt(r)){const s=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>s?s:o]}return lt(r)&&n&&o>=r.data.length&&(r=new en(r,t.getBody()).next()||r),lt(r)&&!n&&0===o&&(r=new en(r,t.getBody()).prev()||r),r},Jv=(t,e)=>{const n=e?"firstChild":"lastChild",r=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&r?"TR"===t.nodeName&&r[n]||r:t},Sm=(t,e,n,r)=>{var o;const s=t.create(n,r);return null===(o=e.parentNode)||void 0===o||o.insertBefore(s,e),s.appendChild(e),s},Zv=(t,e,n,r,o)=>{const s=O(e),a=O(t.create(r,o)),i=n?to(s):zr(s);return ge(a,i),n?(at(s,a),Ft(a,s)):(Bt(s,a),Nt(a,s)),a.dom},ty=(t,e,n)=>{const r=e.parentNode;let o;const s=t.dom,a=er(t);var i;Ro(n)&&r===s.getRoot()&&(n.list_block&&nd(e,n.list_block)||rt(Ye(e.childNodes),i=>{Za(t,a,i.nodeName.toLowerCase())?o?o.appendChild(i):(o=Sm(s,i,a),s.setAttribs(o,Zi(t))):o=null})),Rr(i=n)&&nn(i)&&ls(ke(i,"mixed"),!0)&&!nd(n.inline,e)||s.remove(e,!0)},ey=(t,e,n)=>x(t)?{name:e,value:null}:{name:t,value:Es(e,n)},ny=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},ry=(t,e,n,r,o)=>{let s=!1;wm(n.styles,(a,i)=>{const{name:l,value:c}=ey(i,a,r),u=bf(c,l);(n.remove_similar||Qt(c)||!xt(o)||nd(Fc(t,o,l),u))&&t.setStyle(e,l,""),s=!0}),s&&ny(t,e)},oy=(t,e,n,r,o)=>{const s=t.dom,a=om(t),i=t.schema;if(nn(e)&&wu(i,e.inline)&&Ys(i,r)&&r.parentElement===t.getBody())return ty(t,r,e),ga.removed();if(!e.ceFalseOverride&&r&&"false"===s.getContentEditableParent(r)||r&&!ed(s,r,e)&&(!e.links||"A"!==r.nodeName))return ga.keep();const l=r,c=e.preserve_attributes;if(nn(e)&&"all"===e.remove&&ct(c)){const u=$t(s.getAttribs(l),f=>Tt(c,f.name.toLowerCase()));if(s.removeAllAttribs(l),rt(u,f=>s.setAttrib(l,f.name,f.value)),u.length>0)return ga.rename("span")}if("all"!==e.remove){ry(s,l,e,n,o),wm(e.attributes,(f,p)=>{const{name:b,value:g}=ey(p,f,n);if(e.remove_similar||Qt(g)||!xt(o)||nd(s.getAttrib(o,b),g)){if("class"===b){const v=s.getAttrib(l,b);if(v){let h="";if(rt(v.split(/\s+/),C=>{/mce\-\w+/.test(C)&&(h+=(h?" ":"")+C)}),h)return void s.setAttrib(l,b,h)}}if(_N.test(b)&&l.removeAttribute("data-mce-"+b),"style"===b&&oo(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(b),void s.setStyle(l,"list-style-type","none");"class"===b&&l.removeAttribute("className"),l.removeAttribute(b)}}),wm(e.classes,f=>{f=Es(f,n),xt(o)&&!s.hasClass(o,f)||s.removeClass(l,f)});const u=s.getAttribs(l);for(let f=0;f<u.length;f++)if(!a.isAttributeInternal(u[f].nodeName))return ga.keep()}return"none"!==e.remove?(ty(t,l,e),ga.removed()):ga.keep()},NN=(t,e,n,r)=>oy(t,e,n,r,r).fold(gt(r),o=>(t.dom.createFragment().appendChild(r),t.dom.rename(r,o)),gt(null)),sy=(t,e,n,r,o)=>{(r||t.selection.isEditable())&&((s,a,i,l,c)=>{const u=s.formatter.get(a),f=u[0],p=s.dom,b=s.selection,g=k=>{const N=((R,D,P,U,Y)=>{let V;return D.parentNode&&rt(jc(R.dom,D.parentNode).reverse(),L=>{if(!V&&xt(L)&&"_start"!==L.id&&"_end"!==L.id){const z=To(R,L,P,U,Y);z&&!1!==z.split&&(V=L)}}),V})(s,k,a,i,c);return((R,D,P,U,Y,V,L,z)=>{var I,$;let pt,it;const Ot=R.dom;if(P){const ht=P.parentNode;for(let Kt=U.parentNode;Kt&&Kt!==ht;Kt=Kt.parentNode){let Yt=Ot.clone(Kt,!1);for(let yt=0;yt<D.length&&(Yt=NN(R,D[yt],z,Yt),null!==Yt);yt++);Yt&&(pt&&Yt.appendChild(pt),it||(it=Yt),pt=Yt)}L.mixed&&Ot.isBlock(P)||(U=null!==(I=Ot.split(P,U))&&void 0!==I?I:U),pt&&it&&(null===($=Y.parentNode)||void 0===$||$.insertBefore(pt,Y),it.appendChild(Y),nn(L)&&Kv(R,L,0,pt))}return U})(s,u,N,k,k,0,f,i)},v=k=>Ae(u,N=>xl(s,N,i,k,k)),h=k=>{const N=Ye(k.childNodes),R=v(k)||Ae(u,P=>ed(p,k,P)),D=k.parentNode;if(!R&&mt(D)&&yf(f)&&v(D),f.deep&&N.length)for(let P=0;P<N.length;P++)h(N[P]);rt(["underline","line-through","overline"],P=>{xt(k)&&s.dom.getStyle(k,"text-decoration")===P&&k.parentNode&&_0(p,k.parentNode)===P&&xl(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:P}},void 0,k)})},C=k=>{const N=p.get(k?"_start":"_end");if(N){let R=N[k?"firstChild":"lastChild"];return Ar(D=R)&&xt(D)&&("_start"===D.id||"_end"===D.id)&&(R=R[k?"firstChild":"lastChild"]),lt(R)&&0===R.data.length&&(R=k?N.previousSibling||N.nextSibling:N.nextSibling||N.previousSibling),p.remove(N,!0),R}var D;return null},S=k=>{let N,R,D=la(p,k,u,k.collapsed);if(f.split){if(D=Vc(D),N=Qv(s,D,!0),R=Qv(s,D),N!==R){if(N=Jv(N,!0),R=Jv(R,!1),Yv(p,N,R)){const U=E.from(N.firstChild).getOr(N);return g(Zv(p,U,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void C(!0)}if(Yv(p,R,N)){const U=E.from(R.lastChild).getOr(R);return g(Zv(p,U,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void C(!1)}N=Sm(p,N,"span",{id:"_start","data-mce-type":"bookmark"}),R=Sm(p,R,"span",{id:"_end","data-mce-type":"bookmark"});const P=p.createRng();P.setStartAfter(N),P.setEndBefore(R),dl(p,P,U=>{rt(U,Y=>{Ar(Y)||Ar(Y.parentNode)||g(Y)})}),g(N),g(R),N=C(!0),R=C()}else N=R=g(N);D.startContainer=N.parentNode?N.parentNode:N,D.startOffset=p.nodeIndex(N),D.endContainer=R.parentNode?R.parentNode:R,D.endOffset=p.nodeIndex(R)+1}dl(p,D,P=>{rt(P,h)})};if(l){if(cl(l)){const k=p.createRng();k.setStartBefore(l),k.setEndAfter(l),S(k)}else S(l);U0(s,a,l,i)}else b.isCollapsed()&&nn(f)&&!Ja(s).length?((t,e,n,r)=>{const o=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),c=l.startContainer,u=l.startOffset;let f=c;lt(c)&&(u!==c.data.length&&(a=!0),f=f.parentNode);const p=[];let b;for(;f;){if(To(t,f,e,n,r)){b=f;break}f.nextSibling&&(a=!0),p.push(f),f=f.parentNode}if(b)if(a){const g=s.getBookmark();l.collapse(!0);let v=la(o,l,i,!0);v=Vc(v),t.formatter.remove(e,n,v,r),s.moveToBookmark(g)}else{const g=aa(t.getBody(),b),v=hm(!1).dom;((S,k,N)=>{var R,D;const P=S.dom,U=P.getParent(N,kt(pf,S.schema));U&&P.isEmpty(U)?null===(R=N.parentNode)||void 0===R||R.replaceChild(k,N):((Y=>{const V=Dn(Y,"br"),L=$t((z=>{const I=[];let $=z.dom;for(;$;)I.push(O($)),$=$.lastChild;return I})(Y).slice(-1),Xs);V.length===L.length&&rt(L,Mt)})(O(N)),P.isEmpty(N)?null===(D=N.parentNode)||void 0===D||D.replaceChild(k,N):P.insertAfter(k,N))})(t,v,g??b);const h=((S,k,N,R,D,P)=>{const U=S.formatter,Y=S.dom,V=$t(Qe(U.get()),z=>z!==R&&!ze(z,"removeformat")),L=(z=S,I=N,vn(V,(pt,it)=>{const Ot=vf(z,it,Yt=>{const yt=Rt=>pe(Rt)||Rt.length>1&&"%"===Rt.charAt(0);return Ae(["styles","attributes"],Rt=>ke(Yt,Rt).exists(jt=>{const M=ct(jt)?jt:qo(jt);return Ae(M,yt)}))});return z.formatter.matchNode(I,it,{},Ot)?pt.concat([it]):pt},[]));var z,I;if($t(L,z=>!((I,$,pt)=>{const it=["inline","block","selector","attributes","styles","classes"],Ot=ht=>xr(ht,(Kt,Yt)=>Ae(it,yt=>yt===Yt));return vf(I,$,ht=>{const Kt=Ot(ht);return vf(I,pt,Yt=>{const yt=Ot(Yt);return((Rt,jt,M=je)=>ne(M).eq(Rt,jt))(Kt,yt)})})})(S,z,R)).length>0){const z=N.cloneNode(!1);return Y.add(k,z),U.remove(R,D,z,P),Y.remove(z),E.some(z)}return E.none()})(t,v,b,e,n,r),C=Bv(p.concat(h.toArray()),v);g&&bm(t,g,!1),s.setCursorLocation(C,1),o.isEmpty(b)&&o.remove(b)}})(s,a,i,c):(S0(s,()=>ff(s,S),k=>nn(f)&&gm(s,a,i,k)),s.nodeChanged()),k=s,R=i,"removeformat"===(N=a)?rt($v(k.selection),D=>{rt(jv,P=>k.dom.setStyle(D,P,"")),ny(k.dom,D)}):zv(k.formatter,N).each(D=>{rt($v(k.selection),P=>ry(k.dom,P,D,R,null))}),U0(s,a,l,i);var k,N,R})(t,e,n,r,o)},xl=(t,e,n,r,o)=>oy(t,e,n,r,o).fold(Ce,s=>(t.dom.rename(r,s),!0),Be),ay=dt.each,rd=dt.each,iy=(t,e,n,r)=>{if(rd(n.styles,(o,s)=>{t.setStyle(e,s,Es(o,r))}),n.styles){const o=t.getAttrib(e,"style");o&&t.setAttrib(e,"data-mce-style",o)}},AN=(t,e,n,r)=>{const o=t.formatter.get(e),s=o[0],a=!r&&t.selection.isCollapsed(),i=t.dom,l=t.selection,c=(g,v=s)=>{pe(v.onformat)&&v.onformat(g,v,n,r),iy(i,g,v,n),rd(v.attributes,(h,C)=>{i.setAttrib(g,C,Es(h,n))}),rd(v.classes,h=>{const C=Es(h,n);i.hasClass(g,C)||i.addClass(g,C)})},u=(g,v)=>{let h=!1;return rd(g,C=>!(!Rr(C)||("false"!==i.getContentEditable(v)||C.ceFalseOverride)&&(!mt(C.collapsed)||C.collapsed===a)&&i.is(v,C.selector)&&!Wr(v)&&(c(v,C),h=!0,1))),h},p=(g,v,h)=>{const C=[];let S=!0;const k=s.inline||s.block,N=(g=>{if(Dt(g)){const v=i.create(g);return c(v),v}return null})(k);dl(g,v,R=>{let D;const P=U=>{let Y=!1,V=S,L=!1;const z=U.parentNode,I=z.nodeName.toLowerCase(),$=g.getContentEditable(U);mt($)&&(V=S,S="true"===$,Y=!0,L=E0(t,U));const pt=S&&!Y;if(Ie(U)&&!((it,Ot,ht,Kt)=>{if(fE(it)&&nn(Ot)&&ht.parentNode){const Yt=Ig(it.schema),yt=((t,e)=>((n,r)=>{const o=n.dom;return o.parentNode?(s=O(o.parentNode),qe(s.dom.childNodes,i=>(s=>!de(n,s)&&r(s))(O(i))).map(O)):E.none();var s})(t,e).isSome())(O(ht),Rt=>Wr(Rt.dom));return yn(Yt,Kt)&&We(O(ht.parentNode),!1)&&!yt}return!1})(t,s,U,I))return D=null,void(Ro(s)&&g.remove(U));if(it=U,Ro(Ot=s)&&!0===Ot.wrapper&&To(t,it,e,n))D=null;else{if(((it,Ot,ht)=>{const Kt=Ro(Yt=s)&&!0!==Yt.wrapper&&pf(t.schema,it)&&Za(t,Ot,k);var Yt;return ht&&Kt})(U,I,pt)){const it=g.rename(U,k);return c(it),C.push(it),void(D=null)}if(Rr(s)){let it=u(o,U);if(!it&&mt(z)&&yf(s)&&(it=u(o,z)),!nn(s)||it)return void(D=null)}mt(N)&&((it,Ot,ht,Kt)=>{const Yt=it.nodeName.toLowerCase(),yt=Za(t,k,Yt)&&Za(t,Ot,k),Rt=!h&&lt(it)&&mc(it.data),jt=Wr(it),M=!nn(s)||!g.isBlock(it);return(ht||Kt)&&yt&&!Rt&&!jt&&M})(U,I,pt,L)?(D||(D=g.clone(N,!1),z.insertBefore(D,U),C.push(D)),L&&Y&&(S=V),D.appendChild(U)):(D=null,rt(Ye(U.childNodes),P),Y&&(S=V),D=null)}var it,Ot};rt(R,P)}),!0===s.links&&rt(C,R=>{const D=P=>{"A"===P.nodeName&&c(P,s),rt(Ye(P.childNodes),D)};D(R)}),rt(C,R=>{const D=(P=>{let U=0;return rt(P.childNodes,Y=>{var V;mt(V=Y)&&lt(V)&&0===V.length||Ar(Y)||U++}),U})(R);var P;!(C.length>1)&&g.isBlock(R)||0!==D?(nn(s)||Ro(s)&&s.wrapper)&&(s.exact||1!==D||(R=qe((P=R).childNodes,mf).filter(Y=>"false"!==g.getContentEditable(Y)&&ed(g,Y,s)).map(Y=>{const V=g.clone(Y,!1);return c(V),g.replace(V,P,!0),g.remove(Y,!0),V}).getOr(P)),((P,U,Y,V)=>{ay(U,L=>{var z,I,$;nn(L)&&ay(P.dom.select(L.inline,V),z=>{Cm(z)&&xl(P,L,Y,z,L.exact?z:null)}),z=P.dom,$=V,(I=L).clear_child_styles&&ym(z.select(I.links?"*:not(a)":"*",$),it=>{Cm(it)&&ia(it)&&ym(I.styles,(Ot,ht)=>{z.setStyle(it,ht,"")})})})})(t,o,n,R),((P,U,Y,V,L)=>{const z=L.parentNode;To(P,z,Y,V)&&xl(P,U,V,L)||U.merge_with_parents&&z&&P.dom.getParent(z,I=>!!To(P,I,Y,V)&&(xl(P,U,V,L),!0))})(t,s,e,n,R),((P,U,Y,V)=>{if(U.styles&&U.styles.backgroundColor){const L=Xv(P,"fontSize");xm(V,z=>L(z)&&ia(z),Gv(P,"backgroundColor",Es(U.styles.backgroundColor,Y)))}})(g,s,n,R),((P,U,Y,V)=>{const L=z=>{if(xt(z)&&xt(z.parentNode)&&ia(z)){const I=_0(P,z.parentNode);P.getStyle(z,"color")&&I?P.setStyle(z,"text-decoration",I):P.getStyle(z,"text-decoration")===I&&P.setStyle(z,"text-decoration",null)}};U.styles&&(U.styles.color||U.styles.textDecoration)&&(dt.walk(V,L,"childNodes"),L(V))})(g,s,0,R),((P,U,Y,V)=>{if(nn(U)&&("sub"===U.inline||"sup"===U.inline)){const L=Xv(P,"fontSize");xm(V,I=>L(I)&&ia(I),Gv(P,"fontSize",""));const z=$t(P.select("sup"===U.inline?"sub":"sup",V),ia);P.remove(z,!0)}})(g,s,0,R),Kv(t,s,0,R)):g.remove(R,!0)})},b=cl(r)?r:l.getNode();if("false"===i.getContentEditable(b)&&!E0(t,b))return u(o,r=b),void H0(t,e,r,n);if(s){if(r)if(cl(r)){if(!u(o,r)){const g=i.createRng();g.setStartBefore(r),g.setEndAfter(r),p(i,la(i,g,o),!0)}}else p(i,r,!0);else a&&nn(s)&&!Ja(t).length?((g,v,h)=>{let C;const S=g.selection,k=g.formatter.get(v);if(!k)return;const N=S.getRng();let R=N.startOffset;const D=N.startContainer.nodeValue;C=aa(g.getBody(),S.getStart());const P=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(D&&R>0&&R<D.length&&P.test(D.charAt(R))&&P.test(D.charAt(R-1))){const V=S.getBookmark();N.collapse(!0);let L=la(g.dom,N,k);L=Vc(L),g.formatter.apply(v,h,L),S.moveToBookmark(V)}else{let V=C?Ov(C):null;C&&V?.data===ri||(U=g.getDoc(),Y=hm(!0).dom,C=U.importNode(Y,!0),V=C.firstChild,N.insertNode(C),R=1),g.formatter.apply(v,h,C),S.setCursorLocation(V,R)}var U,Y})(t,e,n):(l.setRng(lm(l.getRng())),S0(t,()=>{ff(t,(g,v)=>{const h=v?g:la(i,g,o);p(i,h,!1)})},Be),t.nodeChanged()),zv(t.formatter,e).each(g=>{var v;rt($t((h=>{const C=h.getSelectedBlocks(),S=h.getRng();if(h.isCollapsed())return[];if(1===C.length)return Hv(S,C[0])&&Uv(S,C[0])?C:[];{const k=Nn(C).filter(D=>Hv(S,D)).toArray(),N=yo(C).filter(D=>Uv(S,D)).toArray(),R=C.slice(1,-1);return k.concat(R).concat(N)}})(v=t.selection),qv(v.dom)),v=>iy(i,v,g,n))});v=t,te(Cl,g=e)&&rt(Cl[g],h=>{h(v)})}var g,v;H0(t,e,r,n)},ly=(t,e,n,r)=>{(r||t.selection.isEditable())&&AN(t,e,n,r)},cy=t=>te(t,"vars"),dy=t=>t.selection.getStart(),uy=(t,e,n,r,o)=>Lr(e,s=>{const a=t.formatter.matchNode(s,n,o??{},r);return!De(a)},s=>!!Av(t,s,n)||!r&&mt(t.formatter.matchNode(s,n,o,!0))),fy=(t,e)=>{const n=e??dy(t);return $t(jc(t.dom,n),r=>xt(r)&&!Ks(r))},my=(t,e,n)=>{const r=fy(t,e);Se(n,(o,s)=>{const a=i=>{const l=uy(t,r,s,i.similar,cy(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const u=l.getOr(e);cy(i)?i.callback(c,{node:u,format:s,parents:r}):rt(i.callbacks,f=>f(c,{node:u,format:s,parents:r}))}};rt([o.withSimilar,o.withoutSimilar],a),rt(o.withVars,a)})},py=dt.explode,gy=()=>{const t={};return{addFilter:(e,n)=>{rt(py(e),r=>{te(t,r)||(t[r]={name:r,callbacks:[]}),t[r].callbacks.push(n)})},getFilters:()=>qo(t),removeFilter:(e,n)=>{rt(py(e),r=>{if(te(t,r))if(mt(n)){const o=t[r],s=$t(o.callbacks,a=>a!==n);s.length>0?o.callbacks=s:delete t[r]}else delete t[r]})}}},hy=(t,e,n)=>{e.addNodeFilter("br",(r,o,s)=>{const a=dt.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),l=n.getWhitespaceElements();a.body=1;const c=u=>u.name in a||ku(n,u);for(let u=0,f=r.length;u<f;u++){let p=r[u],b=p.parent;if(b&&c(b)&&p===b.lastChild){let g=p.prev;for(;g;){const v=g.name;if("span"!==v||"bookmark"!==g.attr("data-mce-type")){"br"===v&&(p=null);break}g=g.prev}if(p&&(p.remove(),yl(n,i,l,b))){const v=n.getElementRule(b.name);v&&(v.removeEmpty?b.remove():v.paddEmpty&&sm(t,s,c,b))}}else{let g=p;for(;b&&b.firstChild===g&&b.lastChild===g&&(g=b,!a[b.name]);)b=b.parent;if(g===b){const v=new rr("#text",3);v.value=ln,p.replace(v)}}}})},km=t=>{const[e,...n]=t.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(o){const s=";base64"===o[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(r):decodeURIComponent(r);return E.some({type:o[1],data:a,base64Encoded:s})}return E.none()},by=(t,e,n=!0)=>{let r=e;if(n)try{r=atob(e)}catch{return E.none()}const o=new Uint8Array(r.length);for(let s=0;s<o.length;s++)o[s]=r.charCodeAt(s);return E.some(new Blob([o],{type:t}))},vy=t=>new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{e(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(t)});let TN=0;const yy=(t,e,n)=>km(t).bind(({data:r,type:o,base64Encoded:s})=>{if(e&&!s)return E.none();{const a=s?r:btoa(r);return n(a,o)}}),Cy=(t,e,n)=>{const r=t.create("blobid"+TN++,e,n);return t.add(r),r},xy=(t,e,n=!1)=>yy(e,n,(r,o)=>E.from(t.getByData(r,o)).orThunk(()=>by(o,r).map(s=>Cy(t,s,r))));function ha(t){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Em(t,e){return(Em=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(t,e)}function _m(t,e,n){return(_m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(r,o,s){var a=[null];a.push.apply(a,o);var i=new(Function.bind.apply(r,a));return s&&Em(i,s.prototype),i}).apply(null,arguments)}function lo(t){return function(e){if(Array.isArray(e))return Nm(e)}(t)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return Nm(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nm(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var DN=Object.hasOwnProperty,wy=Object.setPrototypeOf,BN=Object.isFrozen,PN=Object.getPrototypeOf,LN=Object.getOwnPropertyDescriptor,cr=Object.freeze,Oo=Object.seal,MN=Object.create,Sy=typeof Reflect<"u"&&Reflect,od=Sy.apply,Am=Sy.construct;od||(od=function(t,e,n){return t.apply(e,n)}),cr||(cr=function(t){return t}),Oo||(Oo=function(t){return t}),Am||(Am=function(t,e){return _m(t,lo(e))});var ky,IN=co(Array.prototype.forEach),FN=co(Array.prototype.pop),wl=co(Array.prototype.push),sd=co(String.prototype.toLowerCase),jN=co(String.prototype.match),Os=co(String.prototype.replace),zN=co(String.prototype.indexOf),HN=co(String.prototype.trim),dr=co(RegExp.prototype.test),Rm=(ky=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Am(ky,e)});function co(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return od(t,e,r)}}function ve(t,e){wy&&wy(t,null);for(var n=e.length;n--;){var r=e[n];if("string"==typeof r){var o=sd(r);o!==r&&(BN(e)||(e[n]=o),r=o)}t[r]=!0}return t}function ba(t){var e,n=MN(null);for(e in t)od(DN,t,[e])&&(n[e]=t[e]);return n}function ad(t,e){for(;null!==t;){var n=LN(t,e);if(n){if(n.get)return co(n.get);if("function"==typeof n.value)return co(n.value)}t=PN(t)}return function(r){return console.warn("fallback value for",r),null}}var Ey=cr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Tm=cr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Om=cr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),UN=cr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Dm=cr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),qN=cr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_y=cr(["#text"]),Ny=cr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Bm=cr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ay=cr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),id=cr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$N=Oo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),WN=Oo(/<%[\w\W]*|[\w\W]*%>/gm),VN=Oo(/^data-[\-\w.\u00B7-\uFFFF]/),KN=Oo(/^aria-[\-\w]+$/),XN=Oo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),GN=Oo(/^(?:\w+script|data):/i),YN=Oo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),QN=Oo(/^html$/i),ZN=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window,n=function(W){return t(W)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var r=e.document,o=e.document,s=e.DocumentFragment,a=e.HTMLTemplateElement,i=e.Node,l=e.Element,c=e.NodeFilter,u=e.NamedNodeMap,f=void 0===u?e.NamedNodeMap||e.MozNamedAttrMap:u,p=e.HTMLFormElement,b=e.DOMParser,g=e.trustedTypes,v=l.prototype,h=ad(v,"cloneNode"),C=ad(v,"nextSibling"),S=ad(v,"childNodes"),k=ad(v,"parentNode");if("function"==typeof a){var N=o.createElement("template");N.content&&N.content.ownerDocument&&(o=N.content.ownerDocument)}var R=function(W,Xt){if("object"!==ha(W)||"function"!=typeof W.createPolicy)return null;var Lt=null,Ne="data-tt-policy-suffix";Xt.currentScript&&Xt.currentScript.hasAttribute(Ne)&&(Lt=Xt.currentScript.getAttribute(Ne));var Ge="dompurify"+(Lt?"#"+Lt:"");try{return W.createPolicy(Ge,{createHTML:function(Ln){return Ln}})}catch{return console.warn("TrustedTypes policy "+Ge+" could not be created."),null}}(g,r),D=R?R.createHTML(""):"",U=o.implementation,Y=o.createNodeIterator,V=o.createDocumentFragment,L=o.getElementsByTagName,z=r.importNode,I={};try{I=ba(o).documentMode?o.documentMode:{}}catch{}var $={};n.isSupported="function"==typeof k&&U&&void 0!==U.createHTMLDocument&&9!==I;var pt,it,Ot=$N,ht=WN,Kt=VN,Yt=KN,yt=GN,Rt=YN,jt=XN,M=null,j=ve({},[].concat(lo(Ey),lo(Tm),lo(Om),lo(Dm),lo(_y))),Q=null,nt=ve({},[].concat(lo(Ny),lo(Bm),lo(Ay),lo(id))),J=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Z=null,ft=null,At=!0,Ct=!0,zt=!1,Ut=!1,bt=!1,Zt=!1,Ve=!1,Pe=!1,sr=!1,ar=!1,mo=!0,Vr=!0,bn=!1,ur={},Fe=null,Mo=ve({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ps=null,eu=ve({},["audio","video","img","source","image","track"]),Io=null,Ul=ve({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),br="http://www.w3.org/1998/Math/MathML",Ls="http://www.w3.org/2000/svg",vr="http://www.w3.org/1999/xhtml",ka=vr,OS=!1,jO=["application/xhtml+xml","text/html"],vi=null,zO=o.createElement("form"),DS=function(W){return W instanceof RegExp||W instanceof Function},ig=function(W){vi&&vi===W||(W&&"object"===ha(W)||(W={}),W=ba(W),M="ALLOWED_TAGS"in W?ve({},W.ALLOWED_TAGS):j,Q="ALLOWED_ATTR"in W?ve({},W.ALLOWED_ATTR):nt,Io="ADD_URI_SAFE_ATTR"in W?ve(ba(Ul),W.ADD_URI_SAFE_ATTR):Ul,Ps="ADD_DATA_URI_TAGS"in W?ve(ba(eu),W.ADD_DATA_URI_TAGS):eu,Fe="FORBID_CONTENTS"in W?ve({},W.FORBID_CONTENTS):Mo,Z="FORBID_TAGS"in W?ve({},W.FORBID_TAGS):{},ft="FORBID_ATTR"in W?ve({},W.FORBID_ATTR):{},ur="USE_PROFILES"in W&&W.USE_PROFILES,At=!1!==W.ALLOW_ARIA_ATTR,Ct=!1!==W.ALLOW_DATA_ATTR,zt=W.ALLOW_UNKNOWN_PROTOCOLS||!1,Ut=W.SAFE_FOR_TEMPLATES||!1,bt=W.WHOLE_DOCUMENT||!1,Pe=W.RETURN_DOM||!1,sr=W.RETURN_DOM_FRAGMENT||!1,ar=W.RETURN_TRUSTED_TYPE||!1,Ve=W.FORCE_BODY||!1,mo=!1!==W.SANITIZE_DOM,Vr=!1!==W.KEEP_CONTENT,bn=W.IN_PLACE||!1,jt=W.ALLOWED_URI_REGEXP||jt,ka=W.NAMESPACE||vr,W.CUSTOM_ELEMENT_HANDLING&&DS(W.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(J.tagNameCheck=W.CUSTOM_ELEMENT_HANDLING.tagNameCheck),W.CUSTOM_ELEMENT_HANDLING&&DS(W.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(J.attributeNameCheck=W.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),W.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof W.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(J.allowCustomizedBuiltInElements=W.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pt=pt=-1===jO.indexOf(W.PARSER_MEDIA_TYPE)?"text/html":W.PARSER_MEDIA_TYPE,it="application/xhtml+xml"===pt?function(Xt){return Xt}:sd,Ut&&(Ct=!1),sr&&(Pe=!0),ur&&(M=ve({},lo(_y)),Q=[],!0===ur.html&&(ve(M,Ey),ve(Q,Ny)),!0===ur.svg&&(ve(M,Tm),ve(Q,Bm),ve(Q,id)),!0===ur.svgFilters&&(ve(M,Om),ve(Q,Bm),ve(Q,id)),!0===ur.mathMl&&(ve(M,Dm),ve(Q,Ay),ve(Q,id))),W.ADD_TAGS&&(M===j&&(M=ba(M)),ve(M,W.ADD_TAGS)),W.ADD_ATTR&&(Q===nt&&(Q=ba(Q)),ve(Q,W.ADD_ATTR)),W.ADD_URI_SAFE_ATTR&&ve(Io,W.ADD_URI_SAFE_ATTR),W.FORBID_CONTENTS&&(Fe===Mo&&(Fe=ba(Fe)),ve(Fe,W.FORBID_CONTENTS)),Vr&&(M["#text"]=!0),bt&&ve(M,["html","head","body"]),M.table&&(ve(M,["tbody"]),delete Z.tbody),cr&&cr(W),vi=W)},BS=ve({},["mi","mo","mn","ms","mtext"]),PS=ve({},["foreignobject","desc","title","annotation-xml"]),HO=ve({},["title","style","font","a","script"]),nu=ve({},Tm);ve(nu,Om),ve(nu,UN);var lg=ve({},Dm);ve(lg,qN);var es=function(W){wl(n.removed,{element:W});try{W.parentNode.removeChild(W)}catch{try{W.outerHTML=D}catch{W.remove()}}},ru=function(W,Xt){try{wl(n.removed,{attribute:Xt.getAttributeNode(W),from:Xt})}catch{wl(n.removed,{attribute:null,from:Xt})}if(Xt.removeAttribute(W),"is"===W&&!Q[W])if(Pe||sr)try{es(Xt)}catch{}else try{Xt.setAttribute(W,"")}catch{}},LS=function(W){var Xt,Lt;if(Ve)W="<remove></remove>"+W;else{var Ne=jN(W,/^[\r\n\t ]+/);Lt=Ne&&Ne[0]}"application/xhtml+xml"===pt&&(W='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+W+"</body></html>");var Ge=R?R.createHTML(W):W;if(ka===vr)try{Xt=(new b).parseFromString(Ge,pt)}catch{}if(!Xt||!Xt.documentElement){Xt=U.createDocument(ka,"template",null);try{Xt.documentElement.innerHTML=OS?"":Ge}catch{}}var Ln=Xt.body||Xt.documentElement;return W&&Lt&&Ln.insertBefore(o.createTextNode(Lt),Ln.childNodes[0]||null),ka===vr?L.call(Xt,bt?"html":"body")[0]:bt?Xt.documentElement:Ln},MS=function(W){return Y.call(W.ownerDocument||W,W,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},ql=function(W){return"object"===ha(i)?W instanceof i:W&&"object"===ha(W)&&"number"==typeof W.nodeType&&"string"==typeof W.nodeName},ns=function(W,Xt,Lt){$[W]&&IN($[W],function(Ne){Ne.call(n,Xt,Lt,vi)})},IS=function(W){var Xt,Lt;if(ns("beforeSanitizeElements",W,null),(Lt=W)instanceof p&&("string"!=typeof Lt.nodeName||"string"!=typeof Lt.textContent||"function"!=typeof Lt.removeChild||!(Lt.attributes instanceof f)||"function"!=typeof Lt.removeAttribute||"function"!=typeof Lt.setAttribute||"string"!=typeof Lt.namespaceURI||"function"!=typeof Lt.insertBefore)||dr(/[\u0080-\uFFFF]/,W.nodeName))return es(W),!0;var Ne=it(W.nodeName);if(ns("uponSanitizeElement",W,{tagName:Ne,allowedTags:M}),W.hasChildNodes()&&!ql(W.firstElementChild)&&(!ql(W.content)||!ql(W.content.firstElementChild))&&dr(/<[/\w]/g,W.innerHTML)&&dr(/<[/\w]/g,W.textContent)||"select"===Ne&&dr(/<template/i,W.innerHTML))return es(W),!0;if(!M[Ne]||Z[Ne]){if(!Z[Ne]&&jS(Ne)&&(J.tagNameCheck instanceof RegExp&&dr(J.tagNameCheck,Ne)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Ne)))return!1;if(Vr&&!Fe[Ne]){var Ge=k(W)||W.parentNode,Ln=S(W)||W.childNodes;if(Ln&&Ge)for(var un=Ln.length-1;un>=0;--un)Ge.insertBefore(h(Ln[un],!0),C(W))}return es(W),!0}return W instanceof l&&!function(po){var fn=k(po);fn&&fn.tagName||(fn={namespaceURI:vr,tagName:"template"});var mn=sd(po.tagName),Ea=sd(fn.tagName);return po.namespaceURI===Ls?fn.namespaceURI===vr?"svg"===mn:fn.namespaceURI===br?"svg"===mn&&("annotation-xml"===Ea||BS[Ea]):!!nu[mn]:po.namespaceURI===br?fn.namespaceURI===vr?"math"===mn:fn.namespaceURI===Ls?"math"===mn&&PS[Ea]:!!lg[mn]:po.namespaceURI===vr&&!(fn.namespaceURI===Ls&&!PS[Ea])&&!(fn.namespaceURI===br&&!BS[Ea])&&!lg[mn]&&(HO[mn]||!nu[mn])}(W)?(es(W),!0):"noscript"!==Ne&&"noembed"!==Ne||!dr(/<\/no(script|embed)/i,W.innerHTML)?(Ut&&3===W.nodeType&&(Xt=Os(Xt=W.textContent,Ot," "),Xt=Os(Xt,ht," "),W.textContent!==Xt&&(wl(n.removed,{element:W.cloneNode()}),W.textContent=Xt)),ns("afterSanitizeElements",W,null),!1):(es(W),!0)},FS=function(W,Xt,Lt){if(mo&&("id"===Xt||"name"===Xt)&&(Lt in o||Lt in zO))return!1;if((!Ct||ft[Xt]||!dr(Kt,Xt))&&(!At||!dr(Yt,Xt)))if(!Q[Xt]||ft[Xt]){if(!(jS(W)&&(J.tagNameCheck instanceof RegExp&&dr(J.tagNameCheck,W)||J.tagNameCheck instanceof Function&&J.tagNameCheck(W))&&(J.attributeNameCheck instanceof RegExp&&dr(J.attributeNameCheck,Xt)||J.attributeNameCheck instanceof Function&&J.attributeNameCheck(Xt))||"is"===Xt&&J.allowCustomizedBuiltInElements&&(J.tagNameCheck instanceof RegExp&&dr(J.tagNameCheck,Lt)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Lt))))return!1}else if(!Io[Xt]&&!dr(jt,Os(Lt,Rt,""))&&("src"!==Xt&&"xlink:href"!==Xt&&"href"!==Xt||"script"===W||0!==zN(Lt,"data:")||!Ps[W])&&(!zt||dr(yt,Os(Lt,Rt,"")))&&Lt)return!1;return!0},jS=function(W){return W.indexOf("-")>0},zS=function(W){var Xt,Lt,Ne,Ge;ns("beforeSanitizeAttributes",W,null);var Ln=W.attributes;if(Ln){var un={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Q};for(Ge=Ln.length;Ge--;){var po=Xt=Ln[Ge],fn=po.name,mn=po.namespaceURI;Lt="value"===fn?Xt.value:HN(Xt.value),Ne=it(fn);var Ea=Lt;if(un.attrName=Ne,un.attrValue=Lt,un.keepAttr=!0,un.forceKeepAttr=void 0,ns("uponSanitizeAttribute",W,un),Lt=un.attrValue,!un.forceKeepAttr)if(un.keepAttr)if(dr(/\/>/i,Lt))ru(fn,W);else{Ut&&(Lt=Os(Lt,Ot," "),Lt=Os(Lt,ht," "));var qO=it(W.nodeName);if(FS(qO,Ne,Lt)){if(Lt!==Ea)try{mn?W.setAttributeNS(mn,fn,Lt):W.setAttribute(fn,Lt)}catch{ru(fn,W)}}else ru(fn,W)}else ru(fn,W)}ns("afterSanitizeAttributes",W,null)}},UO=function W(Xt){var Lt,Ne=MS(Xt);for(ns("beforeSanitizeShadowDOM",Xt,null);Lt=Ne.nextNode();)ns("uponSanitizeShadowNode",Lt,null),IS(Lt)||(Lt.content instanceof s&&W(Lt.content),zS(Lt));ns("afterSanitizeShadowDOM",Xt,null)};return n.sanitize=function(W,Xt){var Lt,Ne,Ge,Ln,un;if((OS=!W)&&(W="\x3c!--\x3e"),"string"!=typeof W&&!ql(W)){if("function"!=typeof W.toString)throw Rm("toString is not a function");if("string"!=typeof(W=W.toString()))throw Rm("dirty is not a string, aborting")}if(!n.isSupported){if("object"===ha(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof W)return e.toStaticHTML(W);if(ql(W))return e.toStaticHTML(W.outerHTML)}return W}if(Zt||ig(Xt),n.removed=[],"string"==typeof W&&(bn=!1),bn){if(W.nodeName){var po=it(W.nodeName);if(!M[po]||Z[po])throw Rm("root node is forbidden and cannot be sanitized in-place")}}else if(W instanceof i)1===(Ne=(Lt=LS("\x3c!----\x3e")).ownerDocument.importNode(W,!0)).nodeType&&"BODY"===Ne.nodeName||"HTML"===Ne.nodeName?Lt=Ne:Lt.appendChild(Ne);else{if(!Pe&&!Ut&&!bt&&-1===W.indexOf("<"))return R&&ar?R.createHTML(W):W;if(!(Lt=LS(W)))return Pe?null:ar?D:""}Lt&&Ve&&es(Lt.firstChild);for(var fn=MS(bn?W:Lt);Ge=fn.nextNode();)3===Ge.nodeType&&Ge===Ln||IS(Ge)||(Ge.content instanceof s&&UO(Ge.content),zS(Ge),Ln=Ge);if(Ln=null,bn)return W;if(Pe){if(sr)for(un=V.call(Lt.ownerDocument);Lt.firstChild;)un.appendChild(Lt.firstChild);else un=Lt;return Q.shadowroot&&(un=z.call(r,un,!0)),un}var mn=bt?Lt.outerHTML:Lt.innerHTML;return bt&&M["!doctype"]&&Lt.ownerDocument&&Lt.ownerDocument.doctype&&Lt.ownerDocument.doctype.name&&dr(QN,Lt.ownerDocument.doctype.name)&&(mn="<!DOCTYPE "+Lt.ownerDocument.doctype.name+">\n"+mn),Ut&&(mn=Os(mn,Ot," "),mn=Os(mn,ht," ")),R&&ar?R.createHTML(mn):mn},n.setConfig=function(W){ig(W),Zt=!0},n.clearConfig=function(){vi=null,Zt=!1},n.isValidAttribute=function(W,Xt,Lt){vi||ig({});var Ne=it(W),Ge=it(Xt);return FS(Ne,Ge,Lt)},n.addHook=function(W,Xt){"function"==typeof Xt&&($[W]=$[W]||[],wl($[W],Xt))},n.removeHook=function(W){if($[W])return FN($[W])},n.removeHooks=function(W){$[W]&&($[W]=[])},n.removeAllHooks=function(){$={}},n}();const Ry=dt.each,tA=dt.trim,eA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],nA={ftp:21,http:80,https:443,mailto:25},rA=["img","video"],Ty=(t,e,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch{return unescape(o)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!t.allow_html_data_urls&&(/^data:image\//i.test(r)?(s=n,(mt(o=t.allow_svg_data_urls)?!o:!mt(s)||!Tt(rA,s))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,s};class uo{static parseDataUri(e){let n;const r=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(e,n,r={}){if(r.allow_script_urls)return!0;{const o=ys.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Ty(r,o,n)}}static getDocumentBaseUrl(e){var n;let r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e,n={}){this.path="",this.directory="",e=tA(e),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=r?r.path:new uo(document.location.href).directory;if(""===r?.protocol)e="//mce_host"+o.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&Ry(eA,(i,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),o[i]=c}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),s&&(o.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new uo(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const r=new uo(e,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?nA[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let r,o,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(r=0,o=i.length;r<o;r++)if(r>=l.length||i[r]!==l[r]){s=r+1;break}if(i.length<l.length)for(r=0,o=l.length;r<o;r++)if(r>=i.length||i[r]!==l[r]){s=r+1;break}if(1===s)return n;for(r=0,o=i.length-(s-1);r<o;r++)a+="../";for(r=s-1,o=l.length;r<o;r++)a+=r!==s-1?"/"+l[r]:l[r];return a}toAbsPath(e,n){let r=0;const o=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];Ry(s,f=>{f&&i.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)0!==a[f].length&&"."!==a[f]&&(".."!==a[f]?r>0?r--:l.push(a[f]):r++);const c=i.length-r;let u;return u=c<=0?Xr(l).join("/"):i.slice(0,c).join("/")+"/"+Xr(l).join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const oA=dt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Pm="data-mce-type";let Oy=0;const Dy=(t,e,n,r)=>{var o,s,a,i;const l=e.validate,c=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(o=t.nodeValue)&&void 0!==o?o:"")&&(t.nodeValue=" "+t.nodeValue);const u=null!==(s=r?.tagName)&&void 0!==s?s:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===u)return;const f=O(t),p=Ma(f,Pm),b=jn(f,"data-mce-bogus");if(!p&&Dt(b))return void("all"===b?Mt(f):me(f));const g=n.getElementRule(u);if(!l||g){if(mt(r)&&(r.allowedTags[u]=!0),l&&g&&!p){if(rt(null!==(a=g.attributesForced)&&void 0!==a?a:[],v=>{Xe(f,v.name,"{$uid}"===v.value?"mce_"+Oy++:v.value)}),rt(null!==(i=g.attributesDefault)&&void 0!==i?i:[],v=>{Ma(f,v.name)||Xe(f,v.name,"{$uid}"===v.value?"mce_"+Oy++:v.value)}),g.attributesRequired&&!Ae(g.attributesRequired,v=>Ma(f,v))||g.removeEmptyAttrs&&(v=>{const h=v.dom.attributes;return null==h||0===h.length})(f))return void me(f);g.outputName&&g.outputName!==u&&Qg(f,g.outputName)}}else te(c,u)?Mt(f):me(f)},By=(t,e,n,r,o)=>!(r in oA&&Ty(t,o,n))&&(!t.validate||e.isValid(n,r)||Je(r,"data-")||Je(r,"aria-")),Py=(t,e)=>t.hasAttribute(Pm)&&("id"===e||"class"===e||"style"===e),Ly=(t,e)=>t in e.getBoolAttrs(),sA=(t,e,n)=>{const{attributes:r}=t;for(let o=r.length-1;o>=0;o--){const s=r[o],a=s.name,i=s.value;By(e,n,t.tagName.toLowerCase(),a,i)||Py(t,a)?Ly(a,n)&&t.setAttribute(a,a):t.removeAttribute(a)}},My=dt.makeMap,Iy=dt.extend,Fy=(t,e,n)=>{const r=t.name,o=r in n&&"title"!==r&&"textarea"!==r,s=e.childNodes;for(let a=0,i=s.length;a<i;a++){const l=s[a],c=new rr(l.nodeName.toLowerCase(),l.nodeType);if(xt(l)){const u=l.attributes;for(let f=0,p=u.length;f<p;f++){const b=u[f];c.attr(b.name,b.value)}}else lt(l)?(c.value=l.data,o&&(c.raw=!0)):(gs(l)||HS(l)||US(l))&&(c.value=l.data);Fy(c,l,n),t.append(c)}},oi=(t={},e=Cs())=>{const n=gy(),r=gy(),o={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((v,h)=>{if(v.sanitize){const C=((t,e)=>{const n=ZN();return n.addHook("uponSanitizeElement",(r,o)=>{Dy(r,t,e,o)}),n.addHook("uponSanitizeAttribute",(r,o)=>{const s=r.tagName.toLowerCase(),{attrName:a,attrValue:i}=o;o.keepAttr=By(t,e,s,a,i),o.keepAttr?(o.allowedAttributes[a]=!0,Ly(a,e)&&(o.attrValue=a),t.allow_svg_data_urls&&Je(i,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):Py(r,a)&&(o.forceKeepAttr=!0)}),n})(v,h);return(S,k)=>{C.sanitize(S,((N,R)=>{const D={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return D.PARSER_MEDIA_TYPE=R,N.allow_script_urls?D.ALLOWED_URI_REGEXP=/.*/:N.allow_html_data_urls&&(D.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),D})(v,k)),C.removed=[]}}return(C,S)=>{const k=document.createNodeIterator(C,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let N;for(;N=k.nextNode();)Dy(N,v,h),xt(N)&&sA(N,v,h)}})(o,e),l=n.getFilters,f=r.getFilters,b=(v,h)=>{const C=Dt(h.attr(Pm)),S=1===h.type&&!te(v,h.name)&&!ku(e,h);return 3===h.type||S&&!C},g={schema:e,addAttributeFilter:r.addFilter,getAttributeFilters:f,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(v,h={})=>{var C;const S=o.validate,k=null!==(C=h.context)&&void 0!==C?C:o.root_name,N=((I,$,pt="html")=>{const it="xhtml"===pt?"application/xhtml+xml":"text/html",Ot=te(e.getSpecialElements(),$.toLowerCase()),ht=Ot?`<${$}>${I}</${$}>`:I,Yt=s.parseFromString("xhtml"===pt?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ht}</body></html>`:`<body>${ht}</body>`,it).body;return a(Yt,it),Ot?Yt.firstChild:Yt})(v,k,h.format);Cu(e,N);const R=new rr(k,11);Fy(R,N,e.getSpecialElements()),N.innerHTML="";const[D,P]=((I,$,pt,it)=>{const Ot=pt.validate,ht=$.getNonEmptyElements(),Kt=$.getWhitespaceElements(),Yt=Iy(My("script,style,head,html,body,title,meta,param"),$.getBlockElements()),yt=Ig($),Rt=/[ \t\r\n]+/g,jt=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,j=J=>{let Z=J.parent;for(;mt(Z);){if(Z.name in Kt)return!0;Z=Z.parent}return!1},Q=J=>J.name in Yt||ku($,J),nt=(J,Z)=>!mt(Z?J.prev:J.next)&&!ye(J.parent)&&Q(J.parent)&&(J.parent!==I||!0===it.isRootContent);return[J=>{var Z,At,Ct;if(3===J.type&&!j(J)){let ft=null!==(Z=J.value)&&void 0!==Z?Z:"";ft=ft.replace(Rt," "),Ct=Q,(mt(At=J.prev)&&(Ct(At)||"br"===At.name)||nt(J,!0))&&(ft=ft.replace(jt,"")),0===ft.length?J.remove():J.value=ft}},J=>{var Z,Ct,zt;if(1===J.type){const ft=$.getElementRule(J.name);if(Ot&&ft){const At=yl($,ht,Kt,J);ft.paddInEmptyBlock&&At&&(Ct=>{let zt=Ct;for(;mt(zt);){if(zt.name in yt)return yl($,ht,Kt,zt);zt=zt.parent}return!1})(J)?sm(pt,it,Q,J):ft.removeEmpty&&At?Q(J)?J.remove():J.unwrap():ft.paddEmpty&&(At||kv(Ct=J,"#text")&&(null===(zt=Ct?.firstChild)||void 0===zt?void 0:zt.value)===ln)&&sm(pt,it,Q,J)}}else if(3===J.type&&!j(J)){let ft=null!==(Z=J.value)&&void 0!==Z?Z:"";(J.next&&Q(J.next)||nt(J,!1))&&(ft=ft.replace(M,"")),0===ft.length?J.remove():J.value=ft}}]})(R,e,o,h),U=[],V={nodes:{},attributes:{}},L=I=>xv(l(),f(),I,V);if(((I,$,pt)=>{const it=[];for(let Ot=I,ht=Ot;Ot;ht=Ot,Ot=Ot.walk()){const Kt=Ot;rt($,Yt=>Yt(Kt)),ye(Kt.parent)&&Kt!==I?Ot=ht:it.push(Kt)}for(let Ot=it.length-1;Ot>=0;Ot--){const ht=it[Ot];rt(pt,Kt=>Kt(ht))}})(R,[D,L],[P,S?I=>{return pt=U,void(Ev(e,$=I)&&pt.push($));var $,pt}:_t]),U.reverse(),S&&U.length>0)if(h.context){const{pass:I,fail:$}=Kr(U,pt=>pt.parent===R);im($,e,R,L),h.invalid=I.length>0}else im(U,e,R,L);const z=((I,$)=>{var pt;const it=null!==(pt=$.forced_root_block)&&void 0!==pt?pt:I.forced_root_block;return!1===it?"":!0===it?"p":it})(o,h);return z&&("body"===R.name||h.isRootContent)&&((I,$)=>{const pt=Iy(My("script,style,head,html,body,title,meta,param"),e.getBlockElements()),it=/^[ \t\r\n]+/,Ot=/[ \t\r\n]+$/;let ht=I.firstChild,Kt=null;const Yt=yt=>{var Rt,jt;yt&&(ht=yt.firstChild,ht&&3===ht.type&&(ht.value=null===(Rt=ht.value)||void 0===Rt?void 0:Rt.replace(it,"")),ht=yt.lastChild,ht&&3===ht.type&&(ht.value=null===(jt=ht.value)||void 0===jt?void 0:jt.replace(Ot,"")))};if(e.isValidChild(I.name,$.toLowerCase())){for(;ht;){const yt=ht.next;b(pt,ht)?(Kt||(Kt=new rr($,1),Kt.attr(o.forced_root_block_attrs),I.insert(Kt,ht)),Kt.append(ht)):(Yt(Kt),Kt=null),ht=yt}Yt(Kt)}})(R,z),h.invalid||wv(V,h),R}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&hy(e,t,n),t.addAttributeFilter("href",o=>{let s=o.length;const a=i=>{const l=i?dt.trim(i):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(u=>u.length>0).concat(["noopener"]).sort().join(" ")};if(!e.allow_unsafe_link_target)for(;s--;){const i=o[s];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",a(i.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",o=>{let s,a,i,l,c=o.length;for(;c--;)if(l=o[c],"a"===l.name&&l.firstChild&&!l.attr("href"))for(i=l.parent,s=l.lastChild;s&&i;)a=s.prev,i.insert(s,l),s=a}),e.fix_list_elements&&t.addNodeFilter("ul,ol",o=>{let s,a,i=o.length;for(;i--;)if(s=o[i],a=s.parent,a&&("ul"===a.name||"ol"===a.name))if(s.prev&&"li"===s.prev.name)s.prev.append(s);else{const l=new rr("li",1);l.attr("style","list-style-type: none"),s.wrap(l)}});const r=n.getValidClasses();e.validate&&r&&t.addAttributeFilter("class",o=>{var s;let a=o.length;for(;a--;){const i=o[a],l=null!==(s=i.attr("class"))&&void 0!==s?s:"",c=dt.explode(l," ");let u="";for(let f=0;f<c.length;f++){const p=c[f];let b=!1,g=r["*"];g&&g[p]&&(b=!0),g=r[i.name],!b&&g&&g[p]&&(b=!0),b&&(u&&(u+=" "),u+=p)}u.length||(u=null),i.attr("class",u)}}),((o,s)=>{const{blob_cache:a}=s;if(a){const i=l=>{const c=l.attr("src");var u;(u=l).attr("src")===fe.transparentSrc||mt(u.attr("data-mce-placeholder"))||(u=>mt(u.attr("data-mce-bogus")))(l)||ye(c)||xy(a,c,!0).each(u=>{l.attr("src",u.blobUri())})};o.addAttributeFilter("src",l=>rt(l,i))}})(t,e)})(g,o),(h=o).inline_styles&&((t,e,n)=>{var r;const o=Tu();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=o,i=dt.explode(null!==(r=e.font_size_legacy_values)&&void 0!==r?r:""),s.addNodeFilter("font",l=>{rt(l,c=>{const u=a.parse(c.attr("style")),f=c.attr("color"),p=c.attr("face"),b=c.attr("size");var g;f&&(u.color=f),p&&(u["font-family"]=p),b&&Hs(b).each(g=>{u["font-size"]=i[g-1]}),c.name="span",c.attr("style",a.serialize(u)),g=c,rt(["color","face","size"],h=>{g.attr(h,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const c="html4"!==a.type;rt(l,u=>{if(c)u.name="s";else{const f=i.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",i.serialize(f))}})})})(t,n,o)})(g,h,e),g;var h},jy=(t,e,n)=>{const r=td(s=t)?_s({validate:!1}).serialize(s):s,o=e(r);var s;if(o.isDefaultPrevented())return o;if(td(t)){if(o.content!==r){const s=oi({validate:!1,forced_root_block:!1,sanitize:n}).parse(o.content,{context:t.name});return{...o,content:s}}return{...o,content:t}}return o},zy=(t,e)=>{if(e.no_events)return tr.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?tr.error($0(t,{content:"",...n}).content):tr.value(n)}},Hy=(t,e,n)=>n.no_events?e:jy(e,o=>$0(t,{...n,content:o}),Yu(t)).content,Lm=(t,e)=>{if(e.no_events)return tr.value(e);{const n=jy(e.content,r=>{return o=t,s={...e,content:r},o.dispatch("BeforeSetContent",s);var o,s},Yu(t));return n.isDefaultPrevented()?(q0(t,n),tr.error(void 0)):tr.value(n)}},Mm=(t,e,n)=>{n.no_events||q0(t,{...n,content:e})},Im=(t,e,n)=>({element:t,width:e,rows:n}),Uy=(t,e)=>({element:t,cells:e}),iA=(t,e)=>({x:t,y:e}),qy=(t,e)=>Jr(t,e).bind(Hs).getOr(1),lA=(t,e,n)=>{const r=t.rows;return!!(r[n]?r[n].cells:[])[e]},$y=t=>vn(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),Wy=(t,e)=>{const n=t.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let s=0;s<o.length;s++)if(de(o[s],e))return E.some(iA(s,r))}return E.none()},Vy=(t,e,n,r,o)=>{const s=[],a=t.rows;for(let i=n;i<=o;i++){const l=a[i].cells,c=e<r?l.slice(e,r+1):l.slice(r,e+1);s.push(Uy(a[i].element,c))}return s},cA=t=>((e,n)=>{const r=ta(e.element),o=X("tbody");return ge(o,n),Nt(r,o),r})(t,re(t.rows,n=>{const r=re(n.cells,s=>{const a=Yg(s);return on(a,"colspan"),on(a,"rowspan"),a}),o=ta(n.element);return ge(o,r),o})),Ky=()=>Sf([]),ld=(t,e)=>e>=0&&e<t.length&&Qa(t.charAt(e)),Xy=t=>Go(t.innerText),Gy=t=>xt(t)?t.outerHTML:lt(t)?ys.encodeRaw(t.data,!1):gs(t)?"\x3c!--"+t.data+"--\x3e":"",pA=$o(()=>document.implementation.createHTMLDocument("undo")),cd=t=>{const e=(n=t.getBody(),$t(re(Ye(n.childNodes),Gy),s=>s.length>0));var n;const r=rn(e,s=>{const a=Nb(t.serializer,s);return a.length>0?[a]:[]}),o=r.join("");return-1!==o.indexOf("</iframe>")?{type:"fragmented",fragments:r,content:"",bookmark:null,beforeBookmark:null}:(s=>({type:"complete",fragments:null,content:s,bookmark:null,beforeBookmark:null}))(o)},Fm=(t,e,n)=>{const r=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,r)=>{let o=0;rt(n,s=>{var a,i;0===s[0]?o++:1===s[0]?(((a,i,l)=>{const c=(u=>{let f;const p=document.createElement("div"),b=document.createDocumentFragment();for(u&&(p.innerHTML=u);f=p.firstChild;)b.appendChild(f);return b})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(c,a.childNodes[l]):a.appendChild(c)})(r,s[1],o),o++):2===s[0]&&(i=o,(a=r).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,r)=>{const o=n.length+r.length+2,s=new Array(o),a=new Array(o),i=(f,p,b,g,v)=>{const h=c(f,p,b,g);if(null===h||h.start===p&&h.diag===p-g||h.end===f&&h.diag===f-b){let C=f,S=b;for(;C<p||S<g;)C<p&&S<g&&n[C]===r[S]?(v.push([0,n[C]]),++C,++S):p-f>g-b?(v.push([2,n[C]]),++C):(v.push([1,r[S]]),++S)}else{i(f,h.start,b,h.start-h.diag,v);for(let C=h.start;C<h.end;++C)v.push([0,n[C]]);i(h.end,p,h.end-h.diag,g,v)}},l=(f,p,b,g)=>{let v=f;for(;v-p<g&&v<b&&n[v]===r[v-p];)++v;return{start:f,end:v,diag:p}},c=(f,p,b,g)=>{const v=p-f,h=g-b;if(0===v||0===h)return null;const C=v-h,S=h+v,k=(S%2==0?S:S+1)/2;let N,R,D,P,U;for(s[1+k]=f,a[1+k]=p+1,N=0;N<=k;++N){for(R=-N;R<=N;R+=2){for(D=R+k,s[D]=R===-N||R!==N&&s[D-1]<s[D+1]?s[D+1]:s[D-1]+1,P=s[D],U=P-f+b-R;P<p&&U<g&&n[P]===r[U];)s[D]=++P,++U;if(C%2!=0&&C-N<=R&&R<=C+N&&a[D-C]<=s[D])return l(a[D-C],R+f-b,p,g)}for(R=C-N;R<=C+N;R+=2){for(D=R+k-C,a[D]=R===C-N||R!==C+N&&a[D+1]<=a[D-1]?a[D+1]-1:a[D-1],P=a[D]-1,U=P-f+b-R;P>=f&&U>=b&&n[P]===r[U];)a[D]=P--,U--;if(C%2==0&&-N<=R&&R<=N&&a[D]<=s[D+C])return l(a[D],R+f-b,p,g)}}return null},u=[];return i(0,n.length,0,r.length,u),u})(re(Ye(e.childNodes),Gy),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!mt(r)||!f0(r)||!r.isFakeCaret}),r&&(t.selection.moveToBookmark(r),t.selection.scrollIntoView())},jm=t=>"fragmented"===t.type?t.fragments.join(""):t.content,Yy=t=>{const e=X("body",pA());return an(e,jm(t)),rt(Dn(e,"*[data-mce-bogus]"),me),tn(e)},zm=(t,e)=>{return!(!t||!e)&&(r=e,!(jm(t)!==jm(r))||((n,r)=>Yy(n)===Yy(r))(t,e));var r},Hm=t=>0===t.get(),dd=(t,e,n)=>{Hm(n)&&(t.typing=e)},Qy=(t,e)=>{t.typing&&(dd(t,!1,e),t.add())},Jy=t=>({init:{bindEvents:_t},undoManager:{beforeChange:(e,n)=>{return r=t,s=n,void(Hm(e)&&s.set($u(r.selection)));var r,s},add:(e,n,r,o,s,a)=>((i,l,c,u,f,p,b)=>{const g=cd(i),v=dt.extend(p||{},g);if(!Hm(u)||i.removed)return null;const h=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:v,lastLevel:h,originalEvent:b}).isDefaultPrevented()||h&&zm(h,v))return null;l.data[c.get()]&&f.get().each(k=>{l.data[c.get()].beforeBookmark=k});const C=yE(i);if(C&&l.data.length>C){for(let k=0;k<l.data.length-1;k++)l.data[k]=l.data[k+1];l.data.length--,c.set(l.data.length)}v.bookmark=$u(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(v),c.set(l.data.length-1);const S={level:v,lastLevel:h,originalEvent:b};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",S),i.dispatch("change",S)):i.dispatch("AddUndo",S),v})(t,e,n,r,o,s,a),undo:(e,n,r)=>((o,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,dd(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],Fm(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(t,e,n,r),redo:(e,n)=>((r,o,s)=>{let a;return o.get()<s.length-1&&(o.set(o.get()+1),a=s[o.get()],Fm(r,a,!1),r.setDirty(!0),r.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return r=t,s=n,(o=e).data=[],s.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return r=t,o=e,n.get()>0||o.typing&&o.data[0]&&!zm(cd(r),o.data[0]);var r,o},hasRedo:(e,n)=>{return r=e,n.get()<r.data.length-1&&!r.typing;var r},transact:(e,n,r)=>{return a=r,Qy(o=e,n),o.beforeChange(),o.ignore(a),o.add();var o,a},ignore:(e,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(e,n),extra:(e,n,r,o)=>((s,a,i,l,c)=>{if(a.transact(l)){const u=a.data[i.get()].bookmark,f=a.data[i.get()-1];Fm(s,f,!0),a.transact(c)&&(a.data[i.get()-1].beforeBookmark=u)}})(t,e,n,r,o)},formatter:{match:(e,n,r,o)=>gm(t,e,n,r,o),matchAll:(e,n)=>((r,o,s)=>{const a=[],i={},l=r.selection.getStart();return r.dom.getParent(l,c=>{for(let u=0;u<o.length;u++){const f=o[u];!i[f]&&To(r,c,f,s)&&(i[f]=!0,a.push(f))}},r.dom.getRoot()),a})(t,e,n),matchNode:(e,n,r,o)=>To(t,e,n,r,o),canApply:e=>((n,r)=>{const o=n.formatter.get(r),s=n.dom;if(o&&n.selection.isEditable()){const a=n.selection.getStart(),i=jc(s,a);for(let l=o.length-1;l>=0;l--){const c=o[l];if(!Rr(c))return!0;for(let u=i.length-1;u>=0;u--)if(s.is(i[u],c.selector))return!0}}return!1})(t,e),closest:e=>((n,r)=>{const o=s=>de(s,O(n.getBody()));return E.from(n.selection.getStart(!0)).bind(s=>fm(O(s),a=>Kn(r,i=>{return To(n,a.dom,c=i)?E.some(c):E.none();var c}),o)).getOrNull()})(t,e),apply:(e,n,r)=>ly(t,e,n,r),remove:(e,n,r,o)=>sy(t,e,n,r,o),toggle:(e,n,r)=>((o,s,a,i)=>{const l=o.formatter.get(s);l&&(!gm(o,s,a,i)||"toggle"in l[0]&&!l[0].toggle?ly(o,s,a,i):sy(o,s,a,i))})(t,e,n,r),formatChanged:(e,n,r,o,s)=>{return((p,b,g,v,h,C)=>{const S=b.get();rt(g.split(","),k=>{const N=ke(S,k).getOrThunk(()=>{const D={withSimilar:{state:cn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:cn(!1),similar:!1,callbacks:[]},withVars:[]};return S[k]=D,D}),R=()=>{const D=fy(p);return uy(p,D,k,h,C).isSome()};if(De(C)){const D=h?N.withSimilar:N.withoutSimilar;D.callbacks.push(v),1===D.callbacks.length&&D.state.set(R())}else N.withVars.push({state:cn(R()),similar:h,vars:C,callback:v})}),b.set(S)})(t,i=e,l=n,c=r,o,s),{unbind:()=>((p,b,g)=>{const v=p.get();rt(b.split(","),h=>ke(v,h).each(C=>{v[h]={withSimilar:{...C.withSimilar,callbacks:$t(C.withSimilar.callbacks,S=>S!==g)},withoutSimilar:{...C.withoutSimilar,callbacks:$t(C.withoutSimilar.callbacks,S=>S!==g)},withVars:$t(C.withVars,S=>S.callback!==g)}})),p.set(v)})(i,l,c)};var i,l,c}},editor:{getContent:e=>{return r=e,E.from((n=t).getBody()).fold(gt("tree"===r.format?new rr("body",11):""),o=>((t,e,n)=>{let r;return r="raw"===e.format?dt.trim(X_(t.serializer,n.innerHTML)):"text"===e.format?((o,s)=>{const a=o.getDoc(),i=Te(O(o.getBody())),l=X("div",a);Xe(l,"data-mce-bogus","all"),ps(l,{position:"fixed",left:"-9999999px",top:"0"}),an(l,s.innerHTML),Ab(l),Rb(l);const c=Hr(f=i)?f:O(zn(f).dom.body);var f;Nt(c,l);const u=Go(l.dom.innerText);return Mt(l),u})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((o,s)=>{const a=er(o),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!uc(O(n))&&Dt(r)?dt.trim(r):r})(n,r,o));var n,r},setContent:(e,n)=>{return o=e,s=n,E.from((r=t).getBody()).map(a=>td(o)?((i,l,c,u)=>{Sv(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const f=_s({validate:!1},i.schema).serialize(c),p=uc(O(l))?f:dt.trim(f);return um(i,p,u.no_selection),{content:c,html:p}})(r,a,o,s):((i,l,c,u)=>{if(0===c.length||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const p=er(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),p.toLowerCase())?(c=f,c=i.dom.createHTML(p,Zi(i),c)):c||(c=f),um(i,c,u.no_selection),{content:c,html:c}}{"raw"!==u.format&&(c=_s({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const f=uc(O(l))?c:dt.trim(c);return um(i,f,u.no_selection),{content:f,html:f}}})(r,a,o,s)).getOr({content:o,html:td(s.content)?"":s.content});var r,o,s},insertContent:(e,n)=>SN(t,e,n),addVisual:e=>((n,r)=>{const o=n.dom,s=mt(r)?r:n.getBody();rt(o.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=EE(n),l=o.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?o.removeClass(a,i):o.addClass(a,i);break;case"A":if(!o.getAttrib(a,"href")){const c=o.getAttrib(a,"name")||a.id,u=Hh(n);c&&n.hasVisual?o.addClass(a,u):o.removeClass(a,u)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((r,o,s={})=>{const a=(i=s,l=o,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return zy(r,a).fold(ue,i=>{const l=((c,u)=>{if("text"===u.format)return E.from((f=c).selection.getRng()).map(p=>{var b;const g=E.from(f.dom.getParent(p.commonAncestorContainer,f.dom.isBlock)),v=f.getBody(),h=g.map(D=>D.nodeName).getOr("div").toLowerCase(),C=O(p.cloneContents());Ab(C),Rb(C);const S=f.dom.add(v,h,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},C.dom),k=Xy(S),N=Go(null!==(b=S.textContent)&&void 0!==b?b:"");if(f.dom.remove(S),ld(N,0)||ld(N,N.length-1)){const R=g.getOr(v),D=Xy(R),P=D.indexOf(k);return-1===P?k:(ld(D,P-1)?" ":"")+k+(ld(D,P+k.length)?" ":"")}return k}).getOr("");var f;{const f=((p,b)=>{const g=p.selection.getRng(),v=p.dom.create("body"),h=p.selection.getSel(),C=Mf(p,lf(h)),S=b.contextual?((t,e)=>{const n=C0(e,t);return n.length>0?((t,e)=>{return(n=t,r=e[0],ms(r,"table",kt(de,n))).bind(n=>{const r=e[0],o=e[e.length-1],s=(a=>{const i=Im(ta(a),0,[]);return rt(Dn(a,"tr"),(l,c)=>{rt(Dn(l,"td,th"),(u,f)=>{((p,b,g,v,h)=>{const C=qy(h,"rowspan"),S=qy(h,"colspan"),k=p.rows;for(let N=g;N<g+C;N++){k[N]||(k[N]=Uy(Yg(v),[]));for(let R=b;R<b+S;R++)k[N].cells[R]=N===g&&R===b?h:ta(h)}})(i,((p,b,g)=>{for(;lA(p,b,g);)b++;return b})(i,f,c),c,l,u)})}),Im(i.element,$y(i.rows),i.rows)})(n);return(a=s,i=r,l=o,Wy(a,i).bind(c=>Wy(a,l).map(u=>((f,p,b)=>{const g=p.x,v=p.y,h=b.x,C=b.y,S=v<C?Vy(f,g,v,h,C):Vy(f,g,C,h,v);return Im(f.element,$y(S),S)})(a,c,u)))).map(a=>Sf([cA(a)]));var a,i,l}).getOrThunk(Ky);var n,r})(t,n):(r=t,(o=e).length>0&&o[0].collapsed?Ky():(s=r,((i,l)=>{const c=vn(l,(u,f)=>(Nt(f,u),f),i);return l.length>0?Sf([c]):c})(O((a=o[0]).cloneContents()),((t,e)=>{const n=O(e.commonAncestorContainer),r=Jo(n,t),o=$t(r,GS),s=(l=e,qe(i=r,c=>"li"===Ee(c)&&df(c,l)).fold(gt([]),c=>{return(u=i,qe(u,f=>"ul"===Ee(f)||"ol"===Ee(f))).map(u=>{const f=X(Ee(u)),p=xr(et(u),(b,g)=>Je(g,"list-style"));return ps(f,p),[X("li"),f]}).getOr([]);var u})),a=o.concat(s.length?s:(i=>ji(i)?xe(i).filter(pu).fold(gt([]),l=>[i,l]):pu(i)?[i]:[])(n));var i,l;return re(a,ta)})(s,a))));var r,o,s,a})(O(p.getBody()),C).dom:g.cloneContents();return S&&v.appendChild(S),p.selection.serializer.serialize(v,b)})(c,u);return"tree"===u.format?f:c.selection.isCollapsed()?"":f}})(r,i);return Hy(r,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(kb(O(t.getBody())).isNone()){const r=st('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());Nt(r,O(e.extractContents())),e.insertNode(r.dom),xe(r).each(o=>o.dom.normalize()),(n=r,((o,s)=>{const a=i=>{const l=Me(i);for(let c=l.length-1;c>=0;c--){const u=l[c];if(s(u))return E.some(u);const f=a(u);if(f.isSome())return f}return E.none()};return a(o)})(n,wb)).map(o=>{var s;t.selection.setCursorLocation(o.dom,"img"===Ee(s=o)?1:pg(s).fold(()=>Me(s).length,a=>a.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=O(t.getBody()),kb(n).each(r=>{const o=e.selection.getBookmark();me(r),e.selection.moveToBookmark(o)});var e,n}},raw:{getModel:()=>E.none()}}),Do=t=>te(t.plugins,"rtc"),Um=t=>t.rtcInstance?t.rtcInstance:Jy(t),Ue=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},Zy=t=>Ue(t).init.bindEvents(),t1=t=>0===t.dom.length?(Mt(t),E.none()):E.some(t),e1=(t,e,n,r)=>{t.bind(o=>((r?Vf:Yc)(o.dom,r?o.dom.length:0),e.filter(Yn).map(s=>((a,i,l,c)=>{const u=a.dom,f=i.dom,p=c?u.length:f.length;c?(Kf(u,f,!1,!c),l.setStart(f,p)):(Kf(f,u,!1,!c),l.setEnd(f,p))})(o,s,n,r)))).orThunk(()=>{return(s=e,a=r,s.filter(i=>ul.isBookmarkNode(i.dom)).bind(a?Zr:Rn)).or(e).filter(Yn).map(s=>((a,i)=>{xe(a).each(l=>{const c=a.dom;i&&hl(l,G(c,0))?Yc(c,0):!i&&bl(l,G(c,c.length))&&Vf(c,c.length)})})(s,r));var s,a})},n1=(t,e,n)=>{if(te(t,e)){const r=$t(t[e],o=>o!==n);0===r.length?delete t[e]:t[e]=r}},r1=t=>!(!t||!t.ownerDocument)&&gn(O(t.ownerDocument),O(t)),o1=(t,e,n,r)=>{let o,s;const{selectorChangedWithUnbind:a}=((h,C)=>{let S,k;const N=(D,P)=>qe(P,U=>h.is(U,D)),R=D=>h.getParents(D,void 0,h.getRoot());return{selectorChangedWithUnbind:(D,P)=>(S||(S={},k={},C.on("NodeChange",U=>{const Y=U.element,V=R(Y),L={};Se(S,(z,I)=>{N(I,V).each($=>{k[I]||(rt(z,pt=>{pt(!0,{node:$,selector:I,parents:V})}),k[I]=z),L[I]=z})}),Se(k,(z,I)=>{L[I]||(delete k[I],rt(z,$=>{$(!1,{node:Y,selector:I,parents:V})}))})})),S[D]||(S[D]=[]),S[D].push(P),N(D,R(C.selection.getStart())).each(()=>{k[D]=S[D]}),{unbind:()=>{n1(S,D,P),n1(k,D,P)}})}})(t,r),i=(h,C)=>((S,k,N={})=>{const R=(D=N,P=k,{format:"html",...D,set:!0,selection:!0,content:P});var D,P;Lm(S,R).each(D=>{const P=((Y,V)=>{if("raw"!==V.format){const L=Y.selection.getRng(),z=Y.dom.getParent(L.commonAncestorContainer,Y.dom.isBlock),I=z?{context:z.nodeName.toLowerCase()}:{},$=Y.parser.parse(V.content,{forced_root_block:!1,...I,...V});return _s({validate:!1},Y.schema).serialize($)}return V.content})(S,D),U=S.selection.getRng();((Y,V)=>{const L=E.from(V.firstChild).map(O),z=E.from(V.lastChild).map(O);Y.deleteContents(),Y.insertNode(V);const I=L.bind(Rn).filter(Yn).bind(t1),$=z.bind(Zr).filter(Yn).bind(t1);e1(I,L,Y,!0),e1($,z,Y,!1),Y.collapse(!1)})(U,U.createContextualFragment(P)),S.selection.setRng(U),ml(S,U),Mm(S,P,D)})})(r,h,C),l=h=>{const C=u();C.collapse(!!h),f(C)},c=()=>e.getSelection?e.getSelection():e.document.selection,u=()=>{let h;const C=(k,N,R)=>{try{return N.compareBoundaryPoints(k,R)}catch{return-1}},S=e.document;if(mt(r.bookmark)&&!ua(r)){const k=Tf(r);if(k.isSome())return k.map(N=>Mf(r,[N])[0]).getOr(S.createRange())}try{const k=c();k&&!ac(k.anchorNode)&&(h=k.rangeCount>0?k.getRangeAt(0):S.createRange(),h=Mf(r,[h])[0])}catch{}if(h||(h=S.createRange()),Fi(h.startContainer)&&h.collapsed){const k=t.getRoot();h.setStart(k,0),h.setEnd(k,0)}return o&&s&&(0===C(h.START_TO_START,h,o)&&0===C(h.END_TO_END,h,o)?h=s:(o=null,s=null)),h},f=(h,C)=>{if(!((k=h)&&r1(k.startContainer)&&r1(k.endContainer)))return;var k;const S=c();if(h=r.dispatch("SetSelectionRange",{range:h,forward:C}).range,S){s=h;try{S.removeAllRanges(),S.addRange(h)}catch{}!1===C&&S.extend&&(S.collapse(h.endContainer,h.endOffset),S.extend(h.startContainer,h.startOffset)),o=S.rangeCount>0?S.getRangeAt(0):null}if(!h.collapsed&&h.startContainer===h.endContainer&&S?.setBaseAndExtent&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()){const k=h.startContainer.childNodes[h.startOffset];k&&"IMG"===k.nodeName&&(S.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),S.anchorNode===h.startContainer&&S.focusNode===h.endContainer||S.setBaseAndExtent(k,0,k,1))}r.dispatch("AfterSetSelectionRange",{range:h,forward:C})},p=()=>{const h=c(),C=h?.anchorNode,S=h?.focusNode;if(!h||!C||!S||ac(C)||ac(S))return!0;const k=t.createRng(),N=t.createRng();try{k.setStart(C,h.anchorOffset),k.collapse(!0),N.setStart(S,h.focusOffset),N.collapse(!0)}catch{return!0}return k.compareBoundaryPoints(k.START_TO_START,N)<=0},b={dom:t,win:e,serializer:n,editor:r,expand:(h={type:"word"})=>f(da(t).expand(u(),h)),collapse:l,setCursorLocation:(h,C)=>{const S=t.createRng();mt(h)&&mt(C)?(S.setStart(h,C),S.setEnd(h,C),f(S),l(!1)):(uf(t,S,r.getBody(),!0),f(S))},getContent:h=>((C,S={})=>{return N=S.format?S.format:"html",R=S,Ue(C).selection.getContent(N,R);var N,R})(r,h),setContent:i,getBookmark:(h,C)=>g.getBookmark(h,C),moveToBookmark:h=>g.moveToBookmark(h),select:(h,C)=>{return(S=t,k=h,N=C,E.from(k).bind(R=>E.from(R.parentNode).map(D=>{const P=S.nodeIndex(R),U=S.createRng();return U.setStart(D,P),U.setEnd(D,P+1),N&&(uf(S,U,R,!0),uf(S,U,R,!1)),U}))).each(f),h;var S,k,N},isCollapsed:()=>{const h=u(),C=c();return!(!h||h.item)&&(h.compareEndPoints?0===h.compareEndPoints("StartToEnd",h):!C||h.collapsed)},isEditable:()=>{const h=u(),C=r.getBody().querySelectorAll('[data-mce-selected="1"]');return C.length>0?mr(C,S=>t.isEditable(S.parentElement)):h.startContainer===h.endContainer?t.isEditable(h.startContainer):t.isEditable(h.startContainer)&&t.isEditable(h.endContainer)},isForward:p,setNode:h=>(i(t.getOuterHTML(h)),h),getNode:()=>((h,C)=>{if(!C)return h;let S=C.startContainer,k=C.endContainer;const N=C.startOffset,R=C.endOffset;let D=C.commonAncestorContainer;C.collapsed||(S===k&&R-N<2&&S.hasChildNodes()&&(D=S.childNodes[N]),lt(S)&&lt(k)&&(S=S.length===N?xb(S.nextSibling,!0):S.parentNode,k=0===R?xb(k.previousSibling,!1):k.parentNode,S&&S===k&&(D=S)));const P=lt(D)?D.parentNode:D;return xt(P)?P:h})(r.getBody(),u()),getSel:c,setRng:f,getRng:u,getStart:h=>yb(r.getBody(),u(),h),getEnd:h=>Cb(r.getBody(),u(),h),getSelectedBlocks:(h,C)=>((S,k,N,R)=>{const D=[],P=S.getRoot(),U=S.getParent(N||yb(P,k,k.collapsed),S.isBlock),Y=S.getParent(R||Cb(P,k,k.collapsed),S.isBlock);if(U&&U!==P&&D.push(U),U&&Y&&U!==Y){let V;const L=new en(U,P);for(;(V=L.next())&&V!==Y;)S.isBlock(V)&&D.push(V)}return Y&&U!==Y&&Y!==P&&D.push(Y),D})(t,u(),h,C),normalize:()=>{const h=u(),C=c();if(!(lf(C).length>1)&&Ic(r)){const S=$c(t,h);return S.each(k=>{f(k,p())}),S.getOr(h)}return h},selectorChanged:(h,C)=>(a(h,C),b),selectorChangedWithUnbind:a,getScrollContainer:()=>{let h,C=t.getRoot();for(;C&&"BODY"!==C.nodeName;){if(C.scrollHeight>C.clientHeight){h=C;break}C=C.parentNode}return h},scrollIntoView:(h,C)=>{var S;mt(h)?((S=r).inline?L_:I_)(S,h,C):ml(r,u(),C)},placeCaretAt:(h,C)=>f(J0(h,C,r.getDoc())),getBoundingClientRect:()=>{const h=u();return h.collapsed?G.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:()=>{e=o=s=null,v.destroy()}},g=ul(b),v=K0(b,r);return b.bookmarkManager=g,b.controlSelection=v,b},gA=(t,e,n)=>{-1===dt.inArray(e,n)&&(t.addAttributeFilter(n,(r,o)=>{let s=r.length;for(;s--;)r[s].attr(o,null)}),e.push(n))},s1=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},o=e&&e.dom?e.dom:we.DOM,s=e&&e.schema?e.schema:Cs(r),a=oi(r,s);return l=r,c=o,(i=a).addAttributeFilter("data-mce-tabindex",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];b.attr("tabindex",b.attr("data-mce-tabindex")),b.attr(f,null)}}),i.addAttributeFilter("src,href,style",(u,f)=>{const p="data-mce-"+f,b=l.url_converter,g=l.url_converter_scope;let v=u.length;for(;v--;){const h=u[v];let C=h.attr(p);void 0!==C?(h.attr(f,C.length>0?C:null),h.attr(p,null)):(C=h.attr(f),"style"===f?C=c.serializeStyle(c.parseStyle(C),h.name):b&&(C=b.call(g,C,f,h.name)),h.attr(f,C.length>0?C:null))}}),i.addAttributeFilter("class",u=>{let f=u.length;for(;f--;){const p=u[f];let b=p.attr("class");b&&(b=b.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),p.attr("class",b.length>0?b:null))}}),i.addAttributeFilter("data-mce-type",(u,f,p)=>{let b=u.length;for(;b--;){const g=u[b];"bookmark"===g.attr("data-mce-type")&&!p.cleanup&&(E.from(g.firstChild).exists(h=>{var C;return!mc(null!==(C=h.value)&&void 0!==C?C:"")})?g.unwrap():g.remove())}}),i.addNodeFilter("noscript",u=>{var f;let p=u.length;for(;p--;){const b=u[p].firstChild;b&&(b.value=ys.decode(null!==(f=b.value)&&void 0!==f?f:""))}}),i.addNodeFilter("script,style",(u,f)=>{var p;const b=v=>v.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=u.length;for(;g--;){const v=u[g],h=v.firstChild,C=null!==(p=h?.value)&&void 0!==p?p:"";if("script"===f){const S=v.attr("type");S&&v.attr("type","mce-no/type"===S?null:S.replace(/^mce\-/,"")),"xhtml"===l.element_format&&h&&C.length>0&&(h.value="// <![CDATA[\n"+b(C)+"\n// ]]>")}else"xhtml"===l.element_format&&h&&C.length>0&&(h.value="\x3c!--\n"+b(C)+"\n--\x3e")}}),i.addNodeFilter("#comment",u=>{let f=u.length;for(;f--;){const p=u[f],b=p.value;l.preserve_cdata&&0===b?.indexOf("[CDATA[")?(p.name="#cdata",p.type=4,p.value=c.decode(b.replace(/^\[CDATA\[|\]\]$/g,""))):0===b?.indexOf("mce:protected ")&&(p.name="#text",p.type=3,p.raw=!0,p.value=unescape(b).substr(14))}}),i.addNodeFilter("xml:namespace,input",(u,f)=>{let p=u.length;for(;p--;){const b=u[p];7===b.type?b.remove():1===b.type&&("input"!==f||b.attr("type")||b.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",u=>{rt(u,f=>{"format-caret"===f.attr("data-mce-type")&&(f.isEmpty(i.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(u,f)=>{let p=u.length;for(;p--;)u[p].attr(f,null)}),l.remove_trailing_brs&&hy(l,i,i.schema),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},u=(g=i,C=v=c,mt(h=b=e)&&h.hasEventListeners("PreProcess")&&!C.no_events?((h,C,S)=>{let k;const N=h.dom;let R=C.cloneNode(!0);const D=document.implementation;if(D.createHTMLDocument){const P=D.createHTMLDocument("");dt.each("BODY"===R.nodeName?R.childNodes:[R],U=>{P.body.appendChild(P.importNode(U,!0))}),R="BODY"!==R.nodeName?P.body.firstChild:P.body,k=N.doc,N.doc=P}return U={...S,node:R},h.dispatch("PreProcess",U),k&&(N.doc=k),R;var U})(b,g,v):g),f=((b,g,v)=>{const h=Go(v.getInner?g.innerHTML:b.getOuterHTML(g));return v.selection||uc(O(g))?h:dt.trim(h)})(o,u,c),p=((b,g,v)=>{const h=v.selection?{forced_root_block:!1,...v}:v,C=b.parse(g,h);return(S=>{const k=R=>"br"===R?.name,N=S.lastChild;if(k(N)){const R=N.prev;k(R)&&(N.remove(),R.remove())}})(C),C})(a,f,c);var b,g,v,h,C;return"tree"===c.format?p:((b,g,v,h,C)=>{var R;return((k,N,R)=>{return!N.no_events&&k?(P=k,U={...N,content:R},P.dispatch("PostProcess",U)).content:R;var P,U})(b,C,(R=h,_s(g,v).serialize(R)))})(e,r,s,p,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:kt(gA,a,n),getTempAttrs:gt(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var i,l,c})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},qm=(t,e,n={})=>{const r=(o=n,s=e,{format:"html",...o,set:!0,content:s});var o,s;return Lm(t,r).map(o=>{const s=(i=o.content,l=o,Um(t).editor.setContent(i,l));var i,l;return Mm(t,s.html,o),s.content}).getOr(e)},bA="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),vA="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),yA="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),a1=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],i1=(t,e)=>{const n=$t(e,r=>te(t,r));return zo(n)},l1=(t,e)=>{const n=dt.makeMap(t.plugins," "),r=$t(e,o=>te(n,o));return zo(r)},kA=t=>qe(a1,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),ud=we.DOM,fd=t=>E.from(t).each(e=>e.destroy()),md=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>te(t,e)}})(),si=Hn.ModelManager,c1=(t,e)=>e.dom[t],d1=(t,e)=>parseInt(kr(e,t),10),EA=kt(c1,"clientWidth"),_A=kt(c1,"clientHeight"),NA=kt(d1,"margin-top"),AA=kt(d1,"margin-left"),u1=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},r=()=>E.from(e[0]),o=()=>{rt(e,l=>{l.reposition()})},s=l=>{Is(e,c=>c===l).each(c=>{e.splice(c,1)})},a=(l,c=!0)=>{return t.removed||!(f=(u=t).inline?u.getBody():u.getContentAreaContainer(),E.from(f).map(O)).map(eo).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),qe(e,u=>{return!((f=n().getArgs(u)).type!==(p=l).type||f.text!==p.text||f.progressBar||f.timeout||p.progressBar||p.timeout);var f,p}).getOrThunk(()=>{t.editorManager.setActive(t);const u=n().open(l,()=>{s(u),o(),r().fold(()=>t.focus(),f=>ub(O(f.getEl())))});return(f=>{e.push(f)})(u),o(),t.dispatch("OpenNotification",{notification:{...u}}),u}));var u,f},i=gt(e);return(l=t).on("SkinLoaded",()=>{const c=iE(l);c&&a({text:c,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{rt(e.slice(),c=>{n().close(c)})}),{open:a,close:()=>{r().each(l=>{n().close(l),s(l),o()})},getNotifications:i};var l},ai=Hn.PluginManager,va=Hn.ThemeManager,f1=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},r=(a,i)=>(...l)=>i?i.apply(a,l):void 0,o=a=>{t.dispatch("CloseWindow",{dialog:a}),e=$t(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),Rf(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{rt(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,o)),openUrl:a=>s(()=>n().openUrl(a,o)),alert:(a,i,l)=>{const c=n();c.alert(a,r(l||c,i))},confirm:(a,i,l)=>{const c=n();c.confirm(a,r(l||c,i))},close:()=>{E.from(e[e.length-1]).each(a=>{n().close(a),o(a)})}}},m1=(t,e)=>{t.notificationManager.open({type:"error",text:e})},pd=(t,e)=>{t._skinLoaded?m1(t,e):t.on("SkinLoaded",()=>{m1(t,e)})},Sl=(t,e,n)=>{z0(t,e,{message:n}),console.error(n)},kl=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,gd=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},p1=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",r=`content${t.editorManager.suffix}.css`;return re(e,o=>/^[a-z0-9\-]+$/i.test(o)&&!t.inline?`${n}/${o}/${r}`:t.documentBaseURI.toAbsolute(o))},g1=()=>{let t={};const e=(r,o)=>({status:r,resultUri:o}),n=r=>r in t;return{hasBlobUri:n,getResultUri:r=>{const o=t[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===t[r].status,isUploaded:r=>!!n(r)&&2===t[r].status,markPending:r=>{t[r]=e(1,null)},markUploaded:(r,o)=>{t[r]=e(2,o)},removeFailed:r=>{delete t[r]},destroy:()=>{t={}}}};let TA=0;const h1=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),b1=(t,e)=>((t,e)=>{const n={},r=(l,c)=>new Promise((u,f)=>{const p=new XMLHttpRequest;p.open("POST",e.url),p.withCredentials=e.credentials,p.upload.onprogress=g=>{c(g.loaded/g.total*100)},p.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+p.status)},p.onload=()=>{if(p.status<200||p.status>=300)return void f("HTTP Error: "+p.status);const g=JSON.parse(p.responseText);var v,h;g&&Dt(g.location)?u((h=g.location,(v=e.basePath)?v.replace(/\/$/,"")+"/"+h.replace(/^\//,""):h)):f("Invalid JSON: "+p.responseText)};const b=new FormData;b.append("file",l.blob(),l.filename()),p.send(b)}),o=pe(e.handler)?e.handler:r,s=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{dt.each(n[l],u=>{u(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||o!==r?(f=c,u=dt.grep(u=l,p=>!t.isUploaded(p.blobUri())),Promise.all(dt.map(u,p=>{return t.isPending(p.blobUri())?(b=>{const g=b.blobUri();return new Promise(v=>{n[g]=n[g]||[],n[g].push(v)})})(p):(g=o,v=f,t.markPending((b=p).blobUri()),new Promise(h=>{let C,S;try{const k=()=>{C&&(C.close(),S=_t)},N=D=>{k(),t.markUploaded(b.blobUri(),D),i(b.blobUri(),s(b,D)),h(s(b,D))},R=D=>{k(),t.removeFailed(b.blobUri()),i(b.blobUri(),a(b,D)),h(a(b,D))};S=D=>{D<0||D>100||E.from(C).orThunk(()=>E.from(v).map(ho)).each(P=>{C=P,P.progressBar.value(D)})},g(b,S).then(N,D=>{R(Dt(D)?{message:D}:D)})}catch(k){h(a(b,k))}}));var b,g,v}))):new Promise(u=>{u([])});var u,f}}})(e,{url:Xk(t),basePath:Gk(t),credentials:Yk(t),handler:Qk(t)}),v1={remove_similar:!0,inherit:!1},ii={selector:"td,th",...v1},BA={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ii},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ii},tablecellbordercolor:{styles:{borderColor:"%value"},...ii},tablecellclass:{classes:["%value"],...ii},tableclass:{selector:"table",classes:["%value"],...v1},tablecellborderstyle:{styles:{borderStyle:"%value"},...ii},tablecellborderwidth:{styles:{borderWidth:"%value"},...ii}},PA=gt(BA),hd=dt.each,Dr=we.DOM,$m=t=>mt(t)&&Vt(t),y1=(t,e)=>{const n=e&&e.schema||Cs({}),r=a=>{const i=Dt(a)?{name:a,classes:[],attrs:{}}:a,l=Dr.create(i.name);return c=l,(u=i).classes.length>0&&Dr.addClass(c,u.classes.join(" ")),Dr.setAttribs(c,u.attrs),l;var c,u},o=(a,i,l)=>{let c;const u=i[0],f=$m(u)?u.name:void 0,p=((v,h)=>{const C=n.getElementRule(v.nodeName.toLowerCase()),S=C?.parentsRequired;return!(!S||!S.length)&&(h&&Tt(S,h)?h:S[0])})(a,f);if(p)f===p?(c=u,i=i.slice(1)):c=p;else if(u)c=u,i=i.slice(1);else if(!l)return a;const b=c?r(c):Dr.create("div");b.appendChild(a),l&&dt.each(l,v=>{const h=r(v);b.insertBefore(h,a)});const g=$m(c)?c.siblings:void 0;return o(b,i,g)},s=Dr.create("div");if(t.length>0){const a=t[0],i=r(a),l=$m(a)?a.siblings:void 0;s.appendChild(o(i,t.slice(1),l))}return s},LA=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=dt.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,s,a,i)=>{switch(o){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==dt.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},MA=(t,e)=>{let n="",r=uE(t);if(""===r)return"";const o=b=>Dt(b)?b.replace(/%(\w+)/g,""):"",s=(b,g)=>Dr.getStyle(g??t.getBody(),b,!0);if(Dt(e)){const b=t.formatter.get(e);if(!b)return"";e=b[0]}if("preview"in e){const b=e.preview;if(!1===b)return"";r=b||r}let a,i=e.block||e.inline||"span";const l=Dt(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),dt.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),b=>{const g=dt.map(b.split(/(?:~\+|~|\+)/),LA),v=g.pop();return g.length&&(v.siblings=g),v}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=y1(l,t)):a=y1([i],t);const u=Dr.select(i,a)[0]||a.firstChild;hd(e.styles,(b,g)=>{const v=o(b);v&&Dr.setStyle(u,g,v)}),hd(e.attributes,(b,g)=>{const v=o(b);v&&Dr.setAttrib(u,g,v)}),hd(e.classes,b=>{const g=o(b);Dr.hasClass(u,g)||Dr.addClass(u,g)}),t.dispatch("PreviewFormats"),Dr.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const f=s("fontSize"),p=/px$/.test(f)?parseInt(f,10):0;return hd(r.split(" "),b=>{let g=s(b,u);if(!("background-color"===b&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(b),"#ffffff"===Mc(g).toLowerCase())||"color"===b&&"#000000"===Mc(g).toLowerCase())){if("font-size"===b&&/em|%$/.test(g)){if(0===p)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*p+"px"}"border"===b&&g&&(n+="padding:0 2px;"),n+=b+":"+g+";"}}),t.dispatch("AfterPreviewFormats"),Dr.remove(a),n},C1=t=>{const e=(r=>{const o={},s=(a,i)=>{a&&(Dt(a)?(ct(i)||(i=[i]),rt(i,l=>{De(l.deep)&&(l.deep=!Rr(l)),De(l.split)&&(l.split=!Rr(l)||nn(l)),De(l.remove)&&Rr(l)&&!nn(l)&&(l.remove="none"),Rr(l)&&nn(l)&&(l.mixed=!0,l.block_expand=!0),Dt(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[a]=i):Se(a,(l,c)=>{s(c,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{i.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},p={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[p,u,f]:[u,p,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,p)=>xt(u)&&u.hasAttribute("href"),onformat:(u,f,p)=>{dt.each(p,(b,g)=>{i.setAttrib(u,g,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return null!==(f=u?.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return dt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{c[u]={block:u,remove:"all"}}),c})(r)),s(PA()),s(dE(r)),{get:a=>mt(a)?o[a]:o,has:a=>te(o,a),register:s,unregister:a=>(a&&o[a]&&delete o[a],o)}})(t),n=cn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(r=t).on("mouseup keydown",o=>{var s;((a,i,l)=>{const c=a.selection,u=a.getBody();vm(a,null,l),8!==i&&46!==i||!c.isCollapsed()||c.getStart().innerHTML!==ri||vm(a,aa(u,c.getStart())),37!==i&&39!==i||vm(a,aa(u,c.getStart()))})(r,o.keyCode,(s=r.selection.getRng().endContainer,lt(s)&&js(s.data,ln)))}),Do(t)||((r,o)=>{r.set({}),o.on("NodeChange",s=>{my(o,s.element,r.get())}),o.on("FormatApply FormatRemove",s=>{const a=E.from(s.node).map(i=>cl(i)?i:i.startContainer).bind(i=>xt(i)?E.some(i):E.from(i.parentElement)).getOrThunk(()=>dy(o));my(o,a,r.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,Ue(t).formatter.apply(i,l,c)},remove:(r,o,s,a)=>{var l,c,u,f;l=r,c=o,u=s,f=a,Ue(t).formatter.remove(l,c,u,f)},toggle:(r,o,s)=>{var i,l,c;i=r,l=o,c=s,Ue(t).formatter.toggle(i,l,c)},match:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,Ue(t).formatter.match(l,c,u,f);var l,c,u,f},closest:r=>{return s=r,Ue(t).formatter.closest(s);var s},matchAll:(r,o)=>{return a=r,i=o,Ue(t).formatter.matchAll(a,i);var a,i},matchNode:(r,o,s,a)=>{return l=r,c=o,u=s,f=a,Ue(t).formatter.matchNode(l,c,u,f);var l,c,u,f},canApply:r=>{return s=r,Ue(t).formatter.canApply(s);var s},formatChanged:(r,o,s,a)=>{return l=n,c=r,u=o,f=s,p=a,Ue(t).formatter.formatChanged(l,c,u,f,p);var l,c,u,f,p},getCssText:kt(MA,t)};var r},x1=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},w1=t=>{const e=xs(),n=cn(0),r=cn(0),o={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,Ue(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=o,c=r,u=n,f=e,p=s,b=a,Ue(t).undoManager.add(l,c,u,f,p,b);var l,c,u,f,p,b},dispatchChange:()=>{t.setDirty(!0);const s=cd(t);s.bookmark=$u(t.selection),t.dispatch("change",{level:s,lastLevel:_a(o.data,r.get()).getOrUndefined()})},undo:()=>{return a=o,i=n,l=r,Ue(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=r,i=o.data,Ue(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=o,i=r,Ue(t).undoManager.clear(a,i)},reset:()=>{var a;a=o,Ue(t).undoManager.reset(a)},hasUndo:()=>{return a=o,i=r,Ue(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=o,i=r,Ue(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=o,l=n,c=s,Ue(t).undoManager.transact(i,l,c);var i,l,c},ignore:s=>{var i,l;i=n,l=s,Ue(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,c,u,f;l=o,c=r,u=s,f=a,Ue(t).undoManager.extra(l,c,u,f)}};return Do(t)||((s,a,i)=>{const l=cn(!1),c=u=>{dd(a,!1,i),a.add({},u)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",u=>{x1(u.command)||(Qy(a,i),a.beforeChange())}),s.on("ExecCommand",u=>{x1(u.command)||c(u)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",u=>{const f=u.keyCode;if(u.isDefaultPrevented())return;const p=fe.os.isMacOS()&&"Meta"===u.key;(f>=33&&f<=36||f>=37&&f<=40||45===f||u.ctrlKey||p)&&(c(),s.nodeChanged()),46!==f&&8!==f||s.nodeChanged(),l.get()&&a.typing&&!zm(cd(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",u=>{const f=u.keyCode;if(!u.isDefaultPrevented()){if(!(f>=33&&f<=36||f>=37&&f<=40||45===f))return!(f<16||f>20)||224===f||91===f||a.typing||u.ctrlKey&&!u.altKey||u.metaKey?void((fe.os.isMacOS()?u.metaKey:u.ctrlKey&&!u.altKey)&&a.beforeChange()):(a.beforeChange(),dd(a,!0,i),a.add({},u),void l.set(!0));a.typing&&c(u)}}),s.on("mousedown",u=>{a.typing&&c(u)}),s.on("input",u=>{var f,p;u.inputType&&("insertReplacementText"===u.inputType||"insertText"===(f=u).inputType&&null===f.data||"insertFromPaste"===(p=u).inputType||"insertFromDrop"===p.inputType)&&c(u)}),s.on("AddUndo Undo Redo ClearUndos",u=>{u.isDefaultPrevented()||s.nodeChanged()})})(t,o,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),o;var s},IA=[9,27,St.HOME,St.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,St.DOWN,St.UP,St.LEFT,St.RIGHT].concat(fe.browser.isFirefox()?[224]:[]),S1="data-mce-placeholder",k1=t=>"keydown"===t.type||"keyup"===t.type,E1=t=>{const e=t.keyCode;return e===St.BACKSPACE||e===St.DELETE},FA=(t,e)=>({from:t,to:e}),Wm=(t,e)=>{const n=O(t),r=O(e.container());return Qc(n,r).map(o=>({block:o,position:e}))},_1=(t,e)=>Qn(e,n=>zi(n)||so(n.dom),n=>de(n,t)).filter(Cn).getOr(t),N1=t=>{const e=(n=>{const r=Me(n);return Is(r,Er).fold(gt(r),o=>r.slice(0,o))})(t);return rt(e,Mt),e},A1=(t,e)=>{const n=Jo(e,t);return qe(n.reverse(),r=>We(r)).each(Mt)},jA=(t,e,n,r)=>{if(We(n))return bs(n),qn(n.dom);0===$t(zr(r),s=>!We(s)).length&&We(e)&&at(r,X("br"));const o=nr(n.dom,G.before(r.dom));return rt(N1(e),s=>{at(r,s)}),A1(t,e),o},zA=(t,e,n)=>{if(We(n)){if(We(e)){const s=jo((a=>{const i=(l,c)=>Ze(l).fold(()=>c,u=>dc(u)?i(u,c.concat(ta(u))):c);return i(a,[])})(n),(a,i)=>(It(a,i),i),fc());se(e),Nt(e,s)}return Mt(n),qn(e.dom)}const r=$r(n.dom);return rt(N1(e),o=>{Nt(n,o)}),A1(t,e),r},R1=(t,e)=>{Ya(t,e.dom).bind(n=>E.from(n.getNode())).map(O).filter(Xs).each(Mt)},T1=(t,e,n)=>{return R1(!0,e),R1(!1,n),(r=e,o=n,gn(o,r)?((s,a)=>{const i=Jo(a,s);return E.from(i[i.length-1])})(o,r):E.none()).fold(kt(zA,t,e,n),kt(jA,t,e,n));var r,o},O1=(t,e,n,r)=>e?T1(t,r,n):T1(t,n,r),Vm=(t,e)=>{const n=O(t.getBody());return(o=n.dom,s=e,a=t.selection.getRng(),a.collapsed?((i,l,c)=>{const u=Wm(i,G.fromRangeStart(c)),f=u.bind(p=>Nr(l,i,p.position).bind(b=>Wm(i,b).map(g=>{return v=i,h=l,Ie((C=g).position.getNode())&&!We(C.block)?Ya(!1,C.block.dom).bind(S=>S.isEqual(C.position)?Nr(h,v,S).bind(k=>Wm(v,k)):E.some(C)).getOr(C):C;var v,h,C})));return pn(u,f,FA).filter(p=>{return!de((b=p).from.block,b.to.block)&&((b,g)=>{const v=O(b);return de(_1(v,g.from.block),_1(v,g.to.block))})(i,p)&&(b=>!1===Re(b.from.block.dom)&&!1===Re(b.to.block.dom))(p)&&(b=>{const g=v=>gg(v)||xu(v.dom);return g(b.from.block)&&g(b.to.block)})(p);var b})})(o,s,a):E.none()).map(o=>()=>{O1(n,e,o.from.block,o.to.block).each(s=>{t.selection.setRng(s.toRange())})});var o,s,a},D1=(t,e)=>{const n=O(e),r=kt(de,t);return Sr(n,zi,r).isSome()},Km=(t,e)=>t.selection.isCollapsed()?E.none():(t=>{const e=O(t.getBody());return((n,r)=>{const o=nr(n.dom,G.fromRangeStart(r)).isNone(),s=Un(n.dom,G.fromRangeEnd(r)).isNone();return!(D1(a=n,(i=r).startContainer)||D1(a,i.endContainer))&&o&&s;var a,i})(e,t.selection.getRng())?(n=t,E.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r)=>{const o=r.getRng();return pn(Qc(n,O(o.startContainer)),Qc(n,O(o.endContainer)),(s,a)=>de(s,a)?E.none():E.some(()=>{o.deleteContents(),O1(n,!0,s,a).each(i=>{r.setRng(i.toRange())})})).getOr(E.none())})(e,t.selection);var n})(t),Zo=(t,e,n,r,o)=>E.from(e._selectionOverrides.showCaret(t,n,r,o)),El=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?E.none():E.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(e)),Xm=(t,e,n)=>e.collapsed?((r,o,s)=>{const a=Zu(1,r.getBody(),o),i=G.fromRangeStart(a),l=i.getNode();if(el(l))return Zo(1,r,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(el(c))return Zo(1,r,c,!1,!1);const u=pa(r.dom.getRoot(),i.getNode());return el(u)?Zo(1,r,u,!1,s):E.none()})(t,e,n).getOr(e):e,UA=t=>As(t)||pl(t),qA=t=>Rs(t)||gl(t),B1=(t,e,n,r,o,s)=>{var a,i;Zo(r,t,s.getNode(!o),o,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();o?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,lt(i=n)&&0===i.data.length&&a.remove(i)},Gm=(t,e)=>((n,r)=>{const o=n.selection.getRng();if(!lt(o.commonAncestorContainer))return E.none();const s=r?dn.Forwards:dn.Backwards,a=Ao(n.getBody()),i=kt(tf,r?a.next:a.prev),l=r?UA:qA,c=al(s,n.getBody(),o),u=i(c),f=u&&Or(r,u);if(!f||!Dc(c,f))return E.none();if(l(f))return E.some(()=>B1(n,o,c.getNode(),s,r,f));const p=i(f);return p&&l(p)&&Dc(f,p)?E.some(()=>B1(n,o,c.getNode(),s,r,p)):E.none()})(t,e),Ym=(t,e)=>{const n=t.getBody();return e?qn(n).filter(As):$r(n).filter(Rs)},Qm=t=>{const e=t.selection.getRng();return!e.collapsed&&(Ym(t,!0).exists(n=>n.isEqual(G.fromRangeStart(e)))||Ym(t,!1).exists(n=>n.isEqual(G.fromRangeEnd(e))))},Br=Eo([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),P1=(t,e,n)=>Nr(e,t,n).bind(r=>{return o=r.getNode(),mt(o)&&(zi(O(o))||ji(O(o)))||((s,a,i,l)=>{const c=u=>dc(O(u))&&!_o(i,l,s);return n0(!a,i).fold(()=>n0(a,l).fold(Ce,c),c)})(t,e,n,r)?E.none():e&&Re(r.getNode())||!e&&Re(r.getNode(!0))?((s,a,i,l)=>{const c=l.getNode(!a);return Qc(O(s),O(i.getNode())).map(u=>We(u)?Br.remove(u.dom):Br.moveToElement(c)).orThunk(()=>E.some(Br.moveToElement(c)))})(t,e,n,r):e&&Rs(n)||!e&&As(n)?E.some(Br.moveToPosition(r)):E.none();var o}),L1=(t,e)=>E.from(pa(t.getBody(),e)),M1=t=>{const e=t.dom,n=t.selection,r=pa(t.getBody(),n.getNode());if(so(r)&&e.isBlock(r)&&e.isEmpty(r)){const o=e.create("br",{"data-mce-bogus":"1"});e.setHTML(r,""),r.appendChild(o),n.setRng(G.before(o).toRange())}return!0},Jm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return L1(t,n).filter(Re).fold(()=>((r,o,s)=>{const a=Zu(o?1:-1,r,s),i=G.fromRangeStart(a),l=O(r);return!o&&Rs(i)?E.some(Br.remove(i.getNode(!0))):o&&As(i)?E.some(Br.remove(i.getNode())):!o&&As(i)&&qf(l,i)?rN(l,i).map(c=>Br.remove(c.getNode())):o&&Rs(i)&&Uf(l,i)?oN(l,i).map(c=>Br.remove(c.getNode())):(c=r,((p,b)=>{const g=b.getNode(!p),v=p?"after":"before";return xt(g)&&g.getAttribute("data-mce-caret")===v})(u=o,f=i)?(p=u,b=f.getNode(!u),ye(b)?E.none():p&&Re(b.nextSibling)?E.some(Br.moveToElement(b.nextSibling)):!p&&Re(b.previousSibling)?E.some(Br.moveToElement(b.previousSibling)):E.none()).orThunk(()=>P1(c,u,f)):P1(c,u,f).bind(p=>((b,g,v)=>v.fold(h=>E.some(Br.remove(h)),h=>E.some(Br.moveToElement(h)),h=>_o(g,h,b)?E.none():E.some(Br.moveToPosition(h))))(c,f,p)));var c,u,f,p,b})(t.getBody(),e,t.selection.getRng()).map(r=>()=>{return r.fold((o=t,s=e,a=>(o._selectionOverrides.hideFakeCaret(),fa(o,s,O(a)),!0)),((o,s)=>a=>{const i=s?G.before(a):G.after(a);return o.selection.setRng(i.toRange()),!0})(t,e),(o=>s=>(o.selection.setRng(s.toRange()),!0))(t));var o,s}),()=>E.some(_t))})(t,e):((n,r)=>{const o=n.selection.getNode();return Re(o)&&!lc(o)?L1(n,o.parentNode).filter(Re).fold(()=>E.some(()=>{var s;s=O(n.getBody()),rt(Dn(s,".mce-offscreen-selection"),Mt),fa(n,r,O(n.selection.getNode())),Gf(n)}),()=>E.some(_t)):Qm(n)?E.some(()=>{dv(n,n.selection.getRng(),O(n.getBody()))}):E.none()})(t,e),Zm=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=G.fromRangeStart(n.selection.getRng());return Nr(r,n.getBody(),o).filter(s=>r?J_(s):Z_(s)).bind(s=>Ju(r?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):E.none(),li=lt,I1=t=>li(t)&&t.data[0]===Bn,F1=t=>li(t)&&t.data[t.data.length-1]===Bn,j1=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(Bn)},bd=(t,e)=>t?(n=>{var r;if(li(n.previousSibling))return F1(n.previousSibling)||n.previousSibling.appendData(Bn),n.previousSibling;if(li(n))return I1(n)||n.insertData(0,Bn),n;{const o=j1(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(e):(n=>{var r,o;if(li(n.nextSibling))return I1(n.nextSibling)||n.nextSibling.insertData(0,Bn),n.nextSibling;if(li(n))return F1(n)||n.appendData(Bn),n;{const s=j1(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(s,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(s),s}})(e),WA=kt(bd,!0),VA=kt(bd,!1),z1=(t,e)=>lt(t.container())?bd(e,t.container()):bd(e,t.getNode()),H1=(t,e)=>{const n=e.get();return n&&t.container()===n&&vs(n)},tp=(t,e)=>e.fold(n=>{oa(t.get());const r=WA(n);return t.set(r),E.some(G(r,r.length-1))},n=>qn(n).map(r=>{if(H1(r,t)){const o=t.get();return G(o,1)}{oa(t.get());const o=z1(r,!0);return t.set(o),G(o,1)}}),n=>$r(n).map(r=>{if(H1(r,t)){const o=t.get();return G(o,o.length-1)}{oa(t.get());const o=z1(r,!1);return t.set(o),G(o,o.length-1)}}),n=>{oa(t.get());const r=VA(n);return t.set(r),E.some(G(r,1))}),U1=(t,e)=>{for(let n=0;n<t.length;n++){const r=t[n].apply(null,e);if(r.isSome())return r}return E.none()},$n=Eo([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),q1=(t,e)=>ks(e,t)||t,KA=(t,e,n)=>{const r=sv(n),o=q1(e,r.container());return Ts(t,o,r).fold(()=>Un(o,r).bind(kt(Ts,t,o)).map(s=>$n.before(s)),E.none)},XA=(t,e)=>null===aa(t,e),$1=(t,e,n)=>Ts(t,e,n).filter(kt(XA,e)),GA=(t,e,n)=>{const r=av(n);return $1(t,e,r).bind(o=>nr(o,r).isNone()?E.some($n.start(o)):E.none())},YA=(t,e,n)=>{const r=sv(n);return $1(t,e,r).bind(o=>Un(o,r).isNone()?E.some($n.end(o)):E.none())},QA=(t,e,n)=>{const r=av(n),o=q1(e,r.container());return Ts(t,o,r).fold(()=>nr(o,r).bind(kt(Ts,t,o)).map(s=>$n.after(s)),E.none)},W1=t=>!ov(ep(t)),Bo=(t,e,n)=>U1([KA,GA,YA,QA],[t,e,n]).filter(W1),ep=t=>t.fold(ue,ue,ue,ue),V1=t=>t.fold(gt("before"),gt("start"),gt("end"),gt("after")),vd=t=>t.fold($n.before,$n.before,$n.after,$n.after),np=t=>t.fold($n.start,$n.start,$n.end,$n.end),JA=(t,e,n,r,o,s)=>pn(Ts(e,n,r),Ts(e,n,o),(a,i)=>a!==i&&((l,c,u)=>{const f=ks(c,l),p=ks(u,l);return mt(f)&&f===p})(n,a,i)?$n.after(t?a:i):s).getOr(s),ZA=(t,e)=>t.fold(Be,n=>{return o=e,!(V1(r=n)===V1(o)&&ep(r)===ep(o));var r,o}),tR=(t,e)=>t?e.fold(ir(E.some,$n.start),E.none,ir(E.some,$n.after),E.none):e.fold(E.none,ir(E.some,$n.before),E.none,ir(E.some,$n.end)),K1=(t,e,n)=>{const r=t?1:-1;return e.setRng(G(n.container(),n.offset()+r).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Po;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Po||(Po={}));const yd=(t,e)=>t===dn.Backwards?Xr(e):e,eR=(t,e,n)=>t===dn.Forwards?e.next(n):e.prev(n),nR=(t,e,n,r)=>Ie(r.getNode(e===dn.Forwards))?Po.Br:!1===_o(n,r)?Po.Block:Po.Wrap,X1=(t,e,n,r)=>{const o=Ao(n);let s=r;const a=[];for(;s;){const i=eR(e,o,s);if(!i)break;if(Ie(i.getNode(!1)))return e===dn.Forwards?{positions:yd(e,a).concat([i]),breakType:Po.Br,breakAt:E.some(i)}:{positions:yd(e,a),breakType:Po.Br,breakAt:E.some(i)};if(i.isVisible()){if(t(s,i)){const l=nR(0,e,s,i);return{positions:yd(e,a),breakType:l,breakAt:E.some(i)}}a.push(i),s=i}else s=i}return{positions:yd(e,a),breakType:Po.Eol,breakAt:E.none()}},G1=(t,e,n,r)=>e(n,r).breakAt.map(o=>{const s=e(n,o).positions;return t===dn.Backwards?s.concat(o):[o].concat(s)}).getOr([]),rp=(t,e)=>vn(t,(n,r)=>n.fold(()=>E.some(r),o=>pn(Nn(o.getClientRects()),Nn(r.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?r:o}).or(n)),E.none()),Cd=(t,e)=>Nn(e.getClientRects()).bind(n=>rp(t,n.left)),_l=kt(X1,G.isAbove,-1),Nl=kt(X1,G.isBelow,1),Y1=kt(G1,-1,_l),Q1=kt(G1,1,Nl),rR=(t,e)=>Cd(Y1(t,e),e),oR=(t,e)=>Cd(Q1(t,e),e),sR=Re,J1=(t,e)=>Math.abs(t.left-e),Z1=(t,e)=>Math.abs(t.right-e),tC=(t,e)=>Gr(t,(n,r)=>{const o=Math.min(J1(n,e),Z1(n,e)),s=Math.min(J1(r,e),Z1(r,e));return s===o&&yn(r,"node")&&sR(r.node)||s<o?r:n}),aR=t=>{const e=n=>re(n,r=>{const o=na(r);return o.node=t,o});if(xt(t))return e(t.getClientRects());if(lt(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},eC=t=>rn(t,aR);var Al;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Al||(Al={}));const nC=(t,e,n,r,o,s)=>{let a=0;const i=[],l=f=>{let p=eC([f]);-1===t&&(p=p.reverse());for(let b=0;b<p.length;b++){const g=p[b];if(!n(g,c)){if(i.length>0&&e(g,Ir(i))&&a++,g.line=a,o(g))return!0;i.push(g)}}return!1},c=Ir(s.getClientRects());if(!c)return i;const u=s.getNode();return u&&(l(u),((f,p,b,g)=>{let v=g;for(;v=rl(v,f,Cg,p);)if(b(v))return})(t,r,l,u)),i},iR=kt(nC,Al.Up,Gi,Yi),lR=kt(nC,Al.Down,Yi,Gi),rC=t=>Ir(t.getClientRects()),oC=t=>e=>e.line>t,op=t=>e=>e.line===t,ts=(t,e)=>{t.selection.setRng(e),ml(t,t.selection.getRng())},sp=(t,e,n)=>E.some(Xm(t,e,n)),sC=(t,e,n,r,o,s)=>{const a=e===dn.Forwards,i=Ao(t.getBody()),l=kt(tf,a?i.next:i.prev),c=a?r:o;if(!n.collapsed){const g=kc(n);if(s(g))return Zo(e,t,g,e===dn.Backwards,!1);if(Qm(t)){const v=n.cloneRange();return v.collapse(e===dn.Backwards),E.from(v)}}const u=al(e,t.getBody(),n);if(c(u))return El(t,u.getNode(!a));let f=l(u);const p=bg(n);if(!f)return p?E.some(n):E.none();if(f=Or(a,f),c(f))return Zo(e,t,f.getNode(!a),a,!1);const b=l(f);return b&&c(b)&&Dc(f,b)?Zo(e,t,b.getNode(!a),a,!1):p?sp(t,f.toRange(),!1):E.none()},aC=(t,e,n,r,o,s)=>{const a=al(e,t.getBody(),n),i=Ir(a.getClientRects()),l=e===Al.Down,c=t.getBody();if(!i)return E.none();if(Qm(t)){const v=l?G.fromRangeEnd(n):G.fromRangeStart(n);return(l?oR:rR)(c,v).orThunk(()=>E.from(v)).map(h=>h.toRange())}const u=(l?lR:iR)(c,oC(1),a),f=$t(u,op(1)),p=i.left,b=tC(f,p);if(b&&s(b.node)){const v=Math.abs(p-b.left),h=Math.abs(p-b.right);return Zo(e,t,b.node,v<h,!1)}let g;if(g=r(a)?a.getNode():o(a)?a.getNode(!0):kc(n),g){const v=((C,S,k,N)=>{const R=Ao(S);let D,P,U,Y;const V=[];let L=0;1===C?(D=R.next,P=Yi,U=Gi,Y=G.after(N)):(D=R.prev,P=Gi,U=Yi,Y=G.before(N));const z=rC(Y);do{if(!Y.isVisible())continue;const I=rC(Y);if(U(I,z))continue;V.length>0&&P(I,Ir(V))&&L++;const $=na(I);if($.position=Y,$.line=L,k($))return V;V.push($)}while(Y=D(Y));return V})(e,c,oC(1),g);let h=tC($t(v,op(1)),p);if(h||(h=Ir($t(v,op(0))),h))return sp(t,h.position.toRange(),!1)}return 0===f.length?ap(t,l).filter(l?o:r).map(v=>Xm(t,v.toRange(),!1)):E.none()},ap=(t,e)=>{const n=t.selection.getRng(),r=e?G.fromRangeEnd(n):G.fromRangeStart(n),o=(s=r.container(),a=t.getBody(),Sr(O(s),i=>a_(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=Nl(o,r);return yo(i.positions)}{const i=_l(o,r);return Nn(i.positions)}},iC=(t,e,n)=>ap(t,e).filter(n).exists(r=>(t.selection.setRng(r.toRange()),!0)),xd=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},lC=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},cC=(t,e,n)=>tp(e,n).map(r=>(xd(t,r),n)),dC=(t,e,n)=>!!tl(t)&&((t,e,n)=>{const r=t.getBody(),o=((s,a,i)=>{const l=G.fromRangeStart(s);if(s.collapsed)return l;{const c=G.fromRangeEnd(s);return i?nr(a,c).getOr(c):Un(a,l).getOr(l)}})(t.selection.getRng(),r,n);return((s,a,i,l)=>{const c=Or(s,l),u=Bo(a,i,c);return Bo(a,i,c).bind(kt(tR,s)).orThunk(()=>((f,p,b,g,v)=>{const h=Or(f,v);return Nr(f,b,h).map(kt(Or,f)).fold(()=>g.map(vd),C=>Bo(p,b,C).map(kt(JA,f,p,b,h,C)).filter(kt(ZA,g))).filter(W1)})(s,a,i,u,l))})(n,kt(ma,t),r,o).bind(s=>cC(t,e,s))})(t,e,n).isSome(),uC=(t,e,n)=>!!tl(e)&&((r,o)=>{const s=o.selection.getRng(),a=r?G.fromRangeEnd(s):G.fromRangeStart(s);return!!pe(o.selection.getSel().modify)&&(r&&gu(a)?K1(!0,o.selection,a):!(r||!hu(a))&&K1(!1,o.selection,a))})(t,e),uR=kt(uC,!0),fR=kt(uC,!1),wd=(t,e,n)=>{if(tl(t)){const r=ap(t,e).getOrThunk(()=>{const o=t.selection.getRng();return e?G.fromRangeEnd(o):G.fromRangeStart(o)});return Bo(kt(ma,t),t.getBody(),r).exists(o=>{const s=vd(o);return tp(n,s).exists(a=>(xd(t,a),!0))})}return!1},fC=(t,e)=>n=>tp(e,n).map(r=>()=>xd(t,r)),mC=(t,e,n,r)=>{const o=t.getBody(),s=kt(ma,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,r)),Xf(t),Bo(s,o,G.fromRangeStart(t.selection.getRng())).map(np).bind(fC(t,e)).each(Vn)}),t.nodeChanged()},ip=(t,e,n)=>{if(t.selection.isCollapsed()&&tl(t)){const r=G.fromRangeStart(t.selection.getRng());return((o,s,a,i)=>{const l=(f=o.getBody(),p=i.container(),ks(p,f)||f),c=kt(ma,o),u=Bo(c,l,i);var f,p;return u.bind(f=>a?f.fold(gt(E.some(np(f))),E.none,gt(E.some(vd(f))),E.none):f.fold(E.none,gt(E.some(vd(f))),E.none,gt(E.some(np(f))))).map(fC(o,s)).getOrThunk(()=>{const f=il(a,l,i),p=f.bind(b=>Bo(c,l,b));return pn(u,p,()=>Ts(c,l,i).bind(b=>{return pn(qn(g=b),$r(g),(v,h)=>{const C=Or(!0,v),S=Or(!1,h);return Un(g,C).forall(k=>k.isEqual(S))}).getOr(!0)?E.some(()=>{fa(o,a,O(b))}):E.none();var g})).getOrThunk(()=>p.bind(()=>f.map(b=>()=>{a?mC(o,s,i,b):mC(o,s,b,i)})))})})(t,e,n,r)}return E.none()},pC=(t,e)=>{const n=O(t.getBody()),r=O(t.selection.getStart()),o=Jo(r,n);return Is(o,e).fold(gt(o),s=>o.slice(0,s))},mR=t=>1===wn(t),gC=(t,e)=>{const n=kt(Mv,t);return rn(e,r=>n(r)?[r.dom]:[])},hC=t=>{const e=pC(t,Er);return gC(t,e)},bC=(t,e)=>{const n=t.selection.getStart(),r=((o,s)=>{const a=s.parentElement;return Ie(s)&&!Qt(a)&&o.dom.isEmpty(a)})(t,n)||Iv(O(n))?Lv(n,e):((o,s)=>{const{caretContainer:a,caretPosition:i}=Pv(s);return o.insertNode(a.dom),i})(t.selection.getRng(),e);t.selection.setRng(r.toRange())},vC=t=>lt(t.startContainer),lp=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=$t(pC(t,o=>Er(o)||wn(o)>1),mR);return yo(n).bind(r=>{const o=G.fromRangeStart(t.selection.getRng());return lv(e,o,r.dom)&&!Iv(r)?E.some(()=>((s,a,i,l)=>{const c=gC(a,l);if(0===c.length)fa(a,s,i);else{const u=Lv(i.dom,c);a.selection.setRng(u.toRange())}})(e,t,r,n)):E.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&vC(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!Qt(o)&&Mv(n,O(o))})(t,e)&&(n=>{return(o=>{const s=o.startContainer.parentNode,a=o.endContainer.parentNode;return!Qt(s)&&!Qt(a)&&s.isEqualNode(a)})(r=n)&&(o=>{const s=o.endContainer;return o.endOffset===(lt(s)?s.length:s.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(e);var n})(n)){const r=hC(n);return E.some(()=>{Xf(n),((o,s)=>{const a=Gt(s,hC(o));a.length>0&&bC(o,a)})(n,r)})}return E.none()})(t),Rl=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(vC(n)||e.dom.isEmpty(n.startContainer))&&!(t=>Sr(t,o=>Wr(o.dom),Er).isSome())(O(e.selection.getStart()))})(t)&&bC(t,[]),!0),cp=(t,e,n)=>mt(n)?E.some(()=>{t._selectionOverrides.hideFakeCaret(),fa(t,e,O(n))}):E.none(),dp=(t,e)=>t.selection.isCollapsed()?((n,r)=>{const o=r?pl:gl,a=al(r?dn.Forwards:dn.Backwards,n.getBody(),n.selection.getRng());return o(a)?cp(n,r,a.getNode(!r)):E.from(Or(r,a)).filter(i=>o(i)&&Dc(a,i)).bind(i=>cp(n,r,i.getNode(!r)))})(t,e):((n,r)=>{const o=n.selection.getNode();return ko(o)?cp(n,r,o):E.none()})(t,e),up=t=>Hs(t??"").getOr(0),yC=(t,e)=>(t||"table"===Ee(e)?"margin":"padding")+("rtl"===kr(e,"direction")?"-right":"-left"),CC=t=>{const e=wC(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,mr(e,o=>{const s=yC(Lh(n),o),a=q(o,s).map(up).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&a>0})));var n},xC=t=>pu(t)||ji(t),wC=t=>$t(ae(t.selection.getSelectedBlocks()),e=>!xC(e)&&!xe(e).exists(xC)&&Qn(e,n=>so(n.dom)||Re(n.dom)).exists(n=>so(n.dom))),SC=(t,e)=>{var n,r;const{dom:o}=t,s=tE(t),a=null!==(r=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",i=up(s),l=Lh(t);rt(wC(t),c=>{((u,f,p,b,g,v)=>{const h=yC(p,O(v)),C=up(u.getStyle(v,h));if("outdent"===f){const S=Math.max(0,C-b);u.setStyle(v,h,S?S+g:"")}else u.setStyle(v,h,C+b+g)})(o,e,l,i,a,c.dom)})},kC=t=>SC(t,"outdent"),EC=t=>{if(t.selection.isCollapsed()&&CC(t)){const e=t.dom,n=t.selection.getRng(),r=G.fromRangeStart(n),o=e.getParent(n.startContainer,e.isBlock);if(null!==o&&Hf(O(o),r))return E.some(()=>kC(t))}return E.none()},_C=(t,e,n)=>Kn([EC,Jm,Gm,(r,o)=>ip(r,e,o),Vm,rm,Zm,dp,Km,lp],r=>r(t,n)).filter(r=>t.selection.isEditable()),NC=t=>void 0===t.touches||1!==t.touches.length?E.none():E.some(t.touches[0]),fp=(t,e)=>te(t,e.nodeName),vR=(t,e)=>!!lt(e)||!!xt(e)&&!fp(t.getBlockElements(),e)&&!Ar(e)&&!Ys(t,e),yR=(t,e)=>!(!lt(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!fp(t,e.nextSibling))),AC=t=>t.dom.create(er(t),Zi(t)),CR=t=>{const e=t.dom,n=t.selection,r=t.schema,o=r.getBlockElements(),s=n.getStart(),a=t.getBody();let i,l,c=!1;const u=er(t);if(!s||!xt(s))return;const f=a.nodeName.toLowerCase();if(!r.isValidChild(f,u.toLowerCase())||(k=o,N=a,Ae(jb(O(s),O(N)),D=>fp(k,D.dom))))return;var k,N;const p=n.getRng(),{startContainer:b,startOffset:g,endContainer:v,endOffset:h}=p,C=ua(t);let S=a.firstChild;for(;S;)if(xt(S)&&dk(r,S),vR(r,S)){if(yR(o,S)){l=S,S=S.nextSibling,e.remove(l);continue}i||(i=AC(t),a.insertBefore(i,S),c=!0),l=S,S=S.nextSibling,i.appendChild(l)}else i=null,S=S.nextSibling;c&&C&&(p.setStart(b,g),p.setEnd(v,h),n.setRng(p),t.nodeChanged())},RC=(t,e,n)=>{const r=O(AC(t)),o=fc();Nt(r,o),n(e,r);const s=document.createRange();return s.setStartBefore(o.dom),s.setEndBefore(o.dom),s},TC=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),xR=(t,e,n)=>function(r){const o=arguments,s=o[o.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return r;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(o[0])+'">'+t.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},OC=(t,e)=>{e.hasAttribute("data-mce-caret")&&(bu(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},wR=(t,e)=>{const n=wo(O(t.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void OC(t,n)):void(hg(n)&&(OC(t,n),t.undoManager.add()))},DC=Re,BC=(t,e,n)=>{const r=Ao(t.getBody()),o=kt(tf,1===e?r.next:r.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!o(G.fromRangeStart(n))){const a=O((i=>{const l=i.dom.create(er(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Bt(O(s),a):at(O(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},PC=(t,e)=>((n,r)=>{const o=r?dn.Forwards:dn.Backwards,s=n.selection.getRng();return(a=o,i=n,l=s,sC(i,a,l,As,Rs,DC)).orThunk(()=>(BC(n,o,s),E.none()));var a,i,l})(t,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return ov(o)?!r:r})(t.selection,e)).exists(n=>(ts(t,n),!0)),LC=(t,e)=>((n,r)=>{const o=r?1:-1,s=n.selection.getRng();return(a=o,i=n,l=s,aC(i,a,l,c=>As(c)||Ib(c),c=>Rs(c)||Fb(c),DC)).orThunk(()=>(BC(n,o,s),E.none()));var a,i,l})(t,e).exists(n=>(ts(t,n),!0)),MC=(t,e)=>iC(t,e,e?Rs:As),Sd=(t,e)=>Ym(t,!e).map(n=>{const r=n.toRange(),o=t.selection.getRng();return e?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(ts(t,n),!0)),SR=t=>Tt(["figcaption"],Ee(t)),IC=(t,e)=>!!t.selection.isCollapsed()&&((t,e)=>{const n=O(t.getBody()),r=G.fromRangeStart(t.selection.getRng());return((o,s)=>{const a=kt(de,s);return Qn(O(o.container()),Er,a).filter(SR)})(r,n).exists(()=>{if(o=n,a=r,e?Nl(o.dom,a).breakAt.isNone():_l(o.dom,a).breakAt.isNone()){const o=RC(t,n,e?Nt:Ft);return t.selection.setRng(o),!0}var o,a;return!1})})(t,e),FC={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},jC=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,Jt=(t,...e)=>()=>t.apply(null,e),Tl=(t,e)=>{return qe((r=e,rn(re(t,s=>({...FC,...s})),o=>jC(o,r)?[o]:[])),n=>n.action());var r},zC=(t,e)=>{return Kn((r=e,rn(re(t,s=>({...FC,...s})),o=>jC(o,r)?[o]:[])),n=>n.action());var r},HC=(t,e)=>{const n=e?dn.Forwards:dn.Backwards,r=t.selection.getRng();return sC(t,n,r,pl,gl,ko).exists(o=>(ts(t,o),!0))},UC=(t,e)=>{const n=e?1:-1,r=t.selection.getRng();return aC(t,n,r,pl,gl,ko).exists(o=>(ts(t,o),!0))},qC=(t,e)=>iC(t,e,e?gl:pl),$C=Eo([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ol={...$C,none:t=>$C.none(t)},WC=(t,e,n)=>rn(Me(t),r=>_e(r,e)?n(r)?[r]:[]:WC(r,e,n)),VC=(t,e)=>Ur(t,"table",e),mp=(t,e,n,r,o=Be)=>{const s=1===r;if(!s&&n<=0)return Ol.first(t[0]);if(s&&n>=t.length-1)return Ol.last(t[t.length-1]);{const a=n+r,i=t[a];return o(i)?Ol.middle(e,i):mp(t,e,a,r,o)}},KC=(t,e)=>VC(t,e).bind(n=>{const r=WC(n,"th,td",Be);return Is(r,o=>de(t,o)).map(o=>({index:o,all:r}))}),XC=(t,e,n,r,o)=>{const s=Dn(O(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,c)=>vn(i,(u,f)=>u.fold(()=>E.some(f),p=>{const b=Math.sqrt(Math.abs(p.x-l)+Math.abs(p.y-c)),g=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return E.some(g<b?f:p)}),E.none()))($t((i=t,rn(s,c=>{const u={left:(f=na(c.getBoundingClientRect())).left- -1,top:f.top- -1,right:f.right+-2,bottom:f.bottom+-2,width:f.width+-1,height:f.height+-1};var f;return[{x:u.left,y:i(u),cell:c},{x:u.right,y:i(u),cell:c}]})),i=>e(i,o)),r,o).map(i=>i.cell)},ER=kt(XC,t=>t.bottom,(t,e)=>t.y<e),_R=kt(XC,t=>t.top,(t,e)=>t.y>e),GC=(t,e,n)=>{const r=t(e,n);return(o=r).breakType===Po.Wrap&&0===o.positions.length||!Ie(n.getNode())&&(o=>o.breakType===Po.Br&&1===o.positions.length)(r)?!((o,s,a)=>a.breakAt.exists(i=>o(s,i).breakAt.isSome()))(t,e,r):r.breakAt.isNone();var o},NR=kt(GC,_l),AR=kt(GC,Nl),RR=(t,e,n,r)=>{const o=t.selection.getRng(),s=e?1:-1;return!(!Yh()||!((a,i,l)=>{const c=G.fromRangeStart(i);return Ya(!a,l).exists(u=>u.isEqual(c))})(e,o,n)||(Zo(s,t,n,!e,!1).each(a=>{ts(t,a)}),0))},YC=(t,e,n)=>{const r=((s,a)=>{const i=a.getNode(s);return Xo(i)?E.some(i):E.none()})(!!e,n),o=!1===e;r.fold(()=>ts(t,n.toRange()),s=>Ya(o,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>ts(t,n.toRange()),a=>{return i=e,c=s,void(l=t).undoManager.transact(()=>{const u=i?Bt:at,f=RC(l,O(c),u);ts(l,f)});var i,l,c}))},TR=(t,e,n,r)=>{const o=t.selection.getRng(),s=G.fromRangeStart(o),a=t.getBody();if(!e&&NR(r,s)){const i=(l=a,(f=c=n,p=u=s,Nn(p.getClientRects()).bind(b=>ER(f,b.left,b.top)).bind(b=>{return Cd($r(g=b).map(v=>_l(g,v).positions.concat(v)).getOr([]),p);var g})).orThunk(()=>Nn(u.getClientRects()).bind(f=>rp(Y1(l,G.before(c)),f.left))).getOr(G.before(c)));return YC(t,e,i),!0}var l,c,u,f,p;if(e&&AR(r,s)){const i=((l,c,u)=>((f,p)=>yo(p.getClientRects()).bind(b=>_R(f,b.left,b.top)).bind(b=>{return Cd(qn(g=b).map(v=>[v].concat(Nl(g,v).positions)).getOr([]),p);var g}))(c,u).orThunk(()=>Nn(u.getClientRects()).bind(f=>rp(Q1(l,G.after(c)),f.left))).getOr(G.after(c)))(a,n,s);return YC(t,e,i),!0}return!1},QC=(t,e,n)=>E.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(r=>E.from(t.dom.getParent(r,"table")).map(o=>n(t,e,o,r))).getOr(!1),JC=(t,e)=>QC(t,e,RR),ZC=(t,e)=>QC(t,e,TR),tx=(t,e,n)=>n.fold(E.none,E.none,(r,o)=>{return(s=o,((a,i)=>{const l=c=>{for(let u=0;u<c.childNodes.length;u++){const f=O(c.childNodes[u]);if(i(f))return E.some(f);const p=l(c.childNodes[u]);if(p.isSome())return p}return E.none()};return l(a.dom)})(s,wb)).map(a=>{return(t=>{const e=ei.getWin(t).dom,n=(o,s,a,i)=>xf(e,o,s,a,i),r=t.match({domRange:s=>{const a=O(s.startContainer),i=O(s.endContainer);return Q0(a,s.startOffset,i,s.endOffset)},relative:__,exact:Q0});return((o,s)=>{var i;return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(u=>!1===u.collapsed).map(u=>fl.rtl(O(u.endContainer),u.endOffset,O(u.startContainer),u.startOffset)).getOrThunk(()=>G0(0,fl.ltr,c)):G0(0,fl.ltr,c)})(0,(i=o,s.match({domRange:c=>({ltr:gt(c),rtl:E.none}),relative:(c,u)=>({ltr:$o(()=>X0(i,c,u)),rtl:$o(()=>E.some(X0(i,u,c)))}),exact:(c,u,f,p)=>({ltr:$o(()=>xf(i,c,u,f,p)),rtl:$o(()=>E.some(xf(i,f,p,c,u)))})})))})(e,r).match({ltr:n,rtl:n})})(ei.exact(i=a,0,i,0));var i});var s},r=>(t.execCommand("mceTableInsertRowAfter"),ex(t,e,r))),ex=(t,e,n)=>{return tx(t,e,(o=no,KC(r=n,void 0).fold(()=>Ol.none(r),s=>mp(s.all,r,s.index,1,o))));var r,o},OR=(t,e,n)=>{return tx(t,e,(o=no,KC(r=n,void 0).fold(()=>Ol.none(),s=>mp(s.all,r,s.index,-1,o))));var r,o},nx=(t,e)=>{const n=["table","li","dl"],r=O(t.getBody()),o=a=>{const i=Ee(a);return de(a,r)||Tt(n,i)},s=t.selection.getRng();return(a=O(e?s.endContainer:s.startContainer),i=o,((l,c,u=Ce)=>u(c)?E.none():Tt(l,Ee(c))?E.some(c):ms(c,l.join(","),f=>_e(f,"table")||u(f)))(["td","th"],a,i)).map(a=>(VC(a,o).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?ex:OR)(t,o,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},fo=(t,e)=>({container:t,offset:e}),kd=we.DOM,Ed=t=>e=>t===e?-1:0,pp=(t,e,n)=>{if(lt(t)&&e>=0)return E.some(fo(t,e));{const r=ea(kd);return E.from(r.backwards(t,e,Ed(t),n)).map(o=>fo(o.container,o.container.data.length))}},gp=(t,e,n)=>{if(!lt(t))return E.none();if(e>=0&&e<=t.data.length)return E.some(fo(t,e));{const o=ea(kd);return E.from(o.backwards(t,e,Ed(t),n)).bind(s=>gp(s.container,e+s.container.data.length,n))}},rx=(t,e,n)=>{if(!lt(t))return E.none();const r=t.data;if(e<=r.length)return E.some(fo(t,e));{const o=ea(kd);return E.from(o.forwards(t,e,Ed(t),n)).bind(s=>rx(s.container,e-r.length,n))}},hp=(t,e,n,r,o)=>{const s=ea(t,(a=t,i=>a.isBlock(i)||Tt(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i)));var a;return E.from(s.backwards(e,n,r,o))},ox=t=>Go(t.toString().replace(/\u00A0/g," ")),sx=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),bp=(t,e)=>t.substring(e.length),ax=(t,e,n,r=0)=>{return(o=O(e.startContainer),Ur(o,Sb)).fold(()=>((s,a,i,l=0)=>{if(!(c=a).collapsed||!lt(c.startContainer))return E.none();var c;const u={text:"",offset:0},f=s.getParent(a.startContainer,s.isBlock)||s.getRoot();return hp(s,a.startContainer,a.startOffset,(p,b,g)=>(u.text=g+u.text,u.offset+=b,((v,h,C)=>{let S;const k=C.charAt(0);for(S=h-1;S>=0;S--){const N=v.charAt(S);if(sx(N))return E.none();if(k===N&&ze(v,C,S,h))break}return E.some(S)})(u.text,u.offset,i).getOr(b)),f).bind(p=>{const b=a.cloneRange();if(b.setStart(p.container,p.offset),b.setEnd(a.endContainer,a.endOffset),b.collapsed)return E.none();const g=ox(b);return 0!==g.lastIndexOf(i)||bp(g,i).length<l?E.none():E.some({text:bp(g,i),range:b,trigger:i})})})(t,e,n,r),s=>{const a=t.createRng();a.selectNode(s.dom);const i=ox(a);return E.some({range:a,text:bp(i,n),trigger:n})});var o},ix=t=>{if(3===t.nodeType)return fo(t,t.data.length);{const e=t.childNodes;return e.length>0?ix(e[e.length-1]):fo(t,e.length)}},lx=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?lx(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?ix(n[n.length-1]):fo(t,e)},cx=(t,e,n,r={})=>{var o;const s=e(),a=null!==(o=t.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",i=$t(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>{return u=t.dom,f=>{const p=lx(f.startContainer,f.startOffset);return!((b,g)=>{var v;const h=null!==(v=b.getParent(g.container,b.isBlock))&&void 0!==v?v:b.getRoot();return hp(b,g.container,g.offset,(C,S)=>0===S?-1:S,h).filter(C=>{const S=C.container.data.charAt(C.offset-1);return!sx(S)}).isSome()})(u,p)};var u})(n.range,a,n.text));if(0===i.length)return E.none();const l=Promise.all(re(i,c=>c.fetch(n.text,c.maxResults,r).then(u=>({matchText:n.text,items:u,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return E.some({lookupData:l,context:n})};var Lo;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Lo||(Lo={}));const vp=(t,e,n)=>t.stype===Lo.Error?e(t.serror):n(t.svalue),ci=t=>({stype:Lo.Value,svalue:t}),Dl=t=>({stype:Lo.Error,serror:t}),DR=vp,yp=t=>Vt(t)&&Qe(t).length>100?" removed due to size":JSON.stringify(t,null,2),_d=(t,e)=>Dl([{path:t,getErrorInfo:e}]),dx=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const s in o)te(o,s)&&(n[s]=t(n[s],o[s]))}return n},Cp=dx((t,e)=>Pt(t)&&Pt(e)?Cp(t,e):e),ux=(dx((t,e)=>e),t=>({tag:"defaultedThunk",process:gt(t)})),fx=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},xp=t=>({extract:(e,n)=>{return(r=t(n)).stype===Lo.Error?_d(e,gt(r.serror)):r;var r},toString:gt("val")}),LR=xp(ci),mx=(t,e,n,r)=>r(ke(t,e).getOrThunk(()=>n(t))),MR=(t,e,n,r,o)=>{const s=i=>o.extract(e.concat([r]),i),a=i=>i.fold(()=>ci(E.none()),l=>{return(u=o.extract(e.concat([r]),l)).stype===Lo.Value?{stype:Lo.Value,svalue:(0,E.some)(u.svalue)}:u;var u});switch(t.tag){case"required":return i=e,u=s,ke(l=n,c=r).fold(()=>{return p=c,b=l,_d(i,()=>'Could not find valid *required* value for "'+p+'" in '+yp(b));var p,b},u);case"defaultedThunk":return mx(n,r,t.process,s);case"option":return((i,l,c)=>c(ke(i,l)))(n,r,a);case"defaultedOptionThunk":return((i,l,c,u)=>u(ke(i,l).map(f=>!0===f?c(i):f)))(n,r,t.process,a);case"mergeWithThunk":return mx(n,r,gt({}),i=>{const l=Cp(t.process(n),i);return s(l)})}var i,l,c,u},wp=t=>({extract:(e,n)=>((r,o,s)=>{const a={},i=[];for(const l of s)fx(l,(c,u,f,p)=>{const b=MR(f,r,o,c,p);DR(b,g=>{i.push(...g)},g=>{a[u]=g})},(c,u)=>{a[c]=u(o)});return i.length>0?Dl(i):ci(a)})(e,n,t),toString:()=>"obj{\n"+re(t,n=>fx(n,(r,o,s,a)=>r+" -> "+a.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),px=t=>({extract:(e,n)=>(t=>{const e=(r=>{const o=[],s=[];return rt(r,a=>{vp(a,i=>s.push(i),i=>o.push(i))}),{values:o,errors:s}})(t);return e.errors.length>0?(n=e.errors,ir(Dl,$l)(n)):ci(e.values);var n})(re(n,(o,s)=>t.extract(e.concat(["["+s+"]"]),o))),toString:()=>"array("+t.toString()+")"}),gx=(t,e)=>((t,e)=>({extract:(n,r)=>ke(r,t).fold(()=>{return s=t,_d(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},o=>{return s=n,a=r,ke(i=e,l=o).fold(()=>{return u=i,f=l,_d(s,()=>'The chosen schema: "'+f+'" did not exist in branches: '+yp(u));var u,f},c=>c.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Qe(e)}))(t,Ho(e,wp)),FR=gt(LR),Nd=(t,e)=>xp(n=>{const r=typeof n;return t(n)?ci(n):Dl(`Expected type: ${e} but got: ${r}`)}),jR=Nd(x,"number"),Ad=Nd(Dt,"string"),zR=Nd(Mn,"boolean"),Sp=Nd(pe,"function"),Bl=(t,e,n,r)=>({tag:"field",key:t,newKey:e,presence:n,prop:r}),hx=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),bx=(t,e)=>Bl(t,t,{tag:"required",process:{}},e),vx=t=>bx(t,Ad),yx=t=>bx(t,Sp),kp=(t,e)=>Bl(t,t,{tag:"option",process:{}},e),Rd=t=>kp(t,Ad),di=(t,e,n)=>Bl(t,t,ux(e),n),Cx=(t,e)=>di(t,e,jR),xx=(t,e,n)=>{return di(t,e,(r=n,o=s=>Tt(r,s)?tr.value(s):tr.error(`Unsupported value: "${s}", choose one of "${r.join(", ")}".`),xp(s=>o(s).fold(Dl,ci))));var r,o},Ep=(t,e)=>di(t,e,zR),_p=(t,e)=>di(t,e,Sp),HR=vx("type"),UR=yx("fetch"),Np=yx("onAction"),qR=_p("onSetup",()=>_t),$R=Rd("text"),WR=Rd("icon"),VR=Rd("tooltip"),KR=Rd("label"),XR=Ep("active",!1),GR=Ep("enabled",!0),wx=Ep("primary",!1),Pl=t=>di("type",t,Ad),YR=wp([HR,vx("trigger"),Cx("minChars",1),((t,e)=>Bl(t,t,ux(1),FR()))("columns"),Cx("maxResults",10),kp("matches",Sp),UR,Np,(Sx=Ad,di("highlightOn",[],px(Sx)))]);var Sx;const Ap=[GR,VR,WR,$R,qR],kx=[XR].concat(Ap),QR=[_p("predicate",Ce),xx("scope","node",["node","editor"]),xx("position","selection",["node","selection","line"])],JR=Ap.concat([Pl("contextformbutton"),wx,Np,hx("original",ue)]),ZR=kx.concat([Pl("contextformbutton"),wx,Np,hx("original",ue)]),tT=Ap.concat([Pl("contextformbutton")]),eT=kx.concat([Pl("contextformtogglebutton")]),nT=gx("type",{contextformbutton:JR,contextformtogglebutton:ZR});wp([Pl("contextform"),_p("initValue",gt("")),KR,((t,e)=>Bl(t,t,{tag:"required",process:{}},px(e)))("commands",nT),kp("launch",gx("type",{contextformbutton:tT,contextformtogglebutton:eT}))].concat(QR));const oT=t=>{const e=xs(),n=cn(!1),r=e.isSet,o=()=>{r()&&(Ue(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=$o(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Ho(e,s=>{return(a=s,((t,e,n)=>{return r=(i=e.extract([t],a=n)).stype===Lo.Error?{stype:Lo.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,vp(r,tr.error,tr.value);var a,i,r})("Autocompleter",YR,{trigger:a.ch,...a})).fold(i=>{throw new Error("Errors: \n"+(c=>{const u=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:gt("... (only showing first ten failures)")}]):c;return re(u,f=>"Failed path: ("+f.path.join(" > ")+")\n"+f.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+yp(l.input));var l},ue);var a}),r=Fn(os(n,s=>s.trigger)),o=qo(n);return{dataset:n,triggers:r,lookupByTrigger:s=>$t(o,a=>a.trigger===s)}})(t)),a=i=>{var l;(l=i,e.get().map(c=>ax(t.dom,t.selection.getRng(),c.trigger).bind(u=>cx(t,s,u,l))).getOrThunk(()=>((c,u)=>{const f=u(),p=c.selection.getRng();return(b=c.dom,g=p,v=f,Kn(v.triggers,h=>ax(b,g,h))).bind(b=>cx(c,u,b));var b,g,v})(t,s))).fold(o,l=>{var c,f;c=l.context,r()||(f=c.range,Ue(t).autocompleter.addDecoration(f),e.set({trigger:c.trigger,matchLength:c.text.length})),l.lookupData.then(c=>{e.get().map(u=>{const f=l.context;u.trigger===f.trigger&&(f.text.length-u.matchLength>=10?o():(e.set({...u,matchLength:f.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:c}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:c}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const c=Vt(l)?l.fetchOptions:{};a(c)}),t.addCommand("mceAutocompleterClose",o),((i,l)=>{const c=Mu(l.load,50);i.on("keypress compositionend",u=>{27!==u.which&&c.throttle()}),i.on("keydown",u=>{const f=u.which;8===f?c.throttle():27===f&&l.cancelIfNecessary()}),i.on("remove",c.cancel)})(t,{cancelIfNecessary:o,load:a})},Ex=t=>(e,n,r={})=>{const o=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:_t,inputType:n},a=Fg(new InputEvent(t));return e.dispatch(t,{...a,...s,...r})},Td=Ex("input"),Od=Ex("beforeinput"),ui=(t,e)=>{const n=t.dom,r=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(xt(a)||lt(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(ln),e.firstChild)}const o=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new en(e,e);let a,i=e;for(;a=s.current();){if(lt(a)){o.setStart(a,0),o.setEnd(a,0);break}if(r[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}i=a,a=s.next()}a||(o.setStart(i,0),o.setEnd(i,0))}else Ie(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)):(o.setStart(e,0),o.setEnd(e,0));t.selection.setRng(o),ml(t,o)},Dd=(t,e)=>{const n=t.getRoot();let r,o=e;for(;o!==n&&o&&"false"!==t.getContentEditable(o);)"true"===t.getContentEditable(o)&&(r=o),o=o.parentNode;return o!==n?r:n},Rp=t=>E.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),_x=(t,e)=>{const n=t?.parentNode;return mt(n)&&n.nodeName===e},Nx=t=>mt(t)&&/^(OL|UL|LI)$/.test(t.nodeName),Bd=t=>{const e=t.parentNode;return mt(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},Pd=(t,e,n)=>{let r=t[n?"firstChild":"lastChild"];for(;r&&!xt(r);)r=r[n?"nextSibling":"previousSibling"];return r===e},sT=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Tp=t=>{t.innerHTML='<br data-mce-bogus="1">'},Op=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Dp=(t,e)=>mt(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Bp=(t,e,n)=>lt(e)?t?1===n&&e.data.charAt(n-1)===Bn?0:n:n===e.data.length-1&&e.data.charAt(n)===Bn?e.data.length:n:n,Ll=(t,e)=>{er(t).toLowerCase()===e.tagName.toLowerCase()&&((n,r,o)=>{const s=n.dom;E.from(o.style).map(s.parseStyle).each(u=>{const f={...et(O(r)),...u};s.setStyles(r,f)});const a=E.from(o.class).map(u=>u.split(/\s+/)),i=E.from(r.className).map(u=>$t(u.split(/\s+/),f=>""!==f));pn(a,i,(u,f)=>{const p=$t(f,g=>!Tt(u,g)),b=[...u,...p];s.setAttrib(r,"class",b.join(" "))});const l=["style","class"],c=xr(o,(u,f)=>!Tt(l,f));s.setAttribs(r,c)})(t,e,Zi(t))},Ax={insert:(t,e)=>{let n,r,o,s,a=!1;const i=t.dom,l=t.schema,c=l.getNonEmptyElements(),u=t.selection.getRng(),f=er(t),p=u.collapsed&&u.startContainer===t.dom.getRoot(),b=O(u.startContainer),g=xn(b,u.startOffset),v=g.exists(L=>La(L)&&!no(L)),h=p&&v,C=L=>{let z=n;const I=l.getTextInlineElements();let $;$=L||"TABLE"===o||"HR"===o?i.create(L||f):P.cloneNode(!1);let pt=$;if(!1===$k(t))i.setAttrib($,"style",null),i.setAttrib($,"class",null);else do{if(I[z.nodeName]){if(Wr(z)||Ar(z))continue;const it=z.cloneNode(!1);i.setAttrib(it,"id",""),$.hasChildNodes()?(it.appendChild($.firstChild),$.appendChild(it)):(pt=it,$.appendChild(it))}}while((z=z.parentNode)&&z!==D);return Ll(t,$),Tp(pt),$},S=L=>{const z=Bp(L,n,r);if(lt(n)&&(L?z>0:z<n.data.length))return!1;if(n.parentNode===P&&a&&!L||L&&xt(n)&&n===P.firstChild)return!0;if(Op(n,"TABLE")||Op(n,"HR"))return a&&!L||!a&&L;const I=new en(n,P);let $;for(lt(n)&&(L&&0===z?I.prev():L||z!==n.data.length||I.next());$=I.current();){if(xt($)){if(!$.getAttribute("data-mce-bogus")){const pt=$.nodeName.toLowerCase();if(c[pt]&&"br"!==pt)return!1}}else if(lt($)&&!Gs($.data))return!1;L?I.prev():I.next()}return!0},k=()=>{let L;return L=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==U?C(f):C(),((z,I)=>{const $=Wk(z);return!ye(I)&&(Dt($)?Tt(dt.explode($),I.nodeName.toLowerCase()):$)})(t,s)&&Dp(i,s)&&i.isEmpty(P,void 0,{includeZwsp:!0})?L=i.split(s,P):i.insertAfter(L,P),ui(t,L),L};$c(i,u).each(L=>{u.setStart(L.startContainer,L.startOffset),u.setEnd(L.endContainer,L.endOffset)}),n=u.startContainer,r=u.startOffset;const N=!(!e||!e.shiftKey),R=!(!e||!e.ctrlKey);xt(n)&&n.hasChildNodes()&&!h&&(a=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=a&&lt(n)?n.data.length:0);const D=Dd(i,n);if(!D||((L,z)=>{const I=L.dom.getParent(z,"ol,ul,dl");return null!==I&&"false"===L.dom.getContentEditableParent(I)})(t,n))return;N||(n=((L,z,I,$,pt)=>{var it,Ot;const ht=L.dom,Kt=null!==(it=Dd(ht,$))&&void 0!==it?it:ht.getRoot();let Yt=ht.getParent($,ht.isBlock);if(!Yt||!Dp(ht,Yt)){if(Yt=Yt||Kt,!Yt.hasChildNodes()){const M=ht.create(z);return Ll(L,M),Yt.appendChild(M),I.setStart(M,0),I.setEnd(M,0),M}let yt,Rt=$;for(;Rt&&Rt.parentNode!==Yt;)Rt=Rt.parentNode;for(;Rt&&!ht.isBlock(Rt);)yt=Rt,Rt=Rt.previousSibling;const jt=null===(Ot=yt?.parentElement)||void 0===Ot?void 0:Ot.nodeName;if(yt&&jt&&L.schema.isValidChild(jt,z.toLowerCase())){const M=yt.parentNode,j=ht.create(z);for(Ll(L,j),M.insertBefore(j,yt),Rt=yt;Rt&&!ht.isBlock(Rt);){const Q=Rt.nextSibling;j.appendChild(Rt),Rt=Q}I.setStart($,pt),I.setEnd($,pt)}}return $})(t,f,u,n,r));let P=i.getParent(n,i.isBlock)||i.getRoot();s=mt(P?.parentNode)?i.getParent(P.parentNode,i.isBlock):null,o=P?P.nodeName.toUpperCase():"";const U=s?s.nodeName.toUpperCase():"";if("LI"!==U||R||(P=s,s=s.parentNode,o=U),xt(s)&&(L=t,I=P,!N&&I.nodeName.toLowerCase()===er(L)&&L.dom.isEmpty(I)&&(($,pt,it)=>{let Ot=pt;for(;Ot&&Ot!==$&&Qt(Ot.nextSibling);){const Kt=Ot.parentElement;if(!Kt||(ht=Kt,!te(L.schema.getTextBlockElements(),ht.nodeName.toLowerCase())))return mg(Kt);Ot=Kt}var ht;return!1})(L.getBody(),I)))return((L,z,I)=>{var $,pt,it;const Ot=z(er(L)),ht=L.dom.getParent(I,mg);ht&&(L.dom.insertAfter(Ot,ht),ui(L,Ot),(null!==(it=null===(pt=null===($=I.parentElement)||void 0===$?void 0:$.childNodes)||void 0===pt?void 0:pt.length)&&void 0!==it?it:0)>1&&L.dom.remove(I))})(t,C,P);var L,I;if(/^(LI|DT|DD)$/.test(o)&&xt(s)&&i.isEmpty(P))return void((L,z,I,$,pt)=>{const it=L.dom,Ot=L.selection.getRng(),ht=I.parentNode;if(I===L.getBody()||!ht)return;var Kt;Nx(Kt=I)&&Nx(Kt.parentNode)&&(pt="LI");let Yt=z(pt);if(Pd(I,$,!0)&&Pd(I,$,!1))if(_x(I,"LI")){const yt=Bd(I);it.insertAfter(Yt,yt),(null===(jt=(Rt=I).parentNode)||void 0===jt?void 0:jt.firstChild)===Rt?it.remove(yt):it.remove(I)}else it.replace(Yt,I);else if(Pd(I,$,!0))_x(I,"LI")?(it.insertAfter(Yt,Bd(I)),Yt.appendChild(it.doc.createTextNode(" ")),Yt.appendChild(I)):ht.insertBefore(Yt,I),it.remove($);else if(Pd(I,$,!1))it.insertAfter(Yt,Bd(I)),it.remove($);else{I=Bd(I);const yt=Ot.cloneRange();yt.setStartAfter($),yt.setEndAfter(I);const Rt=yt.extractContents();"LI"===pt&&((jt,M)=>jt.firstChild&&"LI"===jt.firstChild.nodeName)(Rt)?(Yt=Rt.firstChild,it.insertAfter(Rt,I)):(it.insertAfter(Rt,I),it.insertAfter(Yt,I)),it.remove($)}var Rt,jt;ui(L,Yt)})(t,C,s,P,f);if(!(h||P!==t.getBody()&&Dp(i,P)))return;const Y=P.parentNode;let V;if(h)V=C(f),g.fold(()=>{Nt(b,O(V))},L=>{at(L,O(V))}),t.selection.setCursorLocation(V,0);else if(Ua(P))V=bu(P),i.isEmpty(P)&&Tp(P),Ll(t,V),ui(t,V);else if(S(!1))V=k();else if(S(!0)&&Y){V=Y.insertBefore(C(),P);const L=O(u.startContainer).dom.hasChildNodes()&&u.collapsed;ui(t,Op(P,"HR")||L?V:P)}else{const L=(I=>{const $=I.cloneRange();return $.setStart(I.startContainer,Bp(!0,I.startContainer,I.startOffset)),$.setEnd(I.endContainer,Bp(!1,I.endContainer,I.endOffset)),$})(u).cloneRange();L.setEndAfter(P);const z=L.extractContents();(I=>{rt(sc(O(I),Yn),$=>{const pt=$.dom;pt.nodeValue=Go(pt.data)})})(z),(I=>{let $=I;do{lt($)&&($.data=$.data.replace(/^[\r\n]+/,"")),$=$.firstChild}while($)})(z),V=z.firstChild,i.insertAfter(z,P),((I,$,pt)=>{var it;const Ot=[];if(!pt)return;let ht=pt;for(;ht=ht.firstChild;){if(I.isBlock(ht))return;xt(ht)&&!$[ht.nodeName.toLowerCase()]&&Ot.push(ht)}let Kt=Ot.length;for(;Kt--;)ht=Ot[Kt],(!ht.hasChildNodes()||ht.firstChild===ht.lastChild&&""===(null===(it=ht.firstChild)||void 0===it?void 0:it.nodeValue)||sT(I,ht))&&I.remove(ht)})(i,c,V),((I,$)=>{$.normalize();const pt=$.lastChild;(!pt||xt(pt)&&/^(left|right)$/gi.test(I.getStyle(pt,"float",!0)))&&I.add($,"br")})(i,P),i.isEmpty(P)&&Tp(P),V.normalize(),i.isEmpty(V)?(i.remove(V),k()):(Ll(t,V),ui(t,V))}i.setAttrib(V,"id",""),t.dispatch("NewBlock",{newBlock:V})},fakeEventName:"insertParagraph"},Rx=(t,e,n)=>{const r=t.dom.createRng();n?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)),t.selection.setRng(r),ml(t,r)},aT=(t,e)=>{const n=X("br");at(O(e),n),t.undoManager.add()},iT=(t,e)=>{lT(t.getBody(),e)||Bt(O(e),X("br"));const n=X("br");Bt(O(e),n),Rx(t,n.dom,!1),t.undoManager.add()},lT=(t,e)=>{return n=G.after(e),!!Ie(n.getNode())||Un(t,G.after(e)).map(r=>Ie(r.getNode())).getOr(!1);var n},Tx=t=>t&&"A"===t.nodeName&&"href"in t,cT=t=>t.fold(Ce,Tx,Tx,Ce),dT=(t,e)=>{e.fold(_t,kt(aT,t),kt(iT,t),_t)},Ox={insert:(t,e)=>{const n=(r=>{const o=kt(ma,r),s=G.fromRangeStart(r.selection.getRng());return Bo(o,r.getBody(),s).filter(cT)})(t);n.isSome()?n.each(kt(dT,t)):((r,o)=>{const a=r.dom,i=r.selection.getRng();let l,c=!1;$c(a,i).each(h=>{i.setStart(h.startContainer,h.startOffset),i.setEnd(h.endContainer,h.endOffset)});let u=i.startOffset,f=i.startContainer;if(xt(f)&&f.hasChildNodes()){const h=u>f.childNodes.length-1;f=f.childNodes[Math.min(u,f.childNodes.length-1)]||f,u=h&&lt(f)?f.data.length:0}let p=a.getParent(f,a.isBlock);const b=p&&p.parentNode?a.getParent(p.parentNode,a.isBlock):null;"LI"!==(b?b.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(p=b),lt(f)&&u>=f.data.length&&(((h,C,S)=>{const k=new en(C,S);let N;const R=h.getNonEmptyElements();for(;N=k.next();)if(R[N.nodeName.toLowerCase()]||lt(N)&&N.length>0)return!0;return!1})(r.schema,f,p||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=a.create("br"),Hu(a,i,l),Rx(r,l,c),r.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},Dx=(t,e)=>Rp(t).filter(n=>e.length>0&&_e(O(n),e)).isSome(),hr=Eo([{br:[]},{block:[]},{none:[]}]),uT=(t,e)=>{return Dx(n=t,qk(n));var n},Bx=t=>(e,n)=>Rp(e).filter(o=>ji(O(o))).isSome()===t,Px=(t,e)=>(n,r)=>Rp(n).fold(gt(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,fT=t=>{const e=Dd(t.dom,t.selection.getStart());return ye(e)},Ml=t=>Px("pre",t),Ld=t=>(e,n)=>zk(e)===t,mT=(t,e)=>{return Dx(n=t,Uk(n));var n},Md=(t,e)=>e,pT=t=>{const e=er(t),n=Dd(t.dom,t.selection.getStart());return mt(n)&&t.schema.isValidChild(n.nodeName,e)},gT=t=>{const e=t.selection.getRng(),n=e.collapsed&&e.startContainer===t.dom.getRoot(),r=O(e.startContainer),o=xn(r,e.startOffset).map(s=>La(s)&&!no(s));return n&&o.getOr(!0)},Pr=(t,e)=>(n,r)=>vn(t,(o,s)=>o&&s(n,r),!0)?E.some(e):E.none(),Id=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),mt(n)&&Od(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),mt(n)&&Td(e,t.fakeEventName))},Lx=(t,e)=>{const n=()=>Id(Ox,t,e),r=()=>Id(Ax,t,e),o=(s=t,a=e,U1([Pr([uT],hr.none()),Pr([Ml(!0),fT],hr.none()),Pr([Px("summary",!0)],hr.br()),Pr([Ml(!0),Ld(!1),Md],hr.br()),Pr([Ml(!0),Ld(!1)],hr.block()),Pr([Ml(!0),Ld(!0),Md],hr.block()),Pr([Ml(!0),Ld(!0)],hr.br()),Pr([Bx(!0),Md],hr.br()),Pr([Bx(!0)],hr.block()),Pr([mT],hr.br()),Pr([Md],hr.br()),Pr([pT],hr.block()),Pr([gT],hr.block())],[s,!(!a||!a.shiftKey)]).getOr(hr.none()));var s,a;switch(Hk(t)){case"linebreak":o.fold(n,n,_t);break;case"block":o.fold(r,r,_t);break;case"invert":o.fold(r,n,_t);break;default:o.fold(n,r,_t)}},Mx=An(),hT=Mx.os.isiOS()&&Mx.browser.isSafari(),Ix=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{Lx(t,e)}))},bT=An(),Fx=t=>t.stopImmediatePropagation(),jx=t=>t.keyCode===St.PAGE_UP||t.keyCode===St.PAGE_DOWN,zx=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",Fx,!0):!n&&t.get()&&e.off("NodeChange",Fx),t.set(n)},Hx=(t,e)=>{const n=e.container(),r=e.offset();return lt(n)?(n.insertData(r,t),E.some(G(n,r+t.length))):Oc(e).map(o=>{const s=ut(t);return e.isAtEnd()?Bt(o,s):at(o,s),G(s.dom,t.length)})},Ux=kt(Hx,ln),qx=kt(Hx," "),$x=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},vT=t=>{const e=G.fromRangeStart(t.selection.getRng()),n=O(t.getBody());if(t.selection.isCollapsed()){const r=kt(ma,t),o=G.fromRangeStart(t.selection.getRng());return Bo(r,t.getBody(),o).bind((s=n,a=>a.fold(i=>nr(s.dom,G.before(i)),i=>qn(i),i=>$r(i),i=>Un(s.dom,G.after(i))))).map(s=>()=>{return(a=n,i=e,l=>Gb(a,l)?Ux(i):qx(i))(s).each($x(t));var a,i})}var s;return E.none()},yT=t=>{return cs(fe.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const r=O(t.getBody());var o,s;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(o=r,s=G.fromRangeStart(t.selection.getRng()),Gb(o,s)?Ux(s):qx(s)).each($x(t))});var e,n},CT=t=>QE(t)?[{keyCode:St.TAB,action:Jt(nx,t,!0)},{keyCode:St.TAB,shiftKey:!0,action:Jt(nx,t,!1)}]:[],xT=t=>{if(t.addShortcut("Meta+P","","mcePrint"),oT(t),Do(t))return cn(null);{const e=(t=>{const e=cn(null),n=kt(ma,t);return t.on("NodeChange",r=>{tl(t)&&(((o,s,a)=>{const i=re(Dn(O(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),u=>u.dom),l=$t(i,o),c=$t(a,o);rt(Gt(l,c),kt(lC,!1)),rt(Gt(c,l),kt(lC,!0))})(n,t.dom,r.parents),((o,s)=>{const a=s.get();if(o.selection.isCollapsed()&&!o.composing&&a){const i=G.fromRangeStart(o.selection.getRng());G.isTextPosition(i)&&!gu(l=i)&&!hu(l)&&(xd(o,((t,e)=>{return G.isTextPosition(e)?(r=e,$h(n=t)&&r.container()===n?((o,s)=>{const a=Vh(o.data.substr(0,s.offset())),i=Vh(o.data.substr(s.offset()));return(a.text+i.text).length>0?(Kh(o),G(o,s.offset()-a.count)):s})(n,r):Xh(n,r)):((n,r)=>r.container()===n.parentNode?((o,s)=>{const a=s.container(),i=((l,c)=>{const u=ie(l,c);return-1===u?E.none():E.some(u)})(Ye(a.childNodes),o).map(l=>l<s.offset()?G(a,s.offset()-1):s).getOr(s);return oa(o),i})(n,r):Xh(n,r))(t,e);var n,r})(a,i)),s.set(null))}var l})(t,e),((o,s,a,i)=>{if(s.selection.isCollapsed()){const l=$t(i,o);rt(l,c=>{const u=G.fromRangeStart(s.selection.getRng());Bo(o,s.getBody(),u).bind(f=>cC(s,a,f))})}})(n,t,e,r.parents))}),e})(t);return(n=t).on("keyup compositionstart",kt(wR,n)),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=fe.os.isMacOS()||fe.os.isiOS();Tl([{keyCode:St.RIGHT,action:Jt(PC,s,!0)},{keyCode:St.LEFT,action:Jt(PC,s,!1)},{keyCode:St.UP,action:Jt(LC,s,!1)},{keyCode:St.DOWN,action:Jt(LC,s,!0)},...l?[{keyCode:St.UP,action:Jt(Sd,s,!1),metaKey:!0,shiftKey:!0},{keyCode:St.DOWN,action:Jt(Sd,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:St.RIGHT,action:Jt(JC,s,!0)},{keyCode:St.LEFT,action:Jt(JC,s,!1)},{keyCode:St.UP,action:Jt(ZC,s,!1)},{keyCode:St.DOWN,action:Jt(ZC,s,!0)},{keyCode:St.RIGHT,action:Jt(HC,s,!0)},{keyCode:St.LEFT,action:Jt(HC,s,!1)},{keyCode:St.UP,action:Jt(UC,s,!1)},{keyCode:St.DOWN,action:Jt(UC,s,!0)},{keyCode:St.RIGHT,action:Jt(dC,s,a,!0)},{keyCode:St.LEFT,action:Jt(dC,s,a,!1)},{keyCode:St.RIGHT,ctrlKey:!l,altKey:l,action:Jt(uR,s,a)},{keyCode:St.LEFT,ctrlKey:!l,altKey:l,action:Jt(fR,s,a)},{keyCode:St.UP,action:Jt(IC,s,!1)},{keyCode:St.DOWN,action:Jt(IC,s,!0)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{let o=!1;n.on("keydown",s=>{o=s.keyCode===St.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const c=l.keyCode===St.BACKSPACE?"deleteContentBackward":"deleteContentForward";zC([{keyCode:St.BACKSPACE,action:Jt(EC,a)},{keyCode:St.BACKSPACE,action:Jt(Jm,a,!1)},{keyCode:St.DELETE,action:Jt(Jm,a,!0)},{keyCode:St.BACKSPACE,action:Jt(Gm,a,!1)},{keyCode:St.DELETE,action:Jt(Gm,a,!0)},{keyCode:St.BACKSPACE,action:Jt(ip,a,i,!1)},{keyCode:St.DELETE,action:Jt(ip,a,i,!0)},{keyCode:St.BACKSPACE,action:Jt(rm,a,!1)},{keyCode:St.DELETE,action:Jt(rm,a,!0)},{keyCode:St.BACKSPACE,action:Jt(Zm,a,!1)},{keyCode:St.DELETE,action:Jt(Zm,a,!0)},{keyCode:St.BACKSPACE,action:Jt(dp,a,!1)},{keyCode:St.DELETE,action:Jt(dp,a,!0)},{keyCode:St.BACKSPACE,action:Jt(Km,a,!1)},{keyCode:St.DELETE,action:Jt(Km,a,!0)},{keyCode:St.BACKSPACE,action:Jt(Vm,a,!1)},{keyCode:St.DELETE,action:Jt(Vm,a,!0)},{keyCode:St.BACKSPACE,action:Jt(lp,a,!1)},{keyCode:St.DELETE,action:Jt(lp,a,!0)}],l).filter(u=>a.selection.isEditable()).each(u=>{l.preventDefault(),Od(a,c).isDefaultPrevented()||(u(),Td(a,c))})})(n,r,s)}),n.on("keyup",s=>{s.isDefaultPrevented()||((a,i,l)=>{const c=An(),u=c.os,f=c.browser,p=u.isMacOS()?[{keyCode:St.BACKSPACE,altKey:!0,action:Jt(Rl,a)},{keyCode:St.DELETE,altKey:!0,action:Jt(Rl,a)}]:[{keyCode:St.BACKSPACE,ctrlKey:!0,action:Jt(Rl,a)},{keyCode:St.DELETE,ctrlKey:!0,action:Jt(Rl,a)}];u.isMacOS()&&l&&p.push({keyCode:f.isFirefox()?224:91,action:Jt(Rl,a)}),Tl([{keyCode:St.BACKSPACE,action:Jt(M1,a)},{keyCode:St.DELETE,action:Jt(M1,a)},...p],i)})(n,s,o),o=!1})})(t,e),(n=>{let r=E.none();n.on("keydown",o=>{var s;o.keyCode===St.ENTER&&(hT&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(lt(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(r=E.some((s=n).selection.getBookmark()),s.undoManager.add()):Ix(n,o))}),n.on("keyup",o=>{o.keyCode===St.ENTER&&r.each(()=>{return a=o,(s=n).undoManager.undo(),r.fold(_t,i=>s.selection.moveToBookmark(i)),Ix(s,a),void(r=E.none());var s,a})})})(t),(n=>{n.on("keydown",r=>{var o,s;r.isDefaultPrevented()||(s=r,zC([{keyCode:St.SPACEBAR,action:Jt(vT,o=n)},{keyCode:St.SPACEBAR,action:Jt(yT,o)}],s).each(a=>{s.preventDefault(),Od(o,"insertText",{data:" "}).isDefaultPrevented()||(a(),Td(o,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",r=>{r.isComposing||(o=>{const s=O(o.getBody());o.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!lt(n))return E.none();if((r=>{const o=r.container();return lt(o)&&ze(o.data,ln)})(e)){const r=Jb(t,n,!1)||(o=>{const s=o.data,a=(i=>{const l=i.split("");return re(l,(c,u)=>Lc(c)&&u>0&&u<l.length-1&&sf(l[u-1])&&sf(l[u+1])?" ":c).join("")})(s);return a!==s&&(o.data=a,!0)})(n)||Zb(t,n,!1);return cs(r,e)}if(Wf(t,e)){const r=Jb(t,n,!0)||Zb(t,n,!0);return cs(r,e)}return E.none()})(s,G.fromRangeStart(o.selection.getRng())).each(a=>{o.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",r=>{var s;r.isDefaultPrevented()||(s=r,Tl([...CT(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((s,a,i)=>{const l=fe.os.isMacOS()||fe.os.isiOS();Tl([{keyCode:St.END,action:Jt(MC,s,!0)},{keyCode:St.HOME,action:Jt(MC,s,!1)},...l?[]:[{keyCode:St.HOME,action:Jt(Sd,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:St.END,action:Jt(Sd,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:St.END,action:Jt(qC,s,!0)},{keyCode:St.HOME,action:Jt(qC,s,!1)},{keyCode:St.END,action:Jt(wd,s,!0,a)},{keyCode:St.HOME,action:Jt(wd,s,!1,a)}],i).each(c=>{i.preventDefault()})})(n,r,o)})})(t,e),((n,r)=>{if(bT.os.isMacOS())return;const o=cn(!1);n.on("keydown",s=>{jx(s)&&zx(o,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,Tl([{keyCode:St.PAGE_UP,action:Jt(wd,a=n,!1,i=r)},{keyCode:St.PAGE_DOWN,action:Jt(wd,a,!0,i)}],l)),jx(s)&&o.get()&&(zx(o,n,!1),n.nodeChanged())})})(t,e),e}var n};class wT{constructor(e){let n;this.lastPath=[],this.editor=e;const r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",o=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==o.type&&kf(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const o=e.selection.getStart(!0);o&&Ic(e)&&!r.isSameElementPath(o)&&e.dom.isChildOf(o,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",o=>{!o.isDefaultPrevented()&&Ic(e)&&("IMG"===e.selection.getNode().nodeName?Tr.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!CE(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const s=[];this.editor.dom.getParent(r,a=>a===o||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:r,parents:s})}}isSameElementPath(e){let n;const r=this.editor,o=Xr(r.dom.getParents(e,Be,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const Wx=Xi("image"),Pp=Xi("event"),Fd=t=>e=>{e[Pp]=t},Vx=Fd(0),ST=Fd(2),kT=Fd(1),Lp=Xi("mode"),jd=t=>e=>{e[Lp]=t},Kx=(t,e)=>jd(e)(t),Xx=jd(0),Mp=jd(2),_T=jd(1),Gx=t=>e=>E.from(e[Lp]).exists(r=>r===t),fi=Gx(0),Yx=Gx(1),NT=["none","copy","link","move"],AT=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Ip=()=>{const t=new window.DataTransfer;let e="move",n="all";const r={get dropEffect(){return e},set dropEffect(o){Tt(NT,o)&&(e=o)},get effectAllowed(){return n},set effectAllowed(o){(t=>E.from(t[Pp]).exists(n=>0===n))(r)&&Tt(AT,o)&&(n=o)},get items(){return o=r,s=t.items,{...s,get length(){return s.length},add:(a,i)=>{if(fi(o)){if(!Dt(a))return s.add(a);if(!De(i))return s.add(a,i)}return null},remove:a=>{fi(o)&&s.remove(a)},clear:()=>{fi(o)&&s.clear()}};var o,s},get files(){return Yx(r)?Object.freeze({length:0,item:o=>null}):t.files},get types(){return t.types},setDragImage:(o,s,a)=>{fi(r)&&(r[Wx]={image:o,x:s,y:a},t.setDragImage(o,s,a))},getData:o=>Yx(r)?"":t.getData(o),setData:(o,s)=>{fi(r)&&t.setData(o,s)},clearData:o=>{fi(r)&&t.clearData(o)}};return Xx(r),r},Qx=(t,e)=>t.setData("text/html",e),Jx="x-tinymce/html",zd=gt(Jx),Fp="\x3c!-- "+Jx+" --\x3e",RT=t=>Fp+t,Zx=t=>-1!==t.indexOf(Fp),tw="%MCEPASTEBIN%",jp=t=>t.dom.get("mcepastebin"),TT=t=>mt(t)&&"mcepastebin"===t.id,ew=t=>t===tw,nw=(t,e)=>(dt.each(e,n=>{t=Cr(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),rw=t=>nw(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,r)=>n||r?ln:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),ow=(t,e)=>({content:t,cancelled:e}),zp=(t,e)=>(t.insertContent(e,{merge:jE(t),paste:!0}),!0),Hp=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),OT=(t,e,n)=>{return!(t.selection.isCollapsed()||!Hp(e)||(r=t,o=e,s=n,r.undoManager.extra(()=>{s(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,s},DT=(t,e,n)=>{return r=t,!(!Hp(o=e)||!Ae(qh(r),s=>js(o.toLowerCase(),`.${s.toLowerCase()}`)))&&((r,o,s)=>(r.undoManager.extra(()=>{s(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(t,e,n);var r,o},BT=(t=>{let e=0;return()=>"mceclip"+e++})(),PT=t=>{const e=Ip();return Qx(e,t),Mp(e),e},sw=(t,e,n,r,o)=>{const s=((c,u,f)=>{const p=c.dispatch("PastePreProcess",{content:u,internal:f}),b=((g,v)=>{const h=oi({sanitize:Yu(g)},g.schema);h.addNodeFilter("meta",S=>{dt.each(S,k=>{k.remove()})});const C=h.parse(v,{forced_root_block:!1,isRootContent:!0});return _s({validate:!0},g.schema).serialize(C)})(c,p.content);return c.hasEventListeners("PastePostProcess")&&!p.isDefaultPrevented()?((g,v,h)=>{const C=g.dom.create("div",{style:"display:none"},v),S=g.dispatch("PastePostProcess",{node:C,internal:h});return ow(S.node.innerHTML,S.isDefaultPrevented())})(c,b,f):ow(b,p.isDefaultPrevented())})(t,e,n);if(!s.cancelled){const a=s.content,i=()=>{return l=t,c=a,void(r||!zE(l)?zp(l,c):(f=l,p=c,dt.each([OT,DT,zp],b=>!b(f,p,zp))));var l,c,f,p};o?Od(t,"insertFromPaste",{dataTransfer:PT(a)}).isDefaultPrevented()||(i(),Td(t,"insertFromPaste")):i()}},Hd=(t,e,n,r)=>{const o=n||Zx(e);sw(t,e.replace(Fp,""),o,!1,r)},Up=(t,e,n)=>{const r=t.dom.encode(e).replace(/\r\n/g,"\n"),o=((s,a,i)=>{const l=s.split(/\n\n/),c=((p,b)=>{let g="<"+p;const v=os(b,(h,C)=>C+'="'+ys.encodeAllRaw(h)+'"');return v.length&&(g+=" "+v.join(" ")),g+">"})(a,i),u="</"+a+">",f=re(l,p=>p.split(/\n/).join("<br />"));return 1===f.length?f[0]:re(f,p=>c+p+u).join("")})(wg(r,UE(t)),er(t),Zi(t));sw(t,o,!1,!0,n)},aw=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const r=t.types[n];try{e[r]=t.getData(r)}catch{e[r]=""}}return e},Ds=(t,e)=>e in t&&t[e].length>0,iw=t=>Ds(t,"text/html")||Ds(t,"text/plain"),lw=(t,e,n)=>{const r="paste"===e.type?e.clipboardData:e.dataTransfer;var o;if(Rc(t)&&r){const s=((a,i)=>{const l=i.items?rn(Ye(i.items),u=>"file"===u.kind?[u.getAsFile()]:[]):[],c=i.files?Ye(i.files):[];return $t(l.length>0?l:c,(u=>{const f=qh(u);return p=>Je(p.type,"image/")&&Ae(f,b=>(g=>{const v=g.toLowerCase(),h={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return dt.hasOwn(h,v)?"image/"+h[v]:"image/"+v})(b)===p.type)})(a))})(t,r);if(s.length>0)return e.preventDefault(),(o=s,Promise.all(re(o,a=>vy(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),rt(a,i=>{var l,c;l=t,km((c=i).uri).each(({data:u,type:f,base64Encoded:p})=>{const b=p?u:btoa(u),g=c.file,v=l.editorUpload.blobCache,C=v.getByData(b,f)??((S,k,N,R)=>{const D=BT(),P=Dh(S)&&mt(N.name),U=P?((L,z)=>{const I=z.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return mt(I)?L.dom.encode(I[1]):void 0})(S,N.name):D,V=k.create(D,N,R,U,P?N.name:void 0);return k.add(V),V})(l,v,g,b);Hd(l,`<img src="${C.blobUri()}">`,!1,!0)})})}),!0}return!1},qp=(t,e,n,r,o)=>{let s=rw(n);const a=Ds(e,zd())||Zx(n),i=!a&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=Hp(s);(ew(s)||!s.length||i&&!l)&&(r=!0),(r||l)&&(s=Ds(e,"text/plain")&&i?e["text/plain"]:(c=>{const u=Cs(),f=oi({},u);let p="";const b=u.getVoidElements(),g=dt.makeMap("script noscript style textarea video audio iframe object"," "),v=u.getBlockElements(),h=C=>{const S=C.name,k=C;if("br"!==S){if("wbr"!==S)if(b[S]&&(p+=" "),g[S])p+=" ";else{if(3===C.type&&(p+=C.value),!(C.name in u.getVoidElements())){let N=C.firstChild;if(N)do{h(N)}while(N=N.next)}v[S]&&k.next&&(p+="\n","p"===S&&(p+="\n"))}}else p+="\n"};return c=nw(c,[/<!\[[^\]]+\]>/g]),h(f.parse(c)),p})(s)),ew(s)||(r?Up(t,s,o):Hd(t,s,a,o))},cw=(t,e,n,r)=>{((o,s,a)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",s),o.setData("text/plain",a),o.setData(zd(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),r()):n(e.html,r)},dw=t=>(e,n)=>{const{dom:r,selection:o}=t,s=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},e);r.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),r.add(t.getBody(),s);const i=o.getRng();a.focus();const l=r.createRng();l.selectNodeContents(a),o.setRng(l),Tr.setEditorTimeout(t,()=>{o.setRng(i),r.remove(s),n()},0)},uw=t=>({html:RT(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),fw=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},mw=(t,e)=>{var n,r;return da.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(r=e.clientY)&&void 0!==r?r:0,t.getDoc())},pw=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},MT=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,gw=t=>dt.trim(t).replace(MT,Mc).toLowerCase(),IT=(t,e,n)=>{const r=IE(t);if(n||"all"===r||!FE(t))return e;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,u)=>{const f=s.parseStyle(s.decode(c)),p={};for(let g=0;g<o.length;g++){const v=f[o[g]];let h=v,C=s.getStyle(a,o[g],!0);/color/.test(o[g])&&(h=gw(h),C=gw(C)),C!==h&&(p[o[g]]=v)}const b=s.serializeStyle(p,"span");return b?l+' style="'+b+'"'+u:l+u})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},hw=t=>bs(O(t)),bw=(t,e)=>{const n=e.getNode();De(n)||t.selection.setCursorLocation(n,e.offset())},vw=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},yw=An(),Cw=yw.os,zT=yw.browser.isSafari(),xw=Cw.isMacOS()||Cw.isiOS(),$p=(t,e)=>mt(t.getParent(e.container(),"details")),ww=(t,e)=>{const n=t.dom.getParent(e.container(),"details");if(n&&!n.open){const r=t.dom.select("summary",n)[0];r&&$r(r).each(o=>bw(t,o))}else bw(t,e)},qT=Ie,Sw=lt,$T=t=>Re(t.dom),kw=t=>e=>de(O(t),e),Ew=(t,e)=>Qn(O(t),$T,kw(e)),_w=(t,e,n)=>{const r=new en(t,e),o=n?r.next.bind(r):r.prev.bind(r);let s=t;for(let a=n?t:o();a&&!qT(a);a=o())qr(a)&&(s=a);return s};var mi;!function(t){t.Before="before",t.After="after"}(mi||(mi={}));const VT=(t,e)=>Math.abs(t.left-e),KT=(t,e)=>Math.abs(t.right-e),GT=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),Wp=(t,e,n)=>{const r=c=>qr(c.node)?E.some(c):xt(c.node)?Wp(Ye(c.node.childNodes),e,n):E.none(),o=(c,u)=>{const f=zo(c,(p,b)=>u(p,e,n)-u(b,e,n));return((p,b)=>{if(p.length>=2){const g=r(p[0]).getOr(p[0]),v=r(p[1]).getOr(p[1]);if(Math.abs(b(g,e,n)-b(v,e,n))<2){if(lt(g.node))return E.some(g);if(lt(v.node))return E.some(v)}}return E.none()})(f,u).orThunk(()=>Kn(f,r))},[s,a]=((t,e)=>{return(n=$t(t,n=>{return(r=e)>=(o=n).top&&r<=o.bottom;var r,o}),vn(n,(r,o)=>r.fold(()=>E.some(o),s=>{const a=Math.min(o.left,s.left),i=Math.min(o.top,s.top),l=Math.max(o.right,s.right),c=Math.max(o.bottom,s.bottom);return E.some({top:i,right:l,bottom:c,left:a,width:l-a,height:c-i})}),E.none())).fold(()=>[[],t],n=>{const{pass:r,fail:o}=Kr(t,s=>((a,i)=>{const l=(c=a,u=i,Math.max(0,Math.min(c.bottom,u.bottom)-Math.max(c.top,u.top))/Math.min(a.height,i.height));var c,u;return((c,u)=>c.top<u.bottom&&c.bottom>u.top)(a,i)&&l>.5})(s,n));return[r,o]});var n})(eC(t),n),{pass:i,fail:l}=Kr(a,c=>c.top<n);return o(s,GT).orThunk(()=>o(l,eh)).orThunk(()=>o(i,eh))},Nw=(t,e,n)=>((r,o,s)=>{const a=O(r),l=((t,e,n)=>E.from(t.dom.elementFromPoint(e,n)).map(tt))(zn(a),o,s).filter(c=>gn(a,c)).getOr(a);return((c,u,f,p)=>{const b=(g,v)=>{const h=$t(g.dom.childNodes,Fo(C=>xt(C)&&C.classList.contains("mce-drag-container")));return v.fold(()=>Wp(h,f,p),C=>{const S=$t(h,k=>k!==C.dom);return Wp(S,f,p)}).orThunk(()=>(de(g,c)?E.none():Ko(g)).bind(C=>b(C,E.some(g))))};return b(u,E.none())})(a,l,o,s)})(t,e,n).filter(r=>nl(r.node)).map(r=>{return{node:(o=r).node,position:VT(o,s=e)<KT(o,s)?mi.Before:mi.After};var o,s}),Aw=t=>{var e,n;const r=t.getBoundingClientRect(),o=t.ownerDocument,s=o.documentElement,a=o.defaultView;return{top:r.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:r.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},Rw=t=>({target:t,srcElement:t}),Tw=Re,QT=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(Tw,so),JT=(t,e,n,r)=>{const o=t.dom,s=e.cloneNode(!0);o.setStyles(s,{width:n,height:r}),o.setAttrib(s,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},Ud=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},Ow=Ud("left",-32),Dw=Ud("left",32),Bw=Ud("top",-32),Pw=Ud("top",32),Lw=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Il=(t,e,n,r,o)=>{"dragstart"===e&&Qx(r,t.dom.getOuterHTML(n));const s=((t,e,n,r)=>{const o=((s,a)=>{const i=(l=>{const c=Ip(),u=E.from(l[Lp]);return Mp(l),Vx(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(f=l,E.from(f[Wx])).each(f=>c.setDragImage(f.image,f.x,f.y)),rt(l.types,f=>{"Files"!==f&&c.setData(f,l.getData(f))}),rt(l.files,f=>c.items.add(f)),(f=>E.from(f[Pp]))(l).each(f=>{var p;p=c,Fd(f)(p)}),u.each(f=>{Kx(l,f),Kx(c,f)}),c;var f})(s);return"dragstart"===a?(Vx(i),Xx(i)):"drop"===a?(ST(i),Mp(i)):(kT(i),_T(i)),i})(n,t);return De(r)?((s,a,i)=>{const l=fr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:_t,stopImmediatePropagation:_t,stopPropagation:_t,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...Rw(a)}})(t,e,o):(s=t,a=r,i=e,l=o,{...a,dataTransfer:l,type:s,...Rw(i)});var s,a,i,l})(e,n,r,o);return t.dispatch(e,s)},Mw=(t,e,n)=>{t.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>Il(e,"dragend",r.element,r.dataTransfer),o=>Il(e,"dragend",r.element,r.dataTransfer,o))}),Iw(t)},Iw=t=>{t.on(e=>{e.intervalId.clear(),Lw(e.ghost)}),t.clear()},Fl=Re,Fw=(t,e)=>pa(t.getBody(),e),eO=t=>{const e=t.selection,n=t.dom,r=t.getBody(),o=((t,e,n,r)=>{const o=xs();let s,a;const i=er(t),l=t.dom,c=()=>{(u=>{var f,p;const b=Dn(O(u),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<b.length;g++){const v=b[g].dom;let h=v.previousSibling;if(gc(h)){const C=h.data;1===C.length?null===(f=h.parentNode)||void 0===f||f.removeChild(h):h.deleteData(C.length-1,1)}h=v.nextSibling,pc(h)&&(1===h.data.length?null===(p=h.parentNode)||void 0===p||p.removeChild(h):h.deleteData(0,1))}})(e),a&&(oa(a),a=null),o.on(u=>{l.remove(u.caret),o.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(u,f)=>{let p;if(c(),o_(f))return null;if(!n(f))return a=((b,g)=>{var v;const h=(null!==(v=b.ownerDocument)&&void 0!==v?v:document).createTextNode(Bn),C=b.parentNode;if(g){const S=b.previousSibling;if(Ha(S)){if(_r(S))return S;if(gc(S))return S.splitText(S.data.length-1)}C?.insertBefore(h,b)}else{const S=b.nextSibling;if(Ha(S)){if(_r(S))return S;if(pc(S))return S.splitText(1),S}b.nextSibling?C?.insertBefore(h,b.nextSibling):C?.appendChild(h)}return h})(f,u),p=f.ownerDocument.createRange(),el(a.nextSibling)?(p.setStart(a,0),p.setEnd(a,0)):(p.setStart(a,1),p.setEnd(a,1)),p;{const b=((h,C,S)=>{var k;const N=(null!==(k=C.ownerDocument)&&void 0!==k?k:document).createElement(h);N.setAttribute("data-mce-caret",S?"before":"after"),N.setAttribute("data-mce-bogus","all"),N.appendChild(fc().dom);const R=C.parentNode;return S?R?.insertBefore(N,C):C.nextSibling?R?.insertBefore(N,C.nextSibling):R?.appendChild(N),N})(i,f,u),g=Gh(e,f,u);l.setStyle(b,"top",g.top),a=b;const v=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(v,{...g}),l.add(e,v),o.set({caret:v,element:f,before:u}),u&&l.addClass(v,"mce-visual-caret-before"),s=setInterval(()=>{o.on(h=>{r()?l.toggleClass(h.caret,"mce-visual-caret-hidden"):l.addClass(h.caret,"mce-visual-caret-hidden")})},500),p=f.ownerDocument.createRange(),p.setStart(b,0),p.setEnd(b,0)}return p},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(u=>{const f=Gh(e,u.element,u.before);l.setStyles(u.caret,{...f})})},destroy:()=>clearInterval(s)}})(t,r,n.isBlock,()=>ua(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=h=>h!==r&&(Fl(h)||ko(h))&&n.isChildOf(h,r)&&n.isEditable(h.parentNode),c=(h,C,S,k=!0)=>t.dispatch("ShowCaret",{target:C,direction:h,before:S}).isDefaultPrevented()?null:(k&&e.scrollIntoView(C,-1===h),o.show(S,C)),u=h=>_r(h)||pc(h)||gc(h),f=h=>u(h.startContainer)||u(h.endContainer),b=(h,C)=>{if(!h)return null;if(h.collapsed){if(!f(h)){const R=C?1:-1,D=al(R,r,h),P=D.getNode(!C);if(mt(P)){if(nl(P))return c(R,P,!!C&&!D.isAtEnd(),!1);if(vs(P)&&Re(P.nextSibling)){const Y=n.createRng();return Y.setStart(P,0),Y.setEnd(P,0),Y}}const U=D.getNode(C);if(mt(U)){if(nl(U))return c(R,U,!C&&!D.isAtEnd(),!1);if(vs(U)&&Re(U.previousSibling)){const Y=n.createRng();return Y.setStart(U,1),Y.setEnd(U,1),Y}}}return null}let S=h.startContainer,k=h.startOffset;const N=h.endOffset;if(lt(S)&&0===k&&Fl(S.parentNode)&&(S=S.parentNode,k=n.nodeIndex(S),S=S.parentNode),!xt(S))return null;if(N===k+1&&S===h.endContainer){const R=S.childNodes[k];if(l(R))return(D=>{const P=D.cloneNode(!0),U=t.dispatch("ObjectSelected",{target:D,targetClone:P});if(U.isDefaultPrevented())return null;const Y=((L,z)=>{const I=O(t.getBody()),$=t.getDoc(),pt=wo(I,"#"+s).getOrThunk(()=>{const ht=st('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',$);return Xe(ht,"id",s),Nt(I,ht),ht}),it=n.createRng();se(pt),ge(pt,[ut(ln,$),O(z),ut(ln,$)]),it.setStart(pt.dom.firstChild,1),it.setEnd(pt.dom.lastChild,0),ps(pt,{top:n.getPos(L,t.getBody()).y+"px"}),ub(pt);const Ot=e.getSel();return Ot&&(Ot.removeAllRanges(),Ot.addRange(it)),it})(D,U.targetClone),V=O(D);return rt(Dn(O(t.getBody()),`*[${a}]`),L=>{de(V,L)||on(L,a)}),n.getAttrib(D,a)||D.setAttribute(a,"1"),i=D,v(),Y})(R)}return null},g=()=>{i&&i.removeAttribute(a),wo(O(t.getBody()),"#"+s).each(Mt),i=null},v=()=>{o.hide()};return Do(t)||(t.on("click",h=>{n.isEditable(h.target)||(h.preventDefault(),t.focus())}),t.on("blur NewBlock",g),t.on("ResizeWindow FullscreenStateChanged",o.reposition),t.on("tap",h=>{const C=h.target,S=Fw(t,C);Fl(S)?(h.preventDefault(),El(t,S).each(b)):l(C)&&El(t,C).each(b)},!0),t.on("mousedown",h=>{const C=h.target;if(C!==r&&"HTML"!==C.nodeName&&!n.isChildOf(C,r)||!((k,N,R)=>{const D=O(k.getBody()),P=k.inline?D:O(zn(D).dom.documentElement),U=((Y,V,L,z)=>{const I=V.dom.getBoundingClientRect();return{x:L-(Y?I.left+V.dom.clientLeft+AA(V):0),y:z-(Y?I.top+V.dom.clientTop+NA(V):0)}})(k.inline,P,N,R);return((Y,V,L)=>{const z=EA(Y),I=_A(Y);return V>=0&&L>=0&&V<=z&&L<=I})(P,U.x,U.y)})(t,h.clientX,h.clientY))return;g(),v();const S=Fw(t,C);Fl(S)?(h.preventDefault(),El(t,S).each(b)):Nw(r,h.clientX,h.clientY).each(k=>{var N;h.preventDefault(),(N=c(1,k.node,k.position===mi.Before,!1))&&e.setRng(N),xt(S)?S.focus():t.getBody().focus()})}),t.on("keypress",h=>{St.modifierPressed(h)||Fl(e.getNode())&&h.preventDefault()}),t.on("GetSelectionRange",h=>{let C=h.range;if(i){if(!i.parentNode)return void(i=null);C=C.cloneRange(),C.selectNode(i),h.range=C}}),t.on("SetSelectionRange",h=>{h.range=(h=>{const C=t.schema.getVoidElements(),S=n.createRng(),k=h.startContainer,N=h.startOffset,R=h.endContainer,D=h.endOffset;return te(C,k.nodeName.toLowerCase())?0===N?S.setStartBefore(k):S.setStartAfter(k):S.setStart(k,N),te(C,R.nodeName.toLowerCase())?0===D?S.setEndBefore(R):S.setEndAfter(R):S.setEnd(R,D),S})(h.range);const C=b(h.range,h.forward);C&&(h.range=C)}),t.on("AfterSetSelectionRange",h=>{const C=h.range,S=C.startContainer.parentElement;var k,N;f(C)||xt(k=S)&&"mcepastebin"===k.id||v(),mt(N=S)&&n.hasClass(N,"mce-offscreen-selection")||g()}),(t=>{const e=xs(),n=we.DOM,r=document,o=(l=e,c=t,u=>{if(0===u.button){const f=qe(c.dom.getParents(u.target),QT).getOr(null);if(mt(f)&&(p=c.dom,b=c.getBody(),Tw(g=f)&&g!==b&&p.isEditable(g.parentElement))){const p=c.dom.getPos(f),b=c.getBody(),g=c.getDoc().documentElement;l.set({element:f,dataTransfer:Ip(),dragging:!1,screenX:u.screenX,screenY:u.screenY,maxX:(c.inline?b.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?b.scrollHeight:g.offsetHeight)-2,relX:u.pageX-p.x,relY:u.pageY-p.y,width:f.offsetWidth,height:f.offsetHeight,ghost:JT(c,f,f.offsetWidth,f.offsetHeight),intervalId:_k(100)})}}var p,b,g}),s=((t,e)=>{const n=Sc((o,s)=>{return i=o,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void Nw(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),c=>{const u=a._selectionOverrides.showCaret(1,c.node,c.position===mi.Before,!1);u?a.selection.setRng(u):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const r=t;return o=>t.on(s=>{const a=Math.max(Math.abs(o.screenX-s.screenX),Math.abs(o.screenY-s.screenY));if(!s.dragging&&a>10){const c=Il(e,"dragstart",s.element,s.dataTransfer,o);if(mt(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const c=o.currentTarget===e.getDoc().documentElement,u=((f,p)=>({pageX:p.pageX-f.relX,pageY:p.pageY+5}))(s,(p=o,b=(h=f=e).inline?Aw(h.getBody()):{left:0,top:0},g=(h=>{const C=h.getBody();return h.inline?{left:C.scrollLeft,top:C.scrollTop}:{left:0,top:0}})(f),v=((h,C)=>{if(C.target.ownerDocument!==h.getDoc()){const S=Aw(h.getContentAreaContainer()),k=(N=>{const R=N.getBody(),D=N.getDoc().documentElement;return N.inline?{left:R.scrollLeft,top:R.scrollTop}:{left:R.scrollLeft||D.scrollLeft,top:R.scrollTop||D.scrollTop}})(h);return{left:C.pageX-S.left+k.left,top:C.pageY-S.top+k.top}}return{left:C.pageX,top:C.pageY}})(f,p),{pageX:v.left-b.left+g.left,pageY:v.top-b.top+g.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((f,p,b,g,v,h,C,S,k,N,R,D)=>{let P=0,U=0;f.style.left=p.pageX+"px",f.style.top=p.pageY+"px",p.pageX+b>v&&(P=p.pageX+b-v),p.pageY+g>h&&(U=p.pageY+g-h),f.style.width=b-P+"px",f.style.height=g-U+"px";const Y=k.clientHeight,V=k.clientWidth,L=C+k.getBoundingClientRect().top,z=S+k.getBoundingClientRect().left;R.on(I=>{I.intervalId.clear(),I.dragging&&D&&(C+8>=Y?I.intervalId.set(Pw(N)):C-8<=0?I.intervalId.set(Bw(N)):S+8>=V?I.intervalId.set(Dw(N)):S-8<=0?I.intervalId.set(Ow(N)):L+16>=window.innerHeight?I.intervalId.set(Pw(window)):L-16<=0?I.intervalId.set(Bw(window)):z+16>=window.innerWidth?I.intervalId.set(Dw(window)):z-16<=0&&I.intervalId.set(Ow(window)))})})(s.ghost,u,s.width,s.height,s.maxX,s.maxY,o.clientY,o.clientX,e.getContentAreaContainer(),e.getWin(),r,c),n.throttle(o.clientX,o.clientY)}var f,p,h,b,g,v,i,l})})(e,t),a=((l,c)=>u=>{l.on(f=>{var p,b,g,v;if(f.intervalId.clear(),f.dragging){if(b=c,g=(b=>{const g=b.getSel();if(mt(g)){const v=g.getRangeAt(0).startContainer;return lt(v)?v.parentNode:v}return null})(c.selection),v=f.element,!ye(g)&&g!==v&&!b.dom.isChildOf(g,v)&&b.dom.isEditable(g)){const b=null!==(p=c.getDoc().elementFromPoint(u.clientX,u.clientY))&&void 0!==p?p:c.getBody();Il(c,"drop",b,f.dataTransfer,u).isDefaultPrevented()||c.undoManager.transact(()=>{((g,v)=>{const h=g.getParent(v.parentNode,g.isBlock);Lw(v),h&&h!==g.getRoot()&&g.isEmpty(h)&&bs(O(h))})(c.dom,f.element),(g=>{const v=g.getData("text/html");return""===v?E.none():E.some(v)})(f.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}Il(c,"dragend",c.getBody(),f.dataTransfer,u)}}),Iw(l)})(e,t),i=((l,c)=>u=>Mw(l,c,E.some(u)))(e,t);var l,c;t.on("mousedown",o),t.on("mousemove",s),t.on("mouseup",a),n.bind(r,"mousemove",s),n.bind(r,"mouseup",i),t.on("remove",()=>{n.unbind(r,"mousemove",s),n.unbind(r,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===St.ESC&&Mw(e,t,E.none())})})(h=t),SE(h)&&(C=>{const S=R=>{if(!R.isDefaultPrevented()){const D=R.dataTransfer;D&&(Tt(D.types,"Files")||D.files.length>0)&&(R.preventDefault(),"drop"===R.type&&pd(C,"Dropped file type is not supported"))}},k=R=>{Kc(C,R.target)&&S(R)},N=()=>{const R=we.DOM,D=C.dom,P=document,U=C.inline?C.getBody():C.getDoc(),Y=["drop","dragover"];rt(Y,V=>{R.bind(P,V,k),D.bind(U,V,S)}),C.on("remove",()=>{rt(Y,V=>{R.unbind(P,V,k),D.unbind(U,V,S)})})};C.on("init",()=>{Tr.setEditorTimeout(C,N,0)})})(h),(h=>{const C=Sc(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const S=h.selection.getRng();if(S.collapsed){const k=Xm(h,S,!1);h.selection.setRng(k)}}},0);h.on("focus",()=>{C.throttle()}),h.on("blur",()=>{C.cancel()})})(t),(h=>{h.on("init",()=>{h.on("focusin",C=>{const S=C.target;if(ko(S)){const k=pa(h.getBody(),S),N=Re(k)?k:S;h.selection.getNode()!==N&&El(h,N).each(R=>h.selection.setRng(R))}})})})(t)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&(bu(h),e.scrollIntoView(h))},hideFakeCaret:v,destroy:()=>{o.destroy(),i=null}};var h},nO=(t,e)=>{let n=e;for(let r=t.previousSibling;lt(r);r=r.previousSibling)n+=r.data.length;return n},jw=(t,e,n,r,o)=>{if(lt(n)&&(r<0||r>n.data.length))return[];const s=o&&lt(n)?[nO(n,r)]:[r];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,o)),a=a.parentNode;return a===e?s.reverse():[]},Vp=(t,e,n,r,o,s,a=!1)=>({start:jw(t,e,n,r,a),end:jw(t,e,o,s,a)}),zw=(t,e)=>{const n=e.slice(),r=n.pop();return x(r)?vn(n,(o,s)=>o.bind(a=>E.from(a.childNodes[s])),E.some(t)).bind(o=>lt(o)&&(r<0||r>o.data.length)?E.none():E.some({node:o,offset:r})):E.none()},Hw=(t,e)=>zw(t,e.start).bind(({node:n,offset:r})=>zw(t,e.end).map(({node:o,offset:s})=>{const a=document.createRange();return a.setStart(n,r),a.setEnd(o,s),a})),pi=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const r=e.parentNode;t.remove(e),pi(t,r,n)}},qd=(t,e,n,r=!0)=>{const o=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),r&&!n(e.startContainer)&&(lt(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),lt(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),pi(t,o,n),o!==s&&pi(t,s,n))},Kp=(t,e)=>E.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),Uw=(t,e,n)=>{const r=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:kh(r).concat(t.blockPatterns),inlinePatterns:Eh(r).concat(t.inlinePatterns)}},qw=(t,e,n,r)=>{const o=t.createRng();return o.setStart(e,0),o.setEnd(n,r),o.toString()},$w=(t,e,n)=>{((r,o,s)=>{if(lt(r)&&0>=r.length)return E.some(fo(r,0));{const a=ea(kd);return E.from(a.forwards(r,0,Ed(r),s)).map(i=>fo(i.container,0))}})(e,0,e).each(r=>{const o=r.container;rx(o,n.start.length,e).each(i=>{const l=t.createRng();l.setStart(o,0),l.setEnd(i.container,i.offset),qd(t,l,c=>c===e)});const s=O(o),a=cc(s);var i,l;/^\s[^\s]/.test(a)&&(i=s,l=a.slice(1),mu.set(i,l))})},Ww=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),$d=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},Vw=(t,e,n)=>{const r=Hw(t.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,s=r.endContainer,a=0===r.endOffset?s:s.splitText(r.endOffset),i=0===r.startOffset?o:o.splitText(r.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(Ww(t,e+"-end"),a),start:l.insertBefore(Ww(t,e+"-start"),i)}},Kw=(t,e,n)=>{pi(t,t.get(e.prefix+"-end"),n),pi(t,t.get(e.prefix+"-start"),n)},Xp=t=>0===t.start.length,Xw=(t,e,n,r)=>{const o=e.start;var s;return hp(t,r.container,r.offset,(s=o,(a,i)=>{const l=a.data.substring(0,i),c=l.lastIndexOf(s.charAt(s.length-1)),u=l.lastIndexOf(s);return-1!==u?u+s.length:-1!==c?c+1:-1}),n).bind(a=>{var i,l;const c=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(o))&&void 0!==l?l:-1;if(-1!==c&&a.offset>=c+o.length){const u=t.createRng();return u.setStart(a.container,a.offset-o.length),u.setEnd(a.container,a.offset),E.some(u)}return gp(a.container,a.offset-o.length,n).map(f=>{const p=t.createRng();return p.setStart(f.container,f.offset),p.setEnd(a.container,a.offset),p}).filter(f=>f.toString()===o).orThunk(()=>Xw(t,e,n,fo(a.container,0)))})},rO=(t,e,n,r)=>{const o=t.dom,s=o.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return gp(i,l-n.pattern.end.length,e).bind(c=>{const u=Vp(o,s,c.container,c.offset,i,l,r);if(Xp(a))return E.some({matches:[{pattern:a,startRng:u,endRng:u}],position:c});{const f=Wd(t,n.remainingPatterns,c.container,c.offset,e,r),p=f.getOr({matches:[],position:c}),b=p.position;return((v,h,C,S,k,N=!1)=>{if(0===h.start.length&&!N){const R=v.createRng();return R.setStart(C,S),R.setEnd(C,S),E.some(R)}return pp(C,S,k).bind(R=>Xw(v,h,k,R).bind(D=>{var P;return N&&(D.endContainer===R.container&&D.endOffset===R.offset||0===R.offset&&(null===(P=D.endContainer.textContent)||void 0===P?void 0:P.length)===D.endOffset)?E.none():E.some(D)}))})(o,a,b.container,b.offset,e,f.isNone()).map(v=>{const h=((C,S,k,N=!1)=>Vp(C,S,k.startContainer,k.startOffset,k.endContainer,k.endOffset,N))(o,s,v,r);return{matches:p.matches.concat([{pattern:a,startRng:h,endRng:u}]),position:fo(v.startContainer,v.startOffset)}})}})},Wd=(t,e,n,r,o,s)=>{const a=t.dom;return pp(n,r,a.getRoot()).bind(i=>{const l=qw(a,o,n,r);for(let c=0;c<e.length;c++){const u=e[c];if(!js(l,u.end))continue;const f=e.slice();f.splice(c,1);const p=rO(t,o,{pattern:u,remainingPatterns:f,position:i},s);if(p.isNone()&&r>0)return Wd(t,e,n,r-1,o,s);if(p.isSome())return p}return E.none()})},Gw=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?rt(e.format,r=>{t.formatter.apply(r)}):t.execCommand(e.cmd,!1,e.value)},Yw=(t,e,n,r,o,s)=>{var a;return((i,l)=>{const c=mr(i,u=>Ae(l,f=>u.pattern.start===f.pattern.start&&u.pattern.end===f.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(Wd(t,o.inlinePatterns,n,r,e,s).fold(()=>[],i=>i.matches),Wd(t,(a=o.inlinePatterns,zo(a,(i,l)=>l.end.length-i.end.length)),n,r,e,s).fold(()=>[],i=>i.matches))},Qw=(t,e)=>{if(0===e.length)return;const n=t.dom,r=t.selection.getBookmark(),o=((s,a)=>{const i=Xi("mce_textpattern"),l=jo(a,(c,u)=>{const f=Vw(s,i+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return jo(l,(c,u)=>{const f=l.length-c.length-1,p=Xp(u.pattern)?u.endMarker:Vw(s,i+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:p}])},[])})(n,e);rt(o,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;Xp(s.pattern)?((l,c,u,f)=>{const p=$d(l.dom,u);qd(l.dom,p,f),Gw(l,c,p)})(t,s.pattern,s.endMarker,i):((l,c,u,f,p)=>{const b=l.dom,g=$d(b,f),v=$d(b,u);qd(b,v,p),qd(b,g,p);const C=$d(b,{prefix:u.prefix,start:u.end,end:f.start});Gw(l,c,C)})(t,s.pattern,s.startMarker,s.endMarker,i),Kw(n,s.endMarker,i),Kw(n,s.startMarker,i)}),t.selection.moveToBookmark(r)},Jw=(t,e,n)=>{for(let r=0;r<t.length;r++)if(n(t[r],e))return!0;return!1},Gp=we.DOM,aO=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,Yp=t=>xr(t,e=>!1===De(e)),Zw=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return Yp({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:aO(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},tS=t=>{const e=t.options.get;return Yp({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},eS=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,nS=t=>{const e=eS(t),n=Mh(t),r=t.contentCSS,o=()=>{e.unloadAll(r),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?o():t.on("remove",o)};if(t.contentStyles.length>0){let l="";dt.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,c,u)=>{const f=[eS(l).loadAll(c)];return l.inline?f:f.concat([l.ui.styleSheetLoader.loadAll(u)])})(t,r,n)).then(s).catch(s),i=nE(t);return i&&((l,c)=>{const u=O(l.getBody()),f=He(Te(u)),p=X("style");Xe(p,"type","text/css"),Nt(p,ut(c)),Nt(f,p),l.on("remove",()=>{Mt(p)})})(t,i),a},Qp=t=>{var e;!0!==t.removed&&(Do(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||Ic(r)&&r.selection.getStart(!0)!==o||qn(o).each(s=>{const a=s.getNode(),i=Xo(a)?qn(a).getOr(s):s;r.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=AE(e);pe(n)&&n.call(e,e),(r=>{const o=TE(r);o&&Tr.setEditorTimeout(r,()=>{let s;s=!0===o?r:r.editorManager.get(o),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},rS=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(Gp.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const r=t.getBody();var a;r.disabled=!0,t.readonly=jh(t),t._editableRoot=xE(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===Gp.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let v=[];const h=k=>{if(!k.blob||!k.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const N=k.id||"blobid"+TA+++(()=>{const U=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+U()+U()+U()})(),R=k.name||N,D=k.blob;var P;return{id:gt(N),name:gt(R),filename:gt(k.filename||R+"."+(P=D.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[P.toLowerCase()]||"dat")),blob:gt(D),base64:gt(k.base64),blobUri:gt(k.blobUri||URL.createObjectURL(D)),uri:gt(k.uri)}},C=k=>qe(v,k).getOrUndefined(),S=k=>C(N=>N.id()===k);return{create:(k,N,R,D,P)=>{if(Dt(k))return h({id:k,name:D,filename:P,blob:N,base64:R});if(Vt(k))return h(k);throw new Error("Unknown input type")},add:k=>{S(k.id())||v.push(k)},get:S,getByUri:k=>C(N=>N.blobUri()===k),getByData:(k,N)=>C(R=>R.base64()===k&&R.blob().type===N),findFirst:C,removeByUri:k=>{v=$t(v,N=>N.blobUri()!==k||(URL.revokeObjectURL(N.blobUri()),!1))},destroy:()=>{rt(v,k=>{URL.revokeObjectURL(k.blobUri())}),v=[]}}})();let n,r;const o=g1(),s=[],a=v=>h=>t.selection?v(h):[],i=(v,h,C)=>{let S=0;do{S=v.indexOf(h,S),-1!==S&&(v=v.substring(0,S)+C+v.substr(S+h.length),S+=C.length-h.length+1)}while(-1!==S);return v},l=(v,h,C)=>(v=i(v,`src="${h}"`,`src="${C}"${C===fe.transparentSrc?' data-mce-placeholder="1"':""}`),i(v,'data-mce-src="'+h+'"','data-mce-src="'+C+'"')),c=(v,h)=>{rt(t.undoManager.data,C=>{"fragmented"===C.type?C.fragments=re(C.fragments,S=>l(S,v,h)):C.content=l(C.content,v,h)})},u=()=>(n||(n=b1(t,o)),b().then(a(v=>{const h=re(v,C=>C.blobInfo);return n.upload(h,h1(t)).then(a(C=>{const S=[];let k=!1;const N=re(C,(R,D)=>{const{blobInfo:P,image:U}=v[D];let Y=!1;return R.status&&Vk(t)?(R.url&&!ze(U.src,R.url)&&(k=!0),e.removeByUri(U.src),Do(t)||((V,L)=>{const z=t.convertURL(L,"src");var I;c(V.src,L),Qr(O(V),{src:Dh(t)?(I=L,I+(-1===I.indexOf("?")?"?":"&")+(new Date).getTime()):L,"data-mce-src":z})})(U,R.url)):R.error&&(R.error.remove&&(c(U.src,fe.transparentSrc),S.push(U),Y=!0),pd(t,ao.translate(["Failed to upload image: {0}",R.error.message]))),{element:U,status:R.status,uploadUri:R.url,blobInfo:P,removed:Y}});return S.length>0&&!Do(t)?t.undoManager.transact(()=>{rt(ae(S),R=>{const D=xe(R);var P;Mt(R),D.each((P=t,U=>{var Y,V;(Y=P).dom.isEmpty((V=U).dom)&&mt(Y.schema.getTextBlockElements()[Ee(V)])&&Nt(U,st('<br data-mce-bogus="1" />'))})),e.removeByUri(R.dom.src)})}):k&&t.undoManager.dispatchChange(),N}))}))),f=()=>Oh(t)?u():Promise.resolve([]),p=v=>mr(s,h=>h(v)),b=()=>(r||(r=((t,e)=>{const n={};return{findAll:(r,o=Be)=>{const s=$t((i=r)?Ye(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===fe.transparentSrc)&&(Je(l,"blob:")?!t.isUploaded(l)&&o(i):!!Je(l,"data:")&&o(i))}),a=re(s,i=>{const l=i.src;if(te(n,l))return n[l].then(c=>Dt(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((u,f)=>{const p=()=>Promise.reject("Invalid data URI");if(Je(f,"blob:")){const v=u.getByUri(f);return mt(v)?Promise.resolve(v):(b=f,Je(b,"blob:")?(h=b,fetch(h).then(C=>C.ok?C.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${h} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Je(b,"data:")?(g=b,new Promise((h,C)=>{km(g).bind(({type:S,data:k,base64Encoded:N})=>by(S,k,N)).fold(()=>C("Invalid data URI"),h)})):Promise.reject("Unknown URI format")).then(h=>vy(h).then(C=>yy(C,!1,S=>E.some(Cy(u,h,S))).getOrThunk(p)))}var h,b,g;return Je(f,"data:")?xy(u,f).fold(p,v=>Promise.resolve(v)):Promise.reject("Unknown image data format")})(e,l).then(u=>(delete n[l],{image:i,blobInfo:u})).catch(u=>(delete n[l],u));return n[l]=c,c}});var i;return Promise.all(a)}}})(o,e)),r.findAll(t.getBody(),p).then(a(v=>{const h=$t(v,C=>Dt(C)?(pd(t,C),!1):"blob"!==C.uriType);return Do(t)||rt(h,C=>{c(C.image.src,C.blobInfo.blobUri()),C.image.src=C.blobInfo.blobUri(),C.image.removeAttribute("data-mce-src")}),h}))),g=v=>v.replace(/src="(blob:[^"]+)"/g,(h,C)=>{const S=o.getResultUri(C);if(S)return'src="'+S+'"';let k=e.getByUri(C);return k||(k=vn(t.editorManager.get(),(N,R)=>N||R.editorUpload&&R.editorUpload.blobCache.getByUri(C),void 0)),k?'src="data:'+k.blob().type+";base64,"+k.base64()+'"':h});return t.on("SetContent",()=>{Oh(t)?f():b()}),t.on("RawSaveContent",v=>{v.content=g(v.content)}),t.on("GetContent",v=>{v.source_view||"raw"===v.format||"tree"===v.format||(v.content=g(v.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",v=>{rt(v,h=>{const C=h.attr("src");if(!C||e.getByUri(C))return;const S=o.getResultUri(C);S&&h.attr("src",S)})})}),{blobCache:e,addFilter:v=>{s.push(v)},uploadImages:u,uploadImagesAuto:f,scanForImages:b,destroy:()=>{e.destroy(),o.destroy(),r=n=null}}})(t),t.schema=Cs(tS(t)),t.dom=we(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Jk(t),referrerPolicy:Ku(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=oi(Zw(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const u=a.dom,f="data-mce-"+c;let p=l.length;for(;p--;){const b=l[p];let g=b.attr(c);if(g&&!b.attr(f)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===c?(g=u.serializeStyle(u.parseStyle(g),b.name),g.length||(g=null),b.attr(f,g),b.attr(c,g)):"tabindex"===c?(b.attr(f,g),b.attr(c,null)):b.attr(f,a.convertURL(g,c,b.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const u=l[c],f=u.attr("type")||"no/type";0!==f.indexOf("mce-")&&u.attr("type","mce-"+f)}}),XE(a)&&i.addNodeFilter("#cdata",l=>{var c;let u=l.length;for(;u--;){const f=l[u];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode(null!==(c=f.value)&&void 0!==c?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const u=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(u)&&0===f.getAll("br").length&&f.append(new rr("br",1))}}),i})(t),t.serializer=s1((a=>{const i=a.options.get;return{...Zw(a),...tS(a),...Yp({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=o1(t.dom,t.getWin(),t.serializer,t),t.annotator=F0(t),t.formatter=C1(t),t.undoManager=w1(t),t._nodeChangeDispatcher=new wT(t),t._selectionOverrides=eO(t),(a=>{const i=xs(),l=cn(!1),c=Mu(u=>{a.dispatch("longpress",{...u,type:"longpress"}),l.set(!0)},400);a.on("touchstart",u=>{NC(u).each(f=>{c.cancel();const p={x:f.clientX,y:f.clientY,target:u.target};c.throttle(u),l.set(!1),i.set(p)})},!0),a.on("touchmove",u=>{c.cancel(),NC(u).each(f=>{i.on(p=>{((b,g)=>{const v=Math.abs(b.clientX-g.x),h=Math.abs(b.clientY-g.y);return v>5||h>5})(f,p)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",u=>{c.cancel(),"touchcancel"!==u.type&&i.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{l.get()?u.preventDefault():a.dispatch("tap",{...u,type:"tap"})})},!0)})(t),(t=>{var e;(e=t).on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()}),(e=>{e.parser.addNodeFilter("details",n=>{const r=JE(e);rt(n,o=>{"expanded"===r?o.attr("open","open"):"collapsed"===r&&o.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const r=ZE(e);rt(n,o=>{"expanded"===r?o.attr("open","open"):"collapsed"===r&&o.attr("open",null)})})})(t),(e=>{e.on("keydown",n=>{n.keyCode!==St.BACKSPACE&&n.keyCode!==St.DELETE||((r,o)=>{const s=E.from(r.getParent(o.startContainer,"details")),a=E.from(r.getParent(o.endContainer,"details"));if(s.isSome()||a.isSome()){const i=s.bind(l=>E.from(r.select("summary",l)[0]));return E.some({startSummary:i,startDetails:s,endDetails:a})}return E.none()})(e.dom,e.selection.getRng()).fold(()=>{((r,o)=>{const{dom:s,selection:a}=r,i=r.getBody();if(r.selection.isCollapsed()){const l=G.fromRangeStart(a.getRng()),c=s.getParent(l.container(),s.isBlock);if(c&&s.isEmpty(c))if(Qt(c.nextSibling)){const u=nr(i,l).filter(f=>$p(s,f));if(u.isSome())return u.each(f=>{o||ww(r,f)}),!0}else if(Qt(c.previousSibling)&&Un(i,l).filter(u=>$p(s,u)))return!0;return il(o,i,l).fold(Ce,u=>!!$p(s,u)&&(c&&s.isEmpty(c)&&r.dom.remove(c),o||ww(r,u),!0))}return!1})(e,n.keyCode===St.DELETE)&&n.preventDefault()},r=>{((t,e,n)=>{const r=t.selection,o=r.getNode(),s=r.getRng(),a=n.keyCode===St.BACKSPACE,i=n.keyCode===St.DELETE,l=t.selection.isCollapsed(),c=G.fromRangeStart(s),u=t.getBody();return!((l||!((f,p)=>{const b=p.startSummary.exists(h=>h.contains(f.startContainer)),g=p.startSummary.exists(h=>h.contains(f.endContainer)),v=p.startDetails.forall(h=>p.endDetails.forall(C=>h!==C));return(b||g)&&!(b&&g)||v})(s,e))&&!(l&&a&&(f=c,p=e,p.startSummary.exists(b=>{return g=f,qn(b).exists(h=>h.isEqual(g));var g})))&&!(l&&i&&((f,p)=>p.startSummary.exists(b=>{return g=f,$r(v=b).exists(h=>Ie(h.getNode())&&nr(v,h).exists(C=>C.isEqual(g))||h.isEqual(g));var g,v}))(c,e))&&!(l&&a&&((f,p)=>p.startDetails.exists(b=>nr(b,f).forall(g=>p.startSummary.exists(v=>!v.contains(f.container())&&v.contains(g.container())))))(c,e))&&!(l&&i&&((f,p,b)=>b.startDetails.exists(g=>Un(f,p).forall(v=>!g.contains(v.container()))))(u,c,e))&&(!zT||!WS(o)||(!l&&vw(s,o)||lv(i,c,o)?hw(o):t.undoManager.transact(()=>{const f=r.getSel();let{anchorNode:p,anchorOffset:b,focusNode:g,focusOffset:v}=f??{};const h=()=>{mt(p)&&mt(b)&&mt(g)&&mt(v)&&f?.setBaseAndExtent(p,b,g,v)},C=(k,N)=>{rt(k.childNodes,R=>{cl(R)&&N.appendChild(R)})},S=t.dom.create("span",{"data-mce-bogus":"all"});C(o,S),o.appendChild(S),h(),l&&(xw&&(n.altKey||a&&n.metaKey)||!xw&&n.ctrlKey)&&f?.modify("extend",a?"left":"right",n.metaKey?"line":"word"),!r.isCollapsed()&&vw(r.getRng(),S)?hw(o):(t.execCommand(a?"Delete":"ForwardDelete"),p=f?.anchorNode,b=f?.anchorOffset,g=f?.focusNode,v=f?.focusOffset,C(S,o),h()),t.dom.remove(S)}),0)));var f,p})(e,r,n)&&n.preventDefault()})})})(t)})(t),(a=>{const i="contenteditable",l=" "+dt.trim(VE(a))+" ",c=" "+dt.trim(Uh(a))+" ",u=TC(l),f=TC(c),p=KE(a);p.length>0&&a.on("BeforeSetContent",b=>{((g,v,h)=>{let C=v.length,S=h.content;if("raw"!==h.format){for(;C--;)S=S.replace(v[C],xR(g,S,Uh(g)));h.content=S}})(a,p,b)}),a.parser.addAttributeFilter("class",b=>{let g=b.length;for(;g--;){const v=b[g];u(v)?v.attr(i,"true"):f(v)&&v.attr(i,"false")}}),a.serializer.addAttributeFilter(i,b=>{let g=b.length;for(;g--;){const v=b[g];(u(v)||f(v))&&(p.length>0&&v.attr("data-mce-content")?(v.name="#text",v.type=3,v.raw=!0,v.value=v.attr("data-mce-content")):v.attr(i,null))}})})(t),Do(t)||((a=t).on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,r)=>{const o=G.fromRangeStart(n).getNode(),s=(u=r,Qn(O(o),f=>so(f.dom)||Er(f),kw(u)).getOr(O(u)).dom),a=_w(o,s,!1),i=_w(o,s,!0),l=document.createRange();var u;return Ew(a,s).fold(()=>{Sw(a)?l.setStart(a,0):l.setStartBefore(a)},c=>l.setStartBefore(c.dom)),Ew(i,s).fold(()=>{Sw(i)?l.setEnd(i,i.data.length):l.setEndAfter(i)},c=>l.setEndAfter(c.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(lm(e))})(a))}),(a=>{(i=>{const l=[",",".",";",":","!","?"],c=[32],u=()=>{return b=$E(i),g=WE(i),{inlinePatterns:Eh(b),blockPatterns:kh(b),dynamicPatternsLookup:g};var b,g},f=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",b=>{if(13===b.keyCode&&!St.modifierPressed(b)&&i.selection.isCollapsed()){const g=u();(g.inlinePatterns.length>0||g.blockPatterns.length>0||f())&&((t,e)=>{const n=t.selection.getRng();return Kp(t,n).map(r=>{var o;const s=Math.max(0,n.startOffset),a=Uw(e,r,null!==(o=r.textContent)&&void 0!==o?o:""),i=Yw(t,r,n.startContainer,s,a,!0),l=((c,u,f,p)=>{var b;const g=c.dom,v=er(c);if(!g.is(u,v))return[];const h=null!==(b=u.textContent)&&void 0!==b?b:"";return((C,S)=>{const k=zo(C,(D,P)=>P.start.length-D.start.length),N=S.replace(ln," ");return qe(k,R=>0===S.indexOf(R.start)||0===N.indexOf(R.start))})(f.blockPatterns,h).map(C=>dt.trim(h).length===C.start.length?[]:[{pattern:C,range:Vp(g,g.getRoot(),u,0,u,0,!0)}]).getOr([])})(t,r,a);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),Qw(t,i),((f,p)=>{if(0===p.length)return;const b=f.selection.getBookmark();rt(p,g=>((v,h)=>{const S=h.pattern,k=Hw(v.dom.getRoot(),h.range).getOrDie("Unable to resolve path range");return Kp(v,k).each(N=>{"block-format"===S.type?((R,D)=>{const P=D.get(R);return ct(P)&&Nn(P).exists(U=>te(U,"block"))})(S.format,v.formatter)&&v.undoManager.transact(()=>{$w(v.dom,N,S),v.formatter.apply(S.format)}):"block-command"===S.type&&v.undoManager.transact(()=>{$w(v.dom,N,S),v.execCommand(S.cmd,!1,S.value)})}),!0})(f,g)),f.selection.moveToBookmark(b)})(t,l);const c=t.selection.getRng(),u=pp(c.startContainer,c.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),u.each(f=>{const p=f.container;"\ufeff"===p.data.charAt(f.offset-1)&&(p.deleteData(f.offset-1,1),pi(t.dom,p.parentNode,b=>b===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,g)&&b.preventDefault()}},!0);const p=()=>{if(i.selection.isCollapsed()){const b=u();(b.inlinePatterns.length>0||f())&&((g,v)=>{const h=g.selection.getRng();Kp(g,h).map(C=>{const S=Math.max(0,h.startOffset-1),k=qw(g.dom,C,h.startContainer,S),N=Uw(v,C,k),R=Yw(g,C,h.startContainer,S,N,!1);R.length>0&&g.undoManager.transact(()=>{Qw(g,R)})})})(i,b)}};i.on("keyup",b=>{Jw(c,b,(g,v)=>g===v.keyCode&&!St.modifierPressed(v))&&p()}),i.on("keypress",b=>{Jw(l,b,(g,v)=>g.charCodeAt(0)===v.charCode)&&Tr.setEditorTimeout(i,p)})})(a)})(t));const o=xT(t);((t,e)=>{t.addCommand("delete",()=>{var n;_C(n=t,e,!1).fold(()=>{Xf(n),Gf(n)},Vn)}),t.addCommand("forwardDelete",()=>{var n;_C(n=t,e,!0).fold(()=>iv(n,"ForwardDelete"),Vn)})})(t,o),(a=>{a.on("NodeChange",kt(CR,a))})(t),(a=>{var i;const l=a.dom,c=er(a),u=null!==(i=aE(a))&&void 0!==i?i:"",f=(p,b)=>{if((h=>{if(k1(h)){const C=h.keyCode;return!E1(h)&&(St.metaKeyPressed(h)||h.altKey||C>=112&&C<=123||Tt(IA,C))}return!1})(p))return;const g=a.getBody(),v=!(k1(h=p)&&!(E1(h)||"keyup"===h.type&&229===h.keyCode))&&((h,C,S)=>{if(We(O(C),!1)){const k=C.firstElementChild;return!k||!h.getStyle(C.firstElementChild,"padding-left")&&!h.getStyle(C.firstElementChild,"padding-right")&&S===k.nodeName.toLowerCase()}return!1})(l,g,c);var h;(""!==l.getAttrib(g,S1)!==v||b)&&(l.setAttrib(g,S1,v?u:null),l.setAttrib(g,"aria-placeholder",v?u:null),((h,C)=>{h.dispatch("PlaceholderToggle",{state:C})})(a,v),a.on(v?"keydown":"keyup",f),a.off(v?"keyup":"keydown",f))};Xn(u)&&a.on("init",p=>{f(p,!0),a.on("change SetContent ExecCommand",f),a.on("paste",b=>Tr.setEditorTimeout(a,()=>f(b)))})})(t),(t=>{const e=cn(!1),n=cn(HE(t)?"text":"html"),r=(o=>{const s=cn(null);return{create:()=>((a,i)=>{const{dom:l,selection:c}=a,u=a.getBody();i.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},tw);fe.browser.isFirefox()&&l.setStyle(f,"left","rtl"===l.getStyle(u,"direction",!0)?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",p=>{p.stopPropagation()}),f.focus(),c.select(f,!0)})(o,s),remove:()=>((a,i)=>{const l=a.dom;if(jp(a)){let c;const u=i.get();for(;c=jp(a);)l.remove(c),l.unbind(c);u&&a.selection.setRng(u)}i.set(null)})(o,s),getEl:()=>jp(o),getHtml:()=>(a=>{const i=a.dom,l=(p,b)=>{p.appendChild(b),i.remove(b,!0)},[c,...u]=$t(a.getBody().childNodes,TT);rt(u,p=>{l(c,p)});const f=i.select("div[id=mcepastebin]",c);for(let p=f.length-1;p>=0;p--){const b=i.create("div");c.insertBefore(b,f[p]),l(b,f[p])}return c?c.innerHTML:""})(o),getLastRng:s.get}})(t);var o,s,a;o=t,(fe.browser.isChromium()||fe.browser.isSafari())&&(a=IT,(s=o).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((o,s)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),W0(a,!1)):(i.set("text"),W0(a,!0)),a.focus()})(o,s)}),o.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Hd(o,i.html,i.internal,!1),i.text&&Up(o,i.text,!1)})})(t,n),(o=>{const s=l=>c=>{l(o,c)},a=PE(o);pe(a)&&o.on("PastePreProcess",s(a));const i=LE(o);pe(i)&&o.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(o=>{o.on("cut",(s=>a=>{!a.isDefaultPrevented()&&fw(s)&&cw(a,uw(s),dw(s),()=>{if(fe.browser.isChromium()||fe.browser.isFirefox()){const i=s.selection.getRng();Tr.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(o)),o.on("copy",(s=>a=>{!a.isDefaultPrevented()&&fw(s)&&cw(a,uw(s),dw(s),_t)})(o))})(t),((o,s)=>{BE(o)&&o.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),Rc(o)||o.on("drop",a=>{const i=a.dataTransfer;i&&Ae(i.files,c=>/^image\//.test(c.type))&&a.preventDefault()}),o.on("drop",a=>{if(a.isDefaultPrevented())return;const i=mw(o,a);if(ye(i))return;const l=aw(a.dataTransfer),c=Ds(l,zd());if((!iw(l)||(b=>{const g=b["text/plain"];return!!g&&0===g.indexOf("file://")})(l))&&lw(o,a,i))return;const u=l[zd()],f=u||l["text/html"]||l["text/plain"],p=((b,g,v,h)=>{const C=b.getParent(v,S=>Ys(g,S));if(C&&te(h,"text/html")){const S=(new DOMParser).parseFromString(h["text/html"],"text/html").body;return!Qt(S.querySelector(C.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,i.startContainer,l);s.get()&&!p||f&&(a.preventDefault(),Tr.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{u&&o.execCommand("Delete"),pw(o,i);const b=rw(f);l["text/html"]?Hd(o,b,c,!0):Up(o,b,!0)})}))}),o.on("dragstart",a=>{s.set(!0)}),o.on("dragover dragend",a=>{Rc(o)&&!s.get()&&(a.preventDefault(),pw(o,mw(o,a))),"dragend"===a.type&&s.set(!1)})})(t,e),((t,e,n)=>{((r,o,s)=>{let a;r.on("keydown",i=>{var l;(St.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),r.on("paste",i=>{if(i.isDefaultPrevented()||(u=i,fe.os.isAndroid()&&0===(null===(p=null===(f=u.clipboardData)||void 0===f?void 0:f.items)||void 0===p?void 0:p.length)))return;var u,f,p;const l="text"===s.get()||a;a=!1;const c=aw(i.clipboardData);!iw(c)&&lw(r,i,o.getLastRng()||r.selection.getRng())||(Ds(c,"text/html")?(i.preventDefault(),qp(r,c,c["text/html"],l,!0)):Ds(c,"text/plain")&&Ds(c,"text/uri-list")?(i.preventDefault(),qp(r,c,c["text/plain"],l,!0)):(o.create(),Tr.setEditorTimeout(r,()=>{const u=o.getHtml();o.remove(),qp(r,c,u,l,!1)},0)))})})(t,e,n),(r=>{const o=a=>Je(a,"webkit-fake-url"),s=a=>Je(a,"data:");r.parser.addNodeFilter("img",(a,i,l)=>{if(!Rc(r)&&!0===(null===(u=l.data)||void 0===u?void 0:u.paste))for(const c of a){const u=c.attr("src");Dt(u)&&!c.attr("data-mce-object")&&u!==fe.transparentSrc&&(o(u)||!qE(r)&&s(u))&&c.remove()}var u})})(t)})(t,r,n)})})(t);const s=(a=>{const i=a;return(l=a,ke(l.plugins,"rtc").bind(c=>E.from(c.setup))).fold(()=>(i.rtcInstance=Jy(a),E.none()),l=>(i.rtcInstance=(()=>{const c=gt(null),u=gt("");return{init:{bindEvents:_t},undoManager:{beforeChange:_t,add:c,undo:c,redo:c,clear:_t,reset:_t,hasUndo:Ce,hasRedo:Ce,transact:c,ignore:_t,extra:_t},formatter:{match:Ce,matchAll:gt([]),matchNode:gt(void 0),canApply:Ce,closest:u,apply:_t,remove:_t,toggle:_t,formatChanged:gt({unbind:_t})},editor:{getContent:u,setContent:gt({content:"",html:""}),insertContent:gt(""),addVisual:_t},selection:{getContent:u},autocompleter:{addDecoration:_t,removeDecoration:_t},raw:{getModel:gt(E.none())}}})(),E.some(()=>l().then(c=>(i.rtcInstance=(u=>{const f=k=>Vt(k)?k:{},{init:p,undoManager:b,formatter:g,editor:v,selection:h,autocompleter:C,raw:S}=u;return{init:{bindEvents:p.bindEvents},undoManager:{beforeChange:b.beforeChange,add:b.add,undo:b.undo,redo:b.redo,clear:b.clear,reset:b.reset,hasUndo:b.hasUndo,hasRedo:b.hasRedo,transact:(k,N,R)=>b.transact(R),ignore:(k,N)=>b.ignore(N),extra:(k,N,R,D)=>b.extra(R,D)},formatter:{match:(k,N,R,D)=>g.match(k,f(N),D),matchAll:g.matchAll,matchNode:g.matchNode,canApply:k=>g.canApply(k),closest:k=>g.closest(k),apply:(k,N,R)=>g.apply(k,f(N)),remove:(k,N,R,D)=>g.remove(k,f(N)),toggle:(k,N,R)=>g.toggle(k,f(N)),formatChanged:(k,N,R,D,P)=>g.formatChanged(N,R,D,P)},editor:{getContent:k=>v.getContent(k),setContent:(k,N)=>({content:v.setContent(k,N),html:""}),insertContent:(k,N)=>(v.insertContent(k),""),addVisual:v.addVisual},selection:{getContent:(k,N)=>h.getContent(N)},autocompleter:{addDecoration:C.addDecoration,removeDecoration:C.removeDecoration},raw:{getModel:()=>E.some(S.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),OE(a)||(i.body.spellcheck=!1,Gp.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=dt.each,n=St.BACKSPACE,r=St.DELETE,o=t.dom,s=t.selection,a=t.parser,i=fe.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),u=fe.deviceType.isiPhone()||fe.deviceType.isiPad(),f=fe.os.isMacOS()||fe.os.isiOS(),p=(L,z)=>{try{t.getDoc().execCommand(L,!1,String(z))}catch{}},b=L=>L.isDefaultPrevented(),g=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},v=()=>{t.inline||o.bind(t.getDoc(),"mousedown mouseup",L=>{let z;if(L.target===t.getDoc().documentElement)if(z=s.getRng(),t.getBody().focus(),"mousedown"===L.type){if(_r(z.startContainer))return;s.placeCaretAt(L.clientX,L.clientY)}else s.setRng(z)})},h=()=>{Range.prototype.getClientRects||t.on("mousedown",L=>{if(!b(L)&&"HTML"===L.target.nodeName){const z=t.getBody();z.blur(),Tr.setEditorTimeout(t,()=>{z.focus()})}})},C=()=>{const L=Hh(t);t.on("click",z=>{const I=z.target;/^(IMG|HR)$/.test(I.nodeName)&&o.isEditable(I.parentNode)&&(z.preventDefault(),t.selection.select(I),t.nodeChanged()),"A"===I.nodeName&&o.hasClass(I,L)&&0===I.childNodes.length&&o.isEditable(I.parentNode)&&(z.preventDefault(),s.select(I))})},S=()=>{t.on("keydown",L=>{if(!b(L)&&L.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const z=s.getNode().previousSibling;if(z&&z.nodeName&&"table"===z.nodeName.toLowerCase())return L.preventDefault(),!1}return!0})},k=()=>{jh(t)||t.on("BeforeExecCommand mousedown",()=>{p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),Ih(t)||p("enableObjectResizing",!1)})},N=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},R=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},D=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",L=>{let z;"HTML"===L.target.nodeName&&(z=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(z),t.selection.normalize(),t.nodeChanged())}))},P=()=>{f&&t.on("keydown",L=>{!St.metaKeyPressed(L)||L.shiftKey||37!==L.keyCode&&39!==L.keyCode||(L.preventDefault(),t.selection.getSel().modify("move",37===L.keyCode?"backward":"forward","lineboundary"))})},U=()=>{t.on("click",L=>{let z=L.target;do{if("A"===z.tagName)return void L.preventDefault()}while(z=z.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Y=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",L=>{L.preventDefault()})})},V=_t;return Do(t)?(c&&(v(),C(),Y(),g(),u&&(R(),D(),U())),l&&(h(),k(),N(),P())):(t.on("keydown",L=>{if(b(L)||L.keyCode!==St.BACKSPACE)return;let z=s.getRng();const I=z.startContainer,$=z.startOffset,pt=o.getRoot();let it=I;if(z.collapsed&&0===$){for(;it.parentNode&&it.parentNode.firstChild===it&&it.parentNode!==pt;)it=it.parentNode;"BLOCKQUOTE"===it.nodeName&&(t.formatter.toggle("blockquote",void 0,it),z=o.createRng(),z.setStart(I,0),z.setEnd(I,0),s.setRng(z))}}),(()=>{const L=z=>{const I=o.create("body"),$=z.cloneContents();return I.appendChild($),s.serializer.serialize(I,{format:"html"})};t.on("keydown",z=>{const I=z.keyCode;if(!b(z)&&(I===r||I===n)&&t.selection.isEditable()){const $=t.selection.isCollapsed(),pt=t.getBody();if($&&!o.isEmpty(pt)||!$&&!(it=>{const Ot=L(it),ht=o.createRng();return ht.selectNode(t.getBody()),Ot===L(ht)})(t.selection.getRng()))return;z.preventDefault(),t.setContent(""),pt.firstChild&&o.isBlock(pt.firstChild)?t.selection.setCursorLocation(pt.firstChild,0):t.selection.setCursorLocation(pt,0),t.nodeChanged()}})})(),fe.windowsPhone||t.on("keyup focusin mouseup",L=>{St.modifierPressed(L)||(z=>{const I=z.getBody(),$=z.selection.getRng();return $.startContainer===$.endContainer&&$.startContainer===I&&0===$.startOffset&&$.endOffset===I.childNodes.length})(t)||s.normalize()},!0),c&&(v(),C(),t.on("init",()=>{p("DefaultParagraphSeparator",er(t))}),Y(),S(),a.addNodeFilter("br",L=>{let z=L.length;for(;z--;)"Apple-interchange-newline"===L[z].attr("class")&&L[z].remove()}),u?(R(),D(),U()):g()),l&&(t.on("keydown",L=>{if(!b(L)&&L.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const z=s.getNode(),I=z.previousSibling;if("HR"===z.nodeName)return o.remove(z),void L.preventDefault();I&&I.nodeName&&"hr"===I.nodeName.toLowerCase()&&(o.remove(I),L.preventDefault())}}}),h(),(()=>{const L=()=>{const I=o.getAttribs(s.getStart().cloneNode(!1));return()=>{const $=s.getStart();$!==t.getBody()&&(o.setAttrib($,"style",null),e(I,pt=>{$.setAttributeNode(pt.cloneNode(!0))}))}},z=()=>!s.isCollapsed()&&o.getParent(s.getStart(),o.isBlock)!==o.getParent(s.getEnd(),o.isBlock);t.on("keypress",I=>{let $;return!(!(b(I)||8!==I.keyCode&&46!==I.keyCode)&&z()&&($=L(),t.getDoc().execCommand("delete",!1),$(),I.preventDefault(),1))}),o.bind(t.getDoc(),"cut",I=>{if(!b(I)&&z()){const $=L();Tr.setEditorTimeout(t,()=>{$()})}})})(),k(),t.on("SetContent ExecCommand",L=>{"setcontent"!==L.type&&"mceInsertLink"!==L.command||e(o.select("a:not([data-mce-block])"),z=>{var I;let $=z.parentNode;const pt=o.getRoot();if($?.lastChild===z){for(;$&&!o.isBlock($);){if((null===(I=$.parentNode)||void 0===I?void 0:I.lastChild)!==$||$===pt)return;$=$.parentNode}o.add($,"br",{"data-mce-bogus":1})}})}),N(),P(),S(),t.on("drop",L=>{var z;const I=null===(z=L.dataTransfer)||void 0===z?void 0:z.getData("text/html");Dt(I)&&/^<img[^>]*>$/.test(I)&&t.dispatch("dragend",new window.DragEvent("dragend",L))}))),{refreshContentEditable:V,isHidden:()=>{if(!l||t.removed)return!1;const L=t.selection.getSel();return!L||!L.rangeCount||0===L.rangeCount}}})(a),a.dispatch("PostRender");const c=rE(a);void 0!==c&&(l.dir=c);const u=DE(a);u&&a.on("BeforeSetContent",f=>{dt.each(u,p=>{f.content=f.content.replace(p,b=>"\x3c!--mce:protected "+escape(b)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing="compositionstart"===f.type})})(t),s.fold(()=>{nS(t).then(()=>Qp(t))},a=>{t.setProgressState(!0),nS(t).then(()=>{a().then(i=>{t.setProgressState(!1),Qp(t),Zy(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),Qp(t),Zy(t)})})})},iO=Be,Jp=we.DOM,oS=we.DOM,sS=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),aS=t=>{const e=t.getElement();return t.inline?sS(null):(n=>{const r=oS.create("div");return oS.insertAfter(r,n),sS(r,r)})(e)},lO=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const r=dt.trim(Bh(n)),o=n.ui.registry.getAll().icons,s={...md.get("default").icons,...md.get(r).icons};Se(s,(a,i)=>{te(o,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const r=Ka(n);if(Dt(r)){const o=va.get(r);n.theme=o(n,va.urls[r])||{},pe(n.theme.init)&&n.theme.init(n,va.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const r=Xu(n),o=si.get(r);n.model=o(n,si.urls[r])})(t),(n=>{const r=[];rt(Ac(n),o=>{((s,a,i)=>{const l=ai.get(i),c=ai.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=dt.trim(i),l&&-1===dt.inArray(a,i)){if(s.plugins[i])return;try{const u=l(s,c)||{};s.plugins[i]=u,pe(u.init)&&(u.init(s,c),a.push(i))}catch(u){((f,p,b)=>{const g=ao.translate(["Failed to initialize plugin: {0}",p]);z0(f,"PluginLoadError",{message:g}),gd(g,b),pd(f,g)})(s,i,u)}}})(n,r,o.replace(/^\-/,""))})})(t);const e=await(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,Dt(Ka(n))?(o=>{const s=o.theme.renderUI;return s?s():aS(o)})(n):pe(Ka(n))?(o=>{const s=o.getElement(),a=Ka(o)(o,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||o.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||o.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):aS(n)})(t);var n,r;((n,r)=>{const o={show:E.from(r.show).getOr(_t),hide:E.from(r.hide).getOr(_t),isEnabled:E.from(r.isEnabled).getOr(Be),setEnabled:s=>{n.mode.isReadOnly()||E.from(r.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...o}})(t,E.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(p1(r=n,eE(r)),(r=>p1(r,Mh(r)))(n)),t.inline?rS(t):((n,r)=>{((o,s)=>{const a=o.translate("Rich Text Area"),i=Jr(O(o.getElement()),"tabindex").bind(Hs),l=((c,u,f,p)=>{const b=X("iframe");return p.each(g=>Xe(b,"tabindex",g)),Qr(b,f),Qr(b,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:u}),T(b,"tox-edit-area__iframe"),b})(o.id,a,Mk(o),i).dom;l.onload=()=>{l.onload=null,o.dispatch("load")},o.contentAreaContainer=s.iframeContainer,o.iframeElement=l,o.iframeHTML=(c=>{let u=Ik(c)+"<html><head>";Rh(c)!==c.documentBaseUrl&&(u+='<base href="'+c.documentBaseURI.getURI()+'" />'),u+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const f=Fk(c),p=jk(c),b=c.translate(_E(c));return Th(c)&&(u+='<meta http-equiv="Content-Security-Policy" content="'+Th(c)+'" />'),u+=`</head><body id="${f}" class="mce-content-body ${p}" data-id="${c.id}" aria-label="${b}"><br></body></html>`,u})(o),Jp.add(s.iframeContainer,l)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=Jp.isHidden(r.editorContainer)),n.getElement().style.display="none",Jp.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const s=o.iframeElement,a=()=>{o.contentDocument=s.contentDocument,rS(o)};if(YE(o)||fe.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close(),a()}else{const l=((t,e,n,r)=>((o,s,a,i,l)=>{const c=(u=a,f=i,p=>{u(p)&&f((b=>{const g=O(wr(b).getOr(b.target)),v=()=>b.stopPropagation(),h=()=>b.preventDefault(),C=ir(h,v);return{target:g,x:b.clientX,y:b.clientY,stop:v,prevent:h,kill:C,raw:b}})(p))});var u,f;return o.dom.addEventListener(s,c,!1),{unbind:kt(Jn,o,s,c,!1)}})(t,"load",n,()=>{l.unbind(),a()}))(O(s),0,iO);s.srcdoc=o.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},ya=we.DOM,iS=t=>"-"===t.charAt(0),lS=(t,e,n)=>E.from(e).filter(r=>Xn(r)&&!md.has(r)).map(r=>({url:`${t.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:E.some(r)})),cS=An().deviceType,dS=cS.isPhone(),dO=cS.isTablet(),jl=t=>{if(ye(t))return[];{const e=ct(t)?t:t.split(/[ ,]/),n=re(e,Yr);return $t(n,Xn)}},Zp=(t,e)=>te(t.sections(),e),fO=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ke(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),mO=(t,e)=>{var n;const r=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?dt.extend({},t.external_plugins,r):r},hO=(t,e)=>{const n=t.selection,r=t.dom;return/^ | $/.test(e)?((o,s,a)=>{const i=O(o.getRoot());return a=hl(i,G.fromRangeStart(s))?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),bl(i,G.fromRangeEnd(s))?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),e):e},Vd=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const s=dt.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:s}}return{content:o,details:{}}})(e);Lm(t,{...r,content:hO(t,n),format:"html",set:!1,selection:!0}).each(o=>{const s=(i=o.content,l=r,Um(t).editor.insertContent(i,l));var i,l;Mm(t,s,o),t.addVisual()})}},bO={"font-size":"size","font-family":"face"},vO=Bi("font"),uS=t=>(e,n)=>E.from(n).map(O).filter(Cn).bind(r=>{return(o=t,s=e,a=r.dom,fm(O(a),i=>{return q(l=i,o).orThunk(()=>vO(l)?ke(bO,o).bind(c=>Jr(l,c)):E.none());var l},i=>de(O(s),i))).or(((o,s)=>E.from(we.DOM.getStyle(s,o,!0)))(t,r.dom));var o,s,a}).getOr(""),yO=uS("font-size"),CO=ir(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),uS("font-family")),xO=t=>qn(t.getBody()).bind(e=>{const n=e.container();return E.from(lt(n)?n.parentNode:n)}),tg=(t,e)=>{return n=t,r=Ms(E.some,e),(o=n,E.from(o.selection.getRng()).bind(s=>{const a=o.getBody();return s.startContainer===a&&0===s.startOffset?E.none():E.from(o.selection.getStart(!0))})).orThunk(kt(xO,n)).map(O).filter(Cn).bind(r);var n,r,o},fS=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const r=dt.explode(t.options.get("font_size_style_values")),o=dt.explode(t.options.get("font_size_classes"));return o.length>0?o[n-1]||e:r[n-1]||e}return e}return e},wO=t=>{const e=t.split(/\s*,\s*/);return re(e,n=>-1===n.indexOf(" ")||Je(n,'"')||Je(n,"'")?n:`'${n}'`).join(",")},kO=["toggleview"],mS=t=>Tt(kO,t.toLowerCase());class pS{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,r,o){const s=this.editor,a=e.toLowerCase(),i=o?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?Tf(c=s).each(u=>c.selection.setRng(u)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:r}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[a];return!!pe(l)&&(l(a,n,r),s.dispatch("ExecCommand",{command:e,ui:n,value:r}),!0)}queryCommandState(e){if(!mS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),r=this.commands.state[n];return!!pe(r)&&r(n)}queryCommandValue(e){if(!mS(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),r=this.commands.value[n];return pe(r)?r(n):""}addCommands(e,n="exec"){const r=this.commands;Se(e,(o,s)=>{rt(s.toLowerCase().split(","),a=>{r[n][a]=o})})}addCommand(e,n,r){const o=e.toLowerCase();this.commands.exec[o]=(s,a,i)=>n.call(r??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,r){this.commands.state[e.toLowerCase()]=()=>n.call(r??this.editor)}addQueryValueHandler(e,n,r){this.commands.value[e.toLowerCase()]=()=>n.call(r??this.editor)}}const Ca="data-mce-contenteditable",eg=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Kd=(t,e)=>{t.dom.contentEditable=e?"true":"false"},xa=t=>t.readonly,gS=t=>{t.parser.addAttributeFilter("contenteditable",e=>{xa(t)&&rt(e,n=>{n.attr(Ca,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(Ca,e=>{xa(t)&&rt(e,n=>{n.attr("contenteditable",n.attr(Ca))})}),t.serializer.addTempAttr(Ca)},_O=["copy"],NO=dt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class ng{static isNative(e){return!!NO[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ce}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const r=e.toLowerCase(),o=Ou(r,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const s=this.bindings[r];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(!1===l.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(e,n,r,o){if(!1===n&&(n=Ce),n){const s={func:n,removed:!1};o&&dt.extend(s,o);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=r?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(e,n){if(e){const r=e.toLowerCase().split(" ");let o=r.length;for(;o--;){const s=r[o];let a=this.bindings[s];if(!s)return Se(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=Kr(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,rt(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else Se(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(e,n,r){return this.on(e,n,r,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const zl=t=>(t._eventDispatcher||(t._eventDispatcher=new ng({scope:t,toggleEvent:(e,n)=>{ng.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),rg={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const r=this;if(r.removed&&"remove"!==t&&"detach"!==t)return Ou(t.toLowerCase(),e??{},r);const o=zl(r).dispatch(t,e);if(!1!==n&&r.parent){let s=r.parent();for(;s&&!o.isPropagationStopped();)s.dispatch(t,o,!1),s=s.parent?s.parent():void 0}return o},on(t,e,n){return zl(this).on(t,e,n)},off(t,e){return zl(this).off(t,e)},once(t,e){return zl(this).once(t,e)},hasEventListeners(t){return zl(this).has(t)}},Xd=we.DOM;let wa;const Gd=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=Fh(t);return n?(t.eventRoot||(t.eventRoot=Xd.select(n)[0]),t.eventRoot):t.getBody()},hS=(t,e,n)=>{var r;(r=t).hidden||xa(r)?xa(t)&&((r,o)=>{if("click"!==o.type||St.metaKeyPressed(o))Tt(_O,o.type)&&r.dispatch(o.type,o);else{const s=O(o.target);(a=r,i=s,Ur(i,"a",l=>de(l,O(a.getBody()))).bind(l=>Jr(l,"href"))).each(a=>{if(o.preventDefault(),/^#/.test(a)){const i=r.dom.select(`${a},[name="${xi(a,"#")}"]`);i.length&&r.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},bS=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=Gd(t,e);if(Fh(t)){if(wa||(wa={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||wa&&(Se(wa,(o,s)=>{t.dom.unbind(Gd(t,s))}),wa=null)})),wa[e])return;const r=o=>{const s=o.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||Xd.isChildOf(s,l))&&hS(a[i],e,o)}};wa[e]=r,Xd.bind(n,e,r)}else{const r=o=>{hS(t,e,o)};Xd.bind(n,e,r),t.delegates[e]=r}},vS={...rg,bindPendingEventDelegates(){const t=this;dt.each(t._pendingNativeEvents,e=>{bS(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?bS(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(Gd(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Se(t.delegates,(r,o)=>{t.dom.unbind(Gd(t,o),o,r)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},AO=t=>Dt(t)?{value:t.split(/[ ,]/),valid:!0}:In(t,Dt)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},yS=(t,e)=>t+(as(e.message)?"":`. ${e.message}`),CS=t=>t.valid,og=(t,e,n="")=>{const r=e(t);return Mn(r)?r?{value:t,valid:!0}:{valid:!1,message:n}:r},RO=["design","readonly"],xS=(t,e,n,r)=>{const o=n[e.get()],s=n[r];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${r}:`,a)}var a;o.deactivate(),o.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=O(t.getBody());var r,o,s;s=e,K(r=n,o="mce-content-readonly")&&!s?F(r,o):s&&T(r,o),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(r=>{E.from(r.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,Kd(n,!1),rt(Dn(n,'*[contenteditable="true"]'),r=>{Xe(r,Ca,"true"),Kd(r,!1)})):(t.readonly=!1,t.hasEditableRoot()&&Kd(n,!0),rt(Dn(n,`*[${Ca}="true"]`),r=>{on(r,Ca),Kd(r,!0)}),eg(t,"StyleWithCSS",!1),eg(t,"enableInlineTableEditing",!1),eg(t,"enableObjectResizing",!1),(r=>ua(r)||(o=>{const s=Te(O(o.getElement()));return Af(s).filter(a=>!Df(a.dom)&&Kc(o,a.dom)).isSome()})(r))(t)&&t.focus(),(r=>{r.selection.setRng(r.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(r),(a=t).dispatch("SwitchMode",{mode:r})},sg=dt.each,ag=dt.explode,TO={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},wS=dt.makeMap("alt,ctrl,shift,meta,access"),OO=t=>{const e={},n=fe.os.isMacOS()||fe.os.isiOS();sg(ag(t.toLowerCase(),"+"),s=>{s in wS?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=TO[s]||s.toUpperCase().charCodeAt(0))});const r=[e.keyCode];let o;for(o in wS)e[o]?r.push(o):e[o]=!1;return e.id=r.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class SS{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(sg(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,r,o){const s=this,a=s.normalizeCommandFunc(r);return sg(ag(dt.trim(e)),i=>{const l=s.createShortcut(i,n,a,o);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,r=e;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:dt.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,n,r,o){const s=dt.map(ag(e,">"),OO);return s[s.length-1]=dt.extend(s[s.length-1],{func:r,scope:o||this.editor}),dt.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const DO=()=>{const t=(()=>{const e={},n={},r={},o={},s={},a={},i={},l={},c=(u,f)=>(p,b)=>{u[p.toLowerCase()]={...b,type:f}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(r,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(a,"contexttoolbar"),addContextForm:c(a,"contextform"),addSidebar:c(i,"sidebar"),addView:c(l,"views"),addIcon:(u,f)=>o[u.toLowerCase()]=f,getAll:()=>({buttons:e,menuItems:n,icons:o,popups:r,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Sa=we.DOM,kS=dt.extend,BO=dt.each;class Yd{constructor(e,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,kS(this,vS);const o=this;this.id=e,this.hidden=!1;const s=((t,e,n,r,o)=>{var s;const a=t?{mobile:fO(null!==(s=o.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return Uo(s,(c,u)=>Tt(t,u),Na(i),Na(l)),{t:i,f:l}})(e);return o=n.f,{sections:gt(n.t),options:gt(o)};var o})(["mobile"],Cp(a,o)),l=dt.extend(n,r,i.options(),t&&Zp(i,"mobile")?((c,u,f={})=>{const p=c.sections(),b=ke(p,u).getOr({});return dt.extend({},f,b)})(i,"mobile"):{},{external_plugins:mO(r,i.options())});return((c,u,f,p)=>{const b=jl(f.forced_plugins),g=jl(p.plugins),v=Zp(S=u,"mobile")?S.sections().mobile:{},h=((S,k,N,R)=>S&&Zp(k,"mobile")?R:N)(c,u,g,v.plugins?jl(v.plugins):g),C=((S,k)=>[...jl(S),...jl(k)])(b,h);var S;return dt.extend(p,{forced_plugins:b,plugins:C})})(t,i,r,l)})(dS||dO,dS,g=n,r.defaultOptions,g);var g;this.options=((b,g)=>{const v={},h={},C=(k,N,R)=>{const D=og(N,R);return CS(D)?(h[k]=D.value,!0):(console.warn(yS(`Invalid value passed for the ${k} option`,D)),!1)},S=k=>te(v,k);return{register:(k,N)=>{const R=Dt(N.processor)?(P=>{const U=(()=>{switch(P){case"array":return ct;case"boolean":return Mn;case"function":return pe;case"number":return x;case"object":return Vt;case"string":return Dt;case"string[]":return AO;case"object[]":return Y=>In(Y,Vt);case"regexp":return Y=>Cr(Y,RegExp);default:return Be}})();return Y=>og(Y,U,`The value must be a ${P}.`)})(N.processor):N.processor,D=((P,U,Y)=>{if(!De(U)){const V=og(U,Y);if(CS(V))return V.value;console.error(yS(`Invalid default value passed for the "${P}" option`,V))}})(k,N.default,R);v[k]={...N,default:D,processor:R},ke(h,k).orThunk(()=>ke(g,k)).each(P=>C(k,P,R))},isRegistered:S,get:k=>ke(h,k).orThunk(()=>ke(v,k).map(N=>N.default)).getOrUndefined(),set:(k,N)=>{if(S(k)){const R=v[k];return R.immutable?(console.error(`"${k}" is an immutable option and cannot be updated`),!1):C(k,N,R.processor)}return console.warn(`"${k}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:k=>{const N=S(k);return N&&delete h[k],N},isSet:k=>te(h,k)}})(0,s),(b=>{const g=b.options.register;g("id",{processor:"string",default:b.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:b.documentBaseUrl}),g("body_id",{processor:Ah(b,"tinymce"),default:"tinymce"}),g("body_class",{processor:Ah(b),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:v=>{const h=Dt(v)&&Xn(v);return h?{value:v,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:v=>{const h=Tt(["block","linebreak","invert","default"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:v=>Mn(v)||Dt(v)?{valid:!0,value:v}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:v=>{const h=!1===v||Dt(v)||In(v,Dt);return h?Dt(v)?{value:re(v.split(","),Yr),valid:h}:ct(v)?{value:v,valid:h}:!1===v?{value:[],valid:h}:{value:v,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Gu(b)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:v=>{const h=Dt(v)||In(v,Dt);return h?{value:ct(v)?v:re(v.split(","),Yr),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:v=>{const h=Mn(v)||Dt(v);return h?!1===v||Wu.isiPhone()||Wu.isiPad()?{value:"",valid:h}:{value:!0===v?"table,img,figure.image,div,video,iframe":v,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!Pk}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"object"}),g("service_message",{processor:"string"}),g("theme",{processor:v=>!1===v||Dt(v)||pe(v),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:v=>{const h=!1===v||Dt(v);return h?{value:!1===v?"":v,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:b.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:b.convertURL}),g("url_converter_scope",{processor:"object",default:b}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:"string"}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:Vu}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:Vu}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:Vu}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:v=>Dt(v)||!0===v}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:v=>In(v,Vt)||!1===v?{value:_h(!1===v?[]:v),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),g("text_patterns_lookup",{processor:v=>{return pe(v)?{value:(h=v,C=>{const S=h(C);return _h(S)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:v=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:v=>In(v,Nh)?{value:v,valid:!0}:Nh(v)?{value:[v],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!1}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:v=>{const h=Tt(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:v=>{const h=Tt(["inherited","collapsed","expanded"],v);return h?{value:v,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),b.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:ao.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:Lk.getAttrib(b.getElement(),"placeholder")})})})(o);const a=this.options.get;a("deprecation_warnings")&&((b,g)=>{((v,h)=>{const C=(t=>{const e=i1(t,bA),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),zo(e)})(v),S=(t=>l1(t,yA))(h),k=S.length>0,N=C.length>0,R="mobile"===h.theme;if(k||N||R){const D="\n- ",P=R?`\n\nThemes:${D}mobile`:"",U=k?`\n\nPlugins:${D}${S.join(D)}`:"",Y=N?`\n\nOptions:${D}${C.join(D)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+P+U+Y)}})(b,g),((v,h)=>{const C=(t=>i1(t,vA))(v),S=(t=>l1(t,a1.map(e=>e.name)))(h),k=S.length>0,N=C.length>0;if(k||N){const R="\n- ",D=k?`\n\nPlugins:${R}${S.map(kA).join(R)}`:"",P=N?`\n\nOptions:${R}${C.join(R)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+D+P)}})(b,g)})(n,s);const i=a("suffix");i&&(r.suffix=i),this.suffix=r.suffix;const l=a("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const c=Ku(o);c&&(Yo.ScriptLoader._setReferrerPolicy(c),we.DOM.styleSheetLoader._setReferrerPolicy(c));const u=zh(o);mt(u)&&we.DOM.styleSheetLoader._setContentCssCors(u),Hn.languageLoad=a("language_load"),Hn.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new uo(Rh(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Gu(o),this.hasVisual=kE(o),this.shortcuts=new SS(this),this.editorCommands=new pS(this),(t=>{var e;(t=>{(e=>{const n=r=>()=>{rt("left,center,right,justify".split(","),o=>{r!==o&&e.formatter.remove("align"+o)}),"none"!==r&&(e.formatter.toggle("align"+r,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=r=>()=>{const o=e.selection,s=o.isCollapsed()?[e.dom.getParent(o.getNode(),e.dom.isBlock)]:o.getSelectedBlocks();return Ae(s,a=>mt(e.formatter.matchNode(a,r)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=e.getDoc();let o;try{r.execCommand(n)}catch{o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(fe.os.isMacOS()||fe.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!xt(a)||s++!==o||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,r,o)=>{e.selection.select(o)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),so);if(n){const r=e.dom.createRng();r.selectNodeContents(n),e.selection.setRng(r)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{Vd(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{Vd(e,e.dom.encode(o))},insertHTML:(n,r,o)=>{Vd(e,o)},mceInsertContent:(n,r,o)=>{Vd(e,o)},mceSetContent:(n,r,o)=>{e.setContent(o)},mceReplaceContent:(n,r,o)=>{e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(ME(e))}})})(t),(e=>{const n=(r,o,s)=>{const a=Dt(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");Vt(a)&&Dt(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const r=e.dom.getParent(e.selection.getStart(),"a");return void(r&&e.dom.remove(r,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{SC(e,"indent")},Outdent:()=>{kC(e)}}),e.editorCommands.addCommands({Outdent:()=>CC(e)},"state")})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Id(Ax,e)},mceInsertNewLine:(n,r,o)=>{Lx(e,o)},InsertLineBreak:(n,r,o)=>{Id(Ox,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{n.getDoc().execCommand(r);const o=n.dom.getParent(n.selection.getNode(),"ol,ul");if(o){const s=o.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=n.selection.getBookmark();n.dom.split(s,o),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{const o=n.dom.getParent(n.selection.getNode(),"ul,ol");return o&&("insertunorderedlist"===r&&"UL"===o.tagName||"insertorderedlist"===r&&"OL"===o.tagName)}},"state")})(e)})(t),(e=>{(n=>{const r=(o,s)=>{n.formatter.toggle(o,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,s,a)=>{r(o,{value:a})},BackColor:(o,s,a)=>{r("hilitecolor",{value:a})},FontName:(o,s,a)=>{((i,l)=>{const c=fS(i,l);i.formatter.toggle("fontname",{value:wO(c)}),i.nodeChanged()})(n,a)},FontSize:(o,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:fS(i,a)}),i.nodeChanged()},LineHeight:(o,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(o,s,a)=>{var i;r(o,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,s,a)=>{r(Dt(a)?a:"p")},mceToggleFormat:(o,s,a)=>{r(a)}})})(e),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return tg(o=n,s=>CO(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return tg(o=n,s=>yO(o.getBody(),s.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return tg(o=n,s=>{const a=O(o.getBody());return fm(s,l=>q(l,"line-height"),kt(de,a)).getOrThunk(()=>{const l=parseFloat(kr(s,"line-height")),c=parseFloat(kr(s,"font-size"));return String(l/c)})}).getOr("");var o})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const s=o??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,r,o)=>{var s;(s=e).removed||(!0===o?Lf(s):(i=>{const l=i.selection,c=i.getBody();let u=l.getRng();i.quirks.refreshContentEditable(),mt(i.bookmark)&&!ua(i)&&Tf(i).each(p=>{i.selection.setRng(p),u=p});const f=(p=i,b=l.getNode(),p.dom.getParent(b,g=>"true"===p.dom.getContentEditable(g)));var p,b;if(f&&i.dom.isChildOf(f,c))return Pf(f),bb(i,u),void Lf(i);i.inline||(fe.browser.isOpera()||Pf(c),i.getWin().focus()),(fe.browser.isFirefox()||i.inline)&&(Pf(c),bb(i,u)),Lf(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const f=a("cache_suffix");f&&(fe.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:DO(),styleSheetLoader:void 0,show:_t,hide:_t,setEnabled:_t,isEnabled:Be},this.mode=(b=>{const g=cn("design"),v=cn({design:{activate:_t,deactivate:_t,editorReadOnly:!1},readonly:{activate:_t,deactivate:_t,editorReadOnly:!0}});return(h=b).serializer?gS(h):h.on("PreInit",()=>{gS(h)}),(h=>{h.on("ShowCaret",C=>{xa(h)&&C.preventDefault()}),h.on("ObjectSelected",C=>{xa(h)&&C.preventDefault()})})(b),{isReadOnly:()=>xa(b),set:h=>((C,S,k,N)=>{if(N!==k.get()){if(!te(S,N))throw new Error(`Editor mode '${N}' is invalid`);C.initialized?xS(C,k,S,N):C.on("init",()=>xS(C,k,S,N))}})(b,v.get(),g,h),get:()=>g.get(),register:(h,C)=>{v.set(((S,k,N)=>{if(Tt(RO,k))throw new Error(`Cannot override default mode ${k}`);return{...S,[k]:{...N,deactivate:()=>{try{N.deactivate()}catch(R){console.error(`problem while deactivating editor mode ${k}:`,R)}}}}})(v.get(),h,C))}};var h})(o),r.dispatch("SetupEditor",{editor:this});const p=NE(o);pe(p)&&p.call(o,o)}render(){(e=>{const n=e.id;ao.setCode(Ph(e));const r=()=>{ya.unbind(window,"ready",r),e.render()};if(!Js.Event.domLoaded)return void ya.bind(window,"ready",r);if(!e.getElement())return;const o=O(e.getElement()),s=d(o);var l;e.on("remove",()=>{vo(o.dom.attributes,i=>on(o,i.name)),Qr(o,s)}),e.ui.styleSheetLoader=Rg.forElement(o,{contentCssCors:zh(l=e),referrerPolicy:Ku(l)}),Gu(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||ya.getParent(n,"form");a&&(e.formElement=a,gE(e)&&!du(e.getElement())&&(ya.insertAfter(ya.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},ya.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!hE(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=f1(e),e.notificationManager=u1(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=ya.encode(i.content))}),bE(e)&&e.on("submit",()=>{e.initialized&&e.save()}),vE(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Yo.ScriptLoader,r=()=>{!t.removed&&(o=>{const s=Ka(o);return!Dt(s)||mt(va.get(s))})(t)&&(o=>{const s=Xu(o);return mt(si.get(s))})(t)&&lO(t)};((o,s)=>{const a=Ka(o);if(Dt(a)&&!iS(a)&&!te(va.urls,a)){const i=lE(o),l=i?o.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;va.load(a,l).catch(()=>{Sl(o,"ThemeLoadError",kl("theme",l,a))})}})(t,e),((o,s)=>{const a=Xu(o);if("plugin"!==a&&!te(si.urls,a)){const i=cE(o),l=Dt(i)?o.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;si.load(a,l).catch(()=>{Sl(o,"ModelLoadError",kl("model",l,a))})}})(t,e),((o,s)=>{const a=Ph(s),i=Zk(s);if(!ao.hasCode(a)&&"en"!==a){const l=Xn(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;o.add(l).catch(()=>{Sl(s,"LanguageLoadError",kl("language",l,a))})}})(n,t),((o,s,a)=>{const i=lS(s,"default",a),l=(c=s,E.from(Kk(c)).filter(Xn).map(u=>({url:u,name:E.none()}))).orThunk(()=>lS(s,Bh(s),""));var c;rt((c=>{const u=[],f=p=>{u.push(p)};for(let p=0;p<c.length;p++)c[p].each(f);return u})([i,l]),c=>{o.add(c.url).catch(()=>{var u,f,p;u=s,f=c.url,p=c.name.getOrUndefined(),Sl(u,"IconsLoadError",kl("icons",f,p))})})})(n,t,e),((o,s)=>{const a=(i,l)=>{ai.load(i,l).catch(()=>{Sl(o,"PluginLoadError",kl("plugin",l,i))})};Se(wE(o),(i,l)=>{a(l,i),o.options.set("plugins",Ac(o).concat(l))}),rt(Ac(o),i=>{!(i=dt.trim(i))||ai.urls[i]||iS(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(r,r)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return ua(this)}translate(e){return ao.translate(e)}getParam(e,n,r){const o=this.options;return o.isRegistered(e)||(mt(r)?o.register(e,{processor:r,default:n}):o.register(e,{processor:Be,default:n})),o.isSet(e)||De(n)?o.get(e):n}hasPlugin(e,n){return!(!Tt(Ac(this),e)||n&&void 0===ai.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,r){this.editorCommands.addCommand(e,n,r)}addQueryStateHandler(e,n,r){this.editorCommands.addQueryStateHandler(e,n,r)}addQueryValueHandler(e,n,r){this.editorCommands.addQueryValueHandler(e,n,r)}addShortcut(e,n,r,o){this.shortcuts.add(e,n,r,o)}execCommand(e,n,r,o){return this.editorCommands.execCommand(e,n,r,o)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(Sa.show(e.getContainer()),Sa.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(Sa.hide(e.getContainer()),Sa.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o={...e,load:!0},s=du(r)?r.value:r.innerHTML,a=n.setContent(s,o);return o.no_events||n.dispatch("LoadContent",{...o,element:r}),a}return""}save(e={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o={...e,save:!0,element:r};let s=n.getContent(o);const a={...o,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,du(r))r.value=s;else{!e.is_removing&&n.inline||(r.innerHTML=s);const i=Sa.getParent(n.id,"form");i&&BO(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=o.element=r=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return qm(this,e,n)}getContent(e){return((n,r={})=>{const o=(s=r,a=r.format?r.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return zy(n,o).fold(ue,s=>{const a=(l=s,Um(n).editor.getContent(l));var l;return Hy(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=kS({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?qm(this,this.startContent,{format:"raw"}):qm(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||Sa.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Sa.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const r=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:r?.body)&&void 0!==n?n:null}convertURL(e,n,r){const o=this,s=o.options.get,a=RE(o);return pe(a)?a.call(o,e,r,!0,n):!s("convert_urls")||"link"===r||Vt(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,r)=>{var s;s=r,Ue(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,r;(n=this)._editableRoot!==(r=e)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:r}=e,o=e.getBody(),s=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&mt(s?.nextSibling)&&ud.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&o&&ud.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),ud.remove(e.getContainer()),fd(n),fd(r),e.destroy()}var a})(this)}destroy(e){((n,r)=>{const{selection:o,dom:s}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),fd(o),fd(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),ud.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const gi=we.DOM,Qd=dt.each;let Jd,ES=!1,or=[];const Zd=t=>{const e=t.type;Qd(Bs.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},_S=t=>{if(t!==ES){const e=we.DOM;t?(e.bind(window,"resize",Zd),e.bind(window,"scroll",Zd)):(e.unbind(window,"resize",Zd),e.unbind(window,"scroll",Zd)),ES=t}},NS=t=>{const e=or;return or=$t(or,n=>t!==n),Bs.activeEditor===t&&(Bs.activeEditor=or.length>0?or[0]:null),Bs.focusedEditor===t&&(Bs.focusedEditor=null),e.length!==or.length},PO="CSS1Compat"!==document.compatMode,Bs={...rg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"6.2",releaseDate:"2023-08-09",i18n:ao,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",r=uo.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)e=o.base||o.baseURL,n=o.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new uo(r).toAbsolute(e),t.documentBaseURL=r,t.baseURI=new uo(t.baseURL),t.suffix=n,(s=t).on("AddEditor",kt(H_,s)),s.on("RemoveEditor",kt(U_,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const r=t.plugin_base_urls;void 0!==r&&Se(r,(o,s)=>{Hn.PluginManager.urls[s]=o})},init(t){const e=this;let n;const r=dt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var c;gi.unbind(window,"ready",s),(c=>{const u=t.onpageload;u&&u.apply(e,[])})(),l=((c,u)=>{const f=[],p=pe(u)?b=>Ae(f,g=>u(g,b)):b=>Tt(f,b);for(let b=0,g=c.length;b<g;b++){const v=c[b];p(v)||f.push(v)}return f})((c=t,fe.browser.isIE()||fe.browser.isEdge()?(gd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):PO?(gd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Dt(c.selector)?gi.select(c.selector):mt(c.target)?[c.target]:[])),dt.each(l,c=>{var u;(u=e.get(c.id))&&u.initialized&&!(u.getContainer()||u.getBody()).parentNode&&(NS(u),u.unbindAllNativeEvents(),u.destroy(!0),u.removed=!0)}),l=dt.grep(l,c=>!e.get(c.id)),0===l.length?o([]):Qd(l,c=>{t.inline&&c.tagName.toLowerCase()in r?gd("Could not initialize inline editor on invalid inline target element",c):((u,f,p)=>{const b=new Yd(u,f,e);i.push(b),b.on("init",()=>{++a===l.length&&o(i)}),b.targetElm=b.targetElm||p,b.render()})((u=>{let f=u.id;return f||(f=ke(u,"name").filter(p=>!gi.get(p)).getOrThunk(gi.uniqueId),u.setAttribute("id",f)),f})(c),t,c)})};return gi.bind(window,"ready",s),new Promise(a=>{n?a(n):o=i=>{a(i)}})},get(t){return 0===arguments.length?or.slice(0):Dt(t)?qe(or,e=>e.id===t).getOr(null):x(t)&&or[t]?or[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&or.push(t),_S(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),Jd||(Jd=r=>{const o=e.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",Jd))),t},createEditor(t,e){return this.add(new Yd(t,e,this))},remove(t){const e=this;let n;if(t){if(!Dt(t))return n=t,Qt(e.get(n.id))?null:(NS(n)&&e.dispatch("RemoveEditor",{editor:n}),0===or.length&&window.removeEventListener("beforeunload",Jd),n.remove(),_S(or.length>0),n);Qd(gi.select(t),r=>{n=e.get(r.id),n&&e.remove(n)})}else for(let r=or.length-1;r>=0;r--)e.remove(or[r])},execCommand(t,e,n){var r;const o=this,s=Vt(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(t){case"mceAddEditor":return o.get(s)||new Yd(s,n.options,o).render(),!0;case"mceRemoveEditor":{const a=o.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Qd(or,t=>{t.save()})},addI18n:(t,e)=>{ao.add(t,e)},translate:t=>ao.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new uo(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new uo(this.baseURL)}};Bs.setup();const LO=(()=>{const t=xs();return{FakeClipboardItem:e=>({items:e,types:Qe(e),getType:n=>ke(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),AS=Math.min,hi=Math.max,tu=Math.round,RS=(t,e,n)=>{let r=e.x,o=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(o+=l),"r"===c[1]&&(r+=i),"c"===c[0]&&(o+=tu(l/2)),"c"===c[1]&&(r+=tu(i/2)),"b"===c[3]&&(o-=a),"r"===c[4]&&(r-=s),"c"===c[3]&&(o-=tu(a/2)),"c"===c[4]&&(r-=tu(s/2)),bi(r,o,s,a)},bi=(t,e,n,r)=>({x:t,y:e,w:n,h:r}),MO={inflate:(t,e,n)=>bi(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:RS,findBestRelativePosition:(t,e,n,r)=>{for(let o=0;o<r.length;o++){const s=RS(t,e,r[o]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return r[o]}return null},intersect:(t,e)=>{const n=hi(t.x,e.x),r=hi(t.y,e.y),o=AS(t.x+t.w,e.x+e.w),s=AS(t.y+t.h,e.y+e.h);return o-n<0||s-r<0?null:bi(n,r,o-n,s-r)},clamp:(t,e,n)=>{let r=t.x,o=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,c=hi(0,e.x-r),u=hi(0,e.y-o),f=hi(0,s-i),p=hi(0,a-l);return r+=c,o+=u,n&&(s+=c,a+=u,r-=f,o-=p),s-=f,a-=p,bi(r,o,s-r,a-o)},create:bi,fromClientRect:t=>bi(t.left,t.top,t.width,t.height)},IO=(()=>{const t={},e={};return{load:(n,r)=>{const o=`Script at URL "${r}" failed to load`,s=`Script at URL "${r}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const a=new Promise((i,l)=>{const c=((u,f,p=1e3)=>{let b=!1,g=null;const v=S=>(...k)=>{b||(b=!0,null!==g&&(clearTimeout(g),g=null),S.apply(null,k))},h=v(u),C=v(f);return{start:(...S)=>{b||null!==g||(g=setTimeout(()=>C.apply(null,S),p))},resolve:h,reject:C}})(i,l);e[n]=c.resolve,Yo.ScriptLoader.loadScript(r).then(()=>c.start(s),()=>c.reject(o))});return t[n]=a,a}},add:(n,r)=>{void 0!==e[n]&&(e[n](r),delete e[n]),t[n]=Promise.resolve(r)},unload:n=>{delete t[n]}}})();let Hl;try{const t="__storage_test__";Hl=window.localStorage,Hl.setItem(t,t),Hl.removeItem(t)}catch{Hl=(()=>{let e={},n=[];const r={getItem:o=>e[o]||null,setItem:(o,s)=>{n.push(o),e[o]=String(s)},key:o=>n[o],removeItem:o=>{n=n.filter(s=>s===o),delete e[o]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const FO={geom:{Rect:MO},util:{Delay:Tr,Tools:dt,VK:St,URI:uo,EventDispatcher:ng,Observable:rg,I18n:ao,LocalStorage:Hl,ImageUploader:t=>{const e=g1(),n=b1(t,e);return{upload:(r,o=!0)=>n.upload(r,o?h1(t):void 0)}}},dom:{EventUtils:Js,TreeWalker:en,TextSeeker:ea,DOMUtils:we,ScriptLoader:Yo,RangeUtils:da,Serializer:s1,StyleSheetLoader:Ag,ControlSelection:K0,BookmarkManager:ul,Selection:o1,Event:Js.Event},html:{Styles:Tu,Entities:ys,Node:rr,Schema:Cs,DomParser:oi,Writer:Ob,Serializer:_s},Env:fe,AddOnManager:Hn,Annotator:F0,Formatter:C1,UndoManager:w1,EditorCommands:pS,WindowManager:f1,NotificationManager:u1,EditorObservable:vS,Shortcuts:SS,Editor:Yd,FocusManager:hb,EditorManager:Bs,DOM:we.DOM,ScriptLoader:Yo.ScriptLoader,PluginManager:ai,ThemeManager:va,ModelManager:si,IconManager:md,Resource:IO,FakeClipboard:LO,trim:dt.trim,isArray:dt.isArray,is:dt.is,toArray:dt.toArray,makeMap:dt.makeMap,each:dt.each,map:dt.map,grep:dt.grep,inArray:dt.inArray,extend:dt.extend,walk:dt.walk,resolve:dt.resolve,explode:dt.explode,_addCacheSuffix:dt._addCacheSuffix},TS=dt.extend(Bs,FO);(t=>{window.tinymce=t,window.tinyMCE=t})(TS),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(TS)}(),function(vt,qt){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=vt.document?qt(vt,!0):function(Wt){if(!Wt.document)throw new Error("jQuery requires a window with a document");return qt(Wt)}:qt(vt)}(typeof window<"u"?window:this,function(vt,qt){"use strict";var Wt=[],Ht=Object.getPrototypeOf,ne=Wt.slice,je=Wt.flat?function(d){return Wt.flat.call(d)}:function(d){return Wt.concat.apply([],d)},kn=Wt.push,Ke=Wt.indexOf,Wn={},yr=Wn.toString,En=Wn.hasOwnProperty,Cr=En.toString,Dt=Cr.call(Object),Vt={},Pt=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},ct=function(d){return null!=d&&d===d.window},Qt=vt.document,Mn={type:!0,src:!0,nonce:!0,noModule:!0};function De(d,m,y){var w,_,A=(y=y||Qt).createElement("script");if(A.text=d,m)for(w in Mn)(_=m[w]||m.getAttribute&&m.getAttribute(w))&&A.setAttribute(w,_);y.head.appendChild(A).parentNode.removeChild(A)}function ye(d){return null==d?d+"":"object"==typeof d||"function"==typeof d?Wn[yr.call(d)]||"object":typeof d}var pe=/HTML$/i,x=function(d,m){return new x.fn.init(d,m)};function In(d){var m=!!d&&"length"in d&&d.length,y=ye(d);return!Pt(d)&&!ct(d)&&("array"===y||0===m||"number"==typeof m&&0<m&&m-1 in d)}function _t(d,m){return d.nodeName&&d.nodeName.toLowerCase()===m.toLowerCase()}x.fn=x.prototype={jquery:"3.7.0",constructor:x,length:0,toArray:function(){return ne.call(this)},get:function(d){return null==d?ne.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var m=x.merge(this.constructor(),d);return m.prevObject=this,m},each:function(d){return x.each(this,d)},map:function(d){return this.pushStack(x.map(this,function(m,y){return d.call(m,y,m)}))},slice:function(){return this.pushStack(ne.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(d,m){return(m+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(d,m){return m%2}))},eq:function(d){var m=this.length,y=+d+(d<0?m:0);return this.pushStack(0<=y&&y<m?[this[y]]:[])},end:function(){return this.prevObject||this.constructor()},push:kn,sort:Wt.sort,splice:Wt.splice},x.extend=x.fn.extend=function(){var d,m,y,w,_,A,T=arguments[0]||{},H=1,F=arguments.length,K=!1;for("boolean"==typeof T&&(K=T,T=arguments[H]||{},H++),"object"==typeof T||Pt(T)||(T={}),H===F&&(T=this,H--);H<F;H++)if(null!=(d=arguments[H]))for(m in d)w=d[m],"__proto__"!==m&&T!==w&&(K&&w&&(x.isPlainObject(w)||(_=Array.isArray(w)))?(y=T[m],A=_&&!Array.isArray(y)?[]:_||x.isPlainObject(y)?y:{},_=!1,T[m]=x.extend(K,A,w)):void 0!==w&&(T[m]=w));return T},x.extend({expando:"jQuery"+("3.7.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var m,y;return!(!d||"[object Object]"!==yr.call(d)||(m=Ht(d))&&("function"!=typeof(y=En.call(m,"constructor")&&m.constructor)||Cr.call(y)!==Dt))},isEmptyObject:function(d){var m;for(m in d)return!1;return!0},globalEval:function(d,m,y){De(d,{nonce:m&&m.nonce},y)},each:function(d,m){var y,w=0;if(In(d))for(y=d.length;w<y&&!1!==m.call(d[w],w,d[w]);w++);else for(w in d)if(!1===m.call(d[w],w,d[w]))break;return d},text:function(d){var m,y="",w=0,_=d.nodeType;if(_){if(1===_||9===_||11===_)return d.textContent;if(3===_||4===_)return d.nodeValue}else for(;m=d[w++];)y+=x.text(m);return y},makeArray:function(d,m){var y=m||[];return null!=d&&(In(Object(d))?x.merge(y,"string"==typeof d?[d]:d):kn.call(y,d)),y},inArray:function(d,m,y){return null==m?-1:Ke.call(m,d,y)},isXMLDoc:function(d){var y=d&&(d.ownerDocument||d).documentElement;return!pe.test(d&&d.namespaceURI||y&&y.nodeName||"HTML")},merge:function(d,m){for(var y=+m.length,w=0,_=d.length;w<y;w++)d[_++]=m[w];return d.length=_,d},grep:function(d,m,y){for(var w=[],_=0,A=d.length,T=!y;_<A;_++)!m(d[_],_)!==T&&w.push(d[_]);return w},map:function(d,m,y){var w,_,A=0,T=[];if(In(d))for(w=d.length;A<w;A++)null!=(_=m(d[A],A,y))&&T.push(_);else for(A in d)null!=(_=m(d[A],A,y))&&T.push(_);return je(T)},guid:1,support:Vt}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=Wt[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,m){Wn["[object "+m+"]"]=m.toLowerCase()});var ir=Wt.pop,Ms=Wt.sort,gt=Wt.splice,ue="[\\x20\\t\\r\\n\\f]",go=new RegExp("^"+ue+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ue+"+$","g");x.contains=function(d,m){var y=m&&m.parentNode;return d===y||!(!y||1!==y.nodeType||!(d.contains?d.contains(y):d.compareDocumentPosition&&16&d.compareDocumentPosition(y)))};var kt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Fo(d,m){return m?"\0"===d?"\ufffd":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}x.escapeSelector=function(d){return(d+"").replace(kt,Fo)};var fr=Qt,ho=kn;!function(){var d,m,y,w,_,A,T,H,F,K,tt=ho,st=x.expando,X=0,ut=0,O=Te(),ce=Te(),le=Te(),_e=Te(),sn=function(B,q){return B===q&&(_=!0),0},de="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",gn="(?:\\\\[\\da-fA-F]{1,6}"+ue+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",he="\\["+ue+"*("+gn+")(?:"+ue+"*([*^$|!~]?=)"+ue+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+gn+"))|)"+ue+"*\\]",zn=":("+gn+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+he+")*)|.*)\\)|)",be=new RegExp(ue+"+","g"),xe=new RegExp("^"+ue+"*,"+ue+"*"),Ko=new RegExp("^"+ue+"*([>+~]|"+ue+")"+ue+"*"),Ia=new RegExp(ue+"|>"),Rn=new RegExp(zn),Zr=new RegExp("^"+gn+"$"),zr={ID:new RegExp("^#("+gn+")"),CLASS:new RegExp("^\\.("+gn+")"),TAG:new RegExp("^("+gn+"|[*])"),ATTR:new RegExp("^"+he),PSEUDO:new RegExp("^"+zn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ue+"*(even|odd|(([+-]|)(\\d*)n|)"+ue+"*(?:([+-]|)"+ue+"*(\\d+)|))"+ue+"*\\)|)","i"),bool:new RegExp("^(?:"+de+")$","i"),needsContext:new RegExp("^"+ue+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ue+"*((?:-\\d)?\\d*)"+ue+"*\\)|)(?=[^-]|$)","i")},to=/^(?:input|select|textarea|button)$/i,Me=/^h\d$/i,xn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ze=/[+~]/,$e=new RegExp("\\\\[\\da-fA-F]{1,6}"+ue+"?|\\\\([^\\r\\n\\f])","g"),wn=function(B,q){var et="0x"+B.slice(1)-65536;return q||(et<0?String.fromCharCode(et+65536):String.fromCharCode(et>>10|55296,1023&et|56320))},Hr=function(){Qn()},Tn=no(function(B){return!0===B.disabled&&_t(B,"fieldset")},{dir:"parentNode",next:"legend"});try{tt.apply(Wt=ne.call(fr.childNodes),fr.childNodes)}catch{tt={apply:function(q,et){ho.apply(q,ne.call(et))},call:function(q){ho.apply(q,ne.call(arguments,1))}}}function oe(B,q,et,ot){var at,Bt,Ft,Nt,It,ge,se,Mt=q&&q.ownerDocument,me=q?q.nodeType:9;if(et=et||[],"string"!=typeof B||!B||1!==me&&9!==me&&11!==me)return et;if(!ot&&(Qn(q),q=q||A,H)){if(11!==me&&(It=xn.exec(B)))if(at=It[1]){if(9===me){if(!(Ft=q.getElementById(at)))return et;if(Ft.id===at)return tt.call(et,Ft),et}else if(Mt&&(Ft=Mt.getElementById(at))&&oe.contains(q,Ft)&&Ft.id===at)return tt.call(et,Ft),et}else{if(It[2])return tt.apply(et,q.getElementsByTagName(B)),et;if((at=It[3])&&q.getElementsByClassName)return tt.apply(et,q.getElementsByClassName(at)),et}if(!(_e[B+" "]||F&&F.test(B))){if(se=B,Mt=q,1===me&&(Ia.test(B)||Ko.test(B))){for((Mt=Ze.test(B)&&Sr(q.parentNode)||q)==q&&Vt.scope||((Nt=q.getAttribute("id"))?Nt=x.escapeSelector(Nt):q.setAttribute("id",Nt=st)),Bt=(ge=wo(B)).length;Bt--;)ge[Bt]=(Nt?"#"+Nt:":scope")+" "+Ur(ge[Bt]);se=ge.join(",")}try{return tt.apply(et,Mt.querySelectorAll(se)),et}catch{_e(B,!0)}finally{Nt===st&&q.removeAttribute("id")}}}return kr(B.replace(go,"$1"),q,et,ot)}function Te(){var B=[];return function q(et,ot){return B.push(et+" ")>m.cacheLength&&delete q[B.shift()],q[et+" "]=ot}}function He(B){return B[st]=!0,B}function Le(B){var q=A.createElement("fieldset");try{return!!B(q)}catch{return!1}finally{q.parentNode&&q.parentNode.removeChild(q),q=null}}function wr(B){return function(q){return _t(q,"input")&&q.type===B}}function fs(B){return function(q){return(_t(q,"input")||_t(q,"button"))&&q.type===B}}function eo(B){return function(q){return"form"in q?q.parentNode&&!1===q.disabled?"label"in q?"label"in q.parentNode?q.parentNode.disabled===B:q.disabled===B:q.isDisabled===B||q.isDisabled!==!B&&Tn(q)===B:q.disabled===B:"label"in q&&q.disabled===B}}function xo(B){return He(function(q){return q=+q,He(function(et,ot){for(var at,Bt=B([],et.length,q),Ft=Bt.length;Ft--;)et[at=Bt[Ft]]&&(et[at]=!(ot[at]=et[at]))})})}function Sr(B){return B&&typeof B.getElementsByTagName<"u"&&B}function Qn(B){var q,et=B?B.ownerDocument||B:fr;return et!=A&&9===et.nodeType&&et.documentElement&&(T=(A=et).documentElement,H=!x.isXMLDoc(A),K=T.matches||T.webkitMatchesSelector||T.msMatchesSelector,fr!=A&&(q=A.defaultView)&&q.top!==q&&q.addEventListener("unload",Hr),Vt.getById=Le(function(ot){return T.appendChild(ot).id=x.expando,!A.getElementsByName||!A.getElementsByName(x.expando).length}),Vt.disconnectedMatch=Le(function(ot){return K.call(ot,"*")}),Vt.scope=Le(function(){return A.querySelectorAll(":scope")}),Vt.cssHas=Le(function(){try{return A.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),Vt.getById?(m.filter.ID=function(ot){var at=ot.replace($e,wn);return function(Bt){return Bt.getAttribute("id")===at}},m.find.ID=function(ot,at){if(typeof at.getElementById<"u"&&H){var Bt=at.getElementById(ot);return Bt?[Bt]:[]}}):(m.filter.ID=function(ot){var at=ot.replace($e,wn);return function(Bt){var Ft=typeof Bt.getAttributeNode<"u"&&Bt.getAttributeNode("id");return Ft&&Ft.value===at}},m.find.ID=function(ot,at){if(typeof at.getElementById<"u"&&H){var Bt,Ft,Nt,It=at.getElementById(ot);if(It){if((Bt=It.getAttributeNode("id"))&&Bt.value===ot)return[It];for(Nt=at.getElementsByName(ot),Ft=0;It=Nt[Ft++];)if((Bt=It.getAttributeNode("id"))&&Bt.value===ot)return[It]}return[]}}),m.find.TAG=function(ot,at){return typeof at.getElementsByTagName<"u"?at.getElementsByTagName(ot):at.querySelectorAll(ot)},m.find.CLASS=function(ot,at){if(typeof at.getElementsByClassName<"u"&&H)return at.getElementsByClassName(ot)},F=[],Le(function(ot){var at;T.appendChild(ot).innerHTML="<a id='"+st+"' href='' disabled='disabled'></a><select id='"+st+"-\r\\' disabled='disabled'><option selected=''></option></select>",ot.querySelectorAll("[selected]").length||F.push("\\["+ue+"*(?:value|"+de+")"),ot.querySelectorAll("[id~="+st+"-]").length||F.push("~="),ot.querySelectorAll("a#"+st+"+*").length||F.push(".#.+[+~]"),ot.querySelectorAll(":checked").length||F.push(":checked"),(at=A.createElement("input")).setAttribute("type","hidden"),ot.appendChild(at).setAttribute("name","D"),T.appendChild(ot).disabled=!0,2!==ot.querySelectorAll(":disabled").length&&F.push(":enabled",":disabled"),(at=A.createElement("input")).setAttribute("name",""),ot.appendChild(at),ot.querySelectorAll("[name='']").length||F.push("\\["+ue+"*name"+ue+"*="+ue+"*(?:''|\"\")")}),Vt.cssHas||F.push(":has"),F=F.length&&new RegExp(F.join("|")),sn=function(ot,at){if(ot===at)return _=!0,0;var Bt=!ot.compareDocumentPosition-!at.compareDocumentPosition;return Bt||(1&(Bt=(ot.ownerDocument||ot)==(at.ownerDocument||at)?ot.compareDocumentPosition(at):1)||!Vt.sortDetached&&at.compareDocumentPosition(ot)===Bt?ot===A||ot.ownerDocument==fr&&oe.contains(fr,ot)?-1:at===A||at.ownerDocument==fr&&oe.contains(fr,at)?1:w?Ke.call(w,ot)-Ke.call(w,at):0:4&Bt?-1:1)}),A}for(d in oe.matches=function(B,q){return oe(B,null,null,q)},oe.matchesSelector=function(B,q){if(Qn(B),H&&!_e[q+" "]&&(!F||!F.test(q)))try{var et=K.call(B,q);if(et||Vt.disconnectedMatch||B.document&&11!==B.document.nodeType)return et}catch{_e(q,!0)}return 0<oe(q,A,null,[B]).length},oe.contains=function(B,q){return(B.ownerDocument||B)!=A&&Qn(B),x.contains(B,q)},oe.attr=function(B,q){(B.ownerDocument||B)!=A&&Qn(B);var et=m.attrHandle[q.toLowerCase()],ot=et&&En.call(m.attrHandle,q.toLowerCase())?et(B,q,!H):void 0;return void 0!==ot?ot:B.getAttribute(q)},oe.error=function(B){throw new Error("Syntax error, unrecognized expression: "+B)},x.uniqueSort=function(B){var q,et=[],ot=0,at=0;if(_=!Vt.sortStable,w=!Vt.sortStable&&ne.call(B,0),Ms.call(B,sn),_){for(;q=B[at++];)q===B[at]&&(ot=et.push(at));for(;ot--;)gt.call(B,et[ot],1)}return w=null,B},x.fn.uniqueSort=function(){return this.pushStack(x.uniqueSort(ne.apply(this)))},(m=x.expr={cacheLength:50,createPseudo:He,match:zr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(B){return B[1]=B[1].replace($e,wn),B[3]=(B[3]||B[4]||B[5]||"").replace($e,wn),"~="===B[2]&&(B[3]=" "+B[3]+" "),B.slice(0,4)},CHILD:function(B){return B[1]=B[1].toLowerCase(),"nth"===B[1].slice(0,3)?(B[3]||oe.error(B[0]),B[4]=+(B[4]?B[5]+(B[6]||1):2*("even"===B[3]||"odd"===B[3])),B[5]=+(B[7]+B[8]||"odd"===B[3])):B[3]&&oe.error(B[0]),B},PSEUDO:function(B){var q,et=!B[6]&&B[2];return zr.CHILD.test(B[0])?null:(B[3]?B[2]=B[4]||B[5]||"":et&&Rn.test(et)&&(q=wo(et,!0))&&(q=et.indexOf(")",et.length-q)-et.length)&&(B[0]=B[0].slice(0,q),B[2]=et.slice(0,q)),B.slice(0,3))}},filter:{TAG:function(B){var q=B.replace($e,wn).toLowerCase();return"*"===B?function(){return!0}:function(et){return _t(et,q)}},CLASS:function(B){var q=O[B+" "];return q||(q=new RegExp("(^|"+ue+")"+B+"("+ue+"|$)"))&&O(B,function(et){return q.test("string"==typeof et.className&&et.className||typeof et.getAttribute<"u"&&et.getAttribute("class")||"")})},ATTR:function(B,q,et){return function(ot){var at=oe.attr(ot,B);return null==at?"!="===q:!q||(at+="","="===q?at===et:"!="===q?at!==et:"^="===q?et&&0===at.indexOf(et):"*="===q?et&&-1<at.indexOf(et):"$="===q?et&&at.slice(-et.length)===et:"~="===q?-1<(" "+at.replace(be," ")+" ").indexOf(et):"|="===q&&(at===et||at.slice(0,et.length+1)===et+"-"))}},CHILD:function(B,q,et,ot,at){var Bt="nth"!==B.slice(0,3),Ft="last"!==B.slice(-4),Nt="of-type"===q;return 1===ot&&0===at?function(It){return!!It.parentNode}:function(It,ge,se){var Mt,me,ae,tn,an,hn=Bt!==Ft?"nextSibling":"previousSibling",Jn=It.parentNode,Zn=Nt&&It.nodeName.toLowerCase(),On=!se&&!Nt,Oe=!1;if(Jn){if(Bt){for(;hn;){for(ae=It;ae=ae[hn];)if(Nt?_t(ae,Zn):1===ae.nodeType)return!1;an=hn="only"===B&&!an&&"nextSibling"}return!0}if(an=[Ft?Jn.firstChild:Jn.lastChild],Ft&&On){for(Oe=(tn=(Mt=(me=Jn[st]||(Jn[st]={}))[B]||[])[0]===X&&Mt[1])&&Mt[2],ae=tn&&Jn.childNodes[tn];ae=++tn&&ae&&ae[hn]||(Oe=tn=0)||an.pop();)if(1===ae.nodeType&&++Oe&&ae===It){me[B]=[X,tn,Oe];break}}else if(On&&(Oe=tn=(Mt=(me=It[st]||(It[st]={}))[B]||[])[0]===X&&Mt[1]),!1===Oe)for(;(ae=++tn&&ae&&ae[hn]||(Oe=tn=0)||an.pop())&&(!(Nt?_t(ae,Zn):1===ae.nodeType)||!++Oe||(On&&((me=ae[st]||(ae[st]={}))[B]=[X,Oe]),ae!==It)););return(Oe-=at)===ot||Oe%ot==0&&0<=Oe/ot}}},PSEUDO:function(B,q){var et,ot=m.pseudos[B]||m.setFilters[B.toLowerCase()]||oe.error("unsupported pseudo: "+B);return ot[st]?ot(q):1<ot.length?(et=[B,B,"",q],m.setFilters.hasOwnProperty(B.toLowerCase())?He(function(at,Bt){for(var Ft,Nt=ot(at,q),It=Nt.length;It--;)at[Ft=Ke.call(at,Nt[It])]=!(Bt[Ft]=Nt[It])}):function(at){return ot(at,0,et)}):ot}},pseudos:{not:He(function(B){var q=[],et=[],ot=ps(B.replace(go,"$1"));return ot[st]?He(function(at,Bt,Ft,Nt){for(var It,ge=ot(at,null,Nt,[]),se=at.length;se--;)(It=ge[se])&&(at[se]=!(Bt[se]=It))}):function(at,Bt,Ft){return q[0]=at,ot(q,null,Ft,et),q[0]=null,!et.pop()}}),has:He(function(B){return function(q){return 0<oe(B,q).length}}),contains:He(function(B){return B=B.replace($e,wn),function(q){return-1<(q.textContent||x.text(q)).indexOf(B)}}),lang:He(function(B){return Zr.test(B||"")||oe.error("unsupported lang: "+B),B=B.replace($e,wn).toLowerCase(),function(q){var et;do{if(et=H?q.lang:q.getAttribute("xml:lang")||q.getAttribute("lang"))return(et=et.toLowerCase())===B||0===et.indexOf(B+"-")}while((q=q.parentNode)&&1===q.nodeType);return!1}}),target:function(B){var q=vt.location&&vt.location.hash;return q&&q.slice(1)===B.id},root:function(B){return B===T},focus:function(B){return B===function(){try{return A.activeElement}catch{}}()&&A.hasFocus()&&!!(B.type||B.href||~B.tabIndex)},enabled:eo(!1),disabled:eo(!0),checked:function(B){return _t(B,"input")&&!!B.checked||_t(B,"option")&&!!B.selected},selected:function(B){return!0===B.selected},empty:function(B){for(B=B.firstChild;B;B=B.nextSibling)if(B.nodeType<6)return!1;return!0},parent:function(B){return!m.pseudos.empty(B)},header:function(B){return Me.test(B.nodeName)},input:function(B){return to.test(B.nodeName)},button:function(B){return _t(B,"input")&&"button"===B.type||_t(B,"button")},text:function(B){var q;return _t(B,"input")&&"text"===B.type&&(null==(q=B.getAttribute("type"))||"text"===q.toLowerCase())},first:xo(function(){return[0]}),last:xo(function(B,q){return[q-1]}),eq:xo(function(B,q,et){return[et<0?et+q:et]}),even:xo(function(B,q){for(var et=0;et<q;et+=2)B.push(et);return B}),odd:xo(function(B,q){for(var et=1;et<q;et+=2)B.push(et);return B}),lt:xo(function(B,q,et){var ot;for(ot=et<0?et+q:q<et?q:et;0<=--ot;)B.push(ot);return B}),gt:xo(function(B,q,et){for(var ot=et<0?et+q:et;++ot<q;)B.push(ot);return B})}}).pseudos.nth=m.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})m.pseudos[d]=wr(d);for(d in{submit:!0,reset:!0})m.pseudos[d]=fs(d);function ms(){}function wo(B,q){var et,ot,at,Bt,Ft,Nt,It,ge=ce[B+" "];if(ge)return q?0:ge.slice(0);for(Ft=B,Nt=[],It=m.preFilter;Ft;){for(Bt in et&&!(ot=xe.exec(Ft))||(ot&&(Ft=Ft.slice(ot[0].length)||Ft),Nt.push(at=[])),et=!1,(ot=Ko.exec(Ft))&&(et=ot.shift(),at.push({value:et,type:ot[0].replace(go," ")}),Ft=Ft.slice(et.length)),m.filter)!(ot=zr[Bt].exec(Ft))||It[Bt]&&!(ot=It[Bt](ot))||(et=ot.shift(),at.push({value:et,type:Bt,matches:ot}),Ft=Ft.slice(et.length));if(!et)break}return q?Ft.length:Ft?oe.error(B):ce(B,Nt).slice(0)}function Ur(B){for(var q=0,et=B.length,ot="";q<et;q++)ot+=B[q].value;return ot}function no(B,q,et){var ot=q.dir,at=q.next,Bt=at||ot,Ft=et&&"parentNode"===Bt,Nt=ut++;return q.first?function(It,ge,se){for(;It=It[ot];)if(1===It.nodeType||Ft)return B(It,ge,se);return!1}:function(It,ge,se){var Mt,me,ae=[X,Nt];if(se){for(;It=It[ot];)if((1===It.nodeType||Ft)&&B(It,ge,se))return!0}else for(;It=It[ot];)if(1===It.nodeType||Ft)if(me=It[st]||(It[st]={}),at&&_t(It,at))It=It[ot]||It;else{if((Mt=me[Bt])&&Mt[0]===X&&Mt[1]===Nt)return ae[2]=Mt[2];if((me[Bt]=ae)[2]=B(It,ge,se))return!0}return!1}}function Pi(B){return 1<B.length?function(q,et,ot){for(var at=B.length;at--;)if(!B[at](q,et,ot))return!1;return!0}:B[0]}function So(B,q,et,ot,at){for(var Bt,Ft=[],Nt=0,It=B.length,ge=null!=q;Nt<It;Nt++)(Bt=B[Nt])&&(et&&!et(Bt,ot,at)||(Ft.push(Bt),ge&&q.push(Nt)));return Ft}function Fa(B,q,et,ot,at,Bt){return ot&&!ot[st]&&(ot=Fa(ot)),at&&!at[st]&&(at=Fa(at,Bt)),He(function(Ft,Nt,It,ge){var se,Mt,me,ae,tn=[],an=[],hn=Nt.length,Jn=Ft||function(On,Oe,ro){for(var lr=0,Ws=Oe.length;lr<Ws;lr++)oe(On,Oe[lr],ro);return ro}(q||"*",It.nodeType?[It]:It,[]),Zn=!B||!Ft&&q?Jn:So(Jn,tn,B,It,ge);if(et?et(Zn,ae=at||(Ft?B:hn||ot)?[]:Nt,It,ge):ae=Zn,ot)for(se=So(ae,an),ot(se,[],It,ge),Mt=se.length;Mt--;)(me=se[Mt])&&(ae[an[Mt]]=!(Zn[an[Mt]]=me));if(Ft){if(at||B){if(at){for(se=[],Mt=ae.length;Mt--;)(me=ae[Mt])&&se.push(Zn[Mt]=me);at(null,ae=[],se,ge)}for(Mt=ae.length;Mt--;)(me=ae[Mt])&&-1<(se=at?Ke.call(Ft,me):tn[Mt])&&(Ft[se]=!(Nt[se]=me))}}else ae=So(ae===Nt?ae.splice(hn,ae.length):ae),at?at(null,Nt,ae,ge):tt.apply(Nt,ae)})}function ja(B){for(var q,et,ot,at=B.length,Bt=m.relative[B[0].type],Ft=Bt||m.relative[" "],Nt=Bt?1:0,It=no(function(Mt){return Mt===q},Ft,!0),ge=no(function(Mt){return-1<Ke.call(q,Mt)},Ft,!0),se=[function(Mt,me,ae){var tn=!Bt&&(ae||me!=y)||((q=me).nodeType?It(Mt,me,ae):ge(Mt,me,ae));return q=null,tn}];Nt<at;Nt++)if(et=m.relative[B[Nt].type])se=[no(Pi(se),et)];else{if((et=m.filter[B[Nt].type].apply(null,B[Nt].matches))[st]){for(ot=++Nt;ot<at&&!m.relative[B[ot].type];ot++);return Fa(1<Nt&&Pi(se),1<Nt&&Ur(B.slice(0,Nt-1).concat({value:" "===B[Nt-2].type?"*":""})).replace(go,"$1"),et,Nt<ot&&ja(B.slice(Nt,ot)),ot<at&&ja(B=B.slice(ot)),ot<at&&Ur(B))}se.push(et)}return Pi(se)}function ps(B,q){var et,ot,at,Bt,Ft,Nt,It=[],ge=[],se=le[B+" "];if(!se){for(q||(q=wo(B)),et=q.length;et--;)(se=ja(q[et]))[st]?It.push(se):ge.push(se);(se=le(B,(ot=ge,Bt=0<(at=It).length,Ft=0<ot.length,Nt=function(Mt,me,ae,tn,an){var hn,Jn,Zn,On=0,Oe="0",ro=Mt&&[],lr=[],Ws=y,Li=Mt||Ft&&m.find.TAG("*",an),Mi=X+=null==Ws?1:Math.random()||.1,sc=Li.length;for(an&&(y=me==A||me||an);Oe!==sc&&null!=(hn=Li[Oe]);Oe++){if(Ft&&hn){for(Jn=0,me||hn.ownerDocument==A||(Qn(hn),ae=!H);Zn=ot[Jn++];)if(Zn(hn,me||A,ae)){tt.call(tn,hn);break}an&&(X=Mi)}Bt&&((hn=!Zn&&hn)&&On--,Mt&&ro.push(hn))}if(On+=Oe,Bt&&Oe!==On){for(Jn=0;Zn=at[Jn++];)Zn(ro,lr,me,ae);if(Mt){if(0<On)for(;Oe--;)ro[Oe]||lr[Oe]||(lr[Oe]=ir.call(tn));lr=So(lr)}tt.apply(tn,lr),an&&!Mt&&0<lr.length&&1<On+at.length&&x.uniqueSort(tn)}return an&&(X=Mi,y=Ws),ro},Bt?He(Nt):Nt))).selector=B}return se}function kr(B,q,et,ot){var at,Bt,Ft,Nt,It,ge="function"==typeof B&&B,se=!ot&&wo(B=ge.selector||B);if(et=et||[],1===se.length){if(2<(Bt=se[0]=se[0].slice(0)).length&&"ID"===(Ft=Bt[0]).type&&9===q.nodeType&&H&&m.relative[Bt[1].type]){if(!(q=(m.find.ID(Ft.matches[0].replace($e,wn),q)||[])[0]))return et;ge&&(q=q.parentNode),B=B.slice(Bt.shift().value.length)}for(at=zr.needsContext.test(B)?0:Bt.length;at--&&!m.relative[Nt=(Ft=Bt[at]).type];)if((It=m.find[Nt])&&(ot=It(Ft.matches[0].replace($e,wn),Ze.test(Bt[0].type)&&Sr(q.parentNode)||q))){if(Bt.splice(at,1),!(B=ot.length&&Ur(Bt)))return tt.apply(et,ot),et;break}}return(ge||ps(B,se))(ot,q,!H,et,!q||Ze.test(B)&&Sr(q.parentNode)||q),et}ms.prototype=m.filters=m.pseudos,m.setFilters=new ms,Vt.sortStable=st.split("").sort(sn).join("")===st,Qn(),Vt.sortDetached=Le(function(B){return 1&B.compareDocumentPosition(A.createElement("fieldset"))}),x.find=oe,x.expr[":"]=x.expr.pseudos,x.unique=x.uniqueSort,oe.compile=ps,oe.select=kr,oe.setDocument=Qn,oe.escape=x.escapeSelector,oe.getText=x.text,oe.isXML=x.isXMLDoc,oe.selectors=x.expr,oe.support=x.support,oe.uniqueSort=x.uniqueSort}();var Vn=function(d,m,y){for(var w=[],_=void 0!==y;(d=d[m])&&9!==d.nodeType;)if(1===d.nodeType){if(_&&x(d).is(y))break;w.push(d)}return w},Ce=function(d,m){for(var y=[];d;d=d.nextSibling)1===d.nodeType&&d!==m&&y.push(d);return y},Be=x.expr.match.needsContext,E=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function bo(d,m,y){return Pt(m)?x.grep(d,function(w,_){return!!m.call(w,_,w)!==y}):m.nodeType?x.grep(d,function(w){return w===m!==y}):"string"!=typeof m?x.grep(d,function(w){return-1<Ke.call(m,w)!==y}):x.filter(m,d,y)}x.filter=function(d,m,y){var w=m[0];return y&&(d=":not("+d+")"),1===m.length&&1===w.nodeType?x.find.matchesSelector(w,d)?[w]:[]:x.find.matches(d,x.grep(m,function(_){return 1===_.nodeType}))},x.fn.extend({find:function(d){var m,y,w=this.length,_=this;if("string"!=typeof d)return this.pushStack(x(d).filter(function(){for(m=0;m<w;m++)if(x.contains(_[m],this))return!0}));for(y=this.pushStack([]),m=0;m<w;m++)x.find(d,_[m],y);return 1<w?x.uniqueSort(y):y},filter:function(d){return this.pushStack(bo(this,d||[],!1))},not:function(d){return this.pushStack(bo(this,d||[],!0))},is:function(d){return!!bo(this,"string"==typeof d&&Be.test(d)?x(d):d||[],!1).length}});var Et,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(d,m,y){var w,_;if(!d)return this;if(y=y||Et,"string"==typeof d){if(!(w="<"===d[0]&&">"===d[d.length-1]&&3<=d.length?[null,d,null]:ee.exec(d))||!w[1]&&m)return!m||m.jquery?(m||y).find(d):this.constructor(m).find(d);if(w[1]){if(x.merge(this,x.parseHTML(w[1],(m=m instanceof x?m[0]:m)&&m.nodeType?m.ownerDocument||m:Qt,!0)),E.test(w[1])&&x.isPlainObject(m))for(w in m)Pt(this[w])?this[w](m[w]):this.attr(w,m[w]);return this}return(_=Qt.getElementById(w[2]))&&(this[0]=_,this.length=1),this}return d.nodeType?(this[0]=d,this.length=1,this):Pt(d)?void 0!==y.ready?y.ready(d):d(x):x.makeArray(d,this)}).prototype=x.fn,Et=x(Qt);var ie=/^(?:parents|prev(?:Until|All))/,Tt={children:!0,contents:!0,next:!0,prev:!0};function Ae(d,m){for(;(d=d[m])&&1!==d.nodeType;);return d}x.fn.extend({has:function(d){var m=x(d,this),y=m.length;return this.filter(function(){for(var w=0;w<y;w++)if(x.contains(this,m[w]))return!0})},closest:function(d,m){var y,w=0,_=this.length,A=[],T="string"!=typeof d&&x(d);if(!Be.test(d))for(;w<_;w++)for(y=this[w];y&&y!==m;y=y.parentNode)if(y.nodeType<11&&(T?-1<T.index(y):1===y.nodeType&&x.find.matchesSelector(y,d))){A.push(y);break}return this.pushStack(1<A.length?x.uniqueSort(A):A)},index:function(d){return d?"string"==typeof d?Ke.call(x(d),this[0]):Ke.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,m){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(d,m))))},addBack:function(d){return this.add(null==d?this.prevObject:this.prevObject.filter(d))}}),x.each({parent:function(d){var m=d.parentNode;return m&&11!==m.nodeType?m:null},parents:function(d){return Vn(d,"parentNode")},parentsUntil:function(d,m,y){return Vn(d,"parentNode",y)},next:function(d){return Ae(d,"nextSibling")},prev:function(d){return Ae(d,"previousSibling")},nextAll:function(d){return Vn(d,"nextSibling")},prevAll:function(d){return Vn(d,"previousSibling")},nextUntil:function(d,m,y){return Vn(d,"nextSibling",y)},prevUntil:function(d,m,y){return Vn(d,"previousSibling",y)},siblings:function(d){return Ce((d.parentNode||{}).firstChild,d)},children:function(d){return Ce(d.firstChild)},contents:function(d){return null!=d.contentDocument&&Ht(d.contentDocument)?d.contentDocument:(_t(d,"template")&&(d=d.content||d),x.merge([],d.childNodes))}},function(d,m){x.fn[d]=function(y,w){var _=x.map(this,m,y);return"Until"!==d.slice(-5)&&(w=y),w&&"string"==typeof w&&(_=x.filter(w,_)),1<this.length&&(Tt[d]||x.uniqueSort(_),ie.test(d)&&_.reverse()),this.pushStack(_)}});var re=/[^\x20\t\r\n\f]+/g;function rt(d){return d}function vo(d){throw d}function Kr(d,m,y,w){var _;try{d&&Pt(_=d.promise)?_.call(d).done(m).fail(y):d&&Pt(_=d.then)?_.call(d,m,y):m.apply(void 0,[d].slice(w))}catch(A){y.apply(void 0,[A])}}x.Callbacks=function(d){var y;d="string"==typeof d?(y={},x.each(d.match(re)||[],function(X,ut){y[ut]=!0}),y):x.extend({},d);var w,_,A,T,H=[],F=[],K=-1,tt=function(){for(T=T||d.once,A=w=!0;F.length;K=-1)for(_=F.shift();++K<H.length;)!1===H[K].apply(_[0],_[1])&&d.stopOnFalse&&(K=H.length,_=!1);d.memory||(_=!1),w=!1,T&&(H=_?[]:"")},st={add:function(){return H&&(_&&!w&&(K=H.length-1,F.push(_)),function X(ut){x.each(ut,function(O,ce){Pt(ce)?d.unique&&st.has(ce)||H.push(ce):ce&&ce.length&&"string"!==ye(ce)&&X(ce)})}(arguments),_&&!w&&tt()),this},remove:function(){return x.each(arguments,function(X,ut){for(var O;-1<(O=x.inArray(ut,H,O));)H.splice(O,1),O<=K&&K--}),this},has:function(X){return X?-1<x.inArray(X,H):0<H.length},empty:function(){return H&&(H=[]),this},disable:function(){return T=F=[],H=_="",this},disabled:function(){return!H},lock:function(){return T=F=[],_||w||(H=_=""),this},locked:function(){return!!T},fireWith:function(X,ut){return T||(ut=[X,(ut=ut||[]).slice?ut.slice():ut],F.push(ut),w||tt()),this},fire:function(){return st.fireWith(this,arguments),this},fired:function(){return!!A}};return st},x.extend({Deferred:function(d){var m=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],y="pending",w={state:function(){return y},always:function(){return _.done(arguments).fail(arguments),this},catch:function(A){return w.then(null,A)},pipe:function(){var A=arguments;return x.Deferred(function(T){x.each(m,function(H,F){var K=Pt(A[F[4]])&&A[F[4]];_[F[1]](function(){var tt=K&&K.apply(this,arguments);tt&&Pt(tt.promise)?tt.promise().progress(T.notify).done(T.resolve).fail(T.reject):T[F[0]+"With"](this,K?[tt]:arguments)})}),A=null}).promise()},then:function(A,T,H){var F=0;function K(tt,st,X,ut){return function(){var O=this,ce=arguments,le=function(){var sn,de;if(!(tt<F)){if((sn=X.apply(O,ce))===st.promise())throw new TypeError("Thenable self-resolution");Pt(de=sn&&("object"==typeof sn||"function"==typeof sn)&&sn.then)?ut?de.call(sn,K(F,st,rt,ut),K(F,st,vo,ut)):(F++,de.call(sn,K(F,st,rt,ut),K(F,st,vo,ut),K(F,st,rt,st.notifyWith))):(X!==rt&&(O=void 0,ce=[sn]),(ut||st.resolveWith)(O,ce))}},_e=ut?le:function(){try{le()}catch(sn){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(sn,_e.error),F<=tt+1&&(X!==vo&&(O=void 0,ce=[sn]),st.rejectWith(O,ce))}};tt?_e():(x.Deferred.getErrorHook?_e.error=x.Deferred.getErrorHook():x.Deferred.getStackHook&&(_e.error=x.Deferred.getStackHook()),vt.setTimeout(_e))}}return x.Deferred(function(tt){m[0][3].add(K(0,tt,Pt(H)?H:rt,tt.notifyWith)),m[1][3].add(K(0,tt,Pt(A)?A:rt)),m[2][3].add(K(0,tt,Pt(T)?T:vo))}).promise()},promise:function(A){return null!=A?x.extend(A,w):w}},_={};return x.each(m,function(A,T){var H=T[2],F=T[5];w[T[1]]=H.add,F&&H.add(function(){y=F},m[3-A][2].disable,m[3-A][3].disable,m[0][2].lock,m[0][3].lock),H.add(T[3].fire),_[T[0]]=function(){return _[T[0]+"With"](this===_?void 0:this,arguments),this},_[T[0]+"With"]=H.fireWith}),w.promise(_),d&&d.call(_,_),_},when:function(d){var m=arguments.length,y=m,w=Array(y),_=ne.call(arguments),A=x.Deferred(),T=function(H){return function(F){w[H]=this,_[H]=1<arguments.length?ne.call(arguments):F,--m||A.resolveWith(w,_)}};if(m<=1&&(Kr(d,A.done(T(y)).resolve,A.reject,!m),"pending"===A.state()||Pt(_[y]&&_[y].then)))return A.then();for(;y--;)Kr(_[y],T(y),A.reject);return A.promise()}});var $t=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(d,m){vt.console&&vt.console.warn&&d&&$t.test(d.name)&&vt.console.warn("jQuery.Deferred exception: "+d.message,d.stack,m)},x.readyException=function(d){vt.setTimeout(function(){throw d})};var jo=x.Deferred();function vn(){Qt.removeEventListener("DOMContentLoaded",vn),vt.removeEventListener("load",vn),x.ready()}x.fn.ready=function(d){return jo.then(d).catch(function(m){x.readyException(m)}),this},x.extend({isReady:!1,readyWait:1,ready:function(d){(!0===d?--x.readyWait:x.isReady)||(x.isReady=!0)!==d&&0<--x.readyWait||jo.resolveWith(Qt,[x])}}),x.ready.then=jo.then,"complete"===Qt.readyState||"loading"!==Qt.readyState&&!Qt.documentElement.doScroll?vt.setTimeout(x.ready):(Qt.addEventListener("DOMContentLoaded",vn),vt.addEventListener("load",vn));var Lr=function(d,m,y,w,_,A,T){var H=0,F=d.length,K=null==y;if("object"===ye(y))for(H in _=!0,y)Lr(d,m,H,y[H],!0,A,T);else if(void 0!==w&&(_=!0,Pt(w)||(T=!0),K&&(T?(m.call(d,w),m=null):(K=m,m=function(tt,st,X){return K.call(x(tt),X)})),m))for(;H<F;H++)m(d[H],y,T?w:w.call(d[H],H,m(d[H],y)));return _?d:K?m.call(d):F?m(d[0],y):A},qe=/^-ms-/,Is=/-([a-z])/g;function $l(d,m){return m.toUpperCase()}function rn(d){return d.replace(qe,"ms-").replace(Is,$l)}var mr=function(d){return 1===d.nodeType||9===d.nodeType||!+d.nodeType};function Xr(){this.expando=x.expando+Xr.uid++}Xr.uid=1,Xr.prototype={cache:function(d){var m=d[this.expando];return m||(m={},mr(d)&&(d.nodeType?d[this.expando]=m:Object.defineProperty(d,this.expando,{value:m,configurable:!0}))),m},set:function(d,m,y){var w,_=this.cache(d);if("string"==typeof m)_[rn(m)]=y;else for(w in m)_[rn(w)]=m[w];return _},get:function(d,m){return void 0===m?this.cache(d):d[this.expando]&&d[this.expando][rn(m)]},access:function(d,m,y){return void 0===m||m&&"string"==typeof m&&void 0===y?this.get(d,m):(this.set(d,m,y),void 0!==y?y:m)},remove:function(d,m){var y,w=d[this.expando];if(void 0!==w){if(void 0!==m)for((y=(m=Array.isArray(m)?m.map(rn):(m=rn(m))in w?[m]:m.match(re)||[]).length);y--;)delete w[m[y]];(void 0===m||x.isEmptyObject(w))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var m=d[this.expando];return void 0!==m&&!x.isEmptyObject(m)}};var Gt=new Xr,_n=new Xr,zo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_a=/[A-Z]/g;function Nn(d,m,y){var w,_;if(void 0===y&&1===d.nodeType)if(w="data-"+m.replace(_a,"-$&").toLowerCase(),"string"==typeof(y=d.getAttribute(w))){try{y="true"===(_=y)||"false"!==_&&("null"===_?null:_===+_+""?+_:zo.test(_)?JSON.parse(_):_)}catch{}_n.set(d,m,y)}else y=void 0;return y}x.extend({hasData:function(d){return _n.hasData(d)||Gt.hasData(d)},data:function(d,m,y){return _n.access(d,m,y)},removeData:function(d,m){_n.remove(d,m)},_data:function(d,m,y){return Gt.access(d,m,y)},_removeData:function(d,m){Gt.remove(d,m)}}),x.fn.extend({data:function(d,m){var y,w,_,A=this[0],T=A&&A.attributes;if(void 0===d){if(this.length&&(_=_n.get(A),1===A.nodeType&&!Gt.get(A,"hasDataAttrs"))){for(y=T.length;y--;)T[y]&&0===(w=T[y].name).indexOf("data-")&&(w=rn(w.slice(5)),Nn(A,w,_[w]));Gt.set(A,"hasDataAttrs",!0)}return _}return"object"==typeof d?this.each(function(){_n.set(this,d)}):Lr(this,function(H){var F;if(A&&void 0===H)return void 0!==(F=_n.get(A,d))||void 0!==(F=Nn(A,d))?F:void 0;this.each(function(){_n.set(this,d,H)})},null,m,1<arguments.length,null,!0)},removeData:function(d){return this.each(function(){_n.remove(this,d)})}}),x.extend({queue:function(d,m,y){var w;if(d)return w=Gt.get(d,m=(m||"fx")+"queue"),y&&(!w||Array.isArray(y)?w=Gt.access(d,m,x.makeArray(y)):w.push(y)),w||[]},dequeue:function(d,m){var y=x.queue(d,m=m||"fx"),w=y.length,_=y.shift(),A=x._queueHooks(d,m);"inprogress"===_&&(_=y.shift(),w--),_&&("fx"===m&&y.unshift("inprogress"),delete A.stop,_.call(d,function(){x.dequeue(d,m)},A)),!w&&A&&A.empty.fire()},_queueHooks:function(d,m){var y=m+"queueHooks";return Gt.get(d,y)||Gt.access(d,y,{empty:x.Callbacks("once memory").add(function(){Gt.remove(d,[m+"queue",y])})})}}),x.fn.extend({queue:function(d,m){var y=2;return"string"!=typeof d&&(m=d,d="fx",y--),arguments.length<y?x.queue(this[0],d):void 0===m?this:this.each(function(){var w=x.queue(this,d,m);x._queueHooks(this,d),"fx"===d&&"inprogress"!==w[0]&&x.dequeue(this,d)})},dequeue:function(d){return this.each(function(){x.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,m){var y,w=1,_=x.Deferred(),A=this,T=this.length,H=function(){--w||_.resolveWith(A,[A])};for("string"!=typeof d&&(m=d,d=void 0),d=d||"fx";T--;)(y=Gt.get(A[T],d+"queueHooks"))&&y.empty&&(w++,y.empty.add(H));return H(),_.promise(m)}});var yo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ye=new RegExp("^(?:([+-])=|)("+yo+")([a-z%]*)$","i"),Kn=["Top","Right","Bottom","Left"],Qe=Qt.documentElement,rs=function(d){return x.contains(d.ownerDocument,d)},Se={composed:!0};Qe.getRootNode&&(rs=function(d){return x.contains(d.ownerDocument,d)||d.getRootNode(Se)===d.ownerDocument});var Ho=function(d,m){return"none"===(d=m||d).style.display||""===d.style.display&&rs(d)&&"none"===x.css(d,"display")};function Wl(d,m,y,w){var _,A,T=20,H=w?function(){return w.cur()}:function(){return x.css(d,m,"")},F=H(),K=y&&y[3]||(x.cssNumber[m]?"":"px"),tt=d.nodeType&&(x.cssNumber[m]||"px"!==K&&+F)&&Ye.exec(x.css(d,m));if(tt&&tt[3]!==K){for(K=K||tt[3],tt=+(F/=2)||1;T--;)x.style(d,m,tt+K),(1-A)*(1-(A=H()/F||.5))<=0&&(T=0),tt/=A;x.style(d,m,(tt*=2)+K),y=y||[]}return y&&(tt=+tt||+F||0,_=y[1]?tt+(y[1]+1)*y[2]:+y[2],w&&(w.unit=K,w.start=tt,w.end=_)),_}var Na={};function Uo(d,m){for(var y,w,_,A,T,H,F,K=[],tt=0,st=d.length;tt<st;tt++)(w=d[tt]).style&&(y=w.style.display,m?("none"===y&&(K[tt]=Gt.get(w,"display")||null,K[tt]||(w.style.display="")),""===w.style.display&&Ho(w)&&(K[tt]=(F=T=A=void 0,T=(_=w).ownerDocument,(F=Na[H=_.nodeName])||(A=T.body.appendChild(T.createElement(H)),F=x.css(A,"display"),A.parentNode.removeChild(A),"none"===F&&(F="block"),Na[H]=F)))):"none"!==y&&(K[tt]="none",Gt.set(w,"display",y)));for(tt=0;tt<st;tt++)null!=K[tt]&&(d[tt].style.display=K[tt]);return d}x.fn.extend({show:function(){return Uo(this,!0)},hide:function(){return Uo(this)},toggle:function(d){return"boolean"==typeof d?d?this.show():this.hide():this.each(function(){Ho(this)?x(this).show():x(this).hide()})}});var xr,os,qo=/^(?:checkbox|radio)$/i,ke=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,te=/^$|^module$|\/(?:java|ecma)script/i;xr=Qt.createDocumentFragment().appendChild(Qt.createElement("div")),(os=Qt.createElement("input")).setAttribute("type","radio"),os.setAttribute("checked","checked"),os.setAttribute("name","t"),xr.appendChild(os),Vt.checkClone=xr.cloneNode(!0).cloneNode(!0).lastChild.checked,xr.innerHTML="<textarea>x</textarea>",Vt.noCloneChecked=!!xr.cloneNode(!0).lastChild.defaultValue,xr.innerHTML="<option></option>",Vt.option=!!xr.lastChild;var yn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Fn(d,m){var y;return y=typeof d.getElementsByTagName<"u"?d.getElementsByTagName(m||"*"):typeof d.querySelectorAll<"u"?d.querySelectorAll(m||"*"):[],void 0===m||m&&_t(d,m)?x.merge([d],y):y}function Aa(d,m){for(var y=0,w=d.length;y<w;y++)Gt.set(d[y],"globalEval",!m||Gt.get(m[y],"globalEval"))}yn.tbody=yn.tfoot=yn.colgroup=yn.caption=yn.thead,yn.th=yn.td,Vt.option||(yn.optgroup=yn.option=[1,"<select multiple='multiple'>","</select>"]);var yi=/<|&#?\w+;/;function Fs(d,m,y,w,_){for(var A,T,H,F,K,tt,st=m.createDocumentFragment(),X=[],ut=0,O=d.length;ut<O;ut++)if((A=d[ut])||0===A)if("object"===ye(A))x.merge(X,A.nodeType?[A]:A);else if(yi.test(A)){for(T=T||st.appendChild(m.createElement("div")),H=(ke.exec(A)||["",""])[1].toLowerCase(),T.innerHTML=(F=yn[H]||yn._default)[1]+x.htmlPrefilter(A)+F[2],tt=F[0];tt--;)T=T.lastChild;x.merge(X,T.childNodes),(T=st.firstChild).textContent=""}else X.push(m.createTextNode(A));for(st.textContent="",ut=0;A=X[ut++];)if(w&&-1<x.inArray(A,w))_&&_.push(A);else if(K=rs(A),T=Fn(st.appendChild(A),"script"),K&&Aa(T),y)for(tt=0;A=T[tt++];)te.test(A.type||"")&&y.push(A);return st}var Ra=/^([^.]*)(?:\.(.+)|)/;function Mr(){return!0}function Gr(){return!1}function Ta(d,m,y,w,_,A){var T,H;if("object"==typeof m){for(H in"string"!=typeof y&&(w=w||y,y=void 0),m)Ta(d,H,y,w,m[H],A);return d}if(null==w&&null==_?(_=y,w=y=void 0):null==_&&("string"==typeof y?(_=w,w=void 0):(_=w,w=y,y=void 0)),!1===_)_=Gr;else if(!_)return d;return 1===A&&(T=_,(_=function(F){return x().off(F),T.apply(this,arguments)}).guid=T.guid||(T.guid=x.guid++)),d.each(function(){x.event.add(this,m,_,w,y)})}function Ir(d,m,y){y?(Gt.set(d,m,!1),x.event.add(d,m,{namespace:!1,handler:function(w){var _,A=Gt.get(this,m);if(1&w.isTrigger&&this[m]){if(A)(x.event.special[m]||{}).delegateType&&w.stopPropagation();else if(A=ne.call(arguments),Gt.set(this,m,A),this[m](),_=Gt.get(this,m),Gt.set(this,m,!1),A!==_)return w.stopImmediatePropagation(),w.preventDefault(),_}else A&&(Gt.set(this,m,x.event.trigger(A[0],A.slice(1),this)),w.stopPropagation(),w.isImmediatePropagationStopped=Mr)}})):void 0===Gt.get(d,m)&&x.event.add(d,m,Mr)}x.event={global:{},add:function(d,m,y,w,_){var A,T,H,F,K,tt,st,X,ut,O,ce,le=Gt.get(d);if(mr(d))for(y.handler&&(y=(A=y).handler,_=A.selector),_&&x.find.matchesSelector(Qe,_),y.guid||(y.guid=x.guid++),(F=le.events)||(F=le.events=Object.create(null)),(T=le.handle)||(T=le.handle=function(_e){return typeof x<"u"&&x.event.triggered!==_e.type?x.event.dispatch.apply(d,arguments):void 0}),K=(m=(m||"").match(re)||[""]).length;K--;)ut=ce=(H=Ra.exec(m[K])||[])[1],O=(H[2]||"").split(".").sort(),ut&&(st=x.event.special[ut]||{},st=x.event.special[ut=(_?st.delegateType:st.bindType)||ut]||{},tt=x.extend({type:ut,origType:ce,data:w,handler:y,guid:y.guid,selector:_,needsContext:_&&x.expr.match.needsContext.test(_),namespace:O.join(".")},A),(X=F[ut])||((X=F[ut]=[]).delegateCount=0,st.setup&&!1!==st.setup.call(d,w,O,T)||d.addEventListener&&d.addEventListener(ut,T)),st.add&&(st.add.call(d,tt),tt.handler.guid||(tt.handler.guid=y.guid)),_?X.splice(X.delegateCount++,0,tt):X.push(tt),x.event.global[ut]=!0)},remove:function(d,m,y,w,_){var A,T,H,F,K,tt,st,X,ut,O,ce,le=Gt.hasData(d)&&Gt.get(d);if(le&&(F=le.events)){for(K=(m=(m||"").match(re)||[""]).length;K--;)if(ut=ce=(H=Ra.exec(m[K])||[])[1],O=(H[2]||"").split(".").sort(),ut){for(st=x.event.special[ut]||{},X=F[ut=(w?st.delegateType:st.bindType)||ut]||[],H=H[2]&&new RegExp("(^|\\.)"+O.join("\\.(?:.*\\.|)")+"(\\.|$)"),T=A=X.length;A--;)tt=X[A],!_&&ce!==tt.origType||y&&y.guid!==tt.guid||H&&!H.test(tt.namespace)||w&&w!==tt.selector&&("**"!==w||!tt.selector)||(X.splice(A,1),tt.selector&&X.delegateCount--,st.remove&&st.remove.call(d,tt));T&&!X.length&&(st.teardown&&!1!==st.teardown.call(d,O,le.handle)||x.removeEvent(d,ut,le.handle),delete F[ut])}else for(ut in F)x.event.remove(d,ut+m[K],y,w,!0);x.isEmptyObject(F)&&Gt.remove(d,"handle events")}},dispatch:function(d){var m,y,w,_,A,T,H=new Array(arguments.length),F=x.event.fix(d),K=(Gt.get(this,"events")||Object.create(null))[F.type]||[],tt=x.event.special[F.type]||{};for(H[0]=F,m=1;m<arguments.length;m++)H[m]=arguments[m];if(F.delegateTarget=this,!tt.preDispatch||!1!==tt.preDispatch.call(this,F)){for(T=x.event.handlers.call(this,F,K),m=0;(_=T[m++])&&!F.isPropagationStopped();)for(F.currentTarget=_.elem,y=0;(A=_.handlers[y++])&&!F.isImmediatePropagationStopped();)F.rnamespace&&!1!==A.namespace&&!F.rnamespace.test(A.namespace)||(F.handleObj=A,F.data=A.data,void 0!==(w=((x.event.special[A.origType]||{}).handle||A.handler).apply(_.elem,H))&&!1===(F.result=w)&&(F.preventDefault(),F.stopPropagation()));return tt.postDispatch&&tt.postDispatch.call(this,F),F.result}},handlers:function(d,m){var y,w,_,A,T,H=[],F=m.delegateCount,K=d.target;if(F&&K.nodeType&&!("click"===d.type&&1<=d.button))for(;K!==this;K=K.parentNode||this)if(1===K.nodeType&&("click"!==d.type||!0!==K.disabled)){for(A=[],T={},y=0;y<F;y++)void 0===T[_=(w=m[y]).selector+" "]&&(T[_]=w.needsContext?-1<x(_,this).index(K):x.find(_,this,null,[K]).length),T[_]&&A.push(w);A.length&&H.push({elem:K,handlers:A})}return K=this,F<m.length&&H.push({elem:K,handlers:m.slice(F)}),H},addProp:function(d,m){Object.defineProperty(x.Event.prototype,d,{enumerable:!0,configurable:!0,get:Pt(m)?function(){if(this.originalEvent)return m(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(y){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:y})}})},fix:function(d){return d[x.expando]?d:new x.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var m=this||d;return qo.test(m.type)&&m.click&&_t(m,"input")&&Ir(m,"click",!0),!1},trigger:function(d){var m=this||d;return qo.test(m.type)&&m.click&&_t(m,"input")&&Ir(m,"click"),!0},_default:function(d){var m=d.target;return qo.test(m.type)&&m.click&&_t(m,"input")&&Gt.get(m,"click")||_t(m,"a")}},beforeunload:{postDispatch:function(d){void 0!==d.result&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}},x.removeEvent=function(d,m,y){d.removeEventListener&&d.removeEventListener(m,y)},x.Event=function(d,m){if(!(this instanceof x.Event))return new x.Event(d,m);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||void 0===d.defaultPrevented&&!1===d.returnValue?Mr:Gr,this.target=d.target&&3===d.target.nodeType?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,m&&x.extend(this,m),this.timeStamp=d&&d.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Gr,isPropagationStopped:Gr,isImmediatePropagationStopped:Gr,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=Mr,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=Mr,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=Mr,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(d,m){function y(w){if(Qt.documentMode){var _=Gt.get(this,"handle"),A=x.event.fix(w);A.type="focusin"===w.type?"focus":"blur",A.isSimulated=!0,_(w),A.target===A.currentTarget&&_(A)}else x.event.simulate(m,w.target,x.event.fix(w))}x.event.special[d]={setup:function(){var w;if(Ir(this,d,!0),!Qt.documentMode)return!1;(w=Gt.get(this,m))||this.addEventListener(m,y),Gt.set(this,m,(w||0)+1)},trigger:function(){return Ir(this,d),!0},teardown:function(){var w;if(!Qt.documentMode)return!1;(w=Gt.get(this,m)-1)?Gt.set(this,m,w):(this.removeEventListener(m,y),Gt.remove(this,m))},_default:function(w){return Gt.get(w.target,d)},delegateType:m},x.event.special[m]={setup:function(){var w=this.ownerDocument||this.document||this,_=Qt.documentMode?this:w,A=Gt.get(_,m);A||(Qt.documentMode?this.addEventListener(m,y):w.addEventListener(d,y,!0)),Gt.set(_,m,(A||0)+1)},teardown:function(){var w=this.ownerDocument||this.document||this,_=Qt.documentMode?this:w,A=Gt.get(_,m)-1;A?Gt.set(_,m,A):(Qt.documentMode?this.removeEventListener(m,y):w.removeEventListener(d,y,!0),Gt.remove(_,m))}}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,m){x.event.special[d]={delegateType:m,bindType:m,handle:function(y){var w,_=y.relatedTarget,A=y.handleObj;return _&&(_===this||x.contains(this,_))||(y.type=A.origType,w=A.handler.apply(this,arguments),y.type=m),w}}}),x.fn.extend({on:function(d,m,y,w){return Ta(this,d,m,y,w)},one:function(d,m,y,w){return Ta(this,d,m,y,w,1)},off:function(d,m,y){var w,_;if(d&&d.preventDefault&&d.handleObj)return w=d.handleObj,x(d.delegateTarget).off(w.namespace?w.origType+"."+w.namespace:w.origType,w.selector,w.handler),this;if("object"==typeof d){for(_ in d)this.off(_,m,d[_]);return this}return!1!==m&&"function"!=typeof m||(y=m,m=void 0),!1===y&&(y=Gr),this.each(function(){x.event.remove(this,d,y,m)})}});var $o=/<script|<style|<link/i,Vl=/checked\s*(?:[^=]|=\s*.checked.)/i,Ci=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ss(d,m){return _t(d,"table")&&_t(11!==m.nodeType?m:m.firstChild,"tr")&&x(d).children("tbody")[0]||d}function Kl(d){return d.type=(null!==d.getAttribute("type"))+"/"+d.type,d}function Xl(d){return"true/"===(d.type||"").slice(0,5)?d.type=d.type.slice(5):d.removeAttribute("type"),d}function xi(d,m){var y,w,_,A,T,H;if(1===m.nodeType){if(Gt.hasData(d)&&(H=Gt.get(d).events))for(_ in Gt.remove(m,"handle events"),H)for(y=0,w=H[_].length;y<w;y++)x.event.add(m,_,H[_][y]);_n.hasData(d)&&(A=_n.access(d),T=x.extend({},A),_n.set(m,T))}}function ze(d,m,y,w){m=je(m);var _,A,T,H,F,K,tt=0,st=d.length,X=st-1,ut=m[0],O=Pt(ut);if(O||1<st&&"string"==typeof ut&&!Vt.checkClone&&Vl.test(ut))return d.each(function(ce){var le=d.eq(ce);O&&(m[0]=ut.call(this,ce,le.html())),ze(le,m,y,w)});if(st&&(A=(_=Fs(m,d[0].ownerDocument,!1,d,w)).firstChild,1===_.childNodes.length&&(_=A),A||w)){for(H=(T=x.map(Fn(_,"script"),Kl)).length;tt<st;tt++)F=_,tt!==X&&(F=x.clone(F,!0,!0),H&&x.merge(T,Fn(F,"script"))),y.call(d[tt],F,tt);if(H)for(K=T[T.length-1].ownerDocument,x.map(T,Xl),tt=0;tt<H;tt++)te.test((F=T[tt]).type||"")&&!Gt.access(F,"globalEval")&&x.contains(K,F)&&(F.src&&"module"!==(F.type||"").toLowerCase()?x._evalUrl&&!F.noModule&&x._evalUrl(F.src,{nonce:F.nonce||F.getAttribute("nonce")},K):De(F.textContent.replace(Ci,""),F,K))}return d}function Je(d,m,y){for(var w,_=m?x.filter(m,d):d,A=0;null!=(w=_[A]);A++)y||1!==w.nodeType||x.cleanData(Fn(w)),w.parentNode&&(y&&rs(w)&&Aa(Fn(w,"script")),w.parentNode.removeChild(w));return d}x.extend({htmlPrefilter:function(d){return d},clone:function(d,m,y){var w,_,A,T,H,F,K,tt=d.cloneNode(!0),st=rs(d);if(!(Vt.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||x.isXMLDoc(d)))for(T=Fn(tt),w=0,_=(A=Fn(d)).length;w<_;w++)H=A[w],"input"===(K=(F=T[w]).nodeName.toLowerCase())&&qo.test(H.type)?F.checked=H.checked:"input"!==K&&"textarea"!==K||(F.defaultValue=H.defaultValue);if(m)if(y)for(A=A||Fn(d),T=T||Fn(tt),w=0,_=A.length;w<_;w++)xi(A[w],T[w]);else xi(d,tt);return 0<(T=Fn(tt,"script")).length&&Aa(T,!st&&Fn(d,"script")),tt},cleanData:function(d){for(var m,y,w,_=x.event.special,A=0;void 0!==(y=d[A]);A++)if(mr(y)){if(m=y[Gt.expando]){if(m.events)for(w in m.events)_[w]?x.event.remove(y,w):x.removeEvent(y,w,m.handle);y[Gt.expando]=void 0}y[_n.expando]&&(y[_n.expando]=void 0)}}}),x.fn.extend({detach:function(d){return Je(this,d,!0)},remove:function(d){return Je(this,d)},text:function(d){return Lr(this,function(m){return void 0===m?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=m)})},null,d,arguments.length)},append:function(){return ze(this,arguments,function(d){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ss(this,d).appendChild(d)})},prepend:function(){return ze(this,arguments,function(d){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var m=ss(this,d);m.insertBefore(d,m.firstChild)}})},before:function(){return ze(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return ze(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,m=0;null!=(d=this[m]);m++)1===d.nodeType&&(x.cleanData(Fn(d,!1)),d.textContent="");return this},clone:function(d,m){return d=null!=d&&d,m=m??d,this.map(function(){return x.clone(this,d,m)})},html:function(d){return Lr(this,function(m){var y=this[0]||{},w=0,_=this.length;if(void 0===m&&1===y.nodeType)return y.innerHTML;if("string"==typeof m&&!$o.test(m)&&!yn[(ke.exec(m)||["",""])[1].toLowerCase()]){m=x.htmlPrefilter(m);try{for(;w<_;w++)1===(y=this[w]||{}).nodeType&&(x.cleanData(Fn(y,!1)),y.innerHTML=m);y=0}catch{}}y&&this.empty().append(m)},null,d,arguments.length)},replaceWith:function(){var d=[];return ze(this,arguments,function(m){var y=this.parentNode;x.inArray(this,d)<0&&(x.cleanData(Fn(this)),y&&y.replaceChild(m,this))},d)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,m){x.fn[d]=function(y){for(var w,_=[],A=x(y),T=A.length-1,H=0;H<=T;H++)w=H===T?this:this.clone(!0),x(A[H])[m](w),kn.apply(_,w.get());return this.pushStack(_)}});var js=new RegExp("^("+yo+")(?!px)[a-z%]+$","i"),zs=/^--/,Yr=function(d){var m=d.ownerDocument.defaultView;return m&&m.opener||(m=vt),m.getComputedStyle(d)},Gl=function(d,m,y){var w,_,A={};for(_ in m)A[_]=d.style[_],d.style[_]=m[_];for(_ in w=y.call(d),m)d.style[_]=A[_];return w},Yl=new RegExp(Kn.join("|"),"i");function Xn(d,m,y){var w,_,A,T,H=zs.test(m),F=d.style;return(y=y||Yr(d))&&(T=y.getPropertyValue(m)||y[m],H&&T&&(T=T.replace(go,"$1")||void 0),""!==T||rs(d)||(T=x.style(d,m)),!Vt.pixelBoxStyles()&&js.test(T)&&Yl.test(m)&&(w=F.width,_=F.minWidth,A=F.maxWidth,F.minWidth=F.maxWidth=F.width=T,T=y.width,F.width=w,F.minWidth=_,F.maxWidth=A)),void 0!==T?T+"":T}function as(d,m){return{get:function(){if(!d())return(this.get=m).apply(this,arguments);delete this.get}}}!function(){function d(){if(K){F.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",K.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Qe.appendChild(F).appendChild(K);var tt=vt.getComputedStyle(K);y="1%"!==tt.top,H=12===m(tt.marginLeft),K.style.right="60%",A=36===m(tt.right),w=36===m(tt.width),K.style.position="absolute",_=12===m(K.offsetWidth/3),Qe.removeChild(F),K=null}}function m(tt){return Math.round(parseFloat(tt))}var y,w,_,A,T,H,F=Qt.createElement("div"),K=Qt.createElement("div");K.style&&(K.style.backgroundClip="content-box",K.cloneNode(!0).style.backgroundClip="",Vt.clearCloneStyle="content-box"===K.style.backgroundClip,x.extend(Vt,{boxSizingReliable:function(){return d(),w},pixelBoxStyles:function(){return d(),A},pixelPosition:function(){return d(),y},reliableMarginLeft:function(){return d(),H},scrollboxSize:function(){return d(),_},reliableTrDimensions:function(){var tt,st,X,ut;return null==T&&(tt=Qt.createElement("table"),st=Qt.createElement("tr"),X=Qt.createElement("div"),tt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",st.style.cssText="border:1px solid",st.style.height="1px",X.style.height="9px",X.style.display="block",Qe.appendChild(tt).appendChild(st).appendChild(X),ut=vt.getComputedStyle(st),T=parseInt(ut.height,10)+parseInt(ut.borderTopWidth,10)+parseInt(ut.borderBottomWidth,10)===st.offsetHeight,Qe.removeChild(tt)),T}}))}();var Hs=["Webkit","Moz","ms"],Oa=Qt.createElement("div").style,Fr={};function wi(d){return x.cssProps[d]||Fr[d]||(d in Oa?d:Fr[d]=function(y){for(var w=y[0].toUpperCase()+y.slice(1),_=Hs.length;_--;)if((y=Hs[_]+w)in Oa)return y}(d)||d)}var ou=/^(none|table(?!-c[ea]).+)/,Ql={position:"absolute",visibility:"hidden",display:"block"},Si={letterSpacing:"0",fontWeight:"400"};function ki(d,m,y){var w=Ye.exec(m);return w?Math.max(0,w[2]-(y||0))+(w[3]||"px"):m}function Da(d,m,y,w,_,A){var T="width"===m?1:0,H=0,F=0,K=0;if(y===(w?"border":"content"))return 0;for(;T<4;T+=2)"margin"===y&&(K+=x.css(d,y+Kn[T],!0,_)),w?("content"===y&&(F-=x.css(d,"padding"+Kn[T],!0,_)),"margin"!==y&&(F-=x.css(d,"border"+Kn[T]+"Width",!0,_))):(F+=x.css(d,"padding"+Kn[T],!0,_),"padding"!==y?F+=x.css(d,"border"+Kn[T]+"Width",!0,_):H+=x.css(d,"border"+Kn[T]+"Width",!0,_));return!w&&0<=A&&(F+=Math.max(0,Math.ceil(d["offset"+m[0].toUpperCase()+m.slice(1)]-A-F-H-.5))||0),F+K}function Ei(d,m,y){var w=Yr(d),_=(!Vt.boxSizingReliable()||y)&&"border-box"===x.css(d,"boxSizing",!1,w),A=_,T=Xn(d,m,w),H="offset"+m[0].toUpperCase()+m.slice(1);if(js.test(T)){if(!y)return T;T="auto"}return(!Vt.boxSizingReliable()&&_||!Vt.reliableTrDimensions()&&_t(d,"tr")||"auto"===T||!parseFloat(T)&&"inline"===x.css(d,"display",!1,w))&&d.getClientRects().length&&(_="border-box"===x.css(d,"boxSizing",!1,w),(A=H in d)&&(T=d[H])),(T=parseFloat(T)||0)+Da(d,m,y||(_?"border":"content"),A,w,T)+"px"}function pr(d,m,y,w,_){return new pr.prototype.init(d,m,y,w,_)}x.extend({cssHooks:{opacity:{get:function(d,m){if(m){var y=Xn(d,"opacity");return""===y?"1":y}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,m,y,w){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var _,A,T,H=rn(m),F=zs.test(m),K=d.style;if(F||(m=wi(H)),T=x.cssHooks[m]||x.cssHooks[H],void 0===y)return T&&"get"in T&&void 0!==(_=T.get(d,!1,w))?_:K[m];"string"==(A=typeof y)&&(_=Ye.exec(y))&&_[1]&&(y=Wl(d,m,_),A="number"),null!=y&&y==y&&("number"!==A||F||(y+=_&&_[3]||(x.cssNumber[H]?"":"px")),Vt.clearCloneStyle||""!==y||0!==m.indexOf("background")||(K[m]="inherit"),T&&"set"in T&&void 0===(y=T.set(d,y,w))||(F?K.setProperty(m,y):K[m]=y))}},css:function(d,m,y,w){var _,A,T,H=rn(m);return zs.test(m)||(m=wi(H)),(T=x.cssHooks[m]||x.cssHooks[H])&&"get"in T&&(_=T.get(d,!0,y)),void 0===_&&(_=Xn(d,m,w)),"normal"===_&&m in Si&&(_=Si[m]),""===y||y?(A=parseFloat(_),!0===y||isFinite(A)?A||0:_):_}}),x.each(["height","width"],function(d,m){x.cssHooks[m]={get:function(y,w,_){if(w)return!ou.test(x.css(y,"display"))||y.getClientRects().length&&y.getBoundingClientRect().width?Ei(y,m,_):Gl(y,Ql,function(){return Ei(y,m,_)})},set:function(y,w,_){var A,T=Yr(y),H=!Vt.scrollboxSize()&&"absolute"===T.position,F=(H||_)&&"border-box"===x.css(y,"boxSizing",!1,T),K=_?Da(y,m,_,F,T):0;return F&&H&&(K-=Math.ceil(y["offset"+m[0].toUpperCase()+m.slice(1)]-parseFloat(T[m])-Da(y,m,"border",!1,T)-.5)),K&&(A=Ye.exec(w))&&"px"!==(A[3]||"px")&&(y.style[m]=w,w=x.css(y,m)),ki(0,w,K)}}}),x.cssHooks.marginLeft=as(Vt.reliableMarginLeft,function(d,m){if(m)return(parseFloat(Xn(d,"marginLeft"))||d.getBoundingClientRect().left-Gl(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(d,m){x.cssHooks[d+m]={expand:function(y){for(var w=0,_={},A="string"==typeof y?y.split(" "):[y];w<4;w++)_[d+Kn[w]+m]=A[w]||A[w-2]||A[0];return _}},"margin"!==d&&(x.cssHooks[d+m].set=ki)}),x.fn.extend({css:function(d,m){return Lr(this,function(y,w,_){var A,T,H={},F=0;if(Array.isArray(w)){for(A=Yr(y),T=w.length;F<T;F++)H[w[F]]=x.css(y,w[F],!1,A);return H}return void 0!==_?x.style(y,w,_):x.css(y,w)},d,m,1<arguments.length)}}),((x.Tween=pr).prototype={constructor:pr,init:function(d,m,y,w,_,A){this.elem=d,this.prop=y,this.easing=_||x.easing._default,this.options=m,this.start=this.now=this.cur(),this.end=w,this.unit=A||(x.cssNumber[y]?"":"px")},cur:function(){var d=pr.propHooks[this.prop];return d&&d.get?d.get(this):pr.propHooks._default.get(this)},run:function(d){var m,y=pr.propHooks[this.prop];return this.pos=m=this.options.duration?x.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):d,this.now=(this.end-this.start)*m+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),y&&y.set?y.set(this):pr.propHooks._default.set(this),this}}).init.prototype=pr.prototype,(pr.propHooks={_default:{get:function(d){var m;return 1!==d.elem.nodeType||null!=d.elem[d.prop]&&null==d.elem.style[d.prop]?d.elem[d.prop]:(m=x.css(d.elem,d.prop,""))&&"auto"!==m?m:0},set:function(d){x.fx.step[d.prop]?x.fx.step[d.prop](d):1!==d.elem.nodeType||!x.cssHooks[d.prop]&&null==d.elem.style[wi(d.prop)]?d.elem[d.prop]=d.now:x.style(d.elem,d.prop,d.now+d.unit)}}}).scrollTop=pr.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},x.easing={linear:function(d){return d},swing:function(d){return.5-Math.cos(d*Math.PI)/2},_default:"swing"},x.fx=pr.prototype.init,x.fx.step={};var Wo,Ba,is,_i,Jl=/^(?:toggle|show|hide)$/,Zl=/queueHooks$/;function Pa(){Ba&&(!1===Qt.hidden&&vt.requestAnimationFrame?vt.requestAnimationFrame(Pa):vt.setTimeout(Pa,x.fx.interval),x.fx.tick())}function Ni(){return vt.setTimeout(function(){Wo=void 0}),Wo=Date.now()}function Us(d,m){var y,w=0,_={height:d};for(m=m?1:0;w<4;w+=2-m)_["margin"+(y=Kn[w])]=_["padding"+y]=d;return m&&(_.opacity=_.width=d),_}function Ai(d,m,y){for(var w,_=(gr.tweeners[m]||[]).concat(gr.tweeners["*"]),A=0,T=_.length;A<T;A++)if(w=_[A].call(y,m,d))return w}function gr(d,m,y){var w,_,A=0,T=gr.prefilters.length,H=x.Deferred().always(function(){delete F.elem}),F=function(){if(_)return!1;for(var st=Wo||Ni(),X=Math.max(0,K.startTime+K.duration-st),ut=1-(X/K.duration||0),O=0,ce=K.tweens.length;O<ce;O++)K.tweens[O].run(ut);return H.notifyWith(d,[K,ut,X]),ut<1&&ce?X:(ce||H.notifyWith(d,[K,1,0]),H.resolveWith(d,[K]),!1)},K=H.promise({elem:d,props:x.extend({},m),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},y),originalProperties:m,originalOptions:y,startTime:Wo||Ni(),duration:y.duration,tweens:[],createTween:function(st,X){var ut=x.Tween(d,K.opts,st,X,K.opts.specialEasing[st]||K.opts.easing);return K.tweens.push(ut),ut},stop:function(st){var X=0,ut=st?K.tweens.length:0;if(_)return this;for(_=!0;X<ut;X++)K.tweens[X].run(1);return st?(H.notifyWith(d,[K,1,0]),H.resolveWith(d,[K,st])):H.rejectWith(d,[K,st]),this}}),tt=K.props;for(function(st,X){var ut,O,ce,le,_e;for(ut in st)if(ce=X[O=rn(ut)],le=st[ut],Array.isArray(le)&&(ce=le[1],le=st[ut]=le[0]),ut!==O&&(st[O]=le,delete st[ut]),(_e=x.cssHooks[O])&&"expand"in _e)for(ut in le=_e.expand(le),delete st[O],le)ut in st||(st[ut]=le[ut],X[ut]=ce);else X[O]=ce}(tt,K.opts.specialEasing);A<T;A++)if(w=gr.prefilters[A].call(K,d,tt,K.opts))return Pt(w.stop)&&(x._queueHooks(K.elem,K.opts.queue).stop=w.stop.bind(w)),w;return x.map(tt,Ai,K),Pt(K.opts.start)&&K.opts.start.call(d,K),K.progress(K.opts.progress).done(K.opts.done,K.opts.complete).fail(K.opts.fail).always(K.opts.always),x.fx.timer(x.extend(F,{elem:d,anim:K,queue:K.opts.queue})),K}x.Animation=x.extend(gr,{tweeners:{"*":[function(d,m){var y=this.createTween(d,m);return Wl(y.elem,d,Ye.exec(m),y),y}]},tweener:function(d,m){Pt(d)?(m=d,d=["*"]):d=d.match(re);for(var y,w=0,_=d.length;w<_;w++)(gr.tweeners[y=d[w]]=gr.tweeners[y]||[]).unshift(m)},prefilters:[function(d,m,y){var w,_,A,T,H,F,K,tt,st="width"in m||"height"in m,X=this,ut={},O=d.style,ce=d.nodeType&&Ho(d),le=Gt.get(d,"fxshow");for(w in y.queue||(null==(T=x._queueHooks(d,"fx")).unqueued&&(T.unqueued=0,H=T.empty.fire,T.empty.fire=function(){T.unqueued||H()}),T.unqueued++,X.always(function(){X.always(function(){T.unqueued--,x.queue(d,"fx").length||T.empty.fire()})})),m)if(Jl.test(_=m[w])){if(delete m[w],A=A||"toggle"===_,_===(ce?"hide":"show")){if("show"!==_||!le||void 0===le[w])continue;ce=!0}ut[w]=le&&le[w]||x.style(d,w)}if((F=!x.isEmptyObject(m))||!x.isEmptyObject(ut))for(w in st&&1===d.nodeType&&(y.overflow=[O.overflow,O.overflowX,O.overflowY],null==(K=le&&le.display)&&(K=Gt.get(d,"display")),"none"===(tt=x.css(d,"display"))&&(K?tt=K:(Uo([d],!0),K=d.style.display||K,tt=x.css(d,"display"),Uo([d]))),("inline"===tt||"inline-block"===tt&&null!=K)&&"none"===x.css(d,"float")&&(F||(X.done(function(){O.display=K}),null==K&&(K="none"===(tt=O.display)?"":tt)),O.display="inline-block")),y.overflow&&(O.overflow="hidden",X.always(function(){O.overflow=y.overflow[0],O.overflowX=y.overflow[1],O.overflowY=y.overflow[2]})),F=!1,ut)F||(le?"hidden"in le&&(ce=le.hidden):le=Gt.access(d,"fxshow",{display:K}),A&&(le.hidden=!ce),ce&&Uo([d],!0),X.done(function(){for(w in ce||Uo([d]),Gt.remove(d,"fxshow"),ut)x.style(d,w,ut[w])})),F=Ai(ce?le[w]:0,w,X),w in le||(le[w]=F.start,ce&&(F.end=F.start,F.start=0))}],prefilter:function(d,m){m?gr.prefilters.unshift(d):gr.prefilters.push(d)}}),x.speed=function(d,m,y){var w=d&&"object"==typeof d?x.extend({},d):{complete:y||!y&&m||Pt(d)&&d,duration:d,easing:y&&m||m&&!Pt(m)&&m};return x.fx.off?w.duration=0:"number"!=typeof w.duration&&(w.duration=w.duration in x.fx.speeds?x.fx.speeds[w.duration]:x.fx.speeds._default),null!=w.queue&&!0!==w.queue||(w.queue="fx"),w.old=w.complete,w.complete=function(){Pt(w.old)&&w.old.call(this),w.queue&&x.dequeue(this,w.queue)},w},x.fn.extend({fadeTo:function(d,m,y,w){return this.filter(Ho).css("opacity",0).show().end().animate({opacity:m},d,y,w)},animate:function(d,m,y,w){var _=x.isEmptyObject(d),A=x.speed(m,y,w),T=function(){var H=gr(this,x.extend({},d),A);(_||Gt.get(this,"finish"))&&H.stop(!0)};return T.finish=T,_||!1===A.queue?this.each(T):this.queue(A.queue,T)},stop:function(d,m,y){var w=function(_){var A=_.stop;delete _.stop,A(y)};return"string"!=typeof d&&(y=m,m=d,d=void 0),m&&this.queue(d||"fx",[]),this.each(function(){var _=!0,A=null!=d&&d+"queueHooks",T=x.timers,H=Gt.get(this);if(A)H[A]&&H[A].stop&&w(H[A]);else for(A in H)H[A]&&H[A].stop&&Zl.test(A)&&w(H[A]);for(A=T.length;A--;)T[A].elem!==this||null!=d&&T[A].queue!==d||(T[A].anim.stop(y),_=!1,T.splice(A,1));!_&&y||x.dequeue(this,d)})},finish:function(d){return!1!==d&&(d=d||"fx"),this.each(function(){var m,y=Gt.get(this),w=y[d+"queue"],_=y[d+"queueHooks"],A=x.timers,T=w?w.length:0;for(y.finish=!0,x.queue(this,d,[]),_&&_.stop&&_.stop.call(this,!0),m=A.length;m--;)A[m].elem===this&&A[m].queue===d&&(A[m].anim.stop(!0),A.splice(m,1));for(m=0;m<T;m++)w[m]&&w[m].finish&&w[m].finish.call(this);delete y.finish})}}),x.each(["toggle","show","hide"],function(d,m){var y=x.fn[m];x.fn[m]=function(w,_,A){return null==w||"boolean"==typeof w?y.apply(this,arguments):this.animate(Us(m,!0),w,_,A)}}),x.each({slideDown:Us("show"),slideUp:Us("hide"),slideToggle:Us("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,m){x.fn[d]=function(y,w,_){return this.animate(m,y,w,_)}}),x.timers=[],x.fx.tick=function(){var d,m=0,y=x.timers;for(Wo=Date.now();m<y.length;m++)(d=y[m])()||y[m]!==d||y.splice(m--,1);y.length||x.fx.stop(),Wo=void 0},x.fx.timer=function(d){x.timers.push(d),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Ba||(Ba=!0,Pa())},x.fx.stop=function(){Ba=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(d,m){return d=x.fx&&x.fx.speeds[d]||d,this.queue(m=m||"fx",function(y,w){var _=vt.setTimeout(y,d);w.stop=function(){vt.clearTimeout(_)}})},is=Qt.createElement("input"),_i=Qt.createElement("select").appendChild(Qt.createElement("option")),is.type="checkbox",Vt.checkOn=""!==is.value,Vt.optSelected=_i.selected,(is=Qt.createElement("input")).value="t",is.type="radio",Vt.radioValue="t"===is.value;var tc,qs=x.expr.attrHandle;x.fn.extend({attr:function(d,m){return Lr(this,x.attr,d,m,1<arguments.length)},removeAttr:function(d){return this.each(function(){x.removeAttr(this,d)})}}),x.extend({attr:function(d,m,y){var w,_,A=d.nodeType;if(3!==A&&8!==A&&2!==A)return typeof d.getAttribute>"u"?x.prop(d,m,y):(1===A&&x.isXMLDoc(d)||(_=x.attrHooks[m.toLowerCase()]||(x.expr.match.bool.test(m)?tc:void 0)),void 0!==y?null===y?void x.removeAttr(d,m):_&&"set"in _&&void 0!==(w=_.set(d,y,m))?w:(d.setAttribute(m,y+""),y):_&&"get"in _&&null!==(w=_.get(d,m))?w:null==(w=x.find.attr(d,m))?void 0:w)},attrHooks:{type:{set:function(d,m){if(!Vt.radioValue&&"radio"===m&&_t(d,"input")){var y=d.value;return d.setAttribute("type",m),y&&(d.value=y),m}}}},removeAttr:function(d,m){var y,w=0,_=m&&m.match(re);if(_&&1===d.nodeType)for(;y=_[w++];)d.removeAttribute(y)}}),tc={set:function(d,m,y){return!1===m?x.removeAttr(d,y):d.setAttribute(y,y),y}},x.each(x.expr.match.bool.source.match(/\w+/g),function(d,m){var y=qs[m]||x.find.attr;qs[m]=function(w,_,A){var T,H,F=_.toLowerCase();return A||(H=qs[F],qs[F]=T,T=null!=y(w,_,A)?F:null,qs[F]=H),T}});var su=/^(?:input|select|textarea|button)$/i,au=/^(?:a|area)$/i;function An(d){return(d.match(re)||[]).join(" ")}function Vo(d){return d.getAttribute&&d.getAttribute("class")||""}function $s(d){return Array.isArray(d)?d:"string"==typeof d&&d.match(re)||[]}x.fn.extend({prop:function(d,m){return Lr(this,x.prop,d,m,1<arguments.length)},removeProp:function(d){return this.each(function(){delete this[x.propFix[d]||d]})}}),x.extend({prop:function(d,m,y){var w,_,A=d.nodeType;if(3!==A&&8!==A&&2!==A)return 1===A&&x.isXMLDoc(d)||(_=x.propHooks[m=x.propFix[m]||m]),void 0!==y?_&&"set"in _&&void 0!==(w=_.set(d,y,m))?w:d[m]=y:_&&"get"in _&&null!==(w=_.get(d,m))?w:d[m]},propHooks:{tabIndex:{get:function(d){var m=x.find.attr(d,"tabindex");return m?parseInt(m,10):su.test(d.nodeName)||au.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Vt.optSelected||(x.propHooks.selected={get:function(d){return null},set:function(d){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(d){var m,y,w,_,A,T;return Pt(d)?this.each(function(H){x(this).addClass(d.call(this,H,Vo(this)))}):(m=$s(d)).length?this.each(function(){if(w=Vo(this),y=1===this.nodeType&&" "+An(w)+" "){for(A=0;A<m.length;A++)y.indexOf(" "+(_=m[A])+" ")<0&&(y+=_+" ");T=An(y),w!==T&&this.setAttribute("class",T)}}):this},removeClass:function(d){var m,y,w,_,A,T;return Pt(d)?this.each(function(H){x(this).removeClass(d.call(this,H,Vo(this)))}):arguments.length?(m=$s(d)).length?this.each(function(){if(w=Vo(this),y=1===this.nodeType&&" "+An(w)+" "){for(A=0;A<m.length;A++)for(_=m[A];-1<y.indexOf(" "+_+" ");)y=y.replace(" "+_+" "," ");T=An(y),w!==T&&this.setAttribute("class",T)}}):this:this.attr("class","")},toggleClass:function(d,m){var y,w,_,A,T=typeof d,H="string"===T||Array.isArray(d);return Pt(d)?this.each(function(F){x(this).toggleClass(d.call(this,F,Vo(this),m),m)}):"boolean"==typeof m&&H?m?this.addClass(d):this.removeClass(d):(y=$s(d),this.each(function(){if(H)for(A=x(this),_=0;_<y.length;_++)A.hasClass(w=y[_])?A.removeClass(w):A.addClass(w);else void 0!==d&&"boolean"!==T||((w=Vo(this))&&Gt.set(this,"__className__",w),this.setAttribute&&this.setAttribute("class",w||!1===d?"":Gt.get(this,"__className__")||""))}))},hasClass:function(d){var m,y,w=0;for(m=" "+d+" ";y=this[w++];)if(1===y.nodeType&&-1<(" "+An(Vo(y))+" ").indexOf(m))return!0;return!1}});var jr=/\r/g;x.fn.extend({val:function(d){var m,y,w,_=this[0];return arguments.length?(w=Pt(d),this.each(function(A){var T;1===this.nodeType&&(null==(T=w?d.call(this,A,x(this).val()):d)?T="":"number"==typeof T?T+="":Array.isArray(T)&&(T=x.map(T,function(H){return null==H?"":H+""})),(m=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in m&&void 0!==m.set(this,T,"value")||(this.value=T))})):_?(m=x.valHooks[_.type]||x.valHooks[_.nodeName.toLowerCase()])&&"get"in m&&void 0!==(y=m.get(_,"value"))?y:"string"==typeof(y=_.value)?y.replace(jr,""):y??"":void 0}}),x.extend({valHooks:{option:{get:function(d){return x.find.attr(d,"value")??An(x.text(d))}},select:{get:function(d){var m,y,w,_=d.options,A=d.selectedIndex,T="select-one"===d.type,H=T?null:[],F=T?A+1:_.length;for(w=A<0?F:T?A:0;w<F;w++)if(((y=_[w]).selected||w===A)&&!y.disabled&&(!y.parentNode.disabled||!_t(y.parentNode,"optgroup"))){if(m=x(y).val(),T)return m;H.push(m)}return H},set:function(d,m){for(var y,w,_=d.options,A=x.makeArray(m),T=_.length;T--;)((w=_[T]).selected=-1<x.inArray(x.valHooks.option.get(w),A))&&(y=!0);return y||(d.selectedIndex=-1),A}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(d,m){if(Array.isArray(m))return d.checked=-1<x.inArray(x(d).val(),m)}},Vt.checkOn||(x.valHooks[this].get=function(d){return null===d.getAttribute("value")?"on":d.value})});var Gn=vt.location,Co={guid:Date.now()},Ri=/\?/;x.parseXML=function(d){var m,y;if(!d||"string"!=typeof d)return null;try{m=(new vt.DOMParser).parseFromString(d,"text/xml")}catch{}return y=m&&m.getElementsByTagName("parsererror")[0],m&&!y||x.error("Invalid XML: "+(y?x.map(y.childNodes,function(w){return w.textContent}).join("\n"):d)),m};var fe=/^(?:focusinfocus|focusoutblur)$/,ec=function(d){d.stopPropagation()};x.extend(x.event,{trigger:function(d,m,y,w){var _,A,T,H,F,K,tt,st,X=[y||Qt],ut=En.call(d,"type")?d.type:d,O=En.call(d,"namespace")?d.namespace.split("."):[];if(A=st=T=y=y||Qt,3!==y.nodeType&&8!==y.nodeType&&!fe.test(ut+x.event.triggered)&&(-1<ut.indexOf(".")&&(ut=(O=ut.split(".")).shift(),O.sort()),F=ut.indexOf(":")<0&&"on"+ut,(d=d[x.expando]?d:new x.Event(ut,"object"==typeof d&&d)).isTrigger=w?2:3,d.namespace=O.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+O.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=y),m=null==m?[d]:x.makeArray(m,[d]),tt=x.event.special[ut]||{},w||!tt.trigger||!1!==tt.trigger.apply(y,m))){if(!w&&!tt.noBubble&&!ct(y)){for(fe.test((H=tt.delegateType||ut)+ut)||(A=A.parentNode);A;A=A.parentNode)X.push(A),T=A;T===(y.ownerDocument||Qt)&&X.push(T.defaultView||T.parentWindow||vt)}for(_=0;(A=X[_++])&&!d.isPropagationStopped();)st=A,d.type=1<_?H:tt.bindType||ut,(K=(Gt.get(A,"events")||Object.create(null))[d.type]&&Gt.get(A,"handle"))&&K.apply(A,m),(K=F&&A[F])&&K.apply&&mr(A)&&(d.result=K.apply(A,m),!1===d.result&&d.preventDefault());return d.type=ut,w||d.isDefaultPrevented()||tt._default&&!1!==tt._default.apply(X.pop(),m)||!mr(y)||F&&Pt(y[ut])&&!ct(y)&&((T=y[F])&&(y[F]=null),x.event.triggered=ut,d.isPropagationStopped()&&st.addEventListener(ut,ec),y[ut](),d.isPropagationStopped()&&st.removeEventListener(ut,ec),x.event.triggered=void 0,T&&(y[F]=T)),d.result}},simulate:function(d,m,y){var w=x.extend(new x.Event,y,{type:d,isSimulated:!0});x.event.trigger(w,null,m)}}),x.fn.extend({trigger:function(d,m){return this.each(function(){x.event.trigger(d,m,this)})},triggerHandler:function(d,m){var y=this[0];if(y)return x.event.trigger(d,m,y,!0)}});var nc=/\[\]$/,Ti=/\r?\n/g,dt=/^(?:submit|button|image|reset|file)$/i,ls=/^(?:input|select|textarea|keygen)/i;function pn(d,m,y,w){var _;if(Array.isArray(m))x.each(m,function(A,T){y||nc.test(d)?w(d,T):pn(d+"["+("object"==typeof T&&null!=T?A:"")+"]",T,y,w)});else if(y||"object"!==ye(m))w(d,m);else for(_ in m)pn(d+"["+_+"]",m[_],y,w)}x.param=function(d,m){var y,w=[],_=function(A,T){var H=Pt(T)?T():T;w[w.length]=encodeURIComponent(A)+"="+encodeURIComponent(H??"")};if(null==d)return"";if(Array.isArray(d)||d.jquery&&!x.isPlainObject(d))x.each(d,function(){_(this.name,this.value)});else for(y in d)pn(y,d[y],m,_);return w.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=x.prop(this,"elements");return d?x.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!x(this).is(":disabled")&&ls.test(this.nodeName)&&!dt.test(d)&&(this.checked||!qo.test(d))}).map(function(d,m){var y=x(this).val();return null==y?null:Array.isArray(y)?x.map(y,function(w){return{name:m.name,value:w.replace(Ti,"\r\n")}}):{name:m.name,value:y.replace(Ti,"\r\n")}}).get()}});var cs=/%20/g,iu=/#.*$/,rc=/([?&])_=[^&]*/,lu=/^(.*?):[ \t]*([^\r\n]*)$/gm,cu=/^(?:GET|HEAD)$/,Ee=/^\/\//,Oi={},ds={},La="*/".concat("*"),Cn=Qt.createElement("a");function Yn(d){return function(m,y){"string"!=typeof m&&(y=m,m="*");var w,_=0,A=m.toLowerCase().match(re)||[];if(Pt(y))for(;w=A[_++];)"+"===w[0]?(w=w.slice(1)||"*",(d[w]=d[w]||[]).unshift(y)):(d[w]=d[w]||[]).push(y)}}function oc(d,m,y,w){var _={},A=d===ds;function T(H){var F;return _[H]=!0,x.each(d[H]||[],function(K,tt){var st=tt(m,y,w);return"string"!=typeof st||A||_[st]?A?!(F=st):void 0:(m.dataTypes.unshift(st),T(st),!1)}),F}return T(m.dataTypes[0])||!_["*"]&&T("*")}function Di(d,m){var y,w,_=x.ajaxSettings.flatOptions||{};for(y in m)void 0!==m[y]&&((_[y]?d:w||(w={}))[y]=m[y]);return w&&x.extend(!0,d,w),d}Cn.href=Gn.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Gn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Gn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":La,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,m){return m?Di(Di(d,x.ajaxSettings),m):Di(x.ajaxSettings,d)},ajaxPrefilter:Yn(Oi),ajaxTransport:Yn(ds),ajax:function(d,m){"object"==typeof d&&(m=d,d=void 0);var y,w,_,A,T,H,F,K,tt,st,X=x.ajaxSetup({},m=m||{}),ut=X.context||X,O=X.context&&(ut.nodeType||ut.jquery)?x(ut):x.event,ce=x.Deferred(),le=x.Callbacks("once memory"),_e=X.statusCode||{},sn={},de={},gn="canceled",he={readyState:0,getResponseHeader:function(be){var xe;if(F){if(!A)for(A={};xe=lu.exec(_);)A[xe[1].toLowerCase()+" "]=(A[xe[1].toLowerCase()+" "]||[]).concat(xe[2]);xe=A[be.toLowerCase()+" "]}return null==xe?null:xe.join(", ")},getAllResponseHeaders:function(){return F?_:null},setRequestHeader:function(be,xe){return null==F&&(be=de[be.toLowerCase()]=de[be.toLowerCase()]||be,sn[be]=xe),this},overrideMimeType:function(be){return null==F&&(X.mimeType=be),this},statusCode:function(be){var xe;if(be)if(F)he.always(be[he.status]);else for(xe in be)_e[xe]=[_e[xe],be[xe]];return this},abort:function(be){var xe=be||gn;return y&&y.abort(xe),zn(0,xe),this}};if(ce.promise(he),X.url=((d||X.url||Gn.href)+"").replace(Ee,Gn.protocol+"//"),X.type=m.method||m.type||X.method||X.type,X.dataTypes=(X.dataType||"*").toLowerCase().match(re)||[""],null==X.crossDomain){H=Qt.createElement("a");try{H.href=X.url,H.href=H.href,X.crossDomain=Cn.protocol+"//"+Cn.host!=H.protocol+"//"+H.host}catch{X.crossDomain=!0}}if(X.data&&X.processData&&"string"!=typeof X.data&&(X.data=x.param(X.data,X.traditional)),oc(Oi,X,m,he),F)return he;for(tt in(K=x.event&&X.global)&&0==x.active++&&x.event.trigger("ajaxStart"),X.type=X.type.toUpperCase(),X.hasContent=!cu.test(X.type),w=X.url.replace(iu,""),X.hasContent?X.data&&X.processData&&0===(X.contentType||"").indexOf("application/x-www-form-urlencoded")&&(X.data=X.data.replace(cs,"+")):(st=X.url.slice(w.length),X.data&&(X.processData||"string"==typeof X.data)&&(w+=(Ri.test(w)?"&":"?")+X.data,delete X.data),!1===X.cache&&(w=w.replace(rc,"$1"),st=(Ri.test(w)?"&":"?")+"_="+Co.guid+++st),X.url=w+st),X.ifModified&&(x.lastModified[w]&&he.setRequestHeader("If-Modified-Since",x.lastModified[w]),x.etag[w]&&he.setRequestHeader("If-None-Match",x.etag[w])),(X.data&&X.hasContent&&!1!==X.contentType||m.contentType)&&he.setRequestHeader("Content-Type",X.contentType),he.setRequestHeader("Accept",X.dataTypes[0]&&X.accepts[X.dataTypes[0]]?X.accepts[X.dataTypes[0]]+("*"!==X.dataTypes[0]?", "+La+"; q=0.01":""):X.accepts["*"]),X.headers)he.setRequestHeader(tt,X.headers[tt]);if(X.beforeSend&&(!1===X.beforeSend.call(ut,he,X)||F))return he.abort();if(gn="abort",le.add(X.complete),he.done(X.success),he.fail(X.error),y=oc(ds,X,m,he)){if(he.readyState=1,K&&O.trigger("ajaxSend",[he,X]),F)return he;X.async&&0<X.timeout&&(T=vt.setTimeout(function(){he.abort("timeout")},X.timeout));try{F=!1,y.send(sn,zn)}catch(be){if(F)throw be;zn(-1,be)}}else zn(-1,"No Transport");function zn(be,xe,Ko,Ia){var Rn,Zr,zr,to,Me,xn=xe;F||(F=!0,T&&vt.clearTimeout(T),y=void 0,_=Ia||"",he.readyState=0<be?4:0,Rn=200<=be&&be<300||304===be,Ko&&(to=function(Ze,$e,wn){for(var Hr,Tn,oe,Te,He=Ze.contents,Le=Ze.dataTypes;"*"===Le[0];)Le.shift(),void 0===Hr&&(Hr=Ze.mimeType||$e.getResponseHeader("Content-Type"));if(Hr)for(Tn in He)if(He[Tn]&&He[Tn].test(Hr)){Le.unshift(Tn);break}if(Le[0]in wn)oe=Le[0];else{for(Tn in wn){if(!Le[0]||Ze.converters[Tn+" "+Le[0]]){oe=Tn;break}Te||(Te=Tn)}oe=oe||Te}if(oe)return oe!==Le[0]&&Le.unshift(oe),wn[oe]}(X,he,Ko)),!Rn&&-1<x.inArray("script",X.dataTypes)&&x.inArray("json",X.dataTypes)<0&&(X.converters["text script"]=function(){}),to=function(Ze,$e,wn,Hr){var Tn,oe,Te,He,Le,wr={},fs=Ze.dataTypes.slice();if(fs[1])for(Te in Ze.converters)wr[Te.toLowerCase()]=Ze.converters[Te];for(oe=fs.shift();oe;)if(Ze.responseFields[oe]&&(wn[Ze.responseFields[oe]]=$e),!Le&&Hr&&Ze.dataFilter&&($e=Ze.dataFilter($e,Ze.dataType)),Le=oe,oe=fs.shift())if("*"===oe)oe=Le;else if("*"!==Le&&Le!==oe){if(!(Te=wr[Le+" "+oe]||wr["* "+oe]))for(Tn in wr)if((He=Tn.split(" "))[1]===oe&&(Te=wr[Le+" "+He[0]]||wr["* "+He[0]])){!0===Te?Te=wr[Tn]:!0!==wr[Tn]&&(oe=He[0],fs.unshift(He[1]));break}if(!0!==Te)if(Te&&Ze.throws)$e=Te($e);else try{$e=Te($e)}catch(eo){return{state:"parsererror",error:Te?eo:"No conversion from "+Le+" to "+oe}}}return{state:"success",data:$e}}(X,to,he,Rn),Rn?(X.ifModified&&((Me=he.getResponseHeader("Last-Modified"))&&(x.lastModified[w]=Me),(Me=he.getResponseHeader("etag"))&&(x.etag[w]=Me)),204===be||"HEAD"===X.type?xn="nocontent":304===be?xn="notmodified":(xn=to.state,Zr=to.data,Rn=!(zr=to.error))):(zr=xn,!be&&xn||(xn="error",be<0&&(be=0))),he.status=be,he.statusText=(xe||xn)+"",Rn?ce.resolveWith(ut,[Zr,xn,he]):ce.rejectWith(ut,[he,xn,zr]),he.statusCode(_e),_e=void 0,K&&O.trigger(Rn?"ajaxSuccess":"ajaxError",[he,X,Rn?Zr:zr]),le.fireWith(ut,[he,xn]),K&&(O.trigger("ajaxComplete",[he,X]),--x.active||x.event.trigger("ajaxStop")))}return he},getJSON:function(d,m,y){return x.get(d,m,y,"json")},getScript:function(d,m){return x.get(d,void 0,m,"script")}}),x.each(["get","post"],function(d,m){x[m]=function(y,w,_,A){return Pt(w)&&(A=A||_,_=w,w=void 0),x.ajax(x.extend({url:y,type:m,dataType:A,data:w,success:_},x.isPlainObject(y)&&y))}}),x.ajaxPrefilter(function(d){var m;for(m in d.headers)"content-type"===m.toLowerCase()&&(d.contentType=d.headers[m]||"")}),x._evalUrl=function(d,m,y){return x.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(w){x.globalEval(w,m,y)}})},x.fn.extend({wrapAll:function(d){var m;return this[0]&&(Pt(d)&&(d=d.call(this[0])),m=x(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&m.insertBefore(this[0]),m.map(function(){for(var y=this;y.firstElementChild;)y=y.firstElementChild;return y}).append(this)),this},wrapInner:function(d){return Pt(d)?this.each(function(m){x(this).wrapInner(d.call(this,m))}):this.each(function(){var m=x(this),y=m.contents();y.length?y.wrapAll(d):m.append(d)})},wrap:function(d){var m=Pt(d);return this.each(function(y){x(this).wrapAll(m?d.call(this,y):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(d){return!x.expr.pseudos.visible(d)},x.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new vt.XMLHttpRequest}catch{}};var Bi={0:200,1223:204},us=x.ajaxSettings.xhr();Vt.cors=!!us&&"withCredentials"in us,Vt.ajax=us=!!us,x.ajaxTransport(function(d){var m,y;if(Vt.cors||us&&!d.crossDomain)return{send:function(w,_){var A,T=d.xhr();if(T.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(A in d.xhrFields)T[A]=d.xhrFields[A];for(A in d.mimeType&&T.overrideMimeType&&T.overrideMimeType(d.mimeType),d.crossDomain||w["X-Requested-With"]||(w["X-Requested-With"]="XMLHttpRequest"),w)T.setRequestHeader(A,w[A]);m=function(H){return function(){m&&(m=y=T.onload=T.onerror=T.onabort=T.ontimeout=T.onreadystatechange=null,"abort"===H?T.abort():"error"===H?"number"!=typeof T.status?_(0,"error"):_(T.status,T.statusText):_(Bi[T.status]||T.status,T.statusText,"text"!==(T.responseType||"text")||"string"!=typeof T.responseText?{binary:T.response}:{text:T.responseText},T.getAllResponseHeaders()))}},T.onload=m(),y=T.onerror=T.ontimeout=m("error"),void 0!==T.onabort?T.onabort=y:T.onreadystatechange=function(){4===T.readyState&&vt.setTimeout(function(){m&&y()})},m=m("abort");try{T.send(d.hasContent&&d.data||null)}catch(H){if(m)throw H}},abort:function(){m&&m()}}}),x.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return x.globalEval(d),d}}}),x.ajaxPrefilter("script",function(d){void 0===d.cache&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),x.ajaxTransport("script",function(d){var m,y;if(d.crossDomain||d.scriptAttrs)return{send:function(w,_){m=x("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",y=function(A){m.remove(),y=null,A&&_("error"===A.type?404:200,A.type)}),Qt.head.appendChild(m[0])},abort:function(){y&&y()}}});var Xe,Qr=[],jn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=Qr.pop()||x.expando+"_"+Co.guid++;return this[d]=!0,d}}),x.ajaxPrefilter("json jsonp",function(d,m,y){var w,_,A,T=!1!==d.jsonp&&(jn.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&jn.test(d.data)&&"data");if(T||"jsonp"===d.dataTypes[0])return w=d.jsonpCallback=Pt(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,T?d[T]=d[T].replace(jn,"$1"+w):!1!==d.jsonp&&(d.url+=(Ri.test(d.url)?"&":"?")+d.jsonp+"="+w),d.converters["script json"]=function(){return A||x.error(w+" was not called"),A[0]},d.dataTypes[0]="json",_=vt[w],vt[w]=function(){A=arguments},y.always(function(){void 0===_?x(vt).removeProp(w):vt[w]=_,d[w]&&(d.jsonpCallback=m.jsonpCallback,Qr.push(w)),A&&Pt(_)&&_(A[0]),A=_=void 0}),"script"}),Vt.createHTMLDocument=((Xe=Qt.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xe.childNodes.length),x.parseHTML=function(d,m,y){return"string"!=typeof d?[]:("boolean"==typeof m&&(y=m,m=!1),m||(Vt.createHTMLDocument?((w=(m=Qt.implementation.createHTMLDocument("")).createElement("base")).href=Qt.location.href,m.head.appendChild(w)):m=Qt),A=!y&&[],(_=E.exec(d))?[m.createElement(_[1])]:(_=Fs([d],m,A),A&&A.length&&x(A).remove(),x.merge([],_.childNodes)));var w,_,A},x.fn.load=function(d,m,y){var w,_,A,T=this,H=d.indexOf(" ");return-1<H&&(w=An(d.slice(H)),d=d.slice(0,H)),Pt(m)?(y=m,m=void 0):m&&"object"==typeof m&&(_="POST"),0<T.length&&x.ajax({url:d,type:_||"GET",dataType:"html",data:m}).done(function(F){A=arguments,T.html(w?x("<div>").append(x.parseHTML(F)).find(w):F)}).always(y&&function(F,K){T.each(function(){y.apply(this,A||[F.responseText,K,F])})}),this},x.expr.pseudos.animated=function(d){return x.grep(x.timers,function(m){return d===m.elem}).length},x.offset={setOffset:function(d,m,y){var w,_,A,T,H,F,K=x.css(d,"position"),tt=x(d),st={};"static"===K&&(d.style.position="relative"),H=tt.offset(),A=x.css(d,"top"),F=x.css(d,"left"),("absolute"===K||"fixed"===K)&&-1<(A+F).indexOf("auto")?(T=(w=tt.position()).top,_=w.left):(T=parseFloat(A)||0,_=parseFloat(F)||0),Pt(m)&&(m=m.call(d,y,x.extend({},H))),null!=m.top&&(st.top=m.top-H.top+T),null!=m.left&&(st.left=m.left-H.left+_),"using"in m?m.using.call(d,st):tt.css(st)}},x.fn.extend({offset:function(d){if(arguments.length)return void 0===d?this:this.each(function(_){x.offset.setOffset(this,d,_)});var m,y,w=this[0];return w?w.getClientRects().length?{top:(m=w.getBoundingClientRect()).top+(y=w.ownerDocument.defaultView).pageYOffset,left:m.left+y.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var d,m,y,w=this[0],_={top:0,left:0};if("fixed"===x.css(w,"position"))m=w.getBoundingClientRect();else{for(m=this.offset(),y=w.ownerDocument,d=w.offsetParent||y.documentElement;d&&(d===y.body||d===y.documentElement)&&"static"===x.css(d,"position");)d=d.parentNode;d&&d!==w&&1===d.nodeType&&((_=x(d).offset()).top+=x.css(d,"borderTopWidth",!0),_.left+=x.css(d,"borderLeftWidth",!0))}return{top:m.top-_.top-x.css(w,"marginTop",!0),left:m.left-_.left-x.css(w,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&"static"===x.css(d,"position");)d=d.offsetParent;return d||Qe})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,m){var y="pageYOffset"===m;x.fn[d]=function(w){return Lr(this,function(_,A,T){var H;if(ct(_)?H=_:9===_.nodeType&&(H=_.defaultView),void 0===T)return H?H[m]:_[A];H?H.scrollTo(y?H.pageXOffset:T,y?T:H.pageYOffset):_[A]=T},d,w,arguments.length)}}),x.each(["top","left"],function(d,m){x.cssHooks[m]=as(Vt.pixelPosition,function(y,w){if(w)return w=Xn(y,m),js.test(w)?x(y).position()[m]+"px":w})}),x.each({Height:"height",Width:"width"},function(d,m){x.each({padding:"inner"+d,content:m,"":"outer"+d},function(y,w){x.fn[w]=function(_,A){var T=arguments.length&&(y||"boolean"!=typeof _),H=y||(!0===_||!0===A?"margin":"border");return Lr(this,function(F,K,tt){var st;return ct(F)?0===w.indexOf("outer")?F["inner"+d]:F.document.documentElement["client"+d]:9===F.nodeType?(st=F.documentElement,Math.max(F.body["scroll"+d],st["scroll"+d],F.body["offset"+d],st["offset"+d],st["client"+d])):void 0===tt?x.css(F,K,H):x.style(F,K,tt,H)},m,T?_:void 0,T)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,m){x.fn[m]=function(y){return this.on(m,y)}}),x.fn.extend({bind:function(d,m,y){return this.on(d,null,m,y)},unbind:function(d,m){return this.off(d,null,m)},delegate:function(d,m,y,w){return this.on(m,d,y,w)},undelegate:function(d,m,y){return 1===arguments.length?this.off(d,"**"):this.off(m,d||"**",y)},hover:function(d,m){return this.mouseenter(d).mouseleave(m||d)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,m){x.fn[m]=function(y,w){return 0<arguments.length?this.on(m,null,y,w):this.trigger(m)}});var Jr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;x.proxy=function(d,m){var y,w,_;if("string"==typeof m&&(y=d[m],m=d,d=y),Pt(d))return w=ne.call(arguments,2),(_=function(){return d.apply(m||this,w.concat(ne.call(arguments)))}).guid=d.guid=d.guid||x.guid++,_},x.holdReady=function(d){d?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=_t,x.isFunction=Pt,x.isWindow=ct,x.camelCase=rn,x.type=ye,x.now=Date.now,x.isNumeric=function(d){var m=x.type(d);return("number"===m||"string"===m)&&!isNaN(d-parseFloat(d))},x.trim=function(d){return null==d?"":(d+"").replace(Jr,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var Ma=vt.jQuery,on=vt.$;return x.noConflict=function(d){return vt.$===x&&(vt.$=on),d&&vt.jQuery===x&&(vt.jQuery=Ma),x},typeof qt>"u"&&(vt.jQuery=vt.$=x),x}),function(vt){vt.imageArea=function(qt,Wt){var kn,Ke,Wn,En,Ht=qt.options,ne=qt.$image,je=qt.$trigger,yr={},Cr=!0,Dt=!0,Vt=[0,0],Pt=[0,0],ct={id:Wt,x:0,y:0,z:0,height:0,width:0},Mn=function(){qt.blurAll(),ct.z=100,gt()},De=function(){return ct},ye=function(Et){ne.trigger(Et,[ct.id,qt.areas()])},mt=function(Et){var ee=Et||window.event||{};ee.cancelBubble=!0,ee.returnValue=!1,ee.stopPropagation&&ee.stopPropagation(),ee.preventDefault&&ee.preventDefault()},x=function(Et,ee){var ie,Tt;switch(Et){case"start":ie="mousedown",Tt="touchstart";break;case"move":ie="mousemove",Tt="touchmove";break;case"stop":ie="mouseup",Tt="touchend";break;default:return}ee&&jQuery.isFunction(ee)?vt(window.document).on(ie,ee).on(Tt,ee):vt(window.document).off(ie).off(Tt)},In=function(){kn.css({cursor:"default",width:ct.width,height:ct.height,left:ct.x,top:ct.y}),Ke.css({backgroundPosition:-ct.x-1+"px "+(-ct.y-1)+"px",cursor:Ht.allowMove?"move":"default",width:ct.width-2>0?ct.width-2:0,height:ct.height-2>0?ct.height-2:0,left:ct.x+1,top:ct.y+1}),Wn.css({width:ct.width-2>0?ct.width-2:0,left:ct.x+2,top:ct.y+1})},_t=function(Et){Ht.allowResize&&(Et?vt.each(yr,function(ee,ie){var Tt,Ae,re=Math.round(ie.width()/2),rt=Math.round(ie.height()/2),vo=ee[0],Kr=ee[ee.length-1];Tt="n"===vo?-rt:"s"===vo?ct.height-rt-1:Math.round(ct.height/2)-rt-1,Ae="e"===Kr?ct.width-re-1:"w"===Kr?-re:Math.round(ct.width/2)-re-1,ie.css({display:"block",left:ct.x+Ae,top:ct.y+Tt})}):vt(".select-areas-resize-handler").each(function(){vt(this).css({display:"none"})}))},ir=function(Et){En&&En.css({display:Et?"block":"none",left:ct.x+ct.width+1,top:ct.y-En.outerHeight()-1})},Ms=function(Et){kn.css({cursor:Et}),Ke.css({cursor:Et})},gt=function(Et){switch(Et){case"startSelection":qt._refresh(),In(),_t(),ir(!0);break;case"pickSelection":case"pickResizeHandler":_t();break;case"resizeSelection":In(),_t(),Ms("crosshair"),ir(!0);break;case"moveSelection":In(),_t(),Ms("move"),ir(!0);break;case"blur":In(),_t(),ir();break;default:In(),_t(!0),ir(!0)}},go=function(Et){mt(Et),Mn(),x("move",fr),x("stop",Vn);var ee=E(Et);Vt[0]=ee[0]-ct.x,Vt[1]=ee[1]-ct.y,gt("pickSelection")},kt=function(Et){mt(Et),Mn();var ee=Et.target.className.split(" ")[1];"w"===ee[ee.length-1]&&(Pt[0]+=ct.width,ct.x=Pt[0]-ct.width),"n"===ee[0]&&(Pt[1]+=ct.height,ct.y=Pt[1]-ct.height),"n"===ee||"s"===ee?Cr=!1:("e"===ee||"w"===ee)&&(Dt=!1),x("move",Fo),x("stop",Vn),gt("pickResizeHandler")},Fo=function(Et){mt(Et),Mn();var ee=E(Et),ie=ee[1]-Pt[1],Tt=ee[0]-Pt[0];Math.abs(Tt)<Ht.minSize[0]&&(Tt=Tt>=0?Ht.minSize[0]:-Ht.minSize[0]),Math.abs(ie)<Ht.minSize[1]&&(ie=ie>=0?Ht.minSize[1]:-Ht.minSize[1]),(Pt[0]+Tt<0||Pt[0]+Tt>ne.width())&&(Tt=-Tt),(Pt[1]+ie<0||Pt[1]+ie>ne.height())&&(ie=-ie),Ht.maxSize[0]>Ht.minSize[0]&&Ht.maxSize[1]>Ht.minSize[1]&&(Math.abs(Tt)>Ht.maxSize[0]&&(Tt=Tt>=0?Ht.maxSize[0]:-Ht.maxSize[0]),Math.abs(ie)>Ht.maxSize[1]&&(ie=ie>=0?Ht.maxSize[1]:-Ht.maxSize[1])),Cr&&(ct.width=Tt),Dt&&(ct.height=ie),Ht.aspectRatio&&(Tt>0&&ie>0||Tt<0&&ie<0?Cr?ie=Math.round(Tt/Ht.aspectRatio):Tt=Math.round(ie*Ht.aspectRatio):Cr?ie=-Math.round(Tt/Ht.aspectRatio):Tt=-Math.round(ie*Ht.aspectRatio),Pt[0]+Tt>ne.width()&&(Tt=ne.width()-Pt[0],ie=ie>0?Math.round(Tt/Ht.aspectRatio):-Math.round(Tt/Ht.aspectRatio)),Pt[1]+ie<0&&(ie=-Pt[1],Tt=Tt>0?-Math.round(ie*Ht.aspectRatio):Math.round(ie*Ht.aspectRatio)),Pt[1]+ie>ne.height()&&(ie=ne.height()-Pt[1],Tt=Tt>0?Math.round(ie*Ht.aspectRatio):-Math.round(ie*Ht.aspectRatio)),ct.width=Tt,ct.height=ie),ct.width<0?(ct.width=Math.abs(ct.width),ct.x=Pt[0]-ct.width):ct.x=Pt[0],ct.height<0?(ct.height=Math.abs(ct.height),ct.y=Pt[1]-ct.height):ct.y=Pt[1],ye("changing"),gt("resizeSelection")},fr=function(Et){if(mt(Et),Ht.allowMove){Mn();var ee=E(Et);ho({x:ee[0]-Vt[0],y:ee[1]-Vt[1]}),ye("changing")}},ho=function(Et){ct.x=Et.x>0?Et.x+ct.width<ne.width()?Et.x:ne.width()-ct.width:0,ct.y=Et.y>0?Et.y+ct.height<ne.height()?Et.y:ne.height()-ct.height:0,gt("moveSelection")},Vn=function(Et,ee){mt(Et),function(){vt.each(arguments,function(Et,ee){x(ee)})}("move","stop"),ee&&(ct.x=ee.x,ct.y=ee.y,ct.z=ee.z,ct.width=ee.width,ct.height=ee.height,In()),Pt[0]=ct.x,Pt[1]=ct.y,Cr=!0,Dt=!0,ye("changed"),gt("releaseSelection")},Ce=function(Et){ye("deleted"),mt(Et),Ke.remove(),kn.remove(),Wn.remove(),vt.each(yr,function(ee,ie){ie.remove()}),En&&En.remove(),qt._remove(Wt)},E=function(Et){var ee=function(Et){var ee=vt(Et).offset();return[ee.left,ee.top]}(ne);Et.pageX||(Et.originalEvent&&(Et=Et.originalEvent),Et.changedTouches&&(Et=Et.changedTouches[0]),Et.touches&&(Et=Et.touches[0]));var ie=Et.pageX-ee[0],Tt=Et.pageY-ee[1];return[ie=ie<0?0:ie>ne.width()?ne.width():ie,Tt=Tt<0?0:Tt>ne.height()?ne.height():Tt]};if(kn=vt("<div id='select-areas-outline_"+De().id+'\'  class="select-areas-outline"/>').css({opacity:Ht.outlineOpacity,position:"absolute"}).insertAfter(je),Ke=vt("<div />").addClass("select-areas-background-area").attr("id","select-areas-background-area_"+De().id).css({position:"absolute"}).insertAfter(kn),Wn=vt("<div id='select-areas-label-container_"+De().id+'\'  class="select-areas-label-container"/>').css({position:"absolute"}).insertAfter(je),Ht.allowResize&&vt.each(["nw","n","ne","e","se","s","sw","w"],function(Et,ee){yr[ee]=vt('<div class="select-areas-resize-handler '+ee+" select-areas-resize-handler_"+De().id+'"/>').css({opacity:.5,position:"absolute",cursor:ee+"-resize"}).insertAfter(Ke).mousedown(kt).bind("touchstart",kt)}),Ht.allowDelete){var bo=function(Et){return Et.click(Ce).bind("touchstart",Ce).bind("tap",Ce),Et};En=bo(vt("<div id='select-areas-delete_"+De().id+'\'  class="delete-area" />')).append(bo(vt('<div class="select-areas-delete-area" ><i class="fa fa-trash text-red-500 " aria-hidden="true"></i></div>'))).insertAfter(Ke)}return Ht.allowMove&&Ke.mousedown(go).bind("touchstart",go),Mn(),{getData:De,startSelection:function(Et){mt(Et),ct.width=Ht.minSize[0],ct.height=Ht.minSize[1],Mn(),x("move",Fo),x("stop",Vn),(Pt=E(Et))[0]+ct.width>ne.width()&&(Pt[0]=ne.width()-ct.width),Pt[1]+ct.height>ne.height()&&(Pt[1]=ne.height()-ct.height),ct.x=Pt[0],ct.y=Pt[1],gt("startSelection")},deleteSelection:Ce,options:Ht,blur:function(){ct.z=0,gt("blur")},focus:Mn,nudge:function(Et){Et.x=ct.x,Et.y=ct.y,Et.d&&(Et.y=ct.y+Et.d),Et.u&&(Et.y=ct.y-Et.u),Et.l&&(Et.x=ct.x-Et.l),Et.r&&(Et.x=ct.x+Et.r),ho(Et),ye("changed")},set:function(Et,ee){ct=vt.extend(ct,Et),Pt[0]=ct.x,Pt[1]=ct.y,ee||ye("changed")},contains:function(Et){return Et.x>=ct.x&&Et.x<=ct.x+ct.width&&Et.y>=ct.y&&Et.y<=ct.y+ct.height}}},vt.imageSelectAreas=function(){},vt.imageSelectAreas.prototype.init=function(qt,Wt){var Ht=this;this.options=vt.extend({allowEdit:!0,allowMove:!0,allowResize:!0,allowSelect:!0,allowDelete:!0,allowNudge:!0,aspectRatio:0,minSize:[0,0],maxSize:[0,0],width:0,maxAreas:0,outlineOpacity:.5,overlayOpacity:.5,areas:[],onChanging:null,onChanged:null,onDeleted:null},Wt),this.options.allowEdit||(this.options.allowSelect=this.options.allowMove=this.options.allowResize=this.options.allowDelete=!1),this._areas={},this.$image=vt(qt),this.ratio=1,this.options.width&&this.$image.width()&&this.options.width!==this.$image.width()&&(this.ratio=this.options.width/this.$image.width(),this.$image.width(this.options.width)),this.options.onChanging&&this.$image.on("changing",this.options.onChanging),this.options.onChanged&&this.$image.on("changed",this.options.onChanged),this.options.onDeleted&&this.$image.on("deleted",this.options.onDeleted),this.options.onLoaded&&this.$image.on("loaded",this.options.onLoaded),this.$holder=vt("<div />").css({position:"relative",width:this.$image.width(),height:this.$image.height()}),this.$image.wrap(this.$holder).css({position:"absolute"}),this.$overlay=vt('<div class="select-areas-overlay" />').css({opacity:this.options.overlayOpacity,position:"absolute",width:this.$image.width(),height:this.$image.height()}).insertAfter(this.$image),this.$trigger=vt("<div />").css({backgroundColor:"#000000",opacity:0,position:"absolute",width:this.$image.width(),height:this.$image.height(),top:"1px"}).addClass("trigger").insertAfter(this.$overlay),vt.each(this.options.areas,function(je,kn){Ht._add(kn,!0)}),this.blurAll(),this._refresh(),this.options.allowSelect&&this.$trigger.mousedown(vt.proxy(this.newArea,this)).on("touchstart",vt.proxy(this.newArea,this)),this.options.allowNudge&&vt("html").keydown(function(je){var Wn,Ke={37:"l",38:"u",39:"r",40:"d"}[je.which];if(Ke&&(Ht._eachArea(function(En){if(100===En.getData().z)return Wn=En,!1}),Wn)){var yr={};yr[Ke]=1,Wn.nudge(yr)}})},vt.imageSelectAreas.prototype._refresh=function(){var qt=this.areas().length;this.$overlay.css({display:qt?"block":"none"}),this.$trigger.css({cursor:this.options.allowSelect?"crosshair":"default"})},vt.imageSelectAreas.prototype._eachArea=function(qt){vt.each(this._areas,function(Wt,Ht){if(Ht)return qt(Ht,Wt)})},vt.imageSelectAreas.prototype._remove=function(qt){delete this._areas[qt],this._refresh()},vt.imageSelectAreas.prototype.remove=function(qt){this._areas[qt]&&this._areas[qt].deleteSelection()},vt.imageSelectAreas.prototype.newArea=function(qt){var Wt=-1;return this.blurAll(),this.options.maxAreas&&this.options.maxAreas<=this.areas().length||(this._eachArea(function(Ht,ne){Wt=Math.max(Wt,parseInt(ne,10))}),this._areas[Wt+=1]=vt.imageArea(this,Wt),qt&&this._areas[Wt].startSelection(qt)),Wt},vt.imageSelectAreas.prototype.set=function(qt,Wt,Ht){this._areas[qt]&&(Wt.id=qt,this._areas[qt].set(Wt,Ht),this._areas[qt].focus())},vt.imageSelectAreas.prototype._add=function(qt,Wt){var Ht=this.newArea();this.set(Ht,qt,Wt)},vt.imageSelectAreas.prototype.add=function(qt){var Wt=this;this.blurAll(),vt.isArray(qt)?vt.each(qt,function(Ht,ne){Wt._add(ne)}):this._add(qt),this._refresh(),!this.options.allowSelect&&!this.options.allowMove&&!this.options.allowResize&&!this.options.allowDelete&&this.blurAll()},vt.imageSelectAreas.prototype.reset=function(){var qt=this;this._eachArea(function(Wt,Ht){qt.remove(Ht)}),this._refresh()},vt.imageSelectAreas.prototype.destroy=function(){this.reset(),this.$holder.remove(),this.$overlay.remove(),this.$trigger.remove(),this.$image.css("width","").css("position","").unwrap(),this.$image.removeData("mainImageSelectAreas"),this.$image.off("changing changed loaded deleted")},vt.imageSelectAreas.prototype.areas=function(){var qt=[];return this._eachArea(function(Wt){qt.push(Wt.getData())}),qt},vt.imageSelectAreas.prototype.relativeAreas=function(){for(var qt=this.areas(),Wt=[],Ht=this.ratio,ne=function(kn){return Math.floor(kn/Ht)},je=0;je<qt.length;je++)Wt[je]=vt.extend({},qt[je]),Wt[je].x=ne(Wt[je].x),Wt[je].y=ne(Wt[je].y),Wt[je].width=ne(Wt[je].width),Wt[je].height=ne(Wt[je].height);return Wt},vt.imageSelectAreas.prototype.blurAll=function(){this._eachArea(function(qt){qt.blur()})},vt.imageSelectAreas.prototype.contains=function(qt){var Wt=!1;return this._eachArea(function(Ht){if(Ht.contains(qt))return Wt=!0,!1}),Wt},vt.selectAreas=function(qt,Wt){var Ht=vt(qt);if(!Ht.data("mainImageSelectAreas")){var ne=new vt.imageSelectAreas;ne.init(qt,Wt),Ht.data("mainImageSelectAreas",ne),Ht.trigger("loaded")}return Ht.data("mainImageSelectAreas")},vt.fn.selectAreas=function(qt){if(vt.imageSelectAreas.prototype[qt]){var Wt=vt.imageSelectAreas.prototype[qt].apply(vt.selectAreas(this),Array.prototype.slice.call(arguments,1));return typeof Wt>"u"?this:Wt}if("object"==typeof qt||!qt)return this.each(function(){var Ht=this,ne=new Image;ne.onload=function(){vt.selectAreas(Ht,qt)},ne.src=Ht.src}),this;vt.error("Method "+qt+" does not exist on jQuery.selectAreas")}}(jQuery);